[{"tags": ["c++", "mfc", "com", "atl", "variant"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550102040, "post_id": 54681194, "comment_id": 96151312, "body": "Underlying function should probably not support negative value. Maybe an other method or different <code>Unit</code> argument..."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1550102321, "post_id": 54681194, "comment_id": 96151401, "body": "Use <code>int16_t(65535)</code> to get <code>-1</code>, or <code>VT_I2</code> (instead of <code>VT_I4</code>) to specify 16bit integer."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1550102790, "post_id": 54681194, "comment_id": 96151549, "body": "<code>vaCount</code> is using <code>VT_INT</code> instead of <code>VT_I4</code>, like <code>vaUnit</code> uses. Does the problem go away if you change <code>VT_INT</code> to <code>VT_I4</code>?  The <code>.iVal</code> field is only valid for <code>VT_I2</code>, <code>VT_I4</code> uses <code>.lVal</code> and <code>VT_INT</code> uses <code>.intVal</code> instead. Storing a 32bit <code>-1</code> in <code>.lVal</code> or <code>.intVal</code> will fill all 4 bytes with all 1 bits, which when truncated to 16bits in <code>.iVal</code> will still be all 1s, thus still <code>-1</code>. A <i>signed</i> 16bit <code>-1</code> is the same bits as an <i>unsigned</i>  16bit <code>65535</code>. So you need to figure out why your <i>signed</i> values are being <i>interpretted</i> as <i>unsigned</i> values."}, {"owner": {"reputation": 103, "user_id": 986713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27e7cb2ef7c726afccd12ac8de5bd26?s=128&d=identicon&r=PG", "display_name": "user986713", "link": "https://stackoverflow.com/users/986713/user986713"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550103447, "post_id": 54681194, "comment_id": 96151752, "body": "The original helper function used <code>VT_I4</code> for <code>vaCount</code> with the result described above.  The code I posted was from an experiment to see what happened if I switched to using <code>VT_INT</code>, which the code above did not function as expected.  However, when I fixed the <code>.iVal&#47;.lVal</code> bug, the code now functions as expected!  As to why <code>VT_I4</code> will not let me pass a negative integer, it remains a mystery... but @RemyLebeau if you move your comment to an answer, I would love to mark it as correct!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550104439, "post_id": 54681194, "comment_id": 96151993, "body": "@user986713 done"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 986713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27e7cb2ef7c726afccd12ac8de5bd26?s=128&d=identicon&r=PG", "display_name": "user986713", "link": "https://stackoverflow.com/users/986713/user986713"}, "edited": false, "score": 0, "creation_date": 1550105022, "post_id": 54681487, "comment_id": 96152147, "body": "Using the CComVariant helper class would have saved me a lot of headache!  Thanks for the helpful comment and incredibly thorough and helpful answer!"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1550105231, "last_edit_date": 1550105231, "creation_date": 1550103873, "answer_id": 54681487, "question_id": 54681194, "link": "https://stackoverflow.com/questions/54681194/how-to-pass-negative-integer-to-com-ole-function/54681487#54681487", "title": "How to Pass Negative Integer to COM/OLE Function?", "body": "<h2>The problem is that you are misusing <code>VARIANT</code>.</h2>\n\n<p>You are setting <code>vaCount</code>'s <code>vt</code> field to <code>VT_INT</code> <sup>1</sup> but are then assigning your <code>int</code> value to its <code>.iVal</code> field instead of its <code>.intVal</code> field.  The <code>.iVal</code> field is a 16bit <code>short</code> that is used for <code>VT_I2</code>, whereas <code>.intVal</code> is a 32bit <code>int</code> used with <code>VT_INT</code>.</p>\n\n<p>Likewise, you are setting <code>vaUnit</code>'s <code>vt</code> to <code>VT_I4</code> but then are assigning your <code>int</code> value to its <code>.iVal</code> field as well, instead of its <code>.lVal</code> field, which is a 32bit <code>long</code>.</p>\n\n<p><sup>1: why you are using <code>VT_INT</code> at all, instead of the more traditional <code>VT_I4</code>?</sup></p>\n\n<p>Try this instead:</p>\n\n<pre><code>long Move(int Unit, int Count)\n{\n      long result;\n      static BYTE parms[] = VTS_PVARIANT VTS_PVARIANT ;\n\n      VARIANT vaUnit;\n      ::VariantInit(&amp;vaUnit);\n      vaUnit.vt = VT_I4;\n      vaUnit.lVal = Unit;\n\n      VARIANT vaCount;\n      ::VariantInit(&amp;vaCount);\n      vaCount.vt = VT_I4;\n      vaCount.lVal = Count;\n\n      InvokeHelper(0x6d, DISPATCH_METHOD, VT_I4, (void*)&amp;result, parms, &amp;vaUnit, &amp;vaCount);\n\n      ::VariantClear(&amp;vaUnit);\n      ::VariantClear(&amp;vaCount);\n\n      return result;\n}\n</code></pre>\n\n<p>That being said, I suggest you use the <a href=\"https://docs.microsoft.com/en-us/cpp/atl/reference/ccomvariant-class\" rel=\"nofollow noreferrer\"><code>CComVariant</code></a> or <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/variant-t-class\" rel=\"nofollow noreferrer\"><code>_variant_t</code></a> wrapper class instead of using <code>VARIANT</code> directly, and let it handle these kind of details for you.  Also, because <code>InvokeHelper()</code> throws an exception on failure, so let the wrapper call <code>VariantClear()</code> for you when it goes out of scope:</p>\n\n<pre><code>long Move(int Unit, int Count)\n{\n      long result;\n      static BYTE parms[] = VTS_PVARIANT VTS_PVARIANT ;\n\n      CComVariant vaUnit(Unit);\n      CComVariant vaCount(Count);\n\n      InvokeHelper(0x6d, DISPATCH_METHOD, VT_I4, (void*)&amp;result, parms, &amp;vaUnit, &amp;vaCount);\n\n      return result;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>long Move(int Unit, int Count)\n{\n      long result;\n      static BYTE parms[] = VTS_PVARIANT VTS_PVARIANT ;\n\n      _variant_t vaUnit(Unit);\n      _variant_t vaCount(Count);\n\n      InvokeHelper(0x6d, DISPATCH_METHOD, VT_I4, (void*)&amp;result, parms, &amp;vaUnit, &amp;vaCount);\n\n      return result;\n}\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 986713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27e7cb2ef7c726afccd12ac8de5bd26?s=128&d=identicon&r=PG", "display_name": "user986713", "link": "https://stackoverflow.com/users/986713/user986713"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 54681487, "answer_count": 1, "score": 0, "last_activity_date": 1550105231, "creation_date": 1550101667, "question_id": 54681194, "link": "https://stackoverflow.com/questions/54681194/how-to-pass-negative-integer-to-com-ole-function", "title": "How to Pass Negative Integer to COM/OLE Function?", "body": "<p>I am working on a Microsoft Word Add-In based on C++/ATL in Visual Studio 2010.  I also am using the MFC-based <code>COleDispatchDriver</code> and supporting classes and used Visual Studio's ClassWizard to generate wrapper classes from the Microsoft Word type library.  A sample wrapper for the Selection.Move function generated by the ClassWizard is below.</p>\n\n<pre><code>long Move(VARIANT * Unit, VARIANT * Count)\n{\n    long result;\n    static BYTE parms[] = VTS_PVARIANT VTS_PVARIANT ;\n    InvokeHelper(0x6d, DISPATCH_METHOD, VT_I4, (void*)&amp;result, parms, Unit, Count);\n    return result;\n}\n</code></pre>\n\n<p>For functions like the one above, I have also written helper functions to take care of the VARIANT argument passing, as shown below.</p>\n\n<pre><code>long Move(int Unit, int Count)\n{\n      long result;\n      static BYTE parms[] = VTS_PVARIANT VTS_PVARIANT ;\n\n      VARIANT vaUnit;\n      ::VariantInit(&amp;vaUnit);\n      vaUnit.vt = VT_I4;\n      vaUnit.iVal = Unit;\n\n      VARIANT vaCount;\n      ::VariantInit(&amp;vaCount);\n      vaCount.vt = VT_INT;\n      vaCount.iVal = Count;\n\n      InvokeHelper(0x6d, DISPATCH_METHOD, VT_I4, (void*)&amp;result, parms, &amp;vaUnit, &amp;vaCount);\n\n      ::VariantClear(&amp;vaUnit);\n      ::VariantClear(&amp;vaCount);\n\n      return result;\n}\n</code></pre>\n\n<p>When I call my function with a positive integer for the <code>Count</code> parameter, Word responds correctly, e.g. the following function call will move the selection \"forward\" (toward the end of the document) by one character.</p>\n\n<pre><code>m_oSelection.Move(1 /* wdCharacter */, 1);\n</code></pre>\n\n<p>However, if I try to move the selection one character \"backward\" (toward the beginning of the document) with the following function call, Word does not respond as expected.</p>\n\n<pre><code>m_oSelection.Move(1 /* wdCharacter */, -1);\n</code></pre>\n\n<p>It \"seems\" like the Word automation is treating the integer as an unsigned integer and my -1 value becomes 65535 causing the selection to jump forward.  Inspecting the <code>vaCount</code> variant on the line with the <code>InvokeHelper</code> function call, the VS debugger shows the <code>.iVal</code> value as -1, but the \"value\" of the <code>vaCount</code> variant is being shown as 65535.</p>\n\n<p>What am I missing to appropriately pass the negative integer as part of the COM function call?</p>\n"}, {"tags": ["c++", "cgal", "triangulation", "delaunay"], "comments": [{"owner": {"reputation": 5023, "user_id": 1728537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c48dc6e43dc0280ff1f750d2a0beb634?s=128&d=identicon&r=PG", "display_name": "lrineau", "link": "https://stackoverflow.com/users/1728537/lrineau"}, "edited": false, "score": 0, "creation_date": 1550138465, "post_id": 54681127, "comment_id": 96163300, "body": "Your question is far from being clear. I think the most important part might be &quot;I realy just want the triangulated, indexbased version of a 3d point cloud&quot;. The 3D triangulations in CGAL are pointers-based, but the <code>Vertex</code> type of the triangulation can be chosen to have the index of the original point. Would that suit your need?  And why do you talk about <code>Polyhedron_3</code> or <code>Surface_mesh</code>? The combinatorics of a 3D triangulation is very different from a surface mesh, and there is no possible conversion from one to the other."}, {"owner": {"reputation": 5023, "user_id": 1728537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c48dc6e43dc0280ff1f750d2a0beb634?s=128&d=identicon&r=PG", "display_name": "lrineau", "link": "https://stackoverflow.com/users/1728537/lrineau"}, "edited": false, "score": 0, "creation_date": 1550139212, "post_id": 54681127, "comment_id": 96163746, "body": "As for the line <code>tr.insert(points);</code>, the correct way to insert a range of points is: <code>tr.insert(points.begin(), points.end())</code>. That API might be improved with the new features of C++20 (concepts, and ranges concepts)."}, {"owner": {"reputation": 5023, "user_id": 1728537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c48dc6e43dc0280ff1f750d2a0beb634?s=128&d=identicon&r=PG", "display_name": "lrineau", "link": "https://stackoverflow.com/users/1728537/lrineau"}, "edited": false, "score": 0, "creation_date": 1550139342, "post_id": 54681127, "comment_id": 96163828, "body": "Third thought after your question: one could write a <code>Vertex</code> type for the triangulation that does not actually store the point, but only a pointer to it in an existing sequence of points (like your <code>points</code> vector). That way, the triangulation would not store the geometry at all, but only the combinatorics of the triangulation. That <code>Vertex</code> type is still to be written."}, {"owner": {"reputation": 540, "user_id": 4245882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UrBiX.jpg?s=128&g=1", "display_name": "stupidstudent", "link": "https://stackoverflow.com/users/4245882/stupidstudent"}, "reply_to_user": {"reputation": 5023, "user_id": 1728537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c48dc6e43dc0280ff1f750d2a0beb634?s=128&d=identicon&r=PG", "display_name": "lrineau", "link": "https://stackoverflow.com/users/1728537/lrineau"}, "edited": false, "score": 0, "creation_date": 1550143244, "post_id": 54681127, "comment_id": 96166121, "body": "Thank you for your help Irineau. I was kind of frustrated a 1am after reading the api and trying it for days. And my post was a bit rude. I am sorry.  In fact it i have a flat spiral as point cloud and I need it triangulated. The spiral is used to shoot rays through it, so I need the indices of the points in the triangulated version.   Do you know a nice library which triangulates point clouds to index based meshes?"}, {"owner": {"reputation": 540, "user_id": 4245882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UrBiX.jpg?s=128&g=1", "display_name": "stupidstudent", "link": "https://stackoverflow.com/users/4245882/stupidstudent"}, "reply_to_user": {"reputation": 5023, "user_id": 1728537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c48dc6e43dc0280ff1f750d2a0beb634?s=128&d=identicon&r=PG", "display_name": "lrineau", "link": "https://stackoverflow.com/users/1728537/lrineau"}, "edited": false, "score": 0, "creation_date": 1550144094, "post_id": 54681127, "comment_id": 96166560, "body": "Do you have an example for this?  &quot;triangulations in CGAL are pointers-based, but the Vertex type of the triangulation can be chosen to have the index of the original point&quot;"}, {"owner": {"reputation": 540, "user_id": 4245882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UrBiX.jpg?s=128&g=1", "display_name": "stupidstudent", "link": "https://stackoverflow.com/users/4245882/stupidstudent"}, "reply_to_user": {"reputation": 5023, "user_id": 1728537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c48dc6e43dc0280ff1f750d2a0beb634?s=128&d=identicon&r=PG", "display_name": "lrineau", "link": "https://stackoverflow.com/users/1728537/lrineau"}, "edited": false, "score": 0, "creation_date": 1550167104, "post_id": 54681127, "comment_id": 96180258, "body": "Alternativ product, not open source, but runs on almost everything and can return an index list:  <a href=\"http://www.geom.at/runtime/\" rel=\"nofollow noreferrer\">geom.at/runtime</a>"}], "owner": {"reputation": 540, "user_id": 4245882, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UrBiX.jpg?s=128&g=1", "display_name": "stupidstudent", "link": "https://stackoverflow.com/users/4245882/stupidstudent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 423, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1556214880, "creation_date": 1550101212, "last_edit_date": 1556214880, "question_id": 54681127, "link": "https://stackoverflow.com/questions/54681127/cgal-delaunay-triangulation-with-surface-mesh", "title": "CGAL Delaunay Triangulation with Surface Mesh", "body": "<p>I am used to index based meshes of triangles and I would love to keep using them. </p>\n\n<p>How do I create a Surface_mesh from Surface_mesh_default_triangulation_3\nand a vector of points?\nI tried this but failed</p>\n\n<pre><code> typedef CGAL::Surface_mesh_default_triangulation_3 Triangulation;\n\n typedef CGAL::Simple_cartesian&lt;double&gt;                      Kernel;\n typedef CGAL::Point_3&lt;Kernel&gt;                               Point;\n\n\n\n int main()\n {\n\n     Triangulation tr;\n     std::vector&lt;Point&gt; points;\n\n\n\n    //how do I create Surface_mesh from points?\n     tr.insert(points); //does sadly not work\n\n    Surface_mesh mesh = tr.createMeshFromPoints(points); //doesnt work\n}\n</code></pre>\n\n<p>if it is not possible to use a delaunay triangulation with surface mesh\nis there an easy way to use it on a Polyhedron_3 Mesh and convert it a\nsurface mesh?</p>\n\n<p>I realy just want the triangulated, indexbased version of a 3d point\ncloud without including pcl into the project.</p>\n\n<p>The project just needs a good, fast c++ triangulation of a randomly rotated spiral with 512 * i points in 3D. Wanted to try something new with ray traced data and I am a bit stuck. I could write an algorithm for triangulation myself, but we are using cgal now, and if it announces triangulation I am expecting cgal to offer it. To be honest cgal is one of the most unpleasant libs I ever worked with and I am used to ROS Code with PCL and Kinect Code from mechanical engineers.</p>\n\n<p>Edit:\nTry fade2d . It is free but not opensource. It is fast and gives good results.</p>\n"}, {"tags": ["c++", "opengl", "vertex-array-object"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 9288396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee37a53ede7011b9922b887f7d27bd61?s=128&d=identicon&r=PG&f=1", "display_name": "Ameen Izhac", "link": "https://stackoverflow.com/users/9288396/ameen-izhac"}, "edited": false, "score": 1, "creation_date": 1550400344, "post_id": 54681825, "comment_id": 96247432, "body": "aaaah ok thanks that makes sense and it fixed my problem, thanks."}], "tags": [], "owner": {"reputation": 26, "user_id": 3426961, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d1ef299e9f624cf379455d7373c9d1?s=128&d=identicon&r=PG&f=1", "display_name": "ZimmerA", "link": "https://stackoverflow.com/users/3426961/zimmera"}, "is_accepted": true, "score": 1, "last_activity_date": 1550107763, "last_edit_date": 1550107763, "creation_date": 1550106739, "answer_id": 54681825, "question_id": 54680813, "link": "https://stackoverflow.com/questions/54680813/my-opengl-vertex-array-no-longer-works-when-abstracted-out-into-a-class/54681825#54681825", "title": "My OpenGL Vertex Array no longer works when abstracted out into a class", "body": "<p>The problem is that you \"call\" <code>sizeof(vertex_buffer)</code> on this line: </p>\n\n<pre><code>GLCall(glBufferData(GL_ARRAY_BUFFER, sizeof(vertex_buffer), vertex_buffer, GL_STATIC_DRAW));\n</code></pre>\n\n<p><code>vertex_buffer</code> is a pointer to the array so if you \"call\" <code>sizeof</code> on it you will get the size of a <code>float*</code> and not the number of elements in the array times <code>sizeof(float)</code>.</p>\n\n<p>One way to solve this is passing the size of the array as a parameter.\nAnother thing you could do is send in the amount of elements in the array and multiply it by sizeof(float).</p>\n"}], "owner": {"reputation": 59, "user_id": 9288396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee37a53ede7011b9922b887f7d27bd61?s=128&d=identicon&r=PG&f=1", "display_name": "Ameen Izhac", "link": "https://stackoverflow.com/users/9288396/ameen-izhac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "closed_date": 1550120354, "accepted_answer_id": 54681825, "answer_count": 1, "score": 0, "last_activity_date": 1550107763, "creation_date": 1550099266, "question_id": 54680813, "link": "https://stackoverflow.com/questions/54680813/my-opengl-vertex-array-no-longer-works-when-abstracted-out-into-a-class", "closed_reason": "Duplicate", "title": "My OpenGL Vertex Array no longer works when abstracted out into a class", "body": "<p>I am using OpenGL to render some cubes and I have managed to get around 10 cubes rendering however I now want to abstract the code out into classes. I have started with the vertex array object.</p>\n\n<p>I have looked through the code and followed it through to the shader making sure vertex data gets where it needs to.</p>\n\n<pre><code>#include \"cube_vertex_array.h\"\n\ncube_vertex_array::cube_vertex_array(float* vertex_buffer, const std::string&amp; texture_file)\n{\n    GLCall(glGenVertexArrays(1, &amp;va_ID));\n    GLCall(glBindVertexArray(va_ID));\n\nGLCall(glGenBuffers(1, &amp;vb_ID));\nGLCall(glBindBuffer(GL_ARRAY_BUFFER, vb_ID));\nGLCall(glBufferData(GL_ARRAY_BUFFER, sizeof(vertex_buffer), vertex_buffer, GL_STATIC_DRAW));\nGLCall(glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 5 * sizeof(float), (void*)(0 * sizeof(float))));\nGLCall(glEnableVertexAttribArray(0));\nGLCall(glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 5 * sizeof(float), (void*)(3 * sizeof(float))));\nGLCall(glEnableVertexAttribArray(1));\n\nGLCall(glGenTextures(1, &amp;texture));\nGLCall(glBindTexture(GL_TEXTURE_2D, texture));\nGLCall(glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT));\nGLCall(glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT));\nGLCall(glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR));\nGLCall(glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR));\nint width, height, nrChanells;\nstbi_set_flip_vertically_on_load(true);\nunsigned char* data = stbi_load(texture_file.c_str(), &amp;width, &amp;height, &amp;nrChanells, 0);\nif (data)\n{\n    GLCall(glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, data));\n    GLCall(glGenerateMipmap(GL_TEXTURE_2D));\n}\nelse { std::cout &lt;&lt; \"failed to load texture\" &lt;&lt; std::endl; }\nstbi_image_free(data);\n\nGLCall(glBindVertexArray(0));\n}\n\nvoid cube_vertex_array::bind()\n{\n    GLCall(glBindVertexArray(va_ID));\n}\n</code></pre>\n\n<p>Also, here is the part of main() that uses this class:</p>\n\n<pre><code>main()\n{\ncube_vertex_array cube_1(vertices, \"resources/test.png\");\ncube_1.bind();\nwhile (!glfwWindowShouldClose(window))\n    {\n    cube_1.bind();\n    GLCall(glDrawArrays(GL_TRIANGLES, 0, 36));\n    }\n    GLCall(glDeleteVertexArrays(1, &amp;cube_1.va_ID));                                                                             \nGLCall(glDeleteBuffers(1, &amp;cube_1.vb_ID));\n}   \n</code></pre>\n\n<p>I expect to see multiple cubes rendering however this doesn't happen. If I implement the vertex array directly into the main file, the code renders cubes however it does not render anything when abstracted into a class. What could be the problem here?</p>\n"}, {"tags": ["c++", "boost", "c++03"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1550099467, "post_id": 54680798, "comment_id": 96150603, "body": "The type for <code>myFunc</code>is wrong, it should be <code>boost::function&lt;void()&gt; myFunc</code>, then just <code>myFunc()</code>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1550099507, "post_id": 54680798, "comment_id": 96150622, "body": "or <code>auto myFunc</code>."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 2, "creation_date": 1550099967, "post_id": 54680798, "comment_id": 96150757, "body": "Probably not <code>auto myFunc</code> for C++03"}], "answers": [{"tags": [], "owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 3, "last_activity_date": 1550099507, "creation_date": 1550099507, "answer_id": 54680865, "question_id": 54680798, "link": "https://stackoverflow.com/questions/54680798/how-to-call-a-boostfunction-object-with-all-arguments-bound/54680865#54680865", "title": "How to call a boost::function object with all arguments bound", "body": "<p>A function object with \"all parameters bound\" has no parameters, so its type would be <code>boost::function&lt;void()&gt;</code>. You need</p>\n\n<pre><code>boost::function&lt;void()&gt; myFunc = boost::bind(&amp;func, &amp;myInt1);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": false, "score": 2, "last_activity_date": 1550100622, "creation_date": 1550100622, "answer_id": 54681037, "question_id": 54680798, "link": "https://stackoverflow.com/questions/54680798/how-to-call-a-boostfunction-object-with-all-arguments-bound/54681037#54681037", "title": "How to call a boost::function object with all arguments bound", "body": "<p>A better type for your <code>myFunc</code> variable would be <code>boost::function&lt;void()&gt;</code>, because with all arguments of the original <code>func</code> bound, no arguments are really needed to call the resulting wrapper.</p>\n\n<pre><code>boost::function&lt;void()&gt; myFunc = boost::bind(&amp;func, &amp;myInt1);\n</code></pre>\n\n<p>This would in fact allow you to call the function with just:</p>\n\n<pre><code>myFunc();\n</code></pre>\n\n<hr>\n\n<p>But the reason the compiler allowed the <code>boost::function&lt;void(void*)&gt;</code> type there is that the result of a <code>boost::bind</code> call can be called with more arguments than necessary if you choose to, and extra arguments are just ignored.  One thing this does is makes situations like this a bit more consistent:</p>\n\n<pre><code>void f(int, int);\n// g1 acts the same as f:\nboost::function&lt;void(int, int)&gt; g1 = boost::bind(f, _1, _2);\n// g2 swaps the order of arguments when calling f:\nboost::function&lt;void(int, int)&gt; g2 = boost::bind(f, _2, _1);\n// g3 ignores its first argument and passes the second to f twice:\nboost::function&lt;void(int, int)&gt; g3 = boost::bind(f, _2, _2);\n// g4 ignores its second argument and passes the first to f twice:\nboost::function&lt;void(int, int)&gt; g4 = boost::bind(f, _1, _1);\n</code></pre>\n\n<p>In the <code>g4</code> initialization, we can say the <code>bind</code> expression is just another bound function that can be called with exactly two <code>int</code> arguments, because it doesn't use any placeholders with position larger than 2.  It can also be called with just one argument since <code>_2</code> itself isn't ever used either, but that doesn't make the above false.</p>\n\n<p>So similarly, in your code initializing <code>boost::function&lt;void(void*)&gt;</code>, the compiler accepts the completely bound <code>bind</code> expression as something which can validly be called with one argument, since it doesn't use any placeholders with position larger than 1.  Though since in fact it doesn't use the placeholder <code>_1</code> with position exactly 1 either, the <code>void*</code> input when used in that way just ends up being ignored.</p>\n"}], "owner": {"reputation": 2445, "user_id": 3476780, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/abf771bddcd864626a0e1499ccfc699b?s=128&d=identicon&r=PG&f=1", "display_name": "yano", "link": "https://stackoverflow.com/users/3476780/yano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "accepted_answer_id": 54680865, "answer_count": 2, "score": 1, "last_activity_date": 1550100622, "creation_date": 1550099161, "last_edit_date": 1550099275, "question_id": 54680798, "link": "https://stackoverflow.com/questions/54680798/how-to-call-a-boostfunction-object-with-all-arguments-bound", "title": "How to call a boost::function object with all arguments bound", "body": "<p>I've been <a href=\"https://www.boost.org/doc/libs/1_63_0/libs/bind/doc/html/bind.html\" rel=\"nofollow noreferrer\">reading up</a> on <code>boost::function</code> and <code>boost::bind</code>, however, I can't seem to figure out a \"good way\" to call a <code>boost</code> function if all the arguments are bound (I think that's the right terminology).  Below is an untested MCVE (copying-and-pasting my real code is not ideal).</p>\n\n<pre><code>#include \"boost/function.hpp\"\n#include \"boost/bind.hpp\"\n#include &lt;iostream&gt;\n\nvoid func(void* args)\n{\n  int* myInt = static_cast&lt;int*&gt;(args);\n  if (myInt != NULL)\n  {\n    std::cout &lt;&lt; \"myInt = \" &lt;&lt; *myInt &lt;&lt; std::endl;\n  }\n  else\n  {\n    std::cout &lt;&lt; \"args is NULL\" &lt;&lt; std::endl;\n  }\n}\n\nint main()\n{\n  int myInt1 = 5;\n  int myInt2 = 45;\n\n  boost::function&lt;void(void* args)&gt; myFunc = boost::bind(&amp;func, &amp;myInt1);\n\n  // here's my problem,, how do I call myFunc?\n  myFunc();  // this does not compile due to missing arguments\n  myFunc;    // this is essentially a no-op. The function doesn't execute,\n             // and if I put a breakpoint here, it either goes to the next\n             // line or I get a warning that no executable code exists here\n\n  // after some experimentation, I realized I can do this and it works\n  myFunc(NULL);  // this prints out \"myInt = 5\"\n\n  // this also prints out \"myInt = 5\"\n  boost::bind(&amp;func, &amp;myInt1)();\n\n  // finally, this prints out \"myInt = 5\" as well\n  myFunc(&amp;myInt2);\n\n  return 0;\n}\n</code></pre>\n\n<p>So my question is, what's the preferred/right way to call <code>myFunc</code>?  I've successfully called functions with the <code>_1</code>, <code>_2</code>, etc argument placeholders by passing in the appropriate arguments.. maybe in practice there are placeholders almost all the time? <code>myFunc(NULL)</code> works, but it seems silly to me that I must essentially make up arguments if I've already bound them (and what I pass in doesn't matter anyway).  In my real code, I actually want to call <code>myFunc</code> in a different function (so <code>boost::bind(&amp;func, &amp;myInt1)();</code> isn't an option), and I'm doing so inside an object of a class, so I hope the example I've provided exhibits identical behavior to what I'm seeing in my real code.  I'm using Visual Studio 2013, and c++11 or later cannot be used.</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"comments": [{"owner": {"reputation": 750, "user_id": 6509531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3deff0730998b5c350c5b2006980016c?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Mueller", "link": "https://stackoverflow.com/users/6509531/liam-mueller"}, "edited": false, "score": 0, "creation_date": 1550100198, "post_id": 54680792, "comment_id": 96150813, "body": "I&#39;ve tried <code>.&#47;b2 install --prefix=&quot;$HOME&#47;dev&#47;emulator&#47;src&#47;boost&quot; --includedir=headers --libdir=dist --with-date_time</code>, but I get no output at $HOME/dev/emulator/src/boost."}, {"owner": {"reputation": 1590, "user_id": 7885426, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6980b93acb857452d17d9584a7bd97b7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeNoob", "link": "https://stackoverflow.com/users/7885426/codenoob"}, "edited": false, "score": 0, "creation_date": 1601821107, "post_id": 54680792, "comment_id": 113518438, "body": "For me this worked whereas the <code>.&#47;b2 --prefix ..</code> did not"}], "tags": [], "owner": {"reputation": 3649, "user_id": 294569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05c97ccc8981952c53fa09dadfafb132?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/294569/damian"}, "is_accepted": false, "score": 2, "last_activity_date": 1550105512, "last_edit_date": 1550105512, "creation_date": 1550099134, "answer_id": 54680792, "question_id": 54680708, "link": "https://stackoverflow.com/questions/54680708/installing-boost-to-custom-directory/54680792#54680792", "title": "Installing Boost to custom directory", "body": "<p>Try </p>\n\n<pre><code>./bootstrap.sh --prefix=path/to/installation/prefix\n./b2 install\n</code></pre>\n\n<p>So that means first bootstrap b2 and then use it to build and install boost.</p>\n"}, {"comments": [{"owner": {"reputation": 750, "user_id": 6509531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3deff0730998b5c350c5b2006980016c?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Mueller", "link": "https://stackoverflow.com/users/6509531/liam-mueller"}, "edited": false, "score": 0, "creation_date": 1550106631, "post_id": 54681476, "comment_id": 96152523, "body": "This fixed my problem. Just wish there was a way to build date_time and not copy all of Boost."}], "tags": [], "owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "is_accepted": true, "score": 1, "last_activity_date": 1550103763, "creation_date": 1550103763, "answer_id": 54681476, "question_id": 54680708, "link": "https://stackoverflow.com/questions/54680708/installing-boost-to-custom-directory/54681476#54681476", "title": "Installing Boost to custom directory", "body": "<p>You need to use your directory in both steps:</p>\n\n<pre><code>DST_DIR=${HOME}/dev/emulator/src/boost\n\n./bootstrap.sh --prefix=${DST_DIR} --includedir=headers --libdir=dist --with-libraries=date_time\n./b2 --prefix=${DST_DIR} install\n</code></pre>\n"}], "owner": {"reputation": 750, "user_id": 6509531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3deff0730998b5c350c5b2006980016c?s=128&d=identicon&r=PG&f=1", "display_name": "Liam Mueller", "link": "https://stackoverflow.com/users/6509531/liam-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2475, "favorite_count": 0, "accepted_answer_id": 54681476, "answer_count": 2, "score": 2, "last_activity_date": 1550105512, "creation_date": 1550098556, "question_id": 54680708, "link": "https://stackoverflow.com/questions/54680708/installing-boost-to-custom-directory", "title": "Installing Boost to custom directory", "body": "<p>I have tried following <a href=\"https://www.boost.org/doc/libs/1_66_0/more/getting_started/unix-variants.html\" rel=\"nofollow noreferrer\">the tutorial</a> Boost gives on their documentation for installing boost and have looked at a few other questions here to try to determine why I can't install Boost at a custom location. Perhaps I'm misunderstanding, but the <code>--prefix</code> option is supposed to specify where the Boost headers and libs will go, then <code>bootstrapper.sh</code> creates a <code>.jam</code> file that is used when <code>b2</code> or <code>bjam</code> is run.</p>\n\n<p>When I issue the following command</p>\n\n<pre><code> ./bootstrap.sh --prefix=\"$HOME/dev/emulator/src/boost\" --includedir=headers --libdir=dist --with-libraries=date_time\n</code></pre>\n\n<p>I see that the correct lines are added to the generated <code>project-config.jam</code> file</p>\n\n<pre><code>option.set prefix : /home/liam/dev/emulator/src/boost ;\noption.set exec-prefix : /home/liam/dev/emulator/src/boost ;\noption.set libdir : dist ;\noption.set includedir : headers ;\n</code></pre>\n\n<p>However, when I run <code>./b2</code> as instructed by the documentation, it installs the Boost libraries to the source folder; i.e.</p>\n\n<pre><code>The following directory should be added to compiler include paths:\n\n    /home/liam/Downloads/brave/boost_1_66_0\n\nThe following directory should be added to linker library paths:\n\n    /home/liam/Downloads/brave/boost_1_66_0/stage/lib\n</code></pre>\n\n<p>And running <code>./b2 install</code> gives me no file output to the intended directory either.</p>\n"}, {"tags": ["c++", "c-strings"], "comments": [{"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "edited": false, "score": 0, "creation_date": 1550097936, "post_id": 54680446, "comment_id": 96150080, "body": "Do you have to return only those options which start with <code>Se</code>? Also, If multiple options are these with <code>Se</code>, What are we supposed to do?"}, {"owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "edited": false, "score": 0, "creation_date": 1550098005, "post_id": 54680446, "comment_id": 96150114, "body": "As you&#39;ve likely noticed, entering &#39;S&#39; or &#39;Sel&#39; return &quot;Sell 3. Convert X. Exit&quot;. This is because you haven&#39;t thought about an appropriate data structure to streamline the process. If you decide to keep the C-style strings then you also need to parse out the selections that is picked. to find a proper start position and also its end, i.e., &#39;\\n&#39;."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1550098055, "post_id": 54680446, "comment_id": 96150136, "body": "Since this is C++ you should be using <code>std::string</code> whenever possible and avoid using C-style raw character buffers."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550098076, "post_id": 54680446, "comment_id": 96150144, "body": "The line <code>list[index];</code> doesn&#39;t do anything. You fetch a value and discard it. It&#39;s also far from clear why you&#39;re displaying your menu text one character at a time when <code>cout &lt;&lt; &quot;1. ...\\n&quot;;</code> would do the job."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1550098395, "post_id": 54680446, "comment_id": 96150249, "body": "<a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">Your Rubber Duck</a> would like to discuss the <code>while (list[index] != &#39;\\0&#39;)</code> loop with you."}, {"owner": {"reputation": 39, "user_id": 8858335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2b143a42b99616291023af536caf39?s=128&d=identicon&r=PG&f=1", "display_name": "mjzach22", "link": "https://stackoverflow.com/users/8858335/mjzach22"}, "edited": false, "score": 0, "creation_date": 1550105475, "post_id": 54680446, "comment_id": 96152236, "body": "My plan of action is to use a loop to count the char starting at the 1st &#39;\\n&#39; on the left and right of that specific char, or chars select. Would a while loop to retrieve the char value until it hits the &#39;\\n&#39; work ? Also, is my plan of finding that first &#39;\\n&#39; on the left as the starting point for the while loop a good idea?"}], "owner": {"reputation": 39, "user_id": 8858335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2b143a42b99616291023af536caf39?s=128&d=identicon&r=PG&f=1", "display_name": "mjzach22", "link": "https://stackoverflow.com/users/8858335/mjzach22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550106814, "creation_date": 1550097006, "last_edit_date": 1550106814, "question_id": 54680446, "link": "https://stackoverflow.com/questions/54680446/printing-specific-characters-from-a-char-array", "title": "Printing specific characters from a char Array", "body": "<p>Im working on this program where a user will enter a \"S\" or \"Sell, and the program looks for those cstring values in the char array and If found will return the menu option starting from the first '\\n' and the last '\\n'. So entering 'S' or 'Se' will return '2. Sell'. This is where I'm stuck on. </p>\n\n<p>UPDATED! Now just trying to see if I can pull in that '#. ' when a solution is selected? (if possible)</p>\n\n<pre><code>#include \"pch.h\"\n#include &lt;iostream&gt;\n#include &lt;cstring&gt;\n\nusing namespace std;\n\n\nvoid promptForInput(char list[]) {\nchar *strPtr = nullptr;\nconst int ANSW = 10;\nchar line[ANSW];\nint num = 0;\n\ncout &lt;&lt; \"Enter an option: \";\ncin.getline(line, ANSW);\n\nstrPtr = strstr(list, line);\nwhile (strPtr[num] != '\\n' &amp;&amp; strPtr[num] != '\\0')\n{\n    cout &lt;&lt; strPtr[num];\n    num++;\n}\n\n\n}\n\nint main()\n{\nint count = 0;\n\nchar menu[] = \"1. Buy\\n2. Sell\\n3. Convert\\nX. Exit\\n\";\n\nwhile (menu[count]){\n    cout &lt;&lt; menu[count];\n    count++;\n}\n\npromptForInput(menu);\n</code></pre>\n\n<p>}</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550097147, "post_id": 54680444, "comment_id": 96149833, "body": "Do you have to write the code yourself?  <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy</code></a> will let you copy one range to another"}, {"owner": {"reputation": 9, "user_id": 11059011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ded8f696c0f5ab75f4e473342babdd1?s=128&d=identicon&r=PG&f=1", "display_name": "clueless_b", "link": "https://stackoverflow.com/users/11059011/clueless-b"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550099027, "post_id": 54680444, "comment_id": 96150489, "body": "@NathanOliver yes, I have to write the code myself, so I can&#39;t use std::copy. I have to copy array2 to the first array while dereferencing my pointer, so using point[0], point[1], etc is not allowed"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550103062, "post_id": 54680444, "comment_id": 96151630, "body": "<code>pointer[index]</code> <i>IS</i> dereferencing the <code>pointer</code>, it is identical to <code>*(pointer + index)</code>"}, {"owner": {"reputation": 9, "user_id": 11059011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ded8f696c0f5ab75f4e473342babdd1?s=128&d=identicon&r=PG&f=1", "display_name": "clueless_b", "link": "https://stackoverflow.com/users/11059011/clueless-b"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550104009, "post_id": 54680444, "comment_id": 96151890, "body": "@RemyLebeau Right. I just can&#39;t figure out how to copy the array using that though"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 11059011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ded8f696c0f5ab75f4e473342babdd1?s=128&d=identicon&r=PG&f=1", "display_name": "clueless_b", "link": "https://stackoverflow.com/users/11059011/clueless-b"}, "edited": false, "score": 0, "creation_date": 1550099086, "post_id": 54680574, "comment_id": 96150507, "body": "are p and q supposed to be new pointers, or is p supposed to be the pointer I already established?"}, {"owner": {"reputation": 9, "user_id": 11059011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ded8f696c0f5ab75f4e473342babdd1?s=128&d=identicon&r=PG&f=1", "display_name": "clueless_b", "link": "https://stackoverflow.com/users/11059011/clueless-b"}, "edited": false, "score": 0, "creation_date": 1550100280, "post_id": 54680574, "comment_id": 96150843, "body": "also I didn&#39;t mention it, but I&#39;m copying values 200 - 299 into the first array"}, {"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "reply_to_user": {"reputation": 9, "user_id": 11059011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ded8f696c0f5ab75f4e473342babdd1?s=128&d=identicon&r=PG&f=1", "display_name": "clueless_b", "link": "https://stackoverflow.com/users/11059011/clueless-b"}, "edited": false, "score": 0, "creation_date": 1550102841, "post_id": 54680574, "comment_id": 96151568, "body": "Yes, <code>p</code> and <code>q</code> are new pointers.  You can call them whatever you want.  I updated the answer to only copy the last 100 elements."}, {"owner": {"reputation": 9, "user_id": 11059011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ded8f696c0f5ab75f4e473342babdd1?s=128&d=identicon&r=PG&f=1", "display_name": "clueless_b", "link": "https://stackoverflow.com/users/11059011/clueless-b"}, "edited": false, "score": 0, "creation_date": 1550103851, "post_id": 54680574, "comment_id": 96151846, "body": "Alright, makes sense. I&#39;m running the code and it&#39;s giving me the memory addresses. If I wanted to print out the actual numbers, would I do something like nums = *q, and then cout &lt;&lt; nums ?"}, {"owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "reply_to_user": {"reputation": 9, "user_id": 11059011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ded8f696c0f5ab75f4e473342babdd1?s=128&d=identicon&r=PG&f=1", "display_name": "clueless_b", "link": "https://stackoverflow.com/users/11059011/clueless-b"}, "edited": false, "score": 0, "creation_date": 1550104027, "post_id": 54680574, "comment_id": 96151894, "body": "Yes, or just <code>cout &lt;&lt; *q;</code>  Inside the loop, that is."}], "tags": [], "owner": {"reputation": 5867, "user_id": 9125195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75fc90d1f6de6ff28c739b85bdb82f4c?s=128&d=identicon&r=PG&f=1", "display_name": "Sid S", "link": "https://stackoverflow.com/users/9125195/sid-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1550102722, "last_edit_date": 1550102722, "creation_date": 1550097670, "answer_id": 54680574, "question_id": 54680444, "link": "https://stackoverflow.com/questions/54680444/dereferencing-pointers-to-make-a-copy-of-an-array/54680574#54680574", "title": "Dereferencing pointers to make a copy of an array", "body": "<p>You want something like this:</p>\n\n<pre><code>for (int *p = array1 + 200, *q = array2 + 200; p &lt; array1 + 300; ++p, ++q)\n{\n    *q = *p;\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11059011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ded8f696c0f5ab75f4e473342babdd1?s=128&d=identicon&r=PG&f=1", "display_name": "clueless_b", "link": "https://stackoverflow.com/users/11059011/clueless-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550102722, "creation_date": 1550096995, "last_edit_date": 1550100755, "question_id": 54680444, "link": "https://stackoverflow.com/questions/54680444/dereferencing-pointers-to-make-a-copy-of-an-array", "title": "Dereferencing pointers to make a copy of an array", "body": "<p>I'm currently trying to copy one array to another (values 200 - 299 to be specific) while dereferencing pointers. </p>\n\n<pre><code>*point = &amp;array2[100]; //points to location 100 in array2, which holds numbers 100-300\n</code></pre>\n\n<p>Couldn't I just use a for loop to start where the pointer starts, and then set both arrays equal to each other?</p>\n\n<pre><code>for(i = *point; i &lt; 300; i++){\n    array2 = array;\n}\n</code></pre>\n\n<p>It says to dereference my pointer, so I'd use something like *(point + a number), but I'm not exactly sure what to do. An example or link to an example would be greatly appreciated</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 6, "creation_date": 1550096021, "post_id": 54680260, "comment_id": 96149415, "body": "You have infinite recursive function. You call <code>operator &lt;&lt;</code>, and inside it you call <code>operator &lt;&lt;</code> with exactly the same parameter. There&#39;s no standard overload for neither vetor or stack, you have to implement that yourself."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550096111, "post_id": 54680260, "comment_id": 96149456, "body": "<code>std::cout &lt;&lt; &quot;Length of array = &quot; &lt;&lt; sizeOfNum &lt;&lt; &quot;  =   &quot;  &lt;&lt; (sizeof(value) &#47; sizeof(*value)) &lt;&lt; std::endl;</code> is not going to give you a meaningful result.  Why aren&#39;t you using <code>n</code> since that is that you used for the size of the array?  Also, what aren&#39;t you just using a vector for <code>value</code>?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1550096805, "post_id": 54680260, "comment_id": 96149713, "body": "As Yksisarvinen noted, you have infinite recursion.  A more reasonable way to print any standard container (if elements are printable, etc) is to iterate over all elements of the container, print each element separately, possibly with extra whitespace so they can be read in more easily.   For a container of containers (as in a vector of stacks) that logic needs to be recursive.    Note that containers don&#39;t typically provide an ability to print themselves by default, precisely because it does not make sense to print everything that may be stored in a container."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1550097026, "post_id": 54680260, "comment_id": 96149792, "body": "A suggestion: figure out how to print the elements of a stack. Then figure out how to print the elements of a vector."}], "answers": [{"comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 2, "creation_date": 1550097301, "post_id": 54680295, "comment_id": 96149877, "body": "You can&#39;t iterate over a stack, unfortunately"}, {"owner": {"reputation": 25661, "user_id": 430766, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ee7e736eeb33c4b03d4a5e6e813a9abc?s=128&d=identicon&r=PG", "display_name": "bitmask", "link": "https://stackoverflow.com/users/430766/bitmask"}, "edited": false, "score": 1, "creation_date": 1550097598, "post_id": 54680295, "comment_id": 96149971, "body": "Oh right. Now I remember why I never use that ridiculous container adapter."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550103489, "post_id": 54680295, "comment_id": 96151770, "body": "The input to <i>any</i> <code>operator&lt;&lt;</code> should be a <code>const</code> reference for non-POD types, so I would suggest changing 1) <code>std::stack&lt;int&gt;&amp; st</code> to <code>std::stack&lt;int&gt; const &amp;st</code> in <code>operator&lt;&lt;</code>, 2) <code>std::stack&lt;int&gt; st</code> to <code>std::stack&lt;int&gt; &amp;st</code> in the <code>for</code> loop, and 3) making a copy of <code>st</code> inside of <code>operator&lt;&lt;</code> when <code>st</code> only is not empty."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550118954, "post_id": 54680295, "comment_id": 96155142, "body": "@RemyLebeau, thanks for the suggestion. It made a lot of sense to me."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1550118925, "last_edit_date": 1550118925, "creation_date": 1550096109, "answer_id": 54680295, "question_id": 54680260, "link": "https://stackoverflow.com/questions/54680260/how-to-properly-print-a-vector-of-stacks/54680295#54680295", "title": "How to properly print a vector of stacks?", "body": "<p>The problem is that</p>\n\n<pre><code>os &lt;&lt; vectOfStacks;\n</code></pre>\n\n<p>translates into </p>\n\n<pre><code>operator&lt;&lt;(os, vectOfStacks);\n</code></pre>\n\n<p>Consequently, you have infinite recursion in that function. You need to change the implementation to iterate over the contents of the <code>vectOfStacks</code> and stream them to <code>os</code> one by one.</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, std::stack&lt;int&gt; const&amp; st)\n{\n   if ( !st.empty() )\n   {\n      // Can't iterate over the contents of const std::stack. Need to make\n      // a copy of the input object and use the copy to print the contents.\n      std::stack&lt;int&gt; st_copy = st;\n      while ( !st_copy.empty() )\n      {\n         int top = st_copy.top();\n         st_copy.pop();\n         os &lt;&lt; top &lt;&lt; \" \";\n      }\n   }\n   return os;\n}\n\n// Note the addition of const to the second argument.\nstd::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, std::vector&lt;std::stack&lt;int&gt;&gt; const&amp; vectOfStacks)\n{\n   for ( std::stack&lt;int&gt; const&amp; st : vectOfStacks )\n   {\n      os &lt;&lt; st;\n   }\n   return os;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1550123477, "last_edit_date": 1550123477, "creation_date": 1550096476, "answer_id": 54680358, "question_id": 54680260, "link": "https://stackoverflow.com/questions/54680260/how-to-properly-print-a-vector-of-stacks/54680358#54680358", "title": "How to properly print a vector of stacks?", "body": "<p>Here is on way (and <code>myPrint</code> can be changed into <code>operator&lt;&lt;</code> but it usually isn't a good idea to overload it for <em>raw</em> types from <code>std::</code> namespace):</p>\n\n<pre><code>std::ostream &amp;myPrint(std::ostream &amp;os, std::vector&lt;std::stack&lt;int&gt;&gt; const &amp;vs) {\n    os &lt;&lt; \"vec:\\n\";\n    for (auto s : vs) {\n        os &lt;&lt; \"\\t(stack): \";\n        while(!s.empty()){ os &lt;&lt; s.top() &lt;&lt; ' '; s.pop();}\n        os &lt;&lt; '\\n';\n    }\n    return os;\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 9306718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f113aaaeeec53f165d5c085780619440?s=128&d=identicon&r=PG&f=1", "display_name": "K Kay", "link": "https://stackoverflow.com/users/9306718/k-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1550123477, "creation_date": 1550095942, "last_edit_date": 1550096844, "question_id": 54680260, "link": "https://stackoverflow.com/questions/54680260/how-to-properly-print-a-vector-of-stacks", "title": "How to properly print a vector of stacks?", "body": "<p>I have created a vector of stacks. Each stack contains an integer number. The code builds and runs but it gives \"stackoverlfow\" error in my overload function. I am sure its something ridiculously simple, which I don't see. I'll be grateful for any help. Thanks</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, std::vector&lt;std::stack&lt;int&gt;&gt; &amp;vectOfStacks)\n{\n    os &lt;&lt; vectOfStacks;\n    return os;\n}\n\n\nint main()\n{\n    int n;\n    int sum = 0;\n    int sizeOfNum=0;\n    std::stack&lt;int&gt; s;\n    std::vector&lt;std::stack&lt;int&gt;&gt; vectOfStacks;\n\n    std::cout &lt;&lt; \"How many numbers you want to add? \" &lt;&lt; std::endl;\n    std::cin&gt;&gt;n;\n\n    int* value = new int[n];\n\n    for (int i = 0; i &lt; n; i++)\n    {\n        std::cout &lt;&lt; \"Enter integers\" &lt;&lt; std::endl;\n\n        std::cin &gt;&gt; value[i];\n\n\n\n        for (int j = 0; j &lt; n; j++)     // same the integer one digit at a time into a stack\n        {\n            s.push(value[i] - '0');\n        }\n\n        vectOfStacks.push_back(s);  // push the stack for this number into vector\n\n        std::cout &lt;&lt; vectOfStacks;\n\n        sum = sum + value[i];\n    }\n\n    std::cout &lt;&lt; \"Sum of the integers = \" &lt;&lt; sum &lt;&lt;std::endl;\n\n\n\n    //addingLargeNumber(vectOfStacks);\n\n\n    /*for (std::vector&lt;std::stack&lt;int&gt;&gt;::iterator it = vectOfStacks.begin(); it != vectOfStacks.end(); ++it)\n        std::cout &lt;&lt; *it &lt;&lt; ' ';\n\n    for (int i = 0; i &lt; vectOfStacks.size(); i++)\n    {\n        std::cout &lt;&lt; vectOfStacks[i];\n    }*/\n\n    //std::cout &lt;&lt; vectOfStacks[i];\n\n    delete[] value;\n\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "wait", "iot", "mbed"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1550095149, "post_id": 54680083, "comment_id": 96149069, "body": "What is <code>wait</code> here? Where does <code>S</code> come from?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550095235, "post_id": 54680083, "comment_id": 96149109, "body": "Look at <a href=\"https://en.cppreference.com/w/cpp/thread/thread\" rel=\"nofollow noreferrer\"><code>std::thread</code></a> and <a href=\"https://en.cppreference.com/w/cpp/header/future\" rel=\"nofollow noreferrer\"><code>&lt;future&gt;</code></a>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550095253, "post_id": 54680083, "comment_id": 96149119, "body": "Use worker threads to run code concurrently"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550095288, "post_id": 54680083, "comment_id": 96149134, "body": "This is what <code>std::async</code> is for.  Launch an asynchronous task and then go about your business.  When you are ready for the the result then you call <code>get</code> from the returned <code>future</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1550095994, "post_id": 54680083, "comment_id": 96149404, "body": "If the main thread is waiting for the sample collection, why go asynchronous at all?"}, {"owner": {"reputation": 63, "user_id": 6346353, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3jhf.jpg?s=128&g=1", "display_name": "Nihinlola", "link": "https://stackoverflow.com/users/6346353/nihinlola"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1550098691, "post_id": 54680083, "comment_id": 96150370, "body": "@tadman I just updated the question, S has the value of 1 second. Wait() tells the code to pause execution for the number of seconds inserted in the Wait() function."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1550098697, "post_id": 54680083, "comment_id": 96150373, "body": "One easy way to do it would be to record the current time into a local variable, then call read_samples(), then record the current time again into a second local variable.  Then subtract the first timestamp from the second one, and wait() for (12 seconds minus that delta)"}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1550103115, "post_id": 54680083, "comment_id": 96151653, "body": "What user4581301 asks is very relevant with the objective you have posted so far. So unless you have more plans... Why &#39;Wait`?"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1550107692, "post_id": 54680083, "comment_id": 96152754, "body": "I find no &#39;S&#39; or &#39;s&#39; in the post code, only the comments?"}, {"owner": {"reputation": 63, "user_id": 6346353, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3jhf.jpg?s=128&g=1", "display_name": "Nihinlola", "link": "https://stackoverflow.com/users/6346353/nihinlola"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1550139226, "post_id": 54680083, "comment_id": 96163754, "body": "@2785528 I have replaced the value of S. S stands for 1 second."}, {"owner": {"reputation": 63, "user_id": 6346353, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3jhf.jpg?s=128&g=1", "display_name": "Nihinlola", "link": "https://stackoverflow.com/users/6346353/nihinlola"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1550139313, "post_id": 54680083, "comment_id": 96163815, "body": "@lakeweb If I don&#39;t have to wait, can you suggest any other way to run the read_samples() function while I am waiting for 12 seconds."}, {"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1550162733, "post_id": 54680083, "comment_id": 96177988, "body": "I don&#39;t know what OS/development system you are using. <code>wait</code> sounds like <a href=\"https://en.cppreference.com/w/cpp/thread/sleep_until\" rel=\"nofollow noreferrer\">std::sleep_until</a>. If you want to block your main thread while you take a sample every second, that is what <code>read_samples</code> will do. Sleeping in <code>main</code> is not needed and gets in the way of your objective."}], "answers": [{"tags": [], "owner": {"reputation": 24757, "user_id": 107642, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/672b033bf66f18d40cff3278f12f8f90?s=128&d=identicon&r=PG", "display_name": "Jan Jongboom", "link": "https://stackoverflow.com/users/107642/jan-jongboom"}, "is_accepted": false, "score": 0, "last_activity_date": 1550223684, "creation_date": 1550223684, "answer_id": 54706473, "question_id": 54680083, "link": "https://stackoverflow.com/questions/54680083/how-to-call-another-function-concurrently-during-wait-c/54706473#54706473", "title": "How To Call Another Function Concurrently, During Wait() C++", "body": "<p>You can run the <code>read_samples</code> in a separate thread. E.g.:</p>\n\n<pre><code>static float average = 0.0f;\n\n// Function to calculate the sum and average temperature\nvoid read_samples()\n{\n    int num_samples = 12 / 1;\n    float data[num_samples];\n\n    float sum = 0.0;\n\n    for(int i = 1; i &lt; num_samples; i++ ) {\n        data[i] = temperature.read();\n        sum = sum + data[i];\n        wait(1);\n    }\n    average = sum / (num_samples - 1);\n}\n\n// Main Function that is called on running the application\nint main()\n{\n    //sw.fall(read_samples(data, num_samples));\n    while(1) {\n        Thread sampleThread;\n        sampleThread.start(&amp;read_samples);\n\n        wait(12);\n\n        lcd.printf(\"%.2f\\n\", result);\n        //data[0];\n    }\n}\n</code></pre>\n\n<p>You'll want to guard access to the <code>average</code> through a <a href=\"https://os.mbed.com/docs/mbed-os/v5.11/apis/mutex.html\" rel=\"nofollow noreferrer\">Mutex</a>.</p>\n"}], "owner": {"reputation": 63, "user_id": 6346353, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D3jhf.jpg?s=128&g=1", "display_name": "Nihinlola", "link": "https://stackoverflow.com/users/6346353/nihinlola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550223684, "creation_date": 1550095059, "last_edit_date": 1550101018, "question_id": 54680083, "link": "https://stackoverflow.com/questions/54680083/how-to-call-another-function-concurrently-during-wait-c", "title": "How To Call Another Function Concurrently, During Wait() C++", "body": "<p>I have a class where I have 2 functions as below;</p>\n\n<pre><code>// Function to calculate the sum and average temperature\nfloat read_samples(float *data, int num_samples)\n{\n    float sum = 0.0;\n    float average = 0.0;\n\n    for(int i = 1; i &lt; num_samples; i++ ) {\n        data[i] = temperature.read();\n        sum = sum + data[i];\n        wait(1);\n    }\n    average = sum / (num_samples - 1);\n    return average;\n}\n\n// Main Function that is called on running the application\nint main()\n{\n    int num_samples = 12 / 1;\n    float data[num_samples];\n    //sw.fall(read_samples(data, num_samples));\n    while(1) {\n        wait(12);\n        float result = read_samples(data, num_samples);\n        lcd.printf(\"%.2f\\n\", result);\n        //data[0];\n    }\n}\n</code></pre>\n\n<p>When I call the \"wait(12);\" method in Main, I want the code to at the same time to go execute the \"read_samples\" method while waiting, and when the \"read_samples\" is done return the value computed, then go ahead to display the computed result in the Main function. The computation should be during the 12 seconds while waiting.</p>\n\n<p>However, what is happening right now is that during the 12 seconds while waiting, no execution is carried out, so after waiting for 12 seconds it goes to call the \"read_samples\" method and carries out execution for another 11 seconds. So the total time spent to display the next result is (12 + 11) 23 seconds. Please, how do I write my code to execute the \"read_samples\" method during the 12 seconds wait?</p>\n"}, {"tags": ["c++", "inheritance", "polymorphism", "protected", "friend-class"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1550095838, "post_id": 54679805, "comment_id": 96149349, "body": "In general, I\u2019d expect member functions of an interface to be public. Why are these protected?"}, {"owner": {"reputation": 81, "user_id": 1047205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/067e259d29d85036ecbdf644d887c35d?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/1047205/vince"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1550098381, "post_id": 54679805, "comment_id": 96150241, "body": "@PeteBecker, I would like to make sure some interface methods are only called within certain classes but not in others. So the friend membership is only granted to those certain classes."}], "answers": [{"tags": [], "owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1550093923, "creation_date": 1550093923, "answer_id": 54679848, "question_id": 54679805, "link": "https://stackoverflow.com/questions/54679805/where-in-derived-class-or-base-class-should-i-declare-friend-class/54679848#54679848", "title": "Where in derived class or base class should I declare friend class?", "body": "<p>That's because your access is thru the <code>IConnectSession</code> interface, <code>sessionPtr</code>, and your friendship is only with the derived class, not the base class.</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 1047205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/067e259d29d85036ecbdf644d887c35d?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/1047205/vince"}, "edited": false, "score": 0, "creation_date": 1550094655, "post_id": 54679857, "comment_id": 96148869, "body": "Thank you. This makes sense. Is it a best practice to declare friend class in both base class and derived class??"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 81, "user_id": 1047205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/067e259d29d85036ecbdf644d887c35d?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/1047205/vince"}, "edited": false, "score": 0, "creation_date": 1550094864, "post_id": 54679857, "comment_id": 96148945, "body": "@Vince Best practice is to normally avoid friend classes as the break encapsulation and normally mean there is a tight coupling between things.  In this case though you only need to be a friend of the base since you are only accessing the interface that is provided by the base class.  You would need to be a friend of the derived class if you need to cast the base to the derived to access derived only potions."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1550093958, "creation_date": 1550093958, "answer_id": 54679857, "question_id": 54679805, "link": "https://stackoverflow.com/questions/54679805/where-in-derived-class-or-base-class-should-i-declare-friend-class/54679857#54679857", "title": "Where in derived class or base class should I declare friend class?", "body": "<p>Access control is something that only applies at compile time.  In </p>\n\n<pre><code>SystemProcess::ApplyConfiguration(){\n    std::shared_ptr&lt;IConnectSession&gt; sessionPtr = new ConnectSession();\n    sessionPtr-&gt;HandlePriviledgedRequest(); // compile error\n}\n</code></pre>\n\n<p>even though <code>sessionPtr</code> gets set to an instance of <code>ConnectSession</code>, its static type is <code>IConnectSession</code> and that is what access control is ran against.  Since <code>SystemProcess</code> isn't a friend of <code>IConnectSession</code> it is not allowed to access <code>HandlePriviledgedRequest()</code>.</p>\n\n<p>You'll need to make it a friend of <code>IConnectSession</code> to get it to compile.</p>\n"}], "owner": {"reputation": 81, "user_id": 1047205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/067e259d29d85036ecbdf644d887c35d?s=128&d=identicon&r=PG", "display_name": "Vince", "link": "https://stackoverflow.com/users/1047205/vince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550093958, "creation_date": 1550093704, "question_id": 54679805, "link": "https://stackoverflow.com/questions/54679805/where-in-derived-class-or-base-class-should-i-declare-friend-class", "title": "Where in derived class or base class should I declare friend class?", "body": "<p>I have a derived class that implements an interface(abstract class) in C++. This interface has a couple of protected functions whose implementation are defined in derived class.</p>\n\n<p>Now I'm trying to access these protected functions in derived class from an external class, by declaring the external class as a friend in derived class. However, the compiler still complains that I cannot access the protected member functions.</p>\n\n<p>For example:\nI have class <code>ConnectSession</code> implementing <code>IConnectSession</code>. And an external class called <code>SystemProcess</code> who wants to access protected member function <code>HandlePriviledgedRequest</code>.</p>\n\n<p>In IConnectSession.h</p>\n\n<pre><code>class IConnectSession{\nprotected:\n    virtual void HandlePriviledgedRequest() = 0;\n}\n</code></pre>\n\n<p>In ConnectSession.h</p>\n\n<pre><code>class ConnectSession : public IConnectSession{\nprotected:\n    void HandlePriviledgedRequest() override {/* func definition */}\n    friend class SystemProcess;\n}\n</code></pre>\n\n<p>In friend class I try to access <code>HandlePriviledgedRequest()</code></p>\n\n<p>SystemProcess.cpp</p>\n\n<pre><code>SystemProcess::ApplyConfiguration(){\n    std::shared_ptr&lt;IConnectSession&gt; sessionPtr = new ConnectSession();\n    sessionPtr-&gt;HandlePriviledgedRequest(); // compile error\n}\n</code></pre>\n\n<p>It throws an error from compiler saying I cannot access protected members even if I have already declared <code>SystemProcess</code> as a friend. Since friend declarations are not inherited I particularly declare them in <code>ConnectSession</code>. Why does it not work and how to fix it? Thanks.</p>\n"}, {"tags": ["c++", "c++11", "boost", "timer"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1550091749, "post_id": 54679354, "comment_id": 96147585, "body": "Well, one obvious comparison is that one of them is standard while the other is not."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1550092169, "post_id": 54679354, "comment_id": 96147760, "body": "If you are concerned about the steadiness of a <code>high_resolution_clock</code> is has the <code>is_steady</code> member which will be <code>true</code> if it&#39;s steady on the platform."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550092739, "post_id": 54679354, "comment_id": 96148037, "body": "This could fill a nice article but it is too broad for an answer here"}, {"owner": {"reputation": 395, "user_id": 8178357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d64925ff910ca191eef3a853872bce4?s=128&d=identicon&r=PG", "display_name": "Christoph Lipka", "link": "https://stackoverflow.com/users/8178357/christoph-lipka"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550093192, "post_id": 54679354, "comment_id": 96148205, "body": "@Fran&#231;oisAndrieux Updated the question; the reason I didn&#39;t give any examples of boost quirks is that I currently don&#39;t know any."}, {"owner": {"reputation": 395, "user_id": 8178357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d64925ff910ca191eef3a853872bce4?s=128&d=identicon&r=PG", "display_name": "Christoph Lipka", "link": "https://stackoverflow.com/users/8178357/christoph-lipka"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550093287, "post_id": 54679354, "comment_id": 96148248, "body": "@user463035818 If you happen to <i>know</i> of any such article, you&#39;re welcome to post a link as an answer ;)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1550093408, "post_id": 54679354, "comment_id": 96148319, "body": "If I knew such an article I could sum up the main points and write an answer, but posting only a link is not considered as a proper answer, anyhow I dont ;)"}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 8178357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d64925ff910ca191eef3a853872bce4?s=128&d=identicon&r=PG", "display_name": "Christoph Lipka", "link": "https://stackoverflow.com/users/8178357/christoph-lipka"}, "edited": false, "score": 0, "creation_date": 1550103959, "post_id": 54680695, "comment_id": 96151887, "body": "Wow, kudos for the detailed answer. - So if I&#39;d need to measure elapsed wall clock time of a piece of code at a precision in the order of milliseconds, but the code may at times run for weeks or even more, then for all practical purposes <code>std::chrono::steady_clock</code> would be my standard-compliant portable friend?"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 395, "user_id": 8178357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d64925ff910ca191eef3a853872bce4?s=128&d=identicon&r=PG", "display_name": "Christoph Lipka", "link": "https://stackoverflow.com/users/8178357/christoph-lipka"}, "edited": false, "score": 0, "creation_date": 1550104603, "post_id": 54680695, "comment_id": 96152038, "body": "<code>steady_clock</code> is a good choice for timing on the order of milliseconds.  But it is less good for timing on the order of weeks.  But it isn&#39;t terrible.  <code>steady_clock</code> will typically count your platform&#39;s hardware clock cycle counter, and convert that into convenient units such as nanoseconds.  But there&#39;s no such thing as a perfect clock, and your computer&#39;s clock is on the poor side of average.  Your quartz wrist watch will typically loose a second or two a week.  Your computer&#39;s clock won&#39;t do better and may be worse."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "reply_to_user": {"reputation": 395, "user_id": 8178357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d64925ff910ca191eef3a853872bce4?s=128&d=identicon&r=PG", "display_name": "Christoph Lipka", "link": "https://stackoverflow.com/users/8178357/christoph-lipka"}, "edited": false, "score": 1, "creation_date": 1550104693, "post_id": 54680695, "comment_id": 96152057, "body": "<code>system_clock</code> will ask other clocks on the network what time it is every so often and correct itself.  So it is worse at timing short intervals on the order of milliseconds, but better at timing long intervals on the order of weeks.  Either <code>steady_clock</code> or <code>system_clock</code> will work.  But each has their strengths and weaknesses."}], "tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 3, "last_activity_date": 1583801877, "last_edit_date": 1583801877, "creation_date": 1550098466, "answer_id": 54680695, "question_id": 54679354, "link": "https://stackoverflow.com/questions/54679354/comparison-of-stdchrono-clocks-with-boostxtime/54680695#54680695", "title": "Comparison of `std::chrono` clocks with `boost::xtime`", "body": "<blockquote>\n  <p>How do the C++11 std::chrono clocks steady_clock and high_resolution_clock compare with boost::xtime::xtime_get() in terms of quirks and general properties on various platforms?</p>\n</blockquote>\n\n<p>Any timing library can only deliver what the underlying OS/hardware combination can deliver -- full stop.</p>\n\n<p>Even if the library API promises nanosecond resolution, that doesn't mean that the underlying OS/hardware can deliver that precision.  So ultimately the timing API can not improve upon the quality of the platform.</p>\n\n<p><code>boost::xtime</code> is basically what was standardized by C (and subsequently C++) as <code>timespec</code>.  This is a <code>{second, nanosecond}</code> pair which is used both as a point in time, and as time duration, depending on the function it is used with in the standard C headers.  Though a quick survey of boost headers appears to use <code>xtime</code> only as a time point (I could've missed something).</p>\n\n<p><code>timespec</code> has a long history of existing use, especially in POSIX systems.  It has been in existence on POSIX systems much longer than <code>std::chrono</code>, which was designed in 2008, and standardized in C++11 (2011).</p>\n\n<p>The range of <code>timespec</code> (<code>xtime</code>) is typically larger than the age of the universe.  Though on systems that can not supply a 64 bit integral type, the range of <code>timespec</code> will be significantly smaller:  +/-68 years, typically centered around 1970 when it is used as a time point.</p>\n\n<p>As mentioned above, <code>timespec</code> <em>advertises</em> nanosecond precision on <em>all</em> platforms, but will only deliver the precision that the underlying platform can supply.</p>\n\n<p><code>chrono</code> supplies <em>separate</em> types for time points and durations.  This helps catch errors at compile time.  For example if you add two time points together, it doesn't compile.  9am today + 7am today is nonsensical.  However if you subtract two time points, that makes perfect sense and returns a separate type:  a duration.  9am today - 7am today is 2 hours.</p>\n\n<p><code>chrono</code> supplies multiple types for both durations and time points which can differ in both precision and representation.  The \"built-in\" durations are nanoseconds, microseconds, milliseconds, seconds, minutes and hours, each represented with a signed integral type (that list is expanded in the C++20 spec).  But you can create your own duration types with your own precision and representation (e.g. floating point, or a safe-int library).</p>\n\n<p>The implementor of <code>chrono</code> for any given platform can advertise the precision of the platforms \"<code>now()</code>\" function.  I.e. it doesn't have to always be nanoseconds, it might be microseconds, or some other unit.  The vendor isn't required to be honest, but they usually are.  Clients can query the return type of <code>now()</code> for its precision, programmatically, at compile time (this is C++ after all).</p>\n\n<p>The <code>chrono</code> data structures are <code>{count of units}</code>, as opposed to the <code>xtime</code> <code>{seconds, nanoseconds}</code> data structure.  For <code>chrono</code> this is true of both durations and time points, even though these are distinct types.</p>\n\n<p>The <code>{count of units}</code> layout has several advantages over the  <code>{seconds, nanoseconds}</code> layout:</p>\n\n<ul>\n<li><p>There is an opportunity to have a smaller <code>sizeof</code>.  <code>system_clock::time_point</code> is typically 64 bits while <code>xtime</code> is typically 128 bits.  This does give <code>xtime</code> a superior range.  However the <code>chrono</code> library can also be used with 128 bit integral types which will subsequently have a larger range than <code>xtime</code>'s.</p></li>\n<li><p>Clients can make the size/range tradeoff with <code>chrono</code>.  <code>xtime</code> clients get what they get.</p></li>\n<li><p>Arithmetic is faster/more-efficient and easier to program with the <code>{count}</code> data structure than with <code>{seconds, nanoseconds}</code>.  This leads to code that is smaller, faster, and generally more bug free (negative values represented with <code>{seconds, nanoseconds}</code> are an ongoing horror story).</p></li>\n<li><p>For a given <code>sizeof</code> and precision, one can always get a larger range with a <code>{count}</code> data structure than a multi-field data structure such as <code>{seconds, nanoseconds}</code>.</p></li>\n</ul>\n\n<blockquote>\n  <p>The standard does not guarantee that high_resolution_clock be steady (it explicitly mentions it may be an alias to system_clock), so that's one pitfall to look out for. </p>\n</blockquote>\n\n<p>In practice <code>high_resolution_clock</code> is always a type alias for either <code>steady_clock</code> or <code>system_clock</code>.  Which, depends on platform.  My advice is to just use <code>steady_clock</code> or <code>system_clock</code> so you know what you're dealing with.</p>\n\n<blockquote>\n  <p>Resolution: The C++11 standard does not seeem to guarantee any resolution; what are the \"real-life\" resolutions of these clocks?</p>\n</blockquote>\n\n<p>The <em>advertised</em> resolutions are:</p>\n\n<pre><code>libc++/llvm:\n\nsystem_clock\n    rep is long long : 64 bits\n    period is 1/1,000,000\n    is_steady is 0\n\nhigh_resolution_clock\n    rep is long long : 64 bits\n    period is 1/1,000,000,000\n    is_steady is 1\n\nsteady_clock\n    rep is long long : 64 bits\n    period is 1/1,000,000,000\n    is_steady is 1\n\nhigh_resolution_clock is the same type as steady_clock\n\nlibstdc++/gcc:\n\nsystem_clock\n    rep is long : 64 bits\n    period is 1/1,000,000,000\n    is_steady is 0\n\nhigh_resolution_clock\n    rep is long : 64 bits\n    period is 1/1,000,000,000\n    is_steady is 0\n\nsteady_clock\n    rep is long : 64 bits\n    period is 1/1,000,000,000\n    is_steady is 1\n\nhigh_resolution_clock is the same type as system_clock\n\nVS-2013:\n\nsystem_clock\n    rep is __int64 : 64 bits\n    period is 1/10,000,000\n    is_steady is 0\n\nhigh_resolution_clock\n    rep is __int64 : 64 bits\n    period is 1/1,000,000,000\n    is_steady is 1\n\nsteady_clock\n    rep is __int64 : 64 bits\n    period is 1/1,000,000,000\n    is_steady is 1\n\nhigh_resolution_clock is the same type as steady_clock\n</code></pre>\n\n<p>Because of my opening remarks, the \"real-life\" resolutions are very likely to be identical to <code>xtime</code>'s for any given platform.</p>\n\n<blockquote>\n  <p>Can the C++11 standard clocks cope with durations in the order of days, maybe even weeks on all known platforms?</p>\n</blockquote>\n\n<p>Yes.  Even months and years.</p>\n\n<p>The first duration limit you will hit is when dealing with nanosecond resolution.  <code>chrono</code> guarantees this will have at least a 64 bit signed integral representation giving you +-292 years of range.  When talking about <code>system_clock</code>, this range will be centered on 1970.</p>\n\n<blockquote>\n  <p>Any other known issues or surprising quirks </p>\n</blockquote>\n\n<p>When operating at or near range limits, the <code>chrono</code> library can easily and silently overflow.  For example if you compare <code>microseconds::max()</code> with <code>nanoseconds::max()</code>, you will experience an overflow and get an indeterminate result.  This happens because the comparison operator will first convert the <code>microseconds</code> to <code>nanoseconds</code> before doing the comparison, and that conversion overflows.</p>\n\n<p>Steer well clear of the duration and time_point range limits.   If you have to deal with them, and are not sure how, look on Stackoverflow for answers. Ask a question specific to your concern if that search is not satisfactory.</p>\n"}, {"tags": [], "owner": {"reputation": 395, "user_id": 8178357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d64925ff910ca191eef3a853872bce4?s=128&d=identicon&r=PG", "display_name": "Christoph Lipka", "link": "https://stackoverflow.com/users/8178357/christoph-lipka"}, "is_accepted": false, "score": 0, "last_activity_date": 1550350254, "last_edit_date": 1550350254, "creation_date": 1550248810, "answer_id": 54713569, "question_id": 54679354, "link": "https://stackoverflow.com/questions/54679354/comparison-of-stdchrono-clocks-with-boostxtime/54713569#54713569", "title": "Comparison of `std::chrono` clocks with `boost::xtime`", "body": "<p>A few 1st- and 2nd-hand results testing the behaviour of <code>sleep_for</code> with a duration of 1 millisecond:</p>\n\n<p>The following platforms tend to \"oversleep\", at least on average (timed over 1000 iterations):</p>\n\n<ul>\n<li>Windows Subsystem For Linux / g++ (1.8 ms, apparently overhead)</li>\n<li>Genuine Ubuntu / g++ (1.1 ms)</li>\n<li>FreeBSD / clang (1.1 ms)</li>\n<li>Wingwin / g++ (16 ms, apparently minimum)</li>\n<li>OS X (Darwin) / g++ / POSIX thread model (1.2 ms)</li>\n</ul>\n\n<p>So far, no platform seems to \"undersleep\" on average.</p>\n"}], "owner": {"reputation": 395, "user_id": 8178357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d64925ff910ca191eef3a853872bce4?s=128&d=identicon&r=PG", "display_name": "Christoph Lipka", "link": "https://stackoverflow.com/users/8178357/christoph-lipka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1583801877, "creation_date": 1550091704, "last_edit_date": 1550093112, "question_id": 54679354, "link": "https://stackoverflow.com/questions/54679354/comparison-of-stdchrono-clocks-with-boostxtime", "title": "Comparison of `std::chrono` clocks with `boost::xtime`", "body": "<p>How do the C++11 <code>std::chrono</code> clocks <code>steady_clock</code> and <code>high_resolution_clock</code> compare with <code>boost::xtime::xtime_get()</code> in terms of quirks and general properties on various platforms?</p>\n\n<p>The standard does not guarantee that <code>high_resolution_clock</code> be steady (it explicitly mentions it may be an alias to <code>system_clock</code>), so that's one pitfall to look out for. Other properties that come to my mind:</p>\n\n<ul>\n<li><p><strong>Resolution</strong>: The C++11 standard does not seeem to guarantee any resolution; what are the \"real-life\" resolutions of these clocks? How does <code>boost::xtime_get()</code> fare on the same systems?</p></li>\n<li><p><strong>Maximum Duration</strong>: I know that e.g. <code>clock()</code> breaks down after roughly an hour on systems with a 32-bit <code>clock_t</code> and a 1 MHz nominal clock resolution. (Yes, I know <code>clock()</code> is supposed to do a somewhat different job.) Can the C++11 standard clocks cope with durations in the order of days, maybe even weeks on all known platforms?</p></li>\n<li><p>Any other <strong>known issues</strong> or surprising quirks <em>(Edit: of either <code>std::chrono</code> clocks or <code>boost::xtime::xtime_get</code>)</em>?</p></li>\n</ul>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1550091380, "post_id": 54679261, "comment_id": 96147434, "body": "You never write to <code>myArray[0]</code>, so you shouldn&#39;t expect it to contain any meaningful value"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1550091386, "post_id": 54679261, "comment_id": 96147436, "body": "You are iterating over the elements at index 100 to 299, but the valid indices for your array are between 0 and 199. You probably meant <code>myArray[j-100] = j;</code> instead of <code>myArray[j] = j;</code>."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1550091395, "post_id": 54679261, "comment_id": 96147440, "body": "Since <code>j</code> can be as high as 299, what do you think will happen when you assign something to <code>myArray[299]</code>, given that the array has only 200 elements?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550091895, "post_id": 54679261, "comment_id": 96147658, "body": "<i>I also have another array filled with ints from 0-99, and it&#39;s working as intended.</i> -- That is because you were plain lucky you started at 0.  You never realized that the code does not work if you started at a different number.  How would your code have worked if you started from -100 and went to 100 <code>for (int j = -100; j &lt;= 100; ++j)</code>?  Would <code>myArray[-100]</code> make sense to you?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550093865, "post_id": 54679261, "comment_id": 96148546, "body": "Sometimes you just have to look hard at the code you&#39;ve written and ask yourself what&#39;s it&#39;s actually doing instead of what you think it is doing."}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 5812441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12a41377059a770288a7a1aea4db8317?s=128&d=identicon&r=PG&f=1", "display_name": "Vytautas Leli\u016bnas", "link": "https://stackoverflow.com/users/5812441/vytautas-leli%c5%abnas"}, "is_accepted": false, "score": 2, "last_activity_date": 1550091519, "creation_date": 1550091519, "answer_id": 54679318, "question_id": 54679261, "link": "https://stackoverflow.com/questions/54679261/adding-numbers-100-299-to-an-array/54679318#54679318", "title": "adding numbers 100-299 to an array", "body": "<p>your first array index starts from 100 not from 0. \nint myArray[200] means index from 0 to 199.</p>\n"}, {"tags": [], "owner": {"reputation": 2192, "user_id": 10848591, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eoV3Oz4qBEo/AAAAAAAAAAI/AAAAAAAAEz8/sAjB2IHG5Ao/photo.jpg?sz=128", "display_name": "Spinkoo", "link": "https://stackoverflow.com/users/10848591/spinkoo"}, "is_accepted": false, "score": 3, "last_activity_date": 1550091585, "creation_date": 1550091585, "answer_id": 54679332, "question_id": 54679261, "link": "https://stackoverflow.com/questions/54679261/adding-numbers-100-299-to-an-array/54679332#54679332", "title": "adding numbers 100-299 to an array", "body": "<pre><code>int myArray[200];\n\nint j;\n//when you say arr[j] with j = 200 for example and you array goes from 0 to 199 of course you will get an error\nfor(j = 100; j &lt; 300; j++){\n   // you are confusing between index of the array you are trying to access  &amp; the the value  to assign it\n  //with j-100 now it will go from 100-100=0 to 299-100=199 \n    myArray[j-100] = j;\n\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18385, "user_id": 1773434, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9HhFs.png?s=128&g=1", "display_name": "Govind Parmar", "link": "https://stackoverflow.com/users/1773434/govind-parmar"}, "is_accepted": false, "score": 6, "last_activity_date": 1550091804, "creation_date": 1550091804, "answer_id": 54679375, "question_id": 54679261, "link": "https://stackoverflow.com/questions/54679261/adding-numbers-100-299-to-an-array/54679375#54679375", "title": "adding numbers 100-299 to an array", "body": "<p>Since <code>j</code> loops from 100-299, <code>myArray[j]</code> never fills up elements 0-99 of <code>myArray</code>, and goes out of bounds for the latter half of the loop.</p>\n\n<p>You want:</p>\n\n<pre><code>for (j = 0; j &lt; 200; j++)\n{\n    myArray[j] = j+100;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": false, "score": 3, "last_activity_date": 1550092230, "creation_date": 1550092230, "answer_id": 54679465, "question_id": 54679261, "link": "https://stackoverflow.com/questions/54679261/adding-numbers-100-299-to-an-array/54679465#54679465", "title": "adding numbers 100-299 to an array", "body": "<p>The other answers already demonstrate your mistake, but I want to show an alternative approach using <a href=\"https://en.cppreference.com/w/cpp/algorithm/iota\" rel=\"nofollow noreferrer\"><code>std::iota</code></a>:</p>\n\n<pre><code>int myArray[200];\nstd::iota(std::begin(myArray), std::end(myArray), 100);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1550092658, "last_edit_date": 1550092658, "creation_date": 1550092293, "answer_id": 54679480, "question_id": 54679261, "link": "https://stackoverflow.com/questions/54679261/adding-numbers-100-299-to-an-array/54679480#54679480", "title": "adding numbers 100-299 to an array", "body": "<p>As others stated, your loop is using the wrong array indexes. Arrays always start at index 0, regardless of the values stored in the array.</p>\n\n<p>You can (and should) use standard algorithms to avoid using a manual loop, thus avoiding such pitfalls.</p>\n\n<p>Such as <a href=\"https://en.cppreference.com/w/cpp/algorithm/generate\" rel=\"nofollow noreferrer\"><code>std:::generate()</code></a> or <a href=\"https://en.cppreference.com/w/cpp/algorithm/generate\" rel=\"nofollow noreferrer\"><code>std::generate_n()</code></a>:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\nstruct startAt\n{ \n    int num;\n\n    startAt(int start) : num(start) {}\n\n    int operator() ()\n    {\n        return num++;\n    }\n}\n\nstd::generate(myArray, myArray+200, startAt(100));\nor\nstd::generate_n(myArray, 200, startAt(100));\n</code></pre>\n\n<p></p>\n\n<p>Or, if using C++11 or later:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;algorithm&gt;\n\nstd::array&lt;int, 200&gt; myArray;\n\nstd::generate(myArray,begin(), myArray.end(), [n = 100] () mutable { return n++; });\nor\nstd::generate_n(myArray,begin(), 200, [n = 100] () mutable { return n++; });\n</code></pre>\n\n<p>Or, using <a href=\"https://en.cppreference.com/w/cpp/algorithm/iota\" rel=\"nofollow noreferrer\"><code>std::itoa()</code></a> instead:</p>\n\n<pre><code>#include &lt;array&gt;\n#include &lt;numeric&gt;\n\nstd::array&lt;int, 200&gt; myArray;\n\nstd::iota(myArray.begin(), myArray.end(), 100);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29866, "user_id": 647053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FyZJb.png?s=128&g=1", "display_name": "Ram Ghadiyaram", "link": "https://stackoverflow.com/users/647053/ram-ghadiyaram"}, "edited": false, "score": 0, "creation_date": 1550125804, "post_id": 54679499, "comment_id": 96157087, "body": "this answer came in Low Quality posts in SO.... Could you add any commentary to your answer? Explain your logic, and give a little commentary on what your code is intended to do. This will help the OP, but it will also serve as commentary for future users"}], "tags": [], "owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1550129302, "last_edit_date": 1550129302, "creation_date": 1550092377, "answer_id": 54679499, "question_id": 54679261, "link": "https://stackoverflow.com/questions/54679261/adding-numbers-100-299-to-an-array/54679499#54679499", "title": "adding numbers 100-299 to an array", "body": "<p>To fill a raw array with a seqence of numbers, the <code>std::iota</code> (from <code>&lt;numeric&gt;</code>) with the help of <code>std::begin</code> and <code>std::end</code> (both from <code>&lt;iterator&gt;</code>) come to the resue.</p>\n\n<p><code>using ...</code> is used in the same way we apply <code>std::swap</code>, thus if there is a better <code>begin/end</code> methods specialications available the correct version for the containers is picked. So if you decide that your container should be a <code>std::vector</code> or <code>std::array</code> you will not have to modify the code much or at all.</p>\n\n<pre><code>#include &lt;numeric&gt;\n#include &lt;iterator&gt;\n\nint myArray[200];\nusing std::begin;\nusing std::end;\nstd::iota(begin(myArray), end(myArray), 100); // this parts is usually within a function body\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 2348258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f65e5f1c808f156933229b52c2610b?s=128&d=identicon&r=PG", "display_name": "user2348258", "link": "https://stackoverflow.com/users/2348258/user2348258"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "closed_date": 1550095939, "answer_count": 6, "score": -8, "last_activity_date": 1550129302, "creation_date": 1550091290, "last_edit_date": 1550091920, "question_id": 54679261, "link": "https://stackoverflow.com/questions/54679261/adding-numbers-100-299-to-an-array", "closed_reason": "Not suitable for this site", "title": "adding numbers 100-299 to an array", "body": "<p>I'm trying to make an array of 200 integers, filled with integers 100-299. I currently have this:</p>\n\n<pre><code>int myArray[200];\n\nint j;\n\nfor(j = 100; j &lt; 300; j++){\n\n    myArray[j] = j;\n\n}\n</code></pre>\n\n<p>When I display <code>myArray[0]</code> and <code>myArray[200]</code>, it displays random junk numbers, so I know that my array isn't filling properly. I also have another array filled with <code>int</code>s from 0-99, and it's working as intended.</p>\n"}, {"tags": ["c++", "visual-c++", "c++17"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 6, "creation_date": 1550090835, "post_id": 54679134, "comment_id": 96147197, "body": "File a bug with MSVC"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9723177"}, "is_accepted": true, "score": 0, "last_activity_date": 1550519939, "creation_date": 1550519939, "answer_id": 54754505, "question_id": 54679134, "link": "https://stackoverflow.com/questions/54679134/stack-corruption-overloaded-struct-for-stdvisit-and-msvc-debugger/54754505#54754505", "title": "Stack corruption &quot;overloaded&quot; struct for std::visit and MSVC debugger", "body": "<p>It turns out this code should work, and I ran into a <a href=\"https://developercommunity.visualstudio.com/content/problem/346200/runtime-stack-corruption-using-stdvisit.html\" rel=\"nofollow noreferrer\">Visual Studio bug</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9723177"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 54754505, "answer_count": 1, "score": 3, "last_activity_date": 1550519939, "creation_date": 1550090758, "question_id": 54679134, "link": "https://stackoverflow.com/questions/54679134/stack-corruption-overloaded-struct-for-stdvisit-and-msvc-debugger", "title": "Stack corruption &quot;overloaded&quot; struct for std::visit and MSVC debugger", "body": "<p>I was playing around with the code in the <a href=\"https://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"nofollow noreferrer\">cppreference.com page for std::visit</a> and ran into an issue in Visual Studio 2017 (15.9.6 and 15.9.7) debug builds (both x86 and x64, with or without the debugger attached to the process) using the following code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;class... Ts&gt; struct overloaded : Ts... { using Ts::operator()...; };\ntemplate&lt;class... Ts&gt; overloaded(Ts...)-&gt;overloaded&lt;Ts...&gt;;\n\nint main()\n{\n    auto op = overloaded{\n        [](int x) { std::cout &lt;&lt; \"Got int: \" &lt;&lt; x &lt;&lt; '\\n'; },\n        [](const char* s) { std::cout &lt;&lt; \"Got cstring: \" &lt;&lt; s &lt;&lt; '\\n'; }\n    };\n\n    op(4);\n    op(\"Hello\");\n}\n</code></pre>\n\n<p>On exit of the function, the program fails with the message \"Run-Time Check Failure #2 - Stack around the variable 'op' was corrupted.\"</p>\n\n<p>Release builds do not throw this error, and when I compiled it under g++ and clang++ I did not run into the issue.</p>\n\n<p>I also note that setting up <code>op</code> as follows resolves the issue:</p>\n\n<pre><code>auto l1 = [](int x) { std::cout &lt;&lt; \"Got int: \" &lt;&lt; x &lt;&lt; '\\n'; };\nauto l2 = [](const char* s) { std::cout &lt;&lt; \"Got cstring: \" &lt;&lt; s &lt;&lt; '\\n'; };\n\nauto op = overloaded{l1, l2};\n</code></pre>\n\n<p>Is the first code example resulting in undefined behaviour and/or am I running into a compiler bug?</p>\n"}, {"tags": ["c++", "visual-studio", "audio", "sfml"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1550092048, "post_id": 54679042, "comment_id": 96147714, "body": "Does the target computer have ogg codecs installed?"}, {"owner": {"reputation": 92, "user_id": 10992986, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9HXnJe5k0JU/AAAAAAAAAAI/AAAAAAAAAiw/CUPcVHJTAVQ/photo.jpg?sz=128", "display_name": "Justin Fiset", "link": "https://stackoverflow.com/users/10992986/justin-fiset"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1550092152, "post_id": 54679042, "comment_id": 96147752, "body": "@user4581301 I don&#39;t think so. How do we install it to make the program run on any computer?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1550092857, "post_id": 54679042, "comment_id": 96148087, "body": "I believe they are an optional package for Windows 10, Web Media Extensions, but I haven&#39;t tested it out. I already have the codecs via WinAMP because I&#39;m too damn old to learn a new media player."}], "owner": {"reputation": 92, "user_id": 10992986, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9HXnJe5k0JU/AAAAAAAAAAI/AAAAAAAAAiw/CUPcVHJTAVQ/photo.jpg?sz=128", "display_name": "Justin Fiset", "link": "https://stackoverflow.com/users/10992986/justin-fiset"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550090680, "creation_date": 1550090388, "last_edit_date": 1550090680, "question_id": 54679042, "link": "https://stackoverflow.com/questions/54679042/how-to-play-audio-using-sfml-in-c", "title": "how to play audio using SFML in c++", "body": "<p>I want to play audio using SFML and am trying to use the audio module.</p>\n\n<p>All seem to work but I get this error message:<code>Failed to open sound file music.ogg (format not supported)</code></p>\n\n<p>Here is my current code:</p>\n\n<pre><code>#include &lt;SFML/Audio.hpp&gt;\n\nint main() {\n  sf::Music music;\n  if (!music.openFromFile(\"music.ogg\"))\n      return -1; // error\n  music.play();\n  system(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code"], "comments": [{"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1550092043, "post_id": 54678838, "comment_id": 96147711, "body": "What does your <code>tasks.json</code> have in it? What is your desired build system (cmake? make? ninja? etc.)"}, {"owner": {"reputation": 688, "user_id": 10969548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d18ee63574a4d23550c5ce720023856?s=128&d=identicon&r=PG&f=1", "display_name": "financial_physician", "link": "https://stackoverflow.com/users/10969548/financial-physician"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1550103701, "post_id": 54678838, "comment_id": 96151816, "body": "so I made a &quot;tasks.json&quot; file where I put the code from BeeOnRope&#39;s comment but I don&#39;t know what the code is doing exactly. Looking at the file it&#39;s trying to make &quot;Makefile&quot; but I don&#39;t know what the build system is. A lot of the code says &quot;___ is deprecated. Please use ___ instead.&quot;"}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1550105583, "post_id": 54678838, "comment_id": 96152262, "body": "How would you build your program by hand? Just g++? Must be a small program?"}, {"owner": {"reputation": 688, "user_id": 10969548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d18ee63574a4d23550c5ce720023856?s=128&d=identicon&r=PG&f=1", "display_name": "financial_physician", "link": "https://stackoverflow.com/users/10969548/financial-physician"}, "reply_to_user": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "edited": false, "score": 0, "creation_date": 1550105865, "post_id": 54678838, "comment_id": 96152334, "body": "Yeah definitely is, just making a lexical analyzer for a class so it&#39;s about as simple as they come"}], "answers": [{"comments": [{"owner": {"reputation": 688, "user_id": 10969548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d18ee63574a4d23550c5ce720023856?s=128&d=identicon&r=PG&f=1", "display_name": "financial_physician", "link": "https://stackoverflow.com/users/10969548/financial-physician"}, "edited": false, "score": 0, "creation_date": 1550111905, "post_id": 54682150, "comment_id": 96153696, "body": "Thanks you ! That will be much appreciated. I&#39;ll update what I have thus far so you can see where I&#39;m at. Thanks for taking the time to help me out"}], "tags": [], "owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "is_accepted": false, "score": 2, "last_activity_date": 1550152319, "last_edit_date": 1550152319, "creation_date": 1550109455, "answer_id": 54682150, "question_id": 54678838, "link": "https://stackoverflow.com/questions/54678838/how-can-i-make-a-target-makefile-in-visual-studio-code/54682150#54682150", "title": "How can I make a target &#39;makefile&#39; in visual studio code?", "body": "<p>In your tasks.json, add/edit the \"command\" and \"args\" fields to have the build command line you would run manually. That could be g++, make, or whatever. See here:</p>\n\n<p><a href=\"https://code.visualstudio.com/docs/editor/tasks\" rel=\"nofollow noreferrer\">https://code.visualstudio.com/docs/editor/tasks</a></p>\n\n<hr>\n\n<p><strong>Update</strong>:\nLooking at the tasks.json file that you posted, your command needs to go inside a task. Something like this:</p>\n\n<pre><code>{\n    // See https://go.microsoft.com/fwlink/?LinkId=733558\n    // for the documentation about the tasks.json format\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n        {\n            \"label\": \"My Build\",\n            \"group\": \"build\",\n            \"type\": \"shell\",\n            \"command\": \"g++\",\n            \"args\": [\n               \"-o\", \"LexParse\", \"Lexxy.cpp\", \"Parzival.cpp\"\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<p>PS, One way to format your code here is to indent it all:</p>\n\n<pre><code>    int main \n    {\n        []( auto world ) { return \"Hello\"s + world; } ( \", World!\" );\n    }\n</code></pre>\n\n<p>Another way is to wrap it in three backticks (no need to indent, though I do here so I can have backticks within backticks):</p>\n\n<pre><code>    ```\n    int main \n    {\n        []( auto world ) { return \"Hello\"s + world; } ( \", World!\" );\n    }\n    ```\n</code></pre>\n"}], "owner": {"reputation": 688, "user_id": 10969548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d18ee63574a4d23550c5ce720023856?s=128&d=identicon&r=PG&f=1", "display_name": "financial_physician", "link": "https://stackoverflow.com/users/10969548/financial-physician"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5902, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1579166600, "creation_date": 1550089499, "last_edit_date": 1579166600, "question_id": 54678838, "link": "https://stackoverflow.com/questions/54678838/how-can-i-make-a-target-makefile-in-visual-studio-code", "title": "How can I make a target &#39;makefile&#39; in visual studio code?", "body": "<p>I'm trying to figure out how to compile my c++ code within the vs code environment.</p>\n\n<p>I'm able to compile using g++ but I haven't been able to figure it out in vs code yet.</p>\n\n<p>I used the answer from BeeOnRope from this question to set up my build command and the associated hotkey.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/30269449/how-do-i-set-up-visual-studio-code-to-compile-c-code\">How do I set up Visual Studio Code to compile C++ code?</a></p>\n\n<p>The error that comes out is this</p>\n\n<blockquote>\n  <p>make: *** No rule to make target `Makefile'.  Stop.\n  The terminal process terminated with exit code: 2</p>\n</blockquote>\n\n<hr>\n\n<p>Edit: After working on my tasks.json it looks like this, however I'm still getting the same error shown above.</p>\n\n<pre><code>{\n    \"version\": \"2.0.0\",\n    \"command\": \"make\",\n    \"tasks\":[\n        {\n            \"label\": \"Makefile\",\n\n            \"group\": \"build\",\n\n            // Show the output window only if unrecognized errors occur.\n            \"presentation\": {\"reveal\": \"always\"},\n\n            // Pass 'all' as the build target\n            \"args\": [\"all\"],\n\n            // Use the standard less compilation problem matcher.\n            \"problemMatcher\": {\n                \"owner\": \"cpp\",\n                \"fileLocation\": [\"relative\", \"${workspaceRoot}\"],\n                \"pattern\": {\n                    \"regexp\": \"^(.*):(\\\\d+):(\\\\d+):\\\\s+(warning|error):\\\\s+(.*)$\",\n                    \"file\": 1,\n                    \"line\": 2,\n                    \"column\": 3,\n                    \"severity\": 4,\n                    \"message\": 5\n                }\n            }\n        }\n    ]\n}\n</code></pre>\n"}, {"tags": ["c++", "mergesort"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550089122, "post_id": 54678751, "comment_id": 96146416, "body": "Welcome to Stack Overflow! It sounds like you may need to learn how to use a debugger to step through your code. With a good debugger, you can execute your program line by line and see where it is deviating from what you expect. This is an essential tool if you are going to do any programming. Further reading: <a href=\"http://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a> and <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">Debugging Guide</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1550089267, "post_id": 54678751, "comment_id": 96146482, "body": "<code>int left[mid];</code> -- This is not valid C++.  Arrays in C++ must have their sizes denoted by a constant expression, not a runtime value such as <code>mid</code>.  Use <code>std::vector</code> instead.  Once you start to use <code>vector</code>, you have access to using functions such as <code>at()</code> to check for boundary conditions.  Don&#39;t be surprised if your errors are due to accessing elements out-of-bounds."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1550089322, "post_id": 54678751, "comment_id": 96146503, "body": "dont use single letter variable names only (unless you want to participate in a 70s retro competition ;). This code is quite hard to read"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550089461, "post_id": 54678751, "comment_id": 96146561, "body": "Also <a href=\"https://stackoverflow.com/questions/24650626/how-to-implement-classic-sorting-algorithms-in-modern-c\">read on how to implement sorting algorithms in C++</a>."}, {"owner": {"reputation": 703, "user_id": 9753452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Surette", "link": "https://stackoverflow.com/users/9753452/michael-surette"}, "edited": false, "score": 0, "creation_date": 1550089547, "post_id": 54678751, "comment_id": 96146595, "body": "You should use std::vector rather than C-style arrays. The funcional header includes merge."}], "answers": [{"comments": [{"owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 1, "creation_date": 1550090820, "post_id": 54679050, "comment_id": 96147190, "body": "Hi Sebastiaan, did you test your code before posting? I got a load of errors when I compiled."}, {"owner": {"reputation": 147, "user_id": 10923897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a3a231e3241025c3696eab76286675?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiaan Alvarez Rodriguez", "link": "https://stackoverflow.com/users/10923897/sebastiaan-alvarez-rodriguez"}, "reply_to_user": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "edited": false, "score": 0, "creation_date": 1550095202, "post_id": 54679050, "comment_id": 96149093, "body": "No I didn&#39;t. I wrote it on my phone, which does not have a compiler. I will boot my laptop and run this thing"}, {"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1550096025, "post_id": 54679050, "comment_id": 96149419, "body": "You&#39;ll need to pass every <code>vector</code> by reference if you want to make lasting changes and avoid making copies. Also you probably want <code>A.size()</code> instead of <code>A,size()</code> in <code>main()</code>."}, {"owner": {"reputation": 147, "user_id": 10923897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a3a231e3241025c3696eab76286675?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiaan Alvarez Rodriguez", "link": "https://stackoverflow.com/users/10923897/sebastiaan-alvarez-rodriguez"}, "edited": false, "score": 0, "creation_date": 1550096261, "post_id": 54679050, "comment_id": 96149511, "body": "Jup, sorry for the typos"}], "tags": [], "owner": {"reputation": 147, "user_id": 10923897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84a3a231e3241025c3696eab76286675?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastiaan Alvarez Rodriguez", "link": "https://stackoverflow.com/users/10923897/sebastiaan-alvarez-rodriguez"}, "is_accepted": false, "score": -2, "last_activity_date": 1550096240, "last_edit_date": 1550096240, "creation_date": 1550090414, "answer_id": 54679050, "question_id": 54678751, "link": "https://stackoverflow.com/questions/54678751/i-am-getting-garbage-values-in-my-merge-sort-code/54679050#54679050", "title": "I am getting garbage values in my Merge Sort code", "body": "<p>Although understandable,\nit is not possibile in C++ to declare an array with a variable size, e.g. <code>int[mSize]</code>.\nAll arrays must have a constant size, e.g. <code>int[10]</code> or </p>\n\n<pre><code>const int mSize = 10;\nint[mSize] mArray...\n</code></pre>\n\n<p>You want a storage container which has a variable size. as @PaulMcKenzie suggested,\nyou might want to use a Vector object. Your code would look something like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\nvoid Merge(vector&lt;int&gt;&amp; A, vector&lt;int&gt;&amp; L, vector&lt;int&gt;&amp; R);\nvoid MergeSort(vector&lt;int&gt;&amp; A);\n\n   //Function to Merge Arrays L and R into A. \nvoid Merge(vector&lt;int&gt;&amp; A, vector&lt;int&gt;&amp; L, vector&lt;int&gt;&amp; R)\n{ \n   // i - to mark the index of left subarray (L)\n   // j - to mark the index of right sub-raay (R)\n   // k - to mark the index of merged subarray (A)\n   unsigned int i=0;\n   unsigned int j=0;\n   unsigned int k=0;\n  while(i&lt;L.size() &amp;&amp; j&lt;R.size())\n   {\n      if(L[i]&lt;=R[i])\n      { A[k]=L[i];\n        i=i+1;\n      }\n      else\n      { A[k]=R[j];\n        j=j+1;\n      }\n      k=k+1;\n  }\n  while(i&lt;L.size())\n  { A[k]=L[i];\n      i=i+1;\n      k=k+1;\n  }\n  while(j&lt;R.size())\n  { A[k]=R[j];\n    j=j+1;\n    k=k+1;\n  }\n}\n// Recursive function to sort an array of integers. \nvoid MergeSort(vector&lt;int&gt;&amp; A)\n{\n  int n = A.size();\n  if (n&lt;2) return;//base condition.If the array has less than two \n                     //elements, do nothing\n  int mid=n/2;\n   // create left and right subarrays\n   // mid elements (from index 0 till mid-1) should be part of left sub- \n      //array \n   // and (n-mid) elements (from mid to n-1) will be part of right sub- \n      //array\n  vector&lt;int&gt; left(mid);\n  vector&lt;int&gt; right(n-mid);\n\n  for(int i=0;i&lt;mid;i++) left[i]=A[i];// create left subarray\n  for(int i=mid;i&lt;n;i++) right[i-mid]=A[i];// create right subarray\n\n  MergeSort(left);\n  MergeSort(right);\n  Merge(A,left,right);\n}\n\nint main()\n{ vector&lt;int&gt; A={2,4,7,1,5,3};\n  MergeSort(A);\n  for(unsigned int i=0;i&lt;A.size();i++) cout&lt;&lt;A[i]&lt;&lt;\" \";\n\n  return 0;\n}\n</code></pre>\n\n<p>[Edit]\nI noticed I accidentally used comma's instead of dots in <code>vector.size()</code> calls. Also, I noticed 2 arrays stopping one item too early in copying left and right vectors.</p>\n\n<p>Your code did not work. Above code compiles fine, but produces <code>1 3 5 2 4 7</code> as output. Also, have you thought of a vector of uneven length, such as <code>5 4 3 2 1</code>?</p>\n\n<p>At this point, the code will not split properly</p>\n"}, {"tags": [], "owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "is_accepted": false, "score": 0, "last_activity_date": 1550096020, "creation_date": 1550096020, "answer_id": 54680272, "question_id": 54678751, "link": "https://stackoverflow.com/questions/54678751/i-am-getting-garbage-values-in-my-merge-sort-code/54680272#54680272", "title": "I am getting garbage values in my Merge Sort code", "body": "<p>This has been answered at, <a href=\"https://stackoverflow.com/questions/24650626/how-to-implement-classic-sorting-algorithms-in-modern-c\">how-to-implement-classic-sorting-algorithms-in-modern-c</a>. But I thought I'd post an answer that beginners my find valuable as I've seen this asked many times in the past. It must be a popular homework question.</p>\n\n<p>In my opinion, if this is a modern C++ assignment, there should be a lot less of using indexing.</p>\n\n<p>So in this implementation, I have not used std::merge and wrote the merge so <em>some method</em> could be seen.</p>\n\n<p>Avoid the idiom: <code>using namespace std;</code> Why it is taught is beyond me. Typedef your types, it is much clearer.</p>\n\n<pre><code>using data_vect = std::vector&lt;int&gt;;\n</code></pre>\n\n<p>Hopefully this is clear enough and completely done with iterators. It is not as efficient as possible, the <code>push_back</code> in Merge could be avoided among other things. I DuckDucked this sort and the first few hits were not that great.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing data_vect = std::vector&lt;int&gt;;\nusing dv_iter = data_vect::iterator;\n\ndata_vect Merge(data_vect&amp; first, data_vect&amp; second)\n{\n    data_vect result;\n    dv_iter fval = first.begin();\n    dv_iter sval = second.begin();\n    for (;fval != first.end() || sval != second.end();)\n    {\n        if (fval == first.end())\n            result.push_back(*sval++);\n        else if (sval == second.end())\n            result.push_back(*fval++);\n        else if (*fval &lt; *sval)\n            result.push_back(*fval++);\n        else\n            result.push_back(*sval++);\n    }\n    return result;\n}\n\nvoid MergeSort(data_vect&amp; input)\n{\n    int half = input.size() / 2;\n    if (! half)\n        return;\n\n    data_vect left(input.begin(), input.begin() + half );\n    data_vect right(input.begin() + half, input.end());\n\n    MergeSort(left);\n    MergeSort(right);\n    input = Merge(left, right);\n}\n\nint main()\n{\n    data_vect A = { 6,2,7,4,1,5,3 };\n    MergeSort(A);\n    for ( auto&amp; val : A )\n        std::cout &lt;&lt; val &lt;&lt; \" \";\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11058484, "user_type": "registered", "profile_image": "https://graph.facebook.com/2258396160903494/picture?type=large", "display_name": "luffy008", "link": "https://stackoverflow.com/users/11058484/luffy008"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550096240, "creation_date": 1550089086, "question_id": 54678751, "link": "https://stackoverflow.com/questions/54678751/i-am-getting-garbage-values-in-my-merge-sort-code", "title": "I am getting garbage values in my Merge Sort code", "body": "<p>I am trying to implement merge sort algorithm in C++. This is my code.Logic seems to be fine.\nBut the output I'm getting is garbage values.I'm not able to get where the problem is in the code. \nI think my logic is correct but I'm not sure.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nvoid Merge(int A[],int L[],int nL,int R[],int nR);\nvoid MergeSort(int A[]);\n\n   //Function to Merge Arrays L and R into A. \n   //nL = number of elements in L\n   //nR = number of elements in R. \nvoid Merge(int A[],int L[],int nL,int R[],int nR)\n{ \n   // i - to mark the index of left subarray (L)\n   // j - to mark the index of right sub-raay (R)\n   // k - to mark the index of merged subarray (A)\n   int i=0;\n   int j=0;\n   int k=0;\n  while(i&lt;nL &amp;&amp; j&lt;nR)\n   {\n      if(L[i]&lt;=R[i])\n      { A[k]=L[i];\n        i=i+1;\n      }\n      else\n      { A[k]=R[j];\n        j=j+1;\n      }\n      k=k+1;\n  }\n  while(i&lt;nL)\n  { A[k]=L[i];\n      i=i+1;\n      k=k+1;\n  }\n  while(j&lt;nR)\n  { A[k]=R[j];\n    j=j+1;\n    k=k+1;\n  }\n}\n// Recursive function to sort an array of integers. \nvoid MergeSort(int A[],int n)\n{\n  if (n&lt;2) return;//base condition.If the array has less than two \n                     //elements, do nothing\n  int mid=n/2;\n   // create left and right subarrays\n   // mid elements (from index 0 till mid-1) should be part of left sub- \n      //array \n   // and (n-mid) elements (from mid to n-1) will be part of right sub- \n      //array\n  int left[mid];\n  int right[n-mid];\n\n  for(int i=0;i&lt;mid-1;i++) left[i]=A[i];// create left subarray\n  for(int i=mid;i&lt;n-1;i++) right[i-mid]=A[i];// create right subarray\n\n  MergeSort(left,mid);\n  MergeSort(right,n-mid);\n  Merge(A,left,mid,right,n-mid);\n}\n\nint main()\n{ int A[]={2,4,7,1,5,3};\n  int n=sizeof(A)/sizeof(A[0]);\n  MergeSort(A,n);\n  for(int i=0;i&lt;n;i++) cout&lt;&lt;A[i]&lt;&lt;\" \";\n\n  return 0;\n}\n</code></pre>\n\n<p>Expected output is 1 2 3 4 5 7</p>\n\n<p>But actual is 0 -785903160 1 0(every time it's different)</p>\n"}, {"tags": ["c++", "winapi", "uwp"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550089148, "post_id": 54678681, "comment_id": 96146433, "body": "You need to mark the write handle of the pipe as inheritable (but not the read handle) so the spawned process can actually access the pipe. Also, if <code>CreateProcess()</code> fails, you are leaking the pipe"}, {"owner": {"reputation": 460, "user_id": 10570894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dkkbs-zaIrg/AAAAAAAAAAI/AAAAAAAAABU/OZveEpdz_Ow/photo.jpg?sz=128", "display_name": "Updater", "link": "https://stackoverflow.com/users/10570894/updater"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550089242, "post_id": 54678681, "comment_id": 96146473, "body": "How do i make the write end inheritable? Oh yeah sure, i was just trying to debug it so i didn&#39;t check for leaks, thanks!"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550089352, "post_id": 54678681, "comment_id": 96146513, "body": "Use <code>SetHandleInformation()</code> with the <code>HANDLE_FLAG_INHERIT</code> flag.  Read this: <a href=\"https://docs.microsoft.com/en-us/windows/desktop/procthread/creating-a-child-process-with-redirected-input-and-output\" rel=\"nofollow noreferrer\">Creating a Child Process with Redirected Input and Output</a>"}, {"owner": {"reputation": 460, "user_id": 10570894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dkkbs-zaIrg/AAAAAAAAAAI/AAAAAAAAABU/OZveEpdz_Ow/photo.jpg?sz=128", "display_name": "Updater", "link": "https://stackoverflow.com/users/10570894/updater"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550089897, "post_id": 54678681, "comment_id": 96146762, "body": "Thanks for your answer! But the SetHandleInformation Method and the Flag have the same problem like the STARTF_USESTDHANDLES. They are not being found although i included the additional files &lt;windows.h&gt; &lt;tchar.h&gt; &lt;stdio.h&gt; and &lt;strsafe.h&gt;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550091123, "post_id": 54678681, "comment_id": 96147333, "body": "&quot;<i>[they] have the same problem like the STARTF_USESTDHANDLES. They are not being found although i included the additional files &lt;windows.h&gt; &lt;tchar.h&gt; &lt;stdio.h&gt; and &lt;strsafe.h&gt;</i>&quot; - you didn&#39;t say ANYTHING about that problem earlier. That is relevant information you should have given up front. That is a COMPLETELY different issue than what you actually presented.  <code>&lt;Windows.h&gt;</code> is all you need to use <code>SetHandleInformation()</code> and <code>CreateProcess()</code> and all of their various flags"}, {"owner": {"reputation": 460, "user_id": 10570894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dkkbs-zaIrg/AAAAAAAAAAI/AAAAAAAAABU/OZveEpdz_Ow/photo.jpg?sz=128", "display_name": "Updater", "link": "https://stackoverflow.com/users/10570894/updater"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550091241, "post_id": 54678681, "comment_id": 96147378, "body": "I&#39;m sorry if I failed to describe it better at the question with &quot;Maybe the problem is the STARTF_USESTDHANDLES flag which cannot be added.  According to this link (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/ns-processthreadsapi-_startupinfoa\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/desktop/api/processthreads&zwnj;&#8203;api/&hellip;</a>), the value of this Constant would be &quot;0x00000100&quot; so i tried to use 256 instead but it changes nothing. &quot;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550091310, "post_id": 54678681, "comment_id": 96147406, "body": "That statement did not accurately describe your actual problem."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550091585, "post_id": 54678681, "comment_id": 96147523, "body": "BTW, <code>const char* cmd = (&quot;java -jar decode.jar \\&quot;&quot; + bitString + &quot;\\&quot; &gt; decode.out&quot;).c_str(); LPWSTR cmdLine = (LPWSTR)cmd;</code> is not valid code. You are assigning <code>cmd</code> to point at temporary memory that is destroyed immediately, leaving the pointer dangling, and then you are type-casting that pointer incorrectly to a completely incompatible type..."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1550091755, "post_id": 54678681, "comment_id": 96147595, "body": "... Use something more like this instead: <code>std::string cmd = &quot;java -jar decode.jar \\&quot;&quot; + bitString + &quot;\\&quot; &gt; decode.out&quot;; LPCSTR cmdLine = cmd.c_str(); if (!CreateProcessA(&quot;...\\\\java.exe&quot;, cmdLine, ...))</code> though you really should use <code>std::wstring</code> and <code>CreateProcessW()</code> instead."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1550099946, "post_id": 54678681, "comment_id": 96150745, "body": "Hmm, CreateProcess() is not permitted in a UWP app.  Why you did not get a FALSE return value is the bigger mystery.  If you use an unusual manifest then you probably ought to mention it..."}, {"owner": {"reputation": 460, "user_id": 10570894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dkkbs-zaIrg/AAAAAAAAAAI/AAAAAAAAABU/OZveEpdz_Ow/photo.jpg?sz=128", "display_name": "Updater", "link": "https://stackoverflow.com/users/10570894/updater"}, "edited": false, "score": 0, "creation_date": 1550100691, "post_id": 54678681, "comment_id": 96150954, "body": "I&#39;ll try to use CreateProcessW tomorrow. Also I didn&#39;t touch my manifest at all. Weird that i don&#39;t get false if I should."}, {"owner": {"reputation": 460, "user_id": 10570894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dkkbs-zaIrg/AAAAAAAAAAI/AAAAAAAAABU/OZveEpdz_Ow/photo.jpg?sz=128", "display_name": "Updater", "link": "https://stackoverflow.com/users/10570894/updater"}, "edited": false, "score": 0, "creation_date": 1550136367, "post_id": 54678681, "comment_id": 96162017, "body": "I tried to use CreateProcessW but this doesn&#39;t change anything. Edited Question."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550214416, "post_id": 54678681, "comment_id": 96194252, "body": "@I&#39;maCar you can&#39;t pipe the output of <code>java.exe</code> to a file using the <code>&gt;</code> piping operator when executing <code>java.exe</code> <i>directly</i>. That operator is handled by the command processor of <code>cmd.exe</code>, so you would have to execute <code>cmd.exe</code> instead and use its <code>&#47;c</code> parameter to run <code>java.exe</code> and pipe the output to file. Or, you can instruct <code>CreateProcess()</code> to redirect stdout/err directly to an open file <code>HANDLE</code> instead of a pipe. Or, get your <code>CreatePipe()</code> code working properly so you can read the output of <code>java.exe</code> directly without redirecting to a file at all."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550214832, "post_id": 54678681, "comment_id": 96194404, "body": "@I&#39;maCar on a side note, you are leaking the <code>cmdLine</code> you allocate. You need to call <code>delete[] cmdLine</code> before exiting your function. Consider using <code>std::wstring</code>, <code>std::vector&lt;WCHAR&gt;</code>, or <code>std::unique_ptr&lt;WCHAR[]&gt;</code> instead of using <code>new WCHAR[]</code> directly."}, {"owner": {"reputation": 460, "user_id": 10570894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dkkbs-zaIrg/AAAAAAAAAAI/AAAAAAAAABU/OZveEpdz_Ow/photo.jpg?sz=128", "display_name": "Updater", "link": "https://stackoverflow.com/users/10570894/updater"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550235373, "post_id": 54678681, "comment_id": 96204981, "body": "@RemyLebeau the &gt; decode.out was just for testing reasons but i left it there because it didn&#39;t change anything. I tried to execute it with the cmd but, as before, it didn&#39;t change anything on the non-existing output: <code>string cmd = &quot;\\&quot;C:\\\\Windows\\\\System32\\\\cmd.exe\\&quot; &#47;C \\&quot;\\&quot;C:\\\\Program Files\\\\Java\\\\jre-10.0.2\\\\bin\\\\java.exe\\&quot; -jar \\&quot;D:\\\\decode.jar\\&quot; \\&quot;01101001\\&quot;\\&quot;&quot;;</code> If you want you can try yourself a simple example to create a C++UWP dll which just executes a jar file which gives an output. I am really desperating on this. I will try this HANDLE with file ASAP"}, {"owner": {"reputation": 460, "user_id": 10570894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dkkbs-zaIrg/AAAAAAAAAAI/AAAAAAAAABU/OZveEpdz_Ow/photo.jpg?sz=128", "display_name": "Updater", "link": "https://stackoverflow.com/users/10570894/updater"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550323065, "post_id": 54678681, "comment_id": 96231085, "body": "@RemyLebeau btw the file should be created by the jar itself not by the <code>&gt;</code> operator. Calling the jar like <code>java -jar decode.jar &quot;10010101&quot;</code> creates a file <code>decode.out</code>"}, {"owner": {"reputation": 460, "user_id": 10570894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dkkbs-zaIrg/AAAAAAAAAAI/AAAAAAAAABU/OZveEpdz_Ow/photo.jpg?sz=128", "display_name": "Updater", "link": "https://stackoverflow.com/users/10570894/updater"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550323831, "post_id": 54678681, "comment_id": 96231289, "body": "@RemyLebeau is it even possible to use a C++ dll for an UWP-Application? Aren&#39;t there any security issues from UWP when calling external executables?"}], "owner": {"reputation": 460, "user_id": 10570894, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dkkbs-zaIrg/AAAAAAAAAAI/AAAAAAAAABU/OZveEpdz_Ow/photo.jpg?sz=128", "display_name": "Updater", "link": "https://stackoverflow.com/users/10570894/updater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550214649, "creation_date": 1550088746, "last_edit_date": 1550214649, "question_id": 54678681, "link": "https://stackoverflow.com/questions/54678681/createprocess-pipe-is-always-empty", "title": "CreateProcess Pipe is always empty", "body": "<p>I am trying to produce a .dll for my C# UWP application in C++. I want to get the output of the CreateProcess command using Pipes.</p>\n\n<p>The result should be the consoleoutput of the .jar file but what I get is an empty string. Maybe the problem is the <code>STARTF_USESTDHANDLES</code> flag which cannot be added.</p>\n\n<p>According to this link (<a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/ns-processthreadsapi-_startupinfoa\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/api/processthreadsapi/ns-processthreadsapi-_startupinfoa</a>), the value of this Constant would be \"0x00000100\" so i tried to use 256 instead but it changes nothing. </p>\n\n<pre><code>HANDLE rPipe, wPipe;\n\n//Create pipes to write and read data\nCreatePipe(&amp;rPipe, &amp;wPipe, NULL, 0);\n\nSTARTUPINFO sInfo;\nZeroMemory(&amp;sInfo, sizeof(sInfo));\nPROCESS_INFORMATION pInfo;\nZeroMemory(&amp;pInfo, sizeof(pInfo));\nsInfo.cb = sizeof(sInfo);\n//sInfo.dwFlags = STARTF_USESTDHANDLES;\nsInfo.dwFlags = 256;\nsInfo.hStdInput = NULL;\nsInfo.hStdOutput = wPipe;\nsInfo.hStdError = wPipe;\n\n//if (!SetHandleInformation(wPipe, HANDLE_FLAG_INHERIT, 0))\n    //return \"Error SetHandleInformation\";\n\n//Create the process here.\nstring cmd = \"java -jar decode.jar \\\"\" + bitString + \"\\\"\";\n\n// Assumes std::string is encoded in the current Windows ANSI codepage\nint bufferlen = ::MultiByteToWideChar(CP_ACP, 0, cmd.c_str(), cmd.size(), NULL, 0);\n\nif (bufferlen == 0)\n{\n    // Something went wrong. Perhaps, check GetLastError() and log.\n    CloseHandle(wPipe);\n    CloseHandle(rPipe);\n    return \"errorBuffer\";\n}\n\n// Allocate new LPWSTR - must deallocate it later\nLPWSTR cmdLine = new WCHAR[bufferlen + 1];\n\n::MultiByteToWideChar(CP_ACP, 0, cmd.c_str(), cmd.size(), cmdLine, bufferlen);\n\n// Ensure wide string is null terminated\ncmdLine[bufferlen] = 0;\n\nif (!CreateProcessW(L\"C:\\\\Program Files (x86)\\\\Java\\\\jdk1.8.0_161\\\\bin\\\\java.exe\", cmdLine, 0, 0, FALSE, NORMAL_PRIORITY_CLASS | CREATE_NO_WINDOW, 0, 0, &amp;sInfo, &amp;pInfo)) {\n    CloseHandle(wPipe);\n    CloseHandle(rPipe);\n    return \"errorProcess\";\n}\n\n\nWaitForSingleObject(pInfo.hProcess, INFINITE);\nCloseHandle(wPipe);\n\n//now read the output pipe here.\n\nchar buf[100];\nDWORD reDword;\nstring m_csOutput;\nBOOL res;\ndo\n{\n    res = ReadFile(rPipe, buf, 100, &amp;reDword, 0);\n    m_csOutput += buf;\n} while (res);\n\nCloseHandle(rPipe);\n\nreturn m_csOutput.c_str();\n</code></pre>\n"}, {"tags": ["c++", "validation", "input", "integer"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1550088230, "post_id": 54678518, "comment_id": 96145990, "body": "<code>getUserInput();</code> doesn&#39;t &quot;goto&quot; the start of the function. It starts a whole other call to the function. The current function call will eventually have to finish when this new call is done, and you will eventually reach the end of the function call without returning anything."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1550088246, "post_id": 54678518, "comment_id": 96145995, "body": "You are missing the <code>return</code> in the recursive call. Need to use <code>retrun getUserInput();</code>."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1550088301, "post_id": 54678518, "comment_id": 96146016, "body": "Use a <code>do-while</code> loop, not recursion.  If someone had the patience, they could blow out the stack if they entered <code>0</code> many times."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550088326, "post_id": 54678518, "comment_id": 96146030, "body": "Also note that <code>std::cin</code> will be put into a failed state if you try to read an <code>int</code> when the input is not readable as an <code>int</code>. You will need to clear the input and reset the fail bits."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550088676, "post_id": 54678518, "comment_id": 96146198, "body": "Also, is there a maximum number of tries to get the input correct?  What if the user wants to say &quot;I quit&quot;?  Or is the user forced to keep trying forever?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1550090184, "post_id": 54678518, "comment_id": 96146899, "body": "<code>maxNumber&gt;1 || maxNumber&lt;=100</code> seems wrong. It will let you have any number at all. Did you mean <code>&amp;&amp;</code> rather than <code>||</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "edited": false, "score": 0, "creation_date": 1550093637, "post_id": 54678888, "comment_id": 96148435, "body": "I found the do-while loop hard to see where or if it terminates."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "edited": false, "score": 0, "creation_date": 1550094515, "post_id": 54678888, "comment_id": 96148819, "body": "It terminates on the <code>break</code>, which is reaches only if the user enters a valid integer in the acceptable range"}, {"owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "edited": false, "score": 0, "creation_date": 1550094658, "post_id": 54678888, "comment_id": 96148871, "body": "Yes, I saw that (later) but not after missing the <code>break</code> the first time around, which was my point."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "edited": false, "score": 0, "creation_date": 1550094810, "post_id": 54678888, "comment_id": 96148930, "body": "Obviously we have different coding styles. I find your answer quite ugly to read, even if it is functional. I prefer to use simpler/cleaner statements, makes debugging easier."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1550094542, "last_edit_date": 1550094542, "creation_date": 1550089683, "answer_id": 54678888, "question_id": 54678518, "link": "https://stackoverflow.com/questions/54678518/my-code-fails-to-verify-input-as-an-integer/54678888#54678888", "title": "My code fails to verify input as an integer", "body": "<p>If the user does not type in an integer, your code enters an infinite recursive loop that it does not recover from, eventually overflowing the call stack.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>int getUserInput()\n{    \n    int number;\n\n    cout &lt;&lt; \"Enter a number between 1 - 100: \";\n\n    do\n    {\n        // if the user input a valid integer, process it\n\n        if (cin &gt;&gt; number)\n        {\n            if (number &gt;= 1 &amp;&amp; number &lt;= 100)\n                break;\n\n            cout &lt;&lt; \"Number out of range, try again: \";\n        }\n        else\n        {\n            cin.clear();\n            cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n\n            cout &lt;&lt; \"Invalid input, try again: \";\n        }\n    }\n    while (true);\n\n    return number;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1899, "user_id": 8854921, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b76055b306b4dbab08ee558957f52e?s=128&d=identicon&r=PG&f=1", "display_name": "Bo R", "link": "https://stackoverflow.com/users/8854921/bo-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1550093297, "creation_date": 1550093297, "answer_id": 54679722, "question_id": 54678518, "link": "https://stackoverflow.com/questions/54678518/my-code-fails-to-verify-input-as-an-integer/54679722#54679722", "title": "My code fails to verify input as an integer", "body": "<p>You didn't state what range you wanted the input to be in so adjust accordingly.</p>\n\n<pre><code>int getUserInput() {\n\n    int maxNumber;\n\n    while (!(cin &gt;&gt; maxNumber) || maxNumber &lt;= 1 || 100 &lt; maxNumber) {\n        if (cin)\n            cout &lt;&lt; \"number out of range, try again: \";\n        else {\n            cin.clear();\n            cin.ignore(numeric_limits&lt;int&gt;::max(), '\\n');\n            cout &lt;&lt; \"Not a number, please try again : \";\n        }\n    }\n\n    return maxNumber;\n}\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 6570334, "user_type": "registered", "accept_rate": 94, "profile_image": "https://lh6.googleusercontent.com/-Vnvf7q6OgP0/AAAAAAAAAAI/AAAAAAAAADg/qv0Yo_jicfc/photo.jpg?sz=128", "display_name": "Unknownzdx", "link": "https://stackoverflow.com/users/6570334/unknownzdx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "closed_date": 1550094595, "accepted_answer_id": 54678888, "answer_count": 2, "score": 1, "last_activity_date": 1550094542, "creation_date": 1550088115, "question_id": 54678518, "link": "https://stackoverflow.com/questions/54678518/my-code-fails-to-verify-input-as-an-integer", "closed_reason": "Duplicate", "title": "My code fails to verify input as an integer", "body": "<p>I want to obtain an input from the user and validate it as an integer, however my method seems to fail, when a letter or word the program just ends. Any one have a quick and easy fix for this?</p>\n\n<pre><code>int getUserInput(){\n\n    int maxNumber;\n\n    // the user input a valid integer, process it\n\n    if (cin &gt;&gt; maxNumber)\n    {\n        if (maxNumber&gt;1 || maxNumber&lt;=100) {\n            return maxNumber;\n        }\n    } else{\n        getUserInput();\n    }\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1550088885, "post_id": 54678248, "comment_id": 96146303, "body": "Did it work when you where dynamically linking it? (i.e. has it ever worked)? Have you run it in through the debugger to see where it crashes? Also - purely out of curiosity - why do you want it statically linked? - this will make it a pain commercially speaking (but if its not commercial then its probably ok)"}, {"owner": {"reputation": 41, "user_id": 2242321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd77ebfb8757994578bdd465176e3f82?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/2242321/rick"}, "reply_to_user": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1550089255, "post_id": 54678248, "comment_id": 96146478, "body": "re: I works beautifully when Dynamically compiled re: debug in release mode with static build is a pain in the butt. It simply ends the application with SIGSEGV re: Adverse to your assumption commercially speaking a single file is much more appreciated than a full setup with a bunch of tedious libraries and licensewise as long as you do not modify QT Open Source libraries there is no problem with the license policy.  I have to ADD to my previous topic that I also tried to compile and debug with MinGW 64 seh version. All compilers are throwing the same result :("}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 1, "creation_date": 1550095966, "post_id": 54678248, "comment_id": 96149392, "body": "I went through a similar pain-in-the-arse static compilation to improve the deployment. But in the end (for both widows and linux) I found that it was too much of a pain. I got my project working, but when I wanted to update qt creator I had to statically compile it again etc... But its very much easier to grab the libraries - you are using windows so you could benefit from windeployqt: <a href=\"https://doc.qt.io/Qt-5/windows-deployment.html\" rel=\"nofollow noreferrer\">doc.qt.io/Qt-5/windows-deployment.html</a> which does most of the work for you. Instead of delivering a single file you just deliver a folder easy. Also this link is not the official link for..."}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1550096042, "post_id": 54678248, "comment_id": 96149428, "body": "... statically compiling qt libs. I recall, successfully using this link: <a href=\"https://doc.qt.io/QtForDeviceCreation/qtee-static-linking.html\" rel=\"nofollow noreferrer\">doc.qt.io/QtForDeviceCreation/qtee-static-linking.html</a> - although it appears to have changed (been updated) since last time I used it..."}, {"owner": {"reputation": 41, "user_id": 2242321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd77ebfb8757994578bdd465176e3f82?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/2242321/rick"}, "reply_to_user": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1550097069, "post_id": 54678248, "comment_id": 96149803, "body": "Thank you for the link. I looked into it but unfortunately no link really helpful.  Any tip about configuration line??  <code>configure -release -static -static-runtime -no-pch -optimize-size -opengl desktop -platform win32-g++ -prefix &quot;C:\\Qt\\QT_static&quot; -skip webengine -nomake tools -nomake tests -nomake examples -qt-libpng -qt-libjpeg</code>"}, {"owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1550128802, "post_id": 54678248, "comment_id": 96158348, "body": "The config line is basically just saying what to compile. It looks about right to me. Release is good for size - but you may want the debug for the first time for debugging. You probably don&#39;t want the tool, tests and examples - just takes longer. I also assume you don&#39;t need webengine? The prefix is basically where to put it. Are you using any particular plugins?"}, {"owner": {"reputation": 41, "user_id": 2242321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd77ebfb8757994578bdd465176e3f82?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/2242321/rick"}, "reply_to_user": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "edited": false, "score": 0, "creation_date": 1550192287, "post_id": 54678248, "comment_id": 96189110, "body": "Hi, thank you for following up. My application is a simple Widget app with just one push button with no event associated with it. It is the most basic and minimal application that could cone into my mind as PoC. This is why I am very surprised that it fails. I recompiled a few for times but same result. What should I try next?"}], "answers": [{"tags": [], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "is_accepted": false, "score": 0, "last_activity_date": 1550427377, "last_edit_date": 1550427377, "creation_date": 1550415232, "answer_id": 54734441, "question_id": 54678248, "link": "https://stackoverflow.com/questions/54678248/qt-application-crash-when-mouse-is-over-a-push-button/54734441#54734441", "title": "QT Application Crash when mouse is over a push button", "body": "<p>I am posting this as an answer because its far too long for a comment...</p>\n\n<p>I did a \"from scratch\" install of qt. I did this starting from the qt git hub repo. Once finished, I added it as a kit to my qtcreator and re-built some old GUI projects I had with push buttons. I then took the exe's (they where about 500mb because I used debug config) and ran them on a PC that has never seen Qt (a travel laptop) and the two programs I tested both ran fine with button presses and no crashes.</p>\n\n<p>So, here is the list of instructions that I used (for windows 10), you can perhaps try this from the start to see if this helps:</p>\n\n<h2>1. Preparation</h2>\n\n<p>In no particular order:</p>\n\n<ul>\n<li>install strawberry perl (required during compilation). Note normal perl does not seem to work very well. \n\n<ul>\n<li>from here: <a href=\"http://strawberryperl.com/\" rel=\"nofollow noreferrer\">http://strawberryperl.com/</a></li>\n</ul></li>\n<li>Get the qt source:\n\n<ul>\n<li><code>git clone https://github.com/qt/qt5.git qt5</code></li>\n<li><code>git checkout 5.12.1</code> (specific build instead of 5.12 latest)</li>\n<li><code>git submodule update --init --recursive</code></li>\n<li><code>git submodule foreach --recursive \"git clean -dfx\" &amp;&amp; git clean -dfx</code> (ensure repo is clean)</li>\n</ul></li>\n<li>Download and install mingw64 (32 bit) from: <a href=\"https://sourceforge.net/projects/mingw-w64/\" rel=\"nofollow noreferrer\">https://sourceforge.net/projects/mingw-w64/</a>. I used options:\n\n<ul>\n<li>version    7.3.0</li>\n<li>Arch       i686</li>\n<li>Threads    posix</li>\n<li>Exception  dwarf</li>\n<li>Build-rev  0</li>\n</ul></li>\n<li>Windows 10 NTFS long path names\n\n<ul>\n<li>Get MediaCreationTool1809.exe from here <a href=\"https://www.microsoft.com/en-gb/software-download/windows10\" rel=\"nofollow noreferrer\">https://www.microsoft.com/en-gb/software-download/windows10</a> and run it as admin.</li>\n<li><a href=\"https://superuser.com/questions/1119883/windows-10-enable-ntfs-long-paths-policy-option-missing\">https://superuser.com/questions/1119883/windows-10-enable-ntfs-long-paths-policy-option-missing</a>\n\n<ul>\n<li>Once you installed step 1 (maybe reboot) then you should be able to do windows button \"gpedit.msc\" and see the open to open gpedit</li>\n<li>Right click it, run as admin. Then: Local Computer Policy --> Computer Config --> Administrative Templates --> System --> FileSystem --> Enable Win32 Long Paths (double click)</li>\n<li>In there click the enable tick box and ok.</li>\n</ul></li>\n</ul></li>\n<li>Install Python (required during make install):\n\n<ul>\n<li>From here: <a href=\"https://www.python.org/downloads/\" rel=\"nofollow noreferrer\">https://www.python.org/downloads/</a></li>\n</ul></li>\n</ul>\n\n<p><strong>NOTE:</strong> in the mingw folder there should be a mingw-xx.bat file to open an cmd prompt environment for gcc. Run this for all cmd prompts to do the following actions.</p>\n\n<p><strong>NOTE:</strong> make sure you edit the paths so that strawberry perl .../bin is before any other perl's\nSo the dos env setup should look like:</p>\n\n<pre><code>    set PATH=D:\\install\\StrawberryPerl\\perl\\bin;%PATH%\n    set PATH=D:\\install\\mingw-w64\\i686-7.3.0-posix-dwarf\\mingw32\\bin;%PATH%\n    set PATH=D:\\install\\Qt\\qt5\\qtbase\\bin;%PATH%\n    set PATH=D:\\install\\Qt\\qt5\\gnuwin32\\bin;%PATH%\n</code></pre>\n\n<p>Where <code>D:\\install\\Qt\\qt5</code> is where my qt5 git repo is.</p>\n\n<h2>2. Configuration</h2>\n\n<h3>2.1. Static Config</h3>\n\n<ul>\n<li>Create folder at the same level as <code>../qt5/</code> repo called <code>../qt5-static-build/</code> (for example) and cd into it, then run:</li>\n</ul>\n\n<pre><code>- ..\\qt5\\configure -debug -opensource -static -static-runtime -skip webengine -nomake examples -nomake tests -nomake tools -accessibility -no-sql-sqlite -no-opengl -platform win32-g++ -qt-zlib -qt-libpng -qt-libjpeg -confirm-license -prefix \"C:\\install\\Qt\\5.12.1-static\"\n</code></pre>\n\n<h3>2.2. Shared Lib Config</h3>\n\n<ul>\n<li>Create folder at the same level as <code>../qt5/</code> repo called <code>../qt5-build/</code> (for example) and cd into it, then run:</li>\n</ul>\n\n<pre><code>..\\qt5\\configure -debug -opensource -skip webengine -nomake examples -nomake tests -nomake tools -accessibility -no-sql-sqlite -no-opengl -platform win32-g++ -qt-zlib -qt-libpng -qt-libjpeg -confirm-license -prefix \"C:\\install\\Qt\\5.12.1-sharedlib\"\n</code></pre>\n\n<h2>3. Compile and installation</h2>\n\n<p>Either way you configured qt (static or not) this part is the same, basically run:</p>\n\n<pre><code>mingw32-make -j8\nmingw32-make install -j8\n</code></pre>\n\n<p><strong>Note:</strong> you can use whatever parallel number you want (<code>-j&lt;num-jobs&gt;</code>). Each stage takes a while depending on your CPU of course.</p>\n\n<p>Once you have finished, the install path set in your config line (e.g. <code>C:\\install\\Qt\\5.12.1-static</code>) will contain your qt install. You can then add this in qtcreator as a new qt version (if that is how you are building it).</p>\n\n<h2>Appendix - release static configuration</h2>\n\n<p>You may want the following configuration if you want release builds etc (but I did not test this yet):</p>\n\n<p>..\\qt5\\configure with the following options:</p>\n\n<p><code>-release -optimize-size -opengl desktop -no-pch -platform win32-g++ -opensource -static -static-runtime -skip webengine -nomake examples -nomake tests -nomake tools -accessibility -no-sql-sqlite -no-opengl -platform win32-g++ -qt-zlib -qt-libpng -qt-libjpeg -confirm-license -prefix \"C:\\install\\Qt\\5.12.1-static\"</code></p>\n\n<p>where I added:</p>\n\n<ul>\n<li><code>-release</code> - instead of debug</li>\n<li><code>-optimize-size</code> - make smallest size</li>\n<li><code>-opengl desktop</code> - opengl if you must have it</li>\n<li><code>-no-pch</code> - no pre-compiled headers, not sure you need this, but... </li>\n<li><code>-platform win32-g++</code> - Again, this may help if you have build issues, but probably don't need it.</li>\n</ul>\n"}], "owner": {"reputation": 41, "user_id": 2242321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd77ebfb8757994578bdd465176e3f82?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/2242321/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550427377, "creation_date": 1550087159, "last_edit_date": 1550101783, "question_id": 54678248, "link": "https://stackoverflow.com/questions/54678248/qt-application-crash-when-mouse-is-over-a-push-button", "title": "QT Application Crash when mouse is over a push button", "body": "<p>I will try to cut the story short as much as I can.\nI statically compiled QT 5.11.2 to be able to compile a single executable under windows following this guide:\n<a href=\"https://retifrav.github.io/blog/2018/02/17/build-qt-statically/\" rel=\"nofollow noreferrer\">https://retifrav.github.io/blog/2018/02/17/build-qt-statically/</a></p>\n\n<p>After many trials, compiling and such I was able to get in \"release\" mode a <code>.exe</code> of around 15MB.</p>\n\n<p>I compiled it using different MinGW versions with the option <code>\"QTPLUGIN.imageformats = -\"</code> in the <code>.pro</code> project to avoid <code>-ltiff</code> error.\nThis is strange as my Application has no image handling opss...</p>\n\n<p>My application is a basic and simple push button (no event associated). </p>\n\n<p>The issue I am facing now is that when the mouse moves over the button and it should turn from grey to light blue the Windows wheel spins for a second before the application crashes with <code>Segmentation fault</code>.</p>\n\n<p>Using dynamic compiling it works well and no crashes.</p>\n\n<p>After many tries I found out that at least another QT objects crashes in the same way which is <code>RadioBox</code>. <code>CheckBox</code> and <code>Tool Button</code> are handled correctly the mouse over event.</p>\n\n<p>I tried to change crashing object properties copying from working objects but still crashes!</p>\n\n<p>I am desperate! After the nightmare of static compiling I landed to this issues and no googling helped me so far.</p>\n\n<p>Tested Compilers are:</p>\n\n<pre><code>MinGW 4.9.2 g++\nMinGW 5.3 g++\nMinGW 7.3 g++\n</code></pre>\n\n<p>I also tried to remove the Debugger just in case.</p>\n\n<p>Any help?</p>\n\n<p>I am moving from Rad Studio to QT for its known issues finding more troubles than solutions.</p>\n"}, {"tags": ["c++", "bison", "error-recovery"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1550095390, "post_id": 54677815, "comment_id": 96149179, "body": "You seem to be trying to suppress the error message itself. You can&#39;t. Error productions are to aid enoarser in <i>recovering</i> from errors, by helping it to throw away input rather than produce <i>further</i> errors."}, {"owner": {"reputation": 755, "user_id": 5391248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2556ff2bd0bf7c3b11e6e04366165d?s=128&d=identicon&r=PG&f=1", "display_name": "F. ALA", "link": "https://stackoverflow.com/users/5391248/f-ala"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1550147553, "post_id": 54677815, "comment_id": 96168463, "body": "I&#39;m not sure i understand, because i thought that using the <code>error</code> token would allow the parsing to continue (that is, stop the process from exiting).  Is the behavior that i want not possible (that is, to skip the lines that don&#39;t fit into any rule, yet has known tokens)?  If so, could you explain the purpose of the <code>error</code> token?"}, {"owner": {"reputation": 755, "user_id": 5391248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2556ff2bd0bf7c3b11e6e04366165d?s=128&d=identicon&r=PG&f=1", "display_name": "F. ALA", "link": "https://stackoverflow.com/users/5391248/f-ala"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1550608615, "post_id": 54677815, "comment_id": 96329113, "body": "To make things clearer, i don&#39;t want to &quot;<i>supress the error message itself</i>&quot;. I just want the parser to continue running past these errors."}], "answers": [{"tags": [], "owner": {"reputation": 755, "user_id": 5391248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2556ff2bd0bf7c3b11e6e04366165d?s=128&d=identicon&r=PG&f=1", "display_name": "F. ALA", "link": "https://stackoverflow.com/users/5391248/f-ala"}, "is_accepted": true, "score": 0, "last_activity_date": 1550672413, "creation_date": 1550672413, "answer_id": 54788519, "question_id": 54677815, "link": "https://stackoverflow.com/questions/54677815/bison-error-recovery-panic-mode-not-working/54788519#54788519", "title": "Bison error recovery (panic-mode) not working?", "body": "<p>This post <a href=\"https://stackoverflow.com/a/29515780/5391248\">here</a> gave me a bit of insight on what the problem could be. In some cases the problem occurs because the stopping condition in the \"error rule\" is not met, which in his case was because the parser was ignoring/skipping the newline (<code>'\\n'</code>). So the rule: </p>\n\n<blockquote>\n  <p>error '\\n' { yyerrok; yyclearin; }</p>\n</blockquote>\n\n<p>would never work...(since <code>'\\n'</code> was never being captured)</p>\n\n<p>Thus, i isolated the error between 2 known tokens to rule out this possibility yet still got the error. After investigating a bit more, i discovered the problem was inside the <code>yyerror</code> function which was causing the program to exit.</p>\n"}], "owner": {"reputation": 755, "user_id": 5391248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2556ff2bd0bf7c3b11e6e04366165d?s=128&d=identicon&r=PG&f=1", "display_name": "F. ALA", "link": "https://stackoverflow.com/users/5391248/f-ala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 54788519, "answer_count": 1, "score": 0, "last_activity_date": 1550672413, "creation_date": 1550085452, "last_edit_date": 1550665743, "question_id": 54677815, "link": "https://stackoverflow.com/questions/54677815/bison-error-recovery-panic-mode-not-working", "title": "Bison error recovery (panic-mode) not working?", "body": "<p>I've been reading up on how to make the Bison parsing \"error resistant\", and it seems <a href=\"https://www.gnu.org/software/bison/manual/html_node/Error-Recovery.html\" rel=\"nofollow noreferrer\">pretty straightforward</a>. No matter <a href=\"http://www.cs.ecu.edu/karl/5220/spr16/Notes/Bison/error.html\" rel=\"nofollow noreferrer\">where i've looked</a>, it pretty much comes down to the <a href=\"https://www.gnu.org/software/bison/manual/html_node/Simple-Error-Recovery.html\" rel=\"nofollow noreferrer\">same simple solution</a>.</p>\n\n<p>Yet, i've been unable to make it work and i can't see the flaw. The parser keeps stopping/exiting instead of continuing/recovering...</p>\n\n<p>What i have is basically a rule to treat all the <code>keywords</code> (and their patterns), like:</p>\n\n<pre><code>keywords:\n    key1_rule\n    | key2_rule\n    | key3_rule\n;\n</code></pre>\n\n<p>And above it, i have my <code>file</code> iterator rule:</p>\n\n<pre><code>file:\n    %empty\n    | file keywords\n;\n</code></pre>\n\n<p>The problem i have is that sometimes the keywords are used in a pattern that isn't treated, but this isn't a problem because we don't want to capture these cases (and just want to ignore them). For example:</p>\n\n<ul>\n<li><p>We capture the pattern: </p>\n\n<blockquote>\n  <p><code>KEY1 NAME KEY2 VALUE</code></p>\n</blockquote></li>\n<li><p>We want to ignore: </p>\n\n<blockquote>\n  <p><code>KEY1 NAME KEY3 KEY2 VALUE</code></p>\n</blockquote>\n\n<p>or</p>\n\n<blockquote>\n  <p><code>KEY2 VALUE</code> (KEY2 not preceded by KEY1)</p>\n</blockquote></li>\n</ul>\n\n<p>In these cases we want to ignore, the parser correctly launches an <strong>\"unexpected token\"</strong> error. In the example above the error would be <code>\"Parse error: syntax error, unexpected KEY3\"</code> (or <code>\"Parse error: syntax error, unexpected KEY2\"</code>).</p>\n\n<p>So from what i've seen, i thought the solution would be as simple as using the <code>error</code> token, like so:</p>\n\n<pre><code>file:\n    %empty\n    | file keywords\n    | file error\n;\n</code></pre>\n\n<p>I've also tried*:</p>\n\n<pre><code>keywords:\n    key1_rule\n    | key2_rule\n    | key3_rule\n    | keywords error\n;\n</code></pre>\n\n<p>*and also tried: <code>error '\\n'</code> and <code>error '\\n' { yyerrok; }</code> (which i've seen in some cases)</p>\n\n<p>Sadly, none of my tries were successful...and i keep getting the same <strong>\"unexpected\"</strong> error. I wonder if there's something i have to configure before being able to use it correctly...i've noticed that i had <code>%option nodefault</code> in my lexer file and tried removing it, but had the same result too.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1550085524, "post_id": 54677785, "comment_id": 96144688, "body": "You&#39;re right about its meaning. There&#39;s no good reason to do it in a simple <code>if</code> statement like this one. In more complex situations it can simplify logic involving an <code>if ... else if ...</code> ladder, when such an assignment is only supposed to be made under certain circumstances. I know, that&#39;s a lot of handwaving. A proper example won&#39;t be readable in a comment."}], "answers": [{"comments": [{"owner": {"reputation": 3860, "user_id": 6807211, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/3b4e615f42b0a0880467650ae5e229c7?s=128&d=identicon&r=PG&f=1", "display_name": "jingweimo", "link": "https://stackoverflow.com/users/6807211/jingweimo"}, "edited": false, "score": 0, "creation_date": 1550085590, "post_id": 54677838, "comment_id": 96144716, "body": "Thanks for your answer!"}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 3, "last_activity_date": 1550085531, "creation_date": 1550085531, "answer_id": 54677838, "question_id": 54677785, "link": "https://stackoverflow.com/questions/54677785/variable-assignment-in-an-if-condition-statement/54677838#54677838", "title": "Variable assignment in an if-condition statement", "body": "<p>No, there's no reason to do it other than writing it in 1 line vs 2 lines.</p>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": false, "score": 0, "last_activity_date": 1550085750, "creation_date": 1550085750, "answer_id": 54677887, "question_id": 54677785, "link": "https://stackoverflow.com/questions/54677785/variable-assignment-in-an-if-condition-statement/54677887#54677887", "title": "Variable assignment in an if-condition statement", "body": "<p>Assignment is typically implemented as</p>\n\n<pre><code>struct foo {\n    foo&amp; operator=(const foo&amp; other) {\n        // do the assignment\n        return *this;\n    }\n};\n</code></pre>\n\n<p>and the reason is to allow chaining as in your example. There is really not much more to it than saving a line of code.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1550087202, "creation_date": 1550087202, "answer_id": 54678261, "question_id": 54677785, "link": "https://stackoverflow.com/questions/54677785/variable-assignment-in-an-if-condition-statement/54678261#54678261", "title": "Variable assignment in an if-condition statement", "body": "<p>In C++17, this gets a certain twist - now you are not only allowed to assign variables, you are also allowed to create and initialize variables in the <code>if</code> condition (it is called if statement with initializer):</p>\n\n<pre><code>if (int a = foo(); a != 0) {\n//...\n}\n</code></pre>\n\n<p>That has a benefit of being able to introduce scoped variables without having to put new set of artifical braces around it, like pre-C++17 you'd have to do</p>\n\n<pre><code>{\nint a = foo();\nif (a != 0) {\n//...\n}\n}\n</code></pre>\n"}], "owner": {"reputation": 3860, "user_id": 6807211, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/3b4e615f42b0a0880467650ae5e229c7?s=128&d=identicon&r=PG&f=1", "display_name": "jingweimo", "link": "https://stackoverflow.com/users/6807211/jingweimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 54677838, "answer_count": 3, "score": 1, "last_activity_date": 1550087202, "creation_date": 1550085376, "last_edit_date": 1550085542, "question_id": 54677785, "link": "https://stackoverflow.com/questions/54677785/variable-assignment-in-an-if-condition-statement", "title": "Variable assignment in an if-condition statement", "body": "<p>I have seen some codes that perform variable assignment in the <code>if</code> condition, for example:</p>\n\n<pre><code>if((data-&gt;symStem = sym.isStem())==TRUE)  //if condition\n{\n   // do something\n}\n</code></pre>\n\n<p>To my understanding, in the if condition above, <code>sym.isStem()</code> is first assigned to <code>data-&gt;symStem</code>, and thereafter, the equality condition (for <code>sym.isStem()</code> or <code>data-&gt;sysStem</code>) is evaluated. Please correct me if there is something wrong. </p>\n\n<p>I wonder if there is any particular reason to do so except that the codes are more compact. </p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550084083, "post_id": 54677424, "comment_id": 96144067, "body": "why do you want a vector of random generators? Either you use the same seed then they all will give you the same sequence, if you dont you get random numbers just as you would from using a single generator"}, {"owner": {"reputation": 3, "user_id": 7586711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f8facd3326e4f6cb8ff49bc57dd1dc?s=128&d=identicon&r=PG&f=1", "display_name": "Hal9000", "link": "https://stackoverflow.com/users/7586711/hal9000"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550084822, "post_id": 54677424, "comment_id": 96144393, "body": "I&#39;ll have multiple distributions and I currently get those distributions through another vector. I figured this would be a convenient way to generate random generators given that."}, {"owner": {"reputation": 165, "user_id": 4764898, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X6Id2.jpg?s=128&g=1", "display_name": "ggcg", "link": "https://stackoverflow.com/users/4764898/ggcg"}, "edited": false, "score": 0, "creation_date": 1598659753, "post_id": 54677424, "comment_id": 112540479, "body": "I have a similar situation only that in my case the number of random vars is case dependent and parameters are chosen by the user.  So in each instance one may have a different number of distributions."}], "answers": [{"tags": [], "owner": {"reputation": 229, "user_id": 10918448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2226af4f3e09f4c922563448dbec69?s=128&d=identicon&r=PG&f=1", "display_name": "Unterfliege", "link": "https://stackoverflow.com/users/10918448/unterfliege"}, "is_accepted": true, "score": 0, "last_activity_date": 1550087437, "creation_date": 1550087437, "answer_id": 54678320, "question_id": 54677424, "link": "https://stackoverflow.com/questions/54677424/how-to-create-vector-of-variate-generator/54678320#54678320", "title": "How to create vector of variate_generator?", "body": "<p>At first, your example code does compile without any error message (GCC 8.2.1, boost 1.69).</p>\n\n<p>But, don't do that. Just use boost::variate_generator&lt;>::distribution() to set a new distribution.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>NormalDistribution noise_distribution(mean, sigma);\nNormalDistribution other_distribution(5.0, 2.0);\nNormalGenerator rng_eng(rng, noise_distribution); // create RNG\n// ... generate RNG using noise_distribution\nrng_eng.distribution() = other_distribution;\n// ... generate RNG using other_distribution\nrng_eng.distribution() = noise_distribution;\n// ... generate RNG using noise_distribution again\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7586711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42f8facd3326e4f6cb8ff49bc57dd1dc?s=128&d=identicon&r=PG&f=1", "display_name": "Hal9000", "link": "https://stackoverflow.com/users/7586711/hal9000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54678320, "answer_count": 1, "score": 0, "last_activity_date": 1550087437, "creation_date": 1550083962, "question_id": 54677424, "link": "https://stackoverflow.com/questions/54677424/how-to-create-vector-of-variate-generator", "title": "How to create vector of variate_generator?", "body": "<p>I'm trying to create a vector of boost random number generators. </p>\n\n<p>I've tried creating function pointers to the variate_generators without much luck either.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/random.hpp&gt;\n\nusing namespace std;\n\nint main(int argc, const char *argv[])\n{\n    const double mean = 0.0;\n    const double sigma = 1.0;\n\n    // Setup aliases\n    typedef boost::normal_distribution&lt;&gt; NormalDistribution;\n    typedef boost::mt19937 RandomNumberGenerator;\n    typedef boost::variate_generator&lt;RandomNumberGenerator&amp;, NormalDistribution&gt; NormalGenerator;\n\n    vector&lt;NormalGenerator&gt; gen_vec;\n\n    RandomNumberGenerator rng;\n    rng.seed(12345);\n\n    NormalDistribution noise_distribution(mean, sigma);\n\n    NormalGenerator rng_eng(rng, noise_distribution); // create RNG\n\n    gen_vec.push_back(rng_eng);\n\n    return 0;\n}\n</code></pre>\n\n<p>I was hoping to use gen_vec to get a function in order to generate a random number for a given element in the vector. But when I attempt to compile it throws this error.</p>\n\n<pre><code>/usr/include/boost/random/detail/pass_through_engine.hpp:27: error: non-static reference member \\u2018main(int, const char**)::RandomNumberGenerator&amp; boost::random::detail::pass_through_engine&lt;main(int, const char**)::RandomNumberGenerator&amp;&gt;::_rng\\u2019, can't use default assignment operator\n</code></pre>\n\n<p>I'm guessing that's because I'm not packing the variate_generators correctly.</p>\n\n<p>Is what I'm trying to do correct much less possible?</p>\n"}, {"tags": ["c++", "gcc", "clang", "clang++", "meson-build"], "comments": [{"owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 3, "creation_date": 1550084113, "post_id": 54677391, "comment_id": 96144075, "body": "Did you set up the <code>env</code> variables? i.e. <code>CC=clang</code> and <code>CXX=clang++</code>? Then run maybe doing <code>meson build-clang</code>. That should probably work."}, {"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "reply_to_user": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 0, "creation_date": 1550094367, "post_id": 54677391, "comment_id": 96148763, "body": "@Rietty - Ops, I specified the C++ compiler with the CC environment variable, instead of CXX. Now it works. If you copy your comment as an answer I will accept it."}, {"owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 0, "creation_date": 1550098930, "post_id": 54677391, "comment_id": 96150453, "body": "Done, glad it worked"}], "answers": [{"comments": [{"owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "edited": false, "score": 0, "creation_date": 1550099905, "post_id": 54680756, "comment_id": 96150737, "body": "I erroneously thought <code>cc</code> was for C, and <code>CC</code> for C++."}], "tags": [], "owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "is_accepted": true, "score": 3, "last_activity_date": 1550099447, "last_edit_date": 1550099447, "creation_date": 1550098878, "answer_id": 54680756, "question_id": 54677391, "link": "https://stackoverflow.com/questions/54677391/meson-picks-the-wrong-compiler-gcc-instead-on-clang/54680756#54680756", "title": "Meson picks the wrong compiler (GCC instead on clang)", "body": "<p>Set up the relevant C/C++ environmental variables. i.e. <code>CC=clang</code> and <code>CXX=clang++</code>. Then run the build using <code>meson build-clang</code>.</p>\n\n<p>That will solve the issue.</p>\n"}], "owner": {"reputation": 10444, "user_id": 235472, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/2RJ8I.png?s=128&g=1", "display_name": "Pietro", "link": "https://stackoverflow.com/users/235472/pietro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2797, "favorite_count": 1, "accepted_answer_id": 54680756, "answer_count": 1, "score": 2, "last_activity_date": 1550099447, "creation_date": 1550083826, "question_id": 54677391, "link": "https://stackoverflow.com/questions/54677391/meson-picks-the-wrong-compiler-gcc-instead-on-clang", "title": "Meson picks the wrong compiler (GCC instead on clang)", "body": "<p>I am trying to configure my project to build with LLVM/clang++, however GCC is always picked:</p>\n\n<pre><code>$ /opt/llvm/clang+llvm-7.0.1-x86_64-linux-gnu-ubuntu-18.04/bin/clang++ --version\nclang version 7.0.1 (tags/RELEASE_701/final)\nTarget: x86_64-unknown-linux-gnu\nThread model: posix\nInstalledDir: /opt/llvm/clang+llvm-7.0.1-x86_64-linux-gnu-ubuntu-18.04/bin\n$ \n$ CC=/opt/llvm/clang+llvm-7.0.1-x86_64-linux-gnu-ubuntu-18.04/bin/clang++ meson ~/build\nThe Meson build system\nVersion: 0.49.1\nSource dir: ~/source\nBuild dir: ~/build\nBuild type: native build\nProject name: test\nProject version: 0.1.0\nNative C++ compiler: ccache c++ (gcc 6.3.0 \"c++ (Debian 6.3.0-18+deb9u1) 6.3.0 20170516\")\nBuild machine cpu family: x86_64\nBuild machine cpu: x86_64\nMessage: Compiler: GCC\nDependency threads found: YES \nBuild targets in project: 2\nFound ninja-1.8.2 at /opt/ninja\n</code></pre>\n\n<p>The operating systems is Debian Linux 9.</p>\n\n<p>This is the <code>meson.build</code> file:</p>\n\n<pre><code>## meson.build\n\nproject('MyPrj', 'cpp',\n        version: '0.1.0',\n        meson_version: '&gt;= 0.44',\n        license: 'GPL',\n        default_options: [\n            'cpp_std=c++17',\n            'warning_level=3',\n            'buildtype=release'\n        ]\n       )\n\n#\n# Compiler configuration\n# To set a default compiler, from the OS shell:\n#   $ CC=mycc meson &lt;options&gt;\n\ncompiler = meson.get_compiler('cpp')\n\nwarning_level = get_option('warning_level').to_int()\n\nif compiler.get_id() == 'gcc'\n    message('Compiler: GCC')\n    libs_compiler = ['-lstdc++fs']\n    libs_linker   = ['-lstdc++fs']\nelif compiler.get_id() == 'clang'\n    message('Compiler: LLVM/clang')\n    libs_compiler = ['-stdlib=libc++']\n    libs_linker   = ['-stdlib=libc++', '-lstdc++fs']\nendif\n\nadd_global_arguments('-Wall', '-Wextra', '-Wmissing-declarations',\n                     '-Wno-unused', # keep this commented out\n                     libs_compiler,\n                     language: 'cpp')\n\nadd_global_link_arguments(libs_linker, language: 'cpp')\n\n# '.' will refer to current build directory\ninclude_dirs = include_directories('.')\n\nsrc = [ 'test.cc' ]\n\n# External dependencies\n\nthread_dep = dependency('threads')\n\n# Build\n\ntest_a = static_library('test', src,\n                           include_directories : include_dirs,\n                          )\n\ntest_exe = executable('testexe', src,\n                           include_directories : include_dirs\n                          )\n</code></pre>\n\n<p>How can I convince Meson to use clang?</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 21162, "user_id": 7733418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b08876b87c096cd006f66820ffc67f27?s=128&d=identicon&r=PG", "display_name": "Yunnosch", "link": "https://stackoverflow.com/users/7733418/yunnosch"}, "edited": false, "score": 0, "creation_date": 1550084685, "post_id": 54677318, "comment_id": 96144330, "body": "If you use supported image formats I will be happy to make them visible for you."}], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1550085084, "last_edit_date": 1550085084, "creation_date": 1550084689, "answer_id": 54677610, "question_id": 54677318, "link": "https://stackoverflow.com/questions/54677318/draw-a-cube-and-a-pyramid/54677610#54677610", "title": "Draw a cube and a pyramid", "body": "<p>If a non-zero named array buffer object is bound, then the last parameter of <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glVertexAttribPointer.xhtml\" rel=\"nofollow noreferrer\"><code>glVertexAttribPointer</code></a> is treated as a byte offset into the buffer object's data store.<br>\nThe definition of the generic vertex attribute data and the name of the referenced buffer is sored in the <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification#Vertex_Array_Object\" rel=\"nofollow noreferrer\">Vertex Array Object</a>s state vector.</p>\n\n<p>Before the array of generic vertex attribute data is defined, by the call of <code>glVertexAttribPointer</code>, the vertex array object, where the vertex specification should be stored to, has to be bound. The proper buffer object has to be bound, too:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// vertex array buffer for cube\nGLuint cubeVBO;\nglGenBuffers(1, &amp;cubeVBO);\nglBindBuffer(GL_ARRAY_BUFFER, cubeVBO);\nglBufferData(GL_ARRAY_BUFFER, sizeof(cube), cube, GL_STATIC_DRAW);\n\n// vertex array buffer for pyramid\nGLuint pyrVBO;\nglGenBuffers(1, &amp;pyrVBO);\nglBindBuffer(GL_ARRAY_BUFFER, pyrVBO);\nglBufferData(GL_ARRAY_BUFFER, sizeof(pyramid), pyramid, GL_STATIC_DRAW);\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// vertex array object for cube\nGLuint cubeVAO;\nglGenVertexArrays(1, &amp;cubeVAO);\nglBindVertexArray(cubeVAO);\n\nglEnableVertexAttribArray(0);\nglEnableVertexAttribArray(1);\n\nglBindBuffer(GL_ARRAY_BUFFER, cubeVBO);\nglVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,sizeof(myVertex),(void *)0);\nglVertexAttribPointer(1,3,GL_FLOAT,GL_FALSE,sizeof(myVertex),(void *)(3*sizeof(GLfloat)));\n\n// vertex array object for pyramid\nGLuint pyrVAO;\nglGenVertexArrays(1, &amp;pyrVAO);\nglBindVertexArray(pyrVAO);\n\nglEnableVertexAttribArray(0);\nglEnableVertexAttribArray(1);\n\nglBindBuffer(GL_ARRAY_BUFFER, pyrVBO);\nglVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,sizeof(myVertex),(void *)0);\nglVertexAttribPointer(1,3,GL_FLOAT,GL_FALSE,sizeof(myVertex),(void *)(3*sizeof(GLfloat)));\n</code></pre>\n"}], "owner": {"reputation": 48, "user_id": 11058045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IDx4c.png?s=128&g=1", "display_name": "Hexash", "link": "https://stackoverflow.com/users/11058045/hexash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 54677610, "answer_count": 1, "score": 1, "last_activity_date": 1550085084, "creation_date": 1550083552, "question_id": 54677318, "link": "https://stackoverflow.com/questions/54677318/draw-a-cube-and-a-pyramid", "title": "Draw a cube and a pyramid", "body": "<p>I'm learning OpenGL and I'm using Qt 5.12. I currently need to draw a cube and a pyramid with triangles. </p>\n\n<p>I think the vertex class and the triangle structure are fine but unfortunately not all the triangles are shown correctly. I'm still new to OpenGL so I'm probably missing something in the VBO/VAO binding section but I can't figure what.</p>\n\n<p>I've created a myVertex class with 6 floats: 3 for position and 3 for color:</p>\n\n<pre><code>class myVertex{\npublic:\n    GLfloat _x;\n    GLfloat _y;\n    GLfloat _z;\n    GLfloat _r;\n    GLfloat _g;\n    GLfloat _b;\n\n    myVertex(GLfloat x, GLfloat y, GLfloat z, GLfloat r, GLfloat g, GLfloat b){\n        _x=x;\n        _y=y;\n        _z=z;\n        _r=r;\n        _g=g;\n        _b=b;\n\n    }\n};\n</code></pre>\n\n<p>Then I defined a structure for the triangles:</p>\n\n<pre><code>struct triangle {\n    myVertex a;\n    myVertex b;\n    myVertex c;\n};\n</code></pre>\n\n<p>In MainView::initializeGL() I define color and position in 3D of every vertex and then I build the triangles:</p>\n\n<pre><code>// Cube\n    myVertex CUBE_LEFT_FRONT_DOWN  = myVertex(-1.0f,-1.0f,-1.0f,1.0f,0.0f,0.0f);\n    myVertex CUBE_RIGHT_FRONT_DOWN = myVertex( 1.0f,-1.0f,-1.0f,0.0f,1.0f,0.0f);\n    myVertex CUBE_LEFT_BACK_DOWN   = myVertex(-1.0f, 1.0f,-1.0f,0.0f,0.0f,1.0f);\n    myVertex CUBE_RIGHT_BACK_DOWN  = myVertex( 1.0f, 1.0f,-1.0f,1.0f,1.0f,0.0f);\n    myVertex CUBE_LEFT_FRONT_UP    = myVertex(-1.0f,-1.0f, 1.0f,1.0f,0.0f,1.0f);\n    myVertex CUBE_RIGHT_FRONT_UP   = myVertex( 1.0f,-1.0f, 1.0f,0.0f,1.0f,1.0f);\n    myVertex CUBE_LEFT_BACK_UP     = myVertex(-1.0f, 1.0f, 1.0f,0.2f,0.5f,0.7f);\n    myVertex CUBE_RIGHT_BACK_UP    = myVertex( 1.0f, 1.0f, 1.0f,0.7f,0.2f,0.5f);\n\n\n    // Every face is made of 2 triangles\n    triangle left1  = {CUBE_LEFT_BACK_DOWN,  CUBE_LEFT_FRONT_DOWN,  CUBE_LEFT_BACK_UP};\n    triangle left2  = {CUBE_LEFT_FRONT_UP,   CUBE_LEFT_FRONT_DOWN,  CUBE_LEFT_BACK_UP};\n    triangle right1 = {CUBE_RIGHT_BACK_DOWN, CUBE_RIGHT_BACK_UP,    CUBE_RIGHT_FRONT_DOWN};\n    triangle right2 = {CUBE_RIGHT_FRONT_UP,  CUBE_RIGHT_BACK_UP,    CUBE_RIGHT_FRONT_DOWN};\n    triangle back1  = {CUBE_LEFT_BACK_DOWN,  CUBE_RIGHT_BACK_DOWN,  CUBE_LEFT_BACK_UP};\n    triangle back2  = {CUBE_RIGHT_BACK_UP,   CUBE_RIGHT_BACK_DOWN,  CUBE_LEFT_BACK_UP};\n    triangle front1 = {CUBE_LEFT_FRONT_DOWN, CUBE_RIGHT_FRONT_DOWN, CUBE_LEFT_FRONT_UP};\n    triangle front2 = {CUBE_RIGHT_FRONT_UP,  CUBE_RIGHT_FRONT_DOWN, CUBE_LEFT_FRONT_UP};\n    triangle down1  = {CUBE_LEFT_FRONT_DOWN, CUBE_RIGHT_FRONT_DOWN, CUBE_LEFT_BACK_DOWN};\n    triangle down2  = {CUBE_RIGHT_BACK_DOWN, CUBE_RIGHT_FRONT_DOWN, CUBE_LEFT_BACK_DOWN};\n    triangle up1    = {CUBE_RIGHT_BACK_UP,   CUBE_RIGHT_FRONT_UP,   CUBE_LEFT_BACK_UP};\n    triangle up2    = {CUBE_LEFT_FRONT_UP,   CUBE_RIGHT_FRONT_UP,   CUBE_LEFT_BACK_UP};\n\n    triangle cube[] = {left1, left2, right1, right2, back1, back2, front1, front2, down1, down2, up1, up2};\n\n\n// Pyramid\n    myVertex PYR_LEFT_FRONT  = myVertex(-1.0f,-1.0f,-1.0f,0.0f,1.0f,0.0f);\n    myVertex PYR_RIGHT_FRONT = myVertex( 1.0f,-1.0f,-1.0f,0.0f,0.0f,1.0f);\n    myVertex PYR_LEFT_BACK   = myVertex(-1.0f, 1.0f,-1.0f,1.0f,0.0f,0.0f);\n    myVertex PYR_RIGHT_BACK  = myVertex( 1.0f, 1.0f,-1.0f,0.5f,0.8f,0.0f);\n    myVertex PYR_TOP         = myVertex( 0.0f, 0.0f, 1.0f,0.3f,0.1f,0.4f);\n\n\n// Base need 2 triangles\n    triangle leftside  = {PYR_LEFT_FRONT,  PYR_LEFT_BACK,   PYR_TOP};\n    triangle rightside = {PYR_RIGHT_FRONT, PYR_RIGHT_BACK,  PYR_TOP};\n    triangle frontside = {PYR_LEFT_FRONT,  PYR_RIGHT_FRONT, PYR_TOP};\n    triangle backside  = {PYR_LEFT_BACK,   PYR_RIGHT_BACK,  PYR_TOP};\n    triangle base1     = {PYR_LEFT_FRONT,  PYR_LEFT_BACK,   PYR_RIGHT_FRONT};\n    triangle base2     = {PYR_RIGHT_BACK,  PYR_LEFT_BACK,   PYR_RIGHT_FRONT};\n\n    triangle pyramid[] = {leftside, rightside, frontside, backside, base1, base2};\n</code></pre>\n\n<p>Now I define VBOs and VAOs, enable attributes, etc. :</p>\n\n<pre><code>GLuint cubeVBO;\nGLuint cubeVAO;\nGLuint pyrVBO;\nGLuint pyrVAO;\n\nglGenBuffers(1, &amp;cubeVBO);\nglGenVertexArrays(1, &amp;cubeVAO);\nglBindVertexArray(cubeVAO);\nglBindBuffer(GL_ARRAY_BUFFER, cubeVBO);\nglBufferData(GL_ARRAY_BUFFER, sizeof(cube), cube, GL_STATIC_DRAW);\n\nglGenBuffers(1, &amp;pyrVBO);\nglGenVertexArrays(1, &amp;pyrVAO);\nglBindVertexArray(pyrVAO);\nglBindBuffer(GL_ARRAY_BUFFER, pyrVBO);\nglBufferData(GL_ARRAY_BUFFER, sizeof(pyramid), pyramid, GL_STATIC_DRAW);\n\nglEnableVertexAttribArray(0);\nglEnableVertexAttribArray(1);\nglVertexAttribPointer(0,3,GL_FLOAT,GL_FALSE,sizeof(myVertex),(void *)0);\nglVertexAttribPointer(1,3,GL_FLOAT,GL_FALSE,sizeof(myVertex),(void *)(3*sizeof(GLfloat)));\n</code></pre>\n\n<p>And finally I draw to the screen:</p>\n\n<pre><code>MainView::paintGL() {\n\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n\n    shaderProgram.bind();\n\n    glBindBuffer(GL_ARRAY_BUFFER, cubeVBO);\n    glDrawArrays(GL_TRIANGLES,0,36);\n    glBindBuffer(GL_ARRAY_BUFFER, pyrVBO);\n    glDrawArrays(GL_TRIANGLES,0,18);\n\n\n    shaderProgram.release();\n}\n</code></pre>\n\n<p>I expected to see a figure like this:\n<a href=\"https://imgur.com/HI19n5k\" rel=\"nofollow noreferrer\">Expected</a></p>\n\n<p>But right now I see this:\n<a href=\"https://imgur.com/PcO9TPq\" rel=\"nofollow noreferrer\">My result</a></p>\n\n<p>I reviewed the code many times but I can't understand what's going wrong.</p>\n"}, {"tags": ["c++", "templates", "friend"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550082230, "post_id": 54676958, "comment_id": 96143186, "body": "What do you expect <code>template &lt;class U&gt; friend class Vecteur;</code> to do?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550082592, "post_id": 54676958, "comment_id": 96143375, "body": "@Fran&#231;oisAndrieux, sure, but <code>operator*</code> is not - and it is a free-standing function in this example."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1550082609, "post_id": 54676958, "comment_id": 96143382, "body": "@Fran&#231;oisAndrieux I know what it means.  I&#39;m asking the OP what their intention was."}, {"owner": {"reputation": 11, "user_id": 8946708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5mGDG8EUsZY/AAAAAAAAAAI/AAAAAAAAATw/Xtj5pN3xXLA/photo.jpg?sz=128", "display_name": "Steeven Tronet", "link": "https://stackoverflow.com/users/8946708/steeven-tronet"}, "edited": false, "score": 0, "creation_date": 1550082793, "post_id": 54676958, "comment_id": 96143464, "body": "Originaly, my code is the second. I see the first in other posts. I would like to obtain an operator* who can acces to private fields of Vecteur&lt;int&gt; and Vecteur&lt;float&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8946708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5mGDG8EUsZY/AAAAAAAAAAI/AAAAAAAAATw/Xtj5pN3xXLA/photo.jpg?sz=128", "display_name": "Steeven Tronet", "link": "https://stackoverflow.com/users/8946708/steeven-tronet"}, "edited": false, "score": 0, "creation_date": 1550084182, "post_id": 54677061, "comment_id": 96144101, "body": "Thank you very much it works but I&#39;m not sure to understand the std::common_type_t&lt;T1, T2&gt; I have tried with T1 in place of this and I have the same result"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 11, "user_id": 8946708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5mGDG8EUsZY/AAAAAAAAAAI/AAAAAAAAATw/Xtj5pN3xXLA/photo.jpg?sz=128", "display_name": "Steeven Tronet", "link": "https://stackoverflow.com/users/8946708/steeven-tronet"}, "edited": false, "score": 0, "creation_date": 1550084833, "post_id": 54677061, "comment_id": 96144400, "body": "Imagine you are multiplying vector of ints by vector of floats. With just T1, you will end up with integer result (while float would be a desired outcome)"}, {"owner": {"reputation": 11, "user_id": 8946708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5mGDG8EUsZY/AAAAAAAAAAI/AAAAAAAAATw/Xtj5pN3xXLA/photo.jpg?sz=128", "display_name": "Steeven Tronet", "link": "https://stackoverflow.com/users/8946708/steeven-tronet"}, "edited": false, "score": 0, "creation_date": 1550085358, "post_id": 54677061, "comment_id": 96144613, "body": "It not works for me. With your std::common_type_t&lt;T1, T2&gt; I also obtain a vector of ints if I multiply a vector of ints with a vector of floats"}, {"owner": {"reputation": 11, "user_id": 8946708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5mGDG8EUsZY/AAAAAAAAAAI/AAAAAAAAATw/Xtj5pN3xXLA/photo.jpg?sz=128", "display_name": "Steeven Tronet", "link": "https://stackoverflow.com/users/8946708/steeven-tronet"}, "edited": false, "score": 0, "creation_date": 1550086484, "post_id": 54677061, "comment_id": 96145126, "body": "My bad it&#39;s work, I just missed to replace T1 with std::common_type_t&lt;T1, T2&gt; in the code of the function"}, {"owner": {"reputation": 11, "user_id": 8946708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5mGDG8EUsZY/AAAAAAAAAAI/AAAAAAAAATw/Xtj5pN3xXLA/photo.jpg?sz=128", "display_name": "Steeven Tronet", "link": "https://stackoverflow.com/users/8946708/steeven-tronet"}, "edited": false, "score": 0, "creation_date": 1550086895, "post_id": 54677061, "comment_id": 96145345, "body": "It&#39;s ok look my previous message."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 11, "user_id": 8946708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5mGDG8EUsZY/AAAAAAAAAAI/AAAAAAAAATw/Xtj5pN3xXLA/photo.jpg?sz=128", "display_name": "Steeven Tronet", "link": "https://stackoverflow.com/users/8946708/steeven-tronet"}, "edited": false, "score": 0, "creation_date": 1550087217, "post_id": 54677061, "comment_id": 96145484, "body": "@SteevenTronet, Ok I see. Removing my comment."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 1, "last_activity_date": 1550082496, "creation_date": 1550082496, "answer_id": 54677061, "question_id": 54676958, "link": "https://stackoverflow.com/questions/54676958/c-template-class-friend-with-all-type/54677061#54677061", "title": "C++ template class friend with all type", "body": "<p>Your first version declares one specialization of <code>Vecteur</code> a friend of another. This doesn't help your operator <code>*</code>, since this is still not a friend and can't access private members.</p>\n\n<p>Add proper friend declaration for template overload in your <code>Vecteur</code> (and you do not need to friend the specialization):</p>\n\n<pre><code>template&lt;class T&gt;\nclass Vectuer {\n//...\ntemplate&lt;class T1, class T2&gt; std::common_type_t&lt;T1, T2&gt;\nfriend operator*(const Vecteur&lt;T1&gt;&amp; , const Vectuer&lt;T2&gt;&amp; );\n//...\n};\n\n// And than a definition after the declaration\n</code></pre>\n\n<p>Alternatively, you can friend the specialization, and add <code>operator*</code> as a member, but I do not like this, since such overloaded operators are more cleanly implemented as freestanding functions.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8946708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5mGDG8EUsZY/AAAAAAAAAAI/AAAAAAAAATw/Xtj5pN3xXLA/photo.jpg?sz=128", "display_name": "Steeven Tronet", "link": "https://stackoverflow.com/users/8946708/steeven-tronet"}, "edited": false, "score": 0, "creation_date": 1550084376, "post_id": 54677271, "comment_id": 96144179, "body": "Thank you, I know this but I just need to work with friend to improve my knowledge"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550084782, "post_id": 54677271, "comment_id": 96144371, "body": "I disagree. There is no point in giving accessors to otherwise internal members. You are now exposing inner details to outside world, and might just as well make the member public. Friendship for standalone functions, which are logically a part of interface (and contract) is a much better approach."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1550085092, "post_id": 54677271, "comment_id": 96144500, "body": "@SergeyA, we, obviously, have different approaches to software development."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1550095029, "post_id": 54677271, "comment_id": 96149027, "body": "+1 completely agree: a vector (in the physical/mathemathical sense) should give public constant access to its components."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1550083410, "creation_date": 1550083410, "answer_id": 54677271, "question_id": 54676958, "link": "https://stackoverflow.com/questions/54676958/c-template-class-friend-with-all-type/54677271#54677271", "title": "C++ template class friend with all type", "body": "<p>When you have the urge to declare a function or a class a friend of a class, take moment to look at your design and ask yourself whether that is absolutely necessary.</p>\n\n<p>In the case of the posted code, instead of trying to solve the problem associated with granting <code>friend</code>-ship to the <code>operator*</code> function, provide accessor functions to the data of the class and get rid of the need for granting <code>friend</code>-ship altogether.</p>\n\n<pre><code>template &lt;class T&gt;\nclass Vecteur\n{\n   public:\n\n      int getDimensions() const { return m_dimensions; };\n      T&amp; operator[](std::size_t i) { return m_values[i]; };\n      T const&amp; operator[](std::size_t i) const { return m_values[i]; };\n\n   private:\n    int m_dimensions;\n    T *m_values;\n};\n\n// Does not require to be a friend of the class.\ntemplate&lt;class T1, class T2&gt;\ntypename std::common_type&lt;T1, T2&gt;::type operator*(const Vecteur&lt;T1&gt; &amp;v1, const Vecteur&lt;T2&gt; &amp;v2)\n{\n    assert(v1.getDimensions() == v2.getDimensions());\n\n    typename std::common_type&lt;T1, T2&gt;::type res{};\n    for (int i = 0; i &lt; v1.getDimensions(); i++)\n    {\n        res += v1[i] * v2[i];\n    }\n    return res;\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8946708, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5mGDG8EUsZY/AAAAAAAAAAI/AAAAAAAAATw/Xtj5pN3xXLA/photo.jpg?sz=128", "display_name": "Steeven Tronet", "link": "https://stackoverflow.com/users/8946708/steeven-tronet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 54677061, "answer_count": 2, "score": -1, "last_activity_date": 1550083410, "creation_date": 1550082083, "last_edit_date": 1550082883, "question_id": 54676958, "link": "https://stackoverflow.com/questions/54676958/c-template-class-friend-with-all-type", "title": "C++ template class friend with all type", "body": "<p>I have a Vector class and I overload the operator*</p>\n\n<p>I would like to be able to multiply a Vector of float with a Vector of int.</p>\n\n<p>I have the following code but when I compile him, I have an error because I don't have access to private fields.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class T&gt;\nclass Vecteur\n{\n    template &lt;class U&gt; friend class Vecteur;\n\nprivate:\n    int m_dimensions;\n    T *m_values;\n}\n\ntemplate&lt;class T1, class T2&gt;\nT1 operator*(const Vecteur&lt;T1&gt; &amp;v1, const Vecteur&lt;T2&gt; &amp;v2)\n{\n    assert(v1.m_dimensions == v2.m_dimensions);\n    T res = T();\n    for (int i = 0; i &lt; v1.m_dimensions; i++)\n    {\n        res += v1.m_values[i] * v2.m_values[i];\n    }\n    return res;\n}\n</code></pre>\n\n<p>I also tried this but I can access to private fields of v1 but not to the private fields of v2</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;class T&gt;\nclass Vecteur\n{\nprivate:\n    int m_dimensions;\n    T *m_values;\n\n    template&lt;class T2&gt;\n    friend T operator*(const Vecteur&lt;T&gt; &amp;v1, const Vecteur&lt;T2&gt; &amp;v2)\n    {\n        assert(v1.m_dimensions == v2.m_dimensions);\n        T res = T();\n        for (int i = 0; i &lt; v1.m_dimensions; i++)\n        {\n            res += v1.m_values[i] * v2.m_values[i];\n        }\n        return res;\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "template-specialization"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1550082137, "post_id": 54676756, "comment_id": 96143139, "body": "Why not use ordinary template specialization? Something like the following might work: <code>template&lt;typename T&gt; T getVal(){ &#47;* default impl *&#47; } ... template&lt;&gt; int getVal&lt;int&gt;(){ return bar; } ... template&lt;&gt; float getVal&lt;float&gt;(){ return foo; }</code>"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 1, "creation_date": 1550082423, "post_id": 54676756, "comment_id": 96143292, "body": "One of the problems you will run in to here is that <code>getVal&lt;int&gt;</code> will match both the second and third declaration of <code>getVal</code> and will be ambigous. What exactly is your end goal here? If the question spawns from nothing but curiosity this is quite unusual way of using templates and better examples could be helpful for better understanding."}, {"owner": {"reputation": 63, "user_id": 11058021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a53681382528eee74f1bb01b1c1d9389?s=128&d=identicon&r=PG&f=1", "display_name": "Mokou", "link": "https://stackoverflow.com/users/11058021/mokou"}, "edited": false, "score": 0, "creation_date": 1550082590, "post_id": 54676756, "comment_id": 96143373, "body": "I don&#39;t think that question quite answers the same question, as <code>GC::Allocate&lt;A&gt;</code> was resolving successfully in that instance, whereas <code>Test::request&lt;int&gt;()</code> isn&#39;t resolving here. The solution of passing an additional param to the function isn&#39;t helpful in this case, as the goal is to get a value from Test in another class&#39;s initilizer list. Although that&#39;s out of the scope of the example"}, {"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 0, "creation_date": 1550082620, "post_id": 54676756, "comment_id": 96143388, "body": "To just fix the ambigous problem you need to change the last version to only work for types that are not <code>int</code> or <code>float</code>. <code>typename std::enable_if&lt;!std::is_same&lt;T, int&gt;::value &amp;&amp; !std::is_same&lt;T, float&gt;::value, bool&gt;::type getVal</code> for example."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1550083190, "post_id": 54676756, "comment_id": 96143639, "body": "&quot;Although that&#39;s out of the scope of the example&quot; not it isnt really. What you want to achieve by this code is completely relevant, only when you tell us what you want to achieve we can tell you how to achieve it, just fixing compiler errors never leads to clean code"}, {"owner": {"reputation": 63, "user_id": 11058021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a53681382528eee74f1bb01b1c1d9389?s=128&d=identicon&r=PG&f=1", "display_name": "Mokou", "link": "https://stackoverflow.com/users/11058021/mokou"}, "edited": false, "score": 0, "creation_date": 1550087366, "post_id": 54676756, "comment_id": 96145559, "body": "I think I did oversimplify, in reality I&#39;m trying to use <code>getVal()</code> to get the back of a specific array in the class, like this: <code>std::vector&lt;T&gt; vec = getVal&lt;T&gt;();</code>"}, {"owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "edited": false, "score": 0, "creation_date": 1550088681, "post_id": 54676756, "comment_id": 96146203, "body": "@Mokou, &quot;get the back of a specific array&quot; (one element?) but return a vector?"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 0, "last_activity_date": 1550084241, "creation_date": 1550084241, "answer_id": 54677493, "question_id": 54676756, "link": "https://stackoverflow.com/questions/54676756/c-ambiguous-template-overloads/54677493#54677493", "title": "C++ ambiguous template overloads", "body": "<p>Your problem is that <code>template&lt;typename T&gt; T getVal()</code> make call ambiguous when the SFINAEd one succeed.</p>\n\n<p>One solution is to restrict that one with complement condition...</p>\n\n<p>But tag dispatching is an easy alternative way to fix your issue:</p>\n\n<pre><code>template &lt;typename&gt; struct Tag{};\n\nclass Test\n{\npublic:\n    template &lt;typename T&gt;\n    T request() const\n    {\n        return getVal(Tag&lt;T&gt;{});\n    }\n\nprivate:\n    float foo = 2.f;\n    int bar = 1;\n\n    float getVal(Tag&lt;float&gt;) const { return foo; }\n    int getVal(Tag&lt;int&gt;) const { return bar; }\n\n    template&lt;typename T&gt; void getVal(Tag&lt;T&gt;) = delete;\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550084662, "post_id": 54677517, "comment_id": 96144322, "body": "Care that specialization should always be visible before usage (ODR)."}, {"owner": {"reputation": 63, "user_id": 11058021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a53681382528eee74f1bb01b1c1d9389?s=128&d=identicon&r=PG&f=1", "display_name": "Mokou", "link": "https://stackoverflow.com/users/11058021/mokou"}, "edited": false, "score": 0, "creation_date": 1550090263, "post_id": 54677517, "comment_id": 96146932, "body": "Using the C++17 solution ended up working flawlessly"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1550140614, "post_id": 54677517, "comment_id": 96164644, "body": "Probably better to replace <code>throw</code> by <code>static_assert(always_false&lt;T&gt;, &quot;!&quot;)</code> to have compile time error instead of runtime one."}], "tags": [], "owner": {"reputation": 30558, "user_id": 1013719, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/U8X0A.jpg?s=128&g=1", "display_name": "Ryan Haining", "link": "https://stackoverflow.com/users/1013719/ryan-haining"}, "is_accepted": true, "score": 0, "last_activity_date": 1550088556, "last_edit_date": 1550088556, "creation_date": 1550084327, "answer_id": 54677517, "question_id": 54676756, "link": "https://stackoverflow.com/questions/54676756/c-ambiguous-template-overloads/54677517#54677517", "title": "C++ ambiguous template overloads", "body": "<p>You can do this pretty easily by specializing <code>getVal()</code>, though you may have oversimplified the question</p>\n\n<pre><code>class Test {\npublic:\n    template &lt;typename T&gt;\n    T request() {\n        T ret = getVal&lt;T&gt;();\n        return ret;\n    }\n\nprivate:\n    float foo = 2.f;\n    int bar = 1;\n\n    template&lt;typename T&gt;\n    T getVal() {\n        std::cout &lt;&lt; \"T is type \" &lt;&lt; typeid(T).name() &lt;&lt; std::endl;\n        throw std::bad_typeid();\n    }\n};\n\n// add specializations\ntemplate&lt;&gt;\nfloat Test::getVal&lt;float&gt;() { return foo; }\n\ntemplate &lt;&gt;\nint Test::getVal&lt;int&gt;() { return bar; }\n\nint main() {\n    Test t;\n    int i = t.request&lt;int&gt;(); // don't need template keyword here\n    float f = t.request&lt;float&gt;();\n}\n</code></pre>\n\n<p>If you're able to use c++17, it is even simpler with <code>if constexpr</code> and a single <code>getVal</code></p>\n\n<pre><code>template&lt;typename T&gt;\nauto getVal() {\n  if constexpr (std::is_same_v&lt;int, T&gt;) {\n    return foo;\n  } else if constexpr (std::is_same_v&lt;float, T&gt;) {\n    return bar;\n  } else {\n    std::cout &lt;&lt; \"T is type \" &lt;&lt; typeid(T).name() &lt;&lt; std::endl;\n    throw std::bad_typeid();\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 11058021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a53681382528eee74f1bb01b1c1d9389?s=128&d=identicon&r=PG&f=1", "display_name": "Mokou", "link": "https://stackoverflow.com/users/11058021/mokou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 54677517, "answer_count": 2, "score": -1, "last_activity_date": 1550088556, "creation_date": 1550081297, "last_edit_date": 1550083914, "question_id": 54676756, "link": "https://stackoverflow.com/questions/54676756/c-ambiguous-template-overloads", "title": "C++ ambiguous template overloads", "body": "<p>I'm trying to use template specialization to return different types based on the value of the template variable.</p>\n\n<p>I've moved from trying to branch at runtime rather than compile time using <code>typeof()</code>, unspecialized templates and using <code>std::enable_if_t&lt;&gt;</code>. I think this may stem from a lack of understanding about how the template functions are resolving.</p>\n\n<pre><code>class Test\n{\npublic:\n    template &lt;typename T&gt;\n    T request()\n    {\n        T ret = getVal&lt;T&gt;();\n        return ret;\n    }\n\nprivate:\n    float foo = 2.f;\n    int bar = 1;\n\n    template &lt;typename T&gt;\n    typename std::enable_if&lt;std::is_same&lt;T, float&gt;::value, bool&gt;::type\n    getVal() { return foo; }\n\n    template &lt;typename T&gt;\n    typename std::enable_if&lt;std::is_same&lt;T, int&gt;::value, bool&gt;::type\n    getVal() { return bar; }\n\n    template&lt;typename T&gt;\n    T getVal()\n    {\n        std::cout &lt;&lt; \"T is type \" &lt;&lt; typeid(T).name() &lt;&lt; std::endl;\n        throw std::bad_typeid();\n    }\n};\n\nint main()\n{\n    Test t;\n    int i;\n    float f;\n    i = t.template request&lt;int&gt;();\n    f = t.template request&lt;float&gt;();\n}\n</code></pre>\n\n<p>I'm expecting this to resolve to three different functions, but I'm not sure if it is:</p>\n\n<pre><code>T Test::getVal()\n\nint Test::getVal()\n\nfloat Test::getVal()\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["c++", "struct", "header", "declaration"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 1, "creation_date": 1550081233, "post_id": 54676594, "comment_id": 96142694, "body": "I <i>think</i> this is what you&#39;re asking about. <a href=\"https://stackoverflow.com/questions/51139207/use-function-returning-incomplete-type-as-default-argument\">Use function returning incomplete type as default argument</a>"}], "answers": [{"comments": [{"owner": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 0, "creation_date": 1550081763, "post_id": 54676824, "comment_id": 96142949, "body": "Ohhh ofcourse just overloading thanks so much, I feel stupid now"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "edited": false, "score": 1, "creation_date": 1550082052, "post_id": 54676824, "comment_id": 96143094, "body": "@Ojav, No need to feel bad. It&#39;s part of the journey. You learn the tricks of the trade along the way."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1550081587, "creation_date": 1550081587, "answer_id": 54676824, "question_id": 54676594, "link": "https://stackoverflow.com/questions/54676594/how-to-define-and-declare-a-struct-when-the-constructor-is-used-for-a-default-ar/54676824#54676824", "title": "How to define and declare a struct when the constructor is used for a default argument?", "body": "<p>If you use</p>\n\n<pre><code>vector&lt;UINT_PTR&gt; scan(const ScanOptions&amp; scan_options = ScanOptions());\n</code></pre>\n\n<p>in the .h file, then the definition of <code>ScanOptions</code> must be visible at the point of declaration of the function. </p>\n\n<p>However, instead of using a default argument, you can overload the function.</p>\n\n<pre><code>vector&lt;UINT_PTR&gt; scan();\nvector&lt;UINT_PTR&gt; scan(const ScanOptions&amp; scan_options);\n</code></pre>\n\n<p>with the understanding that the first function will use a default constructed <code>ScanOptions</code> to do its job. With that change, you can forward declare <code>ScanOptions</code> in the .h file and define it only in the .cpp file.</p>\n\n<p>The following is perfectly valid and does not require the definition of <code>ScanOptions</code> to be in the .h file.</p>\n\n<pre><code>struct ScanOptions;\n\nvector&lt;UINT_PTR&gt; scan();\nvector&lt;UINT_PTR&gt; scan(const ScanOptions&amp; scan_options);\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 9370018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7ce6db1045fd1770be45ffe8c78ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Ojav", "link": "https://stackoverflow.com/users/9370018/ojav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54676824, "answer_count": 1, "score": -1, "last_activity_date": 1550084484, "creation_date": 1550080683, "last_edit_date": 1550084484, "question_id": 54676594, "link": "https://stackoverflow.com/questions/54676594/how-to-define-and-declare-a-struct-when-the-constructor-is-used-for-a-default-ar", "title": "How to define and declare a struct when the constructor is used for a default argument?", "body": "<p>I have a .h file inside I have a function that uses a Struct/Class Constructor for the default argument. </p>\n\n<p>It appears on the declaration end like answered here : <a href=\"https://stackoverflow.com/questions/4989483/where-to-put-default-parameter-value-in-c/4989591\">Where to put default parameter value in C++?</a></p>\n\n<p>Function declaration</p>\n\n<pre><code>vector&lt;UINT_PTR&gt; scan(const ScanOptions&amp; scan_options = ScanOptions());\n</code></pre>\n\n<p>Struct definition</p>\n\n<pre><code>struct ScanOptions {\n\nScanOptions()\n{\n    //Use some Windows.h functions here to find values\n    SYSTEM_INFO sysinfo;\n    GetSystemInfo(&amp;sysinfo);\n    start_address = sysinfo.lpMinimumApplicationAddress;\n    end_address = sysinfo.lpMaximumApplicationAddress;\n\n}\n\nUINT_PTR start_address;\nUINT_PTR end_address;\n};\n</code></pre>\n\n<p>It is answered here that: </p>\n\n<blockquote>\n  <p>Private structures for that file should go in the .c file, with a declaration in the .h file if they are used by any functions in the .h .</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/6316987/should-struct-definitions-go-in-h-or-c-file\">Should struct definitions go in .h or .c file?</a></p>\n\n<p>There doesnt seem to be a way to declare a struct only to forward declare it?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/2732978/c-how-to-declare-a-struct-in-a-header-file\">C++, how to declare a struct in a header file</a></p>\n\n<p>So do I just keep the declaration and definition of my struct inside my header or is there another recommended way?</p>\n\n<p>I mean I dont really care that its global since its working and I dont think its gonna lead to problems but I really wanna know.</p>\n"}, {"tags": ["c++", "visual-studio", "eigen", "natvis"], "comments": [{"owner": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1550409648, "post_id": 54676514, "comment_id": 96249765, "body": "Please explainh what exactly is not working. Did you turn on <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2017#BKMK_Diagnosing_Natvis_errors\" rel=\"nofollow noreferrer\">natvis debugging</a>?"}, {"owner": {"reputation": 433, "user_id": 8411980, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/43f65b4972600a0d9610a0ddcd587fe1?s=128&d=identicon&r=PG&f=1", "display_name": "AOK", "link": "https://stackoverflow.com/users/8411980/aok"}, "reply_to_user": {"reputation": 15221, "user_id": 1023911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wln26.jpg?s=128&g=1", "display_name": "Werner Henze", "link": "https://stackoverflow.com/users/1023911/werner-henze"}, "edited": false, "score": 0, "creation_date": 1550411676, "post_id": 54676514, "comment_id": 96250246, "body": "@WernerHenze, Thanks. I am knew to natvis debugging, but will check out the link and see what if I can figure out something. In short, when I say &quot;not working&quot; I mean that it just shows the base objects of <code>Eigen::Map</code> as opposed to [N, M] and so on, like it should show, mimicking <code>Eigen::MatrixXd</code>"}], "owner": {"reputation": 433, "user_id": 8411980, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/43f65b4972600a0d9610a0ddcd587fe1?s=128&d=identicon&r=PG&f=1", "display_name": "AOK", "link": "https://stackoverflow.com/users/8411980/aok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550081305, "creation_date": 1550080360, "last_edit_date": 1550081305, "question_id": 54676514, "link": "https://stackoverflow.com/questions/54676514/eigen-natvis-addition-for-eigenmap", "title": "Eigen.natvis addition for Eigen::Map", "body": "<p>\nI am trying to add to the Eigen.natvis, found <a href=\"https://bitbucket.org/eigen/eigen/src/tip/debug/msvc/eigen.natvis\" rel=\"nofollow noreferrer\">here</a>, so that <code>Eigen::Map</code> objects can also be read in the Visual Studio debugger, Eigen library found <a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Here is what I put together:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Type Name=\"Eigen::Map&amp;lt;Eigen::Matrix&amp;lt;*,-1,-1,*,*,*&amp;gt;,*,*&amp;gt;\"&gt;\n&lt;DisplayString Condition=\"m_data == 0\"&gt;empty&lt;/DisplayString&gt;\n&lt;DisplayString Condition=\"m_data != 0\"&gt;Map[{m_rows.m_value}, {m_cols.m_value}] (dynamic matrix)&lt;/DisplayString&gt;\n&lt;Expand&gt;\n  &lt;ArrayItems Condition=\"Flags%2\"&gt; &lt;!-- row major layout --&gt;\n    &lt;Rank&gt;2&lt;/Rank&gt;\n    &lt;Size&gt;$i==0 ? m_rows.m_value : m_cols.m_value&lt;/Size&gt;\n    &lt;ValuePointer&gt;m_data&lt;/ValuePointer&gt;\n  &lt;/ArrayItems&gt;\n  &lt;ArrayItems Condition=\"!(Flags%2)\"&gt; &lt;!-- column major layout --&gt;\n    &lt;Direction&gt;Backward&lt;/Direction&gt;\n    &lt;Rank&gt;2&lt;/Rank&gt;\n    &lt;Size&gt;$i==0 ? m_rows.m_value : m_cols.m_value&lt;/Size&gt;\n    &lt;ValuePointer&gt;m_data&lt;/ValuePointer&gt;\n  &lt;/ArrayItems&gt;\n&lt;/Expand&gt;\n&lt;/Type&gt;\n</code></pre>\n\n<p>The main problem I am facing is with this line (discovered by trial and error):</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Size&gt;$i==0 ? m_rows.m_value : m_cols.m_value&lt;/Size&gt;\n</code></pre>\n\n<p>If, instead, I use any of the following then it works, but incorrectly of course (specific number constants are irrelevant):</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Size&gt;$i==0 ? 4 : 2&lt;/Size&gt;\n&lt;Size&gt;$i==0 ? 3 : m_cols.m_value&lt;/Size&gt;\n&lt;Size&gt;$i==0 ? m_rows.m_value : 5&lt;/Size&gt;\n</code></pre>\n\n<p>What am I missing? How do I get this to run correctly? Also, the natvis for <code>Eigen::Matrix</code> does something similar and there it does work.</p>\n"}, {"tags": ["c++", "arrays", "c++11", "valgrind", "stdarray"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 2, "creation_date": 1550080039, "post_id": 54676396, "comment_id": 96142102, "body": "What compiler and what flags? All this should be removed in an optimized build anyway."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1550080118, "post_id": 54676396, "comment_id": 96142148, "body": "could be a false positive, its hard to come up  with a usage of this snippet that wont leave you with a dangling pointer in the array (or using heap allocation)"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 10, "creation_date": 1550080131, "post_id": 54676396, "comment_id": 96142156, "body": "&quot;<i>According to this question std::array is allocated on the stack.</i>&quot; No, that&#39;s not what it says. What it says is that <code>std::array</code> is not allowed to perform heap allocation. If you allocate <code>array</code> <i>itself</i> on the heap, then the array will be on the heap."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550080138, "post_id": 54676396, "comment_id": 96142161, "body": "Your second example look like what you&#39;d see from the global object in the standard library (like <code>cin</code> and <code>cout</code>)."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550080351, "post_id": 54676396, "comment_id": 96142281, "body": "very related: <a href=\"https://stackoverflow.com/questions/31775034/valgrind-error-in-use-at-exit-72-704-bytes-c-initialization-list-weirdness-w\" title=\"valgrind error in use at exit 72 704 bytes c initialization list weirdness w\">stackoverflow.com/questions/31775034/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4252, "user_id": 2173891, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09b35dd19699f9660ad65111314b61ba?s=128&d=identicon&r=PG", "display_name": "magu_", "link": "https://stackoverflow.com/users/2173891/magu"}, "edited": false, "score": 0, "creation_date": 1550080435, "post_id": 54676463, "comment_id": 96142326, "body": "Wow, didn&#39;t think about bound checking introducing dynamic allocation. But you are correct."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1550081944, "post_id": 54676463, "comment_id": 96143049, "body": "Yet another reason to not automatically use <code>at()</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550086999, "post_id": 54676463, "comment_id": 96145389, "body": "The only dynamically allocated memory I could see <code>at()</code> using is when throwing a <code>std::out_of_range</code> exception. If you don&#39;t go out of bounds, no exception is thrown. So, what else could be using dynamic allocation in this case? Maybe some kind of static initialization even if the exception is not thrown?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550087328, "post_id": 54676463, "comment_id": 96145538, "body": "@remy <i>&quot;Maybe some kind of static initialization even if the exception is not thrown?&quot;</i> Sure, that is what I was thinking of."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": true, "score": 9, "last_activity_date": 1550080194, "creation_date": 1550080194, "answer_id": 54676463, "question_id": 54676396, "link": "https://stackoverflow.com/questions/54676396/heap-allocation-for-stdarray/54676463#54676463", "title": "Heap allocation for std::array", "body": "<p>The code</p>\n\n<pre><code>map.at(0) = &amp;value;\n</code></pre>\n\n<p>introduces bounds checking, which might in turn need to use stuff allocated dynamically (e.g. from the <code>&lt;iostream&gt;</code> library).</p>\n\n<p>You may try again with</p>\n\n<pre><code>map[0] = &amp;value;\n</code></pre>\n\n<p>which doesn't apply bound checks.</p>\n"}], "owner": {"reputation": 4252, "user_id": 2173891, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09b35dd19699f9660ad65111314b61ba?s=128&d=identicon&r=PG", "display_name": "magu_", "link": "https://stackoverflow.com/users/2173891/magu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "accepted_answer_id": 54676463, "answer_count": 1, "score": 5, "last_activity_date": 1550080214, "creation_date": 1550079928, "last_edit_date": 1550080214, "question_id": 54676396, "link": "https://stackoverflow.com/questions/54676396/heap-allocation-for-stdarray", "title": "Heap allocation for std::array", "body": "<p>According to <a href=\"https://stackoverflow.com/questions/39548254/does-stdarray-guarantee-allocation-on-the-stack-only\">this question</a> <code>std::array</code> is allocated on the stack. However when using it together with <code>Valgrind</code> it shows me a heap allocation, even for elements which are allocated on the stack. Is this a false positive or real?</p>\n\n<p>Here follow two <code>mwe</code> to illustrate the behavior.</p>\n\n<p><strong>No heap:</strong></p>\n\n<p>The following code:</p>\n\n<pre><code>#include &lt;array&gt;\n\nint main() {\n    std::array&lt;int*, 1&gt; map;\n    int value = 0;\n}\n</code></pre>\n\n<p>Produces the expected following <code>Valgrind</code> output:</p>\n\n<pre><code>==14425== HEAP SUMMARY:\n==14425==     in use at exit: 0 bytes in 0 blocks\n==14425==   total heap usage: 0 allocs, 0 frees, 0 bytes allocated\n</code></pre>\n\n<p><strong>With heap:</strong></p>\n\n<p>However if I try this code:</p>\n\n<pre><code>#include &lt;array&gt;\n\nint main() {\n    std::array&lt;int*, 1&gt; map;\n    int value = 0;\n\n    map.at(0) = &amp;value;\n}\n</code></pre>\n\n<p><code>Valgrind</code> gives me</p>\n\n<pre><code>==14539== HEAP SUMMARY:\n==14539==     in use at exit: 72,704 bytes in 1 blocks\n==14539==   total heap usage: 1 allocs, 0 frees, 72,704 bytes allocated\n==14539== \n==14539== 72,704 bytes in 1 blocks are still reachable in loss record 1 of 1\n==14539==    at 0x4C2DB8F: malloc (in /usr/lib/valgrind/vgpreload_memcheck-amd64-linux.so)\n==14539==    by 0x4EC3EFF: ??? (in /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.21)\n==14539==    by 0x40106B9: call_init.part.0 (dl-init.c:72)\n==14539==    by 0x40107CA: call_init (dl-init.c:30)\n==14539==    by 0x40107CA: _dl_init (dl-init.c:120)\n==14539==    by 0x4000C69: ??? (in /lib/x86_64-linux-gnu/ld-2.23.so)\n==14539== \n</code></pre>\n\n<p>Added compile settings:</p>\n\n<pre><code>g++ -std=c++11 -O0 valgrind.cpp -o valgrind_build -I ../fake -I ../src\nvalgrind --track-origins=yes --dsymutil=yes --leak-check=full --show-leak-kinds=all ./valgrind_build\n\nvalgrind --version\nvalgrind-3.11.0\n\ng++ --version\ng++ (Ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609\nCopyright (C) 2015 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n"}, {"tags": ["c++", "exception", "destructor"], "owner": {"reputation": 29435, "user_id": 458742, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ee0a7599f30c29076a3c9a2c022e473b?s=128&d=identicon&r=PG", "display_name": "spraff", "link": "https://stackoverflow.com/users/458742/spraff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "closed_date": 1550079452, "answer_count": 0, "score": 3, "last_activity_date": 1550079463, "creation_date": 1550079248, "question_id": 54676232, "link": "https://stackoverflow.com/questions/54676232/why-are-these-destructors-not-being-called-during-an-exception", "closed_reason": "Duplicate", "title": "Why are these destructors not being called during an exception?", "body": "<p>According to the output, <code>~Foo</code> is only called for object <code>c</code></p>\n\n<pre><code>#include &lt;stdexcept&gt;\n#include &lt;iostream&gt;\n\nstruct Foo\n{\n    const char * m_name;\n\n    Foo (const char * name) : m_name (name) {}\n\n    ~ Foo ()\n    {\n        std::cerr &lt;&lt; m_name &lt;&lt; bool(std::current_exception ()) &lt;&lt; std::endl;\n    }\n};\n\nint main ()\n{\n    Foo a (\"a\");\n    {\n        Foo b (\"b\");\n        {\n            Foo c (\"c\");\n        }\n        throw 0;\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>c0\nterminate called after throwing an instance of 'int'\n</code></pre>\n\n<p>Why are the other objects not being destroyed? I thought this was supposed to happen.</p>\n"}, {"tags": ["c++", "pointers", "gtkmm"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 7486328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21927206a712b32095e5b94dc07069c?s=128&d=identicon&r=PG", "display_name": "bergentroll", "link": "https://stackoverflow.com/users/7486328/bergentroll"}, "edited": false, "score": 0, "creation_date": 1550131926, "post_id": 54676449, "comment_id": 96159756, "body": "Thank you for short and clear answer, @metal! But in this way while we talking about C++ why not just to pass references on such shared objects? Or objects&#39; lifetime is the cause?"}, {"owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "reply_to_user": {"reputation": 87, "user_id": 7486328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21927206a712b32095e5b94dc07069c?s=128&d=identicon&r=PG", "display_name": "bergentroll", "link": "https://stackoverflow.com/users/7486328/bergentroll"}, "edited": false, "score": 0, "creation_date": 1550146078, "post_id": 54676449, "comment_id": 96167644, "body": "Yes, it is to manage lifetime. If you pass references, they may become dangling and cause undefined behavior because some other part of the program deletes the object (or it goes out of scope, if it&amp;#39;s on the stack). Shared ownership via reference counting allows different parts of the program to share ownership and keep it alive without knowing about each other directly."}], "tags": [], "owner": {"reputation": 5569, "user_id": 201787, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/vgB9F.jpg?s=128&g=1", "display_name": "metal", "link": "https://stackoverflow.com/users/201787/metal"}, "is_accepted": true, "score": 2, "last_activity_date": 1550154033, "last_edit_date": 1550154033, "creation_date": 1550080130, "answer_id": 54676449, "question_id": 54676087, "link": "https://stackoverflow.com/questions/54676087/gtkmm-what-is-glibrefptr-usecases/54676449#54676449", "title": "gtkmm: what is Glib::RefPtr usecases?", "body": "<p><a href=\"https://developer.gnome.org/gtkmm-tutorial/stable/chapter-refptr.html.en\" rel=\"nofollow noreferrer\"><code>Glib::RefPtr</code></a> is a reference-counted smart pointer that predates <code>std::shared_ptr</code> and performs the same essential functions. The use case for it is similar -- it allows multiple objects want to share ownership of an object without knowing about each other directly. </p>\n\n<p>In your specific examples, an icon might be shared because it is used in multiple places in a UI, and you don't want to maintain many copies of the same image data, which could use a considerable bit of memory if there are many icons.</p>\n\n<p>The <code>Application</code> and <code>Builder</code> objects are likely held by multiple objects in your program (e.g., different window or dialog objects), so the reference counting keeps each alive as long as one of those objects is still using it. This frees these users of the <code>Application</code> object from having to know about all the other parts of the program that might use the shared <code>Application</code> object. When one window is done with the <code>Application</code>, it destroys its smart pointer to the <code>Application</code>. If that window was the last owner, this also destroys the <code>Application</code> object, but otherwise it stays alive for the other users -- all without your destroyed window knowing about it whether the <code>Application</code> lives on or not.</p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 7486328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21927206a712b32095e5b94dc07069c?s=128&d=identicon&r=PG", "display_name": "bergentroll", "link": "https://stackoverflow.com/users/7486328/bergentroll"}, "edited": false, "score": 0, "creation_date": 1550647484, "post_id": 54693291, "comment_id": 96340438, "body": "Seems reasonable. But why gtkmm does not hide Glib&#39;s share pointers for some more compact and flexible code (e.g. if someone wants to use some kind of boost&#39;s pointers)? Is it because avoiding overhead? And I sill can not understand how share pointers can help me with objects which lifetime complies to program lifetime."}, {"owner": {"reputation": 87, "user_id": 7486328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21927206a712b32095e5b94dc07069c?s=128&d=identicon&r=PG", "display_name": "bergentroll", "link": "https://stackoverflow.com/users/7486328/bergentroll"}, "edited": false, "score": 0, "creation_date": 1550651287, "post_id": 54693291, "comment_id": 96342322, "body": "It&#39;s not possible to dereference RefPtr to pass to e.g. <code>add_window(Window &amp;)</code>. I checked <a href=\"https://gitlab.gnome.org/GNOME/gtkmm-documentation/tree/master/examples/book/buildapp\" rel=\"nofollow noreferrer\">the example</a>. And so, the example&#39;s window <code>create</code> method returns a pointer (just pointer, not a RefPtr). I should say it is too frustrating for me, cause I am totally confused when I should use RefPtrs, when I should use &quot;plain&quot; pointers and why I should not use just references."}], "tags": [], "owner": {"reputation": 17713, "user_id": 226648, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/3196df423fd95dc4fce7dfadb8ec9953?s=128&d=identicon&r=PG", "display_name": "el.pescado", "link": "https://stackoverflow.com/users/226648/el-pescado"}, "is_accepted": false, "score": 0, "last_activity_date": 1550156853, "last_edit_date": 1550156853, "creation_date": 1550156247, "answer_id": 54693291, "question_id": 54676087, "link": "https://stackoverflow.com/questions/54676087/gtkmm-what-is-glibrefptr-usecases/54693291#54693291", "title": "gtkmm: what is Glib::RefPtr usecases?", "body": "<blockquote>\n  <ul>\n  <li>Is it because memory stack usage or something else? There is no RefPtr's in my code for now. I checked usage of stack with valgrind's\n  massif tool, peak usage was about 100 KB. Seems not too low for me,\n  but comparable size [example with RefPtr's][1] takes a same piece of\n  stack memory.</li>\n  </ul>\n</blockquote>\n\n<p>The main reason is that gtkmm is a thin C++ wrapper over Gtk+ library written in C. Most objects in Gtk+ are allocated on heap (eg. <code>GtkApplication</code> object is created using <a href=\"https://developer.gnome.org/gtk3/stable/GtkApplication.html#gtk-application-new\" rel=\"nofollow noreferrer\"><code>gtk_application_new</code></a> function), and are reference counted (manually, using <a href=\"https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#g-object-ref\" rel=\"nofollow noreferrer\"><code>g_object_ref</code></a>/<a href=\"https://developer.gnome.org/gobject/unstable/gobject-The-Base-Object-Type.html#g-object-unref\" rel=\"nofollow noreferrer\"><code>g_object_unref</code></a> functions). In other words, those objects have already shared pointer semantics, albeit expressed in plain C. Because of this, it makes most sense to represent those objects in C++ as smart pointers - Glib::RefPtr in this case.</p>\n\n<blockquote>\n  <ul>\n  <li>May I place all instances just on stack like <code>Application myapp</code>, or should I always use create() while it present?</li>\n  </ul>\n</blockquote>\n\n<p>No, because <code>Gtk::Application</code> contructors are <code>protected</code>, so compiler won't allow to create those objects on stack.</p>\n\n<blockquote>\n  <ul>\n  <li>What advantages the pointers provide in this case?</li>\n  </ul>\n</blockquote>\n\n<p>I think it's the other way round. Keeping those objects on stack wouldn't provide any advantages, as Gtk objects wrapped by gtkmm objects are essentially shared pointers.</p>\n"}], "owner": {"reputation": 87, "user_id": 7486328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21927206a712b32095e5b94dc07069c?s=128&d=identicon&r=PG", "display_name": "bergentroll", "link": "https://stackoverflow.com/users/7486328/bergentroll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 0, "accepted_answer_id": 54676449, "answer_count": 2, "score": 0, "last_activity_date": 1550156853, "creation_date": 1550078682, "question_id": 54676087, "link": "https://stackoverflow.com/questions/54676087/gtkmm-what-is-glibrefptr-usecases", "title": "gtkmm: what is Glib::RefPtr usecases?", "body": "<p>I am writing a little GTK3 app with C++ and gtkmm library.</p>\n\n<p>In the gtkmm documentation usually some concrete instances such as Gtk::Application, Gtk::Builder, Gtk::StatusIcon etc. initialized with create() static methods that return a Glib::RefPtr. Meanwhile child widgets usually arise just on stack.</p>\n\n<p>That is not clear for me:</p>\n\n<ul>\n<li>Is it because memory stack usage or something else? There is no RefPtr's in my code for now. I checked usage of stack with valgrind's massif tool, peak usage was about 100\u00a0KB. Seems not too low for me, but comparable size <a href=\"https://gitlab.gnome.org/GNOME/gtkmm-documentation/tree/master/examples/book/buildapp/step9\" rel=\"nofollow noreferrer\">example with RefPtr's</a> takes a same piece of stack memory.</li>\n<li>May I place all instances just on stack like <code>Application myapp</code>, or should I always use create() while it present?</li>\n<li>What advantages the pointers provide in this case? </li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1550078389, "post_id": 54675992, "comment_id": 96141167, "body": "<code>std::distance(sight.begin(), remove);</code> will tell you how many elements remain in the &quot;valid&quot; range."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550078398, "post_id": 54675992, "comment_id": 96141174, "body": "It&#39;s not because it&#39;s resized that it&#39;s reallocated."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1550078407, "post_id": 54675992, "comment_id": 96141180, "body": "Note that <code>erase</code> doesn&#39;t cause the vector&#39;s <i>capacity</i> to change, there is no memory reallocation."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550078435, "post_id": 54675992, "comment_id": 96141200, "body": "This is really going to depend on what exactly you are going but <code>remove - sight.begin()</code> will tell you how many elements are &quot;left&quot; in the vector."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1550078447, "post_id": 54675992, "comment_id": 96141207, "body": "If you are just storing a pointer here, nothing to worry about in terms of speed. Except don&#39;t use <code>size()</code> to test for emptiness, use <code>empty()</code>."}, {"owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "edited": false, "score": 0, "creation_date": 1550078464, "post_id": 54675992, "comment_id": 96141223, "body": "I&#39;m not sure why you think your current method isn&#39;t good enough?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1550078703, "post_id": 54675992, "comment_id": 96141354, "body": "Have you benchmarked this code and determined that it&#39;s slow?"}, {"owner": {"reputation": 4485, "user_id": 2205033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8d36e28c13c9214b2281af2d12916b?s=128&d=identicon&r=PG", "display_name": "Johannes Overmann", "link": "https://stackoverflow.com/users/2205033/johannes-overmann"}, "edited": false, "score": 1, "creation_date": 1550078942, "post_id": 54675992, "comment_id": 96141491, "body": "Can the people who are downvoting this question please elaborate why. I find the question clear and relevant."}, {"owner": {"reputation": 75, "user_id": 8877859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmsrQ.jpg?s=128&g=1", "display_name": "Agnes Cameron", "link": "https://stackoverflow.com/users/8877859/agnes-cameron"}, "edited": false, "score": 0, "creation_date": 1550079367, "post_id": 54675992, "comment_id": 96141714, "body": "hi! My understanding was that <code>erase</code> changed the size of the vector in memory, but perhaps that&#39;s not the case. I&#39;ll try and find where I read that explanation and link it"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1550079406, "post_id": 54675992, "comment_id": 96141739, "body": "It&#39;s unclear what the result should be (I can&#39;t see what we&#39;re returning <i>from</i>, or what state anything is supposed to be left in). Questions that say things need to be fast with no benchmarking are always a bit suspect. Also that isn&#39;t what &quot;recursive&quot; means. I didn&#39;t downvote, but those are the unlikeable parts of the question for me."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1550079630, "post_id": 54675992, "comment_id": 96141878, "body": "@Galik the vector elements appear to be raw pointers, so destructors aren&#39;t an issue (although leaking might be, outside the scope of this Q)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1550080796, "post_id": 54675992, "comment_id": 96142490, "body": "&quot;After this, I use vector.size() to check to see if there are any elements remaining in the vector, and then return the function if not.&quot; if you use pair of iterators as standard algos do instead of passing vector itself you would not even have your question."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1550087423, "post_id": 54675992, "comment_id": 96145591, "body": "@AgnesCameron &quot;<i>My understanding was that <code>erase</code> changed the size of the vector in memory</i>&quot; - it does indeed change the <b>size</b>, but not the <b>capacity</b>. Two different things. The <code>size</code> is the current number of &quot;valid&quot; elements, whereas the <code>capacity</code> is the max number of elements that can be held before reallocation is needed. Shrinking the <code>size</code> never reallocates the <code>capacity</code>, however &quot;erasing&quot; elements will destruct them if needed. But, your <code>vector</code> appears to be holding pointers, not object instances, so there is nothing for the <code>vector</code> to destruct (but YOU may have to manually)."}, {"owner": {"reputation": 75, "user_id": 8877859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmsrQ.jpg?s=128&g=1", "display_name": "Agnes Cameron", "link": "https://stackoverflow.com/users/8877859/agnes-cameron"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1550087528, "post_id": 54675992, "comment_id": 96145652, "body": "@RemyLebeau oh, nice! thanks so much, that makes a lot more sense."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1550079315, "last_edit_date": 1550079315, "creation_date": 1550078725, "answer_id": 54676097, "question_id": 54675992, "link": "https://stackoverflow.com/questions/54675992/alternatives-to-vector-size-after-running-remove-if/54676097#54676097", "title": "Alternatives to vector.size() after running remove_if()", "body": "<p>Instead of erasing elements that satisfy a criteria and then checking the number of remaining elements just to find out how many elements did not satisfy the criteria, you could simply iterate the container and count those elements. The standard library has an algorithm for that: <code>std::count_if</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4485, "user_id": 2205033, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a8d36e28c13c9214b2281af2d12916b?s=128&d=identicon&r=PG", "display_name": "Johannes Overmann", "link": "https://stackoverflow.com/users/2205033/johannes-overmann"}, "is_accepted": true, "score": 5, "last_activity_date": 1550078803, "creation_date": 1550078803, "answer_id": 54676125, "question_id": 54675992, "link": "https://stackoverflow.com/questions/54675992/alternatives-to-vector-size-after-running-remove-if/54676125#54676125", "title": "Alternatives to vector.size() after running remove_if()", "body": "<p>You can use <code>std::distance(sight.begin(), remove);</code> to get the number of remaining elements:</p>\n\n<pre><code>auto remove = remove_if(sight.begin(), sight.end(), [](const Glance *a) {\n    return a-&gt;occupied;\n}); \n\nsize_t remaining = std::distance(sight.begin(), remove);\n\nif (remaining == 0) {\n    // There's nowhere to move\n    return;\n}\n</code></pre>\n\n<p>But if you are only interested in <code>0</code> you can do:</p>\n\n<pre><code>auto remove = remove_if(sight.begin(), sight.end(), [](const Glance *a) {\n    return a-&gt;occupied;\n}); \n\nif (remove == sight.begin()) {\n    // There's nowhere to move\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 8877859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TmsrQ.jpg?s=128&g=1", "display_name": "Agnes Cameron", "link": "https://stackoverflow.com/users/8877859/agnes-cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "accepted_answer_id": 54676125, "answer_count": 2, "score": 3, "last_activity_date": 1550090039, "creation_date": 1550078312, "last_edit_date": 1550090039, "question_id": 54675992, "link": "https://stackoverflow.com/questions/54675992/alternatives-to-vector-size-after-running-remove-if", "title": "Alternatives to vector.size() after running remove_if()", "body": "<p>I'm writing a piece of C++ that checks to see whether particular elements of a vector return true, and uses <code>remove_if()</code> to remove them if not. After this, I use <code>vector.size()</code> to check to see if there are any elements remaining in the vector, and then return the function if not.</p>\n\n<p>At the moment, I do <code>vector.erase()</code> after <code>remove_if()</code>, as it doesn't actually reduce the size of the vector. However, this code needs to run fast, and recursively changing the size of a vector in memory is probably not ideal. However, returning if the vector is zero (instead of running the rest of the function) probably also saves time.</p>\n\n<p>Is there a nice way to check how many elements remain in the vector without erasing?</p>\n\n<p>here's the code:</p>\n\n<pre><code>  auto remove = remove_if(sight.begin(), sight.end(), [](const Glance *a) {\n    return a-&gt;occupied;\n  }); \n\n  sight.erase(remove, sight.end());\n\n  if (sight.size() == 0) {\n    // There's nowhere to move\n    return;\n  }\n</code></pre>\n\n<p>EDIT:\nthanks for the help + the guidance. From the answers it's clear that the wording of the question isn't quite correct: <code>erase()</code> doesn't change the size of the vector in memory, but the capacity. I had mis-remembered the explanation from <a href=\"https://stackoverflow.com/questions/19296958/difference-between-stdremove-and-erase-for-vector\">this post</a>, which nicely articulates why <code>erase()</code> is slower than <code>remove()</code> for multiple removals (as you have to copy the location of the elements in the vector multiple times).</p>\n\n<p>I used Instruments to benchmark the code I had originally against Johannes' suggestion, and the difference was marginal, though Johannes' was consistently slightly faster (~9.8% weight vs ~8.3% weight for the same code otherwise). The linked article should explain why. \u2728</p>\n"}, {"tags": ["c++", "boost", "promise", "future", "asio"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550078093, "post_id": 54675387, "comment_id": 96141016, "body": "if you are using <code>boost::future</code> you could just call your lambda from <code>then()</code>"}, {"owner": {"reputation": 441, "user_id": 1224114, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bd142f4f9840059f6f3cca1629e06523?s=128&d=identicon&r=PG", "display_name": "sashas", "link": "https://stackoverflow.com/users/1224114/sashas"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550080612, "post_id": 54675387, "comment_id": 96142405, "body": "From what i observe it launches &quot;then&quot; on a different thread,"}], "answers": [{"comments": [{"owner": {"reputation": 441, "user_id": 1224114, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bd142f4f9840059f6f3cca1629e06523?s=128&d=identicon&r=PG", "display_name": "sashas", "link": "https://stackoverflow.com/users/1224114/sashas"}, "edited": false, "score": 0, "creation_date": 1550081249, "post_id": 54675926, "comment_id": 96142706, "body": "see my self comment in the original post, seems that &quot;then&quot; is running from additional thread. Is there any possibility to cause it to run from &quot;io_service&quot;?"}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 441, "user_id": 1224114, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bd142f4f9840059f6f3cca1629e06523?s=128&d=identicon&r=PG", "display_name": "sashas", "link": "https://stackoverflow.com/users/1224114/sashas"}, "edited": false, "score": 0, "creation_date": 1550095418, "post_id": 54675926, "comment_id": 96149194, "body": "@sashas that&#39;s what the optional executor argument is for. It tells the future to execute on the specified executor rather than the system sxecutor."}, {"owner": {"reputation": 2341, "user_id": 5198101, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e368f319f68500b32b5fdbe73e27f640?s=128&d=identicon&r=PG&f=1", "display_name": "RaGa__M", "link": "https://stackoverflow.com/users/5198101/raga-m"}, "edited": false, "score": 0, "creation_date": 1561621870, "post_id": 54675926, "comment_id": 100126837, "body": "your continuation just have to be <code>.then([&amp;io_context](){ ::post(io_context,your_handler); })</code>"}, {"owner": {"reputation": 2341, "user_id": 5198101, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e368f319f68500b32b5fdbe73e27f640?s=128&d=identicon&r=PG&f=1", "display_name": "RaGa__M", "link": "https://stackoverflow.com/users/5198101/raga-m"}, "edited": false, "score": 0, "creation_date": 1561622225, "post_id": 54675926, "comment_id": 100127022, "body": "&quot; just have to be&quot; + like."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1550078084, "creation_date": 1550078084, "answer_id": 54675926, "question_id": 54675387, "link": "https://stackoverflow.com/questions/54675387/boost-asyncroniously-wait-for-future-completion/54675926#54675926", "title": "boost: asyncroniously wait for future completion", "body": "<p>You may want to take a look at boost.future:</p>\n\n<p><a href=\"https://www.boost.org/doc/libs/1_69_0/doc/html/thread/synchronization.html#thread.synchronization.futures.then\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_69_0/doc/html/thread/synchronization.html#thread.synchronization.futures.then</a></p>\n\n<p><code>boost::future</code> is superior to <code>std::future</code> in that you can attach a continuation to the future with <code>.then([executor], continuation_function)</code>.</p>\n\n<p>In recent versions of asio, <code>io_context::executor_type</code> (from <code>.get_executor()</code>) and <code>io_context::strand</code> model an executor.</p>\n"}, {"comments": [{"owner": {"reputation": 441, "user_id": 1224114, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bd142f4f9840059f6f3cca1629e06523?s=128&d=identicon&r=PG", "display_name": "sashas", "link": "https://stackoverflow.com/users/1224114/sashas"}, "edited": false, "score": 0, "creation_date": 1550387140, "post_id": 54679450, "comment_id": 96244816, "body": "yes you are correct .. indeed it does not work even with boost 1.66 (fails on try_executing_one)."}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 0, "last_activity_date": 1550092157, "creation_date": 1550092157, "answer_id": 54679450, "question_id": 54675387, "link": "https://stackoverflow.com/questions/54675387/boost-asyncroniously-wait-for-future-completion/54679450#54679450", "title": "boost: asyncroniously wait for future completion", "body": "<p>Essentially you want to synchronously <code>post</code> additional code when a function provides a result. Using a <code>promise</code> for synchronous communication is overkill (remember that a <code>promise</code> uses a synchronization object).</p>\n\n<p>Your original thought to <code>post</code> the continuation back to <code>io_service</code>, bypassing the <code>promise</code>, is a better idea:</p>\n\n<pre><code>int worker() {\n    this_thread::sleep_for(2s);\n    return 10;\n}\n\nint main(int argc, char **argv) {\n    io_service io;\n    io_service::work work(io);\n    thread my_thread; // assuming this represents the thread pool\n    io.post([&amp;] {\n        std::cout &lt;&lt; \"submission id:\" &lt;&lt; this_thread::get_id() &lt;&lt; std::endl;\n        my_thread = thread([&amp;io] { // assuming this represents posting a task to the pool\n            auto result = worker();\n            io.post([&amp;io, result] {\n                std::cout &lt;&lt; \"completion thread id:\" &lt;&lt; this_thread::get_id()\n                          &lt;&lt; \", result:\" &lt;&lt; result &lt;&lt; std::endl;\n            });\n        });\n    });\n    io.run();\n}\n</code></pre>\n\n<hr>\n\n<p>Note. The idea in the other answer is this:</p>\n\n<pre><code>    p.get_future().then(io.get_executor(), [](future&lt;int&gt; p) {\n        std::cout &lt;&lt; \"completion thread id:\" &lt;&lt; boost::this_thread::get_id() &lt;&lt; std::endl;\n    });\n</code></pre>\n\n<p>It won't work for you because <code>io_context::executor_type</code> and <code>future.then([Executor&amp;],...)</code> is available from Boost 1.66 (it will still probably not work due to the missing <code>try_executing_one()</code> in the ASIO executor).</p>\n"}], "owner": {"reputation": 441, "user_id": 1224114, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bd142f4f9840059f6f3cca1629e06523?s=128&d=identicon&r=PG", "display_name": "sashas", "link": "https://stackoverflow.com/users/1224114/sashas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1022, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550092157, "creation_date": 1550076438, "last_edit_date": 1550081199, "question_id": 54675387, "link": "https://stackoverflow.com/questions/54675387/boost-asyncroniously-wait-for-future-completion", "title": "boost: asyncroniously wait for future completion", "body": "<p>Here is my problem, lets say i have a chunk of sync code that needs to be executed syncroniously, and i have a thread pool for that. I can provide a callout for this \"task\" that can set a value on boost promise. </p>\n\n<p>Now i wait a single dispatcher thread to run as io_service, this service will get \"request\" via io.post, select a worker-thread from pool, submit the job to it, and pass a \"callout\" (that will run on worker-thread and \"do the \"promise.set_value\".\nWhat i want to happen is some kind of \"continuation\" that will be executed on \"io_service\". \nOne way i can do it is that \"callout\" will submit a \"new job\" on io_service, this job can be a lambda passed from the \"request initiator\", hence not using \"promise\" and \"future\". \nQuestion is can i somehow use \"future\" for this ?and somehow to cause \"promise.set_value\" to submit this \"continuation\".</p>\n\n<p>I tried the following code, as suggested below:</p>\n\n<pre><code> void worker(promise&lt;int&gt;&amp; p) {\n  sleep(10);\n  p.set_value(10);\n}\n\n\nint main(int argc, char **argv) {\n    io_service io;\n    io_service::work work(io);\n    promise&lt;int&gt; p;\n    io.post([&amp;] {\n        std::cout &lt;&lt; \"submission id:\" &lt;&lt; boost::this_thread::get_id() &lt;&lt; std::endl;\n        boost::thread my_thread(&amp;worker, boost::ref(p));\n        p.get_future().then(launch::async, [](future&lt;int&gt; p){\n            std::cout &lt;&lt; \"completion thread id:\" &lt;&lt; boost::this_thread::get_id() &lt;&lt; std::endl;\n        });\n    });\n    io.run();\n}\n</code></pre>\n\n<p>here is the output:\njob id:7f0c7b825b80\njob completion id:7f0c798be700</p>\n\n<p>Seems that it is running the completion on different thread, and i need it to be called on \"io_service\" one .. should i just \"post\" from a side thread a new \"JOB\"?</p>\n\n<p>I`m using boost 1.65 though.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1550076174, "post_id": 54675269, "comment_id": 96139991, "body": "You know that you have memory leaks, a missing copy constructor and all sorts of problems, right? Use a <code>std::list</code> instead of implementing your own."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 2, "creation_date": 1550076180, "post_id": 54675269, "comment_id": 96139993, "body": "Maybe not applicable for you, but you should use <code>std::list</code> or <code>std::forward_list</code>. They are high quality linked lists ready to be used."}, {"owner": {"reputation": 1134, "user_id": 2683574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e65517e8eab731bde8dac73ed7960ee?s=128&d=identicon&r=PG&f=1", "display_name": "tnt", "link": "https://stackoverflow.com/users/2683574/tnt"}, "edited": false, "score": 1, "creation_date": 1550076241, "post_id": 54675269, "comment_id": 96140027, "body": "You need to write a copy constructor and assignment operator for <code>waitline</code>. Search for &quot;C++ rule of three&quot;"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 2, "creation_date": 1550076242, "post_id": 54675269, "comment_id": 96140028, "body": "<code>if (len == 0) return true; else return false;</code> -&gt; <code>return ken == 0;</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550076340, "post_id": 54675269, "comment_id": 96140089, "body": "@MatthieuBrucher OP clearly has a learning exercise. Advising OP to use list is akin to advising a person taking a driving course to hire a cab."}, {"owner": {"reputation": 495, "user_id": 8303150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647258158642306/picture?type=large", "display_name": "Jack Walsh", "link": "https://stackoverflow.com/users/8303150/jack-walsh"}, "reply_to_user": {"reputation": 1134, "user_id": 2683574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e65517e8eab731bde8dac73ed7960ee?s=128&d=identicon&r=PG&f=1", "display_name": "tnt", "link": "https://stackoverflow.com/users/2683574/tnt"}, "edited": false, "score": 0, "creation_date": 1550076469, "post_id": 54675269, "comment_id": 96140164, "body": "Thanks everyone for the help, as Sergey said, this is a learning excercise where I am simply to discover why it isnt copying properly. I believe @tntxtnt is right in that I need a copy constructor, so I will see if that fixes it."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1550076530, "post_id": 54675269, "comment_id": 96140197, "body": "@JackWalsh try using the tool <a href=\"http://valgrind.org/\" rel=\"nofollow noreferrer\"><code>valgrind</code></a> it will output all your memory errors, including leaks."}, {"owner": {"reputation": 1134, "user_id": 2683574, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e65517e8eab731bde8dac73ed7960ee?s=128&d=identicon&r=PG&f=1", "display_name": "tnt", "link": "https://stackoverflow.com/users/2683574/tnt"}, "edited": false, "score": 1, "creation_date": 1550076631, "post_id": 54675269, "comment_id": 96140262, "body": "actually in your code copy assignment operator is what you need, like in @erenon&#39;s answer, but you&#39;ll need all 3: destructor, copy ctor, copy assignment operator."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550076944, "post_id": 54675269, "comment_id": 96140421, "body": "I think that&#39;s what I said as well in my first comment: missing copy constructor (and memory leaks!!)."}], "answers": [{"comments": [{"owner": {"reputation": 495, "user_id": 8303150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647258158642306/picture?type=large", "display_name": "Jack Walsh", "link": "https://stackoverflow.com/users/8303150/jack-walsh"}, "edited": false, "score": 0, "creation_date": 1550076578, "post_id": 54675354, "comment_id": 96140233, "body": "Thanks a lot, I think I understand this now. It is a learning exercise and would likely use <code>std::vector</code> if I was the one designing the code. For clarification, I should alter the <code>operator=</code> so that it sets the pointers equal to each other as well?"}, {"owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "reply_to_user": {"reputation": 495, "user_id": 8303150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647258158642306/picture?type=large", "display_name": "Jack Walsh", "link": "https://stackoverflow.com/users/8303150/jack-walsh"}, "edited": false, "score": 0, "creation_date": 1550077184, "post_id": 54675354, "comment_id": 96140535, "body": "@JackWalsh: the default <code>operator=</code> does that - which is not what you want. A possible <code>operator=</code> doing a deep copy would first clear the list, walk the source object (iterate over each person in the line), and append a copy of them to the other line, which gets assigned to."}], "tags": [], "owner": {"reputation": 17902, "user_id": 116273, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cc60634738ece15d1de4738110c76aa8?s=128&d=identicon&r=PG", "display_name": "erenon", "link": "https://stackoverflow.com/users/116273/erenon"}, "is_accepted": false, "score": 3, "last_activity_date": 1550076331, "creation_date": 1550076331, "answer_id": 54675354, "question_id": 54675269, "link": "https://stackoverflow.com/questions/54675269/c-class-object-referencing-in-reassignment-rather-than-copying/54675354#54675354", "title": "C++: Class object referencing in reassignment rather than copying", "body": "<p><code>w2 = w</code> does a shallow copy: it copies the pointers, but not the pointed to objects. Therefore, the changes to those pointed objects made via <code>w</code> can be observed via <code>w</code> as well. You need to do a deep copy, e.g: by implementing <code>operator=</code> properly.</p>\n\n<p>The <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of 3/5/0</a> gives a good explanation on the required members a resource handling object needs to implement.</p>\n\n<p>Otherwise, as the other commenters point out: there are several memory management issues in the code. Unless this is some sort of homework, or a deliberate attempt to learn how pointers work, it'd more efficient to use standard containers, e.g: <code>std::vector</code>, <code>std::dequeue</code> or <code>std::list</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "is_accepted": false, "score": 0, "last_activity_date": 1550077178, "creation_date": 1550077178, "answer_id": 54675651, "question_id": 54675269, "link": "https://stackoverflow.com/questions/54675269/c-class-object-referencing-in-reassignment-rather-than-copying/54675651#54675651", "title": "C++: Class object referencing in reassignment rather than copying", "body": "<p>I want to state erenon's answer a little differently. The problem is this line of code:</p>\n\n<pre><code>w2 = w;\n</code></pre>\n\n<p>What this does is copy the structure of w into w2. That is, w2.front, w2.rear, and w2.length are copied. The data they point to is not.</p>\n\n<p>In other words, w2.front points to the exact same node as w.front, not a copy of it. So if you modify w2.front->next, you're also at the same time modifying w.front->next, as it's the exact same space in memory.</p>\n\n<p>This is almost certainly not what you want.</p>\n\n<p>If you are going to do w2 = w, then you need to implement a copy operator. You can google for examples of how to write that. But basically what you would do is iterate over the list of nodes, creating a duplicate list, so that neither waitline actually points to the same list of node objects.</p>\n\n<p>Assuming that's what you want -- a distinct NEW LINE, but based on the same strings as the original line, so that changes to one do not affect the other.</p>\n\n<p>I wouldn't do it that way, though. I'd write another method in waitline:</p>\n\n<pre><code>void copyFrom(waitline &amp;orig) {\n    for (node *ptr = orig.front; ptr != NULL; ptr = ptr-&gt;next) {\n        enterLine(ptr-&gt;val);\n    }\n}\n</code></pre>\n\n<p>Then instead of the copy operation, I would do:</p>\n\n<pre><code>w2.copyFrom(w);\n</code></pre>\n\n<p>That's almost the same thing as writing a copy operator, but as you're new to this, you don't need to learn copy operator semantics while also learning about pointers.</p>\n"}], "owner": {"reputation": 495, "user_id": 8303150, "user_type": "registered", "profile_image": "https://graph.facebook.com/1647258158642306/picture?type=large", "display_name": "Jack Walsh", "link": "https://stackoverflow.com/users/8303150/jack-walsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1550077178, "creation_date": 1550075997, "question_id": 54675269, "link": "https://stackoverflow.com/questions/54675269/c-class-object-referencing-in-reassignment-rather-than-copying", "title": "C++: Class object referencing in reassignment rather than copying", "body": "<p>I have the following code where a waitline object is created to keep track of the people in line in the form of nodes. The <code>enterLine()</code> function adds a person to the line and points the node before them to their own node. <code>exitLine()</code> removes the first person in the line.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nstruct node {\n    string val;\n    node *next;  // this will be the pointer to the person behind this person\n};\nclass waitline {\npublic:\n    waitline() {};\n    void enterLine(string x);\n    string exitLine();\n    int size() { return len; };\n    bool isEmpty() {\n        if (len == 0) return true; else return false;\n    };\n    void printLine();\nprivate:\n    node * front = NULL, *rear = NULL;\n    int len = 0;\n};\nvoid waitline::enterLine(string x) {\n    if (len == 0) {\n        front = new node;\n        rear = front;\n        front-&gt;val = x;\n        front-&gt;next = NULL;\n        len++;\n    }\n    else {\n        rear-&gt;next = new node; // rear is the last person in line\n        rear = rear-&gt;next;  //reset rear to the new node.\n        rear-&gt;val = x;\n        rear-&gt;next = NULL;\n        len++;\n    }\n\n};\nstring waitline::exitLine() {\n    string s;\n    if (len == 0) {  // no one in line\n        cout &lt;&lt; \"error-no one in line\\n\";\n        return \"\";\n\n    }\n    else {\n        s = front-&gt;val;\n        front = front-&gt;next;\n        len--;\n        return s;\n    }\n};\nvoid waitline::printLine() {\n    node *temp;\n    cout &lt;&lt; \"FRONT OF LINE\\n\";\n    temp = front;\n    while (temp != NULL) {\n        cout &lt;&lt; temp-&gt;val &lt;&lt; endl;\n        temp = temp-&gt;next;\n    }\n};\nint main() {\n    waitline w, w2;\n    w.enterLine(\"Joe\");\n    w.enterLine(\"Mary\");\n    w.enterLine(\"Mikey\");\n    w2 = w;\n    cout &lt;&lt; \"waiting line w2 is\\n\";\n    w.printLine();\n    cout &lt;&lt; w.exitLine() &lt;&lt; \" was served\\n\";\n    w2.enterLine(\"Susie\");\n    w.enterLine(\"Juan\");\n    w.enterLine(\"Nguyen\");\n    cout &lt;&lt; w.exitLine() &lt;&lt; \" was served\\n\";\n    w.printLine();\n    cout &lt;&lt; w.size() &lt;&lt; endl;\n    w2.printLine();\n    return 0;\n}\n</code></pre>\n\n<p>I expect w2 to only hold the first 3 values (Joe, Mary, and Mikey) as well as Susie, who was explicitly added to w2. When printing w2, however, it gives the output I expect from <code>printLine(w)</code>.</p>\n"}, {"tags": ["c++", "templates", "g++", "friend-function"], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 1, "last_activity_date": 1550077292, "creation_date": 1550077292, "answer_id": 54675688, "question_id": 54675078, "link": "https://stackoverflow.com/questions/54675078/linker-error-with-templated-friend-function-of-templated-class-when-using-templa/54675688#54675688", "title": "linker error with templated friend function of templated class when using template independent enable_if", "body": "<blockquote>\n  <p>is this a g++ (8.2) bug or does clang++ violate the standard</p>\n</blockquote>\n\n<p>I suspect gcc is correct. Template friends are a dark corner of the language.</p>\n\n<blockquote>\n  <p>how do I trigger the code generation for the function?</p>\n</blockquote>\n\n<p>I'd do it via a befriended actor.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct friend_of_f\n{\n    template&lt;class someX&gt; \n    static auto apply(someX x) -&gt; std::enable_if_t&lt;std::is_same_v&lt;decltype(x.hidden), int&gt;, decltype(x.hidden)&gt;\n    {\n        return x.hidden;\n    }\n};\n\ntemplate&lt;typename someX&gt;\nauto f(someX x) -&gt; decltype(friend_of_f::apply(x))\n{\n    return friend_of_f::apply(x);\n}\n\ntemplate&lt;typename T&gt;\nstruct X \n{\n\nfriend friend_of_f;\n\nprivate:\n  T hidden = 42;\n};\n\n\n\n\nint main () {\n  X&lt;int&gt; x;\n  std::cout &lt;&lt; f(x);\n  X&lt;double&gt; y;\n//  std::cout &lt;&lt; f(y);\n}\n</code></pre>\n"}], "owner": {"reputation": 2363, "user_id": 4588453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51da95e02741a304f3620d3b9697eda9?s=128&d=identicon&r=PG&f=1", "display_name": "pseyfert", "link": "https://stackoverflow.com/users/4588453/pseyfert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54675688, "answer_count": 1, "score": 1, "last_activity_date": 1550077292, "creation_date": 1550075426, "question_id": 54675078, "link": "https://stackoverflow.com/questions/54675078/linker-error-with-templated-friend-function-of-templated-class-when-using-templa", "title": "linker error with templated friend function of templated class when using template independent enable_if", "body": "<p>I'm dealing with a templated class with a templated friend function</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct X {\n  template&lt;typename someX&gt;\n  auto friend f (someX x) -&gt; std::enable_if_t&lt;std::is_same_v&lt;decltype(x.hidden), int&gt;, int&gt;;\n\nprivate:\n  T hidden = 42;\n};\n\ntemplate&lt;typename someX&gt;\nauto f(someX x) -&gt; std::enable_if_t&lt;std::is_same_v&lt;decltype(x.hidden), int&gt;, int&gt; {return x.hidden;}\n</code></pre>\n\n<p>this compiles fine with g++, but fails at link time in</p>\n\n<pre><code>int main () {\n  X&lt;int&gt; x;\n  std::cout &lt;&lt; f(x);\n}\n</code></pre>\n\n<p>with</p>\n\n<pre><code>prog.cc:(.text+0x15): undefined reference to `std::enable_if&lt;is_same_v&lt;decltype ({parm#1}.hidden), int&gt;, int&gt;::type f&lt;X&lt;int&gt; &gt;(X&lt;int&gt;)'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/FpJnhlwYGbSzf37k\" rel=\"nofollow noreferrer\">see here</a>.</p>\n\n<p>What I observed is:</p>\n\n<ul>\n<li><p>when replacing the second argument of <code>enable_if</code> (the type) by something that depends on the class template (<code>int</code> \u2192 <code>decltype(x.hidden)</code>) <a href=\"https://wandbox.org/permlink/W69T6JPLIgxB3lb5\" rel=\"nofollow noreferrer\">see here</a> linking succeeds with g++.</p></li>\n<li><p>when making <code>hidden</code> public and dropping the friend declaration, the code links fine (so the function template gets instantiated).</p></li>\n<li><p>dropping the enable_if and just declaring the return type as <code>int</code> works fine.</p></li>\n<li><p>move the enable_if from the return type into the <code>template &lt;typename \u2026 , typename = typename enable_if_t&lt;\u2026&gt;&gt;</code>, but here I fail to compile because g++ and clang++ tell me friend declarations do not allow default template arguments.</p></li>\n<li><p>drop the enable_if from the friend declaration and only keep it in the definiton \u2192 <a href=\"https://wandbox.org/permlink/q2D25i5iCLcuRd7u\" rel=\"nofollow noreferrer\">fails to link</a></p></li>\n<li><p>when compiling with clang++ linking succeeds</p></li>\n<li><p>move the function definition into the class declaration (fails in the real world example, because the function is supposed to take various arguments as variadic template, and then i violate the one-definition-rule, having a <code>f(X&lt;int&gt;, X&lt;float&gt;)</code> defined once in the <code>X&lt;int&gt;</code> definition and once in the <code>X&lt;float&gt;</code> definition.</p></li>\n</ul>\n\n<p>is this a g++ (8.2) bug or does clang++ violate the standard, and in the latter case, how do I trigger the code generation for the function?</p>\n"}, {"tags": ["c++", "c", "include", "remote-access", "preprocessor"], "comments": [{"owner": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 1, "creation_date": 1550075544, "post_id": 54675066, "comment_id": 96139590, "body": "I think you have to mount a remote drive somehow instead.  sshfs could work on most linux machins and some sort of NFS or SAMBA share could work for windows.  Then you would set your INCLUDE_PATH directive to point to the shared drive."}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 21142, "user_id": 20712, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/dUQnr.png?s=128&g=1", "display_name": "Ross Rogers", "link": "https://stackoverflow.com/users/20712/ross-rogers"}, "edited": false, "score": 0, "creation_date": 1550075719, "post_id": 54675066, "comment_id": 96139698, "body": "Downvote kindly review criteria and explain. This is a well-thought-out question. <a href=\"https://stackoverflow.com/help/privileges/vote-down\">stackoverflow.com/help/privileges/vote-down</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550076211, "post_id": 54675066, "comment_id": 96140006, "body": "Why not just use <a href=\"https://git-scm.com\" rel=\"nofollow noreferrer\">git</a>?"}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550076557, "post_id": 54675066, "comment_id": 96140212, "body": "@JesperJuhl git would require each user to clone a repo and have a separate local copy, correct?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550076676, "post_id": 54675066, "comment_id": 96140286, "body": "@kmiklas Yes. But you <i>want</i> version control <i>anyway</i>, so why is that a problem?"}, {"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1550076804, "post_id": 54675066, "comment_id": 96140343, "body": "@JesperJuhl hmmmm....... can you add that as a real answer?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1550077180, "post_id": 54675066, "comment_id": 96140532, "body": "@kmiklas Done.."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 2, "creation_date": 1550077549, "post_id": 54675066, "comment_id": 96140745, "body": "For what it&#39;s worth, what you&#39;re proposing seems to me to fall outside the scope of the C++ language.  It&#39;s really an expansion of how the <i>host</i> system interprets file systems and file names."}], "answers": [{"tags": [], "owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "is_accepted": false, "score": 1, "last_activity_date": 1550075563, "creation_date": 1550075563, "answer_id": 54675132, "question_id": 54675066, "link": "https://stackoverflow.com/questions/54675066/how-to-specify-a-remote-preprocessor-include-path-like-192-0-2-17-usr-include/54675132#54675132", "title": "How to specify a remote preprocessor include path like 192.0.2.17://usr/include", "body": "<p>I'm not aware of any compiler that retrieves include files or libraries remotely, so this is not something you can do directly.</p>\n\n<p>The best you can do is have these dependencies on an NFS share that you can mount and then add that path to your include path.</p>\n"}, {"tags": [], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "is_accepted": false, "score": 1, "last_activity_date": 1550076287, "creation_date": 1550076287, "answer_id": 54675344, "question_id": 54675066, "link": "https://stackoverflow.com/questions/54675066/how-to-specify-a-remote-preprocessor-include-path-like-192-0-2-17-usr-include/54675344#54675344", "title": "How to specify a remote preprocessor include path like 192.0.2.17://usr/include", "body": "<p>I wouldn't put references to this in the code like that, and as dbush said, you'd have to enhance the preprocessor.</p>\n\n<p>But there might be cute ways to do this within the Make system. That is, if you're using Make (for instance), you could add steps to the Makefile that force a refresh of data.</p>\n\n<p>However, I would suggest this is WRONG because it's not just the include files that need to be fresh. If an include has changed, the related code has probably also changed, and you would need those changes, too. Your magic #include stuff isn't going to do a thing to make sure people have the right code / libraries that the includes are for.</p>\n\n<p>I'm not sure why proper use of source code repositories don't already handle this for you.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 2, "last_activity_date": 1550077144, "creation_date": 1550077144, "answer_id": 54675633, "question_id": 54675066, "link": "https://stackoverflow.com/questions/54675066/how-to-specify-a-remote-preprocessor-include-path-like-192-0-2-17-usr-include/54675633#54675633", "title": "How to specify a remote preprocessor include path like 192.0.2.17://usr/include", "body": "<p>Since you want version control <em>anyway</em> you could just use <a href=\"https://git-scm.com\" rel=\"nofollow noreferrer\">git</a> (like thousands of other projects). So each user has a local clone of anything needed.</p>\n\n<p>To answer the original question: No. I'm not aware of any preprocessor supporting such an include scheme.</p>\n"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1550077144, "creation_date": 1550075378, "question_id": 54675066, "link": "https://stackoverflow.com/questions/54675066/how-to-specify-a-remote-preprocessor-include-path-like-192-0-2-17-usr-include", "title": "How to specify a remote preprocessor include path like 192.0.2.17://usr/include", "body": "<p>Is it possible to specify a C/C++ include path to a remote preprocessor server?</p>\n\n<p>The point here is to have once central location for header files. This makes upgrades, version consistency, and a host of other things much better than people running all willy-nilly including different versions of things.</p>\n\n<p><strong>Minimal, Complete, and Verifiable Example</strong></p>\n\n<p>Typical include. On Linux, would default to <code>/usr/include/</code> or the like; in Windows VS, to a location specified in the <code>$(IncludePath)</code> variable.</p>\n\n<pre><code>#include &lt;iostream&gt;\nint main() {\n    std::cout &lt;&lt; \"hello, world\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Now imagine that we set our include path as follows:</p>\n\n<pre><code>C_INCLUDE_PATH=192.0.2.17://usr/include;/usr/include;\n</code></pre>\n\n<p>The above would first check the remote server at 192.0.2.17 to see if the <code>iostream</code> library existed. Failing this, <code>/usr/include</code> would be checked.</p>\n\n<p>This is a bit of a stretch to illustrate the point:</p>\n\n<pre><code>#include &lt;192.0.2.17://iostream&gt;\n\nint main() {\n\n    std::cout &lt;&lt; \"hello, world\" &lt;&lt; std::endl;\n\n}\n</code></pre>\n\n<p>Thanks, Keith :^)</p>\n"}, {"tags": ["c++", "googletest"], "comments": [{"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 1, "creation_date": 1550075405, "post_id": 54675027, "comment_id": 96139497, "body": "Try another order."}, {"owner": {"reputation": 306, "user_id": 8576325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0af7caf735d56084cf3d409f98dfd538?s=128&d=identicon&r=PG&f=1", "display_name": "\u0418\u0433\u043e\u0440\u044c \u041f\u0443\u0433\u0430\u0447\u0435\u0432", "link": "https://stackoverflow.com/users/8576325/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%9f%d1%83%d0%b3%d0%b0%d1%87%d0%b5%d0%b2"}, "reply_to_user": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1550075516, "post_id": 54675027, "comment_id": 96139570, "body": "Same, not working"}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 0, "creation_date": 1550075589, "post_id": 54675027, "comment_id": 96139615, "body": "Why not just <code>EXPECT_TRUE(ptr);</code>?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1550075613, "post_id": 54675027, "comment_id": 96139632, "body": "An editorial note: Error messages that contain the <code>&gt;</code> character render <i>horribly</i> when you put them in blockquotes. Better indent 4 spaces and render as code. I&#39;d edit myself, but the mobile UI makes this tricky."}, {"owner": {"reputation": 6913, "user_id": 4468078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BriNN.png?s=128&g=1", "display_name": "R Yoda", "link": "https://stackoverflow.com/users/4468078/r-yoda"}, "edited": false, "score": 0, "creation_date": 1550075631, "post_id": 54675027, "comment_id": 96139643, "body": "<a href=\"https://github.com/google/googletest/blob/master/googletest/docs/primer.md\" rel=\"nofollow noreferrer\">github.com/google/googletest/blob/master/googletest/docs/&hellip;</a> -&gt; search for <code>EXPECT_NE</code> and read the first paragraphs for some background"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1550075765, "post_id": 54675027, "comment_id": 96139729, "body": "Are you applying <code>using namespace std;</code> somewhere?"}, {"owner": {"reputation": 306, "user_id": 8576325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0af7caf735d56084cf3d409f98dfd538?s=128&d=identicon&r=PG&f=1", "display_name": "\u0418\u0433\u043e\u0440\u044c \u041f\u0443\u0433\u0430\u0447\u0435\u0432", "link": "https://stackoverflow.com/users/8576325/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%9f%d1%83%d0%b3%d0%b0%d1%87%d0%b5%d0%b2"}, "edited": false, "score": 2, "creation_date": 1550075953, "post_id": 54675027, "comment_id": 96139855, "body": "<code>EXPECT_TRUE(ptr);</code> works. Thank you!"}, {"owner": {"reputation": 6913, "user_id": 4468078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BriNN.png?s=128&g=1", "display_name": "R Yoda", "link": "https://stackoverflow.com/users/4468078/r-yoda"}, "edited": false, "score": 0, "creation_date": 1550076121, "post_id": 54675027, "comment_id": 96139955, "body": "<a href=\"https://github.com/google/googletest/blob/master/googletest/docs/faq.md#why-does-googletest-support-expect_eqnull-ptr-and-assert_eqnull-ptr-but-not-expect_nenull-ptr-and-assert_nenull-ptr\" rel=\"nofollow noreferrer\">github.com/google/googletest/blob/master/googletest/docs/&hellip;</a>"}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1550117653, "post_id": 54675027, "comment_id": 96154881, "body": "To put it simply, that&#39;s how C++ is. New features are added continuously (like <code>nullptr</code>), and they interact with the old with the old features... in an unpredictable way."}], "answers": [{"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1613062430, "last_edit_date": 1613062430, "creation_date": 1550075956, "answer_id": 54675257, "question_id": 54675027, "link": "https://stackoverflow.com/questions/54675027/compare-ptr-with-nullptr-in-gtest/54675257#54675257", "title": "Compare ptr with nullptr in gtest", "body": "<pre><code>namespace {\n  template&lt;class T&gt;\n  auto not_nullptr(T*p) -&gt; testing::AssertionResult\n  {\n    if (p)\n      return testing::AssertionSuccess();\n    else\n      return testing::AssertionFailure() &lt;&lt; &quot;pointer is null&quot;;\n  }\n}\n\n...\n\nEXPECT_TRUE(not_nullptr(ptr));\n</code></pre>\n<p>reference:</p>\n<p><a href=\"https://github.com/google/googletest/blob/master/docs/advanced.md#using-a-function-that-returns-an-assertionresult\" rel=\"nofollow noreferrer\">https://github.com/google/googletest/blob/master/docs/advanced.md#using-a-function-that-returns-an-assertionresult</a></p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550080723, "post_id": 54675676, "comment_id": 96142457, "body": "You might have <code>operator &lt;&lt;</code> for <code>NullPtr</code> (or the <code>PrintTo</code> overload)."}], "tags": [], "owner": {"reputation": 5258, "user_id": 1274747, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7a2942e1483b9befa80a61cb98bce39d?s=128&d=identicon&r=PG", "display_name": "axalis", "link": "https://stackoverflow.com/users/1274747/axalis"}, "is_accepted": true, "score": 7, "last_activity_date": 1550077253, "creation_date": 1550077253, "answer_id": 54675676, "question_id": 54675027, "link": "https://stackoverflow.com/questions/54675027/compare-ptr-with-nullptr-in-gtest/54675676#54675676", "title": "Compare ptr with nullptr in gtest", "body": "<p>If you want to be more explicit, you could also use</p>\n\n<pre><code>EXPECT_TRUE(ptr != nullptr);\n</code></pre>\n\n<p>(that's what I normally do)</p>\n\n<p>Btw. funnily enough, in my work project I still have to work with C++98 (still building for Sun and AIX, although it will soon go away) and I ended up creating my own <code>NullPtrT</code> class and <code>NullPtr</code> object in the common library, which actually works with gtest <code>EXPECT_EQ</code> and <code>EXPECT_NE</code> macros. So that I can do</p>\n\n<pre><code>EXPECT_NE(NullPtr, ptr);\n</code></pre>\n\n<p>I don't remember how exactly I made that work :)</p>\n"}, {"tags": [], "owner": {"reputation": 936, "user_id": 3736861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/05b0bc55c4c8033f0da844f66b9f22cb?s=128&d=identicon&r=PG&f=1", "display_name": "Dreamer", "link": "https://stackoverflow.com/users/3736861/dreamer"}, "is_accepted": false, "score": 4, "last_activity_date": 1579181088, "last_edit_date": 1579181088, "creation_date": 1579165482, "answer_id": 59766146, "question_id": 54675027, "link": "https://stackoverflow.com/questions/54675027/compare-ptr-with-nullptr-in-gtest/59766146#59766146", "title": "Compare ptr with nullptr in gtest", "body": "<p>I've run into the same problem recently with GTest 1.8.0, but only when using Visual Studio 2019 in C++17 mode. Visual Studio 2019 works fine in C++14 mode, and neither Clang nor GCC seem to have the same problem in C++17 mode.</p>\n\n<p>The issue is that with C++17 there's a new overload in the standard library for the <code>std::ostream::operator&lt;&lt;</code> that takes a <code>nullptr_t</code>, but GTest also provides its own, so your compiler does not know which one to use.</p>\n\n<p>If you have full control over your version of GTest then <a href=\"https://github.com/google/googletest/pull/1620/commits/f66ab00704cd47e4e63ef6d425ca14b9192aaebb\" rel=\"nofollow noreferrer\">https://github.com/google/googletest/pull/1620/commits/f66ab00704cd47e4e63ef6d425ca14b9192aaebb</a> is a change for GTest-1.8.0 that resolves the issue: It's not as easy as deleting the overload, because the function in question is a template whose other instantiations are still used. Instead, the solution is to define an explicit <code>void PrintTo(std::nullptr_t, ::std::ostream* os)</code> function that will then automatically be used, no longer deferring to the ambiguous overloads.</p>\n\n<p>When modifying GTest is not an option then the solutions mentioned in the other answers to not use <code>EXPECT_EQ</code>/<code>EXPECT_NE</code> when one parameter is a <code>nullptr_t</code> are your best bet.</p>\n"}], "owner": {"reputation": 306, "user_id": 8576325, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0af7caf735d56084cf3d409f98dfd538?s=128&d=identicon&r=PG&f=1", "display_name": "\u0418\u0433\u043e\u0440\u044c \u041f\u0443\u0433\u0430\u0447\u0435\u0432", "link": "https://stackoverflow.com/users/8576325/%d0%98%d0%b3%d0%be%d1%80%d1%8c-%d0%9f%d1%83%d0%b3%d0%b0%d1%87%d0%b5%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8430, "favorite_count": 1, "accepted_answer_id": 54675676, "answer_count": 3, "score": 7, "last_activity_date": 1613062430, "creation_date": 1550075262, "last_edit_date": 1550075703, "question_id": 54675027, "link": "https://stackoverflow.com/questions/54675027/compare-ptr-with-nullptr-in-gtest", "title": "Compare ptr with nullptr in gtest", "body": "<p>Have some code:</p>\n\n<pre><code>EXPECT_NE(nullptr,ptr);\n</code></pre>\n\n<p>And I get the following compilation error:</p>\n\n<pre><code>'operator &lt;&lt;' is ambiguous\n\ncould be 'std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt;::operator &lt;&lt;&lt;void&gt;(std::nullptr_t)'\nor       'std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;testing::internal2::operator &lt;&lt;&lt;char,std::char_traits&lt;char&gt;,T&gt;(std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;,const T &amp;)'\n</code></pre>\n\n<p>Could this be a library version problem?</p>\n"}, {"tags": ["c++", "language-lawyer", "c++17", "standards", "one-definition-rule"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550075635, "post_id": 54674972, "comment_id": 96139644, "body": "Looks to be explained in the top answer here: <a href=\"https://stackoverflow.com/questions/23491781/when-is-a-variable-odr-used-in-c14\" title=\"when is a variable odr used in c14\">stackoverflow.com/questions/23491781/&hellip;</a>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 2, "creation_date": 1550075825, "post_id": 54674972, "comment_id": 96139764, "body": "Applying the lvalue-to-rvalue conversion to <code>S::x</code> yields a constant expression, so <code>S::x</code> is not odr-used per <code>[basic.def.odr]&#47;4</code> and <code>[expr.const]&#47;2.7</code>."}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1550075867, "post_id": 54674972, "comment_id": 96139793, "body": "I could copy/paste my deleted answer of the linked question here tbh."}, {"owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550076239, "post_id": 54674972, "comment_id": 96140025, "body": "@NathanOliver Oh, I see. I would not have found that earlier answer if you did not point me toward it. In view of the earlier answer, the example I quoted revealed no major concept but merely illustrated a minor point regarding <code>static const</code> data members. Thus, I was worried about nothing. Thank you for the link."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1550076894, "post_id": 54674972, "comment_id": 96140389, "body": "Note that the technical term being used in the explication of that code is &quot;odr-used&quot;, not &quot;odr&quot;. &quot;odr-used&quot; means used in a way that triggers the application of the odr."}], "owner": {"reputation": 11771, "user_id": 1275653, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cb781e5bd49c5d403228b98859d8b6dd?s=128&d=identicon&r=PG", "display_name": "thb", "link": "https://stackoverflow.com/users/1275653/thb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "closed_date": 1550075688, "answer_count": 0, "score": 1, "last_activity_date": 1550075125, "creation_date": 1550075125, "question_id": 54674972, "link": "https://stackoverflow.com/questions/54674972/is-the-standards-odr-example-correct", "closed_reason": "Duplicate", "title": "Is the standard&#39;s ODR example correct?", "body": "<p>Before you answer, observe that <a href=\"https://stackoverflow.com/q/47952024/1275653\">another question</a> is closely related.</p>\n\n<p>The C++17 standard (draft <a href=\"http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2017/n4659.pdf\" rel=\"nofollow noreferrer\">here</a>), sect. 6.2(2.8), gives the following example:</p>\n\n<pre><code>struct S { static const int x = 0; };\nconst int &amp;f(const int &amp;r);\nint n = b ? (1, S::x) // S::x is not odr-used here\n          : f(S::x);  // S::x is odr-used here, so a definition is required\n</code></pre>\n\n<p>The example's \"odr\" means, \"one-definition rule,\" but the example's comment, <strong>\"S::x is not odr-used here,\"</strong> looks like nonsense to me. Is it?</p>\n\n<p>I am no language lawyer but, unfortunately, the comment conveys no plausible or approximate idea to me. This suggests that I am missing a concept.</p>\n\n<p>On the other hand, a 1600-page document like the C++17 standard can make some mistakes. I do not criticize but merely wish to ensure that I have understood.</p>\n\n<p>Is the comment nonsense or does it mean something sensible? How or why, please?</p>\n"}, {"tags": ["c++", "multithreading", "x86", "atomic", "memory-alignment"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1550075209, "post_id": 54674922, "comment_id": 96139370, "body": "with <code>std::atomic</code> and specify target architecture, compiler might do the optimization by itself. So your code would be portable. let compiler job to compiler."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1550077408, "post_id": 54674922, "comment_id": 96140659, "body": "Have you found any &quot;unnecessary overhead&quot; caused by the use of <code>std::atomic</code>?"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550078649, "post_id": 54674922, "comment_id": 96141317, "body": "Using <code>std::atomic</code> with <code>memory_order_relaxed</code> won&#39;t have any overhead at all for pure loads and pure stores (and will ensure correct alignment for 64-bit values even in 32-bit code, where <code>alignof(int64_t)=4</code> on Linux), but it will interfere with auto-vectorization.  (Avoid using any atomic RMW operations, of course).  If you care about performance, consider using a newer compiler, like gcc7 or gcc8.  There have been various improvements since 4.8."}, {"owner": {"reputation": 325, "user_id": 1515248, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/299a9a6035681184ad5568368c4edd88?s=128&d=identicon&r=PG", "display_name": "rdil2503", "link": "https://stackoverflow.com/users/1515248/rdil2503"}, "edited": false, "score": 0, "creation_date": 1550079321, "post_id": 54674922, "comment_id": 96141690, "body": "Thanks for your comments. I compared the assemblies generated with an atomic store (memory_relaxed and target specified) and a normal assignment. They look a bit different. I see two more instructions: movabsq and movq. I can&#39;t say though if they have any impact on performance. I should also definitely try out the newer g++. Thanks."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1551108195, "post_id": 54674922, "comment_id": 96509296, "body": "If you want to program &quot;to the metal&quot; using the Intel spec, are you going to use inline assembly?"}, {"owner": {"reputation": 325, "user_id": 1515248, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/299a9a6035681184ad5568368c4edd88?s=128&d=identicon&r=PG", "display_name": "rdil2503", "link": "https://stackoverflow.com/users/1515248/rdil2503"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1551197396, "post_id": 54674922, "comment_id": 96548439, "body": "@curiousguy No it&#39;s not my intention to use assembly. Are you implying that, unless a developer doesn&#39;t inline assembly, it&#39;s not a good idea to program &quot;to the metal&quot;?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1551214456, "post_id": 54674922, "comment_id": 96556985, "body": "If you don&#39;t use assembly, you are programming in C/C++ not to the metal."}], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 1515248, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/299a9a6035681184ad5568368c4edd88?s=128&d=identicon&r=PG", "display_name": "rdil2503", "link": "https://stackoverflow.com/users/1515248/rdil2503"}, "edited": false, "score": 0, "creation_date": 1550078587, "post_id": 54675786, "comment_id": 96141291, "body": "Thanks for your answer. If I understood the re-order correct, it is not really an issue for my situation. If the latency threads execute the a,b,c assignment in a different order than I wrote it&#39;s okay. It is also okay if the GUI shows b and c updated while a is not. It is also okay that the Gui doesn&#39;t show the very latest value for the variables. But I get your concerns. Without atomic It&#39;s not a well-defined behavior. Thanks."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1550078889, "post_id": 54675786, "comment_id": 96141464, "body": "Your 2nd paragraph describes the right C++ symptom, but it&#39;s not cache that causes the issue.  Multi-CPU systems use coherent caches, so anything that&#39;s stored to memory is visible by other cores as soon as it commits to your own L1d cache. (And <code>std::atomic</code> default to <code>mo_seq_cst</code>, which also block StoreLoad reordering.)  The issue is that data-race UB allows compilers to optimize non-atomic variables into registers.  e.g. <code>while(!val){}</code> compiles to asm like  <code>if(!val) infinite_loop();</code> <a href=\"//electronics.stackexchange.com/a/387478\">MCU programming - C++ O2 optimization breaks while loop</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1550080673, "post_id": 54675786, "comment_id": 96142435, "body": "@MCU -- <b>SOME</b> Multi-CPU systems use coherent caches. Some don&#39;t."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 2, "creation_date": 1550134620, "post_id": 54675786, "comment_id": 96161092, "body": "Can you point to an example of a real multi-core system that can actually run multiple C++ threads of the same process across non-coherent shared memory domains, requiring explicit flushes of everything in any mutex unlock or release-store?  Also note that this was tagged <code>[intel]</code> (corrected to <code>[x86]</code>), and all x86 systems are cache-coherent.  If you built a non-coherent x86-like system using x86 CPUs, you&#39;d need a special compiler for it because it wouldn&#39;t follow the x86 memory model.  See also <a href=\"//stackoverflow.com/a/54653446\">Is mov + mfence safe on NUMA?</a>"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1550134803, "post_id": 54675786, "comment_id": 96161185, "body": "The C++11 memory model assumes cache coherency, because a release store synchronizing with an acquire load makes it ok to read <i>any</i> non-atomic data that was written before the release store.  So if explicit flushes are needed, everything that could possibly be part of a sychronizes-with relationship needs to do explicit flushes / syncs on <i>all</i> memory.  Or more likely the implementation would add functions to sync certain addresses or ranges of addresses, because syncing everything would defeat half the purpose of non-coherent caches.."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 0, "last_activity_date": 1550077583, "creation_date": 1550077583, "answer_id": 54675786, "question_id": 54674922, "link": "https://stackoverflow.com/questions/54674922/guaranteed-atomic-operations-on-pod-types-naturally-aligned-on-intel/54675786#54675786", "title": "Guaranteed Atomic Operations on POD types naturally aligned on Intel", "body": "<p>Reading a value \"taken halfway during the write\" is only one aspect of atomicity.</p>\n\n<p>Processors these days keep values in processor-specific caches, so on a multi-processor system, two different processors may well have different values for the <code>a</code> that they share. Marking <code>a</code> as atomic ensures that different processors see \"the same\" value.</p>\n\n<p>In addition, the compiler and the processor often reorder calculations in order to make better use of processing facilities. That's all okay, so long as the <strong>result</strong> of those calculations isn't changed. (That's the \"as if\" rule in C++). But \"isn't changed\" refers to execution within a single thread. Optimizations that work in a single thread don't necessarily work when multiple threads are pounding on the same object. And you don't, in general, want your single-threaded code to be compiled by a paranoid compiler that doesn't do common optimizations because they might break multi-threaded code. Instead, marking an object as atomic says that the compiler should be very careful about what things it moves around, because that object's value can be changed behind the scenes by some other code.</p>\n\n<p>So you have a choice: hand-roll your code and hope that you get it right, or accept that the writer of the <code>atomic</code> library probably knows more about atomicity on your target system that you do, and will probably do a better job.</p>\n"}], "owner": {"reputation": 325, "user_id": 1515248, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/299a9a6035681184ad5568368c4edd88?s=128&d=identicon&r=PG", "display_name": "rdil2503", "link": "https://stackoverflow.com/users/1515248/rdil2503"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 54675786, "answer_count": 1, "score": 0, "last_activity_date": 1550134394, "creation_date": 1550074991, "last_edit_date": 1550134394, "question_id": 54674922, "link": "https://stackoverflow.com/questions/54674922/guaranteed-atomic-operations-on-pod-types-naturally-aligned-on-intel", "title": "Guaranteed Atomic Operations on POD types naturally aligned on Intel", "body": "<p>I have a C++ multi-thread applications running on\u00a0Intel Xeon 32 cores, compiled with GCC 4.8.2 with optimizations enabled.</p>\n\n<p>I have multiple threads (say A,B,C)\u00a0that update\u00a0some POD types, and another thread D\u00a0that every K seconds reads those variables and send it to a GUI. The threads are spawn across multiple cores and sockets. The writes are protected by a spin-lock.\u00a0Thread\u00a0A,B,C are\u00a0latency sensitive\u00a0where high performance is a critical aspect. Thread D is not latency sensitive.</p>\n\n<p>Something like:</p>\n\n<pre><code>Thread A,B,C\n...\n// a,b,c are up to 64 bits (let's say double)\nspin-lock\na = computeValue();\nb = computeValue();\nc = computeValue();\nspin-unlock\n....\n\nThread D\n...\n// a,b,c are up to 64 bits (let's say double)\ncurrValueA = a;\ncurrValueB = b;\ncurrValueC = c;\nsendToGui(currValueA ,currValueB ,currValueC );\n....\n</code></pre>\n\n<p>I want to take advantage of\u00a0Paragraph 8.1.1\u00a0<a href=\"https://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.html\" rel=\"nofollow noreferrer\">https://www.intel.com/content/www/us/en/architecture-and-technology/64-ia-32-architectures-software-developer-vol-3a-part-1-manual.html</a>, about guaranteed atomic operations, and avoid to put a lock protecting the reads made by thread D.</p>\n\n<p>My understanding is that if a,b,c are naturally aligned (with a size no bigger that 64 bits) there is no risk that Thread D could read a value for a,b,c that is\u00a0taken\u00a0halfway during the write. In other words the writes and reads will be carried out atomically.\u00a0The thread D will read either the old value or the new.</p>\n\n<p>Is my understanding correct?</p>\n\n<p>I left to the compiler GCC 4.8.2 to take care of the alignment, i.e. I don't use any gcc built-in directives or functions like std::alignas, sts::alignof, etc.</p>\n\n<p>I am aware that the code is not portable.\nI would prefer not to use std::atomic to avoid any unnecessary overhead. </p>\n"}, {"tags": ["c++", "c", "linux", "perf", "intel-pmu"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550074644, "post_id": 54674710, "comment_id": 96138985, "body": "That&#39;s what perf does. Where is the issue? Yes 100 millions is too much, just make it smaller."}, {"owner": {"reputation": 11, "user_id": 3591871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5041ad33e7953e285ff10904281b80?s=128&d=identicon&r=PG&f=1", "display_name": "user3591871", "link": "https://stackoverflow.com/users/3591871/user3591871"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550075527, "post_id": 54674710, "comment_id": 96139577, "body": "So a program is running, which may have 1000 billions instructions. But I want that after every 100 million instructions, the number of cpu cycles passed to execute that 100 million instructions be recorded in a file. This is the problem."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550075664, "post_id": 54674710, "comment_id": 96139658, "body": "Don&#39;t use 100 million, use less. Any internal hardware counter could have overflown, especially the cycle one. That&#39;s why profilers use far less increments, usually lower than 1 million. And they are low overhead."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550147427, "post_id": 54674710, "comment_id": 96168393, "body": "You can use <code>perf record -e instructions:u -c 100000000</code> to capture a sample every 100M instructions. Then you can see the timestamps using <code>perf script -F time</code>, but they are in microseconds, not cycles. @MatthieuBrucher"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550153811, "post_id": 54674710, "comment_id": 96172282, "body": "Well, you can specify what hardware counter to save as well, so you can get cycles."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550157101, "post_id": 54674710, "comment_id": 96174555, "body": "@MatthieuBrucher How to do that exactly?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550157245, "post_id": 54674710, "comment_id": 96174653, "body": "You add <code>cycles</code> to the <code>-e</code> argument. Then maybe perf is not the best, I&#39;m more used to PAPI which can use several counters at the same time, but still uses perf underneath."}, {"owner": {"reputation": 18599, "user_id": 4230618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KRWgI.jpg?s=128&g=1", "display_name": "Hadi Brais", "link": "https://stackoverflow.com/users/4230618/hadi-brais"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550159649, "post_id": 54674710, "comment_id": 96176121, "body": "@MatthieuBrucher But then if you add both <code>instructions</code> and <code>cycles</code> to the -e argument, the threshold specified to the -c argument would apply to both counters I think, not just the instruction counter. The OP is asking how to set a threshold on the instructions counter but also include the cycles counter in every sample (when the number of instructions reaches 100M)."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 2, "creation_date": 1550764778, "post_id": 54674710, "comment_id": 96399283, "body": "Does <a href=\"https://stackoverflow.com/q/54781746/620382\">stackoverflow.com/q/54781746/620382</a> (In your case <code>perf record -c 100000000 -e &#39;{instructions,cycles}:S&#39;</code>) work for you? Then I would suggest to close as duplicate."}], "owner": {"reputation": 11, "user_id": 3591871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5041ad33e7953e285ff10904281b80?s=128&d=identicon&r=PG&f=1", "display_name": "user3591871", "link": "https://stackoverflow.com/users/3591871/user3591871"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1550135126, "creation_date": 1550074411, "last_edit_date": 1550135126, "question_id": 54674710, "link": "https://stackoverflow.com/questions/54674710/using-pebs-and-linux-perf-to-count-the-number-of-cpu-cycles-passed-to-execute-x", "title": "Using PEBS and Linux Perf to Count the number of CPU cycles passed to execute X number of instructions", "body": "<p>I want to do something like this: After 100 million instructions have passed, query the Linux perf HW CPU cycles and record it in a file. I want to use this code to characterize the performance of applications/benchmark programs during different phases of program execution. </p>\n\n<p>I have a hint that I need to setup Intel PEBS which overflows after 100 million instructions have passed and query the linux perf counters HW cpu cycles counter. </p>\n\n<p>Any pointer on where to start and if someone has already done that. I want to do this in a low overhead manner. I will write the code in C/C++. </p>\n\n<p>Regards...</p>\n"}, {"tags": ["c++", "qt", "static-libraries", "qmake", "static-linking"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 1, "creation_date": 1550074464, "post_id": 54674618, "comment_id": 96138872, "body": "Is there a reason you are using the static runtime libarary? You can&#39;t generally mix code compiled with different runtime libraries. There is no need to compile against the static runtime library in order to create a static library."}, {"owner": {"reputation": 1739, "user_id": 1219052, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2LXbb.png?s=128&g=1", "display_name": "Jimson Kannanthara James", "link": "https://stackoverflow.com/users/1219052/jimson-kannanthara-james"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550074924, "post_id": 54674618, "comment_id": 96139177, "body": "okay, let me try that. static library with dynamic runtime."}, {"owner": {"reputation": 1739, "user_id": 1219052, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2LXbb.png?s=128&g=1", "display_name": "Jimson Kannanthara James", "link": "https://stackoverflow.com/users/1219052/jimson-kannanthara-james"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550075545, "post_id": 54674618, "comment_id": 96139591, "body": "well, that worked half way, seems there are some problems with the library. unresolved external symbol &quot;__declspec(dllimport) public: virtual __thiscall xercesc_3_1::Wrapper4InputSource::~Wrapper4InputSource(void)&zwnj;&#8203;&quot; Same for both for ctor and dtor. Any idea?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550075705, "post_id": 54674618, "comment_id": 96139690, "body": "does this help <a href=\"https://codesynthesis.com/pipermail/xsd-users/2013-December/004161.html\" rel=\"nofollow noreferrer\">codesynthesis.com/pipermail/xsd-users/2013-December/004161.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 1739, "user_id": 1219052, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2LXbb.png?s=128&g=1", "display_name": "Jimson Kannanthara James", "link": "https://stackoverflow.com/users/1219052/jimson-kannanthara-james"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550076499, "post_id": 54674618, "comment_id": 96140184, "body": "i can see that defined in the pre-processor for static-debug/static-release."}, {"owner": {"reputation": 1739, "user_id": 1219052, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2LXbb.png?s=128&g=1", "display_name": "Jimson Kannanthara James", "link": "https://stackoverflow.com/users/1219052/jimson-kannanthara-james"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550076824, "post_id": 54674618, "comment_id": 96140357, "body": "to ensure that, i just removed the pre-processor from the hpp file, and made it like <code>class Wrapper4InputSource: public DOMLSInput</code> It looks like the cpp file never got compiled into the library!"}], "owner": {"reputation": 1739, "user_id": 1219052, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/2LXbb.png?s=128&g=1", "display_name": "Jimson Kannanthara James", "link": "https://stackoverflow.com/users/1219052/jimson-kannanthara-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 685, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550074554, "creation_date": 1550074190, "last_edit_date": 1550074554, "question_id": 54674618, "link": "https://stackoverflow.com/questions/54674618/mtd-vs-mdd-static-linking-win32-library-in-qt-creator", "title": "MTd Vs MDd - Static linking win32 library in QT Creator", "body": "<p>I have a static library built with Visual Studio as a static library (built with Run Time Librbary:Multi-threaded Debug (/MTd)). But when I am using it in my QT project, it says mismatch. </p>\n\n<pre><code>xerces-c_static_3d.lib(XMLString.obj):-1: error: LNK2038: mismatch detected for 'RuntimeLibrary': value 'MTd_StaticDebug' doesn't match value 'MDd_DynamicDebug' in helloworld.obj\n</code></pre>\n\n<p>Relevant <code>Makefile.Debug</code> is shown below, as you can see, QT Creator created CFLAGS and CXXFLAGS with <code>-MDd</code>. Which obviously created the mismatch.</p>\n\n<pre><code>CC            = cl\nCXX           = cl\nDEFINES       = -DUNICODE -DWIN32 -DQT_DEPRECATED_WARNINGS -DQT_QML_DEBUG -DQT_CORE_LIB\nCFLAGS        = -nologo -Zc:wchar_t -FS -Zc:strictStrings -Zi -MDd -W3 -w44456 -w44457 -w44458 /Fddebug\\testbed.vc.pdb $(DEFINES)\nCXXFLAGS      = -nologo -Zc:wchar_t -FS -Zc:rvalueCast -Zc:inline -Zc:strictStrings -Zc:throwingNew -Zi -MDd -W3 -w34100 -w34189 -w44996 -w44456 -w44457 -w44458 -wd4577 -wd4467 -EHsc /Fddebug\\testbed.vc.pdb $(DEFINES)\nINCPATH       = -I..\\testbed -I. -I..\\testbed\\libxsd -I..\\..\\..\\..\\Qt\\5.9\\msvc2015\\include -I..\\..\\..\\..\\Qt\\5.9\\msvc2015\\include\\QtCore -Idebug -I..\\..\\..\\..\\Qt\\5.9\\msvc2015\\mkspecs\\win32-msvc \nLINKER        = link\nLFLAGS        = /NOLOGO /DYNAMICBASE /NXCOMPAT /DEBUG /SUBSYSTEM:CONSOLE \"/MANIFESTDEPENDENCY:type='win32' name='Microsoft.Windows.Common-Controls' version='6.0.0.0' publicKeyToken='6595b64144ccf1df' language='*' processorArchitecture='*'\"\nLIBS          = C:\\Users\\intellitix\\Documents\\testbed\\libxsd\\lib\\xerces-c_static_3d.lib /LIBPATH:C:\\Qt\\5.9\\msvc2015\\lib C:\\Qt\\5.9\\msvc2015\\lib\\Qt5Cored.lib \nQMAKE         = C:\\Qt\\5.9\\msvc2015\\bin\\qmake.exe\n</code></pre>\n\n<p>Excerpt from <code>testbed.pro</code>\nAs you can see the library is full path NOT the CMAKE style with -L and -l (which makes problems when linking win32 libraries by Visual Studio)</p>\n\n<pre><code>win32:CONFIG(release, debug|release): LIBS += $$PWD/libxsd/lib/xerces-c_static_3.lib\nelse:win32:CONFIG(debug, debug|release): LIBS += $$PWD/libxsd/lib/xerces-c_static_3d.lib\nelse:unix: LIBS += $$PWD/libxsd/lib/xerces-c_static_3.lib\n\nINCLUDEPATH += $$PWD/libxsd\nDEPENDPATH += $$PWD/libxsd\n\nwin32-g++:CONFIG(release, debug|release): PRE_TARGETDEPS += $$PWD/libxsd/lib/libxerces-c_static_3.a\nelse:win32-g++:CONFIG(debug, debug|release): PRE_TARGETDEPS += $$PWD/libxsd/lib/libxerces-c_static_3d.a\nelse:win32:!win32-g++:CONFIG(release, debug|release): PRE_TARGETDEPS += $$PWD/libxsd/lib/xerces-c_static_3.lib\nelse:win32:!win32-g++:CONFIG(debug, debug|release): PRE_TARGETDEPS += $$PWD/libxsd/lib/xerces-c_static_3d.lib\nelse:unix: PRE_TARGETDEPS += $$PWD/libxsd/lib/libxerces-c_static_3.a\n</code></pre>\n\n<p>So my question is, </p>\n\n<p>-Even though the the lib is asked to be linked statically, why QT Creator is complaining it is not compatible with <code>-MDd</code>, which is dynamic linking. (I tried putting the flag in <code>.pro</code> file, but it gets overridden)</p>\n\n<pre><code>QMAKE_CFLAGS += /MTd\nQMAKE_CXXFLAGS += /MTd\n</code></pre>\n\n<p>(<code>cl : Command line warning D9025 : overriding '/MTd' with '/MDd'</code>)</p>\n\n<p>-Tried manually changing <code>CFLAGS</code> and <code>CXXFLAGS</code> in <code>Makefile.Debug</code> but that created even more problems since QMake now tries to link every dependent library statically. Isn't there a way to just static link one library and everything else as dynamic in QT Creator?</p>\n\n<p>Using - \nVS2017,\nQT Creator 4.8,\nQT 5.9,\nmsvc2015 32bit,\nxerces-c-3.1.4</p>\n\n<p>btw, if linked to dynamic libraries (with lib and dll), everything works perfectly.</p>\n"}, {"tags": ["c++", "windbg", "mingw-w64"], "comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550073870, "post_id": 54674317, "comment_id": 96138493, "body": "Doesn&#39;t look like you DLL failed to load, it looks like it crashed in <code>PciTest::main</code>."}, {"owner": {"reputation": 1, "user_id": 11039216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11eceba0d5e20aa0af71ee2119ed188f?s=128&d=identicon&r=PG&f=1", "display_name": "ibrahims", "link": "https://stackoverflow.com/users/11039216/ibrahims"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550075659, "post_id": 54674317, "comment_id": 96139656, "body": "i have added printf in the function main , why i cannot see it ?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550076304, "post_id": 54674317, "comment_id": 96140071, "body": "<code>printf</code> output is buffered, if you want to see the output of a <code>printf</code> immediately add <code>fflush(stdout);</code> afterwards. Also as an experiment I would try removing all the code from <code>PciTest::main</code> (except the printf) and see what happens then."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1550077307, "post_id": 54674317, "comment_id": 96140602, "body": "Take the <code>printf</code> out of <code>DllMain</code>.  There are restrictions on what you can do in a <code>DllMain</code> function, and I don&#39;t think <code>printf</code> is anywhere close to safe to call."}, {"owner": {"reputation": 1, "user_id": 11039216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11eceba0d5e20aa0af71ee2119ed188f?s=128&d=identicon&r=PG&f=1", "display_name": "ibrahims", "link": "https://stackoverflow.com/users/11039216/ibrahims"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550080232, "post_id": 54674317, "comment_id": 96142219, "body": "@john , i have added fflush function after each printf , it still doesnot print anything and crashed at the same place ."}, {"owner": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "edited": false, "score": 1, "creation_date": 1550091697, "post_id": 54674317, "comment_id": 96147567, "body": "sxe ld:YOURDLLNAMEHERE ; on break .reload /f ; bu some function that you are interested in ; g"}, {"owner": {"reputation": 1, "user_id": 11039216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11eceba0d5e20aa0af71ee2119ed188f?s=128&d=identicon&r=PG&f=1", "display_name": "ibrahims", "link": "https://stackoverflow.com/users/11039216/ibrahims"}, "reply_to_user": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "edited": false, "score": 0, "creation_date": 1550093396, "post_id": 54674317, "comment_id": 96148312, "body": "@blabb i am not sure how this help me find out whats is broken , i have added printf in the begin on my exe &amp; main function and  nothing is  printed out ."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550093637, "post_id": 54674317, "comment_id": 96148436, "body": "@ibrahims Did you try removing everything from <code>PciTest::main</code>? If you do that and your program no longer crashes then the problem is in the removed code. If it still crashes then you have another problem. One thing you haven&#39;t mentioned is how you are exporting your methods from the DLL, that&#39;s kind of important, and maybe you made a mistake there."}, {"owner": {"reputation": 7454, "user_id": 3622813, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ndlyo.jpg?s=128&g=1", "display_name": "blabb", "link": "https://stackoverflow.com/users/3622813/blabb"}, "edited": false, "score": 0, "creation_date": 1550094981, "post_id": 54674317, "comment_id": 96149007, "body": "you have tagged it windbg and i have commented how to break on your dll load apart from that i dont have the slightest idea what your code does"}, {"owner": {"reputation": 1134, "user_id": 192042, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bfab0bfded372fe53506ec59ad8e2e3a?s=128&d=identicon&r=PG", "display_name": "Dono", "link": "https://stackoverflow.com/users/192042/dono"}, "edited": false, "score": 0, "creation_date": 1550135718, "post_id": 54674317, "comment_id": 96161634, "body": "@ibrahims The assembly shows that you are trying to deference a null value. Set up your symbols. (If you don&#39;t know how, start with .symfix .) If the DLL is yours, be sure to load have the PDB available. If you have the code, often this will be enough to open a code window highlighting the problem line. Dump the stack. (=k)"}, {"owner": {"reputation": 1, "user_id": 11039216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11eceba0d5e20aa0af71ee2119ed188f?s=128&d=identicon&r=PG&f=1", "display_name": "ibrahims", "link": "https://stackoverflow.com/users/11039216/ibrahims"}, "edited": false, "score": 0, "creation_date": 1550139834, "post_id": 54674317, "comment_id": 96164162, "body": "i have managed to fix the issue , i started by taking small program which only print hello world , seems like the flags i added in my cmake is causing issues , so i started to remove flag by flag and now its running perfect , thank you all"}], "owner": {"reputation": 1, "user_id": 11039216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11eceba0d5e20aa0af71ee2119ed188f?s=128&d=identicon&r=PG&f=1", "display_name": "ibrahims", "link": "https://stackoverflow.com/users/11039216/ibrahims"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550073556, "creation_date": 1550073313, "last_edit_date": 1550073556, "question_id": 54674317, "link": "https://stackoverflow.com/questions/54674317/my-executable-doesnt-start-in-windows-how-to-debug-failed-dll-loading", "title": "My executable doesn&#39;t start in Windows. How to debug failed DLL loading?", "body": "<p>i am have been trying for last week to compile my linux code to windows env , after all my code was compiled ,its been failing to start my executables since it failed on loading my dll it self .</p>\n\n<p>my project is composed of 1 executable called ( pcie_logger) and 1 dll (libpci_test.dll) which are linked to few static libraries in windows , the dll is being loaded dynamically only in startup .</p>\n\n<p><strong>PcieLogger.cpp:</strong></p>\n\n<pre><code>int\nmain(int argc, char* argv[])\n{\nLIB_TRACK2(__PRETTY_FUNCTION__);\nPcieLogger tool;\nprintf(\"Hello World\\n\");\nreturn PciTest::main(tool, argc, argv);\n}\n</code></pre>\n\n<p><strong>PcieLogger.h:</strong></p>\n\n<pre><code>#include \"PciTest.h\"\n\nclass PcieLogger: public PciTool {\npublic:\nPcieLogger(): PciTool(){}\nvirtual ~PcieLogger() = default;\nvirtual u_int32_t   AddParserParams() override;\nu_int32_t           Run() override;\n};\n</code></pre>\n\n<p><strong>PciTest.cpp:</strong></p>\n\n<pre><code> #ifdef _WIN32\nBOOL APIENTRY DllMain( HANDLE hModule,\n                   DWORD ul_reason_for_call,\n                   LPVOID lpReserved\n                   )\n {\nprintf(\"PciTest::DllMain\\n\");\nswitch (ul_reason_for_call) {\ncase DLL_PROCESS_ATTACH:\n    break;\n\ncase DLL_PROCESS_DETACH:\n    // DisconnectFromDriver();\n    break;\n\ncase DLL_THREAD_ATTACH:\ncase DLL_THREAD_DETACH:\n    break;\n}\nreturn TRUE;\n}\n\n#endif\n\n\nint PciTest::main(PciTest&amp; test, int argc, char* argv[]) {\n    printf(\"PciTest::main\\n\");\n    testInstance = &amp;test;\n    int status = 0;\ntry {\n    status = status || test.AddParserParams();\n    status = status || test.ParseArgs(argc, argv);\n    status = status || test.InitResources(argv[0]);\n    status = status || test.Run();\n} catch (exception&amp; e) {\n    test.mainExceptionTagsHandle(e.what());\n    status = 1;\n}\ntest.handleTestFinish(status);\nreturn status;\n}\n</code></pre>\n\n<p><strong>When i'm trying to run windbg on my executable i'm getting the following:</strong></p>\n\n<pre><code>(558.20fc): Access violation - code c0000005 (first chance)\nFirst chance exceptions are reported before any exception handling.\nThis exception may be expected and handled.\n*** ERROR: Symbol file could not be found.  Defaulted to export symbols for \nz:\\compiled\\libpci_test.dll - \nlibpci_test!ZN7PciTest4mainERS_iPPc+0x3c53b:\n00000000`00f6592b 64488b042500000000 mov   rax,qword ptr fs:[0] \nfs:00000000`00000000=????????????????\n0:000&gt; \n</code></pre>\n"}, {"tags": ["c++", "vba", "visio"], "answers": [{"tags": [], "owner": {"reputation": 687, "user_id": 7990528, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gWVHp.png?s=128&g=1", "display_name": "Surrogate", "link": "https://stackoverflow.com/users/7990528/surrogate"}, "is_accepted": false, "score": 0, "last_activity_date": 1550620680, "last_edit_date": 1550620680, "creation_date": 1550138247, "answer_id": 54687625, "question_id": 54674258, "link": "https://stackoverflow.com/questions/54674258/visio-drawline-method-is-not-working-as-i-expect/54687625#54687625", "title": "Visio DrawLine() method is not working as I expect", "body": "<p>Nerea Murua !</p>\n\n<p>Just check documentation about <a href=\"https://docs.microsoft.com/en-us/office/vba/api/Visio.Shape.DrawLine\" rel=\"nofollow noreferrer\">DrawLine method</a> syntax, this method have only 4 parameters.</p>\n\n<pre><code>expression.DrawLine(xBegin, yBegin, xEnd, yEnd)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11057421, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-i2YvbAe03Vs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOvcIjyb_S5KAey1lvgKBZas_u4Eg/mo/photo.jpg?sz=128", "display_name": "Nerea Murua", "link": "https://stackoverflow.com/users/11057421/nerea-murua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1550620680, "creation_date": 1550073149, "last_edit_date": 1550081325, "question_id": 54674258, "link": "https://stackoverflow.com/questions/54674258/visio-drawline-method-is-not-working-as-i-expect", "title": "Visio DrawLine() method is not working as I expect", "body": "<p>Shape.DrawLine Method (Visio) is not working as I expect. It draws the lines where it wants, not in the positions I give. It doesn't matter where it is located the main shape, it always makes the drawings in the same position. Until now I was using Visio 2000 with its SDK, and I didn't have any problem with this function. But now that I have updated to Visio 2016 it is not working as before. What I am doing wrong?</p>\n\n<p>Thanks in advance!</p>\n\n<pre><code>x1 = TO_INCH(pEntidad-&gt;m_datos_entidad.linea.x1);\ny1 = TO_INCH(pEntidad-&gt;m_datos_entidad.linea.y1);\nx2 = TO_INCH(pEntidad-&gt;m_datos_entidad.linea.x2);\ny2 = TO_INCH(pEntidad-&gt;m_datos_entidad.linea.y2);\n\nhr = elSimbolo.DrawLine(x1, y1, x2, y2, laLinea);\n</code></pre>\n\n<p>I'm trying with very basic shapes, for example drawing a rectangle, and I don't get a rectangle</p>\n"}, {"tags": ["c++", "char", "hex"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 5, "creation_date": 1550072645, "post_id": 54674072, "comment_id": 96137773, "body": "<code>char c = a + b;</code>?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1550072671, "post_id": 54674072, "comment_id": 96137787, "body": "Sounds like you may want to be using <code>unsigned char</code>. They can easily represent values from <code>0x00</code> to <code>0xFF</code> and have implicit modulo arithmetic (&quot;dropping off&quot; the largest bits)."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 2, "creation_date": 1550073088, "post_id": 54674072, "comment_id": 96138047, "body": "Just to clarify a misunderstanding you might have, you cannot <i>store</i> hex values in a char. A char is just a small integer. All you can do is print that small integer as hex or decimal or whatever."}], "answers": [{"comments": [{"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550074366, "post_id": 54674291, "comment_id": 96138809, "body": "40 is the correct answer. Obviously 40 is the same number as 0x28. You seem to have a misunderstanding that numbers are stored in hex or decimal. They aren&#39;t, they&#39;re only printed as hex or decimal. You can print an <code>int</code> as hex and you can print a <code>char</code> as decimal if you want."}], "tags": [], "owner": {"reputation": 369, "user_id": 11056439, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g3tlsyx5lws/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhBsyz7HoFGIxxeXVFJsyiV-BZPw/mo/photo.jpg?sz=128", "display_name": "Tryb Ghost", "link": "https://stackoverflow.com/users/11056439/tryb-ghost"}, "is_accepted": true, "score": 1, "last_activity_date": 1550073252, "creation_date": 1550073252, "answer_id": 54674291, "question_id": 54674072, "link": "https://stackoverflow.com/questions/54674072/how-to-add-the-hex-values-of-two-or-more-chars/54674291#54674291", "title": "How to add the hex values of two or more chars?", "body": "<p>Thanks tkausl. It made me realise the answer will be in int type, and I was confused why it gave me 40. </p>\n\n<p>I was looking for char(a+b). </p>\n"}], "owner": {"reputation": 369, "user_id": 11056439, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-g3tlsyx5lws/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQPhBsyz7HoFGIxxeXVFJsyiV-BZPw/mo/photo.jpg?sz=128", "display_name": "Tryb Ghost", "link": "https://stackoverflow.com/users/11056439/tryb-ghost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 54674291, "answer_count": 1, "score": 1, "last_activity_date": 1550073252, "creation_date": 1550072579, "question_id": 54674072, "link": "https://stackoverflow.com/questions/54674072/how-to-add-the-hex-values-of-two-or-more-chars", "title": "How to add the hex values of two or more chars?", "body": "<p>I am storing some hex values inside a char array. I would like to sum these hex values and if it is bigger than 1 byte then it should drop the larger bits.</p>\n\n<p>For example I might declare\nchar a = 0x21;\nchar b = 0x07;</p>\n\n<p>and so I would like to add them to  get a hex value of 0x28 as it should be, which is stored as a char. </p>\n"}, {"tags": ["c++", "syntax"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1550072486, "post_id": 54674001, "comment_id": 96137674, "body": "So you&#39;re copy-pasting all the functions from project to project? Write a library then which you can reuse."}, {"owner": {"reputation": 340, "user_id": 8565862, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-qNTQ6Nlr2wc/AAAAAAAAAAI/AAAAAAAAAGA/041PELy-5xc/photo.jpg?sz=128", "display_name": "Ni Nisan Nijackle", "link": "https://stackoverflow.com/users/8565862/ni-nisan-nijackle"}, "reply_to_user": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 0, "creation_date": 1550072926, "post_id": 54674001, "comment_id": 96137940, "body": "@tkausl I think he is just asking about how to store and remember functions that he wants in his program."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550073287, "post_id": 54674001, "comment_id": 96138157, "body": "Main thing is to have a good place to look up the stuff you can&#39;t remember. I use <a href=\"https://www.cppreference.com/\" rel=\"nofollow noreferrer\">cppreference.com</a> a lot."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550073392, "post_id": 54674001, "comment_id": 96138218, "body": "@Ramo How you build a function library depends on the tools you are using (e.g. what compiler, what linker, what operating system, what IDE etc.)"}, {"owner": {"reputation": 3, "user_id": 7067303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a99a6f430664608c562578495671b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ramo", "link": "https://stackoverflow.com/users/7067303/ramo"}, "edited": false, "score": 0, "creation_date": 1550073548, "post_id": 54674001, "comment_id": 96138308, "body": ". yes, I want some kind of library for all the functions and programs a &quot;function library&quot; and I&#39;am asking for the best way to do this For example (very beginner):                   Print Number Entered by User                                                                                              int main() {         int number;      cout &lt;&lt; &quot;Enter an integer: &quot;;     cin &gt;&gt; number;      cout &lt;&lt; &quot;You entered &quot; &lt;&lt; number;         return 0; }"}, {"owner": {"reputation": 981, "user_id": 949224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a741eae7f225e582c257b948b0ffafb3?s=128&d=identicon&r=PG", "display_name": "dr_g", "link": "https://stackoverflow.com/users/949224/dr-g"}, "edited": false, "score": 0, "creation_date": 1550073781, "post_id": 54674001, "comment_id": 96138442, "body": "You will have seen that your compiler normally creates an executable file. To compile and link C/C++ program into a shared library (&quot;.dll&quot; in Windows, &quot;.so&quot; in Unixes), use -shared compile option of gcc. The next program you write can depend on that library you just created and access its public methods."}, {"owner": {"reputation": 3, "user_id": 7067303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a99a6f430664608c562578495671b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ramo", "link": "https://stackoverflow.com/users/7067303/ramo"}, "edited": false, "score": 0, "creation_date": 1550073832, "post_id": 54674001, "comment_id": 96138464, "body": "I&#39;am using mainly Visual 2017 but I would like to change to some &quot;lean&quot; IDE like Visual Code or Atom. Visual 2017 seems to me a little overpowerd for a beginner like me, for that reason. I&#39;am a college student at an universitary in engineering so the system should be adaptable to Matlab or so :-)"}, {"owner": {"reputation": 3, "user_id": 7067303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a99a6f430664608c562578495671b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ramo", "link": "https://stackoverflow.com/users/7067303/ramo"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550074507, "post_id": 54674001, "comment_id": 96138896, "body": "@john Hey, cppreference.com  seems to be great for my purposes. I definitly bookmarked it and it seems very close to that kind of library I was thinking of! thank you for this! ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7067303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a99a6f430664608c562578495671b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ramo", "link": "https://stackoverflow.com/users/7067303/ramo"}, "edited": false, "score": 0, "creation_date": 1550074722, "post_id": 54674173, "comment_id": 96139037, "body": "I found another great site which exactly is I was looking for with a lot of examples of little functions and programs: <a href=\"https://www.programiz.com/cpp-programming/examples\" rel=\"nofollow noreferrer\">programiz.com/cpp-programming/examples</a>"}, {"owner": {"reputation": 340, "user_id": 8565862, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-qNTQ6Nlr2wc/AAAAAAAAAAI/AAAAAAAAAGA/041PELy-5xc/photo.jpg?sz=128", "display_name": "Ni Nisan Nijackle", "link": "https://stackoverflow.com/users/8565862/ni-nisan-nijackle"}, "reply_to_user": {"reputation": 3, "user_id": 7067303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a99a6f430664608c562578495671b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ramo", "link": "https://stackoverflow.com/users/7067303/ramo"}, "edited": false, "score": 0, "creation_date": 1550087442, "post_id": 54674173, "comment_id": 96145601, "body": "You should probably fix your question then. Essentially what you linked to is learning C++, but you phrased your how to store functions. Also I have no idea how his is the answer if you are asking about best practices for storing functions and using them in other files."}], "tags": [], "owner": {"reputation": 340, "user_id": 8565862, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-qNTQ6Nlr2wc/AAAAAAAAAAI/AAAAAAAAAGA/041PELy-5xc/photo.jpg?sz=128", "display_name": "Ni Nisan Nijackle", "link": "https://stackoverflow.com/users/8565862/ni-nisan-nijackle"}, "is_accepted": false, "score": 0, "last_activity_date": 1550073008, "last_edit_date": 1550073008, "creation_date": 1550072871, "answer_id": 54674173, "question_id": 54674001, "link": "https://stackoverflow.com/questions/54674001/how-to-remember-or-store-functions-and-all-the-other-stuff-in-c-or-code-in-g/54674173#54674173", "title": "How to remember or store functions (and all the other stuff) in C++ or code in general?", "body": "<p>Welcome to StackOverflow!!!</p>\n\n<p>In C++ you generally put all your functions in a header and cpp file to store all the functions. You then go to the main and pick up a reference to the header file. </p>\n\n<pre><code>// A2DD.h\n#ifndef A2DD_H\n#define A2DD_H\n\nnamespace A2DD{\n    int GetSum(int x, int y);\n}\n#endif\n</code></pre>\n\n<p>and the implementation goes in the CPP file:</p>\n\n<pre><code>// A2DD.cpp\n#include \"A2DD.h\"\nint A2DD::GetSum(int x, int y){\n    return x + y;\n}\n</code></pre>\n\n<p>Then go the main.cpp</p>\n\n<pre><code>#include \"A2DD.h\"\n\nint main(){\n    std::cout &lt;&lt; GetSum(2, 2) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>As far as remembering the functions, you can simply take a quick look at the header file which declares the functions (no implementation) </p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 7067303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a99a6f430664608c562578495671b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ramo", "link": "https://stackoverflow.com/users/7067303/ramo"}, "edited": false, "score": 0, "creation_date": 1550077294, "post_id": 54674812, "comment_id": 96140593, "body": "@ Rietty PERFECT, I didn&#39;t know about  gists and JSON but this seems to be the solution I was looking for. good bye archaic .txt library (which was exactly the point why I decided to ask the question) THANK YOU! now back to work but if someone has other methods or ideas, feel free to share:-)"}], "tags": [], "owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "is_accepted": true, "score": 1, "last_activity_date": 1550075447, "last_edit_date": 1550075447, "creation_date": 1550074669, "answer_id": 54674812, "question_id": 54674001, "link": "https://stackoverflow.com/questions/54674001/how-to-remember-or-store-functions-and-all-the-other-stuff-in-c-or-code-in-g/54674812#54674812", "title": "How to remember or store functions (and all the other stuff) in C++ or code in general?", "body": "<p>If I understood your question correctly then you are asking where/how we store reusable snippets of code in an easy to access way. There are number of methods to accomplish this, one which you have mentioned is to simply use a text file and copy paste as needed, but in my opinion this is a bit archaic. </p>\n\n<p>I have two main methods I like to use, first if it's code I want to access online or is rather large functions I plan to reuse, I simply make a <a href=\"https://gist.github.com/\" rel=\"nofollow noreferrer\">gist</a> of it and leave it there, ready to be accessed as needed. Usually I name it something descriptive so when I look through all my gists, I can find the ones I need quickly.</p>\n\n<p>The second method, and the stuff I do for code that mainly gets reused is to make snippets using my IDE's configuration files. Such snippets usually are written in JSON format and include a trigger word, for example: <code>for</code> and then when you hit a special key, typically tab, it will expand the snippet to something like:</p>\n\n<pre><code>for(int i = 0; i &lt; n; i++) {\n    // Code goes here...\n}\n</code></pre>\n\n<p>And we can simply just hit tab to edit the starting condition, the ending condition, the increment and the variable names. Snippets are very versatile and you can write as many as you want. If you use <a href=\"https://code.visualstudio.com/\" rel=\"nofollow noreferrer\">Visual Studio Code</a> you can take a look at the <a href=\"https://github.com/Microsoft/vscode-cpptools\" rel=\"nofollow noreferrer\">C++ tools extension which has some default snippets.</a> </p>\n\n<p><a href=\"https://i.stack.imgur.com/UE16s.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UE16s.gif\" alt=\"Snippet Example\"></a></p>\n\n<p>Lastly I keep a handy bookmark to a <a href=\"https://en.cppreference.com/w/\" rel=\"nofollow noreferrer\">C++ reference site</a> and look up stuff in the STL as needed so I'm not reinventing the wheel or making extra work for myself. </p>\n"}], "owner": {"reputation": 3, "user_id": 7067303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40a99a6f430664608c562578495671b1?s=128&d=identicon&r=PG&f=1", "display_name": "Ramo", "link": "https://stackoverflow.com/users/7067303/ramo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54674812, "answer_count": 2, "score": 0, "last_activity_date": 1550075447, "creation_date": 1550072367, "last_edit_date": 1550072509, "question_id": 54674001, "link": "https://stackoverflow.com/questions/54674001/how-to-remember-or-store-functions-and-all-the-other-stuff-in-c-or-code-in-g", "title": "How to remember or store functions (and all the other stuff) in C++ or code in general?", "body": "<p>I am new to coding and C++ and I am asking myself how to store or structure all these little (sub)functions and code in a proper way?</p>\n\n<p>For example a function to sum up all values of an array or the Fibonacci numbers or all the other little functions and programs which are basic stuff esp. pointers etc.!?\nMy idea is to create an ordinary .txt sheet and to copy and paste them all there in just one .txt</p>\n\n<p>For me it\u00b4s important to have them all at one place. How do you pros handle this or do you guys really have most of this stuff in your local memory (brain). For me it seems impossible to remember all the functions and algorithms or even the syntax (when the code starts to get nasty).</p>\n"}, {"tags": ["c++", "arrays", "function", "pointers", "boolean"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550072422, "post_id": 54673968, "comment_id": 96137637, "body": "What error do you get?"}, {"owner": {"reputation": 716, "user_id": 9956515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9b6291c53932e74aa99f31162ea617?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre-Nicolas Piquin", "link": "https://stackoverflow.com/users/9956515/pierre-nicolas-piquin"}, "edited": false, "score": 2, "creation_date": 1550072450, "post_id": 54673968, "comment_id": 96137658, "body": "You are using the same variable <code>r</code> for your two <code>for</code> loops. Variable that is not used inside the loop scope. Is it on purpose ?"}, {"owner": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "edited": false, "score": 0, "creation_date": 1550072588, "post_id": 54673968, "comment_id": 96137733, "body": "didnt notice it ! and i wasnt able to call the function"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550072695, "post_id": 54673968, "comment_id": 96137807, "body": "And why are you passing a bool in by reference and not reusing it for the output? Bad design!"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1550072711, "post_id": 54673968, "comment_id": 96137817, "body": "You have a typo in <code>for (int r = 0; r &lt; R; r++) {     arr2D_a[R] = new int [C];     arr2D_b[R] = new int [C]; }</code>.  You are using the wrong <code>r</code> for the array index."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550072753, "post_id": 54673968, "comment_id": 96137838, "body": "<code>delete[] arr2D_a[C];</code> -&gt; <code>delete[] arr2D_a[c];</code>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550072802, "post_id": 54673968, "comment_id": 96137862, "body": "@NathanOliver probably the &quot;error&quot; OP mentionned, runtime error and not compile time?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550072809, "post_id": 54673968, "comment_id": 96137869, "body": "Don&#39;t edit your question in a way that invalidate existing answer."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1550072880, "post_id": 54673968, "comment_id": 96137911, "body": "@MatthieuBrucher IDK.  There are so many mistakes/typos it&#39;s hard to know without  knowing what error the OP has."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550072910, "post_id": 54673968, "comment_id": 96137931, "body": "Avoid raw owning pointer, prefer <code>std::vector</code>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550072997, "post_id": 54673968, "comment_id": 96137986, "body": "<code>arr1[r][c]</code> on an <code>int*</code>  doesn&#39;t work, you don&#39;t have 2D pointers here. I think it&#39;s time to go back to your blank sheet, with a good C++ book, and start from scratch."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550073052, "post_id": 54673968, "comment_id": 96138021, "body": "@NathanOliver indeed, compilation would not work because of the 2D indirection on a 1D array, so we are at, what, 4 or 5 mistakes?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1550073098, "post_id": 54673968, "comment_id": 96138053, "body": "Try <code>bool isEqual(int** arr1, int** arr2, bool &amp;eq, int row, int col)</code>"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1550073187, "post_id": 54673968, "comment_id": 96138109, "body": "There&#39;s no need to pass the <code>bool</code> in as a parameter, just declare a local <code>bool</code> in the function and return it."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "edited": false, "score": 0, "creation_date": 1550072769, "post_id": 54674098, "comment_id": 96137846, "body": "even if declared eq in main? as i am passing it as refrence"}, {"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "reply_to_user": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "edited": false, "score": 0, "creation_date": 1550072844, "post_id": 54674098, "comment_id": 96137890, "body": "sry... i did overread this... put its better to declare the return in the function itself. and btw... native c++ types should be passed copy-by-value."}, {"owner": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "edited": false, "score": 0, "creation_date": 1550072906, "post_id": 54674098, "comment_id": 96137927, "body": "what do you mean with native c++ types?"}, {"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "reply_to_user": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "edited": false, "score": 0, "creation_date": 1550072970, "post_id": 54674098, "comment_id": 96137971, "body": "every type you can declare variables with, which come &quot;built in&quot; - like int, bool, float, ..."}, {"owner": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "edited": false, "score": 0, "creation_date": 1550073205, "post_id": 54674098, "comment_id": 96138118, "body": "i get error saying subscripted value is not an array, pointer, or vector?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550073849, "post_id": 54674098, "comment_id": 96138479, "body": "@skratchi.at  not when they are modified in place, that&#39;s the point of OP&#39;s original code. But it was still bad because it mixed two approaches. Then now you need also to update <code>bool result = isEqual(arr2D_a,arr2D_b,R,C);</code> and of course fix all the rest of the mistakes."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550074086, "post_id": 54674098, "comment_id": 96138624, "body": "@MatthieuBrucher ok have to do some research on that. removed the comment as anyhow I confused things a bit, OP seems to use it as out parameter (but at the same time returns it..)"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550074574, "post_id": 54674098, "comment_id": 96138946, "body": "@user463035818 I&#39;m confused by it as well ;)"}, {"owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1550075924, "post_id": 54674098, "comment_id": 96139834, "body": "It compiles in VS, but not in other compilers, clang and gcc give all kind of errors :( I get this error: <code>error: invalid conversion from \u2018int**\u2019 to \u2018const int**\u2019 [-fpermissive]      bool result = isEqual(arr2D_a, arr2D_b, R, C);</code>"}, {"owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1550078451, "post_id": 54674098, "comment_id": 96141211, "body": "You cannot pass unknown size array as constant. So your problem is not <code>* arr[]</code> or <code>**arr[]</code> it is <code>const</code> that is an issue."}, {"owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 1, "creation_date": 1550081553, "post_id": 54674098, "comment_id": 96142824, "body": "@skratchi.at good job :). try entering 55 as input for <code>C</code>. you have to fix <code>segfault</code> as well and you answer is perfect!!!! Then I can delete mine"}], "tags": [], "owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "is_accepted": true, "score": 5, "last_activity_date": 1550129764, "last_edit_date": 1550129764, "creation_date": 1550072635, "answer_id": 54674098, "question_id": 54673968, "link": "https://stackoverflow.com/questions/54673968/calling-a-boolean-function-but-getting-error-no-matching-function-to-call/54674098#54674098", "title": "Calling a boolean function but getting error &quot;no matching function to call&quot;?", "body": "<p><strong>EDIT</strong> i took the liberty of rewriting your code. the code i posted, compiled in VS2017.</p>\n\n<p>your compare seems kind off</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\nbool isEqual(int* arr1[], int* arr2[], const int row, const int col) {\n\n    for (int r = 0; r &lt; row; r++)\n    {\n        for (int c = 0; c &lt; col; c++)\n        {\n            if (arr1[r][c] != arr2[r][c])\n                return false;\n        }\n    }\n    return true;\n}\n\nint main()\n{\n    const int R = 3;\n    int * arr2D_a[R];\n    int * arr2D_b[R];\n    int C;\n\n    cout &lt;&lt; \"Enter number of columns: \";\n    cin &gt;&gt; C;\n    for (int r = 0; r &lt; R; r++) {\n        arr2D_a[r] = new int[C];\n        arr2D_b[r] = new int[C];\n    }\n\n\n\n    for (int r = 0; r &lt; R; r++) {\n        for (int c = 0; c &lt; C; c++) {\n            int value = rand();\n            arr2D_a[r][c] = value % 2;\n            arr2D_b[r][c] = value % 2;\n        }\n    }\n\n    bool result = isEqual(arr2D_a, arr2D_b, R, C);\n\n    if (result)\n        cout &lt;&lt; \"\\nThe 2 array are the same!\\n\";\n    else\n        cout &lt;&lt; \"\\nThe 2 array are the differernt!\\n\";\n\n    for (int r = 0; r &lt; R; r++) {\n        delete[] arr2D_a[r];\n        arr2D_a[r] = 0;\n        delete[] arr2D_b[r];\n        arr2D_b[r] = 0;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<ol>\n<li>you have to declare your parameters for your function right. <strong>bool isEqual(int</strong> arr1, int** arr2, bool &amp;eq, int row, int col)** because you have a 2D array</li>\n<li>check if the values diff, escape the function as soon as they do. there is no need for a bool variable</li>\n<li>i dont know if it was intentional, but your init of the arrays. there was no way that they could have matched. you called <strong>rand()</strong> everytime, so the values can't match</li>\n<li>was a little thing with the delete of the columns. you have to use your index <strong>c</strong> not the variable <strong>C</strong></li>\n<li>this i did not change... pls don't use <strong>using namespace std;</strong>. this namespace is so enormously huge. when you define your own functions, you can run into undebugable errors, when you declare a function with a name that exists.</li>\n</ol>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>I totally removed the bool in the function call...</p>\n\n<p><strong>EDIT 3</strong></p>\n\n<p>to leave this program for good you have to provide a return value</p>\n\n<p>another mistake was, you must not make the second delete loop. since you have not dynamically allocated this memory.</p>\n\n<p><strong>EDIT 4</strong></p>\n\n<p>reworked the function to please all the compilers =)</p>\n\n<p><strong>EDIT 5</strong></p>\n\n<p>i hope its the last edit for this answer^^ i fixed the memory issue. i checked it with dr. memory and he says, everything is ok :D</p>\n"}, {"comments": [{"owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 0, "creation_date": 1550129903, "post_id": 54674859, "comment_id": 96158815, "body": "having single letter variables, is very confusing... i checked your changes with a leak detector and he said, its ok now^^"}, {"owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "reply_to_user": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "edited": false, "score": 1, "creation_date": 1550150523, "post_id": 54674859, "comment_id": 96170245, "body": "@skratchi.at good job!!!!! LOL, I know single letter thing is confiusing :(  but world is not perfect."}], "tags": [], "owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "is_accepted": false, "score": 2, "last_activity_date": 1550081931, "last_edit_date": 1550081931, "creation_date": 1550074815, "answer_id": 54674859, "question_id": 54673968, "link": "https://stackoverflow.com/questions/54673968/calling-a-boolean-function-but-getting-error-no-matching-function-to-call/54674859#54674859", "title": "Calling a boolean function but getting error &quot;no matching function to call&quot;?", "body": "<p>The answer above fixes most of the issues, but you will get <code>segfault</code> her.</p>\n\n<pre><code>for (int c = 0; c &lt; C; c++) {\n    delete[] arr2D_a[c];\n    delete[] arr2D_b[c];\n\n}\n</code></pre>\n\n<p>if you put something greater than 3 up here</p>\n\n<pre><code>std::cin &gt;&gt; C;\n</code></pre>\n\n<p>What you need to do is leave the second loop:</p>\n\n<pre><code>for (int r = 0; r &lt; R; R++) {\n    delete[] arr2D_a[r];\n    delete[] arr2D_b[r];\n}\n</code></pre>\n\n<p>because you allocated <code>C</code> amount of space in every <code>arr2D_a[r]</code> and <code>arr2D_b[r]</code>.</p>\n"}], "owner": {"reputation": 81, "user_id": 10798572, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a221e214d1ab31f18d6734847113a591?s=128&d=identicon&r=PG&f=1", "display_name": "user10798572", "link": "https://stackoverflow.com/users/10798572/user10798572"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 1, "accepted_answer_id": 54674098, "answer_count": 2, "score": 3, "last_activity_date": 1550129764, "creation_date": 1550072271, "last_edit_date": 1550073798, "question_id": 54673968, "link": "https://stackoverflow.com/questions/54673968/calling-a-boolean-function-but-getting-error-no-matching-function-to-call", "title": "Calling a boolean function but getting error &quot;no matching function to call&quot;?", "body": "<p>I am trying to declare 2d arrays dynamically and fill them with random numbers and then create a function that will compare the elements in two 2d arrays and if they were equal it will return true</p>\n\n<p>However, i keep getting error when trying to call the boolean function.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\nbool isEqual(int *arr1[], int *arr2[], bool &amp;eq, int row, int col){\n\nfor(int r = 0; r&lt;row;r++)\n{\n    for(int c= 0; c&lt;col;r++)\n    {\n        if(arr1[r][c]==arr2[r][c])\n            eq = true;\n    }\n}\nreturn eq;\n }\n\nint main()\n{\nconst int R = 3;\nint * arr2D_a[R];\nint * arr2D_b[R];\nint C;\n\ncout &lt;&lt; \"Enter number of columns: \";\ncin &gt;&gt; C;\nfor (int r = 0; r &lt; R; r++) {\n    arr2D_a[r] = new int [C];\n    arr2D_b[r] = new int [C];\n}\n\n\n\nfor (int r = 0; r &lt; R; r++) {\n    for (int c = 0; c &lt; C; c++) {\n        arr2D_a[r][c] = rand() % 2;\n        arr2D_b[r][c] = rand() % 2;\n    }\n}\n\nbool result = false;\nisEqual(arr2D_a,arr2D_b,result,R,C);\n\nif (result==true)\n    cout &lt;&lt; \"\\nThe 2 array are the same!\\n\";\nelse\n    cout &lt;&lt; \"\\nThe 2 array are the differernt!\\n\";\n\nfor (int c = 0; c &lt; C; c++) {\n    delete[] arr2D_a[C];\n    delete[] arr2D_b[C];\n\n}\nfor (int r = 0; r &lt; R; r++)  {\n    delete[] arr2D_a[r];\n    delete[] arr2D_b[r];\n\n}\n\n\nsystem(\"pause\");\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 4, "creation_date": 1550072190, "post_id": 54673892, "comment_id": 96137496, "body": "Hello. It seems you&#39;re new here. Usually to get help you&#39;ll have to show you what you tried, how it failed and what you were expecting."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 3, "creation_date": 1550072240, "post_id": 54673892, "comment_id": 96137532, "body": "See <a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask</a>"}, {"owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "edited": false, "score": 1, "creation_date": 1550073596, "post_id": 54673892, "comment_id": 96138333, "body": "Another idea: <code>std::rotate</code> the vector of digits and find common prefixes."}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 1, "creation_date": 1550074402, "post_id": 54673892, "comment_id": 96138833, "body": "If it has to be efficient, consider using a suffix tree: <a href=\"https://en.wikipedia.org/wiki/Suffix_tree\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Suffix_tree</a>"}], "answers": [{"tags": [], "owner": {"reputation": 716, "user_id": 9956515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e9b6291c53932e74aa99f31162ea617?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre-Nicolas Piquin", "link": "https://stackoverflow.com/users/9956515/pierre-nicolas-piquin"}, "is_accepted": false, "score": 1, "last_activity_date": 1550074220, "last_edit_date": 1550074220, "creation_date": 1550073285, "answer_id": 54674303, "question_id": 54673892, "link": "https://stackoverflow.com/questions/54673892/looking-for-repeating-patterns-in-integer-numbers/54674303#54674303", "title": "Looking for repeating patterns in integer numbers", "body": "<p>Here is a first way of doing it :</p>\n\n<pre><code>for (size_t i = 0; i &lt; m_numbers.size(); i++) {\n    // Look for patterns starting everywhere in the following numbers\n    for (size_t j = i+1; j &lt; m_numbers.size(); j++) {\n      // Pattern storing\n      std::vector&lt;int&gt; pattern;\n\n      // Condition to stop the search\n      bool valid_pattern = true;\n\n      // Variable for the while loop\n      int offset = 0;\n      while (valid_pattern &amp;&amp; j+offset &lt; m_numbers.size()) {\n        // If the numbers are equal, continue the pattern, else, stop the search\n        if(m_numbers[i+offset] == m_numbers[j+offset]){\n          pattern.push_back(m_numbers[i+offset]);\n        } else {\n          valid_pattern = false;\n        }\n        offset++;\n      }\n\n      // If the pattern has at least two numbers, output it to the console\n      if(pattern.size() &gt; 1){\n        for (size_t idx = 0; idx &lt; pattern.size(); idx++) {\n          std::cout &lt;&lt; pattern[idx];\n        }\n        std::cout &lt;&lt; std::endl;\n      }\n    }\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1550073541, "post_id": 54674355, "comment_id": 96138304, "body": "Maybe note that having <code>O(N^2)</code> memory usage could be quite bad in the case of long strings."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1550073762, "post_id": 54674355, "comment_id": 96138430, "body": "12 characters long will create at most 78 map entries. I wouldn&#39;t worry too much."}, {"owner": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "edited": false, "score": 0, "creation_date": 1550074423, "post_id": 54674355, "comment_id": 96138844, "body": "Thanks for the reply! I have a question, what exactly does &quot;size_t&quot; in line 8 do? Also I never used maps before so I&#39;m new to the concept of maps thus I&#39;m also having quite a hard time figuring out what &quot;p.second&quot; and &quot;p.first&quot; for example do."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1550076753, "post_id": 54674355, "comment_id": 96140327, "body": "@TedLyngmo Sure .... But its bigO, so i am not worried about 12 characters, i am worried about how the solution scales. 64 will use 4kb, 128 will use 16kb! One you get to 1024 (not an outrages string length) we have 1mb!!! Not very scale able..."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "edited": false, "score": 1, "creation_date": 1550082581, "post_id": 54674355, "comment_id": 96143367, "body": "@Xetron <code>size_t</code> is an unsigned integer type suitable for arbitrary lengths and indexes of things you have in memory, but it&#39;s overkilll for this. Even an unsigned char could have been used as a counter. <code>p.first</code>: When you iterate over an <code>unordered_map</code> you get a <code>std::pair&lt;key, value&gt;</code>. <code>p.first</code> is the key (substring in this case) and <code>p.second</code> is the value (the count in this case)."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "edited": false, "score": 1, "creation_date": 1550083227, "post_id": 54674355, "comment_id": 96143656, "body": "@Xetron If something is reasonably fast and simple and capable of doing the task at hand there&#39;s no need to complicate it. 12 figures was the max and it would work even it was suddenly changed to the double, If the problem becomes more complex, say you have 1 million figures, then it calls for a more complex solution."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1550084925, "post_id": 54674355, "comment_id": 96144442, "body": "@FantasticMrFox got the tag wrong for the comment above :-)"}], "tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1550162542, "last_edit_date": 1550162542, "creation_date": 1550073406, "answer_id": 54674355, "question_id": 54673892, "link": "https://stackoverflow.com/questions/54673892/looking-for-repeating-patterns-in-integer-numbers/54674355#54674355", "title": "Looking for repeating patterns in integer numbers", "body": "<p>You could use an <a href=\"https://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\">unordered_map</a> to start with.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;unordered_map&gt;\n\nint main() {\n    std::string str = \"0579870512057\";\n    // a map of substrings and the number of times they appear\n    std::unordered_map&lt;std::string, size_t&gt; pm;\n\n    for(auto a=str.begin(); a!=str.end()-1; ++a) {\n        for(auto b=a+1; b!=str.end(); ++b) {\n            // std::string(a, b+1) creates the substring from your iterators\n            // the unordered_map::operator[] creates a key, value pair\n            // if the key doesn't exist (value is default constructed)\n            // ++ increases the value by 1\n            ++pm[ std::string(a, b+1) ];\n        }\n    }\n    // display the number of times each substring appears (if it appeared more than once)\n    // and display the length (size) of each\n    for(auto&amp; p : pm) {\n        if(p.second&gt;1)\n            std::cout &lt;&lt; std::setw(3) &lt;&lt; p.second &lt;&lt; \" \"\n                      &lt;&lt; std::setw(12) &lt;&lt; p.first.size() &lt;&lt; \" \" &lt;&lt; p.first &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>A slightly more complicated way is to create a custom <code>set</code> that keeps the recurring patterns sorted from longest to shortest but it has the advantage that you'll know that the first pattern in the result will be the longest. It also does not make any copies of the original input except for the patterns found.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n\nstruct comp { // a custom comparison class to sort the result\n    bool operator()(const std::string&amp; a, const std::string&amp; b) const {\n        if(b.size()==a.size()) return a &lt; b; // lowest \"value\" when length is equal\n        else return b.size() &lt; a.size();     // but longest pattern goes first\n    }      // note  b  before  a  when comparing sizes\n};\n\nusing string_pattern_set = std::set&lt;std::string, comp&gt;; // custom set type using \"comp\"\n\nstring_pattern_set get_recurring_patterns(const std::string&amp; str) {\n    string_pattern_set sorted_result;\n\n    for(size_t len=str.size()-1; len&gt;0; --len) {\n        auto end = str.end()-len;\n        for(auto pos=str.begin(); pos&lt;end; ++pos) {\n            for(auto check=pos+1; check&lt;=end; ++check) {\n                if(std::equal(pos, pos+len, check)) {\n                    sorted_result.emplace(pos, pos+len);\n                    break;\n                }\n            }\n        }\n    }\n    return sorted_result;\n}\n\nint main() {\n    string_pattern_set res = get_recurring_patterns(\"0579870512057\");\n    if(res.size())\n        std::cout &lt;&lt; \"the longest recurring pattern is \"\n                  &lt;&lt; res.begin()-&gt;size() &lt;&lt; \" char(s)\\n\";\n    // display all patterns from longest to shortest\n    for(auto&amp; str : res) std::cout &lt;&lt; str &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<hr>\n\n<p>A third option, if you are really worried about memory consumption, would be to not store the recurring strings at all but to store the <code>begin</code> and <code>end</code> iterators for the matching substrings. This approach works well when the recurring patterns are expected to be long and plentiful.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;algorithm&gt;\n#include &lt;iterator&gt;\n\n// type to store begin and end iterators for matching patterns\nusing strits = std::pair&lt;std::string::const_iterator, std::string::const_iterator&gt;;\n\nstruct comp { // a custom comparison class to sort the result\n    bool operator()(const strits&amp; a, const strits&amp; b) const {\n        if((b.second-b.first)==(a.second-a.first)) // lowest \"value\" when length is equal\n            return std::lexicographical_compare(a.first, a.second, b.first, b.second);\n        else // but longest pattern goes first\n            return (b.second-b.first) &lt; (a.second-a.first);\n    }      // note  b  before            a  when comparing sizes\n};\n\nusing string_pattern_set = std::set&lt;strits, comp&gt;; // custom set type using \"comp\"\n\ntemplate&lt;bool LONGEST_ONLY = false, bool BIG_STRING = false&gt;\nstring_pattern_set get_recurring_patterns(const std::string&amp; str) {\n    string_pattern_set sorted_result;\n\n    for(size_t len=str.size()-1; len&gt;0; --len) {\n        auto end = str.end()-len;\n        for(auto begin=str.begin(); begin&lt;end; ++begin) {\n            if constexpr (BIG_STRING) {\n                // skip patterns already found to be recurring.\n                // in C++20, use set::contains instead\n                if(sorted_result.find(strits(begin, begin+len))!=sorted_result.end())\n                    continue;\n            }\n            for(auto check=begin+1; check&lt;=end; ++check) {\n                if(std::equal(begin, begin+len, check)) {\n                    sorted_result.emplace(begin, begin+len);\n                    break;\n                }\n            }\n        }\n        if constexpr (LONGEST_ONLY)\n            if(!sorted_result.empty()) break;\n    }\n    return sorted_result;\n}\n\nint main() {\n    string_pattern_set res = get_recurring_patterns(\"0579870512057\");\n\n    if(res.size()) {\n        const auto&amp; [begin, end] = *res.begin();\n        std::cout &lt;&lt; \"the longest recurring pattern is \"\n                  &lt;&lt; (end - begin)&lt;&lt; \" char(s)\\n\";\n    }\n\n    // display all patterns from longest to shortest\n    for(const auto&amp; [begin, end] : res) {\n        std::copy(begin, end, std::ostream_iterator&lt;char&gt;(std::cout));\n        std::cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "edited": false, "score": 0, "creation_date": 1550075115, "post_id": 54674738, "comment_id": 96139296, "body": "Thanks for answering but the demo doesn&#39;t seem to work for me tho"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "edited": false, "score": 0, "creation_date": 1550075297, "post_id": 54674738, "comment_id": 96139423, "body": "Need C++17, link changed."}, {"owner": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "edited": false, "score": 0, "creation_date": 1550075453, "post_id": 54674738, "comment_id": 96139529, "body": "Thanks! But this implementation only prints out &quot;057&quot; but the pattern &quot;05&quot; also occurs and should be printed out"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "edited": false, "score": 0, "creation_date": 1550076040, "post_id": 54674738, "comment_id": 96139905, "body": "<a href=\"http://coliru.stacked-crooked.com/a/c02edae0ed04774c\" rel=\"nofollow noreferrer\">Other demo</a> that you can customize with parameter.."}, {"owner": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "edited": false, "score": 0, "creation_date": 1550076471, "post_id": 54674738, "comment_id": 96140166, "body": "Thanks a lot! I chose your solution because it&#39;s the closest to what I&#39;ve already tried and had in mind. Thanks again!"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "edited": false, "score": 1, "creation_date": 1550083730, "post_id": 54674738, "comment_id": 96143894, "body": "@TedLyngmo: Indeed, forgot than it can repeat with part of itself. Fixed code."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1550083833, "post_id": 54674738, "comment_id": 96143945, "body": "started to have second thoughts about my comment so I was just about to test what the outcome would be. :-)"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1550083666, "last_edit_date": 1550083666, "creation_date": 1550074470, "answer_id": 54674738, "question_id": 54673892, "link": "https://stackoverflow.com/questions/54673892/looking-for-repeating-patterns-in-integer-numbers/54674738#54674738", "title": "Looking for repeating patterns in integer numbers", "body": "<p>You might use something like:</p>\n\n<pre><code>std::set&lt;std::vector&lt;int&gt;&gt; GetRepetitingPatterns(const std::vector&lt;int&gt;&amp; v)\n{\n    std::set&lt;std::vector&lt;int&gt;&gt; res;\n    for (std::size_t size = v.size() - 1; size != 0; --size) {\n        std::set&lt;std::vector&lt;int&gt;&gt; s;\n\n        for (std::size_t i = 0; i + size != v.size() + 1; ++i) {\n            auto [it, inserted] = s.emplace(v.begin() + i, v.begin() + i + size);\n            if (!inserted) {\n                res.insert(*it);\n            }\n        }\n#if 1 // Longest only\n        if (!res.empty()) {\n            return res;   \n        }\n#endif\n    }\n    return {};\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/6d32c089088b1d3a\" rel=\"nofollow noreferrer\">Demo</a></p>\n\n<p>and for variation (all/longest and min size):\n<a href=\"http://coliru.stacked-crooked.com/a/c02edae0ed04774c\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 63, "user_id": 11050145, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d57cd0d2df463f62ae778e90437719be?s=128&d=identicon&r=PG", "display_name": "Xetron", "link": "https://stackoverflow.com/users/11050145/xetron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 54674738, "answer_count": 3, "score": 5, "last_activity_date": 1550162542, "creation_date": 1550072073, "last_edit_date": 1550072517, "question_id": 54673892, "link": "https://stackoverflow.com/questions/54673892/looking-for-repeating-patterns-in-integer-numbers", "title": "Looking for repeating patterns in integer numbers", "body": "<p>I am trying to find repeating patterns in integer numbers. To do that I use vectors that store each digit individually. I want to write the whole thing as a function that prints out the repeating patterns of the number. The numbers are mostly 12 digits long.</p>\n\n<p>An example:<br>\nThe number is 057 987 051 2057<br>\nI want the function to print out:<br>\n057<br>\n05<br>\nIt should also only print out the longest recurrent pattern. I'm currently stuck on how to implement the whole thing in C++. I would also like to know if there are any libraries that support the feature I'm looking for.</p>\n\n<p>Thanks in advance!</p>\n\n<p>EDIT:  </p>\n\n<pre><code>for (vector&lt;int&gt;::iterator it = m_number.begin(); it != m_number.end(); ++it) {\n    int follower = *(it + 1);\n    for (vector&lt;int&gt;::iterator jt = it + 1; jt != m_number.end(); ++jt) {\n        if (*jt == *it) {\n            if (*(jt + 1) == follower)\n                cout &lt;&lt; *jt;\n            }\n        }\n    cout &lt;&lt; endl;\n    }\n</code></pre>\n\n<p>This is what I've tried so far. This here obviously doesn't work yet but I hope it gives you an idea about what I want the function to do. I try to use two for-loops that iterate over the m_number vector (that contains the integer number I'm trying to check btw.).</p>\n"}, {"tags": ["c++", "macos", "opencv", "cmake"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1550075949, "post_id": 54673864, "comment_id": 96139851, "body": "How did you install <b>OpenCV</b> exactly?"}, {"owner": {"reputation": 11, "user_id": 9014263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adda4ba975fc969ffaf5a4bf40392b98?s=128&d=identicon&r=PG&f=1", "display_name": "Alina Dyussupova", "link": "https://stackoverflow.com/users/9014263/alina-dyussupova"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1550079670, "post_id": 54673864, "comment_id": 96141903, "body": "@MarkSetchell via terminal... using homebrew, python3 and installing virtual environment and cmake"}, {"owner": {"reputation": 313, "user_id": 10608487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c953415d2e39d1ff5a484e42ce38c?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10608487/richard"}, "edited": false, "score": 0, "creation_date": 1550079951, "post_id": 54673864, "comment_id": 96142054, "body": "What is your cmake command? The error message is telling you that you&#39;ll need to add OpenCV&#39;s installation prefix to <code>CMAKE_PREFIX_PATH</code>. This means your cmake command should contain <code>-DCMAKE_PREFIX_PATH=&lt;path to opencv&gt;</code>."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 313, "user_id": 10608487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/245c953415d2e39d1ff5a484e42ce38c?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/10608487/richard"}, "edited": false, "score": 0, "creation_date": 1550080165, "post_id": 54673864, "comment_id": 96142176, "body": "You can find the file @Richard is referring to like this <code>find &#47;usr &#47;Users -iname &quot;OpenCVConfig.cmake&quot; 2&gt; &#47;dev&#47;null</code>"}], "answers": [{"tags": [], "owner": {"reputation": 155, "user_id": 7718627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v3hXE.jpg?s=128&g=1", "display_name": "Vic", "link": "https://stackoverflow.com/users/7718627/vic"}, "is_accepted": false, "score": 0, "last_activity_date": 1550084778, "creation_date": 1550084778, "answer_id": 54677626, "question_id": 54673864, "link": "https://stackoverflow.com/questions/54673864/cant-compile-c-program-with-opencv-opencvconfig-cmake-file-missing/54677626#54677626", "title": "Can&#39;t compile c++ program with OpenCV. OpenCVConfig.cmake file missing", "body": "<p>I had a similar issue with CLion in Windows when I tried to run a program I wrote on a different system. To fix the problem I had to \"Import Project from Sources\" so that CLion would generate all the necessary files for Make.</p>\n\n<p>I imported the existing program through the dialog box that popped up after I Imported.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QkiZj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QkiZj.png\" alt=\"CLion Start-up Window\"></a></p>\n\n<p>This was my simple GCD c++ terminal program before I imported the repo the way CLion required me to:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ezVZu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ezVZu.png\" alt=\"GCD Project Files\"></a></p>\n\n<p>After I chose import CLion generated all the files necessary to compile locally:</p>\n\n<p><a href=\"https://i.stack.imgur.com/z1aWP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z1aWP.png\" alt=\"My new project file architecture\"></a></p>\n\n<p>I hope this helps, once I got my program imported CLion did everything else. I modified my CMakeList.txt file for c++11 because I need to know my programs compile as expected on 11. CLion defaulted to c++14 for my.</p>\n"}, {"tags": [], "owner": {"reputation": 1627, "user_id": 579698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f69501fa0ff653b5a6e9466b43773d3?s=128&d=identicon&r=PG", "display_name": "Stanley F.", "link": "https://stackoverflow.com/users/579698/stanley-f"}, "is_accepted": false, "score": 0, "last_activity_date": 1550130963, "creation_date": 1550130963, "answer_id": 54685548, "question_id": 54673864, "link": "https://stackoverflow.com/questions/54673864/cant-compile-c-program-with-opencv-opencvconfig-cmake-file-missing/54685548#54685548", "title": "Can&#39;t compile c++ program with OpenCV. OpenCVConfig.cmake file missing", "body": "<p>The error message clearly states, what to do to resolve it: First, find where one of the mentioned files (<code>OpenCVConfig.cmake</code> or <code>opencv-config.cmake</code>) is located on your system. This path will be <code>/path/to/configfile</code>. Then set the <code>OpenCV_DIR</code> variable accordingly. </p>\n\n<p>Setting the variable can be done in two ways:</p>\n\n<ul>\n<li>command line: <code>cmake -DOpenCV_DIR=&lt;/path/to/configfile&gt; &lt;any additional arguments&gt;</code></li>\n<li>CLion settings: See images below (taken from a <a href=\"https://stackoverflow.com/a/54456060/579698\">previous post</a>). But instead of <code>-DENABLE_TESTS=ON</code> add <code>-DOpenCV_DIR=&lt;/path/to/configfile&gt;</code> to CMake options:</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/OouwL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OouwL.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/5YWks.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5YWks.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 9014263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adda4ba975fc969ffaf5a4bf40392b98?s=128&d=identicon&r=PG&f=1", "display_name": "Alina Dyussupova", "link": "https://stackoverflow.com/users/9014263/alina-dyussupova"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1550130963, "creation_date": 1550071997, "last_edit_date": 1550079777, "question_id": 54673864, "link": "https://stackoverflow.com/questions/54673864/cant-compile-c-program-with-opencv-opencvconfig-cmake-file-missing", "title": "Can&#39;t compile c++ program with OpenCV. OpenCVConfig.cmake file missing", "body": "<p>Tried to run my simple cpp program from CLion and also from terminal, but everywhere have the same problem:</p>\n\n<pre><code>By not providing \"FindOpenCV.cmake\" in CMAKE_MODULE_PATH this project has\n  asked CMake to find a package configuration file provided by \"OpenCV\", but\n  CMake did not find one.\n\n  Could not find a package configuration file provided by \"OpenCV\" with any\n  of the following names:\n\n    OpenCVConfig.cmake\n    opencv-config.cmake\n\n  Add the installation prefix of \"OpenCV\" to CMAKE_PREFIX_PATH or set\n  \"OpenCV_DIR\" to a directory containing one of the above files.  If \"OpenCV\"\n  provides a separate development package or SDK, be sure it has been\n  installed. \n</code></pre>\n\n<hr>\n\n<p>Tried some solutions, but nothing helped. OpenCV is installed into user directory on macOS. Could someone help me?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 3, "creation_date": 1550072009, "post_id": 54673826, "comment_id": 96137386, "body": "Instead of just <code>g++ test.cpp</code>, try <code>g++ test.cpp add.cpp</code>"}, {"owner": {"reputation": 695, "user_id": 9149062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4decf954ed74739c4eb30a683ed7f5e5?s=128&d=identicon&r=PG&f=1", "display_name": "wohe1", "link": "https://stackoverflow.com/users/9149062/wohe1"}, "reply_to_user": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1550072113, "post_id": 54673826, "comment_id": 96137448, "body": "<code>g++ test.cpp add.cpp</code> worked!! @Ted -&gt; that should have been <code>add(4,7)</code>"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1550072173, "post_id": 54673826, "comment_id": 96137488, "body": "Ok, fixed that."}], "answers": [{"tags": [], "owner": {"reputation": 1444, "user_id": 6534880, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6YTr5.jpg?s=128&g=1", "display_name": "Prodigle", "link": "https://stackoverflow.com/users/6534880/prodigle"}, "is_accepted": true, "score": 2, "last_activity_date": 1550072094, "creation_date": 1550072094, "answer_id": 54673899, "question_id": 54673826, "link": "https://stackoverflow.com/questions/54673826/undefined-symbols-for-architecture-x86-64-symbols-not-found-for-architectur/54673899#54673899", "title": "Undefined symbols for architecture x86_64 -&gt; symbol(s) not found for architecture x86_64", "body": "<pre><code>g++ test.cpp add.cpp\n</code></pre>\n\n<p>Every cpp file needs to be compiled to separate .obj files</p>\n"}], "owner": {"reputation": 695, "user_id": 9149062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4decf954ed74739c4eb30a683ed7f5e5?s=128&d=identicon&r=PG&f=1", "display_name": "wohe1", "link": "https://stackoverflow.com/users/9149062/wohe1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 971, "favorite_count": 0, "closed_date": 1550072116, "accepted_answer_id": 54673899, "answer_count": 1, "score": 1, "last_activity_date": 1550072150, "creation_date": 1550071912, "last_edit_date": 1550072150, "question_id": 54673826, "link": "https://stackoverflow.com/questions/54673826/undefined-symbols-for-architecture-x86-64-symbols-not-found-for-architectur", "closed_reason": "Duplicate", "title": "Undefined symbols for architecture x86_64 -&gt; symbol(s) not found for architecture x86_64", "body": "<p>I'm learning C++, I have gotten to the point that this works:</p>\n\n<p><strong>helloworld.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n   cout &lt;&lt; \"Hi\" &lt;&lt; endl;\n   return 0;\n}\n</code></pre>\n\n<p>I am using MacOS Mojave and for compilation I use the commands</p>\n\n<pre><code>&gt;&gt; g++ helloworld.cpp\n&gt;&gt; ./a.out\n</code></pre>\n\n<p>This if working fine. Now I want to use header files. Therefore I've created the following files:</p>\n\n<p><strong>test.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"add.h\"\nusing namespace std;\n\nint main() {\n   add(4,7);\n   return 0;\n}\n</code></pre>\n\n<p><strong>add.h</strong></p>\n\n<pre><code>#pragma once\nint add(int a, int b);\n</code></pre>\n\n<p><strong>add.cpp</strong></p>\n\n<pre><code>#include \"add.h\"\nint add(int a, int b) {\n    return a + b;\n}\n</code></pre>\n\n<p>and When I try to compile this I get:</p>\n\n<pre><code>&gt;&gt; g++ test.cpp\nUndefined symbols for architecture x86_64:\n  \"add(int, int)\", referenced from:\n      _main in test-ebc106.o\nld: symbol(s) not found for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\n</code></pre>\n\n<p>Does anyone have an idea on how to solve this?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 1, "creation_date": 1550072102, "post_id": 54673694, "comment_id": 96137441, "body": "Probably not the only issue but... your <code>play()</code> implementation appears to be a continuous loop.  Hence you&#39;re blocking the <code>Qt</code> event loop and no events will ever be processed."}, {"owner": {"reputation": 31, "user_id": 11057121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SGxfP.png?s=128&g=1", "display_name": "marcus74", "link": "https://stackoverflow.com/users/11057121/marcus74"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1550074113, "post_id": 54673694, "comment_id": 96138647, "body": "So, how to avoid this situation and make events processed normally?"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11057121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SGxfP.png?s=128&g=1", "display_name": "marcus74", "link": "https://stackoverflow.com/users/11057121/marcus74"}, "edited": false, "score": 0, "creation_date": 1550095264, "post_id": 54677843, "comment_id": 96149126, "body": "Thanks a lot! Everything started to work fine immediately. Now I&#39;m aware of avoiding this style in future Qt projects."}], "tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": true, "score": 1, "last_activity_date": 1550085583, "creation_date": 1550085583, "answer_id": 54677843, "question_id": 54673694, "link": "https://stackoverflow.com/questions/54673694/qgraphicsscene-crashes-after-even-the-tiniest-update/54677843#54677843", "title": "QGraphicsScene crashes after even the tiniest update", "body": "<p>Rather than use an infinite loop you could make use of a <code>QTimer</code> (I see <code>Board</code> already has a <code>QTimer *</code> member so perhaps that was the intention all along).  Rather than use an explicit timer you might want to use <a href=\"https://doc.qt.io/qt-5/qtimer.html#singleShot-4\" rel=\"nofollow noreferrer\"><code>QTimer::singleShot</code></a> to `nudge' the game one step forward at a time.</p>\n\n<p>Firstly, make the player counter/index <code>i</code> a member of <code>Board</code> and initialise it and <code>dice</code> in the constructor...</p>\n\n<pre><code>Board::Board ()\n    : dice(new Dice)\n    , i(0)\n{\n     ...\n}\n</code></pre>\n\n<p>Now change <code>Board::play</code> so that it makes a single call to <code>Player::turn</code> for the current player and rearms a timer if required...</p>\n\n<pre><code>void Board::play ()\n{\n\n    /*\n     * Give the current player their turn.\n     */\n    bool playMore = players.at(i)-&gt;turn(dice, players, fieldsToPlay);\n    if (playMore) {\n\n        /*\n         * The game hasn't yet finished so update the player index\n         * and rearm the timer with a lambda to make another call\n         * to play() in 1 second.\n         */\n        i++;\n        if (i == 4)\n            i=0;\n        QTimer::singleShot(1000,\n                           [this]()\n                           {\n                               play();\n                           });\n    }\n}\n</code></pre>\n\n<p>I haven't tested the above but it at least shows the basic outline of what you should aim for.</p>\n"}], "owner": {"reputation": 31, "user_id": 11057121, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SGxfP.png?s=128&g=1", "display_name": "marcus74", "link": "https://stackoverflow.com/users/11057121/marcus74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 54677843, "answer_count": 1, "score": 2, "last_activity_date": 1550085583, "creation_date": 1550071526, "last_edit_date": 1550073740, "question_id": 54673694, "link": "https://stackoverflow.com/questions/54673694/qgraphicsscene-crashes-after-even-the-tiniest-update", "title": "QGraphicsScene crashes after even the tiniest update", "body": "<p>I'm working currently on simple project in Qt. It is based on popular game \"Ludo\". But I've got annoying problem with making any changes on screen. Board drawing works nice, but it's enough to uncomment line with play() function and disaster guaranteed. Simply I'm not able to setPixmap of field in Player::turn() to show pawns' movement. Scene becomes plain and every drawn field disappears. On the other hand, game runs logically and correctly due to output. Unfortunately, it completely doesn't cooperate with GUI. </p>\n\n<p>I attached images \"before-after\" and necessary code.</p>\n\n<h1>main.cpp</h1>\n\n<pre><code>QApplication a(argc, argv);\n\nBoard *scene = new Board();\n\nQGraphicsView *view = new QGraphicsView(scene);\nview-&gt;resize(1200, 1000);\nview-&gt;show();\n\nscene-&gt;draw();\n// scene-&gt;play();\n\nreturn a.exec();\n</code></pre>\n\n<h1>Board::play()</h1>\n\n<pre><code>dice = new Dice();\nunsigned int i=0;\nwhile(true) {\n\n    bool playMore = players.at(i)-&gt;turn(dice, players, fieldsToPlay);\n    if(playMore) {\n\n        i++;\n        if(i == 4)\n            i=0;\n    }\n    else break;\n}\n</code></pre>\n\n<h1>Player::turn()</h1>\n\n<pre><code>int result;\nstd::cout &lt;&lt; \"Player \" &lt;&lt; colour &lt;&lt; \" \";\n\nif(hasPawnOnField) {\n\n    // TODO: check if field has pawn\n    result = dice-&gt;roll();\n    std::cout &lt;&lt; result &lt;&lt; '\\n';\n\n    while(result) {\n\n        pawns.at(0)-&gt;currentField-&gt;set_Pixmap(QPixmap(\":/img/border.png\"));\n        pawns.at(0)-&gt;currentField-&gt;setPawn(nullptr);\n        bool finito = pawns.at(0)-&gt;move(fieldsToPlay, baseAndFinish);\n        pawns.at(0)-&gt;currentField-&gt;setPawn(pawns.at(0));\n\n\n        char col = pawns.at(0)-&gt;getColour();\n        switch (col) {\n\n            case 'b':\n                pawns.at(0)-&gt;currentField-&gt;set_Pixmap(QPixmap(\":/img/bluepawn.png\"));\n                break;\n            case 'r':\n                pawns.at(0)-&gt;currentField-&gt;set_Pixmap(QPixmap(\":/img/redpawn.png\"));\n                break;\n            case 'y':\n                pawns.at(0)-&gt;currentField-&gt;set_Pixmap(QPixmap(\":/img/yellowpawn.png\"));\n                break;\n            case 'g':\n                pawns.at(0)-&gt;currentField-&gt;set_Pixmap(QPixmap(\":/img/greenpawn.png\"));\n                break;\n        }\n\n        if(finito) {\n\n            finishedPawns++;\n            delete pawns.at(0);\n            pawns.erase(pawns.begin());\n            hasPawnOnField = false;\n            break;\n        }\n\n        result--;\n    }\n    if(finishedPawns == 4) // condition which ends the game\n        return 0;\n}\nelse {\n\n   int attempts = 3;\n\n   while(attempts) {\n\n       result = dice-&gt;roll();\n       std::cout &lt;&lt; result &lt;&lt; '\\n';\n       if(result == 6) {\n\n           hasPawnOnField = true;\n           if(start-&gt;getPawn()) {\n\n              char col = start-&gt;getPawn()-&gt;getColour();\n              switch (col) {\n\n                case 'b':\n                  players.at(0)-&gt;pawns.at(0)-&gt;setField(fieldsToPlay.at(0));\n                  players.at(0)-&gt;pawns.at(0)-&gt;zero();\n                  fieldsToPlay.at(0)-&gt;setPawn(players.at(0)-&gt;pawns.at(0));\n                  fieldsToPlay.at(0)-&gt;set_Pixmap(QPixmap(\":/img/bluepawn.png\"));\n                  break;\n                case 'r':\n                  players.at(1)-&gt;pawns.at(0)-&gt;setField(fieldsToPlay.at(12));\n                  players.at(1)-&gt;pawns.at(0)-&gt;zero();\n                  fieldsToPlay.at(12)-&gt;setPawn(players.at(1)-&gt;pawns.at(0));\n                  fieldsToPlay.at(12)-&gt;set_Pixmap(QPixmap(\":/img/redpawn.png\"));\n                  break;\n                case 'y':\n                  players.at(2)-&gt;pawns.at(0)-&gt;setField(fieldsToPlay.at(24));\n                  players.at(2)-&gt;pawns.at(0)-&gt;zero();\n                  fieldsToPlay.at(24)-&gt;setPawn(players.at(2)-&gt;pawns.at(0));\n                  fieldsToPlay.at(24)-&gt;set_Pixmap(QPixmap(\":/img/yellowpawn.png\"));\n                  break;\n                case 'g':\n                  players.at(3)-&gt;pawns.at(0)-&gt;setField(fieldsToPlay.at(36));\n                  players.at(3)-&gt;pawns.at(0)-&gt;zero();\n                  fieldsToPlay.at(36)-&gt;setPawn(players.at(3)-&gt;pawns.at(0));\n                  fieldsToPlay.at(36)-&gt;set_Pixmap(QPixmap(\":/img/greenpawn.png\"));\n                  break;\n              }\n           }\n           pawns.at(0)-&gt;setField(start);\n           start-&gt;setPawn(pawns.at(0));\n           start-&gt;set_Pixmap(baseAndFinish.at(finishedPawns)-&gt;getPixmap());\n\n           baseAndFinish.at(finishedPawns)-&gt;set_Pixmap(QPixmap(\":/img/border.png\"));\n           break;\n       }\n\n       attempts--;\n   }\n}\n</code></pre>\n\n<h1>Pawn::move()</h1>\n\n<pre><code>passedFields++;\n\nif(passedFields &gt;= 48) {\n\n    currentField = basFin.at(4+(passedFields-48));\n\n    if(passedFields == FINISH) {\n        FINISH--;\n        delete basFin.at(basFin.size()-1);\n        basFin.pop_back();\n        return true;\n    }\n\n}\nelse\n    currentField = fieldsToPlay.at( (startID+passedFields)%48);\n\nreturn false;\n</code></pre>\n\n<h1>Board.h</h1>\n\n<pre><code>class Board : public QGraphicsScene {\n\nQ_OBJECT\n\npublic:\n\nBoard();\nvirtual ~Board();\nvoid draw();\nvoid drawField(std::vector&lt;Field *&gt; &amp;vec, Vector &amp;current, Vector dir, QString image);\nvoid play();\n\nstatic const int rect_size = 70;\n\nVector directions[4] = {Vector (0, -rect_size),   //up\n                        Vector (rect_size, 0),    //right\n                        Vector (0, rect_size),    //down\n                        Vector (-rect_size, 0) }; //left\n\nprivate:\nstd::vector&lt;Field *&gt; fieldsToPlay;\nstd::vector&lt;Player *&gt; players;\n\nstd::vector&lt;Field *&gt; fieldsBlue;    //fields 0-3 basement, fields 4-7 finish\nstd::vector&lt;Field *&gt; fieldsRed;\nstd::vector&lt;Field *&gt; fieldsYellow;\nstd::vector&lt;Field *&gt; fieldsGreen;\n\nDice *dice;\nQTimer *timer;\n};\n</code></pre>\n\n<p>Scene before updating Pixmap</p>\n\n<p><img src=\"https://i.stack.imgur.com/rjvoJ.jpg\" alt=\"\"></p>\n\n<p>Scene after</p>\n\n<p><img src=\"https://i.stack.imgur.com/ZXMZ4.jpg\" alt=\"\"></p>\n\n<p>What am I doing wrong? How to update my scene in runtime without crash?</p>\n"}, {"tags": ["c++", "visual-studio", "dll"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550072111, "post_id": 54673682, "comment_id": 96137446, "body": "please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, is the error when compiling your dll or when linking to your dll? Are you using external libraries? If so which runtime do those libraries use?"}, {"owner": {"reputation": 225, "user_id": 7389005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce6d111eb720e5ca0def89034a96cc?s=128&d=identicon&r=PG&f=1", "display_name": "e.farman", "link": "https://stackoverflow.com/users/7389005/e-farman"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550073231, "post_id": 54673682, "comment_id": 96138131, "body": "This actually is the minimal example, the original code is larger but is still related to crt library. I just created a VS dll project with no other libraries or dlls. Only in Project Properties-&gt;C/C++-&gt;Code Generation-&gt;Runtime Library : /MD that references msvcrt.lib. The problem is when I compile the dll"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550074315, "post_id": 54673682, "comment_id": 96138767, "body": "Can&#39;t reproduce, have you tried a clean build?"}, {"owner": {"reputation": 225, "user_id": 7389005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce6d111eb720e5ca0def89034a96cc?s=128&d=identicon&r=PG&f=1", "display_name": "e.farman", "link": "https://stackoverflow.com/users/7389005/e-farman"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550074480, "post_id": 54673682, "comment_id": 96138881, "body": "Yes, I just figured the problem, (I&#39;ve edited the point in the question). It&#39;s because I had put /NOENTRY but I wonder why it raises those errors as /NOENTRY should be for resource only dll which I belive is the case"}], "answers": [{"tags": [], "owner": {"reputation": 225, "user_id": 7389005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce6d111eb720e5ca0def89034a96cc?s=128&d=identicon&r=PG&f=1", "display_name": "e.farman", "link": "https://stackoverflow.com/users/7389005/e-farman"}, "is_accepted": false, "score": 0, "last_activity_date": 1550074618, "creation_date": 1550074618, "answer_id": 54674791, "question_id": 54673682, "link": "https://stackoverflow.com/questions/54673682/compiling-c-dll-visual-studio-linking-error-with-crt-library/54674791#54674791", "title": "Compiling C++ dll Visual Studio linking error with crt library", "body": "<p>The problem comes from /NOENTRY option in Project Properties->Linker->Advanced->No Entry Point. Removing it solved the problem</p>\n"}, {"comments": [{"owner": {"reputation": 225, "user_id": 7389005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce6d111eb720e5ca0def89034a96cc?s=128&d=identicon&r=PG&f=1", "display_name": "e.farman", "link": "https://stackoverflow.com/users/7389005/e-farman"}, "edited": false, "score": 0, "creation_date": 1550075155, "post_id": 54674881, "comment_id": 96139329, "body": "Thanks for the explanation, I interpreted the short description differently as the default dll project has a dllMain I thought it was talking about that"}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": false, "score": 0, "last_activity_date": 1550074903, "creation_date": 1550074903, "answer_id": 54674881, "question_id": 54673682, "link": "https://stackoverflow.com/questions/54673682/compiling-c-dll-visual-studio-linking-error-with-crt-library/54674881#54674881", "title": "Compiling C++ dll Visual Studio linking error with crt library", "body": "<p><code>/NOENTRY</code> is for creating dlls which don't have any code at all and only contiain bitmaps etc: <a href=\"https://docs.microsoft.com/en-us/cpp/build/creating-a-resource-only-dll?view=vs-2017\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/cpp/build/creating-a-resource-only-dll?view=vs-2017</a></p>\n\n<p>As the dll (should) have no code visual studio doesn't link in the runtime library either, but as there is code it generates requirements for the runtime library symbols which are unresolved.</p>\n"}], "owner": {"reputation": 225, "user_id": 7389005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ce6d111eb720e5ca0def89034a96cc?s=128&d=identicon&r=PG&f=1", "display_name": "e.farman", "link": "https://stackoverflow.com/users/7389005/e-farman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1005, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1550074903, "creation_date": 1550071474, "last_edit_date": 1550074420, "question_id": 54673682, "link": "https://stackoverflow.com/questions/54673682/compiling-c-dll-visual-studio-linking-error-with-crt-library", "title": "Compiling C++ dll Visual Studio linking error with crt library", "body": "<p>I'm having a hard time compiling a C/C++ dll on Visual Studio. It seems to be linked to CRT library. </p>\n\n<p>A simple VS c++ dll project. Just removed recompiled header, and added /NOENTRY. Exporting methods is working, but a simple class (not intended to be exported)  raises a lot of linking error with CRT library:</p>\n\n<p>Test.h:</p>\n\n<pre><code>class ITest\n{\npublic:\n    virtual void foo() = 0;\n}\n\nclass Test final : public ITest\n{\npublic:\n    Test();\n    ~Test();\n\n    void foo();\n};\n\n// extern \"C\" __declspec(dllexport) ITest* __cdecl CreateTest();\n</code></pre>\n\n<p>Test.cpp </p>\n\n<pre><code>#include \"Test.h\"\nTest::Test() {}\nTest::~Test() {}\nTest::foo() {}\n// extern \"C\" __declspec(dllexport) ITest* __cdecl CreateTest() { return new Test; }\n</code></pre>\n\n<p>errors:</p>\n\n<pre><code>Test.obj : error LNK2001: unresolved external symbol _purecall\nmsvcrt.lib(delete_scalar.obj) : error LNK2019: unresolved external symbol free referenced in function \"void __cdecl operator delete(void *)\" (??3@YAXPEAX@Z)\n</code></pre>\n\n<p>Uncommenting the export raises more msvcrt.lib link errors and changing the runtime library for MDd, MT, MTd changes only the library referenced.</p>\n\n<p>Thanks you for any help :)</p>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 2, "creation_date": 1550071647, "post_id": 54673656, "comment_id": 96137182, "body": "Post the code not photos of it made with your mobile phone."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550071799, "post_id": 54673656, "comment_id": 96137268, "body": "Please read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also <a href=\"http://stackoverflow.com/tour\">take the tour</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">read about how to ask good questions</a> and <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly don&#39;t forget how to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7346067"}, "reply_to_user": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1550071916, "post_id": 54673656, "comment_id": 96137334, "body": "@&#214;&#246; Tiib I edited in the code, if that helps"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550072069, "post_id": 54673656, "comment_id": 96137424, "body": "<i>why is it running so slow</i> -- You need to post the compiler flags you used to build your code.  If you&#39;re running an unoptimized or &quot;debug&quot; build, then any timing results you&#39;re getting are meaningless.  Also, if you coded any sort of nested loops (and you did do this), you run the danger of having an <code>O(n^2)</code>  complexity, which almost always is a reason for slowness."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7346067"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550072223, "post_id": 54673656, "comment_id": 96137520, "body": "@PaulMcKenzie oh wow... this is awkward.. Switching the build to Release fixed the slow search (now taking 4 seconds, as opposed to 4-5 minutes). That solves one of my questions, but how do I implement the ability to search for a pattern with wildcards using this algorithm?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550073829, "post_id": 54673656, "comment_id": 96138462, "body": "@Official229 -- I think that&#39;s more of an algorithm question and not one necessarily C++ related.  Better to address that issue with a new question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7346067"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550073901, "post_id": 54673656, "comment_id": 96138513, "body": "@PaulMcKenzie alright, thanks for the help :)"}, {"owner": {"reputation": 51837, "user_id": 2144669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e7393f439028063515255b63ed94cfd?s=128&d=identicon&r=PG", "display_name": "David Eisenstat", "link": "https://stackoverflow.com/users/2144669/david-eisenstat"}, "edited": false, "score": 0, "creation_date": 1550076904, "post_id": 54673656, "comment_id": 96140397, "body": "Is <a href=\"https://github.com/google/re2\" rel=\"nofollow noreferrer\">github.com/google/re2</a> an option? The algorithms are complicated."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7346067"}, "edited": false, "score": 0, "creation_date": 1550072787, "post_id": 54674025, "comment_id": 96137852, "body": "I replaced the <code>vector B</code> with your <code>array B</code>, which has made the search even faster. This has gotten rid of my speed problem even more. But one of my bigger issues still remains. How do I implement the ability to search for a pattern that contains wildcards using this algorithm?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 0, "creation_date": 1550084000, "post_id": 54674025, "comment_id": 96144026, "body": "@Official229: I added a possible answer to your second question, although on the whole it is better to ask two (different) questions when you have two questions to ask."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 1, "last_activity_date": 1550087570, "last_edit_date": 1550087570, "creation_date": 1550072428, "answer_id": 54674025, "question_id": 54673656, "link": "https://stackoverflow.com/questions/54673656/implementing-the-backward-nondeterministic-dawg-matching-algorithm/54674025#54674025", "title": "Implementing the Backward Nondeterministic Dawg Matching algorithm", "body": "<p><code>B</code> is not big enough -- it is indexed by the bytes in the pattern so it must have 256 elements (assuming an 8-bit byte architecture.) But you define it as having <code>pattern.size()</code> elements,  which is a much smaller number.</p>\n\n<p>As a consequence, you are using memory outside of B's allocation, which is Undefined Behaviour. </p>\n\n<p>I suggest you use <a href=\"https://en.cppreference.com/w/cpp/container/array\" rel=\"nofollow noreferrer\"><code>std::array&lt;std::uint32_t, 256&gt;</code></a>, since you don't ever need to resize <code>B</code>. (Or even better, <code>std::array&lt;std::uint32_t, std::numeric_limits&lt;unsigned char&gt;::max()+1&gt;</code>).</p>\n\n<hr>\n\n<p>I'm not an expert on this particular search algorithm, but the preprocessing step appears to set bit <code>p</code> in element <code>c</code> of <code>B</code> if the character <code>c</code> matches pattern element <code>p</code>. Since a wildcard pattern element can match any character, it seems reasonable that every element of <code>B</code> should have the bits corresponding to wildcard characters set. In other words, instead of initialising every element of <code>B</code> to 0, initialise them to the mask of wildcard positions in the pattern.</p>\n\n<p>I don't know if that is sufficient to get the algorithm to work with wildcards, but it could be worth a try.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7346067"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 440, "favorite_count": 0, "accepted_answer_id": 54674025, "answer_count": 1, "score": -1, "last_activity_date": 1550087570, "creation_date": 1550071396, "last_edit_date": 1550073442, "question_id": 54673656, "link": "https://stackoverflow.com/questions/54673656/implementing-the-backward-nondeterministic-dawg-matching-algorithm", "title": "Implementing the Backward Nondeterministic Dawg Matching algorithm", "body": "<p>I'm trying to implement the BNDM algorithm in my code, in order to perform a fast pattern search.</p>\n\n<p>I found some code <a href=\"http://algo.pw/algo/53/\" rel=\"nofollow noreferrer\">online</a> and tried to adjust it for my use case:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ewX0v.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ewX0v.png\" alt=\"codeadjusted\"></a></p>\n\n<p>I think that I did something wrong while changing the values, since the algorithm takes a few minutes to finish (I was expecting it to be faster).</p>\n\n<hr>\n\n<p>Using <strong>std::search</strong> takes me 30 seconds (with wildcards).\nThis takes me around 4-5 minutes (without wildcards).</p>\n\n<p>The reason I'm casting everything to (unsigned char) is because the program crashes otherwise, since both my data and pattern hold hex values.</p>\n\n<hr>\n\n<p>What I'd like to know is, where did I go wrong with this implementation (why is it running so slow)? and how can I include the ability to search for a pattern that contains wildcards?</p>\n\n<hr>\n\n<p>EDIT*\nThe issue with speed has been solved by switching build from debug to release.\nAlso changing the size of the B array to 256 made it even faster.</p>\n\n<p>The only issue I currently have now is how to implement a way to use wildcards using this algorithm.</p>\n\n<p>Current code:</p>\n\n<pre><code>vector&lt;unsigned int&gt; get_matches(const vector&lt;char&gt; &amp; data, const string &amp; pattern) {\nvector&lt;unsigned int&gt; matches;\n//vector&lt;char&gt;::const_iterator walk = data.begin();\n\nstd::array&lt;std::uint32_t, 256&gt; B{ 0 };\nint m = pattern.size();\nint n = data.size();\n\nint i, j, s, d, last;\n//if (m &gt; WORD_SIZE)\n//  error(\"BNDM\");\n\n// Pre processing \n//memset(B, 0, ASIZE * sizeof(int));\ns = 1;\nfor (i = m - 1; i &gt;= 0; i--) {\n    B[(unsigned char)pattern[i]] |= s;\n    s &lt;&lt;= 1;\n}\n\n// Searching phase \nj = 0;\nwhile (j &lt;= n - m) {\n    i = m - 1; last = m;\n    d = ~0;\n    while (i &gt;= 0 &amp;&amp; d != 0) {\n        d &amp;= B[(unsigned char)data[j + i]];\n        i--;\n        if (d != 0) {\n            if (i &gt;= 0)\n                last = i + 1;\n            else\n                matches.emplace_back(j);\n        }\n        d &lt;&lt;= 1;\n    }\n    j += last;\n}\nreturn matches;\n}\n</code></pre>\n"}, {"tags": ["c++", "gtk2"], "owner": {"reputation": 1235, "user_id": 659157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7250958a1850912ffc324988dcbdd424?s=128&d=identicon&r=PG", "display_name": "Sat", "link": "https://stackoverflow.com/users/659157/sat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1550069976, "creation_date": 1550069976, "question_id": 54673171, "link": "https://stackoverflow.com/questions/54673171/how-to-fill-entire-window-with-image-and-allow-resizing-of-window", "title": "How to fill entire window with image and allow resizing of window?", "body": "<p>I need an image to be resized to entire window and maintain the option to shrink/resize window.\nAs a separate task it is easily accomplished but not together.\nExample code that I use is:</p>\n\n<pre><code>    myWindow = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n\n    gtk_window_set_title(GTK_WINDOW(myWindow), \"name\");\n    gtk_window_set_default_size(GTK_WINDOW(myWindow), myWidth, myHeight);\n    gtk_window_set_resizable(GTK_WINDOW(myWindow), TRUE);\n    g_signal_connect(myWindow, \"delete-event\", G_CALLBACK(PrivDeleteEvent), this);\n    g_signal_connect(myWindow, \"destroy\", G_CALLBACK(PrivOnDestroy), this);\n\n    myImage = gtk_image_new();\n\n    GtkWidget* container = gtk_alignment_new(0, 0, 1, 1);\n    gtk_container_add(GTK_CONTAINER(myWindow), container);\n    gtk_container_add(GTK_CONTAINER(container), myImage);\n\n    g_signal_connect(myImage, \"expose-event\", G_CALLBACK(PrivOnImageExposeEvent), this);\n\n    gtk_widget_show_all(myWindow);\n\n    gtk_main();\n\nvoid \nPrivSetImage()\n{\n    GdkPixbuf* pixbuf = gdk_pixbuf_new_from_data(...);\n    gtk_image_set_from_pixbuf(GTK_IMAGE(myImage), pixbuf);\n}\n</code></pre>\n\n<p>After image widget resized I call some rendering stuff and then show it in the GtkImage itself. This works good, i see image and I am able to resize window. But after gtk_image_set_from_pixbuf called I no longer able to shrink window smaller than size used to create Pixbuf. As if somewhere inside there is a call to gtk_widget_set_size_request with Pixbuf dimensions which blocks window to shrink past pixbuf size.\nAny suggestion ?</p>\n"}, {"tags": ["c++", "c++11", "boost-asio", "stdthread"], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1550071618, "post_id": 54673700, "comment_id": 96137167, "body": "It will likely be clang. Other than this, I assume it could be ABI mismatch run/linktime (basically a variation of ODR violation)"}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1550072099, "post_id": 54673700, "comment_id": 96137440, "body": "It was the lack of ASIO_HAS_THREADS."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1550072229, "post_id": 54673700, "comment_id": 96137525, "body": "@ruipacheco there is something odd about your platform if <code>ASIO_HAS_THREADS</code> isn&#39;t defined automatically, you should submit a bug report to the asio project to get this fixed (with full details of your platform, compiler version and compiler flags)."}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1550131880, "post_id": 54673700, "comment_id": 96159733, "body": "@AlanBirtles Opened a bug report with asio."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550132614, "post_id": 54673700, "comment_id": 96160081, "body": "A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is always helpful, your issue report contains the significant fact that you are defining <code>ASIO_DISABLE_THREADS=1</code> so its not surprising that threads are disabled"}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1550138193, "post_id": 54673700, "comment_id": 96163098, "body": "@AlanBirtles I have both defined now and it works. Is this expected?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550143420, "post_id": 54673700, "comment_id": 96166219, "body": "Yes <code>ASIO_DISABLE_THREADS</code> disables the automatic definition of <code>ASIO_HAS_THREADS</code> but doesn&#39;t stop <code>ASIO_HAS_THREADS</code> from working"}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 3, "last_activity_date": 1550138046, "last_edit_date": 1550138046, "creation_date": 1550071544, "answer_id": 54673700, "question_id": 54673157, "link": "https://stackoverflow.com/questions/54673157/asiothread-pool-fails-before-constructor-is-even-called/54673700#54673700", "title": "asio::thread_pool fails before constructor is even called", "body": "<p>It looks like you are getting the exception thrown from the <code>asio::nul_thread</code> constructor: <a href=\"https://github.com/chriskohlhoff/asio/blob/22afb86087a77037cd296d27134756c9b0d2cb75/asio/include/asio/detail/null_thread.hpp#L39\" rel=\"nofollow noreferrer\">https://github.com/chriskohlhoff/asio/blob/22afb86087a77037cd296d27134756c9b0d2cb75/asio/include/asio/detail/null_thread.hpp#L39</a></p>\n\n<p>This will only happen when <code>ASIO_HAS_THREADS</code> is not defined.</p>\n\n<p>Your definition of <code>ASIO_DISABLE_THREADS=1</code> is causing the automatic definition of <code>ASIO_HAS_THREADS</code> to be disabled, you should remove it.</p>\n"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 54673700, "answer_count": 1, "score": 0, "last_activity_date": 1550138046, "creation_date": 1550069935, "last_edit_date": 1550137993, "question_id": 54673157, "link": "https://stackoverflow.com/questions/54673157/asiothread-pool-fails-before-constructor-is-even-called", "title": "asio::thread_pool fails before constructor is even called", "body": "<p>I'm trying to implement a thread pool and discovered <a href=\"https://www.boost.org/doc/libs/1_69_0/doc/html/boost_asio/reference/thread_pool.html\" rel=\"nofollow noreferrer\">asio::thread_pool</a>. I created a simple class that is meant to use the thread pool but it fails before even reaching my class's constructor:</p>\n\n<p><strong>.hpp</strong></p>\n\n<pre><code>namespace asio {\n  namespace detail {\n\n    template &lt;typename Exception&gt;\n    void throw_exception(const asio::invalid_service_owner &amp;service_owner) {\n      std::cerr &lt;&lt; \"Something just happened: \" &lt;&lt; service_owner.what() &lt;&lt; std::endl;\n      std::terminate();\n    }\n\n    template &lt;typename Exception&gt;\n    void throw_exception(const Exception &amp;e) {\n      std::cerr &lt;&lt; \"Something just happened: \" &lt;&lt; e.what() &lt;&lt; std::endl;\n      std::terminate();\n    }\n  }  // namespace detail\n}  // namespace asio\n\nnamespace dbc {\n\n  namespace detail {\n\n    /// \\brief Connection pool.\n    struct pool : public std::enable_shared_from_this&lt;pool&gt; {\n      // Make object non-copyable.\n      pool(const pool &amp;) = delete;\n      auto operator=(const pool &amp;) -&gt; pool &amp; = delete;\n\n      /// \\brief Constructor\n      /// \\param[in] config Configuration data supplied by the end user.\n      explicit pool(const pool_parameters &amp;config) noexcept;\n\n      pool_parameters m_config;\n      /// \\brief Thread pool where tasks are asynchrinously executed.\n      asio::thread_pool m_t_pool;\n    };\n  }  // namespace detail\n}  // namespace dbc\n</code></pre>\n\n<p><strong>.cpp</strong></p>\n\n<pre><code>pool::pool(const pool_parameters&amp; config) noexcept : m_config{config} {}\n</code></pre>\n\n<p>I also have a test that just creates a <code>std::shared_ptr</code> of pool:</p>\n\n<pre><code>auto p = std::make_shared&lt;pool&gt;(conf);\n</code></pre>\n\n<p>and that crashes with the following error:</p>\n\n<p><strong>thread: Operation not supported on socket</strong></p>\n\n<p>and the following stack trace:</p>\n\n<pre><code>* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGABRT\n  * frame #0: 0x00007fff6418d23e libsystem_kernel.dylib`__pthread_kill + 10\n    frame #1: 0x00007fff64243c1c libsystem_pthread.dylib`pthread_kill + 285\n    frame #2: 0x00007fff640f61c9 libsystem_c.dylib`abort + 127\n    frame #3: 0x00007fff61776231 libc++abi.dylib`abort_message + 231\n    frame #4: 0x00007fff617762f4 libc++abi.dylib`default_terminate_handler() + 48\n    frame #5: 0x00007fff61781dfe libc++abi.dylib`std::__terminate(void (*)()) + 8\n    frame #6: 0x00007fff61781e85 libc++abi.dylib`std::terminate() + 69\n    frame #7: 0x0000000100005409 integration`void asio::detail::throw_exception&lt;std::__1::system_error&gt;(e=0x00007ffeefbfd5c0) at pool.hpp:23\n    frame #8: 0x0000000100005364 integration`asio::detail::do_throw_error(err=0x00007ffeefbfd668, location=\"thread\") at throw_error.ipp:49\n    frame #9: 0x0000000100005312 integration`asio::detail::throw_error(err=0x00007ffeefbfd668, location=\"thread\") at throw_error.hpp:41\n    frame #10: 0x00000001000052b1 integration`asio::detail::null_thread::null_thread&lt;asio::thread_pool::thread_function&gt;(this=0x0000000101002d20, (null)=thread_function @ 0x00007ffeefbfd688, (null)=0) at null_thread.hpp:39\n    frame #11: 0x00000001000051e3 integration`asio::detail::null_thread::null_thread&lt;asio::thread_pool::thread_function&gt;(this=0x0000000101002d20, (null)=thread_function @ 0x00007ffeefbfd6f8, (null)=0) at null_thread.hpp:38\n    frame #12: 0x00000001000051a4 integration`asio::detail::thread_group::item::item&lt;asio::thread_pool::thread_function&gt;(this=0x0000000101002d20, f=thread_function @ 0x00007ffeefbfd738, next=0x0000000000000000) at thread_group.hpp:73\n    frame #13: 0x0000000100005165 integration`asio::detail::thread_group::item::item&lt;asio::thread_pool::thread_function&gt;(this=0x0000000101002d20, f=thread_function @ 0x00007ffeefbfd768, next=0x0000000000000000) at thread_group.hpp:75\n    frame #14: 0x0000000100005100 integration`void asio::detail::thread_group::create_thread&lt;asio::thread_pool::thread_function&gt;(this=0x0000000101002f98, f=thread_function @ 0x00007ffeefbfd7b8) at thread_group.hpp:44\n    frame #15: 0x0000000100003d87 integration`void asio::detail::thread_group::create_threads&lt;asio::thread_pool::thread_function&gt;(this=0x0000000101002f98, f=thread_function @ 0x00007ffeefbfd7f8, num_threads=2) at thread_group.hpp:52\n    frame #16: 0x0000000100003c06 integration`asio::thread_pool::thread_pool(this=0x0000000101002f88) at thread_pool.ipp:43\n    frame #17: 0x0000000100002a35 integration`asio::thread_pool::thread_pool(this=0x0000000101002f88) at thread_pool.ipp:38\n    frame #18: 0x00000001000029ab integration`dbc::detail::pool::pool(this=0x0000000101002f28, config=0x00007ffeefbfe2b8) at pool.cpp:9\n    frame #19: 0x0000000100002a8d integration`dbc::detail::pool::pool(this=0x0000000101002f28, config=0x00007ffeefbfe2b8) at pool.cpp:9\n    frame #20: 0x0000000100159523 integration`std::__1::shared_ptr&lt;dbc::detail::pool&gt; std::__1::shared_ptr&lt;dbc::detail::pool&gt;::make_shared&lt;dbc::pool_parameters&amp;&gt;(dbc::pool_parameters&amp;&amp;&amp;) [inlined] std::__1::__compressed_pair_elem&lt;dbc::detail::pool, 1, false&gt;::__compressed_pair_elem&lt;dbc::pool_parameters&amp;, 0ul&gt;(this=0x0000000101002f28, __args=size=1) at memory:2103\n    frame #21: 0x00000001001594f5 integration`std::__1::shared_ptr&lt;dbc::detail::pool&gt; std::__1::shared_ptr&lt;dbc::detail::pool&gt;::make_shared&lt;dbc::pool_parameters&amp;&gt;(dbc::pool_parameters&amp;&amp;&amp;) [inlined] std::__1::__compressed_pair&lt;std::__1::allocator&lt;dbc::detail::pool&gt;, dbc::detail::pool&gt;::__compressed_pair&lt;std::__1::allocator&lt;dbc::detail::pool&gt;&amp;, dbc::pool_parameters&amp;&gt;(this=0x0000000101002f28, __first_args=size=1, __second_args=size=1) at memory:2205\n    frame #22: 0x000000010015945d integration`std::__1::shared_ptr&lt;dbc::detail::pool&gt; std::__1::shared_ptr&lt;dbc::detail::pool&gt;::make_shared&lt;dbc::pool_parameters&amp;&gt;(dbc::pool_parameters&amp;&amp;&amp;) [inlined] std::__1::__compressed_pair&lt;std::__1::allocator&lt;dbc::detail::pool&gt;, dbc::detail::pool&gt;::__compressed_pair&lt;std::__1::allocator&lt;dbc::detail::pool&gt;&amp;, dbc::pool_parameters&amp;&gt;(this=0x0000000101002f28, __pc=piecewise_construct_t @ 0x00007ffeefbfdd10, __first_args=size=1, __second_args=size=1) at memory:2206\n    frame #23: 0x0000000100159433 integration`std::__1::shared_ptr&lt;dbc::detail::pool&gt; std::__1::shared_ptr&lt;dbc::detail::pool&gt;::make_shared&lt;dbc::pool_parameters&amp;&gt;(dbc::pool_parameters&amp;&amp;&amp;) [inlined] std::__1::__shared_ptr_emplace&lt;dbc::detail::pool, std::__1::allocator&lt;dbc::detail::pool&gt; &gt;::__shared_ptr_emplace&lt;dbc::pool_parameters&amp;&gt;(this=0x0000000101002f10, __a=allocator&lt;dbc::detail::pool&gt; @ 0x00007ffeefbfdcd0, __args=0x00007ffeefbfe2b8) at memory:3618\n    frame #24: 0x00000001001591ea integration`std::__1::shared_ptr&lt;dbc::detail::pool&gt; std::__1::shared_ptr&lt;dbc::detail::pool&gt;::make_shared&lt;dbc::pool_parameters&amp;&gt;(dbc::pool_parameters&amp;&amp;&amp;) [inlined] std::__1::__shared_ptr_emplace&lt;dbc::detail::pool, std::__1::allocator&lt;dbc::detail::pool&gt; &gt;::__shared_ptr_emplace&lt;dbc::pool_parameters&amp;&gt;(this=0x0000000101002f10, __a=allocator&lt;dbc::detail::pool&gt; @ 0x00007ffeefbfdca0, __args=0x00007ffeefbfe2b8) at memory:3619\n    frame #25: 0x00000001001591ce integration`std::__1::shared_ptr&lt;dbc::detail::pool&gt; std::__1::shared_ptr&lt;dbc::detail::pool&gt;::make_shared&lt;dbc::pool_parameters&amp;&gt;(__args=0x00007ffeefbfe2b8) at memory:4277\n    frame #26: 0x000000010015890e integration`____C_A_T_C_H____T_E_S_T____0() [inlined] std::__1::enable_if&lt;!(is_array&lt;dbc::detail::pool&gt;::value), std::__1::shared_ptr&lt;dbc::detail::pool&gt; &gt;::type std::__1::make_shared&lt;dbc::detail::pool, dbc::pool_parameters&amp;&gt;(__args=0x00007ffeefbfe2b8) at memory:4656\n    frame #27: 0x00000001001588f6 integration`____C_A_T_C_H____T_E_S_T____0() at pool.cpp:16\n    frame #28: 0x0000000100044da3 integration`Catch::TestInvokerAsFunction::invoke(this=0x0000000101002ac0) const at catch.hpp:11605\n    frame #29: 0x0000000100031937 integration`Catch::TestCase::invoke(this=0x0000000101005f20) const at catch.hpp:11506\n    frame #30: 0x000000010003182d integration`Catch::RunContext::invokeActiveTestCase(this=0x00007ffeefbff308) at catch.hpp:10365\n    frame #31: 0x000000010002d17b integration`Catch::RunContext::runCurrentTest(this=0x00007ffeefbff308, redirectedCout=\"\", redirectedCerr=\"\") at catch.hpp:10339\n    frame #32: 0x000000010002aa47 integration`Catch::RunContext::runTest(this=0x00007ffeefbff308, testCase=0x0000000101005f20) at catch.hpp:10115\n    frame #33: 0x00000001000362f9 integration`Catch::(anonymous namespace)::runTests(config=std::__1::shared_ptr&lt;Catch::Config&gt;::element_type @ 0x0000000101003188 strong=4 weak=1) at catch.hpp:10667\n    frame #34: 0x0000000100034ea6 integration`Catch::Session::runInternal(this=0x00007ffeefbff780) at catch.hpp:10862\n    frame #35: 0x0000000100034b85 integration`Catch::Session::run(this=0x00007ffeefbff780) at catch.hpp:10819\n    frame #36: 0x000000010007264a integration`int Catch::Session::run&lt;char&gt;(this=0x00007ffeefbff780, argc=2, argv=0x00007ffeefbff8f8) at catch.hpp:10565\n    frame #37: 0x0000000100072592 integration`main(argc=2, argv=0x00007ffeefbff8f8) at catch.hpp:14318\n    frame #38: 0x00007fff6404ded9 libdyld.dylib`start + 1\n    frame #39: 0x00007fff6404ded9 libdyld.dylib`start + 1\n</code></pre>\n\n<p>My test is called \"integration\" and I'm using the Catch test framework.</p>\n\n<p>It doesn't help if I call <code>m_t_pool.join()</code> on the destructor of pool.</p>\n\n<p>This is very confusing as according to the documentation I should be able to create an instance of thread_pool by itself.</p>\n\n<p>This is my Cmake configuration:</p>\n\n<pre><code>target_compile_definitions(\n  ${PROJECT_NAME}\n    PRIVATE\n      ASIO_STANDALONE=1\n      ASIO_NO_EXCEPTIONS=1\n      ASIO_NO_DEPRECATED=1\n      ASIO_DISABLE_THREADS=1\n)\n</code></pre>\n"}, {"tags": ["c++", "cout"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 2, "creation_date": 1550069835, "post_id": 54673114, "comment_id": 96135947, "body": "This is not valid C++."}, {"owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "edited": false, "score": 5, "creation_date": 1550069857, "post_id": 54673114, "comment_id": 96135967, "body": "replace <code>int line[n]</code> with <code>std::vector&lt;int&gt; line(n)</code>"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550069883, "post_id": 54673114, "comment_id": 96135996, "body": "And what do you mean by unexpected?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1550069987, "post_id": 54673114, "comment_id": 96136066, "body": "we dont know what you expect or what satisfies you unless you tell us"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1550070035, "post_id": 54673114, "comment_id": 96136095, "body": "There is no point in storing the inputs in an array since you&#39;re only using the last value you read."}, {"owner": {"reputation": 13, "user_id": 11057138, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X2R37CSSfxQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOTjY-RK_xHNzZZUKpLyQ58C1M_CA/mo/photo.jpg?sz=128", "display_name": "mahin", "link": "https://stackoverflow.com/users/11057138/mahin"}, "edited": false, "score": 0, "creation_date": 1550070069, "post_id": 54673114, "comment_id": 96136125, "body": "I am getting a different type of output with the same input. For example, once I am getting 7 and then 1855857143"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1550070102, "post_id": 54673114, "comment_id": 96136148, "body": "@mahin And what are the inputs? (And what is the online compiler?)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550070262, "post_id": 54673114, "comment_id": 96136255, "body": "Please include: input, expected output and actual output in the question"}, {"owner": {"reputation": 13, "user_id": 11057138, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X2R37CSSfxQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOTjY-RK_xHNzZZUKpLyQ58C1M_CA/mo/photo.jpg?sz=128", "display_name": "mahin", "link": "https://stackoverflow.com/users/11057138/mahin"}, "edited": false, "score": 0, "creation_date": 1550070362, "post_id": 54673114, "comment_id": 96136332, "body": "5 7 + 5 - 10 - 20 + 40 - 20 these are input, and I am getting 22 1 as output using code block. But if I use online compiler then it doesn&#39;t work@molbdnilo"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1550070454, "post_id": 54673114, "comment_id": 96136389, "body": "@mahin You can&#39;t read non-integers into an <code>int</code>. I&#39;m guessing that you had whitespace between the signs and the numbers in the failing cases but not when it worked."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550070500, "post_id": 54673114, "comment_id": 96136422, "body": "Please <a href=\"https://stackoverflow.com/posts/54673114/edit\">edit</a> your question to include: input, expected output and actual output"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1550070857, "post_id": 54673114, "comment_id": 96136660, "body": "<i>&quot;it&#39;s something else&quot;</i>, you should tell us <b>what</b> exactly."}, {"owner": {"reputation": 13, "user_id": 11057138, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X2R37CSSfxQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOTjY-RK_xHNzZZUKpLyQ58C1M_CA/mo/photo.jpg?sz=128", "display_name": "mahin", "link": "https://stackoverflow.com/users/11057138/mahin"}, "edited": false, "score": 0, "creation_date": 1550070999, "post_id": 54673114, "comment_id": 96136755, "body": "once I am getting 7 and then 1855857143 and if I run again then getting another garbage value. this value changes once I rerun the code@Jabberwocky"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 2, "creation_date": 1550071023, "post_id": 54673114, "comment_id": 96136776, "body": "Maybe you should simply not put a space between the sign and the numbers during input: try to input <code>+5</code> instead of <code>+&lt;space&gt;5</code>"}, {"owner": {"reputation": 13, "user_id": 11057138, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X2R37CSSfxQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOTjY-RK_xHNzZZUKpLyQ58C1M_CA/mo/photo.jpg?sz=128", "display_name": "mahin", "link": "https://stackoverflow.com/users/11057138/mahin"}, "edited": false, "score": 0, "creation_date": 1550071139, "post_id": 54673114, "comment_id": 96136852, "body": "Unfortunately, this is for an online judge, So I can&#39;t do that@Jabberwocky"}, {"owner": {"reputation": 158, "user_id": 11004853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lyz1P.jpg?s=128&g=1", "display_name": "dzuda11", "link": "https://stackoverflow.com/users/11004853/dzuda11"}, "edited": false, "score": 0, "creation_date": 1550071142, "post_id": 54673114, "comment_id": 96136855, "body": "@mahin witch online compiler do you use?"}, {"owner": {"reputation": 13, "user_id": 11057138, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X2R37CSSfxQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOTjY-RK_xHNzZZUKpLyQ58C1M_CA/mo/photo.jpg?sz=128", "display_name": "mahin", "link": "https://stackoverflow.com/users/11057138/mahin"}, "reply_to_user": {"reputation": 158, "user_id": 11004853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lyz1P.jpg?s=128&g=1", "display_name": "dzuda11", "link": "https://stackoverflow.com/users/11004853/dzuda11"}, "edited": false, "score": 0, "creation_date": 1550071204, "post_id": 54673114, "comment_id": 96136908, "body": "repl.it @dzuda11"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1550073961, "post_id": 54673114, "comment_id": 96138548, "body": "If the input <i>has to be</i> in the form &quot;&lt;sign&gt;&lt;space&gt;&lt;number&gt;&quot;, your code is unable to  read it. <code>cin&gt;&gt;line[i];</code> will fail when trying to read a non integer input like <code>&#39;+&#39;</code>. So maybe what you need is something like <code>std::string op; cin &gt;&gt; op &gt;&gt; number; if (op == &quot;+&quot;) {... </code>."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550081066, "post_id": 54674671, "comment_id": 96142621, "body": "<code>int[n];</code> for non compile time constant <code>n</code> is either forbidden or allowed as compiler extension, but it does not invoke undefined behviour"}, {"owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550100004, "post_id": 54674671, "comment_id": 96150760, "body": "@user463035818: The C++ standard does not accept VLAs which makes it forbidden, but compilers support them and not always with the need for an extension. So what happens when <code>int [n]</code> is both forbidden and supported? I guess in that case, C++ would say: &quot;I do not accept this code, but if you still want to go for it, then you&#39;re on your own!&quot;. That&#39;s what I meant by undefined behavior. And again, it&#39;s only a guess..."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550135910, "post_id": 54674671, "comment_id": 96161752, "body": "when the compiler defines what happens for VLAs then it is not undefined. Its just not standard c++"}, {"owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550137759, "post_id": 54674671, "comment_id": 96162838, "body": "@user463035818: I see your point. One can argue however that ok, it is defined by the compiler (if you&#39;re lucky because not all compilers support them - and what if it&#39;s a custom compiler), but it is not defined in the standard. So, defined by the compiler, undefined by the standard. Overthinking it...."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550141486, "post_id": 54674671, "comment_id": 96165143, "body": "well I have to admit, i was not completely right, <code>int[n];</code> only produces an error with <code>-pedantic-errors</code> but not with <code>-pedantic</code> (only a warning), while <code>-pedantic</code> should be enough to make the compiler behave standard compliant, I am still a bit confused why <code>int[n]</code> is not required to result in an error, will have to do some more reading..."}, {"owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550144153, "post_id": 54674671, "comment_id": 96166595, "body": "@user463035818: Good point about the <code>-pedantic-errors</code>! I&#39;ll need to put that in the answer too. I think it may have something to do with it being valid in C and most compilers tend to allow C code. Not sure though. Please post a comment if you find something on this."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550144435, "post_id": 54674671, "comment_id": 96166742, "body": "@user463035818 <code>-pedantic</code> <i>does</i> make it standard compliant. The standard requires a diagnostic message if the code is ill-formed, but it doesn&#39;t have to be a error; a simple warning is enough."}], "tags": [], "owner": {"reputation": 2564, "user_id": 2754510, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/OMF8A.jpg?s=128&g=1", "display_name": "Constantinos Glynos", "link": "https://stackoverflow.com/users/2754510/constantinos-glynos"}, "is_accepted": true, "score": 1, "last_activity_date": 1550149015, "last_edit_date": 1550149015, "creation_date": 1550074315, "answer_id": 54674671, "question_id": 54673114, "link": "https://stackoverflow.com/questions/54673114/why-i-am-getting-garbageunwanted-output-here/54674671#54674671", "title": "Why I am getting garbage(unwanted) output here?", "body": "<p>The main problem I can see in your code is this:</p>\n\n<pre><code>int line[n];\n</code></pre>\n\n<p>This is known as a <a href=\"https://en.wikipedia.org/wiki/Variable-length_array\" rel=\"nofollow noreferrer\">VLA</a> (Variable Length Array) and it is not supported in C++. It is valid in C. Most compilers still allow this behaviour due to the fact that C++ is based on C, but it is not valid C++ code. In a previous question, I found out that clang supports designated initializers, when gcc and vc++ did not. The reason is because some compilers like clang, support c99-extensions by default. My point is that just because the code compiles, it doesn't mean it's always right.</p>\n\n<p>If you compile with the <code>-pedantic</code> argument, you will see that the compiler is warning you about this being a C99 feature. Have a look at the rextester example <a href=\"https://rextester.com/MCLV1037\" rel=\"nofollow noreferrer\">here</a>. From the comments below, using <code>-pedantic-errors</code> in the compiler flags, will prompt an error.</p>\n\n<p>If you know the size of the array before run-time, then you should use a static array <code>int line[4];</code>, but if you don't then you need to use a dynamic array. std::vector is essentially a dynamic array that also handles memory for you. It's easy to use and very efficient. <code>std::vector&lt;int&gt; line;</code> </p>\n\n<p>You can read more about the vector container here: <a href=\"http://www.cplusplus.com/reference/vector/vector/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/vector/vector/</a></p>\n\n<p>Btw, I tried your code in rextester, ideone and repl.it and I got the same results: <code>22 1</code>. I think what you are witnessing it undefined behaviour.</p>\n\n<p>Also, you can qualify <code>int n</code> with <code>constexpr</code> and it'll be fine.</p>\n\n<pre><code>constexr int n = 200;\nint line[n]; //now it's ok.\n</code></pre>\n\n<p>But this again means that you know the size of the array at compile time.</p>\n"}], "owner": {"reputation": 13, "user_id": 11057138, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X2R37CSSfxQ/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOTjY-RK_xHNzZZUKpLyQ58C1M_CA/mo/photo.jpg?sz=128", "display_name": "mahin", "link": "https://stackoverflow.com/users/11057138/mahin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 54674671, "answer_count": 1, "score": 1, "last_activity_date": 1550149015, "creation_date": 1550069800, "last_edit_date": 1550070751, "question_id": 54673114, "link": "https://stackoverflow.com/questions/54673114/why-i-am-getting-garbageunwanted-output-here", "title": "Why I am getting garbage(unwanted) output here?", "body": "<p>Whenever I am writing this following code, I am getting garbage(unexpected) output in some online compiler, but if I use code block then getting satisfied output. <strong>So my question is why I am getting this type of output?</strong></p>\n\n<p>for example, if I input</p>\n\n<pre><code>5 7\n+ 5\n- 10\n- 20\n+ 40\n- 20\n</code></pre>\n\n<p>then I am getting </p>\n\n<pre><code>22 1\n</code></pre>\n\n<p>in the code block. But in the online compiler, it's something else.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cstdlib&gt;\nusing namespace std;\nint main()\n{\n    int have, n, i;\n    int kid=0;\n\n    cin&gt;&gt;n&gt;&gt;have;\n\n    int line[n];\n\n    for(i=0;i&lt;n;i++)\n    {\n        cin&gt;&gt;line[i];\n\n        if(line[i]&gt;=0)\n            have+=line[i];\n        else\n        {\n            if(have&gt;=abs(line[i]))\n                have+=line[i];\n            else\n                kid++;\n        }\n    }\n\n    cout&lt;&lt;have&lt;&lt;\" \"&lt;&lt;kid&lt;&lt;endl;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1550068128, "post_id": 54672365, "comment_id": 96134794, "body": "Why don&#39;t you use lock-free queue from <a href=\"https://www.boost.org/doc/libs/1_69_0/doc/html/lockfree.html\" rel=\"nofollow noreferrer\">boost lock-free</a> or <a href=\"https://github.com/khizmax/libcds\" rel=\"nofollow noreferrer\">libcdc</a>. 2. &quot;waits unblocking&quot; - why do you think this code is &quot;unblocking&quot;, remove you&#39;r hack  <code>std::this_thread::sleep_for(2s);</code> and check the code without it."}, {"owner": {"reputation": 1755, "user_id": 5986881, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7a607dd49a0116e3ba869a66d6fd1ba0?s=128&d=identicon&r=PG", "display_name": "Samer Tufail", "link": "https://stackoverflow.com/users/5986881/samer-tufail"}, "edited": false, "score": 0, "creation_date": 1550068134, "post_id": 54672365, "comment_id": 96134798, "body": "why is the <code>add</code> waiting? it should just <code>produce</code>"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1550068348, "post_id": 54672365, "comment_id": 96134944, "body": "You can use <a href=\"https://www.boost.org/doc/libs/1_69_0/doc/html/boost/lockfree/spsc_queue.html\" rel=\"nofollow noreferrer\">boost single-writer/single-reader fifo queue</a> BTW"}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1550068796, "post_id": 54672365, "comment_id": 96135228, "body": "I understand there may be alternatives. What I am trying to do is understand why this is working. The code runs fine without the 2 second sleep in the producer. The reason <code>add</code> is waiting is to prevent queue overflow (the queue is limited to 5 entries)."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1550069265, "post_id": 54672365, "comment_id": 96135550, "body": "You state <code>&quot;What I am trying to do is understand why this is working&quot;</code>.  Can you clarify exactly why you think it <i>shouldn&#39;t</i> work.  Sorry if I&#39;m missing something."}, {"owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "edited": false, "score": 0, "creation_date": 1550069361, "post_id": 54672365, "comment_id": 96135606, "body": "<code>add</code> waits on <code>_notFullCv</code>, and <code>remove</code> waits on <code>_notEmptyCv</code>. How do these conditional variables get signaled for the very first time?"}], "answers": [{"tags": [], "owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1550069943, "creation_date": 1550069943, "answer_id": 54673161, "question_id": 54672365, "link": "https://stackoverflow.com/questions/54672365/how-should-conditional-variables-in-producer-consumer-implementations-be-initial/54673161#54673161", "title": "How should conditional variables in producer-consumer implementations be initialized", "body": "<blockquote>\n  <p>add waits on _notFullCv, and remove waits on _notEmptyCv. How do these\n  conditional variables get signaled for the very first time?</p>\n</blockquote>\n\n<p>They don't.  If you look at the <a href=\"https://en.cppreference.com/w/cpp/thread/condition_variable/wait\" rel=\"nofollow noreferrer\">documentation</a>, the overload of <code>std::condition_variable::wait</code> that accepts a lock <code>l</code> and predicate <code>pred</code> is effectively implemented as...</p>\n\n<pre><code>while (!pred())\n  wait(l);\n</code></pre>\n\n<p>The important part in your case being that the condition is checked <em>before</em> waiting.  Hence, the first call to <code>add</code> will find the queue not full and no call to <code>std::condition_variable::wait</code> (without a predicate) will be made.</p>\n"}], "owner": {"reputation": 1079, "user_id": 2308211, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/c44e36061f8bf558031c1ee44d038c5c?s=128&d=identicon&r=PG", "display_name": "SPMP", "link": "https://stackoverflow.com/users/2308211/spmp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 54673161, "answer_count": 1, "score": 1, "last_activity_date": 1550069943, "creation_date": 1550067517, "question_id": 54672365, "link": "https://stackoverflow.com/questions/54672365/how-should-conditional-variables-in-producer-consumer-implementations-be-initial", "title": "How should conditional variables in producer-consumer implementations be initialized", "body": "<p>I am trying to understand the use of conditional variables to implement producer-consumer buffers. I have the following code, which implements a queue for integers (which could be linux file descriptors). The code works as expected, but I am trying to understand why. Both enqueue and dequeue operations wait on some conditional variable before signaling the other conditional variable. Why are these waits unblocking? Is this due to spurious wakeups?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;list&gt;\n#include &lt;mutex&gt;\n#include &lt;chrono&gt;\n#include &lt;condition_variable&gt;\n\nusing namespace std::chrono_literals;\nusing std::cout;\nusing std::endl;\n\nclass FDQueue\n{\n    std::mutex _mutex;\n    std::condition_variable _notEmptyCv, _notFullCv;\n    std::list&lt;int&gt; _fds;\n    size_t _maxSize;\n\npublic:\n    void add(int fd) {\n        std::unique_lock&lt;std::mutex&gt; locker(this-&gt;_mutex);\n        this-&gt;_notFullCv.wait(locker, [this](){return this-&gt;_fds.size() &lt; this-&gt;_maxSize;});\n        cout&lt;&lt;\"Enqueue \"&lt;&lt;endl;\n        this-&gt;_fds.push_back(fd);\n        locker.unlock();\n        this-&gt;_notEmptyCv.notify_one();\n    }\n\n    int remove() {\n        std::unique_lock&lt;std::mutex&gt; locker(_mutex);\n        this-&gt;_notEmptyCv.wait(locker, [this](){return this-&gt;_fds.size() &gt; 0;});\n        int fd = this-&gt;_fds.front();\n        this-&gt;_fds.pop_front();\n        cout&lt;&lt;\"Dequeue\"&lt;&lt;endl;\n        locker.unlock();\n        this-&gt;_notFullCv.notify_all();\n        return fd;\n    }\n\n    FDQueue(size_t maxSize) : _maxSize(maxSize) {}\n};\n\nFDQueue queue(5);\n\nvoid producer() {\n    while (true) {\n        queue.add(0);\n        std::this_thread::sleep_for(2s);\n    }\n}\nvoid consumer() {\n    while (true) {\n        queue.remove();\n    }\n}\n\nint main() {\n    std::thread t1(producer);\n    std::thread t2(consumer);\n    t1.join();\n    t2.join();\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt-installer"], "answers": [{"tags": [], "owner": {"reputation": 493, "user_id": 6513449, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76af532b5435219034145df7290dbeaa?s=128&d=identicon&r=PG", "display_name": "Andrey  Yankovich", "link": "https://stackoverflow.com/users/6513449/andrey-yankovich"}, "is_accepted": false, "score": 0, "last_activity_date": 1557503140, "last_edit_date": 1557503140, "creation_date": 1557500741, "answer_id": 56080297, "question_id": 54672358, "link": "https://stackoverflow.com/questions/54672358/how-to-translate-installer-created-with-pre-built-qt-installer-framework-regardl/56080297#56080297", "title": "How to translate installer created with pre-built Qt installer framework regardless of OS language", "body": "<p>Unfortunately, you must translate each package separately.</p>\n\n<p>I made a pri file for myself with the automation of the whole interpolator translation process.</p>\n\n<p>Consider it in detail:</p>\n\n<p>installer.pri</p>\n\n<pre><code>QT_DIR = $$dirname(QMAKE_QMAKE)\nwin32:LUPDATE = $$QT_DIR/lupdate.exe\nunix:LUPDATE = $$QT_DIR/lupdate\n\nwin32:LRELEASE = $$QT_DIR/lrelease.exe\nunix:LRELEASE = $$QT_DIR/lrelease\n\n\nSUPPORT_LANGS = ru\n\n# this file search function with a specific extension\ndefineReplace(findFiles) {\n    patern = $$1\n    path = $$2\n\n    all_files = $$files(*$${patern}, true)\n    win32:all_files ~= s|\\\\\\\\|/|g\n    win32:path ~= s|\\\\\\\\|/|g\n\n    for(file, all_files) {\n        result += $$find(file, $$path)\n    }\n\n    return($$result)\n}\n\n# here we get a list of our installer's xml files (since each package must contain its own config.xml, I consider each xml file a potential package)\nXML_FILES = $$files(*.xml, true)\n\n# and for each language I support\nfor(LANG, SUPPORT_LANGS) {\n    # i add run lupdate command for all js and ui files of package\n    for(XML, XML_FILES) {\n        FILE_PATH = $$dirname(XML)\n\n        JS_FILES = $$findFiles(\".js\", $$FILE_PATH)\n        UI_FILES = $$findFiles(\".ui\", $$FILE_PATH)\n\n        commands += \"$$LUPDATE $$JS_FILES $$UI_FILES -ts $$FILE_PATH/$${LANG}.ts\"\n        TS_FILES += $$FILE_PATH/$${LANG}.ts\n\n    }\n\n    # I also add commands to lrelease for each ts file I created \n    for(TS, TS_FILES) {\n        commands += \"$$LRELEASE $$TS\"\n    }\n}\n\n# and execute all the accumulated commands \nfor(command, commands) {\n    system($$command)|error(\"Failed to run: $$command\")\n}\n</code></pre>\n\n<p>All you need is to put this installer.pri file in the root directory of your installer and connect it in the main pro file</p>\n\n<p>main.pro</p>\n\n<pre><code>include($$PWD/installer/installer.pri)\n\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 9283164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d22c1c8537a2a3a8912e6d61fc81036?s=128&d=identicon&r=PG&f=1", "display_name": "Amy jonas", "link": "https://stackoverflow.com/users/9283164/amy-jonas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1557503140, "creation_date": 1550067505, "last_edit_date": 1550996342, "question_id": 54672358, "link": "https://stackoverflow.com/questions/54672358/how-to-translate-installer-created-with-pre-built-qt-installer-framework-regardl", "title": "How to translate installer created with pre-built Qt installer framework regardless of OS language", "body": "<p>I'm trying to have a translated version of my installer which I've already created using a pre-built version of Qt installer framework, but the documentation is Inadequate  and I need to know where I should put the translation file(<code>en.qm</code> file which I've translated to the destination language)</p>\n\n<p>I've tried putting the translation file in the config folder and setting the <code>&lt;Translations&gt;</code> element in <code>config.xml</code> but nothing changes comparing to creating the installer without this element.\nthe only progress that I've achieved was when I put the <code>en.qm</code> in one of  package folders in meta folder and adding the <code>&lt;Translations&gt;</code> element in it's <code>package.xml</code>. but in this solution only half of the pages are translated.</p>\n\n<p>this is the translation element which I've added to <code>config.xml</code> and <code>package.xml</code><br>\n<code>&lt;Translations&gt;\n     &lt;Translation&gt;en.qm&lt;/Translation&gt;\n &lt;/Translations&gt;</code></p>\n\n<p>when <code>en.qm</code> is added to package file in meta folder ,new pages and some of default pages are translated ,but the fist page( welcome...) and start menu shortcuts page and next and back buttons are never translated. </p>\n\n<hr>\n\n<p>P.S:I need the installer in the my own language and the OS language is always English.</p>\n\n<hr>\n\n<p>P.S_2:I'm using Qt 5.9.1 and pre-built Qt installer framework 3.0.6 and I have created the <code>en.qm</code> file using the following command on the <code>installerfw.pro</code> of the source code of installer framework releases version 3.0.6.<br>\n<code>lupdate en.ts</code><br>\n and then<br>\n <code>lrelease installerfw.pro -ts en.ts</code>    </p>\n\n<hr>\n\n<p>Thank you</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 11056821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NLFjJep7ZNM/AAAAAAAAAAI/AAAAAAAAADg/LzvQalr_Xkk/photo.jpg?sz=128", "display_name": "Manh Hai", "link": "https://stackoverflow.com/users/11056821/manh-hai"}, "edited": false, "score": 0, "creation_date": 1550068217, "post_id": 54672386, "comment_id": 96134860, "body": "oh, that&#39;s right. But i dont know why using <code>string</code> instead of <code>void</code> makes this bug. Anyway, thank you very much! :D"}, {"owner": {"reputation": 45, "user_id": 11056821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NLFjJep7ZNM/AAAAAAAAAAI/AAAAAAAAADg/LzvQalr_Xkk/photo.jpg?sz=128", "display_name": "Manh Hai", "link": "https://stackoverflow.com/users/11056821/manh-hai"}, "edited": false, "score": 0, "creation_date": 1550069913, "post_id": 54672386, "comment_id": 96136018, "body": "Oh! this&#39;s my first time using stackoverflow. My english is even not good enough. Sorry for it."}], "tags": [], "owner": {"reputation": 999, "user_id": 7859598, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B2rVv02QIdo/AAAAAAAAAAI/AAAAAAAACew/FUFwHEbNSVo/photo.jpg?sz=128", "display_name": "Rietty", "link": "https://stackoverflow.com/users/7859598/rietty"}, "is_accepted": true, "score": 0, "last_activity_date": 1550067582, "creation_date": 1550067582, "answer_id": 54672386, "question_id": 54672265, "link": "https://stackoverflow.com/questions/54672265/how-to-fix-interrupted-console-when-using-inheritance/54672386#54672386", "title": "How to fix interrupted console when using inheritance", "body": "<p>As far as I can see your issue is that your <code>setName()</code> and <code>setPhone()</code> functions have a <code>string</code> return type, however they don't change anything. In general you should have these as a <code>void</code> return type.</p>\n\n<p>When I made this minor change the code compiled and ran perfectly fine for me.</p>\n\n<p>On that sidenote, your method/reasoning to have the <code>setPhone()</code> function in the <code>student</code> class is a bit odd, especially since the variable of <code>phone</code> is itself in your <code>people</code> class instead. </p>\n\n<p><a href=\"https://i.stack.imgur.com/KnGYT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KnGYT.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 45, "user_id": 11056821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NLFjJep7ZNM/AAAAAAAAAAI/AAAAAAAAADg/LzvQalr_Xkk/photo.jpg?sz=128", "display_name": "Manh Hai", "link": "https://stackoverflow.com/users/11056821/manh-hai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 54672386, "answer_count": 1, "score": 0, "last_activity_date": 1550068025, "creation_date": 1550067240, "last_edit_date": 1550068025, "question_id": 54672265, "link": "https://stackoverflow.com/questions/54672265/how-to-fix-interrupted-console-when-using-inheritance", "title": "How to fix interrupted console when using inheritance", "body": "<p>I'm a student and I'm just learning inheritance, so i do a simple example. But when i excuted my code, it just did the first statements and stopped. What's my fault? I have so experience to ask for debugging.</p>\n\n<pre><code>class people\n{\nprivate:\n    string name;\nprotected:\n    string phone;\npublic:\n    string age;\n    string setName(string name)\n    {\n        this-&gt; name = name;\n    }\n    string getName()\n    {\n        return name;\n    }\n};\n\nclass student: public people\n{\npublic:\n    string setPhone(string phone)\n    {\n        this-&gt; phone = phone;\n    }\n    string getPhone()\n    {\n        return phone;\n    }\n};\n\nint main()\n{\nstudent ict;\nstring name, phone;\ncout&lt;&lt;\"\\nEnter name: \"; getline(cin,name);\nict.setName(name);\ncout&lt;&lt;\"\\nEnter phone: \"; getline(cin,phone);\nict.setPhone(phone);\ncout&lt;&lt;\"\\nEnter age: \"; cin&gt;&gt;ict.age;\ncout&lt;&lt;\"\\n==============================\\nYour info: \";\ncout&lt;&lt;\"\\nName:\"&lt;&lt;ict.getName();\ncout&lt;&lt;\"\\nPhone: \"&lt;&lt;ict.getPhone();\ncout&lt;&lt;\"\\nAge: \"&lt;&lt;ict.age;\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c-strings"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 10, "creation_date": 1550066916, "post_id": 54672095, "comment_id": 96134004, "body": "To get around the problem I would write my own string class.  It doesn&#39;t need to be as extensive as <code>std::string</code> but encapsulating the string management and comparison makes the code that uses it so much easier to write."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550067065, "post_id": 54672095, "comment_id": 96134097, "body": "You <i>do</i> declare the <code>myStringCopy</code> function before you call it?"}, {"owner": {"reputation": 179, "user_id": 10668677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f56c830a91507766ab400783e43d80aa?s=128&d=identicon&r=PG&f=1", "display_name": "BalsamicVinegar", "link": "https://stackoverflow.com/users/10668677/balsamicvinegar"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1550067569, "post_id": 54672095, "comment_id": 96134394, "body": "@NathanOliver I tried that as well and managed to make one that works, the only problem is that my project specs give us exactly the data members we have to have in the RentalCar class and they have to be stored as char[] specifically, not a String object. Should&#39;ve mentioned that."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1550067576, "post_id": 54672095, "comment_id": 96134401, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, I can&#39;t reproduce the error with the posted code"}, {"owner": {"reputation": 179, "user_id": 10668677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f56c830a91507766ab400783e43d80aa?s=128&d=identicon&r=PG&f=1", "display_name": "BalsamicVinegar", "link": "https://stackoverflow.com/users/10668677/balsamicvinegar"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550067613, "post_id": 54672095, "comment_id": 96134428, "body": "@Someprogrammerdude Would I have to declare it in the header file of my class or can i just do it at the top of the source file?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 8, "creation_date": 1550067655, "post_id": 54672095, "comment_id": 96134457, "body": "@BRetnik That&#39;s a real bummer.  It&#39;s a shame so many classes don&#39;t actually teach C++ when they are teaching C++."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550067713, "post_id": 54672095, "comment_id": 96134496, "body": "Unless you intend to create your own string class (as is really recommended) and it should be used in other places, then create a new <code>MyString.h</code> header file to contain declarations of all your string functions. And put the definitions (implementations) in a separate source file."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1550068469, "post_id": 54672095, "comment_id": 96135014, "body": "@BRetnik -- <i>and they have to be stored as char[] specifically, not a String object</i> -- So you get points taken off for doing <i>more</i> work in creating a String class?   What you&#39;re being taught is how to easily create buffer overruns, thus unsecure code -- something that a good C++ course should not be teaching.  I can bet that after this course, many students will now use Java, Python, or C#, and drop C++ forever."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1550069438, "post_id": 54672095, "comment_id": 96135651, "body": "even if you cannot use <code>&lt;string&gt;</code>, there is still <code>&lt;cstring&gt;</code> to use :)  Use the <code>C</code> way more !"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1550069461, "post_id": 54672095, "comment_id": 96135669, "body": "Given this day and age, I am surprised that there are not a lot of teachers saying &quot;this is really bad teaching students like this&quot;, and thus (at the very least) spark a discussion among their peers..  How do you explain this passiveness of C++ teachers to speak up?  You&#39;re being taught garbage, unless there is a rhyme or reason to teaching you &quot;bad code&quot; and you will get a comparison to well written code later on."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1550069650, "post_id": 54672095, "comment_id": 96135809, "body": "First order of business when being denied access to <code>&lt;string&gt;</code> is to write your own <code>my_string</code> the follows the <a href=\"https://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">rule of five</a> and provides the operations you&#39;ll need. This is a small bit of work that <i>enormously</i> simplifies your other task. Why? Because then you know both <code>m_make</code> and <code>m_model</code> will behave correctly, without having to duplicate logic."}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550070843, "post_id": 54672095, "comment_id": 96136654, "body": "@PaulMcKenzie The problem is that these are often not C++ professors but computer science professors. In my experience, computer science professors are not always good programmers! Many of them also learned C++ years ago and never bothered to keep up with changes to the language."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "edited": false, "score": 1, "creation_date": 1550071737, "post_id": 54672095, "comment_id": 96137229, "body": "@MikeBorkland Granted, but C++ was standardized 20 years ago, thus <code>std::string</code> has been available since then.  That is a generation now.  Could you imagine a TV repair course teaching how to replace vacuum tubes?"}, {"owner": {"reputation": 704, "user_id": 7595618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51cf59e6785bbd9f82f28e8cfc0f2935?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Borkland", "link": "https://stackoverflow.com/users/7595618/mike-borkland"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550072050, "post_id": 54672095, "comment_id": 96137413, "body": "@PaulMcKenzie Oh, I agree with you completely."}, {"owner": {"reputation": 179, "user_id": 10668677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f56c830a91507766ab400783e43d80aa?s=128&d=identicon&r=PG&f=1", "display_name": "BalsamicVinegar", "link": "https://stackoverflow.com/users/10668677/balsamicvinegar"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1550074767, "post_id": 54672095, "comment_id": 96139061, "body": "@PaulMcKenzie I agree completely. I understand not letting us use it for a few projects, so that we get some experience working with pointers as we&#39;re first learning them with different data types, but it&#39;s weeks in at this point and we&#39;re still not allowed to use them. I (and many others in the class) are finding lots of difficulty trying to work with them in this way, which is just frustrating because it&#39;s more or less useless with <code>std::string</code> available."}], "answers": [{"tags": [], "owner": {"reputation": 12227, "user_id": 86515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a63278bb0f3e5beef0755a2d2033e999?s=128&d=identicon&r=PG&f=1", "display_name": "KitsuneYMG", "link": "https://stackoverflow.com/users/86515/kitsuneymg"}, "is_accepted": true, "score": 3, "last_activity_date": 1550069208, "creation_date": 1550069208, "answer_id": 54672931, "question_id": 54672095, "link": "https://stackoverflow.com/questions/54672095/constructing-strings-without-stdstring/54672931#54672931", "title": "Constructing strings without std::string", "body": "<pre><code>char* getMake() const;\nchar* getModel() const;\n</code></pre>\n\n<p>Says that you can return a pointer to a mutable value even when the class is immutable. The trailing <code>const</code> on the function declarations means this function specifically must work when the class as a whole is const, which means all* members pick up the <code>const</code> keyword.</p>\n\n<pre><code>const char* getMake() const { return m_make; }\nconst char* getModel() const { return m_model; }\nchar* getMake() { return m_make; } \nchar* getModel(){ return m_model; }\n</code></pre>\n\n<p>should work. <code>const</code> versions of the class with get the immutable values, but non-<code>const</code> won't. Although, returning non-<code>const</code> pointers breaks encapsulation. So I'd just do:</p>\n\n<pre><code>const char* getMake() const { return m_make; }\nconst char* getModel() const { return m_model; }\n</code></pre>\n\n<p>and leave it at that. Both mutable and immutable versions of the class will get immutable values from your get functions. This is probably the desired result.</p>\n\n<p>* <code>mutable</code> says hi and then slinks off to a corner to die.</p>\n"}, {"tags": [], "owner": {"reputation": 4537, "user_id": 1361901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea140060e08a193f5814b0ebd2eb6ef?s=128&d=identicon&r=PG", "display_name": "Joseph Larson", "link": "https://stackoverflow.com/users/1361901/joseph-larson"}, "is_accepted": false, "score": 1, "last_activity_date": 1550075513, "creation_date": 1550075513, "answer_id": 54675115, "question_id": 54672095, "link": "https://stackoverflow.com/questions/54672095/constructing-strings-without-stdstring/54675115#54675115", "title": "Constructing strings without std::string", "body": "<p>KitsuneYMG answers your compilation problem. I want to talk about your code a little further.</p>\n\n<p>First, this code is simpler.</p>\n\n<pre><code>char* myStringCopy(char* destination, const char* source) {\n    char * retVal = destination;\n    do {\n        *(destination++) = *(source++);\n    } while ( *(source++) != 0 );\n    return retVal;\n}\n</code></pre>\n\n<p>But if you want to use your code, this is also more understandable:</p>\n\n<pre><code>char* myStringCopy(char* destination, const char* source) {\n    int index = 0;\n    while(source[index] != '\\0') {\n        destination[index] = source[index];\n        index++;\n    }\n    destination[index] = '\\0';\n    return destination;\n}\n</code></pre>\n\n<p>But this is kind of a cute way to turn it around a little:</p>\n\n<pre><code>char* myStringCopy(char* destination, const char* source) {\n    int index = 0;\n    do {\n        destination[index] = source[index];\n    } while (source[index++]);\n\n    return destination;\n}\n</code></pre>\n\n<p>Next. This is important if you want to be a real program. Fixed-length buffers are a really really bad idea, especially if you don't check the lengths of your input strings. If your data were to include strings of 256 characters (or more), then your 256 bytes won't hold the string plus the 0-byte, and you'll have data corruption.</p>\n\n<p>This is a very common problem in code that relies on fixed length buffers. It's referred to as a buffer overrun, and is one of the biggest methods hackers use to break software. Huge security problems.</p>\n\n<p>If you are going to use fixed-length buffers instead of learning how to use new[] and delete[], then you need to length-check the input to your setters.</p>\n"}], "owner": {"reputation": 179, "user_id": 10668677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f56c830a91507766ab400783e43d80aa?s=128&d=identicon&r=PG&f=1", "display_name": "BalsamicVinegar", "link": "https://stackoverflow.com/users/10668677/balsamicvinegar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 54672931, "answer_count": 2, "score": 4, "last_activity_date": 1550075513, "creation_date": 1550066801, "last_edit_date": 1550067702, "question_id": 54672095, "link": "https://stackoverflow.com/questions/54672095/constructing-strings-without-stdstring", "title": "Constructing strings without std::string", "body": "<p>I'm working on a project where we're not allowed to use the <code>&lt;string&gt;</code> library at all - we can only work with strings as character pointers and we have to write our own functions for them(strcpy, strlen, etc). I'm trying to construct a RentalCar class with the following header file:</p>\n\n<pre><code>#ifndef RENTALCAR_H\n#define RENTALCAR_H\nclass RentalCar {\n public:\n  RentalCar();\n  RentalCar(char* make, char* model);\n  char* getMake() const;\n  char* getModel() const;\n  void setMake(char* make = \"\");\n  void setModel(char* model = \"\");\n private:\n  char m_make[256];\n  char m_model[256];\n};\n#endif\n</code></pre>\n\n<p>My source file contains the following:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"RentalCar.h\"\nusing namespace std;\n\nRentalCar::RentalCar() {\n    setYear();\n    setMake();\n    setModel();\n    setPrice();\n    setAvailable();\n}\n\nRentalCar::RentalCar(int year, char* make, char* model, float price, \nbool available) {\n    setYear(year);\n    setMake(make);\n    setModel(model);\n    setPrice(price);\n    setAvailable(available);\n}\n\nchar* RentalCar::getMake() const{\n    return m_make;\n}\n\nchar* RentalCar::getModel() const{\n    return m_model;\n}\n\nvoid RentalCar::setMake(char* make) {\n    myStringCopy(m_make, make);\n}\n\nvoid RentalCar::setModel(char* model) {\n    myStringCopy(m_model, model);\n}\n\n\nchar* myStringCopy(char* destination, const char* source) {\n    int index = 0;\n    while(*(source + index) != '\\0') {\n        *(destination + index) = *(source + index);\n        index++;\n    }\n    *(destination + index) = '\\0';\n    return destination;\n}\n</code></pre>\n\n<p>My problem is that I'm getting the following error in my getMake and getModel methods:</p>\n\n<pre><code>cannot initialize return object of type 'char *'\n  with an lvalue of type 'char const[256]'\n</code></pre>\n\n<p>I'm not sure how to construct default strings without making them literals - which is why I think I'm getting this error. </p>\n\n<p>My other question is that in order to set the strings in my setMake() and setModel() functions, I need to use my myStringCopy() function, so should I include it as a function in this class, or is there a way to get access to it otherwise? I also need to use it in my actual project file and it feels redundant to include it there and in the RentalCar.cpp as well </p>\n\n<p>It's worth mentioning we're not allowed to work with strings using array indexing in any way - except to initialize a new string.</p>\n\n<p>Any help would be appreciated! Thank you!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550066453, "post_id": 54671959, "comment_id": 96133726, "body": "Do some reading about <i>states</i> and <i>flags</i>. And of course about <i>loops</i> and <i>events</i>."}], "owner": {"reputation": 11, "user_id": 11056801, "user_type": "registered", "profile_image": "https://graph.facebook.com/2257508700968229/picture?type=large", "display_name": "John Michael Sarino", "link": "https://stackoverflow.com/users/11056801/john-michael-sarino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1552026397, "creation_date": 1550066305, "question_id": 54671959, "link": "https://stackoverflow.com/questions/54671959/how-to-pause-the-program-game-like-the-usual-games-when-esc-key-is-clicked", "title": "How to pause the program (game) like the usual games when esc key is clicked?", "body": "<p>I'm using turbo c++ 4.0 compiler. We have given a project to make a game. I want to create a text-based adventure. Well in the middle of my coding, I just thought that if a user wants to exit, it must have a key to pause the game or exit the game like the esc key.</p>\n\n<pre><code>#include&lt;iostream.h&gt;\n#include&lt;conio.h&gt;\n#include&lt;dos.h&gt;\n#include&lt;graphics.h&gt;\n#include&lt;process.h&gt;\n#include&lt;stdio.h&gt;\nchar namee[100];\nchar mf[100];\nchar mfc[100];\nchar ch;\n\nvoid item()\n{\n int hold=2,sawnd=20;\n  for(int snd=50;snd&gt;0;snd--)\n  { sawnd=(sawnd*hold);\n   sound(sawnd);\n   delay(50);\n  }\n  nosound();\n }\n\nvoid letter()\n{\n int hold=10,hld=49;\n for(int y=15;y&lt;21;y++)\n  {\n   textcolor(15),gotoxy(y,hold),cprintf(\"\u00df\");\n   gotoxy(hld,hold),cprintf(\"\u00df\");\n   hold=hold+1;\n   hld=hld-1;\n  }\n }\n\nvoid letter1()\n{\n for(int p=20;p&lt;61;p++)\n {\n  textcolor(15),gotoxy(p,2),cprintf(\"\u00df\");\n  delay(5);\n  gotoxy(p,23),cprintf(\"\u00df\");\n }\n for(int o=2;o&lt;24;o++)\n {\n  textcolor(15),gotoxy(20,o),cprintf(\"\u00df\");\n  delay(5);\n  gotoxy(60,o),cprintf(\"\u00df\");\n }\n textcolor(15),gotoxy(23,5),cprintf(\"To my beloved friend,\");\n delay(100);\n}\n\nvoid box2()\n{\n for(int i=14;i&lt;=50;i++)\n  {\n   textcolor(15),gotoxy(i,9);cprintf(\"\u00df\");\n   delay(5);\n   gotoxy(i,17);cprintf(\"\u00df\");\n  }\n for(int j=9;j&lt;=17;j++)\n  {\n   textcolor(15),gotoxy(14,j);cprintf(\"\u00df\");\n   delay(5);\n   gotoxy(50,j);cprintf(\"\u00df\");\n  }\n for(int u=21;u&lt;45;u++)\n {\n  textcolor(15),gotoxy(u,15),cprintf(\"\u00df\");\n  delay(5);\n }\n}\n\nvoid box(int x, int y, int x2, int y2)\n{\n clrscr();\n for(int i=x;i&lt;=y;i++)\n  {\n   gotoxy(i,x2);cout&lt;&lt;char(15);\n   delay(5);\n   gotoxy(i,y2);cout&lt;&lt;char(15);\n  }\n for(int j=x;j&lt;=y2;j++)\n  {\n   gotoxy(x,j);cout&lt;&lt;char(15);\n   delay(5);\n   gotoxy(y,j);cout&lt;&lt;char(15);\n  }\n}\nvoid box1(int x, int y, int x2, int y2)\n{\n clrscr();\n for(int i=x;i&lt;=y;i++)\n  {\n   gotoxy(i,x2);cout&lt;&lt;char(15);\n   gotoxy(i,y2);cout&lt;&lt;char(15);\n  }\n for(int j=x;j&lt;=y2;j++)\n  {\n   gotoxy(x,j);cout&lt;&lt;char(15);\n   gotoxy(y,j);cout&lt;&lt;char(15);\n  }\n}\nvoid title()\n{\n cout&lt;&lt;\"                                                                    \\n\";\n cout&lt;&lt;\"                                                                    \\n\";\n cout&lt;&lt;\"                                                                    \\n\";\n cout&lt;&lt;\"                                                                    \\n\";\n cout&lt;&lt;\"                                                                    \\n\";\n cout&lt;&lt;\"       \u00db\u00df\u00df\u00df\u00df      \u00dc\u00df\u00df\u00df\u00dc      \u00dc\u00df\u00df\u00df\u00dc       \u00db\u00df\u00db       \u00db\u00df\u00df\u00df\u00dc     \u00db\u00df\u00df\u00df\u00df  \\n\";\n cout&lt;&lt;\"       \u00db\u00dc\u00dc\u00dc       \u00df\u00dc\u00dc\u00dc       \u00db      \u00db   \u00db      \u00db   \u00db     \u00db\u00dc\u00dc\u00dc   \\n\";\n cout&lt;&lt;\"       \u00db              \u00db      \u00db         \u00db\u00df\u00df\u00df\u00df\u00df\u00db     \u00db\u00df\u00df\u00df      \u00db      \\n\";\n cout&lt;&lt;\"       \u00db\u00dc\u00dc\u00dc\u00dc      \u00df\u00dc\u00dc\u00dc\u00df      \u00df\u00dc\u00dc\u00dc\u00df     \u00db     \u00db     \u00db         \u00db\u00dc\u00dc\u00dc\u00dc  \\n\";\n cout&lt;&lt;\"       \u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1\u00b1  \\n\";\n cout&lt;&lt;\"                                                                    \\n\";\n delay(2000);\n cout&lt;&lt;\"                                                                    \\n\";\n cout&lt;&lt;\"                                                                    \\n\";\n cout&lt;&lt;\"                               \u00deFROM THE RIDDLER\u00de                   \\n\";\n cout&lt;&lt;\"                                                                    \\n\";\n cout&lt;&lt;\"                                                                    \\n\";\n delay(2500);\n}\n\nvoid introsound()\n{\n sound(20);\n }\n\nvoid cont()\n{\n gotoxy(25,21);cprintf(\"Press any key to continue...\");\n}\n\nvoid name()\n{\n textcolor(15);gotoxy(3,3),cprintf(\"Enter your name: \");\n cin&gt;&gt;namee;\n }\n\n\nvoid prologue()\n{\n textcolor(15);gotoxy(5,10),cprintf(\"You live in the Philippines in the place of Taguig \\n\");\n delay(2000);\n textcolor(15);gotoxy(5,11),cprintf(\"You have parents and a brother that loves and supports you\\n\");\n delay(2000);\n textcolor(15);gotoxy(5,12),cprintf(\"Friends that are there when you needed \\n\");\n delay(2000);\n textcolor(15);gotoxy(5,13),cprintf(\"Your life is great and almost perfect\\n\");\n delay(2000);\n textcolor(15);gotoxy(5,14),cprintf(\"All of a sudden, you woke up in a house and doesn't remember a thing...\");\n delay(2000);\n cont();\n getch();\n}\n\n\nvoid main()\n{\n char c;\n _setcursortype(_NOCURSOR);\n textcolor(4);\n clrscr();\n introsound();\n title();\n cont();\n delay(getch());\n textcolor(4);\n box1(1,79,1,24);\n prologue();\n nosound();\n clrscr();\n textcolor(4);\n box1(1,79,1,24);\n textcolor(15);gotoxy(2,2),cprintf(\"You: W--W--who--am I? What am I doing here? A-aaa-argh, my head hurts.\\n\");\n  sound(9000);\n  delay(2500);\n  gotoxy(2,3),cprintf(\"Can't remember anything!\");\n  delay(2000);\n  gotoxy(2,4),cprintf(\"--You found a letter beside your bed--\");\n  delay(2000);\n  gotoxy(2,5),cprintf(\"--You picked it up--\"),item();\n  delay(1500);\n  box2();\n  letter();\n  delay(1500);\n  gotoxy(2,6),cprintf(\"--You opened it--\");\n  delay(1500);\n  clrscr();\n  textcolor(4);\n  box1(1,79,1,24);\n  letter1();\n  nosound();\n }\n</code></pre>\n\n<p>I want to pause or maybe exit the game while the main() codes are running. Is there any way?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1550065876, "post_id": 54671731, "comment_id": 96133369, "body": "Of course it should give an error. The <code>B</code> class doesn&#39;t have a member function named <code>Aprint</code>. That&#39;s not how <code>friend</code> works. Please <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">get a couple of good books to read</a>, or reread the books or tutorials you&#39;re already reading, or go through your class-notes again."}, {"owner": {"reputation": 55, "user_id": 10950698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pWmynRhWj2w/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNEBkKjAg_QImrxznsjbyvBo12XAQ/mo/photo.jpg?sz=128", "display_name": "ImmaNoobInProgramming", "link": "https://stackoverflow.com/users/10950698/immanoobinprogramming"}, "edited": false, "score": 0, "creation_date": 1550066029, "post_id": 54671731, "comment_id": 96133467, "body": "I saw someone do it so I tried it. He didn&#39;t use the (this) with his program but somehow it worked. Ask him I guess. I watched it over and over and just followed his steps"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550066244, "post_id": 54671731, "comment_id": 96133611, "body": "Could it have something to do with inheritance and virtual functions and polymorphism?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550066282, "post_id": 54671731, "comment_id": 96133624, "body": "And please don&#39;t change your question to much, now my first comment (and worse, the posted answer!) doesn&#39;t match the code."}, {"owner": {"reputation": 55, "user_id": 10950698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pWmynRhWj2w/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNEBkKjAg_QImrxznsjbyvBo12XAQ/mo/photo.jpg?sz=128", "display_name": "ImmaNoobInProgramming", "link": "https://stackoverflow.com/users/10950698/immanoobinprogramming"}, "edited": false, "score": 0, "creation_date": 1550066462, "post_id": 54671731, "comment_id": 96133731, "body": "Alright I&#39;ll post a note saying its edited so it will match."}, {"owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "edited": false, "score": 0, "creation_date": 1550066586, "post_id": 54671731, "comment_id": 96133809, "body": "Please elaborate more on <code>I want it to print 0 when I use a B class object.</code> I can&#39;t see any usage of B object here now."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1550066169, "creation_date": 1550066169, "answer_id": 54671915, "question_id": 54671731, "link": "https://stackoverflow.com/questions/54671731/how-do-you-call-a-class-function-but-with-a-different-class-object/54671915#54671915", "title": "How do you call a class function but with a different class object", "body": "<p>You cannot call a member function of one class using an instance of another class (unless the classes are related by inheritance):</p>\n\n<pre><code>Abo.Aprint(); // OK\nBbo.Aprint(); // Not OK\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3303, "user_id": 5859925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de386e94c47dfbffb5235306b1affc96?s=128&d=identicon&r=PG&f=1", "display_name": "Kunal Puri", "link": "https://stackoverflow.com/users/5859925/kunal-puri"}, "is_accepted": false, "score": 1, "last_activity_date": 1550068473, "creation_date": 1550068473, "answer_id": 54672683, "question_id": 54671731, "link": "https://stackoverflow.com/questions/54671731/how-do-you-call-a-class-function-but-with-a-different-class-object/54672683#54672683", "title": "How do you call a class function but with a different class object", "body": "<p>There is one way in which you can do that. For that, you have to change the signature of <code>A::Aprint</code> to <code>void Aprint(const B&amp;);</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass B; // forward declaration\n\nclass A\n{\n    public:\n    void Aprint(const B&amp;);\n    private:\n    int Number = 1;\n};\n\nclass B\n{\n    public:\n    void Bprint()\n    {\n        std::cout &lt;&lt; \"It is B \" &lt;&lt; std::endl;\n    }\n    private:\n    int Number = 0;\n\n    friend void A::Aprint(const B&amp;);\n};\n\nvoid A::Aprint(const B&amp; b) {\n    std::cout &lt;&lt; \"It is A \" &lt;&lt; b.Number &lt;&lt; std::endl;\n}\n\nint main()\n{\n    A Abo;\n    B Bbo;\n\n    Abo.Aprint(Bbo);\n}\n</code></pre>\n\n<p>In this example, Because <code>A::Aprint()</code> is friend of B, <code>Aprint()</code> can access even the private members of Bbo (See <code>b.Number</code> works even if it is private)</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 5809736, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208395003049131/picture?type=large", "display_name": "com", "link": "https://stackoverflow.com/users/5809736/com"}, "is_accepted": false, "score": 2, "last_activity_date": 1550068980, "creation_date": 1550068980, "answer_id": 54672848, "question_id": 54671731, "link": "https://stackoverflow.com/questions/54671731/how-do-you-call-a-class-function-but-with-a-different-class-object/54672848#54672848", "title": "How do you call a class function but with a different class object", "body": "<p>I think you re trying to imitate inheritance with friend declaration. As far as i understand friend declarations allows you to access private members of class A from a friend class or fuction. If you want your class B to be able to call class A functions i think you should use inheritance and virtual functions. </p>\n\n<p>Also maybe this will help you.</p>\n\n<p><a href=\"https://www.ibm.com/support/knowledgecenter/SS2LWA_12.1.0/com.ibm.xlcpp121.bg.doc/language_ref/cplr042.html\" rel=\"nofollow noreferrer\">https://www.ibm.com/support/knowledgecenter/SS2LWA_12.1.0/com.ibm.xlcpp121.bg.doc/language_ref/cplr042.html</a></p>\n"}], "owner": {"reputation": 55, "user_id": 10950698, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-pWmynRhWj2w/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNEBkKjAg_QImrxznsjbyvBo12XAQ/mo/photo.jpg?sz=128", "display_name": "ImmaNoobInProgramming", "link": "https://stackoverflow.com/users/10950698/immanoobinprogramming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1550068980, "creation_date": 1550065688, "last_edit_date": 1550066909, "question_id": 54671731, "link": "https://stackoverflow.com/questions/54671731/how-do-you-call-a-class-function-but-with-a-different-class-object", "title": "How do you call a class function but with a different class object", "body": "<p>So I recently just learned about the <code>friend</code> and <code>this</code> in C++, I was watching a tutorial for beginners in C++ and programming. I was interested in <code>this</code> syntax or whatever this is and he said that it was a pointer and stores the object's address so I experimented with it.</p>\n\n<p>Btw is it possible to use a different class object from a different class function? If so, how?</p>\n\n<p>Anyways here is the code</p>\n\n<pre><code>||\n\\/\n\n#include &lt;iostream&gt;\n\n    class A\n    {\n    public:\n        void Aprint()\n        {\n            std::cout &lt;&lt; \"It is A \" &lt;&lt; this-&gt;Number &lt;&lt; std::endl;\n        }\n    private:\n        int Number = 1;\n    };\n\n    class B\n    {\n    public:\n        void Bprint()\n        {\n            std::cout &lt;&lt; \"It is B \" &lt;&lt; std::endl;\n        }\n    private:\n        int Number = 0;\n\n        friend void A::Aprint();\n    };\n\n    int main()\n    {\n       A Abo;\n       B Bbo;\n\n       Abo.Aprint();\n    }\n</code></pre>\n\n<p>I want it to print <code>0</code> when I use a B class object.\nLike show <code>0</code> after <code>\"It is A\"</code> when it is called or when compiled. Cause I want to see what will happen when I use <code>Bbo.Aprint()</code>. I want to know how <code>this</code> and <code>friend</code> works. Still experimenting tho.</p>\n\n<pre><code>Before it was `Bbo.Aprint()` just edited.\n</code></pre>\n"}, {"tags": ["c++", "shared-ptr"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 2, "creation_date": 1550065799, "post_id": 54671719, "comment_id": 96133317, "body": "This is fine, but then why would you ever want to do this?"}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550066100, "post_id": 54671719, "comment_id": 96133517, "body": "@Jarod42 Note that the deleter of <code>ptr2</code> also contributes to the ownership of the deleter of <code>ptr1</code>. If you get rid of <code>ptr1</code> first, the deleter of <code>ptr2</code> still keeps the control block active, and will call the <code>delete</code> after <code>ptr2</code>&#39;s control block is freed"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1550066203, "post_id": 54671719, "comment_id": 96133586, "body": "@KABoissonneault: Oh, don&#39;t see the capture..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1550066315, "post_id": 54671719, "comment_id": 96133640, "body": "Why not simply: <code>auto ptr1 = std::shared_ptr&lt;Object&gt;(new Object, [](Object* obj){ obj-&gt;cleanup(); delete obj; }); auto ptr2 = ptr1;</code> ?"}, {"owner": {"reputation": 53, "user_id": 4981204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8efd3a14015b936079dd6df9629d3f2d?s=128&d=identicon&r=PG&f=1", "display_name": "shadeware", "link": "https://stackoverflow.com/users/4981204/shadeware"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550066347, "post_id": 54671719, "comment_id": 96133660, "body": "@PasserBy Basically I&#39;m writing a library where objects live in specific threads. I don&#39;t want user to concurrently delete those objects from outside threads, so I&#39;d like to use custom deleter that will merely schedule deleting. However I also want to use actual shared_ptr with default deleter in implementation for internal lifetime management."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550066426, "post_id": 54671719, "comment_id": 96133705, "body": "And why would you want specifically a default deleter?"}, {"owner": {"reputation": 53, "user_id": 4981204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8efd3a14015b936079dd6df9629d3f2d?s=128&d=identicon&r=PG&f=1", "display_name": "shadeware", "link": "https://stackoverflow.com/users/4981204/shadeware"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550066922, "post_id": 54671719, "comment_id": 96134010, "body": "@PasserBy to delete objects of course. Actually library is a wrapper around boost::asio, and I&#39;d like to capture <code>shared_from_this()</code> in all asynchronous operations to prolong its life until every operation completes (rather popular approach). So, like I said, for internal lifetime management."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 0, "creation_date": 1550069048, "post_id": 54671719, "comment_id": 96135402, "body": "&quot;a wrapper around boost::asio&#39; - uh oh. You&#39;ve probably missed the point of asio."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1550346724, "post_id": 54671719, "comment_id": 96237959, "body": "The question is ambiguous, as you don&#39;t indicate if you expect from_this support or what you would expect as from_this."}], "answers": [{"tags": [], "owner": {"reputation": 1209, "user_id": 10662240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTic2.jpg?s=128&g=1", "display_name": "Krzysiek Karbowiak", "link": "https://stackoverflow.com/users/10662240/krzysiek-karbowiak"}, "is_accepted": false, "score": 0, "last_activity_date": 1550066887, "creation_date": 1550066887, "answer_id": 54672126, "question_id": 54671719, "link": "https://stackoverflow.com/questions/54671719/is-it-legal-to-have-independent-shared-ptrs-pointing-to-same-object/54672126#54672126", "title": "Is it legal to have independent shared_ptrs pointing to same object?", "body": "<p>It is legal. The only thing not legal would be to double-delete the pointed object. You prevent this by having one <code>shared_ptr</code> use a custom deleter.</p>\n\n<p>Is it good practice? Would it pass code review? Would it raise eyebrows? You decide for yourself.</p>\n\n<p>I would try hard not to use constructs like this.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1550067987, "creation_date": 1550067987, "answer_id": 54672534, "question_id": 54671719, "link": "https://stackoverflow.com/questions/54671719/is-it-legal-to-have-independent-shared-ptrs-pointing-to-same-object/54672534#54672534", "title": "Is it legal to have independent shared_ptrs pointing to same object?", "body": "<p>What you show appears to be legal.</p>\n\n<blockquote>\n  <p>I don't want user to concurrently delete those objects from outside threads, so I'd like to use custom deleter that will merely schedule deleting.</p>\n</blockquote>\n\n<p>I suggest alternative approach: Simply use one level of shared pointers with a custom deleter. In the deleter, add the pointer into a thread safe queue to be destroyed in the correct thread. A simple approach would be to store unique pointers in the queue and then simply clear the queue to release the memory.</p>\n"}, {"tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": true, "score": 1, "last_activity_date": 1550071028, "last_edit_date": 1550071028, "creation_date": 1550070439, "answer_id": 54673331, "question_id": 54671719, "link": "https://stackoverflow.com/questions/54671719/is-it-legal-to-have-independent-shared-ptrs-pointing-to-same-object/54673331#54673331", "title": "Is it legal to have independent shared_ptrs pointing to same object?", "body": "<p>Having two shared_ptr objects owning the same object will work some of the time. Where it will not work is where the <code>Object</code> is derived from <code>std::enable_shared_from_this&lt;Object&gt;</code>. In this case the magic during the assignment to the shared_ptr will cause you undefined behaviour.</p>\n\n<blockquote>\n  <p>The constructors of std::shared_ptr detect the presence of an unambiguous and accessible (since C++17) enable_shared_from_this base and assign the newly created std::shared_ptr to the internally stored weak reference if not already owned by a live std::shared_ptr (since C++17). Constructing a std::shared_ptr for an object that is already managed by another std::shared_ptr will not consult the internally stored weak reference and thus will lead to undefined behavior.</p>\n</blockquote>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/memory/enable_shared_from_this</a></p>\n\n<blockquote>\n  <p>I don't want user to concurrently delete those objects from outside threads, so I'd like to use custom deleter that will merely schedule deleting.</p>\n</blockquote>\n\n<p>The solution will depend on whether the cleanup operation will need the shared count (i.e. does it take longer than one tick).</p>\n\n<p>simple case:</p>\n\n<pre><code>auto deleter = [&amp;scheduler](Object* p)\n{\n    auto delete_impl = [p]()\n    {\n        p-&gt;cleanup();\n        delete p;\n    };\n    scheduler.post(delete_impl);\n};\n\nauto po = std::shared_ptr&lt;Object&gt;(new Object(), deleter);\n</code></pre>\n\n<p>less simple case:</p>\n\n<p>In the case where the cleanup might take longer than one 'tick', it is not clear to me from the documentation at cppreference whether it is valid to reassign <code>p</code> to another <code>shared_ptr&lt;Object&gt;</code> for the cleanup phase. Even if it strictly is, its such a dark corner that I would not trust the behaviour to be standardised across all library implementations.</p>\n\n<p>For safety, let's define a new object to act as a shared handle during the cleanup:</p>\n\n<pre><code>struct DyingObjectHandle : std::enable_shared_from_this&lt;DyingObjectHandle&gt;\n{\n  DyingObjectHandle(Object* p) : p(p) {}\n\n  void cleanup()\n  {\n    auto self = shared_from_this();\n    ... etc\n  }\n\n  void final_destroy()\n  {\n    delete p;\n  }\n\n  Object *p;\n};\n</code></pre>\n\n<p>And then modify the deleter:</p>\n\n<pre><code>auto deleter = [&amp;scheduler](Object* p)\n{\n    auto doh = std::make_shared&lt;DyingObjectHandle&gt;(p);\n    scheduler.post([doh = std::move(doh)]()\n    {\n        doh-&gt;cleanup();\n    });\n};\n\nauto po = std::shared_ptr&lt;Object&gt;(new Object(), deleter);\n</code></pre>\n\n<p>Finally:</p>\n\n<blockquote>\n  <p>Actually library is a wrapper around boost::asio</p>\n</blockquote>\n\n<p>This is often a source common inefficiencies.</p>\n\n<p>An <code>asio::io_context</code> should normally be thought of as a singleton object for an entire application. It represents \"the application-wide IO scheduling loop\". Maximum concurrency is achieved when N threads are running the same <code>io_context</code>, each io-enabled object has its own <code>strand</code> and all handlers are scheduled through the strands, eg:</p>\n\n<pre><code>timer_.async_wait(asio::bind_executor(my_strand_, \n                  [self = shared_from_this()](error_code ec)\n{\n   // ...handle the timer.\n}); \n</code></pre>\n\n<p>In this way, it is irrelevant which thread handler completes on. If multiple concurrent operations occur on the same io object, they will be serialised through the strand <em>more efficiently</em> than if they were all contending on the same mutex or tied to a specific thread's <code>io_context</code>.</p>\n"}], "owner": {"reputation": 53, "user_id": 4981204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8efd3a14015b936079dd6df9629d3f2d?s=128&d=identicon&r=PG&f=1", "display_name": "shadeware", "link": "https://stackoverflow.com/users/4981204/shadeware"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 54673331, "answer_count": 3, "score": 0, "last_activity_date": 1550071028, "creation_date": 1550065648, "question_id": 54671719, "link": "https://stackoverflow.com/questions/54671719/is-it-legal-to-have-independent-shared-ptrs-pointing-to-same-object", "title": "Is it legal to have independent shared_ptrs pointing to same object?", "body": "<p>Many articles about <code>shared_ptr</code> warn against accidentally creating independent <code>shared_ptr</code>s to same object.\nFor instance, <a href=\"https://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\">this article</a>. It has comment <code>// Bad, each shared_ptr thinks it's the only owner of the object</code>.</p>\n\n<p>But what if that's exactly the kind of behaviour I want? For example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto* object = new Object();\nauto ptr1 = std::shared_ptr&lt;Object&gt;(object);\nauto ptr2 = std::shared_ptr&lt;Object&gt;(object, [ptr1](Object* obj){ obj-&gt;cleanup(); });\nptr2 = nullptr;\nptr1 = nullptr;\n</code></pre>\n\n<p>This works perfectly on GCC 6.3, but is it <em>legal</em> to do so, i.e. does standard permit such usage?</p>\n"}, {"tags": ["c++", "c", "for-loop", "increment"], "comments": [{"owner": {"reputation": 388, "user_id": 9573812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30c3731ab384e9e17dbb1662fb1f3fc1?s=128&d=identicon&r=PG&f=1", "display_name": "Epion", "link": "https://stackoverflow.com/users/9573812/epion"}, "edited": false, "score": 0, "creation_date": 1550065777, "post_id": 54671709, "comment_id": 96133301, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17711655/c11-range-based-for-loops-without-loop-variable\">C++11 range-based for loops without loop variable</a>"}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 0, "creation_date": 1550066114, "post_id": 54671709, "comment_id": 96133524, "body": "Why would someone want to do that? Unless initialized, it would be an infinite loop. When you want it to iterate over 4 times, let it know that way."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 3, "creation_date": 1550066132, "post_id": 54671709, "comment_id": 96133537, "body": "Well you need a variable to keep the iteration count. Without a count you can only get an infinite loop."}, {"owner": {"reputation": 15373, "user_id": 822669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f66e2987d5d24e6d8a1f686154a51c21?s=128&d=identicon&r=PG", "display_name": "Sander De Dycker", "link": "https://stackoverflow.com/users/822669/sander-de-dycker"}, "edited": false, "score": 0, "creation_date": 1550066612, "post_id": 54671709, "comment_id": 96133831, "body": "is loop unrolling an option ? (possibly <a href=\"https://stackoverflow.com/questions/28231743/self-unrolling-macro-loop-in-c-c\">aided with macro&#39;s or template functions</a>)"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550066891, "post_id": 54671709, "comment_id": 96133990, "body": "Avoid tagging both C and C++"}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 5, "creation_date": 1550067240, "post_id": 54671709, "comment_id": 96134199, "body": "What problem are you <i>actually</i>  trying to resolve? This could be an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "edited": false, "score": 1, "creation_date": 1550072840, "post_id": 54671709, "comment_id": 96137887, "body": "@WedaPashi -- this would mean &quot;do this four times&quot;, without the distraction of having to name a loop-control variable, and perhaps without the distraction of some compiler writer complaining that you created a variable that you never used."}, {"owner": {"reputation": 3002, "user_id": 4228131, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RyKUe.jpg?s=128&g=1", "display_name": "WedaPashi", "link": "https://stackoverflow.com/users/4228131/wedapashi"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1550125399, "post_id": 54671709, "comment_id": 96156929, "body": "@PeteBecker: True that. But I am trying to foresee a use-case for one such implementation.."}], "answers": [{"comments": [{"owner": {"reputation": 3126, "user_id": 2955790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vShcC.png?s=128&g=1", "display_name": "Duck Dodgers", "link": "https://stackoverflow.com/users/2955790/duck-dodgers"}, "edited": false, "score": 0, "creation_date": 1550065792, "post_id": 54671754, "comment_id": 96133311, "body": "same as <code>while(1){}</code>"}, {"owner": {"reputation": 1209, "user_id": 10662240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTic2.jpg?s=128&g=1", "display_name": "Krzysiek Karbowiak", "link": "https://stackoverflow.com/users/10662240/krzysiek-karbowiak"}, "edited": false, "score": 0, "creation_date": 1550065873, "post_id": 54671754, "comment_id": 96133366, "body": "Or better yet, <code>while(true);</code> ;-)"}, {"owner": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "edited": false, "score": 0, "creation_date": 1550065942, "post_id": 54671754, "comment_id": 96133403, "body": "I don&#39;t want an infinite loop. Just print &quot;Loop working &quot; (4 times). How to increment?"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "edited": false, "score": 0, "creation_date": 1550065951, "post_id": 54671754, "comment_id": 96133410, "body": "Yes. But he is interested in <code>for</code>!"}, {"owner": {"reputation": 1160, "user_id": 6949178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yW1nZs8m-_4/AAAAAAAAAAI/AAAAAAAAAIk/Je9U6NaDvuY/photo.jpg?sz=128", "display_name": "Stoogy", "link": "https://stackoverflow.com/users/6949178/stoogy"}, "edited": false, "score": 0, "creation_date": 1550066093, "post_id": 54671754, "comment_id": 96133508, "body": "OP wants no variable"}, {"owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "reply_to_user": {"reputation": 1160, "user_id": 6949178, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yW1nZs8m-_4/AAAAAAAAAAI/AAAAAAAAAIk/Je9U6NaDvuY/photo.jpg?sz=128", "display_name": "Stoogy", "link": "https://stackoverflow.com/users/6949178/stoogy"}, "edited": false, "score": 3, "creation_date": 1550066138, "post_id": 54671754, "comment_id": 96133542, "body": "@Stoogy; What if OP wants to compile the program without any compiler?"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "edited": false, "score": 2, "creation_date": 1550066232, "post_id": 54671754, "comment_id": 96133603, "body": "@Biswajit if you want to loop only 4 times, you ought to specify that in the question."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "edited": false, "score": 1, "creation_date": 1550066404, "post_id": 54671754, "comment_id": 96133690, "body": "@Biswajit &quot;How to increment?&quot; Increment what?  You have no variable!"}, {"owner": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "reply_to_user": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1550067072, "post_id": 54671754, "comment_id": 96134100, "body": "@WilliamPursell I already specify that (I want 4 iterations) inside loop. Yes! there is no variable that&#39;s why I am asking here."}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "reply_to_user": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "edited": false, "score": 2, "creation_date": 1550069836, "post_id": 54671754, "comment_id": 96135949, "body": "@Biswajit No, you did not specify.  You asked a very generic question, and provided an example that happened to iterate 4 times."}], "tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": false, "score": -1, "last_activity_date": 1550066067, "last_edit_date": 1550066067, "creation_date": 1550065759, "answer_id": 54671754, "question_id": 54671709, "link": "https://stackoverflow.com/questions/54671709/how-to-write-a-for-loop-without-variable/54671754#54671754", "title": "How to write a for loop without variable?", "body": "<p>Yes, it is possible.  </p>\n\n<pre><code>for(; ;);\n</code></pre>\n\n<p>But this will be an infinite loop. Add a break statement and it will run only once  </p>\n\n<pre><code>for(; ; )\n    break;\n</code></pre>\n\n<p>Or you can use increment and conditional statements inside the loop  </p>\n\n<pre><code>int i = 0;\n\nfor(; ;){\n    printf (\"Loop working\\n\");\n    ++i;\n    if( i &gt;= 4)\n        break;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1209, "user_id": 10662240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vTic2.jpg?s=128&g=1", "display_name": "Krzysiek Karbowiak", "link": "https://stackoverflow.com/users/10662240/krzysiek-karbowiak"}, "is_accepted": false, "score": -1, "last_activity_date": 1550066237, "creation_date": 1550066237, "answer_id": 54671937, "question_id": 54671709, "link": "https://stackoverflow.com/questions/54671709/how-to-write-a-for-loop-without-variable/54671937#54671937", "title": "How to write a for loop without variable?", "body": "<p>To have the loop terminate, you need to keep state which says at which point you are.</p>\n\n<p>Usually, you use loop variable for this.</p>\n\n<p>You can also use recursion, in which case the state is encoded differently, but still needed:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void loop(int i)\n{\n    if (i &lt; 4) {\n        printf (\"Loop working\\n\");\n        loop(++i); // recursive call\n    }\n}\n\nint main()\n{\n    loop(0);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 97941, "user_id": 25324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c812d568dcbf02b96796728be3cac626?s=128&d=identicon&r=PG", "display_name": "pmg", "link": "https://stackoverflow.com/users/25324/pmg"}, "is_accepted": false, "score": 2, "last_activity_date": 1550070115, "last_edit_date": 1550070115, "creation_date": 1550068797, "answer_id": 54672785, "question_id": 54671709, "link": "https://stackoverflow.com/questions/54671709/how-to-write-a-for-loop-without-variable/54672785#54672785", "title": "How to write a for loop without variable?", "body": "<p>You need a variable to keep count, but you can hide it.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\n#define JOIN(a, b) (a ## b)\n// WARNING: don't LOOP in the same line\n#define LOOP(n) for (unsigned JOIN(HIDDEN, __LINE__) = 0; JOIN(HIDDEN, __LINE__) &lt; n; JOIN(HIDDEN, __LINE__)++)\n\nint main(void) {\n    LOOP(4) {\n        printf(\"foo\");\n        LOOP(2) printf(\" bar\");\n        puts(\"\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/q48RsZ\" rel=\"nofollow noreferrer\">See code running on ideone</a></p>\n\n<p>Output</p>\n\n<pre>foo bar bar\nfoo bar bar\nfoo bar bar\nfoo bar bar</pre>\n"}], "owner": {"reputation": 7, "user_id": 10706654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tGsbs.jpg?s=128&g=1", "display_name": "Biswajit", "link": "https://stackoverflow.com/users/10706654/biswajit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1550070115, "creation_date": 1550065627, "last_edit_date": 1550066007, "question_id": 54671709, "link": "https://stackoverflow.com/questions/54671709/how-to-write-a-for-loop-without-variable", "title": "How to write a for loop without variable?", "body": "<p>I want to write a for loop directly without any variable. Is it possible?</p>\n\n<p>Example:</p>\n\n<pre><code>for (1; 1 &lt;= 4; ++) {\n  printf (\"Loop working\\n\");\n}\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>Loop working\nLoop working\nLoop working\nLoop working\n</code></pre>\n"}, {"tags": ["c++", "for-loop", "arduino"], "comments": [{"owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1550064298, "post_id": 54671220, "comment_id": 96132339, "body": "This might not be an answer but your button might be high as default. Post code where you set up digital pin."}, {"owner": {"reputation": 331, "user_id": 10557540, "user_type": "registered", "profile_image": "https://graph.facebook.com/2252177071694759/picture?type=large", "display_name": "Zheng-rong Cai", "link": "https://stackoverflow.com/users/10557540/zheng-rong-cai"}, "reply_to_user": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1550064503, "post_id": 54671220, "comment_id": 96132483, "body": "@Gox If it was, than the melody would be played immediately..."}, {"owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1550064757, "post_id": 54671220, "comment_id": 96132638, "body": "i dont have arduino with me, but my advice is always put this <code>digitalWrite(buttonPin, LOW);</code> in setup. also try putting it before if statement."}, {"owner": {"reputation": 3615, "user_id": 5550963, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7jAip.png?s=128&g=1", "display_name": "CEPB", "link": "https://stackoverflow.com/users/5550963/cepb"}, "edited": false, "score": 0, "creation_date": 1550071834, "post_id": 54671220, "comment_id": 96137285, "body": "Now I get your quesiton"}], "answers": [{"tags": [], "owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "is_accepted": true, "score": 2, "last_activity_date": 1550064884, "creation_date": 1550064884, "answer_id": 54671498, "question_id": 54671220, "link": "https://stackoverflow.com/questions/54671220/arduino-continue-with-for-loop-only-when-button-is-pressed/54671498#54671498", "title": "Arduino Continue with for-loop only when button is pressed", "body": "<p>Stop the loop while the button press is still held in:</p>\n\n<pre><code>int buttonPin = 12;\n\nvoid setup() \n{\n // put your setup code here, to run once:\n\n   pinMode(buttonPin, INPUT);\n}\n\n\nvoid loop() \n{\n // put your main code here, to run repeatedly:\n\n  int buttonState = digitalRead(buttonPin);\n\n  for(int i = 0; i &lt; sizeof(mariomelody); i++)\n  {\n    if(buttonState == HIGH)\n    {\n      tone(8, mariomelody[i], 70); \n      delay();\n    }  \n    while(digitalRead(buttonPin) == HIGH)\n    {\n    // wait until the button is released\n    }\n    while(digitalRead(buttonPin) == LOW)\n    {\n    //wait until the button is pressed again\n    }\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "is_accepted": false, "score": 1, "last_activity_date": 1550064893, "creation_date": 1550064893, "answer_id": 54671500, "question_id": 54671220, "link": "https://stackoverflow.com/questions/54671220/arduino-continue-with-for-loop-only-when-button-is-pressed/54671500#54671500", "title": "Arduino Continue with for-loop only when button is pressed", "body": "<p>I'm guessing that you want to play the melody while the button is pressed, and stop if the button is released.</p>\n\n<p>Then it would be something like:</p>\n\n<pre><code>int i = 0;\nvoid loop() \n{\n    if(digitalRead(buttonPin) == HIGH)\n    {\n      tone(8, mariomelody[i], 70); \n      i = (i + 1) % sizeof(mariomelody);\n      delay();\n    }  \n}\n</code></pre>\n\n<p>To avoid resetting the position to the begin of the melody you need <code>i</code> to be a global variable.</p>\n\n<p>If you want the button to switch on and off the melody you'll need another global variable <code>playing</code>:</p>\n\n<pre><code>bool playing = false;\nvoid loop()\n{\n    if(digitalRead(buttonPin) == HIGH)\n    {\n        playing = !playing;\n        while (digitalRead(buttonPin) == HIGH)\n             ; //wait for release\n    }\n    if (playing) {\n        //the rest is the same\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 10557540, "user_type": "registered", "profile_image": "https://graph.facebook.com/2252177071694759/picture?type=large", "display_name": "Zheng-rong Cai", "link": "https://stackoverflow.com/users/10557540/zheng-rong-cai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1560, "favorite_count": 0, "accepted_answer_id": 54671498, "answer_count": 2, "score": 3, "last_activity_date": 1550078879, "creation_date": 1550064023, "last_edit_date": 1550078879, "question_id": 54671220, "link": "https://stackoverflow.com/questions/54671220/arduino-continue-with-for-loop-only-when-button-is-pressed", "title": "Arduino Continue with for-loop only when button is pressed", "body": "<p>I have an int array of melodies. If i press the button it plays the whole song but if i put a break after the <code>delay</code>, than it just reset the <code>i</code>. How do i make it so that only after another button-press it continues? (i'm still a newbie at this sorry and thanks in advance)</p>\n\n<pre><code>int buttonPin = 12;\n\nvoid setup() \n{\n // put your setup code here, to run once:\n\n   pinMode(buttonPin, INPUT);\n}\n\n\nvoid loop() \n{\n // put your main code here, to run repeatedly:\n\n  int buttonState = digitalRead(buttonPin);\n\n  for(int i = 0; i &lt; sizeof(mariomelody); i++)\n  {\n    if(buttonState == HIGH)\n    {\n      tone(8, mariomelody[i], 70); \n      delay();\n    }  \n  }\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1550064444, "post_id": 54671212, "comment_id": 96132435, "body": "Write a function that accepts an argument of type <code>int(*)[6]</code>.   Passing <code>&amp;arr</code> or <code>ptr</code> to it will compile.  Passing <code>prtarr</code> to it will not."}, {"owner": {"reputation": 4513, "user_id": 1810087, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/T2x51.jpg?s=128&g=1", "display_name": "user1810087", "link": "https://stackoverflow.com/users/1810087/user1810087"}, "edited": false, "score": 3, "creation_date": 1550064458, "post_id": 54671212, "comment_id": 96132447, "body": "you are mixing up things here: <code>int (*ptr)[6] = &amp;arr;</code> is a <b>pointer to an array</b> of size 6. <code>int *prtarr[1] = { arr };</code> is an <b>array of pointers</b> of size 1."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550065097, "post_id": 54671212, "comment_id": 96132850, "body": "How do you get size 6 from <code>int *prtarr[1]</code> ?"}, {"owner": {"reputation": 135, "user_id": 9375271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529952e09768709c41f1aad7a93af1a9?s=128&d=identicon&r=PG&f=1", "display_name": "Nagappa", "link": "https://stackoverflow.com/users/9375271/nagappa"}, "edited": false, "score": 0, "creation_date": 1550070550, "post_id": 54671212, "comment_id": 96136454, "body": "Size of array and pointer is different"}, {"owner": {"reputation": 135, "user_id": 9375271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529952e09768709c41f1aad7a93af1a9?s=128&d=identicon&r=PG&f=1", "display_name": "Nagappa", "link": "https://stackoverflow.com/users/9375271/nagappa"}, "edited": false, "score": 0, "creation_date": 1550070573, "post_id": 54671212, "comment_id": 96136472, "body": "But the usage I didn&#39;t understand properly"}], "answers": [{"tags": [], "owner": {"reputation": 96743, "user_id": 2455888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/MQu4W.png?s=128&g=1", "display_name": "haccks", "link": "https://stackoverflow.com/users/2455888/haccks"}, "is_accepted": true, "score": 2, "last_activity_date": 1550065669, "last_edit_date": 1550065669, "creation_date": 1550064963, "answer_id": 54671527, "question_id": 54671212, "link": "https://stackoverflow.com/questions/54671212/what-is-the-use-of-pointer-to-an-array/54671527#54671527", "title": "What is the use of Pointer to an array", "body": "<p>One most common use for pointer to array is when you want to pass a multidimensional array (actually pointer to an element of the multidimensional array) then pointer to array is used  </p>\n\n<pre><code>void multd_array_func(int (*arr)[6]);\n</code></pre>\n\n<p>From another function this function can be called as </p>\n\n<pre><code>int arr[] = {20,30,40,50,60,70};\nmultd_array_func(&amp;arr);\n</code></pre>\n\n<p>This can't be done with just a pointer. In the above function passing <code>arr</code> or <code>prtarr[0]</code> will not work. They are incompatible pointer types with <code>int (*)[6]</code>.</p>\n\n<p>You can see the difference between <code>arr</code>, <code>*ptr</code> and <code>ptrarr[0]</code> by printing the size  </p>\n\n<pre><code>printf(\"%zu %zu %zu\", sizeof(arr), sizeof(ptrarr[0]), sizeof(*ptr));\n</code></pre>\n\n<p>This will print </p>\n\n<pre><code>12 8 12\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 9375271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/529952e09768709c41f1aad7a93af1a9?s=128&d=identicon&r=PG&f=1", "display_name": "Nagappa", "link": "https://stackoverflow.com/users/9375271/nagappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 54671527, "answer_count": 1, "score": -1, "last_activity_date": 1583384000, "creation_date": 1550063999, "last_edit_date": 1583384000, "question_id": 54671212, "link": "https://stackoverflow.com/questions/54671212/what-is-the-use-of-pointer-to-an-array", "title": "What is the use of Pointer to an array", "body": "<p>What is the use of having pointer to an array when we can have single array of pointer.</p>\n\n<pre><code>int main()\n{\n    int arr[] = {20,30,40,50,60,70};\n    int (*ptr)[6] = &amp;arr;\n    int *prtarr[1] = { arr };\n\n    for (int i = 0; i &lt; sizeof(arr) / sizeof(arr[0]); i++)\n    {\n        cout &lt;&lt; arr[i] &lt;&lt; endl;     \n        cout &lt;&lt; ptr[0][i] &lt;&lt; endl;\n        cout &lt;&lt; prtarr[0][i] &lt;&lt; endl;\n    }  \n    return 0;\n}\n</code></pre>\n\n<p>instead of using pointer to an array we can use size 1 array and same result is expected.</p>\n"}, {"tags": ["c++", "windows", "math", "console-application"], "comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 3, "creation_date": 1550064749, "post_id": 54671098, "comment_id": 96132634, "body": "The actual value of <code>20!</code> overflows a 32-bit  signed integral type.  Overflowing an <code>int</code> gives undefined behaviour.  Undefined means anything can happen - &quot;going to negative&quot; happens to be the symptom you see."}, {"owner": {"reputation": 3365, "user_id": 2564696, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bfecfacff3f61943083d01444ade243?s=128&d=identicon&r=PG", "display_name": "dmuir", "link": "https://stackoverflow.com/users/2564696/dmuir"}, "edited": false, "score": 1, "creation_date": 1550070514, "post_id": 54671098, "comment_id": 96136430, "body": "Another way to get an idea of how big a factorial is is to use exp( lgamma(n+1)), lgamma from the math library."}], "owner": {"reputation": 73, "user_id": 11050936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b49a491c9c344c0bd24aa4b287466507?s=128&d=identicon&r=PG&f=1", "display_name": "Priyanshu Verma", "link": "https://stackoverflow.com/users/11050936/priyanshu-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "closed_date": 1550064859, "answer_count": 0, "score": 0, "last_activity_date": 1550063707, "creation_date": 1550063707, "question_id": 54671098, "link": "https://stackoverflow.com/questions/54671098/factorial-function-going-to-negative-when-input-exceed-20", "closed_reason": "Duplicate", "title": "Factorial function going to negative when input exceed 20", "body": "<p>I made a function using recursive functions that compute factorials.\nBut the function started outputting large negative numbers for some reason</p>\n\n<p>My whole program-:</p>\n\n<pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint factorial(int x)\n{\n    if (x == 1) { return 1; }\n    else { return x * factorial(x - 1); }\n}\n\nint main()\n{\n    int a;\n    system(\"cls\");\n    cout &lt;&lt; \"Write the number u want to factorial: \";\n    cin &gt;&gt;  a;\n    cout &lt;&lt; factorial(a);\n    cout &lt;&lt; endl;\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["c++", "templates", "language-lawyer"], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 4370718, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-QwpljdZAeKQ/AAAAAAAAAAI/AAAAAAAAABU/lX_6YR3r2ZA/photo.jpg?sz=128", "display_name": "z3dd", "link": "https://stackoverflow.com/users/4370718/z3dd"}, "edited": false, "score": 0, "creation_date": 1550065468, "post_id": 54671483, "comment_id": 96133081, "body": "What I don&#39;t get is why calling foo&lt; int&gt; is allowed since it boils down to the same signature as foo()? or are they considered different?"}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "reply_to_user": {"reputation": 150, "user_id": 4370718, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-QwpljdZAeKQ/AAAAAAAAAAI/AAAAAAAAABU/lX_6YR3r2ZA/photo.jpg?sz=128", "display_name": "z3dd", "link": "https://stackoverflow.com/users/4370718/z3dd"}, "edited": false, "score": 0, "creation_date": 1550065664, "post_id": 54671483, "comment_id": 96133210, "body": "@z3dd Yes they are different: <code>foo&lt;int&gt;</code> is a template instantiation. So it can\u2019t be the same as the non-template <code>foo</code>. You can\u2019t refer to non-templates by providing template arguments. So there\u2019s no ambiguity."}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": true, "score": 5, "last_activity_date": 1550066033, "last_edit_date": 1550066033, "creation_date": 1550064852, "answer_id": 54671483, "question_id": 54671044, "link": "https://stackoverflow.com/questions/54671044/why-no-ambiguity-when-choosing-between-templated-and-non-templated-functions-wit/54671483#54671483", "title": "Why no ambiguity when choosing between templated and non-templated functions with same signatures?", "body": "<p>The text you quote is rather dense; you have to read it carefully. \"F1 is better than F2 if for all arguments <code>i</code>, ICSi(F1) <strong>is not a worse conversion sequence</strong> than ICSi(F2)\" -- that's true here, since the two conversion sequences are the same, hence, neither is <strong>worse than</strong> the other. So now you move to the last part: \"<strong>and then</strong> F1 is a non-template function and F2 is a function template specialization\". That's true, so F1 is a better match than F2. Substituting <code>foo()</code> and <code>foo&lt;int&gt;()</code> for F1 and F2, respectively, the rule says that <code>foo()</code> is a better match than <code>foo&lt;int&gt;()</code>.</p>\n\n<p>Whoops, I answered the wrong question. As the comment points out, the question is, why does explicitly calling <code>foo&lt;int&gt;()</code> not resolve to <code>foo()</code>? And the answer is, <code>foo&lt;int&gt;()</code> is a call to an explicit template instantiation, not a call to an overloaded function. Consider:</p>\n\n<pre><code>template &lt;class Ty&gt;\nvoid f(Ty) { }\n\nvoid f(int);\nvoid g(int);\n\nf(3.14);      // calls f&lt;double&gt; (overloaded function call)\nf(1);         // calls f(int) (overloaded function call)\nf&lt;int&gt;(3.14); // calls f&lt;int&gt; (explicit call of template instantiation)\ng(3.14);      // calls g(int)\n</code></pre>\n\n<p>In this example, <code>f&lt;int&gt;</code> is the name of a template specialization. It is <strong>not</strong> the general function named <code>f</code>, so there is no overloading to consider, just like the call to <code>g(3.14)</code>.</p>\n"}], "owner": {"reputation": 150, "user_id": 4370718, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-QwpljdZAeKQ/AAAAAAAAAAI/AAAAAAAAABU/lX_6YR3r2ZA/photo.jpg?sz=128", "display_name": "z3dd", "link": "https://stackoverflow.com/users/4370718/z3dd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54671483, "answer_count": 1, "score": 1, "last_activity_date": 1550066033, "creation_date": 1550063563, "last_edit_date": 1550065620, "question_id": 54671044, "link": "https://stackoverflow.com/questions/54671044/why-no-ambiguity-when-choosing-between-templated-and-non-templated-functions-wit", "title": "Why no ambiguity when choosing between templated and non-templated functions with same signatures?", "body": "<p>The following code passes asserts:</p>\n\n<pre><code>int foo() { return 1; }\n\ntemplate&lt;typename T&gt;\nint foo() { return 2; }\n\nint main() {\n  assert( 1 == foo() );\n  assert( 2 == foo&lt;int&gt;() );\n  return 0;\n}\n</code></pre>\n\n<p>But to my understanding, according to Paragraph 13.3.3/1 of the C++11 Standard:</p>\n\n<blockquote>\n  <p>[...] Given these definitions, a viable function <code>F1</code> is defined to be a better function than another viable function <code>F2</code> if for all arguments <code>i</code>, <code>ICSi(F1)</code> is not a worse conversion sequence than <code>ICSi(F2)</code>, and then [...] <code>F1</code> is a non-template function and <code>F2</code> is a function template specialization [...]</p>\n</blockquote>\n\n<p>It should not, because signatures end up to be the same. So why is there no ambiguity when <code>foo&lt;int&gt;()</code> is called? What am I missing? </p>\n"}, {"tags": ["c++", "algorithm", "math"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 7, "creation_date": 1550063552, "post_id": 54670971, "comment_id": 96131842, "body": "<code>O(1)</code> with fixed size input makes little sense... as checking 24 possibilities is <code>O(1)</code>..."}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1550064580, "post_id": 54670971, "comment_id": 96132536, "body": "Maybe the setter of the assignment simply meant that the code should take a constant amount of time to run regardless of the input values (with a fixed size input of 4)? You&#39;ll need to go back to them to clarify what they mean as @Jarod42 is correct that <code>O(1)</code> doesn&#39;t make much sense for a fixed size input. What solutions have you found? What makes you think they aren&#39;t <code>O(1)</code>? Show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550064664, "post_id": 54670971, "comment_id": 96132580, "body": "Check the 24 possibilities with several inputs. Do you see a pattern ? Do you have different strategy with only positive numbers ? Where are positive/negative values when mixing sign ? Where are min/max (absolute) values ?"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1550064970, "post_id": 54670971, "comment_id": 96132774, "body": "w.l.o.g. you can consider only non-negative numbers, since the answer is unchanged if you add a constant to each value."}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1550065095, "post_id": 54670971, "comment_id": 96132849, "body": "Related (but no answer): <a href=\"https://stackoverflow.com/questions/46995504/maximum-sum-of-absolute-differences-dynamic-programming\" title=\"maximum sum of absolute differences dynamic programming\">stackoverflow.com/questions/46995504/&hellip;</a>"}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1550065689, "post_id": 54670971, "comment_id": 96133231, "body": "Solution with explanation (spoilers): <a href=\"https://www.geeksforgeeks.org/maximum-sum-absolute-difference-array/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/maximum-sum-absolute-difference-array</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1550072304, "post_id": 54670971, "comment_id": 96137575, "body": "@kvantour: little different as <code>abs(s[0]-s[3])</code> is missing for OP."}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 0, "creation_date": 1550073786, "post_id": 54670971, "comment_id": 96138444, "body": "Related (but no upvoted solutions): <a href=\"https://stackoverflow.com/questions/37496769/maximize-summation-of-absolute-difference-of-array-by-rearranging-the-array\" title=\"maximize summation of absolute difference of array by rearranging the array\">stackoverflow.com/questions/37496769/&hellip;</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "edited": false, "score": 1, "creation_date": 1550074313, "post_id": 54670971, "comment_id": 96138765, "body": "@kvantour: <code>{1, 8, 2, 4}</code> -&gt; 15 whereas <code>{4, 1, 8, 2}</code> -&gt; 16."}, {"owner": {"reputation": 20517, "user_id": 8344060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1UbPk.png?s=128&g=1", "display_name": "kvantour", "link": "https://stackoverflow.com/users/8344060/kvantour"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550076395, "post_id": 54670971, "comment_id": 96140121, "body": "@Jarod42 interesting"}, {"owner": {"reputation": 14582, "user_id": 871096, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/39b6e181c797ef3ab2119322f7cac20b?s=128&d=identicon&r=PG", "display_name": "Robert Dodier", "link": "https://stackoverflow.com/users/871096/robert-dodier"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550080995, "post_id": 54670971, "comment_id": 96142595, "body": "@Jarod42 Agreed that checking a fixed set of permutations is constant time, but maybe the intent is that requiring O(1) rules out solutions for which the run time is a function of the magnitude of the inputs. I don&#39;t really have anything at stake here, I&#39;m just trying to see how it could make sense."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1550083140, "last_edit_date": 1550083140, "creation_date": 1550080169, "answer_id": 54676459, "question_id": 54670971, "link": "https://stackoverflow.com/questions/54670971/how-to-find-the-max-absolute-sum-of-a-function-with-a-set-of-integers/54676459#54676459", "title": "How to find the &#39;max absolute sum&#39; of a function with a set of integers", "body": "<p>If you do all permutations from <code>0, a, a+b, a+b+c</code> (with <code>a</code>, <code>b</code>, <code>c</code> positive), you would see that maximum is reach for:</p>\n\n<ul>\n<li><code>a, a+b+c, 0, a+b</code></li>\n<li>and by symmetry <code>a+b, 0, a+b+c, a</code></li>\n</ul>\n\n<p>(resulting in <code>2*a + 3*b + 2*c</code>).</p>\n\n<p>Unreadable solution (\"sort\" in place):</p>\n\n<pre><code>int rearrange(int (&amp;a)[4])\n{\n    if (a[3] &lt; a[2]) {\n        std::swap(a[3], a[2]);\n    } // a[2] &lt;= a[3]\n    if (a[1] &lt; a[0]) {\n        std::swap(a[1], a[0]);\n    } // a[2] &lt;= a[3] &amp;&amp; a[0] &lt;= a[1]\n    if (a[0] &lt; a[2]) {\n        std::swap(a[0], a[2]);\n    } // a[2] &lt;= a[3] &amp;&amp; a[2] &lt;= a[0] &lt;= a[1] -&gt; a[2] is the min\n    if (a[1] &lt; a[3]) {\n        std::swap(a[1], a[3]);\n    } // a[2] &lt;= a[3] &lt;= a[1] &amp;&amp; a[2] &lt;= a[0] &lt;= a[1] -&gt; a[1] is the max\n    if (a[3] &lt; a[0]) {\n        std::swap(a[3], a[0]);\n    } // a[2] &lt;= a[0] &lt;= a[3] &lt;= a[1]\n    // as we know order, we might get rid of abs:\n    // (a[1] - a[0]) + (a[1] - a[2]) + (a[3] - a[2]);\n    return -a[0] + 2 * a[1] - 2 * a[2] + a[3];\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/O7PzfG\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 5, "user_id": 10979304, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-aG7yqAyzR4k/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNUvl1oHlB-ODDJQqmheadEUDbDyQ/mo/photo.jpg?sz=128", "display_name": "Charles Barker", "link": "https://stackoverflow.com/users/10979304/charles-barker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1550083140, "creation_date": 1550063324, "last_edit_date": 1550064581, "question_id": 54670971, "link": "https://stackoverflow.com/questions/54670971/how-to-find-the-max-absolute-sum-of-a-function-with-a-set-of-integers", "title": "How to find the &#39;max absolute sum&#39; of a function with a set of integers", "body": "<p>I'm trying to solve this problem in C++, struggling to find a solution that is O(1).</p>\n\n<p>Given an input array of four integers (s), shuffle them into an order such that <code>F(s) = abs(s[0]-s[1]) + abs(s[1]-s[2])+ abs(s[2]-s[3])</code> is maximum (absolute).</p>\n\n<p>If the integers are each unique, then there are a max of 24 possible shuffles.</p>\n\n<p>e.g. </p>\n\n<pre><code>A=5, B=3, C=-1, D=5\n</code></pre>\n\n<p>Shuffled to</p>\n\n<pre><code>A=5, B=-1, C=5, D=3\n</code></pre>\n\n<p>Would result in</p>\n\n<pre><code>F(s) = 14;\n</code></pre>\n\n<p>This algorithm should be O(1).</p>\n\n<p>Do note the mix of negative and positive integers.</p>\n\n<pre><code>F(s) = abs(s[0]-s[1]) + abs(s[1]-s[2])+ abs(s[2]-s[3])\n</code></pre>\n"}, {"tags": ["c++", "tensorflow", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550065241, "post_id": 54670949, "comment_id": 96132944, "body": "It is a <b>requirement</b> of Stack Overflow to have <b>textual</b> representation of the error logs in the question post, <i>images</i> doesn&#39;t not fit for that purpose. Please, <a href=\"https://stackoverflow.com/posts/54670949/edit\">edit</a> your question post and copy-paste logs into it. When copy-paste, make sure that <b>the first error</b> is copied too - in most situations the first error message is the most important one."}, {"owner": {"reputation": 1140, "user_id": 7959545, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Spa51.png?s=128&g=1", "display_name": "Sohaib Anwaar", "link": "https://stackoverflow.com/users/7959545/sohaib-anwaar"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550066807, "post_id": 54670949, "comment_id": 96133953, "body": "I first copied the error log but it creating a mess nothing is understandable I am really sorry for that. Next time I will copy paste my error log."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550067791, "post_id": 54670949, "comment_id": 96134550, "body": "You may format the log as a <i>code</i>: select the log and press <code>Ctrl+K</code> or push <code>{}</code> button. Do not wait for the next post - edit the current one."}, {"owner": {"reputation": 1140, "user_id": 7959545, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Spa51.png?s=128&g=1", "display_name": "Sohaib Anwaar", "link": "https://stackoverflow.com/users/7959545/sohaib-anwaar"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550068993, "post_id": 54670949, "comment_id": 96135367, "body": "Kindly view the error I have edited my Question"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550070698, "post_id": 54670949, "comment_id": 96136548, "body": "It seems that you have lost error messages &quot;hash of ... does not match expected value&quot;. But exactly those messages are the <b>true errors</b> - others (which you are showing now) are just <i>warnings</i> and do not prevent building the project."}, {"owner": {"reputation": 1140, "user_id": 7959545, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Spa51.png?s=128&g=1", "display_name": "Sohaib Anwaar", "link": "https://stackoverflow.com/users/7959545/sohaib-anwaar"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550071129, "post_id": 54670949, "comment_id": 96136843, "body": "I have go through from all the steps again. I got this error and I have got 139 warning and 1 error in building tf_example. please see the bottom of error log. thank you!"}, {"owner": {"reputation": 1140, "user_id": 7959545, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Spa51.png?s=128&g=1", "display_name": "Sohaib Anwaar", "link": "https://stackoverflow.com/users/7959545/sohaib-anwaar"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550071202, "post_id": 54670949, "comment_id": 96136905, "body": "error MSB6006: &quot;cmd.exe&quot; exited with code 1 view this error"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550071322, "post_id": 54670949, "comment_id": 96136984, "body": "<code>error MSB6006: &quot;cmd.exe&quot; exited with code 1.</code> is a &quot;cumulative&quot; error message - it just means that there are some <i>other</i> errors. Given only that error message it is impossible to guess about &quot;what is going wrong&quot;."}, {"owner": {"reputation": 1140, "user_id": 7959545, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Spa51.png?s=128&g=1", "display_name": "Sohaib Anwaar", "link": "https://stackoverflow.com/users/7959545/sohaib-anwaar"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550073391, "post_id": 54670949, "comment_id": 96138216, "body": "I have pasted my whole error log!"}, {"owner": {"reputation": 1140, "user_id": 7959545, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Spa51.png?s=128&g=1", "display_name": "Sohaib Anwaar", "link": "https://stackoverflow.com/users/7959545/sohaib-anwaar"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1550145034, "post_id": 54670949, "comment_id": 96167054, "body": "@Tsyvarev is it required to download cuda and give config to tensorflow cpu version ?"}], "owner": {"reputation": 1140, "user_id": 7959545, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Spa51.png?s=128&g=1", "display_name": "Sohaib Anwaar", "link": "https://stackoverflow.com/users/7959545/sohaib-anwaar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550068967, "creation_date": 1550063261, "last_edit_date": 1550068967, "question_id": 54670949, "link": "https://stackoverflow.com/questions/54670949/msbuild-error-while-configuring-tf-tutorial-example-trainer-vcxproj", "title": "MsBuild Error while configuring tf_tutorial_example_trainer.vcxproj", "body": "<p>Hello their I hope you all are in good health. Actually I want to export my model onto C++ Visual Studio. For this I have to download Tensorflow on windows. I used Tensorflow Docomentation for all this step but while configuring MSBUILD of tf_example I am getting error. I tried almost 7 times but the same error occurs.</p>\n\n<p>I have tried many youtube videos and docomentation but for them these command is working well.  <a href=\"https://github.com/tensorflow/tensorflow/blob/395cfc42ee3c5842f5383f4049674c012998b133/tensorflow/contrib/cmake/README.md\" rel=\"nofollow noreferrer\">TensforFlow Cmake Link</a>   </p>\n\n<p>I am getting error on.</p>\n\n<pre><code>MSBuild /p:Configuration=Release tf_python_build_pip_package.vcxproj\n</code></pre>\n\n<p>Error LOG!</p>\n\n<pre><code>arning C4996: 'strncpy': This function or variable may be unsafe. Consider usin\ng strncpy_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See o\nnline help for details. [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\\njpeg-build\\libjpeg.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg.\nvcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg\\jerror.c(194): war\nning C4996: 'sprintf': This function or variable may be unsafe. Consider using\nsprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See onl\nine help for details. [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jp\neg-build\\libjpeg.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg.vc\nxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg\\jerror.c(196): war\nning C4996: 'sprintf': This function or variable may be unsafe. Consider using\nsprintf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See onl\nine help for details. [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jp\neg-build\\libjpeg.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg.vc\nxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg\\jmemmgr.c(307): wa\nrning C4267: '+=': conversion from 'size_t' to 'long', possible loss of data [E\n:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg-build\\libjpeg.vcxproj\n] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg\\jmemmgr.c(367): wa\nrning C4267: '+=': conversion from 'size_t' to 'long', possible loss of data [E\n:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg-build\\libjpeg.vcxproj\n] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg\\jmemmgr.c(977): wa\nrning C4267: '-=': conversion from 'size_t' to 'long', possible loss of data [E\n:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg-build\\libjpeg.vcxproj\n] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg\\jmemmgr.c(991): wa\nrning C4267: '-=': conversion from 'size_t' to 'long', possible loss of data [E\n:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg-build\\libjpeg.vcxproj\n] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg\\jmemmgr.c(1107): w\narning C4996: 'getenv': This function or variable may be unsafe. Consider using\n _dupenv_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See on\nline help for details. [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\j\npeg-build\\libjpeg.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg.v\ncxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jpeg\\jmemmgr.c(1110): w\narning C4996: 'sscanf': This function or variable may be unsafe. Consider using\n sscanf_s instead. To disable deprecation, use _CRT_SECURE_NO_WARNINGS. See onl\nine help for details. [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg\\src\\jp\neg-build\\libjpeg.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\jpeg.vc\nxproj]\n\n\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tutorials_example_trainer.vcxp\nroj\" (default target) (1) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_framework.vcxproj\" (default\n target) (3) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj\" (defau\nlt target) (4) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\proto_text.vcxproj\" (default targ\net) (5) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_lib.vcxproj\" (default tar\nget) (9) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png_copy_headers_to_destination.v\ncxproj\" (default target) (26) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png_create_destination_dir.vcxpro\nj\" (default target) (27) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj\" (default target) (28\n) -&gt;\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngpread.c(572): war\nning C4267: '-=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngpread.c(588): war\nning C4267: '-=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngpread.c(767): war\nning C4267: '-=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngpread.c(791): war\nning C4267: '-=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(228): war\nning C4267: '=': conversion from 'size_t' to 'uInt', possible loss of data [E:\\\ntensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj] [E:\\\ntensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(238): war\nning C4267: '=': conversion from 'size_t' to 'uInt', possible loss of data [E:\\\ntensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj] [E:\\\ntensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(241): war\nning C4267: '=': conversion from 'size_t' to 'int', possible loss of data [E:\\t\nensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj] [E:\\t\nensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(365): war\nning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible los\ns of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12\n.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(412): war\nning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible los\ns of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12\n.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(1124): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(1241): wa\nrning C4267: '=': conversion from 'size_t' to 'int', possible loss of data [E:\\\ntensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj] [E:\\\ntensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3356): wa\nrning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible lo\nss of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png1\n2.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3359): wa\nrning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible lo\nss of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png1\n2.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3360): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3364): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3379): wa\nrning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible lo\nss of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png1\n2.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3380): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3383): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(305): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj]\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(322): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj]\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(345): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj]\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(609): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj]\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(947): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj]\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngwutil.c(191): war\nning C4267: '=': conversion from 'size_t' to 'int', possible loss of data [E:\\t\nensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxproj] [E:\\t\nensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngwutil.c(1594): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngpread.c(572): war\nning C4267: '-=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngpread.c(588): war\nning C4267: '-=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngpread.c(767): war\nning C4267: '-=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngpread.c(791): war\nning C4267: '-=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(228): war\nning C4267: '=': conversion from 'size_t' to 'uInt', possible loss of data [E:\\\ntensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.vcxpro\nj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(238): war\nning C4267: '=': conversion from 'size_t' to 'uInt', possible loss of data [E:\\\ntensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.vcxpro\nj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(241): war\nning C4267: '=': conversion from 'size_t' to 'int', possible loss of data [E:\\t\nensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.vcxproj\n] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(365): war\nning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible los\ns of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12\n_static.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(412): war\nning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible los\ns of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12\n_static.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(1124): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(1241): wa\nrning C4267: '=': conversion from 'size_t' to 'int', possible loss of data [E:\\\ntensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.vcxpro\nj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3356): wa\nrning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible lo\nss of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png1\n2_static.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3359): wa\nrning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible lo\nss of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png1\n2_static.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3360): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3364): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3379): wa\nrning C4267: 'function': conversion from 'size_t' to 'png_uint_32', possible lo\nss of data [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png1\n2_static.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3380): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngrutil.c(3383): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(305): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.v\ncxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(322): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.v\ncxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(345): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.v\ncxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(609): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.v\ncxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngset.c(947): warni\nng C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of data\n [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.v\ncxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngwutil.c(191): war\nning C4267: '=': conversion from 'size_t' to 'int', possible loss of data [E:\\t\nensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_static.vcxproj\n] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngwutil.c(1594): wa\nrning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of d\nata [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\png12_stati\nc.vcxproj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngtest.c(400): warn\ning C4267: '=': conversion from 'size_t' to 'png_uint_32', possible loss of dat\na [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\pngtest.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngtest.c(1155): war\nning C4267: 'function': conversion from 'size_t' to 'int', possible loss of dat\na [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\pngtest.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n  E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png\\pngtest.c(1321): war\nning C4267: 'function': conversion from 'size_t' to 'int', possible loss of dat\na [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png\\src\\png-build\\pngtest.vcxpr\noj] [E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\png.vcxproj]\n\n\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_tutorials_example_trainer.vcxp\nroj\" (default target) (1) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_cc_framework.vcxproj\" (default\n target) (3) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_framework.vcxproj\" (defau\nlt target) (4) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\proto_text.vcxproj\" (default targ\net) (5) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\tf_core_lib.vcxproj\" (default tar\nget) (9) -&gt;\n\"E:\\tensorflow\\tensorflow\\contrib\\cmake\\build\\gemmlowp.vcxproj\" (default target\n) (15) -&gt;\n(CustomBuild target) -&gt;\n  C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.CppCommon.ta\nrgets(171,5): error MSB6006: \"cmd.exe\" exited with code 1. [E:\\tensorflow\\tenso\nrflow\\contrib\\cmake\\build\\gemmlowp.vcxproj]\n\n    139 Warning(s)\n    1 Error(s)\n\nTime Elapsed 00:28:05.31\n\nE:\\tensorflow\\tensorflow\\contrib\\cmake\\build&gt;\n</code></pre>\n\n<p>I need to export my model to Visual studio 2015  on windows 8.1. Thank you guys.</p>\n"}, {"tags": ["c++", "c++11", "operator-overloading"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1550063517, "post_id": 54670894, "comment_id": 96131821, "body": "What is the reason for <code>this-&gt;two = &amp;two</code>? Why use a pointer? Will this pointer be stored by e.g. the <code>DivideOperation</code> objects and used much later (when the object they point to have gone out of scope or is destructed)? And why pointers for <code>frontOp</code>? That dynamic allocation looks like a memory leak."}, {"owner": {"reputation": 3, "user_id": 10943274, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1Bwa86a1x2Y/AAAAAAAAAAI/AAAAAAAAE-c/5eydcBzbAGA/photo.jpg?sz=128", "display_name": "Karan Chahal", "link": "https://stackoverflow.com/users/10943274/karan-chahal"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1550155640, "post_id": 54670894, "comment_id": 96173533, "body": "Yes, the <code>this-&gt;two = two</code> is not required. I&#39;ll remove that, I&#39;m using pointers for <code>frontOp</code> as I need to store a reference to the operation that a floatTensor goes through. This information will be used much later. Adding the const in front of FloatTensor two in function header is not an option as the pointer can be changed later."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10943274, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1Bwa86a1x2Y/AAAAAAAAAAI/AAAAAAAAE-c/5eydcBzbAGA/photo.jpg?sz=128", "display_name": "Karan Chahal", "link": "https://stackoverflow.com/users/10943274/karan-chahal"}, "edited": false, "score": 0, "creation_date": 1550155724, "post_id": 54670951, "comment_id": 96173588, "body": "I can&#39;t let it be const as the value of two can be changed later on. Is there any way around this, while keeping two non const. Or keeping it const only for temporaries and not for say ``` x1*w1```"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 3, "user_id": 10943274, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1Bwa86a1x2Y/AAAAAAAAAAI/AAAAAAAAE-c/5eydcBzbAGA/photo.jpg?sz=128", "display_name": "Karan Chahal", "link": "https://stackoverflow.com/users/10943274/karan-chahal"}, "edited": false, "score": 0, "creation_date": 1550155797, "post_id": 54670951, "comment_id": 96173630, "body": "You can provide a non-<code>const</code> overload for non-temporaries."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 3, "last_activity_date": 1550063266, "creation_date": 1550063266, "answer_id": 54670951, "question_id": 54670894, "link": "https://stackoverflow.com/questions/54670894/using-multiple-operators-with-operator-overloading-gives-strange-error/54670951#54670951", "title": "Using multiple operators with operator overloading gives strange error", "body": "<p>Your operators accept a non-<code>const</code> lvalue reference as an argument. Temporaries do not bind to non-<code>const</code> lvalue references. To accept temporaries, use:</p>\n\n<pre><code>FloatTensor operator + (const FloatTensor &amp;two)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10943274, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-1Bwa86a1x2Y/AAAAAAAAAAI/AAAAAAAAE-c/5eydcBzbAGA/photo.jpg?sz=128", "display_name": "Karan Chahal", "link": "https://stackoverflow.com/users/10943274/karan-chahal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550155779, "creation_date": 1550063033, "last_edit_date": 1550155779, "question_id": 54670894, "link": "https://stackoverflow.com/questions/54670894/using-multiple-operators-with-operator-overloading-gives-strange-error", "title": "Using multiple operators with operator overloading gives strange error", "body": "<p>I have a single class called FloatTensor. I have overloaded operators for + and * in that. Here is the code.</p>\n\n<pre><code>\nclass FloatTensor {\n    public:\n    float val; // value of tensor \n    float grad; // value of grad\n    Operation *frontOp =NULL, *backOp =NULL;\n    FloatTensor* two;\n    FloatTensor() {\n        // default\n    }\n\n    FloatTensor(float val) {\n        this-&gt;val = val;\n    }\n\n    FloatTensor(float val, Operation* op) {\n        this-&gt;val = val;\n        this-&gt;backOp = op;\n    }\n\n    void backward(float grad) {\n        this-&gt;grad = grad;\n        if(this-&gt;backOp != NULL) {\n            this-&gt;backOp-&gt;backward(grad);\n        }\n    }\n    FloatTensor exp() {\n        this-&gt;frontOp = new ExponentOperation(this);\n        return this-&gt;frontOp-&gt;compute();\n    }\n\n    FloatTensor operator * (FloatTensor &amp;two) { \n\n        this-&gt;frontOp = new MultiplyOperation(this, &amp;two);\n        return this-&gt;frontOp-&gt;compute();\n    }\n\n    FloatTensor operator + (FloatTensor &amp;two) { \n        this-&gt;frontOp = new AddOperation(this, &amp;two);\n        return this-&gt;frontOp-&gt;compute();\n    }\n\n    FloatTensor operator / (FloatTensor &amp;two) { \n\n        this-&gt;frontOp = new DivideOperation(this, &amp;two);\n        return this-&gt;frontOp-&gt;compute();\n    }\n\n};\n</code></pre>\n\n<p>IN my main function when I try simple overloading, things work great</p>\n\n<pre><code>int main() {\n\n    // X \n    FloatTensor x1(200); // heap declaration\n    FloatTensor x2(300);\n\n    // Weights\n    FloatTensor w1(222);\n    FloatTensor w2(907);\n\n    FloatTensor temp = (x1*w1);\n\n}\n</code></pre>\n\n<p>However when I try to overload this formula with more operators like this </p>\n\n<pre><code>int main() {\n\n    // X \n    FloatTensor x1(200); // heap declaration\n    FloatTensor x2(300);\n\n    // Weights\n    FloatTensor w1(222);\n    FloatTensor w2(907);\n\n    FloatTensor temp = (x1*w1) + (x2*w2);\n\n}\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>no operator \"+\" matches these operands -- operand types are: FloatTensor + FloatTensor\n</code></pre>\n\n<p>I would be very grateful if someone can explain why this is happening. I observed that this works:</p>\n\n<pre><code>x1*w1*x2*x1;\nx1*w1 + x2;\n</code></pre>\n\n<p>But <code>x1*w1 + x2*w2</code> does not.</p>\n\n<p>Very strange..</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 15619, "user_id": 1548468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0745dce203d52699e63a575b3103ad70?s=128&d=identicon&r=PG", "display_name": "Botje", "link": "https://stackoverflow.com/users/1548468/botje"}, "edited": false, "score": 0, "creation_date": 1550063418, "post_id": 54670886, "comment_id": 96131759, "body": "Where would this function be hosted? The literal answer to your question is to  create a <code>std::map&lt;string, std::function&lt;void()&gt;&gt;</code> to store your functions, then look them up and call them. I&#39;m assuming your <code>clicked</code> function is actually implemented on some object that derives from <code>QObject</code>, in which case you can <a href=\"https://doc.qt.io/qt-5/qmetaobject.html#invokeMethod\" rel=\"nofollow noreferrer\">ask Qt to invoke named slots for you</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 1, "creation_date": 1550063753, "post_id": 54671107, "comment_id": 96131986, "body": "Thats exactly what I was thinking of!"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1550064976, "post_id": 54671107, "comment_id": 96132780, "body": "If I was to create a map what type would the signal be?"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1550065069, "post_id": 54671107, "comment_id": 96132831, "body": "Its been suggested over on the Qt forum to use QSignalMapper, looking into this now."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1550065156, "post_id": 54671107, "comment_id": 96132887, "body": "Looking at the examples on the QSignalMapper page, it doesn&#39;t make sense to me and I see no examples of using a string to map to a function."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1550065186, "post_id": 54671107, "comment_id": 96132917, "body": "How can I create a map that will give me any signal based on using a text lookup?"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1550066228, "post_id": 54671107, "comment_id": 96133600, "body": "I tried using: QMetaObject::invokeMethod(this, pobjSignal-&gt;strGetSignal(), Qt::DirectConnection), but I get the warning:  no matching function call to &#39;invokeMethod&#39;"}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1550067061, "post_id": 54671107, "comment_id": 96134093, "body": "I want to be able to use any signal for any Qt control, the idea is that a string is supplied and translated into the corresponding signal function."}, {"owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "edited": false, "score": 0, "creation_date": 1550071282, "post_id": 54671107, "comment_id": 96136956, "body": "I have now realised that what I want to do isn&#39;t possible, so I will have to implement conditional logic for each object type and compare the various strings."}], "tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": true, "score": 1, "last_activity_date": 1550063794, "last_edit_date": 1550063794, "creation_date": 1550063724, "answer_id": 54671107, "question_id": 54670886, "link": "https://stackoverflow.com/questions/54670886/qt-how-to-translate-string-to-function/54671107#54671107", "title": "Qt how to translate string to function?", "body": "<p>of course you can: you have in fact 2 options,</p>\n\n<p>create a Map with string, function. and get the value by key and invoke it</p>\n\n<p>or(a little bit more complex)</p>\n\n<p>the methods must be of a classs that inherits the QObject class\nand the methods are  slots or \"invokable\" functions,</p>\n\n<p>and you need to use the </p>\n\n<p>QMetaObject::invokeMethod method...</p>\n\n<p>example:</p>\n\n<pre><code>FOO::MyClass obj;\nQMetaObject::invokeMethod(&amp;obj, \"foo\", Qt::DirectConnection);\n</code></pre>\n"}], "owner": {"reputation": 4398, "user_id": 3697264, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/5adc5afbd7a1145fdd762d872b4b43bb?s=128&d=identicon&r=PG", "display_name": "SPlatten", "link": "https://stackoverflow.com/users/3697264/splatten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 54671107, "answer_count": 1, "score": 0, "last_activity_date": 1550073668, "creation_date": 1550062989, "last_edit_date": 1550063763, "question_id": 54670886, "link": "https://stackoverflow.com/questions/54670886/qt-how-to-translate-string-to-function", "title": "Qt how to translate string to function?", "body": "<p>Is it possible to translate a string (QString) from a literal into a function and call it?</p>\n\n<p>For example, I have the a string containing \"clicked\", I want to translate this into a function and call it, something like:</p>\n\n<pre><code>eval(\"clicked\")()\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1550063033, "post_id": 54670865, "comment_id": 96131513, "body": "moving from one buffer to another..."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 0, "last_activity_date": 1550063527, "last_edit_date": 1592644375, "creation_date": 1550063527, "answer_id": 54671031, "question_id": 54670865, "link": "https://stackoverflow.com/questions/54670865/what-destination-source-rdbuf-is-doing-why-too-many-open-close/54671031#54671031", "title": "what destination &lt;&lt; source.rdbuf(); is doing ? why too many open close", "body": "<p><code>destination</code> is presumably an output character stream. <code>&lt;&lt;</code> is a binary operator which inserts the right hand operand into the output stream that is the left hand operand. In this case, the result of <code>source.rdbuf()</code> is inserted.</p>\n<p><code>source.rdbuf()</code> is a function call. <code>rdbuf</code> is a member function of <code>source</code>. <code>source</code> is presumably in input character stream. Under  this assumption, the behaviour of <code>rdbuf</code> is as per documentation:</p>\n<blockquote>\n<p>Returns the associated stream buffer.</p>\n</blockquote>\n<p>The behaviour of inserting a stream buffer into an output stream is as per documentation:</p>\n<blockquote>\n<p>extracts characters from the input sequence controlled by [the stream buffer] and inserts them into [the output stream] until one of the following conditions</p>\n<ul>\n<li>end-of-file occurs on the input sequence;</li>\n<li>...</li>\n</ul>\n</blockquote>\n<p>As an example, if <code>destination</code> is a string stream, and <code>source</code> is a file stream, then after the operation the string within the buffer of the string stream will contain the entire contents of the file.</p>\n"}], "owner": {"reputation": 9, "user_id": 5626001, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6yiJWXCDC6c/AAAAAAAAAAI/AAAAAAAADKc/c9PU6Kjcj04/photo.jpg?sz=128", "display_name": "Maari R", "link": "https://stackoverflow.com/users/5626001/maari-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 54671031, "answer_count": 1, "score": 0, "last_activity_date": 1550070469, "creation_date": 1550062919, "last_edit_date": 1550070469, "question_id": 54670865, "link": "https://stackoverflow.com/questions/54670865/what-destination-source-rdbuf-is-doing-why-too-many-open-close", "title": "what destination &lt;&lt; source.rdbuf(); is doing ? why too many open close", "body": "<pre><code>if (!source.is_open() || !destination.is_open()) \n{   \n    if (source.is_open())\n    {source.close();\n    }\n    if (destination.is_open())\n    {destination.close();\n    }\n    return -1;\n}\ndestination &lt;&lt; source.rdbuf();\nsource.close();\ndestination.close();\nreturn  0;\n</code></pre>\n"}, {"tags": ["c++", "segmentation-fault"], "comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 4, "creation_date": 1550062575, "post_id": 54670734, "comment_id": 96131212, "body": "Indices start at 0, not 1."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1550062645, "post_id": 54670734, "comment_id": 96131257, "body": "<code>deps.at(i).push_back(-1);</code> throws <code>std::out_of_range</code> (which you don&#39;t catch), for <code>i == 6</code>, due to the last valid index of <code>deps</code> being <code>5</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 0, "creation_date": 1550062684, "post_id": 54670734, "comment_id": 96131281, "body": "Expanding on the comment by @MatthieuBrucher, that of course means that the top index is <code>size() - 1</code>."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "edited": false, "score": 1, "creation_date": 1550062722, "post_id": 54670734, "comment_id": 96131308, "body": "Indeed. Basically all your loops are wrong: <code>for(int i = 1; i &lt;= projects; i++)</code> -&gt; <code>for(int i = 0; i &lt; projects; i++)</code>."}, {"owner": {"reputation": 555, "user_id": 7767044, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d56dea440af5ed95a30a594d547424d9?s=128&d=identicon&r=PG", "display_name": "Juri", "link": "https://stackoverflow.com/users/7767044/juri"}, "edited": false, "score": 0, "creation_date": 1550062843, "post_id": 54670734, "comment_id": 96131392, "body": "Ah of course you&#39;re right! I tried to have my projects start at 1 and not at 0 numbering which lead to this."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "reply_to_user": {"reputation": 50917, "user_id": 947836, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a9addee65c2a92be93004ad689a7a415?s=128&d=identicon&r=PG&f=1", "display_name": "jrok", "link": "https://stackoverflow.com/users/947836/jrok"}, "edited": false, "score": 0, "creation_date": 1550062862, "post_id": 54670734, "comment_id": 96131405, "body": "@jrok Yes, thank you for correcting me (edited the comment). That&#39;s what I get for rarely (if ever) using <code>at</code>. :/"}], "owner": {"reputation": 555, "user_id": 7767044, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d56dea440af5ed95a30a594d547424d9?s=128&d=identicon&r=PG", "display_name": "Juri", "link": "https://stackoverflow.com/users/7767044/juri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1550062587, "creation_date": 1550062533, "last_edit_date": 1550062587, "question_id": 54670734, "link": "https://stackoverflow.com/questions/54670734/segmentation-fault-with-list-push-back", "title": "Segmentation fault with list.push_back", "body": "<p>I'm stuck on a bug which seems above my knowledge level to fix.</p>\n\n<p>The code is an algorithm for the cracking the coding interview task 04_07. In which we have to figure out the dependency structure of projects.</p>\n\n<p>As a data structure I use a vector of lists with ints: <code>vector&lt;list&lt;int&gt;&gt;</code></p>\n\n<p>Accessing the elements after pushing is fine.\nBut when I do it later I get a segmentation fault at <code>deps.at(i).push_back(-1)</code>.</p>\n\n<p>Help is greatly appreciated :) I especially clue less since I'm not using any pointers or manual memory management.</p>\n\n<p>Here is the full code which is the whole program:</p>\n\n<pre><code>int projects = 6;\nvector&lt;list&lt;int&gt;&gt; deps;\n\nfor(int i=1; i&lt;=projects; i++)\n{\n    list&lt;int&gt; l;\n    deps.push_back(l);\n}\n\ndeps[4].push_back(1);\ndeps[2].push_back(6);\ndeps[4].push_back(2);\ndeps[1].push_back(6);\ndeps[3].push_back(4);\n\nfor(auto c: deps)\n    cout &lt;&lt; c.back() &lt;&lt; endl;\n\nvector&lt;int&gt; buildOrder;\n\nwhile(buildOrder.size() &lt; projects)\n{\n    for(int i = 1; i &lt;= projects; i++)\n    {\n        if(deps[i].size() == 0)\n        {\n            buildOrder.push_back(i);\n\n            deps.at(i).push_back(-1);\n\n\n            for(int j=1; j &lt;= projects; j++)\n            {\n                list&lt;int&gt;::iterator iter = find(deps[j].begin(), deps[j].end(), i);\n                if(iter != deps[j].end()) deps[j].erase(iter);\n            }\n\n        }\n    }\n}\n\nfor(int p : buildOrder) cout &lt;&lt; p &lt;&lt; \" \";\ncout &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "sockets", "tcp", "boost-asio"], "comments": [{"owner": {"reputation": 592, "user_id": 4499832, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ba08e84649d6557c3f5a2eee47f01a4f?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/4499832/klaus"}, "reply_to_user": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "edited": false, "score": 0, "creation_date": 1550063590, "post_id": 54670668, "comment_id": 96131871, "body": "You are right. How stupid I am!"}], "answers": [{"tags": [], "owner": {"reputation": 48100, "user_id": 645551, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3231cd5016283f6ea5963ab1dfa6e27a?s=128&d=identicon&r=PG", "display_name": "freakish", "link": "https://stackoverflow.com/users/645551/freakish"}, "is_accepted": true, "score": 1, "last_activity_date": 1550064329, "creation_date": 1550064329, "answer_id": 54671324, "question_id": 54670668, "link": "https://stackoverflow.com/questions/54670668/delegate-use-of-boost-asio-tcp-ip-socket/54671324#54671324", "title": "Delegate use of boost asio TCP/IP socket", "body": "<p>You define <code>io_service</code> on the stack in one thread. But you access it from a different thread. It seems that the object is no longer alive at the moment of <code>.run()</code> call.</p>\n\n<p>Moving it to the heap is one possibility. Anyway some deeper analysis of the code, relationship between components and liveness is needed.</p>\n"}], "owner": {"reputation": 592, "user_id": 4499832, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ba08e84649d6557c3f5a2eee47f01a4f?s=128&d=identicon&r=PG&f=1", "display_name": "klaus", "link": "https://stackoverflow.com/users/4499832/klaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 54671324, "answer_count": 1, "score": 0, "last_activity_date": 1550064329, "creation_date": 1550062322, "question_id": 54670668, "link": "https://stackoverflow.com/questions/54670668/delegate-use-of-boost-asio-tcp-ip-socket", "title": "Delegate use of boost asio TCP/IP socket", "body": "<p>I created a TCP client that has a boost asio tcp socket and who makes asynchronous read:</p>\n\n<pre><code>class TCPClient {\n public:\n  TCPClient(boost::asio::io_service&amp; io_service)\n    : socket_(io_service) {\n    // Connect\n    [...]\n    // Asynchronous read\n    socket_.async_read_some(boost::asio::buffer(buffer, buffer.size()),\n                            boost::bind(&amp;TCPClient::handlerRead,\n                                        this,\n                                        placeholders::error,\n                                        placeholders::bytes_transferred));\n  }\n  ~TCPClient() {}\n\n  void handlerRead(const boost::system::error_code&amp; ec, uint32_t bytes) {\n    if (!ec) {\n      // process\n      [...]\n      socket_.async_read_some(\n        boost::asio::buffer(buffer, buffer.size()),\n        boost::bind(&amp;TCPClient::handlerRead,\n                    this,\n                    placeholders::error,\n                    placeholders::bytes_transferred));\n  }\n\n  int getSocketFd() {\n    return socket_.native_handle();\n  }\n\n private:\n  boost::asio::tcp::socket socket_;\n};\n</code></pre>\n\n<p>This is working fine.\nBut when I am putting this in a thread:</p>\n\n<pre><code>boost::asio::io_service io_service;\nauto client = new TCPClient(io_service);\nstd::thread{[&amp;io_service](){ io_service.run(); }};\n</code></pre>\n\n<p>... and getting file descriptor of the socket:</p>\n\n<pre><code>int socket_fd = client-&gt;getSocketFd();\n</code></pre>\n\n<p>Because I want this part of the program to use the TCP/IP socket to send packets on this socket.\nBut then, my program is segfaulting with this error:</p>\n\n<pre><code>#1  0x000000000041fab0 in boost::asio::detail::task_io_service_operation::complete(boost::asio::detail::task_io_service&amp;, boost::system::error_code const&amp;, unsigned long) ()\n#2  0x0000000000420b5f in boost::asio::detail::task_io_service::do_run_one(boost::asio::detail::scoped_lock&lt;boost::asio::detail::posix_mutex&gt;&amp;, boost::asio::detail::task_io_service_thread_info&amp;, boost::system::error_code const&amp;) ()\n#3  0x00000000004207df in boost::asio::detail::task_io_service::run(boost::system::error_code&amp;) ()\n#4  0x0000000000420eab in boost::asio::io_service::run() ()\n</code></pre>\n\n<p>Do you have any clue on what is happening here ?</p>\n"}, {"tags": ["c++", "stdvector"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1550062704, "post_id": 54670646, "comment_id": 96131298, "body": "Do you know what you measure with <code>&#47;&#47; 14GB</code> ? As released memory may still be assigned to application for later use."}, {"owner": {"reputation": 35, "user_id": 5667679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a057b9245a3d1f7fdd7d328f1621a87c?s=128&d=identicon&r=PG&f=1", "display_name": "user5667679", "link": "https://stackoverflow.com/users/5667679/user5667679"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550063019, "post_id": 54670646, "comment_id": 96131506, "body": "@Jarod42 I measure 14GB with htop. And the memory is not assigned for later use, since the program use more and more memory and then run out of memory even if I&#39;ve released those vector that is not used anymore."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1550063428, "post_id": 54670646, "comment_id": 96131769, "body": "I meant do <code>while (true) {&#47;*main content*&#47;}</code> and unless fragmentation of memory, your memory should stay stable."}, {"owner": {"reputation": 35, "user_id": 5667679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a057b9245a3d1f7fdd7d328f1621a87c?s=128&d=identicon&r=PG&f=1", "display_name": "user5667679", "link": "https://stackoverflow.com/users/5667679/user5667679"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550064357, "post_id": 54670646, "comment_id": 96132376, "body": "@Jarod42 Yes, you are right. The memory usage goes up is because I allocate many other memory."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5667679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a057b9245a3d1f7fdd7d328f1621a87c?s=128&d=identicon&r=PG&f=1", "display_name": "user5667679", "link": "https://stackoverflow.com/users/5667679/user5667679"}, "edited": false, "score": 0, "creation_date": 1550063299, "post_id": 54670737, "comment_id": 96131675, "body": "I tried &quot;vector&lt;HandsDisQuality&gt;().swap(v);&quot; and the memory is still not released."}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 35, "user_id": 5667679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a057b9245a3d1f7fdd7d328f1621a87c?s=128&d=identicon&r=PG&f=1", "display_name": "user5667679", "link": "https://stackoverflow.com/users/5667679/user5667679"}, "edited": false, "score": 2, "creation_date": 1550063390, "post_id": 54670737, "comment_id": 96131737, "body": "And <code>v</code> has now a capacity of <code>0</code> after the call? Are you sure you don&#39;t have another memory leak somewhere? As @Jarod42` said, your application may not give back the memory to the OS, depends on the configuration."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 2, "last_activity_date": 1550062542, "creation_date": 1550062542, "answer_id": 54670737, "question_id": 54670646, "link": "https://stackoverflow.com/questions/54670646/c-release-memory-of-vector-containing-custom-class/54670737#54670737", "title": "c++ release memory of vector containing custom class", "body": "<p>You have to swap it if you really want to clear the memory:</p>\n\n<pre><code>v.swap(vector&lt;HandsDisQuality&gt;());\n</code></pre>\n\n<p><code>shrink_to_fit</code> doesn't have to shrink, it's non-binding:</p>\n\n<blockquote>\n  <p>It is a non-binding request to reduce capacity() to size(). It depends on the implementation whether the request is fulfilled.</p>\n</blockquote>\n"}], "owner": {"reputation": 35, "user_id": 5667679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a057b9245a3d1f7fdd7d328f1621a87c?s=128&d=identicon&r=PG&f=1", "display_name": "user5667679", "link": "https://stackoverflow.com/users/5667679/user5667679"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 54670737, "answer_count": 1, "score": 1, "last_activity_date": 1550062542, "creation_date": 1550062259, "question_id": 54670646, "link": "https://stackoverflow.com/questions/54670646/c-release-memory-of-vector-containing-custom-class", "title": "c++ release memory of vector containing custom class", "body": "<p>I want to release the memory of vector manually. The element of vector is custom class. </p>\n\n<p>I googled that clear and shrink_to_fit will do the job. But It do not work with vector of custom class and work with vector of int.</p>\n\n<p>Below is the test code and definition of the custom class.</p>\n\n<pre><code>using namespace std;\nclass HandsDisQuality{\npublic:\n    unordered_map&lt;Hands,float,HandsHash&gt; handsdis;\n    // handslist is the keys of handsdis\n    std::vector&lt;Hands&gt; handslist;\n\n    HandsDisQuality();\n    HandsDisQuality(std::vector&lt;Hands&gt;&amp; v);\n    HandsDisQuality(unordered_map&lt;Hands,float,HandsHash&gt;&amp; inputhandsdis);\n    HandsDisQuality(float range);\n    void init(unordered_map&lt;Hands,float,HandsHash&gt;&amp; inputhandsdis);\n    float operator[](Hands&amp; key);\n    float get(Hands&amp; key, float defaultvalue);\n    float sum();\n    int size();\n    void removecard(Card&amp; card);\n    void removecard(Hands &amp; hand, vector&lt;Card&gt; &amp; board);\n\n    bool normalize();\n    void printdata(char sep = '\\t');\n    std::vector&lt;Hands&gt; * gethands();\n    Json::Value tojson();\n    void loadfromjson(Json::Value &amp; jsonvalue);\n    void test();\n    static vector&lt;HandsDisQuality&gt; Generateophands(vector&lt;float&gt; oprange);\n    static vector&lt;HandsDisQuality&gt; Generateophands(float oprange);\n};\n\nint main() {\nvector&lt;HandsDisQuality&gt; v(500000,HandsDisQuality(0.3));\n// 14GB\n    cout &lt;&lt; \"init over\"&lt;&lt;endl;\n    char a;\n    cin &gt;&gt; a;\n    v.clear();\n// 14GB\n    cout &lt;&lt; \"after clear\"&lt;&lt;endl;\n    cin &gt;&gt; a;\n    v.shrink_to_fit();\n// 14GB\n    cout &lt;&lt; \"release memory\"&lt;&lt;endl;\n    cin &gt;&gt; a;\n}\n\nint main() {\nvector&lt;int&gt; v(500000000,0);\n// 2.34GB\n    cout &lt;&lt; \"init over\"&lt;&lt;endl;\n    char a;\n    cin &gt;&gt; a;\n    v.clear();\n// 2.34GB\n    cout &lt;&lt; \"after clear\"&lt;&lt;endl;\n    cin &gt;&gt; a;\n    v.shrink_to_fit();\n// 400MB\n    cout &lt;&lt; \"release memory\"&lt;&lt;endl;\n    cin &gt;&gt; a;\n}\n</code></pre>\n"}, {"tags": ["c++", "struct", "hashmap"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1550062216, "post_id": 54670617, "comment_id": 96131000, "body": "&quot;<i>If I add it inside the class Whenever I will create an object, a struct var will be allocated.</i>&quot; Why do you think so?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550062304, "post_id": 54670617, "comment_id": 96131046, "body": "it would help if you show some code demonstrating the first issue, because there is some misunderstanding... or maybe you are already happy with the given answer"}, {"owner": {"reputation": 51, "user_id": 4697032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b63cd3ef08041ece6260e11491f0a115?s=128&d=identicon&r=PG&f=1", "display_name": "Ravikant ", "link": "https://stackoverflow.com/users/4697032/ravikant"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1550062905, "post_id": 54670617, "comment_id": 96131438, "body": "@AlgirdasPreid\u017eius sorry my understanding is incorrect and I am thankful for the answer provided"}], "answers": [{"tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 2, "last_activity_date": 1550062236, "creation_date": 1550062236, "answer_id": 54670639, "question_id": 54670617, "link": "https://stackoverflow.com/questions/54670617/using-structure-as-a-value-in-map-in-c/54670639#54670639", "title": "Using structure as a value in map in C++", "body": "<p>If you declare the type inside the class, it's just like the enum declaration, you are not allocating a new instance. This will only happen when an object is created int he map.</p>\n"}], "owner": {"reputation": 51, "user_id": 4697032, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b63cd3ef08041ece6260e11491f0a115?s=128&d=identicon&r=PG&f=1", "display_name": "Ravikant ", "link": "https://stackoverflow.com/users/4697032/ravikant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 54670639, "answer_count": 1, "score": 0, "last_activity_date": 1550062236, "creation_date": 1550062151, "question_id": 54670617, "link": "https://stackoverflow.com/questions/54670617/using-structure-as-a-value-in-map-in-c", "title": "Using structure as a value in map in C++", "body": "<p>I am working on a legacy code, there is a class A which has an enum member defined like this</p>\n\n<pre><code>class A\n{\nprivate:\n enum E{ kRemove, kDoNotRemove};\n static map&lt;String, MapValue&gt; s_Map; //this map I am trying to add\n}\n</code></pre>\n\n<p>I am trying to add a map in this class which will have structure as a value something like this</p>\n\n<pre><code> struct MapValue{\n      E e; //this enum is defined in private section in the class\n      String T;\n      String F;\n  } ;\n</code></pre>\n\n<p>What I am unable to understand where should I define this struct MapValue?</p>\n\n<p>My understanding:</p>\n\n<ul>\n<li>If I add it inside the class Whenever I will create an object, a\nstruct var will be allocated. This is not useful, as I am using this\nstruct only as the value for the map. Also it is not the case that I\nneed only one copy of this struct as I am using it as a value in the\nmap.</li>\n<li>If I add it outside the class, it will not be a good design as the\nstruct is only inside the class, so it should not be global. Also the\nstruct has enum member which is defined as private in the class, so\nit is not accessible outside the class.</li>\n</ul>\n\n<p>Please suggest.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1550061893, "post_id": 54670509, "comment_id": 96130826, "body": "a <code>std::vector</code> has no <code>row</code>. Please include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and the error message you get"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1550061960, "post_id": 54670509, "comment_id": 96130861, "body": "<code>Board.shipinfo[i].cell.emplace_back(51, 42);</code> ?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1550061961, "post_id": 54670509, "comment_id": 96130863, "body": "You can push a <code>Point</code> instance into the <code>cell</code> vector. Is that what you want to do? What is the actual problem that you try to solve?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1550062066, "post_id": 54670509, "comment_id": 96130921, "body": "OT: unless you have a fixed size grid of 10x10 players represented by a single character I would strongly suggest to choose a more appropriate type (perhaps a <code>std::vector&lt;std::string&gt;&gt;</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 1125, "user_id": 11042630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uj0vR.png?s=128&g=1", "display_name": "skratchi.at", "link": "https://stackoverflow.com/users/11042630/skratchi-at"}, "is_accepted": true, "score": 3, "last_activity_date": 1550081222, "last_edit_date": 1550081222, "creation_date": 1550062727, "answer_id": 54670806, "question_id": 54670509, "link": "https://stackoverflow.com/questions/54670509/how-to-pushback-a-variable-of-a-struct-into-a-vector/54670806#54670806", "title": "How to pushback a variable of a struct into a vector", "body": "<p>Considering your call and structure following could work</p>\n\n<pre><code>Board.shipinginfo[i].cell.emplace_back(1 /*row*/, 2 /*col*/);\n</code></pre>\n\n<p>You tried to <strong>push_back</strong> onto a integer... which can't work. <code>cell</code> is the vector you may try to do so.</p>\n"}], "owner": {"reputation": 31, "user_id": 9621565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b04595abde66586d6edbad216a29e21?s=128&d=identicon&r=PG&f=1", "display_name": "bigboybigbow", "link": "https://stackoverflow.com/users/9621565/bigboybigbow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54670806, "answer_count": 1, "score": 0, "last_activity_date": 1550081222, "creation_date": 1550061836, "last_edit_date": 1550061935, "question_id": 54670509, "link": "https://stackoverflow.com/questions/54670509/how-to-pushback-a-variable-of-a-struct-into-a-vector", "title": "How to pushback a variable of a struct into a vector", "body": "<pre><code>struct Point\n{\n    int row,\n        col;\n};\n\nstruct Ship\n{\n    string name;\n    int size;\n    int hitcount;\n    vector &lt;Point&gt; cell;\n};\n\nstruct PlayerBoard\n{\n    char player[10][10];\n    Ship shipinfo[FLEET_SIZE];  \n};\n</code></pre>\n\n<p>Say I'm trying to do something like this inside a loop, Board is of type PlayerBoard</p>\n\n<pre><code>Board.shipinfo[i].cell.row.push_back(5);\n</code></pre>\n\n<p>it gives me no member named row. How would I go about push backing into the empty vector of cell with the variables row and col?</p>\n"}, {"tags": ["c++", "include"], "comments": [{"owner": {"reputation": 361, "user_id": 10750848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OjwC2GFnC84/AAAAAAAAAAI/AAAAAAAAACs/uuek3B_ubhA/photo.jpg?sz=128", "display_name": "Clebo Sevic", "link": "https://stackoverflow.com/users/10750848/clebo-sevic"}, "reply_to_user": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550061928, "post_id": 54670415, "comment_id": 96130845, "body": "<code>Fastor</code> is the cloned repo, it contains <code>commons&#47;commons.h</code>"}], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 10750848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OjwC2GFnC84/AAAAAAAAAAI/AAAAAAAAACs/uuek3B_ubhA/photo.jpg?sz=128", "display_name": "Clebo Sevic", "link": "https://stackoverflow.com/users/10750848/clebo-sevic"}, "edited": false, "score": 0, "creation_date": 1550062029, "post_id": 54670531, "comment_id": 96130906, "body": "This fixed it, though i have to wait 7 minutes to accept your answer"}], "tags": [], "owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "is_accepted": true, "score": 0, "last_activity_date": 1550061916, "creation_date": 1550061916, "answer_id": 54670531, "question_id": 54670415, "link": "https://stackoverflow.com/questions/54670415/fatal-error-on-include-of-existing-header/54670531#54670531", "title": "Fatal error on include of existing header", "body": "<p>Your compiler command should be:</p>\n\n<pre><code>g++ -std=c++14 -O3 -mavx -DNDEBUG main.cpp -o main -I Fastor\n</code></pre>\n\n<p>And you should just include <code>\"Fastor.h\"</code> rather than <code>\"Fastor/Fastor.h\"</code>.</p>\n"}], "owner": {"reputation": 361, "user_id": 10750848, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OjwC2GFnC84/AAAAAAAAAAI/AAAAAAAAACs/uuek3B_ubhA/photo.jpg?sz=128", "display_name": "Clebo Sevic", "link": "https://stackoverflow.com/users/10750848/clebo-sevic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 54670531, "answer_count": 1, "score": 0, "last_activity_date": 1550061916, "creation_date": 1550061556, "question_id": 54670415, "link": "https://stackoverflow.com/questions/54670415/fatal-error-on-include-of-existing-header", "title": "Fatal error on include of existing header", "body": "<p>When i try to work with the Fastor-Library(<a href=\"https://github.com/romeric/Fastor\" rel=\"nofollow noreferrer\">https://github.com/romeric/Fastor</a>) and i include the library, i get the error, that a folder inside the repo does not exist. Is this an error on my behalf, or should i open an issue with the author of Fastor?</p>\n\n<p>Code:</p>\n\n<pre><code>#include \"Fastor/Fastor.h\"\n\nint main(){\n    Fastor::Tensor&lt;double,2&gt; A;\n    return 0;\n}\n\n</code></pre>\n\n<p>Folder structure:</p>\n\n<pre><code>total 8\ndrwxr-xr-x 15 name name 4096 Feb 13 13:19 Fastor\n-rw-r--r--  1 name name   82 Feb 13 13:20 main.cpp\n\n</code></pre>\n\n<p>Why do i get the following error?</p>\n\n<pre><code>g++ -std=c++14 -O3 -mavx -DNDEBUG main.cpp -o main\nIn file included from Fastor/simd_vector/SIMDVector.h:4:0,\n                 from Fastor/Fastor.h:6,\n                 from main.cpp:1:\nFastor/simd_vector/simd_vector_base.h:4:10: fatal error: commons/commons.h: No such file or directory\n #include \"commons/commons.h\"\n          ^~~~~~~~~~~~~~~~~~~\ncompilation terminated.\n\n</code></pre>\n\n<p>Are you able to reproduce the error, or am i doing something wrong?</p>\n"}, {"tags": ["c++", "text-to-speech", "sapi"], "answers": [{"tags": [], "owner": {"reputation": 288, "user_id": 6379985, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/189723159d03a0cca63875de657f826d?s=128&d=identicon&r=PG&f=1", "display_name": "georges619", "link": "https://stackoverflow.com/users/6379985/georges619"}, "is_accepted": true, "score": 0, "last_activity_date": 1550060564, "creation_date": 1550060564, "answer_id": 54670116, "question_id": 54670115, "link": "https://stackoverflow.com/questions/54670115/implement-microsoft-speech-platform-languages-in-sapi-5/54670116#54670116", "title": "Implement Microsoft Speech Platform languages in SAPI 5", "body": "<p>After many tries and fails, I managed to find an answer to my problem.\nI compiled my program in Win32. So I decided to change it to x64 and I recompiled the solution. I changed the voice ID in my program, and the voices from the Microsoft Speech Platform worked. This means that the MS Speech Platform languages are 64 bit voices and Microsoft Anna is a 32 bit voice.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zpSoP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zpSoP.png\" alt=\"enter image description here\"></a></p>\n\n<p>The following <a href=\"https://stackoverflow.com/questions/35775542/sapi5-voices-using-32bit-voices\">post</a> inspired me.</p>\n"}], "owner": {"reputation": 288, "user_id": 6379985, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/189723159d03a0cca63875de657f826d?s=128&d=identicon&r=PG&f=1", "display_name": "georges619", "link": "https://stackoverflow.com/users/6379985/georges619"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 54670116, "answer_count": 1, "score": 0, "last_activity_date": 1550060564, "creation_date": 1550060564, "question_id": 54670115, "link": "https://stackoverflow.com/questions/54670115/implement-microsoft-speech-platform-languages-in-sapi-5", "title": "Implement Microsoft Speech Platform languages in SAPI 5", "body": "<p>I created a little program in C++ where I use the SAPI library. In my code, I list the number of voices installed on my system. When I compile, I get 11, but there are only 8 installed and the only voice speaking is Microsoft Anna. I checked it in the registry (HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Speech\\Voices).\nI have several languages installed , especially languages from the Microsoft Speech Platform but none can be used.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ofob0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ofob0.png\" alt=\"Installed languages\"></a></p>\n\n<p>Furthermore, when I change the voice ID, I get an unhandled exception error and I think it is because the chosen ID does not exist.</p>\n\n<p>Here is my code</p>\n\n<pre><code>#include \"stdafx.h\"\n\nint main( int argc, char* argv[] )\n{\n\nCComPtr&lt;ISpObjectToken&gt;         cpVoiceToken;\nCComPtr&lt;IEnumSpObjectTokens&gt;    cpEnum;\nISpVoice *                      pVoice = NULL;\nULONG                           count = 0;\nstring                          str;\n\nif( FAILED( ::CoInitialize( NULL ) ) )\nreturn FALSE;\n\nHRESULT hr = CoCreateInstance( CLSID_SpVoice, NULL, CLSCTX_ALL, \nIID_ISpVoice, ( void ** )&amp;pVoice );\n\nif( SUCCEEDED( hr ) )\n{\n   //Enumerate Voices\n   hr = SpEnumTokens( SPCAT_VOICES, NULL /*L\"Gender=Female\"*/, NULL, &amp;cpEnum);\n   printf( \"Success\\n\" );\n}\nelse\n{\n   printf( \"Failed to initialize SAPI\" );\n}\n\nif( SUCCEEDED( hr ) )\n{\n  //Get number of voices\n  hr = cpEnum-&gt;GetCount( &amp;count );\n  printf( \"TTS voices found: %i\\n\", count );\n}\nelse\n{\n   printf( \"Failed to enumerate voices\" );\n   hr = S_OK;\n}\n\nif( SUCCEEDED( hr ) )\n{\n   cpVoiceToken.Release();\n\n   cpEnum-&gt;Item( 3, &amp;cpVoiceToken ); //3 represents the ID of the voice\n\n   pVoice-&gt;SetVoice( cpVoiceToken );\n   hr = pVoice-&gt;Speak( L\"You have selected Microsoft Server Speech Text to Speech Voice (en-GB, Hazel) as the computer's default voice.\", 0, NULL ); //speak sentence\n   pVoice-&gt;Release();\n   pVoice = NULL;\n}\n\n::CoUninitialize();\nsystem( \"PAUSE\" );\n\n}\n</code></pre>\n\n<p>The only voice working is Microsoft Anna, and I don't understand why. If the other languages were not available, the program won't show me that there are so many(11). I wonder if the Microsoft Speech Platform languages are compatible with SAPI.</p>\n"}, {"tags": ["c++", "googletest", "catch2"], "answers": [{"comments": [{"owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "edited": false, "score": 1, "creation_date": 1550061334, "post_id": 54670135, "comment_id": 96130495, "body": "<code>target_link_libraries(tests gtest gtest_main)</code> works fine for my project, thx."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 1, "last_activity_date": 1550060637, "creation_date": 1550060637, "answer_id": 54670135, "question_id": 54670006, "link": "https://stackoverflow.com/questions/54670006/whats-the-gtest-equivalent-of-catch-config-main/54670135#54670135", "title": "What&#39;s the gtest equivalent of CATCH_CONFIG_MAIN?", "body": "<p>According to <a href=\"https://github.com/google/googletest/blob/master/googletest/docs/primer.md\" rel=\"nofollow noreferrer\">their primer</a>:</p>\n\n<blockquote>\n  <p>But maybe you think that writing all those <code>main()</code> functions is too much work? We agree with you completely and that's why Google Test provides a basic implementation of <code>main()</code>. If it fits your needs, then just link your test with <code>gtest_main</code> library and you are good to go.</p>\n</blockquote>\n\n<p>So rather than asking for the library to generate a definition of <code>main</code> through a macro, you link in the <code>gtest_main</code> library which contains one.</p>\n"}], "owner": {"reputation": 4043, "user_id": 6949852, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/uebCh.png?s=128&g=1", "display_name": "\u9673 \u529b", "link": "https://stackoverflow.com/users/6949852/%e9%99%b3-%e5%8a%9b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 54670135, "answer_count": 1, "score": 0, "last_activity_date": 1550060637, "creation_date": 1550060189, "question_id": 54670006, "link": "https://stackoverflow.com/questions/54670006/whats-the-gtest-equivalent-of-catch-config-main", "title": "What&#39;s the gtest equivalent of CATCH_CONFIG_MAIN?", "body": "<pre><code>#define CATCH_CONFIG_MAIN  // This tells Catch to provide a main() - only do this in one cpp file\n</code></pre>\n\n<p>I cannot find alternative of gtest after googling</p>\n"}, {"tags": ["c++", "clion"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1550060810, "post_id": 54669959, "comment_id": 96130175, "body": "It&#39;s been a while since I&#39;ve used CLion, but how about writing a script boiling down to <code>source shellscript.sh ; .&#47;applicationBinary</code> and point CLion at that?"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "edited": false, "score": 1, "creation_date": 1550060903, "post_id": 54669959, "comment_id": 96130228, "body": "<code>source</code> is a bashism. It looks like CLion uses a more POSIX shell, e.g. <code>sh</code>, so use <code>.</code> instead. Or, if CLion doesn\u2019t use a shell at all, you could probably use something like <code>sh -ec &#39;make ; . shellscript.sh ; .&#47;applicationBinary&#39;</code>."}, {"owner": {"reputation": 3155, "user_id": 633001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/34544596b8173682fa9ae7f4fe569ec0?s=128&d=identicon&r=PG", "display_name": "SinisterMJ", "link": "https://stackoverflow.com/users/633001/sinistermj"}, "edited": false, "score": 0, "creation_date": 1550061342, "post_id": 54669959, "comment_id": 96130498, "body": "Still not. &#39;Error running &#39;Activate script&#39;: Cannot run program &quot;sh -ec &#39;make ; ./activate_run.sh; ./applicationBinary&#39;&quot; (in directory &quot;/home/aro/[...]&quot;): error=2, No such file or directory&#39;"}, {"owner": {"reputation": 5296, "user_id": 418066, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38yuw.png?s=128&g=1", "display_name": "Biffen", "link": "https://stackoverflow.com/users/418066/biffen"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1550061535, "post_id": 54669959, "comment_id": 96130614, "body": "@SinisterMJ Looks like it uses the whole thing as the name of a command. @Quentin\u2019s tip above might be the way to go."}, {"owner": {"reputation": 3155, "user_id": 633001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/34544596b8173682fa9ae7f4fe569ec0?s=128&d=identicon&r=PG", "display_name": "SinisterMJ", "link": "https://stackoverflow.com/users/633001/sinistermj"}, "edited": false, "score": 0, "creation_date": 1550061703, "post_id": 54669959, "comment_id": 96130711, "body": "Tried that too, then it doesn&#39;t find the libraries from the exported folders. Neither worked."}], "answers": [{"tags": [], "owner": {"reputation": 511, "user_id": 4575793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a70984fc21cbabf96dc9d338f20635?s=128&d=identicon&r=PG&f=1", "display_name": "Cadoiz", "link": "https://stackoverflow.com/users/4575793/cadoiz"}, "is_accepted": false, "score": 0, "last_activity_date": 1553566306, "creation_date": 1553566306, "answer_id": 55348885, "question_id": 54669959, "link": "https://stackoverflow.com/questions/54669959/clion-with-source-shellscript-sh/55348885#55348885", "title": "CLion with &quot;source shellscript.sh&quot;", "body": "<p>Stumbled upon the same problem but so far, the only solution I found is to use the build-in cli in clion (pun not intendet). There you can use your workflow you are used to.</p>\n\n<p>I'm still looking for a better solution and will keep this updated.</p>\n\n<p>Reference:\n<a href=\"https://www.jetbrains.com/help/clion/working-with-the-ide-features-from-command-line.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/clion/working-with-the-ide-features-from-command-line.html</a></p>\n"}], "owner": {"reputation": 3155, "user_id": 633001, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/34544596b8173682fa9ae7f4fe569ec0?s=128&d=identicon&r=PG", "display_name": "SinisterMJ", "link": "https://stackoverflow.com/users/633001/sinistermj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1553566306, "creation_date": 1550060051, "question_id": 54669959, "link": "https://stackoverflow.com/questions/54669959/clion-with-source-shellscript-sh", "title": "CLion with &quot;source shellscript.sh&quot;", "body": "<p>(Note: I am completely new to CLion)</p>\n\n<p>I have an application which builds fine, but when I run it from the shell, I need to do</p>\n\n<pre><code>make\nsource shellscript.sh\n./applicationBinary\n</code></pre>\n\n<p>for it to run, otherwise libraries and similar won't be found</p>\n\n<p>How do I do the <code>source shellscript.sh</code> within CLion (project from CMakeLists.txt)? I tried with External tools, before launch, but it will say that it cannot find the program \"source\".</p>\n\n<p>The shellscript in question does some export calls, but they are dependent on a different built which is done beforehand, and the paths are not fixed, and instead get written to that script.</p>\n\n<pre><code>DYLD_LIBRARY_PATH=\"...\"\nexport DYLD_LIBRARY_PATH\nLD_LIBRARY_PATH=\"...\"\nexport LD_LIBRARY_PATH\netc.\n</code></pre>\n"}, {"tags": ["android", "c++", "tensorflow", "nnapi"], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 8226148, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KwfR5p-LoCA/AAAAAAAAAAI/AAAAAAAAAXw/CDmsurCrqOQ/photo.jpg?sz=128", "display_name": "dk1111", "link": "https://stackoverflow.com/users/8226148/dk1111"}, "is_accepted": true, "score": 0, "last_activity_date": 1550205397, "creation_date": 1550205397, "answer_id": 54702750, "question_id": 54669724, "link": "https://stackoverflow.com/questions/54669724/adding-batch-to-space-nd-and-space-to-batch-nd-to-tensorflow-lite/54702750#54702750", "title": "Adding BATCH_TO_SPACE_ND and SPACE_TO_BATCH_ND to tensorflow lite", "body": "<p>Found an answer, to do this, you have to spend some time to understand their code architecture, then try to \"translate\" from tftensor to NNAPI:</p>\n\n<p>for example: ANEURALNETWORKS_BATCH_TO_SPACE_ND (NNAPI) requires 2 params (input tensor, block_shape) while TFLite needs 3 args (input tensor, block_shape, crops), so you need to handle it to bypass errors.</p>\n"}, {"comments": [{"owner": {"reputation": 964, "user_id": 5350038, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ohHCz4nwXWk/AAAAAAAAAAI/AAAAAAAAAEk/IR4I5ew5asY/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/5350038/sebastian"}, "edited": false, "score": 0, "creation_date": 1582278574, "post_id": 60335656, "comment_id": 106730084, "body": "This does not answer the original question. If you found the other answer useful, you can vote it up. If you have any suggestions on the answer, you should leave a comment on that."}], "tags": [], "owner": {"reputation": 44, "user_id": 3554935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ced2d3012c8c2b33f89f84fcbc740c4?s=128&d=identicon&r=PG", "display_name": "galarragas", "link": "https://stackoverflow.com/users/3554935/galarragas"}, "is_accepted": false, "score": -1, "last_activity_date": 1582277383, "creation_date": 1582277383, "answer_id": 60335656, "question_id": 54669724, "link": "https://stackoverflow.com/questions/54669724/adding-batch-to-space-nd-and-space-to-batch-nd-to-tensorflow-lite/60335656#60335656", "title": "Adding BATCH_TO_SPACE_ND and SPACE_TO_BATCH_ND to tensorflow lite", "body": "<p>The previous answer is correct. At the time NNAPI doesn't support crops so the code is only delegating operators <a href=\"https://github.com/tensorflow/tensorflow/blob/1a7cdfedc03322837282a274d464427f0bacec4e/tensorflow/lite/delegates/nnapi/nnapi_delegate.cc#L1849\" rel=\"nofollow noreferrer\">with zero crops</a>.</p>\n"}], "owner": {"reputation": 160, "user_id": 8226148, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-KwfR5p-LoCA/AAAAAAAAAAI/AAAAAAAAAXw/CDmsurCrqOQ/photo.jpg?sz=128", "display_name": "dk1111", "link": "https://stackoverflow.com/users/8226148/dk1111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 54702750, "answer_count": 2, "score": 0, "last_activity_date": 1582277383, "creation_date": 1550059288, "question_id": 54669724, "link": "https://stackoverflow.com/questions/54669724/adding-batch-to-space-nd-and-space-to-batch-nd-to-tensorflow-lite", "title": "Adding BATCH_TO_SPACE_ND and SPACE_TO_BATCH_ND to tensorflow lite", "body": "<p>NNAPI 1.1 already supported SPACE_TO_BATCH_ND and BATCH_TO_SPACE_ND ops but the current TFLite code isn't implemented yet. See: <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/nnapi_delegate.cc#L607\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/tensorflow/blob/master/tensorflow/lite/nnapi_delegate.cc#L607</a></p>\n\n<p>I tried to add them like this:</p>\n\n<pre><code>case tflite::BuiltinOperator_SPACE_TO_BATCH_ND:\n   nn_op_type = ANEURALNETWORKS_SPACE_TO_BATCH_ND;\n   break;\ncase tflite::BuiltinOperator_BATCH_TO_SPACE_ND:\n   nn_op_type = ANEURALNETWORKS_BATCH_TO_SPACE_ND;\n   break;\n</code></pre>\n\n<p>but it didn't work and there was an error message when I ran it on an android device: <strong>E/Utils: Invalid number of input operands (3, expected 2) or output operands (1, expected 1) for operation BATCH_TO_SPACE_ND</strong></p>\n\n<p>how can I add these ops to tensorflow lite properly? Thanks!</p>\n"}, {"tags": ["c++", "opengl", "graphics"], "comments": [{"owner": {"reputation": 326, "user_id": 4838299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QBCJl.jpg?s=128&g=1", "display_name": "Neil Gatenby", "link": "https://stackoverflow.com/users/4838299/neil-gatenby"}, "edited": false, "score": 0, "creation_date": 1550059702, "post_id": 54669584, "comment_id": 96129576, "body": "Aren&#39;t you missing a step where you apply the matrix to the vertex locations?  You init the verts fresh every time, but don&#39;t apply your varying matrix"}], "answers": [{"tags": [], "owner": {"reputation": 173, "user_id": 7967140, "user_type": "registered", "profile_image": "https://graph.facebook.com/355662031498132/picture?type=large", "display_name": "M1sterPl0w", "link": "https://stackoverflow.com/users/7967140/m1sterpl0w"}, "is_accepted": false, "score": 0, "last_activity_date": 1550059382, "creation_date": 1550059382, "answer_id": 54669758, "question_id": 54669584, "link": "https://stackoverflow.com/questions/54669584/move-model-in-opengl-by-translate-matrix-instead-of-gltranslate/54669758#54669758", "title": "Move model in OpenGL by translate matrix instead of glTranslate()", "body": "<p>Because in every loop you set the cube to the original position. You should define these objects outside the loop. Then you can mutate them in the while loop.</p>\n\n<p>In openGL lessons at the university I had very much use of a youtube series from \"The Cherno\". He made <a href=\"https://www.youtube.com/watch?v=W3gAzLwfIP0&amp;list=PLlrATfBNZ98foTJPJ_Ev03o2oq3-GGOS2\" rel=\"nofollow noreferrer\">openGL course</a>.  </p>\n"}, {"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1550067265, "creation_date": 1550067265, "answer_id": 54672272, "question_id": 54669584, "link": "https://stackoverflow.com/questions/54669584/move-model-in-opengl-by-translate-matrix-instead-of-gltranslate/54672272#54672272", "title": "Move model in OpenGL by translate matrix instead of glTranslate()", "body": "<p>Note, that drawing by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glBegin.xml\" rel=\"nofollow noreferrer\"><code>glBegin</code>/<code>glEnd</code></a> sequences and the fixed function matrix stack and fixed function. See <a href=\"https://www.khronos.org/opengl/wiki/Fixed_Function_Pipeline\" rel=\"nofollow noreferrer\">Fixed Function Pipeline</a> and <a href=\"https://www.khronos.org/opengl/wiki/Legacy_OpenGL\" rel=\"nofollow noreferrer\">Legacy OpenGL</a>.\nRead about <a href=\"https://www.khronos.org/opengl/wiki/Vertex_Specification\" rel=\"nofollow noreferrer\">Vertex Specification</a> and <a href=\"https://www.khronos.org/opengl/wiki/Shader\" rel=\"nofollow noreferrer\">Shader</a> for a state of the art way of rendering.</p>\n\n<hr>\n\n<p>The projection matrix should be applied to the projection matrix stack and the model view matrix to the model view matrix stack.</p>\n\n<p>There are 2 issues. </p>\n\n<ol>\n<li><p><code>GL_PROJECTION_MATRIX</code> is not a valid enum constant for <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glMatrixMode.xml\" rel=\"nofollow noreferrer\"><code>glMatrixMode</code></a> and will cause a <code>GL_INVALID_ENUM</code> error. The valid enum constant for the projection matrix mode is <code>GL_PROJECTION</code>. <code>GL_PROJECTION_MATRIX</code> would be used for reading the current projection matrix by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/glGet.xml\" rel=\"nofollow noreferrer\"><code>glGetFloatv</code></a>.</p></li>\n<li><p>If you want to apply additional transformation to the model, then you have to choose the <code>GL_MODELVIEW</code> matrix before. If the <code>GL_PROJECTION</code> matrix is \"selected\", this state is kept until it is changed again explicitly.</p></li>\n</ol>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glMatrixMode(GL_MODELVIEW);\nglLoadMatrixf(static_cast&lt;const float*&gt;(glm::value_ptr(modelViewMatrix)));\n\nglMatrixMode(GL_PROJECTION); // &lt;----- `GL_PROJECTION` instead of `GL_PROJECTION_MATRIX`\nglLoadMatrixf(static_cast&lt;const float*&gt;(glm::value_ptr(mProjMatrix)));\n\n// [...]\n\nglMatrixMode(GL_MODELVIEW); // &lt;-------- specify `GL_MODELVIEW`\nglTranslatef(0 /* + offset.x*/, 0/* + offset.y*/, -5); //Setting offset here is work good\n</code></pre>\n"}], "owner": {"reputation": 584, "user_id": 6121268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f445cd88162e1194f4962fd22a073923?s=128&d=identicon&r=PG&f=1", "display_name": "NikBond", "link": "https://stackoverflow.com/users/6121268/nikbond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "accepted_answer_id": 54672272, "answer_count": 2, "score": 2, "last_activity_date": 1550067265, "creation_date": 1550058819, "question_id": 54669584, "link": "https://stackoverflow.com/questions/54669584/move-model-in-opengl-by-translate-matrix-instead-of-gltranslate", "title": "Move model in OpenGL by translate matrix instead of glTranslate()", "body": "<p>My goal is moving object by arrow keys pressing. For this purpose in callback I create translate matrix from some offset and multiply it to world matrix. However it doesn't work - cube doesn't move by pressing keys. I also noticed using glTranslate() directly with setted offset works good but looks like crutch. I mean, I should use only translation matrices for any transformation of model.\nWhere is the problem in my code? How to fix it? Why glTranslate() works good? \nMinimal code example:</p>\n\n<pre><code>\nglm::mat4 mWorldMatrix;\nglm::mat4 mViewMatrix;\nglm::mat4 mProjMatrix;\n\nvoid onKeyCallback(GLFWwindow*, int key, int scan, int action, int mods)\n{\n    switch (key)\n    {\n        case GLFW_KEY_UP:\n        {\n            auto translationMatrix = glm::translate(glm::mat4{}, glm::vec3{ 0, 1, 0 });\n            mWorldMatrix = mWorldMatrix * translationMatrix;\n            break;\n        }\n        case GLFW_KEY_DOWN:\n        {\n            auto translationMatrix = glm::translate(glm::mat4{}, glm::vec3{ 0, -1, 0 });\n            mWorldMatrix = mWorldMatrix * translationMatrix;\n            break;\n        }\n        case GLFW_KEY_LEFT:\n        {\n            auto translationMatrix = glm::translate(glm::mat4{}, glm::vec3{ -1, 0, 0 });\n            mWorldMatrix = mWorldMatrix * translationMatrix;\n            break;\n        }\n        case GLFW_KEY_RIGHT:\n        {\n            auto translationMatrix = glm::translate(glm::mat4{}, glm::vec3{ 1, 0, 0 });\n            mWorldMatrix = mWorldMatrix * translationMatrix;\n            break;\n        }\n    }\n}\n\n\nint main()\n{\n    glfwInit();\n\n    const int weight = 640;\n    const int height = 480;\n    auto mWindow = glfwCreateWindow(weight, height, \"TesT\", nullptr, nullptr);\n    glfwMakeContextCurrent(mWindow);\n\n    glShadeModel(GL_SMOOTH);\n    glEnable(GL_DEPTH_TEST);\n    glDepthFunc(GL_LEQUAL);\n\n    mWorldMatrix = glm::mat4{ 1.0f };\n    mViewMatrix = glm::lookAt(glm::vec3{ 0, 0, -1 },\n                              glm::vec3{ 0, 0, 0 },\n                              glm::vec3{ 0, 1, 0 });\n    mProjMatrix = glm::perspective(glm::radians(45.0f),\n                                   static_cast&lt;float&gt;(weight) / height, \n                                   0.1f, \n                                   100.0f);\n\n    glfwSetKeyCallback(mWindow, onKeyCallback);\n\n    while (!glfwWindowShouldClose(mWindow)) {\n        glClearColor(0.5, 0.5, 0.5, 0);\n        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n        glViewport(0,0, weight, height);\n\n        auto modelViewMatrix = mViewMatrix * mWorldMatrix;\n        glMatrixMode(GL_MODELVIEW);\n        glLoadMatrixf(static_cast&lt;const float*&gt;(glm::value_ptr(modelViewMatrix)));\n\n        glMatrixMode(GL_PROJECTION_MATRIX);\n        glLoadMatrixf(static_cast&lt;const float*&gt;(glm::value_ptr(mProjMatrix)));\n\n        Cube cube{ glm::vec3{0.5, 0.5, 0.5}, 1 }; //cube with center in {0.5} and side length 1\n        auto vertices = cube.soup(); //vector of vertex\n\n        glTranslatef(0 /* + offset.x*/, 0/* + offset.y*/, -5); //Setting offset here is work good\n        glBegin(GL_TRIANGLES);\n        for (const auto&amp; vertex : vertices)\n        {\n            glColor3f(vertex.position.x, vertex.position.y, vertex.position.z);\n            glVertex3f(vertex.position.x, vertex.position.y, vertex.position.z);\n        }\n        glEnd();\n\n        glfwSwapBuffers(mWindow);\n        glfwWaitEvents();\n    }\n\n    glfwTerminate();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550058670, "post_id": 54669485, "comment_id": 96128931, "body": "The &quot;minimum code&quot; is incomplete. What is, for example, <code>_func</code>?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1550058848, "post_id": 54669485, "comment_id": 96129053, "body": "Please post the actual error messages and actual code."}, {"owner": {"reputation": 101, "user_id": 11052561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f96d20a3e2dd59dc776953439b9be08?s=128&d=identicon&r=PG&f=1", "display_name": "Nick M", "link": "https://stackoverflow.com/users/11052561/nick-m"}, "edited": false, "score": 0, "creation_date": 1550059056, "post_id": 54669485, "comment_id": 96129177, "body": "I am sorry for that mistake, I have edited the question to include both actual code and first error I receive"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 11052561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f96d20a3e2dd59dc776953439b9be08?s=128&d=identicon&r=PG&f=1", "display_name": "Nick M", "link": "https://stackoverflow.com/users/11052561/nick-m"}, "edited": false, "score": 0, "creation_date": 1550059641, "post_id": 54669746, "comment_id": 96129542, "body": "The sample you have provided works really well, thank you for that.  I suppose I should always get enough sleep prior to posting questions here as it now seems pretty obvious to me. Thanks a ton!"}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 3, "last_activity_date": 1550059345, "creation_date": 1550059345, "answer_id": 54669746, "question_id": 54669485, "link": "https://stackoverflow.com/questions/54669485/getting-syntax-error-upon-passing-the-member-function-to-template-function/54669746#54669746", "title": "Getting syntax error upon passing the member function to template function", "body": "<p><code>lzuint&lt;T, A...&gt;::helper</code> is a non-static member function. It needs an object to be called on. The object (which becomes the <code>this</code> pointer inside the function) is commonly passed as a hidden first argument, hence the message that function doesn't take one argument.</p>\n\n<p>There are two ways to solve this: Either use lambdas</p>\n\n<pre><code>auto t = make_tuple_seq(std::make_index_sequence&lt;numArgs&gt;{},\n                        [this](size_t i) { return helper(i); });\n</code></pre>\n\n<p>Or use <code>std::bind</code>:</p>\n\n<pre><code>auto t = make_tuple_seq(std::make_index_sequence&lt;numArgs&gt;{},\n                        std::bind(&amp;lzuint&lt;T, A...&gt;::helper, this, std::placeholders::_1));\n</code></pre>\n\n<p>Using lambdas is usually the recommended solution.</p>\n"}], "owner": {"reputation": 101, "user_id": 11052561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f96d20a3e2dd59dc776953439b9be08?s=128&d=identicon&r=PG&f=1", "display_name": "Nick M", "link": "https://stackoverflow.com/users/11052561/nick-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54669746, "answer_count": 1, "score": -2, "last_activity_date": 1550059368, "creation_date": 1550058528, "last_edit_date": 1550059368, "question_id": 54669485, "link": "https://stackoverflow.com/questions/54669485/getting-syntax-error-upon-passing-the-member-function-to-template-function", "title": "Getting syntax error upon passing the member function to template function", "body": "<p>To start with, I use C++ 17 standard.</p>\n\n<p>The code I am having issues with works fine unless I attempt to use it in a class with the same template function.</p>\n\n<p>The following line of code:</p>\n\n<pre><code>    auto t = make_tuple_seq(std::make_index_sequence&lt;numArgs&gt;{}, &amp;lzuint&lt;T, A...&gt;::helper);\n</code></pre>\n\n<p>causes like 10 compilation errors along the lines of \"t could not be initialized\" which I frankly cannot see reason for.</p>\n\n<p>My previous attempt has been with the lambda function instead of helper member function which resulted in unreadable errors too.</p>\n\n<p>Here I provide the minimum code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;functional&gt;\n#include &lt;string&gt;\n#include &lt;tuple&gt;\ntemplate&lt;typename _func, size_t... I&gt;\nauto make_tuple_seq(std::index_sequence&lt;I...&gt;, _func&amp;&amp; func)\n{\n    return std::make_tuple(func(I)...);\n}\nconstexpr const auto numArgs = 2;\ntemplate&lt;typename T, typename... A&gt;\nclass lzuint\n{\nprotected:\n    size_t helper(size_t i)\n    {\n        return this-&gt;body.size() - numArgs + i;\n    }\npublic:\n    lzuint(const std::function&lt;T(A...)&gt;&amp; func, A... args) : f(func), body({ args... }) {}\n\n    const uint32_t&amp; operator[](size_t index)\n    {\n        auto t = make_tuple_seq(std::make_index_sequence&lt;numArgs&gt;{}, &amp;lzuint&lt;T, A...&gt;::helper);\n        while (body.size() - 1 &lt; index)\n            body.push_back(std::apply(f, std::move(t)));\n        return body[index];\n    }\nprivate:\n    std::vector&lt;T&gt; body;\n    std::function&lt;T(A...)&gt; f;\n};\nusing ullong = unsigned long long;\nint main()\n{\n    auto tup = make_tuple_seq(std::make_index_sequence&lt;N&gt;{}, [&amp;v](size_t i) {return v[i]; });//Note:this one works just fine\n    lzuint&lt;uint32_t, uint32_t, uint32_t&gt; lzu([](uint32_t i, uint32_t j) { return i + j; }, 1, 1);\n    lzu[1];\n    lzu[10];\n    lzu[11];\n    lzu[12];\n    lzu[13];\n    return 0;\n}\n</code></pre>\n\n<p>Any help will be greatly appreciated as I am currently trying to get my head around the variadic templates by creating smth like simulation of the \"lazy evaluation\" technique.</p>\n\n<p>The first error I get is </p>\n\n<pre><code>source.cpp(19): error C2064: term does not evaluate to a function taking 1 arguments\n</code></pre>\n"}, {"tags": ["c++", "lambda", "lifetime"], "comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 3, "creation_date": 1550058535, "post_id": 54669408, "comment_id": 96128857, "body": "There is <a href=\"https://en.cppreference.com/w/cpp/memory/enable_shared_from_this/weak_from_this\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/enable_shared_from_this/&hellip;</a> but it requires a <code>shared_ptr</code>."}, {"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 5, "creation_date": 1550058688, "post_id": 54669408, "comment_id": 96128946, "body": "C++ is not a managed language, so <code>this</code> will always be <code>this</code>, and it will never suddenly change, unexpectedly, and become anything but <code>this</code>. <code>this</code> is forever. If something else deletes <code>this</code>, then your <code>this</code> will still be the same <code>this</code>, but using <code>this</code> becomes undefined behavior. <code>this</code> is not fair, but <code>this</code> is C++. Therefore, the only options to explore here will involve, by necessity, smart pointers."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 2, "creation_date": 1550063117, "post_id": 54669408, "comment_id": 96131573, "body": "C++ tends to favor &quot;you don&#39;t pay for it unless you opt-in for the facility (and overhead)&quot;.  The <code>std::shared_ptr</code> and <code>std::enable_shared_from_this</code> (linked by Sombrero Chicken) is the facility (and overhead) you are looking for.  From an architectural standpoint, I do not like my objects to be self-aware they are owned by a <code>shared_ptr</code>.  But if I really need them to be, I&#39;d use it."}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1550118391, "post_id": 54669408, "comment_id": 96155031, "body": "Can you alter the <b>class</b> (however its instances are managed) to support this usage?"}], "owner": {"reputation": 2462, "user_id": 674548, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1b37edc3e30503536841845e969aac40?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/674548/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1550058324, "creation_date": 1550058324, "question_id": 54669408, "link": "https://stackoverflow.com/questions/54669408/swifts-weak-self-alternative-for-c", "title": "Swift&#39;s [weak self] alternative for C++", "body": "<p>In Swift programming language it is common to pass <code>self</code> by weak reference into the closure, e.g:</p>\n\n<pre><code>self.someAsyncFunction(param1, param2, { [weak self] in\n    self?.doSomething()\n})\n</code></pre>\n\n<p>Very handy thing to my mind.</p>\n\n<p>Is there any similar in C++? For instance:</p>\n\n<pre><code>this-&gt;someAsyncFunction(param1, param2, [this](){\n    this-&gt;doSomething();\n});\n</code></pre>\n\n<p>Instance of caller (or <code>this</code>) may have been deleted at the moment when lambda is executed. As a result, it crashes on <code>this-&gt;doSomething()</code>.\nIn other words, I want to have something like this:</p>\n\n<pre><code>this-&gt;someAsyncFunction(param1, param2, [weak this](){\n    if (this)\n        this-&gt;doSomething();\n});\n</code></pre>\n\n<p>which is not valid C++ code of course.</p>\n\n<p>Is there any good practice on handling such issue?</p>\n\n<p>Ideally, solution must handle all possible sutuations such as</p>\n\n<ul>\n<li><code>this</code> is created by <code>new</code> and deleted with <code>delete</code>.</li>\n<li><code>this</code>'s lifetime is controlled by <code>std::shared_ptr</code>.</li>\n<li><code>this</code>'s lifetime is controlled by <code>boost::intrusive_ptr</code>.</li>\n</ul>\n"}, {"tags": ["c++", "audio", "gstreamer", "pipeline", "resampling"], "comments": [{"owner": {"reputation": 1595, "user_id": 1119161, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/4941b50fab94bddbe63b102f2c79d2da?s=128&d=identicon&r=PG", "display_name": "dsp_user", "link": "https://stackoverflow.com/users/1119161/dsp-user"}, "edited": false, "score": 0, "creation_date": 1550064659, "post_id": 54669358, "comment_id": 96132575, "body": "Resampling from <code>44100</code> to <code>8000</code> Hz will result in <code>44100&#47;8000</code> times fewer samples (rounded to an integer) but you first need to pass your signal (or parts of it) through a low pass filter to remove the high frequency component (otherwise you&#39;ll get aliasing)"}], "answers": [{"tags": [], "owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "is_accepted": true, "score": 2, "last_activity_date": 1550076867, "creation_date": 1550076867, "answer_id": 54675537, "question_id": 54669358, "link": "https://stackoverflow.com/questions/54669358/resample-and-depayload-audio-rtp-using-gstreamer/54675537#54675537", "title": "Resample and depayload audio rtp using gstreamer", "body": "<p>First, you have some weird caps in your pipeline - width and height are for video here. They probably will be just ignored.. but still.. not sure on others there as well but meh..</p>\n\n<p>For the actual question. Just use <code>audioresample</code> and <code>audioconvert</code> elements of Gstreamer to transfer in your desired format.</p>\n\n<p>E.g.</p>\n\n<pre><code>[..] ! rtpL16depay ! audioresample ! audioconvert ! \\\naudio/x-raw, rate=8000, format=S16LE ! filesink location=Tornado.raw\n</code></pre>\n"}], "owner": {"reputation": 790, "user_id": 10862144, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPt16.png?s=128&g=1", "display_name": "RC0993", "link": "https://stackoverflow.com/users/10862144/rc0993"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 564, "favorite_count": 0, "accepted_answer_id": 54675537, "answer_count": 1, "score": 1, "last_activity_date": 1550076867, "creation_date": 1550058199, "question_id": 54669358, "link": "https://stackoverflow.com/questions/54669358/resample-and-depayload-audio-rtp-using-gstreamer", "title": "Resample and depayload audio rtp using gstreamer", "body": "<p>I am developing an application where I am using a <strong><em>wave file</em></strong> from a location at one end of a pipeline and <strong><em>udpsink</em></strong> at the other end of it.</p>\n\n<pre><code>gst-launch-1.0 filesrc location=/path/to/wave/file/Tornado.wav ! wavparse ! audioconvert ! audio/x-raw,channels=1,depth=16,width=16,rate=44100 ! rtpL16pay  ! udpsink host=xxx.xxx.xxx.xxx port=5000\n</code></pre>\n\n<p>The Above wave file is having sampling rate = 44100 Hz and single-channel(mono)</p>\n\n<p>On the same PC I am using a <code>c++</code> program application to <strong>catch these packets</strong> and <strong>depayload</strong> to a headerless audio file <em>(say Tornado.raw)</em></p>\n\n<p>The pipeline I am creating for this is basically </p>\n\n<pre><code>gst-launch-1.0 udpsrc port=5000 ! \"application/x-rtp,media=(string)audio, clock-rate=(int)44100, width=16, height=16, encoding-name=(string)L16, encoding-params=(string)1, channels=(int)1, channel-positions=(int)1, payload=(int)96\" ! rtpL16depay ! filesink location=Tornado.raw\n</code></pre>\n\n<p>Now This works fine. I get the headerless data and when I play it using the Audacity It plays great!</p>\n\n<p>I am trying to resample this audio file while it is in pipeline from 44100 Hz to 8000 Hz</p>\n\n<p>Simply changing the <code>clock-rate=(int)44100</code> to <code>clock-rate=(int)8000</code> is not helping (also absurd logically)\nI am looking for how to get the headerless file at the pipeline output  with 8000 Hz sampling.</p>\n\n<p>Also the data that I am getting now is Big-endian, but I want Little-endian as output. how do I set that in the pipeline?</p>\n\n<p>You might relate this to one of <a href=\"https://stackoverflow.com/questions/54664381/difference-between-sampling-rate-bit-rate-and-bit-depth\">my earlier question</a>.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 3, "last_activity_date": 1550058198, "creation_date": 1550058198, "answer_id": 54669357, "question_id": 54669322, "link": "https://stackoverflow.com/questions/54669322/use-sfinae-to-enable-method-if-tuple-is-large-enough/54669357#54669357", "title": "Use SFINAE to enable method if tuple is large enough", "body": "<p>The \"S\" in SFINAE stands for \"substitution\". Therefore you need to ensure that your check happens during substitution time. You can do this by introducing an extra template parameter defaulted to <code>value_type</code>:</p>\n\n<pre><code>template&lt;typename U = value_type, typename T = typename std::tuple_element&lt;0, U&gt;::type&gt;\nT &amp;x() {\n    return std::get&lt;0&gt;(data);\n}\n\ntemplate&lt;typename U = value_type, typename T = typename std::tuple_element&lt;1, U&gt;::type&gt;\nT &amp;y() {\n    return std::get&lt;1&gt;(data);\n}\n</code></pre>\n\n<p><a href=\"https://gcc.godbolt.org/z/xNnygI\" rel=\"nofollow noreferrer\"><strong>live example on godbolt.org</strong></a></p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1550059012, "creation_date": 1550059012, "answer_id": 54669657, "question_id": 54669322, "link": "https://stackoverflow.com/questions/54669322/use-sfinae-to-enable-method-if-tuple-is-large-enough/54669657#54669657", "title": "Use SFINAE to enable method if tuple is large enough", "body": "<p>In C++20, you might \"discard\" method thanks to <code>requires</code>:</p>\n\n<pre><code>template &lt;typename ... Args&gt;\nstruct Point {\n\n    std::tuple&lt;Args...&gt; data;\n\n    decltype(auto) x() requires (sizeof...(Args) &gt; 0) { return std::get&lt;0&gt;(data); }\n    decltype(auto) y() requires (sizeof...(Args) &gt; 1) { return std::get&lt;1&gt;(data); }\n};\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/37566223ce896a82\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 5586, "user_id": 3309610, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4329755c47f01a17242610d2fac65859?s=128&d=identicon&r=PG", "display_name": "bremen_matt", "link": "https://stackoverflow.com/users/3309610/bremen-matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 54669357, "answer_count": 2, "score": 1, "last_activity_date": 1550059012, "creation_date": 1550058079, "last_edit_date": 1550058216, "question_id": 54669322, "link": "https://stackoverflow.com/questions/54669322/use-sfinae-to-enable-method-if-tuple-is-large-enough", "title": "Use SFINAE to enable method if tuple is large enough", "body": "<p>I have a class that holds a tuple: </p>\n\n<pre><code>template &lt;typename ... Args&gt;\nstruct Point {\n    std::tuple&lt;Args...&gt; data;\n    ... \n};\n</code></pre>\n\n<p>Internally, I want some methods that create views of the data. For instance, when the data has 1 or more dimension, then it is nice to have methods called <code>x</code> and <code>y</code> which pull off the first and second elements:</p>\n\n<pre><code>template &lt;typename ... Args&gt;\nstruct Point {\n\n    std::tuple&lt;Args...&gt; data;\n\n    using value_type = decltype(data);\n\n    template&lt;typename T = typename std::tuple_element&lt;0, value_type&gt;::type&gt;\n    T &amp;x() {\n        return std::get&lt;0&gt;(data);\n    }\n\n    template&lt;typename T = typename std::tuple_element&lt;1, value_type&gt;::type&gt;\n    T &amp;y() {\n        return std::get&lt;1&gt;(data);\n    }\n};\n</code></pre>\n\n<p>The issue is the tuple size. I can't figure out how I would use SFINAE to not provide this method when the tuple size is less than than the accessor. For instance, the above class works beautifully if you create Points with more than 1 dimension (e.g. <code>Point&lt;float,int&gt;</code>). However, the code will not compile if you try to create a <code>Point&lt;float&gt;</code>. Specifically, with GCC 8.2, I am getting the compiler error:</p>\n\n<pre><code>no type named 'type' in 'struct std::tuple_element&lt;1, std::tuple&lt;float&gt; &gt;'\n</code></pre>\n\n<p>I also tried idioms like this:</p>\n\n<pre><code>auto y() -&gt; typename std::tuple_element&lt;1, value_type&gt;::type {\n    return std::get&lt;1&gt;(data);\n}\n</code></pre>\n\n<p>but I get the same compiler error. </p>\n"}, {"tags": ["c++", "oop", "architecture"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1550058224, "post_id": 54669296, "comment_id": 96128688, "body": "If you don&#39;t have the <code>enableScaling</code> variable, the multiplication must <i>always</i> be done. And even when <code>scaleFactor</code> is equal to <code>1.0</code> the compiler can&#39;t know it and therefore can&#39;t optimize it. Checking a boolean variable will almost always be more efficient than whatever operation you want to enable/disable. Not to mention that the optional processing won&#39;t always such a simple thing, so there might not be any possible default value that could be used."}, {"owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1550072487, "post_id": 54669296, "comment_id": 96137675, "body": "Maybe more on-topic in <a href=\"https://softwareengineering.stackexchange.com/\">Software Engineer SE</a>."}, {"owner": {"reputation": 2499, "user_id": 5208760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L6VNv.jpg?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/5208760/mateusz"}, "reply_to_user": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "edited": false, "score": 0, "creation_date": 1550083648, "post_id": 54669296, "comment_id": 96143855, "body": "Yea, @FranklinYu, wasn&#39;t sure though"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 1, "last_activity_date": 1550058225, "creation_date": 1550058225, "answer_id": 54669370, "question_id": 54669296, "link": "https://stackoverflow.com/questions/54669296/enabling-usage-of-feature-with-boolean-variable-and-value/54669370#54669370", "title": "Enabling usage of feature with boolean variable and value", "body": "<p>You can collapse <code>enableScaling</code> and <code>scaleFactor</code> to <code>std::optional&lt;scaleFactor&gt;</code>.</p>\n\n<p>This is the C++17 way.</p>\n\n<p>Prior to that, <code>boost::optional</code> was a choice.</p>\n\n<p>In your specific case, defaulting <code>scaleFactor</code> to <code>1.0f</code> is an option, since multiplying a <code>float</code> by <code>1.0f</code> must preserve the original <code>float</code> by the IEEE754 standard (assuming your platform conforms to that).</p>\n"}, {"tags": [], "owner": {"reputation": 33577, "user_id": 9593596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JdCIQ.jpg?s=128&g=1", "display_name": "lubgr", "link": "https://stackoverflow.com/users/9593596/lubgr"}, "is_accepted": false, "score": 1, "last_activity_date": 1550058272, "creation_date": 1550058272, "answer_id": 54669382, "question_id": 54669296, "link": "https://stackoverflow.com/questions/54669296/enabling-usage-of-feature-with-boolean-variable-and-value/54669382#54669382", "title": "Enabling usage of feature with boolean variable and value", "body": "<blockquote>\n  <p>What is your approach for such situations in general?</p>\n</blockquote>\n\n<p>That can't be answered once and for all, it depends on the circumstances, possible other options that enable changing the behavior of your class etc. (as you already said, an integral value <code>-1</code> might make sense to indicate a special case, if the valid range is positive or non-negative).</p>\n\n<p>However, you describe a common scenario that can be handled in a uniform way, i.e., you have a certain value that <em>can</em> change the behavior of your class, but only if it's set/present. In this case, use a <a href=\"https://en.cppreference.com/w/cpp/utility/optional\" rel=\"nofollow noreferrer\"><code>std::optional</code></a> (or, if you can't use C++17, <a href=\"https://www.boost.org/doc/libs/1_69_0/libs/optional/doc/html/index.html\" rel=\"nofollow noreferrer\">boost::optional</a>) data member storing the value in question (or not). It adds a null state to your data member, expressing exactly what you were trying to achieve: if the value is there, use it, otherwise, don't. This is more expressive, because it documents your intention instead of relying on a particular value.</p>\n"}], "owner": {"reputation": 2499, "user_id": 5208760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L6VNv.jpg?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/5208760/mateusz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 54669370, "answer_count": 2, "score": 0, "last_activity_date": 1550058272, "creation_date": 1550057970, "last_edit_date": 1550058083, "question_id": 54669296, "link": "https://stackoverflow.com/questions/54669296/enabling-usage-of-feature-with-boolean-variable-and-value", "title": "Enabling usage of feature with boolean variable and value", "body": "<p>Sometimes in a class which implements sort of algorithm, I would like user to be able to enable or disable certain feature, let's say scaling of some input values. Sometimes I see following code for that (with bool/float values set in constructor):</p>\n\n<pre><code>class A\n{\nprivate:\n  bool enableScaling;\n  float scaleFactor;\n\npublic:\n  float foo(float x) const {\n    ...\n\n    if(enableScaling) {\n      x *= scaleFactor;\n    }\n\n    ...\n  }\n};\n</code></pre>\n\n<p>Two variables for this purpose is not clear for me and I'm looking for advices for such situations.</p>\n\n<p>In case of scale, I can omit boolean variable at all and set default <code>scaleFactor = 1.0f</code> (neutral) and I guess it would be okay for me. Sometimes \"feature parameter value\" can only be positive, so I might set its default value to -1 to show that this one is disabled, but sometimes it is not the case as well (all values allowed).</p>\n\n<p>What is your approach for such situations in general?</p>\n"}, {"tags": ["c++", "templates", "code-reuse"], "comments": [{"owner": {"reputation": 2499, "user_id": 5208760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/L6VNv.jpg?s=128&g=1", "display_name": "Mateusz", "link": "https://stackoverflow.com/users/5208760/mateusz"}, "edited": false, "score": 0, "creation_date": 1550065457, "post_id": 54669190, "comment_id": 96133073, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17649136/function-which-is-able-to-return-different-types\">function which is able to return different types?</a>"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1550067128, "post_id": 54669190, "comment_id": 96134138, "body": "A function template sounds fine here."}], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 5921729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TDCwK.jpg?s=128&g=1", "display_name": "hare1039", "link": "https://stackoverflow.com/users/5921729/hare1039"}, "is_accepted": false, "score": 0, "last_activity_date": 1550067165, "creation_date": 1550067165, "answer_id": 54672237, "question_id": 54669190, "link": "https://stackoverflow.com/questions/54669190/exactly-same-function-but-data-struture-returned-would-be-different/54672237#54672237", "title": "Exactly same function but data struture returned would be different", "body": "<p>I think function templates fits good for this situation</p>\n\n<p>e.g.</p>\n\n<pre><code>// Example program\n#include &lt;iostream&gt;\n#include &lt;queue&gt;\n\n// Create a different type of queue\ntemplate &lt;typename T&gt;\nstruct another_queue : std::queue&lt;T&gt; {};\n\n// Your function foo\ntemplate&lt;typename T&gt;\nT foo()\n{\n    T q;\n    for (auto v : {1, 2, 3, 4}) \n        q.push(v);\n    return q;\n}\n\nint main()\n{\n    auto a = foo&lt; std::queue&lt;int&gt; &gt;();\n    while (not a.empty())\n    {\n        std::cout &lt;&lt; a.front() &lt;&lt; \"\\n\";\n        a.pop();\n    }\n\n    auto b = foo&lt; another_queue&lt;int&gt; &gt;();\n    while (not b.empty())\n    {\n        std::cout &lt;&lt; b.front() &lt;&lt; \"\\n\";\n        b.pop();\n    }\n}\n\n</code></pre>\n"}], "owner": {"reputation": 668, "user_id": 7553068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/14d15a8d504433d2ad0a46e8eb9de71b?s=128&d=identicon&r=PG&f=1", "display_name": "northerner", "link": "https://stackoverflow.com/users/7553068/northerner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550067165, "creation_date": 1550057578, "question_id": 54669190, "link": "https://stackoverflow.com/questions/54669190/exactly-same-function-but-data-struture-returned-would-be-different", "title": "Exactly same function but data struture returned would be different", "body": "<p>I have a function <code>foo()</code>. I want it to either return a <code>std::queue</code> or a thread safe queue object. What's the best way of doing this? I considered templates but not sure they fit the situation. I could copy and paste the entire body of <code>foo()</code> where one would be <code>std::queue foo1()</code> and the other would be <code>MyQueue foo2()</code> and just change the type of the data structure. But that would be ugly.</p>\n"}, {"tags": ["c++", "c++11", "gcc", "htonl"], "answers": [{"tags": [], "owner": {"reputation": 10759, "user_id": 343443, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2dcf7b64ff07a02fbd78c27f50ce9631?s=128&d=identicon&r=PG", "display_name": "Abyx", "link": "https://stackoverflow.com/users/343443/abyx"}, "is_accepted": true, "score": 6, "last_activity_date": 1550056747, "creation_date": 1550056747, "answer_id": 54668953, "question_id": 54668890, "link": "https://stackoverflow.com/questions/54668890/macro-htonl-interpretes-inner-commas-as-parameter-separator/54668953#54668953", "title": "Macro htonl interpretes inner commas as parameter separator", "body": "<p>Add another pair of braces:</p>\n\n<p><code>htonl((hash::CompileTime&lt;'A', 'S', 't', 'r', 'i', 'n', 'g'&gt;::hash))</code></p>\n"}, {"tags": [], "owner": {"reputation": 469, "user_id": 4824854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SPhK8fI7Ih8/AAAAAAAAAAI/AAAAAAAACnc/0BBhoF9bSXg/photo.jpg?sz=128", "display_name": "Sandburg", "link": "https://stackoverflow.com/users/4824854/sandburg"}, "is_accepted": false, "score": 1, "last_activity_date": 1550056787, "creation_date": 1550056787, "answer_id": 54668971, "question_id": 54668890, "link": "https://stackoverflow.com/questions/54668890/macro-htonl-interpretes-inner-commas-as-parameter-separator/54668971#54668971", "title": "Macro htonl interpretes inner commas as parameter separator", "body": "<p>One solution is to help the macro with additional parenthesis:</p>\n\n<pre><code>const unsigned int h = htonl((hash::CompileTime&lt;'A', 'S', 't', 'r', 'i', 'n', 'g'&gt;::hash));\n</code></pre>\n\n<p>To explain why... this post will help\n<a href=\"https://stackoverflow.com/questions/13842468/comma-in-c-c-macro\">Comma in C/C++ macro</a></p>\n\n<p>It's a question of comma interpretation inside macros.</p>\n"}], "owner": {"reputation": 469, "user_id": 4824854, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SPhK8fI7Ih8/AAAAAAAAAAI/AAAAAAAACnc/0BBhoF9bSXg/photo.jpg?sz=128", "display_name": "Sandburg", "link": "https://stackoverflow.com/users/4824854/sandburg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "closed_date": 1550056850, "accepted_answer_id": 54668953, "answer_count": 2, "score": 2, "last_activity_date": 1550056806, "creation_date": 1550056580, "last_edit_date": 1550056806, "question_id": 54668890, "link": "https://stackoverflow.com/questions/54668890/macro-htonl-interpretes-inner-commas-as-parameter-separator", "closed_reason": "Duplicate", "title": "Macro htonl interpretes inner commas as parameter separator", "body": "<p>This is a unusual error returned at compile time, only with some compiler parameters.</p>\n\n<p>OK with <code>g++ -std=c++11 -m64 -O3 -DNDEBUG</code></p>\n\n<p>But with <code>g++ -std=c++11 -m64 -Wall -g</code>, this problem occurs:</p>\n\n<blockquote>\n  <p>macro \"htonl\" passed 7 arguments, but takes just 1</p>\n</blockquote>\n\n<p>Code:</p>\n\n<pre><code>const unsigned int h = htonl(hash::CompileTime&lt;'A', 'S', 't', 'r', 'i', 'n', 'g'&gt;::hash);\n</code></pre>\n\n<p>I'm not sure if the problem comes from the call of <code>htonl</code>or if it comes from my templated hasher.</p>\n\n<p>Do you know how to solve that? </p>\n\n<p>Other infos:</p>\n\n<pre><code>template&lt;const char C0,         const char C1 =  '\\0', const char C2 =  '\\0', \n         const char C3  = '\\0', const char C4 =  '\\0', const char C5 =  '\\0', \n         const char C6  = '\\0', const char C7 =  '\\0', const char C8 =  '\\0', \n         const char C9  = '\\0', const char C10 = '\\0'&gt;\nstruct CompileTime\n{\n    //Do you think this code could help?\n};\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2017", "c++17"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 1, "creation_date": 1550056765, "post_id": 54668866, "comment_id": 96127852, "body": "Did you enable c++17 for your project?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550056771, "post_id": 54668866, "comment_id": 96127857, "body": "Have you selected the compiler option that enables C++17?"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550056873, "post_id": 54668866, "comment_id": 96127913, "body": "The question you linked even says to check the compiler settings. If that&#39;s the issue then this is going to get deleted as well."}, {"owner": {"reputation": 1639, "user_id": 2623411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4K5cB.jpg?s=128&g=1", "display_name": "MikeS159", "link": "https://stackoverflow.com/users/2623411/mikes159"}, "reply_to_user": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550057105, "post_id": 54668866, "comment_id": 96128044, "body": "@john - woops, that&#39;s what it was..."}], "answers": [{"tags": [], "owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "is_accepted": true, "score": 7, "last_activity_date": 1556608794, "last_edit_date": 1556608794, "creation_date": 1550057107, "answer_id": 54669055, "question_id": 54668866, "link": "https://stackoverflow.com/questions/54668866/visual-studio-2017-cant-find-stdvariant/54669055#54669055", "title": "Visual Studio 2017 can&#39;t find std::variant", "body": "<p>Project \u2192 Properties \u2192 C/C++ \u2192 Command Line <code>/std:c++latest</code> </p>\n\n<p>Then click <kbd>Apply</kbd> and <kbd>OK</kbd>.</p>\n"}, {"tags": [], "owner": {"reputation": 5093, "user_id": 6039995, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QuCId.png?s=128&g=1", "display_name": "Stack Danny", "link": "https://stackoverflow.com/users/6039995/stack-danny"}, "is_accepted": false, "score": 8, "last_activity_date": 1550058572, "creation_date": 1550058572, "answer_id": 54669500, "question_id": 54668866, "link": "https://stackoverflow.com/questions/54668866/visual-studio-2017-cant-find-stdvariant/54669500#54669500", "title": "Visual Studio 2017 can&#39;t find std::variant", "body": "<p>You can also go\n<code>Project</code> > <code>Properties</code> > <code>C/C++</code> > <code>Language</code></p>\n\n<p>and set <code>C++ Language Standard</code> to <code>ISO C++17 Standard (/std:c++17)</code></p>\n\n<p>make sure to be on <code>All Configurations</code> and <code>All Platforms</code>\n<a href=\"https://i.stack.imgur.com/hs6MB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/hs6MB.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1639, "user_id": 2623411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4K5cB.jpg?s=128&g=1", "display_name": "MikeS159", "link": "https://stackoverflow.com/users/2623411/mikes159"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4541, "favorite_count": 3, "accepted_answer_id": 54669055, "answer_count": 2, "score": 8, "last_activity_date": 1556608794, "creation_date": 1550056506, "question_id": 54668866, "link": "https://stackoverflow.com/questions/54668866/visual-studio-2017-cant-find-stdvariant", "title": "Visual Studio 2017 can&#39;t find std::variant", "body": "<p>I am using Visual Studio 2017 - 15.9.7 for C++ development, and it looks like I have the necessary modules installed.</p>\n\n<p><a href=\"https://i.stack.imgur.com/1wnC7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/1wnC7.png\" alt=\"Installed VC++ modules\"></a></p>\n\n<p>But the code below gives the error - \"namespace \"std\" has no member \"variant\"\"</p>\n\n<p><code>std::variant</code> is supported in C++17 and looks like it was introduced to <a href=\"https://docs.microsoft.com/en-us/cpp/visual-cpp-language-conformance?view=vs-2017\" rel=\"noreferrer\">Visual Studio in 15.0</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;variant&gt;\nint main()\n{\n    std::variant&lt;int, double, std::string&gt; value;\n}\n</code></pre>\n\n<p>It looks like someone asked the same thing before, but the <a href=\"https://stackoverflow.com/questions/54047180/vs2017-returns-error-namespace-std-has-no-member-variant\">question</a> appears to have been deleted. </p>\n"}, {"tags": ["c++", "visual-studio-code", "mingw"], "comments": [{"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 1, "creation_date": 1550054530, "post_id": 54668120, "comment_id": 96126468, "body": "Sounds like you have your toolchain set up incorrectly."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1550054538, "post_id": 54668120, "comment_id": 96126472, "body": "That is very perplexing. The code certainly isn&#39;t at fault, and that you can print other kinds of data is puzzling. I second @PasserBy with &quot;something about your environment is not sane&quot; (MinGW would be my guess) but this is hard to debug from the information here."}, {"owner": {"reputation": 350, "user_id": 4103522, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4466df5ab305708c2cf8f9a4a55c1d8?s=128&d=identicon&r=PG", "display_name": "Leifb", "link": "https://stackoverflow.com/users/4103522/leifb"}, "edited": false, "score": 0, "creation_date": 1550055001, "post_id": 54668120, "comment_id": 96126778, "body": "When I compile manually using <code>g++ -g .\\src\\HelloWorld.cpp -std=c++11 -o HelloWorld.exe</code>, the program does not output anything as well. So something is wrong with minGW?"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 2, "creation_date": 1550055778, "post_id": 54668120, "comment_id": 96127277, "body": "With correctly installed environment and toolchain it should work. <a href=\"http://coliru.stacked-crooked.com/a/b778035a34351c18\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/b778035a34351c18</a> So we can&#39;t know what is wrong with yours."}, {"owner": {"reputation": 401, "user_id": 7926640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15aaf0885ac6a86de3d42c23139abdb2?s=128&d=identicon&r=PG&f=1", "display_name": "stensal", "link": "https://stackoverflow.com/users/7926640/stensal"}, "edited": false, "score": 0, "creation_date": 1550057943, "post_id": 54668120, "comment_id": 96128529, "body": "Yep, it works with the right compiler: <a href=\"https://segfault.stensal.com/a/6lHycz1xUH6kaDHV\" rel=\"nofollow noreferrer\">segfault.stensal.com/a/6lHycz1xUH6kaDHV</a>"}], "answers": [{"tags": [], "owner": {"reputation": 350, "user_id": 4103522, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4466df5ab305708c2cf8f9a4a55c1d8?s=128&d=identicon&r=PG", "display_name": "Leifb", "link": "https://stackoverflow.com/users/4103522/leifb"}, "is_accepted": false, "score": 0, "last_activity_date": 1550056867, "last_edit_date": 1550056867, "creation_date": 1550056453, "answer_id": 54668849, "question_id": 54668120, "link": "https://stackoverflow.com/questions/54668120/printing-a-double-to-stdcout-results-in-segmentation-fault-c/54668849#54668849", "title": "Printing a double to std::cout results in Segmentation fault (C++)", "body": "<p>As many pointed out, this should usually work. The problem was with my setup: I had an old version of gcc somewhere in my PATH variable (version 4.1). Moving the path of the newer version to the beginning of PATH resolves the issue. Thank you all for helping.</p>\n\n<p>To check weather the same happens to you you can do the following: execute <code>g++ --version</code> in your project directory. Compare this with the output of <code>g++.exe --version</code> when you are in the directory where gcc is installed (for me, this was <code>C:\\Program Files\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\bin</code>).</p>\n"}], "owner": {"reputation": 350, "user_id": 4103522, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c4466df5ab305708c2cf8f9a4a55c1d8?s=128&d=identicon&r=PG", "display_name": "Leifb", "link": "https://stackoverflow.com/users/4103522/leifb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550056867, "creation_date": 1550054266, "last_edit_date": 1550056294, "question_id": 54668120, "link": "https://stackoverflow.com/questions/54668120/printing-a-double-to-stdcout-results-in-segmentation-fault-c", "title": "Printing a double to std::cout results in Segmentation fault (C++)", "body": "<p>I am new to C++ and want to print out a double value. It is not that I actually need to print that value, I just want to know what is going wrong here.</p>\n\n<p>This is my code (<code>HelloWorld.cpp</code>):</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    double i = 5.5;\n    std::cout &lt;&lt; i &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Executing this with the debugger attached results in the following error:</p>\n\n<pre><code>Thread 1 hit Breakpoint 1, main () at src/HelloWorld.cpp:4\n4       double i = 5.5;\nThread 1 received signal SIGSEGV, Segmentation fault.\n0x00000000929ba260 in ?? ()\n</code></pre>\n\n<p>When I put a breakpoint in there, creating and assigning the variable is no problem. The error only occurs once the program is supposed to print that value. Executing the exe without the debugger results in no output at all. The same happens when I replace the <code>double</code> with a <code>long double</code> or <code>float</code>. Printing anything else works fine (Strings, <code>char</code>, <code>int</code>, <code>short</code>, etc.).</p>\n\n<p>I am using Visual Studio Code and MinGW (<code>x86_64-8.1.0-posix-seh-rt_v6-rev0</code>). VS Code is using following files for compilation / debugging:</p>\n\n<ul>\n<li><a href=\"https://pastebin.com/hjFvJzHL\" rel=\"nofollow noreferrer\">c_cpp_properties.json</a></li>\n<li><a href=\"https://pastebin.com/aL318MyC\" rel=\"nofollow noreferrer\">launch.json</a></li>\n<li><a href=\"https://pastebin.com/gParZB93\" rel=\"nofollow noreferrer\">tasks.json</a></li>\n</ul>\n\n<p>And <a href=\"https://pastebin.com/xJGmJHet\" rel=\"nofollow noreferrer\">here</a> you can see the complete output, in case that helps.</p>\n\n<p>Any Idea what I am doing wrong here? Thank you.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>When compiling manually using <code>g++ -g .\\src\\HelloWorld.cpp -std=c++11 -o HelloWorld.exe</code> (or just <code>g++ .\\src\\HelloWorld.cpp -o HelloWorld.exe</code>) and running that from the console, the same happens (no output). </p>\n\n<p>I installed MinGW from <a href=\"https://sourceforge.net/projects/mingw-w64/\" rel=\"nofollow noreferrer\">here</a> using the following settings:</p>\n\n<ul>\n<li>Version: <code>8.1.0</code></li>\n<li>Architecture: <code>x86_64</code></li>\n<li>Threads: <code>posix</code></li>\n<li>Exception: <code>seh</code></li>\n<li>Build revision: <code>0</code></li>\n</ul>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>Found the problem. There was an old version of gcc lurking in my PATH (maybe from Visual Studio or MSSQL Server?). I just move the current gcc to the top of PATH and now it's working fine. Thank you all for your help!</p>\n"}, {"tags": ["c++", "opengl", "graphics", "glsl"], "comments": [{"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 3, "creation_date": 1550054627, "post_id": 54668059, "comment_id": 96126527, "body": "Since you don&#39;t use any projection matrix, the geometry is probably clipped by the near or far plane."}, {"owner": {"reputation": 63, "user_id": 9325943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKTYZ.jpg?s=128&g=1", "display_name": "QuickDzen", "link": "https://stackoverflow.com/users/9325943/quickdzen"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1550059841, "post_id": 54668059, "comment_id": 96129655, "body": "A tried with projection and model matrices, but problem only in look at matrix, because other matrices work perfectly without lookat matrix."}, {"owner": {"reputation": 63, "user_id": 9325943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKTYZ.jpg?s=128&g=1", "display_name": "QuickDzen", "link": "https://stackoverflow.com/users/9325943/quickdzen"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1550060024, "post_id": 54668059, "comment_id": 96129757, "body": "I added my projection matrix, may be a problem in the projection matrix"}, {"owner": {"reputation": 63, "user_id": 9325943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKTYZ.jpg?s=128&g=1", "display_name": "QuickDzen", "link": "https://stackoverflow.com/users/9325943/quickdzen"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1550061943, "post_id": 54668059, "comment_id": 96130854, "body": "I transposed projection matrix, but it doesn&#39;t help me... By the way, why else transpose, because I specified transpose in GL_TRUE? Maybe a mistake in something else?"}, {"owner": {"reputation": 63, "user_id": 9325943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKTYZ.jpg?s=128&g=1", "display_name": "QuickDzen", "link": "https://stackoverflow.com/users/9325943/quickdzen"}, "reply_to_user": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1550062307, "post_id": 54668059, "comment_id": 96131049, "body": "I changed my lookat matrix on translation with projection and everything work&#39;s perfectly. Problem only in lookat matrix..."}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 1, "creation_date": 1550065971, "post_id": 54668059, "comment_id": 96133430, "body": "Of course <code>GL_TRUE</code> does the transpose."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1550429649, "post_id": 54668059, "comment_id": 96255466, "body": "I saw a couple of problems, but the first one is about matrix multiplication order. It is important so, when you do <code>lookAt.mul(additionalMatrix);</code> How are those matrixes multiplied (implemented)? <code>lookAt * additionalMatrix</code> or <code>additionalMatrix * lookAt</code>? Another issue is with znear. It should be positive (<a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/gluPerspective.xml\" rel=\"nofollow noreferrer\">khronos.org/registry/OpenGL-Refpages/gl2.1/xhtml/&hellip;</a>)"}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1550430243, "post_id": 54668059, "comment_id": 96255658, "body": "Another issue is that you problably want <code>Math::Vector3f right = Math::cross(up, center).normalize();</code>"}, {"owner": {"reputation": 63, "user_id": 9325943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKTYZ.jpg?s=128&g=1", "display_name": "QuickDzen", "link": "https://stackoverflow.com/users/9325943/quickdzen"}, "edited": false, "score": 0, "creation_date": 1550479121, "post_id": 54668059, "comment_id": 96268704, "body": "I added implementation of matrix multiplication and vectors cross product, but I checked it... Multiplication and cross product worked perfectly."}, {"owner": {"reputation": 63, "user_id": 9325943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKTYZ.jpg?s=128&g=1", "display_name": "QuickDzen", "link": "https://stackoverflow.com/users/9325943/quickdzen"}, "edited": false, "score": 0, "creation_date": 1550480682, "post_id": 54668059, "comment_id": 96269407, "body": "znear is positive."}, {"owner": {"reputation": 63, "user_id": 9325943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKTYZ.jpg?s=128&g=1", "display_name": "QuickDzen", "link": "https://stackoverflow.com/users/9325943/quickdzen"}, "edited": false, "score": 0, "creation_date": 1550481174, "post_id": 54668059, "comment_id": 96269634, "body": "Camera start coordinates the folowing :   Math::Vector3f cameraPos(0.0f, 0.0f, 3.0f);    Math::Vector3f cameraFront(0.0f, 0.0f, -1.0f);    Math::Vector3f cameraUp(0.0f, 1.0f, 0.0f);"}, {"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 1, "creation_date": 1550486284, "post_id": 54668059, "comment_id": 96272616, "body": "<code>additionalMatrix</code> looks wrong. Shouldn&#39;t there be 1&#39;s along the diagonal? Otherwise the upper 3x3 matrix will for sure be 0 in the multiplication result."}, {"owner": {"reputation": 8580, "user_id": 2293156, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/800e791e8e13500e516c9ae77299160a?s=128&d=identicon&r=PG", "display_name": "Amadeus", "link": "https://stackoverflow.com/users/2293156/amadeus"}, "edited": false, "score": 1, "creation_date": 1550527994, "post_id": 54668059, "comment_id": 96293766, "body": "<i>znear is positive</i>  -&gt; setPerspectiveMatrix(projection, 45.0f, width / height, <b>-0.1</b>, 100.0f); Are you sure?"}], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 1, "last_activity_date": 1550827261, "creation_date": 1550827261, "answer_id": 54823767, "question_id": 54668059, "link": "https://stackoverflow.com/questions/54668059/how-to-solve-problem-with-lookat-matrix-on-opengl-glsl/54823767#54823767", "title": "How to solve problem with lookat matrix on OpenGL/GLSL", "body": "<p><code>\"projectionMatrix\"</code> and <code>\"viewMatrix\"</code> are uniform variables. The uniform location can be get by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glGetUniformLocation.xhtml\" rel=\"nofollow noreferrer\"><code>glGetUniformLocation</code></a> rather than <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glGetAttribLocation.xhtml\" rel=\"nofollow noreferrer\"><code>glGetAttribLocation</code></a>, which would return the attribute index of an active attribute:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>GLint projLoc = glGetUniformLocation( mProgramID, \"projectionMatrix\" );\nGLint viewLoc = glGetUniformLocation( mProgramID, \"viewMatrix\" );\n</code></pre>\n\n<p>At Perspective Projection the projection matrix describes the mapping from 3D points in the world as they are seen from of a pinhole camera, to 2D points of the viewport.<br>\nThe eye space coordinates in the camera frustum (a truncated pyramid) are mapped to a cube (the normalized device coordinates).<br>\nAt perspective projection the view space (volume) is defined by a frustum (a truncated pyramid), where the top of the pyramid is the viewer's position.\nThe direction of view (line of sight) and the near and the far distance define the planes which truncated the pyramid to a frustum (the direction of view is the normal vector of this planes).<br>\nThis means both values, the distance to the near plane and the distance to the far plane have to be positive values:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Matrix4x4f lookAt;\nsetLookAt(lookAt, { 0.0f, 0.0f, 3.0f }, { 0.0f, 0.0f, -1.0f }, { 0.0f, 1.0f, 0.0f });\nglUniformMatrix4fv(viewLoc, 1, GL_TRUE, lookAt);\n\nMatrix4x4f projection;\nsetPerspectiveMatrix(projection, 45.0f, width / height, 0.1f, 100.0f); // 0.1f instead of -0.1f\nglUniformMatrix4fv(projLoc, 1, GL_TRUE, projection);\n</code></pre>\n\n<p>The view space is the local system which is defined by the point of view onto the scene. \nThe position of the view, the line of sight and the upwards direction of the view, define a coordinate system relative to the world coordinate system.<br>\nThe view matrix has to transform from world space to view space, so the view matrix is the inverse matrix of the view coordinate system.<br>\nIf the coordinate system of the view space is a <a href=\"https://en.wikipedia.org/wiki/Right-hand_rule\" rel=\"nofollow noreferrer\">Right-handed</a> system, where the X-axis points to the left and the Y-axis points up, then the Z-axis points out of the view (Note in a right hand system the Z-Axis is the cross product of the X-Axis and the Y-Axis).</p>\n\n<p>The z-axis line of sight is the vector from the point of view <code>eye</code> to the traget <code>center</code>: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Type&gt;\nvoid setLookAt(Matrix4x4&lt;Type&gt;&amp; matrix, const Vector3&lt;Type&gt; eye, const Vector3&lt;Type&gt; center, const Vector3&lt;Type&gt; up) noexcept\n{\n    Vector3f mz( { eye.getX()-center.getX(), eye.getY()-center.getY(), eye.getZ()-center.getZ() } );\n    mz = mz.normalize();\n    Vector3f my = up.normalize();\n    Vector3f mx = cross(my, mz).normalize();\n\n    Type tx = dot( mx, eye );\n    Type ty = dot( my, eye );\n    Type tz = -dot( mz, eye );\n\n    matrix = {\n        mx.getX(), mx.getY(), mx.getZ(), tx,\n        my.getX(), my.getY(), my.getZ(), ty,\n        mz.getX(), mz.getY(), mz.getZ(), tz,\n        0.0,       0.0,       0.0,       1.0\n    };\n}\n\ntemplate&lt;typename Type&gt;\nVector3&lt;Type&gt; cross(Vector3&lt;Type&gt; vector, Vector3&lt;Type&gt; anotherVector) noexcept\n{\n    const Type x = vector.getY()*anotherVector.getZ() - vector.getZ()*anotherVector.getY();\n    const Type y = -(vector.getX()*anotherVector.getZ() - vector.getZ()*anotherVector.getX());\n    const Type z = vector.getX()*anotherVector.getY() - vector.getY()*anotherVector.getX();\n    return { x, y, z };\n}\n\ntemplate&lt;typename Type&gt;\nVector3&lt;Type&gt; Vector3&lt;Type&gt;::normalize(void) const\n{ \n  Type len = std::sqrt(mV[0]*mV[0] + mV[1]*mV[1] + mV[2]*mV[2]);\n  return { mV[0] / len, mV[1] / len, mV[2] / len }; \n}\n\ntemplate&lt;typename Type&gt;\nType dot(Vector3&lt;Type&gt; vector, Vector3&lt;Type&gt; anotherVector) noexcept\n{\n    Type ax = vector.getX(), ay = vector.getY(), az = vector.getZ();\n    Type bx = anotherVector.getX(), by = anotherVector.getY(), bz = anotherVector.getZ();\n    return ax*bx + ay*by + az*bz;\n}\n</code></pre>\n\n<p>A perspective projection matrix can be defined by a <strong>frustum</strong>.<br>\nThe distances <code>left</code>, <code>right</code>, <code>bottom</code> and <code>top</code>, are the distances from the center of the view to the side faces of the frustum, on the near plane. <code>near</code> and <code>far</code> specify the distances to the near and far plane on the frustum.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>r = right, l = left, b = bottom, t = top, n = near, f = far\n\nx              y              z                t\n2*n/(r-l)      0              (r+l)/(r-l)      0\n0              2*n/(t-b)      (t+b)/(t-b)      0\n0              0             -(f+n)/(f-n)     -2*f*n/(f-n)\n0              0             -1                0\n</code></pre>\n\n<p>If the projection is symmetric, where the line of sight is axis of symmetry of the view frustum, then the matrix can be simplified:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>x              y              z                t\n1/(ta*a)       0              0                0\n0              1/ta           0                0\n0              0             -(f+n)/(f-n)     -2*f*n/(f-n)\n0              0             -1                0\n</code></pre>\n\n<p>where:</p>\n\n<pre><code>a = w / h\nta = tan( fov_y / 2 );\n\n2 * n / (r-l) = 1 / (ta * a)\n2 * n / (t-b) = 1 / ta\n</code></pre>\n\n<p>Further the projection matrix switches from an right-handed system to an left-handed system, because the z axis is turned.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RGxo3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RGxo3.png\" alt=\"\"></a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Type&gt;\nvoid setPerspectiveMatrix(Matrix4x4&lt;Type&gt;&amp; matrix, Type fov, Type aspect, Type znear, Type zfar) noexcept\n{\n    const Type yScale = static_cast&lt;Type&gt;(1.0 / tan(RADIANS_PER_DEGREE * fov / 2));\n    const Type xScale = yScale / aspect;\n    const Type difference = zfar - znear;\n    matrix  = {\n        xScale, 0,       0,                            0,\n        0,      yScale,  0,                            0,\n        0,      0,      -(zfar + znear) / difference, -2 * zfar * znear / difference,\n        0,      0,      -1,                            0\n    };\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 9325943, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cKTYZ.jpg?s=128&g=1", "display_name": "QuickDzen", "link": "https://stackoverflow.com/users/9325943/quickdzen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 54823767, "answer_count": 1, "score": 1, "last_activity_date": 1550827354, "creation_date": 1550054073, "last_edit_date": 1550827354, "question_id": 54668059, "link": "https://stackoverflow.com/questions/54668059/how-to-solve-problem-with-lookat-matrix-on-opengl-glsl", "title": "How to solve problem with lookat matrix on OpenGL/GLSL", "body": "<p>I have the following code for my own look-at matrix(multiplication of matrices and cross product of vectors work perfectly, I checked it):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Type&gt;\nvoid setLookAt(Matrix4x4&lt;Type&gt;&amp; matrix, const Vector3&lt;Type&gt; eye, const Vector3&lt;Type&gt; center, const Vector3&lt;Type&gt; up) noexcept\n{\n    Math::Vector3f right = Math::cross(center, up).normalize();\n    Matrix4x4f lookAt({\n        right.getX(), right.getY(), right.getZ(), 0.0,\n        up.getX(), up.getY(), up.getZ(), 0.0,\n        center.getX(), center.getY(), center.getZ(), 0.0,\n        0.0, 0.0, 0.0, 1.0\n    });\n    Matrix4x4f additionalMatrix({\n        0.0, 0.0, 0.0, -(eye.getX()),\n        0.0, 0.0, 0.0, -(eye.getY()),\n        0.0, 0.0, 0.0, -(eye.getZ()),\n        0.0, 0.0, 0.0, 1.0\n    });\n    lookAt.mul(additionalMatrix);\n    matrix = lookAt;\n}\n\ntemplate&lt;typename Type&gt;\nvoid setPerspectiveMatrix(Matrix4x4&lt;Type&gt;&amp; matrix, Type fov, Type aspect, Type znear, Type zfar) noexcept\n{\n    const Type yScale = static_cast&lt;Type&gt;(1.0 / tan(RADIANS_PER_DEGREE * fov / 2));\n    const Type xScale = yScale / aspect;\n    const Type difference = znear - zfar;\n    matrix  = {\n        xScale, 0, 0, 0,\n        0, yScale, 0, 0,\n        0, 0, (zfar + znear) / difference, 2 * zfar * znear / difference,\n        0, 0, -1, 0\n    };\n}\n</code></pre>\n\n<p>Matrix multiplication implementation:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// static const std::uint8_t ROW_SIZE = 4;\n// static const std::uint8_t MATRIX_SIZE = ROW_SIZE * ROW_SIZE;\n// static const std::uint8_t FIRST_ROW = 0;\n// static const std::uint8_t SECOND_ROW = ROW_SIZE;\n// static const std::uint8_t THIRD_ROW = ROW_SIZE + ROW_SIZE;\n// static const std::uint8_t FOURTH_ROW = ROW_SIZE + ROW_SIZE + ROW_SIZE;\n\ntemplate&lt;class Type&gt;\nvoid Matrix4x4&lt;Type&gt;::mul(const Matrix4x4&amp; anotherMatrix) noexcept\n{\n    Type currentElements[MATRIX_SIZE];\n    std::copy(std::begin(mElements), std::end(mElements), currentElements);\n    const Type* otherElements = anotherMatrix.mElements;\n    for (std::uint8_t i = 0; i &lt; MATRIX_SIZE; i += ROW_SIZE) \n    {\n        mElements[i] = currentElements[i] * otherElements[FIRST_ROW] +\n            currentElements[i + 1] * otherElements[SECOND_ROW] +\n            currentElements[i + 2] * otherElements[THIRD_ROW] +\n            currentElements[i + 3] * otherElements[FOURTH_ROW];\n        mElements[i + 1] = currentElements[i] * otherElements[FIRST_ROW + 1] +\n            currentElements[i + 1] * otherElements[SECOND_ROW + 1] +\n            currentElements[i + 2] * otherElements[THIRD_ROW + 1] +\n            currentElements[i + 3] * otherElements[FOURTH_ROW + 1];\n        mElements[i + 2] = currentElements[i] * otherElements[FIRST_ROW + 2] +\n            currentElements[i + 1] * otherElements[SECOND_ROW + 2] +\n            currentElements[i + 2] * otherElements[THIRD_ROW + 2] +\n            currentElements[i + 3] * otherElements[FOURTH_ROW + 2];\n        mElements[i + 3] = currentElements[i] * otherElements[FIRST_ROW + 3] +\n            currentElements[i + 1] * otherElements[SECOND_ROW + 3] +\n            currentElements[i + 2] * otherElements[THIRD_ROW + 3] +\n            currentElements[i + 3] * otherElements[FOURTH_ROW + 3];\n    }\n}\n</code></pre>\n\n<p>Cross product implementation:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename Type&gt;\nMath::Vector3&lt;Type&gt; cross(Vector3&lt;Type&gt; vector, Vector3&lt;Type&gt; anotherVector) noexcept\n{\n    const Type x = vector.getY()*anotherVector.getZ() - vector.getZ()*anotherVector.getY();\n    const Type y = -(vector.getX()*anotherVector.getZ() - vector.getZ()*anotherVector.getX());\n    const Type z = vector.getX()*anotherVector.getY() - vector.getY()*anotherVector.getX();\n    return { x, y, z };\n}\n</code></pre>\n\n<p>Using it:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// OpenGL\n\nglUseProgram(mProgramID);\nMatrix4x4f lookAt;\nsetLookAt(lookAt, { 0.0f, 0.0f, 3.0f }, { 0.0f, 0.0f, -1.0f }, { 0.0f, 1.0f, 0.0f });\nglUniformMatrix4fv(glGetAttribLocation(mProgramID, \"viewMatrix\"), 1, GL_TRUE, lookAt);\nMatrix4x4f projection;\nsetPerspectiveMatrix(projection, 45.0f, width / height, -0.1, 100.0f);\nglUniformMatrix4fv(glGetAttribLocation(mProgramID, \"projectionMatrix \"), 1, GL_TRUE, projection);\n</code></pre>\n\n<pre class=\"lang-c prettyprint-override\"><code>// GLSL\n\nlayout (location = 0) in vec3 position;\n\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nvoid main()\n{\n    gl_Position = projectionMatrix * viewMatrix * vec4(position, 1.0f);\n}\n</code></pre>\n\n<p>After using this code, I get a blank screen, although I would have to draw a cube. The problem is in the matrix itself, so other matrices work fine(offset, rotation, ...), but I can understand exactly where. Can you tell me what could be the problem?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1550054292, "post_id": 54668049, "comment_id": 96126345, "body": "Just <code>std::get</code> it again?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "edited": false, "score": 0, "creation_date": 1550054583, "post_id": 54668049, "comment_id": 96126505, "body": "Have you tried <code>std::get&lt;0&gt;(std::get&lt;2&gt;(setOfWord[0])[0]);</code>?"}, {"owner": {"reputation": 1, "user_id": 11055801, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4df6kh68bjo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNMqpP3-7g9Wv7QhMa21w9HpuTQ-Q/mo/photo.jpg?sz=128", "display_name": "afiq amir", "link": "https://stackoverflow.com/users/11055801/afiq-amir"}, "edited": false, "score": 0, "creation_date": 1550054750, "post_id": 54668049, "comment_id": 96126614, "body": "Okay that solve problem. Thank you for helping and sorry for idiot question, stil new to C++."}], "answers": [{"tags": [], "owner": {"reputation": 438, "user_id": 5761225, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-26RKxk6fy04/AAAAAAAAAAI/AAAAAAAABTA/ja07v2o8xkQ/photo.jpg?sz=128", "display_name": "Shadab Ahmed", "link": "https://stackoverflow.com/users/5761225/shadab-ahmed"}, "is_accepted": false, "score": 0, "last_activity_date": 1550055838, "creation_date": 1550055838, "answer_id": 54668671, "question_id": 54668049, "link": "https://stackoverflow.com/questions/54668049/accessing-tuple-with-tuple-as-elements-in-c/54668671#54668671", "title": "accessing tuple with tuple as elements in C++", "body": "<p>Try like this </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;tuple&gt; // for swap() and tuple \n\nusing namespace std; \n\nint main() {\n  vector&lt;tuple&lt;string, int, vector&lt;tuple&lt;string, int, string&gt;&gt;&gt;&gt; setOfWord;\n  tuple &lt;string,int,string&gt; tup1(\"20\",1,\"17.5\"); \n  vector&lt; tuple &lt;string,int,string&gt;&gt; v;\n  v.push_back(tup1);\n  tuple&lt;string, int, vector&lt;tuple&lt;string, int, string&gt;&gt;&gt; vt(\"str\", 2, v);\n  setOfWord.push_back(vt);\n  cout&lt;&lt;get&lt;0&gt;(get&lt;2&gt;(setOfWord[0])[0]);\n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11055801, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4df6kh68bjo/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNMqpP3-7g9Wv7QhMa21w9HpuTQ-Q/mo/photo.jpg?sz=128", "display_name": "afiq amir", "link": "https://stackoverflow.com/users/11055801/afiq-amir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1550055838, "creation_date": 1550054048, "last_edit_date": 1550054606, "question_id": 54668049, "link": "https://stackoverflow.com/questions/54668049/accessing-tuple-with-tuple-as-elements-in-c", "title": "accessing tuple with tuple as elements in C++", "body": "<p>How can I access tuple with tuple as element using get?</p>\n\n<pre><code>vector&lt;tuple&lt;string, int, vector&lt;tuple&lt;string, int, string&gt;&gt;&gt;&gt; setOfWord\n</code></pre>\n\n<p>if I use tuple with pair as element,</p>\n\n<pre><code>vector &lt;tuple&lt;string, int, vector&lt;pair&lt;string, string&gt;&gt;&gt;&gt; setOfWord\n</code></pre>\n\n<p>I can access the elements by using </p>\n\n<pre><code>if( wordVector ==  (get&lt;2&gt;(setOfWord[i]))[j].second)\n</code></pre>\n\n<p>but how can I retrieve the inside element if I use tuple instead of pair ?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "stl", "set", "unordered-map"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1550054121, "post_id": 54668026, "comment_id": 96126235, "body": "Depends a lot, even a linear search in <code>std::vector</code> might be faster than logarithm search."}, {"owner": {"reputation": 34086, "user_id": 787480, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/91cDR.png?s=128&g=1", "display_name": "Sneftel", "link": "https://stackoverflow.com/users/787480/sneftel"}, "edited": false, "score": 3, "creation_date": 1550054468, "post_id": 54668026, "comment_id": 96126433, "body": "You know there&#39;s an <code>unordered_set</code> too, right?"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1550054539, "post_id": 54668026, "comment_id": 96126473, "body": "None of the standard containers will give you the fastest possible lookup time. There are better implementations of a hash table than STL&#39;s unordered containers. And even, if you know your use case, you can optimize your own hash table implementation for that case (or, in specific cases, there can be better suited structures than hash tables)."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 2, "last_activity_date": 1550063054, "last_edit_date": 1550063054, "creation_date": 1550054145, "answer_id": 54668084, "question_id": 54668026, "link": "https://stackoverflow.com/questions/54668026/is-it-faster-to-lookup-in-set-than-unordered-map/54668084#54668084", "title": "Is it faster to lookup in set than unordered_map", "body": "<p>This depends to a large degree on the distribution of your data, the size of your dataset, the compiler, the toolchain...</p>\n\n<p>The only way you can know is to <em>measure it</em> for your use case.</p>\n\n<p>Do this after selecting <a href=\"https://stackoverflow.com/q/10699265/560648\">the appropriate container</a> for your task, then switch to something else only if you find that you need to and that you can get better performance for your use case by doing so.</p>\n\n<p>Based on your question, I'd say the choice is between <code>set</code> and <code>unsorted_set</code>. On the other hand, if you don't actually know yet whether your data have both keys <em>and</em> values, then you're probably not ready to start profiling your solution.</p>\n"}, {"tags": [], "owner": {"reputation": 328, "user_id": 956608, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/87484577a9f1bdc9190392c1d45c9337?s=128&d=identicon&r=PG&f=1", "display_name": "Rajesh", "link": "https://stackoverflow.com/users/956608/rajesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1550154727, "creation_date": 1550154727, "answer_id": 54692812, "question_id": 54668026, "link": "https://stackoverflow.com/questions/54668026/is-it-faster-to-lookup-in-set-than-unordered-map/54692812#54692812", "title": "Is it faster to lookup in set than unordered_map", "body": "<p>Consider this perspective from a different angle, </p>\n\n<p>Since performance is what you're interested in here, you might want to design your data structure in a way to optimally utilise cacheline</p>\n\n<p>If the number of elements is not too high, then a vector will outperform all other containers. This is the case, because vectors store elements in contiguous memory locations and your cache loves contiguous memory allocation</p>\n\n<p>You also mentioned about key-value pairs hampering lookup speed. One way to get around this from cacheline perspective is to store the keys in a contiguous data structure, do the lookup with keys alone. The only when you have a hit, you might want to read the corresponding value from your key-value pair</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=rX0ItVEVjHc\" rel=\"nofollow noreferrer\">Check out this talk by Mike acton for more on this</a></p>\n"}], "owner": {"reputation": 21, "user_id": 6187120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHB6b.jpg?s=128&g=1", "display_name": "Steven Shi", "link": "https://stackoverflow.com/users/6187120/steven-shi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "closed_date": 1550155065, "answer_count": 2, "score": -1, "last_activity_date": 1550196125, "creation_date": 1550054003, "last_edit_date": 1550196125, "question_id": 54668026, "link": "https://stackoverflow.com/questions/54668026/is-it-faster-to-lookup-in-set-than-unordered-map", "closed_reason": "Opinion-based", "title": "Is it faster to lookup in set than unordered_map", "body": "<p>I have a question about lookup speed. I want to know <strong>which STL container can produce the fastest lookup time in C++</strong>. <code>unordered_map</code> comes to my mind since it is implemented by hash map, but I am afraid its performance is penalized because it contains key-value pair, whereas <code>set</code> contains only key. I guess the answer will depends on 1) the data type of key; and 2) the STL implementation of <code>set</code>. </p>\n\n<p>In other words, which container is faster to search for the existence of an key, is it set, unordered_map, or something else?</p>\n\n<h1>Edit:</h1>\n\n<p>Would appreciate the answer with more explanation on the implementation or mechanism of the container. For instance, unordered_map is fast because it's implemented with hashmap. That will be more helpful than saying \"it depends on the need\". Thanks!</p>\n"}, {"tags": ["c++", "file-io", "segmentation-fault", "ifstream"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1550053695, "post_id": 54667869, "comment_id": 96125973, "body": "Use a debugger."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1550053836, "post_id": 54667869, "comment_id": 96126052, "body": "Unrelated, not that it matters, but naming a variable the same as a function is a recipe for confusion. Just saying."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 1, "creation_date": 1550053859, "post_id": 54667869, "comment_id": 96126067, "body": "&#39;So, the print after the call to files_match is not being print so I guess the problem was within the function.&#39; No that is not necessarily correct because I/O is <b>buffered</b> and it doesn&#39;t appear immediately. If you want a <code>printf</code> to appear immediately you should follow it with <code>fflush(stdout);</code>. Or just use a debugger, as already suggested."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1550054002, "post_id": 54667869, "comment_id": 96126156, "body": "^^^^ or: <code>printf(&quot;Exited without problem\\n&quot;);</code> &lt;=== note newline."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550054087, "post_id": 54667869, "comment_id": 96126213, "body": "A newline often causes a print to <code>stdout</code> to flush, but it&#39;s not guaranteed, the best way is to add <code>fflush(stdout);</code>"}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550054242, "post_id": 54667869, "comment_id": 96126317, "body": "Seems to me the most likely explanation is that your bug happens shortly after <code>files_match</code> returns and <code>files_match</code> is not the cause of your problems (it looks OK to me). The <code>printf</code> output doesn&#39;t appear because of the buffering issues discussed above."}], "answers": [{"tags": [], "owner": {"reputation": 1661, "user_id": 5931672, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-Ljkm-NVRzOc/AAAAAAAAAAI/AAAAAAAAAFE/EelBBzc8ji0/photo.jpg?sz=128", "display_name": "Agustin Barrachina", "link": "https://stackoverflow.com/users/5931672/agustin-barrachina"}, "is_accepted": true, "score": -1, "last_activity_date": 1550054589, "creation_date": 1550054589, "answer_id": 54668243, "question_id": 54667869, "link": "https://stackoverflow.com/questions/54667869/knowing-where-is-the-segmentation-fault-happening-comparing-two-files/54668243#54668243", "title": "Knowing where is the segmentation fault happening comparing two files", "body": "<p>Yes, as @john suggested, I had to add the fflush() function. There I realize the error was actually outside all this loop but actually is when getting out of the try{} section. It seams to me that is not managing to destroy the fx3USBConnection.</p>\n\n<p>Thank you! I was so mislead now knowing fprint was actually buffered.</p>\n"}], "owner": {"reputation": 1661, "user_id": 5931672, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-Ljkm-NVRzOc/AAAAAAAAAAI/AAAAAAAAAFE/EelBBzc8ji0/photo.jpg?sz=128", "display_name": "Agustin Barrachina", "link": "https://stackoverflow.com/users/5931672/agustin-barrachina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 54668243, "answer_count": 1, "score": 0, "last_activity_date": 1550054589, "creation_date": 1550053575, "last_edit_date": 1550054532, "question_id": 54667869, "link": "https://stackoverflow.com/questions/54667869/knowing-where-is-the-segmentation-fault-happening-comparing-two-files", "title": "Knowing where is the segmentation fault happening comparing two files", "body": "<p>I have the following structure:</p>\n\n<pre><code>int main(int argc, char **argv) {\n     try {\n        FX3USBConnection fx3USB3Connection = FX3USB3Connection();\n        fx3USB3Connection.send_text_file();\n    }\n    catch (ErrorOpeningLib&amp; e) {\n        printf(\"Error opening library\\n\");\n        return -1;\n    }\n    catch (NoDeviceFound&amp; e) {\n        printf(\"No device found\\n\");\n        return 0;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Within send_text_files, the last thing I do is compare two txt files as follows:</p>\n\n<pre><code>printf(\"Loopback recieved, checking if I received the same that I sended\\n\");\nfiles_match(out_text_filename, in_text_filename);\nprintf(\"Exited without problem\");\nreturn; // (actually implicit)\n</code></pre>\n\n<p>I already used 2 version of <code>files_match</code> function but the last one is an exact copy of this <a href=\"https://stackoverflow.com/questions/6163611/compare-two-files/6163627\">Compare two files</a></p>\n\n<pre><code>bool FX3USB3Connection::files_match(const std::string &amp;p1, const std::string &amp;p2) {\n    bool files_match;\n    std::ifstream f1(p1, std::ifstream::binary|std::ifstream::ate);\n    std::ifstream f2(p2, std::ifstream::binary|std::ifstream::ate);\n\n    if (f1.fail() || f2.fail()) {\n        return false; //file problem\n    }\n\n    if (f1.tellg() != f2.tellg()) {\n        return false; //size mismatch\n    }\n\n    //seek back to beginning and use std::equal to compare contents\n    f1.seekg(0, std::ifstream::beg);\n    f2.seekg(0, std::ifstream::beg);\n    files_match = std::equal(std::istreambuf_iterator&lt;char&gt;(f1.rdbuf()),\n                      std::istreambuf_iterator&lt;char&gt;(),\n                      std::istreambuf_iterator&lt;char&gt;(f2.rdbuf()));\n    f1.close();\n    f2.close();\n    if (files_match) { printf(\"Files match\\n\"); }\n    else { printf(\"Files not equal\\n\"); }\n    return files_match;\n}\n</code></pre>\n\n<p>Sometimes I get an error and sometimes I don't. When I get the error I get:</p>\n\n<pre><code>Loopback recieved, checking if I received the same that I sended\nFiles match\n\nProcess finished with exit code 139 (interrupted by signal 11: SIGSEGV)\n</code></pre>\n\n<p>So, the print after the call to <code>files_match</code> is not being print so I guess the problem was within the function. However, I do a print just before the return statement and it is printing correctly. </p>\n\n<p>PS: I commented the function <code>files_match</code> and I have no problems.</p>\n\n<p>PS1: The files can have whatever like this character: \u00a5</p>\n"}, {"tags": ["c++", "window", "file-handling"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1550053465, "post_id": 54667641, "comment_id": 96125825, "body": "<i>&quot;It should always append content to the front of the file&quot;</i> - The <a href=\"https://en.cppreference.com/w/cpp/io/ios_base/openmode\" rel=\"nofollow noreferrer\">description of <code>ios::app</code></a> is nothing if not clear. It says &quot;seek to the <i>end</i> of the stream before each write&quot;. Therefore you&#39;re not using an appropriate open-mode. Now the bad news: There is no open mode that does what you seek. You have to manage the reads and writes yourself."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1550053673, "post_id": 54667641, "comment_id": 96125956, "body": "You <i>can</i> do this via read/write forward buffering with two blocks the size of your pre-pend data. Read two blocks (or until EOF) the size of the pre-pend data. Then write the header, then write block1, then load block1 with another frame, then write block two. Then load block2 with another frame, then write block1, etc. This continues until the EOF is reached and you&#39;ve written your last block. I don&#39;t advise it, as it can easily corrupt if a read/write error happens, but it alleviates an intermediate file. Best of luck."}, {"owner": {"reputation": 70931, "user_id": 882003, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/de71acd9a8eab73186dea35aea7a68f2?s=128&d=identicon&r=PG", "display_name": "john", "link": "https://stackoverflow.com/users/882003/john"}, "edited": false, "score": 0, "creation_date": 1550055183, "post_id": 54667641, "comment_id": 96126893, "body": "It really would be better to append the data to the end of the file and then reverse the file when you&#39;ve finished. Files are designed to be appended, what you&#39;re trying to do will be <b>extremely</b> inefficient and hard to program as well."}], "answers": [{"tags": [], "owner": {"reputation": 1168, "user_id": 3745908, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cdcf18df0e4ae4a4de189b5d8e318fae?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Benmahdjoub", "link": "https://stackoverflow.com/users/3745908/mohamed-benmahdjoub"}, "is_accepted": false, "score": 0, "last_activity_date": 1550053571, "creation_date": 1550053571, "answer_id": 54667867, "question_id": 54667641, "link": "https://stackoverflow.com/questions/54667641/how-can-i-append-text-in-front-everytime-i-write-in-a-file/54667867#54667867", "title": "How can i append text in front everytime i write in a file?", "body": "<p>I think the only way you can do that is by writing your content into another file then append the old lines to it.</p>\n"}, {"tags": [], "owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "is_accepted": false, "score": 2, "last_activity_date": 1550055331, "last_edit_date": 1550055331, "creation_date": 1550053951, "answer_id": 54668009, "question_id": 54667641, "link": "https://stackoverflow.com/questions/54667641/how-can-i-append-text-in-front-everytime-i-write-in-a-file/54668009#54668009", "title": "How can i append text in front everytime i write in a file?", "body": "<p>First question would be: Why do you want to do so at all?</p>\n\n<p>Then with file processing, this is going to get tricky, because this is not how files work on OS level &ndash; while appending usually is supported natively, this is not the case for prepending (and thus there's no support for in C++ STL either). So you would need to write out the new lines to some temporary file and then append the previous contents afterwards all the time. No way around on Windows, Linux, BSD and derivates.</p>\n\n<p>If you really insist on, you might write your own stream class based on standard file streams hiding all this work away. An alternative variant might read the output file only once, keep all the lines in memory, handle the new lines appropriately and print the lines back to file only once on closing the stream object. Drawback: if the application crashes, quite a number of lines might get lost. You could either use a <code>std::deque</code> and prepend the new lines or read the lines in reverse order into a <code>std::vector</code>, append the new lines and then print to file using reverse iterators.</p>\n\n<p>Likely, though, you are better off just appending to the files. You might then write a separate application inverting the line order &ndash; advantage of: You'd be doing the inversion work only once, <em>reading</em> from the back can be done rather efficiently and on writing the new output file, you'd only append again. Alternatively, you might write your own file viewer application presenting the lines in inverted order (again reading from back, if size is too large, or just keeping all the lines in memory at once).</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6187120, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lHB6b.jpg?s=128&g=1", "display_name": "Steven Shi", "link": "https://stackoverflow.com/users/6187120/steven-shi"}, "is_accepted": false, "score": 0, "last_activity_date": 1550054309, "creation_date": 1550054309, "answer_id": 54668132, "question_id": 54667641, "link": "https://stackoverflow.com/questions/54667641/how-can-i-append-text-in-front-everytime-i-write-in-a-file/54668132#54668132", "title": "How can i append text in front everytime i write in a file?", "body": "<p>If your file is not very large, you may consider by dumping file content to <code>stringstream ss</code> first, add your newer content in front of <code>ss</code>, and write it back to file. </p>\n"}], "owner": {"reputation": 55, "user_id": 11054915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deee15b821e87cc68365861f8af44c2c?s=128&d=identicon&r=PG&f=1", "display_name": "John Wick1", "link": "https://stackoverflow.com/users/11054915/john-wick1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1550055331, "creation_date": 1550052939, "question_id": 54667641, "link": "https://stackoverflow.com/questions/54667641/how-can-i-append-text-in-front-everytime-i-write-in-a-file", "title": "How can i append text in front everytime i write in a file?", "body": "<p>Hey i am dealing with file handling in c++...\nI am new to file handling ....  I want to append the content in front of file everytime i write into the file........</p>\n\n<p>i have opened a file using.....\nfstream fi(\"user.txt\",ios::app);</p>\n\n<p>but this always append the content at end of file .....</p>\n\n<p>I have written a c++ code using .....</p>\n\n<p>Fstream fi(\"user.txt\",ios::app);\nfi&lt;&lt;\"john is a great boy\"&lt;\n\n<pre><code>Fstream fi(\"user.txt\",ios::app);\nfi&lt;&lt;\"john is a great boy\"&lt;&lt;endl;\n</code></pre>\n\n<p>actual result: It is always appending my content at end of file...<br>\nExpected: It should always append content in front of file....</p>\n"}, {"tags": ["c++", "qt", "qt5", "dllmain"], "comments": [{"owner": {"reputation": 518, "user_id": 5094723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9AAA.png?s=128&g=1", "display_name": "vg0x00", "link": "https://stackoverflow.com/users/5094723/vg0x00"}, "edited": false, "score": 0, "creation_date": 1550199665, "post_id": 54667520, "comment_id": 96190533, "body": "the new thread seems not running, may you have a look: <a href=\"https://stackoverflow.com/questions/54702090/after-shared-lib-loads-new-thread-hang\" title=\"after shared lib loads new thread hang\">stackoverflow.com/questions/54702090/&hellip;</a>"}, {"owner": {"reputation": 518, "user_id": 5094723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9AAA.png?s=128&g=1", "display_name": "vg0x00", "link": "https://stackoverflow.com/users/5094723/vg0x00"}, "edited": false, "score": 0, "creation_date": 1550281187, "post_id": 54667520, "comment_id": 96223722, "body": "it seems that I can not create thread in static variable initialization block, cause this part is running in dllMain function, creating thread in dllMain would cause a dead lock, but, is there any way to break this rule?"}, {"owner": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "edited": false, "score": 0, "creation_date": 1550608021, "post_id": 54667520, "comment_id": 96328831, "body": "Don&#39;t create threads in <code>DllMain</code> - see <a href=\"https://docs.microsoft.com/en-us/windows/desktop/dlls/dynamic-link-library-best-practices\" rel=\"nofollow noreferrer\">MSDN</a>."}, {"owner": {"reputation": 518, "user_id": 5094723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9AAA.png?s=128&g=1", "display_name": "vg0x00", "link": "https://stackoverflow.com/users/5094723/vg0x00"}, "reply_to_user": {"reputation": 1173, "user_id": 1741297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w6OT8.gif?s=128&g=1", "display_name": "D Drmmr", "link": "https://stackoverflow.com/users/1741297/d-drmmr"}, "edited": false, "score": 0, "creation_date": 1550626170, "post_id": 54667520, "comment_id": 96334418, "body": "@DDrmmr thx for your reply :)yes, create threads in &quot;dllMain&quot; is bad idea, it causes my app blocks. I found others&#39; demo using a thread in dllMain,  works well. not in C++ but Delphi instead. sleep for 1 second, UI stuff start, but in C++, failed :("}, {"owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "edited": false, "score": 0, "creation_date": 1550772883, "post_id": 54667520, "comment_id": 96403886, "body": "@vg0x00 I do not understand your point #4. Could you explain ?"}, {"owner": {"reputation": 518, "user_id": 5094723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9AAA.png?s=128&g=1", "display_name": "vg0x00", "link": "https://stackoverflow.com/users/5094723/vg0x00"}, "reply_to_user": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "edited": false, "score": 0, "creation_date": 1550803603, "post_id": 54667520, "comment_id": 96414100, "body": "@BenjaminT Sorry for ambiguous description.  point #4 is about usage limitation, teammates will modify some executable file&#39; PE data, load this lib, then, do some user authentication stuff using Qt&#39;s widgets. they can not call my lib function directly."}], "answers": [{"comments": [{"owner": {"reputation": 518, "user_id": 5094723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9AAA.png?s=128&g=1", "display_name": "vg0x00", "link": "https://stackoverflow.com/users/5094723/vg0x00"}, "edited": false, "score": 0, "creation_date": 1550890111, "post_id": 54822309, "comment_id": 96449872, "body": "Thanks for your reply :)   yes, if you load lib and get the function pointer from lib, call it directly, widgets stuff show up without problem (in my test, both loads lib by QLibrary and Windows native API works well, only if you  don&#39;t QApplication object in loader process), emmm, what I want is widgets shows up when lib loaded without invoking UI init method, that is, creating widgets in dllMain function or somewhere else."}, {"owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "reply_to_user": {"reputation": 518, "user_id": 5094723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9AAA.png?s=128&g=1", "display_name": "vg0x00", "link": "https://stackoverflow.com/users/5094723/vg0x00"}, "edited": false, "score": 0, "creation_date": 1550908225, "post_id": 54822309, "comment_id": 96452630, "body": "@vg0x00 I have edited my answer, I have added details about why you cannot create and run a Qt app from DllMain."}], "tags": [], "owner": {"reputation": 7319, "user_id": 2667360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kKqx3.png?s=128&g=1", "display_name": "Benjamin T", "link": "https://stackoverflow.com/users/2667360/benjamin-t"}, "is_accepted": true, "score": 0, "last_activity_date": 1550908169, "last_edit_date": 1550908169, "creation_date": 1550821443, "answer_id": 54822309, "question_id": 54667520, "link": "https://stackoverflow.com/questions/54667520/qt-widgets-not-show-up-when-qt-shared-lib-loaded/54822309#54822309", "title": "Qt widgets not show up when Qt shared lib loaded", "body": "<p>Here is a working example. Tested with Qt 5.12 and MSVC2017 and MinGW.</p>\n\n<pre><code>// main.cpp\nint main(int argc, char *argv[])\n{\n    run_mylib_t *f= nullptr;\n    HMODULE lib = LoadLibraryA(\"..\\\\mylib\\\\debug\\\\mylib.dll\");\n\n    if (!lib) {\n        qDebug() &lt;&lt; \"Failed to load library;\";\n        return -1;\n    }\n\n    f = reinterpret_cast&lt;run_mylib_t *&gt;(GetProcAddress(lib, \"run_mylib\"));\n\n    if (!f) {\n        qDebug() &lt;&lt; \"Failed to get function\";\n        return -1;\n    }\n\n    f(argc, argv);      \n\n    return 0;\n}\n\n// mylib.h\nextern \"C\" MYLIBSHARED_EXPORT int run_mylib(int argc, char *argv[]);\nusing run_mylib_t = int(int, char *[]);\n\n// mylib.cpp\nint loop(int argc, char *argv[])\n{\n    QApplication a(argc, argv);\n    MainWindow w;\n    w.show();\n\n    return a.exec();\n}\n\nint run_mylib(int argc, char *argv[])\n{\n    auto lambda = [argc, argv]() {loop(argc, argv); };\n\n    std::thread thread(lambda);\n    thread.join();\n\n    return 0;\n}\n</code></pre>\n\n<p>Note that if you use Qt function before the thread is created, Qt will detect that it is not in the main thread and the process will crash. That is why I do not use <code>QLibrary</code>.</p>\n\n<p>This use case is not supported by Qt. So if you make it work now, you are not guaranteed that it will work in the future.</p>\n\n<p>You cannot load at the same time 2 dll like this.</p>\n\n<p>Depending on what you do in your main application, it could happens that some Qt features are not working as expected. For instance it could happen that Qt expects messages from Windows, but will never get them because they will be handled by the real main thread.</p>\n\n<h2>About DllMain</h2>\n\n<p>From Windows documentation:</p>\n\n<blockquote>\n  <p>Warning</p>\n  \n  <p>There are significant limits on what you can safely do in a DLL entry\n  point. See General Best Practices for specific Windows APIs that are\n  unsafe to call in DllMain. If you need anything but the simplest\n  initialization then do that in an initialization function for the DLL.\n  You can require applications to call the initialization function after\n  DllMain has run and before they call any other functions in the DLL.</p>\n  \n  <p>-- <a href=\"https://docs.microsoft.com/en-us/windows/desktop/dlls/dllmain\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/dlls/dllmain</a></p>\n</blockquote>\n\n<p>and Dynamic-Link Library Best Practices:</p>\n\n<blockquote>\n  <p>You should never perform the following tasks from within DllMain:</p>\n  \n  <ul>\n  <li>Call LoadLibrary or LoadLibraryEx (either directly or indirectly). This can cause a deadlock or a crash.</li>\n  <li>Call GetStringTypeA, GetStringTypeEx, or GetStringTypeW (either directly or indirectly). This can cause a deadlock or a crash.</li>\n  <li>Synchronize with other threads. This can cause a deadlock.</li>\n  <li>Acquire a synchronization object that is owned by code that is waiting to acquire the loader lock. This can cause a deadlock.</li>\n  <li>Initialize COM threads by using CoInitializeEx. Under certain conditions, this function can call LoadLibraryEx.</li>\n  <li>Call the registry functions. These functions are implemented in Advapi32.dll. If Advapi32.dll is not initialized before your DLL, the\n  DLL can access uninitialized memory and cause the process to crash.</li>\n  <li>Call CreateProcess. Creating a process can load another DLL.</li>\n  <li>Call ExitThread. Exiting a thread during DLL detach can cause the loader lock to be acquired again, causing a deadlock or a crash.</li>\n  <li>Call CreateThread. Creating a thread can work if you do not synchronize with other threads, but it is risky.</li>\n  <li>Create a named pipe or other named object (Windows 2000 only). In Windows 2000, named objects are provided by the Terminal Services DLL.\n  If this DLL is not initialized, calls to the DLL can cause the process\n  to crash.</li>\n  <li>Use the memory management function from the dynamic C Run-Time (CRT). If the CRT DLL is not initialized, calls to these functions can\n  cause the process to crash.</li>\n  <li>Call functions in User32.dll or Gdi32.dll. Some functions load another DLL, which may not be initialized.</li>\n  <li>Use managed code.</li>\n  </ul>\n  \n  <p>-- <a href=\"https://docs.microsoft.com/en-us/windows/desktop/dlls/dynamic-link-library-best-practices\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/dlls/dynamic-link-library-best-practices</a></p>\n</blockquote>\n\n<p>From this I can tell you that you will not be able to create a <code>QApplication</code> and run a Qt app from <code>DllMain</code> for, at least, the following reasons:</p>\n\n<ul>\n<li>Qt will load plugins (at least <code>qwindows.dll</code>) using <code>LoadLibrary</code>. If you use any audio or image or sql database, Qt will also try to load the corresponding plugins (e.g. <code>qjpeg.dll</code>).</li>\n<li>Qt might also try to access the registry, in particular if you use <code>QSettings</code> with native format.</li>\n<li>Qt may create threads. In particular if you use network or Qt Quick.</li>\n<li>Qt will use memory management functions like <code>malloc</code> or <code>free</code>.</li>\n</ul>\n"}], "owner": {"reputation": 518, "user_id": 5094723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W9AAA.png?s=128&g=1", "display_name": "vg0x00", "link": "https://stackoverflow.com/users/5094723/vg0x00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 2, "accepted_answer_id": 54822309, "answer_count": 1, "score": 1, "last_activity_date": 1550908169, "creation_date": 1550052588, "last_edit_date": 1550134744, "question_id": 54667520, "link": "https://stackoverflow.com/questions/54667520/qt-widgets-not-show-up-when-qt-shared-lib-loaded", "title": "Qt widgets not show up when Qt shared lib loaded", "body": "<p>Requirements: Qt widgets show up when Qt shared lib <strong>loads</strong>, for <strong>none-Qt</strong> application.</p>\n\n<p>After some web searching, I found:</p>\n\n<ol>\n<li><p>All Qt widgets must live in \"main thread\", the \"main thread\" is the first Qt object created thread. so, create a none-Qt thread (std::thread), then, create \nQApplication and some other widgets in that thread should work, but not.</p></li>\n<li><p>Do not create any Qt related object or call any Qt related static methods before QApplication created, in that none-Qt thread.</p></li>\n<li><p>The thread solution is not portable for Mac OS, my target platform is Windows only, so, it does not matter.</p></li>\n<li><p>In my case, if app load my Qt lib, and invoke the method for showing widgets, \nit works. but for some reason, caller can not call my lib method manually.</p></li>\n<li><p>If host application (one that loads the shared lib)  is Qt application, you should call QApplication::processEvents(), not QApplication::exec(). in my case, I should call QApplication::exec() in that thread.</p></li>\n</ol>\n\n<p>Source code here:</p>\n\n<ul>\n<li><strong>dllMain version</strong>: </li>\n</ul>\n\n<pre><code>BOOL APIENTRY DllMain(HMODULE hModule,\n                      DWORD ul_reason_for_call,\n                      LPVOID lpReserved)\n{\n    if (ul_reason_for_call == DLL_PROCESS_ATTACH) {\n        auto t = std::thread([]() {\n            // setCodecForLocale is in the same thread, \n            // call it before QApplication created should be OK.\n\n            QTextCodec::setCodecForLocale(QTextCodec::codecForName(\"GBK\"));\n            int i = 0;\n            int argc = 0;\n            QApplication app(argc, 0);\n\n            auto dialogLogin = new DialogLogin(); // custom widget\n\n            dialogLogin-&gt;setModal(true);\n            dialogLogin-&gt;show();\n            app.exec(); // app.processEvents() not work, too.\n        });\n\n        t.join(); // wait for thread ends in dllMain should be BAD, test only\n    }\n\n    return true;\n}\n</code></pre>\n\n<ul>\n<li><strong>Simple C++ static class version</strong></li>\n</ul>\n\n<pre><code>class LibExecutor {\npublic:\n    LibExecutor()\n    {\n        auto t = std::thread([]() {\n            QTextCodec::setCodecForLocale(QTextCodec::codecForName(\"GBK\"));\n            int argc = 0;\n            QApplication app(argc, 0);\n\n            auto dialogLogin = new DialogLogin();\n            dialogLogin-&gt;setModal(true);\n            dialogLogin-&gt;show();\n            app.exec();\n        });\n\n        t.join();\n    }\n};\n\nstatic LibExecutor libExecutor;\n</code></pre>\n\n<p>Both version invoke widgets init stuff successfully, but widgets not\nshow up. </p>\n\n<p>Here is how I test it, using Qt load lib, but, event I load lib using Win32 API, failed too.</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include &lt;QApplication&gt;\n#include &lt;QLibrary&gt;\n\nint main(int argc, char* argv[])\n{\n    QLibrary lib(\"F:/lib_location/lib_name.dll\");\n\n    if (lib.load()) {\n        qDebug() &lt;&lt; \"load ok!\";\n    } else {\n        qDebug() &lt;&lt; \"load error!\";\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "user-interface", "testing", "automation"], "comments": [{"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1550068833, "post_id": 54667394, "comment_id": 96135260, "body": "&gt;&gt; but it clicks the elements very slowly. Timings can be adjusted or zeroed in pywinauto. Which exact timing do you need?"}, {"owner": {"reputation": 21, "user_id": 11055666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4YNEt6X8J4Q/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOtl3P3F4lIHa-ZzIoq98fiSWMHNA/mo/photo.jpg?sz=128", "display_name": "Bidonus UA", "link": "https://stackoverflow.com/users/11055666/bidonus-ua"}, "reply_to_user": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "edited": false, "score": 0, "creation_date": 1550070926, "post_id": 54667394, "comment_id": 96136709, "body": "@VasilyRyabov as fast as possible, but now it find elements slowly, so clicks slowly"}, {"owner": {"reputation": 354, "user_id": 8157623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aZLy.jpg?s=128&g=1", "display_name": "Temizzi", "link": "https://stackoverflow.com/users/8157623/temizzi"}, "edited": false, "score": 0, "creation_date": 1550078653, "post_id": 54667394, "comment_id": 96141319, "body": "you can use jmeter for getting the page response time. Have you considered this?"}, {"owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "reply_to_user": {"reputation": 354, "user_id": 8157623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aZLy.jpg?s=128&g=1", "display_name": "Temizzi", "link": "https://stackoverflow.com/users/8157623/temizzi"}, "edited": false, "score": 0, "creation_date": 1550095392, "post_id": 54667394, "comment_id": 96149181, "body": "@Temizzi I might be wrong, but JMeter is for web UI. Is it really applicable for desktop GUI? I don&#39;t think so."}, {"owner": {"reputation": 21, "user_id": 11055666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4YNEt6X8J4Q/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOtl3P3F4lIHa-ZzIoq98fiSWMHNA/mo/photo.jpg?sz=128", "display_name": "Bidonus UA", "link": "https://stackoverflow.com/users/11055666/bidonus-ua"}, "reply_to_user": {"reputation": 354, "user_id": 8157623, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1aZLy.jpg?s=128&g=1", "display_name": "Temizzi", "link": "https://stackoverflow.com/users/8157623/temizzi"}, "edited": false, "score": 0, "creation_date": 1550217214, "post_id": 54667394, "comment_id": 96195328, "body": "@Temizzi i don&#39;t think its possible, because app don&#39;t have any relations with server etc. Only offline"}], "answers": [{"tags": [], "owner": {"reputation": 7644, "user_id": 3648361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y1aeF.jpg?s=128&g=1", "display_name": "Vasily Ryabov", "link": "https://stackoverflow.com/users/3648361/vasily-ryabov"}, "is_accepted": false, "score": 0, "last_activity_date": 1550095310, "creation_date": 1550095310, "answer_id": 54680138, "question_id": 54667394, "link": "https://stackoverflow.com/questions/54667394/is-there-a-method-to-measure-desktop-application-ui-response-time/54680138#54680138", "title": "Is there a method to measure desktop application UI response time?", "body": "<p>To speed up the elements search I'd recommend using <code>.child_window(title=\"...\", control_type=\"...\")</code> specifications instead of <code>best_match</code> names like <code>app.Dialog.OKButton</code> which is usually slow. Preliminary filtering by <code>control_type</code> is extremely fast because it even doesn't need cross-process interaction while getting title/text requires at least 2 cross-process operations: get length and get text then. So pre-filtered list of elements can dramatically reduce number of text retrievals.</p>\n\n<p>Also pywinauto has little pause after some actions like 0.001 sec. inside <code>.click_input()</code>. These pauses can be zeroed in <code>pywinauto.timings</code> module but it can make the automation flaky in some cases. So try it at your own risk.</p>\n"}], "owner": {"reputation": 21, "user_id": 11055666, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4YNEt6X8J4Q/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQOtl3P3F4lIHa-ZzIoq98fiSWMHNA/mo/photo.jpg?sz=128", "display_name": "Bidonus UA", "link": "https://stackoverflow.com/users/11055666/bidonus-ua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550095310, "creation_date": 1550052222, "question_id": 54667394, "link": "https://stackoverflow.com/questions/54667394/is-there-a-method-to-measure-desktop-application-ui-response-time", "title": "Is there a method to measure desktop application UI response time?", "body": "<p>There are C++ desktop application, and i need to measure UI lags because users say that it sometimes lags. How can i implement this ? Tried to use pywinauto with timer start-stop after actions, but it clicks the elements very slowly. On the other side, tried to use SikuliX, it works faster, but very flaky. And another tried solution is <a href=\"https://uberagent.com/\" rel=\"nofollow noreferrer\">uberAgent</a> but it detects all performance subsidence performance, even what is not needed.</p>\n"}, {"tags": ["c++", "project", "bazel", "dlopen"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550052360, "post_id": 54667040, "comment_id": 96125093, "body": "The easiest way would be to add a DT_RUNPATH or DT_RPATH relative to the origin, e.g. <code>-Wl,-rpath,$ORIGIN&#47;..&#47;lib</code> in <code>linkopts</code> (depending on where you put your executable and library files)."}, {"owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550109575, "post_id": 54667040, "comment_id": 96153184, "body": "I tried &quot;linkopts = [&#39;-ldl&#39;, &#39;-lm&#39;, &#39;-Wl,-rpath,$ORIGIN/../lib&#39;]&quot; but it failed, seems syntax error. How to fix it?"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550123983, "post_id": 54667040, "comment_id": 96156450, "body": "It looks like strings are subject to Make variable substitution, so you need to escape the $ character. $$ORIGIN should do it."}, {"owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1550459454, "post_id": 54667040, "comment_id": 96262240, "body": "Thanks, after I change BUILD to have &quot;-Wl,-rpath,bazel-bin&quot;, I can &quot;bazel build hello-greet &amp;&amp; bazel build hello-dl&quot; and then &quot;bazel-bin/hello-dl&quot; to run it successfully"}], "owner": {"reputation": 8007, "user_id": 5890784, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dec46088a284202a3be71897845a669d?s=128&d=identicon&r=PG&f=1", "display_name": "Hind Forsum", "link": "https://stackoverflow.com/users/5890784/hind-forsum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557952701, "creation_date": 1550051164, "last_edit_date": 1557952701, "question_id": 54667040, "link": "https://stackoverflow.com/questions/54667040/for-bazel-c-project-how-to-use-dlopen-sym-to-locate-my-own-output-library", "title": "For bazel c++ project, how to use &quot;dlopen/sym&quot; to locate my own output library?", "body": "<p>My question is: how to specify/config so that my \"dlopen\" function can find the \".so\" library file built out by my own bazel project?</p>\n\n<p>I've got a very simple project like this:</p>\n\n<pre><code>ls\nBUILD  WORKSPACE  hello-dl.cc  hello-greet.cc  hello-greet.h\n\ncat hello-greet.cc\n#include&lt;stdio.h&gt;\nvoid f(){\n    printf(\"f function\\n\");\n}\n\ncat hello-dl.cc\n#include&lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dlfcn.h&gt;\nint main(){\n    void * handle = dlopen(\"hello-greet\", RTLD_LAZY);\n    if (!handle) {\n        fprintf(stderr, \"%s\\n\", dlerror());\n        exit(EXIT_FAILURE);\n    }\n    void (*f)() = (void (*)()) dlsym(handle, \"f\");\n    char* error = dlerror();\n    if (error != NULL) {\n        fprintf(stderr, \"%s\\n\", error);\n        exit(EXIT_FAILURE);\n    }\n\n    f();\n    dlclose(handle);\n    exit(EXIT_SUCCESS);\n    return 0;\n}\n</code></pre>\n\n<p>and the \"BUILD\" file content is:</p>\n\n<pre><code>cc_binary(\n    name = \"hello-dl\",\n    srcs = [\"hello-dl.cc\"],\n    linkopts = ['-ldl', '-lm']\n)\ncc_library(\n    name = \"hello-greet\",\n    srcs = [\"hello-greet.cc\"],\n    hdrs = [\"hello-greet.h\"],\n)\n</code></pre>\n\n<p>I built both the library and the binary:</p>\n\n<pre><code>bazel build //:hello-greet\nbazel build //:hello-world\n</code></pre>\n\n<p>When run it, it says it cannot find the library file:</p>\n\n<pre><code>bazel run hello-dl\n....\nhello-greet: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>How how to solve my problem?</p>\n"}]