[{"tags": ["c++", "memory", "lambda"], "comments": [{"owner": {"reputation": 3273, "user_id": 1428839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2oKLx.jpg?s=128&g=1", "display_name": "JorenHeit", "link": "https://stackoverflow.com/users/1428839/jorenheit"}, "edited": false, "score": 1, "creation_date": 1421280040, "post_id": 27954634, "comment_id": 44304387, "body": "Just a hunch, which is why this isn&#39;t posted as an answer: You capture the variable by value, so it&#39;s being copied to a datamember of a functor that the compiler generates behind the scenes (at least this is how Scott Meyers explains the implementation of lambda&#39;s). If you capture by reference, the member of this functor would refer to something that doesn&#39;t exist anymore. Could be UB, I don&#39;t know."}, {"owner": {"reputation": 3273, "user_id": 1428839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2oKLx.jpg?s=128&g=1", "display_name": "JorenHeit", "link": "https://stackoverflow.com/users/1428839/jorenheit"}, "edited": false, "score": 0, "creation_date": 1421281978, "post_id": 27954634, "comment_id": 44304976, "body": "Some peculiarities about lambda&#39;s, as pointed out by Scott Meyers: <a href=\"http://youtu.be/48kP_Ssg2eY\" rel=\"nofollow noreferrer\">youtu.be/48kP_Ssg2eY</a> (fast-forward to 16:42)"}], "answers": [{"comments": [{"owner": {"reputation": 2108, "user_id": 2159051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G5pGZ.png?s=128&g=1", "display_name": "BWG", "link": "https://stackoverflow.com/users/2159051/bwg"}, "edited": false, "score": 0, "creation_date": 1421280236, "post_id": 27954672, "comment_id": 44304445, "body": "So with a slightly better processor, I could make my own lambda macro? That&#39;s why I love C++."}, {"owner": {"reputation": 2108, "user_id": 2159051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G5pGZ.png?s=128&g=1", "display_name": "BWG", "link": "https://stackoverflow.com/users/2159051/bwg"}, "edited": false, "score": 0, "creation_date": 1421280476, "post_id": 27954672, "comment_id": 44304521, "body": "Thanks man, i&#39;ll accept this because you were first and it explains everything."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "reply_to_user": {"reputation": 2108, "user_id": 2159051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G5pGZ.png?s=128&g=1", "display_name": "BWG", "link": "https://stackoverflow.com/users/2159051/bwg"}, "edited": false, "score": 0, "creation_date": 1421280643, "post_id": 27954672, "comment_id": 44304589, "body": "@BWG Colombo also mentions why <code>[&amp;]</code> produced strange results, which I skipped over.  :)"}, {"owner": {"reputation": 3273, "user_id": 1428839, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/2oKLx.jpg?s=128&g=1", "display_name": "JorenHeit", "link": "https://stackoverflow.com/users/1428839/jorenheit"}, "edited": false, "score": 0, "creation_date": 1421280679, "post_id": 27954672, "comment_id": 44304601, "body": "<code>operator()</code> is actually <code>const</code>-qualified unless the lambda is declared <code>mutable</code>."}, {"owner": {"reputation": 3297, "user_id": 1436796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a4b86c1c90bc06112c2c069b58bf995?s=128&d=identicon&r=PG", "display_name": "Marc van Leeuwen", "link": "https://stackoverflow.com/users/1436796/marc-van-leeuwen"}, "edited": false, "score": 4, "creation_date": 1421316348, "post_id": 27954672, "comment_id": 44315456, "body": "I think a harder question than <i>how</i> the closure is stored is <i>where</i> it is stored. It looks like cannot be stored on the runtime stack, because the closure is built inside <code>scopeIt</code> but has to survive return from it. So it should be stored in dynamic storage, allocated during the assignment to <code>fun</code>. But then this storage must be freed at the end of <code>main</code>; however that might be separately compiled from <code>scopeIt</code> so cannot know about the structure of <code>UNNAMED_TYPE</code>. How does <code>std::function</code> manage to destroy its target? Is there some polymorphism going on behind the scenes?"}, {"owner": {"reputation": 2108, "user_id": 2159051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G5pGZ.png?s=128&g=1", "display_name": "BWG", "link": "https://stackoverflow.com/users/2159051/bwg"}, "reply_to_user": {"reputation": 3297, "user_id": 1436796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a4b86c1c90bc06112c2c069b58bf995?s=128&d=identicon&r=PG", "display_name": "Marc van Leeuwen", "link": "https://stackoverflow.com/users/1436796/marc-van-leeuwen"}, "edited": false, "score": 0, "creation_date": 1421350781, "post_id": 27954672, "comment_id": 44335875, "body": "@MarcvanLeeuwen Could it be stored in the same style as a string literal?"}, {"owner": {"reputation": 3297, "user_id": 1436796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a4b86c1c90bc06112c2c069b58bf995?s=128&d=identicon&r=PG", "display_name": "Marc van Leeuwen", "link": "https://stackoverflow.com/users/1436796/marc-van-leeuwen"}, "reply_to_user": {"reputation": 2108, "user_id": 2159051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G5pGZ.png?s=128&g=1", "display_name": "BWG", "link": "https://stackoverflow.com/users/2159051/bwg"}, "edited": false, "score": 0, "creation_date": 1421352363, "post_id": 27954672, "comment_id": 44336697, "body": "@BWG: No it cannot. String literals are compile time constants, value capture happens at run time."}, {"owner": {"reputation": 22643, "user_id": 1838266, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/QoiU2.jpg?s=128&g=1", "display_name": "Arne Mertz", "link": "https://stackoverflow.com/users/1838266/arne-mertz"}, "reply_to_user": {"reputation": 3297, "user_id": 1436796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a4b86c1c90bc06112c2c069b58bf995?s=128&d=identicon&r=PG", "display_name": "Marc van Leeuwen", "link": "https://stackoverflow.com/users/1436796/marc-van-leeuwen"}, "edited": false, "score": 2, "creation_date": 1422549735, "post_id": 27954672, "comment_id": 44803153, "body": "@MarcvanLeeuwen you might want to read about type erasure, which is essentially what is going on behind the scenes in <code>std::function</code>. IOW, yes, <code>std::function</code> holds a dynamically allocated object with a virtual destructor that contains. The dynamic allocation of that object can be customized via one of the constructors taking a <code>std::allocator_arg_t</code>: <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function/function\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/functional/function/functi&zwnj;&#8203;on</a>"}], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": true, "score": 22, "last_activity_date": 1478096646, "last_edit_date": 1478096646, "creation_date": 1421279837, "answer_id": 27954672, "question_id": 27954634, "link": "https://stackoverflow.com/questions/27954634/where-are-lambda-captured-variables-stored/27954672#27954672", "title": "Where are lambda captured variables stored?", "body": "<p>It is stored within the closure, which - in your code - is then stored within <code>std::function&lt;int()&gt; &amp;fun</code>.</p>\n\n<p>A lambda generates what's equivalent to an instance of a compiler generated class.</p>\n\n<p>This code:</p>\n\n<pre><code>[=](){return val;}\n</code></pre>\n\n<p>Generates what's effectively equivalent to this... this would be the \"closure\":</p>\n\n<pre><code>struct UNNAMED_TYPE\n{\n  UNNAMED_TYPE(int val) : val(val) {}\n  const int val;\n  // Above, your [=] \"equals/copy\" syntax means \"find what variables\n  //           are needed by the lambda and copy them into this object\"\n\n  int operator() () const { return val; }\n  // Above, here is the code you provided\n\n} (val);\n// ^^^ note that this DECLARED type is being INSTANTIATED (constructed) too!!\n</code></pre>\n"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 3, "last_activity_date": 1421279936, "creation_date": 1421279936, "answer_id": 27954691, "question_id": 27954634, "link": "https://stackoverflow.com/questions/27954634/where-are-lambda-captured-variables-stored/27954691#27954691", "title": "Where are lambda captured variables stored?", "body": "<p>The value of a lambda expression is an object of <em>class</em> type, and</p>\n\n<blockquote>\n  <p>For each entity\n  captured by copy, an unnamed non-static data member is declared in the closure type.</p>\n</blockquote>\n\n<p>([expr.prim.lambda]/14 in C++11)</p>\n\n<p>That is, the object created by the lambda</p>\n\n<pre><code>[=](){return val;}\n</code></pre>\n\n<p>actually contains a non-static member of <code>int</code> type, whose value is 6, and this object is copied into the <code>std::function</code> object.</p>\n"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": false, "score": 8, "last_activity_date": 1421280643, "last_edit_date": 1421280643, "creation_date": 1421279979, "answer_id": 27954699, "question_id": 27954634, "link": "https://stackoverflow.com/questions/27954634/where-are-lambda-captured-variables-stored/27954699#27954699", "title": "Where are lambda captured variables stored?", "body": "<p>The so-called <em>closure type</em> (which is the class type of the lambda expression) has members for each captured entity. Those members are objects for capture by value, and references for capture by reference. They are initialized with the captured entities and live independently within the <em>closure object</em> (the particular object of closure type that this lambda designates).</p>\n\n<p>The unnamed member that corresponds to the value capture of <code>val</code> is initialized with <code>val</code> and accessed from the inside of the closure types <code>operator()</code>, which is fine. The closure object may easily have been copied or moved multiple times until that happens, and that's fine too - closure types have implicitly defined move and copy constructors just as normal classes do.<br>\nHowever, when capturing by reference, the lvalue-to-rvalue conversion that is implicitly performed when calling <code>fun</code> in <code>main</code> induces undefined behavior as <strong>the object which the reference member referred to has already been destroyed</strong> - i.e. we are using a dangling reference.</p>\n"}, {"comments": [{"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1421283581, "post_id": 27954711, "comment_id": 44305396, "body": "Unlike capturing by copy, implementations don&#39;t even need to declare data members when capturing by reference ([expr.prim.lambda]/16) as they don&#39;t need to offer any guarantees for its lifetime."}], "owner": {"reputation": 34083, "user_id": 1287251, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/IQkBy.png?s=128&g=1", "display_name": "Cornstalks", "link": "https://stackoverflow.com/users/1287251/cornstalks"}, "is_accepted": false, "score": 17, "last_activity_date": 1421280091, "creation_date": 1421280091, "answer_id": 27954711, "question_id": 27954634, "link": "https://stackoverflow.com/questions/27954634/where-are-lambda-captured-variables-stored/27954711#27954711", "title": "Where are lambda captured variables stored?", "body": "<p>Lambdas in C++ are really just \"anonymous\" struct functors. So when you write this:</p>\n\n<pre><code>int val = 6;\nfun = [=](){return val;};\n</code></pre>\n\n<p>What the compiler is translating that into is this:</p>\n\n<pre><code>int val = 6;\nstruct __anonymous_struct_line_8 {\n    int val;\n    __anonymous_struct_line_8(int v) : val(v) {}\n\n    int operator() () const {\n        return val; // returns this-&gt;val\n    }\n};\n\nfun = __anonymous_struct_line_8(val);\n</code></pre>\n\n<p>Then, <code>std::function</code> stores that functor via <a href=\"http://www.cplusplus.com/articles/oz18T05o/\">type erasure</a>.</p>\n\n<p>When you use <code>[&amp;]</code> instead of <code>[=]</code>, it changes the struct to:</p>\n\n<pre><code>struct __anonymous_struct_line_8 {\n    int&amp; val; // Notice this is a reference now!\n    ...\n</code></pre>\n\n<p>So now the object stores a reference to the function's <code>val</code> object, which becomes a dangling (invalid) reference after the function exits (and you get undefined behavior).</p>\n"}], "owner": {"reputation": 2108, "user_id": 2159051, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/G5pGZ.png?s=128&g=1", "display_name": "BWG", "link": "https://stackoverflow.com/users/2159051/bwg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3628, "favorite_count": 3, "accepted_answer_id": 27954672, "answer_count": 4, "score": 26, "last_activity_date": 1478096646, "creation_date": 1421279596, "question_id": 27954634, "link": "https://stackoverflow.com/questions/27954634/where-are-lambda-captured-variables-stored", "title": "Where are lambda captured variables stored?", "body": "<p>How is it possible that this example works? It prints <code>6</code>:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\nvoid scopeIt(std::function&lt;int()&gt; &amp;fun) {\n    int val = 6;\n    fun = [=](){return val;}; //&lt;-- this\n}\n\nint main() {\n    std::function&lt;int()&gt; fun;\n\n    scopeIt(fun);\n\n    cout &lt;&lt; fun();\n\n    return 0;\n}\n</code></pre>\n\n<p>Where is the value <code>6</code> stored after <code>scopeIt</code> is done being called? If I replace the <code>[=]</code> with a <code>[&amp;]</code>, it prints <code>0</code> instead of <code>6</code>.</p>\n"}, {"tags": ["c++", "yaml-cpp"], "answers": [{"owner": {"reputation": 29797, "user_id": 112, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8cff214f16c7c8e73244a8ed8dea7e0e?s=128&d=identicon&r=PG", "display_name": "Jesse Beder", "link": "https://stackoverflow.com/users/112/jesse-beder"}, "is_accepted": true, "score": 1, "last_activity_date": 1421323309, "creation_date": 1421323309, "answer_id": 27962967, "question_id": 27954458, "link": "https://stackoverflow.com/questions/27954458/yaml-cpp-invalidnode-exception/27962967#27962967", "title": "yaml-cpp InvalidNode exception", "body": "<p>When iterating over a sequence, the iterator just needs to be dereferenced:</p>\n\n<pre><code>for (YAML::const_iterator it = pb.begin(); it != pb.end(); ++it) {\n  YAML::Node element = *it;\n  // do something with element\n}\n</code></pre>\n\n<p>The <code>it-&gt;first</code> and <code>it-&gt;second</code> pattern is used for iterating over maps:</p>\n\n<pre><code>for (YAML::const_iterator it = pb.begin(); it != pb.end(); ++it) {\n  YAML::Node key = it-&gt;first;\n  YAML::Node value = it-&gt;second;\n  // do something with key, value\n}\n</code></pre>\n\n<p>Since YAML nodes can be either scalars, sequences, or maps, you have to check the type (like you're doing) before you do any sort of iteration (unless you know exactly the structure of the input YAML).</p>\n"}], "owner": {"reputation": 860, "user_id": 355761, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/S6G2h.jpg?s=128&g=1", "display_name": "joebalt", "link": "https://stackoverflow.com/users/355761/joebalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1275, "favorite_count": 0, "accepted_answer_id": 27962967, "answer_count": 1, "score": 1, "last_activity_date": 1421323309, "creation_date": 1421278522, "question_id": 27954458, "link": "https://stackoverflow.com/questions/27954458/yaml-cpp-invalidnode-exception", "title": "yaml-cpp InvalidNode exception", "body": "<p>I am attempting to use yaml-cpp to process the following yaml:</p>\n\n<pre><code>- hosts: localhost\n  tasks:\n    - shell: whoami\n    - shell: hostname\n</code></pre>\n\n<p>I have a constraint that I do not control the yaml coming in. It seems overly complex to me, but I have to process that.</p>\n\n<p>Looking at <a href=\"http://yaml-online-parser.appspot.com/?yaml=-+hosts%3A+localhost%0A++tasks%3A%0A++++-+shell%3A+whoami%0A++++-+shell%3A+hostname&amp;type=canonical_yaml\" rel=\"nofollow\">http://yaml-online-parser.appspot.com/?yaml=-+hosts%3A+localhost%0A++tasks%3A%0A++++-+shell%3A+whoami%0A++++-+shell%3A+hostname&amp;type=canonical_yaml</a></p>\n\n<p>shows the yaml as good.</p>\n\n<p>I am using the following code to try to get to the tasks:</p>\n\n<pre><code>YAML::Node pb = YAML::LoadFile(str_pbFilename);\n\nprintNodeInfo(pb);\n\nif (pb.Type() == YAML::NodeType::Sequence)\n{\n    int count = 0;\n    for (YAML::const_iterator it = pb.begin(); it != pb.end(); ++it)\n    {\n        if (it-&gt;first)\n        {\n            cout &lt;&lt; \"found first\" &lt;&lt; endl;\n        }\n        count++;\n        cout &lt;&lt; \"count = \" &lt;&lt; count &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>exception when I attempt to access anything it-> related (first or second) inside the iteration for loop:</p>\n\n<pre><code>Unhandled exception at 0x7524C41F in ProcYaml.exe: Microsoft C++ exception: YAML::InvalidNode at memory location 0x0040F748.\n</code></pre>\n\n<p>printNodeInfo(pb) shows:</p>\n\n<pre><code>  Node size: 1\n  Node Tag: ?\n  Node is of Type: Sequence\n</code></pre>\n\n<p>I am uncertain what I need to do to process this first Sequence node and get into the elements that I need: the hosts and the tasks to process for each host.</p>\n\n<p>count prints out as 1 when I remove the exception throwing code (if (it->first) {...})</p>\n\n<p>I guess my main misunderstanding in this is: How am I to do anything with pb if I cannot iterate over it? I am new to yaml and yaml-cpp, so I am sure there is a noob factor here.</p>\n"}, {"tags": ["c++", "opencv", "object", "scale", "detection"], "owner": {"reputation": 325, "user_id": 2848097, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c6ceb14ea0c78bd19dca04bf7fd4322b?s=128&d=identicon&r=PG&f=1", "display_name": "Janz Dott", "link": "https://stackoverflow.com/users/2848097/janz-dott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1421278196, "creation_date": 1421278196, "question_id": 27954416, "link": "https://stackoverflow.com/questions/27954416/opencv-scale-invariant-detection-of-multiple-instances-of-the-same-object-in-o", "title": "OpenCV - Scale Invariant Detection of Multiple Instances of the Same Object in One Image?", "body": "<p>I have one query image.  There can be 0-4 instances of this query image in the search image.  They can be at different scales, but never rotated.  I need to detect all instances of the query image, along with the bounding boxes that contain them.</p>\n\n<p>One solution I've thought of is to use feature detection and use knnMatch() with k = 4 to find the 4 best matches for each feature.  Then use some type of cluster algorithm to group the matches together.  The problem with this is that the instances of the query image can be adjacent to eachother.  In that case, a cluster algorithm couldn't group the different matches for each instance.</p>\n\n<p>Does anyone know how I can accomplish this?  I have almost no experience with OpenCV, so I'm not sure what my options are.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "performance", "gcc", "visual-studio-2013", "openmp"], "comments": [{"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 1, "creation_date": 1421278271, "post_id": 27954382, "comment_id": 44303803, "body": "If I were a smart compiler, I&#39;d convert that inner loop into <code>tans += 10000</code>. What assembly does Visual Studio generate?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1421279145, "post_id": 27954382, "comment_id": 44304085, "body": "I&#39;m rather surprised that both compilers wouldn&#39;t reduce the entirety of that code to <code>printf(&quot;%d\\n&quot;, 100000000);</code>.  What optimization levels were you using on each?"}, {"owner": {"reputation": 113, "user_id": 2738119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b8919998d0b6553c66876f1e23fbcf?s=128&d=identicon&r=PG", "display_name": "ftfish", "link": "https://stackoverflow.com/users/2738119/ftfish"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1421279805, "post_id": 27954382, "comment_id": 44304320, "body": "@DrewDormann -O2 (and -O3 the same) for GCC and Release for VS2013"}, {"owner": {"reputation": 113, "user_id": 2738119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b8919998d0b6553c66876f1e23fbcf?s=128&d=identicon&r=PG", "display_name": "ftfish", "link": "https://stackoverflow.com/users/2738119/ftfish"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1421280332, "post_id": 27954382, "comment_id": 44304472, "body": "@Mysticial I fail to decipher the assembly code, but it&#39;s here: <a href=\"https://gist.github.com/ftfish/f8ffdb9106b82ae63925\" rel=\"nofollow noreferrer\">gist.github.com/ftfish/f8ffdb9106b82ae63925</a>"}, {"owner": {"reputation": 113, "user_id": 2738119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b8919998d0b6553c66876f1e23fbcf?s=128&d=identicon&r=PG", "display_name": "ftfish", "link": "https://stackoverflow.com/users/2738119/ftfish"}, "reply_to_user": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "edited": false, "score": 0, "creation_date": 1421281467, "post_id": 27954382, "comment_id": 44304840, "body": "@Mysticial it seems VS is actually doing the reduction, but still runs instantly. Have I read it correctly?"}], "answers": [{"comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 0, "creation_date": 1421279282, "post_id": 27954576, "comment_id": 44304133, "body": "Even for a unknown input, the compiler optimizes it to &quot;add 1000000000&quot;. <a href=\"http://coliru.stacked-crooked.com/a/bcbe6c80779d0543\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/bcbe6c80779d0543</a>"}, {"owner": {"reputation": 113, "user_id": 2738119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b8919998d0b6553c66876f1e23fbcf?s=128&d=identicon&r=PG", "display_name": "ftfish", "link": "https://stackoverflow.com/users/2738119/ftfish"}, "edited": false, "score": 0, "creation_date": 1421280524, "post_id": 27954576, "comment_id": 44304538, "body": "Thank you first. Could you please have a check of the assembly code generated by VS2013 in the comment on the question? I&#39;m not sure whether VS is able to optimize even if the OMP line is there."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 113, "user_id": 2738119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b8919998d0b6553c66876f1e23fbcf?s=128&d=identicon&r=PG", "display_name": "ftfish", "link": "https://stackoverflow.com/users/2738119/ftfish"}, "edited": false, "score": 0, "creation_date": 1421280758, "post_id": 27954576, "comment_id": 44304626, "body": "@ftfish I do not have or use any Microsoft Compiler. The results should be similar if not equal to what gcc does in simple cases like this. The point is that firing up 100000 parallel loops takes longer than one addition (surprise, surprise :D ). What we can learn from this: If in doubt, implement both and measure what is faster."}, {"owner": {"reputation": 113, "user_id": 2738119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b8919998d0b6553c66876f1e23fbcf?s=128&d=identicon&r=PG", "display_name": "ftfish", "link": "https://stackoverflow.com/users/2738119/ftfish"}, "edited": false, "score": 0, "creation_date": 1421281354, "post_id": 27954576, "comment_id": 44304809, "body": "Thanks for your effort. I&#39;m not quite convinced though. As far as I can tell from the assembly code generated WITH the OMP line (as said, the code is given in the COMMENT on the question), VS is actually doing the reduction, and still runs instantly. Since the code is highly simplified, I feel that the only conclusion that can be drawn is that VS optimizes better than G++ in this case.."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1421305028, "post_id": 27954576, "comment_id": 44310406, "body": "You could file a PR in gcc&#39;s bugzilla for the fact that openmp disables this optimization."}], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 2, "last_activity_date": 1570744558, "last_edit_date": 1570744558, "creation_date": 1421279187, "answer_id": 27954576, "question_id": 27954382, "link": "https://stackoverflow.com/questions/27954382/gcc-openmp-parallel-for-reduction-much-slower-than-visual-studio/27954576#27954576", "title": "GCC OpenMP parallel for reduction MUCH slower than Visual Studio", "body": "<p>If your real code is about as simple as this code, you most likely lose a lot of opportunity for compiler optimization. <code>g++ -O3</code> generates the following assembly for the code you posted minus the OMP line:</p>\n\n<pre><code>.cfi_startproc\nsubq    $8, %rsp\n.cfi_def_cfa_offset 16\nmovl    $1000000000, %esi\nmovl    $.LC0, %edi\nxorl    %eax, %eax\ncall    printf\nxorl    %eax, %eax\naddq    $8, %rsp\n.cfi_def_cfa_offset 8\nret\n</code></pre>\n\n<p>As you see, absolutely <em>nothing</em>  here is calculated at runtime, the loops are <em>both</em>  completely optimized away. Thus, the program finishes instantly. If you let the computation happen at runtime, you obviously increase it. <a href=\"http://coliru.stacked-crooked.com/a/df49007a2716b497\" rel=\"nofollow noreferrer\">Here</a> you can see that adding the OMP line actually makes computation happen at runtime, the generated assembly is too long to be pasted here.</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>I tested the OMP code with both g++ and clang++ and can reproduce your problem (g++ ca. 0.3s, clang++ 0.006s, i.e. instant). clang does optimize both loops out, even with the OMP line. Since your code is perfectly fine, this is the fault of gcc's optimizer. It is now not clear if the gcc guys screwed up or if they followed a rational like \"if the user writes OMP, they should have found out by measuring that the parallel version is faster. Do not optimize that away.\" I would put my money on the latter, but go and visit the gcc bugzilla if you want to make sure.</p>\n\n<p>What remains is the conclusion I mentioned in the comment: <strong>Measure everything.</strong></p>\n\n<p>In this special case: If you want to target gcc and VC, just measure both variants in both environments and then ship the better one to your customer. If you feel like this is a gcc performance bug, you can still write a bug report for them.</p>\n\n<p>A last remark:</p>\n\n<p>If your real code is a double-loop like here, consider parallelizing the most outer one to save expensive OMP start-up procedures (but measure(!), this might of course be not helpful.)</p>\n"}], "owner": {"reputation": 113, "user_id": 2738119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87b8919998d0b6553c66876f1e23fbcf?s=128&d=identicon&r=PG", "display_name": "ftfish", "link": "https://stackoverflow.com/users/2738119/ftfish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1225, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1570744558, "creation_date": 1421278003, "last_edit_date": 1421281579, "question_id": 27954382, "link": "https://stackoverflow.com/questions/27954382/gcc-openmp-parallel-for-reduction-much-slower-than-visual-studio", "title": "GCC OpenMP parallel for reduction MUCH slower than Visual Studio", "body": "<p>A friend of mine and I have encountered a performance problem regarding <code>parallel for reduction</code> in GCC.</p>\n\n<p>The code:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nint main() {\n    int tans = 0;\n    for (int i = 0; i &lt; 100000; ++i)\n        #pragma omp parallel for reduction(+:tans)\n        for (int id = 0; id &lt; 10000; ++id) {\n            tans++;\n        }\n    printf(\"%d\\n\", tans);\n}\n</code></pre>\n\n<p>(This useless code is only used to demonstrate the problem)</p>\n\n<p>When compiled with GCC (version 4.9.2 (tdm64-1)) and run on my 4-core 8-thread system (Win 8.1 64b), the code runs about 5s, while with <code>num_threads(1)</code> it runs only 0.5s. </p>\n\n<p>I have also tried the same code on a 24-core system (gcc version 4.8.2 (Ubuntu 4.8.2-19ubuntu1)), the parallel version is still very slow, and the running time is very unstable, ranging from 1s to 10s.</p>\n\n<p>With Visual Studio 2013, the code always finishes almost instantly. The generated assembly code can be found here: <a href=\"https://gist.github.com/ftfish/f8ffdb9106b82ae63925\" rel=\"nofollow\">https://gist.github.com/ftfish/f8ffdb9106b82ae63925</a></p>\n\n<p>What have I done wrong? Is it because of the overhead of <code>parallel for reduction</code>? Why is Visual Studio performing better? Thank you in advance.</p>\n"}, {"tags": ["c++", "boost", "boost-geometry"], "answers": [{"comments": [{"owner": {"reputation": 1391, "user_id": 963258, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/97746973be6a7887f469ce96d08c5e19?s=128&d=identicon&r=PG", "display_name": "jzepeda", "link": "https://stackoverflow.com/users/963258/jzepeda"}, "edited": false, "score": 0, "creation_date": 1421286675, "post_id": 27955078, "comment_id": 44306128, "body": "Yes, I&#39;m using the same code. I ran your example in my environment your function is outputting false, true. I would&#39;ve expected false, false though since the results shouldnt be empty :s"}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1421282523, "creation_date": 1421282523, "answer_id": 27955078, "question_id": 27954373, "link": "https://stackoverflow.com/questions/27954373/using-boostgeometrydifference-why-am-i-getting-an-empty-result-when-using-m/27955078#27955078", "title": "Using boost::geometry::difference, why am I getting an empty result when using multi_polygon and not with a regular polygon?", "body": "<p>I get no \"disconnect\". Are you sure you're using the same code? If so, see if upgrading Boost helps:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/75f14cde0da0a713\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/geometry.hpp&gt;\n#include &lt;boost/geometry/geometries/geometries.hpp&gt;\n#include &lt;boost/geometry/geometries/point_xy.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\ntypedef boost::geometry::model::d2::point_xy&lt;int16_t, boost::geometry::cs::cartesian&gt; Point_t;\ntypedef boost::geometry::model::polygon&lt;Point_t&gt; Polygon_t;\ntypedef boost::geometry::model::multi_polygon&lt;Polygon_t&gt; MultiPolygon_t;\n\nint main() {\n\n    Polygon_t poly1;\n    {\n        std::vector&lt;Point_t&gt; points1;\n        points1.push_back(Point_t(1473, 627));\n        points1.push_back(Point_t(1473, 1155));\n        points1.push_back(Point_t(908,  1155));\n        points1.push_back(Point_t(908,  627));\n\n        boost::geometry::assign_points(poly1, points1);\n        boost::geometry::correct(poly1);\n    }\n\n    Polygon_t poly2;\n    {\n        std::vector&lt;Point_t&gt; points2;\n        points2.push_back(Point_t(1956, 956));\n        points2.push_back(Point_t(1956, 1028));\n        points2.push_back(Point_t(115,  1023));\n        points2.push_back(Point_t(127,  951));\n\n        boost::geometry::assign_points(poly2, points2);\n        boost::geometry::correct(poly2);\n    }\n\n    //////////////////////////////////\n    //\n    MultiPolygon_t multiPoly;\n    multiPoly.push_back(poly1);\n\n    MultiPolygon_t resultMulti;\n    MultiPolygon_t resultSimple;\n\n    boost::geometry::difference(multiPoly, poly2, resultMulti);\n    boost::geometry::difference(poly1,     poly2, resultSimple);\n\n    bool bMultiEmpty  = resultMulti.empty();\n    bool bSimpleEmpty = resultSimple.empty();\n\n    std::cout &lt;&lt; std::boolalpha &lt;&lt; bSimpleEmpty &lt;&lt; \", \" &lt;&lt; bMultiEmpty &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>true, true\n</code></pre>\n"}, {"owner": {"reputation": 1391, "user_id": 963258, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/97746973be6a7887f469ce96d08c5e19?s=128&d=identicon&r=PG", "display_name": "jzepeda", "link": "https://stackoverflow.com/users/963258/jzepeda"}, "is_accepted": false, "score": 1, "last_activity_date": 1421353593, "creation_date": 1421353593, "answer_id": 27972373, "question_id": 27954373, "link": "https://stackoverflow.com/questions/27954373/using-boostgeometrydifference-why-am-i-getting-an-empty-result-when-using-m/27972373#27972373", "title": "Using boost::geometry::difference, why am I getting an empty result when using multi_polygon and not with a regular polygon?", "body": "<p>It looks like the problem is an overflow in the boost libraries when using 16 bit ints as the template parameter for coordinate types. It seems to work perfectly when using doubles.</p>\n"}], "owner": {"reputation": 1391, "user_id": 963258, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/97746973be6a7887f469ce96d08c5e19?s=128&d=identicon&r=PG", "display_name": "jzepeda", "link": "https://stackoverflow.com/users/963258/jzepeda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1421353593, "creation_date": 1421277971, "last_edit_date": 1421282569, "question_id": 27954373, "link": "https://stackoverflow.com/questions/27954373/using-boostgeometrydifference-why-am-i-getting-an-empty-result-when-using-m", "title": "Using boost::geometry::difference, why am I getting an empty result when using multi_polygon and not with a regular polygon?", "body": "<p>Given the following code:</p>\n\n<pre><code>typedef boost::geometry::model::d2::point_xy&lt;int16_t, boost::geometry::cs::cartesian&gt; Point_t;\ntypedef boost::geometry::model::polygon&lt;Point_t&gt; Polygon_t;\ntypedef boost::geometry::model::multi_polygon&lt;Polygon_t&gt; MultiPolygon_t;\n\nstd::vector&lt;Point_t&gt; points1;\npoints1.push_back(Point_t(1473, 627));\npoints1.push_back(Point_t(1473, 1155));\npoints1.push_back(Point_t(908, 1155));\npoints1.push_back(Point_t(908, 627));\n\nPolygon_t poly1;\nboost::geometry::assign_points(poly1, points1);\nboost::geometry::correct(poly1);\n\nMultiPolygon_t multiPoly;\n\nmultiPoly.push_back(poly1);\n\nstd::vector&lt;Point_t&gt; points2;\npoints2.push_back(Point_t(1956, 956));\npoints2.push_back(Point_t(1956, 1028));\npoints2.push_back(Point_t(115, 1023));\npoints2.push_back(Point_t(127, 951));\n\nPolygon_t poly2;\nboost::geometry::assign_points(poly2, points2);\nboost::geometry::correct(poly2);\n\nMultiPolygon_t resultMulti;\nMultiPolygon_t resultSimple;\n\nboost::geometry::difference(multiPoly, poly2, resultMulti);\nboost::geometry::difference(poly1, poly2, resultSimple);\n\nbool bMultiEmpty = resultMulti.empty();\nbool bSimpleEmpty = resultSimple.empty();\n\nEAGLE_ASSERT(!bSimpleEmpty);\nEAGLE_ASSERT(!bMultiEmpty);\n</code></pre>\n\n<p>I get the results:</p>\n\n<pre><code>bSimpleEmpty -&gt; FALSE\nbMultiEmpty -&gt; TRUE\n</code></pre>\n\n<p>I would expect the result to be non-empty in both cases... the only thing in the multipolygon is the same polygon is use for the <code>bSimpleEmpty</code> calculation. Have I fallen to a misconception?</p>\n\n<p>Using Boost 1.51</p>\n\n<p>Please advise!</p>\n"}, {"tags": ["c++", "makefile"], "answers": [{"comments": [{"owner": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "edited": false, "score": 0, "creation_date": 1421278451, "post_id": 27954396, "comment_id": 44303863, "body": "Obviously, I want the makefile to be as labourless as possible - so I&#39;d like to escape from manual typing of dependencies. The search functions won&#39;t work, because in this scenario, I have all the files in one directory, with .o files for every executable mixed together. And the last solution - packing all .o files to a single library, would also require me to rebuild the whole project, even if just one file is affected, am I right?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "edited": false, "score": 0, "creation_date": 1421278642, "post_id": 27954396, "comment_id": 44303914, "body": "@akrasuski1 <i>&quot;I have all the files in one directory, with .o files for every executable mixed together.&quot;</i> That&#39;s probably the flaw with your approach. Why not having one directory for the common stuff, and others that just contain the stuff needed for the several TARGET executables. Good organization of source code makes up more than half of the rent. <i>&quot;would also require me to rebuild the whole project, even if just one file is affected, am I right?&quot;</i> Depends on what actually was changed. Usually it&#39;s only necessary to rebuild the files affected, as you&#39;re already using <code>.d</code> dependencies."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "edited": false, "score": 2, "creation_date": 1421278878, "post_id": 27954396, "comment_id": 44303993, "body": "@akrasuski1: No, the library takes a dependency on all the .o files, but the makefile can still rebuild only the sources that changed, preserving the other .o files that are still valid.  Making multiple .o files into a library is a very cheap operation compared to either compiling or linking."}, {"owner": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1421279106, "post_id": 27954396, "comment_id": 44304070, "body": "@BenVoigt Ok, I never really created a library as such, so I thought it is more like a &quot;big-o-file-of-all-the-files&quot; requiring a full rebuild rather than just a package of actual, single .o files. Thanks for clarification."}], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1421278099, "creation_date": 1421278099, "answer_id": 27954396, "question_id": 27954273, "link": "https://stackoverflow.com/questions/27954273/is-there-a-way-to-create-makefile-that-uses-only-required-o-files/27954396#27954396", "title": "Is there a way to create makefile that uses only required .o files?", "body": "<blockquote>\n  <p><em>\"Is there a way to list .o files that are required by specific program?\"</em> </p>\n</blockquote>\n\n<p>Yeah. List them (or at least the required sources, and substitute) manually.</p>\n\n<p>Also directory search functions could come in handy, but that depends on how your project structure actually looks like.</p>\n\n<p>The easiest way IMHO, is to bundle <code>.o</code> files to libraries, the linker will automatically pick what's actually needed for the specific TARGETS.</p>\n"}, {"comments": [{"owner": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "edited": false, "score": 0, "creation_date": 1421279628, "post_id": 27954533, "comment_id": 44304260, "body": "Thanks for providing actual code to use. I&#39;ll try to run it and see if it works correctly."}, {"owner": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "edited": false, "score": 0, "creation_date": 1421280796, "post_id": 27954533, "comment_id": 44304644, "body": "Unfortunately, it gives me a lot of &quot;undefined reference&quot; errors. Could you check if the commands generated by makefile are corect? <a href=\"http://pastebin.com/Xkri6SXb\" rel=\"nofollow noreferrer\">pastebin.com/Xkri6SXb</a>"}, {"owner": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "edited": false, "score": 0, "creation_date": 1421281814, "post_id": 27954533, "comment_id": 44304940, "body": "Thanks for a thorough explanation - I had no idea order of objects matters. The makefile I created with your help works correctly now. I edited post for future reference."}, {"owner": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "edited": false, "score": 0, "creation_date": 1421283042, "post_id": 27954533, "comment_id": 44305247, "body": "Just one more thing popped into my head - if the linker skips unnecessary object files, wasn&#39;t my original solution equally efficient as this one? (The original solution was to call g++ with all the object files, whether needed or not)"}, {"owner": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "edited": false, "score": 0, "creation_date": 1421367639, "post_id": 27954533, "comment_id": 44343345, "body": "BTW, doesn&#39;t this solution rebuild the executable if library changed? And the library changes whenever any object file changes, so we are back at the beginning, where everything depends on every change :l"}], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 2, "last_activity_date": 1421278925, "creation_date": 1421278925, "answer_id": 27954533, "question_id": 27954273, "link": "https://stackoverflow.com/questions/27954273/is-there-a-way-to-create-makefile-that-uses-only-required-o-files/27954533#27954533", "title": "Is there a way to create makefile that uses only required .o files?", "body": "<p>The way to do that is to build all object files except those with a <code>main()</code> function into a library and link with the library. Building a library is something like this:</p>\n\n<pre><code>libfoo.a: $(LIBOFILES)\n    ar rcu $@ $(LIBOFILES)\n    ranlib $@\n</code></pre>\n\n<p>You'd then also set the Makefile to use the library:</p>\n\n<pre><code>LDFLAGS = -L.\nLDLIBS  = -lfoo\n</code></pre>\n"}], "owner": {"reputation": 752, "user_id": 2805344, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/erqq7.png?s=128&g=1", "display_name": "akrasuski1", "link": "https://stackoverflow.com/users/2805344/akrasuski1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 27954533, "answer_count": 2, "score": 0, "last_activity_date": 1421281987, "creation_date": 1421277531, "last_edit_date": 1421281987, "question_id": 27954273, "link": "https://stackoverflow.com/questions/27954273/is-there-a-way-to-create-makefile-that-uses-only-required-o-files", "title": "Is there a way to create makefile that uses only required .o files?", "body": "<p>I want to create a makefile that compiles <strong>more than one</strong> program at once. There may be some .cpp files that are used by all of them, and some .cpp files that are used by just one exclusively. The current makefile I have is following:</p>\n\n<pre><code>CPPFLAGS = -std=c++14 -MMD -pthread \nTARGETS = server.cpp client.cpp\n\nSRC = $(wildcard *.cpp)\nNON_TARGET_SRC = $(filter-out $(TARGETS),$(SRC))\n\nall: $(TARGETS:%.cpp=%)\n\nclean:\n    rm -rf *.o\n    rm -rf *.d\n\n$(TARGETS:%.cpp=%): % : $(NON_TARGET_SRC:%.cpp=%.o) %.o ###redundant?\n    g++ $(CPPFLAGS) -o $@ $^\n\n-include $(SRC:%.cpp=%.d)\n</code></pre>\n\n<p>Server.cpp and client.cpp are names of files that contain main() function and are supposed to be compiled to executable, rather than .o file. While the above makefile works, I think it does work that is redundant, as it does the final compilation with using all the non-target .o files, while it probably should use only the needed ones (or does the linker pick the needed ones on itself, making such a command's overhead negligible?). So, the question is:</p>\n\n<p><strong>Is there a way to list .o files that are required by specific program?</strong></p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>The following code seems to work just fine, thanks to packing all the object files into one library file.</p>\n\n<pre><code>CPPFLAGS = -std=c++14 -MMD -pthread \nTARGETS = server.cpp client.cpp\n\nLIBRARY_NAME=objects\nLIBRARY_FILE=lib$(LIBRARY_NAME).a\nSRC = $(wildcard *.cpp)\nNON_TARGET_SRC = $(filter-out $(TARGETS),$(SRC))\nLDFLAGS = -L.\nLDLIBS = -l$(LIBRARY_NAME)\n\nall: $(TARGETS:%.cpp=%)\n\nclean:\n    rm -rf *.o\n    rm -rf *.d\n    rm -rf *.a\n\n$(TARGETS:%.cpp=%): % : $(LIBRARY_FILE) %.o\n    g++ $(CPPFLAGS) -o $@ $*.o $(LDFLAGS) $(LDLIBS)\n\n$(LIBRARY_FILE): $(NON_TARGET_SRC:%.cpp=%.o)\n    ar rcu $@ $(NON_TARGET_SRC:%.cpp=%.o)\n    ranlib $@\n\n-include $(SRC:%.cpp=%.d)\n</code></pre>\n"}, {"tags": ["c++", "windows", "assembly", "visual-studio-2013"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 11, "creation_date": 1421277157, "post_id": 27954167, "comment_id": 44303427, "body": "According to your link, that isn&#39;t assembler for any particular CPU.  It&#39;s pseudocode."}, {"owner": {"reputation": 55767, "user_id": 219159, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cxM6H.jpg?s=128&g=1", "display_name": "Seva Alekseyev", "link": "https://stackoverflow.com/users/219159/seva-alekseyev"}, "edited": false, "score": 6, "creation_date": 1421277321, "post_id": 27954167, "comment_id": 44303490, "body": "I think the assignment is to write a player in assembly from scratch, not in C++ with inline assembly. That said, the mentioned tutorial is pointless - it&#39;s about direct hardware access, that will never work in Windows."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1421304680, "post_id": 27954167, "comment_id": 44310275, "body": "It seems unlikely to me that you&#39;d get a DOS executable out of Visual Studio 2013 (though I&#39;m not going to rule out the possibility). Reading and writing ports directly in a Windows executable is probably going to fail."}, {"owner": {"reputation": 19, "user_id": 4455507, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000473814176/picture?type=large", "display_name": "Raul Tuozzo", "link": "https://stackoverflow.com/users/4455507/raul-tuozzo"}, "edited": false, "score": 0, "creation_date": 1421357802, "post_id": 27954167, "comment_id": 44339541, "body": "i just need the &quot;play&quot;, &quot;pause&quot;, &quot;stop&quot;, &quot;next song&quot; and &quot;previous song&quot; functions in assembly code, the rest i will do it in c++, i&#39;ll make an interface too and all, but those specific functions must be in assembly code, like turning on the speaker and calculating the song duration but i have no idea on how to start"}], "owner": {"reputation": 19, "user_id": 4455507, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000473814176/picture?type=large", "display_name": "Raul Tuozzo", "link": "https://stackoverflow.com/users/4455507/raul-tuozzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1421277063, "creation_date": 1421276891, "last_edit_date": 1421277063, "question_id": 27954167, "link": "https://stackoverflow.com/questions/27954167/how-to-do-inline-assembler-on-c", "title": "How to do inline assembler on c++?", "body": "<p>im trying to create a .wav player on c++ using assembler for an assignment, i found this tutorial on how to turn the speakers on and off: <a href=\"http://fly.srk.fer.hr/GDM/articles/sndmus/speaker1.html\" rel=\"nofollow\">http://fly.srk.fer.hr/GDM/articles/sndmus/speaker1.html</a></p>\n\n<p>but when i try to do it on c++ using \"__asm{}\" i get some errors... this is my code:</p>\n\n<pre><code>int main(){\n    __asm{\n        OUT 43h, B6h\n        OUT 42h, 54\n        OUT 42h, 124\n        VALUE = IN(61h)\n        VALUE = VALUE OR 3  \n        OUT 61h, VALUE\n    }\n}   \n</code></pre>\n\n<p>when i try to run it i get some errors like:</p>\n\n<pre><code>error C2400: inline assembler syntax error in 'opcode';found 'constant'    \nerror C2400: inline assembler syntax error in 'opcode';dounf 'bad token'\n</code></pre>\n\n<p>what am i doing wrong? </p>\n\n<p>im using Visual Studio 2013</p>\n\n<p>Thanks </p>\n"}, {"tags": ["c++", "arrays", "cout"], "answers": [{"comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1421277577, "post_id": 27954125, "comment_id": 44303572, "body": "Remove  <code>int arrSum[5];</code>"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1421284567, "post_id": 27954125, "comment_id": 44305637, "body": "@drescherjm: thanks - fixed now."}, {"owner": {"reputation": 13, "user_id": 4455495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2954c49e19181fdfe69e2abf6dffabc5?s=128&d=identicon&r=PG&f=1", "display_name": "Anonimus", "link": "https://stackoverflow.com/users/4455495/anonimus"}, "edited": false, "score": 0, "creation_date": 1421371930, "post_id": 27954125, "comment_id": 44344436, "body": "Hi, why am I not allowed to pass a pointer (i.e. allowed to use <code>arrSum</code> from main as a pointer to the first element of the array <code>arrSum</code> in <code>addArray</code>)?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 0, "creation_date": 1421372085, "post_id": 27954125, "comment_id": 44344474, "body": "You can return a pointer, but the pointer has to point to valid data. Your local array goes out of scope when the function returns, so your pointer in this case points to invalid data."}, {"owner": {"reputation": 13, "user_id": 4455495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2954c49e19181fdfe69e2abf6dffabc5?s=128&d=identicon&r=PG&f=1", "display_name": "Anonimus", "link": "https://stackoverflow.com/users/4455495/anonimus"}, "edited": false, "score": 0, "creation_date": 1421863011, "post_id": 27954125, "comment_id": 44526770, "body": "I see. But why do the changes to <code>arrSum</code> in the function  <code>addArray</code> affect the value of <code>arrSum</code> in <code>main</code>? Doesn&#39;t the function <code>addArray</code> create a local version of <code>arrSum</code> that overrides the <code>main</code> version?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 13, "user_id": 4455495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2954c49e19181fdfe69e2abf6dffabc5?s=128&d=identicon&r=PG&f=1", "display_name": "Anonimus", "link": "https://stackoverflow.com/users/4455495/anonimus"}, "edited": false, "score": 0, "creation_date": 1421864696, "post_id": 27954125, "comment_id": 44527656, "body": "@Anonimus: in C and related languages arrays are never passed by value - a pointer to the first element is passed, which is effectively pass-by-reference semantics."}], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1421284554, "last_edit_date": 1421284554, "creation_date": 1421276748, "answer_id": 27954125, "question_id": 27954086, "link": "https://stackoverflow.com/questions/27954086/printing-array-in-c-error/27954125#27954125", "title": "Printing array in C++ error", "body": "<p>In <code>addArray</code> you are returning a pointer to a local variable (<code>arrSum</code>), which results in undefined behaviour. You should either pass in the result array from the calling function, or allocate the array dynamically. For example, using the first approach:</p>\n\n<pre><code>void addArray(const int arr1[], const int arr2[], int arrSum[])\n{\n    int r=0;\n    for(int i=4; i&gt;=0; i--)\n    {\n        arrSum[i]=(arr1[i]+arr2[i]+r)%10;\n        r=((arr1[i]+arr2[i]+r)&gt;=10);\n    }\n}\n\nint main()\n{\n    int data1[5]={1,2,3,4,5};\n    int data2[5]={5,6,7,8,9};\n    int arrSum[5];\n\n    addArray(data1,data2,arrSum);\n    cout &lt;&lt; arrSum[0] &lt;&lt; arrSum[1] &lt;&lt; arrSum[2] &lt;&lt; arrSum[3] &lt;&lt; arrSum[4];\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4455495, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2954c49e19181fdfe69e2abf6dffabc5?s=128&d=identicon&r=PG&f=1", "display_name": "Anonimus", "link": "https://stackoverflow.com/users/4455495/anonimus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "closed_date": 1421276790, "answer_count": 1, "score": 0, "last_activity_date": 1421284554, "creation_date": 1421276580, "last_edit_date": 1421276746, "question_id": 27954086, "link": "https://stackoverflow.com/questions/27954086/printing-array-in-c-error", "closed_reason": "Duplicate", "title": "Printing array in C++ error", "body": "<p>Trying to make a program that sums 5 digit numbers by each digit. For some reason when I attempt to print individual elements of an array (one element at a time running 5 times) I get the correct value of 69134. But when I print them together:</p>\n\n<pre><code>int *addArray(int arr1[], int arr2[]){\n\n    int arrSum[5];\n    int r=0;\n    for(int i=4; i&gt;=0; i--){\n        arrSum[i]=(arr1[i]+arr2[i]+r)%10;\n        r=((arr1[i]+arr2[i]+r)&gt;=10);\n    }\n    return arrSum;\n}\n\nint main(){\n\n    using namespace std;\n    int data1[5]={1,2,3,4,5};\n    int data2[5]={5,6,7,8,9};\n    int *arrSum=addArray(data1,data2);\n    cout &lt;&lt; arrSum[0] &lt;&lt; arrSum[1] &lt;&lt; arrSum[2] &lt;&lt; arrSum[3] &lt;&lt; arrSum[4];\n    return 0;\n\n}\n</code></pre>\n\n<p>I end up with the result 60000. Anyone know what is going on?</p>\n"}, {"tags": ["c++", "templates", "c++11", "type-inference"], "comments": [{"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1421276468, "post_id": 27953928, "comment_id": 44303157, "body": "Couldn&#39;t you come up with any better identifiers? At least for this example?"}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1421276661, "post_id": 27953928, "comment_id": 44303237, "body": "which identifiers?  There are a lot!"}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1421276773, "post_id": 27953928, "comment_id": 44303290, "body": "<code>TEq01</code>, or <code>EQ</code>. Common metasyntactic names are <code>foo</code>, <code>bar</code> or <code>foobar</code>. The example code also includes many redundant lines, e.g. those defining members like <code>Eq</code> that are irrelevant to the question itself."}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 1, "creation_date": 1421276855, "post_id": 27953928, "comment_id": 44303315, "body": "ok ill clean it up.  I took it out of my real live code and trimmed out a bunch of stuff, but not enough as you point out.  One sec..."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1421276966, "post_id": 27953928, "comment_id": 44303359, "body": "Thanks, that makes questions more enjoyable to read."}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "reply_to_user": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 0, "creation_date": 1421277201, "post_id": 27953928, "comment_id": 44303441, "body": "i had to leave in more than would be required to just discuss the order of template parameters being maintained, but some answers already refer to the code.  I left the names.  Also, I left the bit where the compiler creates a temp TEq01 from sz, since when I first was asking the question, I thought possibly that might have had something to do with it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421280097, "post_id": 27953928, "comment_id": 44304408, "body": "The question is fine, there&#39;s no need to call everything foo"}], "answers": [{"comments": [{"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1421276243, "post_id": 27953987, "comment_id": 44303067, "body": "The question is how does the compiler know I meant EQ&lt;TEq01, char&gt; when I only provided EQ&lt;TEq01&gt;  it could have assumed I meant EQ&lt;char,TEq01&gt; could it not?"}, {"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "edited": false, "score": 0, "creation_date": 1421276314, "post_id": 27953987, "comment_id": 44303096, "body": "Nope, because the <code>EQ</code> function takes Q first then V. It infers that since &quot;sz&quot; is of type TEq01, it must be that, and since the second arg is of type char, it must be that."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421276344, "post_id": 27953987, "comment_id": 44303109, "body": "Are you asking how the compiler does that (probably too broad) or what the language specs says about this behaviour?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1421276396, "post_id": 27953987, "comment_id": 44303129, "body": "It&#39;s positional. First is first, second is second, and so on."}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1421276602, "post_id": 27953987, "comment_id": 44303211, "body": "Ok, that makes sense.  Wow, i just did an experiment.  I was able to call EQ&lt;,char&gt; and EQ&lt;TEq01,&gt;  Looks like you can specify any subset of the template parameters that way."}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1421277288, "post_id": 27953987, "comment_id": 44303474, "body": "Dang, I gave the answer to someone else just a few minutes ago."}], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 2, "last_activity_date": 1421276681, "last_edit_date": 1421276681, "creation_date": 1421276083, "answer_id": 27953987, "question_id": 27953928, "link": "https://stackoverflow.com/questions/27953928/how-does-c-compiler-infer-template-parameters-when-only-some-provided/27953987#27953987", "title": "How does c++ compiler infer template parameters when only some provided", "body": "<p>That is a templated function. Function templates get their argument types from whatever they are passed. Being able to specify types in the arrows is an optional thing that you don't need to use, unless you are trying to force the use of a particular type.</p>\n\n<p>When you do specify types in the arrows, the compiler goes in order, 1, 2, 3. Any types that you don't explicitly set take types from the function arguments.</p>\n"}, {"comments": [{"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1421276755, "post_id": 27954070, "comment_id": 44303282, "body": "you might add you can leave parameters blank, so EQ&lt;,char&gt; is a way to supply V and leave Q to be deduced."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 3, "creation_date": 1421276900, "post_id": 27954070, "comment_id": 44303336, "body": "@johnnycrash I&#39;m pretty sure that is gramatically ill-formed."}, {"owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 0, "creation_date": 1421277375, "post_id": 27954070, "comment_id": 44303509, "body": "My grammer could be bad!  EQ&lt;,char&gt; compiled though!"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "edited": false, "score": 1, "creation_date": 1421278261, "post_id": 27954070, "comment_id": 44303798, "body": "@johnnycrash Which compiler? If it compiles it&#39;s either a bug or a non-standard extension."}], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": true, "score": 2, "last_activity_date": 1421276481, "creation_date": 1421276481, "answer_id": 27954070, "question_id": 27953928, "link": "https://stackoverflow.com/questions/27953928/how-does-c-compiler-infer-template-parameters-when-only-some-provided/27954070#27954070", "title": "How does c++ compiler infer template parameters when only some provided", "body": "<blockquote>\n  <p>I was just wondering how the compiler knows that TEq01 is class Q instead of class V? I'm using visual studio 2013.</p>\n</blockquote>\n\n<p>The <strong>first template argument</strong> you provide is <strong>the first template parameter</strong>. </p>\n\n<p>The order of template parameters is maintained.</p>\n\n<p>Since you wrote:</p>\n\n<pre><code>template&lt;class Q, class V&gt;\nbool EQ...\n</code></pre>\n\n<p>calling <code>EQ&lt;TEq01&gt;</code> means \"<code>Q</code> is <code>TEq01</code> and <code>V</code> was not supplied, so it must be deduced.\"</p>\n"}], "owner": {"reputation": 4614, "user_id": 121540, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85ca1077b0fc19475f2b45b69e2a1b53?s=128&d=identicon&r=PG", "display_name": "johnnycrash", "link": "https://stackoverflow.com/users/121540/johnnycrash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "accepted_answer_id": 27954070, "answer_count": 2, "score": 2, "last_activity_date": 1421277415, "creation_date": 1421275860, "last_edit_date": 1421277415, "question_id": 27953928, "link": "https://stackoverflow.com/questions/27953928/how-does-c-compiler-infer-template-parameters-when-only-some-provided", "title": "How does c++ compiler infer template parameters when only some provided", "body": "<p>I have this class template:</p>\n\n<pre><code>template&lt;class Q, class V&gt;\nbool EQ(const Q&amp; q, V v) { \n    return q.Eq(v); \n}\n</code></pre>\n\n<p>and this class:</p>\n\n<pre><code>struct TEq01 { \n    char n1;                \n    TEq01(const void* p) : n1(*(char*)p)     { }    \n    bool Eq(char n) const                { return n1 == n; }\n};\n</code></pre>\n\n<p>Say I use it like this - only specifying the first template parameter</p>\n\n<pre><code>char *sz = \"some string\";\nbool f = EQ&lt;TEq01&gt;(sz, '1');\n</code></pre>\n\n<p>How does the compiler know that TEq01 is <strong>class Q</strong> instead of <strong>class V</strong>?  I'm using visual studio 2013.</p>\n"}, {"tags": ["c++", "eclipse", "macos", "c++11", "gcc"], "comments": [{"owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "edited": false, "score": 1, "creation_date": 1421325910, "post_id": 27953921, "comment_id": 44320546, "body": "Have you tried running <code>make</code> from a command prompt?"}, {"owner": {"reputation": 129, "user_id": 1871569, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QfwhV.png?s=128&g=1", "display_name": "Robbie Capps", "link": "https://stackoverflow.com/users/1871569/robbie-capps"}, "reply_to_user": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "edited": false, "score": 0, "creation_date": 1421353409, "post_id": 27953921, "comment_id": 44337251, "body": "I don&#39;t need <code>make</code>, only to compile this one .cpp file."}, {"owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "edited": false, "score": 1, "creation_date": 1421405278, "post_id": 27953921, "comment_id": 44355731, "body": "You do want to be able to build your project from Eclipse, yes? Eclipse uses <code>make</code> to build your project. The idea of running <code>make</code> from the commandline is to eliminate one potential source of problems (Eclipse). If running <code>make</code> from the command line is successful, then the problem lies with Eclipse, most likely the environment in presents to <code>make</code>. If running <code>make</code> from the command line fails the same way as when run from Eclipse, then it will be easier to alter the surrounding environment until the build works."}, {"owner": {"reputation": 129, "user_id": 1871569, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QfwhV.png?s=128&g=1", "display_name": "Robbie Capps", "link": "https://stackoverflow.com/users/1871569/robbie-capps"}, "reply_to_user": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "edited": false, "score": 0, "creation_date": 1421425709, "post_id": 27953921, "comment_id": 44367803, "body": "Ah, good call. I ran <code>make</code> and got: <code>&#47;bin&#47;sh: -c: line 0: unexpected EOF while looking for matching&#39;&#39; &#47;bin&#47;sh: -c: line 1: syntax error: unexpected end of file make: *** [Euler&#39;s Method] Error 2</code>"}, {"owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "edited": false, "score": 0, "creation_date": 1421658285, "post_id": 27953921, "comment_id": 44428232, "body": "Run <code>make SHELL=&#39;&#47;bin&#47;sh -x&#39;</code> and post the output. Seems like the shell didn&#39;t like the command put together by <code>make</code>. Do you have spaces in your file names or directories ? (make can&#39;t cope with them)"}, {"owner": {"reputation": 129, "user_id": 1871569, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QfwhV.png?s=128&g=1", "display_name": "Robbie Capps", "link": "https://stackoverflow.com/users/1871569/robbie-capps"}, "reply_to_user": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "edited": false, "score": 0, "creation_date": 1421658873, "post_id": 27953921, "comment_id": 44428533, "body": "<code>make: *** No targets.  Stop.</code> is what I get from that input. The file name is eulerclass.cpp. Is it possible because the directory is under <code>Animatlab C++</code>?"}, {"owner": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "edited": false, "score": 0, "creation_date": 1421678784, "post_id": 27953921, "comment_id": 44439607, "body": "If your project is set to generate makefiles automatically, you may need to change into the Debug or Release directory before running <code>make</code>. But yes, &quot;Animatlab C++&quot; as part of the full path to your project is very likely to cause problems for make. Try to rename the folder so it doesn&#39;t contain a space."}, {"owner": {"reputation": 129, "user_id": 1871569, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QfwhV.png?s=128&g=1", "display_name": "Robbie Capps", "link": "https://stackoverflow.com/users/1871569/robbie-capps"}, "reply_to_user": {"reputation": 4396, "user_id": 2064196, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/YOB5j.jpg?s=128&g=1", "display_name": "Bulletmagnet", "link": "https://stackoverflow.com/users/2064196/bulletmagnet"}, "edited": false, "score": 0, "creation_date": 1421683650, "post_id": 27953921, "comment_id": 44442596, "body": "Changed the name of that folder and another than had a space but with the same error."}], "owner": {"reputation": 129, "user_id": 1871569, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/QfwhV.png?s=128&g=1", "display_name": "Robbie Capps", "link": "https://stackoverflow.com/users/1871569/robbie-capps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421276330, "creation_date": 1421275831, "last_edit_date": 1421276330, "question_id": 27953921, "link": "https://stackoverflow.com/questions/27953921/eclipse-gcc-5-0-mac-make-error-abort-trap-6", "title": "Eclipse GCC 5.0 Mac, make error: Abort trap 6", "body": "<p>I'm trying to build a project I created in Eclipse using GCC 5.0 on a Mac.</p>\n\n<p>I set up the environment variables for the project as:\nCPATH:\n${HOME}/gcc/include</p>\n\n<p>LIBRARY_PATH:\n${HOME|/gcc/lib</p>\n\n<p>PATH:\n${HOME}/gcc/bin:\n /usr/bin:/bin:/usr/sbin:/sbin</p>\n\n<p>I added -std=c++11 to the flags.</p>\n\n<p>I added the DYLD_LIBRARY_PATH:\nDYLD_LIBRARY_PATH:\n${env_var:HOME}/gcc/lib</p>\n\n<p>However, when I build the project, I get the following error:</p>\n\n<pre><code>`Description    Resource    Path    Location    Type\nmake: *** [eulerclass.o] Abort trap: 6  Euler's Method          C/C++ Problem`\n</code></pre>\n\n<p>My CPP file is as follows:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n\ntypedef double F(double,double);\n\n/*\nApproximates y(t) in y'(t)=f(t,y) with y(a)=y0 and\nt=a..b and the step size h.\n*/\nvoid euler(F f, double y0, double a, double b, double h)\n{\n    double y = y0;\n    for (double t = a; t &lt; b; t += h)\n    {\n        std::cout &lt;&lt; std::fixed &lt;&lt; std::setprecision(3) &lt;&lt; t &lt;&lt; \" \" &lt;&lt; y &lt;&lt; \"\\n\";\n        y += h * f(t, y);\n    }\n    std::cout &lt;&lt; \"done\\n\";\n}\n\n// Example: Newton's cooling law\ndouble newtonCoolingLaw(double, double t)\n{\n   return -0.07 * (t - 20);\n}\n\nint main()\n{\n    euler(newtonCoolingLaw, 100, 0, 100,  2);\n    euler(newtonCoolingLaw, 100, 0, 100,  5);\n    euler(newtonCoolingLaw, 100, 0, 100, 10);\n}\n</code></pre>\n\n<p>Any ideas why I'm getting this error?</p>\n\n<p>NOTE: I'm able to successfully compile and run the executable using the terminal command <code>clang++</code>, so I know the file is fine. It has to be something wrong with Eclipse, but I don't know what.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 12, "creation_date": 1421275759, "post_id": 27953886, "comment_id": 44302857, "body": "First time I&#39;ve seen it (at least noticed it)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 6, "creation_date": 1421275779, "post_id": 27953886, "comment_id": 44302868, "body": "To prevent code from being <a href=\"http://ideone.com/vnKohE\" rel=\"nofollow noreferrer\">compilable</a> perhaps?"}, {"owner": {"reputation": 4259, "user_id": 313414, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/wR062.jpg?s=128&g=1", "display_name": "Tom W", "link": "https://stackoverflow.com/users/313414/tom-w"}, "edited": false, "score": 0, "creation_date": 1421275848, "post_id": 27953886, "comment_id": 44302915, "body": "Stop downvoting, this is a reasonable question, and the only google results are not a dead cert at being correct."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 8, "creation_date": 1421275960, "post_id": 27953886, "comment_id": 44302958, "body": "Just a wild guess: The linked reference is an HTML document.  Maybe it was created using some HTML editor that silently removes invalid HTML tags and the author forgot to escape the angle brackets in the code?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1421275976, "post_id": 27953886, "comment_id": 44302965, "body": "The BeagleBone Black example could be faulty conversion to HTML.  The <code>#include &quot;Header.h&quot;</code> lines are complete, but <code>#include &lt;iostream&gt;</code> or equivalent might well appear as a blank include if the conversion to HTML is bungled.  Having said that, the HTML source for the section is: <code>&lt;p&gt;C++ example:&lt;&#47;p&gt; &lt;pre class=&quot;brush: cpp; title: ; notranslate&quot; title=&quot;&quot;&gt; #include #include &amp;quot;GPIO&#47;GPIOManager.h&amp;quot; #include &amp;quot;GPIO&#47;GPIOConst.h&amp;quot;</code> so it is not completely trivial to guess where the problem occurred.  I suspect it is a markup issue though."}, {"owner": {"reputation": 2538, "user_id": 580724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c738edc6bbf84b800cb53330c565a1cf?s=128&d=identicon&r=PG", "display_name": "Anil Natha", "link": "https://stackoverflow.com/users/580724/anil-natha"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 1, "creation_date": 1421276048, "post_id": 27953886, "comment_id": 44302990, "body": "@JonathanLeffler, I thought it may be an HTML issue as well, but I inspected the html source and there simply is nothing following the <code>#include</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1421276199, "post_id": 27953886, "comment_id": 44303048, "body": "C&#39;mon guys. How is this a valid c++ question? It doesn&#39;t compile (I&#39;m pretty sure it doesn&#39;t with even a crappy CPP implementation), period."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "reply_to_user": {"reputation": 2538, "user_id": 580724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c738edc6bbf84b800cb53330c565a1cf?s=128&d=identicon&r=PG", "display_name": "Anil Natha", "link": "https://stackoverflow.com/users/580724/anil-natha"}, "edited": false, "score": 1, "creation_date": 1421276203, "post_id": 27953886, "comment_id": 44303051, "body": "@SlyRaskal: As you can see from my update which I was making while you were typing, I agree that the HTML simply has nothing there.  But since it is invalid, non-compiling code, we can safely assume that something got removed from the actual source."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1421276257, "post_id": 27953886, "comment_id": 44303071, "body": "Some people make mistakes."}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421276323, "post_id": 27953886, "comment_id": 44303100, "body": "Do you have any examples which are not on a website?  Files you&#39;ve downloaded from a source repository of some sort?"}, {"owner": {"reputation": 2538, "user_id": 580724, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c738edc6bbf84b800cb53330c565a1cf?s=128&d=identicon&r=PG", "display_name": "Anil Natha", "link": "https://stackoverflow.com/users/580724/anil-natha"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421276350, "post_id": 27953886, "comment_id": 44303112, "body": "@JonathanLeffler, Saw your edit after I commented. Thanks for posting that html by the way.  I agree, something must have been removed before it was posted as it will fail compilation."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1421276370, "post_id": 27953886, "comment_id": 44303122, "body": "This question appears to be off-topic because it is not likely to help anyone for future research (besides for a particular crappy tutorial)"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421276474, "post_id": 27953886, "comment_id": 44303160, "body": "This question appears to be off-topic because it is about something that isn&#39;t."}], "answers": [{"owner": {"reputation": 43527, "user_id": 98094, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/VkdLW.jpg?s=128&g=1", "display_name": "Icemanind", "link": "https://stackoverflow.com/users/98094/icemanind"}, "is_accepted": true, "score": 9, "last_activity_date": 1421276321, "creation_date": 1421276321, "answer_id": 27954039, "question_id": 27953886, "link": "https://stackoverflow.com/questions/27953886/why-do-some-people-put-a-blank-include-at-the-begining-of-c-programs/27954039#27954039", "title": "Why do some people put a blank #include at the begining of C++ Programs?", "body": "<p>The preprocessor that spits out the formatted HTML code for the link you posted is buggy. Look at the source code on <a href=\"https://github.com/mkaczanowski/BeagleBoneBlack-GPIO\">GitHub</a> and you'll see, it should look like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"GPIO/GPIOManager.h\"\n#include \"GPIO/GPIOConst.h\"\n...\n</code></pre>\n\n<p>As an FYI, the code you submitted can't compile. It is illegal in C++ to simply have a line that says <code>#include</code>. The compiler will expect a file to follow so it knows what to include.</p>\n"}], "owner": {"reputation": 1531, "user_id": 4335488, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e0c0f19b150060bf76c4709c44556d0e?s=128&d=identicon&r=PG&f=1", "display_name": "HSchmale", "link": "https://stackoverflow.com/users/4335488/hschmale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "closed_date": 1421277493, "accepted_answer_id": 27954039, "answer_count": 1, "score": 5, "last_activity_date": 1421276321, "creation_date": 1421275690, "question_id": 27953886, "link": "https://stackoverflow.com/questions/27953886/why-do-some-people-put-a-blank-include-at-the-begining-of-c-programs", "closed_reason": "Not suitable for this site", "title": "Why do some people put a blank #include at the begining of C++ Programs?", "body": "<p>I've seen a couple of programs that have a blank #include at the beginning. I would like to know what's the purpose behind this?</p>\n\n<p>Like this:</p>\n\n<pre><code> #include\n #include &lt;iostream&gt;\n // include more stuff\n</code></pre>\n\n<p>Example Link: <a href=\"http://mkaczanowski.com/beaglebone-black-cpp-gpio-library-for-beginners/#important_methods\" rel=\"noreferrer\">http://mkaczanowski.com/beaglebone-black-cpp-gpio-library-for-beginners/#important_methods</a></p>\n"}, {"tags": ["c++", "exception", "exit"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1421275609, "post_id": 27953838, "comment_id": 44302789, "body": "What about simply trzing out? What actually hinders you to do so?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4413591"}, "edited": false, "score": 0, "creation_date": 1421275731, "post_id": 27953838, "comment_id": 44302846, "body": "Simply type into your compiler, build, and run."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4413591"}, "edited": false, "score": 0, "creation_date": 1421275814, "post_id": 27953838, "comment_id": 44302891, "body": "Look here: <a href=\"http://stackoverflow.com/help/how-to-ask\">Asking a good question</a>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 2, "creation_date": 1421275839, "post_id": 27953838, "comment_id": 44302908, "body": "<a href=\"http://ideone.com/fiz8Va\" rel=\"nofollow noreferrer\">Your question has been pasted into the magic answer machine</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1421275859, "post_id": 27953838, "comment_id": 44302920, "body": "@Noam Sorry typo: <i>trying</i> (I&#39;ve got a weird kezboard :-) )"}, {"owner": {"reputation": 86, "user_id": 4381424, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79b629599750ea78ffcc83e040ac6cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Noam", "link": "https://stackoverflow.com/users/4381424/noam"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1421276156, "post_id": 27953838, "comment_id": 44303031, "body": "@DrewDormann thank you . I was not sure how to check this ."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1421276186, "post_id": 27953838, "comment_id": 44303042, "body": "You&#39;re getting down votes because all you have to do it put the code you wrote here into your compiler, run it and see what happens. Here are some good books: <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\" title=\"the definitive c book guide and list\">stackoverflow.com/questions/388242/&hellip;</a>"}, {"owner": {"reputation": 86, "user_id": 4381424, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79b629599750ea78ffcc83e040ac6cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Noam", "link": "https://stackoverflow.com/users/4381424/noam"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1421276285, "post_id": 27953838, "comment_id": 44303087, "body": "@Galik , sorry , I will delete this question ."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1421277276, "post_id": 27953838, "comment_id": 44303468, "body": "@Noam <i>&quot;I will delete this question &quot;</i> I&#39;m afraid you can&#39;t."}], "answers": [{"owner": {"user_type": "does_not_exist", "display_name": "user4413591"}, "is_accepted": true, "score": 1, "last_activity_date": 1421275590, "creation_date": 1421275590, "answer_id": 27953855, "question_id": 27953838, "link": "https://stackoverflow.com/questions/27953838/c-exception-catching/27953855#27953855", "title": "C++ exception catching", "body": "<p>A caught exception will continue after the catch block provided you have not exited in the catch block once the commands in the catch block are finished.</p>\n\n<p>The answer to your question is yes.</p>\n"}], "owner": {"reputation": 86, "user_id": 4381424, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/79b629599750ea78ffcc83e040ac6cf7?s=128&d=identicon&r=PG&f=1", "display_name": "Noam", "link": "https://stackoverflow.com/users/4381424/noam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 27953855, "answer_count": 1, "score": -4, "last_activity_date": 1482784130, "creation_date": 1421275462, "last_edit_date": 1482784130, "question_id": 27953838, "link": "https://stackoverflow.com/questions/27953838/c-exception-catching", "title": "C++ exception catching", "body": "<p>After a successful catch , does the function that caught the exception exit ?\nFor example :</p>\n\n<pre><code>      foo()\n       {\n         try\n        {\n           valid(name, name1, name2, name3, name3);\n        }\n        catch (int error)\n        {\n           std::cout &lt;&lt; \"Error number :\" &lt;&lt; error &lt;&lt; std::endl;\n        }\n        std::cout &lt;&lt; \"Valid names\" &lt;&lt; std::endl;\n       }\n</code></pre>\n\n<p>If I catch an exception , will \"Valid names\" be printed ?</p>\n"}, {"tags": ["c++", "winapi", "fixed", "busy-waiting"], "comments": [{"owner": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "edited": false, "score": 0, "creation_date": 1421279230, "post_id": 27953812, "comment_id": 44304115, "body": "Make sure you&#39;re passing milliseconds to Sleep. If your math yields other units (I didn&#39;t check the logic in detail), then you won&#39;t get what you want. Also, note that Sleep is traditionally not all that accurate. For instance, Sleep(1) may very well Sleep for considerably more than 1 millisecond."}, {"owner": {"reputation": 7, "user_id": 3023723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b3dfbb72675c19eb9e737e76a9f21bd8?s=128&d=identicon&r=PG&f=1", "display_name": "user3023723", "link": "https://stackoverflow.com/users/3023723/user3023723"}, "reply_to_user": {"reputation": 7700, "user_id": 126027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d083341daacfb4942b835e3f6f2fd804?s=128&d=identicon&r=PG", "display_name": "TheUndeadFish", "link": "https://stackoverflow.com/users/126027/theundeadfish"}, "edited": false, "score": 0, "creation_date": 1421280102, "post_id": 27953812, "comment_id": 44304409, "body": "i will look into using time begin period to increase the resolution of Sleep(), but how can i make sure that i am using milliseconds? i thought i was ..."}, {"owner": {"reputation": 530, "user_id": 1730288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/85440b5dbfe068ab47d31bd98ac1fcce?s=128&d=identicon&r=PG", "display_name": "awr", "link": "https://stackoverflow.com/users/1730288/awr"}, "edited": false, "score": 0, "creation_date": 1421280468, "post_id": 27953812, "comment_id": 44304518, "body": "Having a closer look at your code, your function parameters are pointers but you are not dereferencing them. You also fail to initialise some values (e.g. you never initialise framecount). When you pass in framecount as a pointer and then do count++, you are incrementing the pointer, not the value of count."}, {"owner": {"reputation": 7, "user_id": 3023723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b3dfbb72675c19eb9e737e76a9f21bd8?s=128&d=identicon&r=PG&f=1", "display_name": "user3023723", "link": "https://stackoverflow.com/users/3023723/user3023723"}, "edited": false, "score": 0, "creation_date": 1421280870, "post_id": 27953812, "comment_id": 44304668, "body": "Ah okay !! I have now added a * in front of the count++ instruction. It still gets stuck though. I think i need to re write the function after i find out how to get the correct wait time."}, {"owner": {"reputation": 530, "user_id": 1730288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/85440b5dbfe068ab47d31bd98ac1fcce?s=128&d=identicon&r=PG", "display_name": "awr", "link": "https://stackoverflow.com/users/1730288/awr"}, "edited": false, "score": 0, "creation_date": 1421281007, "post_id": 27953812, "comment_id": 44304713, "body": "It&#39;s not just count. You never initialise T1 either. I recommend you don&#39;t use pointers at all, but references: void frame(LARGE_INTEGER&amp; T, LARGE_INTEGER&amp; T3, LARGE_INTEGER&amp; DELT,LARGE_INTEGER&amp; DESI, double&amp; framepersec,unsigned long long&amp; count,unsigned long long&amp; maxcount,bool&amp; on, LARGE_INTEGER&amp; mili). Also ensure that you correctly initialise all variables before using them"}, {"owner": {"reputation": 7, "user_id": 3023723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b3dfbb72675c19eb9e737e76a9f21bd8?s=128&d=identicon&r=PG&f=1", "display_name": "user3023723", "link": "https://stackoverflow.com/users/3023723/user3023723"}, "edited": false, "score": 0, "creation_date": 1421281570, "post_id": 27953812, "comment_id": 44304873, "body": "I printed the value of sleep(), and well, it says : 255,852,152,499,226,9    just before it gets stuck in the sleep mode. That must have been the problem all along! I thought i was passing the correct values though, by dividing the clocks by the milliseconds clock."}], "answers": [{"comments": [{"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1421279788, "post_id": 27954556, "comment_id": 44304314, "body": "Or call <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms644906(v=vs.85).aspx\" rel=\"nofollow noreferrer\">SetTimer</a>."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1421281389, "post_id": 27954556, "comment_id": 44304821, "body": "@DanKorn: That won&#39;t work in his console application at all, and also accumulates error over time, unlike the waitable timer."}, {"owner": {"reputation": 1190, "user_id": 3207828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1EPkw.jpg?s=128&g=1", "display_name": "Dan Korn", "link": "https://stackoverflow.com/users/3207828/dan-korn"}, "edited": false, "score": 0, "creation_date": 1421344894, "post_id": 27954556, "comment_id": 44332648, "body": "What makes you think that SetTimer won&#39;t work in a console app?  We use it in a Windows Service, without any UI, and it works perfectly.  Also, <a href=\"http://www.virtualdub.org/blog/pivot/entry.php?id=272\" rel=\"nofollow noreferrer\">there&#39;s no error accumulation under Vista and later</a>."}], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1421279059, "creation_date": 1421279059, "answer_id": 27954556, "question_id": 27953812, "link": "https://stackoverflow.com/questions/27953812/c-win32-printing-to-console-in-fixed-timesteps/27954556#27954556", "title": "C++ win32 printing to console in fixed timesteps", "body": "<p>Waitable timers are more accurate than <code>Sleep</code>, and also integrate with a GUI message loop better (replace <code>GetMessage</code> with <code>MsgWaitForMultipleObjects</code>).  I've used them successfully for graphics timing before.</p>\n\n<p>They won't get you high precision for e.g. controlling serial or network output at sub-millisecond timing, but UI updates are limited by VSYNC anyway.</p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 3023723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b3dfbb72675c19eb9e737e76a9f21bd8?s=128&d=identicon&r=PG&f=1", "display_name": "user3023723", "link": "https://stackoverflow.com/users/3023723/user3023723"}, "edited": false, "score": 0, "creation_date": 1421279431, "post_id": 27954582, "comment_id": 44304186, "body": "thanks for your fast response time ! :D I think i will definitely look into that for timing a game on Win 32. But i am not getting a 60 frames per second readout, it just seams to hang on sleep like i have set it to sleep too long or something. I keep stumbling on the timing when i am trying to make a game or a program with timing needs."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "reply_to_user": {"reputation": 7, "user_id": 3023723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b3dfbb72675c19eb9e737e76a9f21bd8?s=128&d=identicon&r=PG&f=1", "display_name": "user3023723", "link": "https://stackoverflow.com/users/3023723/user3023723"}, "edited": false, "score": 0, "creation_date": 1421280115, "post_id": 27954582, "comment_id": 44304415, "body": "@user3023723: Do some debugging. Print out the value you&#39;re passing to Sleep and check it seems sane. Remember that Sleep takes its value in milliseconds."}, {"owner": {"reputation": 7, "user_id": 3023723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b3dfbb72675c19eb9e737e76a9f21bd8?s=128&d=identicon&r=PG&f=1", "display_name": "user3023723", "link": "https://stackoverflow.com/users/3023723/user3023723"}, "edited": false, "score": 0, "creation_date": 1421280541, "post_id": 27954582, "comment_id": 44304545, "body": "It is not letting me print in the code. I think it either gets stuck on the console or the program stops at the first if statement in frame()."}], "owner": {"reputation": 530, "user_id": 1730288, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/85440b5dbfe068ab47d31bd98ac1fcce?s=128&d=identicon&r=PG", "display_name": "awr", "link": "https://stackoverflow.com/users/1730288/awr"}, "is_accepted": false, "score": 2, "last_activity_date": 1421279222, "creation_date": 1421279222, "answer_id": 27954582, "question_id": 27953812, "link": "https://stackoverflow.com/questions/27953812/c-win32-printing-to-console-in-fixed-timesteps/27954582#27954582", "title": "C++ win32 printing to console in fixed timesteps", "body": "<p>The time that you sleep is limited by the frequency of the system clock. The frequency defaults to 64 Hz, so you'll end up seeing sleeps in increments of 16ms. Any sleep that's less than 16ms will be at least 16ms long - it could be longer depending on CPU load. Likewise, a sleep of 20ms will likely be rounded up to 32ms.</p>\n\n<p>You can change this period by calling timeBeginPeriod(...) and timeEndPeriod(...), which can increase sleep accuracy to 1ms. If you have a look at multimedia apps like VLC Player, you'll see that they use these functions to get reliable frame timing. Note that this changes the system wide scheduling rate, so it will affect battery life on laptops. </p>\n\n<p>More info:\n<a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/windows/desktop/dd757624%28v=vs.85%29.aspx</a>\n<a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx</a></p>\n"}], "owner": {"reputation": 7, "user_id": 3023723, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b3dfbb72675c19eb9e737e76a9f21bd8?s=128&d=identicon&r=PG&f=1", "display_name": "user3023723", "link": "https://stackoverflow.com/users/3023723/user3023723"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1421281545, "creation_date": 1421275372, "last_edit_date": 1421281545, "question_id": 27953812, "link": "https://stackoverflow.com/questions/27953812/c-win32-printing-to-console-in-fixed-timesteps", "title": "C++ win32 printing to console in fixed timesteps", "body": "<p>I am trying to create a function that will allow me to enter the desired frames per second and the maximum frame count and then have the function \"cout\" to the console on the fixed time steps. I am using Sleep() to avoid busy waiting as well. I seem to make the program sleep longer than it needs to because it keeps stalling on the sleep command i think. Can you help me with this? i am having some trouble understanding time, especially on windows. </p>\n\n<p>Ultimately i will probably use this timing method to time and animate a simple game , maybe like pong, or even a simple program with objects that can accelerate. I think i already understand GDI and wasapi enough to play sound and show color on the screen, so now i need to understand timing. I have looked for a long time before asking this question on the internet and i am sure that i am missing something, but i can't quite put my finger on it :(\nhere is the code :</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\n// in this program i am trying to make a simple function that prints frame:  and the number frame  in between fixed time intervals\n// i am trying to make it so that it doesn't do busy waiting\n\nusing namespace std;\n\n\nvoid frame(LARGE_INTEGER&amp; T, LARGE_INTEGER&amp; T3, LARGE_INTEGER&amp; DELT,LARGE_INTEGER&amp; DESI, double&amp; framepersec,unsigned long long&amp; count,unsigned long long&amp; maxcount,bool&amp; on, LARGE_INTEGER&amp; mili)\n{\n    QueryPerformanceCounter(&amp;T3); // seccond measurement\n\n    DELT.QuadPart = &amp;T3.QuadPart - &amp;T.QuadPart; // getting the ticks between the time measurements\n\n    if(DELT.QuadPart &gt;= DESI.QuadPart) {count++; cout &lt;&lt; \"frame: \" &lt;&lt; count &lt;&lt; \" !\" &lt;&lt; endl; T.QuadPart = T3.QuadPart; } // adding to the count by just one frame (this may cause problems if more than one passes)\n\n     if(count &gt; maxcount) {on = false;} // turning off the loop\n\n    else {DESI.QuadPart = T.QuadPart + DESI.QuadPart;//(long long)framepersec; // setting the stop tick\n        unsigned long long sleep = (( DESI.QuadPart - DELT.QuadPart) / mili.QuadPart);\n        cout &lt;&lt; sleep &lt;&lt; endl;\n        Sleep(sleep);} // sleeping to avoid busy waiting\n}\n\n\nint main()\n{\n\n    LARGE_INTEGER T1, T2, Freq, Delta, desired, mil;\n    bool loopon = true; // keeps the loop flowing until max frames has been reached\n\n    QueryPerformanceFrequency(&amp;Freq); // getting num of updates per second\n    mil.QuadPart = Freq.QuadPart / 1000; // getting the number clock updates that occur in  a millisecond\n    double framespersec; // the number of clock updates that occur per target frame\n    unsigned long long framecount,maxcount; //to stop the program after a certain amount of frames\n    framecount = 0;\n\n\n    cout &lt;&lt; \"Hello world! enter the amount of frames per second : \" &lt;&lt; endl;\n    cin &gt;&gt; framespersec;\n    cout &lt;&lt; \"you entered: \" &lt;&lt; framespersec &lt;&lt; \" ! how many max frames?\" &lt;&lt; endl;\n    cin &gt;&gt; maxcount;\n    cout &lt;&lt; \"you entered: \" &lt;&lt; maxcount &lt;&lt; \" ! now doing the frames !!!\" &lt;&lt; endl;\n    desired.QuadPart = (Freq.QuadPart / framespersec);\n\n    while(loopon == true) {\n        frame(T1, T2, Delta, desired, framespersec, framecount, maxcount,loopon, mil);\n    }\n\n\n    cout &lt;&lt; \"all frames are done!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "noexcept"], "comments": [{"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "edited": false, "score": 2, "creation_date": 1421276475, "post_id": 27953791, "comment_id": 44303161, "body": "There is a <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=56643\" rel=\"nofollow noreferrer\">similar known bug</a>"}], "answers": [{"owner": {"reputation": 4073, "user_id": 152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXFHS.jpg?s=128&g=1", "display_name": "Jonesinator", "link": "https://stackoverflow.com/users/152/jonesinator"}, "is_accepted": true, "score": 1, "last_activity_date": 1425957037, "creation_date": 1425957037, "answer_id": 28955529, "question_id": 27953791, "link": "https://stackoverflow.com/questions/27953791/possible-g-bug-with-noexcept-and-templates/28955529#28955529", "title": "Possible g++ bug with noexcept and templates", "body": "<p>Using an enum to store the result of the noexcept operator is one horrifying <a href=\"https://ideone.com/PyNomU\" rel=\"nofollow\">workaround</a> at least in gcc-4.9.2 used currently by ideone.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;utility&gt;\n\nstruct Y\n{\n    void h() noexcept;\n    void i();\n};\n\nenum Y_noexcept_value\n{\n    h = noexcept(std::declval&lt;Y&gt;().h()),\n    i = noexcept(std::declval&lt;Y&gt;().i())\n};\n\ntemplate&lt;typename T&gt;\nstruct X\n{\n    void f() noexcept(Y_noexcept_value::h);\n    void g() noexcept(Y_noexcept_value::i);\n};\n\ntemplate&lt;typename T&gt;\nvoid X&lt;T&gt;::f() noexcept(Y_noexcept_value::h)\n{\n}\n\ntemplate&lt;typename T&gt;\nvoid X&lt;T&gt;::g() noexcept(Y_noexcept_value::i)\n{\n}\n\nint main()\n{\n    std::cout &lt;&lt; std::boolalpha\n              &lt;&lt; noexcept(std::declval&lt;X&lt;int&gt;&gt;().f()) &lt;&lt; std::endl\n              &lt;&lt; noexcept(std::declval&lt;X&lt;int&gt;&gt;().g()) &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 9246, "user_id": 1594090, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/abcb972aecf3262918ecae1d9a3781d1?s=128&d=identicon&r=PG", "display_name": "template boy", "link": "https://stackoverflow.com/users/1594090/template-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 28955529, "answer_count": 1, "score": 4, "last_activity_date": 1425957037, "creation_date": 1421275269, "question_id": 27953791, "link": "https://stackoverflow.com/questions/27953791/possible-g-bug-with-noexcept-and-templates", "title": "Possible g++ bug with noexcept and templates", "body": "<p>I get an error about mismatched noexcept specifications when I use templates in conjunction with the <code>noexcept</code> specifier. It compiles with various versions of clang I've used and <a href=\"http://coliru.stacked-crooked.com/a/a12023d33f7eeafc\" rel=\"nofollow\">fails</a> in all versions of gcc.</p>\n\n\n\n<pre><code>struct Y\n{\n    void h();\n};\n\ntemplate&lt;typename T&gt;\nstruct X\n{\n    void f() noexcept(noexcept(std::declval&lt;Y&gt;().h()));\n};\n\ntemplate&lt;typename T&gt;\nvoid X&lt;T&gt;::f() noexcept(noexcept(std::declval&lt;Y&gt;().h()))\n{\n}\n\nint main()\n{\n}\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>g++ -std=c++1y -O2 -Wall -pthread main.cpp &amp;&amp; ./a.out\n\nmain.cpp:15:56: error: declaration of 'void X&lt;T&gt;::f() noexcept (noexcept (declval&lt;Y&gt;().Y::f()))' has a different exception specifier\nvoid X&lt;T&gt;::f() noexcept(noexcept(std::declval&lt;Y&gt;().f()))\n                                                    ^\nmain.cpp:11:10: error: from previous declaration 'void X&lt;T&gt;::f() noexcept (noexcept (declval&lt;Y&gt;().Y::f()))'\nvoid f() noexcept(noexcept(std::declval&lt;Y&gt;().f()));\n     ^\n</code></pre>\n\n<p>Is this a bug? Is there any way to get around it?</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 38119, "user_id": 3959454, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4d3d3eb6143879550d0e5bd67a6bf647?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Savin", "link": "https://stackoverflow.com/users/3959454/anton-savin"}, "edited": false, "score": 5, "creation_date": 1421275255, "post_id": 27953764, "comment_id": 44302649, "body": "And what is your question?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1421275338, "post_id": 27953764, "comment_id": 44302689, "body": "I think you just want bind there. Or lambda"}, {"owner": {"reputation": 41, "user_id": 1518935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baf9d294e03f74b7218ed4a81363001?s=128&d=identicon&r=PG", "display_name": "emrainey", "link": "https://stackoverflow.com/users/1518935/emrainey"}, "edited": false, "score": 0, "creation_date": 1421275732, "post_id": 27953764, "comment_id": 44302849, "body": "The question is how to get rid of the wart of needing to provide ignored parameters to the thread creation."}, {"owner": {"reputation": 79428, "user_id": 365496, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1397eae94e7fe715f040459c988c40b1?s=128&d=identicon&r=PG", "display_name": "bames53", "link": "https://stackoverflow.com/users/365496/bames53"}, "edited": false, "score": 0, "creation_date": 1421276292, "post_id": 27953764, "comment_id": 44303090, "body": "<code>funcs[i] = std::bind(odd, static_cast&lt;int&gt;(i));</code> that looks wrong to me. <code>funcs</code> is a vector of functors which take an <code>int</code> argument, but you&#39;re passing it an object that does not take any arguments."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 1518935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baf9d294e03f74b7218ed4a81363001?s=128&d=identicon&r=PG", "display_name": "emrainey", "link": "https://stackoverflow.com/users/1518935/emrainey"}, "edited": false, "score": 0, "creation_date": 1421276550, "post_id": 27953932, "comment_id": 44303188, "body": "I had not guessed that they way to templatize the parameters was to ignore them. ;)"}, {"owner": {"reputation": 41, "user_id": 1518935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baf9d294e03f74b7218ed4a81363001?s=128&d=identicon&r=PG", "display_name": "emrainey", "link": "https://stackoverflow.com/users/1518935/emrainey"}, "edited": false, "score": 0, "creation_date": 1421277093, "post_id": 27953932, "comment_id": 44303409, "body": "I&#39;d like to drop the <code>std::packaged_task</code> but I didn&#39;t have a way to get the future from a thread otherwise."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 41, "user_id": 1518935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baf9d294e03f74b7218ed4a81363001?s=128&d=identicon&r=PG", "display_name": "emrainey", "link": "https://stackoverflow.com/users/1518935/emrainey"}, "edited": false, "score": 0, "creation_date": 1421278741, "post_id": 27953932, "comment_id": 44303946, "body": "You can drop the vector, keep the task. I prefer to use tasks instead of composing promise/future pairs manually. Here&#39;s a gist of what I&#39;d  do: <b><a href=\"http://coliru.stacked-crooked.com/a/2db56fbd778d20ee\" rel=\"nofollow noreferrer\">Live On Coliru</a></b>. Answer <b>updated</b> with some explanations."}, {"owner": {"reputation": 41, "user_id": 1518935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baf9d294e03f74b7218ed4a81363001?s=128&d=identicon&r=PG", "display_name": "emrainey", "link": "https://stackoverflow.com/users/1518935/emrainey"}, "edited": false, "score": 0, "creation_date": 1421280068, "post_id": 27953932, "comment_id": 44304397, "body": "Thank you for the update, but you are right, this is quite &#39;complicated&#39;."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 41, "user_id": 1518935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baf9d294e03f74b7218ed4a81363001?s=128&d=identicon&r=PG", "display_name": "emrainey", "link": "https://stackoverflow.com/users/1518935/emrainey"}, "edited": false, "score": 0, "creation_date": 1421283090, "post_id": 27953932, "comment_id": 44305263, "body": "@emrainey It&#39;s only complicated due the fact that I made it habitually more efficient and more generic. See: <a href=\"http://coliru.stacked-crooked.com/a/98b0a67945afbbde\" rel=\"nofollow noreferrer\"><i>suitably simplified</i></a>, 36 lines (shorter than your original)"}, {"owner": {"reputation": 41, "user_id": 1518935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baf9d294e03f74b7218ed4a81363001?s=128&d=identicon&r=PG", "display_name": "emrainey", "link": "https://stackoverflow.com/users/1518935/emrainey"}, "edited": false, "score": 0, "creation_date": 1421442360, "post_id": 27953932, "comment_id": 44376247, "body": "This may be off topic, but are there performance advantages of your version in the last comment versus <a href=\"http://coliru.stacked-crooked.com/a/fadc2733de97a91c\" rel=\"nofollow noreferrer\">this one</a>? I removed the extraneous vectors and detached the threads."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 41, "user_id": 1518935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baf9d294e03f74b7218ed4a81363001?s=128&d=identicon&r=PG", "display_name": "emrainey", "link": "https://stackoverflow.com/users/1518935/emrainey"}, "edited": false, "score": 0, "creation_date": 1421442982, "post_id": 27953932, "comment_id": 44376545, "body": "@emrainey You pass <code>funcs</code> by value (make it by reference); For the rest, not a lot (the most significant cost is wrapping the tasks in a dynamically allocated, virtually dispatch <code>std::function&lt;&gt;</code> object (introduced as part of the simplication step). For the rest: profile it. If it&#39;s fast enough, then it&#39;s fast enough."}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 1, "last_activity_date": 1421278717, "last_edit_date": 1421278717, "creation_date": 1421275884, "answer_id": 27953932, "question_id": 27953764, "link": "https://stackoverflow.com/questions/27953764/using-stdthread-and-stdfunction-from-a-stdbind-with-a-function-with-argume/27953932#27953932", "title": "Using std::thread and std::function from a std::bind with a function with arguments and a non-void return", "body": "<p>You could just not be micromanaging/control freak in the generic code. Just take any task <code>returntype()</code> and let the caller handle the binding of arguments:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/9f7375a483043fae\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;future&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;functional&gt;\n\nbool odd(int i) { return (((i&amp;1)==1)?true:false); }\n\ntemplate &lt;typename _returnType&gt;\nvoid exec_and_collect(std::vector&lt;_returnType&gt;&amp; results,\n                      std::vector&lt;std::function&lt;_returnType()&gt;&gt; funcs\n                    ) {\n    std::size_t numTasks = std::min(funcs.size(), results.size());\n\n    std::vector&lt;std::packaged_task&lt;_returnType()&gt;&gt; tasks(numTasks);\n    std::vector&lt;std::future&lt;_returnType&gt;&gt; futures(numTasks);\n\n    std::vector&lt;std::thread&gt; threads(numTasks);\n\n    for (std::size_t h = 0; h &lt; numTasks; h++) {\n        tasks[h] = std::packaged_task&lt;_returnType()&gt;(funcs[h]);\n        futures[h] = tasks[h].get_future();\n        threads[h] = std::thread(std::move(tasks[h]));\n    }\n\n    // threads are now running, collect results\n    for (std::size_t h = 0; h &lt; numTasks; h++) {\n        results[h] = futures[h].get();\n        threads[h].join();\n    }\n}\n\nint main() {\n    std::size_t num = 8;\n    std::vector&lt;bool&gt; results(num);\n    std::vector&lt;std::function&lt;bool()&gt;&gt; funcs(num);\n\n    for (std::size_t i = 0; i &lt; num; i++) {\n        funcs[i] = std::bind(odd, static_cast&lt;int&gt;(i));\n    }\n    exec_and_collect&lt;bool&gt;(results, funcs);\n}\n</code></pre>\n\n<p>Note this is a quick job, I've seen quite a few things that are overly specific here still. </p>\n\n<ul>\n<li>In particular all the temporary collections are just paper weight (you even move each <code>tasks[h]</code> out of the vector even before moving to the next task, so why keep a vector of dead bits?)</li>\n<li>There's no scheduling at all; you just create new threads willy nilly. That's not gonna scale (also, you want pluggable pooling models; see the Executor specifications and Boost Async's implementation of these)</li>\n</ul>\n\n<h2>UPDATE</h2>\n\n<p>A somewhat more cleaned up version that demonstrates what unneeded dependencies can be shed:</p>\n\n<ul>\n<li>no temporary vectors of packaged tasks/threads</li>\n<li>no assumption/requirement to have <code>std::function&lt;&gt;</code> wrapped tasks (this removes dynamic allocations and virtual dispatch internally in the implementation)</li>\n<li>no requirement that the results must be in a vector (in fact, you can collect them anywhere you want using a custom output iterator)</li>\n<li>move-awareness (this is arguably a \"complicated\" part of the code seeing that there is no <code>std::move_transform</code>, so go the extra mile using <code>std::make_move_iterator</code></li>\n</ul>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/2db56fbd778d20ee\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;future&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n\n#include &lt;boost/range.hpp&gt;\n\nbool odd(int i) { return (((i&amp;1)==1)?true:false); }\n\ntemplate &lt;typename Range, typename OutIt&gt;\nvoid exec_and_collect(OutIt results, Range&amp;&amp; tasks) {\n    using namespace std;\n    using T = typename boost::range_value&lt;Range&gt;::type;\n    using R = decltype(declval&lt;T&gt;()());\n\n    auto tb = std::make_move_iterator(boost::begin(tasks)),\n         te = std::make_move_iterator(boost::end(tasks));\n\n    vector&lt;future&lt;R&gt;&gt; futures;\n\n    transform(\n            tb, te,\n            back_inserter(futures), [](auto&amp;&amp; t) {\n                std::packaged_task&lt;R()&gt; task(std::forward&lt;decltype(t)&gt;(t));\n                auto future = task.get_future();\n                thread(std::move(task)).detach();\n                return future;\n            });\n\n    // threads are now running, collect results\n    transform(begin(futures), end(futures), results, [](auto&amp; fut) { return fut.get(); });\n}\n\n#include &lt;boost/range/irange.hpp&gt;\n#include &lt;boost/range/adaptors.hpp&gt;\n\nusing namespace boost::adaptors;\n\nint main() {\n    std::vector&lt;bool&gt; results;\n    exec_and_collect(\n            std::back_inserter(results), \n            boost::irange(0, 8) | transformed([](int i) { return [i] { return odd(i); }; })\n        );\n\n    std::copy(results.begin(), results.end(), std::ostream_iterator&lt;bool&gt;(std::cout &lt;&lt; std::boolalpha, \"; \"));\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>false; false; false; false; false; false; false; false;\n</code></pre>\n\n<p>Note that you could indeed write</p>\n\n<pre><code>    exec_and_collect(\n            std::ostream_iterator&lt;bool&gt;(std::cout &lt;&lt; std::boolalpha, \"; \"), \n            boost::irange(0, 8) | transformed([](int i) { return [i] { return odd(i); }; })\n        );\n</code></pre>\n\n<p>and do without any <code>results</code> container :)</p>\n"}], "owner": {"reputation": 41, "user_id": 1518935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0baf9d294e03f74b7218ed4a81363001?s=128&d=identicon&r=PG", "display_name": "emrainey", "link": "https://stackoverflow.com/users/1518935/emrainey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1112, "favorite_count": 1, "accepted_answer_id": 27953932, "answer_count": 1, "score": 1, "last_activity_date": 1421278717, "creation_date": 1421275140, "last_edit_date": 1421275878, "question_id": 27953764, "link": "https://stackoverflow.com/questions/27953764/using-stdthread-and-stdfunction-from-a-stdbind-with-a-function-with-argume", "title": "Using std::thread and std::function from a std::bind with a function with arguments and a non-void return", "body": "<p>Let's say we have a function <code>odd</code> which is a <code>bool(int)</code> function. I'd like to execute this function in parallel but with different parameter (differ numbers).</p>\n\n<pre><code>bool odd(int i) { return (((i&amp;1)==1)?true:false); }\n</code></pre>\n\n<p>Here's the code I'm trying to use (which works but has a wart).    </p>\n\n<pre><code>std::size_t num = 256;\nstd::vector&lt;bool&gt; results(num);\nstd::vector&lt;std::function&lt;bool(int)&gt;&gt; funcs(num);\nstd::vector&lt;std::packaged_task&lt;bool(int)&gt;&gt; tasks(num);\nstd::vector&lt;std::future&lt;bool&gt;&gt; futures(num);\nstd::vector&lt;std::thread&gt; threads(num);\nfor (std::size_t i = 0; i &lt; num; i++) {\n    results[i] = false;\n    funcs[i] = std::bind(odd, static_cast&lt;int&gt;(i));\n    tasks[i] = std::packaged_task&lt;bool(int)&gt;(funcs[i]);\n    futures[i] = tasks[i].get_future();\n    threads[i] = std::thread(std::move(tasks[i]),0); // args ignored\n}\nfor (std::size_t i = 0; i &lt; num; i++) {\n    results[i] = futures[i].get();\n    threads[i].join();\n}\nfor (std::size_t i = 0; i &lt; num; i++) {\n    printf(\"odd(%d)=%s\\n\", i, (results[i]?\"true\":\"false\"));\n}\n</code></pre>\n\n<p>I'd like to get rid of the arguments to the thread creation, as they are dependent on the argument types of the function <code>bool(int)</code>. I'd like to make a function template of this code and be able to make a massive parallel function executor. </p>\n\n<pre><code>template &lt;typename _returnType, typename ..._argTypes&gt;\nvoid exec_and_collect(std::vector&lt;_returnType&gt;&amp; results,\n                      std::vector&lt;std::function&lt;_returnType(_argTypes...)&gt;&gt; funcs) {\n    std::size_t numTasks = (funcs.size() &gt; results.size() ? results.size() : funcs.size());\n    std::vector&lt;std::packaged_task&lt;_returnType(_argTypes...)&gt;&gt; tasks(numTasks);\n    std::vector&lt;std::future&lt;_returnType&gt;&gt; futures(numTasks);\n    std::vector&lt;std::thread&gt; threads(numTasks);\n    for (std::size_t h = 0; h &lt; numTasks; h++) {\n        tasks[h] = std::packaged_task&lt;_returnType(_argTypes...)&gt;(funcs[h]);\n        futures[h] = tasks[h].get_future();\n        threads[h] = std::thread(std::move(tasks[h]), 0); // zero is a wart\n    }\n    // threads are now running, collect results\n    for (std::size_t h = 0; h &lt; numTasks; h++) {\n        results[h] = futures[h].get();\n        threads[h].join();\n    }\n}\n</code></pre>\n\n<p>Then called like this:</p>\n\n<pre><code>std::size_t num = 8;\nstd::vector&lt;bool&gt; results(num);\nstd::vector&lt;std::function&lt;bool(int)&gt;&gt; funcs(num);\nfor (std::size_t i = 0; i &lt; num; i++) {\n    funcs[i] = std::bind(odd, static_cast&lt;int&gt;(i));\n}\nexec_and_collect&lt;bool,int&gt;(results, funcs);\n</code></pre>\n\n<p>I'd to remove the zero in the <code>std::thread(std::move(task), 0);</code> line since it's completely ignored by the thread. If I do completely remove it, the compiler can't find the arguments to pass to the thread create and it fails. </p>\n"}, {"tags": ["c++", "inheritance", "queue", "polymorphism"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1421274999, "post_id": 27953723, "comment_id": 44302539, "body": "Try <code>push</code>. And have a look at <a href=\"http://en.cppreference.com/w/cpp/container/queue\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/container/queue</a>"}], "answers": [{"owner": {"reputation": 1634, "user_id": 2030653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ab1rD.jpg?s=128&g=1", "display_name": "Mustafa", "link": "https://stackoverflow.com/users/2030653/mustafa"}, "is_accepted": true, "score": 1, "last_activity_date": 1421277488, "last_edit_date": 1421277488, "creation_date": 1421275222, "answer_id": 27953783, "question_id": 27953723, "link": "https://stackoverflow.com/questions/27953723/inheritance-from-queue-c/27953783#27953783", "title": "inheritance from queue C++", "body": "<p><code>std::queue</code> has <code>push</code> method. <code>push_back</code> is defined for classes which are meant to work as a stack e.g. <code>std::vector</code>. </p>\n"}], "owner": {"reputation": 2972, "user_id": 324922, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/arX7j.jpg?s=128&g=1", "display_name": "Day_Dreamer", "link": "https://stackoverflow.com/users/324922/day-dreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "accepted_answer_id": 27953783, "answer_count": 1, "score": -2, "last_activity_date": 1421278472, "creation_date": 1421274950, "question_id": 27953723, "link": "https://stackoverflow.com/questions/27953723/inheritance-from-queue-c", "title": "inheritance from queue C++", "body": "<p>I had to use fixed size queue so I designed a class like this:</p>\n\n<pre><code>Result VehicleParcelQueue::push_back(Parcel* pParcel){\n    if (size() &gt;= 5) return FAILURE;\n    else{\n        queue&lt;Parcel*&gt;::push_back(pParcel);\n        return SUCCESS;\n    }\n}\n</code></pre>\n\n<p>Parcel is a class I implemented elsewhere.</p>\n\n<p>but I'm getting:</p>\n\n<blockquote>\n  <p>error: 'push_back' is not a member of 'std::queue'</p>\n</blockquote>\n\n<p>what's the problem, I thought push_back should be recognized in the scope of the derived class.</p>\n"}, {"tags": ["c++", "list", "class", "oop", "templates"], "comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 2, "creation_date": 1421274866, "post_id": 27953685, "comment_id": 44302478, "body": "<i>&quot;So as you can see I&#39;m having some troubles with returning proper value from my list&quot;</i> -- No, we can&#39;t see that. What happens? What do you expect to happen instead? Do you get compiler errors? If so, what are they and on what line?"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 1, "creation_date": 1421274920, "post_id": 27953685, "comment_id": 44302501, "body": "Also... <code>Node&lt;T&gt; *temp = new Node&lt;T&gt;; temp = head;</code> ... Why do you allocate a new <code>Node&lt;T&gt;</code> object on the heap and then immediately clobber the pointer with a different pointer? You&#39;re just leaking memory here and you don&#39;t even need to allocate a new object in the first place; presumably you wanted <code>Node&lt;T&gt; *temp = head;</code>."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 1, "creation_date": 1421274961, "post_id": 27953685, "comment_id": 44302526, "body": "And (finally) why aren&#39;t you just using <code>std::list</code>? ;)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1421274963, "post_id": 27953685, "comment_id": 44302527, "body": "Not the answer, but remove <code>Node&lt;T&gt; *temp = new Node&lt;T&gt;;</code> that&#39;s useless and creates nothing more than a memory leak."}, {"owner": {"reputation": 1198, "user_id": 2975193, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/SYWKS.png?s=128&g=1", "display_name": "Patryk Krawczyk", "link": "https://stackoverflow.com/users/2975193/patryk-krawczyk"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1421275102, "post_id": 27953685, "comment_id": 44302581, "body": "Sorry I forgot to add my compiler error, now I&#39;ve edited the post. @cdhowie I cannot use std::list even though it would be great."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 1, "creation_date": 1421275206, "post_id": 27953685, "comment_id": 44302626, "body": "What is <code>ShapeList</code>? If it&#39;s some <code>List&lt;Shape*&gt;</code> then <code>T*</code> becomes <code>Shape**</code> (as suggested by the compiler error) which isn&#39;t at all what you want. Perhaps you wanted a <code>List&lt;Shape&gt;</code> instead."}, {"owner": {"reputation": 1198, "user_id": 2975193, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/SYWKS.png?s=128&g=1", "display_name": "Patryk Krawczyk", "link": "https://stackoverflow.com/users/2975193/patryk-krawczyk"}, "edited": false, "score": 0, "creation_date": 1421275566, "post_id": 27953685, "comment_id": 44302774, "body": "Thats exactly what it is. Oh and thanks for letting me know where I have my leak, I was actually aware that I&#39;m leaking it but now I realized where it is happening."}, {"owner": {"reputation": 1198, "user_id": 2975193, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/SYWKS.png?s=128&g=1", "display_name": "Patryk Krawczyk", "link": "https://stackoverflow.com/users/2975193/patryk-krawczyk"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1421277090, "post_id": 27953685, "comment_id": 44303407, "body": "Thank you @cdhowie based on your comment and pm100&#39;s I was able to solve this. As you suggested, I&#39;ve stayed with my List&lt;Shape*&gt; because I&#39;m needed to, but your comment about how T* becomes Shape** pointed me in the right direction. I think case is solved : ). (And no memory leaks!)"}], "answers": [{"comments": [{"owner": {"reputation": 1198, "user_id": 2975193, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/SYWKS.png?s=128&g=1", "display_name": "Patryk Krawczyk", "link": "https://stackoverflow.com/users/2975193/patryk-krawczyk"}, "edited": false, "score": 0, "creation_date": 1421275684, "post_id": 27953840, "comment_id": 44302821, "body": "I changed it and now I&#39;m getting this: &#39;return&#39; : cannot convert from &#39;Shape (__thiscall Node&lt;T&gt;::* )(void)&#39; to &#39;Shape *&#39;"}, {"owner": {"reputation": 1198, "user_id": 2975193, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/SYWKS.png?s=128&g=1", "display_name": "Patryk Krawczyk", "link": "https://stackoverflow.com/users/2975193/patryk-krawczyk"}, "edited": false, "score": 0, "creation_date": 1421275809, "post_id": 27953840, "comment_id": 44302888, "body": "I want my list to store pointers to Shapes and unfortunately I&#39;m now sure how to answer the second question :("}, {"owner": {"reputation": 1198, "user_id": 2975193, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/SYWKS.png?s=128&g=1", "display_name": "Patryk Krawczyk", "link": "https://stackoverflow.com/users/2975193/patryk-krawczyk"}, "edited": false, "score": 0, "creation_date": 1421276944, "post_id": 27953840, "comment_id": 44303350, "body": "Nevermind! I forgot to add parentheses after my getData call : )."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 1198, "user_id": 2975193, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/SYWKS.png?s=128&g=1", "display_name": "Patryk Krawczyk", "link": "https://stackoverflow.com/users/2975193/patryk-krawczyk"}, "edited": false, "score": 1, "creation_date": 1421281746, "post_id": 27953840, "comment_id": 44304921, "body": "@capybara It might actually be better to return <code>T&amp;</code> instead, so that the object in the list can be modified directly, if desired. You could also take a pointer to it this way. (<code>Node&lt;T&gt;::getData()</code> would need to be modified to return <code>T&amp;</code> as well.)"}], "owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "is_accepted": true, "score": 1, "last_activity_date": 1421275474, "creation_date": 1421275474, "answer_id": 27953840, "question_id": 27953685, "link": "https://stackoverflow.com/questions/27953685/how-to-return-pointer-from-linked-list-in-class-template/27953840#27953840", "title": "How to return pointer from linked list (in Class Template)", "body": "<p>Do you want to store Shapes or pointers to Shapes in the list? And do you want the findInstanceAt to return the node in the list or a pointer to the node in the list? At the moment you are not consistent on these things</p>\n\n<p>You store Shape* nodes in the list but the findInstanceAt returns a pointer to the node - which is a Shape** object. This is what the compiler is complaining about</p>\n\n<p>You probaly need to chang</p>\n\n<pre><code>T* findInstanceAt(int _k)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>T findInstanceAt(int _k)\n</code></pre>\n"}], "owner": {"reputation": 1198, "user_id": 2975193, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/SYWKS.png?s=128&g=1", "display_name": "Patryk Krawczyk", "link": "https://stackoverflow.com/users/2975193/patryk-krawczyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "accepted_answer_id": 27953840, "answer_count": 1, "score": -1, "last_activity_date": 1421275491, "creation_date": 1421274762, "last_edit_date": 1421275491, "question_id": 27953685, "link": "https://stackoverflow.com/questions/27953685/how-to-return-pointer-from-linked-list-in-class-template", "title": "How to return pointer from linked list (in Class Template)", "body": "<p>I've stumbled upon a problem with my linked list class.<br>\nI've one abstract class <code>Shape</code> and multiple classes inheriting from it, like <code>Square</code> or <code>Triangle</code> etc. <br>\nI'm storing them in my <code>List</code> class but I don't know how to return stored object back to the pointer of <code>Shape</code>.<br>\nSince my explanation may seem pretty vague here is some code with expected behaviour explained.</p>\n\n<pre><code>class Shape // abstract class\n{\npublic:\n int a;\n//some member virtual methods\n};\n\nclass Square : public Shape\n{\n//using the virtual methods from Shape\n};\n</code></pre>\n\n<p>In my main file, this is how I want to use it:</p>\n\n<pre><code>int main()\n{\n    List&lt;Shape*&gt; ShapeList;\n    Shape *ptr;\n    Square a(2, 1, 1); // size, x, y coordinates\n    ShapeList.add(ptr);\n\n//up to this point everything works well\n// now I want my list to return a pointer to it's member \n// so I can modify it\n\n    Shape *listptr;\n        listptr = ShapeList.findInstanceAt(0); // here's my error\n\n    listptr-&gt;a = 5; // what I want to do next\n}\n</code></pre>\n\n<p>So as you can see I'm havingtroubles with returning proper value from my list and I don't know how to solve this.</p>\n\n<p>Here's my simplified list implementation:</p>\n\n<pre><code>template &lt;class T&gt; class Node\n{\n            T data; \n            Node *next; \n\n    public:             \n\n            inline T getData()\n            {\n                return data;\n            }\n\n            inline Node* getNext()\n            {\n                return next;\n            }\n};\n</code></pre>\n\n<p><br></p>\n\n<pre><code>template &lt;class T&gt; class List\n{\n    Node&lt;T&gt; *head, *tail;\n\npublic:\n\n    List() : head(NULL), tail(NULL) { }\n\n    T* findInstanceAt(int _k)\n    {\n        if (NULL == head)\n        {\n            cout &lt;&lt; \"\\nList is empty.\";\n            return NULL;\n        }\n        else\n        {\n            Node&lt;T&gt; *temp = new Node&lt;T&gt;;\n            temp = head;\n\n            for (size_t k = 0; k &lt; _k; ++k)\n            {\n                if (NULL != temp-&gt;getNext()) temp = temp-&gt;getNext();\n                else return NULL;\n            }\n\n            return temp-&gt;getData;\n        }\n    }\n}\n</code></pre>\n\n<p>Thanks in advance for any suggestions on how to make this work.</p>\n\n<p>@EDIT<br>\nAhh I forgot to add compiler errors that I'm getting:</p>\n\n<pre><code>Error   1   error C2440: '=' : cannot convert from 'Shape **' to 'Shape *'  \n</code></pre>\n"}, {"tags": ["c++", "struct"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1421274682, "post_id": 27953629, "comment_id": 44302392, "body": "Padding (alignment) is done to optimize access for specific cpu architectures. So you can&#39;t (imagine how padding could be done differently to optimize for 16bit or 32bit addresses)."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1421274732, "post_id": 27953629, "comment_id": 44302409, "body": "How would you expect that struct to be laid out on a 36-bit computer?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1421274900, "post_id": 27953629, "comment_id": 44302491, "body": "@Barmar a 36-bit computer wouldn&#39;t define the <code>uintXX_t</code> types so it&#39;s an irrelevant question."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1421275025, "post_id": 27953629, "comment_id": 44302550, "body": "@Mark Ransom I think you mean <code>uint8_t</code>, <code>uint16_t</code>, etc. (OP&#39;s types)  <code>uint36_t</code> would likely be fine on a 36-bit machine."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1421275042, "post_id": 27953629, "comment_id": 44302556, "body": "do not use <code>typedef struct { ... } foobar;</code> structure, especially in C++, it&#39;s evil"}, {"owner": {"reputation": 2654, "user_id": 1646996, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e1927a513875cef7a1c2877fdb6b45ae?s=128&d=identicon&r=PG", "display_name": "qqibrow", "link": "https://stackoverflow.com/users/1646996/qqibrow"}, "edited": false, "score": 0, "creation_date": 1421275268, "post_id": 27953629, "comment_id": 44302655, "body": "Writing some functional tests for it is best if this is in production. You can make sure your function is working regardless of compilers."}], "answers": [{"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": true, "score": 4, "last_activity_date": 1421276351, "last_edit_date": 1495542783, "creation_date": 1421275091, "answer_id": 27953756, "question_id": 27953629, "link": "https://stackoverflow.com/questions/27953629/if-i-lay-out-the-fields-of-my-struct-so-they-shouldnt-need-any-padding-can-a-c/27953756#27953756", "title": "If I lay out the fields of my struct so they shouldn&#39;t need any padding, can a conforming C++ compiler add extra anyway?", "body": "<p>You are correct, that C++ may pad arbitrarily. From C++.11 &sect;9.2&para;14 (emphasis is mine):</p>\n\n<blockquote>\n  <p>Nonstatic data members of a (non-union) class with the same access control (Clause 11) are allocated so that later members have higher addresses within a class object. The order of allocation of non-static data members with different access control is unspecified (11). <strong>Implementation alignment requirements might cause two adjacent members not to be allocated immediately after each other</strong>; so might requirements for space for managing virtual functions (10.3) and virtual base classes (10.1).</p>\n</blockquote>\n\n<p>C is also permitted to add padding bytes, so this is not peculiar to C++. From C.11 &sect;6.7.2.1&para;15 (emphasis is mine):</p>\n\n<blockquote>\n  <p>Within a structure object, the non-bit-field members and the units in which bit-fields reside have addresses that increase in the order in which they are declared. A pointer to a structure object, suitably converted, points to its initial member (or if that member is a bit-field, then to the unit in which it resides), and vice versa. <strong>There may be unnamed padding within a structure object</strong>, but not at its beginning.</p>\n</blockquote>\n\n<p>If you want to avoid padding, the only maximally portable way is to pack the data structure yourself into contiguous memory (e.g., a <code>vector</code>) when sending, and unpack the serialized data into your data structure when receiving. Your compiler may provide extensions to allow you to keep all members within your <code>struct</code> contiguous (e.g., GCC's <code>packed</code> attribute, or VC++'s <code>pack</code> pragma, as described <a href=\"https://stackoverflow.com/a/1545341/315052\">here</a>).</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1421280176, "post_id": 27954102, "comment_id": 44304430, "body": "<i>Standard layout</i> is relevant here (this is a superset of PODs)"}, {"owner": {"reputation": 3271, "user_id": 3917, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/91cbf94fa69798898a7fec53457fbe49?s=128&d=identicon&r=PG", "display_name": "Martin C. Martin", "link": "https://stackoverflow.com/users/3917/martin-c-martin"}, "edited": false, "score": 0, "creation_date": 1421600113, "post_id": 27954102, "comment_id": 44411817, "body": "Although it&#39;s byte-to-byte compatible with the same structure defined in C code, the C code version suffers from the same problem: arbitrary padding."}, {"owner": {"reputation": 911, "user_id": 4433969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8322e261ca132ca41379ee7d605181?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Zavaritsky", "link": "https://stackoverflow.com/users/4433969/nick-zavaritsky"}, "reply_to_user": {"reputation": 3271, "user_id": 3917, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/91cbf94fa69798898a7fec53457fbe49?s=128&d=identicon&r=PG", "display_name": "Martin C. Martin", "link": "https://stackoverflow.com/users/3917/martin-c-martin"}, "edited": false, "score": 0, "creation_date": 1421626339, "post_id": 27954102, "comment_id": 44419920, "body": "@MartinC.Martin so the alignment of fixed width integer types is not spelled out in the standard? Weird. Now I am going to rewrite all my code that makes a lame assumption that the number of bits in a byte equals 8, must use CHAR_BIT instead."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1471550678, "post_id": 27954102, "comment_id": 65404122, "body": "@NickZavaritsky: The authors of C89 didn&#39;t want to prevent C from being useful on platforms with really weird alignment requirements, and didn&#39;t think it necessary to say &quot;Don&#39;t be stupid or obtuse&quot; to make compiler writers refrain from inserting padding that serves no purpose on the intended target.  Unfortunately, a lot of things that would have been properly recognized as obtuse 25 years ago are fashionable today."}], "owner": {"reputation": 911, "user_id": 4433969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f8322e261ca132ca41379ee7d605181?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Zavaritsky", "link": "https://stackoverflow.com/users/4433969/nick-zavaritsky"}, "is_accepted": false, "score": 1, "last_activity_date": 1421276648, "creation_date": 1421276648, "answer_id": 27954102, "question_id": 27953629, "link": "https://stackoverflow.com/questions/27953629/if-i-lay-out-the-fields-of-my-struct-so-they-shouldnt-need-any-padding-can-a-c/27954102#27954102", "title": "If I lay out the fields of my struct so they shouldn&#39;t need any padding, can a conforming C++ compiler add extra anyway?", "body": "<p>There is such a thing in C++ called POD for plain-old-data. Basically if certain restrictions are met a struct in C++ is POD and it is going to be byte-to-byte compatible with the same structure defined in C code.</p>\n\n<p>To be POD, a structure must have no access specifiers (public, private), and no non-static member functions, including operators, constructors and destructors.</p>\n"}, {"comments": [{"owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "edited": false, "score": 1, "creation_date": 1421280094, "post_id": 27954295, "comment_id": 44304405, "body": "The best practical answer."}], "owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "is_accepted": false, "score": 6, "last_activity_date": 1421277642, "creation_date": 1421277642, "answer_id": 27954295, "question_id": 27953629, "link": "https://stackoverflow.com/questions/27953629/if-i-lay-out-the-fields-of-my-struct-so-they-shouldnt-need-any-padding-can-a-c/27954295#27954295", "title": "If I lay out the fields of my struct so they shouldn&#39;t need any padding, can a conforming C++ compiler add extra anyway?", "body": "<p>This isn't worth fretting about, just let the compiler tell you that it is weird:</p>\n\n<pre><code>  static_assert(sizeof(request_header) == 24, \"Unexpected packet size\");\n</code></pre>\n"}], "owner": {"reputation": 3271, "user_id": 3917, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/91cbf94fa69798898a7fec53457fbe49?s=128&d=identicon&r=PG", "display_name": "Martin C. Martin", "link": "https://stackoverflow.com/users/3917/martin-c-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 27953756, "answer_count": 3, "score": 3, "last_activity_date": 1421277642, "creation_date": 1421274518, "question_id": 27953629, "link": "https://stackoverflow.com/questions/27953629/if-i-lay-out-the-fields-of-my-struct-so-they-shouldnt-need-any-padding-can-a-c", "title": "If I lay out the fields of my struct so they shouldn&#39;t need any padding, can a conforming C++ compiler add extra anyway?", "body": "<p>I want to format a packet in an existing binary protocol format (I'm writing a memcached client) in C++.  In C, I can do this:</p>\n\n<pre><code>    typedef struct {\n        uint8_t magic;\n        uint8_t opcode;\n        uint16_t keylen;\n        uint8_t extlen;\n        uint8_t datatype;\n        uint16_t reserved;\n        uint32_t bodylen;\n        uint32_t opaque;\n        uint64_t cas;\n    } request_header;\n</code></pre>\n\n<p>In C++, in general, the compiler can add padding between the fields.  However, the above struct is carefully laid out so that everything can be aligned with no padding, assuming n bit types only need to be aligned on n bit boundaries.  So in C++, according to the standard, am I safe?  Or could a conforming C++ compiler add extra padding, thwarting my ability to use this to lay out my bits?</p>\n"}, {"tags": ["c++", "opengl", "visual-studio-2013", "nuget"], "answers": [{"owner": {"reputation": 1025, "user_id": 3021309, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b70e762c0b1409c1f2ce8c994e89b783?s=128&d=identicon&r=PG&f=1", "display_name": "itmuckel", "link": "https://stackoverflow.com/users/3021309/itmuckel"}, "is_accepted": false, "score": 5, "last_activity_date": 1433703281, "creation_date": 1433703281, "answer_id": 30697287, "question_id": 27953615, "link": "https://stackoverflow.com/questions/27953615/how-to-setup-nupengl-and-include-it-in-a-visual-studio-project/30697287#30697287", "title": "How to setup NupenGL and include it in a Visual Studio project", "body": "<p>Be sure that nupengl.core and nupengl.core.redist are listed in your packages.config (look for it in your Project-Explorer on the right).\nIn your project folder there should be also two nupengl folders inside the \"packages\" directory.</p>\n\n<p>Then type <code>#include \"GL</code> in your .cpp file. Intellisense should then show you the path of the GL directory inside your nupengl directory as a tooltip.\nSo just type</p>\n\n<pre><code>#include \"GL\\freeglut.h\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#include \"GL\\glut.h\"\n</code></pre>\n\n<p>to use OpenGL-Functions in your code.</p>\n"}], "owner": {"reputation": 2581, "user_id": 1234443, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/9f4a7a9822caa42024e8e76b36e26964?s=128&d=identicon&r=PG", "display_name": "jchitel", "link": "https://stackoverflow.com/users/1234443/jchitel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3388, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493523762, "creation_date": 1421274441, "question_id": 27953615, "link": "https://stackoverflow.com/questions/27953615/how-to-setup-nupengl-and-include-it-in-a-visual-studio-project", "title": "How to setup NupenGL and include it in a Visual Studio project", "body": "<p>I need to setup Visual Studio with OpenGL for a class. I found a <a href=\"http://in2gpu.com/2014/11/29/setting-opengl-visual-studio-using-nuget/\" rel=\"nofollow\">site</a> that explains how to install the NupenGL package through NuGet to get the OpenGL libraries and headers. I follow the instructions and see that everything gets installed to a packages/ folder in my solution folder, but absolutely nothing happens to my project that allows those files to be included.</p>\n\n<p>What do I have to do to include the libraries and headers from the NupenGL package into my project so that it can build OpenGL code?</p>\n"}, {"tags": ["c++", "singleton", "software-design"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1421273866, "post_id": 27953431, "comment_id": 44302007, "body": "<code>reinterpret_cast&lt;DBGameServer *&gt;</code> should be a <code>static_cast</code>. But seriously, it&#39;s completely unclear for me, what you want to achieve with the <i>wrapper</i>. Why not use abstract interfaces instead, and expose these to the modules, that should use them?"}, {"owner": {"reputation": 10668, "user_id": 1062250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7bed607125818c218b48621d4a37a2?s=128&d=identicon&r=PG", "display_name": "nullptr", "link": "https://stackoverflow.com/users/1062250/nullptr"}, "edited": false, "score": 0, "creation_date": 1421273890, "post_id": 27953431, "comment_id": 44302018, "body": "<code>reinterpret_cast&lt;DBGameServer*&gt;</code> is bad: the object created by <code>getInstance()</code> is <code>GameServer</code>, not <code>DBGameServer</code>. Also, some potential errors: 1) someone calls <code>stop()</code>, and after that someone uses the singleton; 2) getInstance is not thread-safe."}, {"owner": {"reputation": 1512, "user_id": 853344, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UP1oL.jpg?s=128&g=1", "display_name": "Mr Mush", "link": "https://stackoverflow.com/users/853344/mr-mush"}, "edited": false, "score": 0, "creation_date": 1421274928, "post_id": 27953431, "comment_id": 44302507, "body": "What is exactly your question?"}, {"owner": {"reputation": 109, "user_id": 3743752, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a5e61a398d43ee2f39feea323e35fa34?s=128&d=identicon&r=PG&f=1", "display_name": "scopichmu", "link": "https://stackoverflow.com/users/3743752/scopichmu"}, "reply_to_user": {"reputation": 1512, "user_id": 853344, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/UP1oL.jpg?s=128&g=1", "display_name": "Mr Mush", "link": "https://stackoverflow.com/users/853344/mr-mush"}, "edited": false, "score": 0, "creation_date": 1421311011, "post_id": 27953431, "comment_id": 44312676, "body": "@MrMush I want to have one entity which will be safety used from different part of the program for example: database module hasn&#39;t permits for calling GameServer::stop () that why I have created separate class DBGameServer, which hasn&#39;t operation stop() so it can safety uses with DB module."}, {"owner": {"reputation": 109, "user_id": 3743752, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a5e61a398d43ee2f39feea323e35fa34?s=128&d=identicon&r=PG&f=1", "display_name": "scopichmu", "link": "https://stackoverflow.com/users/3743752/scopichmu"}, "reply_to_user": {"reputation": 10668, "user_id": 1062250, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d7bed607125818c218b48621d4a37a2?s=128&d=identicon&r=PG", "display_name": "nullptr", "link": "https://stackoverflow.com/users/1062250/nullptr"}, "edited": false, "score": 0, "creation_date": 1421313180, "post_id": 27953431, "comment_id": 44313671, "body": "@Inspired 1) Method stop() is accessible only from GameServer class, and from classes &#39;wrappers&#39; this operation isn&#39;t accessible because i&#39;m using protected inheritance between classes &#39;wrappers&#39; and GameServer, so stop() could call only from one place (from function main())."}], "answers": [{"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1421321157, "creation_date": 1421321157, "answer_id": 27962337, "question_id": 27953431, "link": "https://stackoverflow.com/questions/27953431/safety-using-entity-from-different-part-of-program/27962337#27962337", "title": "Safety using entity from different part of program", "body": "<p>You are creating your singleton instance at first call to <code>getIntance</code>. It may be unsafe in a multithreaded application : race conditions could lead to multiple instances being actually intialized and used.</p>\n\n<p>IMHO you would better use static initialization :</p>\n\n<p>Declaration :</p>\n\n<pre><code>...\nclass GameServer {\n    static GameServer&amp; instance;\n    // private constructor, copie constructor and destructor\n    ...\npublic:\n    static GameServer * getInstance() { return &amp;instance; }\n    ...\n}\n</code></pre>\n\n<p>Implementation :</p>\n\n<pre><code>...\nGameServer &amp; GameServer::instance = GameServer();\n...\n</code></pre>\n\n<p>That way you are sure that the object is constructed only once during program start (before first instruction), and destructor is called at program end (after last instruction). Of course if constructor throws an exception the program will stop abruptly  before it is given any chance to display anything : the eventual error messages should be displayed inside constructor.</p>\n"}], "owner": {"reputation": 109, "user_id": 3743752, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a5e61a398d43ee2f39feea323e35fa34?s=128&d=identicon&r=PG&f=1", "display_name": "scopichmu", "link": "https://stackoverflow.com/users/3743752/scopichmu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421442434, "creation_date": 1421273615, "last_edit_date": 1421442434, "question_id": 27953431, "link": "https://stackoverflow.com/questions/27953431/safety-using-entity-from-different-part-of-program", "title": "Safety using entity from different part of program", "body": "<p>I have several modules in my program (e.g. Database, Scheduler) which uses same entity - some game server.</p>\n\n<p>Main goal is that each module uses game server API with limited functionality (functionality which need for interaction between separate module and game server only) and other functions must be hide.</p>\n\n<p>I have created such functionality. But I don't now, maybe it's wrong realization or maybe somebody guess better method.</p>\n\n<p>Class which placed below contain some operations which can be access only from others modules via classes wrappers.</p>\n\n<pre><code>#ifndef _GAMESERVER_\n#define _GAMESERVER_\n\n#include &lt;vector&gt;\n\nclass GameServer\n{\n        static GameServer instance;\n        std::vector&lt;int&gt; game_actions;\n        GameServer(){}\n        ~GameServer(){}\n        GameServer(const GameServer&amp;){}\n\nprotected:\n        void addGameAction(int action) // Some functionality, which can be accessible     only from others modules via classes wrapers\n        {\n                game_actions.push_back(action);\n        }\n\npublic:\n        static GameServer *getInstance()\n        {\n                return &amp;instance;\n        }\n        bool start()\n        {\n                return true;\n        }\n        void stop()\n        {\n        }\n};\n#endif\n</code></pre>\n\n<p>Below placed class 'wrapper' for class GameServer which has been realising API for interaction with module Database.</p>\n\n<pre><code>#ifndef _DBGAMESERVER_\n#define _DBGAMESERVER_\n\n/* Database module will use this API for interacting with game server */\n\nclass GameServer;\n\nclass DBGameServer : protected GameServer\n{\n        DBGameServer();\n\n public:\n        static DBGameServer *getInstance()\n        {\n                return static_cast&lt;DBGameServer *&gt;(GameServer::getInstance());\n        }\n        void addGameAction(int action)\n        {\n                GameServer::addGameAction(action);\n        }\n};\n#endif\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "random", "probability"], "comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1421273728, "post_id": 27953386, "comment_id": 44301950, "body": "See <a href=\"http://stackoverflow.com/questions/2649717/c-function-for-picking-from-a-list-where-each-element-has-a-distinct-probabili?rq=1\">this question</a> for some inspiration."}, {"owner": {"reputation": 102, "user_id": 4426161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/127084f360484ef27fdf0dddb22110ab?s=128&d=identicon&r=PG&f=1", "display_name": "Happy Hippo", "link": "https://stackoverflow.com/users/4426161/happy-hippo"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 1, "creation_date": 1421274091, "post_id": 27953386, "comment_id": 44302125, "body": "I think it&#39;s 1/36 %. The first spin is independent. The next two are dependent. 6/6*1/6*1/6=1/36.  Which is still a mere 2.77 percent"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421274474, "post_id": 27953386, "comment_id": 44302302, "body": "@TristanZickovich: On a slot machine, how is the 2nd wheel dependent on the first?"}, {"owner": {"reputation": 102, "user_id": 4426161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/127084f360484ef27fdf0dddb22110ab?s=128&d=identicon&r=PG&f=1", "display_name": "Happy Hippo", "link": "https://stackoverflow.com/users/4426161/happy-hippo"}, "edited": false, "score": 1, "creation_date": 1421274475, "post_id": 27953386, "comment_id": 44302303, "body": "But the first spin can be anything. Then the next two have to be the same, so only the second two have 1/6, right?"}, {"owner": {"reputation": 102, "user_id": 4426161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/127084f360484ef27fdf0dddb22110ab?s=128&d=identicon&r=PG&f=1", "display_name": "Happy Hippo", "link": "https://stackoverflow.com/users/4426161/happy-hippo"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421274558, "post_id": 27953386, "comment_id": 44302344, "body": "@ThomasMatthews: it&#39;s dependent if you&#39;re looking for a matching number.  Depending on what you get for the first, the second and third must follow to be a winner"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421274571, "post_id": 27953386, "comment_id": 44302350, "body": "In a 3 wheel slot machine, the wheels are independent of each other.  This allows each wheel to display the same value, which ends up in a win."}], "answers": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": true, "score": 6, "last_activity_date": 1421274538, "last_edit_date": 1421274538, "creation_date": 1421273994, "answer_id": 27953521, "question_id": 27953386, "link": "https://stackoverflow.com/questions/27953386/rand-function-generate-probability-across-3-values-for-simple-slot-machine/27953521#27953521", "title": "Rand function, generate probability across 3 values (for simple slot machine)?", "body": "<p>Cheat.</p>\n\n<p>Decide <strong>first</strong> if the player wins or not</p>\n\n<pre><code>const bool winner = ( rand() % 100 ) &lt; 40 // 40 % odds (roughly)\n</code></pre>\n\n<p><strong>Then</strong> invent an outcome that supports your decision.</p>\n\n<pre><code>if ( winner )\n{\n   // Pick the one winning fruit.\n   this-&gt;slotOne = this-&gt;slotTwo = this-&gt;slotThree = rand() % 6 + 1;  \n}\nelse\n{\n   // Pick a failing combo.\n   do\n   {\n        this-&gt;slotOne = rand() % 6 + 1;    \n        this-&gt;slotTwo = rand() % 6 + 1;    \n        this-&gt;slotThree = rand() % 6 + 1;    \n   } while ( slotOne == slotTwo &amp;&amp; slotTwo == slotThree );\n}\n</code></pre>\n\n<p>You can now toy with the player's emotions like the Vegas best. </p>\n"}], "owner": {"reputation": 102, "user_id": 4426161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/127084f360484ef27fdf0dddb22110ab?s=128&d=identicon&r=PG&f=1", "display_name": "Happy Hippo", "link": "https://stackoverflow.com/users/4426161/happy-hippo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "accepted_answer_id": 27953521, "answer_count": 1, "score": 1, "last_activity_date": 1421274538, "creation_date": 1421273376, "question_id": 27953386, "link": "https://stackoverflow.com/questions/27953386/rand-function-generate-probability-across-3-values-for-simple-slot-machine", "title": "Rand function, generate probability across 3 values (for simple slot machine)?", "body": "<p>I am making a simple (terminal) slot machine project, in which 3 fruit names will be output in the terminal, and if they are all the same then the player wins.</p>\n\n<p>I cannot figure out how to make a set probability that the player will win the round (roughly 40% chance for example). As of now I have:</p>\n\n<pre><code>     this-&gt;slotOne = rand() % 6 + 1;              // chooses rand number for designated slot\n     this-&gt;oneFruit = spinTOfruit(this-&gt;slotOne); //converts rand number to fruit name\n\n     this-&gt;slotTwo = rand() % 6 + 1;\n     this-&gt;twoFruit = spinTOfruit(this-&gt;slotTwo);\n\n     this-&gt;slotThree = rand() % 6 + 1;\n     this-&gt;threeFruit = spinTOfruit(this-&gt;slotThree);\n</code></pre>\n\n<p>which picks a \"fruit\" based on the number, but each of the three slots has a 1 in 6 chance (seeing that there are 6 fruits). Since each individual slot has a 1/6 chance, overall the probability of winning is incredibly low.</p>\n\n<p>How would I fix this to create better odds (or even better, chosen odds, changing the odds when desired)?</p>\n\n<p>I thought of changing the second two spins to less options (rand()%2 for instance), but that would make the last two slots choose the same couple fruits every time.</p>\n\n<p>The link to my project: <a href=\"https://github.com/tristanzickovich/slotmachine\" rel=\"nofollow\">https://github.com/tristanzickovich/slotmachine</a></p>\n"}, {"tags": ["c++", "c++11", "std-function"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "edited": false, "score": 1, "creation_date": 1421274072, "post_id": 27953503, "comment_id": 44302114, "body": "If he&#39;s doing <code>C()</code>, then the scope of the object will be limited anyway."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1421274113, "post_id": 27953503, "comment_id": 44302135, "body": "Of course, this isn&#39;t utilizing in-place construction but rather no construction at all.  But still worth mentioning and probably useful sometimes somehow."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1421274315, "post_id": 27953503, "comment_id": 44302230, "body": "Well, no construction inside the function object. ;-)"}, {"owner": {"reputation": 1335, "user_id": 2551720, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6100f1f9eaa5486262eff6b12005252b?s=128&d=identicon&r=PG", "display_name": "Smiles", "link": "https://stackoverflow.com/users/2551720/smiles"}, "edited": false, "score": 0, "creation_date": 1421274323, "post_id": 27953503, "comment_id": 44302234, "body": "If I have to maintain the lifetime of the object anyway, why not then use <code>function&lt;void()&gt; f = std::ref(C)</code>?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1421274389, "post_id": 27953503, "comment_id": 44302269, "body": "@5gon12eder good point, added example for in-place construction."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1421274750, "post_id": 27953503, "comment_id": 44302419, "body": "That last version is very interesting.  (Honestly, I&#39;m a little surprised that it works.)  If we are worried about the cost of copying the functor, it is probably large so <code>std::function</code> would have allocated memory anyway, so, assuming the shared pointer is small enough to make <code>std::function</code> utilize its small object optimization, we can create the functor on the free store anyway at no additional cost."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 1335, "user_id": 2551720, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6100f1f9eaa5486262eff6b12005252b?s=128&d=identicon&r=PG", "display_name": "Smiles", "link": "https://stackoverflow.com/users/2551720/smiles"}, "edited": false, "score": 0, "creation_date": 1421274796, "post_id": 27953503, "comment_id": 44302437, "body": "@Cynic added example where you do not need to maintain lifetime of the object"}], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 4, "last_activity_date": 1421274349, "last_edit_date": 1421274349, "creation_date": 1421273922, "answer_id": 27953503, "question_id": 27953336, "link": "https://stackoverflow.com/questions/27953336/constructing-stdfunction-target-in-place/27953503#27953503", "title": "Constructing std::function target in-place", "body": "<p>You can use <code>std::bind</code> but you do not really need to implement <code>operator()</code> for that:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    C c;\n    function&lt;void()&gt; f = std::bind( &amp;C::operator(), &amp;c );\n    f();\n    return 0;\n}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>CREATING\nCALLING\nDELETING\n</code></pre>\n\n<p>of course you need to properly maintain lifetime of object c in this case.\nTo make <code>std::function</code> to own <code>C</code> instance and make it more in-place construction <code>std::shared_ptr</code> can be used:</p>\n\n<pre><code>int main(int argc, char *argv[]) {\n    function&lt;void()&gt; f = std::bind( &amp;C::operator(), std::make_shared&lt;C&gt;() );\n    f();\n    return 0;\n}\n</code></pre>\n"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1421275776, "creation_date": 1421275776, "answer_id": 27953906, "question_id": 27953336, "link": "https://stackoverflow.com/questions/27953336/constructing-stdfunction-target-in-place/27953906#27953906", "title": "Constructing std::function target in-place", "body": "<p>The way that <code>function</code> is constructed from any functor <code>F f</code> is stipulated by the standard in \u00a720.9.11.2.1 as (assuming <code>f</code> is a non-null, emphasis mine):</p>\n\n<blockquote>\n  <p><code>*this</code> targets a <strong>copy</strong> of <code>f</code> initialized with <strong><code>std::move(f)</code></strong></p>\n</blockquote>\n\n<p>So there is no way to in-place construct a <code>function</code>. That leaves you with a choice between incurring that move:</p>\n\n<pre><code>function&lt;void()&gt; f1 = C{};\n</code></pre>\n\n<p>Or passing in some wrapper around <code>C</code> that is cheaper to move/copy, either one in which you manage externally:</p>\n\n<pre><code>C manage_me;\nfunction&lt;void()&gt; f2 = std::ref(manage_me);\n</code></pre>\n\n<p>... or an allocated one bound to <code>operator()</code>:</p>\n\n<pre><code>function&lt;void()&gt; f3 = std::bind(&amp;C::operator(), std::make_shared&lt;C&gt;());\n</code></pre>\n\n<p>That last one could cause some headaches if <code>operator()</code> happens to be overloaded, as you'd have to cast it to the right type, which is an issue that none of the previous versions have to deal with.</p>\n\n<pre><code>function&lt;void()&gt; f4 = std::bind(\n                          static_cast&lt;void(C::*)()&gt;(&amp;C::operator()),\n                          std::make_shared&lt;C&gt;()\n                          );\n</code></pre>\n"}], "owner": {"reputation": 1335, "user_id": 2551720, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/6100f1f9eaa5486262eff6b12005252b?s=128&d=identicon&r=PG", "display_name": "Smiles", "link": "https://stackoverflow.com/users/2551720/smiles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "accepted_answer_id": 27953906, "answer_count": 2, "score": 5, "last_activity_date": 1421275776, "creation_date": 1421273189, "last_edit_date": 1421273580, "question_id": 27953336, "link": "https://stackoverflow.com/questions/27953336/constructing-stdfunction-target-in-place", "title": "Constructing std::function target in-place", "body": "<p>What I understand as a typical use of <code>std::function</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\nclass C {\npublic: \n    C() { cout &lt;&lt; \"CREATING\" &lt;&lt; endl; }\n    C(const C&amp;) { cout &lt;&lt; \"COPY C \"&lt;&lt; endl; };\n    C(C&amp;&amp;) { cout &lt;&lt; \"MOVE C \" &lt;&lt; endl; };\n    ~C() { cout &lt;&lt; \"DELETING\"&lt;&lt; endl; }\n    C&amp; operator =(const C&amp;) {\n        cout &lt;&lt; \"COPY A \" &lt;&lt; endl; return *this;\n    };\n    C&amp; operator =(C&amp;&amp;) {\n        cout &lt;&lt; \"MOVE A\" &lt;&lt; endl; return *this;\n    };\n    void operator ()() const { cout &lt;&lt; \"CALLING\" &lt;&lt; endl; }\n};\n\nint main(int argc, char *argv[]) {\n    function&lt;void()&gt; f = C();\n    f();\n    return 0;\n}\n</code></pre>\n\n<p>yields following output</p>\n\n<pre><code>CREATING\nMOVE C\nDELETING\nCALLING\nDELETING\n</code></pre>\n\n<p>Apparently, temporary object is created on stack and then moved into function object. If move constructor is not provided, it is copied instead.<br>\nIs there a standard way of setting the target without need for a temporary object?</p>\n"}, {"tags": ["c++", "cmake", "poco-libraries"], "answers": [{"comments": [{"owner": {"reputation": 989, "user_id": 755512, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/164afd5db3253db127dbdf1fbe3f744a?s=128&d=identicon&r=PG&f=1", "display_name": "Barzo", "link": "https://stackoverflow.com/users/755512/barzo"}, "edited": false, "score": 0, "creation_date": 1421308567, "post_id": 27957259, "comment_id": 44311680, "body": "Hi Alex, thanks for the reply. I know how linking works :) My doubt is only which name I have to use in FIND_LIBRARY(). If in Windows there is the suffix to distinguish between various kind of builds, in Linux there is the extension only (.a or .so). So if I write &#39;PocoFoundationmt&#39; maybe is valid only for Windows. I&#39;m asking myself is there a way to use the same directive both for every systems."}, {"owner": {"reputation": 4504, "user_id": 205386, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/870668e636ef0dee2a380bfa4efccfc0?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/205386/alex"}, "reply_to_user": {"reputation": 989, "user_id": 755512, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/164afd5db3253db127dbdf1fbe3f744a?s=128&d=identicon&r=PG&f=1", "display_name": "Barzo", "link": "https://stackoverflow.com/users/755512/barzo"}, "edited": false, "score": 1, "creation_date": 1421328260, "post_id": 27957259, "comment_id": 44321783, "body": "Use if(WIN32) to detect the OS."}], "owner": {"reputation": 4504, "user_id": 205386, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/870668e636ef0dee2a380bfa4efccfc0?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/205386/alex"}, "is_accepted": true, "score": 3, "last_activity_date": 1421300156, "last_edit_date": 1421300156, "creation_date": 1421299215, "answer_id": 27957259, "question_id": 27953332, "link": "https://stackoverflow.com/questions/27953332/link-poco-static-library-to-target-in-cmake/27957259#27957259", "title": "Link poco static library to target in cmake", "body": "<p>You never link with a Poco DLL on windows, not even when you use shared Poco libraries. Linking is always with entries in the %POCO_BASE%/lib. For shared builds, .lib is just a stub (\"import library\") that takes care of loading the DLL at runtime. See <a href=\"http://msdn.microsoft.com/en-us/library/d14wsce5.aspx\" rel=\"nofollow\">Linking Implicitly</a> for details on how this works.</p>\n\n<p>Poco static libraries can be distinguished from the import libraries for DLLs by the file name - static libs have \"mt\" (\"mtd\" for debug binaries, \"md\" and \"mdd\" when runtime library DLLs are used) appended to the name. So the import library for PocoFoundation.dll will be named PocoFoundation.lib, while the static library using static runtimes is named PocoFoundationmt.lib. Static library using dynamic runtimes is PocoFoundationmd.lib. See <a href=\"http://msdn.microsoft.com/en-us/library/2kzt1wy3.aspx\" rel=\"nofollow\">Use Run-Time Library</a> for details.</p>\n\n<p>As for CMake, I am not an expert, but for e.g. static Foundation and Net libraries should be something like this:</p>\n\n<pre><code>FIND_LIBRARY(Poco_LIBRARIES NAMES PocoFoundationmt PocoNetmt PATH_SUFFIXES ${POCO_DIR}/lib)\n</code></pre>\n\n<p>EDIT: If you define POCO_STATIC in your project, static linking will be automatic through library headers, see e.g. <a href=\"https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/Foundation.h#L68\" rel=\"nofollow\">Foundation.h</a>. </p>\n"}], "owner": {"reputation": 989, "user_id": 755512, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/164afd5db3253db127dbdf1fbe3f744a?s=128&d=identicon&r=PG&f=1", "display_name": "Barzo", "link": "https://stackoverflow.com/users/755512/barzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3848, "favorite_count": 1, "accepted_answer_id": 27957259, "answer_count": 1, "score": 1, "last_activity_date": 1421300156, "creation_date": 1421273171, "question_id": 27953332, "link": "https://stackoverflow.com/questions/27953332/link-poco-static-library-to-target-in-cmake", "title": "Link poco static library to target in cmake", "body": "<p>I read a lot of post but I don't yet well understood how to link my target to a static version of a library.</p>\n\n<p>My project depends on poco libraries and, while in linux they are stored in /usr/local/lib (both the static and shared versions) in my windows machine are in d:\\libs\\poco\\lib and d:\\libs\\poco\\bin (where I have an enviroment variable called POCO_DIR = D:\\libs\\poco)</p>\n\n<p>So, how can I have to write the find_library() directive in cmake file?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++"], "answers": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1421273663, "last_edit_date": 1421273663, "creation_date": 1421273337, "answer_id": 27953380, "question_id": 27953224, "link": "https://stackoverflow.com/questions/27953224/get-value-from-a-class-member-being-a-pointer-that-is-a-property-of-a-class/27953380#27953380", "title": "Get value from a class member being a pointer, that is a property of a class", "body": "<p>Assuming you meant:</p>\n\n<pre><code>class Paper_class{\n   Paper_class(Rectangle rect);\n   ~Paper_class();\n   Rectangle * rectangle1;\n}\n\nPaper_class::Paper_class(Rectangle rect){\n   rectangle1 = &amp;rect;\n}\n\nPaper_class::~Paper_class(){\n   delete rectangle1;\n}\n</code></pre>\n\n<p>Use</p>\n\n<pre><code>cout &lt;&lt; \"rect area: \" &lt;&lt; vec[1].rectangle1-&gt;height &lt;&lt; endl;\n</code></pre>\n\n<p><code>vec[1]</code> evaluates to a <code>Paper_class&amp;</code>.</p>\n\n<p><code>vec[1].rectangle1</code> evaluates to a <code>Rectangle*</code>.</p>\n\n<p><code>vec[1].rectangle1-&gt;height</code> evaluates to a <code>double</code>.</p>\n\n<p><strong>Caution</strong></p>\n\n<p>Your code is going to lead to undefined behavior due to lack of a property copy constructor and copy assignment operator in <code>Paper_Class</code>. Please see <a href=\"http://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow\">The Rule of Three</a> for details.</p>\n"}], "owner": {"reputation": 1543, "user_id": 3020849, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/56b238c1ee61ac5064b891e8f41641e5?s=128&d=identicon&r=PG&f=1", "display_name": "Santi Pe&#241;ate-Vera", "link": "https://stackoverflow.com/users/3020849/santi-pe%c3%b1ate-vera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1421273663, "creation_date": 1421272750, "last_edit_date": 1495535599, "question_id": 27953224, "link": "https://stackoverflow.com/questions/27953224/get-value-from-a-class-member-being-a-pointer-that-is-a-property-of-a-class", "title": "Get value from a class member being a pointer, that is a property of a class", "body": "<p>to illustrate my problem I'm borrowing code from here: <a href=\"https://stackoverflow.com/questions/7988489/get-value-from-a-class-member-being-a-pointer\">Get value from a class member being a pointer</a></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass CRectangle {\n\n  public:\n    int width, height;\n    CRectangle (int,int);\n    ~CRectangle ();\n    int area () {return (width * height);}\n};\n\nCRectangle::CRectangle (int a, int b) {\n  width = new int;\n  height = new int;\n  width = a;\n  height = b;\n}\n\nCRectangle::~CRectangle () {\n}\n\nclass Paper_class{\n   paper(Rectangle rect);\n   ~paper();\n   Rectangle * rectangle1;\n}\n\nPaper_class::paper(Rectangle rect){\n   rectangle1 = &amp;rect;\n}\n\nPaper_class::~paper(){\n   delete rectangle1;\n}\n\nint main () {\n\n\n  vector&lt;Paper_class&gt; vec;\n  vec.push(Paper_class(new CRectangle(10,10)))\n  vec.push(Paper_class(new CRectangle(20,20)))\n  vec.push(Paper_class(new CRectangle(30,30)))\n\n  cout &lt;&lt; \"rect area: \" &lt;&lt; *vec[1]-&gt;rect1.height &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>This line from code does not access the value:</p>\n\n<pre><code>cout &lt;&lt; \"rect area: \" &lt;&lt; *vec[1].rect1-&gt;height &lt;&lt; endl;\n</code></pre>\n\n<p>How can I see the height stored in vec[1] ? (it should be 20)</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "sql", "oracle11g", "oracle-pro-c"], "answers": [{"comments": [{"owner": {"reputation": 193, "user_id": 1124014, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5c6761b3267e2498f0155529fbb0e94a?s=128&d=identicon&r=PG", "display_name": "Steven Stangle", "link": "https://stackoverflow.com/users/1124014/steven-stangle"}, "edited": false, "score": 0, "creation_date": 1424825235, "post_id": 28706321, "comment_id": 45707486, "body": "My question is trying to figure out HOW to use precomp headers"}], "owner": {"reputation": 4146, "user_id": 1799742, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6acabbc18ee5165f1e37fa5e036fad80?s=128&d=identicon&r=PG", "display_name": "pbhd", "link": "https://stackoverflow.com/users/1799742/pbhd"}, "is_accepted": false, "score": 0, "last_activity_date": 1424812211, "creation_date": 1424812211, "answer_id": 28706321, "question_id": 27953218, "link": "https://stackoverflow.com/questions/27953218/precompiled-headers-with-proc/28706321#28706321", "title": "Precompiled Headers with ProC", "body": "<p>Just switch off precompiled headers for that .pc-file. Pro*C is dumb.</p>\n"}], "owner": {"reputation": 193, "user_id": 1124014, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5c6761b3267e2498f0155529fbb0e94a?s=128&d=identicon&r=PG", "display_name": "Steven Stangle", "link": "https://stackoverflow.com/users/1124014/steven-stangle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424812211, "creation_date": 1421272716, "question_id": 27953218, "link": "https://stackoverflow.com/questions/27953218/precompiled-headers-with-proc", "title": "Precompiled Headers with ProC", "body": "<p>I am trying to use Pro*C with C++ to access an SQL database. The problem I am having is when trying to use a precompiled header in the .pc file. The ProC compiler puts the header after it has defined a macro which breaks visual studio. \nIs there a way to force the ProC to generate the CPP with the precompiled header first before the generated SQL structures?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1421272940, "post_id": 27953214, "comment_id": 44301608, "body": "Please post the compiler error, and please tell us which lines are 35 and 36."}, {"owner": {"reputation": 1049, "user_id": 3170912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65c53d46b9f9d295bd161f60ac97c16?s=128&d=identicon&r=PG&f=1", "display_name": "iwolf", "link": "https://stackoverflow.com/users/3170912/iwolf"}, "edited": false, "score": 0, "creation_date": 1421272960, "post_id": 27953214, "comment_id": 44301620, "body": "what did you expect this line to do? <code>payment &gt;&gt; (rate * pow((1 + rate), paymentnumber) &#47; pow((1 + rate), paymentnumber) - 1)*loan;</code> a double can&#39;t be bit-shifted or treated as a stream."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1421273123, "post_id": 27953214, "comment_id": 44301693, "body": "Also, it is <code>int main()</code>, not <code>void main()</code>."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1421273341, "post_id": 27953214, "comment_id": 44301782, "body": "And <a href=\"http://stackoverflow.com/q/1452721/10077\"><code>using namespace std;</code></a> and <a href=\"http://stackoverflow.com/q/1107705/10077\"><code>system(&quot;pause&quot;);</code></a> are both abominations."}], "answers": [{"comments": [{"owner": {"reputation": 1634, "user_id": 2030653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ab1rD.jpg?s=128&g=1", "display_name": "Mustafa", "link": "https://stackoverflow.com/users/2030653/mustafa"}, "reply_to_user": {"reputation": 3, "user_id": 4455306, "user_type": "registered", "profile_image": "https://graph.facebook.com/747024361/picture?type=large", "display_name": "Jacob LeBlanc", "link": "https://stackoverflow.com/users/4455306/jacob-leblanc"}, "edited": false, "score": 0, "creation_date": 1421274745, "post_id": 27953285, "comment_id": 44302418, "body": "Yes, <code>&lt;&lt;</code> is the iostream operator. <code>=</code> is assignment. Accept the answer to mark it as resolved please."}], "owner": {"reputation": 1634, "user_id": 2030653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ab1rD.jpg?s=128&g=1", "display_name": "Mustafa", "link": "https://stackoverflow.com/users/2030653/mustafa"}, "is_accepted": true, "score": 3, "last_activity_date": 1421272985, "creation_date": 1421272985, "answer_id": 27953285, "question_id": 27953214, "link": "https://stackoverflow.com/questions/27953214/interest-rate-calculator-c/27953285#27953285", "title": "Interest Rate Calculator C++", "body": "<p>Fix the typos in your code as per the lines below and it should work fine.</p>\n\n<pre><code>rate = Annualr / 12;\npayment = (rate * pow((1 + rate), paymentnumber) / pow((1 + rate), paymentnumber) - 1)*loan;\n</code></pre>\n"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1421273071, "creation_date": 1421273071, "answer_id": 27953304, "question_id": 27953214, "link": "https://stackoverflow.com/questions/27953214/interest-rate-calculator-c/27953304#27953304", "title": "Interest Rate Calculator C++", "body": "<p>Looks like you are trying to assign value to variables of type <code>double</code> but for whatever reason put <code>operator&gt;&gt;</code> by mistake:</p>\n\n<pre><code>rate = Annualr / 12;\npayment = (rate * pow((1 + rate), paymentnumber) / pow((1 + rate), paymentnumber) - 1)*loan;\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4455306, "user_type": "registered", "profile_image": "https://graph.facebook.com/747024361/picture?type=large", "display_name": "Jacob LeBlanc", "link": "https://stackoverflow.com/users/4455306/jacob-leblanc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 0, "accepted_answer_id": 27953285, "answer_count": 2, "score": -1, "last_activity_date": 1421274346, "creation_date": 1421272693, "last_edit_date": 1421274346, "question_id": 27953214, "link": "https://stackoverflow.com/questions/27953214/interest-rate-calculator-c", "title": "Interest Rate Calculator C++", "body": "<p>I'm trying to make an interest rate calculator. And I keep getting this on these lines</p>\n\n<pre><code>rate &gt;&gt; Annualr / 12.0;\n\n\npayment &gt;&gt; (rate * pow((1 + rate), paymentnumber) / pow((1 + rate), paymentnumber) - 1)*loan;\n</code></pre>\n\n<p>The large equation is supposed to calculate the amount of interest accrued on a loan</p>\n\n<p>\"illegal, left operand has type 'double'\"<br>\n\"illegal, right operand has type 'double'\"</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>#include\r\n&lt;iostream&gt;\r\n  #include\r\n  &lt;string&gt;\r\n    #include\r\n    &lt;cmath&gt;\r\n      #include\r\n      &lt;iomanip&gt;\r\n        using namespace std; void main() { double Annualr = 0.0, loan = 0.0, payment = 0.0, rate = 0.0; int paymentnumber = 0; string fullname; cout\r\n        &lt;&lt; \"Enter the full loan ammount: \"; cin&gt;&gt; loan; cout\r\n          &lt;&lt; \"Enter the Annual interest rate: \"; cin&gt;&gt; Annualr; cout\r\n            &lt;&lt; \"How many payments have you made? \"; cin&gt;&gt; paymentnumber; rate &gt;&gt; Annualr / 12; payment &gt;&gt; (rate * pow((1 + rate), paymentnumber) / pow((1 + rate), paymentnumber) - 1)*loan; cout\r\n              &lt;&lt; \"Loan Ammount: \" &lt;&lt; loan &lt;&lt; endl; cout &lt;&lt; \"Monthly Interest Rate: \" &lt;&lt; rate &lt;&lt; endl; cout &lt;&lt;\r\n              \"Number of Payments: \" &lt;&lt; paymentnumber &lt;&lt; endl; cout &lt;&lt; \"Monthly Payment: \" &lt;&lt; payment &lt;&lt; endl; cout &lt;&lt; \"Ammount paied back: \" &lt;&lt; payment * paymentnumber &lt;&lt; endl; cout &lt;&lt; \"Interestt paied: \" &lt;&lt; loan - (payment * paymentnumber) &lt;&lt; endl; system( \"pause\"); }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["c++", "reference", "queue"], "comments": [{"owner": {"reputation": 7872, "user_id": 440302, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/e785baf6d4a2626b8649d5b538c51858?s=128&d=identicon&r=PG", "display_name": "Rufflewind", "link": "https://stackoverflow.com/users/440302/rufflewind"}, "edited": false, "score": 7, "creation_date": 1421272687, "post_id": 27953171, "comment_id": 44301476, "body": "<a href=\"https://stackoverflow.com/q/922360/440302\">For the same reason as this question</a>, you can&#39;t create a queue of references."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1421273186, "post_id": 27953171, "comment_id": 44301718, "body": "You probably want to pass the parameter to <code>push_back</code> as <code>const Parcel&amp;</code> and store it in a <code>std::queue&lt;Parcel&gt;</code>."}, {"owner": {"reputation": 2972, "user_id": 324922, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/arX7j.jpg?s=128&g=1", "display_name": "Day_Dreamer", "link": "https://stackoverflow.com/users/324922/day-dreamer"}, "edited": false, "score": 0, "creation_date": 1421273329, "post_id": 27953171, "comment_id": 44301776, "body": "does the effect will be that queue will hold pointer to a copy of Parcel object or to the object Parcle&amp; poins to?"}], "owner": {"reputation": 2972, "user_id": 324922, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/arX7j.jpg?s=128&g=1", "display_name": "Day_Dreamer", "link": "https://stackoverflow.com/users/324922/day-dreamer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "closed_date": 1421274254, "answer_count": 0, "score": 0, "last_activity_date": 1421274135, "creation_date": 1421272522, "last_edit_date": 1421274135, "question_id": 27953171, "link": "https://stackoverflow.com/questions/27953171/queue-of-type-c", "closed_reason": "Duplicate", "title": "queue of Type&amp; C++", "body": "<p>I had to use a fixed size queue, which is limited to 5 elements.\nHere is a code, in which I tried to encapsulate the implementation.</p>\n\n<pre><code>typedef enum result{SUCCESS = 1,FAILURE = 0} Result;\n\nclass VehicleParcelQueue::public std::queue&lt;Parcel&amp;&gt;{\n    public:\n        Result push_back(Parcel&amp;){\n            if (size() &gt;= 5) return FAILURE;\n            else{\n                std::queue&lt;Parcel&amp;&gt;::push_back(Parcel&amp;);\n                return SUCCESS;\n            }\n        }\n    };\n</code></pre>\n\n<p>from some reason I'm getting the following error:</p>\n\n<blockquote>\n  <p>error: forming pointer to reference type 'Parcel&amp;'</p>\n</blockquote>\n\n<p>(Parcel is a class I implemented elsewhere)</p>\n\n<p>What am I doing wrong?</p>\n\n<p>thanks</p>\n\n<p>[edit: I looked in the suggested question, but if I change it to:</p>\n\n<pre><code>class VehicleParcelQueue::public std::queue&lt;Parcel*&gt;{\n    public:\n        Result push_back(Parcel*){\n            if (size() &gt;= 5) return FAILURE;\n            else{\n                std::queue&lt;Parcel*&gt;::push_back(Parcel*);\n                return SUCCESS;\n            }\n        }\n    };\n</code></pre>\n\n<p>I still get the same error.</p>\n"}, {"tags": ["c++", "linux", "sockets"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1421272755, "post_id": 27953132, "comment_id": 44301516, "body": "I would take your socket code out of your UI code and wrap it up in a neat little class of its own that you can test separately."}, {"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1421273186, "post_id": 27953132, "comment_id": 44301719, "body": "That&#39;ll certainly be the direction I go once I get it to start listening properly. For now, it&#39;s all in one file just for the sake of simplicity. Once I know what I have to do to listen, I&#39;ll start over with actual objects/etc."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1421274251, "post_id": 27953132, "comment_id": 44302196, "body": "GTK is a venerable C library, not C++. Qt is a C++ one."}, {"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1421274383, "post_id": 27953132, "comment_id": 44302267, "body": "That is evidence of my C roots as well of my bias toward Gnome. ;)"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 1, "creation_date": 1421277733, "post_id": 27953132, "comment_id": 44303622, "body": "@musasabi That&#39;s putting the cart before the horse. You&#39;re doing it in the wrong order. Get it listening properly <i>by</i> removing all the UI code, and then put it together if you really must."}], "answers": [{"comments": [{"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1421274734, "post_id": 27953559, "comment_id": 44302411, "body": "Would that be via fcntl(), F_SETFL, and O_NONBLOCK?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1421277667, "post_id": 27953559, "comment_id": 44303600, "body": "@musasabi You need to use non-blocking sockets <i>if you want the connection to be established asynchronously.</i> There&#39;s nothing about that in your question, so there&#39;s no need to follow this suggestion. In fact &#39;asynchronously&#39; is the wrong term to use here. All that non-blocking mode connect gets you is the ability to shorten the timeout."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1421311092, "post_id": 27953559, "comment_id": 44312712, "body": "@EJP <i>how to write this in such a way that it won&#39;t cause the GTK UI to lock up</i> - you get that when using blocking sockets in UI thread."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1421311160, "post_id": 27953559, "comment_id": 44312762, "body": "@EJP <i>All that non-blocking mode connect gets you is the ability to shorten the timeout.</i> - that is incorrect."}], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": -1, "last_activity_date": 1421274178, "creation_date": 1421274178, "answer_id": 27953559, "question_id": 27953132, "link": "https://stackoverflow.com/questions/27953132/basic-c-sockets-client/27953559#27953559", "title": "Basic C++ sockets client", "body": "<p>You seem to use blocking sockets. <code>connect</code> blocks the thread till it connected or failed. </p>\n\n<p>You need to use non-blocking sockets so that the connection is established asynchronously.</p>\n"}, {"comments": [{"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1421291366, "post_id": 27954243, "comment_id": 44307118, "body": "Thank you. That was clear and obviously something missing. I&#39;ll try it as soon as I get a chance. A question, though: would using non-blocking sockets address the GUI lockup, perhaps?"}, {"owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1421292084, "post_id": 27954243, "comment_id": 44307296, "body": "I just tested it and it did work. I&#39;d still like to hear back on the blocking/non-blocking query, though. =)"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "edited": false, "score": 0, "creation_date": 1421293818, "post_id": 27954243, "comment_id": 44307681, "body": "@musasabi The GUI lockup is causing by doing blocking operations in the GUI thread. <code>select()</code> is a blocking operation. The solution is to do the network operations in a separate thread."}], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": true, "score": 0, "last_activity_date": 1421277338, "creation_date": 1421277338, "answer_id": 27954243, "question_id": 27953132, "link": "https://stackoverflow.com/questions/27953132/basic-c-sockets-client/27954243#27954243", "title": "Basic C++ sockets client", "body": "<p>You're zeroing the FD set and never putting anything into it, so you're selecting on an empty FD set, so nothing ever gets selected as readable, writable, whatever, so you're never actually reading. You need to add <code>sockfd</code> to the FD set, with the appropriate <code>FD_*</code> macro.</p>\n\n<p>You also need to reset the timeout structure every time around the loop.</p>\n\n<p>But as you're using blocking mode there's no need to use <code>select()</code> at all. Just do the <code>recv()</code>. It will block.</p>\n\n<p>NB if <code>recv()</code> returns zero it is end of stream: the peer has disconnected. It is not an error, and calling <code>perror()</code> in this case will only print a random error message. Don't do this.</p>\n"}], "owner": {"reputation": 853, "user_id": 1464937, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/YjsfO.png?s=128&g=1", "display_name": "musasabi", "link": "https://stackoverflow.com/users/1464937/musasabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 27954243, "answer_count": 2, "score": 0, "last_activity_date": 1421277338, "creation_date": 1421272385, "question_id": 27953132, "link": "https://stackoverflow.com/questions/27953132/basic-c-sockets-client", "title": "Basic C++ sockets client", "body": "<p>I'm attempting to recreate a GUI for work from the ground up, and it'll be my first networked application. To that end, I've been reading all the C/C++ sockets tutorial information I can find, but I've coded myself into a useless couple-hundred lines with that information.</p>\n\n<p>There are two problems (that I know of) with the following code:</p>\n\n<p>1) Once it's connected to the port I'm supposed to be listening to, it should immediately receive the string <code>99999999%connect</code>. At that point, I should be able to send a <code>0</code> and start receiving the beginning of the day's data. However, I'm not receiving that first message.</p>\n\n<p>2) I'm not sure how to write this in such a way that it won't cause the GTK UI to lock up. That's some basic stuff, I know, but this whole thing is just an off-the-cuff first attempt at sockets.</p>\n\n<p>Anyway, here's the code:</p>\n\n<pre><code>#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n\n#include &lt;sys/types.h&gt;\n#include &lt;sys/time.h&gt;\n\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n#include &lt;arpa/inet.h&gt;\n\n#include &lt;gtk/gtk.h&gt;\n\n#define UNUSED(x) (void) x\n\ntypedef struct\n{\n  GtkWidget *window, *grid,\n            *labelHost, *labelPort, *textFieldHost, *textFieldPort,\n            *buttonConnect;\n}uiWidgets;\n\nint sockfd = 0;\n\ngboolean on_close_cleanup();\nvoid buttonConnect_on_clicked(GtkButton *button, uiWidgets* widgets);\nvoid connect_to_logview(struct addrinfo *hostname_result);\nvoid listen_for_logview();\n\nint main()\n{\n  uiWidgets widgets;\n\n  gtk_init(NULL, NULL);\n\n  widgets.window = gtk_window_new(GTK_WINDOW_TOPLEVEL);\n  gtk_window_set_title(GTK_WINDOW(widgets.window), \"SG GUI V3.00\");\n  g_signal_connect(widgets.window, \"destroy\", gtk_main_quit, nullptr);\n  g_signal_connect(widgets.window, \"delete-event\", G_CALLBACK(on_close_cleanup),\n                   nullptr);\n\n  widgets.labelHost = gtk_label_new(\"Host\");\n  widgets.labelPort = gtk_label_new(\"Port\");\n\n  widgets.textFieldHost = gtk_entry_new();\n  widgets.textFieldPort = gtk_entry_new();\n\n  widgets.buttonConnect = gtk_button_new_with_label(\"Connect\");\n  g_signal_connect(widgets.buttonConnect, \"clicked\",\n                   G_CALLBACK(buttonConnect_on_clicked),\n                   &amp;widgets);\n\n  widgets.grid = gtk_grid_new();\n  gtk_grid_set_row_spacing(GTK_GRID(widgets.grid), 5);\n  gtk_grid_set_column_homogeneous(GTK_GRID(widgets.grid), true);\n  gtk_grid_set_row_homogeneous(GTK_GRID(widgets.grid), true);\n\n  gtk_grid_attach(GTK_GRID(widgets.grid), widgets.labelHost, 0, 0, 1, 1);\n  gtk_grid_attach(GTK_GRID(widgets.grid), widgets.labelPort, 2, 0, 1, 1);\n  gtk_grid_attach(GTK_GRID(widgets.grid), widgets.textFieldHost, 0, 1, 2, 1);\n  gtk_grid_attach(GTK_GRID(widgets.grid), widgets.textFieldPort, 2, 1, 1, 1);\n  gtk_grid_attach(GTK_GRID(widgets.grid), widgets.buttonConnect,  1, 2, 1, 1);\n\n  gtk_container_add(GTK_CONTAINER(widgets.window), widgets.grid);\n  gtk_widget_show_all(widgets.window);\n\n  gtk_main();\n\n  return 0;\n}\n\ngboolean on_close_cleanup()\n{\n  close(sockfd);\n  return false;\n}\n\nvoid buttonConnect_on_clicked(GtkButton *button, uiWidgets* widgets)\n{\n  UNUSED(button);\n  struct addrinfo hints, *hostname_result;\n  struct sockaddr_in *hostname_address;\n  const gchar *hostname = gtk_entry_get_text(GTK_ENTRY(widgets-&gt;textFieldHost));\n  int return_value;\n  gchar addr[INET_ADDRSTRLEN];\n\n  memset(&amp;hints, 0, sizeof(hints));\n  hints.ai_family = AF_INET;\n  hints.ai_socktype = SOCK_STREAM;\n\n  if((return_value = getaddrinfo(hostname,\n                          gtk_entry_get_text(GTK_ENTRY(widgets-&gt;textFieldPort)),\n                          &amp;hints, &amp;hostname_result)) != 0)\n  {\n    g_print(\"getaddrinfo: %s\\n\", gai_strerror(return_value));\n    return;\n  }\n\n  for(struct addrinfo *info_itr = hostname_result; info_itr != nullptr;\n      info_itr = info_itr-&gt;ai_next)\n  {\n    hostname_address = (struct sockaddr_in *)info_itr-&gt;ai_addr;\n    inet_ntop(AF_INET, &amp;(hostname_address-&gt;sin_addr), addr, INET_ADDRSTRLEN);\n\n    g_print(\"%s:%s\\n\", addr, gtk_entry_get_text(GTK_ENTRY(widgets-&gt;textFieldPort)));\n  }\n\n  connect_to_logview(hostname_result);\n\n  freeaddrinfo(hostname_result);\n}\n\nvoid connect_to_logview(struct addrinfo *hostname_result)\n{\n  int rv = 0;\n  sockfd = socket(hostname_result-&gt;ai_family, hostname_result-&gt;ai_socktype,\n                      hostname_result-&gt;ai_protocol);\n\n  if(sockfd == -1)\n  {\n    perror(\"socket\");\n  }\n  else\n  {\n    rv = connect(sockfd, hostname_result-&gt;ai_addr, hostname_result-&gt;ai_addrlen);\n\n    if(rv == -1)\n    {\n      perror(\"connect\");\n    }\n    else\n    {\n      g_print(\"%s: Looks like we got something!\\n\", __FUNCTION__);\n      listen_for_logview();\n    }\n  }\n}\n\nvoid listen_for_logview()\n{\n  fd_set fdset;\n  gchar buf[256];\n  int nbytes = 0;\n  bool exit = false;\n  struct timeval tv;\n\n  tv.tv_sec = 2;\n  tv.tv_usec = 0;\n\n  FD_ZERO(&amp;fdset);\n\n  while(!exit)\n  {\n    if(select(sockfd+1, &amp;fdset, NULL, NULL, &amp;tv) == -1)\n    {\n      perror(\"select\");\n      exit = true;\n      break;\n    }\n\n    if(FD_ISSET(sockfd, &amp;fdset))\n    {\n      if((nbytes = recv(sockfd, buf, sizeof buf, 0)) &lt;= 0)\n      {\n        perror(\"recv\");\n        close(sockfd);\n        FD_CLR(sockfd, &amp;fdset);\n        exit = true;\n        break;\n      }\n      else\n      {\n        g_print(\"!!!\\n%s\\n\\n\", buf);\n        close(sockfd);\n        FD_CLR(sockfd, &amp;fdset);\n        exit = true;\n        break;\n      }\n    }\n    else\n    {\n      g_print(\"Timed out!\\n\");\n      tv.tv_sec = 2;\n    }\n  }\n}\n</code></pre>\n\n<p>So, what's wrong here? I'm guessing the answers are me simply misusing the tools I've got. I'd be grateful to hear about any other structural/technique issues you see here in addition to the two misbehaviors above.</p>\n\n<p>Thanks in advance for your help.</p>\n"}, {"tags": ["c++", "windows", "plugins", "printing", "driver"], "answers": [{"comments": [{"owner": {"reputation": 2064, "user_id": 575219, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f5ac8064c2f589684186ba7ddaff68f8?s=128&d=identicon&r=PG", "display_name": "user575219", "link": "https://stackoverflow.com/users/575219/user575219"}, "edited": false, "score": 0, "creation_date": 1587186063, "post_id": 28050806, "comment_id": 108415900, "body": "what is FILE port? Is it a new port that i need to create. I am trying to not attach to spoolsv"}], "owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "is_accepted": true, "score": 0, "last_activity_date": 1421772500, "creation_date": 1421772500, "answer_id": 28050806, "question_id": 27953126, "link": "https://stackoverflow.com/questions/27953126/debug-print-to-file-print-driver-code/28050806#28050806", "title": "Debug &quot;print to file&quot; print driver code", "body": "<p>I was able to see the debug messages from printing to the FILE: port, by ataching the debugger to the \"<code>explorer.exe</code>\" instead of the \"<code>spoolsv.exe</code>\"</p>\n"}], "owner": {"reputation": 11175, "user_id": 1217150, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/6ryIf.png?s=128&g=1", "display_name": "Thalia", "link": "https://stackoverflow.com/users/1217150/thalia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 28050806, "answer_count": 1, "score": 0, "last_activity_date": 1421772500, "creation_date": 1421272361, "last_edit_date": 1421772400, "question_id": 27953126, "link": "https://stackoverflow.com/questions/27953126/debug-print-to-file-print-driver-code", "title": "Debug &quot;print to file&quot; print driver code", "body": "<p>I would like to test a printer driver plugin that I am working on (learning as I go along), I am using the examples from <a href=\"https://code.msdn.microsoft.com/windowshardware/Windows-8-Driver-Samples-5e1aa62e\" rel=\"nofollow\">Windows Driver Kit (WDK) 8.1 Samples</a> . </p>\n\n<p>To test, I attach WinDbg to the print spooler and get the debug messages. </p>\n\n<p>That works if I create a printer on LPT1 or any other port </p>\n\n<p>If I try attaching the printer to the \"FILE:\" port, none of the debug messages I have in the plugin get displayed - even though I am certain the functions I have get called.</p>\n\n<p>How can I see debug messages when I print to \"FILE:\" ?</p>\n"}, {"tags": ["c++", "linux", "stream", "solaris"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1421271830, "post_id": 27952905, "comment_id": 44301093, "body": "The fact that it works on one machine and not the other means it is undefined behavior"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 3, "creation_date": 1421272001, "post_id": 27952905, "comment_id": 44301156, "body": "Like similar order-of-operations gotchas posted here, the expression <code>is &gt;&gt; idx &gt;&gt; imap[idx]</code> evaluates a variable multiple times while modifying it at least once.  See <a href=\"http://stackoverflow.com/questions/4176328\">stackoverflow.com/questions/4176328</a>"}], "answers": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 5, "last_activity_date": 1421272195, "creation_date": 1421272195, "answer_id": 27953081, "question_id": 27952905, "link": "https://stackoverflow.com/questions/27952905/c-input-stream-operation-order-in-solaris-vs-linux/27953081#27953081", "title": "C++ Input stream: operation order in Solaris vs. Linux", "body": "<pre><code>is &gt;&gt; idx &gt;&gt; imap[idx]\n</code></pre>\n\n<p>This expression is equivalent to</p>\n\n<pre><code>operator&gt;&gt;(operator&gt;&gt;(is, idx), imap.operator[](idx))\n</code></pre>\n\n<p>The evaluations of arguments to the same function are unsequenced relative to each other; either <code>operator&gt;&gt;(is, idx)</code> or <code>imap.operator[](idx)</code> may be evaluated first (that is, either <code>is &gt;&gt; idx</code> or <code>imap[idx]</code> may be evaluated first). If the latter is evaluated first, then the result is an lvalue referring to the value corresponding to the <em>old</em> value of <code>idx</code> in the map; it is this value that will be overwritten by the second read, and not the value corresponding to the <em>new</em> value of <code>idx</code>.</p>\n\n<p>The modified code fixes this by ensuring that <code>idx</code> is read before <code>imap[idx]</code> is accessed.</p>\n"}], "owner": {"reputation": 63, "user_id": 957424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4486ba32cda63c8c8c62a8a7a345b8e?s=128&d=identicon&r=PG&f=1", "display_name": "Diana Coppenbarger", "link": "https://stackoverflow.com/users/957424/diana-coppenbarger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 27953081, "answer_count": 1, "score": 5, "last_activity_date": 1421272195, "creation_date": 1421271426, "question_id": 27952905, "link": "https://stackoverflow.com/questions/27952905/c-input-stream-operation-order-in-solaris-vs-linux", "title": "C++ Input stream: operation order in Solaris vs. Linux", "body": "<p>I have a very simple test program that uses istringstreams to read in integers from a std::string.  The code is:</p>\n\n<pre><code>std::map&lt;int, int&gt; imap;\nint idx, value;\nstd::string str(\"1 2 3 4 5 6 7 8\");\nistringstream is(str);\nwhile(is &gt;&gt; idx &gt;&gt; imap[idx]){\n    cout &lt;&lt; idx &lt;&lt; \" \" &lt;&lt; imap[idx] &lt;&lt; endl;\n}\ncout &lt;&lt; endl;\n\nstd::map&lt;int, int&gt;::iterator itr;\nfor(itr = imap.begin(); itr != imap.end(); itr++){\n    cout &lt;&lt; itr-&gt;first &lt;&lt; \" \" &lt;&lt; itr-&gt;second &lt;&lt; endl;\n}\n</code></pre>\n\n<p>When I run this on Solaris 10, it produces the following output:</p>\n\n<pre><code>1 2\n3 4\n5 6\n7 8\n\n1 2\n3 4\n5 6\n7 8\n</code></pre>\n\n<p>However, when I run it under CentOS 7, I get:</p>\n\n<pre><code>1 0\n3 0\n5 0\n7 0\n\n1 4\n3 6\n5 8\n7 0\n4204240 2\n</code></pre>\n\n<p>Does anyone know why it would be different under Linux than under Solaris?  It's obviously reading in the value into the map before reading into the index for the map, but I don't know why.  I can make it work under Linux by changing the code slightly:</p>\n\n<pre><code>std::map&lt;int, int&gt; imap;\nint idx, value;\nstd::string str(\"1 2 3 4 5 6 7 8\");\nistringstream is(str);\nwhile(is &gt;&gt; idx &gt;&gt; value){\n    imap[idx] = value;\n    cout &lt;&lt; idx &lt;&lt; \" \" &lt;&lt; imap[idx] &lt;&lt; endl;\n}\n\nstd::map&lt;int, int&gt;::iterator itr;\nfor(itr = imap.begin(); itr != imap.end(); itr++){\n    cout &lt;&lt; itr-&gt;first &lt;&lt; \" \" &lt;&lt; itr-&gt;second &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I know it's a valid fix, but I have people around me who want to know why it is different.  We are migrating from Solaris to Linux and when things like this come up, they want to know why. I don't know why so I'm asking for guidance.</p>\n"}, {"tags": ["c++", "qt", "c++11"], "answers": [{"comments": [{"owner": {"reputation": 2418, "user_id": 1144539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/babed14d18f0888997cadb8fc1a89b18?s=128&d=identicon&r=PG", "display_name": "JKSH", "link": "https://stackoverflow.com/users/1144539/jksh"}, "edited": false, "score": 2, "creation_date": 1421311203, "post_id": 27954502, "comment_id": 44312779, "body": "I believe the context object has another role: For specifying the thread which runs the functor"}, {"owner": {"reputation": 4904, "user_id": 143504, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34e7b6be5f0a1bbc846d14eca893bbd3?s=128&d=identicon&r=PG", "display_name": "Julien-L", "link": "https://stackoverflow.com/users/143504/julien-l"}, "edited": false, "score": 3, "creation_date": 1517873365, "post_id": 27954502, "comment_id": 84263389, "body": "This should be in the Qt documentation!"}], "owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "is_accepted": true, "score": 34, "last_activity_date": 1421543795, "last_edit_date": 1421543795, "creation_date": 1421278798, "answer_id": 27954502, "question_id": 27952902, "link": "https://stackoverflow.com/questions/27952902/qobject-context-in-qobjectconnect-function/27954502#27954502", "title": "QObject* context in QObject::connect function", "body": "<p>The context object is used in two scenarios.</p>\n\n<h2>Automatic disconnection</h2>\n\n<p>Let's first do a step back and ask ourselves: <strong>when does Qt break a connection?</strong></p>\n\n<p>With the usual <code>connect(sender, signal, receiver, slot)</code> connect, there are three possibilities:</p>\n\n<ol>\n<li>When someone explicitely calls <code>disconnect</code>;</li>\n<li>When <code>sender</code> is deleted;</li>\n<li>When <code>receiver</code> is deleted.</li>\n</ol>\n\n<p>Especially in cases #2 and #3, it just makes sense for Qt to behave that way (actually, it <em>must</em> behave that way, otherwise you'd have resource leaks and/or crashes).</p>\n\n<hr>\n\n<p>Now: <strong>when using the <code>connect</code> overload taking a functor, when does Qt break a connection?</strong></p>\n\n<p>Note that without the <code>context</code> parameter, there's only one QObject involved: the sender. Hence the answer is:</p>\n\n<ol>\n<li>When someone explicitely calls <code>disconnect</code>;</li>\n<li>When <code>sender</code> is deleted.</li>\n</ol>\n\n<p>Of course, there's no receiver object here! So only the sender automatically controls the lifetime of a connection.</p>\n\n<p>Now, the problem is that the functor may capture some extra state that can become invalid, in which case is desirable that the connection gets broken automatically. The typical case is with lambdas:</p>\n\n<pre><code>connect(sender, &amp;Sender::signal, \n        [&amp;object1, &amp;object2](Param p) \n        { \n            use(object1, object2, p);\n        }\n);\n</code></pre>\n\n<p>What happens if <code>object1</code> or <code>object2</code> get deleted? The connection will still be alive, therefore emitting the signal will still invoke the lambda, which in turn will access destroyed objects. And that's kind of bad...</p>\n\n<hr>\n\n<p>For this reason, when it comes to functors, a <code>connect</code> overload taking a <strong>context object</strong> has been introduced. A connection established using that overload will be disconnected automatically also </p>\n\n<ol start=\"3\">\n<li>when the <code>context</code> object is deleted.</li>\n</ol>\n\n<p>You're probably right when you say that a good number of times you're going to see there the very same \"main\" object used in the functor, for instance</p>\n\n<pre><code>connect(button, \n        &amp;QPushButton::clicked,\n        otherWidget, \n        [otherWidget]() \n        { \n            otherWidget-&gt;doThis(); otherWidget-&gt;doThat(); \n        }\n);\n</code></pre>\n\n<p>That's just a pattern in Qt -- when setting up connections for sub-objects, you typically connect them to slots on <code>this</code> object, hence <code>this</code> is probably the most common context. However, in general, you may also end up with something like</p>\n\n<pre><code>// manages the lifetime of the resources; they will never outlive this object\nstruct ResourceManager : QObject \n{\n    Resource res1; // non-QObjects\n    OtherResource res2;\n};\n\nResourceManager manager;    \nconnect(sender, signal, manager, [&amp;manager](){ use(manager.res1, ...); });\n// or, directly capture the resources, not the handle\n</code></pre>\n\n<p>So, you're capturing part of the state of <code>manager</code>.</p>\n\n<hr>\n\n<p>In the most general case, when no <code>context</code> object is available, if there's the chance that the objects captured by the lambda survive the connection, then you must capture them by weak pointers, and try to lock those pointers inside the lambda before trying to access them.</p>\n\n<h2>Running a functor in a specific thread/event loop</h2>\n\n<p>Very shortly: <strong>when specifying a context object, the functor will be run into the context's thread</strong>, just like normal connections employing a receiver object. Indeed, note that the <code>connect</code> overload that takes a context <em>also</em> takes a connection type (while the one without context doesn't take one -- connection is always direct).</p>\n\n<p>Again, this is useful because QObject is not reentrant or thread safe, and you must use a QObject only in the thread it lives in. If your functor accesses an object living in another thread, it must be executed in that thread; specifying that object as the context solves the issue.</p>\n"}], "owner": {"reputation": 6710, "user_id": 4052030, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-k4nrKct_Bc8/AAAAAAAAAAI/AAAAAAAABBk/fIYqRy8gDVA/photo.jpg?sz=128", "display_name": "Nicolas Holthaus", "link": "https://stackoverflow.com/users/4052030/nicolas-holthaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2872, "favorite_count": 4, "accepted_answer_id": 27954502, "answer_count": 1, "score": 12, "last_activity_date": 1502292505, "creation_date": 1421271415, "last_edit_date": 1502292505, "question_id": 27952902, "link": "https://stackoverflow.com/questions/27952902/qobject-context-in-qobjectconnect-function", "title": "QObject* context in QObject::connect function", "body": "<p>I'v read the <a href=\"http://doc.qt.io/qt-5/qobject.html#connect-5\" rel=\"noreferrer\">documentation</a> for QObject::connect (for Qt 5.4), but I have a question about the overload </p>\n\n<p><code>QMetaObject::Connection QObject::connect(const QObject * sender, PointerToMemberFunction signal, const QObject * context, Functor functor, Qt::ConnectionType type = Qt::AutoConnection)</code></p>\n\n<p>What exactly is the <code>context</code> parameter? What is its purpose? Can it be used to build connections in local event loops in threads?</p>\n\n<p>Can someone provide examples of how/when to use this overload (when the context is not <code>this</code>)?</p>\n"}, {"tags": ["c++", "pointers", "dictionary", "polymorphism"], "answers": [{"comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1421274737, "post_id": 27952981, "comment_id": 44302413, "body": "Your <code>clone</code> isn&#39;t actually cloning anything. A nifty implementation can be found here: <a href=\"http://stackoverflow.com/a/5731259/5987\">stackoverflow.com/a/5731259/5987</a>"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1421274908, "post_id": 27952981, "comment_id": 44302495, "body": "@MarkRansom, That is indeed a nifty implementation for cloning."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1421271740, "creation_date": 1421271740, "answer_id": 27952981, "question_id": 27952742, "link": "https://stackoverflow.com/questions/27952742/how-to-instantiate-objects-from-a-derived-class-via-a-map/27952981#27952981", "title": "How to instantiate objects from a derived class via a map", "body": "<ol>\n<li>Add a <code>virtual</code> member function in the base class to make a copy of the object.</li>\n<li>Implement them appropriately in the derived classes.</li>\n<li>Call the copy function when you need to.</li>\n</ol>\n\n<p>Here's your code, updated at the right places.</p>\n\n<pre><code>class BaseClass\n    {\n    public:\n        BaseClass() {cout &lt;&lt; \"BaseClass constructor...\\n\"};\n        ~BaseClass() {cout &lt;&lt; \"BaseClass destructor...\\n\"};\n        virtual BaseClass* clone() const = 0;\n    };\n\n\nclass A : public BaseClass\n    {\n    public:\n        A() {cout &lt;&lt; \"A constructor...\\n\"};\n        ~A() {cout &lt;&lt; \"A destructor...\\n\"};\n        virtual A* clone() const { return new A();}\n    };\n\n\nclass B : public BaseClass\n    {\n    public:\n        B() {cout &lt;&lt; \"B constructor...\\n\"};\n        ~B() {cout &lt;&lt; \"B destructor...\\n\"};\n        virtual B* clone() const { return new B();}\n    };\n\n\nclass C : public BaseClass\n    {\n    public:\n        C() {cout &lt;&lt; \"C constructor...\\n\"};\n        ~C() {cout &lt;&lt; \"C destructor...\\n\"};\n        virtual C* clone() const { return new C();}\n    };\n\n\nint main(int argc, char *argv[])\n    {\n\n    map &lt;string, BaseClass*&gt; my_map; // Map used to compare a string in order to identify the object type I'd like to make\n\n    vector&lt;BaseClass*&gt; keyword_vct; // Vector to store the objects of the different derived class types\n\n    BaseClass* ptr;\n    my_map.insert (make_pair (\"A\", ptr = new A ));\n    my_map.insert (make_pair (\"B\", ptr = new B));\n    my_map.insert (make_pair (\"C\", ptr = new C));\n\n    string testStr \"B\";\n\n    map &lt;string, BaseClass*&gt; ::const_iterator it = my_map.find(testStr);\n    if (it == oscards_map.end()) {\n        cout &lt;&lt; \"String not found in map.\" &lt;&lt; endl;\n        } else {\n        cout &lt;&lt; it-&gt;first &lt;&lt; \"\\t keyword found in map!\" &lt;&lt; endl;\n        BaseClass* pSomekey;\n        pSomekey = it-&gt;second;\n\n        // Make a copy of the object and store it in keyword_vct.\n        keyword_vct.push_back(pSomekey-&gt;clone());\n        }\n\n    }   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 3985124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb784f3a60adef82106f4afd2c9599f7?s=128&d=identicon&r=PG&f=1", "display_name": "Not_much_of_a _programmer", "link": "https://stackoverflow.com/users/3985124/not-much-of-a-programmer"}, "edited": false, "score": 0, "creation_date": 1421361304, "post_id": 27952998, "comment_id": 44341271, "body": "Awesome! This worked great! Thank you very much for the quick response. I&#39;ll mark this as the answer pending my other conversation below."}], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 1, "last_activity_date": 1421271800, "creation_date": 1421271800, "answer_id": 27952998, "question_id": 27952742, "link": "https://stackoverflow.com/questions/27952742/how-to-instantiate-objects-from-a-derived-class-via-a-map/27952998#27952998", "title": "How to instantiate objects from a derived class via a map", "body": "<p>Add a virtual creation function to the base class.</p>\n\n<pre><code>class BaseClass\n{\n    public:\n        virtual BaseClass* create() const = 0;\n};\n\n\nclass A : public BaseClass\n{\n    public:\n       virtual BaseClass* create() const { return new A; }\n};\n\n\nclass B : public BaseClass\n{\n    public:\n        virtual BaseClass* create() const { return new B; }\n};\n\n// ...\n\nkeyword_vct.push_back(it-&gt;second-&gt;create()); \n</code></pre>\n\n<p>The reason that <code>pSomekey = it-&gt;second;</code> doesn't create any objects is that you're only copying a pointer to an object, not the object itself.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 3985124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb784f3a60adef82106f4afd2c9599f7?s=128&d=identicon&r=PG&f=1", "display_name": "Not_much_of_a _programmer", "link": "https://stackoverflow.com/users/3985124/not-much-of-a-programmer"}, "edited": false, "score": 0, "creation_date": 1421361243, "post_id": 27953236, "comment_id": 44341243, "body": "Hello, thanks for your response. My problem isn&#39;t Your a confusion between an object instance vs the object class, I understand those just fine - I must have just used the wrong lingo in my description. For the record, I&#39;m not a professional programmer, I&#39;m a mech engineer, so I dable in this from time to time.  I&#39;m curious, do you believe there are there advantages to using your &#39;factor&#39; technique over the others mentioned above? I will likely process sometimes 100,000s of different keywords, so speed and efficiently will eventually be important to me."}, {"owner": {"reputation": 7135, "user_id": 419871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4ceb69780405aaf531b7db434d726b8?s=128&d=identicon&r=PG", "display_name": "MerickOWA", "link": "https://stackoverflow.com/users/419871/merickowa"}, "reply_to_user": {"reputation": 31, "user_id": 3985124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb784f3a60adef82106f4afd2c9599f7?s=128&d=identicon&r=PG&f=1", "display_name": "Not_much_of_a _programmer", "link": "https://stackoverflow.com/users/3985124/not-much-of-a-programmer"}, "edited": false, "score": 0, "creation_date": 1421365480, "post_id": 27953236, "comment_id": 44342741, "body": "@Not_much_of_a_programmer I updated my answer to include some differences between the different approaches."}], "owner": {"reputation": 7135, "user_id": 419871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d4ceb69780405aaf531b7db434d726b8?s=128&d=identicon&r=PG", "display_name": "MerickOWA", "link": "https://stackoverflow.com/users/419871/merickowa"}, "is_accepted": false, "score": 0, "last_activity_date": 1421365429, "last_edit_date": 1421365429, "creation_date": 1421272792, "answer_id": 27953236, "question_id": 27952742, "link": "https://stackoverflow.com/questions/27952742/how-to-instantiate-objects-from-a-derived-class-via-a-map/27953236#27953236", "title": "How to instantiate objects from a derived class via a map", "body": "<p>C++ doesn't provide a built in way refer to a \"class\" and create instances generically, however, you can implement it yourself.</p>\n\n<p>As suggested, you can either chose to make instances have a virtual method to create similar typed objects as molbdnilo and R Sahu have suggested.  This is referred to as the <a href=\"http://en.wikipedia.org/wiki/Prototype_pattern\" rel=\"nofollow\">Prototype pattern</a></p>\n\n<p>This has nice advantages in that you could create various objects of type \"A\", \"B\", and \"C\", set them up how you'd like them, and then create copies of anyone of them simply by giving them a string in your std::map and then calling the clone method whenever you wanted one.</p>\n\n<p>However, There are some disadvantages.</p>\n\n<p>For example, if \"A\" created or opened a file, what file should the dummy \"A\" create or open if its not actually going to be used?  Cloning it would create another \"A\" which tried to open the same file? or create a file already created?</p>\n\n<p>If \"A\", \"B\", or \"C\" are rather large objects, memory usage could be saved by using a slim factory class which was responsible for the construction of the more expensive object.  That way memory is only used when its actually needed.</p>\n\n<p>If constructing \"A\", \"B\", or \"C\" takes a long time, time is saved using the factory as no instances of the BaseClass need to be constructed until they're actually needed.</p>\n\n<p>In general, if your derived BaseClass class constructors contain large or noticeable side effects (cpu, memory, io, etc.), using a factory can help avoid these issues.</p>\n\n<p>Here's an example of how to use a Factory method pattern to solve the construction problem.</p>\n\n<pre><code>class BaseClass\n{\npublic:\n  BaseClass() { cout &lt;&lt; \"BaseClass constructor...\\n\"; };\n  ~BaseClass() { cout &lt;&lt; \"BaseClass destructor...\\n\"; };\n};\n\n\nclass A : public BaseClass\n{\npublic:\n  A() { cout &lt;&lt; \"A constructor...\\n\"; };\n  ~A() { cout &lt;&lt; \"A destructor...\\n\"; };\n};\n\n\nclass B : public BaseClass\n{\npublic:\n  B() { cout &lt;&lt; \"B constructor...\\n\"; };\n  ~B() { cout &lt;&lt; \"B destructor...\\n\"; };\n};\n\n\nclass C : public BaseClass\n{\npublic:\n  C() { cout &lt;&lt; \"C constructor...\\n\"; };\n  ~C() { cout &lt;&lt; \"C destructor...\\n\"; };\n};\n\nclass BaseClassFactory\n{\npublic:\n  virtual ~BaseClassFactory() {}\n  virtual BaseClass *create() = 0;\n};\n\ntemplate &lt;class T&gt;\nclass BaseClassFactoryImpl : public BaseClassFactory\n{\npublic:\n  BaseClass *create() override { return new T{}; }\n};\n\nint main(int argc, char *argv[])\n{\n  map &lt;string, BaseClassFactory*&gt; my_map; // Map used to compare a string in order to identify the object type I'd like to make\n\n  vector&lt;BaseClass*&gt; keyword_vct; // Vector to store the objects of the different derived class types\n\n  BaseClass* ptr;\n  my_map.insert(make_pair(\"A\", new BaseClassFactoryImpl&lt;A&gt;{}));\n  my_map.insert(make_pair(\"B\", new BaseClassFactoryImpl&lt;B&gt;{}));\n  my_map.insert(make_pair(\"C\", new BaseClassFactoryImpl&lt;C&gt;{}));\n\n  string testStr = \"B\";\n\n  map &lt;string, BaseClassFactory*&gt; ::const_iterator it = my_map.find(testStr);\n  if (it == my_map.end()) {\n    cout &lt;&lt; \"String not found in map.\" &lt;&lt; endl;\n  }\n  else {\n    cout &lt;&lt; it-&gt;first &lt;&lt; \"\\t keyword found in map!\" &lt;&lt; endl;\n    BaseClass* pSomekey;\n    pSomekey = it-&gt;second-&gt;create(); // Here we ask the factory to create us an instance of whatever BaseClass the factory is setup to return\n\n    keyword_vct.push_back(pSomekey); // Once I instantiate the derived object in the line above, I want to store it in a container.\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 3985124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb784f3a60adef82106f4afd2c9599f7?s=128&d=identicon&r=PG&f=1", "display_name": "Not_much_of_a _programmer", "link": "https://stackoverflow.com/users/3985124/not-much-of-a-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 869, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1421365429, "creation_date": 1421270736, "last_edit_date": 1421271980, "question_id": 27952742, "link": "https://stackoverflow.com/questions/27952742/how-to-instantiate-objects-from-a-derived-class-via-a-map", "title": "How to instantiate objects from a derived class via a map", "body": "<p>I have a question on how to identify an object via a mapped pair, instantiate an object of the type identified with the pair, then store it a container of some sort (likely a vector). The hang up here is that the objects I'm looking for should all be derived classes of some base class.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>class BaseClass {\npublic:\n    BaseClass() {cout &lt;&lt; \"BaseClass constructor...\\n\"};\n    ~BaseClass() {cout &lt;&lt; \"BaseClass destructor...\\n\"};\n};\n\n\nclass A : public BaseClass {\npublic:\n    A() {cout &lt;&lt; \"A constructor...\\n\"};\n    ~A() {cout &lt;&lt; \"A destructor...\\n\"};\n};\n\n\nclass B : public BaseClass {\npublic:\n    B() {cout &lt;&lt; \"B constructor...\\n\"};\n    ~B() {cout &lt;&lt; \"B destructor...\\n\"};\n};\n\n\nclass C : public BaseClass {\npublic:\n    C() {cout &lt;&lt; \"C constructor...\\n\"};\n    ~C() {cout &lt;&lt; \"C destructor...\\n\"};\n};\n\n\nint main(int argc, char *argv[])\n{\n    map &lt;string, BaseClass*&gt; my_map; // Map used to compare a string in order to identify the object type I'd like to make\n\n    vector&lt;BaseClass*&gt; keyword_vct; // Vector to store the objects of the different derived class types\n\n    BaseClass* ptr;\n    my_map.insert (make_pair (\"A\", ptr = new A ));\n    my_map.insert (make_pair (\"B\", ptr = new B));\n    my_map.insert (make_pair (\"C\", ptr = new C));\n\n    string testStr \"B\";\n\n    map &lt;string, BaseClass*&gt; ::const_iterator it = my_map.find(testStr);\n    if (it == oscards_map.end()) {\n        cout &lt;&lt; \"String not found in map.\" &lt;&lt; endl;\n    }\n    else {\n        cout &lt;&lt; it-&gt;first &lt;&lt; \"\\t keyword found in map!\" &lt;&lt; endl;\n        BaseClass* pSomekey;\n        pSomekey = it-&gt;second; // This is where I'm lost\n\n        keyword_vct.push_back(pSomekey); // Once I instantiate the derived object in the line above, I want to store it in a container.\n    }\n}   \n</code></pre>\n\n<p>So my main questions are:</p>\n\n<ol>\n<li><p>How do I make <strong>pSomekey</strong> into an object of either types <strong>A</strong>, <strong>B</strong>, or <strong>C</strong>?</p></li>\n<li><p>If I am able to instantiate one of those derived classes, am I able to store these different types of objects into the same vector because that are derived classes of <strong>BaseClass</strong>? </p></li>\n</ol>\n\n<p>I notice that when I make the pairs for the map, they seem to construct an object in their respective derived classes.</p>\n\n<p>I also notice that when <strong>pSomekey = it->second;</strong> is executed, no objects are constructed.</p>\n\n<p>Keep in mind, that this is an example. in my real code, I'm going to be comparing hundreds of <strong>testStr</strong> to make hundreds of different objects.</p>\n\n<p>Any help or advice would be greatly appreciated. Thanks!</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 2, "creation_date": 1421270749, "post_id": 27952709, "comment_id": 44300526, "body": "It&#39;s possible that the <code>Thing</code> is embedded <i>inside</i> the <code>std::function</code>, in which case, <code>m_f(std::move(f))</code> would move the <code>Thing</code> too.  How big is <code>sizeof(Thing)</code> compared to <code>sizeof(std::function&lt;void()&gt;)</code>?"}, {"owner": {"reputation": 3170, "user_id": 1004211, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/490a33dc2429cbd669bd4471d7aedc1d?s=128&d=identicon&r=PG", "display_name": "Prismatic", "link": "https://stackoverflow.com/users/1004211/prismatic"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1421272037, "post_id": 27952709, "comment_id": 44301175, "body": "It should be embedded in the function; bind takes &#39;thing&#39; by value. Also sizeof(std::function&lt;void()&gt;) or f in Event is 32 and sizeof(Thing) is 4"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 1, "creation_date": 1421273950, "post_id": 27952709, "comment_id": 44302052, "body": "I think @dyp&#39;s got it - the conversion of the <code>bind</code> object to <code>std::function</code> happens inside <code>make_unique</code>, and so the move-initialization of the <code>function</code> constructor parameter cannot be elided as it can in the non-<code>make_unique</code> case."}], "answers": [{"comments": [{"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 1, "creation_date": 1421274086, "post_id": 27953508, "comment_id": 44302121, "body": "<code>move(std::bind(...))</code>? I&#39;m fairly certain the return value of <code>std::bind</code> is already as rvalue as it can be ;) Oh, nevermind - you&#39;re using the cast to suppress elision. I&#39;m an idiot."}, {"owner": {"reputation": 3170, "user_id": 1004211, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/490a33dc2429cbd669bd4471d7aedc1d?s=128&d=identicon&r=PG", "display_name": "Prismatic", "link": "https://stackoverflow.com/users/1004211/prismatic"}, "edited": false, "score": 0, "creation_date": 1421274597, "post_id": 27953508, "comment_id": 44302363, "body": "awesome explanation and chart of the sequence of events"}, {"owner": {"reputation": 3170, "user_id": 1004211, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/490a33dc2429cbd669bd4471d7aedc1d?s=128&d=identicon&r=PG", "display_name": "Prismatic", "link": "https://stackoverflow.com/users/1004211/prismatic"}, "edited": false, "score": 0, "creation_date": 1421274932, "post_id": 27953508, "comment_id": 44302511, "body": "hmm... why do you think its incorrect? should I wait for another answer then?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 3170, "user_id": 1004211, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/490a33dc2429cbd669bd4471d7aedc1d?s=128&d=identicon&r=PG", "display_name": "Prismatic", "link": "https://stackoverflow.com/users/1004211/prismatic"}, "edited": false, "score": 0, "creation_date": 1421275085, "post_id": 27953508, "comment_id": 44302575, "body": "@Pris I forgot that you need to move from the <i>by value</i> ctor parameter of <code>std::function</code> into the <code>std::function</code> object itself (or into the part it manages on the heap). This implies that the last move is not actually happening, as @MooingDuck suggested."}], "owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "is_accepted": true, "score": 9, "last_activity_date": 1421275024, "last_edit_date": 1421275024, "creation_date": 1421273941, "answer_id": 27953508, "question_id": 27952709, "link": "https://stackoverflow.com/questions/27952709/why-does-make-unique-have-an-extra-move-with-a-constructor-that-can-take-stdbi/27953508#27953508", "title": "Why does make_unique have an extra move with a constructor that can take std::bind as an argument?", "body": "<p>I think the additional move when using <code>make_unique</code> is due to <em>move elision</em> in <code>Event(std::bind(lambda,thing))</code>.</p>\n\n<p>The constructor of <code>Event</code> that is called is <code>Event(function&lt;void()&gt; &amp;&amp; f)</code>, so a temporary <code>function&lt;void()&gt;</code> has to be created. This temporary is initialized with the return value of the <code>std::bind</code> expression.</p>\n\n<p>The constructor used to perform this conversion from the return type of <code>std::bind</code> to <code>std::function&lt;void()&gt;</code> takes the argument <em>by value</em>:</p>\n\n<pre><code>template&lt;class F&gt; function(F f); // ctor\n</code></pre>\n\n<p>This means we have to move the return value of <code>std::bind</code> to this parameter <code>f</code> of the constructor of <code>function&lt;void()&gt;</code>. But that move is eligible for <em>move elision</em>.</p>\n\n<p>When we pass that temporary through <code>make_unique</code>, it has been bound to a reference and move elision may not be applied any more. If we therefore suppress move elision:</p>\n\n<pre><code>std::cout &lt;&lt; \"with unique_ptr, no make_unique\\n\";\nunique_ptr&lt;Event&gt; ev_p(new Event(suppress_elision(std::bind(lambda,thing))));\nstd::cout &lt;&lt; \"\\n\";\n\nstd::cout &lt;&lt; \"with make_unique: \\n\";\nauto ev_ptr = make_unique&lt;Event&gt;(suppress_elision(std::bind(lambda,thing)));\nstd::cout &lt;&lt; \"\\n\";\n</code></pre>\n\n<p>(We can use <code>std::move</code> as the implementation of <code>suppress_elision</code>.)</p>\n\n<p>We can observe the same number of moves: <a href=\"http://coliru.stacked-crooked.com/a/a70461f99956cd70\" rel=\"nofollow\">Live example</a></p>\n\n<hr>\n\n<p>Explaining the whole set of operations:</p>\n\n<p>For <code>new Event(std::bind(lambda,thing))</code>:</p>\n\n<pre>\noperation                                             | behaviour \n------------------------------------------------------+----------\n`thing` variable        ->  `bind` temporary          | copies\n`bind` temporary        ->  `function` ctor param     | moves (*)\n`function` ctor param   ->  `function` object (temp)  | moves\n`function` temporary    ->  `Event` ctor ref param    | -\n`Event` ctor ref param  ->  `function` data member    | *can* move (+)\n</pre>\n\n<p>(*) can be elided<br/>\n(+) but doesn't, probably because the internal function object is on the heap, and only a pointer is moved. <a href=\"http://coliru.stacked-crooked.com/a/c169b9f343ac1c73\" rel=\"nofollow\">Verify by replacing <code>m_f(std::move(f))</code> with <code>m_f()</code></a>.</p>\n\n<p>For <code>make_unique&lt;Event&gt;(std::bind(lambda,thing))</code>:</p>\n\n<pre>\noperation                                               | behaviour \n--------------------------------------------------------+----------\n`thing` variable         ->  `bind` temporary           | copies\n`bind` temporary         ->  `make_unique` ref param    | -\n`make_unique` ref param  ->  `function` ctor param      | moves\n`function` ctor param    ->  `function` object (temp)   | moves\n`function` temporary     ->  `Event` ctor ref param     | -\n`Event` ctor ref param   ->  `function` data member     | *can* move (+)\n</pre>\n"}], "owner": {"reputation": 3170, "user_id": 1004211, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/490a33dc2429cbd669bd4471d7aedc1d?s=128&d=identicon&r=PG", "display_name": "Prismatic", "link": "https://stackoverflow.com/users/1004211/prismatic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1776, "favorite_count": 1, "accepted_answer_id": 27953508, "answer_count": 1, "score": 8, "last_activity_date": 1421275024, "creation_date": 1421270563, "last_edit_date": 1495540331, "question_id": 27952709, "link": "https://stackoverflow.com/questions/27952709/why-does-make-unique-have-an-extra-move-with-a-constructor-that-can-take-stdbi", "title": "Why does make_unique have an extra move with a constructor that can take std::bind as an argument?", "body": "<p>I have a trivial class that has a constructor that looks like:</p>\n\n<pre><code>Event(std::function&lt;void()&gt; &amp;&amp;f) : m_f(std::move(f)) { }\n</code></pre>\n\n<p>The constructor can be used with std::bind:</p>\n\n<pre><code>Thing thing;\nstd::unique_ptr&lt;Event&gt; ev(new Event(std::bind(some_func,thing)));\n</code></pre>\n\n<p>Using it in the manner above results in one copy construction of 'thing', then a move construction on that copy.</p>\n\n<p>However, doing the following:</p>\n\n<pre><code>std::unique_ptr&lt;Event&gt; ev = make_unique&lt;Event&gt;(std::bind(some_func,thing));\n</code></pre>\n\n<p>Results in two move constructions. My questions are:</p>\n\n<ul>\n<li>When exactly is the move constructor on 'thing' called</li>\n<li>Why is it called twice with make_unique?</li>\n</ul>\n\n<p>Here's the minimal example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;functional&gt;\nusing namespace std;\n\nclass Thing\n{\npublic:\n    Thing() : x(0)\n    {\n\n    }\n\n    Thing(Thing const &amp;other)\n    {\n        this-&gt;x = other.x;\n        std::cout &lt;&lt; \"Copy constructed Thing!\\n\";\n    }\n\n    Thing(Thing &amp;&amp;other)\n    {\n        this-&gt;x = other.x;\n        std::cout &lt;&lt; \"Move constructed Thing!\\n\";\n    }\n\n    Thing &amp; operator = (Thing const &amp;other)\n    {\n        this-&gt;x = other.x;\n        std::cout &lt;&lt; \"Copied Thing!\\n\";\n        return (*this);\n    }\n\n    Thing &amp; operator = (Thing &amp;&amp; other)\n    {\n        this-&gt;x = other.x;\n        std::cout &lt;&lt; \"Moved Thing!\\n\";\n        return (*this);\n    }\n\n    int x;\n};\n\nclass Event\n{\npublic:\n    Event() { }\n    Event(function&lt;void()&gt; &amp;&amp; f) : m_f(std::move(f)) { }\n    void SetF(function&lt;void()&gt; &amp;&amp; f) { m_f = std::move(f); }\n\nprivate:\n    function&lt;void()&gt; m_f;\n};\n\nint main() {\n\n    auto lambda = [](Thing &amp;thing) { std::cout &lt;&lt; thing.x &lt;&lt; \"\\n\"; };\n\n    Thing thing;\n    std::cout &lt;&lt; \"without unique_ptr: \\n\";\n    Event ev(std::bind(lambda,thing));\n    std::cout &lt;&lt; \"\\n\";\n\n    std::cout &lt;&lt; \"with unique_ptr, no make_unique\\n\";\n    unique_ptr&lt;Event&gt; ev_p(new Event(std::bind(lambda,thing)));\n    std::cout &lt;&lt; \"\\n\";\n\n    std::cout &lt;&lt; \"with make_unique: \\n\";\n    auto ev_ptr = make_unique&lt;Event&gt;(std::bind(lambda,thing));\n    std::cout &lt;&lt; \"\\n\";\n\n    std::cout &lt;&lt; \"with SetF: \\n\";\n    ev_ptr.reset(nullptr);\n    ev_ptr = make_unique&lt;Event&gt;();\n    ev_ptr-&gt;SetF(std::bind(lambda,thing));\n    std::cout &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>With output:</p>\n\n<pre><code>g++ -std=c++14 -O2 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\nor\nclang++ -std=c++14 -O2 -Wall -pedantic -pthread main.cpp &amp;&amp; ./a.out\n\nwithout unique_ptr: \nCopy constructed Thing!\nMove constructed Thing!\n\nwith unique_ptr, no make_unique\nCopy constructed Thing!\nMove constructed Thing!\n\nwith make_unique: \nCopy constructed Thing!\nMove constructed Thing!\nMove constructed Thing!\n\nwith SetF: \nCopy constructed Thing!\nMove constructed Thing!\n</code></pre>\n\n<p>PS: I tagged this question with C++11 as well as 14 because the same issue occurs when passing the C++11 flag to gcc with the commonly used make_unique function found here (<a href=\"https://stackoverflow.com/questions/7038357/make-unique-and-perfect-forwarding\">make_unique and perfect forwarding</a>)</p>\n"}, {"tags": ["c++", "gtkmm"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1421270417, "post_id": 27952632, "comment_id": 44300358, "body": "Is it possible to put objects other than GtkSwitch in a GtkTreeView?  What prevents you from doing the same with a GtkSwitch?"}, {"owner": {"reputation": 166, "user_id": 2389678, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86ad34c0f55d30d53a1835ebe2f91c83?s=128&d=identicon&r=PG", "display_name": "Alfredo Pons Menargues", "link": "https://stackoverflow.com/users/2389678/alfredo-pons-menargues"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1421309737, "post_id": 27952632, "comment_id": 44312103, "body": "Do you know any example in GTKMM?"}], "answers": [{"owner": {"reputation": 2015, "user_id": 1123654, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/eb90c999e943427f375acc5e9d94dd5a?s=128&d=identicon&r=PG", "display_name": "murrayc", "link": "https://stackoverflow.com/users/1123654/murrayc"}, "is_accepted": false, "score": 1, "last_activity_date": 1421405408, "creation_date": 1421405408, "answer_id": 27982322, "question_id": 27952632, "link": "https://stackoverflow.com/questions/27952632/how-i-can-put-a-a-gtkswitch-in-a-cell-column-of-gtktreeview/27982322#27982322", "title": "How I can put a a GtkSwitch in a cell (column) of GtkTreeView?", "body": "<p>Not really, no. You can only put GtkCellRenderers in GtkTreeView columns. To get something like it, you'd have to implement a custom GtkCellRenderer, which would be very very difficult, and it might be impossible to get the exact same behaviour. GtkCellRendererToggle will give you a check box instead though.</p>\n\n<p>Here are the available standard cell renderers:\n<a href=\"https://developer.gnome.org/gtk3/stable/GtkCellRenderer.html#GtkCellRenderer.object-hierarchy\" rel=\"nofollow\">https://developer.gnome.org/gtk3/stable/GtkCellRenderer.html#GtkCellRenderer.object-hierarchy</a></p>\n"}], "owner": {"reputation": 166, "user_id": 2389678, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/86ad34c0f55d30d53a1835ebe2f91c83?s=128&d=identicon&r=PG", "display_name": "Alfredo Pons Menargues", "link": "https://stackoverflow.com/users/2389678/alfredo-pons-menargues"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421405408, "creation_date": 1421270270, "last_edit_date": 1421270372, "question_id": 27952632, "link": "https://stackoverflow.com/questions/27952632/how-i-can-put-a-a-gtkswitch-in-a-cell-column-of-gtktreeview", "title": "How I can put a a GtkSwitch in a cell (column) of GtkTreeView?", "body": "<p>How I can put a a GtkSwitch in a cell (column) of GtkTreeView?\nThis is possible?</p>\n"}, {"tags": ["c++", "templates", "gcc"], "comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 2, "creation_date": 1421270451, "post_id": 27952591, "comment_id": 44300383, "body": "I have only glanced over your code but did you try <code>in.m_buf.ostrongstream::operator&lt;&lt;(f)</code>?  Note that you&#39;ll need a <code>using</code> directive because member access cannot be namespace qualified."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1421270681, "post_id": 27952591, "comment_id": 44300497, "body": "The original code <a href=\"http://coliru.stacked-crooked.com/a/7f8df67973a9d8de\" rel=\"nofollow noreferrer\">compiles fine with clang++</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1421270837, "post_id": 27952591, "comment_id": 44300576, "body": "Your template friends are too general, they take anything, be more more specific there."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1421270914, "post_id": 27952591, "comment_id": 44300622, "body": "@dyp: Interesting. <a href=\"https://gist.github.com/sharth/6b09bd9e5aca4585370c\" rel=\"nofollow noreferrer\">gist.github.com/sharth/6b09bd9e5aca4585370c</a> compiles fine with clang++ but fails with g++ 4.9.0..."}, {"owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1421271237, "post_id": 27952591, "comment_id": 44300789, "body": "@5gon12eder: well, neither <code>in.m_buf::ostringstream::operator &lt;&lt; f</code> and <code>in.m_buf.ostringstream::operator &lt;&lt; f</code> work. Unless you can specify the correct <code>using</code> directive, <code>using std::ostringstream::operator&lt;&lt;</code> won&#39;t work (and I&#39;m not sure that&#39;s even possible since it&#39;s an operator, not a function)"}, {"owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1421271344, "post_id": 27952591, "comment_id": 44300843, "body": "@dyp Interesting. So maybe I found a bug in GCC? That would be cool... :)"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1421271345, "post_id": 27952591, "comment_id": 44300845, "body": "@BillLynch That&#39;s a really weird error message. I don&#39;t even know how to interpret the code, given that you&#39;re using compound literals, which are not legal in C++. gcc&#39;s error message seems to imply that the elaborate-type-specifier redeclares the <code>tm</code> from the C StdLib."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1421271481, "post_id": 27952591, "comment_id": 44300919, "body": "@dyp: Whoops on the compound literal."}, {"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1421271575, "post_id": 27952591, "comment_id": 44300960, "body": "@JvO It should be <code>using std::ostringstream;</code>."}, {"owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "reply_to_user": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 0, "creation_date": 1421272299, "post_id": 27952591, "comment_id": 44301295, "body": "@5gon12eder Unfortunately, that does not do the trick... Added the <code>using</code> to the function and tried various combinations of &#39;.&#39; and &#39;::&#39;; I guess the compiler really doesn&#39;t know what overload to pick."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1421276749, "post_id": 27952591, "comment_id": 44303276, "body": "The obvious question is, why use templates?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1421318270, "post_id": 27952591, "comment_id": 44316469, "body": "@Oktalist That part makes sense to me: given an instance of a derived class <code>DerivedClass d;</code> that doesn&#39;t attempt to change the <code>operator&lt;&lt;</code> implementation, you&#39;d probably still want <code>d &lt;&lt; 1.0f</code> to return <code>DerivedClass &amp;</code>, not <code>SmartStream &amp;</code>."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "reply_to_user": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "edited": false, "score": 0, "creation_date": 1421334945, "post_id": 27952591, "comment_id": 44325944, "body": "In that case, @BillLynch&#39;s answer is exactly what is called for. If it seems kinda hacky, well, that&#39;s what was asked for."}], "answers": [{"comments": [{"owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "edited": false, "score": 0, "creation_date": 1421272639, "post_id": 27952887, "comment_id": 44301452, "body": "It&#39;s kinda hacky, and requires (for gcc 4.8 at least) enabling the experimental C++11 features, but it works."}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "edited": false, "score": 0, "creation_date": 1421272742, "post_id": 27952887, "comment_id": 44301508, "body": "@JvO: <code>enable_if</code> exists in boost for pre c++11 compilers, and you could always create a private implementation as well. (It doesn&#39;t depend on any new compiler features to implement)."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1421335083, "post_id": 27952887, "comment_id": 44326034, "body": "This is also necessary in case you want to use <code>std::cout &lt;&lt; 1.0f</code> in any member function of <code>SmartStream</code>."}], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": false, "score": 0, "last_activity_date": 1421271374, "creation_date": 1421271374, "answer_id": 27952887, "question_id": 27952591, "link": "https://stackoverflow.com/questions/27952591/using-a-operator-inside-an-overloaded-operator/27952887#27952887", "title": "Using a &lt;&lt; operator inside an overloaded &lt;&lt; operator", "body": "<p>So, I think the simplest thing would be to restrict the friend functions with something like <code>std::enable_if</code> so that they are only valid on streams that have the correct parent class.</p>\n\n<pre><code>#include &lt;sstream&gt;\n#include &lt;type_traits&gt;\n\nclass SmartStream {\n    public:\n        template &lt;typename F&gt;\n        friend typename std::enable_if&lt;std::is_base_of&lt;SmartStream, F&gt;::value, F&amp;&gt;::type\n        operator &lt;&lt; (F &amp;in, float f) {\n            in.type(\"f\");\n            in.m_buf.str(\"\");\n            in.m_buf &lt;&lt; f;\n            in.add (in.m_buf.str ());\n            return in;\n        }\n\n    protected:\n        std::ostringstream m_buf;\n\n        void type(const std::string &amp;_type) {};\n        void add(const std::string &amp;) {};\n};\n\nclass ExtraStream: public SmartStream {\n    public:\n        template &lt;typename F&gt;\n        friend typename std::enable_if&lt;std::is_base_of&lt;ExtraStream, F&gt;::value, F&amp;&gt;::type\n        operator &lt;&lt; (F &amp;in, struct tm t) {\n            in.type (\"tm\");\n            in.m_buf.str (\"\");\n            in.m_buf &lt;&lt; t.tm_hour;\n            in.add (in.m_buf.str ());\n            return in;\n        }\n};\n\nint main() {\n    SmartStream ss;\n    ExtraStream es;\n    struct tm t;\n\n    ss &lt;&lt; 3.14f;\n    es &lt;&lt; 3.14f &lt;&lt; t &lt;&lt; 3.14;\n    // ss &lt;&lt; t; // Fails as expected.\n}\n</code></pre>\n"}, {"owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "is_accepted": true, "score": 2, "last_activity_date": 1421339116, "last_edit_date": 1421339116, "creation_date": 1421338577, "answer_id": 27967938, "question_id": 27952591, "link": "https://stackoverflow.com/questions/27952591/using-a-operator-inside-an-overloaded-operator/27967938#27967938", "title": "Using a &lt;&lt; operator inside an overloaded &lt;&lt; operator", "body": "<p>I posted this on the <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=64611\" rel=\"nofollow\">gcc buglist</a> since I felt this is a bug or at least an ambiguity in the C++ reference. Jonathan Wakely came up with a surprisingly simple solution:</p>\n\n<pre><code>template &lt;typename F&gt; friend F &amp;operator &lt;&lt; (F &amp;in, float f)\n{\n    in.type (\"f\");\n    in.m_buf.str (\"\");\n    using std::operator &lt;&lt;;  // indicate proper operator in the next line\n    in.m_buf &lt;&lt; f;          \n    in.add (in.m_buf.str ());\n    return in;\n}\n</code></pre>\n\n<p>So indeed it required a <code>using</code> clause, just one I wouldn't expect.</p>\n"}], "owner": {"reputation": 2765, "user_id": 206750, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/86J1B.jpg?s=128&g=1", "display_name": "JvO", "link": "https://stackoverflow.com/users/206750/jvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 27967938, "answer_count": 2, "score": 3, "last_activity_date": 1421339116, "creation_date": 1421270146, "last_edit_date": 1495540616, "question_id": 27952591, "link": "https://stackoverflow.com/questions/27952591/using-a-operator-inside-an-overloaded-operator", "title": "Using a &lt;&lt; operator inside an overloaded &lt;&lt; operator", "body": "<p>I'm writing a class that overloads the &lt;&lt; and >> operator similar to std::istream and std::ostream. The first few functions worked as desired. However, I want to use other std::*stream classes inside my own class for formatting purposes, and this causes an interesting, I would say, 'recursive' compiler issue:</p>\n\n<pre><code>class SmartStream\n{\npublic:\n    template &lt;typename F&gt; friend F &amp;operator &lt;&lt; (F &amp;in, float f)\n    {\n        in.type (\"f\");\n        in.m_buf.str (\"\");\n        in.m_buf &lt;&lt; f;          // This causes a 'recursive' compile call\n        in.add (in.m_buf.str ());\n        return in;\n    }\n\nprotected:\n    std::ostringstream m_buf;\n\n    void type(const std::string &amp;_type) {};\n    void add(const std::string &amp;) {};\n};\n</code></pre>\n\n<p>The actual error is long but it starts like this:</p>\n\n<pre><code>rec_stream.cpp: In instantiation of 'F&amp; operator&lt;&lt;(F&amp;, float) [with F = std::basic_ostringstream&lt;char&gt;]':\nrec_stream.cpp:14:18:   required from 'F&amp; operator&lt;&lt;(F&amp;, float) [with F = ExtraStream]'\nrec_stream.cpp:60:11:   required from here\nrec_stream.cpp:12:9: error: 'class std::basic_ostringstream&lt;char&gt;' has no member named 'type'\n         in.type (\"f\");\n         ^\n</code></pre>\n\n<p>So apparently the compiler applies the same overloaded &lt;&lt; operator to the <code>m_buf</code> variable of type std::ostringstream, but of course that doesn't have type() and add() functions. After reading the answer to <a href=\"https://stackoverflow.com/questions/3989678/c-template-friend-operator-overloading\">this question</a> that kinda makes sense, but doesn't provide a solution.</p>\n\n<p>No before you say, use this in SmartStream:</p>\n\n<pre><code>class SmartStream \n{\n   ....\n    SmartStream &amp;operator &lt;&lt; (float f)\n    {\n        type(\"f\");\n        m_buf.str (\"\");\n        m_buf &lt;&lt; f;     // Ambiguous overload\n        add( m_buf.str ());\n        return *this;\n    }\n};\n</code></pre>\n\n<p>There are two problems. First, as noted in the code, that triggers an ambiguous overload. Second, consider the following:</p>\n\n<pre><code>class ExtraStream: public SmartStream\n{\npublic:\n    template &lt;typename F&gt; friend F &amp;operator &lt;&lt; (F &amp;in, struct tm t)\n    {\n        in.type (\"tm\");\n        in.m_buf.str (\"\");\n        in.m_buf &lt;&lt; t.tm_hour; // Ambiguous overload\n        in.add (in.m_buf.str ());\n        return in;\n    }\n};\n</code></pre>\n\n<p>Indeed, I am extending SmartStream to handle custom types using the mechanism laid out in that class. Using the non-friend operator will not allow me to do this:</p>\n\n<pre><code>ExtraStream es;\n\nstruct tm t1, t2;\nfloat f1, f2;\n\nes &lt;&lt; f1 &lt;&lt; t1 &lt;&lt; f2 &lt;&lt; t2; // works\n</code></pre>\n\n<p>Because after a <code>&lt;&lt; (float)</code> the return type is SmartStream which does not know how to handle <code>struct tm</code>s.</p>\n\n<p><b>My question:</b></p>\n\n<p>Is there a way to convince the compiler (gcc 4.8.2) to use the 'base' &lt;&lt; operator for std::ostringstream and not the overloaded one? I tried various casts, :: resolution operators, moving the code with <code>in.m_buf &lt;&lt; f;</code>  to a non-templated function in SmartStream but nothing helped. </p>\n\n<p>Also, why does it only use this inside the template operator &lt;&lt; function? Any use of &lt;&lt; on std::ostringstream outside of that function works as expected.</p>\n"}, {"tags": ["c++", "makefile", "gnu-make"], "answers": [{"comments": [{"owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "edited": false, "score": 0, "creation_date": 1421291453, "post_id": 27953297, "comment_id": 44307138, "body": "Accepted @Louis&#39;s answer, as it is technically correct, even though the syntax requirements for <code>.SECONDEXPANSION</code> mean I&#39;ll use your approach."}, {"owner": {"reputation": 4826, "user_id": 193789, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a17cc57e47435930a48f7c80bcd53863?s=128&d=identicon&r=PG", "display_name": "kebs", "link": "https://stackoverflow.com/users/193789/kebs"}, "edited": false, "score": 0, "creation_date": 1513551461, "post_id": 27953297, "comment_id": 82685283, "body": "The advantage of the &quot;foreach&quot; approach, is that it can be generalized for multiple extensions (think: image formats). I expanded on this <a href=\"https://stackoverflow.com/a/47857821/193789\">in this answer</a>."}], "owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "is_accepted": false, "score": 7, "last_activity_date": 1421273054, "creation_date": 1421273054, "answer_id": 27953297, "question_id": 27952558, "link": "https://stackoverflow.com/questions/27952558/make-pattern-rule-matching-multiple-extensions/27953297#27953297", "title": "make: pattern rule matching multiple extensions", "body": "<p>No, you can't combine the two rules. Prerequisites all have to match.</p>\n\n<p>But you can avoid needing to have the recipe specified twice.</p>\n\n<p>Either by using a define for the recipe:</p>\n\n<pre><code>define COMPILE\n@$(CXX) $(CPPFLAGS) -I. -o $@ -c $?\nendef\n\n$(OBJ_DIR)/%.o: $(SRC_DIR)/%.cpp\n        $(COMPILE)\n\n$(OBJ_DIR)/%.o: $(SRC_DIR)/%.cc\n        $(COMPILE)\n</code></pre>\n\n<p>Or by using a loop and eval to define the recipes (untested I may have gotten some of the escaping wrong but I prefer the define approach anyway):</p>\n\n<pre><code>$(foreach prereq,cc cpp,$(eval $(OBJ_DIR)/%.o: $(SRC_DIR)/%.$(prereq) ; @$(CXX) $(CPPFLAGS) -I. -o $@ -c $?))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7570, "user_id": 17945, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/e8cbc0b9ed29b027a127d8df309af5a6?s=128&d=identicon&r=PG", "display_name": "reinierpost", "link": "https://stackoverflow.com/users/17945/reinierpost"}, "edited": false, "score": 4, "creation_date": 1421282656, "post_id": 27954351, "comment_id": 44305152, "body": "I don&#39;t kn ow about you, but this looks like black magic to me, and I&#39;ve been using <code>make</code> on and off for the past 30 years."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1421324587, "post_id": 27954351, "comment_id": 44319768, "body": "Does this actually work? I&#39;d have expected this to need to be more like <code>$(OBJ_DIR)&#47;%.o: $$(wildcard $$(SRC_DIR)&#47;$$*.cpp) $$(wildcard $$(SRC_DIR)&#47;$$*.cc)</code> To wildcard on the matched stem. Also I wonder if this might have problems in more complicated scenarios. But it is clever."}, {"owner": {"reputation": 127411, "user_id": 1906307, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kRxnP.jpg?s=128&g=1", "display_name": "Louis", "link": "https://stackoverflow.com/users/1906307/louis"}, "reply_to_user": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 1, "creation_date": 1421324690, "post_id": 27954351, "comment_id": 44319822, "body": "@EtanReisner Did you try it? I did."}, {"owner": {"reputation": 68627, "user_id": 258523, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/102329bab02333104708ac179f35fd8d?s=128&d=identicon&r=PG&f=1", "display_name": "Etan Reisner", "link": "https://stackoverflow.com/users/258523/etan-reisner"}, "edited": false, "score": 0, "creation_date": 1421324819, "post_id": 27954351, "comment_id": 44319884, "body": "No, hence the question. I don&#39;t have a good model for when patterns are matched... oh, I see what this is doing I think. The pattern expands first and then wildcard just drops a path that doesn&#39;t exist. I was thinking about it the other way (which didn&#39;t make sense)."}], "owner": {"reputation": 127411, "user_id": 1906307, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/kRxnP.jpg?s=128&g=1", "display_name": "Louis", "link": "https://stackoverflow.com/users/1906307/louis"}, "is_accepted": true, "score": 3, "last_activity_date": 1421277885, "creation_date": 1421277885, "answer_id": 27954351, "question_id": 27952558, "link": "https://stackoverflow.com/questions/27952558/make-pattern-rule-matching-multiple-extensions/27954351#27954351", "title": "make: pattern rule matching multiple extensions", "body": "<p>You can use <a href=\"https://www.gnu.org/software/make/manual/html_node/Secondary-Expansion.html\" rel=\"nofollow\"><code>.SECONDEXPANSION</code></a> for this. Here's an executable example:</p>\n\n<pre><code>OBJ_DIR:=obj\nSRC_DIR:=src\n\nTARGETS:=obj/foo.o obj/bar.o\n\nall: $(TARGETS)\n\n.SECONDEXPANSION:\n$(OBJ_DIR)/%.o: $$(wildcard $(SRC_DIR)/%.cpp) $$(wildcard $(SRC_DIR)/%.cc)\n    @$(CXX) $(CPPFLAGS) -I. -o $@ -c $&lt;\n</code></pre>\n\n<p>Create <code>src/foo.cc</code> and <code>src/bar.cpp</code>, and issue <code>make -n</code>, and you'll get:</p>\n\n<pre><code>g++  -I. -o obj/foo.o -c src/foo.cc\ng++  -I. -o obj/bar.o -c src/bar.cpp\n</code></pre>\n\n<p>If you have both <code>foo.cc</code> and <code>foo.cpp</code> this will behave just like the version in the question asked here (<code>foo.cpp</code> will have precedence over <code>foo.cc</code>, which will be ignored).</p>\n\n<p>The <code>$</code> signs are doubled for <code>$$(wildcard...</code> to prevent evaluation during the first expansion. You could have <code>$$(SRC_DIR)</code> just as well as <code>$(SRC_DIR)</code> since it does not matter (in the code above) when this variable is expanded.</p>\n"}], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1072, "favorite_count": 3, "accepted_answer_id": 27954351, "answer_count": 2, "score": 7, "last_activity_date": 1421277885, "creation_date": 1421270044, "question_id": 27952558, "link": "https://stackoverflow.com/questions/27952558/make-pattern-rule-matching-multiple-extensions", "title": "make: pattern rule matching multiple extensions", "body": "<p>I have duplicated pattern rules for several extensions (eg: <code>cpp</code> and <code>cc</code>):</p>\n\n<pre><code>$(OBJ_DIR)/%.o: $(SRC_DIR)/%.cpp\n    @$(CXX) $(CPPFLAGS) -I. -o $@ -c $?\n\n$(OBJ_DIR)/%.o: $(SRC_DIR)/%.cc\n    @$(CXX) $(CPPFLAGS) -I. -o $@ -c $?\n</code></pre>\n\n<p>Is there a way to have one pattern rule which matches on both extensions, rather than having to have two rules?</p>\n"}, {"tags": ["c++", "arrays", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "edited": false, "score": 1, "creation_date": 1421269512, "post_id": 27952383, "comment_id": 44299794, "body": "How about using a vector?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1421269546, "post_id": 27952383, "comment_id": 44299816, "body": "Have you tried passing <code>&amp;a[0]</code>?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 4, "creation_date": 1421269585, "post_id": 27952383, "comment_id": 44299837, "body": "Hopefully, you learned your lesson about using variable-length arrays in C++..."}, {"owner": {"reputation": 561, "user_id": 4402646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a354f796bf1b1393cba56952653c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rubix Rechvin", "link": "https://stackoverflow.com/users/4402646/rubix-rechvin"}, "edited": false, "score": 0, "creation_date": 1421269624, "post_id": 27952383, "comment_id": 44299862, "body": "How about doing explicit dynamic allocation with the new operator instead of using the variable-length array... those things always have acted funny for me."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 561, "user_id": 4402646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a354f796bf1b1393cba56952653c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rubix Rechvin", "link": "https://stackoverflow.com/users/4402646/rubix-rechvin"}, "edited": false, "score": 3, "creation_date": 1421269643, "post_id": 27952383, "comment_id": 44299876, "body": "@RubixRechvin I think you mean &quot;how about using vector&quot; :P"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421269736, "post_id": 27952383, "comment_id": 44299924, "body": "@juanchopanza that did the trick! Are you going to answer the question or should I delete it? Well, I have to admit that this was a fair warning guys!"}, {"owner": {"reputation": 561, "user_id": 4402646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e2a354f796bf1b1393cba56952653c1?s=128&d=identicon&r=PG&f=1", "display_name": "Rubix Rechvin", "link": "https://stackoverflow.com/users/4402646/rubix-rechvin"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1421269743, "post_id": 27952383, "comment_id": 44299928, "body": "@Borgleader That&#39;ll work too :) Vectors are pretty and oh so fun to use. If you&#39;re into all that kind of stuff ;)"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 0, "creation_date": 1421270767, "post_id": 27952383, "comment_id": 44300542, "body": "<a href=\"http://en.cppreference.com/w/cpp/thread/thread/join\" rel=\"nofollow noreferrer\"><code>std::thread::join</code></a> has a precondition that the thread is <i>joinable</i>. In your program <code>threads[p - 1]</code> is not joinable - since you only initialize <code>p - 1</code> elements in the first loop - so calling <code>join</code> on that thread in the second loop has undefined behavior."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "edited": false, "score": 0, "creation_date": 1421270860, "post_id": 27952383, "comment_id": 44300591, "body": "Nice catch @Casey, I&#39;ll call it a typo I made when making this minimal example. :)"}], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 1, "creation_date": 1421269870, "post_id": 27952491, "comment_id": 44300002, "body": "Nice trick! BTW &quot;use a vector&quot; would have different semantics, because the thread would have its own copy. Worth pointing that out."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1421270118, "post_id": 27952491, "comment_id": 44300170, "body": "Thank you sehe, I am trying to make the concepts you and another user introduced to me in another post if you remember. :) However, what about <code>&amp;a[0]</code>? It works too. Which one should I prefer? I also do not understand what we did in your answer, <code>+a</code> is something new to me."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1421270378, "post_id": 27952491, "comment_id": 44300335, "body": "@G.Samaras The unary operator <code>+</code> applied to the array makes it decay to a pointer. See <a href=\"http://ideone.com/Beekw1\" rel=\"nofollow noreferrer\">this example</a>. It is a nice trick, but I would probably do something more explicit (such as <code>&amp;a[0]</code>)."}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1421270433, "post_id": 27952491, "comment_id": 44300370, "body": "@G.Samaras Applying unary <code>+</code> causes the array to <a href=\"https://stackoverflow.com/q/25701381/241631\">decay into a pointer to the first element</a>. If I had to use a C-style array, I&#39;d use <code>&amp;a[0]</code> because the former would confuse a lot of people. Also, I don&#39;t see why you need <code>bind</code> at all to solve your problem, passing those argument to the <code>thread</code> constructor should be sufficient."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1421270523, "post_id": 27952491, "comment_id": 44300422, "body": "You are right Praetorian, <code>bind</code> is redundant. Thanks, I will use <code>&amp;a[0]</code> for readability. Thanks for the example juanchopanza, really straightforward."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1421270620, "post_id": 27952491, "comment_id": 44300470, "body": "@G.Samaras I&#39;d use <code>std::array&lt;size_t, n&gt;::data()</code>"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1421270745, "post_id": 27952491, "comment_id": 44300523, "body": "Yes that would be a solution too I guess. :)"}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 7, "last_activity_date": 1421269790, "creation_date": 1421269790, "answer_id": 27952491, "question_id": 27952383, "link": "https://stackoverflow.com/questions/27952383/can-not-pass-1d-array-in-stdthread/27952491#27952491", "title": "Can not pass 1D array in std::thread", "body": "<p>Use a vector</p>\n\n<p>Or solve the problem by decaying the array into a pointer <em>before</em> type deduction takes place:</p>\n\n<pre><code>std::bind(&amp;Foo::bar, this, +a, n)\n</code></pre>\n\n<p>The problem is, bind is deducing an array reference and then tries to copy it /by value/. Array copy is not specified by the language.</p>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 27952491, "answer_count": 1, "score": 1, "last_activity_date": 1421270834, "creation_date": 1421269410, "last_edit_date": 1421270834, "question_id": 27952383, "link": "https://stackoverflow.com/questions/27952383/can-not-pass-1d-array-in-stdthread", "title": "Can not pass 1D array in std::thread", "body": "<p>This is for my actual project, but I made a minimal example (code is based on an example of Lightness Races in Orbit).</p>\n\n<pre><code>#include &lt;thread&gt;\n#include &lt;iostream&gt;\n\nclass Foo\n{\n    Foo(int n = 10)\n    {\n        size_t a[n];\n        constexpr int p = 5;\n        std::thread threads[p];\n        for (int i = 0; i &lt; p; ++i)\n            threads[i] = std::thread(std::bind(&amp;Foo::bar, this, a, n));\n\n        for (auto&amp; th : threads) th.join();\n    }\n\n    void bar(size_t* a, int n) {}\n};\n\nint main() {std::cout &lt;&lt; \"ok\\n\";}\n</code></pre>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/1162f9fbcb6a48b8\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<p>The error comes by the fact that I am using an array that has <code>n</code> as its size. However, it will be very difficult for me -in the real project- to change that, since many lines of code are based on that.</p>\n"}, {"tags": ["c++", "arrays", "pointers", "opengl"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 2, "creation_date": 1421269012, "post_id": 27952242, "comment_id": 44299548, "body": "Is there some really good reason you need to use an array rather than a <code>vector</code>?"}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1421269107, "post_id": 27952242, "comment_id": 44299599, "body": "Well, I do believe you&#39;re returning a pointer to a temporary array so that could be a slight issue."}, {"owner": {"reputation": 55, "user_id": 3474409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa9836636f322c5836f904862c027e3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3474409", "link": "https://stackoverflow.com/users/3474409/user3474409"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1421269481, "post_id": 27952242, "comment_id": 44299779, "body": "I need it to be an array because I am binding it to buffers that call for an array @Jerry Coffin."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1421269582, "post_id": 27952242, "comment_id": 44299834, "body": "You can return a <code>vector</code> and take the address of the first element when you need to treat it like an array (but be sure the vector doesn&#39;t get destroyed before you&#39;re done using it)."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 3474409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa9836636f322c5836f904862c027e3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3474409", "link": "https://stackoverflow.com/users/3474409/user3474409"}, "edited": false, "score": 0, "creation_date": 1421269440, "post_id": 27952318, "comment_id": 44299763, "body": "How can I make the second array not temporary if I don&#39;t want to initialize it in main?"}, {"owner": {"reputation": 55, "user_id": 3474409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa9836636f322c5836f904862c027e3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3474409", "link": "https://stackoverflow.com/users/3474409/user3474409"}, "edited": false, "score": 0, "creation_date": 1421269551, "post_id": 27952318, "comment_id": 44299818, "body": "Oh silly me, I think I need to allocate the array with new.. Is that right?"}], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": false, "score": 2, "last_activity_date": 1421269125, "creation_date": 1421269125, "answer_id": 27952318, "question_id": 27952242, "link": "https://stackoverflow.com/questions/27952242/passing-coordinate-array-to-main-opengl-c/27952318#27952318", "title": "Passing coordinate array to main (openGL, C++)", "body": "<blockquote>\n  <p>Does it have something to do with the way I pass the array?</p>\n</blockquote>\n\n<p>You don't pass an array. You pass a pointer. To a local array, those lifetime ends when the function is left. What you have here is just undefined behavior.</p>\n"}, {"owner": {"reputation": 3066, "user_id": 677004, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2dbdd7d84d182c985e5c9f054329443f?s=128&d=identicon&r=PG", "display_name": "rasmus", "link": "https://stackoverflow.com/users/677004/rasmus"}, "is_accepted": true, "score": 2, "last_activity_date": 1421270239, "creation_date": 1421270239, "answer_id": 27952618, "question_id": 27952242, "link": "https://stackoverflow.com/questions/27952242/passing-coordinate-array-to-main-opengl-c/27952618#27952618", "title": "Passing coordinate array to main (openGL, C++)", "body": "<p>In this case you seem to have constant data that you want to return. Make it static and const. Then it won't go out of scope.</p>\n\n<pre><code>const GLfloat* Cube::getVertices() {\n    static const GLfloat vertices[] = {\n        // Data here.\n    };\n    return vertices;\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 3474409, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa9836636f322c5836f904862c027e3c?s=128&d=identicon&r=PG&f=1", "display_name": "user3474409", "link": "https://stackoverflow.com/users/3474409/user3474409"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 27952618, "answer_count": 2, "score": -1, "last_activity_date": 1421270239, "creation_date": 1421268858, "question_id": 27952242, "link": "https://stackoverflow.com/questions/27952242/passing-coordinate-array-to-main-opengl-c", "title": "Passing coordinate array to main (openGL, C++)", "body": "<p>I am trying to pass coordinates of a cube to a main function in C++. This function is located in a seperate cpp file and the method looks like this:</p>\n\n<pre><code> GLfloat * Cube::getVertices()\n {\n // Set up our vertex data (and buffer(s)) and attribute pointers\n   GLfloat  vertices[] = {\n    -0.5f, -0.5f, -0.5f,  0.0f, 0.0f,\n     0.5f, -0.5f, -0.5f,  1.0f, 0.0f,\n     0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\n     0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\n    -0.5f,  0.5f, -0.5f,  0.0f, 1.0f,\n    -0.5f, -0.5f, -0.5f,  0.0f, 0.0f,\n\n    -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\n     0.5f, -0.5f,  0.5f,  1.0f, 0.0f,\n     0.5f,  0.5f,  0.5f,  1.0f, 1.0f,\n     0.5f,  0.5f,  0.5f,  1.0f, 1.0f,\n    -0.5f,  0.5f,  0.5f,  0.0f, 1.0f,\n    -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\n\n    -0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\n    -0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\n    -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\n    -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\n    -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\n    -0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\n\n     0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\n     0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\n     0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\n     0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\n     0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\n     0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\n\n    -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\n     0.5f, -0.5f, -0.5f,  1.0f, 1.0f,\n     0.5f, -0.5f,  0.5f,  1.0f, 0.0f,\n     0.5f, -0.5f,  0.5f,  1.0f, 0.0f,\n    -0.5f, -0.5f,  0.5f,  0.0f, 0.0f,\n    -0.5f, -0.5f, -0.5f,  0.0f, 1.0f,\n\n    -0.5f,  0.5f, -0.5f,  0.0f, 1.0f,\n     0.5f,  0.5f, -0.5f,  1.0f, 1.0f,\n     0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\n     0.5f,  0.5f,  0.5f,  1.0f, 0.0f,\n    -0.5f,  0.5f,  0.5f,  0.0f, 0.0f,\n    -0.5f,  0.5f, -0.5f,  0.0f, 1.0f\n};\n// GLfloat *vert = vertices;\n  return vertices;\n}\n</code></pre>\n\n<p>In the main method I do this </p>\n\n<pre><code> Cube cube1;\n GLfloat * vertices;\n vertices = cube1.getVertices();\n</code></pre>\n\n<p>Whenever my coordinates are in main the cube comes out correctly but when it is in this seperate method it seems like I am getting addresses instead of values and no square appears. Does it have something to do with the way I pass the array? </p>\n"}, {"tags": ["c#", "python", "c++", "math", "pca"], "comments": [{"owner": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "edited": false, "score": 0, "creation_date": 1421334269, "post_id": 27952094, "comment_id": 44325475, "body": "Maybe you should include in the question the answers to the questions that once were in comments here, especially the specifics on the matrix."}, {"owner": {"reputation": 266835, "user_id": 51816, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0e54bb28182bcd9df39704751306df27?s=128&d=identicon&r=PG", "display_name": "Joan Venge", "link": "https://stackoverflow.com/users/51816/joan-venge"}, "reply_to_user": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "edited": false, "score": 0, "creation_date": 1421535011, "post_id": 27952094, "comment_id": 44398791, "body": "@Cimbali: Not sure why they were deleted but I will try to add what I remember."}], "answers": [{"comments": [{"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 1, "creation_date": 1421277302, "post_id": 27952895, "comment_id": 44303480, "body": "No, don&#39;t do that.  Finding eigenvalues via the characteristic polynomial is numerically unstable."}, {"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1421335140, "post_id": 27952895, "comment_id": 44326074, "body": "Yes.  It looks like you avoided most of the usual bugs here.  But in your code, an <code>r</code> close to <code>-1</code> leads to a <code>phi</code> around <code>M_PI&#47;3</code> plus error on the order of <b>the square root of</b> the distance between <code>r</code> and <code>-1</code>.  This error perturbs <code>cos</code> by a similar amount  I took the bait and found a bad matrix for your code:  <code>[0x1.f1de4a71dea6p-1,-0x1.32245edca28p-4,0; -0x1.32245edca28p-4,0x1.af4cd633c31p-3,0; 0,0,0x1.f5965a029b8ap-1]</code>.  (Those numbers are in C99 hexfloat notation.)  Your approach only gets about 32 significant bits."}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "edited": false, "score": 0, "creation_date": 1421541683, "post_id": 27952895, "comment_id": 44400317, "body": "Double precision IEEE floating point numbers have 17 digits of precision.  That&#39;s it."}, {"owner": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "edited": false, "score": 0, "creation_date": 1421542166, "post_id": 27952895, "comment_id": 44400399, "body": "They have a 52 bit mantissa, if that&#39;s what you&#39;re trying to say. With 1 implicit bit that&#39;s a maximum precision of around 10^-16 (normalized for the exponent of course). So 32 bits in a pathological case is pretty bad, and certainly much worse than what you&#39;d expect, but then the precision you need depends on the applications..."}], "owner": {"reputation": 5231, "user_id": 1387346, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CKtdC.png?s=128&g=1", "display_name": "Cimbali", "link": "https://stackoverflow.com/users/1387346/cimbali"}, "is_accepted": true, "score": 3, "last_activity_date": 1421336665, "last_edit_date": 1486565976, "creation_date": 1421271398, "answer_id": 27952895, "question_id": 27952094, "link": "https://stackoverflow.com/questions/27952094/how-to-find-the-largest-eigenvector-of-a-matrix/27952895#27952895", "title": "How to find the largest eigenvector of a matrix?", "body": "<p>Let us recap what you are asking, to clarify :</p>\n\n<ol>\n<li>Find an eigenvector of a matrix <code>mat</code></li>\n<li>This eigenvector should be associated with the largest eigenvalue of the matrix</li>\n<li>The matrix is the symmetric covariance matrix of a <a href=\"http://en.wikipedia.org/wiki/Principal_component_analysis\" rel=\"nofollow noreferrer\">principal component analysis</a>. <strong>In particular, it is symmetric.</strong></li>\n<li>Your matrix is square <strong>of size 3 by 3</strong>, as shown in your code by <code>matrix3 mat = ...</code> and confirmed in a (now deleted) comment.</li>\n</ol>\n\n<p>Under these very specific circumstances, the following answer applies. However tmyklebu warns against numerical instability of this approach for some pathological matrices, typically when <code>r</code> is close to <code>-1</code>.</p>\n\n<hr>\n\n<p>Alright, lets start with a bit of reading from <a href=\"http://en.wikipedia.org/wiki/Characteristic_polynomial\" rel=\"nofollow noreferrer\">wikipedia's page on Characteristic polynomials</a></p>\n\n<blockquote>\n  <p>In linear algebra, the characteristic polynomial of a square matrix is a polynomial, which is invariant under matrix similarity and has the eigenvalues as roots. <img src=\"https://upload.wikimedia.org/math/f/6/f/f6fe4fa336f1255262578af6f7bcecf2.png\" alt=\"det(zI-A)\"></p>\n</blockquote>\n\n<p>blah blah blah, let's skip directly to the <a href=\"http://en.wikipedia.org/wiki/Eigenvalue_algorithm#3.C3.973_matrices\" rel=\"nofollow noreferrer\">3x3 matrix section in the page on Eigenvalue algorithms</a>.</p>\n\n<blockquote>\n  <p>If A is a 3\u00d73 matrix, then its characteristic equation can be expressed as:\n  <img src=\"https://upload.wikimedia.org/math/3/6/8/368d6fcf38d02c589e77e415a02b08ad.png\" alt=\"det(zI-A)\"></p>\n</blockquote>\n\n<p>Followed a few lines later by (more or less) this pseudo-code, <strong>for symmetric matrices</strong> (which you say you have, if I'm not mistaken -- otherwise you might have complex eigenvalues) :</p>\n\n<pre><code>p1 = A(1,2)^2 + A(1,3)^2 + A(2,3)^2\nif (p1 == 0) \n   % A is diagonal.\n   eig1 = A(1,1)\n   eig2 = A(2,2)\n   eig3 = A(3,3)\nelse\n   q = (A(1,1) + A(2,2) + A(3,3)) / 3\n   p2 = (A(1,1) - q)^2 + (A(2,2) - q)^2 + (A(3,3) - q)^2 + 2 * p1\n   p = sqrt(p2 / 6)\n   B = (1 / p) * (A - q * I)       % I is the identity matrix\n   r = determinant(B) / 2\n\n   % In exact arithmetic for a symmetric matrix  -1 &lt;= r &lt;= 1\n   % but computation error can leave it slightly outside this range.\n   if (r &lt;= -1) \n      phi = pi / 3\n   elseif (r &gt;= 1)\n      phi = 0\n   else\n      phi = acos(r) / 3\n   end\n\n   % the eigenvalues satisfy eig3 &lt;= eig2 &lt;= eig1\n   eig1 = q + 2 * p * cos(phi)\n   eig3 = q + 2 * p * cos(phi + (2*pi/3))\n   eig2 = 3 * q - eig1 - eig3     % since trace(A) = eig1 + eig2 + eig3\nend\n</code></pre>\n\n<p>So you want <code>max(eig1,eig2,eig3)</code> in the first case, <code>eig1</code> in the second case. Let us call <code>e</code> this largest eigenvalue.</p>\n\n<p>For the eigenvector, you can now just solve <code>(A-e*I)x=0</code></p>\n"}, {"owner": {"reputation": 292363, "user_id": 37213, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/eeec80237213c91e5bab56b77ac5b8ca?s=128&d=identicon&r=PG", "display_name": "duffymo", "link": "https://stackoverflow.com/users/37213/duffymo"}, "is_accepted": false, "score": 1, "last_activity_date": 1421333850, "last_edit_date": 1492088034, "creation_date": 1421333850, "answer_id": 27966232, "question_id": 27952094, "link": "https://stackoverflow.com/questions/27952094/how-to-find-the-largest-eigenvector-of-a-matrix/27966232#27966232", "title": "How to find the largest eigenvector of a matrix?", "body": "<p>There are different algorithms for finding eigenvalues.  Some work from smallest to largest, like QR; others work from largest to smallest, like power iteration or Jacobi-Davidson.  </p>\n\n<p>Maybe a switch of algorithm is what you want.  Try power method and see if that helps.</p>\n\n<p><a href=\"https://scicomp.stackexchange.com/questions/1681/what-is-the-fastest-way-to-calculate-the-largest-eigenvalue-of-a-general-matrix\">https://scicomp.stackexchange.com/questions/1681/what-is-the-fastest-way-to-calculate-the-largest-eigenvalue-of-a-general-matrix</a></p>\n"}], "owner": {"reputation": 266835, "user_id": 51816, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0e54bb28182bcd9df39704751306df27?s=128&d=identicon&r=PG", "display_name": "Joan Venge", "link": "https://stackoverflow.com/users/51816/joan-venge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1972, "favorite_count": 0, "accepted_answer_id": 27952895, "answer_count": 2, "score": -1, "last_activity_date": 1421535041, "creation_date": 1421268358, "last_edit_date": 1421535041, "question_id": 27952094, "link": "https://stackoverflow.com/questions/27952094/how-to-find-the-largest-eigenvector-of-a-matrix", "title": "How to find the largest eigenvector of a matrix?", "body": "<p>I am trying to implement this without success and I have to do this without using external modules numpy, etc. There are 3 modules in the app I am coding this, Python and C#, C++ but no other fancy libraries other than standard ones.</p>\n\n<p>On a separate application, I used numpy's svd and it works very accurately. So I am using it to match my results. My method is PCA and everything is good up to this point. But after I calculate my symmetric covariance matrix, I don't know how to find the largest eigenvector.</p>\n\n<p>The data set is always 3d points, x, y and z.</p>\n\n<pre><code>vector center;\nfor(point p in points):\n    center += p;\ncenter /= points.count;\n\nsumxx = 0;\nsumxy = 0;\nsumxz = 0;\nsumyy = 0;\nsumyz = 0;\nsumzz = 0;\nfor(point p in points):\n    vector s = p - center;\n    sumxx += s.x * s.x;\n    sumxy += s.x * s.y;\n    sumxz += s.x * s.z;\n    sumyy += s.y * s.y;\n    sumyz += s.y * s.z;\n    sumzz += s.z * s.z;\n\nmatrix3 mat = invert(matrix3(sumxx, sumxy, sumxz, sumxy, sumyy, sumyz, sumxz, sumyz, sumzz));\nvector n;\nif (determinant(mat) &gt; 0)\n    normal = find_largest_eigenvalue\n</code></pre>\n"}, {"tags": ["c++", "string", "tokenize"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1421268246, "post_id": 27952032, "comment_id": 44299156, "body": "id create a new string that is twice the size. copy a character, insert |, rinse &amp; repeat."}, {"owner": {"reputation": 99, "user_id": 4308970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fe54c4a1b5fe8e96fe0c4faa917273?s=128&d=identicon&r=PG", "display_name": "CATspellsDOG", "link": "https://stackoverflow.com/users/4308970/catspellsdog"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1421513245, "post_id": 27952032, "comment_id": 44392569, "body": "@TheParamagneticCroissant I am making a programming language that doesn&#39;t compile, but users will be able to make compilers with it because it will be advanced. By saying: &#39;it will not compile&#39;, I mean you write a program in a file and drag and drop it onto a exe and you see the output in cmd."}, {"owner": {"reputation": 99, "user_id": 4308970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fe54c4a1b5fe8e96fe0c4faa917273?s=128&d=identicon&r=PG", "display_name": "CATspellsDOG", "link": "https://stackoverflow.com/users/4308970/catspellsdog"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1424007775, "post_id": 27952032, "comment_id": 45368961, "body": "@TheParamagneticCroissant I made it :) It transforms into C and then it uses MinGW to handle the rest."}], "answers": [{"owner": {"reputation": 7182, "user_id": 1756405, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ba33dcfe557ac8225234e185a43d8844?s=128&d=identicon&r=PG", "display_name": "IdeaHat", "link": "https://stackoverflow.com/users/1756405/ideahat"}, "is_accepted": true, "score": 10, "last_activity_date": 1421269290, "last_edit_date": 1421269290, "creation_date": 1421268291, "answer_id": 27952075, "question_id": 27952032, "link": "https://stackoverflow.com/questions/27952032/how-to-insert-a-character-every-n-characters-in-a-string-in-c/27952075#27952075", "title": "How to insert a character every N characters in a string in C++", "body": "<pre><code>std::string tokenize(const std::string&amp; s) {\n   if (!s.size()) {\n     return \"\";\n   }\n   std::stringstream ss;\n   ss &lt;&lt; s[0];\n   for (int i = 1; i &lt; s.size(); i++) {\n     ss &lt;&lt; '|' &lt;&lt; s[i];\n   }\n   return ss.str();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 99, "user_id": 4308970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fe54c4a1b5fe8e96fe0c4faa917273?s=128&d=identicon&r=PG", "display_name": "CATspellsDOG", "link": "https://stackoverflow.com/users/4308970/catspellsdog"}, "edited": false, "score": 0, "creation_date": 1421268623, "post_id": 27952119, "comment_id": 44299326, "body": "I would really appreciate if you can actually show me the code you would write."}, {"owner": {"reputation": 1240, "user_id": 1788496, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7efebd4721a49a49058e243f01d1dd9a?s=128&d=identicon&r=PG", "display_name": "mgrenier", "link": "https://stackoverflow.com/users/1788496/mgrenier"}, "reply_to_user": {"reputation": 99, "user_id": 4308970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fe54c4a1b5fe8e96fe0c4faa917273?s=128&d=identicon&r=PG", "display_name": "CATspellsDOG", "link": "https://stackoverflow.com/users/4308970/catspellsdog"}, "edited": false, "score": 1, "creation_date": 1421269087, "post_id": 27952119, "comment_id": 44299586, "body": "@IdealHate solution is probably the best"}, {"owner": {"reputation": 99, "user_id": 4308970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fe54c4a1b5fe8e96fe0c4faa917273?s=128&d=identicon&r=PG", "display_name": "CATspellsDOG", "link": "https://stackoverflow.com/users/4308970/catspellsdog"}, "edited": false, "score": 0, "creation_date": 1421269267, "post_id": 27952119, "comment_id": 44299675, "body": "@mgreenier did you vote it up? as it all comes to people voting not saying."}], "owner": {"reputation": 1240, "user_id": 1788496, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/7efebd4721a49a49058e243f01d1dd9a?s=128&d=identicon&r=PG", "display_name": "mgrenier", "link": "https://stackoverflow.com/users/1788496/mgrenier"}, "is_accepted": false, "score": 1, "last_activity_date": 1421268801, "last_edit_date": 1421268801, "creation_date": 1421268435, "answer_id": 27952119, "question_id": 27952032, "link": "https://stackoverflow.com/questions/27952032/how-to-insert-a-character-every-n-characters-in-a-string-in-c/27952119#27952119", "title": "How to insert a character every N characters in a string in C++", "body": "<p>You can use </p>\n\n<pre><code>string&amp; insert (size_t pos, const string&amp; str);\n</code></pre>\n\n<p>You would have to loop through the string, inserting a character each time.</p>\n\n<pre><code>for (int i = 1; i &lt; str.size(); i++) {\n      str &lt;&lt; str.insert(i, '|');\n      i++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14902, "user_id": 129202, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f3abb4bbd888e218bace2f36b2c60d11?s=128&d=identicon&r=PG", "display_name": "Jonny", "link": "https://stackoverflow.com/users/129202/jonny"}, "edited": false, "score": 0, "creation_date": 1432804843, "post_id": 27952153, "comment_id": 49080511, "body": "Does this answer the question in the title, every Nth character? Can the iterator be rewritten to handle that?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 14902, "user_id": 129202, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f3abb4bbd888e218bace2f36b2c60d11?s=128&d=identicon&r=PG", "display_name": "Jonny", "link": "https://stackoverflow.com/users/129202/jonny"}, "edited": false, "score": 0, "creation_date": 1432825605, "post_id": 27952153, "comment_id": 49096253, "body": "@Jonny: It inserts a separator after each &quot;item&quot; in the input. Since it turned out he wanted it after every character, this just uses an &quot;item&quot; of type char. If you wanted 2 characters, then a separator, you&#39;d copy two-character strings from input to output."}], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 4, "last_activity_date": 1421268524, "last_edit_date": 1492087233, "creation_date": 1421268524, "answer_id": 27952153, "question_id": 27952032, "link": "https://stackoverflow.com/questions/27952032/how-to-insert-a-character-every-n-characters-in-a-string-in-c/27952153#27952153", "title": "How to insert a character every N characters in a string in C++", "body": "<p>I think I'd use a standard algorithm and iterator:</p>\n\n<pre><code>std::string add_seps(std::string const &amp;input, std::string sep=\"|\") { \n    std::ostringstream os;\n    std::copy(input.begin(), input.end(), std::ostream_iterator&lt;char&gt;(os, sep));\n    return os.str();\n}\n</code></pre>\n\n<p>As it stands, this adds a separator after the last character of the input. If you only want them between characters, you'd use an <a href=\"https://codereview.stackexchange.com/q/13176/489\"><code>infix_ostream_iterator</code></a>.</p>\n"}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "is_accepted": false, "score": 0, "last_activity_date": 1421271195, "last_edit_date": 1421271195, "creation_date": 1421270443, "answer_id": 27952678, "question_id": 27952032, "link": "https://stackoverflow.com/questions/27952032/how-to-insert-a-character-every-n-characters-in-a-string-in-c/27952678#27952678", "title": "How to insert a character every N characters in a string in C++", "body": "<p>Here's a slightly different approach that will only do 1 allocation for the resultant string so it should be slightly more efficient than some other suggestions.</p>\n\n<pre><code>std::string AddSeparators(const std::string &amp; s)\n{\n    if(s.size() &lt;= 1)\n        return s;\n\n    std::string r;\n    r.reserve((s.size()*2)-1);\n    r.push_back(s[0]);\n    for(size_t i = 1; i &lt; s.size(); ++i)\n    {\n        r.push_back('|');\n        r.push_back(s[i]);\n    }\n    return r;\n}\n</code></pre>\n"}, {"owner": {"reputation": 397, "user_id": 6134236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd53a229c4a18a487fc2cf15d83c2f5?s=128&d=identicon&r=PG&f=1", "display_name": "Stamen Rakov", "link": "https://stackoverflow.com/users/6134236/stamen-rakov"}, "is_accepted": false, "score": 1, "last_activity_date": 1459965000, "creation_date": 1459965000, "answer_id": 36458653, "question_id": 27952032, "link": "https://stackoverflow.com/questions/27952032/how-to-insert-a-character-every-n-characters-in-a-string-in-c/36458653#36458653", "title": "How to insert a character every N characters in a string in C++", "body": "<p>Here is my C++11 example (with gcc 4.7):</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\ntemplate&lt;const unsigned num, const char separator&gt;\nvoid separate(std::string &amp; input)\n{\n    for ( auto it = input.begin(); (num+1) &lt;= std::distance(it, input.end()); ++it )\n    {\n        std::advance(it,num);\n        it = input.insert(it,separator);\n    }\n}\n\nint main(void)\n{\n    std::string input{\"aaffbb3322ff77c\"};\n    separate&lt;3,' '&gt;(input);\n    std::cout &lt;&lt; input &lt;&lt; std::endl;\n    separate&lt;4,'+'&gt;(input);\n    std::cout &lt;&lt; input &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>The result output is:</p>\n\n<p>aaf fbb 332 2ff 77c</p>\n\n<p>aaf +fbb +332 +2ff +77c</p>\n"}], "owner": {"reputation": 99, "user_id": 4308970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57fe54c4a1b5fe8e96fe0c4faa917273?s=128&d=identicon&r=PG", "display_name": "CATspellsDOG", "link": "https://stackoverflow.com/users/4308970/catspellsdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8258, "favorite_count": 1, "accepted_answer_id": 27952075, "answer_count": 5, "score": 3, "last_activity_date": 1459965000, "creation_date": 1421268127, "last_edit_date": 1421693294, "question_id": 27952032, "link": "https://stackoverflow.com/questions/27952032/how-to-insert-a-character-every-n-characters-in-a-string-in-c", "title": "How to insert a character every N characters in a string in C++", "body": "<p>How can I insert a <strong>char</strong>acter into a <strong>string</strong> exactly after 1 character?</p>\n\n<p>I need to insert '|' into\nthe string after every other character.</p>\n\n<p>In other words (C++): <code>\"Tokens all around!\"</code><br>\nTurns into: <code>\"T|o|k|e|n|s| |a|l|l| |a|r|o|u|n|d|!\"</code> (no thats not an array)</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "xcode", "macos", "opengl", "glut"], "answers": [{"comments": [{"owner": {"reputation": 2757, "user_id": 2666125, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c68f6b3fd36e24044c2ad394acf311cd?s=128&d=identicon&r=PG&f=1", "display_name": "Beast_Code", "link": "https://stackoverflow.com/users/2666125/beast-code"}, "edited": false, "score": 0, "creation_date": 1421269170, "post_id": 27952170, "comment_id": 44299628, "body": "so it&#39;s an OSX issue? Also, if I return 0 it says it should not return a value."}, {"owner": {"reputation": 538, "user_id": 833307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/36599f3d357c992ff73f7eee8a3a72d6?s=128&d=identicon&r=PG", "display_name": "Toby Cronin", "link": "https://stackoverflow.com/users/833307/toby-cronin"}, "reply_to_user": {"reputation": 2757, "user_id": 2666125, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c68f6b3fd36e24044c2ad394acf311cd?s=128&d=identicon&r=PG&f=1", "display_name": "Beast_Code", "link": "https://stackoverflow.com/users/2666125/beast-code"}, "edited": false, "score": 0, "creation_date": 1421269329, "post_id": 27952170, "comment_id": 44299710, "body": "Yes in OSX 10.9 they have deprecated these functions. Meaning they will remove them at some point and do not really want you to use them. I&#39;m not sure what the problem with your main function is, could you post the code?"}, {"owner": {"reputation": 2757, "user_id": 2666125, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c68f6b3fd36e24044c2ad394acf311cd?s=128&d=identicon&r=PG&f=1", "display_name": "Beast_Code", "link": "https://stackoverflow.com/users/2666125/beast-code"}, "edited": false, "score": 0, "creation_date": 1421459270, "post_id": 27952170, "comment_id": 44381136, "body": "Funny because that&#39;s the test code my prof gave us to test the installation. (But on visual studio)."}], "owner": {"reputation": 538, "user_id": 833307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/36599f3d357c992ff73f7eee8a3a72d6?s=128&d=identicon&r=PG", "display_name": "Toby Cronin", "link": "https://stackoverflow.com/users/833307/toby-cronin"}, "is_accepted": true, "score": 2, "last_activity_date": 1421269849, "last_edit_date": 1495540256, "creation_date": 1421268572, "answer_id": 27952170, "question_id": 27952029, "link": "https://stackoverflow.com/questions/27952029/opengl-c-on-mac-build-fail-gl-glut-h-file-not-found/27952170#27952170", "title": "OpenGL C++ on Mac build fail &#39;GL/glut.h&#39; file not found", "body": "<p>When you changed it to 'GLUT/glut.h` it finds the header correctly. Unfortunately now you get all the warning messages about deprecated functions.</p>\n\n<p>For a fix for the deprecated function messages see <a href=\"https://stackoverflow.com/questions/19568088/xcode-5-deprecation-warning-about-glut-functions\">xcode 5 deprecation warning about glut functions</a> or <a href=\"https://stackoverflow.com/questions/24095931/glut-deprecation-in-mac-osx-10-9-ide-qt-creator\">Glut deprecation in Mac OSX 10.9, IDE: QT Creator</a></p>\n\n<p>You also have an error message saying that your main function needs to return an int. This is what will prevent your code from compiling, not the warnings.</p>\n\n<p><strong>Edit</strong>\nYou should change your main function to have a return type of int.</p>\n\n<pre><code>int main(int argc, char *argv[])\n{\n  /* code */\n  return 0;\n}\n</code></pre>\n\n<p>Some compilers will accept void as a return type for main but this is a non-standard extension.</p>\n"}, {"owner": {"reputation": 11, "user_id": 2724262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f059d480201ab54b9f68f6a23a0f2d6?s=128&d=identicon&r=PG&f=1", "display_name": "user2724262", "link": "https://stackoverflow.com/users/2724262/user2724262"}, "is_accepted": false, "score": 1, "last_activity_date": 1538742856, "creation_date": 1538742856, "answer_id": 52665758, "question_id": 27952029, "link": "https://stackoverflow.com/questions/27952029/opengl-c-on-mac-build-fail-gl-glut-h-file-not-found/52665758#52665758", "title": "OpenGL C++ on Mac build fail &#39;GL/glut.h&#39; file not found", "body": "<p>Try <code>#include &lt;GLUT/glut.h&gt;</code>\nas the framework linked name is GLUT.</p>\n"}], "owner": {"reputation": 2757, "user_id": 2666125, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c68f6b3fd36e24044c2ad394acf311cd?s=128&d=identicon&r=PG&f=1", "display_name": "Beast_Code", "link": "https://stackoverflow.com/users/2666125/beast-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10622, "favorite_count": 0, "accepted_answer_id": 27952170, "answer_count": 2, "score": 0, "last_activity_date": 1538742856, "creation_date": 1421268109, "last_edit_date": 1421269515, "question_id": 27952029, "link": "https://stackoverflow.com/questions/27952029/opengl-c-on-mac-build-fail-gl-glut-h-file-not-found", "title": "OpenGL C++ on Mac build fail &#39;GL/glut.h&#39; file not found", "body": "<p>Attempting to run a sample OpenGL C++ program on OSX Yosemite with xCode.</p>\n\n<p>When running the program I get 'GL/glut.h' file not found screenshot:</p>\n\n<p><img src=\"https://i.stack.imgur.com/0AW7W.png\" alt=\"&#39;GL/glut.h&#39; file not found\"></p>\n\n<p>However, I do have the glut.h header in the project:</p>\n\n<p><img src=\"https://i.stack.imgur.com/EH2vL.png\" alt=\"glut.h header in the project\"></p>\n\n<p>On a separate forum I read that it should be 'GLUT/glut.h' so I did, but got the following message:</p>\n\n<p><img src=\"https://i.stack.imgur.com/2rkB0.png\" alt=\"GLUT/glut.h\"></p>\n\n<p>What do I need to do to have OpenGL with C++ configured?</p>\n\n<p>This is the code I am trying to run. If I can run this, then I should have everything ready to go:</p>\n\n<pre><code>#include &lt;GLUT/glut.h&gt;\n#include &lt;math.h&gt;\n//#include &lt;stdlib.h&gt;\n\nconst double TWO_PI = 6.2831853;\n\n/*  Initial display-window size.  */\nGLsizei winWidth = 400, winHeight = 400;\nGLuint regHex;\n\nclass screenPt\n{\nprivate:\n    GLint x, y;\n\npublic:\n    /*  Default Constructor: initializes coordinate position to (0, 0).  */\n    screenPt ( )  {\n        x = y = 0;\n    }\n\n    void setCoords (GLint xCoord, GLint yCoord)  {\n        x = xCoord;\n        y = yCoord;\n    }\n\n    GLint getx ( ) const  {\n        return x;\n    }\n\n    GLint gety ( ) const  {\n        return y;\n    }\n};\n\nstatic void init (void)\n{\n    screenPt hexVertex, circCtr;\n    GLdouble theta;\n    GLint k;\n\n    /*  Set circle center coordinates.  */\n    circCtr.setCoords (winWidth / 2, winHeight / 2);\n\n    glClearColor (1.0, 1.0, 1.0, 0.0);   //  Display-window color = white.\n\n    /*  Set up a display list for a red regular hexagon.\n     *  Vertices for the hexagon are six equally spaced\n     *  points around the circumference of a circle.\n     */\n    regHex = glGenLists (1);   //  Get an identifier for the display list.\n    glNewList (regHex, GL_COMPILE);\n    glColor3f (1.0, 0.0, 0.0);   //  Set fill color for hexagon to red.\n    glBegin (GL_POLYGON);\n    for (k = 0; k &lt; 6; k++) {\n        theta = TWO_PI * k / 6.0;\n        hexVertex.setCoords (circCtr.getx ( ) + 150 * cos (theta),\n                             circCtr.gety ( ) + 150 * sin (theta));\n        glVertex2i (hexVertex.getx ( ), hexVertex.gety ( ));\n    }\n    glEnd ( );\n    glEndList ( );\n}\n\nvoid regHexagon (void)\n{\n    glClear (GL_COLOR_BUFFER_BIT);\n\n    glCallList (regHex);\n\n    glFlush ( );\n}\n\nvoid winReshapeFcn (int newWidth, int newHeight)\n{\n    glMatrixMode (GL_PROJECTION);\n    glLoadIdentity ( );\n    gluOrtho2D (0.0, (GLdouble) newWidth, 0.0, (GLdouble) newHeight);\n\n    glClear (GL_COLOR_BUFFER_BIT);\n}\n\nvoid main (int argc, char** argv)\n{\n    glutInit (&amp;argc, argv);\n    glutInitDisplayMode (GLUT_SINGLE | GLUT_RGB);\n    glutInitWindowPosition (100, 100);\n    glutInitWindowSize (winWidth, winHeight);\n    glutCreateWindow (\"Reshape-Function &amp; Display-List Example\");\n\n    init ( );\n    glutDisplayFunc (regHexagon);\n    glutReshapeFunc (winReshapeFcn);\n\n    glutMainLoop ( );\n}\n</code></pre>\n"}, {"tags": ["c++", "directx", "directx-11", "hresult", "dds-format"], "comments": [{"owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1421269060, "post_id": 27951873, "comment_id": 44299569, "body": "It looks like you&#39;re using the DirectXTex library so you should have the actual source code.  If you try stepping into the function in a debugger, where does it fail?"}, {"owner": {"reputation": 13, "user_id": 4455043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b5e6ea7d8f97bf5bd426e6e4909912?s=128&d=identicon&r=PG&f=1", "display_name": "Leaf", "link": "https://stackoverflow.com/users/4455043/leaf"}, "reply_to_user": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "edited": false, "score": 0, "creation_date": 1421270111, "post_id": 27951873, "comment_id": 44300165, "body": "I&#39;m using the DirectX Toolkit. I stepped into it, but eh.. I&#39;m not sure exactly where it goes to the error.."}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "edited": false, "score": 1, "creation_date": 1421350586, "post_id": 27951873, "comment_id": 44335771, "body": "Note that you can convert Wavefront OBJ models to VBO, CMO, or SDKMESH using <i>meshconvert</i> from <a href=\"http://go.microsoft.com/fwlink/?LinkID=324981\" rel=\"nofollow noreferrer\">DirectXMesh</a> and then load those with <a href=\"http://go.microsoft.com/fwlink/?LinkId=248929\" rel=\"nofollow noreferrer\">DirectX Tool Kit</a> using <code>Model</code>. Look <a href=\"https://directxtk.codeplex.com/wikipage?title=Rendering%20a%20model\" rel=\"nofollow noreferrer\">here</a> for a walk-through."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4455043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b5e6ea7d8f97bf5bd426e6e4909912?s=128&d=identicon&r=PG&f=1", "display_name": "Leaf", "link": "https://stackoverflow.com/users/4455043/leaf"}, "edited": false, "score": 0, "creation_date": 1421270606, "post_id": 27952575, "comment_id": 44300462, "body": "Aye, it seems like it doesn&#39;t like my DXGI_FORMAT:      DXGI_FORMAT_UNKNOWN;     format = GetDXGIFormat( header-&gt;ddspf ); It set the format to unknown. Why is that?"}, {"owner": {"reputation": 404, "user_id": 465211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13bc7894da22afb0e3e4f9da10b1adc3?s=128&d=identicon&r=PG", "display_name": "MikeBMcL", "link": "https://stackoverflow.com/users/465211/mikebmcl"}, "reply_to_user": {"reputation": 13, "user_id": 4455043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b5e6ea7d8f97bf5bd426e6e4909912?s=128&d=identicon&r=PG&f=1", "display_name": "Leaf", "link": "https://stackoverflow.com/users/4455043/leaf"}, "edited": false, "score": 0, "creation_date": 1421292903, "post_id": 27952575, "comment_id": 44307487, "body": "Either the file is corrupt, not actually a DDS file, or in some odd/old format. Without access to the image file that is giving you trouble that&#39;s the best I can do. Try viewing the image in a program that will let you view DDSs and see if it works there. DXGI_FORMAT_UNKNOWN means just that: the format of the image data is unknown (and as such nothing useful can be done with it beyond saving the data to some other file). If that&#39;s the only thing that is wrong, you can try setting it to each of the formats and viewing the result (if any) until it looks right. Then you&#39;d know the format."}], "owner": {"reputation": 404, "user_id": 465211, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13bc7894da22afb0e3e4f9da10b1adc3?s=128&d=identicon&r=PG", "display_name": "MikeBMcL", "link": "https://stackoverflow.com/users/465211/mikebmcl"}, "is_accepted": false, "score": 0, "last_activity_date": 1421270104, "creation_date": 1421270104, "answer_id": 27952575, "question_id": 27951873, "link": "https://stackoverflow.com/questions/27951873/cant-get-createddstexturefromfile-to-work/27952575#27952575", "title": "Can&#39;t get CreateDDSTextureFromFile to work", "body": "<p>If you look at the source code for CreateTextureFromDDS (which is called by CreateDDSTextureFromFile to do the main data processing) - <a href=\"http://directxtk.codeplex.com/SourceControl/latest#Src/DDSTextureLoader.cpp\" rel=\"nofollow\">http://directxtk.codeplex.com/SourceControl/latest#Src/DDSTextureLoader.cpp</a> - you will see that there are a lot of reasons you could be getting \"HRESULT_FROM_WIN32(ERROR_NOT_SUPPORTED)\".</p>\n\n<p>It's not likely a problem with opening or reading the file since that would return a different error code. So most likely its an unsupported DXGI_FORMAT, a malformed cubemap, an invalid mipmap count, or invalid image dimensions (i.e. larger than the limits found here: <a href=\"http://msdn.microsoft.com/en-us/library/ff819065(v=vs.85).aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/ff819065(v=vs.85).aspx</a> ).</p>\n"}, {"owner": {"reputation": 28528, "user_id": 3780494, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vqia1.jpg?s=128&g=1", "display_name": "Chuck Walbourn", "link": "https://stackoverflow.com/users/3780494/chuck-walbourn"}, "is_accepted": true, "score": 3, "last_activity_date": 1421350064, "creation_date": 1421350064, "answer_id": 27971434, "question_id": 27951873, "link": "https://stackoverflow.com/questions/27951873/cant-get-createddstexturefromfile-to-work/27971434#27971434", "title": "Can&#39;t get CreateDDSTextureFromFile to work", "body": "<p>The most likely problem is that your \"boxTexture.dds\" is a 24 bit-per-pixel format file. In Direct3D 9, this was <code>D3DFMT_R8G8B8</code> and was reasonably common. However, there is <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/bb205073.aspx#mapping_texture_formats\" rel=\"nofollow\">no DXGI equivalent format</a> for 24 bits-per-pixel and it therefore requires format conversion to work.</p>\n\n<p>The DDSTextureLoader module in <a href=\"http://go.microsoft.com/fwlink/?LinkId=248929\" rel=\"nofollow\">DirectX Tool Kit</a> is designed to be a minimum-overhead function, and therefore does <em>no runtime conversions at all</em>. If the data directly maps to a DXGI format, it loads. If it doesn't, it fails with <code>HRESULT_FROM_WIN32(ERROR_NOT_SUPPORTED)</code>.</p>\n\n<p>There are two different solutions depending on your usage scenario.</p>\n\n<ol>\n<li>The ideal solution is to convert 'boxTexture.dds' to a supported format. You can do this with the <em>texconv</em> command-line tool provided with <a href=\"http://go.microsoft.com/fwlink/?LinkId=248926\" rel=\"nofollow\">DirectXTex</a>. This is by far the best option so that the potentially expensive conversion operation is done once and not very single time your application runs and loads the data.</li>\n<li>If you don't actually control the source of the dds files you are trying load (i.e. they are arbitrary files provided by a user or you are doing some kind of content tool that has to support legacy formats), then you should make use of the <a href=\"http://go.microsoft.com/fwlink/?LinkId=248926\" rel=\"nofollow\">DirectXTex</a> 'full-fat' <code>LoadFromDDSFile</code> function which has extensive conversion code for handling legacy DDS file formats.</li>\n</ol>\n\n<p>Note this situation can happen for a number of legacy format DDS files as list in the <a href=\"https://directxtk.codeplex.com/wikipage?title=DDSTextureLoader\" rel=\"nofollow\">CodePlex wiki documentation</a></p>\n\n<ul>\n<li>D3DFMT_R8G8B8 (24bpp RGB) - Use a 32bpp format</li>\n<li>D3DFMT_X8B8G8R8 (32bpp RGBX) - Use BGRX, BGRA, or RGBA</li>\n<li>D3DFMT_A2R10G10B10 (BGRA 10:10:10:2) - Use RGBA 10:10:10:2</li>\n<li>D3DFMT_X1R5G5B5 (BGR 5:5:5) - Use BGRA 5:5:5:1 or BGR 5:6:5</li>\n<li>D3DFMT_A8R3G3B2, D3DFMT_R3G3B2 (BGR 3:3:2) - Expand to a supported format</li>\n<li>D3DFMT_P8, D3DFMT_A8P8 (8-bit palette) - Expand to a supported format</li>\n<li>D3DFMT_A4L4 (Luminance 4:4) - Expand to a supported format</li>\n<li>D3DFMT_UYVY (YUV 4:2:2 16bpp) - Swizzle to YUY2</li>\n</ul>\n\n<p>See also <a href=\"http://blogs.msdn.com/b/chuckw/archive/2012/05/04/direct3d-11-textures-and-block-compression.aspx\" rel=\"nofollow\">Direct3D 11 Textures and Block Compression</a></p>\n"}], "owner": {"reputation": 13, "user_id": 4455043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b5e6ea7d8f97bf5bd426e6e4909912?s=128&d=identicon&r=PG&f=1", "display_name": "Leaf", "link": "https://stackoverflow.com/users/4455043/leaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3465, "favorite_count": 0, "accepted_answer_id": 27971434, "answer_count": 2, "score": 1, "last_activity_date": 1421350064, "creation_date": 1421267415, "last_edit_date": 1421268019, "question_id": 27951873, "link": "https://stackoverflow.com/questions/27951873/cant-get-createddstexturefromfile-to-work", "title": "Can&#39;t get CreateDDSTextureFromFile to work", "body": "<p>So, I've been trying to figure out my problem for a few hours now, but I have no idea what I'm doing wrong. I'm a noob when it comes to DirectX programming, so I've been following some tutorials, and right now, I'm trying to create a obj loader.\n<a href=\"http://www.braynzarsoft.net/index.php?p=D3D11OBJMODEL\" rel=\"nofollow\">http://www.braynzarsoft.net/index.php?p=D3D11OBJMODEL</a></p>\n\n<p>However, I can't get my texture to work.</p>\n\n<p>This is how I try to load the DDS-texture:</p>\n\n<pre><code>ID3D11ShaderResourceView* tempMeshSRV = nullptr;\nhr = CreateDDSTextureFromFile(gDevice, L\"boxTexture.dds\", NULL, &amp;tempMeshSRV);\n\nif (SUCCEEDED(hr))\n {\n textureNameArray.push_back(L\"boxTexture.dds\");\n material[matCount - 1].texArrayIndex = meshSRV.size();\n meshSRV.push_back(tempMeshSRV);\n material[matCount - 1].hasTexture = true;\n }\n</code></pre>\n\n<p>However, my HRESULT will never Succeed, but it doesn't crash either. If I hoover over the hr, it just says \"HRESULT_FROM_WIN32(ERROR_NOT_SUPPORTED) I also tried to remove the if statement, but that will just turn my box black.\nAny idea on what I'm doing wrong? =/</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1421267864, "post_id": 27951870, "comment_id": 44298943, "body": "You should check that <code>texture.loadFromFile</code> succeeds"}, {"owner": {"reputation": 1699, "user_id": 289746, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/07232e92996c82812e3e127db45b853b?s=128&d=identicon&r=PG", "display_name": "Tansir1", "link": "https://stackoverflow.com/users/289746/tansir1"}, "edited": false, "score": 0, "creation_date": 1421332893, "post_id": 27951870, "comment_id": 44324509, "body": "Are you trying to draw before calling setTexture?"}, {"owner": {"reputation": 658, "user_id": 2227456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e3203c58148813db9eb84850251b17?s=128&d=identicon&r=PG", "display_name": "Julxzs", "link": "https://stackoverflow.com/users/2227456/julxzs"}, "edited": false, "score": 0, "creation_date": 1421340215, "post_id": 27951870, "comment_id": 44329621, "body": "It seems that the cause of the issue was the storage of the pickups in a vector for some reason..."}], "answers": [{"comments": [{"owner": {"reputation": 658, "user_id": 2227456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e3203c58148813db9eb84850251b17?s=128&d=identicon&r=PG", "display_name": "Julxzs", "link": "https://stackoverflow.com/users/2227456/julxzs"}, "edited": false, "score": 0, "creation_date": 1421322249, "post_id": 27952617, "comment_id": 44318499, "body": "I don&#39;t actually use the setTexture function, the texture that is in the base class is being used. I&#39;ve verified that the loading of the texture is successful also."}, {"owner": {"reputation": 658, "user_id": 2227456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e3203c58148813db9eb84850251b17?s=128&d=identicon&r=PG", "display_name": "Julxzs", "link": "https://stackoverflow.com/users/2227456/julxzs"}, "edited": false, "score": 0, "creation_date": 1421323100, "post_id": 27952617, "comment_id": 44318975, "body": "I edited my code for setTexture and started using it, however it still doesn&#39;t work :/"}], "owner": {"reputation": 64, "user_id": 4263004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9b45f482b1639f19b7abeb147dee172?s=128&d=identicon&r=PG&f=1", "display_name": "Maltir", "link": "https://stackoverflow.com/users/4263004/maltir"}, "is_accepted": false, "score": 0, "last_activity_date": 1421351533, "last_edit_date": 1421351533, "creation_date": 1421270237, "answer_id": 27952617, "question_id": 27951870, "link": "https://stackoverflow.com/questions/27951870/sfml-texture-displaying-as-a-white-box/27952617#27952617", "title": "SFML texture displaying as a white box", "body": "<p>For avoid this type of problem I always declare my <code>Texture</code> as a pointer and deleting it in the destructor of the class. Like this your <code>Texture</code> will always exist whenever your object is not destroyed. </p>\n\n<p>And it's always good to verify the loading of the image :</p>\n\n<pre><code>    if (!texture.loadFromFile(\"images/pickups/health.png\")){\n      //some error code\n    }\n</code></pre>\n\n<p>But it's not the problem here.</p>\n"}, {"comments": [{"owner": {"reputation": 658, "user_id": 2227456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e3203c58148813db9eb84850251b17?s=128&d=identicon&r=PG", "display_name": "Julxzs", "link": "https://stackoverflow.com/users/2227456/julxzs"}, "edited": false, "score": 0, "creation_date": 1421419817, "post_id": 27974763, "comment_id": 44363863, "body": "Wow, this is an awesome answer. Thanks so much!"}], "owner": {"reputation": 2490, "user_id": 3187621, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/iFIdA.jpg?s=128&g=1", "display_name": "NaCl", "link": "https://stackoverflow.com/users/3187621/nacl"}, "is_accepted": true, "score": 3, "last_activity_date": 1421425576, "last_edit_date": 1421425576, "creation_date": 1421363731, "answer_id": 27974763, "question_id": 27951870, "link": "https://stackoverflow.com/questions/27951870/sfml-texture-displaying-as-a-white-box/27974763#27974763", "title": "SFML texture displaying as a white box", "body": "<p>A <code>std::vector</code> copies or moves the inserted elements, so as long as you have the default copy constructor or as long as you do not change this dirty <em>a texture per element</em>-style, (the elements just need to have one common texture object to actually point to, so you waste much much memory) the pointer that the <code>sf::Sprite</code> object holds to the texture gets invalid. To see why we need to think whats happens on insertion:</p>\n\n<p>You setup a nice <code>Pickup</code>ish object and add it to the vector which calls the copy-constructor. Lets say your nice object that you wanted to add is object <code>A</code> and the now added/copied object is <code>B</code>. Both have a sprite <code>S</code> and a texture <code>T</code>. Both textures are valid, but the problem is this: <code>A</code>'s <code>S</code> points to <code>A</code>'s <code>T</code>, so after copying it to <code>B</code> <code>B</code>'s <code>S</code> points also to <code>A</code>'s <code>T</code>! As I assume <code>A</code> is just temporary so it gets destructed, together with its texture, and there you have it, a nice white box.</p>\n\n<p>You can solve this in some other dirty ways like making your own copy-constructor in <code>Pickup</code> like this:</p>\n\n<pre><code>Pickup::Pickup(const Pickup&amp; other)\n: position(other.position), texture(other.texture), sprite(other.sprite)\n{ sprite.setTexture(texture); }\n</code></pre>\n\n<p>or by storing <code>std::unique_ptr&lt;Pickups::Health&gt;</code>'s and not just <code>Pickups::Health</code>'s.</p>\n\n<p>However a much better way you should use is some kind of <code>Resourcemanager</code>, which just stores all relevant textures, ideally one, a big tileset, because loading once but big is faster than loading multiple but small textures. You can write your own very simple manager or use some other e.g. the one from the great <a href=\"http://www.bromeon.ch/libraries/thor/index.html\" rel=\"nofollow\"><code>Thor</code></a> library. To set a specific tile as texture for a Sprite just call <a href=\"http://www.sfml-dev.org/documentation/2.0/classsf_1_1Sprite.php#a3fefec419a4e6a90c0fd54c793d82ec2\" rel=\"nofollow\"><code>sf::Sprite::setTextureRect</code></a>.</p>\n\n<hr>\n\n<p>I want to mention some additional improvements to your design. Let <code>Pickup</code> derive from <code>sf::Drawable</code> and define its pure virtual <code>draw</code> function, which you can make <em>private</em>. Thus your from <code>Pickup</code> deriving object doesn't need to know from any <code>sf::RenderTarget</code> and you can just do <code>target.draw(myPickupObject)</code>.</p>\n\n<p>There is no need to store the position, just let <code>Pickup</code> derive from <code>sf::Transformable</code>, too. You don't have to implement any functions, the only thing you need to do is applying the matrix to the <code>sf::RenderStates</code> object thats passed to <code>draw</code>.</p>\n\n<p>Overall your <code>draw</code> function might look like this: </p>\n\n<pre><code>void Pickup::draw(sf::RenderTarget&amp; target, sf::RenderStates states) const\n{\n    //'applying' transformation-matrix\n    states.transform *= getTransform();\n\n    target.draw(sprite, states);\n}\n</code></pre>\n\n<p>So your <code>Pickup</code> has now only <code>sf::Sprite</code> as member and overall your header just needs to include <code>SFML/Graphics/Sprite.hpp</code>.</p>\n"}], "owner": {"reputation": 658, "user_id": 2227456, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e3203c58148813db9eb84850251b17?s=128&d=identicon&r=PG", "display_name": "Julxzs", "link": "https://stackoverflow.com/users/2227456/julxzs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3240, "favorite_count": 1, "accepted_answer_id": 27974763, "answer_count": 2, "score": 3, "last_activity_date": 1421425576, "creation_date": 1421267405, "last_edit_date": 1421323035, "question_id": 27951870, "link": "https://stackoverflow.com/questions/27951870/sfml-texture-displaying-as-a-white-box", "title": "SFML texture displaying as a white box", "body": "<p>I have a texture and sprite in a base class that is being extended by another class, however when drawn, the sprite displays as a white box. I know this is something to do with the sprite losing it's link to the texture object, but I'm kind of new to C++, so I'm not really sure how it happened.</p>\n\n<p>Here is the code (I've removed some of the irrelevant parts to cut down the size):</p>\n\n<p>Pickup.h:</p>\n\n<pre><code>#ifndef PICKUPS_PICKUP_H\n#define PICKUPS_PICKUP_H\n\n#include &lt;SFML\\Graphics.hpp&gt;\n#include \"..\\Player.h\"\n\nnamespace Pickups\n{\n    class Pickup\n    {\n    private:\n        sf::Vector2f position;\n        sf::Texture texture;\n        sf::Sprite sprite;\n    public:\n        Pickup();\n\n        bool drop(float dt);\n        void draw(sf::RenderWindow* window);\n\n        void setTexture(sf::String name);\n\n        void setPos(sf::Vector2f position);\n        sf::Vector2f getPos();\n\n        void isColliding(Player* player);\n\n        virtual void onCollect(Player* player) = 0;\n    };\n}\n\n#endif\n</code></pre>\n\n<p>pickup.cpp:</p>\n\n<pre><code>#include \"Pickup.h\"\n\nnamespace Pickups\n{\n    Pickup::Pickup()\n    {\n    }\n\n    void Pickup::draw(sf::RenderWindow* window)\n    {\n        window-&gt;draw(sprite);\n    }\n\n    void Pickup::setTexture(sf::String name)\n    {\n        if (!texture.loadFromFile(\"images/pickups/\" + name + \".png\"))\n            std::cout &lt;&lt; \"Error loading image: images/pickups/\" + name.toAnsiString() + \".png\" &lt;&lt; std::endl;\n        else\n            sprite.setTexture(texture);\n    }\n}\n</code></pre>\n\n<p>Health.h:</p>\n\n<pre><code>#ifndef PICKUPS_HEALTH_H\n#define PICKUPS_HEALTH_H\n\n#include \"Pickup.h\"\n\nnamespace Pickups\n{\n    class Health : public Pickup\n    {\n    private:\n        int worth;\n    public:\n        Health(sf::Vector2f position, int worth);\n        void onCollect(Player* player);\n    };\n}\n\n#endif\n</code></pre>\n\n<p>health.cpp:</p>\n\n<pre><code>#include \"Health.h\"\n\nnamespace Pickups\n{\n    Health::Health(sf::Vector2f position, int worth)\n    {\n        setTexture(\"health\");\n        setPos(position);\n        this-&gt;worth = worth;\n    }\n\n    void Health::onCollect(Player* player)\n    {\n        player-&gt;addLives(worth);\n    }\n}\n</code></pre>\n\n<p>(I don't know if this is part of the problem, but I might as well post it too)\nI store the pickups in a vector like so:</p>\n\n<pre><code>std::vector&lt;Pickups::Health&gt; pickups;\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 0, "creation_date": 1421267610, "post_id": 27951839, "comment_id": 44298846, "body": "Yeah it has to be quite C-ish C++ ... Not allowed use Strings."}], "answers": [{"comments": [{"owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "edited": false, "score": 0, "creation_date": 1421267770, "post_id": 27951893, "comment_id": 44298911, "body": "Thank you, that works perfectly, now my mind can be at ease :) (I&#39;ll mark it correct after timer)"}, {"owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "edited": false, "score": 0, "creation_date": 1421267869, "post_id": 27951893, "comment_id": 44298947, "body": "I understand now why it was printing the word it just found."}], "owner": {"reputation": 1290, "user_id": 3227815, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/932904f6217c372e891e1a36631019f1?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/3227815/katie"}, "is_accepted": true, "score": 6, "last_activity_date": 1421267494, "creation_date": 1421267494, "answer_id": 27951893, "question_id": 27951839, "link": "https://stackoverflow.com/questions/27951839/reverse-a-string-by-words-using-pointers/27951893#27951893", "title": "Reverse a string by words using pointers", "body": "<p>I think you mean to printf head, not input. You're printing from the start of the string, not from the start of the word you just found.</p>\n\n<pre><code>printf(\"%s\",head); // output a word.\n</code></pre>\n"}], "owner": {"reputation": 4347, "user_id": 2467327, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/SolkH.png?s=128&g=1", "display_name": "Paulie", "link": "https://stackoverflow.com/users/2467327/paulie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 27951893, "answer_count": 1, "score": 0, "last_activity_date": 1421268640, "creation_date": 1421267290, "last_edit_date": 1421268640, "question_id": 27951839, "link": "https://stackoverflow.com/questions/27951839/reverse-a-string-by-words-using-pointers", "title": "Reverse a string by words using pointers", "body": "<p>my program below reverses a string, not by char but by word.</p>\n\n<p><strong>Sample Input</strong> Hello Mello\n<strong>Sanple Output</strong> Hello Mello Hello</p>\n\n<p>I don't know where I'm getting the first Hello from.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nint main(int argc, char **argv)\n{\n  char input[255];\n  char *head; // head of a word.\n  char *tail; // tail of a word.\n\n  printf(\"Enter a sentence: \");\n  gets_s(input); // read a whole line.\n  tail = input + strlen(input) - 1;\n\n  while (tail &gt;= input) \n    {\n      if (*tail == 0 || *tail == ' ') \n        {\n          tail--; // move to the tail of a word.\n        }\n      else \n        {\n          tail[1] = 0;\n          head = tail;\n          while (head &gt;= input) \n            {\n              if (head == input || *(head - 1) == ' ') \n                {\n                  printf(\"%s\",input); // output a word.\n                  printf(\" \");\n\n                  tail = head - 1; // seek the next word.\n                  break;\n                }\n              head--; // move to the head of a word.\n            }\n        }\n    }\n\n  printf(\"\\n\\n\");\n  system(\"pause\");\n  return 0;\n}\n</code></pre>\n\n<p>Could anyone be of any assistance?</p>\n"}, {"tags": ["c++", "linux", "qt", "gcc", "mingw-w64"], "comments": [{"owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "edited": false, "score": 0, "creation_date": 1421269087, "post_id": 27951797, "comment_id": 44299587, "body": "Is there any reason why you can&#39;t just build in Windows via a VM? It is much simpler than cross-compiling and you can actually do testing in the same environment."}, {"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "reply_to_user": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "edited": false, "score": 0, "creation_date": 1421269648, "post_id": 27951797, "comment_id": 44299879, "body": "@cmannett85, in general there is large overhead cost involved in maintaining the two dev environments. Of course, testing on both platforms is necessary, but we would like to development only on Linux."}, {"owner": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "edited": false, "score": 0, "creation_date": 1421311391, "post_id": 27951797, "comment_id": 44312866, "body": "As someone who works across 3 dev environments across 3 OSes, and cross-compiles for ARM - I assure you the &quot;large overhead&quot; isn&#39;t there.  And as @Nejat points out, you wouldn&#39;t develop on Windows, just build and test."}, {"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "reply_to_user": {"reputation": 20165, "user_id": 498437, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d3fc61768229a2cb126ae7c28450b44d?s=128&d=identicon&r=PG", "display_name": "cmannett85", "link": "https://stackoverflow.com/users/498437/cmannett85"}, "edited": false, "score": 0, "creation_date": 1421333072, "post_id": 27951797, "comment_id": 44324642, "body": "@cmannett85. It&#39;s not quite that simple. I didn&#39;t describe the whole problem because right now I just need to know about one piece of it. The current system involves a custom build system that&#39;s integrated with a custom source control system. And any change impacts many developers."}, {"owner": {"reputation": 18705, "user_id": 204046, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba8c6378dfdb51d5eeef228e92155cf?s=128&d=identicon&r=PG", "display_name": "Richard Pennington", "link": "https://stackoverflow.com/users/204046/richard-pennington"}, "edited": false, "score": 0, "creation_date": 1422531738, "post_id": 27951797, "comment_id": 44791218, "body": "I don&#39;t use QT, but I do cross build a large C++ project (the clang/LLVM based ELLCC development environment) on Linux for Windows using mingw-w64. I got around the DLL problem by linking everything statically."}], "answers": [{"comments": [{"owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "edited": false, "score": 0, "creation_date": 1421332422, "post_id": 27957003, "comment_id": 44324179, "body": "Are you answering the question? I want to run GCC on Linux to produce an executable that runs on windows. that&#39;s what I want to know about."}], "owner": {"reputation": 28669, "user_id": 3049264, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MNMWc.jpg?s=128&g=1", "display_name": "Nejat", "link": "https://stackoverflow.com/users/3049264/nejat"}, "is_accepted": false, "score": 0, "last_activity_date": 1421297493, "creation_date": 1421297493, "answer_id": 27957003, "question_id": 27951797, "link": "https://stackoverflow.com/questions/27951797/use-gcc-on-linux-to-cross-compile-qt-apps-for-windows/27957003#27957003", "title": "Use GCC on Linux to cross-compile Qt apps for Windows", "body": "<p>If you don't want to install Windows, I think the best way is using a Virtual Machine. That's because even if the source code compiles for Windows, how could it be verified to run? You will need a real target environment to finally test your application.</p>\n\n<p>From a complexity point of view, I think setting up a Windows machine (VM or not) and the necessary environment for Qt is a whole lot simpler than cross compiling bug hunting afterwards.</p>\n\n<p>You can install Qt on the installed Windows, copy your project there, compile it and see the results in the real environment. This way you can cope with the minor differences when porting from one OS to another easily.</p>\n\n<p>Nothing stops you from developing on Linux. You can do the entire development on Linux and just test the code on the prepared Windows by compiling and running. Sending the code to the Windows environment is simple by using git. The development process can be like :</p>\n\n<ul>\n<li>Make a repository of your application, clone the repository both on Linux and Windows</li>\n<li>Do the Major development on Linux and push</li>\n<li>Pull on Windows from time to time, compile, test and make minor fixes and then push</li>\n</ul>\n"}], "owner": {"reputation": 7006, "user_id": 540815, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zEGbl.png?s=128&g=1", "display_name": "ThomasMcLeod", "link": "https://stackoverflow.com/users/540815/thomasmcleod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 738, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1432618082, "creation_date": 1421267140, "last_edit_date": 1432618082, "question_id": 27951797, "link": "https://stackoverflow.com/questions/27951797/use-gcc-on-linux-to-cross-compile-qt-apps-for-windows", "title": "Use GCC on Linux to cross-compile Qt apps for Windows", "body": "<p>Ideally, I want to compile our QT-based apps, which also link other third-party libraries, on 64-bit Linux using GCC, but for a 64-bit Windows target. Again ideally, I want the result to run on 64-bit Windows without any additional runtime support, just as if we had compiled the same source code in Visual Studio. Is this possible with MinGW-w64?</p>\n\n<p>I have successfully used MinGW-w64 to compile simple apps with GCC on Windows. I'm not sure how much of the MinGW-w64 installation is runtime support for executables as opposed to support for the GCC compilation environment. I did attempt to run a WinGW-w64 hello world executable on an installation of Windows without MinGW-w64, but had missing dll errors. This tells me that some runtime support was necessary, but I would like to know more precisely what is required.</p>\n"}, {"tags": ["c++", "dlopen", "dynamic-loading"], "answers": [{"comments": [{"owner": {"reputation": 1022, "user_id": 1836590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1162f5fb520635ec22ebf47dea24124?s=128&d=identicon&r=PG", "display_name": "Kietz", "link": "https://stackoverflow.com/users/1836590/kietz"}, "edited": false, "score": 0, "creation_date": 1421268091, "post_id": 27952014, "comment_id": 44299082, "body": "Thanks. Do you know where this information can be found in the documentation for <code>dl*</code>? I read <a href=\"http://linux.die.net/man/3/dlopen\" rel=\"nofollow noreferrer\">linux.die.net/man/3/dlopen</a> but didn&#39;t find it"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1022, "user_id": 1836590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1162f5fb520635ec22ebf47dea24124?s=128&d=identicon&r=PG", "display_name": "Kietz", "link": "https://stackoverflow.com/users/1836590/kietz"}, "edited": false, "score": 0, "creation_date": 1421268202, "post_id": 27952014, "comment_id": 44299132, "body": "I do mostly Windows programming, not Linux/Unix, but I don&#39;t think this needs to be officially documented.  All a module can do is be responsible for itself wrt loading libraries.  What if the library is a third-party one, where the third party may load 1,2,3, or no modules, based on some setting, environment being run on, etc.  Is your application going to keep track of this third-party module and what it does internally?  Of course not."}, {"owner": {"reputation": 1022, "user_id": 1836590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1162f5fb520635ec22ebf47dea24124?s=128&d=identicon&r=PG", "display_name": "Kietz", "link": "https://stackoverflow.com/users/1836590/kietz"}, "edited": false, "score": 0, "creation_date": 1421268277, "post_id": 27952014, "comment_id": 44299167, "body": "So this is definitely the case for <code>LoadLibrary*</code> and <code>GetModuleHandle*</code>? Could you point me at documentation for those?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 1022, "user_id": 1836590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1162f5fb520635ec22ebf47dea24124?s=128&d=identicon&r=PG", "display_name": "Kietz", "link": "https://stackoverflow.com/users/1836590/kietz"}, "edited": false, "score": 0, "creation_date": 1421268294, "post_id": 27952014, "comment_id": 44299175, "body": "@Kietz In so much as documentation I don&#39;t think that is in there.  This is just standard coding practice.  The library is responsible for managing itself.  You should not be responsible to manage the library unless that is explicitly called out in the documentation.  That would be like having to manage the resources of a vector."}, {"owner": {"reputation": 1022, "user_id": 1836590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1162f5fb520635ec22ebf47dea24124?s=128&d=identicon&r=PG", "display_name": "Kietz", "link": "https://stackoverflow.com/users/1836590/kietz"}, "edited": false, "score": 0, "creation_date": 1421268444, "post_id": 27952014, "comment_id": 44299247, "body": "Okay, thanks all. I was just leery about trusting a C API to clean up resources for me"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 1022, "user_id": 1836590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1162f5fb520635ec22ebf47dea24124?s=128&d=identicon&r=PG", "display_name": "Kietz", "link": "https://stackoverflow.com/users/1836590/kietz"}, "edited": false, "score": 1, "creation_date": 1421268482, "post_id": 27952014, "comment_id": 44299264, "body": "@Kietz - If you do discover that the library is not cleaning up resources, contact the author and let them know."}, {"owner": {"reputation": 16838, "user_id": 491645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b0Zoi.png?s=128&g=1", "display_name": "Mikael Persson", "link": "https://stackoverflow.com/users/491645/mikael-persson"}, "edited": false, "score": 0, "creation_date": 1421268817, "post_id": 27952014, "comment_id": 44299441, "body": "Many libraries also have an explicit set of Init / Free functions that you, as a user of the library, are required to call at the appropriate times, usually right after dlopen and right before dlclose. For example, see <a href=\"http://sdl.beuc.net/sdl.wiki/SDL_Init\" rel=\"nofollow noreferrer\">SDL_Init</a> and <a href=\"http://sdl.beuc.net/sdl.wiki/SDL_Quit\" rel=\"nofollow noreferrer\">SDL_Quit</a>. So, like PaulMcKenzie says, it is the library developers&#39; responsibility to ensure they don&#39;t leak resources like that, but you have to be aware that this is often realized in the form of such Init/Free functions that you, as a user, are responsible for calling."}], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 3, "last_activity_date": 1421268535, "last_edit_date": 1421268535, "creation_date": 1421268042, "answer_id": 27952014, "question_id": 27951731, "link": "https://stackoverflow.com/questions/27951731/is-there-a-load-leak-if-dlopen-is-called-from-a-dlopend-library/27952014#27952014", "title": "Is there a load leak if dlopen() is called from a dlopen&#39;d library?", "body": "<p>The application need only worry about what the app loads <em>directly</em>. If you load <code>a.so</code>, all you need to be concerned with is unloading <code>a.so</code>. </p>\n\n<p>If <code>a.so</code> refuses to unload <code>b.so</code>, that is a problem with <code>a.so</code>, your app is not responsible for this. The author of <code>a.so</code> needs to get their act together and fix the problem with their library.</p>\n"}], "owner": {"reputation": 1022, "user_id": 1836590, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c1162f5fb520635ec22ebf47dea24124?s=128&d=identicon&r=PG", "display_name": "Kietz", "link": "https://stackoverflow.com/users/1836590/kietz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 27952014, "answer_count": 1, "score": 6, "last_activity_date": 1421268535, "creation_date": 1421266903, "question_id": 27951731, "link": "https://stackoverflow.com/questions/27951731/is-there-a-load-leak-if-dlopen-is-called-from-a-dlopend-library", "title": "Is there a load leak if dlopen() is called from a dlopen&#39;d library?", "body": "<p>If my executable calls <code>dlopen</code> to load a library but neglects to call <code>dlclose</code>, the library will stay loaded until the process exits and the OS forces it to unload.</p>\n\n<p>If I load <code>a.so</code> which loads <code>b.so</code>, then call <code>dlclose</code> on <code>a.so</code>, does the OS unload <code>b.so</code> as well?</p>\n\n<p>How does this compare with a similar scenario using the Microsoft equivalent, <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms684179%28v=vs.85%29.aspx\"><code>LoadLibraryEx</code></a>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 2, "creation_date": 1421266589, "post_id": 27951616, "comment_id": 44298386, "body": "Please grab a C++ tutorial. Using containers is explained there."}, {"owner": {"reputation": 1, "user_id": 4420195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f5152c61a179bb15a309ba56489c55?s=128&d=identicon&r=PG&f=1", "display_name": "Andreea", "link": "https://stackoverflow.com/users/4420195/andreea"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421266614, "post_id": 27951616, "comment_id": 44298400, "body": "I need to do this without STL vector..."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421266645, "post_id": 27951616, "comment_id": 44298416, "body": "Then use the standard library vector. Or state your requirements clearly. In the question."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1421266739, "post_id": 27951616, "comment_id": 44298455, "body": "You already have an array of five persons, all default-constructed. Replacing one works exactly the same as for e.g. integers - you assign a new value to it."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1421266742, "post_id": 27951616, "comment_id": 44298457, "body": "@Andreea If you can&#39;t use STL vector, why is your question title &quot;Create a <i>vector</i> of person&quot;?"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1421267058, "post_id": 27951616, "comment_id": 44298598, "body": "Based on your updates to this question, I think you&#39;re asking how to implement a resizable container class.  Does that sound right, @Andreea?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421267104, "post_id": 27951616, "comment_id": 44298615, "body": "Do you need to make a <i>linked list</i> of <code>Person</code>?"}, {"owner": {"reputation": 1, "user_id": 4420195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f5152c61a179bb15a309ba56489c55?s=128&d=identicon&r=PG&f=1", "display_name": "Andreea", "link": "https://stackoverflow.com/users/4420195/andreea"}, "edited": false, "score": 0, "creation_date": 1421267252, "post_id": 27951616, "comment_id": 44298677, "body": "Yes. I need to create a ListOfPerson.  I have the object Person created and i want to put it in list"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1421267734, "post_id": 27951616, "comment_id": 44298902, "body": "@Andreea if this is for a class, you may need to sit down with your teacher and discuss this.  Or do some online research.  I&#39;m not sure that you&#39;re clear on the difference between an array, a vector, and a linked list - or which of those you&#39;re trying to create.  Good luck though!"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4420195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f5152c61a179bb15a309ba56489c55?s=128&d=identicon&r=PG&f=1", "display_name": "Andreea", "link": "https://stackoverflow.com/users/4420195/andreea"}, "edited": false, "score": 0, "creation_date": 1421266586, "post_id": 27951637, "comment_id": 44298385, "body": "I need to do this without STL vector"}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "reply_to_user": {"reputation": 1, "user_id": 4420195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f5152c61a179bb15a309ba56489c55?s=128&d=identicon&r=PG&f=1", "display_name": "Andreea", "link": "https://stackoverflow.com/users/4420195/andreea"}, "edited": false, "score": 0, "creation_date": 1421270251, "post_id": 27951637, "comment_id": 44300246, "body": "@Andreea If by vector you don&#39;t mean vector, I&#39;m afraid I do not understand the question."}], "owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "is_accepted": false, "score": 1, "last_activity_date": 1421266500, "creation_date": 1421266500, "answer_id": 27951637, "question_id": 27951616, "link": "https://stackoverflow.com/questions/27951616/create-a-list-of-person/27951637#27951637", "title": "Create a list of person", "body": "<p>To create a vector of <code>Person</code>s, write</p>\n\n<pre><code>std::vector&lt;Person&gt; list;\n           ^^^^^^^^\n     Name of type to store in vector.\n</code></pre>\n\n<p>You can then for example fill it with <a href=\"http://en.cppreference.com/w/cpp/container/vector/push_back\" rel=\"nofollow\"><code>std::vector::push_back</code></a>.</p>\n"}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 2, "last_activity_date": 1421266599, "creation_date": 1421266599, "answer_id": 27951656, "question_id": 27951616, "link": "https://stackoverflow.com/questions/27951616/create-a-list-of-person/27951656#27951656", "title": "Create a list of person", "body": "<p>You want a <code>std::vector</code> of <code>Person</code>:</p>\n\n<pre><code>std::vector&lt;Person&gt; vp;\n</code></pre>\n\n<p>and add them as such:</p>\n\n<pre><code>Person p;\nvp.push_back(p);\n</code></pre>\n\n<p>and access them:</p>\n\n<pre><code>vp[0];\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4420195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6f5152c61a179bb15a309ba56489c55?s=128&d=identicon&r=PG&f=1", "display_name": "Andreea", "link": "https://stackoverflow.com/users/4420195/andreea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "closed_date": 1421270256, "answer_count": 2, "score": -1, "last_activity_date": 1421266811, "creation_date": 1421266432, "last_edit_date": 1421266811, "question_id": 27951616, "link": "https://stackoverflow.com/questions/27951616/create-a-list-of-person", "closed_reason": "Needs details or clarity", "title": "Create a list of person", "body": "<p>I have a class Person and I need to create a list of Person. My list of person is managed by  another class, Class ListOfPerson. I create class List Of Person:</p>\n\n<pre><code>class ListOfPerson{\n    Person list[5];\n</code></pre>\n\n<p>I want to put a person in list and i don't know how.</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 2, "creation_date": 1421266534, "post_id": 27951614, "comment_id": 44298354, "body": "<code>w</code> will truncate the file you&#39;re opening. if it&#39;s a &quot;big&quot; file, it&#39;ll take a while for the OS to clean up."}, {"owner": {"reputation": 23021, "user_id": 898478, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EhSlm.jpg?s=128&g=1", "display_name": "m0skit0", "link": "https://stackoverflow.com/users/898478/m0skit0"}, "edited": false, "score": 4, "creation_date": 1421266547, "post_id": 27951614, "comment_id": 44298361, "body": "I think opening a file performance depends more on the operating system implementation since it is a system call."}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1421267161, "post_id": 27951614, "comment_id": 44298641, "body": "makes sense that truncation of the file in &quot;w&quot; mode will take the OS some cycles(implementation dependent). Thanks"}, {"owner": {"reputation": 1207, "user_id": 1623757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b9a2643e8f6f180c64552cad441652?s=128&d=identicon&r=PG", "display_name": "Luis", "link": "https://stackoverflow.com/users/1623757/luis"}, "edited": false, "score": 0, "creation_date": 1421267422, "post_id": 27951614, "comment_id": 44298763, "body": "What you&#39;re trying to measure depends a lot on the implementation; &quot;a&quot; and &quot;w&quot; do different things not necessarily comparable. And consider that when timing a program, measurements should be repeated several times under different conditions: consider that the OS needs time to find a file in disk, but subsequent accesses will be faster because of cached information and maybe even the disk heads being closer to the file contents. Which is to say, your 1st program running from cold boot can end up paying for I/O overhead and take longer than the 2nd program."}, {"owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "edited": false, "score": 0, "creation_date": 1421268921, "post_id": 27951614, "comment_id": 44299497, "body": "I agree with you, but just to let you know I profiled for both implementations multiple times with similar results. Also I thought with the code running for 50000 iterations I could disregard the initial I/O overhead for both implementations. Can I not ?"}], "answers": [{"owner": {"reputation": 76, "user_id": 272597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dCiYu.jpg?s=128&g=1", "display_name": "Mauvaisours", "link": "https://stackoverflow.com/users/272597/mauvaisours"}, "is_accepted": true, "score": 3, "last_activity_date": 1421267021, "creation_date": 1421267021, "answer_id": 27951770, "question_id": 27951614, "link": "https://stackoverflow.com/questions/27951614/fopen-takes-more-time-with-w-than-a-mode/27951770#27951770", "title": "fopen takes more time with &quot;w&quot; than &quot;a&quot; mode", "body": "<p>With mode=\"w\", the file is emptied before the write, so the system must : </p>\n\n<ol>\n<li>Reset the size of the file to zero (open) </li>\n<li>Mark the blocks used on disk as unused (open)</li>\n<li>Allocate a new block (write)</li>\n<li>Update file size (write)</li>\n</ol>\n\n<p>With mode=\"a\", the system only has :</p>\n\n<ol start=\"3\">\n<li>Allocate a new block (sometimes, not always, if what you write goes into a new block)</li>\n<li>Update file size (write)</li>\n</ol>\n\n<p>Obviously, mode=\"w\" doing more work will take more time...</p>\n"}], "owner": {"reputation": 1570, "user_id": 2501921, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba89206691a9b80f87abe01cebe4660c?s=128&d=identicon&r=PG", "display_name": "cmidi", "link": "https://stackoverflow.com/users/2501921/cmidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 1, "accepted_answer_id": 27951770, "answer_count": 1, "score": 0, "last_activity_date": 1421267021, "creation_date": 1421266426, "question_id": 27951614, "link": "https://stackoverflow.com/questions/27951614/fopen-takes-more-time-with-w-than-a-mode", "title": "fopen takes more time with &quot;w&quot; than &quot;a&quot; mode", "body": "<p>Does fopen and fclose take more time when opened in \"w\" mode than \"a\" mode for the following conditions\n1. file already present\n2. No file present\nsomething on the lines of the following \n     logFile = fopen(log,\"a\");\n           and\n     logFile = fopen(log,\"w\");</p>\n\n<p>I have the following code which I did a quick strace profiling on to get the clock cycles on each system call with no file present at the start of test.</p>\n\n<h2>code</h2>\n\n<pre><code>int main(int argc, char **argv)\n{\n    const char* log = \"log.txt\";\n    FILE* logFile = NULL;\n    char timeBuf[100];\n    time_t now;\n    struct tm *logtime1;\n\n    time(&amp;now);\n    logtime1 = localtime(&amp;now);\n    strftime(timeBuf,sizeof(timeBuf),\"[%Y-%m-%d %H:%M:%S]\",logtime1);\n    int i;\n    char *inMessage = \"The Quick Brown Fox Jumps Over The Lazy Dog\";\n    for(i=0;i&lt;50000;i++)\n    {\n        logFile = fopen(log,\"a\"); //or **logFile = fopen(log,\"w\");**\n        if(logFile != NULL)\n        {\n           fflush( 0 );\n           int error = 0;\n\n           fprintf(logFile, \"%s\\t%s %d at (%s:%d)\\n\",timeBuf,\n           inMessage, error,__FILE__, __LINE__);\n           fclose(logFile);\n        }\n   }\n   return 0;\n</code></pre>\n\n<p>}</p>\n\n<hr>\n\n<p>When I open the file in \"w\" mode strace profiling is showing that it takes way more time in open system call. Is there a reason behind that ?</p>\n\n<p>Below are the two profiles</p>\n\n<ol>\n<li><p>---------- <strong>strace on code with \"w\" mode</strong></p>\n\n<p>strace -c ./test.out -o report </p>\n\n<p>% time     seconds  usecs/call    calls    errors syscal</p>\n\n<hr>\n\n<p>76.17    0.522555          10     50006           open</p>\n\n<p>12.13    0.083197           2     50006           close</p>\n\n<p>4.61    0.031626           1     50000           write</p>\n\n<p>3.96    0.027151           1     50002           munmap</p>\n\n<p>1.57    0.010737           0     50017           mmap</p>\n\n<p>1.55    0.010663           0     50007           fstat</p>\n\n<hr>\n\n<p>100.00    0.686068                300060         1 total</p>\n\n<ol start=\"2\">\n<li><strong>strace on code with \"a\" mode</strong></li>\n</ol>\n\n<p>---------- strace -c ./test.out -o report</p>\n\n<p>% time     seconds  usecs/call     calls    errors syscall</p>\n\n<hr>\n\n<p>22.08    0.020467           0     50002           munmap</p>\n\n<p>20.24    0.018763           0     50000           write</p>\n\n<p>16.76    0.015542           0    100007           fstat</p>\n\n<p>13.43    0.012450           0     50006           open</p>\n\n<p>9.90    0.009177           0     50006           close</p>\n\n<p>9.44    0.008756           0     50017           mmap</p>\n\n<p>8.15    0.007558           0     50001           lseek</p>\n\n<hr>\n\n<p>100.00    0.092713                400060         1 total</p></li>\n</ol>\n"}, {"tags": ["c++", "csv"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1421267847, "post_id": 27951613, "comment_id": 44298936, "body": "You could learn a lot from <i>all</i> the other CSV posts on StackOverflow, by searching for &quot;c++ read csv&quot;."}, {"owner": {"reputation": 45, "user_id": 4381260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/079a3cfc59960cb7dc666ab9df873c8a?s=128&d=identicon&r=PG&f=1", "display_name": "Arland", "link": "https://stackoverflow.com/users/4381260/arland"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421268465, "post_id": 27951613, "comment_id": 44299255, "body": "yeah, I spent a half hour reading through them but couldn&#39;t find anything that addressed my exact problem. I don&#39;t doubt that it exists somewhere though"}], "answers": [{"owner": {"reputation": 538, "user_id": 833307, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/36599f3d357c992ff73f7eee8a3a72d6?s=128&d=identicon&r=PG", "display_name": "Toby Cronin", "link": "https://stackoverflow.com/users/833307/toby-cronin"}, "is_accepted": true, "score": 0, "last_activity_date": 1421267675, "creation_date": 1421267675, "answer_id": 27951925, "question_id": 27951613, "link": "https://stackoverflow.com/questions/27951613/reading-in-columns-from-csv-file/27951925#27951925", "title": "reading in columns from csv file", "body": "<p>No you don't have to change your code. Change your scanf function to</p>\n\n<pre><code>    if(sscanf(temp, \"\\\"%f\\\", \\\"%f\\\", \\\"%f\\\", \\\"%*f\\\"\\n\",,&amp;var1,&amp;var2,&amp;var3)!=3)\n</code></pre>\n\n<p>to match the new format and it should work.</p>\n"}], "owner": {"reputation": 45, "user_id": 4381260, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/079a3cfc59960cb7dc666ab9df873c8a?s=128&d=identicon&r=PG&f=1", "display_name": "Arland", "link": "https://stackoverflow.com/users/4381260/arland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 27951925, "answer_count": 1, "score": 0, "last_activity_date": 1421267675, "creation_date": 1421266424, "question_id": 27951613, "link": "https://stackoverflow.com/questions/27951613/reading-in-columns-from-csv-file", "title": "reading in columns from csv file", "body": "<p>Im trying to edit some code that reads in columns from a txt file to be able to read in from a csv file. The main problem I'm having is that the data in the txt files was stored as: 1 2 3 4. In the csv files the data looks like: \"1\",\"2\",\"3\",\"4\". I'll include my current code (works for txt) below. Is it easier to edit my current code or just start over?</p>\n\n<pre><code>ifstream fin;\nfin.open(\"filepath\");\nchar temp[200];\nwhile(!fin.eof())\n   {\n    fin.getline(temp,200);\n    if(sscanf(temp,\"%f %f %f %*f\\n\",&amp;var1,&amp;var2,&amp;var3)!=3)\n        {\n        continue;\n        }\n   printf(\"%f %f %f \\n\",var1,var2,var3);\n   }\n</code></pre>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 1634, "user_id": 2030653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ab1rD.jpg?s=128&g=1", "display_name": "Mustafa", "link": "https://stackoverflow.com/users/2030653/mustafa"}, "edited": false, "score": 3, "creation_date": 1421266468, "post_id": 27951595, "comment_id": 44298327, "body": "What is in your header file <code>Password.h</code>? Did you declare this constructor and destructor in there?"}], "answers": [{"owner": {"reputation": 3380, "user_id": 864313, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/46d9bb3f16218a79557903d469a05aa3?s=128&d=identicon&r=PG", "display_name": "EyasSH", "link": "https://stackoverflow.com/users/864313/eyassh"}, "is_accepted": false, "score": 4, "last_activity_date": 1421268147, "last_edit_date": 1421268147, "creation_date": 1421266910, "answer_id": 27951737, "question_id": 27951595, "link": "https://stackoverflow.com/questions/27951595/c-class-error-in-src-class-name-cpp/27951737#27951737", "title": "C++ Class error in src\\class-name.cpp", "body": "<p><code>Password::Password() { ... }</code> will define a function that has been already declared.</p>\n\n<p>For that,</p>\n\n<ol>\n<li>the function must have already been  declared (in the <code>class</code> declaration for <code>Password</code>)--\n<ul>\n<li>and it should be declared <strong>with an identical signature</strong>, and</li>\n</ul></li>\n<li>the function must not be already defined--only declared;\n<ul>\n<li>otherwise, you will be defining a function twice and the compiler will complain.</li>\n</ul></li>\n</ol>\n\n<p>In your <code>.h</code> file, you have:</p>\n\n<pre><code>Password (string pass) {this-&gt;password = pass;}\n</code></pre>\n\n<p>Here, you can notice two issues:</p>\n\n<ol>\n<li>The signature of this constructor is different than the signature of the constructor defined in the cpp file; the constructor <code>Password()</code> <em>does not exist anywhere</em> so it cannot be defined in the cpp file!</li>\n<li>The constructor is already defined, so if you fix the signature of the constructor in your cpp file to include <code>string pass</code>, you will see a new error.</li>\n</ol>\n\n<hr>\n\n<p><strong>To get your CPP code working as-is</strong></p>\n\n<p>Your <code>password.h</code> should change its <code>class Password</code> declaration to include:</p>\n\n<pre><code>// Password.h\nclass Password {\npublic:\n    Password(); // default ctor ; declared, not defined\n    ~Password(); // default dtor ; declared, not defined\n}\n</code></pre>\n\n<hr>\n\n<p><strong>To have <code>Password::Password</code> in the cpp file have the same behavior as the header file</strong></p>\n\n<p>Change the header file so that:</p>\n\n<pre><code>// password.h\n...\nPassword (string pass); // only declared\n...\n</code></pre>\n\n<p>and then change the CPP file:</p>\n\n<pre><code>Password::Password(std::string pass) { // ctor\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 4454875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989a080ce9ead6fef2ddb806d55528db?s=128&d=identicon&r=PG&f=1", "display_name": "Emil Hansen", "link": "https://stackoverflow.com/users/4454875/emil-hansen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421268147, "creation_date": 1421266355, "last_edit_date": 1421267377, "question_id": 27951595, "link": "https://stackoverflow.com/questions/27951595/c-class-error-in-src-class-name-cpp", "title": "C++ Class error in src\\class-name.cpp", "body": "<p>Have been programming for fun in C++ for almost a year now. However i have avoided classes all the time (Yeah I know, bad idea). \nI have a problem in my .cpp file</p>\n\n<pre><code>#include \"Password.h\"\n\nPassword::Password() //&lt;-- error here \n{\n    //ctor\n}\n\nPassword::~Password() //&lt;-- and here\n{\n    //dtor\n}\n</code></pre>\n\n<p>It will give me an error the two mentioned places. The error is \"error: prototype for 'Password::Password()' does not match any in class 'Password'\"\nI have tried to comment every thing out, and the program seems to run fine without it. </p>\n\n<p>Do you guys know what could be wrong? I have been searching for it for several hours now, and could not find anything. \nI am using Code Blocks</p>\n\n<p>Edited with Password.h</p>\n\n<pre><code>#ifndef PASSWORD_H\n\n#define PASSWORD_H\n\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;conio.h&gt;\n\nusing namespace std;\n\nclass Password\n{\n       protected: /* A password should be protected, right? */\n        string password; /* The string to store the password */\n        string input; /* The string to store the input */\n\n\npublic:\n    /* Constructor, pass a string to it (the actual password) */\n    Password (string pass) {this-&gt;password = pass;}\n    void Input () /* Get the password from the user */\n    {\n        while (true) /* Infinite loop, exited when RETURN is pressed */\n        {\n            char temp;\n            temp= getch(); /* Get the current character of the password */\n            //getline(cin, temp);\n            if (cin.get() == '\\n') {\n            return;\n            }\n            /* Exit the function */\n            input += temp;\n            cout &lt;&lt; '*'; /* Print a star */\n        }\n    }\n    bool Compare () /* Check if the input is the same as the password */\n    {\n        if (password.length() != input.length()) /* If they aren't the same length */\n            return false; /* Then they obviously aren't the same! */\n        for (unsigned int i = 0; i &lt;= input.length(); i++)\n        { /* Loop through the strings */\n            if (password[i] != input[i])\n                return false; /* If anything is not a match, then they are not the same */\n        }\n        return true; /* If all checks were passed, then they are the same */\n    }\n};\n\n#endif // PASSWORD_H\n</code></pre>\n\n<p>This is a bit of code that i got from <a href=\"http://www.dreamincode.net/forums/topic/59437-how-to-make-a-password-show-as-stars/\" rel=\"nofollow\">http://www.dreamincode.net/forums/topic/59437-how-to-make-a-password-show-as-stars/</a> Credits to him for it. </p>\n"}, {"tags": ["c++", "qt", "qt4", "qt-creator"], "answers": [{"owner": {"reputation": 2200, "user_id": 1519323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zUWVH.png?s=128&g=1", "display_name": "davepmiller", "link": "https://stackoverflow.com/users/1519323/davepmiller"}, "is_accepted": false, "score": 0, "last_activity_date": 1421280600, "last_edit_date": 1421280600, "creation_date": 1421277289, "answer_id": 27954235, "question_id": 27951541, "link": "https://stackoverflow.com/questions/27951541/how-to-pass-data-between-forms-in-qt/27954235#27954235", "title": "How to pass data between forms in qt", "body": "<p>In your on_button_clicked() slot for each button, you could signal the text() for the button clicked to the new widget.</p>\n\n<pre><code>//Your signal declaration in MainWindow.h\nvoid signalToWidget( QString buttonText );\n\n/*The slot in your widget to handle the text (you may need to subclass your widget to add this functionality*/\nvoid slotSetText( QString buttonText )\n{\n    widgetElement-&gt;setText( buttonText );\n}\n\n//connect in MainWindow constructor\nQObject::connect( MainWindow, SIGNAL( signalToWidget( QString ) ),\n                  widget, SLOT( slotSetText( QString ) ) );\n\nvoid MainWindow::onButton1Clicked()\n{\n    emit signalToWidget( ui-&gt;button1-&gt;text() );\n}\n</code></pre>\n"}], "owner": {"reputation": 2084, "user_id": 2600457, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a5d8c496943f34ffa51f3ea8bbf31c2d?s=128&d=identicon&r=PG", "display_name": "Valla", "link": "https://stackoverflow.com/users/2600457/valla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2020, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1421280600, "creation_date": 1421266179, "question_id": 27951541, "link": "https://stackoverflow.com/questions/27951541/how-to-pass-data-between-forms-in-qt", "title": "How to pass data between forms in qt", "body": "<p>I have a Mainwindow which has four buttons,all these four buttons are connected to \"clicked()\" signal. When we click on the button it goes to another widget which replaces the mainwindow(using stacked layout). I want to pass the name of the button to the widget so that I can use that value and append it to a label in the widget. I tried passing values to the widgte using the following method:</p>\n\n<p>mainwindow.h</p>\n\n<pre><code>public:\n    explicit MainWindow(QWidget *parent = 0);\n    QStackedLayout *stackedLayout;\n    QLineEdit* lineEdit();\n</code></pre>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>QLineEdit* MainWindow::lineEdit()\n{\n    //buttonName is a QLineEdit on the main form which is hidden and value is being set when a button is clicked\n    std::string text=ui-&gt;buttonName-&gt;text().toUtf8().constData();\n    std::cout&lt;&lt;\"Button Name passed from main window is\"&lt;&lt;text&lt;&lt;std::endl;\n\n    return ui-&gt;buttonName;\n}\n</code></pre>\n\n<p>SecondForm.cpp</p>\n\n<pre><code>    MainWindow mainWind;\n    std::string text=mainWind.lineEdit()-&gt;text().toUtf8().constData();\n    std::cout&lt;&lt;\"The name of the button is\"&lt;&lt;text&lt;&lt;std::endl;\n</code></pre>\n\n<p>This is the approach that I am following. The data is not being returned to the second form. Is it because I am setting the value of the QLineEdit after the button is clicked and the value is not being stored anywhere? Could you let me know what I am missing here.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 19441, "user_id": 1381108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a55e1b257487441cd435f66bfb413f1?s=128&d=identicon&r=PG", "display_name": "Rapptz", "link": "https://stackoverflow.com/users/1381108/rapptz"}, "edited": false, "score": 0, "creation_date": 1421266352, "post_id": 27951537, "comment_id": 44298269, "body": "<code>std::vector</code> has a constructor that takes a pair of iterators. Use that. You are pretty close."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1421266383, "post_id": 27951537, "comment_id": 44298289, "body": "The error message says <code>std::vector&lt;unsigned char*&gt;</code>  - note the <code>*</code> , probably you mistakenly wrote this <code>*</code> in one of your prototypes"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1421266482, "post_id": 27951537, "comment_id": 44298331, "body": "There&#39;s a typo: <code>end()</code> is missing its closing <code>}</code>."}, {"owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "edited": false, "score": 0, "creation_date": 1421266493, "post_id": 27951537, "comment_id": 44298337, "body": "why not just use string? isn&#39;t it a kind of vector?"}], "answers": [{"comments": [{"owner": {"reputation": 19441, "user_id": 1381108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a55e1b257487441cd435f66bfb413f1?s=128&d=identicon&r=PG", "display_name": "Rapptz", "link": "https://stackoverflow.com/users/1381108/rapptz"}, "edited": false, "score": 0, "creation_date": 1421266448, "post_id": 27951602, "comment_id": 44298315, "body": "Even if it was, it wouldn&#39;t work. <code>std::initializer_list</code> is greedy. Note that <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b\">c++</a> implies all versions by default. If you want version specific things, then they should add a tag saying that such as <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b03\">c++03</a>."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 19441, "user_id": 1381108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a55e1b257487441cd435f66bfb413f1?s=128&d=identicon&r=PG", "display_name": "Rapptz", "link": "https://stackoverflow.com/users/1381108/rapptz"}, "edited": false, "score": 0, "creation_date": 1421266980, "post_id": 27951602, "comment_id": 44298558, "body": "@Rapptz Added standard quotes and a demonstration to make clear that it works. :)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1421267342, "post_id": 27951602, "comment_id": 44298718, "body": "I&#39;d advise <code>std::vector&lt;unsigned char&gt; Raw() const {std::vector&lt;unsigned char&gt; retval(vch, vch + size()); return retval; }</code> in C++03 myself.  The cost (NRVO and RVO both eliminate the copy) remains the same, but we don&#39;t do 2 things on one line needlessly.  But this may be a matter of taste."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1421267495, "post_id": 27951602, "comment_id": 44298799, "body": "@Yakk You&#39;re absolutely right. Mind if I incorporate that into my answer?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1421269385, "post_id": 27951602, "comment_id": 44299735, "body": "@Columbo Why else would I add a comment?  :)"}], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 11, "last_activity_date": 1421270519, "last_edit_date": 1421270519, "creation_date": 1421266375, "answer_id": 27951602, "question_id": 27951537, "link": "https://stackoverflow.com/questions/27951537/how-to-convert-unsigned-char-to-stdvectorunsigned-char/27951602#27951602", "title": "How to convert unsigned char[] to std::vector&lt;unsigned char&gt;", "body": "<pre><code>return (vch, vch + size());\n</code></pre>\n\n<p>This uses the comma operator - long story short, write</p>\n\n<pre><code>return std::vector&lt;unsigned char&gt;(vch, vch + size());\n</code></pre>\n\n<p>or</p>\n\n<pre><code>std::vector&lt;unsigned char&gt; vec(vch, vch + size())\nreturn vec;\n</code></pre>\n\n<p>instead. (The latter is semantically equivalent but preferable in terms of readability)\nOr with C++11:</p>\n\n<pre><code>return {vch, vch + size()};\n</code></pre>\n\n<p>This does work because a braced-init-list with pointers cannot be converted to <code>initializer_list&lt;unsigned char&gt;</code>. [over.match.list]/1:</p>\n\n<blockquote>\n  <p>When objects of non-aggregate class type <code>T</code> are list-initialized such\n  that 8.5.4 specifies that overload resolution is performed according\n  to the rules in this section, overload resolution selects the\n  constructor in two phases:</p>\n  \n  <ul>\n  <li><p>Initially, the candidate functions are the initializer-list constructors (8.5.4) of the class <code>T</code> [..]</p></li>\n  <li><p><strong>If no viable initializer-list constructor is found, overload resolution is performed again, where the\n     candidate functions are all the constructors of the class <code>T</code> and the argument list consists of the elements\n    of the initializer list.</strong></p></li>\n  </ul>\n</blockquote>\n\n<p>Now, is there a viable initializer-list constructor? [over.ics.list]:</p>\n\n<blockquote>\n  <ol start=\"4\">\n  <li>Otherwise, if the parameter type is <code>std::initializer_list&lt;X&gt;</code> <strong>and all the elements of the initializer list can be implicitly converted\n  to <code>X</code></strong>, [..]</li>\n  </ol>\n  \n  <p>&nbsp;10. In all cases other than those enumerated above, <strong>no conversion is possible.</strong></p>\n</blockquote>\n\n<p>There is clearly no implicit conversion from <code>unsigned char*</code> to <code>unsigned char</code>, so the iterator-pair constructor template is chosen. <a href=\"http://coliru.stacked-crooked.com/a/8ffe0704f82d9574\" rel=\"noreferrer\"><strong>Demo</strong></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1421270792, "post_id": 27951788, "comment_id": 44300556, "body": "Why do you consider <code>basic_string&lt;unsigned char&gt;</code> preferable to <code>vector</code> ?"}], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": false, "score": 0, "last_activity_date": 1421267101, "creation_date": 1421267101, "answer_id": 27951788, "question_id": 27951537, "link": "https://stackoverflow.com/questions/27951537/how-to-convert-unsigned-char-to-stdvectorunsigned-char/27951788#27951788", "title": "How to convert unsigned char[] to std::vector&lt;unsigned char&gt;", "body": "<p>It is may not answering directly to the answer.</p>\n\n<p>But the question is why to use a vector when you can use  <code>std::string</code>, or <code>std::basic_string&lt;unsigned char&gt;</code> instead of std::vector, like this:</p>\n\n<pre><code>unsigned char a[]=\"1234\";\nstd::basic_string&lt;unsigned char&gt; v=a;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4454712, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ND_cK4N5P3w/AAAAAAAAAAI/AAAAAAAAAAw/HxoPhQ6pxzU/photo.jpg?sz=128", "display_name": "Minato", "link": "https://stackoverflow.com/users/4454712/minato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8731, "favorite_count": 1, "accepted_answer_id": 27951602, "answer_count": 2, "score": 5, "last_activity_date": 1421270519, "creation_date": 1421266163, "last_edit_date": 1421266320, "question_id": 27951537, "link": "https://stackoverflow.com/questions/27951537/how-to-convert-unsigned-char-to-stdvectorunsigned-char", "title": "How to convert unsigned char[] to std::vector&lt;unsigned char&gt;", "body": "<p>I am trying to pass this to another part of my project that requires it be a vector   </p>\n\n<pre><code>unsigned char vch[65];\n\nunsigned int size() const { return GetLen(vch[0]); }\nconst unsigned char* begin() const { return vch; }\nconst unsigned char* end() const { return vch + size(); \n\n\nstd::vector&lt;unsigned char&gt; Raw() const\n{\n        return (vch, vch + size());\n}\n</code></pre>\n\n<p>I get the error </p>\n\n<pre><code> could not convert '(const unsigned char*)(&amp;((const CPubKey*)this)-\nCPubKey::vch)' from 'const unsigned char*' to 'std::vector&lt;unsigned char*&gt;'\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1421267134, "post_id": 27951464, "comment_id": 44298626, "body": "You are overwriting alist.  Thus destroying the head node of the list.  Debug by starting with <i>one</i> node, make sure you can distinguish the nodes by giving them unique values."}], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 4454959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e6kU3.jpg?s=128&g=1", "display_name": "Bluefire", "link": "https://stackoverflow.com/users/4454959/bluefire"}, "edited": false, "score": 0, "creation_date": 1421267595, "post_id": 27951776, "comment_id": 44298838, "body": "OMG. Thx a lot. Now i see it too  :D                                                                  And thx to sanfor too..for correcting my bad english... im sry but thx for help :) (sry i still not found how to send you a pm :S... so i send it here)"}, {"owner": {"reputation": 184, "user_id": 2062840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lhpeO.png?s=128&g=1", "display_name": "Quip11", "link": "https://stackoverflow.com/users/2062840/quip11"}, "reply_to_user": {"reputation": 398, "user_id": 4454959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e6kU3.jpg?s=128&g=1", "display_name": "Bluefire", "link": "https://stackoverflow.com/users/4454959/bluefire"}, "edited": false, "score": 0, "creation_date": 1421344615, "post_id": 27951776, "comment_id": 44332469, "body": "Most people stick to advancing pointers through linked lists. It&#39;s just easier (and faster)."}], "owner": {"reputation": 184, "user_id": 2062840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lhpeO.png?s=128&g=1", "display_name": "Quip11", "link": "https://stackoverflow.com/users/2062840/quip11"}, "is_accepted": true, "score": 3, "last_activity_date": 1421267053, "creation_date": 1421267053, "answer_id": 27951776, "question_id": 27951464, "link": "https://stackoverflow.com/questions/27951464/mysterious-mistake-in-code-while-handling-with-dynamic-datastructures/27951776#27951776", "title": "Mysterious mistake in code while handling with dynamic datastructures", "body": "<p>The statement</p>\n\n<pre><code>alist = *(alist.next);\n</code></pre>\n\n<p>is overwriting your local object <code>alist</code> in each loop iteration with the <code>next</code> link in the list. In the last iteration, it's set with an object whose <code>next</code> is <code>NULL</code>.  Every object's <code>first</code> pointer is pointing to this local object that's being overwritten.  When you try to show the created structs, the first evaluation checking whether <code>next</code> is <code>NULL</code> will fail.</p>\n\n<p>There is no overwriting in the second version because you're using pointer assignment instead of object copying.</p>\n"}], "owner": {"reputation": 398, "user_id": 4454959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e6kU3.jpg?s=128&g=1", "display_name": "Bluefire", "link": "https://stackoverflow.com/users/4454959/bluefire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 27951776, "answer_count": 1, "score": 0, "last_activity_date": 1421267053, "creation_date": 1421265889, "last_edit_date": 1421266533, "question_id": 27951464, "link": "https://stackoverflow.com/questions/27951464/mysterious-mistake-in-code-while-handling-with-dynamic-datastructures", "title": "Mysterious mistake in code while handling with dynamic datastructures", "body": "<p>I am a beginner in C++ and been searching the whole day for my mistake but I cant find it.\nI want to create a dynamic data structure and add some elements in it. But my first way is not working and I can't find out why. </p>\n\n<p>I have now 2 cases. One that works and one that fails. I know that I could use the second way and not to ask this question but I think I really didn't understand something important and I am sure that I will do the same mistake again.</p>\n\n<p>So here the code:</p>\n\n<pre><code>struct a{\n  int count;\n  int value;\n  a* first;\n  a* next;\n};\n</code></pre>\n\n<p>Failing Case (first way):</p>\n\n<pre><code>int main(){\n  a alist = { 0, 12, NULL, NULL }; //init the first one\n  alist.first = &amp;alist;\n\n  for (int i = 0; i &lt; 20; i++){  //creat some dyn. linked structures    \n    if (alist.next == NULL){\n      alist.next = new a;\n      alist.next-&gt;count = i;\n      alist.next-&gt;first = alist.first;\n      alist.next-&gt;next = NULL;\n      alist.next-&gt;value = 12; //just a test value\n      alist = *(alist.next);            \n    }\n  }\n\n  alist = *(alist.first); //reset to start from the beginning \n  cout &lt;&lt; \"count of created Structs:\" &lt;&lt; endl;\n  for (int i = 0; i &lt; 20; i++){  //show count if structs exists\n    if (alist.next != NULL){\n      cout &lt;&lt; \"_\" &lt;&lt; i &lt;&lt; endl;\n      alist = *(alist.next);\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>count of created Structs:\n</code></pre>\n\n<p>Working Case:</p>\n\n<pre><code>int main(){\n  a* alist = new a{ 0, 12, NULL, NULL }; //init the first one\n  alist-&gt;first = alist;\n\n  for (int i = 0; i &lt; 20; i++){  //creat some dyn. linked structures    \n    if (alist-&gt;next == NULL){\n      alist-&gt;next = new a;\n      alist-&gt;next-&gt;count = i;\n      alist-&gt;next-&gt;value = 12; //just a test value\n      alist-&gt;next-&gt;first = alist-&gt;first;\n      alist-&gt;next-&gt;next = NULL;\n      alist = alist-&gt;next;\n    }\n  }\n\n  alist = alist-&gt;first; //reset to start from the beginning \n  cout &lt;&lt; \"count of created Structs:\" &lt;&lt; endl;\n  for (int i = 0; i &lt; 20; i++){  //show countnumber if structs exists\n    if (alist-&gt;next != NULL){\n      cout &lt;&lt; \"_\" &lt;&lt; i &lt;&lt; endl;\n      alist = (alist-&gt;next);\n    }\n  }\n  return 0;\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>count of created Structs:\n_0,_0,_1,_2,_3,..._19\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++11", "perfect-forwarding", "nullptr"], "comments": [{"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1421265571, "post_id": 27951344, "comment_id": 44297895, "body": "and when you use <code>0</code> instead of <code>NULL</code>?"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 6, "creation_date": 1421265624, "post_id": 27951344, "comment_id": 44297920, "body": "You should really be using <code>nullptr</code> instead of <code>NULL</code> in C++ &gt;= 11."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 0, "creation_date": 1421265626, "post_id": 27951344, "comment_id": 44297922, "body": "In the call? @Wimmel I have changed the prototype, nothing happened."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1421265675, "post_id": 27951344, "comment_id": 44297947, "body": "I have to look into that @cdhowie, never used it before."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1421265943, "post_id": 27951344, "comment_id": 44298078, "body": "@cdhowie <code>nullptr</code> seems to solve the issue! I did add the pointer after I read that <a href=\"http://stackoverflow.com/questions/13888453/stdthread-unresolved-overloaded-function-type-error\" title=\"stdthread unresolved overloaded function type error\">stackoverflow.com/questions/13888453/&hellip;</a>. Also, are you going to put an answer with that? If so, you might want to link to this question: <a href=\"http://stackoverflow.com/questions/1282295/what-exactly-is-nullptr\" title=\"what exactly is nullptr\">stackoverflow.com/questions/1282295/what-exactly-is-nullptr</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1421266000, "post_id": 27951344, "comment_id": 44298106, "body": "The <code>_Args</code> list for <code>std::thread</code> has <code>, int, int</code> for the last two parameters. It looks to me like the compiler is confused by the default values or something."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1421266114, "post_id": 27951344, "comment_id": 44298163, "body": "Correct @molbdnilo, I noticed that too, but the prototype has pointers as the last two arguments (I also got the same warning for the last argument). It would be nice to know why this happened."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1421266143, "post_id": 27951344, "comment_id": 44298177, "body": "@molbdnilo No, <code>_Args</code> is deduced from the arguments supplied to the <code>std::thread</code> constructor, which implies that whatever the <code>NULL</code> macro evaluates to has type <code>int</code>. The definition of <code>NULL</code> is implementation-defined, so we&#39;d have to know how it&#39;s defined in OP&#39;s case to understand why it has type <code>int</code>. (Typically it&#39;s defined as <code>((void *)0)</code> in older C code. Obviously it has a different definition here -- probably just <code>0</code>, and <code>0</code> is implicitly convertible to any pointer type, but <i>some random <code>int</code></i>, which is what the <code>0</code> becomes as a parameter to <code>std::thread()</code>, cannot.)"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1421266190, "post_id": 27951344, "comment_id": 44298195, "body": "@cdhowie Ah, yes, of course. It was too obvious, I guess."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1421266361, "post_id": 27951344, "comment_id": 44298278, "body": "@MSalters I said <i>&quot;in older C code&quot;</i>. C is a lot more relaxed about conversions between <code>void *</code> and other pointer types so it works there. This wouldn&#39;t work in C++ because it doesn&#39;t allow implicit conversion from <code>void *</code> to other pointer types."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1421266535, "post_id": 27951344, "comment_id": 44298355, "body": "@cdhowie: Are you <i>really sure</i> it isn&#39;t defined that way in newer C?"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1421266775, "post_id": 27951344, "comment_id": 44298467, "body": "I got a close vote, why? Should I modify the question for future users?"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421266815, "post_id": 27951344, "comment_id": 44298483, "body": "@Deduplicator That is one of the possible definitions but is not the only one."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1421268287, "post_id": 27951344, "comment_id": 44299172, "body": "@G.Samaras: (Not my vote, obviously) The question is somewhat incomplete in that your actual call uses a bunch of undefined variables. Also, the definition of <code>populate</code> appears to define a free function unrelated to the member function <code>&amp;Random_kd_forest::populate</code>. And finally, you should create a minimal example. This can be reproduced with just <code>void populate(void*)</code>."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1421268372, "post_id": 27951344, "comment_id": 44299218, "body": "I see, I will have that in mind next time @MSalters! I am very confused now on which answer I should choose, both seem just fine to me!"}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421269851, "post_id": 27951344, "comment_id": 44299989, "body": "Because of the edit I will choose your answer @Deduplicator, in order to break the tie. :)"}], "answers": [{"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421266605, "post_id": 27951549, "comment_id": 44298393, "body": "Since when is <code>NULL</code> a macro with value 0, instead of an implementation-defined universal null-pointer constant (which might be plain <code>0</code>)?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421266923, "post_id": 27951549, "comment_id": 44298534, "body": "@Deduplicator: Any null pointer constant has <i>value</i> zero, although the type may differ somewhat."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421267340, "post_id": 27951549, "comment_id": 44298716, "body": "That&#39;s simply wrong. My answer has the quotes to proove it."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421268019, "post_id": 27951549, "comment_id": 44299031, "body": "@Deduplicator: You quote the standard which literally states &quot; integer literal with <b>value zero</b>&quot;, and apparently I&#39;m wrong when I say it&#39;s a macro with <b>value zero</b> ?? I don&#39;t follow your logic."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421268217, "post_id": 27951549, "comment_id": 44299145, "body": "No, I&#39;m quoting the requirements for <code>NULL</code>, which is <i>null pointer constant</i>, and the definition of <i>null pointer constant</i>, which lists <b>as one possibility</b> a zero integral literal. There is that other possibility too."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421268621, "post_id": 27951549, "comment_id": 44299325, "body": "@Deduplicator: One possibility which does not apply to the problem at hand, as we can derive from the warning. I agree that other compilers can indeed choose to use <code>nullptr</code>."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421268833, "post_id": 27951549, "comment_id": 44299452, "body": "Well, if you at least hinted that that part was implementation-defined, instead of cast in stone... especially as the ambiguity of <code>NULL</code> was at the heart of the problem."}], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 2, "last_activity_date": 1421266994, "last_edit_date": 1421266994, "creation_date": 1421266193, "answer_id": 27951549, "question_id": 27951344, "link": "https://stackoverflow.com/questions/27951344/warning-passing-null-to-non-pointer-argument-of-stdthreadthread/27951549#27951549", "title": "warning: passing NULL to non-pointer argument of \u2018std::thread::thread", "body": "<p>The problem is that <code>NULL</code> is a macro with value 0. Template argument deduction deduced the type of <code>NULL</code> as <code>int</code> (as you can see from the end of the warning). Yet <code>NULL</code> is by convention used for pointer arguments, not integral arguments. So the compiler warns you that you're passing a <code>NULL</code> argument to an <code>int</code> parameter. To make things worse, this is technically wrong as that non-const integer 0 argument is no longer guaranteed to be convertable to a null pointer.</p>\n\n<p>The correct solution is <code>nullptr</code>. This is, as the name already hints, a pointer instead of an integer.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1421270314, "post_id": 27951801, "comment_id": 44300285, "body": "My only quibble is that the error message is confusing. If your explanation is correct, it should be &quot;Passing integer to pointer arg 2&quot;, rather than &quot;passing NULL to non-pointer argument 2&quot;. The error message says something opposite to your explanation..."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421270902, "post_id": 27951801, "comment_id": 44300611, "body": "There are 3 cases for <code>NULL</code>: 1. It&#39;s used in a pointer context. All good. 2. It is used in a non-pointer context and defined as <code>nullptr_t{}</code>. A hard error. Cannot happen if the receiving type is deduced, like for a template. 3. It is used in a non-pointer context and defined as <code>0</code>. This is the semantic error the warning is about. And it&#39;s important that it&#39;s <code>NULL</code>, because passing a plain integer literal as an <code>int</code> argument is somewhat expected."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1421271366, "post_id": 27951801, "comment_id": 44300857, "body": "That&#39;s what I don&#39;t get. The context here is pointer, not non-pointer. What am I missing?"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421271503, "post_id": 27951801, "comment_id": 44300933, "body": "The first sentence in my answer: <code>NULL</code> is ambiguous. It is semantically a pointer literal, specifically a null pointer constant. But its type can (and was in this case) an integral type. Which means the template-argument-type is deduced to integral type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3458"}, "edited": false, "score": 0, "creation_date": 1421273864, "post_id": 27951801, "comment_id": 44302005, "body": "After looking some more at this, I now think that &quot;non-pointer context&quot; that error is referring to is ellipses (<code>Args&amp;&amp;...</code>)"}], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 5, "last_activity_date": 1421271900, "last_edit_date": 1421271900, "creation_date": 1421267145, "answer_id": 27951801, "question_id": 27951344, "link": "https://stackoverflow.com/questions/27951344/warning-passing-null-to-non-pointer-argument-of-stdthreadthread/27951801#27951801", "title": "warning: passing NULL to non-pointer argument of \u2018std::thread::thread", "body": "<p>The trouble is that <code>NULL</code> is a bit ambiguous.<br>\nWhile it is semantically a pointer, it can (and in your implementation is) of integral type.</p>\n\n<blockquote>\n  <h3>18.2 Types <code>[support.types]</code></h3>\n  \n  <p>3 The macro <code>NULL</code> is an implementation-defined C++ <em>null pointer constant</em> in this International Standard (4.10).</p>\n</blockquote>\n\n\n\n<blockquote>\n  <h3>4.10 Pointer conversions <code>[conv.ptr]</code></h3>\n  \n  <p>1 A <em>null pointer constant</em> is an integer literal (2.14.2) with value zero or a prvalue of type <code>std::nullptr_t</code>.<br>\n  [...]</p>\n</blockquote>\n\n<p>So your implementation decided to make it plain <code>0</code> for backwards-compatibility, but to flag it for extra diagnostics.</p>\n\n<p>Which is actually a laudable decision for promoting portable code.<br>\nThough it's a shame noone could hop into a time-machine and just make <code>NULL</code> identical to <code>nullptr</code> in the standard, so the ambiguity does not exist.</p>\n\n<p>To resolve the error, use <code>nullptr</code> instead of <code>NULL</code> or, more involved and not so nice, a pointer of the proper type.</p>\n"}], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9087, "favorite_count": 0, "accepted_answer_id": 27951801, "answer_count": 2, "score": 3, "last_activity_date": 1421271900, "creation_date": 1421265471, "last_edit_date": 1421269456, "question_id": 27951344, "link": "https://stackoverflow.com/questions/27951344/warning-passing-null-to-non-pointer-argument-of-stdthreadthread", "title": "warning: passing NULL to non-pointer argument of \u2018std::thread::thread", "body": "<p>The function I want to run:</p>\n\n<pre><code>struct foo;\nvoid bar(const foo* p = 0);\n</code></pre>\n\n<p>How I call the function:</p>\n\n<pre><code>auto thread = std::thread(&amp;bar, NULL);\n</code></pre>\n\n<p>The warning:</p>\n\n<blockquote>\n  <p>foobar.h:223:9: warning: passing NULL to non-pointer argument 2 of \u2018std::thread::thread(_Callable&amp;&amp;, _Args&amp;&amp; ...) [with _Callable = void (*)(const foo*), _Args = {int}]\u2019 [-Wconversion-null]</p>\n</blockquote>\n\n<p>What am I missing here?</p>\n\n<p>When I call the function with non-<code>NULL</code> argument, the warning goes away.</p>\n"}, {"tags": ["c++", "arrays", "vector", "struct"], "comments": [{"owner": {"reputation": 3681, "user_id": 2817371, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fafb901e8d840c703f4a5089692427ad?s=128&d=identicon&r=PG&f=1", "display_name": "Red Alert", "link": "https://stackoverflow.com/users/2817371/red-alert"}, "edited": false, "score": 0, "creation_date": 1421265163, "post_id": 27951226, "comment_id": 44297678, "body": "your lambda should take a <code>SimpleStruct</code> argument, not an <code>int</code> (or <code>SimpleVertex</code>, which your error leads me to believe you are actually using)."}], "answers": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "is_accepted": true, "score": 1, "last_activity_date": 1421265152, "creation_date": 1421265152, "answer_id": 27951256, "question_id": 27951226, "link": "https://stackoverflow.com/questions/27951226/delete-an-element-from-a-vector-and-move-rest-of-elements-down-c/27951256#27951256", "title": "Delete an element from a Vector and move rest of elements down - C++", "body": "<p>The unary predicate passed to <a href=\"http://en.cppreference.com/w/cpp/algorithm/remove\" rel=\"nofollow\"><code>std::remove_if</code></a> needs to be able to accept a <code>SimpleStruct</code>. Its purpose it to evaluate whether each element of the vector should be \"removed\".\nYour predicate accepts an <code>int</code>, and there is no conversion from <code>SimpleStruct</code> to <code>int</code>. You need to change your predicate to something that makes sense.</p>\n\n<p>On the other hand, if you want to remove the element at <code>simpleVector[3]</code>, all you need is</p>\n\n<pre><code>simpleVector.erase(simpleVector.begin() + 3);\n</code></pre>\n"}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "is_accepted": false, "score": 2, "last_activity_date": 1421265188, "creation_date": 1421265188, "answer_id": 27951270, "question_id": 27951226, "link": "https://stackoverflow.com/questions/27951226/delete-an-element-from-a-vector-and-move-rest-of-elements-down-c/27951270#27951270", "title": "Delete an element from a Vector and move rest of elements down - C++", "body": "<p>If you want to remove the element at index 3, you can just do:</p>\n\n<pre><code>simpleVector.erase(simpleVector.begin()+3);\n</code></pre>\n\n<p>With <code>std::vector</code>, you don't need to explicitly 'move all the other elements down' - it will do that for you after the <code>erase</code>.</p>\n"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "is_accepted": false, "score": 1, "last_activity_date": 1421265352, "creation_date": 1421265352, "answer_id": 27951312, "question_id": 27951226, "link": "https://stackoverflow.com/questions/27951226/delete-an-element-from-a-vector-and-move-rest-of-elements-down-c/27951312#27951312", "title": "Delete an element from a Vector and move rest of elements down - C++", "body": "<p>To remove the element at index 3, do this instead:</p>\n\n<pre><code>simpleVector.erase( simpleVector.begin() + 3 );\n</code></pre>\n\n<p>Also note that you don't have to worry about moving the rest of the elements down, as the vector handles this for you automatically.</p>\n\n<blockquote>\n  <p>Because vectors use an array as their underlying storage, erasing elements in positions other than the vector end causes the container to relocate all the elements after the segment erased to their new positions. This is generally an inefficient operation compared to the one performed for the same operation by other kinds of sequence containers (such as list or forward_list).\n   \u2013 <a href=\"http://www.cplusplus.com/reference/vector/vector/erase/\" rel=\"nofollow\">cplusplus.com</a></p>\n</blockquote>\n"}], "owner": {"reputation": 3524, "user_id": 2794594, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/cfe33ec100662119e0930f0d9f3abe4a?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan", "link": "https://stackoverflow.com/users/2794594/ryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2209, "favorite_count": 0, "accepted_answer_id": 27951256, "answer_count": 3, "score": 0, "last_activity_date": 1421265352, "creation_date": 1421265038, "question_id": 27951226, "link": "https://stackoverflow.com/questions/27951226/delete-an-element-from-a-vector-and-move-rest-of-elements-down-c", "title": "Delete an element from a Vector and move rest of elements down - C++", "body": "<p>I have a vector that is of 'simpleVector' :</p>\n\n<pre><code>struct SimpleStruct\n{\n    XMFLOAT3 hello;\n    XMFLOAT3 hi;\n};\n\nstd::vector &lt;SimpleStruct&gt;      simpleVector(0);\n</code></pre>\n\n<p>I'm trying to delete an element, such as simpleVector[3], and then move the rest of the elements down one to remove the blank space. </p>\n\n<pre><code>simpleVector.erase(std::remove_if(simpleVector.begin(), simpleVector.end(),\n    [](int i) { return i == 3; }), simpleVector.end());\n</code></pre>\n\n<blockquote>\n  <p>However, I get this error:  cannot convert argument 1 from\n  'SimpleStruct' to 'int'.</p>\n</blockquote>\n\n<p>Forgive me if this is obvious, I am new to C++. How can I remove this problem? </p>\n"}, {"tags": ["c++", "c++11", "inheriting-constructors"], "comments": [{"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 1, "creation_date": 1421302018, "post_id": 27951191, "comment_id": 44309531, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4129023/how-useful-would-inheriting-constructors-be-in-c\">How useful would Inheriting Constructors be in C++?</a>"}], "answers": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 3, "last_activity_date": 1421268305, "last_edit_date": 1421268305, "creation_date": 1421265347, "answer_id": 27951309, "question_id": 27951191, "link": "https://stackoverflow.com/questions/27951191/inheriting-constructors-vs-forwarding/27951309#27951309", "title": "Inheriting constructors vs forwarding", "body": "<p>Perfect forwarding isn't quite perfect. In particular, 0 as actual argument reduces to <code>int</code> instead of denoting a general nullvalue. So with a constructor taking a pointer argument, <code>0</code> will work as actual argument for an inherited constructor, but not for the forwarding.</p>\n\n<p>Another reason that I think I mentioned at one time when the question (do we really need inheriting constructors) was aired, is that inheriting constructors is a simple notation for a conceptually simple thing, to be used in the context of a simple class. There is enough forced complexity and forced boilerplate in C++.</p>\n"}, {"comments": [{"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "edited": false, "score": 5, "creation_date": 1421265636, "post_id": 27951342, "comment_id": 44297926, "body": "As a side-note: This is one of the reasons why one shouldn&#39;t use integer literals as initializers for pointers anymore, but only <code>nullptr</code>."}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1421265880, "last_edit_date": 1421265880, "creation_date": 1421265459, "answer_id": 27951342, "question_id": 27951191, "link": "https://stackoverflow.com/questions/27951191/inheriting-constructors-vs-forwarding/27951342#27951342", "title": "Inheriting constructors vs forwarding", "body": "<p>The big reason is that perfect forwarding isn't perfect. Simple case:</p>\n\n<pre><code>struct B {\n    B(int* ) { .. }\n};\n</code></pre>\n\n<p>Now consider:</p>\n\n<pre><code>D d{0};\n</code></pre>\n\n<p>If we inherit the constructor, this works fine. If we perfect-forward, we would try to construct <code>B(int )</code>, since <code>0</code> deduces as <code>int</code>, which is a constructor that doesn't exist. Failure! </p>\n\n<p>Other failure cases include braced initialization, declaration-only static const data members, overloaded functions, and bitfields. </p>\n"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 2, "last_activity_date": 1421266308, "creation_date": 1421266308, "answer_id": 27951586, "question_id": 27951191, "link": "https://stackoverflow.com/questions/27951191/inheriting-constructors-vs-forwarding/27951586#27951586", "title": "Inheriting constructors vs forwarding", "body": "<p>Maintenance issues (compiler errors) might lead to preference of 'using':</p>\n\n<pre><code>struct Base\n{\n    Base(int) {}\n};\n\nstruct Derived : public Base\n{\n    using Base::Base;\n};\n\nstruct DerivedTemplate : Base\n{\n    template &lt;typename...Args&gt;\n    DerivedTemplate(Args&amp;&amp;... args)\n    : Base(std::forward&lt;Args&gt;(args)...)\n    {}\n};\n\nint main()\n{\n    // error: no matching function for call to \u2018Derived::Derived(int, int)\u2019\n    Derived d(1, 2);\n\n    // In instantiation of \u2018DerivedTemplate::DerivedTemplate(Args&amp;&amp; ...) [with Args = {int, int}]\u2019:\n    // required from here\n    // error: no matching function for call to \u2018Base::Base(int, int)\u2019\n    DerivedTemplate dt(1, 2);\n}\n</code></pre>\n\n<p>Also, each template instantiation is a different constructor (while using does not multiply)</p>\n"}], "owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 27951342, "answer_count": 3, "score": 4, "last_activity_date": 1421268305, "creation_date": 1421264906, "last_edit_date": 1421265276, "question_id": 27951191, "link": "https://stackoverflow.com/questions/27951191/inheriting-constructors-vs-forwarding", "title": "Inheriting constructors vs forwarding", "body": "<p>C++11 allows inheriting constructors making it possible to avoid a lot of boilerplate, especially with something like a wrapper class. However, it seems like you could already achieve this functionality with variadic templates alone.</p>\n\n<pre><code>class B\n{\npublic:\n B(int){//do something}\n B(int, char){//do something}\n};\n</code></pre>\n\n<p>Using inheriting constructors:</p>\n\n<pre><code>class D : public B\n{\npublic:\n using B::B; \n};\n</code></pre>\n\n<p>Using variadic templates and forward:</p>\n\n<pre><code>class D : public B\n{\npublic:\n template &lt;typename...Args&gt;\n D(Args&amp;&amp;... args) : B(std::forward&lt;Args&gt;(args)...)\n {\n }\n};\n</code></pre>\n\n<p>While consistency(treat constructors and methods the same way for <code>using</code>) and ease of use are very good reasons to bring inherited constructors into the language, is there any other reason why the first solution should be preferred to the second? Both the CWG documents(<a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1890.pdf\" rel=\"nofollow\">N1890</a> and <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1898.pdf\" rel=\"nofollow\">N1898</a>) I found discussing inheriting constructors simply note the following and move on:</p>\n\n<blockquote>\n  <p>Little more than a historical accident prevents using this to work for a constructor as well\n  as for an ordinary member function. Had a constructor been called \u201cctor\u201d or \u201cconstructor\u201d\n  rather than being referred to by the name of their class, this would have worked. We\n  propose this as the mechanism for inheriting constructors.</p>\n</blockquote>\n"}, {"tags": ["c++", "visual-studio-2013", "linker-errors", "directx-11", "lnk2019"], "comments": [{"owner": {"reputation": 14451, "user_id": 33499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17c590aa4c56918b47c7ba5e39dba5d8?s=128&d=identicon&r=PG", "display_name": "wimh", "link": "https://stackoverflow.com/users/33499/wimh"}, "edited": false, "score": 1, "creation_date": 1421265477, "post_id": 27951178, "comment_id": 44297844, "body": "You don&#39;t include enough information in your question for me to answer that, but take a look at <a href=\"http://stackoverflow.com/q/12573816/33499\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a> first."}], "answers": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": false, "score": 1, "last_activity_date": 1432059038, "creation_date": 1432059038, "answer_id": 30333064, "question_id": 27951178, "link": "https://stackoverflow.com/questions/27951178/getting-lnk-2019-errors-in-vs-2013-in-directx-11-using-c/30333064#30333064", "title": "Getting LNK 2019 errors in VS 2013 in directX 11 using C++", "body": "<p>You forgot to link some libraries for the functions you use: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb204962(v=vs.85).aspx\" rel=\"nofollow\">D3DXMatrixTranspose</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ff476261(v=vs.85).aspx\" rel=\"nofollow\">D3DX11CompileFromFile</a></p>\n\n<p>You can do this by adding the corresponding libraries to the Linker:</p>\n\n<p>Project -> [ProjectName] Properties... -> Configuration Properties -> Linker -> Input -> Additional Dependencies - then add these libraries:</p>\n\n<ul>\n<li><strong>D3DX10.lib</strong></li>\n<li><strong>D3DX11.lib</strong></li>\n</ul>\n"}], "owner": {"reputation": 108, "user_id": 4021347, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/42ee3a791968dd4573b7cc040f7d2b58?s=128&d=identicon&r=PG&f=1", "display_name": "JustinWeq", "link": "https://stackoverflow.com/users/4021347/justinweq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "closed_date": 1514480956, "answer_count": 1, "score": 0, "last_activity_date": 1507912892, "creation_date": 1421264864, "last_edit_date": 1507912892, "question_id": 27951178, "link": "https://stackoverflow.com/questions/27951178/getting-lnk-2019-errors-in-vs-2013-in-directx-11-using-c", "closed_reason": "Duplicate", "title": "Getting LNK 2019 errors in VS 2013 in directX 11 using C++", "body": "<p>Upon compilation of my program I am getting the following errors:</p>\n\n<pre><code>Error   59  error LNK2019: unresolved external symbol _D3DXMatrixTranspose@8 referenced in function \"private: bool __thiscall ColorShaderClass::SetShaderParameters(struct ID3D11DeviceContext *,struct D3DXMATRIX,struct D3DXMATRIX,struct D3DXMATRIX)\" (?SetShaderParameters@ColorShaderClass@@AAE_NPAUID3D11DeviceContext@@UD3DXMATRIX@@11@Z)    D:\\Programs\\C++\\DirectX 11\\Tutorial 2\\Tutorial 1\\colorshaderclass.obj   Tutorial 1\n\nError   60  error LNK2019: unresolved external symbol _D3DX11CompileFromFileW@44 referenced in function \"private: bool __thiscall ColorShaderClass::InitializeShader(struct ID3D11Device *,struct HWND__ *,wchar_t *,wchar_t *)\" (?InitializeShader@ColorShaderClass@@AAE_NPAUID3D11Device@@PAUHWND__@@PA_W2@Z) D:\\Programs\\C++\\DirectX 11\\Tutorial 2\\Tutorial 1\\colorshaderclass.obj   Tutorial 1\n\nError   61  error LNK1120: 2 unresolved externals   D:\\Programs\\C++\\DirectX 11\\Tutorial 2\\Debug\\Tutorial 1.exe  Tutorial 1\n</code></pre>\n\n<p>I have looked everywhere on the internet for an answer and have tried everything I found, does anyone know why I am getting these errors or how I can fix them?</p>\n"}, {"tags": ["c++", "algorithm", "comparison"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1421265077, "post_id": 27951130, "comment_id": 44297633, "body": "<a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Read here about why you shouldn&#39;t use !infile.eof()</a>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1421265392, "post_id": 27951130, "comment_id": 44297784, "body": "It sounds like you may be misreading the assignment.  Was &quot;<code>2ABCD</code>&quot; given as an example?  Where the character <code>&#39;2&#39;</code> means &quot;Rotate two times&quot;?  Or did you decide that the character <code>&#39;2&#39;</code> will mean that?  It sounds like a system that won&#39;t go above <code>&#39;9&#39;</code> very cleanly."}, {"owner": {"reputation": 1986, "user_id": 4362545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c8125bdcca3d21a1e60584d02ae469?s=128&d=identicon&r=PG&f=1", "display_name": "Hans Kl&#252;nder", "link": "https://stackoverflow.com/users/4362545/hans-kl%c3%bcnder"}, "edited": false, "score": 1, "creation_date": 1421265420, "post_id": 27951130, "comment_id": 44297807, "body": "If the 2 in your infile looks like a 2, the character value will not be 2. It will be 50, which is the ascii key for a 2. For a first try, if you want to get the value of a digit, just subtract &#39;0&#39;."}, {"owner": {"reputation": 173, "user_id": 4081331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da262a207feeeb1143e2d8755d7a324d?s=128&d=identicon&r=PG&f=1", "display_name": "GiH", "link": "https://stackoverflow.com/users/4081331/gih"}, "edited": false, "score": 0, "creation_date": 1421265810, "post_id": 27951130, "comment_id": 44298015, "body": "That&#39;s a good point, Drew. Actually the assignment does give examples and they look much like that, however they do go above 9. I guess I missed that important detail so I suppose I will need to check if either the first or second element are integers. If they both are I will have to rotate a number of times greater than 9, depending on that specific number."}], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4081331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da262a207feeeb1143e2d8755d7a324d?s=128&d=identicon&r=PG&f=1", "display_name": "GiH", "link": "https://stackoverflow.com/users/4081331/gih"}, "edited": false, "score": 0, "creation_date": 1421265624, "post_id": 27951302, "comment_id": 44297919, "body": "Thanks, I didn&#39;t know that was an option! Unfortunately, however, rotation = 0 still."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1421266006, "last_edit_date": 1421266006, "creation_date": 1421265317, "answer_id": 27951302, "question_id": 27951130, "link": "https://stackoverflow.com/questions/27951130/comparing-a-char/27951302#27951302", "title": "Comparing a char", "body": "<p>Instead of formatted input, use unformatted input. Use</p>\n\n<pre><code>data[j+1] = infile.get();\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>infile &gt;&gt; data[j+1];\n</code></pre>\n\n<p>Also, the comparison of <code>i</code> to <code>data[1]</code> needs to be different.</p>\n\n<pre><code>for(int i = 1; i &lt; 27; i++)\n{\n   if( i == data[1]-'0')\n            //      ^^^ need this to get the number 2 from the character '2'.\n   {\n      rotation = i;\n      std::cout &lt;&lt; \"Rotation: \" &lt;&lt; rotation &lt;&lt; std::endl;\n   }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421266280, "post_id": 27951356, "comment_id": 44298240, "body": "Please don&#39;t put <code>(int)</code> in front of anything, these C-style casts are dangerous and should be avoided in C++. That said, why should you need to cast anything for comparison?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421348282, "post_id": 27951356, "comment_id": 44334488, "body": "I disagree. To me, the comparison <code>f(x) = f(y)</code> is not clearer than <code>x = y</code> because it requires knowledge about <code>f</code>. Also, the two comparisons are not equivalent for all possible <code>f</code>."}, {"owner": {"reputation": 427, "user_id": 4396876, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/puw9v.jpg?s=128&g=1", "display_name": "Mackiavelli", "link": "https://stackoverflow.com/users/4396876/mackiavelli"}, "reply_to_user": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421352854, "post_id": 27951356, "comment_id": 44336959, "body": "LOL at tha tlast statement."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421486331, "post_id": 27951356, "comment_id": 44385611, "body": "Do you want me to explain it further, so that you understand?"}], "owner": {"reputation": 427, "user_id": 4396876, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/puw9v.jpg?s=128&g=1", "display_name": "Mackiavelli", "link": "https://stackoverflow.com/users/4396876/mackiavelli"}, "is_accepted": false, "score": 0, "last_activity_date": 1421265487, "creation_date": 1421265487, "answer_id": 27951356, "question_id": 27951130, "link": "https://stackoverflow.com/questions/27951130/comparing-a-char/27951356#27951356", "title": "Comparing a char", "body": "<p>First of all you have to cast the data chars to int before comparing them, just put (int) before the element of the char array and you will be okay.</p>\n\n<p>Second, keep in mind that the ASCII table doesn't start with letters. There are some funny symbols up until 60-so element. So when you make i to be equal to data[1] you are practically giving it a number way higher than 27 so the loop stops.</p>\n"}, {"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421266725, "post_id": 27951459, "comment_id": 44298449, "body": "The operation is much easier performed by looping through the original text string rather than looping through the alphabet."}], "owner": {"reputation": 184, "user_id": 2062840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lhpeO.png?s=128&g=1", "display_name": "Quip11", "link": "https://stackoverflow.com/users/2062840/quip11"}, "is_accepted": false, "score": 0, "last_activity_date": 1421265853, "creation_date": 1421265853, "answer_id": 27951459, "question_id": 27951130, "link": "https://stackoverflow.com/questions/27951130/comparing-a-char/27951459#27951459", "title": "Comparing a char", "body": "<p>The ASCII integer value of uppercase letters ranges from 65 to 90.  In C and its descendents, you can just use 'A' through 'Z' in your for loop:</p>\n\n<p>change</p>\n\n<pre><code>for(int i = 1; i &lt; 27; i++)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>for(int i = 'A'; i &lt;= 'Z'; i++)\n</code></pre>\n\n<p>and you'll be comparing uppercase values.  The statement</p>\n\n<pre><code>cout &lt;&lt; rotation;\n</code></pre>\n\n<p>will print the ASCII values read from <code>infile</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1421269722, "post_id": 27951668, "comment_id": 44299918, "body": "I think using a string that contains the letters <code>A...Z</code> doesn&#39;t make code clearer. Better subtract <code>&#39;A&#39;</code>, do calculations and add <code>&#39;A&#39;</code> back. Also, I think the divisor should be <code>strlen</code>, not <code>sizeof</code>. Or just <code>26</code> if you remove the list of the letters."}], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1421266653, "creation_date": 1421266653, "answer_id": 27951668, "question_id": 27951130, "link": "https://stackoverflow.com/questions/27951130/comparing-a-char/27951668#27951668", "title": "Comparing a char", "body": "<p>You can do this using <code>modulo</code> math, since characters can be treated as numbers.<br>\nLet's assume only uppercase letters (which makes the concept easier to understand).  </p>\n\n<p>Given:</p>\n\n<pre><code>static const char letters[] = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\nconst std::string original_text = \"MY DOG EATS HOMEWORK\";\nstd::string       encrypted_text;  \n</code></pre>\n\n<p>The loop:</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; original_text.size(); ++i)\n{\n</code></pre>\n\n<p>Let's convert the character in the string to a number:  </p>\n\n<pre><code>  char c = original_text[i];\n  unsigned int cypher_index = c - 'A';\n</code></pre>\n\n<p>The <code>cypher_index</code> now contains the alphabetic offset of the letter, e.g. 'A' has index of 0.<br>\nNext, we rotate the <code>cypher_index</code> by adding an offset and using <em>modulo</em> arithmetic to \"circle around\":  </p>\n\n<pre><code>  cypher_index += (rotation_character - 'A'); // Add in the offset.\n  cypher_index = cypher_index % sizeof(letters); // Wrap around.\n</code></pre>\n\n<p>Finally, the new, shifted, letter is created by looking up in the <code>letters</code> array and append to the encrypted string:</p>\n\n<pre><code>    encrypted_text += letters[cypher_index];\n  } // End of for loop.\n</code></pre>\n\n<p>The <em>modulo</em> operation, using the <code>%</code> operator, is great for when a \"wrap around\" of indices is needed.  </p>\n\n<p>With some more arithmetic and arrays, the process can be expanded to handle all letters and also some symbols.  </p>\n"}, {"comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 0, "creation_date": 1421269936, "post_id": 27951883, "comment_id": 44300047, "body": "It&#39;s not enough to just add the <code>rotation</code>: the ciphering should wrap-around, converting e.g. <code>Z</code> to <code>A</code> when <code>rotation = 1</code>, probably also leaving non-letters without change."}], "owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "is_accepted": false, "score": 0, "last_activity_date": 1421268060, "last_edit_date": 1421268060, "creation_date": 1421267448, "answer_id": 27951883, "question_id": 27951130, "link": "https://stackoverflow.com/questions/27951130/comparing-a-char/27951883#27951883", "title": "Comparing a char", "body": "<p>How much of the standard library are you permitted to use? Something like this would likely work better:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nint main()\n{\n    int rotation = 0;\n    std::string data;\n\n    std::stringstream ss( \"2ABCD\" );\n    ss &gt;&gt; rotation;\n    ss &gt;&gt; data;\n\n    for ( int i = 0; i &lt; data.length(); i++ ) {\n        data[i] += rotation;\n    }\n\n    // C++11\n    // for ( auto&amp; c : data ) {\n    //     c += rotation;\n    // }\n\n    std::cout &lt;&lt; data;\n}\n</code></pre>\n\n<p><a href=\"http://rextester.com/FJXG25641\" rel=\"nofollow\">Live demo</a></p>\n\n<p>I used a stringstream instead of a file stream for this example, so just replace <code>ss</code> with your <code>infile</code>. Also note that I didn't handle the wrap-around case (i.e., Z += 1 isn't going to give you A; you'll need to do some extra handling here), because I wanted to leave that to you :)</p>\n\n<p>The reason your rotation is always 0 is because <code>i</code> is never <code>== data[1]</code>. ASCII character digits do not have the same underlying numeric value as their integer representations. For example, if <code>data[1]</code> is '5', it's integer value is actually 49. <strong>Hint</strong>: you'll need to know these values when handle the wrap-around case. Do a quick google for \"ANSI character set\" and you'll see all the different values.</p>\n\n<p>Your determination of the rotation is also flawed in that you're only checking <code>data[1]</code>. What happens if you have a two-digit number, like 10?</p>\n"}], "owner": {"reputation": 173, "user_id": 4081331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da262a207feeeb1143e2d8755d7a324d?s=128&d=identicon&r=PG&f=1", "display_name": "GiH", "link": "https://stackoverflow.com/users/4081331/gih"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1421268060, "creation_date": 1421264727, "last_edit_date": 1421265209, "question_id": 27951130, "link": "https://stackoverflow.com/questions/27951130/comparing-a-char", "title": "Comparing a char", "body": "<p>So, I am trying to figure out the best/simplest way to do this. For my algorithms class we are supposed read in a string (containing up to 40 characters) from a file and use the first character of the string (data[1]...we are starting the array at 1 and wanting to use data[0] as something else later) as the number of rotations(up to 26) to rotate letters that follow (it's a Caesar cipher, basically). </p>\n\n<p>An example of what we are trying to do is read in from a file something like : 2ABCD and output CDEF.\nI've definitely made attempts, but I am just not sure how to compare the first letter in the array char[] to see which number, up to 26, it is. This is how I had it implemented (not the entire code, just the part that I'm having issues with): </p>\n\n<pre><code>int rotation = 0;\nchar data[41];\n\nfor(int i = 0; i &lt; 41; i++)\n{\n    data[i] = 0;\n}\n\nint j = 0;\nwhile(!infile.eof())\n{\n    infile &gt;&gt; data[j+1];\n    j++;\n}\n\nfor(int i = 1; i &lt; 27; i++)\n{\n    if( i == data[1])\n    {\n        rotation = i;\n        cout &lt;&lt; rotation;\n    }\n}\n</code></pre>\n\n<p>My output is always 0 for rotation.\nI'm sure the problem lies in the fact that I am trying to compare a char to a number and will probably have to convert to ascii? But I just wanted to ask and see if there was a better approach and get some pointers in the right direction, as I am pretty new to C++ syntax.</p>\n\n<p>Thanks, as always.</p>\n"}, {"tags": ["c++", "graphics", "namespaces", "directx", "windows-phone-8.1"], "answers": [{"owner": {"reputation": 11321, "user_id": 4184842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mD03.jpg?s=128&g=1", "display_name": "Peter Torr - MSFT", "link": "https://stackoverflow.com/users/4184842/peter-torr-msft"}, "is_accepted": false, "score": 1, "last_activity_date": 1421298687, "creation_date": 1421298687, "answer_id": 27957182, "question_id": 27951098, "link": "https://stackoverflow.com/questions/27951098/upgrading-from-windows-phone-8-project-to-windows-phone-8-1/27957182#27957182", "title": "Upgrading from Windows Phone 8 project to Windows Phone 8.1", "body": "<p><code>Windows::Phone::Input::Interop</code> was specific to Silverlight &lt;--> DX interop and is no longer needed. </p>\n\n<p>For Universal apps, you should be able to use the <a href=\"http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.core.corewindow.aspx\" rel=\"nofollow\"><code>CoreWindow</code></a> input events or just listen to the events directly on the <a href=\"http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.swapchainpanel.aspx\" rel=\"nofollow\"><code>SwapChainPanel</code></a> or <a href=\"http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.swapchainbackgroundpanel.aspx\" rel=\"nofollow\"><code>SwapChainBackgroundPanel</code></a> classes.</p>\n\n<p>VoIP is not currently supported in Universal apps I'm afraid.</p>\n"}], "owner": {"reputation": 103, "user_id": 1864830, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/2ceb5361e3cb8c3c6fc9d0163e5345dd?s=128&d=identicon&r=PG&f=1", "display_name": "SalmanKhan", "link": "https://stackoverflow.com/users/1864830/salmankhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421298687, "creation_date": 1421264599, "question_id": 27951098, "link": "https://stackoverflow.com/questions/27951098/upgrading-from-windows-phone-8-project-to-windows-phone-8-1", "title": "Upgrading from Windows Phone 8 project to Windows Phone 8.1", "body": "<p>Are there any equivalent for Windows::Phone::Input::Interop and Windows::Phone::Networking::Voip namespaces in Windows phone 8.1. These are supported in Windows Phone 8 and Windows phone silverlight 8.1, but not in Windows phone 8.1.</p>\n"}, {"tags": ["c#", "c++", "c", "performance", "caching"], "comments": [{"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "edited": false, "score": 0, "creation_date": 1421264620, "post_id": 27951041, "comment_id": 44297350, "body": "&quot;Cache associativity&quot; is a good search term.  Hopefully you can replace your second paragraph in your brain with a better model of the specific thing you want to avoid."}, {"owner": {"reputation": 23064, "user_id": 3177124, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/65014fdf3cfd04b1452620aeb54dcede?s=128&d=identicon&r=PG&f=1", "display_name": "abligh", "link": "https://stackoverflow.com/users/3177124/abligh"}, "edited": false, "score": 0, "creation_date": 1421265849, "post_id": 27951041, "comment_id": 44298037, "body": "This is surely nothing to do with C#, C++ or C. Particularly not C#."}, {"owner": {"reputation": 6932, "user_id": 158109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AjbOn.png?s=128&g=1", "display_name": "Xenoprimate", "link": "https://stackoverflow.com/users/158109/xenoprimate"}, "edited": false, "score": 0, "creation_date": 1421266003, "post_id": 27951041, "comment_id": 44298107, "body": "I chose those languages because they&#39;re the languages you most commonly have to think about theses sorts of problems with. And yes, I think you do in C# too."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 0, "creation_date": 1421266075, "post_id": 27951041, "comment_id": 44298143, "body": "C# aligns its object fields just like C++, to improve performance. The compiler does that for you, you don&#39;t have to worry about it."}, {"owner": {"reputation": 6932, "user_id": 158109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AjbOn.png?s=128&g=1", "display_name": "Xenoprimate", "link": "https://stackoverflow.com/users/158109/xenoprimate"}, "edited": false, "score": 0, "creation_date": 1421266163, "post_id": 27951041, "comment_id": 44298185, "body": "It aligns its fields (unless you override the behaviour), but I don&#39;t know that arrays of structs are aligned on any particular boundary (very unlikely considering they&#39;re moved by the GC), so the page alignment issue remains. Also, it is possible to manually allocate memory by using AllocHGlobal etc."}, {"owner": {"reputation": 46944, "user_id": 3764814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d02a4923abd2ca6d7593f031e4222c2?s=128&d=identicon&r=PG", "display_name": "Lucas Trzesniewski", "link": "https://stackoverflow.com/users/3764814/lucas-trzesniewski"}, "edited": false, "score": 1, "creation_date": 1421266917, "post_id": 27951041, "comment_id": 44298529, "body": "You don&#39;t control <i>where</i> the allocated space goes, even with <code>AllocHGlobal</code>. And your program only sees <i>virtual</i> memory, which makes matters even more complicated. Also, .NET&#39;s GC is <i>heavily</i> optimized. Unless you <b>really</b> do have a performance issue that is validated by profiling your code and traces back to this (which is really unlikely), you simply shouldn&#39;t bother."}, {"owner": {"reputation": 6932, "user_id": 158109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AjbOn.png?s=128&g=1", "display_name": "Xenoprimate", "link": "https://stackoverflow.com/users/158109/xenoprimate"}, "edited": false, "score": 0, "creation_date": 1421277349, "post_id": 27951041, "comment_id": 44303499, "body": "It is still possible to align allocations in .NET, see <a href=\"http://stackoverflow.com/questions/13413323/allocate-memory-with-16-byte-alignment\" title=\"allocate memory with 16 byte alignment\">stackoverflow.com/questions/13413323/&hellip;</a>"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1421292090, "post_id": 27951041, "comment_id": 44307298, "body": "For X86 processors, hashing of addresses is partially avoided with the  (wiki link) <a href=\"http://en.wikipedia.org/wiki/Translation_lookaside_buffer\" rel=\"nofollow noreferrer\">translation look aside buffer</a>, which is often implemented using a content addressable memory (aka associative memory), where all the compares for an address match are performed in parallel."}], "answers": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "is_accepted": false, "score": 2, "last_activity_date": 1421268188, "creation_date": 1421268188, "answer_id": 27952045, "question_id": 27951041, "link": "https://stackoverflow.com/questions/27951041/memory-alignment-vs-page-alignment/27952045#27952045", "title": "Memory Alignment vs Page Alignment", "body": "<p>I don't think you can get a general rule for this. It depends on the processor you are using, i.e. the MMU and cache implementation of the underlying system. That will differ from system to system. So if you want top-performance, you'll need to understand all the low level details of your current system. In general I would expect that the benefit of aligning large memory blocks to a power-of-two boundary is limited.</p>\n"}, {"owner": {"reputation": 2959, "user_id": 786437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/030f2d74a6cbdbe864e7c5f4038e8d10?s=128&d=identicon&r=PG", "display_name": "jstine", "link": "https://stackoverflow.com/users/786437/jstine"}, "is_accepted": true, "score": 1, "last_activity_date": 1421426498, "creation_date": 1421426498, "answer_id": 27988660, "question_id": 27951041, "link": "https://stackoverflow.com/questions/27951041/memory-alignment-vs-page-alignment/27988660#27988660", "title": "Memory Alignment vs Page Alignment", "body": "<p>If performance is particularity critical to your application, and your application is typically iterating over known datasets (in type and size), then it is important to know and understand the effects of MMUs, L-caches, and cache lines.  Not because you can really avoid those problems ahead-of-time, but because you might need to identify them after-the-fact while staring at profiling results and trying to puzzle out why something took way longer than it used to or \"normally should.\"  And -- if you're lucky and the dataset is enough within your control -- you can then tweak things to resolve some sort of cpu cache performance issue.</p>\n\n<p>Unfortunately most applications don't have the luxury of iterating over known datasets, and knowing their target hardware type.  That is something that is fairly exclusive to game and multimedia application development, and also operating systems engineering.  For most of the rest of the world's applications, improving the cache profile for one particular dataset of some particular size means decreasing it for another.</p>\n\n<p>Finally, even the 'rule of thumb' about \"aligning our variables to an N-byte boundary\" is subject to underlying hardware.  Most newer desktop-grade x86 architectures (most made after roughly 2011) prefer packed data rather than aligned data, because the cost of loading words packed across a cacheline boundary has become cheaper than having to load more total cachelines to represent the same dataset.  But on a mobile device running ARM?  Alignment is still pretty critical.</p>\n\n<p>More keywords for you to search on, for further education:  <em>cache coloring</em> and <em>cache eviction</em>.  But again, this is all very dependent on target CPUs and there are unfortunately few (or no) generalizations to be had.</p>\n"}], "owner": {"reputation": 6932, "user_id": 158109, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/AjbOn.png?s=128&g=1", "display_name": "Xenoprimate", "link": "https://stackoverflow.com/users/158109/xenoprimate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 2, "accepted_answer_id": 27988660, "answer_count": 2, "score": 0, "last_activity_date": 1421426498, "creation_date": 1421264373, "question_id": 27951041, "link": "https://stackoverflow.com/questions/27951041/memory-alignment-vs-page-alignment", "title": "Memory Alignment vs Page Alignment", "body": "<p>Often we hear that aligning our variables to an N-byte boundary in memory can improve performance (by preventing the CPU from having to load two separate 'words' in to the cache to read our variable).</p>\n\n<p>On the other hand, we also hear (less often) that aligning a large block of memory (array/buffer) to a nice, round power-of-two address can be bad because the hashing function that allocates memory addresses to cache addresses is no longer uniform (this is called page alignment).</p>\n\n<p>Therefore, my question is, is there some sort of rule or threshold point about when we should deliberately misalign data to avoid the problem of page alignment; and when not to, to gain the benefits of standard memory alignment?</p>\n"}, {"tags": ["c++", "arrays", "buffer"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 4, "creation_date": 1421263376, "post_id": 27950794, "comment_id": 44296652, "body": "<code>uint8* buffers[bufferCount]</code>, then make the pointers point to newed arrays. Or use a vector and save yourself a lot of future pain."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 4, "creation_date": 1421263493, "post_id": 27950794, "comment_id": 44296726, "body": "The proper syntax would be: <code>std::vector&lt;std::basic_string&lt;uint8&gt;&gt;(bufferCount);</code>"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1421266076, "post_id": 27950794, "comment_id": 44298144, "body": "@JerryCoffin any reason for using <code>basic_string</code> rather than another <code>vector</code>?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1421266321, "post_id": 27950794, "comment_id": 44298254, "body": "@MarkRansom: At least in theory, the tighter requirements on <code>basic_string</code> (e.g., elements can&#39;t throw when copied) allow slightly better optimization. Whether that really works in practice may be open to more question."}], "answers": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 1, "last_activity_date": 1421263669, "creation_date": 1421263669, "answer_id": 27950885, "question_id": 27950794, "link": "https://stackoverflow.com/questions/27950794/c-array-of-uint8-buffers/27950885#27950885", "title": "c++ array of uint8 buffers", "body": "<pre><code>#include &lt;vector&gt;\n\nusing byte_vector = std::vector&lt;uint8_t&gt;;\nusing byte_vector_vector = std::vector&lt;byte_vector&gt;;\n\n\n// example of a 1-dimension vector\nauto v1 = byte_vector(len, inital_value);\n\n// example of a [2, len] vector\nauto v_of_v = byte_vector_vector { \n  byte_vector(len, initial_value),\n  byte_vector(len, initial_value)\n};\n\n// print the uint8 at (0,1)\nstd::cout &lt;&lt; v_ov_v[0][1] &lt;&lt; std::endl;\n</code></pre>\n"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1421263846, "creation_date": 1421263846, "answer_id": 27950928, "question_id": 27950794, "link": "https://stackoverflow.com/questions/27950794/c-array-of-uint8-buffers/27950928#27950928", "title": "c++ array of uint8 buffers", "body": "<p>You asked</p>\n\n<blockquote>\n  <p>What's the syntax for allocating an array of such buffers?</p>\n</blockquote>\n\n<p>You can use:</p>\n\n<pre><code>uint8** buffers = new uint8*[bufferCount];\n</code></pre>\n\n<p>However, use this only if <code>std::vector</code> is absolutely not an option for some reason.</p>\n"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1421264298, "creation_date": 1421264298, "answer_id": 27951028, "question_id": 27950794, "link": "https://stackoverflow.com/questions/27950794/c-array-of-uint8-buffers/27951028#27951028", "title": "c++ array of uint8 buffers", "body": "<p>The way you initialize a 2d array is as follows:</p>\n\n<pre><code>uint8** buffers = new uint8*[bufferCount];\nfor (int i = 0; i &lt; bufferCount; i++)\n    buffers[i] = new uint8[len];\n</code></pre>\n"}], "owner": {"reputation": 563, "user_id": 466316, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1d8d318b49aebd4265b6da27efe6f8c6?s=128&d=identicon&r=PG", "display_name": "MrSparkly", "link": "https://stackoverflow.com/users/466316/mrsparkly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5421, "favorite_count": 0, "accepted_answer_id": 27951028, "answer_count": 3, "score": 1, "last_activity_date": 1421265581, "creation_date": 1421263278, "last_edit_date": 1421265581, "question_id": 27950794, "link": "https://stackoverflow.com/questions/27950794/c-array-of-uint8-buffers", "title": "c++ array of uint8 buffers", "body": "<p>In C++, I have an uint8 buffer of the length [len]. When allocating a single buffer I do this:</p>\n\n<pre><code>uint8 *buffer= new uint8[len];\n</code></pre>\n\n<p>What's the syntax for allocating an array of such buffers? This gives me a syntax error:</p>\n\n<pre><code>uint8** buffers = new uint8[len]*[bufferCount];\n</code></pre>\n"}, {"tags": ["c++", "c++11", "boost"], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 2581720, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/344dafd104f6efeb5ab6002cfc803e24?s=128&d=identicon&r=PG", "display_name": "kotu", "link": "https://stackoverflow.com/users/2581720/kotu"}, "edited": false, "score": 0, "creation_date": 1421313049, "post_id": 27950836, "comment_id": 44313601, "body": "Thank you, it works. So there is a mistake in tutorial in boost/documentation."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 90, "user_id": 2581720, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/344dafd104f6efeb5ab6002cfc803e24?s=128&d=identicon&r=PG", "display_name": "kotu", "link": "https://stackoverflow.com/users/2581720/kotu"}, "edited": false, "score": 1, "creation_date": 1421314285, "post_id": 27950836, "comment_id": 44314253, "body": "@kotu no, actually not; in the actually <code>example&#47;multiple_source.cpp</code> there is this helper <a href=\"http://paste.ubuntu.com/9754725/\" rel=\"nofollow noreferrer\">paste.ubuntu.com/9754725</a> to make it JustWork\u2122 :)"}, {"owner": {"reputation": 90, "user_id": 2581720, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/344dafd104f6efeb5ab6002cfc803e24?s=128&d=identicon&r=PG", "display_name": "kotu", "link": "https://stackoverflow.com/users/2581720/kotu"}, "edited": false, "score": 0, "creation_date": 1421328215, "post_id": 27950836, "comment_id": 44321756, "body": "ok. Now everything is clear. I&#39;ve just started my adventure with boost ;]"}], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 2, "last_activity_date": 1421263461, "creation_date": 1421263461, "answer_id": 27950836, "question_id": 27950777, "link": "https://stackoverflow.com/questions/27950777/boostpo-and-cannot-bind-to-stdbasic-ostreamchar/27950836#27950836", "title": "boost::PO and cannot bind to \u2018std::basic_ostream&lt;char&gt;&amp;&amp;\u2019", "body": "<p>You can't print a <code>vector&lt;std::string&gt;</code> like that. This has nothing to do with Boost or Program Options:</p>\n\n<pre><code>std::vector&lt;std::string&gt; v = vm[\"include-path\"].as&lt; std::vector&lt;std::string&gt; &gt;();\nstd::cout &lt;&lt; \"Include paths are: \";\nfor (auto&amp; p : v)\n    std::cout &lt;&lt; \"\\n\\t\" &lt;&lt; p;\n</code></pre>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/27612d184975bf38\" rel=\"nofollow\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/program_options.hpp&gt;\n#include &lt;iostream&gt;\n\nnamespace po = boost::program_options;\n\nint main(int argc, char** argv) {\n    po::options_description desc(\"Allowed options\");\n    desc.add_options()\n        (\"include-path,I\", po::value&lt; std::vector&lt;std::string&gt; &gt;(), \"include path\");\n\n    po::variables_map vm;\n    po::store(po::parse_command_line(argc, argv, desc), vm);\n    po::notify(vm);\n\n    if (vm.count(\"include-path\"))\n    {\n        std::vector&lt;std::string&gt; v = vm[\"include-path\"].as&lt; std::vector&lt;std::string&gt; &gt;();\n        std::cout &lt;&lt; \"Include paths are: \";\n        for (auto&amp; p : v)\n            std::cout &lt;&lt; \"\\n\\t\" &lt;&lt; p;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 2581720, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/344dafd104f6efeb5ab6002cfc803e24?s=128&d=identicon&r=PG", "display_name": "kotu", "link": "https://stackoverflow.com/users/2581720/kotu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1421263461, "creation_date": 1421263225, "last_edit_date": 1495542437, "question_id": 27950777, "link": "https://stackoverflow.com/questions/27950777/boostpo-and-cannot-bind-to-stdbasic-ostreamchar", "title": "boost::PO and cannot bind to \u2018std::basic_ostream&lt;char&gt;&amp;&amp;\u2019", "body": "<p>I'm writing a program with use of boost::program_option but I can't use one of its feature:</p>\n\n<pre><code> po::options_description desc(\"Allowed options\");\ndesc.add_options()\n    (\"include-path,I\", po::value&lt; std::vector&lt;std::string&gt; &gt;(), \"include path\");\n\npo::variables_map vm;\npo::store(po::parse_command_line(argc, argv, desc), vm);\npo::notify(vm);\n\nif (vm.count(\"include-path\"))\n{\n    std::cout &lt;&lt; \"Include paths are: \" \n         &lt;&lt; vm[\"include-path\"].as&lt; std::vector&lt;std::string&gt; &gt;() &lt;&lt; \"\\n\";\n}\n</code></pre>\n\n<p>It's pretty the same as in boost.tutorial (<a href=\"http://www.boost.org/doc/libs/1_57_0/doc/html/program_options/tutorial.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_57_0/doc/html/program_options/tutorial.html</a>)</p>\n\n<p>I Get such error:\nerror: cannot bind \u2018std::basic_ostream\u2019 lvalue to \u2018std::basic_ostream&amp;&amp;\u2019\nstd::cout &lt;&lt; \"Include paths are: \" &lt;&lt; vm[\"include-path\"].as>() &lt;&lt; std::endl; </p>\n\n<p>I've read some topics such as:\n<a href=\"https://stackoverflow.com/questions/13347530/error-cannot-bind-stdbasic-ostreamchar-lvalue-to-stdbasic-ostreamchar\">error: cannot bind \u2018std::basic_ostream\u2019 lvalue to \u2018std::basic_ostream&amp;&amp;\u2019</a>\n<a href=\"https://stackoverflow.com/questions/10651161/overloading-operator-cannot-bind-lvalue-to-stdbasic-ostreamchar\">Overloading operator&lt;&lt;: cannot bind lvalue to \u2018std::basic_ostream&amp;&amp;\u2019</a></p>\n\n<p>But I don't see connection with my problem.\nMy platform: Fedora 20, Gcc 4.8.3, boost_1_57_0, I'm using -std=c++11 flat to compile code.</p>\n"}, {"tags": ["c++", "c++11", "language-lawyer"], "comments": [{"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1421263764, "post_id": 27950769, "comment_id": 44296867, "body": "I&#39;m confused, isn&#39;t the second section you&#39;re quoting dealing with references?   Which things do you think are incompatible?"}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1421264036, "post_id": 27950769, "comment_id": 44297022, "body": "@mbgda The first statement says that a function doesn&#39;t return an array and the second statement mentions the term <code>array prvalue</code>, which seem to be incompatible. But Quentin showed another possibility for producing an array prvalue."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "reply_to_user": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1421265404, "post_id": 27950769, "comment_id": 44297792, "body": "@mbgda <code>array prvalue is effectively just a reference to an array</code> This is not correct. An lvalue reference is an lvalue and an rvalue reference is an xvalue. Thus, references are never prvalues."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1421265528, "post_id": 27950769, "comment_id": 44297872, "body": "I don&#39;t think you really read that in context.  I didn&#39;t mean it&#39;s a reference in language terms (as in <code>&amp;</code>) - but it&#39;s a reference in the meaning that the memory allocated shouldn&#39;t have to be copied over, the compiler is able to generate code that can point to the already-created object after you transfer ownership - kind of like how copy elision works for function returns.  However you raise a good point that the comment is a little ambiguous there - thanks for pointing it out."}], "answers": [{"comments": [{"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 0, "creation_date": 1421263899, "post_id": 27950874, "comment_id": 44296945, "body": "That was clever. Thanks."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1421264914, "post_id": 27950874, "comment_id": 44297526, "body": "Quick question.  That isn&#39;t technically a prvalue, is it?  Doesn&#39;t a prvalue specifically refer to an object that does not exist except as an anonymous temporary rvalue, such as a function return value?  Edit - nevermind, misread it.  I see that is <i>is</i> an anonymous temporary.  Leaving my description about prvalue though since it may be helpful to others."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1421267642, "post_id": 27950874, "comment_id": 44298861, "body": "One more thing to expand on this... this doesn&#39;t exactly (or at least completely) address OP&#39;s question.  You could create <code>r</code> in a function and try to return it but you&#39;re going to be returning a reference to a temporary value in this case, so it doesn&#39;t <i>quite</i> address how a valid array prvalue can be returned from a function.  <a href=\"http://stackoverflow.com/a/27281568/4421195\"><b>This post</b></a> addresses how an array can be returned as a subobject prvalue."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 1, "creation_date": 1421333387, "post_id": 27950874, "comment_id": 44324854, "body": "@mbgda The question wasn&#39;t how to return an array from a function (it&#39;s explicitly disallowed), but if not being able to do so contradicted the existence of array prvalues altogether. Hence, another way of getting an array prvalue."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 0, "creation_date": 1421333908, "post_id": 27950874, "comment_id": 44325237, "body": "I see what you&#39;re saying.  I didn&#39;t realize OP was questioning how an array prvlaue could exist in the first place - thanks for clarifying (+1).  I was under the impression OP was asking how an array prvalue can be returned from a function - which (as you said) it cannot.  If it&#39;s part of an non-array aggregate prvalue then it works, but of course at that point the prvalue is not of type array so its a different situation."}], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 5, "last_activity_date": 1421263619, "creation_date": 1421263619, "answer_id": 27950874, "question_id": 27950769, "link": "https://stackoverflow.com/questions/27950769/arent-these-two-statements-incompatible-in-n4140/27950874#27950874", "title": "Aren&#39;t these two statements incompatible in N4140?", "body": "<pre><code>int main() {\n    using Arr = int[];\n    auto&amp;&amp; r = Arr{1, 2, 3, 4, 5};\n    return 0;\n}\n</code></pre>\n\n<p>Here <code>r</code> binds to a prvalue of array type.</p>\n"}], "owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 27950874, "answer_count": 1, "score": 0, "last_activity_date": 1421263619, "creation_date": 1421263183, "question_id": 27950769, "link": "https://stackoverflow.com/questions/27950769/arent-these-two-statements-incompatible-in-n4140", "title": "Aren&#39;t these two statements incompatible in N4140?", "body": "<p>Paragraph \u00a78.3.5/8 (emphasis mine):</p>\n\n<blockquote>\n  <p>If the type of a parameter includes a type of the form \u201cpointer to\n  array of unknown bound of T\u201d or \u201creference to array of unknown bound\n  of T,\u201d the program is ill-formed. <strong>Functions shall not have a return\n  type of type array</strong> or function, although they may have a return type\n  of type pointer or reference to such things. There shall be no arrays\n  of functions, although there can be arrays of pointers to functions.</p>\n</blockquote>\n\n<p>Bullet points (5.2.1) and (5.2.1.1) of \u00a78.5.3/5 (emphasis is mine):</p>\n\n<blockquote>\n  <p>(5.2.1)      \u2014 If the initializer expression</p>\n  \n  <p>(5.2.1.1)     \u2014 is an xvalue (but not a bit-field), class prvalue,\n  <strong>array prvalue</strong> or function lvalue and \u201ccv1 T1\u201d is reference-compatible with \u201ccv2 T2\u201d, or</p>\n</blockquote>\n\n<p>If I'm wrong with my assumption (in the title), I would appreciate having an example producing a prvalue array.</p>\n"}, {"tags": ["c++", "function", "struct", "header"], "comments": [{"owner": {"reputation": 2836, "user_id": 1521926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uqkPE.jpg?s=128&g=1", "display_name": "philippe lhardy", "link": "https://stackoverflow.com/users/1521926/philippe-lhardy"}, "edited": false, "score": 1, "creation_date": 1421262798, "post_id": 27950612, "comment_id": 44296346, "body": "don&#39;t declare twice struct Point, but in your Point.cpp, #include &quot;Point.h&quot; then define bool Point::simsalabim(int x, int y)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1421263187, "post_id": 27950612, "comment_id": 44296554, "body": "Looks like you want <code>bool simsalabim() const;</code> and refer to the members of the point"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 3, "creation_date": 1421262856, "post_id": 27950680, "comment_id": 44296376, "body": "Let&#39;s simplify: <code>return x &gt;= y;</code>.  One line content."}, {"owner": {"reputation": 83, "user_id": 3396265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505f821279ff2c34ca7f80432ed1d551?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/3396265/nuke"}, "edited": false, "score": 0, "creation_date": 1421262915, "post_id": 27950680, "comment_id": 44296403, "body": "No, there has to be a boolean return, sry didn&#39;t mention"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 83, "user_id": 3396265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505f821279ff2c34ca7f80432ed1d551?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/3396265/nuke"}, "edited": false, "score": 0, "creation_date": 1421262957, "post_id": 27950680, "comment_id": 44296427, "body": "@user3396265: <code>x &gt;= y</code> <i>is</i> &quot;a boolean return&quot;"}, {"owner": {"reputation": 83, "user_id": 3396265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505f821279ff2c34ca7f80432ed1d551?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/3396265/nuke"}, "edited": false, "score": 0, "creation_date": 1421262977, "post_id": 27950680, "comment_id": 44296443, "body": "there also needs to be a declaration of and y in Point.cpp"}, {"owner": {"reputation": 639, "user_id": 4189215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1839e6135c1f59d86d8aeebdf3285cd?s=128&d=identicon&r=PG&f=1", "display_name": "progsource", "link": "https://stackoverflow.com/users/4189215/progsource"}, "edited": false, "score": 1, "creation_date": 1421263001, "post_id": 27950680, "comment_id": 44296454, "body": "but they are not static..? they are declared in .h file"}, {"owner": {"reputation": 83, "user_id": 3396265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505f821279ff2c34ca7f80432ed1d551?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/3396265/nuke"}, "edited": false, "score": 0, "creation_date": 1421263073, "post_id": 27950680, "comment_id": 44296488, "body": "but if so, how am i supposed to write the return type of that function? bool Point::simsalabim(...)  And thanks yes, it should be boolean."}, {"owner": {"reputation": 639, "user_id": 4189215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1839e6135c1f59d86d8aeebdf3285cd?s=128&d=identicon&r=PG&f=1", "display_name": "progsource", "link": "https://stackoverflow.com/users/4189215/progsource"}, "edited": false, "score": 1, "creation_date": 1421263095, "post_id": 27950680, "comment_id": 44296496, "body": "return type is in front of it"}, {"owner": {"reputation": 83, "user_id": 3396265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505f821279ff2c34ca7f80432ed1d551?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/3396265/nuke"}, "edited": false, "score": 0, "creation_date": 1421263217, "post_id": 27950680, "comment_id": 44296570, "body": "doesn&#39;t work debugger says: not resolved external in main 1&gt;Uebung8_1_main.obj : error LNK2019: Verweis auf nicht aufgel&#246;stes externes Symbol &quot;&quot;public: bool __thiscall Point::simsalabim(int,int)&quot; (?simsalabim@Point@@QAE_NHH@Z)&quot; in Funktion &quot;_main&quot;."}, {"owner": {"reputation": 639, "user_id": 4189215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1839e6135c1f59d86d8aeebdf3285cd?s=128&d=identicon&r=PG&f=1", "display_name": "progsource", "link": "https://stackoverflow.com/users/4189215/progsource"}, "edited": false, "score": 1, "creation_date": 1421263276, "post_id": 27950680, "comment_id": 44296604, "body": "check your linker and compiler settings"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "reply_to_user": {"reputation": 83, "user_id": 3396265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505f821279ff2c34ca7f80432ed1d551?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/3396265/nuke"}, "edited": false, "score": 0, "creation_date": 1421264831, "post_id": 27950680, "comment_id": 44297468, "body": "@user3396265 philippe lhardy aready mentioned the two declarations of Point in your code. That might cause the linker error, but I wonder why it compiles anyway."}], "owner": {"reputation": 639, "user_id": 4189215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1839e6135c1f59d86d8aeebdf3285cd?s=128&d=identicon&r=PG&f=1", "display_name": "progsource", "link": "https://stackoverflow.com/users/4189215/progsource"}, "is_accepted": false, "score": 2, "last_activity_date": 1421263350, "last_edit_date": 1421263350, "creation_date": 1421262796, "answer_id": 27950680, "question_id": 27950612, "link": "https://stackoverflow.com/questions/27950612/declaration-in-header-of-function-in-struct-in-c-easy/27950680#27950680", "title": "Declaration in header of function in struct in C++ (easy)", "body": "<p>I think Point.cpp should look more like</p>\n\n<pre><code>#include \"Point.h\"\n\nbool Point::simsalabim(int x, int y){\n    return x &gt;= y;\n\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 3396265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505f821279ff2c34ca7f80432ed1d551?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/3396265/nuke"}, "edited": false, "score": 0, "creation_date": 1421263367, "post_id": 27950775, "comment_id": 44296647, "body": "changed, similiar error: &gt;Uebung8_1_main.obj : error LNK2019: Verweis auf nicht aufgel&#246;stes externes Symbol &quot;&quot;public: bool __thiscall Point::simsalabim(void)&quot; (?simsalabim@Point@@QAE_NXZ)&quot; in Funktion &quot;_main&quot;. (point to not resolved external symbol)"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1421263397, "post_id": 27950775, "comment_id": 44296665, "body": "The content of the <code>if</code> statement could be placed into the <code>Point</code> class as <code>void swap_ordinates(void) {std::swap(x,y);}</code>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1421264413, "post_id": 27950775, "comment_id": 44297226, "body": "If you define the body of the function in the class (struct) definition, you can&#39;t redefine it in the separate C++ source file."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1421264506, "last_edit_date": 1421264506, "creation_date": 1421263199, "answer_id": 27950775, "question_id": 27950612, "link": "https://stackoverflow.com/questions/27950612/declaration-in-header-of-function-in-struct-in-c-easy/27950775#27950775", "title": "Declaration in header of function in struct in C++ (easy)", "body": "<p>You should change <code>simsalabim</code> to:</p>\n\n<pre><code>struct Point{\n   int x;\n   int y;\n   bool simsalabim(){\n      return (x &gt;= y);\n   }\n};\n</code></pre>\n\n<p>and change the way you call it:</p>\n\n<pre><code>if (point.simsalabim() != true){\n    int h = point.y;\n    point.y = point.x;\n    point.x = h;\n}\n</code></pre>\n\n<p>In Point.cpp, don't include the class declaration again. Just have the member function definition.</p>\n\n<p>Point.h:</p>\n\n<pre><code>struct Point{\n   int x;\n   int y;\n   bool simsalabim();\n};\n</code></pre>\n\n<p>Point.cc:</p>\n\n<pre><code>#include \"Point.h\"\n\nbool Point::simsalabim(){\n   return (x &gt;= y);\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 3396265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505f821279ff2c34ca7f80432ed1d551?s=128&d=identicon&r=PG&f=1", "display_name": "Nuke", "link": "https://stackoverflow.com/users/3396265/nuke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2824, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1421264506, "creation_date": 1421262490, "question_id": 27950612, "link": "https://stackoverflow.com/questions/27950612/declaration-in-header-of-function-in-struct-in-c-easy", "title": "Declaration in header of function in struct in C++ (easy)", "body": "<p>I have 3 files, 1 main.cpp, 1 Point.cpp and 1 Point.h which is needed for my homework.\nProblem: Ask fo two int-numbers, save in struct-object and output highest number first:\nmain.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Uebung8_1.h\"\nusing std::cout;\nusing std::cin;\nint main(){\nint z;\nint r;\ncout &lt;&lt; \"Enter x: \" &lt;&lt; \"\\n\";\ncin &gt;&gt; z;\ncout &lt;&lt; \"Enter y: \" &lt;&lt; \"\\n\";\ncin &gt;&gt; r;\nPoint point;\npoint.x = z;\npoint.y = r;\n\nif (point.simsalabim(point.x, point.y) != true){\n    int h = point.y;\n    point.y = point.x;\n    point.x = h;\n}\ncout &lt;&lt; \"\\n\" &lt;&lt; point.x &lt;&lt;\"\\n\" &lt;&lt; point.y;\n\nreturn 0;\n}\n</code></pre>\n\n<p>Point.cpp</p>\n\n<pre><code>struct Point{\nint x;\nint y;\nbool simsalabim(int x, int y){\n    if (x &gt;= y){\n        return true;\n    }\n    else{\n        return false;\n    }\n\n}\n};\n</code></pre>\n\n<p>Point.h</p>\n\n<pre><code>struct Point{ int x; int y; bool simsalabim(int x, int y);};\n</code></pre>\n\n<p>The code works alright without the declaration(and use) of simsalabim which should decide if x is smaller than y.\nI think the problem is in the header, however keep in mind that I should use a this structure of the program and cannot completley decide how it should look like. It should look somewhat like this.\nCan you help me get this work?</p>\n\n<p>Thx in advance</p>\n"}, {"tags": ["c++", "debugging", "bulletphysics"], "comments": [{"owner": {"reputation": 70803, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 1, "creation_date": 1421262721, "post_id": 27950598, "comment_id": 44296309, "body": "The debugger might slow things down, which could protect you from race conditions.  If you really want to solve the problem then I recommend reading <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">sscce.org</a>"}, {"owner": {"reputation": 6192, "user_id": 2041317, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/58b0m.png?s=128&g=1", "display_name": "cup", "link": "https://stackoverflow.com/users/2041317/cup"}, "edited": false, "score": 1, "creation_date": 1421262893, "post_id": 27950598, "comment_id": 44296392, "body": "If you can run it on Linux, try running it with valgrind.  It might be able to tell you where the access violation is and possibly all the other violations leading up to the crash."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1421263011, "post_id": 27950598, "comment_id": 44296459, "body": "You&#39;re running the program differently.  Doesn&#39;t matter if the difference is attach/not attach a debugger, running it by &quot;double-clicking on it from Explorer&quot; or from the command-line, etc -- a program that has bugs can and will exhibit different behavior."}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 2, "creation_date": 1421263906, "post_id": 27950598, "comment_id": 44296949, "body": "You should also note that in Debug mode memory is automatically 0-initialized; this is not the case in Release mode. If you forgot to properly initialize variables or memory you will be using garbage values in Release mode, which leads to undefined behavior. See <a href=\"http://stackoverflow.com/a/312352/1339615\">here</a> for more info."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1421265416, "post_id": 27950598, "comment_id": 44297801, "body": "You can compile with debug symbols but otherwise in release mode. The stacktrace is sometimes muddled a bit due to the compiler reordering things, but you should be able to figure out what&#39;s wrong."}], "answers": [{"owner": {"reputation": 63, "user_id": 1727424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506f298ac1958aa524620b15bf4177ba?s=128&d=identicon&r=PG", "display_name": "Karl Jacques", "link": "https://stackoverflow.com/users/1727424/karl-jacques"}, "is_accepted": false, "score": 2, "last_activity_date": 1421808572, "creation_date": 1421808572, "answer_id": 28058793, "question_id": 27950598, "link": "https://stackoverflow.com/questions/27950598/access-violation-in-release-without-debugger/28058793#28058793", "title": "Access violation in release without debugger", "body": "<p>In case this can help anybody in the future - this issue was caused by me performing a placement-new in a block of memory that wasn't big enough to hold the object, no doubt overwriting some memory belonging to bullet physics.</p>\n"}], "owner": {"reputation": 63, "user_id": 1727424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/506f298ac1958aa524620b15bf4177ba?s=128&d=identicon&r=PG", "display_name": "Karl Jacques", "link": "https://stackoverflow.com/users/1727424/karl-jacques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421808572, "creation_date": 1421262452, "question_id": 27950598, "link": "https://stackoverflow.com/questions/27950598/access-violation-in-release-without-debugger", "title": "Access violation in release without debugger", "body": "<p>I'm having a problem with my project where it operates fine when compiled in debug mode, and works fine in release mode while the debugger is attached in Visual Studio, but if I run it in release with no debugger, I get an access violation deep within bullet physics. </p>\n\n<p>The access violation seems to happen at <code>btVoronoiSimplexSolver::updateClosestVectorAndPoints(void) C++</code>, I only now this because Windows gives me the option to debug after the crash. I have the same problem when it's compiled with GCC on Linux, however.</p>\n\n<p>My question is: what changes between having the debugger attached and not attached that could cause this problem? Why doesn't this crash occur when the debugger is attached, and is there any way for me to set the debugger to catch this sort of problem?</p>\n"}, {"tags": ["c++", "c++11", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 28753, "user_id": 371184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cebee1b08fb960edf79a359af330391a?s=128&d=identicon&r=PG", "display_name": "Mike Cluck", "link": "https://stackoverflow.com/users/371184/mike-cluck"}, "edited": false, "score": 0, "creation_date": 1421262844, "post_id": 27950636, "comment_id": 44296371, "body": "Ahh, that all makes sense. You&#39;re right, I should have gone with <code>T*</code> but didn&#39;t quite understand why. Thanks!"}], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 4, "last_activity_date": 1421262997, "last_edit_date": 1421262997, "creation_date": 1421262600, "answer_id": 27950636, "question_id": 27950582, "link": "https://stackoverflow.com/questions/27950582/iterating-pointers-with-begin-and-end/27950636#27950636", "title": "Iterating Pointers with begin() and end()", "body": "<p>You haven't shown where <code>_deque</code> gets filled in, but it is probably from a whole bunch of separate allocations?</p>\n\n<p>The issue is that to iterate through an array, you need to point into it.  But you are reading from the array.</p>\n\n<p>A pointer into <code>_deque</code> would be <code>begin() { return _deque + _front; } end() { return _deque + _back; }</code> and would have type <code>T**</code>.</p>\n\n<p>What you have now is morally equivalent to:</p>\n\n<pre><code>std::vector&lt;T*&gt; v;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>auto it = *(v.begin()); // this is the first pointer stored *in* the container,\n                       //  not a pointer to the beginning of the container\nauto end = *(v.end());  // this is not even the last pointer stored in the container,\n                       // it is reading the element past the end!\nfor( ; it != end; ++it )\n</code></pre>\n\n<p>which is quite different from the correct iteration:</p>\n\n<pre><code>auto it = v.begin();\nauto end = v.end();\nfor( ; it != end; ++it )\n</code></pre>\n\n<p>Most likely your <code>_deque</code> variable should have type <code>T*</code>, not <code>T**</code>, and if you want to store pointers, let <code>T</code> be a pointer type.</p>\n"}], "owner": {"reputation": 28753, "user_id": 371184, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cebee1b08fb960edf79a359af330391a?s=128&d=identicon&r=PG", "display_name": "Mike Cluck", "link": "https://stackoverflow.com/users/371184/mike-cluck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 27950636, "answer_count": 1, "score": 0, "last_activity_date": 1421262997, "creation_date": 1421262380, "question_id": 27950582, "link": "https://stackoverflow.com/questions/27950582/iterating-pointers-with-begin-and-end", "title": "Iterating Pointers with begin() and end()", "body": "<p>I have a class containing a dynamic array and I want to iterate through it using <code>begin()</code> and <code>end()</code>. The problem is that I can't seem to get the iteration part to work correctly. So far it looks something like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Deque {\n    T** _deque;\n    int _front;\n    int _back;\npublic:\n    Deque() {\n        _deque = new T*[10];\n        _front = 5;\n        _back = 5;\n    }\n    // push_back and push_front add elements to the list and move _front/_back\n    // ...\n    T* begin() {\n        return _deque[_front];\n    }\n    T* end() {\n        return _deque[_back];\n    }\n};\n</code></pre>\n\n<p>But if I add a few items to the list with <code>push_back</code> and <code>push_front</code> (which work perfectly) then try this</p>\n\n<pre><code>for (auto i : deque) {\n    cout &lt;&lt; i &lt;&lt; endl;\n}\n</code></pre>\n\n<p>The first item will always be correct but all following objects will be garbage and will often exceed the size of the array.</p>\n\n<p>How can I automatically iterate over this structure given it's constrained between <code>_front</code> and <code>_back</code>?</p>\n"}, {"tags": ["c++", "inheritance", "copy-constructor", "derived-class", "base-class"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421262298, "post_id": 27950526, "comment_id": 44296100, "body": "Look up <a href=\"https://katyscode.wordpress.com/2013/08/22/c-polymorphic-cloning-and-the-crtp-curiously-recurring-template-pattern/\" rel=\"nofollow noreferrer\"><i>clone pattern</i></a>."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "edited": false, "score": 1, "creation_date": 1421262318, "post_id": 27950526, "comment_id": 44296114, "body": "Is <code>Base * A = new *Base[2];</code> a typo?  That won&#39;t compile.  Actually, your whole main() method is full of problems."}, {"owner": {"reputation": 857, "user_id": 2774358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7740eedc45b01cb059a83e41b6812045?s=128&d=identicon&r=PG&f=1", "display_name": "YoungJohn", "link": "https://stackoverflow.com/users/2774358/youngjohn"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421262350, "post_id": 27950526, "comment_id": 44296129, "body": "I believe polymorphic copies are idiomatically implemented via a method called <code>Clone()</code> (you would have to write the clone method yourself) and you basically write it the way you would a constructor, but as @Quentin says, look up the clone pattern for the specifics."}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 1, "creation_date": 1421264991, "post_id": 27950526, "comment_id": 44297573, "body": "<a href=\"http://www.stroustrup.com/bs_faq2.html#void-main\" rel=\"nofollow noreferrer\"><i>The definition void main() is not and never has been C++, nor has it even been C.</i> \u2013 Bjarne Stroustrup</a>"}], "answers": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 5, "last_activity_date": 1421262340, "creation_date": 1421262340, "answer_id": 27950576, "question_id": 27950526, "link": "https://stackoverflow.com/questions/27950526/is-there-a-way-to-copy-a-derived-class-object-thru-a-pointer-to-base/27950576#27950576", "title": "Is there a way to copy a derived class object thru a pointer to base?", "body": "<p>You may provide virtual method <code>Clone</code> for that:</p>\n\n<pre><code>class Base { \npublic:\n    Base(int x) : x(x) {}\n    virtual ~Base() {}\n    virtual Base* Clone() const { return new Base(*this); }\nprivate:\n    int x;\n};\n\nclass Derived1 : public Base { \npublic: \n    Derived1(int z, float f) : Base(z), f(f) {}\n    virtual Derived1* Clone() const { return new Derived1(*this); }\nprivate: \n    float f;\n};\n\nclass Derived2 : public Base {\npublic: \n    Derived2(int z, std::string f) : Base(z), f(f) {}\n    virtual Derived2* Clone() const { return new Derived2(*this); }\nprivate: \n    std::string f;\n};\n</code></pre>\n"}, {"owner": {"reputation": 1634, "user_id": 2030653, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Ab1rD.jpg?s=128&g=1", "display_name": "Mustafa", "link": "https://stackoverflow.com/users/2030653/mustafa"}, "is_accepted": false, "score": 0, "last_activity_date": 1421268436, "last_edit_date": 1495535121, "creation_date": 1421263664, "answer_id": 27950884, "question_id": 27950526, "link": "https://stackoverflow.com/questions/27950526/is-there-a-way-to-copy-a-derived-class-object-thru-a-pointer-to-base/27950884#27950884", "title": "Is there a way to copy a derived class object thru a pointer to base?", "body": "<p>In the second line of your <code>main</code> (apart from the typo) you construct two instances of the class <code>Base</code>, then you are asking if somehow in the last two lines those objects will metamorphose on the fly and become instances of derived classes. That is of course not possible. </p>\n\n<p>Also, check this <a href=\"https://stackoverflow.com/a/733393/2030653\">answer</a>. </p>\n\n<p><strong>Note</strong>: I am just commenting on the code and use case you provided. Using a virtual <code>Clone</code> function is the right design to copy polymorphic objects. </p>\n"}], "owner": {"reputation": 21, "user_id": 4260490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e36e04d9fd4fd25da545cde22efcaee4?s=128&d=identicon&r=PG&f=1", "display_name": "user4260490", "link": "https://stackoverflow.com/users/4260490/user4260490"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1421268436, "creation_date": 1421262162, "question_id": 27950526, "link": "https://stackoverflow.com/questions/27950526/is-there-a-way-to-copy-a-derived-class-object-thru-a-pointer-to-base", "title": "Is there a way to copy a derived class object thru a pointer to base?", "body": "<p>Is there a way to copy a derived class object thru a pointer to base?\nOr how to create such a copy constructor?</p>\n\n<p>For example:</p>\n\n<pre><code>class Base { \npublic: Base( int x ) : x( x ) {}\nprivate: int x;\n};\n\nclass Derived1 : public Base { \npublic: \nDerived( int z, float f ) : Base( z ), f( f ) {}\nprivate: \nfloat f;\n};\n\nclass Derived2 : public Base {\npublic: \nDerived( int z, string f ) : Base( z ), f( f ) {}\nprivate: \nstring f;\n};\n\nvoid main()\n{ \nBase * A = new *Base[2];\nBase * B = new *Base[2];\nA[0] = new Derived1(5,7);\nA[1] = new Derived2(5,\"Hello\");\nB[0] = Base(*A[0]);\nB[1] = Base(*A[1]);\n}\n</code></pre>\n\n<p>The question is whether *B[0] would be a Derived1 object and *B[1] a Derived2 object?\nIf not, how could I copy a derived class thru a pointer to the base class? Is there a specific way of building a copy-constructor thru the base class or the derived one? Is the default copy-constructor good enough for the example?</p>\n"}, {"tags": ["c++", "boost", "boost-serialization"], "answers": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1421264414, "last_edit_date": 1495542044, "creation_date": 1421263108, "answer_id": 27950752, "question_id": 27950322, "link": "https://stackoverflow.com/questions/27950322/boost-serialization-of-vectorchar/27950752#27950752", "title": "Boost Serialization of vector&lt;char&gt;", "body": "<p><strong>Measure it!</strong> </p>\n\n<p>The sort answers:</p>\n\n<ul>\n<li>No it doesn't cost much. Profile it (and see whether it fits your application)</li>\n<li>No, vector elements will not be differentiated for vectors of POD types. <br/><sub>(Things change when you serialize vectors containing pointers to polymorphic classes. This is obvious, since it couldn't be done more efficiently unless you have extra knowledge about the particular dataset)</sub></li>\n</ul>\n\n<hr>\n\n<p>The storage cost:</p>\n\n<p>Longer answers:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/22459726/boost-c-serialization-overhead/22464553#22464553\">Boost C++ Serialization overhead</a> (comparative storage efficiency of different archives, with and without compression)</p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/26556145/boost-serialization-binary-archive-giving-incorrect-output/26568212#26568212\">Boost Serialization Binary Archive giving incorrect output</a> (on why some types take more than the potential bare minimum, e.g. on 64bit systems)</p></li>\n<li><p>Tune things</p>\n\n<ul>\n<li><code>boost::archive::no_header</code></li>\n</ul></li>\n</ul>\n\n<p>The runtime cost:</p>\n\n<ul>\n<li><p><a href=\"https://stackoverflow.com/questions/23571355/how-to-do-performance-test-using-the-boost-library-for-a-custom-library/23572674#23572674\">how to do performance test using the boost library for a custom library</a></p></li>\n<li><p>Tune things</p>\n\n<ul>\n<li><code>boost::archive::no_codecvt</code></li>\n</ul></li>\n</ul>\n"}], "owner": {"reputation": 1618, "user_id": 2604712, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/b9760d85f8c8319e665561fdc6db1feb?s=128&d=identicon&r=PG&f=1", "display_name": "jnbrq -Canberk S&#246;nmez", "link": "https://stackoverflow.com/users/2604712/jnbrq-canberk-s%c3%b6nmez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 511, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1425646996, "creation_date": 1421261420, "last_edit_date": 1425646996, "question_id": 27950322, "link": "https://stackoverflow.com/questions/27950322/boost-serialization-of-vectorchar", "title": "Boost Serialization of vector&lt;char&gt;", "body": "<p>Does serializing a binary sequence stored in vector cost much? For example if I am using binary archive. Will the boost::serialization library put characters to differentiate char elements of vector and make the output larger?</p>\n"}, {"tags": ["c++", "opencv", "cmake"], "comments": [{"owner": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "edited": false, "score": 0, "creation_date": 1421264807, "post_id": 27950240, "comment_id": 44297452, "body": "See the <b>.log</b> files as the error message suggest. <a href=\"http://answers.opencv.org/question/35125/cmake-linking-error-opencv_found-to-false-ubuntu-1304/\" rel=\"nofollow noreferrer\">Maybe these instructions can help you.</a>"}, {"owner": {"reputation": 8727, "user_id": 2999346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQ1wB.png?s=128&g=1", "display_name": "francis", "link": "https://stackoverflow.com/users/2999346/francis"}, "edited": false, "score": 0, "creation_date": 1421274302, "post_id": 27950240, "comment_id": 44302220, "body": "What happens if you set the environment variable <code>OpenCV_DIR</code> by doing something like <code>export OpenCV_DIR=&#47;home&#47;jdorfsman&#47;opencv-2.4.9&#47;build</code>, revome the <code>set(OpenCV_DIR...)</code> and re-run cmake ? <a href=\"http://stackoverflow.com/questions/9846171/cmake-still-not-working-with-opencv\" title=\"cmake still not working with opencv\">stackoverflow.com/questions/9846171/&hellip;</a>"}, {"owner": {"reputation": 863, "user_id": 1833200, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6Yy5e.png?s=128&g=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/1833200/javi"}, "edited": false, "score": 0, "creation_date": 1421276529, "post_id": 27950240, "comment_id": 44303181, "body": "Same thing sadly. <code>Found package configuration file: &#47;home&#47;jdorfsman&#47;opencv-2.4.9&#47;build&#47;OpenCVConfig.cmake but it set OpenCV_FOUND to FALSE so package &quot;OpenCV&quot; is considered to be NOT FOUND.</code>"}, {"owner": {"reputation": 863, "user_id": 1833200, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6Yy5e.png?s=128&g=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/1833200/javi"}, "reply_to_user": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "edited": false, "score": 0, "creation_date": 1421277444, "post_id": 27950240, "comment_id": 44303532, "body": "@karlphillip I saw the log message, and also saw the link you refer me to, sadly it isn&#39;t the same error and the log didn&#39;t helped much. I&#39;ll add it to the question in case it helps.."}, {"owner": {"reputation": 9792, "user_id": 1180117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/75c3146c3b87a3d4d01d9f7b07521b8f?s=128&d=identicon&r=PG", "display_name": "kiranpradeep", "link": "https://stackoverflow.com/users/1180117/kiranpradeep"}, "edited": false, "score": 0, "creation_date": 1421303151, "post_id": 27950240, "comment_id": 44309826, "body": "Not sure why it is looking for <code>pthreads</code> instead of <code>pthread</code>. Can you try setting <code>OpenCV_DIR</code> to OpenCV install directory and not the build directory. I mean set it to path where <code>make install</code> copied the built libraries."}, {"owner": {"reputation": 863, "user_id": 1833200, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6Yy5e.png?s=128&g=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/1833200/javi"}, "reply_to_user": {"reputation": 9792, "user_id": 1180117, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/75c3146c3b87a3d4d01d9f7b07521b8f?s=128&d=identicon&r=PG", "display_name": "kiranpradeep", "link": "https://stackoverflow.com/users/1180117/kiranpradeep"}, "edited": false, "score": 0, "creation_date": 1421400957, "post_id": 27950240, "comment_id": 44353262, "body": "@Kiran I tried to set the OpenCV_DIR variable in the .bashrc file to /usr/local/lib, where it is installed and I still get the same message.. I&#39;ll add the whole cmake file in the question, maybe that will pour some light on the issue.."}], "answers": [{"comments": [{"owner": {"reputation": 2654, "user_id": 1646996, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e1927a513875cef7a1c2877fdb6b45ae?s=128&d=identicon&r=PG", "display_name": "qqibrow", "link": "https://stackoverflow.com/users/1646996/qqibrow"}, "reply_to_user": {"reputation": 863, "user_id": 1833200, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6Yy5e.png?s=128&g=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/1833200/javi"}, "edited": false, "score": 0, "creation_date": 1421420606, "post_id": 27954378, "comment_id": 44364385, "body": "could you run <code>make VERBOSE=1</code> and copy paste the output in your post?"}, {"owner": {"reputation": 863, "user_id": 1833200, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6Yy5e.png?s=128&g=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/1833200/javi"}, "edited": false, "score": 0, "creation_date": 1421621327, "post_id": 27954378, "comment_id": 44418625, "body": "I uploaded it here: <a href=\"https://mega.co.nz/#!LYkQGAQB!BttwK0a5uVT0XCM9TcBoaaN0tgSH4pjUMfUVBIKXcPQ\" rel=\"nofollow noreferrer\">mega.co.nz/&hellip;</a> Thanks!"}], "owner": {"reputation": 2654, "user_id": 1646996, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e1927a513875cef7a1c2877fdb6b45ae?s=128&d=identicon&r=PG", "display_name": "qqibrow", "link": "https://stackoverflow.com/users/1646996/qqibrow"}, "is_accepted": false, "score": 0, "last_activity_date": 1421277982, "creation_date": 1421277982, "answer_id": 27954378, "question_id": 27950240, "link": "https://stackoverflow.com/questions/27950240/cmake-adding-opencv/27954378#27954378", "title": "CMake adding opencv", "body": "<p>Looks like you don't specify the pthread flag.</p>\n\n<pre><code>CMakeFiles/cmTryCompileExec1061744568.dir/CheckSymbolExists.c.o: In function `main':\nCheckSymbolExists.c:(.text+0x16): undefined reference to `pthread_create'\ncollect2: error: ld returned 1 exit status\nmake[1]: *** [cmTryCompileExec1061744568] Error 1\nmake[1]: Leaving directory `/home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp'\nmake: *** [cmTryCompileExec1061744568/fast] Error 2\n</code></pre>\n\n<p>try add:</p>\n\n<pre><code>SET(CMAKE_CXX_FLAGS \"-lpthread\")\n</code></pre>\n"}], "owner": {"reputation": 863, "user_id": 1833200, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/6Yy5e.png?s=128&g=1", "display_name": "Javi", "link": "https://stackoverflow.com/users/1833200/javi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1522, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1421401070, "creation_date": 1421261134, "last_edit_date": 1421401070, "question_id": 27950240, "link": "https://stackoverflow.com/questions/27950240/cmake-adding-opencv", "title": "CMake adding opencv", "body": "<p>I'm trying to include opencv2.4.9 with cmake:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.3)\nproject(HydroCamel)\nSET(CMAKE_CXX_FLAGS \"-lpthread\")\nfind_package(catkin REQUIRED COMPONENTS\n  roscpp\n  rospy\n  std_msgs\n)\ncatkin_package()\nset(SRC_FOLDER src/src)\nset(ALOGS_FOLDER src/Algos)\nset(ALOGS_UTILS_FOLDER src/Algos/Utils)\nset(SRC_INCLUDE_FOLDER src/include)\nset(DIRS ${SRC_FOLDER} ${ALOGS_FOLDER} ${ALOGS_UTILS_FOLDER} ${SRC_INCLUDE_FOLDER})\ninclude_directories(${DIRS})\n\nfile(GLOB_RECURSE SRC_FILES \"*.h\" \"*.cpp\")\ninclude_directories(include ${catkin_INCLUDE_DIRS})\n\nset(Boost_USE_STATIC_LIBS OFF) \nset(Boost_USE_MULTITHREADED ON)  \nset(Boost_USE_STATIC_RUNTIME OFF) \nfind_package(Boost 1.55.0 COMPONENTS filesystem system thread)\n#FIND_PACKAGE(OpenCV REQUIRED core imgproc highgui)\ninclude_directories(${OpenCV_INCLUDE_DIRS})\nif(Boost_FOUND)\n    include_directories(${Boost_INCLUDE_DIRS}) \n    add_executable(SourceFiles ${SRC_FILES})\n    TARGET_LINK_LIBRARIES(SourceFiles ${Boost_LIBRARIES})\n    TARGET_LINK_LIBRARIES(SourceFiles ${OpenCV_LIBS})\nendif()\n</code></pre>\n\n<p>And I receive this error:</p>\n\n<blockquote>\n  <p>CMake Error at HydroCamel/CMakeLists.txt:28 (find_package):   Found\n  package configuration file:</p>\n\n<pre><code>/home/jdorfsman/opencv-2.4.9/build/OpenCVConfig.cmake\n</code></pre>\n  \n  <p>but it set OpenCV_FOUND to FALSE so package \"OpenCV\" is considered\n  to be   NOT FOUND.</p>\n  \n  <p>-- Configuring incomplete, errors occurred! See also \"/home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeOutput.log\". See also\n  \"/home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeError.log\".</p>\n</blockquote>\n\n<p>This is the CMakeError.log file:</p>\n\n<pre><code>Determining if the pthread_create exist failed with the following output:\nChange Dir: /home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp\n\nRun Build Command:/usr/bin/make \"cmTryCompileExec1061744568/fast\"\n/usr/bin/make -f CMakeFiles/cmTryCompileExec1061744568.dir/build.make CMakeFiles/cmTryCompileExec1061744568.dir/build\nmake[1]: Entering directory `/home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp'\n/usr/bin/cmake -E cmake_progress_report /home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp/CMakeFiles 1\nBuilding C object CMakeFiles/cmTryCompileExec1061744568.dir/CheckSymbolExists.c.o\n/usr/bin/cc    -o CMakeFiles/cmTryCompileExec1061744568.dir/CheckSymbolExists.c.o   -c /home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp/CheckSymbolExists.c\nLinking C executable cmTryCompileExec1061744568\n/usr/bin/cmake -E cmake_link_script CMakeFiles/cmTryCompileExec1061744568.dir/link.txt --verbose=1\n/usr/bin/cc       CMakeFiles/cmTryCompileExec1061744568.dir/CheckSymbolExists.c.o  -o cmTryCompileExec1061744568 -rdynamic \nCMakeFiles/cmTryCompileExec1061744568.dir/CheckSymbolExists.c.o: In function `main':\nCheckSymbolExists.c:(.text+0x16): undefined reference to `pthread_create'\ncollect2: error: ld returned 1 exit status\nmake[1]: *** [cmTryCompileExec1061744568] Error 1\nmake[1]: Leaving directory `/home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp'\nmake: *** [cmTryCompileExec1061744568/fast] Error 2\n\nFile /home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp/CheckSymbolExists.c:\n/* */\n#include &lt;pthread.h&gt;\n\nint main(int argc, char** argv)\n{\n  (void)argv;\n#ifndef pthread_create\n  return ((int*)(&amp;pthread_create))[argc];\n#else\n  (void)argc;\n  return 0;\n#endif\n}\n\nDetermining if the function pthread_create exists in the pthreads failed with the following output:\nChange Dir: /home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp\n\nRun Build Command:/usr/bin/make \"cmTryCompileExec3426763052/fast\"\n/usr/bin/make -f CMakeFiles/cmTryCompileExec3426763052.dir/build.make CMakeFiles/cmTryCompileExec3426763052.dir/build\nmake[1]: Entering directory `/home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp'\n/usr/bin/cmake -E cmake_progress_report /home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp/CMakeFiles 1\nBuilding C object CMakeFiles/cmTryCompileExec3426763052.dir/CheckFunctionExists.c.o\n/usr/bin/cc   -DCHECK_FUNCTION_EXISTS=pthread_create   -o CMakeFiles/cmTryCompileExec3426763052.dir/CheckFunctionExists.c.o   -c /usr/share/cmake-2.8/Modules/CheckFunctionExists.c\nLinking C executable cmTryCompileExec3426763052\n/usr/bin/cmake -E cmake_link_script CMakeFiles/cmTryCompileExec3426763052.dir/link.txt --verbose=1\n/usr/bin/cc   -DCHECK_FUNCTION_EXISTS=pthread_create    CMakeFiles/cmTryCompileExec3426763052.dir/CheckFunctionExists.c.o  -o cmTryCompileExec3426763052 -rdynamic -lpthreads \n/usr/bin/ld: cannot find -lpthreads\ncollect2: error: ld returned 1 exit status\nmake[1]: *** [cmTryCompileExec3426763052] Error 1\nmake[1]: Leaving directory `/home/jdorfsman/catkin_ws/build/CMakeFiles/CMakeTmp'\nmake: *** [cmTryCompileExec3426763052/fast] Error 2\n</code></pre>\n"}, {"tags": ["c++", "c++11", "hash", "stl", "stdhash"], "comments": [{"owner": {"reputation": 181215, "user_id": 82294, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5c5f910416e2b92bb73fa59c56fe695d?s=128&d=identicon&r=PG", "display_name": "Dietrich Epp", "link": "https://stackoverflow.com/users/82294/dietrich-epp"}, "edited": false, "score": 0, "creation_date": 1421261186, "post_id": 27950212, "comment_id": 44295467, "body": "Can you hash <code>const myClass *</code>?  Or can you only hash <code>const myClass</code>?"}, {"owner": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 3, "creation_date": 1421261567, "post_id": 27950212, "comment_id": 44295693, "body": "There&#39;s a <a href=\"http://isocpp.org/files/papers/n3980.html\" rel=\"nofollow noreferrer\">proposal</a> that addresses this issue. Other than that, this question is too broad and not really answerable. For now, you can provide your own <code>std::hash</code> specialization and use <code>boost::hash_combine</code> to combine the individual hashes."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1421295175, "post_id": 27950212, "comment_id": 44307950, "body": "Please feel free to use the software behind the proposal that Praetorian references:  <a href=\"https://github.com/HowardHinnant/hash_append\" rel=\"nofollow noreferrer\">github.com/HowardHinnant/hash_append</a>  Just in the past couple of days my team as benefited from the ability to easily compare hash algorithm X with hash algorithm Y, as applied to our specific application, and choose which one is best for us."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1430402173, "post_id": 27950212, "comment_id": 48058977, "body": "<a href=\"http://stackoverflow.com/a/27952689/1774667\">XOR is a crappy way to combine hashes</a>"}], "answers": [{"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1601913809, "post_id": 27952156, "comment_id": 113547359, "body": "Better hashing framework, no need for hash combining: <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3980.html\" rel=\"nofollow noreferrer\">open-std.org/jtc1/sc22/wg21/docs/papers/2014/n3980.html</a>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1601914037, "post_id": 27952156, "comment_id": 113547456, "body": "Caveat: writing a custom hash for unordered containers should respect their nontrivial <code>==</code>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1601918105, "post_id": 27952156, "comment_id": 113549197, "body": "@Caleth I&#39;m not sure where that Caveat is addressing.  If two unordered containers return <code>==</code> true, your hash has to be the same, but I don&#39;t see any advice or implementation above that disagrees with that.  Can you point it out?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1601920582, "post_id": 27952156, "comment_id": 113550306, "body": "The naive <code>hash_combine_range(unordered.begin(), unordered.end())</code> won&#39;t necessarily work"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1601924781, "post_id": 27952156, "comment_id": 113551929, "body": "@caleth ah, because two unordered containers with different bucket counts iterate differently."}], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1421270993, "last_edit_date": 1421270993, "creation_date": 1421268533, "answer_id": 27952156, "question_id": 27950212, "link": "https://stackoverflow.com/questions/27950212/should-stdhasht-work-when-t-is-stdpairtwo-simpler-types-also-supported-by/27952156#27952156", "title": "Should std::hash&lt;T&gt; work when T is std::pair&lt;two simpler types also supported by std::hash&gt;?", "body": "<p>The reason is simple, it was not added to the standard.  The same is true of hashing other  structures like <code>tuple</code>.</p>\n\n<p>Things tend to be added to the standard when they are good enough, not when they are perfect, as perfection is the enemy of the good.  More specializations of <code>std::hash</code> are not things that will break code (that often), so adding new ones is relatively harmless.</p>\n\n<p>In any case, to that end, we can write our own hash extenders.  As an example:</p>\n\n<pre><code>namespace hashers {\n  constexpr size_t hash_combine( size_t, size_t ); // steal from boost, or write your own\n  constexpr size_t hash_combine( size_t a ) { return a; }\n  constexpr size_t hash_combine() { return 0; }\n  template&lt;class...Sizes&gt;\n  constexpr size_t hash_combine( size_t a, size_t b, Sizes... sizes ) {\n    return hash_combine( hash_combine(a,b), sizes... );\n  }\n\n  template&lt;class T=void&gt; struct hash;\n\n  template&lt;class A, class B&gt;\n  constexpr size_t custom_hash( std::pair&lt;A,B&gt; const&amp; p ) {\n    return hash_combine( hash&lt;size_t&gt;{}(2), hash&lt;std::decay_t&lt;A&gt;&gt;{}(p.first), hash&lt;std::decay_t&lt;B&gt;&gt;{}(p.second) );\n  }\n  template&lt;class...Ts, size_t...Is&gt;\n  constexpr size_t custom_hash( std::index_sequence&lt;Is...&gt;, std::tuple&lt;Ts...&gt; const&amp; p ) {\n    return hash_combine( hash&lt;size_t&gt;{}(sizeof...(Ts)), hash&lt;std::decay_t&lt;Ts&gt;&gt;{}(std::get&lt;Is&gt;(p))... );\n  }\n  template&lt;class...Ts&gt;\n  constexpr size_t custom_hash( std::tuple&lt;Ts...&gt; const&amp; p ) {\n    return custom_hash( std::index_sequence_for&lt;Ts...&gt;{}, p );\n  }\n  template&lt;class T0, class C&gt;\n  constexpr size_t custom_hash_container( size_t n, C const&amp; c) {\n    size_t retval = hash&lt;size_t&gt;{}(n);\n    for( auto&amp;&amp; x : c)\n      retval = hash_combine( retval, hash&lt;T&gt;{}(x) );\n    return retval;\n  }\n  template&lt;class T0, class C&gt;\n  constexpr size_t custom_hash_container( C const&amp; c) {\n    return custom_hash_container( c.size(), c );\n  }\n  template&lt;class T, class...Ts&gt;\n  size_t custom_hash( std::vector&lt;T, Ts...&gt; const&amp; v ) {\n    return custom_hash_container&lt;T&gt;(v);\n  }\n  template&lt;class T, class...Ts&gt;\n  size_t custom_hash( std::basic_string&lt;T, Ts...&gt; const&amp; v ) {\n    return custom_hash_container&lt;T&gt;(v);\n  }\n  template&lt;class T, size_t n&gt;\n  constexpr size_t custom_hash( std::array&lt;T, n&gt; const&amp; v ) {\n    return custom_hash_container&lt;T&gt;(n, v);\n  }\n  template&lt;class T, size_t n&gt;\n  constexpr size_t custom_hash( T (const&amp; v)[n] ) {\n    return custom_hash_container&lt;T&gt;(n, v);\n  }\n  // etc -- list, deque, map, unordered map, whatever you want to support\n  namespace details {\n    template&lt;class T, class=void&gt;\n    struct hash : std::hash&lt;T&gt; {};\n    using hashers::custom_hash;\n    template&lt;class T&gt;\n    struct hash&lt;T,decltype(void(\n      custom_hash(declval&lt;T const&amp;&gt;())\n    )) {\n      constexpr size_t operator()(T const&amp; t)const {\n        return custom_hash(t);\n      }\n    };\n  }\n  template&lt;class T&gt;\n  struct hash : details::hash&lt;T&gt; {};\n  template&lt;&gt;\n  struct hash&lt;void&gt; {\n    template&lt;class T&gt;\n    constexpr size_t operator()(T const&amp; t)const { return hash&lt;T&gt;{}(t); }\n  }\n}\n</code></pre>\n\n<p>and now <code>hashers::hash&lt;T&gt;</code> will recursively use either an ADL-looked up <code>custom_hash</code> function, or <code>std::hash</code> if that fails, to hash <code>T</code> and its components, and <code>hashers::hash&lt;&gt;</code> is a universal hasher that tries to hash anything passed to it.</p>\n\n<p>Code may not compile as shown.</p>\n\n<p>I chose to hash all containers and tuples as hash their length, followed by hashing the combination of their contents.  As a side effect, <code>array&lt;int, 3&gt;</code> hashes the same as <code>tuple&lt;int,int,int&gt;</code>, and <code>tuple&lt;int,int&gt;</code> hashes the same as <code>pair&lt;int,int&gt;</code>, and <code>std::vector&lt;char&gt;{'a','b','c', '\\0'}</code> hashes the same as <code>\"abc\"</code>, which I think is a nice property.  The empty array/tuple/vector/etc hashes like <code>size_t(0)</code>.</p>\n\n<p>You can extend the above system for your own types by simply overriding <code>custom_hash</code> in the namespace of the type in question, or specializing either <code>std::hash&lt;X&gt;</code> or <code>hashers::hash&lt;X&gt;</code> to do your custom hash (I would go with <code>std::hash</code> for the principle of least surprise myself).  For advanced use, you can specialize <code>hashers::details::hash&lt;X,void&gt;</code> with SFINAE, but I'd say do it for <code>custom_hash</code> instead.</p>\n"}], "owner": {"reputation": 331, "user_id": 4289538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OeTw9.jpg?s=128&g=1", "display_name": "jzions", "link": "https://stackoverflow.com/users/4289538/jzions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 679, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1601913147, "creation_date": 1421261034, "last_edit_date": 1601913147, "question_id": 27950212, "link": "https://stackoverflow.com/questions/27950212/should-stdhasht-work-when-t-is-stdpairtwo-simpler-types-also-supported-by", "title": "Should std::hash&lt;T&gt; work when T is std::pair&lt;two simpler types also supported by std::hash&gt;?", "body": "<p>I was using an ordered set declared as so:</p>\n<pre><code>std::set&lt;std::pair&lt;const std::string, const myClass *&gt; &gt; myset;\n</code></pre>\n<p>After doing some analysis of the way I was using the <code>set,</code> I concluded that an <code>unordered_set</code> would be a smarter choice. But when I changed <code>std::set</code> to <code>std::unordered_set</code>, I got a vast spew of error messages from my compiler (g++ 4.8.1) complaining of an</p>\n<pre><code>invalid use of incomplete type struct std::hash&lt;std::pair&lt;const std::basic_string&lt;char&gt;, const myClass * &gt; &gt;\n</code></pre>\n<p>I figured out that <code>std::hash</code> didn't know how to deal with a type which was <code>std::pair</code>, despite the fact that the two types that made up the <code>pair</code> were each hashable. I think <a href=\"https://stackoverflow.com/questions/20590656/error-for-hash-function-of-pair-of-ints\">error for hash function of pair of ints</a> contains relevant information about the C++11 standard that explains why things went awry. (There's no good explanation for the impenetrable wall of error text that g++ emits for this.)</p>\n<p>It would seem to me that</p>\n<pre><code>std::hash&lt;std::pair&lt;T1, T2&gt;&gt; hasher(make_pair(x,y))\n  = some_func(std::hash&lt;T1&gt;hasher(x), std::hash&lt;T2&gt;hasher(y) )\n</code></pre>\n<p>where <code>some_func()</code> could be as simple as XOR (or not; see <a href=\"https://stackoverflow.com/questions/5889238/why-is-xor-the-default-way-to-combine-hashes\">Why is XOR the default way to combine hashes?</a>)</p>\n<p>Is there a good reason for the standard to not require <code>std::hash</code> to know how to construct a hash value for an object which is a <code>pair</code> of types that are each hashable?</p>\n"}, {"tags": ["c++", "qt", "g++", "computer-vision", "ubuntu-14.04"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1421262191, "post_id": 27950170, "comment_id": 44296030, "body": "Well, if I get it right, you  -L/home/fabri/QT/CCV1/ccv1/../../../CNN/ccv/lib/ is equivalent to  -L/home/fabri/CNN/ccv/lib/. Do you have such directory? Is there libccv.a here? Or maybe libccv.so?"}, {"owner": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "edited": false, "score": 0, "creation_date": 1421264628, "post_id": 27950170, "comment_id": 44297357, "body": "It&#39;s a linker error (linker != compiler). Instead of <code>-L$$PWD&#47;..&#47;..&#47;..&#47;CNN&#47;ccv&#47;lib&#47;</code> use the full path to that directory. Make sure you have <b>libccv.so</b> in there."}, {"owner": {"reputation": 1, "user_id": 4342781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca17e260f191b9c5df2f2c735b648d8f?s=128&d=identicon&r=PG&f=1", "display_name": "FabriC", "link": "https://stackoverflow.com/users/4342781/fabric"}, "reply_to_user": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 0, "creation_date": 1421327941, "post_id": 27950170, "comment_id": 44321612, "body": "@SeverinPappadeux Yes I have that directory, the library is libccv.a"}, {"owner": {"reputation": 1, "user_id": 4342781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca17e260f191b9c5df2f2c735b648d8f?s=128&d=identicon&r=PG&f=1", "display_name": "FabriC", "link": "https://stackoverflow.com/users/4342781/fabric"}, "reply_to_user": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "edited": false, "score": 0, "creation_date": 1421327992, "post_id": 27950170, "comment_id": 44321642, "body": "@karlphillip I wrote <code>LIBS += -L&#47;home&#47;fabri&#47;CNN&#47;ccv&#47;lib -lccv</code> and it still gives the same error. The library is .a, not .so"}], "answers": [{"owner": {"reputation": 21, "user_id": 2534285, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a55268e3c00b98c78cd9855722df4b6f?s=128&d=identicon&r=PG", "display_name": "Jokla", "link": "https://stackoverflow.com/users/2534285/jokla"}, "is_accepted": false, "score": 2, "last_activity_date": 1427648957, "creation_date": 1427648957, "answer_id": 29332171, "question_id": 27950170, "link": "https://stackoverflow.com/questions/27950170/undefined-reference-for-external-library-c-qt-ubuntu-14-ccv/29332171#29332171", "title": "Undefined reference for external library (C++, QT, Ubuntu 14, CCV)", "body": "<p>Modify the example and try to include it like this: </p>\n\n<pre><code>extern \"C\" {\n#include \"ccv.h\"\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4342781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca17e260f191b9c5df2f2c735b648d8f?s=128&d=identicon&r=PG&f=1", "display_name": "FabriC", "link": "https://stackoverflow.com/users/4342781/fabric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 649, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427648957, "creation_date": 1421260910, "question_id": 27950170, "link": "https://stackoverflow.com/questions/27950170/undefined-reference-for-external-library-c-qt-ubuntu-14-ccv", "title": "Undefined reference for external library (C++, QT, Ubuntu 14, CCV)", "body": "<p>I'm trying to run the CCV library linked at <a href=\"http://libccv.org/\" rel=\"nofollow\">http://libccv.org/</a> in QT Creator on Ubuntu 14. I followed this tutorial <a href=\"http://libccv.org/tutorial/\" rel=\"nofollow\">http://libccv.org/tutorial/</a> and I'm trying now to run the first simple example. I get these errors:</p>\n\n<ul>\n<li>error: undefined reference to ccv_read_impl(void const*, ccv_dense_matrix_t**, int, int, int, int)</li>\n<li>error: undefined reference to ccv_write(ccv_dense_matrix_t*, char*, int*, int, void*)</li>\n</ul>\n\n<p>This  is the .pro file of the project:</p>\n\n<pre><code>TEMPLATE = app\nCONFIG += console\nCONFIG -= app_bundle\nCONFIG -= qt\n\nSOURCES += main.cpp\n\nunix:!macx: LIBS += -L$$PWD/../../../CNN/ccv/lib/ -lccv\n\nINCLUDEPATH += $$PWD/../../../CNN/ccv/lib\nDEPENDPATH += $$PWD/../../../CNN/ccv/lib\n\nunix:!macx: PRE_TARGETDEPS += $$PWD/../../../CNN/ccv/lib/libccv.a\n</code></pre>\n\n<p>Finally this is the command generated by QT in the compile output:</p>\n\n<ul>\n<li>g++ -m64 -o ccv1 main.o   -L/home/fabri/QT/CCV1/ccv1/../../../CNN/ccv/lib/ -lccv </li>\n</ul>\n\n<p>I suppose it's a compiler problem but I don't know what. Thank you.</p>\n"}, {"tags": ["c++", "file", "temp"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 1, "creation_date": 1421261697, "post_id": 27950159, "comment_id": 44295758, "body": "A nicely-formatted code sample that compiles will always get you farther on this site.  There may be a bug in what you&#39;ve posted, but I&#39;m having trouble both reading it and guessing what code is missing."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1421264826, "post_id": 27950159, "comment_id": 44297466, "body": "<code>delreset == true</code> is a condition which is true only when delreset itself is also true. So you could just write <code>while(delreset)</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1421265031, "post_id": 27950159, "comment_id": 44297600, "body": "The loop is setting <code>delreset</code> to true on every iteration, and there is no error handing on the input file reading, so the loop will never stop, even after the desired line has been found."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1421264894, "post_id": 27951164, "comment_id": 44297505, "body": "The OP&#39;s requirement is to remove the specified line <b>AND</b> the line that follows it. This code does not do the latter."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1421274702, "post_id": 27951164, "comment_id": 44302399, "body": "The test data gave impression of two numbered lines.  So I misunderstood <i>&quot;string below the first string&quot;</i>  as refering to the example.  I&#39;ve added and EDIT line, to remove the line that follows as well."}], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 0, "last_activity_date": 1421274347, "last_edit_date": 1421274347, "creation_date": 1421264829, "answer_id": 27951164, "question_id": 27950159, "link": "https://stackoverflow.com/questions/27950159/why-does-my-delete-string-attempt-fail/27951164#27951164", "title": "Why does my delete string attempt fail", "body": "<p>What with a simpler version: </p>\n\n<pre><code>...  // prepare everything as before\nwhile(getline(infile, fLine)) {\n    if(delstr == fLine) {   // if line found do nothing\n        cout&lt;&lt;\"String deleted.\\n\";\n        getline(infile, fLine);  // EDIT: and read and ignore the following line \n    }\n    else \n        tempfile&lt;&lt;fLine&lt;&lt;\"\\n\";  // else copy it \n}\n...  // here infile was read and tempfile contains the filtered output \n</code></pre>\n\n<p>With this approach you could even write directly to the outfile.  </p>\n\n<p>By the way <code>cin&gt;&gt;delstr;</code> only takes a word.  It stops at the first blank and ignores trailing blanks.  You could  use <code>getline(cin, delstr);</code> instead.  </p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 4421847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38110130c37ecc077b2a0f15548ec2c0?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/4421847/bill"}, "edited": false, "score": 0, "creation_date": 1421271050, "post_id": 27951321, "comment_id": 44300697, "body": "When I called this code it instantly ran and finished with nothing being done"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 51, "user_id": 4421847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38110130c37ecc077b2a0f15548ec2c0?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/4421847/bill"}, "edited": false, "score": 0, "creation_date": 1421272730, "post_id": 27951321, "comment_id": 44301501, "body": "That would imply that <code>getline()</code> is failing to read a line, did you check for that?"}], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1421265395, "creation_date": 1421265395, "answer_id": 27951321, "question_id": 27950159, "link": "https://stackoverflow.com/questions/27950159/why-does-my-delete-string-attempt-fail/27951321#27951321", "title": "Why does my delete string attempt fail", "body": "<p>Try something more like this instead:</p>\n\n<pre><code>cout &lt;&lt; \"What string would you like to delete\";\ngetline(cin, delstr);\nbool deleted = false;\n\ninfile.clear();\ninfile.seekg(0, ios::beg);\n\nofstream tempfile;\ntempfile.open(\"temp.txt\", std::ios::app);\n\nwhile (getline(infile, fLine))\n{\n    if ((!deleted) &amp;&amp; (fLine == delstr))\n    {\n        getline(infile, fLine);\n        cout &lt;&lt; \"String deleted.\" &lt;&lt; endl;\n        deleted = true;\n    }\n    else\n        tempfile &lt;&lt; fLine &lt;&lt; endl;\n}\n\ntempfile.close();\ninfile.close();\noutfile.close();\n\nif (deleted)\n{\n    remove(\"example.txt\");\n    rename(\"temp.txt\", \"example.txt\");\n}\nelse\n    remove(\"temp.txt\");\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 4421847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38110130c37ecc077b2a0f15548ec2c0?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/4421847/bill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 27951164, "answer_count": 2, "score": 0, "last_activity_date": 1421274347, "creation_date": 1421260884, "last_edit_date": 1421264720, "question_id": 27950159, "link": "https://stackoverflow.com/questions/27950159/why-does-my-delete-string-attempt-fail", "title": "Why does my delete string attempt fail", "body": "<p>I have been attempting to make my own version of this example:</p>\n\n<p><a href=\"http://www.cplusplus.com/forum/beginner/9409/\" rel=\"nofollow\">Delete a specific line from a file</a></p>\n\n<p>But I cannot get mine to work correctly. My current goal for the program is to delete the string and its information (which is the string below the first string), which it does; however, it also adds an additional space to the first line so that it looks like this:</p>\n\n<pre><code>(First Line)\n\n\n(Second Line) This should be the first line.\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>infile = ifstream;\noutfile = ofstream;\ncout&lt;&lt; \"What string would you like to delete\";\ncin&gt;&gt;delstr;\ninfile.clear();\ninfile.seekg(0, ios::beg);\n\nofstream tempfile;\ntempfile.open(\"temp.txt\",std::ios::app);\n\nwhile(delreset == true){\n\n    if(delstr == fLine){\n        getline(infile, fLine);\n\n        cout&lt;&lt;\"String deleted.\\n\";\n        delreset = false;\n\n        while(fLine != nothing){\n            getline(infile, fLine);\n            tempfile&lt;&lt;fLine&lt;&lt;\"\\n\";\n        }\n\n        tempfile.close();\n        infile.close();\n        outfile.close();\n        remove(\"example.txt\");\n        rename(\"temp.txt\",\"example.txt\");\n\n    }else{\n\n        tempfile&lt;&lt;fLine&lt;&lt;endl;\n        getline(infile, fLine);\n\n    }\n    outfile.flush();\n    delreset = true;\n}\n</code></pre>\n\n<p>I deleted what I could to make it an abridged version of the actual program, hopefully I didn't edit anything so that it doesn't make sense.</p>\n"}, {"tags": ["c++", "ocr", "tesseract"], "comments": [{"owner": {"reputation": 492, "user_id": 4269526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umy5i.png?s=128&g=1", "display_name": "Alto", "link": "https://stackoverflow.com/users/4269526/alto"}, "edited": false, "score": 0, "creation_date": 1421328458, "post_id": 27950157, "comment_id": 44321891, "body": "Is your traineddata working with Tesseract ? If you sure its not your fault, you can maybe post a bug report on OpenALPR project !"}, {"owner": {"reputation": 1151, "user_id": 408195, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/22259716faae930605863b4773499d91?s=128&d=identicon&r=PG", "display_name": "Diogo Melo", "link": "https://stackoverflow.com/users/408195/diogo-melo"}, "reply_to_user": {"reputation": 492, "user_id": 4269526, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umy5i.png?s=128&g=1", "display_name": "Alto", "link": "https://stackoverflow.com/users/4269526/alto"}, "edited": false, "score": 0, "creation_date": 1421376465, "post_id": 27950157, "comment_id": 44345441, "body": "I did a workaround. I was too big for a comment but is not so conclusive for an answer."}], "answers": [{"owner": {"reputation": 1151, "user_id": 408195, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/22259716faae930605863b4773499d91?s=128&d=identicon&r=PG", "display_name": "Diogo Melo", "link": "https://stackoverflow.com/users/408195/diogo-melo"}, "is_accepted": false, "score": 1, "last_activity_date": 1421376402, "creation_date": 1421376402, "answer_id": 27976532, "question_id": 27950157, "link": "https://stackoverflow.com/questions/27950157/openalpr-exits-with-segmentation-fault-with-custom-traineddata/27976532#27976532", "title": "OpenALPR exits with segmentation fault with custom traineddata", "body": "<p>I was debugging tesseract when I saw that the error occurs because shape_table_->getShape(id) was being called with id >= to shape_table_'s size, on file adaptmatch.cpp.</p>\n\n<p>As a workaround, I changed the code to check the size first and skip the iteration instead of exit with segfault.</p>\n\n<p>It is possible that this workaround will have undesirable consequences, but at least it stopped breaking. Here is the diff:</p>\n\n<pre><code>diff --git a/classify/adaptmatch.cpp b/classify/adaptmatch.cpp\nindex 0eaf144..b21d980 100644\n--- a/classify/adaptmatch.cpp\n+++ b/classify/adaptmatch.cpp\n@@ -1148,7 +1148,7 @@ void Classify::ExpandShapesAndApplyCorrections(\n     fontinfo_id = ClassAndConfigIDToFontOrShapeID(class_id, int_result.Config);\n     fontinfo_id2 = ClassAndConfigIDToFontOrShapeID(class_id,\n                                                    int_result.Config2);\n-    if (shape_table_ != NULL) {\n+    if (shape_table_ != NULL &amp;&amp; fontinfo_id &lt; shape_table_-&gt;NumShapes()) {\n       // Actually fontinfo_id is an index into the shape_table_ and it\n       // contains a list of unchar_id/font_id pairs.\n       int shape_id = fontinfo_id;\n@@ -1781,10 +1781,12 @@ void Classify::ComputeCharNormArrays(FEATURE_STRUCT* norm_feature,\n         int font_set_id = templates-&gt;Class[id]-&gt;font_set_id;\n         const FontSet &amp;fs = fontset_table_.get(font_set_id);\n         for (int config = 0; config &lt; fs.size; ++config) {\n-          const Shape&amp; shape = shape_table_-&gt;GetShape(fs.configs[config]);\n-          for (int c = 0; c &lt; shape.size(); ++c) {\n-            if (char_norm_array[shape[c].unichar_id] &lt; pruner_array[id])\n-              pruner_array[id] = char_norm_array[shape[c].unichar_id];\n+          if (shape_table_-&gt;NumShapes() &gt; fs.configs[config]) {\n+            const Shape shape = shape_table_-&gt;GetShape(fs.configs[config]);\n+            for (int c = 0; c &lt; shape.size(); ++c) {\n+              if (char_norm_array[shape[c].unichar_id] &lt; pruner_array[id])\n+                pruner_array[id] = char_norm_array[shape[c].unichar_id];\n+            }\n           }\n         }\n       }\n</code></pre>\n"}], "owner": {"reputation": 1151, "user_id": 408195, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/22259716faae930605863b4773499d91?s=128&d=identicon&r=PG", "display_name": "Diogo Melo", "link": "https://stackoverflow.com/users/408195/diogo-melo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 685, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1421376402, "creation_date": 1421260880, "question_id": 27950157, "link": "https://stackoverflow.com/questions/27950157/openalpr-exits-with-segmentation-fault-with-custom-traineddata", "title": "OpenALPR exits with segmentation fault with custom traineddata", "body": "<p>I'm using OpenALPR and I have trained the OCR to recognize Mandatory font. When I try to use that traineddata, alpr exits with segmentation fault.</p>\n\n<p>I'm using version 1.2.0 and tesseract 3.03, with leptonica-1.71</p>\n\n<p>When I run it with gdb, I get the following stack trace:</p>\n\n<pre><code>(gdb) bt\n#0  0x00007ffff67ded7b in tesseract::Classify::ComputeCharNormArrays(FEATURE_STRUCT*, INT_TEMPLATES_STRUCT*, unsigned char*, unsigned char*) () from /usr/local/lib/libtesseract.so.3\n#1  0x00007ffff67e3b6b in tesseract::Classify::CharNormTrainingSample(bool, int, tesseract::TrainingSample const&amp;, GenericVector&lt;tesseract::UnicharRating&gt;*) () from /usr/local/lib/libtesseract.so.3\n#2  0x00007ffff6806882 in tesseract::TessClassifier::UnicharClassifySample(tesseract::TrainingSample const&amp;, Pix*, int, int, GenericVector&lt;tesseract::UnicharRating&gt;*) () from /usr/local/lib/libtesseract.so.3\n#3  0x00007ffff67e1b22 in tesseract::Classify::CharNormClassifier(TBLOB*, tesseract::TrainingSample const&amp;, ADAPT_RESULTS*) () from /usr/local/lib/libtesseract.so.3\n#4  0x00007ffff67e1c95 in tesseract::Classify::DoAdaptiveMatch(TBLOB*, ADAPT_RESULTS*) () from /usr/local/lib/libtesseract.so.3\n#5  0x00007ffff67e1f24 in tesseract::Classify::AdaptiveClassifier(TBLOB*, BLOB_CHOICE_LIST*) () from /usr/local/lib/libtesseract.so.3\n#6  0x00007ffff67d993d in tesseract::Wordrec::call_matcher(TBLOB*) () from /usr/local/lib/libtesseract.so.3\n#7  0x00007ffff67d9986 in tesseract::Wordrec::classify_blob(TBLOB*, char const*, C_COL, BlamerBundle*) () from /usr/local/lib/libtesseract.so.3\n#8  0x00007ffff67d6bab in tesseract::Wordrec::classify_piece(GenericVector&lt;SEAM*&gt; const&amp;, short, short, char const*, TWERD*, BlamerBundle*) () from /usr/local/lib/libtesseract.so.3\n#9  0x00007ffff67c808d in tesseract::Wordrec::chop_word_main(WERD_RES*) () from /usr/local/lib/libtesseract.so.3\n#10 0x00007ffff67d9821 in tesseract::Wordrec::cc_recog(WERD_RES*) () from /usr/local/lib/libtesseract.so.3\n#11 0x00007ffff6716e62 in tesseract::Tesseract::recog_word_recursive(WERD_RES*) () from /usr/local/lib/libtesseract.so.3\n#12 0x00007ffff6716ff5 in tesseract::Tesseract::recog_word(WERD_RES*) () from /usr/local/lib/libtesseract.so.3\n#13 0x00007ffff6708160 in tesseract::Tesseract::tess_segment_pass_n(int, WERD_RES*) () from /usr/local/lib/libtesseract.so.3\n#14 0x00007ffff66cf2a5 in tesseract::Tesseract::match_word_pass_n(int, WERD_RES*, ROW*, BLOCK*) () from /usr/local/lib/libtesseract.so.3\n#15 0x00007ffff66cf482 in tesseract::Tesseract::classify_word_pass1(tesseract::WordData*, WERD_RES*) () from /usr/local/lib/libtesseract.so.3\n#16 0x00007ffff66d26d6 in tesseract::Tesseract::classify_word_and_language(void (tesseract::Tesseract::*)(tesseract::WordData*, WERD_RES*), tesseract::WordData*) () from /usr/local/lib/libtesseract.so.3\n#17 0x00007ffff66d2dea in tesseract::Tesseract::RecogAllWordsPassN(int, ETEXT_DESC*, GenericVector&lt;tesseract::WordData&gt;*) () from /usr/local/lib/libtesseract.so.3\n#18 0x00007ffff66d3701 in tesseract::Tesseract::recog_all_words(PAGE_RES*, ETEXT_DESC*, TBOX const*, char const*, int) () from /usr/local/lib/libtesseract.so.3\n#19 0x00007ffff66c203d in tesseract::TessBaseAPI::Recognize(ETEXT_DESC*) () from /usr/local/lib/libtesseract.so.3\n#20 0x00000000004aadf4 in OCR::performOCR (this=0x93d7c0, pipeline_data=0x7fffe0a3a9b0) at /opt/openalpr/src/openalpr/ocr.cpp:79\n#21 0x000000000048845b in plateAnalysisThread (arg=0x7fffffffd380) at /opt/openalpr/src/openalpr/alpr_impl.cpp:261\n#22 0x00000000004df217 in tthread::thread::wrapper_function (aArg=0x93d210) at /opt/openalpr/src/openalpr/support/tinythread.cpp:169\n#23 0x00007ffff6401182 in start_thread (arg=0x7fffe0a3b700) at pthread_create.c:312\n#24 0x00007ffff590e00d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:111\n</code></pre>\n"}, {"tags": ["c++", "tcp", "connection", "poco-libraries", "reactor"], "answers": [{"owner": {"reputation": 458, "user_id": 1560617, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/614c19060ca9e3e224bfc44c7338b6cd?s=128&d=identicon&r=PG", "display_name": "Behrooz", "link": "https://stackoverflow.com/users/1560617/behrooz"}, "is_accepted": false, "score": 0, "last_activity_date": 1427999587, "creation_date": 1427999587, "answer_id": 29420017, "question_id": 27950121, "link": "https://stackoverflow.com/questions/27950121/poco-connection-gets-stuck/29420017#29420017", "title": "POCO connection gets stuck", "body": "<p>The problem was using a faulty NIC/driver. I changed the code to regular POSIX sockets and had the same issue and switching the NIC solved the issue. I am not sure if it was a driver or hardware issue.</p>\n"}], "owner": {"reputation": 458, "user_id": 1560617, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/614c19060ca9e3e224bfc44c7338b6cd?s=128&d=identicon&r=PG", "display_name": "Behrooz", "link": "https://stackoverflow.com/users/1560617/behrooz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 820, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1427999587, "creation_date": 1421260733, "last_edit_date": 1427936540, "question_id": 27950121, "link": "https://stackoverflow.com/questions/27950121/poco-connection-gets-stuck", "title": "POCO connection gets stuck", "body": "<p>I am using POCO reactor pattern for handling incoming tcp connections. Connections might take from couple of seconds to minutes depending on the request type as follows:</p>\n\n<pre><code>  try{\n    ServerSocket serverSocket(port);\n    reactor = new SocketReactor();\n    ParallelSocketAcceptor&lt;BFSTcpServiceHandler,SocketReactor&gt; acceptor(serverSocket, *reactor);\n    //Start Reactor\n    reactor-&gt;run();\n  }catch(Exception&amp;e){\n    LOG(ERROR)&lt;&lt;\"ERROR in initializing TCPServer:\"&lt;&lt;e.message();\n    return;\n  }\n</code></pre>\n\n<p>And here is the Handler:</p>\n\n<pre><code>BFSTcpServiceHandler::BFSTcpServiceHandler(StreamSocket&amp; _socket,\n    SocketReactor&amp; _reactor): socket(_socket),reactor(_reactor) {\n  //Set Keeep Alive for socket\n  socket.setKeepAlive(false);\n\n  //Register Callbacks\n  reactor.addEventHandler(socket, NObserver&lt;BFSTcpServiceHandler,\n    ReadableNotification&gt;(*this, &amp;BFSTcpServiceHandler::onReadable));\n  /*reactor.addEventHandler(socket, NObserver&lt;BFSTcpServiceHandler,\n    WritableNotification&gt;(*this, &amp;BFSTcpServiceHandler::onWriteable));*/\n  reactor.addEventHandler(socket, NObserver&lt;BFSTcpServiceHandler,\n    ShutdownNotification&gt;(*this, &amp;BFSTcpServiceHandler::onShutdown));\n  reactor.addEventHandler(socket, NObserver&lt;BFSTcpServiceHandler,\n    ErrorNotification&gt;(*this, &amp;BFSTcpServiceHandler::onError));\n  reactor.addEventHandler(socket, NObserver&lt;BFSTcpServiceHandler,\n    TimeoutNotification&gt;(*this, &amp;BFSTcpServiceHandler::onTimeout));\n  /*reactor.addEventHandler(socket, NObserver&lt;BFSTcpServiceHandler,\n    IdleNotification&gt;(*this, &amp;BFSTcpServiceHandler::onIdle));*/\n}\n\nBFSTcpServiceHandler::~BFSTcpServiceHandler() {\n  //Unregister Callbacks\n  reactor.removeEventHandler(socket, NObserver&lt;BFSTcpServiceHandler,\n    ReadableNotification&gt;(*this, &amp;BFSTcpServiceHandler::onReadable));\n    ...\n  //Close socket\n  try {\n    socket.close();\n  }catch(...){}\n}\n\nvoid BFSTcpServiceHandler::onReadable(\n    const Poco::AutoPtr&lt;Poco::Net::ReadableNotification&gt;&amp; pNf) {\n  //LOG(ERROR)&lt;&lt;\"onReadable:\"&lt;&lt;socket.peerAddress().toString();\n  try{\n   //Read and process request\n  } catch(Exception &amp;e){\n    LOG(ERROR)&lt;&lt;\"Error in reading request:\"&lt;&lt;e.message();\n    delete this;\n  }\n  //So after a connection is served just close it!\n  delete this;\n}\n\nvoid BFSTcpServiceHandler::onShutdown(\n    const Poco::AutoPtr&lt;Poco::Net::ShutdownNotification&gt;&amp; pNf) {\n  LOG(ERROR)&lt;&lt;\"onShutdown:\"&lt;&lt;socket.peerAddress().toString();\n\n  //Call destructor of this class\n  delete this;\n}\n\nvoid BFSTcpServiceHandler::onWriteable(\n    const Poco::AutoPtr&lt;Poco::Net::WritableNotification&gt;&amp; pNf) {\n  static bool once = true;\n  if(once) {\n    LOG(ERROR)&lt;&lt;\"onWritable:\"&lt;&lt;socket.peerAddress().toString()&lt;&lt;\" keepAlive?\"&lt;&lt;socket.getKeepAlive()&lt;&lt;\" isBlocking?\"&lt;&lt;socket.getBlocking()&lt;&lt;\" noDeley?\"&lt;&lt;socket.getNoDelay();\n    once = false;\n  }\n}\n\nvoid BFSTcpServiceHandler::onTimeout(\n    const Poco::AutoPtr&lt;Poco::Net::TimeoutNotification&gt;&amp; pNf) {\n  LOG(ERROR)&lt;&lt;\"\\nTIMEOUT! onTimeout:\"&lt;&lt;socket.peerAddress().toString();\n}\n\nvoid BFSTcpServiceHandler::onError(\n    const Poco::AutoPtr&lt;Poco::Net::ErrorNotification&gt;&amp; pNf) {\n  LOG(ERROR)&lt;&lt;\"\\nERROR! onError:\"&lt;&lt;socket.peerAddress().toString();\n}\n\nvoid BFSTcpServiceHandler::onIdle(\n    const Poco::AutoPtr&lt;Poco::Net::IdleNotification&gt;&amp; pNf) {\n  LOG(ERROR)&lt;&lt;\"\\nIDLE! onIdle:\"&lt;&lt;socket.peerAddress().toString();\n}\n</code></pre>\n\n<p>The code works fine; however, after a while it gets stuck meaning that the server does accepts connections but onReadable is not called at all anymore. For example, after it gets stuck I can telnet to the server but when I send data onReadable is not fired. Using netstat I realized some data are being kept in the RCV_QEUEUE and reactor does not fire onReadable event. </p>\n\n<p>I thought it's due to hitting connection/file limits of systems but it is not actually many connections open when the system gets stuck.</p>\n\n<p>Any comment or help is appreciated.</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["javascript", "c++", "c", "visual-studio-2010", "emscripten"], "comments": [{"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 1, "creation_date": 1421293274, "post_id": 27950115, "comment_id": 44307581, "body": "Your program is working perfectly for me, printing 99 then 8675309 to the console log in Chrome.  I copied your c++ code above into &quot;squish.cc&quot; and then ran: emcc squish.cc -s EXPORTED_FUNCTIONS=&quot;[&#39;_gsr&#39;,&#39;_main&#39;]&quot;"}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 1, "creation_date": 1421293714, "post_id": 27950115, "comment_id": 44307651, "body": "Next I added <code>&lt;script type=&quot;text&#47;javascript&quot; src=&quot;a.out.js&quot;&gt;&lt;&#47;script&gt;</code> to an html file, as well as your code above in script tags.  Am I doing anything differently from you?"}, {"owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "reply_to_user": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 0, "creation_date": 1421295501, "post_id": 27950115, "comment_id": 44308023, "body": "other than the extension (cpp vs cc), and using visual studio instead of the command line, no. I guess I&#39;ll try using the emscripten command line - and see if I get any different results."}, {"owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "reply_to_user": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "edited": false, "score": 0, "creation_date": 1421296737, "post_id": 27950115, "comment_id": 44308274, "body": "Running it via the command line worked. So, now I know there&#39;s something not set up right in vstudio."}], "answers": [{"comments": [{"owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "edited": false, "score": 1, "creation_date": 1421280578, "post_id": 27954626, "comment_id": 44304557, "body": "I was under the impression that declaring the method using <code>extern &quot;C&quot;</code> and then declaring it outside, as well as defining the method in the .cpp file, would accomplish that. Or is it the case of the second (c++) declaration, compromising it in some way?"}], "owner": {"reputation": 968, "user_id": 1176841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb9f8cd8da97fa3a92e46ebe576e8050?s=128&d=identicon&r=PG", "display_name": "Alon Zakai", "link": "https://stackoverflow.com/users/1176841/alon-zakai"}, "is_accepted": false, "score": 0, "last_activity_date": 1421279521, "creation_date": 1421279521, "answer_id": 27954626, "question_id": 27950115, "link": "https://stackoverflow.com/questions/27950115/emscripten-exported-function-oddities-in-visual-studio/27954626#27954626", "title": "Emscripten exported function oddities in Visual Studio", "body": "<p>Probably the issue here is C++ name mangling. That's a C++ filename, so \"gsr\" turns into something like \"_Z3gsr\". You can avoid that by making it a C file, or using <code>extern \"C\"</code> around that method.</p>\n\n<p>For more see <a href=\"http://kripken.github.io/emscripten-site/docs/getting_started/FAQ.html#why-do-functions-in-my-c-c-source-code-vanish-when-i-compile-to-javascript-and-or-i-get-no-functions-to-process\" rel=\"nofollow\">http://kripken.github.io/emscripten-site/docs/getting_started/FAQ.html#why-do-functions-in-my-c-c-source-code-vanish-when-i-compile-to-javascript-and-or-i-get-no-functions-to-process</a></p>\n"}, {"owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "is_accepted": true, "score": 1, "last_activity_date": 1421299455, "creation_date": 1421299455, "answer_id": 27957288, "question_id": 27950115, "link": "https://stackoverflow.com/questions/27950115/emscripten-exported-function-oddities-in-visual-studio/27957288#27957288", "title": "Emscripten exported function oddities in Visual Studio", "body": "<p>Thanks to Charles Ofria's work in narrowing down the issue, the only real oddity ended up being with the Emscripten Visual Studio plugin. I was on the right track, when I thought that it might just be automatically exporting main - which was correct. The reason it wasn't exporting the other function, was because I put it in the Additional Options, for the Clang/C++ section, instead of the Emcc Linker. </p>\n\n<p>The trouble was, and this is where the \"oddity\" comes in, the Emcc Linker section doesn't appear when you choose <code>Console Application (.js)</code> as the Configuration Type. So, after changing the Target Extension to <code>.html</code> and the Configuration Type to <code>Browser Application (.html)</code> - the Linker section re-appeared, and I was able to put the <code>EXPORTED_FUNCTIONS</code> option, in the correct location.</p>\n\n<p>After building, and copying the output over, both functions were defined, and returned the proper values in the Javascript console. </p>\n"}], "owner": {"reputation": 797, "user_id": 940775, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e1a2da9571eaaaf51e2c8ef248be6479?s=128&d=identicon&r=PG", "display_name": "Digital_Utopia", "link": "https://stackoverflow.com/users/940775/digital-utopia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 2, "accepted_answer_id": 27957288, "answer_count": 2, "score": 3, "last_activity_date": 1421299455, "creation_date": 1421260708, "last_edit_date": 1421298587, "question_id": 27950115, "link": "https://stackoverflow.com/questions/27950115/emscripten-exported-function-oddities-in-visual-studio", "title": "Emscripten exported function oddities in Visual Studio", "body": "<p>I'm just starting to play around with Emscripten, but I've run into something odd, when trying to export functions, for use in JavaScript. The test project has to do with libsquish, but it's not really relevant for the question, other than the header/code filenames. </p>\n\n<p>So - anyway, simple test. </p>\n\n<p><strong>c/c++</strong></p>\n\n<pre><code>//squish.h\nextern \"C\" int main();\nint main();\n\nextern \"C\" int gsr();\nint gsr();\n\n//squish.cpp\nint main()\n{\n    return 99;\n}\n\nint gsr()\n{\n    //return squish::GetStorageRequirements(width,height,flags);\n    return 8675309;\n}\n</code></pre>\n\n<p><strong>Additional Options/Command Line</strong></p>\n\n<pre><code>-s EXPORTED_FUNCTIONS=\"['_gsr','_main']\" \n</code></pre>\n\n<p><strong>Javascript</strong></p>\n\n<pre><code>main=Module.cwrap('main','number',null);\nconsole.log(main());\n\nGetStorageRequirements = Module.cwrap('gsr', 'number',null);\nconsole.log(GetStorageRequirements());\n</code></pre>\n\n<p><strong>Javascript Console (Chrome)</strong></p>\n\n<pre><code>99\nAssertion failed: Cannot call unknown function gsr (perhaps LLVM optimizations or closure removed it?)\nAssertion failed: Cannot call unknown function gsr (perhaps LLVM optimizations or closure removed it?)\n</code></pre>\n\n<p>And on top of everything else, optimization is disabled (O0).</p>\n\n<p>So, what's the deal here? Same return types, same number of parameters, defined in exactly the same way, with the only difference being the name of the function. Yet one works, and the other is \"unknown\". </p>\n\n<p>The only possible, logical cause is that it's automatically exporting main, and ignoring the EXPORTED_FUNCTIONS all together. But if that's the case, I have no idea why. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 3, "creation_date": 1421260611, "post_id": 27950055, "comment_id": 44295154, "body": "The correct syntax would be <code>bRedChannel&lt;Mat_, uchar&gt;(roi, masked);</code> but template-template parameters don&#39;t need to be used here. Have <code>bRedChannel</code> deduce its arguments instead. Or just don&#39;t use a template at all."}, {"owner": {"reputation": 49, "user_id": 4451242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6dbc61a2e8ecaff0b0561ced3acdab?s=128&d=identicon&r=PG&f=1", "display_name": "Hanz0", "link": "https://stackoverflow.com/users/4451242/hanz0"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1421261196, "post_id": 27950055, "comment_id": 44295471, "body": "@0x499602D2 you&#39;re right indeed... the possibility came to my mind and I just became curious!"}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4451242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6dbc61a2e8ecaff0b0561ced3acdab?s=128&d=identicon&r=PG&f=1", "display_name": "Hanz0", "link": "https://stackoverflow.com/users/4451242/hanz0"}, "edited": false, "score": 0, "creation_date": 1421261388, "post_id": 27950082, "comment_id": 44295600, "body": "Didn&#39;t work... now I&#39;m getting the error &quot;undefined reference to `void bRedChannel&lt;cv::Mat_, unsigned char&gt;(cv::Mat_&lt;unsigned char&gt;, cv::Mat_&lt;unsigned char&gt;)&#180; &quot;. Thanks for the reply @R Sahu"}, {"owner": {"reputation": 49, "user_id": 4451242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6dbc61a2e8ecaff0b0561ced3acdab?s=128&d=identicon&r=PG&f=1", "display_name": "Hanz0", "link": "https://stackoverflow.com/users/4451242/hanz0"}, "reply_to_user": {"reputation": 99973, "user_id": 241631, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6099f76a0c24b09ca71f3e25eea7ce65?s=128&d=identicon&r=PG", "display_name": "Praetorian", "link": "https://stackoverflow.com/users/241631/praetorian"}, "edited": false, "score": 0, "creation_date": 1421261463, "post_id": 27950082, "comment_id": 44295642, "body": "I would ask this too @Praetorian =P"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 49, "user_id": 4451242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6dbc61a2e8ecaff0b0561ced3acdab?s=128&d=identicon&r=PG&f=1", "display_name": "Hanz0", "link": "https://stackoverflow.com/users/4451242/hanz0"}, "edited": false, "score": 1, "creation_date": 1421261574, "post_id": 27950082, "comment_id": 44295697, "body": "@Hanz0, that&#39;s an altogether different error. Is the function defined in a .h files and the .h file <code>#include</code>d in the .cpp file?"}, {"owner": {"reputation": 49, "user_id": 4451242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6dbc61a2e8ecaff0b0561ced3acdab?s=128&d=identicon&r=PG&f=1", "display_name": "Hanz0", "link": "https://stackoverflow.com/users/4451242/hanz0"}, "edited": false, "score": 0, "creation_date": 1421261735, "post_id": 27950082, "comment_id": 44295781, "body": "yes, it is in a .h and the file is included in the .cpp"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 49, "user_id": 4451242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6dbc61a2e8ecaff0b0561ced3acdab?s=128&d=identicon&r=PG&f=1", "display_name": "Hanz0", "link": "https://stackoverflow.com/users/4451242/hanz0"}, "edited": false, "score": 0, "creation_date": 1421265413, "post_id": 27950082, "comment_id": 44297798, "body": "@Hanz0, you accepted my answer. Does it mean that your problems are resolved?"}, {"owner": {"reputation": 49, "user_id": 4451242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6dbc61a2e8ecaff0b0561ced3acdab?s=128&d=identicon&r=PG&f=1", "display_name": "Hanz0", "link": "https://stackoverflow.com/users/4451242/hanz0"}, "edited": false, "score": 0, "creation_date": 1421266094, "post_id": 27950082, "comment_id": 44298149, "body": "&lt;/p&gt;@RSahu, yes, your answer is right! My guess is that the problem is between me and OpenCV now =P I&#39;ve updated my question with the actual code.&lt;/p&gt; Thanks for the support and feel free to say something if it is something wrong with the code!"}, {"owner": {"reputation": 49, "user_id": 4451242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6dbc61a2e8ecaff0b0561ced3acdab?s=128&d=identicon&r=PG&f=1", "display_name": "Hanz0", "link": "https://stackoverflow.com/users/4451242/hanz0"}, "edited": false, "score": 0, "creation_date": 1421267641, "post_id": 27950082, "comment_id": 44298860, "body": "Perfect! I&#39;ve forgot to pass by reference. Thanks a lot @RSahu! Worked perfectly!"}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 4, "last_activity_date": 1421449368, "last_edit_date": 1421449368, "creation_date": 1421260610, "answer_id": 27950082, "question_id": 27950055, "link": "https://stackoverflow.com/questions/27950055/using-templates-as-template-function-argument/27950082#27950082", "title": "Using templates as template function argument", "body": "<p>Instead of</p>\n\n<pre><code>bRedChannel&lt; Mat_&lt;uchar&gt;, uchar &gt;(roi, masked);\n            // ^^^^^^^^^ \n</code></pre>\n\n<p>use</p>\n\n<pre><code>bRedChannel&lt; Mat_, uchar &gt;(roi, masked);\n</code></pre>\n\n<p>As a rule, prefer not to explicitly use the typenames when invoking a function template. The compiler should be able to deduce the typenames. Use the explicit typenames only if the compiler cannot deduce the typenames or you want to use different typenames than what the compiler deduces.</p>\n\n<p>Use</p>\n\n<pre><code>bRedChannel(roi, masked);\n</code></pre>\n\n<p>Use the typenames explicitly only if necessary.</p>\n\n<p><strong>Additional Feedback</strong></p>\n\n<p>You have:</p>\n\n<pre><code>template&lt; template&lt;typename&gt; class C, typename T&gt;\nvoid bRedChannel(C&lt;T&gt; src, C&lt;T&gt; out)\n{\n\n    for (int i = 0; i &lt; src.rows; i += 2)\n    {\n        for (int j = 0; j &lt; src.cols; j += 2)\n        {\n            out(i, j) = src(i, j);\n        }\n    }\n};\n</code></pre>\n\n<p>and you are using it with:</p>\n\n<pre><code>  Mat_&lt;uchar&gt; masked;\n  bRedChannel(roi, masked);\n</code></pre>\n\n<p>You are modifying a local copy of <code>masked</code> in <code>bRedChannel</code>. Those modifications have no effect on <code>masked</code> in <code>main</code>. The first argument to <code>bRedChannel</code> also makes a copy of the input argument. It could be made fore efficient by changing the type to <code>C&lt;T&gt; const&amp;</code>.</p>\n\n<p>I would suggest changing <code>bRedChannel</code> to:</p>\n\n<pre><code>template&lt; template&lt;typename&gt; class C, typename T&gt;\nvoid bRedChannel(C&lt;T&gt; const&amp; src, C&lt;T&gt;&amp; out)\n{\n\n    for (int i = 0; i &lt; src.rows; i += 2)\n    {\n        for (int j = 0; j &lt; src.cols; j += 2)\n        {\n            out(i, j) = src(i, j);\n        }\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4451242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6dbc61a2e8ecaff0b0561ced3acdab?s=128&d=identicon&r=PG&f=1", "display_name": "Hanz0", "link": "https://stackoverflow.com/users/4451242/hanz0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 27950082, "answer_count": 1, "score": 0, "last_activity_date": 1421449368, "creation_date": 1421260473, "last_edit_date": 1421265312, "question_id": 27950055, "link": "https://stackoverflow.com/questions/27950055/using-templates-as-template-function-argument", "title": "Using templates as template function argument", "body": "<p></p>Hi everybody!\n</p> I'm starting to learn about templates in C++, so sorry if the question is too simple =P\n</p>I'm trying to write a function like this:</p>\n\n<pre><code>template&lt; template&lt;typename&gt; class C, typename T&gt;\nvoid bRedChannel(C&lt;T&gt; src, C&lt;T&gt; out)\n{\n    // do something\n}\n</code></pre>\n\n<p>and I'm trying to call the function this way:</p>\n\n<pre><code>Mat_&lt;uchar&gt; roi = image(Rect(10, 10, rows, cols));\nMat_&lt;uchar&gt; masked;\nbRedChannel&lt; Mat_&lt;uchar&gt;, uchar &gt;(roi, masked);\n</code></pre>\n\n<p>that results in the error</p>\n\n<pre><code>no matching function for call to \u2018bRedChannel(cv::Mat_&lt;unsigned char&gt;&amp;, cv::Mat_&lt;unsigned char&gt;&amp;)\u00b4\n</code></pre>\n\n<p>What's wrong?</p>\n\n<p>Update:</p>\n\n<p>Here's the code as it is now:</p>\n\n<pre><code>#include &lt;cv.hpp&gt;\n#include &lt;highgui/highgui.hpp&gt;\n#include &lt;iostream&gt;\n\nusing namespace cv;\nusing std::cout;\nusing std::endl;\n\ntemplate&lt; template&lt;typename&gt; class C, typename T&gt;\nvoid bRedChannel(C&lt;T&gt; src, C&lt;T&gt; out)\n{\n\n    for (int i = 0; i &lt; src.rows; i += 2)\n    {\n        for (int j = 0; j &lt; src.cols; j += 2)\n        {\n            out(i, j) = src(i, j);\n        }\n    }\n};\n\nint main( int argc, char** argv )\n{\n  int rows = 512, cols = 512;\n\n  Mat_&lt;uchar&gt; image = imread(\"Autumn-Desktop.jpg\", CV_LOAD_IMAGE_GRAYSCALE);\n  Mat_&lt;uchar&gt; roi = image(Rect(10, 10, rows, cols));\n  image.release();\n\n  Mat_&lt;uchar&gt; masked;\n  bRedChannel(roi, masked);\n\n  namedWindow( \"Result\" );\n  imshow( \"Result\", masked );\n\n  waitKey(0);\n\n  imwrite(\"teste.png\", masked);\n\n  return 0;\n}\n</code></pre>\n\n<p>It runs now, but it is interrupted. The problem may be with the algorithm now, but my question was answered! Thanks @RSahu!</p>\n"}, {"tags": ["c++"], "owner": {"reputation": 41, "user_id": 4023704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99cf048ae3ff95402be0b6fb2bd9ca7f?s=128&d=identicon&r=PG&f=1", "display_name": "Ana Karenina", "link": "https://stackoverflow.com/users/4023704/ana-karenina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1421324197, "creation_date": 1421259399, "last_edit_date": 1421324197, "question_id": 27949759, "link": "https://stackoverflow.com/questions/27949759/retrieve-skype-recent-chats", "title": "Retrieve Skype recent chats", "body": "<p>I'm trying to pull-out the content of the recent Skype messages window, which is contained under the TChatContentControl window class (a child of TConversationForm, which at its turn is a child of tSkMainForm). I use C++.</p>\n\n<p>I was trying to use the WM_GETTEXT SendMessage method without success.\nI was further trying to use the AccessibleObjectFromEvent method, retrieving the value/name of the IAccessible interface without success.</p>\n\n<p>I was further expecting that Skype would store this data as html and used WM_HTML_GETOBJECT messages to interpret IHTMLElement structures (works perfectly with Yahoo Messenger), but still without success.</p>\n\n<p>Anybody more experienced did it before and knows how is Skype storing this data and what is the way out of it?</p>\n\n<p>Many thanks for your kind support.</p>\n\n<p>In an attempt to revitalize a bit this thread, let me share with you a piece of simplified code that\nwill do with Yahoo Messenger what I'm trying to achieve with Skype:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;Oleacc.h&gt;\n#include &lt;atlbase.h&gt;\n#include &lt;mshtml.h&gt;    \n\n#pragma comment (lib, \"Oleacc.lib\")\n\nvoid CALLBACK WinEventProc(HWINEVENTHOOK hWinEventHook, DWORD event, HWND hwnd, LONG idObject, LONG idChild, DWORD dwEventThread, DWORD dwmsEventTime) \n{\n    char className[50];\n    GetClassName(hwnd, className, 50);\n\n    if (strcmp(className, \"CTabbedIMHost\") == 0)\n    {\n        HWND wndbase = FindWindowEx(hwnd, 0, \"CConvWndBase\", NULL);\n        HWND container = FindWindowEx(wndbase, 0, \"YHTMLContainer\", NULL);\n        HWND exp = FindWindowEx(container, 0, \"Internet Explorer_Server\", NULL);\n\n        if (NULL != exp)\n        {\n            CComPtr&lt;IHTMLDocument2&gt; ieDoc;\n            LRESULT lRes;\n\n            UINT uMsg = RegisterWindowMessage(_T(\"WM_HTML_GETOBJECT\"));\n            SendMessageTimeout(exp, uMsg, 0L, 0L, SMTO_ABORTIFHUNG, 1000, (DWORD*)&amp;lRes);\n\n            HRESULT hRes = ObjectFromLresult(lRes, IID_IHTMLDocument2, 0, (void**)&amp;ieDoc);\n\n            if (SUCCEEDED(hRes))\n            {\n                CComPtr&lt;IHTMLElement&gt; pHTMLElement;\n                hRes = ieDoc-&gt;get_body(&amp;pHTMLElement);\n                BSTR bstrBodyText;\n                pHTMLElement-&gt;get_innerText(&amp;bstrBodyText);\n\n                // MessageBoxW(NULL, bstrBodyText, L\"Yahoo Messenger\", MB_OK | MB_ICONASTERISK);\n            }\n        }\n    }\n}\n\nint WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR szCmdParam, int iCmdShow)\n{\n    MSG msg;\n\n    CoInitializeEx(NULL, COINIT_MULTITHREADED);\n    HWINEVENTHOOK LHook = SetWinEventHook(EVENT_OBJECT_FOCUS, EVENT_OBJECT_VALUECHANGE, 0, WinEventProc, 0, 0, WINEVENT_SKIPOWNPROCESS);\n\n    while (GetMessage(&amp;msg, NULL, 0, 0) != 0)\n    {\n        TranslateMessage(&amp;msg);\n        DispatchMessage(&amp;msg);\n    }\n\n    UnhookWinEvent(LHook);\n    CoUninitialize();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1421259612, "post_id": 27949748, "comment_id": 44294614, "body": "You might add the constructor <code>Derived(const Base&amp;)</code> to provide the conversion"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1421259617, "post_id": 27949748, "comment_id": 44294616, "body": "The &quot;is-a&quot; relationship only works in one direction."}, {"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "edited": false, "score": 0, "creation_date": 1421259680, "post_id": 27949748, "comment_id": 44294653, "body": "Ok, But my question was , why not by default."}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1421259715, "post_id": 27949748, "comment_id": 44294671, "body": "The answer is in the question. Garbage values."}, {"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "edited": false, "score": 0, "creation_date": 1421259990, "post_id": 27949748, "comment_id": 44294829, "body": "This is not an exact duplicate, previous question was about copy assignment, and no one talks about initialization."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1421260168, "post_id": 27949748, "comment_id": 44294932, "body": "The derived to base conversion can be implicit. A derived class consists of a base class <i>suboject</i>. <code>Base B1 = D</code> means to initialize <code>B1</code> by copying the <code>Base</code> subobject from <code>D</code> into <code>B1</code>.  The base to derived conversion is not implicit. A <code>Base</code> class does not contain its derived class object, only the other way around. However, if you have a reference or pointer to a <code>Base</code> class, you can explicitly cast through <code>static_cast</code> if you know its dynamic type is a <code>Derived</code> class or <code>dynamic_cast</code> (if you aren&#39;t sure) to get the pointed-to (or referred-to) derived object."}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1421260252, "post_id": 27949748, "comment_id": 44294980, "body": "As for what a scalar is, see <a href=\"http://stackoverflow.com/questions/14821936/what-is-a-scalar-object-in-c\" title=\"what is a scalar object in c\">stackoverflow.com/questions/14821936/&hellip;</a>"}], "answers": [{"owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "is_accepted": false, "score": 0, "last_activity_date": 1421259882, "last_edit_date": 1421259882, "creation_date": 1421259573, "answer_id": 27949806, "question_id": 27949748, "link": "https://stackoverflow.com/questions/27949748/assigning-base-class-object-to-derived-class-object/27949806#27949806", "title": "Assigning base class object to derived class object", "body": "<p>If <code>B</code>'s member variables are declared private, then that would stop <code>D1</code> from having <code>B</code>'s values.</p>\n\n<p>As far as your second question, You can assign <code>Base B1 = D;</code> because the compiler knows <code>D</code> is a derived class from <code>B</code>. However, in <code>Derived D1 = B;</code>, the compiler has no indication of that relationship.</p>\n\n<p>As far as to your question of what a scalar is, scalars are ints, chars, pointers, etc. They are different from structs and classes, which are user-defined types.</p>\n"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 4, "last_activity_date": 1421260093, "last_edit_date": 1421260093, "creation_date": 1421259678, "answer_id": 27949844, "question_id": 27949748, "link": "https://stackoverflow.com/questions/27949748/assigning-base-class-object-to-derived-class-object/27949844#27949844", "title": "Assigning base class object to derived class object", "body": "<p>The statement</p>\n\n<pre><code>Derived D1 = B;\n</code></pre>\n\n<p>is an initialization, not an assignment (even if it looks like an assignment).</p>\n\n<p>It attempts to use the <code>Derived</code> copy constructor, but that copy constructor takes an argument <code>Derived const&amp;</code>. And the <code>B</code> instance can't be automatically converted down to a full <code>Derived</code>.</p>\n\n<p>If you really want a slice assignment &ndash; assigning only to the <code>Base</code> slice of <code>D1</code> &ndash; then you can explicitly use the <code>Base::operator=</code>:</p>\n\n<pre><code>Derived D1;\nD1.Base::operator=( B );\n</code></pre>\n\n<p>Another way to express that:</p>\n\n<pre><code>Derived D1;\nstatic_cast&lt;Base&amp;&gt;( D1 ) = B;\n</code></pre>\n\n<p>But it smells bad. ;-)</p>\n\n<hr>\n\n<p>Re</p>\n\n<blockquote>\n  <p><strong>&rdquo;</strong> What is a scalar type?</p>\n</blockquote>\n\n<p>That's the same word as in &ldquo;scale&rdquo;. A scalar type provides a single magnitude value, so that values of the type can be compared with <code>==</code> (and ideally also <code>&lt;</code>). However, in C++ pointers and even member pointers are regarded as scalar types:</p>\n\n<p><strong>C++11 \u00a73.9/9</strong> [basic.types]:</p>\n\n<blockquote>\n  <p><strong>&rdquo;</strong> Arithmetic types (3.9.1), enumeration types, pointer types, pointer to member types (3.9.2), std::nullptr_t, and cv-qualified versions of these types (3.9.3) are collectively called <em>scalar types</em>.</p>\n</blockquote>\n"}], "owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "accepted_answer_id": 27949844, "answer_count": 2, "score": 1, "last_activity_date": 1421261046, "creation_date": 1421259383, "question_id": 27949748, "link": "https://stackoverflow.com/questions/27949748/assigning-base-class-object-to-derived-class-object", "title": "Assigning base class object to derived class object", "body": "<pre><code>    class Base{};\n    class Derived: public Base{};\n\n    int main()\n    {\n        Base B;\n        Derived D;\n\n        Base B1 = D;//OK\n        Derived D1 = B;//error: conversion from \u2018Base\u2019 to non-scalar \n                       //type \u2018Derived\u2019 requested\n        return 1;\n    }\n</code></pre>\n\n<p>I know derived class has a is-a relationship with base class.</p>\n\n<p>What stops the Derived D1 having values from B and remaining member variables(if any) with some garbage value?</p>\n\n<p>Or</p>\n\n<p>What does the error message </p>\n\n<blockquote>\n  <p>conversion from \u2018Base\u2019 to non-scalar type \u2018Derived\u2019 requested Derived D1 = B;</p>\n</blockquote>\n\n<p>say? What is a scalar type?</p>\n"}, {"tags": ["c++", "opencv", "kinect", "kinect-sdk"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1421259362, "post_id": 27949705, "comment_id": 44294467, "body": "So I presume you&#39;re getting a bunch of link errors. You should have a look <a href=\"http://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix\">through here</a>. We can&#39;t do much to help beyond that with the little information that you&#39;ve provided."}, {"owner": {"reputation": 329, "user_id": 1877058, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qLZNy.jpg?s=128&g=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/1877058/laura"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1421259469, "post_id": 27949705, "comment_id": 44294537, "body": "Updating the question to provide more info"}, {"owner": {"reputation": 1056, "user_id": 2970916, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1456170059/picture?type=large", "display_name": "user2970916", "link": "https://stackoverflow.com/users/2970916/user2970916"}, "edited": false, "score": 0, "creation_date": 1421259888, "post_id": 27949705, "comment_id": 44294764, "body": "You need to make sure you have #include directories and lib directories setup properly in your solution properties. It sounds like wherever you are linking to does not have NuiApi.h, or you are not linking at all."}, {"owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1421260012, "post_id": 27949705, "comment_id": 44294840, "body": "My advice is to concentrate on learning C++ at somewhat decent level, then go for the image processing and Kinect. Learning a language in a specific content (OpenCV, Kinect) has the huge advantage that it will limit your knowledge on that specific language and you will have difficulties to adapt if something else comes your way."}, {"owner": {"reputation": 329, "user_id": 1877058, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qLZNy.jpg?s=128&g=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/1877058/laura"}, "reply_to_user": {"reputation": 1056, "user_id": 2970916, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1456170059/picture?type=large", "display_name": "user2970916", "link": "https://stackoverflow.com/users/2970916/user2970916"}, "edited": false, "score": 0, "creation_date": 1421260348, "post_id": 27949705, "comment_id": 44295022, "body": "@user2970916 Checked the lib directories and changed accordingly, now I&#39;m getting a bunch of compile-time errors coming from NuiApi.h   ... I don&#39;t know how to react to this"}, {"owner": {"reputation": 329, "user_id": 1877058, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qLZNy.jpg?s=128&g=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/1877058/laura"}, "reply_to_user": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "edited": false, "score": 0, "creation_date": 1421260439, "post_id": 27949705, "comment_id": 44295069, "body": "@rbaleksandar Thanks for the advice! Sadly my current job makes going at a slower pace impossible for me"}, {"owner": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "edited": false, "score": 0, "creation_date": 1421265645, "post_id": 27949705, "comment_id": 44297933, "body": "The error states that the compiler didn&#39;t find <b>NuiApi.h</b> in the <b>include</b> directories. Check the project properties, and make sure to add that directory to <code>Configuration Properties &gt;&gt; C&#47;C++ &gt;&gt; General &gt;&gt; Additional Include Directories</code>."}], "owner": {"reputation": 329, "user_id": 1877058, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qLZNy.jpg?s=128&g=1", "display_name": "Laura", "link": "https://stackoverflow.com/users/1877058/laura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1421259668, "creation_date": 1421259222, "last_edit_date": 1421259668, "question_id": 27949705, "link": "https://stackoverflow.com/questions/27949705/getting-started-with-c-kinect-and-opencv", "title": "Getting started with C++, Kinect and OpenCV", "body": "<p>I'm trying to learn C++, get into image processing and Kinect development using the 1.8 version of Microsoft's SDK, OpenCV and Visual C++ 2010 Express. I followed the steps described <a href=\"http://www.cs.princeton.edu/~edwardz/tutorials/kinect/kinect0.html\" rel=\"nofollow\">here</a> (sans the OpenGL part) to 'include' the Kinect and OpenCV libraries, but I don't seem to be able to do so. I copied and pasted OpenCV's dlls into the build directory to get that working but I don't know what to do about the Kinect. Any clues on what I might be doing wrong?</p>\n\n<p>EDIT: A little bit more of info. I only have a main.cpp file with the following two lines at the top (is it called header guard?):</p>\n\n<pre><code>#include &lt;opencv2/opencv.hpp&gt;\n#include &lt;NuiApi.h&gt;\n</code></pre>\n\n<p>The second one makes the compiler yell at me:</p>\n\n<pre><code>fatal error C1083: Cannot open include file: 'NuiApi.h': No such file or directory\n</code></pre>\n\n<p>Now these files should be reachable given the property sheets I configured earlier.</p>\n"}, {"tags": ["c++", "qt", "grayscale", "qimage"], "comments": [{"owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "edited": false, "score": 1, "creation_date": 1421259326, "post_id": 27949569, "comment_id": 44294438, "body": "While this will still not be the best way, try switching your for loops (so you iterate ii first, jj second). Depending on the memory layout, this could lead to better cache coherency and make the code faster."}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "reply_to_user": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "edited": false, "score": 0, "creation_date": 1421259403, "post_id": 27949569, "comment_id": 44294492, "body": "@Daerst Yeah, good suggestion, but no point optimizing a workaround if I find a better solution anyway. If no other solution exists, then maybe."}], "answers": [{"comments": [{"owner": {"reputation": 216, "user_id": 8116804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dKTK3.jpg?s=128&g=1", "display_name": "Konjit W", "link": "https://stackoverflow.com/users/8116804/konjit-w"}, "edited": false, "score": 0, "creation_date": 1596530423, "post_id": 27952197, "comment_id": 111832925, "body": "What if I want to scan an image vertically?"}], "owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "is_accepted": true, "score": 11, "last_activity_date": 1421663114, "last_edit_date": 1421663114, "creation_date": 1421268693, "answer_id": 27952197, "question_id": 27949569, "link": "https://stackoverflow.com/questions/27949569/convert-a-qimage-to-grayscale/27952197#27952197", "title": "Convert a QImage to grayscale", "body": "<p>Rather than using the <a href=\"http://qt-project.org/doc/qt-4.8/qimage.html#pixel\" rel=\"noreferrer\">slow functions</a> <code>QImage::pixel</code> and <code>QImage::setPixel</code>, use \n<code>QImage::scanline</code> to access the data. Pixels on a scan (horizontal line ) are consecutive. Assuming you have a 32 bpp image, you can use QRgb to iterate over the scan. Finally always put the x coordinate in the inner loop. Which gives :</p>\n\n<pre><code>for (int ii = 0; ii &lt; image.height(); ii++) {\n    uchar* scan = image.scanLine(ii);\n    int depth =4;\n    for (int jj = 0; jj &lt; image.width(); jj++) {\n\n        QRgb* rgbpixel = reinterpret_cast&lt;QRgb*&gt;(scan + jj*depth);\n        int gray = qGray(*rgbpixel);\n        *rgbpixel = QColor(gray, gray, gray).rgba();\n    }\n}\n</code></pre>\n\n<p><strong><em>A quick test with an 3585 x 2386 image gave</em></strong> </p>\n\n<pre><code>********* Start testing of TestImage *********\nConfig: Using QTest library 4.7.4, Qt 4.7.4\nPASS   : TestImage::initTestCase()\n\nRESULT : TestImage::grayscaleOp():\n     390 msecs per iteration (total: 390, iterations: 1)\nPASS   : TestImage::grayscaleOp()\n\nRESULT : TestImage::grayscaleFast():\n     125 msecs per iteration (total: 125, iterations: 1)\nPASS   : TestImage::grayscaleFast()\n\nPASS   : TestImage::cleanupTestCase()\nTotals: 4 passed, 0 failed, 0 skipped\n********* Finished testing of TestImage *********\n</code></pre>\n\n<p><strong><em>Source code:</em></strong>\ntestimage.h file:</p>\n\n<pre><code>#ifndef TESTIMAGE_H\n#define TESTIMAGE_H\n\n#include &lt;QtTest/QtTest&gt;\n\n#include &lt;QObject&gt;\n#include &lt;QImage&gt;\n\nclass TestImage : public QObject\n{\n    Q_OBJECT\npublic:\n    explicit TestImage(QObject *parent = 0);\n\nsignals:\n\nprivate slots:\n    void grayscaleOp();\n\n    void grayscaleFast();\n\nprivate:\n    QImage imgop;\n    QImage imgfast;\n};\n\n#endif // TESTIMAGE_H\n</code></pre>\n\n<p>testimage.cpp file:</p>\n\n<pre><code>#include \"testimage.h\"\n\nTestImage::TestImage(QObject *parent)\n    : QObject(parent)\n    , imgop(\"path_to_test_image.png\")\n    , imgfast(\"path_to_test_image.png\")\n{\n}\n\n\nvoid TestImage::grayscaleOp()\n{\n    QBENCHMARK\n    {\n        QImage&amp; image = imgop;\n\n        for (int ii = 0; ii &lt; image.width(); ii++) {\n            for (int jj = 0; jj &lt; image.height(); jj++) {\n                int gray = qGray(image.pixel(ii, jj));\n                image.setPixel(ii, jj, QColor(gray, gray, gray).rgb());\n            }\n        }\n    }\n}\n\nvoid TestImage::grayscaleFast()\n{\n\n    QBENCHMARK {\n\n    QImage&amp; image = imgfast;\n\n\n    for (int ii = 0; ii &lt; image.height(); ii++) {\n        uchar* scan = image.scanLine(ii);\n        int depth =4;\n        for (int jj = 0; jj &lt; image.width(); jj++) {\n\n            QRgb* rgbpixel = reinterpret_cast&lt;QRgb*&gt;(scan + jj*depth);\n            int gray = qGray(*rgbpixel);\n            *rgbpixel = QColor(gray, gray, gray).rgba();\n        }\n    }\n\n    }\n}\n\nQTEST_MAIN(TestImage)\n</code></pre>\n\n<p>pro file:</p>\n\n<pre><code>QT       += core gui\n\ngreaterThan(QT_MAJOR_VERSION, 4): QT += widgets\n\nTARGET = QImageTest\nTEMPLATE = app\n\nCONFIG  += qtestlib\n\nSOURCES += testimage.cpp\n\nHEADERS += testimage.h\n</code></pre>\n\n<p><strong><em>Important note:</em></strong></p>\n\n<ul>\n<li>You already get an important performance boost just by inverting the loops. In this test case it was <code>~90ms</code>.</li>\n<li>You may use other libraries like opencv to make the grayscale conversion and then build the Qimage from an opencv buffer. I expect an even better performance improvement. </li>\n</ul>\n"}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "is_accepted": false, "score": 4, "last_activity_date": 1421664541, "creation_date": 1421664541, "answer_id": 28022872, "question_id": 27949569, "link": "https://stackoverflow.com/questions/27949569/convert-a-qimage-to-grayscale/28022872#28022872", "title": "Convert a QImage to grayscale", "body": "<p>I'll post a slightly modified version of @UmNyobe's code. I just increment a pointer for the scan lines instead of calculating each pixel via an index.</p>\n\n<pre><code>// We assume the format to be RGB32!!!\nQ_ASSERT(image.format() == QImage::Format_RGB32);\nfor (int ii = 0; ii &lt; image.height(); ii++) {\n    QRgb *pixel = reinterpret_cast&lt;QRgb*&gt;(image.scanLine(ii));\n    QRgb *end = pixel + image.width();\n    for (; pixel != end; pixel++) {\n        int gray = qGray(*pixel);\n        *pixel = QColor(gray, gray, gray).rgb();\n    }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 21281, "user_id": 1122645, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/mrljv.png?s=128&g=1", "display_name": "UmNyobe", "link": "https://stackoverflow.com/users/1122645/umnyobe"}, "edited": false, "score": 0, "creation_date": 1454942482, "post_id": 30505159, "comment_id": 58256041, "body": "bits works when you are guaranteed to have consecutive pixels between two rows. I used scanline to be more conservative. For instance a image created using <code>QImage::QImage(uchar * data, int width, int height, int bytesPerLine, Format format)</code> may have <code>bytesPerLine &gt; width*sizeofpixel()</code>."}], "owner": {"reputation": 606, "user_id": 4530464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62848e9db68fa091fac87d93b4edfe6e?s=128&d=identicon&r=PG", "display_name": "Johnny Thunderman", "link": "https://stackoverflow.com/users/4530464/johnny-thunderman"}, "is_accepted": false, "score": 0, "last_activity_date": 1432812128, "creation_date": 1432812128, "answer_id": 30505159, "question_id": 27949569, "link": "https://stackoverflow.com/questions/27949569/convert-a-qimage-to-grayscale/30505159#30505159", "title": "Convert a QImage to grayscale", "body": "<p>Internal qt class <code>QPixmapColorizeFilter</code> uses function <code>grayscale</code> that solves similar topic.</p>\n\n<p>I derived following function from it, that should solve the problem.</p>\n\n<p>Important part is converting image to 32-bit format, so you can consider each pixel as 32-bit value and you do not need to concern about bit alignment.</p>\n\n<p>You can also use <code>bits</code> function directly and iterate over all pixels instead of iterating over lines and columns. With this trick you avoid multiplication performed in <code>scanLine</code> function.</p>\n\n<pre><code>QImage convertToGrayScale(const QImage &amp;srcImage) {\n     // Convert to 32bit pixel format\n     QImage dstImage = srcImage.convertToFormat(srcImage.hasAlphaChannel() ?\n              QImage::Format_ARGB32 : QImage::Format_RGB32);\n\n     unsigned int *data = (unsigned int*)dstImage.bits();\n     int pixelCount = dstImage.width() * dstImage.height();\n\n     // Convert each pixel to grayscale\n     for(int i = 0; i &lt; pixelCount; ++i) {\n        int val = qGray(*data);\n        *data = qRgba(val, val, val, qAlpha(*data));\n        ++data;\n     }\n\n     return dstImage;\n  }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1051, "user_id": 3041394, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7cUJd.jpg?s=128&g=1", "display_name": "schlenger", "link": "https://stackoverflow.com/users/3041394/schlenger"}, "edited": false, "score": 0, "creation_date": 1604233026, "post_id": 47379096, "comment_id": 114278433, "body": "This should be the accepted answer. Worked for me - thanks :)"}], "owner": {"reputation": 141, "user_id": 6790383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BMOCp.jpg?s=128&g=1", "display_name": "baislsl", "link": "https://stackoverflow.com/users/6790383/baislsl"}, "is_accepted": false, "score": 14, "last_activity_date": 1511443727, "last_edit_date": 1511443727, "creation_date": 1511108698, "answer_id": 47379096, "question_id": 27949569, "link": "https://stackoverflow.com/questions/27949569/convert-a-qimage-to-grayscale/47379096#47379096", "title": "Convert a QImage to grayscale", "body": "<p>Since Qt 5.5, you can call <a href=\"https://doc.qt.io/qt-5/qimage.html#convertToFormat\" rel=\"noreferrer\">QImage::convertToFormat()</a> to convert a QImage to grayscale as follows:</p>\n\n<pre><code>QImage image = ...;\nimage.convertToFormat(QImage::Format_Grayscale8);\n</code></pre>\n"}], "owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19668, "favorite_count": 3, "accepted_answer_id": 27952197, "answer_count": 4, "score": 11, "last_activity_date": 1511443727, "creation_date": 1421258764, "last_edit_date": 1421259109, "question_id": 27949569, "link": "https://stackoverflow.com/questions/27949569/convert-a-qimage-to-grayscale", "title": "Convert a QImage to grayscale", "body": "<p>I have a QImage and I need to convert it to grayscale, then later paint over that with colors. I found an <code>allGray()</code> and <code>isGrayScale()</code> function to check if an image is already grayscale, but no <code>toGrayScale()</code> or similarly-named function.</p>\n\n<p>Right now I'm using this code, but it's does not have a very good performance:</p>\n\n<pre><code>for (int ii = 0; ii &lt; image.width(); ii++) {\n    for (int jj = 0; jj &lt; image.height(); jj++) {\n        int gray = qGray(image.pixel(ii, jj));\n        image.setPixel(ii, jj, QColor(gray, gray, gray).rgb());\n    }\n}\n</code></pre>\n\n<p>What would be the best way, performance-wise, to convert a QImage to grayscale?</p>\n"}, {"tags": ["c++", "vector", "multidimensional-array"], "comments": [{"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "edited": false, "score": 0, "creation_date": 1421258683, "post_id": 27949509, "comment_id": 44294075, "body": "What do you mean by &#39;each row column&#39;?"}, {"owner": {"reputation": 65, "user_id": 2311539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2dce4904a01b3f5de9a6a493f5b6fae?s=128&d=identicon&r=PG", "display_name": "Raizekas", "link": "https://stackoverflow.com/users/2311539/raizekas"}, "reply_to_user": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "edited": false, "score": 0, "creation_date": 1421258714, "post_id": 27949509, "comment_id": 44294092, "body": "Well, I mean that at the start, 2D vector should be something like.   1st row: 0 2nd row: 0 3rd row: 0 4th row: 0, but if, I for example need to store one more variable in 3rd row, could I just push back the third row? Or it&#39;s not how vectors work? (I&#39;m completely new to vectors, started to &quot;learn&quot; them only today)"}], "answers": [{"owner": {"reputation": 325, "user_id": 1143743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16adccc2a29f65b4b58ffc6a5d319724?s=128&d=identicon&r=PG", "display_name": "yellow_nimbus", "link": "https://stackoverflow.com/users/1143743/yellow-nimbus"}, "is_accepted": false, "score": 0, "last_activity_date": 1421258960, "creation_date": 1421258960, "answer_id": 27949620, "question_id": 27949509, "link": "https://stackoverflow.com/questions/27949509/how-to-define-2d-vector-which-rows-are-known-c/27949620#27949620", "title": "How to define 2D vector which rows are known c++", "body": "<p>If i'm understanding correctly, this seems like what you want is an array of vectors. You can set an array of vectors like <code>vector&lt;string&gt; myArray[3];</code> and then push values into <code>myArray[0]</code>, <code>myArray[1]</code>, etc. </p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 2311539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2dce4904a01b3f5de9a6a493f5b6fae?s=128&d=identicon&r=PG", "display_name": "Raizekas", "link": "https://stackoverflow.com/users/2311539/raizekas"}, "edited": false, "score": 0, "creation_date": 1421259194, "post_id": 27949638, "comment_id": 44294362, "body": "Yup, you understood correctly. However, I should have been more precise. I get the row variable after I declare my vector of vectors. Is there any way I could resize only rows of the vector and leave the collumns 0?"}, {"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "reply_to_user": {"reputation": 65, "user_id": 2311539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2dce4904a01b3f5de9a6a493f5b6fae?s=128&d=identicon&r=PG", "display_name": "Raizekas", "link": "https://stackoverflow.com/users/2311539/raizekas"}, "edited": false, "score": 0, "creation_date": 1421259289, "post_id": 27949638, "comment_id": 44294417, "body": "Yes, you call the resize method of the vector class. Read the reference (google std::vector)."}, {"owner": {"reputation": 65, "user_id": 2311539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2dce4904a01b3f5de9a6a493f5b6fae?s=128&d=identicon&r=PG", "display_name": "Raizekas", "link": "https://stackoverflow.com/users/2311539/raizekas"}, "edited": false, "score": 0, "creation_date": 1421259717, "post_id": 27949638, "comment_id": 44294673, "body": "Hmm. I&#39;m trying to do the <a href=\"http://pastebin.com/BiY1vHGN\" rel=\"nofollow noreferrer\">following code</a>, yet I get an error. And values in B and A vectors are not greater than n. What am I doing wrong?"}], "owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "is_accepted": false, "score": 0, "last_activity_date": 1421259007, "creation_date": 1421259007, "answer_id": 27949638, "question_id": 27949509, "link": "https://stackoverflow.com/questions/27949509/how-to-define-2d-vector-which-rows-are-known-c/27949638#27949638", "title": "How to define 2D vector which rows are known c++", "body": "<p>If I understood correctly. You want a data structure that will allow you to append to the end of each row. A <code>vector&lt; vector &lt; int &gt; &gt;</code> will do.</p>\n\n<pre><code>vector&lt; vector &lt; int &gt; &gt; rows;\n</code></pre>\n\n<p>You have to populate this, if you know the max number of rows you could write:</p>\n\n<pre><code>vector&lt; vector &lt; int &gt; &gt; rows(MAX);\n</code></pre>\n\n<p>You append to the end of a row using <code>rows[i].push_back(...);</code>. Rows are numbered starting at 0 (add 1 to MAX if you want to start at 1).</p>\n"}, {"owner": {"reputation": 90, "user_id": 3308537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27c424c629dd4e7c9e50c2d9424711b1?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Davis", "link": "https://stackoverflow.com/users/3308537/josh-davis"}, "is_accepted": true, "score": 1, "last_activity_date": 1421349850, "last_edit_date": 1421349850, "creation_date": 1421259077, "answer_id": 27949657, "question_id": 27949509, "link": "https://stackoverflow.com/questions/27949509/how-to-define-2d-vector-which-rows-are-known-c/27949657#27949657", "title": "How to define 2D vector which rows are known c++", "body": "<p>Here is someone who had a similar question <a href=\"http://www.cplusplus.com/forum/beginner/12409/\" rel=\"nofollow\">http://www.cplusplus.com/forum/beginner/12409/</a>. Just Define a vector of vectors.</p>\n\n<p><strong>It wont let me comment down below</strong>, but in your code you have <code>tiesiogiaiJungiasi[A.at(i)]</code> \nWhat type is A and if it is a vector then is that vector filled with integers if not A.at(i) is your problem. That will give you the element that is at that location not the location itself.</p>\n\n<p>If you are trying to push the element index i from row B into the element index i of row A try something like this.\n<code>\ntiesiogiaiJungiasi[A].push_back(tiesiogiaiJungiasi[B][i]);</code></p>\n\n<p>assuming there is an element in row B at the index location.</p>\n\n<p>Another problem could be that you say that your rows may be of different sizes. Well you should look at your m parameter in the for loop then. If that number is larger than the number of columns (elements) in that row i has the possibility of walking off the array.</p>\n"}], "owner": {"reputation": 65, "user_id": 2311539, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b2dce4904a01b3f5de9a6a493f5b6fae?s=128&d=identicon&r=PG", "display_name": "Raizekas", "link": "https://stackoverflow.com/users/2311539/raizekas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1365, "favorite_count": 0, "closed_date": 1421259968, "accepted_answer_id": 27949657, "answer_count": 3, "score": 1, "last_activity_date": 1421349850, "creation_date": 1421258584, "question_id": 27949509, "link": "https://stackoverflow.com/questions/27949509/how-to-define-2d-vector-which-rows-are-known-c", "closed_reason": "Duplicate", "title": "How to define 2D vector which rows are known c++", "body": "<p>what is the best way to define 2D vector, which rows are known? So basically, I will have something like this:</p>\n\n<pre><code>2 3 4\n7 5 4 12 4\n2 1 0 2\n</code></pre>\n\n<p>I will know how many rows there are (well actuall I will know it only after getting row variable), but each row collumn will vary. So what is the best way to do this? (I am planning on pushing back each row's columns when I will need, if it is possible)</p>\n"}, {"tags": ["c++", "list", "sorting", "categories", "member"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1421258422, "post_id": 27949394, "comment_id": 44293924, "body": "Have you tried <a href=\"http://stackoverflow.com/questions/12508496/comparators-in-stl\">creating a custom comparator</a>?"}], "answers": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": -1, "last_activity_date": 1421258426, "creation_date": 1421258426, "answer_id": 27949466, "question_id": 27949394, "link": "https://stackoverflow.com/questions/27949394/c-listsort-of-classes-by-members/27949466#27949466", "title": "C++ list::sort of classes by members", "body": "<p>Yes, and all you have to do is implement a comparator class, or overload the comparison <code>Klasse::operator&lt;</code> operators. For reference on the <code>sort</code> method, see <a href=\"http://www.cplusplus.com/reference/list/list/sort/\" rel=\"nofollow\">this</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1421258461, "post_id": 27949469, "comment_id": 44293946, "body": "C++11 or later? These things are great if your compiler supports them."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1421258470, "post_id": 27949469, "comment_id": 44293949, "body": "that&#39;s pretty C+11 :) nice!"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1421259154, "post_id": 27949469, "comment_id": 44294342, "body": "By the way, lambda is not something that someone new to C++ will easily understand, so this might not be the best answer without further references."}], "owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "is_accepted": true, "score": 4, "last_activity_date": 1421258946, "last_edit_date": 1421258946, "creation_date": 1421258436, "answer_id": 27949469, "question_id": 27949394, "link": "https://stackoverflow.com/questions/27949394/c-listsort-of-classes-by-members/27949469#27949469", "title": "C++ list::sort of classes by members", "body": "<p>You would use a <a href=\"http://en.cppreference.com/w/cpp/concept/Compare\" rel=\"nofollow\">comparator object</a>. Here's an example using a <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow\">lambda</a>.</p>\n\n<pre><code>std::list&lt;Klasse&gt; liste;\nliste.sort([](Klasse const &amp; lhs, Klasse const &amp; rhs) {\n    return lhs._b &lt; rhs._b;\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7975, "user_id": 238180, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f90984ad0b6147f68c5044f4a12252b2?s=128&d=identicon&r=PG", "display_name": "Overv", "link": "https://stackoverflow.com/users/238180/overv"}, "edited": false, "score": 0, "creation_date": 1421258480, "post_id": 27949471, "comment_id": 44293958, "body": "You should include code in your answer instead of linking to external resources."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 2, "creation_date": 1421258562, "post_id": 27949471, "comment_id": 44294011, "body": "he answers the question (though shortly), and gives a reference. Possibly not the most thorough explanation, but worth more than a downvote!"}, {"owner": {"reputation": 71857, "user_id": 47453, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/412dc332ab3593c636e5a5202cf98870?s=128&d=identicon&r=PG", "display_name": "Bill Lynch", "link": "https://stackoverflow.com/users/47453/bill-lynch"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1421258714, "post_id": 27949471, "comment_id": 44294091, "body": "@MarcusM&#252;ller: <a href=\"http://meta.stackexchange.com/questions/8231/are-answers-that-just-contain-links-elsewhere-really-good-answers\" title=\"are answers that just contain links elsewhere really good answers\">meta.stackexchange.com/questions/8231/&hellip;</a>"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1421258952, "post_id": 27949471, "comment_id": 44294238, "body": "I agree, but he did <i>not</i> just link somewhere. He said &quot;write a comparer&quot;, which is absolutely true and might even be enough to give OP a start, if the linked site went down at one point."}], "owner": {"reputation": 37, "user_id": 3796555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3d6d7fa443faf01b37a54f8c70e65c7?s=128&d=identicon&r=PG&f=1", "display_name": "Zongor Lajos", "link": "https://stackoverflow.com/users/3796555/zongor-lajos"}, "is_accepted": false, "score": 0, "last_activity_date": 1421259618, "last_edit_date": 1421259618, "creation_date": 1421258440, "answer_id": 27949471, "question_id": 27949394, "link": "https://stackoverflow.com/questions/27949394/c-listsort-of-classes-by-members/27949471#27949471", "title": "C++ list::sort of classes by members", "body": "<p><a href=\"http://www.cplusplus.com/reference/list/list/sort/\" rel=\"nofollow\">http://www.cplusplus.com/reference/list/list/sort/</a></p>\n\n<p>You should write your own comparer, example and usage in the link ;) </p>\n\n<p>here is the code example as promised</p>\n\n<p>(thanks for the constructive criticism)</p>\n\n<pre><code> bool compare_by_b (const Klasse&amp; first, const Klasse&amp; second)\n    {\n      return first._b &lt; second._b ;\n    }\n\n liste.sort(compare_by_b);\n</code></pre>\n"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "is_accepted": false, "score": 3, "last_activity_date": 1421258812, "last_edit_date": 1421258812, "creation_date": 1421258457, "answer_id": 27949476, "question_id": 27949394, "link": "https://stackoverflow.com/questions/27949394/c-listsort-of-classes-by-members/27949476#27949476", "title": "C++ list::sort of classes by members", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/container/list/sort\" rel=\"nofollow\">See the reference.</a></p>\n\n<p>You can write a comparison function - basically anything that can be called with two arguments of the element type of your list, and this call returns value convertible to <code>bool</code>. Such \"anything\" can be a lambda, function object, or simply just a function:</p>\n\n<pre><code>bool klasse_sort_by_b(const Klasse&amp; l, const Klasse&amp; r)\n{\n    return l._b &lt; r._b;\n}\n\nliste.sort(klasse_sort_by_b);\n</code></pre>\n"}, {"owner": {"reputation": 3747, "user_id": 1000930, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cea16c001501c967710886295d8042d4?s=128&d=identicon&r=PG", "display_name": "AlexTheo", "link": "https://stackoverflow.com/users/1000930/alextheo"}, "is_accepted": false, "score": 1, "last_activity_date": 1421258575, "creation_date": 1421258575, "answer_id": 27949508, "question_id": 27949394, "link": "https://stackoverflow.com/questions/27949394/c-listsort-of-classes-by-members/27949508#27949508", "title": "C++ list::sort of classes by members", "body": "<p>you need this implementation of sort:</p>\n\n<pre><code>template&lt;typename Compare&gt;    \nvoid sort (Compare comp);\n</code></pre>\n\n<p>then pass inside a compare function like:</p>\n\n<pre><code>bool compareByA( const Klasse&amp; first, const Klasse&amp; second ){\n return first._a &lt; second._a;\n}\n</code></pre>\n\n<p>then call it:</p>\n\n<pre><code>std::list&lt;Klasse&gt; lst;\n...\nlst.sort(compareByA);\nlst.sort(compareByB);\n</code></pre>\n"}], "owner": {"reputation": 1217, "user_id": 4108363, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/IWGPW.png?s=128&g=1", "display_name": "LPrc", "link": "https://stackoverflow.com/users/4108363/lprc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 27949469, "answer_count": 5, "score": 1, "last_activity_date": 1421259618, "creation_date": 1421258177, "last_edit_date": 1421258250, "question_id": 27949394, "link": "https://stackoverflow.com/questions/27949394/c-listsort-of-classes-by-members", "title": "C++ list::sort of classes by members", "body": "<p>How can I sort a list of classes by a certain member variable?</p>\n\n<pre><code>class Klasse {\n  int _a;\n  int _b;\n\n}\n\n...\nlist&lt;Klasse&gt; liste;\nliste.sort();   // sorts by _a\nliste.sort(?);  // how to sort by _b now?\n</code></pre>\n"}, {"tags": ["c++", "sorting", "for-loop", "optimization", "while-loop"], "answers": [{"comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 3, "creation_date": 1421258348, "post_id": 27949416, "comment_id": 44293873, "body": "Those inner most 3 lines sure look like std::swap ;)"}], "owner": {"reputation": 4184, "user_id": 3987536, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/327abb72f81fec541e936876b90d25d2?s=128&d=identicon&r=PG", "display_name": "Lawrence Aiello", "link": "https://stackoverflow.com/users/3987536/lawrence-aiello"}, "is_accepted": false, "score": 2, "last_activity_date": 1421258236, "creation_date": 1421258236, "answer_id": 27949416, "question_id": 27949379, "link": "https://stackoverflow.com/questions/27949379/sorting-using-a-while-loop-and-a-for-loop/27949416#27949416", "title": "Sorting using a while loop and a for loop?", "body": "<p>You can try this:</p>\n\n<pre><code>int i = 0;\nwhile (i &lt; 7)\n{\n    for (j = 0; j &lt; 7; j++)\n    {\n        if(foo[i] &lt; foo[j])\n        {\n            temp = foo[i];              \n            foo[i] = foo[j];\n            foo[j] = temp;\n        }\n     }\ni++;\n}\n</code></pre>\n"}, {"owner": {"reputation": 10424, "user_id": 4047092, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/n5HM6.jpg?s=128&g=1", "display_name": "ravi", "link": "https://stackoverflow.com/users/4047092/ravi"}, "is_accepted": false, "score": 0, "last_activity_date": 1421258380, "creation_date": 1421258380, "answer_id": 27949448, "question_id": 27949379, "link": "https://stackoverflow.com/questions/27949379/sorting-using-a-while-loop-and-a-for-loop/27949448#27949448", "title": "Sorting using a while loop and a for loop?", "body": "<p>You can replace either of the <code>for</code> loops with equivalent <code>while</code> loop.</p>\n\n<pre><code>for(i=0;i&lt;7;i++)\n{\n    j = 0;\n    while( j&lt;7)\n    {\n        if(foo[i]&lt;foo[j])\n        {\n            temp = foo[i];              \n            foo[i] = foo[j];\n            foo[j] = temp;\n        }\n      j++\n    }\n}\n</code></pre>\n\n<p>OR if you choose to convert outer loop, then</p>\n\n<pre><code>int i = 0;\nwhile (i &lt; 7)\n{\n  for (j = 0; j &lt; 7; j++)\n  {\n      if(foo[i] &lt; foo[j])\n      {\n          temp = foo[i];              \n          foo[i] = foo[j];\n          foo[j] = temp;\n      }\n   }\n   i++;\n }\n</code></pre>\n"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 2, "last_activity_date": 1421258522, "creation_date": 1421258522, "answer_id": 27949488, "question_id": 27949379, "link": "https://stackoverflow.com/questions/27949379/sorting-using-a-while-loop-and-a-for-loop/27949488#27949488", "title": "Sorting using a while loop and a for loop?", "body": "<p>In general, a <code>for</code> loop like: <code>for (a; b; c) d</code> is nearly equivalent to code like:</p>\n\n<pre><code>a;\nwhile (b) {\n    d;\n    c;\n}\n</code></pre>\n\n<p>There are a <em>few</em> minor differences, but for the kind of thing you're dealing with, they're probably irrelevant.</p>\n"}], "owner": {"reputation": 21, "user_id": 3039918, "user_type": "registered", "profile_image": "https://graph.facebook.com/532982225/picture?type=large", "display_name": "CTRLee", "link": "https://stackoverflow.com/users/3039918/ctrlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10213, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1421258937, "creation_date": 1421258110, "last_edit_date": 1421258937, "question_id": 27949379, "link": "https://stackoverflow.com/questions/27949379/sorting-using-a-while-loop-and-a-for-loop", "title": "Sorting using a while loop and a for loop?", "body": "<p>My first programming lab is to do a sorting algorithm to sort a character array. I've successfully do it using two for loops, but in order to improve my skills, I want to know if there's a way to do it using a while loop and a for loop?</p>\n\n<pre><code>//Include any needed libraries\n #include &lt;iostream&gt;\n #include &lt;algorithm&gt;\n #include &lt;iterator&gt;\n\n//Specify the standard namespace\nusing namespace std;\n\nint main(){\n//Initializes variables.\n\nchar foo[7] = {'a','c','g','j','a','c','d'};\n//char foo[7];\nbool sorted =false;\nint i = 0;\nint j = 0;\nchar temp;\n\n//Print out the pre-sorting array. \ncout &lt;&lt; \"The array before sorting is: \";\nfor (int i=0; i&lt;7; i++){\n    cout &lt;&lt; foo[i];\n}\ncout &lt;&lt; endl;\n\n\n\n//The swap function. \n    for(i=0;i&lt;7;i++){\n        for (j=0; j&lt;7;j++){\n            if(foo[i]&lt;foo[j]){\n                temp = foo[i];              \n                foo[i] = foo[j];\n                foo[j] = temp;\n            }\n        }\n    }\n}\n\ncout &lt;&lt; \"The array after sorting is: \";\nfor (int i=0; i&lt;7; i++){\n    cout &lt;&lt; foo[i];\n}\n\ncout &lt;&lt; endl;\n\n\nreturn 0;\n} \n</code></pre>\n\n<hr>\n\n<p>EDIT: Here's a psuedocode written by our TA: </p>\n\n<pre><code>array[];\nbool sorted = false;\nwhile(!sorted){\n   sorted = true;\n   for each element{\n      compare\n      swap\n   if swapped: sorted = false\n}\n</code></pre>\n\n<p>So what I really wanted to know is how to I integrate boolean statements in the while loop?</p>\n"}, {"tags": ["c++", "function", "bind", "operator-keyword", "equality"], "owner": {"reputation": 2614, "user_id": 1864403, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/558b8d4469d67bb5447ab59ae07d8b50?s=128&d=identicon&r=PG", "display_name": "Jazcash", "link": "https://stackoverflow.com/users/1864403/jazcash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "closed_date": 1421257699, "answer_count": 0, "score": 1, "last_activity_date": 1421257173, "creation_date": 1421257173, "question_id": 27949100, "link": "https://stackoverflow.com/questions/27949100/how-do-i-implement-an-equality-expression-for-a-functionvoidvoid-type", "closed_reason": "Duplicate", "title": "How do I implement an equality expression for a function&lt;void(void)&gt; type?", "body": "<p>I want to be able to compare variables that hold functions to see if the function they hold is the same or not.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;functional&gt;\n\nusing namespace std;\n\ntypedef std::function&lt;void(void)&gt; func;\n\nvoid sayHi() {\n    cout &lt;&lt; \"hi\" &lt;&lt; endl;\n}\n\nint main() {\n    func f1 = bind(&amp;sayHi);\n    func f2 = bind(&amp;sayHi);\n\n    cout &lt;&lt; (f1 == f2) &lt;&lt; endl; // IntelliSense states there is no \"==\" \n                               //   operator to match these operands\n}\n</code></pre>\n\n<p>I'm guessing there is some way to use the <code>operator</code> keyword to implement an equality matching expression? I really don't know how to go about implementing it in this case though.</p>\n"}, {"tags": ["c++", "inline"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1421256708, "post_id": 27948903, "comment_id": 44292856, "body": "If you inline lots of functions, it may lead to excessively large object code. But not sure when will this affect the performance."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1421256718, "post_id": 27948903, "comment_id": 44292865, "body": "<a href=\"http://stackoverflow.com/questions/145838/benefits-of-inline-functions-in-c\" title=\"benefits of inline functions in c\">stackoverflow.com/questions/145838/&hellip;</a>"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 1, "creation_date": 1421257802, "post_id": 27948903, "comment_id": 44293537, "body": "boo, hiss re: adding more subquestions to a question after it already has answers."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1421259949, "post_id": 27948903, "comment_id": 44294801, "body": "<a href=\"http://www.parashift.com/c++-faq/inline-and-perf.html\" rel=\"nofollow noreferrer\">parashift.com/c++-faq/inline-and-perf.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2620, "user_id": 2932994, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5be46a43d989ae5e1b33e26180f5d6f2?s=128&d=identicon&r=PG&f=1", "display_name": "simonides", "link": "https://stackoverflow.com/users/2932994/simonides"}, "edited": false, "score": 2, "creation_date": 1421256802, "post_id": 27948961, "comment_id": 44292924, "body": "You can&#39;t with standard cpp but you can with compiler specific keywords like <code>__forceinline</code> in VS"}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "reply_to_user": {"reputation": 2620, "user_id": 2932994, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5be46a43d989ae5e1b33e26180f5d6f2?s=128&d=identicon&r=PG&f=1", "display_name": "simonides", "link": "https://stackoverflow.com/users/2932994/simonides"}, "edited": false, "score": 0, "creation_date": 1421256888, "post_id": 27948961, "comment_id": 44292981, "body": "@fridolin69 Good point on the compiler specific inlines.  I&#39;ll edit my answer to explicitly state there&#39;s not <i>standard</i> way, which is what I intended."}, {"owner": {"reputation": 41425, "user_id": 129032, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/e8bea8f9e6972dfd3113d67da68e6933?s=128&d=identicon&r=PG", "display_name": "ssube", "link": "https://stackoverflow.com/users/129032/ssube"}, "reply_to_user": {"reputation": 2620, "user_id": 2932994, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5be46a43d989ae5e1b33e26180f5d6f2?s=128&d=identicon&r=PG&f=1", "display_name": "simonides", "link": "https://stackoverflow.com/users/2932994/simonides"}, "edited": false, "score": 2, "creation_date": 1421256934, "post_id": 27948961, "comment_id": 44293015, "body": "@fridolin69 The compiler may still ignore the <code>__forceinline</code> keyword if it needs to (<a href=\"http://msdn.microsoft.com/en-us/library/z8y1yy88.aspx\" rel=\"nofollow noreferrer\">&quot;You cannot force the compiler to inline a particular function, even with the __forceinline keyword&quot;</a>)."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1421256936, "post_id": 27948961, "comment_id": 44293017, "body": "not sure why so many downvotes, the answer seems reasonable"}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1421257241, "post_id": 27948961, "comment_id": 44293175, "body": "@vsoftco I&#39;m not totally sure either.  If I said something that&#39;s completely wrong I wish someone would comment so that I (and other readers) can learn something."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1421257292, "post_id": 27948961, "comment_id": 44293211, "body": "Your answer is almost there but you didn&#39;t answer how it can lead to bad performance, which it can. Because the function is copied it makes code bigger, which hurts the CPU&#39;s instruction cache. The i-cache is not all that big and the more code it has to fetch, the slower it goes."}, {"owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1421257369, "post_id": 27948961, "comment_id": 44293261, "body": "@ZanLynx I suppose it <i>can</i> lead to bad performance, but it would be a very specific edge case of calling different versions of the same inlined function in extremely close proximity.  And I would think in that case it&#39;s likely the compiler would just ignore the inline suggestion."}], "owner": {"reputation": 757, "user_id": 4421195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e70d3067a7ca6d7ac639b77f1e818622?s=128&d=identicon&r=PG&f=1", "display_name": "mbgda", "link": "https://stackoverflow.com/users/4421195/mbgda"}, "is_accepted": false, "score": 4, "last_activity_date": 1421257703, "last_edit_date": 1421257703, "creation_date": 1421256704, "answer_id": 27948961, "question_id": 27948903, "link": "https://stackoverflow.com/questions/27948903/why-can-forced-inline-functions-lead-to-bad-performance/27948961#27948961", "title": "Why can forced inline functions lead to bad performance?", "body": "<p>There's no standard way to force inline functions in modern C++ compilers, so this is kind of a moot point.  However, assuming you are using compiler-specific functionality to force inline (and the compiler doesn't ignore it) it wouldn't lead to bad performance but it would lead to increased executable size due to there being more copies of the same code.</p>\n\n<p>Edit: Per the comment below it should be mentioned that a very unlikely edge case does exist where your code could be executing different copies of the same inlined function in close proximity, reducing the efficiency of the instruction cache.  The likelihood that this will measurably affect performance is extremely small, but in certain edge cases it could.</p>\n"}, {"comments": [{"owner": {"reputation": 2620, "user_id": 2932994, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5be46a43d989ae5e1b33e26180f5d6f2?s=128&d=identicon&r=PG&f=1", "display_name": "simonides", "link": "https://stackoverflow.com/users/2932994/simonides"}, "edited": false, "score": 0, "creation_date": 1421257306, "post_id": 27949107, "comment_id": 44293217, "body": "Is that such an edge case for game consoles too?"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 2620, "user_id": 2932994, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5be46a43d989ae5e1b33e26180f5d6f2?s=128&d=identicon&r=PG&f=1", "display_name": "simonides", "link": "https://stackoverflow.com/users/2932994/simonides"}, "edited": false, "score": 1, "creation_date": 1421257443, "post_id": 27949107, "comment_id": 44293319, "body": "@fridolin69 it all depends on the processor used in the console. All processors have had quite similar cache systems for many years now, so I can&#39;t say it would make a big difference. Do you have a specific situation that you&#39;re wondering about?"}, {"owner": {"reputation": 2620, "user_id": 2932994, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5be46a43d989ae5e1b33e26180f5d6f2?s=128&d=identicon&r=PG&f=1", "display_name": "simonides", "link": "https://stackoverflow.com/users/2932994/simonides"}, "edited": false, "score": 0, "creation_date": 1421257558, "post_id": 27949107, "comment_id": 44293391, "body": "No specific console I just stumbeld upon it while preparing for an exam."}], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": true, "score": 7, "last_activity_date": 1421257195, "creation_date": 1421257195, "answer_id": 27949107, "question_id": 27948903, "link": "https://stackoverflow.com/questions/27948903/why-can-forced-inline-functions-lead-to-bad-performance/27949107#27949107", "title": "Why can forced inline functions lead to bad performance?", "body": "<p>There may be an edge case where inlining a function can increase the program size or move bits of the program around so that cache misses occur where they didn't before. It wouldn't be common, since caches are designed to handle most common situations and are quite large compared to most hotspots.</p>\n"}, {"owner": {"reputation": 3752, "user_id": 1001195, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dda89cff7f47651fbeee18a90949873b?s=128&d=identicon&r=PG", "display_name": "dau_sama", "link": "https://stackoverflow.com/users/1001195/dau-sama"}, "is_accepted": false, "score": 3, "last_activity_date": 1421258651, "creation_date": 1421258651, "answer_id": 27949526, "question_id": 27948903, "link": "https://stackoverflow.com/questions/27948903/why-can-forced-inline-functions-lead-to-bad-performance/27949526#27949526", "title": "Why can forced inline functions lead to bad performance?", "body": "<p>We should take a step back and try to explain how CPUs work. Usually they have different caches, one for the code, which tells the CPU the instructions that will be needed to execute, and one for data, where operations are applied to. </p>\n\n<p>Data cache misses are \"easy\" to solve, try to use the smallest data structures you can, put close together members that you access more frequently... </p>\n\n<p>Instruction cache misses are more difficult to understand and solve, and that's also the reason why it's commonly recognized that polymorphic behavior in C++ is slower than normal function calls. Basically the CPU will prefetch in its caches the instructions that are stored close to the execution point you're trying to execute, if everything is inline, there's just more data and it won't be able to prefetch everything, leading to a cache miss. Please note this is just a simplistic case, in my experience I had problems with template instantiations that would generate a lot of code, leading to a slower performance than just having simple virtual calls and a not too deep object hierarchy. </p>\n\n<p>As Alexandrescu always points out, you should always time your code</p>\n\n<p>Source: \n<a href=\"http://people.freebsd.org/~lstewart/articles/cpumemory.pdf\" rel=\"nofollow\">What Every Programmer Should Know About Memory</a></p>\n"}], "owner": {"reputation": 2620, "user_id": 2932994, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/5be46a43d989ae5e1b33e26180f5d6f2?s=128&d=identicon&r=PG&f=1", "display_name": "simonides", "link": "https://stackoverflow.com/users/2932994/simonides"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 2, "closed_date": 1421259971, "accepted_answer_id": 27949107, "answer_count": 3, "score": 7, "last_activity_date": 1421258651, "creation_date": 1421256528, "last_edit_date": 1421257783, "question_id": 27948903, "link": "https://stackoverflow.com/questions/27948903/why-can-forced-inline-functions-lead-to-bad-performance", "closed_reason": "Duplicate", "title": "Why can forced inline functions lead to bad performance?", "body": "<p>If I inline a function. \nThe function call body will be copied instead of issuing a call() to it.\nWhy can that lead to bad performance? </p>\n\n<p>Edit: And what about cache misses because of to big functions then?\nWhy does the rule of thumb \"only inline functions with max 3 lines\" exist then?</p>\n"}, {"tags": ["c++", "if-statement", "char"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1421256559, "post_id": 27948855, "comment_id": 44292758, "body": "Ever heard of <code>switch</code>? Also, you seem to be inconsistent in your use of <code>choice</code> and <code>playerMove</code>. Correcting that, if you enter the loop with a <code>playerMove</code> (or <code>choice</code>) which does not &quot;work&quot;, how do you expect to ever make progress?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421256694, "post_id": 27948855, "comment_id": 44292848, "body": "Please use <code>std::tolower</code>, in <code>&lt;cctype&gt;</code>, to convert your letter to lower case before comparing.  Eliminates a lot of typing."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421256765, "post_id": 27948855, "comment_id": 44292902, "body": "Please use <code>bool</code> variables for <code>true&#47;false</code> conditions rather than 1 or zero.  Times have changed since the 1960&#39;s."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421256958, "post_id": 27948855, "comment_id": 44293031, "body": "You don&#39;t need to assign <code>playerMove</code> because it&#39;s redundant. For example, <code>RIGHT == &#39;d&#39;</code> and substituting, the assignment becomes <code>playerMove = &#39;d&#39;;</code> and <code>playerMove</code> already equals &#39;d&#39;, by logic of the <code>if</code> statement."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1421259875, "post_id": 27948855, "comment_id": 44294757, "body": "@ThomasMatthews: <code>tolower()</code> is a bit tricky. Its argument is an <code>int</code> that has to be within the range of <code>unsigned char</code> (or it can be <code>EOF</code>, which is typically <code>-1</code>). If plain <code>char</code> is signed, and you happen to have a <code>char</code> value with the sign bit set, then calling <code>std::tolower()</code> has undefined behavior. Use <code>std::tolower((unsigned char)c)</code> (or whichever flavor of C++-style cast is more appropriate)."}], "answers": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 3, "last_activity_date": 1421256763, "creation_date": 1421256763, "answer_id": 27948976, "question_id": 27948855, "link": "https://stackoverflow.com/questions/27948855/if-statements-with-char-values/27948976#27948976", "title": "if statements with char values", "body": "<p>You never prompt for another value after the user enters the first one:</p>\n\n<pre><code>cin &gt;&gt; choice; // &lt;==\nint worked;\n\ndo {\n    // ..\n} while (worked != 1);\n</code></pre>\n\n<p>Just move the input into the loop:</p>\n\n<pre><code>int worked;\ndo {\n    cin &gt;&gt; choice; // possibly with cout prompt too\n    // rest as before\n} while (worked != 1);\n</code></pre>\n"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1421258754, "creation_date": 1421258754, "answer_id": 27949568, "question_id": 27948855, "link": "https://stackoverflow.com/questions/27948855/if-statements-with-char-values/27949568#27949568", "title": "if statements with char values", "body": "<p>Your input is outside the loop, your variable <code>worked</code>  is uninitialized ( though it is not a error in your code but is cleaner to initialize your variables) and it should have <code>bool</code> type.  Whole code can be simplified by the <code>switch</code> statement:</p>\n\n<pre><code>void askPlayer()\n{\n    do {\n        char choice;\n        cout &lt;&lt; \"Use the WASD keys to move: \";\n        cin &gt;&gt; choice;\n\n        switch( choice ) {\n            case 'w' : case 'W' :\n                playerMove = UP;\n                break;\n            case 'a' : case 'A' :\n                playerMove = LEFT;\n                break;\n            case 's' : case 'S' :\n                playerMove = DOWN;\n                break;\n            case 'd' : case 'D' :\n                playerMove = RIGHT;\n                break;\n            default:\n                cout &lt;&lt; \"Invalid entry.\" &lt;&lt; endl;\n                continue;\n        }\n    } while( false );\n    return;\n}\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 4381608, "user_type": "registered", "profile_image": "https://graph.facebook.com/1718601634/picture?type=large", "display_name": "republikunt", "link": "https://stackoverflow.com/users/4381608/republikunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1421258754, "creation_date": 1421256372, "last_edit_date": 1421256869, "question_id": 27948855, "link": "https://stackoverflow.com/questions/27948855/if-statements-with-char-values", "title": "if statements with char values", "body": "<p>So I'm trying to write an easy basic game here with basic C++, and when I try to execute this</p>\n\n<pre><code>// global variabless\nconst char UP = 'w', LEFT = 'a', DOWN = 's', RIGHT = 'd'; // player movement choices\nchar playerMove; // goes with askPlayer\n\nvoid askPlayer()\n{\n    char choice;\n    cout &lt;&lt; \"Use the WASD keys to move: \";\n    cin &gt;&gt; choice;\n    int worked;\n\n    do{\n        if (choice == 'w' || choice == 'W')\n        {\n            playerMove = UP;\n            worked = 1;\n        }\n        else if (choice == 'a' || choice == 'A')\n        {\n            playerMove = LEFT;\n            worked = 1;\n        }\n        else if (playerMove == 's' || playerMove == 'S')\n        {\n            playerMove = DOWN;\n            worked = 1;\n        }\n        else if (playerMove == 'd' || playerMove == 'D')\n        {\n            playerMove = RIGHT;\n            worked = 1;\n        }\n        else\n        {\n            cout &lt;&lt; \"Invalid entry.\" &lt;&lt; endl;\n            worked = 0;\n        }\n    } while (worked != 1);\n    return;\n}\n</code></pre>\n\n<p>It works up to the user entering a letter. Xcode says (lldb) then the page fills up with numbers, and after you stop the run, it says \"Program ended with exit code: 9\". It does this even if you enter one of the valid values</p>\n"}, {"tags": ["c++", "c", "memory", "malloc"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 3, "creation_date": 1421256378, "post_id": 27948842, "comment_id": 44292640, "body": "Use <code>std::string</code> and stop worrying about allocating and freeing memory for strings."}, {"owner": {"reputation": 2801, "user_id": 904194, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/KGqRa.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/904194/mrk"}, "edited": false, "score": 0, "creation_date": 1421256671, "post_id": 27948842, "comment_id": 44292837, "body": "Is memory really an issue here or you just trying to optimize?"}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "edited": false, "score": 2, "creation_date": 1421256727, "post_id": 27948842, "comment_id": 44292873, "body": "Allocate whatever memory you need. If you need 3 bytes and you ask for 8, what would you do with the extra 5 bytes? And if you have a legitimate use for those 5 bytes, define a 8 byte structure and go with it."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1421256741, "post_id": 27948842, "comment_id": 44292883, "body": "Whether you allocate the extra bytes and don&#39;t use them or the heap allocator does makes of course <i>absolutely</i> no difference.  Other than to the hapless victim that has to maintain your code some day."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1421257675, "post_id": 27948842, "comment_id": 44293458, "body": "@iharob: Probably... because it is equally valid for either. Though that might be coincidence."}, {"owner": {"reputation": 205, "user_id": 3836707, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe509fa4edcad4454b3a17a717790fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/3836707/abhishek"}, "edited": false, "score": 0, "creation_date": 1421260131, "post_id": 27948842, "comment_id": 44294909, "body": "@Sorry its on C and not C++. However you could use malloc for both C and C++ and hence had selected C++ as well."}], "answers": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 2, "last_activity_date": 1421259996, "last_edit_date": 1421259996, "creation_date": 1421257531, "answer_id": 27949214, "question_id": 27948842, "link": "https://stackoverflow.com/questions/27948842/malloc-less-than-8-bytes/27949214#27949214", "title": "malloc less than 8 bytes", "body": "<p>Yes, it absolutely makes sense only to ask for what you need.</p>\n\n<p>The allocator (<code>malloc</code>, <code>new</code>, <code>VirtualAlloc</code> or what have you) may always pad your allocations, but that's not your concern, in general.<br>\nAnyway, it may pad bigger allocations more than smaller ones, due to mixing schemes / different pools for different sizes.</p>\n\n<p>Anyway, don't worry over that overhead unless you have lots of allocations, so the allocator-overhead might be the straw that breaks the camel's back.</p>\n\n<p>In addition, the allocator may be changed or simply replaced (for better space/time-performance, debug-experience, fault-tolerance, just because), and you really don't want to leak all the details of how the last allocator worked all over your code.</p>\n\n<p>Especially you don't want to go out of your way to counter any possible improvement resulting from better tuning to your use-case.</p>\n"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 3, "last_activity_date": 1421257696, "creation_date": 1421257696, "answer_id": 27949266, "question_id": 27948842, "link": "https://stackoverflow.com/questions/27948842/malloc-less-than-8-bytes/27949266#27949266", "title": "malloc less than 8 bytes", "body": "<p>Allocate what you need and don't worry about memory usage.  </p>\n\n<p>Smart memory allocators will have separate pools of memory for allocating small chunks.  </p>\n\n<p>For example, a memory allocator may have a separate pool of memory for allocating items smaller than 8 bytes.  </p>\n"}, {"comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 1, "creation_date": 1421258405, "post_id": 27949402, "comment_id": 44293912, "body": "That&#39;s an important gotcha. And imho a real wart on the language, especially when moving to <code>realloc</code>."}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1421260122, "post_id": 27949402, "comment_id": 44294906, "body": "A need to allocate <code>0</code> bytes?  Can you explain why someone would do that intentionally?"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 1, "creation_date": 1421261019, "post_id": 27949402, "comment_id": 44295359, "body": "@fiddlingBits, yes I have had cases where I wanted allocate a variable amount of space which under circumstances could be 0 and there you have to be careful: <code>malloc(nbytes)</code> returning <code>NULL</code> is not necessarily an error with <code>nbytes == 0</code> and here one could lead to the other in the following steps so you just decide always to allocate at least one byte -- pure pragmatism"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "reply_to_user": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "edited": false, "score": 0, "creation_date": 1421261502, "post_id": 27949402, "comment_id": 44295659, "body": "@IngoLeonhardt Just wondering why you&#39;d go ahead with <code>malloc(0)</code> instead of checking for <code>0</code> first: <code>if(nbytes &gt; 0) malloc(nbytes)</code>.  By the way: Deutschland &#252;ber alles. :-D"}, {"owner": {"reputation": 8154, "user_id": 2470782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/921783e0584f9ace7e05d303e4d48869?s=128&d=identicon&r=PG", "display_name": "Ingo Leonhardt", "link": "https://stackoverflow.com/users/2470782/ingo-leonhardt"}, "reply_to_user": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1421320861, "post_id": 27949402, "comment_id": 44317687, "body": "@FiddlingBits -- just because the poiner bein NULL led to confusion afterwards.. Gr&#252;&#223;e aus Offenbach"}], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1421258204, "last_edit_date": 1495542041, "creation_date": 1421258204, "answer_id": 27949402, "question_id": 27948842, "link": "https://stackoverflow.com/questions/27948842/malloc-less-than-8-bytes/27949402#27949402", "title": "malloc less than 8 bytes", "body": "<p>Best to request the needed size and not a larger amount as well answered by <a href=\"https://stackoverflow.com/a/27949214/2410359\">*Deduplicator</a></p>\n\n<p>There is an important exception should OP find a future need to allocate <code>0</code> bytes.</p>\n\n<p>In that case, allocators like <code>malloc(0)</code> may return <code>NULL</code> or a pointer - either is allowed by the C spec.  This may confuse or break subsequent code that specifically expects one of those two.  So when code needs to allocate <code>0</code> bytes, consider returning <code>malloc(1)</code> or <code>NULL</code> and not leaving it up to <code>malloc(0)</code>.</p>\n"}], "owner": {"reputation": 205, "user_id": 3836707, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe509fa4edcad4454b3a17a717790fbd?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek", "link": "https://stackoverflow.com/users/3836707/abhishek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "closed_date": 1421262600, "answer_count": 3, "score": 0, "last_activity_date": 1421259996, "creation_date": 1421256337, "question_id": 27948842, "link": "https://stackoverflow.com/questions/27948842/malloc-less-than-8-bytes", "closed_reason": "Opinion-based", "title": "malloc less than 8 bytes", "body": "<p>Does it make sense to malloc say 4 bytes on the heap given that malloc internally would often round this up to a 8 byte boundary on 32 bit systems and 16 for 64-byte systems for its internal use.</p>\n\n<p>I need to allocate a string that stores a single or a double digit number. I thus need a maximum of 3 bytes (2 for the two digits and 1 for the '\\0' character to terminate my string). Wondering if there is any benefit of doing a malloc 3 and if i should instead do a malloc of 8?</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c#", "c++", "drag-and-drop", "ole", "hwnd"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1421257163, "post_id": 27948824, "comment_id": 44293137, "body": "My crystal ball says that the window is owned by another process.  So the IUnknown* pointer is useless, it can only work in that other process."}, {"owner": {"reputation": 1, "user_id": 4453949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a981df0802de8e82cb6d90657eacc79a?s=128&d=identicon&r=PG&f=1", "display_name": "ludo", "link": "https://stackoverflow.com/users/4453949/ludo"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1421302823, "post_id": 27948824, "comment_id": 44309739, "body": "Your chrystal ball works well. This is the reason of the problem. Do you know how to get IDropTarget into different process?"}], "answers": [{"owner": {"reputation": 1, "user_id": 4453949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a981df0802de8e82cb6d90657eacc79a?s=128&d=identicon&r=PG&f=1", "display_name": "ludo", "link": "https://stackoverflow.com/users/4453949/ludo"}, "is_accepted": true, "score": 0, "last_activity_date": 1421643209, "creation_date": 1421643209, "answer_id": 28018149, "question_id": 27948824, "link": "https://stackoverflow.com/questions/27948824/get-idroptarget-with-hwnd-throw-0xc0000005-access-violation/28018149#28018149", "title": "Get IDropTarget with HWND throw 0xC0000005 access violation", "body": "<p>Thank you Hans Passant for good reason. I m try another way by adding control in main form and write this code<br>\n</p>\n\n<pre><code>DataObject daobj = new DataObject();\nStringCollection strcol = new StringCollection();\nstrcol.Add(\"F:\\\\test.jpg\");\ndaobj.SetFileDropList(strcol);\nIDropTarget dt = (IDropTarget)ctrl;\ndt.OnDragDrop(new DragEventArgs(daobj, 0, 0, 0, DragDropEffects.Copy, DragDropEffects.Copy));\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4453949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a981df0802de8e82cb6d90657eacc79a?s=128&d=identicon&r=PG&f=1", "display_name": "ludo", "link": "https://stackoverflow.com/users/4453949/ludo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 28018149, "answer_count": 1, "score": 0, "last_activity_date": 1421643260, "creation_date": 1421256276, "last_edit_date": 1421643260, "question_id": 27948824, "link": "https://stackoverflow.com/questions/27948824/get-idroptarget-with-hwnd-throw-0xc0000005-access-violation", "title": "Get IDropTarget with HWND throw 0xC0000005 access violation", "body": "<p><br>\nI'm trying to simulate Drag and Drop to drop a file in another application by C++ code (or .NET) with IDropTarget interface.<br>\nI have read and tested different solutions. I have a little code to drop a file that work with the mouse.<br>\nBut this code should work throws an access violation exception.<br>\nDo you have an explanation? Thank you.<br><br>\nW7 64Bits, VC6, VS2013 C++ with same problem.<br> </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>stdafx.h\n#include &lt;stdio.h&gt;\n#include &lt;tchar.h&gt;\n#include &lt;oleidl.h&gt;\n#include &lt;Atlbase.h&gt;\n\nTestDragDrop.cpp\n#include \"stdafx.h\"\nIDropTarget* GetRegisteredDropTargetFromWnd(HWND hWnd)\n{\n    IUnknown *pBuffer = (IUnknown *)GetProp(hWnd, TEXT(\"OleDropTargetInterface\"));\n    if (pBuffer != NULL) // pBuffer = address can see on properties tab with WinSpy++\n    {        \n        IDropTarget *pRetVal = NULL;\n        // throw exception 0xC0000005 acess violation\n        if (SUCCEEDED(pBuffer-&gt;QueryInterface(IID_IDropTarget, (void **)&amp;pRetVal)))\n            return pRetVal;\n    }\n    return NULL;\n}\nint main(int argc, char* argv[])\n{\n    CoInitialize(NULL);\n    HWND hWnd = (HWND)0x00181E04;  // get with WinSpy++ \n    IDropTarget* pDT = GetRegisteredDropTargetFromWnd(hWnd);\n    CoUninitialize();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "yacc", "lex"], "comments": [{"owner": {"reputation": 19346, "user_id": 2793118, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5da03d2e233e1a40a4f1923acfb9d433?s=128&d=identicon&r=PG", "display_name": "Filipe Gon&#231;alves", "link": "https://stackoverflow.com/users/2793118/filipe-gon%c3%a7alves"}, "edited": false, "score": 2, "creation_date": 1421255195, "post_id": 27948489, "comment_id": 44291903, "body": "Are you sure you aren&#39;t missing any <code>;</code> in other nearby chunks of code? This particular piece looks ok."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 1, "creation_date": 1421256652, "post_id": 27948489, "comment_id": 44292824, "body": "If the error occured in C compilation phase, you could try to look at the file generated by win_flex, to clearly know where C found it, and from them come back to the lex source."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 1, "creation_date": 1421257224, "post_id": 27948489, "comment_id": 44293164, "body": "The statement(s) should begin on the same line as the pattern. Are you sure that you defined the <i>yystype</i> in your bison fie and include the header generated ?"}], "answers": [{"owner": {"reputation": 2576, "user_id": 3447742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dceb051c6027a6f6931fc0b0f7d86fe1?s=128&d=identicon&r=PG&f=1", "display_name": "gornvix", "link": "https://stackoverflow.com/users/3447742/gornvix"}, "is_accepted": true, "score": 0, "last_activity_date": 1421258957, "creation_date": 1421258957, "answer_id": 27949618, "question_id": 27948489, "link": "https://stackoverflow.com/questions/27948489/compilation-error-how-to-parse-variable-name-using-lex-yacc/27949618#27949618", "title": "Compilation error. How to parse variable name using lex / yacc?", "body": "<p>I found the solution to this problem.  The member of yylval must correspond to the union declaration as follows, in the lex file:</p>\n\n<pre><code>[a-zA-Z][a-zA-Z0-9]* { yylval-&gt;str = _strdup(yytext); return id; }\n</code></pre>\n\n<p>...and in the yacc file:</p>\n\n<pre><code>%union\n{\n    char *str;\n...\n}\n</code></pre>\n"}], "owner": {"reputation": 2576, "user_id": 3447742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dceb051c6027a6f6931fc0b0f7d86fe1?s=128&d=identicon&r=PG&f=1", "display_name": "gornvix", "link": "https://stackoverflow.com/users/3447742/gornvix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 713, "favorite_count": 0, "accepted_answer_id": 27949618, "answer_count": 1, "score": 0, "last_activity_date": 1421258957, "creation_date": 1421255075, "last_edit_date": 1421256608, "question_id": 27948489, "link": "https://stackoverflow.com/questions/27948489/compilation-error-how-to-parse-variable-name-using-lex-yacc", "title": "Compilation error. How to parse variable name using lex / yacc?", "body": "<p>In my lex file I have:</p>\n\n<pre><code>[a-zA-Z][a-zA-Z0-9]*\n{\n    yylval.val = _strdup(yytext); // &lt;- error here\n    yylval.length = yylen;\n    return id;\n}\n</code></pre>\n\n<p>... for parsing text such as \"myid2\"</p>\n\n<p>This is causing a compilation error:</p>\n\n<pre><code>error C2143: syntax error : missing ';' before '='\n</code></pre>\n\n<p>How to do this correctly so that I can pass on the id as a character string (char *) in the yacc file?</p>\n\n<p>I am using win_flex and win_bison.</p>\n\n<p>UPDATE:\nI put the statements on one line in the lex file:</p>\n\n<pre><code>[a-zA-Z][a-zA-Z0-9]* { yylval.val = _strdup(yytext); yylval.length = yylen; return id; }\n</code></pre>\n\n<p>Now I get the compilation errors:</p>\n\n<pre><code>error C2039: 'length' : is not a member of 'YYSTYPE'\nerror C2039: 'val' : is not a member of 'YYSTYPE'\nerror C2065: 'yylen' : undeclared identifier\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 4155293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5n3F.jpg?s=128&g=1", "display_name": "Engin007", "link": "https://stackoverflow.com/users/4155293/engin007"}, "edited": false, "score": 1, "creation_date": 1421313539, "post_id": 27953994, "comment_id": 44313846, "body": "great detailed answer! this has cleared up some of the questions regarding kernels. Thanks! I will take your advice in consideration."}, {"owner": {"reputation": 77, "user_id": 4155293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5n3F.jpg?s=128&g=1", "display_name": "Engin007", "link": "https://stackoverflow.com/users/4155293/engin007"}, "edited": false, "score": 0, "creation_date": 1421337012, "post_id": 27953994, "comment_id": 44327424, "body": "I tried implementing this with no success. I did the following steps:  - create the kernel - get values inside a certain range of the image and save it temporarily to the kernel - make the comparison, if true save as true - save in a new matrix output at the same range however I get assertion errors after certain iterations and I can&#39;t put my finger on it. Please advise"}, {"owner": {"reputation": 77, "user_id": 4155293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5n3F.jpg?s=128&g=1", "display_name": "Engin007", "link": "https://stackoverflow.com/users/4155293/engin007"}, "edited": false, "score": 0, "creation_date": 1421338282, "post_id": 27953994, "comment_id": 44328354, "body": "if I add borders of black pixels, this should theoretically make me skip the whole headache with border pixels. I would let my loop start from the 4th row or column and stop before it becomes out of range."}], "owner": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "is_accepted": false, "score": 2, "last_activity_date": 1421276113, "creation_date": 1421276113, "answer_id": 27953994, "question_id": 27948473, "link": "https://stackoverflow.com/questions/27948473/local-thresholding-implementation-in-c-opencv/27953994#27953994", "title": "local thresholding implementation in C++ / OpenCV", "body": "<p>I fear this approach is not entirely correct. Let me explain: for operations involving a kernel, one must be careful to place <strong>the center of the kernel</strong> on top of the pixel that is going to be transformed. That's because a 3x3, 5x5, 7x7, 9x9 (...) kernel just computes the value for <strong>one pixel</strong> in the image, which is the one positioned at the center [0,0] of the kernel.</p>\n\n<p>If you think about how to compute the value for the first pixel of the image, the center of a 9x9 kernel is going to be placed at coordinate <strong>[0,0]</strong>. That means that 3/4 of the kernel are going to be placed at negative coordinates, i.e. coordinates that refers to pixels that don't exist:</p>\n\n<pre><code> [-4,-4][-3,-4][-2,-4][-1,-4][ 0,-4][ 1,-4][ 2,-4][ 3,-4][ 4,-4]\n [-4,-3][-3,-3][-2,-3][-1,-3][ 0,-3][ 1,-3][ 2,-3][ 3,-3][ 4,-3]\n [-4,-2][-3,-2][-2,-2][-1,-2][ 0,-2][ 1,-2][ 2,-2][ 3,-2][ 4,-2]\n [-4,-1][-3,-1][-2,-1][-1,-1][ 0,-1][ 1,-1][ 2,-1][ 3,-1][ 4,-1]\n [-4, 0][-3, 0][-2, 0][-1, 0][ 0, 0][ 1, 0][ 2, 0][ 3, 0][ 4, 0]\n [-4, 1][-3, 1][-2, 1][-1, 1][ 0, 1][ 1, 1][ 2, 1][ 3, 1][ 4, 1]\n [-4, 2][-3, 2][-2, 2][-1, 2][ 0, 2][ 1, 2][ 2, 2][ 3, 2][ 4, 2]\n [-4, 3][-3, 3][-2, 3][-1, 3][ 0, 3][ 1, 3][ 2, 3][ 3, 3][ 4, 3]\n [-4, 4][-3, 4][-2, 4][-1, 4][ 0, 4][ 1, 4][ 2, 4][ 3, 4][ 4, 4]\n</code></pre>\n\n<p><strong>This is always going to happen with pixels near the border of the image.</strong> So for the computation of the first pixel, we would have to restrict the computation to 1/4 of the kernel, which refers to valid coordinates in the target image:</p>\n\n<pre><code> [     ][     ][     ][     ][     ][     ][     ][     ][     ]\n [     ][     ][     ][     ][     ][     ][     ][     ][     ]\n [     ][     ][     ][     ][     ][     ][     ][     ][     ]\n [     ][     ][     ][     ][     ][     ][     ][     ][     ]\n [     ][     ][     ][     ][ 0, 0][ 1, 0][ 2, 0][ 3, 0][ 4, 0]\n [     ][     ][     ][     ][ 0, 1][ 1, 1][ 2, 1][ 3, 1][ 4, 1]\n [     ][     ][     ][     ][ 0, 2][ 1, 2][ 2, 2][ 3, 2][ 4, 2]\n [     ][     ][     ][     ][ 0, 3][ 1, 3][ 2, 3][ 3, 3][ 4, 3]\n [     ][     ][     ][     ][ 0, 4][ 1, 4][ 2, 4][ 3, 4][ 4, 4]\n</code></pre>\n\n<p>So the problem with your current approach is that at some point you will setup a ROI that is going to have negative coordinates, and when these instructions are executed you will see a nice crash:</p>\n\n<pre><code>cv::Mat ROI_Mat = input(ROI);  // crash \n</code></pre>\n\n<p>The solution is not to use a ROI and just implement that algorithm yourself. I just can't see this custom computation working with <code>cv::filter2D()</code>. Here's a little something to help you get started:</p>\n\n<pre><code>void local_threshold(const cv::Mat&amp; input, cv::Mat&amp; output)\n{\n    if (input.channels() != 1)\n    {\n        std::cout &lt;&lt; \"local_threshold !!! input image must be single channel\" &lt;&lt; std::endl;\n        return;\n    }\n\n    output = cv::Mat(input.rows, input.cols, CV_8UC1);\n    double min_val = 0, max_val = 0;\n\n    for (int i = 0; i &lt; input.rows; i++)\n        for (int j = 0; j &lt; input.cols; j++)\n        {\n            cv::Mat kernel = Mat::zeros(9, 9, output.type());\n\n            // Implement logic to fill the 9x9 kernel with\n            // values from the input Mat, respecting boundaries.\n\n            cv::Scalar avg_intensity = cv::mean(kernel);\n            cv::minMaxLoc(kernel, &amp;min_val,&amp;max_val);\n\n            if (input.at&lt;uchar&gt;(i,j) &gt; (max_val / 2))\n                output.at&lt;unsigned char&gt;(i,j) = 255;\n            else\n                output.at&lt;unsigned char&gt;(i,j) = 0;\n        }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 77, "user_id": 4155293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5n3F.jpg?s=128&g=1", "display_name": "Engin007", "link": "https://stackoverflow.com/users/4155293/engin007"}, "edited": false, "score": 0, "creation_date": 1421336806, "post_id": 27958453, "comment_id": 44327271, "body": "this is a really good explanation, however would this deliver the same as actually moving through each pixel and figuring out the local maximum to take as true ? Because actually its basically a comparison more than any actual conv process."}], "owner": {"reputation": 9602, "user_id": 2571705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e9b0015a3abdccadd4ed3dd2e6c69bf?s=128&d=identicon&r=PG", "display_name": "dhanushka", "link": "https://stackoverflow.com/users/2571705/dhanushka"}, "is_accepted": false, "score": 3, "last_activity_date": 1421306392, "creation_date": 1421306392, "answer_id": 27958453, "question_id": 27948473, "link": "https://stackoverflow.com/questions/27948473/local-thresholding-implementation-in-c-opencv/27958453#27958453", "title": "local thresholding implementation in C++ / OpenCV", "body": "<p>You can do this with a dilation followed by a comparison in OpenCV;</p>\n\n<pre><code>im = load image here;\ndi = dilate im with a 9x9 kernel;\nbw = im &gt; (di * 0.5); // in OpenCV, pixels of bw are set to 255 or 0\n</code></pre>\n\n<p>A simple example to illustrate this with a 4x6 image and a 3x3 kernel in Matlab/Octave:</p>\n\n<p>im =</p>\n\n<pre><code> 1     2     3     4     5     6\n 2     3     4     5     6     7\n 3     4     5     6     7     8\n 4     5     6     7     8     9\n</code></pre>\n\n<p>di =</p>\n\n<pre><code> 3     4     5     6     7     7\n 4     5     6     7     8     8\n 5     6     7     8     9     9\n 5     6     7     8     9     9\n</code></pre>\n\n<p>th = di * .5</p>\n\n<p>th =</p>\n\n<pre><code>1.5000    2.0000    2.5000    3.0000    3.5000    3.5000\n2.0000    2.5000    3.0000    3.5000    4.0000    4.0000\n2.5000    3.0000    3.5000    4.0000    4.5000    4.5000\n2.5000    3.0000    3.5000    4.0000    4.5000    4.5000\n</code></pre>\n\n<p>bw = im > th</p>\n\n<p>bw =</p>\n\n<pre><code> 0     0     1     1     1     1\n 0     1     1     1     1     1\n 1     1     1     1     1     1\n 1     1     1     1     1     1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87362, "user_id": 176769, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PckCW.png?s=128&g=1", "display_name": "karlphillip", "link": "https://stackoverflow.com/users/176769/karlphillip"}, "edited": false, "score": 0, "creation_date": 1421838387, "post_id": 27974377, "comment_id": 44511275, "body": "Great. Thanks for sharing."}], "owner": {"reputation": 77, "user_id": 4155293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5n3F.jpg?s=128&g=1", "display_name": "Engin007", "link": "https://stackoverflow.com/users/4155293/engin007"}, "is_accepted": true, "score": 2, "last_activity_date": 1421361825, "creation_date": 1421361825, "answer_id": 27974377, "question_id": 27948473, "link": "https://stackoverflow.com/questions/27948473/local-thresholding-implementation-in-c-opencv/27974377#27974377", "title": "local thresholding implementation in C++ / OpenCV", "body": "<p>After further thinking and finding out how to utilize my basic knowledge in programming, I came up with this code that isn't the most efficient but gets the job done. </p>\n\n<p>What was the main problem with my approach? : </p>\n\n<ul>\n<li>Boundary pixels where one of the main problems and the whole indexing operation between kernel and mask caused a slight headache. </li>\n</ul>\n\n<p>What was my approach in solving that matter?:</p>\n\n<ul>\n<li>My threshold says it needs a relative high intensity level to set true pixels. Therefore I filled the image with some imaginary negative pixels and made my algorithm start at the first pixel of the original. And saved the results to a mask.</li>\n</ul>\n\n<p>Result:</p>\n\n<ul>\n<li>SUCCESS!</li>\n</ul>\n\n<p>Code: </p>\n\n<pre><code>     double maxVal, minVal;\n     cv::Mat output;\n     int top, bottom, left , right;\n     int borderType = cv::BORDER_CONSTANT;\n     cv::Scalar value;\n     top = (int) (4); bottom = (int) (4);\n     left = (int) (4); right = (int) (4);\n     output = src;\n     out = src;\n     value = 0;\n     cv::copyMakeBorder(src,output,top,bottom,left,right,borderType,value);\n\nfor(int y = 4; y &lt; output.rows - 4; y++) {\n\n    for(int x = 4; x &lt; output.cols - 4; x ++) {\n\n        // apply local ROI\n\n        cv::Mat ROI = output(cv::Rect(cv::Point(x-4,y-4),cv::Size(9,9)));\n        cv::minMaxLoc(ROI,&amp;minVal,&amp;maxVal);    // extract max intensity values in the ROI\n\n        if(src.at&lt;uchar&gt;(cv::Point(x-4,y-4)) &gt;= 0.5*maxVal){    // apply local threshold w.r.t highest intensity level\n\n            out.at&lt;uchar&gt;(cv::Point(x-4,y-4)) = 255;            // change pixel value in mask if true\n        }else{\n            out.at&lt;uchar&gt;(cv::Point(x-4,y-4)) = 0;\n\n            }\n\n        }\n    }\n\n\n\n}\n</code></pre>\n\n<p>it needs some clean up I know but hopefully this would help others to get some idea.</p>\n"}], "owner": {"reputation": 77, "user_id": 4155293, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5n3F.jpg?s=128&g=1", "display_name": "Engin007", "link": "https://stackoverflow.com/users/4155293/engin007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1948, "favorite_count": 1, "accepted_answer_id": 27974377, "answer_count": 3, "score": 3, "last_activity_date": 1421361825, "creation_date": 1421255022, "last_edit_date": 1421341884, "question_id": 27948473, "link": "https://stackoverflow.com/questions/27948473/local-thresholding-implementation-in-c-opencv", "title": "local thresholding implementation in C++ / OpenCV", "body": "<p>I would like to implement a local thresholding algorithm and I require your expertise. </p>\n\n<p>my images are resized to 600x400, grayscale.</p>\n\n<p>Basic Thought process on localizing: </p>\n\n<ul>\n<li>Segment the images using a 9x9 ROI taken at each pixel and calculating the maximum intensity in the region. </li>\n<li><p>create a 9x9 Kernel.</p>\n\n<p>condition:</p>\n\n<ul>\n<li>if the center pixel of the mask is above 50% of the maximum intensity, set the center pixel true.(apply mask)</li>\n</ul></li>\n</ul>\n\n<p>my question to you:</p>\n\n<ul>\n<li><p>How should I pick my kernel/mask ?</p>\n\n<pre><code>  cv::Mat ROI;\n  cv::Mat mask(input.size(),CV_8UC1, cv::Scalar::all(0)); // create mask of 0s at first\n  const int kerneldepth = 1;\n  const int kernelsize = 9;\n  cv::Mat kernel = cv::Mat::ones( kernelsize, kernelsize, CV_8UC1 );\n\n\n//take ROI of 9x9 and apply a threshold\n\nfor( double x = 9; x &lt; input.cols -9; x++ ){\n     for( double y = 9 ; y &lt; input.rows - 9 ; y++ ){\n\n        try{\n          double x_left = x - 4;\n          double x_right = x + 4;\n          double y_up = y + 4;\n          double y_down = y - 4;\n          double maxVal;\n          double minVal;\n          cv::Point anchor(kernelsize/2,kernelsize/2);\n\n          cv::Rect ROI = cv::Rect(x_left,y_down,9,9);\n          cv::Mat ROI_Mat = input(ROI);                                // a new matrix for ROI\n          cv::Scalar avgPixelIntensity = cv::mean( ROI_Mat );          // calculate mean\n          cv::minMaxLoc(ROI_Mat,&amp;minVal,&amp;maxVal);\n\n          if( input.at&lt;uchar&gt;(x,y) &gt;= 0.5*maxVal){\n\n          cv::filter2D(input,mask,-1,kernel,anchor,0);\n    } else { break;}\n\n    }\n\n    catch (cv::Exception &amp;e){\n\n        e.what();\n    }\n\n\n   }\n\n  *****************************UPDATED CODE: ******************************************\n\n    applyLocalThresh(cv::Mat &amp;src, cv::Mat&amp; out){\n      double maxVal, minVal;\n      cv::Mat output;\n      int top, bottom, left , right;\n      int borderType = cv::BORDER_CONSTANT;\n      cv::Scalar value;\n      top = (int) (9); bottom = (int) (9);\n      left = (int) (9); right = (int) (9);\n      output = src;\n      out = src;\n      value = 0;\n      cv::copyMakeBorder(src,output,top,bottom,left,right,borderType,value);\n\n     for(int y = 9; y &lt; src.rows; y++) {\n\n        for(int x = 9; x &lt; src.cols; x ++) {\n\n                cv::Mat ROI = src(cv::Rect(cv::Point(x-4,y-4),cv::Size(9,9)));\n                cv::minMaxLoc(ROI,&amp;minVal,&amp;maxVal);\n\n        if(src.at&lt;uchar&gt;(cv::Point(x-4,y-4)) &gt;= 0.6*maxVal){\n\n        out.at&lt;uchar&gt;(cv::Point(x-4,y-4)) = 255;\n    }else{\n        out.at&lt;uchar&gt;(cv::Point(x-4,y-4));\n\n        }\n    }\n}\n }\n</code></pre></li>\n</ul>\n"}, {"tags": ["c++", "compiler-errors", "static-linking", "mpfr", "zkcm"], "comments": [{"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 1, "creation_date": 1421254864, "post_id": 27948383, "comment_id": 44291703, "body": "Have you tried changing the order you pass the library names to the compiler?"}, {"owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "reply_to_user": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 0, "creation_date": 1421255511, "post_id": 27948383, "comment_id": 44292094, "body": "I tried it a bit now, with no results.. Any particular order in mind? I&#39;d rather not try all 120:). The order in the OP is the one from the zkcm README."}, {"owner": {"reputation": 85720, "user_id": 21475, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/003174af5095d12b7f9a5efc293eb041?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/21475/cameron"}, "edited": false, "score": 1, "creation_date": 1421259859, "post_id": 27948383, "comment_id": 44294750, "body": "I&#39;ve seen things fail to link if the dependent libraries of one library were put in the wrong order relative to the library itself (so, just two orders to test). But it seems not to be the case this time."}, {"owner": {"reputation": 2300, "user_id": 3782797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uA8JS.jpg?s=128&g=1", "display_name": "vinc17", "link": "https://stackoverflow.com/users/3782797/vinc17"}, "edited": false, "score": 1, "creation_date": 1421312620, "post_id": 27948383, "comment_id": 44313415, "body": "If zkcm uses MPFR, then perhaps <code>-lzkcm</code> should be put before <code>-lmpfr</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "edited": false, "score": 0, "creation_date": 1421335117, "post_id": 27960219, "comment_id": 44326063, "body": "It works, thanks a lot! For some reason I was thinking the order logic was opposite."}], "owner": {"reputation": 2300, "user_id": 3782797, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uA8JS.jpg?s=128&g=1", "display_name": "vinc17", "link": "https://stackoverflow.com/users/3782797/vinc17"}, "is_accepted": true, "score": 1, "last_activity_date": 1421313824, "last_edit_date": 1495542437, "creation_date": 1421313824, "answer_id": 27960219, "question_id": 27948383, "link": "https://stackoverflow.com/questions/27948383/zkcm-library-not-finding-the-mpfr-library/27960219#27960219", "title": "zkcm-library not finding the mpfr-library", "body": "<p>The library order is incorrect: according to the error message, zkcm uses MPFR, so that <code>-lzkcm</code> should be put before <code>-lmpfr</code> (which itself should be put before <code>-lgmp</code> because MPFR uses GMP).</p>\n\n<p>Otherwise the following happens: If the linker founds a MPFR symbol that is not used by <code>test.cpp</code> (or some dependency), it will drop it. And if such a symbol is used by zkcm, this will yield an error since <code>-lzkcm</code> comes later in the command line. This also explains why you may get errors for some MPFR symbols and not others (and errors may appear and disappear when the <code>test.cpp</code> code and the zkcm code change).</p>\n\n<p>This should be sufficient to solve the problem here. But look at <a href=\"https://stackoverflow.com/a/409470/3782797\">this answer to \"Linker order - GCC\"</a> for more general rules (this answer also deals with cyclic dependencies).</p>\n"}], "owner": {"reputation": 2781, "user_id": 1540547, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4f07f7dc869bd71c0ba13719468daeab?s=128&d=identicon&r=PG", "display_name": "jorgen", "link": "https://stackoverflow.com/users/1540547/jorgen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 27960219, "answer_count": 1, "score": 1, "last_activity_date": 1421313824, "creation_date": 1421254719, "question_id": 27948383, "link": "https://stackoverflow.com/questions/27948383/zkcm-library-not-finding-the-mpfr-library", "title": "zkcm-library not finding the mpfr-library", "body": "<p>I just installed the <a href=\"http://sourceforge.net/p/zkcm/home/Home/\" rel=\"nofollow\">zkcm library</a> on my kubuntu machine and I'm having trouble compiling c++ code.</p>\n\n<p>I have installed the <code>gmp</code> and <code>mpfr</code> libraries and checked that they work; the code </p>\n\n<pre><code>mpfr_t m1, m2, m3; \nmpfr_init(m1); mpfr_init(m2); mpfr_init(m3); \nmpfr_mul(m1, m2, m3, MPFR_RNDN);\n</code></pre>\n\n<p>compiles and runs. </p>\n\n<p>I then try to use <code>zkcm</code>; I try compliling the line</p>\n\n<pre><code>zkcm_matrix m;\n</code></pre>\n\n<p>and get a bunch of errors seemingly about <code>zkcm</code> not finding <code>mpfr</code>; here is the beginning of the output:</p>\n\n<pre><code>/usr/local/lib/libzkcm.a(zkcm_c.o): In function `zkcm_init_ri(zkcm*, double, double)':\n/home/jorgen/Downloads/zkcm_lib-0.4.0/srcs/zkcm_c.c:126: undefined reference to `mpfr_inits'\n/home/jorgen/Downloads/zkcm_lib-0.4.0/srcs/zkcm_c.c:127: undefined reference to `mpfr_set_d'\n/usr/local/lib/libzkcm.a(zkcm_c.o): In function `zkcm_init_ri_str(zkcm*, char const*, char const*)':\n/home/jorgen/Downloads/zkcm_lib-0.4.0/srcs/zkcm_c.c:132: undefined reference to `mpfr_inits'\n/home/jorgen/Downloads/zkcm_lib-0.4.0/srcs/zkcm_c.c:136: undefined reference to `mpfr_set_str'\n/home/jorgen/Downloads/zkcm_lib-0.4.0/srcs/zkcm_c.c:134: undefined reference to `mpfr_set_ui'\n</code></pre>\n\n<p>I have tried to follow the instructions infrom <code>zkcm</code>; I have the lines</p>\n\n<pre><code>#include \"mpfr.h\"\n#include \"zkcm.hpp\"\n</code></pre>\n\n<p>and I compile the code (called <code>test.cpp</code>) using</p>\n\n<pre><code>g++ test.cpp -msse2 -std=c++11 -O2 -lm -lmpfr -lgmp -lgmpxx -lzkcm -o test\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "bitmap", "gdi+"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1421255844, "post_id": 27948280, "comment_id": 44292296, "body": "JPG is a <b>file</b> format.  There is no such thing as a &quot;JPG pixel&quot;.  <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">Read this</a>."}], "answers": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1421255676, "creation_date": 1421255676, "answer_id": 27948663, "question_id": 27948280, "link": "https://stackoverflow.com/questions/27948280/gdi-converting-bitmap-pixels-to-jpg-format/27948663#27948663", "title": "GDI+ - converting bitmap pixels to JPG format", "body": "<p>You can create a memory stream using <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/aa378980(v=vs.85).aspx\" rel=\"nofollow\"><code>CreateStreamOnHGlobal</code></a> or <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/bb773831%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>SHCreateMemStream</code></a>, then use the GDI+ method <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms535406(v=vs.85).aspx\" rel=\"nofollow\"><code>Image.Save</code></a> to save to the stream. Reverse the process to read back in.</p>\n"}, {"owner": {"reputation": 393, "user_id": 4385319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3772a14804467fbed6c49caf6dfafae5?s=128&d=identicon&r=PG&f=1", "display_name": "mkathuri", "link": "https://stackoverflow.com/users/4385319/mkathuri"}, "is_accepted": false, "score": 3, "last_activity_date": 1421256240, "creation_date": 1421256240, "answer_id": 27948803, "question_id": 27948280, "link": "https://stackoverflow.com/questions/27948280/gdi-converting-bitmap-pixels-to-jpg-format/27948803#27948803", "title": "GDI+ - converting bitmap pixels to JPG format", "body": "<p>Checkout the Encoder CLSID function from here: <a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/ms533843(v=vs.85).aspx\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/windows/desktop/ms533843(v=vs.85).aspx</a></p>\n\n<p>Modified original code from <a href=\"https://vctipsplusplus.wordpress.com/tag/image-conversion-gdi/\" rel=\"nofollow\">https://vctipsplusplus.wordpress.com/tag/image-conversion-gdi/</a>:</p>\n\n<pre><code>int main()\n{\n   // Initialize GDI+.\n   GdiplusStartupInput gdiplusStartupInput;\n   ULONG_PTR gdiplusToken;\n   GdiplusStartup(&amp;gdiplusToken, &amp;gdiplusStartupInput, NULL);\n   CLSID   encoderClsid;\n   Status  stat;\n   Image*   image = new Image(L\u201dBird.bmp\u201d);\n   // Get the CLSID of the JPEG encoder.\n   GetEncoderClsid(L\u201dimage/jpeg\u201d, &amp;encoderClsid);\n   stat = image-&gt;Save(L\u201dBird.png\u201d, &amp;encoderClsid, NULL);\n   if(stat == Ok)\n      printf(\u201cBird.png was saved successfully\\n\u201d);\n   else\n      printf(\u201cFailure: stat = %d\\n\u201d, stat);\n   delete image;\n   GdiplusShutdown(gdiplusToken);\n   return 0;\n}\n</code></pre>\n\n<p>Just change image/jpeg to whatever format you want to convert. The details are given on the MSDN link I mentioned above. Of course to work with the pixels, you'll need to convert the JPEG to BMP</p>\n"}], "owner": {"reputation": 273, "user_id": 3366592, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/de1afda0395cf4dd43f227a2520f2f31?s=128&d=identicon&r=PG&f=1", "display_name": "user3366592", "link": "https://stackoverflow.com/users/3366592/user3366592"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3673, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1421256240, "creation_date": 1421254353, "question_id": 27948280, "link": "https://stackoverflow.com/questions/27948280/gdi-converting-bitmap-pixels-to-jpg-format", "title": "GDI+ - converting bitmap pixels to JPG format", "body": "<p>I have an array of a bitmap pixels. How can I convert them to JPG format and copy to another array? How to convert them back to bitmap from JPG pixels?</p>\n"}, {"tags": ["c++", "visual-studio-2010", "pointers", "reference", "mfc"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1421254180, "post_id": 27948153, "comment_id": 44291258, "body": "<code>columns = new CMapStringToString();</code> What&#39;s this?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421254433, "post_id": 27948153, "comment_id": 44291431, "body": "<code>new</code> returns a pointer."}, {"owner": {"reputation": 541, "user_id": 404280, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/n0til.png?s=128&g=1", "display_name": "WendyG", "link": "https://stackoverflow.com/users/404280/wendyg"}, "edited": false, "score": 0, "creation_date": 1423059643, "post_id": 27948153, "comment_id": 44995081, "body": "sorry this is a confused and confusing question, how do i close it?"}], "answers": [{"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 2, "last_activity_date": 1421254177, "creation_date": 1421254177, "answer_id": 27948221, "question_id": 27948153, "link": "https://stackoverflow.com/questions/27948153/why-do-ineed-to-declare-a-pointer-and-not-an-object/27948221#27948221", "title": "Why do Ineed to declare a pointer and not an object?", "body": "<p>Because you're assigning a pointer to <code>columns</code> here:</p>\n\n<pre><code>columns = new CMapStringToString();\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 541, "user_id": 404280, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/n0til.png?s=128&g=1", "display_name": "WendyG", "link": "https://stackoverflow.com/users/404280/wendyg"}, "edited": false, "score": 0, "creation_date": 1421256861, "post_id": 27948878, "comment_id": 44292964, "body": "I am asking: why does it require pointers. I admit to not fully understanding pointers. i last used them 6 years ago in basic ansi C, then moved to java now trying to maintain old c++ code"}, {"owner": {"reputation": 41, "user_id": 4447664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa5ae80117a5fa2fbbb2a6164b83d5bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dcoollx", "link": "https://stackoverflow.com/users/4447664/dcoollx"}, "reply_to_user": {"reputation": 541, "user_id": 404280, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/n0til.png?s=128&g=1", "display_name": "WendyG", "link": "https://stackoverflow.com/users/404280/wendyg"}, "edited": false, "score": 0, "creation_date": 1421257509, "post_id": 27948878, "comment_id": 44293358, "body": "what function does this block return temp to?"}], "owner": {"reputation": 41, "user_id": 4447664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa5ae80117a5fa2fbbb2a6164b83d5bf?s=128&d=identicon&r=PG&f=1", "display_name": "Dcoollx", "link": "https://stackoverflow.com/users/4447664/dcoollx"}, "is_accepted": false, "score": 0, "last_activity_date": 1421256879, "last_edit_date": 1421256879, "creation_date": 1421256442, "answer_id": 27948878, "question_id": 27948153, "link": "https://stackoverflow.com/questions/27948153/why-do-ineed-to-declare-a-pointer-and-not-an-object/27948878#27948878", "title": "Why do Ineed to declare a pointer and not an object?", "body": "<p>If You are asking why your compiler requires a pointer then use Paul's answer. If You are asking why a pointer <em>should</em>  be used ( you don't completely understand pointers) then the answer is: <br/> Because you are writing a function that uses an object that does not yet exist as a parameter in your <code>CClass</code> class definition, <code>CMapStringToString columns</code> will not be created until run-time. So in order for the function to use this object you have to say use \"this\"(a reference) <code>CMapStringToString</code> object that i will give you later. then use the -> operator to access the referenced objects members.</p>\n"}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "is_accepted": false, "score": 0, "last_activity_date": 1421775655, "creation_date": 1421775655, "answer_id": 28051784, "question_id": 27948153, "link": "https://stackoverflow.com/questions/27948153/why-do-ineed-to-declare-a-pointer-and-not-an-object/28051784#28051784", "title": "Why do Ineed to declare a pointer and not an object?", "body": "<p>Because CMapStringToOb requires a pointer to a CObject as its \"data\".</p>\n\n<p>from MSDN:</p>\n\n<p>CMapStringToOb is a dictionary collection class that maps unique CString objects to CObject <strong>pointers</strong></p>\n"}], "owner": {"reputation": 541, "user_id": 404280, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/n0til.png?s=128&g=1", "display_name": "WendyG", "link": "https://stackoverflow.com/users/404280/wendyg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1421775655, "creation_date": 1421253957, "last_edit_date": 1421256643, "question_id": 27948153, "link": "https://stackoverflow.com/questions/27948153/why-do-ineed-to-declare-a-pointer-and-not-an-object", "title": "Why do Ineed to declare a pointer and not an object?", "body": "<p>I am using a <code>CMapStringToOb</code> to store a <code>CMapStringToString</code></p>\n\n<p>I can make this work if i declare <code>columns</code> as <code>*columns</code> but want to know why I can't get this way to work</p>\n\n<pre><code>CMapStringToOb m_FfMasters;\nCMapStringToString columns;\n// if we haven't met this master before store the details for later use\nif(!m_FfMasters.Lookup(_T(\"String\"),(CObject*&amp;)columns) )\n{\n\n    getColumns(_T(\"String\"),columns);\n\n    m_FfMasters.SetAt(_T(\"String\"),(CObject*&amp;)columns);\n    if(m_FfMasters.Lookup(m_workingFfMaster,(CObject*&amp;)columns))\n    {\n        CString temp;\n        if(columns.Lookup(_T(\"String\"),temp)) //&lt;-- access violation here\n        {\n            return temp;\n        }\n    }\n}\n</code></pre>\n\n<p>the other function prototypes are:</p>\n\n<pre><code>void CClass::getColumns(CString code, \n                        CMapStringToString&amp; columns, \n                        BOOL reverseKeyValue);\n</code></pre>\n\n<p>I get an access violation at the columns lookup</p>\n"}, {"tags": ["c++", "linux", "opencv", "cross-compiling", "beagleboneblack"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 1473298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzUw3.jpg?s=128&g=1", "display_name": "Jelle Spijker", "link": "https://stackoverflow.com/users/1473298/jelle-spijker"}, "edited": false, "score": 0, "creation_date": 1421254128, "post_id": 27948158, "comment_id": 44291223, "body": "I&#39;m linking it on the command line with the argument - L/mnt/BBB/usr/local/lib at least that is what I hope i&#39;m doing ;-) I have never used cmake. Maybe it&#39;s about time for me to learn it. But first I want to test my setup"}, {"owner": {"reputation": 2174, "user_id": 2369389, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/f3URs.jpg?s=128&g=1", "display_name": "madduci", "link": "https://stackoverflow.com/users/2369389/madduci"}, "reply_to_user": {"reputation": 83, "user_id": 1473298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzUw3.jpg?s=128&g=1", "display_name": "Jelle Spijker", "link": "https://stackoverflow.com/users/1473298/jelle-spijker"}, "edited": false, "score": 0, "creation_date": 1421254642, "post_id": 27948158, "comment_id": 44291571, "body": "You are pointing probably to wrong libs. try to put the full path to the single libs instead"}, {"owner": {"reputation": 83, "user_id": 1473298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzUw3.jpg?s=128&g=1", "display_name": "Jelle Spijker", "link": "https://stackoverflow.com/users/1473298/jelle-spijker"}, "edited": false, "score": 0, "creation_date": 1421255564, "post_id": 27948158, "comment_id": 44292124, "body": "I tried arm-g++ -I/mnt/BBB/usr/local/include -I/mnt/BBB/usr/local/include/opencv -L/mnt/BBB/usr/local/lib -l/mnt/BBB/usr/local/lib/ope ncv_core -l/mnt/BBB/usr/local/lib/opencv_highgui main.cpp -o main  But to no avail: the error is now: /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-l&zwnj;&#8203;inux-gnueabihf/bin/l&zwnj;&#8203;d: cannot find -l/mnt/BBB/usr/local/lib/opencv_core /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-l&zwnj;&#8203;inux-gnueabihf/bin/l&zwnj;&#8203;d: cannot find -l/mnt/BBB/usr/local/lib/opencv_highgui"}, {"owner": {"reputation": 83, "user_id": 1473298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzUw3.jpg?s=128&g=1", "display_name": "Jelle Spijker", "link": "https://stackoverflow.com/users/1473298/jelle-spijker"}, "edited": false, "score": 0, "creation_date": 1421268543, "post_id": 27948158, "comment_id": 44299297, "body": "Result is: /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-l&zwnj;&#8203;inux-gnueabihf/bin/l&zwnj;&#8203;d: cannot find -l/mnt/BBB/usr/local/lib/libopencv_core.so /usr/lib/gcc-cross/arm-linux-gnueabihf/4.8/../../../../arm-l&zwnj;&#8203;inux-gnueabihf/bin/l&zwnj;&#8203;d: cannot find -l/mnt/BBB/usr/local/lib/libopencv_highgui.so collect2: error: ld returned 1 exit status  double checking the folder with ll /mnt/BBB/usr/local/lib | grep opencv_core  show the file is present"}, {"owner": {"reputation": 2174, "user_id": 2369389, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/f3URs.jpg?s=128&g=1", "display_name": "madduci", "link": "https://stackoverflow.com/users/2369389/madduci"}, "reply_to_user": {"reputation": 83, "user_id": 1473298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzUw3.jpg?s=128&g=1", "display_name": "Jelle Spijker", "link": "https://stackoverflow.com/users/1473298/jelle-spijker"}, "edited": false, "score": 0, "creation_date": 1421310785, "post_id": 27948158, "comment_id": 44312577, "body": "mmm...try to set the LD_LIBRARY_PATH in this way: export LD_LIBRARY_PATH=/mnt/BBB/usr/local/lib and try to recompile with your original command"}, {"owner": {"reputation": 83, "user_id": 1473298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzUw3.jpg?s=128&g=1", "display_name": "Jelle Spijker", "link": "https://stackoverflow.com/users/1473298/jelle-spijker"}, "edited": false, "score": 0, "creation_date": 1421440985, "post_id": 27948158, "comment_id": 44375644, "body": "Still not completely solved but found a work around, using cmake. Most of my code can be executed on my linux computer x64 ubuntu and on my BBB arm. So testing is done on my computer and later on it is compiled on my BBB when I want to test BBB specific functions. Thank you blackibiza"}, {"owner": {"reputation": 2174, "user_id": 2369389, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/f3URs.jpg?s=128&g=1", "display_name": "madduci", "link": "https://stackoverflow.com/users/2369389/madduci"}, "reply_to_user": {"reputation": 83, "user_id": 1473298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzUw3.jpg?s=128&g=1", "display_name": "Jelle Spijker", "link": "https://stackoverflow.com/users/1473298/jelle-spijker"}, "edited": false, "score": 0, "creation_date": 1421661886, "post_id": 27948158, "comment_id": 44430060, "body": "@JelleSpijker actually, from generated CMake files in your build directory, you can even spot the Makefile, so you can read how gcc links all together the libraries, just for you to know it and debug further. Anyway, CMake ist the best solution in these cases, because the more libraries you have, the more difficult is to use gcc from command line"}], "owner": {"reputation": 2174, "user_id": 2369389, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/f3URs.jpg?s=128&g=1", "display_name": "madduci", "link": "https://stackoverflow.com/users/2369389/madduci"}, "is_accepted": true, "score": 0, "last_activity_date": 1421310865, "last_edit_date": 1421310865, "creation_date": 1421253973, "answer_id": 27948158, "question_id": 27948099, "link": "https://stackoverflow.com/questions/27948099/trouble-with-cross-compiling-an-c-opencv-application-for-the-beaglebone-black/27948158#27948158", "title": "Trouble with cross-compiling an c++ openCV application for the beaglebone black", "body": "<p>It looks like you are not linking the library properly! Why aren't you using CMake?</p>\n\n<pre><code> target_link_libraries(your_project ${OpenCV_LIBS})\n</code></pre>\n\n<p>Here you find the full reference on Cross compiling: <a href=\"http://www.vtk.org/Wiki/CMake_Cross_Compiling\" rel=\"nofollow\">http://www.vtk.org/Wiki/CMake_Cross_Compiling</a></p>\n\n<p>Anyway, I've found this on OpenCV forum group:</p>\n\n<p><a href=\"http://answers.opencv.org/question/7138/cross-compile-opencv-but-failed-to-find-3rd-party-library/\" rel=\"nofollow\">Cross compile OpenCV but failed to find 3rd party library</a></p>\n"}], "owner": {"reputation": 83, "user_id": 1473298, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kzUw3.jpg?s=128&g=1", "display_name": "Jelle Spijker", "link": "https://stackoverflow.com/users/1473298/jelle-spijker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "accepted_answer_id": 27948158, "answer_count": 1, "score": 0, "last_activity_date": 1421310865, "creation_date": 1421253807, "question_id": 27948099, "link": "https://stackoverflow.com/questions/27948099/trouble-with-cross-compiling-an-c-opencv-application-for-the-beaglebone-black", "title": "Trouble with cross-compiling an c++ openCV application for the beaglebone black", "body": "<p>I hoping somebody has a quick solution because I'm getting a tiny, weeny bit frustrated.\nI'm trying to cross-compile an openCV application for my Beaglebone Black (BBB) on my Linux Ubuntu 14.04 computer.\nI installed the cross compilers: arm-linux-gnueabihf-gcc-4.8 en arm-linux-gnueabihf-g++-4.8. cross . These work when I compile a simple c++ program without linking to 3th party libs, like openCV.</p>\n\n<p>Because I want to compile for my BBB I mounted (samba) my beaglebone in the folder /mnt/BBB/ on my linux computer. And I tried the following code (which is a copy of <a href=\"http://docs.opencv.org/doc/tutorials/introduction/linux_gcc_cmake/linux_gcc_cmake.html\" rel=\"nofollow\">http://docs.opencv.org/doc/tutorials/introduction/linux_gcc_cmake/linux_gcc_cmake.html</a> )</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n\nusing namespace cv;\n\nint main(int argc, char** argv )\n{\n    if ( argc != 2 )\n    {\n        printf(\"usage: DisplayImage.out &lt;Image_Path&gt;\\n\");\n        return -1;\n    }\n\n    Mat image;\n    image = imread( argv[1], 1 );\n\n    if ( !image.data )\n    {\n        printf(\"No image data \\n\");\n        return -1;\n    }\n    namedWindow(\"Display Image\", 1 );\n    imshow(\"Display Image\", image);\n\n    waitKey(0);\n\n    return 0;\n}\n</code></pre>\n\n<p>With the following command: </p>\n\n<pre><code>arm-g++ -I/mnt/BBB/usr/local/include -I/mnt/BBB/usr/local/include/opencv -L/mnt/BBB/usr/local/lib  -lopencv_calib3d -lopencv_core -lopencv_features2d -lopencv_flann -lopencv_highgui -lopencv_imgcodecs -lopencv_imgproc -lopencv_ml -lopencv_objdetect -lopencv_photo -lopencv_shape -lopencv_stitching     -lopencv_superres -lopencv_ts -lopencv_video -lopencv_videoio -lopencv_videostab main.cpp -o main\n</code></pre>\n\n<p>But I receive the following error:</p>\n\n<pre><code>/tmp/ccX4FOL8.o: In function `main':\nmain.cpp:(.text+0x4c): undefined reference to `cv::imread(cv::String const&amp;, int)'\nmain.cpp:(.text+0xa6): undefined reference to `cv::namedWindow(cv::String const&amp;, int)'\nmain.cpp:(.text+0xe2): undefined reference to `cv::imshow(cv::String const&amp;, cv::_InputArray const&amp;)'\nmain.cpp:(.text+0xfc): undefined reference to `cv::waitKey(int)'\n/tmp/ccX4FOL8.o: In function `cv::String::String(char const*)':\nmain.cpp:(.text._ZN2cv6StringC2EPKc[_ZN2cv6StringC5EPKc]+0x2a): undefined reference to `cv::String::allocate(unsigned int)'\n/tmp/ccX4FOL8.o: In function `cv::String::~String()':\nmain.cpp:(.text._ZN2cv6StringD2Ev[_ZN2cv6StringD5Ev]+0xa): undefined reference to `cv::String::deallocate()'\n/tmp/ccX4FOL8.o: In function `cv::_InputArray::_InputArray(cv::Mat const&amp;)':\nmain.cpp:(.text._ZN2cv11_InputArrayC2ERKNS_3MatE[_ZN2cv11_InputArrayC5ERKNS_3MatE]+0x34): undefined reference to `vtable for cv::_InputArray'\n/tmp/ccX4FOL8.o: In function `cv::_InputArray::~_InputArray()':\nmain.cpp:(.text._ZN2cv11_InputArrayD2Ev[_ZN2cv11_InputArrayD5Ev]+0x24): undefined reference to `vtable for cv::_InputArray'\n/tmp/ccX4FOL8.o: In function `cv::Mat::~Mat()':\nmain.cpp:(.text._ZN2cv3MatD2Ev[_ZN2cv3MatD5Ev]+0x20): undefined reference to `cv::fastFree(void*)'\n/tmp/ccX4FOL8.o: In function `cv::Mat::operator=(cv::Mat const&amp;)':\nmain.cpp:(.text._ZN2cv3MataSERKS0_[_ZN2cv3MataSERKS0_]+0xb4): undefined reference to `cv::Mat::copySize(cv::Mat const&amp;)'\n/tmp/ccX4FOL8.o: In function `cv::Mat::release()':\nmain.cpp:(.text._ZN2cv3Mat7releaseEv[_ZN2cv3Mat7releaseEv]+0x3e): undefined reference to `cv::Mat::deallocate()'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Can somebody tell me what I'm doing wrong? Or what could be done better?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "xcode", "macos", "osx-yosemite", "clang++"], "comments": [{"owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1421257342, "post_id": 27948093, "comment_id": 44293245, "body": "ok, thank for your advise. I&#39;m trying to get lib search paths now."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1421261082, "post_id": 27948093, "comment_id": 44295403, "body": "I added some more information. Are you <i>certain</i> you want a <i>Library Search Path</i>. You keep naming it specifically, but you also keep looping back to header include paths."}, {"owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1421261366, "post_id": 27948093, "comment_id": 44295586, "body": "Thank you. I&#39;ll check it. Yes, you are right. I&#39;m confused about the difference between a Library Search Path and Header Include Paths. Header Include Paths is what I mean."}, {"owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1421261635, "post_id": 27948093, "comment_id": 44295731, "body": "One thing I noticed is that the Include Path of Compilers like gcc is configured when &lt;code&gt;./configure&lt;/code&gt; and hardcoded... So maybe I need to reinstall it..."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 1, "creation_date": 1421263160, "post_id": 27948093, "comment_id": 44296537, "body": "<code>... include path of compilers like gcc is configured...</code> - <b><i>if</i></b> <code>configure</code> is written properly, it will uptake anything you supply through <code>CPP</code>, <code>CC</code>, <code>CXX</code>, <code>CPPFLAGS</code>, <code>CFLAGS</code> and <code>CXXFLAGS</code>. But there are lots of projects that you have to manually open the Makefile after <code>configure</code> and fix it."}], "answers": [{"comments": [{"owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "edited": false, "score": 0, "creation_date": 1421254142, "post_id": 27948176, "comment_id": 44291235, "body": "I&#39;ll try but it&#39;s not a xcode project. I just try to git clone and make."}, {"owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "edited": false, "score": 0, "creation_date": 1421254270, "post_id": 27948176, "comment_id": 44291325, "body": "I choose &quot;Open another project...&quot; and select the project root dir, but nothing happens."}, {"owner": {"reputation": 86437, "user_id": 981049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AYKWV.jpg?s=128&g=1", "display_name": "Michael Dautermann", "link": "https://stackoverflow.com/users/981049/michael-dautermann"}, "reply_to_user": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "edited": false, "score": 1, "creation_date": 1421254275, "post_id": 27948176, "comment_id": 44291327, "body": "drat!  Well at least my answer will help other folks who do have Xcode project problems."}], "owner": {"reputation": 86437, "user_id": 981049, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/AYKWV.jpg?s=128&g=1", "display_name": "Michael Dautermann", "link": "https://stackoverflow.com/users/981049/michael-dautermann"}, "is_accepted": false, "score": 4, "last_activity_date": 1421254031, "creation_date": 1421254031, "answer_id": 27948176, "question_id": 27948093, "link": "https://stackoverflow.com/questions/27948093/include-search-path-on-mac-os-x-yosemite-10-10-1/27948176#27948176", "title": "Include search path on Mac OS X Yosemite 10.10.1", "body": "<p>You can go into your project settings and make changes to edit your library search paths very easily.</p>\n\n<p>See how I opened up the settings in this test project screenshot?  There's no paths in my own project there right now; but in your project, there will certainly be duplicate paths (or multiple paths that resolve to the same place).</p>\n\n<p><img src=\"https://i.stack.imgur.com/5ssCY.jpg\" alt=\"enter image description here\"></p>\n"}, {"comments": [{"owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "edited": false, "score": 0, "creation_date": 1421254605, "post_id": 27948194, "comment_id": 44291537, "body": "I want to do this for solving this issue. (the one about HDF5 library) <a href=\"https://github.com/BVLC/caffe/issues/1717\" rel=\"nofollow noreferrer\">github.com/BVLC/caffe/issues/1717</a>"}, {"owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "edited": false, "score": 0, "creation_date": 1421255821, "post_id": 27948194, "comment_id": 44292277, "body": "sysroot sounds nice!! I&#39;ll try. I believe cross-compiling is not problem, because I&#39;ve worked soooo hard to solved it except for the library search path order. In more detail, I have correct hdf5 header file in /usr/local/include, and also I have wrong hdf5 header file in ~/anaconda/include and it&#39;s searched first!!!"}, {"owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "edited": false, "score": 0, "creation_date": 1421256182, "post_id": 27948194, "comment_id": 44292504, "body": "If I delete ~/anaconda/include/*hdf5*.h, it would work fine, but I DON&#39;T want to do that because it contaminates my environment. It&#39;s already contaminated though. There&#39;s unexpected path on the lib search path..."}, {"owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "edited": false, "score": 0, "creation_date": 1421265476, "post_id": 27948194, "comment_id": 44297841, "body": "Warning for visitors! You cannot specify a file for -I option."}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "is_accepted": true, "score": 16, "last_activity_date": 1421261748, "last_edit_date": 1495542885, "creation_date": 1421254084, "answer_id": 27948194, "question_id": 27948093, "link": "https://stackoverflow.com/questions/27948093/include-search-path-on-mac-os-x-yosemite-10-10-1/27948194#27948194", "title": "Include search path on Mac OS X Yosemite 10.10.1", "body": "<blockquote>\n  <p>I'd like to change library search path...</p>\n</blockquote>\n\n<p>At compile time, you augment the library search path with <code>-L</code>. You cannot delete paths; you can only add paths that have a \"higher\" preference than existing paths.</p>\n\n<p>At runtime, you use <code>DYLD_LIBRARY_PATH</code>, <code>DYLD_FALLBACK_LIBRARY_PATH</code> and friends to change the library search path. See <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/dyld.1.html\" rel=\"noreferrer\"><code>dyld(1)</code> OS X Man Pages</a>.</p>\n\n<p>Usually you use <code>DYLD_LIBRARY_PATH</code> to ensure a particular library is loaded rather than the system one. Its a way to override default behavior. <code>DYLD_FALLBACK_LIBRARY_PATH</code> is used to provide a library that's not a system one. Its less intrusive because you don't displace system paths.</p>\n\n<h2>----------</h2>\n\n<blockquote>\n  <p>I need /usr/local/include first...</p>\n</blockquote>\n\n<p>Sounds a bit odd to me, but...</p>\n\n<pre><code>$ export DYLD_LIBRARY_PATH=/usr/local/include\n$ clang ...\n</code></pre>\n\n<h2>----------</h2>\n\n<p><strong><em>IF</em></strong> you are cross-compiling from the command line, you should do something like this. The trick is to use <code>--sysroot</code> to automatically bring in the headers and libraries for the platform, rather than hacking them with <code>-I</code>, <code>-L</code> and <code>-l</code>.</p>\n\n<pre><code># Put cross compile tools on the PATH first\nexport PATH=\"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/:$PATH\"\n\n# C compiler\nexport CC=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\n\n# C++ compiler\nexport CXX=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++\n\n# SYSROOT brings in platform headers and libraries, No need for -I, -L and -l.\nSYSROOT=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS7.1.sdk\n\n# Compiler flags\nexport CFLAGS=\"-march armv7 -march armv7s --sysroot=$SYSROOT\"\n\n# Compiler flags\nexport CXXFLAGS=\"-march armv7 -march armv7s --sysroot=$SYSROOT\"\n\n# Using defualt C++ runtime\n$CXX $CXXFLAGS foo.c -o foo.exe\n</code></pre>\n\n<p>You can also specify GNU's runtime with <code>-stdlib=libstdc++</code>, and LLVM's runtime with <code>-stdlib=libc++</code>.</p>\n\n<h2>----------</h2>\n\n<p>Based on your updates:</p>\n\n<blockquote>\n  <p><code>&lt;ld command and output omitted&gt;</code> <br>\n  where does this path /usr/include/c++/4.2.1 come from??</p>\n</blockquote>\n\n<p><code>/usr/include/c++/4.2.1</code> is <em>not</em> in your <strong><em>Library Search Path</em></strong>. Its just not there.</p>\n\n<p>That's a header include path, and you specify it with <code>-I</code>.</p>\n\n<p>If you want to see your header include paths for <code>libstdc++</code> and <code>libc++</code>, do this:</p>\n\n<pre><code># GNU C++ runtime\n$ echo | /usr/local/bin/clang++ -Wp,-v -stdlib=ibstdc++ -x c++ - -fsyntax-only\n</code></pre>\n\n<p>And:</p>\n\n<pre><code># LLVM C++ runtime\n$ echo | /usr/local/bin/clang++ -Wp,-v -stdlib=libc++ -x c++ - -fsyntax-only\n</code></pre>\n\n<p>Here's what I get on OS X 10.8.5:</p>\n\n<p><strong>libstdc++ (GNU)</strong>:</p>\n\n<pre><code> /usr/include/c++/4.2.1\n /usr/include/c++/4.2.1/backward\n /usr/local/include\n /usr/local/bin/../lib/clang/3.5.0/include\n /usr/include\n /System/Library/Frameworks (framework directory)\n /Library/Frameworks (framework directory\n</code></pre>\n\n<p><strong>libc++ (LLVM)</strong>:</p>\n\n<pre><code> /usr/local/include\n /usr/local/bin/../lib/clang/3.5.0/include\n /usr/include\n /System/Library/Frameworks (framework directory)\n /Library/Frameworks (framework directory)\n</code></pre>\n\n<p>So <code>/usr/include/c++/4.2.1</code> is a built-in compiler path when using GNU's <code>libstdc++</code> (but not LLVM's <code>libc++</code>). I'll go even further and tell you its hard coded in LLVM/Clang sources (I build LLVM/Clang from source often):</p>\n\n<pre><code>$ cd clang-sources/llvm\n$ grep -R \"/usr/include/c++/4.2.1\" *\ntools/clang/lib/Frontend/InitHeaderSearch.cpp:      AddGnuCPlusPlusIncludePaths(\"/usr/include/c++/4.2.1\",\ntools/clang/lib/Frontend/InitHeaderSearch.cpp:      AddGnuCPlusPlusIncludePaths(\"/usr/include/c++/4.2.1\",\ntools/clang/lib/Frontend/InitHeaderSearch.cpp:      AddGnuCPlusPlusIncludePaths(\"/usr/include/c++/4.2.1\",\ntools/clang/lib/Frontend/InitHeaderSearch.cpp:      AddGnuCPlusPlusIncludePaths(\"/usr/include/c++/4.2.1\",\ntools/clang/lib/Frontend/InitHeaderSearch.cpp:      AddGnuCPlusPlusIncludePaths(\"/usr/include/c++/4.2.1\",\n</code></pre>\n\n<p>You can add additional include paths when building LLVM/Clang with <code>--with-c-include-dirs</code>.</p>\n\n<h2>----------</h2>\n\n<p>Based on your comment: <em>\"... If I delete ~/anaconda/include/hdf5.h...\"</em>. If you need a new path for the HDF5 package, then use something like:</p>\n\n<pre><code>export CPPFLAGS=\"-I/path/to/preferred/HDF5/hdf5.h\"\nexport CFLAGS=\"-I/path/to/preferred/HDF5/hdf5.h\"\nexport CXXFLAGS=\"-I/path/to/preferred/HDF5/hdf5.h\"\nexport LDFLAGS=\"-L/path/to/preferred/HDF5/lib\"\n./configure ...\n</code></pre>\n\n<p>You need it in <code>CPPFLAGS</code> too because the autotools might run some tests with it.</p>\n\n<p>Then, at runtime:</p>\n\n<pre><code>export DYLD_LIBRARY_PATH=/path/to/preferred/HDF5/lib\n./run_the_executable\n</code></pre>\n\n<p>And you can side step <code>DYLD_LIBRARY_PATH</code> <strong><em>IF</em></strong> you perform static linking against HDF5. But be aware the OS X linker always uses a shared object or dynalib <em>if</em> its available. Effectively, it ignores your request for static linking. You will have to <code>mv</code> shared object or dynalib off-path while leaving an archive on-path.</p>\n\n<h2>----------</h2>\n\n<p>To muddy the waters a little more... If you are saying \"library\" when you really want to say \"framework\", then see this Stack Overflow question about using the <code>-framework</code> option: <a href=\"https://stackoverflow.com/q/16387484/608639\">Clang(LLVM) compile with frameworks</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 5426, "user_id": 4887423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/yW2L2.jpg?s=128&g=1", "display_name": "Willie Cheng", "link": "https://stackoverflow.com/users/4887423/willie-cheng"}, "edited": false, "score": 0, "creation_date": 1466066311, "post_id": 37853594, "comment_id": 63166468, "body": "please follow this <a href=\"http://stackoverflow.com/help\">URL</a>it will be useful to lift your content quality up"}, {"owner": {"reputation": 28015, "user_id": 63550, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RIZKi.png?s=128&g=1", "display_name": "Peter Mortensen", "link": "https://stackoverflow.com/users/63550/peter-mortensen"}, "edited": false, "score": 0, "creation_date": 1511303138, "post_id": 37853594, "comment_id": 81802382, "body": "Do you really mean <code>-V</code>? Or should it be <code>-v</code>?"}], "owner": {"reputation": 194, "user_id": 5668001, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207262807947075/picture?type=large", "display_name": "Eman Jayme", "link": "https://stackoverflow.com/users/5668001/eman-jayme"}, "is_accepted": false, "score": 2, "last_activity_date": 1511303057, "last_edit_date": 1511303057, "creation_date": 1466065075, "answer_id": 37853594, "question_id": 27948093, "link": "https://stackoverflow.com/questions/27948093/include-search-path-on-mac-os-x-yosemite-10-10-1/37853594#37853594", "title": "Include search path on Mac OS X Yosemite 10.10.1", "body": "<ul>\n<li>Open Terminal</li>\n<li>Run <code>gcc -V</code></li>\n<li>Read the information and copy the include path. Mine is\n/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.11.sdk/usr/include/c++/4.2.1</li>\n</ul>\n"}], "owner": {"reputation": 946, "user_id": 2288621, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/h8GFl.jpg?s=128&g=1", "display_name": "Hiroaki Machida", "link": "https://stackoverflow.com/users/2288621/hiroaki-machida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46805, "favorite_count": 9, "accepted_answer_id": 27948194, "answer_count": 3, "score": 10, "last_activity_date": 1511303057, "creation_date": 1421253790, "last_edit_date": 1511302441, "question_id": 27948093, "link": "https://stackoverflow.com/questions/27948093/include-search-path-on-mac-os-x-yosemite-10-10-1", "title": "Include search path on Mac OS X Yosemite 10.10.1", "body": "<p><strong>I just to change the include search path order (I believe).</strong></p>\n\n<p><hr>\nI'd like to change the include search path. Especially, I need <code>/usr/local/include</code> first.</p>\n\n<p>But it doesn't change because of duplicate. How can I change it?</p>\n\n<p>I suppose there's default setting, because paths I don't specify appears. Like <code>/usr/include/c++/4.2.1</code>, <code>/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/6.0/include</code></p>\n\n<pre><code> \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\" -cc1 -triple x86_64-apple-macosx10.10.0 -emit-obj -mrelax-all -disable-free -disable-llvm-verifier -main-file-name test_common.cpp -mrelocation-model pic -pic-level 2 -mdisable-fp-elim -masm-verbose -munwind-tables -target-cpu core2 -target-linker-version 241.9 -v -gdwarf-2 -coverage-file /Users/machidahiroaki/RubymineProjects/caffe/.build_debug/src/caffe/test/test_common.o -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/6.0 -D DEBUG -D CPU_ONLY -I /usr/local/include -I /usr/local/include -I /Users/machidahiroaki/anaconda/include -I /Users/machidahiroaki/anaconda/include/python2.7 -I /Users/machidahiroaki/anaconda/lib/python2.7/site-packages/numpy/core/include -I .build_debug/src -I ./src -I ./include -I /usr/local/atlas/include -stdlib=libstdc++ -O0 -Wall -Wno-sign-compare -Wno-unneeded-internal-declaration -fdeprecated-macro -fdebug-compilation-dir /Users/machidahiroaki/RubymineProjects/caffe -ferror-limit 19 -fmessage-length 0 -pthread -stack-protector 1 -mstackrealign -fblocks -fobjc-runtime=macosx-10.10.0 -fencode-extended-block-signature -fcxx-exceptions -fexceptions -fdiagnostics-show-option -vectorize-slp -o .build_debug/src/caffe/test/test_common.o -x c++ src/caffe/test/test_common.cpp\nclang -cc1 version 6.0 based upon LLVM 3.5svn default target x86_64-apple-darwin14.0.0\nignoring nonexistent directory \"/usr/include/c++/4.2.1/i686-apple-darwin10/x86_64\"\nignoring nonexistent directory \"/usr/include/c++/4.0.0\"\nignoring nonexistent directory \"/usr/include/c++/4.0.0/i686-apple-darwin8/\"\nignoring nonexistent directory \"/usr/include/c++/4.0.0/backward\"\nignoring duplicate directory \"/usr/local/include\"\nignoring duplicate directory \"/usr/local/include\"\n  as it is a non-system directory that duplicates a system directory\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /Users/machidahiroaki/anaconda/include\n /Users/machidahiroaki/anaconda/include/python2.7\n /Users/machidahiroaki/anaconda/lib/python2.7/site-packages/numpy/core/include\n .build_debug/src\n ./src\n ./include\n /usr/local/atlas/include\n /usr/include/c++/4.2.1\n /usr/include/c++/4.2.1/backward\n /usr/local/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/6.0/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n /usr/include\n /System/Library/Frameworks (framework directory)\n /Library/Frameworks (framework directory)\nEnd of search list.\n</code></pre>\n\n<hr/>\n\n<h2>Library search paths</h2>\n\n<pre><code>Machida-no-MacBook-Air:caffe machidahiroaki$ /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld -v ...\n@(#)PROGRAM:ld  PROJECT:ld64-241.9\nconfigured to support archs: armv6 armv7 armv7s arm64 i386 x86_64 x86_64h armv6m armv7m armv7em\nLibrary search paths:\n    /usr/lib\n    /usr/local/lib\nFramework search paths:\n    /Library/Frameworks/\n    /System/Library/Frameworks/\n</code></pre>\n\n<p>For sure this is the <code>ld</code> done in <code>make</code>.</p>\n\n<pre><code> \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld\" -demangle -dynamic -dylib -arch x86_64 -macosx_version_min 10.10.0 -t -o .build_debug/lib/libcaffe.so -L/usr/local/lib -L/usr/lib -L/usr/local/atlas/lib .build_debug/src/caffe/proto/caffe.pb.o .build_debug/src/caffe/proto/caffe_pretty_print.pb.o .build_debug/src/caffe/blob.o .build_debug/src/caffe/common.o .build_debug/src/caffe/data_transformer.o .build_debug/src/caffe/internal_thread.o .build_debug/src/caffe/layer_factory.o .build_debug/src/caffe/layers/absval_layer.o .build_debug/src/caffe/layers/accuracy_layer.o .build_debug/src/caffe/layers/argmax_layer.o .build_debug/src/caffe/layers/base_data_layer.o .build_debug/src/caffe/layers/bnll_layer.o .build_debug/src/caffe/layers/concat_layer.o .build_debug/src/caffe/layers/contrastive_loss_layer.o .build_debug/src/caffe/layers/conv_layer.o .build_debug/src/caffe/layers/cudnn_conv_layer.o .build_debug/src/caffe/layers/cudnn_pooling_layer.o .build_debug/src/caffe/layers/cudnn_relu_layer.o .build_debug/src/caffe/layers/cudnn_sigmoid_layer.o .build_debug/src/caffe/layers/cudnn_softmax_layer.o .build_debug/src/caffe/layers/cudnn_tanh_layer.o .build_debug/src/caffe/layers/data_layer.o .build_debug/src/caffe/layers/dropout_layer.o .build_debug/src/caffe/layers/dummy_data_layer.o .build_debug/src/caffe/layers/eltwise_layer.o .build_debug/src/caffe/layers/euclidean_loss_layer.o .build_debug/src/caffe/layers/flatten_layer.o .build_debug/src/caffe/layers/hdf5_data_layer.o .build_debug/src/caffe/layers/hdf5_output_layer.o .build_debug/src/caffe/layers/hinge_loss_layer.o .build_debug/src/caffe/layers/im2col_layer.o .build_debug/src/caffe/layers/image_data_layer.o .build_debug/src/caffe/layers/infogain_loss_layer.o .build_debug/src/caffe/layers/inner_product_layer.o .build_debug/src/caffe/layers/loss_layer.o .build_debug/src/caffe/layers/lrn_layer.o .build_debug/src/caffe/layers/memory_data_layer.o .build_debug/src/caffe/layers/multinomial_logistic_loss_layer.o .build_debug/src/caffe/layers/mvn_layer.o .build_debug/src/caffe/layers/neuron_layer.o .build_debug/src/caffe/layers/pooling_layer.o .build_debug/src/caffe/layers/power_layer.o .build_debug/src/caffe/layers/relu_layer.o .build_debug/src/caffe/layers/sigmoid_cross_entropy_loss_layer.o .build_debug/src/caffe/layers/sigmoid_layer.o .build_debug/src/caffe/layers/silence_layer.o .build_debug/src/caffe/layers/slice_layer.o .build_debug/src/caffe/layers/softmax_layer.o .build_debug/src/caffe/layers/softmax_loss_layer.o .build_debug/src/caffe/layers/split_layer.o .build_debug/src/caffe/layers/tanh_layer.o .build_debug/src/caffe/layers/threshold_layer.o .build_debug/src/caffe/layers/window_data_layer.o .build_debug/src/caffe/net.o .build_debug/src/caffe/solver.o .build_debug/src/caffe/syncedmem.o .build_debug/src/caffe/util/benchmark.o .build_debug/src/caffe/util/im2col.o .build_debug/src/caffe/util/insert_splits.o .build_debug/src/caffe/util/io.o .build_debug/src/caffe/util/math_functions.o .build_debug/src/caffe/util/upgrade_proto.o -framework Accelerate -lglog -lgflags -lprotobuf -lleveldb -lsnappy -llmdb -lboost_system -lhdf5_hl -lhdf5 -lopencv_core -lopencv_highgui -lopencv_imgproc -lpthread -lboost_thread-mt -lcblas -lstdc++ -lSystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/6.0/lib/darwin/libclang_rt.osx.a\n</code></pre>\n\n<p><strong>So... where does this path <code>/usr/include/c++/4.2.1</code> come from?</strong></p>\n\n<hr/>\n\n<p>Did I get some hints?</p>\n\n<pre><code>Machida-no-MacBook-Air:caffe machidahiroaki$ g++ -print-search-dirs\ninstall: /usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/\nprograms: =/usr/local/libexec/gcc/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/libexec/gcc/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/libexec/gcc/x86_64-apple-darwin14.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../../x86_64-apple-darwin14.0.0/bin/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../../x86_64-apple-darwin14.0.0/bin/\nlibraries: =/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../../x86_64-apple-darwin14.0.0/lib/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../../x86_64-apple-darwin14.0.0/lib/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../:/lib/x86_64-apple-darwin14.0.0/5.0.0/:/lib/:/usr/lib/x86_64-apple-darwin14.0.0/5.0.0/:/usr/lib/\nMachida-no-MacBook-Air:caffe machidahiroaki$ clang++ -print-search-dirs\nprograms: =/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin:/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\nlibraries: =/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/6.0\nM\n</code></pre>\n\n<p>I don't know if it has to do with the problem...</p>\n\n<pre><code>Machida-no-MacBook-Air:caffe machidahiroaki$ gcc -print-search-dirs\ninstall: /usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/\nprograms: =/usr/local/libexec/gcc/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/libexec/gcc/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/libexec/gcc/x86_64-apple-darwin14.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../../x86_64-apple-darwin14.0.0/bin/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../../x86_64-apple-darwin14.0.0/bin/\nlibraries: =/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../../x86_64-apple-darwin14.0.0/lib/x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../../x86_64-apple-darwin14.0.0/lib/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../x86_64-apple-darwin14.0.0/5.0.0/:/usr/local/lib/gcc/x86_64-apple-darwin14.0.0/5.0.0/../../../:/lib/x86_64-apple-darwin14.0.0/5.0.0/:/lib/:/usr/lib/x86_64-apple-darwin14.0.0/5.0.0/:/usr/lib/\nMachida-no-MacBook-Air:caffe machidahiroaki$ gcc --version\ngcc (GCC) 5.0.0 20141005 (experimental)\nCopyright (C) 2014 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n</code></pre>\n\n<hr/>\n\n<p><b>Wait, <code>export CFLAGS=\"-I/path/to/preferred/HDF5/hdf5.h\"</code> would not work...</b></p>\n\n<p>Specify nothing</p>\n\n<pre><code>Machida-no-MacBook-Air:caffe machidahiroaki$ echo | \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\" -Wp,-v -stdlib=libstdc++ -x c++ - -fsyntax-only\nclang -cc1 version 6.0 based upon LLVM 3.5svn default target x86_64-apple-darwin14.0.0\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/include/c++/4.2.1\n /usr/include/c++/4.2.1/backward\n /usr/local/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/6.0/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n /usr/include\n /System/Library/Frameworks (framework directory)\n /Library/Frameworks (framework directory)\nEnd of search list.\n</code></pre>\n\n<p><b>Can't specify a header file!!</b></p>\n\n<pre><code>Machida-no-MacBook-Air:caffe machidahiroaki$ echo | \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\" -Wp,-v -stdlib=libstdc++ -x c++ - -fsyntax-only -I/usr/local/include/hdf5.h\nclang -cc1 version 6.0 based upon LLVM 3.5svn default target x86_64-apple-darwin14.0.0\nignoring nonexistent directory \"/usr/local/include/hdf5.h\"\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/include/c++/4.2.1\n /usr/include/c++/4.2.1/backward\n /usr/local/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/6.0/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n /usr/include\n /System/Library/Frameworks (framework directory)\n /Library/Frameworks (framework directory)\nEnd of search list.\n</code></pre>\n\n<p>As expected, the duplicate directory is ignored and <b>the order does not change.</b></p>\n\n<pre><code>Machida-no-MacBook-Air:caffe machidahiroaki$ echo | \"/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang\" -Wp,-v -stdlib=libstdc++ -x c++ - -fsyntax-only -I/usr/local/include/\nclang -cc1 version 6.0 based upon LLVM 3.5svn default target x86_64-apple-darwin14.0.0\nignoring duplicate directory \"/usr/local/include\"\n  as it is a non-system directory that duplicates a system directory\n#include \"...\" search starts here:\n#include &lt;...&gt; search starts here:\n /usr/include/c++/4.2.1\n /usr/include/c++/4.2.1/backward\n /usr/local/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/../lib/clang/6.0/include\n /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include\n /usr/include\n /System/Library/Frameworks (framework directory)\n /Library/Frameworks (framework directory)\nEnd of search list.\n</code></pre>\n\n<hr/>\n\n<p><strong>But, I found <code>clang</code>'s <code>-include</code> option, which is able to specify a file!</strong></p>\n"}, {"tags": ["c++", "visual-studio-2012", "c++11", "compiler-errors", "unique-ptr"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1421253545, "post_id": 27947962, "comment_id": 44290853, "body": "Your compiler gave you an error message but no line/file to go with it?"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421253554, "post_id": 27947962, "comment_id": 44290858, "body": "Try compiling with vaguely recent versions of g++ or clang. They will tell you exactly where the copy is being instantiated. Actually, any version that supports <code>unique_ptr</code> should tell you that."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1421253602, "post_id": 27947962, "comment_id": 44290897, "body": "@juanchopanza If it supports unique_ptr isn&#39;t it by default a vaguely recent version of g++/clang?"}, {"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1421253880, "post_id": 27947962, "comment_id": 44291068, "body": "@Borgleader - The line numbers it is giving me for this error are all off in the compiler&#39;s own template code. VS2012 error messages FTL!"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 2, "creation_date": 1421253961, "post_id": 27947962, "comment_id": 44291114, "body": "@T.E.D.: the line numbers are not all in the compiler&#39;s code. look for the file names."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1421254003, "post_id": 27947962, "comment_id": 44291141, "body": "<a href=\"http://stackoverflow.com/questions/26160396/map-of-lists-of-move-only-type-wont-compile\">Related issue?</a>"}, {"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 2, "creation_date": 1421254081, "post_id": 27947962, "comment_id": 44291188, "body": "unique_ptr is not copyable (although it is movable). As a result subrecord is also non-copyable (but is movable). if you are copying subrecord anywhere it is going to give you the same error. As a test put subrecord( const subrecord &amp; ) = delete; subrecord( subrecord&amp;&amp; ) = default; Might make it easier to find the error in your code then"}, {"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1421254227, "post_id": 27947962, "comment_id": 44291296, "body": "@Cheersandhth.-Alf - Oh yes they are. Every single error message is either calling out a line in <code>...\\VC\\include\\list</code> or in <code>...\\VC\\include\\xmemory0</code>, except for the last that just points to the first template instantiation off in a header file of mine."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1421254290, "post_id": 27947962, "comment_id": 44291337, "body": "@Borgleader, GCC 4.4 supported <code>unique_ptr</code> but is not very recent (although it would still tell you where the copy was required from)"}, {"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "edited": false, "score": 0, "creation_date": 1421254384, "post_id": 27947962, "comment_id": 44291402, "body": "he can&#39;t run it through a debugger to find compiler errors.."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1421254397, "post_id": 27947962, "comment_id": 44291413, "body": "@T.E.D. are you <i>sure</i> the compiler isn&#39;t also showing you the call stack that led to the error inside the library? GCC and Clang will print something like &quot;required from ...; required from ...;&quot; to show how an error in a header was reached, so you can trace it back to your own code. I would be amazed if VC++ doesn&#39;t do that too. The relevant lines might not start with the word &quot;error&quot;"}, {"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1421256534, "post_id": 27947962, "comment_id": 44292749, "body": "@JonathanWakely - Be amazed, because it doesn&#39;t. At least not the VS2012 build I&#39;m using. Perhaps more recent versions of the compiler are better."}, {"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1421257362, "post_id": 27947962, "comment_id": 44293257, "body": "@Borgleader - After futzing around with things as suggested, I think you are most likely correct that this is the same bug as <a href=\"http://stackoverflow.com/questions/26160396/map-of-lists-of-move-only-type-wont-compile\">this issue</a>. Damn shame the compiler had to make things so difficult to track down."}], "answers": [{"comments": [{"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 0, "creation_date": 1421257288, "post_id": 27948260, "comment_id": 44293206, "body": "OK. Deleted previous comment, as the error I got was (as you suspected) due to not making the move constructor visible. Oddly, when I do this, everything compiles. Like there is in fact no copy. The most logical explanation here is probably that @borgleader is right, and I&#39;ve stumbled over the compiler bug mentioned in <a href=\"http://stackoverflow.com/questions/26160396/map-of-lists-of-move-only-type-wont-compile\">this question</a>"}, {"owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "reply_to_user": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 0, "creation_date": 1421257800, "post_id": 27948260, "comment_id": 44293536, "body": "Ok that doesn&#39;t surprise me with VC12 that it isn&#39;t fully compliant"}, {"owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "edited": false, "score": 0, "creation_date": 1421262071, "post_id": 27948260, "comment_id": 44295964, "body": "Honestly, I&#39;m just happy to not be using VS6 anymore. :-)"}], "owner": {"reputation": 29011, "user_id": 442284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/b5c1e7936dd4e0e08a75b7b16aebb6f1?s=128&d=identicon&r=PG", "display_name": "CashCow", "link": "https://stackoverflow.com/users/442284/cashcow"}, "is_accepted": true, "score": 3, "last_activity_date": 1421256558, "last_edit_date": 1421256558, "creation_date": 1421254285, "answer_id": 27948260, "question_id": 27947962, "link": "https://stackoverflow.com/questions/27947962/how-can-i-find-the-source-of-a-copy/27948260#27948260", "title": "How can I find the source of a copy?", "body": "<p>If your code somewhere is copying subrecord it may be getting hidden in your error messages.</p>\n\n<p>As subrecord is movable but not copyable, you can put this in its header:</p>\n\n<pre><code> struct subrecord \n { \n       // ...\n\n       subrecord( const subrecord &amp; ) = delete;\n       subrecord( subrecord&amp;&amp; ) = default;\n };\n</code></pre>\n\n<p>You might even temporarily comment out the list member and see if any compiler errors come up where this copy is being invoked.</p>\n\n<p>NOTE: </p>\n\n<p>If your compiler doesn't support delete and default, make the copy constructor private but also you have to make the move constructor public.</p>\n\n<p>If this is just a temporary measure to find a compiler error, you can skip implementing it as you don't care about link errors. You'll remove it later, but will have to also remove the private copy-constructor. </p>\n\n<p>Although it is preferential that you do implement it because that will expose any further attempts in  the code to copy a subrecord without giving whoever dares to do it compiler error message hell.</p>\n"}], "owner": {"reputation": 41224, "user_id": 29639, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/J38sS.jpg?s=128&g=1", "display_name": "T.E.D.", "link": "https://stackoverflow.com/users/29639/t-e-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 27948260, "answer_count": 1, "score": 1, "last_activity_date": 1421256558, "creation_date": 1421253429, "last_edit_date": 1421255481, "question_id": 27947962, "link": "https://stackoverflow.com/questions/27947962/how-can-i-find-the-source-of-a-copy", "title": "How can I find the source of a copy?", "body": "<p>I have some container-using code that is causing me grief. The issue is that I want to put a smart pointer (unique_ptr) in one of the subfields. Eg:</p>\n\n<pre><code>struct subrecord {\n    int id;\n    int handle;\n    std::list&lt;std::unique_ptr&lt;some_really_big_record&gt;&gt; update; // &lt;-- Problem field\n};\n\nstruct database {\n    std::map &lt;std::string, subrecord&gt; name_subrec_map;\n    std::vector &lt;std::string&gt; a_names;\n    std::vector &lt;std::string&gt; b_names;\n};\n</code></pre>\n\n<p>Everything compiled just fine until I tried adding that <code>update</code> field. Once I did that, the compiler started to complain that there's no usable copy operator for that unique_ptr. That's fair enough, it isn't supposed to have one. I wasn't intending these map entries to be copied anyway.</p>\n\n<p>However, the compiler is not telling me where in my code this copy is coming from. There's rather a lot of it by now. Is there any good way to tell? I've tried searching for references to <code>update</code> and <code>name_subrec_map</code> and commenting them out, but haven't had any luck at all. The only thing that gets rid of the error is commenting out that <code>update</code> field itself.</p>\n\n<p>I'd hate to have to switch to a shared_ptr, just because I can't find the dang copy.</p>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 471, "user_id": 1783299, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/825e67b341af61d857045c0f3e858980?s=128&d=identicon&r=PG", "display_name": "sn710", "link": "https://stackoverflow.com/users/1783299/sn710"}, "edited": false, "score": 1, "creation_date": 1421260488, "post_id": 27947919, "comment_id": 44295093, "body": "Sorry but i am not understanding this correctly and had a couple of questions - why is your MVP looking so different in the two cases when you are <b>translating only</b> along z-axis? Also to which matrix is this translation being added to? Your model matrix seems constant across both cases and  &#39;Camera::getViewMatrix()&#39; doesn&#39;t seem to be using translation at all??"}, {"owner": {"reputation": 83, "user_id": 2892775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7560dfc00fd786b21eaebc2f8e4fc9d?s=128&d=identicon&r=PG&f=1", "display_name": "yonibr", "link": "https://stackoverflow.com/users/2892775/yonibr"}, "reply_to_user": {"reputation": 471, "user_id": 1783299, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/825e67b341af61d857045c0f3e858980?s=128&d=identicon&r=PG", "display_name": "sn710", "link": "https://stackoverflow.com/users/1783299/sn710"}, "edited": false, "score": 0, "creation_date": 1421261842, "post_id": 27947919, "comment_id": 44295845, "body": "The translation is being added to the matrix representing the camera, so the camera is moving, not the model. I think that might be why the MVP looks so different, but honestly I am not sure."}, {"owner": {"reputation": 83, "user_id": 2892775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7560dfc00fd786b21eaebc2f8e4fc9d?s=128&d=identicon&r=PG&f=1", "display_name": "yonibr", "link": "https://stackoverflow.com/users/2892775/yonibr"}, "reply_to_user": {"reputation": 471, "user_id": 1783299, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/825e67b341af61d857045c0f3e858980?s=128&d=identicon&r=PG", "display_name": "sn710", "link": "https://stackoverflow.com/users/1783299/sn710"}, "edited": false, "score": 0, "creation_date": 1421262060, "post_id": 27947919, "comment_id": 44295954, "body": "Also, center represents the vector for the center of the camera or model, so getViewMatrix() uses that translation."}], "answers": [{"comments": [{"owner": {"reputation": 26262, "user_id": 85306, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4283ac48d7f22118cc4e47a514b3269c?s=128&d=identicon&r=PG", "display_name": "Jherico", "link": "https://stackoverflow.com/users/85306/jherico"}, "edited": false, "score": 0, "creation_date": 1421263915, "post_id": 27950913, "comment_id": 44296955, "body": "See, this is what happens when I dither looking for other potential problems in the code.  I get beaten to the punch."}], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": true, "score": 0, "last_activity_date": 1421263779, "creation_date": 1421263779, "answer_id": 27950913, "question_id": 27947919, "link": "https://stackoverflow.com/questions/27947919/opengl-model-stretched-when-translated-from-origin/27950913#27950913", "title": "OpenGL: Model stretched when translated from origin", "body": "<p>glm uses column-major storage order, so you'll have to access elements as m[col][row]. Your <code>getTranslationMatrix()</code> function is not following that convention, as the translation vector should be in the last column. Your code printing the numbers of your matrices seems to interpret the contents transposed, too.</p>\n\n<p>Please note that glm alread has functionality to create transformation matrices like rotation, scaling and translation via the <a href=\"http://glm.g-truc.net/0.9.2/api/a00296.html\" rel=\"nofollow\"><code>GLM_GTX_transform</code> module</a>.</p>\n"}, {"owner": {"reputation": 26262, "user_id": 85306, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4283ac48d7f22118cc4e47a514b3269c?s=128&d=identicon&r=PG", "display_name": "Jherico", "link": "https://stackoverflow.com/users/85306/jherico"}, "is_accepted": false, "score": 0, "last_activity_date": 1421263849, "creation_date": 1421263849, "answer_id": 27950929, "question_id": 27947919, "link": "https://stackoverflow.com/questions/27947919/opengl-model-stretched-when-translated-from-origin/27950929#27950929", "title": "OpenGL: Model stretched when translated from origin", "body": "<p>I'd have to assume there's a problem with your functions that are directly accessing members of the matrix</p>\n\n<pre><code>glm::mat4 MovableObject::getScaleMatrix() const {\n  glm::mat4 scaleMatrix = glm::mat4(1.0);\n  scaleMatrix[0][0] = scaleFactors[0];\n  scaleMatrix[1][1] = scaleFactors[1];\n  scaleMatrix[2][2] = scaleFactors[2];\n  return scaleMatrix;\n}\n\nglm::mat4 MovableObject::getTranslationMatrix() const\n{\n  glm::mat4 translationMatrix = glm::mat4(1.);\n  translationMatrix[0][3] = center[0];\n  translationMatrix[1][3] = center[1];\n  translationMatrix[2][3] = center[2];\n  return translationMatrix;\n}\n</code></pre>\n\n<p>Why are you doing this instead of the much safer</p>\n\n<pre><code>glm::mat4 MovableObject::getScaleMatrix() const {\n  return glm::scale(glm::mat4(), scaleFactors);\n}\n\nglm::mat4 MovableObject::getTranslationMatrix() const {\n  return glm::translate(glm::mat4(), center);\n}\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 2892775, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a7560dfc00fd786b21eaebc2f8e4fc9d?s=128&d=identicon&r=PG&f=1", "display_name": "yonibr", "link": "https://stackoverflow.com/users/2892775/yonibr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 27950913, "answer_count": 2, "score": 0, "last_activity_date": 1421263849, "creation_date": 1421253281, "question_id": 27947919, "link": "https://stackoverflow.com/questions/27947919/opengl-model-stretched-when-translated-from-origin", "title": "OpenGL: Model stretched when translated from origin", "body": "<p>I'm working on a space flight simulator as my first real OpenGL project. I'm having trouble getting a cube to render properly when it isn't located at the origin. What happens is that the cube stretches out from the origin, and the degree of stretching depends on the amount translated from the origin.</p>\n\n<p>I believe that it has nothing to do with the shader, as I have tried two different vertex shaders with the same result. one of the shaders is a very simple shader:</p>\n\n<pre><code>#version 330 core\n\n// Input vertex data, different for all executions of this shader.\nlayout(location = 0) in vec3 vertexPosition_modelspace;\n\n// Output data ; will be interpolated for each fragment.\nout vec3 fragmentColor;\n// Values that stay constant for the whole mesh.\nuniform mat4 MVP;\n\nvoid main(){    \n\n    // Output position of the vertex, in clip space : MVP * position\n    gl_Position =  MVP * vec4(vertexPosition_modelspace,1);\n\n    // The color of each vertex will be interpolated\n    // to produce the color of each fragment\n    fragmentColor = vec3(255,255,255);\n}\n</code></pre>\n\n<p>It seems pretty clear to me that the problem is not with the shader.</p>\n\n<p>When the cube translated by 1 unit in each direction, it looks like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/oujZg.png\" alt=\"enter image description here\"></p>\n\n<p>When translating the camera in the positive Z direction, the cube will stretch more to follow the camera.</p>\n\n<p><strong>Before translating</strong> (camera located at (0,0,25) and model located at (5,5,5))</p>\n\n<p>MVP Matrix:    </p>\n\n<pre><code>(10.942525, 0.000000, 12.402489, 12.500000)   \n(0.000000, 14.590034, 12.402489, 12.500000)   \n(0.000000, 0.000000, 12.302468, 12.400000)   \n(0.000000, 0.000000, 24.804977, 25.000000) \n</code></pre>\n\n<p>Transformation Matrix: </p>\n\n<pre><code>(0.100000, 0.000000, 0.000000, 0.500000)   \n(0.000000, 0.100000, 0.000000, 0.500000)   \n(0.000000, 0.000000, 0.100000, 0.500000)   \n(0.000000, 0.000000, 0.000000, 1.000000)   \n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/aN5nW.png\" alt=\"enter image description here\"></p>\n\n<p><strong>After translating</strong> (camera translated in the positive z direction)</p>\n\n<p>Transformation Matrix: </p>\n\n<pre><code>(0.100000, 0.000000, 0.000000, 0.500000)\n(0.000000, 0.100000, 0.000000, 0.500000)\n(0.000000, 0.000000, 0.100000, 0.500000)\n(0.000000, 0.000000, 0.000000, 1.000000)\n</code></pre>\n\n<p>MVP Matrix: </p>\n\n<pre><code>(10.942525, 0.000000, 46.159237, 46.250000)\n(0.000000, 14.590034, 46.159237, 46.250000)\n(0.000000, 0.000000, 46.059216, 46.150002)\n(0.000000, 0.000000, 92.318474, 92.500000)\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/2yvso.png\" alt=\"enter image description here\"></p>\n\n<p>Here's my code for getting the transformation matrices from the models:</p>\n\n<pre><code>glm::mat4 MovableObject::getTransformationMatrix() const\n{\n    return getTranslationMatrix() * getRotationMatrix() * getScaleMatrix();\n}\n\nglm::mat4 MovableObject::getScaleMatrix() const\n{\n    glm::mat4 scaleMatrix = glm::mat4(1.0);\n    scaleMatrix[0][0] = scaleFactors[0];\n    scaleMatrix[1][1] = scaleFactors[1];\n    scaleMatrix[2][2] = scaleFactors[2];\n    return scaleMatrix;\n}\n\nglm::mat4 MovableObject::getRotationMatrix() const\n{\n    return glm::toMat4(rotation);\n}\n\nglm::mat4 MovableObject::getTranslationMatrix() const\n{\n    glm::mat4 translationMatrix = glm::mat4(1.);\n    translationMatrix[0][3] = center[0];\n    translationMatrix[1][3] = center[1];\n    translationMatrix[2][3] = center[2];\n    return translationMatrix;\n}\n</code></pre>\n\n<p>here's the rendering code for drawing the mesh:</p>\n\n<pre><code>void Mesh::render(glm::mat4 modelMatrix, const Camera&amp; camera)\n{\n    glUseProgram(programID);\n\n    glm::mat4 view = camera.getViewMatrix();\n    glm::mat4 pvm = camera.getProjectionMatrix() * view * modelMatrix;\n\n    std::cout &lt;&lt; \"MVP Matrix: \" &lt;&lt; glm::to_string(pvm) &lt;&lt; std::endl &lt;&lt; std::endl;\n\n    // Send our transformation to the currently bound shader,\n    // in the \"MVP\" uniform\n    glUniformMatrix4fv(matrixID, 1, GL_FALSE, &amp;pvm[0][0]);\n    glUniformMatrix4fv(modelMatrixID, 1, GL_FALSE, &amp;modelMatrix[0][0]);\n    glUniformMatrix4fv(viewMatrixID, 1, GL_FALSE, &amp;view[0][0]);\n\n    glUniform3f(lightID, 0.f, 0.f, 0.f); // TODO: hardwiring at 0 for now\n\n    // Bind our texture in Texture Unit 0\n    glActiveTexture(GL_TEXTURE0);\n    glBindTexture(GL_TEXTURE_2D, texture);\n    // Set \"myTextureSampler\" sampler to user Texture Unit 0\n    glUniform1i(textureID, 0);\n\n    // 1st attribute buffer : vertices\n    glEnableVertexAttribArray(0);\n    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);\n    glVertexAttribPointer(\n                          0,                  // attribute\n                          3,                  // size\n                          GL_FLOAT,           // type\n                          GL_FALSE,           // normalized?\n                          0,                  // stride\n                          (void*)0            // array buffer offset\n                          );\n\n    // 2nd attribute buffer : UVs\n    glEnableVertexAttribArray(1);\n    glBindBuffer(GL_ARRAY_BUFFER, uvBuffer);\n    glVertexAttribPointer(\n                          1,                                // attribute\n                          2,                                // size\n                          GL_FLOAT,                         // type\n                          GL_FALSE,                         // normalized?\n                          0,                                // stride\n                          (void*)0                          // array buffer offset\n                          );\n\n    // 3rd attribute buffer : normals\n    glEnableVertexAttribArray(2);\n    glBindBuffer(GL_ARRAY_BUFFER, normalBuffer);\n    glVertexAttribPointer(\n                          2,                                // attribute\n                          3,                                // size\n                          GL_FLOAT,                         // type\n                          GL_FALSE,                         // normalized?\n                          0,                                // stride\n                          (void*)0                          // array buffer offset\n                          );\n\n    // Draw the triangles !\n    glDrawArrays(GL_TRIANGLES, 0, vertices.size() );\n\n    glDisableVertexAttribArray(0);\n    glDisableVertexAttribArray(1);\n    glDisableVertexAttribArray(2);\n}\n</code></pre>\n\n<p>and here's the code for getting the camera matrices:</p>\n\n<pre><code>glm::mat4 Camera::getProjectionMatrix() const\n{\n    return glm::perspective(FoV, 4.0f / 3.0f, 0.1f, 1000.0f);\n}\n\nglm::mat4 Camera::getViewMatrix() const\n{\n    glm::mat4 matrix = glm::toMat4(rotation);\n    glm::vec3 up = glm::vec3(matrix[0][1], matrix[1][1], matrix[2][1]);\n    glm::vec3 forward = -glm::vec3(matrix[0][2], matrix[1][2], matrix[2][2]);\n\n\n    return glm::lookAt(center, center + forward, up);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "containers"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421253149, "post_id": 27947798, "comment_id": 44290585, "body": "Would a heap help ? You won&#39;t have total ordering, but will be able to pick the max element."}, {"owner": {"reputation": 1819, "user_id": 2814043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/21kYQ.png?s=128&g=1", "display_name": "Oncaphillis", "link": "https://stackoverflow.com/users/2814043/oncaphillis"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1421253362, "post_id": 27947798, "comment_id": 44290724, "body": "@Quentin no strict  ordering is essential"}, {"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1421254384, "post_id": 27947798, "comment_id": 44291401, "body": "Are you going to be doing lots of insertions and/or deletions in the middle of the data? That&#39;s going to make a big difference in acceptable solutions. Your current solution could be bettered by adding to the vector directly and running <code>std::sort</code> on it, it should be slightly faster overall."}, {"owner": {"reputation": 1819, "user_id": 2814043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/21kYQ.png?s=128&g=1", "display_name": "Oncaphillis", "link": "https://stackoverflow.com/users/2814043/oncaphillis"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1421258888, "post_id": 27947798, "comment_id": 44294203, "body": "@MarkRansom The problem with sort on a vector is that it doesn&#39;t guarantee uniqueness. If I walk through the data I would like double inserts of the same key to be silently ignored."}, {"owner": {"reputation": 1315, "user_id": 1300177, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG", "display_name": "screwnut", "link": "https://stackoverflow.com/users/1300177/screwnut"}, "edited": false, "score": 0, "creation_date": 1421263660, "post_id": 27947798, "comment_id": 44296817, "body": "@Oncaphillis If you only have relatively few duplicates, you can use <a href=\"http://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\"><code>std::unique</code></a> after <code>std::sort</code>. Btw, is is correct to say that your situation involves first building the data structure once and for all and that it is later only read from?"}, {"owner": {"reputation": 1819, "user_id": 2814043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/21kYQ.png?s=128&g=1", "display_name": "Oncaphillis", "link": "https://stackoverflow.com/users/2814043/oncaphillis"}, "reply_to_user": {"reputation": 1315, "user_id": 1300177, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4996dd0400f07c6dd5776f5498c04aea?s=128&d=identicon&r=PG", "display_name": "screwnut", "link": "https://stackoverflow.com/users/1300177/screwnut"}, "edited": false, "score": 0, "creation_date": 1421266822, "post_id": 27947798, "comment_id": 44298485, "body": "@screwnut No -- I expect many duplicates and no I expect many insert afterwards, deletes however are very unlikely."}], "answers": [{"comments": [{"owner": {"reputation": 1819, "user_id": 2814043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/21kYQ.png?s=128&g=1", "display_name": "Oncaphillis", "link": "https://stackoverflow.com/users/2814043/oncaphillis"}, "edited": false, "score": 0, "creation_date": 1421254341, "post_id": 27947965, "comment_id": 44291376, "body": "I&#39;ll have to look at the performance for insertion/deletion but I think this is it. boost is definitely an option"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1421255138, "post_id": 27947965, "comment_id": 44291868, "body": "They provide a random access iterator but no <code>operator[]</code>? Wonder what the rationale is for that."}, {"owner": {"reputation": 1819, "user_id": 2814043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/21kYQ.png?s=128&g=1", "display_name": "Oncaphillis", "link": "https://stackoverflow.com/users/2814043/oncaphillis"}, "edited": false, "score": 1, "creation_date": 1421256580, "post_id": 27947965, "comment_id": 44292772, "body": "Well I had a test run with 10^6 random number inserts and it took sth. like 140 sec. Insertion into a std::set&lt;int&gt; with later copy into a std::vector&lt;int&gt; did it under 1sec. Since I&#39;m not doing many insertion/deletions after initialization I think I stick with my solution. However I still take this answer as the proper solution to my initial question."}, {"owner": {"reputation": 1819, "user_id": 2814043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/21kYQ.png?s=128&g=1", "display_name": "Oncaphillis", "link": "https://stackoverflow.com/users/2814043/oncaphillis"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1421276282, "post_id": 27947965, "comment_id": 44303083, "body": "@Barry the semantic of [] is to access the container via a key/index but a set or flat_set doesn&#39;t have a key/index unless you say the value itself is the key/index. In this case the only valid assignment would be set[n] = n; and a read access doesn&#39;t make anything at all since the value you get back will always be the key itself."}], "owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "is_accepted": true, "score": 8, "last_activity_date": 1421254243, "last_edit_date": 1421254243, "creation_date": 1421253441, "answer_id": 27947965, "question_id": 27947798, "link": "https://stackoverflow.com/questions/27947798/container-with-stdvector-and-stdset-properties/27947965#27947965", "title": "Container with std::vector and std::set properties ?", "body": "<p>If Boost is an option, have a look at <a href=\"http://www.boost.org/doc/libs/1_57_0/doc/html/container/non_standard_containers.html#container.non_standard_containers.flat_xxx\"><code>flat_set</code> in the Containers library</a>.</p>\n\n<p>The interface for <code>flat_set</code> is identical to that of <code>std::set</code> but it provides random access iterators, like <code>std::vector</code>:</p>\n\n<pre><code>#include &lt;boost/container/flat_set.hpp&gt;\n\n[...]\n\nboost::container::flat_set&lt;int&gt; c;\nc.insert(1);\nc.insert(2);\nc.insert(3);\nc.insert(4);\n\n// unfortunately, no operator[] on the container itself,\n// but the iterator is random access\nint third_element = c.begin()[2];\n</code></pre>\n\n<p>If you are stuck with the standard library, you can use a sorted <code>vector</code> for this purpose. The standard library actually offers a lot of algorithms in the <code>&lt;algorithm&gt;</code> header that allow you to do pretty much anything that you can do with a <code>set</code> with a sorted iterator range.</p>\n"}, {"owner": {"reputation": 930, "user_id": 776142, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5d7f290f5c21eea3d32876da2f513e93?s=128&d=identicon&r=PG", "display_name": "Daerst", "link": "https://stackoverflow.com/users/776142/daerst"}, "is_accepted": false, "score": 1, "last_activity_date": 1421253456, "creation_date": 1421253456, "answer_id": 27947971, "question_id": 27947798, "link": "https://stackoverflow.com/questions/27947798/container-with-stdvector-and-stdset-properties/27947971#27947971", "title": "Container with std::vector and std::set properties ?", "body": "<p>None that I am aware of. However, with hundreds of millions of elements and some ordered access you might want your memory representation to be compact and consecutive, which are even more requirements for your container class.</p>\n\n<p>I'd go with <code>std::vector</code> and use the approach that you have described or any other sorting algorithm. You probably won't need your <code>std::set</code> afterwards, so you can free the memory.</p>\n"}, {"comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1421253990, "post_id": 27948035, "comment_id": 44291133, "body": "I&#39;d also write the <code>const</code> version of <code>T&amp; operator[]</code>, so you can pass by <code>const</code> reference."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1421255012, "post_id": 27948035, "comment_id": 44291789, "body": "@vsoftco Right, this is by no means an exhaustive list of functions (e.g. there&#39;s no <code>const_iterator</code>, etc.)"}], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 1, "last_activity_date": 1421253629, "creation_date": 1421253629, "answer_id": 27948035, "question_id": 27947798, "link": "https://stackoverflow.com/questions/27947798/container-with-stdvector-and-stdset-properties/27948035#27948035", "title": "Container with std::vector and std::set properties ?", "body": "<p>Not in the standard C++ library, no. You either have <code>set</code>/<code>priority_queue</code> for ordering or <code>vector</code>/<code>deque</code> for random access. </p>\n\n<p>But there's nothing to stop you from writing your own wrapper around <code>vector</code> which simply enforces ordering. It's not that much code at all. Some example functions:</p>\n\n<pre><code>template &lt;typename T, typename COMP = std::less&lt;T&gt;&gt;\nclass sorted_vec {\n    std::vector&lt;T&gt; vec_;\n\npublic:\n    // random access\n    using iterator = typename std::vector&lt;T&gt;::iterator;\n    T&amp; operator[](size_t idx) { return vec_[idx]; }\n\n    iterator begin() { return vec_.begin(); }\n    iterator end() { return vec_.end(); }\n\n    // insertion\n    void push(const T&amp; val) {\n        vec_.insert(std::lower_bound(vec_.begin(), vec_.end(), COMP{}),\n                    val);\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 1819, "user_id": 2814043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/21kYQ.png?s=128&g=1", "display_name": "Oncaphillis", "link": "https://stackoverflow.com/users/2814043/oncaphillis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 0, "accepted_answer_id": 27947965, "answer_count": 3, "score": 6, "last_activity_date": 1421254243, "creation_date": 1421252985, "question_id": 27947798, "link": "https://stackoverflow.com/questions/27947798/container-with-stdvector-and-stdset-properties", "title": "Container with std::vector and std::set properties ?", "body": "<p>Is there a container in the C++ world that has these properties ?</p>\n\n<ul>\n<li>Elements are unique and ordered with the help of a customizable comparator</li>\n<li>provide an random access operator.</li>\n</ul>\n\n<p>I'm currently collecting my data into a <code>std::set&lt;C,COMPARATOR&gt;</code> and afterwards do a <code>std::copy(_set.begin(),_set.end(),std::back_inserter(_vec))</code> to be able to have random access to the ordered collection. The size however might go into hundreds of millions. </p>\n"}, {"tags": ["c++", "cmake", "project-management", "cmake-gui"], "comments": [{"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 6, "creation_date": 1421253284, "post_id": 27947767, "comment_id": 44290674, "body": "The generated project files are build artifacts, just like object files.  They aren&#39;t portable to other systems, and should never be manually modified or checked into a version control system."}, {"owner": {"reputation": 42863, "user_id": 577603, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/70c19b44cc2eb6f1a87a08fc892c502b?s=128&d=identicon&r=PG", "display_name": "ComicSansMS", "link": "https://stackoverflow.com/users/577603/comicsansms"}, "reply_to_user": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 1, "creation_date": 1421254749, "post_id": 27947767, "comment_id": 44291632, "body": "@Peter And that comment should probably be an answer. To clarify: You check in the <code>CMakeLists.txt</code> files themselves to your version control system, <i>not</i> the generated IDE project files. This of course means that each of your developers has to run CMake on their own machine before they can build anything, but that is kind of the point."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1421332926, "post_id": 27947767, "comment_id": 44324538, "body": "I always build out of source and with completely separate source and binary trees. This keeps the generated files out of the source control."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1421333327, "post_id": 27947767, "comment_id": 44324805, "body": "Forgot to mention. Project files are generated files and exist in the build tree. Also since I need to build with more than 1 compiler I have 1 source tree and several binary trees each binary tree having its own environment with all dependencies built for that compiler 32 or 64 bit.."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user896326"}, "edited": false, "score": 0, "creation_date": 1421851739, "post_id": 27948607, "comment_id": 44519409, "body": "So am I right when I say when you generate platform/IDE specific projects they shouldn&#39;t be modified anymore but only be used to build the final lib/exe? Thus: I can&#39;t work in my favourite IDE right?"}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1421856403, "post_id": 27948607, "comment_id": 44522727, "body": "You can <i>work</i> in your favorite IDE: write software, use the indexing functions, refactor functions, build, debug, etc.  You can&#39;t adjust the project such as adding files or changing compiler flags"}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1421856659, "post_id": 27948607, "comment_id": 44522906, "body": "Think about it: if the goal is to eliminate the maintenance of multiple project files, all doing things differently, then you have to start from a common cmake file.  Once you start modifying the generated project file and expecting it to be permanent, then what&#39;s difference from the original state of having a pile of different project files for different IDEs?"}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 0, "creation_date": 1421856833, "post_id": 27948607, "comment_id": 44523020, "body": "In fact, cmake ties directly in with the build functions of many IDEs, so that when you modify the CMakeLists.txt file to, for example, add a new source file, an IDE build will trigger a regeneration of the project files."}, {"owner": {"user_type": "does_not_exist", "display_name": "user896326"}, "edited": false, "score": 0, "creation_date": 1422201663, "post_id": 27948607, "comment_id": 44648242, "body": "I am sorry if I am a bit slow on the uptake. I understand that you have one source where you generate builds from. Since all options are specified in the CMake build you can&#39;t (or at least shouldn&#39;t) edit them in the IDE. So far so good I hope! But still this part I don&#39;t understand: You generate your build (for example for Visual Studio) in a different directory so the changes you make with Visual Studio only appear in the generated directory (so not the general CMake directory). Then what are the best practises of merging those together again? Or do I miss a point?"}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "edited": false, "score": 1, "creation_date": 1422240334, "post_id": 27948607, "comment_id": 44659955, "body": "Oh, I see the problem.  It is only the project file itself that lives in the build directory.  That project file references the source files in their original location.  Editing that source code from Visual Studio edits the original source.  No merging needed."}, {"owner": {"user_type": "does_not_exist", "display_name": "user896326"}, "edited": false, "score": 0, "creation_date": 1422286202, "post_id": 27948607, "comment_id": 44677790, "body": "Aha! Okay thanks! That explains a lot!:P Accepting your answer!"}], "owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "is_accepted": true, "score": 5, "last_activity_date": 1422240764, "last_edit_date": 1422240764, "creation_date": 1421255470, "answer_id": 27948607, "question_id": 27947767, "link": "https://stackoverflow.com/questions/27947767/cmake-managing-projects-syncing-updates/27948607#27948607", "title": "CMake ~ Managing projects | Syncing updates", "body": "<p>The generated project files are build artifacts, just like object files. They aren't portable to other systems, and should never be manually modified or checked into a version control system.  Instead, check in the <code>CMakeLists.txt</code> file.  Note that these generated project files refer directly to the source files, and can be used not only to build, but also to edit your source files.</p>\n\n<p>Changes to the project are made directly to <code>CMakeLists.txt</code> (for example adding a new file, or linking to a new library).  If changes are needed to support a certain development environment, you make those carefully, and test to be sure you haven't broken the build on someone else's environment.  For example, <code>IF(WIN32)</code> or <code>IF(UNIX)</code> allows basic conditionals on system type.  Many more are possible based on exact build tool, system architecture, presence or absence of libraries or other files, etc.</p>\n\n<p>It is highly recommended to build \"out-of-source\", so that build artifacts  (including generated project files) do not touch the source tree at all.  This keeps your source control software clean, and allows multiple builds for multiple compilers out of the same source.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user896326"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "accepted_answer_id": 27948607, "answer_count": 1, "score": 1, "last_activity_date": 1422240764, "creation_date": 1421252864, "question_id": 27947767, "link": "https://stackoverflow.com/questions/27947767/cmake-managing-projects-syncing-updates", "title": "CMake ~ Managing projects | Syncing updates", "body": "<p>I have been taking a look at CMake for a while and I really like the idea of having code without cluttering projectfiles of several IDE's. There's just one thing I fail to understand:</p>\n\n<p>You have your project with CMake files and each developing person generates his own project from it for his/her favourite IDE. But how do you nicely merge those things back into the general (CMake) project folder again? Or do you need to manually sync the changed files everytime again, by copying them in the general project folder again?</p>\n\n<p>I hope you guys can help give me a solution to this problem!</p>\n"}, {"tags": ["c++", "sorting"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1421251998, "post_id": 27947460, "comment_id": 44289807, "body": "Posting all of your code was unnecessary. You could simply ask how to save an array of <code>int</code> to file, and show what you&#39;ve tried so far."}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1421252030, "post_id": 27947460, "comment_id": 44289830, "body": "That indentation... please fix it"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1421252156, "post_id": 27947460, "comment_id": 44289909, "body": "A stream is a stream is a stream. All text streams work just the same, no matter if it&#39;s <code>std::cout</code> or some file stream."}], "answers": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": 0, "last_activity_date": 1421252079, "creation_date": 1421252079, "answer_id": 27947520, "question_id": 27947460, "link": "https://stackoverflow.com/questions/27947460/save-sorted-elements-in-text-file-c/27947520#27947520", "title": "save sorted elements in text file c++", "body": "<p>Instead of <code>cout</code>, use a <code>filestream</code> that <a href=\"http://www.cplusplus.com/reference/fstream/ofstream/ofstream/\" rel=\"nofollow\">writes to a file</a>.</p>\n"}, {"owner": {"reputation": 4425, "user_id": 2077651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/16036f8a383cc2cf4cde596b7f9f3a42?s=128&d=identicon&r=PG", "display_name": "Ganesh Kamath - &#39;Code Frenzy&#39;", "link": "https://stackoverflow.com/users/2077651/ganesh-kamath-code-frenzy"}, "is_accepted": false, "score": 0, "last_activity_date": 1421252981, "creation_date": 1421252981, "answer_id": 27947797, "question_id": 27947460, "link": "https://stackoverflow.com/questions/27947460/save-sorted-elements-in-text-file-c/27947797#27947797", "title": "save sorted elements in text file c++", "body": "<p>Here is the complete code:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nint compare(int, int);\nvoid sort(int[], const int);\nint compare(int x, int y){\n    return(x &gt; y);\n}\nvoid swap(int *x, int *y){\n    int temp;\n    temp = *x;\n    *x = *y;\n    *y = temp;\n}\nvoid display(int array[], int n){\n    for (int i = 0; i&lt;n; i++) {\n        cout &lt;&lt; array[i] &lt;&lt; \" \";\n    }\n    cout &lt;&lt; endl;\n}\nvoid writeToFile(int array[], int n){\n    ofstream myfile;\n    myfile.open(\"example.txt\");\n    for (int i = 0; i&lt;n; i++) {\n        myfile &lt;&lt; array[i];\n        if (i != n - 1){\n            myfile &lt;&lt; \", \";\n        }\n    }\n    myfile.close();\n}\nvoid sort(int table[], const int n) {\n    for (int i = 0; i &lt; n; i++){\n        for (int j = 0; j &lt; n - 1; j++) {\n            if (compare(table[j], table[j + 1]))\n                swap(&amp;table[j], &amp;table[j + 1]);\n        }\n    }\n}\nint main(){\n    int quantity;\n    int* tab;\n    ofstream outfile;\n    cout &lt;&lt; \"Enter number of element: \";\n    cin &gt;&gt; quantity;\n    tab = new int[quantity];\n    cout &lt;&lt; \"Element:\\n\\n\" &lt;&lt; endl;\n    for (int i = 0; i &lt; quantity; i++){\n        int x = i;\n        cout &lt;&lt; \"#\" &lt;&lt; ++x &lt;&lt; \":\";\n        cin &gt;&gt; tab[i];\n    }\n    sort(tab, quantity);\n    cout &lt;&lt; \"The Sorted Elements are: \";\n\n    display(tab, quantity);\n    writeToFile(tab, quantity);\n    cout &lt;&lt; endl;\n    getchar();\n    getchar();\n    //system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>I have defined function to write to file:</p>\n\n<pre><code>void writeToFile(int array[], int n){\n    ofstream myfile;\n    myfile.open(\"example.txt\");\n    for (int i = 0; i&lt;n; i++) {\n        myfile &lt;&lt; array[i];\n        if (i != n - 1){\n            myfile &lt;&lt; \", \";\n        }\n    }\n    myfile.close();\n}\n</code></pre>\n\n<p>This function taken in the array and array size, and then separates successive elements with a <code>,</code> if the element is not the last element.</p>\n\n<p>In <code>main()</code>, i have called it just like your <code>display()</code> function like so:</p>\n\n<pre><code>writeToFile(tab, quantity);\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4070747, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0qNPjIlGwRE/AAAAAAAAAAI/AAAAAAAAABs/yKfUvTJqI98/photo.jpg?sz=128", "display_name": "maine shar", "link": "https://stackoverflow.com/users/4070747/maine-shar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 905, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1421253806, "creation_date": 1421251906, "last_edit_date": 1421253806, "question_id": 27947460, "link": "https://stackoverflow.com/questions/27947460/save-sorted-elements-in-text-file-c", "title": "save sorted elements in text file c++", "body": "<p>I have <strong>bubble sort</strong> program that sort array in <strong>ascending</strong>. </p>\n\n<p>How can I save in TEXT FILE the sorted elements, and put commas (,) every other number ex.(-1, 0, 1, 2, 3,4) ?</p>\n\n<p>And inside the text file is the sorted elements. (-1, 0, 1, 2, 3, 4)</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\nusing namespace std;\n\nint compare (int, int);\nvoid sort(int[], const int);\nint compare(int x, int y){\n    return(x &gt; y);\n}\nvoid swap(int *x, int *y){\n    int temp;\n    temp = *x;\n    *x = *y;\n    *y = temp;\n}\nvoid display(int array[], int n){\n    for (int i = 0; i&lt;n; i++) {\n        cout &lt;&lt; array[i]&lt;&lt;\" \";\n    }\n    cout&lt;&lt;endl;\n}\nvoid sort(int table[], const int n) {\n    for(int i = 0; i &lt; n; i++){\n        for(int j = 0; j &lt; n-1; j++) {\n            if(compare(table[j],table[j+1]))\n                swap(&amp;table[j],&amp;table[j+1]);\n        }\n    }\n}\nint main(){\n    int quantity;\n    int* tab;\n    ofstream outfile;\n    cout&lt;&lt;\"Enter number of element: \";\n    cin&gt;&gt;quantity;\n    tab = new int [quantity];\n    cout&lt;&lt;\"Element:\\n\\n\"&lt;&lt;endl;\n    for(int i=0; i &lt; quantity; i++){\n        int x = i;\n        cout&lt;&lt;\"#\"&lt;&lt;++x&lt;&lt;\":\";\n        cin&gt;&gt;tab[i];\n    }\n    sort(tab, quantity);\n    cout&lt;&lt;\"The Sorted Elements are: \";\n\n    display(tab, quantity);\n    cout&lt;&lt;endl;\n    system (\"pause\");\n    return 0;\n}          \n</code></pre>\n"}]