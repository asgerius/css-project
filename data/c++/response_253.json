[{"tags": ["c++", "class", "for-loop", "vector", "dot-product"], "comments": [{"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 3, "creation_date": 1573689504, "post_id": 58847373, "comment_id": 103968367, "body": "The return value of <code>list::output()</code> has not type <code>vector</code>. You cannot pass it to a function that expects one."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1573689572, "post_id": 58847373, "comment_id": 103968379, "body": "Unrelated: When you get that far you may find some extra efficiency and versatility in in <code>double dotProduct(const vector &lt;double&gt; &amp; a, const vector &lt;double&gt; &amp; b);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1573700139, "post_id": 58847711, "comment_id": 103970674, "body": "My preferences would be to make it a free function so that it followed <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">the same paradigm as the non-assigning arithmetic operators</a>."}], "tags": [], "owner": {"reputation": 169, "user_id": 287430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/eb0d16f3062b2c63a5fac92e83159025?s=128&d=identicon&r=PG", "display_name": "Mike Eager", "link": "https://stackoverflow.com/users/287430/mike-eager"}, "is_accepted": false, "score": 0, "last_activity_date": 1573691805, "creation_date": 1573691805, "answer_id": 58847711, "question_id": 58847373, "link": "https://stackoverflow.com/questions/58847373/c-how-to-call-a-member-function-that-uses-vectors/58847711#58847711", "title": "C++ How to call a member function that uses vectors", "body": "<p><em>dotProduct</em>() really does not look like a member function.  It doesn't access any of the instance data.  If you want, you can define it as a regular function which takes two vectors and computes the dot product.</p>\n\n<p>If you want to call this function with the vectors from the two lists L1 and L2 (why do you call the class \"list\", when it isn't a list?), you will either need to expose the actual vector \"v\" by making it public, or create a \"getter\" member function which returns it.  The dotProduct() function doesn't return a class instance or a vector, it returns a scalar value.</p>\n\n<p>An alternate would be to define a class member function which operates on one class instance and takes a second class instance as an argument.  The signature would be something like</p>\n\n<pre><code>list::dotProduct (list arg);\n</code></pre>\n\n<p>This would compute the dot product of the \"this\" instance and the argument arg.</p>\n\n<p>It would be called</p>\n\n<pre><code>cout &lt;&lt; L1.dotProduct (L2);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12369515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf6b7fa1918e2add2543107c483e895c?s=128&d=identicon&r=PG&f=1", "display_name": "Dogm", "link": "https://stackoverflow.com/users/12369515/dogm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1573691805, "creation_date": 1573689133, "question_id": 58847373, "link": "https://stackoverflow.com/questions/58847373/c-how-to-call-a-member-function-that-uses-vectors", "title": "C++ How to call a member function that uses vectors", "body": "<p>I'm currently trying to display the dot product by calling a dotProduct function however I am confused as to how to do this. I've tried calling the function but commented it out since this did not work. What would be the proper way to display the dot product? Any help would be much appreciated!</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;ctime&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\nclass list\n{\n    public:\n        list();\n        void input(int s);\n        void output();\n        double dotProduct(vector &lt;double&gt; a, vector &lt;double&gt; b);\n    private:\n        vector &lt;int&gt; v;\n};\nlist :: list() : v()\n{\n}\nvoid list :: input(int s)\n{\n    int t;\n    for(int i = 1; i &lt;= s; i++)\n    {\n        t = rand() % 10;\n        v.push_back(t);\n    }\n}\nvoid list :: output()\n{\n    for(unsigned int i = 0; i &lt; v.size(); i++)\n        cout &lt;&lt; v[i] &lt;&lt; \" \";\n    cout &lt;&lt; endl;\n}\ndouble list :: dotProduct(vector &lt;double&gt; a, vector &lt;double&gt; b)\n{\n    double product = 0;\n    if(a.size() != b.size())\n    {\n        cout &lt;&lt; \"Vectors are not the same size\\n\";\n    }\n    for (unsigned int i = 0; i &lt; a.size(); i++)\n    {\n        product = product + a[i] * b[i];\n    }\n\n    return product;\n\n}\nint main()\n{\n    list L1, L2,ob1;\n    int s;\n    cout &lt;&lt; \"Enter the size of list 1: \\n\";\n    cin &gt;&gt; s;\n    L1.input(s);\n    cout &lt;&lt; \"\\nEnter the size of list 2: \\n\";\n    cin &gt;&gt; s;\n    L2.input(s);\n    cout &lt;&lt; \"\\nVector 1: \";\n    L1.output();\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Vector 2: \";\n    L2.output();\n    cout &lt;&lt; endl;\n\n    cout &lt;&lt; \"The dot product is: \";\n    //ob1.dotProduct(L1.output(),L2.output());\n    cout &lt;&lt; endl;   \n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "new-operator"], "comments": [{"owner": {"reputation": 359, "user_id": 8501464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aFpwl.jpg?s=128&g=1", "display_name": "Yi\u011fit Aras Tunal\u0131", "link": "https://stackoverflow.com/users/8501464/yi%c4%9fit-aras-tunal%c4%b1"}, "edited": false, "score": 0, "creation_date": 1573686983, "post_id": 58847010, "comment_id": 103967732, "body": "Follow these links <a href=\"https://stackoverflow.com/questions/367633/what-are-all-the-common-undefined-behaviours-that-a-c-programmer-should-know-a\">(1) Stack overflow answer</a> and <a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">(2) cppreference.com</a>. I hope this helps! Cheers"}], "answers": [{"comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1573688187, "post_id": 58847104, "comment_id": 103968024, "body": "@Chipster I did that, but then realized I was completely wrong. I fixed that, mentioned the resource used and added quotes"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1573690282, "post_id": 58847104, "comment_id": 103968536, "body": "Awesome. Thanks. Much better. +1."}], "tags": [], "owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "is_accepted": true, "score": 4, "last_activity_date": 1573688218, "last_edit_date": 1573688218, "creation_date": 1573687310, "answer_id": 58847104, "question_id": 58847010, "link": "https://stackoverflow.com/questions/58847010/calling-the-new-expression-in-an-overload-of-operator-new/58847104#58847104", "title": "Calling the new expression in an overload of operator new", "body": "<p><strong>6.7.5.4.1</strong><sup>1</sup> specifically talks about the requirements on allocation functions. It lays out all the requirements that such a function must meet, and doesn't explicitly forbid calling the global allocation function.</p>\n\n<p>It does say this:</p>\n\n<blockquote>\n  <p>If it is successful, it returns the address of the start of a block of storage whose length in bytes is at least as large as the requested size.</p>\n</blockquote>\n\n<p>Your function always returns a block of size equal to <code>sizeof(int)</code>.</p>\n\n<p><strong>6.7.5.4</strong> Also says this</p>\n\n<blockquote>\n  <p>If the behavior of an allocation or deallocation function does not satisfy the semantic constraints specified in [basic.stc.dynamic.allocation] and [basic.stc.dynamic.deallocation], the behavior is undefined.</p>\n</blockquote>\n\n<p>The previous version of this answer missed that point. Your function doesn't return a memory block that is equal in size to the requested size (which is ignored), so the behavior is undefined.</p>\n\n<hr>\n\n<p><sup>1</sup> On <a href=\"https://eel.is/c++draft/basic.stc.dynamic#allocation\" rel=\"nofollow noreferrer\">this</a> site.</p>\n"}], "owner": {"reputation": 183, "user_id": 6395007, "user_type": "registered", "profile_image": "https://graph.facebook.com/1023008521099676/picture?type=large", "display_name": "Ionut Alexandru", "link": "https://stackoverflow.com/users/6395007/ionut-alexandru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 58847104, "answer_count": 1, "score": 2, "last_activity_date": 1573688218, "creation_date": 1573686607, "question_id": 58847010, "link": "https://stackoverflow.com/questions/58847010/calling-the-new-expression-in-an-overload-of-operator-new", "title": "Calling the new expression in an overload of operator new", "body": "<p>Is the following code undefined behavior according to the C++ standard? Please share C++ standard references.</p>\n\n<pre><code>void* operator new(std::size_t sz)\n{\n    return ::new int(5);\n}\n</code></pre>\n"}, {"tags": ["c++", "for-loop", "variables"], "comments": [{"owner": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "edited": false, "score": 2, "creation_date": 1573687226, "post_id": 58846983, "comment_id": 103967788, "body": "If you started from 1, you&#39;d include each pair twice and &quot;pairs&quot; of each number with itself."}, {"owner": {"reputation": 1890, "user_id": 8093451, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PnpHo.png?s=128&g=1", "display_name": "Hemant", "link": "https://stackoverflow.com/users/8093451/hemant"}, "edited": false, "score": 0, "creation_date": 1573715313, "post_id": 58846983, "comment_id": 103974884, "body": "<code>int ans = 0; for(int i=0;i&lt;3;i++){ans += v[i]*v[(i+1)%3];}</code>"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1573725626, "post_id": 58846983, "comment_id": 103980004, "body": "Use the debugger, step through the program, and you&#39;ll see what it&#39;s doing."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "edited": false, "score": 0, "creation_date": 1573725655, "post_id": 58846983, "comment_id": 103980020, "body": "@AviBerger Please, consider expanding your comment (pointing out the difference between <i>all</i> the possible pairs and <i>distinct</i> pairs) into an answer."}], "answers": [{"tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 1, "last_activity_date": 1573726444, "creation_date": 1573726444, "answer_id": 58854264, "question_id": 58846983, "link": "https://stackoverflow.com/questions/58846983/starting-from-j-i-1-vs-j-1-in-a-nested-for-loop/58854264#58854264", "title": "Starting from j = i +1 vs j = 1 in a nested for loop", "body": "<p>There's only 3 values, so we can unroll the loops in a short space</p>\n\n<p>Starting at <code>j = 1</code></p>\n\n<pre><code>result += vec.at(0) * vec.at(1); // 2\nresult += vec.at(0) * vec.at(2); // 3\nresult += vec.at(1) * vec.at(1); // 4 Oops: pairing 2 with itself\nresult += vec.at(1) * vec.at(2); // 6\nresult += vec.at(2) * vec.at(1); // 6 Oops: Seen already\nresult += vec.at(2) * vec.at(2); // 9 Oops: pairing 3 with itself\n</code></pre>\n\n<p>Starting at <code>j = i + 1</code></p>\n\n<pre><code>result += vec.at(0) * vec.at(1); // 2\nresult += vec.at(0) * vec.at(2); // 3\nresult += vec.at(1) * vec.at(2); // 6\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 12369526, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAUOpAvMsjNpPvOryuISR34Ka8PrcL0tSYz3PmxPg=k-s128", "display_name": "Luisa Jimenez", "link": "https://stackoverflow.com/users/12369526/luisa-jimenez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 58854264, "answer_count": 1, "score": 0, "last_activity_date": 1573726444, "creation_date": 1573686414, "last_edit_date": 1573725085, "question_id": 58846983, "link": "https://stackoverflow.com/questions/58846983/starting-from-j-i-1-vs-j-1-in-a-nested-for-loop", "title": "Starting from j = i +1 vs j = 1 in a nested for loop", "body": "<p>For the piece of code below, I am using a vector that contains the items {1, 2, 3} and I just want to get the sum of the product of the pairs, for example (1*2) + (1*3) + (2*3) which is 11.</p>\n\n<pre><code>for(unsigned i = {0}; i &lt; vec.size(); ++i) {\n    for(unsigned j = i + 1; j &lt; vec.size(); ++j) {\n    //              ^^^^^^^            \n        preresult = vec.at(i) * vec.at(j);\n        result += preresult;\n    }\n}\n</code></pre>\n\n<p>The problem is that, when I had in the inner loop <code>j</code> starting from 1, my answer was 30 and I got the right answer only when I changed to <code>j = i + 1</code>.</p>\n\n<p>Can someone explain to me why? Would not <code>j = 1</code> work just fine?</p>\n"}, {"tags": ["c++", "file", "pgm"], "comments": [{"owner": {"reputation": 33166, "user_id": 7509065, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Joseph Sible-Reinstate Monica", "link": "https://stackoverflow.com/users/7509065/joseph-sible-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1573687793, "post_id": 58846965, "comment_id": 103967944, "body": "You need to post a minimal, reproducible example if you want to be helped. In this case, that means a full program (with <code>#include</code> and <code>int main</code>, etc.) rather than a snippet, and a copy of the PGM file that you&#39;re running it on."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 1, "creation_date": 1573687907, "post_id": 58846965, "comment_id": 103967971, "body": "Dont use large stack based arrays."}, {"owner": {"reputation": 39, "user_id": 5394438, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LkR0B9FCiWQ/AAAAAAAAAAI/AAAAAAAAABU/WbCjjIGxJbA/photo.jpg?sz=128", "display_name": "Skyler Gunn", "link": "https://stackoverflow.com/users/5394438/skyler-gunn"}, "edited": false, "score": 0, "creation_date": 1573759906, "post_id": 58846965, "comment_id": 103999500, "body": "pgm file: <a href=\"https://www.dropbox.com/s/jtdd40asl4ejy8f/lena.pgm?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/jtdd40asl4ejy8f/lena.pgm?dl=0</a>"}], "owner": {"reputation": 39, "user_id": 5394438, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LkR0B9FCiWQ/AAAAAAAAAAI/AAAAAAAAABU/WbCjjIGxJbA/photo.jpg?sz=128", "display_name": "Skyler Gunn", "link": "https://stackoverflow.com/users/5394438/skyler-gunn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573687861, "creation_date": 1573686234, "last_edit_date": 1573687861, "question_id": 58846965, "link": "https://stackoverflow.com/questions/58846965/c-pgm-file-read-defaults-to-38-for-every-character-in-the-middle-of-the-read", "title": "C++ pgm file read defaults to 38 for every character in the middle of the read?", "body": "<p>I'm trying to read in a 512x512 pgm file and store it in a 2d array. It prints out values between 0-255 until the 35835th unsigned character, and from then on it only prints out \"38\" for the other characters. Weirdly enough, when I tried to do a separate pgm file with just the first few lines of characters (pixels), compared the point where it started printing out only 38 to the character count, the code didn't start only printing out only 38 until it got to double what the actual character could was. The snippet is here:</p>\n\n<pre><code>int arr[512][512]; //temp hard coded in\nif (data.is_open()) {\n    //test to see what gets printed out\n    //first 2 to get out the version and comment\n    getline(data, line);\n    getline(data, line); //get the size of the pgm\n    ss &lt;&lt; data.rdbuf();\n    ss &gt;&gt; numcols &gt;&gt; numrows;\n    cout &lt;&lt; numcols &lt;&lt; \" cols \" &lt;&lt; numrows &lt;&lt; \" rows \\n\";\n    getline(data, line);\n    //get rid of max\n    //now get the actual pixels\n    for (row = 0; row &lt; numrows; row++) {\n        for (col = 0; col &lt; numcols; col++) {\n            unsigned char pix;\n            ss &gt;&gt; pix;\n            arr[row][col] = pix;\n            cout &lt;&lt; arr[row][col] &lt;&lt; \" row \" &lt;&lt; row &lt;&lt; \" col \" &lt;&lt; col &lt;&lt; \"\\n\";\n        }\n    }\n\n    data.close();\n</code></pre>\n\n<p>I was able to view the pgm file on an online pgm viewer, so the pgm itself must be fine. That said, what am I doing wrong with the code?</p>\n"}, {"tags": ["c++", "gcc", "dll", "dllimport", "dllexport"], "comments": [{"owner": {"reputation": 155, "user_id": 5546839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f904a67e514333d1d8b594b083e5e9?s=128&d=identicon&r=PG&f=1", "display_name": "WilliamClements", "link": "https://stackoverflow.com/users/5546839/williamclements"}, "edited": false, "score": 1, "creation_date": 1573700923, "post_id": 58846822, "comment_id": 103970847, "body": "Consider history. Hasn&#39;t VC++ been doing DLLs longer? Microsoft successfully using original methodology. Compatibility and only marginal benefit to go to the GCC model. That&#39;s a guess."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1573709124, "post_id": 58846822, "comment_id": 103972766, "body": "<a href=\"https://gcc.gnu.org/wiki/Visibility\" rel=\"nofollow noreferrer\">gcc.gnu.org/wiki/Visibility</a>"}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1573925736, "post_id": 58846822, "comment_id": 104051871, "body": "@JesperJuhl That explains how it should be done using GCC in comparison with MSVC, but does not explain why GCC is able to figure out itself the difference between export and import."}], "owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573685367, "creation_date": 1573685367, "question_id": 58846822, "link": "https://stackoverflow.com/questions/58846822/why-does-msvc-visual-c-need-separate-dllimport-and-dllexport-attributes-and", "title": "Why does MSVC (Visual C++) need separate dllimport and dllexport attributes and gcc not?", "body": "<p>I know why and when <code>__declspec(dllimport)</code> and <code>__declspec(dllexport)</code> are used in Visual C++.</p>\n\n<p>I know the GCC alternative to both <code>__declspec(dllimport)</code> and <code>__declspec(dllexport)</code> is <code>__attribute__((visibility(\"default\")))</code>.</p>\n\n<p>I'm just wondering why Visual C++ does need both commands, while GCC is able to figure out itself whether it should import or export the symbol?</p>\n\n<p><em>Of course the easy answer is: \"It's a design choice of GNU/Microsoft\", maybe it's the only answer. Thank you for your input!</em></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1536, "user_id": 631266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a6ba5d18865bebe8b087f8e0209b892?s=128&d=identicon&r=PG", "display_name": "Avi Berger", "link": "https://stackoverflow.com/users/631266/avi-berger"}, "edited": false, "score": 3, "creation_date": 1573686283, "post_id": 58846786, "comment_id": 103967569, "body": "If searchArr() does not find a match what does it return? What is the int value that printOnePerm() should return - since your code says it has to return one ?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": true, "score": 0, "last_activity_date": 1573686371, "creation_date": 1573686371, "answer_id": 58846976, "question_id": 58846786, "link": "https://stackoverflow.com/questions/58846786/c-getting-a-control-may-reach-end-of-a-non-void-function-on-a-johnson-trotter/58846976#58846976", "title": "C++ Getting a &quot;Control may reach end of a non-void function on a Johnson-Trotter code", "body": "<p>The first one:</p>\n\n<pre><code>int searchArr(int k[], int n, int mobile)\n   {\n       for(int i = 0; i &lt; n; i++)\n       {\n         if (k[i] == mobile)\n         {\n            return i + 1;\n         }\n       }\n   }\n</code></pre>\n\n<p>will not return anything if for some reason nothing in your array matches. In that case, you need to return a default or error value:</p>\n\n<pre><code>int searchArr(int k[], int n, int mobile)\n   {\n       for(int i = 0; i &lt; n; i++)\n       {\n         if (k[i] == mobile)\n         {\n            return i + 1;\n         }\n       }\n   return -1; // not found\n   }\n</code></pre>\n\n<p>The second one doesn't seem to want to return anything. In C++, the way to do this is with a <code>void</code>, not an <code>int</code> (That was okay in C. <a href=\"https://stackoverflow.com/questions/1610030/why-does-flowing-off-the-end-of-a-non-void-function-without-returning-a-value-no\">C++ not so much</a>):</p>\n\n<pre><code>// assuming we don't want to return anything\nvoid printOnePerm(int k[], bool dir[], int n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 169, "user_id": 287430, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/eb0d16f3062b2c63a5fac92e83159025?s=128&d=identicon&r=PG", "display_name": "Mike Eager", "link": "https://stackoverflow.com/users/287430/mike-eager"}, "is_accepted": false, "score": 1, "last_activity_date": 1573689906, "creation_date": 1573689906, "answer_id": 58847465, "question_id": 58846786, "link": "https://stackoverflow.com/questions/58846786/c-getting-a-control-may-reach-end-of-a-non-void-function-on-a-johnson-trotter/58847465#58847465", "title": "C++ Getting a &quot;Control may reach end of a non-void function on a Johnson-Trotter code", "body": "<p>For the first function, searchArr(), one question is what do you expect it to return if the value is not found.  Since the return values are in the range [1,n], I'm guessing that zero means not found.  </p>\n\n<p>I prefer to design functions which have a single return at the end, whenever possible.  A default fail value can be set at the start of the function.  I would exit the loop when the value is found, or fall through with the default value set.</p>\n\n<p>Here is what I would write:</p>\n\n<pre><code>int searchArr(int k[], int n, int mobile)\n   {\n       int ret = 0;  /* not found value */\n\n       for(int i = 0; i &lt; n; i++)\n       {\n         if (k[i] == mobile)\n         {\n            ret = i + 1;\n            break;\n         }\n       }\n\n       return ret;\n   }\n</code></pre>\n\n<p>Alternately, and perhaps a bit more obscurely, if the value is not found in the array, then <em>i</em> will equal <em>n</em> when the for loop completes.  This would be a possible function:</p>\n\n<pre><code>int searchArr(int k[], int n, int mobile)\n   {\n       for(int i = 0; i &lt; n; i++)\n       {\n         if (k[i] == mobile)\n         {\n            break;\n         }\n       }\n\n       if (i &lt; n)\n          return i + 1;\n       else\n          return 0;\n   }\n</code></pre>\n\n<p>The for loop can be shrunk to </p>\n\n<pre><code>for(int i = 0; i &lt; n &amp;&amp; k[i] != mobile; i++) ;\n</code></pre>\n\n<p>And the return can be shrunk to </p>\n\n<pre><code>return (i &lt; n) ? i + 1 : 0;\n</code></pre>\n\n<p>Although I generally discourage using the ?: operator. </p>\n\n<p>As mentioned above, the second function doesn't return any value and should be declared \"void\".</p>\n"}], "owner": {"reputation": 3, "user_id": 12369536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a9dfeac3ecc7bd03b82c7fa3e8a653a?s=128&d=identicon&r=PG&f=1", "display_name": "Xander", "link": "https://stackoverflow.com/users/12369536/xander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 58846976, "answer_count": 2, "score": -1, "last_activity_date": 1573689906, "creation_date": 1573685149, "question_id": 58846786, "link": "https://stackoverflow.com/questions/58846786/c-getting-a-control-may-reach-end-of-a-non-void-function-on-a-johnson-trotter", "title": "C++ Getting a &quot;Control may reach end of a non-void function on a Johnson-Trotter code", "body": "<p>What can I do to silence this warning? Do I need to add another return statement somewhere or do I need to change something within the functions? </p>\n\n<p><em>Also could someone help me add arrows into the Johnson-Trotter algorithm. It would be nice to have them to show the direction but I am very confused on how to do it; though this isn't the main concern right now I just want the program to run.</em> Thank you in advance. </p>\n\n<p>These are the two functions with the warning:</p>\n\n<pre><code>\n   int searchArr(int k[], int n, int mobile)\n   {\n       for(int i = 0; i &lt; n; i++)\n       {\n         if (k[i] == mobile)\n         {\n            return i + 1;\n         }\n       }\n   }\n\n\nint printOnePerm(int k[], bool dir[], int n)\n{\n    int mobile = getMobile(k, dir, n);\n\n    int pos = searchArr(k, n, mobile);\n\n    if (dir[k[pos - 1] - 1] == RIGHT_TO_LEFT)\n    {\n        swap(k[pos - 1], k[pos -2]);\n    }\n    else if (dir[k[pos - 1] - 1] == LEFT_TO_RIGHT)\n    {\n        swap(k[pos], k[pos -1]);\n    }\n\n    for(int i = 0; i &lt; n; i++)\n    {\n        if (k[i] &gt; mobile)\n        {\n            if (dir[k[i] - 1] == LEFT_TO_RIGHT)\n            {\n                dir[k[i] - 1] = RIGHT_TO_LEFT;\n            }\n            else if(dir[k[i] - 1] == RIGHT_TO_LEFT)\n            {\n                dir[k[i] - 1] = LEFT_TO_RIGHT;\n            }\n        }\n    }\n\n    for(int i = 0; i &lt; n; i++)\n    {\n        cout &lt;&lt; k[i];\n    }\n\n    cout &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1573685073, "post_id": 58846756, "comment_id": 103967188, "body": "What have you tried so far?"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 5, "creation_date": 1573685084, "post_id": 58846756, "comment_id": 103967194, "body": "That&#39;s not a hint. That&#39;s the answer."}, {"owner": {"reputation": 19, "user_id": 11068848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c5e40b48543585d27c3b65b5b5d4f2d?s=128&d=identicon&r=PG&f=1", "display_name": "WesB", "link": "https://stackoverflow.com/users/11068848/wesb"}, "edited": false, "score": 0, "creation_date": 1573685114, "post_id": 58846756, "comment_id": 103967210, "body": "I&#39;ve tried what I was given but keep getting Segmentation Error"}, {"owner": {"reputation": 8797, "user_id": 12270289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f90bXHFopV0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfStPF8S5OWF3hBzDu-oJeTx3xOfQ/photo.jpg?sz=128", "display_name": "Klaycon", "link": "https://stackoverflow.com/users/12270289/klaycon"}, "edited": false, "score": 0, "creation_date": 1573685164, "post_id": 58846756, "comment_id": 103967225, "body": "Please provide the exact code that you tried, or else we can&#39;t tell what you may have done wrong in implementing it."}, {"owner": {"reputation": 19, "user_id": 11068848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c5e40b48543585d27c3b65b5b5d4f2d?s=128&d=identicon&r=PG&f=1", "display_name": "WesB", "link": "https://stackoverflow.com/users/11068848/wesb"}, "edited": false, "score": 0, "creation_date": 1573685399, "post_id": 58846756, "comment_id": 103967307, "body": "Ok, I&#39;ve added my code via PasteBin"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1573685518, "post_id": 58846756, "comment_id": 103967344, "body": "@WesB You are not doing step #2 - convert the input string to lowercase before you then iterate the characters in it"}, {"owner": {"reputation": 19, "user_id": 11068848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c5e40b48543585d27c3b65b5b5d4f2d?s=128&d=identicon&r=PG&f=1", "display_name": "WesB", "link": "https://stackoverflow.com/users/11068848/wesb"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1573685649, "post_id": 58846756, "comment_id": 103967382, "body": "@RemyLebeau the parameter passed is already lowercase"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 1, "creation_date": 1573685780, "post_id": 58846756, "comment_id": 103967417, "body": "@WesB  The hint implies that it won&#39;t always be lower case which is why step two exists.  So except for that the code looks like it does what the hint says.  What doesn&#39;t work about it?"}, {"owner": {"reputation": 929, "user_id": 4253931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b751517b9a663cda1d8ab07027bb59a?s=128&d=identicon&r=PG&f=1", "display_name": "eike", "link": "https://stackoverflow.com/users/4253931/eike"}, "edited": false, "score": 0, "creation_date": 1573686247, "post_id": 58846756, "comment_id": 103967556, "body": "SO doesn&#39;t exist to solve your homework. What have you already tried to solve this problem? Post your code"}, {"owner": {"reputation": 8797, "user_id": 12270289, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f90bXHFopV0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfStPF8S5OWF3hBzDu-oJeTx3xOfQ/photo.jpg?sz=128", "display_name": "Klaycon", "link": "https://stackoverflow.com/users/12270289/klaycon"}, "edited": false, "score": 0, "creation_date": 1573686767, "post_id": 58846756, "comment_id": 103967669, "body": "Please use the debugger or additional console output to determine <b>what input</b> is causing your segmentation error. Also helpful would be <b>what line</b> of your code is causing it. Your code does not cause segmentation error when I try running it with basic lowercase input."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1573694272, "post_id": 58846756, "comment_id": 103969397, "body": "Life would make more sense if your replaced <code>97</code> with <code>&#39;a&#39;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1573686190, "creation_date": 1573686190, "answer_id": 58846962, "question_id": 58846756, "link": "https://stackoverflow.com/questions/58846756/finding-the-most-common-letter-in-a-string/58846962#58846962", "title": "Finding the most common letter in a string", "body": "<p>You are not doing step #2:</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><strong>convert the input string to all lowercase</strong> (suppose the string is encodedString)</li>\n  </ol>\n</blockquote>\n\n<p>This is important so that both <code>'a'</code> and <code>'A'</code> can be mapped to array index 0, <code>'b'</code> and <code>'B'</code> can both be mapped to index 1, and so on.</p>\n\n<p>So you can either:</p>\n\n<ul>\n<li>transform the input string to all lowercase before you loop through it:</li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;cctype&gt;\n\nstd::string str_tolower(std::string s) {\n    std::transform(s.begin(), s.end(), s.begin(), \n        [](unsigned char c){ return std::tolower(c); }\n    );\n    return s;\n}\n\nint computeShift(std::string fileContent)\n{\n    int letterCount[26] = { 0 };\n    std::string fileContentLowerCase = str_tolower(fileContent);\n\n    for (int i = 0; i &lt; fileContentLowerCase.length(); ++i)\n    {\n        if (std::isalpha(fileContentLowerCase[i]))\n        {\n            letterCount[fileContentLowerCase[i]-'a']++;\n        }\n    }\n\n    return 3; //Temporary\n}\n</code></pre>\n\n<ul>\n<li>leave the input string as-is and use <code>isupper()</code> and <code>islower()</code> instead:</li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;cctype&gt;\n\nint computeShift(std::string fileContent)\n{\n    int letterCount[26] = { 0 };\n\n    for (int i = 0; i &lt; fileContent.length(); ++i)\n    {\n        if (std::isalpha(fileContent[i]))\n        {\n            int index = std::isupper(fileContent[i])\n                ? (fileContent[i]-'A')\n                : (fileContent[i]-'a');\n            letterCount[index]++;\n        }\n    }\n\n    return 3; //Temporary\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11068848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c5e40b48543585d27c3b65b5b5d4f2d?s=128&d=identicon&r=PG&f=1", "display_name": "WesB", "link": "https://stackoverflow.com/users/11068848/wesb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": -5, "last_activity_date": 1573686190, "creation_date": 1573684975, "last_edit_date": 1573685484, "question_id": 58846756, "link": "https://stackoverflow.com/questions/58846756/finding-the-most-common-letter-in-a-string", "title": "Finding the most common letter in a string", "body": "<p>I'm trying to find the most common letter in a string.</p>\n\n<p>Here is the hint I was given but cannot figure it out</p>\n\n<blockquote>\n  <ol>\n  <li>initialize an integer array of size 26 to all zeros (suppose this array is letterCount)</li>\n  <li>convert the input string to all lowercase (suppose the string is encodedString)</li>\n  <li>using a for loop step through the string character by character. Using isalpha check to see if the character is an alphabetic character. If it is, then increment your array as follows: <code>letterCount[encodedstring[x]-97]++</code></li>\n  </ol>\n</blockquote>\n\n<p>EDIT: My Code</p>\n\n<pre><code>int computeShift(std::string fileContent)\n{\n    int letterCount[26] = { 0 };\n    for (int i = 0; i &lt; fileContent.length(); i++)\n    {\n        if (isalpha(fileContent[i]))\n        {\n            letterCount[fileContent[i]-97]++;\n        }\n    }\n    return 3; //Temporary\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "arduino", "serial-port", "qtserialport"], "comments": [{"owner": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "edited": false, "score": 0, "creation_date": 1573698670, "post_id": 58846671, "comment_id": 103970353, "body": "There&#39;s not enough code here to diagnose the issue.On the surface the code you posted seems like it should work. The problem is likely elsewhere which we can&#39;t see. One obvious question is if the Arduino sees anything at all on its side after the first write. If not, then the port is probably closed for some reason. The correct <code>bytesWritten</code> just means the data was dumped into the system&#39;s serial port buffer, what happens to it after that is unknown."}, {"owner": {"reputation": 11, "user_id": 12123778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0feaad0800e8d8693b3256e8b23fac20?s=128&d=identicon&r=PG&f=1", "display_name": "giogan17", "link": "https://stackoverflow.com/users/12123778/giogan17"}, "reply_to_user": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "edited": false, "score": 0, "creation_date": 1573720997, "post_id": 58846671, "comment_id": 103977389, "body": "Thank you for your response. I followed your suggestion and updated the post with more code. I added a link to the project&#39;s GitHub repo for the interested. How can I check if the arduino sees anything after the first write? Cheers."}, {"owner": {"reputation": 11, "user_id": 12123778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0feaad0800e8d8693b3256e8b23fac20?s=128&d=identicon&r=PG&f=1", "display_name": "giogan17", "link": "https://stackoverflow.com/users/12123778/giogan17"}, "reply_to_user": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "edited": false, "score": 0, "creation_date": 1573738827, "post_id": 58846671, "comment_id": 103987532, "body": "I think I&#39;ve found a bug in Qt, I edited the post with explanation and useful links."}, {"owner": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "edited": false, "score": 0, "creation_date": 1573755522, "post_id": 58846671, "comment_id": 103997482, "body": "Good work finding the problem. It&#39;s unlikely this has anything to do with Qt and everything to do with the adapter in question (either the USB3-&gt;2 or the serial adapter between USB and Arduino, or the interaction of the two). USB defines a very clear standard for serial (RS-232 style) communications. How driver vendors implement that is up to them though. I&#39;ve definitely used some sub-standard adapters which have quirks at best and don&#39;t work at all at worst. Anything from FTDI (not copies) seems to be most reliable."}, {"owner": {"reputation": 11, "user_id": 12123778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0feaad0800e8d8693b3256e8b23fac20?s=128&d=identicon&r=PG&f=1", "display_name": "giogan17", "link": "https://stackoverflow.com/users/12123778/giogan17"}, "reply_to_user": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "edited": false, "score": 0, "creation_date": 1574095440, "post_id": 58846671, "comment_id": 104099844, "body": "Final update: Qt 5.13.1 has some problems with QSerialPort, installing Qt version 5.13.0 did the trick and everything now works."}], "owner": {"reputation": 11, "user_id": 12123778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0feaad0800e8d8693b3256e8b23fac20?s=128&d=identicon&r=PG&f=1", "display_name": "giogan17", "link": "https://stackoverflow.com/users/12123778/giogan17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573738732, "creation_date": 1573684467, "last_edit_date": 1573738732, "question_id": 58846671, "link": "https://stackoverflow.com/questions/58846671/qt-serial-port-with-arduino-write-function-works-only-first-time-its-called", "title": "Qt Serial Port with Arduino: write function works only first time its called", "body": "<p><br/>\nI'm fairly new to Qt and Arduino and at the moment I'm kind of lost. <br/>\nMy objective is to create an application in qt where you can set the various pins of the board to low or high. To do so I need to be able to frequently change the status of those pins.<br/>\nThe first step I took is the creation of a simple interface where, given a string that contains the pin number and the pin status to set (0 or 1), those two are set properly. \nTo test this function I used the led of the pin 13. <br/>\nIt seems kinda basic to me, but something doesn't work and I can't figure out what it is. <br/>\nThe program sets correctly the status of the led only the first time and afterwards stop working and starts doing nothing. The direction of the change of status of the pin (from 0->1 or from 1->0) is ininfluent in all of this.<br/>\nHere is part of the code:\n<br/>\n<em>mainwindow.h:</em></p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include \"serialportcontroller.h\"\n\nQT_BEGIN_NAMESPACE\nnamespace Ui { class MainWindow; }\nQT_END_NAMESPACE\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    MainWindow(QWidget *parent = nullptr);\n    ~MainWindow();\nprivate slots:\n    void on_pbn_ok_clicked();\n\n\nprivate:\n    Ui::MainWindow *ui;\n    SerialPortController mw_serial;\n\n\n};\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p><em>mainwindow.cpp:</em></p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include &lt;QDebug&gt;\n#include &lt;QSerialPort&gt;\n#include &lt;QSerialPortInfo&gt;\n\nMainWindow::MainWindow(QWidget *parent)\n    : QMainWindow(parent)\n    , ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\nvoid MainWindow::on_pbn_ok_clicked()\n{\nQString query = ui-&gt;lineEdit-&gt;text();\nui-&gt;lineEdit-&gt;clear();\nmw_serial.write( query.toLatin1() );\n}\n</code></pre>\n\n<p><em>serialportcontroller.h:</em></p>\n\n<pre><code>#ifndef SERIALPORTCONTROLLER_H\n#define SERIALPORTCONTROLLER_H\n#include &lt;QSerialPort&gt;\n#include &lt;QSerialPortInfo&gt;\n\nclass SerialPortController: public QObject\n{\npublic:\n    QSerialPort *serial;\n    QString str_portName;\n    QByteArray qba_data;\npublic:\n    SerialPortController();\n    ~SerialPortController();\n    void write( const QByteArray &amp;writeData);\n    void setPortName(QString str_port);\n    void openSerialPort();   \n};\n\n#endif // SERIALPORTCONTROLLER_H\n</code></pre>\n\n<p><em>serialportcontroller.cpp:</em></p>\n\n<pre><code>#include \"serialportcontroller.h\"\n#include &lt;QDebug&gt;\n#include &lt;QSerialPort&gt;\n#include &lt;QSerialPortInfo&gt;\n\nSerialPortController::SerialPortController()\n{\n    serial = new QSerialPort;\n    setPortName(\"COM7\");\n    openSerialPort();\n}\n\nSerialPortController::~SerialPortController()\n{\n    serial-&gt;close();\n}\n//------------------------------------------------------------------------------\nvoid SerialPortController::setPortName(QString str_port)\n{\n    if (str_port != \"\"){\n        str_portName = str_port;\n    }else{\n        qDebug()&lt;&lt;\"[!]Port name is invalid\";\n    }\n}\n//------------------------------------------------------------------------------\nvoid SerialPortController::openSerialPort()\n{\n    serial-&gt;setPortName(str_portName);\n    serial-&gt;setBaudRate(QSerialPort::Baud9600);\n    serial-&gt;setDataBits(QSerialPort::Data8);\n    serial-&gt;setParity(QSerialPort::NoParity);\n    serial-&gt;setStopBits(QSerialPort::OneStop);\n    serial-&gt;setFlowControl(QSerialPort::NoFlowControl);\n    if (serial-&gt;open(QIODevice::ReadWrite))\n    {\n        qDebug()&lt;&lt;\"Device connected\";\n    }\n    else\n    {\n        qDebug()&lt;&lt;\"[!]Device not connected\";\n    }\n\n}\n//----------------------------------------------------------------------------\nvoid SerialPortController::write( const QByteArray &amp;writeData)\n{\n    qba_data = writeData;\n    const qint64 bytesWritten = serial-&gt;write(writeData);\n    qDebug()&lt;&lt;bytesWritten;\n}\n//----------------------------------------------------------------------------\n</code></pre>\n\n<p>bytesWritten returns always 9, as it should given the format of the string I choose for the input.<br/>\nI tested the Arduino sketch and via Eclipse I'm able, via terminal with the same string used with qt, to change as many times as I want the status (0-1) of the pin and consequently of the led.\nI even downloaded terminal (terminal emulation program for RS-232) and tested the Arduino sketch with it so the problem has to be in my qt application.<br/>\nThere are no problems with the text retrieved from the lineedit, otherwise it wouldn't work the first time and it would not work with eclipse or terminal. What am I missing here?<br/><br/>\nThank you so much in anticipation of your reply.<br>\n<br/>\nGithub repo: <a href=\"https://github.com/giogan98/ArduinoController\" rel=\"nofollow noreferrer\">link</a> <br/>\n<br/> \nEdit:<br/>\nAfter testing with a different laptop I came to the conclusion that the code has nothing wrong within itself, the problem I encounter is probably due to the USB-C to USB-A gen.3 adapter that I use to connect with Arduino.<br/>\nUsing a normal USB A gen.2 port with the USB A to B adapter I was able to switch on and off the led without any issues.<br/>\nI've reported the bug to the Qt developers, link for the interested: <a href=\"https://bugreports.qt.io/browse/QTBUG-80057\" rel=\"nofollow noreferrer\">link</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1573683788, "post_id": 58846508, "comment_id": 103966722, "body": "Thanks for the example code. This clearly illustrates what you are trying to do without the details of your full program. What happens when you compile and run this code? Do you get any errors? If so, what are they? If not, what output do you get? And what do you expect instead?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1573683890, "post_id": 58846508, "comment_id": 103966771, "body": "You say <code>i can&#39;t just type &quot;Upgrade first(&quot;first&quot;), second(&quot;second&quot;);&quot;</code>. What is <code>Upgrade</code> here? And what do you expect <code>first(&quot;first&quot;)</code> or <code>second(&quot;second&quot;)</code> to do?"}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 12369434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IE-qvWZZkLw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePqxzcPN8AxrmXvnjSKgz-dwbA9g/photo.jpg?sz=128", "display_name": "jediknightcode", "link": "https://stackoverflow.com/users/12369434/jediknightcode"}, "edited": false, "score": 0, "creation_date": 1573686030, "post_id": 58846595, "comment_id": 103967486, "body": "Thank you for the quick response, it&#39;s working now!"}], "tags": [], "owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "is_accepted": true, "score": 9, "last_activity_date": 1573684067, "creation_date": 1573684067, "answer_id": 58846595, "question_id": 58846508, "link": "https://stackoverflow.com/questions/58846508/cannot-create-multiple-instances-of-a-class/58846595#58846595", "title": "Cannot create multiple instances of a class?", "body": "<p>The problem is with this line:</p>\n\n<pre><code>std::string name;\n</code></pre>\n\n<p>This declares a single global string named <code>name</code>. This variable is not associated with any <code>Source</code> instance. Instead, you need to declare a field inside the <code>Source</code> class:</p>\n\n<pre><code>class Source {\npublic:\n    Source();\n    Source(std::string namel);\n    std::string getName();\n\n// Add these two lines\nprivate:\n    std::string name;\n};\n</code></pre>\n\n<p>This will give a <code>name</code> for each <code>Source</code>. I suggest you study about class fields and the differences between <code>public</code> and <code>private</code> access.</p>\n"}, {"comments": [{"owner": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "edited": false, "score": 0, "creation_date": 1573686096, "post_id": 58846631, "comment_id": 103967510, "body": "Sorry,  but your answer is not helpful. There are also two correct answers, take a look."}], "tags": [], "owner": {"reputation": 7, "user_id": 12347681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f4901b8b846a293e8cb4ae23beef59?s=128&d=identicon&r=PG&f=1", "display_name": "DGulyasar", "link": "https://stackoverflow.com/users/12347681/dgulyasar"}, "is_accepted": false, "score": -1, "last_activity_date": 1573684252, "creation_date": 1573684252, "answer_id": 58846631, "question_id": 58846508, "link": "https://stackoverflow.com/questions/58846508/cannot-create-multiple-instances-of-a-class/58846631#58846631", "title": "Cannot create multiple instances of a class?", "body": "<p>I think you need to give the specific names of these functions</p>\n\n<pre><code>void Source::setName(std::string nameToSet) \n{\n    name = nameToSet;\n}\n\nstd::string Source::getName()\n{\n    return name;\n}\n</code></pre>\n\n<p>And then you need to call it like this one:</p>\n\n<p>**</p>\n\n<pre><code>    #include \"Source.h\"\n    #include \"iostream\"\n\n**\n\nSource first, second;\nfirst.setName(//Something//);\nsecond.setName(//Something//);\nSource::first(first.getName(//Something//));\nSource::first(second.getName(//Something//));\n\nint main()\n{\n    std::cout &lt;&lt; first.getName() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>So you need to set your values first and then get values for functions.</p>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 8992710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Fs5A.png?s=128&g=1", "display_name": "benjamin", "link": "https://stackoverflow.com/users/8992710/benjamin"}, "is_accepted": false, "score": 1, "last_activity_date": 1573684315, "creation_date": 1573684315, "answer_id": 58846645, "question_id": 58846508, "link": "https://stackoverflow.com/questions/58846508/cannot-create-multiple-instances-of-a-class/58846645#58846645", "title": "Cannot create multiple instances of a class?", "body": "<p>add std::string name in your header file like that:</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\nclass Source {\nprivate:\n    std::string name;\npublic:\n    Source();\n    Source(std::string namel);\n    std::string getName();\n};\n</code></pre>\n\n<p>by this, everytime you call the constructor, \"name\" will be initiated to a single value that refers to your specific instance (first, second, etc).</p>\n"}], "owner": {"reputation": 43, "user_id": 12369434, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IE-qvWZZkLw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rePqxzcPN8AxrmXvnjSKgz-dwbA9g/photo.jpg?sz=128", "display_name": "jediknightcode", "link": "https://stackoverflow.com/users/12369434/jediknightcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 58846595, "answer_count": 3, "score": 3, "last_activity_date": 1573685166, "creation_date": 1573683650, "last_edit_date": 1573685166, "question_id": 58846508, "link": "https://stackoverflow.com/questions/58846508/cannot-create-multiple-instances-of-a-class", "title": "Cannot create multiple instances of a class?", "body": "<p>My problem is that i want to create multiple instances of my upgrade class, for different upgrades. Maybe it's because i'm used to java but i can't just type <code>Source first(\"first\"), second(\"second\");</code> because if i do and call <code>first.getName()</code> for example, i get <code>\"second\"</code>. I made an example file where i only wrote what i'm struggling with, so you don't have to try to understand my mess of a code.</p>\n\n<p>Source.cpp: I want multiple instances of this class.</p>\n\n<pre><code>#include \"Source.h\"\n\nstd::string name;\n\nSource::Source()\n{\n\n}\n\nSource::Source(std::string nameToSet) \n{\n    name = nameToSet;\n}\n\nstd::string Source::getName()\n{\n    return name;\n</code></pre>\n\n<p>Source.h</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\nclass Source {\npublic:\n    Source();\n    Source(std::string namel);\n    std::string getName();\n};\n</code></pre>\n\n<p>Test.cpp</p>\n\n<pre><code>#include \"Source.h\"\n#include \"iostream\"\n\nSource first(\"first\"), second(\"second\");\n\nint main()\n{\n    std::cout &lt;&lt; first.getName() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>Output: second</strong></p>\n\n<p>Test.h</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1573688266, "post_id": 58846503, "comment_id": 103968043, "body": "I&#39;m fairly certain that everything you have here is in C++98."}, {"owner": {"reputation": 1009, "user_id": 4016197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6nmwr.jpg?s=128&g=1", "display_name": "Shane Duffy", "link": "https://stackoverflow.com/users/4016197/shane-duffy"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1573688498, "post_id": 58846503, "comment_id": 103968094, "body": "Thanks, I wasn&#39;t sure. Edited out C++11 comment."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1573689903, "post_id": 58846503, "comment_id": 103968451, "body": "&gt; <i>However, due to the semantics of the project I am working on this would not be a desirable solution.</i> It&#39;s hands-down the best solution. <code>MyClass</code> should act as a delegate for the contained <code>ChildClass</code> object; then all the existing code which expects <code>MyClass</code> to have a <code>setValue</code> continues to work unmodified."}], "answers": [{"comments": [{"owner": {"reputation": 1009, "user_id": 4016197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6nmwr.jpg?s=128&g=1", "display_name": "Shane Duffy", "link": "https://stackoverflow.com/users/4016197/shane-duffy"}, "edited": false, "score": 0, "creation_date": 1573685114, "post_id": 58846719, "comment_id": 103967211, "body": "Not exactly, myFunction must reference only MyClass without any reference to ChildClass. Rather, I want to know if there is a standard way to specify this information entirely within the call to myFunction. It would certainly be possible to achieve this by manually looking at address offsets, however it would be convenient if there was a standard way of doing this."}, {"owner": {"reputation": 1009, "user_id": 4016197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6nmwr.jpg?s=128&g=1", "display_name": "Shane Duffy", "link": "https://stackoverflow.com/users/4016197/shane-duffy"}, "edited": false, "score": 0, "creation_date": 1573685406, "post_id": 58846719, "comment_id": 103967313, "body": "Also, the reason for this is that the project I am working on has an unknown template in place of MyClass. It should be able to take in any member function of the template but also any member function any number of layers deep within the template object&#39;s children."}], "tags": [], "owner": {"reputation": 15520, "user_id": 428857, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/J477b.png?s=128&g=1", "display_name": "TonyK", "link": "https://stackoverflow.com/users/428857/tonyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1573684722, "creation_date": 1573684722, "answer_id": 58846719, "question_id": 58846503, "link": "https://stackoverflow.com/questions/58846503/does-c-have-a-defined-way-to-pass-a-pointer-to-a-member-function-of-a-member-o/58846719#58846719", "title": "Does C++ have a defined way to pass a pointer to a member function of a member object of a class?", "body": "<p>Does this do what you want?</p>\n\n<pre><code>class ChildClass {\npublic:\n    int value;\n\n    void setValue(int value) {\n        this-&gt;value = value;\n    }\n} ;\n\nclass MyClass {\npublic:\n    ChildClass childClass;\n} ;\n\nstatic void myFunction(void (ChildClass::*f)(int), MyClass&amp; myClass) {\n  (myClass.childClass.*f) (1) ;\n}\n\nint main() {\n  MyClass myClass;\n  myFunction(&amp;ChildClass::setValue, myClass);\n}\n</code></pre>\n\n<p>Note the semi-colons after the class definitions.</p>\n"}, {"comments": [{"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1573689412, "post_id": 58847064, "comment_id": 103968343, "body": "This stuff breaks encapsulation; the original solution of allowing <code>MyClass</code> to be a delegate for <code>ChildClass</code> is far superior. Now you have a <code>main</code> function which knows that the <code>myClass</code> object has a child called <code>childClass</code>.  Code which used to call <code>myFunction(&amp;MyClass::setValue, myClass);</code> cannot &quot;just work&quot; with the change to the child object; all these calls have to be edited to use lambdas."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 1, "creation_date": 1573689636, "post_id": 58847064, "comment_id": 103968397, "body": "@Kaz To maintain encapsulation just add a member function to <code>MyClass</code>: <code>auto getSetter() { return [this](int b) { childClass.setValue(b); }; }</code>. You can encapsulate even deeper by returning <code>std::function&lt;void(int)&gt;</code> - this works with Pimpl idiom."}, {"owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "edited": false, "score": 0, "creation_date": 1575999288, "post_id": 58847064, "comment_id": 104752406, "body": "^ But that is now similar to, but ironically complicated compared to just <code>MyClass::setValue(int value) { this-&gt;childClass.setValue(value); }</code>. We didn&#39;t avoid injecting a function into <code>MyClass</code> as OP wanted, and we made it worse by turning it into a convoluted function-returning function.  Why would we want to create a new function object, if we already have an OOP object with methods."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1573689469, "last_edit_date": 1573689469, "creation_date": 1573686994, "answer_id": 58847064, "question_id": 58846503, "link": "https://stackoverflow.com/questions/58846503/does-c-have-a-defined-way-to-pass-a-pointer-to-a-member-function-of-a-member-o/58847064#58847064", "title": "Does C++ have a defined way to pass a pointer to a member function of a member object of a class?", "body": "<blockquote>\n  <p>Is there then a way in C++ to pass the setValue function into myFunction given that setValue is now within the ChildClass object within MyClass?</p>\n</blockquote>\n\n<p>There is a way by adding a level of indirection. That level of indirection is polymorphic function wrapper <a href=\"https://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\"><code>std::function</code></a>. <code>myFunction</code> can take a <code>std::function</code> argument, which can be initialized with arbitrary accessor functions, including labdas. E.g.:</p>\n\n<pre><code>#include &lt;functional&gt;\n\nstruct ChildClass {\n    int value;\n\n    void setValue(int value) {\n        this-&gt;value = value;\n    }\n};\n\nstruct MyClass {\n    ChildClass childClass;\n};\n\nvoid myFunction(std::function&lt;void(MyClass&amp;, int)&gt; const&amp; f, MyClass&amp; myClass) {\n    f(myClass, 1);\n}\n\nint main() {\n    MyClass myClass;\n    myFunction([](MyClass&amp; a, int b) { a.childClass.setValue(b); }, myClass);\n}\n</code></pre>\n\n<p>Using <code>std::function</code> your can get rid of <code>MyClass&amp;</code> argument and expect the user to provide the required object inside <code>std::function</code> captured by the lambda expression:</p>\n\n<pre><code>void myFunction2(std::function&lt;void(int)&gt; const&amp; f) {\n    f(1);\n}\n\nint main() {\n    MyClass myClass;\n    myFunction2([&amp;myClass](int b) { myClass.childClass.setValue(b); });\n}\n</code></pre>\n\n<p>Note that <code>std::function</code> can store at least <code>sizeof(void(Undefined_class::*member_pointer)())</code> inside the object without allocating heap memory. The C++ standard doesn't require that, however, it seems that the reason for this optimization is that using <code>std::function</code> for member function pointers is not much worse than using member function pointers directly. Or, in other words, if you replace member and member function pointers in your code with <code>std::function</code>, your application won't be penalised by extra memory allocations for that<sup>\u2020</sup>. With <code>gcc</code> on x86_64 that results in 16 bytes of inline storage in <code>std::function</code>, which can store a lambda capture object with 2 object references.</p>\n\n<p><sup>\u2020</sup> The size of <code>std::function</code> is still larger than that, though, and it is a non-trivial type, so <a href=\"https://stackoverflow.com/a/58340952/412080\">it cannot be passed or returned in registers</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1573687592, "post_id": 58847133, "comment_id": 103967898, "body": "That&#39;s pretty cool. However, that requires <code>call</code> to be a function template, which may or may not be feasible."}, {"owner": {"reputation": 1009, "user_id": 4016197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6nmwr.jpg?s=128&g=1", "display_name": "Shane Duffy", "link": "https://stackoverflow.com/users/4016197/shane-duffy"}, "edited": false, "score": 0, "creation_date": 1573688016, "post_id": 58847133, "comment_id": 103967989, "body": "This is a cool feature, I didn&#39;t realize this was even possible. However Maxim&#39;s answer appears to fit into the other conditions of my project quite well. Regardless, this is an interesting solution."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1573690398, "post_id": 58847133, "comment_id": 103968567, "body": "Fold expression on pointer-to-member access operator.  Now I&#39;ve seen it all"}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 0, "creation_date": 1573730198, "post_id": 58847133, "comment_id": 103982742, "body": "I think I saw a yt-video a week ago (maybe an older C++-Weekly?) where the host said, that he couldn&#39;t imagine any possible usecase for that.^^"}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 0, "creation_date": 1573755918, "post_id": 58847133, "comment_id": 103997677, "body": "ah, found <a href=\"https://youtu.be/AqDsso3S5fg?t=819\" rel=\"nofollow noreferrer\">it</a>. Great talk by @lefticus"}], "tags": [], "owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "is_accepted": false, "score": 2, "last_activity_date": 1573687487, "creation_date": 1573687487, "answer_id": 58847133, "question_id": 58846503, "link": "https://stackoverflow.com/questions/58846503/does-c-have-a-defined-way-to-pass-a-pointer-to-a-member-function-of-a-member-o/58847133#58847133", "title": "Does C++ have a defined way to pass a pointer to a member function of a member object of a class?", "body": "<p>There is a solution with c++17 fold expressions:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nstruct S\n{\n    int foo() {return 1;} \n};\n\nstruct T\n{\n    S s;\n};\n\n\ntemplate&lt;class ... Args&gt;\nint call(T &amp;t, Args... args)\n{\n    return (t .* ... .* args)();\n}\n\nint main()\n{\n    T t{};\n    std::cout &lt;&lt; call(t, &amp;T::s, &amp;S::foo);\n}\n</code></pre>\n\n<p>You have to explicitly give the whole \"path\" to the member function, but I think this is unavoidable (just from a logical point of view). This scales to an arbitrary level of indirection. You can also template also the <code>T</code> and it shouldn't be to bad to add functions arguments.</p>\n"}], "owner": {"reputation": 1009, "user_id": 4016197, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6nmwr.jpg?s=128&g=1", "display_name": "Shane Duffy", "link": "https://stackoverflow.com/users/4016197/shane-duffy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 58847064, "answer_count": 3, "score": 1, "last_activity_date": 1573689469, "creation_date": 1573683615, "last_edit_date": 1573688413, "question_id": 58846503, "link": "https://stackoverflow.com/questions/58846503/does-c-have-a-defined-way-to-pass-a-pointer-to-a-member-function-of-a-member-o", "title": "Does C++ have a defined way to pass a pointer to a member function of a member object of a class?", "body": "<p>Let's say I have some function:</p>\n\n<pre><code>void myFunction(void (MyClass::*function)(int), MyClass&amp; myClass) {\n    (myClass.*function)(1);\n}\n</code></pre>\n\n<p>Which is called as follows:</p>\n\n<pre><code>class MyClass {\n    int value;\n\n    void setValue(int value) {\n        this-&gt;value = value;\n    }\n}\n\nMyClass myClass;\nmyFunction(&amp;MyClass::set_value, myClass);\n</code></pre>\n\n<p>This function takes the object <code>myClass</code> and says to call its member function <code>setValue</code>, which it calls with the parameter set to 1.</p>\n\n<p>Before I realized C++ had support for passing <em>member</em> functions as as parameters, I had manually set my code to take in a object and function pointer and then determine the offset between their addresses. This offset could then be saved to call the same member function if given a different instance of the same type of object.</p>\n\n<p>But yeah, then I discovered you can just do <code>Class::*function</code> which (I assume) does exactly what I had previously built/described.</p>\n\n<p>Which leads me to my issue, let's say I have the same function as before, except I change my class structure a bit:</p>\n\n<pre><code>class MyClass {\n    ChildClass childClass;\n}\n\nclass ChildClass {\n    int value;\n\n    void setValue(int value) {\n        this-&gt;value = value;\n    }\n}\n</code></pre>\n\n<p>Is there then a way in C++ to pass the <code>setValue</code> function into <code>myFunction</code> given that <code>setValue</code> is now within the <code>ChildClass</code> object within <code>MyClass</code>?</p>\n\n<p>The most obvious solution would be to add a <code>setValue</code> member function to <code>MyClass</code> which calls the <code>setValue</code> function within its <code>childClass</code> object, like so:</p>\n\n<pre><code>class MyClass {\n    ChildClass childClass;\n\n    void setValue(int value) {\n        this-&gt;childClass.setValue(value);\n    }\n}\n\nclass ChildClass {\n    int value;\n\n    void setValue(int value) {\n        this-&gt;value = value;\n    }\n}\n\nMyClass myClass;\nmyFunction(&amp;MyClass::setValue, myClass);\n</code></pre>\n\n<p>However, due to the semantics of the project I am working on this would not be a desirable solution. Thus, I was curious about whether or not there is a way to achieve this in C++. If not, I can certainly just implement it manually (it would be the same as before, except you would save the offset between the <code>childClass</code> member and <code>MyClass</code> as well as the offset of the <code>setValue</code> member and <code>ChildClass</code>), but naturally I'd like to know if there is a more \"built-in\" way of achieving this.</p>\n"}, {"tags": ["c++", "opengl", "sfml", "glew"], "comments": [{"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1573685592, "post_id": 58846475, "comment_id": 103967364, "body": "What are you getting for <code>GL_VERSION</code> after that <code>glewInit()</code>?"}, {"owner": {"reputation": 495, "user_id": 2923797, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/e89c79d9e2f7058a555abcc7d011b57f?s=128&d=identicon&r=PG&f=1", "display_name": "B0rn2C0de", "link": "https://stackoverflow.com/users/2923797/b0rn2c0de"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1573686696, "post_id": 58846475, "comment_id": 103967655, "body": "I am getting 4.4.0 NVIDIA 441.08"}, {"owner": {"reputation": 423, "user_id": 1094871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a39a250f53ac54320b436b5fb4f7b62?s=128&d=identicon&r=PG", "display_name": "Eddy Luten", "link": "https://stackoverflow.com/users/1094871/eddy-luten"}, "edited": false, "score": 0, "creation_date": 1573688638, "post_id": 58846475, "comment_id": 103968132, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15165863/glgenframebuffers-access-violation-when-using-glfw-glew\">glGenFramebuffers() access violation when using GLFW + GLEW</a>"}, {"owner": {"reputation": 1454, "user_id": 1683902, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2d00f9a657d663d31fde89af0b2e6851?s=128&d=identicon&r=PG", "display_name": "Ian Young", "link": "https://stackoverflow.com/users/1683902/ian-young"}, "edited": false, "score": 0, "creation_date": 1573723571, "post_id": 58846475, "comment_id": 103978772, "body": "Run glewinfo.exe in the glew library directory. It will tell you which extensions are enabled, and thus, if glGenFrameBuffers is available to you."}], "owner": {"reputation": 495, "user_id": 2923797, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/e89c79d9e2f7058a555abcc7d011b57f?s=128&d=identicon&r=PG&f=1", "display_name": "B0rn2C0de", "link": "https://stackoverflow.com/users/2923797/b0rn2c0de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1573685274, "creation_date": 1573683474, "last_edit_date": 1573685274, "question_id": 58846475, "link": "https://stackoverflow.com/questions/58846475/access-violation-when-using-glgenframebuffers-sfml-glew", "title": "Access Violation when using glGenFrameBuffers SFML + GLEW", "body": "<p>I creating a small renderer using OpenGL and am getting the access violation error only when using that particular function. Other Gl functions work perfectly fine.</p>\n\n<p>What I have tried so far</p>\n\n<ul>\n<li>setting <code>glewExperimental = GL_TRUE</code> before glewInit</li>\n<li>using <code>glGenFramebuffersEXT</code> instead of <code>glGenFramebuffers</code> - Same error</li>\n</ul>\n\n<p>Here is the code I am using to initialize SFMLand GLEW</p>\n\n<pre><code>sf::ContextSettings settings;\nsettings.depthBits = 24;\nsettings.stencilBits = 8;\nsettings.majorVersion = 3;\nsettings.minorVersion = 3;\nsettings.attributeFlags = sf::ContextSettings::Core;\n\nwindow = new sf::Window( sf::VideoMode( screenWidth, screenHeight, 32 ), \"OpenGL SFML\", sf::Style::Titlebar | sf::Style::Close, settings );\n\nglewExperimental = GL_TRUE;\n\nif ( GLEW_OK != glewInit( ) )\n{\n    std::cout &lt;&lt; \"Failed to initialize GLEW\" &lt;&lt; std::endl;\n    return false;\n}\n</code></pre>\n\n<p>System information:</p>\n\n<ul>\n<li>OS: Windows 10</li>\n<li>GPU : GTX 1060</li>\n<li>GLEW version: 2.1.0</li>\n</ul>\n"}, {"tags": ["c++", "compiler-errors"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1573683050, "post_id": 58846350, "comment_id": 103966433, "body": "TL;DR of the dupe: <code>std::unordered_map</code> is a hash based container and you either need to specialize <code>std::hash</code> for your type or provide your own hasher for the third template parameter."}, {"owner": {"reputation": 141, "user_id": 11748947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da0b6a761394a7bdf6034bac309498a?s=128&d=identicon&r=PG", "display_name": "JuiceFV", "link": "https://stackoverflow.com/users/11748947/juicefv"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1573684203, "post_id": 58846350, "comment_id": 103966878, "body": "@NathanOliver- Reinstate Monica Yeah you right. Thank you a lot!"}], "owner": {"reputation": 141, "user_id": 11748947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0da0b6a761394a7bdf6034bac309498a?s=128&d=identicon&r=PG", "display_name": "JuiceFV", "link": "https://stackoverflow.com/users/11748947/juicefv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 816, "favorite_count": 0, "closed_date": 1573682990, "answer_count": 0, "score": 0, "last_activity_date": 1573682761, "creation_date": 1573682761, "question_id": 58846350, "link": "https://stackoverflow.com/questions/58846350/c-compiler-error-c2280-attempting-to-reference-a-deleted-function-in-unorder", "closed_reason": "Duplicate", "title": "C++ Compiler Error C2280 \u201cattempting to reference a deleted function\u201d In unordered_map", "body": "<p>I have an Agent's class and there I have some unordered_map variables</p>\n\n<pre><code>  unordered_map&lt;Node, Node&gt; came_from;  // &lt;Parent, Child&gt;\n  unordered_map&lt;Node, unsigned int&gt; g_score;\n  unordered_map&lt;Node, unsigned int&gt; f_score;\n  unordered_map&lt;Node, unsigned int&gt; closed_set;\n</code></pre>\n\n<p>The Node it's just a simple structure and it looks something like that</p>\n\n<pre><code>typedef struct Node {\n  uint x, y, f_score, g_score;\n\n  bool operator==(const Node &amp;n) const { return (x == n.x &amp;&amp; y == n.y); }\n\n  bool operator!=(const Node &amp;n) const { return (x != n.x || y != n.y); }\n\n  friend ostream &amp;operator&lt;&lt;(ostream &amp;out, const Node &amp;n) {\n    out &lt;&lt; '[' &lt;&lt; n.x &lt;&lt; \", \" &lt;&lt; n.y &lt;&lt; ']';\n    return (out);\n  }\n} Node;\n</code></pre>\n\n<p>And when I starting the build, I have such error</p>\n\n<pre><code>Error   C2280   \"std::hash&lt;_Kty&gt;::hash(void)\": attempting to reference a deleted function\n        with\n        [\n            _Kty=Node\n        ]   Coopirative_Pathfinding C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Preview\\VC\\Tools\\MSVC\\14.23.28019\\include\\unordered_map(117,1)  \n</code></pre>\n\n<p>When I'am pass the pointer to the Node its working</p>\n\n<pre><code>  unordered_map&lt;Node*, Node&gt; came_from;  // &lt;Parent, Child&gt;\n  unordered_map&lt;Node*, unsigned int&gt; g_score;\n  unordered_map&lt;Node*, unsigned int&gt; f_score;\n  unordered_map&lt;Node*, unsigned int&gt; closed_set;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["c++", "dijkstra"], "comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1573684297, "post_id": 58846310, "comment_id": 103966915, "body": "<code>Edge newEdge;</code> calls the default constructor. You created a custom constructor so no default constructor is created by the compiler. Either create your own default constructor or call your custom constructor with <code>Edge newEdge(u, v, w, nullptr);</code>. The error messages are pretty clear. Read them and do what the compiler recommends."}, {"owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "edited": false, "score": 1, "creation_date": 1573692084, "post_id": 58846310, "comment_id": 103968942, "body": "That number of errors goes way beyond asking a single question. Focus on the first one (maybe also post one or two after the first if they seem related). Trim the code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also, copying the error messages as text rather than an image would (be easier for you and would) make your question accessible to a wider audience."}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 3961677, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yre8A.png?s=128&g=1", "display_name": "pladams9", "link": "https://stackoverflow.com/users/3961677/pladams9"}, "is_accepted": false, "score": 1, "last_activity_date": 1573687774, "creation_date": 1573687774, "answer_id": 58847174, "question_id": 58846310, "link": "https://stackoverflow.com/questions/58846310/dijkstra-program/58847174#58847174", "title": "Dijkstra Program", "body": "<p>I won't go through each error exhaustively, but here is a general strategy for resolving these errors.</p>\n\n<p>When dealing with error messages from the compiler, it is generally a good practice to <strong>start with the first error, deal with it, and then attempt to compile again</strong>. Oftentimes, a single issue will result in multiple error messages, and resolving one problem can give clues to the rest. If nothing else, handling one thing at a times helps keep things manageable.</p>\n\n<h2>Let's look at that first error message:</h2>\n\n<pre><code>dijkstra.cpp: In function \u2018void insertEdge(int, int, int, Graph*)\ndijkstra.cpp:152:10: error: no matching function for call to \u2018Edge::Edge()\u2019\n    Edge newEdge;\n         ^\n</code></pre>\n\n<h2>1. Look at the line that is triggering the error.</h2>\n\n<p>Sometimes there will be something obvious at that line (or perhaps the line above it). A missing semi-colon, a forgotten argument, a typo, etc.</p>\n\n<p>Your compiler has told you where to look. The error is in <code>dijkstra.cpp</code> at line number <code>152</code>. It's also given us the signature of the function it is in: <code>void insertEdge(int, int, int, Graph*)</code>. In fact, it's even pinpointed where it realized there was something wrong: when your program tries to create an <code>Edge</code> called <code>newEdge</code>.</p>\n\n<h2>2. Interpret the error message.</h2>\n\n<p>For non-obvious mistakes, you may have to dig into what the error message is saying. In this case the error listed is: <code>no matching function for call to 'Edge::Edge()'</code>.</p>\n\n<p>That seems fairly self-explanatory to me, but of course, that depends upon the experience level of the person reading the message. If I don't understand an error message, I employ a simple strategy: I Google it. Removing the names specific to your program will be useful, so in this case I would likely search for <code>\"error: no matching function for call to\"</code>. Doing so brings up many results for programmers facing similar errors.</p>\n\n<p>In this specific case, the compiler is saying that you are trying to call the function <code>Edge::Edge()</code> but it can't find a function that matches that. <code>Edge::Edge()</code> would be the constructor for your <code>Edge</code> struct - but you've only defined one constructor, and it takes several arguments, so the compiler doesn't know how to construct an <code>Edge</code> without any arguments.</p>\n\n<h2>3. Fix the error</h2>\n\n<p>For this specific error, you could change the referenced line to create an <code>Edge</code> using the arguments. Something like:</p>\n\n<pre><code>Edge newEdge(0, 0, 0.0, nullptr)\n</code></pre>\n\n<p>But that's probably not what you want. More likely, you want to add a default constructor to your <code>Edge</code> struct.</p>\n\n<pre><code>struct Edge \n{\n    ...\n    Edge(int u, int v, double w, Edge* nextEdge)\n    {\n        from = u;\n        to = v;         \n        weight = w;     \n        next = nextEdge;\n    }\n    Edge() = default; // Creates a default constructor; leaves values uninitialized\n};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>struct Edge \n{\n    ...\n    Edge(int u, int v, double w, Edge* nextEdge)\n    {\n        from = u;\n        to = v;         \n        weight = w;     \n        next = nextEdge;\n    }\n    Edge() : from(0), to(0), weight(0.0), next(nullptr) {} // Initializes members to a set of defaults\n};\n</code></pre>\n\n<p>or</p>\n\n<pre><code>struct Edge \n{\n    ...\n    Edge(int u = 0, int v = 0, double w = 0.0, Edge* nextEdge = nullptr) // Defines default values so that constructor can be called with 0-4 arguments\n    {\n        from = u;\n        to = v;         \n        weight = w;     \n        next = nextEdge;\n    }\n};\n</code></pre>\n\n<h2>4. Repeat</h2>\n\n<p>Now you re-compile your program. Hopefully, the number of error messages has decreased. Regardless, you look at the first error on the list, and you repeat this process until your program compiles without errors.</p>\n"}], "owner": {"reputation": 19, "user_id": 11059417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d36214581ee7aaef6ee793f9f88fea7?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/11059417/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1573687774, "creation_date": 1573682574, "last_edit_date": 1573682924, "question_id": 58846310, "link": "https://stackoverflow.com/questions/58846310/dijkstra-program", "title": "Dijkstra Program", "body": "<p>I am having trouble with functions that I have used before in different programs and I have come to a brick wall with converting them to be used in this new program. Dijkstra.cpp reads information about a weighted graph from the standard input\nand prints the description of the input graph, the shortest path from the \nstart vertex and the end vertex, and the distance of that path to the \nstandard ouput. </p>\n\n<p>Here are the <strong>ALL</strong> errors I receive (given, it is an incomplete program as is):</p>\n\n<p><a href=\"https://i.stack.imgur.com/8VgpP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8VgpP.png\" alt=\"attach1\"></a>\n<a href=\"https://i.stack.imgur.com/6R6Mq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6R6Mq.png\" alt=\"attach2\"></a></p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cstring&gt;\nusing namespace std;\n\nint trace = 0;\n\n//An object of type Edge is a cell in an adjacency list and represents an edge\n//of the graph.\n\nstruct Edge \n{\n    int from;           //The 'from' direction of the edge.\n    int to;         //The 'to' direction of the edge.\n    double weight;      //The weight of the edge from u to v.\n    Edge* next;     //A pointer to the next edge in the linked list.\n\n    Edge(int u, int v, double w, Edge* nextEdge)\n    {\n        from = u;\n        to = v;         \n        weight = w;     \n        next = nextEdge;\n    }\n};\n\n\n//An object of type Vertex represents information about one vertex in a graph.\n\nstruct Vertex       \n{\n    Edge* edgeList;     //A pointer to a linked list of all edges \n                    //from v to another vertex.\n\n    double time;        //A real number representing the shortest\n                    //distance from the start vertex.\n\n    int sender;     //Used with the above real number, it begins \n                //finding the shortest path starting from v to\n                //the sender. \n\n    Vertex()\n    {\n        edgeList = NULL;\n        time = -1;\n        sender = -1;\n    }\n};\n\n\n//An object of type graph represents a weighted graph.\n\nstruct Graph\n{\n    int numVertices;    //The number of verticies in the graph.\n    int numEdges;       //The number of edges in the graph.\n\n    Vertex* vertices;   //An array for verticies utilizing a Vertex\n                        //structure that gives information about a\n                        //specific vertex.\n\n    Graph(int nV)\n    {\n        numVertices = nV;\n        vertices = new Vertex[nV+1];\n        numEdges = 0;\n    }\n};\n\n\n\n//insertEdge inserts an edge into the graph g.\n\nvoid insertEdge(int u, int v, int w, Graph* g)\n{\n    Edge newEdge;\n    newEdge.from = u;\n    newEdge.to = v;\n    newEdge.weight = w;\n\n    if(g-&gt;numVertices &gt; g-&gt;numEdges)\n    {   \n        g-&gt;[g-&gt;numEdges] = newEdge;\n        g-&gt;numEdges++;\n    }\n}\n\n//insertOpposite inserts an edge going the opposite way\n//as insertEdge does into graph g.\n\nvoid insertOpposite(int u, int v, int w, Graph* g)\n{\n    Edge newEdge;\n    newEdge.from = v;\n    newEdge.to = u;\n    newEdge.weight = w;\n\n    if(g-&gt;numVertices &gt; g-&gt;numEdges)\n    {       \n        g-&gt;vertices[g-&gt;numEdges] = newEdge;\n        g-&gt;numEdges++;\n    }\n}\n\n\n//readGraph reads a graph and is also able to insert edges into a graph.\n\nGraph* readGraph()\n{\n    int nV, u,v,w, edges = 0;\n\n    scanf(\"%i\", &amp;nV);\n\n    Graph* g = new Graph(nV);\n\n    while(true)\n    {\n        scanf(\"%i\", &amp;u);\n        if(u == 0)\n        {\n                break;\n        }\n\n        scanf(\"%i\", &amp;v);\n        scanf(\"%i\", &amp;w);\n\n        insertEdge(u, v, w, g);\n        insertOpposite(u, v, w, g);\n\n        edges++;\n    }\n\n    g-&gt;totalEdges = edges;  \n\n    return g;\n}\n\n\n//writeGraph prints a formatted chart from graph g \n//that includes the amount of vertices and edges along with \n//the weight that corresponds to each edge.\n\nvoid writeGraph(Graph* g)\n{\n    printf(\"\\nThere are %i vertices and %i edges\\n\", g-&gt;numVertices,\n        g-&gt;numEdges);\n\n    printf(\"\\n The edges are as follows.\");\n\n    for(int n = 0; n &lt; g-&gt;totalEdges; n++)\n    {\n        printf(\"(%i,\", g-&gt;vertices[n].vertex1);\n        printf(\"%i)  \", g-&gt;vertices[n].vertex2);\n        printf(\"weight %3i\\n\", g-&gt;vertices[n].weight);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "initializer-list"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1573682537, "post_id": 58846257, "comment_id": 103966242, "body": "You should ask one question per post."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1573682884, "post_id": 58846257, "comment_id": 103966369, "body": "Regarding the <code>initializer_list</code> constructors: Inspecting them will not give you much, since this class is magical. The ability to construct it from a brace-enclosed list is built into the language, and can&#39;t be replicated for a custom class. Also, the second constructor <a href=\"https://en.cppreference.com/w/cpp/utility/initializer_list/initializer_list\" rel=\"nofollow noreferrer\">isn&#39;t even supposed</a> to be there."}, {"owner": {"reputation": 175, "user_id": 8341156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e64b731b55f7ddeaf7fd4163305c08f0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlladz", "link": "https://stackoverflow.com/users/8341156/vlladz"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1573683110, "post_id": 58846257, "comment_id": 103966455, "body": "My bad, seemed like it was all too similar and redundant to ask in different posts. Yes, that&#39;s what I&#39;m actually asking, just wasn&#39;t 100% sure if that was the case."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 8341156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e64b731b55f7ddeaf7fd4163305c08f0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlladz", "link": "https://stackoverflow.com/users/8341156/vlladz"}, "edited": false, "score": 0, "creation_date": 1573685275, "post_id": 58846634, "comment_id": 103967264, "body": "Yes I was thinking all that was happening, just I wasn&#39;t exactly sure what is happening behind the scene. I didn&#39;t actually find that first cppreference link, that would have actually answered all my questions, had I found that earlier. And sorry for many questions. Thanks for the hints!"}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 2, "last_activity_date": 1573684259, "last_edit_date": 1592644375, "creation_date": 1573684259, "answer_id": 58846634, "question_id": 58846257, "link": "https://stackoverflow.com/questions/58846257/c-stdinitializer-list-usage/58846634#58846634", "title": "C++ std::initializer_list usage", "body": "<p><strong>1</strong></p>\n<blockquote>\n<p>So my first question is: the line above marked with (*), is there some kind of syntactic sugar behind that allows this syntax (or maybe regular syntax for the compiler, so that he mangles with it and sets up everything properly)?</p>\n</blockquote>\n<p>From <a href=\"https://en.cppreference.com/w/cpp/utility/initializer_list/initializer_list\" rel=\"nofollow noreferrer\">cppreference</a>:</p>\n<blockquote>\n<p><strong>Notes</strong></p>\n<p>Despite a lack of constructors, it is possible to create non-empty initializer lists. Instances of std::initializer_list are implicitly constructed when:</p>\n<ul>\n<li>a braced-init-list is used in list-initialization, including function-call list initialization and assignment expressions (not to be confused with constructor initializer lists)</li>\n<li>a braced-init-list is bound to auto, including in a ranged for loop</li>\n</ul>\n</blockquote>\n<p><strong>2</strong></p>\n<blockquote>\n<p>Next question [...]: if I'm not explicitly using new initializer_list({...});, can the initializer_list ever use dynamic memory in any way (is there a certain use-case where it does)?</p>\n</blockquote>\n<p>Why would you? Their main purpose is to pass a list of parameters to constructors. They are a lightweight wrapper around an array that is constructed by the compiler on the fly to allow you write code along the line of</p>\n<pre><code>std::string s1{'a', 'b', 'c', 'd'};\n</code></pre>\n<p><strong>3a</strong></p>\n<blockquote>\n<p>In this case, is there any possible way to use the constructor of the Test class other than the way it is used with the t1 and t2 instances?</p>\n</blockquote>\n<p>I do not really understand what you are asking here. I would write it like this:</p>\n<pre><code>Test t1{ 4, 6, 3 };\nTest t2{ 6, 3, 2, 8 };\n</code></pre>\n<p><strong>3b</strong></p>\n<blockquote>\n<p>And of course, is this even correct to begin with?</p>\n</blockquote>\n<p>There is nothing wrong in your code.</p>\n<p><strong>3c</strong></p>\n<blockquote>\n<p>like for instance the 'brace init list' { ... } being destroyed (if saying something like this is even possible) before cout uses them?</p>\n</blockquote>\n<p>Again from <a href=\"https://en.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">cppreference</a>:</p>\n<blockquote>\n<p>The underlying array is a temporary array of type const T[N], in which each element is copy-initialized (except that narrowing conversions are invalid) from the corresponding element of the original initializer list. The lifetime of the underlying array is the same as any other temporary object, except that initializing an initializer_list object from the array extends the lifetime of the array exactly like binding a reference to a temporary (with the same exceptions, such as for initializing a non-static class member). The underlying array may be allocated in read-only memory.</p>\n</blockquote>\n<p>TL;DR: Even temporaries dont cease to exists between two random lines of code. You can safely use the function parameter <code>lst</code> till the end of the function.</p>\n<p><strong>PS</strong></p>\n<p>Only while half-way through this answer I realized that it is not only 3 but actually even more questions. Better focus on one point in a question. If you have more, open more questions.</p>\n"}], "owner": {"reputation": 175, "user_id": 8341156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e64b731b55f7ddeaf7fd4163305c08f0?s=128&d=identicon&r=PG&f=1", "display_name": "Vlladz", "link": "https://stackoverflow.com/users/8341156/vlladz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 58846634, "answer_count": 1, "score": 1, "last_activity_date": 1573684259, "creation_date": 1573682272, "question_id": 58846257, "link": "https://stackoverflow.com/questions/58846257/c-stdinitializer-list-usage", "title": "C++ std::initializer_list usage", "body": "<p>I have a couple of questions about how <code>initializer_list</code>`s work in C++. First of all, say that we have (std:: omitted for simplicity):</p>\n\n<pre><code>initializer_list&lt;uint32_t&gt; lst({ 5, 4, 3 }); // (*)\n</code></pre>\n\n<p>In Visual Studio, I peaked a bit into the class and found only these two constructors:</p>\n\n<pre><code>constexpr initializer_list() noexcept : _First(nullptr), _Last(nullptr) {}\n\nconstexpr initializer_list(const _Elem* _First_arg, const _Elem* _Last_arg) noexcept\n    : _First(_First_arg), _Last(_Last_arg) {}\n</code></pre>\n\n<p>So my first question is: the line above marked with (*), is there some kind of syntactic sugar behind that allows this syntax (or maybe regular syntax for the compiler, so that he mangles with it and sets up everything properly)?</p>\n\n<p>By the look of the class, everything is constexpr so my conclusion is that it's all done in compile time, but I couldn't find any concrete explanations about the question.</p>\n\n<p>Next question is a bit contradictory to the previous conclusion, but since I am not 100% sure about the stuff happening, I'm gonna ask anyway: if I'm not explicitly using <code>new initializer_list&lt;int&gt;({...});</code>, can the <code>initializer_list</code> ever use dynamic memory in any way (is there a certain use-case where it does)?</p>\n\n<p>Again, it's a silly question, but I want to understand exactly what happens with the class, as well as how it mangles with the memory.</p>\n\n<p>Third question is, say that we have a code that looks like this:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass Test\n{\n    public: Test(initializer_list&lt;uint32_t&gt;&amp;&amp; lst)\n    {\n        cout &lt;&lt; \"Size: \" &lt;&lt; lst.size() &lt;&lt; endl;\n\n        for (const uint32_t* i = lst.begin(); i != lst.end(); ++i)\n        {\n            cout &lt;&lt; \" \" &lt;&lt; *i;\n        }\n\n        cout &lt;&lt; endl &lt;&lt; endl;\n    }\n};\n\nint main(void)\n{\n    Test t1({ 4, 6, 3 });\n    Test t2({ 6, 3, 2, 8 });\n\n    return 0;\n}\n</code></pre>\n\n<p>In this case, is there any possible way to use the constructor of the <code>Test</code> class other than the way it is used with the <code>t1</code> and <code>t2</code> instances? And of course, is this even correct to begin with? <code>cout</code> does print out the correct values, however I want to be sure that there is nothing ill-formed, like for instance the 'brace init list' <code>{ ... }</code> being destroyed (if saying something like this is even possible) before <code>cout</code> uses them?</p>\n\n<p>This is bugging me since I don't have any understanding about how does the C++ manage the memory when things like these are written.</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "thread-safety"], "answers": [{"comments": [{"owner": {"reputation": 2950, "user_id": 180697, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5cc380d3aa34a863217170ef37cadcf8?s=128&d=identicon&r=PG", "display_name": "Vitali", "link": "https://stackoverflow.com/users/180697/vitali"}, "edited": false, "score": 1, "creation_date": 1573681712, "post_id": 58846089, "comment_id": 103965899, "body": "<a href=\"https://stackoverflow.com/questions/41867228/why-do-i-need-to-acquire-a-lock-to-modify-a-shared-atomic-variable-before-noti\" title=\"why do i need to acquire a lock to modify a shared atomic variable before noti\">stackoverflow.com/questions/41867228/&hellip;</a> Clarified it much more for me. The issue is if you have a spurious wake that gets interrupted. You end up reading the stale state (no notify) but then you get signaled (which is a no-op since it\u2019s still checking the condition) and this you miss checking after the value is read."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1573682407, "post_id": 58846089, "comment_id": 103966189, "body": "Thanks for listening, removed my comments as they not related anymore"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1573682520, "post_id": 58846089, "comment_id": 103966238, "body": "Just remark, <code>notify()</code> does not have to be called under mutex lock, it can be done after unlock. Either way is right, it may change behavior on high load."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": false, "score": 3, "last_activity_date": 1573682251, "last_edit_date": 1573682251, "creation_date": 1573681449, "answer_id": 58846089, "question_id": 58845679, "link": "https://stackoverflow.com/questions/58845679/is-condition-variable-notify-a-synchronization-point/58846089#58846089", "title": "Is condition_variable.notify a synchronization point?", "body": "<p>Writing to a non-atomic variable without synchronization is UB. However, making <code>signalled</code> an <code>atomic&lt;bool&gt;</code> will not solve the problem.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/thread/condition_variable\" rel=\"nofollow noreferrer\">C++ reference</a> on <code>std::condition_variable</code> reads:</p>\n\n<blockquote>\n  <p>Even if the shared variable is atomic, it must be modified under the mutex in order to correctly publish the modification to the waiting thread. </p>\n</blockquote>\n\n<p>You should do this:</p>\n\n<pre><code>bool signalled = false;\n\nvoid thread2...N()\n{\n    std::unique_lock l(mutex);\n    signalled = true;\n    cv.notify_all();\n}\n</code></pre>\n\n<p>Related questions: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/38185016/mutex-protecting-stdcondition-variable\">Mutex protecting std::condition_variable</a> </li>\n<li><a href=\"https://stackoverflow.com/questions/38147825/shared-atomic-variable-is-not-properly-published-if-it-is-not-modified-under-mut\">Shared atomic variable is not properly published if it is not modified under mutex</a></li>\n<li><a href=\"https://stackoverflow.com/questions/41867228/why-do-i-need-to-acquire-a-lock-to-modify-a-shared-atomic-variable-before-noti\">Why do I need to acquire a lock to modify a shared &quot;atomic&quot; variable before notifying condition_variable</a></li>\n</ul>\n"}], "owner": {"reputation": 2950, "user_id": 180697, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5cc380d3aa34a863217170ef37cadcf8?s=128&d=identicon&r=PG", "display_name": "Vitali", "link": "https://stackoverflow.com/users/180697/vitali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1573682251, "creation_date": 1573679540, "last_edit_date": 1573681447, "question_id": 58845679, "link": "https://stackoverflow.com/questions/58845679/is-condition-variable-notify-a-synchronization-point", "title": "Is condition_variable.notify a synchronization point?", "body": "<p>Let's say I have something like this:</p>\n\n<pre><code>bool signalled = false;\nstd::condition_variable cv;\nvoid thread1() {\n  while (true) {\n    std::unique_lock l(mutex);\n    cv.wait_until(l, [] { return signalled; });\n    return;\n  }\n}\n\nvoid thread2...N() {\n  signalled = true;\n  cv.notify_all();\n}\n</code></pre>\n\n<p>Is that considered thread-safe? The boolean may be set to true in many threads to interrupt thread1.</p>\n\n<p>Edit: If not thread-safe I\u2019m looking for a description of what the race condition is so I can better understand the underlying issue and fill in a knowledge gap.</p>\n"}, {"tags": ["c++", "algorithm", "tree", "binary-tree", "binary-search-tree"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 1, "creation_date": 1573680492, "post_id": 58845661, "comment_id": 103965368, "body": "Can you elaborate what you mean by &quot;doesn&#39;t work&quot;?  And we&#39;ll need to see more code:  the definition of <code>SplayTree</code> and <code>splay</code> at a minimum.  <code>find</code> and your insertion methods may also be useful.  <a href=\"https://stackoverflow.com/posts/58845661/edit\">Edit</a> your question to include these additional details."}], "owner": {"reputation": 23, "user_id": 12369246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2c837eb217ef010e99a280ede9a132f?s=128&d=identicon&r=PG&f=1", "display_name": "archi1998", "link": "https://stackoverflow.com/users/12369246/archi1998"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1573680966, "creation_date": 1573679466, "last_edit_date": 1573680966, "question_id": 58845661, "link": "https://stackoverflow.com/questions/58845661/implementation-splay-tree", "title": "Implementation Splay tree", "body": "<p>A splay tree is a self-balancing binary search tree with the additional property that recently accessed elements are quick to access again. It performs basic operations such as insertion, look-up and removal in O(log n) amortized time. For many sequences of non-random operations, splay trees perform better than other search trees, even when the specific pattern of the sequence is unknown.</p>\n\n<p>I have some problems with remove method in splay tree. Can anyone help me?</p>\n\n<pre><code>struct Node {\n    int key;\n    string value;\n    Node* parent;\n    Node* left;\n    Node* right;\n\n    Node(int key, const string&amp; value) {\n        this-&gt;key = key;\n        this-&gt;parent = nullptr;\n        this-&gt;left = nullptr;\n        this-&gt;right = nullptr;\n        this-&gt;value = value;\n    }\n};\n\nvoid SplayTree::zig(Node *node) {\n    Node *p = node-&gt;parent;\n    node-&gt;parent = nullptr;\n    p-&gt;parent = node;\n    Node *c = nullptr;\n\n    if (p-&gt;left == node) {\n        c = node-&gt;right;\n        node-&gt;right = p;\n        p-&gt;left = c;\n    } else {\n        c = node-&gt;left;\n        node-&gt;left = p;\n        p-&gt;right = c;\n    }\n\n    if (c != nullptr) {\n        c-&gt;parent = p;\n    }\n}\n\nvoid SplayTree::zigZig(Node *node) {\n    Node *p = node-&gt;parent;\n    Node *pp = p-&gt;parent;\n    node-&gt;parent = pp-&gt;parent;\n    p-&gt;parent = node;\n\n    if (p-&gt;left == node) {\n        Node *c = node-&gt;right;\n        Node *pc = p-&gt;right;\n\n        node-&gt;right = p;\n\n        p-&gt;left = c;\n        p-&gt;right = pp;\n\n        pp-&gt;parent = p;\n        pp-&gt;left = pc;\n\n        if (node-&gt;parent != nullptr) {\n            if (node-&gt;parent-&gt;left == pp)\n                node-&gt;parent-&gt;left = node;\n            else\n                node-&gt;parent-&gt;right = node;\n        }\n\n        if (c != nullptr)\n            c-&gt;parent = p;\n\n        if (pc != nullptr)\n            pc-&gt;parent = pp;\n    }\n    else {\n        Node *c = p-&gt;left;\n        Node *pc = node-&gt;left;\n\n        node-&gt;left = p;\n\n        p-&gt;left = pp;\n        p-&gt;right = pc;\n\n        pp-&gt;parent = p;\n        pp-&gt;right = c;\n\n        if (node-&gt;parent != nullptr) {\n            if (node-&gt;parent-&gt;left == pp)\n                node-&gt;parent-&gt;left = node;\n            else\n                node-&gt;parent-&gt;right = node;\n        }\n\n        if (c != nullptr)\n            c-&gt;parent = pp;\n\n        if (pc != nullptr)\n            pc-&gt;parent = p;\n    }\n}\n\nvoid SplayTree::zigZag(Node *node) {\n    Node *p = node-&gt;parent;\n    Node *pp = p-&gt;parent;\n    Node *cl = node-&gt;left;\n    Node *cr = node-&gt;right;\n    node-&gt;parent = pp-&gt;parent;\n    p-&gt;parent = node;\n    pp-&gt;parent = node;\n\n    if (p-&gt;right == node) {\n        node-&gt;left = p;\n        node-&gt;right = pp;\n        p-&gt;right = cl;\n        pp-&gt;left = cr;\n\n        if (cl != nullptr)\n            cl-&gt;parent = p;\n\n        if (cr != nullptr)\n            cr-&gt;parent = pp;\n    } else {\n        node-&gt;left = pp;\n        node-&gt;right = p;\n        p-&gt;left = cr;\n        pp-&gt;right = cl;\n\n        if (cl != nullptr)\n            cl-&gt;parent = pp;\n\n        if (cr != nullptr)\n            cr-&gt;parent = p;\n    }\n    if (node-&gt;parent != nullptr) {\n        if (node-&gt;parent-&gt;left == pp)\n            node-&gt;parent-&gt;left = node;\n        else\n            node-&gt;parent-&gt;right = node;\n    }\n}\n\nvoid SplayTree::splay(Node *node) {\n    while (node-&gt;parent != nullptr) {\n        Node *p = node-&gt;parent;\n        Node *pp = p-&gt;parent;\n        if (pp == nullptr)\n            zig(node);\n        else if ((pp-&gt;left == p &amp;&amp; p-&gt;left == node) || (pp-&gt;right == p &amp;&amp; p-&gt;right == node))\n            zigZig(node);\n        else\n            zigZag(node);\n    }\n    this-&gt;root = node;\n}\n\nSplayTree::SplayTree() {\n    this-&gt;root = nullptr;\n}\n\nNode* SplayTree::find(int key) {\n    Node *res = nullptr;\n    Node *cur = this-&gt;root;\n    Node *prev = nullptr;\n    while (cur != nullptr) {\n        prev = cur;\n        if (key &lt; cur-&gt;key)\n            cur = cur-&gt;left;\n        else if (key &gt; cur-&gt;key)\n            cur = cur-&gt;right;\n        else {\n            res = cur;\n            break;\n        }\n    }\n    if (res != nullptr)\n        splay(res);\n    else if (prev != nullptr)\n        splay(prev);\n    return res;\n}\n\nvoid SplayTree::insert(int key, const string&amp; value) {\n    if (root == nullptr) {\n        root = new Node(key, value);\n        return;\n    }\n    Node *cur = this-&gt;root;\n    while (cur != nullptr) {\n        if (key &lt; cur-&gt;key) {\n            if (cur-&gt;left == nullptr) {\n                Node *node = new Node(key, value);\n                cur-&gt;left = node;\n                node-&gt;parent = cur;\n                splay(node);\n                return;\n            }\n            else\n                cur = cur-&gt;left;\n        }\n        else if (key &gt; cur-&gt;key) {\n            if (cur-&gt;right == nullptr) {\n                Node *node = new Node(key, value);\n                cur-&gt;right = node;\n                node-&gt;parent = cur;\n                splay(node);\n                return;\n            }\n            else\n                cur = cur-&gt;right;\n        } else {\n            splay(cur);\n            return;\n        }\n    }\n}\n\nvoid SplayTree::remove(int key) {\n    Node *n = find(key);\n    if (n == nullptr) {\n        return;\n    }\n    Node *l = n-&gt;left;\n    Node *r = n-&gt;right;\n    if (l == nullptr &amp;&amp; r == nullptr) {\n        this-&gt;root = nullptr;\n    } else if (l == nullptr) {\n        Node *k = r;\n        while (k-&gt;left != nullptr)\n            k = k-&gt;left;\n        splay(k);\n    } else {\n        Node *k = l;\n        while (k-&gt;right != nullptr)\n            k = k-&gt;right;\n        splay(k);\n        if (r != nullptr) {\n            k-&gt;right = r;\n            r-&gt;parent = k;\n        }\n    }\n    delete n;\n}\n\n</code></pre>\n\n<p>When I added key 1 and 2. I am trying delete node with 1. Code doesn't work correctly, because node with key 1 didn't delete;</p>\n"}, {"tags": ["c++", "stl", "visual-studio-2019", "icc"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 10, "creation_date": 1573682263, "post_id": 58845595, "comment_id": 103966138, "body": "I can&#39;t reproduce with GCC, Clang, or Stock VS 16.2.0.  The code itself is well defined so it is either a VS or ICC bug.  If you compile the code using cl instead of icl do you get the same results?"}, {"owner": {"reputation": 2247, "user_id": 776237, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b684c1a575668cbb58a1df21e1962b8e?s=128&d=identicon&r=PG", "display_name": "dom_beau", "link": "https://stackoverflow.com/users/776237/dom-beau"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1573741033, "post_id": 58845595, "comment_id": 103988823, "body": "@NathanOliver-ReinstateMonica If I try with <i>cl</i>, I always obtain the expected 0..17, whatever the compile switches I use. So you suspect an  ICC bug?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1573741286, "post_id": 58845595, "comment_id": 103988980, "body": "Looks that way.  I wonder if it is trying to do some sort of vectorization and that is breaking the insertion."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 1, "creation_date": 1575937667, "post_id": 58845595, "comment_id": 104726227, "body": "I smell undefined behavior in your code somewhere. Where exactly? I couldn&#39;t tell you. What I can tell you is that your first function is only well defined if <code>values</code> is a multiple of 3. Otherwise, it will overrun the buffer. You seem to be doing that here, so you should be okay in <b>this</b> example. But it is something to be wary of."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1575938028, "post_id": 58845595, "comment_id": 104726297, "body": "Note: It may not even be in the code portion you posted."}, {"owner": {"reputation": 2247, "user_id": 776237, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b684c1a575668cbb58a1df21e1962b8e?s=128&d=identicon&r=PG", "display_name": "dom_beau", "link": "https://stackoverflow.com/users/776237/dom-beau"}, "edited": false, "score": 0, "creation_date": 1575995981, "post_id": 58845595, "comment_id": 104750803, "body": "@Chipster Well actually I posted a snippet that shows the problem. I&#39;m perfectly aware of the weakness you put the emphasis to. If you &quot;smell&quot; something, you&#39;re right. The code is perfectly defined and must work. &quot;Must&quot; in the sense &quot;to respect C++&quot;... as far as I know. A bug ticket is opened at Intel for that."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1596611873, "post_id": 58845595, "comment_id": 111863463, "body": "cannot reproduce with ICC on godbolt either (but that&#39;s probably ICC for Linux)."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1596622318, "post_id": 58845595, "comment_id": 111868367, "body": "Try printing map size and/or content after each step, perhaps it will clarify something."}], "answers": [{"comments": [{"owner": {"reputation": 4261, "user_id": 2893496, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WMdEs.png?s=128&g=1", "display_name": "v010dya", "link": "https://stackoverflow.com/users/2893496/v010dya"}, "edited": false, "score": 1, "creation_date": 1611987865, "post_id": 63259804, "comment_id": 116631352, "body": "Didn&#39;t you mean to say <code>i+2 &lt; values.size()</code> ?"}, {"owner": {"reputation": 840, "user_id": 3736444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e03aabe6f497b7807ffa19d11e1fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Jarek C", "link": "https://stackoverflow.com/users/3736444/jarek-c"}, "reply_to_user": {"reputation": 4261, "user_id": 2893496, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/WMdEs.png?s=128&g=1", "display_name": "v010dya", "link": "https://stackoverflow.com/users/2893496/v010dya"}, "edited": false, "score": 0, "creation_date": 1612159413, "post_id": 63259804, "comment_id": 116669551, "body": "@v010dya, you&#39;re right. thanks."}, {"owner": {"reputation": 153, "user_id": 10782068, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vyoZs.jpg?s=128&g=1", "display_name": "OLNG", "link": "https://stackoverflow.com/users/10782068/olng"}, "edited": false, "score": 0, "creation_date": 1612735233, "post_id": 63259804, "comment_id": 116853205, "body": "i+3 &lt; values.size();"}], "tags": [], "owner": {"reputation": 840, "user_id": 3736444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12e03aabe6f497b7807ffa19d11e1fdd?s=128&d=identicon&r=PG&f=1", "display_name": "Jarek C", "link": "https://stackoverflow.com/users/3736444/jarek-c"}, "is_accepted": false, "score": -1, "last_activity_date": 1612159386, "last_edit_date": 1612159386, "creation_date": 1596609963, "answer_id": 63259804, "question_id": 58845595, "link": "https://stackoverflow.com/questions/58845595/using-stdmap-should-be-deterministic-or-not/63259804#63259804", "title": "Using std::map should be deterministic or not?", "body": "<p>Just guessing that there could be an optimization related to <code>for(...; i+=3)</code></p>\n<p>I see that your use-case has the number of items dividable by 3, but anyway I would fix a bug in your code for more general cases:</p>\n<pre><code>{\n  std::map&lt;int, int&gt;  myMap;\n  for (int i = 0; (i + 2) &lt; values.size(); i+=3)  // ignore the possibly incomplete last triplet\n</code></pre>\n<p>I know it is not directly related to your problem, but maybe this fix triggers something in the compiler optimizer to build a correct code.</p>\n"}, {"tags": [], "owner": {"reputation": 18221, "user_id": 1439305, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/gNHmR.jpg?s=128&g=1", "display_name": "Audrius Meskauskas", "link": "https://stackoverflow.com/users/1439305/audrius-meskauskas"}, "is_accepted": false, "score": 0, "last_activity_date": 1598208790, "creation_date": 1598208790, "answer_id": 63550868, "question_id": 58845595, "link": "https://stackoverflow.com/questions/58845595/using-stdmap-should-be-deterministic-or-not/63550868#63550868", "title": "Using std::map should be deterministic or not?", "body": "<p>I cannot reproduce this but in either case, for peace of mind you could populate the map much simpler:</p>\n<pre><code>  for (auto i: values) {\n    myMap[i] = 0;\n  }\n</code></pre>\n<p>There is no need to use <code>myMap.insert(std::make_pair(key, value))</code> just to add an entry to the map.</p>\n<p>Otherwise your code produces the expected output (0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17 twice, the sequence is obviously sorted because this is the ordered map) if compiled with gcc 8.4.0 under Ubuntu. I suspect this is simply a bug of that particular compiler you use. It would be beneficial to report the bug to the compiler developers so that they could fix it.</p>\n"}, {"tags": [], "owner": {"reputation": 794, "user_id": 14569106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e78c9d52406d1c27c6e37742a143818?s=128&d=identicon&r=PG&f=1", "display_name": "Secundi", "link": "https://stackoverflow.com/users/14569106/secundi"}, "is_accepted": false, "score": 0, "last_activity_date": 1607360069, "last_edit_date": 1607360069, "creation_date": 1607348510, "answer_id": 65182831, "question_id": 58845595, "link": "https://stackoverflow.com/questions/58845595/using-stdmap-should-be-deterministic-or-not/65182831#65182831", "title": "Using std::map should be deterministic or not?", "body": "<p>Syntactically, your code is fine. I see no possible undefined behavior here (as far as you did no further hidden crazy hacks like redefining size_t/map, modifying standard headers etc.).</p>\n<p>But:</p>\n<p>Since I experienced loop-optimizer issues with older compilers due to lines like this one</p>\n<pre><code>for (int i = 0; i &lt; values.size(); ++i)\n</code></pre>\n<p>where you mixed signed and unsigned integers / data type ranges, I suspect your intel compiler might have an issue with loop-unrolling here. Maybe it's also due to an according issue inside the loop and the subscript operator usage there. Typical fundamental issue here: Misassumption about allowed register usage. Can you try your code again with a strict size_t usage here?</p>\n<p>Further idea:</p>\n<p>Can you reproduce the issue if your 'static' pre-defined values to print are created in a very dynamic way instead of hard-code construction? That might at least exclude a lot of possible underlying reasons if you cannot.</p>\n"}], "owner": {"reputation": 2247, "user_id": 776237, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b684c1a575668cbb58a1df21e1962b8e?s=128&d=identicon&r=PG", "display_name": "dom_beau", "link": "https://stackoverflow.com/users/776237/dom-beau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 529, "favorite_count": 2, "answer_count": 3, "score": 19, "last_activity_date": 1612159386, "creation_date": 1573679166, "question_id": 58845595, "link": "https://stackoverflow.com/questions/58845595/using-stdmap-should-be-deterministic-or-not", "title": "Using std::map should be deterministic or not?", "body": "<p>I'm facing a strange behaviour using Intel C++ compiler 2019 update 5. When I fill a <code>std::map</code> it seems to lead to a non deterministic (?) result. The <em>stl</em> is from VS2019 16.1.6 in which ICC is embedded. I am on Windows 10.0.17134.286.</p>\n\n<p>My code:</p>\n\n<pre><code>#include &lt;map&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nstd::map&lt;int, int&gt; AddToMapWithDependencyBetweenElementsInLoop(const std::vector&lt;int&gt;&amp; values)\n{\n    std::map&lt;int, int&gt;  myMap;\n    for (int i = 0; i &lt; values.size(); i+=3)\n    {\n        myMap.insert(std::make_pair(values[i], myMap.size()));\n        myMap.insert(std::make_pair(values[i + 1], myMap.size()));\n        myMap.insert(std::make_pair(values[i + 2], myMap.size()));\n    }\n    return myMap;\n}\n\nstd::map&lt;int, int&gt; AddToMapOnePerLoop(const std::vector&lt;int&gt;&amp; values)\n{\n    std::map&lt;int, int&gt;  myMap;\n    for (int i = 0; i &lt; values.size(); ++i)\n    {\n        myMap.insert(std::make_pair(values[i], 0));\n    }\n    return myMap;\n}\n\nint main()\n{\n    std::vector&lt;int&gt; values{ 6, 7,  15, 5,  4,  12, 13, 16, 11, 10, 9,  14, 0,  1,  2,  3,  8,  17 };\n\n    {\n        auto myMap = AddToMapWithDependencyBetweenElementsInLoop(values);\n        for (const auto&amp; keyValuePair : myMap)\n        {\n            std::cout &lt;&lt; keyValuePair.first &lt;&lt; \", \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n\n    {\n        auto myMap = AddToMapOnePerLoop(values);\n        for (const auto&amp; keyValuePair : myMap)\n        {\n            std::cout &lt;&lt; keyValuePair.first &lt;&lt; \", \";\n        }\n        std::cout &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>I simply wanted to perform a test so I call directly <em>icl</em> from the command line:</p>\n\n<pre><code>$ icl /nologo mycode.cpp\n$ mycode.exe\n0, 1, 2, 3, 4, 5, 6, 7, 11, 12, 13, 14, 15, 16, 17,\n0, 1, 2, 3, 4, 5, 6, 7, 12, 13, 14, 15, 16, 17\n</code></pre>\n\n<p>Curious. I expected to have 18 entries and I got 15 and 14 (depending on the insertion method, see the code).</p>\n\n<pre><code>$ icl /nologo /EHsc mycode.cpp\n$ mycode.exe\n0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 11, 12, 13, 14, 15, 16, 17,\n0, 1, 2, 3, 4, 5, 6, 7, 12, 13, 14, 15, 16, 17\n</code></pre>\n\n<p>Still curious, now I got 17 and 14 entries rather than 18 and 18!</p>\n\n<pre><code>$ icl /nologo /Od mycode.cpp\n$ mycode.exe\n0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\n0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17,\n</code></pre>\n\n<p>Now, with no optimization, I got 18/18, as expected.</p>\n\n<p>My question is two-fold: 1) is it normal to get such results and 2) if it's not (what I suspect) what did I do wrong? I tought a simple call to the compiler would call the <code>std::map::insert()</code> function correctly?</p>\n\n<p>Does the problem lies in the <code>for(){}</code>???</p>\n\n<p>Thanks for helping me understanding this problem and finding a solution!</p>\n"}, {"tags": ["c++", "while-loop"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1573679088, "post_id": 58845562, "comment_id": 103964731, "body": "<code>RollValues[i] </code> could represent a bug. How big is this array?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1573679275, "post_id": 58845562, "comment_id": 103964816, "body": "After first iteration, <code>i</code> will be equal to <code>2</code>, but nothing was read into <code>RollValues[2]</code>. You only read two values per loop and increment <code>i</code> 3 times."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1573679297, "post_id": 58845562, "comment_id": 103964826, "body": "<code>RollValues[i]</code> is being tested before inserting values into <code>RollValues[i]</code>. You want to test after. Probably after every insert, not every two inserts.."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1573679299, "post_id": 58845562, "comment_id": 103964829, "body": "We can&#39;t see anything suggesting that the program should terminate. The function should return if the rest of the logic is sound though."}, {"owner": {"reputation": 6607, "user_id": 6717178, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QbOLx.jpg?s=128&g=1", "display_name": "JHBonarius", "link": "https://stackoverflow.com/users/6717178/jhbonarius"}, "edited": false, "score": 0, "creation_date": 1573679349, "post_id": 58845562, "comment_id": 103964856, "body": "Don&#39;t you see that you increase <code>i</code> twice after the user input? When you check <code>RollValues[i] != -1</code> you are no longer pointing to the element you set to -1. This is a very weird program. You should start with good C++ book. Use vectors and so."}, {"owner": {"reputation": 1, "user_id": 11559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hOUd8PfuOQE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reX4hgn03PbUNFIskJxMxAc7jcSug/mo/photo.jpg?sz=128", "display_name": "DarkLordSauron", "link": "https://stackoverflow.com/users/11559298/darklordsauron"}, "edited": false, "score": 0, "creation_date": 1573679607, "post_id": 58845562, "comment_id": 103964969, "body": "My expectation is to continue taking in role values until &quot;-1&quot; is entered by the user. &quot;-1&quot; is like a hotkey I am trying to create that will end the program."}, {"owner": {"reputation": 1, "user_id": 11559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hOUd8PfuOQE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reX4hgn03PbUNFIskJxMxAc7jcSug/mo/photo.jpg?sz=128", "display_name": "DarkLordSauron", "link": "https://stackoverflow.com/users/11559298/darklordsauron"}, "edited": false, "score": 0, "creation_date": 1573679728, "post_id": 58845562, "comment_id": 103965023, "body": "I attempted to look at &#39;RollValues[i]&#39;  for that -1 value but realized im only looking at the index value."}, {"owner": {"reputation": 1, "user_id": 11559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hOUd8PfuOQE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reX4hgn03PbUNFIskJxMxAc7jcSug/mo/photo.jpg?sz=128", "display_name": "DarkLordSauron", "link": "https://stackoverflow.com/users/11559298/darklordsauron"}, "edited": false, "score": 0, "creation_date": 1573679956, "post_id": 58845562, "comment_id": 103965126, "body": "Removed the extra i++ at the end. Didn&#39;t proof read my code before submitting. This was not part of the problem."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hOUd8PfuOQE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reX4hgn03PbUNFIskJxMxAc7jcSug/mo/photo.jpg?sz=128", "display_name": "DarkLordSauron", "link": "https://stackoverflow.com/users/11559298/darklordsauron"}, "edited": false, "score": 0, "creation_date": 1573680266, "post_id": 58845730, "comment_id": 103965261, "body": "This did not solve my problem. I must use the function exactly as they are and cannot use vectors. Arrays only."}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 1, "user_id": 11559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hOUd8PfuOQE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reX4hgn03PbUNFIskJxMxAc7jcSug/mo/photo.jpg?sz=128", "display_name": "DarkLordSauron", "link": "https://stackoverflow.com/users/11559298/darklordsauron"}, "edited": false, "score": 0, "creation_date": 1573680718, "post_id": 58845730, "comment_id": 103965470, "body": "@DarkLordSauron  If you &quot;must use the function exactly as they are&quot; then it is what you pass into the function that makes the difference.  Make sure RollValues is initialized to all -1 in every spot except the last two so that the loop will continue until it gets to the end.  And why does the function pass in AttemptCount and then never use it?"}, {"owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "edited": false, "score": 2, "creation_date": 1573681276, "post_id": 58845730, "comment_id": 103965702, "body": "Given this interface, it is not possible for you to write a correct function that stays in bounds.  Sorry, if that&#39;s assigned that way, you&#39;re being taught unsafe practice.  If the array is populated with -1&#39;s, then when you get to your loop it&#39;ll stop before it starts because the condition is already false."}], "tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": false, "score": 2, "last_activity_date": 1573679765, "creation_date": 1573679765, "answer_id": 58845730, "question_id": 58845562, "link": "https://stackoverflow.com/questions/58845562/while-loop-not-ending-when-condition-is-met/58845730#58845730", "title": "While loop not ending when condition is met", "body": "<p>I removed lines from your function that are not part of the problem, but maybe this will clarify:</p>\n\n<pre><code>while(RollValues[i] != -1) {\n    cin &gt;&gt; RollValues[i];\n    i++;\n    cin &gt;&gt; RollValues[i];\n    i++;\n    i++;\n}\n</code></pre>\n\n<p>What is the value of <code>i</code> by the time the loop condition variable is tested?</p>\n\n<p>The first rollvalue entered is read into some place in the array, but then <code>i</code> is incremented, so if you read back from RollValues[i] you read from <em>a different place in memory</em>!  Not only that, you never look at the first roll before accepting the second.  And then you increment <code>i</code> yet again.  By the time you're back at the top of the loop, <code>i</code> has been advanced 3 times, and neither of the entered rolls is ever tested.</p>\n\n<p>You have other issues too, such as</p>\n\n<ul>\n<li><p>receiving an array has no \"size\" information associated, so you do not now how big of an array the caller provided.  Your code therefore cannot protect against overruning the memory.</p></li>\n<li><p>in your while loop, you advance 3 times per iteration, so even if your loop condition checks for boundary cases, you still could have walked off the end of the array <em>before</em> getting back to the top of the loop.</p></li>\n</ul>\n\n<p>Therefore, I suggest the following:</p>\n\n<p>1) pass in the size of your array into your function, or use a safer data structure, such as std::array or std::vector</p>\n\n<p>2) only process a single roll per loop, and check that you're within bounds before advancing.</p>\n\n<p>3) don't advance your index variable until you're done looking at the value in that place that it refers.</p>\n"}], "owner": {"reputation": 1, "user_id": 11559298, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-hOUd8PfuOQE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reX4hgn03PbUNFIskJxMxAc7jcSug/mo/photo.jpg?sz=128", "display_name": "DarkLordSauron", "link": "https://stackoverflow.com/users/11559298/darklordsauron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573679902, "creation_date": 1573678989, "last_edit_date": 1573679902, "question_id": 58845562, "link": "https://stackoverflow.com/questions/58845562/while-loop-not-ending-when-condition-is-met", "title": "While loop not ending when condition is met", "body": "<pre><code>void getPlayerRolls(int RollValues[], int&amp; AttemptCount) {\n    int i = 0;\n    int FrameNumber = 0;\n    int RollNumber = 0;\n\n    while(RollValues[i] != -1) {\n        FrameNumber++;\n\n        cout &lt;&lt; \"Frame # \" &lt;&lt; FrameNumber &lt;&lt; endl;\n        cout &lt;&lt; \"Roll #1 \"\n             &lt;&lt; \" \";\n        cin &gt;&gt; RollValues[i];\n        i++;\n\n        cout &lt;&lt; \"Roll #2 \"\n             &lt;&lt; \" \";\n        cin &gt;&gt; RollValues[i];\n        i++;\n\n        cout &lt;&lt; endl;\n\n    }\n}\n</code></pre>\n\n<p>My expectation is that when a -1 is entered for one of the roll values that the program terminates. I tried to create a while loop that works with an array but I am having trouble determining how to do this.  </p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 9551, "user_id": 9837301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9414V.png?s=128&g=1", "display_name": "JaMiT", "link": "https://stackoverflow.com/users/9837301/jamit"}, "is_accepted": false, "score": 0, "last_activity_date": 1573691099, "creation_date": 1573691099, "answer_id": 58847632, "question_id": 58845551, "link": "https://stackoverflow.com/questions/58845551/how-can-i-return-all-the-shortest-paths-with-tied-weight-using-bellman-ford-algo/58847632#58847632", "title": "How can I return all the shortest paths with tied weight using bellman-ford algorithm?", "body": "<p>Looking at this more abstractly, you have something that can find a smallest thing, and you want to change it to also return all the other things equally small. (The same principles apply when looking for largest things. Sticking to \"smallest\", though, lends itself to an easier explanation.)</p>\n\n<p>Many algorithms for finding an extreme thing have some part where they ask \"is A more extreme than B\". For example, you might see code like the following:</p>\n\n<pre><code>if ( A &lt; B )\n    smallest = A;\n</code></pre>\n\n<p>Notice how this ignores ties (<code>A == B</code>) the same way it ignores worse results (<code>A &gt; B</code>). Hence, you get only the first of the best results returned. So this is something to change. However, you cannot simply change <code>A &lt; B</code> to <code>A &lt;= B</code>, since that would replace <code>B</code> with <code>A</code> in the case of a tie, the same way it is replaced when <code>A</code> is a better result. (You'd get only the <em>last</em> of the best results returned.) The three cases (less than, equal to, and greater than) need to be dealt with separately.</p>\n\n<p>Another aspect to look at is how the smallest thing is tracked. The above code snippet suggests that <code>smallest</code> has the same type as <code>A</code>; this is inadequate for tracking multiple solutions. You probably will want a container to track solutions. A <code>vector</code> is likely a reasonable choice.</p>\n\n<p>Putting this together, the above code might become something more like the following (after changing the declaration of <code>smallest</code>):</p>\n\n<pre><code>if ( A &lt; B ) {\n    smallest.clear();\n    smallest.push_back(A);\n}\nelse if ( A == B ) {\n    smallest.push_back(A);\n}\n</code></pre>\n\n<hr>\n\n<p><strong>How can this be applied to Bellman-Ford?</strong></p>\n\n<p>Fortunately the key part of the code is relatively easy since there are comments documenting it. The harder part is changing the code to track multiple results, as there are two pieces of data updated when a shorter path is found. It looks like <code>parent</code> is the data that needs to be expanded. Here is a new declaration for it:</p>\n\n<pre><code>vector&lt; vector&lt;int&gt; &gt; parent (N);\n</code></pre>\n\n<p>This uses an empty vector instead of <code>-1</code> to indicate \"no parent\". The check for shortest path can now become</p>\n\n<pre><code>if (distance[u] != INT_MAX) {\n    // if the distance to the destination v can be\n    // shortened by taking the edge u-&gt; v\n    if (distance[u] + w &lt; distance[v])\n    {\n        // update distance to the new lower value\n        distance[v] = distance[u] + w;\n        // forget the previous parent list.\n        parent[v].clear();\n    }\n    // if u-&gt; v is a way to get the shortest\n    // distance to the destination v.\n    if (distance[u] + w == distance[v])\n    {\n        // add u as a possible parent for v\n        parent[v].push_back(u);\n    }\n}\n</code></pre>\n\n<p>This differs a little from what the general approach in that there is no \"<code>else</code>\". It is the same logic, just arranged a bit differently. Note that when the first <code>if</code> clause is entered, the distance vector is updated so the second <code>if</code> clause is entered as well.</p>\n\n<p>I think that handling the found paths is a separate (and not trivial) question, so I'll leave it to you to figure out how to update <code>printPath()</code>. I will, though, give a version that preserves the old output (just the first of the shortest paths) while receiving the new results. This is not a recommendation so much as an illustration relating the new data structure to the old.</p>\n\n<pre><code>// Recursive function to print the path of (just) the first given vertex from source vertex.\nvoid printPath(vector&lt; vector&lt;int&gt; &gt; const &amp;parent, vector&lt;int&gt; const &amp;vlist)\n{\n    if (vlist.empty())\n        return;\n\n    int v = vlist.front();\n    printPath(parent, parent[v]);\n    cout &lt;&lt; v &lt;&lt; \" \";\n}\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 11778480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bb20dead808d8c0a7e4888c3e1d5c54?s=128&d=identicon&r=PG&f=1", "display_name": "Ryenra", "link": "https://stackoverflow.com/users/11778480/ryenra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 285, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573691099, "creation_date": 1573678908, "last_edit_date": 1573679126, "question_id": 58845551, "link": "https://stackoverflow.com/questions/58845551/how-can-i-return-all-the-shortest-paths-with-tied-weight-using-bellman-ford-algo", "title": "How can I return all the shortest paths with tied weight using bellman-ford algorithm?", "body": "<p>As title says, what I'm looking for is printing \"all the shortest paths\" that are tied by weight. </p>\n\n<p>Example:</p>\n\n<p>We have a graph with edges going from 0 -> 1 -> 3 that has 6 as weight, but we also have the path 0 -> 3 that has 6 as weight as well, the algorithm below only returns the first path, I would like to know if it is possible to return both or all the paths alike. Also is there a more efficient/elegant way of printing the shortest path. I took this code as example only, mine is very similar but prints only from source to last vertex.</p>\n\n<p>There is a similar question answered here, but I could not understand the code since I'm familiar with c++.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;iomanip&gt;\n#include &lt;climits&gt;\nusing namespace std;\n\n// Data structure to store graph edges\nstruct Edge\n{\n    int source, dest, weight;\n};\n\n// Recurive Function to print path of given vertex v from source vertex\nvoid printPath(vector&lt;int&gt; const &amp;parent, int v)\n{\n    if (v &lt; 0)\n        return;\n\n    printPath(parent, parent[v]);\n    cout &lt;&lt; v &lt;&lt; \" \";\n}\n\n// Function to run Bellman Ford Algorithm from given source\nvoid BellmanFord(vector&lt;Edge&gt; const &amp;edges, int source, int N)\n{\n    // count number of edges present in the graph\n    int E = edges.size();\n\n    // distance[] and parent[] stores shortest-path (least cost/path)\n    // information. Initially all vertices except source vertex have\n    // a weight of infinity and a no parent\n\n    vector&lt;int&gt; distance (N, INT_MAX);\n    distance[source] = 0;\n\n    vector&lt;int&gt; parent (N, -1);\n\n    int u, v, w, k = N;\n\n    // Relaxation step (run V-1 times)\n    while (--k)\n    {\n        for (int j = 0; j &lt; E; j++)\n        {\n            // edge from u to v having weight w     \n            u = edges[j].source, v = edges[j].dest;\n            w = edges[j].weight;\n\n            // if the distance to the destination v can be\n            // shortened by taking the edge u-&gt; v\n            if (distance[u] != INT_MAX &amp;&amp; distance[u] + w &lt; distance[v])\n            {\n                // update distance to the new lower value\n                distance[v] = distance[u] + w;\n\n                // set v's parent as u\n                parent[v] = u;\n            }\n        }\n    }\n\n    // Run Relaxation step once more for Nth time to\n    // check for negative-weight cycles\n    for (int i = 0; i &lt; E; i++)\n    {\n        // edge from u to v having weight w\n        u = edges[i].source, v = edges[i].dest;\n        w = edges[i].weight;\n\n        // if the distance to the destination u can be\n        // shortened by taking the edge u-&gt; v       \n        if (distance[u] != INT_MAX &amp;&amp; distance[u] + w &lt; distance[v])\n        {\n            cout &lt;&lt; \"Negative Weight Cycle Found!!\";\n            return;\n        }\n    }\n\n    for (int i = 0; i &lt; N; i++)\n    {\n        cout &lt;&lt; \"Distance of vertex \" &lt;&lt; i &lt;&lt; \" from the source is \"\n             &lt;&lt; setw(2) &lt;&lt; distance[i] &lt;&lt; \". It's path is [ \";\n        printPath(parent, i); cout &lt;&lt; \"]\" &lt;&lt; '\\n';\n    }\n}\n\n// main function\nint main()\n{\n    // vector of graph edges as per above diagram\n    vector&lt;Edge&gt; edges =\n    {\n        // (x, y, w) -&gt; edge from x to y having weight w\n        { 0, 1, 2 }, { 1, 3, 4 }, { 0, 3, 6 }\n    };\n\n    // Set maximum number of nodes in the graph\n    int N = 5;\n\n    // let source be vertex 0\n    int source = 0;\n\n    // run Bellman Ford Algorithm from given source\n    BellmanFord(edges, source, N);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "debugging", "visual-studio-2017", "mfc"], "comments": [{"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "edited": false, "score": 0, "creation_date": 1573680140, "post_id": 58845477, "comment_id": 103965202, "body": "It depends if you are including windows.h to make a windows executable or if you are making other kinds of projects.  For windows executables what about <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/debugapi/nf-debugapi-outputdebugstringw\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/api/debugapi/&hellip;</a>"}, {"owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "edited": false, "score": 1, "creation_date": 1573700217, "post_id": 58845477, "comment_id": 103970691, "body": "In the MFC program, you can also use the <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/mfc-debugging-techniques?view=vs-2019#BKMK_The_TRACE_macro\" rel=\"nofollow noreferrer\">TRACE macro</a> to output debugging information.The TRACE macro can output debugging information to the Output window during debugging."}], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": false, "score": 2, "last_activity_date": 1573679709, "creation_date": 1573679709, "answer_id": 58845718, "question_id": 58845477, "link": "https://stackoverflow.com/questions/58845477/when-running-an-mfc-application-is-there-a-way-to-output-to-a-console/58845718#58845718", "title": "When running an MFC application is there a way to output to a &quot;console&quot;?", "body": "<p>In Visual Studio when working on GUI programs the usual method for such is to use the _RPTX (where X is the number of varadic parameters) macros which when report type is _CRT_WARN print to the Output window within VS itself rather than use an external console window.</p>\n\n<p>For example:</p>\n\n<pre><code>_RPT1(_CRT_WARN, __FUNCTION__ \": hWnd: %#x\\r\\n\", m_hWnd);\n</code></pre>\n\n<p>Personally I prefer using the following (custom) macros which do not take the report type (I simple use _CRT_WARN) and also do away with the need to know the number of vararg parameters and also the ability to take more than 4 vararg parameters (the limit with the default macros). The _RPT macros have simply never been updated to take advantage of the variadic macro capable preprocessor:</p>\n\n<pre><code>#if !defined(_RPTW)\n#if defined(_DEBUG)\n#define _RPTW(pszFmt, ...) _CrtDbgReportW(_CRT_WARN, NULL, __LINE__, NULL, (pszFmt), __VA_ARGS__)\n#define _RPTWF(dest, fmt, ...) _CrtDbgReportW((dest), _T(__FILE__), __LINE__, NULL, (pszFmt), __VA_ARGS__)\n#else\n#define _RPTW(pszFmt, ...)\n#define _RPTWF(dest, pszFmt)\n#endif\n#endif // #if !defined(_RPTW)\n\n#if !defined(_RPTA)\n#if defined(_DEBUG)\n#define _RPTA(pszFmt, ...) _CrtDbgReport(_CRT_WARN, NULL, __LINE__, NULL, (pszFmt), __VA_ARGS__)\n#define _RPTAF(dest, fmt, ...) _CrtDbgReport((dest), __FILE__, __LINE__, NULL, (pszFmt), __VA_ARGS__)\n#else\n#define _RPTA(pszFmt, ...)\n#define _RPTAF(dest, pszFmt)\n#endif\n#endif // #if !defined(_RPTA)\n\n#if !defined(_RPTT)\n#if defined(_UNICODE)\n#define _RPTT _RPTW\n#define _RPTTF _RPTWF\n#else\n#define _RPTT _RPTA\n#define _RPTTF _RPTAF\n#endif\n#endif // #if !defined(_RPTT)\n</code></pre>\n\n<p>Using the custom macros the original example becomes:</p>\n\n<pre><code>_RPTA(__FUNCTION__ \": hWnd: %#x\\r\\n\", m_hWnd);\n</code></pre>\n\n<p>The original way does have the benefit of taking the report type as a parameter, using that output can be redirected to a window (as _ASSERT does), the output window (the default with _CRT_WARN) or to a trace file (requires calling _CrtSetReportMode and _CrtSetReportFile).</p>\n"}, {"tags": [], "owner": {"reputation": 5397, "user_id": 1482455, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/dZ1fN.jpg?s=128&g=1", "display_name": "YePhIcK", "link": "https://stackoverflow.com/users/1482455/yephick"}, "is_accepted": false, "score": 3, "last_activity_date": 1573729146, "last_edit_date": 1573729146, "creation_date": 1573680209, "answer_id": 58845830, "question_id": 58845477, "link": "https://stackoverflow.com/questions/58845477/when-running-an-mfc-application-is-there-a-way-to-output-to-a-console/58845830#58845830", "title": "When running an MFC application is there a way to output to a &quot;console&quot;?", "body": "<p><code>OutputDebugString()</code> from <code>debuapi.h</code> (just <code>#include &lt;windows.h&gt;</code>) is your friend. I usually wrap it up into a function like this (use <strong>A</strong> suffix for ASCII or <strong>W</strong> suffix for for UNICODE):</p>\n\n<pre><code>void dbgMsg(PCWSTR _format, ...)\n{\n    va_list args;\n    va_start(args, _format);\n\n    WCHAR msg[MAX_PATH];\n\n    if(SUCCEEDED(StringCbVPrintfW(msg, sizeof(msg), _format, args))){\n        OutputDebugStringW(msg);\n    }\n}\n</code></pre>\n\n<p></p>\n\n<p>That will output into <code>Output</code> window in IDE (next to <code>Call stack</code>, <code>Error List</code> and others)\n<a href=\"https://i.stack.imgur.com/shFBn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/shFBn.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 4147, "user_id": 1741137, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/44a67eefb0e6e5ce7f8a99a919ec8410?s=128&d=identicon&r=PG", "display_name": "user1741137", "link": "https://stackoverflow.com/users/1741137/user1741137"}, "edited": false, "score": 0, "creation_date": 1573805965, "post_id": 58848758, "comment_id": 104013617, "body": "That looks interesting because a dedicated output console will be free of the clutter of less interesting messages coming from the application."}], "tags": [], "owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "is_accepted": false, "score": 1, "last_activity_date": 1574046536, "last_edit_date": 1574046536, "creation_date": 1573700577, "answer_id": 58848758, "question_id": 58845477, "link": "https://stackoverflow.com/questions/58845477/when-running-an-mfc-application-is-there-a-way-to-output-to-a-console/58848758#58848758", "title": "When running an MFC application is there a way to output to a &quot;console&quot;?", "body": "<ol>\n<li>First of all you could try to call the <a href=\"https://docs.microsoft.com/en-us/windows/console/allocconsole\" rel=\"nofollow noreferrer\"><code>AllocConsole</code> function</a> to create a Console for your process.</li>\n<li>Send your output to the console via <a href=\"https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/cprintf-cprintf-l-cwprintf-cwprintf-l?view=vs-2019\" rel=\"nofollow noreferrer\"><code>_cprintf()</code></a>And don't forget to #include  wherever you use <code>_cprintf()</code></li>\n<li>If you need to close the console output, call <a href=\"https://docs.microsoft.com/en-us/windows/console/freeconsole\" rel=\"nofollow noreferrer\"><code>FreeConsole()</code></a>;</li>\n</ol>\n\n<p>For more details you could refer to <a href=\"https://www.codeproject.com/Articles/612/Creating-a-Console-for-Your-MFC-Apps-Debug-Output\" rel=\"nofollow noreferrer\">this link</a></p>\n"}], "owner": {"reputation": 4147, "user_id": 1741137, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/44a67eefb0e6e5ce7f8a99a919ec8410?s=128&d=identicon&r=PG", "display_name": "user1741137", "link": "https://stackoverflow.com/users/1741137/user1741137"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 2, "answer_count": 3, "score": 0, "last_activity_date": 1574046583, "creation_date": 1573678568, "last_edit_date": 1574046583, "question_id": 58845477, "link": "https://stackoverflow.com/questions/58845477/when-running-an-mfc-application-is-there-a-way-to-output-to-a-console", "title": "When running an MFC application is there a way to output to a &quot;console&quot;?", "body": "<p>I'm used to developing with C++ in Qt Creator, much more so than Visual Studio. In the former, you can do something like this </p>\n\n<pre><code>qDebug()&lt;&lt; my_trace_string; \n</code></pre>\n\n<p>to output my_trace_string to a \"console\" which can be handy so that you can see what is going on.\nI wondered if there is a Visual Studio window to which an application can easily write, independently of the dialogs and controls. This is complementary to the use of the debugger. It leaves a visual trace for example.</p>\n"}, {"tags": ["c++", "oop", "design-patterns", "garbage"], "comments": [{"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 4, "creation_date": 1573678606, "post_id": 58845463, "comment_id": 103964521, "body": "In Java, who is responsible for potential non-memory resources?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 5, "creation_date": 1573678664, "post_id": 58845463, "comment_id": 103964550, "body": "It depends entirely on you. The concept is called <i>ownership</i> - the owner of the resource is responsible for cleaning up, but it&#39;s up to you to decide who is the owner. However, in modern C++ you shouldn&#39;t use <code>new</code> - use smart pointers like <code>std::unique_ptr</code> or <code>std::shared_ptr</code>. This way you have clear ownership and you <i>never</i> have to worry about deleting objects."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573678669, "post_id": 58845463, "comment_id": 103964551, "body": "How does <code>AccGen</code> know that pointer was created with a call to <code>new</code>?  You could have given it the address of a non-allocated object, i.e. <code>Random random; AccGen accGen(&amp;random);</code> -- So you can&#39;t simply equate C++ to Java or try to figure out what to do with C++ given how Java operates."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1573678689, "post_id": 58845463, "comment_id": 103964560, "body": "This is the curse of manual memory management. The responsible party is whoever&#39;s been specified by the design to be the responsible party. The general rule of thumb is to <a href=\"https://stackoverflow.com/questions/6500313/why-should-c-programmers-minimize-use-of-new\">not design your way into problems like this</a>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 1, "creation_date": 1573679039, "post_id": 58845463, "comment_id": 103964709, "body": "Do you have <code>using Random = StdRandom*;</code> somewhere or what is <code>Random random=new StdRandom();</code> supposed to be doing?"}, {"owner": {"reputation": 29, "user_id": 6599396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ddda5f3d167c5acc5f9f02f6a04483a?s=128&d=identicon&r=PG&f=1", "display_name": "LeePai Chan", "link": "https://stackoverflow.com/users/6599396/leepai-chan"}, "edited": false, "score": 0, "creation_date": 1573748991, "post_id": 58845463, "comment_id": 103993890, "body": "Actually the code I posted was in Java. But I think my question is answered, the smart pointer. Thx everyone."}], "answers": [{"tags": [], "owner": {"reputation": 6260, "user_id": 10933809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IR53l.jpg?s=128&g=1", "display_name": "Oblivion", "link": "https://stackoverflow.com/users/10933809/oblivion"}, "is_accepted": false, "score": 3, "last_activity_date": 1573678668, "creation_date": 1573678668, "answer_id": 58845499, "question_id": 58845463, "link": "https://stackoverflow.com/questions/58845463/in-c-oop-who-is-responsible-to-delete-object-passed-to-constructor/58845499#58845499", "title": "In C++ OOP, who is responsible to delete object passed to constructor", "body": "<p>In C++ we use <a href=\"https://en.cppreference.com/book/intro/smart_pointers\" rel=\"nofollow noreferrer\">smart pointers</a> so then we don't care about delete.</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1573690638, "post_id": 58845960, "comment_id": 103968610, "body": "Probable typo: To keep the same (assumed) pointer syntax, <code>AccGen accGen{random};</code> should be <code>AccGen accGen{&amp;random};</code>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1573726751, "post_id": 58845960, "comment_id": 103980644, "body": "@user4581301 actually it was on purpose to have the last example without any pointers. Very likely a <code>StdRandom</code> is not copyable, but i didnt want to bloat the answer with more discussion"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 29, "user_id": 6599396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ddda5f3d167c5acc5f9f02f6a04483a?s=128&d=identicon&r=PG&f=1", "display_name": "LeePai Chan", "link": "https://stackoverflow.com/users/6599396/leepai-chan"}, "edited": false, "score": 1, "creation_date": 1573758824, "post_id": 58845960, "comment_id": 103998995, "body": "@LeePaiChan Smart pointer <i>could</i> be the answer. Unfortunately there is no way to be sure from the example given in the question. Nothing in the example suggests you need more than an <a href=\"https://en.wikipedia.org/wiki/Automatic_variable\" rel=\"nofollow noreferrer\">Automatic variable</a>. Remember that unlike in Java <a href=\"https://isocpp.org/wiki/faq/value-vs-ref-semantics\" rel=\"nofollow noreferrer\">you do not have to <code>new</code> objects</a>. Where possible let the runtime take care of the management for you."}], "tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 2, "last_activity_date": 1573681848, "last_edit_date": 1573681848, "creation_date": 1573680851, "answer_id": 58845960, "question_id": 58845463, "link": "https://stackoverflow.com/questions/58845463/in-c-oop-who-is-responsible-to-delete-object-passed-to-constructor/58845960#58845960", "title": "In C++ OOP, who is responsible to delete object passed to constructor", "body": "<blockquote>\n  <p>My question is, if I did the following in main()</p>\n\n<pre><code>Random random=new StdRandom();\nAccGen accGen=new AccGen(random);\n</code></pre>\n</blockquote>\n\n<p>The thing is: You dont. <code>Random</code> is a not a pointer type (unless it is a misleading alias for <code>SomeOtherType*</code>) but <code>new</code> returns you a pointer to the object it creates.</p>\n\n<p>If you need dynamic allocations you can do it manually with raw pointers and take the full responsibility of <code>delete</code>ing things you created via <code>new</code>:</p>\n\n<pre><code>Random* random = new StdRandom();\nAccGen* accGen = new AccGen(random);\n// ... do something ...\ndelete accGen;\ndelete random;\n</code></pre>\n\n<p>It helps to get acustomed to the concept of ownership. If one object is responsible to manage the lifetime of a second instance, it is said to \"own\" that instance. </p>\n\n<p>Further, resources are acquired in the constructor and released in the destructor (read about <a href=\"https://en.cppreference.com/w/cpp/language/raii\" rel=\"nofollow noreferrer\">RAII</a> if you want to know more). Hence, you could consider to let <code>accGen</code> take responsibility for deleting <code>random</code> in its destructor (*). </p>\n\n<p>Doing this manually is neither recommended nor necessary. Use <a href=\"https://en.cppreference.com/book/intro/smart_pointers\" rel=\"nofollow noreferrer\">smart pointers</a>. You can forget about <code>new</code> and <code>delete</code> if you just let smart pointers do the dirty work. There is no garbage in C++, though consistently using <code>std::shared_ptr</code>  is probably what is closest to using a garbage collector. </p>\n\n<p>Anyhow, if you do not need to allocate memory dynamically, then do not. C++ has value semantics. In C++ you get more than just references to objects, you get the objects.</p>\n\n<pre><code>int main {\n    StdRandom random;\n    AccGen accGen{random};\n    // ... use accGen ...\n}   // &lt;- end of scope\n</code></pre>\n\n<p>No need to delete anything. Objects on the stack get their destructor called when going out of scope. </p>\n\n<p>(*) = If a function gets passed a raw pointer, it is not expected to take ownership of the pointed to object. The function cannot know if it is allocated on the stack or dynamically.</p>\n"}], "owner": {"reputation": 29, "user_id": 6599396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ddda5f3d167c5acc5f9f02f6a04483a?s=128&d=identicon&r=PG&f=1", "display_name": "LeePai Chan", "link": "https://stackoverflow.com/users/6599396/leepai-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 58845960, "answer_count": 2, "score": 0, "last_activity_date": 1573915133, "creation_date": 1573678497, "last_edit_date": 1573915133, "question_id": 58845463, "link": "https://stackoverflow.com/questions/58845463/in-c-oop-who-is-responsible-to-delete-object-passed-to-constructor", "title": "In C++ OOP, who is responsible to delete object passed to constructor", "body": "<p>For example, </p>\n\n<blockquote>\n  <p>I have an account generator class need a random method to decide\n  username and password. Random has many ways to implement, so it is an\n  interface with many subclass. Account generator class accept Random\n  object in constructor.</p>\n</blockquote>\n\n<p>In Java we don't care the deletion of object. But I'm now doing it in C++.\nMy question is, if I did the following in main()</p>\n\n<pre><code>Random random=new StdRandom();\nAccGen accGen=new AccGen(random);\n</code></pre>\n\n<p>should I delete \"random\" in main(), or I should put it in the destructor of AccGen?</p>\n\n<blockquote>\n  <p>Edit: </p>\n  \n  <p>Even after the question is being answered very well, I think I may\n  still state the reason that why do I use pointer, in order to help\n  somebody facing the same problem.</p>\n  \n  <p>The reason I use pointer, is to apply many patterns like Factory and\n  Behavior. Non-pointer variable seems not able to be an Interface with\n  pure virtual method, which cannot present overrides.</p>\n  \n  <p>In a design view, I think the creator of an object is always\n  responsible for its deletion. That is why it makes me confused. All\n  the caller wants, it an AccGen object. I passed a random object is to\n  decide the implementation of Random, inside AccGen. Then Random object\n  is not a participant in caller's level, then why should the caller be\n  responsible for its deletion. But the fact is, in some case, the\n  random is useful in the following actions in caller's level. The given\n  example is really just an example.</p>\n  \n  <p>After a study of smart pointer, Unique pointer really is the solution\n  of my problem. It makes <strong>pointer become more specific</strong>, in terms of to state \n  the purpose of creating such pointer.</p>\n  \n  <p><strong>To summarize, if an object is useful after passed to constructor, then\n  the type would be pure pointer and with no deletion in destructor. If\n  the object is useless in caller's level, then the type should be\n  unique pointer.</strong></p>\n</blockquote>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1573678143, "post_id": 58845363, "comment_id": 103964336, "body": "More of a typo: <code>void generateTree(string fileName, int n)</code> needs to be added to the class. -&gt; <code>void NgramTree ::generateTree(string fileName, int n)</code>. Without the scope it&#39;s a free function."}], "answers": [{"tags": [], "owner": {"reputation": 195, "user_id": 12379711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j37tR.jpg?s=128&g=1", "display_name": "Lucie", "link": "https://stackoverflow.com/users/12379711/lucie"}, "is_accepted": false, "score": 0, "last_activity_date": 1573848921, "creation_date": 1573848921, "answer_id": 58884081, "question_id": 58845363, "link": "https://stackoverflow.com/questions/58845363/undefined-reference-to-ngramtree/58884081#58884081", "title": "undefined reference to `NgramTree...&#39;", "body": "<p>You need to add the class name in the cpp file. Write this, so that the compiler knows which class the method belongs to:</p>\n\n<pre><code>void NgramTree::generateTree(string fileName, int n) {\n    ...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12369129, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4a4H8RJNkQ4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfhDHmodUqTi642L16-_BDWQ-c7RA/photo.jpg?sz=128", "display_name": "Can Cavcav", "link": "https://stackoverflow.com/users/12369129/can-cavcav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573848921, "creation_date": 1573677993, "last_edit_date": 1573678178, "question_id": 58845363, "link": "https://stackoverflow.com/questions/58845363/undefined-reference-to-ngramtree", "title": "undefined reference to `NgramTree...&#39;", "body": "<p>My code gives:</p>\n\n<pre><code>undefined reference to `NgramTree::generateTree(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, int)'\ncollect2.exe: error: ld returned 1 exit status\n</code></pre>\n\n<p>error and I dont understand why.</p>\n\n<p>Here is a sample of my code.</p>\n\n<p><strong>NgramTree.cpp</strong></p>\n\n<pre><code>#include \"NgramTree.h\"\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n\nvoid generateTree(string fileName, int n)\n{\n    string line;\n    string ngram;\n    bool isWord = 1;\n    bool firstTime = 1;\n\n    ifstream myFile(fileName);\n\n    if (!myFile.is_open())\n        return;\n...\n</code></pre>\n\n<p><strong>NgramTree.h</strong></p>\n\n<pre><code>#include &lt;string&gt;\nclass NgramTree {\n    public :\n\n        NgramTree (){ };\n        ~NgramTree(){ };\n\n        void addNgram (std::string ngram );\n        int getTotalNgramCount ();\n        void printNgramFrequencies ();\n        bool isComplete ();\n        bool isFull ();\n        void generateTree(std::string fileName, int n);\n};\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include \"NgramTree.h\"\n\nusing namespace std;\n\n    int main(){\n\n        NgramTree tree;\n        tree.generateTree(\"example.txt\", 3);\n\n        return 0;\n\n    }\n</code></pre>\n"}, {"tags": ["c++", "opencv", "curve-fitting"], "comments": [{"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 1, "creation_date": 1573678349, "post_id": 58845307, "comment_id": 103964403, "body": "<code>approxPoly</code> uses the <a href=\"https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm\" rel=\"nofollow noreferrer\">Ramer-Douglas-Peucker algorithm</a>, which won&#39;t give you a mathematical function, just a set of points. Whether you use all of the points or just a few along the curve, you still need to use a method like <a href=\"https://en.wikipedia.org/wiki/Polynomial_regression\" rel=\"nofollow noreferrer\">polynomial regression</a> to get a continuous function that fits the curve."}, {"owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "reply_to_user": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1573691421, "post_id": 58845307, "comment_id": 103968796, "body": "Looking into it. I&#39;ll post here if I get to something"}], "owner": {"reputation": 1895, "user_id": 6129428, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f7dab9d0dec9975a9de1237243c42804?s=128&d=identicon&r=PG&f=1", "display_name": "Hadi GhahremanNezhad", "link": "https://stackoverflow.com/users/6129428/hadi-ghahremannezhad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573677708, "creation_date": 1573677708, "question_id": 58845307, "link": "https://stackoverflow.com/questions/58845307/opencv-how-to-fit-a-long-curve-to-a-short-curved-line", "title": "OpenCV - How to fit a long curve to a short curved line?", "body": "<p>I am trying to fit a curve to a short curved line in an image. For example, if the line is like this (suppose this is a curved line, not a straight one):</p>\n\n<p><a href=\"https://i.stack.imgur.com/bPf1P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bPf1P.png\" alt=\"enter image description here\"></a></p>\n\n<p>I would like the result to be something like this (the red curve):</p>\n\n<p><a href=\"https://i.stack.imgur.com/kksP4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kksP4.png\" alt=\"enter image description here\"></a></p>\n\n<p>When I try <code>approxPoly</code> it becomes somewhat like this (before gaussian blurring):</p>\n\n<p><a href=\"https://i.stack.imgur.com/Xq1HX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xq1HX.png\" alt=\"enter image description here\"></a></p>\n\n<p>I can smooth the image by blurring, but I still won't have the conttinious curve. Do I need to calculate an approximate equation for the curve or is there a simpler way?</p>\n"}, {"tags": ["c++", "artificial-intelligence"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1573677995, "post_id": 58845300, "comment_id": 103964272, "body": "Unsure about what you are asking. There doesn&#39;t seem to be a problem statement."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573678196, "post_id": 58845300, "comment_id": 103964356, "body": "Well, I see one potential bug: <code>npcHand.erase(npcHand.begin() + j);</code> -- What happens if the next letter is one that needs to be erased, i.e. is equal to <code>s</code>?  You skip over it, due to your loop unconditionally incrementing <code>j</code> on every iteration.  The <code>erase</code> moves all the items in the vector &quot;down&quot; by 1 spot, so <code>j</code> should stay where it is."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1573678256, "post_id": 58845300, "comment_id": 103964372, "body": "Unrelated: 1. <code>botVec.clear();</code> is not necessary. A newly default constructed vector <i>is</i> empty. 2. <code>npcHand = npcHandBack</code> implies that you made a backup - you didn&#39;t."}, {"owner": {"reputation": 3753, "user_id": 1718575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f36e2abcb1e57219a4b58d32c5bc6d?s=128&d=identicon&r=PG", "display_name": "NicholasM", "link": "https://stackoverflow.com/users/1718575/nicholasm"}, "edited": false, "score": 0, "creation_date": 1573678394, "post_id": 58845300, "comment_id": 103964419, "body": "I suggest writing a dedicated function to check whether a word can be constructed with the letters available in a hand.  Something like:  <code>bool can_place(const std::string&amp; word, const std::multiset&lt;char&gt;&amp; hand)</code>.  It would make your code and asking your question a bit simpler."}, {"owner": {"reputation": 57, "user_id": 9044538, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861401610566625/picture?type=large", "display_name": "Jo&#227;o Almeida", "link": "https://stackoverflow.com/users/9044538/jo%c3%a3o-almeida"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1573679440, "post_id": 58845300, "comment_id": 103964896, "body": "@user4581301 I&#39;ve updated my code and added a sc of the output, as you can see. As you can see, the third playable word shouldn&#39;t be there since I only have one &quot;a&quot; and it requires two."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1573679465, "post_id": 58845300, "comment_id": 103964915, "body": "One question is why you need to <code>erase</code> from the string to figure out if all of the letters of the hand is in the map.  Your method is slow compared to thinking of a way to do this linearly.   Also <i>do not post images</i>.  If someone wants to test a solution, they have to use an OCR to get your data."}, {"owner": {"reputation": 57, "user_id": 9044538, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861401610566625/picture?type=large", "display_name": "Jo&#227;o Almeida", "link": "https://stackoverflow.com/users/9044538/jo%c3%a3o-almeida"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573679944, "post_id": 58845300, "comment_id": 103965120, "body": "@PaulMcKenzie I&#39;ve edited my code, the problem that I have is that even words with letters that aren&#39;t on the go to the final vector. I&#39;m still a beginner as far as i can tell and i know that having nested for loops and while loops inside each other is REALLY slow, but i can&#39;t seem to find a different/more efficient way of comparing two blocks of data"}, {"owner": {"reputation": 57, "user_id": 9044538, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861401610566625/picture?type=large", "display_name": "Jo&#227;o Almeida", "link": "https://stackoverflow.com/users/9044538/jo%c3%a3o-almeida"}, "reply_to_user": {"reputation": 3753, "user_id": 1718575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f36e2abcb1e57219a4b58d32c5bc6d?s=128&d=identicon&r=PG", "display_name": "NicholasM", "link": "https://stackoverflow.com/users/1718575/nicholasm"}, "edited": false, "score": 0, "creation_date": 1573680212, "post_id": 58845300, "comment_id": 103965232, "body": "@NicholasM I have no idea what a multiset is, also, I don&#39;t want to change a lot of things because the game is already done. I&#39;m just trying to make it &quot;better&quot; by creating a simple AI"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573680616, "post_id": 58845300, "comment_id": 103965429, "body": "You should start by writing simple functions first that do the basic:  <code>bool is_good_word(const std::string&amp; scrabble_word, const std::string&amp; your_hand)</code>.  Then write that function that returns either <code>true</code> or <code>false</code> if the <code>your_hand</code> can be played given the <code>scrabble_word</code>.  Note that both arguments are <code>const</code>.  This is basically an &quot;interview&quot; question that some are asked when applying for a programming job.  Hint -- no erasing needs to be done.  Once you write that function, it&#39;s just a matter of calling it in a loop for each of the scrabble words."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573681041, "post_id": 58845300, "comment_id": 103965606, "body": "Hint #2 -- Start out with an array of 26 <code>int</code>&#39;s that hold the count of all of the letters in your hand."}, {"owner": {"reputation": 57, "user_id": 9044538, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861401610566625/picture?type=large", "display_name": "Jo&#227;o Almeida", "link": "https://stackoverflow.com/users/9044538/jo%c3%a3o-almeida"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573681085, "post_id": 58845300, "comment_id": 103965633, "body": "@PaulMcKenzie thank you for the tip :D I&#39;ll change it now and give you some feedback."}], "owner": {"reputation": 57, "user_id": 9044538, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861401610566625/picture?type=large", "display_name": "Jo&#227;o Almeida", "link": "https://stackoverflow.com/users/9044538/jo%c3%a3o-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573679610, "creation_date": 1573677677, "last_edit_date": 1573679610, "question_id": 58845300, "link": "https://stackoverflow.com/questions/58845300/compare-map-key-string-with-letters-in-a-vector", "title": "Compare map key (string) with letters in a vector", "body": "<p>I'm working on a project (AI in scrabble) and I'm trying to retrieve words from a map. I need to compare if there are enough letters in the \"hand\" to build the word. After comparing, I want to add that word (that is playable) into a vector.</p>\n\n<pre><code>void compareBotHand(std::vector&lt;std::string&gt; npcHand) //npcHand contains 7 random letters from the english alphabet\n    {\n        std::vector&lt;std::string&gt; botVec; //vector used to insert the playable words\n        int matcher; //check if letters in \"hand\" and letters in word match\n        std::map&lt;std::string, int&gt;::iterator it = fR_existing_words.begin();\n        while (it != fR_existing_words.end())\n        {\n            std::string fWord = it-&gt;first;\n            matcher = 0;\n            for (int i = 0; i &lt; fWord.length(); i++)\n            {\n                std::string s(1, fWord[i]); //convert char into string\n                for (int j = 0; j &lt; npcHand.size(); j++)\n                {\n                    if (npcHand[j] == fWord) //there are 1 letter words in the map\n                    {\n                        botVec.push_back(fWord);\n                    }\n                    else if (npcHand[j] == s)\n                    {\n                        matcher++;\n                    }\n                }\n                if (matcher == fWord.length()) //if the number of letters in hand are the same has in word, they match\n                {\n                    botVec.push_back(fWord);\n                }\n            }\n            it++;\n        }\n        std::cout &lt;&lt; \"Playable Words: \" &lt;&lt; std::endl;\n        for (int c = 0; c &lt; botVec.size(); c++)\n        {\n            std::cout &lt;&lt; botVec[c] &lt;&lt; std::endl;\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "emacs", "indentation"], "comments": [{"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 65926, "user_id": 324105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b1ad4e4bdf8feaef18504593914fe16?s=128&d=identicon&r=PG", "display_name": "phils", "link": "https://stackoverflow.com/users/324105/phils"}, "edited": false, "score": 0, "creation_date": 1573681837, "post_id": 58844859, "comment_id": 103965956, "body": "@phils major-mode is a variable defined in \u2018C source code\u2019.                                                                 Its value is \u2018c++-mode\u2019                                                                    Original value was fundamental-mode"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1573683783, "post_id": 58844859, "comment_id": 103966717, "body": "Check the value of <code>&#39;arglist-close</code> in <code>c-offsets-alist</code>.  Mine is set to <code>+cc-lineup-arglist-close</code>, which seems to match the behavior you are looking for.  (Though based on the description of that function, it seems like it <i>should</i> behave like your first example, so there may be more going on.)"}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1573683947, "post_id": 58844859, "comment_id": 103966795, "body": "@0x5453 would you please let me know how can I get the values of those variables?"}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "reply_to_user": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1573684102, "post_id": 58844859, "comment_id": 103966846, "body": "@0x5453 it shows: <code>c-offsets-alist is a variable defined in \u2018cc-vars.el\u2019. Its value is nil.</code>"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 1, "creation_date": 1573684339, "post_id": 58844859, "comment_id": 103966934, "body": "@mortezaipo You can use <code>C-h v c-offsets-alist</code> and then search for <code>arglist-close</code> manually.  Or <code>M-S-z (assq &#39;arglist-close c-offsets-alist)</code> to get the value directly.  Note that <code>c-offsets-alist</code> is buffer-local and is only set when you are in one of the C-based modes, so in your case you&#39;ll have to check it from a buffer that is currently in <code>c++-mode</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 0, "creation_date": 1573720514, "post_id": 58846968, "comment_id": 103977134, "body": "Thank you, when I enable <code>c-guess</code> it works fine, but when I copy the <code>c-guess-view</code> result in the emacs config, in the next restart it doesn&#39;t work again. How can I run <code>c-guess</code> in the Emacs startup? Also is it a good idea?"}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "reply_to_user": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 1, "creation_date": 1573745014, "post_id": 58846968, "comment_id": 103991352, "body": "no, don&#39;t call <code>c-guess</code> in your init -- give the style a name and call <code>(c-set-style &quot;your-style&quot;)</code> in your <code>c++-mode-hook</code>"}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "reply_to_user": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 0, "creation_date": 1574036650, "post_id": 58846968, "comment_id": 104075720, "body": "@mortezaipo if you are only defining <code>arglist-close</code>, you could also consider just using <code>(c-set-offset &#39;arglist-close &#39;c-lineup-close-paren)</code> in your hook"}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 0, "creation_date": 1574064770, "post_id": 58846968, "comment_id": 104082852, "body": "Now, everything works fine, but my google coding style doesn&#39;t work well :D Do you know how can I override just this attribute?"}, {"owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "reply_to_user": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 0, "creation_date": 1574066936, "post_id": 58846968, "comment_id": 104083758, "body": "did you try the code in my previous comment? that should just set the value for <code>arglist-close</code>"}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 0, "creation_date": 1574067503, "post_id": 58846968, "comment_id": 104083997, "body": "Yes, but it didn&#39;t work. I&#39;ve added the solution to my question post based on your guide and help and it works fine. But it ignores the whole Google coding style. Please check my question to see the solution."}, {"owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "edited": false, "score": 1, "creation_date": 1574073392, "post_id": 58846968, "comment_id": 104087200, "body": "I&#39;ve found it :D, I should change &quot;linux&quot; to &quot;google&quot;. Now, it works perfectly!"}], "tags": [], "owner": {"reputation": 28248, "user_id": 2415684, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e0fb12778bde5d0dddddd3b8b619681b?s=128&d=identicon&r=PG", "display_name": "Rorschach", "link": "https://stackoverflow.com/users/2415684/rorschach"}, "is_accepted": true, "score": 2, "last_activity_date": 1573686271, "creation_date": 1573686271, "answer_id": 58846968, "question_id": 58844859, "link": "https://stackoverflow.com/questions/58844859/emacs-indentation-with-sequential-parenthesis-in-c/58846968#58846968", "title": "Emacs indentation with sequential parenthesis in C++", "body": "<p><code>cc-mode</code> is able to intelligently guess the settings you want for <code>c-offsets-alist</code> based on the indentation in the buffer.  To do this, align the code in the buffer as you want it, and evaluate <kbd>M-x</kbd><code>c-guess</code>.</p>\n\n<p>Indent the buffer, and assuming it looks OK, you can see the guessed settings with <kbd>M-x</kbd><code>c-guess-view</code>.  Then, you could copy the entire style into your init somewhere, or cherry pick the relevant settings.</p>\n\n<p>Additionally, you can get an idea of which rules apply to a given line by running <kbd>M-x</kbd><code>c-show-syntactic-information</code> with the point positioned there.  Note, however, that this won't give all the relevant info since other rules/styles affect each others, but will tell identify <code>arglist-close</code> as the relevant rule in your example.</p>\n"}], "owner": {"reputation": 2617, "user_id": 2338672, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/iWxMP.jpg?s=128&g=1", "display_name": "mortymacs", "link": "https://stackoverflow.com/users/2338672/mortymacs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 58846968, "answer_count": 1, "score": 3, "last_activity_date": 1574073441, "creation_date": 1573675862, "last_edit_date": 1574073441, "question_id": 58844859, "link": "https://stackoverflow.com/questions/58844859/emacs-indentation-with-sequential-parenthesis-in-c", "title": "Emacs indentation with sequential parenthesis in C++", "body": "<p>Emacs auto indent on sequential parenthesis doesn't work fine:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>int main() {\n    something(int i)(\n        \"test\", \"something\"\n                    );\n}\n</code></pre>\n\n<p>How to fix this indentation to be like normal indentation:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>int main() {\n  something(int i)(\n      \"test\", \"something\"\n  );\n}\n</code></pre>\n\n<p>major mode info:</p>\n\n<ul>\n<li>major-mode is a variable defined in \u2018C source code\u2019.                                                                </li>\n<li>Its value is \u2018c++-mode\u2019                                                                                             </li>\n</ul>\n\n<p><strong>SOLUTION</strong>:</p>\n\n<p>Thanks, @pickle rick, and @0x5453,</p>\n\n<pre class=\"lang-lisp prettyprint-override\"><code>(c-add-style \"cc-style\"\n         '(\"linux\"  ;; it can be google or k&amp;r or other c-style.\n           (c-basic-offset . 2)\n           (c-offsets-alist\n        (arglist-close . c-lineup-close-paren))))\n(add-hook 'c++-mode-hook\n      (lambda()\n        (c-set-style \"cc-style\")))\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12317881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605d9786ee258958d629d89976e2594?s=128&d=identicon&r=PG&f=1", "display_name": "sexytoasteroven", "link": "https://stackoverflow.com/users/12317881/sexytoasteroven"}, "edited": false, "score": 0, "creation_date": 1573676302, "post_id": 58844836, "comment_id": 103963568, "body": "Thanks so much! When I do that, I get the error &quot;&#39;LinkedList&#39; is not a class, namespace, or enumeration&quot; on the same line. Do you know what could be causing that?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 11, "user_id": 12317881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605d9786ee258958d629d89976e2594?s=128&d=identicon&r=PG&f=1", "display_name": "sexytoasteroven", "link": "https://stackoverflow.com/users/12317881/sexytoasteroven"}, "edited": false, "score": 0, "creation_date": 1573676930, "post_id": 58844836, "comment_id": 103963835, "body": "@sexytoasteroven I cannot reproduce the error which would say <i>&#39;LinkedList&#39; is not a class, namespace, or enumeration</i>. All errors I get from your code are from missing <code>template</code> before most methods implementation. <a href=\"https://wandbox.org/permlink/8rdxntybY0Sd8FI2\" rel=\"nofollow noreferrer\">wandbox.org/permlink/8rdxntybY0Sd8FI2</a>"}, {"owner": {"reputation": 11, "user_id": 12317881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605d9786ee258958d629d89976e2594?s=128&d=identicon&r=PG&f=1", "display_name": "sexytoasteroven", "link": "https://stackoverflow.com/users/12317881/sexytoasteroven"}, "edited": false, "score": 0, "creation_date": 1573677274, "post_id": 58844836, "comment_id": 103963987, "body": "Strange! Thanks so much for all your help! I&#39;ll have to look more into this to see why I&#39;m getting that then. Thanks again!"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "reply_to_user": {"reputation": 11, "user_id": 12317881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605d9786ee258958d629d89976e2594?s=128&d=identicon&r=PG&f=1", "display_name": "sexytoasteroven", "link": "https://stackoverflow.com/users/12317881/sexytoasteroven"}, "edited": false, "score": 0, "creation_date": 1573677699, "post_id": 58844836, "comment_id": 103964151, "body": "@sexytoasteroven This could occur e.g. if you split the implementation into separate header and .cpp file and forgot to include header in .cpp file, but <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">you shouldn&#39;t do that</a>"}, {"owner": {"reputation": 11, "user_id": 12317881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605d9786ee258958d629d89976e2594?s=128&d=identicon&r=PG&f=1", "display_name": "sexytoasteroven", "link": "https://stackoverflow.com/users/12317881/sexytoasteroven"}, "edited": false, "score": 0, "creation_date": 1573695826, "post_id": 58844836, "comment_id": 103969733, "body": "Hmmm, yeah, it&#39;s all in the header file, so I don&#39;t think it&#39;s that."}], "tags": [], "owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "is_accepted": true, "score": 2, "last_activity_date": 1573676137, "last_edit_date": 1573676137, "creation_date": 1573675767, "answer_id": 58844836, "question_id": 58844798, "link": "https://stackoverflow.com/questions/58844798/expected-unqualified-id-error-when-making-my-code-a-template-when-it-did-not-h/58844836#58844836", "title": "&quot;Expected unqualified-id&quot; error when making my code a template when it did not have that error before making it into a template?", "body": "<p>That's too many templates. You only need single <code>template</code> keyword for single definition:</p>\n\n<pre><code>template &lt;typename DataType&gt; // template specifier\nLinkedList&lt;DataType&gt;&amp; // return type\nLinkedList&lt;DataType&gt;::operator= // name of function\n(const LinkedList &amp;aCopy) //arguments list\n{ \n    //body\n}\n</code></pre>\n\n<p>Typically, <code>template</code> keyword with template argument list is written in separate line, and then standard function definion (just as if there were no templates) follows:</p>\n\n<pre><code>template &lt;typename DataType&gt; \ntypename LinkedList&lt;DataType&gt;::Iterator LinkedList&lt;DataType&gt;::Iterator::operator++(DataType){\n    return *this;\n}\n</code></pre>\n\n<p>Single template specifier affects the whole definion that follows it, so it can be used in anywhere in: return type, class scope specifier(<code>LinkedList&lt;DataType&gt;::</code>), function argument list and function body (assuming that it's the function definition that follows <code>template</code>).</p>\n"}], "owner": {"reputation": 11, "user_id": 12317881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d605d9786ee258958d629d89976e2594?s=128&d=identicon&r=PG&f=1", "display_name": "sexytoasteroven", "link": "https://stackoverflow.com/users/12317881/sexytoasteroven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58844836, "answer_count": 1, "score": 0, "last_activity_date": 1573676137, "creation_date": 1573675570, "question_id": 58844798, "link": "https://stackoverflow.com/questions/58844798/expected-unqualified-id-error-when-making-my-code-a-template-when-it-did-not-h", "title": "&quot;Expected unqualified-id&quot; error when making my code a template when it did not have that error before making it into a template?", "body": "<p>I know questions like this have been asked a <em>ton</em>, so I am super sorry if my question is indeed identical to those. I've tried to find the solution to my problem, but none of the given solutions have resolved the error.</p>\n\n<p>I am trying to change a linked list class into a template. I am getting two of the same error (\"Expected unqualified-id\") when overloading operators. </p>\n\n<p>Below are the code snippets that are getting the error:</p>\n\n<pre><code>template &lt;typename DataType&gt; LinkedList&lt;DataType&gt;&amp; template &lt;typename DataType&gt;LinkedList&lt;DataType&gt;::operator=(const LinkedList &amp;aCopy){ //assignment operator //error seen here\n    while(root!=nullptr){\n        Node* oneBefore= root;\n        root =root-&gt;next;\n        delete oneBefore;\n    }\n    Node *newNode= new Node;\n    Node *temp=aCopy.root;\n    root=newNode;\n\n    while(temp!=nullptr){\n        newNode-&gt;value=temp-&gt;value;\n        temp=temp-&gt;next;\n        if(temp!=nullptr){\n            newNode-&gt;next=new Node;\n            newNode=newNode-&gt;next;\n        }\n        else{newNode-&gt;next=nullptr;}\n    }\n    return *this;\n}\n</code></pre>\n\n<pre><code>template &lt;typename DataType&gt; typename LinkedList&lt;DataType&gt;::Iterator template&lt;typename DataType&gt; LinkedList&lt;DataType&gt;::Iterator::operator++(DataType){//error seen here\n    return *this;\n}\n</code></pre>\n\n<p>and here is my full code, in case that is necessary:</p>\n\n<pre><code>  template &lt;typename DataType&gt;\n  class LinkedList {\n  public:\n\n\n    struct Node {\n      //Node(Node *aNext=nullptr) : next(aNext) {}\n        DataType value;   //this is the value you want to save\n        Node *next;  //this points to the next node in the list (or nullptr)\n    };\n    //friend class Iterator; //do Ineed this even though it's a nested class\n\n    Node *root;\n\n    //---------------------------------------------------------------\n\n    //add a NESTED Iterator class...\n    class Iterator {\n    public:\n        Iterator();//default constructor\n        //Iterator() : current(nullptr) {}\n        Iterator(Node* aNode);\n        //Iterator(Node* aNode): current(aNode){};//constructor\n        Iterator&amp; operator=(const LinkedList::Iterator&amp; aCopy) noexcept; //added this DELETE DUMMY?\n        ~Iterator(); //dtor\n        Iterator operator++();\n        Iterator operator++(DataType);\n        bool operator==(const Iterator &amp;anIterator);\n        bool operator!=(const Iterator &amp;anIterator);\n        DataType operator*();\n        operator Node*();\n        Node *current; //do I need to put LinkedList since it's a nested class?\n\n      //add all the necessary operators\n\n    protected:\n    };\n\n    //--------------------------------------------------------------\n\n    LinkedList(); //default constructor...\n    LinkedList(const LinkedList&amp; aCopy); //copy ctor\n    ~LinkedList(); //dtor\n    LinkedList&amp; operator=(const LinkedList&amp; aCopy); //assignment operator\n\n    void append(DataType value);\n    void prepend(DataType value);\n    void remove(DataType value);\n    int size(); //needs to return unsigned int????\n    Iterator begin();\n    Iterator end();\n    Iterator find(DataType aValue); //find\n\n\n\n  protected:\n  };\n\n//class Iterator;\ntemplate &lt;typename DataType&gt; LinkedList&lt;DataType&gt;::LinkedList() {\n      root=nullptr;\n  }\n\ntemplate &lt;typename DataType&gt; LinkedList&lt;DataType&gt;::LinkedList(const LinkedList&amp; aCopy){ //copy ctor\n    Node *temp=aCopy.root;\n    Node *newNode = new Node;\n    root=newNode;\n\n    while (temp != nullptr){\n        newNode-&gt; value=temp-&gt;value;\n        temp=temp-&gt;next;\n        if (temp !=nullptr){\n            newNode-&gt;next=new Node;\n            newNode=newNode-&gt;next;\n        }\n        else{ newNode-&gt;next=nullptr;}\n    }\n}\n\ntemplate &lt;typename DataType&gt; LinkedList&lt;DataType&gt;&amp; template &lt;typename DataType&gt;LinkedList&lt;DataType&gt;::operator=(const LinkedList &amp;aCopy){ //assignment operator\n    while(root!=nullptr){\n        Node* oneBefore= root;\n        root =root-&gt;next;\n        delete oneBefore;\n    }\n    Node *newNode= new Node;\n    Node *temp=aCopy.root;\n    root=newNode;\n\n    while(temp!=nullptr){\n        newNode-&gt;value=temp-&gt;value;\n        temp=temp-&gt;next;\n        if(temp!=nullptr){\n            newNode-&gt;next=new Node;\n            newNode=newNode-&gt;next;\n        }\n        else{newNode-&gt;next=nullptr;}\n    }\n    return *this;\n}\n\nLinkedList&lt;DataType&gt;::~LinkedList(){ //dtor\n    Node* oneBefore = nullptr;\n    while(root!=nullptr){\n        oneBefore=root;\n        root=root-&gt;next;\n        delete oneBefore;\n    }\n}\nLinkedList&lt;DataType&gt;::Iterator LinkedList::find(DataType aValue){\n    Node* temp=root;\n    Iterator myIterator = begin();\n    for(myIterator = this-&gt;begin(); myIterator != this-&gt;end(); myIterator++){\n        if(temp-&gt;value==aValue){\n            return temp;\n        }\n        temp=temp-&gt;next;\n    }\n    return nullptr;\n}\n\nvoid LinkedList&lt;DataType&gt;::append(DataType value){\n    Node* newNode=new Node;\n    newNode-&gt;value=value;\n    if(root!=nullptr){\n        Node* temp = root;\n        while (temp-&gt;next !=nullptr){\n            temp=temp-&gt;next;\n        }\n        newNode-&gt;next=nullptr;\n        temp-&gt;next=newNode;\n    }\n    if(root==nullptr){\n        newNode-&gt;next=nullptr;\n        root=newNode;\n    }\n\n}\n\nvoid LinkedList&lt;DataType&gt;::prepend(DataType value){\n    Node* newNode=new Node;\n    newNode-&gt;value=value;\n    if (root!=nullptr){\n        newNode-&gt;next=root;\n        root=newNode;\n    }\n    if(root==nullptr){\n        root=newNode;\n        newNode-&gt;next=nullptr;\n    }\n}\n\nvoid LinkedList&lt;DataType&gt;::remove(DataType value){\n    if(root!=nullptr){\n        Node *before=nullptr;\n        Node *temp=root;\n        if(temp-&gt;value==value){\n            root=temp-&gt;next;\n        }\n        else{\n            while(temp-&gt;value!=value &amp;&amp;temp-&gt;next != nullptr){\n                before=temp;\n                temp=temp-&gt;next;\n            }\n            if(temp-&gt;value==value){\n                before-&gt;next=temp-&gt;next;\n            }\n        }\n        delete temp;\n    }\n}\n\nint LinkedList&lt;DataType&gt;::size(){\n    Node* aNode = root;\n    int numElements=0;\n    while(aNode!=nullptr){\n        aNode=aNode-&gt;next;\n        numElements=numElements+1;\n    }\n    return numElements;\n}\n\nLinkedList&lt;DataType&gt;::Iterator LinkedList::begin(){\n    return LinkedList::Iterator(root);\n}\n\n\nLinkedList&lt;DataType&gt;::Iterator LinkedList::end(){\n    Node *aNode=root;\n    while(aNode!=nullptr){\n        aNode=aNode-&gt;next;\n    }\n    return LinkedList::Iterator(aNode);\n}\n\nLinkedList&lt;DataType&gt;::Iterator::Iterator() : current(nullptr) {}\n\nLinkedList&lt;DataType&gt;::Iterator::Iterator(Node* aNode): current(aNode){\n};\n\ntemplate &lt;typename DataType&gt; typename LinkedList&lt;DataType&gt;::Iterator LinkedList&lt;DataType&gt;::Iterator::operator++(){//I have no idea what the difference is supposed to be between this one and the one below\n    current=current-&gt;next;\n    return *this;\n}\ntemplate &lt;typename DataType&gt; typename LinkedList&lt;DataType&gt;::Iterator template&lt;typename DataType&gt; LinkedList&lt;DataType&gt;::Iterator::operator++(DataType){//I have no idea what the difference is supposed to be between this one and the one below\n    current=current-&gt;next;\n    return *this;\n}\n\ntemplate &lt;typename DataType&gt; LinkedList&lt;DataType&gt;::Iterator&amp; LinkedList::Iterator::operator=(const LinkedList::Iterator&amp; aCopy) noexcept{ //assignment operator\n    current=aCopy.current;\n    return *this;\n}\n\ntemplate &lt;typename DatatType&gt; bool LinkedList&lt;DataType&gt;::Iterator::operator !=(const LinkedList::Iterator&amp; aCopy){\n    return current != aCopy.current;\n}\n\nbool LinkedList&lt;DataType&gt;::Iterator::operator==(const LinkedList::Iterator&amp; aCopy){\n    return current==aCopy.current;\n}\n\nDataType LinkedList&lt;DataType&gt;::Iterator::operator*(){\n    return current-&gt;value;\n}\n\nLinkedList&lt;DataType&gt;::Iterator::~Iterator(){}\n\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 423, "user_id": 1094871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a39a250f53ac54320b436b5fb4f7b62?s=128&d=identicon&r=PG", "display_name": "Eddy Luten", "link": "https://stackoverflow.com/users/1094871/eddy-luten"}, "edited": false, "score": 0, "creation_date": 1573686435, "post_id": 58844714, "comment_id": 103967597, "body": "I think you may be running into a clang-specific implementation issue where matching template types to parameters isn&#39;t fully implemented yet: <a href=\"https://clang.llvm.org/cxx_status.html#p0522\" rel=\"nofollow noreferrer\">clang.llvm.org/cxx_status.html#p0522</a>"}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "edited": false, "score": 0, "creation_date": 1573692248, "post_id": 58844714, "comment_id": 103968982, "body": "I think <code>Matrix&lt;RayDim&gt;</code> is not a dependent type and so the keyword is not required. I may have time for an answer later."}, {"owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "reply_to_user": {"reputation": 423, "user_id": 1094871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a39a250f53ac54320b436b5fb4f7b62?s=128&d=identicon&r=PG", "display_name": "Eddy Luten", "link": "https://stackoverflow.com/users/1094871/eddy-luten"}, "edited": false, "score": 0, "creation_date": 1573692513, "post_id": 58844714, "comment_id": 103969037, "body": "@EddyLuten P0522 is about template template parameters, and there aren&#39;t any in this example."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1573714213, "post_id": 58844714, "comment_id": 103974425, "body": "A simplified example that seems to be related: <a href=\"https://godbolt.org/z/KpXpYs\" rel=\"nofollow noreferrer\">godbolt.org/z/KpXpYs</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "is_accepted": false, "score": 0, "last_activity_date": 1573691043, "last_edit_date": 1592644375, "creation_date": 1573690212, "answer_id": 58847507, "question_id": 58844714, "link": "https://stackoverflow.com/questions/58844714/template-disambiguator-for-dependent-names/58847507#58847507", "title": "Template disambiguator for dependent names", "body": "<h1>Disclaimer</h1>\n<p><em>this is not an answer, but rather a long comment</em></p>\n<p><em>My <a href=\"/questions/tagged/language-lawyer\" class=\"post-tag\" title=\"show questions tagged &#39;language-lawyer&#39;\" rel=\"tag\">language-lawyer</a> skills are too low to fully understand the standard but here are a few things I discovered from experimenting with the code. Everything that follows is based on my (far from perfect) understanding of the matter and probably needs some reviews.</em></p>\n<h1>Investigation</h1>\n<p>First off, I went to a fully defined standard version (C++17) so we operate on a well defined implementation.</p>\n<p>Looking at <a href=\"https://godbolt.org/z/jDfQFv\" rel=\"nofollow noreferrer\">this code</a> it seems like MSVC still has some problems (with its lookup, I guess?) when it comes to template instantiation and redefinition. I wouldn't trust MSVC that much in our scenario.</p>\n<p>That beeing said, lets think about why we could need the <code>template</code> keyword at</p>\n<pre><code>return yF.template head&lt;1&gt;();\n</code></pre>\n<h2>Dependent names</h2>\n<p>Sometimes, inside templates, we have to help the compiler decide whether a <em>name</em> refers to</p>\n<ol>\n<li>a value <code>int T::x = 0</code>,</li>\n<li>a type <code>struct T::x {};</code>, or</li>\n<li>a template <code>template &lt;typename U&gt; T::foo&lt;U&gt;();</code></li>\n</ol>\n<p>If we refer to a value, we do nothing. If we refer to a type, we have to use <code>typename</code>. And if we refer to a template we use <code>template</code>. More on that subject can be found <a href=\"https://stackoverflow.com/a/613132/6205379\">here</a>.</p>\n<p>I don't understand the standard specification when it comes to the actual definition of a <em>dependent name</em> but here are some observations.</p>\n<h2>Observations</h2>\n<p>Lets take a look at the reference code</p>\n<pre><code>template &lt;int N&gt;\nstruct Matrix \n{\n    template &lt;int Idx&gt;\n    int head() { return Idx; }\n};\n \n\ntemplate &lt;typename T&gt;\nstruct Test \n{    \n    static constexpr int RayDim = 3;\n\n    int func() const \n    {\n        Matrix&lt;RayDim&gt; yF;\n        return yF.head&lt;1&gt;(); // clang complains, gcc and msvc are ok\n    }\n};\n\n\nstruct Empty {};\n\nint test() \n{\n    Test&lt;Empty&gt; t;\n    return t.func();\n}\n</code></pre>\n<p>Usually <code>RayDim</code> should be a dependent name (because it's inside the template <code>Test</code>) which would cause <code>Matrix&lt;RayDim&gt;</code> to be a dependent name aswell. For now, lets assume that <code>Matrix&lt;RayDim&gt;</code> actually is a dependent name. This makes <code>Matrix&lt;RayDim&gt;::head</code> a dependent name aswell. Since <code>Matrix&lt;RayDim&gt;::head</code> is a templated function it is a template in itself and the rules of dependent names from above apply, requiring us to use the <code>template</code> keyword. This is what clang is complaining about.</p>\n<p>However, since <code>RayDim</code> is defined inside <code>Test</code> and <code>func</code> is also defined inside the same template and not a templated function in itself, I don't think <code>RayDim</code> actually is a dependent name in the context of <code>func</code>. Furthermore, <code>RayDim</code> doesn't rely on the template arguments of <code>Test</code>. In this case, <code>Matrix&lt;RayDim&gt;</code> and <code>Matrix&lt;RayDim&gt;::head</code> respectively, would become non-dependent names, which allows us to omit the <code>template</code> keyword. This is why gcc (and msvc) compile.</p>\n<p>If we were to template <code>RayDim</code> aswell, like <a href=\"https://godbolt.org/z/Tp3yWu\" rel=\"nofollow noreferrer\">here</a></p>\n<pre><code>template &lt;typename&gt;\nstatic constexpr int RayDim = 3;\n</code></pre>\n<p>gcc would treat it as a dependent name aswell (which is correct, since there might be a template specialization later so we don't know at that point). Meanwhile, msvc happily accepts everything we throw at it.</p>\n<h1>Conclusion</h1>\n<p>It seems like it's boiling down to whether <code>RayDim</code> is a dependent name in the context of <code>Test&lt;T&gt;::func</code> or not. Clang thinks it is, gcc doesn't. From some more test it looks like msvc sides with clang on this one. But it's also kinda doing it's own thing, so who knows?</p>\n<p>I would side with gcc here as I see no possible way of <code>RayDim</code> becoming dependent at the point where <code>func</code> is instantiated.</p>\n"}, {"tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 1, "last_activity_date": 1573739216, "last_edit_date": 1592644375, "creation_date": 1573739216, "answer_id": 58858275, "question_id": 58844714, "link": "https://stackoverflow.com/questions/58844714/template-disambiguator-for-dependent-names/58858275#58858275", "title": "Template disambiguator for dependent names", "body": "<p>The <code>template</code> keyword should not be required here, so clang is incorrect to reject the program.</p>\n<p>All C++ Standard section and paragraph numbers and quotes below are the same for C++17 draft N4659 and the current linked C++20 draft.</p>\n<p>The requirement for <code>template</code> after a <code>.</code> or <code>-&gt;</code> or <code>::</code> token when naming a member template is in <a href=\"https://timsong-cpp.github.io/cppwp/temp.names#4\" rel=\"nofollow noreferrer\">[temp.names]/4</a>. The paragraph first lists cases where the keyword is not allowed, then cases where it is optional and doesn't make a difference, then:</p>\n<blockquote>\n<p>In all other contexts, when naming a template specialization of a member of an unknown specialization (<a href=\"https://timsong-cpp.github.io/cppwp/temp.dep.type\" rel=\"nofollow noreferrer\">[temp.dep.type]</a>), the member template name shall be prefixed by the keyword <code>template</code>.</p>\n</blockquote>\n<p>A &quot;member of an unknown specialization&quot; is a member of a dependent type which is not &quot;the current instantiation&quot;. So the question is whether <code>Matrix&lt;RayDim&gt;</code> is a dependent type. For that, we look at [temp.dep.type]/9:</p>\n<blockquote>\n<p>A type is dependent if it is</p>\n<ul>\n<li>a template parameter,</li>\n<li>a member of an unknown specialization,</li>\n<li>a nested class or enumeration that is a dependent member of the current instantiation,</li>\n<li>a cv-qualified type where the cv-unqualified type is dependent,</li>\n<li>a compound type constructed from any dependent type,</li>\n<li>an array type whose element type is dependent or whose bound (if any) is value-dependent,</li>\n<li>a function type whose exception specification is value-dependent,</li>\n<li>a <em>simple-template-id</em> in which either the template name is a template parameter or any of the template arguments is a dependent type or an expression that is type-dependent or value-dependent or is a pack expansion, or</li>\n<li>denoted by <code>decltype(</code><em>expression</em><code>)</code>, where <em>expression</em> is type-dependent.</li>\n</ul>\n</blockquote>\n<p><code>Matrix&lt;RayDim&gt;</code> is clearly not a template parameter, any kind of member, cv-qualified, an array type, a function type, or specified by <code>decltype</code>. It is a compound type, but it uses only a template-name and an expression, so is not constructed from any other type.</p>\n<p>That leaves the <em>simple-template-id</em> case. The template name <code>Matrix</code> is not a template parameter. The template argument <code>RayDim</code> is an expression, so now to see if it is type-dependent or value-dependent.</p>\n<p>&quot;Type-dependent&quot; is defined in <a href=\"https://timsong-cpp.github.io/cppwp/temp.dep.expr\" rel=\"nofollow noreferrer\">[temp.dep.expr]</a>. Only paragraph 3 can apply to a lone identifier like <code>RayDim</code>:</p>\n<blockquote>\n<p>An <em>id-expression</em> is type-dependent if it contains</p>\n<ul>\n<li>an <em>identifier</em> associated by name lookup with one or more declarations declared with a dependent type,</li>\n<li>an <em>identifier</em> associated by name lookup with a non-type <em>template-parameter</em> declared with a type that contains a placeholder type,</li>\n<li>an <em>identifier</em> associated by name lookup with a variable declared with a type that contains a placeholder type ([dcl.spec.auto]) where the initializer is type-dependent,</li>\n<li>an <em>identifier</em> associated by name lookup with one or more declarations of member functions of the current instantiation declared with a return type that contains a placeholder type,</li>\n<li>an <em>identifier</em> associated by name lookup with a structured binding declaration whose <em>brace-or-equal-initializer</em> is type-dependent,</li>\n<li>the identifier <code>__func__</code> ([dcl.fct.def.general]), where any enclosing function is a template, a member of a class template, or a generic lambda,</li>\n<li>a <em>template-id</em> that is dependent,</li>\n<li>a <em>conversion-function-id</em> that specifies a dependent type, or</li>\n<li>a <em>nested-name-specifier</em> or a <em>qualified-id</em> that names a member of an unknown specialization;</li>\n</ul>\n<p>or if it names a dependent member of the current instantiation that is a static data member of type &quot;array of unknown bound of <code>T</code>&quot; for some <code>T</code> ([temp.static]).</p>\n</blockquote>\n<p><code>RayDim</code> certainly does not contain any <code>__func__</code>, <em>template-id</em>, <em>conversion-function-id</em>, <em>nested-name-specifier</em>, or <em>qualified-id</em>. Name lookup finds the class template's static member declaration. That declaration of <code>RayDim</code> is certainly not a <em>template-parameter</em>, a member function, or a structured binding declaration, and its type <code>const int</code> is certainly not a dependent type or array type and does not contain a placeholder type. So <code>RayDim</code> is not type-dependent.</p>\n<p>&quot;Value-dependent&quot; is defined in <a href=\"https://timsong-cpp.github.io/cppwp/temp.dep.constexpr\" rel=\"nofollow noreferrer\">[temp.dep.constexpr]</a>. The only cases that can apply to a lone identifier like <code>RayDim</code> are in paragraph 2:</p>\n<blockquote>\n<p>An <em>id-expression</em> is value-dependent if:</p>\n<ul>\n<li>it is type-dependent,</li>\n<li>it is the name of a non-type template parameter,</li>\n<li>it names a static data member that is a dependent member of the current instantiation and is not initialized in a <em>member-declarator</em>,</li>\n<li>it names a static member function that is a dependent member of the current instantiation, or</li>\n<li>it is a constant with literal type and is initialized with an expression that is value-dependent.</li>\n</ul>\n</blockquote>\n<p>From above, <code>RayDim</code> is not type-dependent. It is certainly not a template parameter or a member function. It is a static data member and dependent member of the current instantiation, but it is initialized in the <em>member-declarator</em>. That is, the &quot;<code>= 3</code>&quot; appears inside the class definition, not in a separate member definition. It is a constant with literal type, but its initializer <code>3</code> is not value-dependent.</p>\n<p>So <code>RayDim</code> is not value-dependent or type-dependent. Therefore <code>Matrix&lt;RayDim&gt;</code> is not a dependent type, <code>yF.head</code> is not a member of an unknown instantiation, and the <code>template</code> keyword before <code>head</code> is optional, not required. (It is permitted since it's not in a &quot;type-only context&quot; and <code>head</code> does in fact name a member template.)</p>\n"}], "owner": {"reputation": 125, "user_id": 1964853, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/df48eb451e95b26a0c6d1a5d7a8a96b7?s=128&d=identicon&r=PG", "display_name": "Jodebo", "link": "https://stackoverflow.com/users/1964853/jodebo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "accepted_answer_id": 58858275, "answer_count": 2, "score": 8, "last_activity_date": 1573739216, "creation_date": 1573675226, "question_id": 58844714, "link": "https://stackoverflow.com/questions/58844714/template-disambiguator-for-dependent-names", "title": "Template disambiguator for dependent names", "body": "<p>I encountered the following problem by compiling the following example:</p>\n\n<pre><code>template &lt;int N&gt;\nclass Matrix {\npublic:\n    template &lt;int Idx&gt;\n    int head() {\n        return Idx;\n    }\n};\n\ntemplate &lt;typename T&gt;\nclass Test {\n    static constexpr int RayDim = 3;\npublic:\n    int func() const {\n        Matrix&lt;RayDim&gt; yF;\n        return yF.head&lt;1&gt;();\n        //        ^ is template keyword required here?\n    }\n};\n\nstruct Empty {};\n\nvoid test() {\n    Test&lt;Empty&gt; t;\n}\n</code></pre>\n\n<p>Link to Compiler Explorer:\n<a href=\"https://godbolt.org/z/js4XaP\" rel=\"noreferrer\">https://godbolt.org/z/js4XaP</a></p>\n\n<p>The code compiles with GCC 9.2 and MSVC 19.22 but not with clang 9.0.0. Clang states that a template keyword is required. If <code>static constexpr int RayDim = 3;</code> is moved into <code>int func() const</code> clang accepts it.</p>\n\n<p>As stated as a comment in the code block, is the template keyword required for <code>yF.head&lt;1&gt;()</code>?</p>\n"}, {"tags": ["c++", "libzip"], "answers": [{"tags": [], "owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "is_accepted": true, "score": 2, "last_activity_date": 1573675365, "last_edit_date": 1573675365, "creation_date": 1573674910, "answer_id": 58844650, "question_id": 58844649, "link": "https://stackoverflow.com/questions/58844649/libzip-with-zip-source-buffer-causes-data-corruption-and-or-segfaults/58844650#58844650", "title": "libzip with zip_source_buffer causes data corruption and/or segfaults", "body": "<p>It seems that the libzip documentation is misleading, zip_add does not actually read the data from the source and put it in the zip, it merely queues it up to be put in the zip. So each of the buffers must be independent and you must ensure it's lifetime will last until after the zip is closed.</p>\n\n<p>In this case that meant changing buf from a single std::vector to an array of std::vectors (one for each image) and moving the declarations of caltext out to a higher scope.</p>\n\n<p>The segfault in unrelated code turned out to be an unrelated bug (an array was too small).</p>\n"}], "owner": {"reputation": 7116, "user_id": 5083516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f2aeeefc1a95ddb2f19612150ccd7ba?s=128&d=identicon&r=PG&f=1", "display_name": "plugwash", "link": "https://stackoverflow.com/users/5083516/plugwash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 58844650, "answer_count": 1, "score": 2, "last_activity_date": 1573680354, "creation_date": 1573674910, "last_edit_date": 1573680354, "question_id": 58844649, "link": "https://stackoverflow.com/questions/58844649/libzip-with-zip-source-buffer-causes-data-corruption-and-or-segfaults", "title": "libzip with zip_source_buffer causes data corruption and/or segfaults", "body": "<p>I am trying to use libzip with <code>zip_source_buffer</code>, to write data from local buffers to a zipfile.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>std::vector&lt;uchar&gt; buf;\nstruct zip * z = zip_open(zipfilename.c_str(),ZIP_CREATE | ZIP_EXCL,NULL);\nif (!z) {\n    messagelabel-&gt;setText(\"failed to open zip file \"+QString::fromStdString(zipfilename));\n    return \"\";\n}\n//messagelabel-&gt;setText(QString::fromStdString(zipfilename));\n//messagelabel-&gt;setText(QString::number(ulong(z)));\nint errors = 0;\nfor (int i=0;i&lt;16;i++) {\n    imencode(format, frame[i],buf);\n    struct zip_source *s;\n    s = zip_source_buffer(z,buf.data(),buf.size(),0);\n    std::string nameinzip = (\"band\"+to_string(i)+format);\n    if (zip_add(z,nameinzip.c_str(),s) &lt; 0) {\n            messagelabel-&gt;setText(\"failed to add \"+QString::fromStdString(nameinzip)+\" to zip file\");\n            errors++;\n            break;\n    }\n}\nif (errors == 0) {\n    struct zip_source *s;\n    std::string caltext = caltotext(calfile);\n    cout &lt;&lt; caltext;\n    s = zip_source_buffer(z,caltext.data(),caltext.size(),0);\n    std::string nameinzip = \"calinfo.csv\";\n    if (zip_add(z,nameinzip.c_str(),s) &lt; 0) {\n            messagelabel-&gt;setText(\"failed to add \"+QString::fromStdString(nameinzip)+\" to zip file\");\n            errors++;\n    }\n}\nif (zip_close(z) &lt; 0) {\n    messagelabel-&gt;setText(\"failed to close zip file \"+QString::fromStdString(zipfilename));\n    errors++;\n}\n</code></pre>\n\n<p>Unfortunately, I discovered corrupt data inside my zip file and while trying to debug the results my program segfaulted in apparently unrelated code (that had worked before).</p>\n\n<p>I then tried running my program in valgrind and got memory errors from <code>zip_close</code>. What am I doing wrong?</p>\n"}, {"tags": ["c++", "multithreading", "stdthread"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1573674501, "post_id": 58844510, "comment_id": 103962744, "body": "<code>while( getState() != 2)</code>  ?!? I think I dont understand the question"}, {"owner": {"reputation": 39, "user_id": 11909399, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Iq53-KRG2T8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resUAXpRIZD89-J8gJ7_5LZGiIGyA/photo.jpg?sz=128", "display_name": "user11909399", "link": "https://stackoverflow.com/users/11909399/user11909399"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1573674599, "post_id": 58844510, "comment_id": 103962787, "body": "Sure that works in this specific example but let&#39;s assume I don&#39;t know what the end state is. I just want to know when <code>T</code> has terminated."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1573674672, "post_id": 58844510, "comment_id": 103962827, "body": "somehow the thread has to signal that it is done with its job. If you dont know the final value of <code>state</code> then use some <code>bool taskDone</code> either as <code>std::atomic&lt;bool&gt;</code> or protected by mutex"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1573674678, "post_id": 58844510, "comment_id": 103962829, "body": "Sounds like you could be looking for <a href=\"https://en.cppreference.com/w/cpp/thread/future\" rel=\"nofollow noreferrer\"><code>std::future</code></a>."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1573675228, "post_id": 58844625, "comment_id": 103963090, "body": "<a href=\"https://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow noreferrer\"><code>std::atomic</code></a> for <code>STATE </code>may be able to simplify this somewhat."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1573675396, "post_id": 58844625, "comment_id": 103963172, "body": "You need to wrap the <code>isDone</code> argument into a <code>std::ref</code>. Otherwise you get an error because of the implicit argument copying that <code>std::thread</code>&#39;s constructor does."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1573675670, "post_id": 58844625, "comment_id": 103963287, "body": "@uneven_mark I was editing that in while you commented I notice. :-)"}], "tags": [], "owner": {"reputation": 71, "user_id": 5025675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBK0T.png?s=128&g=1", "display_name": "Hazardy", "link": "https://stackoverflow.com/users/5025675/hazardy"}, "is_accepted": true, "score": 4, "last_activity_date": 1573675460, "last_edit_date": 1573675460, "creation_date": 1573674827, "answer_id": 58844625, "question_id": 58844510, "link": "https://stackoverflow.com/questions/58844510/spawn-thread-and-do-something-else-while-its-running-for-as-long-as-its-active/58844625#58844625", "title": "Spawn thread and do something else while it&#39;s running for as long as it&#39;s active", "body": "<p>Just with <code>std::thread</code> you can't.</p>\n\n<p>But you can easily craft your own signal. For example:</p>\n\n<pre><code>#include &lt;atomic&gt;\n#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n\nint STATE = 0;\nstatic std::mutex mtx;\n\nvoid setState(int newState) {\n    std::lock_guard&lt;std::mutex&gt; lg(mtx);\n    STATE = newState;\n}\n\nint getState() {\n    std::lock_guard&lt;std::mutex&gt; lg(mtx);\n    return STATE;\n}\n\nvoid someFn(std::atomic&lt;bool&gt;&amp; isDone) {\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    setState(0);\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    setState(1);\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    setState(2);\n    isDone.store(true);\n}\n\nint main() {\n    std::atomic&lt;bool&gt; isDone{false};\n    std::thread T(someFn, std::ref(isDone));\n\n    while(!isDone.load()) {\n        std::this_thread::sleep_for(std::chrono::milliseconds(500));\n        std::cout &lt;&lt; getState() &lt;&lt; std::endl;\n    }\n\n    T.join();\n\n    return 0;\n}\n</code></pre>\n\n<p>You don't need a mutex or other synchronization for <code>std::atomic</code> because it is already thread safe.</p>\n"}], "owner": {"reputation": 39, "user_id": 11909399, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Iq53-KRG2T8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resUAXpRIZD89-J8gJ7_5LZGiIGyA/photo.jpg?sz=128", "display_name": "user11909399", "link": "https://stackoverflow.com/users/11909399/user11909399"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 1, "accepted_answer_id": 58844625, "answer_count": 1, "score": 0, "last_activity_date": 1573675460, "creation_date": 1573674363, "question_id": 58844510, "link": "https://stackoverflow.com/questions/58844510/spawn-thread-and-do-something-else-while-its-running-for-as-long-as-its-active", "title": "Spawn thread and do something else while it&#39;s running for as long as it&#39;s active", "body": "<p>I have a simple program below where some long running process <code>someFn</code> works, sets a state, works sets a state, works and sets a state.</p>\n\n<p>While <code>someFn</code> is running, I want the main thread to query the state it's setting for the lifetime of <code>someFn</code>.</p>\n\n<p>Obviously this code is incorrect because <code>T</code> is <code>joinable</code> until it actually joins and this program does not halt.</p>\n\n<p>How do I correctly get the main thread to loop for the lifetime of <code>T</code> and stop looping as soon as <code>T</code> has terminated?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\nint STATE = 0;\nstatic std::mutex mtx;\n\nvoid setState(int newState) {\n    std::lock_guard&lt;std::mutex&gt; lg(mtx);\n    STATE = newState;\n}\n\nint getState() {\n    std::lock_guard&lt;std::mutex&gt; lg(mtx);\n    return STATE;\n}\n\n\nvoid someFn() {\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    setState(0);\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    setState(1);\n    std::this_thread::sleep_for(std::chrono::seconds(1));\n    setState(2);\n}\n\nint main()\n{\n\n    std::thread T(someFn);\n\n    while (T.joinable()) {\n        std::this_thread::sleep_for(std::chrono::milliseconds(500));\n        std::cout &lt;&lt; getState() &lt;&lt; std::endl;\n    }\n\n    T.join();\n\n    return 0;\n\n}\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "tcp", "jpeg"], "comments": [{"owner": {"reputation": 247, "user_id": 1412788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OJxH4.png?s=128&g=1", "display_name": "camp0", "link": "https://stackoverflow.com/users/1412788/camp0"}, "edited": false, "score": 0, "creation_date": 1573672971, "post_id": 58844110, "comment_id": 103962076, "body": "In general Netflix or other vendors what the stream is by using HTTP basically but they buffer the content, for example buffer the first 5 minutes of the film and while you are watching the film the continue the download and buffer the system"}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 3, "creation_date": 1573673254, "post_id": 58844110, "comment_id": 103962194, "body": "Are you looking for an image by image transfer or a video stream? Those are two different things."}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1573673427, "post_id": 58844110, "comment_id": 103962272, "body": "You state that your current <code>&quot;approach reaches just 12 fps&quot;</code>.  Have you profiled to find the bottleneck?  Is it the CPU usage when generating the jpegs or network bandwidth when transferring those jpegs?  Or something else?"}, {"owner": {"reputation": 43, "user_id": 12066981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f7c3bfae3790f2186fde31c90e18ee?s=128&d=identicon&r=PG&f=1", "display_name": "One3Three7", "link": "https://stackoverflow.com/users/12066981/one3three7"}, "edited": false, "score": 0, "creation_date": 1573674184, "post_id": 58844110, "comment_id": 103962603, "body": "I am looking for a image by image transfer. Unfortunately it is not possible to pre-buffer some of the images, as they should be displayed in real time.  I haven&#39;t profiled it exactly, but I&#39;m pretty sure the cause of the bottle neck is the confirmation on the receiver side. If I skip the confirmation, the transmitter sends so fast that the images are no longer displayed correctly at the receiver. However, I would prefer a standardized procedure, since I am sure that this problem has been addressed intensively by experts for a long time."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1573674291, "post_id": 58844110, "comment_id": 103962648, "body": "How fast are you able to render the JPGs if they are just being read from a file locally on your machine? Videos have their own formats, e.g., mpeg-4. Video formats take advantage of the fact that the next frame may only have minor differences from the previous frame, so the compression can be much higher."}, {"owner": {"reputation": 43, "user_id": 12066981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f7c3bfae3790f2186fde31c90e18ee?s=128&d=identicon&r=PG&f=1", "display_name": "One3Three7", "link": "https://stackoverflow.com/users/12066981/one3three7"}, "reply_to_user": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "edited": false, "score": 0, "creation_date": 1573675371, "post_id": 58844110, "comment_id": 103963163, "body": "@jxh Well, it depends and and varies from the analog input signals and images sizes. Since I use the GPU for processing and compression, 150-250 fps are possible."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1573677322, "post_id": 58844110, "comment_id": 103964003, "body": "@One3Three7 why do you even need the confirmation if you just display the data? When you say 12 fps is too low, it sounds like live visualization. This, on the other hand, would lean towards video streaming instead, since it is optimized for fluent picture display on variable bandwidth networks."}, {"owner": {"reputation": 43, "user_id": 12066981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f7c3bfae3790f2186fde31c90e18ee?s=128&d=identicon&r=PG&f=1", "display_name": "One3Three7", "link": "https://stackoverflow.com/users/12066981/one3three7"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1573679099, "post_id": 58844110, "comment_id": 103964740, "body": "@Timo Indeed, it is a live visualization. I am not familiar with video or image processing, that is the reason why I asked. So, what would be your approach to transfer these images or video, to allow a real-time visualization?"}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1573674334, "creation_date": 1573674334, "answer_id": 58844498, "question_id": 58844110, "link": "https://stackoverflow.com/questions/58844110/is-there-a-standardized-method-to-send-jpg-images-over-network-with-tcp-ip/58844498#58844498", "title": "Is there a standardized method to send JPG images over network with TCP/IP?", "body": "<blockquote>\n  <p>Is there a standardized method to send JPG images over network with TCP/IP?</p>\n</blockquote>\n\n<p>There are several internet protocols that are commonly used to transfer files over TCP. Perhaps the most commonly used protocol is HTTP. Another, older one is FTP.</p>\n\n<blockquote>\n  <p>Which approach do streaming services like Netflix and Amzon take for UHD videos?</p>\n</blockquote>\n\n<p>Firstly, they don't use JPEG at all. They use some video compression codec (such as MPEG), that does not only compress the data spatially, but also temporally (successive frames tend to hold similar data). An example of the protocol that they might use to stream the data is DASH, which is operates over HTTP.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 12066981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f7c3bfae3790f2186fde31c90e18ee?s=128&d=identicon&r=PG&f=1", "display_name": "One3Three7", "link": "https://stackoverflow.com/users/12066981/one3three7"}, "edited": false, "score": 0, "creation_date": 1573677678, "post_id": 58844696, "comment_id": 103964141, "body": "To clarify, I actually want to send pictures and not videos. The analog signals come from a radar sensor and are sampled by a digitizer (~4x200MB/s). The captured data is transferred by RDMA via PCIe to a GPU. On this GPU a radar algorithm is executed on the data. The processed data (float) is then mapped to pixels in BMP24. I assumed it would be useful to compress it before sending the data over the network. A GPU is suitable for such a compression and I would like to use the advantage of it. Which format would you prefer? Do you think decoding of JPGs is a bottleneck (not on GPU)?"}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 43, "user_id": 12066981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f7c3bfae3790f2186fde31c90e18ee?s=128&d=identicon&r=PG&f=1", "display_name": "One3Three7", "link": "https://stackoverflow.com/users/12066981/one3three7"}, "edited": false, "score": 0, "creation_date": 1573678507, "post_id": 58844696, "comment_id": 103964474, "body": "@One3Three7: The GPU should be able to encode to video. I had asked how fast you could decode, and you already said you expected more than 100 fps playback, so I eliminated that as a possible bottleneck."}, {"owner": {"reputation": 43, "user_id": 12066981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f7c3bfae3790f2186fde31c90e18ee?s=128&d=identicon&r=PG&f=1", "display_name": "One3Three7", "link": "https://stackoverflow.com/users/12066981/one3three7"}, "edited": false, "score": 0, "creation_date": 1573679642, "post_id": 58844696, "comment_id": 103964989, "body": "@jhx Then there was a misunderstanding on my part, I was referring to processing and encoding the data, not to rendering and decoding. I&#39;ll check how fast decoding and rendering takes."}, {"owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "reply_to_user": {"reputation": 43, "user_id": 12066981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f7c3bfae3790f2186fde31c90e18ee?s=128&d=identicon&r=PG&f=1", "display_name": "One3Three7", "link": "https://stackoverflow.com/users/12066981/one3three7"}, "edited": false, "score": 0, "creation_date": 1573683119, "post_id": 58844696, "comment_id": 103966459, "body": "@One3Three7: Note that 1Gb/s as used in the example in my answer is normally able to handle HD quality video at 60 fps. So stream formats offer much better compression, ie, allow more frames per second to be delivered. The only buffering required is to handle occasional network jitter (maybe 10 seconds of buffering if you are particular about not seeing jitter)."}], "tags": [], "owner": {"reputation": 26, "user_id": 7700301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac7780ba7559a0b407e2696dfad1b39d?s=128&d=identicon&r=PG&f=1", "display_name": "MalformedPacket", "link": "https://stackoverflow.com/users/7700301/malformedpacket"}, "is_accepted": true, "score": 1, "last_activity_date": 1573675336, "last_edit_date": 1573675336, "creation_date": 1573675112, "answer_id": 58844696, "question_id": 58844110, "link": "https://stackoverflow.com/questions/58844110/is-there-a-standardized-method-to-send-jpg-images-over-network-with-tcp-ip/58844696#58844696", "title": "Is there a standardized method to send JPG images over network with TCP/IP?", "body": "<p>I don't have a specific library in mind that already does these things well, but some items to keep in mind:</p>\n\n<ol>\n<li>Most image / screenshare/ video streaming applications use exclusively UDP, RTP,RTSP for the video stream data, in a lossy fashion. They use TCP for control flow data, like sending key commands, or communication between client / server on what to present, but the streamed data is not TCP.</li>\n<li>If you are streaming video, see <a href=\"https://stackoverflow.com/questions/1825338/video-streaming-using-c\">this</a>.</li>\n<li>Sending individual images you just need efficient methods to compress, serialize, and de-serialize, and you probably want to do so in a batch fashion instead of just one at a time.Batch 10 jpegs together, compress them, serialize them, send.</li>\n</ol>\n\n<p>You mentioned fps so it sounds like you are trying to stream video and not just copy over images in fast way. I'm not entirely sure what you are trying to do. Can you elaborate on the digitized signals and why they have to be in jpeg? Can they not be in some other format, later converted to jpeg at the receiving end?</p>\n"}, {"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1573676917, "creation_date": 1573676917, "answer_id": 58845114, "question_id": 58844110, "link": "https://stackoverflow.com/questions/58844110/is-there-a-standardized-method-to-send-jpg-images-over-network-with-tcp-ip/58845114#58845114", "title": "Is there a standardized method to send JPG images over network with TCP/IP?", "body": "<p><em>This is not a direct answer to your question, but a suggestion that you will probably need to change how you are sending your movie.</em></p>\n\n<p>Here's a calculation: Suppose you can get 1Gb/s throughput out of your network. If each 2048x4096 file compresses to about 10MB (80Mb), then:</p>\n\n<blockquote>\n  <p>1000000000 &divide; (80 &times; 1000000) &equals; 12.5</p>\n</blockquote>\n\n<p>So, you can send about 12 frames a second. This means if you have a continuous stream of JPGs you want to display, if you want faster frame rates, you need a faster network.</p>\n\n<p>If your stream is a fixed length movie, then you could buffer the data and start the movie after enough data is buffered to allow playback at desired frame rate sooner than waiting for the entire movie to download. If you want playback at 24 frames a second, then you will need to buffer at least 2/3<sup>rds</sup> of the movie before you being playback, because the the playback is twice is fast as your download speed.</p>\n\n<p>As stated in another answer, you should use a streaming codec so that you can also take advantage of compression between successive frames, rather than just compressing the current frame alone.</p>\n\n<p>To sum up, your playback rate will be limited by the number of frames you can transfer per second if the stream never ends (e.g., a live stream).</p>\n\n<p>If you have a fixed length movie, buffering can be used to hide the throughput and latency bottlenecks.</p>\n"}], "owner": {"reputation": 43, "user_id": 12066981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8f7c3bfae3790f2186fde31c90e18ee?s=128&d=identicon&r=PG&f=1", "display_name": "One3Three7", "link": "https://stackoverflow.com/users/12066981/one3three7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 672, "favorite_count": 0, "accepted_answer_id": 58844696, "answer_count": 3, "score": 0, "last_activity_date": 1573676917, "creation_date": 1573672767, "question_id": 58844110, "link": "https://stackoverflow.com/questions/58844110/is-there-a-standardized-method-to-send-jpg-images-over-network-with-tcp-ip", "title": "Is there a standardized method to send JPG images over network with TCP/IP?", "body": "<p>I am looking for a standardized approach to stream JPG images over the network. Also desirable would be a C++ programming interface, which can be easily integrated into existing software.</p>\n\n<p>I am working on a GPGPU program which processes digitized signals and compresses them to JPG images. The size of the images can be defined by a user, typically the images are 1024 x 2048 or 2048 x 4096 pixel. I have written my \"own\" protocol, which first sends a header (image size in bytes, width, height and corresponding channel) and then the JPG data itself via TCP.  After that the receiver sends a confirmation that all data are received and displayed correctly, so that the next image can be sent. So far so good, unfortunately my approach reaches just 12 fps, which does not satisfy the project requirements. </p>\n\n<p>I am sure that there are better approaches that have higher frame rates. Which approach do streaming services like Netflix and Amzon take for UHD videos? Of course I googled a lot, but I couldn't find any satisfactory results.</p>\n"}, {"tags": ["c++", "googletest"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1573672943, "post_id": 58844074, "comment_id": 103962061, "body": "You have enabled <code>-Werror</code>. If you didn&#39;t this would only be a warning, but it is correct. The line <code>u64 != 0</code> has absolutely no effect whatsoever and the value is not used. In particular comparison between fundamental types cannot throw. So what why are you using <code>EXPECT_THROW</code>? Do you want <code>EXPECT_NE(u64, 0)</code> instead?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1573673311, "post_id": 58844074, "comment_id": 103962221, "body": "Did you oversimplyfy your example? Your log messages seem to assume that GoogleTest will throw something in <code>EXPECT_THROW</code> when it&#39;s first argument is <code>false</code>. That&#39;s not correct. If you want a fatal error (one which stops further execution of test), use <code>ASSERT_*</code> macro family (e.g. <code>ASSERT_NE</code>). If you really expect <code>uint64_t != int</code> to throw something, we need an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to answer precisely - why would it throw? what should happen when it throws? What is BadArg?"}, {"owner": {"reputation": 13, "user_id": 12368727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001d6f984d8fe2907186b35dc8981f9a?s=128&d=identicon&r=PG&f=1", "display_name": "shafi97", "link": "https://stackoverflow.com/users/12368727/shafi97"}, "edited": false, "score": 0, "creation_date": 1573673618, "post_id": 58844074, "comment_id": 103962356, "body": "What i&#39;m trying to do is tha tif u64!=0 then throw BadArg and don&#39;t terminate the program"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1573674475, "post_id": 58844074, "comment_id": 103962734, "body": "Where and for what purpose do you want to catch the exception? What is <code>BadArg</code>?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1573674563, "post_id": 58844074, "comment_id": 103962771, "body": "But why do you want to throw anything? It doesn&#39;t make much sense if you catch exception immidiately after throwing (and there is no code that would be omitted because of exception). <code>EXPECT_NE</code> will confirm that the value is different than 0 (and your next <code>EXPECT_EQ</code> will likely also confirm that). Sure, it is possible to do (<code>EXPECT_THROW(if(u64 != 0) throw BadArg;, BadArg)</code> should do the trick) , but I don&#39;t see any reason why would you want that overcomplicated solution."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 0, "creation_date": 1573674862, "post_id": 58844074, "comment_id": 103962924, "body": "@Yksisarvinen I understand that OP wants the test macro to throw an exception of type <code>BadArg</code> if the condition <code>u64 != 0</code> is not satisfied (rather than continue the tests or return from the function as <code>ASSERT_*</code> does.). But I am not sure what they want to do with this exception after it is caught and where."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1573674917, "post_id": 58844074, "comment_id": 103962960, "body": "@shafi97 Maybe you just want to put each pair of tests in a new function? <code>ASSERT_*</code> will only exit the current function on failure, not the entire program."}, {"owner": {"reputation": 13, "user_id": 12368727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001d6f984d8fe2907186b35dc8981f9a?s=128&d=identicon&r=PG&f=1", "display_name": "shafi97", "link": "https://stackoverflow.com/users/12368727/shafi97"}, "edited": false, "score": 1, "creation_date": 1573680548, "post_id": 58844074, "comment_id": 103965387, "body": "Thank you for the answers. I had a wrong concept of EXCEPT_THROW what you said makes sense"}], "owner": {"reputation": 13, "user_id": 12368727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/001d6f984d8fe2907186b35dc8981f9a?s=128&d=identicon&r=PG&f=1", "display_name": "shafi97", "link": "https://stackoverflow.com/users/12368727/shafi97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1573672619, "creation_date": 1573672619, "question_id": 58844074, "link": "https://stackoverflow.com/questions/58844074/googletest-expect-throw-error-statement-has-no-effect", "title": "GoogleTest: EXPECT_THROW error: statement has no effect", "body": "<p>I am trying to use EXPECT_THROW in my testing, but I am running into a error I have been unable to resolve</p>\n\n<p>So this is what I am trying to do </p>\n\n<pre><code>uint64_t u64 = bstt-&gt;inner_Bits_get_uint64();\nEXPECT_THROW(u64 != 0, BadArg) &lt;&lt; \"Get uint32 returned 0!\";\nEXPECT_TRUE(u64 == ((1L &lt;&lt; test_flags3_1) | (1L &lt;&lt; test_flags3_2))) &lt;&lt; \"uint64 didnt match u64=\" &lt;&lt; u64 &lt;&lt; \"expected \" &lt;&lt; ((1L &lt;&lt; test_flags3_1) | (1L &lt;&lt; test_flags3_2));\n\nuint32_t u32 = bstt-&gt;inner_Bits_get_uint32();\nEXPECT_THROW(u32 != 0, BadArg) &lt;&lt; \"Get uint32 returned 0!\";\nEXPECT_TRUE(u32 == ((1 &lt;&lt; test_flags3_1) | (1 &lt;&lt; test_flags3_2))) &lt;&lt; \"uint32 didnt match u32=\" &lt;&lt; u32 &lt;&lt; \"expected \" &lt;&lt; ((1 &lt;&lt; test_flags3_1) | (1 &lt;&lt; test_flags3_2));\n</code></pre>\n\n<p>The actual results are stored in the u64 and u32 variables and BarArg is the exception type. </p>\n\n<p>The error I get is </p>\n\n<pre><code>error: statement has no effect [-Werror=unused-value]\n  EXPECT_THROW(u64 != 0, BadArg) &lt;&lt; \"Get uint32 returned 0!\";\n               ~~~~^~~~\n</code></pre>\n"}, {"tags": ["c++", "stl", "std", "unordered-map"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1573672415, "post_id": 58844002, "comment_id": 103961807, "body": "I&#39;m not sure how you intend to implement equality comparison or hashing for your <code>key</code> type, given that there is no information on which member is active. Possible duplicate of <a href=\"https://stackoverflow.com/questions/12195794/what-is-the-correct-way-to-check-equality-between-instances-of-a-union\">What is the correct way to check equality between instances of a union?</a>."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1573672477, "post_id": 58844002, "comment_id": 103961831, "body": "There are several implementations for <code>std::variant</code> that work with C++11, such as this one: <a href=\"https://github.com/mpark/variant\" rel=\"nofollow noreferrer\">github.com/mpark/variant</a> ."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1573673137, "creation_date": 1573673137, "answer_id": 58844198, "question_id": 58844002, "link": "https://stackoverflow.com/questions/58844002/using-union-as-key-for-stdunordered-map/58844198#58844198", "title": "Using union as key for std::unordered_map", "body": "<blockquote>\n  <p>What are the best practices to do this?</p>\n</blockquote>\n\n<p>Best practice is probably to not do this.</p>\n\n<blockquote>\n  <p>is there need for custom hashing?</p>\n</blockquote>\n\n<p>Yes.</p>\n\n<blockquote>\n  <p>How does the hashing work</p>\n</blockquote>\n\n<p>The hasher somehow needs to know which union member is active, and then apply a hash function appropriate for that type. Since it is not possible to find out the active member by inspecting the union object, this quite tricky.</p>\n\n<p>Instead of union, in practice you need to use some sort of \"tagged union\" type such as <code>std::variant</code>. Despite the name, tagged union is typically implemented without using union internally in C++. If you cannot use C++17, then you need to use some other implementation or write one yourself.</p>\n"}], "owner": {"reputation": 43, "user_id": 2356279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5d70c123a23cf176b51606ee7672361?s=128&d=identicon&r=PG", "display_name": "blarredflunky", "link": "https://stackoverflow.com/users/2356279/blarredflunky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573673137, "creation_date": 1573672281, "question_id": 58844002, "link": "https://stackoverflow.com/questions/58844002/using-union-as-key-for-stdunordered-map", "title": "Using union as key for std::unordered_map", "body": "<p>I want to use union with a structure{int, int, string} and integer as a key for unordered_map. What are the best practices to do this? How does the hashing work, is there need for custom hashing?</p>\n\n<pre><code>struct nodeinfo {\nint a;\nint b;\nstring c;\n};\n\nunion key{\nnodeinfo structKey;\nint intKey; \n};\n\nunordered_map&lt;key, int&gt; Map;\n</code></pre>\n\n<p>I want to stick to C++11 so cannot use variant.</p>\n"}, {"tags": ["c++", "quantlib"], "answers": [{"comments": [{"owner": {"reputation": 3753, "user_id": 1718575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f36e2abcb1e57219a4b58d32c5bc6d?s=128&d=identicon&r=PG", "display_name": "NicholasM", "link": "https://stackoverflow.com/users/1718575/nicholasm"}, "edited": false, "score": 0, "creation_date": 1573679559, "post_id": 58844613, "comment_id": 103964948, "body": "See also:  <a href=\"https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-bad-practice\" title=\"why is using namespace std considered bad practice\">stackoverflow.com/questions/1452721/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "is_accepted": false, "score": 0, "last_activity_date": 1573674787, "creation_date": 1573674787, "answer_id": 58844613, "question_id": 58843973, "link": "https://stackoverflow.com/questions/58843973/quantlib-riskfreecurve/58844613#58844613", "title": "Quantlib RiskFreeCurve", "body": "<p>Instead of </p>\n\n<pre><code>auto u = make_shared&lt;SimpleQuote&gt;(100.0);\n</code></pre>\n\n<p>Make sure you qualify the <code>boost</code> version:</p>\n\n<pre><code>auto u = boost::make_shared&lt;SimpleQuote&gt;(100.0);\n</code></pre>\n"}], "owner": {"reputation": 5898, "user_id": 817659, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dc6960319324ecebe786580dfca13f07?s=128&d=identicon&r=PG", "display_name": "Ivan", "link": "https://stackoverflow.com/users/817659/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573674787, "creation_date": 1573672172, "last_edit_date": 1573672970, "question_id": 58843973, "link": "https://stackoverflow.com/questions/58843973/quantlib-riskfreecurve", "title": "Quantlib RiskFreeCurve", "body": "<p>Following <a href=\"https://www.implementingquantlib.com/2016/07/translating-python-to-cpp.html\" rel=\"nofollow noreferrer\">this</a> document on how to port a <code>python</code> <code>QL</code> program to <code>C++</code>, I try:</p>\n\n<pre><code>auto cp = 'C';\nauto k = 100.0;\nauto u = make_shared&lt;SimpleQuote&gt;(100.0);\nauto r = make_shared&lt;SimpleQuote&gt;(0.01);\nauto sigma = make_shared&lt;SimpleQuote&gt;(0.20);\nauto t = calendar.businessDaysBetween(d1, expiry) / cDays;\n\nauto exercise = EuropeanExercise(expiry);\nauto payoff = ('C' == cp ? PlainVanillaPayoff(Option::Call, k) :\n                             PlainVanillaPayoff(Option::Put, k));\n\nauto european_option = EuropeanOption(\n    boost::make_shared&lt;PlainVanillaPayoff&gt;(payoff),\n    boost::make_shared&lt;EuropeanExercise&gt;(exercise));\n\nauto riskFreeCurve =\n    make_shared&lt;FlatForward&gt;(0, TARGET(), Handle&lt;Quote&gt;(r), Actual360());\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>qldate.cpp:49:58: error: no matching function for call to \\u2018QuantLib::Handle&lt;QuantLib::Quote&gt;::Handle(std::shared_ptr&lt;QuantLib::SimpleQuote&gt;&amp;)\\u2019\n     make_shared&lt;FlatForward&gt;(0, TARGET(), Handle&lt;Quote&gt;(r), Actual360());\n</code></pre>\n"}, {"tags": ["c++", "mysql", "ubuntu", "cron"], "comments": [{"owner": {"reputation": 109324, "user_id": 21926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6e61d47f9a6ec0a7a286835e51f3332?s=128&d=identicon&r=PG", "display_name": "Sean Bright", "link": "https://stackoverflow.com/users/21926/sean-bright"}, "edited": false, "score": 0, "creation_date": 1573673196, "post_id": 58843931, "comment_id": 103962169, "body": "<i>&quot;Should I use cron&quot;</i> - yes.  <i>&quot;or would it be better to use C++ code&quot;</i> - <b>no</b>"}, {"owner": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "edited": false, "score": 0, "creation_date": 1573676266, "post_id": 58843931, "comment_id": 103963553, "body": "You should use <a href=\"https://dev.mysql.com/doc/refman/8.0/en/mysqldump.html\" rel=\"nofollow noreferrer\">mysqldump</a> to export the database to a file (really just a text file containing the CREATE &amp; INSERT statements needed to import your database). Then you can ftp the file."}], "owner": {"reputation": 1929, "user_id": 689154, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/14cac0f033cdf90b496e8653dc760fb0?s=128&d=identicon&r=PG", "display_name": "Marcus Barnet", "link": "https://stackoverflow.com/users/689154/marcus-barnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573672447, "creation_date": 1573671986, "last_edit_date": 1573672447, "question_id": 58843931, "link": "https://stackoverflow.com/questions/58843931/how-to-export-via-ftp-a-mysql-database-from-phpmyadmin-in-ubuntu", "title": "How to export via FTP a MySQL database from phpmyadmin in Ubuntu", "body": "<p>I have a C/C++ application that runs on Ubuntu and save data in a MySQL database named \"island\".\nI would like to send a copy of the whole database at a specified time (during the night for example) via FTP and save it on my remote server.</p>\n\n<p>Should I use cron or would it be better to use C++ code inside my application to do the same operation?\nUnfortunately, I never did operations like this one in C++, so can you suggest me how to implement such thing, please?</p>\n"}, {"tags": ["c++", "loops"], "comments": [{"owner": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 0, "creation_date": 1573671856, "post_id": 58843877, "comment_id": 103961562, "body": "Place the whole program (minus the title section) in a <code>while(true)</code> loop, instead of just the &quot;decision-making&quot; portion :)"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1573671877, "post_id": 58843877, "comment_id": 103961578, "body": "Why don&#39;t you put your menu/options stuff in a function that you can then call whenever needed?"}, {"owner": {"reputation": 1, "user_id": 12368688, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-09LB-UjXVXM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdGRnk62KLfYzUGSnQ9lBBWYTFkjA/photo.jpg?sz=128", "display_name": "17560", "link": "https://stackoverflow.com/users/12368688/17560"}, "edited": false, "score": 0, "creation_date": 1573672769, "post_id": 58843877, "comment_id": 103961973, "body": "alteredinstance, i tried this but nothing sems to have changed?"}, {"owner": {"reputation": 1, "user_id": 12368688, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-09LB-UjXVXM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdGRnk62KLfYzUGSnQ9lBBWYTFkjA/photo.jpg?sz=128", "display_name": "17560", "link": "https://stackoverflow.com/users/12368688/17560"}, "edited": false, "score": 0, "creation_date": 1573672781, "post_id": 58843877, "comment_id": 103961982, "body": "Jesper, how would I do that?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1573674087, "post_id": 58843877, "comment_id": 103962562, "body": "<i>I have tried using the goto function, however this did not work either.</i> It rarely does. And when it does, good luck convincing your co-workers of that."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 1, "creation_date": 1573674690, "post_id": 58844507, "comment_id": 103962833, "body": "Note that it might be helpful to display the menu again inside the loop. But that is optional."}], "tags": [], "owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "is_accepted": false, "score": 2, "last_activity_date": 1573674352, "creation_date": 1573674352, "answer_id": 58844507, "question_id": 58843877, "link": "https://stackoverflow.com/questions/58843877/trying-to-get-a-c-program-to-loop-back-to-another-point-in-the-code/58844507#58844507", "title": "Trying to get a C++ program to loop back to another point in the code", "body": "<pre><code>std::cin &gt;&gt; option;\n\nwhile (true) { ... }\n</code></pre>\n\n<p>will read the input once, then loop endlessly. What you want is to read the read the input in each loop:</p>\n\n<pre><code>while (true) { \n    std::cin &gt;&gt; option;\n    ... \n}\n</code></pre>\n\n<p>You could also put the first part of your program (where you print the menu) inside this loop, to print the menu in each loop.</p>\n\n<p>But then you should remove the <code>std::cin &gt;&gt; option;</code> option in the last else.</p>\n"}], "owner": {"reputation": 1, "user_id": 12368688, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-09LB-UjXVXM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdGRnk62KLfYzUGSnQ9lBBWYTFkjA/photo.jpg?sz=128", "display_name": "17560", "link": "https://stackoverflow.com/users/12368688/17560"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573674352, "creation_date": 1573671702, "question_id": 58843877, "link": "https://stackoverflow.com/questions/58843877/trying-to-get-a-c-program-to-loop-back-to-another-point-in-the-code", "title": "Trying to get a C++ program to loop back to another point in the code", "body": "<p>I have recently started learning C++ and have come stuck during trying to make a program. I am trying to get the program to link back to the starting options if they enter something which wasn't an option using a while loop. I found a way of doing it using purely if/else statements but it was horrifically inefficient and terrible. Here is my current code:</p>\n\n<pre><code>// program\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main()\n{\n    option:\n    int option = 0;\n  std::cout &lt;&lt; \"Workout App \\n\\n\";\n  std::cout &lt;&lt; \"Please enter which function you wish to engage from the following list: \\n \";\n  std::cout &lt;&lt; \"Press 1 for a BMI calculation \\n \" ;\n  std::cout &lt;&lt; \"Press 2 for a bodyweight circuit builder \\n \" ;\n  std::cout &lt;&lt; \"Press 3 for a weekly workout program, based upon fitness level and goals \\n \";\n  std::cout &lt;&lt; \"Press 4 for to do the roar \\n \";\n  std::cin &gt;&gt; option;\n\n  while (true){\n\n\n      if (option==1){\n          std::cout &lt;&lt; \"BMI Calculation engaged... \\n\\n\";\n          //Run a seperate section of the program, that loops back to the options afterward and has an option to quit the program, for now its contained here.\n          double height, weight, bmi;\n\n          std::cout &lt;&lt; \"Type in your height (m): \";\n          std::cin &gt;&gt; height;\n\n          std::cout &lt;&lt; \"Type in your weight (kg): \";\n          std::cin &gt;&gt; weight;\n\n          bmi = weight / (height * height);\n\n          std::cout &lt;&lt; \"Your BMI is \" &lt;&lt; bmi &lt;&lt; \"\\n\";\n\n          return 0;\n          break;\n      }\n\n      else if (option==2){\n          std::cout &lt;&lt; \"BW Circuit Builder engaged... \\n\\n\";\n          //Run a seperate section of the program, that loops back to the options afterward and has an option to quit the program\n          break;\n      }\n\n      else if (option==3){\n          std::cout &lt;&lt; \"Weekly Workout Program engaged... \\n\\n\";\n          //Run a seperate section of the program, that loops back to the options afterward and has an option to quit the program\n          break;\n      }\n\n      else if (option==4){\n          std::cout &lt;&lt; \"I love you, Daddy. \\n\";\n          break;\n      }\n\n      else {\n          std::cout &lt;&lt; \"Try again \\n\";\n          std::cin &gt;&gt; option;\n        //Get this section to loop back to the starting options\n\n      }\n  }\n\n\n\n\n }\n</code></pre>\n\n<p>I have tried using the goto function, however this did not work either. Is anyone able to help me here?\nThanks</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1573671515, "post_id": 58843809, "comment_id": 103961412, "body": "Your assignment operator doesn&#39;t modify <code>this</code>. It doesn&#39;t actually do any assignment. That should have been a red flag."}, {"owner": {"reputation": 19, "user_id": 12279037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ba8907758c32956e98bbfc9cc093f1?s=128&d=identicon&r=PG&f=1", "display_name": "kino92", "link": "https://stackoverflow.com/users/12279037/kino92"}, "edited": false, "score": 0, "creation_date": 1573671678, "post_id": 58843809, "comment_id": 103961485, "body": "Ok maybe i&#39;m a bit slow here. But why does it need to modify this? why can&#39;t i return temp_buff instead of this?"}, {"owner": {"reputation": 19, "user_id": 12279037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ba8907758c32956e98bbfc9cc093f1?s=128&d=identicon&r=PG&f=1", "display_name": "kino92", "link": "https://stackoverflow.com/users/12279037/kino92"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1573671736, "post_id": 58843809, "comment_id": 103961506, "body": "@0x5453 oh so the problem is that i can use rhs.size() as a length to my buffer? I see. Do you have any link where i can read about this?"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1573671745, "post_id": 58843809, "comment_id": 103961512, "body": "Well, if I was to assign 5 to an int, I&#39;d expect that int to hold the value of 5. If its value didn&#39;t change by the assignment, how can it hold a new value?"}, {"owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "edited": false, "score": 0, "creation_date": 1573671808, "post_id": 58843809, "comment_id": 103961545, "body": "@kino92 Sorry, ignore that comment.  I didn&#39;t see that you are allocating those arrays on the heap, which is fine.  (Though you should still consider switching to <a href=\"https://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> for simplicity.)"}, {"owner": {"reputation": 19, "user_id": 12279037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ba8907758c32956e98bbfc9cc093f1?s=128&d=identicon&r=PG&f=1", "display_name": "kino92", "link": "https://stackoverflow.com/users/12279037/kino92"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1573671989, "post_id": 58843809, "comment_id": 103961630, "body": "@StoryTeller-UnslanderMonica So does = overloading only work on this? I assumed that when i say buf = test i&#39;m actually saying take test as a parameter to the overloading function and give buf whatever the return value is."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1573672071, "post_id": 58843809, "comment_id": 103961663, "body": "No. When you say <code>buf = test</code> then <code>this</code> is bound to <code>buf</code>, while <code>test</code> is bound to <code>other</code>. The assignment operator must then modify <code>this</code> for any changes to occur."}, {"owner": {"reputation": 19, "user_id": 12279037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ba8907758c32956e98bbfc9cc093f1?s=128&d=identicon&r=PG&f=1", "display_name": "kino92", "link": "https://stackoverflow.com/users/12279037/kino92"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1573672416, "post_id": 58843809, "comment_id": 103961808, "body": "@StoryTeller-UnslanderMonica well that explains a few things :) is this &quot;bound to buf&quot; called something? Just wanted to read about it so i can learn. cppreference have this in there examples but i can&#39;t find anything that states this is the case."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1573672513, "post_id": 58843809, "comment_id": 103961853, "body": "@kino92 - The official term is &quot;reference binding&quot;. References are said to bind to the object they alias. Even though <code>this</code> is not a reference officially, the term also holds for it."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1573672792, "post_id": 58843809, "comment_id": 103961987, "body": "The compiler should have told you that <code>return temp_buff;</code> is returning a reference to a local variable."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 2, "creation_date": 1573673674, "post_id": 58843809, "comment_id": 103962382, "body": "<i>However i wanted to use the copy ctor that i already designed since the code is very similar.</i> This sounds like you&#39;re looking for the <a href=\"https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom\">Copy and Swap Idiom</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1573674092, "post_id": 58843809, "comment_id": 103962564, "body": "maybe this helps, an alternative way to write <code>a=b</code> is <code>a.operator=(b);</code> then it isnt much different from other member functions, there is no magic behind the scences that does assign the return value to <code>a</code>. In most cases the return value of <code>operator=</code> is simply ignored"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1573675092, "post_id": 58843809, "comment_id": 103963031, "body": "Maybe <a href=\"https://stackoverflow.com/q/4421706/10957435\">this</a> will answer your question."}], "owner": {"reputation": 19, "user_id": 12279037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7ba8907758c32956e98bbfc9cc093f1?s=128&d=identicon&r=PG&f=1", "display_name": "kino92", "link": "https://stackoverflow.com/users/12279037/kino92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573671408, "creation_date": 1573671408, "question_id": 58843809, "link": "https://stackoverflow.com/questions/58843809/c-overloading-the-operator-with-the-help-of-copy-ctor", "title": "c++ overloading the = operator with the help of copy ctor", "body": "<p>I'm constructed a simple container called buffer. When overloading the = operator i'm getting the following error </p>\n\n<blockquote>\n  <p>Exception thrown at 0x774AEBA5 (ntdll.dll) in init_list_test.exe:\n  0xC000000D: An invalid parameter was passed to a service or function.\n  Unhandled exception at 0x774AEBA5 (ntdll.dll) in init_list_test.exe:\n  0xC000000D: An invalid parameter was passed to a service or function.</p>\n</blockquote>\n\n<p>Not really sure what this means.</p>\n\n<p>Here is the code to reproduce:</p>\n\n<pre><code>#include \"buffer.h\"\nint main()\n{\n    buffer buf(10);\n    buffer test(10);\n    buf = test;\n\n\n    return 0;\n}\n</code></pre>\n\n<p>in buffer.cpp</p>\n\n<pre><code>#include \"buffer.h\"\n#include &lt;iostream&gt;\nsize_t buffer::get_size() const\n{\n    return length;\n}\nbuffer::buffer(size_t length) : start(new int[length]), length(length)\n{\n    std::cout &lt;&lt; length &lt;&lt; +\" size\" &lt;&lt; std::endl;\n}\n\nbuffer::buffer(const buffer&amp; rhs) : start(new int[length]), length(rhs.get_size())\n{\n    std::copy(rhs.begin(), rhs.end(), start);\n}\n\nbuffer&amp; buffer::operator=(const buffer&amp; rhs)\n{\n    buffer temp_buff(rhs);\n    return temp_buff;\n\n}\n\nint* buffer::begin()\n{\n    return start;\n}\n\nint* buffer::end()\n{\n    return start + length;\n}\n\nconst int* buffer::begin() const\n{\n    return start;\n}\n\nconst int* buffer::end() const\n{\n    return start + length;\n}\n</code></pre>\n\n<p>in buffer.h</p>\n\n<pre><code>#pragma once\nclass buffer {\n    int* start;\n    size_t length;\npublic:\n    size_t get_size() const;\n    explicit buffer(size_t size);\n    buffer(const buffer&amp; rhs);\n    buffer&amp; operator=(const buffer&amp; rhs); \n    int* begin(); \n    int* end();\n    const int* begin() const;\n    const int* end() const;\n};\n</code></pre>\n\n<p>I saw on cppref that the offical way was to do something like this code below:</p>\n\n<pre><code>// assume the object holds reusable storage, such as a heap-allocated buffer mArray\nT&amp; operator=(const T&amp; other) // copy assignment\n{\n    if (this != &amp;other) { // self-assignment check expected\n        if (other.size != size) {         // storage cannot be reused\n            delete[] mArray;              // destroy storage in this\n            size = 0;\n            mArray = nullptr;             // preserve invariants in case next line throws\n            mArray = new int[other.size]; // create storage in this\n            size = other.size;\n        } \n        std::copy(other.mArray, other.mArray + other.size, mArray);\n    }\n    return *this;\n}\n</code></pre>\n\n<p>However i wanted to use the copy ctor that i already designed since the code is very similar.</p>\n"}, {"tags": ["c++", "stringstream"], "comments": [{"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1573670998, "post_id": 58843645, "comment_id": 103961187, "body": "Please show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, it doesn&#39;t appear that <code>ss</code> contains any newlines?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1573671686, "post_id": 58843645, "comment_id": 103961489, "body": "dealing with all the edge cases in CSV parsing isn&#39;t easy, I&#39;d recommend using a library instead, e.g <a href=\"https://github.com/ben-strasser/fast-cpp-csv-parser\" rel=\"nofollow noreferrer\">github.com/ben-strasser/fast-cpp-csv-parser</a>"}, {"owner": {"reputation": 21, "user_id": 11441123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b5855fbf25f744f3ecc30e1a5b6ea8?s=128&d=identicon&r=PG&f=1", "display_name": "KnightCifer", "link": "https://stackoverflow.com/users/11441123/knightcifer"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1573671961, "post_id": 58843645, "comment_id": 103961620, "body": "Thanks, i just added a minimal reproducible example and a debugger screenshot just in case. Since this is university homework i cant use a external library"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1573672383, "post_id": 58843645, "comment_id": 103961793, "body": "<code>ss</code> only contains <code>&quot;Cliente&quot;</code>, you need to read the next line from the file then call <code>ss.str(line)</code>, I don&#39;t think you need <code>ignore</code> at all"}, {"owner": {"reputation": 21, "user_id": 11441123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b5855fbf25f744f3ecc30e1a5b6ea8?s=128&d=identicon&r=PG&f=1", "display_name": "KnightCifer", "link": "https://stackoverflow.com/users/11441123/knightcifer"}, "reply_to_user": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1573672487, "post_id": 58843645, "comment_id": 103961837, "body": "Yeah but how do i skip the next line?"}, {"owner": {"reputation": 22416, "user_id": 5494370, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152989584621642/picture?type=large", "display_name": "Alan Birtles", "link": "https://stackoverflow.com/users/5494370/alan-birtles"}, "edited": false, "score": 0, "creation_date": 1573672585, "post_id": 58843645, "comment_id": 103961885, "body": "you&#39;ve already read the <code>&quot;Cliente&quot;</code> line, you don&#39;t need to skip it"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1573674559, "post_id": 58843645, "comment_id": 103962767, "body": "Unrelated but possible source of errors: <code>while (!fe.eof()) { ... }</code> should be <code>while(getline(fe, linea)) { ... } </code> See also <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-i-e-while-stream-eof-cons\">this question</a>"}], "owner": {"reputation": 21, "user_id": 11441123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80b5855fbf25f744f3ecc30e1a5b6ea8?s=128&d=identicon&r=PG&f=1", "display_name": "KnightCifer", "link": "https://stackoverflow.com/users/11441123/knightcifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573671878, "creation_date": 1573670736, "last_edit_date": 1573671878, "question_id": 58843645, "link": "https://stackoverflow.com/questions/58843645/how-can-i-skip-a-single-line-while-reading-a-file-using-stringstream", "title": "How can i skip a single line while reading a file using StringStream?", "body": "<p>I'm trying to read a CSV file that looks like this:<a href=\"https://i.stack.imgur.com/39Ueq.png\" rel=\"nofollow noreferrer\">screenshot of a CSV file</a></p>\n\n<p>When i read a line that says \"Cliente\" I want to skip it and read the next line. When i read a line \"Itinerarios\" I also want to skip it and read all the lines untill the next \"Cliente\" line. Basically Cliente is a class and Itinerario is a different class that is associated with Cliente, that's why i'm trying to read it that way.</p>\n\n<p>I tried using ss.ignore() in this context but it seems to do nothing: My line is still \"Cliente\" and the code cant extract the values.</p>\n\n<pre><code>    if (fe.good()) {\n    while (!fe.eof()) {\n        getline(fe, linea);\n        stringstream ss;\n\n        if (linea != \"\") {\n            ++total;\n\n            if (total &gt; 2) {\n                if (linea == \"Cliente\") {\n\n\n                    ss &lt;&lt; linea;\n                    ss.ignore(20,'\\n');\n\n                    // Starts reading Cliente stuff\n                    getline(ss, dni, ';');\n\n\n                    getline(ss, pass, ';');\n</code></pre>\n\n<p>EDIT: Here's a reduced example:</p>\n\n<pre><code>int main(int argc, char** argv) {\n\nifstream fe;\nstring linea;\nint total = 0; // Counts lines\n\nstring dni;\n\n//Reads the file\nfe.open(\"ClientesItinerarios.csv\");\n\nif (fe.good()) {\n    while (!fe.eof()) {\n        getline(fe, linea); //Toma una l\ufffdnea del fichero\n        stringstream ss;\n\n        if (linea != \"\") {\n            ++total;\n\n            if (total &gt; 2) {\n                if (linea == \"Cliente\") {\n\n\n                    ss &lt;&lt; linea;\n                    ss.ignore(20,'\\n');\n\n                    // Read only the first value to make the example shorter\n                    getline(ss, dni, ';'); //Stores the first part into dni\n\n                }\n\n            }\n\n        }\n\n    }\n    fe.close();\n} else {\n    cerr &lt;&lt; \"Cannot read file\" &lt;&lt; endl;\n}\n\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>and if it helps heres a screenshot <a href=\"https://i.stack.imgur.com/iLhkT.png\" rel=\"nofollow noreferrer\">of my debugger when its over getline(ss, dni, ';'); </a></p>\n"}, {"tags": ["c++", "mutex", "mutual-exclusion"], "comments": [{"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 2, "creation_date": 1573674366, "post_id": 58843543, "comment_id": 103962686, "body": "Isn&#39;t the interest of the bakery algorithm the fact that it works without atomic operations?"}, {"owner": {"reputation": 68, "user_id": 12148526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-K4f-wbQLHJ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4LhNwGfUSVgkygIIRgy2b1Dqy-w/photo.jpg?sz=128", "display_name": "Hlib Pylypets", "link": "https://stackoverflow.com/users/12148526/hlib-pylypets"}, "reply_to_user": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1573675767, "post_id": 58843543, "comment_id": 103963332, "body": "Yeah, to some extent, I agree with you. But the restriction for my task is a ticket uniqueness and I&#39;m just wondering whether it&#39;s possible also to bound tickets. But I don&#39;t quite understand what is the point of making them unique. Is it more optimal?"}], "owner": {"reputation": 68, "user_id": 12148526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-K4f-wbQLHJ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4LhNwGfUSVgkygIIRgy2b1Dqy-w/photo.jpg?sz=128", "display_name": "Hlib Pylypets", "link": "https://stackoverflow.com/users/12148526/hlib-pylypets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1573673930, "creation_date": 1573670307, "last_edit_date": 1573673930, "question_id": 58843543, "link": "https://stackoverflow.com/questions/58843543/how-to-bound-and-make-unique-ticket-values-in-lamports-bakery-algorithm-mutex", "title": "How to bound and make unique ticket values in Lamport&#39;s Bakery Algorithm? Mutex, C++", "body": "<p>community. I have searched for a while, but haven't found any optimizations for <strong>Lamport's bakery algorithm</strong> that ensures unique ticket values for each thread and bounds these values within some range.</p>\n\n<p>In other words, there exists a <strong>Black-White bakery algorithm</strong> which <em>bounds</em> the ticket values, but how can it be optimized to ensure them being <em>unique</em>?\nOr I can write the solution with an atomic variable(fetch_add operation) and hereby make ticket values unique, but then how this variable can be bounded or in which cases it should be dropped??</p>\n\n<p>Below is the code which gives unique tickets for each thread. Please, help me to bound this _ticket_counter by applying some decrease operations or give any idea, link for a suitable algorithm.</p>\n\n<pre><code>extern const int NUM_THREADS;\n\nclass ImprovedBakeryLock : public Lockable {\npublic:\n    ImprovedBakeryLock();\n    ~ImprovedBakeryLock();\n    void lock(int i) override;\n    bool try_lock(int i) override;\n    void unlock(int i) override;\nprivate:\n    std::atomic&lt;uint64_t&gt; _ticket_counter;\n    volatile uint64_t* _token;\n    const int _n;\n};\nImprovedBakeryLock::ImprovedBakeryLock() :\n    _n(NUM_THREADS), _ticket_counter(1)\n{\n    _token = new uint64_t[_n];\n    memset((void*)_token, 0, _n * sizeof(uint64_t));\n}\nvoid ImprovedBakeryLock::lock(int num)\n{\n    _token[num] = _ticket_counter.fetch_add(1, std::memory_order_relaxed);\n\n    for (int j = 0; j &lt; _n; ++j) {\n        while (_token[j] != 0 &amp;&amp; _token[j] &lt; _token[num])\n            std::this_thread::yield();\n    }\n}\nbool ImprovedBakeryLock::try_lock(int num)\n{\n    _token[num] = _ticket_counter.fetch_add(1, std::memory_order_relaxed);\n    bool acquired = true;\n    for (int j = 0; j &lt; _n &amp;&amp; acquired; ++j) {\n        if (_token[j] != 0 &amp;&amp; _token[j] &lt; _token[num]) {\n            acquired = false;\n            _token[num] = 0;\n        }\n    }\n    return acquired;\n}\nvoid ImprovedBakeryLock::unlock(int num)\n{\n    _token[num] = 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "libraries", "intel-mkl", "cmake-language"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1573669608, "post_id": 58843333, "comment_id": 103960611, "body": "Are you cross-compiling your application on a 32-bit host? If you&#39;re already on a 64-bit host then you don&#39;t need the <code>-m64</code> flag."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1573669706, "post_id": 58843333, "comment_id": 103960643, "body": "As for the actual library files and how to link with them, use the <code>target_link_libraries</code> command."}], "answers": [{"comments": [{"owner": {"reputation": 7704, "user_id": 3964397, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640272a326ae5f3cd89364b78f2108c9?s=128&d=identicon&r=PG", "display_name": "tjwrona1992", "link": "https://stackoverflow.com/users/3964397/tjwrona1992"}, "edited": false, "score": 1, "creation_date": 1573670964, "post_id": 58843674, "comment_id": 103961172, "body": "I agree, you should be using <code>target_*</code> cmake functions to localize the scope of your actions. The CMake code in your example is very old-style. For example the <code>include_directories</code> and <code>link_libraries</code> functions are listed as deprecated within the CMake documentation itself now."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1573671217, "post_id": 58843674, "comment_id": 103961277, "body": "<code>&quot;-Wl,--no-as-needed&quot;</code> that can be put in <code>target_link_options</code>"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1573671328, "post_id": 58843674, "comment_id": 103961330, "body": "@GuillaumeRacicot, from the point of view of best practices, can be put of should be put?"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1573671567, "post_id": 58843674, "comment_id": 103961436, "body": "@Evg should. Just like it&#39;s better to call <code>target_compile_definitions</code> than passing <code>-DXYZ</code> in <code>target_compile_options</code>"}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1573672306, "post_id": 58843674, "comment_id": 103961767, "body": "@Evg searching around, there&#39;s a target property <a href=\"https://cmake.org/cmake/help/latest/prop_tgt/LINK_WHAT_YOU_USE.html\" rel=\"nofollow noreferrer\"><code>LINK_WHAT_YOU_USE</code></a> that automatically adds the required flags such as <code>--no-as-needed</code>"}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": true, "score": 2, "last_activity_date": 1573673756, "last_edit_date": 1573673756, "creation_date": 1573670850, "answer_id": 58843674, "question_id": 58843333, "link": "https://stackoverflow.com/questions/58843333/linking-libraries-translating-from-command-line-to-make/58843674#58843674", "title": "Linking libraries translating from command line to Make", "body": "<p>An example for sequential ILP64 version:</p>\n\n<pre><code>target_include_directories(PSD_Projections PUBLIC \"${MKL_DIR}/include\")\ntarget_compile_definitions(PSD_Projections PUBLIC MKL_ILP64)\ntarget_link_directories(PSD_Projections PUBLIC \"${MKL_DIR}/lib/intel64\")\ntarget_link_libraries(PSD_Projections PUBLIC mkl_intel_ilp64 mkl_sequential mkl_core m dl)\ntarget_link_options(PSD_Projections PUBLIC \"-Wl,--no-as-needed\")\n</code></pre>\n\n<p>It can easily be adjusted to your needs.</p>\n\n<p>An example how to set C++ standard version and compiler options:</p>\n\n<pre><code>target_compile_features(PSD_Projections PUBLIC cxx_std_14)\ntarget_compile_options(PSD_Projections PUBLIC -Wall -Wpedantic -Wextra -m64 -march=native)\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 12075307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfd6d0453042b87b9954b6a786068fbe?s=128&d=identicon&r=PG&f=1", "display_name": "schajan", "link": "https://stackoverflow.com/users/12075307/schajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 58843674, "answer_count": 1, "score": 0, "last_activity_date": 1573673756, "creation_date": 1573669453, "question_id": 58843333, "link": "https://stackoverflow.com/questions/58843333/linking-libraries-translating-from-command-line-to-make", "title": "Linking libraries translating from command line to Make", "body": "<p>I am trying to get the intel math kernel library (mkl) to run. There is a tool (<a href=\"https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor\" rel=\"nofollow noreferrer\">https://software.intel.com/en-us/articles/intel-mkl-link-line-advisor</a>) that prints the necessary, environment-dependent cmd commands to use it for C++ scripting. For me it says:</p>\n\n<p><strong>Use this link line:</strong>\n ${MKLROOT}/lib/libmkl_intel_lp64.a ${MKLROOT}/lib/libmkl_intel_thread.a ${MKLROOT}/lib/libmkl_core.a -liomp5 -lpthread -lm -ldl</p>\n\n<p><strong>Compiler options:</strong>\n -m64 -I${MKLROOT}/include</p>\n\n<p>My goal is to write this in a CMake script. Where am I going wrong / what do I have to write to make this work?</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.15)\nproject(PSD_Projections)\n\nset(CMAKE_CXX_STANDARD 14)\nset(MKL_DIR /opt/intel/mkl)\n\n# Part for the linker line\n# This seems to be somewhat okay\n# However I can't figure out what to do about the other linker line arguments\nfind_library(LIB1 mkl_intel_lp64 ${MKL_DIR}/lib)\nfind_library(LIB2 mkl_intel_thread ${MKL_DIR}/lib)\nfind_library(LIB3 mkl_core ${MKL_DIR}/lib)\nlink_libraries(${LIB1} ${LIB2} ${LIB3})\n\n# Part for the compiler options.\n# ${MKL_DIR}/include is found and exists\n# I don't know what to do about the -m64 \ninclude_directories(${MKL_DIR}/include)\n\nadd_executable(PSD_Projections main.cpp)\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-express"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1573668457, "post_id": 58843052, "comment_id": 103960091, "body": "Use a debugger."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1573668543, "post_id": 58843052, "comment_id": 103960141, "body": "If the code behaves differently, when using different compilers, typically, that means, that: your code depended upon a certain behavior of undefined behavior. It&#39;s a bold claim that compiler doesn&#39;t work properly. And in 99.99% cases, such claim is wrong."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 1, "creation_date": 1573669250, "post_id": 58843052, "comment_id": 103960441, "body": "Since you added the <code>(LPCWSTR)</code> relative to the original code, it seems that the compiler was complaining about <code>screen</code> having the wrong type. Don&#39;t add explicit casts if you are not exactly sure what they do. This cast does <i>not</i> change the narrow into a wide string. It will lead to undefined behavior instead. Rather than doing that, search for (and if you don&#39;t find anything) ask for what the error message means. Also use <code>static_cast</code> or <code>reinterpret_cast</code> instead of C-style casts."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10296851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7e0a237f767bbdfd2b3f287af463fe?s=128&d=identicon&r=PG&f=1", "display_name": "Xeno", "link": "https://stackoverflow.com/users/10296851/xeno"}, "edited": false, "score": 0, "creation_date": 1573669518, "post_id": 58843117, "comment_id": 103960563, "body": "Thnaks for answering. Earlier I was using wchar_t but then it didn&#39;t work in Code::Blocks. When I switched it to char, it worked. I now switched to wchar_t it worked, but it is still not displaying whitespace properly, it just shows a wierd character in its place, can you help me fix that?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1, "user_id": 10296851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7e0a237f767bbdfd2b3f287af463fe?s=128&d=identicon&r=PG&f=1", "display_name": "Xeno", "link": "https://stackoverflow.com/users/10296851/xeno"}, "edited": false, "score": 0, "creation_date": 1573669593, "post_id": 58843117, "comment_id": 103960599, "body": "@Xeno &quot;worked&quot; is a fuzzy term. Prefer to describe the expected and received behaviour."}, {"owner": {"reputation": 1, "user_id": 10296851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7e0a237f767bbdfd2b3f287af463fe?s=128&d=identicon&r=PG&f=1", "display_name": "Xeno", "link": "https://stackoverflow.com/users/10296851/xeno"}, "edited": false, "score": 0, "creation_date": 1573670000, "post_id": 58843117, "comment_id": 103960772, "body": "By &#39;worked&#39;I mean compiled and executed properly as expected"}, {"owner": {"reputation": 1, "user_id": 10296851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7e0a237f767bbdfd2b3f287af463fe?s=128&d=identicon&r=PG&f=1", "display_name": "Xeno", "link": "https://stackoverflow.com/users/10296851/xeno"}, "edited": false, "score": 0, "creation_date": 1573670153, "post_id": 58843117, "comment_id": 103960838, "body": "Here&#39;s the output: <a href=\"https://imgur.com/a/05UEXWa\" rel=\"nofollow noreferrer\">imgur.com/a/05UEXWa</a>"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 1, "user_id": 10296851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7e0a237f767bbdfd2b3f287af463fe?s=128&d=identicon&r=PG&f=1", "display_name": "Xeno", "link": "https://stackoverflow.com/users/10296851/xeno"}, "edited": false, "score": 0, "creation_date": 1573670175, "post_id": 58843117, "comment_id": 103960844, "body": "@Xeno Just be consistent and always use <code>wstring</code>/<code>wchar_t</code>/<code>L&quot;...&quot;</code> or <code>string</code>/<code>char</code>/<code>&quot;...&quot;</code>, but don&#39;t mix them. Which one <code>WriteConsoleOutputCharacter</code> expects depends on whether UNICODE is enabled. See <a href=\"https://docs.microsoft.com/en-us/windows/win32/learnwin32/working-with-strings\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/learnwin32/&hellip;</a> and <a href=\"https://docs.microsoft.com/en-us/windows/console/writeconsoleoutputcharacter\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/console/&hellip;</a>"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 0, "last_activity_date": 1573668527, "creation_date": 1573668527, "answer_id": 58843117, "question_id": 58843052, "link": "https://stackoverflow.com/questions/58843052/vs-express-dosent-compile-the-code-properly/58843117#58843117", "title": "VS Express dosen&#39;t compile the code properly (?)", "body": "<p>You have a mix of narrow and wide characters.  The cast <code>(LPCWSTR)screen</code> in your call to <code>WriteConsoleOutputCharacter</code> is an indication something isn't right.</p>\n\n<p>In this case, <code>screen</code> is a <code>char</code> but you want it to be <code>wchar_t</code> instead.  You're already using <code>wstring</code> for <code>tetromine</code>, and <code>L</code> prefixed character strings.  You just need to ensure the rest of the code is also using wide characters.</p>\n"}], "owner": {"reputation": 1, "user_id": 10296851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7e0a237f767bbdfd2b3f287af463fe?s=128&d=identicon&r=PG&f=1", "display_name": "Xeno", "link": "https://stackoverflow.com/users/10296851/xeno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "closed_date": 1573679917, "accepted_answer_id": 58843117, "answer_count": 1, "score": -2, "last_activity_date": 1573668527, "creation_date": 1573668259, "question_id": 58843052, "link": "https://stackoverflow.com/questions/58843052/vs-express-dosent-compile-the-code-properly", "closed_reason": "Not suitable for this site", "title": "VS Express dosen&#39;t compile the code properly (?)", "body": "<p>So I used to use Code::Blocks IDE, and like it a lot. Recently I switched to Visual Studio. I downloaded VS Express, it was 600mb and I can only use 1gb data per day, I don't have Wi-Fi, so I that was my only option.I inserted the same code that compiled properly in Code::Blocks in it , it took a few tweaks to make it work in VS, but when I finally check it, the output was totally different, Instead of a command line Tetris, it glitched and filled the command prompt with strange characters.</p>\n\n<p>This is the code I tweaked a bit to make it work in VS:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n#include &lt;string&gt;\n#include &lt;windows.h&gt;\nusing namespace std;\n\nint nScreenHeight = 30;\nint nScreenWidth = 80;\nint nFieldWidth = 10;\nint nFieldHeight = 25;\nunsigned char *pField = NULL;\nwstring tetromine[7];\n\nint currentPiece = 0;\nint currentRotation = 0;\nint currentX = (nFieldWidth/2);\nint currentY = 0;\nunsigned int score = 0;\n\nint pieceCounter = 0;\nint speed = 20;\nint speedCounter = 0;\nbool forcePieceDown =false;\nbool key[4];\nbool shiftGridDown = false;\n\nint rotate(int px,int py,int r)\n{\n    switch(r/90)\n    {\n    case 0:\n        return py*4+px;//0 degs\n    case 1:\n        return 12+py - (px*4);//90 degs\n    case 2:\n        return 15 - (py*4) - px;//180 degs\n    case 3:\n        return 3 - py + (px*4);//270 degs\n    }\n    return 0;\n}\n\nint doesPieceFit(int id,int rot, int x, int y)\n{\n    for(int px = 0;px&lt;4;px++){\n        for(int py = 0;py&lt;4;py++){\n            int pi = rotate(px,py,rot);\n            int fi = (y+py) * nFieldWidth + (x+px);\n            if(x + px&gt;= 0 &amp;&amp; x+px &lt; nFieldWidth){\n                if(tetromine[id][pi] == L'X' &amp;&amp; pField[fi]!=0){\n                    return false;\n                }\n            }\n        }\n    }\n    return true;\n}\n\nvoid lineCheck(){\n    bool line = true;\n    int lines = 0;\n    for(int y = 0; y&lt;= nFieldHeight-1;y++){\n        for(int x = 1; x&lt; nFieldWidth-1;x++){\n            if(pField[(y)*nFieldWidth+x]!=0){\n                line &amp;= true;\n            } else line &amp;= false;\n        }\n        if(line) lines++;\n        if(line){\n            for(int x = 1; x&lt; nFieldWidth-1;x++){\n                pField[(y)*nFieldWidth+x] = 8;\n            }\n        }\n    }\n}\n\n\nint main()\n{\n\n    //assets\n    tetromine[0].append(L\"..X.\");\n    tetromine[0].append(L\"..X.\");\n    tetromine[0].append(L\"..X.\");\n    tetromine[0].append(L\"..X.\");\n\n    tetromine[1].append(L\"..X.\");\n    tetromine[1].append(L\".XX.\");\n    tetromine[1].append(L\".X..\");\n    tetromine[1].append(L\"....\");\n\n    tetromine[2].append(L\".X..\");\n    tetromine[2].append(L\".XX.\");\n    tetromine[2].append(L\"..X.\");\n    tetromine[2].append(L\"....\");\n\n    tetromine[3].append(L\"....\");\n    tetromine[3].append(L\".XX.\");\n    tetromine[3].append(L\".XX.\");\n    tetromine[3].append(L\"....\");\n\n    tetromine[4].append(L\"..X.\");\n    tetromine[4].append(L\".XX.\");\n    tetromine[4].append(L\"..X.\");\n    tetromine[4].append(L\"....\");\n\n    tetromine[5].append(L\"....\");\n    tetromine[5].append(L\".XX.\");\n    tetromine[5].append(L\"..X.\");\n    tetromine[5].append(L\"..X.\");\n\n    tetromine[6].append(L\"....\");\n    tetromine[6].append(L\".XX.\");\n    tetromine[6].append(L\".X..\");\n    tetromine[6].append(L\".X..\");\n\n    pField = new unsigned char[nFieldWidth*nFieldHeight];\n    for(int x = 0; x&lt;nFieldWidth; x++)\n    {\n        for(int y = 0; y&lt;nFieldHeight; y++)\n        {\n            pField[y*nFieldWidth + x] = (x==0||x==nFieldWidth -1 || y == nFieldHeight - 1) ? 9 : 0;\n        }\n    }\n\n    char *screen = new char [nScreenWidth * nScreenHeight];\n    HANDLE hConsole = CreateConsoleScreenBuffer(GENERIC_READ | GENERIC_WRITE, 0, NULL, CONSOLE_TEXTMODE_BUFFER, NULL);\n    SetConsoleActiveScreenBuffer(hConsole);\n    DWORD dwBytesWritten = 0;\n\n    //Display frame\n    COORD here;\n    here.X = 0;\n    here.Y = 0;\n    WriteConsoleOutputCharacter(hConsole, (LPCWSTR)screen, nScreenWidth * nScreenHeight,here, &amp;dwBytesWritten);\n\n    bool gameOver = false;\n\n    while(!gameOver)\n    {\n        Sleep(100);\n        speedCounter++;\n        if(speedCounter&gt;=speed){\n            forcePieceDown = true;\n            speedCounter = 0;\n        } else {\n            forcePieceDown = false;\n        }\n\n        if(shiftGridDown){\n            score++;\n            for(int y = nFieldHeight-2;y &gt; 0;y--){\n                for(int x = 1;x&lt;nFieldWidth -1;x++){\n                    if((pField[(y)*nFieldWidth+x]) != 0){\n                        pField[(y+1)*nFieldWidth+x] = pField[(y)*nFieldWidth+x];\n                        pField[(y)*nFieldWidth+x] = 0;\n                    }\n                }\n            }\n            shiftGridDown = false;\n            lineCheck();\n        }\n\n        for(int x = 1; x&lt; nFieldWidth-1;x++){\n            if(pField[(nFieldHeight-2)*nFieldWidth+x]==8){\n                pField[(nFieldHeight-2)*nFieldWidth+x]=0;\n                if(x==nFieldWidth-2){\n                    shiftGridDown = true;\n                    score+=100;\n                }\n            }\n        }\n\n        for(int k = 0;k&lt;4;k++){                              //  R   L   D  Z\n            key[k] = (0x8000 &amp; GetAsyncKeyState((unsigned char)(\"DASZ\"[k]))) != 0;\n        }\n        if(key[1]){\n            if(doesPieceFit(currentPiece,currentRotation,currentX-1,currentY)){\n                currentX = currentX-1;\n            }\n        }else if(key[0]){\n            if(doesPieceFit(currentPiece,currentRotation,currentX+1,currentY)){\n                currentX = currentX+1;\n            }\n        }if(key[2]){\n            speedCounter = speed;\n        }\n        if(key[3]&amp;&amp;doesPieceFit(currentPiece,currentRotation+90,currentX,currentY)){\n            (currentRotation+90&lt;=270)?currentRotation+=90:currentRotation=0;\n        }\n\n        if(forcePieceDown){\n            if(doesPieceFit(currentPiece,currentRotation,currentX,currentY+1))\n                currentY++;\n            else {\n                //lock piece\n                pieceCounter++;\n                if(pieceCounter%5==0){\n                    speed-=1;\n                }\n                for(int px = 0;px&lt;4;px++){\n                    for(int py = 0;py&lt;4;py++){\n                        if(tetromine[currentPiece][rotate(px,py,currentRotation)]==L'X'){\n                            pField[(currentY+py)*nFieldWidth+(currentX+px)] = currentPiece+1;\n                        }\n                    }\n                }\n                score+=20;\n                //check lines\n                lineCheck();\n\n                //get next piece\n                currentX = nFieldWidth/2;\n                currentY = 0;\n                currentRotation = 0;\n                srand(time(0));\n                currentPiece = rand() % 7;\n\n                //check game over\n                gameOver = !doesPieceFit(currentPiece,currentRotation,currentX,currentY);\n            }\n        }\n\n        //draw field\n        for(int x = 0; x &lt; nFieldWidth; x++)\n        {\n            for(int y = 0; y &lt; nFieldHeight; y++)\n            {\n                screen[(y+2)*nScreenWidth + (x+  2)] = L\" xxxxxxx=#\"[pField[y*nFieldWidth + x]];\n            }\n        }\n\n        //draw piece\n        for(int px = 0;px&lt;4;px++){\n            for(int py = 0;py&lt;4;py++){\n                    if(tetromine[currentPiece][rotate(px,py,currentRotation)] == L'X'){\n                        screen[(currentY+py+2)*nScreenWidth+(currentX+px+2)] = '+';\n                    }\n            }\n        }\n        string s(\"Score -&gt; \");\n        string num;\n        int tmp = score;\n        while(tmp!=0){\n            int rem = tmp%10;\n            tmp /= 10;\n            num = ((char)(48+rem)) + num;\n        }\n        s+=num;\n        for(int i = 0; i&lt;s.size();i++){\n            screen[i] = s[i];\n        }\n\n        //display frame\n        WriteConsoleOutputCharacter(hConsole, (LPCWSTR)screen, nScreenWidth * nScreenHeight,here, &amp;dwBytesWritten);\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>This is the origional code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;time.h&gt;\n#include &lt;string&gt;\n#include &lt;windows.h&gt;\nusing namespace std;\n\nint nScreenHeight = 30;\nint nScreenWidth = 80;\nint nFieldWidth = 10;\nint nFieldHeight = 25;\nunsigned char *pField = NULL;\nwstring tetromine[7];\n\nint currentPiece = 0;\nint currentRotation = 0;\nint currentX = (nFieldWidth/2);\nint currentY = 0;\nunsigned int score = 0;\n\nint pieceCounter = 0;\nint speed = 20;\nint speedCounter = 0;\nbool forcePieceDown =false;\nbool key[4];\nbool shiftGridDown = false;\n\nint rotate(int px,int py,int r)\n{\n    switch(r/90)\n    {\n    case 0:\n        return py*4+px;//0 degs\n    case 1:\n        return 12+py - (px*4);//90 degs\n    case 2:\n        return 15 - (py*4) - px;//180 degs\n    case 3:\n        return 3 - py + (px*4);//270 degs\n    }\n    return 0;\n}\n\nint doesPieceFit(int id,int rot, int x, int y)\n{\n    for(int px = 0;px&lt;4;px++){\n        for(int py = 0;py&lt;4;py++){\n            int pi = rotate(px,py,rot);\n            int fi = (y+py) * nFieldWidth + (x+px);\n            if(x + px&gt;= 0 &amp;&amp; x+px &lt; nFieldWidth){\n                if(tetromine[id][pi] == L'X' &amp;&amp; pField[fi]!=0){\n                    return false;\n                }\n            }\n        }\n    }\n    return true;\n}\n\nvoid lineCheck(){\n    bool line = true;\n    int lines = 0;\n    for(int y = 0; y&lt;= nFieldHeight-1;y++){\n        for(int x = 1; x&lt; nFieldWidth-1;x++){\n            if(pField[(y)*nFieldWidth+x]!=0){\n                line &amp;= true;\n            } else line &amp;= false;\n        }\n        if(line) lines++;\n        if(line){\n            for(int x = 1; x&lt; nFieldWidth-1;x++){\n                pField[(y)*nFieldWidth+x] = 8;\n            }\n        }\n    }\n}\n\n\nint main()\n{\n\n    //assets\n    tetromine[0].append(L\"..X.\");\n    tetromine[0].append(L\"..X.\");\n    tetromine[0].append(L\"..X.\");\n    tetromine[0].append(L\"..X.\");\n\n    tetromine[1].append(L\"..X.\");\n    tetromine[1].append(L\".XX.\");\n    tetromine[1].append(L\".X..\");\n    tetromine[1].append(L\"....\");\n\n    tetromine[2].append(L\".X..\");\n    tetromine[2].append(L\".XX.\");\n    tetromine[2].append(L\"..X.\");\n    tetromine[2].append(L\"....\");\n\n    tetromine[3].append(L\"....\");\n    tetromine[3].append(L\".XX.\");\n    tetromine[3].append(L\".XX.\");\n    tetromine[3].append(L\"....\");\n\n    tetromine[4].append(L\"..X.\");\n    tetromine[4].append(L\".XX.\");\n    tetromine[4].append(L\"..X.\");\n    tetromine[4].append(L\"....\");\n\n    tetromine[5].append(L\"....\");\n    tetromine[5].append(L\".XX.\");\n    tetromine[5].append(L\"..X.\");\n    tetromine[5].append(L\"..X.\");\n\n    tetromine[6].append(L\"....\");\n    tetromine[6].append(L\".XX.\");\n    tetromine[6].append(L\".X..\");\n    tetromine[6].append(L\".X..\");\n\n    pField = new unsigned char[nFieldWidth*nFieldHeight];\n    for(int x = 0; x&lt;nFieldWidth; x++)\n    {\n        for(int y = 0; y&lt;nFieldHeight; y++)\n        {\n            pField[y*nFieldWidth + x] = (x==0||x==nFieldWidth -1 || y == nFieldHeight - 1) ? 9 : 0;\n        }\n    }\n\n    char *screen = new char [nScreenWidth * nScreenHeight];\n    HANDLE hConsole = CreateConsoleScreenBuffer(GENERIC_READ | GENERIC_WRITE, 0, NULL, CONSOLE_TEXTMODE_BUFFER, NULL);\n    SetConsoleActiveScreenBuffer(hConsole);\n    DWORD dwBytesWritten = 0;\n\n    //Display frame\n\n    WriteConsoleOutputCharacter(hConsole, screen, nScreenWidth * nScreenHeight, {0,0}, &amp;dwBytesWritten);\n\n    bool gameOver = false;\n\n    while(!gameOver)\n    {\n        Sleep(100);\n        speedCounter++;\n        if(speedCounter&gt;=speed){\n            forcePieceDown = true;\n            speedCounter = 0;\n        } else {\n            forcePieceDown = false;\n        }\n\n        if(shiftGridDown){\n            score++;\n            for(int y = nFieldHeight-2;y &gt; 0;y--){\n                for(int x = 1;x&lt;nFieldWidth -1;x++){\n                    if((pField[(y)*nFieldWidth+x]) != 0){\n                        pField[(y+1)*nFieldWidth+x] = pField[(y)*nFieldWidth+x];\n                        pField[(y)*nFieldWidth+x] = 0;\n                    }\n                }\n            }\n            shiftGridDown = false;\n            lineCheck();\n        }\n\n        for(int x = 1; x&lt; nFieldWidth-1;x++){\n            if(pField[(nFieldHeight-2)*nFieldWidth+x]==8){\n                pField[(nFieldHeight-2)*nFieldWidth+x]=0;\n                if(x==nFieldWidth-2){\n                    shiftGridDown = true;\n                    score+=100;\n                }\n            }\n        }\n\n        for(int k = 0;k&lt;4;k++){                              //  R   L   D  Z\n            key[k] = (0x8000 &amp; GetAsyncKeyState((unsigned char)(\"DASZ\"[k]))) != 0;\n        }\n        if(key[1]){\n            if(doesPieceFit(currentPiece,currentRotation,currentX-1,currentY)){\n                currentX = currentX-1;\n            }\n        }else if(key[0]){\n            if(doesPieceFit(currentPiece,currentRotation,currentX+1,currentY)){\n                currentX = currentX+1;\n            }\n        }if(key[2]){\n            speedCounter = speed;\n        }\n        if(key[3]&amp;&amp;doesPieceFit(currentPiece,currentRotation+90,currentX,currentY)){\n            (currentRotation+90&lt;=270)?currentRotation+=90:currentRotation=0;\n        }\n\n        if(forcePieceDown){\n            if(doesPieceFit(currentPiece,currentRotation,currentX,currentY+1))\n                currentY++;\n            else {\n                //lock piece\n                pieceCounter++;\n                if(pieceCounter%5==0){\n                    speed-=1;\n                }\n                for(int px = 0;px&lt;4;px++){\n                    for(int py = 0;py&lt;4;py++){\n                        if(tetromine[currentPiece][rotate(px,py,currentRotation)]==L'X'){\n                            pField[(currentY+py)*nFieldWidth+(currentX+px)] = currentPiece+1;\n                        }\n                    }\n                }\n                score+=20;\n                //check lines\n                lineCheck();\n\n                //get next piece\n                currentX = nFieldWidth/2;\n                currentY = 0;\n                currentRotation = 0;\n                srand(time(0));\n                currentPiece = rand() % 7;\n\n                //check game over\n                gameOver = !doesPieceFit(currentPiece,currentRotation,currentX,currentY);\n            }\n        }\n\n        //draw field\n        for(int x = 0; x &lt; nFieldWidth; x++)\n        {\n            for(int y = 0; y &lt; nFieldHeight; y++)\n            {\n                screen[(y+2)*nScreenWidth + (x+  2)] = L\" xxxxxxx=#\"[pField[y*nFieldWidth + x]];\n            }\n        }\n\n        //draw piece\n        for(int px = 0;px&lt;4;px++){\n            for(int py = 0;py&lt;4;py++){\n                    if(tetromine[currentPiece][rotate(px,py,currentRotation)] == L'X'){\n                        screen[(currentY+py+2)*nScreenWidth+(currentX+px+2)] = '+';\n                    }\n            }\n        }\n        string s(\"Score -&gt; \");\n        string num;\n        int tmp = score;\n        while(tmp!=0){\n            int rem = tmp%10;\n            tmp /= 10;\n            num = ((char)(48+rem)) + num;\n        }\n        s+=num;\n        for(int i = 0; i&lt;s.size();i++){\n            screen[i] = s[i];\n        }\n\n        //display frame\n        WriteConsoleOutputCharacter(hConsole, screen, nScreenWidth * nScreenHeight, { 0, 0}, &amp;dwBytesWritten);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "dev-c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1573666730, "post_id": 58842641, "comment_id": 103959254, "body": "The exception means you gave it a bad value.  What is <code>calificaciones[i][1]</code> when the exception fires?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1573666821, "post_id": 58842641, "comment_id": 103959290, "body": "&quot;or is there some IDE better than DevC++ that you&#39;d recommend me?&quot; - Why would you expect changing IDE/compiler to magically cause broken code to work?? What you use to write your code doesn&#39;t <i>matter</i> whether it&#39;s Emacs, Vim, Notepad, DevC++, Visual Studio or even MS Word <i>doesn&#39;t matter</i>. What matters is whether the text you eventually hand off to the compiler represents a <i>valid</i> program. See also <a href=\"https://stackoverflow.com/q/25385173/5910058\">What is a debugger and how can it help me diagnose problems?</a>."}, {"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1573668762, "post_id": 58842641, "comment_id": 103960240, "body": "@NathanOliver-ReinstateMonica the string is written to the file before the call to <code>stoi</code>, so it should be easy to determine."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "edited": false, "score": 0, "creation_date": 1573669338, "post_id": 58842641, "comment_id": 103960489, "body": "When executing in an IDE there are variations in how exceptions are handled and typically there are settings that let the IDE intercept exceptions. A stand alone program will, of course, just terminate."}], "owner": {"reputation": 27, "user_id": 12202313, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ba118bf855692cc680ba4f5d92c333?s=128&d=identicon&r=PG&f=1", "display_name": "ArmsMG", "link": "https://stackoverflow.com/users/12202313/armsmg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573666581, "creation_date": 1573666581, "question_id": 58842641, "link": "https://stackoverflow.com/questions/58842641/stoi-and-others-not-working-in-devc-5-11-terminate-called-after-throwing-an", "title": "stoi() and others not working in DevC++ 5.11 (terminate called after throwing an instance of &#39;std::invalid_argument&#39; what(): stoi)", "body": "<p>I've been trying to use the stoi() function but it throws some weird error on DevC++5.11.\nSome of my friends are able to run it(On different IDE's or Text Editors), but i can't for some reason.</p>\n\n<p>I've tried a lot of things (Compiler Options, Programs in Compiler Options, etc), but none of them have worked. </p>\n\n<p>The code i'm trying to run is the next one:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>out_file.open(\"calificaciones_disp.txt\", ofstream::app); // Agrega l\u00c3\u00adneas al archivo\n\n    if (cuenta &gt; 0) {\n        int suma = 0;\n        for (int i=0; i&lt;cuenta; i++) {\n            out_file &lt;&lt; \"Alumno: \" &lt;&lt; calificaciones[i][0] &lt;&lt; \" calificacion: \" &lt;&lt; calificaciones[i][1] &lt;&lt; endl;\n            suma += stoi(calificaciones[i][1]);\n        }\n        out_file &lt;&lt; \"Promedio: \" &lt;&lt; (double)suma/cuenta &lt;&lt; endl;\n    } else {\n        out_file &lt;&lt; \"El archivo no tenia datos\" &lt;&lt; endl;\n    }\n\n    out_file.close(); \n</code></pre>\n\n<p>This is what it shows in\n<a href=\"https://i.stack.imgur.com/7rds5.png\" rel=\"nofollow noreferrer\">console:</a></p>\n\n<blockquote>\n  <p>terminate called after throwing an instance of 'std::invalid_argument'\n  what():  stoi</p>\n</blockquote>\n\n<p>So my question is, what can i do? or is there some IDE better than DevC++ that you'd recommend me? if so, any links?</p>\n\n<p>Thank you in advance ;)</p>\n\n<p>P.D.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ESWFA.png\" rel=\"nofollow noreferrer\">My compiler Options</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/8Fkck.png\" rel=\"nofollow noreferrer\">My Compiler Options->Code Generation settings</a></p>\n"}, {"tags": ["c++", "data-structures"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1573666586, "post_id": 58842614, "comment_id": 103959185, "body": "<a href=\"https://en.cppreference.com/w/cpp/algorithm/min_element\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/min_element</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573666686, "post_id": 58842614, "comment_id": 103959240, "body": "<i>I am trying to implement an array-based, fixed size minimum binary heap ADT</i> -- Is there a reason why you&#39;re not using the ready-made <a href=\"https://en.cppreference.com/w/cpp/algorithm/make_heap\" rel=\"nofollow noreferrer\">heap functions</a>?"}, {"owner": {"reputation": 1, "user_id": 12368205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a93a50525f847d16879048f056e8862?s=128&d=identicon&r=PG&f=1", "display_name": "Maram", "link": "https://stackoverflow.com/users/12368205/maram"}, "edited": false, "score": 0, "creation_date": 1573666946, "post_id": 58842614, "comment_id": 103959342, "body": "It is a course assignment, I am supposed to implement it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573667101, "post_id": 58842614, "comment_id": 103959426, "body": "If that&#39;s the case, then what you&#39;re showing us doesn&#39;t really help unless we see all the code.  Also, arrays are 0-based, not 1 based.  Why are you assuming that the array has at least 2 elements?"}, {"owner": {"reputation": 1, "user_id": 12368205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a93a50525f847d16879048f056e8862?s=128&d=identicon&r=PG&f=1", "display_name": "Maram", "link": "https://stackoverflow.com/users/12368205/maram"}, "edited": false, "score": 0, "creation_date": 1573667750, "post_id": 58842614, "comment_id": 103959744, "body": "The constructor creates an array of a user specified size+1 and places the first element at index 1."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 1, "creation_date": 1573667914, "post_id": 58842614, "comment_id": 103959820, "body": "Why not at index zero?"}, {"owner": {"reputation": 1, "user_id": 12368205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a93a50525f847d16879048f056e8862?s=128&d=identicon&r=PG&f=1", "display_name": "Maram", "link": "https://stackoverflow.com/users/12368205/maram"}, "edited": false, "score": 0, "creation_date": 1573668378, "post_id": 58842614, "comment_id": 103960057, "body": "It was implemented by my professor that way, it is because it makes it easier to access children/parent indexes using leftchild=index*2, rightchild=index*2+1 and parent=index/2."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1573671172, "post_id": 58842614, "comment_id": 103961258, "body": "<i>it is because it makes it easier to access children/parent indexes using leftchild=index*2, rightchild=index*2+1 and parent=index/2.</i> - -So your professor is trying to fit a square peg into a round hole.  C++ starts arrays at 0, not 1.  By faking a 1-based array, you are at risk of either falling of the right edge, causing a memory access error, or erroneously accessing element 0, resulting in wrong calculations.  Believe me, I&#39;ve seen this hundreds of times before, where the coder is trying this and then wind up with these issues."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1573671281, "post_id": 58842614, "comment_id": 103961306, "body": "I assume this is a data structures course, because if its a C or C++ course, I&#39;d say run from that prof as fast as your legs can carry you. Fwiw, the math for a binary heap in an array sequence is <i>easier</i>, not harder, when it is zero-based. Just saying."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573672015, "post_id": 58842614, "comment_id": 103961639, "body": "@Maram -- Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  No one can help with the code you posted, since anyone could take your code, add some dummy functions, and cause all sorts of havoc with the program."}, {"owner": {"reputation": 1, "user_id": 12368205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a93a50525f847d16879048f056e8862?s=128&d=identicon&r=PG&f=1", "display_name": "Maram", "link": "https://stackoverflow.com/users/12368205/maram"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573676319, "post_id": 58842614, "comment_id": 103963577, "body": "@PaulMckenzie -- Thank you so much for all your feedback, I edited the code to include the complete implementation. I understand now why it is wrong to start the array at index 1. But, since the assignment specifically requires me to use this way of implementation, and the testing source file also depends on this implementation, unfortunately I cannot change it."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573677889, "post_id": 58842614, "comment_id": 103964229, "body": "@Maram -- Can you post the sample <code>main</code> with the data?"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1573689871, "post_id": 58842614, "comment_id": 103968443, "body": "If you single-step your program in the debugger, you&#39;ll find your read access violation pretty quickly. If you don&#39;t know how to use the debugger, now is the perfect time to learn. Where are you getting the error? You should be able to use <code>cout</code> to identify the specific line in your <code>main</code> that causes the error. From there, you can track the calls."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 1, "creation_date": 1573689986, "post_id": 58842614, "comment_id": 103968474, "body": "Relevant: <a href=\"https://stackoverflow.com/a/49806133/56778\">stackoverflow.com/a/49806133/56778</a>. I think your instructor should read this. Also <a href=\"https://stackoverflow.com/a/22900767/56778\">stackoverflow.com/a/22900767/56778</a>"}], "answers": [{"tags": [], "owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "is_accepted": false, "score": 1, "last_activity_date": 1575407880, "last_edit_date": 1575407880, "creation_date": 1573691863, "answer_id": 58847718, "question_id": 58842614, "link": "https://stackoverflow.com/questions/58842614/how-do-i-access-minimum-element-using-array-based-binary-heap/58847718#58847718", "title": "How do I access minimum element using array-based binary heap?", "body": "<p>There is a bug in your <code>percolateDown</code> function.</p>\n\n<pre><code>void BinaryHeap::percolateDown(int hole) {\n    int leftChildIndex, rightChildIndex, minIndex;\n    leftChildIndex = hole * 2;\n    rightChildIndex = hole * 2 + 1;\n\n    if (rightChildIndex &gt;= size) {\n        if (leftChildIndex &gt;= size) return;\n        else minIndex = leftChildIndex;\n    }\n    else {\n        if (heap[leftChildIndex] &lt;= heap[rightChildIndex])\n            minIndex = leftChildIndex;\n        else\n            minIndex = rightChildIndex;\n    }\n\n    if (heap[hole] &gt; heap[minIndex]) {\n        swap(heap[hole], heap[minIndex]);\n        percolateDown(minIndex);\n    }\n}\n</code></pre>\n\n<p>Let's assume you have 4 items in your heap. Visually, it looks like this:</p>\n\n<pre><code>         1\n       /   \\\n      3     2\n     /\n    4\n</code></pre>\n\n<p>The array, since you start your heap at 1, would contain <code>[0,1,3,2,4]</code>, and <code>size</code> is <code>4</code>. You call <code>deleteMin</code>, which moves the last item to the front, giving you <code>[0,4,3,2,4]</code>, with <code>size = 3</code>. Then it calls <code>percolateDown(1)</code>.</p>\n\n<p><code>percolateDown</code> computes <code>leftChildIndex = 2</code> and <code>rightChildIndex = 3</code>. Then you hit this:</p>\n\n<pre><code>`if (rightChildIndex &gt;= size)`\n</code></pre>\n\n<p>But <code>rightChildIndex</code> is equal to <code>3</code>, which is the same as <code>size</code>. So the code  will never enter the conditional to compare the right child with the left child. Instead, it will compare the left child with the parent, find that it's less, and swap the nodes. You will end up with this invalid heap:</p>\n\n<pre><code>         3\n       /   \\\n      4     2\n</code></pre>\n\n<p>It's interesting to note that the <code>&gt;=</code> check on the indexes is a common idiom when dealing with 0-based arrays. But the code you're working with treats the array as though it's 1-based. And with 1-based arrays the standard idiom is <code>&gt;</code>. This is one of the reasons I strongly recommend putting the root node of a binary heap at 0 when you're working with a language that has 0-based arrays.</p>\n\n<p>A cleaner (and correct) way to do this would be:</p>\n\n<pre><code>    int leftChildIndex, rightChildIndex, minIndex;\n    leftChildIndex = hole * 2;\n    rightChildIndex = hole * 2 + 1;\n\n    if (leftChildIndex &gt; size) {\n        // if the left child index is outside the heap,\n        // then the right child index will be, too.\n        return;\n    }\n\n    // assume left is smallest\n    minIndex = leftChildIndex;\n\n    // and only check the right if it exists\n    if (rightChildIndex &lt;= size) {\n        if (heap[rightChildIndex] &lt; heap[leftChildIndex]) {\n            minIndex = rightChildIndex;\n        }\n    }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12368205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a93a50525f847d16879048f056e8862?s=128&d=identicon&r=PG&f=1", "display_name": "Maram", "link": "https://stackoverflow.com/users/12368205/maram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1575407880, "creation_date": 1573666457, "last_edit_date": 1573890023, "question_id": 58842614, "link": "https://stackoverflow.com/questions/58842614/how-do-i-access-minimum-element-using-array-based-binary-heap", "title": "How do I access minimum element using array-based binary heap?", "body": "<p>I am trying to implement an array-based, fixed-size minimum binary heap ADT. As I was testing my program, all the functions I wrote seem to work fine except for finding the minimum element which is only supposed to return the integer value stored at the root node. The root node in this implementation is placed at index 1.\nThe error I keep getting is the read-access violation.\nThe following is the Binary Heap class definition and the implementation of the functions:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class BinaryHeap {\n\npublic:\n    BinaryHeap(int); // constructor that takes the capacity of the structure\n    ~BinaryHeap(); // destructor\n    void insert(int); // inserts a new element to the heap\n    void deleteMin(); // removes the minimum element from the heap\n    int getMin(); // returns the minimum element int the heap, returns -1 if the heap is empty\n\nprivate:\n    int *heap; // array to store the elements of the heap\n    int size; // keeps the number of elements in the heap\n    int capacity; // keeps the total capacity of the heap\n    void percolateDown(int);\n    void percolateUp(int);\n    void swap(int, int);\n};\n\n\nBinaryHeap::BinaryHeap(int capacity) {\n    this-&gt;capacity = capacity;\n\n    heap = new int[capacity+1];\n    size = 0;\n}\n\nBinaryHeap::~BinaryHeap() {\n    delete [] heap;\n}\n\nvoid BinaryHeap::insert(int element) {\n\n    if (size &lt; capacity) {\n        size++;\n        heap[size] = element;\n        percolateUp(size);\n    }\n    else return;\n}\n\nvoid BinaryHeap::deleteMin() {\n\n    if (size &lt; 1) \n        return;\n    else {\n        heap[1] = heap[size];\n        size--;\n        percolateDown(1);\n    }\n}\n\nint BinaryHeap::getMin() {\n    if (size &lt; 1)\n        return -1;\n    else return heap[1];\n}\n\nvoid BinaryHeap::percolateDown(int hole) {\n\n\n    int leftChildIndex, rightChildIndex, minIndex;\n    leftChildIndex = hole * 2;\n    rightChildIndex = hole * 2 + 1;\n    if (rightChildIndex &gt;= size) {\n        if (leftChildIndex &gt;= size) return;\n        else minIndex = leftChildIndex;\n    }\n    else {\n        if (heap[leftChildIndex] &lt;= heap[rightChildIndex])\n            minIndex = leftChildIndex;\n        else\n            minIndex = rightChildIndex;\n    }\n\n    if (heap[hole] &gt; heap[minIndex]) {\n        swap(hole, minIndex);\n        percolateDown(minIndex);\n    }\n}\nvoid BinaryHeap::percolateUp(int index) {\n    int parentIndex(1);\n    if (index != 1) {\n        parentIndex = index / 2;\n    }\n    if (heap[parentIndex] &gt; heap[index]) {\n        swap(parentIndex, index);\n        percolateUp(parentIndex);\n    }\n\n}\n\nvoid BinaryHeap::swap(int i, int j) {\n    int t = heap[i];\n    heap[i] = heap[j];\n    heap[j] = t;\n}\n\n</code></pre>\n"}, {"tags": ["c++", "opengl", "glm-math"], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 1723776, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dad868eb62bc9398d19dcf2b15710818?s=128&d=identicon&r=PG", "display_name": "Javier Ram&#237;rez", "link": "https://stackoverflow.com/users/1723776/javier-ram%c3%adrez"}, "edited": false, "score": 0, "creation_date": 1573686161, "post_id": 58846019, "comment_id": 103967537, "body": "I very much appreciate your answer friend. Regards :D"}], "tags": [], "owner": {"reputation": 183, "user_id": 5116730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69c95d49b2851459c34db8f26c696620?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/5116730/john"}, "is_accepted": true, "score": 1, "last_activity_date": 1573681140, "creation_date": 1573681140, "answer_id": 58846019, "question_id": 58842575, "link": "https://stackoverflow.com/questions/58842575/damped-camera-using-glm/58846019#58846019", "title": "Damped camera using GLM?", "body": "<p>You can implement inertia. This would make your camera slow down smoothly. To do this, you can declare the camera as an object.\nYou can do this:  </p>\n\n<pre><code>class Movable\n{\n        public:\n        float x;\n        float y;\n        float z;\n        float xmovement;\n        float ymovement;\n        float zmovement;\n        float xrot;\n        float yrot;\n}\nMovable camera;\n//omitted code that handles camera acceleration itself\ncamera.x+=camera.xmovement;\ncamera.y+=camera.ymovement;\ncamera.z+=camera.zmovement;\ncamera.xmovement*=0.99f;\ncamera.ymovement*=0.99f;\ncamera.zmovement*=0.99f;\nglm::mat4 ViewMatrix=glm::perspective(90f, 1.0f, 0.001f, 30.0f)*glm::lookAt(glm::vec3(camera.x, camera.y, camera.z), glm::vec3(camera.x+sin(xrot), camera.y+tan(yrot), camera.z+cos(xrot)), glm::vec3(0.0f, 1.0f, 0.0f));\n//Then pass ViewMatrix into your Vertex Shader.\n</code></pre>\n\n<p>Modify the <code>0.99</code> constant to a higher value to make the camera stop more slowly, or lower to stop faster.<br>\n<em>Please note that the camera might never truly stop. But from a certain point it'll move so slowly that it'll be unnoticeable.</em></p>\n"}], "owner": {"reputation": 947, "user_id": 1723776, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dad868eb62bc9398d19dcf2b15710818?s=128&d=identicon&r=PG", "display_name": "Javier Ram&#237;rez", "link": "https://stackoverflow.com/users/1723776/javier-ram%c3%adrez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 58846019, "answer_count": 1, "score": -4, "last_activity_date": 1573681140, "creation_date": 1573666265, "last_edit_date": 1573672943, "question_id": 58842575, "link": "https://stackoverflow.com/questions/58842575/damped-camera-using-glm", "title": "Damped camera using GLM?", "body": "<p>I have read about the damping. Basically it is smooth camera movement. However, I am not sure how to implement damping using C++, OpenGL, and GLM. </p>\n\n<p>Help me with a small sample code.</p>\n"}, {"tags": ["c++", "floating-point", "c++98"], "comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1573668171, "post_id": 58842533, "comment_id": 103959952, "body": "Here&#39;s an answer for Python, wouldn&#39;t take much to translate: <a href=\"https://stackoverflow.com/a/33024979/5987\">stackoverflow.com/a/33024979/5987</a>"}, {"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 0, "creation_date": 1573669888, "post_id": 58842533, "comment_id": 103960720, "body": "<a href=\"https://en.cppreference.com/w/cpp/types/numeric_limits/epsilon\" rel=\"nofollow noreferrer\"><code>std::numeric_limits&lt;T&gt;::epsilon()</code></a> is in C++98. Also, here&#39;s a <a href=\"https://stackoverflow.com/questions/4915462/how-should-i-do-floating-point-comparison\">language-agnostic version of this question</a> that has multiple answers that should translate to C++98."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1573886829, "post_id": 58842533, "comment_id": 104042713, "body": "&quot;<i>I know that float comparison should include epsilon</i>&quot; why?"}], "answers": [{"comments": [{"owner": {"reputation": 1578, "user_id": 9516968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f15afa6fdf1897c5ba92cea3946a5635?s=128&d=identicon&r=PG&f=1", "display_name": "Romen", "link": "https://stackoverflow.com/users/9516968/romen"}, "edited": false, "score": 1, "creation_date": 1573670178, "post_id": 58842700, "comment_id": 103960846, "body": "I would go as far as saying that using <code>std::numeric_limits&lt;float&gt;::epsilon()</code> is <a href=\"https://floating-point-gui.de/errors/comparison/\" rel=\"nofollow noreferrer\"><i>rarely</i></a> adequate as a threshold for your given function."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1573670454, "last_edit_date": 1573670454, "creation_date": 1573666818, "answer_id": 58842700, "question_id": 58842533, "link": "https://stackoverflow.com/questions/58842533/float-comparison-in-c98/58842700#58842700", "title": "Float comparison in C++98", "body": "<p>One C++98 example:</p>\n\n<pre><code>#include &lt;cmath&gt;\n#include &lt;limits&gt;\n#include &lt;iostream&gt;\n\ninline bool equal_with_tolerance(float a, float b, float tolerance = std::numeric_limits&lt;float&gt;::epsilon()) {\n    return std::abs(a - b) &lt; tolerance;\n}\n\nint main() {\n    float a = 0.1f;\n    float b = 0.1000001f;\n    std::cout &lt;&lt; (a == b) &lt;&lt; '\\n';                    // Outputs 0.\n    std::cout &lt;&lt; equal_with_tolerance(a, b) &lt;&lt; '\\n';  // Outputs 1.\n}\n</code></pre>\n\n<p><code>tolerance</code> depends on your problem domain, using <code>std::numeric_limits&lt;float&gt;::epsilon</code> is rarely adequate, see <a href=\"https://floating-point-gui.de/errors/comparison/\" rel=\"nofollow noreferrer\">this</a> for more details.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1573671648, "creation_date": 1573671648, "answer_id": 58843859, "question_id": 58842533, "link": "https://stackoverflow.com/questions/58842533/float-comparison-in-c98/58843859#58843859", "title": "Float comparison in C++98", "body": "<blockquote>\n  <p>I know that float comparison should include epsilon but I don't know how</p>\n</blockquote>\n\n<p>You could use <code>std::numeric_limits&lt;float&gt;::epsilon()</code> to get the \"machine\" epsilon.</p>\n\n<p>However, floating point equality comparison with tolerance is not quite as simple as directly comparing absolute difference to machine epsilon. Any small epsilon is going to devolve the comparison into an equality comparison for large values, which leaves you with zero error tolerance.</p>\n\n<p>Meaningful tolerant comparison, requires that you know what sort of values you're expecting, their magnitude, their sign, expected error that you wish to tolerate.</p>\n\n<p>This <a href=\"https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/\" rel=\"nofollow noreferrer\">blog</a> explains the problem in intricate detail. It suggests following, which may be reasonable for \"generic\" comparison </p>\n\n<pre><code>bool AlmostEqualRelativeAndAbs(float A, float B,\n            float maxDiff, float maxRelDiff = FLT_EPSILON)\n{\n    // Check if the numbers are really close -- needed\n    // when comparing numbers near zero.\n    float diff = fabs(A - B);\n    if (diff &lt;= maxDiff)\n        return true;\n\n    A = fabs(A);\n    B = fabs(B);\n    float largest = (B &gt; A) ? B : A;\n\n    if (diff &lt;= largest * maxRelDiff)\n        return true;\n    return false;\n}\n</code></pre>\n\n<p>The example is in C, but trivial to translate to C++ idioms. There is also an ULP based function in the article, but its implementation relies on union type punning that is not allowed in C++.</p>\n"}], "owner": {"reputation": 427, "user_id": 4405260, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/ca6f1bd188ff701e0eea239481d82901?s=128&d=identicon&r=PG&f=1", "display_name": "EagleOne", "link": "https://stackoverflow.com/users/4405260/eagleone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 58842700, "answer_count": 2, "score": 0, "last_activity_date": 1573671648, "creation_date": 1573666117, "last_edit_date": 1573667730, "question_id": 58842533, "link": "https://stackoverflow.com/questions/58842533/float-comparison-in-c98", "title": "Float comparison in C++98", "body": "<p>I need to write a float comparison function (equal/not equal) but I have to use C++98 and boost libraries at most. I know that float comparison should include epsilon but I don't know how to write such code without using C++11. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1573665912, "post_id": 58842461, "comment_id": 103958885, "body": "Did you try what happens, when you add another <code>else if</code>? Or what is the point of the question? Spoiler: you can chain else if endlessly."}, {"owner": {"reputation": 67, "user_id": 11334430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a015576f6a51f272c9541a50a07851ad?s=128&d=identicon&r=PG&f=1", "display_name": "scypx", "link": "https://stackoverflow.com/users/11334430/scypx"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1573666351, "post_id": 58842461, "comment_id": 103959095, "body": "@churill yes I did. From what I&#39;ve gathered, I think it adds the values assigned to mobilelevy whether they satisfy the condition/conditions or not to the total tax variable (haven&#39;t mentioned that here) regardless. I am just confused whether this all can be done in a single else if condition or not"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1573666503, "post_id": 58842461, "comment_id": 103959159, "body": "You mean, you want to combine first and second part with else if? In a chained <code>else if</code> only <i>one</i> branch is executed. But since those two parts seem to do different things, they probably should <i>both</i> be executed? I&#39;m not sure if I understand you correctly."}, {"owner": {"reputation": 67, "user_id": 11334430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a015576f6a51f272c9541a50a07851ad?s=128&d=identicon&r=PG&f=1", "display_name": "scypx", "link": "https://stackoverflow.com/users/11334430/scypx"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1573666725, "post_id": 58842461, "comment_id": 103959251, "body": "@churill Like, I want the result of the first condtion stored in a variable separately and the result of the second condition stored in another variable separately. But, I just want to know that after the first else if condition is run, it will go to the check second else if condition, yes? Sorry If I sound dumb but I just want to clear this thing"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1573666989, "post_id": 58842461, "comment_id": 103959365, "body": "I think I know what you want now and try to formulate an answer."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 11334430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a015576f6a51f272c9541a50a07851ad?s=128&d=identicon&r=PG&f=1", "display_name": "scypx", "link": "https://stackoverflow.com/users/11334430/scypx"}, "edited": false, "score": 0, "creation_date": 1573668276, "post_id": 58842956, "comment_id": 103960000, "body": "thank you very much for a brief answer. I have got it I think. So if the whole block of an else if condition is checked and one condition has got true, be it the else one, then the code will come out of the condition and run from the very next line of the last check of condition i.e else, right?"}], "tags": [], "owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "is_accepted": true, "score": 0, "last_activity_date": 1573667857, "creation_date": 1573667857, "answer_id": 58842956, "question_id": 58842461, "link": "https://stackoverflow.com/questions/58842461/can-we-use-another-else-if-condition-after-the-first-else-if-condition-ends/58842956#58842956", "title": "Can we use another else if condition after the first else if condition ends?", "body": "<p>So first: <code>else if</code> can be chained endlessly. For the sake of simplicity let's take the following example:</p>\n\n<pre><code>if(a)\n    doA();\nelse if(b)\n    doB();\nelse if(c)\n    doC();\nelse if(d)\n    doD();\nelse\n    doE();\n</code></pre>\n\n<p>Where <code>a</code>, <code>b</code>, <code>c</code> and <code>d</code> represent some boolean expression (could be for example <code>priceindollars &gt;= 1 &amp;&amp; priceindollars &lt; 61</code> as in your code).</p>\n\n<p>In this code <em>exactly one</em> <code>doX()</code> will be called.</p>\n\n<ul>\n<li>If a condition evaluates to <code>false</code> the else-branch is executed and the next condition is checked. </li>\n<li>If a condition evaluates to <code>true</code> the if-branch is executed and not further conditions are checked. (because they are located in the else-branch only)</li>\n</ul>\n\n<p>The code is equivalent to the following:</p>\n\n<pre><code>if (a)\n{\n    doA();\n}\nelse\n{\n    if (b)\n    {\n        doB();\n    }\n    else\n    {\n        if (c)\n        {\n            doC();\n        }\n        else\n        {\n            if (d)\n            {\n                doD();\n            }\n            else\n            {\n                doE();\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>When written in the long form it's easier to see, why <em>exactly one</em> <code>doX()</code>is executed. So I guess, you have to keep the two blocks of your code seperately. If you combine them with <code>else if</code> <em>only one</em> varaible will be assigned a value.</p>\n\n<p>I hope I understood your question correctly and this answers it.</p>\n"}], "owner": {"reputation": 67, "user_id": 11334430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a015576f6a51f272c9541a50a07851ad?s=128&d=identicon&r=PG&f=1", "display_name": "scypx", "link": "https://stackoverflow.com/users/11334430/scypx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58842956, "answer_count": 1, "score": 0, "last_activity_date": 1573667857, "creation_date": 1573665818, "question_id": 58842461, "link": "https://stackoverflow.com/questions/58842461/can-we-use-another-else-if-condition-after-the-first-else-if-condition-ends", "title": "Can we use another else if condition after the first else if condition ends?", "body": "<p>I have been assigned a task where I have to calculate taxes on an imported mobile. It's divided in two parts where I have used else if condition on both of them separately. So what I want to ask is that after the first else if condition ends, will it go over to the second else if condition or ignore it?</p>\n\n<p>Here's some code I've written:</p>\n\n<pre><code>if (priceindollars &gt;= 1 &amp;&amp; priceindollars &lt; 61)\nregulatoryduty = 250;    \nelse if (priceindollars &gt;= 61 &amp;&amp; priceindollars &lt; 131)\nregulatoryduty = ((differentcurrency* 10) / 100);\nelse\nregulatoryduty = ((differentcurrency* 20) / 100);\n</code></pre>\n\n<p>FIRST PART ENDS HERE</p>\n\n<p>START OF SECOND PART</p>\n\n<pre><code>if (differentcurrency &gt;= 10000 &amp;&amp; differentcurrency &lt;= 40000)\nmobilelevy = 1000;\nelse if (differentcurrency &gt;= 10000 &amp;&amp; differentcurrency &lt;= 40000)\nmobilelevy = 3000;\nelse\nmobilelevy = 5000;\n</code></pre>\n\n<p>I have calculated the outputs of some inputs on paper manually but they're different to what my compiler is showing</p>\n"}, {"tags": ["c++", "stream", "protocol-buffers", "grpc"], "answers": [{"tags": [], "owner": {"reputation": 84, "user_id": 4538849, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-i9mq8ef2b2s/AAAAAAAAAAI/AAAAAAAAADg/mIocq0a-1S8/photo.jpg?sz=128", "display_name": "QOTJ", "link": "https://stackoverflow.com/users/4538849/qotj"}, "is_accepted": true, "score": 1, "last_activity_date": 1573691345, "creation_date": 1573691345, "answer_id": 58847662, "question_id": 58842317, "link": "https://stackoverflow.com/questions/58842317/how-can-i-send-and-receive-stream-meta-data-bidirectionally-between-client-and-s/58847662#58847662", "title": "How can I send and receive stream meta-data bidirectionally between client and server with gRPC?", "body": "<p>There is a reference here:\n<a href=\"https://grpc.github.io/grpc/cpp/classgrpc__impl_1_1_client_context.html\" rel=\"nofollow noreferrer\">https://grpc.github.io/grpc/cpp/classgrpc__impl_1_1_client_context.html</a>\n<a href=\"https://grpc.github.io/grpc/cpp/classgrpc__impl_1_1_server_context.html\" rel=\"nofollow noreferrer\">https://grpc.github.io/grpc/cpp/classgrpc__impl_1_1_server_context.html</a></p>\n\n<p>And an example here:\n<a href=\"https://github.com/grpc/grpc/blob/master/examples/cpp/metadata/greeter_server.cc\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc/blob/master/examples/cpp/metadata/greeter_server.cc</a></p>\n\n<p>Both the client and server can specify the initial metadata to send on ClientContext and ServerContext respectively. The method is called AddMetadata on the ClientContext and AddInitialMetadata on the ServerContext (to distinguish from trailing metadata):</p>\n\n<pre><code>    // AddMetadata (const grpc::string &amp;meta_key, const grpc::string &amp;meta_value)\n    context-&gt;AddMetadata(\"custom-server-metadata\", \"initial metadata value\");\n</code></pre>\n\n<p>Value is a string in this case. To specify a number, typically you would use grpc::to_string:</p>\n\n<pre><code>    context-&gt;AddInitialMetadata(\"filesize\", grpc::to_string(file_size));\n</code></pre>\n\n<p>The format of the metadata on the receiving side is</p>\n\n<pre><code>    const std::multimap&lt; grpc::string_ref, grpc::string_ref &gt; &amp;\n</code></pre>\n\n<p>This type is returned by ServerContext::client_metadata() (gets the client's initial metadata on the server side), and ClientContext::GetServerInitialMetadata() (gets the server's initial metadata on the server side after WaitForInitialMetadata() has returned in the sync API or equivalent in other APIs).</p>\n\n<p>To look up filesize, you can do this:</p>\n\n<pre><code>    int filesize = atoi(metadata.find(\"filesize\")-&gt;second);\n</code></pre>\n\n<p>(If you're not sure whether \"filesize\" is specified, you may want to check metadata.find(\"filesize\") != metadata.end())</p>\n\n<p>As for how to send the initial metadata, it is sent on the client side automatically when you send the RPC on the wire. On the server side, you can either send it explicitly using SendInitialMetadata() or it will go out with your first server Write on the stream.</p>\n"}], "owner": {"reputation": 513, "user_id": 6615337, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Icgqz.jpg?s=128&g=1", "display_name": "Anthony O", "link": "https://stackoverflow.com/users/6615337/anthony-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1344, "favorite_count": 1, "accepted_answer_id": 58847662, "answer_count": 1, "score": 0, "last_activity_date": 1573691345, "creation_date": 1573665238, "question_id": 58842317, "link": "https://stackoverflow.com/questions/58842317/how-can-i-send-and-receive-stream-meta-data-bidirectionally-between-client-and-s", "title": "How can I send and receive stream meta-data bidirectionally between client and server with gRPC?", "body": "<p>I would like to transfer a file from client to server and transfer a file from server to client using gRPC for transport. However, the receiving process does not know how many bytes to expect. I had seen suggestions of attaching this at the head of the data being transferred and then parsing it out when the first chunk is received from the stream. However, I would like to avoid this if possible. Within the gRPC C++ API I see that the ClientWriter implements the ClientStreamingInterface and has access to the server metadata using the WaitForInitialMetadata(). The server implements the ServerStreamingInterface and can send server metadat using a SendInitialMetadata() method. </p>\n\n<p>From <a href=\"https://grpc.github.io/grpc/cpp/namespacegrpc.html#a4d3126d092e4e3aeeb328e50e6dd02f2\" rel=\"nofollow noreferrer\">the documentation</a> it is not clear what this metadata consists of and how I can add my own metadata so that I can notify the client of what file size to expect from the server before sending. </p>\n\n<p>In addition, I see no easy way to notify the server of what size file to expect from the client using the gRPC C++ API.</p>\n\n<p>Of course I am new to gRPC and C++ so any pointers in the right direction would be greatly appreciated.</p>\n"}, {"tags": ["c++", "arrays", "c++11"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 4, "creation_date": 1573665061, "post_id": 58842231, "comment_id": 103958462, "body": "Short answer - Yes."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1573665175, "post_id": 58842231, "comment_id": 103958515, "body": "Why not use smart pointers? Or a <code>std::array</code> or <code>std::vector</code>? Manual memory management, except when implementing something like a container, is usually a code smell in 2019 / modern C++."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1573665190, "post_id": 58842231, "comment_id": 103958519, "body": "Longer answer: Avoid raw <code>new</code> and <code>delete</code> in modern C++."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1573665321, "post_id": 58842231, "comment_id": 103958584, "body": "Note: rather then <code>srand</code>/<code>rand</code>, we have <a href=\"https://en.cppreference.com/w/cpp/header/random\" rel=\"nofollow noreferrer\">much better random number facilities</a> that you should <i>totally</i> be using these days."}, {"owner": {"reputation": 544, "user_id": 11073848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8744d4dd30d03927f67c96c823feb1?s=128&d=identicon&r=PG&f=1", "display_name": "Drake Johnson", "link": "https://stackoverflow.com/users/11073848/drake-johnson"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1576154196, "post_id": 58842231, "comment_id": 104811865, "body": "@JesperJuhl It frustrates me how uninformed some teachers are about things like the <code>&lt;random&gt;</code> header and other modern C++ features. At my college, we were taught to use the <code>rand()</code> functions from <code>&lt;cstdlib&gt;</code>. When I found the <code>&lt;random&gt;</code> header on my own, I told my prof, who had no idea it even existed."}], "answers": [{"comments": [{"owner": {"reputation": 655, "user_id": 7484210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ghd9L.jpg?s=128&g=1", "display_name": "0x400921FB54442D18", "link": "https://stackoverflow.com/users/7484210/0x400921fb54442d18"}, "edited": false, "score": 0, "creation_date": 1573665380, "post_id": 58842328, "comment_id": 103958606, "body": "That&#39;s the right way to do it, but it won&#39;t teach OP how all the memory operations work under the hood."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 655, "user_id": 7484210, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ghd9L.jpg?s=128&g=1", "display_name": "0x400921FB54442D18", "link": "https://stackoverflow.com/users/7484210/0x400921fb54442d18"}, "edited": false, "score": 2, "creation_date": 1573665501, "post_id": 58842328, "comment_id": 103958663, "body": "@0x400921FB54442D18 There&#39;s no need to teach them the wrong things to learn that. Teach for example how to implement a (simplified) unique pointer, or a (greatly simplified) vector."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1573665655, "post_id": 58842328, "comment_id": 103958734, "body": "The &quot;teaching&quot; of memory operations in most institutions are nothing more than show how to produce code with spaghetti-like <code>new[] &#47; delete[]</code> logic woven in, similar to the OP&#39;s question."}, {"owner": {"reputation": 21, "user_id": 11469043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7e09fa8275c34d3ba653bba07b66fc?s=128&d=identicon&r=PG&f=1", "display_name": "DajzkReaper", "link": "https://stackoverflow.com/users/11469043/dajzkreaper"}, "edited": false, "score": 0, "creation_date": 1573677559, "post_id": 58842328, "comment_id": 103964094, "body": "I was asked to solve the problem that, by deleted numList will it free the space allocated?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 21, "user_id": 11469043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7e09fa8275c34d3ba653bba07b66fc?s=128&d=identicon&r=PG&f=1", "display_name": "DajzkReaper", "link": "https://stackoverflow.com/users/11469043/dajzkreaper"}, "edited": false, "score": 0, "creation_date": 1573678043, "post_id": 58842328, "comment_id": 103964295, "body": "@DajzkReaper See the last paragraph."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1573666387, "last_edit_date": 1573666387, "creation_date": 1573665279, "answer_id": 58842328, "question_id": 58842231, "link": "https://stackoverflow.com/questions/58842231/how-do-i-delete-a-dynamically-allocated-array-that-is-initialized-in-another-fun/58842328#58842328", "title": "How do I delete a dynamically allocated array that is initialized in another function?", "body": "<blockquote>\n  <p>How do I delete a dynamically allocated array that is initialized in another function?</p>\n</blockquote>\n\n<p>Ideally, you return a RAII container that owns the array, and takes care of the destruction of the array in their own destructor. Such as <code>std::vector</code> or <code>std::unique_ptr&lt;T[]&gt;</code>.</p>\n\n<hr>\n\n<p>In case RAII is not an option, such as a cross language API, when allocation is necessary it is a convention to provide named functions for both creation and destruction of the resource:</p>\n\n<pre><code>int* generateArray(int size); // maybe calls new[]\nvoid destroyArray(int*);      // maybe calls delete[]\n</code></pre>\n\n<p>This allows the user of the API to not depend on the allocation details.</p>\n\n<hr>\n\n<blockquote>\n  <p>By deleting the generated in the at the end of int main would it delete the new pointer in the function as well?</p>\n</blockquote>\n\n<p>The function has already returned by that point. All local variables of that function have been destroyed. The \"pointer in the function\" no longer exists. The pointer in main function is a copy of that pointer: It has the same value.</p>\n\n<p>Deleting one pointer destroys the pointed object (or array), and deallocates the memory. If there were any other pointers or references to that object (or array), those other pointers would become invalid. Those other pointers don't need to be deleted and in fact, attempting to do so would result in undefined behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 544, "user_id": 11073848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8744d4dd30d03927f67c96c823feb1?s=128&d=identicon&r=PG&f=1", "display_name": "Drake Johnson", "link": "https://stackoverflow.com/users/11073848/drake-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1576154034, "last_edit_date": 1576154034, "creation_date": 1576151749, "answer_id": 59304024, "question_id": 58842231, "link": "https://stackoverflow.com/questions/58842231/how-do-i-delete-a-dynamically-allocated-array-that-is-initialized-in-another-fun/59304024#59304024", "title": "How do I delete a dynamically allocated array that is initialized in another function?", "body": "<p>I would do it using a static variable inside of your generate function that returns the pointer to the array. Then, inside your delete function, simply call the generate function to give you the pointer and delete it. To delete an array created on the HEAP, use the <code>delete[]</code> operator. This operator should be called to free memory allocated with <code>new Type[]</code>, where <code>Type</code> is any type (e.g. an <code>int</code>). After you delete (aka deallocate) this memory, it's almost always a good idea to set the pointer that was pointing to the start of the array to <code>nullptr</code>. That way, you don't accidentally use that pointer again.</p>\n\n<p>Here's some code to show what I mean:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int* getArray(unsigned long long elements_num = 0)\n{\n    static int* arr = nullptr;\n\n    if (arr == nullptr &amp;&amp; elements_num &gt; 0)\n    {\n        arr = new int[elements_num];\n        std::cout \n            &lt;&lt; \"Address of array being created: \" &lt;&lt; arr \n            &lt;&lt; std::endl;\n    }\n\n    return arr;\n}\n\nvoid deleteArray()\n{\n    int* arrayAddress = getArray();\n\n    if (arrayAddress == nullptr)\n    {\n        std::cerr &lt;&lt; \"Array not yet created\" &lt;&lt; std::endl;\n    }\n    else\n    {\n        std::cout \n            &lt;&lt; \"Address of array being deleted: \" &lt;&lt; arrayAddress \n            &lt;&lt; std::endl;\n\n        delete[] arrayAddress;\n        arrayAddress = nullptr;\n    }\n}\n\nint main()\n{\n    constexpr unsigned long long ARR_SIZE = 5;\n\n    std::cout\n        &lt;&lt; \"Trying to delete before creating array...\"\n        &lt;&lt; std::endl;\n    deleteArray();\n\n    std::cout &lt;&lt; '\\n'\n        &lt;&lt; \"Creating array with 5 elements...\"\n        &lt;&lt; std::endl;\n    int* myArray = getArray(ARR_SIZE);\n\n    std::cout &lt;&lt; '\\n'\n        &lt;&lt; \"Setting the values of the elements...\"\n        &lt;&lt; std::endl;\n    for (unsigned long long i = 0; i &lt; ARR_SIZE; i++)\n    {\n        myArray[i] = static_cast&lt;int&gt;(i) + 1;\n    }\n    std::cout &lt;&lt; \"Values: \";\n    for (unsigned long long i = 0; i &lt; ARR_SIZE; i++)\n    {\n        std::cout &lt;&lt; myArray[i] &lt;&lt; \", \";\n    }\n\n    std::cout &lt;&lt; \"\\n\\n\"\n        &lt;&lt; \"Deleting array...\"\n        &lt;&lt; std::endl;\n    deleteArray();\n    deleteArray(); // Trying to delete twice... Our program should be fine, right?\n}\n</code></pre>\n\n<p>Here's the output I got from running it:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Trying to delete before creating array...\nArray not yet created\n\nCreating array with 5 elements...\nAddress of array being created: 01147438\n\nSetting the values of the elements...\nValues: 1, 2, 3, 4, 5,\n\nDeleting array...\nAddress of array being deleted: 01147438\nAddress of array being deleted: 01147438\n[Program crashes]\n</code></pre>\n\n<p><br /><br />\n<strong>Edit 1</strong><br />\n<em>However</em>, don't be so quick to accept this unconditionally. There is still a big issue. If you call <code>deleteArray()</code> again, it will try to delete the memory again. Why is this? Didn't we set the array back to <code>nullptr</code>? Well... yes and no.</p>\n\n<p>To understand, think about what a pointer is; it's just a variable. And, just like any other variable type, a pointer takes memory. It's like having a book that takes up a big spot on your desk, but then having a note on the fridge telling you where your book is. The note, in this case, is a pointer, and the book is a non-pointer variable.</p>\n\n<p>Now, imagine you had another note in the bathroom telling you where the note on the fridge is. This second note is like a double pointer. A double pointer simply stores the memory location of the normal pointer.</p>\n\n<p>Back to the problem. What we did when we called <code>getArray</code> is we created a second pointer variable (that has it's own memory address). So, when we set that second pointer to <code>nullptr</code>, that doesn't mean we set the original pointer to <code>nullptr</code> too. It would be like having the note on your fridge plus a note in your living room both telling you where the book is. If you erase what's on the note in the living room, that doesn't mean you also erased what's on the note on the fridge.</p>\n\n<p>So how do we fix this? We have to use a double pointer. Using a double pointer means, when we dereference that pointer one time, we get the <em>actual</em> memory address of the <em>original</em> array.</p>\n\n<p>The thing is, messing with double pointers all the time is rather horrible to look at, so we can make a function that makes things a little more bearable and only use the double pointer when we need to set the original array to <code>nullptr</code>. </p>\n\n<p>Here's our new code with double pointers:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// Notice the change in return type here\nint** getArrayAddress(unsigned long long elements_num = 0)\n{\n    static int* arr = nullptr;\n\n    if (arr == nullptr &amp;&amp; elements_num &gt; 0)\n    {\n        arr = new int[elements_num];\n        std::cout \n            &lt;&lt; \"Address of array being created: \" &lt;&lt; arr \n            &lt;&lt; std::endl;\n    }\n\n    // Notice the return went from \"arr\" to \"&amp;arr\"\n    return &amp;arr;\n}\n\nvoid deleteArray()\n{\n    // Notice the change in variable type here\n    int** arrayAddress = getArrayAddress();\n\n    if (*arrayAddress == nullptr)\n    {\n        std::cerr &lt;&lt; \"Array not yet created\" &lt;&lt; std::endl;\n    }\n    else\n    {\n        std::cout \n            &lt;&lt; \"Address of array being deleted: \" &lt;&lt; *arrayAddress \n            &lt;&lt; std::endl;\n\n        // Notice we have to dereference once before deleting\n        delete[] *arrayAddress;\n        *arrayAddress = nullptr;\n    }\n}\n\n// This is our convenience function so we don't have to mess with\n// double pointers all the time\nint* getArray(unsigned long long elements_num = 0)\n{\n    return *getArrayAddress(elements_num);\n}\n\nint main()\n{\n    constexpr unsigned long long ARR_SIZE = 5;\n\n    std::cout\n        &lt;&lt; \"Trying to delete before creating array...\"\n        &lt;&lt; std::endl;\n    deleteArray();\n\n    std::cout &lt;&lt; '\\n'\n        &lt;&lt; \"Creating array with 5 elements...\"\n        &lt;&lt; std::endl;\n    int* myArray = getArray(ARR_SIZE);\n\n    std::cout &lt;&lt; '\\n'\n        &lt;&lt; \"Setting the values of the elements...\"\n        &lt;&lt; std::endl;\n    for (unsigned long long i = 0; i &lt; ARR_SIZE; i++)\n    {\n        myArray[i] = static_cast&lt;int&gt;(i) + 1;\n    }\n    std::cout &lt;&lt; \"Values: \";\n    for (unsigned long long i = 0; i &lt; ARR_SIZE; i++)\n    {\n        std::cout &lt;&lt; myArray[i] &lt;&lt; \", \";\n    }\n\n    std::cout &lt;&lt; \"\\n\\n\"\n        &lt;&lt; \"Deleting array...\"\n        &lt;&lt; std::endl;\n    deleteArray();\n    deleteArray(); // Now the program really can handle this\n}\n</code></pre>\n\n<p>And here's its output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Trying to delete before creating array...\nArray not yet created\n\nCreating array with 5 elements...\nAddress of array being created: 00C573A0\n\nSetting the values of the elements...\nValues: 1, 2, 3, 4, 5,\n\nDeleting array...\nAddress of array being deleted: 00C573A0\nArray not yet created\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11469043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7e09fa8275c34d3ba653bba07b66fc?s=128&d=identicon&r=PG&f=1", "display_name": "DajzkReaper", "link": "https://stackoverflow.com/users/11469043/dajzkreaper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 261, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1576154034, "creation_date": 1573664913, "last_edit_date": 1573664999, "question_id": 58842231, "link": "https://stackoverflow.com/questions/58842231/how-do-i-delete-a-dynamically-allocated-array-that-is-initialized-in-another-fun", "title": "How do I delete a dynamically allocated array that is initialized in another function?", "body": "<pre><code>int* generateArray(int size)\n</code></pre>\n\n<p>This function should dynamically create an array and should return the created array to the array generated in the main program.</p>\n\n<pre><code>int main() \n\n{\n\n    int *numList = generateArray(501);\n    cout &lt;&lt; \"Mode = \" &lt;&lt; findMode(arr, 501) &lt;&lt; endl;\n\n    cout &lt;&lt; \"Median = \" &lt;&lt; findMedian(arr, 501);\n\n    delete[] numList;\n    numList = nullptr;\n\n    return 0;\n}\n</code></pre>\n\n<p>I also need to delete the dynamically allocated array. I wanna make sure if I deleted the new pointer properly. By deleting the generated in the at the end of int main would it delete the new pointer in the function as well?</p>\n\n<pre><code>int *generateArray(int size) \n\n{\n\n    srand(time(0));\n\n    int *arr = new int[size];\n\n    for (int i=0; i&lt;size; i++) \n    {\n        arr[i] = rand() % 91 + 10;\n    }\n    return arr;\n}\n</code></pre>\n"}, {"tags": ["c++", "concurrency", "mutex", "mutual-exclusion"], "comments": [{"owner": {"reputation": 2697, "user_id": 83202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/67ae8cb38fcfb5b5609906c9d83dc15c?s=128&d=identicon&r=PG", "display_name": "Curt Nichols", "link": "https://stackoverflow.com/users/83202/curt-nichols"}, "edited": false, "score": 0, "creation_date": 1573674097, "post_id": 58842217, "comment_id": 103962570, "body": "For other readers: the bakery paper is here: <a href=\"http://lamport.azurewebsites.net/pubs/bakery.pdf\" rel=\"nofollow noreferrer\">lamport.azurewebsites.net/pubs/bakery.pdf</a>"}], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 12148526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-K4f-wbQLHJ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4LhNwGfUSVgkygIIRgy2b1Dqy-w/photo.jpg?sz=128", "display_name": "Hlib Pylypets", "link": "https://stackoverflow.com/users/12148526/hlib-pylypets"}, "is_accepted": true, "score": 0, "last_activity_date": 1573669420, "creation_date": 1573669420, "answer_id": 58843326, "question_id": 58842217, "link": "https://stackoverflow.com/questions/58842217/mutual-exclusions-how-to-implement-try-lock-method-using-lamports-bakery-alg/58843326#58843326", "title": "Mutual exclusions, How to implement try_lock() method using Lamport&#39;s Bakery Algorithm?", "body": "<p>I have come up with the following solution in C++, but haven't tested it fully yet.</p>\n\n<pre><code>bool ImprovedBakeryLock::try_lock(int i)\n{\n    Entering[i] = true;\n    Number[i] = 1 + max(Number[1], ..., Number[NUM_THREADS]);\n    Entering[i] = false;\n    bool acquired = true;\n    for (int j = 1; j &lt;= NUM_THREADS &amp;&amp; acquired; ++j) {\n        if (Number[j] != 0 &amp;&amp; Number[j] &lt; Number[i]){\n            acquired = false;\n            Number[i] = 0;\n        }\n    }\n    return acquired;\n}\n</code></pre>\n"}], "owner": {"reputation": 68, "user_id": 12148526, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-K4f-wbQLHJ0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re4LhNwGfUSVgkygIIRgy2b1Dqy-w/photo.jpg?sz=128", "display_name": "Hlib Pylypets", "link": "https://stackoverflow.com/users/12148526/hlib-pylypets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 58843326, "answer_count": 1, "score": 0, "last_activity_date": 1573669420, "creation_date": 1573664893, "question_id": 58842217, "link": "https://stackoverflow.com/questions/58842217/mutual-exclusions-how-to-implement-try-lock-method-using-lamports-bakery-alg", "title": "Mutual exclusions, How to implement try_lock() method using Lamport&#39;s Bakery Algorithm?", "body": "<p>I'm trying to create a BakeryLock abstraction using Lamport's bakery algorithm and Lockable concept from C++. It's quite easy to implement lock(), unlock() methods. Could someone help me with an implementation of the try_lock() method?<a href=\"https://i.stack.imgur.com/DPGlr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DPGlr.png\" alt=\"enter image description here\"></a>\nFrom documentation:</p>\n\n<p>m.try_lock()</p>\n\n<p>Effects: Attempts to acquire a lock for the current execution agent without blocking. If an exception is thrown, then a lock shall not have been acquired for the current execution agent.</p>\n\n<p>Return type: bool</p>\n\n<p>Returns: true if the lock was acquired, false otherwise.</p>\n"}, {"tags": ["python", "c++", "cython"], "answers": [{"comments": [{"owner": {"reputation": 48, "user_id": 3469447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59895298a3a95cfd03a806ec77b93ab?s=128&d=identicon&r=PG&f=1", "display_name": "user3469447", "link": "https://stackoverflow.com/users/3469447/user3469447"}, "edited": false, "score": 0, "creation_date": 1573724021, "post_id": 58852574, "comment_id": 103979036, "body": "Wow, this is going to spare me a lot of trouble! Thanks!"}], "tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": false, "score": 3, "last_activity_date": 1573720911, "creation_date": 1573720911, "answer_id": 58852574, "question_id": 58842108, "link": "https://stackoverflow.com/questions/58842108/in-c-cython-it-possible-to-only-declare-relevant-attributes-to-be-visible-in-p/58852574#58852574", "title": "In C++/Cython it possible to only declare relevant attributes to be visible in Python?", "body": "<pre><code>cdef class PyClass:\n    cdef MyClass *classptr\n    # ...\n    cdef int Attribute1;\n</code></pre>\n\n<p><code>Attribute1</code> doesn't do what you think. It's a separate value stored as part of <code>PyClass</code> and has nothing to do with the <code>Attribute1</code> in <code>classptr</code>. You probably want to write a property instead.</p>\n\n<hr>\n\n<p>However, to answer your question:</p>\n\n<p>Yes, it's fine for you to only wrap the specific functions you're interested in. Cython doesn't need to know all the details of your C++ classes - it only needs to know enough details to generate valid C++ code using them. A few quick examples of things it's useful to omit:</p>\n\n<ul>\n<li><p>Templates. For example <code>std::string</code> is really a template typedef, but it may not be necessarily for a Cython wrapper to know this, or for optional allocator template types, or for numeric template types which Cython doesn't really support.</p></li>\n<li><p>Complicated inheritance hierarchies: doesn't matter if the functions you care about actually come from a base-class. Just wrap the derived class you're using.</p></li>\n<li><p>Interfaces that return other classes - because then you'd need to wrap the second class (which might expose a third class...).</p></li>\n</ul>\n\n<p>There really is no consequence beyond not being able to call the code you haven't wrapped from python. Cython's C++ support is (and will likely always be) somewhat incomplete and it's often necessary to give it a simplified C++ interface to get anything done.</p>\n"}], "owner": {"reputation": 48, "user_id": 3469447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e59895298a3a95cfd03a806ec77b93ab?s=128&d=identicon&r=PG&f=1", "display_name": "user3469447", "link": "https://stackoverflow.com/users/3469447/user3469447"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573720911, "creation_date": 1573664588, "question_id": 58842108, "link": "https://stackoverflow.com/questions/58842108/in-c-cython-it-possible-to-only-declare-relevant-attributes-to-be-visible-in-p", "title": "In C++/Cython it possible to only declare relevant attributes to be visible in Python?", "body": "<p>Say I have a .h file with the following code:</p>\n\n<pre><code>class MyClass\n{\n    public:\n        int Attribute1;\n        int Attribute2;\n        MyClass(){};\n        virtual ~MyClass(){};\n        virtual void Method1(string var1);\n        virtual float Method2(float var2);\n};\n</code></pre>\n\n<p>And a related .pyx file with:</p>\n\n<pre><code>cdef class PyClass:\n    cdef MyClass *classptr\n        [standard __cinit__ and __dealloc__ declarations ]\n        cdef int Attribute1;\n        def Method1(self, var1):\n            self.classptr.Method1(var1)\n</code></pre>\n\n<p>... and pxd file with:</p>\n\n<pre><code>cdef extern from \"mycode.h\":\n    cdef cppclass MyClass:\n        MyClass() except +\n        int Attribute1\n        void Method1(string)\n</code></pre>\n\n<p>And I use a setup.py to create a .so library to import in a python module.</p>\n\n<p>Note that even though MyClass::Method2 and MyClass::Attribute2 exist in c++, I don't mention them in Cython, so they won't be visible in the .so library. Maybe I did so because they're indirectly used by  MyClass::Method1(), or just because I don't plan to invoke them in the python code.</p>\n\n<p>Is this a bad practice likely to cause a problem/weird behavior? \nIf so, why?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1573664516, "post_id": 58842060, "comment_id": 103958195, "body": "Have you tried using <code>(typename RTOS_Wrapper_T::Task_ID task)</code>?"}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 2, "creation_date": 1573664994, "post_id": 58842060, "comment_id": 103958423, "body": "The first <code>*</code> in <code>using Task_ID* = void*;</code> looks suspicious. Are you sure about that one?"}, {"owner": {"reputation": 145, "user_id": 11729602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4053fdc93748da63c6792b4eaa120d6?s=128&d=identicon&r=PG&f=1", "display_name": "JHeni", "link": "https://stackoverflow.com/users/11729602/jheni"}, "edited": false, "score": 0, "creation_date": 1573667275, "post_id": 58842060, "comment_id": 103959516, "body": "thx the typename was missing :)"}], "owner": {"reputation": 145, "user_id": 11729602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4053fdc93748da63c6792b4eaa120d6?s=128&d=identicon&r=PG&f=1", "display_name": "JHeni", "link": "https://stackoverflow.com/users/11729602/jheni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "closed_date": 1573665014, "answer_count": 0, "score": 0, "last_activity_date": 1573664426, "creation_date": 1573664426, "question_id": 58842060, "link": "https://stackoverflow.com/questions/58842060/c-access-typename-from-templated-class", "closed_reason": "Duplicate", "title": "C++ Access Typename from Templated Class", "body": "<p>I'm trying to access a type from a templated class. I created a wrapper for an RTOS to make my Code RTOS nondependend</p>\n\n<pre><code>class CRTOS_Wrapper\n{\npublic:\n\n  ///the desired class ID\n  using Task_ID* = void*;\n\n  /**\n   * Returns the handle to the current thread\n   * @return Handle to the current thread\n   */\n  static const Task_ID * OS_Get_Thread_ID();\n}\n</code></pre>\n\n<p>each RTOS wrapper looks exactly the same.</p>\n\n<p>another working class receives the desired wrapper as a template parameter</p>\n\n<pre><code>template&lt;typename RTOS_Wrapper_T&gt;\n  class CWorker\n{\n///this does not work\n      void Do_Something(RTOS_Wrapper_T::Task_ID task);\nprivate:\n      RTOS_Wrapper_T rtos_wrapper_instance;\n}\n</code></pre>\n\n<p>The compiler cannot resolve Task_ID. Can i somehow access the Task ID or is it not possible?</p>\n\n<p>Thx for your help :)</p>\n"}, {"tags": ["c++", "visual-studio", "dev-c++"], "comments": [{"owner": {"reputation": 188064, "user_id": 635608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oIJia.png?s=128&g=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/635608/mat"}, "edited": false, "score": 4, "creation_date": 1573664390, "post_id": 58842007, "comment_id": 103958126, "body": "<code>using namespace std;</code> - remove this and type <code>std::</code> where needed. <code>std::min</code> is a thing, you don&#39;t want name conflicts."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1573664408, "post_id": 58842007, "comment_id": 103958133, "body": "Please copy/paste the error into your question."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12354664"}, "edited": false, "score": 0, "creation_date": 1573664493, "post_id": 58842007, "comment_id": 103958183, "body": "error: \u2018__comp\u2019 cannot be used as a function"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1573664519, "post_id": 58842007, "comment_id": 103958196, "body": "The compiler cannot distinguish between your function and <a href=\"https://en.cppreference.com/w/cpp/algorithm/min\" rel=\"nofollow noreferrer\"><code>std::min</code></a>. It just happens that MSVC didn&#39;t <code>#include &lt;algorithm&gt;</code> within <code>iostream</code>, but other compilers did (and they are perfectly allowed to do so)."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1573664542, "post_id": 58842007, "comment_id": 103958209, "body": "Yep, or change it to <code>::min(x, y, z)</code>. Your own function is conflicting with <code>std::min</code> and this is a good example why <code>using namespace</code> is bad."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12354664"}, "reply_to_user": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1573664705, "post_id": 58842007, "comment_id": 103958291, "body": "@churill soyou mean  if I remove <i>using namespace</i> it will work?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12354664"}, "edited": false, "score": 0, "creation_date": 1573665305, "post_id": 58842007, "comment_id": 103958574, "body": "Oh , I understood,Thanks to everyone))"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": true, "score": 3, "last_activity_date": 1573664713, "creation_date": 1573664713, "answer_id": 58842151, "question_id": 58842007, "link": "https://stackoverflow.com/questions/58842007/template-function-only-works-with-vs/58842151#58842151", "title": "Template function only works with VS", "body": "<p>The function <code>std::min</code> is used implicitly. That's because overload resolution favours non-template functions over template ones, and some compiler toolsets allow <code>std::min</code> to be reachable via the <code>#include</code>s you have (the only thing the C++ standard has to say on the matter is that <code>std::min</code> must be available once <code>#include &lt;algorithm&gt;</code> is reached).</p>\n\n<p>Dropping <code>using namespace std;</code> is one fix, and is a good idea anyway. Tutorials often use it for clarity, but it's rare to find it in production code.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12354664"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1573664726, "accepted_answer_id": 58842151, "answer_count": 1, "score": 1, "last_activity_date": 1573664713, "creation_date": 1573664282, "question_id": 58842007, "link": "https://stackoverflow.com/questions/58842007/template-function-only-works-with-vs", "closed_reason": "Duplicate", "title": "Template function only works with VS", "body": "<p>I have  written a code with template but it works only with Visual Studio( not in Dev c++ or any online compiler. I don't understand why.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std; \n\ntemplate &lt;class Q1,class Q2,class Q3&gt; // but when i write instead of 3 classes  1 class it will work \n                                      //everywhere, how could it be possible?\n\nvoid min(Q1 a, Q2 b, Q3 c) {\n    if (a &lt;= b &amp;&amp; a &lt;= c) { \n        cout &lt;&lt; \"\\nMinimum number is: \" &lt;&lt; a &lt;&lt; endl; }\n    if (b &lt; a &amp;&amp; b &lt; c) {\n        cout &lt;&lt; \"\\nMinimum number is: \" &lt;&lt; b &lt;&lt; endl; }\n    if (c &lt; a &amp;&amp; c &lt; b) { \n        cout &lt;&lt; \"\\nMinimum number is: \" &lt;&lt; c &lt;&lt; endl; }\n\n}\n\nint main()\n{\n\n    double x,y,z;\n    cout &lt;&lt; \"Enter 3 numbers: \" &lt;&lt; endl;\n    cin &gt;&gt; x;\n    cin &gt;&gt; y;\n    cin &gt;&gt; z;\n\n    min(x, y, z);\n}\n</code></pre>\n"}, {"tags": ["c++", "g++", "mingw"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1573663845, "post_id": 58841825, "comment_id": 103957856, "body": "Depending on your environment you could write a bash script that does this for you. Or just type something like <code>g++ file.cpp &amp;&amp; .&#47;a.exe</code>"}, {"owner": {"reputation": 49, "user_id": 11662832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a5fea67b219a0a66bee3f18f6dfb67?s=128&d=identicon&r=PG&f=1", "display_name": "IROC", "link": "https://stackoverflow.com/users/11662832/iroc"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1578369384, "post_id": 58841825, "comment_id": 105407166, "body": "I m not familiar with bash, yet can you show an example how to do it?"}], "answers": [{"comments": [{"owner": {"reputation": 26593, "user_id": 811335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ca588e5bfb1ac0a5d8ec8acb422aa564?s=128&d=identicon&r=PG", "display_name": "A. K.", "link": "https://stackoverflow.com/users/811335/a-k"}, "edited": false, "score": 0, "creation_date": 1574773205, "post_id": 58841894, "comment_id": 104343107, "body": "It should be <code>.&#47;a.exe</code>"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 26593, "user_id": 811335, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ca588e5bfb1ac0a5d8ec8acb422aa564?s=128&d=identicon&r=PG", "display_name": "A. K.", "link": "https://stackoverflow.com/users/811335/a-k"}, "edited": false, "score": 0, "creation_date": 1574775273, "post_id": 58841894, "comment_id": 104344227, "body": "@A.K. For me CMD runs executables even without the <code>.&#47;</code>."}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 0, "last_activity_date": 1573663896, "creation_date": 1573663896, "answer_id": 58841894, "question_id": 58841825, "link": "https://stackoverflow.com/questions/58841825/c-program-compiler-run-the-exe-file-automatically-after-compiling-with-g-com/58841894#58841894", "title": "C++ program compiler run the exe file automatically after compiling with g++ command", "body": "<p>Use the <code>&amp;&amp;</code>:</p>\n\n<pre><code>g++ file.cpp &amp;&amp; a.exe\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 11662832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41a5fea67b219a0a66bee3f18f6dfb67?s=128&d=identicon&r=PG&f=1", "display_name": "IROC", "link": "https://stackoverflow.com/users/11662832/iroc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "accepted_answer_id": 58841894, "answer_count": 1, "score": 2, "last_activity_date": 1573663896, "creation_date": 1573663698, "question_id": 58841825, "link": "https://stackoverflow.com/questions/58841825/c-program-compiler-run-the-exe-file-automatically-after-compiling-with-g-com", "title": "C++ program compiler run the exe file automatically after compiling with g++ command", "body": "<p>For running C++ program we first run \"g++ file.cpp\" and then we run \"a.exe\" in CMD\nCan we do it all in single command? If yes, how?</p>\n"}, {"tags": ["c++", "uwp", "com", "activex", "atl"], "comments": [{"owner": {"reputation": 510, "user_id": 791026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I1PyF.jpg?s=128&g=1", "display_name": "phillyslick", "link": "https://stackoverflow.com/users/791026/phillyslick"}, "edited": false, "score": 1, "creation_date": 1587501594, "post_id": 58841517, "comment_id": 108536273, "body": "Any chance you resolved this?"}], "owner": {"reputation": 21, "user_id": 5353776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e69f63ddd5405c9fafe37d2f593e47?s=128&d=identicon&r=PG", "display_name": "Eng KFKE", "link": "https://stackoverflow.com/users/5353776/eng-kfke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1573662655, "creation_date": 1573662655, "question_id": 58841517, "link": "https://stackoverflow.com/questions/58841517/embed-a-custom-uwp-control-in-atl-activex-control", "title": "Embed a custom UWP control in ATL ActiveX control", "body": "<p>Is there a way to somehow Embed a UWP custom control in ATL ActiveX control?\nI want to use the AdaptiveCards in one of my ActiveX control.</p>\n\n<p>I found that I can <a href=\"https://docs.microsoft.com/en-us/windows/apps/desktop/modernize/using-the-xaml-hosting-api\" rel=\"nofollow noreferrer\">use the UWP XAML hosting API in a C++ Win32 app</a>\nI tried to use the <a href=\"https://github.com/marb2000/XamlIslands/tree/master/1903_Samples/CppWinRT_Win32_App\" rel=\"nofollow noreferrer\">sample project</a> as start project</p>\n\n<ol>\n<li>I added the ATL support to the project and it compiled without errors.</li>\n<li>but it gives me the following errors after adding IDL file to define an interface.</li>\n</ol>\n\n<p>Error   MIDL2003    [msg]redefinition [context]: IUnknown<br>\nError   MIDL2003    [msg]redefinition [context]: _FLAGGED_WORD_BLOB </p>\n"}, {"tags": ["c++", "arrays", "matrix", "2d"], "comments": [{"owner": {"reputation": 335, "user_id": 4917303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-tQ6JhO6s9qg/AAAAAAAAAAI/AAAAAAAAAHg/m5MVLqdIDvs/photo.jpg?sz=128", "display_name": "Oriel Cochavi", "link": "https://stackoverflow.com/users/4917303/oriel-cochavi"}, "edited": false, "score": 0, "creation_date": 1573662829, "post_id": 58841395, "comment_id": 103957276, "body": "You need to initialize the array properly. only the first 10 elements of your array are initialized by you (1 to 10) and the rest is initialized to zero by the compiler. look at this specific situation like this: int tabelle [10][10] = { {1, 2, 3, 4, 5, 6, 7, 8, 9, 10} }; I added curly brackets around your initialization, and now it easier to look at it as the first row of the 2d array, the rest is zero."}, {"owner": {"reputation": 335, "user_id": 4917303, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-tQ6JhO6s9qg/AAAAAAAAAAI/AAAAAAAAAHg/m5MVLqdIDvs/photo.jpg?sz=128", "display_name": "Oriel Cochavi", "link": "https://stackoverflow.com/users/4917303/oriel-cochavi"}, "edited": false, "score": 0, "creation_date": 1573663207, "post_id": 58841395, "comment_id": 103957504, "body": "<a href=\"https://en.cppreference.com/w/c/language/array_initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/array_initialization</a> - look under &#39;Nested arrays&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1573663302, "post_id": 58841483, "comment_id": 103957567, "body": "FWIW <code>{{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}, {2}, {3}, {4}, {5}, {6}, {7}, {8}, {9}, {10}};</code> does the same thing"}], "tags": [], "owner": {"reputation": 74, "user_id": 12215371, "user_type": "registered", "profile_image": "https://graph.facebook.com/436732370531300/picture?type=large", "display_name": "Arpan Arpan", "link": "https://stackoverflow.com/users/12215371/arpan-arpan"}, "is_accepted": false, "score": 1, "last_activity_date": 1573662536, "creation_date": 1573662536, "answer_id": 58841483, "question_id": 58841395, "link": "https://stackoverflow.com/questions/58841395/simple-2d-array-matrix-in-c/58841483#58841483", "title": "simple 2D array matrix in c++", "body": "<p>That's not how array assignments work in C++. \nThink of 2D arrays as a 1D array of 1D arrays. </p>\n\n<pre><code>int tabelle[10][10] = {{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}, {2, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {3, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {4, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {5, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {6, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {7, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {8, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {9, 0, 0, 0, 0, 0, 0, 0, 0, 0}, {10, 0, 0, 0, 0, 0, 0, 0, 0, 0}};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 3507913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c3a405d091b27d2de033f5692ccaf7?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/3507913/pankaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1573663198, "creation_date": 1573663198, "answer_id": 58841666, "question_id": 58841395, "link": "https://stackoverflow.com/questions/58841395/simple-2d-array-matrix-in-c/58841666#58841666", "title": "simple 2D array matrix in c++", "body": "<ul>\n<li>your code is working correctly, 2d array is set of one dimension\narray.</li>\n<li>here 2d array tabelle[10][10]'s first one dimension array tablelle[0] is initialized with elements.</li>\n<li>One more thing partially initialized array fills the rest of the element with<br>\nzero, that is why all other element are zero.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 12367936, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p_jEmSOUjH8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcXAJoefSwq3-g9YhoIDvwaeoWqKQ/photo.jpg?sz=128", "display_name": "Cpp_Newbie", "link": "https://stackoverflow.com/users/12367936/cpp-newbie"}, "edited": false, "score": 0, "creation_date": 1573665075, "post_id": 58841982, "comment_id": 103958468, "body": "thanks a lot due to people like u im able to unterstand it way better ^^"}], "tags": [], "owner": {"reputation": 1219, "user_id": 11547576, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8YD74.jpg?s=128&g=1", "display_name": "neutrino_logic", "link": "https://stackoverflow.com/users/11547576/neutrino-logic"}, "is_accepted": false, "score": 0, "last_activity_date": 1573664182, "creation_date": 1573664182, "answer_id": 58841982, "question_id": 58841395, "link": "https://stackoverflow.com/questions/58841395/simple-2d-array-matrix-in-c/58841982#58841982", "title": "simple 2D array matrix in c++", "body": "<p>There are several different methods to initialize your 2D array, with the same result:</p>\n\n<pre><code>    int tab[4][4] = {{1,2,3,4},{2},{3},{4}};\n    int bat[4][4] = {1,2,3,4,2,0,0,0,3,0,0,0,4,0,0,0};\n</code></pre>\n\n<p>The thing to keep in mind is that this kind of array is automatically allocated on the stack by the compiler and is stored as a linear sequential array in memory (see the second method above).</p>\n\n<p>Also, for C++, the array you create in a function by automatic allocation in this manner has a scope limited to that function; after the function call ends, the array is gone.  If you want to create an array in a function and pass it back to the main function for use, it has to be dynamically (heap) allocated; you then pass a pointer to that array back to main, and then you have to manage that memory by hand (assuming you didn't use a smart pointer to make it).</p>\n\n<p>Note: You can also initiate your array as follows, for very large arrays:</p>\n\n<pre><code>   myarray[100][100] = {};    //sets all elements to 0\n   for (int i = 0; i &lt; 100; i++) {\n       myarray[0][i] = i + 1;\n       myarray[i][0] = i + 1;\n   }\n</code></pre>\n\n<p>Never do this:</p>\n\n<pre><code>    myarray[100][100];\n</code></pre>\n\n<p>As this creates an array full of junk values loaded with whatever random bits happen to have been previously stored in that memory location, and you might forget to overwrite them later.</p>\n"}], "owner": {"reputation": 41, "user_id": 12367936, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p_jEmSOUjH8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcXAJoefSwq3-g9YhoIDvwaeoWqKQ/photo.jpg?sz=128", "display_name": "Cpp_Newbie", "link": "https://stackoverflow.com/users/12367936/cpp-newbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1573664182, "creation_date": 1573662245, "question_id": 58841395, "link": "https://stackoverflow.com/questions/58841395/simple-2d-array-matrix-in-c", "title": "simple 2D array matrix in c++", "body": "<p>im absolut new to cpp, I tried to code a simple 2D array matrix.\nHere is what I'm talking about:</p>\n\n<pre><code>\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\n\nvoid printTable()\n{\n\n    int tabelle [10][10] = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };\n    int i, j;\n    for (i = 0; i &lt; 10; i++)\n    {\n        for (j = 0; j &lt; 10; j++)\n        {\n            printf(\"%d   \", tabelle[i][j]);\n        }\n        printf(\"\\n\");\n    }\n}\n\n\nint main(int argc, char* argv[])\n{\n    printTable();\n\n\n    return 0;\n}\n\n</code></pre>\n\n<p>This is how it looks like:                        </p>\n\n<p>1   2   3   4   5   6   7   8   9   10<br>\n0   0   0   0   0   0   0   0   0   0<br>\n0   0   0   0   0   0   0   0   0   0<br>\n0   0   0   0   0   0   0   0   0   0<br>\n0   0   0   0   0   0   0   0   0   0<br>\n0   0   0   0   0   0   0   0   0   0<br>\n0   0   0   0   0   0   0   0   0   0<br>\n0   0   0   0   0   0   0   0   0   0<br>\n0   0   0   0   0   0   0   0   0   0<br>\n0   0   0   0   0   0   0   0   0   0 </p>\n\n<p>And this is how it should look like:</p>\n\n<p>1   2   3   4   5   6   7   8   9   10<br>\n2   0   0   0   0   0   0   0   0   0<br>\n3   0   0   0   0   0   0   0   0   0<br>\n4   0   0   0   0   0   0   0   0   0<br>\n5   0   0   0   0   0   0   0   0   0<br>\n6   0   0   0   0   0   0   0   0   0<br>\n7   0   0   0   0   0   0   0   0   0<br>\n8   0   0   0   0   0   0   0   0   0<br>\n9   0   0   0   0   0   0   0   0   0<br>\n10   0   0   0   0   0   0   0   0   0     </p>\n\n<p>Thx for any advise :D</p>\n"}, {"tags": ["c++", "r", "matrix", "eigen", "rcpp"], "comments": [{"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1573676677, "post_id": 58841131, "comment_id": 103963722, "body": "Make sure your cpp files are properly compiled with compiler optimizations ON (<code>-O3</code>) and full support of your CPU (<code>-march=native</code>)"}, {"owner": {"reputation": 186, "user_id": 2256656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02515d88edecf6afa0f54f715f27a3e?s=128&d=identicon&r=PG", "display_name": "DaBookshah", "link": "https://stackoverflow.com/users/2256656/dabookshah"}, "edited": false, "score": 0, "creation_date": 1573706256, "post_id": 58841131, "comment_id": 103972029, "body": "Did you tell Eigen to use your BLAS library?"}, {"owner": {"reputation": 77, "user_id": 4194332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3e3ba34fe5f8031f049bce18b9924a?s=128&d=identicon&r=PG&f=1", "display_name": "Jacco", "link": "https://stackoverflow.com/users/4194332/jacco"}, "reply_to_user": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1573849704, "post_id": 58841131, "comment_id": 104035676, "body": "@ggael Would this probably be the cause of this issue? Currently my compiler uses O2, but I&#39;m not allowed to change the Makeconf file on the server I&#39;m working on (<a href=\"https://stackoverflow.com/questions/48917107/rcpp-sourcecpp-compiler-settings\" title=\"rcpp sourcecpp compiler settings\">stackoverflow.com/questions/48917107/&hellip;</a>). Would it be possible to compile this function by hand and use it in R?"}, {"owner": {"reputation": 77, "user_id": 4194332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3e3ba34fe5f8031f049bce18b9924a?s=128&d=identicon&r=PG&f=1", "display_name": "Jacco", "link": "https://stackoverflow.com/users/4194332/jacco"}, "reply_to_user": {"reputation": 186, "user_id": 2256656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02515d88edecf6afa0f54f715f27a3e?s=128&d=identicon&r=PG", "display_name": "DaBookshah", "link": "https://stackoverflow.com/users/2256656/dabookshah"}, "edited": false, "score": 0, "creation_date": 1573849995, "post_id": 58841131, "comment_id": 104035781, "body": "@DaBookshah How can I check that? I included the verbose output of sourceCpp, that shows the full compiler settings."}, {"owner": {"reputation": 186, "user_id": 2256656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02515d88edecf6afa0f54f715f27a3e?s=128&d=identicon&r=PG", "display_name": "DaBookshah", "link": "https://stackoverflow.com/users/2256656/dabookshah"}, "edited": false, "score": 0, "creation_date": 1573955860, "post_id": 58841131, "comment_id": 104058363, "body": "Yeah, looks like you didn&#39;t. Organise to add EIGEN_USE_BLAS as a define. This is consistent with your performance description."}], "owner": {"reputation": 77, "user_id": 4194332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef3e3ba34fe5f8031f049bce18b9924a?s=128&d=identicon&r=PG&f=1", "display_name": "Jacco", "link": "https://stackoverflow.com/users/4194332/jacco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1574067071, "creation_date": 1573661307, "last_edit_date": 1574067071, "question_id": 58841131, "link": "https://stackoverflow.com/questions/58841131/matrix-multiplication-using-the-c-eigen-package-seems-unstable-if-matrix-size", "title": "Matrix multiplication using the c++ eigen package seems unstable if matrix size increases", "body": "<p>I have to perform many matrix calculations to perform load flow calculations. I'm using R in general and C++ for computationally expensive steps. The the most computationally expensive parts are two matrix multiplications + transpose, and one time solving the equation Ax = b. I started using sparse matrices but because I managed to reduce the size of the matrices this doesn't seem the way to go anymore. Switching to dense matrices saved me the cost of building sparse matrices and the solve-step is much faster (~20 times). The multiplications are a bit slower but I ended up with a factor 3 to 6 of speed increase compared to sparse matrices.</p>\n\n<p>To increase the speed further I tried the methods suggested at <a href=\"https://stackoverflow.com/questions/35923787/fast-large-matrix-multiplication-in-r\">fast large matrix multiplication in R</a></p>\n\n<p>I included an extra part of C++ code that performs all my calculations at once.</p>\n\n<pre><code>// [[Rcpp::export]]\nSEXP eigenMapNodeAdm(const Eigen::Map&lt;Eigen::MatrixXd&gt; I, Eigen::Map&lt;Eigen::MatrixXd&gt; A){\n  Eigen::MatrixXd Y = I * A * I.transpose() ;\n\n  return Rcpp::wrap(Y);\n}\n</code></pre>\n\n<p>For smaller matrices (~120 rows/columns and smaller) this turns out to be much faster than the standard R matrix multiplication and transpose. However for larger matrices the calculation times increase very dramatically. Any ideas about what causes this behaviour? Maybe there are better ways to multiply these relatively small but still quite sparse matrices? Thank you in advance for the help.</p>\n\n<pre><code>library(microbenchmark)\nlibrary(Rcpp)\nlibrary(RcppEigen)\n\nsourceCpp(\"MatrixMtp.cpp\") # From https://stackoverflow.com/questions/35923787/fast-large-matrix-multiplication-in-r\n                           # but with own method added\n</code></pre>\n\n<p>A &lt;- as.matrix(read.csv(\"<a href=\"https://pastebin.com/raw/iLBuN9jJ\" rel=\"nofollow noreferrer\">https://pastebin.com/raw/iLBuN9jJ</a>\"))\nI &lt;- as.matrix(read.csv(\"<a href=\"https://pastebin.com/raw/VNcicPkc\" rel=\"nofollow noreferrer\">https://pastebin.com/raw/VNcicPkc</a>\"))</p>\n\n<pre><code>microbenchmark(I %*% A %*% Matrix::t(I),\n               I %*% tcrossprod(A, I),\n               armaMatMult(armaMatMult(I, A),Matrix::t(I)),\n               eigenMatMult(eigenMatMult(I, A),Matrix::t(I)),\n               eigenMapMatMult(eigenMapMatMult(I, A), Matrix::t(I)),\n               eigenMapNodeAdm(I,A),\n               times=100, check = \"equivalent\")\n\nUnit: microseconds\n                                                 expr       min         lq      mean    median        uq       max neval\n                             I %*% A %*% Matrix::t(I)   743.334   960.5095  1802.524  1187.911  1459.810 35053.930   100\n                               I %*% tcrossprod(A, I)   671.096   911.5160  1202.167  1163.660  1369.427  2052.610   100\n         armaMatMult(armaMatMult(I, A), Matrix::t(I))   820.778  1345.8945  1996.141  1639.704  2437.173  4237.511   100\n       eigenMatMult(eigenMatMult(I, A), Matrix::t(I)) 35358.135 43384.3715 49053.363 47713.833 53511.026 76970.653   100\n eigenMapMatMult(eigenMapMatMult(I, A), Matrix::t(I)) 33974.205 44098.6550 49799.859 49723.058 54936.584 76038.817   100\n                                eigenMapNodeAdm(I, A) 30565.759 44404.1400 49241.233 48834.046 53759.213 72884.721   100\n</code></pre>\n\n<p>If I subset the matrices the Eigen implemenations are much faster:</p>\n\n<pre><code>microbenchmark(Isub %*% Asub %*% Matrix::t(Isub),\n               Isub %*% tcrossprod(Asub, Isub),\n               armaMatMult(armaMatMult(Isub, Asub),Matrix::t(Isub)),\n               eigenMatMult(eigenMatMult(Isub, Asub),Matrix::t(Isub)),\n               eigenMapMatMult(eigenMapMatMult(Isub, Asub), Matrix::t(Isub)),\n               eigenMapNodeAdm(Isub, Asub),times=1000, check = \"equivalent\")\nUnit: microseconds\n                                                      expr     min       lq     mean   median       uq       max neval\n                               Isub %*% Asub %*% Matrix::t(Isub) 341.197 376.6945 556.0409 519.2540 535.0250 27024.769  1000\n                                 Isub %*% tcrossprod(Asub, Isub) 294.895 346.8450 456.7293 471.9845 486.3635 15247.886  1000\n           armaMatMult(armaMatMult(Isub, Asub), Matrix::t(Isub)) 362.011 417.8405 566.1201 521.3710 569.3060 12531.499  1000\n         eigenMatMult(eigenMatMult(Isub, Asub), Matrix::t(Isub)) 322.220 440.7020 532.7970 475.2170 519.2595 14328.881  1000\n   eigenMapMatMult(eigenMapMatMult(Isub, Asub), Matrix::t(Isub)) 263.116 376.5190 502.5597 407.7840 450.3955 20956.507  1000\n                                     eigenMapNodeAdm(Isub, Asub) 197.265 291.4280 330.9622 306.5935 320.9700  7650.685  1000\n</code></pre>\n\n<p>Content of the MatrixMtp.cpp file:</p>\n\n<pre><code>// [[Rcpp::depends(RcppArmadillo, RcppEigen)]]\n\n#include &lt;RcppArmadillo.h&gt;\n#include &lt;RcppEigen.h&gt;\n\n// [[Rcpp::export]]\nSEXP armaMatMult(arma::mat A, arma::mat B){\n  arma::mat C = A * B;\n\n  return Rcpp::wrap(C);\n}\n\n// [[Rcpp::export]]\nSEXP eigenMatMult(Eigen::MatrixXd A, Eigen::MatrixXd B){\n  Eigen::MatrixXd C = A * B;\n\n  return Rcpp::wrap(C);\n}\n\n// [[Rcpp::export]]\nSEXP eigenMapMatMult(const Eigen::Map&lt;Eigen::MatrixXd&gt; A, Eigen::Map&lt;Eigen::MatrixXd&gt; B){\n  Eigen::MatrixXd C = A * B;\n\n  return Rcpp::wrap(C);\n}\n\n// [[Rcpp::export]]\nSEXP eigenMapNodeAdm(const Eigen::Map&lt;Eigen::MatrixXd&gt; I, Eigen::Map&lt;Eigen::MatrixXd&gt; A){\n  Eigen::MatrixXd Y = I * A * I.transpose() ;\n\n  return Rcpp::wrap(Y);\n}\n</code></pre>\n\n<p>Verbose output of sourceCpp:</p>\n\n<pre><code>&gt; sourceCpp(\"inst/extdata/MatrixMtp.cpp\", verbose = TRUE) # call the C++ file and we have three functions as armaMatMult\uff0ceigenMatMult\uff0ceigenMapMatMult.\n\nGenerated extern \"C\" functions \n--------------------------------------------------------\n\n\n#include &lt;Rcpp.h&gt;\n// armaMatMult\nSEXP armaMatMult(arma::mat A, arma::mat B);\nRcppExport SEXP sourceCpp_1_armaMatMult(SEXP ASEXP, SEXP BSEXP) {\nBEGIN_RCPP\n    Rcpp::RObject rcpp_result_gen;\n    Rcpp::RNGScope rcpp_rngScope_gen;\n    Rcpp::traits::input_parameter&lt; arma::mat &gt;::type A(ASEXP);\n    Rcpp::traits::input_parameter&lt; arma::mat &gt;::type B(BSEXP);\n    rcpp_result_gen = Rcpp::wrap(armaMatMult(A, B));\n    return rcpp_result_gen;\nEND_RCPP\n}\n// eigenMatMult\nSEXP eigenMatMult(Eigen::MatrixXd A, Eigen::MatrixXd B);\nRcppExport SEXP sourceCpp_1_eigenMatMult(SEXP ASEXP, SEXP BSEXP) {\nBEGIN_RCPP\n    Rcpp::RObject rcpp_result_gen;\n    Rcpp::RNGScope rcpp_rngScope_gen;\n    Rcpp::traits::input_parameter&lt; Eigen::MatrixXd &gt;::type A(ASEXP);\n    Rcpp::traits::input_parameter&lt; Eigen::MatrixXd &gt;::type B(BSEXP);\n    rcpp_result_gen = Rcpp::wrap(eigenMatMult(A, B));\n    return rcpp_result_gen;\nEND_RCPP\n}\n// eigenMapMatMult\nSEXP eigenMapMatMult(const Eigen::Map&lt;Eigen::MatrixXd&gt; A, Eigen::Map&lt;Eigen::MatrixXd&gt; B);\nRcppExport SEXP sourceCpp_1_eigenMapMatMult(SEXP ASEXP, SEXP BSEXP) {\nBEGIN_RCPP\n    Rcpp::RObject rcpp_result_gen;\n    Rcpp::RNGScope rcpp_rngScope_gen;\n    Rcpp::traits::input_parameter&lt; const Eigen::Map&lt;Eigen::MatrixXd&gt; &gt;::type A(ASEXP);\n    Rcpp::traits::input_parameter&lt; Eigen::Map&lt;Eigen::MatrixXd&gt; &gt;::type B(BSEXP);\n    rcpp_result_gen = Rcpp::wrap(eigenMapMatMult(A, B));\n    return rcpp_result_gen;\nEND_RCPP\n}\n// eigenMapNodeAdm\nSEXP eigenMapNodeAdm(const Eigen::Map&lt;Eigen::MatrixXd&gt; I, Eigen::Map&lt;Eigen::MatrixXd&gt; A);\nRcppExport SEXP sourceCpp_1_eigenMapNodeAdm(SEXP ISEXP, SEXP ASEXP) {\nBEGIN_RCPP\n    Rcpp::RObject rcpp_result_gen;\n    Rcpp::RNGScope rcpp_rngScope_gen;\n    Rcpp::traits::input_parameter&lt; const Eigen::Map&lt;Eigen::MatrixXd&gt; &gt;::type I(ISEXP);\n    Rcpp::traits::input_parameter&lt; Eigen::Map&lt;Eigen::MatrixXd&gt; &gt;::type A(ASEXP);\n    rcpp_result_gen = Rcpp::wrap(eigenMapNodeAdm(I, A));\n    return rcpp_result_gen;\nEND_RCPP\n}\n// eigenMapCalcCurrents\nSEXP eigenMapCalcCurrents(const Eigen::Map&lt;Eigen::MatrixXd&gt; I, Eigen::Map&lt;Eigen::MatrixXd&gt; A, Eigen::Map&lt;Eigen::MatrixXd&gt; U);\nRcppExport SEXP sourceCpp_1_eigenMapCalcCurrents(SEXP ISEXP, SEXP ASEXP, SEXP USEXP) {\nBEGIN_RCPP\n    Rcpp::RObject rcpp_result_gen;\n    Rcpp::RNGScope rcpp_rngScope_gen;\n    Rcpp::traits::input_parameter&lt; const Eigen::Map&lt;Eigen::MatrixXd&gt; &gt;::type I(ISEXP);\n    Rcpp::traits::input_parameter&lt; Eigen::Map&lt;Eigen::MatrixXd&gt; &gt;::type A(ASEXP);\n    Rcpp::traits::input_parameter&lt; Eigen::Map&lt;Eigen::MatrixXd&gt; &gt;::type U(USEXP);\n    rcpp_result_gen = Rcpp::wrap(eigenMapCalcCurrents(I, A, U));\n    return rcpp_result_gen;\nEND_RCPP\n}\n\nGenerated R functions \n-------------------------------------------------------\n\n`.sourceCpp_1_DLLInfo` &lt;- dyn.load('/data/tmp/R/RtmpPJH0wY/sourceCpp-x86_64-redhat-linux-gnu-1.0.2.3/sourcecpp_620a5c2e111b/sourceCpp_8.so')\n\narmaMatMult &lt;- Rcpp:::sourceCppFunction(function(A, B) {}, FALSE, `.sourceCpp_1_DLLInfo`, 'sourceCpp_1_armaMatMult')\neigenMatMult &lt;- Rcpp:::sourceCppFunction(function(A, B) {}, FALSE, `.sourceCpp_1_DLLInfo`, 'sourceCpp_1_eigenMatMult')\neigenMapMatMult &lt;- Rcpp:::sourceCppFunction(function(A, B) {}, FALSE, `.sourceCpp_1_DLLInfo`, 'sourceCpp_1_eigenMapMatMult')\neigenMapNodeAdm &lt;- Rcpp:::sourceCppFunction(function(I, A) {}, FALSE, `.sourceCpp_1_DLLInfo`, 'sourceCpp_1_eigenMapNodeAdm')\neigenMapCalcCurrents &lt;- Rcpp:::sourceCppFunction(function(I, A, U) {}, FALSE, `.sourceCpp_1_DLLInfo`, 'sourceCpp_1_eigenMapCalcCurrents')\n\nrm(`.sourceCpp_1_DLLInfo`)\n\nBuilding shared library\n--------------------------------------------------------\n\nDIR: /data/tmp/R/RtmpPJH0wY/sourceCpp-x86_64-redhat-linux-gnu-1.0.2.3/sourcecpp_620a5c2e111b\n\n/usr/lib64/R/bin/R CMD SHLIB -o 'sourceCpp_8.so'  'MatrixMtp.cpp'  \ng++ -m64 -std=gnu++11 -I\"/usr/include/R\" -DNDEBUG -I../inst/include -fopenmp  -I\"/data/users/al5696/Rlib/Rcpp/include\" -I\"/data/common/R/library/RcppArmadillo/include\" -I\"/data/common/R/library/RcppEigen/include\" -I\"/data/users/al5696/ms_n_min_1_berekening3/inst/extdata\" -I/usr/local/include   -fpic  -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector-strong --param=ssp-buffer-size=4 -grecord-gcc-switches   -m64 -mtune=generic -c MatrixMtp.cpp -o MatrixMtp.o\ng++ -m64 -std=gnu++11 -shared -L/usr/lib64/R/lib -Wl,-z,relro -o sourceCpp_8.so MatrixMtp.o -fopenmp -L/usr/lib64/R/lib -lRlapack -L/usr/lib64/R/lib -lRblas -lgfortran -lm -lquadmath -L/usr/lib64/R/lib -lR\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-code", "vscode-tasks"], "owner": {"reputation": 2695, "user_id": 886357, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d0e09de07d348483088b599fc27eff3a?s=128&d=identicon&r=PG", "display_name": "Morpheus", "link": "https://stackoverflow.com/users/886357/morpheus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573662543, "creation_date": 1573660890, "last_edit_date": 1573662543, "question_id": 58841006, "link": "https://stackoverflow.com/questions/58841006/how-to-create-separate-tasks-for-building-and-running-c-code-in-visual-studio", "title": "How to create separate tasks for building and running c++ code in Visual Studio Code (VSCode)", "body": "<p>I feel like this should have been very straightforward but googling leads me to various blogposts with no direct answer. </p>\n\n<p>I want to have a few different build tasks:</p>\n\n<p>1) Just Build with debugging on</p>\n\n<p>2) Build with debugging off</p>\n\n<p>3) Run the binary output file</p>\n\n<p>4) Build with debugging off and run the binary output file.</p>\n\n<pre><code>{\n    \"version\": \"2.0.0\",\n    \"tasks\": [\n      {\n        \"label\": \"Build with Clang and Debugging\",\n        \"type\": \"shell\",\n        \"command\": \"clang++\",\n        \"args\": [\n          \"-std=c++11\",\n          \"-stdlib=libc++\",\n          \"helloworld.cpp\",\n          \"-o\",\n          \"helloworld.out\",\n          \"--debug\"\n        ],\n        \"group\": {\n          \"kind\": \"build\",\n          \"isDefault\": true\n        }\n      },\n      {\n        \"label\": \"Build with Clang without Debugging\",\n        \"type\": \"shell\",\n        \"command\": \"clang++\",\n        \"args\": [\n          \"-std=c++11\",\n          \"-stdlib=libc++\",\n          \"helloworld.cpp\",\n          \"-o3\",\n          \"helloworld.out\"\n        ],\n        \"group\": {\n          \"kind\": \"build\",\n          \"isDefault\": false\n        }\n      }\n    ]\n  }\n</code></pre>\n\n<p>I am not sure how to create the above tasks and run them. I tried creating a new task for building without debugging and there seems to be a syntax error. I also want to just run (by a keyword shortcut) without manually typing for instance, <code>./helloworld.out</code> on the terminal. </p>\n\n<p>And the <code>\"isDefault\": false</code> seems to be giving me some syntax error.</p>\n\n<p>Is there a way to have all these tasks and assign a keyboard shortcut to each of them?</p>\n"}, {"tags": ["c++", "operators", "lvalue", "post-increment", "pre-increment"], "comments": [{"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573662011, "post_id": 58840973, "comment_id": 103956772, "body": "This was originally tagged with C, it most certainly isn&#39;t valid C."}, {"owner": {"reputation": 602, "user_id": 12342718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IvS6W.jpg?s=128&g=1", "display_name": "Bktero", "link": "https://stackoverflow.com/users/12342718/bktero"}, "reply_to_user": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 0, "creation_date": 1573662427, "post_id": 58840973, "comment_id": 103957018, "body": "Indeed sorry! I assumed the behavior was the same in C..."}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 23, "last_activity_date": 1573661090, "creation_date": 1573661090, "answer_id": 58841066, "question_id": 58840973, "link": "https://stackoverflow.com/questions/58840973/why-is-i-invalid-while-i-is-valid/58841066#58841066", "title": "Why is &quot;++i++&quot; invalid while (++i)++ is valid?", "body": "<p><code>i</code> and <code>++i</code> are both lvalues, but <code>i++</code> is an rvalue.</p>\n\n<p><code>++(i++)</code> cannot be valid, as the prefix <code>++</code> is being applied to <code>i++</code>, which is an rvalue. But <code>(++i)++</code> is fine because <code>++i</code> is an lvalue.</p>\n\n<p>Note that in C, the situation is different; <code>i++</code> and <code>++i</code> are both rvalues. (This is an example of why people should stop assuming that C and C++ have the same rules. People insert these assumptions into their questions, which must then be refuted.)</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 3, "last_activity_date": 1573661112, "creation_date": 1573661112, "answer_id": 58841072, "question_id": 58840973, "link": "https://stackoverflow.com/questions/58840973/why-is-i-invalid-while-i-is-valid/58841072#58841072", "title": "Why is &quot;++i++&quot; invalid while (++i)++ is valid?", "body": "<blockquote>\n  <p>so the code is parsed as int b = ++(i++); and i is an rvalue.</p>\n</blockquote>\n\n<p>No. <code>i</code> is not an rvalue. <code>i</code> is an lvalue. <code>i++</code> is an rvalue (prvalue to be specific).</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 4, "last_activity_date": 1573661552, "last_edit_date": 1573661552, "creation_date": 1573661206, "answer_id": 58841107, "question_id": 58840973, "link": "https://stackoverflow.com/questions/58840973/why-is-i-invalid-while-i-is-valid/58841107#58841107", "title": "Why is &quot;++i++&quot; invalid while (++i)++ is valid?", "body": "<p>This declaration</p>\n\n<pre><code>int b = ++i++;\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>int b = ++( i++ );\n</code></pre>\n\n<p>The postfix increment operator returns the value of the operand before increment.</p>\n\n<p>From the C++ 17 Standard (8.2.6 Increment and decrement)</p>\n\n<blockquote>\n  <p>1 The value of a postfix ++ expression is the value of its\n  operand...<strong>The result is a prvalue</strong>.</p>\n</blockquote>\n\n<p>While the unary increment operator returns lvalue after its increment. So this declaration</p>\n\n<pre><code>int b = (++i)++;\n</code></pre>\n\n<p>is valid. You could for example write</p>\n\n<pre><code>int b = (++++++++i)++;\n</code></pre>\n\n<p>From the C++ 17 Standard (8.3.2 Increment and decrement)</p>\n\n<blockquote>\n  <p>1 The operand of prefix ++ is modified by adding 1. The operand shall\n  be a modifiable lvalue. The type of the operand shall be an arithmetic\n  type other than cv bool, or a pointer to a completely-defined object\n  type. <strong>The result is the updated operand; it is an lvalue</strong>, and it is a\n  bit-field if the operand is a bit-field....</p>\n</blockquote>\n\n<p>Pay attention that in C the both operators return a value instead of lvalue. So in C this declaration</p>\n\n<pre><code>int b = (++i)++;\n</code></pre>\n\n<p>is invalid.</p>\n"}], "owner": {"reputation": 602, "user_id": 12342718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IvS6W.jpg?s=128&g=1", "display_name": "Bktero", "link": "https://stackoverflow.com/users/12342718/bktero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 4, "accepted_answer_id": 58841066, "answer_count": 3, "score": 14, "last_activity_date": 1573662600, "creation_date": 1573660785, "last_edit_date": 1573662600, "question_id": 58840973, "link": "https://stackoverflow.com/questions/58840973/why-is-i-invalid-while-i-is-valid", "title": "Why is &quot;++i++&quot; invalid while (++i)++ is valid?", "body": "<p>Let's consider the following code:</p>\n\n<pre><code>int main() {\n    int i = 2;\n    int b = ++i++;\n    return 3;\n}\n</code></pre>\n\n<p>It compiles with the following with an error:</p>\n\n<pre><code>&lt;source&gt;: In function 'int main()':\n\n&lt;source&gt;:3:16: error: lvalue required as increment operand\n\n    3 |     int b = ++i++;\n\n      |                ^~\n</code></pre>\n\n<p>This sounds fair to me. Postfix increment has higher priority than prefix increment, so the code is parsed as <code>int b = ++(i++);</code> and <code>i</code> is an rvalue. Hence the error.</p>\n\n<p>Let's now consider this variant with parenthesis to override default priorities:</p>\n\n<pre><code>int main() {\n    int i = 2;\n    int b = (++i)++;\n    return 3;\n}\n</code></pre>\n\n<p>This code compiles and returns 3. On its own, this sounds fair to me but it seems in contradiction with the first code.</p>\n\n<p><strong>The question: why <code>(++i)</code> is an <code>lvalue</code> when <code>i</code> is not?</strong></p>\n\n<p>Thanks!</p>\n\n<p><strong>UPDATE:</strong> the error message shown above was from gcc (x86-64 9.2). Here is the exact rendering:\n<a href=\"https://i.stack.imgur.com/hjrhK.png\" rel=\"noreferrer\">error with gcc</a></p>\n\n<p>Clang x86-64 9.0.0 has a quite different message:\n<a href=\"https://i.stack.imgur.com/AUqAk.png\" rel=\"noreferrer\">error with clang</a></p>\n\n<pre><code>&lt;source&gt;:3:13: error: expression is not assignable\n\n    int b = ++i++;\n\n            ^ ~~~\n</code></pre>\n\n<p>With GCC, you get the impression that the problem is with the postfix operator and you can then wander why <code>++i</code> is OK while <code>i</code> is not, hence my question. With Clang it is clearer that the problem is with the prefix operator.</p>\n"}, {"tags": ["c++", "class", "declaration", "friend-function"], "comments": [{"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1573660827, "post_id": 58840959, "comment_id": 103956042, "body": "Just declare the membre function as a friend function within another class definition."}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1573661329, "post_id": 58840959, "comment_id": 103956337, "body": "You can do this (as Vlad from Moscow demonstrates below) but it&#39;s bad style. A class is the basic unit of modular programming in C++. If one member function of a class has access, the whole class ought to."}], "answers": [{"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1573661021, "creation_date": 1573661021, "answer_id": 58841046, "question_id": 58840959, "link": "https://stackoverflow.com/questions/58840959/how-to-provide-friend-function-to-a-specific-member-function-in-a-class-with-mul/58841046#58841046", "title": "How to provide friend function to a specific member function in a class with multiple member functions so that the specified member function", "body": "<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct A\n{\n    void f() const;\n};\n\nclass B\n{\npublic:\n    B( int i = 0 ) : i( i ) {}\n\n    friend void A::f() const;\n\nprivate:\n    int i;\n};\n\nvoid A::f() const\n{\n    B b( 10 );\n\n    std::cout &lt;&lt; \"b.i = \" &lt;&lt; b.i &lt;&lt; '\\n';\n}\n\nint main() \n{\n    A().f();\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>b.i = 10\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12367808, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6Kzu3rLXgAc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re2awOiUDMGWHuc0aJGnpcev7o5Aw/photo.jpg?sz=128", "display_name": "Priyarajan R", "link": "https://stackoverflow.com/users/12367808/priyarajan-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573662624, "creation_date": 1573660740, "last_edit_date": 1573662624, "question_id": 58840959, "link": "https://stackoverflow.com/questions/58840959/how-to-provide-friend-function-to-a-specific-member-function-in-a-class-with-mul", "title": "How to provide friend function to a specific member function in a class with multiple member functions so that the specified member function", "body": "<p>How to provide friend function to a specific member function in a class with multiple member functions so that the specified member function can only access private data of another class while other member function should not.</p>\n"}, {"tags": ["c++", "opengl", "transformation", "glm-math"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 9163758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785fb24587de5e221441f1282924c58a?s=128&d=identicon&r=PG&f=1", "display_name": "BF97", "link": "https://stackoverflow.com/users/9163758/bf97"}, "edited": false, "score": 0, "creation_date": 1573774446, "post_id": 58844237, "comment_id": 104005508, "body": "Thanks, will try flipping stuff around."}, {"owner": {"reputation": 5, "user_id": 9163758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785fb24587de5e221441f1282924c58a?s=128&d=identicon&r=PG&f=1", "display_name": "BF97", "link": "https://stackoverflow.com/users/9163758/bf97"}, "edited": false, "score": 0, "creation_date": 1573804674, "post_id": 58844237, "comment_id": 104013107, "body": "That worked, thank you! Will look into lookAt as well."}], "tags": [], "owner": {"reputation": 2550, "user_id": 191012, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5cd6859716d64ed0a877c7a8e8969135?s=128&d=identicon&r=PG", "display_name": "prideout", "link": "https://stackoverflow.com/users/191012/prideout"}, "is_accepted": true, "score": 0, "last_activity_date": 1573673270, "creation_date": 1573673270, "answer_id": 58844237, "question_id": 58840956, "link": "https://stackoverflow.com/questions/58840956/problems-rotating-multiple-cubes-at-the-same-time/58844237#58844237", "title": "Problems rotating multiple cubes at the same time", "body": "<p>Try flipping the order of your transformations. Instead of [translate,rotate,scale] do [scale,rotate,translate].</p>\n\n<p>As a side note, it's generally easier to use <code>glm::lookAt</code> to compute your V matrix then to use multiple steps.</p>\n"}], "owner": {"reputation": 5, "user_id": 9163758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785fb24587de5e221441f1282924c58a?s=128&d=identicon&r=PG&f=1", "display_name": "BF97", "link": "https://stackoverflow.com/users/9163758/bf97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 58844237, "answer_count": 1, "score": 0, "last_activity_date": 1573675434, "creation_date": 1573660737, "last_edit_date": 1573675434, "question_id": 58840956, "link": "https://stackoverflow.com/questions/58840956/problems-rotating-multiple-cubes-at-the-same-time", "title": "Problems rotating multiple cubes at the same time", "body": "<p>I'm drawing a Pyramid made out of 3 Cubes (two side to side then one on top), then I try to rotate this pyramid on X, Y or Z axis and scale it up and down.</p>\n\n<p>Problem is the three cubes do not scale correctly (different sizes), also rotating produces very strange results.</p>\n\n<p>I have defined an array for my Cube, using a glm vec3 array: </p>\n\n<pre><code>const glm::vec3 cube[] = {\n    glm::vec3(-1.0f,-1.0f,-1.0f),\n    glm::vec3( -1.0f,-1.0f, 1.0f),\n    glm::vec3(-1.0f, 1.0f, 1.0f),\n    glm::vec3(1.0f, 1.0f,-1.0f), \n    glm::vec3(-1.0f,-1.0f,-1.0f),\n    glm::vec3(-1.0f, 1.0f,-1.0f),\n    glm::vec3(1.0f,-1.0f, 1.0f),\n    glm::vec3(-1.0f,-1.0f,-1.0f),\n    glm::vec3(1.0f,-1.0f,-1.0f),\n    glm::vec3(1.0f, 1.0f,-1.0f),\n    glm::vec3(1.0f,-1.0f,-1.0f),\n    glm::vec3(-1.0f,-1.0f,-1.0f),\n    glm::vec3(-1.0f,-1.0f,-1.0f),\n    glm::vec3(-1.0f, 1.0f, 1.0f),\n    glm::vec3(-1.0f, 1.0f,-1.0f),\n    glm::vec3(1.0f,-1.0f, 1.0f),\n    glm::vec3(-1.0f,-1.0f, 1.0f),\n    glm::vec3(-1.0f,-1.0f,-1.0f),\n    glm::vec3(-1.0f, 1.0f, 1.0f),\n    glm::vec3(-1.0f,-1.0f, 1.0f),\n    glm::vec3(1.0f,-1.0f, 1.0f),\n    glm::vec3(1.0f, 1.0f, 1.0f),\n    glm::vec3(1.0f,-1.0f,-1.0f),\n    glm::vec3(1.0f, 1.0f,-1.0f),\n    glm::vec3(1.0f,-1.0f,-1.0f),\n    glm::vec3(1.0f, 1.0f, 1.0f),\n    glm::vec3(1.0f,-1.0f, 1.0f),\n    glm::vec3(1.0f, 1.0f, 1.0f),\n    glm::vec3(1.0f, 1.0f,-1.0f),\n    glm::vec3(-1.0f, 1.0f,-1.0f),\n    glm::vec3(1.0f, 1.0f, 1.0f),\n    glm::vec3(-1.0f, 1.0f,-1.0f),\n    glm::vec3(-1.0f, 1.0f, 1.0f),\n    glm::vec3(1.0f, 1.0f, 1.0f),\n    glm::vec3(-1.0f, 1.0f, 1.0f),\n    glm::vec3(1.0f,-1.0f, 1.0f)\n};\n</code></pre>\n\n<p>I generate and link the buffers and the necessary stuff for OpenGL to work, then I draw the pyramid, which is made of the three cubes. I am almost certain this is the part of the code where it all goes wrong:</p>\n\n<pre><code>glm::mat4 P = glm::perspective(glm::radians(60.0f + zoom), float(width()) / height(), 0.01f, 1000.0f);\n\nglm::mat4 V = glm::mat4(1);\nV = glm::translate(V, glm::vec3(-3 + moveX, -1 + moveY, -6 + moveZ));\n\n\nV = glm::rotate(V, glm::radians(rotateCamradX), glm::vec3(1.0, 0.0, 0.0));\nV = glm::rotate(V, glm::radians(rotateCamradY), glm::vec3(0.0, 1.0, 0.0));\nV = glm::rotate(V, glm::radians(rotateCamradZ), glm::vec3(0.0, 0.0, 1.0));\n\n\nglm::mat4 M = glm::mat4(1);  \nM = glm::translate(M, glm::vec3(-1, 0, 0));\n\nM = glm::rotate(M, glm::radians(rotateradX), glm::vec3(1.0, 0.0, 0.0));\nM = glm::rotate(M, glm::radians(rotateradY), glm::vec3(0.0, 1.0, 0.0));\nM = glm::rotate(M, glm::radians(rotateradZ), glm::vec3(0.0, 0.0, 1.0));\n\nM = glm::scale(M, glm::vec3(scaleVar, scaleVar, scaleVar));\n\nglm::mat4 M1 = glm::mat4(1);\nM1 = glm::translate(M, glm::vec3(2, 0, 0));\n\nM1 = glm::rotate(M1, glm::radians(rotateradX), glm::vec3(1.0, 0.0, 0.0));\nM1 = glm::rotate(M1, glm::radians(rotateradY), glm::vec3(0.0, 1.0, 0.0));\nM1 = glm::rotate(M1, glm::radians(rotateradZ), glm::vec3(0.0, 0.0, 1.0));\n\nM1 = glm::scale(M1, glm::vec3(scaleVar, scaleVar, scaleVar));\n\n\nglm::mat4 M2 = glm::mat4(1);\nM2 = glm::translate(M, glm::vec3(1, 2, 0));\n\nM2 = glm::rotate(M2, glm::radians(rotateradX), glm::vec3(1.0, 0.0, 0.0));\nM2 = glm::rotate(M2, glm::radians(rotateradY), glm::vec3(0.0, 1.0, 0.0));\nM2 = glm::rotate(M2, glm::radians(rotateradZ), glm::vec3(0.0, 0.0, 1.0));\n\nM2 = glm::scale(M2, glm::vec3(scaleVar, scaleVar, scaleVar));\n\nglm::mat4 PVM = P * V * M;\nglm::mat4 PVM1 = P * V * M1;\nglm::mat4 PVM2 = P * V * M2;\n\ngl-&gt;glUniformMatrix4fv(id_shader_program_PVM_uniform, 1, GL_FALSE, glm::value_ptr(PVM));\ngl-&gt;glUniform3f(id_shader_program_Color_uniform, 0.3f ,0.1f, 0.2f);\ngl-&gt;glDrawArrays(GL_TRIANGLES, 0, 3*12);\ngl-&gt;glUniformMatrix4fv(id_shader_program_PVM_uniform, 1, GL_FALSE, glm::value_ptr(PVM1));\ngl-&gt;glUniform3f(id_shader_program_Color_uniform, 0.8f ,0.2f, 0.7f);\ngl-&gt;glDrawArrays(GL_TRIANGLES, 0, 3*12);\ngl-&gt;glUniformMatrix4fv(id_shader_program_PVM_uniform, 1, GL_FALSE, glm::value_ptr(PVM2));\ngl-&gt;glUniform3f(id_shader_program_Color_uniform, 0.1f ,0.2f, 0.1f);\ngl-&gt;glDrawArrays(GL_TRIANGLES, 0, 3*12);\n</code></pre>\n\n<p>The variables in V matrix are used for camera movement, which works, then in M, M1 and M2 are the scaling variables and rotation variables. All of the variables are type float, which I change using buttons in an UI app.</p>\n"}, {"tags": ["c++", "floating-point"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 3, "creation_date": 1573660663, "post_id": 58840888, "comment_id": 103955953, "body": "<code>a = a%m;</code> -- <code>return result%prod;</code> -- What are the values of <code>m</code> and <code>prod</code>?  Also, <code>#include&lt;bits&#47;stdc++.h&gt;</code> -- get rid of that line."}, {"owner": {"reputation": 1, "user_id": 11408434, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-meALrYQq9W0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfR1C-nTpIno8k6cKv02tduncag3A/mo/photo.jpg?sz=128", "display_name": "Yogesh SIngh", "link": "https://stackoverflow.com/users/11408434/yogesh-singh"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573661030, "post_id": 58840888, "comment_id": 103956156, "body": "Prod is just a variable prod = 1 Just like M = m1*m2*m3*..m(n) . we need value of M so i am using prod in place of M for m  x == a(mod m) i am taking input.txt file ."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573661334, "post_id": 58840888, "comment_id": 103956344, "body": "Did you verify those are the values?  I don&#39;t see in your code where you are checking them to see that they are not <code>0</code>."}, {"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1573662774, "post_id": 58840888, "comment_id": 103957244, "body": "<code>findMinX(num, rem, k)</code> is suspect.  I&#39;d have expected <code>findMinX(num, rem, n)</code>.  In <code>findMinX</code> I&#39;d have expected the loop to be from <code>0</code> to <code>&lt;k</code>."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1573841015, "post_id": 58840888, "comment_id": 104032125, "body": "@YogeshSIngh Did my answer make any sense? If you have questions regarding it, feel free to ask."}], "answers": [{"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": false, "score": 1, "last_activity_date": 1573676670, "last_edit_date": 1573676670, "creation_date": 1573662694, "answer_id": 58841533, "question_id": 58840888, "link": "https://stackoverflow.com/questions/58840888/floating-point-error-with-this-code-can-someone-help-me/58841533#58841533", "title": "Floating Point Error With This Code Can someone help me", "body": "<p>These lines:<br>\n<code>for(int i = 1; i &lt;= k; i++)</code><br>\n<code>for(int j = 1; j &lt;= k; j++)</code><br>\nwill cause <code>i</code> and <code>j</code> to go out of bounds. </p>\n\n<p>Array indexing starts at <code>0</code> in C++, so you should use indexes <code>0</code> to <code>k-1</code>.</p>\n\n<p>Do this instead:</p>\n\n<p><code>for(int i = 0; i &lt; k; i++)</code><br>\n<code>for(int j = 0; j &lt; k; j++)</code>  </p>\n\n<p>Another thing worth checking up is this function:</p>\n\n<pre><code>int ModInverse(int a, int m)\n{\n    a = a % m;\n    for(int x = 1; x &lt; m; x++)\n        if(((a * x) % m) == 1) return x;\n}\n</code></pre>\n\n<p>Given the <em>wrong</em> input, it'll exit the loop and return nothing, which causes undefined behaviour. Validate the input and print an error message if the file contains data you can't handle.</p>\n\n<p>Here's an example of an <code>input.txt</code> that makes it crash for me:</p>\n\n<pre><code>5\n1 2 3 4 5\n2 3 4 5 6\n</code></pre>\n\n<p>Another cause for concern is that you use <code>k</code> instead of <code>n</code> in your call to the function:<br>\n<code>myfile &lt;&lt; findMinX(num, rem, k);</code>  </p>\n\n<p>This means the function will always work on 100 values. Some of them may be uninitialized, and again, undefined behaviour.</p>\n"}], "owner": {"reputation": 1, "user_id": 11408434, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-meALrYQq9W0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfR1C-nTpIno8k6cKv02tduncag3A/mo/photo.jpg?sz=128", "display_name": "Yogesh SIngh", "link": "https://stackoverflow.com/users/11408434/yogesh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573676670, "creation_date": 1573660510, "last_edit_date": 1573661834, "question_id": 58840888, "link": "https://stackoverflow.com/questions/58840888/floating-point-error-with-this-code-can-someone-help-me", "title": "Floating Point Error With This Code Can someone help me", "body": "<p>i am facing problem with this chinese remainder theoram \ni am taking an input.txt file as input \nand trying to generate an output.txt file but it says floating point error. when i am running with some specific input at that time it is working but for many test cases it is not working </p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nint ModInverse(int a, int m)\n{\n    a = a % m;\n    for(int x = 1; x &lt; m; x++)\n        if(((a * x) % m) == 1) return x;\n}\n\nint findMinX(int num[], int rem[], int k) {\n    int prod = 1;\n\n    for(int i = 1; i &lt;= k; i++) prod *= num[i];\n\n    int result = 0;\n    for(int j = 1; j &lt;= k; j++) {\n        int y = prod / num[j];\n\n        result = result + rem[j] * ModInverse(y, num[j]) * y;\n    }\n\n    return result % prod;\n}\nint main() {\n    ifstream infile;\n    infile.open(\"input.txt\");\n\n    int n;\n    int num[100];\n    int rem[100];\n\n    infile &gt;&gt; n;\n    for(int i = 0; i &lt; n; i++) infile &gt;&gt; num[i];\n\n    for(int i = 0; i &lt; n; i++) infile &gt;&gt; rem[i];\n\n    infile.close();\n\n    int k = sizeof(num) / sizeof(num[0]);\n\n    ofstream myfile;\n    myfile.open(\"output.txt\");\n    myfile &lt;&lt; findMinX(num, rem, k);\n    myfile.close();\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "initialization", "c++17", "c++20", "aggregate-initialization"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1573660453, "post_id": 58840780, "comment_id": 103955839, "body": "I feel like the ship has sailed for this particular question. For what it&#39;s worth, I was mildly surprised when I ran into this case the first time, leading to <a href=\"https://stackoverflow.com/q/37618213/2069064\">this question</a> (although now I don&#39;t remember the original example), but like... yeah."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1573660604, "post_id": 58840780, "comment_id": 103955922, "body": "@Barry: I don&#39;t want to write a counter-proposal. I&#39;m just curious about the real-world cases affected by P1008... if any"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1573660744, "post_id": 58840780, "comment_id": 103955991, "body": "@Barry: even your example is not convincing. Why would you have a class with a <code>=default</code> private constructor and all public data members?"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1573660924, "post_id": 58840780, "comment_id": 103956098, "body": "@VittorioRomeo: Because anyone who is able to get the type should be able to access the variables. It&#39;s creating new values for the type that is prohibited outside of <code>private</code> access classes. If you&#39;re given access to an existing value, you can still work on it as normal."}], "answers": [{"comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1573661067, "post_id": 58840990, "comment_id": 103956183, "body": "Assuming I understand correctly, you are referring to the &quot;passkey idiom&quot;. Honestly, it doesn&#39;t seem very motivating for the impact P1008 had, but at least it is somewhat realistic."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1573661190, "post_id": 58840990, "comment_id": 103956262, "body": "@VittorioRomeo: What impact did it have, exactly? It seems to me that any code it breaks is code that isn&#39;t following the Rule of 0 and thus probably deserves to be broken."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1573661543, "post_id": 58840990, "comment_id": 103956470, "body": "It is arguable whether &quot;the rule of zero&quot; is exactly &quot;not specifying any special member function&quot; or also includes &quot;specifying all special member functions as <code>=default</code>&quot;. In my mental model these were equivalent. This is an example of impact: <a href=\"https://twitter.com/tcanens/status/1185379657350352897\" rel=\"nofollow noreferrer\">twitter.com/tcanens/status/1185379657350352897</a>"}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "reply_to_user": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 1, "creation_date": 1573662788, "post_id": 58840990, "comment_id": 103957253, "body": "@VittorioRomeo: <code>array</code>&#39;s destructor <i>should not be</i> unconditionally <code>noexcept</code>. To me, this seems to be an example of why this is a good thing. If a type cares enough about what the subobjects are doing that it wants to enforce <code>noexcept</code> destruction, then I would say that it&#39;s not a logical aggregation. An aggregate object ought to be functionally identical to declaring the contents of the aggregate as variables in the same scope. That <i>includes</i> <code>noexcept</code> destructors of those types. This is the feature working as intended to me."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1573745367, "post_id": 58840990, "comment_id": 103991589, "body": "This type is trivial, so if you can name it you can bless an object into existence, private constructor or not. If you make the name private, then the ctor&#39;s privateness isn&#39;t very relevant."}], "tags": [], "owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "is_accepted": false, "score": 5, "last_activity_date": 1573660832, "creation_date": 1573660832, "answer_id": 58840990, "question_id": 58840780, "link": "https://stackoverflow.com/questions/58840780/when-is-p1008-prohibit-aggregates-with-user-declared-constructors-useful-in/58840990#58840990", "title": "When is P1008 (&quot;prohibit aggregates with user-declared constructors&quot;) useful in practice?", "body": "<p>The most obvious case is this:</p>\n\n<pre><code>struct X\n{\nprivate:\n    X() = default;\n};\n\nX x{};\n</code></pre>\n\n<p>This is not a type which should be able to be initialized outside of a privately accessible context. But it can be.</p>\n\n<p>Now, such types might seem silly, but they're actually useful for implementing private functions that work through forwarding functions. <code>make_shared</code> for example cannot call constructors declared <code>private</code>, even if you make the <code>make_shared</code> template a friend. So instead, you make the constructors <code>public</code>, but require that the user pass an instance of a type that can only be constructed by someone with <code>private</code> access. So <code>X</code> would either be a member type of the target class or <code>X</code> would make the target class a <code>friend</code>.</p>\n"}], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1574259916, "creation_date": 1573660127, "question_id": 58840780, "link": "https://stackoverflow.com/questions/58840780/when-is-p1008-prohibit-aggregates-with-user-declared-constructors-useful-in", "title": "When is P1008 (&quot;prohibit aggregates with user-declared constructors&quot;) useful in practice?", "body": "<p><a href=\"http://wg21.link/p1008\" rel=\"noreferrer\">P1008 (<em>\"Prohibit aggregates with user-declared constructors\"</em>)</a> has become part of the C++20 standard, in order to prevent surprising behavior when using aggregate initialization:</p>\n\n<pre><code>struct X {\n  int i{42};\n  X() = delete;\n};\n\nint main() {\n  X x2{3}; // Compiles in C++17, error in C++20\n}\n</code></pre>\n\n<p>I agree that the above <code>X x2{3};</code> statement should not compile. However, all the examples justifying P1008 that I've encountered are not realistic at all - they are purely syntactical and basically meaningless <code>foo</code>/<code>bar</code>/<code>baz</code> code snippets.</p>\n\n<p>What problem does P1008 solve <strong>in practice</strong>? I find it hard to imagine how I would end up writing something like the above <code>X</code> in a real program.</p>\n\n<p>Deleting the default constructor in a C++17 aggregate <em>without</em> providing other constructors to initialize it seems unrealistic to me.</p>\n"}, {"tags": ["c++", "reference"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1573660057, "post_id": 58840724, "comment_id": 103955603, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/15718262/what-exactly-is-the-as-if-rule\">What exactly is the &quot;as-if&quot; rule?</a> &lt;- here you can find explanation"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1573660089, "post_id": 58840724, "comment_id": 103955625, "body": "related: <a href=\"https://stackoverflow.com/questions/1179937/how-does-a-c-reference-look-memory-wise\" title=\"how does a c reference look memory wise\">stackoverflow.com/questions/1179937/&hellip;</a>"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1573660108, "post_id": 58840724, "comment_id": 103955634, "body": "for an <code>int</code> you probably wouldnt notice any difference even if you make a copy even without compiler optimization. When you have to choose between readability and premature optimization then better go for the first"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1573660166, "post_id": 58840724, "comment_id": 103955680, "body": "@formerlyknownas_463035818 Hmm? A copy wouldn&#39;t even be made. A memory address would be stored if the reference weren&#39;t elided."}, {"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 3, "creation_date": 1573660238, "post_id": 58840724, "comment_id": 103955718, "body": "Regardless of whether compilers optimise this I don\u2019t think I like your strategy: as a reader of the code I\u2019d be left wondering what the heck is going on here, and why you\u2019re seemingly needlessly aliasing a variable. Instead of renaming it via assignment (and drop the unnecessary reference! copy it), I\u2019d try restructuring the algorithm to reduce references to verbose names."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1573662134, "last_edit_date": 1592644375, "creation_date": 1573661630, "answer_id": 58841222, "question_id": 58840724, "link": "https://stackoverflow.com/questions/58840724/will-a-compiler-remove-effectless-references/58841222#58841222", "title": "Will a compiler remove effectless references?", "body": "<blockquote>\n<p>Will a compiler remove effectless references?</p>\n</blockquote>\n<p>It depends. It may, if it can. The language doesn't mandate optimisation, it is <em>permitted</em>.</p>\n<blockquote>\n<p>Does this cause an overhead after compilation and would this be acceptable coding style?</p>\n</blockquote>\n<p>Overhead would be highly unlikely in this case, assuming the compiler optimises the program.</p>\n<p>In general, you can verify that a reference is optimised away by comparing the generated assembly with or without the reference. If the generated assembly is identical, then there will not be any overhead.</p>\n<p>More generally, you can verify whether any change has significant overhead by measuring.</p>\n<blockquote>\n<p>Would this be better</p>\n<pre><code>int &amp; min_dist{min_distance_to_polygon};\n</code></pre>\n</blockquote>\n<p>It would be effectively identical.</p>\n"}, {"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 2, "last_activity_date": 1573661740, "creation_date": 1573661740, "answer_id": 58841251, "question_id": 58840724, "link": "https://stackoverflow.com/questions/58840724/will-a-compiler-remove-effectless-references/58841251#58841251", "title": "Will a compiler remove effectless references?", "body": "<blockquote>\n  <p>Does this cause an overhead after compilation</p>\n</blockquote>\n\n<p>Not with an optimizing compiler, no. This is bread-and-butter optimization for a compiler. In fact, even copying the value would likely not cause any overhead (assuming that it remains unchanged) due to the compiler's value tracking and/or how CPU registers actually work behind the scenes (see <a href=\"https://en.wikipedia.org/wiki/Register_renaming\" rel=\"nofollow noreferrer\">Register Renaming</a>).</p>\n\n<blockquote>\n  <p>and would this be acceptable coding style?</p>\n</blockquote>\n\n<p>That's opinion-based and debatable. I posit that there exists code where this is a reasonable choice, but that such code is rare. In the end it's up to you to judge whether future readers will find either version easier to read and comprehend.</p>\n\n<blockquote>\n  <p>Would this be better (as it prevents a possible copy)?</p>\n</blockquote>\n\n<p>The two code snippets you show are exactly identical in their semantics - both are initialization. No <code>operator=</code> is invoked (even conceptually) in <code>X x = y;</code>.</p>\n"}], "owner": {"reputation": 666, "user_id": 12251738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23ca8e413fe7089778a0dbb55a22592?s=128&d=identicon&r=PG&f=1", "display_name": "AlexGeorg", "link": "https://stackoverflow.com/users/12251738/alexgeorg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "closed_date": 1573719756, "accepted_answer_id": 58841251, "answer_count": 2, "score": 2, "last_activity_date": 1573662134, "creation_date": 1573659933, "last_edit_date": 1573660442, "question_id": 58840724, "link": "https://stackoverflow.com/questions/58840724/will-a-compiler-remove-effectless-references", "closed_reason": "Duplicate", "title": "Will a compiler remove effectless references?", "body": "<p>Situation is that I'd like to use descriptive variable names as member variables so they are well understandable in headers (for example: <code>min_distance_to_polygon</code>). Yet in complex algorithms I'd find it smoother to have much shorter variable names because the context is clear (for example <code>min_dist</code> in that case).</p>\n\n<p>So in the definition of a method I'd just write:</p>\n\n<pre><code>int &amp; min_dist = min_distance_to_polygon;\n</code></pre>\n\n<p>Does this cause an overhead after compilation and would this be acceptable coding style?</p>\n\n<p>EDIT: Would this be better (as it prevents a possible copy)?</p>\n\n<pre><code>int &amp; min_dist{min_distance_to_polygon};\n</code></pre>\n"}, {"tags": ["c++", "qt", "qml", "qtcharts"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1573668110, "post_id": 58840614, "comment_id": 103959912, "body": "provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 772, "user_id": 1453027, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/637c59872b0f9c05621abb04830a8309?s=128&d=identicon&r=PG", "display_name": "bardao", "link": "https://stackoverflow.com/users/1453027/bardao"}, "edited": false, "score": 0, "creation_date": 1573668595, "post_id": 58840614, "comment_id": 103960162, "body": "so far this model looks empty (shrugs)"}, {"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1573678331, "post_id": 58840614, "comment_id": 103964397, "body": "returning constant value from <code>rowCount</code> and appending a value to the data source looks very strange and should cause to problems. That besides the fact that initially the data source is empty and <code>tableData[23]</code> will cause to crash."}], "answers": [{"tags": [], "owner": {"reputation": 957, "user_id": 266578, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/35b43bd2f2235ae053f70ee3d889f601?s=128&d=identicon&r=PG", "display_name": "eyecreate", "link": "https://stackoverflow.com/users/266578/eyecreate"}, "is_accepted": true, "score": 0, "last_activity_date": 1573678638, "creation_date": 1573678638, "answer_id": 58845492, "question_id": 58840614, "link": "https://stackoverflow.com/questions/58840614/qml-chart-using-qabstracttablemodel-doesnt-dynamically-update/58845492#58845492", "title": "QML Chart using QAbstractTableModel doesn&#39;t dynamically update", "body": "<p>I found out through trying everything that the data points are in the series correctly, just that the graph needed to be adjusted so the points were in view.\nAdjusting the min/max for each axis has allowed the lines to show up.</p>\n"}], "owner": {"reputation": 957, "user_id": 266578, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/35b43bd2f2235ae053f70ee3d889f601?s=128&d=identicon&r=PG", "display_name": "eyecreate", "link": "https://stackoverflow.com/users/266578/eyecreate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 58845492, "answer_count": 1, "score": -1, "last_activity_date": 1598519713, "creation_date": 1573659604, "last_edit_date": 1573671831, "question_id": 58840614, "link": "https://stackoverflow.com/questions/58840614/qml-chart-using-qabstracttablemodel-doesnt-dynamically-update", "title": "QML Chart using QAbstractTableModel doesn&#39;t dynamically update", "body": "<p>I have a QAbtractTableModel that is accessible to a QML file with chart and series and XYModelMapper. When trying to update the model, nothing shows up on the chart. I've tried different methods(even trying QStandardItemModel before) and I can't seem to get any charts to update once it's finished loading. Is there something I'm doing wrong using either the model or model mapper? I've included simplified version of the files here.</p>\n\n<pre><code>class MyModel : public QAbstractTableModel\n{\n    Q_OBJECT\n\npublic:\n\n    QVariant data(const QModelIndex&amp; index, int role) const override;\n\n    int columnCount(const QModelIndex&amp; parent) const override;\n\n    int rowCount(const QModelIndex&amp; parent) const override;\n\n    QVariant headerData(int section, Qt::Orientation orientation, int role) const override;\n\n    Qt::ItemFlags flags(const QModelIndex &amp; index) const override;\n\n    void clear();\n\n    void addData(QDateTime time, float temperature, quint32 brightness, quint8 moisture, quint16 conductivity);\n\nprivate:\n    struct data {\n        QDateTime time;\n        float value;\n\n    };\n    QList&lt;data&gt; tableData;\n\n};\n\nclass Obj : public QObject\n{\n    Q_OBJECT\n    Q_PROPERTY(QAbstractTableModel* model READ getModel NOTIFY updated)\n\npublic:\n    QAbstractTableModel* getModel() {return myModel;}\n    Q_INVOKABLE void startUpdate(); //updated emitted here eventually as well as addData called on model.\n\nsignals:\n    void updated();\n\nprivate:\n    MyModel *myModel = new MyModel();\n\n};\n\nQVariant MyModel::data(const QModelIndex&amp; index, int role) const\n{\n    if(role == Qt::DisplayRole &amp;&amp; tableData.size()-1 &gt;= index.row()) {\n        if(index.column() == 0) {\n            return QVariant(tableData[index.row()].time.toMSecsSinceEpoch());\n        } else if(index.column() == 1) {\n            return QVariant(tableData[index.row()].value);\n        } else {\n            return QVariant();\n        }\n    } else {\n        return QVariant();\n    }\n}\n\nint MyModel::columnCount(const QModelIndex&amp; parent) const\n{\n    return 5;\n}\n\nint MyModel::rowCount(const QModelIndex&amp; parent) const\n{\n    return 24;\n}\n\nvoid MyModel::addData(QDateTime time, float value)\n{\n    tableData.append(data{time, value}); //Previously tried dynamic row count with begin/end row inserted.\n    emit dataChanged(createIndex(0,0),createIndex(23,4));\n}\n\nQ_DECL_EXPORT int main(int argc, char *argv[])\n{\n    QGuiApplication::setAttribute(Qt::AA_EnableHighDpiScaling);\n    QApplication app(argc, argv);\n\n\n    QQmlApplicationEngine engine;\n    qmlRegisterType&lt;Obj&gt;(\"org.eyecreate.testmodel\",1,0,\"ObjModel\");\n    engine.load(QUrl(QStringLiteral(\"qrc:///main.qml\")));\n\n    if (engine.rootObjects().isEmpty()) {\n        return -1;\n    }\n\n    return app.exec();\n}\n</code></pre>\n\n<pre><code>import QtCharts 2.3 as Charts\nimport org.eyecreate.testmodel 1.0\n\nObjModel {\n    id: myObj\n}\n\nCharts.ChartView {\n    antialiasing: true\n    legend.visible: false\n    anchors.fill: parent\n    Charts.LineSeries {\n        axisX: Charts.DateTimeAxis {\n            format: \"MMM d yyyy ha\"\n        }\n        axisY: Charts.ValueAxis {\n            min: 0\n            max: 50\n        }\n\n        Charts.VXYModelMapper {\n            model: myObj.model\n            xColumn: 0\n            yColumn: 1\n\n        }\n    }\n}\n\nButton {\n    onClicked: {\n        myObj.startUpdate();\n    }\n}\n</code></pre>\n\n<p><strong>EDIT</strong>: I found code very similar to mine that shows the same issue here: <a href=\"https://bitbucket.org/johnwoltman/chartmodelmappertest/src/master/\" rel=\"nofollow noreferrer\">https://bitbucket.org/johnwoltman/chartmodelmappertest/src/master/</a>\nIt seems this might be a bug: <a href=\"https://bugreports.qt.io/browse/QTBUG-60336\" rel=\"nofollow noreferrer\">https://bugreports.qt.io/browse/QTBUG-60336</a></p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "edited": false, "score": 12, "creation_date": 1573659457, "post_id": 58840520, "comment_id": 103955189, "body": "<code>return *this;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 10021193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503bcc7fadece189a5a6be44dc15f59f?s=128&d=identicon&r=PG&f=1", "display_name": "hatinacat2000", "link": "https://stackoverflow.com/users/10021193/hatinacat2000"}, "edited": false, "score": 0, "creation_date": 1573659671, "post_id": 58840593, "comment_id": 103955332, "body": "ugh. Thanks, I feel like I wasted your time. I have been up all night solving much harder problems, I swear!"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 125, "user_id": 10021193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503bcc7fadece189a5a6be44dc15f59f?s=128&d=identicon&r=PG&f=1", "display_name": "hatinacat2000", "link": "https://stackoverflow.com/users/10021193/hatinacat2000"}, "edited": false, "score": 0, "creation_date": 1573659772, "post_id": 58840593, "comment_id": 103955400, "body": "@hatinacat2000 \u2022 I think most C++ programmers when first learning C++ make that mistake.  The reason <code>this</code> is a self-referencing pointer rather than a self-referencing reference is because references hadn&#39;t been added to the C++ language yet when it was first being created."}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "reply_to_user": {"reputation": 125, "user_id": 10021193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503bcc7fadece189a5a6be44dc15f59f?s=128&d=identicon&r=PG&f=1", "display_name": "hatinacat2000", "link": "https://stackoverflow.com/users/10021193/hatinacat2000"}, "edited": false, "score": 0, "creation_date": 1573660248, "post_id": 58840593, "comment_id": 103955728, "body": "@hatinacat2000 Please accept the answer if it helped you to solve your problem."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 3, "last_activity_date": 1573659546, "creation_date": 1573659546, "answer_id": 58840593, "question_id": 58840520, "link": "https://stackoverflow.com/questions/58840520/c-how-to-make-a-function-return-the-object-that-called-it/58840593#58840593", "title": "C++ How to make a function return the object that called it?", "body": "<blockquote>\n  <p>I naively thought <code>return this;</code> would do it but that does not the proper reference.</p>\n</blockquote>\n\n<p><code>this</code> is a <strong>pointer</strong> to the current object. To achieve your desired result, simply dereference it: <code>*this</code>.</p>\n"}], "owner": {"reputation": 125, "user_id": 10021193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/503bcc7fadece189a5a6be44dc15f59f?s=128&d=identicon&r=PG&f=1", "display_name": "hatinacat2000", "link": "https://stackoverflow.com/users/10021193/hatinacat2000"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 58840593, "answer_count": 1, "score": 0, "last_activity_date": 1573659572, "creation_date": 1573659345, "last_edit_date": 1573659572, "question_id": 58840520, "link": "https://stackoverflow.com/questions/58840520/c-how-to-make-a-function-return-the-object-that-called-it", "title": "C++ How to make a function return the object that called it?", "body": "<p>This feels like it should be obvious but I have looked for a while and must not be asking the question right. I am doing an assignment operator overload for a Vector2D class. The function just converts the calling object's x and y coordinates to the vector passed in the argument:</p>\n\n<pre><code>// Vector2D.h\nclass Vector2D\n{\npublic:\n\n    float x, y;\n\n    Vector2D();\n    Vector2D(float x, float y);\n.\n.\n.\nVector2D&amp; operator=(const Vector2D&amp; vec);\n.\n.\n.\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>// Vector2D.cpp\n.\n.\n.\nVector2D &amp; Vector2D::operator=(const Vector2D &amp; vec)\n{\n    this-&gt;x = vec.x;\n    this-&gt;y = vec.y;\n    return ? ? ? ? ;\n}\n.\n.\n.\n</code></pre>\n\n<p>What am I supposed to return to make this work? I naively thought <code>return this;</code> would do it but that is not the proper reference.</p>\n"}, {"tags": ["c++", "bit", "simd", "avx2", "sse2"], "comments": [{"owner": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 4, "creation_date": 1573659493, "post_id": 58840437, "comment_id": 103955211, "body": "Compilers are pretty clever these days, are you sure they&#39;re not generating similar code for your scalar case?"}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 1, "creation_date": 1573659551, "post_id": 58840437, "comment_id": 103955257, "body": "0. Check you have AVX2 enabled with optimizations (otherwise compiler will call for vector replacement functions, without hardware boost ). 1.  Could you try to use OpenMP just add <code>#pragma omp parallel for simd</code>"}, {"owner": {"reputation": 14588, "user_id": 6870253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c7ce91530d2dddae7b9fc2bd828ed78?s=128&d=identicon&r=PG&f=1", "display_name": "chtz", "link": "https://stackoverflow.com/users/6870253/chtz"}, "reply_to_user": {"reputation": 269338, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 3, "creation_date": 1573659676, "post_id": 58840437, "comment_id": 103955340, "body": "As @MarkRansom said, your compiler likely figured out itself how to vectorize you function. Look for <code>vorps</code> or <code>vpor</code> instructions in the hot-loop: <a href=\"https://godbolt.org/z/MR2x8V\" rel=\"nofollow noreferrer\">godbolt.org/z/MR2x8V</a>"}, {"owner": {"reputation": 111, "user_id": 5994679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a373e5b123e19ef023988c6b6bb2c8?s=128&d=identicon&r=PG&f=1", "display_name": "Liotro78", "link": "https://stackoverflow.com/users/5994679/liotro78"}, "edited": false, "score": 0, "creation_date": 1573660006, "post_id": 58840437, "comment_id": 103955574, "body": "Hello guys, yes it seems like Mark said. Thanks a lot!"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1573664856, "post_id": 58840437, "comment_id": 103958367, "body": "I looked for a duplicate; I&#39;m sure I&#39;ve seen Q&amp;As where the answer was that the scalar version was simple enough to auto-vectorize but didn&#39;t manage to find any."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1573678333, "post_id": 58840437, "comment_id": 103964399, "body": "The keyword is <a href=\"https://stackoverflow.com/questions/tagged/auto-vectorization\">auto-vectorization</a>"}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1573966739, "post_id": 58840437, "comment_id": 104059676, "body": "some possible duplicates: <a href=\"https://stackoverflow.com/q/54581729/995714\">Why my SSE code is slower than native C++ code?</a>, <a href=\"https://stackoverflow.com/q/46502748/995714\">Why AVX dot product slower than native C++ code</a>, <a href=\"https://stackoverflow.com/q/4394930/995714\">SIMD code runs slower than scalar code</a>"}], "answers": [{"tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1573668793, "creation_date": 1573668793, "answer_id": 58843183, "question_id": 58840437, "link": "https://stackoverflow.com/questions/58840437/why-avx2-and-sse2-bitwise-or-operators-are-not-faster-than-a-simple-operator/58843183#58843183", "title": "Why AVX2 and SSE2 bitwise OR operators are not faster than a simple | operator?", "body": "<p>The reason you don't observe performance difference between the loop that processes one <code>unsigned</code> at a time and a SIMD loop that processes 8 <code>unsigned</code> at a time is because the compilers generate SIMD code for you, as well as unroll the loop, see <a href=\"https://gcc.godbolt.org/z/P4fPA3\" rel=\"nofollow noreferrer\">the generated assembly</a>.</p>\n"}], "owner": {"reputation": 111, "user_id": 5994679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b7a373e5b123e19ef023988c6b6bb2c8?s=128&d=identicon&r=PG&f=1", "display_name": "Liotro78", "link": "https://stackoverflow.com/users/5994679/liotro78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573668793, "creation_date": 1573659069, "last_edit_date": 1573659505, "question_id": 58840437, "link": "https://stackoverflow.com/questions/58840437/why-avx2-and-sse2-bitwise-or-operators-are-not-faster-than-a-simple-operator", "title": "Why AVX2 and SSE2 bitwise OR operators are not faster than a simple | operator?", "body": "<p>I am trying to speed-up a bitwise OR operation for very long binary vectors using integers of 32 bit.</p>\n\n<p>In this example we can assume that <em>nwords</em> is the number of words and it is a multiple of 4 and 8. Hence, no loop reminder. This binary vector can contain many thousands of bits.</p>\n\n<p>Moreover all three bit vectors are allocated using _align_malloc() with alignment at 16 and 18 bits, for SSE2 and AVX2, respectively.</p>\n\n<p>To my surprise, the following three scalar, SSE2 and AVX2 codes executed using exactly the same amount of time on my i7 CPU. I didn't experience the expected x4 and x8 speed-up of SSE2 and AVX2 registers.  </p>\n\n<p>My MVisual Studio verson is 15.1.</p>\n\n<p>Scalar code:</p>\n\n<pre><code>void vectorOr_Scalar(unsigned int *ptr1, unsigned int *ptr2, unsigned int *out, int nwords)\n{\n    for (end = ptr1 + nwords; ptr1 &lt; end; ptr1++, ptr2++, out++) *out = *ptr1 | *ptr2;\n}\n</code></pre>\n\n<p>SSE2 code:</p>\n\n<pre><code>void vectorOr_SSE2(unsigned int *ptr1, unsigned int *ptr2, unsigned int *out, int nwords)\n{\n    for (i = 0; i &lt; nwords; i += 4, ptr1 += 4, ptr2 += 4, out += 4)\n    {\n        __m128i v1 = _mm_load_si128((__m128i *)ptr1);\n        __m128i v2 = _mm_load_si128((__m128i *)ptr2);\n        _mm_store_si128((__m128i *)out, _mm_or_si128(v1, v2));\n    }\n}\n</code></pre>\n\n<p>AVX2 code:</p>\n\n<pre><code>void vectorOr_AVX2(unsigned int *ptr1, unsigned int *ptr2, unsigned int *out, int nwords)\n{\n    for (i = 0; i &lt; nwords; i += 8, ptr1 += 8, ptr2 += 8, out += 8)\n    {\n        __m256i v1 = _mm256_load_si256((__m256i *)ptr1);\n        __m256i v2 = _mm256_load_si256((__m256i *)ptr2);\n        _mm256_store_si256((__m256i *)out, _mm256_or_si256(v1, v2));\n    }\n}\n</code></pre>\n\n<p>Perhaps is this application not fitting well for vectorization due to the limited amount of register operations between loads and stores?</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 7, "creation_date": 1573659167, "post_id": 58840418, "comment_id": 103955000, "body": "<i>&quot;some kind of undefined behavior&quot;</i> Yes, the pointer is dangling."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1573659201, "post_id": 58840418, "comment_id": 103955024, "body": "This has nothing to do with threads having their own stack. Thread stack space is not private to the thread. <code>getString()</code>&#39;s return object stops existing after the expression returns. There&#39;s no guarantee that the thread will finish it&#39;s work before then."}, {"owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "edited": false, "score": 1, "creation_date": 1573659989, "post_id": 58840418, "comment_id": 103955559, "body": "<i>The call to getString() will return a temporary std::string and the value getString().c_str() is a pointer to a temporary stack variable.</i>  This is actually not true. Since C++11, <code>string::c_str()</code> does the same as <code>string::data()</code> and returns a pointer to the underlying array, so <code>getString().c_str()</code> is actually a pointer to a heap variable. But because <code>getString()</code> is temporary, this array is deleted before the pointer is used. That&#39;s why the pointer is dangling (as explained before)."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 11909399, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Iq53-KRG2T8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resUAXpRIZD89-J8gJ7_5LZGiIGyA/photo.jpg?sz=128", "display_name": "user11909399", "link": "https://stackoverflow.com/users/11909399/user11909399"}, "edited": false, "score": 0, "creation_date": 1573668069, "post_id": 58840493, "comment_id": 103959891, "body": "Thank you. Does <code>&quot;hello world&quot;</code> have static storage because it&#39;s a literal? Does it live neither in the stack or the heap but rather in the &quot;data&quot; section of the binary? Does the <code>const</code>-ness impact anything? I also posted a minor edit to my original post regarding what happens with a normal function call, no threads."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 39, "user_id": 11909399, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Iq53-KRG2T8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resUAXpRIZD89-J8gJ7_5LZGiIGyA/photo.jpg?sz=128", "display_name": "user11909399", "link": "https://stackoverflow.com/users/11909399/user11909399"}, "edited": false, "score": 1, "creation_date": 1573668862, "post_id": 58840493, "comment_id": 103960278, "body": "@user11909399 Yes, it has static storage duration because it is a string literal.  All string literals have static storage duration.  The constness doesn&#39;t matter for that.  Regarding you edit, that code is legal since now the call to <code>pintString</code> is part of the full expression."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 5, "last_activity_date": 1573659270, "creation_date": 1573659270, "answer_id": 58840493, "question_id": 58840418, "link": "https://stackoverflow.com/questions/58840418/passing-pointer-to-a-temporary-stdstring-to-another-thread/58840493#58840493", "title": "Passing pointer to a temporary std::string to another thread", "body": "<blockquote>\n  <p>Or am I running into some kind of undefined behavior?</p>\n</blockquote>\n\n<p>That is exactly what happens.  The string that was returned from <code>getString</code> only lives until the end of the epxresion</p>\n\n<pre><code>std::thread T(printString, getString().c_str());\n</code></pre>\n\n<p>That means that in <code>printString</code> you have a pointer to data that is no longer valid.  You might get what it contained, or something else can happen.  Accessing the pointer is undefined behavior so any result you get is \"correct\".</p>\n\n<hr>\n\n<p>If you change <code>getString</code> to</p>\n\n<pre><code>const char * getString() {\n    return \"hello world\";\n}\n</code></pre>\n\n<p>and the  create the thread like</p>\n\n<pre><code>std::thread T(printString, getString());\n</code></pre>\n\n<p>Then this would be okay since <code>\"hello world\"</code> has static storage duration so it will live for the rest of the life of the program</p>\n"}], "owner": {"reputation": 39, "user_id": 11909399, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Iq53-KRG2T8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resUAXpRIZD89-J8gJ7_5LZGiIGyA/photo.jpg?sz=128", "display_name": "user11909399", "link": "https://stackoverflow.com/users/11909399/user11909399"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 58840493, "answer_count": 1, "score": 0, "last_activity_date": 1573668113, "creation_date": 1573659004, "last_edit_date": 1573668113, "question_id": 58840418, "link": "https://stackoverflow.com/questions/58840418/passing-pointer-to-a-temporary-stdstring-to-another-thread", "title": "Passing pointer to a temporary std::string to another thread", "body": "<p>Consider the following C++ program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;string&gt;\n\nstd::string getString() {\n    return \"hello world\";\n}\n\nvoid printString(const char* s)\n{\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n}\n\nint main()\n{       \n    std::thread T(printString, getString().c_str());\n\n    T.join();\n\n    return 0;\n\n}\n</code></pre>\n\n<p>The call to <code>getString()</code> will return a temporary <code>std::string</code> and the value <code>getString().c_str()</code> is a pointer to a temporary stack variable.</p>\n\n<p>Since each thread has its own stack (but share the heap) then passing a pointer to a string on the main thread to some thread <code>T</code> shouldn't work in theory right?</p>\n\n<p>Why does this code compile and run to print <code>hello world</code> ? Or am I running into some kind of undefined behavior?</p>\n\n<p>EDIT: </p>\n\n<p>What if the program looks like this (no threads)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt;\n#include &lt;string&gt;\n\nstd::string getString() {\n    return \"hello world\";\n}\n\nvoid printString(const char* s)\n{\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n}\n\nint main()\n{       \n    printString(getString().c_str());                \n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "operator-overloading", "operators"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1573659105, "post_id": 58840319, "comment_id": 103954967, "body": "Does it <i>look</i> like your operator is receiving a <code>std::ostream&amp;</code> ? Then the return type and current body would not seem appropriate. Start with that. and since <code>operator &lt;&lt;</code> is a <i>binary</i> operator, a list of three operands isn&#39;t correct either. You&#39;ll probably find <a href=\"https://stackoverflow.com/questions/4421706/what-are-the-basic-rules-and-idioms-for-operator-overloading\">Operator Overloading</a> informative."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 12367591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c85385c79ad3f2aa7ef37cbf39fd24?s=128&d=identicon&r=PG&f=1", "display_name": "Coder95", "link": "https://stackoverflow.com/users/12367591/coder95"}, "edited": false, "score": 0, "creation_date": 1573661171, "post_id": 58840385, "comment_id": 103956251, "body": "Thanks for your answer. It helped me out. :) I understand it now ! :D"}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 0, "last_activity_date": 1573659665, "last_edit_date": 1573659665, "creation_date": 1573658890, "answer_id": 58840385, "question_id": 58840319, "link": "https://stackoverflow.com/questions/58840319/c-operator-overloading-with-vector/58840385#58840385", "title": "C++ operator overloading &lt;&lt; with vector", "body": "<p>I think you mean the following</p>\n\n<pre><code>TestList &amp; operator &lt;&lt;( TestList &amp;tlist , int input )\n{\n    tlist.arr.push_back( input );\n    return tlist;\n}\n</code></pre>\n\n<p>Here is a demonstrative program</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass TestList{\npublic:\n    TestList() : listItems(10), position(0){};\n    TestList(int k) : listItems(k), position(0){};\n    int listItems;\n    int position;\n    std::vector&lt;int&gt; arr;\n};\n\nTestList &amp; operator &lt;&lt;( TestList &amp;tlist , int input )\n{\n    tlist.arr.push_back( input );\n    return tlist;\n}\n\nstd::ostream &amp; operator &lt;&lt;( std::ostream &amp;os, const TestList &amp;tlist )\n{\n    for ( const auto &amp;item : tlist.arr )\n    {\n        std::cout &lt;&lt; item &lt;&lt; ' ';\n    }\n\n    return os;\n}\n\nint main() \n{\n    TestList testlist(5);\n\n    testlist &lt;&lt; 1 &lt;&lt; 2 &lt;&lt; 3;\n\n    std::cout &lt;&lt; testlist &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>1 2 3\n</code></pre>\n\n<p>You can even write instead of these two statements</p>\n\n<pre><code>testlist &lt;&lt; 1 &lt;&lt; 2 &lt;&lt; 3;\n\nstd::cout &lt;&lt; testlist &lt;&lt; '\\n';\n</code></pre>\n\n<p>only one statement</p>\n\n<pre><code>std::cout &lt;&lt; ( testlist &lt;&lt; 1 &lt;&lt; 2 &lt;&lt; 3 ) &lt;&lt; '\\n';\n</code></pre>\n\n<p>Pay attention to that there is a typo in your declaration</p>\n\n<pre><code>testList testlist(5);\n</code></pre>\n\n<p>There should be</p>\n\n<pre><code>TestList testlist(5);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4691, "user_id": 12345656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8bf964ac051a25737d03906e89e2b36?s=128&d=identicon&r=PG&f=1", "display_name": "n314159", "link": "https://stackoverflow.com/users/12345656/n314159"}, "is_accepted": false, "score": 1, "last_activity_date": 1573659593, "creation_date": 1573659593, "answer_id": 58840612, "question_id": 58840319, "link": "https://stackoverflow.com/questions/58840319/c-operator-overloading-with-vector/58840612#58840612", "title": "C++ operator overloading &lt;&lt; with vector", "body": "<p>The other answers are absolutely correct, I just want to say something general on <code>operator&lt;&lt;</code>. It always has the signature <code>T operator&lt;&lt;(U, V)</code>, since it is always a binary operator, so it has to have exactly two arguments. Since the chain </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>a &lt;&lt; b &lt;&lt; c;\n</code></pre>\n\n<p>is evaluated as</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>(a &lt;&lt; b) &lt;&lt; c;\n// That calls\noperator&lt;&lt;(operator&lt;&lt;(a, b), c);\n</code></pre>\n\n<p>the types <code>T</code> and <code>U</code> should normally be the same, or at least compatible. </p>\n\n<p>Furthermore, it is possible but very weird to assign the result of <code>operator&lt;&lt;</code> to something (like <code>result = (a &lt;&lt; b)</code>)). A good rule of thumb is \"My code should not be weird\". Therefore the type <code>T</code> should mostly be a reference (so <code>X&amp;</code>) since otherwise it would only be a temporary copy that is unused. And that is pretty useless most of the time.</p>\n\n<p>So in 90% of all cases, your <code>operator&lt;&lt;</code> should have the signature\n<code>T&amp; operator&lt;&lt;(T&amp;, V);</code></p>\n"}], "owner": {"reputation": 111, "user_id": 12367591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c85385c79ad3f2aa7ef37cbf39fd24?s=128&d=identicon&r=PG&f=1", "display_name": "Coder95", "link": "https://stackoverflow.com/users/12367591/coder95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 58840385, "answer_count": 2, "score": 1, "last_activity_date": 1573659978, "creation_date": 1573658667, "last_edit_date": 1573659978, "question_id": 58840319, "link": "https://stackoverflow.com/questions/58840319/c-operator-overloading-with-vector", "title": "C++ operator overloading &lt;&lt; with vector", "body": "<p>Hey guys I am new to C++ and I have a problem with this operator: (Also new in stackoverflow)</p>\n\n<p>This is my class TestList:</p>\n\n<pre><code>class TestList{\npublic:\n    TestList() : listItems(10), position(0){};\n    TestList(int k) : listItems(k), position(0){};\n    int listItems;\n    int position;\n    std::vector&lt;int&gt; arr;\n};\n\n\n//my current operator is: What should be changed?\nostream&amp; operator &lt;&lt;(ostream&amp;, const TestList&amp; tlist, int input){\n    os &lt;&lt; tlist.arr.push_back(input);\n    return os;\n}\n//\n\nint main() {\ntestList testlist(5);\n testlist &lt;&lt; 1 &lt;&lt; 2 &lt;&lt; 3; //how should I overload the operator to add these number to testlist.arr ?\n return 0;\n}\n</code></pre>\n\n<p>I hope someone could help me or can give me any tips? :)</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"tags": [], "owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "is_accepted": true, "score": 2, "last_activity_date": 1573658511, "creation_date": 1573658511, "answer_id": 58840272, "question_id": 58840123, "link": "https://stackoverflow.com/questions/58840123/qpushbutton-two-different-font-size/58840272#58840272", "title": "QPushbutton: Two different Font size", "body": "<p>Derive from QPushButton and draw the text yourself. You can refer this post for reference.\n<a href=\"https://stackoverflow.com/questions/26852340/two-colours-text-in-qpushbutton\">Two colours text in QPushButton</a></p>\n"}, {"comments": [{"owner": {"reputation": 3580, "user_id": 3246449, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Oh5uF.jpg?s=128&g=1", "display_name": "Maxim Paperno", "link": "https://stackoverflow.com/users/3246449/maxim-paperno"}, "edited": false, "score": 0, "creation_date": 1573685843, "post_id": 58840353, "comment_id": 103967432, "body": "Yea but even with click handlers it still won&#39;t look or act anything like a button unless you go all the way and style it properly including hover/press and all that. And it still won&#39;t look like the rest of the application unless all the push buttons are styled the same way. Re-implementing paintEvent() seems much simpler IMHO."}], "tags": [], "owner": {"reputation": 6940, "user_id": 1559401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/t9DjW.jpg?s=128&g=1", "display_name": "rbaleksandar", "link": "https://stackoverflow.com/users/1559401/rbaleksandar"}, "is_accepted": false, "score": 1, "last_activity_date": 1573659254, "last_edit_date": 1573659254, "creation_date": 1573658790, "answer_id": 58840353, "question_id": 58840123, "link": "https://stackoverflow.com/questions/58840123/qpushbutton-two-different-font-size/58840353#58840353", "title": "QPushbutton: Two different Font size", "body": "<p>While what @abhilb suggests is possible I would go with a custom <code>QLabel</code> that is clickable, which is faster to implement.</p>\n\n<p>Unlike <code>QPushButton</code> <code>QLabel</code> supports rich text formatting. If you set the text formatting to <code>Qt::RichText</code> you can put HTML inside meaning you can use <code>&lt;font/&gt;</code>, <code>&lt;b/&gt;</code> etc.</p>\n\n<pre><code>myLabel.setTextFormat(Qt::RichText);\nmyLabel.setText(\"&lt;font size='16'&gt;LIVE&lt;/font&gt;&lt;font size='12'/&gt;VIDEO&lt;/font&gt;\");\n</code></pre>\n\n<p>I've added this formatting to a label in a widget of mine and you can see the results:</p>\n\n<p><a href=\"https://i.stack.imgur.com/urXRu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/urXRu.png\" alt=\"enter image description here\"></a></p>\n\n<p>You just need to handle the <code>void mouseReleaseEvent(QMouseEvent* event);</code> or <code>void mousePressEvent(QMouseEvent* event);</code> in order to make it properly clickable. The final touch would be to emit your own <code>clicked()</code> signal.</p>\n"}], "owner": {"reputation": 63, "user_id": 11364103, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bu87Sb6nbO8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdX5Ol0CGay5URzcfPsOLk4PyKGtw/mo/photo.jpg?sz=128", "display_name": "Steven Cao", "link": "https://stackoverflow.com/users/11364103/steven-cao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 58840272, "answer_count": 2, "score": 0, "last_activity_date": 1573659254, "creation_date": 1573658038, "question_id": 58840123, "link": "https://stackoverflow.com/questions/58840123/qpushbutton-two-different-font-size", "title": "QPushbutton: Two different Font size", "body": "<p>Is it possible to have two different Font size for the QPushButton?\nFor example, for the text \"LIVE VIDEO' in a QPushButton, I want to have the font-size 16 for 'LIVE' and 12 for 'VIDEO'.</p>\n"}, {"tags": ["python", "c++", "compiler-errors", "g++", "internal-compiler-error"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1573658096, "post_id": 58840044, "comment_id": 103954390, "body": "Internal Compiler Error is a bug in the compiler. Sometimes it&#39;s triggered by a bug in your code. Often you can work around the bug by changing your code."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1573658236, "post_id": 58840044, "comment_id": 103954459, "body": "You may want to try a newer version of gcc."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12367473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e2bffc8764818a57f74bb5a350386b?s=128&d=identicon&r=PG&f=1", "display_name": "FiaMueller", "link": "https://stackoverflow.com/users/12367473/fiamueller"}, "edited": false, "score": 0, "creation_date": 1573665201, "post_id": 58840187, "comment_id": 103958531, "body": "the &#39;LDFLAGS=-fno-lto make&#39; did work thank you so so so much you really helped me!!"}], "tags": [], "owner": {"reputation": 149903, "user_id": 14637, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1904e7096278a10f1dfb3fdc0ceb53cc?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/14637/thomas"}, "is_accepted": true, "score": 0, "last_activity_date": 1573658245, "creation_date": 1573658245, "answer_id": 58840187, "question_id": 58840044, "link": "https://stackoverflow.com/questions/58840044/how-can-i-solve-the-lto1-internal-compiler-error-in-lto-tag-to-tree-code-at-l/58840187#58840187", "title": "How can I solve the lto1: internal compiler error: in lto_tag_to_tree_code, at lto-streamer.h:1005 that appears after &#39;make&#39; command", "body": "<p>\"Internal compiler error\" sounds like there's a bug in the compiler, so here are some ideas to try to work around it.</p>\n\n<p>You could try compiling it with clang++ instead of g++. Install it using:</p>\n\n<pre><code>sudo apt-get install clang\n</code></pre>\n\n<p>Then build using something like:</p>\n\n<pre><code>CC=clang CXX=clang++ LD=clang make\n</code></pre>\n\n<p>Because the error mentions <code>lto</code>, you could also turning link-time optimization off:</p>\n\n<pre><code>LDFLAGS=-fno-lto make\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12367473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e2bffc8764818a57f74bb5a350386b?s=128&d=identicon&r=PG&f=1", "display_name": "FiaMueller", "link": "https://stackoverflow.com/users/12367473/fiamueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2243, "favorite_count": 0, "accepted_answer_id": 58840187, "answer_count": 1, "score": 0, "last_activity_date": 1573658245, "creation_date": 1573657792, "question_id": 58840044, "link": "https://stackoverflow.com/questions/58840044/how-can-i-solve-the-lto1-internal-compiler-error-in-lto-tag-to-tree-code-at-l", "title": "How can I solve the lto1: internal compiler error: in lto_tag_to_tree_code, at lto-streamer.h:1005 that appears after &#39;make&#39; command", "body": "<p>I am super desperate...I am using Ubuntu 18.04.3 LTS\nFor a robotics class I had to build their project (after cloning it from git) with the make command. After some time i am receiving the following:<a href=\"https://i.stack.imgur.com/e8dXO.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n(...)</p>\n\n<pre><code>make[1]: Entering directory '/home/fia/robotics-course/rai/rai/ry'\n         * UpToDate  ../../rai/Kin/libKin.so\n         * UpToDate  ../../rai/Core/libCore.so\n         * UpToDate  ../../rai/KOMO/libKOMO.so\n         * UpToDate  ../../rai/LGP/libLGP.so\ng++ -g -march=native -Wall -DRAI_PYBIND `python3-config --cflags` -Wno-terminate -fPIC -std=c++14 -o lgp-py.o -c lgp-py.cpp\n         * UpToDate  ../../rai/Operate/libOperate.so\ng++ -g -march=native -Wall -DRAI_PYBIND `python3-config --cflags` -Wno-terminate -fPIC -std=c++14 -o ry.o -c ry.cpp\n         * UpToDate  ../../rai/Perception/libPerception.so\n         * UpToDate  ../../rai/RosCom/libRosCom.so\ng++ -L/home/fia/robotics-course/rai/lib -L/usr/local/lib -o libry.so ./lgp-py.o ./ry.o -lCore -lKin -lKOMO -lLGP -lOperate -lRosCom -lPerception `python3-config --ldflags` -lrt -shared \nlto1: internal compiler error: in lto_tag_to_tree_code, at lto-streamer.h:1005\nPlease submit a full bug report,\nwith preprocessed source if appropriate.\nSee &lt;file:///usr/share/doc/gcc-7/README.Bugs&gt; for instructions.\nlto-wrapper: fatal error: g++ returned 1 exit status\ncompilation terminated.\n/usr/bin/ld: error: lto-wrapper failed\ncollect2: error: ld returned 1 exit status\n../../build/generic.mk:299: recipe for target 'libry.so' failed\nmake[1]: *** [libry.so] Error 1\nmake[1]: Target 'default' not remade because of errors.\nmake[1]: Leaving directory '/home/fia/robotics-course/rai/rai/ry'\n     ***** FAILED    rai/rai/ry/libry.so\n</code></pre>\n\n<p>I am assuming that the line \"internal compiler error\" shows me whats wrong but I can not figure out how to solve it... I re-installed g++ and also redownloaded the git repository several times but nothing seems to work. I already thought that maybe me Operating System has a problem?\nI already thought about reistalling Ubuntu...</p>\n\n<p>So if anyone has an idea i would be super thankful!\nRegards\nFia</p>\n"}, {"tags": ["c++", "standards", "pragma", "c++-modules"], "answers": [{"comments": [{"owner": {"reputation": 2021, "user_id": 2452869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpaEJ.jpg?s=128&g=1", "display_name": "Anton Menshov", "link": "https://stackoverflow.com/users/2452869/anton-menshov"}, "edited": false, "score": 0, "creation_date": 1573658661, "post_id": 58840199, "comment_id": 103954695, "body": "Thanks a lot for the answer! I like this proposal a lot, and now the motivation behind being module-centric is even more clear. I will certainly keep track of it."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 6, "last_activity_date": 1573658297, "creation_date": 1573658297, "answer_id": 58840199, "question_id": 58839960, "link": "https://stackoverflow.com/questions/58839960/c-module-based-epochs-in-p1881-vs-potential-pragma-based-epochs/58840199#58840199", "title": "C++ module-based epochs in P1881 vs potential #pragma-based epochs", "body": "<blockquote>\n  <p>In <a href=\"https://wg21.link/P1881\" rel=\"noreferrer\">P1881</a>, the epochs are defined to be a module-level switch. Is there any reason why it has to be on the module level besides convenience? Why not translation-unit level?</p>\n</blockquote>\n\n<p>Theoretically, <em>epoch-declaration</em>s could appear at any level, including block-scope or even library-scope. I chose modules for the first revision of the proposal as they're small enough to allow graceful migrations from an epoch to another for large projects, but also big enough to not have multiple epochs appear in the same source file.</p>\n\n<p>In Belfast, it was suggested that module partitions might be a better choice as they would allow single modules to gradually migrate to a newer epoch.</p>\n\n<hr>\n\n<blockquote>\n  <p>could this behavior seamlessly achieved via <code>#pragma</code>'s, provided compiler support or that would introduce severe technical difficulties (from the implementation or usage point of view) compared to the module-based proposal?</p>\n</blockquote>\n\n<p>In principle, I think that could be possible. Regardless of whether <code>#pragma</code>s or module-level declarations are chosen, I believe that compiler vendors would still have to perform an humongous amount of work to implement anything like epoch (but I believe it's worth it).</p>\n\n<hr>\n\n<blockquote>\n  <p>I do not see why it has to be modules.</p>\n</blockquote>\n\n<p>It doesn't, really. With P1881, I did not only try to invent a mechanism that allows changing the meaning of syntax, but I tried envisioning a mechanism that would fit well in the C++ ecosystem and <strong>promote good engineering practices</strong>.</p>\n\n<p>I believe that a block-scope declaration or a <code>#pragma</code> has a lot more opportunities for misuse compared to a module-level one. I also think that tying epochs to modules would help developers think about epoch migration while modularizing existing codebases.</p>\n\n<p>In general, the proposal is still at an early stage, and all of these design decisions might change. Feedback and ideas are always appreciated - the author's email can be found in the paper.</p>\n"}], "owner": {"reputation": 2021, "user_id": 2452869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mpaEJ.jpg?s=128&g=1", "display_name": "Anton Menshov", "link": "https://stackoverflow.com/users/2452869/anton-menshov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 58840199, "answer_count": 1, "score": 3, "last_activity_date": 1573658297, "creation_date": 1573657476, "question_id": 58839960, "link": "https://stackoverflow.com/questions/58839960/c-module-based-epochs-in-p1881-vs-potential-pragma-based-epochs", "title": "C++ module-based epochs in P1881 vs potential #pragma-based epochs", "body": "<p>In the <a href=\"https://wg21.link/p1881\" rel=\"nofollow noreferrer\">P1881</a> proposal, the concept of epochs (on a module level) for the C++ code is proposed. Such functionality can allow customization of the C++ syntaxis and C++ behavior on the level of the module without necessarily breaking backward compatibility. <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1881r0.html#motivation\" rel=\"nofollow noreferrer\">More elaborate motivation is given in the proposal</a>. </p>\n\n<h3>Implicit conversions example from the proposal</h3>\n\n<p><strong>Version 1</strong>: no epochs, everything compiles fine</p>\n\n<pre><code>module ParticleMovement;\n\nexport void move(Particle&amp;, float x, float y);\n\nvoid moveExample()\n{\n    Particle p{};\n    move(p, 3.42, 2.49);    // OK\n}\n</code></pre>\n\n<p><strong>Version 2</strong>: <code>epoch 2023</code> (with an assumption on disabling implicit conversion in it), code ill-formed:</p>\n\n<pre><code>epoch 2023;                 // Module-level switch\nmodule ParticleMovement;\n\nexport void move(Particle&amp;, float x, float y);\n\nvoid moveExample()\n{\n    Particle p{};\n\n    move(p, 3.42, 2.49);    // Compilation error\n\n    move(p, 3.42f, 2.49f);  // OK, no implicit conversions\n}\n</code></pre>\n\n<p>This definitely looks to be an interesting proposal, and is very different from simply specifying compile switches <code>-std=c++XXX</code>.</p>\n\n<p>However, I wonder:</p>\n\n<ul>\n<li>in P1881, the epochs are defined to be a module-level switch. Is there any reason why it has to be on the module level besides convenience? Why not translation-unit level?</li>\n<li>and, consequently, could this behavior seamlessly achieved via <code>#pragma</code>'s, provided compiler support or that would introduce severe technical difficulties (from the implementation or usage point of view) compared to the module-based proposal?</li>\n</ul>\n\n<p>Say, something along the line:</p>\n\n<pre><code>#pragma epoch 2023;                 \n\nexport void move(Particle&amp;, float x, float y);\n\nvoid moveExample()\n{\n    Particle p{};\n\n    move(p, 3.42, 2.49);    // Compilation error\n\n    move(p, 3.42f, 2.49f);  // OK, no implicit conversions\n}\n</code></pre>\n\n<p>I have read <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1881r0.html#mechanism\" rel=\"nofollow noreferrer\">the proposed mechanism</a> which targets modules-based implementation; however, I do not see why <strong>it has to be modules</strong>.</p>\n\n<hr>\n\n<p>Also relevant: <a href=\"https://www.youtube.com/watch?v=PFdKFoQxRqM\" rel=\"nofollow noreferrer\">a lightning talk at CppCon 2019 of Vittorio Romeo, the author of P1881 proposal</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1573657618, "post_id": 58839915, "comment_id": 103954124, "body": "what&#39;s in <code>m_active_fd_set</code>?"}, {"owner": {"reputation": 932, "user_id": 6345323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6dbbb0c750be6073b0d251899c74a47?s=128&d=identicon&r=PG&f=1", "display_name": "yaodav", "link": "https://stackoverflow.com/users/6345323/yaodav"}, "reply_to_user": {"reputation": 6673, "user_id": 777689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19JOo.jpg?s=128&g=1", "display_name": "PeterT", "link": "https://stackoverflow.com/users/777689/petert"}, "edited": false, "score": 0, "creation_date": 1573657707, "post_id": 58839915, "comment_id": 103954177, "body": "it of type fd_set"}], "owner": {"reputation": 932, "user_id": 6345323, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6dbbb0c750be6073b0d251899c74a47?s=128&d=identicon&r=PG&f=1", "display_name": "yaodav", "link": "https://stackoverflow.com/users/6345323/yaodav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573657751, "creation_date": 1573657327, "last_edit_date": 1573657751, "question_id": 58839915, "link": "https://stackoverflow.com/questions/58839915/select-function-recognize-enter-key-from-user-input-as-client-request", "title": "select function recognize Enter key (from user input) as client request", "body": "<p>I have a server-client program, and I know it a little bit lack on reproduction steps but I think it more knowledge question then implementation.\nI have the main program that creates the server thread and also expects user input from the terminal\nthe server routine is:</p>\n\n<pre><code>void Server::ServerRoutin(std::shared_ptr&lt;BaseStrategy&lt; Derived, Event_Type &gt; &gt; st,std::shared_ptr&lt;SMDSSubscriber&gt; md)\n{\nfd_set temp;\nint active=0;\nbool flag = true;\n\nwhile(flag)\n{\n    temp =m_active_fd_set; //  m_active_fd_set is fd_set\n    if ((active = select (FD_SETSIZE, &amp;temp, NULL, NULL, NULL)) &lt; 0)\n    {\n        FD_ZERO(&amp;m_active_fd_set);\n        FD_SET(m_serverSocket-&gt;GetSocket(), &amp;m_active_fd_set);\n        perror (\"select\");\n        continue;\n    }\n\n    if(FD_ISSET(m_serverSocket-&gt;GetSocket(),&amp;temp))\n    {\n        m_clients.push_back(m_serverSocket-&gt;AcceptClient());\n        FD_SET (m_clients[m_clients.size()-1]-&gt;GetSocket(),&amp;m_active_fd_set);\n    }\n\n    if(FD_ISSET(0, &amp;temp))\n    {\n\n        flag= false;\n        break;\n    }\n//some more code\n</code></pre>\n\n<p>but when the user enters user input <strong>not via the client-side</strong> but from the main program, the select function in the server think it got a request from the client and start running</p>\n\n<p>this is the thread creation :</p>\n\n<pre><code> std::thread t2(&amp;programManager&lt; BacStrategy &lt; SREXOrderEventHandler &gt;, SREXOrderEventHandler &gt;, bac , nullptr);\n</code></pre>\n"}, {"tags": ["c++", "ffmpeg", "video-streaming", "streaming", "libav"], "comments": [{"owner": {"reputation": 349, "user_id": 6103346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e69362c543ad115bbd596dacfc3fa7?s=128&d=identicon&r=PG&f=1", "display_name": "U. W.", "link": "https://stackoverflow.com/users/6103346/u-w"}, "edited": false, "score": 0, "creation_date": 1573657112, "post_id": 58839732, "comment_id": 103953840, "body": "Try this: <a href=\"https://stackoverflow.com/questions/6734375/get-current-time-in-milliseconds-using-c-and-boost\" title=\"get current time in milliseconds using c and boost\">stackoverflow.com/questions/6734375/&hellip;</a>"}, {"owner": {"reputation": 1427, "user_id": 608294, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a3513aa827614e4a1608d2aa7df573b1?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/608294/andrea"}, "reply_to_user": {"reputation": 349, "user_id": 6103346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e69362c543ad115bbd596dacfc3fa7?s=128&d=identicon&r=PG&f=1", "display_name": "U. W.", "link": "https://stackoverflow.com/users/6103346/u-w"}, "edited": false, "score": 0, "creation_date": 1573657257, "post_id": 58839732, "comment_id": 103953920, "body": "It&#39;s not what I need"}, {"owner": {"reputation": 349, "user_id": 6103346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e69362c543ad115bbd596dacfc3fa7?s=128&d=identicon&r=PG&f=1", "display_name": "U. W.", "link": "https://stackoverflow.com/users/6103346/u-w"}, "edited": false, "score": 0, "creation_date": 1573657366, "post_id": 58839732, "comment_id": 103953990, "body": "Right you are. Can you get a Hexdump of the 16 Bytes where the time should be?"}, {"owner": {"reputation": 1427, "user_id": 608294, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a3513aa827614e4a1608d2aa7df573b1?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/608294/andrea"}, "reply_to_user": {"reputation": 349, "user_id": 6103346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28e69362c543ad115bbd596dacfc3fa7?s=128&d=identicon&r=PG&f=1", "display_name": "U. W.", "link": "https://stackoverflow.com/users/6103346/u-w"}, "edited": false, "score": 0, "creation_date": 1573658959, "post_id": 58839732, "comment_id": 103954878, "body": "Yes, but it looks like it is not the right information I need"}], "answers": [{"tags": [], "owner": {"reputation": 27067, "user_id": 210785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a561cd4d29738e18d9e565a6265d86ac?s=128&d=identicon&r=PG", "display_name": "szatmary", "link": "https://stackoverflow.com/users/210785/szatmary"}, "is_accepted": true, "score": 1, "last_activity_date": 1573659897, "creation_date": 1573659897, "answer_id": 58840706, "question_id": 58839732, "link": "https://stackoverflow.com/questions/58839732/get-composition-time-c/58840706#58840706", "title": "Get composition time C++", "body": "<p><code>AVPacket</code> needs to be able to represent the data found in all media formats. Some formats (like mp4 and flv) have a decode_time and a composition_time, other (like transport streams) have a decode_time and a presentation_time. To make it easier for the programmer, <code>AVPacket</code> chose one method to store the information and converts when needed. Luckily its an an easy to convert back:</p>\n\n<pre><code>auto cts = pkt.pts - pkt.dts\n</code></pre>\n"}], "owner": {"reputation": 1427, "user_id": 608294, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/a3513aa827614e4a1608d2aa7df573b1?s=128&d=identicon&r=PG", "display_name": "Andrea", "link": "https://stackoverflow.com/users/608294/andrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 58840706, "answer_count": 1, "score": 0, "last_activity_date": 1573659897, "creation_date": 1573656754, "question_id": 58839732, "link": "https://stackoverflow.com/questions/58839732/get-composition-time-c", "title": "Get composition time C++", "body": "<p>I made my own rtmp server using libav and ffmpeg. I receive as input either an flv file or an rtmp streaming \"containing\" an flv file.\nSince I manipulate the flv file and the relative composition time of each frame, I would like to know if there is a way to get this composition time.\nI thought that given my AVPacket, I could analyze the raw buffer in order to extract the right information since I know that the flv header is 11 bytes and then in the next 16 bytes I should find the composition time. \nBut it doesn't work.</p>\n\n<p>This is a rough example of code:</p>\n\n<pre><code>AVPacket pkt;\nAVFormatContext *ifmt_ctx\nwhile(true)\n{\n    AVStream *in_stream, *out_stream;\n\n    ret = av_read_frame(ifmt_ctx, &amp;pkt);\n    //get the composite time\n}\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1573656773, "post_id": 58839718, "comment_id": 103953654, "body": "insert is the tool for the job.  Please show your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> using it so we can help you getting it working."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573657277, "post_id": 58839718, "comment_id": 103953931, "body": "<i>using replace works but that means the punctuation will disappear</i> -- Only if you coded it that way.  Revisit your assignment using pencil and paper and improve / change your design so that the punctuation will not disappear.  Once you see how to do that using pencil and paper, transfer those plans to code."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 2, "creation_date": 1573657290, "post_id": 58839718, "comment_id": 103953941, "body": "Hint for simple and a bit crude approach: you could replace <code>&quot;. &quot;</code> with <code>&quot;.\\n&quot;</code>, and same for every other punctuation char you want to be replaced."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1573657291, "post_id": 58839718, "comment_id": 103953942, "body": "<i>&quot;using insert will first insert the line break before the punctuation&quot;</i> - Just add one to the index where you insert?"}, {"owner": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 1, "creation_date": 1573657586, "post_id": 58839718, "comment_id": 103954106, "body": "Added the code to the OP."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 1, "creation_date": 1573659976, "post_id": 58840532, "comment_id": 103955552, "body": "Would it be possible to do this without a new function? Trying to stick to just one function to handle it all. This does work however."}, {"owner": {"reputation": 136, "user_id": 12348899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bdcc21504a934f6633f168df0b8e87d?s=128&d=identicon&r=PG&f=1", "display_name": "Harun Tucakovic", "link": "https://stackoverflow.com/users/12348899/harun-tucakovic"}, "reply_to_user": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1573660052, "post_id": 58840532, "comment_id": 103955600, "body": "If you are not sure that there is empty space after punctuation sign you can add a check inside the if statement to check for that. Then if there is no empty space you could use insert() function to insert &#39;\\n&#39; there, or manually split the string add the &#39;\\n&#39; and copy it back. But doing it manually is not recommended because you already have insert() function to do it for you."}, {"owner": {"reputation": 136, "user_id": 12348899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bdcc21504a934f6633f168df0b8e87d?s=128&d=identicon&r=PG&f=1", "display_name": "Harun Tucakovic", "link": "https://stackoverflow.com/users/12348899/harun-tucakovic"}, "reply_to_user": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1573660171, "post_id": 58840532, "comment_id": 103955684, "body": "Yes, it would be possible to do it without the new function. Just put this for loop where you want it. And then without the new function you don&#39;t need pointers."}, {"owner": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1573660417, "post_id": 58840532, "comment_id": 103955828, "body": "Alright, I got it working. However if I use &quot;i + 1&quot; it removes the first letter from the next word (As they are stuck together), if I just use i it removes the punctuation."}, {"owner": {"reputation": 136, "user_id": 12348899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bdcc21504a934f6633f168df0b8e87d?s=128&d=identicon&r=PG&f=1", "display_name": "Harun Tucakovic", "link": "https://stackoverflow.com/users/12348899/harun-tucakovic"}, "reply_to_user": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1573661010, "post_id": 58840532, "comment_id": 103956143, "body": "Yeah that&#39;s what I said in my first comment, if you know that you will not have empty space after the punctuation sign add another if statement inside the current one which will check <code>if ((*text)[i + 1] == &#39; &#39;)</code> (checking if &quot;i + 1&quot; is empty space). If &quot;i + 1&quot; is empty space do this <code>(*text)[i + 1] = &#39;\\n&#39;;</code>, else, if &quot;i + 1&quot; is not an empty space then use insert() function. You will probably want to do something like this:  <code>text-&gt;insert(i, &quot;\\n&quot;)</code> (again, syntax is like this because I used pointer)."}, {"owner": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "edited": false, "score": 0, "creation_date": 1573664327, "post_id": 58840532, "comment_id": 103958092, "body": "Hmm I might&#39;ve gone a backward approach here. But seeing as every new sentence start with a capital letter I added  &quot;        if (isupper((text)[i]))             text.insert(i,&quot; &quot;);&quot; instead, however it doesn&#39;t do anything if I just leave i blank, if I add +1 I get the same issue, if I add -1 it will be out of range and crash the program for sure. If I write +0 to &quot;fool&quot; it, its just the same as writing i.  When I previously used insert outside of the for loop it add it right before the capital letter however just for the first sentence. Im getting confused here."}], "tags": [], "owner": {"reputation": 136, "user_id": 12348899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bdcc21504a934f6633f168df0b8e87d?s=128&d=identicon&r=PG&f=1", "display_name": "Harun Tucakovic", "link": "https://stackoverflow.com/users/12348899/harun-tucakovic"}, "is_accepted": true, "score": 2, "last_activity_date": 1573659372, "creation_date": 1573659372, "answer_id": 58840532, "question_id": 58839718, "link": "https://stackoverflow.com/questions/58839718/c-breaking-string-into-new-line-after-punctuation/58840532#58840532", "title": "C++ breaking string into new line after punctuation", "body": "<p>You can create your own short function that will add newline after every punctuation sign.</p>\n\n<p>For example:</p>\n\n<pre><code>void addNewLines(std::string *text)\n{\n    for (int i = 0; i &lt; text-&gt;length(); i++)\n    {\n        if ((*text)[i] == '!' || (*text)[i] == '?' || (*text)[i] == '.')\n        {\n            (*text)[i + 1] = '\\n';\n        }\n    }\n}\n</code></pre>\n\n<p>As you can see in this piece of code, in the for loop you are going from the first to the last character of the string, and after every punctuation sign you replace empty space with <code>\\n</code> character.</p>\n\n<p>I'm using pointers here to prevent copying of the string to the function, in case it is a huge string, but you could do it without pointers, that way syntax is a little bit cleaner.</p>\n"}], "owner": {"reputation": 27, "user_id": 12367469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCCwBY7KLWryf4tOvB5Nav1SNmY2gACKUhqXksQrQ=k-s128", "display_name": "Trollblod", "link": "https://stackoverflow.com/users/12367469/trollblod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 58840532, "answer_count": 1, "score": 1, "last_activity_date": 1573659372, "creation_date": 1573656698, "last_edit_date": 1573657556, "question_id": 58839718, "link": "https://stackoverflow.com/questions/58839718/c-breaking-string-into-new-line-after-punctuation", "title": "C++ breaking string into new line after punctuation", "body": "<p>I'm trying to learn strings and I've figured out how to replace as well as insert into an existing string. I have 3 strings at the moment which I've declared as constants, I've merged them into one string variable which puts them all one after eachother.</p>\n\n<p>I've also changed every single occurance of \"Hi\" to \"Bye\" in those strings. My 3 strings bundled into a single one are as following: \n\"Hi! My name is xxxx! I would like to be on my own but I don't know how to, could you help me?\"</p>\n\n<p>I want it to display as:\nHi!\nMy name is xxxx!\nI would like to be on my own but I don't know how to, could you help me?</p>\n\n<p>As soon as a puncutation occurs I'd like to insert a line break \"\\n\", using replace works but that means the punctuation will disappear, using insert will first insert the line break before the punctuation, and it won't continue to the next one which results in:\n\"Hi!\nMy name is xxxx! I would like to be on my own but I don't know how to, could you help me?\"</p>\n\n<p>I changed the code to only include dots to simplify it, once solved the same solution can be applied to any other part such as question marks or exclamation marks.</p>\n\n<p>Any tips on how to fix this? </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nstring const Text0 = \"Hi.\";\nstring const Text1 = \"My name is xxxx.\";\nstring const Text2 = \"I would like to be on my own but I don't know how to, could you help me.\";\nstring const Text3 = \"I would, but I don't know how to.\";\n\nstring text = Text0 + Text1 + Text2 + Text3;\n\nint main() {\n\n    while (text.find(\"I\") != string::npos) {\n        text.replace(text.find(\"I\"), 1, \"J\");\n\n    }\n    while (text.find(\"like\") != string::npos) {\n        text.replace(text.find(\"like\"), 4, \"milk\");\n    }\n\n    text.insert(text.find(\".\"), \"\\n\");\n\n\n    cout &lt;&lt; text;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio", "loops", "for-loop", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12354664"}, "edited": false, "score": 0, "creation_date": 1573656258, "post_id": 58839577, "comment_id": 103953362, "body": "I know how to write with <i>if</i> but I want to write like this"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1573656486, "post_id": 58839577, "comment_id": 103953481, "body": "what is the meaning of &quot;works not&quot; ? compiler errors? runtime errors? wrong results?"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1573656657, "post_id": 58839577, "comment_id": 103953578, "body": "The variables <code>sum1</code> and <code>sum2</code> are uninitialized."}, {"owner": {"user_type": "does_not_exist", "display_name": "user12354664"}, "edited": false, "score": 0, "creation_date": 1573656821, "post_id": 58839577, "comment_id": 103953673, "body": "<b>what is the meaning of &quot;works not&quot; ?</b> i meant wrong result."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573658440, "post_id": 58839577, "comment_id": 103954575, "body": "@GamarMustafa -- You tagged this as <code>visual-studio</code>, but the visual studio C++ compiler never allowed code like this: <code>int matrix[j][j];</code>.  Was this one of your errors?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user12354664"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1573661317, "post_id": 58839577, "comment_id": 103956330, "body": "@PaulMcKenzie opss, i think it is a habit to tag visual studio. Actually i wrote in dev c++"}], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 0, "creation_date": 1573658136, "post_id": 58839709, "comment_id": 103954403, "body": "Any reason why you post-increment the loop variables?"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 0, "creation_date": 1573658477, "post_id": 58839709, "comment_id": 103954596, "body": "@RL-S It is no matter for scalar types in a loop."}, {"owner": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 0, "creation_date": 1573658934, "post_id": 58839709, "comment_id": 103954863, "body": "If the compiler optimises it away, that&#39;s true. But I think it&#39;s always better to show your intent clearly. And that probably isn&#39;t to evaluate first, and then increment."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 0, "creation_date": 1573658984, "post_id": 58839709, "comment_id": 103954892, "body": "@RL-S This question was already asked in this forum. You can find it if you want."}], "tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 5, "last_activity_date": 1573657442, "last_edit_date": 1573657442, "creation_date": 1573656664, "answer_id": 58839709, "question_id": 58839577, "link": "https://stackoverflow.com/questions/58839577/sum-of-the-elements-of-diagonal-of-matrix-c/58839709#58839709", "title": "Sum of the elements of diagonal of matrix c++", "body": "<p>For starters Variable Length Arrays is not a standard C++ feature. Use instead the class template <code>std::vector</code>.</p>\n\n<p>For example</p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; matrix( j, std::vector&lt;int&gt;( j ) );\n</code></pre>\n\n<p>Or at least allocate arrays dynamically as for example</p>\n\n<pre><code>int **matrix = new int *[j];\nfor ( i = 0; i &lt; j; i++ ) matrix[i] = new int[j];\n</code></pre>\n\n<p>In this case you should free all allocated memory before exiting the program as</p>\n\n<pre><code>for ( i = 0; i &lt; j; i++ ) delete [] matrix[i];\ndelete [] matrix;\n</code></pre>\n\n<p>Secondly neither sum1 nor sum2 were initialized.</p>\n\n<pre><code>int r, c, j,i,k,sum1,sum2;\n</code></pre>\n\n<p>To calculate the sum of elements of the secondary diagonal you can write</p>\n\n<pre><code>sum2 = 0;\nfor ( i = 0; i &lt; j; i++ ){\n    sum2 += matrix[i][j - i - 1];\n}\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12354664"}, "edited": false, "score": 0, "creation_date": 1573661096, "post_id": 58840067, "comment_id": 103956203, "body": "Thanks a lot )) but i have one more question : What does &quot;as it pollutes the global namespace&quot; mean?"}, {"owner": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 1, "creation_date": 1573661879, "post_id": 58840067, "comment_id": 103956678, "body": "Part 1: In C++, you can use namespaces to avoid naming conflicts. As a somewhat weird example, say you have automated your house and want to write functions that take care of your cat and your dog. Then you could put all the functions pertaining to your dog into <code>namespace dog{ }</code> and do the same for all cat-related functions. You could then in each namespace write a function <code>feed()</code> and call it with either <code>dog::feed()</code> or <code>cat::feed()</code>, which makes your code clean and understandable."}, {"owner": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 1, "creation_date": 1573662135, "post_id": 58840067, "comment_id": 103956839, "body": "Part 2:  However, if you write <code>using namespace dog</code> and <code>using namespace cat</code>, then you&#39;d get a naming conflict, because suddenly, you have two functions with the name <code>feed</code>. And the same happens if you write <code>using namespace std</code>. Suddenly, all functions etc. declared in the namespace <code>std</code> are available in the global namespace, and therefore, all those names are now unavailable, because if you&#39;d use them, you&#39;d cause a naming conflict. So it&#39;s better to not drag all the declarations from <code>std</code> into the global namespace, to avoid conflicts. Hope that helps :)"}, {"owner": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "edited": false, "score": 1, "creation_date": 1573662225, "post_id": 58840067, "comment_id": 103956904, "body": "Oh, and by writing <code>using std::cout</code>, you only make <code>cout</code> available in the global namespace, but leave everything else the way it is. So it&#39;s a much less intrusive measure."}], "tags": [], "owner": {"reputation": 463, "user_id": 11770674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ec1c8b5b1c6e09d9e84ffbd61aedfb?s=128&d=identicon&r=PG&f=1", "display_name": "RL-S", "link": "https://stackoverflow.com/users/11770674/rl-s"}, "is_accepted": true, "score": -1, "last_activity_date": 1573657865, "creation_date": 1573657865, "answer_id": 58840067, "question_id": 58839577, "link": "https://stackoverflow.com/questions/58839577/sum-of-the-elements-of-diagonal-of-matrix-c/58840067#58840067", "title": "Sum of the elements of diagonal of matrix c++", "body": "<p>I included some comments in the code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n/* try to avoid \"using namespace ...\", as it pollutes the global namespace */\nusing std::cout;\nusing std::cin;\n\nint main() {\n    /* I moved r and c into the block they belong to */\n    int j,i,k,sum1,sum2;\n    //cout &lt;&lt; \"Enter the size of matrix: \";\n    //cin &gt;&gt; j;\n    /* let's use a fixed-size array for now, otherwise you'll have to\n     * dynamically allocate your array using \"new\" or better use std::vector */\n    j = 4;\n    int matrix[j][j];\n\n    for (int r {0}; r &lt; j; ++r) {\n        for (int c {0}; c &lt; j; ++c) {\n            matrix[r][c] = r-c; /* this way, diagonals show very clearly */\n            //cout &lt;&lt; \"matrix\" &lt;&lt; \"[\" &lt;&lt; r &lt;&lt; \"]\" &lt;&lt; \"[\" &lt;&lt; c &lt;&lt; \"] = \";\n            //cin &gt;&gt; matrix[r][c];\n        }\n    }\n    cout &lt;&lt; \"\\n\";\n\n    for ( i = 0; i &lt; j; ++i) {\n        for ( k = 0; k &lt; j; ++k) {\n            cout &lt;&lt; \" \"&lt;&lt; matrix[i][k] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; \"\\n\";\n    }\n\ncout&lt;&lt;\"\\n\";\n\ncout&lt;&lt;\"Main diagonal is: \";\nfor( i=0;i&lt;j;++i){\n    cout &lt;&lt; matrix[i][i] &lt;&lt; \" \";\n}\ncout&lt;&lt;\"\\n\";\n\n/* initialise your sums */\nsum1 = 0;\nsum2 = 0;\n\nfor( i=0;i&lt;j;i++){\n    sum1=sum1+matrix[i][i];}\n\ncout&lt;&lt;\"Sum of the elements of main diagonal is: \"&lt;&lt;sum1;\ncout&lt;&lt;\"\\n\";\ncout&lt;&lt;\"\\n\";\n\ncout&lt;&lt;\"Secondary diagonal is: \";\nfor(i=0,k=j-1;i&lt;j; ++i, --k){\n    cout &lt;&lt; matrix[i][k] &lt;&lt; \" \";\n}\ncout&lt;&lt;\"\\n\";\ncout&lt;&lt;\"\\n\";\n\n\nfor(i=0,k=j-1;i&lt;j;i++,k--){\n    sum2 = sum2+matrix[i][k];\n    }\n\n    cout&lt;&lt;\"Sum of the elements of secondary diagonal is: \"&lt;&lt;sum2;\n    return 0;\n}\n</code></pre>\n\n<p>Run it and you'll find that it works as expected. You were very close to the solution, the main problems were the lack of initialisations of your sum variables and that you need to use <code>new</code> or better yet something like <code>std::vector</code> for dynamically-sized arrays.\nAlso, please don't use post-increment in loops (<code>i++</code>). What you mean is pre-increment (<code>++i</code>).</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12354664"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 826, "favorite_count": 0, "accepted_answer_id": 58840067, "answer_count": 2, "score": 1, "last_activity_date": 1573657865, "creation_date": 1573656207, "last_edit_date": 1573657524, "question_id": 58839577, "link": "https://stackoverflow.com/questions/58839577/sum-of-the-elements-of-diagonal-of-matrix-c", "title": "Sum of the elements of diagonal of matrix c++", "body": "<p>I want to find the sum of the diagonals of matrix that defined by user with this code , it works for main diagonal but not for secondary diagonal and i don't understand what the problem is. Any help would be appreciated.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    int r, c, j,i,k,sum1,sum2;\n    cout &lt;&lt; \"Enter the size of matrix: \";\n    cin &gt;&gt; j;\n    int matrix[j][j];\n\n    for (r = 0; r &lt; j; r++) {\n        for (c = 0; c &lt; j; c++) {\n            cout &lt;&lt; \"matrix\" &lt;&lt; \"[\" &lt;&lt; r &lt;&lt; \"]\" &lt;&lt; \"[\" &lt;&lt; c &lt;&lt; \"] = \";\n            cin &gt;&gt; matrix[r][c];\n        }\n    }\n    cout &lt;&lt; \"\\n\";\n\n    for ( i = 0; i &lt; j; i++) {\n        for ( k = 0; k &lt; j; k++) {\n            cout &lt;&lt; \" \"&lt;&lt;matrix[i][k] &lt;&lt; \" \";\n        }\n        cout &lt;&lt; \"\\n\";\n    }\n\ncout&lt;&lt;\"\\n\";\n\ncout&lt;&lt;\"Main diagonal is: \";\nfor( i=0;i&lt;j;i++){\n    cout&lt;&lt;matrix[i][i];\n}\ncout&lt;&lt;\"\\n\";\n\n\nfor( i=0;i&lt;j;i++){\n    sum1=sum1+matrix[i][i];}\n    cout&lt;&lt;\"Sum of the elements of main diagonal is: \"&lt;&lt;sum1;\n    cout&lt;&lt;\"\\n\";\n    cout&lt;&lt;\"\\n\";\n\ncout&lt;&lt;\"Secondary diagonal is: \";\nfor(i=0,k=j-1;i&lt;j;i++,k--){\n    cout&lt;&lt;matrix[i][k];\n}\n\n\nfor(i=0,k=j-1;i&lt;j;i++,k--){\n    sum2=sum2+matrix[i][k];\n    }\n\n    cout&lt;&lt;\"Sum of the elements of secondary diagonal is: \"&lt;&lt;sum2;\n    return 0;\n}\n\n</code></pre>\n"}, {"tags": ["c++", "mfc", "groupbox", "hwnd", "mouse-cursor"], "comments": [{"owner": {"reputation": 427, "user_id": 5922736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H0lgreC9KQE/AAAAAAAAAAI/AAAAAAAAADU/C-lJ-fjjFaA/photo.jpg?sz=128", "display_name": "Sergey Shevchenko", "link": "https://stackoverflow.com/users/5922736/sergey-shevchenko"}, "edited": false, "score": 1, "creation_date": 1573719693, "post_id": 58839523, "comment_id": 103976745, "body": "<code>RealChildWindowFromPoint</code> should solve this. However you&#39;ll need to provide a handle to parent window. Check the remarks section on <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-realchildwindowfrompoint\" rel=\"nofollow noreferrer\">MSDN</a>."}, {"owner": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "reply_to_user": {"reputation": 427, "user_id": 5922736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H0lgreC9KQE/AAAAAAAAAAI/AAAAAAAAADU/C-lJ-fjjFaA/photo.jpg?sz=128", "display_name": "Sergey Shevchenko", "link": "https://stackoverflow.com/users/5922736/sergey-shevchenko"}, "edited": false, "score": 0, "creation_date": 1574132305, "post_id": 58839523, "comment_id": 104113001, "body": "I would like to apply this on different dialog windows. But the parent windows have the class of #32770(Dialog) and some of the parent window has no name. It is hard to provide a handle of parent window for this function. I applied RealChildWindowFromPoint and I get the class in weird symbol and the handle is 00000000"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "edited": false, "score": 0, "creation_date": 1574260601, "post_id": 58931954, "comment_id": 104169192, "body": "It works fine for the tab order issues! But for the button/static text inside tab control, still cannot be detected. The result always have the same class (SysTabControl32) and hwnd. Is it the different case compare with tab order?"}, {"owner": {"reputation": 427, "user_id": 5922736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H0lgreC9KQE/AAAAAAAAAAI/AAAAAAAAADU/C-lJ-fjjFaA/photo.jpg?sz=128", "display_name": "Sergey Shevchenko", "link": "https://stackoverflow.com/users/5922736/sergey-shevchenko"}, "reply_to_user": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "edited": false, "score": 0, "creation_date": 1574264478, "post_id": 58931954, "comment_id": 104171741, "body": "Ah, yes, you&#39;re right. I initially thought that your only issue is a groupbox. I&#39;ll edit my answer with more generic to get the window"}, {"owner": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "edited": false, "score": 0, "creation_date": 1574297757, "post_id": 58931954, "comment_id": 104186271, "body": "Sorry to say that but the latest coding cannot get the window handle for both tab order and tab control. Might be the OR statement??"}, {"owner": {"reputation": 427, "user_id": 5922736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H0lgreC9KQE/AAAAAAAAAAI/AAAAAAAAADU/C-lJ-fjjFaA/photo.jpg?sz=128", "display_name": "Sergey Shevchenko", "link": "https://stackoverflow.com/users/5922736/sergey-shevchenko"}, "reply_to_user": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "edited": false, "score": 0, "creation_date": 1574323446, "post_id": 58931954, "comment_id": 104193779, "body": "Hm... that&#39;s strange. When I tested that everything worked fine for me. What tab order of controls do you have?"}, {"owner": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "edited": false, "score": 0, "creation_date": 1574324530, "post_id": 58931954, "comment_id": 104194308, "body": "I don&#39;t know the tab order of controls of the application that I used to test because it is a third party software. Can I know how you test the coding?"}, {"owner": {"reputation": 427, "user_id": 5922736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H0lgreC9KQE/AAAAAAAAAAI/AAAAAAAAADU/C-lJ-fjjFaA/photo.jpg?sz=128", "display_name": "Sergey Shevchenko", "link": "https://stackoverflow.com/users/5922736/sergey-shevchenko"}, "reply_to_user": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "edited": false, "score": 0, "creation_date": 1574326997, "post_id": 58931954, "comment_id": 104195691, "body": "One of the way is by comparing the handle that I found with the handle that Spy++ shows. Another way is to call <code>GetWindowText</code> on handle that I found and compare it with the text I see."}, {"owner": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "edited": false, "score": 0, "creation_date": 1574355259, "post_id": 58931954, "comment_id": 104212958, "body": "I tried to create a dialog in MFC and test the latest coding. The content inside the tab control can be detected but the groupbox with tab order still wrong. I also tried the 1st version of coding, the content inside tab control also can be detected. So, I think that the reason might be the difference structure of tab control?? Because I can detect the content inside the dialog I created my own but cannot detect the 3rd party software tab control."}, {"owner": {"reputation": 427, "user_id": 5922736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H0lgreC9KQE/AAAAAAAAAAI/AAAAAAAAADU/C-lJ-fjjFaA/photo.jpg?sz=128", "display_name": "Sergey Shevchenko", "link": "https://stackoverflow.com/users/5922736/sergey-shevchenko"}, "reply_to_user": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "edited": false, "score": 0, "creation_date": 1574412190, "post_id": 58931954, "comment_id": 104231916, "body": "It&#39;s hard to say why. Can you use spy++ and check what&#39;s the hierarchy of windows that 3rd party app has?"}, {"owner": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "edited": false, "score": 0, "creation_date": 1574413929, "post_id": 58931954, "comment_id": 104232779, "body": "The hierarchy of the dialog I created has 4 layers (#32770 -&gt; SysTabControl32 -&gt; #32770 -&gt; Button) while the 3rd party apps has only 3 layers (#32770 -&gt; #32770 -&gt; Button). For the dialog I created myself, the tab control has the parent SysTabControl32 while the 3rd party apps, the tab control is not the child of SyTabControl32, it is the child of the main window (top parent). Sorry if my explanation is not clear."}], "tags": [], "owner": {"reputation": 427, "user_id": 5922736, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-H0lgreC9KQE/AAAAAAAAAAI/AAAAAAAAADU/C-lJ-fjjFaA/photo.jpg?sz=128", "display_name": "Sergey Shevchenko", "link": "https://stackoverflow.com/users/5922736/sergey-shevchenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1574268830, "last_edit_date": 1574268830, "creation_date": 1574159603, "answer_id": 58931954, "question_id": 58839523, "link": "https://stackoverflow.com/questions/58839523/mouse-cursor-always-get-the-wrong-hwnd-due-to-tab-order-mfc-application/58931954#58931954", "title": "Mouse cursor always get the wrong hwnd due to tab order - MFC Application", "body": "<p>At first you need to call <code>WindowFromPoint</code> to get the most heavily nested window handle, then you need to call <code>RealChildWindowFromPoint</code> to get the \"real\" one and avoid groupboxes. But it also avoids static text so you need to continue looking for child windows using <code>ChildWindowFromPointEx</code> and <code>CWP_ALL</code> flag.</p>\n\n<p>The implementation will be like this:</p>\n\n<pre><code>POINT pt;\nGetCursorPos(&amp;pt);\n// Get the window from point\nHWND hWnd = WindowFromPoint(pt);    \n// map cursor position to window's client coordinates\nMapWindowPoints(NULL, hWnd, &amp;pt, 1); \n\nwhile (true)\n{   \n    // Now let's look for real child window\n    HWND hWndChild = RealChildWindowFromPoint(hWnd, pt);\n    if (hWndChild == hWnd)\n    {\n        // There's no \"real\" child but we still need to look\n        // for Disabled/Transparent/Invisible windows\n        hWndChild = ChildWindowFromPointEx(hWnd, pt, CWP_ALL); \n    }\n\n    if (hWndChild == NULL || hWndChild == hWnd)\n        break; // we haven't found any child, stop search\n\n    // Continue search within child window\n    MapWindowPoints(hWnd, hWndChild, &amp;pt, 1);\n    hWnd = hWndChild;\n}\n\n// At this point hWnd variable should contain the handle that you're looking for\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 12318274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda3ef21193d636d45b077df56169e38?s=128&d=identicon&r=PG&f=1", "display_name": "Joshua_0101", "link": "https://stackoverflow.com/users/12318274/joshua-0101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 58931954, "answer_count": 1, "score": 0, "last_activity_date": 1574268830, "creation_date": 1573655983, "last_edit_date": 1573705429, "question_id": 58839523, "link": "https://stackoverflow.com/questions/58839523/mouse-cursor-always-get-the-wrong-hwnd-due-to-tab-order-mfc-application", "title": "Mouse cursor always get the wrong hwnd due to tab order - MFC Application", "body": "<p>I tried to get the window handle developed in MFC Application by using mouse cursor and print it out.</p>\n\n<p>This is the code I used to get the window handle.</p>\n\n<pre><code>#include&lt;windows.h&gt;\n#include&lt;iostream&gt;\nusing namespace std;\n\nint main() {\n\n        POINT pt;\n        Sleep(5000);\n        GetCursorPos(&amp;pt);\n        SetCursorPos(pt.x,pt.y);\n        Sleep(100);\n\n        HWND hPointWnd = WindowFromPoint(pt);\n        SendMessage(hPointWnd, WM_LBUTTONDOWN, MK_LBUTTON,MAKELONG(pt.x,pt.y));\n        SendMessage(hPointWnd, WM_LBUTTONUP, 0, MAKELONG(pt.x,pt.y));\n\n        char class_name[100];\n        char title[100];\n        GetClassNameA(hPointWnd,class_name, sizeof(class_name));\n        GetWindowTextA(hPointWnd,title,sizeof(title));\n        cout &lt;&lt;\"Window name : \"&lt;&lt;title&lt;&lt;endl;\n        cout &lt;&lt;\"Class name  : \"&lt;&lt;class_name&lt;&lt;endl;\n        cout &lt;&lt;\"hwnd        : \" &lt;&lt;hPointWnd&lt;&lt;endl&lt;&lt;endl;\n\n        system(\"PAUSE\");\n        return 0;\n\n}\n</code></pre>\n\n<p>I placed my mouse cursor on the button which inside a groupbox, then the result always show me the handle of groupbox instead of button. I found that the tab order is the reason that caused I can't get the handle of button</p>\n\n<p>Is there any other ways or other windows function can be used to counter the tab order issues?</p>\n\n<p>Any helps will be appreciate. Thanks a lot!</p>\n"}, {"tags": ["c++", "linked-list", "segmentation-fault"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1573655475, "post_id": 58839357, "comment_id": 103952944, "body": "<code>node1</code> is uninitialized"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 3, "creation_date": 1573655569, "post_id": 58839357, "comment_id": 103952993, "body": "To elaborate, <code>Node*</code> is the address in memory of a <code>Node</code>. If you don&#39;t initialize it, it&#39;s going to point to any old address. So when you try and access a node there, the OS throws up its arms and issues a segfault because you&#39;re trying to access a segment of memory you don&#39;t have permission to access."}, {"owner": {"reputation": 121, "user_id": 7630793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec96bab3afc3df4512ddbe8d3720f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "No N", "link": "https://stackoverflow.com/users/7630793/no-n"}, "reply_to_user": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 0, "creation_date": 1573655998, "post_id": 58839357, "comment_id": 103953222, "body": "@parktomatomi I edited the question. So trying to reach the address of the pointer gives me the permission, Is that right? Is that the reason the error disappears?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1573656018, "post_id": 58839357, "comment_id": 103953229, "body": "<b><i>Can anyone explain that behaviour?</i></b> This is what undefined behavior is. Anything can happen when you violate the rules of the language."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 1, "creation_date": 1573656418, "post_id": 58839357, "comment_id": 103953437, "body": "@NoN Only the OS can arbitrarily access addresses in memory. Your program is running in what&#39;s called userland, so you have to ask the OS for a block of memory you can access. That&#39;s what <code>new</code> does under the hood."}], "answers": [{"comments": [{"owner": {"reputation": 12967, "user_id": 1168588, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BxNie.jpg?s=128&g=1", "display_name": "PaulProgrammer", "link": "https://stackoverflow.com/users/1168588/paulprogrammer"}, "edited": false, "score": 1, "creation_date": 1573655555, "post_id": 58839381, "comment_id": 103952984, "body": "Note if you were to not use a pointer, and just initialize <code>Node node1</code>, you wouldn&#39;t need to use <code>new</code>, but that&#39;s not (usually) what you want."}, {"owner": {"reputation": 121, "user_id": 7630793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec96bab3afc3df4512ddbe8d3720f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "No N", "link": "https://stackoverflow.com/users/7630793/no-n"}, "edited": false, "score": 0, "creation_date": 1573655836, "post_id": 58839381, "comment_id": 103953133, "body": "I edited the question. Why the segmentation fault disappears when I try to reach the address of the node1?"}, {"owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "reply_to_user": {"reputation": 121, "user_id": 7630793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec96bab3afc3df4512ddbe8d3720f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "No N", "link": "https://stackoverflow.com/users/7630793/no-n"}, "edited": false, "score": 4, "creation_date": 1573655987, "post_id": 58839381, "comment_id": 103953218, "body": "@NoN You shouldn&#39;t edit questions into different ones. Anyway, what you&#39;re doing is undefined behavior, and there&#39;s no guarantee whatsoever with UB. It can seem to work sometimes and crash your program at other times, or do something entirely different. Therefore there is no gain in trying to figure out why UB does what it does."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1573657235, "post_id": 58839381, "comment_id": 103953907, "body": "Stop suggesting <code>new</code> friend, please."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1573657300, "post_id": 58839381, "comment_id": 103953949, "body": "I expect this academic exercise requires the use of <code>new</code>."}], "tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": false, "score": 3, "last_activity_date": 1573655481, "creation_date": 1573655481, "answer_id": 58839381, "question_id": 58839357, "link": "https://stackoverflow.com/questions/58839357/why-do-i-get-segmentation-fault-if-i-dont-use-new-keyword/58839381#58839381", "title": "Why do I get segmentation fault if I don&#39;t use &quot;new&quot; keyword?", "body": "<blockquote>\n  <p>Shouldn't <code>Node* node1;</code> line get memory for my <code>node1</code> on the stack?</p>\n</blockquote>\n\n<p><code>Node* node1;</code> gets memory on the stack for the pointer <code>node1</code>. However, after that, the pointer <code>node1</code> is uninitialized and isn't pointing anywhere valid. That's why you need to make it point somewhere valid before changing the data where it points to, and one way of doing that is with <code>new</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 12367243, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-n7lND0Bmpag/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfNXDQpDL6xc5c2z2z2uPXaAFQCSA/photo.jpg?sz=128", "display_name": "Andrei Minca", "link": "https://stackoverflow.com/users/12367243/andrei-minca"}, "is_accepted": false, "score": 0, "last_activity_date": 1573656112, "creation_date": 1573656112, "answer_id": 58839551, "question_id": 58839357, "link": "https://stackoverflow.com/questions/58839357/why-do-i-get-segmentation-fault-if-i-dont-use-new-keyword/58839551#58839551", "title": "Why do I get segmentation fault if I don&#39;t use &quot;new&quot; keyword?", "body": "<p>In order to use your object, a constructor must exist and be used when you instantiate your object. The constructor can be defined implicitly by the compiler under some conditions if you do not provide any, but eventually, the constructor must be there if you want an object to be instantiated.</p>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 3507913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c3a405d091b27d2de033f5692ccaf7?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/3507913/pankaj"}, "is_accepted": false, "score": 2, "last_activity_date": 1573658570, "creation_date": 1573658570, "answer_id": 58840294, "question_id": 58839357, "link": "https://stackoverflow.com/questions/58839357/why-do-i-get-segmentation-fault-if-i-dont-use-new-keyword/58840294#58840294", "title": "Why do I get segmentation fault if I don&#39;t use &quot;new&quot; keyword?", "body": "<blockquote>\n  <p>Question:  why do I get segmentation fault now?</p>\n</blockquote>\n\n<p>Answer: Whenever we access memory, which is out from program segment, we get segmentation fault.</p>\n\n<blockquote>\n  <p>Question: Shouldn't Node* node1; line get memory for my node1 on the\n  stack?</p>\n</blockquote>\n\n<p>Answer: \n1. In <code>Node * node1;</code> node1 is just pointer type variable which will be pointing to Node object. node1 pointer size does not depend on member of Node structure. Its just 4 byte long in 32 bit OS/platform. This pointer variable should be used to store address only\nof pointer type here its <code>Node</code>.</p>\n\n<ol start=\"2\">\n<li><p>Currently its holding garbage value.</p></li>\n<li><p>We have to create object (allocate memory) of type Node either using <code>\"Node *node1 = new Node;</code>\" or locally (not dynamic)  as \"<code>Node node1;</code> and Now we can access memory created for Node either using -> (pointer to member) operator or using . (dot) operator.</p></li>\n</ol>\n\n<blockquote>\n  <p>Question: I printed the address of node1 adding a cout line?</p>\n</blockquote>\n\n<p>Answer: you are printing address of pointer variable not Node object.</p>\n\n<blockquote>\n  <p>Question: Whenever I comment the cout line the error comes back. Can\n  anyone explain that behavior?</p>\n</blockquote>\n\n<p>Answer: 1. Behavior will be unpredictable, because you are working with garbage address(present in node1 pointer variable).</p>\n\n<ol start=\"2\">\n<li><p>if pointer variable (garbage) is pointing to memory which is protected/used by other process then we will get segmentation fault.</p></li>\n<li><p>if garbage address pointing to memory which is not yet used/protected by other process, we may not get any error.</p></li>\n</ol>\n\n<p>I hope its clear now. please let me know if any followup question. </p>\n"}], "owner": {"reputation": 121, "user_id": 7630793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec96bab3afc3df4512ddbe8d3720f2e2?s=128&d=identicon&r=PG&f=1", "display_name": "No N", "link": "https://stackoverflow.com/users/7630793/no-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1573658570, "creation_date": 1573655373, "last_edit_date": 1573655563, "question_id": 58839357, "link": "https://stackoverflow.com/questions/58839357/why-do-i-get-segmentation-fault-if-i-dont-use-new-keyword", "title": "Why do I get segmentation fault if I don&#39;t use &quot;new&quot; keyword?", "body": "<p>The following code generates segmentation fault. I don't get segmentation fault if I allocate memory on heap for my node1. (<code>Node* node1 = new Node</code>). My question is why do I get segmentation fault now? Shouldn't <code>Node* node1;</code> line get memory for my node1 on the stack?</p>\n\n<pre><code>class Node{\n    public:\n        int data;\n        Node* next;\n};\n\nint main(){\n    Node* node1;\n    node1-&gt;data = 5;\n\n    cout &lt;&lt; node1-&gt;data &lt;&lt; endl;\n}\n</code></pre>\n\n<p>I printed the address of node1 adding a cout line:</p>\n\n<pre><code>int main(){\n    Node* node1;\n    cout &lt;&lt; &amp;node1 &lt;&lt; endl;\n    node1-&gt;data = 5;\n\n    cout &lt;&lt; node1-&gt;data &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Now the error is gone. Whenever I comment the cout line the error comes back. Can anyone explain that behaviour?</p>\n"}, {"tags": ["c++", "stl", "c++17", "stdmap"], "comments": [{"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 2, "creation_date": 1573655565, "post_id": 58839260, "comment_id": 103952989, "body": "Related to, or dup of:  <a href=\"https://stackoverflow.com/questions/6438086/iterator-invalidation-rules\" title=\"iterator invalidation rules\">stackoverflow.com/questions/6438086/iterator-invalidation-ru&zwnj;&#8203;les</a>"}, {"owner": {"reputation": 3753, "user_id": 1718575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f36e2abcb1e57219a4b58d32c5bc6d?s=128&d=identicon&r=PG", "display_name": "NicholasM", "link": "https://stackoverflow.com/users/1718575/nicholasm"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 3, "creation_date": 1573655948, "post_id": 58839260, "comment_id": 103953196, "body": "@Eljay In my opinion, the new map \u201c<a href=\"https://en.cppreference.com/w/cpp/container/node_handle\" rel=\"nofollow noreferrer\">node handle</a>\u201d splicing API in C++17 is sufficiently specialized to warrant its own question. I hope this isn\u2019t closed as a duplicate."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1573656028, "post_id": 58839260, "comment_id": 103953241, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2874441/deleting-elements-from-stdset-while-iterating\">Deleting elements from std::set while iterating</a>. <code>std::set</code> and <code>std::map</code> are very similar, and as far as I can tell <code>extract</code> has the same invalidation implications as <code>erase</code>."}, {"owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "edited": false, "score": 0, "creation_date": 1573656246, "post_id": 58839260, "comment_id": 103953354, "body": "What version of clang and gcc did you use? For me, using clang 8.0 and gcc 7.4, both result in a segfault."}, {"owner": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "edited": false, "score": 0, "creation_date": 1573656309, "post_id": 58839260, "comment_id": 103953391, "body": "I am surprised that this code would work in any compiler. You are not handling the invalidation causing by extract"}, {"owner": {"reputation": 422, "user_id": 2266056, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kybPw.jpg?s=128&g=1", "display_name": "Iman Kianrostami", "link": "https://stackoverflow.com/users/2266056/iman-kianrostami"}, "edited": false, "score": 0, "creation_date": 1573656417, "post_id": 58839260, "comment_id": 103953436, "body": "Possible duplicate: <a href=\"https://stackoverflow.com/questions/35544203/better-way-to-move-elements-from-a-map-to-another\">better way to move elements from a map to another</a>"}, {"owner": {"reputation": 919, "user_id": 2088798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8665902e38fb9ed208369e0ac362d3d7?s=128&d=identicon&r=PG", "display_name": "axxel", "link": "https://stackoverflow.com/users/2088798/axxel"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1573657114, "post_id": 58839260, "comment_id": 103953842, "body": "@Elja please note that I did not ask what the issue with my first version is (I already found out about the invalidation issue from the spec), my question is if there is no better solution than the second (verbose) version."}], "answers": [{"comments": [{"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1573657986, "post_id": 58839821, "comment_id": 103954334, "body": "It&#39;s a good way, (reasonably) assuming that copying the iterator&#39;s state is less expensive than copying the node."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1573658259, "post_id": 58839821, "comment_id": 103954474, "body": "@Spencer copying an iterator is usually trivial. But I added a move just in case."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1573662940, "post_id": 58839821, "comment_id": 103957352, "body": "@Spencer <code>current</code> would be left in a moved from state. Whatever that state is won&#39;t matter since it is no longer used after that."}, {"owner": {"reputation": 1028, "user_id": 2654470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09fdaef3f1f52aaf47067f1050b27013?s=128&d=identicon&r=PG", "display_name": "Spencer", "link": "https://stackoverflow.com/users/2654470/spencer"}, "edited": false, "score": 0, "creation_date": 1573663018, "post_id": 58839821, "comment_id": 103957392, "body": "@eeroika Thanks, I looked at your code a little more closely and realized that."}, {"owner": {"reputation": 919, "user_id": 2088798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8665902e38fb9ed208369e0ac362d3d7?s=128&d=identicon&r=PG", "display_name": "axxel", "link": "https://stackoverflow.com/users/2088798/axxel"}, "edited": false, "score": 0, "creation_date": 1573668040, "post_id": 58839821, "comment_id": 103959878, "body": "I like your local variable better than having two icrements but I would suggest a minor improvement: limit the scope of <code>current</code> by using c++17s <code>if (auto current = ++i; p(*current))</code> syntax."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 919, "user_id": 2088798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8665902e38fb9ed208369e0ac362d3d7?s=128&d=identicon&r=PG", "display_name": "axxel", "link": "https://stackoverflow.com/users/2088798/axxel"}, "edited": false, "score": 0, "creation_date": 1573668294, "post_id": 58839821, "comment_id": 103960008, "body": "@axxel You must use post increment. But sure, if statement init (or whatever it&#39;s called) is an option. I find separate declaration more readable, and the scope is just as narrow in this case anyway. But if you wanted to write something within the loop after the if, and <code>current</code> isn&#39;t needed there, then limiting the scope would have merit."}, {"owner": {"reputation": 919, "user_id": 2088798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8665902e38fb9ed208369e0ac362d3d7?s=128&d=identicon&r=PG", "display_name": "axxel", "link": "https://stackoverflow.com/users/2088798/axxel"}, "edited": false, "score": 0, "creation_date": 1573669191, "post_id": 58839821, "comment_id": 103960414, "body": "@eerorika the &#39;++i&#39; was a typo that I just wanted to fix, only to learn that comments can not be edited anymore after 5 minutes ;)."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 6, "last_activity_date": 1573658094, "last_edit_date": 1573658094, "creation_date": 1573657032, "answer_id": 58839821, "question_id": 58839260, "link": "https://stackoverflow.com/questions/58839260/how-to-efficiently-move-some-items-from-one-stdmap-to-another/58839821#58839821", "title": "How to efficiently move (some) items from one std::map to another?", "body": "<blockquote>\n  <p>I assume the problem is the increment of i after it's node has been extracted from a.</p>\n</blockquote>\n\n<p>Indeed. Extraction invalidates iterators to the extracted element, and <code>i</code> is such iterator. The behaviour of incrementing or indirecting through an invalid iterator is undefined.</p>\n\n<blockquote>\n  <p>Why does this seemingly work in gcc but not in clang?</p>\n</blockquote>\n\n<p>Because the behaviour of the program is undefined.</p>\n\n<blockquote>\n  <p>Is the right/only way to fix this with a post-increment?</p>\n</blockquote>\n\n<p>It is <em>a</em> right way to fix this. It is not a particularly bad way. If you'd prefer to not repeat the increment, an approach is to use a variable:</p>\n\n<pre><code>for (auto i = a.begin(); i != a.end();) {\n    auto current = i++;\n    if (p(*current)) {\n        // moving is probably unnecessary\n        b.insert(a.extract(std::move(current)));\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 919, "user_id": 2088798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8665902e38fb9ed208369e0ac362d3d7?s=128&d=identicon&r=PG", "display_name": "axxel", "link": "https://stackoverflow.com/users/2088798/axxel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 1, "accepted_answer_id": 58839821, "answer_count": 1, "score": 8, "last_activity_date": 1573667798, "creation_date": 1573655080, "last_edit_date": 1573667798, "question_id": 58839260, "link": "https://stackoverflow.com/questions/58839260/how-to-efficiently-move-some-items-from-one-stdmap-to-another", "title": "How to efficiently move (some) items from one std::map to another?", "body": "<p>I have two <code>std::map&lt;&gt;</code> objects <code>a</code> and <code>b</code> and would like to move (<code>extract</code> + <code>insert</code>) some elements (nodes) from one map to the other based on some predicate <code>p</code>.</p>\n\n<pre><code>for (auto i = a.begin(); i != a.end(); ++i)\n    if (p(*i))\n        b.insert(a.extract(i))\n</code></pre>\n\n<p>This code segfaults in clang. I assume the problem is the increment of <code>i</code> after its node has been extracted from a.</p>\n\n<p>Is the right/only way to fix this by using a post-increment?, E.g.:</p>\n\n<pre><code>for (auto i = a.begin(); i != a.end();)\n    if (p(*i))\n        b.insert(a.extract(i++))\n    else\n        ++i;\n</code></pre>\n\n<p><strong>EDIT</strong>: I removed the part about \"why this works in gcc?\", because I can't reproduce this on my current setup. I'm convinced it used to at some point in time but with gcc 9.2.1 I get a deadlock (instead of a segfault). Either way, incrementing after <code>extract()</code> is not working.</p>\n"}, {"tags": ["c++", "linux", "exception", "glibc"], "comments": [{"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 1, "creation_date": 1573655873, "post_id": 58839181, "comment_id": 103953151, "body": "Your assumption is incorrectly optimistic. Porting to newer versions of libraries, toolsets and operating systems often involves some reading of docs about breaking changes and full retesting. Some undefined behavior in code just did manifest differently or less frequently and bang."}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "reply_to_user": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1573659678, "post_id": 58839181, "comment_id": 103955342, "body": "@&#214;&#246;Tiib I&#39;m not sure I understand what libraries/toolsets you&#39;re talking about? Everything used in <code>app</code> is built on the same build machine, with the same environment and (almost) everything is statically linked. Are you saying, that deploying <code>libstdc++</code> and <code>libgcc_s</code> is wrong? Looking at the dependencies, the only question seems to be <code>GLIBC</code> which is supposed to be fully backward compatible. Can you be more specific?"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1573672690, "post_id": 58839181, "comment_id": 103961937, "body": "I did read that you compare 32 bit and for 64 bit builds. Expected behavior of program is different since sizes of pointers and integral types in it are different, the instructions in resulting executables are different, tools generating those executables are different, libraries linked to are different and so on."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1574342733, "post_id": 58839181, "comment_id": 104205122, "body": "What&#39;s your link command? Why didn&#39;t you statically link to <i>g++</i>&#39;s libs? Also, can you reproduce the problem with a dummy <i>main</i> only containing a <code>std::cout</code>?"}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1574423195, "post_id": 58839181, "comment_id": 104237658, "body": "@CristiFati what&#39;s the point of static linking with g++ and gcc libs in this case? I do &quot;deploy&quot; and link with them anyway. I didn&#39;t do that, because static linking with these 2 libs has some risks, which I&#39;d like to avoid (e.g. runtime <code>dlopen</code>). About the dummy <code>main</code> (with exceptions, though) - that&#39;s fair point, I&#39;ll try that. Do you have something specific in mind?"}, {"owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "edited": false, "score": 0, "creation_date": 1574424303, "post_id": 58839181, "comment_id": 104238171, "body": "I suspect that if you &quot;deploy&quot; GCC libs (g++/gcc) from build machine to target one with different OS or version, then your app (or one of its dependencies) can actually use GCC libs from the target system, and other dependencies use libs that you deployed, leading to incompatibilities. It&#39;s much safer to build applications on target box or use cross-compilation specifying exactly target box OS and version. Also it&#39;s safer to use dynamic linking with system libs because mixing static and dynamic lib in one app may lead to problems (e.g. two instances of some global var in gcc lib)."}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "reply_to_user": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "edited": false, "score": 0, "creation_date": 1574424738, "post_id": 58839181, "comment_id": 104238402, "body": "@4LegsDrivenCat I do use dynamic linking with the system libs. Also, see the dependencies of the application - every dep is statically linked into the executable and each of these deps are built against the deployed c++/gcc libs - so I can&#39;t see how it&#39;s possible to mix two implementations of these libs into the binary. Is it possible? And what I&#39;m trying to do is to build an app on older Linux (in this case - CentOS 6) in order to support wider Linux distros (with older GLIBC), so building for a specific hardware/platform is not an option."}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1574425030, "post_id": 58839181, "comment_id": 104238554, "body": "@CristiFati can&#39;t reproduce it with a simple <code>main</code> and a simple <code>throw</code>. The real app is a bit big and has multiple dependencies. Maybe I&#39;ve done something wrong when compiling them, but I can&#39;t think of a way to find that out."}, {"owner": {"reputation": 297, "user_id": 4952697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e995ead0074ca85a7722db5112a827e9?s=128&d=identicon&r=PG&f=1", "display_name": "god", "link": "https://stackoverflow.com/users/4952697/god"}, "edited": false, "score": 0, "creation_date": 1574426102, "post_id": 58839181, "comment_id": 104239168, "body": "Can you reproduce the crash with minimal example from <a href=\"https://linux.die.net/man/3/dl_iterate_phdr\" rel=\"nofollow noreferrer\">linux.die.net/man/3/dl_iterate_phdr</a> ? Does your program actually use dl_iterate_phdr()?"}, {"owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "edited": false, "score": 0, "creation_date": 1574427679, "post_id": 58839181, "comment_id": 104240023, "body": "@KirilKirov I mentioned dynamic linking mainly as a reaction to CristiFati&#39;s question/suggestion. I copied my comment to a separate answer."}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1574433466, "post_id": 58839181, "comment_id": 104243145, "body": "What about if you add smh like <code>pthread_self();</code> (<code>#include &lt;pthread.h&gt;</code> required)?"}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1574433795, "post_id": 58839181, "comment_id": 104243323, "body": "@CristiFati - nope, works fine"}], "answers": [{"comments": [{"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1574430882, "post_id": 58994832, "comment_id": 104241662, "body": "Wow, thanks for the link to <code>phusion&#47;holy-build-box</code>, I haven&#39;t seen this, will definitely take a look! As I already said, I can&#39;t see how the application can look for the local (target machine&#39;s) c++/gcc, as <code>ldd</code> clearly shows a different thing. I also mentioned in the comments above, that I do link with the system libs dynamically (e.g.<code>libc</code>, <code>libm</code>, ...; c++/gcc libs are not &quot;system&quot; libs). I don&#39;t say you&#39;re wrong, I&#39;m just trying to explain what I think and trying to find out where&#39;s/re my mistake/s."}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1574431263, "post_id": 58994832, "comment_id": 104241891, "body": "Oh, this <code>holy build box</code> is just some docker container. Also, they seem to explain exactly what I&#39;ve already done: <code>The solution is to statically link to dependencies. ... the Holy Build Box approach is to statically link to all dependencies, except for glibc and other system libraries that are found on pretty much every Linux distribution, such as libpthread and libm.</code>. My build machine is also <code>CentOS 6</code>, I&#39;m also not linking with glibc statically, but everything else is statically linked, etc. Of course, I need to read that more carefully, but seems like I&#39;m doing exactly the same thing."}, {"owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "reply_to_user": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1574449238, "post_id": 58994832, "comment_id": 104250758, "body": "@KirilKirov May your crash be related to 32/64-bit lib versions incompatibilty in some linked libs? What does <code>ldd .&#47;libstdc++.so.6</code> show, for example? Check whole dependency tree, not just app&#39;s."}, {"owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "reply_to_user": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1574449526, "post_id": 58994832, "comment_id": 104250866, "body": "@KirilKirov Also read this: <a href=\"https://github.com/phusion/holy-build-box/blob/master/LINKING-CXX.md\" rel=\"nofollow noreferrer\">github.com/phusion/holy-build-box/blob/master/LINKING-CXX.md</a>"}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1574450340, "post_id": 58994832, "comment_id": 104251190, "body": "<code>ldd .&#47;libstdc++.so.6  \tlinux-gate.so.1 (0xf7fce000) \tlibm.so.6 =&gt; &#47;lib32&#47;libm.so.6 (0xf7df3000) \tlibc.so.6 =&gt; &#47;lib32&#47;libc.so.6 (0xf7c15000) \t&#47;lib&#47;ld-linux.so.2 (0xf7fd0000) \tlibgcc_s.so.1 =&gt; .&#47;libgcc_s.so.1 (0xf7bf7000) </code>"}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1574450390, "post_id": 58994832, "comment_id": 104251209, "body": "<code>ldd .&#47;libgcc_s.so.1  \tlinux-gate.so.1 (0xf7f00000) \tlibc.so.6 =&gt; &#47;lib32&#47;libc.so.6 (0xf7ce3000) \t&#47;lib&#47;ld-linux.so.2 (0xf7f02000)</code>"}, {"owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1574450416, "post_id": 58994832, "comment_id": 104251216, "body": "Sorry for the bad formatting. Everything seems right. I also though <code>ldd</code> is recursive, isn&#39;t it? I&#39;ll inspect all <code>dlopen</code> calls with <code>strace</code>, but I doubt this is an issue, given the fact I override <code>LD_LIBRARY_PATH</code> and it has top priority when searching for libs."}, {"owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "reply_to_user": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "edited": false, "score": 0, "creation_date": 1574451524, "post_id": 58994832, "comment_id": 104251732, "body": "@KirilKirov Last two <code>ldd</code>s look fine to me."}], "tags": [], "owner": {"reputation": 736, "user_id": 2006632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AHVIg.jpg?s=128&g=1", "display_name": "4LegsDrivenCat", "link": "https://stackoverflow.com/users/2006632/4legsdrivencat"}, "is_accepted": false, "score": 0, "last_activity_date": 1574428154, "last_edit_date": 1574428154, "creation_date": 1574427615, "answer_id": 58994832, "question_id": 58839181, "link": "https://stackoverflow.com/questions/58839181/a-32bit-version-of-an-application-built-on-centos-6-x64-crashes-during-excepti/58994832#58994832", "title": "A 32bit version of an application, built on CentOS 6 x64, crashes during exceptions in `dl_iterate_phdr`, when started on newer Linux", "body": "<p>I suspect that if you \"deploy\" GCC libs (g++/gcc) from build machine to target one with different OS or OS version, then your app (or one of its dependencies) can actually use GCC libs from the target system, and other dependencies use libs that you deployed, leading to potential incompatibilities.</p>\n\n<p>It's much safer to build your application on target box, or use cross-compilation specifying exactly target box OS and version.</p>\n\n<p>Also it's safer to use dynamic linking with system libs because otherwise you may end up with the situation of mixing static and dynamic lib in one app, and this may lead to problems (e.g. two instances of some global var in gcc lib).</p>\n\n<p>You'll need to check whole tree of lib dependencies to ensure that only one instance of every lib is loaded from the same location. For example your app depends on <code>./libgcc_s.so.1</code> and <code>./libstdc++.so.6</code> but <code>./libstdc++.so.6</code> may depend on system's <code>libgcc_s.so</code>.</p>\n\n<p>You may search on Internet about these and other pitfalls with building your app on non-target box. E.g. <a href=\"https://github.com/phusion/holy-build-box#problem-introduction\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>So just compiling your application on an older distribution is not enough.</p>\n</blockquote>\n"}], "owner": {"reputation": 35343, "user_id": 435800, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/4f40d75bd1227e2a57c77864047cd9f7?s=128&d=identicon&r=PG", "display_name": "Kiril Kirov", "link": "https://stackoverflow.com/users/435800/kiril-kirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1574428154, "creation_date": 1573654784, "question_id": 58839181, "link": "https://stackoverflow.com/questions/58839181/a-32bit-version-of-an-application-built-on-centos-6-x64-crashes-during-excepti", "title": "A 32bit version of an application, built on CentOS 6 x64, crashes during exceptions in `dl_iterate_phdr`, when started on newer Linux", "body": "<p><strong>TL;DR;</strong> My research shows that if I build an application (and its dependencies) on older Linux like <code>CentOS 6</code> (with <code>GLIBC 2.12</code>), it is supposed to work perfectly fine on any other Linux distro, which has newer <code>GLIBC</code>. Isn't this assumption correct?</p>\n\n<hr>\n\n<p>Sorry, it's gonna be a long post, but it's not a trivial question. </p>\n\n<p>Here's the <strong>build</strong> machine:</p>\n\n<pre><code>$ rpm -q centos-release\n  centos-release-6-10.el6.centos.12.3.x86_64\n$ ldd --version\n  ldd (GNU libc) 2.12\n$ ld -v\n  GNU ld version 2.30-54.el6\n$ gcc --version\n  gcc (GCC) 8.3.1 20190311 (Red Hat 8.3.1-3)\n$ g++ --version\n  g++ (GCC) 8.3.1 20190311 (Red Hat 8.3.1-3)\n</code></pre>\n\n<p>The <strong>application</strong> links with almost everything statically, so:</p>\n\n<pre><code>$ ldd ./app \nlinux-gate.so.1 (0xf7f73000)\nlibdl.so.2 =&gt; /lib32/libdl.so.2 (0xf7f4c000)\nlibrt.so.1 =&gt; /lib32/librt.so.1 (0xf7f41000)\nlibstdc++.so.6 =&gt; ./libstdc++.so.6 (0xf7e22000)\nlibm.so.6 =&gt; /lib32/libm.so.6 (0xf7d53000)\nlibgcc_s.so.1 =&gt; ./libgcc_s.so.1 (0xf7d35000)\nlibpthread.so.0 =&gt; /lib32/libpthread.so.0 (0xf7d14000)\nlibc.so.6 =&gt; /lib32/libc.so.6 (0xf7b36000)\n/lib/ld-linux.so.2 (0xf7f75000)\n</code></pre>\n\n<p>So:</p>\n\n<ul>\n<li><code>linux-gate</code> and <code>ld-linux</code> aren't exactly libs, so they can't be deployed;</li>\n<li><code>libdl</code>, <code>librt</code>, <code>libm</code>, <code>libpthread</code> and <code>libc</code> are a part of the <code>GLIBC</code>, so they shouldn't be deployed as well (especially given the backward compatibility of the GNU C library);</li>\n<li><code>libstdc++</code> and <code>libgcc_s</code> are \"deployed\" together with the binary (taken from the build machine)</li>\n</ul>\n\n<p>The <strong>test</strong> machine:</p>\n\n<pre><code>$ lsb_release -a\n  Description:  Debian GNU/Linux 10 (buster)\n$ ldd --version\n  ldd (Debian GLIBC 2.28-10) 2.28\n</code></pre>\n\n<p>The 64bit build (with its <code>libstdc++</code> and <code>libgcc_s</code>) seems to work perfectly fine.</p>\n\n<p>The issue is with the 32bit build - it <strong>crashes</strong>, when an exception is thrown (not for all exceptions, but seems to be consistent). Here's how interesting the stack trace is:</p>\n\n<pre><code> SIGSEGV at  0# __kernel_sigreturn in linux-gate.so.1\n 1# dl_iterate_phdr in /lib32/libc.so.6\n 2# _Unwind_Find_FDE in ./libgcc_s.so.1\n 3# 0xF7D88AAE in ./libgcc_s.so.1\n 4# 0xF7D89227 in ./libgcc_s.so.1\n 5# _Unwind_RaiseException in ./libgcc_s.so.1\n 6# __cxa_throw in ./libstdc++.so.6\n 7# &lt;some funct&gt; in ./app\n 7# &lt;some funct&gt; in ./app\n 7# &lt;some funct&gt; in ./app\n 7# &lt;some funct&gt; in ./app\n 7# &lt;some funct&gt; in ./app\n 7# &lt;some funct&gt; in ./app\n13# make_fcontext in ./app\n</code></pre>\n\n<p>I can see two possible options here:</p>\n\n<ol>\n<li>there's something broken with the 32bit build (although it works without exceptions);</li>\n<li>I do have some big misunderstanding on the matter.</li>\n</ol>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "gdb", "backtrace", "addr2line"], "owner": {"reputation": 2192, "user_id": 1966790, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c63f6c93d67e8cbe0bc2498c225d2d88?s=128&d=identicon&r=PG", "display_name": "MateuszL", "link": "https://stackoverflow.com/users/1966790/mateuszl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1573654238, "creation_date": 1573654238, "question_id": 58839014, "link": "https://stackoverflow.com/questions/58839014/gdb-backtrace-show-inlined-functions-like-addr2line-i-does", "title": "gdb backtrace - show inlined functions, like `addr2line -i` does", "body": "<p>I have gdb attached to process. I print backtrace, one of frames looks like this:</p>\n\n<pre><code>#9  0x000055b748d7467b in CA::CryptUserKeysCache::addSongKeyFast (this=0x55b74e141a90, group_color=..., timePeriodValidUnit=timePeriodValidUnit@entry=366, keyIsValidFromTime=1573653252507218,\n    useSystemValues=useSystemValues@entry=false) at /usr/include/c++/8/bits/shared_ptr_base.h:1307\n\n</code></pre>\n\n<p>That is my function, but definitely not my file. I expect this is due to inlining. Is there a command that will show me how this inlining proceeded? Something akin to <code>addr2line -i</code>? </p>\n\n<p>For comparison, addr2line with slightly different backtrace, but close.</p>\n\n<p><code>addr2line</code> plain:</p>\n\n<pre><code>CA::CCryptSongPrivateGroupMgrKey::JoinMyselfToGroup(Borg::AbstractGroupHash const&amp;) at /usr/local/linux64-hard-2.17/include/boost/multiprecision/cpp_int.hpp:987\nCA::CryptUserKeysCache::addSongKeyFast(Borg::AbstractGroupHash const&amp;, unsigned short, long, bool) at /home2/mateuszl/git/borg-engine/core_inter_headers/core_separate_libs/libs/crypto_types/src/CryptUserKeysCache.cpp:1699\n\n</code></pre>\n\n<p>with <code>-i</code>:</p>\n\n<pre><code>CA::CCryptSongPrivateGroupMgrKey::JoinMyselfToGroup(Borg::AbstractGroupHash const&amp;) at /usr/local/linux64-hard-2.17/include/boost/multiprecision/cpp_int.hpp:987\n (inlined by) ?? at /usr/local/linux64-hard-2.17/include/boost/multiprecision/cpp_int.hpp:1073\n (inlined by) ?? at /usr/local/linux64-hard-2.17/include/boost/multiprecision/number.hpp:45\n (inlined by) ?? at /home2/mateuszl/git/borg-engine/core_inter_headers/core_separate_libs/libs/uint128/src/../include/borg/uint128/uint128.h:50\n (inlined by) CA::CCryptSongPrivateGroupMgrKey::JoinMyselfToGroup(Borg::AbstractGroupHash const&amp;) at /home2/mateuszl/git/borg-engine/core_inter_headers/core_separate_libs/libs/crypto_song/src/CCryptSongPrivateGroupMgrKey.cpp:234\nCA::CryptUserKeysCache::addSongKeyFast(Borg::AbstractGroupHash const&amp;, unsigned short, long, bool) at /home2/mateuszl/git/borg-engine/core_inter_headers/core_separate_libs/libs/crypto_types/src/CryptUserKeysCache.cpp:1699\n</code></pre>\n"}, {"tags": ["c++", "stl", "smart-pointers", "unique-ptr", "predicate"], "comments": [{"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 0, "creation_date": 1573653765, "post_id": 58838826, "comment_id": 103951887, "body": "What&#39;s the error?"}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 4, "creation_date": 1573653878, "post_id": 58838826, "comment_id": 103951958, "body": "Nothing wrong with the lambda. What is wrong is your construction of the unique_ptr. Try <code>arr.emplace_back(std::make_unique&lt;int&gt;(i));</code>"}, {"owner": {"reputation": 47, "user_id": 12123150, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zuh0oINOLwM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerZax24hQ0SyBaJHRMJsqxwCMQqw/photo.jpg?sz=128", "display_name": "\uae40\uc815\uc5f0", "link": "https://stackoverflow.com/users/12123150/%ea%b9%80%ec%a0%95%ec%97%b0"}, "edited": false, "score": 0, "creation_date": 1573653923, "post_id": 58838826, "comment_id": 103951987, "body": "Oh My God. thanks.  Do you know if the map should be given as a key or value?"}], "answers": [{"tags": [], "owner": {"reputation": 16695, "user_id": 10147399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a6d433902192f8bb03857ae1b849d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Ayxan Haqverdili", "link": "https://stackoverflow.com/users/10147399/ayxan-haqverdili"}, "is_accepted": false, "score": 0, "last_activity_date": 1573654119, "creation_date": 1573654119, "answer_id": 58838976, "question_id": 58838826, "link": "https://stackoverflow.com/questions/58838826/cant-i-get-a-pointer-as-a-parameter-of-stl-predicate/58838976#58838976", "title": "Can&#39;t I get a pointer as a parameter of STL predicate?", "body": "<p>The problem is not the lambda, it is how you construct elements in your vector. This is how you want to do it:</p>\n\n<pre><code>for (int i = 0; i != 100; ++i) {\n    arr.emplace_back( std::make_unique&lt;int&gt;( i ) );\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 2, "last_activity_date": 1573655150, "last_edit_date": 1573655150, "creation_date": 1573654263, "answer_id": 58839024, "question_id": 58838826, "link": "https://stackoverflow.com/questions/58838826/cant-i-get-a-pointer-as-a-parameter-of-stl-predicate/58839024#58839024", "title": "Can&#39;t I get a pointer as a parameter of STL predicate?", "body": "<p>The problem is that there is no implicit constructor for the class template std::unique_ptr that accepts an object of the template argument type.</p>\n\n<p>So this loop</p>\n\n<pre><code>for (int i = 0; i &lt; 100; ++i)\n{\n    arr.emplace_back(i);\n}\n</code></pre>\n\n<p>is incorrect. </p>\n\n<p>Also this statement</p>\n\n<pre><code>cout &lt;&lt; *p &lt;&lt; endl;\n</code></pre>\n\n<p>is also incorrect. Instead write</p>\n\n<pre><code>cout &lt;&lt; **p &lt;&lt; endl;\n</code></pre>\n\n<p>It seems you mean the following</p>\n\n<pre><code>for (int i = 0; i &lt; 100; ++i)\n{\n    arr.emplace_back( make_unique&lt;int&gt;( i ) );\n}\n\nauto p = find_if(arr.begin(), arr.end(), [](const unique_ptr&lt;int&gt;&amp; a) // error\n{\n    return *a == 10;\n});\n\nif ( p != arr.end() ) cout &lt;&lt; **p &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 12123150, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Zuh0oINOLwM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rerZax24hQ0SyBaJHRMJsqxwCMQqw/photo.jpg?sz=128", "display_name": "\uae40\uc815\uc5f0", "link": "https://stackoverflow.com/users/12123150/%ea%b9%80%ec%a0%95%ec%97%b0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573655150, "creation_date": 1573653686, "last_edit_date": 1573654493, "question_id": 58838826, "link": "https://stackoverflow.com/questions/58838826/cant-i-get-a-pointer-as-a-parameter-of-stl-predicate", "title": "Can&#39;t I get a pointer as a parameter of STL predicate?", "body": "<p>How can I get a pointer?</p>\n\n<p>I want to put a pointer as a parameter to the lambda expression you see!</p>\n\n<pre><code>vector&lt;unique_ptr&lt;int&gt;&gt; arr{};\n\nfor (int i = 0; i &lt; 100; ++i) {\n  arr.emplace_back(i);\n}\n\nauto p = find_if(arr.begin(), arr.end(),\n                 [](const unique_ptr&lt;int&gt;&amp; a)  // error\n                 { return *a == 10; });\n\ncout &lt;&lt; *p &lt;&lt; endl;\n</code></pre>\n"}, {"tags": ["c++", "gcc", "visual-studio-2017", "mingw"], "answers": [{"tags": [], "owner": {"reputation": 858, "user_id": 1993396, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1386d0e6a382d1b5cbb44652736cb25?s=128&d=identicon&r=PG", "display_name": "Ayman Salah", "link": "https://stackoverflow.com/users/1993396/ayman-salah"}, "is_accepted": true, "score": 0, "last_activity_date": 1573661728, "creation_date": 1573661728, "answer_id": 58841244, "question_id": 58838633, "link": "https://stackoverflow.com/questions/58838633/location-of-scanf-function-family-in-vc-runtime-2017-to-be-used-in-mingw-7/58841244#58841244", "title": "Location of scanf function family in VC runtime 2017 to be used in MinGW 7", "body": "<p>I was able to get rid of the undefined <code>scanf</code> errors during linking by only adding <code>-D_UCRT</code> to <strong>cpp</strong> and <strong>cc1plus</strong> parts of the <strong>GCC</strong> spec file.</p>\n\n<p>I reached this solution after checking the sources found in stdio folder of mingw <code>src\\mingw-w64\\mingw-w64-crt\\stdio</code> and some threads in the discussion forum of <strong>MinGW</strong> sourceforge.</p>\n\n<p><strong>MinGW</strong> <code>stdio.h</code> had <code>#ifdef _UCRT</code> around <code>scanf</code> related functions.</p>\n"}], "owner": {"reputation": 858, "user_id": 1993396, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1386d0e6a382d1b5cbb44652736cb25?s=128&d=identicon&r=PG", "display_name": "Ayman Salah", "link": "https://stackoverflow.com/users/1993396/ayman-salah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 58841244, "answer_count": 1, "score": 3, "last_activity_date": 1573661728, "creation_date": 1573653081, "last_edit_date": 1573657484, "question_id": 58838633, "link": "https://stackoverflow.com/questions/58838633/location-of-scanf-function-family-in-vc-runtime-2017-to-be-used-in-mingw-7", "title": "Location of scanf function family in VC runtime 2017 to be used in MinGW 7", "body": "<p>I am using:</p>\n\n<ul>\n<li>VS 2017</li>\n<li>MinGW with GCC/G++ 7.4.0.</li>\n</ul>\n\n<p>Basically what is happening goes as follows:</p>\n\n<ol>\n<li>An executable is built using VS 2017</li>\n<li>An .so is built with GCC</li>\n<li>The .so is loaded by the executable created in step 1</li>\n</ol>\n\n<p>The issue stems from the <code>MSVCRT</code>. <strong>MinGW</strong> by default links against <code>MSVCRT.DLL</code> and the executable created using <strong>VS 2017</strong> uses <code>VCRUNTIME140.DLL</code> and <code>UCRTBASE.DLL</code>.</p>\n\n<p>When the <code>.so</code> is loaded two CRT exist the one from <code>MSVCRT.DLL</code> and the other from <code>VCRUNTIME140.DLL</code> and <code>UCRTBASE.DLL</code>. This causes random issues/memory issues during application runtime.</p>\n\n<p>The solution for that is to have <strong>MinGW</strong> link against <code>VCRUNTIME140.DLL</code> instead of <code>MSVCRT.DLL</code>. I have done that by creating an import library from <code>VCRUNTIME140.DLL</code> added it to <strong>MinGW</strong> and dumped the <strong>GCC</strong> specs and modified it to have it link to the <code>VCRUNTIME140.DLL</code> and <code>UCRTBASE.DLL</code>.</p>\n\n<p>My problem now is the <code>scanf</code> family functions. I can't seem to find the scanf functions within <code>VCRUNTIME140.DLL</code> or <code>UCRTBASE.DLL</code>.</p>\n\n<p>Where does the <code>scanf</code> family lie now in the whole new <strong>UCRT</strong> thing?</p>\n\n<p>So, I just compiled a small test application which makes use of <code>scanf</code> and compiled it using <strong>VS 2017</strong> and found that it uses <strong>API-MS-WIN-CRT-STDIO-L1-1-0.DLL</strong> which then uses <strong>UCRTBASE.DLL</strong> for <code>scanf</code> which appears this way <code>__stdio_common_vscanf</code>.</p>\n\n<p>I am now so confused. Is there any kind of a clean way to reference <code>scanf</code> functions by <strong>MinGW GCC</strong>?</p>\n"}, {"tags": ["c++", "c++11", "timeout", "c++14"], "comments": [{"owner": {"reputation": 480272, "user_id": 1968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/fdd630f72eef3790bfb4ef38d08c7f85?s=128&d=identicon&r=PG", "display_name": "Konrad Rudolph", "link": "https://stackoverflow.com/users/1968/konrad-rudolph"}, "edited": false, "score": 1, "creation_date": 1573652461, "post_id": 58838412, "comment_id": 103951146, "body": "What networking library are you using? That should already have this functionality built in, without the need to do this manually."}, {"owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "edited": false, "score": 0, "creation_date": 1573653605, "post_id": 58838412, "comment_id": 103951790, "body": "Show your code, please."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 12367019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd92e884428a103f606209642d9ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "YopAndMail", "link": "https://stackoverflow.com/users/12367019/yopandmail"}, "edited": false, "score": 0, "creation_date": 1573653652, "post_id": 58838505, "comment_id": 103951818, "body": "For example, i have to check the number of exchanged messages through a request (a simple int member in my test server) or a value in the client response. The test has to validate the response (corrected value) or not (wrong value or timeout). I think a personal polling was a bit heavy compare to the simplificity i found in these features."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 43, "user_id": 12367019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd92e884428a103f606209642d9ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "YopAndMail", "link": "https://stackoverflow.com/users/12367019/yopandmail"}, "edited": false, "score": 0, "creation_date": 1573655973, "post_id": 58838505, "comment_id": 103953212, "body": "@YopAndMail: Communications among different programs, possibly on different machines, will necessarily be more complex using a programming language not intended to write multiple independent programs at once. Note, though, that in many cases you don&#39;t have to repeatedly-poll, but go to sleep until a message is available from the client or some time passes."}, {"owner": {"reputation": 43, "user_id": 12367019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd92e884428a103f606209642d9ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "YopAndMail", "link": "https://stackoverflow.com/users/12367019/yopandmail"}, "edited": false, "score": 0, "creation_date": 1573657251, "post_id": 58838505, "comment_id": 103953914, "body": "In fact, just talking to all of you makes me take a step back. I think i searched too much complexity (my problems mixes architecture and implementation in my head). The timeout will be, obviously, implemented by my test server and my caller tests, will (in)validate the response the server gets. Well, it is so simple as I&#39;m a little ashamed now.."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 43, "user_id": 12367019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd92e884428a103f606209642d9ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "YopAndMail", "link": "https://stackoverflow.com/users/12367019/yopandmail"}, "edited": false, "score": 0, "creation_date": 1573665673, "post_id": 58838505, "comment_id": 103958749, "body": "@YopAndMail: There is nothing to be ashamed about. You asked a legitimate - though somewhat inspecific - question and got an answer. Everything&#39;s ok."}], "tags": [], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "is_accepted": false, "score": 2, "last_activity_date": 1573652631, "creation_date": 1573652631, "answer_id": 58838505, "question_id": 58838412, "link": "https://stackoverflow.com/questions/58838412/how-to-wait-for-a-value-with-timeout/58838505#58838505", "title": "How to wait for a value with timeout", "body": "<p>None of the C++ language features  you mentioned can help in your scenario, because they are intended for interaction within a single running program - which may be multi-threaded, but not separated into two completely independent processes.</p>\n\n<p>However, the networking library you are using (on the server side) might possibly have convenience facilities for doing this.</p>\n\n<p>I realize this is a general and somewhat vague answer, but your question was also not very specific.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 0, "last_activity_date": 1573654396, "creation_date": 1573654396, "answer_id": 58839069, "question_id": 58838412, "link": "https://stackoverflow.com/questions/58838412/how-to-wait-for-a-value-with-timeout/58839069#58839069", "title": "How to wait for a value with timeout", "body": "<blockquote>\n  <p>How to wait for a value with timeout</p>\n</blockquote>\n\n<p>Within a process, one would typically use a condition variable.</p>\n\n<blockquote>\n  <p>I want to check the client response ... through a command send by the server</p>\n</blockquote>\n\n<p>There is no standard way to communicate between processes in C++ (unless you count interaction with filesystem). As such, there is also no standard way to enforce a timeout on such communication.</p>\n\n<p>Before you can know how to implement the timeout, you must figure out how you are going to communicate between the client and the server. That choice will be affected by what system you are targeting, so you should first figure that out.</p>\n"}, {"comments": [{"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1573665737, "post_id": 58839405, "comment_id": 103958789, "body": "Please provide a little more information than just name-dropping... what is rpcgen? What are <code>.x</code> files? What is D-Bus? Maybe some of us know the answer, but not all of us. You can also add links to further information."}, {"owner": {"reputation": 869, "user_id": 887420, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/WHuOw.jpg?s=128&g=1", "display_name": "Ilian Zapryanov", "link": "https://stackoverflow.com/users/887420/ilian-zapryanov"}, "reply_to_user": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1573665914, "post_id": 58839405, "comment_id": 103958886, "body": "Dbus or probably libdbus for you is an IPC cross platform toolkit or library that can fit your need. RPCGEN is an old tool that does the same thing but more complicated. I don\u2019t have a snippet, I apologise but you can search for \u201cqt dbus example\u201d"}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "edited": false, "score": 0, "creation_date": 1573666241, "post_id": 58839405, "comment_id": 103959037, "body": "I meant, put that in the answer please... :-P"}], "tags": [], "owner": {"reputation": 869, "user_id": 887420, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/WHuOw.jpg?s=128&g=1", "display_name": "Ilian Zapryanov", "link": "https://stackoverflow.com/users/887420/ilian-zapryanov"}, "is_accepted": false, "score": 0, "last_activity_date": 1573715561, "last_edit_date": 1573715561, "creation_date": 1573655534, "answer_id": 58839405, "question_id": 58838412, "link": "https://stackoverflow.com/questions/58838412/how-to-wait-for-a-value-with-timeout/58839405#58839405", "title": "How to wait for a value with timeout", "body": "<p>If you are on a Linux environment you can try <code>rpcgen</code> and play with <code>.x</code> flies but you\u2019ll have to study it a bit. Not sure for Windows env. Also you can use <code>Dbus</code> which is more intuitive.\n[edit] <code>Dbus</code> or probably <code>libdbus</code> for you is an IPC cross platform toolkit or library that can fit your need. RPCGEN is an old tool that does the same thing but more complicated. I don\u2019t have a snippet, I apologize but you can search for \u201c<code>qt dbus example</code>\u201d. </p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 9984904, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WO4WDWnWAEU/AAAAAAAAAAI/AAAAAAAAAAc/JaD0Bw0uaOE/photo.jpg?sz=128", "display_name": "Thach Pham", "link": "https://stackoverflow.com/users/9984904/thach-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1573727134, "last_edit_date": 1573727134, "creation_date": 1573665043, "answer_id": 58842266, "question_id": 58838412, "link": "https://stackoverflow.com/questions/58838412/how-to-wait-for-a-value-with-timeout/58842266#58842266", "title": "How to wait for a value with timeout", "body": "<p>About the first requirement, server waits for a response with a timeout.<br>\nHave you tried <a href=\"http://man7.org/linux/man-pages/man2/select.2.html\" rel=\"nofollow noreferrer\"><code>select()</code></a> or <a href=\"http://man7.org/linux/man-pages/man2/poll.2.html\" rel=\"nofollow noreferrer\"><code>poll()</code></a>. They can help us to monitor the socket connection between server and client in a period.<br>\nOr we can use <a href=\"http://man7.org/linux/man-pages/man7/signal.7.html\" rel=\"nofollow noreferrer\"><code>signal()</code></a> and <a href=\"http://man7.org/linux/man-pages/man2/alarm.2.html\" rel=\"nofollow noreferrer\"><code>alarm()</code></a>, to check the response after a few seconds.<br>\nIn Bekerley API, combine <a href=\"https://linux.die.net/man/3/setsockopt\" rel=\"nofollow noreferrer\"><code>setsockopt()</code></a> with <code>SO_RCVTIMEO</code>, <code>SO_SNDTIMEO</code> can also set the timeout for the request.<br>\nI'm not sure about the library you are implementing, but I hope it has any similar functions.</p>\n\n<p>The second requirement, you are waiting for expected value for a duration.<br>\nI think <code>condition variable</code> is a good solution for this.</p>\n"}, {"tags": [], "owner": {"reputation": 7679, "user_id": 896012, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/05779413dbb3915fa5b2f3ed82d66007?s=128&d=identicon&r=PG", "display_name": "Gupta", "link": "https://stackoverflow.com/users/896012/gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1573749342, "last_edit_date": 1573749342, "creation_date": 1573749003, "answer_id": 58861506, "question_id": 58838412, "link": "https://stackoverflow.com/questions/58838412/how-to-wait-for-a-value-with-timeout/58861506#58861506", "title": "How to wait for a value with timeout", "body": "<p>Why not using <code>boost::thread</code> with a <code>timed_join</code>?</p>\n\n<pre><code>   boost::thread server_thread(::server_checker_method, arg1, arg2, arg3);\n   if (server_thread.timed_join(boost::posix_time::milliseconds(1000))) // wait for 1s\n   {\n      // Expected value found in the server in less than 1s\n   }\n   else\n   {\n      // Checking expected value took more than 1s, timeout !!!\n   }\n</code></pre>\n\n<p>You can put your checking mechanism in the <code>server_checker_method</code> and return if the expected values are OK. Otherwise, iterate over the loop until the timeout reaches. </p>\n"}], "owner": {"reputation": 43, "user_id": 12367019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd92e884428a103f606209642d9ba6a?s=128&d=identicon&r=PG&f=1", "display_name": "YopAndMail", "link": "https://stackoverflow.com/users/12367019/yopandmail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1573815364, "creation_date": 1573652320, "last_edit_date": 1573815364, "question_id": 58838412, "link": "https://stackoverflow.com/questions/58838412/how-to-wait-for-a-value-with-timeout", "title": "How to wait for a value with timeout", "body": "<p>I have a client/server program written in C++. I want to check the client response <strong>(an attribute of a C++ object)</strong> through a command send by the server, with a timeout if no response.</p>\n\n<p>I am waiting for an expected value during some seconds. If the expected value is not observed, I need to return with a timeout. I was thinking about a thread and a poll to check the expected value in an specific time interval.</p>\n\n<p>I wonder if C++11/14 features - <code>std::promise, std::future</code>, <code>std::condition_variable</code> or something else -  can do it more easily for this case. The inconvenient i see about it is that i have to notice each changing value with a notify.</p>\n\n<p>Well, i need some advice.</p>\n"}, {"tags": ["c++", "gcc"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1573652556, "post_id": 58838387, "comment_id": 103951207, "body": "<i>I get a return value of 0 because the compiler optimized result for &quot;tmp&quot; differs from the runtime result</i> -- I would have thought that you received a <code>0</code> due to floating-point inaccuracies."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1573652718, "post_id": 58838387, "comment_id": 103951300, "body": "GCC does all the calculations at compile time: <a href=\"https://godbolt.org/z/Ymg26N\" rel=\"nofollow noreferrer\">godbolt.org/z/Ymg26N</a>. Even without <code>-ffast-math</code>, the outcome is the very same."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "edited": false, "score": 3, "creation_date": 1573652828, "post_id": 58838387, "comment_id": 103951355, "body": "For the not so math-savvy among us, what would be your <b>expected</b> return value from <code>diff_double</code>, and what is your <b>observed</b> return value from the function? Just so we&#39;re on the same page."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1573653824, "post_id": 58838387, "comment_id": 103951918, "body": "The dupe is very generic and I&#39;m not sure it really applies. In any case: Yes, this is valid behavior, mainly because the C++ standard places almost no requirements on the floating point implementation. This excellent article covers this (heading &quot;Transcendentals&quot;) and many other pains regarding practical floating point math and its (lack of) guarantees: <a href=\"https://randomascii.wordpress.com/2013/07/16/floating-point-determinism/\" rel=\"nofollow noreferrer\">randomascii.wordpress.com/2013/07/16/floating-point-determin&zwnj;&#8203;ism</a>"}, {"owner": {"reputation": 51, "user_id": 6821362, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-04E69W-ldAA/AAAAAAAAAAI/AAAAAAAAAHA/Nalxh2ieiTw/photo.jpg?sz=128", "display_name": "Thomas m", "link": "https://stackoverflow.com/users/6821362/thomas-m"}, "edited": false, "score": 0, "creation_date": 1573717913, "post_id": 58838387, "comment_id": 103975996, "body": "Added a godbolt example. -ffast-math does not make a difference, cross compile make the difference. Godbold: <a href=\"https://godbolt.org/z/g2sev7\" rel=\"nofollow noreferrer\">godbolt.org/z/g2sev7</a>"}], "owner": {"reputation": 51, "user_id": 6821362, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-04E69W-ldAA/AAAAAAAAAAI/AAAAAAAAAHA/Nalxh2ieiTw/photo.jpg?sz=128", "display_name": "Thomas m", "link": "https://stackoverflow.com/users/6821362/thomas-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "closed_date": 1573652464, "answer_count": 0, "score": 5, "last_activity_date": 1573717834, "creation_date": 1573652207, "last_edit_date": 1573717834, "question_id": 58838387, "link": "https://stackoverflow.com/questions/58838387/c-compile-time-result-differs-from-run-time-result-bug-or-valid-behavior", "closed_reason": "Duplicate", "title": "C++ compile time result differs from run time result. Bug or valid behavior", "body": "<p>I am doing a x86 cross compile using gcc 8.3.0 with -ffast-math enabled of the following code:  </p>\n\n<pre><code>#include &lt;cmath&gt;\n\ndouble diff_double(double in)\n{\n  auto tmp = 10 * std::log10(1. * 15e3);\n  return tmp - (10 * std::log10(1. * in));\n}\n\nint main()\n{\n    return diff_double(15e3) == 0.;\n}\n</code></pre>\n\n<p>On execution, I get a return value of <strong>0</strong> because the compiler optimized result for \"tmp\" differs from the runtime result.</p>\n\n<p>Is this a valid behavior?</p>\n\n<p>Godbold:\n<a href=\"https://godbolt.org/z/g2sev7\" rel=\"nofollow noreferrer\">https://godbolt.org/z/g2sev7</a></p>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["c++", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 369, "user_id": 3476183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a7dda5864aa1b7c18ec44452576bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Albjenow", "link": "https://stackoverflow.com/users/3476183/albjenow"}, "edited": false, "score": 4, "creation_date": 1573651933, "post_id": 58838227, "comment_id": 103950809, "body": "Only the last parameter can be an expanded variadic template parameter pack. You could wrap the inputs into an <code>std::tuple</code>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1573654590, "post_id": 58838227, "comment_id": 103952377, "body": "&quot;a function that accepts an arbitrary number of in and out parameters&quot; and does <i>what</i>  with them?"}, {"owner": {"reputation": 663, "user_id": 5464232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17d9f6aefa9757ec30e36bffc7c0b43d?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Pauli", "link": "https://stackoverflow.com/users/5464232/daniel-pauli"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1573719727, "post_id": 58838227, "comment_id": 103976754, "body": "@Caleth The function needs to convert the parameters to some variant types. It is intended as a thin wrapper for some C library function."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1573723428, "post_id": 58838227, "comment_id": 103978698, "body": "so why not <code>template&lt;typename... Params&gt; void foo(Params... params) { &#47;* other stuff *&#47; c_function(params...); }</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1573654307, "post_id": 58838418, "comment_id": 103952196, "body": "I would say then that output parameter could also be in tuple"}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 1, "last_activity_date": 1573652336, "creation_date": 1573652336, "answer_id": 58838418, "question_id": 58838227, "link": "https://stackoverflow.com/questions/58838227/how-to-use-separate-parameter-packs-for-in-and-out-parameters/58838418#58838418", "title": "How to use separate parameter packs for in and out parameters?", "body": "<p>It's impossible to tell how many of the arguments belong to which variadic pack; hence deduction of variadic packs is allowed only when it's the last argument.</p>\n\n<p>You can instead wrap <code>inputs</code> into a <code>std::tuple</code> like this</p>\n\n<pre><code>template&lt;typename... Inputs, typename... Outputs&gt;\nvoid foo(const std::tuple&lt;Inputs...&gt;&amp; inputs, Outputs*... outputs)\n{\n    // ...\n}\n\nint main() {\n    int o1 = 0;\n    double o2 = 0.0;\n    bool o3 = false;\n\n    foo(std::tuple(1, 2), &amp;o1, &amp;o2, &amp;o3);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1573655549, "post_id": 58838419, "comment_id": 103952977, "body": "@quen fixed I think"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 6, "last_activity_date": 1573655538, "last_edit_date": 1573655538, "creation_date": 1573652344, "answer_id": 58838419, "question_id": 58838227, "link": "https://stackoverflow.com/questions/58838227/how-to-use-separate-parameter-packs-for-in-and-out-parameters/58838419#58838419", "title": "How to use separate parameter packs for in and out parameters?", "body": "<pre><code>auto foo = []( auto... Inputs ){\n  return [=](auto*... Outputs){\n    return 7;\n  };\n};\n</code></pre>\n\n<p>Now, <code>foo(3,4,5)(&amp;a,&amp;b,&amp;c)</code> does what you want.</p>\n"}, {"comments": [{"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1573677728, "post_id": 58839070, "comment_id": 103964168, "body": "What if output parameters are e.g. <code>std::vector</code>s? Using output parameters can save some memory allocations. Is there a better alternative?"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": false, "score": 1, "last_activity_date": 1573655964, "last_edit_date": 1573655964, "creation_date": 1573654396, "answer_id": 58839070, "question_id": 58838227, "link": "https://stackoverflow.com/questions/58838227/how-to-use-separate-parameter-packs-for-in-and-out-parameters/58839070#58839070", "title": "How to use separate parameter packs for in and out parameters?", "body": "<p>Don't use output parameters</p>\n\n<pre><code>template&lt;typename... Inputs, typename... Outputs&gt;\nstd::tuple&lt;Outputs...&gt; foo_impl(Inputs... inputs)\n{\n    return { /* ??? */ };\n}\n\ntemplate&lt;typename... Inputs&gt;\nstd::tuple&lt;determine_outputs...&gt; foo(Inputs&amp;&amp;... inputs)\n{\n    return foo_impl&lt;Inputs..., determine_outputs...&gt;(std::forward&lt;Inputs&gt;(inputs)...);\n}\n\nuint32 o1 = 0;\ndouble o2 = 0.0;\nbool o3 = false;\n\nstd::tie(o1, o2, o3) = foo(1, 2);\n</code></pre>\n\n<p>or even better, with C++17</p>\n\n<pre><code>auto [o1, o2, o3] = foo(1, 2);\n</code></pre>\n\n<p>With no context of how <code>Outputs...</code> is to be determined, you may have to pass a type list parameter too.</p>\n\n<pre><code>template&lt;typename... T&gt;\nstruct type_list {};\n\ntemplate&lt;typename... Inputs, typename... Outputs&gt;\nstd::tuple&lt;Outputs...&gt; foo(type_list&lt;Outputs...&gt;, Inputs... inputs)\n{\n    return { /* ??? */ };\n}\n\nauto [o1, o2, o3] = foo(type_list&lt;uint32, double, bool&gt;{}, 1, 2);\n</code></pre>\n"}], "owner": {"reputation": 663, "user_id": 5464232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17d9f6aefa9757ec30e36bffc7c0b43d?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Pauli", "link": "https://stackoverflow.com/users/5464232/daniel-pauli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1573655964, "creation_date": 1573651728, "last_edit_date": 1573653169, "question_id": 58838227, "link": "https://stackoverflow.com/questions/58838227/how-to-use-separate-parameter-packs-for-in-and-out-parameters", "title": "How to use separate parameter packs for in and out parameters?", "body": "<p>I would like to have a function that accepts an arbitrary number of in and out parameters:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename... Inputs, typename... Outputs&gt;\nvoid foo(Inputs... inputs, Outputs*... outputs)\n{\n   // ...\n}\n</code></pre>\n\n<p>Example call:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>uint32 o1 = 0;\ndouble o2 = 0.0;\nbool o3 = false;\n\nfoo(1, 2, &amp;o1, &amp;o2, &amp;o3);\n</code></pre>\n\n<p>However, this does not compile, as the compiler attempts to match all parameters into the second parameter pack. I hoped that it could use the <code>*</code> as indication where to split the two packs.</p>\n\n<p>Any hints how this could be resolved?</p>\n"}, {"tags": ["c++", "memory", "smart-pointers", "return-value-optimization"], "comments": [{"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 2, "creation_date": 1573651802, "post_id": 58838172, "comment_id": 103950719, "body": "If <code>foo</code> does not own an object, <code>foo.get()</code> returns <code>nullptr</code>. <code>return foo ? foo.get() : nullptr;</code> thus does not make any sense, since you can simply write <code>return foo.get();</code> instead."}, {"owner": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1573652127, "post_id": 58838172, "comment_id": 103950927, "body": "Also, note that <code>std::move(foo.get())</code> does not make any sense either, since <code>foo.get()</code> returns a pointer by value. You are just making an rvalue from an rvalue. Moreover, copying and moving the contents of fundamental types, such as pointers, have the same effect (there are no copy/move constructors/assignment operators involved)."}, {"owner": {"reputation": 85, "user_id": 12127171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ca7c9c42157b750c31927918b4ef1?s=128&d=identicon&r=PG&f=1", "display_name": "BrodaJarek3", "link": "https://stackoverflow.com/users/12127171/brodajarek3"}, "reply_to_user": {"reputation": 18020, "user_id": 580083, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/085edb5b64d5db3362d784bd9d35f99c?s=128&d=identicon&r=PG", "display_name": "Daniel Langr", "link": "https://stackoverflow.com/users/580083/daniel-langr"}, "edited": false, "score": 0, "creation_date": 1573652626, "post_id": 58838172, "comment_id": 103951250, "body": "Yes, that makes sense. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 85, "user_id": 12127171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ca7c9c42157b750c31927918b4ef1?s=128&d=identicon&r=PG&f=1", "display_name": "BrodaJarek3", "link": "https://stackoverflow.com/users/12127171/brodajarek3"}, "edited": false, "score": 0, "creation_date": 1573651912, "post_id": 58838263, "comment_id": 103950792, "body": "@BrodaJarek3 Same thing.  If it&#39;s <code>nullptr</code>, you can just return it."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1573652210, "post_id": 58838263, "comment_id": 103950979, "body": "You wouldn&#39;t write <code>if (x == 0) return 0; else return x;</code> for an integer, so why do it for a pointer? The video is about returning one of two different objects, not returning one object which may take different values."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 2, "last_activity_date": 1573651828, "creation_date": 1573651828, "answer_id": 58838263, "question_id": 58838172, "link": "https://stackoverflow.com/questions/58838172/how-to-return-an-object-pointer-with-conditional-expression/58838263#58838263", "title": "How to return an object pointer with conditional expression?", "body": "<p>You don't need any sort of branching.  You can just use</p>\n\n<pre><code>Foo* getFoo()\n{\n    return foo.get();\n}\n</code></pre>\n\n<p>This works because <a href=\"https://en.cppreference.com/w/cpp/memory/unique_ptr/get\" rel=\"nofollow noreferrer\"><code>get</code></a> will return <code>nullptr</code> if <code>foo</code> holds a <code>nullptr</code>.</p>\n"}], "owner": {"reputation": 85, "user_id": 12127171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6ca7c9c42157b750c31927918b4ef1?s=128&d=identicon&r=PG&f=1", "display_name": "BrodaJarek3", "link": "https://stackoverflow.com/users/12127171/brodajarek3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58838263, "answer_count": 1, "score": 0, "last_activity_date": 1573652122, "creation_date": 1573651555, "question_id": 58838172, "link": "https://stackoverflow.com/questions/58838172/how-to-return-an-object-pointer-with-conditional-expression", "title": "How to return an object pointer with conditional expression?", "body": "<p>According to <a href=\"https://www.youtube.com/watch?v=LFv7XwgsdLY&amp;t=1620s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=LFv7XwgsdLY&amp;t=1620s</a> 25:40 </p>\n\n<p><code>class Foo</code> should be retured 2 ways:</p>\n\n<ul>\n<li>with if</li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if(condition) \n   return foo1 \nelse \n    return foo2;\n</code></pre>\n\n<ul>\n<li>with conditional expression</li>\n</ul>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>return condition ? food(foo1) : std::move(foo2);\n</code></pre>\n\n<p>what if <code>Foo</code> is a <code>unique_ptr</code> and I want to check if <code>Foo</code> is not nullptr then return <code>foo</code> and if it is a nullptr return <code>nullptr</code>. Lets forget for now that someone might want to delete that pointer.</p>\n\n<p>which way is the proper one?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Foo* getFoo()\n{\n    //get because foo is a unique ptr\n    return foo ? foo.get() : nullptr;\n}\n</code></pre>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>Foo* getFoo()\n{\n    return foo ? std::move(foo.get()) : nullptr;\n}\n</code></pre>\n"}, {"tags": ["c++", "enums"], "comments": [{"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1573653646, "post_id": 58838154, "comment_id": 103951816, "body": "Have you tried to <code>std::unordered_map&lt;std::string,DisplayLayer&gt;</code> ?"}, {"owner": {"reputation": 415, "user_id": 4310651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKOwp.jpg?s=128&g=1", "display_name": "Malov Vladimir", "link": "https://stackoverflow.com/users/4310651/malov-vladimir"}, "reply_to_user": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 0, "creation_date": 1573654784, "post_id": 58838154, "comment_id": 103952523, "body": "No, I haven&#39;t tried any approaches yet. But conceptually it seems like using std::map with O(1) complexity."}, {"owner": {"reputation": 2354, "user_id": 9428851, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MBhDff_bdY0/AAAAAAAAAAI/AAAAAAAACAY/lx7DUTjS350/photo.jpg?sz=128", "display_name": "Victor Gubin", "link": "https://stackoverflow.com/users/9428851/victor-gubin"}, "edited": false, "score": 1, "creation_date": 1573655587, "post_id": 58838154, "comment_id": 103953005, "body": "yep, when std::map (red-black tree) have <code>O(log n)</code> complexity."}], "owner": {"reputation": 415, "user_id": 4310651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKOwp.jpg?s=128&g=1", "display_name": "Malov Vladimir", "link": "https://stackoverflow.com/users/4310651/malov-vladimir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573651496, "creation_date": 1573651496, "question_id": 58838154, "link": "https://stackoverflow.com/questions/58838154/take-out-enum-to-configuration-file", "title": "Take out enum to configuration file", "body": "<p>For providing correct drawing order I use simple enumerator:</p>\n\n<pre><code>enum class DisplayLayer\n{\n    background,\n    // Below a lot of different layers dedicated to particular item types\n    itemTypeA,\n    itemTypeB,\n    //..\n    itemTypeZ,\n    effects\n}\n</code></pre>\n\n<p>Each drawing object know his own <code>DisplayLayer</code> (sometimes more than one) and before drawing, all objects collected in <code>std::vector</code> and sorted in order of <code>DisplayLayer</code> and additional attributes.\nThis simple mechanism worked properly, but rarely it demands some updates: adding new levels, remove some old ones and reordered them. When layers count was moderate it was easy to check all relative drawings, but now it contains 50+ layers and after each change drawing should be checked carefully. If QA missed some cases it leads to drawing issues. No way to fixed it with patches, only rebuild executable file.</p>\n\n<p>Now I think to take out <code>DisplayLayer</code> enum to config file, like <code>.xml</code> or <code>.json</code>. It will allow making patches without rebuilding binary file and additional flexibility in debug time.\nConfig may contain simply key-value pairs.</p>\n\n<p>Question is which data structures I should use for better solution and performance.\nFor example, is it a good idea to keep layer Ids as set of string constants, like this:</p>\n\n<pre><code>const std::string DISP_LAYER_BACKGROUND = \"background\";\nconst std::string DISP_LAYER_ITEM_TYPE_A = \"itemTypeA\";\nconst std::string DISP_LAYER_ITEM_TYPE_B = \"itemTypeB\";\n...\n</code></pre>\n\n<p>And in config parser consistently use them to extract sort values form configuration file and fill <code>std::map&lt;std::string, int&gt;</code>, where key is <code>LayerId</code> and value is corresponded sort layer's value.\nIn this case each drawing objects would consist <code>std::string</code> data field instead of <code>DisplayLayer</code>, but before drawing it would demand a lot of appeals to our map for converting <code>layerName</code> to layer sorting order.</p>\n\n<p>Thanks in advance for every idea how take out enumerator from code to config file and solve my particular problem.</p>\n"}, {"tags": ["c++", "floating-point", "precision"], "comments": [{"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "edited": false, "score": 1, "creation_date": 1573651630, "post_id": 58838104, "comment_id": 103950614, "body": "Speed question is easy to answer. Benchmark it."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1573651684, "post_id": 58838104, "comment_id": 103950654, "body": "Is speed more important than accuracy?"}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 0, "creation_date": 1573652678, "post_id": 58838104, "comment_id": 103951278, "body": "Not quite a duplicate, but very similar question: <a href=\"https://stackoverflow.com/q/12272977/1332041\">sum of series using float</a>"}, {"owner": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 4, "creation_date": 1573653084, "post_id": 58838104, "comment_id": 103951483, "body": "You may have to pay attention to negative numbers."}, {"owner": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "reply_to_user": {"reputation": 48092, "user_id": 136208, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a30f566f1b7c9ae44cf245138850ba4?s=128&d=identicon&r=PG", "display_name": "AProgrammer", "link": "https://stackoverflow.com/users/136208/aprogrammer"}, "edited": false, "score": 0, "creation_date": 1573653111, "post_id": 58838104, "comment_id": 103951498, "body": "@AProgrammer: fortunately I have only positive"}, {"owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "edited": false, "score": 0, "creation_date": 1573653144, "post_id": 58838104, "comment_id": 103951510, "body": "An example that demonstrates: <a href=\"https://coliru.stacked-crooked.com/a/3939eb8830558450\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/3939eb8830558450</a>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 3, "creation_date": 1573653447, "post_id": 58838104, "comment_id": 103951692, "body": "If you actually care about precision to high degrees, check out <a href=\"https://en.wikipedia.org/wiki/Kahan_summation_algorithm\" rel=\"nofollow noreferrer\">Kahan summation</a>."}, {"owner": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "edited": false, "score": 0, "creation_date": 1573738856, "post_id": 58838104, "comment_id": 103987549, "body": "Related: <a href=\"https://stackoverflow.com/questions/1950878/c-for-loop-indexing-is-forward-indexing-faster-in-new-cpus\" title=\"c for loop indexing is forward indexing faster in new cpus\">stackoverflow.com/questions/1950878/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 848, "user_id": 9815377, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_ix-HrP8dks/AAAAAAAAAAI/AAAAAAAAAGQ/EsjH8FtkC2k/photo.jpg?sz=128", "display_name": "sephiroth", "link": "https://stackoverflow.com/users/9815377/sephiroth"}, "edited": false, "score": 0, "creation_date": 1573652873, "post_id": 58838431, "comment_id": 103951374, "body": "Correct me if I&#39;m wrong, but I think this is even more efficient than the foreach statement OP is using, as it introduces an overhead. YSC is right about the numerical stability part, tho."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 848, "user_id": 9815377, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_ix-HrP8dks/AAAAAAAAAAI/AAAAAAAAAGQ/EsjH8FtkC2k/photo.jpg?sz=128", "display_name": "sephiroth", "link": "https://stackoverflow.com/users/9815377/sephiroth"}, "edited": false, "score": 4, "creation_date": 1573652916, "post_id": 58838431, "comment_id": 103951396, "body": "@sephiroth No, any half-decent compiler won&#39;t really care whether you wrote a range-for or an iterator for."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1573652992, "post_id": 58838431, "comment_id": 103951437, "body": "Real-world performance is decidedly not guaranteed to be the same, due to caches/prefetching. It&#39;s reasonable for the OP to be wary of that."}], "tags": [], "owner": {"reputation": 415, "user_id": 4310651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKOwp.jpg?s=128&g=1", "display_name": "Malov Vladimir", "link": "https://stackoverflow.com/users/4310651/malov-vladimir"}, "is_accepted": false, "score": 2, "last_activity_date": 1573655095, "last_edit_date": 1573655095, "creation_date": 1573652381, "answer_id": 58838431, "question_id": 58838104, "link": "https://stackoverflow.com/questions/58838104/efficient-stable-sum-of-ordered-numbers/58838431#58838431", "title": "Efficient stable sum of ordered numbers", "body": "<p>For this purpose you can use reverse iterator without any transpositions in your <code>std::vector&lt;float&gt; vec</code>:</p>\n\n<pre><code>float sum{0.f};\nfor (auto rIt = vec.rbegin(); rIt!= vec.rend(); ++rIt)\n{\n    sum += *rit;\n}\n</code></pre>\n\n<p>Or do the same job using standard algortithm:</p>\n\n<pre><code>float sum = std::accumulate(vec.crbegin(), vec.crend(), 0.f);\n</code></pre>\n\n<p>Performance must be the same, changed only bypass direction of your vector</p>\n"}, {"comments": [{"owner": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "edited": false, "score": 2, "creation_date": 1573653249, "post_id": 58838473, "comment_id": 103951583, "body": "Can you clarify: in this context &quot;sequential access&quot; means forward, backward, or both?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "reply_to_user": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "edited": false, "score": 1, "creation_date": 1573653690, "post_id": 58838473, "comment_id": 103951842, "body": "@RuggeroTurra I cannot unless I can find a source, and I&#39;m not in the mood to read CPU datasheets right now."}, {"owner": {"reputation": 2050, "user_id": 3210837, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d19541ed89cb1b8227a255188696700b?s=128&d=identicon&r=PG&f=1", "display_name": "Toothbrush", "link": "https://stackoverflow.com/users/3210837/toothbrush"}, "reply_to_user": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "edited": false, "score": 0, "creation_date": 1573655551, "post_id": 58838473, "comment_id": 103952981, "body": "@RuggeroTurra Usually sequential access would mean forwards. All semi-decent memory prefetchers catch forward sequential access."}, {"owner": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "reply_to_user": {"reputation": 2050, "user_id": 3210837, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d19541ed89cb1b8227a255188696700b?s=128&d=identicon&r=PG&f=1", "display_name": "Toothbrush", "link": "https://stackoverflow.com/users/3210837/toothbrush"}, "edited": false, "score": 0, "creation_date": 1573655904, "post_id": 58838473, "comment_id": 103953174, "body": "@Toothbrush, thanks. So, if I loop backward, in principle, it can be a performance issue"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1573663209, "post_id": 58838473, "comment_id": 103957505, "body": "In principle, on at least some hardware, if the whole vector is not <i>already</i> in L1 cache."}, {"owner": {"reputation": 2050, "user_id": 3210837, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d19541ed89cb1b8227a255188696700b?s=128&d=identicon&r=PG&f=1", "display_name": "Toothbrush", "link": "https://stackoverflow.com/users/3210837/toothbrush"}, "reply_to_user": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "edited": false, "score": 0, "creation_date": 1573739721, "post_id": 58838473, "comment_id": 103988040, "body": "@RuggeroTurra Yes, as <code>@Useless</code> says, at least on some hardware. However, unless you have a very large dataset, it will usually fit in the caches and so you won&#39;t really notice it."}], "tags": [], "owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "is_accepted": false, "score": 2, "last_activity_date": 1573653183, "last_edit_date": 1573653183, "creation_date": 1573652560, "answer_id": 58838473, "question_id": 58838104, "link": "https://stackoverflow.com/questions/58838104/efficient-stable-sum-of-ordered-numbers/58838473#58838473", "title": "Efficient stable sum of ordered numbers", "body": "<blockquote>\n  <p>The easiest solution would be to traverse the vector in reverse order. My question is: is that efficient as well as the forward case? I will have more cache missing?</p>\n</blockquote>\n\n<p>Yes it is efficient. Branch prediction and smart cache strategy from your hardware is tuned for sequential access. You can safely accumulate your vector:</p>\n\n<pre><code>#include &lt;numeric&gt;\n\nauto const sum = std::accumulate(crbegin(v), crend(v), 0.f);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": true, "score": 3, "last_activity_date": 1573653144, "creation_date": 1573653144, "answer_id": 58838650, "question_id": 58838104, "link": "https://stackoverflow.com/questions/58838104/efficient-stable-sum-of-ordered-numbers/58838650#58838650", "title": "Efficient stable sum of ordered numbers", "body": "<blockquote>\n  <p>I guess I can have some numerical stability problem</p>\n</blockquote>\n\n<p>So test for it. Currently you have a hypothetical problem, which is to say, no problem at all.</p>\n\n<p>If you test, and the hypothetical materializes into an <em>actual</em> problem, then you should worry about actually fixing it.</p>\n\n<p>That is - floating-point precision <em>can</em> cause issues, but you can confirm whether it really does for your data, before prioritizing that over everything else.</p>\n\n<blockquote>\n  <p>...  I will have more cache missing?</p>\n</blockquote>\n\n<p>One thousand floats is 4Kb - it'll fit in cache on a modern mass-market system (if you have another platform in mind, tell us what it is).</p>\n\n<p>The only risk is that the prefetcher won't help you when iterating backwards, but of course your vector may <em>already</em> be in cache. You can't really determine this until you profile in the context of your full program, so there's no use worrying about it until you have a full program.</p>\n\n<blockquote>\n  <p>Is there any other smart solution?</p>\n</blockquote>\n\n<p>Don't worry about things that might become problems, until they actually become problems. At most it's worth noting possible issues, and structuring your code so that you can replace the simplest-possible solution with a carefully-optimized one later, without re-writing everything else.</p>\n"}, {"comments": [{"owner": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "edited": false, "score": 0, "creation_date": 1573653370, "post_id": 58838653, "comment_id": 103951649, "body": "that website is super cool. Just to be sure: you are not timing the random generation, right?"}, {"owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "reply_to_user": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "edited": false, "score": 0, "creation_date": 1573653679, "post_id": 58838653, "comment_id": 103951834, "body": "No, only the part in the <code>state</code> loop is timed."}], "tags": [], "owner": {"reputation": 6751, "user_id": 1417063, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Mwy5e.jpg?s=128&g=1", "display_name": "Davide Spataro", "link": "https://stackoverflow.com/users/1417063/davide-spataro"}, "is_accepted": false, "score": 5, "last_activity_date": 1573653476, "last_edit_date": 1573653476, "creation_date": 1573653151, "answer_id": 58838653, "question_id": 58838104, "link": "https://stackoverflow.com/questions/58838104/efficient-stable-sum-of-ordered-numbers/58838653#58838653", "title": "Efficient stable sum of ordered numbers", "body": "<p>I <a href=\"http://quick-bench.com/TWzC3M04kknDJjO2eBmOGi4X0Qg\" rel=\"nofollow noreferrer\">bench-marked</a> your use case and the results (see attached image) point to the direction that it does not make any performance difference to loop forward or backward. </p>\n\n<p>You might want to measure on your hardware + compiler as well.</p>\n\n<hr>\n\n<p>Using STL to perform the sum it's as fast as manual looping over data but much more expressive.</p>\n\n<p>use the following for reverse accumulation:</p>\n\n<pre><code>std::accumulate(rbegin(data), rend(data), 0.0f);\n</code></pre>\n\n<p>while for forward accumulation:</p>\n\n<pre><code>std::accumulate(begin(data), end(data), 0.0f);\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/k8QV4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k8QV4.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1580393371, "last_edit_date": 1580393371, "creation_date": 1573655063, "answer_id": 58839254, "question_id": 58838104, "link": "https://stackoverflow.com/questions/58838104/efficient-stable-sum-of-ordered-numbers/58839254#58839254", "title": "Efficient stable sum of ordered numbers", "body": "<p>If by numerical stability you mean accuracy, then yes, you may end up with accuracy issues. Depending on the ratio of the largest to the smallest values, and your requirments for accuracy in the result, this may or may not be a problem.</p>\n\n<p>If you do want to have high accuracy, then consider <a href=\"https://en.wikipedia.org/wiki/Kahan_summation_algorithm\" rel=\"nofollow noreferrer\">Kahan summation</a> - this uses an extra float for error compensation. There is also <a href=\"https://en.wikipedia.org/wiki/Pairwise_summation\" rel=\"nofollow noreferrer\">pairwise summation</a>. </p>\n\n<p>For detailed analysis of the tradeoff between accuracy and time, see <a href=\"https://hal.archives-ouvertes.fr/hal-00477511/document\" rel=\"nofollow noreferrer\">this article</a>.</p>\n\n<p>UPDATE for C++17:</p>\n\n<p>A few of the other answers mention <code>std::accumulate</code>. Since C++17 there are <a href=\"https://en.cppreference.com/w/cpp/algorithm/execution_policy_tag\" rel=\"nofollow noreferrer\">execution policies</a> which allow algorithms to be parallelized.</p>\n\n<p>For instance</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;execution&gt;\n#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n\nint main()\n{  \n   std::vector&lt;double&gt; input{0.1, 0.9, 0.2, 0.8, 0.3, 0.7, 0.4, 0.6, 0.5};\n\n   double reduceResult = std::reduce(std::execution::par, std::begin(input), std::end(input));\n\n   std:: cout &lt;&lt; \"reduceResult \" &lt;&lt; reduceResult &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>This should make summing large datasets faster at the cost of nondeterministic rounding errors (I'm assuming that the user won't be able to determine the thread partitioning).</p>\n"}], "owner": {"reputation": 14345, "user_id": 238671, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc17c0a0eb63ef5ae4000782b5bb74d1?s=128&d=identicon&r=PG", "display_name": "Ruggero Turra", "link": "https://stackoverflow.com/users/238671/ruggero-turra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 58838650, "answer_count": 5, "score": 12, "last_activity_date": 1580393371, "creation_date": 1573651322, "last_edit_date": 1573653127, "question_id": 58838104, "link": "https://stackoverflow.com/questions/58838104/efficient-stable-sum-of-ordered-numbers", "title": "Efficient stable sum of ordered numbers", "body": "<p>I have a quite long list of floating point positive numbers (<code>std::vector&lt;float&gt;</code>, size ~1000). The numbers are sorted in decreasing ordering. If I sum them following the order:</p>\n\n<pre><code>for (auto v : vec) { sum += v; }\n</code></pre>\n\n<p>I guess I can have some numerical stability problem, since close to the end of the vector <code>sum</code> will be much larger than <code>v</code>. The easiest solution would be to traverse the vector in reverse order. My question is: is that efficient as well as the forward case? I will have more cache missing?</p>\n\n<p>Is there any other smart solution?</p>\n"}, {"tags": ["android", "c++", "cmake", "android-ndk", "ninja"], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 5165107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759ba9b349d471a8f55e9a9fc5d42719?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWithVikas", "link": "https://stackoverflow.com/users/5165107/codewithvikas"}, "edited": false, "score": 1, "creation_date": 1573664989, "post_id": 58841486, "comment_id": 103958421, "body": "awesome finding. Thank you so much. You saved my hours. Happy Coding."}], "tags": [], "owner": {"reputation": 11727, "user_id": 3987854, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/OV64v.jpg?s=128&g=1", "display_name": "squareskittles", "link": "https://stackoverflow.com/users/3987854/squareskittles"}, "is_accepted": true, "score": 1, "last_activity_date": 1573662549, "creation_date": 1573662549, "answer_id": 58841486, "question_id": 58837976, "link": "https://stackoverflow.com/questions/58837976/android-ndk-build-command-failed-undefined-reference-clang-error-linker-co/58841486#58841486", "title": "Android NDK.Build command failed. Undefined reference. clang++: error: linker command failed with exit code 1", "body": "<p>The <code>mycpp-lib</code> target name is not a variable defined with the <code>set()</code> command, so expanding it with <code>${mycpp-lib}</code> yields an empty string. When using <a href=\"https://cmake.org/cmake/help/latest/command/target_link_libraries.html\" rel=\"nofollow noreferrer\"><code>target_link_libraries()</code></a>, you can simply put the <strong>target name</strong> (without <code>${}</code>) when linking previously-defined targets:</p>\n\n<pre><code>target_link_libraries( # Specifies the target library.\n        native-lib\n        mycpp-lib\n        ${log-lib}\n        )\n</code></pre>\n\n<p>Note, for <code>log-lib</code> you <strong>do</strong> need the <code>${}</code> to expand the cached variable defined by the <a href=\"https://cmake.org/cmake/help/latest/command/find_library.html\" rel=\"nofollow noreferrer\"><code>find_library()</code></a> call.</p>\n"}], "owner": {"reputation": 532, "user_id": 5165107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/759ba9b349d471a8f55e9a9fc5d42719?s=128&d=identicon&r=PG&f=1", "display_name": "CodeWithVikas", "link": "https://stackoverflow.com/users/5165107/codewithvikas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 0, "accepted_answer_id": 58841486, "answer_count": 1, "score": 1, "last_activity_date": 1573664106, "creation_date": 1573650876, "last_edit_date": 1573664106, "question_id": 58837976, "link": "https://stackoverflow.com/questions/58837976/android-ndk-build-command-failed-undefined-reference-clang-error-linker-co", "title": "Android NDK.Build command failed. Undefined reference. clang++: error: linker command failed with exit code 1", "body": "<p>I am getting this error when I try to make separate libraries, with <code>add_library(mycpp-lib ...)</code> and <code>add_library(native-lib ...)</code>. When I build using single <code>add_library()</code>, I do not get the error.</p>\n\n<p><strong>Note:</strong> Both libraries (<strong>libmycpp-lib.so and libnative-lib.so</strong>) are generated successfully.</p>\n\n<p>This is the error I am getting:</p>\n\n<pre><code>Build command failed.\nError while executing process /Users/vk/Library/Android/sdk/cmake/3.10.2.4988404/bin/ninja with arguments {-C /Users/vk/Development/MyNativeApp1/app/.cxx/cmake/debug/arm64-v8a mycpp-lib native-lib}\nninja: Entering directory `/Users/vk/Development/MyNativeApp1/app/.cxx/cmake/debug/arm64-v8a'\n[1/2] Building CXX object CMakeFiles/native-lib.dir/src/main/cpp/native-lib.cpp.o\n[2/2] Linking CXX shared library ../../../../build/intermediates/cmake/debug/obj/arm64-v8a/libnative-lib.so\nFAILED: ../../../../build/intermediates/cmake/debug/obj/arm64-v8a/libnative-lib.so \n: &amp;&amp; /Users/vk/Library/Android/sdk/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/bin/clang++ --target=aarch64-none-linux-android21 --gcc-toolchain=/Users/vk/Library/Android/sdk/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64 --sysroot=/Users/vk/Library/Android/sdk/ndk-bundle/toolchains/llvm/prebuilt/darwin-x86_64/sysroot -fPIC -g -DANDROID -fdata-sections -ffunction-sections -funwind-tables -fstack-protector-strong -no-canonical-prefixes -fno-addrsig -Wa,--noexecstack -Wformat -Werror=format-security   -O0 -fno-limit-debug-info  -Wl,--exclude-libs,libgcc.a -Wl,--exclude-libs,libatomic.a -static-libstdc++ -Wl,--build-id -Wl,--warn-shared-textrel -Wl,--fatal-warnings -Wl,--no-undefined -Qunused-arguments -Wl,-z,noexecstack -shared -Wl,-soname,libnative-lib.so -o ../../../../build/intermediates/cmake/debug/obj/arm64-v8a/libnative-lib.so CMakeFiles/native-lib.dir/src/main/cpp/native-lib.cpp.o  -llog -latomic -lm &amp;&amp; :\nCMakeFiles/native-lib.dir/src/main/cpp/native-lib.cpp.o: In function `Java_vikas_example_com_mynativeapp1_MainActivity_stringFromJNI':\n/Users/vk/Development/MyNativeApp1/app/.cxx/cmake/debug/arm64-v8a/../../../../src/main/cpp/native-lib.cpp:14: undefined reference to `addtwo(int, int)'\n/Users/vk/Development/MyNativeApp1/app/.cxx/cmake/debug/arm64-v8a/../../../../src/main/cpp/native-lib.cpp:16: undefined reference to `array_pointer(int*, int)'\nclang++: error: linker command failed with exit code 1 (use -v to see invocation)\nninja: build stopped: subcommand failed.\n\n</code></pre>\n\n<p>Here is my CMakeLists.txt:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.4.1)\nset(CMAKE_VERBOSE_MAKEFILE on)\n\naux_source_directory(src/main/cpp/cpp_basic/airthmatic CPP_SRC)\naux_source_directory(src/main/cpp/cpp_basic CPP_BASIC_SRC)\n\ninclude_directories(src/main/cpp/cpp_basic/airthmatic)\ninclude_directories(src/main/cpp/cpp_basic)\n\nadd_library( # Sets the name of the library.\n        native-lib\n\n        # Sets the library as a shared library.\n        SHARED\n\n        # Provides a relative path to your source file(s).\n        src/main/cpp/native-lib.cpp\n        )\n\nfind_library( # Sets the name of the path variable.\n        log-lib\n\n        # Specifies the name of the NDK library that\n        # you want CMake to locate.\n        log)\n\nadd_library(mycpp-lib\n\n            SHARED\n\n        ${CPP_SRC}\n        ${CPP_BASIC_SRC})\n\n\ntarget_link_libraries( # Specifies the target library.\n        native-lib\n\n\n        ${mycpp-lib}\n\n        ${log-lib}\n\n        )\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1573650780, "post_id": 58837926, "comment_id": 103950128, "body": "Active member is only the last set."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1573650782, "post_id": 58837926, "comment_id": 103950130, "body": "You have only the <code>buckets</code> member active..."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1573650840, "post_id": 58837926, "comment_id": 103950165, "body": "Your code only activates <code>buckets</code>. The other member remains inactive."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1573651767, "post_id": 58837926, "comment_id": 103950700, "body": "You can&#39;t determine by observing the behaviour of a program that it <i>doesn&#39;t</i> have undefined behaviour."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1573651876, "post_id": 58837926, "comment_id": 103950773, "body": "If you want to access your struct members by indexing, overload the indexing operator. For iterating, add <code>begin()</code>and <code>end()</code> member functions."}, {"owner": {"reputation": 1, "user_id": 12366930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd08617e982d19841200d8359410258?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/12366930/rob"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1573654743, "post_id": 58837926, "comment_id": 103952491, "body": "@molbdnilo therefore my question, as I did not figure out whether I did or not"}, {"owner": {"reputation": 1, "user_id": 12366930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd08617e982d19841200d8359410258?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/12366930/rob"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1573655214, "post_id": 58837926, "comment_id": 103952789, "body": "@molbdnilo the implementation of such a iterator might be much code than the one above, but agreed it would definitely look nicer"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12366930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd08617e982d19841200d8359410258?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/12366930/rob"}, "edited": false, "score": 0, "creation_date": 1573654833, "post_id": 58837975, "comment_id": 103952563, "body": "sure I can, the code does <i>work</i> (maybe by using undefined behaviour)"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "reply_to_user": {"reputation": 1, "user_id": 12366930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd08617e982d19841200d8359410258?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/12366930/rob"}, "edited": false, "score": 0, "creation_date": 1573657673, "post_id": 58837975, "comment_id": 103954155, "body": "@rob If you have <a href=\"https://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow noreferrer\">undefined behavior</a> then the code doesn&#39;t &quot;work&quot;, it just <i>seems</i> like that. It can stop &quot;working&quot; when you least expect it. It can cause your hard-drive to be formatted, or crash your program, or it can even summon <a href=\"http://www.catb.org/jargon/html/N/nasal-demons.html\" rel=\"nofollow noreferrer\">nasal demons</a>."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1573650872, "creation_date": 1573650872, "answer_id": 58837975, "question_id": 58837926, "link": "https://stackoverflow.com/questions/58837926/is-it-safe-to-have-all-members-active-in-a-c-union/58837975#58837975", "title": "Is it safe to have all members active in a C++ union?", "body": "<p>You <em>can't</em> have all union members \"active\".</p>\n\n<p>Only the last written-to member is active.</p>\n\n<p>Any attempt to read from some other member leads to undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 12366930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd08617e982d19841200d8359410258?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/12366930/rob"}, "edited": false, "score": 0, "creation_date": 1573655052, "post_id": 58837993, "comment_id": 103952695, "body": "this is rather picky because it just explains that the term <i>all</i> includes zero or one element (which is definitely more precise then my question, which should have using <i>many</i> or <i>multiple</i> in first place)"}], "tags": [], "owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": false, "score": 0, "last_activity_date": 1573650959, "creation_date": 1573650959, "answer_id": 58837993, "question_id": 58837926, "link": "https://stackoverflow.com/questions/58837926/is-it-safe-to-have-all-members-active-in-a-c-union/58837993#58837993", "title": "Is it safe to have all members active in a C++ union?", "body": "<p>Certainly it is save to have all members of a <code>union</code> <em>active</em>.</p>\n\n<p>Just remember that only the last one written to <em>is</em>, and thus the above is not all that interesting, as it only applies to <code>union</code>s with zero or one member.</p>\n"}, {"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1573651305, "last_edit_date": 1573651305, "creation_date": 1573650992, "answer_id": 58838009, "question_id": 58837926, "link": "https://stackoverflow.com/questions/58837926/is-it-safe-to-have-all-members-active-in-a-c-union/58838009#58838009", "title": "Is it safe to have all members active in a C++ union?", "body": "<p>It is not <strong>possible</strong> to have all members of union active (simultaneously). Only one member is ever active at any moment. If you activate another member without deactivating the previous correctly (by calling destructor if needed), then that previously active member is deactivated <em>incorrectly</em>, rather than left active.</p>\n\n<p>If you want all members to be active, then you need a non-union class.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12366930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd08617e982d19841200d8359410258?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/12366930/rob"}, "is_accepted": true, "score": 0, "last_activity_date": 1601905014, "creation_date": 1601905014, "answer_id": 64209753, "question_id": 58837926, "link": "https://stackoverflow.com/questions/58837926/is-it-safe-to-have-all-members-active-in-a-c-union/64209753#64209753", "title": "Is it safe to have all members active in a C++ union?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/language/data_members#Standard_layout\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/language/data_members#Standard_layout</a> tells that it is fine to do so, at least since C++14</p>\n<blockquote>\n<p>In a standard-layout union with an active member of non-union class type T1, it is permitted to read a non-static data member m of another union member of non-union class type T2 provided m is part of the common initial sequence of T1 and T2 (except that reading a volatile member through non-volatile glvalue is undefined).</p>\n</blockquote>\n<p>since in the current case T1 and T2 donate the same type anyway.</p>\n"}], "owner": {"reputation": 1, "user_id": 12366930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd08617e982d19841200d8359410258?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/12366930/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 64209753, "answer_count": 4, "score": -1, "last_activity_date": 1601905014, "creation_date": 1573650715, "last_edit_date": 1573654396, "question_id": 58837926, "link": "https://stackoverflow.com/questions/58837926/is-it-safe-to-have-all-members-active-in-a-c-union", "title": "Is it safe to have all members active in a C++ union?", "body": "<p>According to <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.union#6\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://stackoverflow.com/questions/46933166/rationale-behind-active-members-of-unions\">this</a> <em>active member</em> of union doesn't imply any <em>actions</em> by the language/compiler. We must ourselves must make sure that the members are activated/deactivated correctly i.e. by calling their constructor/destructor.</p>\n\n<p>With that in mind, it should be safe to have all members <em>active</em> (its currently working like this, no assignments are made at all), but I wonder if I used <em>undefined behavior</em> at some point (because I definitely don't use the return value of placement new which must be done (or <code>std::launder</code>) in order to avoid issues through the optimizer)</p>\n\n<pre><code>/// not really a union \n/// just a handy way to access the individual elements named \n/// and still be able to iterate over them, \n/// thus \\see bucket and \\see buckets are always both active\nunion Buckets\n{\n    using Type = std::map&lt;int,char&gt;;\n\n    struct\n    {\n        Type    a;\n        Type    b;\n        Type    c;\n        Type    d;\n        Type    e;\n        Type    f;\n    }       bucket;\n    Type    buckets[6];\n\n    static_assert(sizeof(bucket) == sizeof(buckets));\n    Buckets()  { for (auto&amp; current : buckets) new(&amp;current) Type(); }\n    ~Buckets() { for (auto&amp; current : buckets) current.~Type(); }\n};\n</code></pre>\n"}, {"tags": ["c++", "templates", "language-lawyer", "friend"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1573650697, "post_id": 58837772, "comment_id": 103950068, "body": "<i>&quot;because the friend declaration introduces a non-template&quot;</i> It should not. <code>[temp.friend]&#47;1.2</code> says otherwise: &quot;For a friend function declaration that is not a template declaration: [...] if the name of the friend is a qualified-id and a matching non-template function is found in the specified class or namespace, the friend declaration refers to that function&quot;. In your case, non non-template <code>operator++</code> is found."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1573650750, "post_id": 58837772, "comment_id": 103950106, "body": "@AndyG, can we say that providing a definition turns a declaration of a non-template function into a definition of a function template?"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1573650985, "post_id": 58837772, "comment_id": 103950255, "body": "@YSC, do you suggest that the first code snippet should <a href=\"https://godbolt.org/z/pf39s3\" rel=\"nofollow noreferrer\">link</a>?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1573651117, "post_id": 58837772, "comment_id": 103950330, "body": "I know it doesn&#39;t, I just fail to understand why following the Standard."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1573651661, "post_id": 58837772, "comment_id": 103950638, "body": "At least <code>gcc</code> makes a clear statement (that agrees with the FAQ): <a href=\"https://godbolt.org/z/WWRB_w\" rel=\"nofollow noreferrer\">godbolt.org/z/WWRB_w</a>"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1573650681, "creation_date": 1573650681, "answer_id": 58837909, "question_id": 58837772, "link": "https://stackoverflow.com/questions/58837772/friend-function-with-a-definition-template-or-non-template/58837909#58837909", "title": "Friend function with a definition - template or non-template?", "body": "<p>With</p>\n\n<pre><code>template&lt;class T&gt; struct S {\n    friend void operator++(S s) { }\n};\n</code></pre>\n\n<p><code>operator ++</code> is no longer template.</p>\n\n<p>For more regular function (<code>operator</code> usage is a little different than function), it might allow deduction:</p>\n\n<pre><code>template&lt;class T&gt; struct S {\n    S(T t);\n    friend void foo(S lhs, S rhs) { }\n};\n\ntemplate &lt;typename T&gt;\nvoid bar(S&lt;T&gt; s, T t)\n{\n    foo(s, t);   // would not work if foo was template, would require foo&lt;T&gt;(s, t);\n    foo(s, {t}); // would not work if foo was template, would require foo&lt;T&gt;(s, {t});\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 1, "creation_date": 1573651177, "post_id": 58838020, "comment_id": 103950361, "body": "I don&#39;t understand why 1.3 doesn&#39;t apply <i>&quot;if the name of the friend is a qualified-id and a matching function template is found in the specified class or namespace, the friend declaration refers to the deduced specialization of that function template&quot;</i>"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1573651204, "post_id": 58838020, "comment_id": 103950377, "body": "ho... it&#39;s an unqualified id :/ Well <code>friend void ::operator++(S);</code> doesn&#39;t link either."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1573652253, "post_id": 58838020, "comment_id": 103951001, "body": "@YSC I&#39;m not even sure if <code>friend void ::operator++(S)</code> should compile. The standard clearly says that it either has to match a prior declaration or be unqualified."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1573652661, "post_id": 58838020, "comment_id": 103951266, "body": "@YSC - Rethinking, I suspect it doesn&#39;t link because only the declaration of the specialization is instantiated when deducing what <code>::operator++</code> refers to. I can&#39;t tell if it&#39;s a bug though. Unsure."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1573653128, "post_id": 58838020, "comment_id": 103951505, "body": "@YSC - To contrast, Clang does seem to implement 1.3 and links successfully <a href=\"https://godbolt.org/z/EpA9dr\" rel=\"nofollow noreferrer\">godbolt.org/z/EpA9dr</a> . So... GCC bug maybe?"}, {"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1573655725, "post_id": 58838020, "comment_id": 103953079, "body": "Those narrow subtleties in Standard parsing are above my competency to be honest."}], "tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1573651034, "creation_date": 1573651034, "answer_id": 58838020, "question_id": 58837772, "link": "https://stackoverflow.com/questions/58837772/friend-function-with-a-definition-template-or-non-template/58838020#58838020", "title": "Friend function with a definition - template or non-template?", "body": "<p>It is not a template, because its declaration is not that of a template (even though it appears inside a template declaration itself).</p>\n\n<blockquote>\n  <p><strong>[temp.friend]</strong> (emphasis mine)</p>\n  \n  <p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/temp.friend#1\" rel=\"nofollow noreferrer\">1</a> A friend of a class or class template can be a function template\n  or class template, a specialization of a function template or class\n  template, or a non-template function or class. <strong>For a friend function\n  declaration that is not a template declaration</strong>:</p>\n  \n  <ul>\n  <li><p>if the name of the friend is a qualified or unqualified template-id, the friend declaration refers to a specialization of a function\n  template, otherwise,</p></li>\n  <li><p>if the name of the friend is a qualified-id and a matching non-template function is found in the specified class or namespace,\n  the friend declaration refers to that function, otherwise,</p></li>\n  <li><p>if the name of the friend is a qualified-id and a matching function template is found in the specified class or namespace, the friend\n  declaration refers to the deduced specialization of that function\n  template ([temp.deduct.decl]), otherwise,</p></li>\n  <li><p><strong>the name shall be an unqualified-id that declares (or redeclares) a non-template function</strong>.</p></li>\n  </ul>\n  \n  <p>[\u2009Example:</p>\n\n<pre><code>template&lt;class T&gt; class task;\ntemplate&lt;class T&gt; task&lt;T&gt;* preempt(task&lt;T&gt;*);\n\ntemplate&lt;class T&gt; class task {\n  friend void next_time();\n  friend void process(task&lt;T&gt;*);\n  friend task&lt;T&gt;* preempt&lt;T&gt;(task&lt;T&gt;*);\n  template&lt;class C&gt; friend int func(C);\n\n  friend class task&lt;int&gt;;\n  template&lt;class P&gt; friend class frd;\n};\n</code></pre>\n  \n  <p>Here, each specialization of the task class template has the function\n  <code>next_\u00adtime</code> as a friend; <strong>because <code>process</code> does not have explicit\n  template-arguments, each specialization of the task class template has\n  an appropriately typed function <code>process</code> as a friend, and this friend\n  is not a function template specialization</strong>; because the friend\n  <code>preempt</code> has an explicit template-argument <code>T</code>, each specialization\n  of the <code>task</code> class template has the appropriate specialization of the\n  function template <code>preempt</code> as a friend; and each specialization of\n  the <code>task</code> class template has all specializations of the function\n  template <code>func</code> as friends. Similarly, each specialization of the\n  <code>task</code> class template has the class template specialization\n  <code>task&lt;int&gt;</code> as a friend, and has all specializations of the class\n  template <code>frd</code> as friends. \u2009\u2014\u2009end example\u2009]</p>\n</blockquote>\n\n<p>While examples are non-normative, the one in the quote clarifies the intent of the preceding normative text. Since the friend operator declaration is not a template declaration, the text in bold applies. It therefore declares a non-template function.</p>\n"}], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58838020, "answer_count": 2, "score": 4, "last_activity_date": 1573651034, "creation_date": 1573650201, "question_id": 58837772, "link": "https://stackoverflow.com/questions/58837772/friend-function-with-a-definition-template-or-non-template", "title": "Friend function with a definition - template or non-template?", "body": "<p>Suppose we have the following code:</p>\n\n<pre><code>template&lt;class T&gt; struct S;\ntemplate&lt;class T&gt; void operator++(S&lt;T&gt;);\n\ntemplate&lt;class T&gt; struct S {\n    friend void operator++(S);\n};\n\ntemplate&lt;class T&gt;\nvoid operator++(S&lt;T&gt;) {}\n\nint main() {\n    S&lt;int&gt; s;\n    ++s;\n}\n</code></pre>\n\n<p>This will compile but won't link, because the <code>friend</code> declaration introduces a non-template <code>operator++</code>, that has never been defined. </p>\n\n<p><a href=\"https://isocpp.org/wiki/faq/templates#template-friends\" rel=\"nofollow noreferrer\">This FAQ answer</a> reads (<strong>bold</strong> is mine):</p>\n\n<blockquote>\n  <p>The solution is to <strong>convince the compiler</strong> while it is examining the class body proper that the <strong><code>operator++</code> function is itself a template</strong>. There are several ways to do this; </p>\n</blockquote>\n\n<p>The first way is to add <code>&lt;&gt;</code> into the friend declaration, and I'm not considering it here. The second is \"to define the friend function within the class body\":</p>\n\n<pre><code>template&lt;class T&gt; struct S {\n    friend void operator++(S) { }\n};\n</code></pre>\n\n<p>The quote suggests that <code>void operator++(S)</code> is now a function template and not a non-template function. Is it?</p>\n"}, {"tags": ["c++", "googletest"], "comments": [{"owner": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "edited": false, "score": 0, "creation_date": 1573683484, "post_id": 58837730, "comment_id": 103966604, "body": "It may help if you post the error producing code of <code>Arduino_unittest.cc</code>."}, {"owner": {"reputation": 37, "user_id": 7463317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7767ce697303e3e21303386fe2528a?s=128&d=identicon&r=PG&f=1", "display_name": "Santos", "link": "https://stackoverflow.com/users/7463317/santos"}, "reply_to_user": {"reputation": 671, "user_id": 7898100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef63bacd8554153c3ad9127ce502180d?s=128&d=identicon&r=PG&f=1", "display_name": "Tobias Wollgam", "link": "https://stackoverflow.com/users/7898100/tobias-wollgam"}, "edited": false, "score": 0, "creation_date": 1573742385, "post_id": 58837730, "comment_id": 103989648, "body": "The errors come from gmock-matchers.h . Here is the file and the googletest repo: <a href=\"https://github.com/google/googletest/blob/master/googlemock/include/gmock/gmock-matchers.h\" rel=\"nofollow noreferrer\">github.com/google/googletest/blob/master/googlemock/include/&zwnj;&#8203;&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 3771713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b40de3874255804bbda866fefca0159?s=128&d=identicon&r=PG&f=1", "display_name": "ClaudioDeSouza", "link": "https://stackoverflow.com/users/3771713/claudiodesouza"}, "is_accepted": false, "score": 1, "last_activity_date": 1616010133, "creation_date": 1616010133, "answer_id": 66680155, "question_id": 58837730, "link": "https://stackoverflow.com/questions/58837730/google-test-compilation-error-os-x-ambiguous-conversion-for-functional-style-c/66680155#66680155", "title": "Google test compilation error Os X : ambiguous conversion for functional-style cast from &#39;int&#39; to &#39;internal::FloatingEq2Matcher&lt;float&gt;&#39;", "body": "<p>In case anyone happens to hit this issue, this is unrelated to gmock. That error is caused by some header you might be including on MacOS <strong>that redefines true to 1</strong>. In my case, the redefinition was being done by ldns system header.</p>\n<p>In order to find out where exactly <code>true</code> is being defined to <code>1</code>, add a redefinition of <code>true</code> to the top of the file in your project where the error is being triggered. Something like:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>#define true true\n</code></pre>\n<p>This has to be done before all includes, and you will get a build error showing where the redefinition is taking place.</p>\n"}], "owner": {"reputation": 37, "user_id": 7463317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da7767ce697303e3e21303386fe2528a?s=128&d=identicon&r=PG&f=1", "display_name": "Santos", "link": "https://stackoverflow.com/users/7463317/santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1616010133, "creation_date": 1573650051, "question_id": 58837730, "link": "https://stackoverflow.com/questions/58837730/google-test-compilation-error-os-x-ambiguous-conversion-for-functional-style-c", "title": "Google test compilation error Os X : ambiguous conversion for functional-style cast from &#39;int&#39; to &#39;internal::FloatingEq2Matcher&lt;float&gt;&#39;", "body": "<p>I get this error when compiling my tests on Mac Os. Please could you help me find a proper solution</p>\n\n<p>This is how I installed googletest:</p>\n\n<pre><code>cd ~/  \ngit clone https://github.com/google/googletest.git\ncd googletest \nmkdir install \ncd install \ncmake ../  #creates a make file \nmake #compiles Google Test\nsudo make install #installs Google Test\necho \"export CPLUS_INCLUDE_PATH=/usr/local/include\" &gt;&gt; ~/.bash_profile\necho \"export LIBRARY_PATH=/usr/local/lib\" &gt;&gt; ~/.bash_profile\n\nsource ~/.bash_profile \n</code></pre>\n\n<p>And the compilation output:</p>\n\n<pre><code>g++ Arduino_unittest.cc -std=c++11 -lgtest -lgtest_main -lgmock -pthread -I ../include\nIn file included from Arduino_unittest.cc:5:\nIn file included from ../include/arduino-mock/Arduino.h:74:\nIn file included from /usr/local/include/gmock/gmock.h:61:\nIn file included from /usr/local/include/gmock/gmock-function-mocker.h:39:\nIn file included from /usr/local/include/gmock/gmock-generated-function-mockers.h:47:\nIn file included from /usr/local/include/gmock/gmock-spec-builders.h:75:\n/usr/local/include/gmock/gmock-matchers.h:3976:10: error: ambiguous conversion for functional-style cast from 'int'\n      to 'internal::FloatingEq2Matcher&lt;float&gt;'\n  return internal::FloatingEq2Matcher&lt;float&gt;(true);\n         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/usr/local/include/gmock/gmock-matchers.h:1535:12: note: candidate constructor\n  explicit FloatingEq2Matcher(bool nan_eq_nan) { Init(-1, nan_eq_nan); }\n           ^\n/usr/local/include/gmock/gmock-matchers.h:1537:12: note: candidate constructor\n  explicit FloatingEq2Matcher(FloatType max_abs_error) {\n           ^\n/usr/local/include/gmock/gmock-matchers.h:3982:10: error: ambiguous conversion for functional-style cast from 'int'\n      to 'internal::FloatingEq2Matcher&lt;double&gt;'\n  return internal::FloatingEq2Matcher&lt;double&gt;(true);\n         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/usr/local/include/gmock/gmock-matchers.h:1535:12: note: candidate constructor\n  explicit FloatingEq2Matcher(bool nan_eq_nan) { Init(-1, nan_eq_nan); }\n           ^\n/usr/local/include/gmock/gmock-matchers.h:1537:12: note: candidate constructor\n  explicit FloatingEq2Matcher(FloatType max_abs_error) {\n           ^\n2 errors generated.\n</code></pre>\n\n<p>Output of c++ --version</p>\n\n<pre><code>Apple LLVM version 10.0.1 (clang-1001.0.46.4)\nTarget: x86_64-apple-darwin18.0.0\nThread model: posix\nInstalledDir: /Library/Developer/CommandLineTools/usr/bin\n</code></pre>\n"}, {"tags": ["c++", "b-tree", "reinterpret-cast"], "comments": [{"owner": {"reputation": 1140, "user_id": 4987470, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ukanz9lSLrY/AAAAAAAAAAI/AAAAAAAAADQ/SSXrG9c6Fag/photo.jpg?sz=128", "display_name": "moisrex", "link": "https://stackoverflow.com/users/4987470/moisrex"}, "edited": false, "score": 1, "creation_date": 1573650183, "post_id": 58837675, "comment_id": 103949757, "body": "It&#39;s best to recreate the pair and rely on <code>move</code> operations instead of luck!"}], "answers": [{"tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 4, "last_activity_date": 1573650020, "creation_date": 1573650020, "answer_id": 58837721, "question_id": 58837675, "link": "https://stackoverflow.com/questions/58837675/reinterpret-cast-adding-const/58837721#58837721", "title": "reinterpret_cast adding const", "body": "<p>Your code has <em>undefined behavior</em> due to violation of <a href=\"https://en.cppreference.com/w/cpp/language/reinterpret_cast#Type_aliasing\" rel=\"nofollow noreferrer\">type aliasing rules</a>.</p>\n"}], "owner": {"reputation": 125, "user_id": 6201368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45b1e05d17fb919e92475bf7a968e711?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Mitrovic", "link": "https://stackoverflow.com/users/6201368/igor-mitrovic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573650142, "creation_date": 1573649860, "last_edit_date": 1573650142, "question_id": 58837675, "link": "https://stackoverflow.com/questions/58837675/reinterpret-cast-adding-const", "title": "reinterpret_cast adding const", "body": "<p>Is it possible to add a const qualifier to only one member of a struct with <code>reinterpret_cast</code>.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;utility&gt;\n\nstd::pair&lt;int, int&gt; test;\nstd::pair&lt;const int, int&gt;&amp; ctest = reinterpret_cast&lt;std::pair&lt;const int, int&gt;&amp;&gt;(test);\nctest.second = 5;\nint first = ctest.first;\n</code></pre>\n\n<p>I only want to add const, I don't care about removing it. Google does this in their implementation of BTree. I'm also implementing a BTree so I wonder if this is even legal.</p>\n"}, {"tags": ["c++", "visual-studio-2015", "mfc"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1573649865, "post_id": 58837567, "comment_id": 103949567, "body": "Leave the file where the editor can find it and add an include path to the rc command (right-click the rc file in project window) for the resource file see: <a href=\"https://docs.microsoft.com/en-us/windows/win32/menurc/using-rc-the-rc-command-line-\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/windows/win32/menurc/&hellip;</a>"}, {"owner": {"reputation": 115, "user_id": 3890376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ebf65be5624988509da604325cfcd089?s=128&d=identicon&r=PG&f=1", "display_name": "n4meless0nly", "link": "https://stackoverflow.com/users/3890376/n4meless0nly"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1573650793, "post_id": 58837567, "comment_id": 103950135, "body": "According msdn it should work, but it doesn&#39;t. rc.exe can&#39;t find icon files even when I leave only filename filename in .rc file IDI_ICON1 ICON &quot;icon1.ico&quot; and set absolute path in &quot;Resources -&gt; Additional Include Directory&quot; option."}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 3890376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ebf65be5624988509da604325cfcd089?s=128&d=identicon&r=PG&f=1", "display_name": "n4meless0nly", "link": "https://stackoverflow.com/users/3890376/n4meless0nly"}, "is_accepted": false, "score": 0, "last_activity_date": 1573698114, "creation_date": 1573698114, "answer_id": 58848454, "question_id": 58837567, "link": "https://stackoverflow.com/questions/58837567/visual-studio-2015-resource-view-and-recource-compiler-using-different-approache/58848454#58848454", "title": "Visual Studio 2015 Resource View and Recource Compiler using different approaches to find icon files in project directory. How to fix it?", "body": "<p>I've just found that app.rc was excluded from build but it was included using #include in main .rc file that located in root project directory (Main). So when rc.exe trying to compile main .rc file it can't understand that icons are located in subdirectory relative to incuded app.rc. After I fixed it (removed \"#include \"app.rc\"\" from main .rc file, return app.rc it to build process) - project was built just fine (didn't need to add additional path to icons).</p>\n"}], "owner": {"reputation": 115, "user_id": 3890376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ebf65be5624988509da604325cfcd089?s=128&d=identicon&r=PG&f=1", "display_name": "n4meless0nly", "link": "https://stackoverflow.com/users/3890376/n4meless0nly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573698114, "creation_date": 1573649517, "question_id": 58837567, "link": "https://stackoverflow.com/questions/58837567/visual-studio-2015-resource-view-and-recource-compiler-using-different-approache", "title": "Visual Studio 2015 Resource View and Recource Compiler using different approaches to find icon files in project directory. How to fix it?", "body": "<p>I develop MFC C++ project.</p>\n\n<p>The Resource View (View -> Resource View) add icon files (\"Add Resource\" in .rc file context menu) relative to .rc file location, but Resource Compiler (rc.exe) trying to compile .rc file relative to project directory. </p>\n\n<p>My .rc file is located in subdirectory inside project directory and I can't move it to the project directory by historical reasons and a lot of code. Is it way to force rc.exe find icon files relative specified directory or make Resource View use paths relative project directory? </p>\n\n<p>I can't use absolute path because of many developers works on this project and it has been mapped to different directories on their hdd. </p>\n\n<p>Sample directory structure:</p>\n\n<pre><code>Main-&gt;\n    Res-&gt;\n        Icons-&gt;\n            icon1.ico\n        app.rc\n</code></pre>\n\n<p>app.rc:</p>\n\n<pre><code>IDI_ICON1 ICON \"Icons\\\\icon1.ico\"\n</code></pre>\n\n<p>But during compile rc.exe shows error:</p>\n\n<pre><code>error RC2135: file not found: Icons\\icon1.ico\n</code></pre>\n\n<p>When I fix it:</p>\n\n<pre><code>IDI_ICON1 ICON \"Res\\\\Icons\\\\icon1.ico\"\n</code></pre>\n\n<p>then rc.exe successfully compiled it, but Resource View can't open app.rc for edit (add icons, edit dialogs and so on) with error:</p>\n\n<pre><code>error RC2135: file not found: Res\\\\Icons\\\\icon1.ico\n</code></pre>\n\n<p>Any help is much appreciated.</p>\n"}, {"tags": ["c++", "oop", "object", "vector", "hierarchy"], "comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573655718, "post_id": 58837558, "comment_id": 103953074, "body": "Hint for life: Check return values ;-). By the way, since trying to add the same ad twice is probably an (unexpected, in the sense &quot;should not occur&quot;) error one could consider throwing an exception. That de-clutters the code from error checking and handling (the default handler is abort())."}, {"owner": {"reputation": 35, "user_id": 10769912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tEIPA.jpg?s=128&g=1", "display_name": "dotchetter", "link": "https://stackoverflow.com/users/10769912/dotchetter"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1573658489, "post_id": 58837558, "comment_id": 103954604, "body": "Yes, absolutely.  Thanks a lot, I&#39;ll check it out!"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10769912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tEIPA.jpg?s=128&g=1", "display_name": "dotchetter", "link": "https://stackoverflow.com/users/10769912/dotchetter"}, "edited": false, "score": 1, "creation_date": 1573650964, "post_id": 58837705, "comment_id": 103950234, "body": "Wow, I feel stupid. This is what days of non-stop coding in a new language does. Silly copy-paste.   Thank you for your answer!"}], "tags": [], "owner": {"reputation": 9804, "user_id": 1332041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/871cd231304bb5650f381016cac34d8f?s=128&d=identicon&r=PG", "display_name": "acraig5075", "link": "https://stackoverflow.com/users/1332041/acraig5075"}, "is_accepted": true, "score": 1, "last_activity_date": 1573649961, "creation_date": 1573649961, "answer_id": 58837705, "question_id": 58837558, "link": "https://stackoverflow.com/questions/58837558/problems-adding-a-class-instance-to-a-hierarchy-of-objects-in-c/58837705#58837705", "title": "Problems adding a class instance to a hierarchy of objects in C++", "body": "<p><code>CommitAdvertisement</code> will return false and fail to add it if there is already an advertisement with the same id.</p>\n\n<p>And that is what you're doing. The first and second ads both have id 12345656. So it's doing what you asked of it.</p>\n\n<p>Increment the id for <code>the_second_ad</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 10769912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tEIPA.jpg?s=128&g=1", "display_name": "dotchetter", "link": "https://stackoverflow.com/users/10769912/dotchetter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 58837705, "answer_count": 1, "score": 0, "last_activity_date": 1573655664, "creation_date": 1573649488, "last_edit_date": 1573655664, "question_id": 58837558, "link": "https://stackoverflow.com/questions/58837558/problems-adding-a-class-instance-to-a-hierarchy-of-objects-in-c", "title": "Problems adding a class instance to a hierarchy of objects in C++", "body": "<p>In our project we are required to create three classes: Customers, Campaigns and Advertisements. Each Customer has a vector of Campaigns, and each Campaign has a vector of Advertisements:</p>\n\n<p><strong>Customers -> Campaigns -> Advertisements</strong></p>\n\n<p>The problem arises for us when we are trying to add an Advertisement instance to \na given customer's Campaign.</p>\n\n<p>When we try to add an Advertisement to a given Campaign, we never see it\nactually adding the advertisement. The number of ads stay stagnant.</p>\n\n<p>We are all new to C++ and not sure how to combat this with references, which we think relates to the issue.</p>\n\n<p><strong>The Customer class:</strong></p>\n\n<pre><code>#pragma once\n#include &lt;vector&gt;\n#include &lt;cstdio&gt;\n#include &lt;string&gt;\n#include \"campaign.h\"\n\nusing namespace std;\n\nclass Customer\n{\n    string name;\n    int id;\n    vector&lt;Campaign&gt; campaigns;\npublic:\n\n\n    Customer(string name, int id)\n    {\n        this-&gt;name = name;\n        this-&gt;id = id;\n    }\n\n    string GetName()\n    {\n        return name;\n    }\n\n    void SetName(string name)\n    {\n        this-&gt;name = name;\n    }\n\n    int GetId()\n    {\n        return id;\n    }\n\n    void SetId(int id)\n    {\n        this-&gt;id = id;\n    }\n\n    bool AddCampaign(Campaign campaignObject)\n    {\n        campaigns.push_back(campaignObject);\n        return true;\n    }\n\n    bool CommitAdvertisement(Ad ad, int campaignID)\n    {\n        for (int i = 0; i &lt; campaigns.size(); i++)\n        {\n            if (campaigns[i].GetId() == campaignID)\n            {\n                campaigns[i].CommitAdvertisement(ad);\n                return true;\n            }\n        }\n        return false;\n    }\n\n    bool hasActiveCampaigns()\n    {\n        for (Campaign i : campaigns)\n        {\n            if (i.IsActive())\n            {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    vector&lt;Campaign&gt; GetAllCampaigns()\n    {\n        return campaigns;\n    }\n\n    vector&lt;Ad&gt; GetAllAdsForCampaign(int campaignID)\n    {\n        for (int i = 0; i &lt; campaigns.size(); i++)\n        {\n            if (campaigns[i].GetId() == campaignID)\n            {\n                return campaigns[i].GetAllAds();\n            }\n        }\n    }\n};\n</code></pre>\n\n<p><strong>The Campaign class:</strong></p>\n\n<pre><code>#pragma once\n#include &lt;ctime&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;exception&gt;\n#include &lt;ctime&gt;\n#include \"Ad.h\"\n\nusing namespace std;\n\n\nclass Campaign\n{\n    string name;\n    int id;\n    time_t fromDateTime;\n    time_t toDateTime;\n    float campaignCost;\n    vector&lt;Ad&gt; ads;\n\npublic:\n    Campaign(time_t fromDateTime, time_t toDateTime, int id, string name, float campaignCost)\n    {\n        this-&gt;fromDateTime = fromDateTime;\n        this-&gt;toDateTime = toDateTime;\n        this-&gt;id = id;\n        this-&gt;name = name;\n        this-&gt;campaignCost = campaignCost;\n    }\n\n    time_t GetFromDateTime()\n    {\n        return fromDateTime;\n    }\n\n    void SetFromDateTime(time_t fromDateTime)\n    {\n        this-&gt;fromDateTime = fromDateTime;\n    }\n\n    time_t GetToDateTime()\n    {\n        return toDateTime;\n    }\n\n    void SetToDateTime(time_t toDateTime)\n    {\n        this-&gt;toDateTime = toDateTime;\n    }\n\n    int GetId()\n    {\n        return id;\n    }\n\n    void SetId(int id)\n    {\n        this-&gt;id = id;\n    }\n\n    string GetName()\n    {\n        return name;\n    }\n\n    void SetName(string name)\n    {\n        this-&gt;name = name;\n    }\n\n    float GetCampaignCost()\n    {\n        return campaignCost;\n    }\n\n    void SetCampaignCost(float campaignCost)\n    {\n        this-&gt;campaignCost = campaignCost;\n    }\n\n    bool IsActive()\n    {\n        time_t now = time(NULL);\n\n        if (fromDateTime &lt;= now &amp;&amp; toDateTime &gt;= now)\n        {\n            return true;\n        }\n        return false;\n    }\n\n    bool CommitAdvertisement(Ad ad)\n    {\n        for (Ad i : ads)\n        {\n            if (i.GetId() == ad.GetId())\n            {\n                return false;\n            }\n        }\n        ads.push_back(ad);\n        return true;\n    }\n\n    bool DeleteAdvertisement(int id)\n    {\n        for (int i = 0; i &lt; ads.size(); i++)\n        {\n            if (ads[i].GetId() == id)\n            {\n                ads.erase(ads.begin() + i);\n                return false;\n            }\n        }\n        return false;\n    }\n\n    vector&lt;Ad&gt; GetAllAds()\n    {\n        return ads;\n    }\n};\n</code></pre>\n\n<p><strong>The Ad class</strong></p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;exception&gt;\n#include \"AdType.h\"\n\nusing namespace std;\n\nclass Ad\n{\n\nprivate:\n\n    string name;\n    string adText;\n    AdType adType; \n    int id;\n\npublic:\n\n    Ad(string name, string text, int id, AdType type = AdType::PLAINTEXT)\n    {\n        this-&gt;name = name;\n        this-&gt;adText = text;\n        this-&gt;id = id;\n        this-&gt;adType = type;\n    }\n\n    string GetName()\n    {\n        return name;\n    }\n\n    void SetName(string name)\n    {\n        this-&gt;name = name;\n    }\n\n    int GetId()\n    {\n        return id;\n    }\n\n    void SetId(int id)\n    {\n        this-&gt;id = id;\n    }\n\n    AdType GetType()\n    {\n        return adType;\n    }\n\n    void SetType(AdType type)\n    {\n        this-&gt;adType = type;\n    }\n\n    string GetText()\n    {\n        return adText;\n    }\n\n    void SetText(string adText)\n    {\n        this-&gt;adText = adText;\n    }\n};\n</code></pre>\n\n<p>Now, we've successfully added a campaign to a given customer, and are able to add <strong>one</strong> ad instance but no more. </p>\n\n<p>This code snippet shows this attempt:</p>\n\n<pre><code>    // Create a customer\n    Customer *the_client = new Customer(\"Foobar Inc\", 123);\n\n    // Create a campaign\n    Campaign *the_campaign = new Campaign(begin, end, 1234, \"campaign_name\", 123455.0f);\n\n    // Create an ad\n    Ad *the_first_ad = new Ad(\"First ad\", \"adtext\", 12345656, AdType::PLAINTEXT);\n\n    // create another ad\n    Ad* the_second_ad = new Ad(\"Second ad\", \"adtext\", 12345656, AdType::PLAINTEXT);\n\n    // add the campaign to the customer\n    the_client-&gt;AddCampaign(*the_campaign);\n\n    // Add the ad to the customers' list of ads\n    the_client-&gt;CommitAdvertisement(*the_first_ad, 1234);\n\n    // Print out how many ads there are in the given campaign\n    cout &lt;&lt; \"There are now \" &lt;&lt; the_client-&gt;GetAllAdsForCampaign(1234).size() &lt;&lt; \"ads int the campaign\" &lt;&lt; endl;\n\n    // Add the second ad to the customers' list of ads\n    the_client-&gt;CommitAdvertisement(*the_second_ad, 1234);\n\n    // Again - print out how many ads there are in the given campaign\n    cout &lt;&lt; \"There are now \" &lt;&lt; the_client-&gt;GetAllAdsForCampaign(1234).size() &lt;&lt; \"ads int the campaign\" &lt;&lt; endl;\n</code></pre>\n\n<p>It's very possible we are totally doing this wrong, but any guidance is more than welcome.</p>\n"}, {"tags": ["c++", "data-structures", "string-matching", "trie"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1573654111, "post_id": 58837551, "comment_id": 103952113, "body": "How come that as someone new to C++, you&#39;re using <code>new</code>?"}, {"owner": {"reputation": 2715, "user_id": 232024, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6225abdd74d5b5cfff9fc5cb82186e0b?s=128&d=identicon&r=PG", "display_name": "Roman Dmitrienko", "link": "https://stackoverflow.com/users/232024/roman-dmitrienko"}, "edited": false, "score": 0, "creation_date": 1573658684, "post_id": 58837551, "comment_id": 103954709, "body": "The <code>for(int idx=0;idx&lt;5;idx++)</code> loop looks suspicious. If <code>a</code> is zero-terminated, then the loop will inevitably reach the terminating zero and try to access <code>temp-&gt;key</code> at an invalid index, i.e. if <code>a[idx]</code> is the terminating zero, then <code>temp-&gt;key[a[idx]-&#39;0&#39;]</code> refers to an element at a negative index, since <code>0-&#39;0&#39;</code> is negative."}, {"owner": {"reputation": 3, "user_id": 12366852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4841a5a488d5c5f899870eb28b14b9?s=128&d=identicon&r=PG&f=1", "display_name": "aayush", "link": "https://stackoverflow.com/users/12366852/aayush"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1573662343, "post_id": 58837551, "comment_id": 103956974, "body": "@BartekBanachewicz, I don&#39;t know what it means to beginner in programming for you. But I am new to this programming arena. I knew few basics. I was struck as I mentioned above. So put the query here."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12366852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4841a5a488d5c5f899870eb28b14b9?s=128&d=identicon&r=PG&f=1", "display_name": "aayush", "link": "https://stackoverflow.com/users/12366852/aayush"}, "edited": false, "score": 0, "creation_date": 1573666259, "post_id": 58840365, "comment_id": 103959040, "body": "Thanks, I have figured it out."}], "tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 1, "last_activity_date": 1573658831, "creation_date": 1573658831, "answer_id": 58840365, "question_id": 58837551, "link": "https://stackoverflow.com/questions/58837551/implementation-of-trie-data-structure/58840365#58840365", "title": "Implementation of Trie data structure", "body": "<p>The member <code>key</code> of <code>Node</code> is declared as</p>\n\n<pre><code>Node *key[2];\n</code></pre>\n\n<p>So it's an array of two pointers and given this line in <code>Trie::insertUtil</code>,</p>\n\n<pre><code>int tmp_chr = a[idx]-'0';  // A variable ignored in the following code, BTW.\n</code></pre>\n\n<p>I'll assume that the \"strings\" that the OP is trying to insert are composed only by the characters <code>'0'</code> and <code>'1'</code>.</p>\n\n<p>Note that, in the posted code, the null-terminator needed in the used C-string is simply ignored, which is an error by itself, easily fixed by using a proper <code>std::string</code> instead.</p>\n\n<p>The other issue is in the same loop:</p>\n\n<pre><code>for(int idx = 0; idx &lt; 5; idx++)\n{   //           ^^^^^^^                   It should stop before the null-terminator\n    // (...)\n    int tmp_chr = a[idx]-'0'; //           Are you sure that there are only '0' or '1'?\n    if( !(temp-&gt;key[1]) )\n    { //           ^^^                     1 is wrong, here, it should be temp-&gt;key[tmp_chr]\n        temp-&gt;key[a[idx]-'0'] = new Node();\n        //        ^^^^^^^^^^               Why not use tmp_chr here and in the following?\n        // ...\n    }\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12366852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4841a5a488d5c5f899870eb28b14b9?s=128&d=identicon&r=PG&f=1", "display_name": "aayush", "link": "https://stackoverflow.com/users/12366852/aayush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 58840365, "answer_count": 1, "score": 0, "last_activity_date": 1573658831, "creation_date": 1573649443, "last_edit_date": 1573654070, "question_id": 58837551, "link": "https://stackoverflow.com/questions/58837551/implementation-of-trie-data-structure", "title": "Implementation of Trie data structure", "body": "<p>I am new at programming. I am trying to implement Trie dataStructure. But there is segmentation fault whenever i try to insert a string into trie.</p>\n\n<p>Here is the Node class</p>\n\n<pre><code>class Node{\n    public:\n        Node *key[2];\n        Node *parent;\n        bool EOW;\n        Node1(){\n            this-&gt;key[0]=NULL;\n            this-&gt;key[1]=NULL;\n            this-&gt;parent = NULL;\n            this-&gt;EOW = false;\n        }\n};\n</code></pre>\n\n<p>and this is the trie class</p>\n\n<pre><code>class Trie{\n    public:\n        Node *root;\n        Trie(){\n            root =  new Node();\n        }\n\n        void insertUtil(Node *root, char a[]);\n        void insert(char a[]){\n            // cout &lt;&lt; root &lt;&lt;endl;\n            // cout &lt;&lt; root-&gt;key[0];\n            insertUtil(root, a);\n        }\n};\n</code></pre>\n\n<p>and this is the insertUtil function</p>\n\n<pre><code>void Trie::insertUtil(Node *root, char a[]){\n    Node *temp = root;\n    for(int idx=0;idx&lt;5;idx++){\n        cout &lt;&lt; idx &lt;&lt;endl;\n        int tmp_chr = a[idx]-'0';\n        if(!(temp-&gt;key[1])){\n            temp-&gt;key[a[idx]-'0'] = new Node();\n            temp-&gt;key[a[idx]-'0']-&gt;parent = temp;\n        }\n        temp = temp-&gt;key[a[idx]-'0'];\n    }\n    temp-&gt;EOW = -1;\n}\n</code></pre>\n\n<pre><code>int main(){\n    Trie t1;\n    char b[5];\n    cin &gt;&gt; b;\n    t1.insert(b);\n    cout &lt;&lt; '*';\n    cin &gt;&gt; b;\n    t1.insert(b);\n    cin &gt;&gt; b;\n    t1.insert(b);\n    cin &gt;&gt; b;\n    t1.insert(b);\n}\n</code></pre>\n"}, {"tags": ["c++", "file", "unix", "locking", "flock"], "comments": [{"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573649765, "post_id": 58837421, "comment_id": 103949507, "body": "<code>flock</code> operates on a file descriptor, not on a file. The difference is in <code>If a process uses open(2) (or similar) to obtain more than one descriptor for the same file, these descriptors are treated independently by flock().</code> The answer you linked doesn&#39;t discuss <code>flock</code> but using a general separate lock file."}, {"owner": {"reputation": 65, "user_id": 12263543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gyxot.jpg?s=128&g=1", "display_name": "picklepick", "link": "https://stackoverflow.com/users/12263543/picklepick"}, "reply_to_user": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573650356, "post_id": 58837421, "comment_id": 103949858, "body": "So if I want to edit myfile.txt, using <code>open(2)</code> I get the file descriptor, and then I pass that fd to <code>flock(2)</code>. I still don&#39;t understand why I would create an extra lock file, what is that file used for?"}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 0, "creation_date": 1573650404, "post_id": 58837421, "comment_id": 103949893, "body": "The answer you linked doesn&#39;t discuss <code>flock</code>. What would do without <code>flock</code>? You could create a separate lock file. The lock file, if exists, means the file is locked. Because <code>open(... O_CREAT | O_EXCL)</code> should be atomic, you can check if a file exists at the same time create the file."}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1573651310, "post_id": 58837421, "comment_id": 103950429, "body": "This method is used when the thing you want to lock is not a file."}, {"owner": {"reputation": 65, "user_id": 12263543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gyxot.jpg?s=128&g=1", "display_name": "picklepick", "link": "https://stackoverflow.com/users/12263543/picklepick"}, "edited": false, "score": 0, "creation_date": 1573651717, "post_id": 58837421, "comment_id": 103950672, "body": "Thanks for helping! There are several answers in that thread that discuss <code>flock</code> though. The answer of &#39;chmike&#39;  for example first creates a lock file <code>int fd = open( lockName, O_RDWR|O_CREAT, 0666 );</code> and then uses flock on that file: <code>if( fd &gt;= 0 &amp;&amp; flock( fd, LOCK_EX | LOCK_NB ) &lt; 0 )</code>. Maybe I&#39;m confusing something here, but to me it seems like an extra lock file is created for each file I want to open and then the lock is applied to that file and not the original file. I don&#39;t understand why though."}, {"owner": {"reputation": 65, "user_id": 12263543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gyxot.jpg?s=128&g=1", "display_name": "picklepick", "link": "https://stackoverflow.com/users/12263543/picklepick"}, "reply_to_user": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 1, "creation_date": 1573665865, "post_id": 58837421, "comment_id": 103958851, "body": "@user253751 ah ok, so just to be clear, if I use <code>flock</code> on a text file, there is no need to create a separate lock file? Because that&#39;s exactly what my prof wants me do in an assignment. But I have no idea why and from your answers and what I read on other sources, I understand that this is nonsensical?"}], "owner": {"reputation": 65, "user_id": 12263543, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gyxot.jpg?s=128&g=1", "display_name": "picklepick", "link": "https://stackoverflow.com/users/12263543/picklepick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1573649013, "creation_date": 1573649013, "question_id": 58837421, "link": "https://stackoverflow.com/questions/58837421/when-using-flock2-to-lock-a-file-why-is-it-necessary-to-create-a-lock-file", "title": "When using flock(2) to lock a file, why is it necessary to create a lock file?", "body": "<p>I'm learning file locking using <code>flock(2)</code>, and I want to write a little C++ utility class to handle the locking. I've read quite a lot online, but there is one part I don't understand.</p>\n\n<p>In e.g. <a href=\"https://stackoverflow.com/questions/1599459/optimal-lock-file-method\">Optimal lock file method</a>:</p>\n\n<pre><code>1: open the lock file creating it if it doesn't exist\n2: ask for an exclusive lock an agreed byte range in the lock file\n3: when the lock is granted then\n    4: &lt;do my processing here&gt;\n    5: release my lock\n    6: close the lock file\nend\n</code></pre>\n\n<p>What is this lock file? I read that it is used for lock administration, but I thought that was exactly what <code>flock(2)</code> is used for? So why do we need to create an additional file? And why isn't this file deleted after I stopped needing the lock? Doesn't this mean that for every file I ever opened (with this locking method enabled) there is a lock file somewhere?</p>\n\n<p>Would be great if someone could explain this or point me to some resource, I've already spent multiple hours on this.</p>\n"}, {"tags": ["c++", "unicode", "cmake", "visual-studio-2017", "c++17"], "comments": [{"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "edited": false, "score": 0, "creation_date": 1573649339, "post_id": 58837386, "comment_id": 103949265, "body": "To those voting close: This question is <b>not</b> about seeking debugging help"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1573649895, "post_id": 58837386, "comment_id": 103949588, "body": "&quot;This question is not about seeking debugging help&quot; - How else the question &quot;what are we missing here?&quot; could be interpreted? It could be that your project is wrong, and works with old settings only due to a luck. In any case, providing <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would definitely improve your question."}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1573649953, "post_id": 58837386, "comment_id": 103949622, "body": "Maybe try <code>&#47;D_UNICODE</code> as the MSVC includes only ever look for this symbol as all uppercase?"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1573650138, "post_id": 58837386, "comment_id": 103949739, "body": "@Tsyvarev making a minimal is easier said than done - please note im not saying this is bug in CMake or anything else for that matter, im just trying to understand why I get this linker error"}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1573650523, "post_id": 58837386, "comment_id": 103949965, "body": "@Adrian-ReinstateMonica when i wrote the post it was a mistake - _UNICODE was actually used"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1573663023, "post_id": 58837386, "comment_id": 103957394, "body": "&quot;Testing this with a default created mfc project, there is no issue between switching between between a unicode and non-unicode built.&quot; - So there is something special in your project which results in the error. Do you like a <i>guessing</i> game? We don&#39;t."}, {"owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1573719033, "post_id": 58837386, "comment_id": 103976444, "body": "@Tsyvarev I don&#39;t like a guessing game - but I find this to be extremely strange and don&#39;t know where to start looking - after all there are a lot of settings and the reason could be simpel for someone with the right knowledge."}], "owner": {"reputation": 9396, "user_id": 2261538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4e60dd44745bd1518ee933e081119de?s=128&d=identicon&r=PG", "display_name": "darune", "link": "https://stackoverflow.com/users/2261538/darune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573719162, "creation_date": 1573648897, "last_edit_date": 1573719162, "question_id": 58837386, "link": "https://stackoverflow.com/questions/58837386/linker-error-switch-to-unicode-build-gives-unresolved-external-symbol-winmain", "title": "Linker error: switch to unicode build gives: unresolved external symbol WinMain", "body": "<p>After switching all projects to Unicode(Character Set: Unicode), our solution on VS2017 gives the following linker error:</p>\n\n<pre><code>msvcrtd.lib(exe_winmain.obj) : error LNK2001: unresolved external symbol WinMain\n</code></pre>\n\n<p><code>WinMain</code> (or <code>wWinMain</code>) is the program entry point for graphical application. <a href=\"https://docs.microsoft.com/en-us/windows/win32/learnwin32/winmain--the-application-entry-point\" rel=\"nofollow noreferrer\">See this</a>.</p>\n\n<p>Our projects are build using <a href=\"/questions/tagged/cmake\" class=\"post-tag\" title=\"show questions tagged &#39;cmake&#39;\" rel=\"tag\">cmake</a> and with setting <code>/D_UNICODE</code> unicode projects is generated. Before we didn't have a <code>WinMain</code> function in our own code (and shouldn't the linker try to link <code>wWinMain</code> instead for a unicode build). So, what are we missing here and what could possible cause this ?</p>\n\n<hr>\n\n<p>Testing this with a default created mfc project, there is no issue between switching between between a unicode and non-unicode built.</p>\n\n<hr>\n\n<p>Inserting <code>WinMain</code> manually seems to work, which I use as a workaround atm. , however I would prefer not do that (also this will conflict if I later switch back to non-unicode).</p>\n"}, {"tags": ["c++", "msbuild", "qt5", "visual-studio-2019"], "answers": [{"tags": [], "owner": {"reputation": 14371, "user_id": 321866, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/25e93a50d485eca289f887868e1bcea5?s=128&d=identicon&r=PG", "display_name": "C Johnson", "link": "https://stackoverflow.com/users/321866/c-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1573660686, "creation_date": 1573660686, "answer_id": 58840943, "question_id": 58837268, "link": "https://stackoverflow.com/questions/58837268/convert-visualstudio-project-custom-build-steps-to-qt-msbuild/58840943#58840943", "title": "Convert VisualStudio project custom build steps to Qt/MSBuild", "body": "<p>Personally I would never ever (never in a million years) use <strong>custom build steps</strong> in visual studio, nor would I ever in a million years use what-ever QT replaces them with. I find usually that custom build steps are super inflexible. BTW: I have installed this QT/MSBuild tool once and over 3 years have never touched it. Usually using a tool to generate code for you is a recipe for getting project files that are thousands of line long and filled with massive duplication. This is because the makers of the tools, some of the time, do not understand the MSBuild syntax. </p>\n\n<p>Instead you could simply write a custom code that takes a fraction of the space, and you will have more control. Don't ever cede understanding about what is in your project files to some tool that may or may not do what you want.</p>\n\n<p>I have seen c++ projects files that use QT and were generated by CMake that used 'custom build steps' and were 8000+ lines long. I was able to replace them with a project file that was 20 lines long. Which is more maintainable?</p>\n\n<p>What I would suggest is to write custom build targets that run before or after your build.<br>\nThese are documented here:\n<a href=\"https://docs.microsoft.com/en-us/visualstudio/msbuild/target-build-order?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/visualstudio/msbuild/target-build-order?view=vs-2019</a>  </p>\n\n<p>If you want to perform a certain action after a build, you could write a custom target, and use the special attribute called <code>AfterTargets</code>. </p>\n\n<pre><code>&lt;Target Name=\"DoStuff\" AfterTargets=\"Build\"&gt;\n  &lt;Message Text=\"I'm a muffin\" /&gt;\n  &lt;Copy SourceFiles=\"bla bla bla\" DestinationFolder=\"bla bla bla\" /&gt;\n&lt;/Target&gt;\n</code></pre>\n\n<p>Your choices for what to assign the <code>AfterTargets</code> attribute are almost limitless. You can choose <code>Build</code> for when the entire build is completed. You could choose <code>Compile</code>, or <code>Link</code> or a host of others.</p>\n\n<p>Conversely, if you want it to run <em>before</em> some target, you could choose instead to use the attribute <code>BeforeTargets</code>.</p>\n\n<pre><code>&lt;Target Name=\"PrepareSomething\" BeforeTargets=\"Build\"&gt;\n  &lt;Message Text=\"Gettin ready for the build...\" /&gt;\n  &lt;Copy SourceFiles=\"bla bla bla\" DestinationFolder=\"bla bla bla\" /&gt;\n&lt;/Target&gt;\n</code></pre>\n\n<p>In this case it would call your target before the build executes. You can look at the link I put up to find more options.</p>\n\n<p>The place to put these code snippets is inside of one of your *.vcxproj files.</p>\n"}, {"comments": [{"owner": {"reputation": 6003, "user_id": 1012636, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/j898M.jpg?s=128&g=1", "display_name": "7heViking", "link": "https://stackoverflow.com/users/1012636/7heviking"}, "edited": false, "score": 0, "creation_date": 1598444150, "post_id": 63593817, "comment_id": 112460021, "body": "Sorry, cant do any more. I don&#39;t have access now."}], "tags": [], "owner": {"reputation": 9, "user_id": 13565819, "user_type": "registered", "profile_image": "https://graph.facebook.com/3633421276674306/picture?type=large", "display_name": "BBB", "link": "https://stackoverflow.com/users/13565819/bbb"}, "is_accepted": false, "score": 0, "last_activity_date": 1598431231, "creation_date": 1598431231, "answer_id": 63593817, "question_id": 58837268, "link": "https://stackoverflow.com/questions/58837268/convert-visualstudio-project-custom-build-steps-to-qt-msbuild/63593817#63593817", "title": "Convert VisualStudio project custom build steps to Qt/MSBuild", "body": "<p>Can you check your vcxproj file? At <code>&lt;PropertyGroup Label=&quot;Globals&quot;&gt;</code> attribute there is a node with <code>&lt;Keyword&gt;&lt;/Keyword&gt;</code>. If inner text is <code>Win32Proj</code> or something like it, juts change it to <code>QtVS_v302</code>. This would help you to use Qt/MsBuild.</p>\n"}, {"tags": [], "owner": {"reputation": 1378, "user_id": 1607937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7eac48b60589f9a7e483887c07c26c2?s=128&d=identicon&r=PG", "display_name": "Den-Jason", "link": "https://stackoverflow.com/users/1607937/den-jason"}, "is_accepted": false, "score": 0, "last_activity_date": 1600382029, "last_edit_date": 1600382029, "creation_date": 1600376265, "answer_id": 63946102, "question_id": 58837268, "link": "https://stackoverflow.com/questions/58837268/convert-visualstudio-project-custom-build-steps-to-qt-msbuild/63946102#63946102", "title": "Convert VisualStudio project custom build steps to Qt/MSBuild", "body": "<p>I experienced the same today.  The problem is that you created a non-QT application.  The QT build tools are not invoked unless you use one of the Qt new-project types:\n<a href=\"https://i.stack.imgur.com/pioj0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pioj0.png\" alt=\"enter image description here\" /></a></p>\n<p>What is interesting is when you create a QT application in one directory, create a standard Windows application in another (with the same project name), and compare the project files.</p>\n<p>You will find that in the QT application vcproj there is this additional item:</p>\n<pre><code>  &lt;ImportGroup Condition=&quot;Exists('$(QtMsBuild)\\qt.targets')&quot;&gt;\n    &lt;Import Project=&quot;$(QtMsBuild)\\qt.targets&quot; /&gt;\n  &lt;/ImportGroup&gt;\n</code></pre>\n<p>The <code>$(QtMsBuild)</code> refers to the &quot;Globals&quot; section in the vcproj file.  Here it is declared as:</p>\n<pre><code>  &lt;PropertyGroup Label=&quot;Globals&quot;&gt;\n    &lt;ProjectGuid&gt;{B12702AD-ABFB-343A-A199-8E24837244A3}&lt;/ProjectGuid&gt;\n    &lt;Keyword&gt;QtVS_v303&lt;/Keyword&gt;\n    &lt;WindowsTargetPlatformVersion Condition=&quot;'$(Configuration)|$(Platform)' == 'Debug|x64'&quot;&gt;10.0.18362.0&lt;/WindowsTargetPlatformVersion&gt;\n    &lt;WindowsTargetPlatformVersion Condition=&quot;'$(Configuration)|$(Platform)' == 'Release|x64'&quot;&gt;10.0.18362.0&lt;/WindowsTargetPlatformVersion&gt;\n    &lt;WindowsTargetPlatformVersion Condition=&quot;'$(Configuration)|$(Platform)' == 'Release-w-Syms|x64'&quot;&gt;10.0.18362.0&lt;/WindowsTargetPlatformVersion&gt;\n    &lt;QtMsBuild Condition=&quot;'$(QtMsBuild)'=='' OR !Exists('$(QtMsBuild)\\qt.targets')&quot;\n  &gt;$(MSBuildProjectDirectory)\\QtMsBuild&lt;/QtMsBuild&gt;\n  &lt;/PropertyGroup&gt;\n</code></pre>\n<p>whereas in a vanilla Windows app it will be:</p>\n<pre><code>  &lt;PropertyGroup Label=&quot;Globals&quot;&gt;\n    &lt;VCProjectVersion&gt;15.0&lt;/VCProjectVersion&gt;\n    &lt;ProjectGuid&gt;{B12702AD-ABFB-343A-A199-8E24837244A3}&lt;/ProjectGuid&gt;\n    &lt;Keyword&gt;Win32Proj&lt;/Keyword&gt;\n    &lt;RootNamespace&gt;~~~~~~~~~~~~~~~&lt;/RootNamespace&gt;\n    &lt;WindowsTargetPlatformVersion&gt;10.0.18362.0&lt;/WindowsTargetPlatformVersion&gt;\n  &lt;/PropertyGroup&gt;\n</code></pre>\n<p>What is slightly concerning is that some settings such as the following are <em>not</em> defined in the QT version <em>(for the version of QT VS tools that I am using)</em>:</p>\n<pre><code>&lt;UseDebugLibraries&gt;false&lt;/UseDebugLibraries&gt;\n&lt;WholeProgramOptimization&gt;true&lt;/WholeProgramOptimization&gt;\n&lt;CharacterSet&gt;Unicode&lt;/CharacterSet&gt;\n</code></pre>\n<p><em><strong>There are a few more property sections in addition to what I've shown here.</strong></em></p>\n<p>So it may be possible to hack the vcproj file to enable QT support, although I  would not personally recommend it.</p>\n<hr />\n<p>[edit] So after doing all of that, the dialog still appears, and the MOCs are not generated before issuing a build.  Needed to add this to the vcxproj to coax the MOC generator to run:</p>\n<pre><code>&lt;QtMoc&gt;\n  &lt;AdditionalIncludeDirectories&gt;%(AdditionalIncludeDirectories)&lt;/AdditionalIncludeDirectories&gt;\n  &lt;AdditionalUsingDirectories&gt;%(AdditionalUsingDirectories)&lt;/AdditionalUsingDirectories&gt;\n  &lt;OverrideClCompile&gt;extend&lt;/OverrideClCompile&gt;\n&lt;/QtMoc&gt;\n</code></pre>\n<hr />\n<p>and furthermore, you may need to right-click on some of your header files, select <code>properties</code> and change the &quot;item type&quot; to MOC (alternatively change <code>ClInclude</code> to <code>QtMoc</code> in the vcxproj file):\n<a href=\"https://i.stack.imgur.com/al8bF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/al8bF.png\" alt=\"enter image description here\" /></a></p>\n<p>What a royal PITA it can be....</p>\n"}], "owner": {"reputation": 6003, "user_id": 1012636, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/j898M.jpg?s=128&g=1", "display_name": "7heViking", "link": "https://stackoverflow.com/users/1012636/7heviking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 681, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1600382029, "creation_date": 1573648516, "last_edit_date": 1573659599, "question_id": 58837268, "link": "https://stackoverflow.com/questions/58837268/convert-visualstudio-project-custom-build-steps-to-qt-msbuild", "title": "Convert VisualStudio project custom build steps to Qt/MSBuild", "body": "<p>I have found this <a href=\"https://www.qt.io/blog/2018/01/24/qt-visual-studio-new-approach-based-msbuild\" rel=\"nofollow noreferrer\">post</a> from Qt talking about <strong>Qt/MSBuild</strong> as a replacement of <strong>custom build steps</strong>. I am trying to convert my project to use Qt/MSBuild. I have created a blank c++ project and added some project files. All builds just fine with the old <strong>custom build steps</strong> options. </p>\n\n<p>When I right-click on the solution and selects: <strong>Convert custom build steps to Qt/MSBuild</strong> it throws this error message: <strong>Warning: No projects to convert</strong>. But, I have 2 projects in the solution.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jZ5bS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jZ5bS.png\" alt=\"enter image description here\"></a></p>\n\n<p>I susspect that there are some basic project configuration I have missed. Or maybe because I do not have a Qt project file (.pro). Do you have any ideas?</p>\n\n<p>I had a look on the property pages for one of my ui files but could not find the Qt/MSBuild option either:\n<a href=\"https://i.stack.imgur.com/xKOIv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xKOIv.png\" alt=\"enter image description here\"></a></p>\n\n<p>My software:</p>\n\n<ul>\n<li>Qt version: 5.13.0</li>\n<li>Visual studio version: 16.3.7</li>\n<li>Qt Visual Studio tools version: 2.4.2</li>\n</ul>\n"}, {"tags": ["c++", "ipv6", "winsock", "winsock2"], "comments": [{"owner": {"reputation": 145, "user_id": 9088108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/540ece36b5c9fd67855b0b530d095ed8?s=128&d=identicon&r=PG&f=1", "display_name": "samini", "link": "https://stackoverflow.com/users/9088108/samini"}, "edited": false, "score": 0, "creation_date": 1573648503, "post_id": 58837107, "comment_id": 103948845, "body": "what error you gave? Do you check WSAGetLastError() value?"}, {"owner": {"reputation": 1, "user_id": 4940566, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fggeAKv7Vpk/AAAAAAAAAAI/AAAAAAAAABE/Kv2g6I9Uf0w/photo.jpg?sz=128", "display_name": "Prateek Sharma", "link": "https://stackoverflow.com/users/4940566/prateek-sharma"}, "reply_to_user": {"reputation": 145, "user_id": 9088108, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/540ece36b5c9fd67855b0b530d095ed8?s=128&d=identicon&r=PG&f=1", "display_name": "samini", "link": "https://stackoverflow.com/users/9088108/samini"}, "edited": false, "score": 0, "creation_date": 1573656498, "post_id": 58837107, "comment_id": 103953490, "body": "@Samini I used GetLastError() to log the error in Event Viewer.  The error logged is &quot;An unknown, invalid, or unsupported option or level was specified in a getsockopt or setsockopt call."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1573656629, "post_id": 58837107, "comment_id": 103953563, "body": "What is the specific value you are trying to use for the traffic class? It is an eight-bit field, the first six bits are the DS value that ends in <code>0</code>, and the last two bits are the ECN. Not every possible DS value is valid. It looks like your <code>111 010</code> value is invalid, the closest being CS7 (<code>111 000</code>)."}, {"owner": {"reputation": 1, "user_id": 4940566, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fggeAKv7Vpk/AAAAAAAAAAI/AAAAAAAAABE/Kv2g6I9Uf0w/photo.jpg?sz=128", "display_name": "Prateek Sharma", "link": "https://stackoverflow.com/users/4940566/prateek-sharma"}, "edited": false, "score": 0, "creation_date": 1573657214, "post_id": 58837107, "comment_id": 103953900, "body": "I am trying to set value 232(0xe8) which is 11101000"}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 1, "creation_date": 1573658701, "post_id": 58837107, "comment_id": 103954722, "body": "That is not a valid DS value. I mean, are you wanting one of the CS values (1 to 7),  an AF value (AF11, AF12, AF13, AF21, AF22, AF23, AF31, AF32, AF33, AF41, AF42, AF43), or something like BE or EF? What do you want from it? For example, the AF values normally have a higher precedence with a higher first digit, but are more likely to be dropped with a higher second digit, although the routers can be configured to do it differently."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1573659464, "post_id": 58837107, "comment_id": 103955194, "body": "There are specific values for DSCP. You can find <a href=\"https://www.cisco.com/c/en/us/td/docs/switches/datacenter/nexus1000/sw/4_0_4_s_v_1_3/qos/configuration/guide/n1000v_qos/n1000v_qos_6dscpval.html\" rel=\"nofollow noreferrer\">tables describing the values</a>. Also, remember that setting a traffic class actually does nothing unless the routers have been configured to do something with them during congestion, but the default is to ignore the traffic class."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1573659653, "post_id": 58837107, "comment_id": 103955318, "body": "While the last bit is normally <code>0</code>, you can set that bit for experimental values. I&#39;m not sure if the value is the problem you are experiencing, but setting it to what you are trying really will do nothing for you because there will be no routers configured to use that value, so the traffic class will essentially be BE (best effort, which is the default value of <code>00</code>)."}, {"owner": {"reputation": 1, "user_id": 4940566, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fggeAKv7Vpk/AAAAAAAAAAI/AAAAAAAAABE/Kv2g6I9Uf0w/photo.jpg?sz=128", "display_name": "Prateek Sharma", "link": "https://stackoverflow.com/users/4940566/prateek-sharma"}, "edited": false, "score": 0, "creation_date": 1573659751, "post_id": 58837107, "comment_id": 103955389, "body": "I chose 0xe8 as traffic class as I found that value in one of my wireshark logs.  <a href=\"https://i.imgur.com/134nv6o.png\" rel=\"nofollow noreferrer\">i.imgur.com/134nv6o.png</a>  It clearly shows that 0xe8 is being used as traffic class."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1573659859, "post_id": 58837107, "comment_id": 103955471, "body": "Notice that is says <code>DSCP: Unknown</code>. That means the value is actually useless."}, {"owner": {"reputation": 1, "user_id": 4940566, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fggeAKv7Vpk/AAAAAAAAAAI/AAAAAAAAABE/Kv2g6I9Uf0w/photo.jpg?sz=128", "display_name": "Prateek Sharma", "link": "https://stackoverflow.com/users/4940566/prateek-sharma"}, "reply_to_user": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1573668332, "post_id": 58837107, "comment_id": 103960028, "body": "@RonMaupin Appreciate your help.  Can you suggest me any value for traffic class that might work ? I just want to be sure that this thing works."}, {"owner": {"reputation": 4989, "user_id": 3745413, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jQsNL.png?s=128&g=1", "display_name": "Ron Maupin", "link": "https://stackoverflow.com/users/3745413/ron-maupin"}, "edited": false, "score": 0, "creation_date": 1573668663, "post_id": 58837107, "comment_id": 103960193, "body": "Any of the ones in the list I linked. I&#39;m not sure that is the source of your error, but I wanted to point out what are valid values. Also, remember that the traffic class does not do anything except on a router configured to do something about it, and only when there is network congestion on the router. By default, routers ignore the traffic class."}], "owner": {"reputation": 1, "user_id": 4940566, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fggeAKv7Vpk/AAAAAAAAAAI/AAAAAAAAABE/Kv2g6I9Uf0w/photo.jpg?sz=128", "display_name": "Prateek Sharma", "link": "https://stackoverflow.com/users/4940566/prateek-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573691703, "creation_date": 1573647933, "last_edit_date": 1573691703, "question_id": 58837107, "link": "https://stackoverflow.com/questions/58837107/unable-to-set-traffic-classipv6-tclass-using-setsockopt-in-windows", "title": "Unable to set traffic class(IPV6_TCLASS) using setsockopt in windows", "body": "<p>I am trying to set <code>IPV6_TCLASS</code> in Windows, but for some reason I am getting an <code>WSAENOPROTOOPT</code> error (\"An unknown, invalid, or unsupported option or level was specified in a getsockopt or setsockopt call\").</p>\n\n<p>Below is the code to set <code>IPV6_TCLASS</code> class:</p>\n\n<pre><code>const int trafficClass = 232;\nif (setsockopt(sock, IPPROTO_IPV6, IPV6_TCLASS, &amp;trafficClass, sizeof(int)) &lt; 0) \n{\n  //some code\n}\n</code></pre>\n"}, {"tags": ["c++", "textures", "sprite", "sfml", "chess"], "comments": [{"owner": {"reputation": 32176, "user_id": 2173773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/M8yh6.jpg?s=128&g=1", "display_name": "H&#229;kon H&#230;gland", "link": "https://stackoverflow.com/users/2173773/h%c3%a5kon-h%c3%a6gland"}, "edited": false, "score": 0, "creation_date": 1573711240, "post_id": 58837036, "comment_id": 103973371, "body": "Can you provide a link to <code>board0.png</code> also?"}], "answers": [{"tags": [], "owner": {"reputation": 2739, "user_id": 5844572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rulkh.jpg?s=128&g=1", "display_name": "laancelot", "link": "https://stackoverflow.com/users/5844572/laancelot"}, "is_accepted": false, "score": 1, "last_activity_date": 1573671820, "last_edit_date": 1573671820, "creation_date": 1573670875, "answer_id": 58843681, "question_id": 58837036, "link": "https://stackoverflow.com/questions/58837036/sprite-texture-not-dividing-the-pieces-from-the-image-c/58843681#58843681", "title": "Sprite Texture not dividing the pieces from the image C++", "body": "<p>The <code>board</code> array initialization seems wrong. Try it again with something like this:</p>\n\n<pre><code>    int board[8][8] = {\n      { -1,-2,-3,-4,-5,-3,-2,-1 },\n      { -6,-6,-6,-6,-6,-6,-6,-6 },\n      {  0, 0, 0, 0, 0, 0, 0, 0 },\n      {  0, 0, 0, 0, 0, 0, 0, 0 },\n      {  0, 0, 0, 0, 0, 0, 0, 0 },\n      {  0, 0, 0, 0, 0, 0, 0, 0 },\n      {  6, 6, 6, 6, 6, 6, 6, 6 },\n      {  1, 2, 3, 4, 5, 3, 2, 1 }\n    };\n</code></pre>\n\n<p>Explanations: you obviously are trying to declare a two dimensional array, yet you initialize it with one huge 64 items array instead of an array of 8 arrays of 8 items. It later mess up your positions while in the <code>loadPosition</code> method.</p>\n\n<p>Your project looks promising!</p>\n"}], "owner": {"reputation": 45, "user_id": 10045777, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BnnIs8-DoFA/AAAAAAAAAAI/AAAAAAAABoc/OvJm8Xi7xxM/photo.jpg?sz=128", "display_name": "Sohaib Aljey", "link": "https://stackoverflow.com/users/10045777/sohaib-aljey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1573671820, "creation_date": 1573647717, "last_edit_date": 1573671616, "question_id": 58837036, "link": "https://stackoverflow.com/questions/58837036/sprite-texture-not-dividing-the-pieces-from-the-image-c", "title": "Sprite Texture not dividing the pieces from the image C++", "body": "<p>Good day, I am trying to create a chess game from scratch using SFML the problem I am having is I end up with the picture attached below instead of having the chess piece by piece. right now I am not worried about the functionality of the game or the user command all I want is to run my code and see the normal chessboard.</p>\n\n<p>This is what my code output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jsgil.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jsgil.png\" alt=\"my problematic output\"></a></p>\n\n<p>and this is my <strong>main.cpp</strong> </p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;time.h&gt;\nusing namespace sf;\n\nint size = 56;\nSprite f[32];\nint board[8][8] =\n{ -1,-2,-3,-4,-5,-3,-2,-1,\n -6,-6,-6,-6,-6,-6,-6,-6,\n  0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0,\n  0, 0, 0, 0, 0, 0, 0, 0,\n  6, 6, 6, 6, 6, 6, 6, 6,\n  1, 2, 3, 4, 5, 3, 2, 1 };\n\nvoid loadPosition() {\n    int num = 0 ;\n    for(int i = 0; i &lt; 8; i++)\n        for (int j = 0; j &lt; 8; j++) {\n            int n = board[i][j];\n            if (!n)continue;\n            int x = abs(n) - 1;\n            int y = n &gt; 0 ? 1 : 0;\n            f[num].setTextureRect(IntRect(size * x, size * y, size, size));\n            f[num].setPosition(size * j, size * i);\n            num++;\n        }\n}\n\nint main()\n{\n    RenderWindow game(VideoMode(453, 453), \"Suhaib-Chess\");\n    Texture t1,t2;\n    t1.loadFromFile(\"img/pieces.png\");\n    t2.loadFromFile(\"img/board0.png\");\n    Sprite s;\n    Sprite sBoard(t2);\n    s.setTexture(t1);\n\n    for (int i = 0; i &lt; 32; i++)f[i].setTexture(t1);\n    loadPosition;\n\n    bool isMove = false;\n    float dx = 0;\n    float dy = 0;\n\n    while (game.isOpen()) {\n        Vector2i position = Mouse::getPosition(game);\n        Event e;\n        while (game.pollEvent(e)) {\n            if (e.type == Event::Closed) \n                game.close();\n\n            if(e.type == Event::MouseButtonPressed)\n                if(e.key.code == Mouse::Left)\n                    if (s.getGlobalBounds().contains(position.x, position.y)) {\n                        isMove = true;\n                        dx = position.x - s.getPosition().x;\n                        dy = position.y - s.getPosition().y;\n                    }\n            if (e.type == Event::MouseButtonReleased)\n                if (e.key.code == Mouse::Left)\n                    isMove = false; \n        }\n        if (isMove == true) s.setPosition(position.x - dx, position.y - dy);\n        game.clear();\n        game.draw(sBoard);\n        for (int i = 0; i &lt; 32; i++)game.draw(f[i]);\n        game.display();\n\n    }\n    return 0;\n}\n</code></pre>\n\n<h2>picture i am trying to use:</h2>\n\n<p><a href=\"https://i.stack.imgur.com/iEk6B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iEk6B.png\" alt=\"enter image description here\"></a></p>\n"}]