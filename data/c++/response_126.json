[{"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1496878525, "post_id": 44424374, "comment_id": 75847216, "body": "Why are you using pointers in the second case"}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 2, "creation_date": 1496878588, "post_id": 44424374, "comment_id": 75847230, "body": "On the left hand side you have <code>unsigned int *</code> on the right hand side you have <code>uint32_t</code> - why do you expect them to be assignment compatible? What are you trying to accomplish?"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1496878699, "post_id": 44424374, "comment_id": 75847261, "body": "Doing &amp; 0xFFFFFFFF00000000 before shifting seems useless. Same for &amp; 0x00000000FFFFFFFF before casting."}, {"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 1, "creation_date": 1496878699, "post_id": 44424374, "comment_id": 75847262, "body": "You are trying to initialize a pointer with an integer. I don&#39;t see why you are surprised that doesn&#39;t work."}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "reply_to_user": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "edited": false, "score": 0, "creation_date": 1496878702, "post_id": 44424374, "comment_id": 75847264, "body": "@NetMage the RHS is not <code>uint32_t</code>"}, {"owner": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 1, "creation_date": 1496878747, "post_id": 44424374, "comment_id": 75847273, "body": "The error tells you what&#39;s wrong, read it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1496879225, "post_id": 44424374, "comment_id": 75847401, "body": "<code>first32</code> should be declared as an <code>unsigned int</code>, not <code>unsigned int *</code>."}, {"owner": {"reputation": 22172, "user_id": 2557128, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3cc7fed3c952511b85cfb1c822ecb75?s=128&d=identicon&r=PG", "display_name": "NetMage", "link": "https://stackoverflow.com/users/2557128/netmage"}, "reply_to_user": {"reputation": 152528, "user_id": 981959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04798ba8ef6591a9c23c5868dc0bf664?s=128&d=identicon&r=PG", "display_name": "Jonathan Wakely", "link": "https://stackoverflow.com/users/981959/jonathan-wakely"}, "edited": false, "score": 0, "creation_date": 1496879520, "post_id": 44424374, "comment_id": 75847475, "body": "@JonathanWakely Technically true, but for purposes of this discussion, it is <i>effectively</i> (or assignment compatible) with <code>uint32_t</code>."}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1496879684, "creation_date": 1496879684, "answer_id": 44424525, "question_id": 44424374, "link": "https://stackoverflow.com/questions/44424374/getting-the-most-32-significant-bits-from-unsigned-long-long-error/44424525#44424525", "title": "getting the most 32 significant bits from unsigned long long error", "body": "<p>In the statement</p>\n\n<pre><code>unsigned int * first32 = (*(bits64 + 0) &amp; 0xFFFFFFFF00000000) &gt;&gt; 32;\n</code></pre>\n\n<p>the LHS is of type <code>unsigned int*</code> while the RHS is of type <code>unsigned long long</code>. That's what the compiler is complaining about.</p>\n\n<p>You can use:</p>\n\n<pre><code>unsigned int first32 = (*(bits64 + 0) &amp; 0xFFFFFFFF00000000) &gt;&gt; 32;\n</code></pre>\n\n<p>If you must use dynamically allocated memory you can use:</p>\n\n<pre><code>unsigned int * first32 = new unsigned int[1];\n*first32 = (*(bits64 + 0) &amp; 0xFFFFFFFF00000000) &gt;&gt; 32;\n</code></pre>\n"}], "owner": {"reputation": 669, "user_id": 5991761, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/984565203d53cc51598def5bb244f159?s=128&d=identicon&r=PG&f=1", "display_name": "Mint.K", "link": "https://stackoverflow.com/users/5991761/mint-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1496910805, "answer_count": 1, "score": -3, "last_activity_date": 1496879684, "creation_date": 1496878424, "question_id": 44424374, "link": "https://stackoverflow.com/questions/44424374/getting-the-most-32-significant-bits-from-unsigned-long-long-error", "closed_reason": "Needs details or clarity", "title": "getting the most 32 significant bits from unsigned long long error", "body": "<p>I am trying to store the most significant 32 bits that is stored in unsigned long long into unsigned int.\nI can simply use the code below I got from Stack Overflow:</p>\n\n<pre><code>uint64_t temp;\nuint32_t msw, lsw;\nmsw = (temp &amp; 0xFFFFFFFF00000000) &gt;&gt; 32;\nlsw = temp &amp; 0x00000000FFFFFFFF;\n</code></pre>\n\n<p>However, I've used an array to do a similar thing:</p>\n\n<pre><code>unsigned long long * bits64 = new unsigned long long[1];\n*(bits64 + 0) = 18446744073709551615;\nunsigned int * first32 = (*(bits64 + 0) &amp; 0xFFFFFFFF00000000) &gt;&gt; 32;\n</code></pre>\n\n<p>Why am I getting</p>\n\n<blockquote>\n  <p>'Cannot initialize a variable of type 'unsigned int *' with an rvalue\n  of type unsigned long long'</p>\n</blockquote>\n\n<p>How do I fix this?</p>\n"}, {"tags": ["python", "c++", "arrays", "numpy", "swig"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 7967265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668702729b917f51e83f7d1c605e796c?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/7967265/tony"}, "edited": false, "score": 0, "creation_date": 1497039440, "post_id": 44424387, "comment_id": 75928929, "body": "Yes, it&#39;s a general int** and it has 2 possible size. I already know how to make it work with adding code snippet in the c++ definition. But I&#39;m still looking for a way to make it work by only editing the interface file or the python part. Thanks!"}], "tags": [], "owner": {"reputation": 1, "user_id": 2731169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4b16be94ffd0e276ee260ee2181e462?s=128&d=identicon&r=PG&f=1", "display_name": "berks", "link": "https://stackoverflow.com/users/2731169/berks"}, "is_accepted": false, "score": 0, "last_activity_date": 1496945663, "last_edit_date": 1496945663, "creation_date": 1496878504, "answer_id": 44424387, "question_id": 44424308, "link": "https://stackoverflow.com/questions/44424308/reading-c-2d-array-in-python-swig/44424387#44424387", "title": "Reading c++ 2d array in python swig", "body": "<p>Your question would be easier to answer if you could add a code snippet of your C++ definition (or C if you use int**). When you say \"2d int array\", do you mean a general int**? Is the array size known in advance?</p>\n\n<p>At any rate, you could probably use <a href=\"https://docs.scipy.org/doc/numpy/reference/swig.interface-file.html\" rel=\"nofollow noreferrer\">numpy.i</a> but it depends on the fine details of your array.</p>\n\n<p>See this somewhat related question:\n<a href=\"https://stackoverflow.com/questions/30259591/swig-and-multidimensional-arrays\">Swig and multidimensional arrays</a></p>\n"}, {"tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": false, "score": 0, "last_activity_date": 1496881479, "creation_date": 1496881479, "answer_id": 44424756, "question_id": 44424308, "link": "https://stackoverflow.com/questions/44424308/reading-c-2d-array-in-python-swig/44424756#44424756", "title": "Reading c++ 2d array in python swig", "body": "<p>You'll find that passing things back and forth between languages is much easier if you use a one-dimensional array in which you access elements using, e.g. <code>arr[y*WIDTH+x]</code>.</p>\n\n<p>Since you are operating in C++ you can even wrap these arrays in classes with nice <code>operator()(int x, int y)</code> methods for use on the C++ side.</p>\n\n<p>In fact, this is the internal representation which Numpy uses for arrays: they are all one-dimensional.</p>\n"}], "owner": {"reputation": 9, "user_id": 7967265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/668702729b917f51e83f7d1c605e796c?s=128&d=identicon&r=PG&f=1", "display_name": "Tony", "link": "https://stackoverflow.com/users/7967265/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1496945663, "creation_date": 1496877978, "last_edit_date": 1496883155, "question_id": 44424308, "link": "https://stackoverflow.com/questions/44424308/reading-c-2d-array-in-python-swig", "title": "Reading c++ 2d array in python swig", "body": "<p>C++ part\nI have a class <code>a</code> with a <strong>public</strong> variable 2d int array <code>b</code> that I want to print out in python.(The way I want to access it is <code>a.b</code>)</p>\n\n<p>I have been able to wrap the most part of the code and I can call most of the functions in class a in python now.</p>\n\n<p>So how can I read b in python? How to read it into an numpy array with numpy.i(I find some solution on how to work with a function not variable)? Is there a way I can read any array in the c++ library? Or I have to deal with each of the variables in the interface file.</p>\n\n<p>for now b is <code>&lt;Swig Object of type 'int (*)[24]' at 0x02F65158&gt;</code> when I try to use it in python</p>\n\n<p>ps:\n1. If possible I don't want to modify the cpp part.</p>\n\n<ol start=\"2\">\n<li>I'm trying to access a variable, not a function. </li>\n</ol>\n\n<p>So don't refer me to links that doesn't really answer my question, thanks.</p>\n"}, {"tags": ["c++", "c", "gcc5"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1496877404, "post_id": 44424165, "comment_id": 75846888, "body": "Did you run <code>ranlib</code>?"}, {"owner": {"reputation": 16949, "user_id": 7256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zZFSI.jpg?s=128&g=1", "display_name": "janm", "link": "https://stackoverflow.com/users/7256/janm"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496880129, "post_id": 44424165, "comment_id": 75847625, "body": "@BoundaryImposition Is probably right, and the error message &quot;Archive has no index; run ranlib to add one&quot; gives it away. You need to run ranlib"}, {"owner": {"reputation": 45534, "user_id": 106104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c88b9310b92a937108ec4336c2832f92?s=128&d=identicon&r=PG", "display_name": "user253751", "link": "https://stackoverflow.com/users/106104/user253751"}, "edited": false, "score": 0, "creation_date": 1496884587, "post_id": 44424165, "comment_id": 75848652, "body": "It means the archive has no index; you can run ranlib to add one."}, {"owner": {"reputation": 1985, "user_id": 4612476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719f14270bfe54a8a9cf6e831fde6aa2?s=128&d=identicon&r=PG", "display_name": "Cameron Tacklind", "link": "https://stackoverflow.com/users/4612476/cameron-tacklind"}, "edited": false, "score": 0, "creation_date": 1496957107, "post_id": 44424165, "comment_id": 75889220, "body": "Why would I need to run <code>ranlib</code> on this archive and not any others?"}], "answers": [{"tags": [], "owner": {"reputation": 213, "user_id": 7267991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fdf8318af718e0c72317d3674ce008c?s=128&d=identicon&r=PG", "display_name": "Jimmy", "link": "https://stackoverflow.com/users/7267991/jimmy"}, "is_accepted": false, "score": 0, "last_activity_date": 1496914585, "creation_date": 1496914585, "answer_id": 44432000, "question_id": 44424165, "link": "https://stackoverflow.com/questions/44424165/using-archive-file-for-compiled-object-seems-to-break-compilation/44432000#44432000", "title": "Using archive file for compiled object seems to break compilation", "body": "<p>Hope this hint can help you: <a href=\"https://github.com/ap4y/modbus.js/issues/1\" rel=\"nofollow noreferrer\">https://github.com/ap4y/modbus.js/issues/1</a></p>\n\n<blockquote>\n  <p>Hi, you have this error because static library (libmodbus.a) have been\n  precompiled for other platform. Actually, it my mistake to leave it in\n  repository. In order to resolve this error you should compile library\n  for your platform and replace it in lib directory.</p>\n</blockquote>\n"}], "owner": {"reputation": 1985, "user_id": 4612476, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/719f14270bfe54a8a9cf6e831fde6aa2?s=128&d=identicon&r=PG", "display_name": "Cameron Tacklind", "link": "https://stackoverflow.com/users/4612476/cameron-tacklind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1497405560, "creation_date": 1496877017, "last_edit_date": 1497405560, "question_id": 44424165, "link": "https://stackoverflow.com/questions/44424165/using-archive-file-for-compiled-object-seems-to-break-compilation", "title": "Using archive file for compiled object seems to break compilation", "body": "<p>I have a large project with a custom Makefile building everything. This is for an ARM Cortex-M0.</p>\n\n<p>One of the steps is to compile a Newlib <code>syscalls.c</code> into <code>syscalls.c.o</code>. That gets dumped into an archive file <code>newlib.a</code> which in turn is linked to the final <code>output.elf</code> for loading onto my device's flash.</p>\n\n<pre><code>$ arm-none-eabi-gcc -o output.elf .bld/*.c.o .bld/*.cpp.o .bld/libs/*.a -nostartfiles -mcpu=cortex-m0 -mthumb -Tlinker.ld -Wl,-Map=output.map --specs=nano.specs\n</code></pre>\n\n<p>If I follow the above procedure, sometimes the \"Archive has no index\":</p>\n\n<pre><code>.bld/libs/newlib.a: error adding symbols: Archive has no index; run ranlib to add one\n</code></pre>\n\n<p>And sometimes (I have not figured out how to deterministically make one or the other happen) I get an undefined reference even though <code>_init()</code> is defined, as an empty function, in <code>syscalls.c</code>.</p>\n\n<pre><code>c:/progra~2/gnutoo~1/50a5a~1.420/bin/../lib/gcc/arm-none-eabi/5.4.1/../../../../arm-none-eabi/lib/armv6-m\\libc_nano.a(lib_a-init.o): In function `__libc_init_array':\ninit.c:(.text.__libc_init_array+0x1c): undefined reference to `_init'\n</code></pre>\n\n<p>However, if I skip the <code>newlib.a</code> file and just directly link <code>syscalls.c.o</code> into the final <code>.elf</code>, it works as expected.</p>\n\n<p>What about using an archive could be causing this issue? I've also tried reordering the arguments to the linker to no avail.</p>\n\n<h3>Note (edit)</h3>\n\n<p>I did notice the <code>run ranlib to add one</code> instruction. However, this does not apply because:</p>\n\n<ol>\n<li>This is not necessary on other archives that I'm building, why is it needed here?</li>\n<li>That error doesn't happen anymore (after some fiddling. not sure what changed). The main issue is that <code>_init</code> is undefined.</li>\n</ol>\n\n<hr>\n\n<h3>Reference</h3>\n\n<ol>\n<li><p>I'm compiling other archive files in this build with no issues. The unique things here are that this archive only has one file in it and it's the only C-only archive. However, I don't see how this could affect things.</p></li>\n<li><p>This is basically how I'm compiling <code>syscalls.c</code> and archiving the <code>.o</code> file:</p>\n\n<pre><code>$ arm-none-eabi-gcc newlib/syscalls.c -o .bld/newlib/syscalls.c.o -c -std=gnu11 -Wstrict-prototypes -nostartfiles -mcpu=cortex-m0 -mthumb -O2 -pipe -ffreestanding -funsigned-bitfields -Wall -Wfatal-errors -ffunction-sections -fdata-sections -MMD -MP -MF .bld/.dep/newlib/syscalls.c.o.d\n$ arm-none-eabi-ar rcs .bld/libs/newlib.a .bld/newlib/syscalls.c.o\n</code></pre></li>\n<li><p><code>gcc</code> version</p>\n\n<pre><code>arm-none-eabi-g++ (GNU Tools for ARM Embedded Processors) 5.4.1 20160919 (release) [ARM/embedded-5-branch revision 240496]\n</code></pre></li>\n<li><p>Simplified <code>syscalls.c</code></p>\n\n<pre><code>caddr_t _sbrk(int nbytes) __attribute__((externally_visible));\nvoid _init(void) __attribute__((externally_visible));\n\n/* c++ destructor dynamic shared object needed if -fuse-cxa-atexit is used*/\nvoid *__dso_handle __attribute__ ((weak));\n\n// defined in linker script\nextern caddr_t Heap_Bank1_Start;\nextern caddr_t Heap_Bank1_End;\n\ncaddr_t _sbrk(int nbytes) { /* ... */ }\nvoid _init(void) {}\n</code></pre></li>\n</ol>\n"}, {"tags": ["c++", "drawing", "sfml"], "comments": [{"owner": {"reputation": 56, "user_id": 4057415, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-pB-q2rAcbn8/AAAAAAAAAAI/AAAAAAAAANY/J4M671cXZ8s/photo.jpg?sz=128", "display_name": "Rodolphe Chartier", "link": "https://stackoverflow.com/users/4057415/rodolphe-chartier"}, "edited": false, "score": 0, "creation_date": 1496878691, "post_id": 44423803, "comment_id": 75880082, "body": "What is newX and newY ? What are you trying to draw with your sprite, you just asign positions... There&#39;s no texture nor color. And could you write down just what is going wrong please ?"}, {"owner": {"reputation": 91, "user_id": 7864667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f7b260bbd5094dad2d4b397ee5b8366?s=128&d=identicon&r=PG&f=1", "display_name": "nepp95", "link": "https://stackoverflow.com/users/7864667/nepp95"}, "edited": false, "score": 0, "creation_date": 1496910955, "post_id": 44423803, "comment_id": 75880084, "body": "I left it out because it was so much code already. The step by step process: <code>map</code> is initialized in the <code>StatePlay</code> constructor, it generates a default 500x500 tiles map. Then the camera is set to the center of this. (250 x tilesize). This uses <code>sf::View::move</code> and updates the location private in the camera class. In the <code>StatePlay::draw</code> it loops x and y till &lt; 64, which is the <code>chunkSize</code>. So this should draw tiles 218 till 282, on both x and y. The <code>newX</code> and <code>newY</code> are merely getting the location of the camera and making sure the first loop starts at that <code>218</code>. See the image in question."}, {"owner": {"reputation": 56, "user_id": 4057415, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-pB-q2rAcbn8/AAAAAAAAAAI/AAAAAAAAANY/J4M671cXZ8s/photo.jpg?sz=128", "display_name": "Rodolphe Chartier", "link": "https://stackoverflow.com/users/4057415/rodolphe-chartier"}, "edited": false, "score": 0, "creation_date": 1496911740, "post_id": 44423803, "comment_id": 75880085, "body": "have you tried with the default view at first ?"}, {"owner": {"reputation": 91, "user_id": 7864667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f7b260bbd5094dad2d4b397ee5b8366?s=128&d=identicon&r=PG&f=1", "display_name": "nepp95", "link": "https://stackoverflow.com/users/7864667/nepp95"}, "edited": false, "score": 0, "creation_date": 1496930226, "post_id": 44423803, "comment_id": 75880086, "body": "Yes, without moving the camera and leaving it at its default position. Also drawing the tiles from x = 0 and y = 0. This works but it should start at the center of the map so you can move in each direction instead of only to the bottom right. Tiles are not saved with a negative value, so I have to create that myself."}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 1, "creation_date": 1497000242, "post_id": 44438169, "comment_id": 75904393, "body": "You should mark this answer as accepted so people know that the question has an answer that solved the problem."}, {"owner": {"reputation": 91, "user_id": 7864667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f7b260bbd5094dad2d4b397ee5b8366?s=128&d=identicon&r=PG&f=1", "display_name": "nepp95", "link": "https://stackoverflow.com/users/7864667/nepp95"}, "reply_to_user": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1497020412, "post_id": 44438169, "comment_id": 75918530, "body": "Will do, but is not possible in the first 24 hours."}], "tags": [], "owner": {"reputation": 91, "user_id": 7864667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f7b260bbd5094dad2d4b397ee5b8366?s=128&d=identicon&r=PG&f=1", "display_name": "nepp95", "link": "https://stackoverflow.com/users/7864667/nepp95"}, "is_accepted": true, "score": 0, "last_activity_date": 1496931238, "creation_date": 1496931238, "answer_id": 44438169, "question_id": 44423803, "link": "https://stackoverflow.com/questions/44423803/tiles-being-drawn-in-the-wrong-location/44438169#44438169", "title": "Tiles being drawn in the wrong location", "body": "<p>I have fixed the problem. It was a very stupid mistake...</p>\n\n<p>At first without drawing anything, it is normal to center the view on <code>0.5f * sf::View::getSize()</code> to get the view centered in your window. So the center was already at half of my window size. When using <code>Camera::setLocation()</code>, I used the <code>sf::View::move()</code> to move the view accordingly. So when trying to center it on the map, it added the x and y correctly, but also half of my window size. This resulted in having an offset which was incorrect. Substracting or leaving those values out has fixed this stupid problem.</p>\n\n<p>Thank you for the help.</p>\n"}], "owner": {"reputation": 91, "user_id": 7864667, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f7b260bbd5094dad2d4b397ee5b8366?s=128&d=identicon&r=PG&f=1", "display_name": "nepp95", "link": "https://stackoverflow.com/users/7864667/nepp95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 44438169, "answer_count": 1, "score": 0, "last_activity_date": 1496933769, "creation_date": 1496874739, "last_edit_date": 1496933769, "question_id": 44423803, "link": "https://stackoverflow.com/questions/44423803/tiles-being-drawn-in-the-wrong-location", "title": "Tiles being drawn in the wrong location", "body": "<p>I've finally managed to get my tiles drawn on the screen somewhat in a correct way. Although the location is a bit off and I can't seem to figure out why...</p>\n\n<p>I'm using SFML for drawing.</p>\n\n<p>Tile.hpp:</p>\n\n<pre><code>#ifndef TILE_HPP\n#define TILE_HPP\n\n#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;SFML/System.hpp&gt;\n\n#include \"textureManager.hpp\"\n\nclass Tile {\npublic:\n    Tile();\n    Tile(sf::Vector2i coord, int biome);\n    ~Tile();\n\n    sf::Vector2i getCoord() const { return coord; };\n    int getBiome() const { return biome; };\n\n    void setCoord(sf::Vector2i coord) { this-&gt;coord = coord; };\n    void setBiome(int biome) { this-&gt;biome = biome; };\n\n    void draw(int x, int y, sf::RenderWindow* rw);\n    void update(sf::Texture&amp; texture);\n\nprivate:\n    sf::Vector2i coord;\n    int biome;\n\n    sf::Sprite sprite;\n};\n\n#endif\n</code></pre>\n\n<p>Tile.cpp</p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n#include &lt;SFML/System.hpp&gt;\n\n#include \"textureManager.hpp\"\n#include \"tile.hpp\"\n\nTile::Tile()\n{}\n\nTile::Tile(sf::Vector2i coord, int biome) {\n    this-&gt;biome = biome;\n    this-&gt;coord = coord;\n}\n\nTile::~Tile(){}\n\nvoid Tile::draw(int x, int y, sf::RenderWindow* rw)\n{\n    sprite.setPosition(x, y);\n    rw-&gt;draw(sprite);\n}\n\nvoid Tile::update(sf::Texture&amp; texture)\n{\n    switch (biome)\n    {\n        // Not important here\n    }\n}\n</code></pre>\n\n<p>Now the more relevant part: the drawing</p>\n\n<pre><code>void StatePlay::draw(const float dt)\n{\n    game-&gt;window.setView(view);\n    game-&gt;window.clear(sf::Color::Black);\n\n    sf::Vector2f offset = camera.getLocation();\n    int newX = (offset.x / map.getTileSize()) - (map.chunkSize / 2);\n    int newY = (offset.y / map.getTileSize()) - (map.chunkSize / 2);\n\n    for (int x = 0; x &lt; map.chunkSize; x++)\n    {\n        for (int y = 0; y &lt; map.chunkSize; y++)\n            {\n                Tile tile = map.getTile(newX + x, newY + y);\n                tile.draw((newX + x) * map.getTileSize(), (newY + y) * map.getTileSize(), &amp;game-&gt;window);\n            }\n        }\n\n    return;\n}\n\nStatePlay::StatePlay(Game* game)\n{\n    this-&gt;game = game;\n    sf::Vector2f pos = sf::Vector2f(game-&gt;window.getSize()); // 1366x768\n    view.setSize(pos);\n    pos *= 0.5f; // 688x384\n    view.setCenter(pos);\n\n    // Initialize map\n    map.init(game-&gt;gameTime, game-&gt;textureManager.getImage(\"tileset.png\"));\n\n    float w     = (float) map.getWidth(); // 500\n    float h     = (float) map.getHeight(); // 500\n    w           *= 0.5f; // 250\n    h           *= 0.5f; // 250\n    w           *= map.getTileSize(); // 250 * 32 = 8000\n    h           *= map.getTileSize(); // 250 * 32 = 8000\n    // Move camera\n    // Uses view::move from sfml to move the view with w and h\n    // Also sets camera private to w and h values, return with camera::getLocation()\n    camera.setLocation(&amp;view, sf::Vector2f(w, h));\n}\n</code></pre>\n\n<p>The result is that I only see the ~10 tiles squared, in the bottom left corner of my screen, covering about 3/4.</p>\n\n<p><img src=\"https://i.stack.imgur.com/dRUag.png\" alt=\"Example\"></p>\n\n<p>The correct tiles are chosen, but the draw location is wrong... It should draw the center of 64x64 (x 32px each) tiles, as much as fit on the screen.</p>\n"}, {"tags": ["android", "c++", "ios", "llvm", "cross-compiling"], "comments": [{"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1496875260, "post_id": 44423725, "comment_id": 75846204, "body": "Yes. Yes it is."}, {"owner": {"reputation": 5751, "user_id": 1101692, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0207bd98c9e3f6f855d82aff720437aa?s=128&d=identicon&r=PG", "display_name": "Shark", "link": "https://stackoverflow.com/users/1101692/shark"}, "edited": false, "score": 0, "creation_date": 1496875688, "post_id": 44423725, "comment_id": 75846331, "body": "To cross-compile it for android, you&#39;ll probably want to use a <a href=\"https://developer.android.com/ndk/guides/standalone_toolchain.html\" rel=\"nofollow noreferrer\">standalone toolchain</a>"}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1497099771, "post_id": 44423725, "comment_id": 75942764, "body": "Do you want to have a <b>single</b> file that will work on all platforms? Because that is impossible."}, {"owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "reply_to_user": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1497118403, "post_id": 44423725, "comment_id": 75948418, "body": "@BenSteffan: No, I want a single file that would compile on Ubuntu (or any linux of your choise) an LLVM IR into binaries for iOS, Android, Windows and Mac (.dll, .dylib...)"}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1497124325, "post_id": 44423725, "comment_id": 75950108, "body": "@DuckQueen I see. That that should certainly be possible. I will take a look into the issue."}, {"owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "reply_to_user": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 0, "creation_date": 1501105597, "post_id": 44423725, "comment_id": 77637929, "body": "@BenSteffan: so what do you think?"}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "edited": false, "score": 3, "creation_date": 1497167588, "post_id": 44480227, "comment_id": 75957629, "body": "1. Please provide a single example script that would compile (any) example library of your choise to all 4 platforms. 2. could one use <code>-mtriple=i686-pc-windows-msvc</code> for windows when crosscompiling from Linux"}], "tags": [], "owner": {"reputation": 447, "user_id": 7536849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LZ1XM.png?s=128&g=1", "display_name": "ajkhoury", "link": "https://stackoverflow.com/users/7536849/ajkhoury"}, "is_accepted": false, "score": 19, "last_activity_date": 1502121124, "last_edit_date": 1502121124, "creation_date": 1497153424, "answer_id": 44480227, "question_id": 44423725, "link": "https://stackoverflow.com/questions/44423725/having-llvm-ir-library-how-to-crosscompile-it-to-ios-android-windows-and-mac-f/44480227#44480227", "title": "Having LLVM IR library how to crosscompile it to iOS, Android, Windows and Mac from Ubuntu?", "body": "<p>Using the <a href=\"http://llvm.org/docs/CommandGuide/llc.html\" rel=\"noreferrer\">LLVM static compiler</a> (llc), you can compile the LLVM IR into object files for a specific <em>target triple</em>. Though the target triples are not documented very well, the LLVM infrastructure is all open source, so a quick search through the source code will lead you <a href=\"https://github.com/llvm-mirror/llvm/blob/master/lib/Support/Triple.cpp\" rel=\"noreferrer\" title=\"LLVM Target Triples\">here</a>.</p>\n\n<p>Unfortunately, there is no documentation for a discrete list of possible target triples you can use. However, if you know exactly what system you're targeting, constructing a triple is fairly easy. Taken from the <a href=\"https://clang.llvm.org/docs/CrossCompilation.html#target-triple\" rel=\"noreferrer\">target triple documentation</a>, you can see :</p>\n\n<blockquote>\n  <p>The triple has the general format <code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>,\n  where:</p>\n  \n  <ul>\n  <li><code>arch</code> = <code>x86_64</code>, <code>i386</code>, <code>arm</code>, <code>thumb</code>, <code>mips</code>, etc.</li>\n  <li><code>sub</code> = for ex. on ARM: <code>v5</code>, <code>v6m</code>, <code>v7a</code>, <code>v7m</code>, etc.</li>\n  <li><code>vendor</code> = <code>pc</code>, <code>apple</code>, <code>nvidia</code>, <code>ibm</code>, etc.</li>\n  <li><code>sys</code> = <code>none</code>, <code>linux</code>, <code>win32</code>, <code>darwin</code>, <code>cuda</code>, etc.</li>\n  <li><code>abi</code> = <code>eabi</code>, <code>gnu</code>, <code>android</code>, <code>macho</code>, <code>elf</code>, etc.</li>\n  </ul>\n</blockquote>\n\n<p>Once you figure out what target triple you're using, you specify it as a string using the <code>-mtriple</code> flag. Here are some examples:</p>\n\n<ul>\n<li>Windows: <code>-mtriple=i686-pc-win32-gnu</code></li>\n<li>Linux: <code>-mtriple=i686-pc-linux-gnu</code></li>\n<li>IOS: <code>-mtriple=armv7-apple-ios</code></li>\n<li>Android: <code>-mtriple=arm-linux-androideabi</code></li>\n</ul>\n\n<p>Next, you need to specify that you want to compile an object file using the filetype flag:</p>\n\n<pre><code>-filetype=obj\n</code></pre>\n\n<p>This should be enough if I understand your question correctly. </p>\n\n<p>If you're expecting to use a single file on all platforms and operating systems, while this is possible, it would take <strong>a lot</strong> of work and I wouldn't expect an answer regarding that here on stackoverflow. </p>\n"}, {"comments": [{"owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "edited": false, "score": 1, "creation_date": 1498340495, "post_id": 44739929, "comment_id": 76463618, "body": "Please provide a single example script that would compile (any) example library of your choise to all 4 platforms"}, {"owner": {"reputation": 10771, "user_id": 2427065, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/f0RVn.jpg?s=128&g=1", "display_name": "Sagar V", "link": "https://stackoverflow.com/users/2427065/sagar-v"}, "reply_to_user": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "edited": false, "score": 0, "creation_date": 1498824176, "post_id": 44739929, "comment_id": 76672174, "body": "@DuckQueen as far as I know, it is not possible"}], "tags": [], "owner": {"reputation": 10771, "user_id": 2427065, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/f0RVn.jpg?s=128&g=1", "display_name": "Sagar V", "link": "https://stackoverflow.com/users/2427065/sagar-v"}, "is_accepted": false, "score": -1, "last_activity_date": 1498330727, "creation_date": 1498330727, "answer_id": 44739929, "question_id": 44423725, "link": "https://stackoverflow.com/questions/44423725/having-llvm-ir-library-how-to-crosscompile-it-to-ios-android-windows-and-mac-f/44739929#44739929", "title": "Having LLVM IR library how to crosscompile it to iOS, Android, Windows and Mac from Ubuntu?", "body": "<p>From <a href=\"http://llvm.org/docs/GettingStarted.html#local-llvm-configuration\" rel=\"nofollow noreferrer\">this link</a>, There is a Variable <code>LLVM_TARGETS_TO_BUILD</code> and the definition says that</p>\n\n<blockquote>\n  <p>A semicolon delimited list controlling which targets will be built and linked into llc. This is equivalent to the <code>--enable-targets</code> option in the configure script. The default list is defined as LLVM_ALL_TARGETS, and can be set to include out-of-tree targets. The default value includes: AArch64, AMDGPU, ARM, BPF, Hexagon, Mips, MSP430, NVPTX, PowerPC, Sparc, SystemZ, X86, XCore.</p>\n</blockquote>\n\n<p>You should add the X86 and ARM is present in it. you need to add support for 64 and Apple</p>\n\n<p>From <a href=\"http://llvm.org/docs/GettingStarted.html#cross-compiling-llvm\" rel=\"nofollow noreferrer\">this link</a></p>\n\n<blockquote>\n  <p>It is possible to cross compile</p>\n</blockquote>\n\n<p>The example command looks like</p>\n\n<pre><code>% cmake -G \"Ninja\" -DCMAKE_OSX_ARCHITECTURES=\"armv7;armv7s;arm64\"\n  -DCMAKE_TOOLCHAIN_FILE=&lt;PATH_TO_LLVM&gt;/cmake/platforms/iOS.cmake\n  -DCMAKE_BUILD_TYPE=Release -DLLVM_BUILD_RUNTIME=Off -DLLVM_INCLUDE_TESTS=Off\n  -DLLVM_INCLUDE_EXAMPLES=Off -DLLVM_ENABLE_BACKTRACES=Off [options]\n  &lt;PATH_TO_LLVM&gt;\n</code></pre>\n\n<p>Also I would like to share <a href=\"http://clang.llvm.org/docs/CrossCompilation.html#general-cross-compilation-options-in-clang\" rel=\"nofollow noreferrer\">this link</a>. It says</p>\n\n<p>The basic option is to define the target architecture. For that, use -target . If you don\u2019t specify the target, CPU names won\u2019t match (since Clang assumes the host triple), and the compilation will go ahead, creating code for the host platform, which will break later on when assembling or linking.</p>\n\n<p>The triple has the general format <code>&lt;arch&gt;&lt;sub&gt;-&lt;vendor&gt;-&lt;sys&gt;-&lt;abi&gt;</code>, where:</p>\n\n<pre><code>arch = x86_64, i386, arm, thumb, mips, etc.\nsub = for ex. on ARM: v5, v6m, v7a, v7m, etc.\nvendor = pc, apple, nvidia, ibm, etc.\nsys = none, linux, win32, darwin, cuda, etc.\nabi = eabi, gnu, android, macho, elf, etc.\n</code></pre>\n"}], "owner": {"reputation": 102, "user_id": 1973207, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/557d7fa74d7ec23c6726f1c16986b032?s=128&d=identicon&r=PG", "display_name": "DuckQueen", "link": "https://stackoverflow.com/users/1973207/duckqueen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1682, "favorite_count": 8, "answer_count": 2, "score": 37, "last_activity_date": 1503007253, "creation_date": 1496874264, "last_edit_date": 1503007253, "question_id": 44423725, "link": "https://stackoverflow.com/questions/44423725/having-llvm-ir-library-how-to-crosscompile-it-to-ios-android-windows-and-mac-f", "title": "Having LLVM IR library how to crosscompile it to iOS, Android, Windows and Mac from Ubuntu?", "body": "<p>I have representations of all my dependencies and my library in LLVM IR forms. How  to cross-compile my library into a shared object for iOS, Android, Windows and Mac platforms from Linux ( Ubuntu for example )?</p>\n\n<p>Please provide a single example script that would compile any example library with at least one dependency on to another library of your choice to all 4 platforms ( for example OpenCV or ZeroMQ 4+ ).</p>\n"}, {"tags": ["c++", "string", "function", "oop", "reference"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1496871601, "post_id": 44423190, "comment_id": 75844863, "body": "References have nothing to do with files, so if you want to investigate how they work, put all your code in one  file."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496871684, "post_id": 44423190, "comment_id": 75844885, "body": "You&#39;re making a copy when you do <code>_myAnimal = a;</code> in the <code>Zookeeper</code> constructor, since <code>_myAnimal</code> is not a reference."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1496871726, "post_id": 44423190, "comment_id": 75844899, "body": "<code>Animal&amp; _myAnimal;</code> (note the ampersand) and <code>Zookeeper::Zookeeper(Animal&amp; a) : _myAnimal(a) {}</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1496871867, "post_id": 44423190, "comment_id": 75844951, "body": "@IgorTandetnik Put that in an answer."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496871939, "post_id": 44423190, "comment_id": 75844977, "body": "@Barmar Is that an order?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1496871834, "post_id": 44423267, "comment_id": 75844936, "body": "You also need to change how the member is initialized. See <a href=\"https://stackoverflow.com/questions/15403815/how-to-initalize-the-reference-member-variable-of-a-class\" title=\"how to initalize the reference member variable of a class\">stackoverflow.com/questions/15403815/&hellip;</a>"}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 0, "last_activity_date": 1496871922, "last_edit_date": 1496871922, "creation_date": 1496871756, "answer_id": 44423267, "question_id": 44423190, "link": "https://stackoverflow.com/questions/44423190/how-do-i-pass-a-reference-of-one-object-to-another-and-still-modify-that-first-o/44423267#44423267", "title": "How do I pass a reference of one object to another and still modify that first object?", "body": "<p>Your class <code>Zookeeper</code> defines data member <code>_myAnimal</code> of type <code>Animal</code> (and not of type <code>Animal&amp;</code>). Hence, if in your constructor you assign <code>_myAnimal = a</code>, then <code>a</code> - though being a reference - is copied because <code>_myAnimal</code> is not a reference.\nTo keep the reference to the object passed to the constructor, you'd need to define data member <code>_myAnimal</code> as a reference, too:</p>\n\n<pre><code>class Zookeeper {\n    Animal &amp;_myAnimal;\npublic:\n    Zookeeper(Animal&amp; a) : _myAnimal(a) { };\n    void changeMyAnimalsName(std::string newName);\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": false, "score": 1, "last_activity_date": 1496872717, "last_edit_date": 1496872717, "creation_date": 1496871832, "answer_id": 44423289, "question_id": 44423190, "link": "https://stackoverflow.com/questions/44423190/how-do-i-pass-a-reference-of-one-object-to-another-and-still-modify-that-first-o/44423289#44423289", "title": "How do I pass a reference of one object to another and still modify that first object?", "body": "<p>Your reasoning is correct, but you ended up making a <strong>copy</strong> of the animal, there:</p>\n\n<pre><code>class Zookeeper {\n    Animal _myAnimal;\n</code></pre>\n\n<p>If you had:</p>\n\n<pre><code>Animal&amp; _myAnimal;\n</code></pre>\n\n<p>then you would maintain the reference to the original animal, making possible for the name change to be reflected in <code>main()</code>.</p>\n\n<p>After that, you should change your constructor to this:</p>\n\n<pre><code>Zookeeper(Animal&amp; a) : _myAnimal(a) {}\n</code></pre>\n\n<p>where I used an initializer list, which is essential for references, as you can read in <a href=\"https://stackoverflow.com/questions/15403815/how-to-initalize-the-reference-member-variable-of-a-class\">How to initalize the reference member variable of a class?</a></p>\n\n<hr>\n\n<p>However, this is not enough. If you had used -Wall -Wextra flag, to enable warnings you would see this:</p>\n\n<pre><code>Source.cc: In function 'int main()':\nSource.cc:13:88: warning: format '%s' expects argument of type 'char*', but argument 2 has type 'std::__cxx11::string* {aka std::__cxx11::basic_string&lt;char&gt;*}' [-Wformat=]\n     printf(\"animal's name before it is assigned to a zookeeper: %s\\n\", animal.getName());\n                                                                                        ^\nSource.cc:18:87: warning: format '%s' expects argument of type 'char*', but argument 2 has type 'std::__cxx11::string* {aka std::__cxx11::basic_string&lt;char&gt;*}' [-Wformat=]\n     printf(\"animal's name after it is assigned to a zookeeper: %s\\n\", animal.getName());\n                                                                                       ^\n</code></pre>\n\n<p>In <a href=\"/questions/tagged/c%2b%2b\" class=\"post-tag\" title=\"show questions tagged &#39;c++&#39;\" rel=\"tag\">c++</a> we usually print with <a href=\"http://www.cplusplus.com/reference/iostream/cout/\" rel=\"nofollow noreferrer\"><code>std::cout</code></a>, like this:</p>\n\n<pre><code>int main() {\n\n    Animal animal;\n    Animal&amp; animalRef = animal; // not needed, Zookeeper(animal) OK too\n\n    std::cout &lt;&lt; \"animal's name before it is assigned to a zookeeper: \" &lt;&lt; animal.getName() &lt;&lt; std::endl;\n\n    Zookeeper aZookeeper = Zookeeper(animalRef);\n    aZookeeper.changeMyAnimalsName(\"Fred\");\n\n    std::cout &lt;&lt; \"animal's name after it is assigned to a zookeeper: \" &lt;&lt; animal.getName() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Or, if you really need to use <code>printf()</code>, then you could use <a href=\"http://www.cplusplus.com/reference/string/string/c_str/\" rel=\"nofollow noreferrer\"><code>c_str()</code></a>, which returns a C-string of <code>std::string</code>, like this:</p>\n\n<pre><code>printf(\"animal's name before it is assigned to a zookeeper: %s\\n\", animal.getName().c_str());\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 8104188, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d8617539bff1793c4358775c3c877f0e?s=128&d=identicon&r=PG&f=1", "display_name": "LucasN", "link": "https://stackoverflow.com/users/8104188/lucasn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1496872717, "creation_date": 1496871420, "last_edit_date": 1496871977, "question_id": 44423190, "link": "https://stackoverflow.com/questions/44423190/how-do-i-pass-a-reference-of-one-object-to-another-and-still-modify-that-first-o", "title": "How do I pass a reference of one object to another and still modify that first object?", "body": "<p>I am trying to understand how references work in c++ so I have make a couple files with two different objects. One is an animal and another is a zookeeper. My goal is to pass a reference of an animal to a zookeeper and have the zookeeper change the animal's name, and still be reflected in the original animal object. How is this done using references? Here are the files I'm using.</p>\n\n<p>Source.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include \"Animal.h\"\n#include \"zookeeper.h\"\n\nusing namespace std;\n\nint main() {\n\n    Animal animal;\n    Animal&amp; animalRef = animal;\n\n    printf(\"animal's name before it is assigned to a zookeeper: %s\\n\", animal.getName());\n\n    Zookeeper aZookeeper = Zookeeper(animalRef);\n    aZookeeper.changeMyAnimalsName(\"Fred\");\n\n    printf(\"animal's name after it is assigned to a zookeeper: %s\\n\", animal.getName());\n\n    //Keep cmd window open\n    int j;\n    cin &gt;&gt; j;\n    return 0;\n}\n</code></pre>\n\n<p>Animal.h</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass Animal {\n\n    string name = \"\";\n    int height = 0;\npublic:\n    string getName() { return name; }\n    int getHeight() { return height; }\n\n    void setName(string n) { name = n; }\n    void setHeight(int h) { height = h; }\n};\n</code></pre>\n\n<p>zookeeper.cpp</p>\n\n<pre><code>#include \"zookeeper.h\"\n\nusing namespace std;\n\nZookeeper::Zookeeper(Animal&amp; a) {\n    _myAnimal = a;\n}\n\nvoid Zookeeper::changeMyAnimalsName(string newName) {\n    _myAnimal.setName(newName);\n}\n</code></pre>\n\n<p>zookeeper.h</p>\n\n<pre><code>#pragma once\n\n#include \"Animal.h\"\n\nclass Zookeeper {\n    Animal _myAnimal;\npublic:\n    Zookeeper(Animal&amp; a);\n    void changeMyAnimalsName(std::string newName);\n};\n</code></pre>\n"}, {"tags": ["c#", "c++", "unity3d", "interop"], "comments": [{"owner": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1496871412, "post_id": 44423178, "comment_id": 75844804, "body": "Are those values <i>real</i> values? (the ones on the example)"}, {"owner": {"reputation": 518, "user_id": 3935751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lMCOH.jpg?s=128&g=1", "display_name": "Brent McFerrin", "link": "https://stackoverflow.com/users/3935751/brent-mcferrin"}, "reply_to_user": {"reputation": 13909, "user_id": 162699, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/11d701f4f186f539521cde8050d0b341?s=128&d=identicon&r=PG", "display_name": "Gusman", "link": "https://stackoverflow.com/users/162699/gusman"}, "edited": false, "score": 0, "creation_date": 1496885985, "post_id": 44423178, "comment_id": 75848980, "body": "@Gusman yes, those are real values. The values can range from 0 to maybe 5000."}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 1, "last_activity_date": 1496874926, "creation_date": 1496874926, "answer_id": 44423839, "question_id": 44423178, "link": "https://stackoverflow.com/questions/44423178/update-float-array-from-c-native-plugin/44423839#44423839", "title": "Update float array from C++ native plugin", "body": "<p>The pointer you return in <code>getSomeFloats</code> is owned by <code>results</code>.  Before <code>getSomeFloats</code> returns, the vector destructor for <code>results</code> will free that memory.  When the C# code tries to use the pointer, you are accessing unallocated memory, which results in Undefined Behavior.  In your case most of the data hasn't been changed yet, but some of it has.  Potentially any or all of the data could have been changed (if the memory has been reused), or even a program crash (if the freed memory has been returned to the OS).</p>\n"}, {"comments": [{"owner": {"reputation": 518, "user_id": 3935751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lMCOH.jpg?s=128&g=1", "display_name": "Brent McFerrin", "link": "https://stackoverflow.com/users/3935751/brent-mcferrin"}, "edited": false, "score": 0, "creation_date": 1496885556, "post_id": 44424465, "comment_id": 75848866, "body": "Thank you for the detailed response. I will look into your recommendation and report back if I get something working well. Oh, I have updated the C++ method signature as it was incorrect."}, {"owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "reply_to_user": {"reputation": 518, "user_id": 3935751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lMCOH.jpg?s=128&g=1", "display_name": "Brent McFerrin", "link": "https://stackoverflow.com/users/3935751/brent-mcferrin"}, "edited": false, "score": 0, "creation_date": 1496886552, "post_id": 44424465, "comment_id": 75849103, "body": "There shouldn&#39;t be any problem. Let me know if there is any. Remember to start slow, test then add more code and test so that you will know exactly what&#39;s going on if it stops working."}, {"owner": {"reputation": 518, "user_id": 3935751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lMCOH.jpg?s=128&g=1", "display_name": "Brent McFerrin", "link": "https://stackoverflow.com/users/3935751/brent-mcferrin"}, "edited": false, "score": 0, "creation_date": 1497450759, "post_id": 44424465, "comment_id": 76086032, "body": "I was hoping to try your &quot;recommended method&quot; before reporting back, but haven&#39;t had the time. Nevertheless, even following the general advice from your first point was enough to get me by for now. I will report back with the results of the recommended method when I get around to it. Thanks for your help!"}], "tags": [], "owner": {"reputation": 103866, "user_id": 3785314, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/sh4Al.png?s=128&g=1", "display_name": "Programmer", "link": "https://stackoverflow.com/users/3785314/programmer"}, "is_accepted": true, "score": 6, "last_activity_date": 1541617062, "last_edit_date": 1541617062, "creation_date": 1496879172, "answer_id": 44424465, "question_id": 44423178, "link": "https://stackoverflow.com/questions/44423178/update-float-array-from-c-native-plugin/44424465#44424465", "title": "Update float array from C++ native plugin", "body": "<p>Found few problems in your code:</p>\n\n<p><strong>1</strong>. <code>std::vector&lt;float&gt; results;</code> is declared on the stack. It will be gone by the time the function has returned.  Declare it as a pointer </p>\n\n<pre><code>std::vector&lt;float&gt; *results = new std::vector&lt;float&gt;(10);\n</code></pre>\n\n<p>but make sure to also declare a function that will free it on the C++ side.</p>\n\n<p><strong>2</strong>.The function parameter do not match.</p>\n\n<p><em>Your C++:</em></p>\n\n<pre><code>getSomeFloats(float** points, int* count, CameraPose* pose)\n</code></pre>\n\n<p><em>Your C#:</em></p>\n\n<pre><code>getSomeFloats (ref IntPtr ptrResultItems, ref int resultItemsLength);\n</code></pre>\n\n<p>You either have to remove <code>CameraPose* pose</code> from the C++ side or add <code>IntPtr pose</code> to the C# side.</p>\n\n<p><strong>3</strong>. The use of <code>UNITY_INTERFACE_EXPORT UNITY_INTERFACE_API</code>.</p>\n\n<p>You don't need that. This is used when you want to use Unity's built in functions such as <a href=\"https://docs.unity3d.com/ScriptReference/GL.IssuePluginEvent.html\" rel=\"nofollow noreferrer\"><code>GL.IssuePluginEvent</code></a>. You are not using it in this case.</p>\n\n<p>This should do it:</p>\n\n<pre><code>#define DLLExport __declspec(dllexport)\n\nextern \"C\"\n{\n    DLLExport void fillArrayNative(float* data, int count, int* outValue) \n    {\n    }\n}\n</code></pre>\n\n<p><strong>4</strong>.C# has a garbage collector that moves variables around in the memory. You must pin C# array if you want to modify it from C++ side. You only need to pin C# array. Another option is to allocate the array on C++ side, return it to C# copy it to a temporary variable on the C# side then delete it on the C++ side. </p>\n\n<p><strong>5</strong>.Copy the result back to the array instead of assigning it.</p>\n\n<hr>\n\n<hr>\n\n<p><strong>Recommended method</strong>:</p>\n\n<p>There are just <strong>many</strong> ways to do this and some of them are extremely slow. If you want to use <code>Marshal.Copy</code>, you have to allocate the array on the C++ side or else you will run into some undefined behavior.</p>\n\n<p>The fastest and the most efficient way to do this is to allocate the array on the C# side as a global variable. Pass the array and its length to the native side. Also pass a third parameter which C++ can use to tell C# the amount of index that has been updated or written to.</p>\n\n<p>This is much more better than creating new array, copying it to C# variable then destroying it each time the function is called.</p>\n\n<p>This is what you should be using:</p>\n\n<p><strong>C++:</strong></p>\n\n<pre><code>#define DLLExport __declspec(dllexport)\n\nextern \"C\"\n{\n    DLLExport void fillArrayNative(float* data, int count, int* outValue) \n    {\n        std::vector&lt;float&gt; results;\n        for (int i = 0; i &lt; count; i++)\n        {\n            //Fill the array\n            data[i] = results[i];\n        }\n        *outValue = results.size();\n    }\n}\n</code></pre>\n\n<p>You can also use:  <code>std::copy ( data, data+count, results.begin() );</code> instead of loop to copy the data too.</p>\n\n<p><strong>C#:</strong></p>\n\n<pre><code>[DllImport(\"NativePlugin\", CallingConvention = CallingConvention.Cdecl)]\nprivate static extern void fillArrayNative(IntPtr data, int count, out int outValue);\n\npublic unsafe void getFillArrayNative(float[] outArray, int count, out int outValue)\n{\n    //Pin Memory\n    fixed (float* p = outArray)\n    {\n        fillArrayNative((IntPtr)p, count, out outValue);\n    }\n}\n</code></pre>\n\n<p><strong>Usage</strong>:</p>\n\n<pre><code>const int arraySize = 44500;\nfloat[] arrayToFill = new float[arraySize];\n\nvoid Start()\n{\n    int length = arrayToFill.Length;\n    int filledAmount = 0;\n    getFillArrayNative(arrayToFill, length, out filledAmount);\n\n    //You can then loop through it with with the returned filledAmount\n    for (int i = 0; i &lt; filledAmount; i++)\n    {\n        //Do something with arrayToFill[i]\n    }\n}\n</code></pre>\n\n<p>This is just an example and it is faster than all other methods I've used before. Avoid doing it the way you are currently doing it with <code>Marshal.Copy</code>. If you still want to do it your way or use <code>Marshal.Copy</code> then <a href=\"https://stackoverflow.com/a/43632320/3785314\">here</a> is the appropriate way to do it which requires allocation, copying data and de-allocating memory in each call. </p>\n"}], "owner": {"reputation": 518, "user_id": 3935751, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lMCOH.jpg?s=128&g=1", "display_name": "Brent McFerrin", "link": "https://stackoverflow.com/users/3935751/brent-mcferrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2693, "favorite_count": 2, "accepted_answer_id": 44424465, "answer_count": 2, "score": 1, "last_activity_date": 1541617394, "creation_date": 1496871329, "last_edit_date": 1541617394, "question_id": 44423178, "link": "https://stackoverflow.com/questions/44423178/update-float-array-from-c-native-plugin", "title": "Update float array from C++ native plugin", "body": "<p>I am seeing a pretty bizarre issue while trying to pass an array from C++ to C#. I am using Marshal.Copy (specifically: <a href=\"https://msdn.microsoft.com/en-us/library/a53bd6cz(v=vs.110).aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/a53bd6cz(v=vs.110).aspx</a>).</p>\n\n<p><strong>Problem: float array from C++ to C# is yielding a few <code>NaN</code>'s in the resulting array.</strong>\n<em>(Note: I am working in the context of the Unity game engine)</em></p>\n\n<hr>\n\n<p><strong>Code</strong></p>\n\n<p>Example C++ code:</p>\n\n<pre><code>extern \"C\" bool UNITY_INTERFACE_EXPORT UNITY_INTERFACE_API getSomeFloats(float** points, int* count) {\n        std::vector&lt;float&gt; results;\n        std::vector&lt;SOME_TYPE&gt; key_points = &lt;SOME_POINTS&gt;\n\n        for (auto iter = key_points.begin(); iter &lt; key_points.end(); iter++) {\n            results.push_back(static_cast&lt;float&gt;(iter-&gt;pt.x));\n            results.push_back(static_cast&lt;float&gt;(iter-&gt;pt.y));\n        }\n\n        *points = results.data();\n        *count = results.size();\n\n        //&lt;Print results to csv here&gt;\n\n        return true;\n}\n</code></pre>\n\n<p>Example C# code:</p>\n\n<pre><code>[DllImport(\"NativePlugin\")]\nprivate static extern bool getSomeFloats (ref IntPtr ptrResultItems, ref int resultItemsLength);\n\nprivate static float[] getFloatArrayFromNative() {\n        IntPtr ptrResultItems = IntPtr.Zero;\n        int resultItemsLength = 0;\n        bool success = getSomeFloats (ref ptrResultItems, ref resultItemsLength);\n        float[] resultItems = null;\n        if (success) {\n            // Load the results into a managed array.\n            resultItems = new float[resultItemsLength];\n            Marshal.Copy (ptrResultItems\n                , resultItems\n                , 0\n                , resultItemsLength);\n\n            // &lt;PRINT out resultItems to csv here&gt;\n\n            return resultItems;\n        } else {\n            Debug.Log (\"Something went wrong getting some floats\");\n            return new float[] { -1, -2 };\n        }\n    }\n</code></pre>\n\n<hr>\n\n<p><strong>Example Ouput:</strong>\nTake the following example:\nC++ output (print_out.csv):</p>\n\n<blockquote>\n  <p>123, 456, 789</p>\n</blockquote>\n\n<p>C# output (print_out_cs.csv):</p>\n\n<blockquote>\n  <p>123, NaN, 789</p>\n</blockquote>\n\n<hr>\n\n<p>I'm completely stumped on this one. I just don't understand why only some (roughly 7/100) floats are returning <code>NaN</code>. Does anyone have any advice/insight that might help?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "openh264"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8127925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2530fe42a7929a84ea9dc74e30eb5e?s=128&d=identicon&r=PG&f=1", "display_name": "skarack", "link": "https://stackoverflow.com/users/8127925/skarack"}, "edited": false, "score": 0, "creation_date": 1496875181, "post_id": 44423465, "comment_id": 75846176, "body": "But then I will be stock with 1/30 fps. My example was overly simplistic. A better one could be someone opening a pdf, scrolling, reading, scrolling, etc. In this case, the scrolling part might not require any duplicated frame but the reading part will."}, {"owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "reply_to_user": {"reputation": 11, "user_id": 8127925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2530fe42a7929a84ea9dc74e30eb5e?s=128&d=identicon&r=PG&f=1", "display_name": "skarack", "link": "https://stackoverflow.com/users/8127925/skarack"}, "edited": false, "score": 0, "creation_date": 1496911014, "post_id": 44423465, "comment_id": 75858999, "body": "Then what is your FPS strategy here? Who decides when to drop or record frames? Anyway, in almost any common scenario these things are done via variable frame rates and samples being time stamped. See MP4 files or RTP streams. H.264 streams themselves are not aware of timing (they can carry optional timeing information though)."}, {"owner": {"reputation": 11, "user_id": 8127925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2530fe42a7929a84ea9dc74e30eb5e?s=128&d=identicon&r=PG&f=1", "display_name": "skarack", "link": "https://stackoverflow.com/users/8127925/skarack"}, "edited": false, "score": 0, "creation_date": 1496923958, "post_id": 44423465, "comment_id": 75867963, "body": "I never considered variable frame rate. That term didn&#39;t come up while looking for a solution but now that I include it in m searches, I see similar issues. If you could just edit your answer to include the VFR bit, I will accept your answer."}], "tags": [], "owner": {"reputation": 4392, "user_id": 5215131, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2C8rv6T-3m8/AAAAAAAAAAI/AAAAAAAAAP0/ALwPPtWwxac/photo.jpg?sz=128", "display_name": "Florian Zwoch", "link": "https://stackoverflow.com/users/5215131/florian-zwoch"}, "is_accepted": false, "score": 0, "last_activity_date": 1496872663, "creation_date": 1496872663, "answer_id": 44423465, "question_id": 44422989, "link": "https://stackoverflow.com/questions/44422989/openh264-repeating-frame/44423465#44423465", "title": "openh264 Repeating frame", "body": "<p>Of course. Set a frame rate of 1/30 fps and you end up with 1 frame every 30 seconds. It doesn't even have to be in the H.264 stream - it can be done also when it gets muxed into an mp4 file afterwards for example.</p>\n"}], "owner": {"reputation": 11, "user_id": 8127925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc2530fe42a7929a84ea9dc74e30eb5e?s=128&d=identicon&r=PG&f=1", "display_name": "skarack", "link": "https://stackoverflow.com/users/8127925/skarack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496872663, "creation_date": 1496870535, "question_id": 44422989, "link": "https://stackoverflow.com/questions/44422989/openh264-repeating-frame", "title": "openh264 Repeating frame", "body": "<p>I'm using the openh264 lib, in a c++ program, to convert a set of images into a h264 encoded mp4 file. These images represent updates to the screen during a session recording.</p>\n\n<p>Lets say a set contains 2 images, one initial screen grab of the desktop and another one, 30 seconds later, when the clock changes.</p>\n\n<p>Is there a way for the stream to represent a 30 seconds long video using only theses 2 images? </p>\n\n<p>Right now, I'm brute forcing this by encoding multiple times the first frame to fill the gap. It there a more efficient and/or faster way of doing this.</p>\n"}, {"tags": ["c++", "mfc", "ccombobox"], "comments": [{"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 1, "creation_date": 1496881735, "post_id": 44422798, "comment_id": 75848000, "body": "<a href=\"https://stackoverflow.com/a/16832507/383779\">stackoverflow.com/a/16832507/383779</a>"}], "owner": {"reputation": 203, "user_id": 3869847, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/7fqix.png?s=128&g=1", "display_name": "MPW", "link": "https://stackoverflow.com/users/3869847/mpw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1497003026, "creation_date": 1496869724, "last_edit_date": 1497003026, "question_id": 44422798, "link": "https://stackoverflow.com/questions/44422798/set-height-of-edit-box-static-text-area-of-mfc-ccombobox-not-the-dropdown", "title": "Set height of edit box/static text area of MFC CComboBox (not the dropdown)", "body": "<p>My goal is to be able to programatically control the width and height of the combobox when it is closed (dropdown not displayed). I have various other controls, such as buttons, and I want all the controls to appear a uniform size on the dialog (say, 100 x 40). I tried calling <code>my_cb_device.SetItemHeight(-1,40)</code> but it doesn't seem to have any effect. Style is CBS_DROPDOWNLIST. Can anyone furnish a simple example of changing this? Does CBS_NOINTEGRALHEIGHT need to be set/not set? I've tried every combination I can think of, nothing seems to affect the height. Oddly, width is not uncooperative. Some code (note: <code>BTN_HT</code> is 40):</p>\n\n<pre><code>m_cb_device.Create( WS_CHILD | WS_VISIBLE | WS_TABSTOP |\n    CBS_DROPDOWNLIST | WS_VSCROLL | CBS_NOINTEGRALHEIGHT,\n    dummyRect, this, ID_CB_DEVICE );\npopulate_device_dropdown();\nm_cb_device.SetItemHeight( -1, BTN_HT );\nm_cb_device.SetCurSel( 0 );\nm_cb_device.SetMaxVisibleLines( 32 );\n</code></pre>\n"}, {"tags": ["c++", "qt", "user-interface"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1496906475, "post_id": 44422703, "comment_id": 75856129, "body": "Is the <a href=\"http://doc.qt.io/qt-5/qabstractitemview.html#showDropIndicator-prop\" rel=\"nofollow noreferrer\"><code>showDropIndicator</code></a> property what you&#39;re looking for?  Just set it to <code>true</code> or <code>false</code> according to the deop indicator position."}, {"owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1496928429, "post_id": 44422703, "comment_id": 75871423, "body": "@G.M. Make sure to read the entire post, <code>setDropIndicatorPosition</code> does this, and as you can see, it doesn&#39;t work inside of <code>dragMoveEvent</code>. I should specify that it will either not do anything or turn off all drop indicators regrardless of logic."}], "answers": [{"comments": [{"owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "edited": false, "score": 0, "creation_date": 1497014227, "post_id": 44454714, "comment_id": 75913859, "body": "none of the items can be a drop target... that isn&#39;t a reorder. I specifically only want to the drop indicator to be shown when placing in between widgets (only above or below).  Your solution doesn&#39;t help with that at all."}, {"owner": {"reputation": 304, "user_id": 8576501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec76547fe1d8dcd0fd335bfad1efb09c?s=128&d=identicon&r=PG", "display_name": "olya", "link": "https://stackoverflow.com/users/8576501/olya"}, "reply_to_user": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "edited": false, "score": 0, "creation_date": 1497424194, "post_id": 44454714, "comment_id": 76066344, "body": "if you have just a list and want to insert new items only between existing ones you can write something like this <code>return index.isValid() ? Qt::ItemIsSelectable | Qt::ItemIsEnabled : Qt::ItemIsDropEnabled;</code> in your overloaded <code>QAbstractItemModel::flags</code> method"}, {"owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "edited": false, "score": 0, "creation_date": 1497446416, "post_id": 44454714, "comment_id": 76082560, "body": "<code>QTreeWidget</code> doesn&#39;t inherit from <code>QAbstractItemModel</code>, so you can&#39;t use that function."}], "tags": [], "owner": {"reputation": 304, "user_id": 8576501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec76547fe1d8dcd0fd335bfad1efb09c?s=128&d=identicon&r=PG", "display_name": "olya", "link": "https://stackoverflow.com/users/8576501/olya"}, "is_accepted": false, "score": 0, "last_activity_date": 1497002034, "creation_date": 1497002034, "answer_id": 44454714, "question_id": 44422703, "link": "https://stackoverflow.com/questions/44422703/qtreewidget-sub-classing-stop-drop-indicator-from-showing-given-unwanted-dropin/44454714#44454714", "title": "QTreeWidget sub classing, stop drop indicator from showing given unwanted dropIndicatorPosition", "body": "<p>You should override <code>QAbstractItemModel::flags</code> and add <code>Qt::ItemIsDropEnabled</code> flag to the items that can be used as a drop target.</p>\n"}, {"comments": [{"owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "edited": false, "score": 0, "creation_date": 1497884062, "post_id": 44559682, "comment_id": 76253106, "body": "This doesn&#39;t work with DragMoveEvent (that is what I used previously to attempt this) but the paint event thing works."}, {"owner": {"reputation": 304, "user_id": 8576501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec76547fe1d8dcd0fd335bfad1efb09c?s=128&d=identicon&r=PG", "display_name": "olya", "link": "https://stackoverflow.com/users/8576501/olya"}, "reply_to_user": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "edited": false, "score": 0, "creation_date": 1497962393, "post_id": 44559682, "comment_id": 76291788, "body": "If you use paint event only then boxes around folders will not be drawn but you still can drop items on it. To prevent it use drag move event in addition."}, {"owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "edited": false, "score": 0, "creation_date": 1497964697, "post_id": 44559682, "comment_id": 76293613, "body": "I had already solved that issue before I even posted this question, you don&#39;t want to use drag move event for that for performance reasons, you want to use <code>dropEvent</code>"}], "tags": [], "owner": {"reputation": 304, "user_id": 8576501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec76547fe1d8dcd0fd335bfad1efb09c?s=128&d=identicon&r=PG", "display_name": "olya", "link": "https://stackoverflow.com/users/8576501/olya"}, "is_accepted": true, "score": 3, "last_activity_date": 1497506425, "creation_date": 1497506425, "answer_id": 44559682, "question_id": 44422703, "link": "https://stackoverflow.com/questions/44422703/qtreewidget-sub-classing-stop-drop-indicator-from-showing-given-unwanted-dropin/44559682#44559682", "title": "QTreeWidget sub classing, stop drop indicator from showing given unwanted dropIndicatorPosition", "body": "<p>It seems I catch what you want. My previous answer is suitable for lists only.</p>\n\n<p>To prevent painting boxes around folders you can use something like this:</p>\n\n<pre><code>void TreeView::paintEvent( QPaintEvent * event )\n{\n    DropIndicatorPosition position = dropIndicatorPosition();\n    setDropIndicatorShown( position == QAbstractItemView::BelowItem || position == QAbstractItemView::AboveItem );\n    base_t::paintEvent( event );\n    setDropIndicatorShown( true );\n}\n</code></pre>\n\n<p>And to prevent dropping on them (and paint a forbidden cursor while over them):</p>\n\n<pre><code>void TreeView::dragMoveEvent( QDragMoveEvent * event )\n{\n    base_t::dragMoveEvent( event );\n    DropIndicatorPosition position = dropIndicatorPosition();\n    if ( position != QAbstractItemView::BelowItem &amp;&amp; position != QAbstractItemView::AboveItem ) {\n        event-&gt;ignore();\n    }\n}\n</code></pre>\n\n<p>But I don't understand why you need that weird thing.</p>\n"}], "owner": {"reputation": 3529, "user_id": 2036035, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/746fc48544cf535f52f1247079e5a927?s=128&d=identicon&r=PG", "display_name": "hythis", "link": "https://stackoverflow.com/users/2036035/hythis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 44559682, "answer_count": 2, "score": 2, "last_activity_date": 1497506425, "creation_date": 1496869349, "last_edit_date": 1496871332, "question_id": 44422703, "link": "https://stackoverflow.com/questions/44422703/qtreewidget-sub-classing-stop-drop-indicator-from-showing-given-unwanted-dropin", "title": "QTreeWidget sub classing, stop drop indicator from showing given unwanted dropIndicatorPosition", "body": "<p>I have the following problem.   I need to stop the drop indicator from showing up when I don't want to complete the drop event, which is conditional on dropIndicatorPosition() returning either <code>QAbstractItemView::BelowItem</code> or <code>QAbstractItemView::AboveItem</code>.  Right now I subclass <code>QTreeWidget</code> and have the following implementation of <code>dropEvent</code>. </p>\n\n<pre><code>void SubClassedQTreeWidget::dropEvent(QDropEvent *event) {\n    DropIndicatorPosition position = dropIndicatorPosition();\n    if( position != QAbstractItemView::BelowItem &amp;&amp; position != QAbstractItemView::AboveItem ){\n        // exit since we don't care for other types of drop events\n        return;\n    }\n    QTreeWidget::dropEvent(event);\n}\n</code></pre>\n\n<p>I wanted to do this in order to stop visual indication that any drop can happen from showing up.  I only want inbetween black lines to show up.  I've tried re-implementing <code>dragMoveEvent</code>, however setting the drop indicator dynamically via:</p>\n\n<pre><code>DropIndicatorPosition position = dropIndicatorPosition();\nsetDropIndicatorShown(!(position != QAbstractItemView::BelowItem &amp;&amp; position != QAbstractItemView::AboveItem));\n</code></pre>\n\n<p>doesn't actually do anything, and I would expect some way to not have to perform logic at every drag any way. </p>\n"}, {"tags": ["c++", "class", "namespaces", "include"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1496869375, "post_id": 44422683, "comment_id": 75843922, "body": "&quot;and who knows how many namespaces&quot; - always a very bad sign; the architecture astronauts have been busy. And BTW, filenames and namespaces have no relationship with each other in C++."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1496869593, "post_id": 44422683, "comment_id": 75844009, "body": "You&#39;ve been hired as an intern and they couldn&#39;t find you a mentor that&#39;s capable of mentoring you? That&#39;s not a good sign. You should get one of <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">these</a>. You will find &quot;using&quot; in the index."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1496871388, "post_id": 44422683, "comment_id": 75844797, "body": "<a href=\"https://www.youtube.com/watch?v=0oGMbAIcXCQ\" rel=\"nofollow noreferrer\">Reminds me of something a little bit off topic</a>"}], "answers": [{"tags": [], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": true, "score": 1, "last_activity_date": 1506708905, "last_edit_date": 1506708905, "creation_date": 1496869627, "answer_id": 44422778, "question_id": 44422683, "link": "https://stackoverflow.com/questions/44422683/what-does-using-somethingsomethingsomething-mean-c/44422778#44422778", "title": "What does using something::something::something mean (c++)?", "body": "<p>This is a <em>using-declaration</em>. It introduces a <em>single</em> name from another namespace into the current scope so that it can be used without qualification. It's not the same as a <em>using-directive</em>, which begins with <code>using namespace</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 540, "user_id": 3797387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acfa9d87d0f972467ab9c2bb6e48bc2?s=128&d=identicon&r=PG&f=1", "display_name": "Green_Wizard", "link": "https://stackoverflow.com/users/3797387/green-wizard"}, "is_accepted": false, "score": -1, "last_activity_date": 1496871320, "creation_date": 1496871320, "answer_id": 44423172, "question_id": 44422683, "link": "https://stackoverflow.com/questions/44422683/what-does-using-somethingsomethingsomething-mean-c/44423172#44423172", "title": "What does using something::something::something mean (c++)?", "body": "<p>If there really just random naming, than it's very-very bad. <em>BUT</em> I hope it's just yours personally vision, as beginner in C++, and in reality there is a good code, but kinda complex.</p>\n\n<p>I don't know yours background, what languages you know, so I would say that namespaces are kinda boxes. They can build very good, hierarchically structured, modules\\subsystems. I suggest you to not panic, take paper and try to wrote out all namespaces, their relations, what is in them (classes, structures, maybe functions) and your own understanding them purposes.</p>\n\n<p>P. S. sorry for bad English. This topic very  close for me, but my writing skills in English are not very good for a free conversation about this. I hope moderators will fix  typos. </p>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 7530824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec7c13716c2420356b9a460c8c7ab7e8?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Bhise", "link": "https://stackoverflow.com/users/7530824/deepak-bhise"}, "is_accepted": false, "score": 0, "last_activity_date": 1496872239, "creation_date": 1496872239, "answer_id": 44423371, "question_id": 44422683, "link": "https://stackoverflow.com/questions/44422683/what-does-using-somethingsomethingsomething-mean-c/44423371#44423371", "title": "What does using something::something::something mean (c++)?", "body": "<p>check below link, hopefully it will help you on what you are looking for\n<a href=\"https://www.tutorialspoint.com/cplusplus/cpp_namespaces.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/cplusplus/cpp_namespaces.htm</a></p>\n"}], "owner": {"reputation": 35, "user_id": 4372701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b28bc46477586881c453fe6e2015048?s=128&d=identicon&r=PG&f=1", "display_name": "Paula", "link": "https://stackoverflow.com/users/4372701/paula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "accepted_answer_id": 44422778, "answer_count": 3, "score": -1, "last_activity_date": 1506708905, "creation_date": 1496869281, "question_id": 44422683, "link": "https://stackoverflow.com/questions/44422683/what-does-using-somethingsomethingsomething-mean-c", "title": "What does using something::something::something mean (c++)?", "body": "<p>So I just started as an intern and the code that I'm supposed to be working on is scattered within like 10 different directories and 100 files and who knows how many namespaces. I've never worked with this before, and I'm really confused how they are all being linked together.</p>\n\n<p>I keep seeing these sorts of statements one after the other, ex:</p>\n\n<pre><code>using something10::something2::something6;\nusing isThisANamespace::iHaveNoIdeaIfThisIsAClassNameOrWhat::something599;\nusing randomName::otherRandomName::randomName99999;\nusing something4::something3::something8766678788787987987698;\n</code></pre>\n\n<p>Whenever I try to google what using does, I only find results with using namespace. Is using now just a shorter way of using namespace? Some of the things they are using appear to be folder names and file names though. My company mentor doesn't know c++ so he can't help me alas.</p>\n\n<p>Also, if these are all namespaces, then wouldn't using so many of them conflict? Can you call namespace::classname::function? And when you do this do you still have to include the filename for that class?</p>\n\n<p>Please help me learn how to call a function buried in another directory that is also in 4 namespaces. I'm very lost.</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 3986, "user_id": 458955, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/230ec0245eab94386b664c0026dcea63?s=128&d=identicon&r=PG", "display_name": "a sandwhich", "link": "https://stackoverflow.com/users/458955/a-sandwhich"}, "edited": false, "score": 1, "creation_date": 1496869012, "post_id": 44422591, "comment_id": 75843749, "body": "A Vec4i is a type holding 4 integers. Here is where it is defined: <a href=\"http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#vec\" rel=\"nofollow noreferrer\">docs.opencv.org/2.4/modules/core/doc/basic_structures.html#v&zwnj;&#8203;ec</a>"}, {"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1496869041, "post_id": 44422591, "comment_id": 75843765, "body": "Its a tuple of 4 integers"}], "answers": [{"tags": [], "owner": {"reputation": 44839, "user_id": 89766, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/WVViw.jpg?s=128&g=1", "display_name": "George Profenza", "link": "https://stackoverflow.com/users/89766/george-profenza"}, "is_accepted": true, "score": 10, "last_activity_date": 1539465311, "last_edit_date": 1539465311, "creation_date": 1496869128, "answer_id": 44422648, "question_id": 44422591, "link": "https://stackoverflow.com/questions/44422591/what-is-vec4i-in-opencv/44422648#44422648", "title": "what is Vec4i in opencv", "body": "<p>Have a look at the <a href=\"http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html#vec\" rel=\"nofollow noreferrer\">OpenCV Basic Structures</a>.\nVec4i is a structure for representing a vector with 4 dimensions, with each value an <code>int</code></p>\n\n<p>If you look at the <a href=\"http://docs.opencv.org/2.4/modules/imgproc/doc/feature_detection.html?highlight=houghlinesp#houghlinesp\" rel=\"nofollow noreferrer\">HoughLinesP() documentation</a> you'll see what each dimension in is in this particular case:</p>\n\n<blockquote>\n  <p>lines \u2013 Output vector of lines. Each line is represented by a 4-element vector  (x_1, y_1, x_2, y_2) , where  (x_1,y_1) and  (x_2, y_2) are the ending points of each detected line segment.</p>\n</blockquote>\n\n<p>In short, each line is a Vec4i, the first two elements are the line's start point (x1,y1) and last two are the line's end point(x2,y2)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8127980"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9489, "favorite_count": 1, "accepted_answer_id": 44422648, "answer_count": 1, "score": 6, "last_activity_date": 1539465311, "creation_date": 1496868861, "question_id": 44422591, "link": "https://stackoverflow.com/questions/44422591/what-is-vec4i-in-opencv", "title": "what is Vec4i in opencv", "body": "<p>i am learning opencv using c++. i came across Vector in a code for hough line transform . can anyone explain me what does Vec4i store and what does 4i mean.\nthe code snippet:-</p>\n\n<pre><code>vector&lt;Vec4i&gt; lines;\n  HoughLinesP(dst, lines, 1, CV_PI/180, 50, 50, 10 );\n  for( size_t i = 0; i &lt; lines.size(); i++ )\n  {\n    Vec4i l = lines[i];\n    line( cdst, Point(l[0], l[1]), Point(l[2], l[3]), Scalar(0,0,255), 3, CV_AA);\n  }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1496868944, "post_id": 44422577, "comment_id": 75843721, "body": "Is your array always sorted?"}, {"owner": {"reputation": 44402, "user_id": 20471, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/35b5e9e9ccf3bfe5ff8d22b64a5234d3?s=128&d=identicon&r=PG", "display_name": "Joe Phillips", "link": "https://stackoverflow.com/users/20471/joe-phillips"}, "edited": false, "score": 2, "creation_date": 1496869167, "post_id": 44422577, "comment_id": 75843820, "body": "Make a &quot;map&quot; object and store the counts in it"}, {"owner": {"reputation": 45, "user_id": 7861625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9311866d2ac38dfdbbd8fb58fcfc7931?s=128&d=identicon&r=PG&f=1", "display_name": "AlexMIEL", "link": "https://stackoverflow.com/users/7861625/alexmiel"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1496869378, "post_id": 44422577, "comment_id": 75843925, "body": "@slava yes from higher to lower if thats what you mean"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1496869738, "post_id": 44422577, "comment_id": 75844065, "body": "Where do you want to store this info?"}, {"owner": {"reputation": 45, "user_id": 7861625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9311866d2ac38dfdbbd8fb58fcfc7931?s=128&d=identicon&r=PG&f=1", "display_name": "AlexMIEL", "link": "https://stackoverflow.com/users/7861625/alexmiel"}, "reply_to_user": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1496869898, "post_id": 44422577, "comment_id": 75844142, "body": "@vidorvistrom i thought about using 2 FORs and just keep that info in variable but couldnt do that correctly"}, {"owner": {"reputation": 2685, "user_id": 7479696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12ea7cffb9e02b31267bbacaca12b469?s=128&d=identicon&r=PG&f=1", "display_name": "Vidor Vistrom", "link": "https://stackoverflow.com/users/7479696/vidor-vistrom"}, "edited": false, "score": 0, "creation_date": 1496870430, "post_id": 44422577, "comment_id": 75844359, "body": "Do you want to manipulate that info later on, or simply print them? In 1st case you will have to store it in a map, or a pair maybe. In second case simply iterate using 2 for loops and break the inner loop when counter is greater than 3. Just use crude logic."}], "answers": [{"comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1496870897, "post_id": 44422749, "comment_id": 75844574, "body": "The comments to the OP said the array is always sorted, so both of these are far too much work, memory usage, etc."}, {"owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1496871032, "post_id": 44422749, "comment_id": 75844636, "body": "@Daniel H: the first ones are more general solutions, which I found worth stating; attached a solution for sorted arrays, too."}], "tags": [], "owner": {"reputation": 33645, "user_id": 2630032, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hQF09.jpg?s=128&g=1", "display_name": "Stephan Lechner", "link": "https://stackoverflow.com/users/2630032/stephan-lechner"}, "is_accepted": false, "score": 2, "last_activity_date": 1496870884, "last_edit_date": 1496870884, "creation_date": 1496869513, "answer_id": 44422749, "question_id": 44422577, "link": "https://stackoverflow.com/questions/44422577/counter-in-arrays-c/44422749#44422749", "title": "Counter in arrays c++", "body": "<p>I'd make a map that counts - for each individual number in the array - their occurrences. The code could look as follows:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n\nint main()\n{\n    const int numberOfElements = 12;\n\n    int array[numberOfElements] = { 4,4,4,3,3,2,2,1,1,0,0,0 };\n    std::map&lt;int,int&gt; counts;\n    for (int i=0; i &lt; numberOfElements; i++) {\n        counts[array[i]]++;\n    }\n    for (auto x : counts) {\n        if (x.second == 2) {\n            cout &lt;&lt; \"pair: \" &lt;&lt; x.first &lt;&lt; endl;\n        }\n    }\n    return 0;\n}\n</code></pre>\n\n<p>If  - for some reason - the range of the elements is limited, you could also use a \"plain\" array for counting the occurrences. If, for example, the elements are in the range of <code>0..4</code>, you could use the following fragment:</p>\n\n<pre><code>const int numberOfElements = 12;\nconst int elementMax = 4;\n\nint array[numberOfElements] = { 4,4,4,3,3,2,2,1,1,0,0,0 };\nint counts[elementMax+1] = {};\nfor (int i=0; i&lt;numberOfElements; i++) {\n    counts[array[i]]++;\n}\nfor (int i=0; i &lt;= elementMax; i++) {\n    if (counts[i] == 2) {\n        cout &lt;&lt; \"pair: \" &lt;&lt; i &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>And if your array is sorted, than a solution without a counter-array could look as follows:</p>\n\n<pre><code>const int numberOfElements = 12;\n\nint array[numberOfElements] = { 4,4,4,3,3,2,2,1,1,0,0,0 };\nint prev = -1;\nint count = 0;\nfor (int i=0; i&lt;numberOfElements; i++) {\n    if (array[i] == prev) {\n      count++;\n    }\n    else {\n        if (count == 2) {\n            cout &lt;&lt; \"pair: \" &lt;&lt; prev &lt;&lt; endl;\n        }\n        count=1;\n        prev = array[i];\n    }\n}\nif (prev &gt;= 0 &amp;&amp; count==2) {\n    cout &lt;&lt; \"pair: \" &lt;&lt; prev &lt;&lt; endl;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 0, "creation_date": 1496870079, "post_id": 44422848, "comment_id": 75844210, "body": "For sorted array you can simplify this solution even more"}, {"owner": {"reputation": 45, "user_id": 7861625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9311866d2ac38dfdbbd8fb58fcfc7931?s=128&d=identicon&r=PG&f=1", "display_name": "AlexMIEL", "link": "https://stackoverflow.com/users/7861625/alexmiel"}, "edited": false, "score": 0, "creation_date": 1496870467, "post_id": 44422848, "comment_id": 75844377, "body": "Thanks but can you leave me a hint how i need to modify it, if i need to find for example only elements that exist 4 times in array, not 2 times like twins?"}, {"owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "reply_to_user": {"reputation": 45, "user_id": 7861625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9311866d2ac38dfdbbd8fb58fcfc7931?s=128&d=identicon&r=PG&f=1", "display_name": "AlexMIEL", "link": "https://stackoverflow.com/users/7861625/alexmiel"}, "edited": false, "score": 0, "creation_date": 1496870782, "post_id": 44422848, "comment_id": 75844529, "body": "@AlexMIEL Just change 2 to 4 in if condition."}, {"owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "reply_to_user": {"reputation": 45, "user_id": 7861625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9311866d2ac38dfdbbd8fb58fcfc7931?s=128&d=identicon&r=PG&f=1", "display_name": "AlexMIEL", "link": "https://stackoverflow.com/users/7861625/alexmiel"}, "edited": false, "score": 0, "creation_date": 1496870822, "post_id": 44422848, "comment_id": 75844550, "body": "replace it in both place, or just use variable for needed value"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1496928046, "post_id": 44422848, "comment_id": 75871138, "body": "&quot;replace it in both place&quot; that&#39;s why I do not like solutions with code duplicate"}], "tags": [], "owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "is_accepted": true, "score": 0, "last_activity_date": 1496871328, "last_edit_date": 1496871328, "creation_date": 1496869934, "answer_id": 44422848, "question_id": 44422577, "link": "https://stackoverflow.com/questions/44422577/counter-in-arrays-c/44422848#44422848", "title": "Counter in arrays c++", "body": "<p>Solution without using additional array:</p>\n\n<pre><code>int twins_counter = 0;\nfor (int i = 0; i &lt; dm; i++)\n{\n    int counter = 0; // counter for elements \n    for (int j = 0; j &lt; dm; j++)\n    {\n        if (arr[i] == arr[j])\n        {\n            if( j &lt; i )\n            {\n                 break; // we have searched twin for this element already\n            }\n            counter++;\n            if( counter &gt; 2 )\n            {\n                break; // we meet element third time, it isn't twin\n            }\n        }\n    }\n\n    if( counter == 2 )\n    {\n          twins_counter++;\n     }\n};\n</code></pre>\n\n<p>For sorted (upwards or downwards) arrays one cycle is enough:</p>\n\n<pre><code>int twins_counter = 0;\nint counter = 1;\n\nfor (int i = 1; i &lt; dm; i++)\n{\n    if( arr[i] == arr[i-1] )\n    {\n         counter++;\n     }\n     else\n     {\n           if( counter == 2 )\n           {\n                 twins_counter++;\n                 counter = 1;\n           }\n     }\n}\n\n// check last value\nif( counter == 2 )\n{\n    twins_counter++;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 0, "creation_date": 1496871304, "post_id": 44423037, "comment_id": 75844761, "body": "O(n) for your solution is n*log n because of binary search on every step of cycle. binary search isn&#39;t needed - see my solution."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 0, "creation_date": 1496871563, "post_id": 44423037, "comment_id": 75844849, "body": "@AlexanderUshakov You are trying to say that to fully scan array is more efficient than doing binary search? You need to rethink your O(n) estimation. It would be n*log n if I increase <code>i</code> by 1 and do binary search for every value."}, {"owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 0, "creation_date": 1496873341, "post_id": 44423037, "comment_id": 75845544, "body": "If all values in array will be different your solution will be the same as we make binary search on each element. So O(n) of it is n*log n."}, {"owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 0, "creation_date": 1496873449, "post_id": 44423037, "comment_id": 75845585, "body": "For sorted array one scan without any inner search is enough. So best solution for sorted array has O(n) = n"}, {"owner": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 0, "creation_date": 1496873612, "post_id": 44423037, "comment_id": 75845657, "body": "Your solution is better for case where there are only several different values in big sorted array. But it doesn&#39;t change O(n)."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 3587, "user_id": 4915707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ubv91.jpg?s=128&g=1", "display_name": "Alexander Ushakov", "link": "https://stackoverflow.com/users/4915707/alexander-ushakov"}, "edited": false, "score": 1, "creation_date": 1496927875, "post_id": 44423037, "comment_id": 75870988, "body": "@AlexanderUshakov ok added variant that scans array once."}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 1, "last_activity_date": 1496927819, "last_edit_date": 1496927819, "creation_date": 1496870738, "answer_id": 44423037, "question_id": 44422577, "link": "https://stackoverflow.com/questions/44422577/counter-in-arrays-c/44423037#44423037", "title": "Counter in arrays c++", "body": "<p>You can do that in one pass and use binary search for efficiency:</p>\n\n<pre><code>int arr[] = { 4,4,4,3,3,2,2,1,1,0,0,0 };\nint twins = 0;\nfor( auto i = std::begin( arr ); i != std::end( arr ); ) {\n    auto next = std::upper_bound( i, std::end( arr ), *i, std::greater&lt;int&gt;() );\n    if( std::distance( i, next ) == 2 ) ++twins;\n    i = next;\n}       \n</code></pre>\n\n<p><a href=\"http://ideone.com/7kayQP\" rel=\"nofollow noreferrer\">Live example</a></p>\n\n<p>In case there are not too many duplicates in the array <code>std::upper_bound</code> could be not efficient and can be easily replaced:</p>\n\n<pre><code>    auto next = std::find_if( std::next( i ), std::end( arr ), [i]( int n ) { return *i != n; } );\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7861625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9311866d2ac38dfdbbd8fb58fcfc7931?s=128&d=identicon&r=PG&f=1", "display_name": "AlexMIEL", "link": "https://stackoverflow.com/users/7861625/alexmiel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2192, "favorite_count": 0, "accepted_answer_id": 44422848, "answer_count": 3, "score": 0, "last_activity_date": 1496927819, "creation_date": 1496868789, "question_id": 44422577, "link": "https://stackoverflow.com/questions/44422577/counter-in-arrays-c", "title": "Counter in arrays c++", "body": "<p>i have a really simple code right there that counts how much values you need in arrays.</p>\n\n<pre><code>for (int i = 0; i &lt; dm; i++)\n    {\n        if (arr[i] == c)\n        {\n            counter++;\n        }\n    };\n</code></pre>\n\n<p>But i need to make it a little bit tricky.I need to count number of same values. Imagine i have an array {4,4,4,3,3,2,2,1,1,0,0,0} and i need to find how much \"twins\" there. So 3,2,1 are twins because they have only 1 exact friend.\nI tried something like 2 fors and 2 counters but still have troubles. Thanks. Hope you understand what i mean by \"twin\". x and x are twins and y,y,y are not ( just in case)</p>\n"}, {"tags": ["php", "c++", "windows", "mongodb", "apache2.4"], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 2752294, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2cc1ef7a857511b53244892b6d19d07e?s=128&d=identicon&r=PG&f=1", "display_name": "supert3d", "link": "https://stackoverflow.com/users/2752294/supert3d"}, "is_accepted": false, "score": 1, "last_activity_date": 1496871984, "creation_date": 1496871984, "answer_id": 44423319, "question_id": 44422412, "link": "https://stackoverflow.com/questions/44422412/loading-mongo-driver-1-6-x-driver-on-wamp-64bit-architecture/44423319#44423319", "title": "Loading Mongo Driver 1.6.x driver on WAMP 64bit architecture", "body": "<p>In case anyone else comes across this thread. After hours of trying to get it to run I just downgraded everything to 32-bit. Worked right out the gate. </p>\n\n<p>Despite PECL offering a \"64bit\" driver - <a href=\"https://pecl.php.net/package/mongo/1.6.14/windows\" rel=\"nofollow noreferrer\">https://pecl.php.net/package/mongo/1.6.14/windows</a> it didn't seem to be compatible with 64bit/VC11/Thread Safe versions of Apache/PHP</p>\n\n<p>I'm not sure if this is an issue with the Mongo driver compilation or something deeper?</p>\n\n<p><strong>Anyway. Downgrade to 32-bit. Mongo 1.6.x drivers will then run.</strong> </p>\n"}, {"tags": [], "owner": {"reputation": 29633, "user_id": 508057, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEXdr.jpg?s=128&g=1", "display_name": "Derick", "link": "https://stackoverflow.com/users/508057/derick"}, "is_accepted": false, "score": 0, "last_activity_date": 1499180526, "creation_date": 1499180526, "answer_id": 44909242, "question_id": 44422412, "link": "https://stackoverflow.com/questions/44422412/loading-mongo-driver-1-6-x-driver-on-wamp-64bit-architecture/44909242#44909242", "title": "Loading Mongo Driver 1.6.x driver on WAMP 64bit architecture", "body": "<p>It is possible that a dependency is missing. Where I suspect that to be libsasl as alluded to in the comment at <a href=\"http://php.net/manual/en/mongodb.requirements.php\" rel=\"nofollow noreferrer\">http://php.net/manual/en/mongodb.requirements.php</a></p>\n\n<p>The libsasl.dll can be found in the PHP distribution.</p>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 2752294, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2cc1ef7a857511b53244892b6d19d07e?s=128&d=identicon&r=PG&f=1", "display_name": "supert3d", "link": "https://stackoverflow.com/users/2752294/supert3d"}, "is_accepted": false, "score": 1, "last_activity_date": 1547173612, "last_edit_date": 1547173612, "creation_date": 1547159897, "answer_id": 54137918, "question_id": 44422412, "link": "https://stackoverflow.com/questions/44422412/loading-mongo-driver-1-6-x-driver-on-wamp-64bit-architecture/54137918#54137918", "title": "Loading Mongo Driver 1.6.x driver on WAMP 64bit architecture", "body": "<p>From php.net</p>\n\n<blockquote>\n  <p>In order for this extension to work, there are DLL files that must be available to the Windows system PATH. For information on how to do this, see the FAQ entitled \"How do I add my PHP directory to the PATH on Windows\". Although copying DLL files from the PHP folder into the Windows system directory also works (because the system directory is by default in the system's PATH), this is not recommended. This extension requires the following files to be in the PATH: libsasl.dll</p>\n</blockquote>\n\n<ul>\n<li><a href=\"http://php.net/manual/en/mongo.installation.php#mongo.installation.windows\" rel=\"nofollow noreferrer\">http://php.net/manual/en/mongo.installation.php#mongo.installation.windows</a></li>\n</ul>\n\n<p>Simply copy libsasl.dll from your PHP directory to your Apache\\bin directory and restart Apache. </p>\n"}], "owner": {"reputation": 55, "user_id": 2752294, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2cc1ef7a857511b53244892b6d19d07e?s=128&d=identicon&r=PG&f=1", "display_name": "supert3d", "link": "https://stackoverflow.com/users/2752294/supert3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1547173612, "creation_date": 1496868199, "question_id": 44422412, "link": "https://stackoverflow.com/questions/44422412/loading-mongo-driver-1-6-x-driver-on-wamp-64bit-architecture", "title": "Loading Mongo Driver 1.6.x driver on WAMP 64bit architecture", "body": "<p>So I've installed 64bit Apache/PHP locally. Both Apache and PHP were compiled against the VC11 C++ redistributable.</p>\n\n<ul>\n<li><a href=\"https://www.apachelounge.com/download/VC11/\" rel=\"nofollow noreferrer\">https://www.apachelounge.com/download/VC11/</a> and</li>\n<li><a href=\"http://windows.php.net/download/\" rel=\"nofollow noreferrer\">http://windows.php.net/download/</a> PHP5.6 (Yes... ) x64 Thread Safe (respectively)</li>\n</ul>\n\n<p>Both work fine! (screenshots with version and architecture info inc.) </p>\n\n<p>I've downloaded multiple varaities of the 1.6.x driver from both PECL and an repo' at Amazon. </p>\n\n<ul>\n<li><a href=\"https://pecl.php.net/package/mongo/1.6.14/windows\" rel=\"nofollow noreferrer\">https://pecl.php.net/package/mongo/1.6.14/windows</a></li>\n<li><a href=\"https://s3.amazonaws.com/drivers.mongodb.org/php/index.html\" rel=\"nofollow noreferrer\">https://s3.amazonaws.com/drivers.mongodb.org/php/index.html</a></li>\n</ul>\n\n<p>I've made sure they're the x64 Thread Safe variety and added to my ~/php/ext folder. </p>\n\n<p>I've made sure the extension is loaded in php.ini (and that the write .ini file is called): \n<code>extension=php_mongo-1.6.8-5.6-vc11-x86_64.dll</code></p>\n\n<p>But everytime I restart Apache I get this in my PHP error log:  </p>\n\n<blockquote>\n  <p>[07-Jun-2017 20:21:20 UTC] PHP Warning:  PHP Startup: Unable to load dynamic library 'E:\\PHP5.6\\ext\\php_mongo-1.6.8-5.6-vc11-x86_64.dll' - %1 is not a valid Win32 application.</p>\n</blockquote>\n\n<p>(Apache comes up clean. Error.log clean)</p>\n\n<p>Why is it protesting that this is not a Win32 Application. I don't want it to be. My entire architecture is 64bit and so is the Mongo Driver. </p>\n\n<p><a href=\"https://i.stack.imgur.com/ZSzE0.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZSzE0.jpg\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/LUSYq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LUSYq.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "c++11", "iterator", "c++-concepts", "iterator-traits"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 4, "creation_date": 1496868257, "post_id": 44422335, "comment_id": 75843385, "body": "The theory is that an output iterator may accept more than one type: &quot;<b>[iterator.requirements.general]/1</b> ... All output iterators support the expression <code>*i = o</code> where <code>o</code> is a value of some type that is in the set of types that are <i>writable</i> to the particular iterator type of <code>i</code>...&quot;"}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 0, "creation_date": 1496868258, "post_id": 44422335, "comment_id": 75843386, "body": "Aren&#39;t <code>OutputIterator</code>s kind of like sinks for data?  You push data into them but you can&#39;t get data out of them."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496868338, "post_id": 44422335, "comment_id": 75843422, "body": "What&#39;s the value type of <a href=\"http://en.cppreference.com/w/cpp/experimental/ostream_joiner\" rel=\"nofollow noreferrer\"><code>ostream_joiner</code></a>?"}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496868478, "post_id": 44422335, "comment_id": 75843489, "body": "@T.C. , <code>void</code> :) .    Some output iterators don&#39;t have a type associated but for those that do is very difficult to get."}, {"owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1496887686, "post_id": 44422335, "comment_id": 75849370, "body": "@IgorTandetnik, ok, some output iterators don&#39;t need to have a value type associated, but it seems that the standard when to far in forbidding to report a value type for the output iterators that clearly do have one associated."}], "owner": {"reputation": 9958, "user_id": 225186, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/dbc60362bf2df08202ff198e00085a5c?s=128&d=identicon&r=PG", "display_name": "alfC", "link": "https://stackoverflow.com/users/225186/alfc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1496867931, "creation_date": 1496867931, "question_id": 44422335, "link": "https://stackoverflow.com/questions/44422335/why-the-ouputiterator-concept-doesnt-have-a-value-type-associated", "title": "Why the OuputIterator concept doesn&#39;t have a value_type associated?", "body": "<p>I am programming a library where I need to make an iterator interface and I want to make it as general as possible.</p>\n\n<pre><code>template&lt;class OutputIterator&gt;\nvoid receive(OutputIterator oit){\n    auto val = get_function&lt; std::iterator_traits&lt;OutputIterator&gt;::value_type &gt; (); // legacy function\n    oit = val;\n}\n</code></pre>\n\n<p>To my surprise for most output iterators <code>value_type</code> is <code>void</code>. (<code>void</code> renders the code invalid because a <code>void</code> variable cannot be declared). </p>\n\n<p>Here two examples:</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/iterator/back_insert_iterator\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/iterator/back_insert_iterator</a></p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/iterator/ostream_iterator\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/iterator/ostream_iterator</a></p>\n\n<p>However in both cases there is an obvious value type associated, I could hack into each and \"see\" that there is a value type. For example <code>back_insert_iterator::container_type::value_type</code> (but not accessible from <code>iterator_traits</code>). </p>\n\n<p><strong>Why is the standard trying to hide the <code>value_type</code> of the output iterators?</strong> </p>\n\n<p>Maybe the correct terms is not <code>value_type</code> but there is obviously some type associated. Is this an overlook? Am I using the output iterator incorrectly?</p>\n"}, {"tags": ["c++", "c++11", "sfinae", "narrowing"], "comments": [{"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1538663957, "post_id": 44422223, "comment_id": 92230740, "body": "I suppose I should note that I have updated post you linked to above as the &quot;incomplete example&quot; with a version that should now work even for uint8_t --&gt; uint64_t and the like"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8127847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cd47228e14af824240ee5653f92d49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/8127847/mike-c"}, "edited": false, "score": 0, "creation_date": 1496932343, "post_id": 44422686, "comment_id": 75874691, "body": "Thank you, this did exactly what I was looking for. I was able to implement both this function and the inverse (using <code>std::is_same&lt;T2, typename std::common_type&lt;T1, T2&gt;::type&gt;</code>) and have template deduction pick the proper implementation to use. One thing to note is that with two sum functions calling <code>sum(b, b)</code> ends up with ambiguous overload resolution. Because T1 and T2 are the same type both templated functions pass the overload resolution. This is an acceptable limitation as I can easily use template specialization for the case where the type is the same, optimizing for each case."}, {"owner": {"reputation": 23, "user_id": 8127847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cd47228e14af824240ee5653f92d49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/8127847/mike-c"}, "edited": false, "score": 0, "creation_date": 1496934916, "post_id": 44422686, "comment_id": 75876689, "body": "Alternatively, I can implement the second function by doing <code>! std::is_same&lt;T1, typename std::common_type&lt;T1, T2&gt;::type&gt;</code> which avoids the ambiguous overload resolution without having to add a third template specialization."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 0, "last_activity_date": 1496870466, "last_edit_date": 1496870466, "creation_date": 1496869286, "answer_id": 44422686, "question_id": 44422223, "link": "https://stackoverflow.com/questions/44422223/how-can-i-use-sfinae-to-prevent-narrowing-in-a-template-function/44422686#44422686", "title": "How can I use SFINAE to prevent narrowing in a template function?", "body": "<p>What about using SFINAE through <code>std::common_type</code> ?</p>\n\n<p>The following is a simplified example (no <code>Vector</code> but simples values; no <code>operator+()</code> but a <code>sum()</code> function) but I hope you can understand what I mean</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n\ntemplate &lt;typename T1, typename T2&gt;\nT1 sum (T1 t1,\n        T2 const &amp; t2,\n        typename std::enable_if&lt;std::is_same&lt;\n              T1,\n              typename std::common_type&lt;T1, T2&gt;::type\n           &gt;::value&gt;::type * = nullptr)\n { return t1 += t2; }\n\nint main()\n {\n   float  a      = 1.1f;\n   double b      = 2.2;\n   long double c = 3.3;\n\n   std::cout &lt;&lt; sum(b, a) &lt;&lt; std::endl;\n   std::cout &lt;&lt; sum(c, a) &lt;&lt; std::endl;\n   std::cout &lt;&lt; sum(c, b) &lt;&lt; std::endl;\n   // std::cout &lt;&lt; sum(a, b) &lt;&lt; std::endl; compilation error\n   // std::cout &lt;&lt; sum(a, c) &lt;&lt; std::endl; compilation error\n   // std::cout &lt;&lt; sum(b, c) &lt;&lt; std::endl; compilation error\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8127847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cd47228e14af824240ee5653f92d49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/8127847/mike-c"}, "edited": false, "score": 0, "creation_date": 1496932918, "post_id": 44423095, "comment_id": 75875168, "body": "Thank you for this response. I like that this solution would combine all of the varying operator+ functions I am planning on writing into one implementation making it easy to maintain the software. However, @max66 answered the question using SFINAE as was my original question so I accepted his answer."}, {"owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "reply_to_user": {"reputation": 23, "user_id": 8127847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cd47228e14af824240ee5653f92d49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/8127847/mike-c"}, "edited": false, "score": 0, "creation_date": 1496943006, "post_id": 44423095, "comment_id": 75881856, "body": "No problem. I just think it would be surprising to have <code>a + b</code> work while <code>b + a</code> doesn&#39;t compile.  My solution behaves more &quot;natural&quot;/expected imo."}, {"owner": {"reputation": 23, "user_id": 8127847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cd47228e14af824240ee5653f92d49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/8127847/mike-c"}, "edited": false, "score": 0, "creation_date": 1497009342, "post_id": 44423095, "comment_id": 75910523, "body": "I agree, and I would prefer to use this solution to the template deduction approach. However the library I&#39;m working with has been designed in an obscure way with Vector deriving from a templated class of the same type: <code>template &lt;typename T&gt; class Policy</code> <code>template &lt;typename T, class B&gt; class Vector : public B</code> Which is invoked like this: <code>Vector&lt;float,Policy&lt;float&gt; &gt;</code> I haven&#39;t been able to use std::common_type to resolve both the type and the base class type in a single return. That is what is preventing me from using your solution. But that is a separate question from the one I asked."}], "tags": [], "owner": {"reputation": 21240, "user_id": 951423, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/UlSg8.png?s=128&g=1", "display_name": "Pixelchemist", "link": "https://stackoverflow.com/users/951423/pixelchemist"}, "is_accepted": false, "score": 0, "last_activity_date": 1496872858, "last_edit_date": 1496872858, "creation_date": 1496870964, "answer_id": 44423095, "question_id": 44422223, "link": "https://stackoverflow.com/questions/44422223/how-can-i-use-sfinae-to-prevent-narrowing-in-a-template-function/44423095#44423095", "title": "How can I use SFINAE to prevent narrowing in a template function?", "body": "<p>Has some assumptions with respect to <code>Vector</code> but you should get the idea:</p>\n\n<pre><code>template &lt;typename T1,typename T2&gt;\nVector&lt;typename std::common_type&lt;T1, T2&gt;::type&gt; \n    operator+(Vector&lt;T1&gt; const&amp; lhs, Vector&lt;T2&gt; const&amp; rhs)\n{ \n    std::size_t const n = std::min(lhs.size(), rhs.size());\n    Vector&lt;typename std::common_type&lt;T1, T2&gt;::type&gt; res(n);\n    for(std::size_t i{}; i &lt; n; ++i) res[i] = a[i] + b[i];\n    return res; \n}\n\nVector&lt;double&gt; a = Vector&lt;double&gt;() + Vector&lt;float&gt;(); // OK\nVector&lt;double&gt; b = Vector&lt;float&gt;() + Vector&lt;double&gt;(); // OK\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8127847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cd47228e14af824240ee5653f92d49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/8127847/mike-c"}, "edited": false, "score": 0, "creation_date": 1496930798, "post_id": 44423522, "comment_id": 75873399, "body": "I implemented the <code>{}</code> constructor approach and found that it correctly prevented the narrowing from occurring for my operator+. Then subsequently I added the inverse implementation using &#39;decltype(T2{lhs.value}, Vector&lt;T2&gt;{})` and realized that the overload resolution was ambiguous. In essence these two functions only differed by return type which doesn&#39;t amount to a different function signature. It seems best for me to implement my operator+ in a single function using the <code>std::common_type</code> as suggested by all three answers instead of trying to do it with two separate template functions."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 23, "user_id": 8127847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cd47228e14af824240ee5653f92d49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/8127847/mike-c"}, "edited": false, "score": 0, "creation_date": 1496951418, "post_id": 44423522, "comment_id": 75886379, "body": "@MikeC. It doesn&#39;t make much sense to implement the <i>inverse function</i>. You can simply switch the parameters at the call point and you&#39;re achieving the same result."}, {"owner": {"reputation": 23, "user_id": 8127847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cd47228e14af824240ee5653f92d49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/8127847/mike-c"}, "edited": false, "score": 0, "creation_date": 1497008542, "post_id": 44423522, "comment_id": 75909977, "body": "That is true for the addition operator but not for others like division or subtraction, for non-commutative operators having both functions would be ideal."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1496874644, "last_edit_date": 1496874644, "creation_date": 1496873000, "answer_id": 44423522, "question_id": 44422223, "link": "https://stackoverflow.com/questions/44422223/how-can-i-use-sfinae-to-prevent-narrowing-in-a-template-function/44423522#44423522", "title": "How can I use SFINAE to prevent narrowing in a template function?", "body": "<p>You can use the <code>{}</code> constructor and let it detects <a href=\"http://eel.is/c++draft/dcl.init.list#7\" rel=\"nofollow noreferrer\">narrowing conversions</a> for you.<br>\nYou can do that with something like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Vector {\n    T value;\n};\n\ntemplate &lt;typename T1, typename T2&gt;\nauto operator+(Vector&lt;T1&gt;, const Vector&lt;T2&gt;&amp; rhs)\n-&gt; decltype(T1{rhs.value}, Vector&lt;T1&gt;{})\n{ return {}; }\n\nint main() {\n    auto a = Vector&lt;double&gt;{} + Vector&lt;float&gt;{};\n    //auto b = Vector&lt;float&gt;{} + Vector&lt;double&gt;{};\n    (void)a;\n}\n</code></pre>\n\n<p>That is, you can use the usual form for sfinae'd expressions involving a trailing return type.<br>\nIn case your <code>Vector</code> class template hasn't a default constructor, you can still work around it with <code>std::declval</code>:</p>\n\n<pre><code>-&gt; decltype(T1{rhs.value}, std::declval&lt;Vector&lt;T1&gt;&gt;())\n</code></pre>\n\n<p>Note that, because of <a href=\"http://eel.is/c++draft/dcl.init.list#7.2\" rel=\"nofollow noreferrer\">[dcl.init.list]/7.2</a> and the other bullets that follow, you can't simply do this in the code above:</p>\n\n<pre><code>-&gt; decltype(T1{T2{}}, Vector&lt;T1&gt;{})\n</code></pre>\n\n<p>Otherwise, in your specific example, the following would be valid:</p>\n\n<pre><code>auto b = Vector&lt;float&gt;{} + Vector&lt;double&gt;{};\n</code></pre>\n\n<p>Therefore you must use the actual value provided along with <code>rhs</code> and (let me say) <em>test it</em> with the actual type used to specialize <code>lhs</code>.<br>\nAs long as the contained value is accessible (either it is valid or the operator is a friend of your class) this shouldn't be a problem.</p>\n\n<hr>\n\n<p>As a side note, you can't\u200b correctly define a <code>is_narrowing_conversion</code> that works properly in your case by using only the types <code>T1</code> and <code>T2</code>.<br>\nAs an example, consider <a href=\"http://eel.is/c++draft/dcl.init.list#7.2\" rel=\"nofollow noreferrer\">[dcl.init.list]/7.2</a> (emphasis mine) and the test code you proposed:</p>\n\n<blockquote>\n  <p>[...] or from\u00a0double to\u00a0float, <strong>except where the source is a constant expression and the actual value after conversion is within the range of values that can be represented (even if it cannot be represented exactly)</strong> [...]</p>\n</blockquote>\n\n<p>For you don't have actual values with which to make a test, all what you can do is trying something like <code>T1{T2{}}</code>. Anyway this wouldn't work. In other words, <code>float{double{}}</code> would be accepted without errors because of the bullet above mentioned.<br>\nSomething similar applies to few other types.</p>\n\n<hr>\n\n<p>Another valid approach is to use <code>std::common_type</code>.<br>\nAnyway, there is already a <a href=\"https://stackoverflow.com/a/44422686/4987285\">pretty good answer</a> that proposes it. It wouldn't worth repeating the example code once more.</p>\n"}], "owner": {"reputation": 23, "user_id": 8127847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35cd47228e14af824240ee5653f92d49?s=128&d=identicon&r=PG&f=1", "display_name": "Mike C.", "link": "https://stackoverflow.com/users/8127847/mike-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 1, "accepted_answer_id": 44422686, "answer_count": 3, "score": 2, "last_activity_date": 1496874644, "creation_date": 1496867466, "last_edit_date": 1496869337, "question_id": 44422223, "link": "https://stackoverflow.com/questions/44422223/how-can-i-use-sfinae-to-prevent-narrowing-in-a-template-function", "title": "How can I use SFINAE to prevent narrowing in a template function?", "body": "<p>I am trying to implement basic arithmetic operations for a Vector class and would like to support mixing underlying types while preventing narrowing from occurring.</p>\n\n<pre><code>template &lt;typename T1,typename T2&gt;\nVector&lt;T1&gt; operator+( Vector&lt;T1&gt; lhs, const Vector&lt;T2&gt;&amp; rhs, std::enable_if&lt; ! is_narrowing_conversion&lt;T2,T1&gt;::value &gt;::type* = nullptr )\n{ return lhs += rhs; }\n</code></pre>\n\n<p>I would like to implement is_narrowing_conversion so that it will only allow the conversion if the types do not narrow. Here are some examples:</p>\n\n<pre><code>Vector&lt;double&gt; a = Vector&lt;double&gt;() + Vector&lt;float&gt;(); //OK\nVector&lt;float&gt; a = Vector&lt;float&gt; + Vector&lt;double&gt;; //Fails to find the operator+ function\n</code></pre>\n\n<p>In the end I would like to write a second template operator+ function that will handle the inverse case by returning a Vector.</p>\n\n<p>I found this post <a href=\"https://stackoverflow.com/questions/36270158/avoiding-narrowing-conversions-with-c-type-traits\">with an incomplete example</a>. But it is insufficient as he notes that it disallows uint8_t to uint64_t conversions.</p>\n\n<p>I also discovered <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3047.html\" rel=\"nofollow noreferrer\">Daniel Kr\u00fcgler's paper on fixing is_constructible</a>. Specifically in this paper he mentions using list-initialization which already has the narrowing semantics working but I'm not sure how to convert what he mentions into a proper trait that I can use for SFINAE template deduction.</p>\n"}, {"tags": ["c++", "parameters", "parameter-passing", "function-calls", "function-call"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1496868563, "post_id": 44422201, "comment_id": 75843536, "body": "What kind of example did you have in mind? You pass it a pointer of the appropriate type. The syntax is the same as for all member functions. Perhaps you&#39;re looking for one of <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">these</a>?"}, {"owner": {"reputation": 327, "user_id": 2364796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/77d54be64a497911d1bf62a091481fdc?s=128&d=identicon&r=PG", "display_name": "user10478", "link": "https://stackoverflow.com/users/2364796/user10478"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1496873992, "post_id": 44422201, "comment_id": 75845794, "body": "I have tried, for example, psCharUploadMessage::ToString(&amp;msg), psCharUploadMessage::ToString(msg*), psCharUploadMessage::ToString(msg), psCharUploadMessage.ToString(&amp;msg [and msg* and msg]), msg.ToString(), and similar attempts."}], "owner": {"reputation": 327, "user_id": 2364796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/77d54be64a497911d1bf62a091481fdc?s=128&d=identicon&r=PG", "display_name": "user10478", "link": "https://stackoverflow.com/users/2364796/user10478"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496867367, "creation_date": 1496867367, "question_id": 44422201, "link": "https://stackoverflow.com/questions/44422201/access-pointer-parameter-in-planeshift-source-code", "title": "Access Pointer Parameter in Planeshift Source Code", "body": "<p>In the file \"charmessages.cpp\" of Planeshift's source code, the following function is defined:</p>\n\n<pre><code>psCharUploadMessage::ToString(NetBase::AccessPointers* accessPointers)\n</code></pre>\n\n<p><a href=\"http://www.vaikene.net/planeshift/api/classpsCharUploadMessage.html#a1e6ccdcdc6ca383e2c45931d3acb0307\" rel=\"nofollow noreferrer\">http://www.vaikene.net/planeshift/api/classpsCharUploadMessage.html#a1e6ccdcdc6ca383e2c45931d3acb0307</a></p>\n\n<p>However, there are no examples demonstrating how to call it, or any of the other \"ToString(NetBase::AccessPointers* accessPointers)\" functions.  What is the proper syntax for the access pointer parameter when calling this function?</p>\n"}, {"tags": ["c++", "visual-studio-2017"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 4, "creation_date": 1496867181, "post_id": 44422107, "comment_id": 75842843, "body": "Trim <code>main</code> to it has only <code>system(&quot;CLS&quot;);</code> and then build. If it still has problems, trim all the header files except <code>#include &lt;cstdlib&gt;</code>. If it still has a problem, that will be great <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to post. If it does not have a problem with that, you can keep adding stuff until it has a problem. Then, you can post that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1496867226, "post_id": 44422107, "comment_id": 75842866, "body": "Simple answer, don&#39;t use <code>system()</code> - there iis almost never a good reason to do so, and it inevitably makes your code non-portable."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1496867260, "post_id": 44422107, "comment_id": 75842886, "body": "Regardless of what the reason for your problem is, I applaud VS2017 for giving you cause to rethink your use of <code>system()</code>. It should <i>not</i> be used. Bad function; no cookie for you."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1496867433, "post_id": 44422107, "comment_id": 75842973, "body": "@Neil Butterworth not to mention all the potential security headaches..."}, {"owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "edited": false, "score": 0, "creation_date": 1496875240, "post_id": 44422107, "comment_id": 75846197, "body": "Are you saying the IDE flagged them as undefined (like with a red squiggle) or did the compiler or linker give a build-time error?  If the latter, please include the complete text of the error message(s)."}, {"owner": {"reputation": 93, "user_id": 2970381, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001536353942/picture?type=large", "display_name": "user2970381", "link": "https://stackoverflow.com/users/2970381/user2970381"}, "edited": false, "score": 1, "creation_date": 1496956637, "post_id": 44422107, "comment_id": 75888995, "body": "Yes the IDE flagged them as undefined (with a red squiggle). And for all those who are saying not to use system, that doesn&#39;t really answer the question. As you might have notice it is also marking tolower() as undefined, should I not use that as well. Also, you might want to stop applauding because VS2017 still lets you use system() as I said in my original post, I was able to copy the code into a new project and it all worked. I am just trying to figure what might be causing it not to work in the original project."}], "owner": {"reputation": 93, "user_id": 2970381, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/100001536353942/picture?type=large", "display_name": "user2970381", "link": "https://stackoverflow.com/users/2970381/user2970381"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 733, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1496866945, "creation_date": 1496866945, "question_id": 44422107, "link": "https://stackoverflow.com/questions/44422107/visual-studio-2017-not-recognizing-system", "title": "Visual Studio 2017 not recognizing &quot;system&quot;", "body": "<p>I recently upgraded from Visual Studio 2015 to Visual Studio 2017.  When I opened a program that I had written in 2015, system and tolower were flagged as undefined and I could not get the code to compile.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;cctype&gt;\n#include &lt;vector&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\n#include \"CashRegister.h\"\n#include \"Inventory.h\"\n#include \"CustomerDB.h\"\n#include \"Customer.h\"\n#include \"Report.h\"\n#include \"InventoryBook.h\"\n\nconst string INVENTORY_FILENAME = \"inventory.dat\";\n\nvoid cashRegisterMenu(CashRegister&amp; cr, Inventory&amp; inv);\nvoid customerMenu(CustomerDB&amp; cdb);\nvoid inventoryMenu(Inventory&amp; inv);\nvoid reportMenu(Report&amp; rep, Inventory&amp; inv, CustomerDB&amp; cdb);\nvoid displayBookInfo(const InventoryBook* book);\nvoid displayCustomerInfo(Customer customer);\nInventoryBook makeBook();\nInventoryBook editBook(const InventoryBook* book);\nCustomer makeCustomer();\n\nint main()\n{\n    char choice;\n    //float cost;\n    CashRegister cr;\n    Inventory inv(INVENTORY_FILENAME);\n    Report rep;\n    CustomerDB cdb;\n\n    do\n    {\n        system(\"CLS\");  // UNDEFINED\n        cout &lt;&lt; \"Welcome to the Serendipity Booksellers POS Software System\"\n            &lt;&lt; endl &lt;&lt; endl;\n        cout &lt;&lt; \"Options:\" &lt;&lt; endl &lt;&lt; endl;\n        cout &lt;&lt; \"R - Cash Register\" &lt;&lt; endl;\n        cout &lt;&lt; \"I - Inventory\" &lt;&lt; endl;\n        cout &lt;&lt; \"C - Customer\" &lt;&lt; endl;\n        cout &lt;&lt; \"H - Report\" &lt;&lt; endl;\n        cout &lt;&lt; \"Q - Quit Program\" &lt;&lt; endl &lt;&lt; endl;\n        cout &lt;&lt; \"Enter option: \";\n\n        choice = tolower(cin.get()); // UNDEFINED\n</code></pre>\n\n<p>I ended up creating a new project and moving all the files into the new project. When I did this, everything worked in the new project but all the code is exactly the same. I really do not want to have to do this for every program I had written in some version of VS prior to 2017. Any one have any ideas of what might have happened and how I could have corrected it without creating a new project and copying the files over?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 6909, "user_id": 4454454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6UgUs.jpg?s=128&g=1", "display_name": "MaxZoom", "link": "https://stackoverflow.com/users/4454454/maxzoom"}, "edited": false, "score": 0, "creation_date": 1496866214, "post_id": 44421893, "comment_id": 75842328, "body": "Try <code>A.IsEqual(B) </code> in a loop"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1496866571, "post_id": 44421893, "comment_id": 75842538, "body": "Do you just want to check whether some are equal or do you also want to know which ones?"}, {"owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1496866626, "post_id": 44421893, "comment_id": 75842567, "body": "I don&#39;t care which are equal. Just want to be sure that there are no duplicates for now"}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1496866667, "post_id": 44422017, "comment_id": 75842591, "body": "<code>std::unordered_set</code> requires equality as well and <code>std::hash</code> needs only one object"}], "tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 3, "last_activity_date": 1496868911, "last_edit_date": 1496868911, "creation_date": 1496866533, "answer_id": 44422017, "question_id": 44421893, "link": "https://stackoverflow.com/questions/44421893/c-how-to-check-if-among-n-objects-some-of-them-are-equal/44422017#44422017", "title": "C++ how to check if among N objects some of them are equal", "body": "<p>Put the objects in a set. After you're done the set will contain only unique objects.</p>\n\n<p>You can choose between <code>std::set</code> and <code>std::unordered_set</code>, depending on how many objects you have and the cost of the compare function.</p>\n\n<p><code>std::set</code> requires a compare function (<code>operator&lt;</code>). O(N*logN) complexity.</p>\n\n<p><code>std::unordered_set</code> requires a hash and equality functions (<code>std::equal_to</code> taking 2 const references to your object and <code>std::hash</code> taking in a const reference to an object). O(N) complexity.</p>\n\n<p>NB. A double-nested loop is going to be O(N<sup>2</sup>) complexity.</p>\n\n<p>NB2. <code>std::unique</code> requires the vector to be sorted, as it compares only adjacent elements.</p>\n\n<p>Example compare function:</p>\n\n<pre><code>    bool operator&lt; (const Board&amp; b) const {\n        if (from_ &lt; b.from_)\n            return true;\n        if (from_ &gt; b.from_)\n            return false;\n        if (to_ &lt; b.to_)\n            return true;\n        if (to_ &gt; b.to_)\n            return false;\n        if (selection_ &lt; b.selection_)\n            return true;\n        return false;\n    }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 8092124, "user_type": "registered", "profile_image": "https://graph.facebook.com/411398462561724/picture?type=large", "display_name": "Prabhat Sharma", "link": "https://stackoverflow.com/users/8092124/prabhat-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1496866617, "creation_date": 1496866617, "answer_id": 44422040, "question_id": 44421893, "link": "https://stackoverflow.com/questions/44421893/c-how-to-check-if-among-n-objects-some-of-them-are-equal/44422040#44422040", "title": "C++ how to check if among N objects some of them are equal", "body": "<p>If you make an array of objects and then run a simple loop to compare them like this</p>\n\n<pre><code>&gt; board[n];\n\nfor(int i=0; i&lt;n ; i++)\n  for(int j=i; j&lt;n ; j++)\n      board[i].Isequal(board[j]);\n</code></pre>\n\n<p>You can always use more efficient algo to compare.</p>\n"}, {"comments": [{"owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1496867272, "post_id": 44422119, "comment_id": 75842895, "body": "What needs to be done in IsEqual in order to satisfy the concept?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1496868275, "post_id": 44422119, "comment_id": 75843397, "body": "@cateof usually it is implemented as less than comparison, not equal that you have."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 1, "creation_date": 1496868373, "post_id": 44422119, "comment_id": 75843437, "body": "@cateof this should be a good start: <a href=\"http://fusharblog.com/3-ways-to-define-comparison-functions-in-cpp/\" rel=\"nofollow noreferrer\">fusharblog.com/3-ways-to-define-comparison-functions-in-cpp</a>"}], "tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 0, "last_activity_date": 1496867005, "creation_date": 1496867005, "answer_id": 44422119, "question_id": 44421893, "link": "https://stackoverflow.com/questions/44421893/c-how-to-check-if-among-n-objects-some-of-them-are-equal/44422119#44422119", "title": "C++ how to check if among N objects some of them are equal", "body": "<blockquote>\n  <p>Is it possible to push_back objects to an std::vector and use std::unique?</p>\n</blockquote>\n\n<p>Yes it is possible, but that would require you to sort your vector first and then use <code>std::unique</code> using the same criteria as you used for sort. Note <code>std::sort</code> and <code>std::unqiue</code> require strict weak ordering as described in <a href=\"http://en.cppreference.com/w/cpp/concept/Compare\" rel=\"nofollow noreferrer\">Compare</a> concept. Your <code>IsEqual</code> function does not satisfy that requirement.</p>\n"}, {"comments": [{"owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1496867431, "post_id": 44422130, "comment_id": 75842971, "body": "The second loop is missing the -1? Shouldn&#39;t be arr.length -1 instead of arr.length?"}, {"owner": {"reputation": 6909, "user_id": 4454454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6UgUs.jpg?s=128&g=1", "display_name": "MaxZoom", "link": "https://stackoverflow.com/users/4454454/maxzoom"}, "reply_to_user": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "edited": false, "score": 0, "creation_date": 1496867565, "post_id": 44422130, "comment_id": 75843049, "body": "Lets consider first element <code>a</code>, which will be compared to 2, 3, .. and so on to the last one <code>d</code>. So the last element needs to be included as well."}], "tags": [], "owner": {"reputation": 6909, "user_id": 4454454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6UgUs.jpg?s=128&g=1", "display_name": "MaxZoom", "link": "https://stackoverflow.com/users/4454454/maxzoom"}, "is_accepted": false, "score": 1, "last_activity_date": 1496868255, "last_edit_date": 1496868255, "creation_date": 1496867057, "answer_id": 44422130, "question_id": 44421893, "link": "https://stackoverflow.com/questions/44421893/c-how-to-check-if-among-n-objects-some-of-them-are-equal/44422130#44422130", "title": "C++ how to check if among N objects some of them are equal", "body": "<p>You can try a home cooked code as below:</p>\n\n<ol>\n<li>put objects in an array <br/></li>\n<li>compare each object to the rest of objects in array in the loop</li>\n</ol>\n\n<p>The loop will look like:</p>\n\n<pre><code>A[] arr = {a, b, c, d};\nint counter = 0;\nfor (int i=0; i &lt; arr.length -1 ; i++) {\n  for (int j=i+1; j &lt; arr.length; j++) {\n     if (arr[i].IsEqual(arr[j])) counter++;\n  }\n}\nprintf(\"There is %d objects that are equal\", counter);\n</code></pre>\n"}], "owner": {"reputation": 6080, "user_id": 270661, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/1f113fa4c0a2e259f6f65accd611e3f6?s=128&d=identicon&r=PG", "display_name": "cateof", "link": "https://stackoverflow.com/users/270661/cateof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 44422119, "answer_count": 4, "score": 1, "last_activity_date": 1496869754, "creation_date": 1496866087, "last_edit_date": 1496869754, "question_id": 44421893, "link": "https://stackoverflow.com/questions/44421893/c-how-to-check-if-among-n-objects-some-of-them-are-equal", "title": "C++ how to check if among N objects some of them are equal", "body": "<p>I have some C++ objects and I would like to check if some of them are equal.</p>\n\n<pre><code>bool IsEqual(const Board&amp; b)\n{\n    if( b.From() != from_ )\n        return false;\n\n    if (b.To() != to_ )\n        return false;\n\n    if( b.Selection() != selection_ )\n        return false;\n\n    return true;\n}\n</code></pre>\n\n<p>My objects consist of some integers ( from_, to_, selection_) and the class offers the IsEqual method to compare two objects.</p>\n\n<p>calling <code>obj1.IsEqual(obj2)</code> returns true if both objects have the same values.</p>\n\n<p>However how do I compare N objects? Is it possible to <code>push_back</code> objects to an <code>std::vector&lt;Board&gt;</code> and use <code>std::unique</code>? </p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1496878115, "post_id": 44421863, "comment_id": 75847101, "body": "You have a bug in your print_list. Why are you allocating a node then leaking the allocated memory on the next statement."}], "answers": [{"comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1496867462, "post_id": 44422203, "comment_id": 75842990, "body": "It&#39;s good to remove that memory leak but that doesn&#39;t answer the OP&#39;s question."}, {"owner": {"reputation": 206, "user_id": 6812437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252947901f64d1b07f359776d58ac243?s=128&d=identicon&r=PG&f=1", "display_name": "SIben", "link": "https://stackoverflow.com/users/6812437/siben"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 1, "creation_date": 1496867705, "post_id": 44422203, "comment_id": 75843122, "body": "Maybe I didn&#39;t get it then, but this deletion definitely breaks the printing since the data for the deleted Node is no longer accessible."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1496868223, "post_id": 44422203, "comment_id": 75843367, "body": "The second commented out line was the real culprit :) Didn&#39;t see that the first time."}], "tags": [], "owner": {"reputation": 206, "user_id": 6812437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/252947901f64d1b07f359776d58ac243?s=128&d=identicon&r=PG&f=1", "display_name": "SIben", "link": "https://stackoverflow.com/users/6812437/siben"}, "is_accepted": true, "score": 4, "last_activity_date": 1496867378, "creation_date": 1496867378, "answer_id": 44422203, "question_id": 44421863, "link": "https://stackoverflow.com/questions/44421863/c-linked-list-weird-outputs/44422203#44422203", "title": "C++ linked list weird outputs", "body": "<p>Your add_node function should be:</p>\n\n<pre><code>void Linked_list::add_node(int data) {\n\n  Node* newnode = new Node;\n  newnode-&gt;data = data;\n  newnode-&gt;next = NULL;\n\n  if (head == 0) {\n      head = newnode;\n      lenght = 1;\n      return;\n  } else {\n      //Node* temp = new Node;\n      Node *temp = head;\n      while (temp-&gt;next != NULL) {\n          temp = temp-&gt;next;\n      }\n\n      lenght++;\n      temp-&gt;next = newnode;\n      //delete temp;\n  }\n}\n</code></pre>\n\n<p>You don't need to create a new <code>Node</code> object since you are only looking to reference head. <code>delete temp</code> actually deletes the content of the address previously pointed to by <code>temp</code>, which is the last element of your list.</p>\n"}], "owner": {"reputation": 95, "user_id": 7663079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bc98a57fe9beee8ef58e29f95bd1a9?s=128&d=identicon&r=PG&f=1", "display_name": "Berk", "link": "https://stackoverflow.com/users/7663079/berk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 44422203, "answer_count": 1, "score": 2, "last_activity_date": 1496867478, "creation_date": 1496866010, "last_edit_date": 1496867478, "question_id": 44421863, "link": "https://stackoverflow.com/questions/44421863/c-linked-list-weird-outputs", "title": "C++ linked list weird outputs", "body": "<p>So i've been trying to code a linked list. When i debug or if i put one more print statement like this;</p>\n\n<pre><code>intlist.add_node(7);\nintlist.print_list();\nintlist.add_node(8);\n</code></pre>\n\n<p>It works fine prints; </p>\n\n<pre><code>5\n7\n5\n7\n8\n</code></pre>\n\n<p>But if i remove that statement, it only prints three eights. Same goes for debugging, it seems working but if i just run it doesn't. I didn't understand what is wrong.\nHere's my main;</p>\n\n<pre><code>int main(){\n  Linked_list intlist;\n  intlist.add_node(5);\n  intlist.add_node(7);\n  intlist.print_list();\n  intlist.add_node(8);\n  intlist.print_list();\n  return 0;\n}\n</code></pre>\n\n<p>header;</p>\n\n<pre><code>class Linked_list{\npublic:\n  Linked_list();\n\n  void add_node(int data);\n  void remove_node(int data);\n  int get_data(int index);\n  void print_list();\n\n  struct Node {\n      int data;\n      Node* next;\n  };\n\n  Node* head;\n  int lenght;\n};\n</code></pre>\n\n<p>And header's source file;</p>\n\n<pre><code>Linked_list::Linked_list(){\n  head = 0;\n  lenght = 0;\n}\n\nvoid Linked_list::add_node(int data){\n  Node* newnode = new Node;\n  newnode-&gt;data = data;\n  newnode-&gt;next = NULL;\n  if (head == 0) {head = newnode; lenght = 1; return;}\n  else{\n      Node* temp = new Node;\n      temp = head;\n      while (temp-&gt;next != NULL){\n          temp = temp-&gt;next;\n\n      }\n      lenght++;\n      temp-&gt;next = newnode;\n      delete temp;\n  }\n}\n\n\nvoid Linked_list::remove_node(int data){\n    return;\n}\n\nint Linked_list::get_data(int index){\n    return 0;\n}\n\nvoid Linked_list::print_list(){\n    if (head == 0) {std::cout &lt;&lt; \"List is empty!!\" &lt;&lt; std::endl; \n    return;}\n    else{\n        Node* ptr = new Node;\n        ptr = head;\n        for (int i = lenght; i &gt; 0; i--){\n            std::cout &lt;&lt; ptr-&gt;data &lt;&lt; std::endl;\n            ptr = ptr-&gt;next;\n        }\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "dictionary"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496865966, "post_id": 44421837, "comment_id": 75842210, "body": "An example in actual c++ would be helpful to illustrate your question. I&#39;m pretty sure every line that isn&#39;t a single brace contains a syntax or logic error."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 10, "creation_date": 1496865976, "post_id": 44421837, "comment_id": 75842215, "body": "One does not modify the container they are iterating. (Just a guideline, of course there are exceptions)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496866474, "post_id": 44421837, "comment_id": 75842476, "body": "The <code>remove i from dict;</code> step will invalidate the iterator your range-for is holding under the hood."}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1496866626, "post_id": 44421837, "comment_id": 75842566, "body": "sounds like a <code>stack</code> of <code>pairs</code>?"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1496866685, "post_id": 44421837, "comment_id": 75842604, "body": "There are many ways to do this ... what&#39;s appropriate depends on the map size, and mostly on how <code>func</code> is using your map..."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 0, "creation_date": 1496871357, "post_id": 44421837, "comment_id": 75844781, "body": "What about leaving the object in the map, but marking it with a &quot;disabled&quot; flag?"}], "answers": [{"tags": [], "owner": {"reputation": 794, "user_id": 3808882, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/76accdde31eadc26bbf994643bd15519?s=128&d=identicon&r=PG&f=1", "display_name": "Rakurai", "link": "https://stackoverflow.com/users/3808882/rakurai"}, "is_accepted": false, "score": 0, "last_activity_date": 1496875048, "creation_date": 1496875048, "answer_id": 44423861, "question_id": 44421837, "link": "https://stackoverflow.com/questions/44421837/erase-an-element-from-a-map-then-put-it-back/44423861#44423861", "title": "Erase an element from a map then put it back", "body": "<p>This question has an <a href=\"https://stackoverflow.com/questions/8234779/how-to-remove-from-a-map-while-iterating-it\">answer here</a>.</p>\n\n<p>However, your problem may be that you would like the function to <em>ignore</em> the key K while processing dict.  How about a second parameter \"K ignore\" and make the function skip that pair?  You could give it a default value in the declaration if that breaks other code, or overload the function.</p>\n"}, {"comments": [{"owner": {"reputation": 1089, "user_id": 4592639, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa2463371a45175830ebc8e4b7891889?s=128&d=identicon&r=PG&f=1", "display_name": "ZigZagZebra", "link": "https://stackoverflow.com/users/4592639/zigzagzebra"}, "edited": false, "score": 0, "creation_date": 1496959487, "post_id": 44437620, "comment_id": 75890116, "body": "When you call some_other_func(dict) do you mean pass a copy of dict to the some_other_func? I hope to call the same function (func) recursively. I am not sure why it invalidates the iterator since I am trying to keep the dict the same as the state it is passed in in each iteration of for loop. Could you please explain more about this? What if I want to call func in the for loop recursively? Is passing by copy the only way?"}, {"owner": {"reputation": 3063, "user_id": 5075720, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kNyMGvaELDs/AAAAAAAAAAI/AAAAAAAAVnw/P1Rt8TFE2gc/photo.jpg?sz=128", "display_name": "PaSTE", "link": "https://stackoverflow.com/users/5075720/paste"}, "reply_to_user": {"reputation": 1089, "user_id": 4592639, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa2463371a45175830ebc8e4b7891889?s=128&d=identicon&r=PG&f=1", "display_name": "ZigZagZebra", "link": "https://stackoverflow.com/users/4592639/zigzagzebra"}, "edited": false, "score": 0, "creation_date": 1496977173, "post_id": 44437620, "comment_id": 75894395, "body": "After <code>i = dict.erase(i);</code>, the iterator points to the next element in the map, which is why no increment is needed in the <code>for</code> statement.  If <code>func</code> were called recursively (and the signature still used a reference), when the inner <code>func</code> erases what the outer <code>func</code> calls <code>i</code>, that would invalidate the outer <code>i</code>, so the next step through the <code>for</code> loop outside the recursive call would probably core dump.  If the signature were <code>func(std::map&lt;K,V&gt; dict)</code> (no ampersand), then the map would be copied on each recursive call. This would incur a significant performance penalty, but it would work."}], "tags": [], "owner": {"reputation": 3063, "user_id": 5075720, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-kNyMGvaELDs/AAAAAAAAAAI/AAAAAAAAVnw/P1Rt8TFE2gc/photo.jpg?sz=128", "display_name": "PaSTE", "link": "https://stackoverflow.com/users/5075720/paste"}, "is_accepted": true, "score": 1, "last_activity_date": 1496975685, "last_edit_date": 1496975685, "creation_date": 1496929876, "answer_id": 44437620, "question_id": 44421837, "link": "https://stackoverflow.com/questions/44421837/erase-an-element-from-a-map-then-put-it-back/44437620#44437620", "title": "Erase an element from a map then put it back", "body": "<p>What you ask is definitely possible.  Here is one way to do it while trying to keep things simple and efficient:</p>\n\n<pre><code>void func(std::map&lt;K, V&gt; &amp;dict) {\n    for (auto i = dict.cbegin(); i != dict.cend(); ) {\n       auto old = *i;\n       i = dict.erase(i);   // i now points to the next element (or dict.end())\n       some_other_func(dict);\n       dict.insert(i, old); // i is used a hint where to re-insert the old value\n    }\n}\n</code></pre>\n\n<p>By calling <code>std::map::erase</code> with an iterator argument and <code>std::map::insert</code> with a hint, the complexity of each iteration through this loop is amortized constant.  Note that I assumed your calling of <code>func</code> in line 5 was actually supposed to be <code>some_other_func</code>, because calling <code>func</code> recursively would invalidate the iterator you carefully set in line 4.</p>\n\n<p>However, this is not the most efficient way to do this sort of processing (@rakurai has a <a href=\"https://stackoverflow.com/a/44423861/5075720\">suggestion</a> that should be considered).</p>\n"}], "owner": {"reputation": 1089, "user_id": 4592639, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aa2463371a45175830ebc8e4b7891889?s=128&d=identicon&r=PG&f=1", "display_name": "ZigZagZebra", "link": "https://stackoverflow.com/users/4592639/zigzagzebra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 44437620, "answer_count": 2, "score": 0, "last_activity_date": 1496975685, "creation_date": 1496865891, "question_id": 44421837, "link": "https://stackoverflow.com/questions/44421837/erase-an-element-from-a-map-then-put-it-back", "title": "Erase an element from a map then put it back", "body": "<p>Suppose I have a backtracking algorithm where I need to remove an element from a map, do something, then put it back. I am not sure if there is a good way to do it:</p>\n\n<pre><code>func(std::&lt;K, V&gt; map &amp;dict) {\n    for (auto i : dict) {\n       remove i from dict;\n       func(dict);\n       put i back to dict;\n    }\n}\n</code></pre>\n\n<p>I know there are ways to delete an element from map in <a href=\"https://stackoverflow.com/questions/8234779/how-to-remove-from-a-map-while-iterating-it\">here</a> but I am not sure if there are ways to achieve what I described above. I am aware that I can create a new dict in for loop and pass it in func but I am wondering if it can be done using the same dict.</p>\n"}, {"tags": ["c++", "network-programming", "boost-asio"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1496866436, "post_id": 44421737, "comment_id": 75842457, "body": "How can you tell the order is <code>1. 2. 3.</code> and not <code>1. 3. 2.</code>? Did you mean you measure &quot;3. the data is received&quot; instead of &quot;3. the data is sent&quot;?"}, {"owner": {"reputation": 1, "user_id": 6173092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e7086cd97f9634bc674bf6bd2b4d0a?s=128&d=identicon&r=PG&f=1", "display_name": "IakovK", "link": "https://stackoverflow.com/users/6173092/iakovk"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1496957070, "post_id": 44421737, "comment_id": 75889204, "body": "1. I put timestamps in my log messages. I print a log message right before the async_write and at the beginning of its handler. I determine that 1 is before 2 based on those timestamps. As for 3, I used the Microsoft Message Analyzer to capture network traffic. Message Analyzer capture also contains timestamps. I believe that those timestamps mark the moment when the message enters the networking system  from asio code. Therefore I am sure that the order is 1. 2. 3.    2. When I wrote the &quot;3. the data is sent&quot; I meant that the data was sent."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1496961399, "post_id": 44421737, "comment_id": 75890654, "body": "If you see a timestamp later than 2. in MMA, that doesn&#39;t mean it got sent after 2. (depending on where in the protocol you see the timestamp). It may just mean MMA saw it later. Also, things like Nagle&#39;s algorithm could be at play."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6173092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e7086cd97f9634bc674bf6bd2b4d0a?s=128&d=identicon&r=PG&f=1", "display_name": "IakovK", "link": "https://stackoverflow.com/users/6173092/iakovk"}, "edited": false, "score": 0, "creation_date": 1497075352, "post_id": 44446635, "comment_id": 75936268, "body": "I believe that MMA sees the message when it enters Windows networking subsystem, that is when socket.send function is called. Could you please explain why I should believe otherwise?"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1, "user_id": 6173092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e7086cd97f9634bc674bf6bd2b4d0a?s=128&d=identicon&r=PG&f=1", "display_name": "IakovK", "link": "https://stackoverflow.com/users/6173092/iakovk"}, "edited": false, "score": 0, "creation_date": 1497080606, "post_id": 44446635, "comment_id": 75937401, "body": "Because the MMA doesn&#39;t run in the kernel and all processes are fairly scheduled. Which one gets the next time slice on which core is not predictable or fixed"}, {"owner": {"reputation": 1, "user_id": 6173092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e7086cd97f9634bc674bf6bd2b4d0a?s=128&d=identicon&r=PG&f=1", "display_name": "IakovK", "link": "https://stackoverflow.com/users/6173092/iakovk"}, "edited": false, "score": 0, "creation_date": 1497171933, "post_id": 44446635, "comment_id": 75958611, "body": "In my setting it is negligible. If the scheduling is fair, every process gets a chance to run within milliseconds. In my case, delay is 50 secs or so. Milliseconds are negligible."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 1, "user_id": 6173092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e7086cd97f9634bc674bf6bd2b4d0a?s=128&d=identicon&r=PG&f=1", "display_name": "IakovK", "link": "https://stackoverflow.com/users/6173092/iakovk"}, "edited": false, "score": 0, "creation_date": 1497208636, "post_id": 44446635, "comment_id": 75969612, "body": "Ooh. 50s. I don&#39;t know why I read across that. I thought you were drawing conclusions on ms timings. Sorry for that. Did you look at Nagle/TCP NODELAY?"}, {"owner": {"reputation": 1, "user_id": 6173092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e7086cd97f9634bc674bf6bd2b4d0a?s=128&d=identicon&r=PG&f=1", "display_name": "IakovK", "link": "https://stackoverflow.com/users/6173092/iakovk"}, "edited": false, "score": 0, "creation_date": 1497298968, "post_id": 44446635, "comment_id": 76009431, "body": "Yes, I did (look). I don&#39;t think it is relevant here."}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 0, "last_activity_date": 1496961455, "creation_date": 1496961455, "answer_id": 44446635, "question_id": 44421737, "link": "https://stackoverflow.com/questions/44421737/when-using-asiossl-the-async-write-doesnt-send-the-data/44446635#44446635", "title": "When using asio+ssl, the async_write doesn&#39;t send the data", "body": "<p>If you see a timestamp later than 2. in MMA, that doesn't mean it got sent after 2. (depending on where in the protocol you see the timestamp). It may just mean MMA saw it later. Also, things like Nagle's algorithm could be at play.</p>\n\n<p>Try setting TCP NODELAY, e.g.</p>\n\n<pre><code>socket.open(tcp::v4());\nsocket.set_option(tcp::no_delay(true));\nsocket.async_connect(endpoint, handler);\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6173092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e7086cd97f9634bc674bf6bd2b4d0a?s=128&d=identicon&r=PG&f=1", "display_name": "IakovK", "link": "https://stackoverflow.com/users/6173092/iakovk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496961455, "creation_date": 1496865524, "question_id": 44421737, "link": "https://stackoverflow.com/questions/44421737/when-using-asiossl-the-async-write-doesnt-send-the-data", "title": "When using asio+ssl, the async_write doesn&#39;t send the data", "body": "<p>Given:</p>\n\n<pre><code>asio::ssl::stream&lt;asio::ip::tcp::socket&amp;&gt; &amp;m_socket;\nasync_write(self-&gt;m_socket, asio::buffer(self-&gt;m_v),\n    [self, handler](asio::error_code ec, std::size_t s)\n{\n    handler(ec);\n});\n</code></pre>\n\n<p>Result:\nthe handler is invoked before the data is sent (socket.send() function is called).\nResult 2:\nthe data is actually sent after a long while - in my reproducible case about 1 min.\nSo, the sequence of events is as follows:\n1. <code>async_write</code> is called;\n2. handler is called;\n3. data is sent.</p>\n\n<p>I believe that correct sequence must be:\n1. <code>async_write</code> is called;\n2. data is sent.\n3. handler is called;</p>\n\n<p>It doesn't happen always, but very reproducible. I searched all over Internet for similar cases - found nothing.</p>\n\n<p>I need advice: what to do about that. Is it a bug in asio or is it some tricky bug in my program and where to look to fix it.</p>\n\n<p>I can reproduce the case easily, can provide log files etc.</p>\n"}, {"tags": ["c++", "algorithm", "linked-list"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1496865142, "post_id": 44421545, "comment_id": 75841787, "body": "<code>auto p1_next = p1-&gt;next; auto p2_next = p2-&gt;next; p1-&gt;next = p2; p2-&gt;next = p1_next; p1 = p1_next; p2 = p2_next;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 503, "user_id": 7909419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1c2dbf10620e4125915fe26a03ada942?s=128&d=identicon&r=PG&f=1", "display_name": "four_lines", "link": "https://stackoverflow.com/users/7909419/four-lines"}, "is_accepted": true, "score": 3, "last_activity_date": 1496886175, "creation_date": 1496886175, "answer_id": 44425339, "question_id": 44421545, "link": "https://stackoverflow.com/questions/44421545/runner-technique-for-weaving-elements-of-linked-list/44425339#44425339", "title": "runner technique for weaving elements of linked list", "body": "<p>If <code>A1 -&gt; A2 -&gt; ... -&gt; AN -&gt; B1 -&gt; B2 ... -&gt; BN</code> is your original linked list, after the first step you'll have <code>P1</code> and <code>P2</code> pointing at <code>A1</code> and <code>B1</code> respectively. Let's say <code>AN</code> points to null, this can be done easily in the first step.</p>\n\n<p>At each iteration, do these steps:</p>\n\n<pre><code>temp1 = P1.next\ntemp2 = P2.next //1\n\nP2.next = P1.next //2\nP1.next = P2 //3\n\nP1 = temp1 \nP2 = temp2 //4\n</code></pre>\n\n<p>Here are the changes at the four positions in the first iteration:</p>\n\n<p>1:</p>\n\n<pre><code>P1                   P2\n\u2b0d                    \u2b0d\nA1 \u2192 A2 \u2192 ... \u2192 AN   B1 \u2192 B2 ... \u2192 BN\n     \u2b0d                    \u2b0d\n    temp1                temp2\n</code></pre>\n\n<p>2:</p>\n\n<pre><code>P1   .\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013.\n\u2b0d    \u2193               \u2191  \nA1 \u2192 A2 \u2192 ... \u2192 AN   B1   B2 ... \u2192 BN\n     \u2b0d               \u2b0d    \u2b0d\n    temp1            P2  temp2\n</code></pre>\n\n<p>3:</p>\n\n<pre><code>P1   .\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013.\n\u2b0d    \u2193               \u2191  \nA1   A2 \u2192 ... \u2192 AN   B1   B2 ... \u2192 BN   //P2 points on B1\n\u2193    \u2b0d               \u2191    \u2b0d\n\u2193   temp1            \u2191   temp2\n\u00b7\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u2013\u00b7\n</code></pre>\n\n<p>This is equivalent to:</p>\n\n<pre><code>P1                   P2\n\u2b0d                    \u2b0d\nA1 \u2192 B1 \u2192 A2 \u2192 ... \u2192 AN   B2 ... \u2192 BN\n          \u2b0d               \u2b0d\n         temp1           temp2\n</code></pre>\n\n<p>4:</p>\n\n<pre><code>          P1              P2\n          \u2b0d               \u2b0d\nA1 \u2192 B1 \u2192 A2 \u2192 ... \u2192 AN   B2 ... \u2192 BN\n          \u2b0d               \u2b0d\n         temp1           temp2\n</code></pre>\n\n<p>And you repeat the same until <code>P1</code> reaches <code>AN</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2425, "user_id": 7891828, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TVvYo.png?s=128&g=1", "display_name": "AS Mackay", "link": "https://stackoverflow.com/users/7891828/as-mackay"}, "is_accepted": false, "score": 1, "last_activity_date": 1496925184, "creation_date": 1496925184, "answer_id": 44435903, "question_id": 44421545, "link": "https://stackoverflow.com/questions/44421545/runner-technique-for-weaving-elements-of-linked-list/44435903#44435903", "title": "runner technique for weaving elements of linked list", "body": "<p>The algorithms presented by Adam Stelmaszczyk, Igor Tandetnik and four_lines are correct; one only has to take care with the terminating condition otherwise the final nullptr that terminates the list can become lost. four_lines advocates handling this before doing the weaving. Or it can be done during the weaving by checking:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n\nnamespace\n{\n    struct elem\n    {\n        int val;\n        elem* next;\n        elem() : val(-1), next(nullptr) {}\n    };\n}\n\nint main()\n{\n    // setup single-linked list of elements (an array here makes it easy...) \n    const int SIZE = 12; // even number\n    elem elems[SIZE];\n    for (int x = 0; x &lt; SIZE - 1; ++x) { elems[x].next = &amp;elems[x + 1]; }\n    for (int x = 0; x &lt; SIZE; ++x) { elems[x].val = x; }\n\n    // divide the list using ptrs pf, ps to point at first part, second part \n    elem* pf = elems;\n    elem* ps = elems;\n    do\n    {\n        pf = pf-&gt;next; \n        pf = pf-&gt;next;\n        ps = ps-&gt;next;\n    } while (pf != nullptr);\n    pf = elems; // move pf back to start\n\n    // weave first and second parts of list using pf and ps\n    do\n    {\n        // update pf element next-ptr to point at ps, then move pf to its original next element \n        elem* oldpfnext = pf-&gt;next;\n        pf-&gt;next = ps;\n        pf = oldpfnext;\n        // if ps element is not at end, update ps element next-ptr to point the new location of pf\n        elem* oldpsnext = ps-&gt;next;\n        if (nullptr != ps-&gt;next)\n        {\n            ps-&gt;next = pf;\n        }\n        // now move ps to its original next element (even if null)... \n        ps = oldpsnext;\n    } while (nullptr != ps); // ... and stop if we are now at end\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 3142, "user_id": 1598163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/131731839e6abf47e73673d7bf7990c6?s=128&d=identicon&r=PG", "display_name": "linuxfever", "link": "https://stackoverflow.com/users/1598163/linuxfever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1135, "favorite_count": 0, "accepted_answer_id": 44425339, "answer_count": 2, "score": 2, "last_activity_date": 1496925184, "creation_date": 1496864742, "last_edit_date": 1496866870, "question_id": 44421545, "link": "https://stackoverflow.com/questions/44421545/runner-technique-for-weaving-elements-of-linked-list", "title": "runner technique for weaving elements of linked list", "body": "<p>I've been reading the cracking the coding interview book. I am a bit stuck on implementing the runner technique for weaving elements of a linked list. The book goes as follows:</p>\n\n<p>\"Suppose you had a linked list a1->a2....->an->b1->b2....bn, and you want to rearrange it into a1->b1->a2->b2->.....an->bn. You don't know the length of the linked list but all you know is that it is an even number.</p>\n\n<p>You could have one pointer p1 (fast pointer) move every two elements for every one move that p2 makes. When p1 hits the end of the linked list, p2 will be at the endpoint. Then, move p1 back to the front and begin \"weaving\" the elements. On each iteration, p2 selects an element and inserts it after p1.\"</p>\n\n<p>Now I understand the technique up to the point before weaving starts. So, right before weaving, we basically have (for n=4 elements)</p>\n\n<pre><code>p1      p2\na1-&gt;a2-&gt;b1-&gt;b2\n</code></pre>\n\n<p>Now, if I understand correctly, I have to move the element pointed to by p2 (i.e. b1) and insert it after p1, in other words</p>\n\n<pre><code>p1.next = p2\n</code></pre>\n\n<p>which would result in the following list (?)</p>\n\n<pre><code>a1-&gt;b1-&gt;b2\n</code></pre>\n\n<p>How does the algorithm proceed from here?</p>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/30546150/runner-technique-to-combine-two-equal-linked-lists\">this</a> question but it seems to suggest that the above step would result in</p>\n\n<pre><code>a1-&gt;b1-&gt;a2-&gt;b2\n</code></pre>\n\n<p>which I do not see how. I am probably missing something fundamental here.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1496864825, "post_id": 44421530, "comment_id": 75841602, "body": "You don&#39;t seem to have defined the default constructor for rectangle."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 5674548, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208059959127121/picture?type=large", "display_name": "Ha&#239;them Saoudi", "link": "https://stackoverflow.com/users/5674548/ha%c3%afthem-saoudi"}, "edited": false, "score": 0, "creation_date": 1496864956, "post_id": 44421579, "comment_id": 75841682, "body": "when I deleted it I got this error: use of deleted function &#39;rectangle::rectangle()&#39;"}, {"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "reply_to_user": {"reputation": 17, "user_id": 5674548, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208059959127121/picture?type=large", "display_name": "Ha&#239;them Saoudi", "link": "https://stackoverflow.com/users/5674548/ha%c3%afthem-saoudi"}, "edited": false, "score": 0, "creation_date": 1496865126, "post_id": 44421579, "comment_id": 75841775, "body": "@Ha&#239;themSaoudi That&#39;s because <code>shape</code> doesn&#39;t have a default Constructor. Either give <code>shape</code> a default constructor, or explicitly define <code>rectangle()</code> to call <code>shape(int, int, char, int)</code> in its member initialization list."}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "edited": false, "score": 0, "creation_date": 1496865197, "post_id": 44421579, "comment_id": 75841819, "body": "you need have an initializer list <a href=\"http://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/initializer_list</a>"}, {"owner": {"reputation": 17, "user_id": 5674548, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208059959127121/picture?type=large", "display_name": "Ha&#239;them Saoudi", "link": "https://stackoverflow.com/users/5674548/ha%c3%afthem-saoudi"}, "reply_to_user": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "edited": false, "score": 0, "creation_date": 1496865738, "post_id": 44421579, "comment_id": 75842100, "body": "@Tyger I just declared a default constructor for shape but i still get the error undefined reference for shape::shape()"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 17, "user_id": 5674548, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208059959127121/picture?type=large", "display_name": "Ha&#239;them Saoudi", "link": "https://stackoverflow.com/users/5674548/ha%c3%afthem-saoudi"}, "edited": false, "score": 0, "creation_date": 1496866123, "post_id": 44421579, "comment_id": 75842283, "body": "@Ha&#239;themSaoudi It worked for me <a href=\"http://cpp.sh/8smrz\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 672, "user_id": 7868736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba3186dc762c3fc009d2d025a1d1643?s=128&d=identicon&r=PG&f=1", "display_name": "Tyger", "link": "https://stackoverflow.com/users/7868736/tyger"}, "reply_to_user": {"reputation": 17, "user_id": 5674548, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208059959127121/picture?type=large", "display_name": "Ha&#239;them Saoudi", "link": "https://stackoverflow.com/users/5674548/ha%c3%afthem-saoudi"}, "edited": false, "score": 0, "creation_date": 1496866439, "post_id": 44421579, "comment_id": 75842460, "body": "@Ha&#239;themSaoudi did it work or are you still getting an error?"}], "tags": [], "owner": {"reputation": 117, "user_id": 6933831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c149b3f6440f6c23880070d7c51fe460?s=128&d=identicon&r=PG&f=1", "display_name": "Blue Goose", "link": "https://stackoverflow.com/users/6933831/blue-goose"}, "is_accepted": true, "score": 1, "last_activity_date": 1496864885, "creation_date": 1496864885, "answer_id": 44421579, "question_id": 44421530, "link": "https://stackoverflow.com/questions/44421530/undefined-reference-to-rectanglerectangle/44421579#44421579", "title": "undefined reference to `rectangle::rectangle()", "body": "<p>You declared the default constructor but didn't define it. You need to define the function <code>rectangle::rectangle()</code> somewhere. If you don't need the constructor to actually do anything, then you don't need to declare it at all. So either define the constructor or don't declare it.</p>\n"}], "owner": {"reputation": 17, "user_id": 5674548, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208059959127121/picture?type=large", "display_name": "Ha&#239;them Saoudi", "link": "https://stackoverflow.com/users/5674548/ha%c3%afthem-saoudi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1130, "favorite_count": 0, "closed_date": 1496864947, "accepted_answer_id": 44421579, "answer_count": 1, "score": 0, "last_activity_date": 1496864885, "creation_date": 1496864665, "question_id": 44421530, "link": "https://stackoverflow.com/questions/44421530/undefined-reference-to-rectanglerectangle", "closed_reason": "Duplicate", "title": "undefined reference to `rectangle::rectangle()", "body": "<p>I'm trying to declare an object of type rectangle but it keeps showing me this error</p>\n\n<p>this is the rectangle class which inherits from shape class:</p>\n\n<pre><code>class rectangle: public shape{\n\nint width, height;\npublic:\n    rectangle();\n\n void draw(int width, int height){\n    for(int i = 1; i &lt;= height; i++){\n            for(int j = 1; j &lt;= width; j++){\n                if( i == 1 &amp;&amp; i == height)\n                    cout&lt;&lt;\"*\";\n                else if( j == 1 &amp;&amp; j == width)\n                    cout&lt;&lt;\"*\";\n                else\n                    cout&lt;&lt;\" \";\n            }\n            cout&lt;&lt;endl;\n        }\n    }\n\n\n};\n</code></pre>\n\n<p>this is the shape class:</p>\n\n<pre><code>class shape\n{\nint x, y;\nchar letter;\npublic:\n    shape(int x, int y, char letter, int length){\n        int X = x;\n        int Y = y;\n        int L = letter;\n    }\n    void verLine(){\n        for(int i = 0; i &lt; 5; i++){\n            cout&lt;&lt;\"*\"&lt;&lt;endl;\n        }\n    }\n    void horLine(){\n        for(int i = 0; i &lt; 5; i++){\n            cout&lt;&lt;\"*\";\n        }\n    }\n    char setLetter(char letter){\n        int newLetter = letter;\n        return newLetter;\n    }\n    void gotoxy(int x, int y){\n        HANDLE hConsole;\n        COORD cursorLoe;\n        std::cout.flush();\n        cursorLoe.X = x;\n        cursorLoe.Y = y;\n        hConsole = GetStdHandle(STD_OUTPUT_HANDLE);\n        SetConsoleCursorPosition(hConsole, cursorLoe);\n    }\n};\n</code></pre>\n\n<p>and this is the main:</p>\n\n<pre><code> int main()\n {\n     rectangle r1;\n     cout&lt;&lt;endl;\n     r1.draw(5,5);\n     return 0;\n }\n</code></pre>\n\n<p>I think the problem is with the default constructor I have in the rectangle class, but I din't find any other way to code it</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2008", "stdmap"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1496864763, "post_id": 44421442, "comment_id": 75841565, "body": "Are these IDs determined at run time or compile time?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1496864795, "post_id": 44421442, "comment_id": 75841588, "body": "@RyanP I would assume runtime since OP talked about them being structured like an XML file"}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1496864816, "post_id": 44421442, "comment_id": 75841599, "body": "@RyanP: Run-time."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1496865962, "post_id": 44421442, "comment_id": 75842207, "body": "I guess that the nearest thing to preallocating elements for a map would be to create a map with a custom linear allocator, with a preallocated buffer of the relevant size."}], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496864553, "post_id": 44421488, "comment_id": 75841439, "body": "<code>std::unordered_map</code> is not available in MSVS 2008"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1496864611, "post_id": 44421488, "comment_id": 75841471, "body": "It really is what OP wants :( perhaps <code>boost::unordered_map</code>?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1496868444, "post_id": 44421488, "comment_id": 75843473, "body": "Visual Studio 2008 has <a href=\"https://msdn.microsoft.com/en-us/library/0d462wfh(v=vs.90).aspx\" rel=\"nofollow noreferrer\"><code>stdext::hash_map</code></a>."}, {"owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1496871957, "post_id": 44421488, "comment_id": 75844987, "body": "@Curious: Hmm. Interesting. One would think that sorted keys of <code>std::map</code> would make the lookup faster with it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "edited": false, "score": 0, "creation_date": 1496872890, "post_id": 44421488, "comment_id": 75845332, "body": "@c00000fd  Read up on hash tables versus binary trees."}], "tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": false, "score": 3, "last_activity_date": 1496864438, "creation_date": 1496864438, "answer_id": 44421488, "question_id": 44421442, "link": "https://stackoverflow.com/questions/44421442/using-stdmap-to-find-duplicates-in-data-and-its-performance-issue-can-i-pre-a/44421488#44421488", "title": "Using std::map to find duplicates in data and its performance issue. Can I pre-allocate it?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/container/unordered_map\" rel=\"nofollow noreferrer\"><code>std::unordered_map</code></a>s are faster for key lookups (much faster in my experience) in most implementations (algorithmically, they are <code>O(1)</code> as opposed to the <code>O(log(n))</code> for <code>std::map</code>).  </p>\n\n<p>And they have a <a href=\"http://en.cppreference.com/w/cpp/container/unordered_map/reserve\" rel=\"nofollow noreferrer\"><code>reserve()</code></a> method </p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 3, "last_activity_date": 1496865085, "last_edit_date": 1496865085, "creation_date": 1496864683, "answer_id": 44421534, "question_id": 44421442, "link": "https://stackoverflow.com/questions/44421442/using-stdmap-to-find-duplicates-in-data-and-its-performance-issue-can-i-pre-a/44421534#44421534", "title": "Using std::map to find duplicates in data and its performance issue. Can I pre-allocate it?", "body": "<blockquote>\n  <p>For each element in my data structure I see if its ID is in my\n  std::map, and if so, the function asserts. Otherwise it adds it to the\n  map.</p>\n</blockquote>\n\n<p>You probably don't want to do do that, simply use the map's insert() member function, which will fail if the key is already in the map.</p>\n\n<p>And you can't reserve space in tree-based containers like std::map.</p>\n"}, {"tags": [], "owner": {"reputation": 794, "user_id": 3808882, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/76accdde31eadc26bbf994643bd15519?s=128&d=identicon&r=PG&f=1", "display_name": "Rakurai", "link": "https://stackoverflow.com/users/3808882/rakurai"}, "is_accepted": false, "score": 1, "last_activity_date": 1496939581, "last_edit_date": 1496939581, "creation_date": 1496893155, "answer_id": 44426226, "question_id": 44421442, "link": "https://stackoverflow.com/questions/44421442/using-stdmap-to-find-duplicates-in-data-and-its-performance-issue-can-i-pre-a/44426226#44426226", "title": "Using std::map to find duplicates in data and its performance issue. Can I pre-allocate it?", "body": "<p>Map uses a tree so keys can be traversed in sorted order, so insertion and lookup both occur in lg(n) time.  Additionally, insertion can trigger rebalancing the tree.  An unordered map uses a hash table, which allows for constant time insertion and lookup, at the cost of traversing the keys.  <a href=\"http://supercomputingblog.com/windows/ordered-map-vs-unordered-map-a-performance-study/\" rel=\"nofollow noreferrer\">Here</a> is an interesting performance study similar to your use case.</p>\n\n<p>As some have pointed out, you may not have access to unordered maps in VS2008.  You could get some of the benefit by using a hash table of your own: just use an array of H maps, and lookup/insert to the array using modulo H.  The average depth of the trees underlying the maps will decrease by lg(H), and rebalances should be less costly as well.  Example:</p>\n\n<pre><code>std::map&lt;int, int&gt; dicts[HASHKEY]; // array of H maps\ndicts[id % HASHKEY][id] = whatever; // insertion\nauto it = dicts[id % HASHKEY].find(id); // lookup\n</code></pre>\n\n<p>Here is some example code that demonstrates the speedup:</p>\n\n<pre><code>#include &lt;cstdlib&gt;\n#include &lt;random&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n#include &lt;cassert&gt;\n\n#define MAX_HASH 16384\n\nint main() {\n    unsigned int nIDs = 1 &lt;&lt; 21;\n    std::vector&lt;int&gt; IDs(nIDs);\n\n    // random fill\n    std::random_device rnd;\n    std::mt19937 mersenne_engine(rnd());\n    std::uniform_int_distribution&lt;int&gt; dist(0, nIDs); // get some collisions\n    auto gen = std::bind(dist, mersenne_engine);\n    generate(begin(IDs), end(IDs), gen);\n\n    std::map&lt;int, int&gt; dicts[MAX_HASH];\n\n    // time insertion into 1..MAX_HASH maps\n    for (unsigned int hash = 1; hash &lt;= MAX_HASH; hash &lt;&lt;= 1) {\n        for (unsigned int i = 0; i &lt; hash; ++i)\n            dicts[i].clear();\n\n        // time simple insertion/overwrite\n        clock_t start = clock();\n\n        for (unsigned int i = 0; i &lt; nIDs; ++i) {\n            int id = IDs[i];\n            dicts[id % hash][id] = 1;\n        }\n\n        double insert_elapsed = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\n\n        // time lookup\n        // shuffle the vector to avoid optimal lookups\n        std::shuffle(begin(IDs), end(IDs), mersenne_engine);        \n        start = clock();\n\n        for (unsigned int i = 0; i &lt; nIDs; ++i) {\n            int id = IDs[i];\n            auto it = dicts[id % hash].find(id);\n            assert(it-&gt;second == 1);\n        }\n\n        double lookup_elapsed = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\n\n        // time lookup+insertion\n        for (unsigned int i = 0; i &lt; hash; ++i)\n            dicts[i].clear();\n\n        start = clock();\n\n        for (unsigned int i = 0; i &lt; nIDs; ++i) {\n            int id = IDs[i];\n            unsigned int dnum = id % hash;\n            auto it = dicts[dnum].find(id);\n\n            if (it == dicts[dnum].end())\n                dicts[dnum][id] = 1;\n        }\n\n        double cond_elapsed = static_cast&lt;double&gt;(clock() - start) / CLOCKS_PER_SEC;\n\n        printf(\"%5d maps, avg. %7ld keys - lookup: %1.3f, lookup: %1.3f, conditional insert: %1.3f\\n\",\n            hash, IDs.size()/hash, insert_elapsed, lookup_elapsed, cond_elapsed);\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    1 maps, avg. 2097152 keys - insert: 1.958, lookup: 2.010, conditional insert: 2.473\n    2 maps, avg. 1048576 keys - insert: 1.956, lookup: 1.988, conditional insert: 2.390\n    4 maps, avg.  524288 keys - insert: 1.911, lookup: 1.982, conditional insert: 2.416\n    8 maps, avg.  262144 keys - insert: 1.848, lookup: 1.956, conditional insert: 2.407\n   16 maps, avg.  131072 keys - insert: 1.846, lookup: 1.973, conditional insert: 2.312\n   32 maps, avg.   65536 keys - insert: 1.814, lookup: 1.882, conditional insert: 2.303\n   64 maps, avg.   32768 keys - insert: 1.796, lookup: 1.973, conditional insert: 2.258\n  128 maps, avg.   16384 keys - insert: 1.807, lookup: 1.879, conditional insert: 2.250\n  256 maps, avg.    8192 keys - insert: 1.785, lookup: 1.849, conditional insert: 2.158\n  512 maps, avg.    4096 keys - insert: 1.731, lookup: 1.820, conditional insert: 2.229\n 1024 maps, avg.    2048 keys - lookup: 1.743, lookup: 1.787, conditional insert: 2.050\n 2048 maps, avg.    1024 keys - lookup: 1.614, lookup: 1.709, conditional insert: 1.993\n 4096 maps, avg.     512 keys - lookup: 1.628, lookup: 1.638, conditional insert: 1.963\n 8192 maps, avg.     256 keys - lookup: 1.549, lookup: 1.568, conditional insert: 1.803\n16384 maps, avg.     128 keys - lookup: 1.468, lookup: 1.474, conditional insert: 1.688\n</code></pre>\n\n<p>As you can see, the performance gets better as the number of maps increases, at the cost of more memory allocated to the map objects.</p>\n"}], "owner": {"reputation": 17964, "user_id": 843732, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8e7b3eb1f6bb311c47610a9d230485f0?s=128&d=identicon&r=PG", "display_name": "c00000fd", "link": "https://stackoverflow.com/users/843732/c00000fd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1496939581, "creation_date": 1496864313, "question_id": 44421442, "link": "https://stackoverflow.com/questions/44421442/using-stdmap-to-find-duplicates-in-data-and-its-performance-issue-can-i-pre-a", "title": "Using std::map to find duplicates in data and its performance issue. Can I pre-allocate it?", "body": "<p>My goal is to check for duplicate IDs in my custom data structure. I'm coding it with <code>Visual Studio 2008 Sp1</code>. So I wrote the following debugger-only function that does \"sanity checks\" on the data as I work with the code.</p>\n\n<p>I'm using the following approach:</p>\n\n<ul>\n<li><p>I enumerate through all elements in my data structure (which by itself is relatively fast.)</p></li>\n<li><p>I then use <code>std::map</code> to collect IDs of all elements as keys, while I make the <code>value</code> part point to the data structure element itself (which will help me quickly identify the duplicate.)</p></li>\n<li><p>For each element in my data structure I see if its ID is in my <code>std::map</code>, and if so, the function asserts. Otherwise it adds it to the map.</p></li>\n</ul>\n\n<p>Here's a pseudo-code for that:</p>\n\n<pre><code>std::map&lt;ULONGLONG, BIN_XML_TAG*&gt; dicTagIDs;\n\nfor(std::vector&lt;MY_ELEMENT&gt;::const_iterator iTag = arrNode.begin(); iTag != arrNode.end(); ++iTag)\n{\n    std::map&lt;ULONGLONG, MY_ELEMENT*&gt;::const_iterator itrT = dicTagIDs.find(iTag-&gt;uiTagID);\n    if(itrT != dicTagIDs.end())\n    {\n        //Duplicate tag ID!\n        MY_ELEMENT* pDuplicateToTag = itrT-&gt;second;\n        ASSERT(NULL);\n    }\n\n    //If not, then add it\n    dicTagIDs[iTag-&gt;uiTagID] = iTag._Myptr;\n\n    //... may later call itself recursively\n}\n</code></pre>\n\n<p>This works, except that the function above gets exponentially slower as the size of my data structure grows. And since I use it everywhere throughout my \"debugger-build\" code, it'd be nice to speed it up.</p>\n\n<p>So I was thinking to pre-allocate <code>std::map</code>. I don't know the exact number of elements in my data structure (it is structured kinda like an XML file) but I can make an approximate guess that I could use for preallocation.</p>\n\n<p>But <code>std::map</code> doesn't seem to provide a <code>reserve()</code> method.</p>\n\n<p>So any suggestions how to speed this up?</p>\n"}, {"tags": ["c++", "makefile", "ubuntu-16.04", "openmpi"], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 4954083, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac8e36a3a5c54f38fc445230819a46b7?s=128&d=identicon&r=PG&f=1", "display_name": "boof", "link": "https://stackoverflow.com/users/4954083/boof"}, "is_accepted": true, "score": 1, "last_activity_date": 1496881509, "creation_date": 1496881509, "answer_id": 44424759, "question_id": 44421297, "link": "https://stackoverflow.com/questions/44421297/problems-installing-openmpi-locally-for-use-with-cuda/44424759#44424759", "title": "Problems installing OpenMPI locally for use with CUDA", "body": "<p>I have found the solution!!!</p>\n\n<p>I logged into <code>root</code> and ran through the installation steps without using sudo.</p>\n\n<pre><code>#gunzip -c openmpi-2.1.1.tar.gz | tar xf -\n#cd openmpi-2.1.1\n#./configure --prefix=/opt/openmpi-2.1.1 CC=icc CXX=icpc FC=ifort\n#make all install\n</code></pre>\n\n<p>I was trying to use OpenMPI with the Intel Composer compilers and this was causing permissions issues. I followed the installation instructions found <a href=\"https://software.intel.com/en-us/articles/performance-tools-for-software-developers-building-open-mpi-with-the-intel-compilers\" rel=\"nofollow noreferrer\">here</a>, but I got the same problems I had before when trying to install. The issue was that the linker, <code>ld</code> \"could not find\" the proper libraries because those libraries are no longer provided in the <code>$LD_LIBRARY_PATH</code> variable when <code>sudo</code> is called. The only way to circumvent this is by logging into the <code>root</code> user and setting your <code>$LD_LIBRARY_PATH</code> variable to be identical to the one your normal user has.</p>\n\n<p>I had been stuck on this for <em>days</em> and I'm jumping for joy now that it's sorted out! I hope this helps someone else in the future.</p>\n"}], "owner": {"reputation": 190, "user_id": 4954083, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ac8e36a3a5c54f38fc445230819a46b7?s=128&d=identicon&r=PG&f=1", "display_name": "boof", "link": "https://stackoverflow.com/users/4954083/boof"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 44424759, "answer_count": 1, "score": 0, "last_activity_date": 1554280693, "creation_date": 1496863783, "last_edit_date": 1496864020, "question_id": 44421297, "link": "https://stackoverflow.com/questions/44421297/problems-installing-openmpi-locally-for-use-with-cuda", "title": "Problems installing OpenMPI locally for use with CUDA", "body": "<h1>Short Version</h1>\n\n<p>I have CUDA code I need to run locally. Thus, I am trying to install OpenMPI following <a href=\"https://www.open-mpi.org/faq/?category=building#easy-build\" rel=\"nofollow noreferrer\">the OpenMPI directions</a>. When I try to <code>make</code> my code, I receive <a href=\"https://www.mediafire.com/?9j9q3gitync2a9p\" rel=\"nofollow noreferrer\">very long error output</a>, similar to what is described by the <a href=\"https://www.open-mpi.org/faq/?category=building#build-intel-compilers\" rel=\"nofollow noreferrer\">OpenMPI documentation</a>. I tried to reinstall OpenMPI with the documentation's suggested fix, but now I get these errors during installation:</p>\n\n<pre><code>Making all in tools/ompi_info\nmake[2]: Entering directory '/home/hatfull/Downloads/openmpi-2.1.1/ompi/tools/ompi_info'\n  CC       ompi_info.o\n  CC       param.o\n  CCLD     ompi_info\nld: warning: libimf.so, needed by ../../../ompi/.libs/libmpi.so, not found (try using -rpath or -rpath-link)\nld: warning: libsvml.so, needed by ../../../ompi/.libs/libmpi.so, not found (try using -rpath or -rpath-link)\nld: warning: libirng.so, needed by ../../../ompi/.libs/libmpi.so, not found (try using -rpath or -rpath-link)\nld: warning: libintlc.so.5, needed by ../../../ompi/.libs/libmpi.so, not found (try using -rpath or -rpath-link)\nld: .libs/ompi_info: hidden symbol `__intel_cpu_features_init_x' in /opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\nld: final link failed: Bad value\nMakefile:1785: recipe for target 'ompi_info' failed\nmake[2]: *** [ompi_info] Error 1\nmake[2]: Leaving directory '/home/hatfull/Downloads/openmpi-2.1.1/ompi/tools/ompi_info'\nMakefile:3353: recipe for target 'all-recursive' failed\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory '/home/hatfull/Downloads/openmpi-2.1.1/ompi'\nMakefile:1806: recipe for target 'all-recursive' failed\nmake: *** [all-recursive] Error 1\n</code></pre>\n\n<p>What am I doing wrong? Please help! S.O.S.!</p>\n\n<h1>Long Version</h1>\n\n<p>I have CUDA code I need to run locally. Thus, I am trying to install OpenMPI following <a href=\"https://www.open-mpi.org/faq/?category=building#easy-build\" rel=\"nofollow noreferrer\">the OpenMPI directions</a>. I have the tar stored as <code>~/Downloads/openmpi-2.1.1.tar.gz</code>. Hance, I ran</p>\n\n<pre><code>$gunzip -c openmpi-2.1.1.tar.gz | tar xf -\n$cd openmpi-2.1.1\n$./configure --prefix=/opt/openmpi-2.1.1 &amp;&gt; configure_log1\n$sudo make all install &amp;&gt; install_log_take1\n</code></pre>\n\n<p>with success. Note that I changed the <code>--prefix=/usr/local</code> in the directions to <code>--prefix=/opt/openmpi-2.1.1</code>. I have included <a href=\"https://www.mediafire.com/?67h69bwlb2d5w6d\" rel=\"nofollow noreferrer\">configure_log1</a> and <a href=\"https://www.mediafire.com/?vz9w89ln4nw6489\" rel=\"nofollow noreferrer\">install_log_take1</a>.</p>\n\n<p>When I try to <code>make</code> my code using my makefile <a href=\"https://www.mediafire.com/?rhqiu1dqxip0lfh\" rel=\"nofollow noreferrer\">makefile.ulfhednar</a>,</p>\n\n<pre><code>$make -f makefile.ulfhednar clean\n$make -f makefile.ulfhednar &amp;&gt; make_log1\n</code></pre>\n\n<p>I receive a very long error output in <a href=\"https://www.mediafire.com/?9j9q3gitync2a9p\" rel=\"nofollow noreferrer\">make_log1</a> that looks similar to what is described by the <a href=\"https://www.open-mpi.org/faq/?category=building#build-intel-compilers\" rel=\"nofollow noreferrer\">OpenMPI documentation</a>. It says the solution is to install OpenMPI with the configure options \"<code>./configure CC=icc CXX=icpc F77=ifort FC=ifort ...</code>\", so I reinstalled using the commands,</p>\n\n<pre><code>$cd ~/Downloads/openmpi-2.1.1\n$sudo make uninstall\n$sudo rm -r /opt/openmpi-2.1.1\n$cd ..\n$sudo rm -r openmpi-2.1.1\n\n$gunzip -c openmpi-2.1.1.tar.gz | tar xf -\n$cd openmpi-2.1.1\n\n$which icc\n/opt/intel/compilers_and_libraries_2017.4.196/linux/bin/intel64/icc\n$which icpc\n/opt/intel/compilers_and_libraries_2017.4.196/linux/bin/intel64/icpc\n$which ifort\n/opt/intel/compilers_and_libraries_2017.4.196/linux/bin/intel64/ifort\n\n$./configure --prefix=/opt/openmpi-2.1.1 CC=/opt/intel/compilers_and_libraries_2017.4.196/linux/bin/intel64/icc CXX=/opt/intel/compilers_and_libraries_2017.4.196/linux/bin/intel64/icpc F77=/opt/intel/compilers_and_libraries_2017.4.196/linux/bin/intel64/ifort FC=/opt/intel/compilers_and_libraries_2017.4.196/linux/bin/intel64/ifort &amp;&gt; configure_log2\n$sudo make all install &amp;&gt; install_log_take2\n</code></pre>\n\n<p>Here is <a href=\"https://www.mediafire.com/?j9l7d94szwpa1gc\" rel=\"nofollow noreferrer\">configure_log2</a> and <a href=\"https://www.mediafire.com/?ff7i7f6hl4ubfr9\" rel=\"nofollow noreferrer\">install_log_take2</a>. Of note in <code>install_log_take2</code> are the following lines:</p>\n\n<pre><code>Making all in tools/ompi_info\nmake[2]: Entering directory '/home/hatfull/Downloads/openmpi-2.1.1/ompi/tools/ompi_info'\n  CC       ompi_info.o\n  CC       param.o\n  CCLD     ompi_info\nld: warning: libimf.so, needed by ../../../ompi/.libs/libmpi.so, not found (try using -rpath or -rpath-link)\nld: warning: libsvml.so, needed by ../../../ompi/.libs/libmpi.so, not found (try using -rpath or -rpath-link)\nld: warning: libirng.so, needed by ../../../ompi/.libs/libmpi.so, not found (try using -rpath or -rpath-link)\nld: warning: libintlc.so.5, needed by ../../../ompi/.libs/libmpi.so, not found (try using -rpath or -rpath-link)\nld: .libs/ompi_info: hidden symbol `__intel_cpu_features_init_x' in /opt/intel/compilers_and_libraries_2017.4.196/linux/compiler/lib/intel64_lin/libirc.a(cpu_feature_disp.o) is referenced by DSO\nld: final link failed: Bad value\nMakefile:1785: recipe for target 'ompi_info' failed\nmake[2]: *** [ompi_info] Error 1\nmake[2]: Leaving directory '/home/hatfull/Downloads/openmpi-2.1.1/ompi/tools/ompi_info'\nMakefile:3353: recipe for target 'all-recursive' failed\nmake[1]: *** [all-recursive] Error 1\nmake[1]: Leaving directory '/home/hatfull/Downloads/openmpi-2.1.1/ompi'\nMakefile:1806: recipe for target 'all-recursive' failed\nmake: *** [all-recursive] Error 1\n</code></pre>\n\n<p>Sorry I had to upload all the log files to mediafire, pastebin didn't accept them because they were too large.</p>\n\n<p>What am I doing wrong? Please help! S.O.S.!</p>\n"}, {"tags": ["c++", "macos", "cmake", "clion", "dylib"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2266462"}, "edited": false, "score": 0, "creation_date": 1496869371, "post_id": 44421278, "comment_id": 75843921, "body": "I recently patched Tagaini Jisho project for this, may be you can use my pull request as example: <a href=\"https://github.com/Gnurou/tagainijisho/pull/195\" rel=\"nofollow noreferrer\">github.com/Gnurou/tagainijisho/pull/195</a>"}, {"owner": {"reputation": 97, "user_id": 2958863, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/a7c3d04d45be3c0add70f69cf4d50862?s=128&d=identicon&r=PG&f=1", "display_name": "justin018", "link": "https://stackoverflow.com/users/2958863/justin018"}, "edited": false, "score": 0, "creation_date": 1496869952, "post_id": 44421278, "comment_id": 75844158, "body": "Thanks I will take a look"}], "answers": [{"tags": [], "owner": {"reputation": 1073, "user_id": 3203032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/A34l1.jpg?s=128&g=1", "display_name": "antoine", "link": "https://stackoverflow.com/users/3203032/antoine"}, "is_accepted": false, "score": 0, "last_activity_date": 1571260406, "creation_date": 1571260406, "answer_id": 58421791, "question_id": 44421278, "link": "https://stackoverflow.com/questions/44421278/how-to-include-libraries-in-osx-bundles-with-cmake/58421791#58421791", "title": "How to include libraries in OSX bundles with CMAKE", "body": "<p>On OSX usually man uses Frameworks and integrate it into app bundle with an install rule.</p>\n\n<p>The rule looks like: </p>\n\n<pre><code>    install( DIRECTORY \"${CMAKE_CURRENT_LIST_DIR}/ofxSyphon/libs/Syphon/lib/osx/Syphon.framework\"\n    DESTINATION ${APP_NAME}.app/Contents/Frameworks\")\n</code></pre>\n\n<p>Then the framework folder will be copied into the <code>Contents/Frameworks</code> subfolder of the application bundle.\nFor this to work, the application itself should be installed with something like:</p>\n\n<pre><code>install(TARGETS ${APP_NAME} DESTINATION .)\n</code></pre>\n\n<p>And you might want to specify the installation prefix with <code>CMAKE_INSTALL_PREFIX</code>, default is <code>/usr/local</code>.</p>\n\n<p>For a single library file, the process is quite similar, but you also have to tweak the <code>RPATH</code> of the application to add the relative path of the lib for the executable to find it. This part is not needed for framework because they have a standardized folder structure and the executable looks into it for its dependencies.</p>\n"}], "owner": {"reputation": 97, "user_id": 2958863, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/a7c3d04d45be3c0add70f69cf4d50862?s=128&d=identicon&r=PG&f=1", "display_name": "justin018", "link": "https://stackoverflow.com/users/2958863/justin018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1900, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1571260406, "creation_date": 1496863708, "question_id": 44421278, "link": "https://stackoverflow.com/questions/44421278/how-to-include-libraries-in-osx-bundles-with-cmake", "title": "How to include libraries in OSX bundles with CMAKE", "body": "<p>Im trying to build an OSX bundle with Clion and Cmake, Currently the library links correctly in terms of I have no pre compile errors but when I build and try to run the program I get the following error</p>\n\n<pre>\n\n    dyld: Library not loaded: libxl.dylib\n    Referenced from: \n    /path/to/executable/\n      Reason: image not found\n\n</pre>\n\n<p>Ive searched on this issue and cant seem to find a clear solution, This is probably due to my lack of experience with CMake and C++.  </p>\n\n<p>If anyone has a solution or can point me in the direction of what I should be reading to further understand this it would be much appreciated. </p>\n\n<p>See CMakeLists.txt below</p>\n\n<pre>\n    cmake_minimum_required(VERSION 3.7)\n    project(project name)\n\n    set(CMAKE_CXX_STANDARD 14)\n\n    set(SOURCE_FILES main.cpp)\n\n    find_package( Qt5Core REQUIRED )\n    find_package( Qt5Widgets REQUIRED )\n    find_package( Qt5Gui REQUIRED )\n\n    set(PROJECT_LINK_LIBS libxl.dylib)\n    link_directories(${CMAKE_SOURCE_DIR}/LibXL/lib)\n    include_directories(${CMAKE_SOURCE_DIR}/LibXL/include_cpp)\n\n\n    #Mac Bundle (Built on Mac)\n    add_executable(project_target_mac MACOSX_BUNDLE main.cpp)\n    qt5_use_modules( project_target_mac Core Widgets Gui )\n    target_link_libraries(project_target_mac Qt5::Widgets)\n    target_link_libraries(project_target_mac ${PROJECT_LINK_LIBS} )\n    #set_target_properties(project_target_mac PROPERTIES INSTALL_RPATH \"${CMAKE_SOURCE_DIR}/LibXL/lib\")\n\n    add_executable(project_target ${SOURCE_FILES})\n    qt5_use_modules( project_target Core Widgets Gui )\n    target_link_libraries(project_target Qt5::Widgets)\n    target_link_libraries(project_target ${PROJECT_LINK_LIBS\n\n} )\n</pre>\n"}, {"tags": ["c++", "input", "output"], "comments": [{"owner": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 1, "creation_date": 1496864069, "post_id": 44421265, "comment_id": 75841163, "body": "Its funny that you set your <code>maximum</code> to 1 million.  Assuming a 32-bit Integer, your maximum value should be around 2.1 billion, and you should use <code>INT_MAX</code>."}, {"owner": {"reputation": 599, "user_id": 6932518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b578bad9124e1b2d5e74cb021da734?s=128&d=identicon&r=PG", "display_name": "Botimoo", "link": "https://stackoverflow.com/users/6932518/botimoo"}, "edited": false, "score": 0, "creation_date": 1496864098, "post_id": 44421265, "comment_id": 75841182, "body": "Also try declaring the function <code>isPrime</code> as a <code>bool</code>. Then you&#39;d write <code>return false; &#47;&#47;instead of return 0</code> and <code>return true; &#47;&#47;instead of return 1</code>. In your if statement you can then write <code>if(isPrime(b))</code>. Note that you could write the if statement like that without the change too, because in C++ every integer value apart from 0 evaluates to true."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1496864244, "post_id": 44421265, "comment_id": 75841280, "body": "Run this function on every iteration to see if the current iteration&#39;s number is a prime or not: <a href=\"https://stackoverflow.com/a/38646385/5890227\"><b>Determining if a number is prime</b></a>"}], "answers": [{"tags": [], "owner": {"reputation": 498, "user_id": 2420535, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0fce6a6234f8a6bc5f3bde432682ef77?s=128&d=identicon&r=PG&f=1", "display_name": "styrofoam fly", "link": "https://stackoverflow.com/users/2420535/styrofoam-fly"}, "is_accepted": false, "score": 2, "last_activity_date": 1496863809, "creation_date": 1496863809, "answer_id": 44421306, "question_id": 44421265, "link": "https://stackoverflow.com/questions/44421265/c-all-prime-numbers-function-not-working/44421306#44421306", "title": "C++ all prime numbers function not working", "body": "<p>You should start your loop in <code>isPrime</code> from <code>2</code> instead of <code>1</code>. Every integer equals <code>0 mod 1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 8127655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9badd5a4dc31520704f1fa719135a08d?s=128&d=identicon&r=PG&f=1", "display_name": "LRD27", "link": "https://stackoverflow.com/users/8127655/lrd27"}, "edited": false, "score": 0, "creation_date": 1496864227, "post_id": 44421337, "comment_id": 75841270, "body": "OMG ! I can&#39;t believe i didn&#39;t see it. But why was the output 1 and not all the numbers from 0 to x ?"}, {"owner": {"reputation": 599, "user_id": 6932518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3b578bad9124e1b2d5e74cb021da734?s=128&d=identicon&r=PG", "display_name": "Botimoo", "link": "https://stackoverflow.com/users/6932518/botimoo"}, "edited": false, "score": 0, "creation_date": 1496864398, "post_id": 44421337, "comment_id": 75841364, "body": "Because your function returned 0 and you wrote to output only if it deemed a number a prime. Which it didn&#39;t in this form."}, {"owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "edited": false, "score": 0, "creation_date": 1496864445, "post_id": 44421337, "comment_id": 75841393, "body": "Since num / 2 = 0, the for loop is never entered when num = 1. Therefore, your isPrime() funtion will return 1 and it will let it output. All other nums will enter the for loop and return 0. (Edited original answer to include this)"}], "tags": [], "owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "is_accepted": true, "score": 1, "last_activity_date": 1496864469, "last_edit_date": 1496864469, "creation_date": 1496863926, "answer_id": 44421337, "question_id": 44421265, "link": "https://stackoverflow.com/questions/44421265/c-all-prime-numbers-function-not-working/44421337#44421337", "title": "C++ all prime numbers function not working", "body": "<p>I believe your issue lies within your isPrime funcion. The first iteration of the for loop when a = 1 will always catch the if statement due to any num % 1 = 0.\nStart your for loop with a = 2.</p>\n\n<pre><code>   int isPrime(int num) {\n        for (int a = 2; a &lt;= num/2; a++) \n            if (num % a == 0)\n                return 0;\n        return 1;\n    }\n</code></pre>\n\n<p>Since num / 2 = 0, the for loop is never entered when num = 1. Therefore, your isPrime() funtion will return 1 and it will let it output. All other nums will enter the for loop and return 0.</p>\n"}], "owner": {"reputation": 63, "user_id": 8127655, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9badd5a4dc31520704f1fa719135a08d?s=128&d=identicon&r=PG&f=1", "display_name": "LRD27", "link": "https://stackoverflow.com/users/8127655/lrd27"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 44421337, "answer_count": 2, "score": 1, "last_activity_date": 1496864469, "creation_date": 1496863645, "question_id": 44421265, "link": "https://stackoverflow.com/questions/44421265/c-all-prime-numbers-function-not-working", "title": "C++ all prime numbers function not working", "body": "<p>So i am really new at programming, i was messing around and decided to try coding a Prime generator. The idea is the user inputs the maximum number the computer should check for a prime, and it outputs a text file with all the primes till there.\nSo i've written this piece of code.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;Windows.h&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\nint isPrime(int num) {\n    for (int a = 1; a &lt;= num/2; a++) \n        if (num % a == 0)\n            return 0;\n    return 1;\n}\n\n\nint main() {\n    ofstream out_data(\"primes.txt\");\n    std::string name;\n    int quantity;\n    int maximum = 1000000;\n    std::cout &lt;&lt; \"What is your name ?\\n\";\n    getline(std::cin, name);\n    std::cout &lt;&lt; \"What is the biggest number you want to get as a prime \" &lt;&lt; name &lt;&lt; \"? Please note that the maximum is \" &lt;&lt; maximum &lt;&lt;\" \\n\";\n    std::cin &gt;&gt; quantity;\n    if (quantity &lt;= maximum) {\n        for (int b = 1; b &lt; quantity; b++) {\n            if (isPrime(b) == 1) {\n                std::cout &lt;&lt; b &lt;&lt; \"\\n\";\n                out_data &lt;&lt; b &lt;&lt; \"\\n\";\n            }\n        }\n        std::cout &lt;&lt; \"The computer has finished calculating primes. Please check your folder for a .txt file.\";\n        Sleep(60000);\n    }\n    if (quantity &gt; maximum) {\n        std::cout &lt;&lt; \"Oh, i'm sorry. The computer can not calculate till \" &lt;&lt; quantity &lt;&lt; \".\";\n        Sleep(15000);\n    }\n    return 0;\n}\n</code></pre>\n\n<p>The file and the console shows just the number 1. I spent some time trying to find out what's wrong with the code and got nowhere. In my mind the for loop would repeat itself and the if statement until b\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 6, "creation_date": 1496863763, "post_id": 44421227, "comment_id": 75840971, "body": "You&#39;d have to ask the comity. Keep in mind that once you declare a function <code>noexcept</code>, removing it would be a breaking change. You can always add it later while maintaining backwards compatibility."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 7, "creation_date": 1496863819, "post_id": 44421227, "comment_id": 75841001, "body": "See the first paragraph <a href=\"https://stackoverflow.com/a/20517333/4342498\">here</a>.  Might be what you are looking for"}, {"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496864066, "post_id": 44421227, "comment_id": 75841161, "body": "@NathanOliver that is actually an interesting post. However not only functions that have specified undefined behaviour lack the <code>noexcept</code> specifier, but also function that &quot;cannot&quot; or &quot;must not&quot; fail, can lack them. At least it appears such from my short investigation."}, {"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496864138, "post_id": 44421227, "comment_id": 75841211, "body": "@Fran&#231;oisAndrieux The point about potentially breaking backwards compatibility if introducing exceptions for the function, is actually really interesting, and not something I had thought about. But is it really likely with the <code>std::memcmp</code> function? I guess it could be."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496864301, "post_id": 44421227, "comment_id": 75841313, "body": "<code>timespec_get</code> is a C11 function that C++17 imported."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1496864417, "post_id": 44421227, "comment_id": 75841379, "body": "@TommyAndersen Can you give me an example of a function that cannot or must not fail that is not marked with <code>noexcept</code>?  Also <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#Re-noexcept\" rel=\"nofollow noreferrer\">here</a> is a link to what the CPP core guidelines have to say about <code>noexcept</code>."}, {"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496864421, "post_id": 44421227, "comment_id": 75841381, "body": "@T.C. you mean C11 function? but yes you are actually correct, it slipped my attention."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496864455, "post_id": 44421227, "comment_id": 75841396, "body": "Right, also it&#39;s C++17. I got confused because you said it&#39;s in C++11 - and C++11 doesn&#39;t import anything from C11."}, {"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496864566, "post_id": 44421227, "comment_id": 75841448, "body": "@NathanOliver I guess the <a href=\"http://en.cppreference.com/w/cpp/string/wide/iswspace\" rel=\"nofollow noreferrer\"><code>std::iswspace</code></a> could be such an example?"}, {"owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496864688, "post_id": 44421227, "comment_id": 75841514, "body": "@T.C. good point."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496864727, "post_id": 44421227, "comment_id": 75841535, "body": "@TommyAndersen That one has UB if you pass it something neither representable as a <code>wchar_t</code> nor equal to <code>WEOF</code>."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1496865393, "post_id": 44421227, "comment_id": 75841923, "body": "If you think there are functions that really ought to be <code>noexcept</code>, but are not currently, and there would be no downsides to making them so (and I&#39;m <i>not</i> saying there are no such functions), why don&#39;t you then write up a proposal for the standards committee to consider that includes your rationale(s) and submit it?  The standard doesn&#39;t evolve by magic you know; it requires knowlegable and engaged members of the public to participate in order to make good progress :)"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1496866328, "post_id": 44421227, "comment_id": 75842389, "body": "There&#39;s also the reality that C++ library implementations often do not have control over the C library implementation, so adding C++-specific polishes to stuff from the C library is difficult (especially now that noexcept is part of the function type)."}, {"owner": {"reputation": 3868, "user_id": 2386026, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b480a437c4c0af43ae3866177c79e142?s=128&d=identicon&r=PG&f=1", "display_name": "Jens Munk", "link": "https://stackoverflow.com/users/2386026/jens-munk"}, "edited": false, "score": 0, "creation_date": 1498040328, "post_id": 44421227, "comment_id": 76330596, "body": "I think that you got the primary reason. Many of the functions are C and thereby implicitly <code>noexcept</code>. To me it sounds a little crazy starting adding C++ modifiers"}], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 8652580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49a820ee6f50f228fe7e4f2fff78eec0?s=128&d=identicon&r=PG&f=1", "display_name": "kmkim85", "link": "https://stackoverflow.com/users/8652580/kmkim85"}, "is_accepted": false, "score": 1, "last_activity_date": 1506046257, "creation_date": 1506046257, "answer_id": 46355804, "question_id": 44421227, "link": "https://stackoverflow.com/questions/44421227/why-is-noexcept-not-used-more-in-the-standard-library/46355804#46355804", "title": "Why is noexcept not used more in the standard library?", "body": "<p>Rephrasing what you wrote above,</p>\n\n<p>how can you guarantee <strong>noexcept</strong> when things are passed by pointers?</p>\n\n<p>When you write your custom classes/functions, you can mark things noexcept without no guarantee of throwing no exception. But you probably do not want to do it when you are not absolutely sure that your function will not throw in any case. </p>\n"}], "owner": {"reputation": 6654, "user_id": 111143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yhf9U.jpg?s=128&g=1", "display_name": "Tommy Andersen", "link": "https://stackoverflow.com/users/111143/tommy-andersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 4, "answer_count": 1, "score": 17, "last_activity_date": 1506046257, "creation_date": 1496863533, "last_edit_date": 1497290022, "question_id": 44421227, "link": "https://stackoverflow.com/questions/44421227/why-is-noexcept-not-used-more-in-the-standard-library", "title": "Why is noexcept not used more in the standard library?", "body": "<p>Since <a href=\"http://en.cppreference.com/w/cpp/language/noexcept_spec\" rel=\"noreferrer\"><code>noexcept</code></a> was introduced and addressed many of the problems with <a href=\"http://en.cppreference.com/w/cpp/language/except_spec\" rel=\"noreferrer\"><code>throw()</code></a>, there is now a reason for specifying whether a function does not throw an exception. While it is not a compile time restriction, it will enable some potential optimizations by the compiler, and if nothing else, a signalling, and documentation, value for the user of the function.</p>\n\n<p>In light of this I was actually a bit surprised, when I browsed through the standard functions such as: <a href=\"http://en.cppreference.com/w/cpp/chrono/c/time\" rel=\"noreferrer\"><code>std::time</code></a>, <a href=\"http://en.cppreference.com/w/cpp/chrono/c/timespec_get\" rel=\"noreferrer\"><code>std::timespec_get</code></a>, and <a href=\"http://en.cppreference.com/w/cpp/string/byte/memcmp\" rel=\"noreferrer\"><code>std::memcmp</code></a>, and saw that none of them used the <code>noexcept</code> specifier. It is not like there are no functions at all using it, in the standard library, for instance the <a href=\"http://en.cppreference.com/w/cpp/utility/tuple/tie\" rel=\"noreferrer\"><code>std::tie</code></a> function uses it, and others as well. But a large portion of functions, do not use it.</p>\n\n<p>I guess it makes sense for functions that have undefined behaviour in certain situations, such as <a href=\"http://en.cppreference.com/w/cpp/string/byte/strlen\" rel=\"noreferrer\"><code>std::strlen</code></a>, since this will allow implementers more freedom. </p>\n\n<p>But for functions where there are no specified situations which can lead to undefined behaviour, and which obviously do not throw exceptions, why would these functions not be declared using the <code>noexcept</code> specifier?</p>\n\n<p>It cannot only be due to keeping similarity with the old C functions, since for instance <code>std::timespec_get</code> is a new function in C++11, so it must be for some other reason.</p>\n\n<p>The compiler might very well be smart enough to detect that the functions will not throw exceptions, and as such be able to do the same optimizations. But in my opinion one of the best arguments for <code>noexcept</code> is the documentation value, that comes from it, which will be lacking, when it is missing.</p>\n\n<p>Which leads me to my final hypothesis, that the missing <code>noexcept</code> specifiers in the standard library are really oversights, much like it was the case with the <a href=\"https://herbsutter.com/gotw/_102/\" rel=\"noreferrer\">missing <code>std::make_unique</code></a>. But unlike the missing <code>std::make_unique</code> which was corrected (implemented) in C++14, the functions above, have still not (as of C++17) been made <code>noexcept</code>.</p>\n\n<p>Does anyone know the reasoning behind the missing <code>noexcept</code> specifiers, or am I right in thinking that this is an oversight?</p>\n"}, {"tags": ["c++", "random", "ctime"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 4, "creation_date": 1496863480, "post_id": 44421193, "comment_id": 75840821, "body": "This is a lot of code.  Can you narrow down the problem to a few lines of code?"}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496863526, "post_id": 44421193, "comment_id": 75840854, "body": "Sure, I&#39;ve just gotten flagged before for not having fully compilable code so I was being safe."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1496863580, "post_id": 44421193, "comment_id": 75840879, "body": "It is a delicate balance.  You want to give us compile-able code, but not so much that we have to hunt for the problem."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1496863689, "post_id": 44421193, "comment_id": 75840932, "body": "Indeed. Although it stuck out like a sore thumb to an old cat who&#39;s spent too long using random numbers."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1496864131, "post_id": 44421193, "comment_id": 75841206, "body": "I&#39;ve edited the question to be stripped down, however I think my output makes less sense now, so if there is any confusion let me know."}], "answers": [{"comments": [{"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1496863976, "post_id": 44421246, "comment_id": 75841105, "body": "This doesn&#39;t work either. I think you identified a smaller problem I would have had after more testing which is slightly larger numbers than expected. I&#39;ll edit my question to include some outputs that I received to better clarify the question."}, {"owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "edited": false, "score": 0, "creation_date": 1496864394, "post_id": 44421246, "comment_id": 75841360, "body": "I&#39;ve managed to fix my error, but I don&#39;t want to take away from your answer here. I found a variable mistake that was messing with the cycle numbers in the code that I deleted from the question."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 7, "last_activity_date": 1496863596, "creation_date": 1496863596, "answer_id": 44421246, "question_id": 44421193, "link": "https://stackoverflow.com/questions/44421193/why-is-rand-giving-me-numbers-outside-of-my-defined-interval-it-worked-fine/44421246#44421246", "title": "Why is rand() giving me numbers outside of my defined interval? (It worked fine yesterday)", "body": "<p>You need rand() % 10000 + 1000 for your range.</p>\n\n<p>Put yesterday down to a statistical anomaly.</p>\n\n<p>There are better ways (this approach has statistical bias towards lower numbers). Look at std::uniform_int_distribution, and consider using Mersenne Twister as the actual generator.</p>\n"}], "owner": {"reputation": 641, "user_id": 5432208, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ehCuw.jpg?s=128&g=1", "display_name": "Remixt", "link": "https://stackoverflow.com/users/5432208/remixt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496863815, "creation_date": 1496863405, "last_edit_date": 1496863815, "question_id": 44421193, "link": "https://stackoverflow.com/questions/44421193/why-is-rand-giving-me-numbers-outside-of-my-defined-interval-it-worked-fine", "title": "Why is rand() giving me numbers outside of my defined interval? (It worked fine yesterday)", "body": "<p>I am generating random integers between 1000, and 11000. However they must have a mean of 6000. I used this snip of code in my program yesterday and it worked just fine, but now it gives me huge numbers as if my interval doesn't matter.</p>\n\n<p>Edit: Stripped the code down a bit for easier reading.</p>\n\n<pre><code>srand(time(NULL));\nint k = 5;\nint cTotal = 0;\nint cAverage = 0;\n\n  struct process {\n    int pid; // process id\n    int cycles; // number of cycles required to complete the process\n    int mSize; // size of the memory footprint\n};\n\n    for (int i = 0; i &lt; k; i++) {\n\n        processes[i].pid = i; // set the unique identifier of the process.\n\n        // If statements for determining the number cycles in each process\n        if (k == 0) {\n            processes[i].cycles = 6000; // if the user decides to try only one process, the average must be 6000, so assign 6000 as its value.\n            cTotal += processes[i].cycles; //update the total number of cycles, and the average.\n            cAverage = cTotal / (i + 1);\n\n        } else if (cAverage == 0) { // if we have more than 1 process and  it happens to be the first one, go ahead and randomize it since we can adjust the average after the first iteration.\n            processes[i].cycles = rand() % 11000 + 1000; //update the total number of cycles, and the average.\n            cTotal += processes[i].cycles;\n            cAverage = cTotal / (i + 1);\n\n        } else if (cAverage == 6000 &amp;&amp; i != k - 1) { // if the average is already at 6000, it's safe to choose any random number so do that unless this is the last iteration of the loop.\n            processes[i].cycles = rand() % 11000 + 1000; //update the total number of cycles, and the average.\n            cTotal += processes[i].cycles;\n            cAverage = cTotal / (i + 1);\n\n        } else {\n            processes[i].cycles = (6000 * (i + 1)) - cTotal; // set the number of cycles such that the average will be 6000\n            cTotal = cTotal + processes[i].cycles; //update the total number of cycles, and the average.\n            cAverage = cTotal / (i + 1);\n        }\n    } //for\n</code></pre>\n\n<p>Edit2: Here is some of the output from my program (includes this plus another identical if statement for memory size)</p>\n\n<pre><code>    How many processes would you like to simulate? - &gt;5\n  5\nSimulating 5 Processes...\n***********************\nPID: 0\nCycles: 63\nMem Size: 1877994624\n***********************\nPID: 1\nCycles: -23\nMem Size: 1877936645\n***********************\nPID: 2\nCycles: -1877936648\nMem Size: 13\n***********************\nPID: 3\nCycles: -1877936641\nMem Size: 64\n***********************\nPID: 4\nCycles: -1877936685\nMem Size: 4201340\n***********************\nTotal Cycles: 30000\nAverage Cycles: 6000\nAverage Memory: 376427625 KB\n</code></pre>\n"}, {"tags": ["c++", "lnk2019"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1496863226, "post_id": 44421109, "comment_id": 75840669, "body": "<code>main</code> needs to be a free function"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496863252, "post_id": 44421109, "comment_id": 75840685, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1496863271, "post_id": 44421109, "comment_id": 75840697, "body": "Looks like you might be coming from a Java background.  Unlike Java, in C++, <code>main</code> needs to be a free function.  In fact, it doesn&#39;t look like you need a class here at all."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496863342, "post_id": 44421109, "comment_id": 75840735, "body": "@Justin I like that batter, changing the dupe target."}], "owner": {"reputation": 11, "user_id": 8127642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceac50de7432f9b310efd20e49dd4d99?s=128&d=identicon&r=PG&f=1", "display_name": "Hussein Amr", "link": "https://stackoverflow.com/users/8127642/hussein-amr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1496863226, "answer_count": 0, "score": 0, "last_activity_date": 1496863353, "creation_date": 1496863145, "question_id": 44421109, "link": "https://stackoverflow.com/questions/44421109/lnk2019-unresolved-external-symbol-main-referenced-in-function-int-cdecl-inv", "closed_reason": "Duplicate", "title": "LNK2019 unresolved external symbol _main referenced in function &quot;int __cdecl invoke_main(void)&quot; (?invoke_main@@YAHXZ)", "body": "<p>I've seen a ton of questions here (And in other sites) about this error and none of them seem to really have the answer to why this error happens in my particular case.</p>\n\n<p>I've already tried these:</p>\n\n<ul>\n<li>Checking what the project is being created as</li>\n<li>Changing Linker SubSystem to Console and Windows</li>\n<li>Changing main() to WinMain() and wmain()</li>\n<li>Cleaning, then Rebuilding</li>\n<li>Restarting Visual Studio</li>\n</ul>\n\n<p>Here's my code for this application. I apologize for how messy it is.</p>\n\n<pre><code>#include &lt;ctype.h&gt;\n#include &lt;iostream&gt;\n#include &lt;malloc.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\nclass Source {\n    int partition(int A[], int p, int r) {\n        int x = A[r]; int i = p - 1;\n        for (int j = p; j &gt;= r - 1; j++) {\n            if (A[j] &lt;= x) { i = i + 1; int temp = A[i]; A[i] = A[j]; A[j] = temp; }; };\n        int t = A[i + 1]; A[i + 1] = A[r]; A[r] = t;\n        return (i + 1);\n    };\n    int merge(int A[], int p, int q, int r) {\n        int n1 = q - p + 1; int n2 = r - q;\n        int L[100]; int R[100];\n        for (int i = 1; i == n1; i++) { L[i] = A[p + i - 1]; };\n        for (int j = 1; j == n2; j++) { R[j] = A[q + j]; }\n        L[n1 + 1] = INT_MAX; R[n2 + 1] = INT_MAX;\n        int i = 1; int j = 1;\n        for (int k = p; k == r; i++) {\n            if (L[i] &lt;= R[j]) {\n                A[k] = L[i]; i = i + 1;\n            }\n            else if (A[k] == R[j]) {\n                j = j + 1;\n            };\n        };\n    };\n    int insertionSort(int A[]) {\n        size_t s = sizeof(A) / sizeof(int);\n        for (int j = 2; s; j++) {// A.length = n\n            int key = A[j];//Insert A[j] into sorted sequence A[1\u2026j - 1];\n            int i = j - 1;\n            while (i&gt;0 &amp;&amp; A[i]&gt;key) { A[i + 1] = A[i]; i = i - 1; A[i + 1] = key; };\n        };\n    };\n    int quickSort(int A[], int p, int r) { if (p &lt; r) { int q = partition(A, p, r); quickSort(A, p, q - 1); quickSort(A, q + 1, r); }; };\n    int mergeSort(int A[], int p, int r) {\n        if (p&lt;r) {\n            int q = floor((p + r) / 2); mergeSort(A, p, q);\n            mergeSort(A, q + 1, r); merge(A, p, q, r);\n        };\n    };\n    int main() {\n        int newA[1000]; for (int i = 0; i &gt;= 1000; i++) { newA[i] = rand(); }\n        insertionSort(newA);\n        for (int i = 0; i &gt;= 1000; i++) { newA[i] = rand(); }\n        quickSort(newA, 0, 1000);\n        for (int i = 0; i &gt;= 1000; i++) { newA[i] = rand(); }\n        mergeSort(newA, 0, 1000);\n    };\n};\n</code></pre>\n"}, {"tags": ["c++", "sorting", "vector"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1496863033, "post_id": 44421069, "comment_id": 75840548, "body": "<a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\"><code>std::sort</code></a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1496863078, "post_id": 44421069, "comment_id": 75840570, "body": "Did you consult the <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">manual</a>? It comes with examples."}, {"owner": {"reputation": 1090, "user_id": 2756517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a4b72e0834488e9d88e845c21657a4b?s=128&d=identicon&r=PG", "display_name": "Yaman Jain", "link": "https://stackoverflow.com/users/2756517/yaman-jain"}, "edited": false, "score": 0, "creation_date": 1496863117, "post_id": 44421069, "comment_id": 75840598, "body": "<code>sort(v.begin(), v.end())</code>; where <code>v</code> is the vector."}, {"owner": {"reputation": 125, "user_id": 6115194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HSj4K.jpg?s=128&g=1", "display_name": "Rajat Singh", "link": "https://stackoverflow.com/users/6115194/rajat-singh"}, "edited": false, "score": 0, "creation_date": 1496863259, "post_id": 44421069, "comment_id": 75840690, "body": "g1 is the vector object FYI. Thanks"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1496863364, "post_id": 44421069, "comment_id": 75840747, "body": "What does <code>int s=g1.size()&#47;g1.at(g1.begin());</code> try to do ?"}, {"owner": {"reputation": 125, "user_id": 6115194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HSj4K.jpg?s=128&g=1", "display_name": "Rajat Singh", "link": "https://stackoverflow.com/users/6115194/rajat-singh"}, "edited": false, "score": 0, "creation_date": 1496863377, "post_id": 44421069, "comment_id": 75840755, "body": "and how to sort it in descending order. I want it in descending order."}, {"owner": {"reputation": 125, "user_id": 6115194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HSj4K.jpg?s=128&g=1", "display_name": "Rajat Singh", "link": "https://stackoverflow.com/users/6115194/rajat-singh"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496863424, "post_id": 44421069, "comment_id": 75840786, "body": "@Fran&#231;oisAndrieux  sort(a,a+s). where  s=arr/arr[0]"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1496863460, "post_id": 44421069, "comment_id": 75840807, "body": "@RajatSingh Everyone is telling you to read the documentation for <code>std::sort</code>. It contains an example to sort in descending order! Multiple links have been provided."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496863483, "post_id": 44421069, "comment_id": 75840827, "body": "@Rajat <i>&quot;FYI.&quot;</i> What lets you doubt we&#39;re not informed about that?"}, {"owner": {"reputation": 125, "user_id": 6115194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HSj4K.jpg?s=128&g=1", "display_name": "Rajat Singh", "link": "https://stackoverflow.com/users/6115194/rajat-singh"}, "edited": false, "score": 1, "creation_date": 1496863516, "post_id": 44421069, "comment_id": 75840843, "body": "thanks everyone  and please dont downvote as im new to vectors Thanks"}, {"owner": {"reputation": 2055, "user_id": 6564148, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u3HL5.png?s=128&g=1", "display_name": "George", "link": "https://stackoverflow.com/users/6564148/george"}, "edited": false, "score": 3, "creation_date": 1496863530, "post_id": 44421069, "comment_id": 75840857, "body": "Alternativley to sorting after pushing, you could insert the value in the correct place <code>g1.insert( std::upper_bound( g1.begin(), g1.end(), x), x );</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 4, "creation_date": 1496863776, "post_id": 44421069, "comment_id": 75840974, "body": "@Rajat <i>&quot;as im new to vectors&quot;</i> Well, if you meet something new, read the documentation first before asking trivia here."}], "answers": [{"comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1496863418, "post_id": 44421162, "comment_id": 75840785, "body": "Or even better: <code>std::sort(std::begin(g1), std::end(g1));</code>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496863540, "post_id": 44421162, "comment_id": 75840861, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 mostly a matter of taste/personal preference when not writing generic (template) code I&#39;d say. But yes, of course, your variant <i>does</i> have its advantages."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496863686, "post_id": 44421162, "comment_id": 75840928, "body": "I prefer using that form in general."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496863777, "post_id": 44421162, "comment_id": 75840976, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 To each his own :-) But I can certainly understand your reasoning why."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 3, "last_activity_date": 1496864200, "last_edit_date": 1496864200, "creation_date": 1496863288, "answer_id": 44421162, "question_id": 44421069, "link": "https://stackoverflow.com/questions/44421069/how-to-sort-a-vector-using-sort-in-c/44421162#44421162", "title": "How to sort a vector using sort() in c++", "body": "<pre><code>std::sort(g1.begin(), g1.end());\n</code></pre>\n\n<p>Should do the trick.</p>\n\n<p>Alternatively, if you want to be able to switch out the <code>vector</code>ness of <code>g1</code> with, say, a plain array, without having to modify this code, or if this was in template code where you want to work with multiple container types, then the form</p>\n\n<pre><code>std::sort(std::begin(g1), std::end(g1));\n</code></pre>\n\n<p>may hold more appeal.</p>\n\n<p>In any case; <em>Please</em>, do read <a href=\"http://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 2, "last_activity_date": 1496863663, "creation_date": 1496863663, "answer_id": 44421268, "question_id": 44421069, "link": "https://stackoverflow.com/questions/44421069/how-to-sort-a-vector-using-sort-in-c/44421268#44421268", "title": "How to sort a vector using sort() in c++", "body": "<p>Instead of sorting, find the position where the new element should go and insert it there:</p>\n\n<pre><code>std::vector&lt;int&gt;::iterator loc = std::upper_bound(g1.begin(), g1.end(), x);\ng1.insert(loc, x);\n</code></pre>\n\n<p>Or, more briefly:</p>\n\n<pre><code>g1.insert(std::upper_bound(g1.begin(), g1.end(), x), x);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1496951893, "post_id": 44428335, "comment_id": 75886631, "body": "&quot;arr.beg()&quot;? That doesn&#39;t even compile."}, {"owner": {"reputation": 1, "user_id": 7496328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xQuGXVf2iaI/AAAAAAAAAAI/AAAAAAAAADU/VKE4z4nnXOA/photo.jpg?sz=128", "display_name": "Monsij Biswal Biswal", "link": "https://stackoverflow.com/users/7496328/monsij-biswal-biswal"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1510163396, "post_id": 44428335, "comment_id": 81321887, "body": "don&#39;t forget to add #include&lt;bits/stdc++.h&gt;"}], "tags": [], "owner": {"reputation": 1, "user_id": 7496328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-xQuGXVf2iaI/AAAAAAAAAAI/AAAAAAAAADU/VKE4z4nnXOA/photo.jpg?sz=128", "display_name": "Monsij Biswal Biswal", "link": "https://stackoverflow.com/users/7496328/monsij-biswal-biswal"}, "is_accepted": false, "score": 0, "last_activity_date": 1496906115, "last_edit_date": 1496906115, "creation_date": 1496903786, "answer_id": 44428335, "question_id": 44421069, "link": "https://stackoverflow.com/questions/44421069/how-to-sort-a-vector-using-sort-in-c/44428335#44428335", "title": "How to sort a vector using sort() in c++", "body": "<p>Just keeping it simple, let <code>arr</code> be the vector name. Write: <code>sort(arr.beg(),arr.end());</code></p>\n\n<p>(assuming already you have  written <code>using namespace std;</code>)</p>\n"}], "owner": {"reputation": 125, "user_id": 6115194, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/HSj4K.jpg?s=128&g=1", "display_name": "Rajat Singh", "link": "https://stackoverflow.com/users/6115194/rajat-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 44421162, "answer_count": 3, "score": -8, "last_activity_date": 1496906115, "creation_date": 1496862979, "last_edit_date": 1496867122, "question_id": 44421069, "link": "https://stackoverflow.com/questions/44421069/how-to-sort-a-vector-using-sort-in-c", "title": "How to sort a vector using sort() in c++", "body": "<p>I want to insert an element in my already sorted vector and it'll be placed at its sorted position when it'll be sorted again.\nThere is a function called <strong>sort()</strong> for sorting an array.How can I use the same function to sort a vector?\nHere's my code.It gives me the compilation error.</p>\n\n<pre><code>//assume g1 is already sorted with some numbers        \nint x;\ncin &gt;&gt; x;\ng1.push_back(x);\nint s = g1.size()/g1.at(g1.begin());\n//similar to int s = arr/arr[0]\nsort(g1 + s,g1);\n</code></pre>\n"}, {"tags": ["java", "c++", "multithreading", "synchronization", "java-native-interface"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 2, "creation_date": 1496862911, "post_id": 44420937, "comment_id": 75840472, "body": "I don&#39;t have an answer for you, unfortunately. Just wanted to say; nice detailed thorough question. Thanks."}, {"owner": {"reputation": 35205, "user_id": 2891664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9df9d7af70d46f8db2ecd4392bb76087?s=128&d=identicon&r=PG&f=1", "display_name": "Radiodef", "link": "https://stackoverflow.com/users/2891664/radiodef"}, "edited": false, "score": 0, "creation_date": 1496863133, "post_id": 44420937, "comment_id": 75840607, "body": "<a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#monitor_operations\" rel=\"nofollow noreferrer\">JNI has functions which perform synchronization</a> from native code. However, something I don&#39;t know is whether the Java memory model guarantees consistency in memory which is allocated by native code and therefore outside Java heap space. I therefore don&#39;t know whether <code>MonitorEnter</code> and <code>MonitorExit</code> necessarily solve the problem here."}, {"owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "reply_to_user": {"reputation": 35205, "user_id": 2891664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9df9d7af70d46f8db2ecd4392bb76087?s=128&d=identicon&r=PG&f=1", "display_name": "Radiodef", "link": "https://stackoverflow.com/users/2891664/radiodef"}, "edited": false, "score": 0, "creation_date": 1496863688, "post_id": 44420937, "comment_id": 75840931, "body": "@Radiodef I think that is exactly what I need. I did not realize those existed. I was worried I would have to use JNI to call back into Java just to make a lock; that would have been an overly verbose headache for something so simple and common. That is probably why the functions you mention were added."}, {"owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "reply_to_user": {"reputation": 35205, "user_id": 2891664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9df9d7af70d46f8db2ecd4392bb76087?s=128&d=identicon&r=PG&f=1", "display_name": "Radiodef", "link": "https://stackoverflow.com/users/2891664/radiodef"}, "edited": false, "score": 1, "creation_date": 1496863794, "post_id": 44420937, "comment_id": 75840986, "body": "@Radiodef Also, as for your concern about the memory, I will keep that in mind. I don&#39;t think that should apply in my current case at hand, but it will likely pop up in future cases. Thank you."}, {"owner": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1496922142, "post_id": 44420937, "comment_id": 75866559, "body": "Do you have long-running C++ threads that need to operate on the data in parallel with Java threads?  If not - and all your C++ access is via direct JNI calls (make the native call and return) the simplest solution is to just share a lock object on the Java side.  Synchronize on that object before modifying the data in Java or making a native call that can modify the data.  That way you never get into native code without knowing it&#39;s already safe to modify the object."}, {"owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "reply_to_user": {"reputation": 27440, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "edited": false, "score": 0, "creation_date": 1496932039, "post_id": 44420937, "comment_id": 75874427, "body": "@AndrewHenle I have long running threads on both c++ and java sides, and both sides make calls to the other. This is a legacy c++ app with its own display (multiple windows on multiple monitors) for which I am adding new features and new windows, most of the new windows in java. Many of the java and c++ objects need to talk to each other with data supplies and requests going in both directions: c++-to-java and java-to-c++. C++ is the &quot;host&quot; language, creating a JVM instance from within c++ and calling some java methods which kick off the java windows and threads."}], "answers": [{"tags": [], "owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "is_accepted": true, "score": 4, "last_activity_date": 1496943904, "creation_date": 1496943904, "answer_id": 44442405, "question_id": 44420937, "link": "https://stackoverflow.com/questions/44420937/how-do-you-properly-synchronize-threads-on-the-native-side-of-a-jni-environment/44442405#44442405", "title": "How do you properly synchronize threads on the native side of a JNI environment?", "body": "<p>If both threads are attached to the JVM, then you can access the JNI's synchronization via <code>JNIEnv</code>'s <code>MonitorEnter(jobject)</code> and <code>MonitorExit(jobject)</code> functions. Just as it sounds, <code>MonitorEnter</code> aquires a lock on the provided <code>jobject</code>, and <code>MonitorExit</code> releases the lock on the provided <code>jobject</code>.</p>\n\n<p><em>NOTE:</em> There are some pitfalls to be aware of! Notice the second to last paragraph of <code>MonitorEnter</code>'s description and the last paragraph of <code>MonitorExit</code>'s description about mixing and matching <code>MonitorEnter</code>/<code>MonitorExit</code> with other similar mechanisms which you might otherwise think are compatible.</p>\n\n<p>See <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#monitor_operations\" rel=\"nofollow noreferrer\" title=\"JNI MonitorEnter/MonitorExit\">here</a></p>\n\n<blockquote>\n  <p><strong>MonitorEnter</strong></p>\n  \n  <p>jint MonitorEnter(JNIEnv *env, jobject obj);</p>\n  \n  <p>Enters the monitor associated with the underlying Java object referred\n  to by obj. Enters the monitor associated with the object referred to\n  by obj. The obj reference must not be NULL.  Each Java object has a\n  monitor associated with it. If the current thread already owns the\n  monitor associated with obj, it increments a counter in the monitor\n  indicating the number of times this thread has entered the monitor. If\n  the monitor associated with obj is not owned by any thread, the\n  current thread becomes the owner of the monitor, setting the entry\n  count of this monitor to 1. If another thread already owns the monitor\n  associated with obj, the current thread waits until the monitor is\n  released, then tries again to gain ownership.</p>\n  \n  <p>A monitor entered through a MonitorEnter JNI function call cannot be\n  exited using the monitorexit Java virtual machine instruction or a\n  synchronized method return. A MonitorEnter JNI function call and a\n  monitorenter Java virtual machine instruction may race to enter the\n  monitor associated with the same object.</p>\n  \n  <p>To avoid deadlocks, a monitor entered through a MonitorEnter JNI\n  function call must be exited using the MonitorExit JNI call, unless\n  the DetachCurrentThread call is used to implicitly release JNI\n  monitors.</p>\n  \n  <p><strong>LINKAGE</strong>:</p>\n  \n  <p>Index 217 in the JNIEnv interface function table. </p>\n  \n  <p><strong>PARAMETERS</strong>:</p>\n  \n  <p>env: the JNI interface pointer.</p>\n  \n  <p>obj: a normal Java object or class object.</p>\n  \n  <p><strong>RETURNS</strong>:</p>\n  \n  <p>Returns \u201c0\u201d on success; returns a negative value on failure.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p><strong>MonitorExit</strong></p>\n  \n  <p>jint MonitorExit(JNIEnv *env, jobject obj);</p>\n  \n  <p>The current thread must be the owner of the monitor associated with\n  the underlying Java object referred to by obj. The thread decrements\n  the counter indicating the number of times it has entered this\n  monitor. If the value of the counter becomes zero, the current thread\n  releases the monitor.</p>\n  \n  <p>Native code must not use MonitorExit to exit a monitor entered through\n  a synchronized method or a monitorenter Java virtual machine\n  instruction.</p>\n  \n  <p><strong>LINKAGE</strong>:</p>\n  \n  <p>Index 218 in the JNIEnv interface function table. </p>\n  \n  <p><strong>PARAMETERS</strong>:</p>\n  \n  <p>env: the JNI interface pointer.</p>\n  \n  <p>obj: a normal Java object or class object.</p>\n  \n  <p><strong>RETURNS</strong>:</p>\n  \n  <p>Returns \u201c0\u201d on success; returns a negative value on failure.</p>\n  \n  <p><strong>EXCEPTIONS</strong>:</p>\n  \n  <p>IllegalMonitorStateException: if the current thread does not own the\n  monitor.</p>\n</blockquote>\n\n<p>So the C++ code in the question which attempted to use pthreads should be changed as following (code assumes the <code>JNIEnv*</code> pointer was acquired somehow beforehand in typical JNI fashion):</p>\n\n<pre><code>class objectA\n{\n    jobject dataMutex;\n    ... // everything else mentioned before\n}\n\n// called on c++ thread\nvoid objectA :: poll()\n{\n    // You will need to aquire jniEnv pointer somehow just as usual for JNI\n    jniEnv-&gt;MonitorEnter(dataMutex);\n\n    ... // all the poll stuff from before\n\n    jniEnv-&gt;MonitorExit(dataMutex);\n}\n\n// called on java thread\nvoid objectA :: supplyData(JNIEnv* jni, jobject jthis, jobject data)\n{\n    // You will need to aquire jniEnv pointer somehow just as usual for JNI\n    jniEnv-&gt;MonitorEnter(dataMutex);\n\n    ... // all the supplyData stuff from before\n\n    jniEnv-&gt;MonitorExit(dataMutex);\n}\n</code></pre>\n\n<p>Kudos to @Radiodef who provided the answer. Unfortunately it was as a comment. I waited until afternoon next day to allow time for Radiodef to make it an answer, so now I'm doing it. Thank you Radiodef for providing the nudge I needed to fix this.</p>\n"}, {"comments": [{"owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "edited": false, "score": 0, "creation_date": 1549296513, "post_id": 54489277, "comment_id": 95842843, "body": "You wrote &quot;MonitorEnter isn&#39;t perfect, its prone to race-conditions. Specifically, as far as I can tell from the jni documentation, it doesn&#39;t establish synchronization&quot; Where do you see that in the documentation? I cannot find that in the MonitorEnter/MonitorExit documentation linked. In fact, if I understand your &quot;doesn&#39;t provide synchronization&quot; statement correctly, that would surprise me a lot and I think that would drastically reduce the usefulness of those functions."}, {"owner": {"reputation": 11, "user_id": 7954552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/053c6cbf7ce7193e5681a0edeb6514df?s=128&d=identicon&r=PG&f=1", "display_name": "JavaProdigy", "link": "https://stackoverflow.com/users/7954552/javaprodigy"}, "reply_to_user": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "edited": false, "score": 0, "creation_date": 1559943675, "post_id": 54489277, "comment_id": 99592109, "body": "@Loduwijk I said, as far as I can tell, it doesn&#39;t establish synchronization, more specifically between Different Native Threads. There isn&#39;t any documentation which supports that it does and C++ vs. java have very different idea&#39;s of what synchronization means. What I mean is, a JNI Lock may not be sufficient to guard against native data-races from my reading into the documentation. If it is, then that would be a pleasent suprise and I will edit my post accordingly if it can be proven (or I determine that from my own testing),"}], "tags": [], "owner": {"reputation": 11, "user_id": 7954552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/053c6cbf7ce7193e5681a0edeb6514df?s=128&d=identicon&r=PG&f=1", "display_name": "JavaProdigy", "link": "https://stackoverflow.com/users/7954552/javaprodigy"}, "is_accepted": false, "score": 0, "last_activity_date": 1549072260, "creation_date": 1549072260, "answer_id": 54489277, "question_id": 44420937, "link": "https://stackoverflow.com/questions/44420937/how-do-you-properly-synchronize-threads-on-the-native-side-of-a-jni-environment/54489277#54489277", "title": "How do you properly synchronize threads on the native side of a JNI environment?", "body": "<p>If you are synchronizing between a native thread and a java thread, it may be prudent to use both a native mutex and a Java Monitor. \nAlso if you have it available, I recommend using std::mutex to establish synchronization within native threads. std::lock_guard is also useful, and creating some wrapper for the java monitor which has a .lock() and .unlock() method so you can use them with std::lock_guard would also be helpful (then you can let the C++ Compiler do its job).\nThe main reason I say you should use both is because MonitorEnter isn't perfect, its prone to race-conditions. Specifically, as far as I can tell from the jni documentation, it doesn't establish synchronization (<a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/jni/spec/functions.html#wp5256\" rel=\"nofollow noreferrer\">JNI Documentation</a>). \nThe use of the native std::mutex.lock() will synchronize-with the native unlock. </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;mutex&gt;\njobject magicObtainLockObject();\nJNIEnv* magicObtainJNIEnv();\n\nstruct compound_lock{\nprivate:\nstd::mutex mtx;\npublic:\nvoid lock(){\nmtx.lock();\nmagicObtainJNIEnv()-&gt;MonitorEnter(magicObtainLockObject());\n}\nvoid unlock(){\nmagicObtainJNIEnv()-&gt;MonitorExit(magicObtainLockObject());\nmtx.unlock();\n}\n};\n\nstruct objectA{\n...\ncompound_lock lock;\n};\n\nvoid objectA::poll(){\nstd::lock_guard&lt;compound_lock&gt; sync{lock};\n...\n}\n\nvoid objectA::supplyData(JNIEnv* jni, jobject jthis, jobject data){\nstd::lock_guard&lt;compound_lock&gt; sync{lock};\n...\n}\n\n\n\n\n</code></pre>\n"}], "owner": {"reputation": 1852, "user_id": 369604, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/613ba412b35c0d51e4de306d92858bd4?s=128&d=identicon&r=PG", "display_name": "Loduwijk", "link": "https://stackoverflow.com/users/369604/loduwijk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3512, "favorite_count": 1, "accepted_answer_id": 44442405, "answer_count": 2, "score": 12, "last_activity_date": 1549072260, "creation_date": 1496862547, "last_edit_date": 1496864442, "question_id": 44420937, "link": "https://stackoverflow.com/questions/44420937/how-do-you-properly-synchronize-threads-on-the-native-side-of-a-jni-environment", "title": "How do you properly synchronize threads on the native side of a JNI environment?", "body": "<p><strong>Question Brief</strong></p>\n\n<p>I am using C++ and Java in one process via JNI. For the use case in question, both a C++ thread and a Java thread are accessing the same data, they are doing so on the C++ side, and I want to properly synchronize the access.</p>\n\n<p>So far, almost all of my JNI thread synchronization has been on the Java side where the answer is obvious: use the provided Java concurrency package and the built-in concurrency language features. Unfortunately, the answer is not so obvious on the C++ side.</p>\n\n<p><strong>What I've Tried so far Brief</strong></p>\n\n<p>I tried using a pthreads mutex thinking that it might work even though I'm not using pthreads to create threads, but that occasionally gets stuck when trying to lock - I'll show an example of that farther below.</p>\n\n<h2>Question Details</h2>\n\n<p>In my current, specific usage, c++ is polling for changes provided by Java on a 1 second timer (not what I'd like, but I'm not sure how I would make it event-driven given the nature of the legacy c++ code). The Java thread provides data by calling a native function and c++ copies the data into a c++ structure.</p>\n\n<p>This is the type of situation in code (happens on 2 threads, Thread1 and Thread2):</p>\n\n<p><strong>Code Example</strong></p>\n\n<p>Note quite an SSCCE, as it's missing definitions for <code>TheData</code> and <code>TheDataWrapper</code>, but it doesn't really matter what they contain. Assume they merely contain a couple of public <code>int</code>s if that helps your thought process (though, in my case, it's actually multiple arrays of int and arrays of float).</p>\n\n<p>C++:</p>\n\n<pre><code>class objectA\n{\n    void poll();\n    void supplyData(JNIEnv* jni, jobject jthis, jobject data);\n    TheDataWrapper cpp_data;\n    bool isUpdated;\n\n    void doStuff(TheDataWrapper* data);\n};\n\n// poll() happens on a c++ thread we will call Thread1\nvoid objectA :: poll()\n{\n    // Here, both isUpdated and cpp_data need synchronization\n\n    if(isUpdated)\n    {\n        do_stuff(&amp;cpp_data);\n        isUpdated = false;\n    }\n}\n\n// supplyData happens on the Thread2, called as a native function from a java thread\nvoid objectA :: supplyData(JNIEnv* jni, jobject jthis, jobject data)\n{\n    // some operation happens that copies the java data into a c++ equivalent\n    // in my specific case this happens to be copying ints/floats from java arrays to c++ arrays\n    // this needs to be synchronized\n    cpp_data.copyFrom(data);\n    isUpdated = true;\n}\n</code></pre>\n\n<p>Java:</p>\n\n<pre><code>class ObjectB\n{\n    // f() happens on a Java thread which we will call Thread2\n    public void f()\n    {\n        // for the general case it doesn't really matter what the data is\n        TheData data = TheData.prepareData();\n        supplyData(data);\n    }\n\n    public native void supplyData(TheData data);\n}\n</code></pre>\n\n<h2>What I've Tried so far Details</h2>\n\n<p>When I tried pthread's locking as below, sometimes execution gets stuck in <code>pthread_mutex_lock</code>. There should not be a deadlock in this situation, but just to test further I ran a scenario where <code>supplyData</code> was not getting called at all (no data was being supplied), so no deadlock should have been possible, yet the first call to <code>poll</code> will occasionally hang anyway. Perhaps using a pthreads mutex is not a good idea in this situation? Or perhaps I did something stupid and keep overlooking it.</p>\n\n<p>So far, I tried using pthreads as below:</p>\n\n<p><strong>Code Example</strong></p>\n\n<p>C++:</p>\n\n<pre><code>class objectA\n{\n    pthread_mutex_t dataMutex;\n    ... // everything else mentioned before\n}\n\n// called on c++ thread\nvoid objectA :: poll()\n{\n    pthread_mutex_lock(&amp;dataMutex);\n\n    ... // all the poll stuff from before\n\n    pthread_mutex_unlock(&amp;dataMutex);\n}\n\n// called on java thread\nvoid objectA :: supplyData(JNIEnv* jni, jobject jthis, jobject data)\n{\n    pthread_mutex_lock(&amp;dataMutex);\n\n    ... // all the supplyData stuff from before\n\n    pthread_mutex_unlock(&amp;dataMutex);\n}\n</code></pre>\n\n<p><strong>Another option I thought about but have not done</strong></p>\n\n<p>I also considered using JNI to call back into java to request a lock using java's concurrency control. That should work, as either thread should block on the java side as needed. However, since accessing java from c++ is overly verbose, I was hoping to avoid going through that headache. I probably could make a c++ class which encapsulates JNI calls into java to request a java lock; that would simplify c++ code, though I wonder about the overhead of crossing back and forth over JNI just for thread locks.</p>\n\n<p>It seems this is not necessary, per the comment by @Radiodef. It appears JNI includes <code>MonitorEnter</code>/<code>MonitorExit</code> functions which already handle the locking on the c++ side. There are pitfalls when using these at the same time as conventional locks on the java side, so <a href=\"http://docs.oracle.com/javase/8/docs/technotes/guides/jni/spec/functions.html#monitor_operations\" rel=\"noreferrer\" title=\"JNI MonitorEnter and MonitorExit\">please read here</a> before using. I will be trying this out, and I expect that <code>MonitorEnter</code>/<code>MonitorExit</code> will be the answer and I recommend @Radiodef make an answer out of the comment.</p>\n\n<h2>Closing</h2>\n\n<p>How could I properly synchronize this? Should pthread_mutex_(un)lock work? If not, what can I use to synchronize between the C++ thread and the Java thread?</p>\n\n<p>No JNI-specific C++ code is provided here since the JNI bridge is working and I can pass data back and forth. The question is specifically about proper synchronization between c++/java threads that are otherwise correctly communicating.</p>\n\n<p>As mentioned before, I would prefer to avoid the polling scheme, but that might end up being another question. The legacy c++ code displays its part of the user interface in X/motif, and if I recall correctly the c++ thread above happens to be the event thread for display. The java thread will end up being the java event dispatch thread once the java user interface for this class is plugged in, though for now the java thread is an automated test thread; either way, it's a separate java thread.</p>\n\n<p>The C++ thread is attached to the JVM. In fact, that is the C++ thread that created the JVM, so it should be attached by default.</p>\n\n<p>I have been successful with plugging in other Java user interface elements into this program, but this is the first time C++ has needed non-atomic data from Java which needed to be synchronized. Is there a generally accepted correct way to do this?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1496862601, "post_id": 44420900, "comment_id": 75840283, "body": "In <code>B bar (foo);</code> You are <i>explicit</i>ly telling the compiler to make you a <code>B</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7649520"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496869849, "post_id": 44420900, "comment_id": 75844116, "body": "Thanks @NathanOliver but there is something that I do not really understand, so could you please take a look at the comment to Curious&#39; answer below?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7649520"}, "edited": false, "score": 0, "creation_date": 1496869719, "post_id": 44420961, "comment_id": 75844055, "body": "Thank you but when you say that the compiler tries to implicitly convert foo to match the function argument type, it sounds like this happens BEFORE the parameter is assigned the argument. Therefore, why would the the conversion constructor be called instead of the type-cast operator, I mean if it happens BEFORE that any object is being created, why does it call the constructor?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1496874573, "post_id": 44420961, "comment_id": 75845981, "body": "@user689574 The function arguments are not constructed till the function is called.  And when the function is called the arguments are constructed with the values that are passed to the function as arguments.  That&#39;s just how it works in C++.  Assignment happens on an already constructed object, and when the function is called the function parameters are constructed, so there is no room for assignment until the function body is run"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7649520"}, "edited": false, "score": 0, "creation_date": 1496875277, "post_id": 44420961, "comment_id": 75846215, "body": "&quot;And when the function is called the arguments are constructed with the values that are passed to the function as arguments.&quot; The first time you said arguments, did you mean parameters or? Your comment helped me  but I am still not sure why fn(foo) cannot be called, I mean technically, if you called the function like <code>fn(foo)</code>, isn&#39;t the paramter x simply get assigned foo, like <code>B x = foo</code>? If so, I cannot see why this is not allowed since that is the exact same thing as <code>B bar (foo);</code> which is allowed. Please help me out here."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1496901667, "post_id": 44420961, "comment_id": 75853421, "body": "@user689574 Sorry for the late reply, yes, that is what happens, with two key differences from what you said.  1. <code>B x = foo</code> is a construction not an assignment.  And 2. calling a function requires an implicit conversion.  That&#39;s just the way the language works.  <code>B x{foo};</code> is an explicit conversion where as function argument construction requires an implicit conversion and so does <code>B x = foo</code>.  If you had called the function like <code>fn (B{foo})</code> then it would have worked, because here you are overriding the implicit conversion behavior with an explicit construction"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7649520"}, "edited": false, "score": 1, "creation_date": 1496929324, "post_id": 44420961, "comment_id": 75872181, "body": "Thank you so much for taking the time to answer all my questions!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7649520"}, "edited": false, "score": 0, "creation_date": 1496929690, "post_id": 44420961, "comment_id": 75872475, "body": "Uh hold on, one last thing: If I then did <code>fn (B(foo));</code> in order to override the implicit conversion, will it still call the conversion constructor or a the copy-constructor since there then would be an argument of type B? Or what? This is actually the last thing, otherwise I think I finally got it all :)"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1496929763, "post_id": 44420961, "comment_id": 75872536, "body": "So first it will call the convert constructor and then after that it will call either the move constructor for B or elide the move"}], "tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": true, "score": 4, "last_activity_date": 1496862635, "creation_date": 1496862635, "answer_id": 44420961, "question_id": 44420900, "link": "https://stackoverflow.com/questions/44420900/why-is-this-conversion-allowed/44420961#44420961", "title": "Why is this conversion allowed?", "body": "<p>Doing <code>B bar(foo)</code> means that you are calling the constructor of <code>B</code> with foo as the argument, this is an <code>explicit</code> construction.  Whereas when you call <code>fn(foo)</code> the compiler tries to implicitly convert <code>foo</code> to match the function argument type, and this is an <code>implicit</code> conversion and is therefore not allowed since your convert constructor is marked <code>explicit</code>. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7649520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 44420961, "answer_count": 1, "score": 1, "last_activity_date": 1496862635, "creation_date": 1496862447, "question_id": 44420900, "link": "https://stackoverflow.com/questions/44420900/why-is-this-conversion-allowed", "title": "Why is this conversion allowed?", "body": "<p>So I have this code(stolen from cplusplus.com):</p>\n\n<pre><code>class A {};\n\nclass B {\npublic:\n  explicit B (const A&amp; x) {}\n  B&amp; operator= (const A&amp; x) {return *this;}\n  operator A() {return A();}\n};\n\nvoid fn (B x) {}\n\nint main ()\n{\n  A foo;\n  B bar (foo);\n  bar = foo;\n  foo = bar;\n\n//  fn (foo);  // not allowed for explicit ctor.\n  fn (bar);  \n\n  return 0;\n}\n</code></pre>\n\n<p>So the conversion constructor can only be called explicitly and thereby <code>fn(foo);</code> is not allowed. This made me confused, because why can you do <code>B bar (foo);</code> if you cannot do <code>fn(foo);</code>, I mean doesn't fn(foo) also end up in initializing an object of type B to an object of type A, like in the statement <code>B bar (foo);</code>, so what are they both not generating an error? What is particularly explicit in <code>B bar (foo);</code> that is not explicit in the function call?</p>\n"}, {"tags": ["c++", "c++11", "c++-standard-library"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1496861478, "post_id": 44420636, "comment_id": 75839651, "body": "There are multiple <code>std::max</code> overloads. There is one that takes a <code>std::initializer_list</code>"}, {"owner": {"reputation": 518, "user_id": 6508598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636bf0cac79108c55c83f6bda5974f9c?s=128&d=identicon&r=PG&f=1", "display_name": "shananton", "link": "https://stackoverflow.com/users/6508598/shananton"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496861633, "post_id": 44420636, "comment_id": 75839727, "body": "I&#39;m aware of that, but why (int(*)(int, int)) std::max&lt;int&gt; doesn&#39;t work then?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1496861717, "post_id": 44420636, "comment_id": 75839782, "body": "Try <code>(const int&amp; (*)(const int&amp;, const int&amp;))</code>. That&#39;s the actual signature of <code>std::max&lt;int&gt;</code>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1496861746, "post_id": 44420636, "comment_id": 75839801, "body": "@VolkovKomm Where do you see that there should be such an overload? My docs show no int(int,int) possible."}, {"owner": {"reputation": 518, "user_id": 6508598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636bf0cac79108c55c83f6bda5974f9c?s=128&d=identicon&r=PG&f=1", "display_name": "shananton", "link": "https://stackoverflow.com/users/6508598/shananton"}, "edited": false, "score": 1, "creation_date": 1496861912, "post_id": 44420636, "comment_id": 75839904, "body": "Oh, there actually is no int(int, int) overload... And ((const int&amp;(*)(const int&amp;, const int&amp;)) just worked. I guess I&#39;m just stupid, thanks for the explanation."}], "answers": [{"tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": true, "score": 6, "last_activity_date": 1496862178, "last_edit_date": 1496862178, "creation_date": 1496861687, "answer_id": 44420703, "question_id": 44420636, "link": "https://stackoverflow.com/questions/44420636/stdmax-cannot-be-resolved-after-including-algorithm/44420703#44420703", "title": "std::max cannot be resolved after including &lt;algorithm&gt;", "body": "<p>This is because there are multiple overloads of the same function.  This does not work for exactly the same reason that this does not work</p>\n\n<pre><code>void foo() {}\nvoid foo(int) {}\nvoid foo(double) {}\n\nint main() {\n    auto foo_ptr = &amp;foo;\n}\n</code></pre>\n\n<p>To make your code work you would have to cast the function pointer to the right type to tell the compiler which overload you are referring to</p>\n\n<pre><code>#include &lt;algorithm&gt;\n\ntemplate &lt;typename T&gt;\nusing Func_t = std::function&lt;T(T, T)&gt;;\n\nint main() {\n    template &lt;typename T&gt;\n    using MaxOverload_t = const T&amp; (*) (const T&amp;, const T&amp;);\n\n    auto f1 = static_cast&lt;MaxOverload_t&lt;int&gt;&gt;(&amp;std::max&lt;int&gt;);\n    auto f2 = Func_t&lt;int&gt;{static_cast&lt;MaxOverload_t&lt;int&gt;&gt;(&amp;std::max&lt;int&gt;)};\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1496861788, "creation_date": 1496861788, "answer_id": 44420726, "question_id": 44420636, "link": "https://stackoverflow.com/questions/44420636/stdmax-cannot-be-resolved-after-including-algorithm/44420726#44420726", "title": "std::max cannot be resolved after including &lt;algorithm&gt;", "body": "<p>There are multiple overloads for <code>std::max</code>.  Even specifying a template type is not enough as you have</p>\n\n<pre><code>template&lt; class T &gt; \nconst T&amp; max( const T&amp; a, const T&amp; b );\n\n//and\n\ntemplate&lt; class T &gt;\nT max( std::initializer_list&lt;T&gt; ilist );\n</code></pre>\n\n<p>The compiler cannot decide which one of those you want.</p>\n\n<p>To get around this we can use a lambda and wrap that around the call to <code>max</code> like</p>\n\n<pre><code>binop&lt;int&gt; op = [](const auto&amp; lhs, const auto&amp; rhs){ return std::max(lhs, rhs); };\n</code></pre>\n"}], "owner": {"reputation": 518, "user_id": 6508598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636bf0cac79108c55c83f6bda5974f9c?s=128&d=identicon&r=PG&f=1", "display_name": "shananton", "link": "https://stackoverflow.com/users/6508598/shananton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "closed_date": 1496862339, "accepted_answer_id": 44420703, "answer_count": 2, "score": 2, "last_activity_date": 1496862178, "creation_date": 1496861436, "question_id": 44420636, "link": "https://stackoverflow.com/questions/44420636/stdmax-cannot-be-resolved-after-including-algorithm", "closed_reason": "Duplicate", "title": "std::max cannot be resolved after including &lt;algorithm&gt;", "body": "<p>I am trying to write my own library for competitive programming contests, and I need such code:</p>\n\n<pre><code>#include &lt;functional&gt;\n#include &lt;algorithm&gt;\n\ntemplate &lt;typename T&gt;\nusing binop = std::function&lt;T (T, T)&gt;;\n\nint main()\n{\n    binop&lt;int&gt; op = std::max&lt;int&gt;;\n}\n</code></pre>\n\n<p>Unfortunately, it produces the following error:</p>\n\n<pre><code>error: conversion from '&lt;unresolved overloaded function type&gt;' to non-scalar type 'binop&lt;int&gt; {aka std::function&lt;int(int, int)&gt;}' requested\n</code></pre>\n\n<p>But when I remove the line</p>\n\n<pre><code>#include &lt;algorithm&gt;\n</code></pre>\n\n<p>it magically compiles. (though there shouldn't really be a max function defined)</p>\n\n<p>The question is: how can I compile the code without removing \"algorithm\"?</p>\n\n<p>Note that I have also tried this:</p>\n\n<pre><code>binop&lt;int&gt; op = (int(*)(int, int)) std::max&lt;int&gt;;\n</code></pre>\n\n<p>which produces</p>\n\n<pre><code>error: insufficient contextual information to determine type\n</code></pre>\n"}, {"tags": ["c++", "file"], "comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 4, "creation_date": 1496861169, "post_id": 44420512, "comment_id": 75839485, "body": "Why not use a <code>std::string</code> object instead of an array of characters?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1496861197, "post_id": 44420512, "comment_id": 75839502, "body": "I strongly recommend using C++ and <code>std::string</code> for the name. If you do that, the easiest way to do this would probably be to iterate over the array, converting the values to a string and appending it to the <code>std::string name</code>."}, {"owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "edited": false, "score": 0, "creation_date": 1496861270, "post_id": 44420512, "comment_id": 75839546, "body": "The second argument to itoa() is a pointer to the buffer where the string will be stored, not a character."}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1496861273, "post_id": 44420512, "comment_id": 75839547, "body": "Remember to stop before reaching the file path length limit for your operating system."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496861449, "post_id": 44420512, "comment_id": 75839636, "body": "Why are you using separate <code>int</code>s to represent each digit of the number? <code>int</code> can represent <code>123</code>. You&#39;ve tagged the question with c++, so use the features c++ provides you. <code>std::to_string(number) + &quot;.txt&quot;;</code> is all you need."}, {"owner": {"reputation": 9936, "user_id": 6525260, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-DdsW6uGdpjg/AAAAAAAAAAI/AAAAAAAAAAw/srXxxqCzyW0/photo.jpg?sz=128", "display_name": "Arnav Borborah", "link": "https://stackoverflow.com/users/6525260/arnav-borborah"}, "edited": false, "score": 0, "creation_date": 1496861519, "post_id": 44420512, "comment_id": 75839673, "body": "I find very low evidence that this is really C++ code, because of the usage of <code>FILE*</code>, C-style arrays (including char arrays), a loop index variable initialized outside a loop...."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 1450005, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c968e3decc041e5f466b7794a260d8ad?s=128&d=identicon&r=PG", "display_name": "user1450005", "link": "https://stackoverflow.com/users/1450005/user1450005"}, "edited": false, "score": 0, "creation_date": 1496861652, "post_id": 44420650, "comment_id": 75839741, "body": "the values can be larger than 9. Therefore thought about it, didnt apply"}, {"owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "reply_to_user": {"reputation": 47, "user_id": 1450005, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c968e3decc041e5f466b7794a260d8ad?s=128&d=identicon&r=PG", "display_name": "user1450005", "link": "https://stackoverflow.com/users/1450005/user1450005"}, "edited": false, "score": 0, "creation_date": 1496861714, "post_id": 44420650, "comment_id": 75839779, "body": "Then you need to specify what result you want when they are. Your question as stated (and your attempted solution) both indicate that you expect digits."}], "tags": [], "owner": {"reputation": 3545, "user_id": 2183547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd540edd4677da5281d4331bf835f51?s=128&d=identicon&r=PG", "display_name": "L. Scott Johnson", "link": "https://stackoverflow.com/users/2183547/l-scott-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1496861506, "creation_date": 1496861506, "answer_id": 44420650, "question_id": 44420512, "link": "https://stackoverflow.com/questions/44420512/convert-int-array-to-char-array-in-cpp-to-give-filename/44420650#44420650", "title": "Convert int array to char array in cpp to give filename", "body": "<p>The thing that most resembles your algorithm would be to just use the digits to offset the ascii value of the 0 character. Replace your itoa() line with this:</p>\n\n<pre><code>for(i=0;i&lt;3;i++) name[i] = '0'+b[i];\n</code></pre>\n\n<p>This obviously assumes, as your code did, that the incoming int values are between 0 and 9.</p>\n"}], "owner": {"reputation": 47, "user_id": 1450005, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c968e3decc041e5f466b7794a260d8ad?s=128&d=identicon&r=PG", "display_name": "user1450005", "link": "https://stackoverflow.com/users/1450005/user1450005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1496862138, "creation_date": 1496861045, "last_edit_date": 1496862045, "question_id": 44420512, "link": "https://stackoverflow.com/questions/44420512/convert-int-array-to-char-array-in-cpp-to-give-filename", "title": "Convert int array to char array in cpp to give filename", "body": "<p>Lets say we have an integer array 1,2,3 (can be up to size 36, so each digit is not a single digit) and I want to name a file as 123...36.txt. I will do this on the go therefore, I need to change filename based on int array values</p>\n\n<p>I checked some solutions online, none of them worked. Is there an easy fix to this? Thanks </p>\n\n<pre><code>int main(int argc, char **argv) {\n\n    int i;\n\n    FILE *ptr;\n\n    int b[3]={1,2,3};\n    char name[FILENAME_MAX];\n\n    for(i=0;i&lt;3;i++) itoa(b[i],name[i],10);\n\n    name[3]='.';\n    name[4]='t';\n    name[5]='x';\n    name[6]='t';\n    name[7]='\\0';\n\n    ptr = fopen(name, \"w\");\n\n    fclose(ptr);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "embedded-linux"], "comments": [{"owner": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "edited": false, "score": 0, "creation_date": 1496862145, "post_id": 44420436, "comment_id": 75840036, "body": "Can you please show the error message?"}, {"owner": {"reputation": 627, "user_id": 7463034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/81d5b1067d7ba2b07119879253a92cde?s=128&d=identicon&r=PG&f=1", "display_name": "Mikola", "link": "https://stackoverflow.com/users/7463034/mikola"}, "reply_to_user": {"reputation": 32156, "user_id": 783510, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fgbAM.png?s=128&g=1", "display_name": "Philipp Cla&#223;en", "link": "https://stackoverflow.com/users/783510/philipp-cla%c3%9fen"}, "edited": false, "score": 0, "creation_date": 1496865751, "post_id": 44420436, "comment_id": 75842108, "body": "@Philipp, I&#39;m doing the following steps. 1. edit user-config.jam adding compiler description: using gcc : 4.8.2 : /opt/STM/STLinux-2.3/devkit/sh4/bin ; 2. cd ~/boost/distr/boost_1_64_0/tools/build 3. ./bootstrap.sh 4. ./b2 install --prefix=~/boost/install/x32 5. cd ~/boost/distr/boost_1_64_0 6. export PATH=$PATH:~/boost/install/x32/bin 7. b2 --build-dir=~/boost/result/x64 toolset=gcc --stagedir=~/boost/result/x64/libs After this I receive build error: sh: 1: /opt/STM/STLinux-2.3/devkit/sh4/bin: Permission denied If I run last commond with sudo then: sudo: b2: command not found"}], "answers": [{"tags": [], "owner": {"reputation": 627, "user_id": 7463034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/81d5b1067d7ba2b07119879253a92cde?s=128&d=identicon&r=PG&f=1", "display_name": "Mikola", "link": "https://stackoverflow.com/users/7463034/mikola"}, "is_accepted": false, "score": 0, "last_activity_date": 1496871595, "creation_date": 1496871595, "answer_id": 44423228, "question_id": 44420436, "link": "https://stackoverflow.com/questions/44420436/build-boost-libraries-for-sh4-arhitecture/44423228#44423228", "title": "Build boost libraries for sh4 arhitecture", "body": "<p>It seems I have found where was my mistake. In user-config.jam file I made mistake when defined rule for toolchain:\n<strong>using gcc : 4.8.2 : /opt/STM/STLinux-2.3/devkit/sh4/bin</strong> - that is path to the toolchain directory. Instead of I should write full path to the executable file:\nshould be <strong>using gcc : 4.8.2 : /opt/STM/STLinux-2.3/devkit/sh4/bin/sh4-linux-g++</strong></p>\n"}], "owner": {"reputation": 627, "user_id": 7463034, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/81d5b1067d7ba2b07119879253a92cde?s=128&d=identicon&r=PG&f=1", "display_name": "Mikola", "link": "https://stackoverflow.com/users/7463034/mikola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496871595, "creation_date": 1496860822, "last_edit_date": 1496862112, "question_id": 44420436, "link": "https://stackoverflow.com/questions/44420436/build-boost-libraries-for-sh4-arhitecture", "title": "Build boost libraries for sh4 arhitecture", "body": "<p>I have the following problem. I need to buld some boost libraries for sh4 platform. I'm trying to use boost.build tool for this aim. I have made for desktop and all are okey - it seems I'm doing all correctly for x86. But for sh4 does not work. I heard that this may not be trivial. Can you give advice?<br>\nI have corresponding toolchain and etc...</p>\n"}, {"tags": ["c++", "windows", "sdl-2", "sdl-mixer"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1496862460, "post_id": 44420430, "comment_id": 75840214, "body": "I&#39;m not quite sure how SDL works in this regard. But, if you consider &quot;looping&quot; as the number of times to play the sound in total, then &quot;looping == 1&quot; resulting in one playthrough of the sound seems fairly reasonable (assuming that 2 results in a total of two playthroughs)..."}, {"owner": {"reputation": 1, "user_id": 4857138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/egzoN.jpg?s=128&g=1", "display_name": "Simian", "link": "https://stackoverflow.com/users/4857138/simian"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1496862860, "post_id": 44420430, "comment_id": 75840435, "body": "Thanks for that, I&#39;ll keep that noted! But shouldn&#39;t this still play the song at least once? Because it&#39;s not playing all? :(   And I know my file works, because as I said it&#39;s an intermittent issue. I restarted my machine and it works the first couple of times then stops, so I&#39;m guessing I have a memory issue somewhere"}, {"owner": {"reputation": 516, "user_id": 3578397, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/751b0ab3cfc56e56b4077364c041be54?s=128&d=identicon&r=PG&f=1", "display_name": "Pradana Aumars", "link": "https://stackoverflow.com/users/3578397/pradana-aumars"}, "edited": false, "score": 0, "creation_date": 1497060182, "post_id": 44420430, "comment_id": 75934059, "body": "Can you show us <code>main()</code>?"}], "owner": {"reputation": 1, "user_id": 4857138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/egzoN.jpg?s=128&g=1", "display_name": "Simian", "link": "https://stackoverflow.com/users/4857138/simian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496871663, "creation_date": 1496860808, "last_edit_date": 1496871663, "question_id": 44420430, "link": "https://stackoverflow.com/questions/44420430/sdl-mixer-music-has-to-play-twice-to-work", "title": "SDL_Mixer music has to play twice to work", "body": "<p>I'm currently working on a simple music player, however, I've hit a problem where I can loop music indefinitely or any number of times > 1, but if I try to play the song only once then nothing plays. Having searched here too for about 30 minutes I couldn't find a question documenting the same problem.</p>\n\n<p>The weird part is this used to work, I saved after it worked, closed, opened, then it no longer worked. <strong>I had not changed anything</strong>.</p>\n\n<p>I think it might be an issue with how I'm cleaning up SDL_Mixer, but after an hour of debugging I'm no closer to a solution.</p>\n\n<pre><code>#include &lt;SDL_Mixer.h&gt;\n\nbool Program::_running = false;\nvoid Program::Run()\n{\n    if (_running)\n    {\n        return;\n    }\n\n    _running = true;\n\n    if (Mix_Init(MIX_INIT_MP3) == 0)\n    {\n        std::cout &lt;&lt; Mix_GetError();\n        return;// false;\n    }\n\n    if (Mix_OpenAudio(22050, MIX_DEFAULT_FORMAT, 2, 4096) &lt; 0)\n    {\n        return;\n    }\n\n    _music = Mix_LoadMUS(\"Music/03 - Code Monkey.mp3\");\n\n    if (_music == nullptr)\n    {\n        std::cout &lt;&lt; Mix_GetError();\n    }\n    else\n    {\n        if (Mix_PlayMusic(_music, 1) &lt; 0)\n        {\n            std::cout &lt;&lt; Mix_GetError();\n        }\n    }\n\n    while (_running)\n    {\n        Update();\n        Render();\n    }\n}\n</code></pre>\n\n<p>And here's my current clean-up:</p>\n\n<pre><code>Program::~Program()\n{\n    Mix_FreeMusic(_music);\n    Mix_CloseAudio();\n}\n</code></pre>\n"}, {"tags": ["c++", "rapidjson"], "comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1496861394, "post_id": 44420390, "comment_id": 75839613, "body": "Note that you can also use raw string literals to avoid having to escape everything manually <a href=\"http://en.cppreference.com/w/cpp/language/string_literal\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/string_literal</a> ((6) in that link)"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 8162182, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cH4O8.png?s=128&g=1", "display_name": "Jacobb", "link": "https://stackoverflow.com/users/8162182/jacobb"}, "is_accepted": false, "score": 0, "last_activity_date": 1497964429, "last_edit_date": 1592644375, "creation_date": 1497964023, "answer_id": 44653939, "question_id": 44420390, "link": "https://stackoverflow.com/questions/44420390/convert-rapidjson-array-iterator-to-rapidjsonvalue/44653939#44653939", "title": "Convert rapidjson array iterator to rapidjson::value", "body": "<h3>Note: this will only work in an array.</h3>\n<p>Recently, I faced a similar problem and I came out with a different approach.</p>\n<p>First, I set up a pointer to the desired path like so:</p>\n<pre><code>int myIterator = 0;\nstring myString = &quot;/Layer1/Layer2/&quot; + to_string(myIterator);\nPointer p(myString.c_str());\n</code></pre>\n<p>I now have a pointer to a variable path in my JSON object that varies with <code>myIterator</code>.</p>\n<p>Then, I just used a for loop in which I use the <code>SetValueByPointer</code> function to append the pointer's value to a JSON object.</p>\n"}, {"tags": [], "owner": {"reputation": 247, "user_id": 9209968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab1c6d5c5c167be9840299305eff0904?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Olson", "link": "https://stackoverflow.com/users/9209968/josh-olson"}, "is_accepted": false, "score": 1, "last_activity_date": 1526786167, "last_edit_date": 1526786167, "creation_date": 1526783969, "answer_id": 50431194, "question_id": 44420390, "link": "https://stackoverflow.com/questions/44420390/convert-rapidjson-array-iterator-to-rapidjsonvalue/50431194#50431194", "title": "Convert rapidjson array iterator to rapidjson::value", "body": "<p><code>MemberIterator</code> iterates Members of an Object. <code>ValueIterator</code> iterates Values in an Array.</p>\n\n<p>Also, I'm not sure why that loop had issues for you, this compiles for me:</p>\n\n<pre><code>std::string json =\n    \"{\"\n    \"    \\\"cars\\\" : [\"\n    \"    {\"\n    \"        \\\"name\\\" : \\\"Fiat\\\",\"\n    \"        \\\"price\\\" : 19.95\"\n    \"    },\"\n    \"    {\"\n    \"        \\\"name\\\" : \\\"FRS\\\",\"\n    \"        \\\"price\\\" : 19995.00\"\n    \"    }]\"\n    \"}\";\nDocument doc;\ndoc.Parse(json.data());\nValue const&amp; cars = doc[\"cars\"];\nfor (auto&amp; car : cars.GetArray()) {\n    cout &lt;&lt; \"name: \" &lt;&lt; car[\"name\"].GetString() &lt;&lt; \" \"\n        &lt;&lt; \"price: \" &lt;&lt; car[\"price\"].GetFloat() &lt;&lt; endl;\n}\n</code></pre>\n\n<p>And returns:</p>\n\n<pre><code>name: Fiat price: 19.95\nname: FRS price: 19995\n</code></pre>\n\n<p>As for applying your function in a loop:</p>\n\n<pre><code>for (Value&amp; car : cars.GetArray()) {\n    ParseCar(car);\n}\n</code></pre>\n\n<p>If you must use an iterator:</p>\n\n<pre><code>for (Value::ValueIterator car = cars.Begin(); car != cars.End(); ++car) {\n    ParseCar(*car);\n}\n</code></pre>\n\n<p>Or with auto:</p>\n\n<pre><code>for (auto car = cars.Begin(); car != cars.End(); ++car) {\n    ParseCar(*car);\n}\n</code></pre>\n"}], "owner": {"reputation": 2969, "user_id": 5191073, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/628f44cad275ff1e2fd7230f8cdd5cbb?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Pisz", "link": "https://stackoverflow.com/users/5191073/christopher-pisz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2041, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1526786167, "creation_date": 1496860704, "question_id": 44420390, "link": "https://stackoverflow.com/questions/44420390/convert-rapidjson-array-iterator-to-rapidjsonvalue", "title": "Convert rapidjson array iterator to rapidjson::value", "body": "<p>How do I convert a rapidjson array iterator to a rapidjson::value?</p>\n\n<p>I do not want answers that focus on how to get the contents of a rapid json array, or how to iterate through it.</p>\n\n<p>I am also very aware that I can access members through the iterator using the example in the rapidjson documentation <code>itr-&gt;name</code>, but that is not what I want either. That form of working with rapidjson arrays already appears on many stack overflow questions and the rapidjson docs, and has been covered.</p>\n\n<p>I need to end up with a <code>rapidjson::value</code> when starting with a rapidjson array iterator.</p>\n\n<p>If we have an <code>std::vector&lt;int&gt;</code> than we can assign </p>\n\n<pre><code>std::vector&lt;int&gt;::iterator itMyInt = myvector.begin();\nconst int &amp; myInt = *itMyInt;\n</code></pre>\n\n<p>I would expect to be able to do the same thing with a rapidjson array iterator, but my compiler disagrees.</p>\n\n<p>The reason I need a rapidjson::value is that I'd like to reuse the same parsing method to parse the json object when is an element of an array, as I would when parsing that object on its own and not in an array.</p>\n\n<p>Let me demonstrate with my minimal example:</p>\n\n<pre><code>// Rapid JSON Includes\n#include &lt;rapidjson/Document.h&gt;\n#include &lt;rapidjson/StringBuffer.h&gt;\n#include &lt;rapidjson/writer.h&gt;\n\n// Standard Includes\n#include &lt;exception&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\n//--------------------------------------------------------------------------------------------------\n// NOTE -This stub cannot change\nvoid ParseCar(const rapidjson::Value &amp; carJson)\n{\n\n}\n\n//--------------------------------------------------------------------------------------------------\nint main()\n{\n    std::string json =\n        \"{\"\n        \"    \\\"cars\\\" : [\"\n        \"    {\"\n        \"        \\\"name\\\" : \\\"Fiat\\\",\"\n        \"        \\\"price\\\" : 19.95\"\n        \"    },\"\n        \"    {\"\n        \"        \\\"name\\\" : \\\"FRS\\\",\"\n        \"        \\\"price\\\" : 19995.00\"\n        \"    }]\"\n        \"}\";\n\n    // Parse the JSON\n    rapidjson::Document document;\n    document.Parse(json.c_str());\n\n    if (document.HasParseError())\n    {\n        // Error - Failed to parse JSON\n        std::ostringstream msg;\n        msg &lt;&lt; \"There was an error parsing the JSON\"\n            &lt;&lt; \" Error Code: \" &lt;&lt; document.GetParseError()\n            &lt;&lt; \" Error Offset: \" &lt;&lt; document.GetErrorOffset();\n\n        throw std::exception(msg.str().c_str());\n    }\n\n    // Cars array\n    if (!document.HasMember(\"cars\") ||\n        !document[\"cars\"].IsArray())\n    {\n        std::string msg(\"Expected \\\"cars\\\"  JSON array\");\n\n        throw std::exception(msg.c_str());\n    }\n\n    const rapidjson::Value &amp; carsArrayJSON = document[\"cars\"];\n\n    /* Doesn't compile - No GetArray method exists\n    for (auto &amp; carJSON : carsArrayJSON.GetArray())\n    {\n\n    }\n    */\n\n\n    for (rapidjson::Value::ConstMemberIterator itCarJSON = carsArrayJSON.MemberBegin(); itCarJSON != carsArrayJSON.MemberEnd(); ++itCarJSON)\n    {\n        // Error - const rapidjson::GenericMember&lt;Encoding,Allocator&gt;' to 'const rapidjson::Value\n        const rapidjson::Value &amp; carJSON = *itCarJSON;\n\n        ParseCar(carJSON);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "json", "multithreading", "github", "nlohmann-json"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1496860436, "post_id": 44420309, "comment_id": 75839045, "body": "What on earth has json parsing to do with thread safety?"}, {"owner": {"reputation": 2896, "user_id": 2146208, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/0JREI.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/2146208/brian"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496860500, "post_id": 44420309, "comment_id": 75839085, "body": "The question has to do with whether or not the library is thread safe"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1496860545, "post_id": 44420309, "comment_id": 75839117, "body": "How about asking the author? How should we know how they designed it? Asking about 3rd party resources is <i>off-topic</i> BTW."}, {"owner": {"reputation": 2896, "user_id": 2146208, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/0JREI.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/2146208/brian"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496860686, "post_id": 44420309, "comment_id": 75839196, "body": "Well, if you had used it in a multithreaded environment, you might know it&#39;s never given you a problem or that maybe it crashed your application and cost you time and money.  Knowledge of the masses is what SO is all about.  Trying to glean some of that here"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496860782, "post_id": 44420309, "comment_id": 75839237, "body": "Try mail@nlohmann.me"}, {"owner": {"reputation": 2896, "user_id": 2146208, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/0JREI.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/2146208/brian"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496860960, "post_id": 44420309, "comment_id": 75839336, "body": "From <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>, fair game to ask about software tools ie libraries:  What topics can I ask about here?  Stack Overflow is for professional and enthusiast programmers, people who write code because they love it. We feel the best Stack Overflow questions have a bit of source code in them, but if your question generally covers\u2026  a specific programming problem, or a software algorithm, or software tools commonly used by programmers; and is a practical, answerable problem that is unique to software development"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496861038, "post_id": 44420309, "comment_id": 75839390, "body": "Read point #4 from this <a href=\"http://stackoverflow.com/help/on-topic\">help center article</a>."}, {"owner": {"reputation": 2896, "user_id": 2146208, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/0JREI.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/2146208/brian"}, "edited": false, "score": 0, "creation_date": 1496861126, "post_id": 44420309, "comment_id": 75839450, "body": "Thanks for the authors email, I hadn&#39;t dug that up yet, emailing him now.  I will post his answer here so others can see if they have same question"}, {"owner": {"reputation": 2896, "user_id": 2146208, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/0JREI.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/2146208/brian"}, "edited": false, "score": 0, "creation_date": 1496861308, "post_id": 44420309, "comment_id": 75839565, "body": "As for point #4, I&#39;m not asking for a recommendation for a library or a tool, just asking if anyone has any relevant experience with a popular library from Github doing multithreading. . ."}], "answers": [{"comments": [{"owner": {"reputation": 811, "user_id": 2742234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8Qhf.png?s=128&g=1", "display_name": "double_g", "link": "https://stackoverflow.com/users/2742234/double-g"}, "edited": false, "score": 0, "creation_date": 1518976341, "post_id": 44420742, "comment_id": 84712899, "body": "No need to use any synchronize mechanism if there is not shared resource. For example, an instance of parser class is created with own attributes for each ::parse() call, that seems to be thread-safe for me, no ?"}, {"owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "reply_to_user": {"reputation": 811, "user_id": 2742234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8Qhf.png?s=128&g=1", "display_name": "double_g", "link": "https://stackoverflow.com/users/2742234/double-g"}, "edited": false, "score": 0, "creation_date": 1519059942, "post_id": 44420742, "comment_id": 84745557, "body": "you are right... you have to tell you what you are targeting as thread safe: Here are are talking about &quot;thread safety on JSON variable accesses&quot;, as described in the question."}, {"owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "reply_to_user": {"reputation": 811, "user_id": 2742234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8Qhf.png?s=128&g=1", "display_name": "double_g", "link": "https://stackoverflow.com/users/2742234/double-g"}, "edited": false, "score": 0, "creation_date": 1519059957, "post_id": 44420742, "comment_id": 84745565, "body": "and &quot;this data&quot; in my answer."}, {"owner": {"reputation": 811, "user_id": 2742234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/z8Qhf.png?s=128&g=1", "display_name": "double_g", "link": "https://stackoverflow.com/users/2742234/double-g"}, "edited": false, "score": 0, "creation_date": 1519157838, "post_id": 44420742, "comment_id": 84792648, "body": "nevermind, I suppose &#39;Brian&#39; should test himself thread safety of this library."}], "tags": [], "owner": {"reputation": 4921, "user_id": 264615, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Dj1ny.jpg?s=128&g=1", "display_name": "Wagner Patriota", "link": "https://stackoverflow.com/users/264615/wagner-patriota"}, "is_accepted": true, "score": 5, "last_activity_date": 1496862190, "last_edit_date": 1496862190, "creation_date": 1496861860, "answer_id": 44420742, "question_id": 44420309, "link": "https://stackoverflow.com/questions/44420309/json-for-modern-c-thread-safe/44420742#44420742", "title": "JSON for Modern C++ thread safe?", "body": "<p>nlohmann library is NOT thread safe. Take a look at the header file. It's a single one. There's no mutexes, locks or atomics or anything related to threads.</p>\n\n<p><a href=\"https://github.com/nlohmann/json/blob/develop/src/json.hpp\" rel=\"noreferrer\">https://github.com/nlohmann/json/blob/develop/src/json.hpp</a></p>\n\n<p>You are responsible for protecting against concurrency of multiple threads accessing this data.</p>\n"}], "owner": {"reputation": 2896, "user_id": 2146208, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/0JREI.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/2146208/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1324, "favorite_count": 0, "accepted_answer_id": 44420742, "answer_count": 1, "score": 0, "last_activity_date": 1588314957, "creation_date": 1496860370, "last_edit_date": 1588314957, "question_id": 44420309, "link": "https://stackoverflow.com/questions/44420309/json-for-modern-c-thread-safe", "title": "JSON for Modern C++ thread safe?", "body": "<p>I am using a library named \"JSON for Modern C++\" (<a href=\"https://github.com/nlohmann/json\" rel=\"nofollow noreferrer\">https://github.com/nlohmann/json</a>) which is pretty slick, letting me use JSON configuration files by a C++ program that are shared with a Javascript server side application.  This library essentially creates another datatype that is accessed and manipulated in way that is very close to the same as a Javascript JSON objects.</p>\n\n<p>My question is, do I need to be concerned about thread safety on JSON variable accesses and manipulations or can I trust the library is thread safe.  I've looked in the documentation and I don't see it say it is thread safe but I also don't see anywhere that says it isn't thread safe.</p>\n\n<p>Is anyone else using this library in a multithreaded environment?  Did you need to protect it yourself or did the library protect itself.  Maybe I'm really lucky and the repository author nlohmann will answer directly!</p>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496860105, "post_id": 44420179, "comment_id": 75838844, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1496860793, "post_id": 44420179, "comment_id": 75839241, "body": "On most modern file systems, files can contain many  &quot;.&quot;s. And spaces, too."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496860959, "post_id": 44420179, "comment_id": 75839334, "body": "Did you try anything already? Asking for <i>&quot;Any ideas?&quot;</i> sounds too broad to be asked here. This may turn into an endless discussion which is what we don&#39;t want here. The site is rather about concise FAQ like question and answer pairs. You also may want to read <a href=\"http://stackoverflow.com/help/asking\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1732, "user_id": 8121683, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1fnlik1dgxU/AAAAAAAAAAI/AAAAAAAAATk/MvX5UOgKBfg/photo.jpg?sz=128", "display_name": "Easton Bornemeier", "link": "https://stackoverflow.com/users/8121683/easton-bornemeier"}, "is_accepted": false, "score": 0, "last_activity_date": 1496860344, "creation_date": 1496860344, "answer_id": 44420297, "question_id": 44420179, "link": "https://stackoverflow.com/questions/44420179/how-to-input-an-arbitrary-number-of-text-files-in-c/44420297#44420297", "title": "How to input an arbitrary number of text files in C++?", "body": "<p>Here is the general process I would try to follow (if I interpreted the prompt correctly)</p>\n\n<ul>\n<li>Get the line of text files using getline</li>\n<li>Put that into a stringstream</li>\n<li>Open the next file in the stream while there is still information in the stringstream (not at eof)</li>\n<li>Store all of that information in a Vector of strings, each new file just appended on after it is read</li>\n<li>compare strings in the vector</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 6013, "user_id": 3310281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9b8b4ec03e2c7a424fdc428eb55f2e8?s=128&d=identicon&r=PG&f=1", "display_name": "Malcolm McLean", "link": "https://stackoverflow.com/users/3310281/malcolm-mclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1496860761, "creation_date": 1496860761, "answer_id": 44420417, "question_id": 44420179, "link": "https://stackoverflow.com/questions/44420179/how-to-input-an-arbitrary-number-of-text-files-in-c/44420417#44420417", "title": "How to input an arbitrary number of text files in C++?", "body": "<p>If you pass the text files on the commandline rather than getting them from a little dialog with the user via stdin life will be easier. Most users will type </p>\n\n<pre><code>compare *\n</code></pre>\n\n<p>which on Unix type systems is expanded to a list of files. ON DOS you need to match and expand the wild card yourself.</p>\n\n<p>You've got an N squared problem, but the logic is easy, it's just</p>\n\n<pre><code>int mian(int argc, char **argv)\n{\n   int i, j;\n   for(i=1;i&lt;argc;i++)\n      for(j=i+1;j&gt;argc;j++)\n         compare(argv[i], argv[j]; \n\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8127384, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3ugfNrGaPg8/AAAAAAAAAAI/AAAAAAAAARk/2Ly1Eo-Z7tc/photo.jpg?sz=128", "display_name": "Seth", "link": "https://stackoverflow.com/users/8127384/seth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1496860761, "creation_date": 1496859925, "question_id": 44420179, "link": "https://stackoverflow.com/questions/44420179/how-to-input-an-arbitrary-number-of-text-files-in-c", "title": "How to input an arbitrary number of text files in C++?", "body": "<p>so I'm working on a coding project for a class, and I understand the basic things I want to accomplish, but one thing that nobody seems to be able to help me with is inputting an unspecified number of text files. The user is prompted to enter the text files they want to compare (overall purpose of my code), separated by spaces, thus allowing them to compare an arbitrary amount of text files (eg. 2, 3, 8, 16, etc). I know that the getline function is helpful here, as well as searching for the number of \".\" because files can only contain one \".\", all within a for loop. After that logic I am utterly lost. Eventually, I'm going to have to open the text files and put them in sets to compare them against every other file once, and output their similarities and differences into yet another text file. Any ideas?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1496859939, "post_id": 44420151, "comment_id": 75838761, "body": "Not this particular issue, but you should read <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is <code>iostream::eof</code> inside a loop condition considered wrong?</a>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1496860050, "post_id": 44420151, "comment_id": 75838818, "body": "You can still inspect why <code>quelle.open(filename.c_str());</code> actually failed using <code>errno</code> and <code>perror()</code>. There are many reasons why that could happen."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 1, "creation_date": 1496860393, "post_id": 44420151, "comment_id": 75839021, "body": "Most likely the file will not be found because you are entering a <i>relative</i> file path like <code>myfile.txt</code>. The system will look for the file in the current working directory of the application, which depends on many factors. Try entering the absolute path of the file like <code>C:\\myfile.txt</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1496860637, "post_id": 44420151, "comment_id": 75839173, "body": "BTW, <code>return 0;</code> from a function that returns a <code>std::string</code> is a bad idea."}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "edited": false, "score": 1, "creation_date": 1496861126, "post_id": 44420151, "comment_id": 75839451, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2602013/read-whole-ascii-file-into-c-stdstring\">Read whole ASCII file into C++ std::string</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7972945"}, "edited": false, "score": 0, "creation_date": 1496867650, "post_id": 44420151, "comment_id": 75843099, "body": "Ah ok. I am using cLion to code and didn&#39;t notice where it build my program and noticed that i put it into a wrong folder.. and i edited my question"}], "answers": [{"comments": [{"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 0, "creation_date": 1496860517, "post_id": 44420319, "comment_id": 75839099, "body": "Where did OP say that they were segfaulting?"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1496860543, "post_id": 44420319, "comment_id": 75839114, "body": "He actually returns something from the function, although the first <code>return 0</code> is strange."}, {"owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "reply_to_user": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "edited": false, "score": 1, "creation_date": 1496860618, "post_id": 44420319, "comment_id": 75839161, "body": "@curious I updated this to fit your specifications"}], "tags": [], "owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "is_accepted": false, "score": 0, "last_activity_date": 1496860586, "last_edit_date": 1496860586, "creation_date": 1496860435, "answer_id": 44420319, "question_id": 44420151, "link": "https://stackoverflow.com/questions/44420151/c-passing-a-file-to-a-string/44420319#44420319", "title": "C++ passing a file to a string", "body": "<p>Try something like this to read your file instead: </p>\n\n<pre><code>std::string readFile (std::string filename)\n{\n   std::ifstream quelle(filename);\n\n   std::string content( (std::istreambuf_iterator&lt;char&gt;(quelle) ),\n                      (std::istreambuf_iterator&lt;char&gt;()) );\n   return content;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1496860789, "post_id": 44420326, "comment_id": 75839240, "body": "<i>the loop will exit when the istream object is done reading</i> ... I would add that the loop also exits if the stream encounters any error besides <code>EOF</code>."}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1496860914, "post_id": 44420326, "comment_id": 75839313, "body": "@zett42 updated my answer"}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1496861141, "post_id": 44420326, "comment_id": 75839467, "body": "What is the benefit of writing <code>auto var = type{};</code> instead of just <code>type var;</code> or maybe <code>type var{};</code> if you want to make sure to always initialize?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1496861194, "post_id": 44420326, "comment_id": 75839498, "body": "@zett42 nothing at all, just habit"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7972945"}, "edited": false, "score": 0, "creation_date": 1496869471, "post_id": 44420326, "comment_id": 75843961, "body": "@Curious thats not working for me because. I want to read the file line by line and not each character. I actually need to analyze a file and i still don&#39;t know how to do it but my professor gave me that while(){} as a hint. So i thought i have to use it. Also i updated my questions."}], "tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": true, "score": 1, "last_activity_date": 1496860905, "last_edit_date": 1496860905, "creation_date": 1496860465, "answer_id": 44420326, "question_id": 44420151, "link": "https://stackoverflow.com/questions/44420151/c-passing-a-file-to-a-string/44420326#44420326", "title": "C++ passing a file to a string", "body": "<p>Other than checking to see why the <code>open()</code> failed as explained in the comments also keep in mind that there are easier ways to check for when you have hit the end of file in a while loop where you are reading from an <code>istream</code>. </p>\n\n<p>The idiomatic way to loop and read from an <code>istream</code> in C++ is to embed the read expression that returns a reference to the <code>istream</code> in the loop condition, so change your code to </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nusing std::cin;\nusing std::cout;\nusing std::endl;\nusing std::string;\n\nint main() {\n    auto character = char{};\n    auto file_string = string{};\n    while (cin.get(character)) {\n        file_string += character;\n    }\n\n    cout &lt;&lt; file_string &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>I've used <code>cin</code> above but just replace <code>cin</code> with your file stream object and everything should work normally.</p>\n\n<p>Note that the while terminating condition is now an <code>istream</code> reference, and that is convertible to bool, so the loop will exit when the <code>istream</code> object is done reading <strong>or</strong> when the stream encounters any errors besides EOF.  You don't have to check for <code>eof()</code> yourself.  </p>\n\n<p>Also another thing is to pass strings that you do not intend to modify by const reference instead of by value, so the <code>readFile()</code> function should accept a <code>const string&amp;</code> instead of a <code>string</code>, this will help save you string copying.  When C++17 is available replace that <code>const string&amp;</code> with <a href=\"https://stackoverflow.com/questions/20803826/what-is-string-view\"><code>std::string_view</code></a> </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7972945"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "closed_date": 1497050882, "accepted_answer_id": 44420326, "answer_count": 2, "score": 0, "last_activity_date": 1496867745, "creation_date": 1496859829, "last_edit_date": 1496867745, "question_id": 44420151, "link": "https://stackoverflow.com/questions/44420151/c-passing-a-file-to-a-string", "closed_reason": "Not suitable for this site", "title": "C++ passing a file to a string", "body": "<p>Hi i am trying to pass a whole file into a string. This is my Code but the program is always exiting on the first if(). I just can't get behind what i am doing wrong here.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nstd::string readFile (std::string filename);\n\nint main() {\n    std::string filename;\n    std::string Eingabestring;\n\n    std::cout &lt;&lt; \"Geben Sie eine Datei an\" &lt;&lt; std::endl;\n    std::cin &gt;&gt; filename;\n    Eingabestring = readFile(filename);\n\n    std::cout &lt;&lt; Eingabestring &lt;&lt; std::endl;\n\n    return 0;\n}\n\nstd::string readFile (std::string filename)\n{\n    std::string zeile,inhalt ;\n    std::ifstream quelle;\n    quelle.open(filename.c_str());\n\n    if (!quelle)\n    {\n        std::cerr &lt;&lt; filename &lt;&lt; \" kann nicht ge\u00f6ffnet werden!\\n\";\n        return exit(-1);\n    }\n\n    while (!quelle.eof())\n    {\n        getline(quelle,zeile);\n        inhalt = inhalt + zeile;\n    }\n\n    return inhalt;\n\n}\n</code></pre>\n\n<p>Already thanks for your help!</p>\n\n<p>Edit: I just noticed that i put the file into a wrong folder.. But the code still isn't reading the whole file. Just the first line, but i thought with the loop i could get every line of my file into the string?</p>\n\n<p>And i fixed the second return 0 to exit(-1). Thats better right?</p>\n"}, {"tags": ["c++", "octave"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1496858911, "post_id": 44419812, "comment_id": 75838239, "body": "What have you tried doing? Show your code and explain what the issues are"}, {"owner": {"reputation": 1065, "user_id": 6761328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/058e471008d4345e1d895321def8806e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6761328/ben"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1496859368, "post_id": 44419812, "comment_id": 75838473, "body": "@UnholySheep At first thanks! I edited the question a bit, hope it is now understandable?"}, {"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 2, "creation_date": 1496863508, "post_id": 44419812, "comment_id": 75840837, "body": "@Ben this might help: <a href=\"https://www.gnu.org/software/octave/doc/v4.2.1/External-Code-Interface.html#External-Code-Interface\" rel=\"nofollow noreferrer\">gnu.org/software/octave/doc/v4.2.1/&hellip;</a> (specifically the oct and standalone sections)"}, {"owner": {"reputation": 1065, "user_id": 6761328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/058e471008d4345e1d895321def8806e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6761328/ben"}, "reply_to_user": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1496863891, "post_id": 44419812, "comment_id": 75841065, "body": "@TasosPapastylianou Thank you! Unfortunately I already know that. But I don&#39;t get it how to use e.g. fft. In the documentary itself there is only given:  fft(x)"}, {"owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 1, "creation_date": 1496902210, "post_id": 44419812, "comment_id": 75853676, "body": "If you want to calculate fft and ifft in C++ you should use <a href=\"http://fftw.org/\" rel=\"nofollow noreferrer\">fftw.org</a> directly. GNU Octave also uses fftw"}, {"owner": {"reputation": 1065, "user_id": 6761328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/058e471008d4345e1d895321def8806e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6761328/ben"}, "reply_to_user": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 0, "creation_date": 1496906819, "post_id": 44419812, "comment_id": 75856362, "body": "@Andy Thanks, good to know! Actually I wanted to compare several functions out of octave with each other. fft is just the first - and it took me several days to get octave running embedded in my code :)"}, {"owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 0, "creation_date": 1496918941, "post_id": 44419812, "comment_id": 75864458, "body": "@Ben: where can I find your full code?"}, {"owner": {"reputation": 1065, "user_id": 6761328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/058e471008d4345e1d895321def8806e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6761328/ben"}, "reply_to_user": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 0, "creation_date": 1496937514, "post_id": 44419812, "comment_id": 75878611, "body": "@Andy The full code? I uploaded it on <a href=\"https://github.com/DeLaRiva/Code/blob/master/Filter.cpp\" rel=\"nofollow noreferrer\">github.com/DeLaRiva/Code/blob/master/Filter.cpp</a> The part where I want to use an octave function is in line 303."}, {"owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 0, "creation_date": 1496938583, "post_id": 44419812, "comment_id": 75879331, "body": "@Ben No, I ask for the whole project source tree. Since you want to use Octave function (and link against liboctave) you&#39;re project also has to be GPL. See for example here: <a href=\"http://wiki.octave.org/FAQ#I_wrote_a_program_that_links_with_Octave_libraries_and_I_don.27t_want_to_release_it_under_the_terms_of_the_GPL._Will_you_change_the_license_of_the_Octave_libraries_for_me.3F\" rel=\"nofollow noreferrer\">wiki.octave.org/&hellip;</a>"}, {"owner": {"reputation": 1065, "user_id": 6761328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/058e471008d4345e1d895321def8806e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6761328/ben"}, "reply_to_user": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 0, "creation_date": 1496944962, "post_id": 44419812, "comment_id": 75882966, "body": "@Andy Sorry, I guess I don&#39;t know what a source tree is. The uploaded file is the complete program. Do you mean the makefile is missing? What&#39;s meant by GPL? I have no problem to release it (didn&#39;t I do that already on github?)."}, {"owner": {"reputation": 268, "user_id": 1119649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b825d19cc43e6e346f27d4da76ef8d44?s=128&d=identicon&r=PG", "display_name": "Shoo Limberger", "link": "https://stackoverflow.com/users/1119649/shoo-limberger"}, "edited": false, "score": 0, "creation_date": 1496954898, "post_id": 44419812, "comment_id": 75888160, "body": "@Ben you want to generate a octave source code from C and then run octave?"}, {"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "reply_to_user": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 0, "creation_date": 1497007430, "post_id": 44419812, "comment_id": 75909236, "body": "@Andy &quot;Since you want to use Octave function (and link against liboctave) your project also has to be GPL&quot; &lt;-- this sounds like the kind of conversation that would have been had an infinite number of times already, but this sounds very weird to me. It&#39;s the first I&#39;ve heard it. Surely the only strict GPL requirement in such a project should have been that the GPL libraries used / modified are identified and licenced as such. &quot;You linked to our libraries therefore all your work belong to us&quot; sounds a bit like a freedom-fighter going on a bit of an overzealous power-trip."}, {"owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "reply_to_user": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1497008240, "post_id": 44419812, "comment_id": 75909795, "body": "@TasosPapastylianou This has nothing to do with &quot;your work belong to us&quot; but if you link against a GPL lib you have to grant others the same right so see and use your code. Have you never heard of the difference GPL&lt;-&gt;LGPL?"}, {"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "reply_to_user": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "edited": false, "score": 0, "creation_date": 1497018020, "post_id": 44419812, "comment_id": 75916727, "body": "@Andy I had, but admittedly I&#39;d forgotten the specifics here :p. You&#39;re right, I guess the meaning I intended and the way I should be phrasing it is that the LGPL would make more sense here (but I don&#39;t want to start that discussion, I&#39;m sure this has been covered many times)."}, {"owner": {"reputation": 1065, "user_id": 6761328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/058e471008d4345e1d895321def8806e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6761328/ben"}, "edited": false, "score": 0, "creation_date": 1497023236, "post_id": 44419812, "comment_id": 75920311, "body": "Ok,..  I&#39;m confused now...do I have to consider anything related to your discussion? Shall I do something with my code respectively publish it somewhere/is there a plattform of every code ever written with octave? Would be nice in such a way I would probably have a lot of examples :)"}], "answers": [{"comments": [{"owner": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1497006565, "post_id": 44449570, "comment_id": 75908653, "body": "This doesn&#39;t sound right. This seems to produce an octfile for use within Octave. The questions seems to ask for a c++ standalone that makes use of octave libraries instead."}, {"owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "reply_to_user": {"reputation": 18197, "user_id": 4183191, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8ce0d78cc78f51ee79cec5088effe3ed?s=128&d=identicon&r=PG", "display_name": "Tasos Papastylianou", "link": "https://stackoverflow.com/users/4183191/tasos-papastylianou"}, "edited": false, "score": 0, "creation_date": 1497006946, "post_id": 44449570, "comment_id": 75908913, "body": "@Tasos: of course only the part inside &quot;{ }&quot; The key here is to use <code>Ffft ()</code>. It doesn&#39;t matter if you call it in an oct file or a standalone application"}, {"owner": {"reputation": 1065, "user_id": 6761328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/058e471008d4345e1d895321def8806e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6761328/ben"}, "edited": false, "score": 0, "creation_date": 1497023467, "post_id": 44449570, "comment_id": 75920465, "body": "@Andy thanks! Sorry for cross-posting. I was a little bit scared because of so many downvotes. On cs.ex 3 of 4 of my posts got blocked with less down votes. So I thought before this happens again here I go to the natural plattform. But anyhow, I&#39;ll follow the discussion now there."}, {"owner": {"reputation": 1065, "user_id": 6761328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/058e471008d4345e1d895321def8806e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6761328/ben"}, "edited": false, "score": 0, "creation_date": 1497288624, "post_id": 44449570, "comment_id": 76004182, "body": "Thank you very much! Works also on my machine, can now implement it according to my stuff. Thanks a lot!"}], "tags": [], "owner": {"reputation": 7449, "user_id": 3811887, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/88dcea89bc4be8736da3b890f368a788?s=128&d=identicon&r=PG&f=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/3811887/andy"}, "is_accepted": true, "score": 1, "last_activity_date": 1497038624, "last_edit_date": 1497038624, "creation_date": 1496984142, "answer_id": 44449570, "question_id": 44419812, "link": "https://stackoverflow.com/questions/44419812/how-to-use-octave-for-data-from-c-in-c/44449570#44449570", "title": "How to use octave for data from c++ in c++", "body": "<p>Pantxo gave you the correct <a href=\"http://octave.1599824.n4.nabble.com/how-to-use-fft-in-c-tp4683590p4683592.html\" rel=\"nofollow noreferrer\">answer on the help mailinglist</a>. I add it here for completeness:</p>\n\n<blockquote>\n  <p>Since fft and related function are builtin you probably can include\n   and call Ffft directly (without the\n  need for feval) in your code. As an example the following code can be\n  compiled with mkocfile and works for me:</p>\n</blockquote>\n\n<pre><code>//////////////////////////testfft.cc//////////////////\n#include &lt;octave/oct.h&gt;\n#include &lt;octave/builtin-defun-decls.h&gt;\n\nDEFUN_DLD(testfft, args, nargout, \"\\\ntestfft\\n\\\n\")\n{\n  octave_value_list retval;\n  int nargin = args.length ();\n\n  retval = Ffft (args);\n  return retval;\n}\n/////////////////////////////////////////////////////\n\nCompile and test in Octave:\n\nmkoctfile testfft.cc\nx = 1:10;\nall (testfft (x) == fft (x))\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Since you have problems adapting this as standalone, I'll create another example:</p>\n\n<pre><code>// file main.cc\n// compile and link with mkoctfile --link-stand-alone main.cc -o bentest\n#include &lt;iostream&gt;\n#include &lt;octave/oct.h&gt;\n#include &lt;octave/builtin-defun-decls.h&gt;\n\nint main ()\n{\n  Matrix a = Matrix (1,4);\n  for (int k = 0; k &lt; a.columns (); ++k)\n    a(0, k) = k % 2;\n\n  std::cout &lt;&lt; \"in:\" &lt;&lt; a &lt;&lt; std::endl;\n\n  octave_value_list in;\n  in(0) = a;\n\n  octave_value_list out = Ffft (in, 1);\n  ComplexMatrix o = out(0).complex_matrix_value ();\n  std::cout &lt;&lt; \"out:\" &lt;&lt; o &lt;&lt; std::endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>which outputs.</p>\n\n<pre><code>in: 0 1 0 1\n\nout: (2,0) (0,0) (-2,0) (0,0)\n</code></pre>\n"}], "owner": {"reputation": 1065, "user_id": 6761328, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/058e471008d4345e1d895321def8806e?s=128&d=identicon&r=PG&f=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/6761328/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 432, "favorite_count": 0, "closed_date": 1497050911, "accepted_answer_id": 44449570, "answer_count": 1, "score": -4, "last_activity_date": 1497038624, "creation_date": 1496858638, "last_edit_date": 1496860700, "question_id": 44419812, "link": "https://stackoverflow.com/questions/44419812/how-to-use-octave-for-data-from-c-in-c", "closed_reason": "Needs details or clarity", "title": "How to use octave for data from c++ in c++", "body": "<p>I have a c++ file which reads in some data as Float_t-arrays. On these I want to apply some octave functions (e.q. fft). How do I do that? Do I firstly have to convert Float_t into an octave variable? \nThanks!</p>\n\n<p>I have:</p>\n\n<pre><code>int main()\n{\nFloat values[10];\n\n//do magic with octave, e.q. fft\n\n// store the data back into values or keep them (?)\n}\n</code></pre>\n\n<p>I know I can do the following:</p>\n\n<pre><code>int main()\n{\nFloat values[10]={0,1,2,3,4,5,6,7,8,9};\n\nMatrix a_matrix = Matrix (2,2);\na_matrix(0,0) = values[0];\n\ncout &lt;&lt; \"Matrix: \" &lt;&lt; a_matrix &lt;&lt; endl;\n}\n</code></pre>\n\n<p>How do I do this with fft on the values-array?</p>\n"}, {"tags": ["c++", "c++11", "templates", "gcc", "clang"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 5, "creation_date": 1496857683, "post_id": 44419508, "comment_id": 75837583, "body": "I&#39;d say this is a compiler bug"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1496857859, "post_id": 44419508, "comment_id": 75837676, "body": "Interestingly enough on VS2017 Intellisense will give the &quot;correct&quot; error message, while the compiler itself gives the same error as observed on GCC and Clang"}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 9, "creation_date": 1496857863, "post_id": 44419508, "comment_id": 75837679, "body": "@Justin Even if it is a compiler bug, apparently the same bug shows up in multiple independent compilers. That means there\u2019s probably something more interesting going on behind the scenes."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496858048, "post_id": 44419508, "comment_id": 75837785, "body": "If anyone has it, templight might help; I&#39;ve never used it, but it apparently lets you debug template instantiations (walk through it with a gdb-like debugger)."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496858222, "post_id": 44419508, "comment_id": 75837874, "body": "There&#39;s a better error message in <a href=\"https://wandbox.org/permlink/putkDD5sO4kKmKXm\" rel=\"nofollow noreferrer\">&lt; gcc 4.5</a> and <a href=\"https://wandbox.org/permlink/dohF9GWoMNV0u7m4\" rel=\"nofollow noreferrer\">&gt; clang 4.0</a>"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496858261, "post_id": 44419508, "comment_id": 75837898, "body": "@Justin Clang has almost the exact same error message too."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1496858573, "post_id": 44419508, "comment_id": 75838066, "body": "It&#39;s possible that, since <code>&amp;change</code> is ill-formed, the compilers treat it as &quot;not a value&quot; and do weird things. It might lead them to instantiate the template as <code>bar&lt;int, double&gt;</code> because the &quot;not a value&quot; isn&#39;t a type so it isn&#39;t inserted into the template argument list, which then means that the function is being called with too many arguments. In the case of GCC, it looks like the &quot;not a value&quot; makes the entire type-list empty (<code>with Args = {}</code>)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 2, "creation_date": 1496861870, "post_id": 44419508, "comment_id": 75839876, "body": "Standard wise, compilers are permitted to give any diagnostic at all (even whitespace!) when you feed it an ill-formed program.  So they are standard compliant: however, standard compliant error messages are a bit too low of a bar.  ;)"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 1, "creation_date": 1496861985, "post_id": 44419508, "comment_id": 75839951, "body": "What does <code>bar(&amp;change, 1, 2.0);</code> and <code>bar&lt;double(*)(int)&gt;(&amp;change, 1, 2.0);</code> generate message-wise?"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1496862254, "post_id": 44419508, "comment_id": 75840094, "body": "@Yakk no error for the second one and the same error but slightly different error (i.e. the wrong error?) for the first one (<code>requires 0 arguments, but 3 were provided</code> instead of <code>requires 2 arguments, but 3 were provided</code>"}], "answers": [{"tags": [], "owner": {"reputation": 61409, "user_id": 485343, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e18b024a122df74275dd2c4486e8a2b4?s=128&d=identicon&r=PG", "display_name": "rustyx", "link": "https://stackoverflow.com/users/485343/rustyx"}, "is_accepted": false, "score": 7, "last_activity_date": 1496863535, "last_edit_date": 1496863535, "creation_date": 1496862476, "answer_id": 44420912, "question_id": 44419508, "link": "https://stackoverflow.com/questions/44419508/why-does-the-compiler-not-give-an-ambiguous-reference-error/44420912#44420912", "title": "Why does the compiler not give an ambiguous reference error?", "body": "<p>I think the compiler is right, however weird it may be. Template argument deduction rules are different from substitution. The ambiguity in overloaded function resolution in a template parameter pack context does not necessarily mean failure.</p>\n\n<p>See <a href=\"http://eel.is/c++draft/temp.deduct.call#6\" rel=\"noreferrer\">[temp.deduct.call]/p6</a>:</p>\n\n<blockquote>\n  <p>When P is a function type, function pointer type, or pointer to member\n  function type:</p>\n  \n  <p>...</p>\n  \n  <p>-- If the argument is an overload set (not containing function templates), trial argument deduction is attempted using each of the\n  members of the set.\n      If deduction succeeds for only one of the overload set members, that member is used as the argument value for the deduction.\n      If deduction succeeds for more than one member of the overload set the parameter is treated as a non-deduced context.</p>\n</blockquote>\n\n<p>So for the last argument of the parameter pack we're in a non-deduced context (not an error).</p>\n\n<p>And <a href=\"http://eel.is/c++draft/temp.arg.explicit#3\" rel=\"noreferrer\">[temp.arg.explicit]/p3</a>:</p>\n\n<blockquote>\n  <p>... A trailing template parameter pack not otherwise deduced will be deduced to an empty sequence of template arguments. ...</p>\n</blockquote>\n\n<p>So it seems to me (although this last bit doesn't say it explicitly for partially deduced parameter packs) the ambiguous function pointer is simply thrown away at deduction phase, and subsequently the substitution fails because it is trying to substitute 3 arguments into a deduced 2-argument function. It never gets to a point when it needs to resolve ambiguity.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8127591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe116ae34e1a049b52e5c8ac89b9e410?s=128&d=identicon&r=PG&f=1", "display_name": "user8127591", "link": "https://stackoverflow.com/users/8127591/user8127591"}, "is_accepted": false, "score": 3, "last_activity_date": 1496863549, "creation_date": 1496863549, "answer_id": 44421231, "question_id": 44419508, "link": "https://stackoverflow.com/questions/44419508/why-does-the-compiler-not-give-an-ambiguous-reference-error/44421231#44421231", "title": "Why does the compiler not give an ambiguous reference error?", "body": "<p>Justin is correct. Running GCC through a debugger leads to these lines of code:</p>\n\n<pre><code>cp_parser_lookup_name(cp_parser*, tree_node*, tag_types, bool, bool, bool, tree_node**, unsigned int) () at ../../gcc/cp/parser.c:24665\n24665   {\n(gdb) \n24667     tree object_type = parser-&gt;context-&gt;object_type;\n(gdb) \n24670     if (ambiguous_decls)\n(gdb) \n24665   {\n(gdb) \n24667     tree object_type = parser-&gt;context-&gt;object_type;\n(gdb) \n24670     if (ambiguous_decls)\n(gdb) \n24676     parser-&gt;context-&gt;object_type = NULL_TREE;\n\n...\n\n(gdb) list 24670\n24665   {\n24666     tree decl;\n24667     tree object_type = parser-&gt;context-&gt;object_type;\n24668   \n24669     /* Assume that the lookup will be unambiguous.  */\n24670     if (ambiguous_decls)\n24671       *ambiguous_decls = NULL_TREE;\n24672   \n24673     /* Now that we have looked up the name, the OBJECT_TYPE (if any) is\n24674        no longer valid.  Note that if we are parsing tentatively, and\n</code></pre>\n\n<p>And this is the actual code that emits the diagnostic:</p>\n\n<pre><code>6914                        complain);\n(gdb) \n\ntest.cpp:9:24: error: too many arguments to function \u2018void bar(Args&amp;&amp; ...) [with Args = {}]\u2019\n     bar(1, 2.0, &amp;change);\n                        ^\ntest.cpp:2:6: note: declared here\n void bar(Args&amp;&amp;...) {}\n\n...\n\n(gdb) list 6914\n6909              /* All other function calls.  */\n6910              postfix_expression\n6911            = finish_call_expr (postfix_expression, &amp;args,\n6912                        /*disallow_virtual=*/false,\n6913                        koenig_p,\n6914                        complain);\n6915    \n6916            if (close_paren_loc != UNKNOWN_LOCATION)\n6917              {\n6918            location_t combined_loc = make_location (token-&gt;location,\n</code></pre>\n\n<p>Skipping through a bunch of stuff (as it would make this answer unnecessarily long), the actual error occurs during overload resolution:</p>\n\n<pre><code>(gdb) \nadd_candidates (fns=0x7fffeffb0940, first_arg=first_arg@entry=0x0, args=args@entry=0x7fffeff9baf0, return_type=return_type@entry=0x0, explicit_targs=0x0, \n    template_only=false, conversion_path=0x0, access_path=0x0, flags=1, candidates=0x7fffffffd320, complain=3) at ../../gcc/cp/call.c:5302\n5302      for (; fns; fns = OVL_NEXT (fns))\n(gdb) \n5365    }\n(gdb) \nperform_overload_resolution (complain=3, any_viable_p=&lt;synthetic pointer&gt;, candidates=0x7fffffffd320, args=0x7fffeff9baf0, fn=&lt;optimized out&gt;)\n    at ../../gcc/cp/call.c:4036\n4036      *candidates = splice_viable (*candidates, false, any_viable_p);\n(gdb) \nbuild_new_function_call(tree_node*, vec&lt;tree_node*, va_gc, vl_embed&gt;**, bool, int) () at ../../gcc/cp/call.c:4111\n4111                          complain);\n(gdb) \n4115          if (complain &amp; tf_error)\n(gdb) \n4119          if (!any_viable_p &amp;&amp; candidates &amp;&amp; ! candidates-&gt;next\n(gdb) \n4120              &amp;&amp; (TREE_CODE (candidates-&gt;fn) == FUNCTION_DECL))\n(gdb) \n4121            return cp_build_function_call_vec (candidates-&gt;fn, args, complain);\n</code></pre>\n\n<p>The error occurs in <code>convert_arguments</code>:</p>\n\n<pre><code>(gdb) list 3611\n3606          allocated = make_tree_vector ();\n3607          params = &amp;allocated;\n3608        }\n3609    \n3610        nargs = convert_arguments (parm_types, params, fndecl, LOOKUP_NORMAL,\n3611                       complain);\n3612      if (nargs &lt; 0)\n3613        return error_mark_node;\n3614    \n3615      argarray = (*params)-&gt;address ();\n</code></pre>\n\n<p>Finally, the diagnostic is emitted in <code>error_num_args</code> because <code>if (TREE_CODE (TREE_TYPE (fndecl)) == METHOD_TYPE)</code> is false. </p>\n"}], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1726, "favorite_count": 4, "answer_count": 2, "score": 24, "last_activity_date": 1496863549, "creation_date": 1496857604, "last_edit_date": 1496858894, "question_id": 44419508, "link": "https://stackoverflow.com/questions/44419508/why-does-the-compiler-not-give-an-ambiguous-reference-error", "title": "Why does the compiler not give an ambiguous reference error?", "body": "<p>With reference to the following code </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;tuple&gt;\n#include &lt;string&gt;\n#include &lt;type_traits&gt;\n\nusing std::cout;\nusing std::endl;\nusing std::string;\n\ntemplate &lt;typename... Args&gt;\nvoid bar(Args&amp;&amp;...) {}\n\nint change(const string&amp;) { return 1; }\ndouble change(int) { return 1.0; }\n\nint main() {\n    // bar(1, 2.0, static_cast&lt;int(*)(const string&amp;)&gt;(&amp;change));\n    bar(1, 2.0, &amp;change);\n    return 0;\n}\n</code></pre>\n\n<p>I understand that the error in the above code is that the reference to the <code>change</code> function is ambiguous (which is why the commented line works), but then why does the compiler give this error message?</p>\n\n<pre><code>test.cpp:17:5: error: no matching function for call to 'bar'\n    bar(1, 2.0, &amp;change);\n    ^~~\ntest.cpp:11:6: note: candidate function not viable: requires 2 arguments, but 3 were\n      provided\nvoid bar(Args&amp;&amp;...) {}\n     ^\n1 error generated.\n</code></pre>\n\n<p>This happens both on gcc (>5) as well as clang (<code>Apple LLVM version 8.0.0 (clang-800.0.42.1)</code>)</p>\n\n<p>I am just curious as to why <strong>both</strong> the compilers do not just say that the reference is ambiguous.  I feel like it has something to do with how template instantiations work in C++ but I am not sure of the exact reason.</p>\n"}, {"tags": ["c++", "return", "unique-ptr"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1496857184, "post_id": 44419379, "comment_id": 75837319, "body": "Is there a reason <code>pb_req</code> is marked as <code>const</code>?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496857232, "post_id": 44419379, "comment_id": 75837342, "body": "You might have to remove the <code>const</code>, but you can <code>return std::move(pb_req);</code> OTOH, if you want to do this, you probably really just want to do <code>void RequestConverter::SetReg(const Req &amp;pb_req, ...)</code>"}, {"owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "edited": false, "score": 0, "creation_date": 1496857349, "post_id": 44419379, "comment_id": 75837400, "body": "You probably might just want to pass a reference to a Req-object?"}, {"owner": {"reputation": 68, "user_id": 6870136, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-E0KzNVywQyg/AAAAAAAAAAI/AAAAAAAAACE/GkPG6zXxpnI/photo.jpg?sz=128", "display_name": "Oguz Kaan Agac", "link": "https://stackoverflow.com/users/6870136/oguz-kaan-agac"}, "edited": false, "score": 1, "creation_date": 1496876573, "post_id": 44419379, "comment_id": 75846633, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4316727/returning-unique-ptr-from-functions\">Returning unique_ptr from functions</a>"}], "answers": [{"comments": [{"owner": {"reputation": 247, "user_id": 4382999, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/468276b3793b40ec08528ad81092b2ef?s=128&d=identicon&r=PG", "display_name": "Ted", "link": "https://stackoverflow.com/users/4382999/ted"}, "edited": false, "score": 0, "creation_date": 1496858775, "post_id": 44419475, "comment_id": 75838164, "body": "Thanks for the quick reply. I removed the const: <a href=\"https://pastebin.com/mZw26QGk\" rel=\"nofollow noreferrer\">pastebin.com/mZw26QGk</a>    Here is caller: <a href=\"https://pastebin.com/U9vX5yf9\" rel=\"nofollow noreferrer\">pastebin.com/U9vX5yf9</a>   I got this error: <a href=\"https://pastebin.com/4BP6Du74\" rel=\"nofollow noreferrer\">pastebin.com/4BP6Du74</a>"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 247, "user_id": 4382999, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/468276b3793b40ec08528ad81092b2ef?s=128&d=identicon&r=PG", "display_name": "Ted", "link": "https://stackoverflow.com/users/4382999/ted"}, "edited": false, "score": 0, "creation_date": 1496859032, "post_id": 44419475, "comment_id": 75838298, "body": "Two things, 1. you don&#39;t have to return a local value in a function by <code>std::move()</code>ing it, its an anti pattern, it just so happens that in this case it does not make a difference as the standard does not allow elision from function parameters (and that too is just probably because someone has not implemented it yet <a href=\"https://stackoverflow.com/questions/43163801/why-does-for-each-return-function-by-move\" title=\"why does for each return function by move\">stackoverflow.com/questions/43163801/&hellip;</a>).  Just return if by value, and it will be treated as an rvalue implicitly"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 247, "user_id": 4382999, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/468276b3793b40ec08528ad81092b2ef?s=128&d=identicon&r=PG", "display_name": "Ted", "link": "https://stackoverflow.com/users/4382999/ted"}, "edited": false, "score": 0, "creation_date": 1496859169, "post_id": 44419475, "comment_id": 75838366, "body": "2. What you are doing after calling the function is attaching it a callback with the <code>-&gt;action()</code> method, this presumably returns a functor, or a reference or a copy.  And using this to initialize the variable on the left hand side of the expression tries to get the lambda that you have passed to the <code>-&gt;action()</code> method to be copied, but this is not possible since you have moved a value into the lambda in the capture list.  And when you move a value into a lambda it cannot be copied anymore.  Let me know if something still does not make sense"}, {"owner": {"reputation": 247, "user_id": 4382999, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/468276b3793b40ec08528ad81092b2ef?s=128&d=identicon&r=PG", "display_name": "Ted", "link": "https://stackoverflow.com/users/4382999/ted"}, "edited": false, "score": 0, "creation_date": 1496868751, "post_id": 44419475, "comment_id": 75843639, "body": "Here is updated code: <a href=\"https://pastebin.com/iUeRJKS4\" rel=\"nofollow noreferrer\">pastebin.com/iUeRJKS4</a>  I got linker error: <a href=\"https://pastebin.com/Wakr7zWW\" rel=\"nofollow noreferrer\">pastebin.com/Wakr7zWW</a>  I wonder what I missed.  Thanks"}, {"owner": {"reputation": 247, "user_id": 4382999, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/468276b3793b40ec08528ad81092b2ef?s=128&d=identicon&r=PG", "display_name": "Ted", "link": "https://stackoverflow.com/users/4382999/ted"}, "edited": false, "score": 0, "creation_date": 1496882620, "post_id": 44419475, "comment_id": 75848220, "body": "Here is the gcc version I am using: gcc (Ubuntu 5.3.1-14ubuntu2) 5.3.1 20160413"}, {"owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "reply_to_user": {"reputation": 247, "user_id": 4382999, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/468276b3793b40ec08528ad81092b2ef?s=128&d=identicon&r=PG", "display_name": "Ted", "link": "https://stackoverflow.com/users/4382999/ted"}, "edited": false, "score": 0, "creation_date": 1496902536, "post_id": 44419475, "comment_id": 75853852, "body": "@Ted the linker error seems to be unrelated to the error you have talked about in your post.  That has to do with some <code>hbase::</code> function not being compiled."}, {"owner": {"reputation": 247, "user_id": 4382999, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/468276b3793b40ec08528ad81092b2ef?s=128&d=identicon&r=PG", "display_name": "Ted", "link": "https://stackoverflow.com/users/4382999/ted"}, "edited": false, "score": 0, "creation_date": 1496945173, "post_id": 44419475, "comment_id": 75883082, "body": "Yeah - different problem."}], "tags": [], "owner": {"reputation": 19270, "user_id": 5501675, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9ea71bcc6b5c512a7d15da82db05f2ab?s=128&d=identicon&r=PG&f=1", "display_name": "Curious", "link": "https://stackoverflow.com/users/5501675/curious"}, "is_accepted": false, "score": 0, "last_activity_date": 1496857475, "creation_date": 1496857475, "answer_id": 44419475, "question_id": 44419379, "link": "https://stackoverflow.com/questions/44419379/returning-unique-ptr-which-is-function-parameter/44419475#44419475", "title": "Returning unique_ptr which is function parameter", "body": "<p>The <code>unique_ptr</code> copy constructor is marked as deleted, i.e. the following</p>\n\n<pre><code>unique_ptr(const unique_ptr&amp;) = delete;\n</code></pre>\n\n<p>And when you return a <code>const unique_ptr&lt;Req&gt;</code> from your function, the return value is treated as an rvalue, and therefore the exact match for a constructor if available would be </p>\n\n<pre><code>unique_ptr(const unique_ptr&amp;&amp;);\n</code></pre>\n\n<p>The move constructor does not match <code>const unique_ptr&lt;Req&gt;&amp;&amp;</code> because it requires a non <code>const</code> rvalue reference.  And so the closest match is the copy constructor which is deleted, therefore this does not work. </p>\n\n<p>But the question you should be asking yourself is, why do you want to mark the <code>unique_ptr</code> to be const in the first place?  A <code>const</code> <code>unique_ptr</code> means that the pointer is const, and not the pointed to thing.  If you want a <code>unique_ptr</code> to const, you should do <code>unique_ptr&lt;const Req&gt;</code> instead.  </p>\n"}], "owner": {"reputation": 247, "user_id": 4382999, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/468276b3793b40ec08528ad81092b2ef?s=128&d=identicon&r=PG", "display_name": "Ted", "link": "https://stackoverflow.com/users/4382999/ted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1121, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496857475, "creation_date": 1496857139, "question_id": 44419379, "link": "https://stackoverflow.com/questions/44419379/returning-unique-ptr-which-is-function-parameter", "title": "Returning unique_ptr which is function parameter", "body": "<p>I have the following method:</p>\n\n<pre><code>std::unique_ptr&lt;Req&gt; RequestConverter::SetReg(\n    const std::unique_ptr&lt;Req&gt; pb_req, ...) {\n</code></pre>\n\n<p>I want to return parameter pb_req from the above method.\nI get this error (with or without std::move):</p>\n\n<pre><code>error: call to deleted constructor of 'std::unique_ptr&lt;Req&gt;'\n</code></pre>\n\n<p>What's recommended approach ?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "arrays", "function", "multidimensional-array", "parameters"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1496859389, "post_id": 44419371, "comment_id": 75838478, "body": "Off topic: The <code>typedef struct { ... } roundKey;</code> trick isn&#39;t needed in C++. Plain old <code>struct roundKey { ... };</code> does the deed for you."}, {"owner": {"reputation": 171, "user_id": 1189410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d84c2a7a87d246b13493ef788c17890?s=128&d=identicon&r=PG", "display_name": "Jussi Hietanen", "link": "https://stackoverflow.com/users/1189410/jussi-hietanen"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1496861465, "post_id": 44419371, "comment_id": 75839646, "body": "Thank you @user4581301 ! Yes, I coded much more C and C++ is rather new for me."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 1189410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d84c2a7a87d246b13493ef788c17890?s=128&d=identicon&r=PG", "display_name": "Jussi Hietanen", "link": "https://stackoverflow.com/users/1189410/jussi-hietanen"}, "edited": false, "score": 0, "creation_date": 1496858948, "post_id": 44419497, "comment_id": 75838254, "body": "Well thank you ! That is nice to hear. I think I will go with my way though, as I only need to pass my &quot;ugly&quot; struct only to a couple of functions."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 171, "user_id": 1189410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d84c2a7a87d246b13493ef788c17890?s=128&d=identicon&r=PG", "display_name": "Jussi Hietanen", "link": "https://stackoverflow.com/users/1189410/jussi-hietanen"}, "edited": false, "score": 0, "creation_date": 1496865820, "post_id": 44419497, "comment_id": 75842140, "body": "@JussiHietanen: I&#39;m sure things will work out. That said, evil always starts with only a &quot;couple of functions&quot;. Defensive coding practices would say that we should use designs that are resilient to unknown future needs and scope creep."}], "tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": false, "score": 2, "last_activity_date": 1496857567, "creation_date": 1496857567, "answer_id": 44419497, "question_id": 44419371, "link": "https://stackoverflow.com/questions/44419371/passing-3d-array-as-parameter-into-function-in-c14-the-right-way/44419497#44419497", "title": "Passing 3D array as parameter into function in C++14 the right way", "body": "<p>Au contraire, I think you are doing it in one of the best possible ways, I'd just rearrange to make that a full-fledged class. That way we can easily pass it around, add some nice accessor methods to simplify the code, and otherwise do our best to abstract away the 3D nature of the array from most of the code.</p>\n\n<pre><code>class RoundKey {\n public:\n  uint8_t rk[11][4][4];\n  uint8_t&amp; operator()(int x, int y, int z){\n    return rk[x][y][z];\n  }\n};\n\nvoid addKey(RoundKey &amp;rk, ....){\n  some_unsigned_char ^= rk(foo,bar,i);\n}\n</code></pre>\n\n<p>(Rearrange indices as appropriate.)</p>\n\n<p>Given the simplicity of the class, the compiler's likely to compile it to something that is very similar, if not identical, to what passing the full 3D array around would have given.</p>\n"}], "owner": {"reputation": 171, "user_id": 1189410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6d84c2a7a87d246b13493ef788c17890?s=128&d=identicon&r=PG", "display_name": "Jussi Hietanen", "link": "https://stackoverflow.com/users/1189410/jussi-hietanen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496857851, "creation_date": 1496857111, "last_edit_date": 1496857851, "question_id": 44419371, "link": "https://stackoverflow.com/questions/44419371/passing-3d-array-as-parameter-into-function-in-c14-the-right-way", "title": "Passing 3D array as parameter into function in C++14 the right way", "body": "<p>I need some help, I need to pass a rijndael round key into a function as a parameter. The round key is a 3D array which looks like this:</p>\n\n<pre><code>unsigned char rk[11][4][4];\n</code></pre>\n\n<p>Now I need to input this into a function and make some binary operations to it (so the parameter should be editable). How do I do it the right way? The way I did it was to put it inside a struct and pass the struct to the function. But it is ugly. So now my code looks like this:</p>\n\n<pre><code>typedef struct{\n  unsigned char rk[11][4][4];\n}roundKey;\n\nvoid addKey(roundKey* rk, ....)\n{\n  some_unsigned_char ^= rk-&gt;rk[foo][bar][i];\n}\n</code></pre>\n\n<p>It is ugly and I would like to do it the right way. How should I do it?</p>\n"}, {"tags": ["c++", "scientific-notation", "narrowing"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 5, "creation_date": 1496856967, "post_id": 44419302, "comment_id": 75837195, "body": "You do know that C++ does not have an exponentiation operator? <code>^</code> is not doing what you want it to do."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496857035, "post_id": 44419302, "comment_id": 75837241, "body": "As the error explains, scientific notation produces <code>double</code>s. If you are sure your values are representable as <code>int</code>, you can just cast them to <code>int</code>."}, {"owner": {"reputation": 111, "user_id": 5786257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799340023b6dbcc22e540aa1ddec9938?s=128&d=identicon&r=PG&f=1", "display_name": "Gytis", "link": "https://stackoverflow.com/users/5786257/gytis"}, "edited": false, "score": 1, "creation_date": 1496859121, "post_id": 44419302, "comment_id": 75838347, "body": "@NeilButterworth Yes, I know that after doing the example above. I thought that it might be useful to other noobs like me who might stumble upon this question later so wrote it up as well."}], "answers": [{"comments": [{"owner": {"reputation": 15990, "user_id": 417197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb4633eee192020baee9447a8c0976c1?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/417197/andr%c3%a9"}, "edited": false, "score": 0, "creation_date": 1496857377, "post_id": 44419373, "comment_id": 75837413, "body": "Can you clarify why is it not a good idea? In my view 3e6 has the advantage that it is easier to distinguish from 3e7 than distinguishing 3000000 from 30000000. Of course, 3&#39;000&#39;000 is the c++14 way to do it..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "reply_to_user": {"reputation": 15990, "user_id": 417197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb4633eee192020baee9447a8c0976c1?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/417197/andr%c3%a9"}, "edited": false, "score": 4, "creation_date": 1496857507, "post_id": 44419373, "comment_id": 75837487, "body": "@Andre Because things like <code>int(3e21)</code> compile without warning, but almost certainly don&#39;t do what you are expecting."}, {"owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "reply_to_user": {"reputation": 15990, "user_id": 417197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb4633eee192020baee9447a8c0976c1?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/417197/andr%c3%a9"}, "edited": false, "score": 1, "creation_date": 1496858413, "post_id": 44419373, "comment_id": 75837991, "body": "@Andre Telling the compiler to shut up with a cast is never a good idea. It usually hides the problem but does not fix it."}, {"owner": {"reputation": 111, "user_id": 5786257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799340023b6dbcc22e540aa1ddec9938?s=128&d=identicon&r=PG&f=1", "display_name": "Gytis", "link": "https://stackoverflow.com/users/5786257/gytis"}, "reply_to_user": {"reputation": 15990, "user_id": 417197, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb4633eee192020baee9447a8c0976c1?s=128&d=identicon&r=PG", "display_name": "Andr&#233;", "link": "https://stackoverflow.com/users/417197/andr%c3%a9"}, "edited": false, "score": 1, "creation_date": 1496859672, "post_id": 44419373, "comment_id": 75838620, "body": "I have the same opinion as @Andre and thought that there must be a better way without getting confused by all the zeroes."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "is_accepted": false, "score": 3, "last_activity_date": 1496857113, "creation_date": 1496857113, "answer_id": 44419373, "question_id": 44419302, "link": "https://stackoverflow.com/questions/44419302/how-to-define-an-integer-vector-containing-scientific-notation-correctly-in-c/44419373#44419373", "title": "How to define an integer vector containing scientific notation correctly in C++?", "body": "<p>If you insist on using that notation, you can perform an explicit cast to shut the compiler up, but it's not a good idea:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main () { std::vector&lt;int&gt; N = {int(3e6), int(4e6)}; }\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 5786257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799340023b6dbcc22e540aa1ddec9938?s=128&d=identicon&r=PG&f=1", "display_name": "Gytis", "link": "https://stackoverflow.com/users/5786257/gytis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1496857164, "creation_date": 1496856881, "last_edit_date": 1496857164, "question_id": 44419302, "link": "https://stackoverflow.com/questions/44419302/how-to-define-an-integer-vector-containing-scientific-notation-correctly-in-c", "title": "How to define an integer vector containing scientific notation correctly in C++?", "body": "<p>The code</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main () { std::vector&lt;int&gt; N = {3e6, 4e6}; }\n</code></pre>\n\n<p>Gives an error</p>\n\n<pre><code>error: narrowing conversion of \u20183.0e+6\u2019 from \u2018double\u2019 to \u2018int\u2019 inside { } [-Wnarrowing]|||.\n</code></pre>\n\n<p>Whereas </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nint main () {\n   std::vector&lt;int&gt; N = {3*10^6, 4*10^6};\n   for (int n: N ){ std::cout &lt;&lt; n &lt;&lt; std::endl; }\n}\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>24\n46.\n</code></pre>\n\n<p>How to define this vector as an integer vector correctly?</p>\n\n<p>If have found while writing this question that setting</p>\n\n<pre><code>int n1 = 3e6, n2 = 4e6;\nvector&lt;int&gt; N = {n1, n2};\n</code></pre>\n\n<p>does work, but is there a better way? The type is still converted from double to int in declarations of n1 and n2.</p>\n"}, {"tags": ["java", "android", "c++", "opencv", "java-native-interface"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 6419129, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/53b266a52d0441492fd5fd551d37c650?s=128&d=identicon&r=PG&f=1", "display_name": "Jt1995", "link": "https://stackoverflow.com/users/6419129/jt1995"}, "edited": false, "score": 0, "creation_date": 1496913244, "post_id": 44422873, "comment_id": 75860479, "body": "This is what i get with &quot;getContext().getApplicationInfo().nativeLibraryDir &quot; : /data/app/com.example.jt1995.provaemo-1/lib/arm"}, {"owner": {"reputation": 157, "user_id": 6419129, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/53b266a52d0441492fd5fd551d37c650?s=128&d=identicon&r=PG&f=1", "display_name": "Jt1995", "link": "https://stackoverflow.com/users/6419129/jt1995"}, "edited": false, "score": 0, "creation_date": 1496914342, "post_id": 44422873, "comment_id": 75861250, "body": "Another question, u wrote about &quot;Ximgproc-native.so&quot;,in my folder project i have &quot;jniLibs&quot; folder with libs like &quot;libopencv_ximgproc.a&quot; but i wrote &quot;.so&quot;,mine is &quot;.a&quot; @AlexCohn"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "reply_to_user": {"reputation": 157, "user_id": 6419129, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/53b266a52d0441492fd5fd551d37c650?s=128&d=identicon&r=PG&f=1", "display_name": "Jt1995", "link": "https://stackoverflow.com/users/6419129/jt1995"}, "edited": false, "score": 0, "creation_date": 1496917909, "post_id": 44422873, "comment_id": 75863773, "body": "In the end, you need a <i>shared library</i> which is &quot;.so&quot;. You can use <i>static libraries</i> (&quot;.a&quot;) to build a shared library, but more often than not, these static libraries are a cause of confusion. If you use <code>ndk-build</code> to build &quot;libopencv_ximgproc.a&quot;, you can simply change $(BUILD_STATIC_LIBRARY) to $(BUILD_SHARED_LIBRARY) in an <b>Android.mk</b> file."}], "tags": [], "owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "is_accepted": false, "score": 1, "last_activity_date": 1496918017, "last_edit_date": 1496918017, "creation_date": 1496870048, "answer_id": 44422873, "question_id": 44419188, "link": "https://stackoverflow.com/questions/44419188/cannot-resolve-corresponding-jni-function-opencv-android/44422873#44422873", "title": "Cannot resolve corresponding jni function opencv Android", "body": "<p>As I explained <a href=\"https://stackoverflow.com/questions/34521148/how-do-you-add-an-existing-so-library-to-an-android-studio-project#comment56815071_34521148\">elsewhere</a>, don't expect Android Studio to resolve magically the native method declarations into a library that is not built with gradle in integrated <strong>externalNativeBuild</strong>.</p>\n\n<p>You can simply ignore this error message: your APK will still install the prebuilt library, and the native methods will be resolved at run time, even if Android Studio marks them red.</p>\n\n<p>You can add <code>@SuppressWarnings(\"JniMissingFunction\")</code> annotation for this method, or for the entire class:</p>\n\n<pre><code>@SuppressWarnings(\"JniMissingFunction\")\npublic class Ximgproc {\n</code></pre>\n\n<p>or configure this kind of Lint inspections for the given project, or for all projects:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yg8jA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yg8jA.png\" alt=\"Preferences/Editor/Inspections\"></a></p>\n\n<p>But this does not resolve your runtime problem. You presumably have built your C++ code to produce a <em>native shared library</em>, say its name is <strong>libXimgproc-native.so</strong>. If it is packed correctly into your APK, it will be extracted to <code>/data/app-lib/com.example.jt1995.provaemo/</code> (you can check this path with <code>getContext().getApplicationInfo().nativeLibraryDir</code>).</p>\n\n<p>Your Java code should load this library before it tries to call the native methods of the <strong>org.opencv.ximgproc.Ximgproc</strong> class:</p>\n\n<pre><code>System.load(\"Ximgproc-native\");\n</code></pre>\n\n<p>If all above assumptions are correct, the linker did not find an exported function in that library that implements the <strong>createSuperpixelSLIC_0</strong> native method. It tried both <code>Java_org_opencv_ximgproc_Ximgproc_createSuperpixelSLIC_10</code> and <code>Java_org_opencv_ximgproc_Ximgproc_createSuperpixelSLIC_10__JIIF</code>.</p>\n\n<p>To check which methods are exported by the library, you can use the <strong>nm</strong> tool which is part of the NDK gcc toolchain. E.g. on my Mac this executable can be found at <code>~/Library/Android/sdk/ndk-bundle/toolchains/arm-linux-androideabi-4.9/prebuilt/darwin-x86_64/bin/arm-linux-androideabi-nm</code>.</p>\n\n<p>Run <code>\u2026nm -D Ximgproc-native.so</code> and it will list, with <strong>T</strong>, all exported functions of your library.</p>\n\n<p>I believe you will not find your function in this list. Maybe, the name is slightly wrong. Maybe, you set CFLAGS to <strong>-fvisibility=hidden</strong>, and did not explicitly declare the function as <code>JNIEXPORT</code> (or <code>__attribute__ ((visibility (\"default\")))</code>). Maybe, the C++ function is not declared with <code>extern \"C\"</code>, and its name is mangled by the compiler.</p>\n\n<p>If you use static libraries (<strong>xxx.a</strong>) as intermediates to assemble the resulting shared library, you should know that the linker can throw away unused external functions. In such case, using <code>LOCAL_WHOLE_STATIC_LIBRARIES</code> instead of <code>LOCAL_STATIC_LIBRARIES</code> may help.</p>\n"}], "owner": {"reputation": 157, "user_id": 6419129, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/53b266a52d0441492fd5fd551d37c650?s=128&d=identicon&r=PG&f=1", "display_name": "Jt1995", "link": "https://stackoverflow.com/users/6419129/jt1995"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1283, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1496918017, "creation_date": 1496856471, "last_edit_date": 1496856630, "question_id": 44419188, "link": "https://stackoverflow.com/questions/44419188/cannot-resolve-corresponding-jni-function-opencv-android", "title": "Cannot resolve corresponding jni function opencv Android", "body": "<p>this is where i get error.I loaded correctly opencv library but i get this error.If i go in the ximgproc all native methods are red marked with \"Cannot resolve corresponding jni function name_function\".How can i resolve?</p>\n\n<pre><code>protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n    super.onActivityResult(requestCode, resultCode, data);\n\n    if (requestCode == PICK_IMAGE_REQUEST &amp;&amp; resultCode == RESULT_OK &amp;&amp; data != null &amp;&amp; data.getData() != null) {\n\n        Uri uri = data.getData();\n        try {\n            Bitmap bitmap = MediaStore.Images.Media.getBitmap(getContentResolver(), uri);\n            //Log.i(\"prova\",uri.toString());\n            ImageView imageView = (ImageView) findViewById(R.id.imageView);\n           // imageView.setImageBitmap(bitmap);\n            Mat g=new Mat(bitmap.getHeight(),bitmap.getWidth(), CvType.CV_8UC1);\n            Utils.bitmapToMat(bitmap,g,true);\n            SuperpixelSLIC x=Ximgproc.createSuperpixelSLIC(g,Ximgproc.SLIC,100,3);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>and this is the error that i get:</p>\n\n<pre><code>06-07 19:24:01.370 21090-21090/com.example.jt1995.provaemo E/art: No implementation found for long org.opencv.ximgproc.Ximgproc.createSuperpixelSLIC_0(long, int, int, float) (tried Java_org_opencv_ximgproc_Ximgproc_createSuperpixelSLIC_10 and Java_org_opencv_ximgproc_Ximgproc_createSuperpixelSLIC_10__JIIF)\n06-07 19:24:01.370 21090-21090/com.example.jt1995.provaemo E/AndroidRuntime: FATAL EXCEPTION: main\n                                                                             Process: com.example.jt1995.provaemo, PID: 21090\n                                                                             java.lang.UnsatisfiedLinkError: No implementation found for long org.opencv.ximgproc.Ximgproc.createSuperpixelSLIC_0(long, int, int, float) (tried Java_org_opencv_ximgproc_Ximgproc_createSuperpixelSLIC_10 and Java_org_opencv_ximgproc_Ximgproc_createSuperpixelSLIC_10__JIIF)\n                                                                                 at org.opencv.ximgproc.Ximgproc.createSuperpixelSLIC_0(Native Method)\n                                                                                 at org.opencv.ximgproc.Ximgproc.createSuperpixelSLIC(Ximgproc.java:452)\n                                                                                 at com.example.jt1995.provaemo.MainActivity.onActivityResult(MainActivity.java:108)\n                                                                                 at android.app.Activity.dispatchActivityResult(Activity.java:6303)\n                                                                                 at android.app.ActivityThread.deliverResults(ActivityThread.java:3818)\n                                                                                 at android.app.ActivityThread.handleSendResult(ActivityThread.java:3865)\n                                                                                 at android.app.ActivityThread.access$1700(ActivityThread.java:159)\n                                                                                 at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1412)\n                                                                                 at android.os.Handler.dispatchMessage(Handler.java:102)\n                                                                                 at android.os.Looper.loop(Looper.java:135)\n                                                                                 at android.app.ActivityThread.main(ActivityThread.java:5569)\n                                                                                 at java.lang.reflect.Method.invoke(Native Method)\n                                                                                 at java.lang.reflect.Method.invoke(Method.java:372)\n                                                                                 at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:931)\n                                                                                 at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:726)\n</code></pre>\n"}, {"tags": ["c++", "lambda", "c++14", "smart-pointers", "weak-references"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496856411, "post_id": 44419105, "comment_id": 75836902, "body": "<code>std::make_shared&lt;std::function&lt;void()&gt;&gt;([]{ my lambda; });</code>?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 7, "creation_date": 1496856423, "post_id": 44419105, "comment_id": 75836906, "body": "Using smart pointers for <code>std::function</code> seems unnecessary and overly complicated. <i>Why</i> do you want to use <code>std::shared_ptr</code> for this? <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\"><code>std::function</code></a> is copyable. And if you&#39;re worried about losing a reference to the original lambda function, then this won&#39;t help if the lambda object goes out of scope and is destructed."}, {"owner": {"reputation": 977, "user_id": 415652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33210e01b218ad670ef664bf8af57a2d?s=128&d=identicon&r=PG", "display_name": "Reid Rankin", "link": "https://stackoverflow.com/users/415652/reid-rankin"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496856843, "post_id": 44419105, "comment_id": 75837130, "body": "@Someprogrammerdude Because the lambda may have captured a <code>shared_ptr</code> to another object, and I <i>don&#39;t</i> want to have a strong reference to it."}, {"owner": {"reputation": 977, "user_id": 415652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33210e01b218ad670ef664bf8af57a2d?s=128&d=identicon&r=PG", "display_name": "Reid Rankin", "link": "https://stackoverflow.com/users/415652/reid-rankin"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496857254, "post_id": 44419105, "comment_id": 75837357, "body": "@Justin I may be wrong, but it looks like that instantiates a lambda on the stack and then passes its address to make_shared. Which would result in bad things (tm) when the shared_ptr went out of scope, or was dereferenced after the stack was cleared."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 2, "creation_date": 1496857399, "post_id": 44419105, "comment_id": 75837427, "body": "@ReidRankin You need to learn how lambdas work. A lambda <code>[captureList](args...) { body }</code> is basically syntactic sugar for <code>struct lambda { captureList; &#47;* as members of the struct *&#47; auto operator()(args...) const { body } };</code>. In other words, you can view a lambda as an object of a type along those lines. When you copy an object, it copies its members. There is no address being passed"}, {"owner": {"reputation": 977, "user_id": 415652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33210e01b218ad670ef664bf8af57a2d?s=128&d=identicon&r=PG", "display_name": "Reid Rankin", "link": "https://stackoverflow.com/users/415652/reid-rankin"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496862669, "post_id": 44419105, "comment_id": 75840328, "body": "@Justin There&#39;s no constructor for shared_ptr that takes anything but a pointer, so it must be getting coerced somehow."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496862814, "post_id": 44419105, "comment_id": 75840400, "body": "@ReidRankin This isn&#39;t a constructor to <code>shared_ptr</code>, this is <code>std::make_shared</code>. Go read the <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/make_shared\" rel=\"nofollow noreferrer\">documentation on <code>std::make_shared</code></a>. <code>std::make_shared</code> constructs the object on memory allocated from the heap, and passes the pointer to the allocated memory into <code>std::shared_ptr</code>"}, {"owner": {"reputation": 977, "user_id": 415652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33210e01b218ad670ef664bf8af57a2d?s=128&d=identicon&r=PG", "display_name": "Reid Rankin", "link": "https://stackoverflow.com/users/415652/reid-rankin"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496863989, "post_id": 44419105, "comment_id": 75841112, "body": "@Justin Good point. But it looks like it should be creating an object of type std::function&lt;void()&gt; and passing the lambda as an argument to its constructor?"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496864028, "post_id": 44419105, "comment_id": 75841136, "body": "@ReidRankin Yes, that&#39;s exactly what happens"}, {"owner": {"reputation": 977, "user_id": 415652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33210e01b218ad670ef664bf8af57a2d?s=128&d=identicon&r=PG", "display_name": "Reid Rankin", "link": "https://stackoverflow.com/users/415652/reid-rankin"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496864073, "post_id": 44419105, "comment_id": 75841165, "body": "@Justin Oh, wait, std:function has a default copy constructor! Duh. So that explains why it works."}, {"owner": {"reputation": 977, "user_id": 415652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33210e01b218ad670ef664bf8af57a2d?s=128&d=identicon&r=PG", "display_name": "Reid Rankin", "link": "https://stackoverflow.com/users/415652/reid-rankin"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496864111, "post_id": 44419105, "comment_id": 75841195, "body": "@Justin Post that as an answer and I&#39;ll accept it."}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1496864123, "post_id": 44419105, "comment_id": 75841200, "body": "@ReidRankin The copy constructor isn&#39;t called; the object is constructed directly on the memory from the heap. Also, realize that this is approximately equivalent to <code>new std::function&lt;void()&gt;{ myLambda }</code>"}], "owner": {"reputation": 977, "user_id": 415652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33210e01b218ad670ef664bf8af57a2d?s=128&d=identicon&r=PG", "display_name": "Reid Rankin", "link": "https://stackoverflow.com/users/415652/reid-rankin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 957, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496856192, "creation_date": 1496856192, "question_id": 44419105, "link": "https://stackoverflow.com/questions/44419105/shared-ptr-to-lambda-function", "title": "shared_ptr to lambda function", "body": "<p>I have a class that registers lambda functions (as <code>std::function&lt;void()&gt;</code>) as callbacks for events it will generate. I'm using <code>shared_ptr</code> for memory management, and I need to be careful not to create reference cycles. I don't want the event vendor to own the callbacks, so it stores <code>std::weak_ptr&lt;std::function&lt;void()&gt;&gt;</code>.</p>\n\n<p>Unfortunately, I'm not sure how to make one of those! To make the owning <code>shared_ptr</code> instance, I need to pass in a pointer to an unowned, heap-allocated lambda. Is there a version of <code>new</code> for lambdas?</p>\n"}, {"tags": ["c++", "2d", "physics", "glm-math"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7358720, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ldtO8Q93JRw/AAAAAAAAAAI/AAAAAAAAARc/ThqV9DSh_B0/photo.jpg?sz=128", "display_name": "Tudor Lechintan", "link": "https://stackoverflow.com/users/7358720/tudor-lechintan"}, "edited": false, "score": 0, "creation_date": 1496856713, "post_id": 44419119, "comment_id": 75837065, "body": "This is only true if the ball&#39;s direction vector is perpendicular to the tangent between the ball and the obstacle."}], "tags": [], "owner": {"reputation": 3328, "user_id": 4821374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e32e968142f8750964d2370408cc4c53?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Brander", "link": "https://stackoverflow.com/users/4821374/rob-brander"}, "is_accepted": false, "score": 1, "last_activity_date": 1496856221, "creation_date": 1496856221, "answer_id": 44419119, "question_id": 44419093, "link": "https://stackoverflow.com/questions/44419093/ball-to-fixed-ball-collision/44419119#44419119", "title": "Ball to fixed ball collision", "body": "<p>You will need to invert the speed by negating it.</p>\n\n<pre><code>if (collision)\n  speed = speed * -1\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7358720, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ldtO8Q93JRw/AAAAAAAAAAI/AAAAAAAAARc/ThqV9DSh_B0/photo.jpg?sz=128", "display_name": "Tudor Lechintan", "link": "https://stackoverflow.com/users/7358720/tudor-lechintan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "closed_date": 1497312246, "answer_count": 1, "score": -3, "last_activity_date": 1496856441, "creation_date": 1496856144, "last_edit_date": 1496856441, "question_id": 44419093, "link": "https://stackoverflow.com/questions/44419093/ball-to-fixed-ball-collision", "closed_reason": "Needs details or clarity", "title": "Ball to fixed ball collision", "body": "<p>I am trying to implement balls that change their direction when they hit an obstacle(in this case a fixed ball). I can detect when a collision occurs but I don't know how to modify the direction of a ball once it hits an obstacle. Here's some code:</p>\n\n<pre><code>struct Vec2\n{\n    float x, y;\n};\n\nstruct Ball\n{\n     void onCollision(const Ball&amp; fixedBall)\n     {\n         // This function will be called when a collision occurs\n         // Speed will be constant, only direction needs to change\n     }\n\n     void update()\n     {\n         position += direction * speed; \n     }\n\n     Vec2 position, direction; // direction is a normalized vector\n     float speed, radius; \n};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1496855945, "post_id": 44419025, "comment_id": 75836662, "body": "In short: It&#39;s not possible. So just don&#39;t do it."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1496855948, "post_id": 44419025, "comment_id": 75836665, "body": "There is no way, use different names if you need to access outer scope variable"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 3, "creation_date": 1496855950, "post_id": 44419025, "comment_id": 75836667, "body": "Why would you write code like this?"}, {"owner": {"reputation": 428, "user_id": 5847906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Mq0Bm.png?s=128&g=1", "display_name": "Ayak973", "link": "https://stackoverflow.com/users/5847906/ayak973"}, "edited": false, "score": 0, "creation_date": 1496856068, "post_id": 44419025, "comment_id": 75836724, "body": "See <a href=\"https://stackoverflow.com/a/31937168/5847906\">stackoverflow.com/a/31937168/5847906</a>"}, {"owner": {"reputation": 1534, "user_id": 2641719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-fOFkOdZ8zZg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfbQ5kljjlVo-ToOWjhkKxVlseO8A/photo.jpg?sz=128", "display_name": "ThunderPhoenix", "link": "https://stackoverflow.com/users/2641719/thunderphoenix"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1496856400, "post_id": 44419025, "comment_id": 75836896, "body": "@CodyGray, Just curiousity :)"}], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 6007856, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-97QeRBs3SLo/AAAAAAAAAAI/AAAAAAAAABE/SMz_GMk8vDg/photo.jpg?sz=128", "display_name": "Dashlin Jeno", "link": "https://stackoverflow.com/users/6007856/dashlin-jeno"}, "is_accepted": false, "score": 0, "last_activity_date": 1496856469, "creation_date": 1496856469, "answer_id": 44419187, "question_id": 44419025, "link": "https://stackoverflow.com/questions/44419025/access-to-redefined-variables-inside-a-nested-block/44419187#44419187", "title": "Access to redefined variables inside a nested block", "body": "<p>Declare a new variable name, something like 'j' instead of 'i'. </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cout;\nint i = 10;\n\nint main() {\n     int i = 9;\n     {\n          int j = 8;\n          {\n                int j = 7;\n                cout &lt;&lt; j &lt;&lt; \"\\n\";   // j = 7\n                cout &lt;&lt; ::i &lt;&lt; \"\\n\"; // i = 10 (global i)\n\n                // How could we access to other \n       i declarations here?\n          }\n     }\n     return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 1534, "user_id": 2641719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-fOFkOdZ8zZg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfbQ5kljjlVo-ToOWjhkKxVlseO8A/photo.jpg?sz=128", "display_name": "ThunderPhoenix", "link": "https://stackoverflow.com/users/2641719/thunderphoenix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 133, "favorite_count": 0, "closed_date": 1496855975, "answer_count": 1, "score": 0, "last_activity_date": 1496856469, "creation_date": 1496855867, "question_id": 44419025, "link": "https://stackoverflow.com/questions/44419025/access-to-redefined-variables-inside-a-nested-block", "closed_reason": "Duplicate", "title": "Access to redefined variables inside a nested block", "body": "<p>Consider the program below:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing std::cout;\nint i = 10;\n\nint main() {\n     int i = 9;\n     {\n          int i = 8;\n          {\n                int i = 7;\n                cout &lt;&lt; i &lt;&lt; \"\\n\";   // i = 7\n                cout &lt;&lt; ::i &lt;&lt; \"\\n\"; // i = 10 (global i)\n\n                // How could we access to other i declarations here?\n          }\n     }\n     return 0;\n}\n</code></pre>\n\n<p>using <code>i</code> inside the nested block referes to the last declarations of <code>i</code>, because the latter hides the other declarations. In order to use the global <code>i</code> (the declarations outside the function main), we could use <code>::i</code></p>\n\n<p>I would like to know if there is a way to use the other decalarations of <code>i</code> inside the nested block.</p>\n"}, {"tags": ["c++", "string", "segmentation-fault"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496856029, "post_id": 44419009, "comment_id": 75836709, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should <a href=\"https://stackoverflow.com/posts/44419009/edit\">edit</a> your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 786, "user_id": 3885491, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fouLC.jpg?s=128&g=1", "display_name": "Falco Winkler", "link": "https://stackoverflow.com/users/3885491/falco-winkler"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496856109, "post_id": 44419009, "comment_id": 75836750, "body": "I debugged the program - please read the text i wrote below! Also, this is the minimal example i can reproduce it with, the original code is much longer."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1496856143, "post_id": 44419009, "comment_id": 75836767, "body": "Avoid <code>malloc</code>. Why not use <code>std::array</code> or <code>std::vector</code> instead ?"}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496856472, "post_id": 44419009, "comment_id": 75836929, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: You seem to overestimate the ability of the debugger to tell an inexperienced programmer what they&#39;re doing wrong."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496856519, "post_id": 44419009, "comment_id": 75836955, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: OP uses correctly its debugger, but internal of <code>std::string</code> is not necessary trivial. OP uses its allocator wrongly in fact."}], "answers": [{"comments": [{"owner": {"reputation": 786, "user_id": 3885491, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fouLC.jpg?s=128&g=1", "display_name": "Falco Winkler", "link": "https://stackoverflow.com/users/3885491/falco-winkler"}, "edited": false, "score": 0, "creation_date": 1496856689, "post_id": 44419082, "comment_id": 75837048, "body": "Thanks, that caused the issue."}, {"owner": {"reputation": 786, "user_id": 3885491, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fouLC.jpg?s=128&g=1", "display_name": "Falco Winkler", "link": "https://stackoverflow.com/users/3885491/falco-winkler"}, "edited": false, "score": 0, "creation_date": 1496856701, "post_id": 44419082, "comment_id": 75837057, "body": "Replacing the malloc with  new T[N]; fixed it"}], "tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": false, "score": 3, "last_activity_date": 1496856084, "creation_date": 1496856084, "answer_id": 44419082, "question_id": 44419009, "link": "https://stackoverflow.com/questions/44419009/string-member-variable-of-an-object-used-in-c-class-template-cannot-be-assigne/44419082#44419082", "title": "String member variable of an object used in C++ Class template cannot be assigned to", "body": "<p>Your program is crashing because you are accessing unconstructed <code>string</code> objects.</p>\n\n<p>When you use <code>malloc</code> to allocate memory, the memory is uninitialized and the objects you are trying to use have not been constructed.  This is Undefined Behavior and, in this case, is causing the crash.</p>\n"}], "owner": {"reputation": 786, "user_id": 3885491, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fouLC.jpg?s=128&g=1", "display_name": "Falco Winkler", "link": "https://stackoverflow.com/users/3885491/falco-winkler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1496856084, "creation_date": 1496855811, "question_id": 44419009, "link": "https://stackoverflow.com/questions/44419009/string-member-variable-of-an-object-used-in-c-class-template-cannot-be-assigne", "title": "String member variable of an object used in C++ Class template cannot be assigned to", "body": "<p>I wrote a class template for an array data structure like so:</p>\n\n<pre><code>#pragma once\n#include &lt;cstdlib&gt;\n\ntemplate&lt;typename T, unsigned int N&gt;\nclass CArray {\npublic:\n    CArray();\n    T&amp; operator [] (unsigned int index);\nprivate:\n    T *entries;\n};\n\ntemplate&lt;typename T, unsigned int N&gt;\nCArray&lt;T, N&gt;::CArray()\n{\n    entries = (T *)malloc(N*sizeof(T));\n}\n\ntemplate&lt;typename T, unsigned int N&gt;\nT&amp; CArray&lt;T, N&gt;::operator [] (unsigned int index) {\n    if (index &gt;= N) {\n        throw ;\n    } else {\n        return entries[index];\n    }\n}\n</code></pre>\n\n<p>I wrote a minimal wrapper class that stores string objects, like so:</p>\n\n<pre><code>#pragma once\n#include &lt;string&gt;\nusing namespace std;\n\nclass CEntry\n{\npublic:\n    CEntry();\n    const string &amp; getSymbol() const;\n    void setSymbol(string);\nprotected:\n    string m_value;\n};\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>#include \"CEntry.hpp\"\n\nCEntry::CEntry() : m_value(\"\"){\n}\n\nconst string &amp; CEntry::getSymbol() const {\n    return  m_value;\n}\n\nvoid CEntry::setSymbol(string value) {\n    m_value = value;\n}\n</code></pre>\n\n<p>When i execute the following main:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\n#include \"CEntry.hpp\"\n#include \"CArray.hpp\"\n\nint main(int argc, char** argv) {\n    CArray&lt;CEntry, 2000&gt; test;\n    test[0].setSymbol(\"asdf\");\n    cout &lt;&lt; test[0].getSymbol();\n}\n</code></pre>\n\n<p>The program crashes with a segmentation fault.\nThread 1 received signal SIGSEGV, Segmentation fault.\n0x00007ffad1783f2a in msvcrt!memmove () from C:\\WINDOWS\\System32\\msvcrt.dll</p>\n\n<p>I inspected the program and the crash happens directly in the line of CEntry, where m_value gets assigned to the passed value (in the setSymbol function).\nI am using eclipse on windows. I inspected the m_value variable before assignment and it shows suspect values, e.g. 13451671603782742029 for the string length? Could it be that the CEntry object was initialized but not it's member variables?</p>\n\n<p>I've tried researching but cannot figure out whats happening here, thanks in advance.</p>\n"}, {"tags": ["c++", "error-handling", "cin"], "comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1496854617, "post_id": 44418623, "comment_id": 75835975, "body": "If you want to read a line of input and then parse it, write code to do that. Instead, you&#39;ve written code that only accepts an integer."}], "answers": [{"tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 0, "last_activity_date": 1496854661, "creation_date": 1496854661, "answer_id": 44418675, "question_id": 44418623, "link": "https://stackoverflow.com/questions/44418623/how-do-i-use-input-if-the-user-entered-a-char-into-an-int/44418675#44418675", "title": "How do I use input if the user entered a char into an int?", "body": "<p>You just about need to read the individual chars (or strings) from the stream. Then determine whether it's actually a number or not. If it is, convert it (e.g., using <code>std::stoi</code>). If not, check whether it's the \"quit\" symbol, and if so go on to whatever else you need to do. If it's something else, you'd typically report the error, and if it's meant to be used interactively, probably give the user another chance to enter the right thing.</p>\n"}, {"tags": [], "owner": {"reputation": 498, "user_id": 3357248, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ujqnb.jpg?s=128&g=1", "display_name": "Sly_TheKing", "link": "https://stackoverflow.com/users/3357248/sly-theking"}, "is_accepted": true, "score": 0, "last_activity_date": 1496855002, "creation_date": 1496855002, "answer_id": 44418778, "question_id": 44418623, "link": "https://stackoverflow.com/questions/44418623/how-do-i-use-input-if-the-user-entered-a-char-into-an-int/44418778#44418778", "title": "How do I use input if the user entered a char into an int?", "body": "<p>use <code>std::string</code> to read array of characters, compare the string if it equals to your desired string for termination of the sequence and if not, convert it to int</p>\n\n<pre><code>std::vector &lt;int&gt; v;\nstd::string buffer;\n\nwhile(true){\n   std::cin &gt;&gt; buffer;\n\n   if(buffer == \"/\") break;\n\n   v.push_back(std::stoi(buffer));\n}\n</code></pre>\n\n<p>NOTE: if u try to enter characters that can't be converted there will be an error</p>\n\n<p>for more reference check out:\n<a href=\"http://en.cppreference.com/w/cpp/string/basic_string/stol\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/string/basic_string/stol</a></p>\n"}], "owner": {"reputation": 29, "user_id": 7943972, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UhlmFe0D6Yo/AAAAAAAAAAI/AAAAAAAAABE/a7C16MlruLQ/photo.jpg?sz=128", "display_name": "stance changer", "link": "https://stackoverflow.com/users/7943972/stance-changer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 44418778, "answer_count": 2, "score": -3, "last_activity_date": 1496855450, "creation_date": 1496854489, "last_edit_date": 1496855450, "question_id": 44418623, "link": "https://stackoverflow.com/questions/44418623/how-do-i-use-input-if-the-user-entered-a-char-into-an-int", "title": "How do I use input if the user entered a char into an int?", "body": "<p>I have a code in which I read ints into a vector.</p>\n\n<pre><code>vector &lt;int&gt; v;\n\nfor (int i; cin &gt;&gt; i;){\n    v.push_back(i);\n}\n</code></pre>\n\n<p>and to end the loop, the user must enter '/'. How would I do that?\nin other words, if the user enters a char into an int, how do I use the input?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1496854442, "post_id": 44418596, "comment_id": 75835872, "body": "It&#39;s called a <a href=\"http://en.cppreference.com/w/cpp/language/template_parameters#Non-type_template_parameter\" rel=\"nofollow noreferrer\"><i>non-type  template parameter</i></a>"}, {"owner": {"reputation": 441, "user_id": 6776860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6e7ab81e61389cca67d10c5c779777?s=128&d=identicon&r=PG&f=1", "display_name": "barcelona_delpy", "link": "https://stackoverflow.com/users/6776860/barcelona-delpy"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496854989, "post_id": 44418596, "comment_id": 75836171, "body": "@NathanOliver      how can i invoke the template function test?"}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1496855015, "creation_date": 1496855015, "answer_id": 44418779, "question_id": 44418596, "link": "https://stackoverflow.com/questions/44418596/whats-mean-of-templatetypename-t-t-in-c-templates/44418779#44418779", "title": "What&#39;s mean of template&lt;typename T, T*&gt; in c++ templates?", "body": "<p>Usage would be:</p>\n\n<pre><code>extern int global;\n\nint main()\n{\n    test&lt;int, &amp;global&gt;(10);\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/b2b3e1b097a5a947\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}], "owner": {"reputation": 441, "user_id": 6776860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e6e7ab81e61389cca67d10c5c779777?s=128&d=identicon&r=PG&f=1", "display_name": "barcelona_delpy", "link": "https://stackoverflow.com/users/6776860/barcelona-delpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "closed_date": 1496865739, "accepted_answer_id": 44418779, "answer_count": 1, "score": -2, "last_activity_date": 1496855015, "creation_date": 1496854383, "last_edit_date": 1496854524, "question_id": 44418596, "link": "https://stackoverflow.com/questions/44418596/whats-mean-of-templatetypename-t-t-in-c-templates", "closed_reason": "Needs details or clarity", "title": "What&#39;s mean of template&lt;typename T, T*&gt; in c++ templates?", "body": "<p>What's mean of <code>template&lt;typename T, T*&gt;</code> in c++ templates?\nAnd in what situation\uff0ci should use it\uff1f</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate&lt;typename T, T*&gt; \nvoid test(T a)\n{\n    cout &lt;&lt; \"test template\\n\";\n}\n\nint main(int argc, char **argv)\n{\n    test(10);\n    return 0;\n}\n</code></pre>\n\n<p>I got a compile error from above code.</p>\n\n<pre><code>./test.cpp: In function \u2018int main(int, char**)\u2019:\n./test.cpp:12: error: no matching function for call to \u2018test(int)\u2019\n</code></pre>\n\n<p>change <code>test(10);</code> to <code>test&lt;int, int*&gt;(10);</code>, still don't work.</p>\n"}, {"tags": ["c++", "performance", "logging", "real-time", "stringstream"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496854694, "post_id": 44418562, "comment_id": 75836012, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1500772810, "post_id": 44418562, "comment_id": 77484882, "body": "What formatting requirements do you have?"}, {"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1500773483, "post_id": 44418562, "comment_id": 77484975, "body": "how much memory do you have available to hold the logging information?"}], "answers": [{"comments": [{"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1500773649, "post_id": 45259064, "comment_id": 77484992, "body": "If you are doing real time, hhys last paragraph is dead on.   One allocation/deallocation of an array of fixed size buffers that you store your log message in, with a pointer to say what the next buffer is to be used is likely to be much faster."}], "tags": [], "owner": {"reputation": 164, "user_id": 7079892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab3641874cdfed343275c3b0c53a06b2?s=128&d=identicon&r=PG&f=1", "display_name": "hhy", "link": "https://stackoverflow.com/users/7079892/hhy"}, "is_accepted": false, "score": 1, "last_activity_date": 1500772524, "last_edit_date": 1500772524, "creation_date": 1500756488, "answer_id": 45259064, "question_id": 44418562, "link": "https://stackoverflow.com/questions/44418562/logging-using-c-stl-stringstream-with-real-time-performance-requirements/45259064#45259064", "title": "Logging using c++ stl stringstream with real-time performance requirements", "body": "<p>If you really like to use std::stringstream, you can create an array of std::stringstream and use it as your own ring buffer. Here is a very small example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n\nclass CyclicStreamer {\npublic:\n    CyclicStreamer(int _n, std::string _filename) : n(_n), cur(0), filename(_filename){\n        s = new std::stringstream [n];\n    };\n    ~CyclicStreamer() {\n        delete s;\n    };\n    void LogLine(int data) {\n        s[cur].str(std::string()); // clear the stringstream\n        s[cur] &lt;&lt; data &lt;&lt; std::endl;\n        cur =  (cur+1) % n;\n    }\n    void LogToFile(){\n        std::ofstream file;\n        file.open(filename.c_str());\n        for(int i=cur;i&lt;n;i++){\n            file &lt;&lt; s[i].str();\n        }\n        for(int i=0;i&lt;cur;i++){\n            file &lt;&lt; s[i].str();\n        }\n        file.close();\n    }\nprivate:\n    int n;\n    int cur;\n    std::string filename;\n    std::stringstream *s;\n};\n\nint main() {\n    CyclicStreamer cs = CyclicStreamer(10, \"log.txt\");\n    for(int i=0; i&lt;=20; i++){\n        cs.LogLine(i);\n    }\n    cs.LogToFile();\n    return 0;\n}\n</code></pre>\n\n<p>Do note that if you use the example here in your own project with a pretty large <code>m_max_num_lines</code>, you will get into trouble because you might end up using a lot more memories than expected because for each std::stringstream it takes a bit of memory itself. A better way of doing it is to allow each of them to store part of <code>m_max_num_lines</code>. Say, if <code>m_max_num_lines</code> is 1000, then you can have only 10 std::stringstream, each storing a maximum of 100 lines of log. When a std::stringstram has already stored 100 lines of log, <code>cur =  (cur+1) % n</code>. </p>\n\n<p>Do note that it would be much better if you can just use a char array and manage it by yourself. You save both memory and time, but as you said, you lose those built-in formatting features\uff0c although there're also very nice features of formatting a raw char array, e.g. <code>sprintf()</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 8126463, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213386381753124/picture?type=large", "display_name": "Orion Campbell", "link": "https://stackoverflow.com/users/8126463/orion-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500772524, "creation_date": 1496854264, "question_id": 44418562, "link": "https://stackoverflow.com/questions/44418562/logging-using-c-stl-stringstream-with-real-time-performance-requirements", "title": "Logging using c++ stl stringstream with real-time performance requirements", "body": "<p>I'm attempting to implement logging functionality in an application that is required to run in real-time (meaning, spending a few milliseconds writing to a file during execution of the main loop will significantly affect performance since we are interfacing with several systems that require low latency).  My current implementation logs a line into a stringstream object each millisecond, and then writes the resulting string to a file only upon shutdown:</p>\n\n<pre><code>class ControlDemo {\n  public:\n    ControlDemo();\n    ~ControlDemo();\n    void spin();\n    // Other public methods\n  private:\n    void logLine(std::vector&lt;double&gt; data);\n    void writeLogFile();\n    std::stringstream m_logged_data;\n    std::string m_log_filename;\n    bool m_continue_spinning;\n    // Other private methods\n};\n\nControlDemo::~ControlDemo() {\n  writeLogFile();  // write log data in RAM to a file\n}\n\nvoid ControlDemo::spin() {\n  while(m_continue_spinning){\n    // do stuff\n    logLine(data_to_log);\n    sleepRemainingTime();  // maintaining ~1ms loop rate\n  }\n}\n\nvoid ControlDemo::logLine(std::vector&lt;double&gt; data) {\n  m_logged_data &lt;&lt; getCurrentTime();\n  for (std::vector&lt;double&gt;::iterator it = data.begin(); it != data.end(); ++it)\n    m_logged_data &lt;&lt; ', ' &lt;&lt; *it;\n  m_logged_data &lt;&lt; std::endl;\n}\n\nvoid ControlDemo::writeLogFile() {\n  std::ofstream file;\n  file.open(m_log_file_path.c_str());\n\n  file &lt;&lt; m_logged_data.str();\n  file.close();\n  std::cerr &lt;&lt; \"Wrote log to \" &lt;&lt; m_log_file_path &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>My desire is to implement some type of buffering functionality whereby I can specify the maximum number of lines in my log, after which, the initial lines will be discarded (essentially a circular buffer).  In this way, I am not wasting a bunch of RAM and slowing down my application by continuing to accumulate logged data, when maybe only the last 20 seconds of data is important.  I attempted this by modifying the <code>logLine()</code> method as follows:</p>\n\n<pre><code>void ControlDemo::logLine(std::vector&lt;double&gt; data) {\n  static int line_num = 0;\n  if(line_num &lt; m_max_num_lines)\n    line_num++;\n  else  // discard first line before inserting next line\n    m_logged_data.ignore(1000,'\\n');  // move get ptr to next line\n\n  m_logged_data &lt;&lt; getCurrentTime();\n  for (std::vector&lt;double&gt;::iterator it = data.begin(); it != data.end(); ++it)\n    m_logged_data &lt;&lt; ', ' &lt;&lt; *it;\n  m_logged_data &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>However the <code>m_logged_data.str()</code> that is called in <code>writeLogFile()</code> still returns all logged data rather than just the last <code>m_max_num_lines</code>, which suggests that moving the stringstream get pointer with <code>ignore()</code> does not affect the size of the buffer used by the stringstream object or optimize the code in any of the ways that I intended.</p>\n\n<p>I feel like either I am missing something obvious about the <code>stringstream</code> class (why isn't there a <code>setBufferSize()</code>?? see <a href=\"https://stackoverflow.com/questions/1494182/setting-the-internal-buffer-used-by-a-standard-stream-pubsetbuf\">this</a>), or I should be using something else to manage the logging functionality.  If the latter, any suggestions on what class I should be using? One of the nice things about <code>stringstream</code> is all of the built-in formatting features, which I am using (although I didn't show it in the code snippets above). So, retaining those formatting capabilities would be nice if possible.</p>\n"}, {"tags": ["c++", "opengl", "glsl", "texture-mapping", "uv-mapping"], "comments": [{"owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "edited": false, "score": 3, "creation_date": 1496854423, "post_id": 44418506, "comment_id": 75835864, "body": "Probably your <code>uv_coords.w</code> is 0 which causes division by zero in <code>textureProj</code> which causes a NaN/inf."}, {"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 0, "creation_date": 1496858696, "post_id": 44418506, "comment_id": 75838124, "body": "What do you even need <code>textureProj</code> for?"}, {"owner": {"reputation": 21, "user_id": 6475413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7cf430028e80f2b998bb6542d5c98e2?s=128&d=identicon&r=PG&f=1", "display_name": "plazmakeks", "link": "https://stackoverflow.com/users/6475413/plazmakeks"}, "edited": false, "score": 0, "creation_date": 1496859844, "post_id": 44418506, "comment_id": 75838717, "body": "SurvivalMachine: nope, gl_FragColor = vec4(uv_coords.w, 0.0, 0.0, 1.0); gives me a red screen while isnan(uv_coords.w) is always true  derhass: what should i use instead?"}], "owner": {"reputation": 21, "user_id": 6475413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7cf430028e80f2b998bb6542d5c98e2?s=128&d=identicon&r=PG&f=1", "display_name": "plazmakeks", "link": "https://stackoverflow.com/users/6475413/plazmakeks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496909935, "creation_date": 1496854066, "last_edit_date": 1496909935, "question_id": 44418506, "link": "https://stackoverflow.com/questions/44418506/textureproj-in-glsl-gives-nan-and-inf", "title": "textureProj in GLSL gives nan and inf", "body": "<p>following scenario:</p>\n\n<p>i'm creating an OpenGL texture and a framebuffer and associated objects</p>\n\n<pre><code>GLuint frameBuffer = 0, colorBuffer, depthBuffer;\n\nglGenFramebuffers(1, &amp;frameBuffer);\n\nint maskRenderingWidth = 1 * settings.width, maskRenderingHeight = 1 * settings.height;\n\n//define texture \nglUseProgram(screenMaskRenderingProgramId);\nGLuint texture;\nglGenTextures(1, &amp;texture);\n\nglBindTexture(GL_TEXTURE_2D, texture);\nglTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, maskRenderingWidth, maskRenderingHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n\nglPixelStorei(GL_PACK_ALIGNMENT, 1);\n\n\nglUseProgram(offscreeenMaskRenderingProgramId);\n\n//setup framebuffer stuff\nglGenRenderbuffers(1, &amp;colorBuffer);\nglGenRenderbuffers(1, &amp;depthBuffer);\n\nglBindFramebuffer(GL_FRAMEBUFFER, frameBuffer);\nglBindRenderbuffer(GL_RENDERBUFFER, depthBuffer);\n\nglRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT, maskRenderingWidth, maskRenderingHeight);\nglFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthBuffer);\n\nglBindRenderbuffer(GL_RENDERBUFFER, colorBuffer);\nglRenderbufferStorage(GL_RENDERBUFFER, GL_RGBA, maskRenderingWidth, maskRenderingHeight);\nglFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, colorBuffer);\n\nglFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, texture, 0);\n\nGLenum DrawBuffers[1] = {GL_COLOR_ATTACHMENT0};\nglDrawBuffers(1, DrawBuffers);\n</code></pre>\n\n<p>I then render a polygon to that framebuffer which i put into a texture. Afterwards I draw another polygon but this time to the screen buffer. Finally I span a quad on the whole screen and pass the uv coords (0,0), (0,1), (1,1) and (1,0) and the previously created texture to it. </p>\n\n<pre><code>glActiveTexture(GL_TEXTURE0);\nglBindTexture(GL_TEXTURE_2D, texture);\nglUniform1i(textureLocation,0);\n</code></pre>\n\n<p>What i want to achieve is,  if that texture has at some texture coords certain values i want to draw the corresponding texture values, otherwise i want the output on coord (u,v) to be \nuntouched. </p>\n\n<pre><code>if(textureProj(mask, uv_coords).a == 1) {\n    gl_FragColor = textureProj(mask, uv_coords);\n}\n</code></pre>\n\n<p>After some trying i figured out that always everything from the texture is drawn. It seems my texture is somehow corrupt as isinf and isnan return true for textureProj(mask, uv_coords) for every uv_coord. How could that be possible and someone has an idea what might be broken here?</p>\n\n<pre><code>in vec4 uv_coords;\nuniform sampler2D mask;\nvoid main() {\n    vec4 c = textureProj(mask, uv_coords);\n    bvec4 inf = isinf(c);\n    if(inf.r == true &amp;&amp; inf.g == true &amp;&amp; inf.b == true &amp;&amp; inf.a == true) {\n        gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n    }\n});\n</code></pre>\n\n<p>This yields a completely white screen. Same applies for</p>\n\n<pre><code>inf = isnan(c)\n</code></pre>\n\n<p>Anyone has an idea whats going on here?</p>\n\n<p>EDIT:</p>\n\n<p>I forgot to mention that if I leave out the if clause in the fragment shader and just do</p>\n\n<pre><code>in vec4 uv_coords;\nuniform sampler2D mask;\nvoid main() {\n    vec4 c = textureProj(mask, uv_coords);\n    gl_FragColor = c;   });\n</code></pre>\n\n<p>the texture is drawn properly. Makes it even more strange.</p>\n\n<p>EDIT2:</p>\n\n<p>ok, i've <a href=\"https://stackoverflow.com/questions/26797736/fragment-shader-without-gl-fragcolor-explicitly-set\">read</a> that not setting gl_FragColor gives undefined behavior. so my approach will be to upload the two textures to that specific fragment shader and render everything in one pass</p>\n"}, {"tags": ["android", "c++", "android-studio", "assets"], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 6450961, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c5095b9cd593464a4f283c4e4ac8abc2?s=128&d=identicon&r=PG&f=1", "display_name": "janonymous", "link": "https://stackoverflow.com/users/6450961/janonymous"}, "is_accepted": false, "score": 0, "last_activity_date": 1496992025, "creation_date": 1496992025, "answer_id": 44451451, "question_id": 44418481, "link": "https://stackoverflow.com/questions/44418481/android-studio-use-native-executable-and-ship-them-inside-the-apk/44451451#44451451", "title": "Android Studio use native executable and ship them inside the apk", "body": "<p>After some time I managed to get it work through:\n<a href=\"https://github.com/flipagram/android-assetcopier\" rel=\"nofollow noreferrer\">https://github.com/flipagram/android-assetcopier</a></p>\n\n<p>I just had to change something: \nExample was: \n<code>File destDir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS);</code></p>\n\n<p>I've changed it to: <code>File destDir = (MainActivity.this).getFilesDir();</code> - so there is no problem with permissions (I guess).</p>\n\n<p>But be aware: Copying is successful, but I did not manage to run the program successfully. Maybe the whole process will get killed through a security manager or something else won't work.</p>\n"}], "owner": {"reputation": 79, "user_id": 6450961, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/c5095b9cd593464a4f283c4e4ac8abc2?s=128&d=identicon&r=PG&f=1", "display_name": "janonymous", "link": "https://stackoverflow.com/users/6450961/janonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496992025, "creation_date": 1496853967, "question_id": 44418481, "link": "https://stackoverflow.com/questions/44418481/android-studio-use-native-executable-and-ship-them-inside-the-apk", "title": "Android Studio use native executable and ship them inside the apk", "body": "<p>I'm trying to use some executables inside my app. This executable is C++ based (with images and logs as output), there may be other ways to use C++ code, but in this specific context, it might be the best to use it as an executable which only needs arguments. (NDK f.e. will be too much changing of the used library and I'm hoping there may be a way to parallelize this process some days)</p>\n\n<p>My research showed that some other people were looking for similar problems. It seems that the best way was to add these external programs inside the assets folder (app/src/main/assets). That is what I did, but now I'm not quite sure how to get my data inside the assets folder. Some posting said that these files have to be extracted in another folder to get them work.</p>\n\n<p>So I tried this method:\n<a href=\"https://stackoverflow.com/questions/4447477/how-to-copy-files-from-assets-folder-to-sdcard\">How to copy files from &#39;assets&#39; folder to sdcard?</a> (result: app shutdown)</p>\n\n<p>I would like to add some code, but there isn't much for now. As I already told my executable should be inside assets and its name is f.e. exec, I also named it libexec.so, because I read somewhere that you have to name these files like lib\"...\".so to get them extracted. In general, my aim is to use this executable like:\n<code>data/exec</code></p>\n\n<p>Now to my questions:</p>\n\n<ol>\n<li>How can I get access my assets files?</li>\n<li>Or should I use another folder instead of assets, will it be easier to use? How could I add an external executable there?</li>\n</ol>\n"}, {"tags": ["c++", "gcc", "compiler-errors", "codeblocks"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496853393, "post_id": 44418279, "comment_id": 75835330, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496853582, "post_id": 44418279, "comment_id": 75835421, "body": "<a href=\"http://tdm-gcc.tdragon.net/quirks\" rel=\"nofollow noreferrer\">tdm-gcc.tdragon.net/quirks</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496853699, "post_id": 44418279, "comment_id": 75835492, "body": "Why not simply using MinGW gcc? Also you need to ensure that the <code>%PATH%</code> environment variable contains the directory where the GCC 4.9.2 TDM (SJLJ) DLLs were installed."}, {"owner": {"reputation": 11, "user_id": 8126738, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YN_HvnkQwgg/AAAAAAAAAAI/AAAAAAAAANA/dkpq7bSLPFg/photo.jpg?sz=128", "display_name": "Berry", "link": "https://stackoverflow.com/users/8126738/berry"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496861917, "post_id": 44418279, "comment_id": 75839908, "body": "I did already include the path variable, and in sfml tutorial page, it is said that TDM is better for code blocks (mingw)"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1496862026, "post_id": 44418279, "comment_id": 75839969, "body": "There&#39;s 64-bit support with MinGW gcc meanwhile."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8126738, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YN_HvnkQwgg/AAAAAAAAAAI/AAAAAAAAANA/dkpq7bSLPFg/photo.jpg?sz=128", "display_name": "Berry", "link": "https://stackoverflow.com/users/8126738/berry"}, "edited": false, "score": 0, "creation_date": 1496861998, "post_id": 44420011, "comment_id": 75839955, "body": "I can not find libgcc_s_sjlj-1.dll anywhere in the sfml folder"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 11, "user_id": 8126738, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YN_HvnkQwgg/AAAAAAAAAAI/AAAAAAAAANA/dkpq7bSLPFg/photo.jpg?sz=128", "display_name": "Berry", "link": "https://stackoverflow.com/users/8126738/berry"}, "edited": false, "score": 0, "creation_date": 1496862089, "post_id": 44420011, "comment_id": 75840009, "body": "@Berry Why on earth would you expect it to be in the SFML folder??"}, {"owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "reply_to_user": {"reputation": 11, "user_id": 8126738, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YN_HvnkQwgg/AAAAAAAAAAI/AAAAAAAAANA/dkpq7bSLPFg/photo.jpg?sz=128", "display_name": "Berry", "link": "https://stackoverflow.com/users/8126738/berry"}, "edited": false, "score": 0, "creation_date": 1496863180, "post_id": 44420011, "comment_id": 75840641, "body": "@Berry Directions added."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": false, "score": 0, "last_activity_date": 1496863044, "last_edit_date": 1496863044, "creation_date": 1496859311, "answer_id": 44420011, "question_id": 44418279, "link": "https://stackoverflow.com/questions/44418279/libgcc-s-sjlj-1-dll-is-missing-from-your-computer/44420011#44420011", "title": "libgcc_s_sjlj-1.dll is missing from your computer", "body": "<p>As always on Windows, any DLL with which a program is linked at buildtime\nmust be found <em>at runtime</em> by the OS program loader in one of the directories\nwhere it looks for DLLs as per the Windows <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682586(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Dynamic-Link Library Search Order</a>.</p>\n\n<p>Therefore make sure that <code>libgcc_s_sjlj-1.dll</code> is in one of those\ndirectories. The crudest way of doing this is to copy the DLL to\nthe same directory that contains the program. This DLL is your GCC compiler's runtime library, and you will find it in <code>&lt;Your_TDM_GCC_Install_Dir&gt;/bin</code> - e.g. <code>C:/TDM-GCC-64/bin</code></p>\n"}], "owner": {"reputation": 11, "user_id": 8126738, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YN_HvnkQwgg/AAAAAAAAAAI/AAAAAAAAANA/dkpq7bSLPFg/photo.jpg?sz=128", "display_name": "Berry", "link": "https://stackoverflow.com/users/8126738/berry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3037, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496863044, "creation_date": 1496853216, "last_edit_date": 1496853384, "question_id": 44418279, "link": "https://stackoverflow.com/questions/44418279/libgcc-s-sjlj-1-dll-is-missing-from-your-computer", "title": "libgcc_s_sjlj-1.dll is missing from your computer", "body": "<p>After downloading GCC 4.9.2 TDM (SJLJ)-32 bit for SFML for codeblocks, I can build and run but can not run .exe files. Whenever i try to run .exe files, an error message shows up: \"The program can't start because libgcc_s_sjlj-1.dll is missing from your computer. Try reinstalling the program to fix this problem. \" I tried going to settings->compilers -> linker settings -> other linker settings -> added -shared-libgcc and -shared-libstdc++ , but same error message shows up still. Can anyone help me? I may need specific answers because I am a newbie. I spent hours trying to figure this out...</p>\n"}, {"tags": ["c++", "mysql++", "libmysql"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496852592, "post_id": 44418017, "comment_id": 75834822, "body": "What is <code>connection</code>? Is the <code>MYSQL</code> pointer valid? Is the <code>MYSQL</code> object shared between threads? There&#39;s no data-race?"}, {"owner": {"reputation": 869, "user_id": 4648809, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d2806509752d99c8d412f3c8d151a63e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4648809/alex"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496852727, "post_id": 44418017, "comment_id": 75834910, "body": "I use mysqlpp library over libmysqlclient.  Each thread has own mysqlpp::connection. So Mysql object is not shared."}, {"owner": {"reputation": 4827, "user_id": 8051589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VNG6.png?s=128&g=1", "display_name": "Andre Kampling", "link": "https://stackoverflow.com/users/8051589/andre-kampling"}, "edited": false, "score": 0, "creation_date": 1496903004, "post_id": 44418017, "comment_id": 75854108, "body": "As I looked up the problem on Google I found a lot of bug reports, reporting similar problems like you: <a href=\"https://bugs.mysql.com/bug.php?id=74393\" rel=\"nofollow noreferrer\">&#91;1&#93;</a> <a href=\"https://bugs.mysql.com/bug.php?id=39594\" rel=\"nofollow noreferrer\">&#91;2&#93;</a> <a href=\"https://bugs.mysql.com/bug.php?id=36810\" rel=\"nofollow noreferrer\">&#91;3&#93;</a> and so on. Which version do you use, maybe it has been fixed? Try to compile and link your program with debug information so that you will see the lines where it crashes. Another option would be to write a core file and debug it. Also you could try to run <code>valgrind --track-origins=yes program</code>, valgrind could point you in the right direction."}], "answers": [{"tags": [], "owner": {"reputation": 869, "user_id": 4648809, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d2806509752d99c8d412f3c8d151a63e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4648809/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1499779169, "creation_date": 1499779169, "answer_id": 45035770, "question_id": 44418017, "link": "https://stackoverflow.com/questions/44418017/mysql-ping-causes-sigsegv/45035770#45035770", "title": "mysql_ping causes SIGSEGV", "body": "<p>mysqlpp++ was rebuilt using libmariadbclient instead of libmysqldbclient. It solves the problem.</p>\n"}], "owner": {"reputation": 869, "user_id": 4648809, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d2806509752d99c8d412f3c8d151a63e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4648809/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 338, "favorite_count": 0, "accepted_answer_id": 45035770, "answer_count": 1, "score": 0, "last_activity_date": 1499779169, "creation_date": 1496852354, "last_edit_date": 1496928961, "question_id": 44418017, "link": "https://stackoverflow.com/questions/44418017/mysql-ping-causes-sigsegv", "title": "mysql_ping causes SIGSEGV", "body": "<p>I use c++ and mysql++ library. I have separate mysqlpp::Connection object on each thread. All mysqlpp options are default(ReconnectOption is disabled). Each thread keeps persistent connection to the MariaDB server. Before series of SQL queries I make following check:</p>\n\n<pre><code>try\n{\n    if (!connection.ping()) connection.connect(db_cfg.name.c_str(),\n                                               db_cfg.server.c_str(),\n                                               db_cfg.user.c_str(),\n                                               db_cfg.password.c_str(),\n                                               db_cfg.port);\n}\n</code></pre>\n\n<p>This code produces following SIGSEGV rarely:</p>\n\n<pre><code>#0  0x00007fe0a625eb46 in ?? () from /usr/lib/x86_64-linux-  gnu/libmysqlclient.so.20\n#1  0x00007fe0a6251b26 in mysql_ping () from /usr/lib/x86_64-linux-gnu/libmysqlclient.so.20\n#2  0x00007fe0ab6773b1 in mysqlpp::Connection::ping() () from /usr/lib/libmysqlpp.so.3\n</code></pre>\n\n<p>I tried to reproduce this bug by running test program with ping/connect calls in endless loops. During the execution I restarted MariaDB server manually. However I did not succeed with reproducing.\nDo you have any ideas how to fix it? Thank you.</p>\n\n<p>OS: Ubuntu 64-bit</p>\n"}, {"tags": ["c++", "list", "stl", "iterator"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1496852513, "post_id": 44417995, "comment_id": 75834784, "body": "Pro Tip: Never use <code>using namespace std;</code> in a header file."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496852599, "post_id": 44417995, "comment_id": 75834826, "body": "Can you provide us with a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that reproduces the problem please. I&#39;m pretty sure that not all that code is necessary to do so. Looks like a problem with circular <code>#include</code> statements."}, {"owner": {"reputation": 6235, "user_id": 889213, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/7fd4849aace8aa85f83e832d763cff48?s=128&d=identicon&r=PG", "display_name": "thiagoh", "link": "https://stackoverflow.com/users/889213/thiagoh"}, "edited": false, "score": 0, "creation_date": 1496852830, "post_id": 44417995, "comment_id": 75834971, "body": "by the way.. read this to make sure you really need to use <code>list</code> instead of <code>vector</code> <a href=\"https://softwareengineering.stackexchange.com/questions/185222/what-is-the-point-of-using-lists-over-vectors-in-c\" title=\"what is the point of using lists over vectors in c\">softwareengineering.stackexchange.com/questions/185222/&hellip;</a> because it sounds that you came from JAVA and is used to using <code>list</code>. In c++ you should use <code>vector</code> by default and <code>list</code> only if you need to improve insertion and deletion (very basically speaking)"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496853213, "post_id": 44417995, "comment_id": 75835210, "body": "@NathanOliver: In this case, I don&#39;t think it matters that it&#39;s in a header file. The same thing would happen if it were only in the .cpp files."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6397891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3bbd1d1afca8f3a4457ce2c15799801?s=128&d=identicon&r=PG&f=1", "display_name": "Buck Wheat", "link": "https://stackoverflow.com/users/6397891/buck-wheat"}, "edited": false, "score": 0, "creation_date": 1496855213, "post_id": 44418350, "comment_id": 75836296, "body": "This worked, thank you! Can you how I&#39;ve hidden std::list in the parameter name and why I needed to redefine list in the function body? I&#39;ve heard that using namespace std is bad practice before, I will read over that link, thanks.*edit-spelling"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "reply_to_user": {"reputation": 41, "user_id": 6397891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3bbd1d1afca8f3a4457ce2c15799801?s=128&d=identicon&r=PG&f=1", "display_name": "Buck Wheat", "link": "https://stackoverflow.com/users/6397891/buck-wheat"}, "edited": false, "score": 0, "creation_date": 1496855394, "post_id": 44418350, "comment_id": 75836379, "body": "You&#39;ve defined a symbol called <code>list</code> for that function, and that takes precedence over the <code>list</code> in the <code>std::</code> namespace while you&#39;re in that function. So your local <code>list</code> hides the one in <code>std::</code>."}, {"owner": {"reputation": 41, "user_id": 6397891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3bbd1d1afca8f3a4457ce2c15799801?s=128&d=identicon&r=PG&f=1", "display_name": "Buck Wheat", "link": "https://stackoverflow.com/users/6397891/buck-wheat"}, "edited": false, "score": 0, "creation_date": 1496855773, "post_id": 44418350, "comment_id": 75836585, "body": "Awesome, Thanks again."}], "tags": [], "owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "is_accepted": true, "score": 3, "last_activity_date": 1496853833, "last_edit_date": 1496853833, "creation_date": 1496853479, "answer_id": 44418350, "question_id": 44417995, "link": "https://stackoverflow.com/questions/44417995/c-iterator-error-does-not-refer-to-a-value/44418350#44418350", "title": "c++ iterator error &quot;does not refer to a value&quot;", "body": "<p>Look at this function closely:</p>\n\n<pre><code>void ProcessList::getProcess(list&lt;Process*&gt; list)\n{\n   list&lt;Process*&gt;::iterator i;\n}\n</code></pre>\n\n<p>What does <code>list</code> mean within the function body? It's not <code>std::list</code> here, because you've hidden that with your parameter name. That makes no sense to the compiler.</p>\n\n<p>An easy way to express what you really mean is qualify it:</p>\n\n<pre><code>void ProcessList::getProcess(list&lt;Process*&gt; list)\n{\n    std::list&lt;Process*&gt;::iterator i;\n}\n</code></pre>\n\n<p>But you should really just do that everywhere and <a href=\"https://stackoverflow.com/q/1452721/10077\">forget you ever heard of <code>using namespace std;</code></a>. And it's not a good idea to use <code>list</code> as your parameter name, since it tends to confuse the reader if not the compiler.</p>\n"}], "owner": {"reputation": 41, "user_id": 6397891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f3bbd1d1afca8f3a4457ce2c15799801?s=128&d=identicon&r=PG&f=1", "display_name": "Buck Wheat", "link": "https://stackoverflow.com/users/6397891/buck-wheat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "closed_date": 1497050939, "accepted_answer_id": 44418350, "answer_count": 1, "score": 0, "last_activity_date": 1496853833, "creation_date": 1496852287, "question_id": 44417995, "link": "https://stackoverflow.com/questions/44417995/c-iterator-error-does-not-refer-to-a-value", "closed_reason": "Not suitable for this site", "title": "c++ iterator error &quot;does not refer to a value&quot;", "body": "<p>I am just trying to create an iterator for a list of class pointers. I searched around for a while and could not find anything regarding this issue. Everything works fine until I try and create the iterator. </p>\n\n<p>Here is the compilation error message I'm getting:   </p>\n\n<pre><code>ProcessList.cpp:28:7: error: 'Process' does not refer to a value\n            list&lt;Process*&gt;::iterator i;\n                 ^\n    ./Process.h:3:7: note: declared here\n    class Process\n          ^\n    ProcessList.cpp:28:15: error: expected expression\n            list&lt;Process*&gt;::iterator i;\n                         ^\n    ProcessList.cpp:28:18: error: cannot refer to class template 'iterator' without a template argument list\n            list&lt;Process*&gt;::iterator i;\n                          ~~^\n    /Library/Developer/CommandLineTools/usr/bin/../include/c++/v1/iterator:431:30: note: template is declared here\n    struct _LIBCPP_TYPE_VIS_ONLY iterator\n                                 ^\n    3 errors generated.\n</code></pre>\n\n<p>Here is my code. The error comes from the ProcessList.cpp code at the bottom:</p>\n\n<pre><code>//main.cpp\n#include &lt;iostream&gt;\n#include &lt;list&gt;\n#include &lt;random&gt;\n#include \"ProcessList.h\"\n#include \"Generator.h\"\nusing namespace std;\n\n\nint main()\n{\n\n    ProcessList processList(2);\n\n    processList.getProcess(processList.getProcessList());\n\n    return 0;\n}\n</code></pre>\n\n<p><br></p>\n\n<pre><code>//Process.h\nclass Process\n{\n    public: \n        Process();\n\n        void setPID(int PID);\n        int getPID();\n\n        int calculateNumberOfCycles();\n        int getNumberOfCycles();\n\n        int calculateMemorySize();\n        int getMemorySize();\n\n    private:\n        static int number_of_processes;\n        int PID;\n        int number_of_cycles;\n        int memory_size;\n\n\n};\n</code></pre>\n\n<p><br></p>\n\n<pre><code>//Process.cpp\n#include &lt;iostream&gt;\n#include \"Process.h\"\nusing namespace std;\n\nint Process::number_of_processes = 0;//define static variable\n\n//Constructor\nProcess::Process()\n{\n    cout &lt;&lt; \"Process Constructor\" &lt;&lt; endl;\n\n    PID = number_of_processes;\n    number_of_cycles = number_of_processes;\n    memory_size = number_of_processes;\n    number_of_processes++;\n\n    //number_of_cycles = setNumberOfCycles;\n    //memory_size = setMemorySize;\n\n}\n\n//PID Setter\nvoid Process::setPID(int PID)\n{\n\n}\n\n//PID Getter\nint Process::getPID()\n{\n    return PID;\n}\n\n//Generates a random number of cycles based od the defined variables\nint Process::calculateNumberOfCycles()\n{\n    return 0;\n}\n\n//Returns the number of cycles of the process\nint Process::getNumberOfCycles()\n{\n    return number_of_cycles;\n}\n\n//Generates a random amount of memory based on the defined variables\nint Process::calculateMemorySize()\n{\n    return 0;\n}\n\n//Returns the amount of memory for the process\nint Process::getMemorySize()\n{\n    return memory_size;\n}\n</code></pre>\n\n<p><br></p>\n\n<pre><code>//ProcessList.h\n#include &lt;list&gt;\n#include \"Process.h\"\n using namespace std;\n\nclass ProcessList\n{\n    private:\n        list&lt;Process*&gt; processList;\n\n    public:\n        ProcessList(int number_of_processes_to_create);\n        list&lt;Process*&gt; getProcessList();\n        Process* createProcess();\n        void getProcess(list&lt;Process*&gt; list);\n\n};\n</code></pre>\n\n<p><br></p>\n\n<pre><code>//ProcessList.cpp\n #include &lt;iostream&gt;\n #include \"ProcessList.h\"\n using namespace std;\n\nProcessList::ProcessList(int number_of_processes_to_create)\n{\n    processList.push_back(createProcess());\n}\n\nProcess* ProcessList::createProcess()\n{\n    Process *process = new Process();\n\n    return process;\n}\n\nlist&lt;Process*&gt; ProcessList::getProcessList()\n{\n    return processList;\n}\n\nvoid ProcessList::getProcess(list&lt;Process*&gt; list)\n{\n\n    list&lt;Process*&gt;::iterator i;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1496852373, "post_id": 44417956, "comment_id": 75834702, "body": "The only difference is that when you allocate on the heap the memory is allocated dynamically at run-time, while local variables (which really don&#39;t have to be on &quot;the stack&quot;) are allocated by the compiler at compile-time. They are both <i>constructed</i> the same and at run-time. Oh and of course you have to manage the destruction of the heap-allocated object yourself."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496853459, "post_id": 44417956, "comment_id": 75835369, "body": "I really don&#39;t think it is duplicated, I&#39;m not interested in know how the OS controls it. I want to know mainly if there&#39;s some advantage of using one of them."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496853956, "post_id": 44417956, "comment_id": 75835625, "body": "Memory is memory is memory. It doesn&#39;t matter where your objects are located, and if you want to know more about how an operating system handles memory allocations then you&#39;re asking on a much to high level. The C++ object model and the low-level OS memory allocation functions are on a very different level."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496854314, "post_id": 44417956, "comment_id": 75835816, "body": "Thanks @Someprogrammerdude. No, I&#39;m not interested in how the operating system handles memory allocations. I just want to know if there is some advantage in using one of them when developing (high level)."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1496854991, "post_id": 44417956, "comment_id": 75836174, "body": "In general you should avoid to use pointers and (direct) dynamic allocation as much as possible in C++. Most of the time it isn&#39;t really needed. Use <a href=\"http://en.cppreference.com/w/cpp/container\" rel=\"nofollow noreferrer\">standard containers</a> with direct objects (not pointers) instead of <code>new[]</code>. If you need to link to another object, first try to use references, otherwise plain simple pointers are okay. If you need polymorphism pointers are often a must, but then use <a href=\"http://en.cppreference.com/w/cpp/memory\" rel=\"nofollow noreferrer\">owning smart pointers</a> introduced in C++11."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1496855084, "post_id": 44417956, "comment_id": 75836219, "body": "With this, avoiding pointers as much as possible, comes the obvious answer to your question: Don&#39;t use objects allocated on the heap, unless you really can&#39;t avoid it, and then use the smart pointers. And with modern compilers, copy elision and movement semantics you should not need to worry that much about passing or returning objects by value."}, {"owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496855222, "post_id": 44417956, "comment_id": 75836301, "body": "Thank you so much @Someprogrammerdude, this could be the answer."}], "answers": [{"tags": [], "owner": {"reputation": 704, "user_id": 3972267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T6Due.jpg?s=128&g=1", "display_name": "Ph03n1x", "link": "https://stackoverflow.com/users/3972267/ph03n1x"}, "is_accepted": true, "score": 2, "last_activity_date": 1496852560, "creation_date": 1496852560, "answer_id": 44418077, "question_id": 44417956, "link": "https://stackoverflow.com/questions/44417956/difference-in-creating-an-object-in-the-heap-and-in-the-stack/44418077#44418077", "title": "Difference in creating an object in the heap and in the stack", "body": "<p>With the pointer and the new keyword you create an <strong>object</strong> on the heap and a assign it to a pointer <strong>which is on the stack</strong>. Thus when the pointer goes out of scope and it gets \"popped\" from the stack you won't be able to access your object anymore. (Which is memory leaking)\nIf you create the object on the stack you don't have to worry about freeing the memory (in this case deleting the object that is pointed to by the pointer)</p>\n\n<p>For normal use i would go with the stack version. There are some old-school implementations of design patterns where you start using inheritance and there you use ptrs. </p>\n"}], "owner": {"reputation": 2254, "user_id": 4946821, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/R7FRn.jpg?s=128&g=1", "display_name": "KelvinS", "link": "https://stackoverflow.com/users/4946821/kelvins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1496853261, "accepted_answer_id": 44418077, "answer_count": 1, "score": 0, "last_activity_date": 1496852560, "creation_date": 1496852185, "question_id": 44417956, "link": "https://stackoverflow.com/questions/44417956/difference-in-creating-an-object-in-the-heap-and-in-the-stack", "closed_reason": "Duplicate", "title": "Difference in creating an object in the heap and in the stack", "body": "<p>Supposing that I have the following two classes:</p>\n\n<pre><code>#ifndef CLASS1_H\n#define CLASS1_H\n\n#include &lt;QDebug&gt;\n\nclass Class1\n{\npublic:\n    Class1(){}\n\n    void printName()\n    {\n        qDebug() &lt;&lt; \"Class1\";\n    }\n};\n\n#endif // CLASS1_H\n</code></pre>\n\n<p>and </p>\n\n<pre><code>#ifndef CLASS2_H\n#define CLASS2_H\n\n#include \"class1.h\"\n\nclass Class2\n{\npublic:\n    Class2(Class1 *pointerToClass1)\n    {\n        this-&gt;pointerToClass1 = pointerToClass1;\n    }\n\n    void doSomething()\n    {\n        this-&gt;pointerToClass1-&gt;printName();\n    }\n\nprivate:\n    Class1 *pointerToClass1;\n};\n\n#endif // CLASS2_H\n</code></pre>\n\n<p>And the main function looks like this:</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n\n#include \"class1.h\"\n#include \"class2.h\"\n\nvoid func1()\n{\n    Class1 class1;\n\n    Class2 *class2_1 = new Class2(&amp;class1);\n    Class2 class2_2(&amp;class1);\n\n    class2_1-&gt;doSomething();\n    class2_2.doSomething();\n\n    delete class2_1;\n    class2_1 = NULL;\n}\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    func1();\n\n    return a.exec();\n}\n</code></pre>\n\n<p>What is the main difference of creating an object in the heap (e.g. <code>Class2 *class2_1 = new Class2(&amp;class1);</code>) and just create the object on the stack (e.g. <code>Class2 class2_2(&amp;class1);</code>)?</p>\n\n<p>As far as I know, it is preferred to create the object on the stack when it is declared locally and has a short life. Also, the data is lost when the object exits the stack and in the heap, we need to call delete to free the memory. Is that correct?</p>\n\n<p>Therefore, there is some advantage in using one or another?</p>\n"}, {"tags": ["c++", "winapi", "bitmap"], "comments": [{"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1496852274, "post_id": 44417920, "comment_id": 75834633, "body": "The title asks something very different from the body of the question. It seems you already know how to display a bitmap in a static control, and that your <i>actual</i> question is how to shrink the bitmap to fit in the static control. Static controls do <i>not</i> automatically scale bitmaps (there are no styles for this), so if you want that, you need to do it yourself. <code>StretchBlt</code> will do what you need; subclass the static control and handle its <code>WM_PAINT</code> messages."}, {"owner": {"reputation": 203, "user_id": 8104188, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d8617539bff1793c4358775c3c877f0e?s=128&d=identicon&r=PG&f=1", "display_name": "LucasN", "link": "https://stackoverflow.com/users/8104188/lucasn"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1496852769, "post_id": 44417920, "comment_id": 75834938, "body": "Is there anyway to resize the bitmap and still use <code>SetBitmap()</code> without subclassing the control? The bitmap is a screenshot taken just before I want to display it on the control."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1496852901, "post_id": 44417920, "comment_id": 75835015, "body": "Yes, but it still involves <code>StretchBlt</code>. You just draw it onto a new bitmap selected into a temporary (memory) DC, and then save that as your resized bitmap, deleting the original. Like it says <a href=\"https://stackoverflow.com/questions/8191642/what-is-the-best-way-to-resize-a-bitmap-in-windows\">here</a>, but you&#39;ll use <code>StretchBlt</code> to shrink it, instead of <code>BitBlt</code> (which would draw it at a 1:1 size)."}, {"owner": {"reputation": 4371, "user_id": 2945027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/etv49.jpg?s=128&g=1", "display_name": "Alex Guteniev", "link": "https://stackoverflow.com/users/2945027/alex-guteniev"}, "edited": false, "score": 0, "creation_date": 1496919080, "post_id": 44417920, "comment_id": 75864528, "body": "Aslo SS_OWNERDRAW may be a more straightforward way to go, you still do StretchBlt yourself, but no subclassing"}], "owner": {"reputation": 203, "user_id": 8104188, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d8617539bff1793c4358775c3c877f0e?s=128&d=identicon&r=PG&f=1", "display_name": "LucasN", "link": "https://stackoverflow.com/users/8104188/lucasn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1496854158, "creation_date": 1496852089, "last_edit_date": 1496854158, "question_id": 44417920, "link": "https://stackoverflow.com/questions/44417920/how-to-shrink-a-bitmap-to-fit-in-a-static-control", "title": "How to shrink a bitmap to fit in a static control?", "body": "<p>I have a bitmap that I want to put into a static control. I have the static control as a <code>SS_BITMAP</code> style and when I use the <code>_staticControl.SetBitmap(myBitmap.Detach())</code> method the static control gets resized to the area of the bitmap which is bigger than that control. I know that the <code>SS_BITMAP</code> style resizes the control automatically, but how do I shrink the bitmap to fit in the static control? I've tried using a <code>SS_REALSIZECONTROL</code> style, but this doesn't show the bitmap at all. Is there any of these other styles I should be applying? <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb760773(v=vs.85).aspx\" rel=\"nofollow noreferrer\">Static Control Styles</a></p>\n"}, {"tags": ["c++", "boost"], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 8006482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4642b7fcaf73ad05ca03d7bd2224240?s=128&d=identicon&r=PG&f=1", "display_name": "T_F", "link": "https://stackoverflow.com/users/8006482/t-f"}, "is_accepted": true, "score": 0, "last_activity_date": 1496920818, "creation_date": 1496920818, "answer_id": 44434303, "question_id": 44417462, "link": "https://stackoverflow.com/questions/44417462/boost-library-error-while-using-message-queue-and-shared-memory/44434303#44434303", "title": "boost library error while using message_queue and shared_memory", "body": "<p>I got it ... it's a weird problem, but it in that case is necessary to define the place, where the shared_memory has to be stored.\nIn my case:</p>\n\n<p><code>#define BOOST_INTERPROCESS_SHARED_DIR_PATH \"C:/Shared_Memory</code>\"</p>\n"}], "owner": {"reputation": 109, "user_id": 8006482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4642b7fcaf73ad05ca03d7bd2224240?s=128&d=identicon&r=PG&f=1", "display_name": "T_F", "link": "https://stackoverflow.com/users/8006482/t-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 44434303, "answer_count": 1, "score": 0, "last_activity_date": 1496920818, "creation_date": 1496850711, "question_id": 44417462, "link": "https://stackoverflow.com/questions/44417462/boost-library-error-while-using-message-queue-and-shared-memory", "title": "boost library error while using message_queue and shared_memory", "body": "<p>I'm using shared_memory and message_queue from the boost library.</p>\n\n<p>A image processing application provides parameter and 3D points in a shared_memory and a gui-application grabs the data out of the memory. The synchronisation works with message_queue's.\nIt works well in a short run but after a longer perdiod fatal errors occurs and also a restart does not help.\nAfter that it's not possible to create a new shared_memory section or a message_queue. Creating a new message_queue fails with 'BOOST_ASSERT (ptr != 0)'.\nA part of the init part looks like the code below (is also not working anymore):</p>\n\n<pre><code>//initializing default values - VoxelGrid_X\nmessage_queue::remove(\"param_VX\");\nmessage_queue mq_VX(create_only, \"param_VX\", 1, sizeof(double));\nmq_VX.try_send(&amp;parameter_VX, sizeof(parameter_VX), 0);\nui-&gt;lineEdit_VX-&gt;setPlaceholderText(QString::number(convert_m_mm(parameter_VX)));\n</code></pre>\n\n<p>A part of reading out the parameter in the image-processing app looks like the code below:</p>\n\n<pre><code>//VoxelGrid: X\n                            try {\n                                unsigned int priority_VX = NULL;\n                                message_queue::size_type recv_size_VX = NULL;\n                                message_queue mq_VX(open_only, \"param_VX\");\n                                mq_VX.try_receive(&amp;leafSizeX, sizeof(leafSizeX), recv_size_VX, priority_VX);\n                            }\n                            catch (interprocess_exception &amp;ex) {\n\n                            }\n</code></pre>\n\n<p>What could be the problem? Does anybody have similar experiences? I would be happy to get hints about possible solutions.</p>\n\n<p>Best regards,\nT</p>\n"}, {"tags": ["c++", "c++03", "const-correctness"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1496851143, "post_id": 44417291, "comment_id": 75833928, "body": "your <code>MakeEqual</code> <i>is</i> changing <code>x,y,z</code>, so you are (able to) changing the value."}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1496851405, "post_id": 44417291, "comment_id": 75834079, "body": "although not recommended for this case, you can have something like <code>class const_vector</code> to use with const values."}], "answers": [{"comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1496851924, "post_id": 44417714, "comment_id": 75834407, "body": "I guess OP want the <code>Vector</code>s act like wrapper (can change the origin array), so <code>Vector::Vector(float,float,float)</code> may not meet OP&#39;s need (for <code>v1</code>)."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1496852219, "post_id": 44417714, "comment_id": 75834603, "body": "@appleapple, I hope not. The use of temporary objects on the stack, such as <code>Vector</code>s would not be very helpful to perform the kinds of computation they hope to do. I&#39;ll wait for the OP to clarify."}, {"owner": {"reputation": 13, "user_id": 5114414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afd7f450e6ab65c95e797cda98f557b?s=128&d=identicon&r=PG&f=1", "display_name": "Indy625", "link": "https://stackoverflow.com/users/5114414/indy625"}, "reply_to_user": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1496904039, "post_id": 44417714, "comment_id": 75854700, "body": "@appleapple, you are right. I use the Vector class only to manipulate the existing data in a certain way. After I did that I can totally ignore the vector since it does not contain data by its own. It might be possible to pass the data as values like proposed and in the end copy the result of the vector operation back to the data. More load on the stack but probably a better solution than my current one..."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1496851453, "creation_date": 1496851453, "answer_id": 44417714, "question_id": 44417291, "link": "https://stackoverflow.com/questions/44417291/const-correctness-for-data-handled-by-not-const-classes/44417714#44417714", "title": "Const correctness for data handled by not const classes", "body": "<p>You have:</p>\n\n<pre><code>Vector(float&amp; _x, float&amp; _y, float&amp; _z) :x(_x), y(_y), z(_z)\n</code></pre>\n\n<p>That does not work well. For example, you can't use:</p>\n\n<pre><code>Vector v1(0, 0, 0);\n</code></pre>\n\n<p>Also, you are not able to use</p>\n\n<pre><code>Vector v1(a1[0], a1[1], a1[2]);\n</code></pre>\n\n<p>since <code>a1[0]</code> evaluates to a <code>const float&amp;</code>, not a <code>float&amp;</code>.</p>\n\n<p>That's poorly designed interface. Change the arguments to simple values:</p>\n\n<pre><code>Vector(float _x, float _y, float _z) :x(_x), y(_y), z(_z)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5114414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8afd7f450e6ab65c95e797cda98f557b?s=128&d=identicon&r=PG&f=1", "display_name": "Indy625", "link": "https://stackoverflow.com/users/5114414/indy625"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496851453, "creation_date": 1496850283, "question_id": 44417291, "link": "https://stackoverflow.com/questions/44417291/const-correctness-for-data-handled-by-not-const-classes", "title": "Const correctness for data handled by not const classes", "body": "<p>I want to use class-oriented design to efficiently and cleanly handle data on an embedded platform. I should not create new objects on the stack (or at least be very economic) so I intend to pass my data as reference to helper classes and manipulate it within there (also to achieve proper encapsulation).</p>\n\n<p>The following code is a very stripped down example of the problem I'm facing. </p>\n\n<pre><code>#include \"Vector.h\"\n\nvoid DoSomething(float* a1, const float* a2)\n{\n  // some code\n\n  Vector v1(a1[0], a1[1], a1[2]);\n  Vector v2(a2[0], a2[1], a2[2]);\n  v1.MakeEqual(v2);\n\n  // more code\n}\n\nint main()\n{\n  float x1[3] = { 0, 0, 0 };\n  float x2[3] = { 1, 1, 1 };\n  DoSomething(x1, x2);\n  return 0;\n}\n</code></pre>\n\n<p>The <code>Vector</code>-Class is defined in the header file:</p>\n\n<pre><code>#pragma once\nclass Vector\n{\npublic:\n  Vector(float&amp; _x, float&amp; _y, float&amp; _z) :x(_x), y(_y), z(_z)\n  {}\n\n  Vector(const float&amp; _x, const float&amp; _y, const float&amp; _z) \n      :x(const_cast&lt;float&amp;&gt;(_x)), y(const_cast&lt;float&amp;&gt;(_y)), z(const_cast&lt;float&amp;&gt;(_z)) //works, but looks not good\n  {}\n\n  ~Vector(){};\n\n  void MakeEqual(const Vector&amp; other)\n  {\n    x = other.x;\n    y = other.y;\n    z = other.z;\n  }\n\nprivate:\n  float&amp; x;\n  float&amp; y;\n  float&amp; z;\n};\n</code></pre>\n\n<p>My data is defined somewhere extern (<code>main</code>-function) and then passed as pointers to a function <code>DoSomething</code>. Inside this function vector objects are wrapped around the data to help doing some vector-typical stuff (rotating, cross-products, etc...). Now I want to be const-correct and pass the data which is not intended to be changed as <code>const</code> but when the vector v2 is created I have the compiler complaining that he <code>cannot convert argument 1 from 'const float' to 'float &amp;'</code>. I understand what he wants to say, but how can I solve this? The vector method only makes sense when I am using it on vectors but the constructor of the vector <code>v2</code> does not know that I'm actually not manipulating the data of v2.</p>\n\n<p>One way to solve this is shown in the code with a <code>const_cast</code> in a second constructor, but I have the feeling that this is not good style, since I'm casting away my legitimate const data. Another way would be to define a second class <code>ConstVector</code> but this seem weird as well.</p>\n\n<p>I have to mention that due to compiler restrictions I am bound to the <code>C++03</code> standard so unfortunately I cannot use too modern language features. Also <code>stl</code>-containers are (probably) not available since I cannot control how, when and where memory is allocated.</p>\n"}, {"tags": ["c++", "qt", "iterator", "comparison"], "comments": [{"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 1, "creation_date": 1496851755, "post_id": 44417234, "comment_id": 75834304, "body": "you compare <code>it</code> to <code>end</code>, both may be invalid. and the result can be undefined."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1496852704, "creation_date": 1496852704, "answer_id": 44418124, "question_id": 44417234, "link": "https://stackoverflow.com/questions/44417234/is-it-permissible-in-this-case-to-compare-invalid-iterators/44418124#44418124", "title": "Is it permissible in this case to compare invalid iterators?", "body": "<p><strong>No</strong>. It is clearly undefined behavior. The container has been modified while you hold an iterator. The iterator is invalidated by the modification and you can't use it anymore.</p>\n\n<p>The workaround is simple: remove the object from the hash after you're done iterating. It's also not necessary to disconnect a socket before destroying it, and in any case it already <em>is</em> disconnected, since you're connecting to its <code>disconnected</code> signal! And for safety's sake, you should connect to <code>this</code>'s object context if <code>this</code> points to a <code>QObject</code>:</p>\n\n<pre><code>QObject::connect(socket, &amp;QTcpSocket::disconnected, this, [this, socket]{\n  socket-&gt;deleteLater();\n  connect(socket, &amp;QObject::destroyed, this, [this, socket]{\n    clients.remove(socket);\n  });\n});\n</code></pre>\n\n<p>Otherwise, the class pointing to <code>this</code> must keep an object context:</p>\n\n<pre><code>class MyClass {\n  QHash&lt;QTcpSocket*, QTime&gt; clients;\n  QObject context; // must be declared after clients\n  ...\n  void do() {\n    QObject::connect(socket, &amp;QTcpSocket::disconnected, &amp;context, [obj = &amp;context, socket, this]{\n      socket-&gt;deleteLater();\n      connect(socket, &amp;QObject::destroyed, obj, [socket, this]{\n        clients.remove(socket);\n      });\n    });\n  }\n};\n</code></pre>\n\n<p>This is to ensure that the connection will be automatically broken if <code>MyClass</code> outlives the socket, and you won't attempt to access <code>this</code> when it's a dangling pointer. The <code>context</code> acts as a sentinel whose existence guarantees that access to <code>this-&gt;clients</code> is allowed.</p>\n"}], "owner": {"reputation": 23, "user_id": 1569189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yHG3p.png?s=128&g=1", "display_name": "eMan.Lived", "link": "https://stackoverflow.com/users/1569189/eman-lived"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 44418124, "answer_count": 1, "score": 2, "last_activity_date": 1496881268, "creation_date": 1496850126, "last_edit_date": 1496881268, "question_id": 44417234, "link": "https://stackoverflow.com/questions/44417234/is-it-permissible-in-this-case-to-compare-invalid-iterators", "title": "Is it permissible in this case to compare invalid iterators?", "body": "<p>Actually it never bothered me because the code compiles and runs without errors. But after reading the documentation for a while, I came across one paragraph (quote below). And so I decided to ask knowledgeable people.</p>\n\n<p>Class member declaration:</p>\n\n<pre><code>QHash&lt;QTcpSocket*, QTime&gt; clients;\n</code></pre>\n\n<p>The signal <code>disconnected</code> of each socket is connected to the lambda slot:</p>\n\n<pre><code>QObject::connect(socket, &amp;QTcpSocket::disconnected,\n    [this, socket]()\n    {\n      socket-&gt;disconnect();\n      socket-&gt;deleteLater();\n\n      this-&gt;clients.remove(socket); // &lt;--- Removing\n    });\n</code></pre>\n\n<p>Checking the \"sleeping\" clients:</p>\n\n<pre><code>void check_timeouts()\n{\n  for (auto it = this-&gt;clients.cbegin(), end = this-&gt;clients.cend();\n       !this-&gt;clients.empty();\n       it = this-&gt;clients.cbegin(), end = this-&gt;clients.cend())\n  {\n    while (it != end)\n    {\n      if (it.value().elapsed() &gt; this-&gt;client_timeout\n          &amp;&amp; it.key()-&gt;state() == QTcpSocket::ConnectedState)\n      {\n        it.key()-&gt;disconnectFromHost(); // &lt;--- Emit disconnected inside\n        break;\n      }\n      ++it;\n    }\n    if (it == end) // &lt;--- Comparing\n    {\n      break;\n    }\n  }\n}\n</code></pre>\n\n<p>As you can see, if the client \"sleeps\" long enough it is disconnected by calling the <code>disconnectFromHost()</code> of the socket, which in turn entails the execution of the lambda body where the client is removed from the table. And at the time of comparison the iterators <code>it</code> and <code>end</code> are considered invalid.</p>\n\n<p><a href=\"https://doc.qt.io/qt-5/containers.html#the-iterator-classes\" rel=\"nofollow noreferrer\">From</a> Qt documentation:</p>\n\n<blockquote>\n  <h3>The Iterator Classes</h3>\n  \n  <p>Iterators provide a uniform means to access items in a container. Qt's\n  container classes provide two types of iterators: Java-style iterators\n  and STL-style iterators. Iterators of both types are <em>invalidated when\n  the data in the container is modified</em> or detached from implicitly\n  shared copies due to a call to a non-const member function.</p>\n</blockquote>\n\n<p>But in this case does not attempt to access the data of the container. And given that immediately before calling the function <code>disconnectFromHost</code> the iterators <code>it</code> and <code>end</code> are definitely not equal, and immediately after the call they are compared, and since they are not equal and they are immediately reset to the correct values in <code>for</code>'s <em>iteration_expression</em>.</p>\n\n<p>So my question, is it possible to conditionally assume that specifically in this comparison the iterators are not invalid but, let's say are correct-but-outdated and this comparison is correct and not UB?</p>\n\n<p>P.S. There is one thing that really confuses me. This is that the iterator comparison operation is an overload. It may happen that for some containers it turns out that the comparison of the iterators was implemented with access to the container relying on the data of these iterators. And then there will be problems. But these are only my guesses. Since, as I know, the usual iterators operate with pointers and they do not need access to the container (in theory).</p>\n\n<p>P.P.S. Sorry for my english. It's not me, but online translators. ;-)</p>\n\n<p><strong>EDIT</strong>:</p>\n\n<p>So, I found a <a href=\"https://stackoverflow.com/questions/33076032/which-operations-are-defined-for-invalid-iterators\">similar</a> question with the answer that completely suits me.\nBut I still want to accept the answer for a workaround that seems acceptable to me.</p>\n"}, {"tags": ["c++", "visual-studio-2015", "cocos2d-x"], "comments": [{"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1496851605, "post_id": 44417158, "comment_id": 75834202, "body": "Did you do a custom install to make sure you have all the VS languages, libraries, SDKs you need?  The default install is missing a lot of features.  Note that you can run the installer again to add features without uninstalling."}, {"owner": {"reputation": 1, "user_id": 8126516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffa05b212d42ba5a2c2f5a78c92e3ac?s=128&d=identicon&r=PG&f=1", "display_name": "rencheng.yang", "link": "https://stackoverflow.com/users/8126516/rencheng-yang"}, "reply_to_user": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1496919769, "post_id": 44417158, "comment_id": 75864949, "body": "@daves  I installed Windows SDK indepent of VS2015, but WindowsTargetPlatformVersion configure in libcocos2d.vcxproj file is 10.0.10586.0, I don&#39;t know where set it. Also I am confused why Cocos2d-x need Universal Windows App Development Tools. I still can&#39;t make project done."}, {"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1496937712, "post_id": 44417158, "comment_id": 75878740, "body": "@rencheng.yang Have you tried to run <code>proj.win32</code> project ?"}, {"owner": {"reputation": 1, "user_id": 8126516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffa05b212d42ba5a2c2f5a78c92e3ac?s=128&d=identicon&r=PG&f=1", "display_name": "rencheng.yang", "link": "https://stackoverflow.com/users/8126516/rencheng-yang"}, "edited": false, "score": 0, "creation_date": 1496977793, "post_id": 44417158, "comment_id": 75894564, "body": "I met too much problem, and I afraid I was on a wrong path and would go further, thus, I reinstall again."}, {"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1497122577, "post_id": 44417158, "comment_id": 75949637, "body": "@rencheng.yang now working after reinstallation ?"}, {"owner": {"reputation": 1, "user_id": 8126516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffa05b212d42ba5a2c2f5a78c92e3ac?s=128&d=identicon&r=PG&f=1", "display_name": "rencheng.yang", "link": "https://stackoverflow.com/users/8126516/rencheng-yang"}, "reply_to_user": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1497151732, "post_id": 44417158, "comment_id": 75954952, "body": "@AbhishekAryan I added latest information in answer list."}], "owner": {"reputation": 1, "user_id": 8126516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ffa05b212d42ba5a2c2f5a78c92e3ac?s=128&d=identicon&r=PG&f=1", "display_name": "rencheng.yang", "link": "https://stackoverflow.com/users/8126516/rencheng-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1497149868, "creation_date": 1496849913, "last_edit_date": 1496857328, "question_id": 44417158, "link": "https://stackoverflow.com/questions/44417158/unable-to-read-the-project-file-libcocos2d-vcxproj-in-vs2015", "title": "Unable to read the project file &quot;libcocos2d.vcxproj&quot; in VS2015", "body": "<p>I used <code>cocos new GameDemo -l cpp -d D:\\project\\CocosProject</code> to create a cocos2d-x project in Windows 10, then I open project with VS2015, but I got a lot of errors and my cocos2d-x version is 3.11.1.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ISdMB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ISdMB.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is part of error output</p>\n\n<pre><code>D:\\project\\CocosProject\\GameDemo\\cocos2d\\cocos\\2d\\libcocos2d_win10\\libcocos2d.vcxproj : error  : Unable to read the project file \"libcocos2d.vcxproj\".\nC:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Microsoft.Cpp.Current.targets(108,3): The imported project \"C:\\Program Files (x86)\\MSBuild\\Microsoft.Cpp\\v4.0\\V140\\Application Type\\Windows Store\\10.0\\Platforms\\ARM\\Platform.targets\" was not found. Confirm that the path in the &lt;Import&gt; declaration is correct, and that the file exists on disk.\n</code></pre>\n\n<p>I've been working on this problem for 3 days, I installed, and uninstalled again and again. But I still got this problem. I tried <code>devenv.exe /setup /resetuserdata /resetsettings</code> and it didn't work.</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 1853, "user_id": 6232665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41eeea507e28cddc2bc1efc3b2b73c45?s=128&d=identicon&r=PG&f=1", "display_name": "zenwraight", "link": "https://stackoverflow.com/users/6232665/zenwraight"}, "edited": false, "score": 0, "creation_date": 1496850085, "post_id": 44417069, "comment_id": 75833225, "body": "the implementation is perfectly correct, I think you are facing problem in understanding the definition of next greater element, I guess"}, {"owner": {"reputation": 5538, "user_id": 5980430, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e941fd748178dc871ae6a9974d5099d4?s=128&d=identicon&r=PG&f=1", "display_name": "apple apple", "link": "https://stackoverflow.com/users/5980430/apple-apple"}, "edited": false, "score": 0, "creation_date": 1496850374, "post_id": 44417069, "comment_id": 75833403, "body": "you should include what you expect in question. and what you get from program."}, {"owner": {"reputation": 137, "user_id": 5131756, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-XZ-3VCiGqYc/AAAAAAAAAAI/AAAAAAAAAWU/5Jg-dFBuUxw/photo.jpg?sz=128", "display_name": "Yash Jain", "link": "https://stackoverflow.com/users/5131756/yash-jain"}, "edited": false, "score": 0, "creation_date": 1496862593, "post_id": 44417069, "comment_id": 75840278, "body": "but the output should be sequential as the order of numbers in the question?"}], "answers": [{"tags": [], "owner": {"reputation": 859, "user_id": 6452525, "user_type": "registered", "accept_rate": 20, "profile_image": "https://graph.facebook.com/1137294009661181/picture?type=large", "display_name": "Rahat Zaman", "link": "https://stackoverflow.com/users/6452525/rahat-zaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1496853699, "creation_date": 1496853699, "answer_id": 44418422, "question_id": 44417069, "link": "https://stackoverflow.com/questions/44417069/next-greater-element-in-array/44418422#44418422", "title": "next greater element in array", "body": "<blockquote>\n  <p>Given an array, print the Next Greater Element (NGE) for every element. The Next greater Element for an element x is the first greater element on the right side of x in array.</p>\n</blockquote>\n\n<p>Your code seems to be fine and gives the correct output of the input which you told gives wrong output is as following.</p>\n\n<p>The input is as you mentioned</p>\n\n<pre><code>14 \n10 3 12 4 2 9 13 0 8 11 1 7 5 6\n</code></pre>\n\n<p>The output is</p>\n\n<pre><code>Next greater element for 3       = 12\nNext greater element for 10      = 12\nNext greater element for 2       = 9\nNext greater element for 4       = 9\nNext greater element for 9       = 13\nNext greater element for 12      = 13\nNext greater element for 0       = 8\nNext greater element for 8       = 11\nNext greater element for 1       = 7\nNext greater element for 5       = 6\nNext greater element for 6       = null\nNext greater element for 7       = null\nNext greater element for 11      = null\nNext greater element for 13      = null\n</code></pre>\n\n<p>For example, the second element in the array is <code>3</code>, the next greater element in the array is <code>12</code> (Which is the output).\nThe explanation of the algorithm is not given here as it is well written in the <a href=\"http://www.geeksforgeeks.org/next-greater-element/\" rel=\"nofollow noreferrer\">post</a> you mentioned.</p>\n"}], "owner": {"reputation": 137, "user_id": 5131756, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-XZ-3VCiGqYc/AAAAAAAAAAI/AAAAAAAAAWU/5Jg-dFBuUxw/photo.jpg?sz=128", "display_name": "Yash Jain", "link": "https://stackoverflow.com/users/5131756/yash-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 505, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1496853699, "creation_date": 1496849691, "last_edit_date": 1496849790, "question_id": 44417069, "link": "https://stackoverflow.com/questions/44417069/next-greater-element-in-array", "title": "next greater element in array", "body": "<pre><code>#include&lt;iostream&gt;\n#include &lt;stack&gt;\nusing namespace std;\n\nvoid printNextGreaterElement(int input[], int inputSize) {\n    stack&lt;int&gt; s;\n    s.push(input[0]);\n    for (int i = 1; i &lt; inputSize; i++) {\n        while (!s.empty() &amp;&amp; s.top() &lt; input[i]) {\n            cout&lt;&lt;\"Next greater element for \"&lt;&lt;s.top()&lt;&lt;\"\\t = \"&lt;&lt;input[i]&lt;&lt;\"\\n\";\n            s.pop();\n        }\n        s.push(input[i]);\n    }\n    while (!s.empty()) {\n        int top = (int) s.top();\n        s.pop();\n        cout&lt;&lt;\"Next greater element for \"&lt;&lt;top&lt;&lt;\"\\t = null\\n\";\n    }\n}\n\nint main() {\n    int input[] = { 98, 23, 54, 12, 20, 7, 27 };\n    printNextGreaterElement(input, 7);\n    return 0;\n}\n</code></pre>\n\n<p>I was learning about NGE in the array and came across this piece of code which I found on geeksforgeeks and other websites, but isn't this gives wrong output for the test case: </p>\n\n<p>14 <br>\n10 3 12 4 2 9 13 0 8 11 1 7 5 6</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1496849836, "post_id": 44417021, "comment_id": 75833061, "body": "as per <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd757629(v=vs.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/windows/desktop/&hellip;</a> you need to reference winmm.lib"}, {"owner": {"reputation": 814, "user_id": 6263041, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ir86i.png?s=128&g=1", "display_name": "The Techel", "link": "https://stackoverflow.com/users/6263041/the-techel"}, "edited": false, "score": 0, "creation_date": 1496852142, "post_id": 44417021, "comment_id": 75834543, "body": "timeGetTime is a very poor function for measuring time for benchmarks."}, {"owner": {"reputation": 27, "user_id": 5779725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb42b440763488845729cc81dd81cba?s=128&d=identicon&r=PG&f=1", "display_name": "Trey Roady", "link": "https://stackoverflow.com/users/5779725/trey-roady"}, "edited": false, "score": 0, "creation_date": 1496853646, "post_id": 44417021, "comment_id": 75835462, "body": "I&#39;m not using it for benchmarks. I&#39;m using it as a control function for peripherals which need to be activated according to a particular schedule.  I just called the variable &#39;benchmarks&#39; as a way of establishing points where I wanted responses. This is largely an early debug before I pass in the more detailed instructions"}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 4709368, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c35f64eb2577aa7711c02ae3556f3d4f?s=128&d=identicon&r=PG&f=1", "display_name": "Gaulois94", "link": "https://stackoverflow.com/users/4709368/gaulois94"}, "is_accepted": false, "score": 1, "last_activity_date": 1496849935, "creation_date": 1496849935, "answer_id": 44417167, "question_id": 44417021, "link": "https://stackoverflow.com/questions/44417021/undefined-reference-to-timegettime-in-g/44417167#44417167", "title": "Undefined reference to timeGetTime() in g++", "body": "<p>You have to link libwinmm.</p>\n\n<p>Undefined reference is an error which occures when your compiler knows that the function exist, it knows its prototype, but can't find its corpse. When it is not one of your functions, it surely means you miss to link a library.</p>\n"}], "owner": {"reputation": 27, "user_id": 5779725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdb42b440763488845729cc81dd81cba?s=128&d=identicon&r=PG&f=1", "display_name": "Trey Roady", "link": "https://stackoverflow.com/users/5779725/trey-roady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1571, "favorite_count": 0, "closed_date": 1496849997, "answer_count": 1, "score": 0, "last_activity_date": 1496849935, "creation_date": 1496849587, "question_id": 44417021, "link": "https://stackoverflow.com/questions/44417021/undefined-reference-to-timegettime-in-g", "closed_reason": "Duplicate", "title": "Undefined reference to timeGetTime() in g++", "body": "<p>I'm using g++ command line under Windows 10 to build a basic timing loop and am getting the error: \" undefined reference to `timeGetTime@0' \" when attempting to compile.</p>\n\n<p>The code, itself, is pretty simple:</p>\n\n<pre><code>#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main(){\n   int start = timeGetTime();\n   int finish = 10000;\n   int benchmarks [9] = {1000, 2000, 3000, 4000, 5000, 6000, 7000, 8000, 9000};\n   int i = 0;\n   int time = timeGetTime() - start;\n   while( time &lt; finish){\n       if(time &gt; benchmarks[i]){\n           cout &lt;&lt; benchmarks[i] / 1000 &lt;&lt; endl;\n           i++;\n       }\n\n   return 0;\n}\n</code></pre>\n\n<p>Not sure what I need to do to get g++ to play nicely with the WinAPI. I can't help but wonder if it's an issue with the linker.</p>\n"}, {"tags": ["c++", "templates", "inheritance", "language-lawyer", "name-lookup"], "comments": [{"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 1, "creation_date": 1496849654, "post_id": 44416954, "comment_id": 75832939, "body": "msvc is wrong, obviously. <code>data</code> is a dependent name."}, {"owner": {"reputation": 16382, "user_id": 5507349, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/IaCUb.jpg?s=128&g=1", "display_name": "Edgar Rokj\u0101n", "link": "https://stackoverflow.com/users/5507349/edgar-rokj%c4%81n"}, "edited": false, "score": 0, "creation_date": 1496849892, "post_id": 44416954, "comment_id": 75833098, "body": "clang is correct, msvc is wrong."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1496850054, "post_id": 44416954, "comment_id": 75833211, "body": "MSVC is broken with regards to the two-phase-lookup rules, which include dependent names."}, {"owner": {"reputation": 5666, "user_id": 2392683, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/974ad1bd6b5fe25cadefb23460e2b5d0?s=128&d=identicon&r=PG", "display_name": "chwarr", "link": "https://stackoverflow.com/users/2392683/chwarr"}, "edited": false, "score": 0, "creation_date": 1497651624, "post_id": 44416954, "comment_id": 76185789, "body": "MSVC 2017 with the <a href=\"https://blogs.msdn.microsoft.com/vcblog/2016/11/16/permissive-switch/\" rel=\"nofollow noreferrer\"><code>&#47;permissive-</code></a> switch emits the error &quot;C2065: &#39;data&#39;: undeclared identifier&quot; for this code."}], "answers": [{"tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 16, "last_activity_date": 1496851091, "last_edit_date": 1496851091, "creation_date": 1496850649, "answer_id": 44417428, "question_id": 44416954, "link": "https://stackoverflow.com/questions/44416954/is-this-mandatory-to-access-baset-identifiers-from-derived-classes/44417428#44417428", "title": "Is this-&gt; mandatory to access Base&lt;T&gt; identifiers from derived classes?", "body": "<p>Yes, it is. Basically <code>data</code> depends on <code>T</code>. </p>\n\n<p>There is a mechanism called two-phase lookup. Non-(template)dependent names are resolved immediately - at the point of <em>definition</em>. Your <code>data</code> does not exist yet, because <code>Base&lt;T&gt;</code> does not exist yet, as it was not <em>instantiated</em>. Thus, it complains that <code>data</code> is not found.</p>\n\n<p>You need to hint compiler that <code>data</code> depends on the template, and the name lookup should be performed in the second phase, after template parameters are substituted, i.e. template class was instantiated. This can be done by using <code>this</code> or providing template dependent scope.</p>\n\n<p>So, either <code>this-&gt;f()</code> or <code>Base&lt;T&gt;::f()</code> will work.</p>\n"}, {"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1496862865, "post_id": 44417452, "comment_id": 75840438, "body": "<code>this-&gt;data</code> is not a qualified name."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1496907018, "post_id": 44417452, "comment_id": 75856518, "body": "Still wrong. &quot;qualified name&quot; and &quot;dependent name&quot; are not interchangeable. In fact, they are mutually exclusive."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1496908363, "post_id": 44417452, "comment_id": 75857415, "body": "@T.C. I&#39;m confused; so I can&#39;t say <code>name</code> is non-dependent name or <code>this-&gt;data</code> is dependent name ? Then what should be the correct description for these names? Or I can only say they&#39;re <code>qualified</code> or <code>unqualified</code>? (but not <code>qualified name</code> etc?) Please tell me if I&#39;m wrong at the basic of the answer, or is it a term issue?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1496948501, "post_id": 44417452, "comment_id": 75884869, "body": "The basics is correct, it&#39;s the terminology. &quot;dependent name&quot; has a very narrow and specific definition in the standard (it refers, roughly, to function names subject to ADL in the instantiation context). Here, the point is the other two forms bypass the rule you cited because neither uses unqualified lookup. <code>this-&gt;data</code> uses class member access lookup, and <code>Base&lt;T&gt;::data</code> uses qualified lookup."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 27, "last_activity_date": 1496930301, "last_edit_date": 1496930301, "creation_date": 1496850696, "answer_id": 44417452, "question_id": 44416954, "link": "https://stackoverflow.com/questions/44416954/is-this-mandatory-to-access-baset-identifiers-from-derived-classes/44417452#44417452", "title": "Is this-&gt; mandatory to access Base&lt;T&gt; identifiers from derived classes?", "body": "<p>Clang is correct.</p>\n\n<p><a href=\"http://eel.is/c++draft/temp.dep#3\" rel=\"noreferrer\">$17.6.2/3 Dependent names [temp.dep]</a></p>\n\n<blockquote>\n  <p>In the definition of a class or class template, the scope of a dependent base class is not examined during unqualified name lookup either at the point of definition of the class template or member or during an instantiation of the class template or member.</p>\n</blockquote>\n\n<p>For <code>return data;</code>, <code>data</code> is <em>unqualified</em>, then unqualified name lookup will be employed. This means the name in the base class <code>Base&lt;T&gt;</code> (which is a dependent base class because it depends on the template parameter <code>T</code>) shouldn't be found; i.e. the non-dependent names are not looked up in dependent base classes.</p>\n\n<p><code>this-&gt;data</code> or <code>Base&lt;T&gt;::data</code> makes it <em>qualified</em>. This means the name will be looked up at the time of instantiation, and at that time the exact base specialization that must be explored will be known.</p>\n"}], "owner": {"reputation": 37828, "user_id": 1629821, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/861cfc0de6bf99a544b500eac16229eb?s=128&d=identicon&r=PG", "display_name": "Mr.C64", "link": "https://stackoverflow.com/users/1629821/mr-c64"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1071, "favorite_count": 3, "accepted_answer_id": 44417452, "answer_count": 2, "score": 27, "last_activity_date": 1497129047, "creation_date": 1496849397, "last_edit_date": 1496851519, "question_id": 44416954, "link": "https://stackoverflow.com/questions/44416954/is-this-mandatory-to-access-baset-identifiers-from-derived-classes", "title": "Is this-&gt; mandatory to access Base&lt;T&gt; identifiers from derived classes?", "body": "<p>This code compiles with MSVC 2015, but doesn't compile with Clang 5.0.0 (trunk 304874):</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Base\n{\n  T data;\n};\n\ntemplate &lt;typename T&gt;\nstruct Derived : Base&lt;T&gt;\n{\n  auto getData() const\n  {\n    return data;\n  }\n};\n</code></pre>\n\n<p>Replacing <code>data</code> with <strong><code>this-&gt;data</code></strong> in <code>Derived::getdata()</code> makes Clang happy.</p>\n\n<p>Which compiler is correct according to the C++ standard?</p>\n\n<p>Must <code>this-&gt;</code> be used in template code to access an identifier of a base class?</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 5702, "user_id": 1136195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb5f37d1c4579d52290c503838b9f15?s=128&d=identicon&r=PG", "display_name": "dda", "link": "https://stackoverflow.com/users/1136195/dda"}, "edited": false, "score": 0, "creation_date": 1496982981, "post_id": 44416941, "comment_id": 75895795, "body": "I&#39;m voting to close this question as off-topic because this is not a code-writing website."}], "answers": [{"tags": [], "owner": {"reputation": 9219, "user_id": 979325, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b513c9edd4da1688c05ba041820011c7?s=128&d=identicon&r=PG", "display_name": "Jepessen", "link": "https://stackoverflow.com/users/979325/jepessen"}, "is_accepted": true, "score": 2, "last_activity_date": 1496849736, "creation_date": 1496849736, "answer_id": 44417090, "question_id": 44416941, "link": "https://stackoverflow.com/questions/44416941/split-a-datetime-string-into-date-time-in-c/44417090#44417090", "title": "Split a datetime string into date time in C++", "body": "<p>You can try something like</p>\n\n<pre><code>int year;\nint month;\nint day;\nint hour;\nint minute;\nint second;\nsscanf(buffer, \"%4d%2d%2d%2d%2d%2d\", &amp;year, &amp;month, &amp;day, &amp;hour, &amp;minute, &amp;second);\n</code></pre>\n"}], "owner": {"reputation": 532, "user_id": 2173780, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/otTgY.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/2173780/ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 44417090, "answer_count": 1, "score": 0, "last_activity_date": 1496982943, "creation_date": 1496849362, "last_edit_date": 1496982943, "question_id": 44416941, "link": "https://stackoverflow.com/questions/44416941/split-a-datetime-string-into-date-time-in-c", "title": "Split a datetime string into date time in C++", "body": "<p>Assume that I have an string like this: 20160501124254.000</p>\n\n<p>The string is date and time without delimiter. It must be this: 2016/05/01  12:42:54.</p>\n\n<p>How can I split the first string to the second string and save each date and time in separate variables in C++?</p>\n\n<p>Actually I need a little function for it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1496849284, "post_id": 44416843, "comment_id": 75832672, "body": "<code>j</code> is scoped to the body of your 1st for loop. The address invalidates as soon that loop is left."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1496849292, "post_id": 44416843, "comment_id": 75832682, "body": "I would think that p would go out of scope as soon as the loop exits, so this looks like UB."}, {"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1496849335, "post_id": 44416843, "comment_id": 75832710, "body": "Don&#39;t use pointers.  Just use integers."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1496849338, "post_id": 44416843, "comment_id": 75832713, "body": "@Carcigenicate <code>p</code> going out of scope is not a problem, <code>push_back(p)</code> makes a copy of <code>p</code>. The problem is <code>j</code> going out of scope."}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496849375, "post_id": 44416843, "comment_id": 75832742, "body": "@Fran&#231;oisAndrieux Ahh, good to know. Thanks."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1496849557, "post_id": 44416843, "comment_id": 75832869, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: That&#39;s <i>probably</i> true (and explains the output), although the C++ standard doesn&#39;t say so. Really the stronger condition - the address is invalidated on each <i>iteration</i> is actually the case."}, {"owner": {"reputation": 47, "user_id": 8126490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbc1a9043fd448953f8dd9df2e8c578b?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/8126490/kaiser"}, "edited": false, "score": 0, "creation_date": 1496850824, "post_id": 44416843, "comment_id": 75833722, "body": "Thanks ,can you give me an example about how to add different pointers to vector by circulation."}, {"owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "edited": false, "score": 0, "creation_date": 1496851605, "post_id": 44416843, "comment_id": 75834201, "body": "@Kaiser: What do you mean by &quot;circulation&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 3, "last_activity_date": 1496849631, "last_edit_date": 1496849631, "creation_date": 1496849319, "answer_id": 44416926, "question_id": 44416843, "link": "https://stackoverflow.com/questions/44416843/when-i-add-elements-to-the-vectorint-i-meet-some-problems/44416926#44416926", "title": "when I add elements to the vector&lt;int *&gt;, I meet some problems", "body": "<p><code>j</code> has <em>automatic storage duration</em>, and a pointer to it is only valid in that <em>particular</em> iteration of the <code>for</code> loop.</p>\n\n<p>In other words, you've created a vector of <em>dangling pointers</em>! The behaviour on your dereferencing such a pointer is <em>undefined</em>.</p>\n\n<p>Consider a <code>std::vector&lt;int&gt;</code> instead.</p>\n\n<p>(The fact that you see the same value repeatedly in the output is <em>probably</em> due to the C++ runtime recreating <code>j</code> at the same memory location. But <strong>don't</strong> rely on that. The C++ standard does not insist on that behaviour.)</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 8126490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbc1a9043fd448953f8dd9df2e8c578b?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/8126490/kaiser"}, "edited": false, "score": 0, "creation_date": 1496850741, "post_id": 44417027, "comment_id": 75833662, "body": ",Thanks,can you give me an example on how to add different pointers to vector by circulation."}, {"owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "reply_to_user": {"reputation": 47, "user_id": 8126490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbc1a9043fd448953f8dd9df2e8c578b?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/8126490/kaiser"}, "edited": false, "score": 0, "creation_date": 1498277296, "post_id": 44417027, "comment_id": 76447591, "body": "@Kaiser One can do <code>int * p = new int{i}; a.push_back(p);</code> This way, one has to invoke <code>delete</code> on all members of the <code>vector a</code> before it gets destructed otherwise there memory would be leaked."}], "tags": [], "owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "is_accepted": false, "score": 1, "last_activity_date": 1496849597, "creation_date": 1496849597, "answer_id": 44417027, "question_id": 44416843, "link": "https://stackoverflow.com/questions/44416843/when-i-add-elements-to-the-vectorint-i-meet-some-problems/44417027#44417027", "title": "when I add elements to the vector&lt;int *&gt;, I meet some problems", "body": "<pre><code>std::vector&lt;int *&gt;a;\nfor(i=0;i&lt;3;i++)\n{\n  int j=i+1;\n  int *p=&amp;j;\n  a.push_back(p);\n}\n</code></pre>\n\n<p><code>p</code> is an address in the stack. Moreover, <code>j</code> and <code>p</code> are valid only in the respective iteration of the loop, they are not significant anymore (<code>j</code> is destructed) as soon as the loop goes to the next iteration or ends.</p>\n\n<p>If you really want a vector of pointers, the pointers need to be valid. One option is that pointers point to objects in heap. Another option is that pointers point to objects in stack which never go out of scope, i.e. never destructed.</p>\n\n<p>Another, perhaps better, option is to have a vector of the objects itself, for e.g. <code>vector&lt;int&gt;</code>.</p>\n"}], "owner": {"reputation": 47, "user_id": 8126490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbc1a9043fd448953f8dd9df2e8c578b?s=128&d=identicon&r=PG&f=1", "display_name": "Kaiser", "link": "https://stackoverflow.com/users/8126490/kaiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1496849631, "creation_date": 1496849111, "question_id": 44416843, "link": "https://stackoverflow.com/questions/44416843/when-i-add-elements-to-the-vectorint-i-meet-some-problems", "title": "when I add elements to the vector&lt;int *&gt;, I meet some problems", "body": "<p>here is my coding:</p>\n\n<pre><code>std::vector&lt;int *&gt;a;\nfor(i=0;i&lt;3;i++)\n{\n  int j=i+1;\n  int *p=&amp;j;\n  a.push_back(p);\n}\nfor(auto &amp;c:a)\n{\n  std::cout&lt;&lt;*c&lt;&lt;std::endl;  \n}\n</code></pre>\n\n<p>I want to make the output be 1,2,3 ,but the output is 3,3,3.it seems that I have added  same pointer to a,but I want to add  different pointers to a by circulation,what should I do and how does the mistake above happen?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496849146, "post_id": 44416760, "comment_id": 75832574, "body": "<code>std::make_shared&lt;Matrix&lt;Rows, Cols, Type&gt;&gt;(*this)</code> makes a new <code>Matrix</code> that is a copy of <code>this</code>. I&#39;m not sure how to fix your architecture. Perhaps with <a href=\"http://en.cppreference.com/w/cpp/memory/enable_shared_from_this\" rel=\"nofollow noreferrer\"><code>std::enable_shared_from_this</code></a>? If rows are wholly owned by <code>Matrix</code> objects, you could simply use raw non-owning pointers to refer to the row&#39;s parent matrix."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496849275, "post_id": 44416760, "comment_id": 75832663, "body": "What do you mean by <code>operator(x, y)</code>? Are you referring to <a href=\"http://en.cppreference.com/w/cpp/language/operators#Function_call_operator\" rel=\"nofollow noreferrer\"><code>operator()</code></a>?"}, {"owner": {"reputation": 1, "user_id": 8126266, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PZF_cr5nsWk/AAAAAAAAAAI/AAAAAAAAABI/6V2sMwuQMS8/photo.jpg?sz=128", "display_name": "Yann Herklotz", "link": "https://stackoverflow.com/users/8126266/yann-herklotz"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496849306, "post_id": 44416760, "comment_id": 75832691, "body": "I completely forgot that it created a new <code>Matrix</code>, thank you so much for the quick answer, I think that because of that I will just use a raw pointer to refer to the <code>this</code> pointer."}, {"owner": {"reputation": 1, "user_id": 8126266, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PZF_cr5nsWk/AAAAAAAAAAI/AAAAAAAAABI/6V2sMwuQMS8/photo.jpg?sz=128", "display_name": "Yann Herklotz", "link": "https://stackoverflow.com/users/8126266/yann-herklotz"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1496849363, "post_id": 44416760, "comment_id": 75832729, "body": "and yes that is what I was refering to, with the x and y coordinate in the Matrix."}, {"owner": {"reputation": 1857, "user_id": 5679064, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l2ibgQ05wGY/AAAAAAAAAAI/AAAAAAAAAAA/IJpQJnP_zVo/photo.jpg?sz=128", "display_name": "Gasper", "link": "https://stackoverflow.com/users/5679064/gasper"}, "edited": false, "score": 0, "creation_date": 1496850092, "post_id": 44416760, "comment_id": 75833231, "body": "@YannHerklotz Is there really any need to use raw pointers insted of references in your case?"}, {"owner": {"reputation": 1, "user_id": 8126266, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PZF_cr5nsWk/AAAAAAAAAAI/AAAAAAAAABI/6V2sMwuQMS8/photo.jpg?sz=128", "display_name": "Yann Herklotz", "link": "https://stackoverflow.com/users/8126266/yann-herklotz"}, "reply_to_user": {"reputation": 1857, "user_id": 5679064, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l2ibgQ05wGY/AAAAAAAAAAI/AAAAAAAAAAA/IJpQJnP_zVo/photo.jpg?sz=128", "display_name": "Gasper", "link": "https://stackoverflow.com/users/5679064/gasper"}, "edited": false, "score": 0, "creation_date": 1496850480, "post_id": 44416760, "comment_id": 75833470, "body": "@Gasper What exactly do you mean by that? I would love not to have to use a raw pointer, but I can&#39;t see a way of doing it there."}, {"owner": {"reputation": 1857, "user_id": 5679064, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l2ibgQ05wGY/AAAAAAAAAAI/AAAAAAAAAAA/IJpQJnP_zVo/photo.jpg?sz=128", "display_name": "Gasper", "link": "https://stackoverflow.com/users/5679064/gasper"}, "edited": false, "score": 0, "creation_date": 1496850996, "post_id": 44416760, "comment_id": 75833830, "body": "@YannHerklotz Try using <code>Matrix&lt;Rows, Cols, Type&gt;&amp;</code> as a type for <code>parent_</code> and first type in <code>Row</code> ctor. Then pass <code>*this</code> to it, instead of <code>make_shared(...)</code>. <a href=\"https://ideone.com/oVJ7ef\" rel=\"nofollow noreferrer\">Example</a>"}, {"owner": {"reputation": 1, "user_id": 8126266, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PZF_cr5nsWk/AAAAAAAAAAI/AAAAAAAAABI/6V2sMwuQMS8/photo.jpg?sz=128", "display_name": "Yann Herklotz", "link": "https://stackoverflow.com/users/8126266/yann-herklotz"}, "reply_to_user": {"reputation": 1857, "user_id": 5679064, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l2ibgQ05wGY/AAAAAAAAAAI/AAAAAAAAAAA/IJpQJnP_zVo/photo.jpg?sz=128", "display_name": "Gasper", "link": "https://stackoverflow.com/users/5679064/gasper"}, "edited": false, "score": 0, "creation_date": 1496852697, "post_id": 44416760, "comment_id": 75834889, "body": "@Gasper That wouldn&#39;t work though because it will still create a copy of the object in the initialization list, which is what i wanted to avoid by using shared_ptr and now a raw ptr."}, {"owner": {"reputation": 1857, "user_id": 5679064, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l2ibgQ05wGY/AAAAAAAAAAI/AAAAAAAAAAA/IJpQJnP_zVo/photo.jpg?sz=128", "display_name": "Gasper", "link": "https://stackoverflow.com/users/5679064/gasper"}, "edited": false, "score": 0, "creation_date": 1496853164, "post_id": 44416760, "comment_id": 75835178, "body": "@YannHerklotz It would not create a copy, it would create a <a href=\"https://en.wikipedia.org/wiki/Reference_(C%2B%2B)\" rel=\"nofollow noreferrer\">reference</a> to the same <code>Matrix</code> instance. If it would have created a copy it would not return the same memory address. See, for example, <a href=\"https://stackoverflow.com/questions/57483/what-are-the-differences-between-a-pointer-variable-and-a-reference-variable-in\">this</a>"}, {"owner": {"reputation": 1, "user_id": 8126266, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PZF_cr5nsWk/AAAAAAAAAAI/AAAAAAAAABI/6V2sMwuQMS8/photo.jpg?sz=128", "display_name": "Yann Herklotz", "link": "https://stackoverflow.com/users/8126266/yann-herklotz"}, "reply_to_user": {"reputation": 1857, "user_id": 5679064, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-l2ibgQ05wGY/AAAAAAAAAAI/AAAAAAAAAAA/IJpQJnP_zVo/photo.jpg?sz=128", "display_name": "Gasper", "link": "https://stackoverflow.com/users/5679064/gasper"}, "edited": false, "score": 0, "creation_date": 1496853874, "post_id": 44416760, "comment_id": 75835585, "body": "@Gasper Thank you so much this works nicely! I had misunderstood your answer and interpretted it wrong, forgot that a reference can be stored and is therefore not copied."}], "owner": {"reputation": 1, "user_id": 8126266, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PZF_cr5nsWk/AAAAAAAAAAI/AAAAAAAAABI/6V2sMwuQMS8/photo.jpg?sz=128", "display_name": "Yann Herklotz", "link": "https://stackoverflow.com/users/8126266/yann-herklotz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496848875, "creation_date": 1496848875, "question_id": 44416760, "link": "https://stackoverflow.com/questions/44416760/matrix-element-cannot-be-updated-due-to-function-returning-different-reference", "title": "Matrix element cannot be updated due to function returning different reference", "body": "<p>I am trying to write a templated Matrix class that can be extended and used for other things like vectors. However, I cannot figure out why <code>operator[]</code> in the <code>Row</code> class, does not return the reference to the actual <code>data_</code> vector in the Matrix, but a reference to a different <code>data_</code>.</p>\n\n<p>The code below is the code for the Matrix. I'm using a <code>Row</code> class, which is hidden in a namespace so that I can use the double square brackets to access an element. In that class there is a shared pointer to the parent matrix, so that I can access the <code>data_</code> vector in it from the <code>Row</code> class, which doesn't seem to work though.</p>\n\n<pre><code>#ifndef YAGE_MATH_MATRIX_HPP\n#define YAGE_MATH_MATRIX_HPP\n\n#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;vector&gt;\n\nnamespace yage\n{\n\ntemplate&lt;int Rows, int Cols, class Type&gt; class Matrix;\n\nnamespace detail\n{\n\ntemplate&lt;int Rows, int Cols, class Type&gt; class Row\n{\nprivate:\n    std::shared_ptr&lt;Matrix&lt;Rows, Cols, Type&gt;&gt; parent_;\n    int index_;\n\npublic:\n    Row&lt;Rows, Cols, Type&gt;(std::shared_ptr&lt;Matrix&lt;Rows, Cols, Type&gt;&gt; parent, int index) :\n        parent_(parent), index_(index)\n    {}\n\n    Type &amp;operator[](int col)\n    {\n        std::cout&lt;&lt;\"Other Data: \"&lt;&lt;&amp;parent_-&gt;data_[index_*Cols+col]&lt;&lt;'\\n';\n        return parent_-&gt;data_[index_*Cols+col];\n    }\n};\n\n} // detail\n\ntemplate&lt;int Rows=4, int Cols=4, class Type=double&gt; class Matrix\n{\n    friend class detail::Row&lt;Rows, Cols, Type&gt;;\nprivate:\n    std::vector&lt;Type&gt; data_;\n\npublic:\n    Matrix&lt;Rows, Cols, Type&gt;() : data_(Rows*Cols) {}\n    Matrix&lt;Rows, Cols, Type&gt;(int rows, int cols) : data_(rows*cols) {}\n\n    detail::Row&lt;Rows, Cols, Type&gt; operator[](int row)\n    {\n        std::cout&lt;&lt;\"Main Data: \"&lt;&lt;&amp;data_[10]&lt;&lt;'\\n';     \n        return detail::Row&lt;Rows, Cols, Type&gt;(std::make_shared&lt;Matrix&lt;Rows, Cols, Type&gt;&gt;(*this), row);\n    }\n};\n\n} // yage\n\n#endif\n</code></pre>\n\n<p>I tested these classes with the following program</p>\n\n<pre><code>#include \"Math/matrix.hpp\"\n\n#include &lt;iostream&gt;\n\nint main()\n{\n    yage::Matrix&lt;4, 4&gt; matrix;\n\n    matrix[2][2];\n    return 1; \n}\n</code></pre>\n\n<p>and the output was </p>\n\n<pre><code>Main Data: 0x1f72960\nOther Data: 0x1f72e30\n</code></pre>\n\n<p>which point to two different locations.</p>\n\n<p>I know that there are different ways of solving this, for example using the <code>operator(x, y)</code> overload, but I am curious about what mistake I have made.</p>\n\n<p>Thank you for your help.</p>\n"}, {"tags": ["c++", "qt", "recursion", "qabstractitemmodel", "qmodelindex"], "comments": [{"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 0, "creation_date": 1496849246, "post_id": 44416637, "comment_id": 75832638, "body": "how deep is your model?"}, {"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1496849590, "post_id": 44416637, "comment_id": 75832896, "body": "How deep is the call stack when you get the overflow?  I&#39;m guessing the recursion might not be terminating correctly."}, {"owner": {"reputation": 22818, "user_id": 1387438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad806758c356c915ea08a4bfd79131e3?s=128&d=identicon&r=PG", "display_name": "Marek R", "link": "https://stackoverflow.com/users/1387438/marek-r"}, "edited": false, "score": 1, "creation_date": 1496850019, "post_id": 44416637, "comment_id": 75833189, "body": "also maybe model is broken? It is possible to create cycle in model if custom data model incorrectly implements <code>index</code> and/or <code>parent</code>."}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1496850428, "post_id": 44416637, "comment_id": 75833440, "body": "The problem here is that I do not understand the model that caused the error, so I need feedback on whether the algorithm is correct. The model is unlikely to be broken though - but if the only way for the algorithm to fail is a broken model, then maybe it&#39;s broken indeed."}], "answers": [{"comments": [{"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1496930709, "post_id": 44423162, "comment_id": 75873326, "body": "Thanks so much for all the effort!"}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1496871935, "last_edit_date": 1496871935, "creation_date": 1496871273, "answer_id": 44423162, "question_id": 44416637, "link": "https://stackoverflow.com/questions/44416637/looping-over-all-model-indexes-and-their-children-causes-stack-overflow-error/44423162#44423162", "title": "Looping over all model indexes and their children causes stack overflow error", "body": "<p>The code looks fine. It's a classic depth-first search. <strong>It runs out of stack because your model is not a tree, but a cyclic graph <em>and/or</em> it has infinite depth.</strong></p>\n\n<p>We can reformulate the search with an explicit stack and add tests that ensure a reasonable behavior in face of ill-formed model.</p>\n\n<p>If your model has infinite depth or cycles by design, the code below will act appropriately and won't run out of stack.</p>\n\n<pre><code>// https://github.com/KubaO/stackoverflown/tree/master/questions/model-find-diagnostic-44416637\n#include &lt;QtGui&gt;\n</code></pre>\n\n<p>First, we'll need a set of indexes, since <code>QSet</code> will only work with persistent indexes that we don't use:</p>\n\n<pre><code>class IndexSet : public QMap&lt;QModelIndex, bool&gt; {\npublic:\n   void insert(const QModelIndex &amp; key) { QMap::insert(key, true); }\n};\n</code></pre>\n\n<p>The state of the finder, that we'll keep on an explicit stack:</p>\n\n<pre><code>struct FindState {\n   QModelIndex index;\n   int rows;\n   int cols;\n   int i = 0;\n   int j = 0;\n   FindState() = default;\n   FindState(const QAbstractItemModel* model, const QModelIndex &amp; index) :\n      index(index),\n      rows(model-&gt;rowCount(index)),\n      cols(model-&gt;columnCount(index)) {}\n   bool isInitial() const { return i == 0 &amp;&amp; j == 0; }\n   bool equalTo(const QVariant &amp; value) const {\n      return index.isValid() &amp;&amp; index.data() == value;\n   }\n   bool operator==(const FindState &amp; o) const {\n      return index == o.index;\n   }\n};\n\nQDebug operator&lt;&lt;(QDebug dbg, const FindState &amp; s) {\n   return dbg &lt;&lt; \"{\" &lt;&lt; s.index &lt;&lt; \",\" &lt;&lt; s.i &lt;&lt; \",\" &lt;&lt; s.j &lt;&lt; \"}\";\n}\n</code></pre>\n\n<p>Then, a find utility that verifies that things are sane and that the model doesn't misbehave:</p>\n\n<pre><code>QModelIndex findIndexByValue(const QAbstractItemModel* model, const QVariant&amp; needle,\n                             const QModelIndex&amp; parent = {}) {\n   int iterations = {};\n   int maxDepth = {};\n   const auto depthLimit = 100;\n   IndexSet indexes;\n   QStack&lt;FindState&gt; states;\n   states.push({model, parent});\n   for (; !states.isEmpty(); iterations++) {\n      auto valid = true;\n      auto &amp; top = states.top();\n      if (top.isInitial()) {\n         if (states.size() &gt; 1) {\n            if (!top.index.isValid()) {\n               qWarning() &lt;&lt; \"the index isn't valid, stack:\" &lt;&lt; states;\n               valid = false;\n            }\n            if (!model-&gt;hasIndex(top.index.row(), top.index.column(), top.index.parent())) {\n               qWarning() &lt;&lt; \"the index doesn't exist, stack:\" &lt;&lt; states;\n               valid = false;\n            }\n         }\n         if (indexes.contains(top.index)) {\n            qWarning() &lt;&lt; \"skipping already seen index\" &lt;&lt; top.index;\n            valid = false;\n         }\n         if (valid) {\n            indexes.insert(top.index);\n            if (top.equalTo(needle))\n               break;\n         }\n      }\n      if (valid &amp;&amp; model-&gt;hasChildren(top.index) &amp;&amp; top.i &lt; top.rows &amp;&amp; top.j &lt; top.cols) {\n         FindState state(model, model-&gt;index(top.i, top.j, top.index));\n         top.i ++;\n         if (top.i == top.rows) {\n            top.i = 0;\n            top.j ++;\n         }\n         if (states.contains(state))\n            qWarning() &lt;&lt; \"skipping duplicate index\" &lt;&lt; state.index;\n         else if (states.size() == depthLimit)\n            qWarning() &lt;&lt; \"stack is full, skipping index\" &lt;&lt; state.index;\n         else {\n            states.push(state);\n            maxDepth = std::max(maxDepth, states.size());\n         }\n      } else\n         states.pop();\n   }\n   qDebug() &lt;&lt; \"max depth\" &lt;&lt; maxDepth &lt;&lt; \"iterations\" &lt;&lt; iterations;\n   return states.isEmpty() ? QModelIndex() : states.top().index;\n}\n\nQModelIndex findIndexByString(const QAbstractItemModel* model, const QString&amp; needle, const QModelIndex&amp; parent = {}) {\n   return findIndexByValue(model, QVariant::fromValue(needle), parent);\n}\n</code></pre>\n\n<p>For comparison, we can include the original implementations from the question:</p>\n\n<pre><code>QModelIndex findIndexByString2(const QAbstractItemModel* model, const QString&amp; text,  const QModelIndex&amp; parent = QModelIndex());\nQModelIndex findIndexByString2(const QModelIndex&amp; index, const QString&amp; text) {\n   if (index.data().toString() == text)\n      return index;\n   auto model = index.model();\n   if (!model || !model-&gt;hasChildren(index))\n      return {};\n   return findIndexByString2(model, text, index);\n}\n\nQModelIndex findIndexByString2(const QAbstractItemModel* model, const QString&amp; text,  const QModelIndex&amp; parent) {\n   int rows = model-&gt;rowCount(parent);\n   int cols = model-&gt;columnCount(parent);\n   for (int i = 0; i &lt; rows; ++i)\n      for (int j = 0; j &lt; cols; ++j) {\n         auto child = findIndexByString2(model-&gt;index(i, j, parent), text);\n         if (child.isValid())\n            return child;\n      }\n   return {};\n}\n</code></pre>\n\n<p>Finally, we need a rudimentary test harness. A path into the model is represented by a vector of positions within an item. Each position has a string representation.</p>\n\n<pre><code>struct Pos {\n   int row, col;\n   QString toString() const { return QStringLiteral(\"(%1,%2)\").arg(row).arg(col); }\n};\nQ_DECLARE_TYPEINFO(Pos, Q_PRIMITIVE_TYPE);\nusing Path = QVector&lt;Pos&gt;;\n</code></pre>\n\n<p>The builder adds items to the model to ensure that a given path is valid. Each item's value is a string representing its path as a concatenation of positions that make up the path <code>(row,col)(row,col)...</code>. As the builder builds up the model, it also retains the paths of all the items it created.</p>\n\n<pre><code>struct Builder {\n   QStandardItemModel * model;\n   QStringList paths;\n   Path add(Path path, const Pos &amp; pos) {\n      auto item = model-&gt;invisibleRootItem();\n      path.push_back(pos);\n      QString pathString;\n      for (auto p : path) {\n         pathString += p.toString();\n         auto child = item-&gt;child(p.row, p.col);\n         if (!child) {\n            item-&gt;setChild(p.row, p.col, child = new QStandardItem(pathString));\n            paths &lt;&lt; pathString;\n         }\n         item = child;\n      }\n      return path;\n   }\n   explicit Builder(QStandardItemModel * model) : model(model) {}\n};\n</code></pre>\n\n<p>Finally, we can create a model, and ensure that both methods of finding items provide the same results:</p>\n\n<pre><code>int main() {\n   QStandardItemModel model;\n   Builder b(&amp;model);\n   Path path, ____;\n   path = b.add({}, {1, 0});     // *(1,0)\n   ____ = b.add(path, {1, 1});   //  (1,0)-(1,1)\n   ____ = b.add(path, {0, 0});   //  (1,0)-(0,0)\n   path = b.add({}, {1, 1});     // *(1,1)\n   path = b.add(path, {3, 3});   // *(1,1)-(3,3)\n   ____ = b.add(path, {0, 0});   //  (1,1)-(3,3)-(0,0)\n   path.pop_back();              // -(1,1)\n   path = b.add(path, {2, 2});   // *(1,1)-(2,2)\n   ____ = b.add(path, {0, 1});   //  (1,1)-(2,2)-(0,1)\n   path = b.add({}, {2, 1});     // *(2,1)\n\n   IndexSet indexes;\n   for (auto path : b.paths) {\n      auto index = findIndexByString(b.model, path);\n      auto index2 = findIndexByString2(b.model, path);\n      Q_ASSERT(index.isValid());\n      Q_ASSERT(!indexes.contains(index));\n      Q_ASSERT(index2 == index);\n      indexes.insert(index);\n   }\n}\n</code></pre>\n\n<p>This concludes the example.</p>\n"}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 1, "accepted_answer_id": 44423162, "answer_count": 1, "score": 2, "last_activity_date": 1496871935, "creation_date": 1496848524, "question_id": 44416637, "link": "https://stackoverflow.com/questions/44416637/looping-over-all-model-indexes-and-their-children-causes-stack-overflow-error", "title": "Looping over all model indexes and their children causes stack overflow error", "body": "<p>I created following functions to loop over all indexes in a table or a tree and find the one that contains required string:</p>\n\n<pre><code>#include &lt;QModelIndex&gt;\n#include &lt;QAbstractItemModel&gt;\n#include &lt;QAbstractItemView&gt;\n\nQModelIndex findIndexByString(const QAbstractItemModel* model, const QString&amp; text,  const QModelIndex&amp; parent = QModelIndex());\nQModelIndex findIndexByString(const QModelIndex&amp; index, const QString&amp; text) {\n    // First check this particular index\n    if(index.data().toString() == text)\n        return index;\n    // Check if it has children and loop\n    const QAbstractItemModel* model = index.model();\n    if(model==nullptr)\n        return QModelIndex();\n    if (!model-&gt;hasChildren(index))\n        return QModelIndex();\n    // STACK OVERFLOW HERE (model and index keep repeating)\n    return findIndexByString(model, text, index);\n}\nQModelIndex findIndexByString(const QAbstractItemModel* model, const QString&amp; text,  const QModelIndex&amp; parent) {\n    int rows = model-&gt;rowCount(parent);\n    int cols = model-&gt;columnCount(parent);\n    for (int i = 0; i &lt; rows; ++i)\n      for (int j = 0; j &lt; cols; ++j) {\n        QModelIndex index_child = findIndexByString(model-&gt;index(i, j, parent), text);\n        if(index_child.isValid())\n            return index_child;\n      }\n    return QModelIndex();\n}\nQModelIndex findIndexByString(const QAbstractItemView* view, const QString&amp; text) {\n    //const QModelIndex root = view-&gt;rootIndex();\n    const QAbstractItemModel* model = view-&gt;model();\n    return findIndexByString(model, text);\n}\n</code></pre>\n\n<p>This code is self contained and doesn't have any dependencies outside Qt library.</p>\n\n<p>I encountered stack overflow error when looping over some model in foreign code.</p>\n\n<p>I am trying to create generic correct algorithm to do this. Is the algorithm above correct?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1496850598, "post_id": 44416467, "comment_id": 75833550, "body": "You&#39;re missing the code for <code>main</code>. And how is the <code>MainWindow</code> made aware of a <code>GLwidget</code>&#39;s existence? Finally, you should be using <code>QOpenGLWidget</code> as it&#39;s a more modern API and interoperates better with other widgets."}], "answers": [{"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1496849239, "post_id": 44416782, "comment_id": 75832631, "body": "The setters must call <code>update()</code> to schedule a repaint of the widget, and should also do nothing when the value doesn&#39;t change."}, {"owner": {"reputation": 21, "user_id": 8122187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ouxU4p9ZeA/AAAAAAAAAAI/AAAAAAAAAKI/r5DnTisyg0o/photo.jpg?sz=128", "display_name": "Alan", "link": "https://stackoverflow.com/users/8122187/alan"}, "edited": false, "score": 0, "creation_date": 1496943098, "post_id": 44416782, "comment_id": 75881907, "body": "@Chris: Thank you for helping me out. Could you please clarify where I should put the setter functions?"}, {"owner": {"reputation": 534, "user_id": 4625961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a00278768e0ed82cb846fff48c95c48b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4625961/chris"}, "edited": false, "score": 0, "creation_date": 1497024336, "post_id": 44416782, "comment_id": 75921007, "body": "The setters and the member variables all should be in glwidget.h. If the setters need to do something more complicated you can put the definition for them in glwidget.cpp"}], "tags": [], "owner": {"reputation": 534, "user_id": 4625961, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a00278768e0ed82cb846fff48c95c48b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4625961/chris"}, "is_accepted": false, "score": -1, "last_activity_date": 1497027172, "last_edit_date": 1497027172, "creation_date": 1496848923, "answer_id": 44416782, "question_id": 44416467, "link": "https://stackoverflow.com/questions/44416467/qt-how-to-pass-input-values-from-on-pushbutton-clicked-function-to-paintgl/44416782#44416782", "title": "Qt: how to pass input values from on_pushButton_clicked() function to paintGL()", "body": "<p>This can be solved by using some common object oriented ideas, namely member variables with setter functions. In your subclass of the QGLWidget (glwidget.h) add some member variables.</p>\n\n<pre><code>private:\n  int m_my_int_value;\n  double m_my_double_value;\n</code></pre>\n\n<p>You will then also want some setter functions for those values (also in glwidget.h).</p>\n\n<pre><code>public:\n  void Set_my_int_value(int val);\n  void Set_my_double_value(double val);\n</code></pre>\n\n<p>You can the put the declarations for those functions in glwidget.cpp.</p>\n\n<pre><code>void GLwidget::Set_my_int_value(int val)\n{\n  if(val != m_my_int_value)\n  {\n    m_my_int_value = val;\n    update();\n  }\n}\n\nvoid GLwidget::Set_my_double_value(double val)\n{\n  if(val != m_my_double_value)\n  {\n    m_my_double_value = val;\n    update();\n  }\n}\n</code></pre>\n\n<p>Call those setter functions in your on_click function. Those values will then be accessible in your implementation of paintGL.</p>\n"}, {"comments": [{"owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "edited": false, "score": 0, "creation_date": 1496850605, "post_id": 44416871, "comment_id": 75833555, "body": "You have duplicate paragraphs &#39;Perhaps you&#39;re wishing to show the dataView dynamically as a new top-level window&#39; and no this is not what is asked. I personnaly prefer short, simple and coherent answers..."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "edited": false, "score": 0, "creation_date": 1496850799, "post_id": 44416871, "comment_id": 75833711, "body": "@Tezirg There are no duplicate paragraphs. Given the open-ended nature of the question, I had no choice but to show several possible implementations depending on what the asker desires. If you look at the code you&#39;ll see that it&#39;s not identical across paragraphs. Anything short of the above makes unwarranted assumptions about the structure of the user code, and I&#39;m not sure I&#39;ve not missed a yet another viable scenario."}, {"owner": {"reputation": 21, "user_id": 8122187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ouxU4p9ZeA/AAAAAAAAAAI/AAAAAAAAAKI/r5DnTisyg0o/photo.jpg?sz=128", "display_name": "Alan", "link": "https://stackoverflow.com/users/8122187/alan"}, "edited": false, "score": 0, "creation_date": 1496942788, "post_id": 44416871, "comment_id": 75881737, "body": "@KubaOber: Thanks for your help! I really need sometime to process though. I just started using Qt lately. Btw, is there any recommended tutorial for QOpenGLWidget?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1496945766, "post_id": 44416871, "comment_id": 75883377, "body": "Qt comes with many megabytes of examples. Understand them and you&#39;ll be well on your way to using QOpenGLWidget well."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1496957737, "last_edit_date": 1496957737, "creation_date": 1496849179, "answer_id": 44416871, "question_id": 44416467, "link": "https://stackoverflow.com/questions/44416467/qt-how-to-pass-input-values-from-on-pushbutton-clicked-function-to-paintgl/44416871#44416871", "title": "Qt: how to pass input values from on_pushButton_clicked() function to paintGL()", "body": "<p>The idiomatic approach is to make the widget become a display for the values, with the values being the properties for the widget. This is how all Qt controls work, e.g. a <code>QLabel</code> can display some text, and has a <code>text</code> property that you set using <code>setText</code>. Once <code>setText</code> is called with a new text, the label knows to update itself. Thus:</p>\n\n<pre><code>class DataView : public QOpenGLWidget\n{\n  Q_OBJECT\n  Q_PROPERTY(double principal READ principal WRITE setPrincipal)\n  Q_PROPERTY(int amortizationPeriod READ amortizationPeriod WRITE setAmortizationPeriod)\n  ...\n  double m_principal = {};\n  int m_amortizationPeriod = {};\npublic:\n  explicit GLwidget(QWidget *parent = {}) : QOpenGLWidget(parent) {}\n  void initializeGL() override;\n  void paintGL() override;\n  void resizeGL(int w, int h) override;\n  double principal() const { return m_principal; }\n  void setPrincipal(double principal) {\n    if (m_principal == principal) return;\n    m_principal = principal;\n    update();\n  }\n  int amortizationPeriod() const { return m_amortizationPeriod; }\n  void setAmortizationPeriod(int period) {\n    if (m_amortizationPeriod == period) return;\n    m_amortizationPeriod = period;\n    update();\n  }\n  ...\n};\n</code></pre>\n\n<p><code>update()</code> schedules a repaint from the event loop. The update requests are coalesced, thus setting multiple properties in a row only paints the widget once.</p>\n\n<p>Thus, assuming that you hold the <code>dataView</code> as an element of the Ui form:</p>\n\n<pre><code>void MainWindow::on_pushButton_Calculate_clicked()\n{\n    auto principal = inputcheck(ui-&gt;lineEdit_loan, loan);\n    auto amortizationPeriod = inputcheck(ui-&gt;lineEdit_maturity, maturity);\n    ...\n    ui-&gt;dataView-&gt;setPrincipal(principal);\n    ui-&gt;dataView-&gt;setAmortizationPeriod(amortizationPeriod);\n    ...\n}\n</code></pre>\n\n<p>Perhaps you're wishing to show the <code>dataView</code> dynamically as a new top-level window:</p>\n\n<pre><code>void MainWindow::on_pushButton_Calculate_clicked()\n{\n    auto principal = inputcheck(ui-&gt;lineEdit_loan, loan);\n    auto amortizationPeriod = inputcheck(ui-&gt;lineEdit_maturity, maturity);\n    ...\n    auto dataView = new DataView(this);\n    dataView-&gt;setWindowFlags(dataWidget-&gt;windowFlags() | Qt::Window);\n    dataView-&gt;setPrincipal(principal);\n    dataView-&gt;setAmortizationPeriod(amortizationPeriod);\n    ...\n    dataView-&gt;show();\n}\n</code></pre>\n\n<p>If you wish to make it easier to pass data around, you can bundle all of the properties in a data type representing a loan:</p>\n\n<pre><code>struct Loan {\n  double principal = {};\n  int amortizationPeriod = {};\n  ...\n  bool operator==(const Loan &amp; o) const {\n    return \n      qFuzzyCompare(principal, o.principal)\n      &amp;&amp; amortizationPeriod == o.amortizationPeriod\n      &amp;&amp; ...;\n    // use qFuzzyCompare when comparing floating point values\n  }\n};\nQ_DECLARE_METATYPE(Loan)\n\nclass DataView : public QOpenGLWidget\n{\n  Q_OBJECT\n  Q_PROPERTY(Loan loan READ loan WRITE setLoan)\n  Loan m_loan;\npublic:\n  explicit GLwidget(QWidget *parent = {}) : QOpenGLWidget(parent) {}\n  void initializeGL() override;\n  void paintGL() override;\n  void resizeGL(int w, int h) override;\n  const Loan &amp; loan() const { return m_loan; }\n  Loan getLoan() const { return m_loan; }\n  void setLoan(const Loan &amp; loan) {\n     if (m_loan == loan) return;\n     m_loan = loan;\n     update();\n  }\n};\n</code></pre>\n\n<p>When convenient, one can use <code>getLoan</code> to get a modifiable copy of the loan. The usual <code>loan</code> getter has low cost since it returns a const reference to the internal data, not a copy.</p>\n\n<p>Then:</p>\n\n<pre><code>void MainWindow::on_pushButton_Calculate_clicked()\n{\n    Loan loan;\n    loan.principal = inputcheck(ui-&gt;lineEdit_loan, loan);\n    loan.amortizationPeriod = inputcheck(ui-&gt;lineEdit_maturity, maturity);\n    ...\n    ui-&gt;dataView-&gt;setLoan(loan);\n    ...\n}\n</code></pre>\n\n<p>If you're wishing to show the <code>dataView</code> dynamically as a new top-level window:</p>\n\n<pre><code>void MainWindow::on_pushButton_Calculate_clicked()\n{\n    Loan loan;\n    loan.principal = inputcheck(ui-&gt;lineEdit_loan, loan);\n    loan.amortizationPeriod = inputcheck(ui-&gt;lineEdit_maturity, maturity);\n    ...\n    auto dataView = new DataView(this);\n    dataView-&gt;setWindowFlags(dataView-&gt;windowFlags() | Qt::Window);\n    dataView-&gt;setLoan(loan);\n    dataView-&gt;show();\n}\n</code></pre>\n\n<p>You can also decouple the data view from the <code>MainWindow</code> completely and pass the data out via a signal:</p>\n\n<pre><code>class MainWindow : public QMainWindow {\n  ...\npublic:\n  Q_SLOT newLoan(const Loan &amp;);\n  ...\n};\n\nvoid MainWindow::on_pushButton_Calculate_clicked()\n{\n    Loan loan;\n    loan.principal = inputcheck(ui-&gt;lineEdit_loan, loan);\n    loan.amortizationPeriod = inputcheck(ui-&gt;lineEdit_maturity, maturity);\n    ...\n    emit newLoan(loan);\n}\n\nint main(int argc, char ** argv) {\n  QApplication app(argc, argv);\n  MainWindow mainWindow;\n  DataView dataView;\n  QObject::connect(&amp;mainWindow, &amp;MainWindow::newLoan, [&amp;](const Loan &amp; loan){\n    dataView.setLoan(loan);\n    dataView.show();\n  });\n  mainWindow.show();\n  return app.exec();\n}\n</code></pre>\n\n<p>If the data view is always visible, you'd have:</p>\n\n<pre><code>int main(int argc, char ** argv) {\n  QApplication app(argc, argv);\n  MainWindow mainWindow;\n  DataView dataView;\n  QObject::connect(&amp;mainWindow, &amp;MainWindow::newLoan, &amp;dataView, &amp;DataView::setLoan);\n  mainWindow.show();\n  dataView.show();\n  return app.exec();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1496850297, "post_id": 44416932, "comment_id": 75833354, "body": "Passing the data structure around as a raw pointer cannot be done safely and is a bug. The signal/slot mechanism is used to decouple the code. The emitter of a signal cannot assume anything about the slots nor connection types. By the time the slot is invoked, the pointer might be dangling, or the data might be in the process of being changed, leading to undefined behavior. Instead, pass <code>MyStruct</code> by const reference. Qt will then be able to copy it when needed: <code>Q_SIGNAL void newStruct(const MyStruct &amp;);</code> and <code>struct MyStruct { ... }; Q_DECLARE_METATYPE(MyStruct)</code>."}, {"owner": {"reputation": 21, "user_id": 8122187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ouxU4p9ZeA/AAAAAAAAAAI/AAAAAAAAAKI/r5DnTisyg0o/photo.jpg?sz=128", "display_name": "Alan", "link": "https://stackoverflow.com/users/8122187/alan"}, "edited": false, "score": 0, "creation_date": 1496943207, "post_id": 44416932, "comment_id": 75881971, "body": "@Hajdu: Thanks for the tips! I am a newcomer for Qt so not very familiar with those features, but I will sure try it!"}], "tags": [], "owner": {"reputation": 295, "user_id": 7540723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c0a638cdb0b71a1182f275120c0b33c?s=128&d=identicon&r=PG&f=1", "display_name": "Hajdu G&#225;bor", "link": "https://stackoverflow.com/users/7540723/hajdu-g%c3%a1bor"}, "is_accepted": false, "score": -1, "last_activity_date": 1496849694, "last_edit_date": 1496849694, "creation_date": 1496849332, "answer_id": 44416932, "question_id": 44416467, "link": "https://stackoverflow.com/questions/44416467/qt-how-to-pass-input-values-from-on-pushbutton-clicked-function-to-paintgl/44416932#44416932", "title": "Qt: how to pass input values from on_pushButton_clicked() function to paintGL()", "body": "<p>You can use qt's Signal/Slot mechanizm for it.</p>\n\n<p>Create your own struct, with the needed fields from the input. You can pass it as a pointer through a signal.</p>\n\n<p>Add to mainwindow.h</p>\n\n<pre><code>signals:\n    void MySignal(MyStruct*);\n</code></pre>\n\n<p>in the cpp:</p>\n\n<pre><code>void MainWindow::on_pushButton_Calculate_clicked(){\n\n// getting inputs()\n    loan = inputcheck(ui-&gt;lineEdit_loan, loan);\n    maturity = inputcheck(ui-&gt;lineEdit_maturity, maturity);\n    rate1 = inputcheck(ui-&gt;lineEdit_rate1, rate1);\n    rate2 = inputcheck(ui-&gt;lineEdit_rate2, rate2);\n    rate3 = inputcheck(ui-&gt;lineEdit_rate3, rate3);\n    period2 = inputcheck(ui-&gt;lineEdit_period2, period2);\n    period3 = inputcheck(ui-&gt;lineEdit_period3, period3);\n    printf(\"loan:%f, maturity:%d,rate1:%f,rate2:%f,rate3:%f, period2:%d, period3:%d\\n\", loan, maturity, rate1, rate2, rate3, period2, period3); \n    MyStruct* struct = new MyStruct();\n    ... //add data to mystruct\n    emit MySignal(struct);\n}\n</code></pre>\n\n<p>have a function like this:\n    public slots:\n        void saveData(MyStruct* param); //body should saves the data however you like it</p>\n\n<p>And in possibly main.cpp, where you create the two main widget, have something like this.</p>\n\n<pre><code>MainWindow mainW();\nGLWidget glW();\nconnect(&amp;mainW, SIGNAL( MySignal(MyStruct*)), &amp;glW, SLOT(saveData(MyStruct*)));\n</code></pre>\n\n<p>It is a little rough around the edges, but i hope you get the basic idea. If not, check Qt documentation on Signal/Slot mechanizm.</p>\n"}, {"comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1496850551, "post_id": 44417331, "comment_id": 75833530, "body": "Generally speaking, having a widget&#39;s users invoke <code>update()</code> is an API bug since the implementation detail of a widget leaks out. E.g. after you <code>setText</code> on a <code>QLabel</code>, you shouldn&#39;t need to worry about such details. A widget&#39;s user should never need to invoke <code>update</code>. Essentially, that method should have been protected - it&#39;s an omission in Qt&#39;s API design. Instead, use setter methods that automatically schedule an update when a value has changed."}, {"owner": {"reputation": 21, "user_id": 8122187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ouxU4p9ZeA/AAAAAAAAAAI/AAAAAAAAAKI/r5DnTisyg0o/photo.jpg?sz=128", "display_name": "Alan", "link": "https://stackoverflow.com/users/8122187/alan"}, "edited": false, "score": 0, "creation_date": 1496942525, "post_id": 44417331, "comment_id": 75881596, "body": "@Tezirg: Definitely, but I am still trying to figure out how to do that according to the input type. I just started using Qt lately and I dont know if there is any solution for that."}], "tags": [], "owner": {"reputation": 1571, "user_id": 2034218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607f22adeb07d267b740a5441eb36d6d?s=128&d=identicon&r=PG", "display_name": "Tezirg", "link": "https://stackoverflow.com/users/2034218/tezirg"}, "is_accepted": false, "score": 0, "last_activity_date": 1496850398, "creation_date": 1496850398, "answer_id": 44417331, "question_id": 44416467, "link": "https://stackoverflow.com/questions/44416467/qt-how-to-pass-input-values-from-on-pushbutton-clicked-function-to-paintgl/44417331#44417331", "title": "Qt: how to pass input values from on_pushButton_clicked() function to paintGL()", "body": "<p>Move the variables in your GLwidget class. Here I assumed they are declared public, but you might want to use setters and getters. Then, call update to refresh the widget.</p>\n\n<pre><code>void MainWindow::on_pushButton_Calculate_clicked()\n{\n    ui-&gt;myglwidgetname-&gt;loan = inputcheck&lt;double&gt;(ui-&gt;lineEdit_loan);\n    ui-&gt;myglwidgetname-&gt;maturity = inputcheck&lt;int&gt;(ui-&gt;lineEdit_maturity);\n    ui-&gt;myglwidgetname-&gt;rate1 = inputcheck&lt;double&gt;(ui-&gt;lineEdit_rate1);\n    ui-&gt;myglwidgetname-&gt;rate2 = inputcheck&lt;double&gt;(ui-&gt;lineEdit_rate2);\n    ui-&gt;myglwidgetname-&gt;rate3 = inputcheck&lt;double&gt;(ui-&gt;lineEdit_rate3);\n    ui-&gt;myglwidgetname-&gt;period2 = inputcheck&lt;int&gt;(ui-&gt;lineEdit_period2);\n    ui-&gt;myglwidgetname-&gt;period3 = inputcheck&lt;int&gt;(ui-&gt;lineEdit_period3);\n    ui-&gt;myglwidgetname-&gt;update();    \n}\n</code></pre>\n\n<p>Additionaly, you want to correct your templated function because it is calling <code>toDouble</code> regardless of the type T which doesn't make sense at all...</p>\n"}], "owner": {"reputation": 21, "user_id": 8122187, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3ouxU4p9ZeA/AAAAAAAAAAI/AAAAAAAAAKI/r5DnTisyg0o/photo.jpg?sz=128", "display_name": "Alan", "link": "https://stackoverflow.com/users/8122187/alan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 548, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1497027172, "creation_date": 1496848143, "question_id": 44416467, "link": "https://stackoverflow.com/questions/44416467/qt-how-to-pass-input-values-from-on-pushbutton-clicked-function-to-paintgl", "title": "Qt: how to pass input values from on_pushButton_clicked() function to paintGL()", "body": "<p>I am working on a mortgage calculator with QT.\nWhen the user clicks the push button, the \"on_pushButton_clicked()\" function will get the inputs.</p>\n\n<p>The Question is I am confused about how to pass the inputs from \"on_pushButton_clicked()\" to \"paintGL()\" function for drawing purpose.</p>\n\n<p>My last resort is using global variables to solve this issue, but I really want to avoid something like that...so it will be more than welcome if someone can enlighten with better approaches.</p>\n\n<p>My code are as followed:</p>\n\n<p>mainwindow.h</p>\n\n<pre><code>#ifndef MAINWINDOW_H\n#define MAINWINDOW_H\n\n#include &lt;QMainWindow&gt;\n#include \"ui_mainwindow.h\"\n\nnamespace Ui {\nclass MainWindow;\n}\n\nclass MainWindow : public QMainWindow\n{\n    Q_OBJECT\npublic:\n\n    explicit MainWindow(QWidget *parent = 0);\n    ~MainWindow();\n    template &lt;class T&gt;\n    T inputcheck(QLineEdit *input, T output);\n    //friend class GLwidget;\n    double loan;\n    int maturity;\n    double rate1;\n    double rate2;\n    double rate3;\n    int period2;\n    int period3;    \n\nprivate slots:\n    void on_pushButton_Calculate_clicked();\n\n    void on_pushButton_Quit_clicked();\n\nprivate:\n    Ui::MainWindow *ui;\n};\n\n#endif // MAINWINDOW_H\n</code></pre>\n\n<p>mainwindow.cpp</p>\n\n<pre><code>#include \"mainwindow.h\"\n#include \"ui_mainwindow.h\"\n#include &lt;QCoreApplication&gt;\n#include &lt;QDesktopWidget&gt;\n#include \"glwidget.h\"\n\nMainWindow::MainWindow(QWidget *parent) :\n    QMainWindow(parent),\n    ui(new Ui::MainWindow)\n{\n    ui-&gt;setupUi(this);\n}\n\nMainWindow::~MainWindow()\n{\n    delete ui;\n}\n\ntemplate &lt;class T&gt;\nT MainWindow::inputcheck(QLineEdit *input, T output) \n{\n    bool ok;\n    output = input-&gt;text().toDouble(&amp;ok);\n    if(TRUE &amp;&amp; output &gt; 0)\n    {\n        return output;\n    }\n    else\n    {\n        input-&gt;setText(\"ERR\");\n        return 0;\n    }\n}\n\nvoid MainWindow::on_pushButton_Calculate_clicked()\n{\n\n    // getting inputs()\n    loan = inputcheck(ui-&gt;lineEdit_loan, loan);\n    maturity = inputcheck(ui-&gt;lineEdit_maturity, maturity);\n    rate1 = inputcheck(ui-&gt;lineEdit_rate1, rate1);\n    rate2 = inputcheck(ui-&gt;lineEdit_rate2, rate2);\n    rate3 = inputcheck(ui-&gt;lineEdit_rate3, rate3);\n    period2 = inputcheck(ui-&gt;lineEdit_period2, period2);\n    period3 = inputcheck(ui-&gt;lineEdit_period3, period3);\n    printf(\"loan:%f, maturity:%d,rate1:%f,rate2:%f,rate3:%f, period2:%d, period3:%d\\n\", loan, maturity, rate1, rate2, rate3, period2, period3);      \n\n}\n\nvoid MainWindow::on_pushButton_Quit_clicked()\n{\n    QCoreApplication::quit();\n\n}\n</code></pre>\n\n<p>glwidget.h</p>\n\n<pre><code>#ifndef GLWIDGET_H\n#define GLWIDGET_H\n\n#include &lt;QObject&gt;\n#include &lt;QGLWidget&gt;\n\n\nclass calculation;\nclass GLwidget : public QGLWidget\n{\n    Q_OBJECT\npublic:\n    explicit GLwidget(QWidget *parent = 0);\n    void initializeGL();\n    void paintGL();\n    void resizeGL(int width, int height);\n\nprivate:\n\n};\n\n#endif // GLWIDGET_H\n</code></pre>\n\n<p>glwidget.cpp</p>\n\n<pre><code>#include \"glwidget.h\"\n#include &lt;gl/GL.h&gt;\n\n\nGLwidget::GLwidget(QWidget *parent):QGLWidget(parent)\n{\n}\n\nvoid GLwidget::initializeGL()\n{\n}\n\nvoid GLwidget::paintGL()\n{\n**// I need the inputs to be here!!**\n}\n\nvoid GLwidget::resizeGL(int width, int height)\n{\n}\n</code></pre>\n\n<p>Thanks for your help:)</p>\n"}, {"tags": ["c++", "qt", "linker", "libraries", "archlinux"], "answers": [{"tags": [], "owner": {"reputation": 88, "user_id": 5311320, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nxhn76HmmxM/AAAAAAAAAAI/AAAAAAAABkk/sLp1e-uMeso/photo.jpg?sz=128", "display_name": "shodiqul muzaki", "link": "https://stackoverflow.com/users/5311320/shodiqul-muzaki"}, "is_accepted": false, "score": 0, "last_activity_date": 1503418776, "creation_date": 1503418776, "answer_id": 45822674, "question_id": 44415852, "link": "https://stackoverflow.com/questions/44415852/error-with-library-qt5network/45822674#45822674", "title": "Error with library Qt5Network", "body": "<p>Maybe you can try to install openssl</p>\n\n<pre><code>sudo apt-get install openssl\n</code></pre>\n"}], "owner": {"reputation": 1507, "user_id": 4296244, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/e8c0940effc84e18a8541145ef2dfbfe?s=128&d=identicon&r=PG&f=1", "display_name": "Natjo", "link": "https://stackoverflow.com/users/4296244/natjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503418776, "creation_date": 1496846604, "question_id": 44415852, "link": "https://stackoverflow.com/questions/44415852/error-with-library-qt5network", "title": "Error with library Qt5Network", "body": "<p>My laptop is running arch, and I'm not too familiar with handling libraries yet. I installed some new libraries, mainly qt libraries and I must have broken something. I can't run okular anymore, giving me same error message as <code>ldd /usr/lib/libQt5Network.so</code> does. Also I can't link some object files anymore due to this problem. </p>\n\n<pre><code>ldd /usr/lib/libQt5Network.so\n/usr/lib/libQt5Network.so: /usr/lib/libssl.so.1.0.0: version `OPENSSL_1.0.1' not found (required by /usr/lib/libQt5Network.so)\n/usr/lib/libQt5Network.so: /usr/lib/libssl.so.1.0.0: version `OPENSSL_1.0.2' not found (required by /usr/lib/libQt5Network.so)\n/usr/lib/libQt5Network.so: /usr/lib/libssl.so.1.0.0: version `OPENSSL_1.0.0' not found (required by /usr/lib/libQt5Network.so)\n/usr/lib/libQt5Network.so: /usr/lib/libcrypto.so.1.0.0: version `OPENSSL_1.0.2' not found (required by /usr/lib/libQt5Network.so)\n/usr/lib/libQt5Network.so: /usr/lib/libcrypto.so.1.0.0: version `OPENSSL_1.0.0' not found (required by /usr/lib/libQt5Network.so)\n</code></pre>\n\n<p>What exacty means that error message? And how can I fix it?</p>\n"}, {"tags": ["c++", "windows", "qt", "qt-creator"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496846603, "post_id": 44415803, "comment_id": 75830637, "body": "<i>&quot;all windows on the screen&quot;</i> - what is that even supposed to mean?"}, {"owner": {"reputation": 37, "user_id": 7189967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9866654391e2b33e452ac2d01e2f55f?s=128&d=identicon&r=PG&f=1", "display_name": "andresouris", "link": "https://stackoverflow.com/users/7189967/andresouris"}, "edited": false, "score": 0, "creation_date": 1496846813, "post_id": 44415803, "comment_id": 75830812, "body": "all windows like the navigator, opened applications,...."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496848418, "post_id": 44415803, "comment_id": 75832074, "body": "Ok, in that case I&#39;ll challenge you to <i>&quot;get all windows on the screen&quot;</i>. Pretty sure that UIPI is going to be a pain to convince, that your low-integrity process should gain access to high-integrity resources. But anyway, you have a completely misguided understanding of your target platform. Qt does not emit any sorts of signals for windows, that do not even know Qt."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496919409, "post_id": 44430902, "comment_id": 75864731, "body": "Fails to work across UIPI boundaries. And reaching out to a window owned by a different thread requires, that you know <b>exactly</b> what you are doing, and control the code in both threads for proper co&#246;peration. You don&#39;t control the code in either thread. This <b>will</b> break."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496923563, "post_id": 44430902, "comment_id": 75867680, "body": "P.S.: A robust solution uses <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd373868.aspx\" rel=\"nofollow noreferrer\">WinEvents</a>."}], "tags": [], "owner": {"reputation": 19, "user_id": 3429201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f892b42d261777d0f89af1d30b23094?s=128&d=identicon&r=PG&f=1", "display_name": "kaloskagatos", "link": "https://stackoverflow.com/users/3429201/kaloskagatos"}, "is_accepted": false, "score": -1, "last_activity_date": 1496911651, "creation_date": 1496911651, "answer_id": 44430902, "question_id": 44415803, "link": "https://stackoverflow.com/questions/44415803/how-to-directly-detect-the-window-position/44430902#44430902", "title": "How to directly detect the window position?", "body": "<p>You can try creating a QWindow from the target window and then wrap it in a QWidget using QWidget::createWindowContainer(). </p>\n\n<p>You can have a look at this QTBUG thread : <a href=\"https://bugreports.qt.io/browse/QTBUG-40320\" rel=\"nofollow noreferrer\">https://bugreports.qt.io/browse/QTBUG-40320</a></p>\n\n<p>It needs some effort to make it work properly. The captured window doesn't keep its initial dimensions, and releasing the window behave weirdly. Read the last QTBUG comments to find an improvement.</p>\n\n<p>I added an event filter to this code to capture the window position in real time. But that might be unsatisfying.</p>\n\n<pre><code>class EventFilter : public QObject\n{\n   Q_OBJECT\n\npublic:\n   EventFilter(){}\n   virtual ~EventFilter(){}\n\nprotected:\n     bool eventFilter(QObject *obj, QEvent *event);\n } ;\n\n\nbool EventFilter::eventFilter(QObject *obj, QEvent *event)\n{\n   qDebug() &lt;&lt; event-&gt;type() ;\n\n    if (event-&gt;type() == QEvent::Move) {\n        QMoveEvent *moveEvent = static_cast&lt;QMoveEvent *&gt;(event);\n        qDebug() &lt;&lt; \"position\" &lt;&lt; moveEvent-&gt;pos() ;\n        return true;\n    } else {\n        // standard event processing\n        return QObject::eventFilter(obj, event);\n    }\n}\n</code></pre>\n\n<p>I removed part 3 from the QTBUG snippet and installed the event handler on the inner widget. You can also remove the timers.</p>\n\n<pre><code>// From https://bugreports.qt.io/browse/QTBUG-40320\nint main(int argc, char *argv[])\n{    \n    // Windows: Find HWND by window title\n    WId id = (WId)FindWindow(NULL, L\"Calculator\");\n    if (!id)\n        return -1;\n\n    QApplication a(argc, argv);\n    // Optional\n    QTimer t;\n    t.start(2500);\n\n    // Part 1\n    QWindow* window = QWindow::fromWinId(id);\n    window-&gt;show();\n    window-&gt;requestActivate();\n\n    // Optional\n    QObject::connect(&amp;t, &amp;QTimer::timeout, [=]\n    {\n        qDebug() &lt;&lt; \"=== Inner QWindow ===\";\n        qDebug() &lt;&lt; \"Geometry:\" &lt;&lt; window-&gt;geometry();\n        qDebug() &lt;&lt; \"Active?:\" &lt;&lt; window-&gt;isActive();\n        qDebug() &lt;&lt; \"Flags:\" &lt;&lt; window-&gt;flags();\n    });\n\n    // Part 2\n    QWidget* widget = QWidget::createWindowContainer(window);\n    widget-&gt;show();\n\n    // Optional\n    QObject::connect(&amp;t, &amp;QTimer::timeout, [=]\n    {\n        qDebug() &lt;&lt; \"=== Outer QWidget ===\";\n        qDebug() &lt;&lt; \"Geometry:\" &lt;&lt; widget-&gt;geometry();\n        qDebug() &lt;&lt; \"Active?\" &lt;&lt; widget-&gt;isActiveWindow();\n        qDebug() &lt;&lt; \"Flags:\" &lt;&lt; widget-&gt;windowFlags();\n    });\n\n    // Realtime position\n    EventFilter filter ;\n    widget-&gt;installEventFilter( &amp;filter ) ;\n\n\n    return a.exec();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>=== Inner QWindow ===\nGeometry: QRect(0,0 640x480)\nActive?: true\nFlags: QFlags&lt;Qt::WindowType&gt;(ForeignWindow)\n=== Outer QWidget ===\nGeometry: QRect(2489,29 640x480)\nActive? true\nFlags: QFlags&lt;Qt::WindowType&gt;(Window|WindowTitleHint|WindowSystemMenuHint|WindowMinMaxButtonsHint|WindowCloseButtonHint)\n\nQEvent::Type(Move)\nposition QPoint(2484,29)\nQEvent::Type(Move)\nposition QPoint(2481,30)\nQEvent::Type(Move)\nposition QPoint(2478,31)\nQEvent::Type(Move)\nposition QPoint(2474,31)\n</code></pre>\n\n<p>See also <a href=\"http://blog.qt.io/blog/2013/02/19/introducing-qwidgetcreatewindowcontainer/\" rel=\"nofollow noreferrer\">http://blog.qt.io/blog/2013/02/19/introducing-qwidgetcreatewindowcontainer/</a></p>\n"}], "owner": {"reputation": 37, "user_id": 7189967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9866654391e2b33e452ac2d01e2f55f?s=128&d=identicon&r=PG&f=1", "display_name": "andresouris", "link": "https://stackoverflow.com/users/7189967/andresouris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 176, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1496911651, "creation_date": 1496846490, "question_id": 44415803, "link": "https://stackoverflow.com/questions/44415803/how-to-directly-detect-the-window-position", "title": "How to directly detect the window position?", "body": "<p>I'm coding in c++ with Qt creator. I can get all windows on the screen but I would like to detect their movement directly. Is there any way to detect the movement thanks to a signal emitted by the window ?</p>\n"}, {"tags": ["python", "c++", "arrays", "visual-c++"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "edited": false, "score": 0, "creation_date": 1496846667, "post_id": 44415752, "comment_id": 75830686, "body": "Why not try to make the algorithm more efficient? If it is inefficient in Python, it will still be in inefficient in C++ (in theory)."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1496847135, "post_id": 44415752, "comment_id": 75831081, "body": "Is doing your integration in Python with Numpy an option? It&#39;s quite fast at processing arrays because it uses compiled code rather than the Python interpreter."}, {"owner": {"reputation": 333, "user_id": 272491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b25b92457797cb220ed698fef52d316f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/272491/ben"}, "edited": false, "score": 0, "creation_date": 1496847743, "post_id": 44415752, "comment_id": 75831561, "body": "I&#39;ve tried with Numpy and come to the conclusion that, for me, writing this one step in C++ will ultimately save me time. What I really want is low level memory access and I am finding python/numpy a little opaque in this regard. Maybe it is possible, but I have limited time to get this done, and I have previous experience writing C++ code - so I&#39;d rather just do it this way than spend a lot of time learning to do it in Numpy. Once the data is imported I know what to do in C++."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1496847806, "post_id": 44415752, "comment_id": 75831609, "body": "@InternetAussie There is no efficiency in python. numpy gains efficiency from being implemented in C, not python. The OP simply wants to exploit the same."}, {"owner": {"reputation": 333, "user_id": 272491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b25b92457797cb220ed698fef52d316f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/272491/ben"}, "edited": false, "score": 0, "creation_date": 1496847809, "post_id": 44415752, "comment_id": 75831612, "body": "Also, this step is going to be repeated many hundreds of thousands of times. Any speed increase, even if it is only 20% or something is potentially a big plus. I&#39;m pretty set on using C++. Thanks for the suggestions though!"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1496847966, "post_id": 44415752, "comment_id": 75831726, "body": "Ben: So your question is really about &quot;Passing big arrays of complex numbers from Python to C++&quot;, right?"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1496913641, "post_id": 44415752, "comment_id": 75860755, "body": "Fair enough. So what&#39;s the datatype of your &quot;arrays of complex numbers from the python code&quot;? Are they plain Python lists? If so, Numpy can convert them efficiently to arrays that are contiguous in memory, using either C or Fortran array conventions. And of course it can also do the reverse conversion. So Numpy may be useful for you, even if you don&#39;t want to use it for performing the integration."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 1, "creation_date": 1497000118, "post_id": 44415752, "comment_id": 75904303, "body": "I think you&#39;re <b>asking the wrong question</b>. You <i>assume</i> that the solution to your problem is to pass python data to C++, but perhaps (and likely) the solution is to use numpy. I strongly suggest, you ask another question, where you sketch the actual problem, i.e. give an MVCE (in python)."}, {"owner": {"reputation": 333, "user_id": 272491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b25b92457797cb220ed698fef52d316f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/272491/ben"}, "edited": false, "score": 0, "creation_date": 1497013284, "post_id": 44415752, "comment_id": 75913229, "body": "My arrays are either numpy arrays or mpmath arrays - either way, I can convert them to anything else before they are needed."}, {"owner": {"reputation": 333, "user_id": 272491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b25b92457797cb220ed698fef52d316f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/272491/ben"}, "edited": false, "score": 0, "creation_date": 1497013491, "post_id": 44415752, "comment_id": 75913370, "body": "Walter - you may be right, but as it stands, I&#39;m not familiar with all the ins and outs of numpy and I know how to do this in C++, once I have the data. I would like to use C++ so I can know exactly what is going on at the lowest levels, rather than having to study numpy and work out what it&#39;s doing behind the scenes. The C++ part of this is no issue for me. I just want to import the data conveniently."}], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1496848489, "post_id": 44416400, "comment_id": 75832122, "body": "@martineau why not?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1496849556, "post_id": 44416400, "comment_id": 75832868, "body": "My comment was before you edited it\u2014obviously,wise guy."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1496923414, "post_id": 44416400, "comment_id": 75867551, "body": "Note that this answer assumes that the input are ndarrays, which OP explicitly said are not (well, OP said they aren&#39;t using numpy)."}, {"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1496999362, "post_id": 44416400, "comment_id": 75903799, "body": "@AndrasDeak I assume nothing. I merely demonstrate how one may pass data from python to C++, exemplifying with an <code>numpy.ndarray</code>, but that is only an example. However, the OP would be daft to not use a <code>numpy.ndarray</code>. Note also that the OP does not mention numpy and the comment made does not imply that numpy arrays are not used."}, {"owner": {"reputation": 333, "user_id": 272491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b25b92457797cb220ed698fef52d316f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/272491/ben"}, "edited": false, "score": 0, "creation_date": 1497013840, "post_id": 44416400, "comment_id": 75913607, "body": "I am using numpy! I&#39;ve just found it to be a little slow - or perhaps I should say hard (for me with my current knowledge) to optimise. This is why I would rather use C++."}, {"owner": {"reputation": 333, "user_id": 272491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b25b92457797cb220ed698fef52d316f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/272491/ben"}, "edited": false, "score": 0, "creation_date": 1497013863, "post_id": 44416400, "comment_id": 75913617, "body": "I am trying to implement your solution now."}, {"owner": {"reputation": 333, "user_id": 272491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b25b92457797cb220ed698fef52d316f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/272491/ben"}, "edited": false, "score": 0, "creation_date": 1497340765, "post_id": 44416400, "comment_id": 76023491, "body": "I had to give up on this. Compiling boost was a nightmare, and even when I managed that, my code wouldnt compile without errors. I gave up after three days and just resorted to a million horrible text files. Thanks for the tip about boost though - I may come back to it for future projects where I&#39;m not stuck using visual studio"}], "tags": [], "owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "is_accepted": false, "score": 1, "last_activity_date": 1496999920, "last_edit_date": 1496999920, "creation_date": 1496847960, "answer_id": 44416400, "question_id": 44415752, "link": "https://stackoverflow.com/questions/44415752/passing-big-complex-arrays-from-python-to-c-whats-my-best-option/44416400#44416400", "title": "Passing big complex arrays from Python to C++ - what&#39;s my best option?", "body": "<p><strong>Note added in edit.</strong>\nAs mentioned in the comments, <code>python</code> itself, being an interpreted language, has little potential for computational efficiency. So in order to make python scripts efficient, one must use modules which aren't all interpreted, but under the hood call compiled (and optimized) code written in, say, C/C++. This is exactly what <code>numpy</code> does for you, in particular for operations on whole arrays.</p>\n\n<p>Therefore, the first step towards efficient python scripts is the usage of <code>numpy</code>. Only the second step is to try to use your own compiled (and optimized) code. Therefore, I have assumed in my example below that you were using <code>numpy</code> to store the array of complex numbers. Everything else would be ill-advised.</p>\n\n<hr>\n\n<p>There are various ways in which you can access python's original data from within a C/C++ program. I personally have done this with <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/python/doc/html/index.html\" rel=\"nofollow noreferrer\">boost.Python</a>, but must warn you that the documentation and support are lousy at best: you're pretty much on your own (and stack overflow, of course).</p>\n\n<p>For example your C++ file may look like this</p>\n\n<pre><code>// file.cc\n#include &lt;boost/python.hpp&gt;\n#include &lt;boost/python/numpy.hpp&gt;\n\nnamespace p = boost::python;\nnamespace n = p::numpy;\n\nn::ndarray func(const n::ndarray&amp;input, double control_variable)\n{\n  /* \n     your code here, see documentation for boost python\n     you pass almost any python variable, doesn't have to be numpy stuff\n  */\n}\n\nBOOST_PYTHON_MODULE(module_name)\n{\n  Py_Initialize();\n  n::initialize();   // only needed if you use numpy in the interface\n  p::def(\"function\", func, \"doc-string\");\n}\n</code></pre>\n\n<p>to compile this, you may use a python script such as</p>\n\n<pre><code># setup.py\n\nfrom distutils.core import setup\nfrom distutils.extension import Extension\n\nmodule_name = Extension(\n    'module_name',\n    extra_compile_args=['-std=c++11','-stdlib=libc++','-I/some/path/','-march=native'],\n    extra_link_args=['-stdlib=libc++'],\n    sources=['file.cc'],\n    libraries=['boost_python','boost_numpy'])\n\nsetup(\n    name='module_name',\n    version='0.1',\n    ext_modules=[module_name])\n</code></pre>\n\n<p>and run it as <code>python setup.py build</code>, which will create an appropriate <code>.so</code> file in a sub-directory of <code>build</code>, which you can import from python.</p>\n"}, {"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1497350944, "post_id": 44516036, "comment_id": 76030473, "body": "Could you give a simple example (or point to one)? What is <code>ctypes</code>?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1497372019, "post_id": 44516036, "comment_id": 76046112, "body": "@Walter: ctypes is the standard module to interact from Python code with C libraries; see <a href=\"https://docs.python.org/2/library/ctypes.html\" rel=\"nofollow noreferrer\">its documentation</a>. Also, I added a simple example (with compatibility both with regular lists - with the unavoidable copy - and zero-copy compatibility with numpy arrays)."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "edited": false, "score": 0, "creation_date": 1497590264, "post_id": 44516036, "comment_id": 76150793, "body": "Glad it worked! Did you obtain the speedup you were after in the end?"}, {"owner": {"reputation": 280, "user_id": 4680447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f4740e25c1fc4401897512cf096d05?s=128&d=identicon&r=PG", "display_name": "co9olguy", "link": "https://stackoverflow.com/users/4680447/co9olguy"}, "edited": false, "score": 0, "creation_date": 1510259536, "post_id": 44516036, "comment_id": 81371376, "body": "This solution works great for real arrays but it does not answer the question of how to do it starting from complex numpy arrays in python. Any ideas how to this for <i>complex</i> arrays?"}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 280, "user_id": 4680447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f4740e25c1fc4401897512cf096d05?s=128&d=identicon&r=PG", "display_name": "co9olguy", "link": "https://stackoverflow.com/users/4680447/co9olguy"}, "edited": false, "score": 1, "creation_date": 1510302488, "post_id": 44516036, "comment_id": 81386354, "body": "@co9olguy: I just updated the example on my git, I&#39;ll add it to the question as well."}, {"owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "reply_to_user": {"reputation": 187, "user_id": 2429481, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XcSLs.jpg?s=128&g=1", "display_name": "peedurrr", "link": "https://stackoverflow.com/users/2429481/peedurrr"}, "edited": false, "score": 1, "creation_date": 1593695758, "post_id": 44516036, "comment_id": 110874518, "body": "@peedurrr: it&#39;s actually on Bitbucket - see the first link in the post: <a href=\"https://bitbucket.org/mitalia/ctypes_dll_example\" rel=\"nofollow noreferrer\">bitbucket.org/mitalia/ctypes_dll_example</a>"}], "tags": [], "owner": {"reputation": 114796, "user_id": 214671, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f82954c7134fbe63282dc033fd52f3ab?s=128&d=identicon&r=PG", "display_name": "Matteo Italia", "link": "https://stackoverflow.com/users/214671/matteo-italia"}, "is_accepted": true, "score": 8, "last_activity_date": 1510303896, "last_edit_date": 1510303896, "creation_date": 1497342241, "answer_id": 44516036, "question_id": 44415752, "link": "https://stackoverflow.com/questions/44415752/passing-big-complex-arrays-from-python-to-c-whats-my-best-option/44516036#44516036", "title": "Passing big complex arrays from Python to C++ - what&#39;s my best option?", "body": "<p>An easy solution that I used many times is to build your \"C++ side\" as a dll (=shared object on Linux/OS X), provide a simple, <em>C-like</em> entrypoint (straight integers, pointers &amp; co., no STL stuff) and pass the data through <code>ctypes</code>.</p>\n\n<p>This avoids boost/SIP/Swig/... build nightmares, can be kept zero-copy (with ctypes you can pass a straight pointer to your numpy data) and allow you to do whatever you want (especially on the build-side - no friggin' distutils, no boost, no nothing - build it with whatever can build a C-like dll) on the C++ side. It has also the nice side-effect of having your C++ algorithm callable from other languages (virtually any language has some way to interface with C libraries).</p>\n\n<hr>\n\n<p><a href=\"https://bitbucket.org/mitalia/ctypes_dll_example\" rel=\"noreferrer\">Here</a>'s a quick artificial example. The C++ side is just:</p>\n\n<pre><code>extern \"C\" {\ndouble sum_it(double *array, int size) {\n    double ret = 0.;\n    for(int i=0; i&lt;size; ++i) {\n        ret += array[i];\n    }\n    return ret;\n}\n}\n</code></pre>\n\n<p>This has to be compiled to a dll (on Windows) or a <code>.so</code> (on Linux), making sure to export the <code>sum_it</code> function (automatic with gcc, requires a <code>.def</code> file with VC++).</p>\n\n<p>On the Python side, we can have a wrapper like</p>\n\n<pre><code>import ctypes\nimport os\nimport sys\nimport numpy as np\n\npath = os.path.dirname(__file__)\ncdll = ctypes.CDLL(os.path.join(path, \"summer.dll\" if sys.platform.startswith(\"win\") else \"summer.so\"))\n_sum_it = cdll.sum_it\n_sum_it.restype = ctypes.c_double\n\ndef sum_it(l):\n    if isinstance(l, np.ndarray) and l.dtype == np.float64 and len(l.shape)==1:\n        # it's already a numpy array with the right features - go zero-copy\n        a = l.ctypes.data\n    else:\n        # it's a list or something else - try to create a copy\n        arr_t = ctypes.c_double * len(l)\n        a = arr_t(*l)\n    return _sum_it(a, len(l))\n</code></pre>\n\n<p>which makes sure that the data is marshaled correctly; then invoking the function is as trivial as</p>\n\n<pre><code>import summer\nimport numpy as np\n# from a list (with copy)\nprint summer.sum_it([1, 2, 3, 4.5])\n# from a numpy array of the right type - zero-copy\nprint summer.sum_it(np.array([3., 4., 5.]))\n</code></pre>\n\n<p>See the <a href=\"https://docs.python.org/2/library/ctypes.html\" rel=\"noreferrer\"><code>ctypes</code> documentation</a> for more information on how to use it. See also <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.ctypes.html\" rel=\"noreferrer\">the relevant documentation in numpy</a>.</p>\n\n<hr>\n\n<p>For complex numbers, the situation is slightly more complicated, as there's no builtin for it in ctypes; if we want to use <code>std::complex&lt;double&gt;</code> on the C++ side (which is <a href=\"https://stackoverflow.com/a/5020268/214671\">pretty much guaranteed</a> to work fine with the numpy complex layout, namely a sequence of two doubles), we can write the C++ side as:</p>\n\n<pre><code>extern \"C\" {\nstd::complex&lt;double&gt; sum_it_cplx(std::complex&lt;double&gt; *array, int size) {\n    std::complex&lt;double&gt; ret(0., 0.);\n    for(int i=0; i&lt;size; ++i) {\n        ret += array[i];\n    }\n    return ret;\n}\n}\n</code></pre>\n\n<p>Then, on the Python side, we have to replicate the <code>c_complex</code> layout to retrieve the return value (or to be able to build complex arrays without numpy):</p>\n\n<pre><code>class c_complex(ctypes.Structure):\n    # Complex number, compatible with std::complex layout\n    _fields_ = [(\"real\", ctypes.c_double), (\"imag\", ctypes.c_double)]\n\n    def __init__(self, pycomplex):\n        # Init from Python complex\n        self.real = pycomplex.real\n        self.imag = pycomplex.imag\n\n    def to_complex(self):\n        # Convert to Python complex\n        return self.real + (1.j) * self.imag\n</code></pre>\n\n<p>Inheriting from <code>ctypes.Structure</code> enables the ctypes marshalling magic, which is performed according to the <code>_fields_</code> member; the constructor and extra methods are just for ease of use on the Python side.</p>\n\n<p>Then, we have to tell ctypes the return type</p>\n\n<pre><code>_sum_it_cplx = cdll.sum_it_cplx\n_sum_it_cplx.restype = c_complex\n</code></pre>\n\n<p>and finally write our wrapper, in a similar fashion to the previous one:</p>\n\n<pre><code>def sum_it_cplx(l):\n    if isinstance(l, np.ndarray) and l.dtype == np.complex and len(l.shape)==1:\n        # the numpy array layout for complexes (sequence of two double) is already\n        # compatible with std::complex (see https://stackoverflow.com/a/5020268/214671)\n        a = l.ctypes.data\n    else:\n        # otherwise, try to build our c_complex\n        arr_t = c_complex * len(l)\n        a = arr_t(*(c_complex(r) for r in l))\n    ret = _sum_it_cplx(a, len(l))\n    return ret.to_complex()\n</code></pre>\n\n<p>Testing it as above</p>\n\n<pre><code># from a complex list (with copy)\nprint summer.sum_it_cplx([1. + 0.j, 0 + 1.j, 2 + 2.j])\n# from a numpy array of the right type - zero-copy\nprint summer.sum_it_cplx(np.array([1. + 0.j, 0 + 1.j, 2 + 2.j]))\n</code></pre>\n\n<p>yields the expected results:</p>\n\n<pre><code>(3+3j)\n(3+3j)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 467, "user_id": 2116670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0272acc643ecfeb20f3d82841771d7e?s=128&d=identicon&r=PG", "display_name": "v.chaplin", "link": "https://stackoverflow.com/users/2116670/v-chaplin"}, "is_accepted": false, "score": 3, "last_activity_date": 1540335939, "creation_date": 1540335939, "answer_id": 52958940, "question_id": 44415752, "link": "https://stackoverflow.com/questions/44415752/passing-big-complex-arrays-from-python-to-c-whats-my-best-option/52958940#52958940", "title": "Passing big complex arrays from Python to C++ - what&#39;s my best option?", "body": "<p>I see the OP is over a year old now, but I recently addressed a similar problem using the native Python-C/C++ API and its Numpy-C/C++ extension, and since I personally don't enjoy using ctypes for various reasons (e.g., complex number workarounds, messy code), nor Boost, wanted to post my answer for future searchers.</p>\n\n<p>Documentation for the Python-C API and Numpy-C API are both quite extensive (albeit a little overwhelming at first). But after one or two successes, writing native C/C++ extensions becomes very easy.</p>\n\n<p>Here is an example C++ function that can be called from Python. It integrates a 3D numpy array of either real or complex (<code>numpy.double</code> or <code>numpy.cdouble</code>) type. The function will be imported through a DLL (<code>.so</code>) via the module <code>cintegrate.so</code>.</p>\n\n<pre><code>#include \"Python.h\"\n#include \"numpy/arrayobject.h\"\n#include &lt;math.h&gt;\n\nstatic PyObject * integrate3(PyObject * module, PyObject * args)\n{\n    PyObject * argy=NULL;        // Regular Python/C API\n    PyArrayObject * yarr=NULL;   // Extended Numpy/C API\n    double dx,dy,dz;\n\n    // \"O\" format -&gt; read argument as a PyObject type into argy (Python/C API)\n    if (!PyArg_ParseTuple(args, \"Oddd\", &amp;argy,&amp;dx,&amp;dy,&amp;dz)\n    {\n        PyErr_SetString(PyExc_ValueError, \"Error parsing arguments.\");\n        return NULL;\n    }\n\n    // Determine if it's a complex number array (Numpy/C API)\n    int DTYPE = PyArray_ObjectType(argy, NPY_FLOAT); \n    int iscomplex = PyTypeNum_ISCOMPLEX(DTYPE);      \n\n    // parse python object into numpy array (Numpy/C API)\n    yarr = (PyArrayObject *)PyArray_FROM_OTF(argy, DTYPE, NPY_ARRAY_IN_ARRAY);\n    if (yarr==NULL) {\n        Py_INCREF(Py_None);\n        return Py_None;\n    }\n\n    //just assume this for 3 dimensional array...you can generalize to N dims\n    if (PyArray_NDIM(yarr) != 3) {\n        Py_CLEAR(yarr);\n        PyErr_SetString(PyExc_ValueError, \"Expected 3 dimensional integrand\");\n        return NULL;\n    }\n\n    npy_intp * dims = PyArray_DIMS(yarr);\n    npy_intp i,j,k,m;\n    double * p;\n\n    //initialize variable to hold result\n    Py_complex result = {.real = 0, .imag = 0};\n\n    if (iscomplex) {\n        for (i=0;i&lt;dims[0];i++) \n            for (j=0;j&lt;dims[1];j++) \n                for (k=0;k&lt;dims[1];k++) {\n                    p = (double*)PyArray_GETPTR3(yarr, i,j,k);\n                    result.real += *p;\n                    result.imag += *(p+1);\n                }\n    } else {\n        for (i=0;i&lt;dims[0];i++) \n            for (j=0;j&lt;dims[1];j++) \n                for (k=0;k&lt;dims[1];k++) {\n                    p = (double*)PyArray_GETPTR3(yarr, i,j,k);\n                    result.real += *p;\n                }\n    }\n\n    //multiply by step size\n    result.real *= (dx*dy*dz);\n    result.imag *= (dx*dy*dz);\n\n    Py_CLEAR(yarr);\n\n    //copy result into returnable type with new reference\n    if (iscomplex) {\n        return Py_BuildValue(\"D\", &amp;result);\n    } else {\n        return Py_BuildValue(\"d\", result.real);\n    }\n\n};\n</code></pre>\n\n<p>Simply put that into a source file (we'll call it <code>cintegrate.cxx</code> along with the module definition stuff, inserted at the bottom:</p>\n\n<pre><code>static PyMethodDef cintegrate_Methods[] = {\n    {\"integrate3\",  integrate3, METH_VARARGS,\n     \"Pass 3D numpy array (double or complex) and dx,dy,dz step size. Returns Reimman integral\"},\n    {NULL, NULL, 0, NULL}        /* Sentinel */\n};\n\n\nstatic struct PyModuleDef module = {\n   PyModuleDef_HEAD_INIT,\n   \"cintegrate\",   /* name of module */\n   NULL, /* module documentation, may be NULL */\n   -1,       /* size of per-interpreter state of the module,\n                or -1 if the module keeps state in global variables. */\n   cintegrate_Methods\n};\n</code></pre>\n\n<p>Then compile that via <code>setup.py</code> much like Walter's boost example with just a couple obvious changes- replacing <code>file.cc</code> there with our file <code>cintegrate.cxx</code>, removing boost dependencies, and making sure the path to <code>\"numpy/arrayobject.h\"</code> is included.</p>\n\n<p>In python then you can use it like:</p>\n\n<pre><code>import cintegrate\nimport numpy as np\n\narr = np.random.randn(4,8,16) + 1j*np.random.randn(4,8,16)\n\n# arbitrary step size dx = 1., y=0.5, dz = 0.25\nans = cintegrate.integrate3(arr, 1.0, 0.5, .25)\n</code></pre>\n\n<p>This specific code hasn't been tested but is mostly copied from working code.</p>\n"}], "owner": {"reputation": 333, "user_id": 272491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b25b92457797cb220ed698fef52d316f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/272491/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4497, "favorite_count": 3, "accepted_answer_id": 44516036, "answer_count": 3, "score": 4, "last_activity_date": 1540335939, "creation_date": 1496846394, "last_edit_date": 1497340614, "question_id": 44415752, "link": "https://stackoverflow.com/questions/44415752/passing-big-complex-arrays-from-python-to-c-whats-my-best-option", "title": "Passing big complex arrays from Python to C++ - what&#39;s my best option?", "body": "<p>2017/06/13 EDIT:\nI tried using boost as was suggested, but after spending more than 3 days trying to get it to compile and link, and failing, I decided that the stupid painful way was probably the fastest and less painfull.... so now my code just saves a mess of gigantic text files (splitting arrays and the complex/ imaginary parts of the numbers across files) that C++ then reads. Elegant... no.... effective... yes.</p>\n\n<hr>\n\n<p>I have some scientific code, currently written in Python, that is being slowed down by a numerical 3d integration step within a loop. To overcome this I am re-writing this particular step in C++. (Cython etc is not an option).</p>\n\n<p>Long story short: I want to transfer several very large arrays of complex numbers from the python code to the C++ integrator as conveniently and painlessly as possible. I could do this manually and painfully using text or binary files - but before I embark on this, I was wondering if I have any better options?</p>\n\n<p>I'm using visual studio for C++ and anaconda for python (not my choice!)</p>\n\n<p>Is there any file format or method that would make it quick and convenient to save an array of complex numbers from python and then recreate it in C++?</p>\n\n<p>Many thanks,\nBen</p>\n"}, {"tags": ["c++", "scrollbar", "wtl", "editcontrol"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496846363, "post_id": 44415667, "comment_id": 75830456, "body": "When using WTL, your <code>CEdit</code> already subclasses a native EDIT control. Not sure what else you wish to subclass. Besides, <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20040510-00/?p=39413\" rel=\"nofollow noreferrer\">there are two types of scrollbars</a>. You haven&#39;t mentioned, which one you are using."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 2, "creation_date": 1496846453, "post_id": 44415667, "comment_id": 75830518, "body": "Even once you subclass the control, there is no &quot;easy&quot; way to change the color of a scrollbar. That is a project that would take an expert Win32 developer <i>several days</i> to implement; longer if he wanted it bug-free. I tried once a few years ago, in attempting to answer a SO question, and gave up because there are better things to do with your time. I strongly recommend abandoning this. What&#39;s wrong with the system theme? Why does your app need to stick out like a sore thumb?"}, {"owner": {"reputation": 203, "user_id": 8104188, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d8617539bff1793c4358775c3c877f0e?s=128&d=identicon&r=PG&f=1", "display_name": "LucasN", "link": "https://stackoverflow.com/users/8104188/lucasn"}, "edited": false, "score": 0, "creation_date": 1496847009, "post_id": 44415667, "comment_id": 75830980, "body": "Sorry, I am using the automatic vertical scroll bar that is invoked by setting the proporties <code>Auto VScroll</code> to True and <code>Vertical Scroll</code> to True in the resource editor."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1496847190, "post_id": 44415667, "comment_id": 75831112, "body": "Yeah, so you are using the automatic scrollbars. The ones everyone uses because they&#39;re easy and built-in. That means it&#39;ll be even harder, if not downright <i>impossible</i> to change their color. They aren&#39;t real controls; they&#39;re not even windows; there&#39;s no way to subclass them. The only way to do it would be to turn those off and either draw your own scrollbars or use the standalone scrollbar control that you had subclassed and customized. Which I already said is prohibitively difficult."}, {"owner": {"reputation": 1778, "user_id": 2440728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1fWyQ.jpg?s=128&g=1", "display_name": "VuVirt", "link": "https://stackoverflow.com/users/2440728/vuvirt"}, "edited": false, "score": 0, "creation_date": 1504009874, "post_id": 44415667, "comment_id": 78836284, "body": "You can check this out: <a href=\"https://www.catch22.net/tuts/custom-scrollbars\" rel=\"nofollow noreferrer\">catch22.net/tuts/custom-scrollbars</a>"}], "owner": {"reputation": 203, "user_id": 8104188, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/d8617539bff1793c4358775c3c877f0e?s=128&d=identicon&r=PG&f=1", "display_name": "LucasN", "link": "https://stackoverflow.com/users/8104188/lucasn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496846165, "creation_date": 1496846165, "question_id": 44415667, "link": "https://stackoverflow.com/questions/44415667/how-to-change-the-color-of-a-scrollbar-in-a-cedit-control", "title": "How to change the color of a scrollbar in a CEdit Control?", "body": "<p>I'm using a CEdit Control with the WTL framework and I've been searching around and I'm having trouble finding how to change the color of the scrollbar. Is there an easy way to do this or do you need to subclass the control?</p>\n"}, {"tags": ["c++", "c++11", "constants", "shared-ptr"], "answers": [{"tags": [], "owner": {"reputation": 52450, "user_id": 1498580, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e7d5410ef5f5fe837842a8b35aab9831?s=128&d=identicon&r=PG", "display_name": "ForEveR", "link": "https://stackoverflow.com/users/1498580/forever"}, "is_accepted": false, "score": 2, "last_activity_date": 1496846483, "creation_date": 1496846483, "answer_id": 44415799, "question_id": 44415518, "link": "https://stackoverflow.com/questions/44415518/how-to-write-a-getter-for-a-container-of-shared-ptrs-which-does-not-allow-modifi/44415799#44415799", "title": "How to write a getter for a container of shared_ptrs which does not allow modification of data", "body": "<p>If you want to make your getter to return vector of shared pointers to const data, there is only one way, to return copy of shared pointers to const data.</p>\n\n<pre><code>const vector&lt;shared_ptr&lt;const int&gt;&gt; readMyVector() const \n{\n   vector&lt;shared_ptr&lt;const int&gt;&gt; cdata(myVector_.begin(), myVector_.end());\n   return cdata;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1496849533, "post_id": 44415808, "comment_id": 75832848, "body": "&quot;<i>You may want to consider simply returning a vector of int</i>&quot; - agreed. If you don&#39;t want people touching the original data, don&#39;t give direct access to it in the first place."}, {"owner": {"reputation": 669, "user_id": 6253379, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VDrH9.png?s=128&g=1", "display_name": "Nikos Kazazakis", "link": "https://stackoverflow.com/users/6253379/nikos-kazazakis"}, "edited": false, "score": 0, "creation_date": 1497287269, "post_id": 44415808, "comment_id": 76003499, "body": "In the end this is what I did, but put weak_ptrs in the vector instead. I used ints for the example, in reality I have some very large objects that I shouldn&#39;t really be copying :)"}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 2, "last_activity_date": 1496846505, "creation_date": 1496846505, "answer_id": 44415808, "question_id": 44415518, "link": "https://stackoverflow.com/questions/44415518/how-to-write-a-getter-for-a-container-of-shared-ptrs-which-does-not-allow-modifi/44415808#44415808", "title": "How to write a getter for a container of shared_ptrs which does not allow modification of data", "body": "<p>The correct type to return is <code>std::vector&lt;std::shared_ptr&lt;const int&gt;&gt;</code>, but you'll have to make that vector by hand. <code>std::shared_ptr&lt;T&gt;</code> is convertible to <code>std::shared_ptr&lt;const T&gt;</code>, but the problem is that <code>std::vector&lt;T&gt;</code> isn't implicitly convertible to <code>std::vector&lt;U&gt;</code> simply because <code>T</code> is convertible to <code>U</code>. </p>\n\n<p>The easiest way is to construct a vector from your internal vector's <code>begin</code> and <code>end</code> iterators.</p>\n\n<pre><code>vector&lt;shared_ptr&lt;const int&gt;&gt; readMyVector() const \n{\n    return{ myVector_.begin(), myVector_.end() };\n}\n</code></pre>\n\n<p>Note that adding <code>const</code> to the return type of a function that returns by value is rarely useful.</p>\n\n<p>You should also ask yourself rather it's worth it to copy all of those <code>std::shared_ptr</code>. You may want to consider simply returning a vector of <code>int</code>.</p>\n"}], "owner": {"reputation": 669, "user_id": 6253379, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/VDrH9.png?s=128&g=1", "display_name": "Nikos Kazazakis", "link": "https://stackoverflow.com/users/6253379/nikos-kazazakis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 44415808, "answer_count": 2, "score": 2, "last_activity_date": 1496846505, "creation_date": 1496845828, "question_id": 44415518, "link": "https://stackoverflow.com/questions/44415518/how-to-write-a-getter-for-a-container-of-shared-ptrs-which-does-not-allow-modifi", "title": "How to write a getter for a container of shared_ptrs which does not allow modification of data", "body": "<p>Let's say I have a private variable which is a vector of <code>shared_ptr</code>s to non-<code>const</code> objects.</p>\n\n<p>Is it possible to write a getter method which only allows read access to the data pointed to by the shared pointers?</p>\n\n<p>I want to be able to use range-based loops for elegance, so I want to avoid writing <code>const_iterators</code>.</p>\n\n<p>My understanding is that const <code>shared_ptr&lt;T&gt;</code> makes the pointer itself <code>const</code>, not <code>T</code>. I tried to compile <code>shared_ptr&lt;const T&gt;</code>, but it doesn't compile if <code>T</code> itself is not declared <code>const</code> in the class. </p>\n\n<p>In other words, how could I write something like:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;memory&gt;\n\nusing std::vector;\nusing std::shared_ptr;\nusing std::make_shared;\nusing std::cout;\nusing std::endl;\n\nclass MyClass{\n\npublic:\n    MyClass(int element1, int element2)\n    {\n        myVector_.push_back(std::make_shared&lt;int&gt;(element1));\n        myVector_.push_back(std::make_shared&lt;int&gt;(element2));\n    }\n\n    // I want something like this, but doesn't compile\n//  const vector&lt;shared_ptr&lt;const int&gt;&gt; readMyVector() const {return myVector_;}\n\n    const vector&lt;shared_ptr&lt;int&gt;&gt; readMyVector() const {return myVector_;}\n\nprivate:\n\n    // Should NOT be &lt;const int&gt;, the class should be able to modify its elements\n    vector&lt;shared_ptr&lt;int&gt;&gt; myVector_;\n};\n\nint main(){\n    auto testobject = MyClass(1,2);\n    for (auto my_protected_data : testobject.readMyVector()){\n        cout&lt;&lt;(*my_protected_data)&lt;&lt;endl;\n        (*my_protected_data) = 25;\n        cout&lt;&lt;(*my_protected_data)&lt;&lt;endl; // Should not happen\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "macos", "clang", "cin"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 4, "creation_date": 1496845334, "post_id": 44415197, "comment_id": 75829567, "body": "Can you provide your <code>main</code> so that we could independently run and reproduce your issue?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 5, "creation_date": 1496845335, "post_id": 44415197, "comment_id": 75829568, "body": "I can&#39;t reproduce. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Your example is nearly there."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1496845562, "post_id": 44415197, "comment_id": 75829733, "body": "putting <a href=\"https://stackoverflow.com/q/213907/995714\"><code>endl</code> in the middle of the string is not a good idea</a>"}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 5, "creation_date": 1496845568, "post_id": 44415197, "comment_id": 75829741, "body": "<a href=\"https://ideone.com/aEVaCy\" rel=\"nofollow noreferrer\">Works fine here</a>, and also locally on my machine. Tried your newly-added MCVE, and can&#39;t repro it with that, either. Something&#39;s unusual about your system configuration. What compiler are you using? Which OS?"}, {"owner": {"reputation": 15002, "user_id": 927652, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UenmI.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/927652/joe"}, "reply_to_user": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 0, "creation_date": 1496845629, "post_id": 44415197, "comment_id": 75829804, "body": "@CodyGray minimal example added - it&#39;s entirely possible that it&#39;s something on my machine. I&#39;m on a Mac running Sierra, compiling with G++ for C++11. Beyond that, I don&#39;t know what else is relevant so feel free to ask me for information that might be"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496845707, "post_id": 44415197, "comment_id": 75829882, "body": "<a href=\"http://ideone.com/0uTx1R\" rel=\"nofollow noreferrer\">Still cannot reproduce</a>"}, {"owner": {"reputation": 15002, "user_id": 927652, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UenmI.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/927652/joe"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1496845757, "post_id": 44415197, "comment_id": 75829919, "body": "@L\u01b0uV\u0129nhPh&#250;c I&#39;ve swapped out the <code>endl</code>s for <code>\\n</code> and still get the same behaviour"}, {"owner": {"reputation": 15002, "user_id": 927652, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UenmI.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/927652/joe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496845835, "post_id": 44415197, "comment_id": 75829992, "body": "@NathanOliver I&#39;m definitely willing to believe it&#39;s an issue with my computer rather than the code. See my above comment to Cody, do you have any idea what might cause an issue like this, and is there any info I can provide to help figure it out?"}, {"owner": {"reputation": 931, "user_id": 2394967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFaiD.png?s=128&g=1", "display_name": "sknt", "link": "https://stackoverflow.com/users/2394967/sknt"}, "edited": false, "score": 1, "creation_date": 1496845945, "post_id": 44415197, "comment_id": 75830094, "body": "Also works fine here (gcc 6.3.0 on arch linux). What compiler/ide/terminal emulator are you using? Have you tried running the code directly from the terminal?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496845968, "post_id": 44415197, "comment_id": 75830114, "body": "It sounds like you have a bad implementation and when it sees <code>A-F</code> it tries to read it in a hex input.  When it realizes it can&#39;t it does not put the characters back into the stream so you see the first letter truncated.  What happens if you change <code>Fred</code> to <code>AAAJoe</code>?"}, {"owner": {"reputation": 15002, "user_id": 927652, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UenmI.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/927652/joe"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1496846132, "post_id": 44415197, "comment_id": 75830257, "body": "@NathanOliver <code>AAAJoe</code> becomes <code>Joe</code>, further supporting the hex theory. I don&#39;t understand <code>Xavier</code> becoming <code>r</code> or <code>Nick</code> becoming <code>k</code> though"}, {"owner": {"reputation": 15002, "user_id": 927652, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UenmI.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/927652/joe"}, "reply_to_user": {"reputation": 931, "user_id": 2394967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFaiD.png?s=128&g=1", "display_name": "sknt", "link": "https://stackoverflow.com/users/2394967/sknt"}, "edited": false, "score": 0, "creation_date": 1496846203, "post_id": 44415197, "comment_id": 75830317, "body": "@Skynet compiler is G++, text editor is Atom and the terminal is the default OSX Terminal. I&#39;ve tried running directly through that and have the same issue."}, {"owner": {"reputation": 221394, "user_id": 366904, "user_type": "moderator", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3f8912af19fe86b7b34a0b011a962460?s=128&d=identicon&r=PG", "display_name": "Cody Gray", "link": "https://stackoverflow.com/users/366904/cody-gray"}, "edited": false, "score": 1, "creation_date": 1496846328, "post_id": 44415197, "comment_id": 75830431, "body": "If you&#39;re on macOS, the compiler is <i>probably</i> Clang. It&#39;s just lying to you and saying that it&#39;s G++. That&#39;s a game Apple has been playing for a long time for compatibility reasons. I don&#39;t have Sierra here; my Mac is still running Mavericks with an older version of the compiler. (I don&#39;t use it for development.)"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496851667, "post_id": 44415197, "comment_id": 75834246, "body": "Eating characters is literally <code>cin</code>&#39;s job ;)"}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1496915374, "post_id": 44431738, "comment_id": 75862033, "body": "It&#39;s not a bug. The behavior is correct. The standard specifically says all characters that can be part of the specified type should be consumed."}, {"owner": {"reputation": 15002, "user_id": 927652, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UenmI.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/927652/joe"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1496916340, "post_id": 44431738, "comment_id": 75862761, "body": "@DavidSchwartz cheers for the extra info - I&#39;ve updated the answer. At this point of my learning, there&#39;s an awful lot of stuff I don&#39;t know so thanks for the better explanation of what&#39;s actually going on"}], "tags": [], "owner": {"reputation": 15002, "user_id": 927652, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UenmI.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/927652/joe"}, "is_accepted": false, "score": 3, "last_activity_date": 1496916237, "last_edit_date": 1496916237, "creation_date": 1496913984, "answer_id": 44431738, "question_id": 44415197, "link": "https://stackoverflow.com/questions/44415197/cin-incorrectly-parses-double-input-on-mac/44431738#44431738", "title": "`cin` incorrectly parses `double` input on Mac", "body": "<p>Having looked into this further, it would appear that <code>libc++</code> doesn't read doubles from <code>cin</code> in the way you'd except. I'm not sure if it's only specifically doubles, but I think it might be. It only appears to affect the Clang compiler on OSX, and it's <em>really</em> annoying :P</p>\n\n<p>For the TL;DR version please see David's answer which I've accepted.</p>\n\n<p>I'm not currently aware of any <strong>good</strong> fix for it, but if you add the compiler flag <code>-stdlib=libstdc++</code> you can force it to use an older, deprecated stdlib which will work as expected. Obviously it has less features (in my example, <code>std::sort</code> and <code>std::domain_error</code> were missing). Other options include not using <code>double</code> and doing further parsing on the input (although as I'm new to C++, I don't have a scooby on that one I'm afraid).</p>\n\n<p>Related reading:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/33478527/trying-to-read-lines-from-an-ascii-file-using-c-ubuntu-vs-mac\">Trying to read lines from an ASCII file using C++ , Ubuntu vs Mac...?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/37459179/c-reading-a-double-followed-by-a-character-from-cin\">C++ - Reading a double, followed by a character, from cin</a></li>\n<li><a href=\"https://stackoverflow.com/questions/32167735/stdistringstream-to-double-weird-behaviour\">std::istringstream &gt;&gt; to double weird behaviour</a></li>\n<li><a href=\"http://clang-developers.42468.n3.nabble.com/g-4-2-8-vs-libc-bug-td4051616.html\" rel=\"nofollow noreferrer\">http://clang-developers.42468.n3.nabble.com/g-4-2-8-vs-libc-bug-td4051616.html</a>\n\n<ul>\n<li><a href=\"https://hg.mozilla.org/mozilla-central/raw-rev/edd76ca3717f\" rel=\"nofollow noreferrer\">https://hg.mozilla.org/mozilla-central/raw-rev/edd76ca3717f</a></li>\n</ul></li>\n</ul>\n\n<p>The <a href=\"https://bugs.llvm.org//show_bug.cgi?id=17782\" rel=\"nofollow noreferrer\">official bug report</a> was opened 3.5 years ago and still hasn't been resolved.</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 2, "last_activity_date": 1496915491, "creation_date": 1496915491, "answer_id": 44432374, "question_id": 44415197, "link": "https://stackoverflow.com/questions/44415197/cin-incorrectly-parses-double-input-on-mac/44432374#44432374", "title": "`cin` incorrectly parses `double` input on Mac", "body": "<p>If you have specific requirements for how the decision is to be made whether something is a <code>double</code> or not, you have to write code that implements those requirements. The standard permits any leading characters that could be part of a valid floating point representation to be discarded. Letters like \"e\", \"i\", \"n\" and \"f\" can be part of a valid floating point representation.</p>\n\n<p>For why this kind of coding is never a good idea, see <a href=\"http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/\" rel=\"nofollow noreferrer\">Falsehoods Programmers Believe About Names</a>, particularly number 15.</p>\n"}], "owner": {"reputation": 15002, "user_id": 927652, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UenmI.png?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/927652/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 1, "accepted_answer_id": 44432374, "answer_count": 2, "score": 2, "last_activity_date": 1496916237, "creation_date": 1496844925, "last_edit_date": 1496915086, "question_id": 44415197, "link": "https://stackoverflow.com/questions/44415197/cin-incorrectly-parses-double-input-on-mac", "title": "`cin` incorrectly parses `double` input on Mac", "body": "<p>A little bit of background - I'm new to learning C++. I'm working through <em>Accelerated C++</em> and following things along. In chapter 4, the code I've got doesn't quite work as the book suggests, and I've double-checked all my of code to make sure I'm not mis-typing something from their example (I can't see any errors, anyway).</p>\n\n<hr>\n\n<p>I have the following struct and two functions:</p>\n\n<pre><code>struct Student {\n  std::string        name;\n  double             midtermGrade, finalGrade;\n  std::vector&lt;double&gt;homework;\n};\n\nstd::istream&amp; read(std::istream&amp; is, Student&amp; s) {\n  is &gt;&gt; s.name &gt;&gt; s.midtermGrade &gt;&gt; s.finalGrade;\n\n  std::cout &lt;&lt; std::endl &lt;&lt; \"Name: \" &lt;&lt; s.name &lt;&lt; std::endl\n            &lt;&lt; \" - Md: \" &lt;&lt; s.midtermGrade &lt;&lt; std::endl\n            &lt;&lt; \" - Fn: \" &lt;&lt; s.finalGrade &lt;&lt; std::endl;\n\n  read_hw(is, s.homework);\n\n  return is;\n}\n\nstd::istream&amp; read_hw(std::istream&amp; in, std::vector&lt;double&gt;&amp; hw) {\n  if (in) {\n    hw.clear();\n\n    double h;\n\n    while (in &gt;&gt; h) {\n      std::cout &lt;&lt; \" - Hw: \" &lt;&lt; h &lt;&lt; std::endl;\n      hw.push_back(h);\n    }\n\n    in.clear();\n  }\n\n  return in;\n}\n</code></pre>\n\n<hr>\n\n<p>In <code>int main()</code> I'm calling that code like this:</p>\n\n<pre><code>Student record;\nwhile (read(std::cin, record)) {\n</code></pre>\n\n<p>If I compile and run, then paste (or type) in the following input, I get the following output:</p>\n\n<pre><code>// Input\nJohnny 70 80 50 Fred 95 90 100 Joe 40 40 50\n\n// Output\nName: Johnny\n - Md: 70\n - Fn: 80\n - Hw: 50\n\nName: red\n - Md: 95\n - Fn: 90\n - Hw: 100\n\nName: Joe\n - Md: 40\n - Fn: 40\n - Hw: 50\n</code></pre>\n\n<p>As you can see, \"Fred\" has become \"red\". I've tried this with a whole bunch of names; anything starting with A-F is affected by the same issue, which caused me to suspect it may be a hexadecimal issue. However, \"Nick\" becomes \"k\" and \"Xander\" simply becomes \"r\".</p>\n\n<p>I'm utterly baffled. Do you have any idea what's going on?</p>\n\n<hr>\n\n<p>As requested, here's a MCVE:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nstruct Student {\n  std::string        name;\n  double             midtermGrade, finalGrade;\n  std::vector&lt;double&gt;homework;\n};\n\nstd::istream&amp; read_hw(std::istream&amp; in, std::vector&lt;double&gt;&amp; hw) {\n  if (in) {\n    hw.clear();\n\n    double h;\n\n    while (in &gt;&gt; h) {\n      std::cout &lt;&lt; \" - Hw: \" &lt;&lt; h &lt;&lt; std::endl;\n      hw.push_back(h);\n    }\n\n    in.clear();\n  }\n\n  return in;\n}\n\nstd::istream&amp; read(std::istream&amp; is, Student&amp; s) {\n  is &gt;&gt; s.name &gt;&gt; s.midtermGrade &gt;&gt; s.finalGrade;\n\n  std::cout &lt;&lt; std::endl &lt;&lt; \"Name: \" &lt;&lt; s.name &lt;&lt; std::endl\n            &lt;&lt; \" - Md: \" &lt;&lt; s.midtermGrade &lt;&lt; std::endl\n            &lt;&lt; \" - Fn: \" &lt;&lt; s.finalGrade &lt;&lt; std::endl;\n\n  read_hw(is, s.homework);\n\n  return is;\n}\n\nint main()\n{\n  Student record;\n\n  std::vector&lt;Student&gt; students;\n\n  while (read(std::cin, record)) {}\n\n  return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "templates", "template-meta-programming", "type-deduction"], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1496845909, "post_id": 44415330, "comment_id": 75830064, "body": "Thank you for you reply. I forgot to mention that it&#39;s a C++11 question. This is one of the reason one should go for C++17, because that code would be the ideal solution!  The second approach  unfortunately doesn&#39;t fit what I&#39;m looking to achieve. I&#39;d like to avoid the creation of structs like int_"}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": false, "score": 2, "last_activity_date": 1496845296, "creation_date": 1496845296, "answer_id": 44415330, "question_id": 44415152, "link": "https://stackoverflow.com/questions/44415152/dependent-type-automatic-deduction/44415330#44415330", "title": "Dependent type automatic deduction", "body": "<p>You can use an <code>auto</code> template parameter in C++17:</p>\n\n<pre><code>template &lt;auto T&gt;\nconstexpr auto f()\n{\n    return std::integral_constant&lt;decltype(T), T&gt;{};\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>f&lt;3&gt;(); // integral_constant&lt;int, 3&gt;\n</code></pre>\n\n<hr>\n\n<p>Alternatively, you need to wrap your value in a compile-time friendly way:</p>\n\n<pre><code>template &lt;int X&gt;\nstruct int_ \n{ \n    using type = int;\n    static constexpr value = X; \n};\n\ntemplate &lt;typename T&gt;\nconstexpr auto f(T)\n{\n    return std::integral_constant&lt;typename T::type, T::value&gt;{};\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>f(int_&lt;3&gt;{});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "edited": false, "score": 0, "creation_date": 1496848730, "post_id": 44416557, "comment_id": 75832282, "body": "I&#39;ll try to go deeper into your solution.. but I don&#39;t think is going to work for what I need: integral_constant&lt; int(*)int, &amp;myIntToIntFunction&gt; for instance"}], "tags": [], "owner": {"reputation": 13337, "user_id": 4324224, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/YF2EX.png?s=128&g=1", "display_name": "W.F.", "link": "https://stackoverflow.com/users/4324224/w-f"}, "is_accepted": false, "score": 2, "last_activity_date": 1496848355, "creation_date": 1496848355, "answer_id": 44416557, "question_id": 44415152, "link": "https://stackoverflow.com/questions/44415152/dependent-type-automatic-deduction/44416557#44416557", "title": "Dependent type automatic deduction", "body": "<p>Since c++11 you can declare your own literals (I used here <code>std::index_sequence</code> and it's c++14 but you can easily find c++11 implementation of aforesaid): </p>\n\n<pre><code>#include &lt;utility&gt; // for std::index_sequence and std::size_t\n\nconstexpr std::size_t ipow(std::size_t base, int exp, std::size_t result = 1) {\n  return exp &lt; 1 ? result : ipow(base*base, exp/2, (exp % 2) ? result*base : result);\n}\n\nconstexpr std::size_t vdot(std::index_sequence&lt;&gt;, std::index_sequence&lt;&gt;) {\n    return 0;\n}\n\ntemplate &lt;std::size_t C, std::size_t... Cs, std::size_t I, std::size_t... Is&gt;\nconstexpr std::size_t vdot(std::index_sequence&lt;C, Cs...&gt;, std::index_sequence&lt;I, Is...&gt;) {\n    return C*ipow(10, I) + vdot(std::index_sequence&lt;Cs...&gt;{}, std::index_sequence&lt;Is...&gt;{});\n}\n\ntemplate &lt;char... Cs&gt;\nstd::integral_constant&lt;std::size_t, vdot(std::index_sequence&lt;static_cast&lt;std::size_t&gt;(Cs - '0')...&gt;{}, std::make_index_sequence&lt;sizeof...(Cs)&gt;{})&gt; operator \"\"_ic() {\n    return {};\n}\n\nint main() {\n   auto ic = 3_ic;\n   static_cast&lt;void&gt;(ic);\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/XVtVpsiSqekSn2nH\" rel=\"nofollow noreferrer\">[live demo]</a></p>\n"}, {"tags": [], "owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1497288924, "creation_date": 1497288924, "answer_id": 44505505, "question_id": 44415152, "link": "https://stackoverflow.com/questions/44415152/dependent-type-automatic-deduction/44505505#44505505", "title": "Dependent type automatic deduction", "body": "<p>In C++11 and C++14 this is impossible as per</p>\n\n<p>\u00a714.8.2.5 [temp.deduct.type] 13 and 14 </p>\n\n<blockquote>\n  <p>A template type argument cannot be deduced from the type of a non-type\n  <em>template-argument</em>. [Example:<br/> </p>\n</blockquote>\n\n<pre><code>template&lt;class T, T i&gt; void f(double a[10][i]); \nint v[10][20]; \nf(v); // error: argument for template-parameter T cannot be deduced \n</code></pre>\n\n<blockquote>\n  <p>\u2014end example ]</p>\n</blockquote>\n\n<p>So you are forced to specify a type. e.g. <code>f&lt;int, 3&gt;(/*...*/)</code></p>\n\n<p>I give full credit to @Barry for teaching me this <a href=\"https://stackoverflow.com/a/44265134/27678\">in his answer to my last question</a></p>\n\n<h3><a href=\"https://wandbox.org/permlink/6YxpVsYf6FjJ6oLM\" rel=\"nofollow noreferrer\">Demo</a></h3>\n"}], "owner": {"reputation": 435, "user_id": 3770392, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/6207865d4dbfc82b015c9d591855c555?s=128&d=identicon&r=PG&f=1", "display_name": "user3770392", "link": "https://stackoverflow.com/users/3770392/user3770392"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1497288924, "creation_date": 1496844812, "last_edit_date": 1496850743, "question_id": 44415152, "link": "https://stackoverflow.com/questions/44415152/dependent-type-automatic-deduction", "title": "Dependent type automatic deduction", "body": "<p>is it possible to do something like:</p>\n\n<pre><code>template&lt;class T, T type&gt;\nconstexpr auto f(/* type used in some way... */) // -&gt; decltype (etc. in case of C++11)\n  {\n  return std::integral_constant&lt;T,t&gt;{};\n  }\n\nconstexpr auto z = f(3); // z is deduced as an integral_constant&lt;int,3&gt;;\n</code></pre>\n\n<p>It's for sure not possible using a runtime value, but 3 in this case is a compile time value. Maybe someone knows some trick I'm not aware of...</p>\n\n<p>[edit]\n  constexpr auto z2 = f&lt;3>(); // This would be ok too</p>\n\n<p>I just would like to avoid to repeat the type..  </p>\n"}, {"tags": ["android", "c++", "android-ndk", ".so"], "answers": [{"tags": [], "owner": {"reputation": 1544, "user_id": 240864, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/TwqhF.jpg?s=128&g=1", "display_name": "Tancho", "link": "https://stackoverflow.com/users/240864/tancho"}, "is_accepted": false, "score": 0, "last_activity_date": 1496929331, "creation_date": 1496929331, "answer_id": 44437385, "question_id": 44414944, "link": "https://stackoverflow.com/questions/44414944/use-c-functions-in-so-file-which-is-also-placed-in-aar/44437385#44437385", "title": "use C++ functions in .so file which is also placed in .aar", "body": "<p>You need the first SO file->A in the compile time of B.</p>\n\n<p>Specifically in the linking stage. You cannot build a component B which links to A, without having no access to A in compile time. </p>\n\n<p>Your library should link against A which you can manually extract from the aar, and you can use them for compile time, then ship your app by only providing your (B.so) file. </p>\n"}], "owner": {"reputation": 361, "user_id": 3127838, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/9f9bb138e279c45b3bc6eadc1b2c364e?s=128&d=identicon&r=PG&f=1", "display_name": "parliament", "link": "https://stackoverflow.com/users/3127838/parliament"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496929331, "creation_date": 1496844329, "question_id": 44414944, "link": "https://stackoverflow.com/questions/44414944/use-c-functions-in-so-file-which-is-also-placed-in-aar", "title": "use C++ functions in .so file which is also placed in .aar", "body": "<p>I have an Android project which is developed by using NDK. I have a A.cpp file inside cpp folder. For this project, I have imported another project as .aar library and dependent it for my first project. </p>\n\n<p>So the project which is imported, is also developed by using NDK and it has B.cpp file. There are .so files for all arms (armeabi-v7a .etc) in this project. Now i want to call functions in B.cpp from A.cpp. How can I achieve this?</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZCkgu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZCkgu.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "redis", "cmake", "ros", "catkin"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496853111, "post_id": 44414902, "comment_id": 75835153, "body": "Setting compiler <b>after</b> <code>project()</code> call doesn&#39;t work, see <a href=\"https://stackoverflow.com/a/22619145/3440745\">that answer</a>."}, {"owner": {"reputation": 1, "user_id": 8126098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af7e4844ef7989a0dd167474c6470f4?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter", "link": "https://stackoverflow.com/users/8126098/wouter"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496907881, "post_id": 44414902, "comment_id": 75857107, "body": "@Tsyvarev If I define my compiler before <code>project()</code>, the compilation of my CMakeLists.txt runs into an infinite loop.."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496910326, "post_id": 44414902, "comment_id": 75858565, "body": "Probably something wrong with your project. In any case <code>It seems to have problems with the parameters of methods, because if I call a method on client without any parameters for instance client.commit() then it just compiles and runs.</code> usually means that your library is compiled with <b>different c++ compiler</b> than your executable. Like the library is built with <code>g++</code>, but you use <code>clang++</code> for executable."}, {"owner": {"reputation": 1, "user_id": 8126098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af7e4844ef7989a0dd167474c6470f4?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter", "link": "https://stackoverflow.com/users/8126098/wouter"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496912967, "post_id": 44414902, "comment_id": 75860287, "body": "@Tsyvarev Thanks for your reply, I also think it has to do with the compiler. I now changed the compiler to G++ version 4.8.5, then my redis library compiles correctly but ROS doesn&#39;t link correctly (same weird undefined references). If I change the G++ version to 5, it is the other way around (ROS links correctly, cppredis not). Is there any solution for that?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496913252, "post_id": 44414902, "comment_id": 75860485, "body": "<code>Is there any solution for that?</code> - Compile ROS and redis with the <i>same</i> compiler, and use this compiler for your project."}, {"owner": {"reputation": 1, "user_id": 8126098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af7e4844ef7989a0dd167474c6470f4?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter", "link": "https://stackoverflow.com/users/8126098/wouter"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1496914994, "post_id": 44414902, "comment_id": 75861746, "body": "@Tsyvarev I now compiled both with G++5, that worked. Thank you very much!"}], "owner": {"reputation": 1, "user_id": 8126098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6af7e4844ef7989a0dd167474c6470f4?s=128&d=identicon&r=PG&f=1", "display_name": "Wouter", "link": "https://stackoverflow.com/users/8126098/wouter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1532, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1496844220, "creation_date": 1496844220, "question_id": 44414902, "link": "https://stackoverflow.com/questions/44414902/catkin-ros-c-library-link-error-undefined-reference", "title": "Catkin/ROS C++ library link error (undefined reference)", "body": "<p>I'm trying to use the <a href=\"https://github.com/Cylix/cpp_redis\" rel=\"nofollow noreferrer\">CPP Redis</a> library in my ROS project. It seems to fail to link to the cpp-redis correctly, on the following code:</p>\n\n<pre><code>#include \"ros/ros.h\"\n#include \"std_msgs/String.h\"\n#include \"communication.h\"\n#include \"ros/ros.h\"\n\nint main (int argc, char **argv)\n{\n    // Initialize and get a handle\n    ros::init(argc, argv, \"team3\");\n    ros::NodeHandle n;\n\n    //directly from the example\n    cpp_redis::redis_client client;\n    client.connect(\"127.0.0.1\", 6379, [](cpp_redis::redis_client&amp;) {\n        std::cout &lt;&lt; \"client disconnected (disconnection handler)\" &lt;&lt; std::endl;\n    });\n\n}\n</code></pre>\n\n<p>With the following error:</p>\n\n<pre><code>/home/wouter/Documents/Team3_Visitor_Goal/ros/src/team3/src/publisher.cpp:17: undefined reference to `cpp_redis::redis_client::connect(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, unsigned long, std::function&lt;void (cpp_redis::redis_client&amp;)&gt; const&amp;)'\n</code></pre>\n\n<p>My CMakeLists.txt looks as followed:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8.3)\nproject(team3)\n\nset(CMAKE_CXX_COMPILER \"clang++\")\nset(CMAKE_C_COMPILER \"clang\")\nset(CMAKE_VERBOSE_MAKEFILE ON)\nset(CMAKE_CXX_STANDARD 11) #set correct version\n\n## Find catkin macros and libraries\n## if COMPONENTS list like find_package(catkin REQUIRED COMPONENTS xyz)\n## is used, also find other catkin packages\nfind_package(catkin REQUIRED COMPONENTS\n  naoqi_driver\n  roscpp\n  std_msgs\n)\n\n## Declare a catkin package\ncatkin_package()\n\n## Build talker and listener\ninclude_directories(include ${catkin_INCLUDE_DIRS})\n\nadd_executable(pepper src/publisher.cpp)\ntarget_link_libraries(pepper ${catkin_LIBRARIES} cpp_redis tacopie)\n</code></pre>\n\n<p>I am using the CLang compiler in combination with the build system of <a href=\"http://wiki.ros.org/ROS/Introduction\" rel=\"nofollow noreferrer\">ROS</a> which is called catkin.</p>\n\n<p>So there are some odd things:</p>\n\n<ul>\n<li><p>It looks like it is linked correctly because if I remove the <code>cpp_redis</code> and <code>tacopie</code> out of the target_link_libraries I get a lot more undefined references and my IDE just recognizes everything.</p></li>\n<li><p>It seems to have problems with the parameters of methods, because if I call a method on <code>client</code> without any parameters for instance <code>client.commit()</code> then it just compiles and runs. The code I use for the redis library did I get from the examples they provide so I assume they are correct. </p></li>\n</ul>\n\n<p>I have seriously no clue what is going wrong, it works fine if I try to use it in a project without <code>catkin</code>. I hope you guys can help me out. Thanks!</p>\n"}, {"tags": ["c++", "operator-overloading", "iostream", "cout"], "comments": [{"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1496844401, "post_id": 44414863, "comment_id": 75828796, "body": "&quot;<i><code>cout &lt;&lt; expr</code> is equivalent of <code>cout.operator&lt;&lt;(expr)</code></i>&quot; is not universally true. The answer from the 2nd question + 1st comment explain that. Not sure if that counts as duplicate... Perhaps this would help: <a href=\"https://stackoverflow.com/questions/36809463/is-there-any-advantage-to-implementing-functions-as-free-functions-rather-than-m/36809565#36809565\" title=\"is there any advantage to implementing functions as free functions rather than m\">stackoverflow.com/questions/36809463/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 5, "last_activity_date": 1496844346, "creation_date": 1496844346, "answer_id": 44414949, "question_id": 44414863, "link": "https://stackoverflow.com/questions/44414863/understanding-behavior-of-cout-operator/44414949#44414949", "title": "Understanding behavior of cout.operator&lt;&lt;()", "body": "<p><strong>It depends on <code>expr</code>.</strong></p>\n\n<p>The answers to both questions are speaking to that specific case, not a blanket guarantee.</p>\n\n<p>In fact, some of the <code>operator&lt;&lt;</code>s are <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt\" rel=\"nofollow noreferrer\">free</a> <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt2\" rel=\"nofollow noreferrer\">functions</a>, and some are <a href=\"http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt\" rel=\"nofollow noreferrer\">member functions</a>.</p>\n\n<p>Consult your favourite C++ reference to find out which.</p>\n"}, {"tags": [], "owner": {"reputation": 27952, "user_id": 3747990, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qE6kU.png?s=128&g=1", "display_name": "Niall", "link": "https://stackoverflow.com/users/3747990/niall"}, "is_accepted": false, "score": 3, "last_activity_date": 1496866868, "last_edit_date": 1496866868, "creation_date": 1496844402, "answer_id": 44414975, "question_id": 44414863, "link": "https://stackoverflow.com/questions/44414863/understanding-behavior-of-cout-operator/44414975#44414975", "title": "Understanding behavior of cout.operator&lt;&lt;()", "body": "<p>The equivalency of <code>cout &lt;&lt; expr</code> and <code>cout.operator&lt;&lt;(expr)</code> depends on what <code>expr</code> is.</p>\n\n<p>If it lands up being a \"built in\" type, that <code>cout</code> \"knows\" about, then yes, it is equivalent to <code>cout.operator&lt;&lt;(expr)</code> (a member function).</p>\n\n<p>If it is a \"user type\" (and <code>std::string</code> counts here), then it is an overloaded non-member method with a signature akin to <code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp;, const std::string&amp;);</code> etc.</p>\n\n<blockquote>\n  <p>Why does <code>cout.operator&lt;&lt;(\"hello world\")</code> print a memory address?</p>\n</blockquote>\n\n<p>The best member method overload to the above (since it is being forced to use the member method, is <code>ostream&amp; operator&lt;&lt;(const void* value);</code> which outputs the value of the pointer (not what is being pointed to).</p>\n\n<p>By contrast, <code>cout &lt;&lt; \"hello world\"</code> calls the non-member overload <code>ostream&amp; operator&lt;&lt;(ostream&amp;, const char*)</code> and this in-turn inserts each character into the output.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7988941"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 1, "answer_count": 2, "score": 5, "last_activity_date": 1496866868, "creation_date": 1496844118, "last_edit_date": 1496847717, "question_id": 44414863, "link": "https://stackoverflow.com/questions/44414863/understanding-behavior-of-cout-operator", "title": "Understanding behavior of cout.operator&lt;&lt;()", "body": "<p>According to the top answer to <a href=\"https://stackoverflow.com/questions/20070606/cout-and-cin-are-not-functions-so-what-are-they\">this question</a>, <code>cout &lt;&lt; expr</code> is equivalent to <code>cout.operator&lt;&lt;(expr)</code>.</p>\n\n<p>According to responses to <a href=\"https://stackoverflow.com/questions/4763067/difference-between-cout-x-and-cout-operator-x\">this question</a>, the statement above is untrue.</p>\n\n<p>According to my own testing, <code>cout.operator&lt;&lt;()</code> is the same as <code>cout &lt;&lt;</code> when given an integer.  When given a float, <code>cout.operator&lt;&lt;()</code> coerces it to an integer.  When given a string literal, as in <code>cout.operator&lt;&lt;(\"hello world\")</code>, it outputs what appears to be a memory address.  And when given a variable holding a std::string, it gives a compiler error.</p>\n\n<p>Could anyone give a beginner-to-intermediate-level explanation of what's going on?</p>\n"}, {"tags": ["c++", "arrays", "string", "file"], "comments": [{"owner": {"reputation": 1232, "user_id": 7890197, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/dLDMZ.jpg?s=128&g=1", "display_name": "Badda", "link": "https://stackoverflow.com/users/7890197/badda"}, "edited": false, "score": 0, "creation_date": 1496844241, "post_id": 44414728, "comment_id": 75828632, "body": "Use <code>strchr</code>, <code>getline()</code> and strings instead of pointer to char arrays"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1496844429, "post_id": 44414728, "comment_id": 75828818, "body": "The &quot;clean&quot; way would be to use a proper parser like Boost.Spirit. Otherwise for such a simple format, splitting on &quot;=&quot;, then splitting the fragments on &quot;,&quot;, and then iterating should do the trick."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496844890, "post_id": 44414728, "comment_id": 75829217, "body": "In other words: How do I tokenize a character string? Asked and answered a bazillion times. Downvoted based on lack of research."}], "answers": [{"tags": [], "owner": {"reputation": 1355, "user_id": 7999255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sWewj.jpg?s=128&g=1", "display_name": "Jayson Boubin", "link": "https://stackoverflow.com/users/7999255/jayson-boubin"}, "is_accepted": false, "score": 1, "last_activity_date": 1496844645, "creation_date": 1496844645, "answer_id": 44415078, "question_id": 44414728, "link": "https://stackoverflow.com/questions/44414728/extract-fields-and-values-from-text-line-using-c/44415078#44415078", "title": "Extract fields and values from text line using C++", "body": "<p>You could do something like the below example. Split the string by commas using getline from your file, then split use an istringstream to and getline to split it again by an equals sign.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;string&gt;\n#include&lt;sstream&gt;\nint main()\n{\n        std::ifstream file(\"test.txt\");\n        std::string wholeLine, partOfLine;\n        while(std::getline(file, wholeLine, ',')) {\n                std::istringstream wholeLineSS(wholeLine);\n                while(std::getline(wholeLineSS, partOfLine, '=')) {\n                        std::cout&lt;&lt;partOfLine&lt;&lt;std::endl;\n                }\n        }\n        return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1800, "user_id": 4769313, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/gFISt.png?s=128&g=1", "display_name": "Sir Jo Black", "link": "https://stackoverflow.com/users/4769313/sir-jo-black"}, "is_accepted": false, "score": 0, "last_activity_date": 1497273704, "creation_date": 1497273704, "answer_id": 44500571, "question_id": 44414728, "link": "https://stackoverflow.com/questions/44414728/extract-fields-and-values-from-text-line-using-c/44500571#44500571", "title": "Extract fields and values from text line using C++", "body": "<p>The program I post here extracts the parameters from one or more strings which are formatted as you require. The function <code>extract</code> extracts all the parameters contained in a string (of the format you specified) and insert their names and values in a structure (<code>struct sParms</code>) array.</p>\n\n<p>You may compile the program as extract and execute it at the system prompt as:</p>\n\n<blockquote>\n  <p>username: ./extract \"date    =20170422,line    =10,index   =3,field<br>\n  =partType,lock    =productCode1,bookmark=2/19/56,\"</p>\n</blockquote>\n\n<p>The output will be the following:</p>\n\n<blockquote>\n<pre><code>[date]=[20170422]\n[line]=[10]\n[index]=[3]\n[field]=[partType]\n[lock]=[productCode1]\n[bookmark]=[2/19/56]\n</code></pre>\n</blockquote>\n\n<p>You may execute the program with more than one string:</p>\n\n<blockquote>\n  <p>username: ./extract \"date    =20170422,line    =10,index   =3,field<br>\n  =partType,lock    =productCode1,bookmark=2/19/56,\" \"yes=1, no=0\"</p>\n</blockquote>\n\n<p>The output will be the following:</p>\n\n<blockquote>\n<pre><code>[date]=[20170422]\n[line]=[10]\n[index]=[3]\n[field]=[partType]\n[lock]=[productCode1]\n[bookmark]=[2/19/56]\n\n[yes]=[1]\n[no]=[0]\n</code></pre>\n</blockquote>\n\n<p>In the following line there's the code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;libgen.h&gt;\n\n//Parameters: date    =20170422,line    =10,index   =3,field   =partType,lock    =productCode1,bookmark=2/19/56,\n#define SEPARATOR       ','\n#define ASSIGNEMENT     '='\n\ntypedef struct sParms {\n    char * fieldName;\n    char * fieldValue;\n} tsParms;\n\nint loadString(char *to, const char *from);\n\nint extract(tsParms **oparms, const char *inb);\n\n// Retrieve buffer length\nint loadString(char *to, const char *from)\n{\n    int len=0;\n\n    while(*from&lt;=32 &amp;&amp; *from!=SEPARATOR &amp;&amp; *from!=ASSIGNEMENT)\n        from++;\n\n    // Get the string value\n    while(*from&gt;32 &amp;&amp; *from!=SEPARATOR &amp;&amp; *from!=ASSIGNEMENT) {\n        *(to+len++)=*from;\n        ++from;\n    }\n\n    *(to+len++)=0;\n\n    return len;\n}\n\nint extract(tsParms ** oparms, const char *inb)\n{\n    int cnt=0,j;\n    const char * end, *equ, *start;\n    char * buff;\n    tsParms * parms;\n\n    if (inb == NULL || strlen(inb) == 0 || oparms == NULL)\n        return 0;\n\n    // It counts the number of parms\n    end=strchr(inb,ASSIGNEMENT);\n    while(end) {\n        cnt++;\n        end=strchr(end+1,ASSIGNEMENT);\n    }\n\n    if (!cnt)\n        return 0;\n\n    /* Doing some considerations we may assume that the memory to use to store\n     * fields name and values is the same of the input string (inb)\n     *\n     * The space to store the pointers is cnt * sizeof(tsParms *).\n     */\n\n    j=cnt * sizeof(tsParms) + strlen(inb);\n    parms = malloc(j+1);\n    memset(parms,0,j+1);\n\n    buff = (char *)(parms+cnt); // The memory area where we can save data!\n\n    start=inb;end=start;cnt=0;\n    do {\n        end=strchr(start,SEPARATOR);\n        equ=strchr(start,ASSIGNEMENT);\n\n        if (equ) {\n            //Get the field name\n            parms[cnt].fieldName=buff;\n            buff+=loadString(buff,start);\n\n            //Get the field value\n            start=equ+1;\n            parms[cnt].fieldValue=buff;\n            buff+=loadString(buff,start);\n\n            cnt++;\n        }\n\n        if (end)\n            start=end+1;\n    } while(end);\n\n    *oparms = parms;\n\n    return cnt;\n}\n\nint main(int argc, char *argv[])\n{\n    int i,j,cnt=0,retval=0;\n    tsParms * parms=NULL;\n\n    if (argc&lt;2) {\n        printf(\"Usage: %s \\\"string-1\\\" [\\\"string-2\\\" ...\\\"string-n\\\"]\\n\",basename(argv[0]));\n        return 1;\n    }\n\n    for(i=1; i&lt;argc; i++) {\n        cnt=extract(&amp;parms, argv[i]);\n\n        if (cnt!=0 &amp;&amp; parms!=NULL) {\n            for(j=0;j&lt;cnt;j++) {\n                printf(\"[%s]=[%s]\\n\",parms[j].fieldName,parms[j].fieldValue);\n            }\n            puts(\"\");\n\n            free((void *)parms);\n        } else {\n            retval=1;\n            break;\n        }\n    }\n\n    return retval;\n}\n</code></pre>\n"}], "owner": {"reputation": 271, "user_id": 4852976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/609d83a4dd37b831b5cd1619c9b099d7?s=128&d=identicon&r=PG&f=1", "display_name": "UBears", "link": "https://stackoverflow.com/users/4852976/ubears"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1497273704, "creation_date": 1496843776, "last_edit_date": 1496844215, "question_id": 44414728, "link": "https://stackoverflow.com/questions/44414728/extract-fields-and-values-from-text-line-using-c", "title": "Extract fields and values from text line using C++", "body": "<p>I am reading in a text file with lines of the format:</p>\n\n<pre><code>date    =20170422,line    =10,index   =3,field   =partType,lock    =productCode1,bookmark=2/19/56,\n</code></pre>\n\n<p>I need to extract the name of the field (date, line, index, etc.) and its corresponding value into <code>char field[]</code> and <code>char value[]</code> variables.  If necessary, I am allowed to modify the format of the lines.</p>\n\n<p>My initial thinking was to use while loops and check for <code>=</code> and <code>,</code> characters but it was getting messy and it seems like there may be a cleaner way.</p>\n"}, {"tags": ["c++", "visual-studio", "qt"], "comments": [{"owner": {"reputation": 171, "user_id": 5093083, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a1f9d08dfc4d447a9fd0c63a38ff028?s=128&d=identicon&r=PG&f=1", "display_name": "Veera", "link": "https://stackoverflow.com/users/5093083/veera"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1497024011, "post_id": 44414644, "comment_id": 75920825, "body": "I need not do that I guess as I am using Qt with Visual studio"}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1497036692, "post_id": 44414644, "comment_id": 75927662, "body": "You may need to link to Qt5Quick.dll, Qt5Core.dll, Qt5Gui.dll, .... (Note that I&#39;m not very familiar with the combination of Visual Studio and Qt)"}, {"owner": {"reputation": 640, "user_id": 4663956, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/134cbebab691b3b46e96161ad525ca0d?s=128&d=identicon&r=PG&f=1", "display_name": "Maxime Roussin-B&#233;langer", "link": "https://stackoverflow.com/users/4663956/maxime-roussin-b%c3%a9langer"}, "reply_to_user": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1511994855, "post_id": 44414644, "comment_id": 82083830, "body": "You may need to add CONFIG += quick to the .pro, if it&#39;s not already there, and what @m7913d said."}], "owner": {"reputation": 171, "user_id": 5093083, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a1f9d08dfc4d447a9fd0c63a38ff028?s=128&d=identicon&r=PG&f=1", "display_name": "Veera", "link": "https://stackoverflow.com/users/5093083/veera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1496843556, "creation_date": 1496843556, "question_id": 44414644, "link": "https://stackoverflow.com/questions/44414644/qml-rectangle-as-an-icon-for-a-toolbox-in-qt", "title": "QML Rectangle as an Icon for a toolbox in Qt", "body": "<p>I have designed an Image using Rectangle in QML in the Qt platform. I would like to take this QML file and add it on to my other Project in Visual Studio with Qt.</p>\n\n<p>I have added my QML file in the resources of my Qt project in Visual Studio and have used the following code but gives me several external unresolved errors.</p>\n\n<pre><code>QQuickView *view = new QQuickView();\nview-&gt;setSource(QUrl(\"main.qml\"));\n</code></pre>\n\n<p>I would be glad if someone could help me out in using this QML Image as an Icon to the toolBox.</p>\n\n<blockquote>\n  <p>Severity  Code    Description Project File    Line    Suppression State\n  Error LNK2019 unresolved external symbol \"__declspec(dllimport)\n  public: __cdecl QQuickView::QQuickView(class QWindow *)\"\n  (__imp_??0QQuickView@@QEAA@PEAVQWindow@@@Z) referenced in function\n  \"public: __cdecl QtGuiApplication1::QtGuiApplication1(class QWidget\n  *)\" (??0QtGuiApplication1@@QEAA@PEAVQWidget@@@Z)  QtGuiApplication1   C:\\Users\\Desktop\\QtGuiApplication1\\QtGuiApplicatio\n  n1\\QtGuiApplication1.obj  1    Error  LNK2019 unresolved external symbol\n  \"__declspec(dllimport) public: virtual __cdecl\n  QQuickView::~QQuickView(void)\" (__imp_??1QQuickView@@UEAA@XZ)\n  referenced in function \"public: virtual void * __cdecl\n  QQuickView::`scalar deleting destructor'(unsigned int)\"\n  (??_GQQuickView@@UEAAPEAXI@Z) QtGuiApplication1\n  C:\\Users\\Desktop\\QtGuiApplication1\\QtGuiApplicatio\n  n1\\QtGuiApplication1.obj  1    Error  LNK2019 unresolved external symbol\n  \"__declspec(dllimport) public: void __cdecl\n  QQuickView::setSource(class QUrl const &amp;)\"\n  (__imp_?setSource@QQuickView@@QEAAXAEBVQUrl@@@Z) referenced in\n  function \"public: __cdecl QtGuiApplication1::QtGuiApplication1(class\n  QWidget *)\"\n  (??0QtGuiApplication1@@QEAA@PEAVQWidget@@@Z)  QtGuiApplication1   C:\\Users\\Desktop\\QtGuiApplication1\\QtGuiApplicatio\n  n1\\QtGuiApplication1.obj  1    Error  LNK2001 unresolved external symbol\n  \"public: virtual class QAccessibleInterface * __cdecl\n  QQuickWindow::accessibleRoot(void)const \"\n  (?accessibleRoot@QQuickWindow@@UEBAPEAVQAccessible\n  Interface@@XZ)    QtGuiApplication1   C:\\Users\\Desktop\\QtGuiApplication1\\QtGuiApplicatio\n  n1\\QtGuiApplication1.obj  1</p>\n</blockquote>\n\n<p>I am using Visual Studio with Qt and I think I need not add anything to .pro file.</p>\n"}, {"tags": ["c++", "sockets", "amazon-web-services", "boost", "amazon-s3"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1496847414, "post_id": 44414615, "comment_id": 75831305, "body": "It isn&#39;t clear to me how you invoke it. Also it looks like the authentication calculation is neither valid <a href=\"http://docs.aws.amazon.com/general/latest/gr/signature-version-2.html\" rel=\"nofollow noreferrer\">v2</a> nor valid <a href=\"http://docs.aws.amazon.com/general/latest/gr/signature-version-4.html\" rel=\"nofollow noreferrer\">v4 signing</a> for AWS. I know you&#39;ve ---broken--- ---ruined--- ---crippled--- <i>changed</i> some of the code to hide private details, but if that makes the code incorrect, what should we do?"}, {"owner": {"reputation": 115, "user_id": 1860102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd31903c1572eb75eed72889a82db1?s=128&d=identicon&r=PG", "display_name": "karim_g", "link": "https://stackoverflow.com/users/1860102/karim-g"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1496847750, "post_id": 44414615, "comment_id": 75831568, "body": "Hi and thank you. The authentification is valid. I am connected and can stream files from s3 and they are md5 validated. But if the calculation part between 2 read is too long, it doesn&#39;t work. I don&#39;t know what&#39;s happening exactly. I&#39;m using this to read multiple files from s3. The beginning is good, but not the rest. I added a &quot;main&quot; example."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1496848844, "post_id": 44414615, "comment_id": 75832372, "body": "Maybe you must use the same expiration epoch for the signature as the one you send in the query string. Fixing that I got no valid signatures, but (a) the time zone wasn&#39;t accounted for (I &quot;fixed&quot; it by just adding another hour) and (b) if the expiration is valid, I get &quot;The request signature we calculated does not match the signature you provided. Check your key and signing method&quot;. Specifically, I can&#39;t explain how <code>\\n\\n\\n</code> inside the <code>authRequest</code> could be valid."}, {"owner": {"reputation": 115, "user_id": 1860102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd31903c1572eb75eed72889a82db1?s=128&d=identicon&r=PG", "display_name": "karim_g", "link": "https://stackoverflow.com/users/1860102/karim-g"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1496849235, "post_id": 44414615, "comment_id": 75832628, "body": "I don&#39;t know what to say. The auth works, i&#39;m connected and i&#39;m reading files.This is a copy past of my code ( i delete only the host, url , bucket key etc)"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1496849280, "post_id": 44414615, "comment_id": 75832667, "body": "It&#39;s time for a <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a>. Feel free to leave the key/secret out, but please make sure the sample runs for you. Perhaps <i>leave the url</i> but point it at a public bucket, just so a reasonable example is there (not &quot;url&quot; like you have now)"}, {"owner": {"reputation": 115, "user_id": 1860102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd31903c1572eb75eed72889a82db1?s=128&d=identicon&r=PG", "display_name": "karim_g", "link": "https://stackoverflow.com/users/1860102/karim-g"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1496849545, "post_id": 44414615, "comment_id": 75832857, "body": "I don&#39;t have any public bucket, it&#39;s private and the code works. i Just copied it. sorry"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 115, "user_id": 1860102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd31903c1572eb75eed72889a82db1?s=128&d=identicon&r=PG", "display_name": "karim_g", "link": "https://stackoverflow.com/users/1860102/karim-g"}, "edited": false, "score": 0, "creation_date": 1496850019, "post_id": 44414615, "comment_id": 75833190, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/146089/discussion-between-sehe-and-karim-g\">continue this discussion in chat</a>."}], "owner": {"reputation": 115, "user_id": 1860102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fdd31903c1572eb75eed72889a82db1?s=128&d=identicon&r=PG", "display_name": "karim_g", "link": "https://stackoverflow.com/users/1860102/karim-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1497287311, "creation_date": 1496843495, "last_edit_date": 1497287311, "question_id": 44414615, "link": "https://stackoverflow.com/questions/44414615/streaming-file-from-aws-s3-through-boost-socket", "title": "Streaming file from aws s3 through boost socket", "body": "<p>I'm trying to connect via boost ssl socket to aws s3. </p>\n\n<p>It works but when I read, I had several problem.  </p>\n\n<p>Corrupted files on the same file but not others.</p>\n\n<p>File not corrupted (md5filter got all the data) but the data sent to the buffer are not good. Meaning there is a problem between the different layers of read somewhere but can't figure out where.</p>\n\n<p>Sometimes the program get stuck in the <code>S3_client::read</code> function and loop thousands of times in the do-while loop calling read. But it never reaches <code>md5filter</code> read.</p>\n\n<p>It get stuck between filterStream.read() and md5filter.read() which is not called. I don't know if it gzip or filterStream. But it only happens if there is no call to the lower layers of read for a while.\nCan you help spot the problem in my code ?  </p>\n\n<pre><code>#ifndef BTLOOP_AWSCLIENT_H\n#define BTLOOP_AWSCLIENT_H\n\n#include \"boost/iostreams/filter/gzip.hpp\"\n#include &lt;boost/iostreams/filtering_stream.hpp&gt;\n#include &lt;boost/iostreams/filtering_streambuf.hpp&gt;\n#include &lt;boost/iostreams/categories.hpp&gt;\n#include &lt;boost/iostreams/stream.hpp&gt;\n#include &lt;string&gt;\n#include &lt;set&gt;\n#include &lt;map&gt;\n#include &lt;openssl/md5.h&gt;\n#include &lt;sstream&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;boost/asio.hpp&gt;\n#include &lt;boost/asio/ssl.hpp&gt;\n#include \"Logger.h\"\n\nnamespace io = boost::iostreams;\nnamespace asio = boost::asio;\nnamespace ssl = boost::asio::ssl;\n\ntypedef ssl::stream&lt;asio::ip::tcp::socket&gt; ssl_socket;\n\nnamespace S3Reader\n{\nclass MD5Filter\n{\n  public:\n    typedef char char_type;\n    struct category :\n    io::multichar_input_filter_tag{};\n\n    MD5Filter( std::streamsize n );\n    ~MD5Filter();\n\n    template&lt;typename Source&gt;\n    std::streamsize read( Source&amp; src, char* s, std::streamsize n );\n    void setBigFileMode() { _bigFileMode = true; }\n    std::string close();\n    void setFileName( std::string fileName ) { _fileName = fileName; };\n    inline std::streamsize writtenBytes() {std::streamsize res = _writtenBytes; _writtenBytes= 0; return res;};\n    inline bool eof(){return _eof;};\n  private:\n\n    void computeMd5( char* buffer, size_t size, bool force = false );\n  private:\n    bool _bigFileMode;\n    int _blockCount;\n    std::vector&lt;unsigned char&gt; _bufferMD5;\n    MD5_CTX _mdContext;\n    unsigned char _hashMd5[MD5_DIGEST_LENGTH];\n    std::string _fileName;\n    std::streamsize _writtenBytes;\n    int _totalSize;\n    bool _eof;\n};\n\nclass Ssl_wrapper : public io::device&lt;io::bidirectional&gt;\n{\n  public:\n    Ssl_wrapper( ssl_socket* sock, std::streamsize n ) :\n    _sock( sock ),_totalSize(0) { };\n    std::streamsize read( char_type* s, std::streamsize n )\n    {\n      boost::system::error_code ec;\n      size_t rval = _sock-&gt;read_some( asio::buffer( s, n ), ec );\n      _totalSize +=rval;\n      LOG_AUDIT( \" wrapperR: \" &lt;&lt; rval &lt;&lt; \" \" &lt;&lt; _totalSize  &lt;&lt; \" \"&lt;&lt;ec.message());\n      if ( !ec )\n      {\n        return rval;\n      }\n      else if ( ec == asio::error::eof )\n        return -1;\n      else\n        throw boost::system::system_error( ec, \"Wrapper read_some\" );\n    }\n\n    std::streamsize write( const char* s, std::streamsize n )\n    {\n      boost::system::error_code ec;\n      size_t rval = _sock-&gt;write_some( asio::buffer( s, n ), ec );\n      if ( !ec )\n      {\n        return rval;\n      }\n      else if ( ec == asio::error::eof )\n        return -1;\n      else\n        throw boost::system::system_error( ec, \" Wrapper read_some\" );\n    }\n\n  private:\n    ssl_socket* _sock;\n    int _totalSize;\n};\n\nclass S3_client\n{\n  public:\n    S3_client( const std::string&amp; key_id, const std::string&amp; key_secret, const std::string&amp; bucket );\n    virtual ~S3_client();\n    bool open( const std::string&amp; fileName );\n    int read( char* buffer, size_t size );\n    int readLine( char* buffer, size_t size );\n    void close();\n    bool eof() { return _filterStream.eof(); }\n    std::string authorize( const std::string request );\n    bool connectSocket( std::string url, std::string port, std::string auth );\n  private :\n    std::string _key_id;\n    std::string _key_secret;\n    std::string _bucket;\n    std::string _fileName;\n    io::gzip_decompressor _gzip;\n    MD5Filter _md5Filter;\n    boost::posix_time::seconds _timeout;\n    ssl_socket* _sock;\n    Ssl_wrapper* _wrapper;\n    io::stream&lt;Ssl_wrapper&gt;* _sockstream;\n    std::map&lt;std::string, std::string&gt; _headerMap;\n    io::filtering_istream _filterStream;\n    int _totalSize;\n};\n\n}\n#endif //BTLOOP_AWSCLIENT_H\n</code></pre>\n\n<p>S3Client.cpp</p>\n\n<pre><code>#include \"S3_client.h\"\n#include &lt;boost/algorithm/string.hpp&gt;\n#include &lt;boost/lexical_cast.hpp&gt;\n#include &lt;boost/iostreams/copy.hpp&gt;\n#include &lt;boost/iostreams/filter/counter.hpp&gt;\n#include &lt;boost/exception/diagnostic_information.hpp&gt;\n#include &lt;system/ArmError.h&gt;\n\nnamespace io = boost::iostreams;\nnamespace asio = boost::asio;\nnamespace ssl = boost::asio::ssl;\n\nnamespace S3Reader\n{\nstatic const size_t s3_block_size = 8 * 1024 * 1024;\n\nstatic const std::string base64_chars =\n\"ABCDEFGHIJKLMNOPQRSTUVWXYZ\"\n\"abcdefghijklmnopqrstuvwxyz\"\n\"0123456789+/\";\n\nstatic inline bool is_base64( unsigned char c )\n{\n  return (isalnum( c ) || (c == '+') || (c == '/'));\n}\nstd::string url_encode( const std::string&amp; value )\n{\n  std::ostringstream escaped;\n  escaped.fill( '0' );\n  escaped &lt;&lt; std::hex;\n\n  for ( auto i = value.begin(), n = value.end(); i != n; ++i )\n  {\n    auto c = *i;\n    if ( isalnum( c ) || c == '-' || c == '_' || c == '.' || c == '~' )\n    {\n      escaped &lt;&lt; c;\n      continue;\n    }\n    escaped &lt;&lt; std::uppercase;\n    escaped &lt;&lt; '%' &lt;&lt; std::setw( 2 ) &lt;&lt; int((unsigned char) c );\n    escaped &lt;&lt; std::nouppercase;\n  }\n  return escaped.str();\n}\nstd::string base64_encode( unsigned char const* bytes_to_encode, unsigned int in_len )\n{\n  std::string ret;\n  int i = 0;\n  int j = 0;\n  unsigned char char_array_3[3];\n  unsigned char char_array_4[4];\n\n  while ( in_len-- )\n  {\n    char_array_3[i++] = *(bytes_to_encode++);\n    if ( i == 3 )\n    {\n      char_array_4[0] = (char_array_3[0] &amp; 0xfc) &gt;&gt; 2;\n      char_array_4[1] = ((char_array_3[0] &amp; 0x03) &lt;&lt; 4) + ((char_array_3[1] &amp; 0xf0) &gt;&gt; 4);\n      char_array_4[2] = ((char_array_3[1] &amp; 0x0f) &lt;&lt; 2) + ((char_array_3[2] &amp; 0xc0) &gt;&gt; 6);\n      char_array_4[3] = char_array_3[2] &amp; 0x3f;\n\n      for ( i = 0; (i &lt; 4); i++ )\n        ret += base64_chars[char_array_4[i]];\n      i = 0;\n    }\n  }\n\n  if ( i )\n  {\n    for ( j = i; j &lt; 3; j++ )\n      char_array_3[j] = '\\0';\n\n    char_array_4[0] = (char_array_3[0] &amp; 0xfc) &gt;&gt; 2;\n    char_array_4[1] = ((char_array_3[0] &amp; 0x03) &lt;&lt; 4) + ((char_array_3[1] &amp; 0xf0) &gt;&gt; 4);\n    char_array_4[2] = ((char_array_3[1] &amp; 0x0f) &lt;&lt; 2) + ((char_array_3[2] &amp; 0xc0) &gt;&gt; 6);\n    char_array_4[3] = char_array_3[2] &amp; 0x3f;\n\n    for ( j = 0; (j &lt; i + 1); j++ )\n      ret += base64_chars[char_array_4[j]];\n\n    while ((i++ &lt; 3))\n      ret += '=';\n\n  }\n\n  return ret;\n\n}\n\nstd::string to_hex( const uint8_t* buffer, size_t buffer_size )\n{\n  std::stringstream sst;\n  for ( uint i = 0; i &lt; buffer_size; i++ )\n  {\n    sst &lt;&lt; std::setw( 2 ) &lt;&lt; std::setfill( '0' ) &lt;&lt; std::hex &lt;&lt; int( buffer[i] );\n  }\n  return sst.str();\n}\nstd::string getDateForHeader( bool amzFormat )\n{\n  time_t lt;\n  time( &amp;lt );\n  struct tm* tmTmp;\n  tmTmp = gmtime( &amp;lt );\n\n  char buf[50];\n  if ( amzFormat )\n  {\n    strftime( buf, 50, \"Date: %a, %d %b %Y %X +0000\", tmTmp );\n    return std::string( buf );\n  }\n  else\n  {\n    tmTmp-&gt;tm_hour++;\n    //strftime( buf, 50, \"%a, %d %b %Y %X +0000\", tmTmp );\n    std::stringstream ss;\n    ss &lt;&lt; mktime( tmTmp );\n    return ss.str();\n  }\n\n}\n\nMD5Filter::MD5Filter( std::streamsize n ) :\n_bigFileMode( false ), _blockCount( 0 ), _writtenBytes(0), _totalSize( 0 )\n{\n  MD5_Init( &amp;_mdContext );\n  memset( _hashMd5, 0, MD5_DIGEST_LENGTH );\n}\n\nMD5Filter::~MD5Filter()\n{\n  close();\n}\n\ntemplate&lt;typename Source&gt;\nstd::streamsize MD5Filter::read( Source&amp; src, char* s, std::streamsize n )\n{\n  int result =0;\n  try\n  {\n    if ((result = io::read( src, s, n )) == -1 )\n    {\n      _eof=true;\n      LOG_AUDIT( _fileName &lt;&lt; \" md5R: \" &lt;&lt; result &lt;&lt; \" \" &lt;&lt; _totalSize );\n      return -1;\n    }\n  }\n  catch ( boost::exception&amp; ex)\n  {\n    LOG_ERROR( _fileName &lt;&lt;\" \"&lt;&lt; boost::diagnostic_information(ex)&lt;&lt; \" \" &lt;&lt; result );\n  }\n  computeMd5( s, (size_t) result );\n  _totalSize += result;\n  _writtenBytes = result;\n\n  LOG_AUDIT( _fileName &lt;&lt; \" md5R: \" &lt;&lt; result &lt;&lt; \" \" &lt;&lt; _totalSize );\n  return result;\n}\n\nvoid MD5Filter::computeMd5( char* buffer, size_t size, bool force )\n{\n  size_t realSize = s3_block_size;\n  uint8_t blockMd5[MD5_DIGEST_LENGTH];\n\n  if ( !_bigFileMode )\n  {\n    MD5_Update( &amp;_mdContext, buffer, size );\n    return;\n  }\n\n  if ( size &gt; 0 )\n  {\n    _bufferMD5.insert( _bufferMD5.end(), &amp;buffer[0], &amp;buffer[size] );\n  }\n\n  if ((_bufferMD5.size() &lt; s3_block_size) &amp;&amp; !force )\n    return;\n  if ( force )\n    realSize = _bufferMD5.size();\n\n  MD5( &amp;_bufferMD5[0], realSize, blockMd5 );\n  MD5_Update( &amp;_mdContext, blockMd5, MD5_DIGEST_LENGTH );\n  _blockCount++;\n\n  if ( _bufferMD5.size() == s3_block_size )\n  {\n    _bufferMD5.clear();\n    return;\n  }\n\n  if ( force )\n    return;\n  memcpy( &amp;_bufferMD5[0], &amp;_bufferMD5[s3_block_size], _bufferMD5.size() - s3_block_size );\n  _bufferMD5.erase( _bufferMD5.begin() + s3_block_size, _bufferMD5.end());\n}\n\nstd::string MD5Filter::close()\n{\n  std::string mdOutput;\n  computeMd5( NULL, 0, true );\n  MD5_Final( _hashMd5, &amp;_mdContext );\n  mdOutput = to_hex( _hashMd5, MD5_DIGEST_LENGTH );\n  if ( _bigFileMode )\n  {\n    mdOutput += \"-\" + boost::lexical_cast&lt;std::string&gt;( _blockCount );\n  }\n  return mdOutput;\n}\n\nstd::string S3_client::authorize( const std::string request )\n{\n  unsigned char* digest;\n  digest = HMAC( EVP_sha1(), _key_secret.c_str(), (int) _key_secret.size(), (unsigned char*) request.c_str(), (int) request.size(), NULL, NULL );\n  std::string signature( url_encode( base64_encode( digest, 20 )));\n  return \"?AWSAccessKeyId=\" + _key_id + \"&amp;Expires=\" + getDateForHeader( false ) + \"&amp;Signature=\" + signature;\n}\n\nS3_client::S3_client( const std::string&amp; key_id, const std::string&amp; key_secret, const std::string&amp; bucket ) :\n_key_id( key_id ), _key_secret( key_secret ), _bucket( bucket ), _gzip( io::gzip::default_window_bits, 1024 * 1024 )\n, _md5Filter( s3_block_size ), _timeout( boost::posix_time::seconds( 1 )), _totalSize( 0 ) { }\n\nS3_client::~S3_client()\n{\n  close();\n}\n\nbool S3_client::connectSocket( std::string url, std::string port, std::string auth )\n{\n  std::string amzDate = getDateForHeader( true );\n  std::string host = \"url\";\n\n  boost::asio::io_service io_service;\n  boost::asio::ip::tcp::resolver resolver( io_service );\n  boost::asio::ip::tcp::resolver::query query( url, \"https\" );\n  auto endpoint = resolver.resolve( query );\n\n  // Context with default path\n  ssl::context ctx( ssl::context::sslv23 );\n  ctx.set_default_verify_paths();\n\n  _sock = new ssl_socket( io_service, ctx );\n  boost::asio::socket_base::keep_alive option( true );\n\n  _wrapper = new Ssl_wrapper( _sock, s3_block_size );\n  _sockstream = new io::stream&lt;Ssl_wrapper&gt;( boost::ref( *_wrapper ));\n\n  asio::connect( _sock-&gt;lowest_layer(), endpoint );\n  _sock-&gt;set_verify_mode( ssl::verify_peer );\n  _sock-&gt;set_verify_callback( ssl::rfc2818_verification( url ));\n  _sock-&gt;handshake( ssl_socket::client );\n  _sock-&gt;lowest_layer().set_option( option );\n  std::stringstream ss;\n  ss &lt;&lt; \"GET \" &lt;&lt; _fileName &lt;&lt; auth &lt;&lt; \" HTTP/1.1\\r\\n\" &lt;&lt; \"Host: \" &lt;&lt; host &lt;&lt; \"\\r\\nAccept: */*\\r\\n\\r\\n\";\n  _sockstream-&gt;write( ss.str().c_str(), ss.str().size());\n  _sockstream-&gt;flush();\n  std::string http_version;\n  int status_code = 0;\n  (*_sockstream) &gt;&gt; http_version;\n  (*_sockstream) &gt;&gt; status_code;\n\n  if ( !_sockstream || http_version.substr( 0, 5 ) != \"HTTP/\" )\n  {\n    std::cout &lt;&lt; \"Invalid response: \" &lt;&lt; http_version &lt;&lt; \" \" &lt;&lt; status_code &lt;&lt; std::endl;\n    return false;\n  }\n  if ( status_code != 200 )\n  {\n    std::cout &lt;&lt; \"Response returned with status code \" &lt;&lt; http_version &lt;&lt; \" \" &lt;&lt; status_code &lt;&lt; std::endl;\n    return false;\n  }\n  return true;\n}\n\nbool S3_client::open( const std::string&amp; fileName )\n{\n  std::string port = \"443\";\n  std::string url = \"bucket\";\n  std::stringstream authRequest;\n  std::string date = getDateForHeader( false );\n\n  _fileName = fileName;\n  authRequest &lt;&lt; \"GET\\n\\n\\n\" &lt;&lt; date &lt;&lt; \"\\n/\" &lt;&lt; _bucket &lt;&lt; \"\" &lt;&lt; fileName;\n  std::string auth = authorize( authRequest.str());\n  if ( !connectSocket( url, port, auth ))\n    THROW( \"Failed to open socket\" );\n\n  std::string header;\n  while ( std::getline( *_sockstream, header ) &amp;&amp; header != \"\\r\" )\n  {\n    std::vector&lt;std::string&gt; vectLine;\n    boost::split( vectLine, header, boost::is_any_of( \":\" ));\n    if ( vectLine.size() &lt; 2 )\n      continue;\n    boost::erase_all( vectLine[1], \"\\\"\" );\n    boost::erase_all( vectLine[1], \"\\r\" );\n    boost::erase_all( vectLine[1], \" \" );\n    _headerMap[vectLine[0]] = vectLine[1];\n  }\n\n  if ( _headerMap.find( \"Content-Length\" ) == _headerMap.end())\n    return false;\n  if ( _headerMap.find( \"Content-Type\" ) == _headerMap.end())\n    return false;\n\n  if ((uint) std::atoi( _headerMap.at( \"Content-Length\" ).c_str()) &gt; s3_block_size )\n    _md5Filter.setBigFileMode();\n  _md5Filter.setFileName( _fileName );\n  if ( _headerMap[\"Content-Type\"] == \"binary/octet-stream\" )\n    _filterStream.push( _gzip, s3_block_size );\n  _filterStream.push( boost::ref( _md5Filter ), s3_block_size );\n  _filterStream.push( boost::ref( *_sockstream ), s3_block_size );\n  return true;\n}\n\nvoid S3_client::close()\n{\n  std::string localMD5 = _md5Filter.close();\n  std::string headerMD5 = _headerMap[\"ETag\"];\n  if ( localMD5 != headerMD5 )\n    THROW ( \"Corrupted file \" &lt;&lt; _fileName &lt;&lt; \" \" &lt;&lt; localMD5 &lt;&lt; \" \" &lt;&lt; headerMD5 &lt;&lt; \".\" );\n  else\n    LOG_AUDIT( \"Close S3: \" &lt;&lt; _fileName &lt;&lt; \" \" &lt;&lt; localMD5 &lt;&lt; \" \" &lt;&lt; headerMD5 &lt;&lt; \".\" );\n}\n\nint S3_client::readLine( char* buffer, size_t size )\n{\n  _filterStream.getline( buffer, size );\n  return _filterStream.gcount();\n}\n\nint S3_client::read( char* buffer, size_t size )\n{\n  std::streamsize sizeRead = 0;\n  do\n  {\n    _filterStream.read( buffer, size );\n    sizeRead = _md5Filter.writtenBytes();\n    _totalSize += sizeRead;\n    LOG_AUDIT( _fileName &lt;&lt; \" s3R: \" &lt;&lt; sizeRead &lt;&lt; \" \" &lt;&lt; _totalSize );\n  }\n  while( sizeRead ==0 &amp;&amp; !_md5Filter.eof() &amp;&amp; !_sockstream-&gt;eof() &amp;&amp; _filterStream.good() &amp;&amp; _sock-&gt;next_layer().is_open());\n  return sizeRead;\n}\n\n}\n\nint main( int argc, char** argv )\n{\n  S3Reader::S3_client client( key_id, key_secret, s3_bucket );\n  client.open(\"MyFile\");\nwhile (client.read(buffer, bufferSize) &gt;0 ) {}\n}\n</code></pre>\n"}, {"tags": ["c++", "operators", "variadic-templates", "specialization", "template-inheritance"], "comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 3, "creation_date": 1496843559, "post_id": 44414606, "comment_id": 75828070, "body": "If you&#39;re over 10k you can see I just tried this question: <a href=\"https://stackoverflow.com/q/44414238/2642059\">stackoverflow.com/q/44414238/2642059</a> @BaummitAugen helped me recognize the inheritance. So I think I&#39;m asking the right question now."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1496843793, "post_id": 44414696, "comment_id": 75828272, "body": "Obviously you understand this topic better than I do... So am I creating one <code>overloaded</code> object with multiple inheritance? Or perhaps 3 <code>overloaded</code> objects?"}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1496844228, "post_id": 44414696, "comment_id": 75828619, "body": "@JonathanMee You&#39;re passing one object which has three operators that in turn call one of three lambdas you derive from. In the end, you could just create a type and provide those operators yourself, this is just a shorthand for the example."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1496844628, "post_id": 44414696, "comment_id": 75828979, "body": "@BartekBanachewicz That does not seem to align with what <code>nwp</code> is saying. He seems to think that I&#39;m passing 3 individual lambdas."}, {"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1496844778, "post_id": 44414696, "comment_id": 75829111, "body": "@JonathanMee I have no idea how you got that impression."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1496855760, "post_id": 44414696, "comment_id": 75836580, "body": "Thanks, I now understand that the <code>using Ts::operator()...</code> exposes on a per-lambda basis the <code>operator()</code> for overloading. So it seems like the first line of the definition is sufficient, what is the purpose of this line: <code>template&lt;class... Ts&gt; overloaded(Ts...) -&gt; overloaded&lt;Ts...&gt;</code>"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 1, "creation_date": 1496856532, "post_id": 44414696, "comment_id": 75836964, "body": "@JonathanMee That is a <a href=\"https://stackoverflow.com/questions/40951697/what-are-template-deduction-guides-in-c17#40951769\">deduction guide</a> telling the compiler that if an <code>overloaded</code> is constructed with syntax left of the <code>-&gt;</code> that it should be deduced to the type right of the <code>-&gt;</code> which saves you from having to specify the template arguments."}], "tags": [], "owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "is_accepted": true, "score": 6, "last_activity_date": 1496844149, "last_edit_date": 1496844149, "creation_date": 1496843699, "answer_id": 44414696, "question_id": 44414606, "link": "https://stackoverflow.com/questions/44414606/what-is-the-type-this-struct-is-inheriting-from/44414696#44414696", "title": "What is the Type This struct is Inheriting From?", "body": "<p><code>overloaded</code> inherits from each lambda individually and each lambda has a call operator. You therefore create a struct that has all call operators in one overload set. As long as they are not ambiguous the right one will automatically be picked.</p>\n\n<p>You can imagine the variadic template to expand to</p>\n\n<pre><code>struct overloaded :\n    // inherits from\n    decltype([](auto arg) { std::cout &lt;&lt; arg &lt;&lt; ' '; }),\n    decltype([](double arg) { std::cout &lt;&lt; std::fixed &lt;&lt; arg &lt;&lt; ' '; }),\n    decltype([](const std::string&amp; arg) { std::cout &lt;&lt; std::quoted(arg) &lt;&lt; ' '; })\n\n    // has three operator()s\n    {\n        using decltype([](auto arg) { std::cout &lt;&lt; arg &lt;&lt; ' '; })::operator();\n        using decltype([](double arg) { std::cout &lt;&lt; std::fixed &lt;&lt; arg &lt;&lt; ' '; })::operator();\n        using decltype([](const std::string&amp; arg) { std::cout &lt;&lt; std::quoted(arg) &lt;&lt; ' '; })::operator();\n    };\n</code></pre>\n\n<p>Except in real code it wouldn't work because the lambdas with the same body would still have different types.</p>\n\n<p>It creates 1 <code>overloaded</code> type with multiple inheritance per instantiation.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 44414696, "answer_count": 1, "score": 5, "last_activity_date": 1496844149, "creation_date": 1496843469, "question_id": 44414606, "link": "https://stackoverflow.com/questions/44414606/what-is-the-type-this-struct-is-inheriting-from", "title": "What is the Type This struct is Inheriting From?", "body": "<p>So <a href=\"http://coliru.stacked-crooked.com/view?id=5e1ee68343da6afd\" rel=\"noreferrer\">this example</a> from: <a href=\"http://en.cppreference.com/w/cpp/utility/variant/visit\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/utility/variant/visit</a> declares the specialized type:</p>\n\n<pre><code>template&lt;class... Ts&gt; struct overloaded : Ts... { using Ts::operator()...; };\ntemplate&lt;class... Ts&gt; overloaded(Ts...) -&gt; overloaded&lt;Ts...&gt;;\n</code></pre>\n\n<p>Which is constructed as an r-value here:</p>\n\n<pre><code>std::visit(overloaded {\n    [](auto arg) { std::cout &lt;&lt; arg &lt;&lt; ' '; },\n    [](double arg) { std::cout &lt;&lt; std::fixed &lt;&lt; arg &lt;&lt; ' '; },\n    [](const std::string&amp; arg) { std::cout &lt;&lt; std::quoted(arg) &lt;&lt; ' '; },\n}, v);\n</code></pre>\n\n<p>I'm trying to figure out how this works. What is the type that <code>overloaded</code> inherits from here? It seems like an array of lambdas but I don't see how that would have an <code>operator()</code>. Can someone explain how the inheritance is working here?</p>\n"}, {"tags": ["c++", "opengl"], "answers": [{"comments": [{"owner": {"reputation": 149158, "user_id": 524368, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oZ8Up.png?s=128&g=1", "display_name": "datenwolf", "link": "https://stackoverflow.com/users/524368/datenwolf"}, "edited": false, "score": 0, "creation_date": 1496854474, "post_id": 44416584, "comment_id": 75835894, "body": "I think it should be pointed out, that clipping was removed from core profile, because core profile implies the availability of geometry shaders. To implement clipping like fixed function OpenGL did (i.e. introduction of new vertices along the clip planes) a geometry shader must be used. However clipping can also be implemented by discarding fragments in the fragment shader. Depending on the number of clip planes used either method my offer better performance."}, {"owner": {"reputation": 48, "user_id": 8125934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HzAPJx2kzuI/AAAAAAAAAAI/AAAAAAAAGzk/SL-iIAbmlxk/photo.jpg?sz=128", "display_name": "SergeD", "link": "https://stackoverflow.com/users/8125934/serged"}, "edited": false, "score": 0, "creation_date": 1497012696, "post_id": 44416584, "comment_id": 75912860, "body": "Thanks Ripi2, but that&#39;s not what I want to do. I want a single cut, but only on a half plane !"}], "tags": [], "owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1496848909, "last_edit_date": 1496848909, "creation_date": 1496848415, "answer_id": 44416584, "question_id": 44414362, "link": "https://stackoverflow.com/questions/44414362/clipping-of-half-plane-in-opengl/44416584#44416584", "title": "Clipping of HALF plane in OpenGL", "body": "<p><code>x&gt;0</code> and <code>y&gt;0</code> are conditions that represent two half-spaces. You can set them by <code>glClipPlane(planeE, equ)</code>with a different <code>planeE</code> for each half-space.</p>\n\n<p><p><code>glClipPlane</code>is a command for old OpenGL, or new with a compatibility-context profile. For modern OGL, core-context profile, you must implement this clipping inside shaders.</p>\n"}], "owner": {"reputation": 48, "user_id": 8125934, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HzAPJx2kzuI/AAAAAAAAAAI/AAAAAAAAGzk/SL-iIAbmlxk/photo.jpg?sz=128", "display_name": "SergeD", "link": "https://stackoverflow.com/users/8125934/serged"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496848909, "creation_date": 1496842845, "last_edit_date": 1496847363, "question_id": 44414362, "link": "https://stackoverflow.com/questions/44414362/clipping-of-half-plane-in-opengl", "title": "Clipping of HALF plane in OpenGL", "body": "<p>I would like to make a clipping half plane, but I am quite unacquainted with OpenGL.</p>\n\n<p>For now, I use a wrapper to OpenGL's glClipPlane</p>\n\n<pre><code>    void gle::setClipPlane(GLenum glp, Vector3 const&amp; dir, Vector3 const&amp; pos)\n{\n    GLdouble eq[4] = { dir.XX, dir.YY, dir.ZZ, -dir*pos };\n    glClipPlane(glp, eq);\n}\n</code></pre>\n\n<p>But I would actually like to do a clipping half-plane, e.g. the plane with normal 0 1 0, but only for x>0 and y>0.\nIs it possible to do it in a <em>simple</em> way ?</p>\n"}, {"tags": ["c++", "arduino", "eigen", "arduino-uno", "atmelstudio"], "answers": [{"tags": [], "owner": {"reputation": 316, "user_id": 7158464, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Nwfmq.png?s=128&g=1", "display_name": "Wadaane", "link": "https://stackoverflow.com/users/7158464/wadaane"}, "is_accepted": false, "score": 1, "last_activity_date": 1496859380, "creation_date": 1496859380, "answer_id": 44420028, "question_id": 44414102, "link": "https://stackoverflow.com/questions/44414102/how-to-use-eigen-library-for-arduino-within-atmel-studio-7/44420028#44420028", "title": "How to use Eigen library for Arduino within Atmel Studio 7?", "body": "<p>How did you add the library ?<br>\nDid you use libraries manager in Arduino IDE ?<br>\nOr you downloaded the library separately ?<br>\nI found out that using libraries manager solve most compatibility issues.</p>\n"}], "owner": {"reputation": 11, "user_id": 3554669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a11a707f03c268110271cb18dbefee?s=128&d=identicon&r=PG&f=1", "display_name": "user3554669", "link": "https://stackoverflow.com/users/3554669/user3554669"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1496859380, "creation_date": 1496842156, "question_id": 44414102, "link": "https://stackoverflow.com/questions/44414102/how-to-use-eigen-library-for-arduino-within-atmel-studio-7", "title": "How to use Eigen library for Arduino within Atmel Studio 7?", "body": "<ol>\n<li>I tried to use Eigen library within the Arduino IDE fist. Then I got the error: </li>\n</ol>\n\n<blockquote>\n  <p>fatal error: eigenfolder/Eigen/Dense: No such file or directory</p>\n</blockquote>\n\n<ol start=\"2\">\n<li>Then I tried to use EigenArduino library. Then I got an error</li>\n</ol>\n\n<blockquote>\n  <p>fatal error  cstddef  No such file or directory #include cstddef</p>\n</blockquote>\n\n<p>So I realized that there is probably a lot of standard library that is not linked/implemented into this Arduino IDE. So before getting everythin I decided to move into ATMEL STUDIO 7. My hope was that Atmel Studio gets everything automatically.</p>\n\n<ol start=\"3\">\n<li>But in order to use my previous Arduino Sketches, I also installed Visual Micro that is a Plug-In for Atmel Studio so that you can use everything like in the Arduino IDE.</li>\n</ol>\n\n<p>==> So the problem starts all over again. Same errors in Atmel Studio 7. It seems like I am just using the Atmel Studio 7 Editor now, but the same compiler settings, libraries etc. (Since I am a newbie :-) this is just a guess ).</p>\n\n<p>How can I link all this together? Can somebody please help? </p>\n"}, {"tags": ["c++", "linux", "sockets", "tcp"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1496841466, "post_id": 44413671, "comment_id": 75826487, "body": "Can you post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? I am not aware of this but seem that DSCP is about IP and not UDP or TCP."}, {"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1496841572, "post_id": 44413671, "comment_id": 75826566, "body": "<a href=\"https://stackoverflow.com/questions/13162655/getsockopt-returns-different-ip-tos-value-from-the-one-set-in-setsockopt\">related</a>"}, {"owner": {"reputation": 391, "user_id": 1765709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e247bd27e7818b8ac2d01427fb0bb131?s=128&d=identicon&r=PG", "display_name": "user1765709", "link": "https://stackoverflow.com/users/1765709/user1765709"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1496846011, "post_id": 44413671, "comment_id": 75830146, "body": "Thanks ! Yes I understand that DSCP is in IP header. But when we are exchanging packets over TCP/UDP and need some ancillary info(like an L3 field in this case), kernel allows for setting socket options and handover that info as ancillary data.  Editing the post to help understand. Thanks !"}], "owner": {"reputation": 391, "user_id": 1765709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e247bd27e7818b8ac2d01427fb0bb131?s=128&d=identicon&r=PG", "display_name": "user1765709", "link": "https://stackoverflow.com/users/1765709/user1765709"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 518, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1496846444, "creation_date": 1496841136, "last_edit_date": 1496846444, "question_id": 44413671, "link": "https://stackoverflow.com/questions/44413671/tos-field-fetch-from-received-packet-on-tcp-socket-in-linux", "title": "TOS Field fetch from received packet on TCP socket in linux?", "body": "<p>I have a C++ network application running on linux using TCP sockets.\nI have been trying to fetch the DSCP marking from a received packet for TCP. We have IP_RECVTOS socket option for UDP. But I have tested in code that it is not working for TCP.</p>\n\n<p>What options do I have except raw sockets to address the issue ? </p>\n\n<pre><code>   Example code : The following is for UDP. I am looking for something similar for TCP. \n\n   //Set the socket option to receive IP_TOS:\n\nunsigned char set = 0x03;\nif(setsockopt(udpSocket, IPPROTO_IP, IP_RECVTOS, &amp;set,sizeof(set))&lt;0)\n{\n  printf(\"cannot set recvtos\\n\");\n}\nelse\n{\n    printf(\"socket set to recvtos\\n\");\n}\n\n// and Retrieve the IP_TOS value from every packet header by:\n\nstruct PC_Pkt pkt;\nint *ecnptr;\nunsigned char received_ecn;\nstruct msghdr msg;\nstruct iovec iov[1];\nmemset(&amp;msg, '\\0', sizeof(msg));\nmsg.msg_iov = iov;  \nmsg.msg_iovlen = 1;\niov[0].iov_base = (char *) &amp;pkt;\niov[0].iov_len = sizeof(pkt);\n\nint cmsg_size = sizeof(struct cmsghdr)+sizeof(received_ecn);\nchar buf[CMSG_SPACE(sizeof(received_ecn))];\nmsg.msg_control = buf; \nmsg.msg_controllen = sizeof(buf);\n\nnRet = recvmsg(udpSocket, &amp;msg, 0);\n\n  if (nRet &gt; 0) {\n struct cmsghdr *cmsg;\n for (cmsg = CMSG_FIRSTHDR(&amp;msg); cmsg != NULL;\n cmsg = CMSG_NXTHDR(&amp;msg,cmsg)) {\n     if ((cmsg-&gt;cmsg_level == IPPROTO_IP) &amp;&amp;\n     (cmsg-&gt;cmsg_type == IP_TOS) &amp;&amp; (cmsg-&gt;cmsg_len) ){\n            ecnptr = (int *) CMSG_DATA(cmsg);\n    received_ecn = *ecnptr;\n    int isecn =  ((received_ecn &amp; INET_ECN_MASK) == INET_ECN_CE);\n\n            printf(\"received_ecn = %i and %d, is ECN CE marked = %d    \\n\", ecnptr, received_ecn, isecn);\n\n             break;\n   }\n    }\n  }\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496841257, "post_id": 44413655, "comment_id": 75826307, "body": "Yes you can just do <code>delete rCat</code>. Why do you think you would not be able to do that?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 5, "creation_date": 1496841630, "post_id": 44413655, "comment_id": 75826613, "body": "If that&#39;s code from a book a would recommend to throw it away."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1496841649, "post_id": 44413655, "comment_id": 75826630, "body": "@manni66: Indeed, both the book and the code."}, {"owner": {"reputation": 23, "user_id": 8125771, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6d08b358ca124b43f83503d5a1bb0d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Yue", "link": "https://stackoverflow.com/users/8125771/yue"}, "edited": false, "score": 0, "creation_date": 1496841728, "post_id": 44413655, "comment_id": 75826698, "body": "My solution is only having the &quot;rCat&quot;. It works. But the book gives the answer with 2 pointers. That problem talks about the memory leak. I am not familiar with it. I am wondering the one pointer solution may have trouble."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1496841810, "post_id": 44413655, "comment_id": 75826771, "body": "In this little program there is no reason for the second pointer <code>pCat</code>. It just doesn&#39;t make any sense to add another variable that will point to the exact same object just for deleting it."}], "answers": [{"comments": [{"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1496843367, "post_id": 44413756, "comment_id": 75827907, "body": "Or the most minimal - <code>delete new SimpleCat(5,9);</code>."}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1496843409, "post_id": 44413756, "comment_id": 75827946, "body": "@DeiDei: cute ."}, {"owner": {"reputation": 455, "user_id": 4533695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c36609bdd5d2040262013fd57ef71b4c?s=128&d=identicon&r=PG", "display_name": "Ceros", "link": "https://stackoverflow.com/users/4533695/ceros"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1496843854, "post_id": 44413756, "comment_id": 75828310, "body": "@DeiDei poor cat, didn&#39;t have a chance to live"}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 0, "last_activity_date": 1496841324, "creation_date": 1496841324, "answer_id": 44413756, "question_id": 44413655, "link": "https://stackoverflow.com/questions/44413655/about-the-delete-command-of-c/44413756#44413756", "title": "About the &quot;delete&quot; command of C++", "body": "<p>The rule is simple, you need to call <code>delete</code> on any pointer that's been allocated using <code>new</code>. (And you need to call <code>delete</code> exactly once.)</p>\n\n<p>It's not necessary to assign the pointer to another variable, and call <code>delete</code> on that.</p>\n\n<p>So therefore you could be even more minimal:</p>\n\n<p><code>delete TheFunction();</code></p>\n\n<p>would work too, although, of course, you wouldn't be able to do much with the cat.</p>\n"}, {"comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 3, "creation_date": 1496841476, "post_id": 44413814, "comment_id": 75826494, "body": "Good advice on using <code>std::unique_ptr</code>: have an upvote."}, {"owner": {"reputation": 23, "user_id": 8125771, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6d08b358ca124b43f83503d5a1bb0d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Yue", "link": "https://stackoverflow.com/users/8125771/yue"}, "edited": false, "score": 0, "creation_date": 1496842149, "post_id": 44413814, "comment_id": 75827013, "body": "Nice answer. Thank you. Now I learn a new command, std::unique_ptr"}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 23, "user_id": 8125771, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6d08b358ca124b43f83503d5a1bb0d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Yue", "link": "https://stackoverflow.com/users/8125771/yue"}, "edited": false, "score": 0, "creation_date": 1496851012, "post_id": 44413814, "comment_id": 75833839, "body": "@Yue You should <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">pick up a new book</a> if it is suggesting you do all this stuff without having given you enough background knowledge. <code>delete</code> is an operator and <code>std::unique_ptr</code> is a template class, nothing in c++ is called a command"}], "tags": [], "owner": {"reputation": 65594, "user_id": 459640, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/bc790307b3c4cdbd25f582d9067651f1?s=128&d=identicon&r=PG", "display_name": "aschepler", "link": "https://stackoverflow.com/users/459640/aschepler"}, "is_accepted": true, "score": 3, "last_activity_date": 1496841440, "creation_date": 1496841440, "answer_id": 44413814, "question_id": 44413655, "link": "https://stackoverflow.com/questions/44413655/about-the-delete-command-of-c/44413814#44413814", "title": "About the &quot;delete&quot; command of C++", "body": "<p>Given that definition of <code>TheFunction</code>, yes, you should eventually <code>delete</code> the return value.  Note you could just <code>delete rCat;</code> directly - you don't need to copy it into another pointer <code>pCat</code> and then delete that.</p>\n\n<p>However, it would be better if <code>TheFunction</code> returned a <code>std::unique_ptr&lt;SimpleCat&gt;</code> instead of a raw <code>SimpleCat*</code> pointer.</p>\n\n<p>First, this makes it clear that the returned value is something that must be cleaned up, and not for example a pointer to something actually stored somewhere else.</p>\n\n<p>Second, the caller wouldn't need to actually use <code>delete</code> at all, since the <code>unique_ptr</code> object does that for you.</p>\n"}], "owner": {"reputation": 23, "user_id": 8125771, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6d08b358ca124b43f83503d5a1bb0d6d?s=128&d=identicon&r=PG&f=1", "display_name": "Yue", "link": "https://stackoverflow.com/users/8125771/yue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 44413814, "answer_count": 2, "score": -3, "last_activity_date": 1496843393, "creation_date": 1496841100, "last_edit_date": 1496843393, "question_id": 44413655, "link": "https://stackoverflow.com/questions/44413655/about-the-delete-command-of-c", "title": "About the &quot;delete&quot; command of C++", "body": "<p>I am a new C++ learner. I have a simple question. Here is the code from a book. Is it necessary to create a new pointer, \"pCat\"? Can I just use the \"rCat\" and delete it? If not, why? </p>\n\n<pre><code>class SimpleCat\n{\npublic:\n    SimpleCat (int age, int weight);\n\n    ~SimpleCat() {}\n\n    int GetAge() { return itsAge; }\n    int GetWeight() { return itsWeight; }\n\nprivate:\n    int itsAge;\n    int itsWeight;\n};\n\nSimpleCat::SimpleCat(int age, int weight):\n    itsAge(age), itsWeight(weight) {}\n\nSimpleCat* TheFunction();\n\nint main()\n{\n    SimpleCat* rCat = TheFunction();\n\n    int age = rCat-&gt;GetAge();\n\n    std::cout &lt;&lt; \"rCat is \" &lt;&lt; age &lt;&lt; \" years old!\\n\";\n\n    std::cout &lt;&lt; \"rCat: \" &lt;&lt; rCat &lt;&lt; \"\\n\";\n    // How do you get rid of that memory?\n    SimpleCat* pCat = rCat;\n    delete pCat;\n    return 0;\n}\n\nSimpleCat* TheFunction()\n{\n    SimpleCat *pFrisky = new SimpleCat(5,9);``\n    std::cout &lt;&lt; \"pFrisky: \" &lt;&lt; pFrisky &lt;&lt; \"\\n\";\n    return pFrisky;\n}\n</code></pre>\n"}, {"tags": ["java", "android", "c++", "tensorflow", "java-native-interface"], "answers": [{"tags": [], "owner": {"reputation": 306, "user_id": 4077291, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TLec31UfT28/AAAAAAAAAAI/AAAAAAAAGj8/xqDXuSk5p4E/photo.jpg?sz=128", "display_name": "Satoshi Kataoka", "link": "https://stackoverflow.com/users/4077291/satoshi-kataoka"}, "is_accepted": false, "score": 0, "last_activity_date": 1497469050, "creation_date": 1497469050, "answer_id": 44553327, "question_id": 44413622, "link": "https://stackoverflow.com/questions/44413622/undefined-reference-error-linking-native-functions-android/44553327#44553327", "title": "Undefined reference error linking native functions, android", "body": "<p>\"undefined reference error\" typically happens when you don't link depending obj files or don't link it in a right order.  Can you check \".cc\" file which contains ImageUtils is correctly linked in your cmake file?  If you are not sure, please provide following information:\n1. \".cc\" file path which contains \"ImageUtils\"\n2. A code snippet which links the obj of the \".cc\" file.</p>\n"}], "owner": {"reputation": 21, "user_id": 6539207, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38f254840f91f5f8f25e5e81d113137d?s=128&d=identicon&r=PG&f=1", "display_name": "Simar", "link": "https://stackoverflow.com/users/6539207/simar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1497469050, "creation_date": 1496841001, "question_id": 44413622, "link": "https://stackoverflow.com/questions/44413622/undefined-reference-error-linking-native-functions-android", "title": "Undefined reference error linking native functions, android", "body": "<p>I am trying to link native function to java but i am getting this error-</p>\n\n<pre><code>&gt; Error:(72) undefined reference to `ConvertYUV420SPToARGB8888HalfSize'\n&gt; Error:(76) undefined reference to `ConvertYUV420SPToARGB8888'\n&gt; Error:(95) undefined reference to `ConvertYUV420SPToARG Error:(102)\n&gt; undefined reference to `ConvertYUV420ToARGB8888' Error:(124) undefined\n&gt; reference to `ConvertYUV420SPToRGB565' Error:(141) undefined reference\n&gt; to `ConvertARGB8888ToYUV420SP' Error:(158) undefined reference to\n&gt; `ConvertRGB565ToYUV420SP'\n</code></pre>\n\n<p>I am unable to integrate is successfully with my app.\nThis is my activity calling the java varient of this function : </p>\n\n<pre><code>    public class ClassifierActivity extends CameraActivity implements OnImageAvailableListener {\n  static {\n    System.loadLibrary(\"imageutils_jni\");\n  }\n...\n...\n...\n\n     ImageUtils.convertYUV420ToARGB8888(\n              yuvBytes[0],\n              yuvBytes[1],\n              yuvBytes[2],\n              rgbBytes,\n              previewWidth,\n              previewHeight,\n              yRowStride,\n              uvRowStride,\n              uvPixelStride,\n              false);\n          computing=false;\n          image.close();\n        } catch (final Exception e) {\n          if (image != null) {\n            image.close();\n          }\n</code></pre>\n\n<p>This is how the function is instantiated : </p>\n\n<pre><code>    public static native void convertYUV420ToARGB8888(\n      byte[] y,\n      byte[] u,\n      byte[] v,\n      int[] output,\n      int width,\n      int height,\n      int yRowStride,\n      int uvRowStride,\n      int uvPixelStride,\n      boolean halfSize);\n</code></pre>\n\n<p>This is my jni.cc file</p>\n\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include \"rgb2yuv.h\"\n#include \"yuv2rgb.h\"\n\n#define IMAGEUTILS_METHOD(METHOD_NAME) \\\n  Java_com_example_harsimar_knp_veggiedetector_ImageUtils_##METHOD_NAME  // NOLINT\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\nJNIEXPORT void JNICALL\nIMAGEUTILS_METHOD(convertYUV420SPToARGB8888)(\n        JNIEnv* env, jclass clazz, jbyteArray input, jintArray output,\n        jint width, jint height, jboolean halfSize);\n\nJNIEXPORT void JNICALL IMAGEUTILS_METHOD(convertYUV420ToARGB8888)(\n        JNIEnv* env, jclass clazz, jbyteArray y, jbyteArray u, jbyteArray v,\n        jintArray output, jint width, jint height, jint y_row_stride,\n        jint uv_row_stride, jint uv_pixel_stride, jboolean halfSize);\n\nJNIEXPORT void JNICALL IMAGEUTILS_METHOD(convertYUV420SPToRGB565)(\n        JNIEnv* env, jclass clazz, jbyteArray input, jbyteArray output, jint width,\n        jint height);\n\nJNIEXPORT void JNICALL\nIMAGEUTILS_METHOD(convertARGB8888ToYUV420SP)(\n        JNIEnv* env, jclass clazz, jintArray input, jbyteArray output,\n        jint width, jint height);\n\nJNIEXPORT void JNICALL\nIMAGEUTILS_METHOD(convertRGB565ToYUV420SP)(\n        JNIEnv* env, jclass clazz, jbyteArray input, jbyteArray output,\n        jint width, jint height);\n\n#ifdef __cplusplus\n}\n#endif\n\nJNIEXPORT void JNICALL\nIMAGEUTILS_METHOD(convertYUV420SPToARGB8888)(\n        JNIEnv* env, jclass clazz, jbyteArray input, jintArray output,\n        jint width, jint height, jboolean halfSize) {\n    jboolean inputCopy = JNI_FALSE;\n    jbyte* const i = env-&gt;GetByteArrayElements(input, &amp;inputCopy);\n\n    jboolean outputCopy = JNI_FALSE;\n    jint* const o = env-&gt;GetIntArrayElements(output, &amp;outputCopy);\n\n    if (halfSize) {\n        ConvertYUV420SPToARGB8888HalfSize(reinterpret_cast&lt;uint8_t*&gt;(i),\n                                          reinterpret_cast&lt;uint32_t*&gt;(o), width,\n                                          height);\n    } else {\n        ConvertYUV420SPToARGB8888(reinterpret_cast&lt;uint8_t*&gt;(i),\n                                  reinterpret_cast&lt;uint8_t*&gt;(i) + width * height,\n                                  reinterpret_cast&lt;uint32_t*&gt;(o), width, height);\n    }\n\n    env-&gt;ReleaseByteArrayElements(input, i, JNI_ABORT);\n    env-&gt;ReleaseIntArrayElements(output, o, 0);\n}\n\nJNIEXPORT void JNICALL IMAGEUTILS_METHOD(convertYUV420ToARGB8888)(\n        JNIEnv* env, jclass clazz, jbyteArray y, jbyteArray u, jbyteArray v,\n        jintArray output, jint width, jint height, jint y_row_stride,\n        jint uv_row_stride, jint uv_pixel_stride, jboolean halfSize) {\n    jboolean inputCopy = JNI_FALSE;\n    jbyte* const y_buff = env-&gt;GetByteArrayElements(y, &amp;inputCopy);\n    jboolean outputCopy = JNI_FALSE;\n    jint* const o = env-&gt;GetIntArrayElements(output, &amp;outputCopy);\n\n    if (halfSize) {\n        ConvertYUV420SPToARGB8888HalfSize(reinterpret_cast&lt;uint8_t*&gt;(y_buff),\n                                          reinterpret_cast&lt;uint32_t*&gt;(o), width,\n                                          height);\n    } else {\n        jbyte* const u_buff = env-&gt;GetByteArrayElements(u, &amp;inputCopy);\n        jbyte* const v_buff = env-&gt;GetByteArrayElements(v, &amp;inputCopy);\n\n        ConvertYUV420ToARGB8888(\n                reinterpret_cast&lt;uint8_t*&gt;(y_buff), reinterpret_cast&lt;uint8_t*&gt;(u_buff),\n                reinterpret_cast&lt;uint8_t*&gt;(v_buff), reinterpret_cast&lt;uint32_t*&gt;(o),\n                width, height, y_row_stride, uv_row_stride, uv_pixel_stride);\n\n        env-&gt;ReleaseByteArrayElements(u, u_buff, JNI_ABORT);\n        env-&gt;ReleaseByteArrayElements(v, v_buff, JNI_ABORT);\n    }\n\n    env-&gt;ReleaseByteArrayElements(y, y_buff, JNI_ABORT);\n    env-&gt;ReleaseIntArrayElements(output, o, 0);\n}\n\nJNIEXPORT void JNICALL IMAGEUTILS_METHOD(convertYUV420SPToRGB565)(\n        JNIEnv* env, jclass clazz, jbyteArray input, jbyteArray output, jint width,\n        jint height) {\n    jboolean inputCopy = JNI_FALSE;\n    jbyte* const i = env-&gt;GetByteArrayElements(input, &amp;inputCopy);\n\n    jboolean outputCopy = JNI_FALSE;\n    jbyte* const o = env-&gt;GetByteArrayElements(output, &amp;outputCopy);\n\n    ConvertYUV420SPToRGB565(reinterpret_cast&lt;uint8_t*&gt;(i),\n                            reinterpret_cast&lt;uint16_t*&gt;(o), width, height);\n\n    env-&gt;ReleaseByteArrayElements(input, i, JNI_ABORT);\n    env-&gt;ReleaseByteArrayElements(output, o, 0);\n}\n\nJNIEXPORT void JNICALL\nIMAGEUTILS_METHOD(convertARGB8888ToYUV420SP)(\n        JNIEnv* env, jclass clazz, jintArray input, jbyteArray output,\n        jint width, jint height) {\n    jboolean inputCopy = JNI_FALSE;\n    jint* const i = env-&gt;GetIntArrayElements(input, &amp;inputCopy);\n\n    jboolean outputCopy = JNI_FALSE;\n    jbyte* const o = env-&gt;GetByteArrayElements(output, &amp;outputCopy);\n\n    ConvertARGB8888ToYUV420SP(reinterpret_cast&lt;uint32_t*&gt;(i),\n                              reinterpret_cast&lt;uint8_t*&gt;(o), width, height);\n\n    env-&gt;ReleaseIntArrayElements(input, i, JNI_ABORT);\n    env-&gt;ReleaseByteArrayElements(output, o, 0);\n}\n\nJNIEXPORT void JNICALL\nIMAGEUTILS_METHOD(convertRGB565ToYUV420SP)(\n        JNIEnv* env, jclass clazz, jbyteArray input, jbyteArray output,\n        jint width, jint height) {\n    jboolean inputCopy = JNI_FALSE;\n    jbyte* const i = env-&gt;GetByteArrayElements(input, &amp;inputCopy);\n\n    jboolean outputCopy = JNI_FALSE;\n    jbyte* const o = env-&gt;GetByteArrayElements(output, &amp;outputCopy);\n\n    ConvertRGB565ToYUV420SP(reinterpret_cast&lt;uint16_t*&gt;(i),\n                            reinterpret_cast&lt;uint8_t*&gt;(o), width, height);\n\n    env-&gt;ReleaseByteArrayElements(input, i, JNI_ABORT);\n    env-&gt;ReleaseByteArrayElements(output, o, 0);\n}\n</code></pre>\n\n<p>This is how my app level gradle file : </p>\n\n<pre><code>   apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 25\n    buildToolsVersion \"25.0.3\"\n    defaultConfig {\n        applicationId \"com.example.harsimar.kpn_veggiedetector\"\n        minSdkVersion 15\n        targetSdkVersion 25\n        versionCode 1\n        versionName \"1.0\"\n        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n    sourceSets {\n        main {\n            assets.srcDirs = ['assets']\n            jniLibs.srcDirs = ['libs']\n            jni.srcDirs = []\n        }\n    }\n    aaptOptions { noCompress 'pb' }\n    lintOptions {\n        abortOnError false\n    }\n    externalNativeBuild {\n        cmake {\n            path \"CMakeLists.txt\"\n        }\n\n    }\n\n    dependencies {\n        compile fileTree(dir: 'libs', include: ['*.jar'])\n        compile files('libs/libandroid_tensorflow_inference_java.jar')\n        androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {\n            exclude group: 'com.android.support', module: 'support-annotations'\n        })\n        compile 'com.android.support:appcompat-v7:25.3.1'\n        compile 'com.android.support.constraint:constraint-layout:1.0.2'\n        compile 'com.flurgle:camerakit:0.9.17'\n        testCompile 'junit:junit:4.12'\n    }\n}\n</code></pre>\n\n<p>The cmake file is like this : </p>\n\n<pre><code>    cmake_minimum_required(VERSION 3.4.1)\n\nadd_library(\n             native-lib\n             SHARED\n             src/main/jni/imageutils_jni.cc\n             )\n\n\n find_library(\n             android-lib\n             android\n             )\nfile(\n            GLOB SOURCES\n            src/main/jni/*.h\n            src/main/jni/*.cpp\n             )\ninclude_directories( src/main/cpp )\ninclude_directories(src/main/jni)\n</code></pre>\n\n<p>I have the required headers and other files in same directory as the jni file.\nPlease help me, thanks in advance!</p>\n"}, {"tags": ["c++", "class", "oop", "inheritance"], "comments": [{"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "edited": false, "score": 3, "creation_date": 1496841261, "post_id": 44413607, "comment_id": 75826312, "body": "What is your <i>current</i> understanding of the access levels <code>public</code>, <code>protected</code>, and <code>private</code>? You should add that to the question. Like this, it seems like you haven&#39;t done any research yourself, in which case reading a <a href=\"https://stackoverflow.com/q/388242/1782465\">good book</a> would be a better course of action than asking on SO."}, {"owner": {"reputation": 25, "user_id": 7910355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8034aa9a9666ec5b92f4ee1c836411?s=128&d=identicon&r=PG&f=1", "display_name": "CiobyMorningStar", "link": "https://stackoverflow.com/users/7910355/ciobymorningstar"}, "edited": false, "score": 0, "creation_date": 1496841720, "post_id": 44413607, "comment_id": 75826687, "body": "Well, using the protected keyword on the constructor and function get_b() means that derived classes have acces to them. If the inherittance is public, but in this case by using private inheritance I would expect that the constructor and the get_b() method would be inaccesible from class D."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1496841488, "post_id": 44413782, "comment_id": 75826501, "body": "Access modifiers do not control what you call <i>&quot;inheritance awareness&quot;</i>."}], "tags": [], "owner": {"reputation": 335, "user_id": 8098363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gx9eu.jpg?s=128&g=1", "display_name": "David LUC", "link": "https://stackoverflow.com/users/8098363/david-luc"}, "is_accepted": false, "score": -2, "last_activity_date": 1496841362, "creation_date": 1496841362, "answer_id": 44413782, "question_id": 44413607, "link": "https://stackoverflow.com/questions/44413607/need-some-help-understanding-private-protected-public-inheritance/44413782#44413782", "title": "Need some help understanding private / protected / public inheritance", "body": "<p>Private/protected/public inheritance is all about deciding who is aware of the inheritance. In public inheritance, all outside code is aware of it. In protected inheritance, only the children are aware. In private, only the inheriting class is aware. On top of that, the same keywords apply on members, but are not affected by the inheritance visibility. If the class is aware of the inheritance, a member is visible as usual. If it is not aware of the inheritance, it is even less aware of members, be them public, private or protected.</p>\n\n<p>To answer your specific question, if you created a class E inheriting (publicly) your class D, you wouldn't be able to call <code>get_b</code>, but you could still call <code>get_a</code></p>\n"}, {"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 0, "last_activity_date": 1496844655, "last_edit_date": 1592644375, "creation_date": 1496844655, "answer_id": 44415081, "question_id": 44413607, "link": "https://stackoverflow.com/questions/44413607/need-some-help-understanding-private-protected-public-inheritance/44415081#44415081", "title": "Need some help understanding private / protected / public inheritance", "body": "<p>In effect, public, protected, and private <em>inheritance</em> specifies the most liberal access control that will apply to inherited members. What I mean:</p>\n<h3>Public</h3>\n<pre><code>class Pub : public B\n</code></pre>\n<p>Public members of <code>B</code> inherited by <code>Pub</code> will be accessible both within <code>Pub</code> itself and from outside (as well as from any classes derived from <code>Pub</code>). Protected members of <code>B</code> inherited by <code>Pub</code> will be accessible within <code>Pub</code> and within classes derived from <code>Pub</code>. Private members of <code>B</code> will not be accessible within <code>Pub</code>.</p>\n<p>Another way to put it: <code>B</code>'s public members remain public, protected members remain protected, private members are inaccessible.</p>\n<h3>Protected</h3>\n<pre><code>class Prot : protected B\n</code></pre>\n<p>Public and protected members of <code>B</code> inherited by <code>Prot</code> will be accesible like protected members of <code>Prot</code>: within the class itself and in classes derived from it, but not from outside. Private members of <code>B</code> are still not accessible to <code>Prot</code>.</p>\n<p>Another way to put it: <code>B</code>'s public members become protected, protected members remain protected, private members are inaccessible.</p>\n<h3>Private</h3>\n<pre><code>class Priv : private B\n</code></pre>\n<p>Public and protected members of <code>B</code> inherited by <code>Priv</code> will be accessible to <code>Priv</code> only, and not to any derived classes (they are accessible just like private members of <code>Priv</code>). Private members of <code>B</code> are still not accessible to <code>Prot</code>.</p>\n<p>Another way to put it: <code>B</code>'s public and protected members become private, private members are inaccessible.</p>\n"}, {"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 1, "last_activity_date": 1496849138, "last_edit_date": 1496849138, "creation_date": 1496845004, "answer_id": 44415227, "question_id": 44413607, "link": "https://stackoverflow.com/questions/44413607/need-some-help-understanding-private-protected-public-inheritance/44415227#44415227", "title": "Need some help understanding private / protected / public inheritance", "body": "<blockquote>\n  <p>Why can I use the get_b() function?</p>\n</blockquote>\n\n<p>Because <code>get_b()</code> is <code>protected</code> and can be used by derived class.</p>\n\n<blockquote>\n  <p>Why does the constructor B(x) work? </p>\n</blockquote>\n\n<p>The same reason, it is <code>protected</code> and accessible by derived class <code>D</code> in this case.</p>\n\n<blockquote>\n  <p>Why doesn't it work if I change protected to private then?</p>\n</blockquote>\n\n<p>Because <code>private</code> members only accessible by class itself (<code>B</code> in this case) and it's friends, <code>D</code> does not have access to <code>private</code> members of <code>B</code>.</p>\n\n<blockquote>\n  <p>Later Edit : By using the protected keyword on the constructor and function get_b() means that derived classes have acces to them <strong>if the inheritance is public</strong>.</p>\n</blockquote>\n\n<p>Bold part in your statement is incorrect. Inheritance specifier says how <code>B</code> members would be accessible in children and users of class <code>D</code>, it does not change access of methods of class <code>D</code> to members of class <code>B</code>.</p>\n\n<blockquote>\n  <p>However, in this case by using private inheritance I would expect that the constructor and the get_b() function would be inaccesible from class <code>D</code>.</p>\n</blockquote>\n\n<p>Your expectation is wrong. Private inheritance would make members of class <code>B</code> inaccessible in children and users of class <code>D</code>, it does not affect accessibility of members of <code>B</code> for methods of <code>D</code> itself.</p>\n"}], "owner": {"reputation": 25, "user_id": 7910355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8034aa9a9666ec5b92f4ee1c836411?s=128&d=identicon&r=PG&f=1", "display_name": "CiobyMorningStar", "link": "https://stackoverflow.com/users/7910355/ciobymorningstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 44415227, "answer_count": 3, "score": -2, "last_activity_date": 1496849138, "creation_date": 1496840964, "last_edit_date": 1496844250, "question_id": 44413607, "link": "https://stackoverflow.com/questions/44413607/need-some-help-understanding-private-protected-public-inheritance", "title": "Need some help understanding private / protected / public inheritance", "body": "<p>Currently, I am learning OOP, and I've tried many inheritance examples. I just tested this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass B \n{\n    int a;\nprotected:\n    B(int i=0)\n    {\n        a=i;\n    }\n\n    int get_b()\n    {\n        return a;\n    }\n};\n\nclass D: private B\n{\npublic:\n    D(int x=0): B(x) {}\n\n    int get_a()\n    {\n        return get_b();\n    }\n};\n\nint main()\n{\n    D d(-89);\n    cout &lt;&lt; d.get_a();\n    return 0; \n}\n</code></pre>\n\n<p>Why does this work? Why can I use the <code>get_b()</code> function? Why does the constructor <code>B(x)</code> work? Why doesn't it work if I change <code>protected</code> to <code>private</code> then?</p>\n\n<p>Later Edit : By using the <code>protected</code> keyword on the constructor and function <code>get_b()</code> means that derived classes have acces to them if the inheritance is public. However, in this case by using private inheritance I would expect that the constructor and the <code>get_b()</code> function would be inaccesible from class <code>D</code>.</p>\n"}, {"tags": ["c++", "inheritance", "constructor", "c++14", "abstract-class"], "comments": [{"owner": {"reputation": 5576, "user_id": 767632, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75a05c23a398c887e8f085b9c870586c?s=128&d=identicon&r=PG", "display_name": "yeputons", "link": "https://stackoverflow.com/users/767632/yeputons"}, "edited": false, "score": 0, "creation_date": 1496840964, "post_id": 44413478, "comment_id": 75826057, "body": "Is it correct that in <code>Mix</code>&#39;s constructor you want to dynamically allocate a storage for two objects (pointed to by <code>unique_ptr</code>s) and copy constructor&#39;s arguments there?"}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 14, "last_activity_date": 1496841526, "last_edit_date": 1496841526, "creation_date": 1496840964, "answer_id": 44413606, "question_id": 44413478, "link": "https://stackoverflow.com/questions/44413478/abstract-class-and-unique-pointer/44413606#44413606", "title": "Abstract class and unique pointer", "body": "<p>This call:</p>\n\n<pre><code>std::make_unique&lt;Material&gt;(mat1)\n</code></pre>\n\n<p>tries to create an instance of class <code>Material</code>, it is irrelevant what type <code>mat1</code> has. You seem to need method <code>clone()</code> in your class:</p>\n\n<pre><code>class Material {\n...\n    virtual std::unique_ptr&lt;Material&gt; clone() const = 0;\n};\n</code></pre>\n\n<p>then <code>Mix</code> ctor would be:</p>\n\n<pre><code>Mix(const Material&amp; mat1, const Material&amp; mat2)\n    : mat1_(mat1.clone())\n    , mat2_(mat2.clone())\n  {}\n</code></pre>\n\n<p>and you need to implement <code>clone()</code> in every derived class:</p>\n\n<pre><code>struct Basic : public Material\n{\n  Basic() = default;\n\n  virtual std::unique_ptr&lt;Material&gt; clone() const override\n  {\n      return std::make_unique&lt;Basic&gt;( *this ); \n  }\n\n  virtual int get_color() const override\n  {\n    return 1;\n  }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2298, "user_id": 334142, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/8c65bdab337b8aa043bd470d3cbf3531?s=128&d=identicon&r=PG", "display_name": "mabraham", "link": "https://stackoverflow.com/users/334142/mabraham"}, "edited": false, "score": 1, "creation_date": 1547195154, "post_id": 44414247, "comment_id": 95116571, "body": "This can be reasonable, but it creates the requirement that a caller must ensure the lifetime of the two Material objects exceeds that of the the Mix object. Compilers and other tooling tend not to be able to help check such requirements. Such requirements can be problematic under maintenance, unless e.g. a single object has the responsibility of maintaining that coordination. Sometimes those requirements are necessary if other objects must control the lifetime. Sometimes Mix and MixMaterialHolder would be too many types, and adding ownership responsibilities to Mix would be better."}], "tags": [], "owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "is_accepted": false, "score": 3, "last_activity_date": 1496842508, "creation_date": 1496842508, "answer_id": 44414247, "question_id": 44413478, "link": "https://stackoverflow.com/questions/44413478/abstract-class-and-unique-pointer/44414247#44414247", "title": "Abstract class and unique pointer", "body": "<p>The problem is because <code>Mix</code> tries to create an object of the abstract class <code>Material</code>:</p>\n\n<pre><code>: mat1_(std::make_unique&lt;Material&gt;(mat1))\n</code></pre>\n\n<p>Ideally, based on the signature</p>\n\n<pre><code>Mix(const Material&amp; mat1, const Material&amp; mat2)\n</code></pre>\n\n<p><code>Mix</code> should be able to just operate on any type of <code>Material</code> passed to it. </p>\n\n<p>The fact that <code>Mix</code> is passed with abstract class reference is good. But the fact that <code>Mix</code> is trying to create objects of derived class is unusual. What if there were other derived classes?</p>\n\n<p>I would design slightly differently such that <code>Mix</code> is <em>not</em> the owner of the constituents; they are created and owned by something outside, <code>Mix</code> just mixes what is passed to it.</p>\n\n<pre><code>struct Mix : public Material\n{\n  Mix(const Material&amp; mat1, const Material&amp; mat2)\n    : mat1_{mat1}, mat2_{mat2}\n  {}\n\n  virtual int get_color() const override\n  {\n    return mat1_.get_color() + mat2_.get_color();\n  }     \nprivate:\n  Material const&amp; mat1_;\n  Material const&amp; mat2_;\n};\n\nint main()\n{\n  std::unique_ptr&lt;Material&gt; mat1 = std::make_unique&lt;Basic&gt;();\n  std::unique_ptr&lt;Material&gt; mat2 = std::make_unique&lt;Basic&gt;();\n\n  auto mix = Mix(*(mat1.get()), *(mat2.get()));\n  std::cout &lt;&lt; mix.get_color() &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "is_accepted": false, "score": 2, "last_activity_date": 1547198966, "last_edit_date": 1547198966, "creation_date": 1496844087, "answer_id": 44414847, "question_id": 44413478, "link": "https://stackoverflow.com/questions/44413478/abstract-class-and-unique-pointer/44414847#44414847", "title": "Abstract class and unique pointer", "body": "<p>You can use a templated constructor to arrange for constructing the right types without needing a clone method:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nstruct Material {\n    Material() = default;\n    virtual int get_color() const = 0;\n};\n\nstruct Basic : Material {\n    Basic() = default;\n    int get_color() const override {\n        return 1;\n    }\n};\n\nstruct Mix : Material {\n    template&lt;typename M1, typename M2&gt;\n    Mix(const M1&amp; mat1, const M2&amp; mat2)\n        : mat1_{std::make_unique&lt;M1&gt;(std::move(mat1))}\n        , mat2_{std::make_unique&lt;M2&gt;(std::move(mat2))}\n    {} \n\n    int get_color() const override {\n        return mat1_-&gt;get_color() + mat2_-&gt;get_color();\n    }\n\nprivate:\n    std::unique_ptr&lt;Material&gt; mat1_;\n    std::unique_ptr&lt;Material&gt; mat2_;\n};\n\nint main() {\n    auto mix = Mix(Basic(), Basic());\n    std::cout &lt;&lt; mix.get_color() &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Note that this works only if you send instance of a material with a known type.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6498918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a3eab2bc8a7fa62723f1860a09a69f3?s=128&d=identicon&r=PG&f=1", "display_name": "wilesc0", "link": "https://stackoverflow.com/users/6498918/wilesc0"}, "is_accepted": false, "score": 0, "last_activity_date": 1556541516, "last_edit_date": 1556541516, "creation_date": 1556540141, "answer_id": 55903184, "question_id": 44413478, "link": "https://stackoverflow.com/questions/44413478/abstract-class-and-unique-pointer/55903184#55903184", "title": "Abstract class and unique pointer", "body": "<p><a href=\"http://www.cplusplus.com/forum/beginner/236974/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/forum/beginner/236974/</a> contains the proper solution. \nThe <code>make_shared</code> should be of the specific type; you can then without issues store this in a <code>unique_ptr</code> of the abstract type. </p>\n"}], "owner": {"reputation": 302, "user_id": 5472779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1ab12f22d43cdb4a39545496021dd13?s=128&d=identicon&r=PG&f=1", "display_name": "Colt", "link": "https://stackoverflow.com/users/5472779/colt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8481, "favorite_count": 3, "accepted_answer_id": 44413606, "answer_count": 4, "score": 12, "last_activity_date": 1556541516, "creation_date": 1496840628, "last_edit_date": 1496841481, "question_id": 44413478, "link": "https://stackoverflow.com/questions/44413478/abstract-class-and-unique-pointer", "title": "Abstract class and unique pointer", "body": "<p>I have the following error in my code: </p>\n\n<p><code>error: allocating an object of abstract class type 'Material'</code></p>\n\n<p>I don't know how to handle this case.</p>\n\n<p>I'm aware that <code>std::make_unique</code> performs an allocation, so it can't allocate the object of type <code>Material</code>, but I don't know how to correct it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n\nstruct Material\n{\n  Material() = default;\n  virtual int get_color() const = 0;\n};\n\nstruct Basic : public Material\n{\n  Basic() = default;\n  virtual int get_color() const override\n  {\n    return 1;\n  }\n};\n\nstruct Mix : public Material\n{\n  Mix(const Material&amp; mat1, const Material&amp; mat2)\n    : mat1_(std::make_unique&lt;Material&gt;(mat1))\n    , mat2_(std::make_unique&lt;Material&gt;(mat2))\n  {}\n\n  virtual int get_color() const override\n  {\n    return mat1_-&gt;get_color() + mat2_-&gt;get_color();\n  }     \nprivate:\n  std::unique_ptr&lt;Material&gt; mat1_;\n  std::unique_ptr&lt;Material&gt; mat2_;\n};\n\nint main()\n{\n  auto mix = Mix(Basic(), Basic());\n  std::cout &lt;&lt; mix.get_color() &lt;&lt; '\\n';\n}\n</code></pre>\n"}, {"tags": ["c++", "performance", "range-v3"], "comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 4, "creation_date": 1496849526, "post_id": 44413446, "comment_id": 75832843, "body": "Please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, specific performance measurement results, compiler and system information."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1496865463, "post_id": 44413446, "comment_id": 75841964, "body": "Just an observation: from glancing at a lot of the ranges code, it&#39;s very powerful but with all the lambdas returning lambdas returning lambdas etc it doesn&#39;t seem like it&#39;s optimized for performance rather than ease of syntax."}, {"owner": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "reply_to_user": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1496865636, "post_id": 44413446, "comment_id": 75842061, "body": "@AndyG Why would that be a problem for performance, lambdas returning lambdas? Lambdas are not externally-linked functions: they don&#39;t have to &quot;physically&quot; exist in the executable. They can very easily be elided in templated code, as Range-v3 is"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "reply_to_user": {"reputation": 2289, "user_id": 2356414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dff4a2241e2dcfc50615e4b7c709bd17?s=128&d=identicon&r=PG", "display_name": "KABoissonneault", "link": "https://stackoverflow.com/users/2356414/kaboissonneault"}, "edited": false, "score": 0, "creation_date": 1496865748, "post_id": 44413446, "comment_id": 75842105, "body": "@KABoissonneault: That&#39;s a fair point. I&#39;d like to see what actually gets elided etc. On another front, I recall the CPPCon talk from Eric Neibler about the tendency of the ranges libraries to produce more copies than necessary due to lack of language support."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 8125498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b7a93a14cf343b77979c4321fd8467?s=128&d=identicon&r=PG&f=1", "display_name": "fast asleep", "link": "https://stackoverflow.com/users/8125498/fast-asleep"}, "edited": false, "score": 0, "creation_date": 1496866132, "post_id": 44421820, "comment_id": 75842286, "body": "Thanks for the nice response.  I already came across that overflow issue and fixed in my google-bench driver...does the code in ranges::view::transform(ranges::convert_to&lt;long&gt;{}) just convert each integer on the fly to a long type?"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 315, "user_id": 8125498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b7a93a14cf343b77979c4321fd8467?s=128&d=identicon&r=PG&f=1", "display_name": "fast asleep", "link": "https://stackoverflow.com/users/8125498/fast-asleep"}, "edited": false, "score": 0, "creation_date": 1496867240, "post_id": 44421820, "comment_id": 75842876, "body": "@user8125498 Yip. <code>convert_to&lt;T&gt;</code> is a function object that simply returns its argument <code>static_cast</code>ed to <code>T</code>."}, {"owner": {"reputation": 315, "user_id": 8125498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b7a93a14cf343b77979c4321fd8467?s=128&d=identicon&r=PG&f=1", "display_name": "fast asleep", "link": "https://stackoverflow.com/users/8125498/fast-asleep"}, "edited": false, "score": 0, "creation_date": 1496868377, "post_id": 44421820, "comment_id": 75843441, "body": "If this is an implementation detail, do I need to open a bug on GitHub?"}, {"owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "reply_to_user": {"reputation": 315, "user_id": 8125498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b7a93a14cf343b77979c4321fd8467?s=128&d=identicon&r=PG&f=1", "display_name": "fast asleep", "link": "https://stackoverflow.com/users/8125498/fast-asleep"}, "edited": false, "score": 0, "creation_date": 1496954967, "post_id": 44421820, "comment_id": 75888188, "body": "@user8125498 Yes, please report a bug. I&#39;ve got a sort-of-better rework in progress at <a href=\"https://github.com/ericniebler/range-v3/compare/master...CaseyCarter:partial_sum_cleanup\" rel=\"nofollow noreferrer\">github.com/ericniebler/range-v3/compare/&hellip;</a>, but an issue report will help me remember to come back and finish it ;)"}, {"owner": {"reputation": 6527, "user_id": 1422197, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6bcbddbd9c7b31aaff8cf25a356bc96c?s=128&d=identicon&r=PG", "display_name": "gnzlbg", "link": "https://stackoverflow.com/users/1422197/gnzlbg"}, "edited": false, "score": 0, "creation_date": 1497030443, "post_id": 44421820, "comment_id": 75924505, "body": "Have you tried increasing the inlining threshold of clang?"}], "tags": [], "owner": {"reputation": 38390, "user_id": 923854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OecRr.png?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/923854/casey"}, "is_accepted": true, "score": 25, "last_activity_date": 1496865828, "creation_date": 1496865828, "answer_id": 44421820, "question_id": 44413446, "link": "https://stackoverflow.com/questions/44413446/why-is-range-v3-slower-than-the-stl-in-this-example/44421820#44421820", "title": "Why is Range-v3 slower than the STL in this example?", "body": "<p><code>view::partial_sum</code> over a range of <code>int</code> produces a range of <code>int</code>. If <code>to_find &gt; INT_MAX</code>, the internal accumulator will overflow resulting in UB. In practice the algorithm most likely walks the entire input and returns the end iterator.</p>\n\n<p>Conversely, your <code>accumulated_length</code> in the non-range-v3 approach is a <code>long</code>. It does not overflow, and thus has defined behavior / returns before processing the entire input.</p>\n\n<p>The range-v3 approach will have correct behavior if you <code>transform</code> the input range into a range of <code>long</code> before passing it through <code>partial_sum</code>:</p>\n\n<pre><code>auto found_index = distance(lengths\n  | view::transform(convert_to&lt;long&gt;{}) | view::partial_sum()\n  | view::take_while([=](auto const i) { return i &lt; to_find; }));\n</code></pre>\n\n<p>Even with this correctness fix, it is still remarkedly slower than using the standard algorithms in my testing. Compiling this test program:</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;iostream&gt;\n#include &lt;random&gt;\n#include &lt;vector&gt;\n\n#ifdef USE_RV3\n#include &lt;range/v3/core.hpp&gt;\n#include &lt;range/v3/algorithm.hpp&gt;\n#include &lt;range/v3/numeric.hpp&gt;\n#include &lt;range/v3/view.hpp&gt;\n\n#else\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n#endif\n\nint main() {\n    constexpr size_t large_number = 1UL &lt;&lt; 30;\n\n    int random_number = 42;\n\n    std::vector&lt;int&gt; const lengths(large_number, random_number);\n\n    using clock_t = std::chrono::steady_clock;\n    auto const start = clock_t::now();\n\n#ifdef USE_RV3\n    auto const to_find = ranges::accumulate(lengths, 0l) / 2;\n#else\n    auto const to_find = std::accumulate(lengths.begin(), lengths.end(), 0l) / 2;\n#endif\n\n    auto const elapsed1 = clock_t::now() - start;\n\n#ifdef USE_RV3\n    auto const found_index = ranges::distance(lengths\n            | ranges::view::transform(ranges::convert_to&lt;long&gt;{})\n            | ranges::view::partial_sum()\n            | ranges::view::take_while([=](auto const i) { return !(to_find &lt; i); }));\n#else\n    auto accumulated_length = 0l;\n    auto found = std::find_if(lengths.begin(), lengths.end(), [&amp;](auto const &amp;val) {\n                                accumulated_length += val;\n                                return to_find &lt; accumulated_length;\n                            });\n    auto const found_index = std::distance(lengths.begin(), found);\n#endif\n\n    auto const elapsed2 = clock_t::now() - start;\n\n    std::cout &lt;&lt; \"elapsed1: \"\n        &lt;&lt; std::chrono::duration&lt;double, std::milli&gt;(elapsed1).count()\n        &lt;&lt; \" ms, to_find: \" &lt;&lt; to_find &lt;&lt; \"\\n\"\n           \"elapsed2: \"\n        &lt;&lt; std::chrono::duration&lt;double, std::milli&gt;(elapsed2).count()\n        &lt;&lt; \" ms, result: \" &lt;&lt; found_index &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>with</p>\n\n<pre>\ng++-6 -std=c++14 -Ofast -march=native -DNDEBUG rv3.cpp -I ~/dev/range-v3/include -S -o -\n</pre>\n\n<p>both without and with <code>-DUSE_RV3</code> and diffing the assembly output is interesting. The code generated up through the initialization of <code>elapsed1</code> is identical for both cases. There are notable differences in the intermediate section between the initializations of <code>elapsed1</code> and <code>elapsed2</code>. gcc does a much better job of optimizing the std version: the hot loop is all together in a single code run with branches for terminating conditions. The range-v3 version is uglier and jumps around quite a bit; I speculate that we need to wiggle the details of the implementation of <code>partial_sum</code> to make it more transparent to optimizers.</p>\n"}], "owner": {"reputation": 315, "user_id": 8125498, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6b7a93a14cf343b77979c4321fd8467?s=128&d=identicon&r=PG&f=1", "display_name": "fast asleep", "link": "https://stackoverflow.com/users/8125498/fast-asleep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3462, "favorite_count": 6, "accepted_answer_id": 44421820, "answer_count": 1, "score": 30, "last_activity_date": 1496993265, "creation_date": 1496840564, "last_edit_date": 1496993265, "question_id": 44413446, "link": "https://stackoverflow.com/questions/44413446/why-is-range-v3-slower-than-the-stl-in-this-example", "title": "Why is Range-v3 slower than the STL in this example?", "body": "<p>I'm playing around with the Range-v3 library to perform a glorified <code>find_if</code> and was curious why google-benchmark consistently ranks my Range-v3 code worse than my <code>std::find_if</code> approach. Both g++ and clang give the same pattern with <code>-O3</code> and <code>#define NDEBUG</code>.</p>\n\n<p>The specific example I have in mind is the following using the STL:</p>\n\n<pre><code>std::vector&lt;int&gt; lengths(large_number, random_number);\n\nauto const to_find = std::accumulate(lengths.begin(), lengths.end(), 0l) / 2;\nauto accumulated_length = 0l;\nauto found = std::find_if(lengths.begin(), lengths.end(), [&amp;](auto const &amp;val) {\n                              accumulated_length += val;\n                              return to_find &lt; accumulated_length;\n                          });\nauto found_index = std::distance(lengths.begin(), found);    \n</code></pre>\n\n<p>This is somewhat contrived for the purpose of this illustration, but there would usually be a random generator for the <code>to_find</code> variable and random values in the <code>lengths</code> vector.</p>\n\n<p>Using the Range-v3 library, I get the following code</p>\n\n<pre><code>using namespace ranges;    \n\nstd::vector&lt;int&gt; lengths(large_number, random_number);\n\nauto const to_find = accumulate(lengths, 0l) / 2;\n\nauto found_index = distance(lengths | view::partial_sum()\n                                    | view::take_while([=](auto const i) {\n                                         return i &lt; to_find;\n                                      }));\n</code></pre>\n\n<p>My question is why the Range-v3 is slower than the STL implementation. I understand this is still an experimental library, but perhaps there is something wrong with the code example or am I misusing the range concepts?</p>\n\n<h2>Edit</h2>\n\n<p>An example google-bench driver (not sure if correct)</p>\n\n<pre><code>#define NDEBUG\n\n#include &lt;numeric&gt;\n#include &lt;vector&gt;\n\n#include &lt;benchmark/benchmark.h&gt;\n\n#include &lt;range/v3/all.hpp&gt;\n\nstatic void stl_search(benchmark::State &amp;state) {\n\n    using namespace ranges;\n\n    std::vector&lt;long&gt; lengths(state.range(0), 1l);\n\n    auto const to_find = std::accumulate(lengths.begin(), lengths.end(), 0l) / 2;\n\n    while (state.KeepRunning()) {\n\n        auto accumulated_length = 0l;\n        auto const found = std::find_if(lengths.begin(), lengths.end(), [&amp;](auto const&amp; val) {\n                               accumulated_length += val;\n                               return to_find &lt; accumulated_length;\n                           });\n        volatile long val = std::distance(lengths.begin(), found);\n    }\n    state.SetBytesProcessed(int64_t(state.iterations()) *\n                            int64_t(state.range(0)) * sizeof(long));\n}\n\nstatic void ranges_search(benchmark::State &amp;state) {\n\n    using namespace ranges;\n\n    std::vector&lt;long&gt; lengths(state.range(0), 1l);\n\n    auto const to_find = accumulate(lengths, 0l) / 2;\n\n    while (state.KeepRunning())\n    {\n        volatile long val = distance(lengths | view::partial_sum()\n                                             | view::take_while([=](auto const&amp; i) {\n                                                   return i &lt;= to_find;\n                                               }));\n    }\n    state.SetBytesProcessed(int64_t(state.iterations()) *\n                            int64_t(state.range(0)) * sizeof(long));\n}\n\nBENCHMARK(ranges_search)-&gt;Range(8 &lt;&lt; 8, 8 &lt;&lt; 16);\nBENCHMARK(stl_search)-&gt;Range(8 &lt;&lt; 8, 8 &lt;&lt; 16);\n\nBENCHMARK_MAIN();\n</code></pre>\n\n<p>Gives</p>\n\n<pre><code>ranges_search/2048          756 ns        756 ns     902091   20.1892GB/s\nranges_search/4096         1495 ns       1494 ns     466681   20.4285GB/s\nranges_search/32768       11872 ns      11863 ns      58902   20.5801GB/s\nranges_search/262144      94982 ns      94892 ns       7364   20.5825GB/s\nranges_search/524288     189870 ns     189691 ns       3688   20.5927GB/s\nstl_search/2048             348 ns        348 ns    2000964   43.8336GB/s\nstl_search/4096             690 ns        689 ns    1008295   44.2751GB/s\nstl_search/32768           5497 ns       5492 ns     126097    44.452GB/s\nstl_search/262144         44725 ns      44681 ns      15882   43.7122GB/s\nstl_search/524288         91027 ns      90936 ns       7616   42.9563GB/s\n</code></pre>\n\n<p>with clang 4.0.1 and </p>\n\n<pre><code>ranges_search/2048         2309 ns       2307 ns     298507   6.61496GB/s\nranges_search/4096         4558 ns       4554 ns     154520   6.70161GB/s\nranges_search/32768       36482 ns      36454 ns      19191   6.69726GB/s\nranges_search/262144     287072 ns     286801 ns       2438   6.81004GB/s\nranges_search/524288     574230 ns     573665 ns       1209   6.80928GB/s\nstl_search/2048             299 ns        298 ns    2340691   51.1437GB/s\nstl_search/4096             592 ns        591 ns    1176783   51.6363GB/s\nstl_search/32768           4692 ns       4689 ns     149460   52.0711GB/s\nstl_search/262144         37718 ns      37679 ns      18611   51.8358GB/s\nstl_search/524288         75247 ns      75173 ns       9244   51.9633GB/s\n</code></pre>\n\n<p>with gcc 6.3.1.  My machine has a Haswell generation processor.  Both were compiled and executed with </p>\n\n<pre><code>g++ -Wall -O3 -std=c++14 Ranges.cpp -lbenchmark -lpthread &amp;&amp; ./a.out\nclang++ -Wall -O3 -std=c++14 Ranges.cpp -lbenchmark -lpthread &amp;&amp; ./a.out\n</code></pre>\n"}, {"tags": ["c++", "windows", "winapi", "direct2d"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1496841909, "post_id": 44413441, "comment_id": 75826852, "body": "Please construct a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. You&#39;re likely finding the solution to your issue while creating it. If you don&#39;t, it&#39;ll still make for a better question."}, {"owner": {"reputation": 9, "user_id": 8117361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd07247510a882aeed376c96caf1520?s=128&d=identicon&r=PG&f=1", "display_name": "kazama", "link": "https://stackoverflow.com/users/8117361/kazama"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496843233, "post_id": 44413441, "comment_id": 75827823, "body": "I&#39;m not sure I know what you mean by &quot;...finding the solution to your issue while creating it.&quot; I&#39;ve tried to only include code related to the problem, which I believe concerns the class."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 2, "creation_date": 1496843564, "post_id": 44413441, "comment_id": 75828075, "body": "Having a class <code>Graphics</code> adds nothing meaningful to illustrate the issue. Likewise, the implementation of <code>Graphics::Draw()</code> adds nothing to illustrate the issue. Keep removing pieces of code, until you have the <b>absolute minimum</b> of code required to still show the issue. I posted a link with instructions."}, {"owner": {"reputation": 10424, "user_id": 3408572, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0f3a08b145553b98749d3d0572d01265?s=128&d=identicon&r=PG&f=1", "display_name": "andlabs", "link": "https://stackoverflow.com/users/3408572/andlabs"}, "edited": false, "score": 0, "creation_date": 1496845288, "post_id": 44413441, "comment_id": 75829536, "body": "There is nothing in that block of code that would cause the window to not show up. The problem is likely elsewhere. Also it is <b>imperative</b> to check the return value of <code>EndDraw()</code>, because you may need to recreate your render target and all of the device-specific objects (like brushes). And you must also call <code>ValidateRect()</code> after a successful <code>EndDraw()</code>, because otherwise Windows will keep sending <code>WM_PAINT</code> messages."}, {"owner": {"reputation": 9, "user_id": 8117361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd07247510a882aeed376c96caf1520?s=128&d=identicon&r=PG&f=1", "display_name": "kazama", "link": "https://stackoverflow.com/users/8117361/kazama"}, "edited": false, "score": 0, "creation_date": 1496846597, "post_id": 44413441, "comment_id": 75830632, "body": "Ok, I&#39;ll look into that. I&#39;m going to try to rework some stuff in the code and the question. Actually what&#39;s happening now is that the window opens, then another window pops up and says &quot;a problem occurred causing the program to misbehave&quot; with a button that says &quot;close program&quot;."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1496849197, "post_id": 44413441, "comment_id": 75832611, "body": "Trying to write code by guessing isn&#39;t going to work out. <code>if (!S_OK)</code> is perfectly valid code, but doesn&#39;t do, what you think it does. Heed the compiler&#39;s warnings. Anyway, your code never even attempts to create a render target. A debugger would have <b>immediately</b> told you. Learn to use it."}, {"owner": {"reputation": 9, "user_id": 8117361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd07247510a882aeed376c96caf1520?s=128&d=identicon&r=PG&f=1", "display_name": "kazama", "link": "https://stackoverflow.com/users/8117361/kazama"}, "edited": false, "score": 0, "creation_date": 1496850918, "post_id": 44413441, "comment_id": 75833787, "body": "Ok, well I&#39;m still a student trying to learn and figure this out (so, the rudeness isn&#39;t necessary). But, I&#39;ll try and make better use of the debugger in the future. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8117361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd07247510a882aeed376c96caf1520?s=128&d=identicon&r=PG&f=1", "display_name": "kazama", "link": "https://stackoverflow.com/users/8117361/kazama"}, "edited": false, "score": 0, "creation_date": 1496851090, "post_id": 44417206, "comment_id": 75833888, "body": "Thank you. I actually found a problem in the arguments of the render target. After fixing that, I fixed the S_OK line and it is working now. I misunderstood what the S_OK was doing. &quot; if (d2dFactHRes != S_OK) return false; &quot; would also be ok right?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "reply_to_user": {"reputation": 9, "user_id": 8117361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd07247510a882aeed376c96caf1520?s=128&d=identicon&r=PG&f=1", "display_name": "kazama", "link": "https://stackoverflow.com/users/8117361/kazama"}, "edited": false, "score": 0, "creation_date": 1496852677, "post_id": 44417206, "comment_id": 75834874, "body": "@kazama: In this particular case (if the documentation is accurate) that would be ok. However, there are 2^31 different success codes, and some COM implementations return success codes other than <code>S_OK</code>. Using the macros makes sure that you are dealing with all possible error/success codes (if that is required, as in this case)."}], "tags": [], "owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "is_accepted": true, "score": 1, "last_activity_date": 1496850046, "creation_date": 1496850046, "answer_id": 44417206, "question_id": 44413441, "link": "https://stackoverflow.com/questions/44413441/creating-d2d1-factory-and-hwnd-render-target/44417206#44417206", "title": "Creating D2D1 Factory and Hwnd Render Target", "body": "<p>The issue is that (presumably) your initialization code never runs to completion. It's the <code>if (!S_OK) return false;</code> statement that bails out early, right after creating the device factory. <code>S_OK</code> is defined as 0, <code>!0</code> is always true (as your compiler warned you, in vain).</p>\n\n<p>The net effect is, that <code>pRT</code> never gets a pointer assigned, and the first time you dereference it, the system pops up the access violation dialog.</p>\n\n<p>What you need to do instead is evaluate the return values (<code>HRESULT</code>'s). In COM programming it is common to use the <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms687197.aspx\" rel=\"nofollow noreferrer\">SUCCEEDED</a>, and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms693474.aspx\" rel=\"nofollow noreferrer\">FAILED</a> macros, e.g.:</p>\n\n<pre><code>if ( FAILED( d2dFactHRes ) )\n    return false;\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8117361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddd07247510a882aeed376c96caf1520?s=128&d=identicon&r=PG&f=1", "display_name": "kazama", "link": "https://stackoverflow.com/users/8117361/kazama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 44417206, "answer_count": 1, "score": -2, "last_activity_date": 1496850046, "creation_date": 1496840554, "last_edit_date": 1496848336, "question_id": 44413441, "link": "https://stackoverflow.com/questions/44413441/creating-d2d1-factory-and-hwnd-render-target", "title": "Creating D2D1 Factory and Hwnd Render Target", "body": "<p>I successfully created an empty window that would open and sit there until I closed it. Next, I wanted to try using Direct 2-D to draw something simple to that window. I created a class that would initialize Direct 2-D and then draw to the window, but after I added this class, my window would no longer open. After fiddling around with it a bit, it is now opening but then freezing and I get a message saying \"a problem occurred causing the program to misbehave,\" and a button to \"close program.\"</p>\n\n<p>The window went from not opening to opening and then giving me the error after I added the return false if not s_ok seen below</p>\n\n<pre><code>//creating factory\nHRESULT d2dFactHRes = D2D1CreateFactory(D2D1_FACTORY_TYPE_SINGLE_THREADED, &amp;Direct2DFactory);\n    if (!S_OK)\n        return false;\n\n    //creating render target.\n    HRESULT RenTargHRes = Direct2DFactory-&gt;CreateHwndRenderTarget(D2D1::RenderTargetProperties(D2D1_RENDER_TARGET_TYPE_DEFAULT, D2D1::PixelFormat(), 0.0F, 0.0F, D2D1_RENDER_TARGET_USAGE_NONE, D2D1_FEATURE_LEVEL_DEFAULT), D2D1_HWND_RENDER_TARGET_PROPERTIES(), &amp;pRT);\n    if (!S_OK)\n        return false;\n</code></pre>\n\n<p>I put a break point to try and check the return value of the EndDraw() function, and when I started the debugger, I got an error saying \"unhandled exception occured at 0x00E4264F, an access violation occurred while reading 0x00000000 from location 0xC0000005\"</p>\n\n<p>I think this error occurred in the BeginDraw function before it got to the break point.</p>\n\n<pre><code>void Graphics::BeginDraw()\n{\n    pRT-&gt;BeginDraw(); //pRT is pointer to render target.\n}\n</code></pre>\n\n<p>I have no idea what this means. I assume something wasn't in memory that it was trying to read?</p>\n\n<p>I'd appreciate any advice. Thanks.</p>\n"}, {"tags": ["c++", "templates", "rtti"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1496840156, "post_id": 44413229, "comment_id": 75825407, "body": "<i>&quot;How can I continue in this vein&quot;</i> - By making <code>doit</code> a function template. What you are really asking is a mixture of paradigms (compile template types vs. runtime dynamic types). That&#39;s not going to pan out well."}, {"owner": {"reputation": 10212, "user_id": 1277769, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/wEHKk.jpg?s=128&g=1", "display_name": "SirGuy", "link": "https://stackoverflow.com/users/1277769/sirguy"}, "edited": false, "score": 2, "creation_date": 1496840523, "post_id": 44413229, "comment_id": 75825704, "body": "It would probably be helpful to describe your overall goal, as somebody may have a different way to approach this that will work a lot better.  Also, you may consider looking into <a href=\"http://www.boost.org/doc/libs/1_64_0/doc/html/variant.html\" rel=\"nofollow noreferrer\">Boost.Variant</a>."}], "answers": [{"comments": [{"owner": {"reputation": 9560, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "edited": false, "score": 0, "creation_date": 1496873728, "post_id": 44423512, "comment_id": 75845698, "body": "Now that&#39;s thinking outside the box. Thanks. I&#39;m really hoping though for a solution that only modifies the <code>doit</code> function. It may be impossible."}], "tags": [], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": false, "score": 1, "last_activity_date": 1496872951, "creation_date": 1496872951, "answer_id": 44423512, "question_id": 44413229, "link": "https://stackoverflow.com/questions/44413229/obtaining-the-runtime-type-of-a-derived-template-instantiation/44423512#44423512", "title": "Obtaining the runtime type of a derived template instantiation", "body": "<p>Instead of hardcoding the list of derived classes in the <code>doit</code> function you could maintain some sort of registry of <code>foo</code> functions to call for each type. In the simplest form this could just be a <code>vector</code> of <code>std::function&lt;void(B&amp;)&gt;</code> and you just loop through and call each of them. Each <code>std::function</code> would be responsible for checking if the type matches:</p>\n\n<pre><code>auto&amp; doitRegistry(){\n  static std::vector&lt;std::function&lt;void(B&amp;)&gt;&gt; registry;\n  return registry;\n}\n\nvoid doit(B &amp;b) {\n  for (auto&amp; f : doitRegistry()) {\n    f(b);\n  }\n}  \n</code></pre>\n\n<p>If you wanted to be smarter the registry could be something like a <code>std::unordered_map&lt;std::type_index, std::function&lt;void(B&amp;)&gt;&gt;</code> so that you don't have to loop through the whole registry but as long as you don't have a huge number of derived classes it probably doesn't matter much.</p>\n\n<p>Then you just have to register each type of derived class in the registry. You can create a helper class that registers a function in the registry in its constructor:</p>\n\n<pre><code>struct DoItRegistration {\n  DoItRegistration(std::function&lt;void(B&amp;)&gt; foo) {\n     doitRegistry().push_back(std::move(foo));\n  }\n};\n</code></pre>\n\n<p>And create a static instance of this class per derived class:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct DT1 : B {\n  DT1() {\n        registerWithDoIt();\n  }\n  static DoItRegistration&amp; registerWithDoIt() {\n      static DoItRegistration registration([](B &amp;b){\n        if (dynamic_cast&lt;DT1&lt;T&gt;*&gt;(&amp;b)){\n         foo1();\n        }\n      }); \n      return registration;\n  }\n};\n</code></pre>\n\n<p>So that on first use of a derived class it registers itself with the <code>doit</code> registry and will be called when needed:</p>\n\n<pre><code>int main() {\n    DT1&lt;double&gt; d1;\n    DT1&lt;int&gt; d2;\n    DT2&lt;double&gt; d3;\n    DT1&lt;double&gt; dupeType;\n\n    doit(d3);  // calls foo2()\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/ybd4lMIRp7vzIuZR\" rel=\"nofollow noreferrer\">Live demo</a>.</p>\n"}], "owner": {"reputation": 9560, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1496872951, "creation_date": 1496839994, "question_id": 44413229, "link": "https://stackoverflow.com/questions/44413229/obtaining-the-runtime-type-of-a-derived-template-instantiation", "title": "Obtaining the runtime type of a derived template instantiation", "body": "<p>I can use say <code>typeid</code> or <code>dynamic_cast</code> to switch between derived base class instances. For example:</p>\n\n<pre><code>struct B { virtual ~B() {} };\n\nstruct D1 : B {};\nstruct D2 : B {};\n\nvoid doit(B &amp;b) {\n  if      (dynamic_cast&lt;D1 *&gt;(&amp;b)) foo1();\n  else if (dynamic_cast&lt;D2 *&gt;(&amp;b)) foo2();\n}\n</code></pre>\n\n<p>How can I continue in this vein when the derived type is a template instantiation? For example, how could I extend the <code>doit</code> function above to handle four cases; perhaps using the <code>DT1</code> and <code>DT2</code> classes below, instantiated with arbitrary types?</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct DT1 : B {};\n\ntemplate &lt;typename T&gt;\nstruct DT2 : B {};\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1496839664, "post_id": 44413050, "comment_id": 75824992, "body": "<i>&quot;the missing check if target is a nullptr in deleteVoidPointer&quot;</i>. deleting null pointer is valid as no-op."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1496840256, "post_id": 44413050, "comment_id": 75825476, "body": "What is the purpose of this unexpected construct ? The operator <code>delete</code> expects a <code>void*</code> so that it will undo your static cast, and though you will get different <code>deleter</code> addresses for different <code>T</code>, they are completely interchangeable. <code>deleteVoidPointer&lt;bool&gt;(p);</code> will work as well. You aren&#39;t storing any type information."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1496840407, "post_id": 44413050, "comment_id": 75825607, "body": "@YvesDaoust If I&#39;m not mistaken, this will not be the case when working with polymorphic classes where destructors must be called. Deleting through a void* there might lead to unexpected results."}, {"owner": {"reputation": 342, "user_id": 4861595, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/5ysxe.png?s=128&g=1", "display_name": "Mango", "link": "https://stackoverflow.com/users/4861595/mango"}, "edited": false, "score": 0, "creation_date": 1496840589, "post_id": 44413050, "comment_id": 75825759, "body": "I am storing the typeinfo in the deleter pointer. the idea is to have a non template pointer deleter which points to a template function which will delete the void* correctly. Yes, delete would free the void* (but I am not even sure of this) if you leave it as void*, the destructor on the other hand wouldn&#39;t be called if you delete a pointer of regular type void. so basically you can init the deleter with the right type and then you can safe delete the void pointer in another function where you wouldn&#39;t know the type anymore."}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1496841282, "post_id": 44413050, "comment_id": 75826329, "body": "@Mango: right, this will work as the correct destructor will be called. But it is your responsibility to keep track of the data type to invoke the correct <code>deleter</code>. Isn&#39;t it simpler/safer to keep typed pointers and cast them to void where required ? (or alias them)"}, {"owner": {"reputation": 342, "user_id": 4861595, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/5ysxe.png?s=128&g=1", "display_name": "Mango", "link": "https://stackoverflow.com/users/4861595/mango"}, "reply_to_user": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1496841791, "post_id": 44413050, "comment_id": 75826754, "body": "@YvesDaoust Not where I want to use this. I want to use this for some type ereasure attempts."}], "answers": [{"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": true, "score": 2, "last_activity_date": 1496839684, "creation_date": 1496839684, "answer_id": 44413103, "question_id": 44413050, "link": "https://stackoverflow.com/questions/44413050/legit-way-to-store-a-destructor-information-to-a-void/44413103#44413103", "title": "Legit way to store a destructor information to a void*", "body": "<p>Yes, the code you've shown is perfectly valid.</p>\n\n<p>And there's no missing check: calling <code>delete</code> on a null pointer is guaranteed to do nothing.</p>\n"}], "owner": {"reputation": 342, "user_id": 4861595, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/5ysxe.png?s=128&g=1", "display_name": "Mango", "link": "https://stackoverflow.com/users/4861595/mango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 0, "accepted_answer_id": 44413103, "answer_count": 1, "score": 1, "last_activity_date": 1496839684, "creation_date": 1496839567, "question_id": 44413050, "link": "https://stackoverflow.com/questions/44413050/legit-way-to-store-a-destructor-information-to-a-void", "title": "Legit way to store a destructor information to a void*", "body": "<p>Is it legit to store the delete information of a void pointer in a function pointer like this?</p>\n\n<pre><code>typedef void(*deleter)(void*);\ntemplate &lt;class T&gt; void deleteVoidPointer(void* target)\n{\n    delete static_cast&lt;T*&gt;(target);\n}\n\nint main()\n{\n    void* p = new int;\n    deleter del = deleteVoidPointer&lt;int&gt;;\n\n    del(p);\n    return 0;\n}\n</code></pre>\n\n<p>Are there any side effects I am missing here or is this a legit way to keep track of destructor information for a pointer? (Besides the missing check if target is a nullptr in deleteVoidPointer)</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1496839676, "post_id": 44413032, "comment_id": 75825003, "body": "Being called a <a href=\"http://wiki.c2.com/?ThreeStarProgrammer\" rel=\"nofollow noreferrer\">three-star programmer</a> is usually <i>not</i> a compliment, quite the opposite. First of all, do you <i>really</i> need it? What problem is it supposed to solve (<a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">related reading about the XY problem</a>)? And why aren&#39;t you using <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> instead?"}, {"owner": {"reputation": 1194, "user_id": 4782513, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2834b0654459b57ca36c59d90e1848?s=128&d=identicon&r=PG&f=1", "display_name": "newkid", "link": "https://stackoverflow.com/users/4782513/newkid"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1496839998, "post_id": 44413032, "comment_id": 75825281, "body": "@Someprogrammerdude, The code wasn&#39;t copied correctly. it is <code>x[i][j] = ...</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1496840079, "post_id": 44413032, "comment_id": 75825349, "body": "Then you need to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> and show us. How do you use the class? Do you pass instances of it around by value? Return instances of it by value? Do you follow <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">the rules of three or five</a> (if you use vectors you could have followed <a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three#Rule_of_zero\" rel=\"nofollow noreferrer\">the rule of zero</a> instead)?"}, {"owner": {"reputation": 310, "user_id": 2962431, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000339190603/picture?type=large", "display_name": "thomas", "link": "https://stackoverflow.com/users/2962431/thomas"}, "edited": false, "score": 0, "creation_date": 1496840520, "post_id": 44413032, "comment_id": 75825702, "body": "How big are a, b and c? You may run out of memory!"}, {"owner": {"reputation": 1194, "user_id": 4782513, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2834b0654459b57ca36c59d90e1848?s=128&d=identicon&r=PG&f=1", "display_name": "newkid", "link": "https://stackoverflow.com/users/4782513/newkid"}, "edited": false, "score": 0, "creation_date": 1496840754, "post_id": 44413032, "comment_id": 75825893, "body": "a=100, b=100, c=10."}], "answers": [{"comments": [{"owner": {"reputation": 1194, "user_id": 4782513, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2834b0654459b57ca36c59d90e1848?s=128&d=identicon&r=PG&f=1", "display_name": "newkid", "link": "https://stackoverflow.com/users/4782513/newkid"}, "edited": false, "score": 0, "creation_date": 1496841509, "post_id": 44413333, "comment_id": 75826515, "body": "is there a way I can initialise x within the body of the constructor? This would also allow me to manipulate a, b, c based on a formula."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1194, "user_id": 4782513, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2834b0654459b57ca36c59d90e1848?s=128&d=identicon&r=PG&f=1", "display_name": "newkid", "link": "https://stackoverflow.com/users/4782513/newkid"}, "edited": false, "score": 0, "creation_date": 1496842334, "post_id": 44413333, "comment_id": 75827156, "body": "Alternately, call <code>A::A</code> with the fiddled parameters in the first place"}, {"owner": {"reputation": 1194, "user_id": 4782513, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2834b0654459b57ca36c59d90e1848?s=128&d=identicon&r=PG&f=1", "display_name": "newkid", "link": "https://stackoverflow.com/users/4782513/newkid"}, "edited": false, "score": 0, "creation_date": 1496844686, "post_id": 44413333, "comment_id": 75829033, "body": "A::A(int a, int b, int c) : x(a, {b, {c, 0.}}) {} Raises the error <code>Non-constant-expression cannot be narrowed from type &#39;int&#39; to &#39;size_type&#39; (aka &#39;unsigned long&#39;) in initializer list</code>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 1194, "user_id": 4782513, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2834b0654459b57ca36c59d90e1848?s=128&d=identicon&r=PG&f=1", "display_name": "newkid", "link": "https://stackoverflow.com/users/4782513/newkid"}, "edited": false, "score": 1, "creation_date": 1496845815, "post_id": 44413333, "comment_id": 75829979, "body": "Hmm, probably worth changing <code>a</code>, <code>b</code>, <code>c</code> to <code>std::size_t</code>, and avoiding braced initialization"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 4, "last_activity_date": 1496845790, "last_edit_date": 1496845790, "creation_date": 1496840220, "answer_id": 44413333, "question_id": 44413032, "link": "https://stackoverflow.com/questions/44413032/dynamic-initialisation-of-3d-array-c/44413333#44413333", "title": "Dynamic initialisation of 3D array c++", "body": "<p>Don't use owning raw pointers</p>\n\n<pre><code>class A {\npublic:\n    A(std::size_t a, std::size_t b, std::size_t c);\n\nprivate:\n    std::vector&lt;std::vector&lt;std::vector&lt;double&gt;&gt;&gt; x;\n}\n\nA::A(std::size_t a, std::size_t b, std::size_t c) \n  : x(a, std::vector&lt;std::vector&lt;double&gt;&gt;(b, std::vector&lt;double&gt;(c, 0.))) {}\n</code></pre>\n\n<p>If you want to fiddle with <code>a</code>, <code>b</code> and <code>c</code> first, write a method to do that. </p>\n\n<pre><code>class A {\npublic:\n    A(std::size_t a, std::size_t b, std::size_t c);\n\nprivate:\n    std::vector&lt;std::vector&lt;std::vector&lt;double&gt;&gt;&gt; x;\n    std::vector&lt;std::vector&lt;std::vector&lt;double&gt;&gt;&gt; fiddle_input(std::size_t a, std::size_t b, std::size_t c);\n}\n\nA::A(std::size_t a, std::size_t b, std::size_t c) : x(fiddle_input(a, b, c)) {}\n\nstd::vector&lt;std::vector&lt;std::vector&lt;double&gt;&gt;&gt; A::fiddle_input(std::size_t a, std::size_t b, std::size_t c) { \n    /*Some implementation*/ \n    return {new_a, {new_b, {new_c, 0.}}}; \n}\n</code></pre>\n\n<p>The compiler is allowed (and post c++17 <strong>required</strong>) to only construct one 3d vector with this return by value.</p>\n"}], "owner": {"reputation": 1194, "user_id": 4782513, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ca2834b0654459b57ca36c59d90e1848?s=128&d=identicon&r=PG&f=1", "display_name": "newkid", "link": "https://stackoverflow.com/users/4782513/newkid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 44413333, "answer_count": 1, "score": 0, "last_activity_date": 1496845790, "creation_date": 1496839513, "last_edit_date": 1496840905, "question_id": 44413032, "link": "https://stackoverflow.com/questions/44413032/dynamic-initialisation-of-3d-array-c", "title": "Dynamic initialisation of 3D array c++", "body": "<p>I have a 3-dimensional space X-Y-Z discretised into cells. Each cell has a certain density value associated with it. I want to be able to store the density values in a 3-D array so that I can recall them by index i.e. </p>\n\n<p><code>density_ijk = x[i][j][k];</code></p>\n\n<p>I have the following class definition:</p>\n\n<pre><code>class A {\npublic:\n    A(int a, int b, int c);\n\nprivate:\n    double ***x;\n}\n\nA::A(int a, int b, int c){\n   x = new double**[a];\n   for(int i=0;i&lt;a;i++){\n        x[i] = new double*[b];\n        for(int j=0;j&lt;b;j++){\n            x[i][j] = new double[c];\n        }\n    } \n}\n</code></pre>\n\n<p>It builds successfully, however at runtime <code>EXC_BAD_ACCESS(code=1, address=0x0)</code> is generated.</p>\n\n<p>Is there a dangling pointer somewhere in my code? What could I be doing wrong?</p>\n\n<p>My main is:</p>\n\n<pre><code>int main(int argc, const char * argv[]) {\n\n    int numX=100, numY=100, numZ=10;\n\n    A testImplementation(numX, numY, numZ);\n\n    return 0;\n}\n</code></pre>\n\n<p>Source 1: <a href=\"https://www.codeproject.com/Articles/83080/Dynamic-Three-Dimensional-Arrays-in-C-C-C-Java\" rel=\"nofollow noreferrer\">https://www.codeproject.com/Articles/83080/Dynamic-Three-Dimensional-Arrays-in-C-C-C-Java</a>\nSource 2: <a href=\"http://www.cplusplus.com/forum/general/24347/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/forum/general/24347/</a></p>\n\n<p>Thanks!</p>\n"}]