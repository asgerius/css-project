[{"tags": ["c++", "mathematical-optimization", "linear-programming", "cplex", "ilog"], "comments": [{"owner": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "edited": false, "score": 1, "creation_date": 1495198861, "post_id": 44036440, "comment_id": 75165497, "body": "This looks like a column generation master coming from some sort of vehicle routing applications. These masters are highly degenerate, so David&#39;s answer below is spot on. I would suggest that you use Simplex, because as you add new columns you will not need to reoptimize from scratch (which is true for barrier). For such models, I had some good results trying the <a href=\"https://www.ibm.com/support/knowledgecenter/SS9UKU_12.6.1/com.ibm.cplex.zos.help/CPLEX/UsrMan/topics/cont_optim/simplex/10_sifting.html\" rel=\"nofollow noreferrer\">sifting</a> optimizer in the past."}, {"owner": {"reputation": 55, "user_id": 7057821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WlJpV0HM0EU/AAAAAAAAAAI/AAAAAAAAAFo/t__rL8oWuuQ/photo.jpg?sz=128", "display_name": "math2014", "link": "https://stackoverflow.com/users/7057821/math2014"}, "reply_to_user": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "edited": false, "score": 0, "creation_date": 1495364680, "post_id": 44036440, "comment_id": 75212999, "body": "@ Ioannis : Thanks for helpfull comment, what do you mean by using simplex?!"}, {"owner": {"reputation": 4913, "user_id": 2280567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LA8CO.jpg?s=128&g=1", "display_name": "Ioannis", "link": "https://stackoverflow.com/users/2280567/ioannis"}, "edited": false, "score": 0, "creation_date": 1495440982, "post_id": 44036440, "comment_id": 75235290, "body": "Simplex is the default algorithm for Linear Programming that CPLEX uses. There are variants such as dual Simplex, primal Simplex and network Simplex, which hinge on the same principle but take advantage of the primal, dual or network structure respectively. <a href=\"http://www-01.ibm.com/support/docview.wss?uid=swg21399934\" rel=\"nofollow noreferrer\">CPLEX uses by default the dual Simplex method</a> but that can be changed."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7057821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WlJpV0HM0EU/AAAAAAAAAAI/AAAAAAAAAFo/t__rL8oWuuQ/photo.jpg?sz=128", "display_name": "math2014", "link": "https://stackoverflow.com/users/7057821/math2014"}, "edited": false, "score": 0, "creation_date": 1495369497, "post_id": 44037376, "comment_id": 75214335, "body": "Thanks, yes it can be true, but another problem that I have is that some times some routes with zero value  in the model ,their reduced cost is positive when calculating!"}], "tags": [], "owner": {"reputation": 20637, "user_id": 14167, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HYgOI.jpg?s=128&g=1", "display_name": "David Nehme", "link": "https://stackoverflow.com/users/14167/david-nehme"}, "is_accepted": true, "score": 1, "last_activity_date": 1495072782, "creation_date": 1495072782, "answer_id": 44037376, "question_id": 44036440, "link": "https://stackoverflow.com/questions/44036440/cplex-concert-technology-duals/44037376#44037376", "title": "Cplex Concert technology duals", "body": "<p>You likely have multiple optimal dual solutions:  solutions that are all feasible and have the same objective value equal to the optimal objective value.  This can happen with or without equally constraints, and even if there is a unique optimal primal solution.</p>\n"}], "owner": {"reputation": 55, "user_id": 7057821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WlJpV0HM0EU/AAAAAAAAAAI/AAAAAAAAAFo/t__rL8oWuuQ/photo.jpg?sz=128", "display_name": "math2014", "link": "https://stackoverflow.com/users/7057821/math2014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 44037376, "answer_count": 1, "score": 0, "last_activity_date": 1495511547, "creation_date": 1495064927, "last_edit_date": 1495511547, "question_id": 44036440, "link": "https://stackoverflow.com/questions/44036440/cplex-concert-technology-duals", "title": "Cplex Concert technology duals", "body": "<p>I tried to get the duals of constraints</p>\n\n<p>This is the code, implemented in C++:</p>\n\n<pre><code>    IloEnv env;\n    IloModel MasterProblem(env);\n\n    IloNumVarArray XX(env,Create_routes.size(),0,IloInfinity,ILOFLOAT);\n    IloNumVarArray t(env,m,0,IloInfinity,ILOFLOAT);\n    IloExpr expr(env);  \n\n    ////defining ojective of problem\n\n    IloObjective masterObj(env,expr,IloObjective::Maximize);\n    expr.end();\n    MasterProblem.add(masterObj);\n\n    IloRangeArray const1(env);  //hala yeki yeki mahdudiyatha ro misazim    \n\n    for (int i=0; i&lt;n; i++){\n        IloExpr expr(env);\n        for (int j=0; j&lt;Create_routes.size(); j++){\n            if (Create_routes[j]-&gt;internalnodes[i+m]==1)\n                expr+=XX[j];\n        }\n        const1.add(1==expr);\n        MasterProblem.add(const1[i]);\n        expr.end();\n    }\n    IloRangeArray const2(env);      \n    IloRangeArray const4(env);//mahdudiate depohaye open shode\n\n\n    for (i=0; i&lt;m; i++){\n        IloExpr expr(env);\n        for (int j=0; j&lt;Create_routes.size(); j++){\n            if (Create_routes[j]-&gt;depot==i){\n                expr+=XX[j]*Create_routes[j]-&gt;demand_collected;\n            }\n        }\n\n        expr-=t[i]*g[i]-&gt;QF;\n        const2.add(0&gt;=expr);\n        MasterProblem.add(const2[i]);\n        expr.end();\n    }\n\n    IloRangeArray2 const3(env,m);\n\n    for (i=0; i&lt;m; i++){\n        const3[i]=IloRangeArray(env);\n    }\n\n    for (int f=0; f&lt;m; f++){\n        for (i=0; i&lt;n; i++){\n            IloExpr expr(env);\n            for (int j=0; j&lt;Create_routes.size(); j++){\n                if ((Create_routes[j]-&gt;depot==f)&amp;&amp;(Create_routes[j]-&gt;internalnodes[i+m]==1)){\n                    expr+=XX[j];\n                }\n            }\n            expr-=t[f];\n            const3[f].add(0&gt;=expr); \n            MasterProblem.add(const3[f][i]);\n            expr.end();\n        }       \n    }\n\n    IloCplex cplexM(MasterProblem);\n    cplexM.setParam(IloCplex::RootAlg, IloCplex::Barrier);\n    cplexM.setParam(IloCplex::Threads, 4);\n\n    if ( !cplexM.solve() ){\n        env.error() &lt;&lt; \"Failed to optimize LP.\" &lt;&lt; endl;\n        nodee-&gt;uperbound=0;\n        env.end();\n        return;\n    }\n    else{\n        if (!cplexM.isPrimalFeasible()){//agar infeasible bud bia birun\n        nodee-&gt;uperbound=0;\n        return;\n        }\n        cout&lt;&lt;\"MasterProblem Solved\"&lt;&lt;endl;\n        cout&lt;&lt;\"objective=\"&lt;&lt;cplexM.getObjValue()&lt;&lt;endl;\n        javab=cplexM.getObjValue();\n    }\n\n    IloNumArray duall(env,n);\n    IloNumArray duall1(env,m);\n\n    cplexM.getDuals(duall,const1);\n    cplexM.getDuals(duall1,const2);\n\n    IloNumArray2 duall2(env,m);\n    for (i=0; i&lt;m; i++){\n        duall2[i]=IloNumArray(env,n);\n        for (j=0;j&lt;n;j++){\n            duall2[i][j]=cplexM.getDual(const3[i][j]);\n        }\n    }\n</code></pre>\n\n<p>when solving this LP problem by different methods of cplex like Barrier, Primal, Dual, Network I got completely different Dual values and different solutions at the end. why this is like this?\nIs it because I have equality constraints in my problem?\nhow can I be sure that true values are passing through cplex?</p>\n\n<p>any help is really appreciated.</p>\n"}, {"tags": ["c++", "qt", "opengl"], "answers": [{"comments": [{"owner": {"reputation": 3822, "user_id": 1472381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e448864dbd463a40da615ba445c6b75?s=128&d=identicon&r=PG", "display_name": "volzotan", "link": "https://stackoverflow.com/users/1472381/volzotan"}, "edited": false, "score": 0, "creation_date": 1495740595, "post_id": 44058255, "comment_id": 75390615, "body": "P.S.: I still can&#39;t get a debug context - but that seems to be related to the fact that they use ANGLE on Windows, or on my GPU / Driver... at least, I cannot get a 4.0 (or higher) OpenGL context :-/ This is especially sad since <code>GL_KHR_debug</code> <i>is</i> supported on my system"}], "tags": [], "owner": {"reputation": 138, "user_id": 4655897, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95789ebc70c62c21c08ff5fd21982beb?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Kulaga", "link": "https://stackoverflow.com/users/4655897/tom-kulaga"}, "is_accepted": true, "score": 1, "last_activity_date": 1495143882, "creation_date": 1495143882, "answer_id": 44058255, "question_id": 44036378, "link": "https://stackoverflow.com/questions/44036378/setting-qsurfaceformat-has-no-effect/44058255#44058255", "title": "Setting QSurfaceFormat has no effect", "body": "<p>Try setting a OpenGL version greater then 4.1 as I think that's when the debug was made core. The default constructed QSurfaceFormat requests GL 2.0 which doesn't support debug. See what you get then.</p>\n\n<p>Also try initialising the logger and see what it spits back at you</p>\n"}], "owner": {"reputation": 3822, "user_id": 1472381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e448864dbd463a40da615ba445c6b75?s=128&d=identicon&r=PG", "display_name": "volzotan", "link": "https://stackoverflow.com/users/1472381/volzotan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1525, "favorite_count": 0, "accepted_answer_id": 44058255, "answer_count": 1, "score": 2, "last_activity_date": 1495143882, "creation_date": 1495064478, "question_id": 44036378, "link": "https://stackoverflow.com/questions/44036378/setting-qsurfaceformat-has-no-effect", "title": "Setting QSurfaceFormat has no effect", "body": "<p>I am currently having issues with getting a debug context with Qt 5.8 on Windows.</p>\n\n<p>I am using Qt 5.8 to write a small OpenGL application, using a viewer class declared like this</p>\n\n<pre><code>class GLViewer3DModel : public QOpenGLWidget, protected QOpenGLFunctions\n{\n    //...\n};\n</code></pre>\n\n<p>My <code>main.cpp</code>file uses this code, before QApplication is initialized:</p>\n\n<pre><code> QSurfaceFormat format;     \n format.setOption(QSurfaceFormat::DebugContext);\n format.setProfile(QSurfaceFormat::CoreProfile);\n QSurfaceFormat::setDefaultFormat(format);\n</code></pre>\n\n<p>In the 3D viewer's constructor, the <code>QSurfaceFormat::DebugContext</code> option seems to be properly set. However, if I test this again within my <code>initializeGL</code> override, the following code</p>\n\n<pre><code>void GLViewer3DModel::initializeGL()\n{\n    initializeOpenGLFunctions();\n\n    QSurfaceFormat fmt = format();\n    bool hasDebug = fmt.testOption(QSurfaceFormat::DebugContext);    \n    std::cout &lt;&lt; \"STILL DEBUG? \" &lt;&lt; hasDebug &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>prints \"STILL DEBUG? 0\", so for some reason the format has changed.\nCan I do anything to make the debug context work? I would love to use <code>QOpenGLDebugLogger</code> to see where something might go wrong.</p>\n\n<p>FWIW, the <code>GL_KHR_debug</code> extension is supported on my system.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1266, "user_id": 6227485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d768a412cc63798930379abe334a6c01?s=128&d=identicon&r=PG&f=1", "display_name": "dbandstra", "link": "https://stackoverflow.com/users/6227485/dbandstra"}, "edited": false, "score": 0, "creation_date": 1495064868, "post_id": 44036353, "comment_id": 75099488, "body": "It&#39;s uglier, that&#39;s for sure. You should keep the separation of concerns that you had going in the first place. Also, static variables (<code>Mapping</code> in your last example) are essentially globals. I&#39;m sure there are enough Q&amp;As on this site explaining the evil of those so I shouldn&#39;t have to repeat it."}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 0, "creation_date": 1495065286, "post_id": 44036353, "comment_id": 75099607, "body": "Here readability and maitenance are much more important than performance."}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "reply_to_user": {"reputation": 1266, "user_id": 6227485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d768a412cc63798930379abe334a6c01?s=128&d=identicon&r=PG&f=1", "display_name": "dbandstra", "link": "https://stackoverflow.com/users/6227485/dbandstra"}, "edited": false, "score": 1, "creation_date": 1495065903, "post_id": 44036353, "comment_id": 75099780, "body": "To expand on what @dbandstra mentioned: Static members are essentially global variables contained within the class&#39; scope.  They can be accessed from anywhere, but anything can do things it shouldn&#39;t be able to with them, and it can be hard to keep track of what reads &amp; what writes.  They can share data between threads, but aren&#39;t threadsafe.  And so on.  There&#39;ll likely be a slight performance benefit to using statics (no dereferencing pointers/references), but it&#39;s minimal enough to be insignificant (except possibly on embedded systems with limited memory)."}, {"owner": {"reputation": 15544, "user_id": 1908347, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/e1305fee562b70958e65b557ce049e31?s=128&d=identicon&r=PG", "display_name": "Nir Friedman", "link": "https://stackoverflow.com/users/1908347/nir-friedman"}, "edited": false, "score": 2, "creation_date": 1495067523, "post_id": 44036353, "comment_id": 75100163, "body": "non trivial statics can cause huge headaches with double destruction with Linux linkers."}], "answers": [{"tags": [], "owner": {"reputation": 52186, "user_id": 1553090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Wj4s1.png?s=128&g=1", "display_name": "paddy", "link": "https://stackoverflow.com/users/1553090/paddy"}, "is_accepted": true, "score": 4, "last_activity_date": 1495065435, "last_edit_date": 1495542396, "creation_date": 1495065114, "answer_id": 44036471, "question_id": 44036353, "link": "https://stackoverflow.com/questions/44036353/does-performance-suffer-if-we-mix-static-data-to-an-instanced-class/44036471#44036471", "title": "Does performance suffer if we mix static data to an instanced class?", "body": "<p>You're not going to see performance problems related to the use of static.</p>\n\n<p>Performance considerations will be affected more by your choice of container (<em>e.g.</em> <code>std::map</code> or <code>std::unordered_map</code>), the way you pass your parameters, and how you use (or avoid) dynamic memory management.</p>\n\n<p>Other things you may want to consider are:</p>\n\n<ul>\n<li>Protect your manager from multi-threaded access, and performance issues related to that;</li>\n<li>Define what your program's behavior is if you construct a class with a duplicate name;</li>\n<li>Correctly follow the <a href=\"https://stackoverflow.com/q/4172722/1553090\">Rule of Three (or Five)</a>;</li>\n<li>Avoid the <a href=\"https://stackoverflow.com/a/335746/1553090\">Static Initialization Order Fiasco</a>, regarding your static member in <code>MyClass</code>;</li>\n<li>Make <code>MyClassMgmt</code> follow a proper singleton pattern if it is indeed a singleton;</li>\n<li>Pass arguments by <em>const-reference</em> if you don't want to modify or copy them;</li>\n<li>Use <em>move-semantics</em> when appropriate, if you have identified copies as a bottleneck;</li>\n<li>Use <em>memory pools</em>, if you have identified allocations as a bottleneck;</li>\n<li>Actually profile your code before engaging in premature optimization.</li>\n</ul>\n"}], "owner": {"reputation": 8251, "user_id": 514149, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/eATtl.png?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/514149/matthias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 44036471, "answer_count": 1, "score": 1, "last_activity_date": 1495065435, "creation_date": 1495064264, "question_id": 44036353, "link": "https://stackoverflow.com/questions/44036353/does-performance-suffer-if-we-mix-static-data-to-an-instanced-class", "title": "Does performance suffer if we mix static data to an instanced class?", "body": "<p>Let's say I have a simple C++ class that is used to store some data:</p>\n\n<pre><code>class MyClass\n{\n    std::string Name;\n    int Data = 0;\n\n    MyClass(std::string n, int d) : Name(n), Data(d)\n    { }\n};\n</code></pre>\n\n<p>Now I would like to have some kind of management class, which stores a mapping of instances to <code>MyClass</code>. I want to use that second class to access these instances later at runtime.</p>\n\n<pre><code>class MyClassMgmt\n{\n    std::map&lt;std::string, MyClass*&gt; Mapping;\n\n    MyClassMgmt()\n    { }\n\n    void AddMyClass(MyClass* MyCls)\n    {\n        Mapping[MyCls-&gt;Name] = MyCls;\n    }\n\n    MyClass* GetMyClass(const std::string&amp; Name) const\n    {\n        return Mapping.at(Name);\n    }\n};\n</code></pre>\n\n<p>My question is: If I would instead use <code>MyClass</code> directly with the help of static members to implement this management functionality, does that have a negative impact on overall performance then? Or are there any other drawbacks with this approach?</p>\n\n<p>Something like this:</p>\n\n<pre><code>class MyClass\n{\n    std::string Name;\n    int Data = 0;\n\n    static std::map&lt;std::string, MyClass*&gt; Mapping;\n\n    MyClass(std::string n, int d) : Name(n), Data(d)\n    { }\n\n    static void AddMyClass(MyClass* MyCls)\n    {\n        Mapping[MyCls-&gt;Name] = MyCls;\n    }\n\n    static MyClass* GetMyClass(const std::string&amp; Name) const\n    {\n        return Mapping.at(Name);\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "string", "visual-studio"], "comments": [{"owner": {"reputation": 846, "user_id": 1137102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/HOdwV.png?s=128&g=1", "display_name": "RoiHatam", "link": "https://stackoverflow.com/users/1137102/roihatam"}, "edited": false, "score": 0, "creation_date": 1495062738, "post_id": 44036142, "comment_id": 75098949, "body": "what is <code>1.0f</code> ?"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 846, "user_id": 1137102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/HOdwV.png?s=128&g=1", "display_name": "RoiHatam", "link": "https://stackoverflow.com/users/1137102/roihatam"}, "edited": false, "score": 1, "creation_date": 1495062768, "post_id": 44036142, "comment_id": 75098955, "body": "@RoiHatam that&#39;s how you write floats"}, {"owner": {"reputation": 13, "user_id": 8028095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca8bc324189b27832dc4ce4715ba4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fk-ken-white", "link": "https://stackoverflow.com/users/8028095/fk-ken-white"}, "edited": false, "score": 0, "creation_date": 1495063382, "post_id": 44036142, "comment_id": 75099129, "body": "This is my foolish mistake. I forgot to use <code>std::to_string</code> for numbers."}, {"owner": {"reputation": 42447, "user_id": 1016716, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1c83d772b1c065603c7f20975d8d3552?s=128&d=identicon&r=PG", "display_name": "Mr Lister", "link": "https://stackoverflow.com/users/1016716/mr-lister"}, "edited": false, "score": 0, "creation_date": 1495107636, "post_id": 44036142, "comment_id": 75118734, "body": "The compiler probably tried multiple automatic conversions that would result in a sane outcome, and this one was the last one it tried before giving up. Had you written <code>b += 1 + &quot; &quot;;</code> then it would have found one and not given you an error."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8028095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca8bc324189b27832dc4ce4715ba4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fk-ken-white", "link": "https://stackoverflow.com/users/8028095/fk-ken-white"}, "edited": false, "score": 0, "creation_date": 1495063484, "post_id": 44036236, "comment_id": 75099152, "body": "Thanks a lot Pavel. I am wondering why C++ is strict on not to define such an operator."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 13, "user_id": 8028095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca8bc324189b27832dc4ce4715ba4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fk-ken-white", "link": "https://stackoverflow.com/users/8028095/fk-ken-white"}, "edited": false, "score": 0, "creation_date": 1495063642, "post_id": 44036236, "comment_id": 75099194, "body": "Because it&#39;s a bit awkward in c++ and not clear what float + string should do. You should do this instead: <code>std::to_string(1.0f) + a</code>"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 13, "user_id": 8028095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca8bc324189b27832dc4ce4715ba4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fk-ken-white", "link": "https://stackoverflow.com/users/8028095/fk-ken-white"}, "edited": false, "score": 0, "creation_date": 1495072538, "post_id": 44036236, "comment_id": 75101254, "body": "@fk-ken-white I would assume C++ doesn&#39;t define it because of what happens in languages like JavaScript, where it <i>is</i> permitted to &quot;add&quot; strings and numbers.  What does <code>&quot;10&quot; + 2</code> equal?  <code>&quot;102&quot;</code> or <code>12</code>? Of course if you know the rules you can figure it out, but it&#39;s better to be explicit so that the person reading your C++ code doesn&#39;t have to guess what you <i>meant.</i>  That&#39;s where developers lose the most time -- trying to figure out what the author meant to do. Leaving out these operators forces you to be explicit about your intent."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1495072783, "post_id": 44036236, "comment_id": 75101310, "body": "@cdhowie exactly."}], "tags": [], "owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1495063556, "last_edit_date": 1495063556, "creation_date": 1495063390, "answer_id": 44036236, "question_id": 44036142, "link": "https://stackoverflow.com/questions/44036142/could-not-deduce-template-argument-for-const-stdreverse-iterator-ranit-f/44036236#44036236", "title": "could not deduce template argument for &#39;const std::reverse_iterator&lt;_RanIt&gt; &amp;&#39; from &#39;std::string&#39;", "body": "<p>Indeed, that's an expected error message from Microsoft compiler.</p>\n\n<p>The reason it happens is because you included <code>&lt;string&gt;</code> header which defines a few <code>operator+</code> templates for different iterators:</p>\n\n<pre><code>        // reverse_iterator TEMPLATE OPERATORS\ntemplate&lt;class _RanIt&gt; inline\n    reverse_iterator&lt;_RanIt&gt; operator+(\n        typename reverse_iterator&lt;_RanIt&gt;::difference_type _Off,\n        const reverse_iterator&lt;_RanIt&gt;&amp; _Right)\n    {   // return reverse_iterator + integer\n    return (_Right + _Off);\n    }\n</code></pre>\n\n<p>Since there is no <code>operator+</code> exists for adding floats and <code>std::string</code> your code won't compile. But during compilation compiler detected that above mentioned <code>std::operator+</code> might be possible candidate since your float can be converted to <code>reverse_iterator&lt;_RanIt&gt;::difference_type</code>. When it tried this <code>operator+</code> it wasn't able to deduce what type it should use in place of <code>_RanIt</code> to convert <code>std::string</code> to <code>const reverse_iterator&lt;_RanIt&gt;&amp;</code> it work out.</p>\n\n<p>As you noted, compiler then tries to match other versions of <code>operator+</code> for other iterator types:</p>\n\n<blockquote>\n  <p>error C2784: 'std::_Array_const_iterator&lt;_Ty,_Size> std::operator\n  +(_Array_const_iterator&lt;_Ty,_Size>::difference_type,std::_Array_const_iterator&lt;_Ty,_Size>)':\n  could not deduce template argument for\n  'std::_Array_const_iterator&lt;_Ty,_Size>' from 'std::string'</p>\n  \n  <p>error C2784: 'std::_Array_iterator&lt;_Ty,_Size> std::operator\n  +(_Array_iterator&lt;_Ty,_Size>::difference_type,std::_Array_iterator&lt;_Ty,_Size>)':\n  could not deduce template argument for\n  'std::_Array_iterator&lt;_Ty,_Size>' from 'std::string' ...</p>\n</blockquote>\n\n<p>As a side note, in C++ you should first convert numbers to strings and then concatenate (e.g. add) them. This should work for you:</p>\n\n<pre><code>b += std::to_string(1.0f) + a;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8028095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca8bc324189b27832dc4ce4715ba4c5?s=128&d=identicon&r=PG&f=1", "display_name": "fk-ken-white", "link": "https://stackoverflow.com/users/8028095/fk-ken-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 896, "favorite_count": 1, "closed_date": 1495109213, "accepted_answer_id": 44036236, "answer_count": 1, "score": 1, "last_activity_date": 1495063556, "creation_date": 1495062578, "question_id": 44036142, "link": "https://stackoverflow.com/questions/44036142/could-not-deduce-template-argument-for-const-stdreverse-iterator-ranit-f", "closed_reason": "Not suitable for this site", "title": "could not deduce template argument for &#39;const std::reverse_iterator&lt;_RanIt&gt; &amp;&#39; from &#39;std::string&#39;", "body": "<p>When I write such a code in visual studio:</p>\n\n<pre><code>void aaa()\n{\n    std::string a = \" \";\n    std::string b = \"\";\n    b += 1.0f + a;\n}\n</code></pre>\n\n<p>Why do I receive such an error? Where does <code>std::reverse_iterator</code> come from?</p>\n\n<blockquote>\n  <p>error C2784: 'std::reverse_iterator&lt;_RanIt> std::operator +(reverse_iterator&lt;_RanIt>::difference_type,const std::reverse_iterator&lt;_RanIt> &amp;)': could not deduce template argument for 'const std::reverse_iterator&lt;_RanIt> &amp;' from 'std::string'</p>\n</blockquote>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1495062265, "post_id": 44036076, "comment_id": 75098812, "body": "&quot;POD&quot; isn&#39;t really a thing in C++ anymore."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 3, "creation_date": 1495064366, "post_id": 44036076, "comment_id": 75099380, "body": "<code>C</code> is a C++17 aggregate."}, {"owner": {"reputation": 672, "user_id": 1442880, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2a97fcba555c029723d7c353345a974?s=128&d=identicon&r=PG", "display_name": "Kobi", "link": "https://stackoverflow.com/users/1442880/kobi"}, "edited": false, "score": 0, "creation_date": 1495064559, "post_id": 44036076, "comment_id": 75099413, "body": "Thanks! I was unaware of this new C++17."}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1495071806, "post_id": 44036076, "comment_id": 75101093, "body": "@Kerrek SB not true,  std::is_pod&lt;C&gt;() is still at play. But pod  assumes many things,  to be trivial at first.. that&#39;s not a trivial class."}], "answers": [{"comments": [{"owner": {"reputation": 672, "user_id": 1442880, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2a97fcba555c029723d7c353345a974?s=128&d=identicon&r=PG", "display_name": "Kobi", "link": "https://stackoverflow.com/users/1442880/kobi"}, "edited": false, "score": 0, "creation_date": 1495120985, "post_id": 44036790, "comment_id": 75129052, "body": "thanks. If I&#39;d have a member in C, say int i; this whole thing would break, right? there is no way I can initialize B... and also C&#39;s int i; member. Is my understanding correct?"}, {"owner": {"reputation": 1278, "user_id": 166389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a26ca7932c9550b26ff5bcaae562d2f?s=128&d=identicon&r=PG", "display_name": "TBBle", "link": "https://stackoverflow.com/users/166389/tbble"}, "edited": false, "score": 0, "creation_date": 1495125421, "post_id": 44036790, "comment_id": 75131804, "body": "I think that&#39;d be, e.g., <code>C c { []{}, [](int){}, 1 };</code>. You initialise aggregate members after the bases in the initialiser. See &quot;Scope&quot; in <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0017r1.html\" rel=\"nofollow noreferrer\">P0017r1</a>"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 7, "last_activity_date": 1495067645, "creation_date": 1495067645, "answer_id": 44036790, "question_id": 44036076, "link": "https://stackoverflow.com/questions/44036076/variadic-class-template-and-inheritance-default-compiler-generated-constructor/44036790#44036790", "title": "Variadic class template and inheritance - default compiler generated constructor", "body": "<p>There are no constructors at play here. This code works due to a confluence of three features new in C++17:</p>\n\n<ol>\n<li>Template parameter deduction for constructors (<a href=\"http://wg21.link/p0091\" rel=\"noreferrer\">P0091</a>).</li>\n<li>Extending aggregate initialization (<a href=\"http://wg21.link/p0017\" rel=\"noreferrer\">P0017</a>)</li>\n<li>Modernizing using-declarations (<a href=\"http://wg21.link/p0195\" rel=\"noreferrer\">P0195</a>).</li>\n</ol>\n\n<p>What happens in this line:</p>\n\n<pre><code>C c { []{}, [](int){} };\n</code></pre>\n\n<p>is that first, we use template parameter deduction (1) to deduce that <code>c</code> is really of type <code>C&lt;__lambda1, __lambda2&gt;</code>. This is done through the use of your <em>deduction guide</em>. </p>\n\n<p>Next, since <code>C&lt;__lambda1, __lambda2&gt;</code> is an aggregate (due to (2)'s relaxation of base class restrictions - you are correct that is not considered an aggregate in C++11/14), we can use <em>aggregate-initialization</em> to initialize it. We do <em>not</em> use a constructor. The way aggregate initialization now works with base classes is that we just have to initializes the bases left-to-right. So the first expression (<code>[]{}</code>) is used to initialize the first base class (<code>__lambda1</code>) and the second expression (<code>[](int){}</code>) is used to initialize the second base class (<code>__lambda2</code>). </p>\n\n<p>Lastly, the call <code>c(3)</code> works because (3) allowed you to simply write </p>\n\n<pre><code>using T::operator()...;\n</code></pre>\n\n<p>which brings in both lambdas' call operators into the scope of <code>C</code>, where overload resolution can work as expected. The result is that we call <code>__lambda2</code>'s call operator, which does nothing. </p>\n"}], "owner": {"reputation": 672, "user_id": 1442880, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2a97fcba555c029723d7c353345a974?s=128&d=identicon&r=PG", "display_name": "Kobi", "link": "https://stackoverflow.com/users/1442880/kobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 2, "accepted_answer_id": 44036790, "answer_count": 1, "score": 5, "last_activity_date": 1495067657, "creation_date": 1495062164, "last_edit_date": 1495067657, "question_id": 44036076, "link": "https://stackoverflow.com/questions/44036076/variadic-class-template-and-inheritance-default-compiler-generated-constructor", "title": "Variadic class template and inheritance - default compiler generated constructor", "body": "<p>How come the below code works w/ just the default compiler generated constructor?\nI would expect it for POD but the struct below is probably not a POD so it must be something else.</p>\n\n<pre><code>template &lt;typename ... T&gt;\nstruct C : T ... {\n   using T::operator()...;\n};\n\n// template class guidance feature of C++17\ntemplate &lt;typename ... T&gt;\nC(T...) -&gt; C&lt;T...&gt;;\n\nint main(){\n   C c { []{}, [](int){} };\n   c(3);\n}\n</code></pre>\n\n<p>This question comes as a follow up to Jason's Turner C++ weekly ep 49/50 where he defined a variadic constructor with <code>std::forward&lt;T&gt;(t)...</code></p>\n"}, {"tags": ["c++", "clang-format"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1495061997, "post_id": 44035983, "comment_id": 75098737, "body": "Have you tried getting in touch with the authors?"}, {"owner": {"reputation": 6711, "user_id": 232329, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4d05a3808e8a2f00c9c38a8903ef4d21?s=128&d=identicon&r=PG", "display_name": "Ghostrider", "link": "https://stackoverflow.com/users/232329/ghostrider"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1495126187, "post_id": 44035983, "comment_id": 75132233, "body": "Not yet. I assume their position would be (and rightly so) - you want it - you patch it."}, {"owner": {"reputation": 6781, "user_id": 660982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/giQX8.png?s=128&g=1", "display_name": "jpihl", "link": "https://stackoverflow.com/users/660982/jpihl"}, "edited": false, "score": 0, "creation_date": 1550582275, "post_id": 44035983, "comment_id": 96314492, "body": "Do you have any news on this issue @Ghostrider?"}], "owner": {"reputation": 6711, "user_id": 232329, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4d05a3808e8a2f00c9c38a8903ef4d21?s=128&d=identicon&r=PG", "display_name": "Ghostrider", "link": "https://stackoverflow.com/users/232329/ghostrider"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 1, "answer_count": 0, "score": 5, "last_activity_date": 1495061617, "creation_date": 1495061617, "question_id": 44035983, "link": "https://stackoverflow.com/questions/44035983/clang-format-with-better-support-for-nested-c-templates", "title": "clang-format with better support for nested C++ templates", "body": "<p>I'm looking into using clang-format for enforcing C++ code style. It mostly fits my requirements except for the fact that it pretty much has no settings for formatting complex template structures like</p>\n\n<pre><code>template&lt;typename ... params&gt; \n    std::enable_if&lt;\n        std::is_same&lt;...,...&gt;::value ||\n        std::is_same&lt;...,...&gt;::value,\n        void&gt;::type\n</code></pre>\n\n<p>Are there any forks of clang-format that give you more control over these constructs?</p>\n\n<p>Any other tools that might do the trick?</p>\n"}, {"tags": ["c++", "visual-studio", "pointers", "memory-management"], "comments": [{"owner": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1495061859, "post_id": 44035971, "comment_id": 75098691, "body": "And what is the magic relationship between <code>dizi</code> and <code>encrypted</code> so we know how big the array really is?"}, {"owner": {"reputation": 605, "user_id": 4307534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76c725db5f490173d65e4cbcb82c68cf?s=128&d=identicon&r=PG", "display_name": "Giorgi Gvimradze", "link": "https://stackoverflow.com/users/4307534/giorgi-gvimradze"}, "reply_to_user": {"reputation": 27279, "user_id": 857132, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/4fd51ed5980999c7c6ce3729d6cb2184?s=128&d=identicon&r=PG", "display_name": "John3136", "link": "https://stackoverflow.com/users/857132/john3136"}, "edited": false, "score": 0, "creation_date": 1495062103, "post_id": 44035971, "comment_id": 75098773, "body": "@John3136 they are both exactly with the same length. <code>encrypted</code> has letters and <code>dizi</code> consists of numbers only. A number of numbers in <code>dizi</code> is the same as a number of <code>char</code>&#39;s in the encrypted."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 605, "user_id": 4307534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76c725db5f490173d65e4cbcb82c68cf?s=128&d=identicon&r=PG", "display_name": "Giorgi Gvimradze", "link": "https://stackoverflow.com/users/4307534/giorgi-gvimradze"}, "edited": false, "score": 0, "creation_date": 1495063706, "post_id": 44036035, "comment_id": 75099208, "body": "@GiorgiGvimradze: yes"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1495063802, "last_edit_date": 1495063802, "creation_date": 1495061908, "answer_id": 44036035, "question_id": 44035971, "link": "https://stackoverflow.com/questions/44035971/string-length-causes-access-violation-values-visual-studio-c/44036035#44036035", "title": "String length causes access violation values -Visual Studio C++", "body": "<p>You are not allocating any memory for <code>kelime</code> before accessing <code>kelime[i]</code>.</p>\n\n<p>Add a call to <code>kelime.resize()</code> before entering the loop (and the loop itself can be greatly simplified), eg:</p>\n\n<pre><code>static const char letters[] = \"ABC\\x80\"\"DEFG\\xA6HI\\x98JKLMNO\\x99PRS\\x9ETU\\x9AVYZ ,.!?-;:1234567890\";\n\nstring kelime_uret(int dizi[], int length)\n{\n    string kelime;\n    int value;\n\n    kelime.resize(length);\n\n    for (int i = 0; i &lt; length; ++i)\n    {\n        value = dizi[i];\n        if ((value &gt;= 1) &amp;&amp; (value &lt;= 47)) {\n            kelime[i] = letters[value-1];\n        }\n        else {\n            cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n        }\n    }\n\n    return kelime;\n}\n</code></pre>\n\n<p>Or, you can omit <code>resize()</code> (but do consider using <code>reserve()</code> at least), and then use <code>kelime.push_back(...)</code> or <code>kelime += ...</code> instead of <code>kelime[i]</code>, eg:</p>\n\n<pre><code>static const char letters[] = \"ABC\\x80\"\"DEFG\\xA6HI\\x98JKLMNO\\x99PRS\\x9ETU\\x9AVYZ ,.!?-;:1234567890\";\n\nstring kelime_uret(int dizi[], int length)\n{\n    string kelime;\n    int value;\n\n    kelime.reserve(length);\n\n    for (int i = 0; i &lt; length; ++i)\n    {\n        value = dizi[i];\n        if ((value &gt;= 1) &amp;&amp; (value &lt;= 47)) {\n            kelime += letters[value-1];\n        }\n        else {\n            kelime += '\\0';\n            cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n        }\n    }\n\n    return kelime;\n}\n</code></pre>\n\n<p>Alternatively, use <code>std::ostringstream</code> instead of <code>std::string</code>, eg:</p>\n\n<pre><code>static const char letters[] = \"ABC\\x80\"\"DEFG\\xA6HI\\x98JKLMNO\\x99PRS\\x9ETU\\x9AVYZ ,.!?-;:1234567890\";\n\nstring kelime_uret(int dizi[], int length)\n{\n    ostringstream kelime;\n    int value;\n\n    for (int i = 0; i &lt; length; ++i)\n    {\n        value = dizi[i];\n        if ((value &gt;= 1) &amp;&amp; (value &lt;= 47)) {\n            kelime &lt;&lt; letters[value-1];\n        }\n        else {\n            kelime &lt;&lt; '\\0';\n            cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n        }\n    }\n\n    return kelime.str();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 2, "last_activity_date": 1495062360, "last_edit_date": 1495062360, "creation_date": 1495062012, "answer_id": 44036055, "question_id": 44035971, "link": "https://stackoverflow.com/questions/44035971/string-length-causes-access-violation-values-visual-studio-c/44036055#44036055", "title": "String length causes access violation values -Visual Studio C++", "body": "<pre><code>string kelime; \n</code></pre>\n\n<p>makes a size zero <code>std::string</code>. This means any</p>\n\n<pre><code>kelime[i]\n</code></pre>\n\n<p>will be out of bounds and invoke <a href=\"http://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">Undefined Behaviour</a>. After that, no one knows what will happen in the program. </p>\n\n<p>Either <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/resize\" rel=\"nofollow noreferrer\">size the string ahead of time with <code>std::string::resize</code></a> if you know the length (looks like you do) or use any of the many methods for adding to a string including: <code>std::string::push_back</code>, the += operator, and <code>std::string::append</code>. Alternately, switch over to a <code>std::stringstream</code>.</p>\n"}], "owner": {"reputation": 605, "user_id": 4307534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/76c725db5f490173d65e4cbcb82c68cf?s=128&d=identicon&r=PG", "display_name": "Giorgi Gvimradze", "link": "https://stackoverflow.com/users/4307534/giorgi-gvimradze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 1, "accepted_answer_id": 44036035, "answer_count": 2, "score": -1, "last_activity_date": 1495063802, "creation_date": 1495061570, "last_edit_date": 1495062299, "question_id": 44035971, "link": "https://stackoverflow.com/questions/44035971/string-length-causes-access-violation-values-visual-studio-c", "title": "String length causes access violation values -Visual Studio C++", "body": "<p>Before I talk about the problem, let me explain what did not work:<p>\n1) Tried to not return any value and made the function <code>void</code><br>\n2) Made lots of changes in pointers tried <code>array[i]</code>, <code>*(array+i)</code><br>\nThe only way I will not get the error would be when storage to the <code>string</code> variable is changed onto simple <code>cout&lt;&lt;</code>. The error appears when the <code>i=25</code> or in other words when the <code>array[]</code> is longer than 25.</p>\n\n<pre><code>string kelime_uret(int dizi[], int length) {\n    string kelime;\n    for (int i = 0; i &lt; length; i++) {\n\n        if (dizi[i] == 1) { kelime[i] = 'A'; }\n        else if (dizi[i] == 2) { kelime[i] = 'B'; }\n        else if (dizi[i] == 3) { kelime[i] = 'C'; }\n        else if (dizi[i] == 4) { kelime[i] = char(128); }\n        else if (dizi[i] == 5) { kelime[i] = 'D'; }\n        else if (dizi[i] == 6) { kelime[i] = 'E'; }\n        else if (dizi[i] == 7) { kelime[i] = 'F'; }\n        else if (dizi[i] == 8) { kelime[i] = 'G'; }\n        else if (dizi[i] == 9) { kelime[i] = char(166); }\n        else if (dizi[i] == 10) { kelime[i] = 'H'; }\n        else if (dizi[i] == 11) { kelime[i] = 'I'; }\n        else if (dizi[i] == 12) { kelime[i] = char(152); }\n        else if (dizi[i] == 13) { kelime[i] = 'J'; }\n        else if (dizi[i] == 14) { kelime[i] = 'K'; }\n        else if (dizi[i] == 15) { kelime[i] = 'L'; }\n        else if (dizi[i] == 16) { kelime[i] = 'M'; }\n        else if (dizi[i] == 17) { kelime[i] = 'N'; }\n        else if (dizi[i] == 18) { kelime[i] = 'O'; }\n        else if (dizi[i] == 19) { kelime[i] = char(153); }\n        else if (dizi[i] == 20) { kelime[i] = 'P'; }\n        else if (dizi[i] == 21) { kelime[i] = 'R'; }\n        else if (dizi[i] == 22) { kelime[i] = 'S'; }\n        else if (dizi[i] == 23) { kelime[i] = char(158); }\n        else if (dizi[i] == 24) { kelime[i] = 'T'; }\n        else if (dizi[i] == 25) { kelime[i] = 'U'; }\n        else if (dizi[i] == 26) { kelime[i] = char(154); }\n        else if (dizi[i] == 27) { kelime[i] = 'V'; }\n        else if (dizi[i] == 28) { kelime[i] = 'Y'; }\n        else if (dizi[i] == 29) { kelime[i] = 'Z'; }\n        else if (dizi[i] == 30) { kelime[i] = ' '; }\n        else if (dizi[i] == 31) { kelime[i] = ','; }\n        else if (dizi[i] == 32) { kelime[i] = '.'; }\n        else if (dizi[i] == 33) { kelime[i] = '!'; }\n        else if (dizi[i] == 34) { kelime[i] = '?'; }\n        else if (dizi[i] == 35) { kelime[i] = '-'; }\n        else if (dizi[i] == 36) { kelime[i] = ';'; }\n        else if (dizi[i] == 37) { kelime[i] = ':'; }\n        else if (dizi[i] == 38) { kelime[i] = '1'; }\n        else if (dizi[i] == 39) { kelime[i] = '2'; }\n        else if (dizi[i] == 40) { kelime[i] = '3'; }\n        else if (dizi[i] == 41) { kelime[i] = '4'; }\n        else if (dizi[i] == 42) { kelime[i] = '5'; }\n        else if (dizi[i] == 43) { kelime[i] = '6'; }\n        else if (dizi[i] == 44) { kelime[i] = '7'; }\n        else if (dizi[i] == 45) { kelime[i] = '8'; }\n        else if (dizi[i] == 46) { kelime[i] = '9'; }\n        else if (dizi[i] == 47) { kelime[i] = '0'; }\n        else cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n    }//i value 25 error dizi[i] 42 &gt;&gt;&gt;&gt; 0x00007FF7B02B150E noktas\u0131nda, Affin.exe \u00fczerinde \u00f6zel durum olu\u015ftu: 0xC0000005: 0xFFFFFFFFFFFFFFFF konumuna okuma eri\u015fimi ihlali.\n\n    return kelime;\n}\n</code></pre>\n\n<p>This is how I make a call:</p>\n\n<pre><code>cout &lt;&lt; kelime_uret(dizi, encrypted.size());\n</code></pre>\n\n<p><strong>P.S. <br>\ndizi -> array,<br> \nkelime -> word</strong><br>\nThe number of array's set members is the same as the number of characters in <code>encrypted</code>.</p>\n"}, {"tags": ["c++", "class", "header-files"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 2, "creation_date": 1495061058, "post_id": 44035850, "comment_id": 75098447, "body": "Never include a cpp file."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 2, "creation_date": 1495061150, "post_id": 44035850, "comment_id": 75098475, "body": "And never use header guards in this form <code>_CLIENTSOCKET_H</code> - simply use <code>CLIENTSOCKET_H</code>. And put the header guards around <i>everything</i> in the header file."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1495061258, "post_id": 44035850, "comment_id": 75098507, "body": "Names starting with underscore followed by an upper-case letter are reserved for the implementation. <i>Never</i> use such names in your own code (not even for header guards)."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1495061467, "post_id": 44035850, "comment_id": 75098571, "body": "<code>#include &quot;ClientSocket.cpp&quot;</code> is wrong!!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1495061609, "post_id": 44035850, "comment_id": 75098618, "body": "<a href=\"http://stackoverflow.com/questions/228783/what-are-the-rules-about-using-an-underscore-in-a-c-identifier\">And knowing is half the battle.</a> Yo Joe."}], "answers": [{"tags": [], "owner": {"reputation": 3514, "user_id": 2612002, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/b5a04.png?s=128&g=1", "display_name": "iehrlich", "link": "https://stackoverflow.com/users/2612002/iehrlich"}, "is_accepted": false, "score": 0, "last_activity_date": 1495061363, "creation_date": 1495061363, "answer_id": 44035938, "question_id": 44035850, "link": "https://stackoverflow.com/questions/44035850/class-does-not-name-a-type-error-in-implementation-file/44035938#44035938", "title": "&#39;[Class] does not name a type error in implementation file", "body": "<p>You should not try to include <code>ClientSocket.cpp</code> from what I believe is <code>ClientSocket.h</code>. Note that 'include' is just a test substitution, and in this case you are effectively substituting the contents of <code>ClientSocket.cpp</code> (including the method definitions of the yet undeclared <code>ClientSocket</code> class) before the definition of the class itself.</p>\n\n<p>Also, <code>ClientSocket.cpp</code> does not include <code>ClientSocket.h</code>, and therefore either does not have access to <code>ClientSocket</code> class definition at all, or has it via other headers, the latter case being highly discouraged.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 3564783, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/77f255569ec2ee5daf354014a563770e?s=128&d=identicon&r=PG&f=1", "display_name": "user3564783", "link": "https://stackoverflow.com/users/3564783/user3564783"}, "edited": false, "score": 0, "creation_date": 1495063170, "post_id": 44035952, "comment_id": 75099080, "body": "I might not have been clear, but including the .h in the .cpp simple gives me undefined reference errors when I compile the main code."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 15, "user_id": 3564783, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/77f255569ec2ee5daf354014a563770e?s=128&d=identicon&r=PG&f=1", "display_name": "user3564783", "link": "https://stackoverflow.com/users/3564783/user3564783"}, "edited": false, "score": 0, "creation_date": 1495064017, "post_id": 44035952, "comment_id": 75099286, "body": "@user3564783 Can you update your question with this error message?"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 15, "user_id": 3564783, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/77f255569ec2ee5daf354014a563770e?s=128&d=identicon&r=PG&f=1", "display_name": "user3564783", "link": "https://stackoverflow.com/users/3564783/user3564783"}, "edited": false, "score": 0, "creation_date": 1495064643, "post_id": 44035952, "comment_id": 75099427, "body": "@user3564783 you mean undefined reference from linker? You have to compile your ClientSocket.cpp separately as well and link resulting ClientSocket.o"}, {"owner": {"reputation": 15, "user_id": 3564783, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/77f255569ec2ee5daf354014a563770e?s=128&d=identicon&r=PG&f=1", "display_name": "user3564783", "link": "https://stackoverflow.com/users/3564783/user3564783"}, "edited": false, "score": 0, "creation_date": 1495065249, "post_id": 44035952, "comment_id": 75099598, "body": "Yes, linker errors are what I mean. Do I need to compile the header files and the implementation files at once?"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 15, "user_id": 3564783, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/77f255569ec2ee5daf354014a563770e?s=128&d=identicon&r=PG&f=1", "display_name": "user3564783", "link": "https://stackoverflow.com/users/3564783/user3564783"}, "edited": false, "score": 0, "creation_date": 1495065857, "post_id": 44035952, "comment_id": 75099761, "body": "@user3564783 No, you compile only .cpp files, headers (.h) are usually included by .cpp files."}], "tags": [], "owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1495062394, "last_edit_date": 1495062394, "creation_date": 1495061422, "answer_id": 44035952, "question_id": 44035850, "link": "https://stackoverflow.com/questions/44035850/class-does-not-name-a-type-error-in-implementation-file/44035952#44035952", "title": "&#39;[Class] does not name a type error in implementation file", "body": "<blockquote>\n  <p>A header file that looks like this:</p>\n</blockquote>\n\n<pre><code>// Definition of the ClientSocket class\n\n#include \"ClientSocket.cpp\" &lt;== this definitely looks wrong.\n</code></pre>\n\n<p>Normally you do not include cpp files. It's the other way around, your <code>ClientSocket.cpp</code> should include your <code>ClientSocket.h</code>:</p>\n\n<pre><code>// Implementation of the ClientSocket class\n#include \"ClientSocket.h\"\n#include \"SocketException.h\"\n\nClientSocket::ClientSocket(std::string host, int port)\n{\n   ...\n</code></pre>\n\n<p>Header guard <code>_CLIENTSOCKET_H</code> in your ClientSocket.h should come before you include <code>Socket.h</code>, also do not use names that start with one or two underscores (they are reserved identifiers):</p>\n\n<pre><code>#ifndef CLIENTSOCKET_H\n#define CLIENTSOCKET_H\n\n#include \"Socket.h\"\n\nclass ClientSocket : private Socket\n{\n    ...\n};\n\n#endif /* CLIENTSOCKET_H */\n</code></pre>\n\n<p>Your <code>ClientSocket.h</code> references <code>std::string</code>, perhaps it's included from <code>Socket.h</code>. If not, you should include it from <code>ClientSocket.h</code></p>\n"}], "owner": {"reputation": 15, "user_id": 3564783, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/77f255569ec2ee5daf354014a563770e?s=128&d=identicon&r=PG&f=1", "display_name": "user3564783", "link": "https://stackoverflow.com/users/3564783/user3564783"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "closed_date": 1495095693, "answer_count": 2, "score": -1, "last_activity_date": 1495062394, "creation_date": 1495060933, "question_id": 44035850, "link": "https://stackoverflow.com/questions/44035850/class-does-not-name-a-type-error-in-implementation-file", "closed_reason": "Not suitable for this site", "title": "&#39;[Class] does not name a type error in implementation file", "body": "<p>I have main code that looks like this:</p>\n\n<pre><code>#include \"ClientSocket.h\"\n#include \"SocketException.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nint main ( int argc, char argv[] )\n{\n    std::cout &lt;&lt; \"\" &lt;&lt; std::endl;\n    try\n    {   \n        ClientSocket client_socket ( \"localhost\", 30000 );\n        std::string reply;\n\n        try\n        {\n            client_socket &lt;&lt; \"Test message.\";\n            client_socket &gt;&gt; reply;\n        }\n        catch ( SocketException&amp; ) {}\n\n        std::cout &lt;&lt; \"We received this response from the server:\\n\\\"\" &lt;&lt; reply &lt;&lt; \"\\\"\\n\";;\n    }\n    catch ( SocketException&amp; e )\n    {\n        std::cout &lt;&lt; \"Exception was caught:\" &lt;&lt; e.description() &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>A header file that looks like this:</p>\n\n<pre><code>// Definition of the ClientSocket class\n\n#include \"ClientSocket.cpp\"\n#include \"Socket.h\"\n#ifndef _CLIENTSOCKET_H\n#define _CLIENTSOCKET_H\n\nclass ClientSocket : private Socket\n{\n    public:\n        ClientSocket ( std::string host, int port );\n        virtual ~ClientSocket(){};\n        const ClientSocket&amp; operator &lt;&lt; ( const std::string&amp; ) const;\n        const ClientSocket&amp; operator &gt;&gt; ( std::string&amp; ) const;\n};\n\n#endif\n</code></pre>\n\n<p>And an implementation file that looks like this:</p>\n\n<pre><code>// Implementation of the ClientSocket class\n\n#include \"Socket.h\"\n#include \"SocketException.h\"\n\nClientSocket::ClientSocket ( std::string host, int port )\n{\n    if ( ! Socket::create() )\n    {\n        throw SocketException ( \"Could not create client socket.\" );\n    }\n\n    if ( ! Socket::connect ( host, port ) )\n    {\n        throw SocketException ( \"Could not bind to port.\" );\n    }\n}\n\nconst ClientSocket&amp; ClientSocket::operator &lt;&lt; ( const std::string&amp; s ) const\n{\n    if ( ! Socket::send ( s ) )\n    {\n        throw SocketException ( \"Could not write to socket.\" );\n    }\n\n    return *this;\n}\n\nconst ClientSocket&amp; ClientSocket::operator &gt;&gt; ( std::string&amp; s ) const\n{\n    if ( ! Socket::recv ( s ) )\n    {\n        throw SocketException ( \"Could not read from socket.\" );\n    }\n\n    return *this;\n}\n</code></pre>\n\n<p>I've found that compiling these files causes a raft of compilation errors in the implementation file specifically, no matter what combination of includes and guards I use.</p>\n\n<pre><code>In file included from ClientSocket.h:3:0,\n                 from simple_client_main.cpp:1:\nClientSocket.cpp:6:1: error: 'ClientSocket' does not name a type\n ClientSocket::ClientSocket ( std::string host, int port )\n ^\nClientSocket.cpp:19:7: error: 'ClientSocket' does not name a type\n const ClientSocket&amp; ClientSocket::operator &lt;&lt; ( const std::string&amp; s ) const\n       ^\nClientSocket.cpp:29:7: error: 'ClientSocket' does not name a type\n const ClientSocket&amp; ClientSocket::operator &gt;&gt; ( std::string&amp; s ) const\n       ^\n</code></pre>\n\n<p>The ones posted are what seemed to make the most sense. I've tried including the header file in the implementation file, which does nothing. I've tried removing the include from the header file and including the header in the implementation file, but this replaces the 'does not name a type' errors with undefined reference errors. Is there something in the code preventing compilation?</p>\n"}, {"tags": ["c++", "multicast", "upnp", "ssdp"], "comments": [{"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1495055828, "post_id": 44034824, "comment_id": 75096498, "body": "Your M-SEARCH message is a missing an empty line (&quot;\\r\\n&quot;) in the end."}, {"owner": {"reputation": 15, "user_id": 4646641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af84eac206c2ec30beec5ba2c7576b53?s=128&d=identicon&r=PG&f=1", "display_name": "yuvi", "link": "https://stackoverflow.com/users/4646641/yuvi"}, "reply_to_user": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1495117103, "post_id": 44034824, "comment_id": 75125954, "body": "@jku: Thanks a ton. Now I could able to get response from devices. But as it is running on a while loop, after sometime the receive call returns -1. Also I see WeMo switch responding only once. But I also have an ASUS wifi router which is responding continuously. Is it what expected?"}, {"owner": {"reputation": 12075, "user_id": 2241569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QMrPS.jpg?s=128&g=1", "display_name": "Jussi Kukkonen", "link": "https://stackoverflow.com/users/2241569/jussi-kukkonen"}, "edited": false, "score": 0, "creation_date": 1495119531, "post_id": 44034824, "comment_id": 75127914, "body": "You should receive one answer per M-SEARCH (per responding service/device) but I guess your code won&#39;t handle more than one message per M-SEARCH.. . You&#39;ll need to look at errno to find out why recvfrom fails."}], "owner": {"reputation": 15, "user_id": 4646641, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af84eac206c2ec30beec5ba2c7576b53?s=128&d=identicon&r=PG&f=1", "display_name": "yuvi", "link": "https://stackoverflow.com/users/4646641/yuvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1003, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495055386, "creation_date": 1495055386, "question_id": 44034824, "link": "https://stackoverflow.com/questions/44034824/upnp-m-search-no-response-windows-10", "title": "UPnP M-SEARCH no response windows 10", "body": "<p>I am trying to access an WeMo light switch using UPnP. After googling many open source c++ libraries I finally figured out a sample code for basic discovery of UPnP devices <a href=\"http://www.rohitab.com/discuss/topic/41267-ssdpupnp-protocol-example/#\" rel=\"nofollow noreferrer\">http://www.rohitab.com/discuss/topic/41267-ssdpupnp-protocol-example/#</a> </p>\n\n<p>I am using Windows 10, both my laptop WiFi and WeMo switch are in same WiFi netowrk, disabled firewall. But I am not receiving any message. I had even tried changing the \"Search Target\" <code>ST</code> option to <code>ssdp:all</code>. The other sample code <a href=\"https://objectpartners.com/2014/03/25/a-groovy-time-with-upnp-and-wemo/\" rel=\"nofollow noreferrer\">https://objectpartners.com/2014/03/25/a-groovy-time-with-upnp-and-wemo/</a> suggests to use <code>ST</code> as <code>urn:Belkin:device:controllee:1</code>, but there is no response from any device.</p>\n\n<p>My Code:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string&gt;\n#include &lt;winsock2.h&gt;\n#include &lt;ws2tcpip.h&gt;\n#pragma comment(lib, \"Ws2_32.lib\")\n#include &lt;windows.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n\n#define SERVERPORT 1900\nchar buff[] = \"M-SEARCH * HTTP/1.1\\r\\nHOST: 239.255.255.250:1900\\r\\nMAN: \\\"ssdp:discover\\\"\\r\\nMX: 3\\r\\nST: upnp:rootdevice\\r\\n\";\n\nint main()\n{\n    char rcvdbuff[1000];\n    int len, Ret = 2;\n\n    WSADATA wsaData;\n    struct sockaddr_in their_addr;\n    SOCKET sock;\n    WSAStartup(MAKEWORD(2, 2), &amp;wsaData);\n\n    sock = socket(AF_INET, SOCK_DGRAM, 0);\n\n    their_addr.sin_family = AF_INET;\n\n    their_addr.sin_addr.s_addr = inet_addr(\"239.255.255.250\");\n    their_addr.sin_port = htons(SERVERPORT);\n    len = sizeof(struct sockaddr_in);\n\n    while (1)\n    {\n        printf(\"buff:\\n%s\\n\", buff);\n        Ret = sendto(sock, buff, strlen(buff), 0, (struct sockaddr*)&amp;their_addr, len);\n        if (Ret &lt; 0)\n        {\n            printf(\"error in SENDTO() function\");\n            closesocket(sock);\n            return 0;\n        }\n\n        //Receiving Text from server\n        printf(\"\\n\\nwaiting to recv:\\n\");\n        memset(rcvdbuff, 0, sizeof(rcvdbuff));\n        Ret = recvfrom(sock, rcvdbuff, sizeof(rcvdbuff), 0, (struct sockaddr *)&amp;their_addr, &amp;len);\n        if (Ret &lt; 0)\n        {\n            printf(\"Error in Receiving\");\n            return 0;\n        }\n        rcvdbuff[Ret - 1] = '\\0';\n        printf(\"RECEIVED MESSAGE FROM SERVER\\t: %s\\n\", rcvdbuff);\n\n        //Delay for testing purpose\n        Sleep(3 * 1000);\n    }\n    closesocket(sock);\n    WSACleanup();\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers", "struct"], "comments": [{"owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 1, "creation_date": 1495055560, "post_id": 44034821, "comment_id": 75096368, "body": "The next item is in <code>next</code>, not immediately next to it in memory."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2672107"}, "edited": false, "score": 0, "creation_date": 1495055596, "post_id": 44034821, "comment_id": 75096383, "body": "Why do you think that should do anything useful? You have no array!"}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1495055741, "post_id": 44034821, "comment_id": 75096452, "body": "This may be C in the sense that you use &#39;new&#39; for dynamic allocation. However, you should invest some time to learn about encapsulation, RAII and interfaces. &#39;item&#39; is crying out to have a constructor and a destructor (unless you are obliged to interface with C code)."}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "edited": false, "score": 0, "creation_date": 1495056685, "post_id": 44034821, "comment_id": 75096862, "body": "Sometimes people down-vote on questions which they think are too basic and can be answered with enough reading of documentation. I think it&#39;s pretty clear what you&#39;re asking, but it could be made more explicit by phrasing it as a question. e.g. &quot;Why do I get the following error?&quot; rather than &quot;I&#39;m getting the following error&quot;."}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1495096715, "post_id": 44034821, "comment_id": 75111147, "body": "If you value your readers time, you can remove everything not directly relevant, thereby creating a minimal test case <a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>. As it stands I would i) not down vote your question if you show interest in how to improve asking question ii) down vote if I get the impression that you don&#39;t care much about your readers time."}, {"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1495097125, "post_id": 44034821, "comment_id": 75111425, "body": "If you can reframe your specific questions, which is probably only relevant to you, into a generic (but specific) question interesting to a broader audience you have also increased your chance of getting up votes instead of down votes."}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 5508419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6d3033e69897afddfe2ad04c828ac597?s=128&d=identicon&r=PG&f=1", "display_name": "iWillBeMaster", "link": "https://stackoverflow.com/users/5508419/iwillbemaster"}, "edited": false, "score": 0, "creation_date": 1495056213, "post_id": 44034875, "comment_id": 75096665, "body": "Thanks for the great explanation. I definetly thought about it wrong. So instead of tempNext = beg + 1; i did tempNext = beg-&gt;next; and it works. If i want to put an item to the 3rd place for example, is my only option to use a loop and i start from beginning and go forward one by one until im at the spot i want to be and then add the item there because the items arent next to each other in memory? Did i get it right?"}, {"owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "reply_to_user": {"reputation": 137, "user_id": 5508419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6d3033e69897afddfe2ad04c828ac597?s=128&d=identicon&r=PG&f=1", "display_name": "iWillBeMaster", "link": "https://stackoverflow.com/users/5508419/iwillbemaster"}, "edited": false, "score": 0, "creation_date": 1495056424, "post_id": 44034875, "comment_id": 75096751, "body": "@iWillBeMaster, Yes, that is correct. You can only traverse a linked list one element at a time since they are not contiguous in memory."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "reply_to_user": {"reputation": 137, "user_id": 5508419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6d3033e69897afddfe2ad04c828ac597?s=128&d=identicon&r=PG&f=1", "display_name": "iWillBeMaster", "link": "https://stackoverflow.com/users/5508419/iwillbemaster"}, "edited": false, "score": 0, "creation_date": 1495062536, "post_id": 44034875, "comment_id": 75098890, "body": "@iWillBeMaster that&#39;s why we can say that array are &quot;random access&quot; and linked list are not: you access directly any value inside the array, with the linked list you have to traverse the previous value to access the one you want."}], "tags": [], "owner": {"reputation": 62800, "user_id": 391161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/fb76d8bcc69144a3ee4c893ece7fc588?s=128&d=identicon&r=PG&f=1", "display_name": "merlin2011", "link": "https://stackoverflow.com/users/391161/merlin2011"}, "is_accepted": true, "score": 2, "last_activity_date": 1495055586, "creation_date": 1495055586, "answer_id": 44034875, "question_id": 44034821, "link": "https://stackoverflow.com/questions/44034821/c-accessing-values-of-a-struct-with-pointer1/44034875#44034875", "title": "C++ accessing values of a struct with pointer+1", "body": "<p>You appear to be mixing up the concept of a linked list with the concept of an array. In a traditional linked list, each element is allocated separately on the heap, and there is no reason for the allocations to be contiguous in memory. That is why you have a <code>next</code> pointer to tell you where the next element is.</p>\n\n<p>When you use the expression <code>beg + 1</code>, you are accessing the memory location that is one <code>struct item</code> worth of memory after <code>beg</code>, which is not necessarily valid memory. In your case, you get an error because you probably don't have permission to read that memory.</p>\n"}, {"tags": [], "owner": {"reputation": 197, "user_id": 4718232, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c260452502e83ce1a63f1ea4c93dc83e?s=128&d=identicon&r=PG&f=1", "display_name": "maigar", "link": "https://stackoverflow.com/users/4718232/maigar"}, "is_accepted": false, "score": 0, "last_activity_date": 1495055959, "creation_date": 1495055959, "answer_id": 44034971, "question_id": 44034821, "link": "https://stackoverflow.com/questions/44034821/c-accessing-values-of-a-struct-with-pointer1/44034971#44034971", "title": "C++ accessing values of a struct with pointer+1", "body": "<p>You can't do (pointer+1) here because the location next to <code>beg</code> pointer is not necessarily in your list. Memory is not allocated in a continuous order, unless you have used an array or something similar. </p>\n\n<p>What you can do instead is</p>\n\n<pre><code>tempNext=beg-&gt;next;\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 5508419, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6d3033e69897afddfe2ad04c828ac597?s=128&d=identicon&r=PG&f=1", "display_name": "iWillBeMaster", "link": "https://stackoverflow.com/users/5508419/iwillbemaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1495097970, "accepted_answer_id": 44034875, "answer_count": 2, "score": -4, "last_activity_date": 1495056500, "creation_date": 1495055376, "last_edit_date": 1495056500, "question_id": 44034821, "link": "https://stackoverflow.com/questions/44034821/c-accessing-values-of-a-struct-with-pointer1", "closed_reason": "Needs details or clarity", "title": "C++ accessing values of a struct with pointer+1", "body": "<p>So I am trying to access the value of a struct using \"pointer+1\" but it gives me this error \"[main] listTest 8320 cygwin_exception::open_stackdumpfile: Dumping stack trace t\no listTest.exe.stackdump\". If I use just a pointer without the \"+1\" to acces the value it works. When I print out both pointers I get addresses but like I said I can not acces the value of the (pointer+1).</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstruct item\n{\n    string value;\n    struct item *next;\n    struct item *before;\n};\n\nint main()\n{\n    item *beg, *end, *temp, *tempBefore, *tempNext;\n\n    temp = new (item);\n    temp-&gt;value = \"Hello\";\n    temp-&gt;next = NULL;\n    temp-&gt;before = NULL;\n    beg = temp;\n    end = temp;\n\n    // add to the end of list\n    temp = new (item);\n    temp-&gt;value = \"World\";\n    temp-&gt;next = NULL;\n    temp-&gt;before = end;\n    end-&gt;next = temp;\n    end = temp;\n\n    // add to the beginning of list\n    temp = new(item);\n    temp-&gt;value = \"Reiska\";\n    temp-&gt;next = beg;\n    temp-&gt;before = NULL;\n    beg-&gt;before = temp;\n    beg = temp;\n\n    // add to the middle of list (between first and second)\n    tempBefore = beg;\n    tempNext = beg + 1;\n    cout &lt;&lt; tempNext &lt;&lt; \" \" &lt;&lt; tempBefore &lt;&lt; endl; // prints both addresses\n    cout &lt;&lt; tempNext-&gt;value &lt;&lt; \" \" &lt;&lt; tempBefore-&gt;value &lt;&lt; endl; // the error i mentioned earlier\n    temp = new(item);\n    temp-&gt;value = \"Kiulu\";\n    temp-&gt;before = tempBefore;\n    temp-&gt;next = tempNext;\n    tempBefore-&gt;next = temp;\n    tempNext-&gt;before = temp;\n</code></pre>\n\n<p>Thanks for all the -reps. I definetly got the concept of a linked list wrong but is that why u -rep? Or is my explanation unlcear?</p>\n"}, {"tags": ["c#", "c++"], "comments": [{"owner": {"reputation": 18479, "user_id": 1141432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/012a5bc2ab8149295daba3ed25471679?s=128&d=identicon&r=PG", "display_name": "itsme86", "link": "https://stackoverflow.com/users/1141432/itsme86"}, "edited": false, "score": 0, "creation_date": 1495055244, "post_id": 44034724, "comment_id": 75096228, "body": "I can think of one way to find out!"}], "answers": [{"comments": [{"owner": {"reputation": 278, "user_id": 903953, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f06178a88bab4772240195571d773174?s=128&d=identicon&r=PG", "display_name": "t4taurus", "link": "https://stackoverflow.com/users/903953/t4taurus"}, "edited": false, "score": 0, "creation_date": 1495086388, "post_id": 44034784, "comment_id": 75104957, "body": "Thank you so much. In this library only big thing to transfer from C++ to CLR is an image in realtime after few milliseconds. After reading your answer, I think I can go easily with it."}], "tags": [], "owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "is_accepted": false, "score": 2, "last_activity_date": 1495055247, "creation_date": 1495055247, "answer_id": 44034784, "question_id": 44034724, "link": "https://stackoverflow.com/questions/44034724/will-c-wrapper-become-slow-than-the-original-c-library-using-dllimport/44034784#44034784", "title": "Will C# Wrapper become slow than the original c++ library using dllImport?", "body": "<p>Probably not significantly, but it depends on how much library interacts with managed code.</p>\n\n<p>The performance of unmanaged code should not be affected by the CLR.  However, calls between the CLR and unmanaged code (P/Invoke calls (CLR-to-unmanaged) and reverse P/Invoke calls (unmanaged-to-CLR)) do have some overhead, particularly around argument and return value marshaling.  Passing huge structures, arrays, or strings between the two often require blitting or more complex marshaling, and both take time to process.</p>\n\n<p>So, if the library spends a lot of time churning in unmanaged land without interacting with any CLR code, performance should not be impacted.  If you're having to make a lot of calls in and out over a short period of time, you will likely notice a decrease in performance compared with making those same library calls in a native binary.</p>\n"}], "owner": {"reputation": 278, "user_id": 903953, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f06178a88bab4772240195571d773174?s=128&d=identicon&r=PG", "display_name": "t4taurus", "link": "https://stackoverflow.com/users/903953/t4taurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1495055247, "creation_date": 1495054994, "question_id": 44034724, "link": "https://stackoverflow.com/questions/44034724/will-c-wrapper-become-slow-than-the-original-c-library-using-dllimport", "title": "Will C# Wrapper become slow than the original c++ library using dllImport?", "body": "<p>I want to create a wrapper of realtime face analysis sdk located here <a href=\"http://face.ci2cv.net/\" rel=\"nofollow noreferrer\">http://face.ci2cv.net/</a>. I want to know that when I will create its wrapper using dllImport, will it effect the speed of the library ?</p>\n"}, {"tags": ["c++", "image", "bitmap", "tga"], "comments": [{"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495056273, "post_id": 44034678, "comment_id": 75096689, "body": "You could try <code>asserting</code> that your TGA header really is 18 bytes and that your compiler hasn&#39;t padded anything..."}, {"owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495056418, "post_id": 44034678, "comment_id": 75096748, "body": "i&#39;ve made &#39; int sz = sizeof(TGAHEADER); &#39; then debugging, and sz takes value 18;"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495057057, "post_id": 44034678, "comment_id": 75097034, "body": "So the geometry and shapes of things in the image are correct, but the colours are wrong? Consistently wrong or randomly?"}, {"owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495057953, "post_id": 44034678, "comment_id": 75097428, "body": "i put a random .bmp file as texture on the same shape and it binds &amp; renders ok. this tga loader is very strange.. i have width, height, bit depth, file type OK, then it alocates the vector with the correct size.. i can&#39;t understand why i have strange colors.."}, {"owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495058081, "post_id": 44034678, "comment_id": 75097466, "body": "yes, the geometry is correct, and colors are wrong, not quit consistently, i can se 2x of my image, the left one has the odd line of pixel, the right one has the even one"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495058194, "post_id": 44034678, "comment_id": 75097513, "body": "If you are on Linux you will have ImageMagick and can make a red TGA file with <code>convert -size 640x480 xc:red RED.TGA</code> or a cyan-magenta gradient image with <code>convert -size 640x480 gradient:cyan-magenta GRADIENT.TGA</code>"}, {"owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495058473, "post_id": 44034678, "comment_id": 75097606, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/144503/discussion-between-stoica-mircea-and-mark-setchell\">continue this discussion in chat</a>."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495059009, "post_id": 44034678, "comment_id": 75097789, "body": "Sorry, I cannot at the moment."}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495102534, "post_id": 44034678, "comment_id": 75115297, "body": "Can you provide a link to the image please?"}, {"owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495125087, "post_id": 44034678, "comment_id": 75131616, "body": "i&#39;ve attached images to this post"}, {"owner": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495126004, "post_id": 44034678, "comment_id": 75132140, "body": "You have attached photos of images, not the actual image you created in Java. If the images you generate in Java display correctly in Photoshop, there is no need to show the Java code - it must be correct! If the images do not load into Android, then there is something wrong with your Android code and you should generate some very simple images as I suggested with ImageMagick to debug your Android code."}, {"owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "reply_to_user": {"reputation": 144839, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1495128562, "post_id": 44034678, "comment_id": 75133566, "body": "the second photo was writed in java, then open in photoshop. i found the mistake. as i was been thinking, i got an offset, but not in writing/reading process, into the upload to gpu:  i had  &quot;glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB.....);&quot;  instead of  &quot;glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA....);&quot; because my pixel size is 4 (RGBA) not 3 (RGB)."}], "answers": [{"tags": [], "owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "is_accepted": true, "score": 0, "last_activity_date": 1508158606, "last_edit_date": 1508158606, "creation_date": 1495136055, "answer_id": 44056415, "question_id": 44034678, "link": "https://stackoverflow.com/questions/44034678/c-tga-reading-fails/44056415#44056415", "title": "C++ TGA reading fails", "body": "<p>the second photo was writed in java, then open in photoshop. i found the mistake. as i was been thinking, i've got a wrong offset, but not in writing/reading process.</p>\n\n<p>into the upload to gpu: </p>\n\n<p>I had </p>\n\n<pre><code>glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB.....);\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA....);\n</code></pre>\n\n<p>because my pixel size is 4 (RGBA) not 3 (RGB).</p>\n"}], "owner": {"reputation": 495, "user_id": 5583881, "user_type": "registered", "profile_image": "https://graph.facebook.com/119342351764522/picture?type=large", "display_name": "Stoica Mircea", "link": "https://stackoverflow.com/users/5583881/stoica-mircea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 44056415, "answer_count": 1, "score": 0, "last_activity_date": 1508158606, "creation_date": 1495054756, "last_edit_date": 1508158556, "question_id": 44034678, "link": "https://stackoverflow.com/questions/44034678/c-tga-reading-fails", "title": "C++ TGA reading fails", "body": "<p>i'm using the java method below to write an android.graphics.Bitmap to tga, i've opened the photo in photoshop and it's allright. in native i have to load and display this image with opengl, but the loading of image is incorrect and i see incorrect colors on the screen, the c++ tga loader is below. anybody has any ideea what's the problem?</p>\n\n<p>java write tga method:</p>\n\n<pre><code>public static void writeTGA(Bitmap src, String path) throws IOException {\n\n    ByteBuffer buffer = ByteBuffer.allocate(src.getRowBytes() * src.getHeight());\n    src.copyPixelsToBuffer(buffer);\n    boolean alpha = src.hasAlpha();\n    byte[] data;\n\n    byte[] pixels = buffer.array();\n    if (pixels.length != src.getWidth() * src.getHeight() * (alpha ? 4 : 3))\n        throw new IllegalStateException();\n\n    data = new byte[pixels.length];\n\n    for(int i=0;i &lt; pixels.length; i += 4){// rgba -&gt; bgra\n        data[i] = pixels[i+2];\n        data[i+1] = pixels[i+1];\n        data[i+2] = pixels[i];\n        data[i+3] = pixels[i+3];\n    }\n\n    byte[] header = new byte[18];\n    header[2] = 2; // uncompressed, true-color image\n    header[12] = (byte) ((src.getWidth() &gt;&gt; 0) &amp; 0xFF);\n    header[13] = (byte) ((src.getWidth() &gt;&gt; 8) &amp; 0xFF);\n    header[14] = (byte) ((src.getHeight() &gt;&gt; 0) &amp; 0xFF);\n    header[15] = (byte) ((src.getHeight() &gt;&gt; 8) &amp; 0xFF);\n    header[16] = (byte) (alpha ? 32 : 24); // bits per pixel\n    header[17] = (byte) ((alpha ? 8 : 0) | (1 &lt;&lt; 4));\n\n    File file = new File(path);\n    RandomAccessFile raf = new RandomAccessFile(file, \"rw\");\n    raf.write(header);\n    raf.write(data);\n    raf.setLength(raf.getFilePointer()); // trim\n    raf.close();\n}\n</code></pre>\n\n<p>tga 18 bit header c++ :</p>\n\n<pre><code>typedef struct _tgaheader {\n    BYTE IDLength;        /* 00h  Size of Image ID field */\n    BYTE ColorMapType;    /* 01h  Color map type */\n    BYTE ImageType;       /* 02h  Image type code */\n    BYTE CMapStart[2];       /* 03h  Color map origin */\n    BYTE CMapLength[2];      /* 05h  Color map length */\n    BYTE CMapDepth;       /* 07h  Depth of color map entries */\n    WORD XOffset;         /* 08h  X origin of image */\n    WORD YOffset;         /* 0Ah  Y origin of image */\n    WORD Width;           /* 0Ch  Width of image */\n    WORD Height;          /* 0Eh  Height of image */\n    BYTE PixelDepth;      /* 10h  Image pixel size */\n    BYTE ImageDescriptor; /* 11h  Image descriptor byte */\n} TGAHEADER;\n</code></pre>\n\n<p>tga loader method:</p>\n\n<pre><code>void TgaFormat:: LoadImage(const char *path) {\n    FILE* filePtr = fopen(path, \"rb\");\n    long imageSize;\n    short pixel_size;\n    unsigned char colorSwap;\n\n    // Open the TGA file.\n    if( filePtr == NULL){\n        LOGI(\"cannot find Tga File!\");\n        return;\n    }\n    fread(&amp;file_header, 1, sizeof(TGAHEADER), filePtr);\n    short sz = sizeof(TGAHEADER);\n    // 2 (uncompressed RGB image), 3 (uncompressed black-and-white images).\n    if (file_header.ImageType != 2 ){\n        fclose(filePtr);\n        LOGI(\"this file is not a TGA!\");\n        return;\n    }\n\n    // Color mode -&gt; 3 = BGR, 4 = BGRA.\n    pixel_size = file_header.PixelDepth / 8;\n    imageSize = file_header.Width * file_header.Height * pixel_size;\n\n    m_rgba_data = (BYTE* )malloc( sizeof(BYTE) * imageSize );\n\n    if( fread(m_rgba_data, 1, imageSize, filePtr) != imageSize ) {\n        fclose(filePtr);\n        return ;\n    }\n    fclose(filePtr);\n\n    // Change from BGRA to RGBA so OpenGL can read the image data.\n    for (int imageIdx = 0; imageIdx &lt; imageSize; imageIdx += pixel_size) {\n        colorSwap = m_rgba_data[imageIdx];\n        m_rgba_data[imageIdx] = m_rgba_data[imageIdx + 2];\n        m_rgba_data[imageIdx + 2] = colorSwap;\n    }\n}\n</code></pre>\n\n<p>after reading the tga file in android native and rendered with opengles\n<img src=\"https://i.stack.imgur.com/AXeCj.png\" alt=\"\"></p>\n\n<p>the generated qr code into sdcard the opened with photoshop\n<img src=\"https://i.stack.imgur.com/9FgeK.jpg\" alt=\"\"></p>\n"}, {"tags": ["c++", "string", "qt", "label", "qt-creator"], "comments": [{"owner": {"reputation": 483, "user_id": 2141590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949aa1968da2bbd2a303e2c9269f359?s=128&d=identicon&r=PG", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/2141590/lorenz"}, "edited": false, "score": 0, "creation_date": 1495057631, "post_id": 44034656, "comment_id": 75097290, "body": "Have you checked if the slot is called using a debugger or a simple debug output? How do you make the connection? If the example code is from an UI file, maybe you have renamed &quot;pushButton&quot;, then the connection is broken..."}], "answers": [{"tags": [], "owner": {"reputation": 25, "user_id": 7553642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483d88e3655fec3572f40988e343173e?s=128&d=identicon&r=PG&f=1", "display_name": "Lynxy", "link": "https://stackoverflow.com/users/7553642/lynxy"}, "is_accepted": false, "score": 2, "last_activity_date": 1495055914, "creation_date": 1495055914, "answer_id": 44034960, "question_id": 44034656, "link": "https://stackoverflow.com/questions/44034656/how-to-clear-a-label-in-qt-creator/44034960#44034960", "title": "How to clear a label in qt creator", "body": "<p>Maybe you should try </p>\n\n<pre><code>void preventivi::on_pushButton_clicked()\n{\n    ui-&gt;TotaleFinestre-&gt;setText(\"\");\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 8027705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147ab8eba88d04fa399840af44fb31c8?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo Manoni", "link": "https://stackoverflow.com/users/8027705/lorenzo-manoni"}, "edited": false, "score": 0, "creation_date": 1495115400, "post_id": 44045351, "comment_id": 75124515, "body": "Can you be more specific?"}, {"owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "reply_to_user": {"reputation": 27, "user_id": 8027705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147ab8eba88d04fa399840af44fb31c8?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo Manoni", "link": "https://stackoverflow.com/users/8027705/lorenzo-manoni"}, "edited": false, "score": 0, "creation_date": 1495116938, "post_id": 44045351, "comment_id": 75125824, "body": "I have edited my answer to be more specific with a working example. However, i suggest you to read <a href=\"http://doc.qt.io/qt-5/signalsandslots.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/signalsandslots.html</a>"}], "tags": [], "owner": {"reputation": 1544, "user_id": 6475652, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/8d783a89da27c7d36c0935fc2af7b38e?s=128&d=identicon&r=PG&f=1", "display_name": "Fryz", "link": "https://stackoverflow.com/users/6475652/fryz"}, "is_accepted": true, "score": 1, "last_activity_date": 1495117720, "last_edit_date": 1495117720, "creation_date": 1495103567, "answer_id": 44045351, "question_id": 44034656, "link": "https://stackoverflow.com/questions/44034656/how-to-clear-a-label-in-qt-creator/44045351#44045351", "title": "How to clear a label in qt creator", "body": "<p>As QLabel define the slot <code>void QLabel::clear()</code>, you can also just connect this slot with the clicked() signal that will be emitted after a click on your pushButton, using the <code>QObject::connect</code> method : </p>\n\n<p><code>QObject::connect(pointer_to_your_pushButton, SIGNAL(clicked()), pointer_to_your_label, SLOT(clear()));</code></p>\n\n<p><strong>EDIT  :</strong> Here is a small example</p>\n\n<p>The UI is a QWidget that has a QLabel and a QPushButton. I did that with Qt Designer but it doesn't matter here.    </p>\n\n<pre><code>#include \"widget.h\"\n#include \"ui_widget.h\"\n\nWidget::Widget(QWidget *parent) :\n    QWidget(parent),\n    ui(new Ui::Widget)\n{\n    ui-&gt;setupUi(this);\n    QObject::connect(ui-&gt;pushButton, SIGNAL(clicked()), ui-&gt;label, SLOT(clear()));\n}\n\nWidget::~Widget()\n{\n    delete ui;\n}\n</code></pre>\n\n<p>You can even do that using \"Edit Signals/Slots\" inside Qt Designer and make the signal/slot connection between your widgets. ( you won't need to manually call the previous QObject::connect, as it will be done automatically inside the <code>Ui_Widget</code> class, generated by the uic)  </p>\n\n<p><a href=\"https://i.stack.imgur.com/ePXwg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ePXwg.png\" alt=\"enter image description here\"></a></p>\n\n<p>Or you can do all without Qt Designer, it's up to you. \nHope this helps.</p>\n"}], "owner": {"reputation": 27, "user_id": 8027705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/147ab8eba88d04fa399840af44fb31c8?s=128&d=identicon&r=PG&f=1", "display_name": "Lorenzo Manoni", "link": "https://stackoverflow.com/users/8027705/lorenzo-manoni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4833, "favorite_count": 0, "accepted_answer_id": 44045351, "answer_count": 2, "score": 1, "last_activity_date": 1495117720, "creation_date": 1495054641, "question_id": 44034656, "link": "https://stackoverflow.com/questions/44034656/how-to-clear-a-label-in-qt-creator", "title": "How to clear a label in qt creator", "body": "<p>this is the first time i write in this site, I'm trying approach me at Qt-creator but I've a problem:\nI want to delete the text of the label when the user click a button, i've tried some solution but without success</p>\n\n<p>this is the code:</p>\n\n<pre><code>struct finestra{\nfloat costo;\nint altezza;\nint larghezza;\nQString text;\nQString costoStr;\n};\n\nfloat Totale=0;\nfinestra vet[21];\nint i=1;\n\n//SOME CODE\n\n Totale+=vet[i].costo;\n vet[i].costoStr = QString::number(vet[i].costo);\n vet[i].text = vet[i-1].text + \"Finestra ad un anta bianca &lt;br&gt;\" + \"\u20ac\" + vet[i].costoStr +\"&lt;br&gt;\";\n ui-&gt;TotaleFinestre-&gt;setText(QString(vet[i].text));\n i++;\n</code></pre>\n\n<p>I've tried with this function:</p>\n\n<pre><code>void preventivi::on_pushButton_clicked()\n{\n   ui-&gt;TotaleFinestre-&gt;clear();\n}\n</code></pre>\n\n<p>if someone know how to do please answer,</p>\n\n<p><strong>thanks to all</strong> and sorry for my bad english.</p>\n"}, {"tags": ["c++", "unit-testing", "googletest", "gmock", "googlemock"], "comments": [{"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 1, "creation_date": 1585423631, "post_id": 44034633, "comment_id": 107755675, "body": "The accepted answer is wrong, with some right things about it. I&#39;ve commented under it to explain. Here&#39;s a more thorough and correct answer: <a href=\"https://stackoverflow.com/questions/44034633/google-mock-can-i-call-expect-call-multiple-times-on-same-mock-object/60905880#60905880\" title=\"google mock can i call expect call multiple times on same mock object\">stackoverflow.com/questions/44034633/&hellip;</a>"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1585591755, "post_id": 44034633, "comment_id": 107809096, "body": "Update: @luantkow has updated his answer and it looks good now. For additional insight beyond that see the super long answer I have posted here too."}], "answers": [{"comments": [{"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1585339403, "post_id": 44035118, "comment_id": 107734839, "body": "You should replace <code>EXPECT_CALL(mock, foo(4));</code> with <code>EXPECT_CALL(mock, foo(4)).Times(1);</code> to make it explicitly obvious that this <code>EXPECT_CALL</code> is setting the mocked function to be expected to be called once. You are letting the natural rules take over which implicitly set <code>.Times()</code> to <code>1</code>. See the paragraph here which begins with &quot;<a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/cheat_sheet.md#setting-expectations-expectcall\" rel=\"nofollow noreferrer\">If Times() is omitted, the cardinality is assumed to be</a>&quot;..."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1585361571, "post_id": 44035118, "comment_id": 107740081, "body": "You said: <b>In the following file the test <code>TheSameArgumentsGoingToFail</code> will fail as the second expectation will be matched twice and the first one will not be matched at all.</b> I downvoted this answer because this misattributes the fact that you have <code>EXPECT_CALL(mock, foo(4));</code> twice as the reason it will fail. This is <i>not</i> true. It <i>is</i> true that &quot;the second expectation will be matched twice &amp; the first one will not be matched at all,&quot; however. The real reason is that if you don&#39;t specify the <code>.Times()</code> number, gmock uses the rules in my comment above to assume it, &amp; in this case it is 1."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1585361690, "post_id": 44035118, "comment_id": 107740102, "body": "So, the first <code>EXPECT_CALL(mock, foo(4));</code> is ignored, and only the 2nd one is used, but the 2nd one doesn&#39;t specify the <code>.Times()</code> value, so gmock assumes it to be 1 in this case, following the rules in the link in my comment above, and then when you call <code>mock.foo(4)</code> the 2nd time, it violates the <code>.Times(1)</code> specifier, and then the test fails. <i>That&#39;s</i> why it fails. If you fix your answer I&#39;ll remove the downvote."}, {"owner": {"reputation": 1999, "user_id": 3188346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fbdb414d9dcf1e2a79fe37eb16aec9?s=128&d=identicon&r=PG&f=1", "display_name": "luantkow", "link": "https://stackoverflow.com/users/3188346/luantkow"}, "reply_to_user": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1585475936, "post_id": 44035118, "comment_id": 107766765, "body": "@GabrielStaples: Do I understand correctly that you downvoted my answer because I havn&#39;t explicitly used <code>Times</code> in my examples, while being aware that assuming 1 (which was my intent) is documented behavior? I&#39;ve edited my answer, as: it does not change my answer at all; it seemed to be important for you and <code>explicit is better than implicit</code>. Still, I consider downvoting my answer due to that as nitpicking."}, {"owner": {"reputation": 1999, "user_id": 3188346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fbdb414d9dcf1e2a79fe37eb16aec9?s=128&d=identicon&r=PG&f=1", "display_name": "luantkow", "link": "https://stackoverflow.com/users/3188346/luantkow"}, "reply_to_user": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 1, "creation_date": 1585507150, "post_id": 44035118, "comment_id": 107777766, "body": "I&#39;ve read the section you mentioned several times and it did not helped me understand what exactly is wrong with my answer. The code example that shows the mistake could be very helpful here. I am quite confident that I may present a code that proves your understanding is not sound, check the &#39;theTestWillFailWhenOnlyLastExpectancyWasSatisfied&#39; in <a href=\"https://gist.github.com/lukant/376df8c49a3aba8179879fadcea77dea\" rel=\"nofollow noreferrer\">gist.github.com/lukant/376df8c49a3aba8179879fadcea77dea</a> with regard to &#39;only the last one set will have any effect&#39;. If you believe that you can improve my answer and you are certain that your understanding is correct, feel free to do so."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1585546572, "post_id": 44035118, "comment_id": 107787373, "body": "I&#39;ve edited your answer &amp; upvoted it. I was missing your point and so I had to make more changes than anticipated. I fully see your point now as your point is 100% correct, though. I still think you were missing my point, but it is now stated clearly in your answer (assuming you leave my edit intact) as <code>2. Because Times(1) expects one call but mock.foo(4) is called twice.</code> In case anyone wants to play with this, I&#39;ve created this project here to tinker with: <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_gtest_practice\" rel=\"nofollow noreferrer\">github.com/ElectricRCAircraftGuy/eRCaGuy_gtest_practice</a>. Watching the test errors and output really helped me figure it all out."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1585591495, "post_id": 44035118, "comment_id": 107808976, "body": "Your latest changes are good. Upvoted. There was a brief downvote I did between you removing my edit and you adding your latest changes, but your latest changes look good, and are exactly in accordance with my observations and testing as well. I agree with your answer. Thanks. The only part I haven&#39;t verified are your last 4 tests at the very bottom, which you are saying will all <i>pass</i>, correct?"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "edited": false, "score": 0, "creation_date": 1585639956, "post_id": 44035118, "comment_id": 107824067, "body": "I just tested all 4 of the <code>TEST()</code>s at the bottom of your answer. They all pass. Thanks for adding those. They are a very useful starting point for learning about those concepts. For anyone else who wants to try running any of these tests too, here&#39;s my project: <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_gtest_practice\" rel=\"nofollow noreferrer\">eRCaGuy_gtest_practice</a>. Test the last 4 tests of this answer with this command: <code>time bazel test --test_output=all --test_arg=--gtest_color=yes &#47;&#47;:gmock_test3</code>."}], "tags": [], "owner": {"reputation": 1999, "user_id": 3188346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fbdb414d9dcf1e2a79fe37eb16aec9?s=128&d=identicon&r=PG&f=1", "display_name": "luantkow", "link": "https://stackoverflow.com/users/3188346/luantkow"}, "is_accepted": true, "score": 17, "last_activity_date": 1585590746, "last_edit_date": 1585590746, "creation_date": 1495056771, "answer_id": 44035118, "question_id": 44034633, "link": "https://stackoverflow.com/questions/44034633/google-mock-can-i-call-expect-call-multiple-times-on-same-mock-object/44035118#44035118", "title": "google mock - can I call EXPECT_CALL multiple times on same mock object?", "body": "<p>Yes, you can call <code>EXPECT_CALL</code> on the same mock object multiple times. As long as you assure that all <code>EXPECT_CALL</code> were called before the mocked methods were actually used. Otherwise your test will rely on undefined behavior. From <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#using-mocks-in-tests\" rel=\"noreferrer\">ForDummies</a>:</p>\n\n<blockquote>\n  <p>Important note: gMock requires expectations to be set before the mock functions are called, otherwise the behavior is undefined. In particular, you mustn't interleave EXPECT_CALL()s and calls to the mock functions.</p>\n</blockquote>\n\n<p>How multiple calls will be handled? The documentation is really straightforward. From <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#using-multiple-expectations-multiexpectations\" rel=\"noreferrer\">ForDummies</a>:</p>\n\n<blockquote>\n  <p>By default, when a mock method is invoked, Google Mock will search the\n  expectations in the reverse order they are defined, and stop when an\n  active expectation that matches the arguments is found (you can think\n  of it as \"newer rules override older ones.\").</p>\n</blockquote>\n\n<p>Let's consider what this means for the gMock user, by checking some examples. I assume that we have a file with following header:</p>\n\n<pre><code>#include &lt;gmock/gmock.h&gt;\n\nusing namespace ::testing;\n\nstruct SomeMock\n{\n    MOCK_CONST_METHOD1(foo, void(int));\n};\n</code></pre>\n\n<p>The simplest example of passing test that calls <code>EXPECT_CALL</code> multiple times:</p>\n\n<pre><code>TEST(Examples, DifferentArgumentsGoingToBeOk)\n{\n    SomeMock mock;\n\n    EXPECT_CALL(mock, foo(4)).Times(1); // exp#1\n    EXPECT_CALL(mock, foo(5)).Times(1); // exp#2\n\n    mock.foo(4); // call#1\n    mock.foo(5); // call#2\n}\n</code></pre>\n\n<p>The tests works intuitively:</p>\n\n<ul>\n<li><code>call#1</code> does not match with <code>exp#2</code> so <code>exp#1</code> is tried and matches.</li>\n<li><code>call#2</code> matches with <code>exp#2</code>.</li>\n</ul>\n\n<p>Both calls matched exactly once, thus they are considered satisfied and the test passes.</p>\n\n<p>The tricky part starts when multiple <code>EXPECT_CALL</code> are able to match the call. Let's consider the following example:</p>\n\n<pre><code>TEST(Examples, TheSameArgumentsGoingToFail) // Test fails!\n{\n    SomeMock mock;\n\n    EXPECT_CALL(mock, foo(4)).Times(1); //exp#1\n    EXPECT_CALL(mock, foo(4)).Times(1); //exp#2\n\n    mock.foo(4); // call#1\n    mock.foo(4); // call#2\n}\n</code></pre>\n\n<ul>\n<li>The <code>call#1</code> matches the <code>exp#2</code>. gMock stops at first matched expectation, it won't check the <code>exp#1</code> at all.</li>\n<li>The <code>call#2</code> matches the <code>exp#2</code>. Again the <code>exp#1</code> does not have chance to be matched.</li>\n</ul>\n\n<p>As a result the test fails as the <code>exp#2</code> gets matched twice instead of once and <code>exp#1</code> is not matched at all. All that is printed in the test output:</p>\n\n<pre><code>/tmp/so/main.cpp:26: Failure // exp#2\nMock function called more times than expected - returning directly.\n    Function call: foo(4)\n         Expected: to be called once\n           Actual: called twice - over-saturated and active\n/tmp/so/main.cpp:25: Failure // exp#1\nActual function call count doesn't match EXPECT_CALL(mock, foo(4))...\n         Expected: to be called once\n           Actual: never called - unsatisfied and active\n</code></pre>\n\n<p>Also, it is important, that adding new expectancy won't disable or remove old ones. They are still able to fail your test!</p>\n\n<pre><code>TEST(Examples, NewExpectCallDoesNotEraseThePreviousOne) // Test fails!\n{\n    SomeMock mock;\n\n    EXPECT_CALL(mock, foo(4)).Times(1); // exp#1\n    EXPECT_CALL(mock, foo(4)).Times(2); // exp#2\n\n    mock.foo(4); // call#1\n    mock.foo(4); // call#2\n}\n</code></pre>\n\n<p>Both <code>call#1</code> and <code>call#2</code> matches the <code>exp#2</code>. As a result the <code>exp#2</code> is satisfied, but the test will fail as <code>exp#1</code> was not matched enough times.</p>\n\n<p>If for some reason, you need to write a test like <code>TheSameArgumentsGoingToFail</code>, you can use a number of techniques to prevent <code>exp#2</code> from matching second time. Please refer to the documentation <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#ordered-vs-unordered-calls-orderedcalls\" rel=\"noreferrer\">InSequence usage</a>, <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#all-expectations-are-sticky-unless-said-otherwise-stickyexpectations\" rel=\"noreferrer\">RetiresOnSaturation</a>:</p>\n\n<pre><code>TEST(Examples, InSequenceExample)\n{\n    SomeMock mock;\n\n    Sequence seq;\n\n    EXPECT_CALL(mock, foo(4)).Times(1).InSequence(seq); //exp#1\n    EXPECT_CALL(mock, foo(4)).Times(1).InSequence(seq); //exp#2\n\n    mock.foo(4); // call#1\n    mock.foo(4); // call#2\n}\n\nTEST(Examples, InSequenceExampleSecondApproach)\n{\n    SomeMock mock;\n\n    InSequence seq;\n\n    EXPECT_CALL(mock, foo(4)).Times(1); //exp#1\n    EXPECT_CALL(mock, foo(4)).Times(1); //exp#2\n\n    mock.foo(4); // call#1\n    mock.foo(4); // call#2\n}\n\nTEST(Examples, RetiresOnSaturationExample)\n{\n    SomeMock mock;\n\n    EXPECT_CALL(mock, foo(4)).Times(1); //exp#1\n    EXPECT_CALL(mock, foo(4)).Times(1).RetiresOnSaturation(); //exp#2\n\n    mock.foo(4); // call#1\n    mock.foo(4); // call#2\n}\n\nTEST(Examples, AfterExample)\n{\n    SomeMock mock;\n\n    auto&amp; exp1 = EXPECT_CALL(mock, foo(4)).Times(1); //exp#1\n    EXPECT_CALL(mock, foo(4)).Times(1).After(exp1); //exp#2\n\n    mock.foo(4); // call#1\n    mock.foo(4); // call#2\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11713, "user_id": 43534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6b36958661c789010d95b27325154828?s=128&d=identicon&r=PG", "display_name": "Miral", "link": "https://stackoverflow.com/users/43534/miral"}, "is_accepted": false, "score": 3, "last_activity_date": 1583879638, "creation_date": 1583879638, "answer_id": 60626840, "question_id": 44034633, "link": "https://stackoverflow.com/questions/44034633/google-mock-can-i-call-expect-call-multiple-times-on-same-mock-object/60626840#60626840", "title": "google mock - can I call EXPECT_CALL multiple times on same mock object?", "body": "<p>Another useful technique (which is also shown in the For Dummies guide) is to only write one <code>EXPECT_CALL</code> but chain off multiple sets of actions indicating the expected results.  For example:</p>\n\n<pre><code>SomeMock mock;\n\nEXPECT_CALL(mock, foo(4))\n    .WillOnce(Return(16))\n    .WillOnce(Return(42))\n    .WillOnce(Throw(MyException()));\n</code></pre>\n\n<p>This expects three calls to the method with the same parameters, and will return the specified values the first two times and then throw an exception on the third call.</p>\n\n<p>This is often easier to understand than using multiple <code>EXPECT_CALL</code> and <code>RetiresOnSaturation</code> or other techniques.</p>\n\n<p>You can use this with void methods as well; you just need to use <code>DoDefault</code> or some more interesting action in place of <code>Return</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1585444100, "post_id": 60905880, "comment_id": 107761160, "body": "Those &quot;todo&quot; mean you haven&#39;t finished writing the answer yet?"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1585445584, "post_id": 60905880, "comment_id": 107761396, "body": "Yes, got interrupted by kids. Will come back to it later--hopefully tonight."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1585459651, "post_id": 60905880, "comment_id": 107763405, "body": "@FabiosaysReinstateMonica, done! I&#39;ve just added 3 large examples to the bottom of my answer and fulfilled all <code>todo</code>s. If you find this answer useful, I&#39;d appreciate an upvote. Thanks. This has been a ton of learning for me."}, {"owner": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1585527387, "post_id": 60905880, "comment_id": 107783616, "body": "Absolutely, it&#39;s an awesome answer! You&#39;ve also shown me that I&#39;ve been using multiple EXPECT_CALLs in a wrong way. I&#39;m not sure this should be a standalone intro, but it should definitely be integrated in the official docs. I&#39;ve created a GitHub account just to vote for it. Thanks a lot!"}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1585548372, "post_id": 60905880, "comment_id": 107787808, "body": "After playing around a lot today in my <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_gtest_practice\" rel=\"nofollow noreferrer\">sandbox test project here</a>, I&#39;ve discovered some glaring things that are wrong in my answer. I&#39;m going to fix them ASAP--the biggest one being my claim that you can have infinite <code>EXPECT_CALL</code>s with the same matchers. This is wrong. Any more than one per matcher throws test errors &amp; always fails the tests, since earlier <code>EXPECT_CALL</code>s expect to have calls, but never get them since the later matching <code>EXPECT_CALL</code>s always match instead. I&#39;ve also edited @luantkow&#39;s answer to make this clear."}, {"owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "reply_to_user": {"reputation": 3761, "user_id": 3982001, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Fabio says Reinstate Monica", "link": "https://stackoverflow.com/users/3982001/fabio-says-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1585552694, "post_id": 60905880, "comment_id": 107789375, "body": "My answer is all fixed and correct now! My main changes were in my Rule #3 of &quot;The 3 rules of multiple EXPECT_CALLs on the same mock object&quot;. There were some more subtleties going on there that I had to test repeatedly and  observe using <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_gtest_practice\" rel=\"nofollow noreferrer\">my test project here</a>."}, {"owner": {"reputation": 712, "user_id": 590059, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b49af88b670d65ffc9ecfe883c42c457?s=128&d=identicon&r=PG", "display_name": "Thirlan", "link": "https://stackoverflow.com/users/590059/thirlan"}, "edited": false, "score": 1, "creation_date": 1594148617, "post_id": 60905880, "comment_id": 111023619, "body": "This question answered our problems"}], "tags": [], "owner": {"reputation": 11050, "user_id": 4561887, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1ecb6a74fca21551bd8157504ad47faf?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Staples", "link": "https://stackoverflow.com/users/4561887/gabriel-staples"}, "is_accepted": false, "score": 13, "last_activity_date": 1588014730, "last_edit_date": 1588014730, "creation_date": 1585423568, "answer_id": 60905880, "question_id": 44034633, "link": "https://stackoverflow.com/questions/44034633/google-mock-can-i-call-expect-call-multiple-times-on-same-mock-object/60905880#60905880", "title": "google mock - can I call EXPECT_CALL multiple times on same mock object?", "body": "<p><em>All of the below code was tested with Googletest/Googlemock <a href=\"https://github.com/google/googletest/releases\" rel=\"noreferrer\">v1.10.0</a>, which was released 3 Oct. 2019.</em></p>\n\n<p>If you'd like to run tests for yourself but don't have googletest or googlemock set up on your system, <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_gtest_practice\" rel=\"noreferrer\">here's a bare-bones project I created</a> to get it up and running quickly on Ubuntu. Go clone it and play with it yourself. It may act as a starting point to help you get it running on Mac or Windows as well.</p>\n\n<p>This is a really important question, so I feel compelled to have a hack at it. </p>\n\n<h2>The nuances:</h2>\n\n<p>Let me start by saying that Google Mock (gmock) is <em>nuanced</em>. That means there are lots of subtleties to understand, and this is difficult. Even the documentation is a bit scattered, and you kind of need to carefully read and study <em>it all</em> to really grasp some or even most of these nuances, since they don't do a good job of repeating certain important points in each of the documents. So, here is all of the official documentation: if you're doing this for work, tell your supervisor you are going to set aside several days to carefully go through the gtest and gmock documentation and to practice examples to get a strong grasp on it. </p>\n\n<h2>The documentation:</h2>\n\n<p><em>As you read and study the below documentation, save each one as (print it to) a PDF, then use <a href=\"https://www.foxitsoftware.com/pdf-reader/\" rel=\"noreferrer\">Foxit Reader</a> for free on Windows, Mac, or Linux, to edit, take notes in, and highlight or underline the PDF as you go. This way you have notes of the most important things you need to remember. See my <code>*_GS_edit.pdf</code> PDFs <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/tree/master/googletest/gtest\" rel=\"noreferrer\">here</a> and <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_dotfiles/tree/master/googletest/gmock\" rel=\"noreferrer\">here</a> for examples of taking notes and marking up PDFs that I have done as I've learned Google Test and Google Mock.</em></p>\n\n<p><strong>Official Google Documentation:</strong></p>\n\n<ol>\n<li>gtest: it's all in this folder: <a href=\"https://github.com/google/googletest/tree/master/googletest/docs\" rel=\"noreferrer\">https://github.com/google/googletest/tree/master/googletest/docs</a>. The key documents to study, in this order probably, are the:\n\n<ol>\n<li><strong>primer</strong></li>\n<li><strong>FAQ</strong></li>\n<li><strong>samples</strong> (look at and carefully study the source code for <em>at least</em> the first 3 samples)</li>\n<li>advanced</li>\n</ol></li>\n<li>gmock: it's all in this folder: <a href=\"https://github.com/google/googletest/tree/master/googlemock/docs\" rel=\"noreferrer\">https://github.com/google/googletest/tree/master/googlemock/docs</a>. The key documents to study, in this order probably, are the:\n\n<ol>\n<li><strong>for dummies</strong></li>\n<li><strong>cook book</strong></li>\n<li><strong>cheat sheet</strong> - this is the best one-stop-shop or \"summary of gmock rules\" of all of the docs, but lacks some things that are even spelled out explicitly in (and only in) the \"for dummies\" manual that you will need in addition to this doc.</li>\n<li><strong>FAQ</strong></li>\n<li><strong>for dummies</strong> &lt;-- yes, AGAIN! AFTER doing and attempting to write a bunch of tests and mocks, then <em>come back</em> and re-read this document again! It will make sooo much more sense the 2nd time around after putting gtest and gmock principles into practice yourself first.</li>\n</ol></li>\n</ol>\n\n<h2>Some subtle rules to remember in general:</h2>\n\n<ol>\n<li>\"Remember that the test order is undefined, so your code can't depend on a test preceding or following another\" (<a href=\"https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#sharing-resources-between-tests-in-the-same-test-suite\" rel=\"noreferrer\">https://github.com/google/googletest/blob/master/googletest/docs/advanced.md#sharing-resources-between-tests-in-the-same-test-suite</a>).</li>\n<li>\"<strong>Important note:</strong> gMock requires expectations to be set <strong>before</strong> the mock functions are called, otherwise the behavior is <strong>undefined</strong>. In particular, you mustn't interleave <code>EXPECT_CALL()</code>s and calls to the mock functions\" (<a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#using-mocks-in-tests\" rel=\"noreferrer\">https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#using-mocks-in-tests</a>)</li>\n</ol>\n\n<hr>\n\n<h2>The answers:</h2>\n\n<h3>Question 1: \"If I call <code>EXPECT_CALL</code> twice on the same mock object in the same <code>TEST_F</code> . . . what happens?\"</h3>\n\n<p>A: First off, whether your're using the <code>TEST()</code> macro or the <code>TEST_F()</code> macro in this case makes no difference. The <code>TEST()</code> macro simply expands into a class which publicly inherits from the <code>::testing::Test</code> class, and the <code>TEST_F()</code> macro simply expands into a class which inherits from your test fixture class (the first parameter to <code>TEST_F()</code>), which must publicly inherit from the <code>::testing::Test</code> class.</p>\n\n<p>Many <code>EXPECT_CALL</code>s can be called on the same mock object (mock class), from general to specific, as follows:</p>\n\n<p><strong>The 3 rules of multiple <code>EXPECT_CALL</code>s on the same mock object:</strong><br>\nFrom most generic --> most specific (AKA: \"outer\" --> \"inner\" scope).  </p>\n\n<ol>\n<li><strong>You can have <em>at least</em> one <code>EXPECT_CALL</code> per mock method:</strong> One mock class can have many mocked methods, so each method may have one or more <code>EXPECT_CALL</code>s configuring the expected interaction with that method. Therefore, a mock class can have <em>at least</em> one <code>EXPECT_CALL</code> per method.</li>\n<li><p><strong>You <em>shouldn't have more than one</em> <code>EXPECT_CALL</code> per matcher signature on a single mock method:</strong> (Read more on this in Rule 3 below). Each mock method has many different parameter <em>values</em> that can be passed in, so you can have <em>up to</em> one <code>EXPECT_CALL</code> per matcher signature (possible parameter value or combination of values, in the event of multiple input parameters). This means each mock method can have potentially many <em>thousands</em> or even <em>millions or billions</em> of <em>valid and unique</em> <code>EXPECT_CALL</code>s attached to it, each matching a different set of \"matchers\", or input parameters to the mocked method. For example, this is perfectly valid:</p>\n\n<pre><code>// Each `EXPECT_CALL()` in this example has a different and \n// unique \"matcher\" signature, so every `EXPECT_CALL()` will\n// take effect for its matching parameter signature when\n// `myMockMethod()` is called.\n//                                    v--matchers\nEXPECT_CALL(myMockClass, myMockMethod(1));\nEXPECT_CALL(myMockClass, myMockMethod(2));\nEXPECT_CALL(myMockClass, myMockMethod(3));\nEXPECT_CALL(myMockClass, myMockMethod(4));\nEXPECT_CALL(myMockClass, myMockMethod(5));\n...\nEXPECT_CALL(myMockClass, myMockMethod(1000));\n</code></pre>\n\n<p>In particular, the above <code>EXPECT_CALL</code>s each specify that a call to <code>myMockMethod()</code> with that matching signature must occur <em>exactly 1 time</em>. That's because the <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#cardinalities-how-many-times-will-it-be-called\" rel=\"noreferrer\">cardinality rules</a> in this case dictate than an implicit <code>.Times(1)</code> is present on each of those <code>EXPECT_CALL</code>s, even though you don't see it written.  </p>\n\n<p>To specify that you want a given <code>EXPECT_CALL</code> to mach <em>any</em> input value for a given parameter, use the <code>::testing::_</code> matcher, like this:</p>\n\n<pre><code>using ::testing::_;\n\nEXPECT_CALL(myMockClass, myMockMethod(_));\n</code></pre></li>\n<li><p><strong>Don't have <em>duplicate <code>EXPECT_CALL</code>s with the same matcher signature</em> on the same mock method, but <em>multiple</em> <code>EXPECT_CALL</code>s with <em>overlapping/overriding</em> (but NOT duplicate) matcher signatures on the same mock method are OK:</strong> If you attach more than one <code>EXPECT_CALL</code> to the same <em>matching values</em>, only <em>the last one set</em> will have any effect. See <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#using-multiple-expectations-multiexpectations\" rel=\"noreferrer\">here</a>, <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#all-expectations-are-sticky-unless-said-otherwise-stickyexpectations\" rel=\"noreferrer\">here</a>, and <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/cook_book.md#performing-different-actions-based-on-the-arguments\" rel=\"noreferrer\">here</a>, for instance. This means if you have two or more <code>EXPECT_CALL</code>s with duplicate matcher signatures (the same parameters passed to the mock method), then ONLY THE LAST ONE WILL EVER GET ANY CALLS.</p>\n\n<p>Therefore, your test will ALWAYS FAIL except in the unusual case that all <code>EXPECT_CALL</code>s except the last one have a <code>.Times(0)</code> value, specifying that they will <em>never</em> be called, as indeed this is the case: the last <code>EXPECT_CALL</code> will match all of the calls for these matchers and all duplicate <code>EXPECT_CALL</code>s above it will have <em>no</em> matching calls! Here is an example of a test which will <strong>always fail</strong> as a result of this behavior. This is the main behavior that @luantkow focuses on <a href=\"https://stackoverflow.com/a/44035118/4561887\">in his answer here</a>.</p>\n\n<pre><code>using ::testing::_;\n\n// Notice they all have the same mock method parameter \"matchers\"\n// here, making only the last `EXPECT_CALL()` with this matcher\n// signature actually match and get called. Therefore, THIS TEST\n// WILL ***ALWAYS FAIL***, since EXPECT_CALL #1 expects to get \n// called 1 time but is NEVER called, #2 through #1006, inclusive,\n// all expect to get called 2 times each but all of them are NEVER\n// called, etc.! Only #1007 is ever called, since it is last and\n// therefore always matches first.          \n//                                    v--matchers\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(1); // EXPECT_CALL #1\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(2); // EXPECT_CALL #2\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(2); // EXPECT_CALL #3\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(2); // EXPECT_CALL #4\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(2); // EXPECT_CALL #5\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(2); // EXPECT_CALL #6\n// ... duplicate the line just above 1000 more times here\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(3); // EXPECT_CALL #1007\n</code></pre>\n\n<p>This weird exception, however, makes the test valid simply by setting all duplicate <code>EXPECT_CALL</code>s, <em>except for the last one</em>, to have a <code>.Times(0)</code> cardinal setting:</p>\n\n<pre><code>using ::testing::_;\n\n// Notice they all have the same mock method parameter \"matchers\"\n// here, making only the last `EXPECT_CALL()` with this matcher\n// signature actually match and get called. However, since all previous\n// `EXCEPT_CALL` duplicates are set to `.Times(0)`, this test is valid\n// and can pass.          \n//                                    v--matchers\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(0); // EXPECT_CALL #1\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(0); // EXPECT_CALL #2\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(0); // EXPECT_CALL #3\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(0); // EXPECT_CALL #4\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(0); // EXPECT_CALL #5\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(0); // EXPECT_CALL #6\n// ... duplicate the line just above 1000 more times here\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(3); // EXPECT_CALL #1007\n</code></pre>\n\n<p>Here, only <code>EXPECT_CALL</code> #1007 (the very last <code>EXPECT_CALL</code>) will ever match a call to <code>myMockMethod()</code>, and <code>Times(3)</code> will be in effect. Since all duplicate <code>EXPECT_CALL</code>s above this one will NEVER MATCH AND GET CALLED, since they are never reached, tests with duplicate <code>EXPECT_CALL</code>s for a given matcher would ALWAYS FAIL for any <code>.Times()</code> value other than <code>.Times(0)</code> for all non-last-place duplicate <code>EXPECT_CALL</code>s. </p>\n\n<p>This effect of making later matchers have the ability to override earlier matchers is <em>intentional</em> and part of the Googlemock design, as it allows you to create a very useful kind of hierarchy of expected calls, based on value passed to the mock method, like this:</p>\n\n<pre><code>using ::testing::_;\n\n// Most general matchers first (_ matches any input value)\nEXPECT_CALL(myMockClass, myMockMethod(_)).Times(1);\n// More specific matchers next, to override the more general matcher \n// above if they match\nEXPECT_CALL(myMockClass, myMockMethod(7)).Times(2);\nEXPECT_CALL(myMockClass, myMockMethod(5)).Times(4);\n</code></pre>\n\n<p>The various google documents say that matching <code>EXPECT_CALL</code>s are searched for in <em>reverse order</em>, from <em>bottom to top</em>. So, if <code>myMockMethod(8)</code> is called, it will be checked against the last <code>EXPECT_CALL</code> for this method, which is looking for <code>myMockMethod(5)</code>. That doesn't match, so it goes up one and checks against <code>myMockMethod(7)</code>. That doesn't match, so it goes up one and checks against <code>myMockMethod(_)</code>. This matches! So, it counts as the one call authorized by the <code>Times(1)</code> cardinal value. </p>\n\n<p>So, what you've defined above is this: we expect <code>myMockMethod(5)</code> to be called 4 times, <code>myMockMethod(7)</code> to be called 2 times, and <code>myMockMethod(anything_other_than_5_or_7)</code> to be called 1 time. For more reading on this topic, see my other answer here: <a href=\"https://stackoverflow.com/questions/44249293/google-mock-how-to-say-function-must-be-called-once-with-a-certain-parameter/60896373#60896373\">google mock - how to say &quot;function must be called ONCE with a certain parameter but ok to be called many times with different parameters&quot;?</a>.</p></li>\n</ol>\n\n<p><strong>Key summary:</strong> the main point to remember regarding the question \"Can I call <code>EXPECT_CALL</code> multiple times on same mock object?\", is this: you can only call <code>EXPECT_CALL</code> multiple times on the same mock object <em>and method</em> if the matchers (arguments specified to be passed to the mocked method) are <em>different</em> for each <code>EXPECT_CALL</code>. That is, of course, unless you set <code>.Times(0)</code> on all but the last duplicate <code>EXPECT_CALL</code>, which makes them useless, so just remember instead to not have duplicate <code>EXPECT_CALL</code>s with the same matchers.</p>\n\n<p>That fully answers this question. </p>\n\n<hr>\n\n<h3>Question 2: \"Are the expectations appended to the mock object or does the second call erase the effects of the first call?\"</h3>\n\n<p>The above description answers this question as well. Essentially, the <code>EXPECT_CALL</code> expectations do NOT override the effects of any <code>EXPECT_CALL</code>s before them, <strong>unless</strong> the matchers (values specified to be passed to the mock methods) are identical or overlapping, in which case only the <em>last</em> <code>EXPECT_CALL</code> will ever get called at all, as it is always reached before the others in the matching sequence. Therefore, don't have duplicate <code>EXPECT_CALL</code>s with the same matchers on a given mocked method or else you could be inadvertently forcing the test to <em>always fail</em>, since the above <code>EXPECT_CALL</code>s will never get called. This is discussed at length in Question 1 above.</p>\n\n<p>Again, for more reading on this topic, read above, and see my other answer here: <a href=\"https://stackoverflow.com/questions/44249293/google-mock-how-to-say-function-must-be-called-once-with-a-certain-parameter/60896373#60896373\">google mock - how to say &quot;function must be called ONCE with a certain parameter but ok to be called many times with different parameters&quot;?</a>.</p>\n\n<hr>\n\n<h3>Question 3: Can I call <code>EXPECT_CALL</code> to set some expectations on a mock method, call the mock method, then call <code>EXPECT_CALL</code> on the method again to change the expectations, then call the mock method again?</h3>\n\n<p>This question wasn't even <em>explicitly</em> asked by the OP, but the only reason I found this page is because I was searching for this answer for many hours and couldn't find it. My Google search was \"<a href=\"https://www.google.com/search?sxsrf=ALeKk00e6UHbLaPL3B5-042GF9KQRt9QhA%3A1585335955965&amp;ei=k05-Xq7LOri10PEPwL-ciA8&amp;q=gmock%20multiple%20expect_call&amp;oq=gmock%20multiple%20&amp;gs_l=psy-ab.3.1.0l3j0i22i30l7.2786111.2787311..2789283...0.4..0.305.1339.0j8j0j1......0....1..gws-wiz.......0i71.e3x6IuEQpb0\" rel=\"noreferrer\">gmock multiple expect_call</a>.\" Therefore, others asking this question will also fall on this page and need a conclusive answer. </p>\n\n<p>A: NO, you can NOT do this! Although it may <em>seem to work in testing</em>, according to Google, it produces <em>undefined behavior</em>. See general rule #2 above!</p>\n\n<blockquote>\n  <p>\"<strong>Important note:</strong> gMock requires expectations to be set <strong>before</strong> the mock functions are called, otherwise the behavior is <strong>undefined</strong>. In particular, you mustn't interleave <code>EXPECT_CALL()</code>s and calls to the mock functions\" (<a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#using-mocks-in-tests\" rel=\"noreferrer\">https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#using-mocks-in-tests</a>)</p>\n</blockquote>\n\n<p>Therefore, this is NOT ALLOWED!</p>\n\n<pre><code>// EXAMPLE OF A BAD TEST THAT MAY SEEM TO WORK BUT IS RELYING ON *UNDEFINED* BEHAVIOR!\n// The goal is to ensure that `myMockMethod()` is only called 2x the first time by \n// `myOtherFunc()`, 3x the second time, and 0x the last time.\n\n// Google states: \"**Important note:** gMock requires expectations to be set \n// **before** the mock functions are called, otherwise the behavior is **undefined**. \n// In particular, you mustn't interleave `EXPECT_CALL()`s and calls to the mock functions\"\n// (https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#using-mocks-in-tests)\n\nusing ::testing::_;\n\nTEST_F(MyTestFixture, MyCustomTest) \n{\n    // `myMockMethod()` should be called only 2x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    EXPECT_CALL(MyMockClass, myMockMethod(_, _))\n        .Times(2);\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n    }\n\n    // UNDEFINED BEHAVIOR BEGINS HERE: you can't interleave calls to `EXPECT_CALL` with \n    // calls to the mocked functions (in this case: `myMockMethod()`,\n    // which is called by `myOtherFunc()`).\n\n    // THEN `myMockMethod()` should be called 3x here by `myOtherFunc()`\n    EXPECT_CALL(MyMockClass, myMockMethod(_, _))\n        .Times(3);\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n    }\n\n    // LAST, `myMockMethod()` should be called 0x here by `myOtherFunc()`\n    EXPECT_CALL(MyMockClass, myMockMethod(_, _))\n        .Times(0);\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n    }\n}\n</code></pre>\n\n<p>So, what's a valid solution here? Well, if you can break this test up into 3 different, independent tests, just do that! But, what if these 3 tests are interconnected in such a way you cannot separate them? Example: you are trying to test a throttling function which throttles print output to only once per second, for instance, even if you try to print more often that that per second. Well, in this case there are some work-arounds. </p>\n\n<p>First, let's review: per the <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/cheat_sheet.md#setting-expectations-expectcall\" rel=\"noreferrer\">Google Mock Cheat Sheet</a>, here are the ways to configure an <code>EXPECT_CALL()</code>:</p>\n\n<pre><code>EXPECT_CALL(mock-object, method (matchers)?)\n     .With(multi-argument-matcher)  ?\n     .Times(cardinality)            ?\n     .InSequence(sequences)         *\n     .After(expectations)           *\n     .WillOnce(action)              *\n     .WillRepeatedly(action)        ?\n     .RetiresOnSaturation();        ?\n</code></pre>\n\n<blockquote>\n  <p>For each item above, <code>?</code> means it can be used at most once, while <code>*</code> means it can be used any number of times.</p>\n</blockquote>\n\n<p>We need to use the <code>.WillRepeatedly(action)</code> option with an <code>action</code> which <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/cheat_sheet.md#side-effects\" rel=\"noreferrer\">produces side effects</a> or <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/cheat_sheet.md#using-a-function-functor-or-lambda-as-an-action\" rel=\"noreferrer\">calls a function, functor, or lambda</a> as an action.</p>\n\n<p>Here are some work-arounds to safely and correctly perform the above test which had undefined behavior. <em>If you want to see the best approach first, just jump straight down to #3 below:</em></p>\n\n<ol>\n<li><p><strong>Use <code>Assign(&amp;variable, value)</code>.</strong> In this particular case, this is a bit hacky, but it does work properly. For a simpler test case you may have, this might be the perfect way to do what you need. Here's a viable solution:</p>\n\n<p>Side note: an error output I got while trying to run a gmock test said: </p>\n\n<blockquote>\n  <p><code>.Times()</code> cannot appear after <code>.InSequence()</code>, <code>.WillOnce()</code>, <code>.WillRepeatedly()</code>, or <code>.RetiresOnSaturation()</code>,</p>\n</blockquote>\n\n<p>...so it turns out we don't need to (and we are not even <em>allowed to</em>) specify <code>.Times(::testing::AnyNumber())</code> here. Instead, gmock will figure it out automatically, according to <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/for_dummies.md#cardinalities-how-many-times-will-it-be-called\" rel=\"noreferrer\">these cardinality rules</a>, since we are using <code>.WillRepeatedly()</code>: </p>\n\n<blockquote>\n  <p><strong>If you omit <code>Times()</code>, gMock will infer the cardinality for you.</strong> The rules are easy to remember:</p>\n  \n  <ul>\n  <li>If <strong>neither</strong> <code>WillOnce()</code> nor <code>WillRepeatedly()</code> is in the <code>EXPECT_CALL()</code>, the inferred cardinality is <code>Times(1)</code>.</li>\n  <li>If there are <em>n</em> <code>WillOnce()</code>'s but <strong>no</strong> <code>WillRepeatedly()</code>, where <em>n</em> >= 1, the cardinality is <code>Times(n)</code>.</li>\n  <li>If there are <em>n</em> <code>WillOnce()</code>'s and <strong>one</strong> <code>WillRepeatedly()</code>, where <em>n</em> >= 0, the cardinality is <code>Times(AtLeast(n))</code>.</li>\n  </ul>\n</blockquote>\n\n<p><em>This technique has actually been tested and proven to work on real code:</em></p>\n\n<pre><code>using ::testing::_;\nusing ::testing::Assign;\n\nTEST_F(MyTestFixture, MyCustomTest) \n{\n    bool myMockMethodWasCalled = false;\n\n    EXPECT_CALL(MyMockClass, myMockMethod(_, _))\n        // Set `myMockMethodWasCalled` to true every time `myMockMethod()` is called with\n        // *any* input parameters!\n        .WillRepeatedly(Assign(&amp;myMockMethodWasCalled, true));\n\n    // Do any necessary setup here for the 1st sub-test \n\n    // Test that `myMockMethod()` is called only 2x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n\n        if (i &lt; 2)\n        {\n            EXPECT_TRUE(myMockMethodWasCalled);\n            myMockMethodWasCalled = false;        // reset\n            EXPECT_FALSE(myMockMethodWasCalled);  // ensure reset works (sanity check)\n        }\n        else\n        {\n            EXPECT_FALSE(myMockMethodWasCalled);\n        }\n    }\n\n    // Do any necessary setup here for the 2nd sub-test\n\n    // Test that `myMockMethod()` is called only 3x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n\n        if (i &lt; 3)\n        {\n            EXPECT_TRUE(myMockMethodWasCalled);\n            myMockMethodWasCalled = false;        // reset\n            EXPECT_FALSE(myMockMethodWasCalled);  // ensure reset works (sanity check)\n        }\n        else\n        {\n            EXPECT_FALSE(myMockMethodWasCalled);\n        }\n    }\n\n    // Do any necessary setup here for the 3rd sub-test\n\n    // Test that `myMockMethod()` is called 0x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n        EXPECT_FALSE(myMockMethodWasCalled);\n    }\n}\n</code></pre></li>\n<li><p><strong>Use <code>InvokeWithoutArgs(f)</code> with a global counter variable and a global counter function.</strong> This works great, and is much easier to use and more versatile than the previous approach! Note that you could also migrate this global function and variable to be inside your test fixture class as well if you wanted, which would clean it up a bit.</p>\n\n<p><em>This technique has actually been tested and proven to work on real code:</em></p>\n\n<pre><code>using ::testing::_;\nusing ::testing::InvokeWithoutArgs;\n\nstatic uint32_t callCounter = 0;\nstatic void incrementCallCounter()\n{\n    callCounter++;\n}\n\nTEST_F(MyTestFixture, MyCustomTest)\n{\n    EXPECT_CALL(MyMockClass, myMockMethod(_, _))\n        // Set gmock to increment the global `callCounter` variable every time \n        // `myMockMethod()` is called with *any* input parameters!\n        .WillRepeatedly(InvokeWithoutArgs(incrementCallCounter));\n\n    // Do any necessary setup here for the 1st sub-test \n\n    // Test that `myMockMethod()` is called only 2x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    callCounter = 0; // ensure this is zero BEFORE you start the test!\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n    }\n    EXPECT_EQ(callCounter, 2);\n\n    // Do any necessary setup here for the 2nd sub-test \n\n    // Test that `myMockMethod()` is called only 3x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    callCounter = 0; // ensure this is zero BEFORE you start the test!\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n    }\n    EXPECT_EQ(callCounter, 3);\n\n    // Do any necessary setup here for the 1st sub-test \n\n    // Test that `myMockMethod()` is called 0x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    callCounter = 0; // ensure this is zero BEFORE you start the test!\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n    }\n    EXPECT_EQ(callCounter, 0);\n}\n</code></pre></li>\n<li><p><strong>[BEST TECHNIQUE] Use <code>InvokeWithoutArgs(f)</code> with a <em>local</em> counter variable and a simple lambda function!</strong> This works great, and is much easier to use and more versatile than the 1st approach, while avoiding the global variable and additional global function of the 2nd approach. It is for sure my favorite way to handle this, and works extremely well.</p>\n\n<p><em>This technique has actually been tested and proven to work on real code:</em></p>\n\n<pre><code>using ::testing::_;\nusing ::testing::InvokeWithoutArgs;\n\nTEST_F(MyTestFixture, MyCustomTest)\n{\n    uint32_t callCounter;\n\n    EXPECT_CALL(MyMockClass, myMockMethod(_, _))\n        // Use a lambda function to set gmock to increment `callCounter` every \n        // time `myMockMethod()` is called with *any* input parameters!\n        .WillRepeatedly(InvokeWithoutArgs([&amp;callCounter](){ callCounter++; }));\n\n    // Do any necessary setup here for the 1st sub-test \n\n    // Test that `myMockMethod()` is called only 2x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    callCounter = 0; // ensure this is zero BEFORE you start the test!\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n    }\n    EXPECT_EQ(callCounter, 2);\n\n    // Do any necessary setup here for the 2nd sub-test \n\n    // Test that `myMockMethod()` is called only 3x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    callCounter = 0; // ensure this is zero BEFORE you start the test!\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n    }\n    EXPECT_EQ(callCounter, 3);\n\n    // Do any necessary setup here for the 1st sub-test \n\n    // Test that `myMockMethod()` is called 0x here by `myOtherFunc()`,\n    // despite calling `myOtherFunc()` repeatedly\n    callCounter = 0; // ensure this is zero BEFORE you start the test!\n    for (int i = 0; i &lt; 10; i++)\n    {\n        myOtherFunc();\n    }\n    EXPECT_EQ(callCounter, 0);\n}\n</code></pre></li>\n</ol>\n\n<p>If you think this whole answer should be added as a stand-alone file among the Gmock docs (I propose we do this), click the github issue link just below and upvote it.</p>\n\n<h2>Practice using gtest/gmock:</h2>\n\n<ol>\n<li>Use this project to practice writing and testing your own google tests and google mocks. This is also a good demo of how to get a new project up and running with Google's <a href=\"https://bazel.build/\" rel=\"noreferrer\">Bazel build system</a>: <a href=\"https://github.com/ElectricRCAircraftGuy/eRCaGuy_gtest_practice\" rel=\"noreferrer\">https://github.com/ElectricRCAircraftGuy/eRCaGuy_gtest_practice</a>.</li>\n</ol>\n\n<h2>Related:</h2>\n\n<ol>\n<li>GitHub issue I opened to request to add this answer as a standalone document in their official documentation. If you agree, please go here and upvote this issue: <a href=\"https://github.com/google/googletest/issues/2775\" rel=\"noreferrer\">https://github.com/google/googletest/issues/2775</a></li>\n<li><a href=\"https://stackoverflow.com/questions/44249293/google-mock-how-to-say-function-must-be-called-once-with-a-certain-parameter/60896373#60896373\">google mock - how to say &quot;function must be called ONCE with a certain parameter but ok to be called many times with different parameters&quot;?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5743236/google-mock-multiple-expectations-on-same-function-with-different-parameters/5899945\">Google Mock: multiple expectations on same function with different parameters</a></li>\n<li><a href=\"https://stackoverflow.com/questions/44249293/google-mock-how-to-say-function-must-be-called-once-with-a-certain-parameter\">google mock - how to say &quot;function must be called ONCE with a certain parameter but ok to be called many times with different parameters&quot;?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/40089204/interleaving-expect-calls-and-calls-to-the-mock-functions\">Interleaving EXPECT_CALL()s and calls to the mock functions</a></li>\n</ol>\n"}], "owner": {"reputation": 4060, "user_id": 4784683, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/baa572872b7ec1fc6c1a52d1230c4872?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/4784683/bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20695, "favorite_count": 5, "accepted_answer_id": 44035118, "answer_count": 3, "score": 14, "last_activity_date": 1588014730, "creation_date": 1495054517, "last_edit_date": 1585424807, "question_id": 44034633, "link": "https://stackoverflow.com/questions/44034633/google-mock-can-i-call-expect-call-multiple-times-on-same-mock-object", "title": "google mock - can I call EXPECT_CALL multiple times on same mock object?", "body": "<p>If I call <code>EXPECT_CALL</code> twice on the same mock object in the same <code>TEST_F</code> . . . what happens?</p>\n\n<p>Are the expectations appended to the mock object or does the second call erase the effects of the first call?</p>\n\n<p>I found <a href=\"https://github.com/google/googletest/blob/master/googlemock/docs/cheat_sheet.md#the-after-clause-afterclause\" rel=\"noreferrer\">The After Clause</a> which appears to imply that multiple calls to same mock + EXPECT_CALL are allowed.</p>\n"}, {"tags": ["c++", "telnet"], "comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1495058895, "post_id": 44034631, "comment_id": 75097751, "body": "Re your edit, the comment in your code says that it is trying to read until the peer closes the connection, not just read a single response, and that is more or less what the code is doing, modulo bugs."}], "answers": [{"tags": [], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 1, "last_activity_date": 1495056141, "last_edit_date": 1495056141, "creation_date": 1495054957, "answer_id": 44034720, "question_id": 44034631, "link": "https://stackoverflow.com/questions/44034631/trying-to-send-and-receive-data-using-telnet-in-c-but-received-data-is-truncat/44034720#44034720", "title": "Trying to send and receive data using telnet in C++ but received data is truncated. Why?", "body": "<p>Your do/while loop condition is wrong. It should be <code>while (iResult &gt; 0)</code>. But you should rewrite it as a <code>while</code> loop, to avoid the double test.</p>\n"}, {"tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 1, "last_activity_date": 1495055287, "creation_date": 1495055287, "answer_id": 44034796, "question_id": 44034631, "link": "https://stackoverflow.com/questions/44034631/trying-to-send-and-receive-data-using-telnet-in-c-but-received-data-is-truncat/44034796#44034796", "title": "Trying to send and receive data using telnet in C++ but received data is truncated. Why?", "body": "<pre><code>// Receive until the peer closes the connection\ndo {\n    iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);\n    if ( iResult &gt; 0 )\n    {\n        //telnet_bytes_received = iResult;\n    }\n} while( iResult == 0 );\n</code></pre>\n\n<p>This is a really convoluted way to read 512 bytes from your socket (or block forever if it's been closed).</p>\n\n<p>This should look something like this:</p>\n\n<pre><code>// Receive until the peer closes the connection\nwhile ((iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0)) &gt; 0)\n{\n    retval.append(recvbuf, iResult);\n}\n</code></pre>\n\n<p>This will read from the socket until it's closed or an error occurs, and append the received data to your return string each time through.</p>\n"}], "owner": {"reputation": 1395, "user_id": 1708426, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/c1950ab41acc5cae8633a8ba337bd545?s=128&d=identicon&r=PG", "display_name": "Arash Fotouhi", "link": "https://stackoverflow.com/users/1708426/arash-fotouhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "closed_date": 1495106510, "answer_count": 2, "score": -1, "last_activity_date": 1495058197, "creation_date": 1495054510, "last_edit_date": 1495058197, "question_id": 44034631, "link": "https://stackoverflow.com/questions/44034631/trying-to-send-and-receive-data-using-telnet-in-c-but-received-data-is-truncat", "closed_reason": "Not suitable for this site", "title": "Trying to send and receive data using telnet in C++ but received data is truncated. Why?", "body": "<p>I'm using the follow function to send and receive data using telnet. But the received data is truncated past a few hundred characters. Why is this happening and how can I fix this? I suspect, the data is not being sent \"fast enough\" from the other end and my code thinks it's the end of the telnet stream. If this is the case, how can I make the receive wait long enough?</p>\n\n<pre><code>std::string sendTelnet(std::string str)\n{\n    const int default_buflen = 512;\n    const char *loopback_address = \"127.0.0.1\";\n    std::string retval;\n\n    WSADATA wsaData;\n    SOCKET ConnectSocket = INVALID_SOCKET;\n    struct addrinfo *result = NULL,\n                    *ptr = NULL,\n                    hints;\n    char recvbuf[default_buflen];\n    int iResult;\n    int recvbuflen = default_buflen;\n\n    for(int i=0; i&lt;default_buflen; i++)\n    {\n        recvbuf[i] = '\\0';\n    }\n\n    // Initialize Winsock\n    iResult = WSAStartup(MAKEWORD(2,2), &amp;wsaData);\n    if (iResult != 0) {\n        std::cerr&lt;&lt;\"WSAStartup failed with error: \" + iResult;\n    }\n\n    ZeroMemory( &amp;hints, sizeof(hints) );\n    hints.ai_family = AF_UNSPEC;\n    hints.ai_socktype = SOCK_STREAM;\n    hints.ai_protocol = IPPROTO_TCP;\n\n    // Resolve the server address and port\n    iResult = getaddrinfo(loopback_address, std::to_string((long double)jtagTerminalPort).c_str(), &amp;hints, &amp;result);\n    if ( iResult != 0 ) {\n        std::cerr&lt;&lt;\"getaddrinfo failed with error: \" + iResult;\n        WSACleanup();\n    }\n\n    // Attempt to connect to an address until one succeeds\n    for(ptr=result; ptr != NULL ;ptr=ptr-&gt;ai_next) {\n\n        // Create a SOCKET for connecting to server\n        ConnectSocket = socket(ptr-&gt;ai_family, ptr-&gt;ai_socktype, \n            ptr-&gt;ai_protocol);\n        if (ConnectSocket == INVALID_SOCKET) {\n            std::cerr&lt;&lt;\"socket failed with error: \" + WSAGetLastError();\n            WSACleanup();\n        }\n\n        // Connect to server.\n        iResult = connect( ConnectSocket, ptr-&gt;ai_addr, (int)ptr-&gt;ai_addrlen);\n        if (iResult == SOCKET_ERROR) {\n            closesocket(ConnectSocket);\n            ConnectSocket = INVALID_SOCKET;\n            continue;\n        }\n        break;\n    }\n\n    freeaddrinfo(result);\n\n    if (ConnectSocket == INVALID_SOCKET) {\n        std::cerr&lt;&lt;\"Unable to connect to server!\\n\";\n        WSACleanup();\n    }\n\n    // Send an initial buffer\n    iResult = send( ConnectSocket, str.c_str(), (int)strlen(str.c_str()), 0 );\n    if (iResult == SOCKET_ERROR) {\n        std::cerr&lt;&lt;\"send failed with error: \" + WSAGetLastError();\n        closesocket(ConnectSocket);\n        WSACleanup();\n    }\n\n    //telnet_bytes_sent = iResult;\n\n    // Receive until the peer closes the connection\n    do {\n        iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);\n        if ( iResult &gt; 0 )\n        {\n            //telnet_bytes_received = iResult;\n        }\n    } while( iResult == 0 );\n\n    // shutdown the connection since no more data will be sent\n    iResult = shutdown(ConnectSocket, SD_SEND);\n    if (iResult == SOCKET_ERROR) {\n        std::cerr&lt;&lt;\"shutdown failed with error: \" + WSAGetLastError();\n        closesocket(ConnectSocket);\n        WSACleanup();\n    }\n\n    // cleanup\n    closesocket(ConnectSocket);\n    WSACleanup();\n\n    retval = recvbuf;\n    Sleep(100);\n    return retval;\n}\n</code></pre>\n\n<p>PS. What I mean by the data being truncated is that <strong><em>retval</em></strong> returns a truncated version of what is actually being sent over telnet. For example if the data sent over from the other end is \"1,2,3,...,1000\", by the end of the function, <strong><em>retval</em></strong> will only be holding \"1,2,3,...,300\".</p>\n\n<p>EDIT: In application, I'm sending some commands over telnet and waiting for the response. Then, I take the received response and run some functions accordingly. Then I send the next set of commands over telnet, and wait for the response. And so on...</p>\n"}, {"tags": ["c++", "qt", "savestate"], "comments": [{"owner": {"reputation": 7547, "user_id": 6019417, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/nA455.jpg?s=128&g=1", "display_name": "J. Chomel", "link": "https://stackoverflow.com/users/6019417/j-chomel"}, "edited": false, "score": 1, "creation_date": 1495089410, "post_id": 44034626, "comment_id": 75106457, "body": "Hi Hanieh, if you read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> carefully, you will know that <b>you must show your efforts</b> if you want your question to be regarded as positive with the community."}, {"owner": {"reputation": 8313, "user_id": 7621674, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/323bed98b2e655d5fa9ac6d23a72b995?s=128&d=identicon&r=PG", "display_name": "m7913d", "link": "https://stackoverflow.com/users/7621674/m7913d"}, "edited": false, "score": 0, "creation_date": 1495300702, "post_id": 44034626, "comment_id": 75199270, "body": "You may be looking for <a href=\"http://doc.qt.io/qt-5/qsettings.html\" rel=\"nofollow noreferrer\"><code>QSettings</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1495055175, "last_edit_date": 1495055175, "creation_date": 1495054651, "answer_id": 44034660, "question_id": 44034626, "link": "https://stackoverflow.com/questions/44034626/keeping-the-state-of-a-qcheckbox-after-closing-the-gui/44034660#44034660", "title": "Keeping the state of a QCheckBox after closing the GUI", "body": "<p>Save it somewhere and load it again on the next run. You can use a plain file, QSettings, a database, whatever you like - but there's no magic just \"do it for me\" box that you can tick; you're going to have to write some code to preserve and restore the value yourself.</p>\n"}], "owner": {"reputation": 13, "user_id": 7577259, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f216d2281eb04eeec6398af2d741773?s=128&d=identicon&r=PG&f=1", "display_name": "Hanieh", "link": "https://stackoverflow.com/users/7577259/hanieh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495300777, "creation_date": 1495054496, "last_edit_date": 1495300777, "question_id": 44034626, "link": "https://stackoverflow.com/questions/44034626/keeping-the-state-of-a-qcheckbox-after-closing-the-gui", "title": "Keeping the state of a QCheckBox after closing the GUI", "body": "<p>In Qt C++ builder, how can I keep the state of a <code>QCheckBox</code> after closing the Gui, so it will remain to the previous state when I run it again</p>\n"}, {"tags": ["c++", "curl"], "comments": [{"owner": {"reputation": 1999, "user_id": 3188346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fbdb414d9dcf1e2a79fe37eb16aec9?s=128&d=identicon&r=PG&f=1", "display_name": "luantkow", "link": "https://stackoverflow.com/users/3188346/luantkow"}, "edited": false, "score": 1, "creation_date": 1495054694, "post_id": 44034527, "comment_id": 75095964, "body": "The curl_easy_perform returned CURLE_COULDNT_RESOLVE_HOST (6) <a href=\"https://curl.haxx.se/libcurl/c/libcurl-errors.html\" rel=\"nofollow noreferrer\">curl.haxx.se/libcurl/c/libcurl-errors.html</a>. What content do you expect to see?"}, {"owner": {"reputation": 428, "user_id": 6193767, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eaa9d367a8d622f367b1cd651c627bfa?s=128&d=identicon&r=PG&f=1", "display_name": "Anonyme", "link": "https://stackoverflow.com/users/6193767/anonyme"}, "reply_to_user": {"reputation": 1999, "user_id": 3188346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fbdb414d9dcf1e2a79fe37eb16aec9?s=128&d=identicon&r=PG&f=1", "display_name": "luantkow", "link": "https://stackoverflow.com/users/3188346/luantkow"}, "edited": false, "score": 0, "creation_date": 1495055042, "post_id": 44034527, "comment_id": 75096126, "body": "I except the Google&#39;s page source code..."}, {"owner": {"reputation": 1999, "user_id": 3188346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85fbdb414d9dcf1e2a79fe37eb16aec9?s=128&d=identicon&r=PG&f=1", "display_name": "luantkow", "link": "https://stackoverflow.com/users/3188346/luantkow"}, "edited": false, "score": 1, "creation_date": 1495055469, "post_id": 44034527, "comment_id": 75096324, "body": "Can you change <code>curl_easy_setopt(curl, CURLOPT_URL, pAdresse);</code> to ` curl_easy_setopt(curl, CURLOPT_URL, pAdresse.c_str());`?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495064362, "post_id": 44034527, "comment_id": 75099379, "body": "@Anonymous: why do you expect to see any content when <code>curl_easy_perform()</code> reports failure?  It is clear that it is having trouble finding Google to begin with, so it can&#39;t download anything. And the reason is because you are not passing the correct memory address for the URL string to curl, so it fails to find the server."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495064652, "post_id": 44035699, "comment_id": 75099430, "body": "In C++11 and later, <code>c_str()</code> and <code>data()</code> return the same thing (a pointer to a null-terminated C string), so there is no reason to switch from <code>c_str()</code> to <code>data()</code>, especially when <code>c_str()</code> in every C++ version returns exactly what curl is expecting."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495065231, "post_id": 44035699, "comment_id": 75099589, "body": "IMHO <code>c_str</code> looks more ugly + <code>data</code> brings more consistency to the code with other std containers and c++17 non-const <code>data</code> ))."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495065859, "post_id": 44035699, "comment_id": 75099763, "body": "<code>c_str</code> better conveys that a C-style string is being used. And you wouldn&#39;t need to use a non-const <code>data</code> in this situation anyway."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495066582, "post_id": 44035699, "comment_id": 75099960, "body": "I did not mean this particular snippet, I meant overall consistency of the code using std containers in any cases. <code>c_str</code> is not the best naming for what it is meant, more this names more of a flavour of some c-compatible function for some legacy/wrapping API, than a member function of a standard library of a very different programming language. In this spirit <code>data</code> is quite good alternative, even might be some other better."}], "tags": [], "owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "is_accepted": true, "score": 1, "last_activity_date": 1495059828, "creation_date": 1495059828, "answer_id": 44035699, "question_id": 44034527, "link": "https://stackoverflow.com/questions/44034527/empty-value-when-converting-curl-to-string/44035699#44035699", "title": "Empty value when converting CURL to string", "body": "<p>Lib Curl being a C library follows an old \"good\" variadic argument design. That is why you code is doing completely unexpected thing while compiling fine.</p>\n\n<p>Having</p>\n\n<pre><code>CURLcode curl_easy_setopt(CURL *curl, CURLoption option, ...) \n</code></pre>\n\n<p>and this in your code</p>\n\n<pre><code>curl_easy_setopt(curl, CURLOPT_URL, pAdresse);\n</code></pre>\n\n<p>produces the behaviour you are witnessing.</p>\n\n<p>Change in you code to this</p>\n\n<pre><code>curl_easy_setopt(curl, CURLOPT_URL, pAdresse.c_str());\n</code></pre>\n\n<p>or even better if you use C++ >= 11 to this</p>\n\n<pre><code>curl_easy_setopt(curl, CURLOPT_URL, pAdresse.data());\n</code></pre>\n\n<p>And it is alive)).</p>\n"}], "owner": {"reputation": 428, "user_id": 6193767, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eaa9d367a8d622f367b1cd651c627bfa?s=128&d=identicon&r=PG&f=1", "display_name": "Anonyme", "link": "https://stackoverflow.com/users/6193767/anonyme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 44035699, "answer_count": 1, "score": 0, "last_activity_date": 1495059828, "creation_date": 1495054074, "question_id": 44034527, "link": "https://stackoverflow.com/questions/44034527/empty-value-when-converting-curl-to-string", "title": "Empty value when converting CURL to string", "body": "<p>I would like to get source code of a page, I have this function to populate a string.</p>\n\n<p>My header file :</p>\n\n<pre><code>class Explorateur {\npublic:\n    Explorateur();\n    ~Explorateur();\n    std::string RecupererCodeSource(std::string pAdresse);\n\n    static size_t WriteCallback(void *contents, size_t size, size_t nmemb, void *userp)\n    {\n        ((std::string*)userp)-&gt;append((char*)contents, size * nmemb);\n        return size * nmemb;\n    }\n\n};\n</code></pre>\n\n<p>My class file :</p>\n\n<pre><code>std::string Explorateur::RecupererCodeSource(std::string pAdresse)\n{\n      CURL *curl;\n      CURLcode res;\n      std::string readBuffer;\n\n      curl = curl_easy_init();\n      if(curl)\n      {\n        curl_easy_setopt(curl, CURLOPT_URL, pAdresse);\n        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, WriteCallback);\n        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;readBuffer);\n        std::cout &lt;&lt; \"curl  : \" &lt;&lt; curl &lt;&lt; std::endl;\n        res = curl_easy_perform(curl);\n        std::cout &lt;&lt; \"res  : \" &lt;&lt; res &lt;&lt; std::endl;\n        curl_easy_cleanup(curl);\n\n      }\n      std::cout &lt;&lt; \"Read : \" &lt;&lt; readBuffer &lt;&lt; std::endl;\n      return readBuffer;\n}\n</code></pre>\n\n<p>My main :</p>\n\n<pre><code>int main()\n{\n    Explorateur explorateur;\n    std::string valeur = explorateur.RecupererCodeSource(\"https://www.google.com/\");\n    return 0;\n}\n</code></pre>\n\n<p>The result is not excepted, it's empty, do you have an idea why ?</p>\n\n<pre><code>curl  : 0x1450d60\nres  : 6\nRead :\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1495054262, "post_id": 44034525, "comment_id": 75095773, "body": "Unless you can provide a referenced tot the standard proving different, <code>static_cast</code> is not C, so don&#39;t spam tags!"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "edited": false, "score": 1, "creation_date": 1495054335, "post_id": 44034525, "comment_id": 75095808, "body": "also, main() should return <code>int</code>, your mcve is not correct, the program doesn&#39;t compile, and it&#39;s got a useless pause after return ..."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1495054512, "post_id": 44034525, "comment_id": 75095893, "body": "It&#39;s hard to know where to begin, there are many mistakes in your example. To directly answer the title&#39;s question, the usage of <code>static_cast</code> you are looking for is <code>int i = static_cast&lt;int&gt;(n);</code>. It&#39;s incorrect to believe <code>static_cast</code> can be used to change the type of a variable. For example, you cannot change <code>n</code>&#39;s type to <code>int</code>. The best you can do is convert <code>n</code>&#39;s value to <code>int</code> and store the result in a new <code>int</code> variable."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495080294, "post_id": 44034525, "comment_id": 75103082, "body": "StackOverflow is not a homework service. These are questions you should be asking your instructor. That being said, your code is not following the requirements of the assignment at all. You are not reading input from the user at all. Even if you were, you are not casting and incrementing it correctly, you are using the wrong syntax, so the code will not compile. And you are not outputting the results at all."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 6539421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cDdo5bv59uA/AAAAAAAAAAI/AAAAAAAAAA0/Q0f3PRGUroA/photo.jpg?sz=128", "display_name": "The coding man", "link": "https://stackoverflow.com/users/6539421/the-coding-man"}, "edited": false, "score": 0, "creation_date": 1495211916, "post_id": 44034634, "comment_id": 75174078, "body": "could you elaborate a little further. I&#39;m having just one more problem with my code where it is saying char n: redefinition."}], "tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 3, "last_activity_date": 1500976059, "last_edit_date": 1500976059, "creation_date": 1495054517, "answer_id": 44034634, "question_id": 44034525, "link": "https://stackoverflow.com/questions/44034525/using-static-cast-to-convert-char-to-int-c/44034634#44034634", "title": "using static_cast to convert char to int c++", "body": "<p>There are several issues with this code.</p>\n\n<ul>\n<li>The interface to main isn't one of the legal possibilities. It should return <code>int</code>.</li>\n<li><p>You're mixing up your type and your variable, your static cast should probably be</p>\n\n<blockquote>\n<pre><code>static_cast&lt;int&gt;(n + 1)\n</code></pre>\n</blockquote></li>\n<li><p>You're not doing anything with the result of the static cast. Normally it would be used in an assignment or passed to a function.</p></li>\n</ul>\n"}], "owner": {"reputation": 7, "user_id": 6539421, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cDdo5bv59uA/AAAAAAAAAAI/AAAAAAAAAA0/Q0f3PRGUroA/photo.jpg?sz=128", "display_name": "The coding man", "link": "https://stackoverflow.com/users/6539421/the-coding-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4829, "favorite_count": 0, "closed_date": 1495054623, "answer_count": 1, "score": -6, "last_activity_date": 1500976059, "creation_date": 1495054068, "last_edit_date": 1495080115, "question_id": 44034525, "link": "https://stackoverflow.com/questions/44034525/using-static-cast-to-convert-char-to-int-c", "closed_reason": "Needs details or clarity", "title": "using static_cast to convert char to int c++", "body": "<p>I want to use static_cast to convert char to int. </p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Write a program inputs a character (char). Then using a type conversion (static_cast) print out the integer value of the letter.  What happens if you add 1 to a character variable?  Print out the results.</li>\n  </ol>\n</blockquote>\n\n<pre><code>char main()\n{\n    char n;\n    cout &lt;&lt; \"Enter a character: \";  \n    static_cast&lt;n&gt;(int + 1);\n    return n;\n    system(\"pause\");\n}\n</code></pre>\n\n<p>I'm really new to C++ and my book hasn't come in yet, yet my homework is due Sunday, so any help on these too would be much appreciated.</p>\n\n<blockquote>\n  <ol start=\"3\">\n  <li><p>Write a program that converts meters to feet (3.279 feet per meter).  Your program must take meters as input (i.e. 3.25) and convert to feet (i.e. 10.657).  Output the results.</p></li>\n  <li><p>Write a program that calculates compounding interest (futureValue = presentValue * (1 + interestRate)numberOfYears.  To raise a number to a power, use the pow() command.  To use pow() you must also include the cmath library in your program (#include &lt;cmath>).  The format is as follows:</p>\n  \n  <p>pow( &lt;value>, &lt;power> )<br>\n  FutureValue = PresentValue * pow( (1 +InterestRate), Years );</p>\n  \n  <p>If the interest rate is 6% and your present value is $200, how long will it take to double your money (future value is greater than or equal to $400)?</p></li>\n  </ol>\n</blockquote>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 725, "user_id": 7968757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/febedd8312ee6b7f6559b765f27da3e6?s=128&d=identicon&r=PG&f=1", "display_name": "BlameTheBits", "link": "https://stackoverflow.com/users/7968757/blamethebits"}, "edited": false, "score": 1, "creation_date": 1495054844, "post_id": 44034503, "comment_id": 75096027, "body": "What you do is not simple rearranging but creating a new 2D array (maybe with different sizes) and fill it with the data from the old array. Tip: Initialize <code>new_nums</code> like so: <code>vector&lt;vector&lt;int&gt;&gt; new_nums(r, vector&lt;int&gt;(c));</code>. I do not have a good idea to avoid the two <code>for</code> loops and I am not sure if there is a way to this more effective... (Of course you can count the number of free columns in the current row and copy a bunch of variables at a time but I hope that this will not speed up the copying when optimization flags are used.)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1495057011, "post_id": 44034503, "comment_id": 75097019, "body": "Going to go XY on you. Use a 1D <code>vector</code> that has a wrapping class to make it look like a <code>vector</code> of <code>vector</code>s All you&#39;ll have to do is copy the source&#39;s wrapped <code>vector</code> into the destination&#39;s wrapped <code>vector</code> (simply <code>data = src.data</code>) and change the row and column dimensions. this wraps up nicely as a constructor."}], "answers": [{"comments": [{"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1495061761, "post_id": 44035609, "comment_id": 75098662, "body": "Just a minor note: To my understandings, in your copy constructor the data is copied before checking if the sizes match (in other words, the exception is thrown after copying the data). Using an helper function in the member initializer list, like <code>rows(checked_rows(numrows, numcolumns, source.rows, source.columns)), ...</code> could rise an exception before the copy."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1495063117, "post_id": 44035609, "comment_id": 75099055, "body": "You are correct @Bob__ . I also considered moving the copy to an assignment after the test and exception, but decided it was best to go with the with the simplest, easiest to demonstrate option."}, {"owner": {"reputation": 720, "user_id": 7163293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6db1c0115965f6a6f13465cad0615d4?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyIsaLearner", "link": "https://stackoverflow.com/users/7163293/sunnyisalearner"}, "edited": false, "score": 0, "creation_date": 1495093585, "post_id": 44035609, "comment_id": 75109199, "body": "Wow! Thank you very much for taking the time. This is a really good design, reading your answer help me learn a bunch."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1495059215, "creation_date": 1495059215, "answer_id": 44035609, "question_id": 44034503, "link": "https://stackoverflow.com/questions/44034503/reshape-2d-vector-in-c/44035609#44035609", "title": "Reshape 2D Vector in C++", "body": "<p>Decided to follow my comment through. This answer heads pretty far into X-Y territory, but it should simplify things a great deal</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n#include &lt;vector&gt;\n#include &lt;exception&gt;\n\n// wrapping class for 2D matrixes    \nclass Matrix\n{\nprivate:\n    size_t rows, columns; // large, unsigned datatype. Don't want negative\n                          // indices, so why allow them?\n    std::vector&lt;int&gt; matrix; // 1D vector. Simple and easy to handle.\n                             // also often much faster than vector of vectors \n                             // due to improved spatial locality helping \n                             // predictability of data access\npublic:\n    // catchable exception should user request impossible dimension transformation\n    class BadDimsException: public std::exception\n    {\n    public:\n        const char* what() const noexcept\n        {\n            return \"Invalid dimensions specified\";\n        }\n    };\n\n    // build zero-filled Matrix\n    Matrix(size_t numrows, size_t numcols) :\n            rows(numrows), columns(numcols), matrix(rows * columns)\n    {\n    }\n\n    // build Matrix based on another Matrix with convertable dimensions\n    // All of the heavy lifting is performed in the member initializer list\n    // by simply copying data store of source Matrix\n    // if matrix cannot be transformed, the thrown exception leaves user with \n    // nothing to work with and no chance of trying to continue with an un-\n    // transformed matrix\n    Matrix(size_t numrows, size_t numcols, const Matrix &amp; source) :\n            rows(numrows), columns(numcols), matrix(source.matrix)\n    {\n        if (rows * columns != source.rows * source.columns)\n        { // Bad dimensions. Blow up.\n            throw BadDimsException();\n        }\n    }\n\n    // 2D to 1D mapping accessor\n    int &amp; operator()(size_t row, size_t column)\n    {\n        // check bounds here\n        return matrix[row * columns + column]; \n    }\n\n    // 2D to 1D mapping accessor for constant Matrix \n    int operator()(size_t row, size_t column) const\n    {\n        // check bounds here\n        return matrix[row * columns + column];\n    }\n\n    // dimension accessors\n    size_t getRows() const\n    {\n        return rows;\n    }\n    size_t getColumns() const\n    {\n        return columns;\n    }\n};\n\n\n// stream formatter\nstd::ostream &amp; operator&lt;&lt;(std::ostream &amp; out, const Matrix &amp; mat)\n{\n    for (size_t row = 0; row &lt; mat.getRows(); ++row)\n    {\n        for (size_t col = 0; col &lt; mat.getColumns(); ++col)\n        {\n            std::cout &lt;&lt; std::setw(5) &lt;&lt; mat(row, col);\n        }\n        std::cout &lt;&lt; '\\n';\n    }\n    return out;\n}\n</code></pre>\n\n<p>And to test/demonstrate usage: </p>\n\n<pre><code>int main()\n{\n    Matrix one(2, 6); // make 2x6 matrix\n    int count = 0;\n\n    // set inputs to make errors really stand out\n    for (size_t row = 0; row &lt; one.getRows(); ++row)\n    {\n        for (size_t col = 0; col &lt; one.getColumns(); ++col)\n        {\n            one(row, col) = count++;\n        }\n    }\n\n    // print initial matrix\n    std::cout &lt;&lt; one &lt;&lt; '\\n';\n\n    // make reshaped matrix\n    Matrix two(3,4, one);\n\n    //print reshaped Matrix\n    std::cout &lt;&lt; two &lt;&lt; '\\n';\n    try\n    {\n        // make invalid reshaped matrix\n        Matrix three(3, 3, one);\n\n        // This should never print\n        std::cout &lt;&lt; three &lt;&lt; '\\n';\n    }\n    catch (const Matrix::BadDimsException &amp; bde)\n    {\n        // Yay! Caught error!\n        std::cout &lt;&lt; bde.what() &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 720, "user_id": 7163293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6db1c0115965f6a6f13465cad0615d4?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyIsaLearner", "link": "https://stackoverflow.com/users/7163293/sunnyisalearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2891, "favorite_count": 0, "accepted_answer_id": 44035609, "answer_count": 1, "score": 1, "last_activity_date": 1495059215, "creation_date": 1495053982, "last_edit_date": 1495541431, "question_id": 44034503, "link": "https://stackoverflow.com/questions/44034503/reshape-2d-vector-in-c", "title": "Reshape 2D Vector in C++", "body": "<p>I would like to implement a function that like the input of a 2d vector (a matrix), contain its origin elements, and return a reshaped version based on the input for number of columns and rows. The reshaped matrix need to be filled with all the elements of the original matrix in the same row-traversing order as they were.</p>\n\n<p>I completed the following code:</p>\n\n<pre><code>vector&lt;vector&lt;int&gt;&gt; matrixReshape(vector&lt;vector&lt;int&gt;&gt;&amp; nums, int r, int c) {\n    int r_old = nums.size();\n    int c_old = nums[0].size();\n\n\n    if(r*c != r_old*c_old) return nums;\n\n   vector&lt;vector&lt;int&gt;&gt; new_nums;\n   new_nums.resize(r);\n\n   // get the new matrix proper size\n   for (int i =0; i&lt; r; i++){\n       new_nums[i].resize(c);\n   } \n\n   int c_curr =0;\n   int r_curr =0;\n\n   // assign element\n   for (int i = 0; i &lt; r_old; i ++){\n       for (int j =0; j &lt; c_old; j++){\n\n           if(c_curr == c){\n               r_curr++;\n               c_curr =0;\n           }\n           new_nums[r_curr][c_curr] = nums[i][j];\n           c_curr++;\n       }\n   }\n   return new_nums;\n}\n</code></pre>\n\n<p>However, I feel like there must be a better way of doing it. I search stackoverflow and found several questions</p>\n\n<p><a href=\"https://stackoverflow.com/questions/20047684/how-can-i-resize-a-2d-c-vector\">How can I resize a 2D C++ vector?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/15889578/how-can-i-resize-a-2d-vector-of-objects-given-the-width-and-height\">How can I resize a 2D vector of objects given the width and height?</a></p>\n\n<p>However, those answers all \"reset\" the current matrix which is not what I want. So my question is, is there a faster way to generate a 2d vector from a 2d vector by re-arranging its elements into the desired new shape?</p>\n"}, {"tags": ["c++", "c++17"], "comments": [{"owner": {"reputation": 672, "user_id": 1442880, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2a97fcba555c029723d7c353345a974?s=128&d=identicon&r=PG", "display_name": "Kobi", "link": "https://stackoverflow.com/users/1442880/kobi"}, "edited": false, "score": 0, "creation_date": 1495053762, "post_id": 44034405, "comment_id": 75095521, "body": "Another related question here, why there is no need for constructor here? Is this really a POD? Is the default generated constructor doing std::forward&lt;T&gt;(t)...  ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1495053768, "post_id": 44034405, "comment_id": 75095526, "body": "As for regular inheritance."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1495053838, "post_id": 44034405, "comment_id": 75095561, "body": "There is nothing to <code>forward</code> in default constructor."}, {"owner": {"reputation": 672, "user_id": 1442880, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2a97fcba555c029723d7c353345a974?s=128&d=identicon&r=PG", "display_name": "Kobi", "link": "https://stackoverflow.com/users/1442880/kobi"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1495053964, "post_id": 44034405, "comment_id": 75095623, "body": "Re regular inheritance- got it. I totally forgot about it."}, {"owner": {"reputation": 672, "user_id": 1442880, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2a97fcba555c029723d7c353345a974?s=128&d=identicon&r=PG", "display_name": "Kobi", "link": "https://stackoverflow.com/users/1442880/kobi"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1495054118, "post_id": 44034405, "comment_id": 75095700, "body": "Looking at Jason&#39;s Turner C++ weekly (ep 49,50), he had std::forward done in the constructor. but std::visit example in cppreference does not have any constructor in the &quot;overloaded&quot; struct. So I was wondering why. And another question is why there is no need for a constructor here that takes the lambdas ?"}], "owner": {"reputation": 672, "user_id": 1442880, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d2a97fcba555c029723d7c353345a974?s=128&d=identicon&r=PG", "display_name": "Kobi", "link": "https://stackoverflow.com/users/1442880/kobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "closed_date": 1495054302, "answer_count": 0, "score": 2, "last_activity_date": 1495054166, "creation_date": 1495053613, "last_edit_date": 1495054166, "question_id": 44034405, "link": "https://stackoverflow.com/questions/44034405/variadic-templates-and-c-using-operator", "closed_reason": "Duplicate", "title": "Variadic templates and C++ using operator()", "body": "<p>Why do I need to specify using in the below example?</p>\n\n<p>If not specified, there would be an ambiguous call to operator()</p>\n\n<pre><code>template &lt;typename ... T&gt;\nstruct C : T ... {\n   // not having this using...\n   // would emit a compiler error\n   // like  member 'operator()' is ambiguous\n   //using T::operator()...;\n};\n\n// template class guidance feature of C++17\ntemplate &lt;typename ... T&gt;\nC(T...) -&gt; C&lt;T...&gt;;\n\nint main(){\n   C c { []{}, [](int){} };\n   c(3);\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "winapi", "registry", "registrykey"], "answers": [{"comments": [{"owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "edited": false, "score": 2, "creation_date": 1495053467, "post_id": 44034274, "comment_id": 75095391, "body": "I have just discovered RegQueryInfoKey in an example on MSDN. That function looks like a solution to me."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "edited": false, "score": 0, "creation_date": 1495053566, "post_id": 44034274, "comment_id": 75095432, "body": "Yes. That would do it. A bit of routine research is all that&#39;s needed."}], "tags": [], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": false, "score": 3, "last_activity_date": 1495053135, "creation_date": 1495053135, "answer_id": 44034274, "question_id": 44034205, "link": "https://stackoverflow.com/questions/44034205/what-is-the-best-way-to-determine-if-a-registry-key-contrains-registry-values-or/44034274#44034274", "title": "What is the best way to determine if a registry key contrains registry values or subkeys?", "body": "<ul>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724862.aspx\" rel=\"nofollow noreferrer\"><code>RegEnumKeyEx</code></a> enumerates subkeys.</li>\n<li><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724865.aspx\" rel=\"nofollow noreferrer\"><code>RegEnumValue</code></a> enumerates values.</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "edited": false, "score": 0, "creation_date": 1495089177, "post_id": 44034909, "comment_id": 75106333, "body": "The MSDN link &quot;SHDeleteEmptyKey&quot; is broken."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "edited": false, "score": 0, "creation_date": 1495123316, "post_id": 44034909, "comment_id": 75130590, "body": "@NorbertWillhelm fixed"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 4, "last_activity_date": 1495123307, "last_edit_date": 1495123307, "creation_date": 1495055710, "answer_id": 44034909, "question_id": 44034205, "link": "https://stackoverflow.com/questions/44034205/what-is-the-best-way-to-determine-if-a-registry-key-contrains-registry-values-or/44034909#44034909", "title": "What is the best way to determine if a registry key contrains registry values or subkeys?", "body": "<p>Use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724902.aspx\" rel=\"nofollow noreferrer\"><code>RegQueryInfoKey()</code></a>:</p>\n\n<blockquote>\n  <p>Retrieves information about the specified registry key.</p>\n</blockquote>\n\n<p>Amongst many different parameters that it can output, it has the following two parameters that are useful to you:</p>\n\n<blockquote>\n  <p><em>lpcSubKeys</em> [out, optional]<br>\n  A pointer to a variable that receives the number of subkeys that are contained by the specified key. This parameter can be NULL.</p>\n  \n  <p><em>lpcValues</em> [out, optional]<br>\n  A pointer to a variable that receives the number of values that are associated with the key. This parameter can be NULL.</p>\n</blockquote>\n\n<p>With that said, do note that <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724845.aspx\" rel=\"nofollow noreferrer\"><code>RegDeleteKey()</code></a> will fail if the specified key has any subkeys, but not if it has any values.  So you really do not need to check for the existence of subkeys at all, only for values.  Let the function fail normally if there are no values present.</p>\n\n<p>An even simpler solution is to use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb773485.aspx\" rel=\"nofollow noreferrer\"><code>SHDeleteEmptyKey()</code></a> instead, which will fail if the key has any subkeys or values.  Then you don't need to check manually at all.</p>\n"}], "owner": {"reputation": 2324, "user_id": 832220, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/474e24012185034fd5c116ee32037c5e?s=128&d=identicon&r=PG", "display_name": "Norbert Willhelm", "link": "https://stackoverflow.com/users/832220/norbert-willhelm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 44034909, "answer_count": 2, "score": 0, "last_activity_date": 1495123307, "creation_date": 1495052935, "last_edit_date": 1495055429, "question_id": 44034205, "link": "https://stackoverflow.com/questions/44034205/what-is-the-best-way-to-determine-if-a-registry-key-contrains-registry-values-or", "title": "What is the best way to determine if a registry key contrains registry values or subkeys?", "body": "<p>I have written a program which creates the following subkey in the Windows Registry:</p>\n\n<pre><code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon\\SpecialAccounts\\UserList\n</code></pre>\n\n<p>I have written a second program which undoes what my first program does.  The second program has to check if the subkey contains further subkeys or values before the subkey is then deleted.  If the subkey doesn't contain further subkeys or values, the subkey will be deleted.</p>\n\n<p>How can I check if the subkey contains any subkeys or values?</p>\n"}, {"tags": ["c++", "templates", "implicit-conversion", "deleted-functions"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1495052158, "post_id": 44033970, "comment_id": 75094732, "body": "Did you mean to make <code>MyClass::MyClass(Anything)</code> the template, instead of the whole class? If you only want to disable all other constructors, you should not template the whole class, just that constructor."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1495052236, "post_id": 44033970, "comment_id": 75094765, "body": "Is <code>MyClass(float &amp;);</code> suppose to be <code>MyClass(double &amp;);</code>? Your question mentions <i>&quot;... the integer and the double version ...&quot;</i>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495052346, "post_id": 44033970, "comment_id": 75094827, "body": "With a somewhat more concrete example we should be able to give you better advice."}, {"owner": {"reputation": 157, "user_id": 5920044, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qo5p7.jpg?s=128&g=1", "display_name": "Alvaro Palma Aste", "link": "https://stackoverflow.com/users/5920044/alvaro-palma-aste"}, "edited": false, "score": 0, "creation_date": 1495053673, "post_id": 44033970, "comment_id": 75095477, "body": "About your questions:  1.- The whole class has to be templatized, not just the constructor, I&#39;ve other members that also depend on the template types. 2.- Yes, it&#39;s float, my typo."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1495052676, "post_id": 44034134, "comment_id": 75094996, "body": "<code>std::bool_constant</code> is a alias template for <code>std::integral_constant&lt;bool, Condition&gt;</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1495062122, "post_id": 44034134, "comment_id": 75098782, "body": "Use <code>template &lt;typename T, std::enable_if_t&lt;cond&gt;* = nullptr&gt;</code> to avoid to have <code>Dummy = int</code>."}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 0, "creation_date": 1495063544, "post_id": 44034134, "comment_id": 75099167, "body": "Thanks for the suggestions, applied both."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 3, "last_activity_date": 1495063536, "last_edit_date": 1495063536, "creation_date": 1495052544, "answer_id": 44034134, "question_id": 44033970, "link": "https://stackoverflow.com/questions/44033970/use-a-c-template-to-define-a-function-but-explicitly-delete-it-to-prevent-misu/44034134#44034134", "title": "Use a C++ template to define a function but explicitly delete it to prevent misuse", "body": "<p>The problem with your definition is that you're trying to implement the exact function that you have marked with <code>= delete</code>.</p>\n\n<p>You actually want another function template that works with both <code>int</code> and <code>float</code>. You can achieve that by first defining an <code>IntOrFloat</code> predicate:</p>\n\n<pre><code>template &lt;typename T&gt;\nusing IntOrFloat = std::bool_constant&lt;\n    std::is_same_v&lt;T, int&gt; || std::is_same_v&lt;T, float&gt;&gt;; \n</code></pre>\n\n<p>Then you can define two unambiguous constructors that use <code>std::enable_if_t</code> to check whether or not the predicate is fulfilled by the type passed in by the user:</p>\n\n<pre><code>class MyClass\n{\npublic:\n    template &lt;typename T, \n              std::enable_if_t&lt;IntOrFloat&lt;T&gt;{}&gt;* = nullptr&gt;\n    MyClass(T&amp;);\n\n    template &lt;typename Anything, \n              std::enable_if_t&lt;!IntOrFloat&lt;Anything&gt;{}&gt;* = nullptr&gt;\n    MyClass(Anything&amp;) = delete;\n};\n</code></pre>\n\n<p>Usage example:</p>\n\n<pre><code>int main()\n{\n    int v0 = 0;\n    float v1 = 0.f;\n    const char* v2 = \"igijsdg\";\n\n    MyClass x0{v0}; // OK\n    MyClass x1{v1}; // OK\n    MyClass x2{v2}; // Error\n}\n</code></pre>\n\n<p><a href=\"https://wandbox.org/permlink/YPpE5AdqQjYVV4Rq\" rel=\"nofollow noreferrer\"><strong>live example on wandbox</strong></a></p>\n"}], "owner": {"reputation": 157, "user_id": 5920044, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qo5p7.jpg?s=128&g=1", "display_name": "Alvaro Palma Aste", "link": "https://stackoverflow.com/users/5920044/alvaro-palma-aste"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 44034134, "answer_count": 1, "score": 2, "last_activity_date": 1495063536, "creation_date": 1495051799, "last_edit_date": 1495541894, "question_id": 44033970, "link": "https://stackoverflow.com/questions/44033970/use-a-c-template-to-define-a-function-but-explicitly-delete-it-to-prevent-misu", "title": "Use a C++ template to define a function but explicitly delete it to prevent misuse", "body": "<p>I have a template class with a constructor in which I want to explicitly forbid the usage of any type beyond a well defined list, like this: </p>\n\n<pre><code>template&lt;typename Anything&gt;\nclass MyClass\n{\npublic:\n    MyClass(int &amp;);\n    MyClass(float &amp;);\n    MyClass(Anything &amp;) = delete;\n}\n</code></pre>\n\n<p>However, since the code for the <strong>integer</strong> and the <strong>double</strong> version are identical, and only differ in the type, I'd like to define it using the templatized version, such as:</p>\n\n<pre><code>template&lt;typename Anything&gt;\nMyClass&lt;Anything&gt;::MyClass(Anything &amp;var)\n{\n    /* Code that operates over var */\n    ...\n}\n</code></pre>\n\n<p>instead of virtually having to duplicate the code for both valid constructors.</p>\n\n<p>However, when I tried to do so, I get:</p>\n\n<pre><code>error: redefinition of 'MyClass&lt;Anything&gt;::MyClass(Anything&amp;)'\n</code></pre>\n\n<p>It works by removing the <strong>\"= delete\"</strong>.</p>\n\n<p>Is there a way to use the template to define the function but without explicitly allowing to receive more types than the ones also explicitly described?</p>\n\n<p>I checked <a href=\"https://stackoverflow.com/questions/43995946/how-can-i-prevent-implicit-conversions-in-a-function-template\">How can I prevent implicit conversions in a function template?</a> and also <a href=\"https://stackoverflow.com/questions/43989414/why-can-i-prevent-implicit-conversions-for-primitives-but-not-user-defined-types\">Why can I prevent implicit conversions for primitives but not user-defined types?</a>, but their issues don't seem to be equivalent to the current one.</p>\n\n<p>Thanks a lot.</p>\n\n<p>UPDATE: Using gcc-4.8.5, it works!!! Even with the <strong>= delete</strong> keyword included.</p>\n"}, {"tags": ["c++", "vector", "stack"], "comments": [{"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495052154, "post_id": 44033871, "comment_id": 75094729, "body": "Why the downvotes ?"}, {"owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "edited": false, "score": 0, "creation_date": 1495053295, "post_id": 44033871, "comment_id": 75095295, "body": "On SO there&#39;s always (more than) someone that doesn&#39;t like the question or the source code."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1495051656, "creation_date": 1495051656, "answer_id": 44033927, "question_id": 44033871, "link": "https://stackoverflow.com/questions/44033871/building-template-stack-structure-with-vector-c/44033927#44033927", "title": "Building template Stack structure with vector c++", "body": "<p>definition should be</p>\n\n<pre><code>template &lt;typename T&gt;\nStack&lt;T&gt;::Stack() : container(0)\n{\n}\n</code></pre>\n\n<p>And not in .cpp</p>\n"}, {"comments": [{"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495055469, "post_id": 44033936, "comment_id": 75096325, "body": "Thank you. I added my corrected header in the end but there are still issues."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495055569, "post_id": 44033936, "comment_id": 75096370, "body": "You&#39;ve misunderstood my answer. It only applies when implementing methods outside of the class definition. Within the class definition (as you&#39;ve done) you do not need to specify <code>Stack&lt;T&gt;::</code> every time, and you do not need to specify the template each time."}, {"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495055706, "post_id": 44033936, "comment_id": 75096427, "body": "I am sorry but I got totally confused. Can you correct the header so that it works?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495055840, "post_id": 44033936, "comment_id": 75096502, "body": "@Veliko Edited."}, {"owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "edited": false, "score": 0, "creation_date": 1495055997, "post_id": 44033936, "comment_id": 75096574, "body": "Now I got it. Thank you."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": true, "score": 1, "last_activity_date": 1495055825, "last_edit_date": 1495540982, "creation_date": 1495051687, "answer_id": 44033936, "question_id": 44033871, "link": "https://stackoverflow.com/questions/44033871/building-template-stack-structure-with-vector-c/44033936#44033936", "title": "Building template Stack structure with vector c++", "body": "<p>The method <code>Stack::empty()</code> was never declared, you declared <code>Stack&lt;T&gt;::empty()</code>. The same is true for each other constructor, operator and method. Add a template declaration to each implementation to fix this error. Notice that the error message hints at the mistake by saying \"invalid use of template-name 'Stack' without an argument list\".</p>\n\n<p>Example : </p>\n\n<pre><code>template&lt;class T&gt; bool Stack&lt;T&gt;::empty() { \n     return container.empty(); \n}\n</code></pre>\n\n<p>Implementations for template methods should be included in header files. See <a href=\"https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file\">this question</a>.</p>\n\n<p>Edit :</p>\n\n<p>Regarding your newest example, you've mixed up two solutions. Try either :</p>\n\n<pre><code>#include &lt;vector&gt;\n\ntemplate &lt;class T&gt;\nclass Stack {\nprivate:\n    std::vector&lt;T&gt; container;\npublic:\n    Stack() : container(0)\n    {\n    }\n\n    bool empty() {\n        return container.empty();\n    }\n};\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>#include &lt;vector&gt;\n\ntemplate &lt;class T&gt;\nclass Stack {\nprivate:\n    std::vector&lt;T&gt; container;\npublic:\n    Stack();\n\n    bool empty();\n};\n\ntemplate&lt;class T&gt;\nStack&lt;T&gt;::Stack() : container(0)\n{\n}\n\ntemplate&lt;class T&gt;\nbool Stack&lt;T&gt;::empty() \n{\n    return container.empty();\n}\n</code></pre>\n\n<p>In the first solution, you are defining your functions within the definition of your class. The compiler knows that you are working on class <code>Stack&lt;T&gt;</code>, you mustn't remind it. In the second solution, the functions are defined outside the class. Here, you must specify which class' <code>empty</code> method and constructor you are defining.</p>\n"}], "owner": {"reputation": 483, "user_id": 1779895, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e7578bde9e47cb7af0aeb90ebaabb532?s=128&d=identicon&r=PG&f=1", "display_name": "Veliko", "link": "https://stackoverflow.com/users/1779895/veliko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 0, "accepted_answer_id": 44033936, "answer_count": 2, "score": -1, "last_activity_date": 1495055825, "creation_date": 1495051508, "last_edit_date": 1495055406, "question_id": 44033871, "link": "https://stackoverflow.com/questions/44033871/building-template-stack-structure-with-vector-c", "title": "Building template Stack structure with vector c++", "body": "<p>I am realizing a templated Stack structure on the base of <em>vector</em> in C++. I am not sure what is wrong with my code. </p>\n\n<p>Stack.h</p>\n\n<pre><code>#ifndef STACK_H_\n#define STACK_H_\n#include &lt;vector&gt;\nusing namespace std;\ntemplate &lt;class T&gt;\nclass Stack {\npublic:\n    Stack();\n    virtual ~Stack();\n    bool empty();\n    int size();\n    void push(T pushvar);\n    T pop();\nprivate:\n    std::vector&lt;T&gt; container;\n};\n#endif /* STACK_H_ */\n</code></pre>\n\n<p>Stack.cpp</p>\n\n<pre><code>#include \"Stack.h\"\n#include &lt;vector&gt;\n//template &lt;class T&gt;\n\nStack::Stack()\n    :container(0)\n    {\n\n    }\n\nStack::~Stack() {\n    // TODO Auto-generated destructor stub\n}\n\nbool Stack::empty(){\n    return (container.empty());\n}\n</code></pre>\n\n<p>Even before calling anything from the main, Eclipse gives me several errors. But I will give an exemplary main:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"Stack.cpp\"\nusing namespace std;\nint main() {\n    Stack&lt;int&gt; s;\n    cout &lt;&lt; s.empty();\n    return (0);\n}\n</code></pre>\n\n<p>The compiler returns the following errors:</p>\n\n<pre><code>Description Resource    Path    Location    Type\n'container' was not declared in this scope  Stack.cpp   /PracticeCpp/src    line 23 C/C++ Problem\n'template&lt;class T&gt; class Stack' used without template parameters    Stack.cpp   /PracticeCpp/src    line 22 C/C++ Problem\ninvalid use of template-name 'Stack' without an argument list   Stack.cpp   /PracticeCpp/src    line 12 C/C++ Problem\ninvalid use of template-name 'Stack' without an argument list   Stack.cpp   /PracticeCpp/src    line 18 C/C++ Problem\nMember declaration not found    Stack.cpp   /PracticeCpp/src    line 12 Semantic Error\nMember declaration not found    Stack.cpp   /PracticeCpp/src    line 18 Semantic Error\nMember declaration not found    Stack.cpp   /PracticeCpp/src    line 22 Semantic Error\nMethod 'empty' could not be resolved    Stack.cpp   /PracticeCpp/src    line 23 Semantic Error\nSymbol 'container' could not be resolved    Stack.cpp   /PracticeCpp/src    line 13 Semantic Error\n</code></pre>\n\n<p>I know that I haven't realized all the methods declared in the header file, but this is not my problem. Before I continue realizing them I want to understand where am I wrong?</p>\n\n<hr>\n\n<h2>Correction after the answers:</h2>\n\n<p>I followed the suggestions in the answers but still I don't get what continues to be wrong. I moved the template realizations to the header. I deleted the other unrealized methods to avoid confusion. Now my .cpp file is empty.\nMy new header file:</p>\n\n<pre><code>#ifndef STACK_H_\n#define STACK_H_\n#include &lt;vector&gt;\n\n\ntemplate &lt;class T&gt;\nclass Stack {\nprivate:\n    std::vector&lt;T&gt; container;\npublic:\n    template &lt;typename T&gt;\n    Stack&lt;T&gt;::Stack() : container(0)\n    {\n    }\n\n    template &lt;class T&gt;\n    bool Stack::empty() {\n         return container.empty();\n    }\n};\n\n\n#endif /* STACK_H_ */\n</code></pre>\n"}, {"tags": ["c++", "loops", "vector", "infinite-loop", "cout"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1495051598, "post_id": 44033861, "comment_id": 75094401, "body": "<a href=\"http://coliru.stacked-crooked.com/a/91c15f981f97ccbc\" rel=\"nofollow noreferrer\">Cannot reproduce</a>.  Please share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that does."}, {"owner": {"reputation": 2659, "user_id": 3830983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c76a573f35925a2d72bf7cc8b2735251?s=128&d=identicon&r=PG&f=1", "display_name": "MCMastery", "link": "https://stackoverflow.com/users/3830983/mcmastery"}, "reply_to_user": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1495051639, "post_id": 44033861, "comment_id": 75094433, "body": "Yes @KyleKhalaf I did. This is what they said to do."}, {"owner": {"reputation": 2659, "user_id": 3830983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c76a573f35925a2d72bf7cc8b2735251?s=128&d=identicon&r=PG&f=1", "display_name": "MCMastery", "link": "https://stackoverflow.com/users/3830983/mcmastery"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495051694, "post_id": 44033861, "comment_id": 75094460, "body": "@NathanOliver What? That&#39;s literally what I am running..."}, {"owner": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "edited": false, "score": 0, "creation_date": 1495051696, "post_id": 44033861, "comment_id": 75094462, "body": "Works fine for me... what compiler??"}, {"owner": {"reputation": 2659, "user_id": 3830983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c76a573f35925a2d72bf7cc8b2735251?s=128&d=identicon&r=PG&f=1", "display_name": "MCMastery", "link": "https://stackoverflow.com/users/3830983/mcmastery"}, "reply_to_user": {"reputation": 8788, "user_id": 6866309, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/CFXxE.jpg?s=128&g=1", "display_name": "Pavan Chandaka", "link": "https://stackoverflow.com/users/6866309/pavan-chandaka"}, "edited": false, "score": 0, "creation_date": 1495051715, "post_id": 44033861, "comment_id": 75094479, "body": "@katamarayudu I&#39;m using MinGW"}, {"owner": {"reputation": 2659, "user_id": 3830983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c76a573f35925a2d72bf7cc8b2735251?s=128&d=identicon&r=PG&f=1", "display_name": "MCMastery", "link": "https://stackoverflow.com/users/3830983/mcmastery"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495051768, "post_id": 44033861, "comment_id": 75094516, "body": "@NathanOliver I updated question"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495051828, "post_id": 44033861, "comment_id": 75094558, "body": "@MCMastery Thanks.  <a href=\"http://coliru.stacked-crooked.com/a/b12044590c247ce8\" rel=\"nofollow noreferrer\">I still cannot reproduce the issue</a>.  Maybe your installation is fubar&#39;d."}, {"owner": {"reputation": 57972, "user_id": 131140, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/11b4048e49b8b89f670cc984059d1677?s=128&d=identicon&r=PG", "display_name": "Goz", "link": "https://stackoverflow.com/users/131140/goz"}, "edited": false, "score": 0, "creation_date": 1495052359, "post_id": 44033861, "comment_id": 75094834, "body": "What version of MingW are you using?  Sounds highly likely you are using an older buggy version ... I&#39;d certainly try updating it first ..."}, {"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 2, "creation_date": 1495052428, "post_id": 44033861, "comment_id": 75094873, "body": "The code is correct. Something else is going on, probably something with build is broken, i.e. you are not running this code but something else entirely (old code or something)."}, {"owner": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "edited": false, "score": 0, "creation_date": 1495054449, "post_id": 44033861, "comment_id": 75095869, "body": "Double check that your cmd prompt is running in codepage <code>1252</code>. Many compilers have trouble if you use window&#39;s semi-broken utf-8 codepage called <code>65001</code>. You can ensure this by adding <code>chcp 152 &amp;&amp;</code> to the front of your build command. Also ensure that you build your project freshly before each run."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1495055736, "post_id": 44033861, "comment_id": 75096450, "body": "I have a lovely gif of a squadron of flying pigs dueling beagles on dog houses during the Great War. Glad to know that really happened."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "edited": false, "score": 1, "creation_date": 1495077085, "post_id": 44033861, "comment_id": 75102283, "body": "@Aaron3468 I think you have a typo with &quot;semi-&quot;"}, {"owner": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "reply_to_user": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "edited": false, "score": 0, "creation_date": 1495080187, "post_id": 44033861, "comment_id": 75103050, "body": "@PasserBy Semi is a valid prefix in English. But I missed a &quot;2&quot; in <code>1252</code>."}, {"owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "reply_to_user": {"reputation": 1604, "user_id": 5991423, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/beK29.jpg?s=128&g=1", "display_name": "Aaron3468", "link": "https://stackoverflow.com/users/5991423/aaron3468"}, "edited": false, "score": 0, "creation_date": 1495081951, "post_id": 44033861, "comment_id": 75103491, "body": "@Aaron3468 No, you misunderstood, the word is spelled &quot;&quot; :)"}], "answers": [{"comments": [{"owner": {"reputation": 16783, "user_id": 264325, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q8UVK.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/264325/ajay"}, "edited": false, "score": 0, "creation_date": 1495092088, "post_id": 44040158, "comment_id": 75108187, "body": "That code is valid. It is using range-based for loop (C++11). See: <a href=\"http://en.cppreference.com/w/cpp/language/range-for\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/range-for</a>"}], "tags": [], "owner": {"reputation": 353, "user_id": 7146064, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b9084d9a4ab7d538c18ee22181db60aa?s=128&d=identicon&r=PG&f=1", "display_name": "owenizedd", "link": "https://stackoverflow.com/users/7146064/owenizedd"}, "is_accepted": false, "score": -3, "last_activity_date": 1495088903, "creation_date": 1495088903, "answer_id": 44040158, "question_id": 44033861, "link": "https://stackoverflow.com/questions/44033861/c-looping-through-vector-runs-infinitely/44040158#44040158", "title": "C++ - Looping through vector runs infinitely", "body": "<p>I'm not an expert in CPP, but i assume your code is inserting string to the vector and iterate through the vector, if so, heres the code :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nusing namespace std; //i add this line to remove the \"std\" in every line\nint main()\n{\n    string expression = \"5+4\";\n    vector &lt;char&gt; characters(expression.begin(), expression.end());\n    for (int i=0; i&lt; characters.size(); i++)\n    {\n        cout &lt;&lt; characters[i] &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>An explanation that i can tell you is, you do not printing the vectors with its <strong>index</strong> so it'll have some bug also the looping i use i think more clear to see.</p>\n"}], "owner": {"reputation": 2659, "user_id": 3830983, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c76a573f35925a2d72bf7cc8b2735251?s=128&d=identicon&r=PG&f=1", "display_name": "MCMastery", "link": "https://stackoverflow.com/users/3830983/mcmastery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1061, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495088903, "creation_date": 1495051464, "last_edit_date": 1495052214, "question_id": 44033861, "link": "https://stackoverflow.com/questions/44033861/c-looping-through-vector-runs-infinitely", "title": "C++ - Looping through vector runs infinitely", "body": "<p>I'm new to C++, came from Java (started learning yesterday).</p>\n\n<p>I'm trying to loop over the elements of a vector. For some reason when I do this, it endlessly outputs empty lines.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\nint main()\n{\n    std::string expression = \"5+4\";\n    std::vector&lt;char&gt; characters(expression.begin(), expression.end());\n    for (char c : characters) {\n        std::cout &lt;&lt; c &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>I keep running into this problem, I have no clue why it is doing this.</p>\n\n<p>I tried searching if other people had this problem, but I couldn't find any questions about it or answers... what am I doing wrong?</p>\n\n<p><strong>EDIT:</strong>\nI'm using MinGW</p>\n\n<p>GIF or it didn't happen\n<a href=\"https://i.stack.imgur.com/NwGjC.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NwGjC.gif\" alt=\"gif\"></a></p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 1, "creation_date": 1495051068, "post_id": 44033724, "comment_id": 75094060, "body": "class B has no <code>print()</code>"}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 2, "creation_date": 1495051185, "post_id": 44033724, "comment_id": 75094141, "body": "If you want to ask, at runtime, &quot;what&#39;s the most-derived type of <code>this</code>&quot; then you can use <code>typeid(this).name()</code> (only works with polymorphic types). You may have to use a compiler-specific utility function to demangle this name. <a href=\"http://coliru.stacked-crooked.com/a/6781a148e7daea77\" rel=\"nofollow noreferrer\">Example</a>"}, {"owner": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "reply_to_user": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 0, "creation_date": 1495051859, "post_id": 44033724, "comment_id": 75094574, "body": "@cdhowie i would have never thought, that this can work, because i thought the typeid operator is resolved at compile time. That raises new questions, how typeid is implemented and how the type information is packed into the binary."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 0, "creation_date": 1495052579, "post_id": 44033724, "comment_id": 75094944, "body": "@OutOfBound Consider, for example, that <code>dynamic_cast&lt;void *&gt;(foo)</code> will return a pointer to the most-derived object type of the object pointed to by <code>foo</code>, provided that <code>foo</code> points at a polymorphic object. So in this way, we can obtain a pointer to &quot;the real object&quot; at runtime even without any special type information. From there, the <a href=\"https://en.wikipedia.org/wiki/Run-time_type_information\" rel=\"nofollow noreferrer\">RTTI</a> system (of which <code>typeid()</code> is a part) is able to return a <code>typeinfo</code> object for that pointer."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 0, "creation_date": 1495052797, "post_id": 44033724, "comment_id": 75095055, "body": "@OutOfBound Note the <code>dynamic_cast</code> stuff is only an example showing that the most-derived object can be determined. You wouldn&#39;t actually pass a void pointer to <code>typeid()</code> because it will tell you &quot;it&#39;s a void pointer.&quot; <code>typeid()</code> can be evaluated at compile time, but it <i>is not</i> evaluated at compile time when the operand is a reference to a polymorphic type."}, {"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "reply_to_user": {"reputation": 1688, "user_id": 7042011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7adfcdad8d36cc14d0c75dada3b301e2?s=128&d=identicon&r=PG&f=1", "display_name": "OutOfBound", "link": "https://stackoverflow.com/users/7042011/outofbound"}, "edited": false, "score": 0, "creation_date": 1495053116, "post_id": 44033724, "comment_id": 75095210, "body": "@OutOfBound <a href=\"http://coliru.stacked-crooked.com/a/a64d33dc3bd75015\" rel=\"nofollow noreferrer\">Here&#39;s an example</a> showing <code>typeid()</code> in action.  The <code>typeid()</code> evaluations for <code>*pa</code>, <code>*pb</code>, <code>ra</code>, and <code>rb</code> must be done at runtime (well, unless the compiler is smart enough to statically analyze the code to determine the concrete type of object the pointers/references refer to, but that is an optimization)."}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": false, "score": 0, "last_activity_date": 1495052072, "creation_date": 1495052072, "answer_id": 44034030, "question_id": 44033724, "link": "https://stackoverflow.com/questions/44033724/print-the-class-name-of-derived-class-using-inherited-function/44034030#44034030", "title": "Print the class name of derived class using inherited function", "body": "<p><code>__PRETTY_FUNCTION__</code> creates a compile-time determined string. <code>A</code> doesn't know (and, critically, <em>doesn't care</em>) whether anything actually eventually derives from it or not. It just creates a function that prints out <code>\"virtual void A::print()\"</code>.</p>\n\n<p>If you want a function like this to correctly identify the name of the class calling it, one option is to maintain the name as a query-able object associated with the base class.</p>\n\n<pre><code>class A {\npublic:\n    virtual void print() {printf(\"(%s) : %s\", get_name(), __PRETTY_FUNCTION__);}\n    virtual const char * get_name() {return \"A\";}\n};\n\nclass B : public A {\npublic:\n    virtual const char * get_name() {return \"B\";}\n};\n</code></pre>\n\n<p>The suggestion in the comments of using <code>typeid</code> to get the dynamic name would probably also work, but I've <em>never</em> used <code>typeid</code> before, so I can't personally vouch for its effectiveness.</p>\n"}], "owner": {"reputation": 1531, "user_id": 4335488, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e0c0f19b150060bf76c4709c44556d0e?s=128&d=identicon&r=PG&f=1", "display_name": "HSchmale", "link": "https://stackoverflow.com/users/4335488/hschmale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 884, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1495052072, "creation_date": 1495050975, "last_edit_date": 1495051451, "question_id": 44033724, "link": "https://stackoverflow.com/questions/44033724/print-the-class-name-of-derived-class-using-inherited-function", "title": "Print the class name of derived class using inherited function", "body": "<p>Is there any way to print the class name of a derived class with an inherited function without overriding that function in the derived class?</p>\n\n<pre><code>class A {\npublic:\n    virtual void print() { printf(\"%s\", __PRETTY_FUNCTION__); }\n};\n\nclass B : public A {};\n\nint main() {\n    B b;\n\n    b.print() // should yield \"B::print()\" but yields \"A::print()\"\n}\n</code></pre>\n\n<p>I'm asking so that I can just call up <code>A::print()</code> in an overridden function to print the attributes related to the parent class, but include the current class name.</p>\n"}, {"tags": ["c++", "c++11", "std", "deque"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1495050101, "post_id": 44033479, "comment_id": 75093469, "body": "Are you worried that it won&#39;t be guaranteed to always work?"}, {"owner": {"reputation": 6715, "user_id": 2899280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4458bb90b869271c5787c7e600b4ed8e?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Allred", "link": "https://stackoverflow.com/users/2899280/brad-allred"}, "edited": false, "score": 1, "creation_date": 1495050168, "post_id": 44033479, "comment_id": 75093511, "body": "they spec only requires <code>class ForwardIt</code> so this should work for any collection that implements forward iteration. It has nothing to do with contiguous storage at all."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1495050172, "post_id": 44033479, "comment_id": 75093515, "body": "<code>std::max_elements</code> only requires a forward iterator see: <a href=\"http://en.cppreference.com/w/cpp/algorithm/max_element\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/algorithm/max_element</a>"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 1, "creation_date": 1495050188, "post_id": 44033479, "comment_id": 75093524, "body": "<code>max_element</code> only requires that the iterator is a ForwardIterator. It does not require random access/data continuitiy"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 11, "creation_date": 1495050259, "post_id": 44033479, "comment_id": 75093569, "body": "The whole point of using iterators rather than pointers is to make this kind of stuff work."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1495087831, "post_id": 44033479, "comment_id": 75105599, "body": "There&#39;s actually a second point to iterators: to not compile code which can&#39;t work. <code>std::sort</code> will fail to compile, if you pass Forward Iterators."}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1495194580, "post_id": 44033479, "comment_id": 75162470, "body": "Achtung grammar Nazi\u2026 if you give me a gold bar every day, and I put it on a heap in my basement, I&#39;m storing them continuously. If you give me 100 gold bars, and I put them all in a row, I am storing them contiguously. Either way you may assume I will be very grateful for all the gold. ;-)"}], "answers": [{"comments": [{"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1495194295, "post_id": 44033526, "comment_id": 75162238, "body": "You&#39;re right about <code>max_element</code> requiring forward iterators only, however there seems to be some confusion about the category of <code>std::deque</code> iterators (they&#39;re random access). Having random access iterators does not imply contiguous storage."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 6, "last_activity_date": 1495050204, "creation_date": 1495050204, "answer_id": 44033526, "question_id": 44033479, "link": "https://stackoverflow.com/questions/44033479/can-i-use-stdmax-element-on-stddeque-in-c11/44033526#44033526", "title": "Can I use std::max_element() on std::deque in c++11?", "body": "<p>Yes it will work correctly. The overload of <code>std::max_element</code> that will be invoked in this case is</p>\n\n<pre><code>template&lt; class ForwardIt &gt; \nForwardIt max_element(ForwardIt first, ForwardIt last);\n</code></pre>\n\n<p>The only requirements on the iterators are</p>\n\n<blockquote>\n  <p><code>first</code>, <code>last</code>    -   forward iterators defining the range to examine</p>\n</blockquote>\n\n<p>So there is no requirement about random access iterators, only forward iterators.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 7, "last_activity_date": 1495050342, "creation_date": 1495050342, "answer_id": 44033560, "question_id": 44033479, "link": "https://stackoverflow.com/questions/44033479/can-i-use-stdmax-element-on-stddeque-in-c11/44033560#44033560", "title": "Can I use std::max_element() on std::deque in c++11?", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/algorithm/max_element\" rel=\"noreferrer\"><code>std::max_element</code></a> has a signature in the form of</p>\n\n<pre><code>template&lt;class ForwardIterator&gt;\nForwardIterator max_element(ForwardIterator first, ForwardIterator last);\n</code></pre>\n\n<p>From the template type name we know that it requires a forward iterator.  Per [container.requirements.general]-Table 96 we know that <code>std::deque</code> uses  </p>\n\n<blockquote>\n  <p>any iterator category that meets the forward iterator requirements</p>\n</blockquote>\n\n<p>So since it uses a forward iterator or better it will always be okay.</p>\n"}], "owner": {"reputation": 349, "user_id": 5025141, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c467e4f9482dfd9f379314321dd9f600?s=128&d=identicon&r=PG&f=1", "display_name": "user5025141", "link": "https://stackoverflow.com/users/5025141/user5025141"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 0, "accepted_answer_id": 44033560, "answer_count": 2, "score": 6, "last_activity_date": 1495050342, "creation_date": 1495050018, "question_id": 44033479, "link": "https://stackoverflow.com/questions/44033479/can-i-use-stdmax-element-on-stddeque-in-c11", "title": "Can I use std::max_element() on std::deque in c++11?", "body": "<p>Can I code like <code>std::max_element(std::begin(my_deque), std::end(my_deque))</code>?</p>\n\n<p>I am asking because I know deque is not guaranteed to store continuously, so I want to know if it will behave correctly when using functions involving iterator like <code>std::max_element</code>?</p>\n\n<p>Thank you very much! </p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 21326, "user_id": 1679849, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lpvxY.png?s=128&g=1", "display_name": "r3mainer", "link": "https://stackoverflow.com/users/1679849/r3mainer"}, "edited": false, "score": 2, "creation_date": 1495049985, "post_id": 44033448, "comment_id": 75093420, "body": "<a href=\"https://en.wikipedia.org/wiki/C_data_types#stdint.h\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/C_data_types#stdint.h</a>"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 1, "creation_date": 1495050061, "post_id": 44033448, "comment_id": 75093449, "body": "Portability, serialization, marshalling..... there are a number of times when you want an <i>exact known size</i> of all of your types"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 0, "creation_date": 1495050173, "post_id": 44033448, "comment_id": 75093516, "body": "Because the types <code>long long</code> and <code>long</code> and <code>int</code> and <code>short</code> are defined to be of a <i>minimum</i> size. If you <b>must</b> have 32 bits then on an architecture where <code>int</code> is 16 bits <code>int32_t</code> will do the job."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1495050271, "post_id": 44033448, "comment_id": 75093577, "body": "There are many portability concerns unrelated to integer representation and range."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1495050318, "post_id": 44033448, "comment_id": 75093599, "body": "Use of <code>int32_t</code> can <i>decrease</i> portability as a rare platform might be using non-2&#39;s complement integers.  Of course, if the code needs 2&#39;s complement to run right, that is good."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495050511, "post_id": 44033448, "comment_id": 75093707, "body": "@nathan That&#39;s one of the rare cases that applies for both languages equally."}], "answers": [{"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 2, "creation_date": 1495050161, "post_id": 44033500, "comment_id": 75093506, "body": "<code>int32_t</code> also insures 2&#39;s complement.  <code>int</code> does not."}, {"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 2, "creation_date": 1495050348, "post_id": 44033500, "comment_id": 75093610, "body": "@EugeneSh.: C11 draft standard n1570: <i>7.20.1.1 Exact-width integer types 1 The typedef name intN_t designates a signed integer type with width N , no padding bits, and a two\u2019s complement representation. Thus, int8_t denotes such a signed integer type with a width of exactly 8 bits.</i>"}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1495050444, "post_id": 44033500, "comment_id": 75093669, "body": "@EugeneSh. Detail: <code>int32_t</code> is <i>optional</i> for those rare platforms using non-2&#39;s complement.  A compliant platform need not have <code>int32_t</code>."}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1495050448, "post_id": 44033500, "comment_id": 75093675, "body": "@EOF Good one, thanks. This is why I like SO. Every day something new..."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1495050428, "last_edit_date": 1495050428, "creation_date": 1495050108, "answer_id": 44033500, "question_id": 44033448, "link": "https://stackoverflow.com/questions/44033448/use-of-int32-t-in-c-or-c/44033500#44033500", "title": "use of int32_t in c or c++?", "body": "<blockquote>\n  <ol>\n  <li>Firstly, why do we need int32_t as we already have different variation for it like short int unsigned int and etc.</li>\n  </ol>\n</blockquote>\n\n<p>Because <code>short int</code>, <code>unsigned int</code>, etc aren't portable among architectures.</p>\n\n<p>If you mean exactly 32 bits, just say that explicitely. Otherwise you might end up using 64 bits just using the <code>unsigned int</code> with a different CPU architecture.</p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li>Secondly does the use of this type of fixed size types makes programs portable?</li>\n  </ol>\n</blockquote>\n\n<p>Yes, as mentioned above.</p>\n"}, {"tags": [], "owner": {"reputation": 366, "user_id": 8024984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60731b46db8858e14685f07fef1eb29e?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhail Romanko", "link": "https://stackoverflow.com/users/8024984/mikhail-romanko"}, "is_accepted": false, "score": 1, "last_activity_date": 1495050160, "creation_date": 1495050160, "answer_id": 44033513, "question_id": 44033448, "link": "https://stackoverflow.com/questions/44033448/use-of-int32-t-in-c-or-c/44033513#44033513", "title": "use of int32_t in c or c++?", "body": "<p>1) int32_t provides <strong>exact 32 bit integer</strong>. This is important because you can port your applications to different platforms without rewriting algorithm (if they will compile and yes, int is not always 16 or 32 or 64 bit wide, check C Reference). Check <a href=\"http://en.cppreference.com/w/c/types/integer\" rel=\"nofollow noreferrer\">nice self-explanatory page about stdint.h types</a></p>\n\n<p>2) Probably, yes</p>\n"}], "owner": {"reputation": 3, "user_id": 8027484, "user_type": "registered", "profile_image": "https://graph.facebook.com/213962672443030/picture?type=large", "display_name": "Saroj Kumar Mallick", "link": "https://stackoverflow.com/users/8027484/saroj-kumar-mallick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3107, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1495050475, "creation_date": 1495049918, "last_edit_date": 1495050475, "question_id": 44033448, "link": "https://stackoverflow.com/questions/44033448/use-of-int32-t-in-c-or-c", "title": "use of int32_t in c or c++?", "body": "<p>I have two questions in my mind now:</p>\n\n<ol>\n<li><p>Firstly, why do we need int32_t as we already have different variation for it like short int unsigned int and etc.</p></li>\n<li><p>Secondly does the use of this type of fixed size types makes programs portable?</p></li>\n</ol>\n"}, {"tags": ["c++", "mpi", "jpeg"], "answers": [{"tags": [], "owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 0, "last_activity_date": 1495050103, "creation_date": 1495050103, "answer_id": 44033499, "question_id": 44033376, "link": "https://stackoverflow.com/questions/44033376/how-to-manipulate-jpeg-in-cpp-using-chars/44033499#44033499", "title": "How to manipulate JPEG in cpp using chars?", "body": "<p>Instead of <code>flat_image_array[j*k+k]</code> you want <code>flat_image_array[j*Input.Width+k]</code>. By incorrectly indexing <code>flat_image_array</code> you are leaving holes and overwriting previous values.</p>\n"}], "owner": {"reputation": 1, "user_id": 4235640, "user_type": "registered", "profile_image": "https://graph.facebook.com/699225912/picture?type=large", "display_name": "Jonathan Ovadia", "link": "https://stackoverflow.com/users/4235640/jonathan-ovadia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495051088, "creation_date": 1495049715, "last_edit_date": 1495051088, "question_id": 44033376, "link": "https://stackoverflow.com/questions/44033376/how-to-manipulate-jpeg-in-cpp-using-chars", "title": "How to manipulate JPEG in cpp using chars?", "body": "<p>I'm experiencing very strange behaviour in cpp. I'm doing some parallel  image processing using the MPI framework, and need to convert a 2D array of JSAMPLE's to a flat array of unsigned chars. \n  I am able to do this, however when I attempt to write the image from the flat array to a JPEG file the output is fuzzy, however if I set the value of the output from the flat array at the same point I read it from the 2d array it works fine. </p>\n\n<p>This is very weird to me. I'ma  pretty experienced cpp developer but have not worked that much with the  JPEG library. </p>\n\n<p>I think it might have something to do with memory allocation.</p>\n\n<pre><code>// create a flat array of unsigned chars from image\nchar* flat_image_array = new  char[span*Input.Width*Input.Components];\nfor(int j = 0; j &lt; span; ++j) {\n    for (int k = 0; k &lt; Input.Width * Input.Components; ++k) {\n        flat_image_array[j*k+k] = imageSegment[j][k];\n        // if I set output here it works fine\n\n        //Output.Rows[j][k] =flat_image_array[j*k+k];\n    }\n}\n\nfor(int j = 0; j &lt; span; ++j) {\n    for (int k = 0; k &lt; Input.Width * Input.Components; ++k) {\n        //but if I set output here the image comes out very fuzzy\n        Output.Rows[j][k] = flat_image_array[j*k+k];\n    }\n}\n\nstd::stringstream file;\nfile &lt;&lt; \"Data/segment_\" &lt;&lt; (i) &lt;&lt;\".jpg\";\nif(!Output.Write(file.str().c_str())){\n    printf(\"Cannot write image\\n\");\n    return;\n}\n</code></pre>\n"}, {"tags": ["c++", "memory", "pthreads", "heap", "ram"], "comments": [{"owner": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 2, "creation_date": 1495049822, "post_id": 44033310, "comment_id": 75093315, "body": "Unless you want <code>malloc()</code> to take a lock on every allocation (horrifically slow), you want a <code>malloc()</code> implementation where every thread has its own block of memory to distribute to <code>malloc()</code> calls in that thread (you still need synchronization occasionally, when an allocation <code>malloc()</code>ed in one thread is <code>free()</code>d in another)."}, {"owner": {"reputation": 726, "user_id": 4559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a77d2047ecbc9dd61c986c4399e665?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Fryer", "link": "https://stackoverflow.com/users/4559356/chris-fryer"}, "reply_to_user": {"reputation": 5821, "user_id": 3185968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc0f4eda45ce3e2ff4249afbfdac43e?s=128&d=identicon&r=PG&f=1", "display_name": "EOF", "link": "https://stackoverflow.com/users/3185968/eof"}, "edited": false, "score": 0, "creation_date": 1495050760, "post_id": 44033310, "comment_id": 75093870, "body": "@EOF That makes sense so you would say this is expected behaviour? +10MB to use the heap sounds reasonable but why the +66MB jump to use the heap in the thread?"}], "answers": [{"comments": [{"owner": {"reputation": 726, "user_id": 4559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a77d2047ecbc9dd61c986c4399e665?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Fryer", "link": "https://stackoverflow.com/users/4559356/chris-fryer"}, "edited": false, "score": 0, "creation_date": 1495284627, "post_id": 44082555, "comment_id": 75194346, "body": "I looked at the smaps file for the process as you suggest. There is a 65536 kB entry with RSS of zero so, as you say, the process isn&#39;t using the memory. However, it is available to use - I can create a 64 MB (-1kB) array without the VIRT entry increasing. So doesn&#39;t this mean that 64 MB of system resource is allocated to the process? and, as such, that&#39;s 64 MB that can&#39;t be allocated to other processes? It&#39;s clear that different threads should be allocated different arenas but why does the pthread instance get 64 MB when the main thread only gets 8 MB?"}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": false, "score": 0, "last_activity_date": 1495260675, "creation_date": 1495260675, "answer_id": 44082555, "question_id": 44033310, "link": "https://stackoverflow.com/questions/44033310/using-the-heap-in-a-pthread-allocates-100mb-of-ram/44082555#44082555", "title": "Using the heap in a pthread allocates &gt;100MB of RAM", "body": "<blockquote>\n  <p>I read that threads share a heap</p>\n</blockquote>\n\n<p>Correct.</p>\n\n<blockquote>\n  <p>so why the big jump when using the heap from within the pthread?</p>\n</blockquote>\n\n<p>The GLIBC (and many other) malloc implementation uses per-thread arenas to avoid all threads contending for a single heap lock.</p>\n\n<p>The very first <code>malloc(1)</code> in each thread will create an entire new arena (usually via <code>mmap</code>). The size of the arena is an implementation detail, 2 or 4 MB is not unreasonable.</p>\n\n<blockquote>\n  <p>RAM as measured by the VIRT column of top</p>\n</blockquote>\n\n<p>This isn't a good measurement. A program can have a huge <em>virt</em> size, but use very little actual memory. Just try to mmap 1 GB of memory but don't touch it -- your program <code>VIRT</code> will go through the roof, but system available memory will not be reduced at all.</p>\n\n<blockquote>\n  <p>The code will later target an embedded system with very limited resources so understanding these allocations is quite important.</p>\n</blockquote>\n\n<p>In that case you want better tools than <code>top</code>. Accurate accounting for <em>actual</em> memory usage on Linux is somewhat tricky. You could start by looking at <code>/proc/$pid/smaps</code>.</p>\n"}], "owner": {"reputation": 726, "user_id": 4559356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a77d2047ecbc9dd61c986c4399e665?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Fryer", "link": "https://stackoverflow.com/users/4559356/chris-fryer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 886, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1495260675, "creation_date": 1495049450, "last_edit_date": 1495053470, "question_id": 44033310, "link": "https://stackoverflow.com/questions/44033310/using-the-heap-in-a-pthread-allocates-100mb-of-ram", "title": "Using the heap in a pthread allocates &gt;100MB of RAM", "body": "<p>A simple pthread test case allocates the following RAM as measured by the VIRT column of top:</p>\n\n<p>No pthread/heap usage: 4224 kB<br>\nUse pthread but no heap: 14716 kB<br>\nUse pthread and heap in main (but not thread): 23632 kB<br>\nUse pthread and heap in main and thread: 89168 kB  </p>\n\n<p>Why would so much RAM be allocated? valgrind --page-as-heap=yes shows peak heap allocation of 127MB.</p>\n\n<p>I read that threads share a heap so why the big jump when using the heap from within the pthread? The code will later target an embedded system with very limited resources so understanding these allocations is quite important.</p>\n\n<p>Compiled with the following (g++ version 5.4.0 on Ubuntu 16.04):  </p>\n\n<pre><code>g++ -O2 -pthread thread.cpp\n</code></pre>\n\n<p>thread.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;pthread.h&gt;\n#include &lt;unistd.h&gt;\n\n#define USE_THREAD\n#define USE_HEAP_IN_MAIN\n#define USE_HEAP_IN_THREAD\n\nint *arr_thread;\nint *arr_main;\n\nvoid *use_heap(void *arg){\n#ifdef USE_HEAP_IN_THREAD\n    arr_thread=new int[10];\n    arr_thread[0]=1234;\n#endif\n    usleep(10000000);\n}\n\nint main() {\n    pthread_t t1;\n#ifdef USE_HEAP_IN_MAIN\n    arr_main=new int[10];\n    arr_main[0]=5678;\n#endif\n\n#ifdef USE_THREAD\n    pthread_create(&amp;t1, NULL, &amp;use_heap, NULL);\n    pthread_join(t1,NULL);\n#else\n    usleep(10000000);\n#endif\n\n    return 0;\n}\n</code></pre>\n\n<ul>\n<li>edited to use global ptrs to demonstrate the effect with -O2.</li>\n</ul>\n"}, {"tags": ["c++", "csv", "error-handling", "getline"], "comments": [{"owner": {"reputation": 6145, "user_id": 347849, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dwFwp.jpg?s=128&g=1", "display_name": "Andy Evans", "link": "https://stackoverflow.com/users/347849/andy-evans"}, "edited": false, "score": 0, "creation_date": 1495049250, "post_id": 44033110, "comment_id": 75093008, "body": "Folks, if you&#39;re to down vote someone&#39;s question, at least have the courtesy to leave a constructive comment. Drive-by down-voting is so childish."}, {"owner": {"reputation": 21, "user_id": 6821556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e68683b2b79615d83ce99b9817e6abc?s=128&d=identicon&r=PG&f=1", "display_name": "Jack G.", "link": "https://stackoverflow.com/users/6821556/jack-g"}, "reply_to_user": {"reputation": 6145, "user_id": 347849, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/dwFwp.jpg?s=128&g=1", "display_name": "Andy Evans", "link": "https://stackoverflow.com/users/347849/andy-evans"}, "edited": false, "score": 0, "creation_date": 1495049492, "post_id": 44033110, "comment_id": 75093140, "body": "I tried to find a solution, but I do not deal with programming on a daily basis, so I asked a question and I count on any help. :)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495049694, "post_id": 44033110, "comment_id": 75093246, "body": "SO is not a free coding service. You have to make some attempt to solve the problem yourself. If you can&#39;t get it working, post what you tried and we&#39;ll help you fix it. And if you&#39;re not really a programmer, maybe you need to hire one to solve problems like this for you."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1495055147, "post_id": 44033110, "comment_id": 75096177, "body": "Take a look at <a href=\"http://stackoverflow.com/questions/7868936/read-file-line-by-line\">Read file line by line</a> answer 1, option 2 for a better ideology for reading the file that will resolve point 2 and quite a few other failure cases you don&#39;t seem to be aware of."}], "owner": {"reputation": 21, "user_id": 6821556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e68683b2b79615d83ce99b9817e6abc?s=128&d=identicon&r=PG&f=1", "display_name": "Jack G.", "link": "https://stackoverflow.com/users/6821556/jack-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495048696, "creation_date": 1495048696, "question_id": 44033110, "link": "https://stackoverflow.com/questions/44033110/reading-from-csv-file-by-getline-c", "title": "Reading from .csv file by getline() C++", "body": "<p>My program reads data from a .csv file it works fine when the data is in the correct format, but I wonder if it is possible to: </p>\n\n<ol>\n<li><p>Check whether the loaded data only number (assumption of the program, the data can not be letters of the alphabet)</p></li>\n<li><p>Check whether or not we load empty lines</p></li>\n<li><p>Is the number of loaded characters, eg 8.</p></li>\n</ol>\n\n<p>If so, how can I do it?</p>\n\n<pre><code>int main(){\nifstream ip('table.csv');\n    if(!ip.is_open()){\n        cout &lt;&lt; \"ERROR\" &lt;&lt; endl;\n    }\n\n\n int n = 3926;\n const int CAPACITY = 3926;\n const int CAPACITY2 = 7;\n string multi [CAPACITY][CAPACITY2];\n float TABLE[CAPACITY][CAPACITY2];\n\nif(ip.good()){\n\nfor ( int i=0; i&lt;=3925; i++)\n    {\n    int k=0;\n    getline(ip, multi[i][k], ',');\n    getline(ip, multi[i][k+1], ',');\n    getline(ip, multi[i][k+2], ',');\n    getline(ip, multi[i][k+3], ',');\n    getline(ip, multi[i][k+4], ',');\n    getline(ip, multi[i][k+5], ',');\n    getline(ip, multi[i][k+6], '\\n');\n\n\n\n\n    // change from char to float\n    TABLE[i][k] = atof(multi[i][k].c_str());\n    TABLE[i][k+1] = atof(multi[i][k+1].c_str());\n    TABLE[i][k+2] = atof(multi[i][k+2].c_str());\n    TABLE[i][k+3] = atof(multi[i][k+3].c_str());\n    TABLE[i][k+4] = atof(multi[i][k+4].c_str());\n    TABLE[i][k+5] = atof(multi[i][k+5].c_str());\n    TABLE[i][k+6] = atof(multi[i][k+6].c_str());\n        }\n    }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "gcc", "c++14", "variadic-templates"], "comments": [{"owner": {"reputation": 257, "user_id": 7954528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a645cd5b153088dfb79b3817de27aec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7954528/andrew"}, "edited": false, "score": 1, "creation_date": 1495075900, "post_id": 44033060, "comment_id": 75102008, "body": "Any time I see deduction issues in constructors, I make sure I add explicit keyword to any constructors with (possibly) one argument. Does adding explicit help?"}, {"owner": {"reputation": 133, "user_id": 6290597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L0GTY.png?s=128&g=1", "display_name": "Josh Parker", "link": "https://stackoverflow.com/users/6290597/josh-parker"}, "reply_to_user": {"reputation": 257, "user_id": 7954528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a645cd5b153088dfb79b3817de27aec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7954528/andrew"}, "edited": false, "score": 0, "creation_date": 1495077270, "post_id": 44033060, "comment_id": 75102325, "body": "Thanks for that suggestion Andrew. I gave that a try, but still no luck. I&#39;m completely puzzled as to why gcc deduces the &#39;bool&#39;. I have verified this code also compiles with llvm-Clang (but Clang, at least Apple&#39;s version, tends to be less compliant to the standard)."}, {"owner": {"reputation": 257, "user_id": 7954528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a645cd5b153088dfb79b3817de27aec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7954528/andrew"}, "edited": false, "score": 0, "creation_date": 1495079088, "post_id": 44033060, "comment_id": 75102772, "body": "I added explicit to the constructor of DependentClassOne. I now get the compile error: &lt;source&gt;: In constructor &#39;DependentClassTwo::DependentClassTwo(const tDependencies&amp;)&#39;: &lt;source&gt;:100:47: error: no matching function for call to &#39;DependentClassOne::DependentClassOne(const tDependencies&amp;)&#39;        tBase::DependencyInjectable(dependencies). The dependencies for DependentClassOne are different from DependentClassTwo aren&#39;t they?"}, {"owner": {"reputation": 257, "user_id": 7954528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a645cd5b153088dfb79b3817de27aec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7954528/andrew"}, "edited": false, "score": 0, "creation_date": 1495079389, "post_id": 44033060, "comment_id": 75102856, "body": "If you change the constructor of DependentClassTwo to: explicit      DependentClassTwo(const tDependencies &amp;dependencies)     : tDependencyInjectable(dependencies),       tBase(dependencies),       tBase::DependencyInjectable(typename DependentClassOne::tDependencies(dependencies))        { }     Then you get the compile error note:   no known conversion for argument 1 from &#39;const tDependencies {aka const DependencyInjectable&lt;DependencyOne*, DependencyTwo*&gt;}&#39; to &#39;const tDependencies&amp; {aka const DependencyInjectable&lt;DependencyOne*&gt;&amp;}&#39; as expected. I am confused why this works in clang."}, {"owner": {"reputation": 257, "user_id": 7954528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a645cd5b153088dfb79b3817de27aec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7954528/andrew"}, "edited": false, "score": 0, "creation_date": 1495079689, "post_id": 44033060, "comment_id": 75102915, "body": "Adding explicit to DependencyInjectible constructor causes clang to no longer compile. In short, I am guessing this works in clang and vs due to implicit conversions."}, {"owner": {"reputation": 133, "user_id": 6290597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L0GTY.png?s=128&g=1", "display_name": "Josh Parker", "link": "https://stackoverflow.com/users/6290597/josh-parker"}, "reply_to_user": {"reputation": 257, "user_id": 7954528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a645cd5b153088dfb79b3817de27aec?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/7954528/andrew"}, "edited": false, "score": 0, "creation_date": 1495080486, "post_id": 44033060, "comment_id": 75103130, "body": "Thanks for taking another look at it. I applied the explicit directive to just the constructors in the specialization. I actually did intend for the implicit conversion in the un-specialized version to take place - the reason why is that I want classes that derive from an already injection dependent class to inherit the base class&#39;s dependencies - it&#39;s hard to tell what my intent is from this condensed version. In this case, DependentClassOne will be initialized with more dependencies than it needs, but it just ignores those which it doesn&#39;t need. I can post the full code, but it&#39;s kinda long."}], "owner": {"reputation": 133, "user_id": 6290597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L0GTY.png?s=128&g=1", "display_name": "Josh Parker", "link": "https://stackoverflow.com/users/6290597/josh-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495060115, "creation_date": 1495048487, "last_edit_date": 1495060115, "question_id": 44033060, "link": "https://stackoverflow.com/questions/44033060/failure-to-correctly-deduce-mixture-of-variadic-type-and-non-type-template-param", "title": "Failure to correctly deduce mixture of Variadic Type and non-Type Template Parameter Packs in GCC", "body": "<p>Okay folks, I have attempted to minimize the following code to illustrate the problem I am having. It's rather nasty looking, and omits much of the original code. Although not necessarily relevant to the issue I'm having, I'm trying to implement a mechanism for dependency injection. I'm trying to design it such that classes derived from an already injection-dependent class will be able to inherit dependencies from their respective parent. I can provide the full code if desired, but this more minimal version suffices to produce the issue. </p>\n\n<pre><code>#include &lt;tuple&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt;typename ... Dependencies&gt;\nclass DependencyInjectable\n{\npublic:\n\n    typedef DependencyInjectable&lt;Dependencies ...&gt; tDependencies;\n    typedef tDependencies tDependencyInjectable;\n    typedef std::tuple&lt;Dependencies ...&gt; tTuple;\n    static const constexpr size_t Depth = 0;\n\n    template&lt;typename Arg, typename DecayArg = typename std::decay&lt;Arg&gt;::type, typename ... Args,\n             typename = std::enable_if_t&lt;!std::is_same&lt;DecayArg, bool&gt;::value&gt;&gt;\n    DependencyInjectable(Arg &amp;&amp;arg, Args &amp;&amp; ... args) { }\n\n    virtual ~DependencyInjectable(void) { }\n};\n\ntemplate&lt;typename T&gt; struct tuple_as_dependency_injectable_type { };\ntemplate&lt;typename ... Args&gt; struct tuple_as_dependency_injectable_type&lt;std::tuple&lt;Args ...&gt;&gt;\n{\n    typedef DependencyInjectable&lt;Args ...&gt; type;\n};\n\ntemplate&lt;typename T&gt; struct dependencies_of { typedef T type; };\n\ntemplate&lt;typename Dependency, typename ... Dependencies&gt;\nclass DependencyInjectable&lt;dependencies_of&lt;Dependency&gt;, Dependencies ...&gt;\n    : virtual public Dependency::tDependencyInjectable,\n    public tuple_as_dependency_injectable_type&lt;decltype(std::tuple_cat(std::declval&lt;\n                                                        typename Dependency::tDependencyInjectable::tTuple&gt;(),\n                                                        std::declval&lt;std::tuple&lt;Dependencies ...&gt;&gt;()))&gt;::type\n{\npublic:\n\n    template&lt;typename Arg, bool = Arg::Depth != 0, typename ... Args&gt;\n    struct get_virtual_bases\n    {\n        typedef typename Arg::tBase T;\n        typedef typename get_virtual_bases&lt;T, T::Depth != 0,\n            typename Arg::tDependencyInjectable, Args ...&gt;::type type;\n    };\n\n    template&lt;typename Arg, typename ... Args&gt;\n    struct get_virtual_bases&lt;Arg, false, Args ...&gt;\n    {\n        typedef std::tuple&lt;typename Arg::tDependencyInjectable, Args ...&gt; type;\n    };\n\n    typedef decltype(std::tuple_cat(std::declval&lt;typename Dependency::tDependencyInjectable::tTuple&gt;(),\n                     std::declval&lt;std::tuple&lt;Dependencies ...&gt;&gt;())) tTuple;\n    typedef typename tuple_as_dependency_injectable_type&lt;tTuple&gt;::type tDependencies;\n    typedef DependencyInjectable&lt;dependencies_of&lt;Dependency&gt;, Dependencies ...&gt; tDependencyInjectable;\n    typedef Dependency tBase;\n    static const constexpr auto Depth = 1 + std::tuple_size&lt;typename get_virtual_bases&lt;tBase&gt;::type&gt;::value;\n\n    template&lt;typename Arg, typename ... Args, typename std::enable_if&lt;\n        !std::is_same&lt;typename std::decay&lt;Arg&gt;::type, decltype(std::make_index_sequence&lt;Depth - 1&gt;{ })&gt;::value, int&gt;::type = 0&gt;\n        DependencyInjectable(Arg &amp;&amp;arg, Args &amp;&amp; ... args)\n        : DependencyInjectable(std::make_index_sequence&lt;Depth - 1&gt;{ }, std::make_index_sequence&lt;1 + sizeof ... (Args)&gt; { },\n                               std::forward_as_tuple(arg, std::forward&lt;Args&gt;(args) ...)) { }\n\nprivate:\n\n    template&lt;typename ... Args, size_t ... IndicesOne, size_t ... IndicesTwo&gt;\n    DependencyInjectable(const std::index_sequence&lt;IndicesOne ...&gt; &amp;, const std::index_sequence&lt;IndicesTwo ...&gt; &amp;,\n                         const std::tuple&lt;Args ...&gt; &amp;tuple)\n        : std::tuple_element&lt;IndicesOne, typename get_virtual_bases&lt;\n        typename Dependency::tDependencyInjectable&gt;::type&gt;::type(std::get&lt;IndicesTwo&gt;(tuple) ...) ...,\n        tDependencies(std::get&lt;IndicesTwo&gt;(tuple) ...) { }\n\npublic:\n\n    virtual ~DependencyInjectable(void) { }\n};\n</code></pre>\n\n<p>Here is a code snippet that tests the class:</p>\n\n<pre><code>struct DependencyOne { };\nstruct DependencyTwo { };\n\nclass DependentClassOne\n: virtual public DependencyInjectable&lt;DependencyOne *&gt;\n{\npublic:\n\n    DependentClassOne(const tDependencies &amp;dependencies) : tDependencyInjectable(dependencies) { }\n    virtual ~DependentClassOne(void) { }\n};\n\nclass DependentClassTwo\n: public DependentClassOne,\n  virtual public DependencyInjectable&lt;dependencies_of&lt;DependentClassOne&gt;, DependencyTwo *&gt;\n{\npublic:\n    DependentClassTwo(const tDependencies &amp;dependencies)\n    : tBase(dependencies),\n      tBase::DependencyInjectable(dependencies),\n      tDependencyInjectable(dependencies) { }\n\n    virtual ~DependentClassTwo(void) { }\n};\n\nint main(int argc, char **argv)\n{\n    DependencyOne dependencyOne;\n    DependencyTwo dependencyTwo;\n\n    auto &amp;&amp;tuple = std::make_tuple(&amp;dependencyOne, &amp;dependencyTwo);\n\n    DependentClassOne dependentClassOne(tuple);\n    DependentClassTwo dependentClassTwo(tuple);\n\n    return 0;\n}\n</code></pre>\n\n<p>Compiling this code with GCC 6.3.0 produces the following errors:</p>\n\n<pre><code>: In instantiation of 'DependencyInjectable&lt;dependencies_of&lt;Dependency&gt;, Dependencies ...&gt;::DependencyInjectable(std::index_sequence&lt;IndicesOne ...&gt;&amp;, std::index_\nsequence&lt;IndicesTwo ...&gt;&amp;, const std::tuple&lt;_Args1 ...&gt;&amp;) [with Args = {const DependencyInjectable&lt;DependencyOne*, DependencyTwo*&gt;&amp;}; long long unsigned int ...IndicesOne = {0ull}; long long unsigned\nint ...IndicesTwo = {0ull}; Dependency = DependentClassOne; Dependencies = {DependencyTwo*}; std::index_sequence&lt;IndicesOne ...&gt; = std::integer_sequence&lt;long long unsigned int, 0ull&gt;; std::index_seque\nnce&lt;IndicesTwo ...&gt; = std::integer_sequence&lt;long long unsigned int, 0ull&gt;]':\n:63:88:   required from 'DependencyInjectable&lt;dependencies_of&lt;Dependency&gt;, Dependencies ...&gt;::DependencyInjectable(Arg&amp;&amp;, Args&amp;&amp; ...) [with Arg = const Dependency\nInjectable&lt;DependencyOne*, DependencyTwo*&gt;&amp;; Args = {}; typename std::enable_if&lt;(! std::is_same&lt;typename std::decay&lt;Arg&gt;::type, decltype (typename std::_Make_integer_sequence&lt;long long unsigned int, (\nDependencyInjectable&lt;dependencies_of&lt;Dependency&gt;, Dependencies ...&gt;::Depth - 1), typename std::_Build_index_tuple&lt;(DependencyInjectable&lt;dependencies_of&lt;Dependency&gt;, Dependencies ...&gt;::Depth - 1)&gt;::__t\nype&gt;::__type{})&gt;::value), int&gt;::type &lt;anonymous&gt; = 0; Dependency = DependentClassOne; Dependencies = {DependencyTwo*}]'\n:99:41:   required from here\n:72:54: error: no matching function for call to 'DependencyInjectable&lt;DependencyOne*&gt;::DependencyInjectable(bool)'\n         tDependencies(std::get&lt;IndicesTwo&gt;(tuple) ...) { }\n                                                      ^\n:16:5: note: candidate: template&lt;class Arg, class DecayArg, class ... Args, class&gt; DependencyInjectable&lt;Dependencies&gt;::DependencyInjectable(Arg&amp;&amp;, Args&amp;&amp; ...)\n     DependencyInjectable(Arg &amp;&amp;arg, Args &amp;&amp; ... args) { }\n     ^~~~~~~~~~~~~~~~~~~~\n:16:5: note:   template argument deduction/substitution failed:\n:5:7: note: candidate: constexpr DependencyInjectable&lt;DependencyOne*&gt;::DependencyInjectable(const DependencyInjectable&lt;DependencyOne*&gt;&amp;)\n class DependencyInjectable\n       ^~~~~~~~~~~~~~~~~~~~\n:5:7: note:   no known conversion for argument 1 from 'bool' to 'const DependencyInjectable&lt;DependencyOne*&gt;&amp;'\n</code></pre>\n\n<p>Specifically, I am puzzled as to why GCC emits this error:</p>\n\n<p><strong>:72:54: error: no matching function for call to 'DependencyInjectable::DependencyInjectable(bool)'\n         tDependencies(std::get(tuple) ...) { }</strong></p>\n\n<p>Obviously, template argument deduction is failing, but I'm not sure as to why. How is <strong>'bool'</strong> being deduced? GCC seems to struggle with the following line:</p>\n\n<pre><code>typename Dependency::tDependencyInjectable&gt;::type&gt;::type(std::get&lt;IndicesTwo&gt;(tuple) ...) ...,\n</code></pre>\n\n<p>I purposely added the following constructor in the base class to trap the issue:</p>\n\n<pre><code>template&lt;typename Arg, typename DecayArg = typename std::decay&lt;Arg&gt;::type, typename ... Args,\n         typename = std::enable_if_t&lt;!std::is_same&lt;DecayArg, bool&gt;::value&gt;&gt;\nDependencyInjectable(Arg &amp;&amp;arg, Args &amp;&amp; ... args) { }\n</code></pre>\n\n<p>This code is accepted by Microsoft Visual Studio 14 and runs as expected. A slightly different version compiles with Clang, although this particular version may not. Either Clang and Visual Studio are correct or GCC correctly rejects my code. What am I missing?</p>\n"}, {"tags": ["c++", "sql", "qt", "sqlite"], "comments": [{"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1495048594, "post_id": 44032794, "comment_id": 75092625, "body": "You do <b>not</b> have the same code. And the error message tells you exactly which line is missing."}, {"owner": {"reputation": 1, "user_id": 8027175, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZdZZUGnQuhI/AAAAAAAAAAI/AAAAAAAAAQw/eAlu2yn2wao/photo.jpg?sz=128", "display_name": "Jordan Angel", "link": "https://stackoverflow.com/users/8027175/jordan-angel"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1495049820, "post_id": 44032794, "comment_id": 75093314, "body": "Sorry, I had that line and for some reason had deleted it previously because it wasn&#39;t working beforehand. However, when I re-added the bool db_ok = db.open() line with the absolute address (C:\\\\NewFolder\\\\ToolSearch.db) it works, but when I change it to the Relative Address (:\\\\Resources\\\\Resources\\\\ToolSearch.db) it fails even though I still check if the file exists and it does. So that seems to narrow down the problem to something with accessing the database in the resources folder, but then the problem still remains because I need it to be relative. Any ideas?"}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1495049948, "post_id": 44032794, "comment_id": 75093395, "body": "That path is neither relative nor valid."}, {"owner": {"reputation": 1, "user_id": 8027175, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZdZZUGnQuhI/AAAAAAAAAAI/AAAAAAAAAQw/eAlu2yn2wao/photo.jpg?sz=128", "display_name": "Jordan Angel", "link": "https://stackoverflow.com/users/8027175/jordan-angel"}, "reply_to_user": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1495050464, "post_id": 44032794, "comment_id": 75093686, "body": "I don&#39;t see why the path is not valid though since I go to my resources.qrc file, directly copied the path to my clipboard from there, and then pasted it into the code. I also did this earlier with an image using the line: QPixmap imagePix(&quot;:/Resources/Resources/image.png&quot;); and it worked just fine. When I built an earlier version of the project and then ran it on another machine, it also ran just fine accessing the file from that path which is the same path where I am trying to access the database at. Also, the QFile::exists line still says that the file I am looking for does exist there."}, {"owner": {"reputation": 483, "user_id": 2141590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0949aa1968da2bbd2a303e2c9269f359?s=128&d=identicon&r=PG", "display_name": "Lorenz", "link": "https://stackoverflow.com/users/2141590/lorenz"}, "edited": false, "score": 0, "creation_date": 1495051617, "post_id": 44032794, "comment_id": 75094414, "body": "The error messages tells you that the database is not open, so where exactly do you think you have opened the database int the code you posted? Further if opening the <i>database</i> fails, <code>QSqlDatabase</code> provides methods to get the latest error."}, {"owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "edited": false, "score": 0, "creation_date": 1495096971, "post_id": 44032794, "comment_id": 75111328, "body": "That path might be valid for <code>QFile</code>, but SQLite itself does not use Qt."}, {"owner": {"reputation": 1, "user_id": 8027175, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZdZZUGnQuhI/AAAAAAAAAAI/AAAAAAAAAQw/eAlu2yn2wao/photo.jpg?sz=128", "display_name": "Jordan Angel", "link": "https://stackoverflow.com/users/8027175/jordan-angel"}, "edited": false, "score": 0, "creation_date": 1495132419, "post_id": 44032794, "comment_id": 75135765, "body": "That solved the issue. I had just assumed Qt would enable SQLite would allow for the database to be opened from the .qrc file. I actually made it relative without the Qt libraries. Everything is working now thanks!"}], "owner": {"reputation": 1, "user_id": 8027175, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ZdZZUGnQuhI/AAAAAAAAAAI/AAAAAAAAAQw/eAlu2yn2wao/photo.jpg?sz=128", "display_name": "Jordan Angel", "link": "https://stackoverflow.com/users/8027175/jordan-angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1003, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495051511, "creation_date": 1495047339, "last_edit_date": 1495051511, "question_id": 44032794, "link": "https://stackoverflow.com/questions/44032794/c-qt-qsqlqueryprepare-database-not-open", "title": "C++ QT: QSqlQuery::prepare: database not open", "body": "<p>Sorry in advance for any apparent overlap of questions, but I have searched what feels like every possible question on this site for an answer to my problem and none of them have worked. The main issue is that I cannot seem to open my SQLITE3 database in order to search it and display to a QTableView. My code is below:</p>\n\n<pre><code>void MainWindow::on_searchBButton_clicked() {\nqDebug() &lt;&lt; QSqlDatabase::drivers();\n\n//Setup the search query and open database\n//toolboxData = QSqlDatabase::addDatabase(\"QSQLITE\");\n//toolboxData.setDatabaseName(\":/Resources/Resources/ToolSearch.db\");\nQString searchStr;\nsearchStr = ui-&gt;basicSearchInput-&gt;text();\n\n//Filter out any hyphens\nfor (int i = 0; i &lt; searchStr.length(); ++i) {\n    if (searchStr[i] == QLatin1Char('-')) searchStr[i] = QLatin1Char(' ');\n}\n\n//Do the actual searching now\nQString sQry;\n\nQSqlQueryModel *model = new QSqlQueryModel();\n\nQSqlDatabase toolboxDb = QSqlDatabase::addDatabase(\"QSQLITE\");\n//toolboxDb.setDatabaseName(\":/Resources/Resources/ToolSearch.db\");\ntoolboxDb.setDatabaseName(\"C:\\\\New folder\\\\ToolSearch.db\");\nbool db_ok = toolboxDb.open();\n\nif (!QFile::exists(\"C:\\\\New folder\\\\ToolSearch.db\"))\n    qDebug() &lt;&lt; \"This file does not exist\";\n\nif (!db_ok)\n    qDebug() &lt;&lt; \"Connection Failed\\n\";\n\nQSqlQuery *qry = new QSqlQuery(toolboxDb);\n\nsQry += \"SELECT * FROM ToolSearch WHERE keywords MATCH :searchTerm UNION SELECT * FROM ToolSearch WHERE name MATCH :searchTerm UNION \";\nsQry += \"SELECT * FROM ToolSearch WHERE category MATCH :searchTerm UNION SELECT * FROM ToolSearch WHERE subcategory MATCH :searchTerm \";\nsQry += \"UNION SELECT * FROM ToolSearch WHERE sources MATCH :searchTerm UNION SELECT * FROM ToolSearch WHERE usagetype :searchTerm UNION \";\nsQry += \"SELECT * FROM ToolSearch WHERE cost MATCH :searchTerm\";\n\nqry-&gt;prepare(sQry);\n\n//Add the necessary single quotes to the given string\nsearchStr = '\\'' + searchStr + '\\'';\n\nqry-&gt;bindValue(\":searchTerm\", searchStr);\n\nqry-&gt;exec();\nmodel-&gt;setQuery(*qry);\nui-&gt;searchResults-&gt;setModel(model);\nui-&gt;searchResults-&gt;show(); }\n</code></pre>\n\n<p>Most of the answers that I saw on here said that to open the database you have to write something along the lines of the following:</p>\n\n<pre><code>QSqlDatabase db = QSqlDatabase::addDatabase(\"QSQLITE\");\ndb.setDatabaseName(\"C:\\\\SomeFolder\\\\SomeFile.db\");\nbool db_ok = db.open();\n</code></pre>\n\n<p>However, I have almost the exact same code in mine for opening the database and even tested it with an absolute address as opposed to the relative address I had with the \":/Resources/Resources/ToolSearch.db\" line. Also, the output of qDebug() &lt;&lt; QSqlDatabase::drivers() gives:</p>\n\n<p>(\"QSQLITE\", \"QMYSQL\", \"QMYSQL3\", \"QODBC\", \"QODBC3\", \"QPSQL\", \"QPSQL7\")</p>\n\n<p>Lastly, I have also used verified that the file does exist at the location I am trying to open it at using the if (!QFile::exists()) statement. So, I am at a loss for why this is not working. The specific error message that I get when I attempt to run this code is \"QSqlQuery::prepare: database not open\".</p>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["c++", "queue", "comparator"], "comments": [{"owner": {"reputation": 133051, "user_id": 501250, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c39ae7fe43cf30bc0f4d4051defcbd87?s=128&d=identicon&r=PG", "display_name": "cdhowie", "link": "https://stackoverflow.com/users/501250/cdhowie"}, "edited": false, "score": 7, "creation_date": 1495047072, "post_id": 44032673, "comment_id": 75091851, "body": "<code>return task_a.r &gt; task_b.r || (task_a.r == task_b.r &amp;&amp; task_a.task_number &gt; task_b.task_number);</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1495047442, "post_id": 44032673, "comment_id": 75092014, "body": "Note that the above is still one comparator. A more complicated comparator, but still one comparator. There is no need for more than one comparator."}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 3, "creation_date": 1495047805, "post_id": 44032673, "comment_id": 75092247, "body": "<code>return std::tie(task_a.r, task_a.task_number) &gt; std::tie(task_b.r , task_b.task_number);</code> (of course, it is still just on comparison operator)."}], "owner": {"reputation": 11, "user_id": 8027265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c91d58d925a074bcc38a2dadbaea1bbb?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr", "link": "https://stackoverflow.com/users/8027265/piotr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 536, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1551106697, "creation_date": 1495046913, "last_edit_date": 1551106697, "question_id": 44032673, "link": "https://stackoverflow.com/questions/44032673/c-priority-queue-with-two-comparators", "title": "C++ priority queue with two comparators", "body": "<p>is it possible in C++ to implement priority queue with two comparators?</p>\n\n<p>Here is example:</p>\n\n<pre><code>struct Task\n{\n  int r,p,q;\n  int task_number;\n};\n\n\nstruct Greater_r\n{\n  bool operator()(const Task&amp; task_a, const Task&amp; task_b) const\n  {\n      return task_a.r &gt;= task_b.r;\n  }\n};\n</code></pre>\n\n<p>I'd like to sort not only by \"r\" but also by \"task_number\", because when for two tasks r has same value, priority queue will sort it randomly.</p>\n"}, {"tags": ["c++", "search", "tuples", "compile-time"], "comments": [{"owner": {"reputation": 668, "user_id": 7148416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af0b88b4441b06815e01ed145a2f14?s=128&d=identicon&r=PG&f=1", "display_name": "diametralpitch", "link": "https://stackoverflow.com/users/7148416/diametralpitch"}, "edited": false, "score": 1, "creation_date": 1495048258, "post_id": 44032649, "comment_id": 75092469, "body": "Is there a requirement for you to use nested tuples? In the code above, it seems you can simplify things by using a tuple containing only a read only struct and a read-write struct. You could even use std::pair and use first/second to distinguish between access type."}, {"owner": {"reputation": 940, "user_id": 5840652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELL15.png?s=128&g=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/5840652/vinci"}, "reply_to_user": {"reputation": 668, "user_id": 7148416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54af0b88b4441b06815e01ed145a2f14?s=128&d=identicon&r=PG&f=1", "display_name": "diametralpitch", "link": "https://stackoverflow.com/users/7148416/diametralpitch"}, "edited": false, "score": 0, "creation_date": 1495050608, "post_id": 44032649, "comment_id": 75093771, "body": "The code is for an arm cortex m4 platform with a (relatively) small memory. Its less constness and accessibility I have in mind, but rather ram and flash constraints. Having two tuples, i can place one in ram and one in flash. I suppose thats not possible with a single std::pair type."}], "owner": {"reputation": 940, "user_id": 5840652, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ELL15.png?s=128&g=1", "display_name": "Vinci", "link": "https://stackoverflow.com/users/5840652/vinci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495046820, "creation_date": 1495046820, "question_id": 44032649, "link": "https://stackoverflow.com/questions/44032649/find-if-for-nested-tuple-return-access-to-other-tuple-with-same-layout", "title": "find_if for nested tuple, return access to other tuple with same layout", "body": "<p>I've two tuples of identical nesting and layout, but one tuple is read-only and contains only constant data, whereas the other one can change during runtime and is generally accessible by the user.</p>\n\n<p>An example would be the following nested tuple, containing some (template) structs S which hold either two const strings and integers, or a single non-const integer. What stays the same, regardless of which tuple one wants to access, is the index_sequence to get to the desired value.</p>\n\n<pre><code>  constexpr auto tuple_r = std::make_tuple(\n\n      std::make_tuple( S{\n                          \"description\",\n                          \"first_name\",\n                          10,           // min\n                          100           // max\n                        }\n                      ),\n\n      std::make_tuple( S{\n                          \"description\",\n                          \"second_name\",\n                          10,           // min\n                          100           // max\n                        }\n                     )\n  );\n\n  auto tuple_rw = std::make_tuple(\n\n      std::make_tuple( S{\n                          42\n                        }\n                      ),\n\n      std::make_tuple( S{\n                          43\n                        }\n                     )\n  );\n</code></pre>\n\n<p>So far so good. With a lot of useful tuple topics here on SO I've got most things I need covered, but one particular feature I'd like to add keeps bothering me. I'd like to search the const tuple for a specific name string and return whatever helps me access the non-const versions value on the very same position. So, using the example above, I'd like to access the value 42 by searching for \"first_name\". </p>\n\n<p>In order to achieve that I've tried to write some \"std::find_if\" like function which recursively steps through the tuple and compares the string with a predicate. The general idea is straight forward and looks like this -></p>\n\n<p>(head is a simple get&lt;0> wrapper and tail ... well, tail returns the tuple without head)</p>\n\n<pre><code>// recursion here\ntemplate&lt;typename Head, typename Tail, typename F&gt;\nconstexpr bool find_if_impl(Head&amp;&amp; head_, Tail&amp;&amp; tail_, F&amp;&amp; f)\n{\n  // call f(head_)\n  // check possible recursion on head_\n  // check possible recursion on tail_\n}\n\n// recursion here as well\ntemplate&lt;typename T, typename F&gt;\nconstexpr bool find_if_impl(T&amp;&amp; t, F&amp;&amp; f)\n{\n  return find_if_impl(head(t), tail(t), f);\n}\n\n// start\ntemplate&lt;typename T, typename F&gt;\nconstexpr bool find_if(T&amp;&amp; t, F&amp;&amp; f)\n{\n  return find_if_impl(t, f);\n}\n</code></pre>\n\n<p>The problem is, currently my \"find_if\" acts more like an \"any_of\". I've tried keeping track of the index_sequence when stepping through tuple, but I simply can't return it because the trailing return type would change with each new index I add or remove...</p>\n\n<p>Is there any solution to this? The only way I could think of so far which would keep \"constexpr-ness\" is to pass an array as another parameter and keep track of the indices there. Since I don't know the actual index sequence length in advance, the array would always have to be the size of the maximum tuple-depth.</p>\n"}, {"tags": ["c++", "boost", "enums"], "comments": [{"owner": {"reputation": 4580, "user_id": 218774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ejff2.png?s=128&g=1", "display_name": "J. Calleja", "link": "https://stackoverflow.com/users/218774/j-calleja"}, "edited": false, "score": 0, "creation_date": 1495056806, "post_id": 44032598, "comment_id": 75096921, "body": "There is no implicit conversion from <code>enum class</code> to its underlying type: <a href=\"http://stackoverflow.com/a/8357366/218774\">stackoverflow.com/a/8357366/218774</a>"}, {"owner": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "reply_to_user": {"reputation": 4580, "user_id": 218774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ejff2.png?s=128&g=1", "display_name": "J. Calleja", "link": "https://stackoverflow.com/users/218774/j-calleja"}, "edited": false, "score": 0, "creation_date": 1495061388, "post_id": 44032598, "comment_id": 75098546, "body": "That wasn&#39;t the point of the question. I could have been clearer in hindsight."}], "answers": [{"tags": [], "owner": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "is_accepted": false, "score": 0, "last_activity_date": 1495052100, "last_edit_date": 1495052100, "creation_date": 1495047118, "answer_id": 44032730, "question_id": 44032598, "link": "https://stackoverflow.com/questions/44032598/is-it-possible-to-create-a-boostmpllist-c-from-a-variadic-enum-using-static/44032730#44032730", "title": "Is it possible to create a boost::mpl::list_c from a variadic enum using static_cast?", "body": "<p>Got it:</p>\n\n<pre><code>#include &lt;boost/mpl/list_c.hpp&gt;\nenum class DataType : unsigned char {\n  t1 = 0,\n  t2 = 1,\n  t3 = 2\n};\ntemplate&lt;DataType... datatypes&gt;\nvoid create_list() {\n  boost::mpl::list_c&lt;unsigned char, static_cast&lt;unsigned char&gt;(datatypes)...&gt; lc;\n}\nint main()\n{\n  create_list&lt;DataType::t1, DataType::t2&gt;();\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "reply_to_user": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "edited": false, "score": 0, "creation_date": 1495056756, "post_id": 44032874, "comment_id": 75096897, "body": "@PeterBingham I did. Please read the documentation again. Your answer casts the enum to an integral type and therefore makes your code conformant with the template&#39;s design."}, {"owner": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "edited": false, "score": 0, "creation_date": 1495057575, "post_id": 44032874, "comment_id": 75097260, "body": "I&#39;ve clarified the question title."}], "tags": [], "owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "is_accepted": false, "score": 0, "last_activity_date": 1495047684, "creation_date": 1495047684, "answer_id": 44032874, "question_id": 44032598, "link": "https://stackoverflow.com/questions/44032598/is-it-possible-to-create-a-boostmpllist-c-from-a-variadic-enum-using-static/44032874#44032874", "title": "Is it possible to create a boost::mpl::list_c from a variadic enum using static_cast?", "body": "<p>A <code>list_c</code> is a convenience builder for a sequence of <code>integral_c</code></p>\n\n<p>ref: <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/mpl/doc/refmanual/list-c.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_64_0/libs/mpl/doc/refmanual/list-c.html</a></p>\n\n<p>an <code>integral_c&lt;T, TN&gt;</code> is documented as being supported where <code>T</code> is an <em>integral type</em> </p>\n\n<p>An <code>enum class</code> is not an integral type. I think that ends the discussion.</p>\n\n<p>ref: <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/mpl/doc/refmanual/integral-c.html\" rel=\"nofollow noreferrer\">http://www.boost.org/doc/libs/1_64_0/libs/mpl/doc/refmanual/integral-c.html</a></p>\n"}], "owner": {"reputation": 1105, "user_id": 3112985, "user_type": "registered", "accept_rate": 74, "profile_image": "https://graph.facebook.com/100002595160203/picture?type=large", "display_name": "Peter Bingham", "link": "https://stackoverflow.com/users/3112985/peter-bingham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495057557, "creation_date": 1495046609, "last_edit_date": 1495057557, "question_id": 44032598, "link": "https://stackoverflow.com/questions/44032598/is-it-possible-to-create-a-boostmpllist-c-from-a-variadic-enum-using-static", "title": "Is it possible to create a boost::mpl::list_c from a variadic enum using static_cast?", "body": "<p>The following code does not compile:</p>\n\n<pre><code>#include &lt;boost/mpl/list_c.hpp&gt;\nenum class DataType : int {\n  t1 = 0,\n  t2 = 1,\n  t3 = 2\n};\nint main()\n{\n  boost::mpl::list_c&lt;DataType, DataType::t1, DataType::t2&gt; lc2;\n}\n</code></pre>\n\n<p>I have to cast my values, like this (which compiles):</p>\n\n<pre><code>#include &lt;boost/mpl/list_c.hpp&gt;\nenum class DataType : int {\n  t1 = 0,\n  t2 = 1,\n  t3 = 2\n};\nint main()\n{\n  boost::mpl::list_c&lt;int, static_cast&lt;int&gt;(DataType::t1), static_cast&lt;int&gt;(DataType::t2)&gt; lc2;\n}\n</code></pre>\n\n<p>I can also create the list from a variadic list of types, like this (also compiles):</p>\n\n<pre><code>#include &lt;boost/mpl/list_c.hpp&gt;\ntemplate&lt;int... ints&gt;\nvoid create_list() {\n  boost::mpl::list_c&lt;int, ints...&gt; lc;\n}\nint main()\n{\n  create_list&lt;1,2,3&gt;();\n}\n</code></pre>\n\n<p>However, how do I create the list from a variadic list of types like below (doesn't compile):</p>\n\n<pre><code>#include &lt;boost/mpl/list_c.hpp&gt;\nenum class DataType : unsigned char {\n  t1 = 0,\n  t2 = 1,\n  t3 = 2\n};\ntemplate&lt;DataType... datatypes&gt;\nvoid create_list() {\n  boost::mpl::list_c&lt;DataType, datatypes...&gt; lc;\n}\nint main()\n{\n  create_list&lt;DataType::t1, DataType::t2&gt;();\n}\n</code></pre>\n\n<p>This gives the following compiler error:</p>\n\n<pre><code> In instantiation of 'void create_list() [with DataType ...datatypes = {(DataType)0u, (DataType)1u}]':\n13:43:   required from here\n9:46: error: could not convert template argument '(DataType)0u' to 'long int'\n9:46: error: could not convert template argument '(DataType)1u' to 'long int'\n</code></pre>\n\n<p>I also cannot cast when calling the create_list function, like this:</p>\n\n<pre><code>create_list&lt;static_cast&lt;unsigned char&gt;(DataType::t1), static_cast&lt;unsigned char&gt;(DataType::t2)&gt;();\n</code></pre>\n\n<p>since, my variadic type list has been passed by my client.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 7, "creation_date": 1495046635, "post_id": 44032593, "comment_id": 75091628, "body": "you need to use <code>break</code>, otherwise the <code>case</code>s fall through (which is useful in some scenarios)"}, {"owner": {"reputation": 9602, "user_id": 7151494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-a_FzvY-b2O0/AAAAAAAAAAI/AAAAAAAAAEw/kNwilSAvQTI/photo.jpg?sz=128", "display_name": "Fureeish", "link": "https://stackoverflow.com/users/7151494/fureeish"}, "edited": false, "score": 1, "creation_date": 1495046753, "post_id": 44032593, "comment_id": 75091685, "body": "what if <code>n</code> is negative? For any negative value, your code will display <b>Greater than 9</b>"}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1495046843, "post_id": 44032593, "comment_id": 75091744, "body": "Java requires breaks. What language are you saying doesn&#39;t need breaks?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1495046844, "post_id": 44032593, "comment_id": 75091748, "body": "By the way, which <i>&quot;other languages&quot;</i> are you referring to? Java <code>switch</code> behaves the same and in C# it would be a compile-time error (unless the <code>case</code> is completely empty)"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1495047271, "post_id": 44032593, "comment_id": 75091929, "body": "See <a href=\"https://en.wikipedia.org/wiki/Duff%27s_device\" rel=\"nofollow noreferrer\">Duff&#39;s Device</a> for why this behaviour can be helpful."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1495047514, "post_id": 44032593, "comment_id": 75092060, "body": "&quot;Why are the other cases being hit?&quot; Because that&#39;s how <code>switch</code> works in C++. A <code>case</code> without a <code>break</code> falls through to the next <code>case</code>. Just the way the language works."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1495047623, "post_id": 44032593, "comment_id": 75092130, "body": "See also; <a href=\"http://blog.robertelder.org/switch-statements-statement-expressions/\" rel=\"nofollow noreferrer\">How to Get Fired Using Switch Statements &amp; Statement Expressions</a> ."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1495048374, "post_id": 44032593, "comment_id": 75092528, "body": "&quot;default: cout &lt;&lt; &quot;Greater than 9&quot;&quot; not really. It <i>might</i> be greater, but it might also be less than <code>1</code>."}, {"owner": {"reputation": 1341, "user_id": 4524618, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e1ca7e81266dc3e8f724a4864b3d90e?s=128&d=identicon&r=PG", "display_name": "Sniper", "link": "https://stackoverflow.com/users/4524618/sniper"}, "edited": false, "score": 0, "creation_date": 1495048855, "post_id": 44032593, "comment_id": 75092769, "body": "This is what you are looking for  <a href=\"http://stackoverflow.com/questions/8146106/does-case-switch-work-like-this\" title=\"does case switch work like this\">stackoverflow.com/questions/8146106/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "edited": false, "score": 1, "creation_date": 1495046791, "post_id": 44032625, "comment_id": 75091708, "body": "Though in your case I&#39;d just use <code>n</code> as an index in a <code>static</code> string array."}], "tags": [], "owner": {"reputation": 54437, "user_id": 108796, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/1yySS.jpg?s=128&g=1", "display_name": "Blindy", "link": "https://stackoverflow.com/users/108796/blindy"}, "is_accepted": false, "score": 1, "last_activity_date": 1495049363, "last_edit_date": 1495049363, "creation_date": 1495046716, "answer_id": 44032625, "question_id": 44032593, "link": "https://stackoverflow.com/questions/44032593/switch-in-c-hits-everything/44032625#44032625", "title": "Switch in C++ hits everything?", "body": "<p>This is normal. <code>switch</code> in C/C++ (and many other C-like languages) fall through their <code>case</code> statements, from one to the next to the next until the very end. </p>\n\n<p>If you don't want this (and let's be honest, almost nobody does), you need to add a <code>break</code> at the end of every <code>case</code> statement.</p>\n"}, {"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 3, "last_activity_date": 1495049382, "last_edit_date": 1495049382, "creation_date": 1495046811, "answer_id": 44032647, "question_id": 44032593, "link": "https://stackoverflow.com/questions/44032593/switch-in-c-hits-everything/44032647#44032647", "title": "Switch in C++ hits everything?", "body": "<p>In C++, the switch statement supports something called \"fall-through\". This means that once one case statement has gone through and does not have a <code>break</code> associated with it, the code will \"fall-through\" to the next case and run that part too, until a <code>break</code> stops it or the <code>switch</code> ends. This means, to get your desired behaviour you have to add <code>break</code> to all of your case statements:</p>\n\n<pre><code>case 1: cout &lt;&lt; \"one\" &lt;&lt; endl; break;\ncase 2: cout &lt;&lt; \"two\" &lt;&lt; endl; break;\ncase 3: cout &lt;&lt; \"three\" &lt;&lt; endl; break;\ncase 4: cout &lt;&lt; \"four\" &lt;&lt; endl; break;\ncase 5: cout &lt;&lt; \"five\" &lt;&lt; endl; break;\ncase 6: cout &lt;&lt; \"six\" &lt;&lt; endl; break;\ncase 7: cout &lt;&lt; \"seven\" &lt;&lt; endl; break;\ncase 8: cout &lt;&lt; \"eight\" &lt;&lt; endl; break;\ncase 9: cout &lt;&lt; \"nine\" &lt;&lt; endl; break;\ndefault: cout &lt;&lt; \"Greater than 9\" &lt;&lt; endl; break; // not required but good practice.\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7975759, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEhBG.jpg?s=128&g=1", "display_name": "pr6y", "link": "https://stackoverflow.com/users/7975759/pr6y"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "closed_date": 1495050904, "answer_count": 2, "score": -4, "last_activity_date": 1495049382, "creation_date": 1495046580, "question_id": 44032593, "link": "https://stackoverflow.com/questions/44032593/switch-in-c-hits-everything", "closed_reason": "Duplicate", "title": "Switch in C++ hits everything?", "body": "<p><strong>First of all, I know breaks fix this issue, but I just want to make sure I understand the default behavior of a switch in C++.</strong></p>\n\n<p>I have the following C++ code that isn't working the way I think it would coming from other languages:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(){\n    int n;\n    cin &gt;&gt; n;\n    switch(n) {\n    case 1: cout &lt;&lt; \"one\" &lt;&lt; endl;\n    case 2: cout &lt;&lt; \"two\" &lt;&lt; endl;\n    case 3: cout &lt;&lt; \"three\" &lt;&lt; endl;\n    case 4: cout &lt;&lt; \"four\" &lt;&lt; endl;\n    case 5: cout &lt;&lt; \"five\" &lt;&lt; endl;\n    case 6: cout &lt;&lt; \"six\" &lt;&lt; endl;\n    case 7: cout &lt;&lt; \"seven\" &lt;&lt; endl;\n    case 8: cout &lt;&lt; \"eight\" &lt;&lt; endl;\n    case 9: cout &lt;&lt; \"nine\" &lt;&lt; endl;\n    default: cout &lt;&lt; \"Greater than 9\" &lt;&lt; endl;\n    }\n    // your code goes here\n    return 0;\n}\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre><code>$ ./a.out \n1\none\ntwo\nthree\nfour\nfive\nsix\nseven\neight\nnine\nGreater than 9\n</code></pre>\n\n<p>Why are the other cases being hit?</p>\n\n<p>Why is the default behavior different from other languages?</p>\n"}, {"tags": ["c++", "freeglut"], "comments": [{"owner": {"reputation": 1898, "user_id": 5852567, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-01XLpEIZ5Vo/AAAAAAAAAAI/AAAAAAAADBw/wp2BC0SOGVE/photo.jpg?sz=128", "display_name": "DIEGO CARRASCAL", "link": "https://stackoverflow.com/users/5852567/diego-carrascal"}, "edited": false, "score": 0, "creation_date": 1495049746, "post_id": 44032579, "comment_id": 75093271, "body": "The shapes move in the window and you want to know when they overlap each other? if so, you have to track the area the shape is in and then compare if that area is being occupied by any other shape. You could define a &quot;grid&quot; in the window and calculate where is each shape if two or more shapes are occupying the same grid coordinate, well, they intersect. well, that is how I would attack the problem..."}], "answers": [{"tags": [], "owner": {"reputation": 805, "user_id": 7908019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wBTC1gSxMPU/AAAAAAAAAAI/AAAAAAAAABY/85JVWoAxQI0/photo.jpg?sz=128", "display_name": "Gerard097", "link": "https://stackoverflow.com/users/7908019/gerard097"}, "is_accepted": false, "score": 0, "last_activity_date": 1495050771, "creation_date": 1495050771, "answer_id": 44033665, "question_id": 44032579, "link": "https://stackoverflow.com/questions/44032579/how-to-write-an-intersection-function-for-any-kind-of-shapes/44033665#44033665", "title": "How to write an intersection function for any kind of shapes", "body": "<p>Your problem is in these lines:</p>\n\n<pre><code>Rect *p1 = dynamic_cast&lt;Rect*&gt;(pshape);\nCirc *p2 = dynamic_cast&lt;Circ*&gt;(pshape);\n</code></pre>\n\n<p>Unless you had inherited Rect from Circ or vice versa this is what makes your program crash, you can't cast your pShape to Circ if it is a Rect, so when you pass a Rect object to your function it will correctly cast to Rect* but it will fail with Circ* returning nullptr, so then when you try to access methods from p2 it will crash becouse you are accessing to invalid memory (0x00000000) :</p>\n\n<pre><code>    if(p1)\n        {\n            float circleDistance_x = abs(p2-&gt;getPos().x - p1-&gt;getPos().x);\n            float circleDistance_y = abs(p2-&gt;getPos().y - p1-&gt;getPos().y);\n\n            if(circleDistance_x &gt; (p1-&gt;getSize().x/2 + p2-&gt;getRad()))\n                return false;\n            if(circleDistance_y &gt; (p1-&gt;getSize().y/2 + p2-&gt;getRad()))\n                return false;\n            if(circleDistance_x &lt;= (p1-&gt;getSize().x/2))\n                return true;\n            if(circleDistance_y &lt;= (p1-&gt;getSize().y/2))\n                return true;\n            float cornerDistance_sq = (circleDistance_x - (p1-&gt;getSize().x/2)) + (circleDistance_y - (p1-&gt;getSize().y/2))*(circleDistance_y - (p1-&gt;getSize().y/2));\n\n            return (cornerDistance_sq &lt;= p2-&gt;getRad()^2);\n\n        }\n</code></pre>\n\n<p>So, you could simply just cast the first p1 pointer since the method is from circle, it's obvious that it was called from a Circ Object so there's no need for p2 pointer.</p>\n\n<pre><code>    Rect *p1 = dynamic_cast&lt;Rect*&gt;(pshape);\n    if(p1)\n        {\n            float circleDistance_x = abs(getPos().x - p1-&gt;getPos().x);\n            float circleDistance_y = abs(getPos().y - p1-&gt;getPos().y);\n\n            if(circleDistance_x &gt; (p1-&gt;getSize().x/2 + getRad()))\n                return false;\n            if(circleDistance_y &gt; (p1-&gt;getSize().y/2 + getRad()))\n                return false;\n            if(circleDistance_x &lt;= (p1-&gt;getSize().x/2))\n                return true;\n            if(circleDistance_y &lt;= (p1-&gt;getSize().y/2))\n                return true;\n            float cornerDistance_sq = (circleDistance_x - (p1-&gt;getSize().x/2)) + (circleDistance_y - (p1-&gt;getSize().y/2))*(circleDistance_y - (p1-&gt;getSize().y/2));\n\n            return (cornerDistance_sq &lt;= getRad()^2);\n\n        }\n</code></pre>\n\n<p>Also on the line:</p>\n\n<pre><code>return (cornerDistance_sq &lt;= getRad()^2)\n</code></pre>\n\n<p>i think you are trying to get the radius square but this wont do it, what it is actually doing is </p>\n\n<pre><code>(cornerDistance_sq &lt;= getRad()) ^ 2 \n</code></pre>\n\n<p>becouse &lt;= has greater precedence to ^, plus ^ is not a square operator it is a bitwise operator. So what you actually want is :</p>\n\n<pre><code> return cornerDistance_sq &lt;= getRad() * getRad();\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7135972"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 113, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495050771, "creation_date": 1495046536, "question_id": 44032579, "link": "https://stackoverflow.com/questions/44032579/how-to-write-an-intersection-function-for-any-kind-of-shapes", "title": "How to write an intersection function for any kind of shapes", "body": "<p>I have to write a function, which detects intersection and returns true or false.</p>\n\n<p>I have Shape.cpp file, and rectangle.cpp, circle.cpp files inherits of it. I tried to calculate it, but i failed. There is no error, but when my program starts, it crashes. MY Question is why it crashes? is my way wrongs? Here is circle.cpp file.</p>\n\n<pre><code>bool Circ::intersects(Shape* pshape)\n{\n    Rect *p1 = dynamic_cast&lt;Rect*&gt;(pshape);\n    Circ *p2 = dynamic_cast&lt;Circ*&gt;(pshape);\n\n    if(p1)\n    {\n        float circleDistance_x = abs(p2-&gt;getPos().x - p1-&gt;getPos().x);\n        float circleDistance_y = abs(p2-&gt;getPos().y - p1-&gt;getPos().y);\n\n        if(circleDistance_x &gt; (p1-&gt;getSize().x/2 + p2-&gt;getRad()))\n            return false;\n        if(circleDistance_y &gt; (p1-&gt;getSize().y/2 + p2-&gt;getRad()))\n            return false;\n        if(circleDistance_x &lt;= (p1-&gt;getSize().x/2))\n            return true;\n        if(circleDistance_y &lt;= (p1-&gt;getSize().y/2))\n            return true;\n        float cornerDistance_sq = (circleDistance_x - (p1-&gt;getSize().x/2)) + (circleDistance_y - (p1-&gt;getSize().y/2))*(circleDistance_y - (p1-&gt;getSize().y/2));\n\n        return (cornerDistance_sq &lt;= p2-&gt;getRad()^2);\n\n    }\n\n    return false;\n}\n</code></pre>\n\n<p>This is not the code all i want to write. But when it fails, i stopped to write. </p>\n\n<p>and my Shapes.h file</p>\n\n<pre><code>    #ifndef _SHAPES_H\n#define _SHAPES_H\n\n\nstruct Point2d\n{\n    float x, y;\n\n};\nstruct Point3d\n{\n    float r, g, b;\n\n};\n\nclass Shape\n{\nprotected:\n    bool m_bMarked;\n    Point3d m_col;\n    Point2d m_veldir;\n    Point2d m_pos;\n    float m_vel;\npublic:\n    Shape(Point2d&amp; pos, Point2d&amp; veldir, float vel, Point3d&amp; col)\n        :m_pos(pos),m_veldir(veldir),m_vel(vel),m_col(col)\n    {\n        m_bMarked = false;\n     }\n    virtual ~Shape() {}\n    virtual void draw() = 0;\n    virtual bool intersects(Shape*) = 0;\n    inline void move() { m_pos.x += m_veldir.x*m_vel; m_pos.y += m_veldir.y*m_vel; }\n    inline void invert_xdir() { m_veldir.x *= -1; }\n    inline void invert_ydir() { m_veldir.y *= -1; }\n    inline void MarkShape() { m_bMarked = true; }\n    inline void UnMarkShape() { m_bMarked = false; }\n    inline bool isMarked() { return m_bMarked; }\n    inline void increase_vel() { m_vel += 0.01f; }\n    inline void decrease_vel() { m_vel -= 0.01f; }\n\n};\n\n\n#endif\n</code></pre>\n\n<p>And finally my ShapesMain.cpp file</p>\n\n<pre><code>#include &lt;time.h&gt;\n#include &lt;GL/glut.h&gt;   \n#include &lt;cmath&gt;\n\n#include \"Rectangle.h\"\n#include \"Circle.h\"\n\n\n// YOU CAN CHANGE THE NUMBER OF SHAPES \n#define SHAPE_COUNT 20\n\n// YOU CAN MODIFY WINDOW SIZE BY CHANGING THESE\n// YOU MAY ALSO VIEW WINDOW IN FULL SCREEN\n#define WINDOWX 500\n#define WINDOWY 500\n\n// UNCOMMENT THE LINE BELOW TO STOP MOVING SHAPES\n//#define NO_MOTION\n\n// CHANGE THESE DIMENSIONS HOWEVER YOU LIKE\n#define MAX_SHAPE_DIM 70\n#define MIN_SHAPE_DIM 10\n\nfloat g_windowWidth = WINDOWX;\nfloat g_windowHeight = WINDOWY;\n\nShape*  g_shapeList[SHAPE_COUNT];\nint     g_numShapes = 0;\nbool    g_bShowIntersection = true;\n\n\n\n//------------------------------------\n\nvoid Initialize()\n{\n    srand ( time(NULL) );\n\n    // delete previous shapes, if there is any\n    if (g_numShapes &gt; 0)\n    {\n        for (int i = 0; i &lt; g_numShapes; i++)\n            delete g_shapeList[i];\n    }\n\n    // create a new shape repository\n    do {\n        g_numShapes = rand() % SHAPE_COUNT; // number of shapes are randomly determined     \n    } while (g_numShapes &lt; 5); // we dont want to have less than 5 shapes\n\n\n    int rect_count = g_numShapes * (rand() % 10 / 10.0f);\n    int circle_count =  g_numShapes - rect_count;\n\n    int half_wind_x = 3* g_windowWidth / 4;\n    int half_wind_y = 3* g_windowHeight / 4;\n    int max_dim = MAX_SHAPE_DIM; // max dim. of any shape \n    int min_dim = MIN_SHAPE_DIM; // min dim. of any shape\n    int quad_wind = g_windowWidth / 4;\n\n    for (int i= 0; i&lt;g_numShapes; i++)\n    {\n\n        float x, y;\n        float v1, v2;\n\n        // set positions \n        do {\n            x = rand() % half_wind_x;\n        } while (x &lt;= quad_wind);\n\n        do {\n            y = rand() % half_wind_y;\n        } while (y &lt;= quad_wind);\n        Point2d pos = { x,y };\n\n        // set velocity directions \n        do{\n            v1 = rand() % 10 / 10.0f;\n            v2 = rand() % 10 / 10.0f;           \n        } while (v1 == 0 || v2 == 0);\n\n        v1 *= (rand() % 2) ? -1 : 1;\n        v2 *= (rand() % 2) ? -1 : 1;\n        float vnorm = sqrt(v1*v1 + v2*v2);\n        Point2d veldir = { v1 / vnorm, v2 / vnorm };\n\n        // set velocity \n        float vel;\n        do {\n            vel = rand() % 2 / 10.0f;\n        } while (vel == 0);\n\n#ifdef NO_MOTION\n        vel = 0.0f;\n#endif\n        //set color \n        float R = rand()%100/100.0f;\n        float G = rand()%100/100.0f;\n        float B = rand()%100/100.0f;\n        Point3d color = { R,G,B };\n\n        // construct objects\n        if (i &lt; rect_count)\n        {\n            float wx;\n            float wy;\n            do {\n                wx = rand() % quad_wind;\n            } while (wx &lt; min_dim || wx&gt;max_dim);\n\n            do {\n                wy = rand() % quad_wind;\n            } while (wy &lt; min_dim || wy&gt;max_dim);\n\n            Point2d size = { wx, wy };          \n\n            Rect* pRect = new Rect(pos, size, veldir, vel, color);\n            g_shapeList[i] = pRect;\n        }\n        else\n        {\n            float rad;\n            do {\n                rad = rand() % quad_wind;\n            } while (rad &lt; min_dim || rad&gt;max_dim);\n\n\n            Circ* pCirc = new Circ(pos, rad, veldir, vel, color);\n            g_shapeList[i] = pCirc;\n        }\n    }\n\n    glClearColor(1.0f, 1.0f, 1.0f, 1.0f);\n\n}\n//-------------------------------------\n// This function handles the intersections of shapes. \n// if the user is not interested in marking intersections\n// s/he can set bMarkIntersections to false..in this case\n// no intersection test is performed\nvoid MarkObjects(bool bMarkIntersections)\n{\n    if (bMarkIntersections == false)\n    {\n        for (int i = 0; i &lt; g_numShapes; i++)\n            g_shapeList[i]-&gt;UnMarkShape();\n    }\n    else\n    {\n        // reset the states of all shapes as unmarked\n        for (int i = 0; i &lt; g_numShapes; i++)\n            g_shapeList[i]-&gt;UnMarkShape();\n\n        for (int i = 0; i &lt; g_numShapes; i++)\n        {           \n            for (int j = i+1; j &lt; g_numShapes; j++)\n            {\n\n                if (g_shapeList[i]-&gt;intersects(g_shapeList[j]))\n                {\n                    g_shapeList[i]-&gt;MarkShape();\n                    g_shapeList[j]-&gt;MarkShape();\n\n                }\n            }\n        }\n    }\n\n}\n//------------------------------------\nvoid UpdateData()\n{\n    // create viewport bounding rectangles to keep the shapes within the viewport\n    Point2d Winpos = { -1.0,0.0 };\n    Point2d Winsize = { 1.0 , g_windowHeight };\n    Point2d Winveldir = { 0,0 }; // dummy veldir\n    float Winvel = 0.0f; //not moving\n    Point3d Wincol = { 0,0,0 }; // dummy color\n    Rect WindowRectLeft(Winpos, Winsize, Winveldir, Winvel, Wincol);\n    Winpos.x = 0.0; Winpos.y = -1.0;\n    Winsize.x = g_windowWidth; Winsize.y = 1.0;\n    Rect WindowRectBottom(Winpos, Winsize, Winveldir, Winvel, Wincol);\n    Winpos.x = g_windowWidth; Winpos.y = 0.0;\n    Winsize.x = 1; Winsize.y = g_windowHeight;\n    Rect WindowRectRight(Winpos, Winsize, Winveldir, Winvel, Wincol);\n    Winpos.x = 0.0; Winpos.y = g_windowHeight;\n    Winsize.x = g_windowWidth; Winsize.y = 1.0f;\n    Rect WindowRectUp(Winpos, Winsize, Winveldir, Winvel, Wincol);\n\n    for (int i = 0; i &lt; g_numShapes; i++)\n    {\n        // move the shape\n        g_shapeList[i]-&gt;move();\n\n        // if it bounces to the window walls, invert its veldir\n        if (g_shapeList[i]-&gt;intersects(&amp;WindowRectLeft) ||\n            g_shapeList[i]-&gt;intersects(&amp;WindowRectRight))\n            g_shapeList[i]-&gt;invert_xdir();\n\n        if (g_shapeList[i]-&gt;intersects(&amp;WindowRectBottom) ||\n            g_shapeList[i]-&gt;intersects(&amp;WindowRectUp))\n            g_shapeList[i]-&gt;invert_ydir();\n    }\n}\n//------------------------------------\nvoid ChangeSize(GLsizei w, GLsizei h)\n{\n    if(h == 0)\n        h = 1;\n\n    glViewport(0, 0, w, h);\n\n    glMatrixMode(GL_PROJECTION);\n    glLoadIdentity();\n\n    g_windowHeight = h;\n    g_windowWidth = w;\n\n    glOrtho(0, g_windowWidth, 0, g_windowHeight , 1.0f, -1.0f);\n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n}\n//------------------------------------\nvoid processNormalKeys(unsigned char key, int x, int y) \n{\n\n    if (key == 'q') // PRESS 'q' to terminate the application\n        exit(0);\n    if(key=='r') // PRESS 'r' ket to reset the shapes\n        Initialize();\n    if (key == 's') // toggle between showing the intersections or not\n        g_bShowIntersection = g_bShowIntersection ? false: true;\n\n\n}\n//------------------------------------\nvoid processSpecialKeys(int key, int x, int y) \n{\n\n    switch(key) {\n        case GLUT_KEY_LEFT :                \n            break;\n        case GLUT_KEY_RIGHT :       \n            break;\n        case GLUT_KEY_UP:   \n            // PRESSING UP ARROW KEY INCREASES THE SHAPE VELOCITIES\n            for (int i = 0; i &lt; g_numShapes; i++)\n                g_shapeList[i]-&gt;increase_vel();\n            break;\n        case GLUT_KEY_DOWN:\n            // PRESSING DOWN ARROW KEY DECREASES THE SHAPE VELOCITIES\n            for (int i = 0; i &lt; g_numShapes; i++)\n                g_shapeList[i]-&gt;decrease_vel();\n\n            break;\n    }\n\n}\n\n//-------------------------------------\nvoid display() {\n\n\n    glClear(GL_COLOR_BUFFER_BIT);   // Clear the color buffer\n\n    glEnable(GL_BLEND); glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);\n\n    UpdateData();\n    MarkObjects(g_bShowIntersection);\n\n    glMatrixMode(GL_MODELVIEW);\n    glLoadIdentity();\n\n    for (int i= 0; i&lt;g_numShapes; i++)\n        g_shapeList[i]-&gt;draw();\n\n\n    glutSwapBuffers();\n}\n//------------------------------------\nint main(int argc, char* argv[])\n{   \n\n    glutInit(&amp;argc, argv);          // Initialize GLUT\n    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB );\n    glutInitWindowPosition(100,100);\n    glutInitWindowSize(WINDOWX, WINDOWY);\n\n\n\n    glutCreateWindow(\"COM102B - PA4\");  \n\n\n    // Register callback handler for window re-paint\n    glutDisplayFunc(display);       \n    glutReshapeFunc(ChangeSize);\n    glutIdleFunc(display);\n    glutKeyboardFunc(processNormalKeys);\n    glutSpecialFunc(processSpecialKeys);\n\n    Initialize();\n\n\n    glutMainLoop();                 // Enter infinitely event-processing loop\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "callback", "glfw"], "answers": [{"tags": [], "owner": {"reputation": 348, "user_id": 7121906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39d83955a24c118cf5dda3b982f2e634?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Nardi", "link": "https://stackoverflow.com/users/7121906/andrea-nardi"}, "is_accepted": true, "score": 0, "last_activity_date": 1495047222, "creation_date": 1495047222, "answer_id": 44032759, "question_id": 44032439, "link": "https://stackoverflow.com/questions/44032439/glfw-in-callback-function-pass-more-argument-then-intended/44032759#44032759", "title": "GLFW in callback function pass more argument then intended", "body": "<p>I should have researched I little bit more.\nI can put the <code>Keyboard</code> in <code>glfwSetWindowUserPointer</code> and the get it from the callback using <code>glfwGetWindowUserPointer</code>.</p>\n"}], "owner": {"reputation": 348, "user_id": 7121906, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39d83955a24c118cf5dda3b982f2e634?s=128&d=identicon&r=PG&f=1", "display_name": "Andrea Nardi", "link": "https://stackoverflow.com/users/7121906/andrea-nardi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 44032759, "answer_count": 1, "score": -1, "last_activity_date": 1495047624, "creation_date": 1495046089, "last_edit_date": 1495047624, "question_id": 44032439, "link": "https://stackoverflow.com/questions/44032439/glfw-in-callback-function-pass-more-argument-then-intended", "title": "GLFW in callback function pass more argument then intended", "body": "<p>I was working with GLFW and his callback function in C++.\nWhat I want to achieve in the callback function is to modify a variable of type of my class <code>Keyboard</code>.</p>\n\n<p>The callback function has to be of type <code>void(* GLFWkeyfun) (GLFWwindow *, int, int, int, int)</code></p>\n\n<p><code>glfwSetKeyCallback(GLFWwindow *window, GLFWkeyfun cbfun)</code> doesn't allow me to pass a lambda function that captures a <code>Keyboard</code>.</p>\n\n<p>It works with a templated function but it is very cloggy as the <code>Keyboard</code> has to be defined at compile time and that doesn't make the code that object oriented.(i.e. if I want to make a new window is not as easy as making a new instance).</p>\n\n<p>I tried to extend <code>GLFWwindow</code> so that I could use polymorphism so that I could put a derivative object ,that contains a <code>Keyboard</code>, as the first argument of <code>glfwSetKeyCallback</code> so that I can get the same object from the first argument of the callback function. But when I extend <code>GLFWwindow</code> my IDE tells me \"incomplete type is not allowed\"</p>\n\n<p>How can I modify my <code>Keyboard</code> from within the callback? I really want my design to be as modular as possible.</p>\n"}, {"tags": ["c++", "c++11", "serialization", "stream", "shared-ptr"], "comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1495081071, "post_id": 44032289, "comment_id": 75103280, "body": "You are serializing objects, and the lifetime of the serialization is bounded by the lifetime of the object being serialized?  This seems like a strange thing to do; serialization in my experience is about moving objects between &quot;memory domains&quot;.  Is this some kind of strange round trip, where you send the data outside of your process, and it comes back? In any case, can you modify <code>Abstract</code> in any way?"}, {"owner": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1495117308, "post_id": 44032289, "comment_id": 75126161, "body": "@Yakk Yes, I manage <code>Abstract</code> class.  It&#39;s a special case of serializing in parameters as a stream to an arbitrary function and calling it with those parameters by unserializing them out of that stream.  This is the same system used by my networking system, except this is a special case where I&#39;d like to allow any types including strong pointers on the local machine."}], "answers": [{"comments": [{"owner": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "edited": false, "score": 0, "creation_date": 1495117180, "post_id": 44033174, "comment_id": 75126025, "body": "You mentioned a lot of things that I already mentioned in my question.  But to clarify some things -  I am indeed inheriting from <code>enable_shared_from_this</code> and the original type isn&#39;t a concern since I can cast out of <code>Abstract</code> appropriately."}, {"owner": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "edited": false, "score": 0, "creation_date": 1495200312, "post_id": 44033174, "comment_id": 75166543, "body": "No, this isn&#39;t right. I said things inherit from <code>Abstract</code> - however, no class actually is of type <code>Abstract</code> and your <code>addAbstractToStream</code>/<code>removeAbstractFromStream</code> assume it&#39;s always the base class. I&#39;ve gone ahead with my &quot;hacky&quot; solution since it handles ownership, until further notice."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "edited": false, "score": 0, "creation_date": 1495200586, "post_id": 44033174, "comment_id": 75166740, "body": "<code>std::shared_ptr&lt;T&gt; inside of it (where T is any class that derives from Abstract).</code> Did not this mean that you inherit all your class from <code>Abstract</code>?"}, {"owner": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "edited": false, "score": 0, "creation_date": 1495203478, "post_id": 44033174, "comment_id": 75168804, "body": "Yes, but you can&#39;t simply <code>memcpy</code> the base class and expect the derived classes&#39; details to be transferred as well."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "edited": false, "score": 0, "creation_date": 1495203606, "post_id": 44033174, "comment_id": 75168896, "body": "I do not <code>memcpy</code> the class instance itself, I <code>memcpy</code> only the pointer, because you said that your serialization/deserialization process work in the same process (the same memory space)."}, {"owner": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "edited": false, "score": 0, "creation_date": 1495204364, "post_id": 44033174, "comment_id": 75169393, "body": "Sorry, it&#39;s hard to decipher the actual answer in your large block of code.  Essentially at the end of the day, your suggestion is storing a strong pointer inside of the <code>Abstract</code> class so it&#39;s later retrievable, yes?  Seems reasonable; will ponder on it."}, {"owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "reply_to_user": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "edited": false, "score": 0, "creation_date": 1495204488, "post_id": 44033174, "comment_id": 75169487, "body": "Yes it does, the first sentence of the post mentions it."}, {"owner": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "edited": false, "score": 0, "creation_date": 1495204916, "post_id": 44033174, "comment_id": 75169764, "body": "I wouldn&#39;t say the first sentence says that at all, but I understand you now."}], "tags": [], "owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "is_accepted": false, "score": 2, "last_activity_date": 1495205015, "last_edit_date": 1495205015, "creation_date": 1495048959, "answer_id": 44033174, "question_id": 44032289, "link": "https://stackoverflow.com/questions/44032289/serialize-stdshared-ptr-into-and-out-of-binary-stream/44033174#44033174", "title": "Serialize std::shared_ptr&lt;&gt; into and out of binary stream", "body": "<p>Since your serialization/deserialization process happens in the same process (i.e. the same memory space) then you can store the raw memory pointers as the binary data in your stream. Consider the idea below, written as a trivial demo.</p>\n\n<p>Unfortunately, <code>std::enable_shared_from_this</code> does not allow to increment/decrement manually the reference counter because it is just storing a weak reference, that is not able to destroy the object on <code>ref == 0</code> internally. That is why we have to make a manual reference management, specifically for the instances in the byte stream.</p>\n\n<pre><code>class Abstract : public std::enable_shared_from_this&lt;Abstract&gt; {\npublic:\n  Abstract() : _count(0) {}\n\n  ~Abstract() { cout &lt;&lt; \"I am destoryed\" &lt;&lt; endl; }\n\n  void incrementStreamRef() {\n    std::lock_guard&lt;std::mutex&gt; lock(_mutex);\n    if (!_count) {\n      _guard = this-&gt;shared_from_this();\n    }\n    ++_count;\n  };\n\n  void decrementStreamRef() {\n    std::lock_guard&lt;std::mutex&gt; lock(_mutex);\n    if (_count == 0)\n      return;\n\n    if (_count == 1) {\n      if (_guard.use_count() == 1) {\n        // After this call `this` will be destroyed\n        _guard.reset();\n        return;\n      }\n      _guard.reset();\n    }\n    --_count;\n  };\n\nprivate:\n  std::mutex _mutex;\n  std::shared_ptr&lt;Abstract&gt; _guard;\n  std::size_t _count;\n};\n\nvoid addAbstractToStream(std::vector&lt;uint8_t&gt;&amp; byteStream, Abstract* abstract) {\n  abstract-&gt;incrementStreamRef();\n  auto offset = byteStream.size();\n  try {\n    // 1 byte for type identification\n    byteStream.resize(offset + sizeof(abstract) + 1);\n    byteStream[offset]\n      = 0xEE; // Means the next bytes are the raw pointer to an Abstract instance\n    ++offset;\n    // Add the raw pointer to the stream\n    // prealocate memory here\n    // byteStream.push_back(....;\n    // ....\n  } catch (...) {\n    abstract-&gt;decrementStreamRef();\n    return;\n  }\n  std::memcpy(byteStream.data() + static_cast&lt;std::ptrdiff_t&gt;(offset),\n              (void*)&amp;abstract,\n              sizeof(abstract));\n}\n\nvoid removeAbstractFromStream(std::vector&lt;uint8_t&gt;&amp; byteStream, std::size_t offset) {\n  Abstract* abstract;\n\n  std::memcpy((void*)&amp;abstract,\n              byteStream.data() + static_cast&lt;std::ptrdiff_t&gt;(offset),\n              sizeof(abstract));\n\n  abstract-&gt;decrementStreamRef();\n}\n\nvoid tryMe(std::vector&lt;uint8_t&gt;&amp; byteStream) {\n  // Must not be destoryed when we leave the scope\n  auto abstract = std::make_shared&lt;Abstract&gt;();\n\n  addAbstractToStream(byteStream, abstract.get());\n\n  cout &lt;&lt; \"Scope is about to be left\" &lt;&lt; endl;\n}\n\nint main() {\n  // Always walk over the stream and use `removeAbstractFromStream`\n  std::vector&lt;uint8_t&gt; byteStream;\n\n  // `try` to always clean the byte stream\n  // Of course RAII is much better\n  try {\n    // Do some work with the stream\n  } catch (...) {\n    removeAbstractFromStream(byteStream, 1);\n    throw;\n  }\n\n  tryMe(byteStream);\n\n  cout &lt;&lt; \"Main is about to be left\" &lt;&lt; endl;\n  removeAbstractFromStream(byteStream, 1);\n  cout &lt;&lt; \"Main is even closer to be left\" &lt;&lt; endl;\n\n  return 0;\n}\n</code></pre>\n\n<p>Of course, more elaborate locking could be fine, or discarded at all if the thread-safety is not a concern. Please, revise the code for corner cases before using in production.</p>\n"}], "owner": {"reputation": 2859, "user_id": 1019385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDlK2.png?s=128&g=1", "display_name": "Mike Weir", "link": "https://stackoverflow.com/users/1019385/mike-weir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495205015, "creation_date": 1495045566, "question_id": 44032289, "link": "https://stackoverflow.com/questions/44032289/serialize-stdshared-ptr-into-and-out-of-binary-stream", "title": "Serialize std::shared_ptr&lt;&gt; into and out of binary stream", "body": "<p>I have a custom, generalized serialization system written in C++ where I've handled intrinsics, <code>std::string</code> and structures containing those.  However, for a memory stream class containing a <code>std::vector&lt;byte&gt;</code>, I'd like to make it possible to store and retrieve a <code>std::shared_ptr&lt;T&gt;</code> inside of it (where <code>T</code> is any class that derives from <code>Abstract</code>).  Of course, I'd like a solution <strong>without using Boost</strong> as it would defeat my intent.</p>\n\n<p>As stated on <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/memory/shared_ptr</a> :</p>\n\n<blockquote>\n  <p>Constructing a new shared_ptr using the raw underlying pointer owned by another shared_ptr leads to undefined behavior. </p>\n</blockquote>\n\n<p>The only (hacky) solution I have come up so far is for the binary memory stream class having a small lookup table of <code>std::shared_ptr&lt;Abstract&gt;</code> referenced by the raw pointer itself, making it fairly trivial to read and write them out, and ownership/reference count would be reliable.  Then it becomes possible/useful to serialize the raw pointer.</p>\n\n<p>However, ownership/reference count is not of concern as it's guaranteed for the use case.  If there is a solution that would only use the <code>std::vector&lt;byte&gt;</code>, I would consider it a more elegant approach as it could provide other use cases.</p>\n"}, {"tags": ["c++", "c++11", "lambda", "clang-format"], "comments": [{"owner": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "edited": false, "score": 0, "creation_date": 1495045138, "post_id": 44032087, "comment_id": 75090879, "body": "What version of <code>clang-format</code> are you using? This might be a bug: <a href=\"https://www.mail-archive.com/llvm-bugs@lists.llvm.org/msg05471.html\" rel=\"nofollow noreferrer\">mail-archive.com/llvm-bugs@lists.llvm.org/msg05471.html</a>"}, {"owner": {"reputation": 601, "user_id": 368861, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jyvRY.jpg?s=128&g=1", "display_name": "Federico B.", "link": "https://stackoverflow.com/users/368861/federico-b"}, "reply_to_user": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "edited": false, "score": 0, "creation_date": 1495045829, "post_id": 44032087, "comment_id": 75091192, "body": "I am using version 5.0.0 (tags/google/stable/2017-03-17)"}, {"owner": {"reputation": 601, "user_id": 368861, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jyvRY.jpg?s=128&g=1", "display_name": "Federico B.", "link": "https://stackoverflow.com/users/368861/federico-b"}, "reply_to_user": {"reputation": 20315, "user_id": 963881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e82a2a2b9ddf6fb580a9c34b2eca65f4?s=128&d=identicon&r=PG&f=1", "display_name": "syntagma", "link": "https://stackoverflow.com/users/963881/syntagma"}, "edited": false, "score": 0, "creation_date": 1495046008, "post_id": 44032087, "comment_id": 75091290, "body": "I just found bug reports tracking the problem with lambdas <a href=\"https://bugs.llvm.org//show_bug.cgi?id=32151\" rel=\"nofollow noreferrer\">bugs.llvm.org//show_bug.cgi?id=32151</a> and extern blocks <a href=\"https://bugs.llvm.org//show_bug.cgi?id=26689\" rel=\"nofollow noreferrer\">bugs.llvm.org//show_bug.cgi?id=26689</a>"}, {"owner": {"reputation": 1467, "user_id": 1364178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cd7a325d0e5f65ea55fcc81a90df01a?s=128&d=identicon&r=PG", "display_name": "David Vereb", "link": "https://stackoverflow.com/users/1364178/david-vereb"}, "edited": false, "score": 3, "creation_date": 1496865946, "post_id": 44032087, "comment_id": 75842198, "body": "I believe all of your BraceWrapping values are ignored if you don&#39;t have BreakBeforeBraces set to Custom."}, {"owner": {"reputation": 18087, "user_id": 261217, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6a20a7f940e6ba33cde991a80d5b6a43?s=128&d=identicon&r=PG", "display_name": "Mikhail", "link": "https://stackoverflow.com/users/261217/mikhail"}, "edited": false, "score": 3, "creation_date": 1507207366, "post_id": 44032087, "comment_id": 80124604, "body": "I believe more related is <a href=\"https://bugs.llvm.org/show_bug.cgi?id=27640\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=27640</a>"}], "answers": [{"tags": [], "owner": {"reputation": 566, "user_id": 4667104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-rGRu3uu46Vg/AAAAAAAAAAI/AAAAAAAAAS4/sFeLdQuPwdU/photo.jpg?sz=128", "display_name": "Elvis Teixeira", "link": "https://stackoverflow.com/users/4667104/elvis-teixeira"}, "is_accepted": false, "score": 4, "last_activity_date": 1583321301, "last_edit_date": 1583321301, "creation_date": 1514993852, "answer_id": 48080511, "question_id": 44032087, "link": "https://stackoverflow.com/questions/44032087/clang-format-break-before-braces-for-lambda-functions-and-extern-blocks/48080511#48080511", "title": "clang-format: Break before braces for lambda functions and extern blocks", "body": "<p>I don't think there is an option for this particular case. I am sorry if you don't consider this as an answer, but when I have these \"fine tuning\" problems with clang-format, I just format the snippet as I want and comment <code>clang-format off</code> just before the interesting snippet and <code>clang-format on</code>  right after. I often do that to maintain some blank character sequence used to align code for better reading. The effect is of course that CF will not change that snippet. So your code may be</p>\n\n<pre><code>// clang-format off\nauto cb = [](std::string const&amp; _param)\n{\n    std::cout &lt;&lt; _param;\n};\n// clang-format on\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 1826126, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/bda5e627b902fecf2b43ecf5285ff352?s=128&d=identicon&r=PG", "display_name": "Jakub Jeziorski", "link": "https://stackoverflow.com/users/1826126/jakub-jeziorski"}, "is_accepted": false, "score": 4, "last_activity_date": 1588699172, "creation_date": 1588699172, "answer_id": 61619067, "question_id": 44032087, "link": "https://stackoverflow.com/questions/44032087/clang-format-break-before-braces-for-lambda-functions-and-extern-blocks/61619067#61619067", "title": "clang-format: Break before braces for lambda functions and extern blocks", "body": "<p>This appears to be addressed with <code>BeforeLambdaBody</code> introduced in clang-format 11.</p>\n"}], "owner": {"reputation": 601, "user_id": 368861, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jyvRY.jpg?s=128&g=1", "display_name": "Federico B.", "link": "https://stackoverflow.com/users/368861/federico-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3984, "favorite_count": 0, "answer_count": 2, "score": 16, "last_activity_date": 1588699172, "creation_date": 1495044703, "question_id": 44032087, "link": "https://stackoverflow.com/questions/44032087/clang-format-break-before-braces-for-lambda-functions-and-extern-blocks", "title": "clang-format: Break before braces for lambda functions and extern blocks", "body": "<p>I have a lambda function formatted like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>auto cb = [](std::string const&amp; _param)\n{\n    std::cout &lt;&lt; _param;\n};\n</code></pre>\n\n<p>I would like to keep the opening brace on a new line, but <code>clang-format</code> always places it at the end of the first line. Is it possible to configure <code>clang-format</code> to follow the style above?</p>\n\n<p>The relevant part of my current configuration looks like this:</p>\n\n<pre><code>BraceWrapping:                         \n  AfterClass:      true   \n  AfterControlStatement: true\n  AfterEnum:       true\n  AfterFunction:   true          \n  AfterNamespace:  true                \n  AfterStruct:     true\n  AfterUnion:      true\n  BeforeCatch:     true\n  BeforeElse:      true   \n  IndentBraces:    true\nBreakBeforeBraces: Allman\n</code></pre>\n\n<p>I would also like to do the same for <code>extern</code> blocks:</p>\n\n<pre><code>extern \"C\"\n{\n  // ...\n}\n</code></pre>\n"}, {"tags": ["c++", "drawing", "sfml"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495044638, "post_id": 44032042, "comment_id": 75090579, "body": "Welcome to Stack Overflow. Please take the time to read <a href=\"http://stackoverflow.com/tour\">The Tour</a> and refer to the material from the <a href=\"http://stackoverflow.com/help/asking\">Help Center</a> what and how you can ask here."}, {"owner": {"reputation": 666, "user_id": 7144080, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49830c5c842b4f51af8d4067ac5a37bd?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Martinez", "link": "https://stackoverflow.com/users/7144080/omar-martinez"}, "edited": false, "score": 0, "creation_date": 1495044789, "post_id": 44032042, "comment_id": 75090681, "body": "Are you setting the position of the first rectangle? You don&#39;t need two rectangles objects to achieve two visual rectangles. Try to set the position of one rectangle, draw it, set the position to the new location, and draw that again."}, {"owner": {"reputation": 11, "user_id": 8027020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9052d01f96572dae6261b600766688e?s=128&d=identicon&r=PG&f=1", "display_name": "rursus", "link": "https://stackoverflow.com/users/8027020/rursus"}, "edited": false, "score": 0, "creation_date": 1495045385, "post_id": 44032042, "comment_id": 75090981, "body": "Thanks a lot, I got it working :D I didn&#39;t think you would have to set the position of the first rectangle."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1495044668, "creation_date": 1495044668, "answer_id": 44032073, "question_id": 44032042, "link": "https://stackoverflow.com/questions/44032042/sfml-drawing-a-shape-to-multiple-places-on-the-screen/44032073#44032073", "title": "SFML drawing a shape to multiple places on the screen", "body": "<p>Have two rectangles with different positions. Draw both, then <code>display()</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 8027020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9052d01f96572dae6261b600766688e?s=128&d=identicon&r=PG&f=1", "display_name": "rursus", "link": "https://stackoverflow.com/users/8027020/rursus"}, "edited": false, "score": 0, "creation_date": 1495045617, "post_id": 44032228, "comment_id": 75091087, "body": "Thanks for the help!"}], "tags": [], "owner": {"reputation": 130, "user_id": 8004586, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e67d7b81ad2a7e7832ef7f9b0a31e5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Heryon", "link": "https://stackoverflow.com/users/8004586/heryon"}, "is_accepted": true, "score": 0, "last_activity_date": 1495045314, "creation_date": 1495045314, "answer_id": 44032228, "question_id": 44032042, "link": "https://stackoverflow.com/questions/44032042/sfml-drawing-a-shape-to-multiple-places-on-the-screen/44032228#44032228", "title": "SFML drawing a shape to multiple places on the screen", "body": "<p>This piece of code should work fine. I think the fact is that you set the position of your rectangle to <code>100, 200</code> but you never set it back to whatever position the first one is before drawing it again.<br/>\nYou should have</p>\n\n<pre><code>window.clear();\nrectangle.setPosition(0.f, 0.f);\nwindow.draw(rectangle);\nrectanlge.setPosition(100.f, 200.f);\nwindow.draw(rectangle);\nwindow.display();\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8027020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9052d01f96572dae6261b600766688e?s=128&d=identicon&r=PG&f=1", "display_name": "rursus", "link": "https://stackoverflow.com/users/8027020/rursus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1406, "favorite_count": 0, "accepted_answer_id": 44032228, "answer_count": 2, "score": -1, "last_activity_date": 1495045314, "creation_date": 1495044564, "question_id": 44032042, "link": "https://stackoverflow.com/questions/44032042/sfml-drawing-a-shape-to-multiple-places-on-the-screen", "title": "SFML drawing a shape to multiple places on the screen", "body": "<p>What I want to do is to draw a Rectangle Shape object to multiple places on the screen and have them all displayed. I tried doing this:</p>\n\n<pre><code>window.draw(rectangle);\nrectangle.setPosition(100, 200);\nwindow.draw(rectangle);\nwindow.display();\n</code></pre>\n\n<p>But it only displayed the second rectangle. Is there any easy solution to this?</p>\n"}, {"tags": ["c++", "smoothing"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1495043810, "post_id": 44031811, "comment_id": 75090142, "body": "The right tool to solve such problems is your debugger. You should step through your code line-by-line <i>before</i> asking on Stack Overflow. For more help, please read <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs (by Eric Lippert)</a>. At a minimum, you should <a href=\"https://stackoverflow.com/posts/44031811/edit\">edit</a> your question to include a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable</a> example that reproduces your problem, along with the observations you made in the debugger."}, {"owner": {"reputation": 47, "user_id": 7809501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3dd85dfc71a35e56be1cb78503802bb6?s=128&d=identicon&r=PG&f=1", "display_name": "asdfghjkl", "link": "https://stackoverflow.com/users/7809501/asdfghjkl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495045355, "post_id": 44031811, "comment_id": 75090976, "body": "Okay, I apologize then. I&#39;m just not sure I have understood the theory of smoothing, and that&#39;s mostly why I wanted some feedback, to see if I was completely off."}, {"owner": {"reputation": 47, "user_id": 7809501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3dd85dfc71a35e56be1cb78503802bb6?s=128&d=identicon&r=PG&f=1", "display_name": "asdfghjkl", "link": "https://stackoverflow.com/users/7809501/asdfghjkl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495046811, "post_id": 44031811, "comment_id": 75091719, "body": "Also, isn&#39;t the code I have included minimal, complete, and verifiable? It is precisely a boiled down version of my program that shows what I&#39;m asking about."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495047711, "post_id": 44031811, "comment_id": 75092192, "body": "You should at least give the people that have Eigen installed, a chance to just copy your code into their IDE, press the <i>compile button</i> and start debugging it. But IMO, the debugging efforts is on your site 1st. You code won&#39;t ever compile with statements outside of function scope blocks, etc."}, {"owner": {"reputation": 47, "user_id": 7809501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3dd85dfc71a35e56be1cb78503802bb6?s=128&d=identicon&r=PG&f=1", "display_name": "asdfghjkl", "link": "https://stackoverflow.com/users/7809501/asdfghjkl"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495049220, "post_id": 44031811, "comment_id": 75092995, "body": "I rewrote the example to not use Eigen now. Should I delete this thread and make a new?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1495049680, "post_id": 44031811, "comment_id": 75093238, "body": "As mentioned debug it on your own 1st please. If you see specific anomalies, explain them and come back (with this very question)."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1495049834, "post_id": 44031811, "comment_id": 75093329, "body": "It actually does blur (only slightly, because this kernel is very peaked), but the test data is already smooth - if you plot it as a plane in 3D it is actually a plane. With different data it becomes clear that it blurs, eg <a href=\"http://ideone.com/GbHRKA\" rel=\"nofollow noreferrer\">this</a>"}], "owner": {"reputation": 47, "user_id": 7809501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3dd85dfc71a35e56be1cb78503802bb6?s=128&d=identicon&r=PG&f=1", "display_name": "asdfghjkl", "link": "https://stackoverflow.com/users/7809501/asdfghjkl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495056241, "creation_date": 1495043718, "last_edit_date": 1495056241, "question_id": 44031811, "link": "https://stackoverflow.com/questions/44031811/smoothing-kernel-on-hough-transform", "title": "Smoothing kernel on Hough transform?", "body": "<p>I have an array containing votes (from a Hough transform) of where there are circles in data, I have collected. How would I go about smoothing the data?</p>\n\n<p>This is an example I have made so far (the data is much bigger and impossible to get an overview of). I tried doing what I thought was a kernel smoother, but it might not be what I thought it was. </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() {\n    double data[20][20];        // Unsmoothed array\n    double smoothed[20][20];    // Output array\n    double kernel[3][3];        // Kernel for smoothing\n\n    kernel[0][0] = 0.05;\n    kernel[0][1] = 0.1;\n    kernel[0][2] = 0.05;\n    kernel[1][0] = 0.1;\n    kernel[1][1] = 0.8;\n    kernel[1][2] = 0.1;\n    kernel[2][0] = 0.05;\n    kernel[2][1] = 0.1;\n    kernel[2][2] = 0.05;\n\n    double factor = (double)5 / (double)7; // To normalize the kernel\n    double counter = 0.0;\n\n    for (int j = 0; j &lt; 20; j++)\n    {\n        for (int i = 0; i &lt; 20; i++)\n        {\n            data[i][j] = counter;   // Elements go from 0 to 299\n            smoothed[i][j] = 0;     // Set all elements to zero\n            counter++;\n        }\n    }\n    for (int j = 0; j &lt; 20; j++)\n    {\n        for (int i = 0; i &lt; 20; i++)\n        {\n            if (i &gt; 0 &amp;&amp; j &gt; 0 &amp;&amp; i &lt; 19 &amp;&amp; j &lt; 19)\n            {\n                smoothed[i][j] = (\n                    kernel[0][0] * data[i - 1][j - 1] +\n                    kernel[0][1] * data[i    ][j - 1] +\n                    kernel[0][2] * data[i + 1][j - 1] +\n                    kernel[1][0] * data[i - 1][j    ] +\n                    kernel[1][1] * data[i    ][j    ] +\n                    kernel[1][2] * data[i + 1][j    ] +\n                    kernel[2][0] * data[i - 1][j + 1] +\n                    kernel[2][1] * data[i    ][j + 1] +\n                    kernel[2][2] * data[i + 1][j + 1]\n                    ) * factor;\n            }\n        }\n    }\n\n    for (int j = 0; j &lt; 20; j++)\n    {\n        for (int i = 0; i &lt; 20; i++)\n        {\n            std::cout &lt;&lt; smoothed[i][j] &lt;&lt; \"    \";\n        }\n        std::cout &lt;&lt; \"\\n\";\n    }\n}\n</code></pre>\n\n<p>However, this produces the same output as the input - with the exception of having cut off the edge of the data, but that's not a problem with my data anyway. </p>\n\n<p>Is this a completely wrong way to do it, or am I just missing some details?</p>\n"}, {"tags": ["c++", "c++11", "list-initialization", "type-narrowing"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1495043491, "post_id": 44031644, "comment_id": 75089936, "body": "Keep in mind that uniform initialization is a newer concept. It was designed with the benefits of hindsight. Also keep in mind that it may not be trivial to change the behavior of long-standing mechanisms."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1495044481, "post_id": 44031728, "comment_id": 75090504, "body": "Note that most compilers have options/flags you can enable that will cause them to <i>also</i> issue a diagnostic for narrowing conversions of the pre-C++11 form - if you so desire (for gcc this would be <code>-Wnarrowing</code>)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 0, "creation_date": 1495045096, "post_id": 44031728, "comment_id": 75090862, "body": "This is not only with new syntax. <code>int a[] = {ld};</code> was valid C++03 but became invalid in C++11."}, {"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 0, "creation_date": 1495045287, "post_id": 44031728, "comment_id": 75090949, "body": "@hvd I think that&#39;s also now considered list initialization, although cannot bet on it."}], "tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 3, "last_activity_date": 1495043746, "last_edit_date": 1495542380, "creation_date": 1495043431, "answer_id": 44031728, "question_id": 44031644, "link": "https://stackoverflow.com/questions/44031644/narrowing-conversion-required-while-list-initialization/44031728#44031728", "title": "Narrowing Conversion required while list initialization", "body": "<p>Because the compiler is required to issue a diagnostic (in your case error) for narrowing <strong>only</strong> for <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\"><strong>list initialization</strong></a> (a.k.a. <strong>uniform initialization</strong>), introduced starting with C++11. For the pre-C++11 initialization without curly braces, there is no diagnostic required.</p>\n\n<p>See the <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization#Narrowing_conversions\" rel=\"nofollow noreferrer\">cppreference.com</a> documentation for more details.</p>\n\n<p>Also see <a href=\"https://stackoverflow.com/a/28466236/3093378\">this answer</a> as to why the compiler is only required to issue a warning, not necessarily an error.</p>\n"}], "owner": {"reputation": 157, "user_id": 7868053, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh6.googleusercontent.com/-Bl_9eC4Kl-M/AAAAAAAAAAI/AAAAAAAAADM/NwBJVuvzjl8/photo.jpg?sz=128", "display_name": "daljinder singh", "link": "https://stackoverflow.com/users/7868053/daljinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 44031728, "answer_count": 1, "score": 3, "last_activity_date": 1495045325, "creation_date": 1495043096, "last_edit_date": 1495045325, "question_id": 44031644, "link": "https://stackoverflow.com/questions/44031644/narrowing-conversion-required-while-list-initialization", "title": "Narrowing Conversion required while list initialization", "body": "<p>I read about narrowing conversion on the cpp reference website. I kind of understood it but what i am not getting is that why is the error present only in the first line.</p>\n\n<pre><code>    long double ld = 3.1415926536;\n    int a{ld}, b = {ld}; // error: narrowing conversion required\n    int c(ld), d = ld;   // ok: but value will be truncated\n</code></pre>\n\n<p>Why is the error only present in first line and not the second?</p>\n"}, {"tags": ["c++", "c++11", "random"], "comments": [{"owner": {"reputation": 22898, "user_id": 1915893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580b31b0be7173bbc477ca1d6967d87c?s=128&d=identicon&r=PG", "display_name": "Aluan Haddad", "link": "https://stackoverflow.com/users/1915893/aluan-haddad"}, "edited": false, "score": 1, "creation_date": 1495040709, "post_id": 44030912, "comment_id": 75088318, "body": "Stephan T. Lavavej, the lead maintainer of Microsoft&#39;s STL implmentation recommends, MT19937 in this talk. Worth watching too <a href=\"https://channel9.msdn.com/events/GoingNative/2013/rand-Considered-Harmful\" rel=\"nofollow noreferrer\">channel9.msdn.com/events/GoingNative/2013/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1495041055, "post_id": 44030912, "comment_id": 75088521, "body": "@Some programmer dude the default_ seed used if you just default construct is hardcoded as <code>5489u</code> (for mt19937). A fixed hardcoded seed is rarely what you want."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 1, "creation_date": 1495041414, "post_id": 44030912, "comment_id": 75088727, "body": "I think a <code>uniform_int_distribution</code> will still be uniform however you seed it. But better seeding can reduce chances of getting the same sequence of uniformly distributed values."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 1, "creation_date": 1495042296, "post_id": 44030912, "comment_id": 75089242, "body": "How secure do you need these numbers to be? Are they for rolling dice in a game, or for some cryptographic purpose like generating a secure key? If it\u2019s the first one, any sort of seeding is probably good enough."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1495042773, "post_id": 44030912, "comment_id": 75089520, "body": "@DanielH Yes, and if it is for cryptographic purposes then a pseudo random number generator is not good enough anyway."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1495043066, "post_id": 44030912, "comment_id": 75089675, "body": "@ChrisDrew Probably, but there\u2019s a bunch of stuff in between; there\u2019s a good example in the paper where you want high-quality seeding but don\u2019t care enough for an hrng"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1495044557, "post_id": 44030912, "comment_id": 75090536, "body": "I don&#39;t think <code>std::default_random_engine</code> is meant to be anything other than a <code>toy</code> as it doesn&#39;t give any guarantees. The good thing about the <i>mersenne twister</i> is that it tells you the size of its internal state giving you information as to how big a seed you need. I don&#39;t know if you can do that with the <i>default_random_engine</i>."}], "answers": [{"comments": [{"owner": {"reputation": 5276, "user_id": 1060159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7890a5cb5605356754da0bc842a4426?s=128&d=identicon&r=PG", "display_name": "marmistrz", "link": "https://stackoverflow.com/users/1060159/marmistrz"}, "edited": false, "score": 1, "creation_date": 1498380783, "post_id": 44032961, "comment_id": 76470425, "body": "Why 8 and not 6 or 10? And why can I feel safe using std::random_device here if I did not before?"}], "tags": [], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": false, "score": 5, "last_activity_date": 1495180877, "last_edit_date": 1495180877, "creation_date": 1495048055, "answer_id": 44032961, "question_id": 44030912, "link": "https://stackoverflow.com/questions/44030912/how-should-i-properly-seed-c11-stddefault-random-engine/44032961#44032961", "title": "How should I properly seed C++11 std::default_random_engine?", "body": "<p>A <code>uniform_int_distribution</code> will still be uniform however you seed it. But better seeding can reduce chances of getting the same sequence of uniformly distributed values.</p>\n\n<p>I think for most purposes using a <code>std::seed_seq</code> with about 8 random 32bit ints from <code>std::random_device</code> should be sufficient. It is not perfect, for the reasons given in the post you linked but if you need really secure numbers for cryptographic purposes you shouldn't really be using a pseudo random number generator anyway:</p>\n\n<pre><code>constexpr std::size_t SEED_LENGTH = 8;\n\nstd::array&lt;uint_fast32_t, SEED_LENGTH&gt; generateSeedData() {\n  std::array&lt;uint_fast32_t, SEED_LENGTH&gt; random_data;\n  std::random_device random_source;\n  std::generate(random_data.begin(), random_data.end(), std::ref(random_source));\n  return random_data;\n}\n\nstd::mt19937 createEngine() {\n  auto random_data = generateSeedData();\n  std::seed_seq seed_seq(random_data.begin(), random_data.end());\n  return std::mt19937{ seed_seq };\n}\n</code></pre>\n"}], "owner": {"reputation": 5276, "user_id": 1060159, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d7890a5cb5605356754da0bc842a4426?s=128&d=identicon&r=PG", "display_name": "marmistrz", "link": "https://stackoverflow.com/users/1060159/marmistrz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1645, "favorite_count": 2, "answer_count": 1, "score": 14, "last_activity_date": 1495180877, "creation_date": 1495040496, "question_id": 44030912, "link": "https://stackoverflow.com/questions/44030912/how-should-i-properly-seed-c11-stddefault-random-engine", "title": "How should I properly seed C++11 std::default_random_engine?", "body": "<p>According to <a href=\"http://www.pcg-random.org/posts/cpp-seeding-surprises.html\" rel=\"noreferrer\">this</a> post, intuitive seeding with <code>std::random_device</code> may not produce the expected results. In particular, if the Mersenne Twister engine is used, not all the initialization states can be reached. Using seed_seq doesn't helper either, since it is not a bijection. </p>\n\n<p>This all, as far as I understand, means that not the <code>std::uniform_int_distribution</code> will not really be uniform - because not all seed values are possible.</p>\n\n<p>I'd like to simply generate a couple of random numbers. While this is a really interesting topic which I will certainly devote some of my free time, many people may not have this possibility. </p>\n\n<p>So the question is: how should I properly seed the <code>std::default_random_engine</code> so that it simply does what I expect?</p>\n"}, {"tags": ["c++", "c++11", "lambda", "c++14"], "comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1495041011, "post_id": 44030858, "comment_id": 75088480, "body": "I don&#39;t... understand what your question is. What are you actually trying to do? Your initial C++14 example and C++11 example aren&#39;t equivalent, so I can&#39;t extrapolate what the problem is."}, {"owner": {"reputation": 584, "user_id": 2950563, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/FQ8IX.gif?s=128&g=1", "display_name": "J&#233;r&#233;mi Panneton", "link": "https://stackoverflow.com/users/2950563/j%c3%a9r%c3%a9mi-panneton"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1495041602, "post_id": 44030858, "comment_id": 75088860, "body": "How are they not equivalent? I don&#39;t see any other way in C++11 to achieve the same result..."}, {"owner": {"reputation": 584, "user_id": 2950563, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/FQ8IX.gif?s=128&g=1", "display_name": "J&#233;r&#233;mi Panneton", "link": "https://stackoverflow.com/users/2950563/j%c3%a9r%c3%a9mi-panneton"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1495041831, "post_id": 44030858, "comment_id": 75088980, "body": "As for my usage, I&#39;m using the lambda with SFINAE to detect constexpr input (the lambda is not used as is obviously). It works well in C++14, but I&#39;m trying to make it C++11 compatible. See <a href=\"http://stackoverflow.com/a/40413051/2950563\">stackoverflow.com/a/40413051/2950563</a> for a similar use case."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1495042182, "post_id": 44030858, "comment_id": 75089178, "body": "The lambda example doesn&#39;t capture anything. In the <code>Functor</code> example (not actually a <a href=\"https://en.wikipedia.org/wiki/Functor\" rel=\"nofollow noreferrer\">functor</a>), it has a member variable. Regardless, it would help your question a lot if it had a <i>clear problem statement</i> of what it is you can do in C++14 but are struggling with in C++11."}, {"owner": {"reputation": 584, "user_id": 2950563, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/FQ8IX.gif?s=128&g=1", "display_name": "J&#233;r&#233;mi Panneton", "link": "https://stackoverflow.com/users/2950563/j%c3%a9r%c3%a9mi-panneton"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1495042313, "post_id": 44030858, "comment_id": 75089253, "body": "Yes I agree. It&#39;s not exactly how the lambda would have been generated in practice. By &#39;equivalent&#39;, I was meaning that the behavior was the same in both cases."}, {"owner": {"reputation": 64049, "user_id": 2015579, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/28571d6df35321850e78b1ebfd48e5b4?s=128&d=identicon&r=PG", "display_name": "Richard Hodges", "link": "https://stackoverflow.com/users/2015579/richard-hodges"}, "edited": false, "score": 2, "creation_date": 1495043853, "post_id": 44030858, "comment_id": 75090169, "body": "replace <code>T</code> with a <code>std::tuple&lt;Ts...&gt;</code>. Unpack the tuple into an argument list with the help of a c++11 equivalent of <code>std::index_sequence</code>"}], "answers": [{"comments": [{"owner": {"reputation": 40655, "user_id": 1023390, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/2g9CZ.jpg?s=128&g=1", "display_name": "Walter", "link": "https://stackoverflow.com/users/1023390/walter"}, "edited": false, "score": 0, "creation_date": 1495115646, "post_id": 44049196, "comment_id": 75124713, "body": "See also my answer <a href=\"http://stackoverflow.com/a/20441189/1023390\">here</a> for C++14 implementation of <code>std::apply()</code>."}], "tags": [], "owner": {"reputation": 5576, "user_id": 1794345, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ILvFk.jpg?s=128&g=1", "display_name": "Rerito", "link": "https://stackoverflow.com/users/1794345/rerito"}, "is_accepted": true, "score": 2, "last_activity_date": 1495116140, "last_edit_date": 1495116140, "creation_date": 1495114274, "answer_id": 44049196, "question_id": 44030858, "link": "https://stackoverflow.com/questions/44030858/generic-lambda-with-trailing-return-type-depending-on-variadic-arguments-in-c1/44049196#44049196", "title": "Generic lambda with trailing return type depending on variadic arguments in C++11", "body": "<p>From my understanding, a pure C++11 solution can be worked out from @RichardHodges 's idea. You need to recode <code>std::apply</code> by hand. To that end, you also need to recode <code>std::integer_sequence</code>, <code>std::index_sequence</code> and <code>std::make_index_sequence</code>. Let's start with that:</p>\n\n<pre><code>template &lt;typename T, T... Is&gt;\nstruct integral_sequence {};\n\ntemplate &lt;std::size_t... Is&gt;\nusing index_sequence = integral_sequence&lt;std::size_t, Is...&gt;;\n\ntemplate &lt;typename Seq, typename T, T... el&gt;\nstruct append_sequence;\n\ntemplate &lt;typename T, T... el, T... Is&gt;\nstruct append_sequence&lt;integral_sequence&lt;T, Is...&gt;, T, el...&gt; {\n    using type = integral_sequence&lt;T, Is..., el...&gt;;\n};\n\nnamespace details {\n\ntemplate &lt;std::size_t N&gt;\nstruct make_index_sequence_impl {\nprivate:\n    using seq = typename make_index_sequence_impl&lt;N-1&gt;::type;\npublic:\n    using type = typename append_sequence&lt;seq, std::size_t, N&gt;::type;\n};\n\ntemplate &lt;&gt;\nstruct make_index_sequence_impl&lt;0u&gt; {\n    using type = index_sequence&lt;0&gt;;\n};\n\ntemplate &lt;std::size_t N&gt;\nstruct make_index_sequence {\n    using type = typename make_index_sequence_impl&lt;N-1&gt;::type;\n};\n\ntemplate &lt;&gt;\nstruct make_index_sequence&lt;0u&gt; {\n    using type = index_sequence&lt;&gt;;\n};\n\n} // namespace details\n\ntemplate &lt;std::size_t N&gt;\nusing make_index_sequence = typename details::make_index_sequence&lt;N&gt;::type;\n</code></pre>\n\n<p>Now, we can tackle the <code>apply</code> implementation. Its goal is to take a <code>tuple</code> as input and forward its content unpacked. For example, <code>apply([](int x, int y) { /* impl */ }, std::make_tuple(0, 2))</code> is equivalent to <code>[](int x, int y) { /* ... */ }(0, 2)</code></p>\n\n<p>To do that we first need to dispatch a tuple content to a functor using an <code>index_sequence</code>:</p>\n\n<pre><code>namespace details {\n\ntemplate &lt;typename F, typename Tuple, std::size_t... Is&gt;\nauto apply_impl(F&amp;&amp; ftor, Tuple&amp;&amp; tuple, index_sequence&lt;Is...&gt;) -&gt; decltype(std::forward&lt;F&gt;(ftor)(std::get&lt;Is&gt;(tuple)...)) {\n    return std::forward&lt;F&gt;(ftor)(std::get&lt;Is&gt;(tuple)...);\n}\n\n} // namespace details\n</code></pre>\n\n<p>Then, the exposed <code>apply</code> comes in:</p>\n\n<pre><code>template &lt;typename F, typename Tuple&gt;\ntemplate &lt;typename F, typename Tuple&gt;\nauto apply(F&amp;&amp; ftor, Tuple&amp;&amp; tuple) -&gt; decltype(details::apply_impl(std::forward&lt;F&gt;(ftor), std::forward&lt;Tuple&gt;(tuple), make_index_sequence&lt;std::tuple_size&lt;typename std::remove_reference&lt;Tuple&gt;::type&gt;::value&gt;())){\n    return details::apply_impl(std::forward&lt;F&gt;(ftor), std::forward&lt;Tuple&gt;(tuple), make_index_sequence&lt;std::tuple_size&lt;typename std::remove_reference&lt;Tuple&gt;::type&gt;::value&gt;());\n}\n</code></pre>\n\n<p>Now we can get the behavior you desired by storing a tuple inside your class and using apply to dispatch its content to your <code>placeholder</code> functor:</p>\n\n<pre><code>template &lt;typename... Ts&gt;\nclass Functor {\n    std::tuple&lt;Ts...&gt; is;\npublic:\n    constexpr Functor(Ts... ts) : is(std::make_tuple(ts...)) {}\n    template &lt;typename P&gt;\n    constexpr auto operator()(P&amp;&amp; placeholder) -&gt; decltype(apply(std::forward&lt;P&gt;(placeholder), is)) {\n        return apply(std::forward&lt;P&gt;(placeholder), is);\n    }\n};\n</code></pre>\n\n<p>Putting it all together with some examples leads to this <a href=\"http://coliru.stacked-crooked.com/a/82a246112c17eb53\" rel=\"nofollow noreferrer\"><kbd>Live Demo</kbd></a></p>\n"}], "owner": {"reputation": 584, "user_id": 2950563, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/FQ8IX.gif?s=128&g=1", "display_name": "J&#233;r&#233;mi Panneton", "link": "https://stackoverflow.com/users/2950563/j%c3%a9r%c3%a9mi-panneton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "closed_date": 1495115747, "accepted_answer_id": 44049196, "answer_count": 1, "score": 0, "last_activity_date": 1495116140, "creation_date": 1495040311, "question_id": 44030858, "link": "https://stackoverflow.com/questions/44030858/generic-lambda-with-trailing-return-type-depending-on-variadic-arguments-in-c1", "closed_reason": "Duplicate", "title": "Generic lambda with trailing return type depending on variadic arguments in C++11", "body": "<p>In C++14, you can do something like this:</p>\n\n<pre><code>struct Placeholder\n{\n    template&lt;typename T&gt;\n    constexpr static T fct(T val) { return val; }\n};\n\nint main()\n{\n    constexpr int i{};\n    auto fct = [](auto&amp;&amp; placeholder) -&gt; decltype(placeholder.fct(i)) { return 5.5f; };\n    static_assert(fct(Placeholder{}) == 5, \"\");\n}\n</code></pre>\n\n<p>For the sake of the example, consider that Placeholder::fct is actually manipulating the input type to something else (in the present case the function call is useless).</p>\n\n<p>On the other hand, in C++11, you can simulate generic lambdas by declaring a templated functor. In fact, I could simply pass i to the constructor and store it as a member, like so:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass Functor\n{\n    T i;\npublic:\n    constexpr Functor(T i) : i{ i } {}\n    template&lt;typename P&gt;\n    constexpr auto operator()(P&amp;&amp; placeholder) const -&gt; decltype(placeholder.fct(i))\n    {\n        return 5.5f;\n    }\n};\n\nint main()\n{\n    constexpr int i{};\n    constexpr Functor&lt;decltype(i)&gt; fct(i);\n    static_assert(fct(Placeholder{}) == 5, \"\");\n}\n</code></pre>\n\n<p>The problem comes when we want the Placeholder to take a variadic number of arguments, like so:</p>\n\n<pre><code>struct Placeholder\n{\n    template&lt;typename... T&gt;\n    constexpr static auto fct(T... val) -&gt; typename std::common_type&lt;T...&gt;::type\n    {\n        return { /* Do something with the values */ };\n    }\n};\n</code></pre>\n\n<p>In fact, in C++14, we could simply pass the values directly to the lambda:</p>\n\n<pre><code>decltype(placeholder.fct(1, 2, 3))\n</code></pre>\n\n<p>However, in C++11, since we can't store a variadic number of members in a class, I don't see how I could achieve the exact same result. Any ideas?</p>\n"}, {"tags": ["c++", ".net", "visual-studio-2012", "dll", "c++-cli"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1495040246, "post_id": 44030710, "comment_id": 75088010, "body": "Is <code>ManagedApi</code> a <code>ref class</code> (it should be if it is used by other .net code)?"}, {"owner": {"reputation": 25655, "user_id": 480937, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/448470e105833cd4179b24314714360e?s=128&d=identicon&r=PG", "display_name": "David Yaw", "link": "https://stackoverflow.com/users/480937/david-yaw"}, "edited": false, "score": 0, "creation_date": 1495040425, "post_id": 44030710, "comment_id": 75088121, "body": "Is the Native C++ DLL that you&#39;re wrapping something that you compiled? Do you have the source code to it?"}, {"owner": {"reputation": 3168, "user_id": 628228, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cff520b66669064bbfefdc9109731160?s=128&d=identicon&r=PG", "display_name": "glopes", "link": "https://stackoverflow.com/users/628228/glopes"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1495040430, "post_id": 44030710, "comment_id": 75088126, "body": "@crashmstr yes it is, this was a typo, just fixed it. thanks for the headsup"}, {"owner": {"reputation": 3168, "user_id": 628228, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cff520b66669064bbfefdc9109731160?s=128&d=identicon&r=PG", "display_name": "glopes", "link": "https://stackoverflow.com/users/628228/glopes"}, "reply_to_user": {"reputation": 25655, "user_id": 480937, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/448470e105833cd4179b24314714360e?s=128&d=identicon&r=PG", "display_name": "David Yaw", "link": "https://stackoverflow.com/users/480937/david-yaw"}, "edited": false, "score": 0, "creation_date": 1495040518, "post_id": 44030710, "comment_id": 75088185, "body": "@DavidYaw no, and unfortunately I also don&#39;t have access to the source code. This is the reason why I ran <code>dumpbin</code> on the DLL and the signatures seem to roughly match, although other than that I can&#39;t say much."}, {"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1495040743, "post_id": 44030710, "comment_id": 75088331, "body": "I&#39;m not seeing anything wrong with the code you are showing. Are you using the same compiler that the native DLL was compiled with?"}, {"owner": {"reputation": 3168, "user_id": 628228, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cff520b66669064bbfefdc9109731160?s=128&d=identicon&r=PG", "display_name": "glopes", "link": "https://stackoverflow.com/users/628228/glopes"}, "reply_to_user": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 0, "creation_date": 1495041026, "post_id": 44030710, "comment_id": 75088494, "body": "@crashmstr this is my worry as well, I should be but I cannot be entirely sure. I do know both use MSVC. Is there any way to verify the version of the compiler by using only the .lib and/or .dll files?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1495041088, "post_id": 44030710, "comment_id": 75088535, "body": "It is an odd error, you are/should not be using the pinvoke marshaller when you make this call from a C++/CLI program.  Regardless, std::string is never not a problem.  It can only work correctly when your program uses the exact same compiler version with the exact same settings as the library.  You also cannot mix the debug and release builds.  You&#39;ll almost certainly will have to rebuild the library."}, {"owner": {"reputation": 3168, "user_id": 628228, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cff520b66669064bbfefdc9109731160?s=128&d=identicon&r=PG", "display_name": "glopes", "link": "https://stackoverflow.com/users/628228/glopes"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1495042373, "post_id": 44030710, "comment_id": 75089290, "body": "@HansPassant you were right, it was the Release mode that got me. I have to admit I never realized std::string raised so many problems crossing DLL boundaries, as I&#39;ve always only had to deal with char* in the past. I guess this makes it clear once again why most people use C for DLL interop..."}], "answers": [{"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1495065186, "post_id": 44031109, "comment_id": 75099575, "body": "Excellent advice, I&#39;d just like to add that apart from &quot;raw&quot; types, there are some that are defined by Windows for the express purpose of having a common definition regardless of language and compiler settings, so they can be freely shared across modules.  Examples include <code>BSTR</code> and <code>SAFEARRAY</code>"}], "tags": [], "owner": {"reputation": 25655, "user_id": 480937, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/448470e105833cd4179b24314714360e?s=128&d=identicon&r=PG", "display_name": "David Yaw", "link": "https://stackoverflow.com/users/480937/david-yaw"}, "is_accepted": true, "score": 1, "last_activity_date": 1495042248, "last_edit_date": 1495042248, "creation_date": 1495041204, "answer_id": 44031109, "question_id": 44030710, "link": "https://stackoverflow.com/questions/44030710/pinvokestackimbalance-when-calling-a-dll-function-from-c-cli/44031109#44031109", "title": "PInvokeStackImbalance when calling a DLL function from C++/CLI", "body": "<p>It is likely that there's a difference between the definition of <code>std::string</code> that you're using vs. what was used to compile the native C++ DLL. Even if the definitions are the same, the native DLL probably isn't using the same version of the C runtime as you are, so when your DLL allocates memory for the <code>std::string</code>, the Native DLL will try to call <code>delete</code> on it (when the string is destroyed at the end of the <code>readFile</code> method), and that call to <code>delete</code> will go to a different heap than was used to allocate the object!</p>\n\n<p>If you want to make this work, you'll have to use the <em>exact</em> same version of the compiler as was used on the native DLL. Note that you'll be limited to the Release build of your project, as you don't have a native DLL that was compiled with the debug runtime. </p>\n\n<p>The <em>proper</em> fix to this problem is to use raw types when calling across DLL boundaries (in this case, <code>wchar_t*</code>). If you can request a change to the native DLL, I would do that. If only raw types are used, then there's no issue with using different runtimes, and everything works the way it should.</p>\n"}], "owner": {"reputation": 3168, "user_id": 628228, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cff520b66669064bbfefdc9109731160?s=128&d=identicon&r=PG", "display_name": "glopes", "link": "https://stackoverflow.com/users/628228/glopes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 44031109, "answer_count": 1, "score": 0, "last_activity_date": 1495042248, "creation_date": 1495039856, "last_edit_date": 1495040400, "question_id": 44030710, "link": "https://stackoverflow.com/questions/44030710/pinvokestackimbalance-when-calling-a-dll-function-from-c-cli", "title": "PInvokeStackImbalance when calling a DLL function from C++/CLI", "body": "<p>While working on a C++/CLI project to wrap a native C++ DLL, I've come across a native function that takes in a <code>std::string</code>. Something like the following:</p>\n\n<pre><code>class NativeApi\n{\npublic:\n  ErrorCode readFile(std::string filename = \"path.csv\");\n};\n</code></pre>\n\n<p>Inside my managed wrapper implementation I allocate a new instance of the native class and call this function:</p>\n\n<pre><code>ref class ManagedApi\n{\nprivate:\n  NativeApi *api;\npublic:\n  ManagedApi(): api(new NativeApi()) { }\n  void Read()\n  {\n    api-&gt;readFile(\"apath.csv\") // or with nothing to use default value\n  }\n}\n</code></pre>\n\n<p>When I run this, I get the MDA <code>PinvokeStackImbalance</code> complaining that this call has unbalanced the stack. I was surprised, since the only other time I ever got this MDA was from C# when calling conventions didn't match. I never saw this happen with C++/CLI, where presumably all the matching is done automatically by the compiler.</p>\n\n<p>Has anyone ever saw this before? Googling came up empty. I've looked at the DLL signature and it looks something like:</p>\n\n<p><code>?readFile@NativeApi@@QAE?AW4ErrorCode@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z</code></p>\n\n<p>This tells me that the function is there, and takes as a sole argument a <code>basic_string</code>, which should match the standard <code>std::string</code> typedef.</p>\n\n<p>No idea what could possibly have gone wrong. I can make other calls to the native API that do not involve strings perfectly fine.</p>\n"}, {"tags": ["c++", "windows", "visual-studio", "mpi", "breakpoints"], "comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1495039909, "post_id": 44030662, "comment_id": 75087811, "body": "are you debugging it?"}, {"owner": {"reputation": 45, "user_id": 4971279, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/716765ad48883616c0680e7c67f44343?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/4971279/milan"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1495040297, "post_id": 44030662, "comment_id": 75088039, "body": "@Mgetz yes, I am"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1495040330, "post_id": 44030662, "comment_id": 75088056, "body": "did you set a breakpoint at the <code>MPI_Send</code>?"}, {"owner": {"reputation": 45, "user_id": 4971279, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/716765ad48883616c0680e7c67f44343?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/4971279/milan"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1495040433, "post_id": 44030662, "comment_id": 75088129, "body": "@Mgetz no, I havent...the app just breaks from console and a breakpoint appears right next to the else"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1495040552, "post_id": 44030662, "comment_id": 75088208, "body": "have you checked the debug output panel to see what it says? Bets are you&#39;re causing an exception"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1495041002, "post_id": 44030662, "comment_id": 75088473, "body": "please append that to your question, don&#39;t post it in the comments"}, {"owner": {"reputation": 45, "user_id": 4971279, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/716765ad48883616c0680e7c67f44343?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/4971279/milan"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1495041863, "post_id": 44030662, "comment_id": 75088998, "body": "Sorry, it&#39;s my 2nd time using StackOverflow :) I have added the output."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1495042819, "post_id": 44030662, "comment_id": 75089551, "body": "I&#39;m thinking you set the breakpoint yourself accidentally"}, {"owner": {"reputation": 45, "user_id": 4971279, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/716765ad48883616c0680e7c67f44343?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/4971279/milan"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1495043258, "post_id": 44030662, "comment_id": 75089790, "body": "@Mgetz There are no breakpoints. I have tried CTRL+SHIFT+F9 to delete all breakpoints just in case."}, {"owner": {"reputation": 5353, "user_id": 1128551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1b2e64745ac36bf554b976e3625a4ba0?s=128&d=identicon&r=PG&f=1", "display_name": "Shibli", "link": "https://stackoverflow.com/users/1128551/shibli"}, "edited": false, "score": 0, "creation_date": 1495045061, "post_id": 44030662, "comment_id": 75090845, "body": "@Klim <a href=\"http://stackoverflow.com/questions/33204314/code-triggered-a-breakpoint-but-i-set-no-breakpoint-at-all\">This post</a> might be useful."}, {"owner": {"reputation": 1464, "user_id": 6155350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d103f3a98e0e4e220200c8d81e755835?s=128&d=identicon&r=PG&f=1", "display_name": "David Henty", "link": "https://stackoverflow.com/users/6155350/david-henty"}, "edited": false, "score": 0, "creation_date": 1495111877, "post_id": 44030662, "comment_id": 75121838, "body": "I don&#39;t understand what the issue is - it looks like correct program so why are you debugging it? When I compile and run on my laptop the only issue is that the screen output doesn&#39;t appear until the end - it&#39;s all OK if you put carriage returns on your prints. I also had to replace scanf_s with scanf."}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 4971279, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/716765ad48883616c0680e7c67f44343?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/4971279/milan"}, "is_accepted": false, "score": 1, "last_activity_date": 1495813696, "creation_date": 1495813696, "answer_id": 44205556, "question_id": 44030662, "link": "https://stackoverflow.com/questions/44030662/why-does-my-mpi-application-trigger-a-breakpoint/44205556#44205556", "title": "Why does my MPI application trigger a breakpoint?", "body": "<p>Ok, I have finally found an answer!</p>\n\n<p>I couldn't use Cluster Debugger for MPI since I am running Visual Studio 2015\nand the problem was that only 1 process was running.</p>\n\n<p>I opened CMD and ran my application using \"mpiexec.exe -n 4 myMpiApp.exe\" and it worked.</p>\n"}], "owner": {"reputation": 45, "user_id": 4971279, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/716765ad48883616c0680e7c67f44343?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/4971279/milan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495813696, "creation_date": 1495039681, "last_edit_date": 1592644375, "question_id": 44030662, "link": "https://stackoverflow.com/questions/44030662/why-does-my-mpi-application-trigger-a-breakpoint", "title": "Why does my MPI application trigger a breakpoint?", "body": "<p>I have a simple MPI application that is used to pass values from process 0 to other processes upon entering the desired value but it is triggering a breakpoint on &quot;else&quot;.</p>\n<p>What am I missing?</p>\n<pre><code>#include &quot;stdafx.h&quot;\n#include &quot;mpi.h&quot;\n#include &quot;stdio.h&quot;\n#include &quot;stdlib.h&quot;\n\nint main(int argc, char* argv[])\n{\n    int rank;\n    int value;\n    int size;\n\n    MPI_Status status;\n    MPI_Init(&amp;argc, &amp;argv);\n\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;size);\n\n    do\n    {\n        if (rank == 0)\n        {\n            printf(&quot;Enter the value: &quot;);\n            scanf_s(&quot;%d&quot;, &amp;value);\n            MPI_Send(&amp;value, 1, MPI_INT, rank + 1, 0, MPI_COMM_WORLD);\n        }\n\n        else\n        {\n            MPI_Recv(&amp;value, 1, MPI_INT, rank - 1, 0, MPI_COMM_WORLD, \n                     &amp;status);\n            \n            if (rank &lt; size - 1)\n                MPI_Send(&amp;value, 1, MPI_INT, rank + 1, 0, MPI_COMM_WORLD);\n        }\n\n        printf(&quot;Process %d got %d &quot;, rank, value);\n\n    } while (value &gt;= 0);\n    \n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n<p>This is output from debug:</p>\n<blockquote>\n<p>'MPIHelloWorld.exe' (Win32): Loaded 'C:\\WINDOWS\\SysWOW64\\KernelBase.dll'. Cannot find or open the PDB file.</p>\n<p>'MPIHelloWorld.exe' (Win32): Loaded 'C:\\WINDOWS\\SysWOW64\\gdi32.dll'. Cannot find or open the PDB file.</p>\n<p>'MPIHelloWorld.exe' (Win32): Loaded 'C:\\Program Files (x86)\\Bonjour\\mdnsNSP.dll'. Cannot find or open the PDB file.</p>\n<p>MPIHelloWorld.exe has triggered a breakpoint.</p>\n<p>MPIHelloWorld.exe has triggered a breakpoint.</p>\n<p>The thread 0x3308 has exited with code 0 (0x0).</p>\n<p>The thread 0x1dfc has exited with code 0 (0x0).</p>\n<p>The thread 0x2e5c has exited with code 0 (0x0).</p>\n<p>The program '[4400] MPIHelloWorld.exe' has exited with code 0 (0x0).</p>\n</blockquote>\n<p>UPDATE:</p>\n<p>When I press CTRL + 5 I get this error written in my console:</p>\n<p>job aborted:\n[ ranks ] message</p>\n<p>[0] fatal error\nFatal error in MPI_Send:\nInvalid rank has value 1 but must be nonnegative and less than 1</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 3, "creation_date": 1495040363, "post_id": 44030635, "comment_id": 75088088, "body": "Presumably <code>FooObject</code> has a member that is not moveable and thus the compiler won&#39;t generate default move operations for it. Could you show us a full (small) example of the code we can copy-paste into an editor and compiler ourselves?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1495040413, "post_id": 44030635, "comment_id": 75088113, "body": "Can you give us a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>?"}, {"owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495041300, "post_id": 44030635, "comment_id": 75088648, "body": "@NathanOliver I added an example of the above mentioned FooObject."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495041404, "post_id": 44030635, "comment_id": 75088719, "body": "Please show <code>FooBuffer</code>."}, {"owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495041702, "post_id": 44030635, "comment_id": 75088915, "body": "@NathanOliver In the FooBuffer will take me time to hide commercial code,but in terms of its design it has its copy and assign constructors private.No move constructors at all,and one default empty constructor.No inheritance."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1495043308, "post_id": 44030635, "comment_id": 75089823, "body": "What types of data members does <code>FooBuffer</code> have? Do you still get the same problem if you use an <code>int</code> instead of a <code>FooBuffer</code>?"}, {"owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "reply_to_user": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1495043379, "post_id": 44030635, "comment_id": 75089866, "body": "@DanielH that&#39;s right. FooBuffer was the problem as it is non-copyable. Replacing with some POD works fine."}, {"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1495043427, "post_id": 44030635, "comment_id": 75089895, "body": "Non-copyable and non-movable are different things. Is <code>FooBuffer</code> also non-movable?"}, {"owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "edited": false, "score": 0, "creation_date": 1495043468, "post_id": 44030635, "comment_id": 75089922, "body": "Nope.It is only non-copyable."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1495043682, "post_id": 44030635, "comment_id": 75090079, "body": "If you have <code>= default</code> then you also have support for <code>= delete</code>, which is a <i>much</i> better way of disabling the copy functions."}, {"owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1495043786, "post_id": 44030635, "comment_id": 75090133, "body": "@BenVoigt completely agree,that&#39;s the pre c++11 era chunk :/"}], "answers": [{"tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 2, "last_activity_date": 1495041946, "creation_date": 1495041946, "answer_id": 44031311, "question_id": 44030635, "link": "https://stackoverflow.com/questions/44030635/is-default-move-constructor-optimized-away-by-compiler/44031311#44031311", "title": "Is default move constructor optimized away by compiler?", "body": "<p>Your problem is that one of the member of <code>FooObject</code> is not move-able, which prevents the compiler from generating default move operations.</p>\n\n<p>The <code>{}</code> versions of the move operations you implement yourself <em>do no work</em> (specifically: they don't actually do a move operation) on the members of <code>FooObject</code> and are thus legal.</p>\n"}, {"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1495043051, "last_edit_date": 1495043051, "creation_date": 1495042533, "answer_id": 44031499, "question_id": 44030635, "link": "https://stackoverflow.com/questions/44030635/is-default-move-constructor-optimized-away-by-compiler/44031499#44031499", "title": "Is default move constructor optimized away by compiler?", "body": "<p>The difference between</p>\n\n<pre><code>FooObject(FooObject&amp;&amp; v) = default;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>FooObject(FooObject&amp;&amp; v){}\n</code></pre>\n\n<p>Is that the former will emit a constructor that moves each member from <code>v</code> while the latter default constructs each member and does nothing with <code>v</code>.</p>\n\n<p>Since <code>FooBuffer</code> is not movable that means that the compiler will delete <code>FooObject(FooObject&amp;&amp; v) = default;</code> as it would be ill-formed. </p>\n\n<p>With <code>FooObject(FooObject&amp;&amp; v){}</code> you do not have that problem as you never try to move the members of <code>v</code>.  Since there is no member initialization list the compiler will add one for you that just default constructs the members.</p>\n\n<p>You can see this behavior more explicitly with this:</p>\n\n<pre><code>struct Moveable\n{\n    Moveable() = default;\n    Moveable(Moveable&amp;&amp;) { std::cout &lt;&lt; \"in Moveable(Moveable&amp;&amp;)\\n\"; }\n};\n\nstruct Foo\n{\n    Foo() = default;\n    Foo(Foo&amp;&amp;) = default;\n    Moveable m;\n};\n\nstruct Bar\n{\n    Bar() = default;\n    Bar(Bar&amp;&amp;){}\n    Moveable m;\n};\n\nint main()\n{\n    Foo f;\n    Bar b;\n    std::cout &lt;&lt; \"test_f\\n\";\n    Foo test_f(std::move(f));\n    std::cout &lt;&lt; \"test_b\\n\";\n    Bar test_b(std::move(b));\n}\n</code></pre>\n\n<p>which outputs</p>\n\n<pre><code>test_f\nin Moveable(Moveable&amp;&amp;)\ntest_b\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/71c943ca65e794d8\" rel=\"nofollow noreferrer\">Live Example</a></kbd></p>\n\n<p>Showing that nothing is actually moved in <code>Bar</code>'s move constructor.</p>\n"}], "owner": {"reputation": 9788, "user_id": 507043, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/kPUHE.png?s=128&g=1", "display_name": "Michael IV", "link": "https://stackoverflow.com/users/507043/michael-iv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 44031499, "answer_count": 2, "score": 3, "last_activity_date": 1495043051, "creation_date": 1495039617, "last_edit_date": 1495041269, "question_id": 44030635, "link": "https://stackoverflow.com/questions/44030635/is-default-move-constructor-optimized-away-by-compiler", "title": "Is default move constructor optimized away by compiler?", "body": "<p>I have an <a href=\"http://en.cppreference.com/w/cpp/container/multimap\" rel=\"nofollow noreferrer\">std::multimap</a> of the following type:</p>\n\n<pre><code> typedef std::multimap&lt;std::pair&lt;bool,uint32_t&gt;, FooObject&gt;\n</code></pre>\n\n<p>The <strong>FooObject</strong> has default move copy and assign constructors declared:</p>\n\n<pre><code>   FooObject(FooObject&amp;&amp; v) = default;\n   FooObject&amp; operator=(FooObject&amp;&amp; other)=default;\n</code></pre>\n\n<p>The copy/assign constructors are private to disable implicit copy.</p>\n\n<p>So I should be able to emplace a pair into the map like this:</p>\n\n<pre><code>mymap.emplace(std::make_pair(false,32),FooObject());\n</code></pre>\n\n<p>This throws a list of errors with the one at the end:</p>\n\n<blockquote>\n  <p>error C2660: 'std::pair::pair': function does not take\n  2 arguments</p>\n</blockquote>\n\n<p>If I declare move copy assign constructors without \"default\"\nthen it compiles ok.</p>\n\n<pre><code>   FooObject(FooObject&amp;&amp; v){}\n   FooObject&amp; operator=(FooObject&amp;&amp; other){}\n</code></pre>\n\n<p>Why is that? Does the compiler optimize away these constructors when marked with \"default\" keyword? I am using MSVC140 </p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Based on the comments below I found the reason - FooObject has a non-copiable member instance.\nHere is the FooObject:</p>\n\n<pre><code>#define NO_COPY_ASSIGN(TypeName)   \\                                                     \n  TypeName (const TypeName &amp;);     \\                                                                \n  void operator= (const TypeName &amp;);\n\nclass FooObject\n{\nprivate:\n   NO_COPY_ASSIGN(FooObject)\npublic:\n    struct FooStruct\n    {\n        FooBuffer   frameBuffer;   //&lt;--Here it is\n    }fooStruct;\n\n    FooObject(){}\n\n\n    /** Move constructor to allow insert into vector without copy */\n    FooObject(FooObject&amp;&amp; v) = default;\n    FooObject&amp; operator=(FooObject&amp;&amp; other) = default;\n\n};\n</code></pre>\n\n<p>*FooBuffer has also its copy/assign private.But I still don't get why replacing 'default' with {} fixes that.Please explain.</p>\n"}, {"tags": ["c++", "exe", "manifest"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5063431"}, "edited": false, "score": 0, "creation_date": 1495077986, "post_id": 44031483, "comment_id": 75102500, "body": "<b>C:\\WINDOWS\\system32&gt;main.exe -manifest main.exe.manifest -outputsource:main.exe;1</b> &#39;main.exe&#39; is not recognized as an internal or external command, operable program or batch file."}, {"owner": {"reputation": 1, "user_id": 8021378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZTl1g.jpg?s=128&g=1", "display_name": "Coding Cat", "link": "https://stackoverflow.com/users/8021378/coding-cat"}, "edited": false, "score": 1, "creation_date": 1495078858, "post_id": 44031483, "comment_id": 75102715, "body": "You can either try running the command from the folder that has the .exe in it or you can follow this thread on changing your environment variables to make the program runnable from any folder <a href=\"http://stackoverflow.com/a/8939956/8021378\">stackoverflow.com/a/8939956/8021378</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 8021378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZTl1g.jpg?s=128&g=1", "display_name": "Coding Cat", "link": "https://stackoverflow.com/users/8021378/coding-cat"}, "is_accepted": false, "score": 0, "last_activity_date": 1495042481, "creation_date": 1495042481, "answer_id": 44031483, "question_id": 44030618, "link": "https://stackoverflow.com/questions/44030618/embedding-manifest-to-exe-file/44031483#44031483", "title": "Embedding manifest to exe file", "body": "<p>If you are using windows CL, like powershell, try </p>\n\n<p><code>program_name.exe \u2013manifest program_name.exe.manifest -outputresource:program_name.exe;1</code></p>\n\n<p>That should do the trick.</p>\n"}, {"tags": [], "owner": {"reputation": 615, "user_id": 1864738, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/OdNhm.jpg?s=128&g=1", "display_name": "kundrata", "link": "https://stackoverflow.com/users/1864738/kundrata"}, "is_accepted": false, "score": 1, "last_activity_date": 1495046618, "creation_date": 1495046618, "answer_id": 44032602, "question_id": 44030618, "link": "https://stackoverflow.com/questions/44030618/embedding-manifest-to-exe-file/44032602#44032602", "title": "Embedding manifest to exe file", "body": "<p>Yes. Declare the manifest as a resource and then just build the resource object file and link it to your exe.</p>\n\n<p>In your <code>resource.rc</code> file, define your manifest resource like so: </p>\n\n<pre><code>IDR_RT_MANIFEST1        RT_MANIFEST            \"program_name.exe.manifest\"\n</code></pre>\n\n<p>In your <code>resource.h</code> file declare it with the value 1</p>\n\n<pre><code>#define IDR_RT_MANIFEST1    1\n</code></pre>\n\n<p>Build the resource file with windres: <code>windres resource.rc -o resource.o</code></p>\n\n<p>Link the resource when building your project: <code>-l resource.o</code></p>\n\n<p>.........................................................................</p>\n\n<p><strong>If your're using Visual Studio</strong> you don't need to build it explicitly, but there are 2 options which should be set beforehand:</p>\n\n<p>1) <code>Project &gt; Project_Name Properties &gt; Configuration Properties &gt; Linker &gt; Manifest File -&gt; Generate Manifest</code> set to <code>No</code> </p>\n\n<p>2) <code>Project &gt; Project_Name Properties &gt; Configuration Properties &gt; Manifest Tool &gt; Embed Manifest</code> set to <code>Yes</code></p>\n\n<p>Also add your manifest file to your project as existing item.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5063431"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1992, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1495046618, "creation_date": 1495039571, "question_id": 44030618, "link": "https://stackoverflow.com/questions/44030618/embedding-manifest-to-exe-file", "title": "Embedding manifest to exe file", "body": "<p>I have a <code>.manifest</code> file which is linked with a <code>.exe</code> program file so that it asks for admin privileges when opened. Now it is a separate file called <code>program_name.exe.manifest</code> which is is the same folder as <code>program_name.exe</code>. Is there any way by which we can embed the manifest file into the <code>.exe</code> file so that it can be one single file instead of two.</p>\n\n<p>BTW the program is created using C++</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 26583, "user_id": 1441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fb7f1cd450084fdb4bfc9376c7dba2a7?s=128&d=identicon&r=PG", "display_name": "crashmstr", "link": "https://stackoverflow.com/users/1441/crashmstr"}, "edited": false, "score": 2, "creation_date": 1495040012, "post_id": 44030615, "comment_id": 75087871, "body": "It looks like you are misunderstanding exceptions. Exceptions are not for normal flow control, but to handle &quot;exceptional&quot; cases. In this case, it looks like you should <code>return</code> a <code>Request_t</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 8006719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6aa504b139d1aae08fcc3c8dfa41d744?s=128&d=identicon&r=PG&f=1", "display_name": "PAPAmidNIGHT", "link": "https://stackoverflow.com/users/8006719/papamidnight"}, "edited": false, "score": 0, "creation_date": 1495040465, "post_id": 44030732, "comment_id": 75088150, "body": "As well appreciate for being patient to explain )"}, {"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 1, "creation_date": 1495040807, "post_id": 44030732, "comment_id": 75088373, "body": "See @\u03c0\u03ac\u03bd\u03c4\u03b1-\u1fe5\u03b5\u1fd6 answer below as well.  It&#39;s important."}], "tags": [], "owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "is_accepted": true, "score": 3, "last_activity_date": 1495039926, "creation_date": 1495039926, "answer_id": 44030732, "question_id": 44030615, "link": "https://stackoverflow.com/questions/44030615/try-throw-catch-in-functions/44030732#44030732", "title": "Try, Throw, Catch in functions", "body": "<blockquote>\n  <p>can i use throw statement without try block</p>\n</blockquote>\n\n<p>Yes.  Your <code>foo()</code> function is perfectly valid, but...</p>\n\n<blockquote>\n  <p>...is this throw called in first function going to enter second one?</p>\n</blockquote>\n\n<p>No.</p>\n\n<p>If <code>foo()</code> calls <code>Transaction_menu()</code> in the way you have shown, then when <code>Transaction_menu()</code> throws an exception, it will also cause <code>foo()</code> to <em>immediately</em> throw the same.</p>\n\n<p>If you want to catch the exception, you must do it like so:</p>\n\n<pre><code>void foo()\n{\n    try {\n        Transaction_menu();\n    } catch (Request_t &amp;request) {\n        ...code that goes here will run ONLY if a Request_t is thrown,...\n        ...and request will be a reference to the thrown object...\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>P.S.; \"Request_t\" is a funny name for a data type that you intend to <code>throw</code>.  Usually types that are thrown have names like <code>TransactionException</code>.</p>\n\n<p>P.P.S.; Throwing an exception because of something that is <em>not</em> an error is very unconventional.  It will make it harder for other programmers to read and understand your code because it completely goes against their expectations.</p>\n\n<p>Also, <code>throw</code> is more costly than <code>return,</code> so in an application where performance matters, that's another reason not to throw for any other reason besides an error.</p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 2, "last_activity_date": 1495042330, "last_edit_date": 1495542393, "creation_date": 1495040704, "answer_id": 44030954, "question_id": 44030615, "link": "https://stackoverflow.com/questions/44030615/try-throw-catch-in-functions/44030954#44030954", "title": "Try, Throw, Catch in functions", "body": "<p>To add upon <a href=\"https://stackoverflow.com/a/44030732/1413395\">@james answer</a> (which is technically correct):</p>\n\n<p><strong>Never ever</strong> use exceptions to realize control flow in your code.<br>\nThey are meant for exceptional cases and error situations that cannot be covered at the piece of code where they are thrown.</p>\n\n<p>What you rather want is a simple return value for your case:</p>\n\n<pre><code>Request_t MoneyMarketing_Account::Transaction_menu()\n{\n // ...\n if(choice == 1)\n     return Request_t(login, password, \"Grn\", value);\n if(choice == 2)\n     return Request_t(login, password, \"Dollars\", value);\n if (choice == 3)\n     return Request_t(login, password, \"Euro\", value);\n if (choice == 4)\n     return Request_t(login, password, \"Forint\", value);\n if (choice == 5)\n     return Request_t(login, password, \"Rub\", value);\n\n throw std::runtime_error(\"Invalid choice\");\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 8006719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6aa504b139d1aae08fcc3c8dfa41d744?s=128&d=identicon&r=PG&f=1", "display_name": "PAPAmidNIGHT", "link": "https://stackoverflow.com/users/8006719/papamidnight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 44030732, "answer_count": 2, "score": 0, "last_activity_date": 1495042330, "creation_date": 1495039567, "question_id": 44030615, "link": "https://stackoverflow.com/questions/44030615/try-throw-catch-in-functions", "title": "Try, Throw, Catch in functions", "body": "<p>I have a few questions.First of all i`ll give some pseudo code where i want to use this things.</p>\n\n<p>Im doing some homework (realization of bank) and i have next function</p>\n\n<pre><code>void MoneyMarketing_Account::Transaction_menu()\n{\n  int choice, value;\n  string login, password;\n  cout &lt;&lt; \"Enter name and pas for account \";\n  cin &gt;&gt; login, password;\n  cout &lt;&lt; \"Choose valute and amount\" &lt;&lt; endl\n     &lt;&lt; \"1 Grn     [amount]\" &lt;&lt; endl\n     &lt;&lt; \"2 Dollars [amount]\" &lt;&lt; endl\n     &lt;&lt; \"3 Euro    [amount]\" &lt;&lt; endl\n     &lt;&lt; \"4 Forint  [amount]\" &lt;&lt; endl\n     &lt;&lt; \"5 Rub     [amount]\" &lt;&lt; endl;\n  cin &gt;&gt; choice;\n  cin &gt;&gt; value;\n if(choice == 1)\n     throw(Request_t(login, password, \"Grn\", value));\n if(choice == 2)\n     throw(Request_t(login, password, \"Dollars\", value));\n if (choice == 3)\n     throw(Request_t(login, password, \"Euro\", value));\n if (choice == 4)\n     throw(Request_t(login, password, \"Forint\", value));\n if (choice == 5)\n     throw(Request_t(login, password, \"Rub\", value));\n</code></pre>\n\n<hr>\n\n<pre><code> struct Request_t {\n  string login;\n  string password;\n  string type;\n  int amount;\n  Request_t(string login_, string password_, string type_, int amount_) {\n    login = login_;\n    password = password_;\n    type = type_;\n    amount = amount_;\n}};\n</code></pre>\n\n<p>The first question is - can i use throw statement without try block.\n The second is where this through will go . For instance </p>\n\n<pre><code>void foo()\n{\n  Transaction_menu(); //function that i have shown before \n  Transaction_catch();//function that is supposed to catch request\n}\n</code></pre>\n\n<p>Therefore is this throw called in first function going to enter second one?</p>\n"}, {"tags": ["c++", "boost", "boost-spirit", "boost-spirit-qi"], "answers": [{"comments": [{"owner": {"reputation": 714, "user_id": 452130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ytn2v.png?s=128&g=1", "display_name": "Raptor", "link": "https://stackoverflow.com/users/452130/raptor"}, "edited": false, "score": 0, "creation_date": 1495062721, "post_id": 44034699, "comment_id": 75098944, "body": "Thank you, that took me some time to figure out and integrate into the rest of my code, but it now works like a charm. A more general addon question: Would it be best practice to handle the conversion into more fitting classes for the domain within the parsed and just give them as output, or do this in another component?"}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "reply_to_user": {"reputation": 714, "user_id": 452130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ytn2v.png?s=128&g=1", "display_name": "Raptor", "link": "https://stackoverflow.com/users/452130/raptor"}, "edited": false, "score": 1, "creation_date": 1495063813, "post_id": 44034699, "comment_id": 75099237, "body": "@Raptor I&#39;d say keep the responsibilities separate. Parse into an AST, and perform any transformation in a later stage. That way your parser will be reusable, and IMHO it will be easier to understand the code."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 2, "creation_date": 1495067476, "post_id": 44034699, "comment_id": 75100153, "body": "Both are possible, though without a lot of context, I&#39;m with @DanMa\u0161ek. I&#39;d consider the more complicated parser a form of optimization. You&#39;ll need to have a good reason to start doing that"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": true, "score": 3, "last_activity_date": 1495054883, "last_edit_date": 1495541426, "creation_date": 1495054883, "answer_id": 44034699, "question_id": 44030554, "link": "https://stackoverflow.com/questions/44030554/parsing-preconditions-and-recursion-with-boostspirit/44034699#44034699", "title": "Parsing preconditions and recursion with Boost::Spirit", "body": "<p>Well, you say that </p>\n\n<pre><code>pred_list = ( '(' &gt;&gt; *literal) &gt;&gt; ')');\n</code></pre>\n\n<p>compiles, but the following does not:</p>\n\n<pre><code>pred_list = ( '(' &gt;&gt; lit(\"and\") &gt;&gt; (*pred_list) &gt;&gt; ')') | literal;\n</code></pre>\n\n<p>If you look closely, that makes sense. Since <code>pred_list</code> has a declared attribute type of <code>std::vector&lt;Literal&gt;</code>, obviously repeated literals (<code>*literal</code>) might be compatible with that for automatic attribute propagation.</p>\n\n<p>Now, look at the second rule definition. It parses a bunch of attribute-less literals (<code>'('</code>, <code>\"and\"</code>, <code>')'</code>) and then ... <code>*pred_list</code>. If <code>pred_list</code> declares a <code>std::vector&lt;Literal&gt;</code> attribute, surely <code>*pred_list</code> synthesizes a <code>std::vector&lt;std::vector&lt;Literal&gt; &gt;</code>. To make matters worse, the \"after-thought\" <code>| literal</code> makes the synthesized attribute equivalent of a <code>variant&lt;vector&lt;vector&lt;Literal&gt;&gt;, Literal&gt;</code>.</p>\n\n<p>Yes. That's a bit of a mess. Your AST simply doesn't reflect the rules, or vice versa.</p>\n\n<h2>The Road Ahead</h2>\n\n<p>You should probably restate your problem, removing the failed implementation bits and describing the goal instead. If we can know the true grammatic requirements, /then/ we can induce a matching AST that is correct for it.</p>\n\n<h2>Interlude</h2>\n\n<p>During the intermission, let me simplify that rule for <code>literal</code>. (See <a href=\"https://stackoverflow.com/questions/43958088/boost-spirit-semantic-actions-on-qirule/43958734#43958734\">Boost spirit semantic actions on qi::rule</a> for a backgrounder):</p>\n\n<pre><code>literal = \n    '(' &gt;&gt; matches(\"not\") &gt;&gt; predi &gt;&gt; ')'\n    | qi::attr(false) &gt;&gt; predi\n    ;\n</code></pre>\n\n<blockquote>\n  <p>PS It appears that a stray cat also typed an extra unbalanced</p>\n\n<pre><code>    &gt;&gt; ')';\n</code></pre>\n  \n  <p>at the end there?</p>\n</blockquote>\n\n<h2>A constructive guess</h2>\n\n<p>From just looking at the sample input, I wager you just want to parse <a href=\"https://classes.soe.ucsc.edu/cmps112/Spring03/languages/scheme/SchemeTutorialA.html#syntax\" rel=\"nofollow noreferrer\">scheme-like function applications</a> of the form</p>\n\n<pre><code>(function_name arguments)\n</code></pre>\n\n<p>Where the applications can nest. So, arguments are either atoms or function applications.</p>\n\n<p>Well, let's put an AST on it, quickly:</p>\n\n<pre><code>namespace AST {\n    using Atom = std::string;\n\n    struct Application;\n\n    using Expression = boost::variant&lt;Atom, Application&gt;;\n\n    struct Application {\n        Atom function;\n        std::vector&lt;Expression&gt; arguments;\n    };\n}\n</code></pre>\n\n<p>That's delightfully simple, right. And here's the simplest grammar that will parse your precondition:</p>\n\n<pre><code>template &lt;typename Iterator&gt;\nstruct Precondition : qi::grammar&lt;Iterator, AST::Expression()&gt; {\n    Precondition() : Precondition::base_type(precondition) {\n        using namespace qi;\n\n        atom         = +(graph - '(' - ')');\n        application  = '(' &gt;&gt; atom &gt;&gt; *expression &gt;&gt; ')';\n        expression   = atom | application;\n\n        precondition = skip(ascii::space) [\":precondition\" &gt;&gt; expression];\n\n        BOOST_SPIRIT_DEBUG_NODES((precondition)(expression)(application)(atom))\n    }\n\n  private:\n    using Skipper = qi::ascii::space_type;\n    qi::rule&lt;Iterator, AST::Application(), Skipper&gt; application;\n    qi::rule&lt;Iterator, AST::Expression(), Skipper&gt;  expression;\n\n    // lexemes\n    qi::rule&lt;Iterator, AST::Expression()&gt; precondition;\n    qi::rule&lt;Iterator, AST::Atom()&gt; atom;\n};\n</code></pre>\n\n<p>Note how each of the rules merely restates the corresponding AST node. <code>precondition</code> also hides the skipper from the outside world.</p>\n\n<p>The output: <strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/b9f72a90b4dc31cc\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<p>Prints</p>\n\n<pre><code>Parsed (and (at-pos ?r ?pos) (not (has-pos ?m ?pos)))\n</code></pre>\n\n<p>And with <code>BOOST_SPIRIT_DEBUG</code> enabled:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;precondition&gt;\n  &lt;try&gt;:precondition\\n      &lt;/try&gt;\n  &lt;expression&gt;\n    &lt;try&gt;\\n                   &lt;/try&gt;\n    &lt;atom&gt;\n      &lt;try&gt;(and\\n               &lt;/try&gt;\n      &lt;fail/&gt;\n    &lt;/atom&gt;\n    &lt;application&gt;\n      &lt;try&gt;(and\\n               &lt;/try&gt;\n      &lt;atom&gt;\n        &lt;try&gt;and\\n                &lt;/try&gt;\n        &lt;success&gt;\\n                   &lt;/success&gt;\n        &lt;attributes&gt;[[a, n, d]]&lt;/attributes&gt;\n      &lt;/atom&gt;\n      &lt;expression&gt;\n        &lt;try&gt;\\n                   &lt;/try&gt;\n        &lt;atom&gt;\n          &lt;try&gt;(at-pos ?r ?pos)\\n   &lt;/try&gt;\n          &lt;fail/&gt;\n        &lt;/atom&gt;\n        &lt;application&gt;\n          &lt;try&gt;(at-pos ?r ?pos)\\n   &lt;/try&gt;\n          &lt;atom&gt;\n            &lt;try&gt;at-pos ?r ?pos)\\n    &lt;/try&gt;\n            &lt;success&gt; ?r ?pos)\\n          &lt;/success&gt;\n            &lt;attributes&gt;[[a, t, -, p, o, s]]&lt;/attributes&gt;\n          &lt;/atom&gt;\n          &lt;expression&gt;\n            &lt;try&gt; ?r ?pos)\\n          &lt;/try&gt;\n            &lt;atom&gt;\n              &lt;try&gt;?r ?pos)\\n           &lt;/try&gt;\n              &lt;success&gt; ?pos)\\n             &lt;/success&gt;\n              &lt;attributes&gt;[[?, r]]&lt;/attributes&gt;\n            &lt;/atom&gt;\n            &lt;success&gt; ?pos)\\n             &lt;/success&gt;\n            &lt;attributes&gt;[[?, r]]&lt;/attributes&gt;\n          &lt;/expression&gt;\n          &lt;expression&gt;\n            &lt;try&gt; ?pos)\\n             &lt;/try&gt;\n            &lt;atom&gt;\n              &lt;try&gt;?pos)\\n              &lt;/try&gt;\n              &lt;success&gt;)\\n                  &lt;/success&gt;\n              &lt;attributes&gt;[[?, p, o, s]]&lt;/attributes&gt;\n            &lt;/atom&gt;\n            &lt;success&gt;)\\n                  &lt;/success&gt;\n            &lt;attributes&gt;[[?, p, o, s]]&lt;/attributes&gt;\n          &lt;/expression&gt;\n          &lt;expression&gt;\n            &lt;try&gt;)\\n                  &lt;/try&gt;\n            &lt;atom&gt;\n              &lt;try&gt;)\\n                  &lt;/try&gt;\n              &lt;fail/&gt;\n            &lt;/atom&gt;\n            &lt;application&gt;\n              &lt;try&gt;)\\n                  &lt;/try&gt;\n              &lt;fail/&gt;\n            &lt;/application&gt;\n            &lt;fail/&gt;\n          &lt;/expression&gt;\n          &lt;success&gt;\\n                   &lt;/success&gt;\n          &lt;attributes&gt;[[[a, t, -, p, o, s], [[?, r], [?, p, o, s]]]]&lt;/attributes&gt;\n        &lt;/application&gt;\n        &lt;success&gt;\\n                   &lt;/success&gt;\n        &lt;attributes&gt;[[[a, t, -, p, o, s], [[?, r], [?, p, o, s]]]]&lt;/attributes&gt;\n      &lt;/expression&gt;\n      &lt;expression&gt;\n        &lt;try&gt;\\n                   &lt;/try&gt;\n        &lt;atom&gt;\n          &lt;try&gt;(not (has-pos ?m ?po&lt;/try&gt;\n          &lt;fail/&gt;\n        &lt;/atom&gt;\n        &lt;application&gt;\n          &lt;try&gt;(not (has-pos ?m ?po&lt;/try&gt;\n          &lt;atom&gt;\n            &lt;try&gt;not (has-pos ?m ?pos&lt;/try&gt;\n            &lt;success&gt; (has-pos ?m ?pos))\\n&lt;/success&gt;\n            &lt;attributes&gt;[[n, o, t]]&lt;/attributes&gt;\n          &lt;/atom&gt;\n          &lt;expression&gt;\n            &lt;try&gt; (has-pos ?m ?pos))\\n&lt;/try&gt;\n            &lt;atom&gt;\n              &lt;try&gt;(has-pos ?m ?pos))\\n &lt;/try&gt;\n              &lt;fail/&gt;\n            &lt;/atom&gt;\n            &lt;application&gt;\n              &lt;try&gt;(has-pos ?m ?pos))\\n &lt;/try&gt;\n              &lt;atom&gt;\n                &lt;try&gt;has-pos ?m ?pos))\\n  &lt;/try&gt;\n                &lt;success&gt; ?m ?pos))\\n         &lt;/success&gt;\n                &lt;attributes&gt;[[h, a, s, -, p, o, s]]&lt;/attributes&gt;\n              &lt;/atom&gt;\n              &lt;expression&gt;\n                &lt;try&gt; ?m ?pos))\\n         &lt;/try&gt;\n                &lt;atom&gt;\n                  &lt;try&gt;?m ?pos))\\n          &lt;/try&gt;\n                  &lt;success&gt; ?pos))\\n            &lt;/success&gt;\n                  &lt;attributes&gt;[[?, m]]&lt;/attributes&gt;\n                &lt;/atom&gt;\n                &lt;success&gt; ?pos))\\n            &lt;/success&gt;\n                &lt;attributes&gt;[[?, m]]&lt;/attributes&gt;\n              &lt;/expression&gt;\n              &lt;expression&gt;\n                &lt;try&gt; ?pos))\\n            &lt;/try&gt;\n                &lt;atom&gt;\n                  &lt;try&gt;?pos))\\n             &lt;/try&gt;\n                  &lt;success&gt;))\\n                 &lt;/success&gt;\n                  &lt;attributes&gt;[[?, p, o, s]]&lt;/attributes&gt;\n                &lt;/atom&gt;\n                &lt;success&gt;))\\n                 &lt;/success&gt;\n                &lt;attributes&gt;[[?, p, o, s]]&lt;/attributes&gt;\n              &lt;/expression&gt;\n              &lt;expression&gt;\n                &lt;try&gt;))\\n                 &lt;/try&gt;\n                &lt;atom&gt;\n                  &lt;try&gt;))\\n                 &lt;/try&gt;\n                  &lt;fail/&gt;\n                &lt;/atom&gt;\n                &lt;application&gt;\n                  &lt;try&gt;))\\n                 &lt;/try&gt;\n                  &lt;fail/&gt;\n                &lt;/application&gt;\n                &lt;fail/&gt;\n              &lt;/expression&gt;\n              &lt;success&gt;)\\n                  &lt;/success&gt;\n              &lt;attributes&gt;[[[h, a, s, -, p, o, s], [[?, m], [?, p, o, s]]]]&lt;/attributes&gt;\n            &lt;/application&gt;\n            &lt;success&gt;)\\n                  &lt;/success&gt;\n            &lt;attributes&gt;[[[h, a, s, -, p, o, s], [[?, m], [?, p, o, s]]]]&lt;/attributes&gt;\n          &lt;/expression&gt;\n          &lt;expression&gt;\n            &lt;try&gt;)\\n                  &lt;/try&gt;\n            &lt;atom&gt;\n              &lt;try&gt;)\\n                  &lt;/try&gt;\n              &lt;fail/&gt;\n            &lt;/atom&gt;\n            &lt;application&gt;\n              &lt;try&gt;)\\n                  &lt;/try&gt;\n              &lt;fail/&gt;\n            &lt;/application&gt;\n            &lt;fail/&gt;\n          &lt;/expression&gt;\n          &lt;success&gt;\\n                   &lt;/success&gt;\n          &lt;attributes&gt;[[[n, o, t], [[[h, a, s, -, p, o, s], [[?, m], [?, p, o, s]]]]]]&lt;/attributes&gt;\n        &lt;/application&gt;\n        &lt;success&gt;\\n                   &lt;/success&gt;\n        &lt;attributes&gt;[[[n, o, t], [[[h, a, s, -, p, o, s], [[?, m], [?, p, o, s]]]]]]&lt;/attributes&gt;\n      &lt;/expression&gt;\n      &lt;expression&gt;\n        &lt;try&gt;\\n                   &lt;/try&gt;\n        &lt;atom&gt;\n          &lt;try&gt;)&lt;/try&gt;\n          &lt;fail/&gt;\n        &lt;/atom&gt;\n        &lt;application&gt;\n          &lt;try&gt;)&lt;/try&gt;\n          &lt;fail/&gt;\n        &lt;/application&gt;\n        &lt;fail/&gt;\n      &lt;/expression&gt;\n      &lt;success&gt;&lt;/success&gt;\n      &lt;attributes&gt;[[[a, n, d], [[[a, t, -, p, o, s], [[?, r], [?, p, o, s]]], [[n, o, t], [[[h, a, s, -, p, o, s], [[?, m], [?, p, o, s]]]]]]]]&lt;/attributes&gt;\n    &lt;/application&gt;\n    &lt;success&gt;&lt;/success&gt;\n    &lt;attributes&gt;[[[a, n, d], [[[a, t, -, p, o, s], [[?, r], [?, p, o, s]]], [[n, o, t], [[[h, a, s, -, p, o, s], [[?, m], [?, p, o, s]]]]]]]]&lt;/attributes&gt;\n  &lt;/expression&gt;\n  &lt;success&gt;&lt;/success&gt;\n  &lt;attributes&gt;[[[a, n, d], [[[a, t, -, p, o, s], [[?, r], [?, p, o, s]]], [[n, o, t], [[[h, a, s, -, p, o, s], [[?, m], [?, p, o, s]]]]]]]]&lt;/attributes&gt;\n&lt;/precondition&gt;\n</code></pre>\n\n<p>What this example shows you is:</p>\n\n<ul>\n<li>how to represent the variant data-type in your AST</li>\n<li>how to achieve recursion through it (see also <a href=\"http://www.boost.org/doc/libs/1_64_0/doc/html/variant/tutorial.html#variant.tutorial.recursive\" rel=\"nofollow noreferrer\">documentation</a> for more advanced information)</li>\n</ul>\n\n<p>What it doesn't immediately do is to validate the AST against the PDDL specs. I'm not at all sure how much of it you intend to implement, so I think the more generic starter might be helpful anyways.</p>\n\n<h2>Full Listing</h2>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/b9f72a90b4dc31cc\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#define BOOST_SPIRIT_DEBUG\n#include &lt;boost/fusion/adapted/struct.hpp&gt;\n#include &lt;boost/spirit/include/qi.hpp&gt;\n\nnamespace AST {\n    using Atom = std::string;\n\n    struct Application;\n\n    using Expression = boost::variant&lt;Atom, Application&gt;;\n\n    struct Application {\n        Atom function;\n        std::vector&lt;Expression&gt; arguments;\n\n        friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, Application const&amp; a) {\n            os &lt;&lt; \"(\" &lt;&lt; a.function;\n            for (auto&amp; arg : a.arguments)\n                os &lt;&lt; \" \" &lt;&lt; arg;\n            return os &lt;&lt; \")\";\n        }\n    };\n}\n\nBOOST_FUSION_ADAPT_STRUCT(AST::Application, function, arguments)\n\nnamespace pddl_parser {\n\n    namespace qi    = boost::spirit::qi;\n\n    template &lt;typename Iterator&gt;\n    struct Precondition : qi::grammar&lt;Iterator, AST::Expression()&gt; {\n        Precondition() : Precondition::base_type(precondition) {\n            using namespace qi;\n\n            atom         = +(graph - '(' - ')');\n            application  = '(' &gt;&gt; atom &gt;&gt; *expression &gt;&gt; ')';\n            expression   = atom | application;\n\n            precondition = skip(ascii::space) [\":precondition\" &gt;&gt; expression];\n\n            BOOST_SPIRIT_DEBUG_NODES((precondition)(expression)(application)(atom))\n        }\n\n      private:\n        using Skipper = qi::ascii::space_type;\n        qi::rule&lt;Iterator, AST::Application(), Skipper&gt; application;\n        qi::rule&lt;Iterator, AST::Expression(), Skipper&gt;  expression;\n\n        // lexemes\n        qi::rule&lt;Iterator, AST::Expression()&gt; precondition;\n        qi::rule&lt;Iterator, AST::Atom()&gt; atom;\n    };\n}\n\nint main() {\n    using It = std::string::const_iterator;\n\n    for (std::string const&amp; input : {\n            R\"--(:precondition\n                    (and\n                      (at-pos ?r ?pos)\n                      (not (has-pos ?m ?pos))\n                    ))--\"\n            })\n    {\n        std::cout &lt;&lt; \"-----\\n\";\n        It f = input.begin(), l = input.end();\n\n        AST::Expression precondition;\n        bool ok = parse(f, l, pddl_parser::Precondition&lt;It&gt;{}, precondition);\n\n        if (ok) {\n            std::cout &lt;&lt; \"Parsed \" &lt;&lt; precondition &lt;&lt; \"\\n\";\n        } else {\n            std::cout &lt;&lt; \"Parse Failed\\n\";\n        }\n\n        if (f != l) {\n            std::cout &lt;&lt; \"Remaining unparsed input: '\" &lt;&lt; std::string(f, l) &lt;&lt; \"'\\n\";\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 714, "user_id": 452130, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ytn2v.png?s=128&g=1", "display_name": "Raptor", "link": "https://stackoverflow.com/users/452130/raptor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 2, "accepted_answer_id": 44034699, "answer_count": 1, "score": 5, "last_activity_date": 1495054883, "creation_date": 1495039387, "last_edit_date": 1495045793, "question_id": 44030554, "link": "https://stackoverflow.com/questions/44030554/parsing-preconditions-and-recursion-with-boostspirit", "title": "Parsing preconditions and recursion with Boost::Spirit", "body": "<p>I am trying to parse a PDDL file with Boost::Spirit and have some trouble with parsing preconditions into a struct. I am struggling to understand the Boost manual on how to get the condition into my struct and with recursion.</p>\n\n<p>I give a snippet of the code below, that should illustrate the problem well. A string that looks like this has to be parsed:</p>\n\n<pre><code>:precondition\n(and\n  (at-pos ?r ?pos)\n  (not (has-pos ?m ?pos))\n)\n</code></pre>\n\n<p>My code so far looks like this, but I am almost sure I did not understand how at_c works having no experience with Boost::Phoenix yet.</p>\n\n<pre><code>predi_param = '?' &gt;&gt; name_type;\npredi = '(' \n    &gt;&gt; name_type\n    &gt;&gt; +predi_param\n    &gt;&gt; ')';\nliteral = ( \n    ( '(' &gt;&gt; lit(\"not\") &gt;&gt;\n      predi       [at_c&lt;0&gt;(_val) = false]\n      &gt;&gt; ')'\n    )\n    | predi       [at_c&lt;0&gt;(_val) = true]\n  )\n  &gt;&gt; ')';\npred_list = ( '(' &gt;&gt; lit(\"and\") &gt;&gt; (*pred_list) &gt;&gt; ')')\n  | literal;\npreconditions = lit(\":precondition\") &gt;&gt; pred_list;\n\nqi::rule&lt;Iterator, std::string(), ascii::space_type&gt; predi_param;\nqi::rule&lt;Iterator, Predicate(), ascii::space_type&gt; predi;\nqi::rule&lt;Iterator, Literal(), ascii::space_type&gt; literal;\nqi::rule&lt;Iterator, std::vector&lt;Literal&gt;(), ascii::space_type&gt; preconditions, pred_list;\n</code></pre>\n\n<p>My AST looks like this:</p>\n\n<pre><code>struct Predicate\n{\n  std::string name;\n  std::vector&lt;std::string&gt; predicate_params;\n};  \nstruct Literal\n{\n  bool condition;\n  Predicate predicate;\n};\n\nBOOST_FUSION_ADAPT_STRUCT(\n    pddl_parser::Literal,\n    (bool, condition)\n    (pddl_parser::Predicate, predicate)\n)\n\nBOOST_FUSION_ADAPT_STRUCT(\n    pddl_parser::Predicate,\n    (std::string, name)\n    (std::vector&lt;std::string&gt;, predicate_params)\n)\n</code></pre>\n\n<p>Compiling this results in a compilation error:</p>\n\n<pre><code>parser.cpp:67:17:   required from \u2018pddl_parser::domain_parser&lt;Iterator&gt;::domain_parser() [with Iterator = __gnu_cxx::__normal_iterator&lt;const char*, std::__cxx11::basic_string&lt;char&gt; &gt;]\u2019\nparser.cpp:136:10:   required from here\n/usr/include/boost/spirit/home/qi/detail/assign_to.hpp:153:20: error: no matching function for call to \u2018pddl_parser::Literal::Literal(const std::vector&lt;pddl_parser::Literal&gt;&amp;)\u2019\n             attr = static_cast&lt;Attribute&gt;(val);\n                    ^~~~~~~~~~~~~~~~~~~~~~~~~~~\nIn file included from parser.cpp:11:0:\n./pddlast.h:23:10: note: candidate: pddl_parser::Literal::Literal()\n   struct Literal\n          ^~~~~~~\n./pddlast.h:23:10: note:   candidate expects 0 arguments, 1 provided\n./pddlast.h:23:10: note: candidate: pddl_parser::Literal::Literal(const pddl_parser::Literal&amp;)\n./pddlast.h:23:10: note:   no known conversion for argument 1 from \u2018const std::vector&lt;pddl_parser::Literal&gt;\u2019 to \u2018const pddl_parser::Literal&amp;\u2019\n./pddlast.h:23:10: note: candidate: pddl_parser::Literal::Literal(pddl_parser::Literal&amp;&amp;)\n./pddlast.h:23:10: note:   no known conversion for argument 1 from \u2018const std::vector&lt;pddl_parser::Literal&gt;\u2019 to \u2018pddl_parser::Literal&amp;&amp;\u2019\n</code></pre>\n\n<p>If I reformat the <code>pred_list</code> for test purposes into <code>pred_list = ( '(' &gt;&gt; *literal) &gt;&gt; ')');</code> the code compiles but still yields no success, although I take the <code>(and )</code> out. I have the impression I have something totally wrong, but cannot find anything. This is my first try using Boost::Spirit.</p>\n"}, {"tags": ["c++", "uwp", "raspberry-pi2", "windows-10-iot-core", "servo"], "comments": [{"owner": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1495096672, "post_id": 44030517, "comment_id": 75111121, "body": "Yes, Rpi3 with version 16193 does work with 1M baud rate. What&#39;s error when setting baud rate higher than 921600 on Rpi2?"}, {"owner": {"reputation": 1, "user_id": 6727513, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WLbXfDqAXCQ/AAAAAAAAAAI/AAAAAAAACZU/Kjtmo4JE7oE/photo.jpg?sz=128", "display_name": "Richard Boomsma", "link": "https://stackoverflow.com/users/6727513/richard-boomsma"}, "reply_to_user": {"reputation": 8787, "user_id": 6601582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd0a2f69702729da5aaa628bc58811a7?s=128&d=identicon&r=PG&f=1", "display_name": "Rita Han", "link": "https://stackoverflow.com/users/6601582/rita-han"}, "edited": false, "score": 0, "creation_date": 1495122699, "post_id": 44030517, "comment_id": 75130166, "body": "@RitaHan-MSFT The error we where getting is Feature not supported, for now our work around is by setting the servos on half the speed so it works with the rpi2"}], "owner": {"reputation": 1, "user_id": 6727513, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WLbXfDqAXCQ/AAAAAAAAAAI/AAAAAAAACZU/Kjtmo4JE7oE/photo.jpg?sz=128", "display_name": "Richard Boomsma", "link": "https://stackoverflow.com/users/6727513/richard-boomsma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495039261, "creation_date": 1495039261, "question_id": 44030517, "link": "https://stackoverflow.com/questions/44030517/rpi2-win10iot-refuses-to-set-serial-baud-rate-higher-than-921600", "title": "Rpi2 Win10IoT refuses to set serial baud rate higher than 921600", "body": "<p>I'm currently creating a C++ UWP app that will run on a Rpi2/3 controlling 18 AX12A servos for a robotspider project. </p>\n\n<p>The servos work on a baud rate of 1000000 as default and i would like to leave them like that. The Rpi2 allows everything up to 921600. While the Rpi3 does allow a 1mbps baud rate we wont be using it but cause of the uart and bluetooth sharing the serial connection receiving data from the servos is difficult.</p>\n\n<p>Is it possible to set the baud rate higher than 921600 on the Rpi2 with Win10IoT?\nWe are currently running the latest Windows Insider build (16193) on the Rpis.</p>\n"}, {"tags": ["c++", "cmake", "visual-studio-2017", "osvr"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1495039132, "post_id": 44030279, "comment_id": 75087373, "body": "Did you try running this from a Visual Studio 2017 command prompt?"}, {"owner": {"reputation": 83, "user_id": 3830864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8gwbn.png?s=128&g=1", "display_name": "wakoquacko", "link": "https://stackoverflow.com/users/3830864/wakoquacko"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1495041404, "post_id": 44030279, "comment_id": 75088718, "body": "I haven&#39;t tried. Never used CMake outside the GUI."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1495042276, "post_id": 44030279, "comment_id": 75089231, "body": "You can run cmake-gui from the command prompt. In that case it has the same environment as the command prompt (which in some cases helps it find packages ... )."}, {"owner": {"reputation": 83, "user_id": 3830864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8gwbn.png?s=128&g=1", "display_name": "wakoquacko", "link": "https://stackoverflow.com/users/3830864/wakoquacko"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1495052433, "post_id": 44030279, "comment_id": 75094875, "body": "now I get a different error as described in the question edit"}], "owner": {"reputation": 83, "user_id": 3830864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8gwbn.png?s=128&g=1", "display_name": "wakoquacko", "link": "https://stackoverflow.com/users/3830864/wakoquacko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495052599, "creation_date": 1495038425, "last_edit_date": 1495052599, "question_id": 44030279, "link": "https://stackoverflow.com/questions/44030279/cmake-error-osvr-plugin-cmakelists-the-c-cxx-compiler-identification-is-unkn", "title": "CMake Error OSVR Plugin - CMakeLists - The C/CXX compiler identification is unknown", "body": "<p>Current settings are as follows.</p>\n\n<p>Source Code = F:/OSVR Snapshot Build/Teensy OSVR Tracker</p>\n\n<p>Build Path = F:/OSVR Snapshot Build/Teensy OSVR Tracker Plugin Build</p>\n\n<p>CMAKE_PREFIX_PATH = F:\\OSVR Snapshot Build\\OSVR-Core-Snapshot-v0.6-1935-ga2cba4b6-build281-vs12-64bit</p>\n\n<p>When I hit Configure I get the Error popup \"Error in configuration process, project files may be invalid\"</p>\n\n<p>In the Log window I get this:</p>\n\n<pre><code>The C compiler identification is unknown\nThe CXX compiler identification is unknown\n\nCMake Error at CMakeLists.txt:2 (project):\n No CMAKE_C_COMPILER could be found.\n\nCMake Error at CMakeLists.txt:2 (project):\n  No CMAKE_CXX_COMPILER could be found.\n\nConfiguring incomplete, errors occurred!\nSee also \"F:/OSVR Snapshot Build/Teensy OSVR Tracker Plugin \nBuild/CMakeFiles/CMakeOutput.log\".\nSee also \"F:/OSVR Snapshot Build/Teensy OSVR Tracker Plugin \nBuild/CMakeFiles/CMakeError.log\".\n</code></pre>\n\n<p>All source files and error logs are at <a href=\"https://github.com/Hydr0Dr4gon/Teensy-OSVR-Tracker\" rel=\"nofollow noreferrer\">https://github.com/Hydr0Dr4gon/Teensy-OSVR-Tracker</a>.\nI put them there as there are a fair few files and it would get very messy here very quickly.</p>\n\n<p>The OSVR-Core-Snapshot I am using is \"OSVR-Core-Snapshot-v0.6-1935-ga2cba4b6-build281-vs12-64bit\" and can be found here - <a href=\"http://access.osvr.com/binary/osvr-core\" rel=\"nofollow noreferrer\">http://access.osvr.com/binary/osvr-core</a></p>\n\n<p>I am using Visual Studio Community 15 2017 and CMAKE 3.8.1</p>\n\n<p><em>EDIT</em></p>\n\n<p>Since launching CMake via VS Dev Console I now get this error.</p>\n\n<pre><code>CMake Error: Could not find cmake module file: \nCMakeDetermineTrackerCompiler.cmake\nCMake Error: Could not find cmake module file: F:/OSVR Snapshot \nBuild/TestBuild/CMakeFiles/3.8.1/CMakeTrackerCompiler.cmake\nCMake Error at CMakeLists.txt:2 (project):\n  No CMAKE_Tracker_COMPILER could be found.\n\nCMake Error: Could not find cmake module file: CMakeTrackerInformation.cmake\n</code></pre>\n"}, {"tags": ["c++", "file", "linked-list", "circular-list"], "comments": [{"owner": {"reputation": 9530, "user_id": 5264491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/233d38e551f3f0f85437e4ae47353d25?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Abbott", "link": "https://stackoverflow.com/users/5264491/ian-abbott"}, "edited": false, "score": 3, "creation_date": 1495038473, "post_id": 44030194, "comment_id": 75087017, "body": "<code>curr = new Student;</code> is C++, not C."}, {"owner": {"reputation": 734, "user_id": 6864400, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-d-5fGoRO7dg/AAAAAAAAAAI/AAAAAAAAAUU/9fMrJJAQFaE/photo.jpg?sz=128", "display_name": "Simone Cifani", "link": "https://stackoverflow.com/users/6864400/simone-cifani"}, "edited": false, "score": 0, "creation_date": 1495038863, "post_id": 44030194, "comment_id": 75087219, "body": "I have never seen the instruction CLR; at the end of line 11"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1495040762, "post_id": 44030194, "comment_id": 75088347, "body": "Welcome to Stack Overflow. Please read the <a href=\"https://stackoverflow.com/tour\">About</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> pages soon, but even more importantly, please read about how to create an MCVE (<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>). Note that <a href=\"http://stackoverflow.com/questions/5431941/while-feof-file-is-always-wrong\"><code>while (!feof(file))</code> is always wrong</a> \u2014 and this code is no exception.  You&#39;ll need to error check each call to <code>fgets()</code> and to <code>fscanf()</code>.  Note that the final <code>fscanf()</code> will leave a newline in the input, which will confuse the next <code>fgets()</code>.  And your code is C++ \u2014 not C.  It&#39;s C++ written like C, but the use of <code>new</code> means it is not C code."}], "owner": {"reputation": 1, "user_id": 7933563, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TgPtBoZuwv8/AAAAAAAAAAI/AAAAAAAAAoE/aASYohWIjBw/photo.jpg?sz=128", "display_name": "Francisco Cruz", "link": "https://stackoverflow.com/users/7933563/francisco-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495040730, "creation_date": 1495038166, "last_edit_date": 1495040730, "question_id": 44030194, "link": "https://stackoverflow.com/questions/44030194/circular-linked-list-from-a-text-file-in-c", "title": "Circular linked list from a text file in C++", "body": "<p>I'm trying to create a circular linked list from file. But the compiler shows an error in the lines</p>\n\n<pre><code>fgets(curr-&gt;FullN.LastN,Lmax,f);\ncurr-&gt;FullN.LastN[strlen(curr-&gt;FullN.LastN)-1]='\\0';\n</code></pre>\n\n<p>The error: </p>\n\n<blockquote>\n  <p>cannot convert FILE* to char* for argument 1 to char *fgets(char*, int, FILE*)</p>\n</blockquote>\n\n<p>Here the function:</p>\n\n<pre><code>Student *build_stack(char Name[]){\n    Student *tek,*stack,*curr;\n    tek = NULL; //At the beginning the list is empty\n    stack = tek;\n    FILE *f;\n    if(!(f = fopen(Name,\"r\"))) \n        puts(\"Oops! file not found\");\n    else{\n        while(!feof(f)){\n            curr = new Student;//memory allocation\n            if (stack == NULL)\n                stack = curr;\n            fgets(curr-&gt;FullN.LastN,Lmax,f);\n            curr-&gt;FullN.LastN[strlen(curr-&gt;FullN.LastN)-1]='\\0'; CLR;\n            fgets(curr-&gt;FullN.FirstN,Lmax,f);\n            curr-&gt;FullN.FirstN[strlen(curr-&gt;FullN.FirstN)-1]='\\0';\n            fgets(curr-&gt;FullN.SecondN,Lmax,f);\n            curr-&gt;FullN.SecondN[strlen(curr-&gt;FullN.SecondN)-1]='\\0';\n            fgets(curr-&gt;Group,Lmax,f);\n            curr-&gt;Group[strlen(curr-&gt;Group)-1]='\\0';\n            curr-&gt;APerformance.Mean = 0;\n            for(int i=0;i&lt;5;i++){\n                CLR;\n                fscanf(f,\"%f\",&amp;(curr-&gt;APerformance.B[i]));\n                        curr-&gt;APerformance.Mean += curr-&gt;APerformance.B[i];\n            }\n            curr-&gt;APerformance.Mean /= 5.0;\n            curr-&gt;next = tek;\n            tek = curr;\n        }\n    }\n    if(stack){\n        stack-&gt;next = tek;\n    }\n    return stack;//pointer returns to the top of the stack\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "matrix", "cache-locality"], "comments": [{"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1495038064, "post_id": 44030148, "comment_id": 75086758, "body": "&quot;From the locality point of view the second method seems perfect, but has awful readability... &quot; I would say both are awful, as they both use pointers and <code>malloc</code> IMO."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 1, "creation_date": 1495038248, "post_id": 44030148, "comment_id": 75086879, "body": "@John Smith  It is a C approach to allocate arrays. And the compiler can not optimize the memory allocation because it is performed at run-time."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1495038392, "post_id": 44030148, "comment_id": 75086965, "body": "@John Smith  And &quot;Numerical recipes in C&quot;,  is not the same as &quot;Numerical recipes in C++&quot;:),"}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495038543, "post_id": 44030148, "comment_id": 75087055, "body": "In C++ you use vector for &quot;re-dimensionable&quot; array, not pointers."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 3, "creation_date": 1495038642, "post_id": 44030148, "comment_id": 75087113, "body": "@John Smith it is definitely worth it to ensure the 2d array is allocated as a contiguous block. As an answer points out you can use a wrapper to do this while maintaining your &quot;pretty&quot; interface. But what would be even more beneficial in the long run is to use a good matrix library as it will do all of this for you plus all kinds of other optimizations (expression templates, SIMD, etc)."}, {"owner": {"reputation": 13028, "user_id": 1401351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/993d07ca1cd59dd11d96a896e7c804d0?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/1401351/peter"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 1, "creation_date": 1495039837, "post_id": 44030148, "comment_id": 75087761, "body": "If this is a practical question rather than academic, do what @RyanP suggests.  Download Eigen.  Then your code becomes <code>Eigen::MatrixXd x(NumRows, NumCols);</code> and <code>x(m, n) = ...;</code>"}, {"owner": {"reputation": 812, "user_id": 1191068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e44482ebb4abc7997ae69bc2cebee5e?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1191068/john-smith"}, "edited": false, "score": 1, "creation_date": 1495040096, "post_id": 44030148, "comment_id": 75087917, "body": "RyanP, I never understood, why I need I good library for doing simple things. They will do <code>x[m][n]</code> access using some super-secret method? Some people say &quot;you have to use STL vectors&quot;, but they probably do not remember that few years ago Microsoft implementation of vectors was awful, and vector&lt;vector&lt;double&gt; &gt; was many times slower than simple array..."}], "answers": [{"comments": [{"owner": {"reputation": 812, "user_id": 1191068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e44482ebb4abc7997ae69bc2cebee5e?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1191068/john-smith"}, "edited": false, "score": 0, "creation_date": 1495041078, "post_id": 44030223, "comment_id": 75088532, "body": "I do not see a huge problem in using malloc. I am pretty sure that STL vectors use mallocs inside. But anyway, my main question was: will the first method be hugely inefficient because of cache misses when accessing <code>x[m][n]</code> or it is more or less the same in that sense as the second method? I am not worried here about the array being not completely contiguous, since I can easily make it contiguous (see for example the answer by Paul R). What I am worried about is having extra array of <code>double *</code> and 2 redirections: first from <code>x</code> to <code>x[m]</code> and then to <code>x[m][n]</code>"}], "tags": [], "owner": {"reputation": 10571, "user_id": 122687, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9b4e0447e8d049ba853fe368765f6f76?s=128&d=identicon&r=PG", "display_name": "Stefan Monov", "link": "https://stackoverflow.com/users/122687/stefan-monov"}, "is_accepted": false, "score": 1, "last_activity_date": 1495038621, "last_edit_date": 1495038621, "creation_date": 1495038225, "answer_id": 44030223, "question_id": 44030148, "link": "https://stackoverflow.com/questions/44030148/data-locality-for-implementing-2d-array-in-c-c/44030223#44030223", "title": "data locality for implementing 2d array in c/c++", "body": "<p>No need to guess whether the compiler will optimize the first method. Just use the second method which you <em>know</em> is fast, and use a wrapper class that implements for example these methods:</p>\n\n<pre><code>double&amp; operator(int x, int y);\ndouble const&amp; operator(int x, int y) const;\n</code></pre>\n\n<p>... and access your objects like this:</p>\n\n<pre><code>arr(2, 3) = 5;\n</code></pre>\n\n<p>Alternatively, if you can bear a little more code complexity in the wrapper class(es), you can implement a class that can be accessed with the more traditional <code>arr[2][3] = 5;</code> syntax. This is implemented in a dimension-agnostic way in the Boost.MultiArray library, but you can do your own simple implementation too, using a proxy class.</p>\n\n<p><strong>Note:</strong> Considering your usage of C style (a hardcoded non-generic \"double\" type, plain pointers, function-beginning variable declarations, and <code>malloc</code>), you will probably need to get more into C++ constructs before you can implement either of the options I mentioned.</p>\n"}, {"tags": [], "owner": {"reputation": 1018, "user_id": 5139329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/158ef694537ec940c35905b4b20062d0?s=128&d=identicon&r=PG", "display_name": "crazypeter", "link": "https://stackoverflow.com/users/5139329/crazypeter"}, "is_accepted": false, "score": 1, "last_activity_date": 1495039080, "last_edit_date": 1495039080, "creation_date": 1495038758, "answer_id": 44030377, "question_id": 44030148, "link": "https://stackoverflow.com/questions/44030148/data-locality-for-implementing-2d-array-in-c-c/44030377#44030377", "title": "data locality for implementing 2d array in c/c++", "body": "<p>The two methods are quite different. </p>\n\n<ul>\n<li>While the first method allows for easier direct access to the values by adding another indirection (the <code>double**</code> array, hence you need 1+N mallocs), ...</li>\n<li>the second method guarantees that ALL values are stored contiguously and only requires one malloc.</li>\n</ul>\n\n<p>I would argue that the second method is always superior. Malloc is an expensive operation and contiguous memory is a huge plus, depending on the application.</p>\n\n<p>In C++, you'd just implement it like this:</p>\n\n<pre><code>std::vector&lt;double&gt; matrix(NumRows * NumCols);\nmatrix[y * numCols + x] = value;  // Access\n</code></pre>\n\n<p>and if you're concerned with the inconvenience of having to compute the index yourself, add a wrapper that implements <code>operator(int x, int y)</code> to it.</p>\n\n<p>You are also right that the first method is more expensive when accessing the values. Because you need two memory lookups as you described <code>x[m]</code> and then <code>x[m][n]</code>. There is no way the compiler will \"optimize this away\". The first array, depending on its size, will be cached, and the performance hit may not be that bad. In the second case, you need an extra multiplication for direct access.</p>\n"}, {"tags": [], "owner": {"reputation": 12911, "user_id": 466694, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c46901df373341451a24d5dbb59f5b9a?s=128&d=identicon&r=PG", "display_name": "nakiya", "link": "https://stackoverflow.com/users/466694/nakiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1495038927, "creation_date": 1495038927, "answer_id": 44030431, "question_id": 44030148, "link": "https://stackoverflow.com/questions/44030148/data-locality-for-implementing-2d-array-in-c-c/44030431#44030431", "title": "data locality for implementing 2d array in c/c++", "body": "<p>In the first method you use, the <code>double*</code> in the master array point to logical columns (arrays of size <code>NumCol</code>).</p>\n\n<p>So, if you write something like below, you get the benefits of data locality in some sense (pseudocode):</p>\n\n<pre><code>foreach(row in rows):\n    foreach(elem in row):\n        //Do something\n</code></pre>\n\n<p>If you tried the same thing with the second method, and if element access was done the way you specified (i.e. <code>x[NumCol*m + n]</code>), you still get the same benefit. This is because you treat the array to be in row-major order. If you tried the same pseudocode while accessing the elements in column-major order, I assume you'd get cache misses given that the array size is large enough.</p>\n\n<p>In addition to this, the second method has the additional desirable property of being a single contiguous block of memory which further improves the performance even when you loop through multiple rows (unlike the first method).</p>\n\n<p>So, in conclusion, the second method should be much better in terms of performance.</p>\n"}, {"comments": [{"owner": {"reputation": 812, "user_id": 1191068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e44482ebb4abc7997ae69bc2cebee5e?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1191068/john-smith"}, "edited": false, "score": 0, "creation_date": 1495040587, "post_id": 44030441, "comment_id": 75088230, "body": "but will this method have a lot of cache misses or not?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 812, "user_id": 1191068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e44482ebb4abc7997ae69bc2cebee5e?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1191068/john-smith"}, "edited": false, "score": 0, "creation_date": 1495040932, "post_id": 44030441, "comment_id": 75088441, "body": "No, that&#39;s the whole point of using a single large contiguous allocation for the underlying data."}, {"owner": {"reputation": 812, "user_id": 1191068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e44482ebb4abc7997ae69bc2cebee5e?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1191068/john-smith"}, "edited": false, "score": 0, "creation_date": 1495041364, "post_id": 44030441, "comment_id": 75088693, "body": "then may be I misunderstand the way the CPU works? I thought that in this method when you access <code>x[m][n]</code> first <code>x[m]</code> will be read. In order to read <code>x[m]</code> the CPU will download part of the <code>double **x</code> array into the cache. Then it will read the value of <code>x[m]</code> and will retrieve the actual data, which is of course different part of the memory, thus making CPU to reload the cache line. Is my logic somehow deficient?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 812, "user_id": 1191068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e44482ebb4abc7997ae69bc2cebee5e?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1191068/john-smith"}, "edited": false, "score": 0, "creation_date": 1495043215, "post_id": 44030441, "comment_id": 75089756, "body": "If you&#39;re iterating through the array sequentially then you only need to access the row pointer x[m] once per row. You also have the option to treat the array as flattened (see above), which might be more efficient for a more random access pattern (although such an access pattern is very cache inefficient to begin with of course)."}, {"owner": {"reputation": 812, "user_id": 1191068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e44482ebb4abc7997ae69bc2cebee5e?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1191068/john-smith"}, "edited": false, "score": 0, "creation_date": 1495044005, "post_id": 44030441, "comment_id": 75090253, "body": "but I do not want to access <code>x[m]</code> and store it each time I am accessing rows. what happens if I have cycle <code>for (int m=0; m&lt;nr; ++m) for (int n=0; n&lt;nr; ++n) x[m][n] = m+n;</code> ? then <code>x[m]</code> will be accessed each time, when <code>x[m][n]</code> is accessed, right?"}, {"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "reply_to_user": {"reputation": 812, "user_id": 1191068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e44482ebb4abc7997ae69bc2cebee5e?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1191068/john-smith"}, "edited": false, "score": 0, "creation_date": 1495044210, "post_id": 44030441, "comment_id": 75090351, "body": "As I already said: you don&#39;t have to - there is no &quot;store&quot; anyway, you just load the row pointer and and add an offset, which is typically all done in one instruction (on x86 at least). You also have the option to use direct addressing (see above) while still retaining compatibility with legacy APIs."}], "tags": [], "owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "is_accepted": false, "score": 3, "last_activity_date": 1495039366, "last_edit_date": 1495039366, "creation_date": 1495038973, "answer_id": 44030441, "question_id": 44030148, "link": "https://stackoverflow.com/questions/44030148/data-locality-for-implementing-2d-array-in-c-c/44030441#44030441", "title": "data locality for implementing 2d array in c/c++", "body": "<p>For C-style allocations you can actually have the best of both worlds:</p>\n\n<pre><code>double **allocate_matrix(int NumRows, int NumCol)\n{\n  double **x;\n  int i;\n\n  x = (double **)malloc(NumRows * sizeof(double *));\n  x[0] = (double *)calloc(NumRows * NumCol, sizeof(double)); // &lt;&lt;&lt; single contiguous memory allocation for entire array\n  for (i = 1; i &lt; NumRows; ++i) x[i] = x[i - 1] + NumCols;\n  return x;\n}\n</code></pre>\n\n<p>This way you get data locality and its associated cache/memory access benefits, and you can treat the array as a <code>double **</code> or a flattened 2D array (<code>array[i * NumCols + j]</code>) interchangeably. You also have fewer <code>calloc</code>/<code>free</code> calls (<code>2</code> versus <code>NumRows + 1</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 8555, "user_id": 638028, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/xj2Hg.png?s=128&g=1", "display_name": "Klitos Kyriacou", "link": "https://stackoverflow.com/users/638028/klitos-kyriacou"}, "is_accepted": false, "score": 0, "last_activity_date": 1495042356, "creation_date": 1495042356, "answer_id": 44031447, "question_id": 44030148, "link": "https://stackoverflow.com/questions/44030148/data-locality-for-implementing-2d-array-in-c-c/44031447#44031447", "title": "data locality for implementing 2d array in c/c++", "body": "<p>If <code>NumCol</code> is a compile-time constant, or if you are using GCC with language extensions enabled, then you can do:</p>\n\n<pre><code>double (*x)[NumCol] = (double (*)[NumCol]) malloc(NumRows * sizeof (double[NumCol]));\n</code></pre>\n\n<p>and then use <code>x</code> as a 2D array and the compiler will do the indexing arithmetic for you. The caveat is that unless NumCol is a compile-time constant, ISO C++ won't let you do this, and if you use GCC language extensions you won't be able to port your code to another compiler.</p>\n"}], "owner": {"reputation": 812, "user_id": 1191068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e44482ebb4abc7997ae69bc2cebee5e?s=128&d=identicon&r=PG", "display_name": "John Smith", "link": "https://stackoverflow.com/users/1191068/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 1, "answer_count": 5, "score": 1, "last_activity_date": 1495042356, "creation_date": 1495038012, "last_edit_date": 1495039479, "question_id": 44030148, "link": "https://stackoverflow.com/questions/44030148/data-locality-for-implementing-2d-array-in-c-c", "title": "data locality for implementing 2d array in c/c++", "body": "<p>Long time ago, inspired by \"Numerical recipes in C\", I started to use the following construct for storing matrices (2D-arrays).</p>\n\n<pre><code>double **allocate_matrix(int NumRows, int NumCol)\n{\n  double **x;\n  int i;\n\n  x = (double **)malloc(NumRows * sizeof(double *));\n  for (i = 0; i &lt; NumRows; ++i) x[i] = (double *)calloc(NumCol, sizeof(double));\n  return x;\n}\n\ndouble **x = allocate_matrix(1000,2000);\nx[m][n] = ...;\n</code></pre>\n\n<p>But recently noticed that many people implement matrices as follows</p>\n\n<pre><code>double *x = (double *)malloc(NumRows * NumCols * sizeof(double));\nx[NumCol * m + n] = ...;\n</code></pre>\n\n<p>From the locality point of view the second method seems perfect, but has awful readability... So I started to wonder, is my first method with storing auxiliary array or <code>**double</code> pointers really bad or the compiler will optimize it eventually such that it will be more or less equivalent in performance to the second method? I am suspicious because I think that in the first method two jumps are made when accessing the value, <code>x[m]</code> and then <code>x[m][n]</code> and there is a chance that each time the CPU will load first the <code>x</code> array and then <code>x[m]</code> array.</p>\n\n<p>p.s. do not worry about extra memory for storing <code>**double</code>, for large matrices it is just a small percentage.</p>\n\n<p>P.P.S. since many people did not understand my question very well, I will try to re-shape it: do I understand right that the first method is kind of locality-hell, when each time <code>x[m][n]</code> is accessed first <code>x</code> array will be loaded into CPU cache and then <code>x[m]</code> array will be loaded thus making each access at the speed of talking to RAM. Or am I wrong and the first method is also OK from data-locality point of view?</p>\n"}, {"tags": ["c++", "namespaces", "std"], "comments": [{"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1495041064, "post_id": 44030041, "comment_id": 75088527, "body": "Welcome to Stack Overflow! I&#39;ve made an <a href=\"https://stackoverflow.com/posts/44030041/edit\">edit</a> to your question to concentrate on the part for which I couldn&#39;t find an existing good answer.  It&#39;s quite a drastic edit, but I think it makes a question that can be reopened and useful."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1495570515, "post_id": 44030130, "comment_id": 75306085, "body": "Hardly the only alternative.."}], "tags": [], "owner": {"reputation": 25650, "user_id": 369872, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2b4534ace0008370742fe0c8bb942361?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/369872/david"}, "is_accepted": false, "score": 1, "last_activity_date": 1495037946, "creation_date": 1495037946, "answer_id": 44030130, "question_id": 44030041, "link": "https://stackoverflow.com/questions/44030041/what-are-good-alternatives-to-using-namespace-std/44030130#44030130", "title": "What are good alternatives to &quot;using namespace std;&quot;?", "body": "<p>The alternative is to write <code>std::</code> everywhere. It's frowned upon because of name collisions and because it's unclear. If you just write <code>vector</code> I don't immediately know if you're using some math 3d vector or the standard library vector or something else. If you write <code>std::vector</code> it's clear. If you <code>using namespace std</code>, <code>vector</code> may collide with my own 3d math class called <code>vector</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 4, "last_activity_date": 1495041116, "last_edit_date": 1495041116, "creation_date": 1495038036, "answer_id": 44030155, "question_id": 44030041, "link": "https://stackoverflow.com/questions/44030041/what-are-good-alternatives-to-using-namespace-std/44030155#44030155", "title": "What are good alternatives to &quot;using namespace std;&quot;?", "body": "<p>The main alternatives to bringing in <em>everything</em> from the <code>std</code> namespace into the global one with <code>using namespace std;</code> at global scope are:</p>\n\n<ol>\n<li><p>Only bring in the actual names you need. For example just bring in <code>vector</code> with <code>using std::vector;</code></p></li>\n<li><p>Always use explicit namespace qualifications when you use a name. For example <code>std::vector&lt;int&gt; v;</code> (in <em>headers</em>, this should almost always be the only thing you do)</p></li>\n<li><p>Bring in all names, but in a reduced scope (like only inside a function). For example <code>void f() { using namespace std; vector&lt;int&gt; v; }</code> - this does not pollute the global namespace.</p></li>\n</ol>\n"}], "owner": {"reputation": 31, "user_id": 8005009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d9e2353497d267858b0dfe9d3e7b702?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky Slayer", "link": "https://stackoverflow.com/users/8005009/ricky-slayer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3936, "favorite_count": 1, "closed_date": 1495037987, "answer_count": 2, "score": 2, "last_activity_date": 1495041116, "creation_date": 1495037697, "last_edit_date": 1495040946, "question_id": 44030041, "link": "https://stackoverflow.com/questions/44030041/what-are-good-alternatives-to-using-namespace-std", "closed_reason": "Duplicate", "title": "What are good alternatives to &quot;using namespace std;&quot;?", "body": "<p>I understand that <code>using namespace std;</code> is problematic (e.g. from reading the answers to <a href=\"/q/1452721\">\"Why is <code>using namespace std</code> considered bad practice?\"</a>).</p>\n\n<p>What are good alternatives to importing the standard namespace like that?</p>\n\n<p>I'd like to know what I can do to improve my code.</p>\n"}, {"tags": ["c++", "linux", "qt", "qobject", "qfile"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1495039577, "post_id": 44029969, "comment_id": 75087616, "body": "Your code looks a bit odd.  You have a <code>QFile</code> named <code>file1</code> but you only ever <code>open</code>, <code>seek</code> and <code>close</code> with it -- you never write."}], "answers": [{"tags": [], "owner": {"reputation": 25560, "user_id": 2068642, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DYTnZ.jpg?s=128&g=1", "display_name": "TheDarkKnight", "link": "https://stackoverflow.com/users/2068642/thedarkknight"}, "is_accepted": false, "score": 2, "last_activity_date": 1495097035, "last_edit_date": 1495097035, "creation_date": 1495096661, "answer_id": 44042666, "question_id": 44029969, "link": "https://stackoverflow.com/questions/44029969/linux-c-qt-fixing-qiodevicewrite-readonly-device/44042666#44042666", "title": "Linux C++ Qt fixing &quot;QIODevice::write: ReadOnly device&quot;?", "body": "<pre><code>QTextStream out(\"log.data\");\n</code></pre>\n\n<p>The <code>QTextStream</code> constructor that takes a string does not open the file, or work on a file opened with that name.</p>\n\n<p>Instead, you should pass the <code>QFile</code> object to <code>QTextStream</code></p>\n\n<pre><code>QTextStream out(&amp;file1);\n</code></pre>\n\n<p>In addition, if you want to read from the file, this won't work</p>\n\n<pre><code>file1.open(QIODevice::WriteOnly | QIODevice::Text);\n</code></pre>\n\n<p>You need to use the <code>QIODevice::ReadWrite</code> flag, instead of <code>QIODevice::WriteOnly</code></p>\n\n<p>Finally, if you're using <code>QTextStream</code> instead of QFile's read / write functions, it would be better to <a href=\"http://doc.qt.io/qt-5/qtextstream.html#seek\" rel=\"nofollow noreferrer\">seek with the <code>QTextStream</code></a>, rather than the QFile object</p>\n\n<pre><code>out.seek(30);\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 8026585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9VRyA.png?s=128&g=1", "display_name": "smashingTheKeyboardTill", "link": "https://stackoverflow.com/users/8026585/smashingthekeyboardtill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1670, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495097035, "creation_date": 1495037455, "question_id": 44029969, "link": "https://stackoverflow.com/questions/44029969/linux-c-qt-fixing-qiodevicewrite-readonly-device", "title": "Linux C++ Qt fixing &quot;QIODevice::write: ReadOnly device&quot;?", "body": "<p>So the problem is, I am trying to write to a file with QFile but i am getting the error:</p>\n\n<pre><code>QIODevice::write: ReadOnly device\n</code></pre>\n\n<p>My implementation looks like:</p>\n\n<pre><code>void logList::insert(QString data) {\n    QString lin;\n    QFile file1(\"log.data\");\n    file1.open(QIODevice::WriteOnly | QIODevice::Text);\n    QTextStream out(\"log.data\");\n    lin = out.readLine();\n    out &lt;&lt; data;\n    file1.seek(30);\n    file1.close();\n}\n</code></pre>\n\n<p>I have also tried with</p>\n\n<pre><code>QIODevice::ReadWrite \n</code></pre>\n\n<p>for the open()</p>\n\n<p>and </p>\n\n<pre><code>system(\"chmod 777 log.data\");\n</code></pre>\n\n<p>So how do I read and write from a file in linux?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "templates", "lambda", "c++14", "auto"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 6, "creation_date": 1495037016, "post_id": 44029782, "comment_id": 75086129, "body": "&quot;An internal error has occurred in the compiler.&quot; is always a bug (in the compiler / tool chain) whether the reproducing code is valid or not. Although, the bug is more severe when the code is valid."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 1, "creation_date": 1495037066, "post_id": 44029782, "comment_id": 75086169, "body": "<code>VC++ likes to give error C1001 when the compiled code contains errors (i.e. the programmer made a mistake, but VC++ just doesn&#39;t fully recognize the mistake in the code)</code>. Even if that is true, it&#39;s still a compiler error. If VS thinks the code is wrong, it should have a reason to think that."}, {"owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1495037698, "post_id": 44029782, "comment_id": 75086556, "body": "@user2079303 I&#39;ve seen C1001 so many times in my projects when I&#39;ve made a small syntax mistake that I don&#39;t bother to scold my compiler for it anymore."}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1495038993, "post_id": 44029782, "comment_id": 75087302, "body": "@Bernard You need a better compiler :)"}, {"owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1495039771, "post_id": 44029782, "comment_id": 75087725, "body": "@deviantfan I hope VS 2017 would be better :/ I don&#39;t have much choice for Windows, do I?"}, {"owner": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1495058718, "post_id": 44029782, "comment_id": 75097696, "body": "@Bernard Why not? GCC (&quot;MinGW&quot;), Clang, and ICC are all available on Windows too. VS 2017 (and I think, partially 2015 too) even (finally) managed to fully separate IDE from compiler, it&#39;s now possible to use VS as IDE with MinGW/Clang as compiler too (at least, MS and people are telling me that, I didn&#39;t try)."}, {"owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "reply_to_user": {"reputation": 10703, "user_id": 3134621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c46cfe9f917da02becc991d76352d77c?s=128&d=identicon&r=PG&f=1", "display_name": "deviantfan", "link": "https://stackoverflow.com/users/3134621/deviantfan"}, "edited": false, "score": 0, "creation_date": 1495072993, "post_id": 44029782, "comment_id": 75101357, "body": "@deviantfan I didn&#39;t know that VS can be used with MinGW and Clang. I think it has to be set up manually though - the Clang that can be automatically installed is for iOS/OSX cross compilation. Not sure how nice the debugging experience will be like though. I&#39;ll have to try it out."}, {"owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "edited": false, "score": 0, "creation_date": 1495122960, "post_id": 44029782, "comment_id": 75130334, "body": "I upgraded to VS 2017 today and it fixes the issue (it also uncovered a few other areas where my code was not standard-compliant). Looks good so far."}], "answers": [{"comments": [{"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 1, "creation_date": 1495037237, "post_id": 44029840, "comment_id": 75086274, "body": "&quot;C1001&quot; is <i>always</i> a VC++ bug."}, {"owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "edited": false, "score": 1, "creation_date": 1495037454, "post_id": 44029840, "comment_id": 75086410, "body": "It seems to compile fine on a VS 2017 online compiler. <a href=\"http://webcompiler.cloudapp.net/\" rel=\"nofollow noreferrer\">This one.</a>  Maybe it&#39;s time to upgrade."}], "tags": [], "owner": {"reputation": 2025, "user_id": 3753366, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/CYKno.jpg?s=128&g=1", "display_name": "filaton", "link": "https://stackoverflow.com/users/3753366/filaton"}, "is_accepted": true, "score": 2, "last_activity_date": 1495037014, "creation_date": 1495037014, "answer_id": 44029840, "question_id": 44029782, "link": "https://stackoverflow.com/questions/44029782/lambda-in-lambda-cannot-be-a-template/44029840#44029840", "title": "Lambda in lambda cannot be a template?", "body": "<p>Your code compiles fine with clang 3.8 and gcc 5.4 (<a href=\"http://rextester.com/SCAH69935\" rel=\"nofollow noreferrer\">http://rextester.com/SCAH69935</a>) so it seems to be a VC++ bug.</p>\n"}, {"comments": [{"owner": {"reputation": 41213, "user_id": 215568, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b05685e6c3945f4bd23bf1f967861aeb?s=128&d=identicon&r=PG", "display_name": "Donnie", "link": "https://stackoverflow.com/users/215568/donnie"}, "edited": false, "score": 1, "creation_date": 1495037265, "post_id": 44029843, "comment_id": 75086285, "body": "That doesn&#39;t make &quot;internal compiler error&quot; correct."}, {"owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "edited": false, "score": 0, "creation_date": 1495037324, "post_id": 44029843, "comment_id": 75086313, "body": "My tag was wrong.  It should be C++14.  Thank&#39;s for pointing it out."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495037334, "post_id": 44029843, "comment_id": 75086320, "body": "true, but it doesn&#39;t means that the code is correct either"}, {"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 1, "creation_date": 1495037590, "post_id": 44029843, "comment_id": 75086495, "body": "Even Microsoft says it supports generic lambdas in VS 2015: <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/hh567368.aspx</a>"}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495037801, "post_id": 44029843, "comment_id": 75086610, "body": "as Bernard pointed out, at the time I posted my answer, the tag of the question was C++11. C++11 doesn&#39;t allow auto in lambda. The compiler doesn&#39;t count as long as you compile for C++11 (and the compiler is fully C++11 compliant)."}], "tags": [], "owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "is_accepted": false, "score": -2, "last_activity_date": 1495037022, "creation_date": 1495037022, "answer_id": 44029843, "question_id": 44029782, "link": "https://stackoverflow.com/questions/44029782/lambda-in-lambda-cannot-be-a-template/44029843#44029843", "title": "Lambda in lambda cannot be a template?", "body": "<p><code>VC++</code> is right: C++11 doesn't allow <code>auto</code> in lambda.\nWe can use <code>auto</code> in lambda only since C++14.</p>\n\n<p>Clang 3.8.0 gives me this error with the <code>-std=c++11</code>:</p>\n\n<pre><code>main.cpp:7:17: error: 'auto' not allowed in lambda parameter\n    auto f = [](auto x) { return x + 1;};\n</code></pre>\n\n<p>and gcc 7.1.0 (with the same flag) gives me this:\nmain.cpp: In function 'int main()':</p>\n\n<pre><code>main.cpp:7:17: error: use of 'auto' in lambda parameter declaration only available with -std=c++14 or -std=gnu++14\n\n     auto f = [](auto x) { return x + 1;};\n</code></pre>\n\n<p>for this code:</p>\n\n<pre><code>int main()\n{\n    auto f = [](auto x) { return x + 1;};\n}\n</code></pre>\n"}], "owner": {"reputation": 3981, "user_id": 1021959, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PaP06.png?s=128&g=1", "display_name": "Bernard", "link": "https://stackoverflow.com/users/1021959/bernard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 44029840, "answer_count": 2, "score": 0, "last_activity_date": 1495037334, "creation_date": 1495036844, "last_edit_date": 1495037334, "question_id": 44029782, "link": "https://stackoverflow.com/questions/44029782/lambda-in-lambda-cannot-be-a-template", "title": "Lambda in lambda cannot be a template?", "body": "<p>The Visual Studio compiler (MSVC 2015) is unable to compile the following simple piece of code:</p>\n\n<pre><code>int main() {\n    auto foo = [](auto callback) {\n        callback(int{});\n    };\n    auto rexs = [&amp;foo]() {\n        foo([](auto tg) {});\n    };\n}\n</code></pre>\n\n<p>It barfs an internal compiler error:</p>\n\n<pre><code>fatal error C1001: An internal error has occurred in the compiler.\n</code></pre>\n\n<p>VC++ likes to give error <code>C1001</code> when the compiled code contains errors (i.e. the programmer made a mistake, but VC++ just doesn't fully recognize the mistake in the code), so I'm wondering if I could have made a mistake here.</p>\n\n<p>However, from all perspectives I can see, my code looks standard-conformant, and it seems like a VC++ bug to me.  Am I thinking right?</p>\n"}, {"tags": ["c++", "scope", "static", "allocation"], "comments": [{"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "edited": false, "score": 1, "creation_date": 1495036868, "post_id": 44029764, "comment_id": 75086035, "body": "You are returning by value, which means you are making a copy <b>every time</b>. You&#39;ll want to return by reference."}, {"owner": {"reputation": 32027, "user_id": 2104697, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/22ba5a5469953d6ab315e6c2c02a1ee2?s=128&d=identicon&r=PG", "display_name": "Guillaume Racicot", "link": "https://stackoverflow.com/users/2104697/guillaume-racicot"}, "edited": false, "score": 0, "creation_date": 1495036930, "post_id": 44029764, "comment_id": 75086068, "body": "Make the copy constructor of your singleton deleted, you&#39;ll see your error."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 2, "creation_date": 1495036987, "post_id": 44029764, "comment_id": 75086106, "body": "You seem to misunderstand how a <a href=\"http://stackoverflow.com/questions/1008019/c-singleton-design-pattern\">real singleton pattern</a> should be implemented"}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1495044995, "post_id": 44029885, "comment_id": 75090804, "body": "Yes, but... what OP has is not a singleton. This needs to be addressed first."}, {"owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1495051381, "post_id": 44029885, "comment_id": 75094257, "body": "@user4581301 It certainly needs to be addressed, but it is not what OP asked, and the reason his code isn&#39;t working is not that he didn&#39;t understand the concept of a singleton correctly, but that he actually made a mistake which could have happened in any non-singleton related code as well, which is what I&#39;m trying to address. Educating OP about singletons should not, to my mind, be the main point of an answer to this question."}], "tags": [], "owner": {"reputation": 1015, "user_id": 7691497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-46wzsjmiSDg/AAAAAAAAAAI/AAAAAAAAAAk/qjgRQMlHINA/photo.jpg?sz=128", "display_name": "Ben Steffan", "link": "https://stackoverflow.com/users/7691497/ben-steffan"}, "is_accepted": false, "score": 1, "last_activity_date": 1495037148, "creation_date": 1495037148, "answer_id": 44029885, "question_id": 44029764, "link": "https://stackoverflow.com/questions/44029764/c-strange-issue-data-member-getting-out-of-scope/44029885#44029885", "title": "C++ strange issue. Data member getting out of scope", "body": "<pre><code>singleTon getSingleTon()\n{\n    return s;\n}\n</code></pre>\n\n<p>The return type of this function is neither a reference nor a pointer, so you will return <code>s</code> <strong>by value</strong>, which means you're making a copy of it and returning a copy. However, if you want to modify the data members of the <code>singleTon</code> stored in <code>myClass</code>, you'll want to return by reference instead (returning by pointer is also possible, but usually discouraged if its not necessary). You code would have to change to look something like this:</p>\n\n<pre><code>singleTon&amp; getSingleTon()\n{\n    return s;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 247, "user_id": 7976491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e332cb2aea0faa8ea222642e3e169504?s=128&d=identicon&r=PG&f=1", "display_name": "AppWriter", "link": "https://stackoverflow.com/users/7976491/appwriter"}, "is_accepted": false, "score": 0, "last_activity_date": 1495037174, "creation_date": 1495037174, "answer_id": 44029892, "question_id": 44029764, "link": "https://stackoverflow.com/questions/44029764/c-strange-issue-data-member-getting-out-of-scope/44029892#44029892", "title": "C++ strange issue. Data member getting out of scope", "body": "<p>When you call getSinglton(), you are actually getting a copy of the singleton inside myClass.</p>\n"}], "owner": {"reputation": 45, "user_id": 3981456, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2cd7b5687adb492e75b712b38a184898?s=128&d=identicon&r=PG&f=1", "display_name": "Nidhin KR", "link": "https://stackoverflow.com/users/3981456/nidhin-kr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495045203, "creation_date": 1495036786, "last_edit_date": 1495045203, "question_id": 44029764, "link": "https://stackoverflow.com/questions/44029764/c-strange-issue-data-member-getting-out-of-scope", "title": "C++ strange issue. Data member getting out of scope", "body": "<p>This code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\nusing namespace std;\nclass singleTon\n{\n    float testVal;\npublic:\n    singleTon()\n    {\n        cout &lt;&lt; \"Singleton created\\n\";\n        testVal = 0.0;\n    }\n    ~singleTon()\n    {\n        cout &lt;&lt; \"Singleton deleted\\n\";\n    }\n    void setTest(float x)\n    {\n        testVal = x;\n    }\n    float getTest()\n    {\n        return testVal;\n    }\n\n};\n\nclass myClass\n{\n    singleTon s;\n\npublic:\n    myClass()\n    {\n        cout &lt;&lt; \"myClass created\\n\";\n    }\n    ~myClass()\n    {\n        cout &lt;&lt; \"myClass deleted\\n\";\n    }\n\n    singleTon getSingleTon()\n    {\n        return s;\n    }\n\n};\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    myClass m;\n    m.getSingleTon().setTest(100);\n    cout &lt;&lt; \"\\ngetting\" &lt;&lt; m.getSingleTon().getTest();\n    cout &lt;&lt; \"\\nSetting:\";\n    m.getSingleTon().setTest(200);\n    cout &lt;&lt; \"\\ngetting\" &lt;&lt; m.getSingleTon().getTest();\n\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>After the first <code>setTest()</code>:</p>\n\n<pre><code>m.getSingleTon().setTest(100);      \n</code></pre>\n\n<p>The singleton class's destructor is getting called. </p>\n\n<p>But, why?</p>\n\n<p>My understanding was that it will still hold the singleton instance in <code>class myClass</code>. I know, if I use heap allocation, it  may work. But what is wrong with this style? Where is the issue?</p>\n"}, {"tags": ["c++", "qt", "visual-c++", "qml", "qt4.7"], "comments": [{"owner": {"reputation": 21247, "user_id": 904422, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/55cf313c546e7c5aa1aeefae0e772c53?s=128&d=identicon&r=PG", "display_name": "Mitch", "link": "https://stackoverflow.com/users/904422/mitch"}, "edited": false, "score": 2, "creation_date": 1495038212, "post_id": 44029621, "comment_id": 75086851, "body": "See <a href=\"https://bugreports.qt.io/browse/QTBUG-13334\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/QTBUG-13334</a> and its many duplicates. It&#39;s likely that you&#39;re running into this if you&#39;re using qrc files. It&#39;s very annoying."}], "answers": [{"tags": [], "owner": {"reputation": 1667, "user_id": 4490542, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/8925b87f1bc4c6a3bc6956628c9d3b6f?s=128&d=identicon&r=PG&f=1", "display_name": "e.jahandar", "link": "https://stackoverflow.com/users/4490542/e-jahandar"}, "is_accepted": false, "score": 1, "last_activity_date": 1495083331, "creation_date": 1495083331, "answer_id": 44038866, "question_id": 44029621, "link": "https://stackoverflow.com/questions/44029621/rebuilding-again-and-again-to-view-the-imported-qml-file-changes/44038866#44038866", "title": "Rebuilding again and again to view the imported QML file changes", "body": "<p>You can make two independent qrc files, one for debug which is only includes resources like sounds, images, fonts and ... and another qrc for release which includes qml files too. \nThen you can use point to the qml files relatively with your current working directory (could be set in Build &amp; Run pane) without need to include them in qrc which requires time consuming compilation and linkage.\nAlso be aware, the root qml file should be pointed by relative (or absolute path) from C++ side, and no other changes are required to other qml files and they works perfectly on both release and debug mode</p>\n\n<p>In your pro file :</p>\n\n<pre><code>debug {\n    RESOURCES     = application_debug.qrc\n}\n\n!debug {\n    RESOURCES     = application_release.qrc\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 411, "user_id": 5929188, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8svwr.png?s=128&g=1", "display_name": "Vikrant singh", "link": "https://stackoverflow.com/users/5929188/vikrant-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1500630301, "creation_date": 1500630301, "answer_id": 45234394, "question_id": 44029621, "link": "https://stackoverflow.com/questions/44029621/rebuilding-again-and-again-to-view-the-imported-qml-file-changes/45234394#45234394", "title": "Rebuilding again and again to view the imported QML file changes", "body": "<p>You can install the new qt creator, it will solve the problem. Worked for me. I installed QT creator 4.8.7.</p>\n"}], "owner": {"reputation": 411, "user_id": 5929188, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8svwr.png?s=128&g=1", "display_name": "Vikrant singh", "link": "https://stackoverflow.com/users/5929188/vikrant-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 1, "accepted_answer_id": 45234394, "answer_count": 2, "score": 1, "last_activity_date": 1500630301, "creation_date": 1495036392, "last_edit_date": 1495040534, "question_id": 44029621, "link": "https://stackoverflow.com/questions/44029621/rebuilding-again-and-again-to-view-the-imported-qml-file-changes", "title": "Rebuilding again and again to view the imported QML file changes", "body": "<p>I have imported a qml file say A in other qml say B. Whenever I make some changes in A , it doesn't reflect in the Application. I have to again clean and rebuild to view the changes i made, which is very time-consuming. Is there an easier and efficient way of doing this, so time could be saved .</p>\n\n<p>Or another way of saying this is :<br>\nqrc files are not added to Makefile dependencies in debug_and_release mode</p>\n\n<p>example </p>\n\n<p>A.qml </p>\n\n<pre><code> Rectangle {\n        id:xyz\n     Button\n    {\n    id: ButtonA\n    }\n }\n</code></pre>\n\n<p>B.qml </p>\n\n<pre><code>Rectangle{\n          A {\n                id:abc\n            }\n         } \n</code></pre>\n\n<p>I am using qt 4, qtquick 1.0.</p>\n"}, {"tags": ["c++", "pointers", "vector"], "comments": [{"owner": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 1, "creation_date": 1495036476, "post_id": 44029612, "comment_id": 75085766, "body": "Why not just <code>std::vector&lt;povezava&gt;</code>?"}, {"owner": {"reputation": 13, "user_id": 7495718, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5bdc9c6cd1c2996aec40591fccf63b9b?s=128&d=identicon&r=PG&f=1", "display_name": "Sobo\u010dan", "link": "https://stackoverflow.com/users/7495718/sobo%c4%8dan"}, "reply_to_user": {"reputation": 4531, "user_id": 4756309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/XMiQX.png?s=128&g=1", "display_name": "Weak to Enuma Elish", "link": "https://stackoverflow.com/users/4756309/weak-to-enuma-elish"}, "edited": false, "score": 0, "creation_date": 1495036575, "post_id": 44029612, "comment_id": 75085834, "body": "because then I can&#39;t accest p and q of the elements"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1495036589, "post_id": 44029612, "comment_id": 75085842, "body": "@Sobo\u010dan: Sure you can."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7495718, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5bdc9c6cd1c2996aec40591fccf63b9b?s=128&d=identicon&r=PG&f=1", "display_name": "Sobo\u010dan", "link": "https://stackoverflow.com/users/7495718/sobo%c4%8dan"}, "edited": false, "score": 0, "creation_date": 1495036934, "post_id": 44029692, "comment_id": 75086071, "body": "It just says we &quot;we will use static data structures to hold...&quot;, yeah, but what other option do I have? @BoundaryImposition"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 0, "last_activity_date": 1495036579, "creation_date": 1495036579, "answer_id": 44029692, "question_id": 44029612, "link": "https://stackoverflow.com/questions/44029612/accessing-pointers-of-vector-elements/44029692#44029692", "title": "Accessing pointers of vector elements", "body": "<blockquote>\n  <p>But there is an error when I try to access these elements, I'm guessing because they are not defined yet? </p>\n</blockquote>\n\n<p>That's right. You need to create the elements. Fortunately, that's really easy, and should be demonstrated early on in your C++ book.</p>\n\n<pre><code>while(graf &gt;&gt; p1 &gt;&gt; q1 &gt;&gt; cena1){\n    povezava newElement;\n    newElement.p = p1;\n    newElement.q = q1;\n\n    povezave.push_back(newElement);\n}\n</code></pre>\n\n<p>In this example I've also assumed that the vector is changed to <code>std::vector&lt;povezava&gt;</code>, because you've given no reason for it not to be.</p>\n\n<p>You should go further and change its really confusing name.</p>\n\n<blockquote>\n  <p>Is my only option to use dynamic allocation?(I really don't want to).</p>\n</blockquote>\n\n<p>Well, you already are (or, at least, you would be). A vector dynamically allocates its elements.</p>\n\n<blockquote>\n  <p>The task says I have to use static data structures but that's impossible since the size of the array is dependant on a number in the graph.</p>\n</blockquote>\n\n<p>Depending on what this vague requirement means, it's possible that you cannot use a vector.</p>\n"}, {"tags": [], "owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "is_accepted": false, "score": 0, "last_activity_date": 1495036654, "creation_date": 1495036654, "answer_id": 44029716, "question_id": 44029612, "link": "https://stackoverflow.com/questions/44029612/accessing-pointers-of-vector-elements/44029716#44029716", "title": "Accessing pointers of vector elements", "body": "<p>If you don't allocate the memory for the elements of the <code>vector</code>, you can't use them (set member of the elements, ...).</p>\n\n<p>But the best solution is to have statically allocated variable inside the <code>vector</code>:</p>\n\n<pre><code>vector&lt;povezava&gt; povezave;\n</code></pre>\n\n<p>Of course, it means that you have to change the <code>-&gt;</code> to <code>.</code> because the member aren't pointer anymore.</p>\n"}], "owner": {"reputation": 13, "user_id": 7495718, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5bdc9c6cd1c2996aec40591fccf63b9b?s=128&d=identicon&r=PG&f=1", "display_name": "Sobo\u010dan", "link": "https://stackoverflow.com/users/7495718/sobo%c4%8dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 44029692, "answer_count": 2, "score": 0, "last_activity_date": 1495036654, "creation_date": 1495036377, "question_id": 44029612, "link": "https://stackoverflow.com/questions/44029612/accessing-pointers-of-vector-elements", "title": "Accessing pointers of vector elements", "body": "<p>I have this struct:</p>\n\n<pre><code>struct povezava{\n    int p;\n    int q;\n    int cena;\n    int index;\n};\n</code></pre>\n\n<p>and this vector that contains pointers to the struct</p>\n\n<pre><code>vector&lt;povezava*&gt; povezave;\n</code></pre>\n\n<p>and I have to read information from a text file and then appoint the values to the elements of the vector</p>\n\n<pre><code>while(graf &gt;&gt; p1 &gt;&gt; q1 &gt;&gt; cena1){\n\n        povezave[counter]-&gt;p=p1;\n        povezave[counter]-&gt;q=q1;\n        counter++;\n\n    }\n</code></pre>\n\n<p>But there is an error when I try to access these elements, I'm guessing because they are not defined yet? The task says I have to use static data structures but that's impossible since the size of the array is dependant on a number in the graph. Is my only option to use dynamic allocation?(I really don't want to). </p>\n"}, {"tags": ["c++", "mysql", "linux"], "comments": [{"owner": {"reputation": 4567, "user_id": 1320751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eee0011ba2ca995b31e464fc2e2ad885?s=128&d=identicon&r=PG", "display_name": "Anon Mail", "link": "https://stackoverflow.com/users/1320751/anon-mail"}, "edited": false, "score": 0, "creation_date": 1495036322, "post_id": 44029540, "comment_id": 75085660, "body": "I&#39;m guessing the issue is due to incorrect including of headers?  But with out a minimal, complete example it is hard to tell."}, {"owner": {"reputation": 796, "user_id": 8005142, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208770107549653/picture?type=large", "display_name": "Todor Simeonov", "link": "https://stackoverflow.com/users/8005142/todor-simeonov"}, "edited": false, "score": 0, "creation_date": 1495036338, "post_id": 44029540, "comment_id": 75085670, "body": "When you call the function, do you pass it a valid <code>FileHandler</code> object?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1495036500, "post_id": 44029540, "comment_id": 75085780, "body": "<i>&quot;Why should code work in one place but behave differently in another?&quot;</i> Many, many reasons. Present your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495037496, "post_id": 44029670, "comment_id": 75086431, "body": "Will C++ let you compile a program with this type of mismatch?"}, {"owner": {"reputation": 796, "user_id": 8005142, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208770107549653/picture?type=large", "display_name": "Todor Simeonov", "link": "https://stackoverflow.com/users/8005142/todor-simeonov"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495037877, "post_id": 44029670, "comment_id": 75086653, "body": "The syntax is correct. Using &amp; makes a <b>reference</b> to the object: <a href=\"https://en.wikipedia.org/wiki/Reference_(C%2B%2B)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Reference_(C%2B%2B)</a> It is very similar to <b>pointer</b> but calling it is different."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495044208, "post_id": 44029670, "comment_id": 75090349, "body": "I know what a reference is. But if the function is declared to take a reference, and you try calling it with a pointer, the compiler should report it as an error."}, {"owner": {"reputation": 796, "user_id": 8005142, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208770107549653/picture?type=large", "display_name": "Todor Simeonov", "link": "https://stackoverflow.com/users/8005142/todor-simeonov"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1495044851, "post_id": 44029670, "comment_id": 75090718, "body": "@Barmar: I agree, compiler will fail."}, {"owner": {"reputation": 1, "user_id": 8026408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b8862d84deb4a1d67d992ad074e2bb?s=128&d=identicon&r=PG&f=1", "display_name": "John Roberts", "link": "https://stackoverflow.com/users/8026408/john-roberts"}, "edited": false, "score": 0, "creation_date": 1495047053, "post_id": 44029670, "comment_id": 75091843, "body": "Hi guys thanks but the issue is not with the call to the function it is with the line in the function:- MYSQL *connect = mysql_init(NULL); which works ok in main() function but not in the newl_Connection() function. I am passing a class in by reference(pProcLog), this part works OK throughout the wider application."}, {"owner": {"reputation": 1, "user_id": 8026408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b8862d84deb4a1d67d992ad074e2bb?s=128&d=identicon&r=PG&f=1", "display_name": "John Roberts", "link": "https://stackoverflow.com/users/8026408/john-roberts"}, "edited": false, "score": 0, "creation_date": 1495048791, "post_id": 44029670, "comment_id": 75092736, "body": "Further info on the problem as follows - removed the parameter from the function call newl_connection(), copied the function into the same file as main() and tried calling the function from both within main() and from another file within the application. Called from within main () = OK from outside main() the error occurs."}, {"owner": {"reputation": 796, "user_id": 8005142, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208770107549653/picture?type=large", "display_name": "Todor Simeonov", "link": "https://stackoverflow.com/users/8005142/todor-simeonov"}, "reply_to_user": {"reputation": 1, "user_id": 8026408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b8862d84deb4a1d67d992ad074e2bb?s=128&d=identicon&r=PG&f=1", "display_name": "John Roberts", "link": "https://stackoverflow.com/users/8026408/john-roberts"}, "edited": false, "score": 0, "creation_date": 1495051858, "post_id": 44029670, "comment_id": 75094572, "body": "@John Roberts : Is your app multi-threaded? There is an issue about multi-threading: <a href=\"https://dev.mysql.com/doc/refman/5.7/en/mysql-init.html\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.7/en/mysql-init.html</a>"}, {"owner": {"reputation": 1, "user_id": 8026408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b8862d84deb4a1d67d992ad074e2bb?s=128&d=identicon&r=PG&f=1", "display_name": "John Roberts", "link": "https://stackoverflow.com/users/8026408/john-roberts"}, "edited": false, "score": 0, "creation_date": 1495416760, "post_id": 44029670, "comment_id": 75226980, "body": "Not that I am aware of, this is a C++ app relatively small in operational terms but over many c source files."}], "tags": [], "owner": {"reputation": 796, "user_id": 8005142, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208770107549653/picture?type=large", "display_name": "Todor Simeonov", "link": "https://stackoverflow.com/users/8005142/todor-simeonov"}, "is_accepted": false, "score": 0, "last_activity_date": 1495036523, "creation_date": 1495036523, "answer_id": 44029670, "question_id": 44029540, "link": "https://stackoverflow.com/questions/44029540/funny-code-behaviour/44029670#44029670", "title": "funny Code behaviour", "body": "<p>According to your function header:</p>\n\n<pre><code>int Newl_connection(FileHandler&amp; pProcLog)\n</code></pre>\n\n<p>you should call it with a valid object of type <code>FileHandler</code>.\nSetting the variable name as <code>pProcLog</code> makes me think you want to use it as a pointer to an object. Then the declaration should be:</p>\n\n<pre><code>int Newl_connection(FileHandler* pProcLog)\n</code></pre>\n\n<p>This way you could call the function safe with a <code>null</code> value as argument.</p>\n"}], "owner": {"reputation": 1, "user_id": 8026408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41b8862d84deb4a1d67d992ad074e2bb?s=128&d=identicon&r=PG&f=1", "display_name": "John Roberts", "link": "https://stackoverflow.com/users/8026408/john-roberts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1495036523, "creation_date": 1495036182, "last_edit_date": 1495036261, "question_id": 44029540, "link": "https://stackoverflow.com/questions/44029540/funny-code-behaviour", "title": "funny Code behaviour", "body": "<p>I am trying to connect to a mysql database with the following code in my <code>main()</code> function.</p>\n\n<pre><code>MYSQL *connect = mysql_init(NULL);\n</code></pre>\n\n<p>which works fine and I get a pointer value returned.</p>\n\n<p>I have created another c++ file with a function in it as below </p>\n\n<pre><code>int Newl_connection(FileHandler&amp; pProcLog)\n{\n    MYSQL *connect = mysql_init(NULL);\n    return 0;\n}\n</code></pre>\n\n<p>compiling and Linking fine, I have made several calls to the same line of code  in the main function (as a test) and all ok but when I run the code it fails at the line in the Newl_connection() function.</p>\n\n<p>I have stripped the Newl_connection to as basic as possible, and included all the headers from the file containing Main() into the file containing Newl_connection() function.</p>\n\n<p>THe compiler error I recieve is</p>\n\n<blockquote>\n  <p>Program received signal SIGABRT, Aborted.\n  0x00007ffff6bc6428 in __GI_raise (sig=sig@entry=6) at ../sysdeps/unix/sysv/linux/raise.c:54\n  54  ../sysdeps/unix/sysv/linux/raise.c: No such file or directory.</p>\n  \n  <p>Attempt to use a type name as an expression.</p>\n  \n  <p>Attempt to use a type name as an expression</p>\n</blockquote>\n\n<p>Attempt to use a type name as an expression. appears for all instance calls, but the call in the <code>Newl_connection()</code> function is terminal.</p>\n\n<p>I have tried removing all other instances in <code>main()</code> and still get the same problem.</p>\n\n<p>Why should code work in one place but behave differently in another?\nHelp would be appreciated I am at my witts end on this one.</p>\n"}, {"tags": ["c++", "eclipse-cdt"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1495036134, "post_id": 44029159, "comment_id": 75085505, "body": "I doubt if this can be fixed because it is the shell that expands the file names before the program gets the arguments."}, {"owner": {"reputation": 391, "user_id": 4693472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5cdf081b2f368f958a7653b26c5799c?s=128&d=identicon&r=PG&f=1", "display_name": "Laurent G", "link": "https://stackoverflow.com/users/4693472/laurent-g"}, "edited": false, "score": 0, "creation_date": 1495036160, "post_id": 44029159, "comment_id": 75085531, "body": "The * expanding to the corresponding file names is a shell feature. So I see low probability on what you ask for. You can just copy-paste what your shell gives, no ? Damned, a few seconds late, because I wanted to suggest an intermediate mean."}], "answers": [{"comments": [{"owner": {"reputation": 1123, "user_id": 2778860, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/PpV12.png?s=128&g=1", "display_name": "chronosynclastic", "link": "https://stackoverflow.com/users/2778860/chronosynclastic"}, "edited": false, "score": 0, "creation_date": 1495100516, "post_id": 44037193, "comment_id": 75113890, "body": "Thanks. I wanted to avoid the option 1 so that I don&#39;t have to switch back and forth between terminal and Eclipse. Option 2 is more feasible for me."}], "tags": [], "owner": {"reputation": 44207, "user_id": 141719, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5026f7977fda423dc990cc74b2ad4c9d?s=128&d=identicon&r=PG&f=1", "display_name": "HighCommander4", "link": "https://stackoverflow.com/users/141719/highcommander4"}, "is_accepted": true, "score": 2, "last_activity_date": 1495071219, "creation_date": 1495071219, "answer_id": 44037193, "question_id": 44029159, "link": "https://stackoverflow.com/questions/44029159/eclipse-cdt-passing-multiple-program-arguments-with-same-file-extension/44037193#44037193", "title": "Eclipse CDT: passing multiple program arguments with same file extension", "body": "<blockquote>\n  <p>Is there a workaround for this?</p>\n</blockquote>\n\n<p>The two most obvious ones that come to mind are:</p>\n\n<ol>\n<li>Run the program from a terminal instead of from inside Eclipse.</li>\n<li>Modify the program to take just the directory name as the argument, and have it iterate over the files in the directory.</li>\n</ol>\n"}], "owner": {"reputation": 1123, "user_id": 2778860, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/PpV12.png?s=128&g=1", "display_name": "chronosynclastic", "link": "https://stackoverflow.com/users/2778860/chronosynclastic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 44037193, "answer_count": 1, "score": 1, "last_activity_date": 1495071219, "creation_date": 1495035117, "question_id": 44029159, "link": "https://stackoverflow.com/questions/44029159/eclipse-cdt-passing-multiple-program-arguments-with-same-file-extension", "title": "Eclipse CDT: passing multiple program arguments with same file extension", "body": "<p>I want to input a bunch of image files from the same folder and apply them the same operation inside a for-loop. I defined main as <code>int main(int argc, char** argv)</code> have this for-loop:</p>\n\n<pre><code>for(int i=1; i &lt; argc; ++i)\n{\n   // do something here\n}\n</code></pre>\n\n<p>In Eclipse CDT (Neon), under Run configurations > Arguments, I'm entering the paths of images that I want to process. It works when I explicitly give a list of images like <code>img1.jpg img2.jpg ...</code> however it doesn't work when I give try to run it on all the image files with a certain extension such as <code>dataset/*.jpg</code>. </p>\n\n<p>Is there a workaround for this? Thanks.</p>\n"}, {"tags": ["c++", "multidimensional-array", "openacc"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1495035983, "post_id": 44029157, "comment_id": 75085371, "body": "what are the dimensions of <code>A</code> ?"}, {"owner": {"reputation": 141, "user_id": 7635052, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QwtWa.jpg?s=128&g=1", "display_name": "Random Tourist", "link": "https://stackoverflow.com/users/7635052/random-tourist"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1495037884, "post_id": 44029157, "comment_id": 75086657, "body": "@tobi303 <code>A</code> is an <code>N*NBxN*NB</code> matrix. Sorry <code>A</code> is <b>block diagonal</b>, I just edited that. Each block is an <code>NxN</code> matrix and <code>A</code> is composed of <code>NB</code> blocks."}], "answers": [{"tags": [], "owner": {"reputation": 3901, "user_id": 3204484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7Cc9.jpg?s=128&g=1", "display_name": "Mat Colgrove", "link": "https://stackoverflow.com/users/3204484/mat-colgrove"}, "is_accepted": true, "score": 3, "last_activity_date": 1495060500, "creation_date": 1495060500, "answer_id": 44035785, "question_id": 44029157, "link": "https://stackoverflow.com/questions/44029157/openacc-private-2d-array/44035785#44035785", "title": "OpenACC - Private 2D array", "body": "<p>Sorry, but using a array of pointers in a private clause isn't supported.  The problem being that the compiler runtime would have to dynamically create a private for each gang, worker, or vector (depending upon the loop with the private clause) and fill in all the device pointers.  This would come with an extremely high overhead cost.</p>\n\n<p>If \"B\" is a fixed size static array, \"double B[N][N]\", then you could use it in the private clause.  </p>\n\n<p>Otherwise, I would suggest manually privatizing the array by adding a third dimension.</p>\n\n<pre><code> // NB is the number of block\n// N is the block size\n// A is the main matrix (block diagonal)\n\ndouble*** B; // a block\nB = new double**[NB];\nfor (unsigned int i = 0; i &lt; NB; i++) {\n  B[i] = new double*[N];\n  for (unsigned int j = 0; j &lt; N; j++) {\n    B[i][j] = new double[N];\n}}\n\n\n#pragma acc parallel loop create(B[:NB][:N][:N]) copyin(A[:NB*N][:NB*N])\nfor (unsigned int b = 0; b &lt; NB; b++) {\n    #pragma acc loop\n    for (unsigned int i = 0; i &lt; N; i++) {\n        #pragma acc loop\n        for (unsigned int j = 0; j &lt; N; j++) {\n            B[b][i][j] = A[b*N+i][b*N+j];\n        }\n    }\n    // process B\n}\n\nfor (unsigned int i = 0; i &lt; NB; i++) {\n  for (unsigned int j = 0; j &lt; N; j++) {\n     delete[] B[i][j];\n  }\n  delete[] B[i];\n}\ndelete[] B;\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 7635052, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QwtWa.jpg?s=128&g=1", "display_name": "Random Tourist", "link": "https://stackoverflow.com/users/7635052/random-tourist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 44035785, "answer_count": 1, "score": 0, "last_activity_date": 1495060500, "creation_date": 1495035115, "last_edit_date": 1495038065, "question_id": 44029157, "link": "https://stackoverflow.com/questions/44029157/openacc-private-2d-array", "title": "OpenACC - Private 2D array", "body": "<p>I'm dealing with block diagonal matrices (each blocks has the same size) and I have an <code>illegal address error</code> when I use <code>private</code> dynamically allocated 2D array...</p>\n\n<pre><code>// NB is the number of block\n// N is the block size\n// A is the main matrix (block diagonal)\n\ndouble** B; // a block\nB = new double*[N];\nfor (unsigned int i = 0; i &lt; N; i++)\n    B[i] = new double[N];\n\n#pragma acc parallel loop private(B[:N][:N]) copyin(A[:NB*N][:NB*N])\nfor (unsigned int b = 0; b &lt; NB; b++) {\n    #pragma acc loop\n    for (unsigned int i = 0; i &lt; N; i++) {\n        #pragma acc loop\n        for (unsigned int j = 0; j &lt; N; j++) {\n            B[i][j] = A[b*N+i][b*N+j];\n        }\n    }\n    // process B\n}\n\nfor (unsigned int i = 0; i &lt; N; i++)\n    delete[] B[i];\ndelete[] B;\n</code></pre>\n\n<p>The error I get is:</p>\n\n<pre><code>call to cuStreamSynchronize returned error 700: Illegal address during kernel execution\n</code></pre>\n\n<p>It works fine if I flatten the array into a 1D array and use lexicographic index or static 2D array but I'm using function requiring a <code>double**</code> as parameter so I would prefer to stick with dynamic 2D array...</p>\n\n<p>I've read up on the <code>private</code> clause in the spec but it doesn't say that dynamic 2D array are not supported so I suppose I'm doing something wrong...</p>\n"}, {"tags": ["c++", "linux", "bash", "shell"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1495041477, "post_id": 44028713, "comment_id": 75088773, "body": "<code>system()</code> is horrible for multiple reasons (like security exploits, lack of control over the running program and more), forget it exists and <i>never</i> use it."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 8006546, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8ffb4fbdb93973ee7fb3eb98d975de70?s=128&d=identicon&r=PG&f=1", "display_name": "jamesk", "link": "https://stackoverflow.com/users/8006546/jamesk"}, "edited": false, "score": 0, "creation_date": 1495118099, "post_id": 44029017, "comment_id": 75126787, "body": "can you show me how to write what you said by using my part of code? thanks :)"}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "reply_to_user": {"reputation": 27, "user_id": 8006546, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8ffb4fbdb93973ee7fb3eb98d975de70?s=128&d=identicon&r=PG&f=1", "display_name": "jamesk", "link": "https://stackoverflow.com/users/8006546/jamesk"}, "edited": false, "score": 0, "creation_date": 1495119603, "post_id": 44029017, "comment_id": 75127982, "body": "I&#39;ve added an example. Do not simply copy/paste my example as it is not tested (which mean it may have bug) and as no error handling."}], "tags": [], "owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "is_accepted": true, "score": 1, "last_activity_date": 1495119519, "last_edit_date": 1495119519, "creation_date": 1495034718, "answer_id": 44029017, "question_id": 44028713, "link": "https://stackoverflow.com/questions/44028713/c-execute-multiple-commands-with-timer-in-shell/44029017#44029017", "title": "C++ execute multiple commands with timer in shell", "body": "<p>You can use <a href=\"http://en.cppreference.com/w/cpp/thread/sleep_for\" rel=\"nofollow noreferrer\"><code>std::this_thread::sleep_for</code></a>.</p>\n\n<p>You should use <code>fork</code> + <code>exec*</code> (+ <code>wait</code>) instead of <code>system</code>: <code>system</code> is vulnerable to alias and you can't handle well error with it.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;unistd.h&gt;\n#include &lt;thread&gt;\n#include &lt;chrono&gt;\n\n//Function made in less than 5 minute\n// You should improve it (error handling, ...)\n// I use variadic template to be able to give a non fixed\n// number of parameters\ntemplate&lt;typename... str&gt;\nvoid my_system(str... p) {\n    // Fork create a new process\n    switch fork() {\n        case 0: // we are in the new process\n            execl(p..., (char*)nullptr); // execl execute the executable passed in parameter\n            break;\n        case -1: // Fork returned an error\n            exit(1);\n        default: // We are in the parent process\n            wait(); // We wait for the child process to end\n            break;\n    }\n}\n\nint main() {\n    using namespace std::chrono_literals;\n    // start a command\n    my_system(&lt;executable path&gt;, \"cd\") ;\n    // sleep for 2 second\n    std::this_thread::sleep_for(2s);\n    // ....\n    my_system(&lt;executable path&gt;, \"ls\") ;\n    std::this_thread::sleep_for(2s);\n    my_system(&lt;executable path&gt;, \"exec\", \"bash\") ;\n    std::this_thread::sleep_for(2s);\n}\n</code></pre>\n\n<p><strong>WARNING</strong> this code was not tested, do not do any error handling and may have bugs ! I will let you fix it. Check the man page for the call to the posix library (<code>execl</code>, <code>fork</code>, <code>wait</code>) and the above link for <code>sleep_for</code> and <code>chrono</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 8006546, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8ffb4fbdb93973ee7fb3eb98d975de70?s=128&d=identicon&r=PG&f=1", "display_name": "jamesk", "link": "https://stackoverflow.com/users/8006546/jamesk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 44029017, "answer_count": 1, "score": 0, "last_activity_date": 1495119519, "creation_date": 1495033839, "last_edit_date": 1495034809, "question_id": 44028713, "link": "https://stackoverflow.com/questions/44028713/c-execute-multiple-commands-with-timer-in-shell", "title": "C++ execute multiple commands with timer in shell", "body": "<p>what is the best way to execute multiple shell commands with a delay between one and another in the same shell? </p>\n\n<p>E.g., this is a sample code that executes <code>cd</code> and <code>ls</code> commands but in different shells. How can I add a 10 seconds delay and running them in the same shell? Maybe with <code>usleep</code>?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;ctime&gt;\n#include &lt;cerrno&gt;\n#include &lt;unistd.h&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n\nint main() {\n   system(\"gnome-terminal -x sh -c 'cd; ls; exec bash'\");\n   return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "audio", "cocos2d-x"], "comments": [{"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "edited": false, "score": 0, "creation_date": 1495042879, "post_id": 44028650, "comment_id": 75089578, "body": "On which platform you&#39;re trying to run ?"}], "answers": [{"comments": [{"owner": {"reputation": 6651, "user_id": 1264375, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e0b81876ca5b35253893f82ffbc7162e?s=128&d=identicon&r=PG", "display_name": "Makalele", "link": "https://stackoverflow.com/users/1264375/makalele"}, "edited": false, "score": 0, "creation_date": 1495089482, "post_id": 44032349, "comment_id": 75106500, "body": "mp3 works on android, aac works on ios and most android devices as well."}, {"owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "reply_to_user": {"reputation": 6651, "user_id": 1264375, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e0b81876ca5b35253893f82ffbc7162e?s=128&d=identicon&r=PG", "display_name": "Makalele", "link": "https://stackoverflow.com/users/1264375/makalele"}, "edited": false, "score": 0, "creation_date": 1495089688, "post_id": 44032349, "comment_id": 75106610, "body": "Is it works for <code>SoundEffects</code> in cocos2d-x. I&#39;ve not tested <code>.mp3</code> in cocos2d-x yet but I&#39;ve <a href=\"http://www.cocos2d-x.org/wiki/Audio#Sound-Effects\" rel=\"nofollow noreferrer\">link</a> for same of cocos2d-x wiki"}, {"owner": {"reputation": 6651, "user_id": 1264375, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e0b81876ca5b35253893f82ffbc7162e?s=128&d=identicon&r=PG", "display_name": "Makalele", "link": "https://stackoverflow.com/users/1264375/makalele"}, "edited": false, "score": 0, "creation_date": 1495094964, "post_id": 44032349, "comment_id": 75110024, "body": "This wiki is outdated AF."}, {"owner": {"reputation": 1699, "user_id": 3264924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/25a4634e73aeed237d6260e9ffa0aace?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/3264924/jennifer"}, "edited": false, "score": 1, "creation_date": 1495117355, "post_id": 44032349, "comment_id": 75126199, "body": "Thank you Abhishek Aryan, the problem was that I have been using mp3 as the sound effect. Solved by using Wav."}], "tags": [], "owner": {"reputation": 18740, "user_id": 3445320, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nvbJ7_WkXK4/AAAAAAAAAAI/AAAAAAAAABs/UVW5XWwJhyY/photo.jpg?sz=128", "display_name": "Abhishek Aryan", "link": "https://stackoverflow.com/users/3445320/abhishek-aryan"}, "is_accepted": true, "score": 1, "last_activity_date": 1495076924, "last_edit_date": 1495076924, "creation_date": 1495045735, "answer_id": 44032349, "question_id": 44028650, "link": "https://stackoverflow.com/questions/44028650/unable-to-hear-the-sound-effect-in-cocos2dx/44032349#44032349", "title": "Unable to hear the sound effect in cocos2dx", "body": "<p>Use <code>SimpleAudioEngine::getInstance()</code> instead of <code>SimpleAudioEngine::sharedEngine()</code> because <code>sharedEngine()</code> is deprecated now.</p>\n\n<p>For Sound Effects, <code>.mp3</code> only supports on iOS</p>\n\n<p><strong>Sound Effects</strong></p>\n\n<pre><code>|    Platform     |   supported sound effects formats   |\n|-----------------|:-----------------------------------:|\n| Android Supports|         .ogg , .wav format.         |\n| iOS             |          .mp3, .wav, .caf           |   \n| Windows Desktop |         .mid and .wav only          |    \n</code></pre>\n"}], "owner": {"reputation": 1699, "user_id": 3264924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/25a4634e73aeed237d6260e9ffa0aace?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer", "link": "https://stackoverflow.com/users/3264924/jennifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 44032349, "answer_count": 1, "score": 0, "last_activity_date": 1495076924, "creation_date": 1495033690, "last_edit_date": 1495042920, "question_id": 44028650, "link": "https://stackoverflow.com/questions/44028650/unable-to-hear-the-sound-effect-in-cocos2dx", "title": "Unable to hear the sound effect in cocos2dx", "body": "<p>I have the following code and the problem is that the battle.mp3 music plays normally however, the bang.mp3 sound effect does not play. Any ideas? </p>\n\n<pre><code>bool GameLayer::init(int level)\n{\n    if (!Layer::init())\n        return false;\n\nSimpleAudioEngine::sharedEngine()-&gt;playBackgroundMusic(\"battle.mp3\", true);\nSimpleAudioEngine::sharedEngine()-&gt;setEffectsVolume(1.5);\nSimpleAudioEngine::sharedEngine()-&gt;preloadEffect(\"bang.mp3\");\n</code></pre>\n\n<p>I tried to play the following sound effect when the enemy character is damaged, but unable to hear any sound.</p>\n\n<pre><code>int soundID = SimpleAudioEngine::sharedEngine()-&gt;playEffect(\"bang.mp3\");\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "this", "initializer-list"], "answers": [{"comments": [{"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 2, "creation_date": 1495090167, "post_id": 44031445, "comment_id": 75106903, "body": "Your interpretation of the quote you cite is radically different from what the quote says. Calling member functions from the member-init-list isn&#39;t undefined behaviour. You just need to be careful that the things you&#39;re calling and using have actually been initialized."}, {"owner": {"reputation": 959, "user_id": 7902545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03fbc604c9916ba8651236a6087b9355?s=128&d=identicon&r=PG", "display_name": "didiz", "link": "https://stackoverflow.com/users/7902545/didiz"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1495091157, "post_id": 44031445, "comment_id": 75107555, "body": "Thanks I will edit so it expresses better what you mentioned"}, {"owner": {"reputation": 326, "user_id": 7576082, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55dd92fa2efa971a901d11598532c76e?s=128&d=identicon&r=PG&f=1", "display_name": "rinn2883", "link": "https://stackoverflow.com/users/7576082/rinn2883"}, "edited": false, "score": 0, "creation_date": 1495093657, "post_id": 44031445, "comment_id": 75109253, "body": "Apparently the member variables where in the right order (not like in the example). But there are member variables that are used in the thread that are initialized in the class after those of the initializer list. So if i put these first is it safe to call the member funtion in initializer list?"}, {"owner": {"reputation": 326, "user_id": 7576082, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55dd92fa2efa971a901d11598532c76e?s=128&d=identicon&r=PG&f=1", "display_name": "rinn2883", "link": "https://stackoverflow.com/users/7576082/rinn2883"}, "edited": false, "score": 0, "creation_date": 1495094050, "post_id": 44031445, "comment_id": 75109495, "body": "Testing with the changed order seems to have fixed the undefined behavior. Not sure what to put as answer cause it was the combination of the 2 that made me figure out the problem"}], "tags": [], "owner": {"reputation": 959, "user_id": 7902545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03fbc604c9916ba8651236a6087b9355?s=128&d=identicon&r=PG", "display_name": "didiz", "link": "https://stackoverflow.com/users/7902545/didiz"}, "is_accepted": true, "score": 1, "last_activity_date": 1495094529, "last_edit_date": 1495094529, "creation_date": 1495042344, "answer_id": 44031445, "question_id": 44028621, "link": "https://stackoverflow.com/questions/44028621/ctor-initializer-list-with-stdthread-and-this/44031445#44031445", "title": "ctor initializer list with std::thread and this", "body": "<p>According to the standard, using a member function in the initializer list can result in undefined behavior:</p>\n\n<blockquote>\n  <p>Member functions (including virtual member functions) can be called\n  from member initializers, but the behavior is undefined if not all\n  direct bases are initialized at that point.</p>\n</blockquote>\n\n<p>Direct base classes are initialized in left to right order.</p>\n\n<p>In your example however, the problem is that the initialization of the object itself (this) is not finished, and it is already passed to the thread, captured by the condition variable and referenced.</p>\n\n<p>The following code has crashed once because the mutex was not initialized, but I can't get it to reproduce consistently:</p>\n\n<pre><code>class withthread\n{\npublic:\n\n    withthread(): b(false),t(std::thread(&amp;withthread::func,this))\n\n    {\n\n    }\n    ~withthread()\n    {\n        t.join();\n    }\n    void func()\n    {\n        int d=5;\n        while ( --d  ) {\n            std::unique_lock&lt;std::mutex&gt; l(m);\n            v.wait(l,[this]() {this-&gt;b=true;return b;});\n            cout &lt;&lt; 2 &lt;&lt; endl;\n        }\n    }\n    std::thread t;\n    std::mutex m;\n    std::condition_variable v;\n    bool b;\n};\n\nint main(){\n    withthread w1 ;\n    withthread *w ;\n    w = new withthread();\n    delete w;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "is_accepted": false, "score": 3, "last_activity_date": 1495139135, "last_edit_date": 1495139135, "creation_date": 1495088810, "answer_id": 44040131, "question_id": 44028621, "link": "https://stackoverflow.com/questions/44028621/ctor-initializer-list-with-stdthread-and-this/44040131#44040131", "title": "ctor initializer list with std::thread and this", "body": "<p>Inside the constructor member-init-list (which is the formal name of the stuff between the prototype (X(int x)) and the body ({\u2026}) in the constructor definition), this is usable up to the point that the data members you access have been initialized. The order of initialization of data members is defined not by their order in the member-init-list, but their order in the class definition (e.g. Clang warns if the order in the former does not match that in the latter).</p>\n\n<p>So in principle, as long as the thread is the last class member, this is completely usable (barring any extra initialization performed in the constructor body, which is executed after the member-init-list is run through.</p>\n\n<p>Looking at your code for class A, it seems you have run into the initialization order error I described: your unique_per member is defined after the thread, but you mistakenly assume putting the unique_ptr first in the member-init-list will change the order of their initialization. It doesn't, and you might be running into issues related to that. In B, the thread is first default initialized: leaving it out of the member-init-list does not mean it isn't first default-initialized! Then in the constructor body, you actually start a thread running a function.</p>\n"}], "owner": {"reputation": 326, "user_id": 7576082, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/55dd92fa2efa971a901d11598532c76e?s=128&d=identicon&r=PG&f=1", "display_name": "rinn2883", "link": "https://stackoverflow.com/users/7576082/rinn2883"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1032, "favorite_count": 0, "accepted_answer_id": 44031445, "answer_count": 2, "score": 1, "last_activity_date": 1495139135, "creation_date": 1495033633, "last_edit_date": 1495095803, "question_id": 44028621, "link": "https://stackoverflow.com/questions/44028621/ctor-initializer-list-with-stdthread-and-this", "title": "ctor initializer list with std::thread and this", "body": "<p>I have read some stuff about 'this' being unsafe in the initializer list of the constructor. I have a rather large app and I traced some undefined behavior to using std::thread with 'this' in the initializer list of a constructor. When I moved the std::thread construction out of the initializer list and into the constructor the app works without errors.</p>\n\n<p>I tried to reproduce the problem with an example but it runs perfectly.\nCan anybody explain why the combo of std::thread, 'this' and initializer list might give undefined behavior. I think it has to do with 'this' not being fully initialized when you call the std::thread constructor but that is just guessing.</p>\n\n<p>I would like to be able to reproduce the problem.\nTried with g++4.9.2 and g++5.4 on ubuntu 16.04.\nI compiled with -g and -O0 to debug. Also tried with -O2 and -O3.</p>\n\n<pre><code>#include &lt;chrono&gt;\n#include &lt;condition_variable&gt;\n#include &lt;memory&gt;\n#include &lt;mutex&gt;\n#include &lt;thread&gt;\n\n//g++ -std=c++11 -g -O0 -pthread init_thread.cpp -o init_thread\n\n/* ------------------------------------------------------------------------- +\n |   TEMPLATE FUNCTIONS\n + ------------------------------------------------------------------------- */\n#if __cplusplus &lt; 201402L\ntemplate&lt;typename T, typename... Args&gt;\nstd::unique_ptr&lt;T&gt; make_unique(Args&amp;&amp;... args)\n{\n  return std::unique_ptr&lt;T&gt;(new T(std::forward&lt;Args&gt;(args)...));\n}\n#endif\n\n\n/* ------------------------------------------------------------------------- +\n |   CLASSES\n + ------------------------------------------------------------------------- */\nclass X\n{\npublic:\n    X() = delete;\n\n    X(int x) : x_(x)\n    {\n        t_ = std::thread(&amp;X::foo, this);\n        printf(\"Ctor X\\n\");\n    }\n\n    ~X()\n    {\n        {\n            std::lock_guard&lt;std::mutex&gt; lck(mtxState_);\n            state_ = State::terminated;\n        }\n        cv_.notify_one();\n        if (t_.joinable())\n        {\n            t_.join();\n        }\n        printf(\"Dtor X\\n\");\n    }\n\nprivate:\n    enum class State\n    {\n        suspended,\n        running,\n        terminated\n    };\n\n    int x_;\n    mutable std::mutex mtxState_;\n    State state_ { State::running };\n    mutable std::condition_variable cv_;\n    std::thread t_;\n\n    void foo()\n    {\n        while (state_ != State::terminated)\n        {\n            switch (state_)\n            {\n                case State::suspended:\n                    {\n                        std::unique_lock&lt;std::mutex&gt; lck(mtxState_);\n                        cv_.wait(lck, [this] { return state_ != State::suspended; });\n                    }\n                    break;\n                case State::running:\n                    {\n                        printf(\"do something X...\\n\");\n                        std::this_thread::sleep_for(std::chrono::milliseconds(100));\n                    }\n                default:\n                    break;\n            }\n        }\n    };\n};\n\n\nclass I\n{\npublic:\n    I() = delete;\n    I(int i) {};\n};\n\n\nclass A : I\n{\npublic:\n    A() = delete;\n\n    A(int a) : I(a), a_(a), x_obj_with_thread_(make_unique&lt;X&gt;(15)), t_(std::thread(&amp;A::foo, this))\n    {\n        printf(\"Ctor A\\n\");\n    }\n\n    ~A()\n    {\n        {\n            std::lock_guard&lt;std::mutex&gt; lck(mtxState_);\n            state_ = State::terminated;\n        }\n        cv_.notify_one();\n        if (t_.joinable())\n        {\n            t_.join();\n        }\n        printf(\"Dtor A\\n\");\n    }\n\nprivate:\n    enum class State\n    {\n        suspended,\n        terminated\n    };\n\n    int a_;\n    mutable std::mutex mtxState_;\n    State state_ { State::suspended };\n    mutable std::condition_variable cv_;\n    std::thread t_;\n    std::unique_ptr&lt;X&gt; x_obj_with_thread_;\n\n    void foo()\n    {\n        while (state_ != State::terminated)\n        {\n            switch (state_)\n            {\n                case State::suspended:\n                    {\n                        std::unique_lock&lt;std::mutex&gt; lck(mtxState_);\n                        cv_.wait(lck, [this] { return state_ != State::suspended; });\n                    }\n                    break;\n                default:\n                    printf(\"do something A...\\n\");\n                    break;\n            }\n        }\n    };\n};\n\nclass B : I\n{\npublic:\n\n    B() = delete;\n\n    B(int b) : I(b), b_(b), x_obj_with_thread_(make_unique&lt;X&gt;(15))\n    {\n        t_ = std::thread(&amp;B::bar, this);\n        printf(\"Ctor B\\n\");\n    }\n\n    ~B()\n    {\n        {\n            std::lock_guard&lt;std::mutex&gt; lck(mtxState_);\n            state_ = State::terminated;\n        }\n        cv_.notify_one();\n        if (t_.joinable())\n        {\n            t_.join();\n        }\n        printf(\"Dtor B\\n\");\n    }\n\nprivate:\n    enum class State\n    {\n        suspended,\n        terminated\n    };\n\n    int b_;\n    mutable std::mutex mtxState_;\n    State state_ { State::suspended };\n    mutable std::condition_variable cv_;\n    std::thread t_;\n    std::unique_ptr&lt;X&gt; x_obj_with_thread_;\n\n    void bar()\n    {\n        while (state_ != State::terminated)\n        {\n            switch (state_)\n            {\n                case State::suspended:\n                    {\n                        std::unique_lock&lt;std::mutex&gt; lck(mtxState_);\n                        cv_.wait(lck, [this] { return state_ != State::suspended; });\n                    }\n                    break;\n                default:\n                    printf(\"do something B...\\n\");\n                    break;\n            }\n        }\n    };\n};\n\n\nvoid testA()\n{\n    for (int i=0; i &lt; 100000; i++)\n    {\n        printf(\"A iteration %i\\n\", i);\n        A a(15);\n    }\n}\n\nvoid testB()\n{\n    for (int i=0; i &lt; 100000; i++)\n    {\n        printf(\"B iteration %i\\n\", i);\n        B b(15);\n    }\n}\n\nint main() \n{\n    std::thread a(testA);\n    std::thread b(testB);\n    a.join();\n    b.join();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt-creator"], "comments": [{"owner": {"reputation": 1051, "user_id": 7192989, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c1d41f45e6cacfb3d4195a9878880724?s=128&d=identicon&r=PG", "display_name": "Rinat Veliakhmedov", "link": "https://stackoverflow.com/users/7192989/rinat-veliakhmedov"}, "edited": false, "score": 1, "creation_date": 1495034235, "post_id": 44028575, "comment_id": 75084098, "body": "Because your kit uses msvc2015 and you have msvc2017?"}, {"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 1, "creation_date": 1495035220, "post_id": 44028575, "comment_id": 75084841, "body": "Yeah, their numbering is a constant source of a confusion. &quot;Visual studio 2015&quot; is also knows as VS v14. &quot;Visual Studio 2017&quot; is VS v15. Try to modify Visual Studio 2017 installation to include &quot;VS 2015.3 v140 toolset&quot;. If that doesn&#39;t help, then you&#39;ll need to install VS 2015."}], "owner": {"reputation": 337, "user_id": 1496491, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/9f97415bb9b99a4df0ca6ae419e9b106?s=128&d=identicon&r=PG", "display_name": "user1496491", "link": "https://stackoverflow.com/users/1496491/user1496491"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 426, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1527439010, "creation_date": 1495033516, "last_edit_date": 1527439010, "question_id": 44028575, "link": "https://stackoverflow.com/questions/44028575/no-compiler-set-in-kit", "title": "No compiler set in kit", "body": "<p>I want to use <code>QT 5.8.0 MSVC2015 32bit kit</code>. But QTCreator says that it has no compiler. But as it says on Compilers tab, it has <code>Microsoft Visual C++ Compiler 15.0 (x86)</code> When I try to set this compiler manually to the kit, it just won't let me do it. I keep receiving error message </p>\n\n<pre><code>Error while building/deploying project EyeRec (kit: Desktop Qt 5.7.1 MSVC2015 32bit2)\nWhen executing step \"qmake\"\n</code></pre>\n\n<p>I have Visual Studio 2017 installed, but still I don't know why this error appears. I'm really stuck with this.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 1, "creation_date": 1495033212, "post_id": 44028351, "comment_id": 75083316, "body": "You should verify that <code>title</code> is found and <code>pos</code> is valid, at least."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495033356, "post_id": 44028351, "comment_id": 75083424, "body": "What does your debugger say?  What happens if you reduce this to just <code>setTitle</code> and the call that uses <code>var2</code>?  (Which will make the code easier to reason about)."}, {"owner": {"reputation": 1, "user_id": 4865501, "user_type": "registered", "profile_image": "https://graph.facebook.com/937077882979375/picture?type=large", "display_name": "Alex Racho", "link": "https://stackoverflow.com/users/4865501/alex-racho"}, "edited": false, "score": 0, "creation_date": 1495033585, "post_id": 44028351, "comment_id": 75083594, "body": "Found the error thanks hyde. The stuff you said were not the errors but it made me realise what the error was :D"}], "owner": {"reputation": 1, "user_id": 4865501, "user_type": "registered", "profile_image": "https://graph.facebook.com/937077882979375/picture?type=large", "display_name": "Alex Racho", "link": "https://stackoverflow.com/users/4865501/alex-racho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495033235, "creation_date": 1495032936, "last_edit_date": 1495033235, "question_id": 44028351, "link": "https://stackoverflow.com/questions/44028351/debug-error-abort-has-been-called-qt", "title": "Debug error abort() has been called Qt", "body": "<p>When adding this code I get the debug error. This function is called from a Dialog class if you need to see that code too I'll post it, but what I do there is convert QString to strings and int's and then call the function.</p>\n\n<pre><code>void MediaHandler::changeMedia(std::string title, std::string des, int publishYear,\n                     int rating, std::string var1, int var2)\n{\n    int pos = this-&gt;find(title);\n\n    Book *aBookPtr = dynamic_cast&lt;Book*&gt;(this-&gt;medias[pos]);\n    Movie *aMoviePtr = dynamic_cast&lt;Movie*&gt;(this-&gt;medias[pos]);\n    TvSeries *aTvSeriesPtr = dynamic_cast&lt;TvSeries*&gt;(this-&gt;medias[pos]);\n\n    if(aBookPtr != nullptr)\n    {\n        aBookPtr-&gt;setTitle(title);\n        aBookPtr-&gt;setDes(des);\n        aBookPtr-&gt;setPublishYear(publishYear);\n        aBookPtr-&gt;setRating(rating);\n        aBookPtr-&gt;setAuthor(var1);\n        aBookPtr-&gt;setNrOfPages(var2);\n    }\n    else if(aMoviePtr != nullptr)\n    {\n        aMoviePtr-&gt;setTitle(title);\n        aMoviePtr-&gt;setDes(des);\n        aMoviePtr-&gt;setPublishYear(publishYear);\n        aMoviePtr-&gt;setRating(rating);\n        aMoviePtr-&gt;setMainActor(var1);\n        aMoviePtr-&gt;setMovieLength(var2);\n    }\n    else if(aMoviePtr != nullptr)\n    {\n        aTvSeriesPtr-&gt;setTitle(title);\n        aTvSeriesPtr-&gt;setDes(des);\n        aTvSeriesPtr-&gt;setPublishYear(publishYear);\n        aTvSeriesPtr-&gt;setRating(rating);\n        aTvSeriesPtr-&gt;setMainActor(var1);\n        aTvSeriesPtr-&gt;setNrOfEpisodes(var2);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "opengl", "shadow-mapping"], "comments": [{"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 1, "creation_date": 1495033226, "post_id": 44028340, "comment_id": 75083331, "body": "In which space (world, view, NDC) is the position of the light? How do you use the light? Please, provide a minimal code."}, {"owner": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1495035708, "post_id": 44028340, "comment_id": 75085170, "body": "Digging in that dense code I see two suspiciously similar shader in-out vars: <code>fragPosLightSpace</code> and <code>FragPosLightSpace</code> Letter case matters."}, {"owner": {"reputation": 327, "user_id": 5288242, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d195354b6eadb7d66d37e50dfc983324?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/5288242/mohamed"}, "reply_to_user": {"reputation": 6058, "user_id": 3871028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfbe44ff5c56628e85683c8918602c96?s=128&d=identicon&r=PG&f=1", "display_name": "Ripi2", "link": "https://stackoverflow.com/users/3871028/ripi2"}, "edited": false, "score": 0, "creation_date": 1495037595, "post_id": 44028340, "comment_id": 75086497, "body": "Sorry gentlemen, i found the bug it was in the vertex shader, i was multiply the FragPos uniform by the view matrix, the correct is in edit"}], "owner": {"reputation": 327, "user_id": 5288242, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d195354b6eadb7d66d37e50dfc983324?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed", "link": "https://stackoverflow.com/users/5288242/mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495037691, "creation_date": 1495032890, "last_edit_date": 1495037691, "question_id": 44028340, "link": "https://stackoverflow.com/questions/44028340/opengl-shadowmap-set-correct-matrices", "title": "OpenGL ShadowMap set correct matrices", "body": "<p>I use vector as light position say (0.0f, 0.0f, 5.0f) and an object positioned at (0.0f, 0.0f, -10.0f) and a plane.</p>\n\n<pre><code>lightSpaceProjection = glm::ortho(-10.0f, 10.0f, -10.0f, 10.0f, 1.0f, 300.0f);\nlightSpaceView= glm::lookAt(lightPosition, glm::vec3(0.0f), glm::vec3(0.0f, 1.0f, 0.0f));\nlightSpaceMatrix = lightSpaceProjection * lightSpaceView;\n</code></pre>\n\n<p>I get a shadow moving with the camera everywhere, I want to know how to update the shadow map to render the right space shadow where the camera looks at.</p>\n\n<p>I calculate the light space matrix as shown to send it to the vertex shader to render the shadow map from the light view, then send it again to the normal vertex shader to calculate which fragment is in shadow,</p>\n\n<p>the light definition</p>\n\n<pre><code>DirectLight sun;\nsun.direction = glm::vec3(0.0f, 10.0f, 5.0f);\nsun.lightSpaceProjection = glm::ortho(-10.0f, 10.0f, -10.0f, 10.0f, 1.0f, 300.0f);\nsun.lightSpaceView= glm::lookAt(sun.direction, glm::vec3(0.0f), glm::vec3(0.0f, 1.0f, 0.0f));\nscene.addLight(\"sun\", sun);\n</code></pre>\n\n<p>this is the render code</p>\n\n<pre><code>    DirectLight&amp; sun = dynamic_cast&lt;DirectLight&amp;&gt;(this-&gt;getLight(\"sun\", LIGHTTYPE_DIRECT));\n    glm::mat4 lightSpaceMatrix = (sun.lightSpaceProjection * sun.lightSpaceView);\n    glViewport(0, 0, SHADOW_WIDTH, SHADOW_HEIGHT);\n    glBindFramebuffer(GL_FRAMEBUFFER, depthMapFBO);\n    glClear(GL_DEPTH_BUFFER_BIT);\n    //glCullFace(GL_FRONT);\n\n    typedef std::map&lt;std::string, Model&gt;::iterator model_it;\n    depthShader.use();\n    glUniformMatrix4fv(glGetUniformLocation(depthShader.getProgramID(), \"lightSpaceMatrix\"), 1, GL_FALSE, glm::value_ptr(lightSpaceMatrix));\n    for (model_it it = phongModels.begin(); it != phongModels.end(); it++) {\n        ((Model&amp;) it-&gt;second).drawDepth(depthShader);\n    }\n    //glCullFace(GL_BACK);\n    glBindFramebuffer(GL_FRAMEBUFFER, 0);\n    // draw normal\n    glViewport(0, 0, WIDTH, HEIGHT);\n    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);\n    typedef std::map&lt;std::string, Model&gt;::iterator model_it;\n    phongShader.use();\n    glUniformMatrix4fv(glGetUniformLocation(phongShader.getProgramID(), \"lightSpaceMatrix\"), 1, GL_FALSE, glm::value_ptr(lightSpaceMatrix));\n    this-&gt;drawPhongLights(phongShader);\n    this-&gt;setViewUniforms(phongShader);\n    for (model_it it = phongModels.begin(); it != phongModels.end(); it++) {\n        glActiveTexture(GL_TEXTURE2);\n        glUniform1i(glGetUniformLocation(phongShader.getProgramID(), \"shadowMap\"), 2);\n        glBindTexture(GL_TEXTURE_2D, depthMap);\n        ((Model&amp;) it-&gt;second).drawPhong(phongShader, this-&gt;defCamera);\n    }\n</code></pre>\n\n<p>the depth vertex shader is</p>\n\n<pre><code>#version 330 core\n\nlayout (location = 0) in vec3 position;\nuniform mat4 lightSpaceMatrix;\nuniform mat4 model;\n\nvoid main(){\n    gl_Position = lightSpaceMatrix * model * vec4(position, 1.0f);\n}\n</code></pre>\n\n<p>and the normal vertex shader is </p>\n\n<pre><code>#version 330 core\nlayout (location = 0) in vec3 position;\nlayout (location = 2) in vec2 texCoord;\nlayout (location = 1) in vec3 normal;\n\nout vec2 TexCoords;\nout vec3 Normal;\nout vec3 FragPos;\nout vec3 LightPos;\nout vec4 FragPosLightSpace;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\nuniform vec3 lightPos;\nuniform mat4 lightSpaceMatrix;\n\nvoid main()\n{\n    gl_Position = projection * view * model * vec4(position, 1.0f);     \n    TexCoords = vec2(texCoord.s,1.0-texCoord.t);\n    Normal=normal;\n    FragPos = vec3(view * model * vec4(position, 1.0f));\n    LightPos = vec3(view * vec4(lightPos, 1.0));\n    FragPosLightSpace = lightSpaceMatrix * vec4(FragPos, 1.0);\n}\n</code></pre>\n\n<p>and in fragment shader i calculate the shadow by this function</p>\n\n<pre><code>float directShadowCalculation(vec4 fragPosLightSpace,float bias){\n    vec3 projCoords = fragPosLightSpace.xyz / fragPosLightSpace.w;\n    projCoords = projCoords * 0.5 + 0.5;\n    float closestDepth = vec3(texture(shadowMap, projCoords.xy)).r;\n    float currentDepth = projCoords.z;\n    float shadow = 0.0;\n    vec2 texelSize = 1.0 / textureSize(shadowMap, 0);\n    for(int x = -1; x &lt;= 1; ++x){\n        for(int y = -1; y &lt;= 1; ++y){\n            float pcfDepth = texture(shadowMap, projCoords.xy + vec2(x, y) * texelSize).r; \n            shadow += currentDepth - bias &gt; pcfDepth  ? 1.0 : 0.0;        \n        }    \n    }\n    shadow /= 9.0;\n    if(projCoords.z &gt; 1.0)\n        shadow = 0.0;    \n    return shadow;\n    }\n</code></pre>\n\n<p>then apply the color by this one</p>\n\n<pre><code>vec3 calcDirectLight(DirectLight light){\n    vec3 color = vec3(texture(mat_diffuse, TexCoords));\n\n    vec3 norm = normalize(Normal);\n    vec3 lightDir = normalize( light.direction  - FragPos);\n    float diff = max(dot(norm, lightDir), 0.0);\n    vec3 diffuse = light.diffuse * diff ;\n\n    vec3 viewDir = normalize(viewPos - FragPos);\n    vec3 reflectDir = reflect(-lightDir, norm);\n\n    float spec =0.0;\n    if(blinn){\n        vec3 halfwayDir = normalize(lightDir + viewDir);\n        spec = pow(max(dot(norm, halfwayDir), 0.0), 16.0);\n    }\n    else{\n        vec3 reflectDir = reflect(-lightDir, norm);\n        spec = pow(max(dot(viewDir, reflectDir), 0.0), 8.0);\n    }\n\n    //float spec = pow(max(dot(viewDir, reflectDir), 0.0), shininess);\n    vec3 specular = spec * light.specular;\n    float bias = max(0.05 * (1.0 - dot(norm, lightDir)), 0.005);\n    float shadow = directShadowCalculation(FragPosLightSpace,bias);     \n    vec3 result =light.intensity* (light.ambient+ ((1.0 - shadow) * (diffuse + specular)))*color;\n    return result;\n}\n</code></pre>\n\n<p>i don't know how to update the light space frustum with camera view</p>\n\n<p>Solution:\nthe bug was in the vertex shader, this is the correct one:</p>\n\n<pre><code>#version 330 core\nlayout (location = 0) in vec3 position;\nlayout (location = 2) in vec2 texCoord;\nlayout (location = 1) in vec3 normal;\n\nout vec2 TexCoords;\nout vec3 Normal;\nout vec3 FragPos;\nout vec4 FragPosLightSpace;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\nuniform vec3 lightPos;\nuniform mat4 lightSpaceMatrix;\n\nvoid main()\n{\n    gl_Position = projection * view * model * vec4(position, 1.0f);     \n    TexCoords = vec2(texCoord.s,1.0-texCoord.t);\n    Normal=transpose(inverse(mat3(model))) * normal;;\n    FragPos = vec3( model * vec4(position, 1.0f));\n    FragPosLightSpace = lightSpaceMatrix * vec4(FragPos, 1.0);\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "gcc", "visual-c++", "clang"], "comments": [{"owner": {"reputation": 1637, "user_id": 6909048, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af2db37ccd50ab0fb72ce3532577b50b?s=128&d=identicon&r=PG", "display_name": "Andrey Turkin", "link": "https://stackoverflow.com/users/6909048/andrey-turkin"}, "edited": false, "score": 4, "creation_date": 1495032884, "post_id": 44028261, "comment_id": 75083025, "body": "I suspect you are seeing ADL in action"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7881131"}, "edited": false, "score": 3, "creation_date": 1495032893, "post_id": 44028261, "comment_id": 75083036, "body": "<code>using size_t = unsigned long long;</code> Why? Why? At least do something like <code>using size_t = decltype(sizeof(int));</code>, or better yet, include <code>&lt;cstddef&gt;</code>."}, {"owner": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "edited": false, "score": 0, "creation_date": 1495033053, "post_id": 44028261, "comment_id": 75083186, "body": "it&#39;s just some quick &amp; dirty code sample i put together to show what the bug actually is"}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 1, "creation_date": 1495033139, "post_id": 44028261, "comment_id": 75083251, "body": "As Andrey says, this is <a href=\"http://en.cppreference.com/w/cpp/language/adl\" rel=\"nofollow noreferrer\">argument-dependent lookup</a>, not a bug."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1495033153, "post_id": 44028261, "comment_id": 75083265, "body": "pretty sure using <code>bug::detail::visit_stop</code> brings <code>bud::detail::visit_detail</code> into scope as the argument is also inside the same namespace."}, {"owner": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "edited": false, "score": 0, "creation_date": 1495033423, "post_id": 44028261, "comment_id": 75083466, "body": "if i remove the bug::detail::visit_stop argument from the function call in main it still compiles"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1495033770, "post_id": 44028261, "comment_id": 75083724, "body": "<a href=\"http://rextester.com/HHYSR4399\" rel=\"nofollow noreferrer\">No it doesn&#39;t</a>"}, {"owner": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1495036945, "post_id": 44028261, "comment_id": 75086078, "body": "@n.m. it doesn&#39;t compile with vc++ 19.10.25019 for x86"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1496161485, "post_id": 44028261, "comment_id": 75542827, "body": "Please improve your question title. At the moment it&#39;s completely useless."}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "edited": false, "score": 0, "creation_date": 1495033524, "post_id": 44028553, "comment_id": 75083537, "body": "just updated the post, &quot;visit_detail(vis, arg)&quot; in &quot;main&quot; also works with msvc"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "edited": false, "score": 0, "creation_date": 1495033731, "post_id": 44028553, "comment_id": 75083697, "body": "@Zeldhoron Just tested it on gcc.godbolt.com and both GCC and Clang reject the second line."}, {"owner": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "edited": false, "score": 0, "creation_date": 1495033757, "post_id": 44028553, "comment_id": 75083712, "body": "yeah, also tested it with them, same, so MSVC bug"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "edited": false, "score": 0, "creation_date": 1495034294, "post_id": 44028553, "comment_id": 75084142, "body": "@Zeldhoron Wjhat MSVS are you using?  It fails to compile for me."}, {"owner": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "edited": false, "score": 0, "creation_date": 1495034666, "post_id": 44028553, "comment_id": 75084403, "body": "idk, i&#39;m using the one packed with the latest visual studio 2017 version, currently trying to find an actual version number for the vc++ compiler"}, {"owner": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1495034878, "post_id": 44028553, "comment_id": 75084576, "body": "@NathanOliver think i found it, the visual studio 2017 developer command prompt gives me &quot;v15.0.26430.6&quot; as a version string"}, {"owner": {"reputation": 13070, "user_id": 1639256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8KYbp.jpg?s=128&g=1", "display_name": "Oktalist", "link": "https://stackoverflow.com/users/1639256/oktalist"}, "edited": false, "score": 0, "creation_date": 1495034947, "post_id": 44028553, "comment_id": 75084642, "body": "Enter <code>cl</code> in the developer command prompt to get the compiler version."}, {"owner": {"reputation": 811, "user_id": 1273178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f9c4b75eae227c2f8190e963367a4f9?s=128&d=identicon&r=PG", "display_name": "Rastaban", "link": "https://stackoverflow.com/users/1273178/rastaban"}, "edited": false, "score": 0, "creation_date": 1495576500, "post_id": 44028553, "comment_id": 75309030, "body": "You can past the example into <a href=\"http://webcompiler.cloudapp.net/\" rel=\"nofollow noreferrer\">webcompiler.cloudapp.net</a> to see the failure on the latest version of the compiler.  I think the project settings can override the compiler that is used, so you may be using an older version of the compiler than what the developer command prompt has in the path."}], "tags": [], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "is_accepted": true, "score": 5, "last_activity_date": 1495033453, "creation_date": 1495033453, "answer_id": 44028553, "question_id": 44028261, "link": "https://stackoverflow.com/questions/44028261/c-msvc-gcc-clang-compilers-bug/44028553#44028553", "title": "C++ MSVC/GCC/Clang compilers bug", "body": "<p>What you're experiencing is a C++ feature called <a href=\"http://en.cppreference.com/w/cpp/language/adl\" rel=\"noreferrer\"><strong>argument-dependent lookup</strong></a>, or ADL for short. Basically, if you invoke a function <code>f</code> without explicitly qualifying it, the compiler will look for <code>f</code> in the namespaces of the arguments that you've passed.</p>\n\n<p>This is what allows <code>operator&lt;&lt;</code> for IO streams to work without requiring qualifications:</p>\n\n<pre><code>std::cout &lt;&lt; 100; // finds std::operator&lt;&lt;(std::ostream&amp;, int);\n</code></pre>\n\n<hr>\n\n<p>In your particular case, the argument <code>bug::detail::visit_stop</code> is making the compiler look for <code>visit_detail</code> inside the <code>bug::detail</code> namespace.</p>\n"}], "owner": {"reputation": 69, "user_id": 6613821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/115b980de6c8c5bd7652011eb8a307ee?s=128&d=identicon&r=PG&f=1", "display_name": "Zeldhoron", "link": "https://stackoverflow.com/users/6613821/zeldhoron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 44028553, "answer_count": 1, "score": 2, "last_activity_date": 1495033810, "creation_date": 1495032693, "last_edit_date": 1495033810, "question_id": 44028261, "link": "https://stackoverflow.com/questions/44028261/c-msvc-gcc-clang-compilers-bug", "title": "C++ MSVC/GCC/Clang compilers bug", "body": "<p>I discovered what appears to be a mind breaking bug in the 3 compilers from the title. The following code compiles with the latest versions of all three compilers using both the c++11 and c++14 standards, even though it really shouldn't as the \"visit_detail\" function is not visible to \"main\".</p>\n\n<p>Correction: I was stupid, not actually a bug in GCC/Clang, seems to be a bug in my MSVC version tho.</p>\n\n<pre><code>#include &lt;utility&gt;\n#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\n\n\nnamespace bug\n{\n    using namespace std;\n    using size_t = unsigned long long;\n\n\n\n    namespace detail\n    {\n        struct visit_stop_t {};\n        constexpr bug::detail::visit_stop_t visit_stop = bug::detail::visit_stop_t();\n\n\n\n        template &lt;typename Visitor, typename First, typename... Tail&gt;\n        void visit_detail(Visitor&amp;&amp; vis, First&amp;&amp; first, Tail&amp;&amp;... tail)\n        {\n            // code, not necessairy to recreate bug\n        }\n    }\n\n\n    template &lt;typename Visitor, typename... Variants&gt;\n    void visit(Visitor&amp;&amp; vis, Variants&amp;&amp;... vars)\n    {\n        bug::detail::visit_detail(bug::forward&lt;Visitor&gt;(vis), bug::forward&lt;Variants&gt;(vars)..., bug::detail::visit_stop);\n    }\n\n    template &lt;typename Visitor&gt;\n    void visit(Visitor&amp;&amp; vis) = delete;\n}\n\nusing namespace bug;\n\n\n\n// dummy variant, used to test the code\n// code is never actually used in this version\ntemplate &lt;typename... T&gt;\nstruct variant\n{\n    static constexpr bug::size_t size() noexcept { return sizeof...(T); }\n\n\n    constexpr variant(int) noexcept {}\n\n    template &lt;bug::size_t I&gt;\n    constexpr int get() const noexcept { return 5; }\n};\n\n// simple example visitor\n// code is never actually used in this version\nstruct visitor\n{\n    int operator()(int x) { std::cout &lt;&lt; x &lt;&lt; std::endl; return x; }\n    double operator()(double x) { std::cout &lt;&lt; x &lt;&lt; std::endl; return x; }\n};\n\n\n\nint main()\n{\n    visitor vis;\n    variant&lt;int, double&gt; var = 5;\n\n    // where the trouble is:\n    visit_detail(vis, var, bug::detail::visit_stop);  // ADL: http://en.cppreference.com/w/cpp/language/adl\n    visit_detail(vis, var);  // fails with GCC/Clang, no error with MSVC =&gt; MSVC bug maybe\n\n\n    std::cout &lt;&lt; \"Press enter to continue . . . \";\n    std::getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "smart-pointers", "unique-ptr"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1495032772, "post_id": 44028234, "comment_id": 75082957, "body": "You might as well use <code>list&lt;int*&gt;</code> at this point. Unless you are actually more interested by the state of a <code>unique_ptr</code> than by the object it&#39;s pointing to."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1495032792, "post_id": 44028234, "comment_id": 75082966, "body": "To me it sounds like owner should have a <code>std::shared_ptr</code> and <code>SomeContainer</code> should hold <code>std::weak_ptr</code>s to those <code>shared_ptr</code>s.  I&#39;m not sure if you can get them to be <code>const</code> though."}, {"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 1, "creation_date": 1495032823, "post_id": 44028234, "comment_id": 75082984, "body": "Your lists contains pointers to unique_ptrs... I don&#39;t think that makes much sense. unique_ptr is about ownership. If SomeContainer doesn&#39;t own it, better use a const* instead, not a unique_ptr. If you want SomeContainer to share ownership with the original owner, better use shared_ptr"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 2, "creation_date": 1495034265, "post_id": 44028234, "comment_id": 75084120, "body": "Why does <code>Owner</code> use a <code>unique_ptr</code>? <code>struct Owner{int i;};</code> already expresses that <code>Owner</code> owns the <code>int</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1495035781, "post_id": 44028392, "comment_id": 75085232, "body": "In the second case, why own the <code>int</code> using a <code>unique_ptr</code> why not just an int?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 3, "creation_date": 1495035827, "post_id": 44028392, "comment_id": 75085266, "body": "In the first example, <code>Insert</code> should take a <code>shared_ptr</code> as input and then construct its own <code>weak_ptr</code> from it, eg: <code>void Insert( std::shared_ptr&lt;int&gt; borrowedUPtr ) { list.push_back( std::weak_ptr (borrowedUPtr) ); }</code>"}, {"owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495036503, "post_id": 44028392, "comment_id": 75085782, "body": "@RemyLebeau You&#39;re right. Thanks for pointing this, I changed it."}, {"owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 1, "creation_date": 1495036505, "post_id": 44028392, "comment_id": 75085783, "body": "@ChrisDrew I did so because he expressed the need for std::unique_ptr. There could be a reason behind this that we are not aware. It could very be a simplified example."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495036573, "post_id": 44028392, "comment_id": 75085831, "body": "@RemyLebeau I think the conversion to a <code>weak_ptr</code> is unnecessary. You can <code>push_back</code> a <code>shared_ptr</code> onto a list of <code>weak_ptr</code> fine."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1495036936, "post_id": 44028392, "comment_id": 75086072, "body": "@ChrisDrew doing so still constructs a <code>weak_ptr</code> object. <code>weak_ptr</code> has a constructor that takes a <code>shared_ptr</code> as input."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495036973, "post_id": 44028392, "comment_id": 75086098, "body": "@RemyLebeau Sure, it achieves exactly the same, just less typing."}, {"owner": {"reputation": 750, "user_id": 3009827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BrRHw.png?s=128&g=1", "display_name": "SvinSimpe", "link": "https://stackoverflow.com/users/3009827/svinsimpe"}, "edited": false, "score": 0, "creation_date": 1495045058, "post_id": 44028392, "comment_id": 75090841, "body": "Your second solution is actually what my first gut feeling approach was. I was however discouraged from it after reading some opinions on &quot;multiple objects accessing the pointee of an <code>unique_ptr</code>&quot; being bad design and &quot;never use <code>.get()</code> on a smart pointer. Sometimes one can easily be swayed by other programmers with more seniority in terms of the SO reward system and this is especially true for me, being a Padawan. +1 for two sound solutions."}], "tags": [], "owner": {"reputation": 1019, "user_id": 816855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21cdf26bdaf7452f2ace9cd1cb63b0e0?s=128&d=identicon&r=PG", "display_name": "Rosme", "link": "https://stackoverflow.com/users/816855/rosme"}, "is_accepted": true, "score": 4, "last_activity_date": 1495036343, "last_edit_date": 1495036343, "creation_date": 1495033030, "answer_id": 44028392, "question_id": 44028234, "link": "https://stackoverflow.com/questions/44028234/multiple-instances-holds-a-reference-to-a-unique-ptr/44028392#44028392", "title": "Multiple instances holds a reference to a unique_ptr", "body": "<p>I see two possible solutions.</p>\n\n<p>One of them could be that your owner has a <code>std::shared_ptr</code> and <code>SomeContainer</code> keep a list of <code>std::weak_ptr</code>, something like this:</p>\n\n<pre><code>struct Owner\n{\n    std::shared_ptr&lt;int&gt; uPtr;\n};\n\nstruct SomeContainer\n{\n    list&lt;std::weak_ptr&lt;int&gt;&gt; uPtrList;\n\n    void Insert( std::shared_ptr&lt;int&gt; borrowedUPtr )\n    {\n        list.push_back( std::weak_ptr&lt;int&gt;(borrowedUPtr) );\n    }\n    //...\n};\n</code></pre>\n\n<p>Another one could be that <code>SomeContainer</code> keep a list of const raw pointer obtained through <code>std::unique_ptr::get</code>. Since Owner has the ownership, if you can guarantee that <code>Owner</code> will live as long or longer than <code>SomeContainer</code>, there is nothing wrong with such strategy. Personnaly, I prefer this one:</p>\n\n<pre><code>struct Owner\n{\n    unique_ptr&lt;int&gt; uPtr;\n};\n\nstruct SomeContainer\n{\n    list&lt;const int*&gt; uPtrList;\n\n    //Could also be directly passed as a const int*\n    void Insert( const unique_ptr&lt;int&gt;&amp; borrowedUPtr )\n    {\n        list.push_back( borrwedUPtr.get() );\n    }\n    //...\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 750, "user_id": 3009827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BrRHw.png?s=128&g=1", "display_name": "SvinSimpe", "link": "https://stackoverflow.com/users/3009827/svinsimpe"}, "edited": false, "score": 1, "creation_date": 1495045077, "post_id": 44029495, "comment_id": 75090852, "body": "I wanted to expose myself to smart pointers more and this I an isolated project with the sole purpose of learning. Perhaps it was a poor choice to use <code>int</code> instead of <code>&lt;T&gt;</code> but this was highly simplified for the sake of SO. This need to be a pointer because the type isn&#39;t known at compile time. I&#39;ve accepted another answer but I will give you a +1 for giving a sound alternative solution and for contributing to the discussion as whole."}], "tags": [], "owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "is_accepted": false, "score": 2, "last_activity_date": 1495036080, "creation_date": 1495036080, "answer_id": 44029495, "question_id": 44028234, "link": "https://stackoverflow.com/questions/44028234/multiple-instances-holds-a-reference-to-a-unique-ptr/44029495#44029495", "title": "Multiple instances holds a reference to a unique_ptr", "body": "<p>It is not clear why you need to use smart pointers here at all. A simple member variable expresses ownership just fine:</p>\n\n<pre><code>struct Owner\n{\n    int value;\n};\n</code></pre>\n\n<p>And then observers can store a raw-pointer:</p>\n\n<pre><code>struct SomeContainer\n{\n    list&lt;const int*&gt; ptrList;\n\n    void Insert( const int&amp; borrowedValue)\n    {\n        ptrList.push_back( &amp;borrowedValue);\n    }\n\n    void DoSomething()\n    {\n        for( const auto&amp; ptr : ptrList)\n            // Perform read ops\n    }\n};\n</code></pre>\n\n<p>This is assuming you can be confident that owner will stay alive whilst the observers wish to observe. If you can't be confident of that then <code>unique_ptr</code> will not help you and you will need some something like <code>weak_ptr</code> with <code>shared_ptr</code>.</p>\n"}], "owner": {"reputation": 750, "user_id": 3009827, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BrRHw.png?s=128&g=1", "display_name": "SvinSimpe", "link": "https://stackoverflow.com/users/3009827/svinsimpe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 956, "favorite_count": 2, "accepted_answer_id": 44028392, "answer_count": 2, "score": 3, "last_activity_date": 1495039629, "creation_date": 1495032604, "last_edit_date": 1495039629, "question_id": 44028234, "link": "https://stackoverflow.com/questions/44028234/multiple-instances-holds-a-reference-to-a-unique-ptr", "title": "Multiple instances holds a reference to a unique_ptr", "body": "<p>I'm moving with the times and thought I should start a new project with the goal to use and expose myself to <strong>smart pointers</strong> more. I'm thinking of a large pool of <code>unique_ptr</code>s storing collision components. These components will be passed by const ref to a quad tree that internally perform read-only ops on the ptrs.<br>\nI've written a simplified example to reflect the intentions of my implementation.</p>\n\n<pre><code>struct Owner\n{\n    unique_ptr&lt;int&gt; uPtr;\n};\n\nstruct SomeContainer\n{\n    list&lt;const unique_ptr&lt;int&gt;*&gt; uPtrList;\n\n    void Insert( const unique_ptr&lt;int&gt;&amp; borrowedUPtr )\n    {\n        list.push_back( &amp;borrowedUPtr );\n    }\n\n    void DoSomething()\n    {\n        for( const auto&amp; ptr : uPtrList )\n            // Perform read ops\n    }\n};\n</code></pre>\n\n<p>These are my intentions:\n<code>Owner</code> owns the <code>unique_ptr</code> and thereby controls its lifetime. \n<code>SomeContainer</code> will store a const reference to the pointer since it's not permitted to neither reset nor modify the pointer in any way. <br> \nIs this a viable approach or am I disturbing the force?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 3, "creation_date": 1495032425, "post_id": 44028104, "comment_id": 75082702, "body": "<a href=\"http://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/atomic/atomic</a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495032946, "post_id": 44028277, "comment_id": 75083086, "body": "Well, make the variable be of type <code>std::atomic_int_32_t</code>, and then use <code>+=</code> on it to do an atomic add.  Note that this is a change from the <code>OSAtomicAdd32</code> model.  With that, you could do an atomic operation on any (suitably aligned) variable.  With C++ atomics, you can <i>only</i> do atomic operations on <code>atomic</code> variables - but you are guaranteed that <i>all</i> operations on such variables will be atomic."}], "tags": [], "owner": {"reputation": 2103, "user_id": 1865694, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bP5UU.jpg?s=128&g=1", "display_name": "Alex Zywicki", "link": "https://stackoverflow.com/users/1865694/alex-zywicki"}, "is_accepted": true, "score": 2, "last_activity_date": 1495032740, "creation_date": 1495032740, "answer_id": 44028277, "question_id": 44028104, "link": "https://stackoverflow.com/questions/44028104/osatomicadd32-variant-in-c11/44028277#44028277", "title": "OSAtomicAdd32 variant in C++11", "body": "<p>The C++11 way to go would be to use <code>std::atomic_int_32_t</code> or <code>std::atomic_int</code> (If <code>sizeof(int) == 4</code> on your system). These types can be included from the header <code>&lt;atomic&gt;</code> and the reference page for them can be found <a href=\"http://en.cppreference.com/w/cpp/atomic/atomic\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 2228, "user_id": 1708349, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/9f3eac41340547d9d27853a9abc66cb6?s=128&d=identicon&r=PG", "display_name": "benjist", "link": "https://stackoverflow.com/users/1708349/benjist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 44028277, "answer_count": 1, "score": 1, "last_activity_date": 1495032740, "creation_date": 1495032302, "last_edit_date": 1495032563, "question_id": 44028104, "link": "https://stackoverflow.com/questions/44028104/osatomicadd32-variant-in-c11", "title": "OSAtomicAdd32 variant in C++11", "body": "<p>I'm, looking for an alternative to <code>OSAtomicAdd32</code> since it's deprecated in the Apple headers. What is the C++11 variant of it?</p>\n"}, {"tags": ["c++", "boost"], "answers": [{"comments": [{"owner": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "edited": false, "score": 0, "creation_date": 1495033176, "post_id": 44028224, "comment_id": 75083278, "body": "Well I had linked using  &#39;target_link_libraries(mytarget  ${Boost_LIBRARIES})&#39;. I tried it your way and I still get same exact error."}], "tags": [], "owner": {"reputation": 151, "user_id": 6711868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6795bd0d9b47ea1fe928ce7653a2d65?s=128&d=identicon&r=PG", "display_name": "Jinsoo Heo", "link": "https://stackoverflow.com/users/6711868/jinsoo-heo"}, "is_accepted": false, "score": 0, "last_activity_date": 1495032577, "creation_date": 1495032577, "answer_id": 44028224, "question_id": 44028041, "link": "https://stackoverflow.com/questions/44028041/adding-boost-filesystem-hpp-doesnt-compile/44028224#44028224", "title": "adding boost filesystem.hpp doesn&#39;t compile", "body": "<p>You should add target link libraries in <code>cmake</code>.</p>\n\n<pre><code>find_package(Boost 1.63.0 COMPONENTS program_options system filesystem thread \nREQUIRED)\n\ntarget_link_libraries(mytarget \n  ${Boost_FILESYSTEM_LIBRARY}\n  ${Boost_SYSTEM_LIBRARY}\n)\n</code></pre>\n"}], "owner": {"reputation": 3990, "user_id": 270589, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/11cd12c93e05654e0857df948183514e?s=128&d=identicon&r=PG", "display_name": "Behrooz Karjoo", "link": "https://stackoverflow.com/users/270589/behrooz-karjoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495032938, "creation_date": 1495032130, "last_edit_date": 1495032938, "question_id": 44028041, "link": "https://stackoverflow.com/questions/44028041/adding-boost-filesystem-hpp-doesnt-compile", "title": "adding boost filesystem.hpp doesn&#39;t compile", "body": "<p>I have the filesystem in my cmake: </p>\n\n<pre><code>find_package(Boost 1.63.0 COMPONENTS program_options system filesystem thread REQUIRED)\n</code></pre>\n\n<p>When I compile it says <code>Found the following Boost libraries</code> and <code>filesystem</code> is included. </p>\n\n<p>Everything compiles fine. However once I try to include: </p>\n\n<pre><code>#include &lt;boost/filesystem.hpp&gt;\n</code></pre>\n\n<p>I get the following error. What's happening here? </p>\n\n<blockquote>\n<pre><code>CMakeFiles\\runBasicBrimusTests.dir/objects.a(boost_filesystem_check.cpp.obj):\nIn function `_static_initialization_and_destruction_0':\n C:/Users/b.karjoo/Documents/boost_1_63_0/boost/system/error_code.hpp:221:\nundefined reference to `boost::system::generic_category()'\nC:/Users/b.karjoo/Documents/boost_1_63_0/boost/system/error_code.hpp:222:\nundefined reference to `boost::system::generic_category()'\nC:/Users/b.karjoo/Documents/boost_1_63_0/boost/system/error_code.hpp:223:\nundefined reference to `boost::system::system_category()'\ncollect2.exe: error: ld returned 1 exit status\nBrimus-Test\\basic_tests\\CMakeFiles\\runBasicBrimusTests.dir\\build.make:910:\nrecipe for target 'Brimus-Test/basic_tests/runBasicBrimusTests.exe'\nfailed CMakeFiles\\Makefile2:293: recipe for target\n'Brimus-Test/basic_tests/CMakeFiles/runBasicBrimusTests.dir/all'\nfailed mingw32-make.exe[3]: ***\n[Brimus-Test/basic_tests/runBasicBrimusTests.exe] Error 1\nmingw32-make.exe[2]: ***\n[Brimus-Test/basic_tests/CMakeFiles/runBasicBrimusTests.dir/all] Error\n2 mingw32-make.exe[1]: ***\n[Brimus-Test/basic_tests/CMakeFiles/runBasicBrimusTests.dir/rule]\nError 2 CMakeFiles\\Makefile2:305: recipe for target\n'Brimus-Test/basic_tests/CMakeFiles/runBasicBrimusTests.dir/rule'\nfailed Makefile:169: recipe for target 'runBasicBrimusTests' failed\nmingw32-make.exe: *** [runBasicBrimusTests] Error 2\n</code></pre>\n</blockquote>\n"}, {"tags": ["c++", "function", "object"], "comments": [{"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 4, "creation_date": 1495032090, "post_id": 44027981, "comment_id": 75082407, "body": "<code>&lt;string.h&gt;</code> doesn&#39;t contain <code>std::string</code>."}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1495032130, "post_id": 44027981, "comment_id": 75082441, "body": "Please read a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282\">book</a> or at least the <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/to_string\" rel=\"nofollow noreferrer\">documentation</a> for the functionalities you use."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1495032278, "post_id": 44027981, "comment_id": 75082584, "body": "It&#39;s all about <a href=\"http://en.cppreference.com/w/cpp/language/functions\" rel=\"nofollow noreferrer\">functions</a> vs <a href=\"http://en.cppreference.com/w/cpp/language/member_functions\" rel=\"nofollow noreferrer\">member functions</a>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1495032911, "post_id": 44027981, "comment_id": 75083049, "body": "<code>to_string</code> is supposed to return a string from the number you passed, so it would be rather strange if you would first need a string instance before you can call it"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 3, "last_activity_date": 1495034593, "creation_date": 1495034593, "answer_id": 44028970, "question_id": 44027981, "link": "https://stackoverflow.com/questions/44027981/calling-function-in-string-h-file-without-object/44028970#44028970", "title": "Calling function in string.h file without object", "body": "<p>You're making this way more complicated than it needs to be.</p>\n\n<p><code>std::to_string</code> is a function. Just a function. It's taking an <code>int</code> and giving back a <code>std::string</code>.</p>\n\n<p>Here's another function:</p>\n\n<pre><code>void foo()\n{\n   // hello!\n}\n</code></pre>\n\n<p>You don't <em>need</em> to make functions be member functions. C++ isn't <em>just</em> an object-oriented language.</p>\n"}], "owner": {"reputation": 620, "user_id": 4960325, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/f5d19244d264cd7ca7a9749a51f6babb?s=128&d=identicon&r=PG&f=1", "display_name": "Pawandeep Singh", "link": "https://stackoverflow.com/users/4960325/pawandeep-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -8, "last_activity_date": 1495034593, "creation_date": 1495032010, "last_edit_date": 1495032432, "question_id": 44027981, "link": "https://stackoverflow.com/questions/44027981/calling-function-in-string-h-file-without-object", "title": "Calling function in string.h file without object", "body": "<pre><code>#include&lt;string.h&gt;\n\nint a = 2;\n\nstring str = to_string(a);\n</code></pre>\n\n<p>I  want to know that in C++ whenever we want to call a library function we use </p>\n\n<p><code>library_object.function_name()</code> notation. But here we are directly using <code>to_string()</code> function without the using object. So my question is why we are not calling to_string() function like</p>\n\n<p><code>string_object.to_string();</code></p>\n\n<p>Also please specify what's the difference between the calling function here with and without the object. </p>\n"}, {"tags": ["java", "c++", "jna"], "comments": [{"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "edited": false, "score": 0, "creation_date": 1495084259, "post_id": 44027920, "comment_id": 75104173, "body": "You can&#39;t pass primitive arrays to JNA, so you&#39;ll have to allocate some Java side memory for those double arrays.    I have no idea if that has any relation to your symptoms though!"}, {"owner": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "reply_to_user": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "edited": false, "score": 0, "creation_date": 1495092251, "post_id": 44027920, "comment_id": 75108306, "body": "@DanielWiddis Wait, really? <a href=\"https://github.com/cxcorp/lacuna/blob/6028902c4e51dc8e42ceaca8e6e5a2cad90dda84/lacuna/lacuna-core/src/main/java/cx/corp/lacuna/core/windows/TokenOwnerNameFinder.java#L77\" rel=\"nofollow noreferrer\">I&#39;ve used it successfully before</a>."}, {"owner": {"reputation": 5374, "user_id": 1161484, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/lg24v.png?s=128&g=1", "display_name": "Daniel Widdis", "link": "https://stackoverflow.com/users/1161484/daniel-widdis"}, "reply_to_user": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "edited": false, "score": 1, "creation_date": 1495093026, "post_id": 44027920, "comment_id": 75108827, "body": "@cubrr Gah.  I have avoided using that because of its temporary/scope nature but you&#39;re right, it  would work fine in this case."}], "answers": [{"tags": [], "owner": {"reputation": 9055, "user_id": 996081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83817dc1e83cf8ac372b21cd5f010bc4?s=128&d=identicon&r=PG&f=1", "display_name": "cbr", "link": "https://stackoverflow.com/users/996081/cbr"}, "is_accepted": true, "score": 1, "last_activity_date": 1495093906, "last_edit_date": 1495542384, "creation_date": 1495093494, "answer_id": 44041611, "question_id": 44027920, "link": "https://stackoverflow.com/questions/44027920/input-mismatch-jna/44041611#44041611", "title": "Input Mismatch JNA", "body": "<p>You're attempting to return <code>std::string</code> from a function which has C-linkage specified (<code>extern \"C\"</code>). I'm surprised that your compiler doesn't complain to you about this. When returning structs or classes by value, it's common for a compiler (of course, depending on the compiler and the ABI it uses) to generate code which essentially equals to the struct being passed to the caller as a pointer passed to the function as a parameter.</p>\n\n<p>Change the return type to <code>const char *</code>.</p>\n\n<pre><code>extern \"C\" const char *func(int, int, int, double *, double *);\n</code></pre>\n\n<p>You might also be interested in reading: <a href=\"https://stackoverflow.com/questions/4744656/functions-with-c-linkage-able-to-return-class-type\">Functions with C linkage able to return class type?</a></p>\n"}], "owner": {"reputation": 125, "user_id": 2559085, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/89d1690fecf6c0c88e9eb3c2a19fb948?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Ross", "link": "https://stackoverflow.com/users/2559085/mark-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 44041611, "answer_count": 1, "score": 0, "last_activity_date": 1495093906, "creation_date": 1495031859, "question_id": 44027920, "link": "https://stackoverflow.com/questions/44027920/input-mismatch-jna", "title": "Input Mismatch JNA", "body": "<p>In working with JNA, I've had a very odd issue appear.\nHere is my C++ code. -- Reduced for simplicity --</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nextern \"C\" std::string func(int, int, int, double*, double*);\n\nstd::string func(int a, int b, int c, double* data1, double* data2) {\n    std::cout &lt;&lt; a &lt;&lt; std::endl;\n    std::cout &lt;&lt; b &lt;&lt; std::endl;\n    std::cout &lt;&lt; c &lt;&lt; std::endl;\n    return \"Finished\";\n}\n</code></pre>\n\n<p>Here is the Java class:</p>\n\n<pre><code>class CLibOperator {\n    interface CLib extends Library {\n        CLib INSTANCE = \n            (CLib) Native.loadLibrary(\"libFile.so\", CLib.class);\n\n        String func(int a, int b, int c, double[] data1, double[] data2);\n    }\n\n    public static void main(String[] args) {\n        double[] d1 = {10,20,30};\n        double[] d2 = {111,222,333,444,555,666,777};\n        CLib.INSTANCE.func(1, 2, 3, d1, d2);\n    }\n}\n</code></pre>\n\n<p>The output of the C function, however, is:</p>\n\n<pre><code>2\n3\n3856103913\n</code></pre>\n\n<p>What I expected is:</p>\n\n<pre><code>1\n2\n3\n</code></pre>\n\n<p>It seems like the first argument is being completely ignored. Any thoughts on how to resolve this issue?</p>\n"}, {"tags": ["c++", "formatting", "uncrustify"], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 1797436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f329482d36437621152da5e12be288e?s=128&d=identicon&r=PG", "display_name": "CDanU", "link": "https://stackoverflow.com/users/1797436/cdanu"}, "is_accepted": false, "score": 0, "last_activity_date": 1495158414, "creation_date": 1495158414, "answer_id": 44060187, "question_id": 44027906, "link": "https://stackoverflow.com/questions/44027906/uncrustify-add-new-line-after-angle-bracket-in-multi-line-typedef-using-a-templ/44060187#44060187", "title": "Uncrustify: Add new line after angle bracket in multi line typedef using a template", "body": "<p>No, currently there are no similar options for templates.</p>\n\n<p>You can however open up a feature request or better yet, submit a PR for that at <a href=\"https://github.com/uncrustify/uncrustify\" rel=\"nofollow noreferrer\">https://github.com/uncrustify/uncrustify</a>.</p>\n"}], "owner": {"reputation": 341, "user_id": 1288118, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9c151980d04a0042e1124ccc2fd34c2?s=128&d=identicon&r=PG", "display_name": "Bernhardt Rogge", "link": "https://stackoverflow.com/users/1288118/bernhardt-rogge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1495158414, "creation_date": 1495031827, "last_edit_date": 1495540988, "question_id": 44027906, "link": "https://stackoverflow.com/questions/44027906/uncrustify-add-new-line-after-angle-bracket-in-multi-line-typedef-using-a-templ", "title": "Uncrustify: Add new line after angle bracket in multi line typedef using a template", "body": "<p>Using the Uncrustify tool I am looking for a rule to add a new line after an opening angle bracket if the opening and the closing angle bracket are not on the same line. In other words I would like to put a new line before the first argument of a C++ template if the line is getting to long (means > 140 columns in my case). </p>\n\n<p>There are comparable rules for this in Uncrustify for function definition/declaration/call. <a href=\"https://stackoverflow.com/a/42254773/1288118\">https://stackoverflow.com/a/42254773/1288118</a></p>\n\n<p>Is there any rule available in Uncrustify for this use case?</p>\n\n<p>Input</p>\n\n<pre><code>typedef ::foo::moon::extra::common::super::VeryLongClassName &lt; ::foo::moon::extra::common::super::ISuperNice ,::foo::moon::extra::common::super::NiceStoryAboutTheSea ,::foo::moon::extra::common::super::TheVeryLastParameter &gt;  AVeryLongNameForDemonstration;\n</code></pre>\n\n<p>Expected output</p>\n\n<pre><code>typedef ::foo::moon::extra::common::super::VeryLongClassName&lt;\n   ::foo::moon::extra::common::super::ISuperNice,\n   ::foo::moon::extra::common::super::NiceStoryAboutTheSea,\n   ::foo::moon::extra::common::super::TheVeryLastParameter&gt;  AVeryLongNameForDemonstration;\n</code></pre>\n"}, {"tags": ["c++", "polymorphism", "visitor-pattern"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495031945, "post_id": 44027893, "comment_id": 75082296, "body": "Templates are not needed here, instead you should learn about <code>virtual</code> member functions."}, {"owner": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495032352, "post_id": 44027893, "comment_id": 75082635, "body": "@Someprogrammerdude I edited the code to use virtual instead, but that still does not solve my problem"}], "answers": [{"comments": [{"owner": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "edited": false, "score": 0, "creation_date": 1495032972, "post_id": 44028346, "comment_id": 75083106, "body": "yep that did it"}], "tags": [], "owner": {"reputation": 8279, "user_id": 4759200, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/XqFYM.jpg?s=128&g=1", "display_name": "DAle", "link": "https://stackoverflow.com/users/4759200/dale"}, "is_accepted": true, "score": 2, "last_activity_date": 1495032909, "creation_date": 1495032909, "answer_id": 44028346, "question_id": 44027893, "link": "https://stackoverflow.com/questions/44027893/visitor-pattern-from-base-class/44028346#44028346", "title": "Visitor pattern from base class", "body": "<p>You should make <code>accept</code> virtual as well.</p>\n"}], "owner": {"reputation": 1454, "user_id": 3667450, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/738e0d1c296674d8e2846549dbe202ff?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/3667450/shane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 44028346, "answer_count": 1, "score": 1, "last_activity_date": 1495032909, "creation_date": 1495031791, "last_edit_date": 1495032323, "question_id": 44027893, "link": "https://stackoverflow.com/questions/44027893/visitor-pattern-from-base-class", "title": "Visitor pattern from base class", "body": "<p>I am trying to implement the visitor pattern in c++ <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Visitor_pattern</a></p>\n\n<p>How can I use this pattern when dealing with objects as their base class? I want the visitor to be able to parse the class hierarchy. In my specific case, not the example I give, I want to parse an array of objects into a json list where each object has both the parent class members and the specific subclass members. Is the visitor pattern not the correct approach here?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nclass Animal;\nclass Dog;\nclass Cat;\n\nclass Visitor {\npublic:\n    virtual void visit(Animal *a) = 0;\n    virtual void visit(Dog *d) = 0;\n    virtual void visit(Cat *c) = 0;\n};\n\nstruct Animal {\n    void accept(Visitor &amp;v) { v.visit(this); }\n    int a;\nprotected:\n     Animal(int an) : a(an) {}\n};\n\nstruct Dog : Animal {\n    Dog(int dn, int an) : Animal(an), d(dn) {}\n    void accept(Visitor &amp;v) { v.visit(this); }\n    int d;\n};\n\nstruct Cat : Animal {\n    Cat(int cn, int an) : Animal(an), c(cn) {}\n    void accept(Visitor &amp;v) { v.visit(this); }\n    int c;\n};\n\nstruct ConcreteVisitor : Visitor {\n    void visit(Animal *a) { \n        std::cout &lt;&lt; \"Animal&lt;\" &lt;&lt; a-&gt;a &lt;&lt; \"&gt;\"; \n    }\n\n    void visit(Dog *d) {\n        std::cout &lt;&lt; \"Dog&lt;\" &lt;&lt; d-&gt;d &lt;&lt; \", \"; \n        visit((Animal *)d); \n        std::cout &lt;&lt; \"&gt;\" &lt;&lt; std::endl;\n    }\n\n    void visit(Cat *c) {\n        std::cout &lt;&lt; \"Cat&lt;\" &lt;&lt; c-&gt;c &lt;&lt; \", \"; \n        visit((Animal *)c); \n        std::cout &lt;&lt; \"&gt;\" &lt;&lt; std::endl;\n    }\n};\n\nint main() {\n    std::vector&lt;Animal *&gt; animals;\n    animals.push_back(new Dog(4, 5));\n    animals.push_back(new Cat(6, 7));\n\n    ConcreteVisitor v;\n    for (Animal *a : animals) {\n         a-&gt;accept(v);\n     }\n}\n</code></pre>\n\n<p>This prints <code>Animal&lt;5&gt; Animal&lt;7&gt;</code></p>\n"}, {"tags": ["c++", "algorithm", "c++11"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1495033046, "post_id": 44027808, "comment_id": 75083177, "body": "See <a href=\"http://stackoverflow.com/questions/13840998/sorting-zipped-locked-containers-in-c-using-boost-or-the-stl\" title=\"sorting zipped locked containers in c using boost or the stl\">stackoverflow.com/questions/13840998/&hellip;</a>"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1495033222, "post_id": 44027808, "comment_id": 75083325, "body": "Note though that your comparator doesn&#39;t satisfy strict weak ordering requirements, so your program exhibits undefined behavior. Specifically, 0 is equivalent to 1 and 0 is equivalent to 2, but 1 is not equivalent to 2."}, {"owner": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1495034021, "post_id": 44027808, "comment_id": 75083928, "body": "@Igor Thanks for this"}, {"owner": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1495034253, "post_id": 44027808, "comment_id": 75084113, "body": "I would like to avoid 3rd Party libs. Boost may work though."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1495039860, "post_id": 44027808, "comment_id": 75087771, "body": "Your updated comparator still has the same problem."}], "answers": [{"tags": [], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 1, "last_activity_date": 1495069852, "last_edit_date": 1495069852, "creation_date": 1495039523, "answer_id": 44030600, "question_id": 44027808, "link": "https://stackoverflow.com/questions/44027808/sorting-two-arrays-based-on-one-with-standard-library-copy-steps-avoided/44030600#44030600", "title": "Sorting two arrays based on one with standard library (copy steps avoided)", "body": "<p>You can create an array of indices, sort the indices according to one of the arrays, then reorder the two arrays and array of indices in place according to the sorted array of indices in O(n) time:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\nint A[8] = {8,6,1,7,5,3,4,2};\nchar B[8] = {'h','f','a','g','e','c','d','b'};\nsize_t I[8];\nsize_t i, j, k;\nint ta;\nchar tb;\n    // create array of indices to A[]\n    for(i = 0; i &lt; sizeof(A)/sizeof(A[0]); i++)\n        I[i] = i;\n    // sort array of indices to A[]\n    std::sort(I, I+sizeof(I)/sizeof(I[0]),\n              [&amp;A](int i, int j) {return A[i] &lt; A[j];});\n    // reorder A[] B[] I[] according to I[]\n    for(i = 0; i &lt; sizeof(A)/sizeof(A[0]); i++){\n        if(i != I[i]){\n            ta = A[i];\n            tb = B[i];\n            k = i;\n            while(i != (j = I[k])){\n                A[k] = A[j];\n                B[k] = B[j];\n                I[k] = k;\n                k = j;\n            }\n            A[k] = ta;\n            B[k] = tb;\n            I[k] = k;\n        }\n    }\n    for(i = 0; i &lt; sizeof(A)/sizeof(A[0]); i++)\n        std::cout &lt;&lt; A[i] &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n    for(i = 0; i &lt; sizeof(B)/sizeof(B[0]); i++)\n        std::cout &lt;&lt; B[i] &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>or an array of pointers can be used instead of an array of indices, which allows a normal compare function instead of a lambda compare function.</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n\nbool compare(const int *p0, const int *p1)\n{\n    return *p0 &lt; *p1;\n}\n\nint main()\n{\nint A[8] = {8,6,1,7,5,3,4,2};\nchar B[8] = {'h','f','a','g','e','c','d','b'};\nint *pA[8];\nsize_t i, j, k;\nint ta;\nchar tb;\n    // create array of pointers to A[]\n    for(i = 0; i &lt; sizeof(A)/sizeof(A[0]); i++)\n        pA[i] = &amp;A[i];\n    // sort array of pointers to A[]\n    std::sort(pA, pA+sizeof(A)/sizeof(A[0]), compare);\n    // reorder A[] B[] pA[] according to pA[]\n    for(i = 0; i &lt; sizeof(A)/sizeof(A[0]); i++){\n        if(i != pA[i]-A){\n            ta = A[i];\n            tb = B[i];\n            k = i;\n            while(i != (j = pA[k]-A)){\n                A[k] = A[j];\n                B[k] = B[j];\n                pA[k] = &amp;A[k];\n                k = j;\n            }\n            A[k] = ta;\n            B[k] = tb;\n            pA[k] = &amp;A[k];\n        }\n    }\n    for(i = 0; i &lt; sizeof(A)/sizeof(A[0]); i++)\n        std::cout &lt;&lt; A[i] &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n    for(i = 0; i &lt; sizeof(B)/sizeof(B[0]); i++)\n        std::cout &lt;&lt; B[i] &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 2026, "user_id": 1909456, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1f254bd884cc7ea6217bfd1eaccb9f75?s=128&d=identicon&r=PG", "display_name": "dgrat", "link": "https://stackoverflow.com/users/1909456/dgrat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1495069852, "creation_date": 1495031566, "last_edit_date": 1495033979, "question_id": 44027808, "link": "https://stackoverflow.com/questions/44027808/sorting-two-arrays-based-on-one-with-standard-library-copy-steps-avoided", "title": "Sorting two arrays based on one with standard library (copy steps avoided)", "body": "<p>I have old code to maintain and I was replacing a custom QuickSort which was sorting two arrays based on array one with std::sort. Is there a way to sort two arrays based one one of them without an additional split step and without implementing a sorting function again? Below is the current example vector1D is basically std::vector. </p>\n\n<pre><code>    vector1D&lt;std::pair&lt;int64_t, uint8_t&gt;&gt; m_RowCol(m_NX * m_NY * m_NZ);\n    //..\n    std::sort(\n        m_RowCol.begin(),\n        m_RowCol.end(),\n        [](const std::pair&lt;int64_t, uint8_t&gt; &amp;a, const std::pair&lt;int64_t, uint8_t&gt; &amp;b) { return a.first &lt; b.first &amp;&amp; (a.first &gt; 0 &amp;&amp; b.first &gt; 0); }\n    );\n    // copy into two vectors\n    vector1D&lt;int64_t&gt; m_Row;\n    vector1D&lt;uint8_t&gt; m_Col;\n    for (auto it = std::make_move_iterator(m_RowCol.begin()), end = std::make_move_iterator(m_RowCol.end()); it != end; ++it)\n    {\n        m_Row.push_back(std::move(it-&gt;first));\n        m_Col.push_back(std::move(it-&gt;second));\n    }\n    m_RowCol.clear(); \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1866, "user_id": 4011717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WeuZA.png?s=128&g=1", "display_name": "wkl", "link": "https://stackoverflow.com/users/4011717/wkl"}, "edited": false, "score": 1, "creation_date": 1495032005, "post_id": 44027732, "comment_id": 75082339, "body": "Is the <code>i</code> in <code>int&amp; refnum = i;</code> meant to be <code>num</code>?"}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "reply_to_user": {"reputation": 1866, "user_id": 4011717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WeuZA.png?s=128&g=1", "display_name": "wkl", "link": "https://stackoverflow.com/users/4011717/wkl"}, "edited": false, "score": 0, "creation_date": 1495032902, "post_id": 44027732, "comment_id": 75083039, "body": "sry... Its a typo mistake... edited..."}], "answers": [{"comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1495031959, "post_id": 44027909, "comment_id": 75082312, "body": "Implementing references as pointers is no mandated by the standard, it&#39;s merely an overwhelmingly popular implementation choice."}, {"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 1, "creation_date": 1495031970, "post_id": 44027909, "comment_id": 75082315, "body": "That is on the implementation level, but not on the language level!"}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495032075, "post_id": 44027909, "comment_id": 75082397, "body": "I did not say that one were implemented using the other but I said that they had similar semantic."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "edited": false, "score": 0, "creation_date": 1495032767, "post_id": 44027909, "comment_id": 75082951, "body": "I did not knew, that. I&#39;ve updated my answer to take into account your comment."}], "tags": [], "owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "is_accepted": false, "score": 1, "last_activity_date": 1495033138, "last_edit_date": 1495033138, "creation_date": 1495031839, "answer_id": 44027909, "question_id": 44027732, "link": "https://stackoverflow.com/questions/44027732/memory-of-a-reference-variable-in-c/44027909#44027909", "title": "memory of a reference variable in c++?", "body": "<p>A reference store the address of the variable it reference (like pointer with stronger pre/post-conditions).\n<s>This means that <code>sizeof(T&amp;) == sizeof(T*) == 4</code> on a 32bit architecture</s>.</p>\n\n<p>Comment from @Fran\u00e7oisAndrieux about the real size of <code>T&amp;</code>:</p>\n\n<blockquote>\n  <p>@nefas You state \"This means that <code>sizeof(T&amp;) == sizeof(T*) == 4</code> on a 32bit architecture.\" but this is not true. Try it with a larger <code>T</code>. For example, <code>sizeof(std::array&lt;int, 10&gt;&amp;)</code> is much larger than a pointer. You are taking the size of <code>T</code>, not <code>T&amp;</code>.</p>\n</blockquote>\n\n<p>An other thing that you have to take into account when calculating size of class/struct is the padding of the struct/class: the size of the struct maybe higher than the sum of the size of its member (I won't explain how the padding work because I haven't enough knowledge about it).</p>\n"}, {"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1495032682, "post_id": 44027936, "comment_id": 75082877, "body": "@saikiran That&#39;s a different question with a different answer, but Dr t&#39;s answer addresses the most likely possibility: padding to ensure optimal memory alignment."}], "tags": [], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "is_accepted": false, "score": 8, "last_activity_date": 1495034585, "last_edit_date": 1495034585, "creation_date": 1495031893, "answer_id": 44027936, "question_id": 44027732, "link": "https://stackoverflow.com/questions/44027732/memory-of-a-reference-variable-in-c/44027936#44027936", "title": "memory of a reference variable in c++?", "body": "<p>A reference is an alias, it should not be considered as a new variable. You cannot obtain its address and you cannot obtain its size. Any attempt to do so will instead obtain the address or size of the aliased object. In practice, most implementations implement them like pointers, but the standard does not require this. It makes no mention of the expected size for a reference.</p>\n\n<p>From : <a href=\"http://en.cppreference.com/w/cpp/language/reference\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/reference</a></p>\n\n<blockquote>\n  <p>References are not objects; they do not necessarily occupy storage, although the compiler may allocate storage if it is necessary to implement the desired semantics (e.g. a non-static data member of reference type usually increases the size of the class by the amount necessary to store a memory address).</p>\n</blockquote>\n\n<p>Edit : The c++ standard gives a lot of leeway to implementations to decide for themselves the size of types and classes in order to accommodate the unique requirements of every architecture. In this case, padding is introduced between the members of your class. There is no requirement in c++ that a class's size must be equal to the sum of it's members' size. See <a href=\"http://en.cppreference.com/w/c/language/object\" rel=\"nofollow noreferrer\">Objects and alignment</a> on cppreference.com for more information on the subject.</p>\n\n<p>Edit 2 : There still seems to be some confusion regarding <code>sizeof(T&amp;)</code>.</p>\n\n<p>From <a href=\"http://en.cppreference.com/w/cpp/language/sizeof\" rel=\"nofollow noreferrer\">http://en.cppreference.com/w/cpp/language/sizeof</a> :</p>\n\n<blockquote>\n  <p>When applied to a reference type, the result is the size of the referenced type.</p>\n</blockquote>\n\n<p>The expression <code>sizeof(T&amp;)</code> is treated as if you had written <code>sizeof(T)</code>. This doesn't mean that the size of <code>T&amp;</code> is equal to the size of <code>T</code>. It's simply that you cannot get the size of a reference directly with <code>sizeof</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1495033864, "post_id": 44028195, "comment_id": 75083793, "body": "I have gone through the link @Dr t, but I&#39;m using all <code>char</code> here, so why there is a need for padding for each of those variables which are <code>char</code> (look at my new code - line3,4,5) and If I comment <code>line4</code>, why I get it size of object as <code>2</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 1, "creation_date": 1495034276, "post_id": 44028195, "comment_id": 75084125, "body": "@saikiran You have <code>char</code>, <code>char&amp;</code> and <code>char</code>. The memory layout requirements for a reference are not fixed by the standard, but they will likely be different from <code>char</code>&#39;s. Compare with the size of a <code>struct</code> containing three <code>char</code> (no reference). Remember that <code>sizeof(T&amp;)</code> gives the size of the type T, not the size of a reference. <code>sizeof(char&amp;) == 1</code> <i>does not imply</i> that <code>char&amp;</code> has a size of 1, only that <code>char</code> has a size of 1."}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1495034650, "post_id": 44028195, "comment_id": 75084390, "body": "@Fran&#231;oisAndrieux, I observed what you said. But, even though <code>char&amp;</code> is taking <code>1 byte</code>, why the compiler padded the remaining bytes? In case of <code>int</code>, it is different but here why is it padding for the remaining normal <code>char</code> also?"}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1495034750, "post_id": 44028195, "comment_id": 75084476, "body": "@Fran&#231;oisAndrieux, but in my case the value what <code>char&amp;</code> is refering to  is also <code>1 byte</code> since the size of <code>letter</code> is <code>1 byte</code>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 0, "creation_date": 1495034766, "post_id": 44028195, "comment_id": 75084493, "body": "@saikiran <code>char&amp;</code> does <i>not</i> take 1 byte. <code>sizeof(char&amp;)</code> only measures the size of <code>char</code>. See the 2nd edit to my answer."}, {"owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1495035054, "post_id": 44028195, "comment_id": 75084712, "body": "@Fran&#231;oisAndrieux Yeah I got it now, but still I didn&#39;t get why the compiler padded so many bytes?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "edited": false, "score": 1, "creation_date": 1495035716, "post_id": 44028195, "comment_id": 75085181, "body": "@saikiran You are likely on a x86 platform, where a reference has a size of 4 and has an alignment requirement of 4. Since your members are stored in order, you would have 1 byte for <code>letter</code>, 3 bytes of padding (since references may only begin on every 4th byte), 4 bytes for <code>refletter</code> and then 1 more byte for <code>letter_two</code>. I&#39;m not sure what the last 3 bytes are used for, I would guess that the since the alignment requirement of your <code>struct</code> is 4, it&#39;s padded to a multiple of 4 bytes."}], "tags": [], "owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "is_accepted": false, "score": 2, "last_activity_date": 1495032511, "last_edit_date": 1495540500, "creation_date": 1495032511, "answer_id": 44028195, "question_id": 44027732, "link": "https://stackoverflow.com/questions/44027732/memory-of-a-reference-variable-in-c/44028195#44028195", "title": "memory of a reference variable in c++?", "body": "<p>In addition to the answer already provided I would recommend having a read of the material regarding padding at:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6025269/data-structure-padding\">Data structure padding</a></p>\n\n<p>Which is a good basic discussion regarding padding of classes and structures in C++ with simple examples to consider.</p>\n"}], "owner": {"reputation": 1253, "user_id": 5558647, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/qzqCQ.gif?s=128&g=1", "display_name": "infinite loop", "link": "https://stackoverflow.com/users/5558647/infinite-loop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 2, "answer_count": 3, "score": 3, "last_activity_date": 1495034585, "creation_date": 1495031380, "last_edit_date": 1495033472, "question_id": 44027732, "link": "https://stackoverflow.com/questions/44027732/memory-of-a-reference-variable-in-c", "title": "memory of a reference variable in c++?", "body": "<p>I've just started to learn Cpp from the basics and am confused when I came across reference variables.</p>\n\n<p>From what I have learn't reference variables are just like an alias (another name to the same memory), so in this case it need need any memory.</p>\n\n<p>When I ran the below code:</p>\n\n<pre><code>class sample_class\n{\n    public:\n        int num; //line1\n        int&amp; refnum = num; //line2\n}\n\nint main()\n{\n    sample_class sample_object;\n    cout&lt;&lt; \"sample_class object size : \" &lt;&lt; sizeof(sample_object) &lt;&lt;endl;\n    return 0;\n}\n</code></pre>\n\n<p>I got the output as:</p>\n\n<blockquote>\n  <blockquote>\n    <p>sample_class object size : 8</p>\n  </blockquote>\n</blockquote>\n\n<p>==>Here, the size for <code>num</code> is 4 bytes (32-bit compiler) and <code>refnum</code> since a reference is simply an alias to <code>num</code>. Then, why in this case, the size of object is <code>8</code>?</p>\n\n<p>==>Also, if really an <code>refnum</code> is like an alias then when does this information (info that <code>refnum</code> also holds/alias to the same memory address of <code>num</code>) gets stored?</p>\n\n<p><strong><em>Edited :</em></strong></p>\n\n<p>And consider this case (changine the definition of <code>sample_class</code>):</p>\n\n<pre><code>class sample_class\n{\n    public:\n        char letter; //line3\n        char&amp; refletter = letter; //line4\n        char letter_two; //line5\n}\n</code></pre>\n\n<p>Here, If I print the object size of <code>sample_class</code> object, I get it as <code>12</code> (though the size of <code>letter</code>,<code>refletter</code> and <code>letter_two</code> are each equal to <code>1</code>). But if I comment <code>line 4</code>, the object size is just <code>2</code>. <strong>How is this happening???</strong></p>\n\n<p><strong><em>I'm interested to learn from the basics, so if I'm wrong anywhere please correct me</em></strong></p>\n"}, {"tags": ["c++", "wininet"], "answers": [{"comments": [{"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1495041004, "post_id": 44029730, "comment_id": 75088475, "body": "Wrong, see my answer."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1495049786, "post_id": 44029730, "comment_id": 75093288, "body": "@zett42: that is not exactly &quot;a function similar to <code>URLDownloadToFile()</code>&quot;, though.  You have to first open a stream, and then read from the stream.  Those are separate operations, and so not unlike my answer, just using a different API.  Notice that I said &quot;<i>There is no <b>single do-all</b> function like <code>URLDownloadToFile()</code> ...</i>&quot;, which is true."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1495050992, "post_id": 44029730, "comment_id": 75094010, "body": "The do-all function would be <code>URLOpenStream()</code>, I&#39;ve just choosen <code>URLOpenBlockingStream()</code> as the simpler example."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1495054063, "post_id": 44029730, "comment_id": 75095667, "body": "@zett42: <code>URLOpenStream()</code> is hardly a <i>do-all</i> function, as it requires the caller to pass in a separate <code>IBindStatusCallback</code> object to handle the <code>OnDataAvailable</code> callback, and the data is provided in <code>STDMEDIUM</code> format, which requires extra function calls to extract the data, since it could be in <code>HGLOBAL</code>, <code>IStream</code>, or <code>IStorage</code> format.  A do-all function would be one where the caller simply passes in a URL and a memory block or output stream, and the function populates the output completely without any work from the caller. There is no single Win32 API function that does that."}, {"owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "edited": false, "score": 0, "creation_date": 1495054593, "post_id": 44029730, "comment_id": 75095925, "body": "Fair enough, I get it."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1495049940, "last_edit_date": 1495049940, "creation_date": 1495036686, "answer_id": 44029730, "question_id": 44027725, "link": "https://stackoverflow.com/questions/44027725/urldownloadtofile-to-memory/44029730#44029730", "title": "UrlDownloadToFile to Memory", "body": "<p>There is no <em>single</em> do-all function in the Win32 API to download a URL resource into memory, like <code>URLDownloadToFile()</code>  does for a file.  You will have to write your own function that requests the URL and then reads the data into memory.</p>\n\n<p>For example, using <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa385098.aspx\" rel=\"nofollow noreferrer\"><code>InternetOpenUrl()</code></a> or  <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384233.aspx\" rel=\"nofollow noreferrer\"><code>HttpOpenRequest()</code></a>/<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384247.aspx\" rel=\"nofollow noreferrer\"><code>HttpSendRequest()</code></a>, and then <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa385103.aspx\" rel=\"nofollow noreferrer\"><code>InternetReadFile()</code></a>.  See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa384322.aspx#Downloading_resource\" rel=\"nofollow noreferrer\">Downloading Resources from the WWW</a> on MSDN for more details.</p>\n\n<p>Or using any other HTTP/S library/API of your choosing.</p>\n"}, {"tags": [], "owner": {"reputation": 14021, "user_id": 7571258, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fBP6e.png?s=128&g=1", "display_name": "zett42", "link": "https://stackoverflow.com/users/7571258/zett42"}, "is_accepted": false, "score": 3, "last_activity_date": 1495054827, "last_edit_date": 1495054827, "creation_date": 1495037466, "answer_id": 44029974, "question_id": 44027725, "link": "https://stackoverflow.com/questions/44027725/urldownloadtofile-to-memory/44029974#44029974", "title": "UrlDownloadToFile to Memory", "body": "<p>There is <a href=\"https://msdn.microsoft.com/en-us/library/ms775129(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>URLOpenStream()</code></a>, <a href=\"https://msdn.microsoft.com/en-us/library/ms775127(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>URLOpenBlockingStream()</code></a> and <a href=\"https://msdn.microsoft.com/en-us/library/ms775128(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>URLOpenPullStream()</code></a> which allow you to download into memory. </p>\n\n<p>From these three, <a href=\"https://msdn.microsoft.com/en-us/library/ms775127(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>URLOpenBlockingStream()</code></a> seems to be the most straightforward to use as it returns an <code>IStream</code> pointer from which you can synchronously read in a loop. Although it's not a single <em>do-all</em> function like <code>URLDownloadToFile()</code> it's not much difficult to use.</p>\n\n<p>Here is a complete example console application for <a href=\"https://msdn.microsoft.com/en-us/library/ms775127(v=vs.85).aspx\" rel=\"nofollow noreferrer\"><code>URLOpenBlockingStream()</code></a>. It downloads from an URL and writes the response to stdout. Instead of this, you could store the response in a <code>std::vector</code> or do whatever you like with it.</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;Urlmon.h&gt;   // URLOpenBlockingStreamW()\n#include &lt;atlbase.h&gt;  // CComPtr\n#include &lt;iostream&gt;\n#pragma comment( lib, \"Urlmon.lib\" )\n\nstruct ComInit\n{\n    HRESULT hr;\n    ComInit() : hr( ::CoInitialize( nullptr ) ) {}\n    ~ComInit() { if( SUCCEEDED( hr ) ) ::CoUninitialize(); } \n};\n\nint main(int argc, char* argv[])\n{\n    ComInit init;\n\n    // use CComPtr so you don't have to manually call Release()\n    CComPtr&lt;IStream&gt; pStream;  \n\n    // Open the HTTP request.\n    HRESULT hr = URLOpenBlockingStreamW( nullptr, L\"http://httpbin.org/headers\", &amp;pStream, 0, nullptr );\n    if( FAILED( hr ) )\n    {\n        std::cout &lt;&lt; \"ERROR: Could not connect. HRESULT: 0x\" &lt;&lt; std::hex &lt;&lt; hr &lt;&lt; std::dec &lt;&lt; \"\\n\"; \n        return 1;\n    }\n\n    // Download the response and write it to stdout.\n    char buffer[ 4096 ];\n    do\n    {\n        DWORD bytesRead = 0;\n        hr = pStream-&gt;Read( buffer, sizeof(buffer), &amp;bytesRead );\n\n        if( bytesRead &gt; 0 )\n        {\n            std::cout.write( buffer, bytesRead );\n        }\n    } \n    while( SUCCEEDED( hr ) &amp;&amp; hr != S_FALSE );\n\n    if( FAILED( hr ) )\n    {\n        std::cout &lt;&lt; \"ERROR: Download failed. HRESULT: 0x\" &lt;&lt; std::hex &lt;&lt; hr &lt;&lt; std::dec &lt;&lt; \"\\n\";\n        return 2;\n    }\n\n    std::cout &lt;&lt; \"\\n\";\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 373, "user_id": 2860297, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/4add2d32633c365e19eac6df6fac69c0?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Herrick", "link": "https://stackoverflow.com/users/2860297/kevin-herrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3499, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1495054827, "creation_date": 1495031370, "last_edit_date": 1495036744, "question_id": 44027725, "link": "https://stackoverflow.com/questions/44027725/urldownloadtofile-to-memory", "title": "UrlDownloadToFile to Memory", "body": "<p>I'm using <code>URLDownloadToFile()</code> to download images from a web server to a directory on my desktop.  If, instead of saving the images to disk, I wanted to read them into memory (like a byte array or base64 string or something), is there a function similar to <code>URLDownloadToFile()</code> that can achieve this?</p>\n"}, {"tags": ["c++", "boost"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1495055105, "post_id": 44027707, "comment_id": 75096156, "body": "IMHO this calls for <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow noreferrer\">dependency injection</a>. i.e. have two implementations of some progress logging interface (one dummy, one using <code>boost::progress_display</code>) and pass an appropriate one as a parameter."}], "answers": [{"comments": [{"owner": {"reputation": 11476, "user_id": 2790047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c5a7631a67903295da25dabb94e1f51b?s=128&d=identicon&r=PG", "display_name": "jodag", "link": "https://stackoverflow.com/users/2790047/jodag"}, "edited": false, "score": 0, "creation_date": 1585697688, "post_id": 44059014, "comment_id": 107852892, "body": "I had to add an additional <code>std::cout.flush();</code> after <code>put</code> to get this to work properly."}], "tags": [], "owner": {"reputation": 4580, "user_id": 218774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ejff2.png?s=128&g=1", "display_name": "J. Calleja", "link": "https://stackoverflow.com/users/218774/j-calleja"}, "is_accepted": true, "score": 2, "last_activity_date": 1495148181, "last_edit_date": 1495539206, "creation_date": 1495148181, "answer_id": 44059014, "question_id": 44027707, "link": "https://stackoverflow.com/questions/44027707/disable-output-of-progress-display-from-boost/44059014#44059014", "title": "Disable output of `progress_display` from boost", "body": "<p>You must pass an object derived from <code>std::ostream</code> in the constructor and the <code>progress_display</code> stores a reference, so it is not possible to change it afterwards.</p>\n\n<p>As you say, you can create your own object that controls the output, but it must comply:</p>\n\n<ul>\n<li>It must derive from <code>std::ostream</code>. </li>\n<li>It must have the same time duration that the <code>progress_display</code>.</li>\n</ul>\n\n<p>You may find more information <a href=\"https://stackoverflow.com/a/19933011/218774\">here</a> about the derivation from <code>std::ostream</code>. Based on the link, you may define the following <code>struct</code>;</p>\n\n<pre><code>struct Output : std::ostream, std::streambuf\n{\n    Output(bool enabled) : std::ostream(this), m_enabled(enabled) {}\n\n    int overflow(int c)  {\n        if(m_enabled) std::cout.put(c);\n        return 0;\n    }\n\n    bool m_enabled;\n};\n</code></pre>\n\n<p>Now, this <code>struct</code> can enable/disable the output from its constructor if you declare the <code>progress_display</code> as:</p>\n\n<pre><code>// Visible progress\nOutput out_enabled(true);\nboost::progress_display loading_bar_visible(computations, out_enabled);\n\n// Invisible progress\nOutput out_disabled(false);\nboost::progress_display loading_bar_invisible(computations, out_disabled);\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 1071009, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/13449d96da17d7d17f9963461aa72e8c?s=128&d=identicon&r=PG", "display_name": "Galadude", "link": "https://stackoverflow.com/users/1071009/galadude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 1, "accepted_answer_id": 44059014, "answer_count": 1, "score": 3, "last_activity_date": 1495148181, "creation_date": 1495031321, "question_id": 44027707, "link": "https://stackoverflow.com/questions/44027707/disable-output-of-progress-display-from-boost", "title": "Disable output of `progress_display` from boost", "body": "<p>I have a function that uses <code>progress_display</code> to show a loading bar. I would like to be able to be able to disable the output for testing. The loading bar prints the second it is inititialized, and if I initialize it in an if statement, I get an error from calling <code>++loading_bar;</code> from another if statement. </p>\n\n<p>I was wondering if I could disable it by initializing it with my own stream that does nothing, but I have no idea how I would make this. </p>\n\n<pre><code>#include &lt;boost/progress.hpp&gt;\nint myfuntion(bool silent)\n{\n  int computations = 100;\n  boost::progress_display loading_bar(computations);\n  ++loading_bar;\n}\n</code></pre>\n"}, {"tags": ["c++", "docker", "boost", "gitlab-ci"], "comments": [{"owner": {"reputation": 3158, "user_id": 7925197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M21lU.png?s=128&g=1", "display_name": "papey", "link": "https://stackoverflow.com/users/7925197/papey"}, "edited": false, "score": 0, "creation_date": 1495034948, "post_id": 44027645, "comment_id": 75084643, "body": "Can you verify that libboost_graph.so is in your $LD_LIBRARY_PATH ?"}, {"owner": {"reputation": 429, "user_id": 7618425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4f0778a64ec6b2010d417f79ae0ed1?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/7618425/connor"}, "reply_to_user": {"reputation": 3158, "user_id": 7925197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M21lU.png?s=128&g=1", "display_name": "papey", "link": "https://stackoverflow.com/users/7925197/papey"}, "edited": false, "score": 1, "creation_date": 1495037870, "post_id": 44027645, "comment_id": 75086647, "body": "That was my problem -- I didn&#39;t realize that my <code>export LD_LIBRARY_PATH=&#47;usr&#47;local&#47;lib:$LD_LIBRARY_PATH</code> command wouldn&#39;t persist  -- thanks."}, {"owner": {"reputation": 13080, "user_id": 2115135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cdc4d80fb3817f267b90372e000095fa?s=128&d=identicon&r=PG", "display_name": "Jakub Kania", "link": "https://stackoverflow.com/users/2115135/jakub-kania"}, "edited": false, "score": 0, "creation_date": 1495055217, "post_id": 44027645, "comment_id": 75096210, "body": "You may consider running the job inside the container you have built instead of having the job run the container."}], "owner": {"reputation": 429, "user_id": 7618425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be4f0778a64ec6b2010d417f79ae0ed1?s=128&d=identicon&r=PG&f=1", "display_name": "Connor", "link": "https://stackoverflow.com/users/7618425/connor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 596, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495032345, "creation_date": 1495031169, "last_edit_date": 1495032345, "question_id": 44027645, "link": "https://stackoverflow.com/questions/44027645/program-cant-find-boost-graph-installed-in-docker", "title": "Program can&#39;t find Boost Graph installed in Docker", "body": "<p>I am using dockers to store the dependencies of my c++ program to use when doing CI testing with gitlab CI. I first build a base docker which contains all of the program dependencies (lets call it <code>DOCKER_A</code>): </p>\n\n<pre><code>FROM gcc:5\n\nRUN mkdir -p /usr/src/optimization\nWORKDIR /usr/optimization\n\n#COPY . /usr/optimization\n\nRUN apt-get update &amp;&amp; \\\n apt-get upgrade -y &amp;&amp; \\\n apt-get install -y build-essential &amp;&amp; \\\n apt-get install -y openssh-client &amp;&amp; \\\n apt-get install -y python3 &amp;&amp; \\\n apt-get install -y python3-pip &amp;&amp; \\\n pip3 install --upgrade pip &amp;&amp; \\\n pip3 install virtualenv\nRUN wget http://www.cmake.org/files/v3.7/cmake-3.7.2.tar.gz &amp;&amp; \\\n tar xf cmake-3.7.2.tar.gz &amp;&amp; \\\n cd cmake-3.7.2/ &amp;&amp; \\\n ./configure &amp;&amp; \\\n make &amp;&amp; \\\n make install &amp;&amp; \\\n export PATH=/usr/local/bin:$PATH &amp;&amp; \\\n export LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH &amp;&amp; \\\n cd ..\nRUN wget -O boost_1_64_0.tar.gz http://sourceforge.net/projects/boost/files/boost/1.64.0/boost_1_64_0.tar.gz/download &amp;&amp; \\\n tar xzvf boost_1_64_0.tar.gz &amp;&amp; \\\n cd boost_1_64_0 &amp;&amp; \\\n ./bootstrap.sh --exec-prefix=/usr/local --with-python=python3 &amp;&amp; \\\n ./b2 threading=multi &amp;&amp; \\\n ./b2 install threading=multi &amp;&amp; \\\n cd .. &amp;&amp; \\\n rm boost_1_64_0.tar.gz &amp;&amp; \\\n rm -r boost_1_64_0 &amp;&amp; \\\n ln -s /usr/lib/x86_64-linux-gnu/libboost_python-py34.so /usr/lib/x86_64-linux-gnu/libboost_python3.so\n</code></pre>\n\n<p>This docker doesn't change. Then every time I push to gitlab, I build another docker, starting from <code>DOCKER_A</code>:</p>\n\n<pre><code>FROM DOCKER_A\n\nARG SSH_PRIVATE_KEY\n\nWORKDIR /usr/optimization\nCOPY . /usr/optimization\n\nRUN chmod +x ADD_KEY.sh\nRUN ./ADD_KEY.sh \"$SSH_PRIVATE_KEY\"\n\nRUN mkdir build &amp;&amp; \\\n cd build &amp;&amp; \\\n cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_VERBOSE_MAKEFILE=on .. &amp;&amp; \\\n make &amp;&amp; \\\n cd ..\n</code></pre>\n\n<p>This builds the code from the new commit (up to this point everything works as expected).</p>\n\n<p>Next, in my YAML file for gitlab CI, I run my tests, which consist of calling the executable files generated by my build process.</p>\n\n<pre><code>before_script:\n  - docker info\n  - docker login -u user -p $CI_JOB_TOKEN docker.registry.url\n\nafter_script:\n  - echo \"After script section\"\n  - echo \"For example you might do some cleanup here\"\n\nbuildRelease:\n  stage: build\n  script:\n    - echo \"Do your build here\"\n    - docker login -u user -p $CI_JOB_TOKEN docker.registry.url\n    - docker build --pull -i $CONTAINER_IMAGE_PUSH --build-arg SSH_PRIVATE_KEY=\"$SSH_PRIVATE_KEY\" .\n    - docker push $CONTAINER_IMAGE_PUSH\n\ntestDispatch:\n  stage: test\n  script:\n    - echo \"Do a test here\"\n    - echo \"For example run a test suite\"\n    - docker run -t $CONTAINER_IMAGE_PULL ./bin/dispatch\n\ntestState:\n  stage: test\n  script:\n    - docker run -t $CONTAINER_IMAGE_PULL ./bin/state-test\n\ntestAlgorithm:\n  stage: test\n  script:\n    - docker run -t $CONTAINER_IMAGE_PULL ./bin/algorithm-test\n\ntestSystem:\n  stage: test\n  script:\n    - docker run -t $CONTAINER_IMAGE_PULL ./bin/system-test\n</code></pre>\n\n<p>Each of these the tests in <code>stage test</code> fails, all giving the same error. Here is an example of the output:</p>\n\n<pre><code>$ docker run -t $CONTAINER_IMAGE_PULL ./bin/algorithm-test\n\n./bin/algorithm-test: error while loading shared libraries:\nlibboost_graph.so.1.64.0: cannot open shared object file: No such file or directory\n</code></pre>\n\n<p>I don't understand why my binary cannot find libboost graph, as it is installed in the first docker container, which I am inheriting from.</p>\n\n<p>Any help that could be provided would be appreciated.</p>\n"}, {"tags": ["c++", "linux", "abi", "dlsym"], "answers": [{"tags": [], "owner": {"reputation": 205167, "user_id": 4323, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qqgFU.png?s=128&g=1", "display_name": "John Zwinck", "link": "https://stackoverflow.com/users/4323/john-zwinck"}, "is_accepted": false, "score": 1, "last_activity_date": 1495031158, "creation_date": 1495031158, "answer_id": 44027639, "question_id": 44027434, "link": "https://stackoverflow.com/questions/44027434/abi-stability-on-pointers-to-symbols-vs-regular-symbol-lookup/44027639#44027639", "title": "ABI stability on pointers to symbols vs regular symbol lookup", "body": "<p>One advantage of \"Way A\" is that it gives you the chance to pass different pointers to different plugins.  So you could for example make a \"v1\" struct of pointers, and then later a \"v2\" that newer plugins could request.</p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 4744804, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZJAEC.png?s=128&g=1", "display_name": "Lw Cui", "link": "https://stackoverflow.com/users/4744804/lw-cui"}, "is_accepted": false, "score": 0, "last_activity_date": 1495033512, "creation_date": 1495033512, "answer_id": 44028574, "question_id": 44027434, "link": "https://stackoverflow.com/questions/44027434/abi-stability-on-pointers-to-symbols-vs-regular-symbol-lookup/44028574#44028574", "title": "ABI stability on pointers to symbols vs regular symbol lookup", "body": "<p>If anything works well two methods are equivalent except some performance loss. But runtime lookup resolves named symbols in global scope, which could be influenced by flag like <code>RTLD_GLOBAL</code> used in <code>dlopen</code>. It will lead to different behaviour under different context even though using the same addon.</p>\n\n<p>So I think method A is better.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1598585"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1495035059, "creation_date": 1495030643, "last_edit_date": 1495035059, "question_id": 44027434, "link": "https://stackoverflow.com/questions/44027434/abi-stability-on-pointers-to-symbols-vs-regular-symbol-lookup", "title": "ABI stability on pointers to symbols vs regular symbol lookup", "body": "<h3>General Scenario</h3>\n\n<p>Using dlsym(), I dynamically load a shared object addon from my main thread.</p>\n\n<p>I follow either of these two ways.</p>\n\n<h3>Way A</h3>\n\n<p>Pass a struct of pointers to symbols to the addon so it can call the host's functions and access other variables, knowing their data type of course.</p>\n\n<h3>Way B</h3>\n\n<p>Let the addon call symbols by their <code>extern \"C\"</code> identifier and have the runtime normally lookup them.</p>\n\n<h3>Question</h3>\n\n<p>Is there any difference between these two methods regarding ABI stability? For example: would one of this methods guarantee more chance of compatibility from an addon to the host program in case they were compiled in different environments?</p>\n"}, {"tags": ["c++", "arrays", "sorting"], "comments": [{"owner": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 2, "creation_date": 1495030236, "post_id": 44027257, "comment_id": 75080911, "body": "Have you tried stepping through it with a debugger?"}, {"owner": {"reputation": 1123, "user_id": 7334796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40218277e3752bb31fb331861decd8b5?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/7334796/j%c3%a9r%c3%b4me"}, "edited": false, "score": 3, "creation_date": 1495030440, "post_id": 44027257, "comment_id": 75081062, "body": "<code>j&lt;size</code>combined with <code>x[j+1]</code> will reach out of your array for the last iteration or am i wrong? If so you don&#39;t know what exactly you are reading"}, {"owner": {"reputation": 31, "user_id": 7939164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1693515797616071/picture?type=large", "display_name": "Jawad Adil", "link": "https://stackoverflow.com/users/7939164/jawad-adil"}, "reply_to_user": {"reputation": 14110, "user_id": 2416958, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/w8lZr.png?s=128&g=1", "display_name": "Stefan", "link": "https://stackoverflow.com/users/2416958/stefan"}, "edited": false, "score": 1, "creation_date": 1495030476, "post_id": 44027257, "comment_id": 75081095, "body": "@Stefan Debugger finished with 0 status."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "reply_to_user": {"reputation": 1123, "user_id": 7334796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40218277e3752bb31fb331861decd8b5?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/7334796/j%c3%a9r%c3%b4me"}, "edited": false, "score": 0, "creation_date": 1495030714, "post_id": 44027257, "comment_id": 75081268, "body": "@J&#233;r&#244;me you&#39;re right, this is an OOB.  Use <i>std::vector</i> instead of <i>new[]</i>, you will avoid leak like the one you have (<i>delete[]</i> missing)."}, {"owner": {"reputation": 31, "user_id": 7939164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1693515797616071/picture?type=large", "display_name": "Jawad Adil", "link": "https://stackoverflow.com/users/7939164/jawad-adil"}, "reply_to_user": {"reputation": 1123, "user_id": 7334796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40218277e3752bb31fb331861decd8b5?s=128&d=identicon&r=PG&f=1", "display_name": "J&#233;r&#244;me", "link": "https://stackoverflow.com/users/7334796/j%c3%a9r%c3%b4me"}, "edited": false, "score": 1, "creation_date": 1495030990, "post_id": 44027257, "comment_id": 75081472, "body": "@J&#233;r&#244;me thanks man! solved my problem :)"}], "answers": [{"tags": [], "owner": {"reputation": 320, "user_id": 5047223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b54116f53c6f3f87cc8cff3301fd9849?s=128&d=identicon&r=PG&f=1", "display_name": "MSM", "link": "https://stackoverflow.com/users/5047223/msm"}, "is_accepted": false, "score": 0, "last_activity_date": 1495032158, "creation_date": 1495032158, "answer_id": 44028053, "question_id": 44027257, "link": "https://stackoverflow.com/questions/44027257/first-element-become-0-when-sorting-an-array-in-c/44028053#44028053", "title": "First element become 0 when sorting an array in c++", "body": "<p>the working code with changes is</p>\n\n\n\n<pre class=\"lang-html prettyprint-override\"><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;cstdlib&gt;\nusing namespace std;\nint main()\n{\n    int *x, size, temp;\n    cout &lt;&lt; \"Enter the size of array\\n\";\n    cin &gt;&gt; size;\n    x = new int[size];\n    for (int i = 0; i &lt; size; i++)\n    {\n        cin &gt;&gt; x[i];\n    }\n    cout &lt;&lt; \"\\nData before sorting: \";\n    for (int j = 0; j &lt; size; j++)\n    {\n        cout &lt;&lt; x[j] &lt;&lt; ' ';\n    }\n    for (int i = 0; i &lt; size; i++)\n    {\n        for (int j = 0; j &lt; size-1; j++)\n        {\n            if (x[j] &gt; x[j + 1])\n            {\n                temp = x[j];\n                x[j] = x[j + 1];\n                x[j + 1] = temp;\n            }\n        }\n    }\n    cout &lt;&lt; \"\\nData after sorting: \";\n    for (int j = 0; j &lt; size; j++)\n    {\n        cout &lt;&lt; x[j] &lt;&lt; ' ';\n    }\n    cin &gt;&gt; temp;\n}\n</code></pre>\n\n<p>changed \"size\" to \"size-1\" in loop statement to avoid access to un-allocated array members</p>\n"}, {"tags": [], "owner": {"reputation": 4578, "user_id": 6626554, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Cn7Ya.png?s=128&g=1", "display_name": "TheWaterProgrammer", "link": "https://stackoverflow.com/users/6626554/thewaterprogrammer"}, "is_accepted": false, "score": 0, "last_activity_date": 1495032303, "creation_date": 1495032303, "answer_id": 44028106, "question_id": 44027257, "link": "https://stackoverflow.com/questions/44027257/first-element-become-0-when-sorting-an-array-in-c/44028106#44028106", "title": "First element become 0 when sorting an array in c++", "body": "<p>The for loop should be corrected so that <code>j</code> runs till <code>size - 1</code> &amp; <code>i</code> runs till <code>size</code>. Else you gobble up one number in an unnecessary comparison with non-existent numbers thus displaying zero or garbage number in some cases.</p>\n\n<p>Following for loop replaced into your program fixes your issue.</p>\n\n<pre><code>for(int i=0;i&lt;size;i++)\n{\n    for(int j=0;j&lt;size-1;j++)\n    {\n        if(x[j]&gt;x[j+1])\n        {\n            temp=x[j];\n            x[j]=x[j+1];\n            x[j+1]=temp;\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7939164, "user_type": "registered", "profile_image": "https://graph.facebook.com/1693515797616071/picture?type=large", "display_name": "Jawad Adil", "link": "https://stackoverflow.com/users/7939164/jawad-adil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1495032303, "creation_date": 1495030148, "last_edit_date": 1495031099, "question_id": 44027257, "link": "https://stackoverflow.com/questions/44027257/first-element-become-0-when-sorting-an-array-in-c", "title": "First element become 0 when sorting an array in c++", "body": "<p>I was sorting my array in c++ and 0 is printed on first index and highest value is ignored. where is my fault? here is my code.\nis there any problem with my logic? I am new to c++ so sorry if i did something wrong.</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;fstream&gt;\n#include&lt;cstdlib&gt;\nusing namespace std;\nint main()\n{\n    int *x, size, temp;\n    cout &lt;&lt; \"Enter the size of array\\n\";\n    cin &gt;&gt; size;\n    x = new int[size];\n    for (int i = 0; i &lt; size; i++)\n    {\n        cin &gt;&gt; x[i];\n    }\n    cout &lt;&lt; \"\\nData before sorting: \";\n    for (int j = 0; j &lt; size; j++)\n    {\n        cout &lt;&lt; x[j] &lt;&lt; ' ';\n    }\n    for (int i = 0; i &lt; size; i++)\n    {\n        for (int j = 0; j &lt; size; j++)\n        {\n            if (x[j] &gt; x[j + 1])\n            {\n                temp = x[j];\n                x[j] = x[j + 1];\n                x[j + 1] = temp;\n            }\n        }\n    }\n    cout &lt;&lt; \"\\nData after sorting: \";\n    for (int j = 0; j &lt; size; j++)\n    {\n        cout &lt;&lt; x[j] &lt;&lt; ' ';\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 4, "creation_date": 1495030043, "post_id": 44027183, "comment_id": 75080755, "body": "Please provide your snippets as text. You can&#39;t compile an image and not everyone is comfortable with your chosen color scheme."}, {"owner": {"reputation": 846, "user_id": 1137102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/HOdwV.png?s=128&g=1", "display_name": "RoiHatam", "link": "https://stackoverflow.com/users/1137102/roihatam"}, "edited": false, "score": 0, "creation_date": 1495030057, "post_id": 44027183, "comment_id": 75080761, "body": "Where is it then?"}, {"owner": {"reputation": 680, "user_id": 5550579, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1f54de1d280feb88d491beaed2f21fec?s=128&d=identicon&r=PG&f=1", "display_name": "RoaaGharra", "link": "https://stackoverflow.com/users/5550579/roaagharra"}, "edited": false, "score": 0, "creation_date": 1495030064, "post_id": 44027183, "comment_id": 75080770, "body": "Please provide your code."}, {"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1495030097, "post_id": 44027183, "comment_id": 75080793, "body": "@Fran&#231;oisAndrieux <a href=\"http://stackoverflow.com/questions/5508110/why-is-this-program-erroneously-rejected-by-three-c-compilers\" title=\"why is this program erroneously rejected by three c compilers\">stackoverflow.com/questions/5508110/&hellip;</a>"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "edited": false, "score": 0, "creation_date": 1495030189, "post_id": 44027183, "comment_id": 75080877, "body": "@GillBates Thank you for that link, I was not aware that this existed."}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1495034614, "post_id": 44027183, "comment_id": 75084365, "body": "Your function is actually trying to return a character...not a string.  The data type for the function is string and the return is bringing back a character.  Is that your intention?  Change data type of the function to character OR return a string."}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495037168, "post_id": 44027342, "comment_id": 75086225, "body": "Or better, use an <code>std::ostringstream</code> to collect the characters, and then return the output of its <code>str()</code> method at the end."}, {"owner": {"reputation": 36, "user_id": 7544635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206709d73cec3a3547d925aff7fcae1b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Asaad", "link": "https://stackoverflow.com/users/7544635/mohammad-asaad"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1495045922, "post_id": 44027342, "comment_id": 75091240, "body": "Thank you @RemyLebeau, I don&#39;t use string stream, is it better you mean faster or better for other reason?"}], "tags": [], "owner": {"reputation": 36, "user_id": 7544635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/206709d73cec3a3547d925aff7fcae1b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad Asaad", "link": "https://stackoverflow.com/users/7544635/mohammad-asaad"}, "is_accepted": true, "score": 2, "last_activity_date": 1495030383, "creation_date": 1495030383, "answer_id": 44027342, "question_id": 44027183, "link": "https://stackoverflow.com/questions/44027183/i-don-t-know-why-my-string-cant-save-the-value/44027342#44027342", "title": "I don\u2019t know why my string can&#39;t save the value", "body": "<p>Change</p>\n\n<pre><code>d[j]='A';\n</code></pre>\n\n<p>To</p>\n\n<pre><code>d+='A'\n</code></pre>\n\n<p>And do the same for all the rest.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1495062216, "last_edit_date": 1495062216, "creation_date": 1495053657, "answer_id": 44034415, "question_id": 44027183, "link": "https://stackoverflow.com/questions/44027183/i-don-t-know-why-my-string-cant-save-the-value/44034415#44034415", "title": "I don\u2019t know why my string can&#39;t save the value", "body": "<p>You are not actually allocating any memory for your <code>string</code>, so using <code>d[j]</code> is <strong>undefined behavior</strong>.  You need to use <code>d += ...</code> or <code>d.push_back(...)</code> instead.</p>\n\n<p>But even if you fix that error, your code still won't work correctly.  It is not outputting any string value at all for <code>a=0</code> when it should be returning <code>\"0\"</code>.  And it returns other strings in reverse order.  For example, <code>a=16</code> is returning <code>\"01\"</code> instead of <code>\"10\"</code>, <code>a=31</code> is returning <code>\"F1\"</code> instead of <code>\"1F\"</code>, <code>a=32</code> is returning <code>\"02\"</code> instead of <code>\"20\"</code>, etc.</p>\n\n<p>Try something more like this instead:</p>\n\n<pre><code>#include &lt;string&gt;\n\nstd::string DecToHex(int a)\n{\n    int i;\n    std::string d;\n\n    d.reserve(sizeof(a)*2);\n\n    do\n    {\n        i = a % 16;\n        if ((i &gt;= 10) &amp;&amp; (i &lt;= 15))\n          d.insert(0, 1, 'A'+(i-10));\n        else\n          d.insert(0, 1, '0'+i);\n        a /= 16;\n    }\n    while (a != 0);\n\n    return d;\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\nstd::string DecToHex(int a)\n{\n    int i;\n    std::string d;\n\n    d.reserve(sizeof(a)*2);\n\n    do\n    {\n        i = a % 16;\n        if ((i &gt;= 10) &amp;&amp; (i &lt;= 15))\n          d += ('A'+(i-10));\n        else\n          d += ('0'+i);\n        a /= 16;\n    }\n    while (a != 0);\n\n    std::reverse(d.begin(), d.end());\n\n    return d;\n}\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n\nstd::string DecToHex(int a)\n{\n    int i;\n    std::ostringstream oss;\n\n    do\n    {\n        i = a % 16;\n        if ((i &gt;= 10) &amp;&amp; (i &lt;= 15))\n          oss &lt;&lt; ('A'+(i-10));\n        else\n          oss &lt;&lt; ('0'+i);\n        a /= 16;\n    }\n    while (a != 0);\n\n    std::string d = oss.str();\n    std::reverse(d.begin(), d.end());\n\n    return d;\n}\n</code></pre>\n\n<p>In any case, your function is not handling negative numbers at all, which requires some extra work (switching to 2s complement representation before then calculating the hex).  I'll leave that as an exercise for you to work out.</p>\n"}], "owner": {"reputation": 3, "user_id": 7591587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbc8046054e096d7b7edd4649aeec20a?s=128&d=identicon&r=PG&f=1", "display_name": "jianwei", "link": "https://stackoverflow.com/users/7591587/jianwei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 44027342, "answer_count": 2, "score": -2, "last_activity_date": 1495062216, "creation_date": 1495029979, "last_edit_date": 1495051531, "question_id": 44027183, "link": "https://stackoverflow.com/questions/44027183/i-don-t-know-why-my-string-cant-save-the-value", "title": "I don\u2019t know why my string can&#39;t save the value", "body": "<p>I am writing a C++ function to calculate Hex from Dec, but I don\u2019t know why my string can't save the value. Can anybody help me?</p>\n\n<pre><code>string DecToHex(int a){\n  int i=0,j=0;\n  string d,c;\n  while(a!=0)\n  {\n    i=a%16;\n    switch(i)\n    {\n      case 10:\n        d[j]='A';\n        break;\n      case 11:\n        d[j]='B';\n        break;\n      case 12:\n        d[j]='C';\n        break;\n      case 13:\n        d[j]='D';\n        break;\n      case 14:\n        d[j]='E';\n        break;\n      case 15:\n        d[j]='F';\n        break;\n      default:\n        d[j]=48+i;\n        break;\n    }\n\n    a=a/16;\n    j++;\n  }\n\n  cout&lt;&lt;\"D=\"&lt;&lt;d;\n  return d;\n}\n</code></pre>\n"}, {"tags": ["c++", "graph", "visualization"], "comments": [{"owner": {"reputation": 9279, "user_id": 2964675, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dp6kh.jpg?s=128&g=1", "display_name": "MarcoL", "link": "https://stackoverflow.com/users/2964675/marcol"}, "edited": false, "score": 0, "creation_date": 1495093479, "post_id": 44027159, "comment_id": 75109130, "body": "<a href=\"http://stackoverflow.com/questions/238724/visualizing-undirected-graph-thats-too-large-for-graphviz#comment102544_238724\" title=\"visualizing undirected graph thats too large for graphviz%23comment102544_238724\">stackoverflow.com/questions/238724/&hellip;</a>"}], "owner": {"reputation": 1658, "user_id": 48911, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/af0239cdbd3f812735c40f27655277cf?s=128&d=identicon&r=PG", "display_name": "Ameer Jewdaki", "link": "https://stackoverflow.com/users/48911/ameer-jewdaki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 384, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1495030210, "creation_date": 1495029906, "last_edit_date": 1495540982, "question_id": 44027159, "link": "https://stackoverflow.com/questions/44027159/visualizing-extra-large-100-million-nodes-graphs", "title": "Visualizing extra large (100 million nodes) graphs", "body": "<p>I have a sparse extra large directed graph with hundreds of millions of nodes, but the nodes have a max out degree and max in degree of 4 (most have out degree of 2 in fact). So it's quite sparse. I know that graphviz is a good choice but it only offers visualising without downsample which is obviously not a choice if the number of nodes is more than a hundred million.  </p>\n\n<p>Are there tools, preferably C/C++ based (because performance is of importance of course) that offer such visualisations? </p>\n\n<p>I'm aware of similar questions asked on SO, like <a href=\"https://stackoverflow.com/questions/15667166/visualize-big-graphs\">this</a> or <a href=\"https://stackoverflow.com/questions/238724/visualizing-undirected-graph-thats-too-large-for-graphviz\">this</a> but to me they sound like a different problem, both in terms of scale of the graph, its topology, and the technology. </p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 14828, "user_id": 1377097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eFG0R.png?s=128&g=1", "display_name": "beaker", "link": "https://stackoverflow.com/users/1377097/beaker"}, "edited": false, "score": 2, "creation_date": 1495033755, "post_id": 44027142, "comment_id": 75083710, "body": "Please see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. This doesn&#39;t look very minimal."}], "answers": [{"tags": [], "owner": {"reputation": 2369, "user_id": 3564091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2d634bf21a64d8d510ddf6e14b2c9ec?s=128&d=identicon&r=PG&f=1", "display_name": "KjMag", "link": "https://stackoverflow.com/users/3564091/kjmag"}, "is_accepted": false, "score": 1, "last_activity_date": 1495034245, "last_edit_date": 1495034245, "creation_date": 1495033804, "answer_id": 44028698, "question_id": 44027142, "link": "https://stackoverflow.com/questions/44027142/my-project-doesnt-switch-between-two-different-tracking-algorithms/44028698#44028698", "title": "My project doesn&#39;t switch between two different tracking algorithms", "body": "<p>You have an infinite <strong>while (1)</strong> loop that you enter when the <strong>colordetection</strong> variable is <strong>true</strong>, so the program never reaches the <strong>switch</strong> statement after you press '<strong>p</strong>' for the first time and switch the value of the <strong>colordetection</strong> variable. Putting <strong>waitKey(30);</strong> at the end of the loop doesn't break out of it - it just waits for the key input, receives it or not, and then ignores it and goes back to the beginning of the loop.</p>\n\n<p>You could put the <strong>switch</strong> statement to a separate function and call this function at the end of the aforementioned loop apart from where you are calling it now.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8022066"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "answer_count": 1, "score": -3, "last_activity_date": 1495034245, "creation_date": 1495029852, "last_edit_date": 1495030510, "question_id": 44027142, "link": "https://stackoverflow.com/questions/44027142/my-project-doesnt-switch-between-two-different-tracking-algorithms", "title": "My project doesn&#39;t switch between two different tracking algorithms", "body": "<p>Hi I am trying to track an object with opencv in C++ in 2 methods.the first method is with absolute difference alghorithm and the second method is tracking with color using dilate and erode that both of them work perfectly.when you press \"t\" on the keyboard it will use the absdiff algorithm and tracks the object.when you press \"t\" again it will stop the tracking but when i press \"p\" on the keyboard for using the dilate and erode method it starts tracking the ROI area but it doesnt break out of the method when i press \"p\" again and i cant go back to using absdiff method</p>\n\n<pre><code>     #include &lt;opencv\\cv.h&gt;\n        #include &lt;opencv\\highgui.h&gt;\n        #include &lt;opencv2/core/core.hpp&gt;\n        #include &lt;opencv2/highgui/highgui.hpp&gt;\n        #include &lt;iostream&gt;\n        #include &lt;opencv2/imgproc/imgproc.hpp&gt;\n\n        using namespace cv;\n        using namespace std;\n\n        //our sensitivity value to be used in the absdiff() function\n        const static int SENSITIVITY_VALUE = 20;\n        //size of blur used to smooth the intensity image output from absdiff() function\n        const static int BLUR_SIZE = 10;\n           //we'll have just one object to search for\n        //and keep track of its position.\n        int theObject[2] = { 0,0 };\n        //bounding rectangle of the object, we will use the center of this as its position.\n        Rect objectBoundingRectangle = Rect(0, 0, 0, 0);\n\n        int H_MIN = 0;\n        int H_MAX = 256;\n        int S_MIN = 0;\n        int S_MAX = 256;\n        int V_MIN = 0;\n        int V_MAX = 256;\n\n        const string windowName = \"Original Image\";\n        const string windowName1 = \"HSV Image\";\n        const string windowName2 = \"Thresholded Image\";\n        const string windowName3 = \"After Morphological Operations\";\n        const string trackbarWindowName = \"Trackbars\";\n\n        void on_trackbar( int, void* )\n    {//This function gets called whenever a\n        // trackbar position is changed\n\n\n\n\n\n    }\n    string intToString(int number){\n\n\n        std::stringstream ss;\n        ss &lt;&lt; number;\n        return ss.str();\n    }\n    void createTrackbars(){\n        //create window for trackbars\n\n\n        namedWindow(trackbarWindowName,0);\n        //create memory to store trackbar name on window\n        char TrackbarName[50];\n        sprintf( TrackbarName, \"H_MIN\", H_MIN);\n        sprintf( TrackbarName, \"H_MAX\", H_MAX);\n        sprintf( TrackbarName, \"S_MIN\", S_MIN);\n        sprintf( TrackbarName, \"S_MAX\", S_MAX);\n        sprintf( TrackbarName, \"V_MIN\", V_MIN);\n        sprintf( TrackbarName, \"V_MAX\", V_MAX);\n        //create trackbars and insert them into window\n        //3 parameters are: the address of the variable that is changing when the trackbar is moved(eg.H_LOW),\n        //the max value the trackbar can move (eg. H_HIGH), \n        //and the function that is called whenever the trackbar is moved(eg. on_trackbar)\n        //                                  ----&gt;    ----&gt;     ----&gt;      \n        createTrackbar( \"H_MIN\", trackbarWindowName, &amp;H_MIN, H_MAX, on_trackbar );\n        createTrackbar( \"H_MAX\", trackbarWindowName, &amp;H_MAX, H_MAX, on_trackbar );\n        createTrackbar( \"S_MIN\", trackbarWindowName, &amp;S_MIN, S_MAX, on_trackbar );\n        createTrackbar( \"S_MAX\", trackbarWindowName, &amp;S_MAX, S_MAX, on_trackbar );\n        createTrackbar( \"V_MIN\", trackbarWindowName, &amp;V_MIN, V_MAX, on_trackbar );\n        createTrackbar( \"V_MAX\", trackbarWindowName, &amp;V_MAX, V_MAX, on_trackbar );\n\n\n    }\n        void morphOps(Mat &amp;thresh) {\n\n            //create structuring element that will be used to \"dilate\" and \"erode\" image.\n            //the element chosen here is a 3px by 3px rectangle\n\n            Mat erodeElement = getStructuringElement(MORPH_RECT, Size(3, 3));\n            //dilate with larger element so make sure object is nicely visible\n            Mat dilateElement = getStructuringElement(MORPH_RECT, Size(8, 8));\n\n            erode(thresh, thresh, erodeElement);\n            erode(thresh, thresh, erodeElement);\n\n            dilate(thresh, thresh, dilateElement);\n            dilate(thresh, thresh, dilateElement);\n\n        }\n        void trackFilteredObject(int &amp;x, int &amp;y, Mat threshold, Mat &amp;cameraFeed) {\n\n            Mat temp;\n            threshold.copyTo(temp);\n            //these two vectors needed for output of findContours\n            vector&lt; vector&lt;Point&gt; &gt; contours;\n            vector&lt;Vec4i&gt; hierarchy;\n            //find contours of filtered image using openCV findContours function\n            findContours(temp, contours, hierarchy, CV_RETR_CCOMP, CV_CHAIN_APPROX_SIMPLE);\n\n            bool objectFound = false;\n            if (hierarchy.size() &gt; 0) {\n                int numObjects = hierarchy.size();\n                //if number of objects greater than MAX_NUM_OBJECTS we have a noisy filter\n            }\n            int maxX = 0, minX = cameraFeed.cols, maxY = 0, minY = cameraFeed.rows;\n\n            for (int i = 0; i&lt;contours.size(); i++)\n                for (int j = 0; j&lt;contours[i].size(); j++)\n                {\n                    Point p = contours[i][j];\n\n                    maxX = max(maxX, p.x);\n                    minX = min(minX, p.x);\n\n                    maxY = max(maxY, p.y);\n                    minY = min(minY, p.y);\n                }\n\n            rectangle(cameraFeed, Point(minX, minY), Point(maxX, maxY), Scalar(0));\n            //find center of the rectangle\n            int m = minX + maxX / 4;\n            int m2 = minY + maxY / 4;\n            //calculate the arc tangent\n\n            double angle;\n            angle = atan(m / m2);\n            //draw the circle\n            circle(cameraFeed, Point(m, m2), 5, Scalar(255, 255, 255), CV_FILLED, 8, 0);\n        }\n\n        void searchForMovement(Mat thresholdImage, Mat &amp;cameraFeed){\n    //notice how we use the '&amp;' operator for objectDetected and cameraFeed. This is because we wish\n    //to take the values passed into the function and manipulate them, rather than just working with a copy.\n    //eg. we draw to the cameraFeed to be displayed in the main() function.\n    bool objectDetected = false;\n    Mat temp;\n    thresholdImage.copyTo(temp);\n    //these two vectors needed for output of findContours\n    vector&lt; vector&lt;Point&gt; &gt; contours;\n    vector&lt;Vec4i&gt; hierarchy;\n    //find contours of filtered image using openCV findContours function\n    //findContours(temp,contours,hierarchy,CV_RETR_CCOMP,CV_CHAIN_APPROX_SIMPLE );// retrieves all contours\n    findContours(temp,contours,hierarchy,CV_RETR_EXTERNAL,CV_CHAIN_APPROX_SIMPLE );// retrieves external contours\n\n    //if contours vector is not empty, we have found some objects\n    if(contours.size()&gt;0)objectDetected=true;\n    else objectDetected = false;\n\n    if(objectDetected){\n        //the largest contour is found at the end of the contours vector\n        //we will simply assume that the biggest contour is the object we are looking for.\n        vector&lt; vector&lt;Point&gt; &gt; largestContourVec;\n        largestContourVec.push_back(contours.at(contours.size()-1));\n        //make a bounding rectangle around the largest contour then find its centroid\n        //this will be the object's final estimated position.\n        objectBoundingRectangle = boundingRect(largestContourVec.at(0));\n        int xpos = objectBoundingRectangle.x+objectBoundingRectangle.width/2;\n        int ypos = objectBoundingRectangle.y+objectBoundingRectangle.height/2;\n\n        //update the objects positions by changing the 'theObject' array values\n        theObject[0] = xpos , theObject[1] = ypos;\n    }\n    //make some temp x and y variables so we dont have to type out so much\n    int x = theObject[0];\n    int y = theObject[1];\n\n            int maxX = 0, minX = cameraFeed.cols, maxY=0, minY = cameraFeed.rows;\n\n        for(int i=0; i&lt;contours.size(); i++)\n            for(int j=0; j&lt;contours[i].size(); j++)\n            {\n                Point p = contours[i][j];\n\n                maxX = max(maxX, p.x);\n                minX = min(minX, p.x);\n\n                maxY = max(maxY, p.y);\n                minY = min(minY, p.y);\n            }\n        rectangle(cameraFeed, Point(minX, minY), Point(maxX, maxY), Scalar(0));\n\n        int m = minX + maxX / 4;\n        int m2 = minY + maxY / 4;\n\n        double angle;\n        angle = atan(m / m2);\n\n        circle(cameraFeed, Point(m, m2), 5, Scalar(255, 255, 255), CV_FILLED, 8, 0);\n        }\n\n        int main(int argc, char* argv[]) {\n\n//some boolean variables for added functionality\n    bool objectDetected = false;\n    //these two can be toggled by pressing 'd' or 't'\n    bool debugMode = false;\n    bool trackingEnabled = false;\n    bool colordetection=false;\n    //set up the matrices that we will need\n    //the two frames we will be comparing\n    Mat frame1,frame2;\n    //their grayscale images (needed for absdiff() function)\n    Mat grayImage1,grayImage2;\n    //resulting difference image\n    Mat differenceImage;\n    //thresholded difference image (for use in findContours() function)\n    Mat thresholdImage;\n    //video capture object.\n    VideoCapture capture;\n\n            capture.open(0);\n\n            if (!capture.isOpened()) {\n                cout &lt;&lt; \"ERROR ACQUIRING VIDEO FEED\\n\";\n                getchar();\n                return -1;\n            }\n\n            while (1) {\n\n                //read first frame\n        capture.read(frame1);\n        //convert frame1 to gray scale for frame differencing\n        cv::cvtColor(frame1,grayImage1,COLOR_BGR2GRAY);\n        //copy second frame\n        capture.read(frame2);\n        //convert frame2 to gray scale for frame differencing\n        cv::cvtColor(frame2,grayImage2,COLOR_BGR2GRAY);\n        //perform frame differencing with the sequential images. This will output an \"intensity image\"\n        //do not confuse this with a threshold image, we will need to perform thresholding afterwards.\n        cv::absdiff(grayImage1,grayImage2,differenceImage);\n        //threshold intensity image at a given sensitivity value\n        cv::threshold(differenceImage,thresholdImage,SENSITIVITY_VALUE,255,THRESH_BINARY);\n        if(debugMode==true){\n            //show the difference image and threshold image\n            cv::imshow(\"Difference Image\",differenceImage);\n            cv::imshow(\"Threshold Image\", thresholdImage);\n        }else{\n            //if not in debug mode, destroy the windows so we don't see them anymore\n            cv::destroyWindow(\"Difference Image\");\n            cv::destroyWindow(\"Threshold Image\");\n        }\n        //blur the image to get rid of the noise. This will output an intensity image\n        cv::blur(thresholdImage,thresholdImage,cv::Size(BLUR_SIZE,BLUR_SIZE));\n        //threshold again to obtain binary image from blur output\n        cv::threshold(thresholdImage,thresholdImage,SENSITIVITY_VALUE,255,THRESH_BINARY);\n        if(debugMode==true){\n            //show the threshold image after it's been \"blurred\"\n\n            imshow(\"Final Threshold Image\",thresholdImage);\n\n        }\n        else {\n            //if not in debug mode, destroy the windows so we don't see them anymore\n            cv::destroyWindow(\"Final Threshold Image\");\n        }\n\n                if (colordetection == true) {\n                    //some boolean variables for different functionality within this\n                    //program\n                    bool trackObjects = true;\n                    bool useMorphOps = true;\n                    //Matrix to store each frame of the webcam feed\n                    Mat cameraFeed;\n                    //matrix storage for HSV image\n                    Mat HSV;\n                    //matrix storage for binary threshold image\n                    //x and y values for the location of the object\n                    int x = 0, y = 0;\n                    //create slider bars for HSV filtering\n                    createTrackbars();\n                    //start an infinite loop where webcam feed is copied to cameraFeed matrix\n                    //all of our operations will be performed within this loop\n                    while (1) {\n                        //store image to matrix\n                        capture.read(cameraFeed);\n                        //convert frame from BGR to HSV colorspace\n                        cvtColor(cameraFeed, HSV, COLOR_BGR2HSV);\n                        //filter HSV image between values and store filtered image to\n                        //threshold matrix\n                        inRange(HSV, Scalar(H_MIN, S_MIN, V_MIN), Scalar(H_MAX, S_MAX, V_MAX), thresholdImage);\n                        //perform morphological operations on thresholded image to eliminate noise\n                        //and emphasize the filtered object(s)\n                        if (useMorphOps)\n                            morphOps(thresholdImage);\n                        //pass in thresholded frame to our object tracking function\n                        //this function will return the x and y coordinates of the\n                        //filtered object\n                        if (trackObjects)\n                            trackFilteredObject(x, y, thresholdImage, cameraFeed);\n\n                        //show frames \n                        cv::imshow(\"Thresholded Image\", thresholdImage);\n                        cv::imshow(\"HSV Image\", HSV);\n                        cv::imshow(\"Original Image\", cameraFeed);\n\n                        //delay 30ms so that screen can refresh.\n                        //image will not appear without this waitKey() command\n                        waitKey(30);\n                    }\n\n                }\n                else {\n                    cv::destroyWindow(\"Original Image\");\n                    cv::destroyWindow(\"HSV Image\");\n                    cv::destroyWindow(\"Thresholded Image\");\n                    cv::destroyWindow(\"Trackbars\");\n\n                }\n\n                if (trackingEnabled) {\n                    searchForMovement(thresholdImage, frame1);\n                }\n\n                imshow(\"Frame1\", frame1);\n\n\n                switch (waitKey(10)) {\n\n                case 27: //'esc' key has been pressed, exit program.\n                    return 0;\n                case 116: //'t' has been pressed. this will toggle tracking\n                    trackingEnabled = !trackingEnabled;\n                    if (trackingEnabled == false) cout &lt;&lt; \"Tracking disabled.\" &lt;&lt; endl;\n                    else cout &lt;&lt; \"Tracking enabled.\" &lt;&lt; endl;\n                    break;\n                case 100: //'d' has been pressed. this will debug mode\n                    debugMode = !debugMode;\n                    if (debugMode == false) cout &lt;&lt; \"Debug mode disabled.\" &lt;&lt; endl;\n                    else cout &lt;&lt; \"Debug mode enabled.\" &lt;&lt; endl;\n                    break;\n                case 112: //'t' has been pressed. this will toggle tracking to color tracking using dilate and erode\n                    colordetection = !colordetection;\n                    if (colordetection == false) cout &lt;&lt; \"Tracking not switched\" &lt;&lt; endl;\n                    else {\n                        cout &lt;&lt; \"Tracking switched\" &lt;&lt; endl;\n                        break;\n                    }\n                }\n            }\n            return 0;\n        }\n</code></pre>\n"}, {"tags": ["c++", "windows", "netbeans", "mingw"], "comments": [{"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1495036263, "post_id": 44027093, "comment_id": 75085609, "body": "I just ran your code on VS and it worked fine as I expected.  I don&#39;t have Net Beans on this machine so I can&#39;t try it there.  Did Net beans provide the  &quot;int argc, char** argv&quot; in the main header?  If so then I would take it out, recompile...  At any rate it is a Net Beans issue"}, {"owner": {"reputation": 4061, "user_id": 3393058, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/TmKho.png?s=128&g=1", "display_name": "Aloso", "link": "https://stackoverflow.com/users/3393058/aloso"}, "reply_to_user": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1495044460, "post_id": 44027093, "comment_id": 75090495, "body": "Thanks for your help, it&#39;s very appreciated. Removing the parameters didn&#39;t solve it, so I will now install VS. Anyway, I&#39;d like to know why this error occurs."}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1495121519, "post_id": 44027093, "comment_id": 75129388, "body": "I have used Net Beans a lot and i have always found it to be clunky in comparison to other compilers.  Free isn&#39;t always better.  You will like VS much better."}, {"owner": {"reputation": 3285, "user_id": 2961540, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sECMV.jpg?s=128&g=1", "display_name": "HEKTO", "link": "https://stackoverflow.com/users/2961540/hekto"}, "edited": false, "score": 0, "creation_date": 1495407344, "post_id": 44027093, "comment_id": 75225308, "body": "It&#39;s not a NetBeans problem - please look at this question and its answers: <a href=\"http://stackoverflow.com/questions/18668003/the-procedure-entry-point-gxx-personality-v0-could-not-be-located\" title=\"the procedure entry point gxx personality v0 could not be located\">stackoverflow.com/questions/18668003/&hellip;</a>"}], "owner": {"reputation": 4061, "user_id": 3393058, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/TmKho.png?s=128&g=1", "display_name": "Aloso", "link": "https://stackoverflow.com/users/3393058/aloso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495031148, "creation_date": 1495029714, "last_edit_date": 1495031148, "question_id": 44027093, "link": "https://stackoverflow.com/questions/44027093/error-when-using-fstream-in-netbeans-mingw", "title": "Error when using fstream in Netbeans/MingW", "body": "<p>A while ago I installed MingW to learn C++ with NetBeans, but until now I didn't find the time. Now I created a new C++ project, made a Hello World program with <code>std::cout</code> and it worked immediately. Then I tried to write a file, but it failed:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n\nusing namespace std;\n\nint main(int argc, char** argv) {\n\n    cout &lt;&lt; \"test\" &lt;&lt; endl;\n\n    fstream f;\n    f.open(\"a.txt\", fstream::in | fstream::out | fstream::trunc);\n    f &lt;&lt; \"out\" &lt;&lt; endl;\n    f.close();\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>lumosc (Build, run)</strong>:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>cd 'D:\\&lt;My name&gt;\\Programmierung\\NetBeans Projects\\lumosc_1\\lumosc'\nD:\\Programme\\MinGW\\msys\\1.0\\bin\\make.exe -f Makefile CONF=Debug\n\"/D/Programme/MinGW/msys/1.0/bin/make.exe\" -f nbproject/Makefile-Debug.mk QMAKE= SUBPROJECTS= .build-conf\nmake.exe[1]: Entering directory `/d/&lt;My name&gt;/Programmierung/NetBeans Projects/lumosc_1/lumosc'\n\"/D/Programme/MinGW/msys/1.0/bin/make.exe\"  -f nbproject/Makefile-Debug.mk dist/Debug/MinGW_1-Windows/lumosc.exe\nmake.exe[2]: Entering directory `/d/&lt;My name&gt;/Programmierung/NetBeans Projects/lumosc_1/lumosc'\nmkdir -p build/Debug/MinGW_1-Windows\nrm -f \"build/Debug/MinGW_1-Windows/main.o.d\"\ng++    -c -g -MMD -MP -MF \"build/Debug/MinGW_1-Windows/main.o.d\" -o build/Debug/MinGW_1-Windows/main.o main.cpp\nmkdir -p dist/Debug/MinGW_1-Windows\ng++     -o dist/Debug/MinGW_1-Windows/lumosc build/Debug/MinGW_1-Windows/main.o \nmake.exe[2]: Leaving directory `/d/&lt;My name&gt;/Programmierung/NetBeans Projects/lumosc_1/lumosc'\nmake.exe[1]: Leaving directory `/d/&lt;My name&gt;/Programmierung/NetBeans Projects/lumosc_1/lumosc'\n</code></pre>\n\n<p><strong>Output</strong> (Note that <code>cout &lt;&lt; \"test\" &lt;&lt; endl;</code> wasn't executed):</p>\n\n<pre><code>RUN FAILED (exit value -1.073.741.511, total time: 64ms)\n</code></pre>\n\n<p>I didn't see any error message. However, when I started the newly created <code>lumosc.exe</code> manually, the following window popped up:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XS9LT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XS9LT.png\" alt=\"Error message: Einsprungspunkt nicht gefunden\"></a></p>\n\n<p>(<strong>Translated</strong>: Entry point not found - The procedure entry point \"__gxx_personality_v0\" was not found in the \"libstdc++-6.dll\" DLL.)</p>\n\n<p>Here's some information about my MingW installation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZHU1L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZHU1L.png\" alt=\"Version info\"></a></p>\n\n<hr>\n\n<p>I'm completely new to this topic and I hope somebody can help me out!</p>\n"}, {"tags": ["c++", "opus", "bitstream"], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 6909605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f820a846774a23ea0cb411ccfed920ff?s=128&d=identicon&r=PG&f=1", "display_name": "Logan S.", "link": "https://stackoverflow.com/users/6909605/logan-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1496153975, "creation_date": 1496153975, "answer_id": 44264830, "question_id": 44027079, "link": "https://stackoverflow.com/questions/44027079/size-of-compressed-opus-frame-bytes/44264830#44264830", "title": "Size of compressed Opus frame (bytes)", "body": "<p>You're inside an ogg file, I assume. Why can't you read it from the lacing table like any other data packet?</p>\n\n<p>The first ogg page is OPUSHEAD, the second is OPUSTAGS, every page following that should just be the opus packets laced together, no special formatting or anything. It's in the spec here: <a href=\"https://wiki.xiph.org/OggOpus\" rel=\"nofollow noreferrer\">https://wiki.xiph.org/OggOpus</a></p>\n"}], "owner": {"reputation": 31, "user_id": 7046631, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9pBVRVzKV_E/AAAAAAAAAAI/AAAAAAAAAHM/XcBvTYbvS7U/photo.jpg?sz=128", "display_name": "Ingo Siegert", "link": "https://stackoverflow.com/users/7046631/ingo-siegert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496153975, "creation_date": 1495029676, "question_id": 44027079, "link": "https://stackoverflow.com/questions/44027079/size-of-compressed-opus-frame-bytes", "title": "Size of compressed Opus frame (bytes)", "body": "<p>How do I calculate the size of the compressed opus frame (number of bytes)? I have read the OggS Page and the TOC-Header. The next bytes should belong to the compressed frame, but how do I get the number of bytes?</p>\n"}, {"tags": ["c++", "visual-studio", "inline-assembly"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1495031083, "post_id": 44027006, "comment_id": 75081537, "body": "It does <i>not</i> expand stack, it merely tries to intentionally generate a stackoverflow exception.  Ensuring there is a memory read every 4096 bytes so it will always hit the guard page and trigger the exception.  Technically it is possible for code to access memory beyond the stack boundary without that triggering an SOE.  Very unusual, big messy impossible to diagnose bug when that happens.  And exploitable.  Fwiw, if you want chkstk with that prologue then there is no remaining reason to use naked."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1495031920, "post_id": 44027006, "comment_id": 75082268, "body": "To add to @Hans Passant&#39;s answer: Windows places a 4kB guard page at the top of the stack. Writing to the guard page triggers a harmless CPU exception; it&#39;s this exception which tells Windows to grow the stack by another 4kB and moves the guard page to the new top of stack. This logic works regardless of the programming language used. <code>_chkstk</code> is used by VC++ so all locals can be initialized in any order."}], "owner": {"reputation": 8020, "user_id": 1237747, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5674cd4a4abd08d63c5c3de20afbc97d?s=128&d=identicon&r=PG", "display_name": "ST3", "link": "https://stackoverflow.com/users/1237747/st3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 556, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495033018, "creation_date": 1495029471, "last_edit_date": 1495033018, "question_id": 44027006, "link": "https://stackoverflow.com/questions/44027006/calling-chkstk-manually", "title": "Calling _chkstk manually", "body": "<p>I have performance critical algorithm and implemented it with inline assembly, it resulted in 40% performance gain so I want keep and use it, however there is one issue.</p>\n\n<p>I use <a href=\"https://msdn.microsoft.com/en-us/library/h5w10wxs.aspx\" rel=\"nofollow noreferrer\">naked declaration</a>, that leaves everything up to me and compiler doesn't add anything in function scope. My function looks like this:</p>\n\n<pre><code>bool __declspec(naked) Foo(...)\n{\n    __asm\n    {\n        push ebp\n        mov ebp, esp\n        sub esp, 0x10000\n\n        /*some code here*/\n\n        ret\n    }\n}\n</code></pre>\n\n<p>As you see I have 64KB of locals, so it can crash because of stack corruption. That compiler does, it inserts calls to <a href=\"https://msdn.microsoft.com/en-us/library/ms648426(v=vs.85).aspx\" rel=\"nofollow noreferrer\">_chkstk</a> routine which expands stack.</p>\n\n<p>As I searched there are some files with this routine implemented:</p>\n\n<pre><code>C:\\Program Files (x86)\\Microsoft Visual Studio [version]\\VC\\crt\\src\\intel\\chkstk.asm\n</code></pre>\n\n<p>I would like to ask how can I import and use routine from there and if there is another way of preventing crashes.</p>\n\n<p>What I can think about is adding my own implementation, something like that:</p>\n\n<pre><code>mov ecx, 0x10\nguard_page_testing_starts:\ntest [esp], eax\nsub esp, 0x1000\ndec ecx\njnz guard_page_testing_starts\n</code></pre>\n\n<p>But here is another question, does it have any negative impact?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 3027, "user_id": 4972721, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/isW1d.jpg?s=128&g=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/4972721/ali"}, "edited": false, "score": 0, "creation_date": 1495029006, "post_id": 44026776, "comment_id": 75079907, "body": "whats your code? whats your output?"}, {"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 0, "creation_date": 1495029127, "post_id": 44026776, "comment_id": 75079999, "body": "The standard library does not provide sufficient functionality for this. You need to find another library such as ncurses if you want to stay with the command line interface or some graphics library like OpenGL, DirectX, SFML, SDL2, ...."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8025813"}, "edited": false, "score": 0, "creation_date": 1495030538, "post_id": 44026776, "comment_id": 75081151, "body": "Guys just tell me how to use the curses to display a 2d array repeatedly after clearing the screen and without that flickering ..Give me a code for that."}, {"owner": {"reputation": 8388, "user_id": 5890227, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/M6Of5.png?s=128&g=1", "display_name": "Khalil Khalaf", "link": "https://stackoverflow.com/users/5890227/khalil-khalaf"}, "edited": false, "score": 0, "creation_date": 1495031581, "post_id": 44026776, "comment_id": 75081980, "body": "@Gaming4life welcome to stack overflow. This site does not work like that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8025813"}, "edited": false, "score": 0, "creation_date": 1495086305, "post_id": 44026776, "comment_id": 75104921, "body": "sorry but then its useless because im new to coding and i need an example of the code.I cant just grasp what you guys are trying to tell me.Btw I got the solution to the problem . I set the cursor to (0,0) before calling the output function and now its fine.I dont know whats wrong with system(&quot;cls&quot;)."}], "owner": {"user_type": "does_not_exist", "display_name": "user8025813"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1495028917, "creation_date": 1495028917, "question_id": 44026776, "link": "https://stackoverflow.com/questions/44026776/displaying-2d-array-repeatedly-to-update-the-changes-made", "title": "Displaying 2d array repeatedly to update the changes made", "body": "<p>Im making a brick breaker game in c++;\nWhen the user moves the base with arrow keys the output window displays the 2d array again but it takes some time to display which makes it not look proper.\nHelp me - tell me how i can move the base with arrow keys and display the 2d array again and again without this problem so that it looks smooth.\nIts my first year in c++ and Im in school so explain it to me considering im a newbie in programming.</p>\n"}, {"tags": ["c#", "c++", "linux", "opengl", "unity3d"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1495028896, "post_id": 44026673, "comment_id": 75079829, "body": "I think a better design would be to make it the other way around, and to let Unity handle the main event loop and handling and only calling out to time-critical parts implemented in C++ when (and if!) needed."}, {"owner": {"reputation": 931, "user_id": 2394967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFaiD.png?s=128&g=1", "display_name": "sknt", "link": "https://stackoverflow.com/users/2394967/sknt"}, "edited": false, "score": 1, "creation_date": 1495028981, "post_id": 44026673, "comment_id": 75079893, "body": "I think the only option to use C++ in Unity are <a href=\"https://docs.unity3d.com/Manual/NativePlugins.html\" rel=\"nofollow noreferrer\">NativePlugins</a>. But why do you consider Qt and OpenGL to be unserious? My experience with Qt was great, and there are many applications (open source and commercial) that are built with Qt."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1495029573, "post_id": 44026673, "comment_id": 75080363, "body": "removed the last sentence, because it made the otherwise ok-ish question into offtopic"}, {"owner": {"reputation": 16, "user_id": 422238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nPoQ6.jpg?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/422238/ivan"}, "reply_to_user": {"reputation": 931, "user_id": 2394967, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFaiD.png?s=128&g=1", "display_name": "sknt", "link": "https://stackoverflow.com/users/2394967/sknt"}, "edited": false, "score": 0, "creation_date": 1495030060, "post_id": 44026673, "comment_id": 75080764, "body": "@Skynet I don&#39;t consider OpenGl and Qt unserios. Maybe my choice of words was poor, but what I would like is to be more compatible with the mainstream? - let&#39;s say... Someprogrammerdude I know that the other way around is more natural for Unity, but this is just the way I need to do it. Maybe, an -so library with an interface, implemented in unity.. ? and then another -so library to return the control to my C++ code? The thing is, I need to have the control from C++, I don&#39;t really care how the control gets to Unity. (but it should be native, so no sockets)"}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 7028218, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-y4WQMNDJE7U/AAAAAAAAAAI/AAAAAAAAACE/8TqvZTlHYiQ/photo.jpg?sz=128", "display_name": "ArQane - ArQ", "link": "https://stackoverflow.com/users/7028218/arqane-arq"}, "is_accepted": false, "score": 0, "last_activity_date": 1495031851, "creation_date": 1495031851, "answer_id": 44027914, "question_id": 44026673, "link": "https://stackoverflow.com/questions/44026673/start-unity-from-c-decoupling-control-and-visualization/44027914#44027914", "title": "Start Unity from C++ (decoupling control and visualization)", "body": "<p>I believe Unity was specifically designed for the purposes you stated above, and it'll probably be painstakingly difficult to modify it.</p>\n\n<p>To be honest, the better you create the animations and models, the better (for any game design engine) your graphics will be. Not sure if that is the problem this is pertaining to, but the built in graphics programs are merely tools. It takes the design to make a stunning game.</p>\n"}], "owner": {"reputation": 16, "user_id": 422238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nPoQ6.jpg?s=128&g=1", "display_name": "Ivan", "link": "https://stackoverflow.com/users/422238/ivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1495031851, "creation_date": 1495028642, "last_edit_date": 1495029540, "question_id": 44026673, "link": "https://stackoverflow.com/questions/44026673/start-unity-from-c-decoupling-control-and-visualization", "title": "Start Unity from C++ (decoupling control and visualization)", "body": "<p>I'm running Unity on Linux and in C++ I have a set of controllers (and physics) for transforming objects. Currently, I am using Qt and OpenGL to display it. I was wondering, how would I exchange my Qt, OpenGL implementation with a more serious thing as Unity? - In short, could I feed unity from C++ with information about my objects status, which Unity would then visualize? </p>\n"}, {"tags": ["c++", "sockets", "io", "network-programming", "udp"], "answers": [{"tags": [], "owner": {"reputation": 3204, "user_id": 2228338, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-b3jn9hCpWYU/AAAAAAAAAAI/AAAAAAAAAAs/-1U-aoxnBOc/photo.jpg?sz=128", "display_name": "Yuki", "link": "https://stackoverflow.com/users/2228338/yuki"}, "is_accepted": true, "score": 1, "last_activity_date": 1495041891, "last_edit_date": 1495041891, "creation_date": 1495040779, "answer_id": 44030981, "question_id": 44026573, "link": "https://stackoverflow.com/questions/44026573/cannot-receive-data-when-select-and-udp-protocol-combined/44030981#44030981", "title": "Cannot receive data when select and UDP protocol combined", "body": "<p>Seems like a logic flaw in <code>addFd</code>. Should be something like <code>maxfd = std::max(fd, maxfd)</code>, as well as initialize <code>maxfd</code> to something like <code>INT_MIN</code> in the constructor.</p>\n"}], "owner": {"reputation": 453, "user_id": 4744804, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/ZJAEC.png?s=128&g=1", "display_name": "Lw Cui", "link": "https://stackoverflow.com/users/4744804/lw-cui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 44030981, "answer_count": 1, "score": 0, "last_activity_date": 1495041891, "creation_date": 1495028432, "question_id": 44026573, "link": "https://stackoverflow.com/questions/44026573/cannot-receive-data-when-select-and-udp-protocol-combined", "title": "Cannot receive data when select and UDP protocol combined", "body": "<p>The original code for the UDP client is as shown below:</p>\n\n<pre><code>while (getline(cin, buf)) {\n        // c.getConnd() return connected fd\n        write(c.getConnfd(), buf.c_str(), buf.size());\n        memset(cbuf, 0, sizeof(cbuf));\n        read(c.getConnfd(), cbuf, 1024);\n        LOG(DEBUG) &lt;&lt; \"read message: \" &lt;&lt; cbuf;\n    }\n</code></pre>\n\n<p>It works fine, so neither server(using recvfrom and sendto) nor socket binding causes this problem. </p>\n\n<p>To learn IO multiplex I write a class named <code>IOMultiplexingUtility</code>, which enable user combine a <code>fd</code> with respective callable object. After setting them it step into a infinite loop (find a readable fd - do some action - wait again):</p>\n\n<pre><code>class IOMultiplexingUtility {\npublic:\n    IOMultiplexingUtility() {\n        FD_ZERO(&amp;socketSet);\n    }\n\n    void addFd(int fd, std::function&lt;void(int)&gt; action) {\n        maxfd = fd + 1;\n        FD_SET(fd, &amp;socketSet);\n        fdVec[fd] = action;\n    }\n\n    void start() {\n        auto readySet = socketSet;\n        select(maxfd + 1, &amp;readySet, NULL, NULL, NULL);\n        for (auto &amp;pair: fdVec)\n            if (FD_ISSET(pair.first, &amp;readySet)) {\n                if (pair.second != nullptr)pair.second(pair.first);\n                else if (defaultAction) defaultAction(pair.first);\n            }\n    }\n\nprivate:\n    fd_set socketSet;\n    int maxfd;\n    std::unordered_map&lt;int, std::function&lt;void(int)&gt;&gt; fdVec;\n};\n</code></pre>\n\n<p>Modified UDP client code like this:</p>\n\n<pre><code>io.addFd(c.getConnfd(), [&amp;c](int)mutable -&gt; void {\n    char cbuf[1024];\n    memset(cbuf, 0, sizeof(cbuf));\n    read(c.getConnfd(), cbuf, 1024);\n    cout &lt;&lt; cbuf &lt;&lt; endl;\n});\n\nio.addFd(fileno(stdin), [&amp;c](int)mutable -&gt; void {\n    string buf;\n    getline(cin, buf);\n    write(c.getConnfd(), buf.c_str(), buf.size());\n});\n\nwhile (true) io.start();\n</code></pre>\n\n<p>Bug occurred (I input text, server receives and sends successfully, but <code>cbuf</code> never be outputted) and I can't figure out a way to resolve it. Any idea is appreciated.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 8847, "user_id": 3484570, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/r5BRZ.png?s=128&g=1", "display_name": "nwp", "link": "https://stackoverflow.com/users/3484570/nwp"}, "edited": false, "score": 3, "creation_date": 1495028508, "post_id": 44026542, "comment_id": 75079513, "body": "Read about what <a href=\"http://en.cppreference.com/w/cpp/language/dynamic_cast\" rel=\"nofollow noreferrer\"><code>dynamic_cast</code></a> actually does."}], "answers": [{"tags": [], "owner": {"reputation": 51094, "user_id": 210102, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/OViyp.jpg?s=128&g=1", "display_name": "Steve Townsend", "link": "https://stackoverflow.com/users/210102/steve-townsend"}, "is_accepted": false, "score": 2, "last_activity_date": 1495028445, "last_edit_date": 1495540039, "creation_date": 1495028445, "answer_id": 44026576, "question_id": 44026542, "link": "https://stackoverflow.com/questions/44026542/dynamic-cast-casting-to-pointer-to-class-not-in-hierarchy/44026576#44026576", "title": "dynamic_cast casting to pointer to class not in hierarchy", "body": "<p>A failed <code>dynamic_cast</code> on a pointer returns <code>nullptr</code>, it does not throw. See <a href=\"https://stackoverflow.com/questions/16476613/when-dynamic-cast-will-throw-exception-in-case-used-with-pointer\">here</a> for more details.</p>\n"}], "owner": {"reputation": 563, "user_id": 3494614, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/6d126b0db2c9c00ed1319d19231a386f?s=128&d=identicon&r=PG&f=1", "display_name": "user3494614", "link": "https://stackoverflow.com/users/3494614/user3494614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "closed_date": 1495028471, "answer_count": 1, "score": -1, "last_activity_date": 1495028445, "creation_date": 1495028339, "question_id": 44026542, "link": "https://stackoverflow.com/questions/44026542/dynamic-cast-casting-to-pointer-to-class-not-in-hierarchy", "closed_reason": "Duplicate", "title": "dynamic_cast casting to pointer to class not in hierarchy", "body": "<p>I was working on project where in by mistake I typed different class name while doing dynamic_cast and it worked didn't throw any exception and problem occurred in different module. \nIn a nutshell we have a class hierarchy where in Class B is derived from base class A and both has virtual functions. There is separate base class C with virtual function. Now while doing dynamic_cast on pointer to C I mistyped to A as in below code and it worked.</p>\n\n<p>My question is why dynamic_cast is now throwing exception in this case as it should throw an exception since I am trying to cast the input pointer to completely different class pointer. \nI ran it on <a href=\"http://ideone.com/Fpb3t1\" rel=\"nofollow noreferrer\">http://ideone.com/Fpb3t1</a> here too no exception was thrown.  </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass A\n{\n    public:\n        virtual void method() {;}\n};\n\nclass B : public A\n{\n};\n\nclass C\n{\n    public:\n        virtual void no(int arg) {;}\n};\n\nint main()\n{\n    C obj;\n    A* ptr = NULL;\n    try\n    {\n        C *cptr = &amp;obj;\n        ptr = dynamic_cast&lt;A*&gt; (cptr);\n    }\n    catch (...)\n    {\n        std::cout &lt;&lt; std::endl &lt;&lt; \"NO EXCEPTION\" &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "arrays", "struct"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1495027076, "post_id": 44025987, "comment_id": 75078346, "body": "You do not need to <code>typedef</code> a <code>struct</code> in c++. <code>struct Person { ... };</code> is sufficient."}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": true, "score": 4, "last_activity_date": 1495027111, "creation_date": 1495027111, "answer_id": 44026079, "question_id": 44025987, "link": "https://stackoverflow.com/questions/44025987/c-c-copying-by-value-arrays-that-are-part-of-structs/44026079#44026079", "title": "C/C++ - copying by value arrays that are part of structs", "body": "<blockquote>\n  <p>[...] the <code>children</code> array of <code>p</code>, which is actually a member of type <code>std::string*</code> [...]</p>\n</blockquote>\n\n<p><code>children</code> is an array of <code>MAX_NUM_CHILDREN</code> strings, not a pointer. All of its elements will be copied over to <code>person_copy.children</code> by <code>Person</code>'s copy constructor.</p>\n"}, {"comments": [{"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495027433, "post_id": 44026170, "comment_id": 75078610, "body": "<code>I don&#39;t think there the array will decay in this example</code> Of course it won&#39;t. If arrays within objects decayed to pointers during their declaration, it would make C/C++ useless. Decay only occurs in cases like assigning to a pointer, including the typical case of conversion when passing a raw array to a function."}, {"owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495027698, "post_id": 44026170, "comment_id": 75078853, "body": "no but it could have decay when passing <code>Person</code> to the function (that&#39;s why I think it&#39;s better to use <code>std::array</code>: there are no risk of decay). (C and C++ have some weird corner cases so I wouldn&#39;t have been surprised)"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1495037967, "post_id": 44026170, "comment_id": 75086706, "body": "Bare arrays can only decay when they are named directly, not when they are part of some other object that is passed around or whatever. Again, the latter would make the language absurd."}], "tags": [], "owner": {"reputation": 1050, "user_id": 4534275, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/671721deaa074d660cc7a13bfbd6b397?s=128&d=identicon&r=PG", "display_name": "nefas", "link": "https://stackoverflow.com/users/4534275/nefas"}, "is_accepted": false, "score": 0, "last_activity_date": 1495027365, "creation_date": 1495027365, "answer_id": 44026170, "question_id": 44025987, "link": "https://stackoverflow.com/questions/44025987/c-c-copying-by-value-arrays-that-are-part-of-structs/44026170#44026170", "title": "C/C++ - copying by value arrays that are part of structs", "body": "<p>I don't think there the array will decay in this example so the content will be copied.</p>\n\n<p><code>T[]</code> and <code>T*</code> are different but <code>T[]</code> can decay to <code>T*</code> (you can look for the array decaying rules).</p>\n\n<p>Your <code>Person</code> struct should be declared like that:</p>\n\n<pre><code>struct Person {\n    std::string name;\n    std::string children[MAX_NUM_CHILDREN];\n};\n</code></pre>\n\n<p>That's shorter and that's the C++ way.</p>\n\n<p>BTW, the copy constructor will be called because this is an assignment initialisation but it's better use the <code>Person p(p2);</code> (or <code>Person p{p2}</code> with C++11 compatible compiler) initialisation form.</p>\n"}], "owner": {"reputation": 9280, "user_id": 3322273, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WBXKk.png?s=128&g=1", "display_name": "SomethingSomething", "link": "https://stackoverflow.com/users/3322273/somethingsomething"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 44026079, "answer_count": 2, "score": -1, "last_activity_date": 1495027365, "creation_date": 1495026858, "question_id": 44025987, "link": "https://stackoverflow.com/questions/44025987/c-c-copying-by-value-arrays-that-are-part-of-structs", "title": "C/C++ - copying by value arrays that are part of structs", "body": "<p>consider the following C++ struct:</p>\n\n<pre><code>typedef struct Person {\n    std::string name;\n    std::string children[MAX_NUM_CHILDREN];\n} Person;\n</code></pre>\n\n<p>The question is, what happens in the following scenario:</p>\n\n<pre><code>void do_something(const Person&amp; p) {\n    Person person_copy = p;\n}\n</code></pre>\n\n<p>The question is whether the <code>children</code> array of <code>p</code>, which is actually a member of type <code>std::string*</code>, is going to be copied as a pointer, or is every string in the <code>children</code> array going to be copied by value using the copy constructor?</p>\n"}, {"tags": ["c++", "c-strings"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 4, "creation_date": 1495026968, "post_id": 44025949, "comment_id": 75078243, "body": "<code>strcpy</code> puts the terminator <i>after</i> the the string it writes. If the buffer is too small, that&#39;s your problem."}], "answers": [{"tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 1, "last_activity_date": 1495026949, "creation_date": 1495026949, "answer_id": 44026015, "question_id": 44025949, "link": "https://stackoverflow.com/questions/44025949/null-termination-didnt-appear-in-the-array-on-strcpy-ing/44026015#44026015", "title": "null termination didn&#39;t appear in the array on strcpy-ing", "body": "<p>You have undefined behaviour, <code>\"helloworld\"</code> is actually <code>\"helloworld\\0\"</code>, that is 11 characters. <code>strcpy</code> tries to copy over the whole string including NUL but <code>c</code> is only able to hold 10 characters.</p>\n"}, {"tags": [], "owner": {"reputation": 13144, "user_id": 341291, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/LmEnh.jpg?s=128&g=1", "display_name": "Axel", "link": "https://stackoverflow.com/users/341291/axel"}, "is_accepted": false, "score": 0, "last_activity_date": 1495026956, "creation_date": 1495026956, "answer_id": 44026017, "question_id": 44025949, "link": "https://stackoverflow.com/questions/44025949/null-termination-didnt-appear-in-the-array-on-strcpy-ing/44026017#44026017", "title": "null termination didn&#39;t appear in the array on strcpy-ing", "body": "<p><code>strcpy</code> does not know how long the target array is. It copies until (and including) the terminating 0 byte. So, the whole string <code>helloworld\\0</code> is copied. Note that this is 11 chars and you might as well get a crash.</p>\n"}, {"tags": [], "owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "is_accepted": true, "score": 1, "last_activity_date": 1495037403, "last_edit_date": 1495037403, "creation_date": 1495026984, "answer_id": 44026028, "question_id": 44025949, "link": "https://stackoverflow.com/questions/44025949/null-termination-didnt-appear-in-the-array-on-strcpy-ing/44026028#44026028", "title": "null termination didn&#39;t appear in the array on strcpy-ing", "body": "<p>Your code has undefined behavior, because <code>c</code>, the array into which you copy the string, does not allocate enough space for null terminator.</p>\n\n<p>The number of characters that you copy is 10, so you need an array of 11 to accommodate the null terminator.</p>\n\n<p>To avoid overrun troubles like that with statically allocated arrays, use dynamic allocation instead:</p>\n\n<pre><code>char *c = new char[s.size()+1];\nstrcpy(c, s.c_str());\ncout &lt;&lt; c &lt;&lt;endl;\ndelete[] c;\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5034652"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 44026028, "answer_count": 3, "score": 1, "last_activity_date": 1495037403, "creation_date": 1495026772, "last_edit_date": 1495027143, "question_id": 44025949, "link": "https://stackoverflow.com/questions/44025949/null-termination-didnt-appear-in-the-array-on-strcpy-ing", "title": "null termination didn&#39;t appear in the array on strcpy-ing", "body": "<p>While I was using <code>c_str()</code> to transform <code>std::string</code> into <em>C-style</em> string, I didn't see the last character overridden by the null-termination which <code>c_str()</code> is supposed to add in this program:</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;string&gt;\n#include&lt;cstring&gt;\n\nusing namespace std;\n\nint main()\n{\n    string s = \"helloworld\";\n    char c[10];\n    strcpy(c, s.c_str());\n    cout &lt;&lt; c &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>What I am asking is why <code>d</code> is being printed (added to <code>c</code>) as I was expecting <em>null-termination</em> to be there. What am I missing here?</p>\n"}, {"tags": ["c++", "visual-studio", "unit-testing"], "owner": {"reputation": 107, "user_id": 7980962, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-Rj3b0hPbYy8/AAAAAAAAAAI/AAAAAAAAAcI/cd0bkPx0wNo/photo.jpg?sz=128", "display_name": "Lavakusa", "link": "https://stackoverflow.com/users/7980962/lavakusa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1495026505, "creation_date": 1495026505, "question_id": 44025838, "link": "https://stackoverflow.com/questions/44025838/how-to-work-with-code-injection-model-in-visual-studio-c-managed-unit-test-pro", "title": "How to work with Code injection model in Visual studio C++ Managed unit test Project", "body": "<p>this is my Employee.h file</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;stdlib.h&gt;\n#include&lt;vector&gt;\n#include&lt;fstream&gt;\n#include &lt;cstdio&gt;\n#include&lt;algorithm&gt;\n#include&lt;iterator&gt;\n#include&lt;iomanip&gt;\n#define SIZEOF(array)   (int)sizeof(array)\n#define sort  stable_sort\nusing namespace std;\n\nstruct employee_rec\n{\nchar name[30];\nchar department[15];\ndouble salary;\n};\n\n class VEMPLOYEE : public vector&lt;employee_rec&gt;\n{\npublic:\nVEMPLOYEE();\n~VEMPLOYEE();\n\nvoid InitEmployee(employee_rec&amp; emp);\n    //This method loads the person details from input.txt file\nvoid LoadAndProcessDetails(employee_rec&amp; emp, char* Inputfile, double value);\n\n//This method increments the particular percentage of a salary\nvoid IncrementSalary(employee_rec&amp; emp, double value);\n\n//This method writes the Results to output file\nvoid WriteDetails(employee_rec&amp; emp, char* Outputfile);\n\nvoid PrintToOutFile(ofstream&amp; outfile, const employee_rec* w);\n\nifstream&amp; ReadFile(ifstream&amp; infile, employee_rec&amp; emp);    \nstatic inline bool Cmpemp(const employee_rec&amp; x, const employee_rec&amp; y);\n</code></pre>\n\n<p>};</p>\n\n<p>And my Main Employee.cpp </p>\n\n<pre><code>#include\"EmployeeManagement.h\"\n\nVEMPLOYEE::VEMPLOYEE()\n{\n\n}\nVEMPLOYEE::~VEMPLOYEE()\n{\n\n}\n\nVEMPLOYEE Actualemployee;\nemployee_rec emp;\nVEMPLOYEE MyTestvector;\nvoid VEMPLOYEE::InitEmployee(employee_rec&amp; emp)\n{   \nstrcpy_s(emp.department, \" \");\nstrcpy_s(emp.name, \" \");\nemp.salary = 0.0;\n}\nifstream&amp; VEMPLOYEE::ReadFile(ifstream&amp; infile, employee_rec&amp; emp)\n{\ninfile &gt;&gt; emp.name &gt;&gt; emp.department &gt;&gt; emp.salary;\nreturn infile;\n}\n\nvoid VEMPLOYEE::LoadAndProcessDetails(employee_rec&amp; emp, char* Inputfile, double value)\n{\nint i = 0;\nint ops = 0;\nifstream infile;\nInitEmployee(emp);\ninfile.open(Inputfile, ios::in);\nwhile (ReadFile(infile, emp))\n{  \n    ++ops;\n    IncrementSalary(emp, value);\n    Actualemployee.push_back(emp);\n}\nstd::sort(Actualemployee.begin(), Actualemployee.end(), Cmpemp);\ninfile.close();\n}\n\nbool VEMPLOYEE::Cmpemp(const employee_rec&amp; x, const employee_rec&amp; y)\n{\nint n;\nn = strcmp(x.department, y.department);\nif (n&lt;0) return 1;\nif (n == 0)\n{\n    n = strcmp(x.name, y.name);\n    if (n&lt;0) return 1;\n    if (n == 0 &amp;&amp; x.salary &lt; y.salary) return 1;\n}\nreturn 0;\n}\n\nvoid VEMPLOYEE::IncrementSalary(employee_rec&amp; emp, double value)\n{\nemp.salary += ((emp.salary / 100) * value);\n}\n\nvoid VEMPLOYEE::WriteDetails(employee_rec&amp; emp, char* Outputfile)\n{\nvector&lt;employee_rec&gt;::iterator iter1;\nofstream outfile;\noutfile.open(Outputfile, ios::out);\nfor (iter1 = Actualemployee.begin(); iter1 != Actualemployee.end(); ++iter1)\n{\n\n    PrintToOutFile(outfile, &amp;*iter1);\n}\n        outfile.close();\n}\n\nvoid VEMPLOYEE::PrintToOutFile(ofstream&amp; outfile, const employee_rec* w)\n{\noutfile &lt;&lt; setw(15) &lt;&lt; left &lt;&lt; w-&gt;name &lt;&lt; setw(7) &lt;&lt; w-&gt;department &lt;&lt; setw(7) &lt;&lt; w-&gt;salary &lt;&lt; \"\\n\";\n}\n\nint main()\n{\nVEMPLOYEE inc;\ndouble value;\nemployee_rec emp1;\ncout &lt;&lt; \"Enter which percent to increment \\n\";\ncin &gt;&gt; value;\ninc.LoadAndProcessDetails(emp, \"Input.txt\", value);\ninc.WriteDetails(emp, \"Output.txt\");\nreturn 0;\n}\n</code></pre>\n\n<p>Input.txt file </p>\n\n<pre><code>Dany IT 10000\nLoky IT 15000\nRony IT 25000\n</code></pre>\n\n<p>From Visualstudio2015 C++ Managed Test Project\nEmployee_Test.cpp file is</p>\n\n<pre><code>#include \"stdafx.h\"\n#include \"Employee.h\"\nusing namespace System;\nusing namespace System::Text;\nusing namespace System::Collections::Generic;\nusing namespace Microsoft::VisualStudio::TestTools::UnitTesting;\nstd::ofstream LogFile;\n\nnamespace EmployeeManagementSystem_MDM_Test\n{\n[TestClass]\npublic ref class EmployeeManagement_Testing \n{\nprivate:\n    TestContext^ testContextInstance;\n\npublic: \n    /// &lt;summary&gt;\n    ///Gets or sets the test context which provides\n    ///information about and functionality for the current test run.\n    ///&lt;/summary&gt;\n    property Microsoft::VisualStudio::TestTools::UnitTesting::TestContext^ TestContext\n    {\n        Microsoft::VisualStudio::TestTools::UnitTesting::TestContext^ get()\n        {\n            return testContextInstance;\n        }\n        System::Void set(Microsoft::VisualStudio::TestTools::UnitTesting::TestContext^ value)\n        {\n            testContextInstance = value;\n        }\n    };\n\n        [TestInitialize]\n        void TestInitialize()\n        {\n            char* testName = (char*)Marshal::StringToHGlobalAnsi(TestContext-&gt;TestName).ToPointer();\n            LogFile &lt;&lt; \"Test Case \" &lt;&lt; testName &lt;&lt; \" Started Executing\" &lt;&lt; std::endl;\n            Marshal::FreeHGlobal((IntPtr)testName);\n        }\n\n        [TestCleanup]\n        void TestCleanup()\n        {\n            char* testName = (char*)Marshal::StringToHGlobalAnsi(TestContext-&gt;TestName).ToPointer();\n            LogFile &lt;&lt; \"Test Case \" &lt;&lt; testName &lt;&lt; \" Completed Executing\" &lt;&lt; std::endl;\n            Marshal::FreeHGlobal((IntPtr)testName);\n        }\n\n        [TestMethod]\n        void LoadAndProcessDetails_Test()\n        {\n            ifstream infile;\n            int i = 0;\n            size_t n = 9;\n            VEMPLOYEE Expectedemployee;\n            employee_rec    emp_Test;\n            infile.open(\"Output_Expected.txt\",ios::in);\n            if (!infile)\n            exit(1);\n\n            while (!infile.eof())\n            {\n                infile &gt;&gt; emp_Test.name &gt;&gt;  emp_Test.department &gt;&gt; emp_Test.salary;\n\n                Expectedemployee.push_back(emp_Test);\n            }\n\n            infile.close();             \n\n            VEMPLOYEE inc1;\n            employee_rec emp1;\n            inc1.LoadAndProcessDetails(emp1, \"Input.txt\", 10);\n            ofstream outfile;\n            Assert::AreEqual(Expectedemployee.size(), Actualemployee.size());\n        };\n    };\n}\n</code></pre>\n\n<p>ExpectedOutput.txt is(10 % increment in salary)</p>\n\n<pre><code>    Dany IT 11000\n    Loky IT 16500\n    Rony IT 27500\n</code></pre>\n\n<p>My C++ Project Employee management system And it Reads the employee details from the text file(Input.txt) and increments the salary by n Percent, Results prints in the text file(Output.txt).</p>\n\n<p>TestProject:-</p>\n\n<p>In visual studio 2015 Manged C++ Test Project, And I created test method for my actual project, Testing the function in the actual project.</p>\n\n<p>I am trying to do is</p>\n\n<p>->Test the actual method and examining the functionality of employee project</p>\n\n<p>My goals:-</p>\n\n<p>1.I created ExpectdOutput.txt file and compare with Original output in the main \n  Project.</p>\n\n<p>2.If there are any dissimilarities in ActualOutput.txt(From the main program) and ExpectedOutput.txt(From my Test Project) file, Those values dump into one text file.</p>\n\n<p>And I am able to test only the sizes of my expectedOutpt(From text project) size and ActualOutput(From main Project).</p>\n\n<p>But I want to compare all records(each) and individually and mismatched values Print into a text file??</p>\n\n<p>To achieve goals which code I suppose to add in my test project (Employee_testing) [But I don't want to change any code in my actual Employee Project].\nPlease give me any suggestions ??</p>\n"}, {"tags": ["c++", "function", "vector", "sfml"], "comments": [{"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495026218, "post_id": 44025646, "comment_id": 75077630, "body": "You have included a copy of main.cpp when you meant to include consumable.h.  Please <a href=\"https://stackoverflow.com/posts/44025646/edit\">edit</a> your question to fix this."}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495026521, "post_id": 44025646, "comment_id": 75077884, "body": "I would declare <code>consumableX</code> and <code>consumableY</code> as <code>const int</code> within the loop.  Similarly, I would make <code>_consumable</code> a local within <code>fCreateConsumable</code> (probably within the loop again).  In <code>fDrawTarget</code> I would write the loop as <code>for(const auto&amp; item: vConsumable)){    thatWindow.draw(item);}</code>"}, {"owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495026645, "post_id": 44025646, "comment_id": 75077975, "body": "And finally, in what way &quot;couldn&#39;t you get that to work&quot;?  Compiler error message (please show it exactly)?  Unexpected output? (What?)  Crash?  (Where?)"}, {"owner": {"reputation": 3, "user_id": 8025437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc97f1c3e0339cf42ddb1c3df8a10d?s=128&d=identicon&r=PG&f=1", "display_name": "electricHillBilly", "link": "https://stackoverflow.com/users/8025437/electrichillbilly"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495026760, "post_id": 44025646, "comment_id": 75078079, "body": "added consumable.h, as for the error nothing would be drawn onto the screen, i tried finding a way to look into the vector with the debugging tool but I couldn&#39;t find anything useful"}, {"owner": {"reputation": 3, "user_id": 8025437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc97f1c3e0339cf42ddb1c3df8a10d?s=128&d=identicon&r=PG&f=1", "display_name": "electricHillBilly", "link": "https://stackoverflow.com/users/8025437/electrichillbilly"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495027053, "post_id": 44025646, "comment_id": 75078314, "body": "I&#39;m currently trying to convert my original project into an object orientated format because I suck at classes etc. can post the wall of text in my original main.cpp but thats really ugly to  look at even for me"}, {"owner": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1495027134, "post_id": 44025646, "comment_id": 75078394, "body": "Where do you close <code>void consumable::fDrawTarget()</code> or have you missed a closing bracket on the for-loop? You should also remove <code>void</code> in front of <code>fCreateConsumable();</code> in that function if you want to use it in <code>fDrawTarget()</code>."}, {"owner": {"reputation": 3, "user_id": 8025437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc97f1c3e0339cf42ddb1c3df8a10d?s=128&d=identicon&r=PG&f=1", "display_name": "electricHillBilly", "link": "https://stackoverflow.com/users/8025437/electrichillbilly"}, "reply_to_user": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1495027362, "post_id": 44025646, "comment_id": 75078554, "body": "@Chringo I just missed the brace off its there."}, {"owner": {"reputation": 3, "user_id": 8025437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc97f1c3e0339cf42ddb1c3df8a10d?s=128&d=identicon&r=PG&f=1", "display_name": "electricHillBilly", "link": "https://stackoverflow.com/users/8025437/electrichillbilly"}, "reply_to_user": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "edited": false, "score": 0, "creation_date": 1495027391, "post_id": 44025646, "comment_id": 75078579, "body": "@MartinBonner  error: variable or field &#39;fCreateConsumable&#39; declared void| theres the error"}, {"owner": {"reputation": 3, "user_id": 8025437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc97f1c3e0339cf42ddb1c3df8a10d?s=128&d=identicon&r=PG&f=1", "display_name": "electricHillBilly", "link": "https://stackoverflow.com/users/8025437/electrichillbilly"}, "reply_to_user": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1495027448, "post_id": 44025646, "comment_id": 75078625, "body": "@Chringo I&#39;m an idiot :P its runs now EDIT: it now infinitely draws 3 shapes (modified how many i wanted) every frame"}, {"owner": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1495027830, "post_id": 44025646, "comment_id": 75078958, "body": "Right, so what&#39;s left is getting your <code>consumable</code> class drawn from <code>main</code>? Just to be clear, you&#39;ve shown us the entire <code>consumable::fDrawTarget()</code> but just missed the closing bracket? E: Reading your last comment seems like you got it figured out."}, {"owner": {"reputation": 3, "user_id": 8025437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc97f1c3e0339cf42ddb1c3df8a10d?s=128&d=identicon&r=PG&f=1", "display_name": "electricHillBilly", "link": "https://stackoverflow.com/users/8025437/electrichillbilly"}, "reply_to_user": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1495028135, "post_id": 44025646, "comment_id": 75079210, "body": "@Chringo almost! i just need to stop it after it draws 3 however im not familiar with (const auto&amp; item: vConsumable) so I have no idea how to correct it"}, {"owner": {"reputation": 3, "user_id": 8025437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc97f1c3e0339cf42ddb1c3df8a10d?s=128&d=identicon&r=PG&f=1", "display_name": "electricHillBilly", "link": "https://stackoverflow.com/users/8025437/electrichillbilly"}, "reply_to_user": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1495028302, "post_id": 44025646, "comment_id": 75079353, "body": "@Chringo <a href=\"https://pastebin.com/jzezWZs3\" rel=\"nofollow noreferrer\">pastebin.com/jzezWZs3</a> there is a pastebin with gif to make it easier to understand"}, {"owner": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "edited": false, "score": 0, "creation_date": 1495028897, "post_id": 44025646, "comment_id": 75079831, "body": "Place a breakpoint in <code>fDrawTarget</code> and step into <code>fCreateConsumable</code>. It has to do with your vector. I&#39;ll write an answer but I think you can figure it out too!"}, {"owner": {"reputation": 3, "user_id": 8025437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc97f1c3e0339cf42ddb1c3df8a10d?s=128&d=identicon&r=PG&f=1", "display_name": "electricHillBilly", "link": "https://stackoverflow.com/users/8025437/electrichillbilly"}, "edited": false, "score": 0, "creation_date": 1495029597, "post_id": 44025646, "comment_id": 75080386, "body": "well that is silly of me"}], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 5044558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GNAvc.jpg?s=128&g=1", "display_name": "Chringo", "link": "https://stackoverflow.com/users/5044558/chringo"}, "is_accepted": true, "score": 0, "last_activity_date": 1495030171, "creation_date": 1495030171, "answer_id": 44027261, "question_id": 44025646, "link": "https://stackoverflow.com/questions/44025646/c-sfml-creating-a-vector-of-shapes-and-drawing-them-in-a-function/44027261#44027261", "title": "C++ SFML creating a vector of shapes and drawing them in a function", "body": "<p>Looking at your class <code>consumable</code>, I'd start by making <code>_consumable</code> local and refactor <code>fCreateConsumable</code> adding another function.</p>\n\n<pre><code>class consumable\n{\n    public:\n    // ...    \n    vector&lt;RectangleShape&gt; fCreateConsumable(vector&lt;RectangleShape&gt;&amp; vConsumable);\n    void fDrawTarget(float x, float y, RenderWindow &amp;thatWindow);\n    void UpdatePositions();\nprivate:\n    vector&lt;RectangleShape&gt; vConsumable;\n};\n</code></pre>\n\n<p>By removing <code>fCreateConsumable</code> from <code>fDrawTarget</code> you can avoid creating new <code>RectangleShape</code>, reuse the old three ones, and update them with new positions.</p>\n\n<pre><code>void consumable::UpdatePositions(){\n    srand(time(NULL));\n    for(int i{0};i&lt; vConsumable.size();i++){\n        vConsumable[i].setPosition(((rand() % 31) + 1) * 25, ((rand() % 22) + 1) * 25);\n    }\n}\nvoid consumable::fCreateConsumable(){\n    int consumableX{0}, consumableY{0};\n    srand(time(NULL));\n    for(int i=0;i&lt;4;i++){\n        consumableX = (rand() % 31) + 1;\n        consumableY = (rand() % 22) + 1;\n        _consumable.setPosition((consumableX * 25), (consumableY * 25));\n        _consumable.setSize(sf::Vector2f(25.0f,25.0f));\n        _consumable.setFillColor(sf::Color::Magenta);\n        vConsumable.push_back(_consumable);\n    }\n}\nvoid consumable::fDrawTarget(float x, float y, RenderWindow &amp;thatWindow){\n    UpdatePositions();\n    for(int i{0};i&lt; vConsumable.size();i++){\n        thatWindow.draw(vConsumable[i]);\n    }\n}\n</code></pre>\n\n<p>Personally, I would move out <code>UpdatePositions</code> from <code>fDrawTarget</code> too and make the drawcall a const function. That way you separate the update and the rendering. If you don't, move <code>UpdatePositions</code> to private scope.</p>\n"}], "owner": {"reputation": 3, "user_id": 8025437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1bc97f1c3e0339cf42ddb1c3df8a10d?s=128&d=identicon&r=PG&f=1", "display_name": "electricHillBilly", "link": "https://stackoverflow.com/users/8025437/electrichillbilly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 258, "favorite_count": 0, "accepted_answer_id": 44027261, "answer_count": 1, "score": 0, "last_activity_date": 1495030171, "creation_date": 1495026056, "last_edit_date": 1495028556, "question_id": 44025646, "link": "https://stackoverflow.com/questions/44025646/c-sfml-creating-a-vector-of-shapes-and-drawing-them-in-a-function", "title": "C++ SFML creating a vector of shapes and drawing them in a function", "body": "<p>I wanted to create a vector of randomly placed squares and draw them to the screen, tried passing a reference to a vector and i couldn't get that to work :(</p>\n\n<p>consumable.h</p>\n\n<pre><code>#ifndef CONSUMABLE_H\n#define CONSUMABLE_H\n\n#include &lt;SFML/Graphics.hpp&gt;\n\nusing namespace std;\nusing namespace sf;\n\nclass consumable\n{\n    public:\n     consumable();\n    virtual ~consumable();\n\n    vector&lt;RectangleShape&gt; fCreateConsumable(vector&lt;RectangleShape&gt;&amp; vConsumable);\n    void fDrawTarget(float x, float y, RenderWindow &amp;thatWindow);\n\nprotected:\n\nprivate:\n    vector&lt;RectangleShape&gt; vConsumable;\n    RectangleShape _consumable;\n};\n</code></pre>\n\n<p>consumable.cpp</p>\n\n<pre><code>#include \"consumable.h\"\n\nconsumable::consumable()\n{\n    //ctor\n}\n\nconsumable::~consumable()\n{\n    //dtor\n}\nvoid consumable::fCreateConsumable(){\n    int consumableX{0}, consumableY{0};\n\n    for(int i=0;i&lt;4;i++){\n        consumableX = (rand() % 31) + 1;\n        consumableY = (rand() % 22) + 1;\n        _consumable.setPosition((consumableX * 25), (consumableY * 25));\n        _consumable.setSize(sf::Vector2f(25.0f,25.0f));\n        _consumable.setFillColor(sf::Color::Magenta);\n        vConsumable.push_back(_consumable);\n    }\n}\nvoid consumable::fDrawTarget(float x, float y, RenderWindow &amp;thatWindow){\n    void fCreateConsumable();\n\n    for(int i{0};i&lt; vConsumable.size();i++){\n        thatWindow.draw(vConsumable[i]);\n    }\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;SFML/Graphics.hpp&gt;\n\n#include \"consumable.h\"\n\nusing namespace std;\nusing namespace sf;\n\nint main()\n{\n    consumable Consumable;\n    RenderWindow window(VideoMode(800,750), \"C++ Snake\"); \n\n    while (window.isOpen())\n    {\n        Event event;\n        while (window.pollEvent(event))\n        {\n          switch(event.type)\n          {\n            case Event::Closed:\n              window.close();\n              break;\n            default:\n              break;\n          }\n        }\n        window.clear();\n        Consumable.fDrawTarget(25,25,window);\n        window.display();\n    }\n    std::cout &lt;&lt; \"Finished\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>I wanted to loop over</p>\n"}, {"tags": ["c++", "x11", "xlib"], "answers": [{"tags": [], "owner": {"reputation": 2511, "user_id": 6461611, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jkhMr.jpg?s=128&g=1", "display_name": "BarbaraKwarc", "link": "https://stackoverflow.com/users/6461611/barbarakwarc"}, "is_accepted": false, "score": 2, "last_activity_date": 1511868425, "creation_date": 1511868425, "answer_id": 47530416, "question_id": 44025639, "link": "https://stackoverflow.com/questions/44025639/how-can-i-check-in-xlib-if-window-exists/47530416#47530416", "title": "How can I check in xlib if window exists?", "body": "<p>From the <a href=\"http://www.phy.ohiou.edu/computer/xwin/xfaq.html\" rel=\"nofollow noreferrer\">X FAQ</a>:</p>\n\n<blockquote>\n  <blockquote>\n    <p><strong>169) How do I check whether a window ID is valid?</strong><br/>\n    My program has the ID of a window on a remote display.\n    I want to check whether the window exists before doing anything with it.</p>\n  </blockquote>\n  \n  <p>Because X is asynchronous, there isn't a guarantee that the window\n  would still exist between the time that you got the ID and the time you\n  sent an event to the window or otherwise manipulated it. What you should\n  do is send the event without checking, but install an error handler to\n  catch any <code>BadWindow</code> errors, which would indicate that the window no\n  longer exists. This scheme will work except on the [rare] occasion that\n  the original window has been destroyed and its ID reallocated to another\n  window.</p>\n  \n  <p>You can use this scheme to make a function which checks the validity\n  of a window; you can make this operation almost synchronous by calling\n  <code>XSync()</code> after the request, although there is still no guarantee that the\n  window will exist after the result (unless the sterver is grabbed). On the\n  \u3000whole, catching the error rather than pre-checking is preferable.</p>\n</blockquote>\n\n<p>Long story short: You can't :P  You can only damage control.</p>\n"}], "owner": {"reputation": 66, "user_id": 8019823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5124f4aa799f08767c4cb07765a273c?s=128&d=identicon&r=PG&f=1", "display_name": "Letrix", "link": "https://stackoverflow.com/users/8019823/letrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1082, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1511868425, "creation_date": 1495026034, "last_edit_date": 1495519212, "question_id": 44025639, "link": "https://stackoverflow.com/questions/44025639/how-can-i-check-in-xlib-if-window-exists", "title": "How can I check in xlib if window exists?", "body": "<p>I am writing c++ library in Linux using gcc.\nProgram opens web pages in new browser windows with</p>\n\n<pre><code>system(\"firefox https://www.webpage.com\");\n</code></pre>\n\n<p>After that I use xlib to determine identifiers of each opened browser window. \nThen program raises firefox windows one by one using  </p>\n\n<pre><code>XRaiseWindow(display, window)\n</code></pre>\n\n<p>in order to make a screenshot of each window and OCR. </p>\n\n<p>But if I close browser window manually and try to use \n<code>XRaiseWindow</code> with the corresponding identifier it generates <strong>BadWindow</strong> error and terminates the program. </p>\n\n<p>So how can I check in xlib if window with given <code>window</code> identifier exists?</p>\n"}]