[{"tags": ["c++", "mpi"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1524717320, "post_id": 50032916, "comment_id": 87085851, "body": "I tried your code. Suppose I run the code with only one processor and it takes n seconds to execute it. Now, I run the same program using two processor. It should take n/2 seconds, right? Why is not this happening? It seems to be taking more time for 2 processors to perform the same taks. Does that also need to be specified somewhere?"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1524719286, "post_id": 50032916, "comment_id": 87086408, "body": "@user9700881: What you&#39;re seeing is the overhead of parallelism: the two processes need to coordinate before beginning their work and when their work ends. Since the example program you&#39;ve posted does no actual work (the for loop with the print is <i>very</i> fast), the costs of parallelism outweigh the benefits. <a href=\"https://en.wikipedia.org/wiki/Amdahl%27s_law\" rel=\"nofollow noreferrer\">Amdahl&#39;s law</a> offers another way to understand this."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1524719349, "post_id": 50032916, "comment_id": 87086425, "body": "@user9700881: To better demonstrate this, I&#39;ve added a <code>sleep_for</code> inside of your for loop. This simulates the computational workload that would be present in a program you were actually trying to parallelize. If you run the code with this workload present, you&#39;ll see that it behaves much more like what you expect."}, {"owner": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1525048556, "post_id": 50032916, "comment_id": 87201480, "body": "I am surprised to see that it prints only the even numbers. But the logic seems to print every number from 0 to 19."}, {"owner": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1525050471, "post_id": 50032916, "comment_id": 87201812, "body": "And yeah I saw that use of multiple processor definitely reduces the time when I tried it for generating very large number of 8 figures"}, {"owner": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1525051431, "post_id": 50032916, "comment_id": 87201960, "body": "but why does it produce even numbers only and not the odd numbers? This is something I donot understant."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1525062418, "post_id": 50032916, "comment_id": 87203954, "body": "The <code>gi</code> variable that I included may be causing the effect you&#39;re seeing. I&#39;ve removed it. See if the updated code does more what you&#39;re expecting."}, {"owner": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1526522638, "post_id": 50032916, "comment_id": 87780486, "body": "It seems like this kind of sharing work in MPI works only for even process. For example, if have have 3 process and have to generate numbers from 0 to 19, it would not work. Doesnot it become difficult to create a system that works for odd or even processes for this program?"}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1526567299, "post_id": 50032916, "comment_id": 87803690, "body": "@user9700881: Yes, designing parallel programs is tricky. And there is no good way around that. For <code>N</code> tasks on <code>P</code> processors you could use integer division to get <code>N&#47;P</code> tasks per processor and then assign <code>N-(N&#47;P)*P</code> additional tasks to the last processor. Or some other scheme."}, {"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "reply_to_user": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "edited": false, "score": 0, "creation_date": 1526695154, "post_id": 50032916, "comment_id": 87857446, "body": "Keep at it: you&#39;ll get there:-)"}], "tags": [], "owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "is_accepted": true, "score": 1, "last_activity_date": 1525062386, "last_edit_date": 1525062386, "creation_date": 1524700820, "answer_id": 50032916, "question_id": 50032874, "link": "https://stackoverflow.com/questions/50032874/mpi-to-generate-first-20-numbers/50032916#50032916", "title": "MPI to generate first 20 numbers", "body": "<p>Computers only do what you tell them to. This is true not just of MPI but of any kind of programming.</p>\n\n<p>Where in your script did you explicitly tell the processors to divide the work between them? The thing is, you didn't. And it won't happen by automagically.</p>\n\n<p>The following modified version of your code shows how you can use <code>world_size</code> and <code>world_rank</code> to have each process independently calculate what share of the work it should perform.</p>\n\n<p>To better demonstrate the gains of parallelism, I use thread sleeping to simulate the time that would otherwise be taken by work in an actual implementation.</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;chrono&gt;\n#include &lt;thread&gt;\n\nvoid test(int start, int end){\n  for(int i=start;i&lt;end;i++){\n    printf(\"Edge count %d\\n\",i);\n    //Simulates complicated, time-consuming work\n    std::this_thread::sleep_for(std::chrono::milliseconds(500));\n  }\n}\n\nint main(int argc, char** argv) {\n int edge_count = 20;\n  // int *p = &amp;i;\n  // Initialize the MPI environment. The two arguments to MPI Init are not\n  // currently used by MPI implementations, but are there in case future\n  // implementations might need the arguments.\n  MPI_Init(NULL, NULL);\n\n  // Get the number of processes\n  int world_size;\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n  // Get the rank of the process\n  int world_rank;\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n\n  // Get the name of the processor\n  char processor_name[MPI_MAX_PROCESSOR_NAME];\n  int name_len;\n  MPI_Get_processor_name(processor_name, &amp;name_len);\n\n  // Print off a hello world message\n  printf(\"Hello world from processor %s, rank %d out of %d processors\\n\",\n         processor_name, world_rank, world_size);\n\n  const int interval   = edge_count/world_size;\n  const int iter_start = world_rank*interval;\n  const int iter_end   = (world_rank+1)*interval;\n\n  test(iter_start, iter_end);\n\n  // Finalize the MPI environment. No more MPI calls can be made after this\n  MPI_Finalize();\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9700881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ded3bb3f599f424326e635f44c98d743?s=128&d=identicon&r=PG&f=1", "display_name": "user9700881", "link": "https://stackoverflow.com/users/9700881/user9700881"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 50032916, "answer_count": 1, "score": 1, "last_activity_date": 1525062386, "creation_date": 1524700464, "question_id": 50032874, "link": "https://stackoverflow.com/questions/50032874/mpi-to-generate-first-20-numbers", "title": "MPI to generate first 20 numbers", "body": "<p>Here is code that I was trying to generate the first 20 numbers starting from 0 in an attempt to learn MPI.</p>\n\n<p>My code is given below :</p>\n\n<pre><code>#include &lt;mpi.h&gt;\n#include &lt;stdio.h&gt;\n\nint i = 0;\nvoid test(int edge_count){\n   while(i &lt; edge_count){\n    printf(\"Edge count %d\\n\",i);\n    i++;\n   }\n}\n\nint main(int argc, char** argv) {\n int edge_count = 20;\n  // int *p = &amp;i;\n  // Initialize the MPI environment. The two arguments to MPI Init are not\n  // currently used by MPI implementations, but are there in case future\n  // implementations might need the arguments.\n  MPI_Init(NULL, NULL);\n\n  // Get the number of processes\n  int world_size;\n  MPI_Comm_size(MPI_COMM_WORLD, &amp;world_size);\n\n  // Get the rank of the process\n  int world_rank;\n  MPI_Comm_rank(MPI_COMM_WORLD, &amp;world_rank);\n\n  // Get the name of the processor\n  char processor_name[MPI_MAX_PROCESSOR_NAME];\n  int name_len;\n  MPI_Get_processor_name(processor_name, &amp;name_len);\n\n  // Print off a hello world message\n  printf(\"Hello world from processor %s, rank %d out of %d processors\\n\",\n         processor_name, world_rank, world_size);\n  test(edge_count);\n  printf(\"The value of i is %d \\n\",i);\n\n  // Finalize the MPI environment. No more MPI calls can be made after this\n  MPI_Finalize();\n}\n</code></pre>\n\n<p>My output is :</p>\n\n<pre><code>Hello world from processor ENG401651, rank 0 out of 2 processors\nEdge count 0\nEdge count 1\nEdge count 2\nEdge count 3\nEdge count 4\nEdge count 5\nEdge count 6\nEdge count 7\nEdge count 8\nEdge count 9\nEdge count 10\nEdge count 11\nEdge count 12\nEdge count 13\nEdge count 14\nEdge count 15\nEdge count 16\nEdge count 17\nEdge count 18\nEdge count 19\nThe value of i is 20 \nHello world from processor ENG401651, rank 1 out of 2 processors\nEdge count 0\nEdge count 1\nEdge count 2\nEdge count 3\nEdge count 4\nEdge count 5\nEdge count 6\nEdge count 7\nEdge count 8\nEdge count 9\nEdge count 10\nEdge count 11\nEdge count 12\nEdge count 13\nEdge count 14\nEdge count 15\nEdge count 16\nEdge count 17\nEdge count 18\nEdge count 19\nThe value of i is 20 \n</code></pre>\n\n<p>The code that I used to run it is:</p>\n\n<pre><code>mpirun -np 2 execFile\n</code></pre>\n\n<p>I was expecting that both the processor would communicate and generate a number from 0 to 19 only once but it seems like each of the processor are generating their own set of numbers independently.</p>\n\n<p>What am I doing wrong? I am new to MPI and couldnot figure out what is the reason behind this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 3, "creation_date": 1524700502, "post_id": 50032866, "comment_id": 87081850, "body": "<code>throw Exc{&quot;message&quot;};</code>"}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524704363, "post_id": 50032866, "comment_id": 87082776, "body": "What are you expecting <code>e</code> to do in <code>throw Exec e</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 8463276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d396f9539d76dc3c29e81802b89ce3b?s=128&d=identicon&r=PG&f=1", "display_name": "Kabir", "link": "https://stackoverflow.com/users/8463276/kabir"}, "edited": false, "score": 0, "creation_date": 1524715231, "post_id": 50033385, "comment_id": 87085323, "body": "why the curly braces? It worked for me with the ( )s just fine since, and I&#39;ve never seen such an expression, is it a constructor call this way too?"}, {"owner": {"reputation": 457, "user_id": 5406471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DAZpo.png?s=128&g=1", "display_name": "xvnm", "link": "https://stackoverflow.com/users/5406471/xvnm"}, "reply_to_user": {"reputation": 95, "user_id": 8463276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d396f9539d76dc3c29e81802b89ce3b?s=128&d=identicon&r=PG&f=1", "display_name": "Kabir", "link": "https://stackoverflow.com/users/8463276/kabir"}, "edited": false, "score": 0, "creation_date": 1524718511, "post_id": 50033385, "comment_id": 87086167, "body": "I forgot to mention ( )s, you can use both { }s and ( )s. You can call constructor of a class with (), if there&#39;s one that has matching arguments. Creating instant with culry braces is called &#39;list initialization&#39;. Check details <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">here</a>."}], "tags": [], "owner": {"reputation": 457, "user_id": 5406471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DAZpo.png?s=128&g=1", "display_name": "xvnm", "link": "https://stackoverflow.com/users/5406471/xvnm"}, "is_accepted": true, "score": 1, "last_activity_date": 1524706801, "last_edit_date": 1524706801, "creation_date": 1524705004, "answer_id": 50033385, "question_id": 50032866, "link": "https://stackoverflow.com/questions/50032866/how-to-throw-exception-of-type-template-parameter/50033385#50033385", "title": "How to throw exception of type &quot;template parameter&quot;?", "body": "<p>Acoording to <a href=\"http://en.cppreference.com/w/cpp/language/throw\" rel=\"nofollow noreferrer\">this page</a>, expression <code>throw</code> expects another expression.</p>\n\n<p>But you're providing <code>throw</code> expression with <code>declaration</code> which is not an <code>expression</code>.</p>\n\n<p>try</p>\n\n<pre><code>Exc e{\"message\"};\nthrow e;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>throw Exc{\"message\"};\n</code></pre>\n\n<p>as Justin suggested to your question.</p>\n"}], "owner": {"reputation": 95, "user_id": 8463276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d396f9539d76dc3c29e81802b89ce3b?s=128&d=identicon&r=PG&f=1", "display_name": "Kabir", "link": "https://stackoverflow.com/users/8463276/kabir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 50033385, "answer_count": 1, "score": 0, "last_activity_date": 1524706801, "creation_date": 1524700419, "question_id": 50032866, "link": "https://stackoverflow.com/questions/50032866/how-to-throw-exception-of-type-template-parameter", "title": "How to throw exception of type &quot;template parameter&quot;?", "body": "<p>I have the template header like this:</p>\n\n<pre><code>template&lt;class TypeA, size_t tsize=100, class Exc=std::out_of_range&gt;\n</code></pre>\n\n<p>and an add function that throws exception of type Exc:</p>\n\n<pre><code>void add(TypeA* objA) {\n    if(nelems==capac) {\n        delete objA;\n        throw Exc e; //the line in question\n    }\n    nelems++;\n    elems[nelems-1]=objA;\n}\n</code></pre>\n\n<p>I have the following error message:</p>\n\n<pre><code>error: expected primary-expression before \u2018e\u2019\nthrow Exc e;\n</code></pre>\n\n<p>what am I doing wrong?</p>\n"}, {"tags": ["c++", "vector", "find"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1524700368, "post_id": 50032843, "comment_id": 87081814, "body": "The right direction would be your C++ book, which explains the difference between <code>=</code> and <code>==</code>. You&#39;re not comparing anything in your lambda."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1524703845, "post_id": 50032843, "comment_id": 87082664, "body": "What does <code>myDoc-&gt;getTerms()</code> return, and what is the resulting type for <code>term</code>?"}, {"owner": {"reputation": 53, "user_id": 4163807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1c5a1998ad508c04724340f94a3ce32?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/4163807/gary"}, "reply_to_user": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 0, "creation_date": 1524713112, "post_id": 50032843, "comment_id": 87084775, "body": "@Sam, yep.  Changed that and still get the same error at compile time about &quot;term is not captured&quot;"}, {"owner": {"reputation": 53, "user_id": 4163807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1c5a1998ad508c04724340f94a3ce32?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/4163807/gary"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1524713238, "post_id": 50032843, "comment_id": 87084826, "body": "@1201ProgramAlarm:  myDoc-&gt;getTerms returns a reference to a vector of Term *.   The definition in the header file looks like:   std::vector&lt;Term *&gt; &amp;getTerms()    {return this-&gt;terms;}"}], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 4163807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1c5a1998ad508c04724340f94a3ce32?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/4163807/gary"}, "is_accepted": false, "score": 0, "last_activity_date": 1524714736, "last_edit_date": 1524714736, "creation_date": 1524713645, "answer_id": 50034427, "question_id": 50032843, "link": "https://stackoverflow.com/questions/50032843/c-stdfind-if-on-a-custom-class/50034427#50034427", "title": "C++ std::find_if on a custom class", "body": "<p>I figured it out.   The std::find_if line must look like this:</p>\n\n<pre><code>auto it = find_if(terms.begin(), terms.end(),\n                              [&amp;term](const Term *t1){return t1-&gt;getTerm() == term-&gt;getTerm();});\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 4163807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1c5a1998ad508c04724340f94a3ce32?s=128&d=identicon&r=PG&f=1", "display_name": "Gary", "link": "https://stackoverflow.com/users/4163807/gary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 567, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524714736, "creation_date": 1524700202, "question_id": 50032843, "link": "https://stackoverflow.com/questions/50032843/c-stdfind-if-on-a-custom-class", "title": "C++ std::find_if on a custom class", "body": "<p>I have a std::vector of a custom class (Term).   I'm trying to find terms in that class using the std::find_if construct.   I'm missing something:</p>\n\n<p><b>Term.h</b></p>\n\n<pre><code> \n\n    #ifndef _TERM_H_\n    #define _TERM_H_\n\n    #include &lt;string&gt;\n\n    class Term {\n        public:\n                Term() {}\n                Term(std::string, float);\n\n                void setTerm(std::string myTerm) {this->term   = myTerm;}\n                void setWeight(float myWeight) {this->weight = myWeight;}\n\n                std::string getTerm() const {return this->term;}\n                float getWeight() {return this->weight;}\n\n                bool operator&lt;(Term &t) {return t.getWeight() &lt;  this-&gt;getWeight();}\n                bool operator==(const Term *t) const {return this-&gt;getTerm().compare(t-&gt;getTerm()) == 0;}\n\n        private:\n                std::string term;\n                float weight;\n    }; // end class\n\n    #endif\n</code></pre>\n\n<p>Then, later in the code, I have another class (Document) where I'll be comparing vectors of those terms:\n<b>Document.cpp</b></p>\n\n<pre><code>\n\n    /***\n     Defined in the header file:\n     std::vector&lt;Term *&gt; terms;\n\n     For brevity, I've removed other function definitions....***/\n\n    void Document::compareToDoc(Document *myDoc) {\n        for(auto const& term : myDoc->getTerms()) {\n                //auto it = find(terms.begin(), terms.end(), term);\n                auto it = find_if(terms.begin(), terms.end(),\n                                  [](const Term *t1){return t1-&gt;getTerm() = term-&gt;getTerm();});\n\n                if(it != terms.end()) {\n                        std::cout &lt;&lt; \" .. found\" &lt;&lt; std::endl;\n                } // end if\n        } // end for\n    } // compareToDoc\n\n</code></pre>\n\n<p>I'm pretty confused on what the lambda expression should look like to find terms that are the same.  I tried the std::find route (commented out), but it never finds when two terms match.  I believe find_if is the correct function, but I'm now struggling with the lambda. </p>\n\n<p>Can anyone point me in the right direction?  Thanks!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1524700002, "post_id": 50032791, "comment_id": 87081749, "body": "What gets output from your main code? Also you haven&#39;t declared <code>inventory</code> in <code>main</code>, so this clearly isn&#39;t your real code. Please show us code that compiles."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1524700938, "post_id": 50032791, "comment_id": 87081936, "body": "I had to make a couple tweaks to your code to make it compile, but for next time, I was looking for something like this (<a href=\"https://ideone.com/xzI8Q1\" rel=\"nofollow noreferrer\">ideone</a>) where it already compiles and I can see the output and the problem so I can begin tinkering with your code immediately...as opposed to having to scan through it all trying to read it manually. The code you gave us was all good! It&#39;s a very good minimal complete example, it was just missing a few lines."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5616690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b1f4026a9b21a5a15407fb4bcac44c?s=128&d=identicon&r=PG&f=1", "display_name": "thomas wright", "link": "https://stackoverflow.com/users/5616690/thomas-wright"}, "edited": false, "score": 0, "creation_date": 1524701051, "post_id": 50032882, "comment_id": 87081967, "body": "Problem Solved! Thank you so much!!"}, {"owner": {"reputation": 13, "user_id": 5616690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b1f4026a9b21a5a15407fb4bcac44c?s=128&d=identicon&r=PG&f=1", "display_name": "thomas wright", "link": "https://stackoverflow.com/users/5616690/thomas-wright"}, "edited": false, "score": 0, "creation_date": 1524714748, "post_id": 50032882, "comment_id": 87085211, "body": "Action::Action(std::string action, int reward, int time) : action(action), reward(reward), time(time) {}; is not working help?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 13, "user_id": 5616690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b1f4026a9b21a5a15407fb4bcac44c?s=128&d=identicon&r=PG&f=1", "display_name": "thomas wright", "link": "https://stackoverflow.com/users/5616690/thomas-wright"}, "edited": false, "score": 0, "creation_date": 1524715851, "post_id": 50032882, "comment_id": 87085487, "body": "@thomaswright I can\u2019t see your action class, but make sure your initialization list is in the same order as how you\u2019ve declared them in the class."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 2, "last_activity_date": 1524700556, "creation_date": 1524700556, "answer_id": 50032882, "question_id": 50032791, "link": "https://stackoverflow.com/questions/50032791/trouble-with-modifying-object-values-in-a-c-vector/50032882#50032882", "title": "Trouble with modifying object values in a c++ vector", "body": "<p>Your issue is in this line:</p>\n\n<pre><code>for (Item check : Inventory::inventory)\n</code></pre>\n\n<p>You modify <code>check</code>, but <code>check</code> is a copy of items in your inventory! Loop through with <code>check</code> being a <em>reference</em> instead:</p>\n\n<pre><code>for (Item &amp;check : Inventory::inventory)\n         ^^^\n</code></pre>\n\n<hr>\n\n<p>Also, when you first get an item, you set its quantity to <code>0</code>:</p>\n\n<pre><code>item.setQuantity(0);\n</code></pre>\n\n<p>Is this intentional? Perhaps you mean to set it to 1 instead:</p>\n\n<pre><code>item.setQuantity(1);\n</code></pre>\n\n<p>Or even better, add a set to 1 in the constructor! (after all, when an item is made it's because we have at least one of it, right?). And while your at it, you can switch to a field initialization list with your constructors to make life easier as well:</p>\n\n<pre><code>Item::Item(int id, std::string name) : id(id), name(name), quantity(1) { }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5616690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1b1f4026a9b21a5a15407fb4bcac44c?s=128&d=identicon&r=PG&f=1", "display_name": "thomas wright", "link": "https://stackoverflow.com/users/5616690/thomas-wright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 50032882, "answer_count": 1, "score": 1, "last_activity_date": 1524700843, "creation_date": 1524699789, "last_edit_date": 1524700843, "question_id": 50032791, "link": "https://stackoverflow.com/questions/50032791/trouble-with-modifying-object-values-in-a-c-vector", "title": "Trouble with modifying object values in a c++ vector", "body": "<p>I am trying to develop an inventory system for a game in c++. I have 2 header files one is named item and the other inventory these are sent into my main method. The way I have my code set up is when I send an Item object to my inventory the inventory checks to see if an object with the same ID exists. If it does then get the quantity Item value and increment it by one. The problem is the change to the Quantity value does not save to the main Inventory object. Any and all help would be very appreciated. Also sorry if my code is bad! I am not going to include all the code, and I am sure that all the proper #include functions are in!</p>\n\n<p>The real issue seems to be somewhere in the actual new Quantity value not being added to the main Inventory object.</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include \"Windows.h\"\n#include \"Item.h\"\n#include \"Inventory.h\"\n#include &lt;ctime&gt;\n#include &lt;fstream&gt;\n#include &lt;conio.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;windows.h&gt;\n#include &lt;string&gt;\n#include &lt;cstdio&gt;\n#include &lt;vector&gt;\n\n\n\n\n\n\n\n// Functions!\nvoid gotoxy(int x, int y)\n{\n    COORD coord;\n    coord.X = x;\n    coord.Y = y;\n    SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord);\n}\n\nvoid setColor(int color) // 0 Black, 1 Blue, 2 Green, 3 Light Blue, 4Red 5     Purple 6 Yellow 7 White\n{\n    HANDLE  hConsole;\n    hConsole = GetStdHandle(STD_OUTPUT_HANDLE);\n\n    SetConsoleTextAttribute(hConsole, color);\n\n}\nvoid clearColor()\n{\n    HANDLE  hConsole;\n    hConsole = GetStdHandle(STD_OUTPUT_HANDLE);\n\n    SetConsoleTextAttribute(hConsole, 7);\n\n}\nvoid ShowConsoleCursor(bool showFlag)\n{\n    HANDLE out = GetStdHandle(STD_OUTPUT_HANDLE);\n\n    CONSOLE_CURSOR_INFO     cursorInfo;\n\n    GetConsoleCursorInfo(out, &amp;cursorInfo);\n    cursorInfo.bVisible = showFlag; // set the cursor visibility\n    SetConsoleCursorInfo(out, &amp;cursorInfo);\n}\n\n\n\n\n\n\n//\n// Menu SetUp!\n\nvoid menuArea()\n{\n    gotoxy(40, 4);\n    setColor(2);\n    std::cout &lt;&lt; \"--------Menu--------\" &lt;&lt; std::endl;\n\n    gotoxy(40, 12);\n    std::cout &lt;&lt; \"--------------------\" &lt;&lt; std::endl;\n    clearColor();\n\n}\n\nvoid gatherArea()\n{\n    gotoxy(45, 6);\n    setColor(3);\n    std::cout &lt;&lt; \"-Gather\" &lt;&lt; std::endl;\n    clearColor();\n}\nvoid recoveryArea()\n{\n    gotoxy(45, 8);\n    setColor(5);\n    std::cout &lt;&lt; \"-Recovery\" &lt;&lt; std::endl;\n    clearColor();\n}\nvoid inventoryArea()\n{\n    gotoxy(45, 10);\n    setColor(4);\n    std::cout &lt;&lt; \"-Inventory\" &lt;&lt; std::endl;\n    clearColor();\n}\n//\n// Menu Selector!\nvoid gatherOption()\n{\n    gotoxy(40, 6);\n    std::cout &lt;&lt; \"(G)\" &lt;&lt; std::endl;\n}\nvoid recoverOption()\n{\n    gotoxy(40, 8);\n    std::cout &lt;&lt; \"(R)\" &lt;&lt; std::endl;\n}\nvoid inventoryOption()\n{\n    gotoxy(40, 10);\n    std::cout &lt;&lt; \"(I)\" &lt;&lt; std::endl;\n}\nvoid gatherSelected()\n{\n    setColor(5);\n    gotoxy(40, 6);\n    std::cout &lt;&lt; \"(G)\" &lt;&lt; std::endl;\n    clearColor();\n}\nvoid recoverSelected()\n{\n    setColor(5);\n    gotoxy(40, 8);\n    std::cout &lt;&lt; \"(R)\" &lt;&lt; std::endl;\n    clearColor();\n}\nvoid inventorySelected()\n{\n    setColor(5);\n    gotoxy(40, 10);\n    std::cout &lt;&lt; \"(I)\" &lt;&lt; std::endl;\n    clearColor();\n}\n//\n// Menu Viewer!\n\nvoid viewClear()\n{\n    gotoxy(0, 4);\n    for (int i = 0; i &lt; 40; i++)\n    {\n        std::cout &lt;&lt; \"\\t\\t\\t\\t\\t\" &lt;&lt; std::endl;\n    }\n\n\n\n}\n\nvoid viewGather()\n{\n    gotoxy(12, 4);\n    std::cout &lt;&lt; \"-----Gather-----\\n\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"\\t 1) Gather Wood    (5 sec)\\n\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"\\t 2) Gather Berries (5 sec)\\n\" &lt;&lt; std::endl;\n\n}\nvoid viewRecover()\n{\n    gotoxy(12, 4);\n    std::cout &lt;&lt; \"-----Recover-----\\n\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"\\t 1) Eat Berries (5 sec)\\n\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"\\t 2) Sleep      (10  sec)\\n\" &lt;&lt; std::endl;\n\n\n}\n\n\n\n\n//\n// Figuring out the inventory\n\nvoid viewInventory(Inventory inventory)\n{\n    std::string inv = inventory.display(inventory);\n    gotoxy(12, 4);\n    std::cout &lt;&lt; inv &lt;&lt; std::endl;\n}\n\n\nInventory setInventory(Inventory inventory)\n{\n    Item woodItem(1, \"Wood;\");\n    Item berriesItem(2, \"Berries\");\n\n    inventory.addItem(woodItem);\n    inventory.addItem(berriesItem);\n\n    return inventory;\n}\n\n//\n//Timer Stuff!\nvoid timerSetup()\n{\n    setColor(6);\n    gotoxy(5, 2);\n    std::cout &lt;&lt; \"Client Up Time:\" &lt;&lt; std::endl;\n    clearColor();\n\n}\n\nvoid getUpTime()\n{\n    gotoxy(22, 2);\n    int seconds = (int)std::clock() / 1000;\n    int minutes = (int)seconds / 60;\n    seconds = seconds % 60;\n    if (seconds &lt; 10 &amp;&amp; minutes &lt; 10)\n        std::cout &lt;&lt; \"0\" &lt;&lt; minutes &lt;&lt; \":0\" &lt;&lt; seconds &lt;&lt; std::endl;\n\n    else if (seconds &lt; 10)\n        std::cout &lt;&lt; minutes &lt;&lt; \":0\" &lt;&lt; seconds &lt;&lt; std::endl;\n\n    else if (minutes&lt;10)\n        std::cout &lt;&lt; \"0\" &lt;&lt; minutes &lt;&lt; \":\" &lt;&lt; seconds &lt;&lt; std::endl;\n    else\n        std::cout &lt;&lt; minutes &lt;&lt; \":\" &lt;&lt; seconds &lt;&lt; std::endl;\n}\n\n//\nvoid drawMenu()\n{\n    menuArea();\n    gatherArea();\n    recoveryArea();\n    inventoryArea();\n    timerSetup();\n    gatherOption();\n    recoverOption();\n    inventoryOption();\n\n}\n\n\n\n\n\nint main()\n{\n\n    Inventory inventory;\n    drawMenu();\n    std::clock_t start;\n    inventory = setInventory(inventory);\n\n\n\n    while (true)\n    {\n        ShowConsoleCursor(false);\n        getUpTime();\n\n\n        if (GetAsyncKeyState(0x47)) //G\n        {\n            gatherSelected();\n            recoverOption();\n            inventoryOption();\n            viewClear();\n            viewGather();\n        }\n        if (GetAsyncKeyState(0x52))//R\n        {\n            recoverSelected();\n            gatherOption();\n            inventoryOption();\n            viewClear();\n            viewRecover();\n        }\n        if (GetAsyncKeyState(0x49))//I\n        {\n            Item admin(0, \"Test\");\n            inventory.addItem(admin);\n            inventorySelected();\n            gatherOption();\n            recoverOption();\n            viewClear();\n            Item bannana(3, \"Bannana\");\n            inventory.addItem(bannana);\n            viewInventory(inventory);\n\n\n\n        }\n        if (GetAsyncKeyState(VK_ESCAPE))//Esc\n        {\n            inventoryOption();\n            gatherOption();\n            recoverOption();\n            viewClear();\n        }\n\n    }\n\n\n\n\n}\n</code></pre>\n\n<p>Item.h File!</p>\n\n<pre><code>#include &lt;string&gt;\n\n#pragma once\n\nclass Item\n{\npublic:\n\n    int getId();\n    int getQuantity();\n    std::string getName();\n\n    void setQuantity(int set);\n\n    Item(int id, std::string name);\n\nprivate :\n\n    int id;\n    std::string name;\n    int quantity;\n\n\n};\n\nItem::Item(int id, std::string name)\n{\n    Item::id = id;\n    Item::name = name;\n\n}\nint Item::getQuantity()\n{\n    return quantity;\n}\nint Item::getId()\n{\n    return id;\n}\n\nstd::string Item::getName()\n{\n    return name;\n}\n\nvoid Item::setQuantity(int set)\n{\n    quantity = set;\n}\n</code></pre>\n\n<p>Inventory.h Header File!</p>\n\n<pre><code>#include \"Item.h\"\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\n#pragma once\n\nclass Inventory\n{\npublic:\n\n    Inventory();\n    std::vector&lt;Item&gt; inventory;\n    void addItem(Item item);\n    std::string display(Inventory inventory);\n\n\n\n\n\n\n};\nInventory::Inventory()\n{\n}\nvoid Inventory::addItem(Item item)\n{\n    int id = item.getId();\n    boolean added = false;\n\n    for (Item check : Inventory::inventory)\n    {\n\n\n        if (id == check.getId())\n        {\n\n            int x = check.getQuantity();\n            x++;\n            check.setQuantity(x);\n            std::cout &lt;&lt; \"Check!\" &lt;&lt; check.getQuantity() &lt;&lt; check.getName();\n            added = true;\n\n        }\n\n    }\n    if (!added)\n    {\n        item.setQuantity(0);\n        Inventory::inventory.push_back(item);\n    }\n\n}\n\n\n\n\n\nstd::string Inventory::display(Inventory inventory)\n{\n    std::string display = \"---Inventory---\\n\";\n    display += \"\\n--------------------------------------\\n\";\n    if (Inventory::inventory.size()== 0)\n        return display;\n    else\n    {\n        for (Item item : Inventory::inventory)\n        {\n            display += \"     Name: \" + item.getName();\n            display += \" Id: \" + std::to_string(item.getId());\n            display += \" Quantity: \" + std::to_string(item.getQuantity());\n            display += \"\\n--------------------------------------\\n\";\n\n        }\n\n\n        return display;\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "visual-studio", "lua", "lupa"], "comments": [{"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1524699795, "post_id": 50032746, "comment_id": 87081704, "body": "I&#39;d be very surprised if the Python 2.7 distro was built with Visual Studio 2017. Can you find you which compiler they used (maybe VS2010? but it&#39;s hopefully in the documentation) and try that?"}, {"owner": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1524699857, "post_id": 50032746, "comment_id": 87081717, "body": "In any case you might be better just installing Anaconda&#39;s Python 2.7 (or miniconda&#39;s). They have binary packages of lupa you can just pip install I think."}, {"owner": {"reputation": 1, "user_id": 9538010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c00b1a1d28eef3b50714e27e6c48e76?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/9538010/wang"}, "reply_to_user": {"reputation": 31408, "user_id": 243245, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/aed5c13647d581ae231f019a886e05a8?s=128&d=identicon&r=PG", "display_name": "Rup", "link": "https://stackoverflow.com/users/243245/rup"}, "edited": false, "score": 0, "creation_date": 1524703746, "post_id": 50032746, "comment_id": 87082634, "body": "i try install Anaconda and pip install lupa,but it still happen errors.   UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode characters in position 13-50: ordinal not in range(128)      ---------------------------------------- Command &quot;python setup.py egg_info&quot; failed with error code 1 in c:\\users\\wangxin\\appdata\\local\\temp\\pip-build-qjym3p\\lupa\\"}], "owner": {"reputation": 1, "user_id": 9538010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c00b1a1d28eef3b50714e27e6c48e76?s=128&d=identicon&r=PG&f=1", "display_name": "Wang", "link": "https://stackoverflow.com/users/9538010/wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1524699340, "creation_date": 1524699340, "question_id": 50032746, "link": "https://stackoverflow.com/questions/50032746/how-to-use-setuptools-to-install-lupa-with-python", "title": "how to use setuptools to install lupa with python", "body": "<p>when i install lupa happen errors.\n<br>ENV: python2.7 32bits\n<br>vcforpython\n<br>visual studio 2017\nerrors:\n<code>\n    C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Bin\\cl.exe /c /nologo /Ox /MD /W3 /GS- /DNDEBUG -ID:\\lupa-1.6\\LuaJIT-2.0.5\\src -IC:\\Python27\\include -IC:\\Python27\\PC /Tclupa/_lupa.c /Fobuild\\temp.win32-2.7\\Release\\lupa/_lupa.obj\n_lupa.c\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(96) : warning C4005: '_CRT_STRINGIZE' : macro redefinition\n        C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\crtdefs.h(180) : see previous definition of '_CRT_STRINGIZE'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(99) : warning C4005: '_CRT_WIDE' : macro redefinition\n        C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\crtdefs.h(185) : see previous definition of '_CRT_WIDE'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(142) : warning C4005: '__CRTDECL' : macro redefinition\n        C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\crtdefs.h(650) : see previous definition of '__CRTDECL'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(196) : error C2061: syntax error : identifier '__vcrt_bool'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\vcruntime.h(196) : error C2059: syntax error : ';'\nC:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Tools\\MSVC\\14.13.26128\\include\\stdint.h(111) : warning C4005: 'WCHAR_MIN' : macro redefinition\n        C:\\Users\\wangxin\\AppData\\Local\\Programs\\Common\\Microsoft\\Visual C++ for Python\\9.0\\VC\\Include\\wchar.h(43) : see previous definition of 'WCHAR_MIN'\nerror: command 'C:\\\\Users\\\\wangxin\\\\AppData\\\\Local\\\\Programs\\\\Common\\\\Microsoft\\\\Visual C++ for Python\\\\9.0\\\\VC\\\\Bin\\\\cl.exe' failed with exit status 2\n</code>\nhelp!Thanks</p>\n"}, {"tags": ["c++", "pointers", "linked-list"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1524700748, "post_id": 50032716, "comment_id": 87081895, "body": "If you want us to help with bugs in your LinkedList you need to post a minimal example."}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 1, "creation_date": 1524700894, "post_id": 50032716, "comment_id": 87081928, "body": "Also you&#39;ll get much better help if you post a <a href=\"https://repl.it\" rel=\"nofollow noreferrer\">repl.it</a> link"}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524701971, "post_id": 50032716, "comment_id": 87082201, "body": "The linked list works in other programs, but I could post it.  My question is about the reciprocal nature of the lists in two objects pointing to each other, whether there is a fundamental issue there that I need to consider."}, {"owner": {"reputation": 9953, "user_id": 8012206, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/z0Yl9.jpg?s=128&g=1", "display_name": "Joseph D.", "link": "https://stackoverflow.com/users/8012206/joseph-d"}, "edited": false, "score": 0, "creation_date": 1524702173, "post_id": 50032716, "comment_id": 87082246, "body": "show your <code>displayList</code>"}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524702575, "post_id": 50032716, "comment_id": 87082332, "body": "<a href=\"https://repl.it/@prprice16/GrowlingFastRule\" rel=\"nofollow noreferrer\">repl.it/@prprice16/GrowlingFastRule</a>"}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524702610, "post_id": 50032716, "comment_id": 87082343, "body": "Runs but gives*** Error in `./main&#39;: double free or corruption (fasttop):"}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524702681, "post_id": 50032716, "comment_id": 87082364, "body": "*** Error in `./main&#39;: free(): invalid pointer:"}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524702800, "post_id": 50032716, "comment_id": 87082404, "body": "template &lt;class T&gt; void LinkedList&lt;T&gt;::displayList() { \t//&quot;walk&quot; the list and print each value \tListNode *nodePtr;  //to walk the list \t\t\t\t\t\t//start at the beginning \tnodePtr = head; \t//while there is a node to print \twhile (nodePtr) \t{ \t\t//display the value \t\tcout &lt;&lt; nodePtr-&gt;data &lt;&lt; endl; \t\t//move to next node \t\tnodePtr = nodePtr-&gt;next; \t} }"}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524702823, "post_id": 50032716, "comment_id": 87082410, "body": "sorry displayList code did not format correctly, but it is in repl.it link posted above"}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1524705407, "post_id": 50032716, "comment_id": 87082978, "body": "Welcome to SO!  It&#39;s best to edit your question to include the new information, not add a string of comments.  I suggest you edit it then delete the comments.  It might also help to read <a href=\"https://stackoverflow.com/tour\">tour</a> then <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> then <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 1273, "user_id": 2287427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12dacf80e8ab397c3fdcd4f0d49c32d?s=128&d=identicon&r=PG", "display_name": "Dave S", "link": "https://stackoverflow.com/users/2287427/dave-s"}, "edited": false, "score": 0, "creation_date": 1524705486, "post_id": 50032716, "comment_id": 87082998, "body": "Also, with a debug build you might be able to look at the call stack to see what went horribly wrong.  If not, adding some logging / trace code should help."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1524706501, "post_id": 50032716, "comment_id": 87083246, "body": "Still missing the <code>appendNode</code> code."}, {"owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "edited": false, "score": 0, "creation_date": 1524709643, "post_id": 50032716, "comment_id": 87083974, "body": "Best way to debug random crashes is AppVerif.exe under C:\\windows\\system32. Open it, add your application, press save, close AppVerif. Then run your prog under visual studio debugger. Remember to remove your app from AppVerif settings when you are done (it makes your program use lots of extra cpu and memory). If it&#39;s working, you should see lines in VS debugger output like &quot;application verifier enabled&quot;. Obviously this requires a debug build"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1524714966, "post_id": 50032716, "comment_id": 87085258, "body": "Please read about <b>the rule of three</b>, but also re-do your design using <code>LinkedList&lt;User*&gt;</code>. It is not possible to do a friends network with <code>LinkedList&lt;User&gt;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524712123, "post_id": 50034221, "comment_id": 87084560, "body": "Aaahhh!!!  So I need to overload operator= to do a deep copy of the list?  I think I get it...!"}, {"owner": {"reputation": 169, "user_id": 4617668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O2iZBdSrs8Q/AAAAAAAAAAI/AAAAAAAAACg/G2ewkgmA-HE/photo.jpg?sz=128", "display_name": "Jay Wai Tan", "link": "https://stackoverflow.com/users/4617668/jay-wai-tan"}, "reply_to_user": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524712266, "post_id": 50034221, "comment_id": 87084587, "body": "It is better for you to simply use a LinkedList&lt;User*&gt; instead."}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524712562, "post_id": 50034221, "comment_id": 87084647, "body": "wait or do I need to overload operator== in User?  to make sure it actually makes a copy?  But I want to modify the user object that is passed in (to make the friendship mutual)."}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524712633, "post_id": 50034221, "comment_id": 87084662, "body": "When you say simply use a LinkedList&lt;User&gt; ... but I need the list inside User, that is what I have."}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524712785, "post_id": 50034221, "comment_id": 87084705, "body": "Or do I need a copy constructor for User?"}, {"owner": {"reputation": 169, "user_id": 4617668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O2iZBdSrs8Q/AAAAAAAAAAI/AAAAAAAAACg/G2ewkgmA-HE/photo.jpg?sz=128", "display_name": "Jay Wai Tan", "link": "https://stackoverflow.com/users/4617668/jay-wai-tan"}, "reply_to_user": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524713200, "post_id": 50034221, "comment_id": 87084817, "body": "If you want to make the LinkedList more versatile in situations like this, you should implement the assignment operator. Also, take note of the additional * in the LinkedList&lt;User*&gt; comment. It is always better to store a pointer instead of copying everything inside the other user. This is a much better solution in both logic and efficiency."}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524714097, "post_id": 50034221, "comment_id": 87085058, "body": "Oh ... didn&#39;t see the * ... thanks for giving me food for thought, I knew something was going on, was trying to visualize and think through the problem.  I will work on it.  Thanks again!"}, {"owner": {"reputation": 768, "user_id": 4623259, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/sNAyd.png?s=128&g=1", "display_name": "iPherian", "link": "https://stackoverflow.com/users/4623259/ipherian"}, "reply_to_user": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524714328, "post_id": 50034221, "comment_id": 87085118, "body": "@PamelaPrice To make it clear, his suggestion of a copy assign <code>operator=</code> for <code>LinkedList</code> will (presumably) resolve the crashing. His additional suggestion of <code>User*</code> vs <code>User</code> in the linked list is unrelated to this crash (not that I disagree with it)."}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524714501, "post_id": 50034221, "comment_id": 87085157, "body": "And overloading operator= in LinkedList will basically use the same code I have in copy constructor correct?"}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524714678, "post_id": 50034221, "comment_id": 87085197, "body": "wow yes overloading operator= in LinkedList did the trick!!  MANY THANKS!!!"}, {"owner": {"reputation": 169, "user_id": 4617668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O2iZBdSrs8Q/AAAAAAAAAAI/AAAAAAAAACg/G2ewkgmA-HE/photo.jpg?sz=128", "display_name": "Jay Wai Tan", "link": "https://stackoverflow.com/users/4617668/jay-wai-tan"}, "edited": false, "score": 0, "creation_date": 1524714916, "post_id": 50034221, "comment_id": 87085246, "body": "Almost, except you have to take care to clean up your current container before copying the other list. The question has been answered and the baton is in your hands now, go ahead and experiment yourself. Do your best to understand what is happening and what is the correct way to do things yourself via researching. You will also learn more along the way."}, {"owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "edited": false, "score": 0, "creation_date": 1524718709, "post_id": 50034221, "comment_id": 87086223, "body": "@Jay Wai Tan Just a quick clarification, what do you mean by &quot;clean up your current container&quot;?"}, {"owner": {"reputation": 169, "user_id": 4617668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O2iZBdSrs8Q/AAAAAAAAAAI/AAAAAAAAACg/G2ewkgmA-HE/photo.jpg?sz=128", "display_name": "Jay Wai Tan", "link": "https://stackoverflow.com/users/4617668/jay-wai-tan"}, "edited": false, "score": 0, "creation_date": 1524718880, "post_id": 50034221, "comment_id": 87086292, "body": "If your current LinkedList has items in it, when you do an assignment, you have to cleanup before you copy."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1524719857, "post_id": 50034221, "comment_id": 87086597, "body": "The user class should be uncopyable in the first place, it&quot;s the only sane way to program this kind of application."}], "tags": [], "owner": {"reputation": 169, "user_id": 4617668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-O2iZBdSrs8Q/AAAAAAAAAAI/AAAAAAAAACg/G2ewkgmA-HE/photo.jpg?sz=128", "display_name": "Jay Wai Tan", "link": "https://stackoverflow.com/users/4617668/jay-wai-tan"}, "is_accepted": false, "score": 1, "last_activity_date": 1524712000, "creation_date": 1524712000, "answer_id": 50034221, "question_id": 50032716, "link": "https://stackoverflow.com/questions/50032716/using-linked-list-as-an-object-in-a-class-in-c/50034221#50034221", "title": "Using Linked List as an object in a class in C++", "body": "<p>You have</p>\n\n<pre><code>LinkedList&lt;User&gt; myfriends;\n</code></pre>\n\n<p>When you do </p>\n\n<pre><code>void addFriend(User &amp;u) \n{ \n    //...\n}\n</code></pre>\n\n<p>You will do a full copy of User, including the LinkedList object in it.\nHowever, inside your LinkedList, you did not specify an assignment operator, meaning your head for the User passed in will be directly assigned, leaving you with 2 LinkedList with the same head.</p>\n\n<p>Hence the same head pointer will be freed twice.</p>\n"}], "owner": {"reputation": 23, "user_id": 5208711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/783ef40749421e075462551c02b60da5?s=128&d=identicon&r=PG&f=1", "display_name": "Pamela Price", "link": "https://stackoverflow.com/users/5208711/pamela-price"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1524712038, "creation_date": 1524698960, "last_edit_date": 1524712038, "question_id": 50032716, "link": "https://stackoverflow.com/questions/50032716/using-linked-list-as-an-object-in-a-class-in-c", "title": "Using Linked List as an object in a class in C++", "body": "<p>I am trying to implement a \"facebook\" like problem.</p>\n\n<p>I have created a class called <code>User</code>.  A user has a list of friends.</p>\n\n<p>I tried this using a C++ vector and it worked without any problems.</p>\n\n<p>Then I tried changing the vector to a <code>LinkedList</code>, using a template class I have.</p>\n\n<p>The template has a copy constructor and destructor.</p>\n\n<p>I have tested and debugged the template for other datatypes.</p>\n\n<pre><code>class User\n{\nprivate:\n    string uname;\n    //vector&lt;User&gt; myfriends;\n    LinkedList&lt;User&gt; myfriends;\n\npublic:\n    User() { uname = \"none\"; }\n    User(string n) { uname = n; }\n    string getName() { return uname; }\n    void addFriend(User &amp;u) \n    { \n        //add u to me\n        myfriends.appendNode(u);\n\n        //add \"me\" to u\n        u.myfriends.appendNode(*this); //causes problem?\n\n        //myfriends.push_back(u);  //when using vector\n        //u.myfriends.push_back(*this); //works when using vector\n\n    }\n    void listFriends()\n    {\n        cout &lt;&lt; uname &lt;&lt; \" has \" &lt;&lt; myfriends.getSize() &lt;&lt; \" friends\" &lt;&lt; endl;\n        myfriends.displayList();  //prints values in linked list\n    }\n\n    friend ostream&amp; operator&lt;&lt; (ostream&amp; out, User u)\n    {\n        out &lt;&lt; u.uname;\n        return out;\n    }\n\n};\n</code></pre>\n\n<p>I want the addFriend function to make a \"mutual\" connection.</p>\n\n<p>This works when I use a <code>vector</code>, but when using this <code>LinkedList</code> and this testing program:</p>\n\n<pre><code>User u1(\"joe\");\nUser u2(\"sam\");\n\nu1.addFriend(u2);\nu1.listFriends();\n</code></pre>\n\n<p>I get the correct output</p>\n\n<pre><code>joe has 1 friends\nsam\n</code></pre>\n\n<p>However I also get a runtime error which tells me something funky is happening with my pointers.</p>\n\n<blockquote>\n  <p>\"A problem caused the program to stop working correctly.\"</p>\n</blockquote>\n\n<p>I am using Visual Studio Express 2017.</p>\n\n<p>I am trying to figure out if there is some basic flaw with making the connections this way, trying to draw some pictures to work it out.</p>\n\n<p>Any thoughts on what might be causing the runtime error?</p>\n\n<p>Here's the <code>displayList()</code> function:</p>\n\n<pre><code>template &lt;class T&gt; \nvoid LinkedList&lt;T&gt;::displayList() \n{ \n    //\"walk\" the list and print each value \n    ListNode *nodePtr; \n    //to walk the list\n    //start at the beginning \n    nodePtr = head; \n    //while there is a node to print \n    while (nodePtr) { \n        //display the value \n        cout &lt;&lt; nodePtr-&gt;data &lt;&lt; endl; \n        //move to next node \n        nodePtr = nodePtr-&gt;next; \n    } \n} \n</code></pre>\n\n<p>Here is displayList code in LinkedList template</p>\n\n<pre><code>template &lt;class T&gt;\nvoid LinkedList&lt;T&gt;::displayList()\n{\n    //\"walk\" the list and print each value\n    ListNode *nodePtr;  //to walk the list\n                        //start at the beginning\n    nodePtr = head;\n    //while there is a node to print\n    while (nodePtr)\n    {\n        //display the value\n        cout &lt;&lt; nodePtr-&gt;data &lt;&lt; endl;\n        //move to next node\n        nodePtr = nodePtr-&gt;next;\n    }\n}\n</code></pre>\n\n<p>Here is appendNode</p>\n\n<pre><code>template &lt;class T&gt;\nvoid LinkedList&lt;T&gt;::appendNode(T value)\n{\n    ListNode *newNode;  //to point to a new node\n    ListNode *nodePtr;  //to move through the list\n\n                        //allicate a new node and store value\n    newNode = new ListNode;\n    newNode-&gt;data = value;\n    newNode-&gt;next = nullptr;\n\n    //if list is empty make this the first node\n    if (!head)\n        head = newNode;\n    else // insert at end of list\n    {\n        //initialize nodePtr to head of list\n        nodePtr = head;\n        //\"walk\" the listt to find the last node\n        while (nodePtr-&gt;next)  //if not null this is true\n        {\n            nodePtr = nodePtr-&gt;next;\n        }\n        //nodePtr now points to last node in list\n        //add the new node\n        nodePtr-&gt;next = newNode;\n        //remember it's next has already been assigned to null\n    }\n    numElements++;\n\n}\n</code></pre>\n\n<p>Here is link\n<a href=\"https://repl.it/@prprice16/GrowlingFastRule\" rel=\"nofollow noreferrer\">https://repl.it/@prprice16/GrowlingFastRule</a></p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1524699018, "post_id": 50032705, "comment_id": 87081518, "body": "Which function do you expect to be called?"}, {"owner": {"reputation": 976, "user_id": 5570210, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/74fd10a211ae953ec7a5f2a0ae1d3a2e?s=128&d=identicon&r=PG&f=1", "display_name": "code", "link": "https://stackoverflow.com/users/5570210/code"}, "reply_to_user": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 0, "creation_date": 1524699167, "post_id": 50032705, "comment_id": 87081563, "body": "I would like Sphere::print()"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1524699201, "post_id": 50032705, "comment_id": 87081570, "body": "Impossible unless you remove the <code>final</code>. Once you do that, override <code>print()</code> in the GeoDisc, calling <code>Sphere::print</code>."}], "answers": [{"comments": [{"owner": {"reputation": 976, "user_id": 5570210, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/74fd10a211ae953ec7a5f2a0ae1d3a2e?s=128&d=identicon&r=PG&f=1", "display_name": "code", "link": "https://stackoverflow.com/users/5570210/code"}, "edited": false, "score": 0, "creation_date": 1524762498, "post_id": 50035772, "comment_id": 87113224, "body": "Thanks for the explanation."}], "tags": [], "owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "is_accepted": true, "score": 0, "last_activity_date": 1524722308, "creation_date": 1524722308, "answer_id": 50035772, "question_id": 50032705, "link": "https://stackoverflow.com/questions/50032705/how-to-add-final-overrider/50035772#50035772", "title": "How to add final overrider", "body": "<p>Keyword <code>final</code> in virtual method declaration prevents multiple inheritance, so if I tried to solve ambiguity in that case, it's a wrong approach. If both Box and Sphere would have final word, you'll get error \"virtual function 'Shape::print' has more than one final overrider in 'GeoDisc'\". The legal ambiguity solution would be:</p>\n\n<pre><code>struct Sphere : public virtual Shape\n{\n  void print() override\n  {\n    std::cout &lt;&lt; \"SPHERE\" &lt;&lt; std::endl;\n  }\n};\n\nstruct GeoDisc : public Box, public Sphere\n{\n  void print() final override\n  {\n    Sphere::print();\n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 976, "user_id": 5570210, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/74fd10a211ae953ec7a5f2a0ae1d3a2e?s=128&d=identicon&r=PG&f=1", "display_name": "code", "link": "https://stackoverflow.com/users/5570210/code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 50035772, "answer_count": 1, "score": 2, "last_activity_date": 1524722308, "creation_date": 1524698861, "question_id": 50032705, "link": "https://stackoverflow.com/questions/50032705/how-to-add-final-overrider", "title": "How to add final overrider", "body": "<p>How can I add a \"final overrider\" to solve this problem?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Shape\n{\n  virtual void print()\n  {\n    std::cout &lt;&lt; \"SHAPE\" &lt;&lt; std::endl;\n  }\n  virtual ~Shape() {}\n};\n\nstruct Box : public virtual Shape\n{\n  void print() \n  {\n    std::cout &lt;&lt; \"BOX\" &lt;&lt; std::endl;\n  }\n};\n\nstruct Sphere : public virtual Shape\n{\n  void print() final override\n  {\n    std::cout &lt;&lt; \"SPHERE\" &lt;&lt; std::endl;\n  }\n};\n\nstruct GeoDisc : public Box, public Sphere\n{\n};\n\nint main(int argc, char** argv)\n{\n  Shape* s = new GeoDisc;\n\n  s-&gt;print();\n\n  delete s;\n\n  return 0;\n}\n</code></pre>\n\n<p>This is the error message:<br>\n31:8: error: no unique final overrider for 'virtual void Shape::print()' in 'GeoDisc'</p>\n"}, {"tags": ["c++", "algorithm", "sorting"], "comments": [{"owner": {"reputation": 4562, "user_id": 9254539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b45538511384660bfaef5092e30b7ea?s=128&d=identicon&r=PG&f=1", "display_name": "BessieTheCookie", "link": "https://stackoverflow.com/users/9254539/bessiethecookie"}, "edited": false, "score": 0, "creation_date": 1524703494, "post_id": 50032373, "comment_id": 87082575, "body": "This isn&#39;t a free debugging service, and we expect you to show your attempts at debugging the code with a debugger or other simpler methods such as debug print statements. Learning to debug your programs is an important part of learning to code. <a href=\"http://idownvotedbecau.se/nodebugging/\" rel=\"nofollow noreferrer\">idownvotedbecau.se/nodebugging</a>"}], "answers": [{"tags": [], "owner": {"reputation": 64283, "user_id": 315052, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/AB5ST.png?s=128&g=1", "display_name": "jxh", "link": "https://stackoverflow.com/users/315052/jxh"}, "is_accepted": false, "score": 0, "last_activity_date": 1524696701, "creation_date": 1524696701, "answer_id": 50032422, "question_id": 50032373, "link": "https://stackoverflow.com/questions/50032373/using-selection-sort-with-an-array-of-strings-in-c/50032422#50032422", "title": "Using selection sort with an array of strings in c++", "body": "<p>There is at least one logical error. <code>index</code> is being incremented twice per iteration of your inner loop.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 7631546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce133fef40749268aeadb00e5dba4f9f?s=128&d=identicon&r=PG&f=1", "display_name": "rooted", "link": "https://stackoverflow.com/users/7631546/rooted"}, "edited": false, "score": 0, "creation_date": 1524696904, "post_id": 50032433, "comment_id": 87080941, "body": "Results changed here, but they are still incorrect. Now I have  1. John Hoover  2. Louise Stephen  3. Patty Anderson  4. Samuel Said  5. Stephen Wakefield"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 27, "user_id": 7631546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce133fef40749268aeadb00e5dba4f9f?s=128&d=identicon&r=PG&f=1", "display_name": "rooted", "link": "https://stackoverflow.com/users/7631546/rooted"}, "edited": false, "score": 0, "creation_date": 1524697530, "post_id": 50032433, "comment_id": 87081128, "body": "@austintice What do you think the correct order should be?"}, {"owner": {"reputation": 27, "user_id": 7631546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce133fef40749268aeadb00e5dba4f9f?s=128&d=identicon&r=PG&f=1", "display_name": "rooted", "link": "https://stackoverflow.com/users/7631546/rooted"}, "edited": false, "score": 0, "creation_date": 1524698887, "post_id": 50032433, "comment_id": 87081485, "body": "I imagined that the correct order would relate to the combined ASCII values of each so it would go(shortened): Samuel, J, L, P, Stephen"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524699168, "post_id": 50032433, "comment_id": 87081565, "body": "I&#39;m not sure what you mean by &quot;combined ASCII values&quot;. J is before S, so John Hoover is before Samuel Said."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524699273, "post_id": 50032433, "comment_id": 87081583, "body": "It&#39;s lexicographic: First compare the first characters. If they&#39;re the same compare the second characters. Keep repeating until you get to a character that&#39;s different, and use the ordering of those characters."}, {"owner": {"reputation": 27, "user_id": 7631546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce133fef40749268aeadb00e5dba4f9f?s=128&d=identicon&r=PG&f=1", "display_name": "rooted", "link": "https://stackoverflow.com/users/7631546/rooted"}, "edited": false, "score": 0, "creation_date": 1524702622, "post_id": 50032433, "comment_id": 87082345, "body": "I was under the impression that you didn&#39;t sort the values based solely on their first character, but on their cumulative ASCII value count. As if you were doing <code>stoi(str)</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524702863, "post_id": 50032433, "comment_id": 87082419, "body": "Your impression is wrong. Numeric types are sorted arithmetically, strings are sorted lexicographically.  <code>123 &gt; 20</code> is true, <code>&quot;123&quot; &gt; &quot;20&quot;</code> is false."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1524696779, "creation_date": 1524696779, "answer_id": 50032433, "question_id": 50032373, "link": "https://stackoverflow.com/questions/50032373/using-selection-sort-with-an-array-of-strings-in-c/50032433#50032433", "title": "Using selection sort with an array of strings in c++", "body": "<p>You're incrementing <code>index</code> twice.</p>\n\n<pre><code>    for(index = (startScan + 1); index &lt; num; index++){ // increment it here\n        if(arr[index] &lt; minValue){\n            minValue = arr[index];\n            minIndex = index;\n        }\n        index++; // and increment it also here\n    }\n</code></pre>\n\n<p>So you're only checking every other element of the array.</p>\n\n<p>Get rid of the second <code>index++;</code> line.</p>\n"}], "owner": {"reputation": 27, "user_id": 7631546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce133fef40749268aeadb00e5dba4f9f?s=128&d=identicon&r=PG&f=1", "display_name": "rooted", "link": "https://stackoverflow.com/users/7631546/rooted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1524696779, "creation_date": 1524696444, "question_id": 50032373, "link": "https://stackoverflow.com/questions/50032373/using-selection-sort-with-an-array-of-strings-in-c", "title": "Using selection sort with an array of strings in c++", "body": "<p>I'm having issues producing the correct result on this selection sort. I feel as if the code is correct and the logic works, but to my current understanding the result I'm getting are incorrect. Here is my code:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\nusing namespace std;\n\n// Function prototypes\nvoid selectionSort(string[], int);\nstring linearSearch(string[]);\n\n// Declare variables\n    const int MAX_FRIENDS = 250;\n    int currentIteration = 0;\n</code></pre>\n\n<p>Main:</p>\n\n<pre><code>int main()\n{\n    // Declare stream file\n    fstream names;\n    names.open(\"myFriends.txt\");\n    string friends[MAX_FRIENDS];\n    while(getline(names,friends[currentIteration])){\n        currentIteration++;\n    }\n    cout &lt;&lt; \"Before Sort:\\n\\n\";\n    for(int i = 0; i &lt; currentIteration; i++){\n        cout &lt;&lt; \"Index \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; friends[i] &lt;&lt; endl;\n    }\n    selectionSort(friends,5);\n    cout &lt;&lt; \"\\nAfter Sort: \\n\\n\";\n    for(int i = 0; i &lt; currentIteration; i++){\n        cout &lt;&lt; \"Index \" &lt;&lt; i &lt;&lt; \": \" &lt;&lt; friends[i] &lt;&lt; endl;\n    }\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Function Declaration</p>\n\n<pre><code>void selectionSort(string arr[], int num){\n    // Declare Necessary Variables\n    int startScan,minIndex, index;\n    string minValue;\n    for(startScan = 0; startScan &lt; (num - 1); startScan++){\n        index = startScan;\n        minIndex = startScan;\n        minValue = arr[startScan];\n        for(index = (startScan + 1); index &lt; num; index++){\n            if(arr[index] &lt; minValue){\n                minValue = arr[index];\n                minIndex = index;\n            }\n            index++;\n        }\n        arr[minIndex] = arr[startScan];\n        arr[startScan] = minValue;\n    }\n}\n</code></pre>\n\n<p>I am working with a text file of myFriends that contains the following names in the following order </p>\n\n<ol>\n<li>Samuel Said</li>\n<li>Louise Stephen</li>\n<li>Stephen Wakefield</li>\n<li>Patty Anderson</li>\n<li>John Hoover</li>\n</ol>\n\n<p>When I run the selection sort I get this sequence back in this order.</p>\n\n<ol>\n<li>Louise Stephen</li>\n<li>John Hoover</li>\n<li>Patty Anderson</li>\n<li>Samuel Said</li>\n<li>Stephen Wakefield</li>\n</ol>\n\n<p>To my knowledge of ASCII these are not correct values. Please inform.</p>\n"}, {"tags": ["c++", "arm", "intrinsics", "neon"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524697612, "post_id": 50032233, "comment_id": 87081159, "body": "On x86-64 with BMI2, you could do 32-&gt;48 bits with a scalar <a href=\"http://felixcloutier.com/x86/PDEP.html\" rel=\"nofollow noreferrer\"><code>pdep</code></a>, 1 uop on Intel but slow on current AMD.  On ARM with NEON I&#39;m thinking we probably need byte shuffles + per-element shifts, maybe with variable-count shifts?  Perhaps shuffle / shift / shuffle to get zeros in the top 4 bits of the relevant bytes?"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524698338, "post_id": 50032233, "comment_id": 87081334, "body": "maybe there is something similar with bit-shift insert that Jake suggested in one of other questions. Probably I can do something similar. I&#39;ll update question with relevant info"}, {"owner": {"reputation": 45685, "user_id": 69809, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/yCVF0.jpg?s=128&g=1", "display_name": "Groo", "link": "https://stackoverflow.com/users/69809/groo"}, "edited": false, "score": 0, "creation_date": 1524815545, "post_id": 50032233, "comment_id": 87132020, "body": "How does <code>01 02 03 04</code> become <code>01 20 00 03 40</code> again? I don&#39;t see it from your code snippet, which is supposed to do something like: <code>0x01</code> -&gt; <code>0x01</code>, <code>0x02</code> -&gt; <code>0x20</code>, <code>0x03</code> -&gt; <code>0x0300</code>, <code>0x04</code> -&gt; <code>0x4000</code>. I guess what you meant was <code>01 20 00 03 00 40</code>? And what does &quot;convert that to 12-bit&quot; mean? Last four bits shifted by 12 gives a 16-bit value."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524846562, "post_id": 50032233, "comment_id": 87149850, "body": "Think about it as inserting 4-zero bits between the four bytes. <a href=\"http://coliru.stacked-crooked.com/a/4141c6081b2161d4\" rel=\"nofollow noreferrer\">Run the code</a> to see the result"}], "answers": [{"comments": [{"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524845379, "post_id": 50057714, "comment_id": 87149223, "body": "Even 5 year old gcc at <code>-O1</code> unrolls the loop and <a href=\"https://godbolt.org/g/GZLDGP\" rel=\"nofollow noreferrer\">moves out</a> <code>out.val[3] = vdupq_n_u8(0);</code>"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 1, "creation_date": 1524845982, "post_id": 50057714, "comment_id": 87149528, "body": "compilers are much smarter than you think. Even when neon intrinsics were complete garbage 10 years ago they would still do this basic piece well. off course <code>out.val[3]</code> <a href=\"https://godbolt.org/g/R2mAkv\" rel=\"nofollow noreferrer\">will be inited once</a> outside of the loop. <code>temp1 += in.val[1] &gt;&gt; 4</code> didn&#39;t translate to <code>vsra</code>, but then <code>vsra</code> might not necessarily be better: compiler always know all the data dependencies and opcode timings and can optimize it well especially when a function is large."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524848576, "post_id": 50057714, "comment_id": 87150698, "body": "Basically, input to the function was already interleaved and made to be outside of the box if that even matters."}, {"owner": {"reputation": 4932, "user_id": 1021504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbd1ccace98a4e6473cc18c38dbb6d4?s=128&d=identicon&r=PG", "display_name": "Jake &#39;Alquimista&#39; LEE", "link": "https://stackoverflow.com/users/1021504/jake-alquimista-lee"}, "reply_to_user": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 3, "creation_date": 1524850717, "post_id": 50057714, "comment_id": 87151604, "body": "@Pavel Your question updates are really getting tedious. As it seems, your last two questions were actually a single one. And who knows what comes next? Why didn&#39;t you ask for an algorithm doing both from the beginning? Why don&#39;t you ever mention the total problem size? Even my customers who pay me a few grands for a single function aren&#39;t this inconsiderate."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524852703, "post_id": 50057714, "comment_id": 87152508, "body": "Yes, I agree, sorry for that :) I posted minimal questions when I stumbled on the actual issue of merging 4 results and asked just that part."}], "tags": [], "owner": {"reputation": 4932, "user_id": 1021504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbd1ccace98a4e6473cc18c38dbb6d4?s=128&d=identicon&r=PG", "display_name": "Jake &#39;Alquimista&#39; LEE", "link": "https://stackoverflow.com/users/1021504/jake-alquimista-lee"}, "is_accepted": true, "score": 2, "last_activity_date": 1524917184, "last_edit_date": 1524917184, "creation_date": 1524815137, "answer_id": 50057714, "question_id": 50032233, "link": "https://stackoverflow.com/questions/50032233/efficiently-extend-8-bit-numbers-to-12-bits-in-a-single-arm-neon-register/50057714#50057714", "title": "Efficiently extend 8-bit numbers to 12-bits in a single arm neon register", "body": "<p>You have to think out of the box. Don't stick to the data type and bit width.</p>\n\n<p><code>uint32_t</code> is nothing else than an array of 4 <code>uint8_t</code> which you can easily spread through <code>vld4</code> on-the-fly while loading.</p>\n\n<p>The problem gets much more manageable thereby.</p>\n\n<hr>\n\n<pre><code>void foo(uint32_t *pDst, uint32_t *pSrc, uint32_t length)\n{\n    length &gt;&gt;= 4;\n    int i;\n    uint8x16x4_t in, out;\n    uint8x16_t temp0, temp1, temp2;\n\n    for (i = 0; i &lt; length; ++i)\n    {\n        in = vld4q_u8(pSrc);\n        pSrc += 16;\n\n        temp0 = in.val[1] &lt;&lt; 4;\n        temp1 = in.val[3] &lt;&lt; 4;\n        temp1 += in.val[1] &gt;&gt; 4;\n\n        out.val[0] = in.val[0] | temp0;\n        out.val[1] = in.val[2] | temp1;\n        out.val[2] = in.val[3] &gt;&gt; 4;\n        out.val[3] = vdupq_n_u8(0);\n\n        vst4q_u8(pDst, out);\n        pDst += 16;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>Note that I omitted the residual dealing, and it would run much faster if you unroll deeper.</p>\n\n<p>More importantly, I'd write this function in assembly without thinking twice, because I don't think that the compiler would manage the registers so cleverly that <code>out.val[3]</code> gets initialized by zero only once outside the loop.</p>\n\n<p>And I also doubt that <code>temp1 += in.val[1] &gt;&gt; 4;</code> would translate to <code>vsra</code> because of the instruction's nature of non-separate target operand. Who knows?</p>\n\n<p>Compilers suck.</p>\n\n<hr>\n\n<p>Update: Ok, here are codes that shall meet your needs, written in assembly, for both architectures.</p>\n\n<hr>\n\n<p>aarch32</p>\n\n<pre><code>vtrn.16     q0, q1\nvtrn.16     q2, q3\nvtrn.32     q0, q2\nvtrn.32     q1, q3\n\nvadd.u16    q0, q1, q0\nvadd.u16    q2, q3, q2\n\nadr     r12, shift_table\n\nvadd.u16    q0, q2, q0\n\nvld1.64     {q3}, [r12]\n\n\nvadd.u16    d0, d1, d0\nvclz.u16    d0, d0          // d0 contains the leading zeros\n\nvmovl.u16   q0, d0\n\nvshl.u32    q1, q0, q3\n\nvpadal.u32  d3, d2          // d3 contains the final result\n\n\n.balign 8\nshift_table:\n    .dc.b   0x00, 0x00, 0x00, 0x00,     0x0c, 0x00, 0x00, 0x00,     0x18, 0x00, 0x00, 0x00,     0x04, 0x00, 0x00, 0x00 // 0, 12, 24, 4\n</code></pre>\n\n<hr>\n\n<p>aarch64</p>\n\n<pre><code>trn1        v16.8h, v0.8h, v1.8h\ntrn1        v18.8h, v2.8h, v3.8h\ntrn2        v17.8h, v0.8h, v1.8h\ntrn2        v19.8h, v2.8h, v3.8h\n\ntrn2        v0.4s, v18.4s, v16.4s\ntrn1        v1.4s, v18.4s, v16.4s\ntrn2        v2.4s, v19.4s, v17.4s\ntrn1        v3.4s, v19.4s, v17.4s\n\nadd         v0.8h, v1.8h, v0.8h\nadd         v2.8h, v3.8h, v2.8h\n\nadr     x16, shift_table\n\nadd         v0.8h, v2.8h, v0.8h\n\nld1         {v3.2d}, [x16]\n\nmov         v1.d[0], v0.d[1]\n\nadd         v0.4h, v1.4h, v0.4h\n\nclz         v0.4h, v0.4h                // v0 contains the leading zeros\n\nuxtl        v0.4s, v0.4h\n\nushl        v0.4s, v0.4s, v3.4s\n\nmov         v1.d[0], v0.d[1]\n\nuadalp      v1.1d, v0.2s                // v1 contains the final result\n\n\n.balign 8\nshift_table:\n.dc.b   0x00, 0x00, 0x00, 0x00,     0x0c, 0x00, 0x00, 0x00,     0x18, 0x00, 0x00, 0x00,     0x04, 0x00, 0x00, 0x00 // 0, 12, 24, 4\n</code></pre>\n\n<p>** You may have to change <code>.dc.b</code> to <code>.byte</code> in Clang</p>\n"}], "owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 50057714, "answer_count": 1, "score": 2, "last_activity_date": 1524917184, "creation_date": 1524695465, "last_edit_date": 1524848529, "question_id": 50032233, "link": "https://stackoverflow.com/questions/50032233/efficiently-extend-8-bit-numbers-to-12-bits-in-a-single-arm-neon-register", "title": "Efficiently extend 8-bit numbers to 12-bits in a single arm neon register", "body": "<p>I have 4 bytes loaded in a neon register. How can I efficiently convert that to 12-bit e.g. I need to insert 4 zero bits after the first byte, 8 zero bits after the second and so on. For example, if I had these 4 bytes in hex:</p>\n\n<blockquote>\n  <p>01 02 03 04</p>\n</blockquote>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/4141c6081b2161d4\" rel=\"nofollow noreferrer\">It would end up with this in hex</a>:</p>\n\n<blockquote>\n  <p>01 20 00 03 40</p>\n</blockquote>\n\n<p>Same operation expressed as a simple c-function that operates on a 32-bit variable that represents the 4 input bytes:</p>\n\n<pre><code>uint64_t expand12(uint32_t i)\n{\n    uint64_t r = (i &amp; 0xFF);\n    r |= ((i &amp; 0x0000ff00) &lt;&lt; 4); // shift second byte by 4 bits\n    r |= ((i &amp; 0x00ff0000) &lt;&lt; 8); // shift third byte by 8 bits\n    r |= (((uint64_t)(i &amp; 0xff000000)) &lt;&lt; 12); // 4th by 12\n    return r;\n}\n</code></pre>\n\n<p>So, if I have these bytes in a <code>uint8x8_t</code> neon register, what would be a good way to implement that same operation in neon so that same register would end up with these shifted values?</p>\n\n<p>Note, that all four bytes have zeroes in top 4 bits if that helps in any way.</p>\n\n<p><strong>Update:</strong>\nIn my case I have 4 uint16x8_t registers and for each one I need to calculate sum of all lanes (<code>vaddv_u16</code>), then perform <code>vclz_u16</code> on that sum and then combine these four sums in a neon register placing them 12-bit apart:</p>\n\n<pre><code>uint64_t compute(uint16x8_t a, uint16x8_t b, uint16x8_t c, uint16x8_t d)\n{\n    u16 a0 = clz(vaddv(a));\n    u16 b0 = clz(vaddv(b));\n    u16 c0 = clz(vaddv(c));\n    u16 d0 = clz(vaddv(d));\n    return (a0 &lt;&lt; 36) | (b0 &lt;&lt; 24) | (c0 &lt;&lt; 12) | (d0);\n}\n</code></pre>\n\n<p>Note, that this is pseudo code and I need the result in neon register.</p>\n\n<p>In case if that matters, in my code I have a function that finds indices of max elements in 4 uint16x8_t registers. In that function these four registers are <code>vand</code>ed with max element duplicated over all lanes and then the result was <code>vorr</code>ed with bitmask <code>{1&lt;&lt;15, 1&lt;&lt;14, ... 1&lt;&lt;0}</code>; Then, I do pairwise add of all the lanes and clz of that gives me the index of max element of each register. All of that I need to interleave  with extra 4 zero-bits inserted between elements and stored to a neon register. Example in C:</p>\n\n<pre><code>void compute(uint16_t *src, uint64_t* dst)\n{\n    uint64_t x[4];\n    for (int i = 0; i &lt; 4; ++i, src+=16)\n    {\n        int max = 0;\n        for (int j = 0; j &lt; 16; ++j)\n        {\n            if (src[j] &gt; src[max])\n                max = j;\n        }\n        x[i] = max;\n    }\n    *dst = (x[0] &lt;&lt; 36) | (x[1] &lt;&lt; 24) | (x[2] &lt;&lt; 12) | (x[3]);\n}\n</code></pre>\n\n<p>This function is part of large function that does this computation millions of times in a loop and results of this function are used and have to be in neon register. Treat it as pseudo code that describes the algorithm, if it's not clear what that means: it means that only algorithm matters, there is no loads or stores that need to be optimized</p>\n"}, {"tags": ["c++", "opencv", "opencv3.0"], "comments": [{"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1524696944, "post_id": 50031990, "comment_id": 87080952, "body": "&quot;rotate the output of cv::Rect&quot; makes very little sense. <a href=\"https://docs.opencv.org/3.1.0/d2/d44/classcv_1_1Rect__.html\" rel=\"nofollow noreferrer\"><code>cv::Rect</code></a> is a class representing the mathematical concept of an axis-aligned 2D rectangle, defined by the coordinates of its top-left corner along with width and height. As such it has no &quot;output&quot; -- some of it&#39;s member functions may, but you don&#39;t use any. What you are actually using is <a href=\"https://docs.opencv.org/3.1.0/d3/d63/classcv_1_1Mat.html#a07413f2e3e63a12185b8b218c24c7270\" rel=\"nofollow noreferrer\"><code>cv::Mat::operator()</code></a>, using a <code>Rect</code> to specify the ROI to extract. The result is again <code>Mat</code>."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1524697248, "post_id": 50031990, "comment_id": 87081046, "body": "So, after extracting it, you want to <a href=\"https://stackoverflow.com/questions/22041699/rotate-an-image-without-cropping-in-opencv-in-c\">rotate</a> the ROI after you extracted it, then copy it to the target. If the rotation is not multiple of 90 degrees, you most likely want to create a binary mask matching the original ROI, rotate that the same amount, and use it with <code>copyTo</code> to copy only the desired area."}, {"owner": {"reputation": 21, "user_id": 6334888, "user_type": "registered", "profile_image": "https://graph.facebook.com/839934446150590/picture?type=large", "display_name": "Sara Ahsain", "link": "https://stackoverflow.com/users/6334888/sara-ahsain"}, "reply_to_user": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1525009462, "post_id": 50031990, "comment_id": 87190178, "body": "I tried your approach and it worked, thank you"}], "owner": {"reputation": 21, "user_id": 6334888, "user_type": "registered", "profile_image": "https://graph.facebook.com/839934446150590/picture?type=large", "display_name": "Sara Ahsain", "link": "https://stackoverflow.com/users/6334888/sara-ahsain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524693940, "creation_date": 1524693940, "question_id": 50031990, "link": "https://stackoverflow.com/questions/50031990/is-there-a-way-to-rotate-the-output-of-cvrect-in-opencv-3", "title": "Is there a way to rotate the output of cv::Rect in opencv 3", "body": "<p>I extracted parts of an image using the cv::Rect </p>\n\n<pre><code>Mat myimg = imread(\"gopro.png\");\nMat draw = Mat(myimg.size(), myimg.type(), Scalar::all(0));\nRect r2 = Rect(417, 144, 153, 85);\nmyimg(r2).copyTo(draw(r2));\n</code></pre>\n\n<p>It copies the rectangle just fine. \nMy question is : is there a way to rotate that rectangle before copying it to the other Mat ?</p>\n\n<p>I ve already tried cv::RotatedRect, but it s not what i am searching for. Or maybe I didn't know how to use it.</p>\n\n<p>If anyone has an idea how to do so, please help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1524693659, "post_id": 50031943, "comment_id": 87080002, "body": "What would you declare the type of <code>foo</code> to be?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4616966"}, "edited": false, "score": 0, "creation_date": 1524693667, "post_id": 50031943, "comment_id": 87080005, "body": "if all else fails <code>auto foo(){}</code>"}, {"owner": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "edited": false, "score": 0, "creation_date": 1524694217, "post_id": 50031943, "comment_id": 87080162, "body": "You could create a custom type that can represent multiple types (i.e. a variant). But stepping back a bit, why exactly do you need this? Perhaps there&#39;s a different approach for what you&#39;re trying to accomplish."}, {"owner": {"reputation": 2041, "user_id": 7316365, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/84de9f27708456d85bf1078aa51155b2?s=128&d=identicon&r=PG&f=1", "display_name": "Vivick", "link": "https://stackoverflow.com/users/7316365/vivick"}, "edited": false, "score": 0, "creation_date": 1524694220, "post_id": 50031943, "comment_id": 87080163, "body": "Unless there&#39;s implicit conversion what you&#39;re asking for is impossible in a strongly typed language like C++"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524694485, "post_id": 50031943, "comment_id": 87080260, "body": "You can&#39;t do this with templates, they&#39;re resolved at compile time. C is statically-typed, you can&#39;t determine types at runtime."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2967, "user_id": 8616205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3o2ct.png?s=128&g=1", "display_name": "frslm", "link": "https://stackoverflow.com/users/8616205/frslm"}, "edited": false, "score": 0, "creation_date": 1524695446, "post_id": 50031943, "comment_id": 87080490, "body": "@frslm look at <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a> in C++17 and later, or <a href=\"https://www.boost.org/doc/libs/1_64_0/doc/html/variant.html\" rel=\"nofollow noreferrer\"><code>boost::variant</code></a> in earlier versions."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1524697842, "post_id": 50031943, "comment_id": 87081210, "body": "A function can have only one return type.   It can&#39;t have two distinct <code>return</code> statements that return incompatible types, since there is no type that can represent both  (e.g. it can&#39;t return <code>int</code> in <code>return x</code>, and a string literal in another <code>return</code> statement)."}], "answers": [{"tags": [], "owner": {"reputation": 751, "user_id": 9699953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2w49K.jpg?s=128&g=1", "display_name": "Sxribe", "link": "https://stackoverflow.com/users/9699953/sxribe"}, "is_accepted": false, "score": 1, "last_activity_date": 1524693935, "creation_date": 1524693935, "answer_id": 50031988, "question_id": 50031943, "link": "https://stackoverflow.com/questions/50031943/decide-return-type-in-function-body/50031988#50031988", "title": "decide return type in function body", "body": "<p>You could perhaps use std::to_string on <code>x</code> if its greater than or equal to 3, then after do <code>if</code> returned string is NOT equal to 3, then change its type back to integer. I hope that made sense.</p>\n"}, {"comments": [{"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "edited": false, "score": 0, "creation_date": 1524694441, "post_id": 50032047, "comment_id": 87080247, "body": "How do you know the type contained in variant when the function returns?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "edited": false, "score": 0, "creation_date": 1524694588, "post_id": 50032047, "comment_id": 87080294, "body": "@IncreasinglyIdiotic <code>std::variant</code> has methods to tell you which alternative is contained."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1524694623, "post_id": 50032047, "comment_id": 87080299, "body": "That&#39;s what makes it preferable to <code>union</code> (it&#39;s essentially a fancy discriminated union)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "edited": false, "score": 0, "creation_date": 1524696478, "post_id": 50032047, "comment_id": 87080812, "body": "@IncreasinglyIdiotic you use <code>std::variant::index()</code> or <code>std::holds_alternative()</code> to know what type is in the <code>variant</code>."}], "tags": [], "owner": {"reputation": 472, "user_id": 4990485, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5853eb83d309719afafb211b70725962?s=128&d=identicon&r=PG&f=1", "display_name": "sv90", "link": "https://stackoverflow.com/users/4990485/sv90"}, "is_accepted": false, "score": 2, "last_activity_date": 1524694216, "creation_date": 1524694216, "answer_id": 50032047, "question_id": 50031943, "link": "https://stackoverflow.com/questions/50031943/decide-return-type-in-function-body/50032047#50032047", "title": "decide return type in function body", "body": "<p>It is not possible to use templates for your problem since template types are resolved during compile time.</p>\n\n<p>The only way i see to make your program work is to use <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\">std::variant</a> if you have c++17 and <a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/variant.html\" rel=\"nofollow noreferrer\">boost::variant</a> otherwise. Then your function would look like</p>\n\n<pre><code>std::variant&lt;int, std::string&gt; foo(int x) {\n    if (x&gt;=3)\n        return x;\n    else\n        return \"less than three\";\n }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1524695508, "post_id": 50032200, "comment_id": 87080502, "body": "You should use <code>std::variant</code> instead of <code>std::tuple</code>."}, {"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524695721, "post_id": 50032200, "comment_id": 87080576, "body": "Added <code>std::variant</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1524695868, "post_id": 50032200, "comment_id": 87080607, "body": "Also, <code>auto [num, err] = foo(3);</code> syntax was added in C++17. In C++11, you have to use <code>std::tie()</code> instead"}], "tags": [], "owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "is_accepted": false, "score": 0, "last_activity_date": 1524696718, "last_edit_date": 1524696718, "creation_date": 1524695258, "answer_id": 50032200, "question_id": 50031943, "link": "https://stackoverflow.com/questions/50031943/decide-return-type-in-function-body/50032200#50032200", "title": "decide return type in function body", "body": "<p>No matter what you have to define something as the return type to your function. However you can make the return type ambiguous through various means, some better than others.</p>\n\n<p>If the function always returns type <code>int</code> unless something goes wrong you can create a wrapper type that contains either a successful result or an error. </p>\n\n<pre><code>Maybe&lt;int&gt; m = foo(3);\nif (m.is_error) {\n    // Stuff\n} else {\n    // Different stuff\n}\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/3157098/\">this answer</a> for more detail</p>\n\n<hr>\n\n<p>If the function always returns one of a few types you can return a <a href=\"http://en.cppreference.com/w/cpp/utility/tuple\" rel=\"nofollow noreferrer\"><code>std::tuple</code></a></p>\n\n<pre><code>std:tuple&lt;int, string&gt; foo(int x) {\n     if (x &gt;= 3) {\n         return std::make_tuple(x, \"\");\n     }\n     return std::make_tuple(0, \"less than three\");\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>auto result = foo(4);\nif (!std::get&lt;1&gt;(result).empty()) {\n    // An error is present\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>// In C++11\nint num;\nstring err;\nstd::tie(num, err) = foo(3);\nif (!err.empty()) { \n    // An error is present \n}\n</code></pre>\n\n<p></p>\n\n<pre><code>// In C++17\nint num;\nstring err;\nauto [num, err] = foo(3);\nif (!err.empty()) { \n    // An error is present \n}\n</code></pre>\n\n<hr>\n\n<p>In C++17 you can (and should) use <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\"><code>std::variant</code></a> instead of a tuple. <a href=\"http://en.cppreference.com/w/cpp/utility/variant/index\" rel=\"nofollow noreferrer\"><code>std::variant:::index()</code></a> or <a href=\"http://en.cppreference.com/w/cpp/utility/variant/holds_alternative\" rel=\"nofollow noreferrer\"><code>std::holds_alternative()</code></a> will tell you which type is held:</p>\n\n<pre><code>std::variant&lt;int, string&gt; foo(int x) {\n    std::variant&lt;int, string&gt; result;\n    if (x &gt;= 3) {\n        result = x;\n    }\n    else {\n        result = \"less than three\";\n    }\n    return result;\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>auto result = foo(3);\nif (result.index() == 1) {\n    // An error is present\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>auto result = foo(3);\nif (std::holds_alternative&lt;std::string&gt;(result)) {\n    // An error is present\n}\n</code></pre>\n\n<hr>\n\n<p>And the <em>technically possible</em> but <strong>extremely terribly stupid idea</strong>, you can always return <code>void*</code> and try and figure things out later:</p>\n\n<pre><code>void* reallyBad(int x) {\n    if (x &gt;= 3) {\n        return new int(x);\n    }\n    return new string(\"Less than three\");\n}\n</code></pre>\n\n<p>I include this only because <em>technically</em> you are deciding the return type in the function body, but it is effectively impossible to deduce the returned type outside of the function, and would likely introduce many memory leaks and hard to debug errors.</p>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 9379842, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AneDlPPq_xc/AAAAAAAAAAI/AAAAAAAAAGY/y4-NHmeaHO8/photo.jpg?sz=128", "display_name": "Hello World", "link": "https://stackoverflow.com/users/9379842/hello-world"}, "is_accepted": false, "score": 1, "last_activity_date": 1524732323, "creation_date": 1524732323, "answer_id": 50038620, "question_id": 50031943, "link": "https://stackoverflow.com/questions/50031943/decide-return-type-in-function-body/50038620#50038620", "title": "decide return type in function body", "body": "<p>You can also make it simple by writing as follows:</p>\n\n<pre><code>int foo(int x){\n    if(x&gt;=3)\n        return x;\n    else\n        return 0; // Or any number less than 3\n}\n</code></pre>\n\n<p>Then go to the caller class, and if the returned value is <code>0</code>, then you can print <code>less than three</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 7910567, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nHdMWS_3mcc/AAAAAAAAAAI/AAAAAAAATZY/AKvmUu6lWYE/photo.jpg?sz=128", "display_name": "Matthew Foran", "link": "https://stackoverflow.com/users/7910567/matthew-foran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1524841576, "creation_date": 1524693587, "last_edit_date": 1524841576, "question_id": 50031943, "link": "https://stackoverflow.com/questions/50031943/decide-return-type-in-function-body", "title": "decide return type in function body", "body": "<p>What I want to do:</p>\n\n<pre><code> foo(int x){\n        if (x&gt;=3)\n            return x;\n        else\n            return \"less than three\";\n }\n</code></pre>\n\n<p>I have looked at using templates, but I'm not sure how to set the return type based on a condition like this.</p>\n\n<p>Edit: I know there are other ways to do this, but I was trying to get it all inside a function. Clearly it's not as easy as I wanted it to be, at least in C++. Thank you for your answers</p>\n"}, {"tags": ["c++", "sfml"], "comments": [{"owner": {"reputation": 2144, "user_id": 9760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixxpj.jpg?s=128&g=1", "display_name": "Daniel Waechter", "link": "https://stackoverflow.com/users/9760/daniel-waechter"}, "edited": false, "score": 0, "creation_date": 1524693544, "post_id": 50031880, "comment_id": 87079972, "body": "I am not an SFML expert, but I do believe this is part of what Views are for. You essentially need to map your shapes into the local coordinate system of some entity, then transform that entity."}, {"owner": {"reputation": 2144, "user_id": 9760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixxpj.jpg?s=128&g=1", "display_name": "Daniel Waechter", "link": "https://stackoverflow.com/users/9760/daniel-waechter"}, "edited": false, "score": 0, "creation_date": 1524693648, "post_id": 50031880, "comment_id": 87079997, "body": "This article may be relevant, which mentions creating a hierarchy of objects: <a href=\"https://www.sfml-dev.org/tutorials/2.0/graphics-transform.php\" rel=\"nofollow noreferrer\">sfml-dev.org/tutorials/2.0/graphics-transform.php</a>"}], "answers": [{"tags": [], "owner": {"reputation": 653, "user_id": 5074998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qVVC3.jpg?s=128&g=1", "display_name": "Rog&#233;rio Dec", "link": "https://stackoverflow.com/users/5074998/rog%c3%a9rio-dec"}, "is_accepted": false, "score": 0, "last_activity_date": 1524700668, "creation_date": 1524700668, "answer_id": 50032897, "question_id": 50031880, "link": "https://stackoverflow.com/questions/50031880/what-is-the-best-way-to-group-objects-in-sfml/50032897#50032897", "title": "What is the best way to group objects in SFML?", "body": "<p>Apparently, for all I've seen, the simplest and most intuitive way is to put the objects inside the view.</p>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;SFML/Graphics.hpp&gt;\n\n#define windowWidth  1000\n#define windowHeight 600\nusing namespace sf;\n\nint main()\n{\n    RenderWindow window(VideoMode(windowWidth, windowHeight), \"SFML Views\");\n\n    View view(FloatRect(0,0, windowWidth, windowHeight)); // container\n    view.zoom(2); // half size to turn transformations visible\n\n    RectangleShape background (Vector2f(windowWidth, windowHeight)); // draw a full rectangle to show the container dimensions\n    background.setFillColor(Color::White);\n\n    RectangleShape r1 (Vector2f(100,100)); // 1st object\n    r1.setFillColor(Color::Red);\n    r1.setPosition(Vector2f(30,10));\n\n\n    RectangleShape r2 (Vector2f(150,200)); // 2nd object\n    r2.setFillColor(Color::Blue);\n    r2.setPosition(Vector2f(120,160));\n\n\n    while (window.isOpen())\n    {\n        Event event;\n        while (window.pollEvent(event))\n        {\n            if (event.type == Event::Closed)\n                window.close();\n        }\n\n        window.clear();\n        window.setView(view);\n        window.draw(background);\n        window.draw(r1);\n        window.draw(r2);\n        view.setRotation(30); // affects all elements\n\n        window.display();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/d13eX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d13eX.jpg\" alt=\"Here is result\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1155, "user_id": 3602094, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/nUMMY.png?s=128&g=1", "display_name": "Montreal", "link": "https://stackoverflow.com/users/3602094/montreal"}, "is_accepted": false, "score": 6, "last_activity_date": 1524744233, "creation_date": 1524744233, "answer_id": 50042528, "question_id": 50031880, "link": "https://stackoverflow.com/questions/50031880/what-is-the-best-way-to-group-objects-in-sfml/50042528#50042528", "title": "What is the best way to group objects in SFML?", "body": "<p>Though approach I am about to propose is not so simple, counter-intuitive in some way, but is much more powerful and every rendering engine uses this in one form or another.\nMost rendering and game engines like <strong>Ogre3d</strong> or <strong>Unreal Engine</strong> (actually, its rendering engine) use such things as <em>Scene Graphs</em> to group objects and relational coordinate systems to draw them and if you want to dig deep into Computer Graphics, you need to get used to these things.</p>\n\n<p>Let's imagine that you want to write a program that will visualize rotations of  Earth and Moon around Sun.\nSuppose, Sun is the center and does not move.\nEarth revolves around Sun and this is quite simple to implement.\nBut there is also Moon which revolves around Earth and its resulting trajectory is quite tricky to calculate and I don't even mention that rotations of the planets are not perfect circles.\nAnd what if we have another pebble that revolves around Moon?\nIt would be a total mess.</p>\n\n<p>The solution humans came up with is to abstract rotation of Moon from the rotation of Sun.\nMoon rotates around Earth, right?\nSo the trick is to bind rigidly Moon's coordinate system with Earth and implement rotation of Moon just like Sun does not exist.\nAnother trick is to bind rigidly Earth's coordinate system with Sun and implement rotation of Earth just like Moon and other Universe does not exist.\nAs you can see, there is clear hierarchy of objects: Sun->Earth->Moon.\nIn terms of Computer Graphics, Sun is <em>parent</em> object for Earth and Earth is <em>child</em> object for Sun.\nSo is with Earth and Moon: Earth is <em>parent</em> object for Moon and Moon is <em>child</em> object for Earth.\nThe whole system is called <em>Scene Graph</em>.</p>\n\n<p>Unfortunately for us, unlike rendering engines, <strong>SFML</strong> does not provide ready-to-use classes for scene graph, but it provides us tools to implement it.\nHere is my implementation:</p>\n\n<pre><code>//SceneNode.h\nclass SceneNode :\n    public sf::Transformable,\n    public sf::Drawable,\n    private sf::NonCopyable {\npublic:\n    typedef std::unique_ptr&lt;SceneNode&gt;          Ptr;\n    typedef std::pair&lt;SceneNode*, SceneNode*&gt;   Pair;\n\n    explicit                SceneNode();\n\n    void                    AttachChild( Ptr child );\n    Ptr                     DetachChild( const SceneNode&amp; node );\n\nprivate:\n    virtual void        draw(\n        sf::RenderTarget&amp; target,\n        sf::RenderStates states\n    ) const;\n    virtual void        DrawCurrent(\n        sf::RenderTarget&amp; target,\n        sf::RenderStates states\n    ) const;\n    void                DrawChildren(\n        sf::RenderTarget&amp; target,\n        sf::RenderStates states\n    ) const;\n\n    std::vector&lt;Ptr&gt;    mChildren;\n    SceneNode*          mParent;\n};\n\n//SceneNode.cpp\nSceneNode::SceneNode( Category::Type category ) :\nmChildren(),\nmParent( nullptr ) {}\n\nvoid\nSceneNode::AttachChild( Ptr child ) {\n    child-&gt;mParent = this;\n    mChildren.push_back( std::move( child ) );\n}\n\nSceneNode::Ptr\nSceneNode::DetachChild( const SceneNode&amp; node ) {\n    auto found = std::find_if(\n        mChildren.begin(),\n        mChildren.end(),\n        [&amp;] ( Ptr&amp; p ) { return p.get() == &amp;node; }\n    );\n    assert( found != mChildren.end() );\n\n    Ptr result      = std::move( *found );\n    result-&gt;mParent = nullptr;\n    mChildren.erase( found );\n    return result;\n}\n\nvoid\nSceneNode::draw( sf::RenderTarget&amp; target, sf::RenderStates states ) const {\n    states.transform *= getTransform();\n\n    DrawCurrent( target, states );\n    DrawChildren( target, states );\n}\n\nvoid\nSceneNode::DrawCurrent(\n    sf::RenderTarget&amp; target,\n    sf::RenderStates states\n) const {}\n\nvoid\nSceneNode::DrawChildren(\n    sf::RenderTarget&amp; target,\n    sf::RenderStates states\n) const {\n    for ( const Ptr&amp; child : mChildren ) {\n        child-&gt;draw( target, states );\n    }\n}\n</code></pre>\n\n<p>Any <code>SceneNode</code> can be drawn as simple as a rectangle, but after drawing itself, <code>SceneNode</code> would draw all its child nodes, if you don't forget to implement <code>SceneNode::DrawCurrent</code> method.</p>\n"}], "owner": {"reputation": 653, "user_id": 5074998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qVVC3.jpg?s=128&g=1", "display_name": "Rog&#233;rio Dec", "link": "https://stackoverflow.com/users/5074998/rog%c3%a9rio-dec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1524744233, "creation_date": 1524693136, "question_id": 50031880, "link": "https://stackoverflow.com/questions/50031880/what-is-the-best-way-to-group-objects-in-sfml", "title": "What is the best way to group objects in SFML?", "body": "<p>If I have for example 3 different shapes in SFML, and I want to rotate them all relative to a single center, as if these 3 shapes were inside a square, what would be the best way? \nWould it be leaving them inside a view and rotating the view? \nOr is there some more practical way?</p>\n"}, {"tags": ["c++", "unit-testing", "encryption", "terminal", "openssl"], "comments": [{"owner": {"reputation": 1804, "user_id": 754147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQkUn.jpg?s=128&g=1", "display_name": "prmottajr", "link": "https://stackoverflow.com/users/754147/prmottajr"}, "edited": false, "score": 0, "creation_date": 1524693332, "post_id": 50031863, "comment_id": 87079892, "body": "Could you post the results you are getting?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 1, "creation_date": 1524693400, "post_id": 50031863, "comment_id": 87079917, "body": "Even with the same IV, padding bytes should be random, so the encrypted data will be different."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 1804, "user_id": 754147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQkUn.jpg?s=128&g=1", "display_name": "prmottajr", "link": "https://stackoverflow.com/users/754147/prmottajr"}, "edited": false, "score": 0, "creation_date": 1524693460, "post_id": 50031863, "comment_id": 87079934, "body": "@prmottajr Done."}, {"owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524693486, "post_id": 50031863, "comment_id": 87079943, "body": "@RichardCritten The result is 100% deterministic. The only nondeterministic thing was the salt, which I removed. Repeating doesn&#39;t change anything."}], "answers": [{"tags": [], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "is_accepted": true, "score": 3, "last_activity_date": 1524740638, "creation_date": 1524740638, "answer_id": 50041342, "question_id": 50031863, "link": "https://stackoverflow.com/questions/50031863/how-can-i-create-openssl-output-that-compares-to-openssl-c-output-to-generate/50041342#50041342", "title": "How can I create OpenSSL output that compares to OpenSSL C++ output to generate unit tests?", "body": "<p>I figured it out. The problem was that I'm using the wrong command line parameter. It should be <code>-K</code> for the key, not <code>-k</code>. This is the correct format:</p>\n\n<pre><code>printf '%s' '48656c6c6f20776f726c6421' | xxd -r -ps | openssl aes-256-cbc -iv 00000000000000000000000000000000 -K 0000000000000000000000000000000000000000000000000000000000000000 -nosalt | xxd -ps\n</code></pre>\n\n<p>and this gives the exact same result as OpenSSL in C++.</p>\n"}], "owner": {"reputation": 20880, "user_id": 1317944, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OcBMY.png?s=128&g=1", "display_name": "The Quantum Physicist", "link": "https://stackoverflow.com/users/1317944/the-quantum-physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 50041342, "answer_count": 1, "score": 3, "last_activity_date": 1524742295, "creation_date": 1524693047, "last_edit_date": 1524742295, "question_id": 50031863, "link": "https://stackoverflow.com/questions/50031863/how-can-i-create-openssl-output-that-compares-to-openssl-c-output-to-generate", "title": "How can I create OpenSSL output that compares to OpenSSL C++ output to generate unit tests?", "body": "<p>I'm using a C++ wrapper for OpenSSL's AES-256-CBC encryption that follows the recipe from <a href=\"https://wiki.openssl.org/index.php/EVP_Symmetric_Encryption_and_Decryption\" rel=\"nofollow noreferrer\">OpenSSL docs</a>. It's meant to take some data to encrypt, a key and an initialization vector, and return encrypted bytes. </p>\n\n<p>Now on the relative sense, encryption and decryption works fine. I can encrypt anything and decrypt it and retrieve the original data. However, I'd like to test it <em>in the absolute sense</em>. So, I'm using OpenSSL in command line/terminal to create encrypted data, and then inject it in my tests. But the outputs are not matching, and I'm not sure where to start or how to systematically tackle this.</p>\n\n<p>To produce the hex data:</p>\n\n<pre><code>printf '%s' 'Hello world!' | xxd -ps\n</code></pre>\n\n<p>which returns <code>48656c6c6f20776f726c6421</code>.</p>\n\n<p>Then, to encrypt it with OpenSSL:</p>\n\n<pre><code>printf '%s' '48656c6c6f20776f726c6421' | xxd -r -ps | openssl aes-256-cbc -iv 00000000000000000000000000000000 -k 0000000000000000000000000000000000000000000000000000000000000000 -nosalt | xxd -ps\n</code></pre>\n\n<p>which gives <code>f1b486ded0fd22dad9dbdab2205f61c2</code>.</p>\n\n<p><code>xxd -r</code> converts hex to bytes, and <code>xxd</code> does the opposite. I tried also with plain <code>Hello world!</code> without <code>xxd</code> in the beginning, but also is wrong. The result always doesn't match what I get in the C++ OpenSSL code. What am I missing here?</p>\n\n<p>Find a <a href=\"http://coliru.stacked-crooked.com/a/7648d8897d0771c3\" rel=\"nofollow noreferrer\">minimal, verifiable, complete example here</a> of my code that demonstrates the result.</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1524692176, "post_id": 50031644, "comment_id": 87079481, "body": "This is what a debugger is meant for"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 1, "creation_date": 1524692248, "post_id": 50031644, "comment_id": 87079503, "body": "The output you show does not belong to the program you show. (loop for 4 items and your output shows 8 items)."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 3, "creation_date": 1524692273, "post_id": 50031644, "comment_id": 87079517, "body": "You may want to remove this: <code>cout.precision(2)</code>"}, {"owner": {"reputation": 2170, "user_id": 1468396, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/661048e0b989e9443664a029d318ccbd?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1468396/matt"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1524692293, "post_id": 50031644, "comment_id": 87079524, "body": "@BitTickler yes I changed the number of loops later, but the values were still off."}, {"owner": {"reputation": 4966, "user_id": 3605497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mV6Nc.jpg?s=128&g=1", "display_name": "Tripp Kinetics", "link": "https://stackoverflow.com/users/3605497/tripp-kinetics"}, "edited": false, "score": 0, "creation_date": 1524692413, "post_id": 50031644, "comment_id": 87079574, "body": "What do the individual arrays contain?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 4, "creation_date": 1524692482, "post_id": 50031644, "comment_id": 87079607, "body": "I think you meant to use the manipulator <a href=\"http://en.cppreference.com/w/cpp/io/manip/setprecision\" rel=\"nofollow noreferrer\"><code>setprecision(2)</code></a> instead of calling the function <a href=\"http://en.cppreference.com/w/cpp/io/ios_base/precision\" rel=\"nofollow noreferrer\"><code>cout.precision(2)</code></a>. The results are correct except for a <code>6</code> (the first time) or <code>2</code> (the return value of <code>cout.precision(2)</code>) prepended."}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 1, "creation_date": 1524692564, "post_id": 50031644, "comment_id": 87079640, "body": "With a simple debugging session you can verify if the values in your array make sense. If they do, the problem is in the <code>cout &lt;&lt; ...</code> line. IOstream is not as intuitive as people try to make believe, once you start to use those stateful format modifiers like <code>fixed</code> and <code>precision</code>. I never bothered to use them A simple <code>printf()</code> is much more intuitive to me."}, {"owner": {"reputation": 2170, "user_id": 1468396, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/661048e0b989e9443664a029d318ccbd?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1468396/matt"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1524692623, "post_id": 50031644, "comment_id": 87079656, "body": "@FredLarson But what about the first result (<code>$63.98</code>)?"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 1, "creation_date": 1524692649, "post_id": 50031644, "comment_id": 87079664, "body": "Oh, the first time the return value was 6 (the default precision). Every time after that, you had already set it to 2 so it returned that."}], "answers": [{"comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1524692892, "post_id": 50031796, "comment_id": 87079744, "body": "An alternative would be to just call <code>cout.precision(2);</code> by itself (not using a stream insertion) once before doing the output."}, {"owner": {"reputation": 2170, "user_id": 1468396, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/661048e0b989e9443664a029d318ccbd?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1468396/matt"}, "edited": false, "score": 0, "creation_date": 1524693018, "post_id": 50031796, "comment_id": 87079794, "body": "This doesn&#39;t compile in Xcode. I get <code>Use of undeclared identifier &quot;setprecision&quot;</code>."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1524695178, "post_id": 50031796, "comment_id": 87080425, "body": "@FredLarson yes, that works, too. I added it to my answer."}, {"owner": {"reputation": 2170, "user_id": 1468396, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/661048e0b989e9443664a029d318ccbd?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1468396/matt"}, "edited": false, "score": 0, "creation_date": 1524695404, "post_id": 50031796, "comment_id": 87080475, "body": "@RemyLebeau Great answer, really explained things to me."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 5, "last_activity_date": 1524694933, "last_edit_date": 1524694933, "creation_date": 1524692719, "answer_id": 50031796, "question_id": 50031644, "link": "https://stackoverflow.com/questions/50031644/multiplying-elements-in-array-not-working-in-c/50031796#50031796", "title": "Multiplying elements in array not working in c++?", "body": "<p>The problem is that you are outputting the return value of <a href=\"http://en.cppreference.com/w/cpp/io/manip/setprecision\" rel=\"nofollow noreferrer\"><code>cout.precision(2)</code></a> (which returns the previous precision, in this case <code>6</code> initially and then <code>2</code> afterwards) in front of each total price.</p>\n\n<p>You need to either:</p>\n\n<ul>\n<li><p>not pass the return value of <code>cout.precision()</code> to <code>operator&lt;&lt;</code>:</p>\n\n<pre><code>cout &lt;&lt; \"$\" &lt;&lt; fixed;\ncout.precision(2);\ncout &lt;&lt; tot[i] &lt;&lt; ...\n</code></pre>\n\n<p>or, call <code>precision()</code> one time before entering the loop:</p>\n\n<pre><code>cout.precision(2);\nfor (int i = 0; i &lt; 4; i++) {\n    cout &lt;&lt; \"$\" &lt;&lt; fixed &lt;&lt; tot[i] &lt;&lt; \"\\t\\t$\" &lt;&lt; price[i] &lt;&lt; \"\\t\\t\" &lt;&lt; amt[i] &lt;&lt; endl;\n}\n</code></pre></li>\n<li><p>use the <a href=\"http://en.cppreference.com/w/cpp/io/manip/setprecision\" rel=\"nofollow noreferrer\"><code>std::setprecision()</code></a> stream manipulator instead of calling <code>cout.precision()</code> directly:</p>\n\n<pre><code>#include &lt;iomanip&gt;\n\nfor (int i = 0; i &lt; 4; i++) {\n    cout &lt;&lt; \"$\" &lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; tot[i] &lt;&lt; \"\\t\\t$\" &lt;&lt; price[i] &lt;&lt; \"\\t\\t\" &lt;&lt; amt[i] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>#include &lt;iomanip&gt;\n\ncout &lt;&lt; setprecision(2);\nfor (int i = 0; i &lt; 4; i++) {\n    cout &lt;&lt; \"$\" &lt;&lt; fixed &lt;&lt; tot[i] &lt;&lt; \"\\t\\t$\" &lt;&lt; price[i] &lt;&lt; \"\\t\\t\" &lt;&lt; amt[i] &lt;&lt; endl;\n}\n</code></pre></li>\n</ul>\n\n<hr>\n\n<p>On a side note, you should not use <code>\\t</code> characters to control the formatting of your table.  Use stream manipulators like <code>std::setw()</code>, <code>std::left</code>, etc instead:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;cstdlib&gt;    \nusing namespace std;\n\nconst int maxItems = 4;\n\nstring moneyStr(float amount)\n{\n    ostringstream oss;\n\n    // in C++11 and later, you can replace this with std::put_money() instead:\n    // http://en.cppreference.com/w/cpp/io/manip/put_money\n    //\n    // oss &lt;&lt; showbase &lt;&lt; put_money(amount);\n    oss &lt;&lt; \"$\" &lt;&lt; fixed &lt;&lt; setprecision(2) &lt;&lt; amount;\n\n    return oss.str();\n}\n\nint main(int argc, _TCHAR* argv[])\n{\n    float price[maxItems], tot[maxItems];\n    int amt[maxItems];\n    int cnt = 0;\n\n    cout &lt;&lt; \"Please enter the price and amount of \" &lt;&lt; maxItems &lt;&lt; \" items:\" &lt;&lt; endl;\n    for (int i = 0; i &lt; maxItems; ++i)\n    {\n        cout &lt;&lt; \"Price of item \" &lt;&lt; i + 1 &lt;&lt; \": \";\n        cin &gt;&gt; price[i];\n        cout &lt;&lt; \"Amount of item \" &lt;&lt; i + 1 &lt;&lt; \": \";\n        cin &gt;&gt; amt[i];\n        if (price[i] &lt;= 0 || amt[i] &lt;= 0) {\n            cout &lt;&lt; \"Invalid Input Entry!\" &lt;&lt; endl;\n            break;\n        }\n        tot[i] = price[i] * amt[i];\n        ++cnt;\n    }\n\n    cout &lt;&lt; left &lt;&lt; setfill(' ');\n    cout &lt;&lt; setw(16) &lt;&lt; \"Total\" &lt;&lt; setw(16) &lt;&lt; \"Price\" &lt;&lt; setw(16) &lt;&lt; \"Amount\" &lt;&lt; endl;\n    cout &lt;&lt; setw(16) &lt;&lt; \"-----\" &lt;&lt; setw(16) &lt;&lt; \"-----\" &lt;&lt; setw(16) &lt;&lt; \"------\" &lt;&lt; endl;\n    for (int i = 0; i &lt; cnt; i++) {\n        cout &lt;&lt; setw(16) &lt;&lt; moneyStr(tot[i]) &lt;&lt; setw(16) &lt;&lt; moneyStr(price[i]) &lt;&lt; setw(16) &lt;&lt; amt[i] &lt;&lt; endl;\n    }\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/494kbL\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}], "owner": {"reputation": 2170, "user_id": 1468396, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/661048e0b989e9443664a029d318ccbd?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1468396/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 50031796, "answer_count": 1, "score": 0, "last_activity_date": 1524694933, "creation_date": 1524691856, "question_id": 50031644, "link": "https://stackoverflow.com/questions/50031644/multiplying-elements-in-array-not-working-in-c", "title": "Multiplying elements in array not working in c++?", "body": "<p>I am trying to make a simple program in c++ that takes the price and number of items purchases, stores it in arrays, and then outputs the totals for each item in a tabular format. However, when I multiply the numbers in my code, I get totally strange answers! Can someone please enlighten me as to what's going on?</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(int argc, _TCHAR* argv[]) {\n    float price[4], tot[4];\n    int amt[4];\n    cout &lt;&lt; \"Please enter the price and amount of 4 items:\\n\";\n    for (int i = 0; i&lt;4; i++) {\n        cout &lt;&lt; \"Price of item \" &lt;&lt; i + 1 &lt;&lt; \": \";\n        cin &gt;&gt; price[i];\n        cout &lt;&lt; \"Amount of item \" &lt;&lt; i + 1 &lt;&lt; \": \";\n        cin &gt;&gt; amt[i];\n        if (price[i] &lt;= 0 || amt[i] &lt;= 0) {\n            cout &lt;&lt; \"Invalid Input Entry!\\n\";\n            break;\n        }\n        tot[i] = price[i] * amt[i]; // I can't really see how I could have messed this up...\n    }\n    cout &lt;&lt; \"Total\\t\\tPrice\\t\\tAmount\\n\";\n    cout &lt;&lt; \"-----\\t\\t-----\\t\\t------\\n\";\n    for (int i = 0; i &lt; 4; i++) {\n        cout &lt;&lt; \"$\" &lt;&lt; fixed &lt;&lt; cout.precision(2) &lt;&lt; tot[i] &lt;&lt; \"\\t\\t$\" &lt;&lt; price[i] &lt;&lt; \"\\t\\t\" &lt;&lt; amt[i] &lt;&lt; endl;\n    }\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/d3Ecn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d3Ecn.png\" alt=\"program output\"></a></p>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 2, "creation_date": 1524691188, "post_id": 50031491, "comment_id": 87079087, "body": "The answer is in what you think <code>detectionMethods-&gt;</code> is doing. Note that <code>detectionMethods</code> is not a pointer, so ask yourself what semantic <code>-&gt;</code> might have on it."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 2, "creation_date": 1524691189, "post_id": 50031491, "comment_id": 87079088, "body": "Arrays don&#39;t have a <code>size()</code> or <code>length()</code> function on them."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 2, "creation_date": 1524691514, "post_id": 50031491, "comment_id": 87079231, "body": "<a href=\"http://idownvotedbecau.se/imageofcode\" rel=\"nofollow noreferrer\">idownvotedbecau.se/imageofcode</a> - please don&#39;t do that. Code is text, and you have a text entry box. That&#39;s where the code belongs."}, {"owner": {"reputation": 95188, "user_id": 440119, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5ec9ca2a92a94a5470396073129d79e7?s=128&d=identicon&r=PG", "display_name": "Benjamin Lindley", "link": "https://stackoverflow.com/users/440119/benjamin-lindley"}, "reply_to_user": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 4, "creation_date": 1524691854, "post_id": 50031491, "comment_id": 87079353, "body": "@Useless: You&#39;ll notice that he did include the code as text. So you&#39;re downvoting because he provided extra information, in the form of an image (displaying information provided by the debugger)."}, {"owner": {"reputation": 629, "user_id": 7375877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ebd55229168e7e58684bdaa28d556d1?s=128&d=identicon&r=PG&f=1", "display_name": "Mi Po", "link": "https://stackoverflow.com/users/7375877/mi-po"}, "edited": false, "score": 0, "creation_date": 1524696137, "post_id": 50031491, "comment_id": 87080680, "body": "Makes me laugh at how stackoverflow elitists use their time, probably at work not doing what they are paid to do :)"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1524745594, "post_id": 50031491, "comment_id": 87101832, "body": "Change the definition of <code>detectionMethods</code> to <code>std::array&lt;std::string, 3&gt; detectionMethods = { &quot;SQUARE&quot;, &quot;CIRCLE&quot;, &quot;CIRCLE-SSV&quot; };</code>. C-style arrays can be very confusing."}], "answers": [{"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 2, "last_activity_date": 1524691306, "creation_date": 1524691306, "answer_id": 50031547, "question_id": 50031491, "link": "https://stackoverflow.com/questions/50031491/why-is-size-function-of-stdstring-array-returning-an-incorrect-number-of-p/50031547#50031547", "title": "Why is size() function of std::string[] array returning an incorrect number of parameters", "body": "<p>There's no such thing as a member function of a raw array.</p>\n\n<hr>\n\n<p>The sub-expression <code>detectionMethods</code> refers to the raw array and decays to a pointer to the first item. The rest, <code>-&gt;length()</code>, calls a member function of the first item.</p>\n\n<hr>\n\n<p>One easy way to avoid these problems is to use <strong><code>std::vector</code></strong> instead of a raw array. Your book should be recommending that.</p>\n"}, {"tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1524691616, "creation_date": 1524691616, "answer_id": 50031604, "question_id": 50031491, "link": "https://stackoverflow.com/questions/50031491/why-is-size-function-of-stdstring-array-returning-an-incorrect-number-of-p/50031604#50031604", "title": "Why is size() function of std::string[] array returning an incorrect number of parameters", "body": "<p>The size of the first string is been returned.</p>\n\n<p>The reason is that a variable which is an array, decays to a pointer to the first element.</p>\n\n<p>So calling <code>detectionMethods-&gt;length()</code> is the same as calling <code>detectionMethods[0].length()</code></p>\n"}], "owner": {"reputation": 629, "user_id": 7375877, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ebd55229168e7e58684bdaa28d556d1?s=128&d=identicon&r=PG&f=1", "display_name": "Mi Po", "link": "https://stackoverflow.com/users/7375877/mi-po"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1524726224, "accepted_answer_id": 50031547, "answer_count": 2, "score": -6, "last_activity_date": 1524691616, "creation_date": 1524691096, "question_id": 50031491, "link": "https://stackoverflow.com/questions/50031491/why-is-size-function-of-stdstring-array-returning-an-incorrect-number-of-p", "closed_reason": "Not suitable for this site", "title": "Why is size() function of std::string[] array returning an incorrect number of parameters", "body": "<p>This is a simple 2 line question that I just don't understand. </p>\n\n<p>I just created an array with 3 members, and immediately afterwards, the size is reported as 6. It was working before, but all of sudden changed. I tried cleaning my project.</p>\n\n<p>This is using Visual Studio 2015</p>\n\n<pre><code>std::string detectionMethods[3] = { \"SQUARE\", \"CIRCLE\", \"CIRCLE-SSV\" };\nint k_size = detectionMethods-&gt;length();\n</code></pre>\n\n<p>Thanks,</p>\n\n<p><a href=\"https://i.stack.imgur.com/iZcM6.jpg\" rel=\"nofollow noreferrer\">Source code and debug screenshot</a></p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "edited": false, "score": 7, "creation_date": 1524691013, "post_id": 50031447, "comment_id": 87079013, "body": "Because the method is in the class and thus has access to all of it&#39;s members?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 1, "creation_date": 1524691438, "post_id": 50031447, "comment_id": 87079190, "body": "Out of curiosity, if you didn&#39;t know member functions can access private members, how did you want to use those private members?"}], "answers": [{"tags": [], "owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "is_accepted": false, "score": 4, "last_activity_date": 1524691246, "creation_date": 1524691246, "answer_id": 50031530, "question_id": 50031447, "link": "https://stackoverflow.com/questions/50031447/c-class-private-variables/50031530#50031530", "title": "C++ , class private variables", "body": "<p>Let's visit cppreference to review what <code>private</code> does.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/language/access\" rel=\"noreferrer\">http://en.cppreference.com/w/cpp/language/access</a></p>\n\n<blockquote>\n  <p>A private member of a class can only be accessed by the members and friends of that class, <strong>regardless of whether the members are on the same or different instances</strong></p>\n</blockquote>\n\n<p>You are able to access private members of <code>account</code> because you are doing it from a member function of <code>account</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5957, "user_id": 997196, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/E5hdR.png?s=128&g=1", "display_name": "Rivasa", "link": "https://stackoverflow.com/users/997196/rivasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1524691259, "creation_date": 1524691259, "answer_id": 50031536, "question_id": 50031447, "link": "https://stackoverflow.com/questions/50031447/c-class-private-variables/50031536#50031536", "title": "C++ , class private variables", "body": "<p>It can access because the method is in the class and thus has access to all of it's members. Private/protected/public apply to methods outside of the class.</p>\n"}], "owner": {"reputation": 31, "user_id": 9261903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c71c70557a39cebe850e5be6e812725?s=128&d=identicon&r=PG&f=1", "display_name": "Mitaka", "link": "https://stackoverflow.com/users/9261903/mitaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1524691259, "creation_date": 1524690875, "last_edit_date": 1524691078, "question_id": 50031447, "link": "https://stackoverflow.com/questions/50031447/c-class-private-variables", "title": "C++ , class private variables", "body": "<p>Considering the following class :    </p>\n\n<pre><code>class account   \n{\n\n    char name[30];\n    char  fam[30];\n    int fr_count;\n    bool fl_dost;\n    account *friends[10];\npublic: \n\n    account();\n    account(char *n, char* f);\n    int add_fr(account *fr);\n}\n\n\nint main()\n{\n\n    account ob1(\"Ivan\", \"Petrov\"), ob2(\"Gosho\",\"Gosho\"), ob3(\"fa\",\"za\"), ob4(\"Gosho\",\"Gosho\");\n    ob1.add_fr(&amp;ob2);\n    ob1.add_fr(&amp;ob3);\n    ob1.add_fr(&amp;ob4);\n\n    getchar();\n    return 0;\n\n}\n</code></pre>\n\n<p>And the method :</p>\n\n<pre><code>int account::add_fr(account *fr)\n\n{   \n\n    int flag = 0;\n    if (fr_count &gt;= 100) \n    {\n        cout &lt;&lt; \"Full\" &lt;&lt; endl;\n        return 0;\n    }\n\n    for (int i = 0; i &lt; fr_count; i++)\n    {\n        if (!strcmp(friends[i]-&gt;name, fr-&gt;name) &amp;&amp; !strcmp(friends[i]-&gt;fam, fr-&gt;fam))\n        {\n            flag = 1;\n        }\n    }\n\n    if (flag)\n    {\n        cout &lt;&lt; \"Exist\" &lt;&lt; endl;\n        return 0;\n    }\n\n    friends[fr_count] = fr;\n    fr_count++;\n\n    return 1;\n}\n</code></pre>\n\n<p>My questions is : Why i am able to access the private members <code>friends[i]-&gt;name</code> and <code>friends[i]-&gt;fam</code>   in the method <code>add::fr(account *fr)</code>?</p>\n"}, {"tags": ["c++", "templates", "shared-ptr", "unordered-map", "multimap"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524690702, "post_id": 50031370, "comment_id": 87078876, "body": "Is this your real code?  The compiler should be pointing out that you&#39;re missing semicolons.  And you haven&#39;t defined <code>B_Type</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1524690929, "post_id": 50031370, "comment_id": 87078977, "body": "Templates are resolved entirely at compile time, they can&#39;t be dependent on anything that is determined at runtime."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1524691328, "post_id": 50031370, "comment_id": 87079151, "body": "An intended use case could be useful."}, {"owner": {"reputation": 2144, "user_id": 9760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixxpj.jpg?s=128&g=1", "display_name": "Daniel Waechter", "link": "https://stackoverflow.com/users/9760/daniel-waechter"}, "edited": false, "score": 0, "creation_date": 1524691690, "post_id": 50031370, "comment_id": 87079294, "body": "You are likely structuring this wrong if you want to store iterators to other maps. If you&#39;re hell-bent, though, you could use a type that can represent both iterators at runtime, like <a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\">std::variant</a>."}, {"owner": {"reputation": 2144, "user_id": 9760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixxpj.jpg?s=128&g=1", "display_name": "Daniel Waechter", "link": "https://stackoverflow.com/users/9760/daniel-waechter"}, "edited": false, "score": 0, "creation_date": 1524691909, "post_id": 50031370, "comment_id": 87079380, "body": "Eg: <a href=\"https://godbolt.org/g/a4PhLf\" rel=\"nofollow noreferrer\">godbolt.org/g/a4PhLf</a>"}, {"owner": {"reputation": 2144, "user_id": 9760, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ixxpj.jpg?s=128&g=1", "display_name": "Daniel Waechter", "link": "https://stackoverflow.com/users/9760/daniel-waechter"}, "edited": false, "score": 0, "creation_date": 1524692438, "post_id": 50031370, "comment_id": 87079583, "body": "std::iterator might work too: <a href=\"https://godbolt.org/g/oZdPZZ\" rel=\"nofollow noreferrer\">godbolt.org/g/oZdPZZ</a>"}, {"owner": {"reputation": 43, "user_id": 5377127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21d9f63778b2e20abdb7c803b4c57d1?s=128&d=identicon&r=PG&f=1", "display_name": "gatherer", "link": "https://stackoverflow.com/users/5377127/gatherer"}, "edited": false, "score": 0, "creation_date": 1524694240, "post_id": 50031370, "comment_id": 87080174, "body": "Thanks Daniel! I agree, l\u2019m likely structuring it wrong. However, I\u2019m still learning c++ and this seemed to be a good case to test some of my own limits as a coder as well as gain deeper understanding of the tools available to me. The example code you linked to brings a lot into focus."}], "owner": {"reputation": 43, "user_id": 5377127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21d9f63778b2e20abdb7c803b4c57d1?s=128&d=identicon&r=PG&f=1", "display_name": "gatherer", "link": "https://stackoverflow.com/users/5377127/gatherer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524690481, "creation_date": 1524690481, "question_id": 50031370, "link": "https://stackoverflow.com/questions/50031370/declaring-member-variable-and-type-at-runtime", "title": "Declaring member variable and type at runtime", "body": "<p>The following is in reference to a question I asked yesterday that got a great response but which brought up a whole new problem / misunderstanding for me. To see the previous post see <a href=\"https://stackoverflow.com/questions/50006137/constructing-templated-containers-that-are-themselves-shared-ptr-types\">constructing templated containers that are themselves shared_ptr types</a>.</p>\n\n<p>Here is the reference code:</p>\n\n<pre><code>template &lt;class T&gt;\nstruct A {\n    int id;\n    T x;\n}\n\ntemplate&lt;typename T&gt;\nusing A_ptr = std::shared_ptr&lt;A&lt;T&gt;&gt;;\n\ntemplate&lt;typename T&gt;\nusing AMap = std::unordered_map&lt;int , A_ptr&lt;T&gt;&gt;;\n</code></pre>\n\n<p>This works great, but the the problem I found it that it doesn't actually solve my problem. </p>\n\n<p>I have a class with 3 members. The first 2 are each a multimap, but one is sorted in descending order while the other is sorted in ascending order. I also have an unordered map which stores struct A as values. In the case of the A struct, T x ends up being an iterator to one or the other multimaps. I don't know which until runtime. If I structure my code as follows, it won't compile.</p>\n\n<pre><code>typedef std::shared_ptr&lt;B_Type&gt; B_Type_ptr;\n\ntemplate &lt;class T&gt;\nstruct A {\n    B_Type_ptr b_ptr;\n    T x;\n}\n\ntemplate&lt;typename T&gt;\nusing A_ptr = std::shared_ptr&lt;A&lt;T&gt;&gt;;\n\ntemplate&lt;typename T&gt;\nusing AMap = std::unordered_map&lt;int , A_ptr&lt;T&gt;&gt;;\n\nclass MyClass {\nprivate:\n    AMap my_A_map;\n    std::multimap&lt;int, B_Type_ptr&gt; my_C_1_map;\n    std::multimap&lt;int, B_Type_ptr, greater&lt;int&gt;&gt; my_C_2_map;\n\n}\n</code></pre>\n\n<p>Essentially, I need to require AMap hold a series of A's each of which has x members that are either an ascending type or descending type iterator which will be known at runtime. As I understand, templates are compile time constructs, so how do I get around this without having to resort to A storing information for both an ascending or descending iterator?</p>\n\n<p>Please let me know if the information I have provided is insufficient to solve the problem. I have tried to balance what's necessary to what's overkill. Thanks.</p>\n"}, {"tags": ["c++", "class", "nested", "member"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6220950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b090ded4cb126b8fa4c003a7a3a69f?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6220950/mike"}, "edited": false, "score": 0, "creation_date": 1524728839, "post_id": 50032182, "comment_id": 87091164, "body": "Ok. So, is it better practice to ditch the aim of implementing dot notation for readability and adding complexity of using references (as per the workaround)? Versus having many functions on one-level with verbose names and not needing to use references?"}, {"owner": {"reputation": 239, "user_id": 7992350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-frPcqVfynQ0/AAAAAAAAAAI/AAAAAAAAADU/N4rOweHtv_8/photo.jpg?sz=128", "display_name": "narek Bojikian", "link": "https://stackoverflow.com/users/7992350/narek-bojikian"}, "reply_to_user": {"reputation": 43, "user_id": 6220950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b090ded4cb126b8fa4c003a7a3a69f?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6220950/mike"}, "edited": false, "score": 0, "creation_date": 1524814437, "post_id": 50032182, "comment_id": 87131392, "body": "I&#39;d rather go for the &quot;workaround&quot;, I would even go for making an abstract independent class for &#39;system_r&#39; and a concrete derived class of it so that it&#39;d be easier to test and extend your class <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Dependency_injection</a>"}], "tags": [], "owner": {"reputation": 239, "user_id": 7992350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-frPcqVfynQ0/AAAAAAAAAAI/AAAAAAAAADU/N4rOweHtv_8/photo.jpg?sz=128", "display_name": "narek Bojikian", "link": "https://stackoverflow.com/users/7992350/narek-bojikian"}, "is_accepted": false, "score": 1, "last_activity_date": 1524695123, "creation_date": 1524695123, "answer_id": 50032182, "question_id": 50031362, "link": "https://stackoverflow.com/questions/50031362/invalid-use-of-non-static-data-member-when-nested-class-function-is-used-but-ok/50032182#50032182", "title": "Invalid use of non-static data member when nested class function is used, but OK when the function is not-nested?", "body": "<p>You may have misunderstood what a nested class is.<br>\nA nested class is an independent class with special access privileges. That means defining an instance of <code>system_r</code> will not be related anyway to <code>ChargerClass</code>, hence it won't know what <code>interface</code> or <code>registerTable</code> you're talking about.<br>\nI would consider <a href=\"https://stackoverflow.com/a/3058343/7992350\">this</a> as a workaround for your problem.</p>\n"}], "owner": {"reputation": 43, "user_id": 6220950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39b090ded4cb126b8fa4c003a7a3a69f?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/6220950/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1594067284, "creation_date": 1524690458, "last_edit_date": 1594067284, "question_id": 50031362, "link": "https://stackoverflow.com/questions/50031362/invalid-use-of-non-static-data-member-when-nested-class-function-is-used-but-ok", "title": "Invalid use of non-static data member when nested class function is used, but OK when the function is not-nested?", "body": "<p>I am trying to manipulate 'registerTable' with 'ChargerClass::SystemStruct::initNested()', with a function from an object passed in during initialisation 'interface'.</p>\n\n<p>The reason I want to nest is to enable the use of dot notation to use the Class members; there will be a lot of functions in this class and dot notation will make clear what part of the class is being utilised.</p>\n\n<p>'chargerHAL_r hal' must be passed in as it is an abstraction layer object to allow for multiple communication protocols to be used with the ChargerClass.</p>\n\n<p>If initNested() is within 'SystemStruct', I get compiler errors:</p>\n\n<ul>\n<li>invalid use of non-static data member 'ChargerClass::interface'</li>\n<li>invalid use of non-static data member 'ChargerClass::registerTable'</li>\n</ul>\n\n<p>However, if initNOTNested() is in the parent class ChargerClass and not nested in SystemStruct. it compiles just fine.</p>\n\n<p>I have included comments in the code snippet for both initNested() and initNOTNested();</p>\n\n<p>I am using C++11, and since this version, nested-class access to enclosing-class members is valid, no?</p>\n\n<p>What am I missing?</p>\n\n<pre><code>struct chargerHAL_r {\n    static void readAllRegisters(uint8_t *regTable);\n};\n\n\nclass ChargerClass {\npublic:\n    ChargerClass(chargerConfig_r config, chargerHAL_r hal) {\n        interface = hal;\n    }\n\n\n    struct system_r {\n        bool initNested(); /* Compiler throws error */\n    };\n\n    bool initNotNested(); /* Compiles OK */\n\n\nprivate:\n    uint8_t registerTable[20];\n    chargerHAL_r interface;\n};\n\n\n/* Compiler throws error */\nbool ChargerClass::system_r::initNested() {\n    interface.readAllRegisters(registerTable);\n}\n\n/* Compiles OK */\nbool ChargerClass::initNotNested() {\n    interface.readAllRegisters(registerTable);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524690430, "post_id": 50031324, "comment_id": 87078758, "body": "You have undefined behavior somewhere.  Can you <a href=\"https://stackoverflow.com/posts/50031324/edit\">edit</a> your question to show a complete program with this problem?  Since you are not showing all your code, there&#39;s no guarantee that it&#39;s even possible to help you."}, {"owner": {"reputation": 3, "user_id": 7971463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ea1c0edfe83ba5429ed9f49f5f93fb?s=128&d=identicon&r=PG&f=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/7971463/romain"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524690484, "post_id": 50031324, "comment_id": 87078777, "body": "So the problem comes from an upper layout? I can show you the code when I call some handler.."}, {"owner": {"reputation": 3, "user_id": 7971463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ea1c0edfe83ba5429ed9f49f5f93fb?s=128&d=identicon&r=PG&f=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/7971463/romain"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524690868, "post_id": 50031324, "comment_id": 87078943, "body": "edited with more code in AbstractPacketHandler"}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1524691442, "post_id": 50031324, "comment_id": 87079191, "body": "have you stepped through this in a debugger to see what&#39;s happening? Have you written unit tests to verify the thing returned from <code>handler</code> is really what you expect, and behaves as you expect? Your code obviously isn&#39;t complete since we can&#39;t see the <code>SlavePacketHandler</code> from the error message, and there could easily be a mistake in that."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524691769, "post_id": 50031324, "comment_id": 87079321, "body": "This question is off-topic if no one is able to reproduce the problem described."}, {"owner": {"reputation": 3, "user_id": 7971463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ea1c0edfe83ba5429ed9f49f5f93fb?s=128&d=identicon&r=PG&f=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/7971463/romain"}, "edited": false, "score": 0, "creation_date": 1524692333, "post_id": 50031324, "comment_id": 87079541, "body": "The problem was simply <code>return [&amp;holder, &amp;addr](NetworkClient *client, NetworkMessage *msg) mutable </code> I had to change <code>&amp;addr</code> to <code>addr</code> in the capture.."}, {"owner": {"reputation": 3, "user_id": 7971463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ea1c0edfe83ba5429ed9f49f5f93fb?s=128&d=identicon&r=PG&f=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/7971463/romain"}, "edited": false, "score": 0, "creation_date": 1524692353, "post_id": 50031324, "comment_id": 87079549, "body": "for some reasons, we cant create references of pointer to member function"}, {"owner": {"reputation": 3638, "user_id": 3893262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2c2858a4f4f41634337f78973b0281aa?s=128&d=identicon&r=PG&f=1", "display_name": "O&#39;Neil", "link": "https://stackoverflow.com/users/3893262/oneil"}, "edited": false, "score": 0, "creation_date": 1524693535, "post_id": 50031324, "comment_id": 87079968, "body": "<code>addr</code> is a passed by value and is then a local variable. You are capturing a dangling reference."}], "owner": {"reputation": 3, "user_id": 7971463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12ea1c0edfe83ba5429ed9f49f5f93fb?s=128&d=identicon&r=PG&f=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/7971463/romain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524690837, "creation_date": 1524690263, "last_edit_date": 1524690837, "question_id": 50031324, "link": "https://stackoverflow.com/questions/50031324/having-issues-trying-to-create-a-template-function-using-member-functions", "title": "Having issues trying to create a template function using member functions", "body": "<p>I'm making a network using TCP sockets in c++.<br>\nI'm having issues when I'm trying to hold my packet handlers in a map.<br>\nHere is my implementation:</p>\n\n<pre><code>using handler_t = std::function&lt;void (NetworkClient *, NetworkMessage *)&gt;;\nusing handlers_t = std::unordered_map&lt;int32_t, handler_t&gt;;\n\ntemplate &lt;typename T, typename V&gt;\nusing typed_handler_t = void (T::*)(NetworkClient *, V *);\n\nclass AbstractPacketHandler {\npublic:\n    void init() {\n       define_handlers(_handlers);\n    }\n\n    void parse_packet(NetworkClient *client, NetworkMessage *msg) {\n        lock_t lock(_locker);\n        try {\n            _handlers.at(msg-&gt;getProtocolId())(client, msg);\n        } catch (std::exception &amp;e) {\n            throw std::runtime_error(\"no handler found for protocol id \" + msg-&gt;getProtocolId());\n        }\n    }\n\n    virtual void define_handlers(handlers_t &amp;handlers) = 0;\n\nprotected:\n\n    template &lt;typename T, typename V&gt;\n    handler_t handler(T &amp;holder, typed_handler_t&lt;T, V&gt; addr) {\n        return [&amp;holder, &amp;addr](NetworkClient *client, NetworkMessage *msg) mutable {\n            (holder.*addr)(client, dynamic_cast&lt;V *&gt;(msg));\n        };\n    }\n\nprivate:\n    handlers_t _handlers;\n    std::mutex _locker;\n};\n</code></pre>\n\n<p>Packet Handler implementation</p>\n\n<pre><code>using Self = MasterPacketHandler;\n\nvoid Self::define_handlers(handlers_t &amp;handlers) {\n    handlers[HelloConnectMessage::PROTOCOL_ID] = handler&lt;Self, HelloConnectMessage&gt;(*this, &amp;Self::onHello);\n    handlers[AwesomeMessage::PROTOCOL_ID] = handler&lt;Self, AwesomeMessage&gt;(*this, &amp;Self::onAwesomeMsg);\n}\n\nvoid Self::onHello(NetworkClient *client, HelloConnectMessage *msg) {\n    printf(\"deserialized hellomsg: %d\\n\", msg-&gt;getHelloVar());\n}\n\nvoid Self::onAwesomeMsg(NetworkClient *client, AwesomeMessage *msg) {\n    printf(\"deserialized awesome: %s %d\\n\", msg-&gt;getAwesome(), msg-&gt;getSomeNumber());\n}\n</code></pre>\n\n<p>This code compiles w/o warning or error. But at runtime when I receive a message, I get a <code>segmentation fault</code><br>\nAfter multiples tries to fix, I tried a debug with <code>valgrind</code><br>\nBelow the returned error:  </p>\n\n<pre><code>==14561== Conditional jump or move depends on uninitialised value(s)\n==14561==    at 0x117CDD: std::function&lt;void (NetworkClient*, NetworkMessage*)&gt; AbstractPacketHandler::handler&lt;SlavePacketHandler, AwesomeMessage&gt;(SlavePacketHandler&amp;, void (SlavePacketHandler::*)(NetworkClient*, AwesomeMessage*))::{lambda(NetworkClient*, NetworkMessage*)#1}::operator()(NetworkClient*, NetworkMessage*) (AbstractPacketHandler.h:40)\n==14561== Use of uninitialised value of size 8\n==14561==    at 0x117D3C: std::function&lt;void (NetworkClient*, NetworkMessage*)&gt; AbstractPacketHandler::handler&lt;SlavePacketHandler, AwesomeMessage&gt;(SlavePacketHandler&amp;, void (SlavePacketHandler::*)(NetworkClient*, AwesomeMessage*))::{lambda(NetworkClient*, NetworkMessage*)#1}::operator()(NetworkClient*, NetworkMessage*) (AbstractPacketHandler.h:40)\n==14561== Jump to the invalid address stated on the next line\n==14561==    at 0x0: ???\n==14561==    by 0x117EEA: std::_Function_handler&lt;void (NetworkClient*, NetworkMessage*), std::function&lt;void (NetworkClient*, NetworkMessage*)&gt; AbstractPacketHandler::handler&lt;SlavePacketHandler, AwesomeMessage&gt;(SlavePacketHandler&amp;, void (SlavePacketHandler::*)(NetworkClient*, AwesomeMessage*))::{lambda(NetworkClient*, NetworkMessage*)#1}&gt;::_M_invoke(std::_Any_data const&amp;, NetworkClient*&amp;&amp;, NetworkMessage*&amp;&amp;) (functional:1731)\n==14561== Process terminating with default action of signal 11 (SIGSEGV)\n==14561==  Bad permissions for mapped region at address 0x0\n==14561==    at 0x0: ???\n==14561==    by 0x117EEA: std::_Function_handler&lt;void (NetworkClient*, NetworkMessage*), std::function&lt;void (NetworkClient*, NetworkMessage*)&gt; AbstractPacketHandler::handler&lt;SlavePacketHandler, AwesomeMessage&gt;(SlavePacketHandler&amp;, void (SlavePacketHandler::*)(NetworkClient*, AwesomeMessage*))::{lambda(NetworkClient*, NetworkMessage*)#1}&gt;::_M_invoke(std::_Any_data const&amp;, NetworkClient*&amp;&amp;, NetworkMessage*&amp;&amp;) (functional:1731)\n</code></pre>\n\n<p>In all of these errors we can see <code>AbstractPacketHandler:40</code> that is the following line of code of my <code>handler</code> method.\n<code>(holder.*addr)(client, dynamic_cast&lt;V *&gt;(msg));</code></p>\n\n<p>I don't understand the errors, all variables are initialized since they are parameters of the function.. do my handler method is right written?</p>\n"}, {"tags": ["c++", "stl", "ado"], "comments": [{"owner": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "edited": false, "score": 0, "creation_date": 1524690336, "post_id": 50031250, "comment_id": 87078720, "body": "What is &quot;ADO _RecordSet&quot;? If it is a class, please include its declaration."}, {"owner": {"reputation": 339, "user_id": 2657661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bee71129dabc06ccbd6eb0a803fd78?s=128&d=identicon&r=PG", "display_name": "Michael J.", "link": "https://stackoverflow.com/users/2657661/michael-j"}, "reply_to_user": {"reputation": 17992, "user_id": 278326, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/29b774f602a4e39d45f5c4f142566f2b?s=128&d=identicon&r=PG", "display_name": "Arun", "link": "https://stackoverflow.com/users/278326/arun"}, "edited": false, "score": 0, "creation_date": 1524692649, "post_id": 50031250, "comment_id": 87079665, "body": "&quot;ADO&quot;  is &quot;Microsoft ActiveX Data Objects&quot; and _Recordset is an interface of the <a href=\"https://docs.microsoft.com/en-us/sql/ado/reference/ado-api/recordset-object-ado?view=sql-server-2017\" rel=\"nofollow noreferrer\">Recordset Object</a>"}], "owner": {"reputation": 339, "user_id": 2657661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3bee71129dabc06ccbd6eb0a803fd78?s=128&d=identicon&r=PG", "display_name": "Michael J.", "link": "https://stackoverflow.com/users/2657661/michael-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524689900, "creation_date": 1524689900, "question_id": 50031250, "link": "https://stackoverflow.com/questions/50031250/how-do-i-efficiently-extract-the-values-in-a-recordset-into-an-stl-container", "title": "How do I efficiently extract the values in a _recordset into an stl container", "body": "<p>What is the most efficient way of \"<em>converting</em>\" an ADO _Recordset into an stl vector or map?  That is, I want to take all of the (string) values in the Recordset and push them onto a vector if there is only one Field, or push them onto a map if there are two Fields.  I know ahead of time whether the Recordset contains one or two Fields and I also know that each value is unique.</p>\n\n<p>Currently I do something like below for a recordset with only one field.</p>\n\n<pre><code>While(false == EOF)\n{\n   myRecorset-&gt;get_Fields(&amp;myFields);\n   myFields-&gt;get_Item(1, &amp;myField);\n   myField-&gt;get_Value(&amp;fieldValue);\n   myVector.push_back(fieldValue.bstrVal);\n)\n</code></pre>\n\n<p>Is there a more efficient way to do this?</p>\n"}, {"tags": ["c++", "variadic-templates", "c++17", "initializer-list", "uniform-initialization"], "answers": [{"comments": [{"owner": {"reputation": 604, "user_id": 5352605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892f03c2dd9382bf7f55e04a3e41c61?s=128&d=identicon&r=PG&f=1", "display_name": "Samuele Pilleri", "link": "https://stackoverflow.com/users/5352605/samuele-pilleri"}, "edited": false, "score": 0, "creation_date": 1524690227, "post_id": 50031255, "comment_id": 87078671, "body": "Can we hypothesize this will change? Is there any proposal about this, maybe for C++2a?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 604, "user_id": 5352605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892f03c2dd9382bf7f55e04a3e41c61?s=128&d=identicon&r=PG&f=1", "display_name": "Samuele Pilleri", "link": "https://stackoverflow.com/users/5352605/samuele-pilleri"}, "edited": false, "score": 0, "creation_date": 1524690615, "post_id": 50031255, "comment_id": 87078842, "body": "@SamuelePilleri No, it won&#39;t."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 8, "last_activity_date": 1524691469, "last_edit_date": 1524691469, "creation_date": 1524689935, "answer_id": 50031255, "question_id": 50031190, "link": "https://stackoverflow.com/questions/50031190/could-not-convert-from-brace-enclosed-initializer-list-to-std-tuple/50031255#50031255", "title": "Could not convert from brace-enclosed initializer list to std tuple", "body": "<p>A <em>braced-init-list</em>, like <code>{1, 'S'}</code>, does not actually have a type. In the context of template deduction, you can only use them in certain cases - when deducing against <code>initializer_list&lt;T&gt;</code> (where <code>T</code> is a function template parameter) or when the corresponding parameter is already deduced by something else. In this case, neither of those two things is true - so the compiler cannot figure out what <code>...T</code> is supposed to be.</p>\n\n<p>So you can provide the types directly:</p>\n\n<pre><code>foo&lt;int, char&gt;({1, 'S'});\n</code></pre>\n\n<p>Or you can construct the <code>tuple</code> yourself and pass that in:</p>\n\n<pre><code>foo(std::tuple&lt;int, char&gt;(1, 'S')); // most explicit\nfoo(std::tuple(1, 'S')); // via class template argument deduction\n</code></pre>\n\n<hr />\n\n<p>Today, <code>ClassTemplate&lt;Ts...&gt;</code> can only be deduced from expressions of type <code>ClassTemplate&lt;Us...&gt;</code> or types that inherit from something like that. A hypothetical proposal could extend that to additionally try to perform class template argument deduction on the expression to see if that deduction succeeds. In this case, <code>{1, 'S'}</code> isn't a <code>tuple&lt;Ts...&gt;</code> but <code>tuple __var{1, 'S'}</code> does successfully deduce <code>tuple&lt;int, char&gt;</code> so that would work. Such a proposal would also have to address issues like... what if we're deducing <code>ClassTemplate&lt;T, Ts...&gt;</code> or any minor variation, which isn't something that class template argument deduction allows (but is something that many people have at times expressed interest in being able to do). </p>\n\n<p>I'm not aware of such a proposal today. </p>\n"}, {"comments": [{"owner": {"reputation": 604, "user_id": 5352605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892f03c2dd9382bf7f55e04a3e41c61?s=128&d=identicon&r=PG&f=1", "display_name": "Samuele Pilleri", "link": "https://stackoverflow.com/users/5352605/samuele-pilleri"}, "edited": false, "score": 0, "creation_date": 1524690775, "post_id": 50031382, "comment_id": 87078902, "body": "That&#39;s what tricked me! I mean, <code>foo</code> expects a <code>std::tuple</code>, it should be pretty straightforward."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 604, "user_id": 5352605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892f03c2dd9382bf7f55e04a3e41c61?s=128&d=identicon&r=PG&f=1", "display_name": "Samuele Pilleri", "link": "https://stackoverflow.com/users/5352605/samuele-pilleri"}, "edited": false, "score": 0, "creation_date": 1524690968, "post_id": 50031382, "comment_id": 87078997, "body": "@SamuelePilleri - And if you pass a <code>std::tuple</code>, it works; but if you pass something else, the compiler must deduce the correct tuple; but this deduction, in this case, is not unique. So the error."}, {"owner": {"reputation": 604, "user_id": 5352605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892f03c2dd9382bf7f55e04a3e41c61?s=128&d=identicon&r=PG&f=1", "display_name": "Samuele Pilleri", "link": "https://stackoverflow.com/users/5352605/samuele-pilleri"}, "edited": false, "score": 0, "creation_date": 1524691327, "post_id": 50031382, "comment_id": 87079149, "body": "Couldn&#39;t it use the same rules as class template argument deduction?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 604, "user_id": 5352605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892f03c2dd9382bf7f55e04a3e41c61?s=128&d=identicon&r=PG&f=1", "display_name": "Samuele Pilleri", "link": "https://stackoverflow.com/users/5352605/samuele-pilleri"}, "edited": false, "score": 1, "creation_date": 1524691957, "post_id": 50031382, "comment_id": 87079398, "body": "@SamuelePilleri - I don&#39;t know; I suppose will be some problems; anyway, from <code>std::tuple t({1, &#39;S&#39;})</code>, which <code>std::tuple</code> should be deduced? <code>std::tuple&lt;std::pair&lt;int, char&gt;&gt;</code>? Or <code>std::tuple&lt;std::tuple&lt;int, char&gt;&gt;</code>? Remain the problem that from <code>{1, &#39;S&#39;}</code> you can&#39;t deduce a unique type."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1524692189, "post_id": 50031382, "comment_id": 87079486, "body": "@max66 Presumably if we had this rule, we wouldn&#39;t arbitrarily insert parentheses?"}, {"owner": {"reputation": 604, "user_id": 5352605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892f03c2dd9382bf7f55e04a3e41c61?s=128&d=identicon&r=PG&f=1", "display_name": "Samuele Pilleri", "link": "https://stackoverflow.com/users/5352605/samuele-pilleri"}, "edited": false, "score": 0, "creation_date": 1524692327, "post_id": 50031382, "comment_id": 87079537, "body": "@max66 Totally agree, but since both <code>tuple x(1, &#39;S&#39;)</code> and <code>tuple x{1, &#39;S&#39;}</code> work I was wondering &quot;why not?&quot;. Anyway, thank you both for your clarifications."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1524693755, "post_id": 50031382, "comment_id": 87080026, "body": "@Barry - do you mean that something as <code>foo({1, {&#39;S&#39;, 2L}})</code> could add a recursive ambiguity?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1524698131, "post_id": 50031382, "comment_id": 87081281, "body": "@max66 I don&#39;t know why &quot;ambiguity&quot; - the only way that could possibly work is if we just decided that braced-init-lists were <code>tuple</code>s."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1524702858, "post_id": 50031382, "comment_id": 87082416, "body": "@Barry - so from <code>{1, {&#39;S&#39;, 2L}}</code> we could deduce <code>std::tuple&lt;int, std::tuple&lt;char, long&gt;&gt;</code>? Anyway, I suppose it could be possible: given that the target is <code>std::tuple&lt;Ts...&gt;</code>, initializing with <code>{as...}</code> we could give a preferred deduction for <code>std::tuple&lt;decltype(as)...&gt;</code>; and if we want <code>std::tuple&lt;std::pair&lt;int, char&gt;&gt;</code> we could explicit with <code>foo&lt;std::pair&lt;int, char&gt;&gt;({1, &#39;S&#39;})</code> or with <code>foo(std::make_pair(1, &#39;S&#39;))</code>. But there isn&#39;t a risk that introducing this rule some old code change behavior?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 0, "creation_date": 1524714003, "post_id": 50031382, "comment_id": 87085028, "body": "I&#39;m not sure why you keep bringing up <code>pair</code>, it is not relevant here. While it <i>may</i> be reasonable to allow deduction of <code>tuple&lt;T...&gt;</code> from <code>{1,&#39;S&#39;}</code>, you at least have <code>tuple</code> there to guide your deduction. How would you determine that the inner braced-init-list needed to <i>also</i> be a <code>tuple</code>? You have nothing to guide you there at all. I don&#39;t see how just assuming that we repeat the outer class template is reasonable."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1524692018, "last_edit_date": 1524692018, "creation_date": 1524690538, "answer_id": 50031382, "question_id": 50031190, "link": "https://stackoverflow.com/questions/50031190/could-not-convert-from-brace-enclosed-initializer-list-to-std-tuple/50031382#50031382", "title": "Could not convert from brace-enclosed initializer list to std tuple", "body": "<blockquote>\n  <p>According to this answer C++17 supports tuple initialization from copy-list-initialization, however it seems such support is limited since I get the following error</p>\n</blockquote>\n\n<p>The problem is another.</p>\n\n<p>When you call <code>bar({1, 'S'})</code>, the compiler knows that <code>bar()</code> receive a <code>tuple&lt;int, char&gt;</code>, so take <code>1</code> as <code>int</code> and <code>'S'</code> as <code>char</code>.</p>\n\n<p>See another example: if you define</p>\n\n<pre><code>void baz (std::tuple&lt;int&gt; const &amp;)\n { }\n</code></pre>\n\n<p>you can call</p>\n\n<pre><code>baz(1);\n</code></pre>\n\n<p>because the compiler knows that <code>baz()</code> receive a <code>std::tuple&lt;int&gt;</code> so take <code>1</code> to initialize the <code>int</code> in the tuple.</p>\n\n<p>But with</p>\n\n<pre><code>template &lt;typename ...T&gt;\nvoid foo(tuple&lt;T...&gt; t)\n { }\n</code></pre>\n\n<p>the compiler doesn't know the <code>T...</code> types; when you call</p>\n\n<pre><code>foo({1, 'S'}); \n</code></pre>\n\n<p>what <code>T...</code> types should deduce the compiler?</p>\n\n<p>I see, at least, two hypothesis: <code>T = int, char</code> or <code>T = std::pair&lt;int, char&gt;</code>; or also <code>T = std::tuple&lt;int, char&gt;</code>.</p>\n\n<p>Which hypothesis should follows the compiler?</p>\n\n<p>I mean: if you pass a <code>std::tuple</code> to <code>foo()</code>, the compiler accept the list of types in the tuple as the list of <code>T...</code>; but if you pass something else, the compiler must deduce the correct <code>std::tuple</code>; but this deduction, in this case, is not unique. So the error.</p>\n"}], "owner": {"reputation": 604, "user_id": 5352605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6892f03c2dd9382bf7f55e04a3e41c61?s=128&d=identicon&r=PG&f=1", "display_name": "Samuele Pilleri", "link": "https://stackoverflow.com/users/5352605/samuele-pilleri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7007, "favorite_count": 3, "accepted_answer_id": 50031255, "answer_count": 2, "score": 11, "last_activity_date": 1524692018, "creation_date": 1524689640, "last_edit_date": 1524690707, "question_id": 50031190, "link": "https://stackoverflow.com/questions/50031190/could-not-convert-from-brace-enclosed-initializer-list-to-std-tuple", "title": "Could not convert from brace-enclosed initializer list to std tuple", "body": "<p>As part of a bigger project, I'm playing with <code>std::tuple</code> and templates; consider the following code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename ...T&gt; void foo(tuple&lt;T...&gt; t) {}\nvoid bar(tuple&lt;int, char&gt; t) {}\ntuple&lt;int, char&gt; quxx() { return {1, 'S'}; }\n\nint main(int argc, char const *argv[])\n{\n    foo({1, 'S'});           // error\n    foo(make_tuple(1, 'S')); // ok\n    bar({1, 'S'});           // ok\n    quxx();                  // ok\n    return 0;\n}\n</code></pre>\n\n<p>According to <a href=\"https://stackoverflow.com/a/32084829\">this answer</a> C++17 supports tuple initialization from <em>copy-list-initialization</em>, however it seems such support is limited since I get the following error (GCC 7.2.0):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>main.cpp: In function 'int main(int, const char**)':\nmain.cpp:14:17: error: could not convert '{1, 'S'}' from '&lt;brace-enclosed initializer list&gt;' to 'std::tuple&lt;&gt;'\n     foo({1, 'S'}); // error\n                 ^\n</code></pre>\n\n<p>Is there any way I can use brace-enclosed syntax in this scenario?</p>\n\n<p><strong>Some Context</strong> : this is going to be used in an operator overload so I guess I'm bound to tuples and cannot make use of variadics, any hint is well-accepted.</p>\n\n<p><strong>Extra</strong> : Clang 6 also complains</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>prog.cc:12:5: error: no matching function for call to 'foo'\n    foo({1, 'S'});           // error\n    ^~~\nprog.cc:6:31: note: candidate function [with T = &lt;&gt;] not viable: cannot convert initializer list argument to 'tuple&lt;&gt;'\ntemplate &lt;typename ...T&gt; void foo(tuple&lt;T...&gt; t) {}\n</code></pre>\n"}, {"tags": ["c++", "templates", "doxygen"], "comments": [{"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1524727966, "post_id": 50031112, "comment_id": 87090620, "body": "Duplicate of: <a href=\"https://stackoverflow.com/questions/50006915/doxygen-interpret-template-argument-superclass\" title=\"doxygen interpret template argument superclass\">stackoverflow.com/questions/50006915/&hellip;</a> ?"}, {"owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1524745824, "post_id": 50031112, "comment_id": 87101982, "body": "@albert - This is not a duplicate; this is a different question. The other question was how to get doxygen to correctly recognize that class hierarchy. This question is about me manually telling Doxygen to override its behavior."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1524746087, "post_id": 50031112, "comment_id": 87102162, "body": "I understand, as far as I can see/ know  there is no direct way to overrule this behavior, maybe something is possible my means of <code>#define</code> statements. Best is anyway also to file a bug report for the problem."}], "owner": {"reputation": 2090, "user_id": 884986, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1842d81fb2949ec808a79045de2e21a3?s=128&d=identicon&r=PG", "display_name": "iAdjunct", "link": "https://stackoverflow.com/users/884986/iadjunct"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1524689267, "creation_date": 1524689267, "question_id": 50031112, "link": "https://stackoverflow.com/questions/50031112/doxygen-c-manually-add-parent-class", "title": "Doxygen &amp; C++: Manually add parent class", "body": "<p>I have a case where Doxygen fails to understand some templated code and inheritance (especially with template recursion and partial template specialization) and would like to tell Doxygen to <em>lie</em> about its superclass by manually specifying one. Ideally, something like this:</p>\n\n<pre><code>class MyClass\n:   Implements&lt;MySuper&gt; //! \\parent MySuper\n{ } ;\n</code></pre>\n\n<p>My main problem is that Doxygen currently shows that class hierarchy as saying that <code>MyClass</code> derives from <code>Implements&lt;MySuper&gt;</code> which derives from <code>T0</code>, <code>T1</code>, <code>T2</code>, <code>T3</code>, <code>T4</code>, <code>T5</code>, <code>T6</code>, <code>T7</code> ... (because those are the names of the template arguments) and loses the information that <code>MyClass</code> inherits from <code>MySuper</code>.</p>\n\n<p>How do I convince Doxygen to lie?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1524688683, "post_id": 50030932, "comment_id": 87077945, "body": "so - remove the junk and we get - &quot;this program crashes at run time&quot;. What platform? Did you run it under your debugger?"}, {"owner": {"reputation": 41, "user_id": 7328409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0963ee476e88354ab6f6c4401d49a4?s=128&d=identicon&r=PG&f=1", "display_name": "MAVERICK", "link": "https://stackoverflow.com/users/7328409/maverick"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1524688811, "post_id": 50030932, "comment_id": 87078005, "body": "the program is giving the correct answer in some of the cases but aborts after printing the result."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524688882, "post_id": 50030932, "comment_id": 87078038, "body": "This isn&#39;t valid C++.  C++ does not have dynamic length arrays."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1524688906, "post_id": 50030932, "comment_id": 87078054, "body": "which one of my questions was that supposed to answer?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1524689043, "post_id": 50030932, "comment_id": 87078122, "body": "This is classic &quot;online judge&quot; code and question.  Weird usage of <code>#define</code> macros, no input cases, usage of non-standard variable length arrays, and the question is about hunting for test cases that break the code."}, {"owner": {"reputation": 41, "user_id": 7328409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0963ee476e88354ab6f6c4401d49a4?s=128&d=identicon&r=PG&f=1", "display_name": "MAVERICK", "link": "https://stackoverflow.com/users/7328409/maverick"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1524689048, "post_id": 50030932, "comment_id": 87078125, "body": "@pm100 platform : macOS and no debugger"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1524689053, "post_id": 50030932, "comment_id": 87078131, "body": "3 forloops nested; with long long&#39;s ... how many years did you have to wait for this?"}, {"owner": {"reputation": 41, "user_id": 7328409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0963ee476e88354ab6f6c4401d49a4?s=128&d=identicon&r=PG&f=1", "display_name": "MAVERICK", "link": "https://stackoverflow.com/users/7328409/maverick"}, "edited": false, "score": 0, "creation_date": 1524689191, "post_id": 50030932, "comment_id": 87078184, "body": "I am a beginner. Please help me."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524689196, "post_id": 50030932, "comment_id": 87078186, "body": "You are writing to an array out-of-bounds somewhere.   The logic and variable names make your code very hard to read or follow.  Look at <code>arr[x] = j+1;</code>.  Is <code>x</code> ever more than 3?  Why is that array size 4?  What does the 4 mean?"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1524689272, "post_id": 50030932, "comment_id": 87078218, "body": "change the arrays to vectors and use <code>vector.at</code> instead of <code>vector[]</code> to set and get elements. That will do range checks for you."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524689301, "post_id": 50030932, "comment_id": 87078230, "body": "@MAVERICK -- Advice -- get rid of the variable length arrays.  Use <code>std::vector</code> instead.  Then replace all of the usage of <code>[ ]</code> with <code>at()</code> to detect if you&#39;re going out-of-bounds somewhere.  (pm100 beat me to it)"}, {"owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1524689369, "post_id": 50030932, "comment_id": 87078263, "body": "<code>#define ll long long int</code> - <code>typedef</code> was the preferred way in the 1980&#39;s ... <code>using</code> is now ... <code>#define</code> is not the tool for the job"}, {"owner": {"reputation": 41, "user_id": 7328409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0963ee476e88354ab6f6c4401d49a4?s=128&d=identicon&r=PG&f=1", "display_name": "MAVERICK", "link": "https://stackoverflow.com/users/7328409/maverick"}, "reply_to_user": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1524689461, "post_id": 50030932, "comment_id": 87078302, "body": "@DrewDormann Yeah, you are right. Apparently arr[4] is going out of bound. Thank You."}, {"owner": {"reputation": 41, "user_id": 7328409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0963ee476e88354ab6f6c4401d49a4?s=128&d=identicon&r=PG&f=1", "display_name": "MAVERICK", "link": "https://stackoverflow.com/users/7328409/maverick"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524689648, "post_id": 50030932, "comment_id": 87078395, "body": "@PaulMcKenzie I will keep that in mind and use it. Thank You."}, {"owner": {"reputation": 41, "user_id": 7328409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0963ee476e88354ab6f6c4401d49a4?s=128&d=identicon&r=PG&f=1", "display_name": "MAVERICK", "link": "https://stackoverflow.com/users/7328409/maverick"}, "reply_to_user": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "edited": false, "score": 0, "creation_date": 1524689689, "post_id": 50030932, "comment_id": 87078412, "body": "@UKMonkey Got it. I will try it out."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1524693009, "post_id": 50030932, "comment_id": 87079787, "body": "If you need to use macros for abbreviations, I highly recommend you take a keyboarding or typing class."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 7328409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0963ee476e88354ab6f6c4401d49a4?s=128&d=identicon&r=PG&f=1", "display_name": "MAVERICK", "link": "https://stackoverflow.com/users/7328409/maverick"}, "is_accepted": true, "score": 0, "last_activity_date": 1524690055, "creation_date": 1524690055, "answer_id": 50031284, "question_id": 50030932, "link": "https://stackoverflow.com/questions/50030932/abort-trap-6-error/50031284#50031284", "title": "Abort trap: 6 ERROR", "body": "<p>the array arr[4] is going out of bound.</p>\n"}], "owner": {"reputation": 41, "user_id": 7328409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0963ee476e88354ab6f6c4401d49a4?s=128&d=identicon&r=PG&f=1", "display_name": "MAVERICK", "link": "https://stackoverflow.com/users/7328409/maverick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1209, "favorite_count": 0, "accepted_answer_id": 50031284, "answer_count": 1, "score": -2, "last_activity_date": 1524690055, "creation_date": 1524688589, "last_edit_date": 1524688961, "question_id": 50030932, "link": "https://stackoverflow.com/questions/50030932/abort-trap-6-error", "title": "Abort trap: 6 ERROR", "body": "<pre><code> #include &lt;iostream&gt;\n #define ll long long int\n using namespace std;\n\n int main()\n {\n      ll t;\n      cin &gt;&gt; t;\n      ll res[t];\n      for(ll k = 0; k &lt; t; k++)\n      {\n           ll n, cnt = 0;\n           ll arr[4] = {0};\n           cin &gt;&gt; n;\n           for(ll i = 0; i &lt; (1&lt;&lt;n); i++)\n           {\n                ll x = 0;\n                ll chk = 0;\n                for(ll j = 0; j &lt; n; j++)\n                {\n                     if(i &amp; (1&lt;&lt;j))\n                     {\n                          chk++;\n                          arr[x] = j+1;\n                          x++;\n                     }\n                }\n                if(chk == 2)\n                {\n                     if((arr[0] ^ arr[1]) &lt;= n)\n                          cnt++;\n                }\n           }\n           res[k] = cnt;\n           // cout &lt;&lt; cnt &lt;&lt; \"\\n\";\n      }\n      for(ll i = 0; i &lt; t; i++)\n           cout &lt;&lt; res[i] &lt;&lt; \"\\n\";\n      return 0;\n }\n</code></pre>\n\n<p>The program is crashing at run time. The program is running in some test cases but crashes after printing the result. The online compiler is giving stack smash detection error. My computer is giving abort trap: 6 error on the terminal. Please help.</p>\n"}, {"tags": ["c++", "boost", "websocket"], "comments": [{"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "edited": false, "score": 0, "creation_date": 1524787379, "post_id": 50030897, "comment_id": 87123342, "body": "Just an observation, this code has undefined behavior. You are calling <code>boost::asio::buffer(text)</code> in <code>write</code>. But <code>text</code> can go out of scope while the asynchronous operation is still running. It is the caller&#39;s responsibility to ensure that the lifetime of memory buffers passed to stream algorithms remain valid at least until the corresponding completion handler is called."}, {"owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "reply_to_user": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "edited": false, "score": 0, "creation_date": 1524874652, "post_id": 50030897, "comment_id": 87160008, "body": "@VinnieFalco Oops... good point. That was just a stupid transcription error I made while formatting my code for SO.SE."}], "answers": [{"comments": [{"owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "edited": false, "score": 0, "creation_date": 1524785693, "post_id": 50053190, "comment_id": 87122905, "body": "Thanks Vinnie. I do understand that, and tested it that way to begin with, but had some difficulty ending the pending call cleanly, when I wanted to close the socket. But, to be honest I don&#39;t see how my code above doesn&#39;t adhere to to what you wrote in your first sentence. When I call p-&gt;write(...); just before ioc.run(); there IS pending work. And the read should then follow."}, {"owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "edited": false, "score": 0, "creation_date": 1524787150, "post_id": 50053190, "comment_id": 87123290, "body": "To clarify, when I call p-&gt;write(...), the function itself creates work - which is why I don&#39;t understand how ioc.run() fails to do anything."}, {"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "reply_to_user": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "edited": false, "score": 0, "creation_date": 1524787490, "post_id": 50053190, "comment_id": 87123383, "body": "If you want to close the websocket connection, just call <code>async_close</code>. Make sure you do that from the same implicit or explicit strand which is used to make the other calls. Pending calls to <code>async_read</code> and <code>async_write</code> will eventually completion with <code>websocket::error::closed</code> and <code>boost::asio::operation_aborted</code> respectively when the <code>async_close</code> operation has completed. I&#39;m not sure exactly why <code>io_context::run</code> is returning right away, but it can only be because there is no pending work."}, {"owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "edited": false, "score": 0, "creation_date": 1524867234, "post_id": 50053190, "comment_id": 87158468, "body": "Yes, calling <code>async_close</code> does work - I&#39;m not sure what the issue was that I had before; it&#39;s simple to do. Maybe I forgot to join the thread or something stupid. But it&#39;s a bit beside the point. My question is really regarding why the code above doesn&#39;t work. For now, I&#39;m just testing my understanding of the library to be sure I have a firm grasp writing my operational code. I&#39;d like to clear up this mystery before continuing. I&#39;m beginning to think it&#39;s a bug in the library."}, {"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "reply_to_user": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "edited": false, "score": 0, "creation_date": 1524871572, "post_id": 50053190, "comment_id": 87159502, "body": "I would be very surprised if there was a defect in the latest release of Beast. The code almost has 100% coverage via tests, and the tests are quite exhaustive. The example clients and servers work as written. If they stop working, it is certainly because of any changes that were made. I would start over using the original code and verify that it does work as expected, and then apply your changes incrementally to find out what causes it to malfunction."}, {"owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "edited": false, "score": 0, "creation_date": 1524873469, "post_id": 50053190, "comment_id": 87159823, "body": "Thanks Vinnie. I was using 1.66, and it looks like they did iron out some bugs in 1.67. Still, it wasn&#39;t a bug. I figured it out. +1 for the help - I appreciate it."}], "tags": [], "owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "is_accepted": false, "score": 2, "last_activity_date": 1524784929, "creation_date": 1524784929, "answer_id": 50053190, "question_id": 50030897, "link": "https://stackoverflow.com/questions/50030897/boost-beastwebsocket-callback-functions/50053190#50053190", "title": "Boost beast::websocket callback functions", "body": "<p><code>io_context::run</code> will only return when there is no more pending work. If you simply make sure that there is a pending call to <code>websocket::stream::async_read</code> active at all times, then <code>run</code> will never return and the hacks will not be needed. Also, you will receive all messages sent by the server.</p>\n"}, {"comments": [{"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "edited": false, "score": 1, "creation_date": 1524875250, "post_id": 50071574, "comment_id": 87160114, "body": "gah...every single time it seems I forget about the need to call <code>restart</code>."}], "tags": [], "owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "is_accepted": true, "score": 3, "last_activity_date": 1524873368, "creation_date": 1524873368, "answer_id": 50071574, "question_id": 50030897, "link": "https://stackoverflow.com/questions/50030897/boost-beastwebsocket-callback-functions/50071574#50071574", "title": "Boost beast::websocket callback functions", "body": "<p>The reason the calls to <code>io_context::run()</code> are not working after the first call (shown here):</p>\n\n<pre><code>boost::asio::io_context ioc;\nstd::shared_ptr&lt;session&gt; p = std::make_shared&lt;session&gt;(ioc);\np-&gt;open(host, port);\nioc.run(); // This works. Connection is established and all callbacks are executed.\n</code></pre>\n\n<p>is because the function <code>io_context::restart()</code> must be called prior to any subsequent calls of <code>io_context::run</code>.</p>\n\n<p><a href=\"https://www.boost.org/doc/libs/1_67_0/doc/html/boost_asio/reference/io_context/restart.html\" rel=\"nofollow noreferrer\">From the documentation</a>:</p>\n\n<blockquote>\n  <p><strong>io_context::restart</strong><br><br>\n  Restart the <em>io_context</em> in preparation for a subsequent run() invocation.<br><br>This function must be called prior to any second or later set of invocations of the run(), run_one(), poll() or poll_one() functions when a previous invocation of these functions returned due to the io_context being stopped or running out of work. After a call to restart(), the io_context object's stopped() function will return false.</p>\n</blockquote>\n"}], "owner": {"reputation": 808, "user_id": 6073774, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/v3n2C.jpg?s=128&g=1", "display_name": "Blair Fonville", "link": "https://stackoverflow.com/users/6073774/blair-fonville"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1623, "favorite_count": 4, "accepted_answer_id": 50071574, "answer_count": 2, "score": 5, "last_activity_date": 1524873368, "creation_date": 1524688426, "last_edit_date": 1524691334, "question_id": 50030897, "link": "https://stackoverflow.com/questions/50030897/boost-beastwebsocket-callback-functions", "title": "Boost beast::websocket callback functions", "body": "<p>I am experimenting with the Boost beast::websocket <a href=\"https://www.boost.org/doc/libs/1_66_0/libs/beast/example/websocket/client/async/websocket_client_async.cpp\" rel=\"nofollow noreferrer\">websocket_client_async.cpp</a> example, in conjunction with <a href=\"https://www.boost.org/doc/libs/1_66_0/libs/beast/example/websocket/server/async/websocket_server_async.cpp\" rel=\"nofollow noreferrer\">websocket_server_async.cpp</a>. </p>\n\n<p>As given, the <em>client</em> example just makes a connection, sends a string to the server (which simply echoes back), prints the reply, closes, and exists.</p>\n\n<p>I'm trying to modify the client to keep the session alive, so that I can repeatedly send/receive strings. So, whereas the example code's <code>on_handshake</code> function immediately sends the string via <code>ws_.async_write(...)</code>, I separate that out into its own <code>write(...)</code> function.</p>\n\n<p>Here is my modified <code>session</code> class:</p>\n\n<pre><code>using tcp = boost::asio::ip::tcp;\nnamespace websocket = boost::beast::websocket;\n\nvoid fail(boost::system::error_code ec, char const* what)\n{\n    std::cerr &lt;&lt; what &lt;&lt; \": \" &lt;&lt; ec.message() &lt;&lt; \"\\n\";\n}\n\n// Sends a WebSocket message and prints the response\nclass session : public std::enable_shared_from_this&lt;session&gt;\n{\n    tcp::resolver resolver_;\n    websocket::stream&lt;tcp::socket&gt; ws_;\n    std::atomic&lt;bool&gt; io_in_progress_;\n    boost::beast::multi_buffer buffer_;\n    std::string host_;\n\npublic:\n    // Resolver and socket require an io_context\n    explicit session(boost::asio::io_context&amp; ioc) : resolver_(ioc), ws_(ioc) {\n        io_in_progress_ = false;\n    }\n\n    bool io_in_progress() const {\n        return io_in_progress_;\n    }\n\n    // +---------------------+\n    // | The \"open\" sequence |\n    // +---------------------+\n    void open(char const* host, char const* port)\n    {\n        host_ = host;\n\n        // Look up the domain name\n        resolver_.async_resolve(host, port,\n            std::bind( &amp;session::on_resolve, shared_from_this(),\n                std::placeholders::_1, std::placeholders::_2 )\n        );\n    }\n\n    void on_resolve(boost::system::error_code ec, tcp::resolver::results_type results)\n    {\n        if (ec)\n            return fail(ec, \"resolve\");\n\n        boost::asio::async_connect(\n            ws_.next_layer(), results.begin(), results.end(),\n            std::bind( &amp;session::on_connect, shared_from_this(),\n                std::placeholders::_1 )\n        );\n    }\n\n    void on_connect(boost::system::error_code ec)\n    {\n        if (ec)\n            return fail(ec, \"connect\");\n\n        ws_.async_handshake(host_, \"/\",\n            std::bind( &amp;session::on_handshake, shared_from_this(),\n                std::placeholders::_1 )\n        );\n    }\n\n    void on_handshake(boost::system::error_code ec)\n    {\n        if (ec)\n            return fail(ec, \"handshake\");\n        else {\n            std::cout &lt;&lt; \"Successful handshake with server.\\n\";\n        }\n    }\n\n    // +---------------------------+\n    // | The \"write/read\" sequence |\n    // +---------------------------+\n    void write(const std::string &amp;text)\n    {\n        io_in_progress_ = true;\n        ws_.async_write(boost::asio::buffer(text),\n            std::bind( &amp;session::on_write, shared_from_this(),\n                std::placeholders::_1, std::placeholders::_2 )\n        );\n    }\n\n    void on_write(boost::system::error_code ec, std::size_t bytes_transferred)\n    {\n        boost::ignore_unused(bytes_transferred);\n        if (ec)\n            return fail(ec, \"write\");\n\n        ws_.async_read(buffer_,\n            std::bind( &amp;session::on_read, shared_from_this(),\n                std::placeholders::_1, std::placeholders::_2 )\n        );\n    }\n\n    void on_read(boost::system::error_code ec, std::size_t bytes_transferred)\n    {\n        io_in_progress_ = false; // end of write/read sequence\n        boost::ignore_unused(bytes_transferred);\n        if (ec)\n            return fail(ec, \"read\");\n\n        std::cout &lt;&lt; boost::beast::buffers(buffer_.data()) &lt;&lt; std::endl;\n    }\n\n    // +----------------------+\n    // | The \"close\" sequence |\n    // +----------------------+\n    void close()\n    {\n        io_in_progress_ = true;\n        ws_.async_close(websocket::close_code::normal,\n            std::bind( &amp;session::on_close, shared_from_this(),\n                std::placeholders::_1)\n        );\n    }\n\n    void on_close(boost::system::error_code ec)\n    {\n        io_in_progress_ = false; // end of close sequence\n        if (ec)\n            return fail(ec, \"close\");\n\n        std::cout &lt;&lt; \"Socket closed successfully.\\n\";\n    }\n};\n</code></pre>\n\n<p>The problem is that, while the connection works fine and I can send a string, the <code>on_read</code> callback is never hit (unless I do an ugly hack described below). </p>\n\n<p>My <code>main</code> looks like this:</p>\n\n<pre><code>void wait_for_io(std::shared_ptr&lt;session&gt; psession, boost::asio::io_context &amp;ioc)\n{\n    // Continually try to run the ioc until the callbacks are finally\n    // triggered (as indicated by the session::io_in_progress_ flag)\n    while (psession-&gt;io_in_progress()) {\n        std::this_thread::sleep_for(std::chrono::milliseconds(1));\n        ioc.run();\n    }\n}\n\nint main(int argc, char** argv)\n{\n    // Check command line arguments.\n    if (argc != 3) {\n        std::cerr &lt;&lt; \"usage info goes here...\\n\";\n        return EXIT_FAILURE;\n    }\n    const char *host = argv[1], *port = argv[2];\n\n    boost::asio::io_context ioc;\n    std::shared_ptr&lt;session&gt; p = std::make_shared&lt;session&gt;(ioc);\n    p-&gt;open(host, port);\n    ioc.run(); // This works. Connection is established and all callbacks are executed.\n\n    p-&gt;write(\"Hello world\"); // String is sent &amp; received by server,\n                             // even before calling ioc.run()\n                             // However, session::on_read callback is never\n                             // reached.\n\n    ioc.run();               // This seems to be ignored and returns immediately, so\n    wait_for_io(p, ioc);     // &lt;-- so this hack is necessary\n\n    p-&gt;close();              // session::on_close is never reached\n    ioc.run();               // Again, this seems to be ignored and returns immediately, so\n    wait_for_io(p, ioc);     // &lt;-- this is necessary\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n\n<p>If I do this:</p>\n\n<pre><code>p-&gt;write(\"Hello world\");\nwhile(1) {\n    std::this_thread::sleep_for(std::chrono::milliseconds(1));\n}\n</code></pre>\n\n<p>I can confirm that the string is sent &amp; received<sup>1</sup> by the server, and that the <code>session::on_read</code> callback is <em>not</em> reached.</p>\n\n<p>Same thing occurs with <code>p-&gt;close()</code>.</p>\n\n<p>But, if I add my weird <code>wait_for_io()</code> function, everything works. I'm positive this a terrible hack, but I can't figure out what's going on. </p>\n\n<p><sup>1</sup> Note: I can confirm that the message does reach the server, as I modified the server example to print any received strings to the console. This was the only modified I made. The echo-to-client functionality was not changed.</p>\n"}, {"tags": ["c++", "glfw"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1524690337, "post_id": 50030775, "comment_id": 87078721, "body": "When you see the <code>imp</code> prefix on an identifier then you know it is looking for a import from a DLL.  So you can tell that the compiler expected to use the DLL instead of the static library.  There is usually a #define that tells it that with &quot;static&quot; in its name.  Google &quot;glew #define static&quot; and it spits out: &quot;On Windows, you also need to define the GLEW_STATIC preprocessor token when building a static library or executable, and the GLEW_BUILD preprocessor token when building a dll&quot;"}, {"owner": {"reputation": 1, "user_id": 9676151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67dc6180f5f9e07db06ef70025098781?s=128&d=identicon&r=PG&f=1", "display_name": "dude78", "link": "https://stackoverflow.com/users/9676151/dude78"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1524693338, "post_id": 50030775, "comment_id": 87079894, "body": "Thank you. I didn&#39;t know it. Reading this <a href=\"https://toster.ru/q/494941\" rel=\"nofollow noreferrer\">article</a> I&#39;ve found out that static libraries have not <b>name</b>.lib format but lib<b>name</b>.a format. So, I&#39;ve set glew libraries up following by this <a href=\"https://habr.com/post/177885/\" rel=\"nofollow noreferrer\">article</a>, although, it doesn&#39;t work for glew 2.1.0 version but for glew 1.9.0. I will try to do as you write above. Thank you again."}], "answers": [{"tags": [], "owner": {"reputation": 457, "user_id": 5406471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DAZpo.png?s=128&g=1", "display_name": "xvnm", "link": "https://stackoverflow.com/users/5406471/xvnm"}, "is_accepted": true, "score": 0, "last_activity_date": 1524712522, "creation_date": 1524712522, "answer_id": 50034286, "question_id": 50030775, "link": "https://stackoverflow.com/questions/50030775/glew32s-lib-undfined-reference/50034286#50034286", "title": "glew32s.lib undfined reference", "body": "<p>I guess that library 'glew32s.lib' is built with Visual studio. So you cannot link with it unless you change your compiler.</p>\n\n<p>I suggest you get a GLEW library built with MinGW or build one by yourself. Libraries for MinGW are named 'libNAME.a', </p>\n\n<p>Also, dynamic libraries have no limitation on its name, so there could be no difference between static library (instead, they are named, like, libNAME_static.a or libNAMEs.a, ...)</p>\n"}], "owner": {"reputation": 1, "user_id": 9676151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67dc6180f5f9e07db06ef70025098781?s=128&d=identicon&r=PG&f=1", "display_name": "dude78", "link": "https://stackoverflow.com/users/9676151/dude78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 50034286, "answer_count": 1, "score": 0, "last_activity_date": 1524712522, "creation_date": 1524687899, "question_id": 50030775, "link": "https://stackoverflow.com/questions/50030775/glew32s-lib-undfined-reference", "title": "glew32s.lib undfined reference", "body": "<p>I use MinGW compiler and Code::Blocks IDE, 16.01.\nI have interested in graphic library OpenGL. I've started to find articles and found one.</p>\n\n<p>I've set up glew, freeglut and glfw by myself without using cMaker. Then, I've decided to link libraries into the project. So, I have the following sequence in Linker settings:</p>\n\n<pre><code>C:\\MinGW\\lib\\glew\\glew32s.lib\nC:\\MinGW\\lib\\freeglut\\libfreeglut.a\nC:\\MinGW\\lib\\freeglut\\libfreeglut_static.a\nC:\\MinGW\\lib\\glfw\\libglfw3dll.a\nC:\\MinGW\\lib\\glfw\\libglfw3.a\n</code></pre>\n\n<p>Following by <a href=\"https://habr.com/post/311198/\" rel=\"nofollow noreferrer\">this tutorial</a> (in russian language) I've written in linker settings glew32s.lib (with 's'), 'cause it's a static library and I need this one. After that I've tried to compile but get these errors:</p>\n\n<pre><code>C:\\MinGW\\lib\\glew\\glew32s.lib(tmp\\glew_static\\Release\\Win32\\glew.obj):(.text$mn+0x7)||undefined reference to `_imp__wglGetProcAddress@4'|\nC:\\MinGW\\lib\\glew\\glew32s.lib(tmp\\glew_static\\Release\\Win32\\glew.obj):(.text$mn+0x4)||undefined reference to `_imp__wglGetProcAddress@4'|\n</code></pre>\n\n<p>The code I've tried to compile is:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n// GLEW\n#define GLEW_STATIC\n#include &lt;GL/glew.h&gt;\n\n// GLFW\n#include &lt;GLFW/glfw3.h&gt;\n\n\n// Function prototypes\nvoid key_callback(GLFWwindow* window, int key, int scancode, int action, int mode);\n\n// Window dimensions\nconst GLuint WIDTH = 800, HEIGHT = 600;\n\n// The MAIN function, from here we start the application and run the game loop\nint main()\n{\n    std::cout &lt;&lt; \"Starting GLFW context, OpenGL 3.3\" &lt;&lt; std::endl;\n    // Init GLFW\n    glfwInit();\n    // Set all the required options for GLFW\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);\n    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);\n    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);\n    glfwWindowHint(GLFW_RESIZABLE, GL_FALSE);\n\n    // Create a GLFWwindow object that we can use for GLFW's functions\n    GLFWwindow* window = glfwCreateWindow(WIDTH, HEIGHT, \"LearnOpenGL\", nullptr, nullptr);\n    if (window == nullptr)\n    {\n        std::cout &lt;&lt; \"Failed to create GLFW window\" &lt;&lt; std::endl;\n        glfwTerminate();\n        return -1;\n    }\n    glfwMakeContextCurrent(window);\n    // Set the required callback functions\n    glfwSetKeyCallback(window, key_callback);\n\n    // Set this to true so GLEW knows to use a modern approach to retrieving function pointers and extensions\n    glewExperimental = GL_TRUE;\n    // Initialize GLEW to setup the OpenGL Function pointers\n    if (glewInit() != GLEW_OK)\n    {\n        std::cout &lt;&lt; \"Failed to initialize GLEW\" &lt;&lt; std::endl;\n        return -1;\n    }\n\n    // Define the viewport dimensions\n    int width, height;\n    glfwGetFramebufferSize(window, &amp;width, &amp;height);\n    glViewport(0, 0, width, height);\n\n    // Game loop\n    while (!glfwWindowShouldClose(window))\n    {\n        // Check if any events have been activiated (key pressed, mouse moved etc.) and call corresponding response functions\n        glfwPollEvents();\n\n        // Render\n        // Clear the colorbuffer\n        glClearColor(0.2f, 0.3f, 0.3f, 1.0f);\n        glClear(GL_COLOR_BUFFER_BIT);\n\n        // Swap the screen buffers\n        glfwSwapBuffers(window);\n    }\n\n    // Terminate GLFW, clearing any resources allocated by GLFW.\n    glfwTerminate();\n    return 0;\n}\n\n// Is called whenever a key is pressed/released via GLFW\nvoid key_callback(GLFWwindow* window, int key, int scancode, int action, int mode)\n{\n    std::cout &lt;&lt; key &lt;&lt; std::endl;\n    if (key == GLFW_KEY_ESCAPE &amp;&amp; action == GLFW_PRESS)\n        glfwSetWindowShouldClose(window, GL_TRUE);\n}\n</code></pre>\n\n<p>Then I wrote in linker settings glew32.lib (without 's'), comment <code>glewExperimental = GL_TRUE;</code> line and try again.\nThe program was compiled successfully. It was run and the result was as it must be.</p>\n\n<p>But I want to use a static library instead of dynamic. How can it be solved?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1524716637, "post_id": 50030721, "comment_id": 87085688, "body": "@Rakete1111 According to <a href=\"https://stackoverflow.blog/2011/01/05/the-wikipedia-of-long-tail-programming-questions/\">this blog</a>, I don&#39;t think this is a duplicate."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1524717412, "post_id": 50030721, "comment_id": 87085875, "body": "@xskxzr Could you expend a bit please? Because the OP needed to put a <code>template</code> in there, which is what the dupe answers by explaining why it&#39;s needed."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1524718821, "post_id": 50030721, "comment_id": 87086273, "body": "@Rakete1111 They are two <i>different</i> questions with the same answer. I found a discussion <a href=\"https://meta.stackexchange.com/questions/74080/close-as-duplicate-what-if-only-the-answer-is-a-duplicate\">here</a>. To be honest, I am not very sure whether it is a duplicate."}], "answers": [{"tags": [], "owner": {"reputation": 3591, "user_id": 549246, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f4e97f0ea1536e2f3dd5905cd646c9ad?s=128&d=identicon&r=PG", "display_name": "Brian Vandenberg", "link": "https://stackoverflow.com/users/549246/brian-vandenberg"}, "is_accepted": true, "score": 3, "last_activity_date": 1524687684, "creation_date": 1524687684, "answer_id": 50030722, "question_id": 50030721, "link": "https://stackoverflow.com/questions/50030721/expected-primary-expression-before-token-requires-template-disambiguator/50030722#50030722", "title": "expected primary-expression before &#39;)&#39; token (requires &quot;template&quot; disambiguator)", "body": "<p>TLDR: The solution was to use the <code>template</code> keyword as a <a href=\"http://en.cppreference.com/w/cpp/language/dependent_name\" rel=\"nofollow noreferrer\">disambiguator (at the bottom of the page)</a> when calling <code>get_value&lt;A,B&gt;()</code>:</p>\n\n<pre><code>uint get() const { auto tmp = this-&gt;asdf-&gt;template get_value&lt;First,Second&gt;(); return tmp; }\n                                          ^^^^^^^^^\n</code></pre>\n\n<p>The other answers I came across related to this error were a result of the code passing a type instead of a value as an argument to the function.</p>\n\n<p>In this case the function takes no arguments.  What made the problem obvious was changing the form of the code, producing better errors:</p>\n\n<pre><code>template &lt;uint First, uint Second, typename T&gt;\nstruct Thing {\n  std::shared_ptr&lt;T&gt; asdf;\n  uint get() const { auto tmp = this-&gt;asdf-&gt;get_value&lt;First,Second&gt;(); return tmp; }\n</code></pre>\n\n<p>... which changed the errors to:</p>\n\n<pre><code>error: declaration of 'Second' shadows template parameter\n  uint get() const { auto tmp = this-&gt;asdf-&gt;get_value&lt;First,Second&gt;(); return tmp; }\n\nerror: declaration of 'Second' with type 'auto' requires an initializer\n  uint get() const { auto tmp = this-&gt;asdf-&gt;get_value&lt;First,Second&gt;(); return tmp; }\n                                                            ^\nerror: expected ';' at end of declaration    };\n  uint get() const { auto tmp = this-&gt;asdf-&gt;get_value&lt;First,Second&gt;(); return tmp; }\n                                                                  ^\n</code></pre>\n"}], "owner": {"reputation": 3591, "user_id": 549246, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f4e97f0ea1536e2f3dd5905cd646c9ad?s=128&d=identicon&r=PG", "display_name": "Brian Vandenberg", "link": "https://stackoverflow.com/users/549246/brian-vandenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "closed_date": 1524687846, "accepted_answer_id": 50030722, "answer_count": 1, "score": 0, "last_activity_date": 1524688332, "creation_date": 1524687684, "last_edit_date": 1524688332, "question_id": 50030721, "link": "https://stackoverflow.com/questions/50030721/expected-primary-expression-before-token-requires-template-disambiguator", "closed_reason": "Duplicate", "title": "expected primary-expression before &#39;)&#39; token (requires &quot;template&quot; disambiguator)", "body": "<p>I have a piece of code resembling the following (other details omitted for brevity):</p>\n\n<pre><code>template &lt;uint First, uint Second, typename T&gt;\nstruct Thing {\n  std::shared_ptr&lt;T&gt; asdf;\n  uint get() const { this-&gt;asdf-&gt;get_value&lt;First,Second&gt;(); }\n};\n</code></pre>\n\n<p>... producing the following error in GCC 7:</p>\n\n<pre><code>error: expected primary-expression before ')' token\n  uint get() const { this-&gt;asdf-&gt;get_value&lt;First,Second&gt;(); }\n                                                         ^\n</code></pre>\n\n<p>Clang 4.0.1 reports no warnings with <code>-Weverything</code> (excepting very pedantic things like c++98 compatibility warnings); same thing with GCC 7 and <code>-W{all,extra,effc++,pedantic}</code>.</p>\n\n<hr>\n\n<p>I was previously unaware of <a href=\"https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords\">this question</a>; while the answer to my problem is certainly outlined there, the error message didn't make it plain that was the problem.  Supposing I deleted this question and its associated answer, other people searching for this error message will only run across the questions I found -- that is, the ones indicating the problem was caused by passing a type as a function argument instead of passing a value.</p>\n"}, {"tags": ["c++", "parallel-processing", "cuda", "nvidia", "karatsuba"], "comments": [{"owner": {"reputation": 285, "user_id": 3148748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKcNT.jpg?s=128&g=1", "display_name": "Aniket Chowdhury", "link": "https://stackoverflow.com/users/3148748/aniket-chowdhury"}, "edited": false, "score": 0, "creation_date": 1524688064, "post_id": 50030669, "comment_id": 87077641, "body": "I have never worked in CUDA. That being said, if the answer is always different, it is likely the problem is in data dependency. I would probably have scratch my hair to figure it out. You might have better luck."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8005765"}, "reply_to_user": {"reputation": 285, "user_id": 3148748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKcNT.jpg?s=128&g=1", "display_name": "Aniket Chowdhury", "link": "https://stackoverflow.com/users/3148748/aniket-chowdhury"}, "edited": false, "score": 1, "creation_date": 1524688424, "post_id": 50030669, "comment_id": 87077823, "body": "To understand CUDA in this code is simple. all you need is just to replace the <i>if conditions</i> for the <i>for loops</i> and run that code with a lot of threads. But Thank you, I will try to figure out why is there data dependency."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8005765"}, "edited": false, "score": 0, "creation_date": 1524693612, "post_id": 50031072, "comment_id": 87079986, "body": "Now I can see the result is always the same, but still wrong. Are you able to configure why? The <i>TYPE</i> is just <i>int</i> and I am pretty sure that in this case this type is ok. I belive the problem is in my grid dimension and block numbers. It seems to me that my code execute for every even coefficient of polynomial two times now."}, {"owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "edited": false, "score": 0, "creation_date": 1524694417, "post_id": 50031072, "comment_id": 87080239, "body": "Take a look at my notes 1 and 3 in the answer which I have edited.  If those don&#39;t address  the issue then I would need to see a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "tags": [], "owner": {"reputation": 119299, "user_id": 1695960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f9f557c03db19232aa410540af2f966?s=128&d=identicon&r=PG", "display_name": "Robert Crovella", "link": "https://stackoverflow.com/users/1695960/robert-crovella"}, "is_accepted": true, "score": 0, "last_activity_date": 1524694054, "last_edit_date": 1524694054, "creation_date": 1524689083, "answer_id": 50031072, "question_id": 50030669, "link": "https://stackoverflow.com/questions/50030669/karatsuba-polynomials-multiplication-with-cuda/50031072#50031072", "title": "Karatsuba - polynomials multiplication with CUDA", "body": "<p>For question like this, you are supposed to provide a MCVE.  (See item 1 <a href=\"https://stackoverflow.com/help/on-topic\">here</a>)  For example, I don't know what type is indicated by <code>TYPE</code>, and it does matter for the correctness of the solution I will propose.</p>\n\n<p>In your first kernel, only one thread in your entire grid was reading and writing location <code>result[i]</code>.  But in your second kernel, you now have multiple threads writing to the <code>result[i]</code> location.  They are conflicting with each other.  CUDA doesn't specify the order in which threads will run, and some may run before, after, or at the same time as, others. In this case, some threads may read <code>result[i]</code> at the same time as others.  Then, when the threads write their results, they will be inconsistent.  And it may vary from run-to-run.  You have a <strong>race condition</strong> there (execution order dependency, not data dependency).  </p>\n\n<p>The canonical method to sort this out would be to employ a <a href=\"http://developer.download.nvidia.com/compute/cuda/1.1-Beta/x86_website/projects/reduction/doc/reduction.pdf\" rel=\"nofollow noreferrer\">reduction</a> technique.  </p>\n\n<p>However for simplicity, I will suggest that <a href=\"https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#atomic-functions\" rel=\"nofollow noreferrer\">atomics</a> could help you sort it out.  This is easier to implement based on what you have shown, and will help confirm the race condition.  After that, if you want to try a reduction method, there are plenty of tutorials for that (one is linked above) and plenty of questions here on the <code>cuda</code> tag about it.</p>\n\n<p>You could modify your kernel to something like this, to sort out the race condition:</p>\n\n<pre><code>__global__ void kernel_res_nested(TYPE *A, TYPE *B, TYPE *D, TYPE *result, TYPE size, TYPE resultSize){\n\n    int i = blockDim.x * blockIdx.x + threadIdx.x;\n    int j = blockDim.y * blockIdx.y + threadIdx.y;\n\n    if( i &gt; 0 &amp;&amp; i &lt; resultSize - 1){\n\n        TYPE start = (i &gt;= size) ? (i % size ) + 1 : 0;\n        TYPE end = (i + 1) &gt;&gt; 1;\n\n        if(j &gt;= start &amp;&amp; j &lt; end ){ // see note below\n\n           atomicAdd(result+i, (( A[j] + A[i - j] ) * ( B[j] + B[i - j] ) - ( D[j] + D[i - j] )));\n        }\n    }\n\n}\n</code></pre>\n\n<p>Note that depending on your GPU type, and the actual type of <code>TYPE</code> you are using, this may not work (may not compile) as-is.  But since you had previously used <code>TYPE</code> as a loop variable, I am assuming it is an integer type, and the necessary <code>atomicAdd</code> for those should be available.</p>\n\n<p>A few other comments:</p>\n\n<ol>\n<li><p>This may not be giving you the grid size you expect:</p>\n\n<pre><code>dim3 grid( (resultSize+1/32) , (resultSize+7/8) );\n</code></pre>\n\n<p>I think the usual calculations there would be:</p>\n\n<pre><code>dim3 grid( (resultSize+31)/32, (resultSize+7)/8 );\n</code></pre></li>\n<li><p>I always recommend <a href=\"https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api\">proper CUDA error checking</a> and running your codes with <code>cuda-memcheck</code>, any time you are having trouble with a CUDA code, to make sure there are no runtime errors.</p></li>\n<li><p>It also looks to me like this:</p>\n\n<pre><code>if(j &gt;= start &amp;&amp; j &lt;= end ){\n</code></pre>\n\n<p>should be this:</p>\n\n<pre><code>if(j &gt;= start &amp;&amp; j &lt; end ){\n</code></pre>\n\n<p>to match your for-loop range.  I am also making an assumption that <code>size</code> is less than <code>resultSize</code> (again, a MCVE would help).</p></li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8005765"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 2, "accepted_answer_id": 50031072, "answer_count": 1, "score": 1, "last_activity_date": 1569098357, "creation_date": 1524687467, "last_edit_date": 1569098357, "question_id": 50030669, "link": "https://stackoverflow.com/questions/50030669/karatsuba-polynomials-multiplication-with-cuda", "title": "Karatsuba - polynomials multiplication with CUDA", "body": "<p>I'm using CUDA for the iterative Karatsuba algorithm and I would like to ask, why is one line computed always different.</p>\n\n<p>First, I implemented this function, which computed the result always correctly:</p>\n\n<pre><code>__global__ void kernel_res_main(TYPE *A, TYPE *B, TYPE *D, TYPE *result, TYPE size, TYPE resultSize){\n    int i = blockDim.x * blockIdx.x + threadIdx.x;\n\n    if( i &gt; 0 &amp;&amp; i &lt; resultSize - 1){\n\n        TYPE start = (i &gt;= size) ? (i % size ) + 1 : 0;\n\n\n        TYPE end = (i + 1) / 2;\n\n\n        for(TYPE inner = start; inner &lt; end; inner++){\n            result[i] += ( A[inner] + A[i - inner] ) * ( B[inner] + B[i - inner] );\n            result[i] -= ( D[inner] + D[i-inner] );\n        }\n    }\n}\n</code></pre>\n\n<p>Now I would like to use the 2D grid and use CUDA for the for-loop, so I changed my function to this:</p>\n\n<pre><code>__global__ void kernel_res_nested(TYPE *A, TYPE *B, TYPE *D, TYPE *result, TYPE size, TYPE resultSize){\n\n    int i = blockDim.x * blockIdx.x + threadIdx.x;\n    int j = blockDim.y * blockIdx.y + threadIdx.y;\n\n    TYPE rtmp = result[i];\n\n    if( i &gt; 0 &amp;&amp; i &lt; resultSize - 1){\n\n        TYPE start = (i &gt;= size) ? (i % size ) + 1 : 0;\n        TYPE end = (i + 1) &gt;&gt; 1;\n\n        if(j &gt;= start &amp;&amp; j &lt;= end ){\n\n           // WRONG \n           rtmp += ( A[j] + A[i - j] ) * ( B[j] + B[i - j] ) - ( D[j] + D[i - j] );\n        }\n    }\n\n    result[i] = rtmp;\n}\n</code></pre>\n\n<p>I am calling this function like this:</p>\n\n<pre><code>dim3 block( 32, 8 );\ndim3 grid( (resultSize+1/32) , (resultSize+7/8) );\nkernel_res_nested &lt;&lt;&lt;grid, block&gt;&gt;&gt; (devA, devB, devD, devResult, size, resultSize);\n</code></pre>\n\n<p>And the result is alway wrong and always different. I can't understand why is that second implementation wrong and always computes wrong results. I can't see there any logical problem connected with data dependency. Does anyone know How can I solve this problem?</p>\n"}, {"tags": ["c++", "coding-style", "standards"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1524687587, "post_id": 50030650, "comment_id": 87077421, "body": "I suppose he was referring to error handling? So instead of writing something to the screen, rather throw an exception and have the caller deal with the error in some appropriate way. Please post some example code and it will be easier to answer. As written this question is not clear and too broad."}, {"owner": {"reputation": 5, "user_id": 8582665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6759f5eb460860000b3c8dc79508a403?s=128&d=identicon&r=PG&f=1", "display_name": "gamer1996", "link": "https://stackoverflow.com/users/8582665/gamer1996"}, "reply_to_user": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1524687872, "post_id": 50030650, "comment_id": 87077548, "body": "@wally sorry, it was just a class and if the array was empty if said \u201carray is empty\u201d. Instead of cout though he used Throw. It was just a class with pointers in it that can dynamically change. But he was speaking in general you shouldn\u2019t use inputs or outputs within objects. So I assumed it meant that situation doesn\u2019t matter. I\u2019m currently on mobile so I\u2019ll post an example as soon as I get to my computer."}, {"owner": {"reputation": 285, "user_id": 3148748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKcNT.jpg?s=128&g=1", "display_name": "Aniket Chowdhury", "link": "https://stackoverflow.com/users/3148748/aniket-chowdhury"}, "edited": false, "score": 0, "creation_date": 1524688212, "post_id": 50030650, "comment_id": 87077722, "body": "The question lacks data."}], "answers": [{"tags": [], "owner": {"reputation": 11788, "user_id": 2360169, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/x8M06.jpg?s=128&g=1", "display_name": "Michael Gunter", "link": "https://stackoverflow.com/users/2360169/michael-gunter"}, "is_accepted": true, "score": 0, "last_activity_date": 1524688935, "last_edit_date": 1524688935, "creation_date": 1524688595, "answer_id": 50030935, "question_id": 50030650, "link": "https://stackoverflow.com/questions/50030650/input-output-and-classes/50030935#50030935", "title": "Input/Output and classes", "body": "<p>Classes that are designed for reusability shouldn't make too many assumptions about where they will be used. Imagine you create a C++ class to encapsulate the idea of a file, such as:</p>\n\n<pre><code>class CFile {\npublic:\n    CFile(const char* path);\n    void rename(const char* new_path);\n    std::vector&lt;char&gt; get_content();\n};\n</code></pre>\n\n<p>This class is highly reusable. Today, it may be used in a console application, where it may be OK to write information to stdout. Tomorrow, it may be used in a GUI application, where it doesn't make any sense to write to stdout. It probably makes more sense for the <code>rename()</code> method to throw an exception on error than to write to stdout. The client application (console vs. GUI) can then choose to handle the error however they choose.</p>\n\n<p>In practice, however, you'll find that most systems are a mix of reusable classes (classes which can be easily pulled out of one application and used as-is in another application) and focused classes (classes that are designed to handle a use case that is specific for the program). It may be preferable for a focused class to assume its use case, in which case it should feel free to write to stdout. For example, your <code>main()</code> method may simply be something like the following:</p>\n\n<pre><code>int main(int argc, char* argv[]) {\n    CMyApplication application;\n    return application.run(argc, argv);\n}\n</code></pre>\n\n<p>In this case, all of your application's functionality is likely in classes, and the \"controller\" or \"driver\" for all of your application is the class <code>CMyApplication</code>. This class can write to stdout all it wants, if it's appropriate to do so.</p>\n"}], "owner": {"reputation": 5, "user_id": 8582665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6759f5eb460860000b3c8dc79508a403?s=128&d=identicon&r=PG&f=1", "display_name": "gamer1996", "link": "https://stackoverflow.com/users/8582665/gamer1996"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 50030935, "answer_count": 1, "score": -2, "last_activity_date": 1524688935, "creation_date": 1524687393, "last_edit_date": 1524688310, "question_id": 50030650, "link": "https://stackoverflow.com/questions/50030650/input-output-and-classes", "title": "Input/Output and classes", "body": "<p>I was recently watching a couple videos on C++. Within the video the person said that usually you don\u2019t want to use input/output within a class. Can someone please elaborate why? Is it just what this guy is saying or is it some kind of standard within programming? Instead he was using </p>\n\n<blockquote>\n  <p>Throw</p>\n</blockquote>\n\n<p>instead of cout/print/printf.</p>\n\n<p>Basically video said you shouldn\u2019t be using input/output within classes. Is this an industry standard? If so why?</p>\n"}, {"tags": ["c++", "binary-tree"], "comments": [{"owner": {"reputation": 285, "user_id": 3148748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKcNT.jpg?s=128&g=1", "display_name": "Aniket Chowdhury", "link": "https://stackoverflow.com/users/3148748/aniket-chowdhury"}, "edited": false, "score": 2, "creation_date": 1524687159, "post_id": 50030563, "comment_id": 87077212, "body": "How is myvector defined?"}, {"owner": {"reputation": 1015, "user_id": 5688187, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-8yTdoOskIOk/AAAAAAAAAAI/AAAAAAAAAAA/YTYc19Rnn9Y/photo.jpg?sz=128", "display_name": "Martin V&#233;ronneau", "link": "https://stackoverflow.com/users/5688187/martin-v%c3%a9ronneau"}, "edited": false, "score": 0, "creation_date": 1524687607, "post_id": 50030563, "comment_id": 87077432, "body": "Is it okay that <code>myvector</code> contains a list of deleted pointers? If you delete the pointers in <code>myvector</code> later, you essentially delete them twice."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1524688144, "post_id": 50030563, "comment_id": 87077685, "body": "1) You should store the data that the tree represents in the vector, not the pointers.  The pointers are just an implementation detail of the BST, it should have nothing to do with the vector.  2) The <code>BST</code> should have a <code>clear()</code> or similar function to get rid of all the pointers -- this would prevent the need of deleting the pointers one-by-one in the swap function."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 0, "creation_date": 1524690372, "post_id": 50030563, "comment_id": 87078741, "body": "In addition to the other comments, it&#39;s well worth learning to use valgrind or your compiler&#39;s address sanitizer to diagnose this sort of error."}], "answers": [{"tags": [], "owner": {"reputation": 285, "user_id": 3148748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKcNT.jpg?s=128&g=1", "display_name": "Aniket Chowdhury", "link": "https://stackoverflow.com/users/3148748/aniket-chowdhury"}, "is_accepted": false, "score": 1, "last_activity_date": 1524687616, "creation_date": 1524687616, "answer_id": 50030708, "question_id": 50030563, "link": "https://stackoverflow.com/questions/50030563/c-trying-to-delete-binary-tree-and-move-it-to-vector/50030708#50030708", "title": "C++ trying to delete Binary Tree and move it to Vector", "body": "<p>You cannot delete temp after you place it a vector. Also, how is your vector defined? There might be problem there.</p>\n\n<p>Also you should use iterators instead of push_back() function. It doesn't work well with pointers.</p>\n\n<p>And, why does everyone insist on using c-style pointers. Use shared or unique pointers. Please?</p>\n\n<p>Type of error usually signifies that a pointer being freed twice.</p>\n"}, {"comments": [{"owner": {"reputation": 285, "user_id": 3148748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKcNT.jpg?s=128&g=1", "display_name": "Aniket Chowdhury", "link": "https://stackoverflow.com/users/3148748/aniket-chowdhury"}, "edited": false, "score": 1, "creation_date": 1524688311, "post_id": 50030770, "comment_id": 87077765, "body": "Yup. That&#39;s how it&#39;s done. Though I still hate it that people use c-style pointers."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1524688756, "post_id": 50030770, "comment_id": 87077983, "body": "In addition, I don&#39;t think the way the data is being stored in the vector actually represents the binary tree correctly.  The code should do a breadth-first traversal, storing each node&#39;s data into the vector as it&#39;s encounterd."}], "tags": [], "owner": {"reputation": 1471, "user_id": 4161406, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-jmkcSCy65Dc/AAAAAAAAAAI/AAAAAAAAACA/3IMYGIYfw28/photo.jpg?sz=128", "display_name": "BJovke", "link": "https://stackoverflow.com/users/4161406/bjovke"}, "is_accepted": true, "score": 4, "last_activity_date": 1524687884, "creation_date": 1524687884, "answer_id": 50030770, "question_id": 50030563, "link": "https://stackoverflow.com/questions/50030563/c-trying-to-delete-binary-tree-and-move-it-to-vector/50030770#50030770", "title": "C++ trying to delete Binary Tree and move it to Vector", "body": "<p>It's obvious why this isn't working.</p>\n\n<pre><code>    } else {\n        Node *temp = ptr;\n        myvector.push_back(ptr); //starting from root, we traverse until we reach the bottom and then add ptr to the vector\n        ptr = m_root;\n        delete temp; //once we're finished, we delete temp\n    }\n</code></pre>\n\n<p>You're storing a pointer to <code>Node</code> into vector and then deleting that <code>Node</code> with <code>delete temp</code>. After that pointer stored into vector points to garbage or non-existent memory.</p>\n\n<p><em>\"...a function that places all of the values of a binary tree into a vector...\"</em>\nNo, you're not storing binary tree values, you're storing <strong>pointers</strong> to binary tree values (<code>Node</code> objects).</p>\n\n<p>There are two things you can do:</p>\n\n<ul>\n<li>If the binary tree will not be freed nor changed for the lifetime of <code>myvector</code> then you can just remove the <code>delete temp;</code> line.</li>\n<li>If assumption in the first case is not true, then you need to store <code>Node</code> elements into vector, <strong>not</strong> pointers to them. So, define <code>myvector</code> as <code>vector&lt;Node&gt; myvector;</code> instead of <code>vector&lt;Node *&gt; myvector;</code> and change <code>myvector.push_back(ptr);</code> to <code>myvector.push_back(*ptr);</code>.</li>\n</ul>\n"}], "owner": {"reputation": 283, "user_id": 8553855, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f28e2eae811a53d091cf85ba462b7b18?s=128&d=identicon&r=PG&f=1", "display_name": "Zevvysan", "link": "https://stackoverflow.com/users/8553855/zevvysan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 50030770, "answer_count": 2, "score": -1, "last_activity_date": 1524687884, "creation_date": 1524687032, "question_id": 50030563, "link": "https://stackoverflow.com/questions/50030563/c-trying-to-delete-binary-tree-and-move-it-to-vector", "title": "C++ trying to delete Binary Tree and move it to Vector", "body": "<p>So I'm trying to write a function that places all of the values of a binary tree into a vector, which will later be used to recreate it. But when I try to call this function, I get an error: </p>\n\n<pre><code>Error in `./bst': double free or corruption (fasttop):\n</code></pre>\n\n<p>This is the function I'm using. The vector itself is a private variable containing nodes. size() returns the size of the tree and is working.</p>\n\n<pre><code>void BST::swapvector()\n{\n    Node *ptr = m_root;\n    while (size() != 0)\n    {\n        if (ptr-&gt;m_left != NULL) {\n            ptr = ptr-&gt;m_left;\n        } else if (ptr-&gt;m_right != NULL) {\n            ptr = ptr-&gt;m_right;\n        } else {\n            Node *temp = ptr;\n            myvector.push_back(ptr); //starting from root, we traverse until we reach the bottom and then add ptr to the vector\n            ptr = m_root;\n            delete temp; //once we're finished, we delete temp\n        }\n    }\n}\n</code></pre>\n\n<p>Does anyone know why this isn't working? Thanks!</p>\n"}, {"tags": ["c++", "cmake", "visual-studio-2017"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1524685998, "post_id": 50030212, "comment_id": 87076706, "body": "Before <code>find_package(Boost)</code> additionally <code>set (Boost_DEBUG ON)</code>  and see which library files are actually searched."}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "edited": false, "score": 3, "creation_date": 1524686601, "post_id": 50030212, "comment_id": 87076962, "body": "Please identify the CMake version you are using. Boost 1.66.0 does not work on pre 3.11.0 versions because of changes in the naming scheme. If you have to use this specific version then install the last published CMake version (3.11.1) and generate the solution with it. Visual Studio 2017 will open it too but you should avoid to update your CMakeLists.txt from VS2017 then. Otherwise Boost 1.65.1 is the last known version to work flawlessly with CMake 3.10."}, {"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 0, "creation_date": 1524687014, "post_id": 50030212, "comment_id": 87077142, "body": "Your CMake version is not recent enough for your Boost version, cf. <a href=\"https://stackoverflow.com/a/42124857/2799037\">stackoverflow.com/a/42124857/2799037</a>"}, {"owner": {"reputation": 853, "user_id": 2303798, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/28076c56ad9f5da3f9ce54adf2c19e3c?s=128&d=identicon&r=PG&f=1", "display_name": "cogle", "link": "https://stackoverflow.com/users/2303798/cogle"}, "edited": false, "score": 0, "creation_date": 1524688730, "post_id": 50030212, "comment_id": 87077967, "body": "Thanks, for that link. I was unaware that CMake 3.10 did not support what I was wanting. Is there a website, besides the stackoverflow link, with the current status of what Boost is supported by CMake? Just for possible future reference."}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "edited": false, "score": 0, "creation_date": 1524690069, "post_id": 50030212, "comment_id": 87078591, "body": "I am not aware of one. But you can always have a look into <code>FindBoost.cmake</code> and search for <code>_Boost_KNOWN_VERSIONS</code> to find out what versions your CMake supports."}, {"owner": {"reputation": 853, "user_id": 2303798, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/28076c56ad9f5da3f9ce54adf2c19e3c?s=128&d=identicon&r=PG&f=1", "display_name": "cogle", "link": "https://stackoverflow.com/users/2303798/cogle"}, "edited": false, "score": 0, "creation_date": 1524691955, "post_id": 50030212, "comment_id": 87079397, "body": "If you want to make it an answer I will gladly upvote and accept it. Upgrading my CMake version rectified my problem."}, {"owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "edited": false, "score": 0, "creation_date": 1524695081, "post_id": 50030212, "comment_id": 87080400, "body": "Glad it worked :)"}], "answers": [{"comments": [{"owner": {"reputation": 16953, "user_id": 2799037, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/2uPVa.png?s=128&g=1", "display_name": "usr1234567", "link": "https://stackoverflow.com/users/2799037/usr1234567"}, "edited": false, "score": 1, "creation_date": 1524695187, "post_id": 50032021, "comment_id": 87080427, "body": "You can also check the Git log of FindBoost.cmake to see which version has been added last.<a href=\"https://gitlab.kitware.com/cmake/cmake/commits/master/Modules/FindBoost.cmake\" rel=\"nofollow noreferrer\">gitlab.kitware.com/cmake/cmake/commits/master/Modules/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3860, "user_id": 5251059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c9c608467b21bce1d709b56bf6d39d?s=128&d=identicon&r=PG&f=1", "display_name": "vre", "link": "https://stackoverflow.com/users/5251059/vre"}, "is_accepted": true, "score": 2, "last_activity_date": 1524694078, "creation_date": 1524694078, "answer_id": 50032021, "question_id": 50030212, "link": "https://stackoverflow.com/questions/50030212/cmake-unable-to-find-boost-librariesvs-2017/50032021#50032021", "title": "CMake unable to find Boost Libraries(VS 2017)", "body": "<p>Reformulating my previous comments as answer:</p>\n\n<p><code>Boost 1.66.0</code> does not work on pre <code>3.11.0</code> <code>CMake</code> versions because of changes in the naming scheme. If you have to use this specific version then you need to install a suitable <code>CMake</code> version (<code>3.11.0</code> or newer) and generate the solution with it. Otherwise <code>Boost 1.65.1</code> is the last known version to work out of the box and flawlessly with <code>CMake 3.10</code>. </p>\n\n<p>To find out what <code>Boost</code> versions your <code>CMake</code> can handle please have a look into FindBoost.cmake in Modules directory and search for <code>_Boost_KNOWN_VERSIONS</code> variable. </p>\n"}], "owner": {"reputation": 853, "user_id": 2303798, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/28076c56ad9f5da3f9ce54adf2c19e3c?s=128&d=identicon&r=PG&f=1", "display_name": "cogle", "link": "https://stackoverflow.com/users/2303798/cogle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1896, "favorite_count": 0, "accepted_answer_id": 50032021, "answer_count": 1, "score": 1, "last_activity_date": 1524694078, "creation_date": 1524685525, "question_id": 50030212, "link": "https://stackoverflow.com/questions/50030212/cmake-unable-to-find-boost-librariesvs-2017", "title": "CMake unable to find Boost Libraries(VS 2017)", "body": "<p>I am attempting to create a CMake project with Visual Studio 2017. I want to add Boost to the project. While I can find Boost, it is unable to find the required components. My CMake looks like so.</p>\n\n<pre><code># CMakeList.txt : Top-level CMake project file, do global configuration\n# and include sub-projects here.\n#\ncmake_minimum_required (VERSION 3.10)\n\nproject (\"FirstProject\")\n\n#This project heavily uses C++ 17\nset (CMAKE_CXX_STANDARD 17)\n\n#TESTING various flags to try and get it to work.\nset(Boost_USE_STATIC_LIBS        ON)\nset(Boost_USE_MULTITHREADED      ON)\nset(Boost_USE_STATIC_RUNTIME    OFF)\n\n#Error calls for setting this, but doesn't work regardless.\nset(BOOST_LIBRARYDIR \"${BOOST_ROOT}/stage/lib\")\nfind_package(Boost 1.66.0 REQUIRED COMPONENTS filesystem)\nif(Boost_FOUND)\n    message(WARNING \"HERE!!\")\nendif()\n\n\n# Include sub-projects.\nadd_subdirectory (\"TestSubProject\")\n</code></pre>\n\n<p>Given that I am Visual Studio it is compiling it like so.</p>\n\n<pre><code>cmake.exe  -G \"Ninja\" -DCMAKE_INSTALL_PREFIX:PATH=\"C:\\Users\\User\\CMakeBuilds\\Hash\\install\\x86-Debug\" \\\n-DBOOST_ROOT=\"D:/Programming_Projects/C++/Dir/ProjectDir/3rdPartyLibraries/boost_1_66_0\" \\\n-DBoost_COMPILER=\"vc141\" \\\n-DCMAKE_CXX_COMPILER=\"C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.13.26128/bin/HostX86/x86/cl.exe\" \\\n-DCMAKE_C_COMPILER=\"C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.13.26128/bin/HostX86/x86/cl.exe\" \\\n-DCMAKE_BUILD_TYPE=\"Debug\" \\\n-DCMAKE_MAKE_PROGRAM=\"C:\\PROGRAM FILES (X86)\\MICROSOFT VISUAL STUDIO\\2017\\COMMUNITY\\COMMON7\\IDE\\COMMONEXTENSIONS\\MICROSOFT\\CMAKE\\Ninja\\ninja.exe\" \"D:\\Programming_Projects\\C++\\Dir\\ProjectDir\"\n</code></pre>\n\n<p>My Boost Library directory looks like \n<a href=\"https://i.stack.imgur.com/5hFrK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5hFrK.png\" alt=\"enter image description here\"></a></p>\n\n<p>The output from Visual Studio CMake is:</p>\n\n<pre><code> CMake Warning at C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:796 (message):\n   New Boost version may have incorrect or missing dependencies and imported\n   targets\n Call Stack (most recent call first):\n   C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake(902): (_Boost_COMPONENT_DEPENDENCIES)\n   C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake(1537): (_Boost_MISSING_DEPENDENCIES)\n   CMakeLists.txt(20): (find_package)\n\n\n CMake Warning at C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:796 (message):\n   New Boost version may have incorrect or missing dependencies and imported\n   targets\n Call Stack (most recent call first):\n   C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake(902): (_Boost_COMPONENT_DEPENDENCIES)\n   C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake(1537): (_Boost_MISSING_DEPENDENCIES)\n   CMakeLists.txt(20): (find_package)\n\n\n CMake Error at C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:1923 (message):\n   Unable to find the requested Boost libraries.\n\n   Boost version: 1.66.0\n\n   Boost include path:\n   D:/Programming_Projects/C++/Dir/ProjectDir/3rdPartyLibraries/boost_1_66_0\n\n\n   Could not find the following static Boost libraries:\n\n           boost_filesystem\n\n   Some (but not all) of the required Boost libraries were found.  You may\n   need to install these additional Boost libraries.  Alternatively, set\n   BOOST_LIBRARYDIR to the directory containing Boost libraries or BOOST_ROOT\n   to the location of Boost.\nCall Stack (most recent call first):\n  CMakeLists.txt(20): (find_package)\n\n-- Configuring incomplete, errors occurred!\nSee also \"C:/Users/User/CMakeBuilds/57d076a1-4dfa-ba3f-98a5-b87b55e6d381/build/x86-Debug/CMakeFiles/CMakeOutput.log\".\n C:\\PROGRAM FILES (X86)\\MICROSOFT VISUAL STUDIO\\2017\\COMMUNITY\\COMMON7\\IDE\\COMMONEXTENSIONS\\MICROSOFT\\CMAKE\\CMake\\bin\\cmake.exe  -G \"Ninja\" -DCMAKE_INSTALL_PREFIX:PATH=\"C:\\Users\\Christopher\\CMakeBuilds\\57d076a1-4dfa-ba3f-98a5-b87b55e6d381\\install\\x86-Debug\"  -DBOOST_ROOT=\"D:/Programming_Projects/C++/Dir/ProjectDir/3rdPartyLibraries/boost_1_66_0\"  -DBoost_COMPILER=\"vc141\"  -DCMAKE_CXX_COMPILER=\"C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.13.26128/bin/HostX86/x86/cl.exe\"  -DCMAKE_C_COMPILER=\"C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.13.26128/bin/HostX86/x86/cl.exe\"  -DCMAKE_BUILD_TYPE=\"Debug\" -DCMAKE_MAKE_PROGRAM=\"C:\\PROGRAM FILES (X86)\\MICROSOFT VISUAL STUDIO\\2017\\COMMUNITY\\COMMON7\\IDE\\COMMONEXTENSIONS\\MICROSOFT\\CMAKE\\Ninja\\ninja.exe\" \"D:\\Programming_Projects\\C++\\Dir\\ProjectDir\" returned with exit code: 1\nCMake Warning at C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:796 (message):\n  New Boost version may have incorrect or missing dependencies and imported\n  targets\nCall Stack (most recent call first):\n  C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:902 (_Boost_COMPONENT_DEPENDENCIES)\n  C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:1537 (_Boost_MISSING_DEPENDENCIES)\n  CMakeLists.txt:20 (find_package)\nCMake Warning at C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:796 (message):\n  New Boost version may have incorrect or missing dependencies and imported\n  targets\nCall Stack (most recent call first):\n  C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:902 (_Boost_COMPONENT_DEPENDENCIES)\n  C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:1537 (_Boost_MISSING_DEPENDENCIES)\n  CMakeLists.txt:20 (find_package)\nCMake Error at C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.10/Modules/FindBoost.cmake:1923 (message):\n  Unable to find the requested Boost libraries.\n  Boost version: 1.66.0\n  Boost include path:\n  D:/Programming_Projects/C++/Dir/ProjectDir/3rdPartyLibraries/boost_1_66_0\n  Could not find the following static Boost libraries:\n          boost_filesystem\n  Some (but not all) of the required Boost libraries were found.  You may\n  need to install these additional Boost libraries.  Alternatively, set\n  BOOST_LIBRARYDIR to the directory containing Boost libraries or BOOST_ROOT\n  to the location of Boost.\nCall Stack (most recent call first):\n  CMakeLists.txt:20 (find_package)\n</code></pre>\n"}, {"tags": ["c++", "arrays", "file"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1524684832, "post_id": 50029968, "comment_id": 87076199, "body": "Have you done anything to see what was actually put in your array?  Why not?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1524684873, "post_id": 50029968, "comment_id": 87076219, "body": "Please extract a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. In particular, eliminate input from your example code."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 9676028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72987e269cff36cef08e7d89101ea20?s=128&d=identicon&r=PG&f=1", "display_name": "addicted_programmer", "link": "https://stackoverflow.com/users/9676028/addicted-programmer"}, "edited": false, "score": 0, "creation_date": 1524685483, "post_id": 50030087, "comment_id": 87076472, "body": "that fixed the issue!! now it show the full name and number if I typed in the first name,  however, is there any way to show the contact if I typed in the last name ?  for example if the contacts are: &quot;Holly Gaddis, 555-8878&quot; &quot;Warren Gaddis, 555-9037&quot; can I type the last name which is Gaddis and show both contacts?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 37, "user_id": 9676028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72987e269cff36cef08e7d89101ea20?s=128&d=identicon&r=PG&f=1", "display_name": "addicted_programmer", "link": "https://stackoverflow.com/users/9676028/addicted-programmer"}, "edited": false, "score": 0, "creation_date": 1524685617, "post_id": 50030087, "comment_id": 87076530, "body": "@fluy619, of course you can. It should work with your posted code."}, {"owner": {"reputation": 37, "user_id": 9676028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72987e269cff36cef08e7d89101ea20?s=128&d=identicon&r=PG&f=1", "display_name": "addicted_programmer", "link": "https://stackoverflow.com/users/9676028/addicted-programmer"}, "edited": false, "score": 0, "creation_date": 1524685707, "post_id": 50030087, "comment_id": 87076571, "body": "I tried to type in Gaddis  and show both contacts that involves the name  but the ouput is  &quot;Sorry, No matches were found!&quot;"}, {"owner": {"reputation": 37, "user_id": 9676028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72987e269cff36cef08e7d89101ea20?s=128&d=identicon&r=PG&f=1", "display_name": "addicted_programmer", "link": "https://stackoverflow.com/users/9676028/addicted-programmer"}, "edited": false, "score": 0, "creation_date": 1524685875, "post_id": 50030087, "comment_id": 87076656, "body": "It looks like the array only stores the first name which means that the other names will not be shown if the user puts their name in the input"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 37, "user_id": 9676028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72987e269cff36cef08e7d89101ea20?s=128&d=identicon&r=PG&f=1", "display_name": "addicted_programmer", "link": "https://stackoverflow.com/users/9676028/addicted-programmer"}, "edited": false, "score": 0, "creation_date": 1524686659, "post_id": 50030087, "comment_id": 87076988, "body": "@fluy619, since you accepted the answer, is it fair to assume that your questions/doubts have been answered?"}, {"owner": {"reputation": 37, "user_id": 9676028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72987e269cff36cef08e7d89101ea20?s=128&d=identicon&r=PG&f=1", "display_name": "addicted_programmer", "link": "https://stackoverflow.com/users/9676028/addicted-programmer"}, "edited": false, "score": 0, "creation_date": 1524686840, "post_id": 50030087, "comment_id": 87077068, "body": "yes sir,  I only need to read to the end of the file,  your method only reads the first line of the file to the array this is my only concern now"}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1524689158, "last_edit_date": 1524689158, "creation_date": 1524685037, "answer_id": 50030087, "question_id": 50029968, "link": "https://stackoverflow.com/questions/50029968/how-do-i-use-a-file-to-populate-the-array-and-compare-it-with-user-input-c/50030087#50030087", "title": "how do I use a file to populate the array and compare it with user input c++", "body": "<p>When you use</p>\n\n<pre><code>inputFile &gt;&gt; contacts[count]\n</code></pre>\n\n<ol>\n<li>Leading whitespace characters are discarded.</li>\n<li>Non-whitespace characters are read into <code>contants[count]</code>.</li>\n<li>Reading stops when a whitespace character is encountered.</li>\n</ol>\n\n<p>That explains your output.</p>\n\n<p>You need to use <a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/get\" rel=\"nofollow noreferrer\"><code>istream::get</code></a> instead.</p>\n\n<pre><code>while (count &lt; arraySize &amp;&amp; inputFile.get(contacts[count], length) )\n    count++;\n</code></pre>\n\n<hr>\n\n<h3>In response to OP's comment</h3>\n\n<p>The above should all the lines of the file up to <code>arraySize</code> number of lines.</p>\n\n<p>You could add some debugging output to troubleshoot the problem.</p>\n\n<pre><code>while (count &lt; arraySize &amp;&amp; inputFile.get(contacts[count], length) )\n{\n    std::cout &lt;&lt; \"Read \" &lt;&lt; count+1 &lt;&lt; \"-th line.\\n\" &lt;&lt; \"\\t\" &lt;&lt; contants[count] &lt;&lt; \"\\n\";\n    count++;\n}\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 9676028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f72987e269cff36cef08e7d89101ea20?s=128&d=identicon&r=PG&f=1", "display_name": "addicted_programmer", "link": "https://stackoverflow.com/users/9676028/addicted-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 50030087, "answer_count": 1, "score": -3, "last_activity_date": 1524689158, "creation_date": 1524684485, "question_id": 50029968, "link": "https://stackoverflow.com/questions/50029968/how-do-i-use-a-file-to-populate-the-array-and-compare-it-with-user-input-c", "title": "how do I use a file to populate the array and compare it with user input c++", "body": "<p>I wrote a code to populate an array from a file \nand then use that array to compare it with the user input \nThe program should ask the user to enter a name or partial name to search for in the\narray\nhere is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;iomanip&gt;\n#include &lt;fstream&gt;\nusing namespace std;\nint main()\n{\n    bool found = false;\n    const int arraySize = 35;\n    const int length = 100;\n    char contacts[arraySize][length];\n    int count = 0;              // Loop counter variable\n    ifstream inputFile;         // Input file stream object\n\n    inputFile.open(\"input.txt\"); // Open the file.\n\n                                   // Read the numbers from the file into the array.\n                                   // After this loop executes, the count variable will hold\n                                   // the number of values that were stored in the array.\n    while (count &lt; arraySize &amp;&amp; inputFile &gt;&gt; contacts[count])\n        count++;\n    // Close the file.\n    inputFile.close();\n\n\n    char search[length];                        \n    char *fileContact = nullptr;        \n    int index;  \n    cout &lt;&lt; \"To search for your contact's number \\nplease enter a name or partial name of the person.\\n\";\n    cin.getline(search, length);                            \n    for (index = 0; index &lt; arraySize; index++)\n    {\n        fileContact = strstr(contacts[index], search);\n        if (fileContact != nullptr)\n        {\n            cout &lt;&lt; contacts[index] &lt;&lt; endl;        \n            found = true;\n        }\n    }\n    if (!found) cout &lt;&lt; \"Sorry, No matches were found!\";\n    return 0;\n}\n</code></pre>\n\n<p>and the names in the file are</p>\n\n<p>\"Alejandra Cruz, 555-1223\"</p>\n\n<p>\"Joe Looney, 555-0097\"</p>\n\n<p>\"Geri Palmer, 555-8787\"</p>\n\n<p>\"Li Chen, 555-1212\"</p>\n\n<p>\"Holly Gaddis, 555-8878\"</p>\n\n<p>\"Sam Wiggins, 555-0998\"</p>\n\n<p>\"Bob Kain, 555-8712\"</p>\n\n<p>\"Tim Haynes, 555-7676\"</p>\n\n<p>\"Warren Gaddis, 555-9037\"</p>\n\n<p>\"Jean James, 555-4939\"</p>\n\n<p>\"Ron Palmer, 555-2783\"</p>\n\n<p>so the code works, but the problem is\nwhen I write Alejandra for example \nthe output is: \"Alejandra\nthe output is supposed to show the full name and the number: \n\"Alejandra Cruz, 555-1223\"</p>\n\n<p>does anyone know how to fix this? \nthanks!! </p>\n"}, {"tags": ["c++", "list", "for-loop", "append"], "comments": [{"owner": {"reputation": 1016, "user_id": 4386320, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a7e9073850272ef3bd7da56257f014fa?s=128&d=identicon&r=PG", "display_name": "Poeta Kodu", "link": "https://stackoverflow.com/users/4386320/poeta-kodu"}, "edited": false, "score": 1, "creation_date": 1524684421, "post_id": 50029899, "comment_id": 87076024, "body": "If your implementation allows it: use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a>"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1524685193, "post_id": 50029899, "comment_id": 87076352, "body": "Why do you need any complicate structure but a simple array when you know in advance how many elements you are going to store? That said, please read a tutorial on C++, the different container classes are explained there."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8636723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66321e17d06c4ec0483387e3349f4b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Vitesze", "link": "https://stackoverflow.com/users/8636723/vitesze"}, "edited": false, "score": 0, "creation_date": 1524684664, "post_id": 50029984, "comment_id": 87076131, "body": "Thanks, it&#39;s not for Arduino but it&#39;s a highly similar product (Particle). I&#39;ll have a look which of these suggestions are available in my case."}, {"owner": {"reputation": 4599, "user_id": 2055064, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/815c89ab1784fd780fe7faf44ebfc79f?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2055064/thomas"}, "edited": false, "score": 1, "creation_date": 1524684831, "post_id": 50029984, "comment_id": 87076198, "body": "since its fixed size consider using <code>std::array&lt;int,20&gt;</code>"}, {"owner": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "edited": false, "score": 0, "creation_date": 1524684927, "post_id": 50029984, "comment_id": 87076244, "body": "Ah yes. I own the one from the Kickstarter campain (different name). Try the &lt;vector&gt; version, maybe they already added the STL. As Thomas wrote: std::array&lt;int, 20&gt; is a fixed length container with no more overhead than int d[20] but it offers iterators and a .size() member."}], "tags": [], "owner": {"reputation": 1574, "user_id": 6172310, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T2-U1BpQmAw/AAAAAAAAAAI/AAAAAAAABXE/ZiY6MpBP3ek/photo.jpg?sz=128", "display_name": "Andreas H.", "link": "https://stackoverflow.com/users/6172310/andreas-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1524684539, "creation_date": 1524684539, "answer_id": 50029984, "question_id": 50029899, "link": "https://stackoverflow.com/questions/50029899/c-adding-numbers-to-a-list-like-python/50029984#50029984", "title": "C++ - Adding numbers to a list? (like Python)", "body": "<p>If you have to go with plain C(++) use an array of integer values:</p>\n\n<pre><code>int d[20];\n\nfor(int i = 0; i &lt; 20; ++i)\n  d[i] = measureValue();\n</code></pre>\n\n<p>If the STL (Standard Template Library) is available, use a std::vector:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstd::vector&lt;int&gt; d;\n\nfor(int i = 0; i &lt; 20; ++i)\n  d.push_back(measureValue());\n</code></pre>\n\n<p>If you are writing for an arduino, you may want to install Standard C++ for Arduino (see <a href=\"https://github.com/maniacbug/StandardCplusplus/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/maniacbug/StandardCplusplus/blob/master/README.md</a>)</p>\n"}], "owner": {"reputation": 23, "user_id": 8636723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66321e17d06c4ec0483387e3349f4b5d?s=128&d=identicon&r=PG&f=1", "display_name": "Vitesze", "link": "https://stackoverflow.com/users/8636723/vitesze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524684539, "creation_date": 1524684167, "last_edit_date": 1524684465, "question_id": 50029899, "link": "https://stackoverflow.com/questions/50029899/c-adding-numbers-to-a-list-like-python", "title": "C++ - Adding numbers to a list? (like Python)", "body": "<p>I'm very new to programming, but am trying to learn both Python and C++ (One is work-related, other one is more of a spare-time thing). I use the following code in C++ to take measurements with a parking sensor:</p>\n\n<pre><code>&gt; for (i=0; i&lt;20; i++) {\n&gt;     digitalWrite(TRIG1, LOW);\n&gt;     delay(2);\n&gt;     digitalWrite(TRIG1, HIGH);\n&gt;     delay(10);\n&gt;     digitalWrite(TRIG1, LOW);\n&gt;     d = pulseIn(ECHO1, HIGH);\n&gt;     d = d/58;\n&gt;     delay(13);\n&gt;     }\n</code></pre>\n\n<p>This should measure the distance and store it in <code>d</code>. It will do this 20 times in a timespan of 500ms. I now want to store each of these 20 measurements and obtain the median value from it.</p>\n\n<p>In Python, I can create a list, and then append numbers to it. Is there any such equivalent in C++? If not, what other method would be recommended to take a median value, without writing terribly long code?</p>\n"}, {"tags": ["java", "c++", "winapi", "java-native-interface"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1524685537, "post_id": 50029839, "comment_id": 87076498, "body": "Your C++ code needs to link to <code>Advapi32.lib</code>, either through a linker parameter in the project options, or via a <code>#pragma comment(lib)</code> statement in the C++ code itself. Otherwise, you can use the Win32 API <code>LoadLibrary()</code> and <code>GetProcAddress()</code> functions to get a pointer to <code>GetUserNameA()</code> directly from <code>Advapi32.dll</code> at runtime instead of linking to <code>Advapi32.lib</code> at compile-time"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524685677, "post_id": 50029839, "comment_id": 87076557, "body": "On the other hand, why use <code>GetUserName()</code> in C++ at all? Java has its own access to the username: <a href=\"https://stackoverflow.com/questions/797549/\">Get login username in java</a>"}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524685719, "post_id": 50029839, "comment_id": 87076576, "body": "I have seen this solution in other question. However i myself have no idea what this Advapi32.lib does. Could you please tell me why is this important in my case and where do i look to get the exact command/code to perform the task. I am super noob in cpp and JNI both sorry. :("}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1524685822, "post_id": 50029839, "comment_id": 87076630, "body": "This has nothing to do with JNI. It is how C++ compilers\\linkers work in general. <code>Advapi32.lib</code> is the import library for <code>Advapi32.dll</code>, it tells the linker which functions are exported from the DLL and how.  The linker uses import libs to resolve DLL function calls made by the C++ code."}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524685837, "post_id": 50029839, "comment_id": 87076636, "body": "This is a proof of concept in order to learn about java native api, later on I need to fetch SID and something to do with native api. Not yet there. So I need to do this in cpp only. But thank you for the link as well :D"}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524685952, "post_id": 50029839, "comment_id": 87076685, "body": "Ok thanks for the explanation on Advapi32.lib role. I will try to find a way to link it now."}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524686826, "post_id": 50029839, "comment_id": 87077064, "body": "Ok @RemyLebeau I just added #pragma comment(lib,&quot;advapi32.lib&quot;) line in my cpp and it compiled fine, just as you suggested. Your solution works great. May I request you to answer that so that I can officially accept it. Many thanks sir."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1524688518, "post_id": 50029839, "comment_id": 87077865, "body": "I posted a more detailed answer for you"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1524701199, "post_id": 50029839, "comment_id": 87082002, "body": "You can get a lot of user information via JAAS: see <a href=\"https://docs.oracle.com/javase/8/docs/jre/api/security/jaas/spec/com/sun/security/auth/module/NTSystem.html\" rel=\"nofollow noreferrer\"><code>com.sun.security.auth.module.NTSystem</code></a>."}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1524733892, "post_id": 50029839, "comment_id": 87094248, "body": "ok @EJP I will look into JAAS. It seems it has lot of user SID etc meaningful information for me, in the first look itself. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "edited": false, "score": 0, "creation_date": 1524733953, "post_id": 50030911, "comment_id": 87094283, "body": "Thank you very much for the detailed answer."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1524690196, "last_edit_date": 1524690196, "creation_date": 1524688497, "answer_id": 50030911, "question_id": 50029839, "link": "https://stackoverflow.com/questions/50029839/fetching-windows-current-user-with-java-native-interfaces/50030911#50030911", "title": "fetching windows current user with java native interfaces", "body": "<p>Your code <strong>compiles</strong> fine.  You are actually getting a <strong>linker</strong> error, not a <strong>compiler</strong> error.</p>\n\n<p>From the error message, you can see that your C++ code is trying to call a  <code>GetUserNameA()</code> function.  <code>GetUserName()</code> is a preprocessor <code>#define</code> macro in <code>winbase.h</code> (which is included by <code>windows.h</code>) that resolves to <code>GetUserNameA()</code> when <code>UNICODE</code> is not defined:</p>\n\n<pre><code>WINADVAPI\nBOOL\nWINAPI\nGetUserNameA (\n    __out_ecount_part_opt(*pcbBuffer, *pcbBuffer) LPSTR lpBuffer,\n    __inout LPDWORD pcbBuffer\n    );\nWINADVAPI\nBOOL\nWINAPI\nGetUserNameW (\n    __out_ecount_part_opt(*pcbBuffer, *pcbBuffer) LPWSTR lpBuffer,\n    __inout LPDWORD pcbBuffer\n    );\n#ifdef UNICODE\n#define GetUserName  GetUserNameW\n#else\n#define GetUserName  GetUserNameA // &lt;-- HERE!\n#endif // !UNICODE\n</code></pre>\n\n<p>As there is no <code>GetUserNameA()</code> function implemented in your C++ code, but there is at least a declaration available (from <code>winbase.h</code>), the compiler emits machine code that references <code>GetUserNameA()</code> externally (via a symbol named <code>__imp_GetUserNameA</code>).  When the linker is then invoked after compiling is finished, the linker outputs the \"unresolved\" error because it is not able to find an implementation of any <code>GetUserNameA</code> function to satisfy that reference.</p>\n\n<p><code>GetUserNameA()</code> is a Win32 API function implemented in <code>Advapi32.dll</code>.  You need to link to <code>Advapi32.lib</code> from your compiler's Windows SDK so the linker can find the implementation of <code>GetUserNameA()</code>.</p>\n\n<p>One way to do that is to add a <code>#pragma comment(lib)</code> statement to your C++ code, eg:</p>\n\n<pre><code>#include \"Sample1.h\"\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n#pragma comment(lib, \"Advapi32.lib\") // &lt;-- add this!\n\nJNIEXPORT jstring JNICALL Java_Sample1_fetchCurrentUserName(JNIEnv *env, jobject obj) {\n    char acUserName[100] = {};\n    DWORD nUserName = sizeof(acUserName);\n    if (GetUserNameA(acUserName, &amp;nUserName)) {\n        cout &lt;&lt; \"User name is \" &lt;&lt; acUserName &lt;&lt; \".\" &lt;&lt; endl;\n    }\n    else {\n        DWORD dwErr = GetLastError();\n        cout &lt;&lt; \"Unable to get User name, error \" &lt;&lt; dwErr &lt;&lt; \".\" &lt;&lt; endl;\n    }\n\n    return env-&gt;NewStringUTF(acUserName);\n}\n\nvoid main() {}\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>#include \"Sample1.h\"\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n#pragma comment(lib, \"Advapi32.lib\")\n\nJNIEXPORT jstring JNICALL Java_Sample1_fetchCurrentUserName(JNIEnv *env, jobject obj) {\n    DWORD nUserName = 100, dwErr;\n    std::vector&lt;char&gt; acUserName(nUserName);\n    do {\n        if (GetUserNameA(&amp;acUserName[0], &amp;nUserName)) {\n            cout &lt;&lt; \"User name is \" &lt;&lt; &amp;acUserName[0] &lt;&lt; \".\" &lt;&lt; endl;\n            break;\n        }\n        dwErr = GetLastError();\n        if (dwErr != ERROR_INSUFFICIENT_BUFFER) {\n            cout &lt;&lt; \"Unable to get the User name, error \" &lt;&lt; dwErr &lt;&lt; \".\" &lt;&lt; endl;\n            break;\n        }\n        acUserName.resize(nUserName);\n    }\n    while (true);\n\n    return env-&gt;NewStringUTF(&amp;acUserName[0]);\n}\n\nvoid main() {}\n</code></pre>\n\n<p>That being said, <code>NewStringUTF()</code> requires an input string in <a href=\"https://docs.oracle.com/javase/10/docs/api/java/io/DataInput.html#modified-utf-8\" rel=\"nofollow noreferrer\"><strong>modified</strong> UTF-8</a> format.  However, <code>GetUserNameA()</code> outputs ANSI format (hence the <code>A</code> in its name), not in UTF-8, let alone <em>modified</em> UTF-8.  Windows has no concept of <em>modified</em> UTF-8 at all.  Your code will work correctly only if the username does not contain any non-ASCII characters in it.</p>\n\n<p>Your C++ code really should be calling <code>GetUserNameW()</code> instead, which outputs in UTF-16 format.  Then you can use <code>NewString()</code> instead of <code>NewStringUTF()</code> (Java strings use UTF-16 anyway), eg:</p>\n\n<pre><code>#include \"Sample1.h\"\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\n#pragma comment(lib, \"Advapi32.lib\")\n\nJNIEXPORT jstring JNICALL Java_Sample1_fetchCurrentUserName(JNIEnv *env, jobject obj) {\n    WCHAR acUserName[100];\n    DWORD nUserName = 100;\n    if (GetUserNameW(acUserName, &amp;nUserName)) {\n        --nUserName; // ignore the null terminator\n        wcout &lt;&lt; L\"User name is \" &lt;&lt; acUserName &lt;&lt; L\".\" &lt;&lt; endl;\n    }\n    else\n    {\n        nUserName = 0;\n        DWORD dwErr = GetLastError();\n        cout &lt;&lt; \"Unable to get the User name, error \" &lt;&lt; dwErr &lt;&lt; \".\" &lt;&lt; endl;\n    }\n\n    return env-&gt;NewString(reinterpret_cast&lt;jchar*&gt;(acUserName), nUserName);\n}\n\nvoid main() {}\n</code></pre>\n\n<p>Alternatively:</p>\n\n<pre><code>#include \"Sample1.h\"\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\n#pragma comment(lib, \"Advapi32.lib\")\n\nJNIEXPORT jstring JNICALL Java_Sample1_fetchCurrentUserName(JNIEnv *env, jobject obj) {\n    DWORD nUserName = 100, dwErr;\n    std::vector&lt;WCHAR&gt; acUserName(nUserName);\n    do {\n        if (GetUserNameW(&amp;acUserName[0], &amp;nUserName)) {\n            --nUserName; // ignore the null terminator\n            wcout &lt;&lt; L\"User name is \" &lt;&lt; &amp;acUserName[0] &lt;&lt; L\".\" &lt;&lt; endl;\n            break;\n        }\n        dwErr = GetLastError();\n        if (dwErr != ERROR_INSUFFICIENT_BUFFER) {\n            nUserName = 0;\n            cout &lt;&lt; \"Unable to get the User name, error \" &lt;&lt; dwErr &lt;&lt; \".\" &lt;&lt; endl;\n            break;\n        }\n        acUserName.resize(nUserName);\n    }\n    while (true);\n\n    return env-&gt;NewString(reinterpret_cast&lt;jchar*&gt;(&amp;acUserName[0]), nUserName);\n}\n\nvoid main() {}\n</code></pre>\n"}], "owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 50030911, "answer_count": 1, "score": 2, "last_activity_date": 1524690196, "creation_date": 1524683888, "last_edit_date": 1592644375, "question_id": 50029839, "link": "https://stackoverflow.com/questions/50029839/fetching-windows-current-user-with-java-native-interfaces", "title": "fetching windows current user with java native interfaces", "body": "<p>I am trying to make a proof of concept where in a cpp program I fetch the windows username and then call this program from a java code, using Java native interface(JNI). Now what i have so far is, a sample JNI hello world program which is able to compile and print Hello world or what what ever parameter I set up. Now in a separate cpp snippet i am able to fetch the current username and it works as well; looks as follows:</p>\n<pre><code>#include &lt;iostream&gt;\n#include &lt;windows.h&gt;\nusing namespace std;\nint main()\n{\n    char acUserName[100];\n    DWORD nUserName = sizeof(acUserName);\n    if (GetUserName(acUserName, &amp;nUserName)) {\n        cout &lt;&lt; &quot;User name is &quot; &lt;&lt; acUserName &lt;&lt; &quot;.&quot; &lt;&lt; endl;\n        cin.get();\n    }\n    return 0;\n}\n</code></pre>\n<p>When compiled and executed using my G++ in command prompt it prints the current username correctly.</p>\n<p>Now i just want to combine the two programs. When I do that as follows</p>\n<pre><code>public class Sample1\n {\n    public native String fetchCurrentUserName();\n \n    public static void main(String[] args)\n    {\n     System.loadLibrary(&quot;Sample1&quot;);\n     Sample1 sample = new Sample1();     \n     String  userName   = sample.fetchCurrentUserName();       \n     System.out.println(&quot;userName: &quot; + userName);\n     \n    }\n }\n</code></pre>\n<p>This is the java part and the cpp part is as follows:</p>\n<pre><code> #include &quot;Sample1.h&quot;\n #include &lt;string.h&gt;\n #include &lt;iostream&gt;\n #include &lt;windows.h&gt;\n using namespace std;\n\n\n  JNIEXPORT jstring JNICALL Java_Sample1_fetchCurrentUserName\n   (JNIEnv *env, jobject obj) {\n\n    char acUserName[100];\n    DWORD nUserName = sizeof(acUserName);\n    if (GetUserName(acUserName, &amp;nUserName)) {\n        cout &lt;&lt; &quot;User name is &quot; &lt;&lt; acUserName &lt;&lt; &quot;.&quot; &lt;&lt; endl;\n        cin.get();\n    }\n\n    const char* userName = acUserName;\n    //const char* userName = &quot;acUserName&quot;;\n    return env-&gt;NewStringUTF(userName);\n }\n \n void main(){}\n</code></pre>\n<p>This does not compile anymore, it says</p>\n<pre><code>Sample1.obj : error LNK2019: unresolved external symbol __imp_GetUserNameA referenced in function Java_Sample1_fetchCurrentUserName\nSample1.dll : fatal error LNK1120: 1 unresolved externals\n</code></pre>\n<p>I used the following command to compile the JNI code.</p>\n<p>cl -I&quot;C:\\Program Files\\Java\\jdk1.8.0_131\\include&quot; -I&quot;C:\\Program Files\\Java\\jdk1.8.0_131\\include\\win32&quot; -LD Sample1.cpp -FeSample1.dll</p>\n<p>as per tutorial from <a href=\"https://www.ibm.com/developerworks/java/tutorials/j-jni/j-jni.html\" rel=\"nofollow noreferrer\">https://www.ibm.com/developerworks/java/tutorials/j-jni/j-jni.html</a>. Now from few other questions in stack overflow it seems somehow my program is unable to link the windows library or leader somehow. But I have no clue as to how this can be solved. Any body have any bright ideas? Please make my day! Thank you for your time :D I looked into <a href=\"https://stackoverflow.com/questions/45904957/linking-of-dll-file-in-jni\">Linking of dll file in JNI</a> which is very relevant for my question. But not sure if the solutions are applicable to me.</p>\n<h3>Edit</h3>\n<p><a href=\"https://stackoverflow.com/questions/22757314/error-lnk1120-5-unresolved-externals\">error: LNK1120: 5 unresolved externals</a> This question had similar problem and it seems to have same solution which is as suggested by Remy to link with Advapi32.lib. At least now i learned few new things like #pragma comments and the role of Advapi32 library. Many thanks!</p>\n"}, {"tags": ["c++", "sparse-matrix", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4382467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9f8f4d383527344cf263017792a912?s=128&d=identicon&r=PG", "display_name": "Satadru", "link": "https://stackoverflow.com/users/4382467/satadru"}, "edited": false, "score": 0, "creation_date": 1524719525, "post_id": 50034783, "comment_id": 87086496, "body": "yes! it works now. Problem lies on data type ( float and double ). I converted all vectors in double. And now it works fine.  Thanks for your input !"}], "tags": [], "owner": {"reputation": 9447, "user_id": 2899559, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a7b94e56f041fd09320f9763d82861af?s=128&d=identicon&r=PG&f=1", "display_name": "Avi Ginsburg", "link": "https://stackoverflow.com/users/2899559/avi-ginsburg"}, "is_accepted": true, "score": 2, "last_activity_date": 1524716450, "creation_date": 1524716450, "answer_id": 50034783, "question_id": 50029608, "link": "https://stackoverflow.com/questions/50029608/error-no-matching-function-for-call-to-conjugate-gradient-in-eigen-library/50034783#50034783", "title": "error: no matching function for call to &#39;conjugate_gradient&#39; in Eigen Library", "body": "<p>You really need to show this as an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>. If you had mocked it up a bit more, the following could have been your result:</p>\n\n<pre><code>#include &lt;Eigen/Core&gt;\n#include &lt;Eigen/Sparse&gt;\n\nusing namespace Eigen;\n\nint main()\n{\n    int truncatedSize = 50;\n    SparseMatrix&lt;double&gt; A(truncatedSize, truncatedSize);\n\n//  We have no idea what TruncatedGlMatrix or TruncatedForce are...\n//  for (int i = 0; i &lt; truncatedSize; i++)\n//  {\n//      for (int j = 0; j &lt; truncatedSize; j++)\n//      {\n//          A.insert(i, j) = TruncatedGlMatrix[i][j];\n//      }\n//  }\n\n    VectorXf V(truncatedSize);\n//  for (int i = 0; i &lt; truncatedSize; i++)\n//  {\n//      V(i) = TruncatedForce[i][1];\n//  }\n\n    // solve Ax = b\n    ConjugateGradient&lt;SparseMatrix&lt;double&gt;, Lower | Upper&gt; cg;\n    cg.compute(A);\n\n    VectorXf xa(truncatedSize);\n    xa = cg.solve(V);\n    return 0;\n}\n</code></pre>\n\n<p>I get a different error from you, but that may be because I had to add some guesswork as to what you're actually looking at. In the code above, the problem is that you're mixing <code>double</code> and <code>float</code> scalar types. Namely,</p>\n\n<pre><code>xa = cg.solve(V);\n</code></pre>\n\n<p><code>xa</code> and <code>V</code> are vectors of <code>float</code>s, while <code>cg</code> and <code>A</code> have <code>double</code> as their scalar type. You must explicitly cast between these, so replacing that line with</p>\n\n<pre><code>xa = cg.solve(V.cast&lt;double&gt;()).cast&lt;float&gt;();\n</code></pre>\n\n<p>would solve the issue that my MCVE has (which might also be your problem, I don't know enough to tell).</p>\n"}], "owner": {"reputation": 27, "user_id": 4382467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b9f8f4d383527344cf263017792a912?s=128&d=identicon&r=PG", "display_name": "Satadru", "link": "https://stackoverflow.com/users/4382467/satadru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 50034783, "answer_count": 1, "score": -1, "last_activity_date": 1524716450, "creation_date": 1524682924, "last_edit_date": 1524688581, "question_id": 50029608, "link": "https://stackoverflow.com/questions/50029608/error-no-matching-function-for-call-to-conjugate-gradient-in-eigen-library", "title": "error: no matching function for call to &#39;conjugate_gradient&#39; in Eigen Library", "body": "<p>I am getting following error while compiling c++ coding having Eigen library</p>\n\n<blockquote>\n  <p>error: no matching function       for call to 'conjugate_gradient' in\n  Eigen Library</p>\n</blockquote>\n\n<p>Here is the code below:</p>\n\n<pre><code>SparseMatrix&lt;double&gt; A(truncatedSize,truncatedSize);\nfor(int i=0;i&lt;truncatedSize;i++)\n{\n    for(int j=0;j&lt;truncatedSize;j++)\n    {\n        A.insert(i,j)=TruncatedGlMatrix[i][j];\n    }\n}\n\nVectorXf V(truncatedSize);\nfor(int i=0;i&lt;truncatedSize;i++)\n{       \n    V(i)=TruncatedForce[i][1];\n}\n\n// solve Ax = b\nConjugateGradient&lt;SparseMatrix&lt;double&gt;, Lower|Upper&gt; cg;\ncg.compute(A);\n\nVectorXf xa(truncatedSize);\nxa = cg.solve(V);\n</code></pre>\n"}, {"tags": ["c++", "qt", "openssl", "qsslsocket"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1524684291, "post_id": 50029549, "comment_id": 87075962, "body": "&quot;I am using Qt5.9.0&quot; - I can understand using the current LTS branch of Qt (5.9) over the latest version, but you <i>really</i> want to be using the latest bug-fix version of that branch (Qt 5.9.5 at the time of writing) - there are <i>many</i> important bug fixes and performance improvements compared to 5.9.0.   Just a piece of advice :-)"}], "answers": [{"tags": [], "owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "is_accepted": true, "score": 0, "last_activity_date": 1524683953, "creation_date": 1524683953, "answer_id": 50029847, "question_id": 50029549, "link": "https://stackoverflow.com/questions/50029549/qsslsocket-cannot-resolve-and-permission-denied-error/50029847#50029847", "title": "QSslSocket cannot resolve and Permission Denied error", "body": "<ol>\n<li><p>OpenSSL 1.1.0 is only supported from Qt 5.10. Please use OpenSSL 1.0.2l, you can use the pre-built package that matches your compiler from <a href=\"https://www.npcglib.org/~stathis/blog/precompiled-openssl/\" rel=\"nofollow noreferrer\">npcglib</a>.</p></li>\n<li><p>Your <code>LIBS +=</code> includes are correct, but it appears your compute has no permission or the libraries are not found. It cannot be told why this error occurs. Verify the existence of the libraries in the folder and that your user has access.</p></li>\n<li><p><code>QNetworkReply *QNetworkAccessManager::get(const QNetworkRequest &amp;request)</code>is an asynchron call. Your function <code>QString Commands::getPublicIp()</code> will probably return an empty QString before the request has finished.</p></li>\n</ol>\n"}], "owner": {"reputation": 117, "user_id": 7392005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/165d5e246b28ad0d95498b8f6815c274?s=128&d=identicon&r=PG", "display_name": "user7392005", "link": "https://stackoverflow.com/users/7392005/user7392005"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "accepted_answer_id": 50029847, "answer_count": 1, "score": 0, "last_activity_date": 1524683953, "creation_date": 1524682679, "last_edit_date": 1592644375, "question_id": 50029549, "link": "https://stackoverflow.com/questions/50029549/qsslsocket-cannot-resolve-and-permission-denied-error", "title": "QSslSocket cannot resolve and Permission Denied error", "body": "<p>The error messages are the following:</p>\n<blockquote>\n<p>qt.network.ssl: QSslSocket: cannot resolve TLSv1_1_client_method</p>\n<p>qt.network.ssl: QSslSocket: cannot resolve TLSv1_2_client_method</p>\n<p>qt.network.ssl: QSslSocket: cannot resolve TLSv1_1_server_method</p>\n<p>qt.network.ssl: QSslSocket: cannot resolve TLSv1_2_server_method</p>\n<p>qt.network.ssl: QSslSocket: cannot resolve SSL_select_next_proto</p>\n<p>qt.network.ssl: QSslSocket: cannot resolve SSL_CTX_set_next_proto_select_cb</p>\n<p>qt.network.ssl: QSslSocket: cannot resolve SSL_get0_next_proto_negotiated</p>\n<p>qt.network.ssl: QSslSocket: cannot resolve SSL_set_alpn_protos</p>\n<p>qt.network.ssl: QSslSocket: cannot resolve SSL_CTX_set_alpn_select_cb</p>\n<p>qt.network.ssl: QSslSocket: cannot resolve SSL_get0_alpn_selected</p>\n</blockquote>\n<p>I run a Windows 7 machine, with openssl 1.1.0 installed on my D: drive. And I am using Qt5.9.0</p>\n<p>My .pro file</p>\n<pre><code>QT += core network\nQT -= gui\n\nCONFIG += c++11 console\nCONFIG -= app_bundle\n\n# The following define makes your compiler emit warnings if you use\n# any feature of Qt which as been marked deprecated (the exact warnings\n# depend on your compiler). Please consult the documentation of the\n# deprecated API in order to know how to port your code away from it.\nDEFINES += QT_DEPRECATED_WARNINGS\n\n# You can also make your code fail to compile if you use deprecated APIs.\n# In order to do so, uncomment the following line.\n# You can also select to disable deprecated APIs only up to a certain version of Qt.\n#DEFINES += QT_DISABLE_DEPRECATED_BEFORE=0x060000    # disables all the APIs deprecated before Qt 6.0.0\n\nSOURCES += main.cpp \\\n    server.cpp \\\n    commands.cpp \\\n    packet.cpp\n\nHEADERS += \\\n    server.h \\\n    commands.h \\\n    packet.h\n\nINCLUDEPATH += D:\\OpenSSL-Win32\\include\\openssl\nINCLUDEPATH += D:\\OpenSSL-Win32\\bin\nLIBS += -L D:\\OpenSSL-Win32\\lib -llibcrypto\nLIBS += -L D:\\OpenSSL-Win32\\lib -llibssl\n</code></pre>\n<p>And this is the code that triggers the error:</p>\n<pre><code>QString Commands::getPublicIp()\n{\n\n    QString temp;\n\n    QNetworkAccessManager networkManager;\n    QUrl url(&quot;http://api.ipify.org&quot;);\n\n    QString query = &quot;format=json&quot;;\n\n    url.setQuery(query);\n\n    QNetworkReply* reply = networkManager.get(QNetworkRequest(url));\n\n    QObject::connect(\n                reply\n                , &amp;QNetworkReply::finished\n                , [&amp;](){\n\n                        if(reply-&gt;error() != QNetworkReply::NoError) {\n                            return QString();\n                        } else {\n                                QJsonObject jsonObject= QJsonDocument::fromJson(reply-&gt;readAll()).object();\n                                QHostAddress ip(jsonObject[&quot;ip&quot;].toString());\n\n                                temp = QString(&quot;002 &quot; + ip.toString());\n                        }\n\n                reply-&gt;deleteLater();\n                }\n            );\n\n    return temp;\n\n}\n</code></pre>\n<p>I kept getting the qt.network.ssl errors, and after linking openssl I keep getting a compile error:</p>\n<blockquote>\n<p>:-1: error: cannot find D:\\OpenSSL-Win32\\lib: Permission denied</p>\n<p>:-1: error: cannot find -llibssl</p>\n<p>collect2.exe:-1: error: error: ld returned 1 exit status</p>\n</blockquote>\n<p>Even though I am not currently using OpenSSL, I am willing to use it later.</p>\n"}, {"tags": ["c++", "encryption", "aes-gcm", "initialization-vector"], "comments": [{"owner": {"reputation": 11, "user_id": 9699698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ae9d36bbcfd4e00ca90aed8532e1ea?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/9699698/chris"}, "edited": false, "score": 0, "creation_date": 1524772005, "post_id": 50029530, "comment_id": 87117886, "body": "Some additional information that&#39;ll be helpful. I&#39;m using OpenSSL version 1.0.1e dated back to Feb 2013."}, {"owner": {"reputation": 11, "user_id": 9699698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ae9d36bbcfd4e00ca90aed8532e1ea?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/9699698/chris"}, "edited": false, "score": 0, "creation_date": 1524772115, "post_id": 50029530, "comment_id": 87117950, "body": "I&#39;ve seen functions written specifically for setting up a GCM context. Though I haven&#39;t seen an example using them. They&#39;re listed at the link shown below: <a href=\"http://docs.huihoo.com/doxygen/openssl/1.0.1c/gcm128_8c.html\" rel=\"nofollow noreferrer\">docs.huihoo.com/doxygen/openssl/1.0.1c/gcm128_8c.html</a>"}], "owner": {"reputation": 11, "user_id": 9699698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4ae9d36bbcfd4e00ca90aed8532e1ea?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/9699698/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524682597, "creation_date": 1524682597, "question_id": 50029530, "link": "https://stackoverflow.com/questions/50029530/openssl-gcm-encryption-using-16-byte-iv", "title": "OpenSSL GCM Encryption using 16-byte IV", "body": "<p>In reference to the github project:\n<a href=\"https://github.com/majek/openssl/blob/master/demos/evp/aesgcm.c\" rel=\"nofollow noreferrer\">https://github.com/majek/openssl/blob/master/demos/evp/aesgcm.c</a></p>\n\n<p>And another StackOverflow question:\n<a href=\"https://stackoverflow.com/questions/39088633/unable-to-set-iv-for-aes-gcm-using-openssl\">Unable to set IV for aes gcm using openssl</a></p>\n\n<p>I'm attempting to use OpenSSL to perform GCM encryption with a 128-bit IV. The default IV is 96-bits, 12 bytes. When I set this to 16-bits the value isn't updated and as a result the encrypted data and IV or not correct.</p>\n\n<p>I tried verifying this using the following function which reads back a value of 12, when I was expecting it to change to 16 after setting it via the second following function:</p>\n\n<p>int EVP_CIPHER_CTX_iv_length(const EVP_CIPHER_CTX *ctx)\nEVP_CIPHER_CTX_ctrl(ctx, EVP_CTRL_GCM_SET_IVLEN, 16, NULL);</p>\n\n<p>And help with be awesome! Thanks!</p>\n\n<p>Chris</p>\n"}, {"tags": ["c++", "cmake", "visual-studio-2017"], "comments": [{"owner": {"reputation": 12097, "user_id": 1080064, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000753306178/picture?type=large", "display_name": "tkausl", "link": "https://stackoverflow.com/users/1080064/tkausl"}, "edited": false, "score": 4, "creation_date": 1524682473, "post_id": 50029475, "comment_id": 87075011, "body": "Why is the only source file a header file?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1524686237, "post_id": 50029475, "comment_id": 87076802, "body": "I heard that some generators for CMake do not like executable/library without any source file. Try to add at least empty <code>.c</code> file to your executable."}], "owner": {"reputation": 105, "user_id": 7938505, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UrhSbjzXWrM/AAAAAAAAAAI/AAAAAAAAAFQ/T_NFKh5yA7U/photo.jpg?sz=128", "display_name": "Troels Jessen", "link": "https://stackoverflow.com/users/7938505/troels-jessen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524682377, "creation_date": 1524682377, "question_id": 50029475, "link": "https://stackoverflow.com/questions/50029475/cmake-on-windows-10-doesnt-generate-executable", "title": "CMake on Windows 10 doesn&#39;t generate executable", "body": "<p>So I have a tiny C++ project that I code on both Windows 10 and Ubuntu 16.04, and I'm using CMake to coordinate relatively platform-independent build processes. I'm no master of CMake, but it worked up until recently, however now I cannot get the solution generated by CMake-gui to actually compile into an executable to run, despite my usage of add_executable. Here is my CMakeLists (there's a hideous mix of platform-specific stuff in there, however it appears that CMake simply ignores it):</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.10)\n\nset (CMAKE_CXX_STANDARD 17)\n\nproject (TestProject)\n\ninclude_directories(C:/include/CImg-2.2.2)\n\nADD_LIBRARY(LibsModule Game.cpp Game.h TestGame.cpp TestGame.h)\n\ntarget_link_libraries(LibsModule -lpthread)\ntarget_link_libraries(LibsModule -lm)\ntarget_link_libraries(LibsModule -lX11)\n\nadd_executable(TestProject TestGame.h)\n\ntarget_link_libraries(TestProject LibsModule)\n</code></pre>\n\n<p>This compiles and runs fine on Ubuntu using CLion, however on 64-bit Windows 10 using VS17 it fails upon trying to run the executable it expects to be generated because the executable doesn't exist in the build folder (but the .lib file noted is generated just fine). </p>\n\n<p>I've seen some mention that a third party antivirus program could cause this, but I have no such thing installed.</p>\n\n<p>Now I'm pretty new to CMake so if this file is completely off the mark I would really appreciate a clear explanation as to what I'm doing wrong, this code is made from a short study of basic CMake usage.</p>\n"}, {"tags": ["c++", "language-lawyer"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1524682700, "post_id": 50029337, "comment_id": 87075141, "body": "from my inexperienced eyes, it doesn&#39;t seem to contradict. if <code>a</code> is an lvalue, then <code>a[0]</code> is an lvalue, but in your example <code>a</code> is an xvalue so <code>a[0]</code> is an xvalue (falling in the &quot;otherwise&quot; part)"}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1524683093, "post_id": 50029337, "comment_id": 87075378, "body": "Relevant? <a href=\"https://stackoverflow.com/questions/31206988/is-f-a0-an-xvalue?rq=1\" title=\"is f a0 an xvalue\">stackoverflow.com/questions/31206988/is-f-a0-an-xvalue?rq=1</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4815, "user_id": 3087601, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ad2f9879fa1dea6fd47a45052ad02a09?s=128&d=identicon&r=PG&f=1", "display_name": "Zereges", "link": "https://stackoverflow.com/users/3087601/zereges"}, "edited": false, "score": 0, "creation_date": 1524684656, "post_id": 50029643, "comment_id": 87076126, "body": "The clang compiling it is then a bug?"}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 0, "creation_date": 1524684720, "post_id": 50029643, "comment_id": 87076154, "body": "This seems to be correct. But how did you deduce, from the standard, that the operators <code>.</code> and <code>[]</code> have the same precedence?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 2, "creation_date": 1524685603, "post_id": 50029643, "comment_id": 87076523, "body": "@Belloc You need to look at the grammar production in <a href=\"http://eel.is/c++draft/expr.post#nt:postfix-expression\" rel=\"nofollow noreferrer\">expr.post</a>. It&#39;s a bit weird but class member access has the form <code>postfix.id</code> and subscript <code>postfix[expr-{}]</code>. So the only valid interpretation is that the outer expression is the <code>[]</code> one, and the inner the class member access. It wouldn&#39;t work the other way around (<code>a[0]</code> is not an id-expression). Or more informally, they are in the same paragraph :)"}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 0, "creation_date": 1524687566, "post_id": 50029643, "comment_id": 87077408, "body": "@Rakete1111 Unfortunately I have to disagree with you. <a href=\"http://eel.is/c++draft/expr.ref#1\" rel=\"nofollow noreferrer\">&#91;expr.ref&#93;\\1</a> says clearly that  <code>The postfix expression before the dot or arrow is evaluated;67 the result of that evaluation, together with the id-expression, determines the result of the entire postfix expression.</code>. So the parsing should occur according to my reasoning and therefore, [expr.ref]/(4.2) and [expr.sub]/1 are contradictory."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 0, "creation_date": 1524687713, "post_id": 50029643, "comment_id": 87077478, "body": "@Belloc Look at the previous sentence if you don&#39;t trust the grammar :) &quot;A postfix expression followed by a dot . or an arrow -&gt;, optionally followed by the keyword template, and then followed by an id-expression, is a postfix expression.&quot;. <code>A()</code> is postfix, but <code>a[0]</code> is not id so the whole expression is not a postfix, it&#39;s two nested postfix expressions."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 0, "creation_date": 1524688270, "post_id": 50029643, "comment_id": 87077745, "body": "@Rakete1111 Who said <code>a[0]</code> is postfix? Is is not. Only <code>a</code>is a postfix expression. See the second definition for a <a href=\"http://eel.is/c++draft/expr.post#nt:postfix-expression\" rel=\"nofollow noreferrer\">postfix-expression</a>."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 0, "creation_date": 1524688916, "post_id": 50029643, "comment_id": 87078059, "body": "@Belloc the grammar you quoted says that. Look at the very top. But I don&#39;t really understand why you think your interpretation is right. The grammar specifies how an expression is parsed, minus any ambiguity. Any text can only confirm what the grammar already says."}, {"owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "edited": false, "score": 0, "creation_date": 1524695872, "post_id": 50029643, "comment_id": 87080609, "body": "@Rakete1111 You convinced me. There is no contradiction between the two statements. Thanks."}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 5, "last_activity_date": 1524683055, "creation_date": 1524683055, "answer_id": 50029643, "question_id": 50029337, "link": "https://stackoverflow.com/questions/50029337/is-this-a-contradiction-between-expr-ref-4-2-and-expr-sub-1-in-the-current/50029643#50029643", "title": "Is this a contradiction between [expr.ref]/(4.2) and [expr.sub]/1 in the current draft?", "body": "<p>There is no contradiction, you're just parsing the expression wrongly. If I understand you correctly, you're saying that <code>E1</code> is <code>A()</code> and <code>E2</code> is <code>a[0]</code> which is <em>not</em> the case.</p>\n\n<p>In fact, <code>E2</code> is <code>a</code>. Because <code>.</code> and <code>[]</code> have the same precedence, the expression is parsed as <code>(A().a)[0]</code>.</p>\n\n<p>This means that according to [expr.ref]p4.2, <code>A().a</code> is an xvalue (of array type), and so that per [expr.sub]p1 <code>(A().a)[0]</code> is thus an xvalue.</p>\n"}], "owner": {"reputation": 6126, "user_id": 1042389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/LgLxA.jpg?s=128&g=1", "display_name": "Belloc", "link": "https://stackoverflow.com/users/1042389/belloc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 50029643, "answer_count": 1, "score": 3, "last_activity_date": 1524683055, "creation_date": 1524681902, "question_id": 50029337, "link": "https://stackoverflow.com/questions/50029337/is-this-a-contradiction-between-expr-ref-4-2-and-expr-sub-1-in-the-current", "title": "Is this a contradiction between [expr.ref]/(4.2) and [expr.sub]/1 in the current draft?", "body": "<p>According to <a href=\"http://eel.is/c++draft/expr.ref#4.2\" rel=\"nofollow noreferrer\">[expr.ref]/(4.2)</a> and the fact that <code>A()</code> is a prvalue, we conclude that <code>A().a[0]</code> is an xvalue. See highlighted sentence below.</p>\n\n<blockquote>\n  <p>If E2 is a non-static data member and the type of E1 is \u201ccq1 vq1 X\u201d,\n  and the type of E2 is \u201ccq2 vq2 T\u201d, the expression designates the named\n  member of the object designated by the first expression. <strong>If E1 is an\n  lvalue, then E1.E2 is an lvalue; otherwise E1.E2 is an xvalue.</strong> Let the\n  notation vq12 stand for the \u201cunion\u201d of vq1 and vq2; that is, if vq1 or\n  vq2 is volatile, then vq12 is volatile. Similarly, let the notation\n  cq12 stand for the \u201cunion\u201d of cq1 and cq2; that is, if cq1 or cq2 is\n  const, then cq12 is const. If E2 is declared to be a mutable member,\n  then the type of E1.E2 is \u201cvq12 T\u201d. If E2 is not declared to be a\n  mutable member, then the type of E1.E2 is \u201ccq12 vq12 T.</p>\n</blockquote>\n\n<p>Therefore the snippet below should compile. The code doesn't compile in <a href=\"http://coliru.stacked-crooked.com/a/eaa26149a0b6cde2\" rel=\"nofollow noreferrer\">GCC</a>, neither in <a href=\"http://rextester.com/FNC47901\" rel=\"nofollow noreferrer\">VS2017</a>, but it compiles in <a href=\"https://wandbox.org/permlink/jvteJj1HCjuqSlaR\" rel=\"nofollow noreferrer\">clang</a>.</p>\n\n<pre><code>#include&lt;iostream&gt;\nstruct A\n{\n    int a[3];\n    A(): a{1, 2, 3} {}\n};\n\nint main()\n{\n    int &amp;&amp;r = A().a[0];\n    std::cout &lt;&lt; r &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>However, the wording in <a href=\"http://eel.is/c++draft/expr.sub#1\" rel=\"nofollow noreferrer\">[expr.sub]/1</a> indicates that <code>a[0]</code> is an lvalue, irrespective of the value category of <code>A()</code>, and that seems to be incorrect to me.</p>\n\n<blockquote>\n  <p>A postfix expression followed by an expression in square brackets is a\n  postfix expression. One of the expressions shall be a glvalue of type\n  \u201carray of T\u201d or a prvalue of type \u201cpointer to T\u201d and the other shall\n  be a prvalue of unscoped enumeration or integral type. The result is\n  of type \u201cT\u201d. The type \u201cT\u201d shall be a completely-defined object type.<sup>66</sup>\n  The expression E1[E2] is identical (by definition) to *((E1)+(E2)) [\n  Note: see 8.5.2 and 8.5.6 for details of * and + and 11.3.4 for\n  details of arrays. \u2014end note ] , <strong>except that in the case of an array\n  operand, the result is an lvalue if that operand is an lvalue and an\n  xvalue otherwise</strong>. The expression E1 is sequenced before the expression\n  E2.</p>\n</blockquote>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 4, "creation_date": 1524681591, "post_id": 50029216, "comment_id": 87074564, "body": "a vector of vectors perhaps?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 11, "creation_date": 1524681610, "post_id": 50029216, "comment_id": 87074571, "body": "Are you looking for <code>std::vector&lt;std::vector&lt;int&gt;&gt;</code>?"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 1, "creation_date": 1524681634, "post_id": 50029216, "comment_id": 87074584, "body": "You need <code>vector&lt; vector&lt;int&gt; &gt; vv; vv.push_back(vec1);</code> etc"}, {"owner": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 1, "creation_date": 1524681690, "post_id": 50029216, "comment_id": 87074619, "body": "If each vector has exactly 3, might want to make a vector of tuple instead"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 4259, "user_id": 2516916, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/90d670e62ae35e180ad6e939443cab62?s=128&d=identicon&r=PG", "display_name": "Gillespie", "link": "https://stackoverflow.com/users/2516916/gillespie"}, "edited": false, "score": 4, "creation_date": 1524681783, "post_id": 50029216, "comment_id": 87074662, "body": "@RPGillespie That&#39;s a good point, but if the leaf elements are all the same, you can use <code>std::vector&lt;std::array&lt;int,3&gt;&gt;</code> rather than a vector of tuples."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 9214270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5015413cdd23101b12239a68dfffc89?s=128&d=identicon&r=PG", "display_name": "CookiePLMonster", "link": "https://stackoverflow.com/users/9214270/cookieplmonster"}, "edited": false, "score": 0, "creation_date": 1524682663, "post_id": 50029456, "comment_id": 87075116, "body": "That copies the &#39;inner&#39; vectors - feels like this might not be the intent."}], "tags": [], "owner": {"reputation": 51, "user_id": 9611494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8831b50320b9780949e42f690c94f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Dresden", "link": "https://stackoverflow.com/users/9611494/stan-dresden"}, "is_accepted": true, "score": 2, "last_activity_date": 1524682330, "creation_date": 1524682330, "answer_id": 50029456, "question_id": 50029216, "link": "https://stackoverflow.com/questions/50029216/insert-vector-x-y-z-into-another-vector/50029456#50029456", "title": "Insert vector {x, y, z} into another vector?", "body": "<p>You can use a vector of vector of integers. Like this : </p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; vecofvecs = { {1,2,3}, {4,5,6} };\n</code></pre>\n\n<p>You can also use this : </p>\n\n<pre><code>#include &lt;vector&gt;\nint main()\n{\n    std::vector&lt;std::vector&lt;int&gt;&gt; vecofvecs;\n    std::vector&lt;int&gt; subvec1 = { 1,2,3 };\n    std::vector&lt;int&gt; subvec2 = { 4,5,6 };\n\n    vecofvecs.push_back(subvec1);\n    vecofvecs.push_back(subvec2);\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 304, "user_id": 7080252, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/584a484fe4a0f1c5e3f5be13335a5ed0?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyPop13", "link": "https://stackoverflow.com/users/7080252/jimmypop13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 50029456, "answer_count": 1, "score": 0, "last_activity_date": 1524682330, "creation_date": 1524681478, "question_id": 50029216, "link": "https://stackoverflow.com/questions/50029216/insert-vector-x-y-z-into-another-vector", "title": "Insert vector {x, y, z} into another vector?", "body": "<p>I'm looking for some pointers on inserting or pushing a vector into another vector.</p>\n\n<p>The idea is I have vec1 = {1, 2, 3} for example.\nThen I want to insert this into vec2 before next vec1 = {4, 5, 6} turns up.</p>\n\n<p>The problem is I don't want vec 2 to read {1, 2, 3, 4, 5, 6}, I want it to read </p>\n\n<p>vec2 = {1, 2, 3},\n       {4, 5, 6},... etc</p>\n\n<p>Is this possible or I'm I completely mad. Any help will be great.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1524681493, "post_id": 50029175, "comment_id": 87074517, "body": "In <i>my</i> experience; if you ever have to use <code>sender()</code> there&#39;s a flaw in your design. Sure, it can be a useful hack, but there are usually better ways."}, {"owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1524681920, "post_id": 50029175, "comment_id": 87074726, "body": "I am new to QT. I have been doing it only for 3 days so I am trying my best :D"}, {"owner": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 0, "creation_date": 1524684562, "post_id": 50029175, "comment_id": 87076079, "body": "Jesper Juhl: I don&#39;t see a reason not to use <code>sender()</code>. It is used by the offiical examples <a href=\"http://doc.qt.io/qt-5/qtwidgets-widgets-calculator-example.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qtwidgets-widgets-calculator-example.html</a> - QSignalMapper would be a way, but is deprecated. Can you elaborate why the use of <code>sender()</code> is a design flaw?."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 2064, "user_id": 3606329, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/027b912750dbb94c9c1ff89c9eb20f46?s=128&d=identicon&r=PG&f=1", "display_name": "user3606329", "link": "https://stackoverflow.com/users/3606329/user3606329"}, "edited": false, "score": 1, "creation_date": 1524690190, "post_id": 50029175, "comment_id": 87078653, "body": "@user3606329 it completely breaks isolation between classes and couples them tightly. Also, if you read the official documentation you&#39;ll see the Qt people themselves warning about it with words like <a href=\"http://doc.qt.io/qt-5/qobject.html#sender\" rel=\"nofollow noreferrer\">Warning: This function violates the object-oriented principle of modularity.</a>"}], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524681690, "post_id": 50029238, "comment_id": 87074618, "body": "Now it&#39;s running, but I don&#39;t get expected result and thing like this is displayed: QMetaObject::connectSlotsByName: No matching signal for on_button_click()"}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "reply_to_user": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524681931, "post_id": 50029238, "comment_id": 87074734, "body": "The warning is because the slots named &quot;on_something1_something2&quot; are connected automatically to the object named something1 and the signal named something2. In this case there is no object named button with a signal named click. That warning is not relevant. What do you mean by don&#39;t get the expected results?"}, {"owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524682172, "post_id": 50029238, "comment_id": 87074853, "body": "Like you probably saw in my code, the thing I want to achieve is to get word &quot;Done!&quot; or &quot;Undone&quot; written on the button (depending if CheckBox with same &quot;I&quot; is ticked or not)"}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "reply_to_user": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524682501, "post_id": 50029238, "comment_id": 87075026, "body": "First of all, you should have a look <a href=\"https://stackoverflow.com/help/mcve\">here</a> on how to post an <b>MCVE</b>. Second, checkState() doesn&#39;t return a boolean, so that if condition is simply wrong. Maybe you mean <a href=\"http://doc.qt.io/archives/qt-4.8/qabstractbutton.html#checked-prop\" rel=\"nofollow noreferrer\">isChecked()</a> ?"}, {"owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524682756, "post_id": 50029238, "comment_id": 87075168, "body": "Yes it should be isChecked(), my bad. However after changing it into isChecked() it still doesn&#39;t change this button text."}, {"owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524684024, "post_id": 50029238, "comment_id": 87075831, "body": "Should I somehow call this function on event? Coz the only things that I did are: creating a declaration of function in header and &quot;describing&quot; it in .cpp file. I think that I should somehow connect it, shouldn&#39;t I?"}, {"owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "reply_to_user": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524685509, "post_id": 50029238, "comment_id": 87076479, "body": "Of course you must connect them! Start by studying the official documentation and how signal and slots work. Also, please conform to this website policies: don&#39;t keep asking things in comments, update your answer when needed, etc. stack overflow is not a shortcut to avoid studying."}], "tags": [], "owner": {"reputation": 2482, "user_id": 9630756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zkdcg.png?s=128&g=1", "display_name": "Sergio Monteleone", "link": "https://stackoverflow.com/users/9630756/sergio-monteleone"}, "is_accepted": true, "score": 1, "last_activity_date": 1524681553, "creation_date": 1524681553, "answer_id": 50029238, "question_id": 50029175, "link": "https://stackoverflow.com/questions/50029175/qt-detecting-which-button-was-pressed/50029238#50029238", "title": "QT - Detecting which button was pressed", "body": "<p>Call the method sender() of the object where your slot is, not the static member of QApplication.</p>\n\n<p>In other words, remove QApplication:: and your code should work as expected.</p>\n"}, {"tags": [], "owner": {"reputation": 98, "user_id": 9652160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24559dd60c90ea7bc5da34497ec5c4e?s=128&d=identicon&r=PG&f=1", "display_name": "chm", "link": "https://stackoverflow.com/users/9652160/chm"}, "is_accepted": false, "score": 0, "last_activity_date": 1524740717, "creation_date": 1524740717, "answer_id": 50041373, "question_id": 50029175, "link": "https://stackoverflow.com/questions/50029175/qt-detecting-which-button-was-pressed/50041373#50041373", "title": "QT - Detecting which button was pressed", "body": "<p>sender() returns QObject. You need QPushButton so your have to use casting. This code will work:</p>\n\n<pre><code>QPushButton *button = qobject_cast&lt;QPushButton*&gt;(sender());\nbutton-&gt;setText(\"New Text\");\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 50029238, "answer_count": 2, "score": 0, "last_activity_date": 1524740717, "creation_date": 1524681300, "last_edit_date": 1524681734, "question_id": 50029175, "link": "https://stackoverflow.com/questions/50029175/qt-detecting-which-button-was-pressed", "title": "QT - Detecting which button was pressed", "body": "<p>I have a problem with the usage of <code>Application::sender</code>. I have a few <code>QPushButtons</code> and in one function, I want to detect which button was pressed.</p>\n\n<p>I got to know that using <code>Application::sender</code> might be the solution, however I have troubles with it. Namely I get two errors:</p>\n\n<ul>\n<li>call to non-static member function without an object argument</li>\n<li>'sender' is a protected member of 'QObject'</li>\n</ul>\n\n<p>And here is my code:</p>\n\n<pre><code>void MainWindow::on_button_click()\n{\n    unsigned long i=0;\n    for(; i&lt;buttons.size(); ++i)\n    {\n        if(buttons[i] == QApplication::sender())\n            break;\n    }\n    if(checks[i]-&gt;checkState() == false)\n        buttons[i]-&gt;setText(\"Undone\");\n    else\n        buttons[i]-&gt;setText(\"Done!\");\n}\n</code></pre>\n\n<p>Where variable <code>buttons</code> is a <code>vector</code> of <code>QPushButton *</code></p>\n"}, {"tags": ["c++", "windows", "sendmessage"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1524681277, "post_id": 50029064, "comment_id": 87074403, "body": "From what I remember, you should not be attempting to simulate mouseclicks using WM_LBUTTONDOWN, WM_LBUTTONUP, etc.  Those messages are produced by the Windows OS for your app to process, not for you to try and fake.  The function that is usually used is (from what I remember, <code>SendInput</code> or similar)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7346067"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524681934, "post_id": 50029064, "comment_id": 87074735, "body": "@PaulMcKenzie I just saw this: <a href=\"https://stackoverflow.com/a/12363393/7346067\">stackoverflow.com/a/12363393/7346067</a>  I managed to get the code to make my mouse right click but it doesn&#39;t move my mouse, It just does a right click. Also from what I read, it says that it will move my mouse pointer over the screen? I don&#39;t want that to happen though"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7346067"}, "is_accepted": true, "score": 0, "last_activity_date": 1524685024, "creation_date": 1524685024, "answer_id": 50030085, "question_id": 50029064, "link": "https://stackoverflow.com/questions/50029064/mouse-click-using-sendmessage-not-getting-handed-over-to-the-window/50030085#50030085", "title": "Mouse click using SendMessage() not getting handed over to the window", "body": "<p>Ok so...</p>\n\n<p>Managed to fix the problem I was having by doing 1 simple thing.</p>\n\n<p>running my program with administrator rights</p>\n\n<p>Since I'm using Microsoft Visual Studio to do all the programming, I just had to launch Visual Studio in administrator mode.</p>\n\n<p>Fixed the problem while still keeping the original SendMessage() method of mouse click simulation</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7346067"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 1, "accepted_answer_id": 50030085, "answer_count": 1, "score": 1, "last_activity_date": 1524685024, "creation_date": 1524680870, "question_id": 50029064, "link": "https://stackoverflow.com/questions/50029064/mouse-click-using-sendmessage-not-getting-handed-over-to-the-window", "title": "Mouse click using SendMessage() not getting handed over to the window", "body": "<p>To put make it simple:</p>\n\n<p>I have 2 emulators to which I'm simulating click on using SendMessage()</p>\n\n<hr>\n\n<p>The emulator that I can dispatch this to is Nox</p>\n\n<p>The window hierarchy and the window handle I'm passing the message to:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wiaD1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wiaD1.png\" alt=\"Window hierarchy\"></a></p>\n\n<p>It works just as it's intended to do\n(Listening to the message using spy++)\n<a href=\"https://i.stack.imgur.com/iegqC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iegqC.png\" alt=\"Nox\"></a></p>\n\n<p>And the code:</p>\n\n<pre><code>SendMessage(NoxPlayer, WM_LBUTTONDOWN, MK_LBUTTON, MAKELPARAM(width, height));\nSendMessage(NoxPlayer, WM_LBUTTONUP, MK_LBUTTON, MAKELPARAM(width, height));\nSendMessage(NoxPlayer, WM_MOUSEMOVE, 0, MAKELPARAM(width, height));\n</code></pre>\n\n<p>I added the WM_MOUSEMOVE at the end because the noxplayer thinks I'm holding down L_Mouse click without it.</p>\n\n<hr>\n\n<p>Now my problem lies here... I have another emulator called \"MEmu player\"</p>\n\n<p>The window hierarchy and the window handle I'm passing the message to:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VdbZN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VdbZN.png\" alt=\"MEmu hierarchy\"></a></p>\n\n<p>But when passing the same code as before:</p>\n\n<pre><code>SendMessage(MEmu, WM_LBUTTONDOWN, MK_LBUTTON, MAKELPARAM(width, height));\nSendMessage(MEmu, WM_LBUTTONUP, MK_LBUTTON, MAKELPARAM(width, height));\nSendMessage(MEmu, WM_MOUSEMOVE, 0, MAKELPARAM(width, height));\n</code></pre>\n\n<p>I get no simulated click on the application. I tried listening to any messages I'm passing but found none when going over all the visible windows using spy++.</p>\n\n<hr>\n\n<p>Then I tried listening to how a normal mouse click would look like as messages using spy++ and got this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/2lTDk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2lTDk.png\" alt=\"MEmu\"></a></p>\n\n<p>For reference, this is what the same click without simulation would look like on the Nox Player:</p>\n\n<p><a href=\"https://i.stack.imgur.com/kW4Xw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kW4Xw.png\" alt=\"Nox player message\"></a></p>\n\n<hr>\n\n<p>Am I using the wrong code to send the simulated mouse click or am I passing this to the wrong window?</p>\n"}, {"tags": ["c++", "language-lawyer", "object-lifetime", "ctor-initializer", "member-access"], "comments": [{"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 1, "creation_date": 1524680790, "post_id": 50028982, "comment_id": 87074152, "body": "It is definitely well defined. And built-in address of operator does not access member storage. The given quote refers only to <code>.</code> and <code>-&gt;</code> operators."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 0, "creation_date": 1524681343, "post_id": 50028982, "comment_id": 87074437, "body": "@VTT Then I guess what I&#39;m asking is if using <code>.</code> in <code>&amp;my_member.y</code> is well defined."}, {"owner": {"reputation": 32072, "user_id": 7860670, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/LH36y.png?s=128&g=1", "display_name": "user7860670", "link": "https://stackoverflow.com/users/7860670/user7860670"}, "edited": false, "score": 2, "creation_date": 1524684200, "post_id": 50028982, "comment_id": 87075917, "body": "Ohh, so I guess the issue with <code>&amp;my_member.y</code> is not actually address of operator, but rather member access operator that evaluates the still-not initialized object. I should&#39;ve read question more carefully."}], "answers": [{"tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1524681890, "creation_date": 1524681890, "answer_id": 50029334, "question_id": 50028982, "link": "https://stackoverflow.com/questions/50028982/is-taking-the-address-of-a-member-of-an-uninitialized-object-well-defined/50029334#50029334", "title": "Is taking the address of a member of an uninitialized object well defined?", "body": "<p>Yes you are allowed to pass <code>&amp;my_member.y</code> to <code>foo</code>'s constructor, and even copy the pointer - which you do with <code>x(p_x)</code>.</p>\n\n<p>The behaviour on <em>dereferencing</em> that pointer though in <code>foo</code>'s constructor is undefined. (But you don't do that.)</p>\n"}, {"tags": [], "owner": {"reputation": 16907, "user_id": 4832499, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/76532994f6efa8d7dc8a3bb5b7b262a8?s=128&d=identicon&r=PG&f=1", "display_name": "Passer By", "link": "https://stackoverflow.com/users/4832499/passer-by"}, "is_accepted": true, "score": 7, "last_activity_date": 1524924424, "last_edit_date": 1592644375, "creation_date": 1524924424, "answer_id": 50077390, "question_id": 50028982, "link": "https://stackoverflow.com/questions/50028982/is-taking-the-address-of-a-member-of-an-uninitialized-object-well-defined/50077390#50077390", "title": "Is taking the address of a member of an uninitialized object well defined?", "body": "<p>First let's make accurate the question.</p>\n<p>What you are doing isn't using an uninitialized object, you are using an object not within its lifetime. <code>my_member</code> is constructed after <code>foo</code>, therefore the lifetime of <code>my_member</code> hasn't begun in <code>foo(&amp;my_member.y)</code>.</p>\n<p>From <a href=\"https://timsong-cpp.github.io/cppwp/basic.life#7\" rel=\"noreferrer\">[basic.life]</a></p>\n<blockquote>\n<p>before the lifetime of an object has started but after the storage which the object will occupy has been allocated [...], any glvalue that refers to the original object may be used but only in limited ways. [...] such a glvalue refers to allocated storage, and using the properties of the glvalue that do not depend on its value is well-defined. The program has undefined behavior if:</p>\n<ul>\n<li>the glvalue is used to access the object, or [...]</li>\n</ul>\n</blockquote>\n<p>Here accessing it means specifically to either read or modify the value of the object.</p>\n<p>The evaluation of <code>my_member</code> yields a lvalue, and there is nothing necessitating a conversion to prvalue, hence it stays a lvalue. Likewise, the evaluation of <code>my_member.y</code> is also a lvalue. We then conclude that no object's value have been accessed, this is well-defined.</p>\n"}], "owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "accepted_answer_id": 50077390, "answer_count": 2, "score": 5, "last_activity_date": 1528418991, "creation_date": 1524680526, "last_edit_date": 1528418991, "question_id": 50028982, "link": "https://stackoverflow.com/questions/50028982/is-taking-the-address-of-a-member-of-an-uninitialized-object-well-defined", "title": "Is taking the address of a member of an uninitialized object well defined?", "body": "<p>Consider the following example. When <code>bar</code> is constructed, it gives it's base type (<code>foo</code>) constructor the address of <code>my_member.y</code> where <code>my_member</code> is data member that hasn't been initialized yet.</p>\n\n<pre><code>struct foo {\n    foo(int * p_x) : x(p_x) {}\n    int * x;\n};\n\nstruct member {\n    member(int p_y) : y(p_y) {}\n    int y;\n};\n\nstruct bar : foo\n{\n    bar() : foo(&amp;my_member.y), my_member(42) {}\n    member my_member;\n};\n\n#include &lt;iostream&gt;\n\nint main()\n{\n    bar my_bar;\n    std::cout &lt;&lt; *my_bar.x;\n}\n</code></pre>\n\n<p>Is this well defined? Is it legal to take the address of an uninitialized object's data member? I've found <a href=\"https://stackoverflow.com/questions/3996855/reference-to-uninitialized-object-iniside-constructor\">this question</a> about passing a reference to an uninitialized object but it's not quite the same thing. In this case, I'm using the <a href=\"http://en.cppreference.com/w/cpp/language/operator_member_access#Built-in_member_access_operators\" rel=\"nofollow noreferrer\">member access operator</a> <code>.</code> on an uninitialized object.</p>\n\n<p>It's true that the address of an object's data member shouldn't be changed by initialization, but that doesn't necessarily make <em>taking</em> that address well defined. Additionally, the ccpreference.com page on <a href=\"http://en.cppreference.com/w/cpp/language/operator_member_access#Built-in_member_access_operators\" rel=\"nofollow noreferrer\">member access operators</a> has this to say :</p>\n\n<blockquote>\n  <p>The first operand of both operators is evaluated even if it is not necessary (e.g. when the second operand names a static member).</p>\n</blockquote>\n\n<p>I understand it to mean that in the case of <code>&amp;my_member.y</code> <code>my_member</code> would be evaluated, which I believe is fine (like <code>int x; x;</code> seems fine) but I can't find documentation to back that up either. </p>\n"}, {"tags": ["c++", "oop", "matrix"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524680736, "post_id": 50028962, "comment_id": 87074123, "body": "<i>it return something like</i> -- What is &quot;it&quot;?  Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and explain exactly what is wrong."}, {"owner": {"reputation": 1, "user_id": 8113290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b427cf2c7c26c33b91a973cdfb3cd689?s=128&d=identicon&r=PG", "display_name": "user8113290", "link": "https://stackoverflow.com/users/8113290/user8113290"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524680917, "post_id": 50028962, "comment_id": 87074213, "body": "I said &#39;something like&#39; because it returns something different everytime. For example, when I tried to create a simple 2 x 3 matrix (1 2 3 4 5 6) it returned 22.58613e-037."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524680983, "post_id": 50028962, "comment_id": 87074251, "body": "The word <code>return</code> means something in C++.  What function are you calling that returns this value you&#39;re speaking of?  You also haven&#39;t posted what was asked, a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>.  A class by itself does nothing without code that uses the class."}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1524681145, "post_id": 50028962, "comment_id": 87074333, "body": "Show the code that uses this class and writes out things."}, {"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1524681195, "post_id": 50028962, "comment_id": 87074358, "body": "You&#39;re missing copy constructors in your classes.  Search on &quot;rule of three&quot; or &quot;rule of five&quot;."}, {"owner": {"reputation": 1, "user_id": 8113290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b427cf2c7c26c33b91a973cdfb3cd689?s=128&d=identicon&r=PG", "display_name": "user8113290", "link": "https://stackoverflow.com/users/8113290/user8113290"}, "edited": false, "score": 0, "creation_date": 1524681245, "post_id": 50028962, "comment_id": 87074379, "body": "This is the whole code actually."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1524681492, "post_id": 50028962, "comment_id": 87074516, "body": "@user8113290 -- Are you running a program?  If so, how can this be the whole code?  Where is the <code>main</code> function?"}, {"owner": {"reputation": 1, "user_id": 8113290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b427cf2c7c26c33b91a973cdfb3cd689?s=128&d=identicon&r=PG", "display_name": "user8113290", "link": "https://stackoverflow.com/users/8113290/user8113290"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524681647, "post_id": 50028962, "comment_id": 87074589, "body": "@PaulMcKenzie the main only had &quot; Matrice_oarecare c(2,2); \tcout &lt;&lt; c &lt;&lt; endl;&quot;"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1524681679, "post_id": 50028962, "comment_id": 87074611, "body": "@user8113290 It doesn&#39;t matter what <code>main</code> only has, please put the <code>main</code> function in your post."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1524681715, "post_id": 50028962, "comment_id": 87074631, "body": "@user8113290 that should be included in your program. What are you <i>expecting</i> from that, btw? That should also be in your post."}, {"owner": {"reputation": 1, "user_id": 8113290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b427cf2c7c26c33b91a973cdfb3cd689?s=128&d=identicon&r=PG", "display_name": "user8113290", "link": "https://stackoverflow.com/users/8113290/user8113290"}, "edited": false, "score": 0, "creation_date": 1524681815, "post_id": 50028962, "comment_id": 87074676, "body": "Done, I edited it."}, {"owner": {"reputation": 1, "user_id": 8113290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b427cf2c7c26c33b91a973cdfb3cd689?s=128&d=identicon&r=PG", "display_name": "user8113290", "link": "https://stackoverflow.com/users/8113290/user8113290"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1524681924, "post_id": 50028962, "comment_id": 87074728, "body": "@1201ProgramAlarm I don&#39;t really see where/why I need a copy constructor."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1524681929, "post_id": 50028962, "comment_id": 87074733, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/rule_of_three\" rel=\"nofollow noreferrer\">Maybe reading this will explain why.</a>. You have a blatant rule of three/five/zero violation. Your <code>Matrice::operator[]</code> returns <code>Vector</code> by value, which makes a shallow copy of all members including pointers. When that object is destroyed those pointers are left dangling in the original <code>Matrice</code> hosted <code>Vector</code> object, which, when destroyed or accessed again (such as your iteration loop) will now puke all over itself. Running this in a decent debugger would have shown you all of this."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1524682256, "post_id": 50028962, "comment_id": 87074899, "body": "@user8113290 <i>I don&#39;t really see where/why I need a copy constructor.</i> -- Try this two line program : <code>int main() {Vector v(1); Vector v2 = v; }</code>  This results in a double deletion error on exit of <code>main</code>.  The <code>Vector</code> class requires proper copy semantics, and you didn&#39;t provide them, as the comment by WhozCraig points out."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1524683515, "post_id": 50028962, "comment_id": 87075587, "body": "Simple rule of thumb: if your class has pointer members you need to implement copy/move constructors/assignment operators (possibly <code>=delete</code> if you don&#39;t want them) - since the compiler generated versions will probably <i>not</i> do what you want in 99.999% of all cases when you have pointer members."}, {"owner": {"reputation": 811, "user_id": 9493582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bfI3b.jpg?s=128&g=1", "display_name": "Arndt Jonasson", "link": "https://stackoverflow.com/users/9493582/arndt-jonasson"}, "edited": false, "score": 0, "creation_date": 1524683576, "post_id": 50028962, "comment_id": 87075619, "body": "A constructor which reads from stdin is strange, to say the least."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1524683813, "post_id": 50028962, "comment_id": 87075733, "body": "This: <code>Vector() {         a = NULL;         dim = 0;     }</code> really wants to be: <code>Vector() : dim{0}, a{nullptr} {}</code>."}], "owner": {"reputation": 1, "user_id": 8113290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b427cf2c7c26c33b91a973cdfb3cd689?s=128&d=identicon&r=PG", "display_name": "user8113290", "link": "https://stackoverflow.com/users/8113290/user8113290"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524681770, "creation_date": 1524680438, "last_edit_date": 1524681770, "question_id": 50028962, "link": "https://stackoverflow.com/questions/50028962/dynamic-allocation-of-a-matrix-using-classes-returns-something-like-21-684268-3", "title": "Dynamic allocation of a matrix using classes returns something like &quot;21.684268-3121&quot;", "body": "<pre><code>class Vector {\nprotected:\n    unsigned int dim;\n    float *a;\npublic:\n    Vector() {\n        a = NULL;\n        dim = 0;\n    }\n    Vector(const unsigned int&amp; x) {\n        dim = x;\n        a = new float[dim];\n        for (unsigned int index = 0; index &lt; x; index++) {\n            cin &gt;&gt; a[index];\n        }\n    }\n    Vector(const float *init, const unsigned int&amp; size) {\n        if (init) {\n            dim = size;\n            a = new float[size];\n            for (unsigned int index = 0; index &lt; size; index++) {\n                a[index] = init[index];\n            }\n        }\n    }\n    void initVector(const float *init, const unsigned int&amp; size) {\n        if (init) {\n            dim = size;\n            a = new float[size];\n            for (unsigned int index = 0; index &lt; size; index++) {\n                a[index] = init[index];\n            }\n        }\n    }\n    void initVector(const unsigned int&amp; size) {\n        dim = size;\n        a = new float[dim];\n        for (unsigned int index = 0; index &lt; size; index++) {\n            cin &gt;&gt; a[index];\n        }\n    }\n    unsigned int getDim() {\n        return dim;\n    }\n    float operator[](unsigned int pos) {\n        return a[pos];\n    }\n    ~Vector() {\n        delete[] a;\n    }\n    friend class Matrice;\n    friend istream&amp; operator&gt;&gt;(istream&amp;, Vector&amp;);\n};\n\nclass Matrice {\nprotected:\n    Vector *v;\npublic:\n    Matrice() {\n        v = NULL;\n    }\n    Vector operator[](int pos) {\n        return v[pos];\n    }\n    friend istream&amp; operator&gt;&gt;(istream&amp;, Matrice&amp;);\n};\n\nclass Matrice_oarecare : public Matrice\n{\nprotected:\n    unsigned int linii;\npublic:\n    Matrice_oarecare() {\n        linii = 0;\n    }\n    Matrice_oarecare(int coloane, int linii) {\n        this-&gt;linii = linii;\n        v = new Vector[linii];\n        for ( int index = 0; index &lt; linii; index++) {\n            cin &gt;&gt; v[index]; //Asta apeleaza &gt;&gt; pentru Vector, care citeste toate numerele din sir\n        }\n    }\n    friend istream&amp; operator&gt;&gt;(istream&amp; in, Matrice_oarecare&amp;a);\n    friend ostream&amp; operator&lt;&lt;(ostream&amp; out, Matrice_oarecare&amp;a);\n};\n\nclass Matrice_patratica : public Matrice {\n    unsigned int dim;\npublic:\n    Matrice_patratica() {\n        v = NULL;\n        dim = 0;\n    }\n    Matrice_patratica(unsigned int dim) {\n        this-&gt;dim = dim;\n        v = new Vector[dim];\n        for (unsigned int index = 0; index &lt; dim; index++) {\n            float *init = new float[dim];\n            for (unsigned index2 = 0; index2 &lt; dim; index2++)\n                cin &gt;&gt; init[index];\n            v[index].initVector(init, dim);\n        }\n    }\n    friend ostream&amp; operator&lt;&lt;(ostream&amp;, Matrice_patratica&amp;);\n};\n\nistream&amp; operator&gt;&gt;(istream&amp; in, Vector&amp; v) {\n    in &gt;&gt; v.dim;\n    v.a = new float[v.dim];\n    for (unsigned int i = 0; i &lt; v.dim; i++)\n        in &gt;&gt; v.a[i];\n    return in;\n}\n\nostream&amp; operator&lt;&lt;(ostream&amp; os, Matrice_oarecare&amp; a) {\n    for (unsigned indexI = 0; indexI &lt; a.v-&gt;getDim(); indexI++) {\n        for (unsigned indexJ = 0; indexJ &lt; a.linii; indexJ++) {\n            os &lt;&lt; a[indexI][indexJ];\n        }\n    }\n    return os;\n}\nostream&amp; operator&lt;&lt;(ostream&amp; os, Matrice_patratica&amp; a) {\n    for (unsigned indexI = 0; indexI &lt; a.dim; indexI++) {\n        for (unsigned indexJ = 0; indexJ &lt; a.dim; indexJ++) {\n            os &lt;&lt; a[indexI][indexJ];\n        }\n    }\n    return os;\n}\nint main() {\n    Matrice_oarecare c(2,2);\n    cout &lt;&lt; c &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>I have some problems while trying to dynamic allocate a matrix. Whatever I write, it return something like '21.3244141e-48198' and idk why. I think that the problem might be either the overloaded &lt;&lt; operator, or one inheritance.\nThe 'Matrice_oarecare' and 'Matrice_patratica' have to inherit the Matrice class, and I have to create them using the Vector class.</p>\n"}, {"tags": ["java", "android", "c++"], "comments": [{"owner": {"reputation": 2721, "user_id": 8767209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f22597b536b07b41525099a8c16e23ce?s=128&d=identicon&r=PG&f=1", "display_name": "MFisherKDX", "link": "https://stackoverflow.com/users/8767209/mfisherkdx"}, "edited": false, "score": 2, "creation_date": 1524680848, "post_id": 50028944, "comment_id": 87074184, "body": "Your C++ code uses <code>cv::Vect4b</code> which denotes a vector of 4-byte elements.  I assume your BGRA format is 1 byte apiece for the B,G,R, and A channels.  In your Java code, you are using <code>double[]</code>.  Use <code>byte[]</code> instead and then call <code>put(int row, int col, byte[] data)</code> on the entire <code>byte[]</code> array."}, {"owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 1, "creation_date": 1524681338, "post_id": 50028944, "comment_id": 87074432, "body": "Move the put outside the innermost loop, and use <code>grayMat.put(y,x,data)</code>."}, {"owner": {"reputation": 562, "user_id": 3164900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ts8qL.jpg?s=128&g=1", "display_name": "Muhammad Hashim Shafiq", "link": "https://stackoverflow.com/users/3164900/muhammad-hashim-shafiq"}, "reply_to_user": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "edited": false, "score": 1, "creation_date": 1524681721, "post_id": 50028944, "comment_id": 87074635, "body": "Thank you @AndyTurner Solved. Please add it as answer so I can accpt it."}], "answers": [{"tags": [], "owner": {"reputation": 120590, "user_id": 3788176, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/9c18d321d8948803c05643d87b003dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Andy Turner", "link": "https://stackoverflow.com/users/3788176/andy-turner"}, "is_accepted": true, "score": 2, "last_activity_date": 1524684791, "creation_date": 1524684791, "answer_id": 50030035, "question_id": 50028944, "link": "https://stackoverflow.com/questions/50028944/converting-native-c-code-to-java/50030035#50030035", "title": "Converting Native C++ code to Java", "body": "<p>The problem is in your call:</p>\n\n<pre><code>grayMat.put(y,x,data[c]);\n</code></pre>\n\n<p>For one thing it's inside the innermost loop; for another, you're only setting a single value, when 4 are needed (as the error says).</p>\n\n<p>Move it outside the loop, and pass the entire array:</p>\n\n<pre><code>for(int c = 0; c &lt; 4; c++){\n  data[c] = ...\n}\ngrayMat.put(y,x,data);\n</code></pre>\n"}], "owner": {"reputation": 562, "user_id": 3164900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ts8qL.jpg?s=128&g=1", "display_name": "Muhammad Hashim Shafiq", "link": "https://stackoverflow.com/users/3164900/muhammad-hashim-shafiq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 50030035, "answer_count": 1, "score": 2, "last_activity_date": 1524684791, "creation_date": 1524680337, "last_edit_date": 1524681878, "question_id": 50028944, "link": "https://stackoverflow.com/questions/50028944/converting-native-c-code-to-java", "title": "Converting Native C++ code to Java", "body": "<p>I am converting a Native C++ Function into Java but stuck at some point. </p>\n\n<p>Here is the Native Code which causing the problem for me.</p>\n\n<pre><code>for(int x=0; x &lt; inputMat.cols; x++)\n{\n    for(int y=0; y &lt; inputMat.rows; y++)\n    {\n        for(int c=0; c &lt; 4; c++)\n        {\n            grayMat.at&lt;cv::Vec4b&gt;(y,x)[c] = (grayMat.at&lt;cv::Vec4b&gt;(y,x)[c] == 255 ? 255 : std::min(255,grayMat.at&lt;cv::Vec4b&gt;(y,x)[c]*255/(255-grayMat.at&lt;cv::Vec4b&gt;(y,x)[c]))); \n        }\n    }\n}\n</code></pre>\n\n<p>Here is my converted version of above code in Java</p>\n\n<pre><code>for(int x = 0; x &lt; inputMat.cols(); x++){\n        for(int y = 0; y &lt; inputMat.rows(); y++){\n\n            double data[] = new double[4];\n            for(int c = 0; c &lt; 4; c++){\n\n                data[c] = grayMat.get(y,x)[c] == 255 ? 255 Math.min(255,grayMat.get(y,x)[c]*255/(255-grayMat.get(y,x)[c]));\n                grayMat.put(y,x,data[c]);\n\n            }\n        }\n    }\n</code></pre>\n\n<p>I am getting the following error:</p>\n\n<blockquote>\n  <p>Process: covariance.com.imagefilter, PID: 11660\n      java.lang.UnsupportedOperationException: Provided data element number (1) should be multiple of the Mat channels count (4)\n          at org.opencv.core.Mat.put(Mat.java:954)\n          at covariance.com.imagefilter.MainActivity.cartoonMatConversion(MainActivity.java:358)\n          at covariance.com.imagefilter.MainActivity.access$100(MainActivity.java:47)\n          at covariance.com.imagefilter.MainActivity$1.onClick(MainActivity.java:91)\n          at android.view.View.performClick(View.java:6291)\n          at android.view.View$PerformClick.run(View.java:24931)\n          at android.os.Handler.handleCallback(Handler.java:808)\n          at android.os.Handler.dispatchMessage(Handler.java:101)\n          at android.os.Looper.loop(Looper.java:166)\n          at android.app.ActivityThread.main(ActivityThread.java:7425)\n          at java.lang.reflect.Method.invoke(Native Method)\n          at com.android.internal.os.Zygote$MethodAndArgsCaller.run(Zygote.java:245)\n          at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:921)</p>\n</blockquote>\n\n<p><strong>Note grayMat contains 4 colors BGRA</strong></p>\n"}, {"tags": ["c++", "pybind11"], "answers": [{"tags": [], "owner": {"reputation": 793, "user_id": 2663734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8R6KR.jpg?s=128&g=1", "display_name": "angelo.mastro", "link": "https://stackoverflow.com/users/2663734/angelo-mastro"}, "is_accepted": false, "score": 1, "last_activity_date": 1542114342, "creation_date": 1542114342, "answer_id": 53281664, "question_id": 50028830, "link": "https://stackoverflow.com/questions/50028830/pybind11-where-to-put-pybind11-module/53281664#53281664", "title": "Pybind11 - Where to put PYBIND11_MODULE", "body": "<p>I created a file of his own for the bindings, and compiled/linked it together with the original c++ file. This way:</p>\n\n<p>1) <code>Test.h</code> + <code>Test.cpp</code> contain only c++ code of your class</p>\n\n<p>2) <code>Test-bindings.cpp</code> contains the PYBIND11_MODULE and <code>#include &lt;Test.h&gt;</code></p>\n\n<p>3) Building (with cmake). You will get a <strong>PyTest.so</strong> file out of it, that you can load in python.</p>\n\n<pre><code># c++ libray\nadd_library(TestLib SHARED /path/to/Test.h /path/to/Test.cpp)\n\n# bindings\nadd_subdirectory(pybind11) # you must have downloaded this repo\ninclude_directories(/path-only/to/Test.h)\npybind11_add_module(PyTest SHARED /path/to/Test-bindings.cpp /path/to/Test.cpp)\n</code></pre>\n\n<p>4) (I suggest you to) write the main in python, using the python-binding you just created</p>\n\n<p>5) In your <strong>main.py</strong></p>\n\n<pre><code> import PyTest\n # do something\n</code></pre>\n"}], "owner": {"reputation": 322, "user_id": 8419020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dkUE9.png?s=128&g=1", "display_name": "Simerax", "link": "https://stackoverflow.com/users/8419020/simerax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542114342, "creation_date": 1524679950, "question_id": 50028830, "link": "https://stackoverflow.com/questions/50028830/pybind11-where-to-put-pybind11-module", "title": "Pybind11 - Where to put PYBIND11_MODULE", "body": "<p>Im currently playing around with pybind11 a bit. Im trying to create a C++ class which then gets passed to a python interpreter embedded in my C++ source.</p>\n\n<p>I created some dummy class just to test the basic functionality I kept everything in a single source file. This approach compiled and ran without any problems.</p>\n\n<p>Now I separated my dummy Class <code>Test</code> into a Test.h and Test.cpp</p>\n\n<p><strong>Test.h</strong></p>\n\n<pre><code>#pragma once\n#include&lt;iostream&gt;\n#include\"pybind11\\pybind11.h\"\n\nnamespace py = pybind11;\n\nclass Test\n{\npublic:\n    Test(const std::string &amp;s);\n    ~Test();\n\n    void printStr();\n\nprivate:\n    std::string _s;\n};\n</code></pre>\n\n<p><strong>Test.cpp</strong></p>\n\n<pre><code>#include \"Test.h\"\n\nPYBIND11_MODULE(TestModule, m)\n{\n    py::class_&lt;Test&gt;(m, \"Test\") \n        .def(py::init&lt;const std::string &amp;&gt;())\n        .def(\"printStr\", &amp;Test::printStr); \n}\n\n\nTest::Test(const std::string &amp;s) : _s(s)\n{\n\n}\nTest::~Test()\n{\n\n}\n\nvoid Test::printStr()\n{\n    std::cout &lt;&lt; \"---&gt; \" &lt;&lt; _s &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include\"Test.h\"\n\nint main(int argc, char **argv)\n{\n\n    PyImport_AppendInittab(\"TestModule\", PyInit_TestModule);\n    Py_Initialize(); \n\n    PyRun_SimpleString(\"import TestModule\");\n    PyRun_SimpleString(\"t = TestModule.Test(\\\"str\\\")\"); \n    PyRun_SimpleString(\"t.printStr()\"); \n    Py_Finalize();\n\n    getchar();\n\n    return 1;\n}\n</code></pre>\n\n<p>After putting the Class <code>Test</code> into a new file the Compiler cannot find the <code>PyInit_TestModule</code> (main.cpp line: 6) anymore since this is generated by the <code>PYBIND11_MODULE</code> Macro which lives in the Test.cpp file(MSVS2017 Error: C2065).</p>\n\n<p>I tried putting the <code>PYBIND11_MODULE</code> Macro into the Test.h. This however resulted in a linker error which said that \"_PyInit_TestModule\" is already defined in main.obj (MSVS2017 Error: LNK2005)</p>\n\n<p>Putting the <code>PYBIND11_MODULE</code> Macro in the main.cpp file works.\nHowever I feel like this will become quite unreadable as soon as you put a lot of custom Module definitions into main.cpp or even worse you have multiple Python-Interpreter being started from different source files where you then \nneed to put the same definition in all those files which will be a mess and most likely turn into a linker error.</p>\n\n<p>Has one of you faced the same Problem and how did you solve it?</p>\n"}, {"tags": ["c++", "c", "sockets", "ubuntu-17.10"], "comments": [{"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 2, "creation_date": 1524679684, "post_id": 50028731, "comment_id": 87073586, "body": "That <code>3</code> is a <i>byte count</i>, not an element count. the two are only synonymous if you&#39;re sending simple octets. Chances are you&#39;re not even sending one full <code>int</code>, much less three. Unrelated, <code>&amp;arr</code> could just be <code>arr</code> in the send call. Won&#39;t really matter, but still."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1524679738, "post_id": 50028731, "comment_id": 87073615, "body": "you need <code>send(sock , &amp;arr,sizeof(arr) , 0);</code>"}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 2, "creation_date": 1524679799, "post_id": 50028731, "comment_id": 87073645, "body": "note - in general you need to send a length indicator before the message. TCP is a stream protocol not a message protocol, you cannot expect to receive the same messages tht you send, only the same bytes in  the same order"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 1, "creation_date": 1524679918, "post_id": 50028731, "comment_id": 87073713, "body": "unless it is a datagramm mode (udp)"}, {"owner": {"reputation": 367, "user_id": 7006343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fme6K.jpg?s=128&g=1", "display_name": "Ali Tahir", "link": "https://stackoverflow.com/users/7006343/ali-tahir"}, "edited": false, "score": 0, "creation_date": 1524680351, "post_id": 50028731, "comment_id": 87073910, "body": "i did the sizeof(arr) but its still the same"}, {"owner": {"reputation": 2135, "user_id": 4967497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0c6d09001cf39a7646ed2d22bc23352?s=128&d=identicon&r=PG", "display_name": "JojOatXGME", "link": "https://stackoverflow.com/users/4967497/jojoatxgme"}, "edited": false, "score": 1, "creation_date": 1524681103, "post_id": 50028731, "comment_id": 87074303, "body": "You need to use <code>sizeof</code> in <code>send</code> and <code>recv</code>."}, {"owner": {"reputation": 367, "user_id": 7006343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fme6K.jpg?s=128&g=1", "display_name": "Ali Tahir", "link": "https://stackoverflow.com/users/7006343/ali-tahir"}, "edited": false, "score": 0, "creation_date": 1524681197, "post_id": 50028731, "comment_id": 87074360, "body": "oh Thanks Its working now ."}, {"owner": {"reputation": 1285, "user_id": 5974780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db181de522cb3dcfcddaeb95fa2925a3?s=128&d=identicon&r=PG&f=1", "display_name": "Nesan Mano", "link": "https://stackoverflow.com/users/5974780/nesan-mano"}, "edited": false, "score": 1, "creation_date": 1524681340, "post_id": 50028731, "comment_id": 87074435, "body": "it has to be the length in bytes of the data. Integer is 4 bytes and you have 3 integers to send so it would be 4*3= 12 bytes."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 4058889, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Y5kH-VbJDf8/AAAAAAAAAAI/AAAAAAAAAfE/Y9vZARB1UAw/photo.jpg?sz=128", "display_name": "Mert Can Erg&#252;n", "link": "https://stackoverflow.com/users/4058889/mert-can-erg%c3%bcn"}, "edited": false, "score": 2, "creation_date": 1524745430, "post_id": 50029152, "comment_id": 87101708, "body": "also a conversion may be needed if endianness of sender/receiver sides are different"}, {"owner": {"reputation": 2135, "user_id": 4967497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0c6d09001cf39a7646ed2d22bc23352?s=128&d=identicon&r=PG", "display_name": "JojOatXGME", "link": "https://stackoverflow.com/users/4967497/jojoatxgme"}, "edited": false, "score": 0, "creation_date": 1524746174, "post_id": 50029152, "comment_id": 87102226, "body": "Seems to be finde. However, I would use <code>size_t</code> as type for <code>length</code> and <code>ssize_t</code> as type for <code>sent</code>/<code>recvd</code>. It is also a little bit confusing that both functions use different return values. (<code>sendAll</code>: 0/OK, -1/IO Error; <code>recvAll</code>: 1/OK, 0/Unexpected EOF, -1/IO Error)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 2135, "user_id": 4967497, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a0c6d09001cf39a7646ed2d22bc23352?s=128&d=identicon&r=PG", "display_name": "JojOatXGME", "link": "https://stackoverflow.com/users/4967497/jojoatxgme"}, "edited": false, "score": 0, "creation_date": 1524754552, "post_id": 50029152, "comment_id": 87108485, "body": "@JojOatXGME many of the standard socket functions return 0 on success and -1 on error, so I followed that same convention for <code>sendAll()</code>. Since <code>recv()</code> has different semantics, <code>recvAll()</code> is similarly different."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 2, "last_activity_date": 1524754793, "last_edit_date": 1524754793, "creation_date": 1524681218, "answer_id": 50029152, "question_id": 50028731, "link": "https://stackoverflow.com/questions/50028731/problems-sending-an-integer-array-over-a-socket/50029152#50029152", "title": "Problems sending an integer array over a socket", "body": "<p><code>send()</code> and <code>recv()</code> operate on bytes only.  You are sending and receiving 3 bytes, but your array is actually <code>sizeof(int) * 3</code> bytes instead (where <code>sizeof(int)</code> is usually 4 on many platforms).  You need to use <code>sizeof()</code> on both ends, eg:</p>\n\n<pre><code>send(sock, &amp;arr, sizeof(arr), 0);\n</code></pre>\n\n<p></p>\n\n<pre><code>recv(new_socket, &amp;arr1, sizeof(arr1), 0);\n</code></pre>\n\n<p>However, you also have to pay attention to return values, because <code>send()</code> can send fewer bytes than requested, and <code>recv()</code> can receive fewer bytes than requested.  TCP is stream-oriented, not message-oriented. You should be calling <code>send()</code> and <code>recv()</code> each in a loop, re-calling each one until all expected bytes have been sent/received in full, eg:</p>\n\n<pre><code>ssize_t sendAll(int sckt, void *data, size_t length)\n{\n    char *bytes = (char*) data;\n    while (length &gt; 0)\n    {\n        ssize_t sent = send(sckt, bytes, length, 0);\n        if (sent == -1) return -1;\n        bytes += sent;\n        length -= sent;\n    }\n    return 0;\n}\n\nint arr[3] = {5, 4, 1};\nsendAll(sock, &amp;arr, sizeof(arr));\n</code></pre>\n\n<p></p>\n\n<pre><code>ssize_t recvAll(int sckt, void *data, size_t length)\n{\n    char *bytes = (char*) data;\n    while (length &gt; 0)\n    {\n        ssize_t recvd = recv(sckt, bytes, length, 0);\n        if (recvd &lt;= 0) return recvd;\n        bytes += recvd;\n        length -= recvd;\n    }\n    return 1;\n}\n\nint arr1[3];\nrecvAll(new_socket, &amp;arr1, sizeof(arr1));\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 7006343, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fme6K.jpg?s=128&g=1", "display_name": "Ali Tahir", "link": "https://stackoverflow.com/users/7006343/ali-tahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524754793, "creation_date": 1524679570, "last_edit_date": 1524680215, "question_id": 50028731, "link": "https://stackoverflow.com/questions/50028731/problems-sending-an-integer-array-over-a-socket", "title": "Problems sending an integer array over a socket", "body": "<p>I'm sending an integer array from client to server by socket. Like this ;</p>\n\n<pre><code>int arr[3] = {5, 4, 1};\n\n\nsend(sock , &amp;arr, 3 , 0);   //sending the votes count\n</code></pre>\n\n<p>and receiving in server like so</p>\n\n<pre><code>recv(new_socket, arr1, 3, 0);\n</code></pre>\n\n<p>I'm getting correct value in <code>arr1[0]</code> but in <code>arr1[1]</code> I'm getting <code>66</code> and <code>arr1[2]</code> I'm getting <code>67</code></p>\n\n<p>I don't know how this happening and where <code>66</code> and <code>67</code> is coming from</p>\n"}, {"tags": ["c++", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 0, "creation_date": 1524680067, "post_id": 50028792, "comment_id": 87073797, "body": "Maybe I&#39;m just paranoid. Is a branch necessary in <code>begin()</code> to filter out the case when map is empty?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "edited": false, "score": 1, "creation_date": 1524680410, "post_id": 50028792, "comment_id": 87073950, "body": "@YiFei Make it UB :P"}, {"owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1524680464, "post_id": 50028792, "comment_id": 87073983, "body": "@Rakete1111, don&#39;t know if good for future visitors, but I upvoted :P."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1524680731, "post_id": 50028792, "comment_id": 87074119, "body": "To add: It is well defined to compare a value initialized iterator to another value initialized iterator, while a default initialized iterator cannot be compared to anything."}], "tags": [], "owner": {"reputation": 126541, "user_id": 153285, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/1UiET.jpg?s=128&g=1", "display_name": "Potatoswatter", "link": "https://stackoverflow.com/users/153285/potatoswatter"}, "is_accepted": true, "score": 3, "last_activity_date": 1524679805, "creation_date": 1524679805, "answer_id": 50028792, "question_id": 50028711, "link": "https://stackoverflow.com/questions/50028711/how-to-get-a-guaranteed-invalid-iterator-for-vector/50028792#50028792", "title": "How to get a guaranteed invalid iterator (for vector)?", "body": "<p><code>std::vector::iterator</code> is always invalid when value-initialized:</p>\n\n<pre><code>std::vector&lt;\u2026&gt;::iterator invalid_iter_value = {};\n</code></pre>\n\n<p>Incidentally, it's <em>unusable</em> when default-initialized (i.e. uninitialized), which might be good enough for you. If <code>major_it</code> is already at the end, then simply don't access <code>minor_it</code>.</p>\n\n<pre><code>std::vector&lt;\u2026&gt;::iterator unusable_iter_value;\n</code></pre>\n\n<p>However, note that it's also illegal to copy the default-initialized object, so value-initialization is a good idea unless you're customizing the copy constructor and operator.</p>\n"}], "owner": {"reputation": 1579, "user_id": 5215536, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/2b44d6db2f2f3fa384fd15d46f4f9c4d?s=128&d=identicon&r=PG&f=1", "display_name": "YiFei", "link": "https://stackoverflow.com/users/5215536/yifei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 50028792, "answer_count": 1, "score": 1, "last_activity_date": 1524687987, "creation_date": 1524679479, "last_edit_date": 1524687987, "question_id": 50028711, "link": "https://stackoverflow.com/questions/50028711/how-to-get-a-guaranteed-invalid-iterator-for-vector", "title": "How to get a guaranteed invalid iterator (for vector)?", "body": "<p>I have a container class which is essentially (showing relevant parts only)</p>\n\n<pre><code>class Foo {\n    typedef std::map&lt;int, std::vector&lt;int&gt;&gt; data_t;\n    data_t data;\n    struct iterator {\n        data_t::iterator major_it;\n        data_t::mapped_type::iterator minor_it;\n        // ...\n    };\n    iterator begin();\n    iterator end() {\n        return { data.end(), /* XXX */ };\n    }\n};\n</code></pre>\n\n<p>As you see, I want to have iterator implemented for this container. The iterator shall go through each node in map and iterator through each element in the vector the node refers to. I have no problem implementing the iterator, but I had some trouble implementing <code>end()</code> for the container.</p>\n\n<p>The iterator consists of two levels of iterators, and for the past-end iterator, <code>major_it</code> will have to be <code>data_t.end()</code>, but I won't have anything to initialize <code>minor_it</code>.</p>\n\n<p>In the same vein, <code>begin()</code> will also be broken when the map is empty.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["c++", "oracle", "exception", "occi"], "comments": [{"owner": {"reputation": 1968, "user_id": 846641, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/q1FW7.jpg?s=128&g=1", "display_name": "Philipp", "link": "https://stackoverflow.com/users/846641/philipp"}, "edited": false, "score": 0, "creation_date": 1524679121, "post_id": 50028563, "comment_id": 87073306, "body": "this is a null pointer."}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524679213, "post_id": 50028563, "comment_id": 87073352, "body": "As <code>s</code> is <code>auto</code> we are left to guess what type it is.  How do you know it&#39;s a string and not a pointer to a temporary buffer?"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1524680071, "post_id": 50028563, "comment_id": 87073800, "body": "That naked <code>rset-&gt;next()</code> is ill-advised. <code>rset</code> should be checked before any of that, and more importantly, <code>if (rset-&gt;next()) { ..your code.. }</code> is the stock modus-operandi to protect you from yourself. Unrelated, this deserves the mysql tag if that&#39;s what you&#39;re using (I&#39;m assuming it is)."}, {"owner": {"reputation": 61, "user_id": 9541708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJCfW.jpg?s=128&g=1", "display_name": "Evka&#39;S", "link": "https://stackoverflow.com/users/9541708/evkas"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524681685, "post_id": 50028563, "comment_id": 87074614, "body": "@RichardCritten For clarity, I&#39;ve changed the <code>auto</code> to <code>std::string</code>. Tested and it does the same thing."}, {"owner": {"reputation": 61, "user_id": 9541708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJCfW.jpg?s=128&g=1", "display_name": "Evka&#39;S", "link": "https://stackoverflow.com/users/9541708/evkas"}, "reply_to_user": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1524681783, "post_id": 50028563, "comment_id": 87074661, "body": "@WhozCraig I&#39;ve simplified the code for the purpose of asking this question. I check if <code>rset</code> is good in production."}, {"owner": {"reputation": 1330, "user_id": 3624674, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e18e359a7509c9508afd47cf83f8af97?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/3624674/dan"}, "edited": false, "score": 0, "creation_date": 1528584389, "post_id": 50028563, "comment_id": 88565199, "body": "Having the same problem as you, OP. Any luck?"}], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 6596278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f0Svi.jpg?s=128&g=1", "display_name": "JKC", "link": "https://stackoverflow.com/users/6596278/jkc"}, "is_accepted": false, "score": 0, "last_activity_date": 1531395543, "creation_date": 1531395543, "answer_id": 51304705, "question_id": 50028563, "link": "https://stackoverflow.com/questions/50028563/read-access-violation-in-string-destructor/51304705#51304705", "title": "Read access violation in string destructor", "body": "<p>The problem is the different versions CRT library. You application's and Oracle's CRT library version must match.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7523132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59d7bb106e90c13a991d67bab082d83e?s=128&d=identicon&r=PG&f=1", "display_name": "Cay", "link": "https://stackoverflow.com/users/7523132/cay"}, "is_accepted": false, "score": 0, "last_activity_date": 1605274429, "creation_date": 1605274429, "answer_id": 64821874, "question_id": 50028563, "link": "https://stackoverflow.com/questions/50028563/read-access-violation-in-string-destructor/64821874#64821874", "title": "Read access violation in string destructor", "body": "<p>Doesn't seem like a std::string exception.</p>\n<blockquote>\n<p>That naked rset-&gt;next() is ill-advised. rset should be checked before any of that, and more importantly, if (rset-&gt;next()) { ..your code.. } is the stock modus-operandi to protect you from yourself.</p>\n</blockquote>\n<p>Just check:</p>\n<pre><code>if (rset-&gt;next() == Status::DATA_AVAILABLE) {\n   auto s = rset-&gt;getString(1);\n} \n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9541708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJCfW.jpg?s=128&g=1", "display_name": "Evka&#39;S", "link": "https://stackoverflow.com/users/9541708/evkas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1605274429, "creation_date": 1524678994, "last_edit_date": 1524681573, "question_id": 50028563, "link": "https://stackoverflow.com/questions/50028563/read-access-violation-in-string-destructor", "title": "Read access violation in string destructor", "body": "<p>How is it possible that string destructor throws an exception?\nIt's thrown at the end of try block for variable <code>s</code>.</p>\n\n<pre><code>Environment *env = Environment::createEnvironment(Environment::DEFAULT);\nConnection *con;\ncon = env-&gt;createConnection(Config::login, Config::password, Config::connection_string);\n\n\nstring sqlStmt = \"SELECT user FROM dual\";\nauto stmt = con-&gt;createStatement(sqlStmt);\nResultSet *rset = stmt-&gt;executeQuery();\ntry {\n    rset-&gt;next();\n    string s = rset-&gt;getString(1);\n    cout &lt;&lt; \"user: \" &lt;&lt; s &lt;&lt; endl;\n}  // exception thrown here\n</code></pre>\n\n<blockquote>\n  <p>read access violation _Pnext was 0xFFFFFFFFFFFFFFF</p>\n</blockquote>\n"}, {"tags": ["c++", "for-loop", "user-input", "nested-loops"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1524678713, "post_id": 50028478, "comment_id": 87073087, "body": "<code>int val[row][col];</code> This is not valid C++"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1524678721, "post_id": 50028478, "comment_id": 87073092, "body": "and you haven&#39;t even initialized <code>row</code> or <code>col</code> at that point -&gt; <i>undefined behavior</i> (on top of using a compiler extension)"}, {"owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1524680112, "post_id": 50028478, "comment_id": 87073818, "body": "@UnholySheep <code>row</code> and <code>col</code> get <a href=\"http://en.cppreference.com/w/cpp/language/zero_initialization\" rel=\"nofollow noreferrer\">zero-initialized</a> since they have static storage duration."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524681122, "post_id": 50028478, "comment_id": 87074320, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/936687/how-do-i-declare-a-2d-array-in-c-using-new\">How do I declare a 2d array in C++ using new?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 2514215, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8ca566c93b8bdc17b5898e88c30bcc2b?s=128&d=identicon&r=PG", "display_name": "Ali Asadpoor", "link": "https://stackoverflow.com/users/2514215/ali-asadpoor"}, "edited": false, "score": 0, "creation_date": 1524679257, "post_id": 50028628, "comment_id": 87073375, "body": "You need dynamic allocation, since you don&#39;t know row and col at compile time."}], "tags": [], "owner": {"reputation": 315, "user_id": 2514215, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8ca566c93b8bdc17b5898e88c30bcc2b?s=128&d=identicon&r=PG", "display_name": "Ali Asadpoor", "link": "https://stackoverflow.com/users/2514215/ali-asadpoor"}, "is_accepted": false, "score": 3, "last_activity_date": 1524679191, "creation_date": 1524679191, "answer_id": 50028628, "question_id": 50028478, "link": "https://stackoverflow.com/questions/50028478/user-input-in-2d-array-c/50028628#50028628", "title": "User input in 2D array (C++)", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int row, col; \n\n    cout &lt;&lt; \"How many rows are there?\" &lt;&lt; endl;    \n    cin &gt;&gt; row;\n    cout &lt;&lt; \"How many columns are there?\" &lt;&lt; endl;\n    cin &gt;&gt; col;\n    cout &lt;&lt; \"Enter values for the matrix: \" &lt;&lt; endl;\n\n    // check if row and col &gt; 0\n    int* val = new int[row * col];\n\n    for (int i = 0; i &lt; row; i++)                 \n    {\n        for (int j = 0; j &lt; col; j++)\n        {\n            cin &gt;&gt; val[i * col + j]; \n        }   \n    }\n    delete[] val;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "is_accepted": false, "score": 0, "last_activity_date": 1524679611, "creation_date": 1524679611, "answer_id": 50028743, "question_id": 50028478, "link": "https://stackoverflow.com/questions/50028478/user-input-in-2d-array-c/50028743#50028743", "title": "User input in 2D array (C++)", "body": "<p>If variable length arrays would be supported in C++ you could write what you wanted by just shifting:</p>\n\n<pre><code>int val[row][col];\n</code></pre>\n\n<p>To the point where row and col are known.\nCheck this post:\n<a href=\"https://stackoverflow.com/questions/1887097/why-arent-variable-length-arrays-part-of-the-c-standard\">Why aren&#39;t variable-length arrays part of the C++ standard?</a>\n Otherwise your code has undefined behavior. You should use dynamic allocation.</p>\n"}, {"tags": [], "owner": {"reputation": 1161, "user_id": 1849769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bd80cd843b2791a1312106d13d4fc10?s=128&d=identicon&r=PG", "display_name": "Pezo", "link": "https://stackoverflow.com/users/1849769/pezo"}, "is_accepted": false, "score": 1, "last_activity_date": 1524680055, "creation_date": 1524680055, "answer_id": 50028856, "question_id": 50028478, "link": "https://stackoverflow.com/questions/50028478/user-input-in-2d-array-c/50028856#50028856", "title": "User input in 2D array (C++)", "body": "<p>This doesn't do what you think it does.\nFirst of all, <code>row</code> and <code>col</code> are zero-initialized at program startup. Then you have <code>int val[row][col];</code> which isn't valid C++ but rather a C variable length array. Since at this point <code>row</code> and <code>col</code> are both 0, this array will be of length zero.</p>\n\n<p>In your loop you then read a bunch of values, overwriting what is on the stack and leading to undefined behavior.</p>\n\n<p>You should instead use something that is dynamically allocated, like <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\"><code>std::vector</code></a> or a proper matrix class from the math library of your choosing. Using dynamic allocation manually (<code>new int[row * col]</code> as suggested by Ali) is generally not recommended, since it's very easy to get memory leaks this way, especially if exceptions are involved.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 9699415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d292ec4fb30c6c705268ee9cca00ca?s=128&d=identicon&r=PG&f=1", "display_name": "Lucy", "link": "https://stackoverflow.com/users/9699415/lucy"}, "edited": false, "score": 0, "creation_date": 1524680773, "post_id": 50028916, "comment_id": 87074142, "body": "It&#39;s for my c++ class but the book uses C / C++ . We haven&#39;t been using other complex ways to approach problems."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "reply_to_user": {"reputation": 11, "user_id": 9699415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d292ec4fb30c6c705268ee9cca00ca?s=128&d=identicon&r=PG&f=1", "display_name": "Lucy", "link": "https://stackoverflow.com/users/9699415/lucy"}, "edited": false, "score": 0, "creation_date": 1524681063, "post_id": 50028916, "comment_id": 87074288, "body": "Using a vector is not a complex way, it&#39;s simply the proper way. C / C++ is not a thing as the languages are completely different in practice, despite ostensibly being closely related. If you simply must use plain arrays due to the constraints of the class itself, see <a href=\"https://stackoverflow.com/questions/936687/how-do-i-declare-a-2d-array-in-c-using-new\">this question</a>. However, keep in mind that despite working completely fine, that approach is basically always wrong in C++ unless you really know what you&#39;re doing and have a very good reason for doing so."}, {"owner": {"reputation": 11, "user_id": 9699415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d292ec4fb30c6c705268ee9cca00ca?s=128&d=identicon&r=PG&f=1", "display_name": "Lucy", "link": "https://stackoverflow.com/users/9699415/lucy"}, "edited": false, "score": 0, "creation_date": 1524681651, "post_id": 50028916, "comment_id": 87074593, "body": "I&#39;m not sure why the lesson hasn&#39;t included that yet. But on my original code, i moved &quot;int val [row][col];&quot; to before the for loop and it works now. It may not be valid C++ but the professor is using it lol."}], "tags": [], "owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "is_accepted": false, "score": 0, "last_activity_date": 1524680550, "last_edit_date": 1524680550, "creation_date": 1524680208, "answer_id": 50028916, "question_id": 50028478, "link": "https://stackoverflow.com/questions/50028478/user-input-in-2d-array-c/50028916#50028916", "title": "User input in 2D array (C++)", "body": "<p>First, you can't have </p>\n\n<pre><code>int val[row][col];\n</code></pre>\n\n<p>before row and col have known values. Second, that kind of 2D array initialization is only standard in C.</p>\n\n<p>You would need to manually allocate the array on the heap using the C++ operator new[] (similar to the malloc function in C). However that's not idiomatic C++ and the whole point of the language is to avoid doing that which is why I won't explain how to do it.</p>\n\n<p>The proper C++ way to accomplish what you want is to use an std::vector, which a very powerful wrapper around C style arrays that automatically allocates and de-allocates memory for you (and a lot of other things).</p>\n\n<p>Here's the simplest way to do that:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nint main()\n{\n    int row;\n    cout &lt;&lt; \"How many rows are there?\" &lt;&lt; endl;\n    cin &gt;&gt; row;\n\n    int col;\n    cout &lt;&lt; \"How many columns are there?\" &lt;&lt; endl;\n    cin &gt;&gt; col;\n\n    int num;\n    cout &lt;&lt; \"Enter values for the matrix: \" &lt;&lt; endl;\n    cin &gt;&gt; num;\n\n    vector&lt;vector&lt;int&gt;&gt; values(col); //initialize outer vector with col inner vectors\n\n    for (int i = 0; i &lt; row; i++)\n    {\n        for (int j = 0; j &lt; col; j++)\n        {\n            values[i].push_back(num);\n        }\n    }\n\n    for (int i = 0; i &lt; row; i++)\n    {\n        for (int j = 0; j &lt; col; j++)\n        {\n            cout &lt;&lt; values[i][j];\n        }\n\n        cout &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>Also, I advise you name your variables with more meaning and that you avoid using namespace std.</p>\n\n<p>EDIT: From the way you approach the program, I assume in my answer you are familiar with C. If that's not the case, and you're following a book or tutorial, you should find a better book or tutorial.</p>\n"}], "owner": {"reputation": 11, "user_id": 9699415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69d292ec4fb30c6c705268ee9cca00ca?s=128&d=identicon&r=PG&f=1", "display_name": "Lucy", "link": "https://stackoverflow.com/users/9699415/lucy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 757, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1524680550, "creation_date": 1524678636, "question_id": 50028478, "link": "https://stackoverflow.com/questions/50028478/user-input-in-2d-array-c", "title": "User input in 2D array (C++)", "body": "<p>Not sure why the for loop won't save the correct values in the 2D array when I printed to check. Any ideas?</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint row, col; \n\nint main()\n{\nint num;\nint val[row][col];\n\ncout &lt;&lt; \"How many rows are there?\" &lt;&lt; endl;    \ncin &gt;&gt; row;\ncout &lt;&lt; \"How many columns are there?\" &lt;&lt; endl;\ncin &gt;&gt; col;\ncout &lt;&lt; \"Enter values for the matrix: \" &lt;&lt; endl;\n\nfor (int i = 0; i &lt; row; i++)                 \n{\n    for (int j = 0; j &lt; col; j++)\n    {\n        cin &gt;&gt; val[i][j]; \n    }   \n}\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arm", "intrinsics", "neon", "arm64"], "comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1524697930, "post_id": 50028458, "comment_id": 87081231, "body": "Don&#39;t count on being able to get current compilers to emit non-terrible asm for ARM intrinsics.  For some reason they&#39;re much worse with ARM SIMD than with x86 SSE/AVX intrinsics, or PowerPC Altivec intrinsics."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524698223, "post_id": 50028458, "comment_id": 87081311, "body": "@PeterCordes yes, totally agree, but in this case for some reason intrinsic itself is declared in a way that makes you go through some hops to get simplest and most straightforward code where you have to rely that compiler is smart enough, while there was no need for such requirement in the first place."}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524787381, "post_id": 50028458, "comment_id": 87123343, "body": "@PeterCordes GCC lags way behind LLVM in this department. LLVM (at least the ARMv8 version shipped with XCode) does an excellent job of emitting ARM SIMD instructions from intrinsics."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "edited": false, "score": 0, "creation_date": 1524787561, "post_id": 50028458, "comment_id": 87123397, "body": "@BitBank: Thanks, I&#39;ll have to try <code>clang -target aarch64</code> on <a href=\"https://godbolt.org/\" rel=\"nofollow noreferrer\">godbolt.org</a> next time I&#39;m looking at ARM intrinsics.  (I only mess around with ARM code for SO answers.)"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524792927, "post_id": 50028458, "comment_id": 87124558, "body": "Looks like arm64 isn&#39;t as well implemented in general (so far). I&#39;d be interested to try on armcc (arm&#39;s compiler)."}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524777481, "post_id": 50031818, "comment_id": 87120359, "body": "You do eventually want the result in a scalar ARM register, so you could maybe write the source so the compiler can <code>addv</code> / <code>umov w0, v0.b[0]</code> / <code>clz w0, w0</code>.  But then you&#39;re counting the 24 leading zeros above the 8-bit value.  If ARM throughtput is better than NEON, it might still be a win to have to subtract 24, especially if you can fold that into something else for free."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524785376, "post_id": 50031818, "comment_id": 87122827, "body": "In my case I need the result in neon and I keep processing/manipulating it there."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524786541, "post_id": 50031818, "comment_id": 87123134, "body": "Then a function that returns <code>uint8x8_t</code> would be a better example than <code>int</code>, right?"}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524786679, "post_id": 50031818, "comment_id": 87123174, "body": "Oh, yes, that&#39;s just to make some minimal example that compiles, not some actual code."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524786785, "post_id": 50031818, "comment_id": 87123203, "body": "I mean an example of what you need / are trying to achieve.  Returning an <code>int</code> allows <code>clz w0,w0</code> as part of a possible optimal solution, but returning a <code>uint8x8_t</code> doesn&#39;t.  It&#39;s important to craft your compiler test-cases carefully if you want meaningful results.  e.g. maybe some compiler only shoots itself in the foot when you later ask for the value as an <code>int</code>.  Or maybe some compiler <i>only</i> gives good results for this when you later ask for an <code>int</code>, instead of using it with some further vector operations.  This doesn&#39;t prove that you can get clang to generate good code for using <code>r</code>."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524787086, "post_id": 50031818, "comment_id": 87123273, "body": "Clang for x86 will figure out when the upper elements of a vector aren&#39;t inputs to any further instructions and will optimize away the zeroing of upper elements for <code>_mm_set_ss(my_float)</code>.  But if you use the vector as an input to something else, it might actually do the zeroing of upper elements.  <a href=\"//stackoverflow.com/q/39318496\">How to merge a scalar into a vector without the compiler wasting an instruction zeroing upper elements? Design limitation in Intel&#39;s intrinsics?</a>.  So your test doesn&#39;t prove that this works for what you actually want, just for getting an <code>int</code>."}], "tags": [], "owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1524792401, "last_edit_date": 1524792401, "creation_date": 1524692822, "answer_id": 50031818, "question_id": 50028458, "link": "https://stackoverflow.com/questions/50028458/how-to-treat-result-of-vaddv-u8-in-arm64-as-a-neon-register/50031818#50031818", "title": "How to treat result of vaddv_u8 in arm64 as a neon register", "body": "<p>It seems that <a href=\"https://godbolt.org/g/4CS1Ut\" rel=\"nofollow noreferrer\">I can do this in clang</a>:</p>\n\n<pre><code>int paddClz(const uint8_t* x)\n{\n    uint8x8_t x8 = vld1_u8(x);\n    uint8_t sum = vaddv_u8(x8);\n    uint8x8_t r;\n    r = vset_lane_u8(sum, r, 0);\n    r = vclz_u8(r);\n    return vget_lane_u8(r, 0);\n}\n</code></pre>\n\n<p>This produces exactly what I want:</p>\n\n<pre><code>addv b0, v0.8b\nclz v0.8b, v0.8b\n</code></pre>\n\n<p>However, <a href=\"https://godbolt.org/g/68qDje\" rel=\"nofollow noreferrer\">gcc produces some mess</a> from that code. The other issue is that it uses uninitialized <code>r</code> and depending on how you setup your build it might not be acceptable. More over, it doesn't seem to work in more complex scenarios. Is there a better/proper way to do it?</p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1524787714, "post_id": 50053428, "comment_id": 87123437, "body": "The OP <a href=\"https://stackoverflow.com/questions/50028458/how-to-treat-result-of-vaddv-u8-in-arm64-as-a-neon-register/50053428#comment87122827_50031818\">actually wants</a> to keep using further SIMD instructions on the result, but this is the right answer to the question as asked (except you&#39;re now counting the 24 leading zeros in an <code>int</code> before the low 8 bits, which is what <code>vclz_u8</code> counts).  The OP should fix the example code, like I commented on his answer."}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1524787920, "post_id": 50053428, "comment_id": 87123476, "body": "Thanks for catching the 32/8 issue. He keeps creating misleading questions which appear to focus on a single NEON register. If he&#39;s really working with large data sets, then he&#39;&#39;ll keep getting incorrect solutions."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524788563, "post_id": 50053428, "comment_id": 87123618, "body": "Exactly.  Plus this question was a mess before I cleaned up the terminology to talk about intrinsics instead of opcodes!  It&#39;s an interesting question, so I wish it was asked correctly."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524792442, "post_id": 50053428, "comment_id": 87124449, "body": "Please read the title of the question. That&#39;s the question,there were no other questions. The body of entire message just shows an example, not some code that I&#39;m trying to optimize, in other words I don&#39;t care if somebody provides alternative piece of the code that does it 10 times faster. I simply want to know in general: &quot;How to treat result of vaddv_u8 in arm64 as a neon register&quot;"}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "reply_to_user": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524795885, "post_id": 50053428, "comment_id": 87125110, "body": "@Pavel - why are you fighting the instruction set? The addv instruction takes a NEON register and gives a scalar result. If you don&#39;t like that, you can do a series of pairwise adds or move the result from addv back into a NEON register."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524796135, "post_id": 50053428, "comment_id": 87125172, "body": "I&#39;m not fighting instruction set. I&#39;m trying to do exactly what instruction set does, but for some strange reason they decided that it&#39;s better to return plain uintX_t from thse new intrinsics instead of neon vector type. OR... perhaps compilers didn&#39;t catch up yet and do not handle well these scalar results when you try to use them the way you&#39;d use them in pure asm."}, {"owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "edited": false, "score": 1, "creation_date": 1524797774, "post_id": 50053428, "comment_id": 87125566, "body": "ok, so it sounds like you&#39;re fighting the compiler. Clang/LLVM will normally produce better results than GCC. If all else fails, write assembly language in a separate .S file. It&#39;s the only way to guarantee that your instructions don&#39;t get changed."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524829046, "post_id": 50053428, "comment_id": 87139419, "body": "@BitBank: GNU C inline asm will reliably avoid your instructions getting changed, without the overhead of a function call.  It&#39;s not ideal because the optimizer still can&#39;t schedule them or understand what they do."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "reply_to_user": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524829396, "post_id": 50053428, "comment_id": 87139625, "body": "@Pavel: you have to realize that intrinsics are 1 step removed from asm instructions.  A <code>uint8x8_t</code> C variable is <i>not</i> a NEON register.  If the compiler wants to, it can spill it to memory, or optimize it away (e.g. treat the intrinsics like any other source code, and optimize the asm to different operations according to the as-if rule, with different intermediate values).  It looks like <code>vaddv_u8</code> is designed badly, but you have to realize that writing intrinsics is very different from writing asm directly.  Please keep this in mind when phrasing your questions."}, {"owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "edited": false, "score": 0, "creation_date": 1524845885, "post_id": 50053428, "comment_id": 87149464, "body": "Off course I understand that <code>uint8x8_t</code> is not guaranteed to be a register :) remove optimization settings and you won&#39;t see any neon at all. But for a simple case if compiler isn&#39;t completely broken I see no reason for it not to be a neon register. By the way, what does &quot;are 1 step removed from asm instructions&quot; mean?"}], "tags": [], "owner": {"reputation": 7979, "user_id": 104109, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1ef4d8fdadddc19a7314267a649bc10c?s=128&d=identicon&r=PG", "display_name": "BitBank", "link": "https://stackoverflow.com/users/104109/bitbank"}, "is_accepted": false, "score": 1, "last_activity_date": 1524788020, "last_edit_date": 1524788020, "creation_date": 1524787106, "answer_id": 50053428, "question_id": 50028458, "link": "https://stackoverflow.com/questions/50028458/how-to-treat-result-of-vaddv-u8-in-arm64-as-a-neon-register/50053428#50053428", "title": "How to treat result of vaddv_u8 in arm64 as a neon register", "body": "<p>Your workaround potentially makes the performance worse. Your problem is written as if you want a scalar result from your single vector of uint8_t's. There's nothing wrong with the vaddv_u8 instruction returning a scalar value. On ARMv8, the \"NEON unit\" is now fully integrated and doesn't have a large penalty for moving data between NEON and ARM registers. Just use the C intrinsic to count leading zeros of the result and you'll have what you need:</p>\n\n<pre><code>int paddClz(const uint8_t* x)\n{\n    uint8x8_t x8 = vld1_u8(x);\n    uint8_t sum = vaddv_u8(x8);\n    return __builtin_clz(sum) - 24;\n}\n</code></pre>\n\n<p>The intrisic will get compiled into the single ARM instruction (CLZ).</p>\n\n<p><strong>If you're working with a larger data set, then write the C code to properly reflect that fact.</strong></p>\n"}, {"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524828460, "post_id": 50060840, "comment_id": 87139100, "body": "<a href=\"https://stackoverflow.com/questions/50028458/how-to-treat-result-of-vaddv-u8-in-arm64-as-a-neon-register/50060840#comment87123343_50028458\">@Bitbank says</a> clang for AArch64 is non-terrible with intrinsics.  Have you tried it recently?  Also that there isn&#39;t a large penalty anymore for NEON&lt;-&gt;integer on ARMv8.  Is that just Apple&#39;s ARMv8 cores, or is that AArch64 in general?"}, {"owner": {"reputation": 4932, "user_id": 1021504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbd1ccace98a4e6473cc18c38dbb6d4?s=128&d=identicon&r=PG", "display_name": "Jake &#39;Alquimista&#39; LEE", "link": "https://stackoverflow.com/users/1021504/jake-alquimista-lee"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524828787, "post_id": 50060840, "comment_id": 87139281, "body": "@PeterCordes I dunno, to be honest. I, too have no in-order ARMv8 device yet ;-) (but soon) As you can see above, transposing matrices is a trivial thing on NEON, and thus, I rarely do any horizontal math. And besides, the destination operand of horizontal instructions on <code>aarch64</code> isn&#39;t an ARM register. When you write in assembly, the result lands in index zero of a vector. It cannot be expressed in <code>intrinsux</code> though which is outrageous. <code>intrinsux</code> badly needs a complete rehaul."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524829085, "post_id": 50060840, "comment_id": 87139439, "body": "Yeah, that seems like a ridiculous design.  Intel intrinics have some similar warts, <a href=\"//stackoverflow.com/q/39318496\">How to merge a scalar into a vector without the compiler wasting an instruction zeroing upper elements? Design limitation in Intel&#39;s intrinsics?</a>.  (Also mentions that it&#39;s hard to get <code>pmovzx</code> with a memory operand.)  But that&#39;s just omission of useful stuff, not wrong types."}, {"owner": {"reputation": 4932, "user_id": 1021504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbd1ccace98a4e6473cc18c38dbb6d4?s=128&d=identicon&r=PG", "display_name": "Jake &#39;Alquimista&#39; LEE", "link": "https://stackoverflow.com/users/1021504/jake-alquimista-lee"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524829733, "post_id": 50060840, "comment_id": 87139816, "body": "@PeterCordes What really sucks is that <code>intrinsux</code> is fragmented between <code>aarch32</code> and <code>aarch64</code>. You cannot use the <code>aarch64</code> specific ones such as <code>trn1&#47;2</code>, <code>zip1&#47;2</code>, <code>uzp1&#47;2</code> if you target <code>aarch32</code>. What&#39;s the point of <code>intrinsux</code> if you have to write separate codes for each architecture anyway?"}], "tags": [], "owner": {"reputation": 4932, "user_id": 1021504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dbd1ccace98a4e6473cc18c38dbb6d4?s=128&d=identicon&r=PG", "display_name": "Jake &#39;Alquimista&#39; LEE", "link": "https://stackoverflow.com/users/1021504/jake-alquimista-lee"}, "is_accepted": false, "score": 2, "last_activity_date": 1524828916, "last_edit_date": 1524828916, "creation_date": 1524826275, "answer_id": 50060840, "question_id": 50028458, "link": "https://stackoverflow.com/questions/50028458/how-to-treat-result-of-vaddv-u8-in-arm64-as-a-neon-register/50060840#50060840", "title": "How to treat result of vaddv_u8 in arm64 as a neon register", "body": "<p>You should really get a test device with an in-order SoC. Apple's A series chips are all out-of-order, by far the most powerful ones to be precise.</p>\n\n<p>Your implementation might run adequately fast on your iPhone, but will be barely any faster than the simplest C versions on in-order cores, straight unusable.</p>\n\n<p>Think twice before you rush into writing loops on NEON.\nYou can avoid the so-called \"horizontal\" operations altogether most of the time by transposing the matrix, then do the \"vertical\" math instead.</p>\n\n<hr>\n\n<pre><code>#define vuzp8(a, b, c) ({ \\\n    c = vuzp_u8(a, b); \\\n    a = c.val[0]; \\\n    b = c.val[1]; \\\n})\n\nvoid foo(uint8_t *pDst, uint8_t *pSrc)\n{\n    uint8x8x4_t top, bottom;\n    uint8x8x2_t temp;\n\n    top = vld4_u8(pSrc);\n    pSrc += 32;\n    bottom = vld4_u8(pSrc);\n\n    vuzp8(top.val[0], bottom.val[0], temp);\n    vuzp8(top.val[1], bottom.val[1], temp);\n    vuzp8(top.val[2], bottom.val[2], temp);\n    vuzp8(top.val[3], bottom.val[3], temp);\n\n    top.val[0] += bottom.val[0];\n    top.val[1] += bottom.val[1];\n    top.val[2] += bottom.val[2];\n    top.val[3] += bottom.val[3];\n\n    top.val[0] += top.val[1];\n    top.val[2] += top.val[3];\n\n    top.val[0] += top.val[2];\n\n    top.val[0] = vclz_u8(top.val[0]);\n\n    vst1_u8(pDst, top.val[0]);\n}\n</code></pre>\n\n<hr>\n\n<p>Another example where you ask yourself if <code>intrinsux</code> makes sense at all. Its clumsiness makes the code much more complex, and it isn't expressive enough to do three 128bit plus one 64bit adds instead of six 64bit ones.</p>\n\n<p>In addition, you have to double check if the compiler didn't mess up anything, again, especially when you do permutations(<code>vzip, vuzp, vtrn</code>)</p>\n\n<p>I think the machine code will be fine on <code>aarch32</code>, but I'm not so sure about <code>aarch64</code> where the permutation instructions are vastly different.</p>\n\n<p>I think that you understand by now why I hate <code>intrinsux</code> like the pest. It's more nuisance than any help.</p>\n\n<p>PS: The <strong>Teclast P10</strong> Android tablet is quite a good candidate as an <code>aarch64</code> test device: All the eight cores are the same, Android 7.12 64bit is installed, and it only costs around $100.</p>\n"}], "owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 697, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1524828916, "creation_date": 1524678506, "last_edit_date": 1524793226, "question_id": 50028458, "link": "https://stackoverflow.com/questions/50028458/how-to-treat-result-of-vaddv-u8-in-arm64-as-a-neon-register", "title": "How to treat result of vaddv_u8 in arm64 as a neon register", "body": "<p><code>vaddv_u8</code> and some other similar new v-intrinsics from AArch64 (arm64) return <code>uint8_t</code>. How can I treat result of this intrinsic as a neon register instead of plain C type?</p>\n\n<p><a href=\"https://godbolt.org/g/vgS6Zm\" rel=\"nofollow noreferrer\">For example</a>:</p>\n\n<pre><code>void paddClz(uint8_t* x)\n{\n    uint8x8_t ret = vdup_n_u8(0);\n    for (int i = 0; i &lt; 8; ++i, x += 8)\n    {\n        uint8x8_t x8 = vld1_u8(x);\n        uint8_t sum = vaddv_u8(x8);\n        uint8x8_t r = vdup_n_u8(sum); //or: r = vset_lane_u8(sum, r, 0);\n        r = vclz_u8(r);\n        ret = vext_u8(ret, r, 1);\n    }\n    vst1_u8(x, ret);\n}\n</code></pre>\n\n<p>what clang generated:</p>\n\n<pre><code>paddClz(unsigned char*): // @paddClz(unsigned char*)\n  mov x8, xzr\n  movi d0, #0000000000000000\n.LBB0_1: // =&gt;This Inner Loop Header: Depth=1\n  ldr d1, [x0, x8]\n  add x8, x8, #8 // =8\n  cmp w8, #64 // =64\n  addv b1, v1.8b\n  dup v1.8b, v1.b[0]   &lt;&lt;== useless! I only need/use/care about v1.b[0]\n  clz v1.8b, v1.8b\n  ext v0.8b, v0.8b, v1.8b, #1\n  b.ne .LBB0_1\n  str d0, [x0, #64]\n  ret\n</code></pre>\n\n<p>As you can see there is a useless <code>dup</code> intrinsic required to get the <code>uint8_t vaddv_u8</code> result converted to a type that will work as an argument for <code>vclz_u8</code>.  I take only first lane from the subsequent <code>vclz_u8</code> result, so actually duplicating it to all lanes would be wasted work.</p>\n\n<p>How can I write it in intrinsics to get that <code>sum</code> in neon typed variable without making the compiler emit useless opcodes?  (And preferably without this extra noise in the source code.) To make it clear and obvious if it wasn't: I'm not asking to optimize or improve that piece of code that I posted; I simply wrote it to show the issue.</p>\n"}, {"tags": ["c++", "visual-studio-2013", "operator-overloading"], "comments": [{"owner": {"reputation": 1033, "user_id": 7667894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9cbd2317a1ddffc1e8f9ca0ff56b6f6?s=128&d=identicon&r=PG&f=1", "display_name": "AlexG", "link": "https://stackoverflow.com/users/7667894/alexg"}, "edited": false, "score": 1, "creation_date": 1524678606, "post_id": 50028428, "comment_id": 87073030, "body": "make operator== a &quot;const&quot; operator"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1524678651, "post_id": 50028428, "comment_id": 87073052, "body": "change: <code>bool operator==(const CMyClass &amp;X) {return m_Data==X.m_Data;}</code> to <code>bool operator==(const CMyClass &amp;X) const {return m_Data==X.m_Data;}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "is_accepted": true, "score": 2, "last_activity_date": 1524680063, "creation_date": 1524680063, "answer_id": 50028861, "question_id": 50028428, "link": "https://stackoverflow.com/questions/50028428/equality-operator-that-supports-comparing-two-references-to-objects/50028861#50028861", "title": "Equality operator that supports comparing two references to objects?", "body": "<p>An equality operator should take its parameter by const reference (since it won't be making any changes to the value), and also be a const function (if it is a class member).</p>\n\n<p>So your declaration should be</p>\n\n<pre><code>bool operator==(const CMyClass &amp;X) const {return m_Data==X.m_Data;}\n</code></pre>\n\n<p>Since your <code>get</code> function returns a <code>const CMyClass &amp;</code>, your original equality comparison is uncallable since it is not a <code>const</code> function and can't be called on a const object.</p>\n"}], "owner": {"reputation": 52465, "user_id": 197229, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/80a68e69526f81d2dc560c47eedd198a?s=128&d=identicon&r=PG", "display_name": "Mr. Boy", "link": "https://stackoverflow.com/users/197229/mr-boy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 50028861, "answer_count": 1, "score": 0, "last_activity_date": 1524680063, "creation_date": 1524678394, "last_edit_date": 1524678938, "question_id": 50028428, "link": "https://stackoverflow.com/questions/50028428/equality-operator-that-supports-comparing-two-references-to-objects", "title": "Equality operator that supports comparing two references to objects?", "body": "<p>This is pre-existing code which works fine.</p>\n\n<pre><code>bool operator==(CMyClass X) {return m_Data==X.m_Data;}\n\nif(a == b){...} //a and b are both CMyClass objects\n</code></pre>\n\n<p>But now I have code:</p>\n\n<pre><code>if(x.get() == y.get()){...} // get() returns CMyClass&amp;\n</code></pre>\n\n<p>I already changed it to take a const reference</p>\n\n<pre><code>bool operator==(const CMyClass &amp;X) {return m_Data==X.m_Data;}\n</code></pre>\n\n<p>And I still get the compile error: </p>\n\n<blockquote>\n  <p>error C2678: binary '==' : no operator found which takes a left-hand\n  operand of type 'const CMyClass' (or there is no acceptable\n  conversion)</p>\n</blockquote>\n\n<p>Do I need a simple amendment to my existing operator, or to add a new 2-arg version?\nShould equality operators not take const ref parameters as best practice anyway?</p>\n"}, {"tags": ["c++", "error-handling", "enums", "c++17"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1524678822, "post_id": 50028408, "comment_id": 87073158, "body": "<a href=\"http://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/variant</a> ?"}], "answers": [{"comments": [{"owner": {"reputation": 856, "user_id": 3768365, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/g6ITx.jpg?s=128&g=1", "display_name": "p0fi", "link": "https://stackoverflow.com/users/3768365/p0fi"}, "edited": false, "score": 0, "creation_date": 1524691186, "post_id": 50028590, "comment_id": 87079086, "body": "Thanks a lot, it almost works completely the way I want. The only thing left is that I currently still need to specify the concrete type if I want to return it from a function. <code>auto getStuff() -&gt; std::variant&lt;std::string, Error&lt;int&gt;&gt;;</code> is there also a way around this?"}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "reply_to_user": {"reputation": 856, "user_id": 3768365, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/g6ITx.jpg?s=128&g=1", "display_name": "p0fi", "link": "https://stackoverflow.com/users/3768365/p0fi"}, "edited": false, "score": 0, "creation_date": 1524692058, "post_id": 50028590, "comment_id": 87079440, "body": "Check my updated answer. If this is what you want please vote and/or accept this as the answer so otherwise will know."}, {"owner": {"reputation": 856, "user_id": 3768365, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/g6ITx.jpg?s=128&g=1", "display_name": "p0fi", "link": "https://stackoverflow.com/users/3768365/p0fi"}, "edited": false, "score": 0, "creation_date": 1524693194, "post_id": 50028590, "comment_id": 87079853, "body": "How would I call it? <code>auto result = getStuff()</code> gives me <code>No matching function for cal</code>"}, {"owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "reply_to_user": {"reputation": 856, "user_id": 3768365, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/g6ITx.jpg?s=128&g=1", "display_name": "p0fi", "link": "https://stackoverflow.com/users/3768365/p0fi"}, "edited": false, "score": 0, "creation_date": 1524693301, "post_id": 50028590, "comment_id": 87079882, "body": "you will have to specify <code>getStuff&lt;int&gt;</code> because you don&#39;t have a parameter for getStuff(). if  you can have something like , getStuff(T input), then the compiler will deduce the type for you."}, {"owner": {"reputation": 856, "user_id": 3768365, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/g6ITx.jpg?s=128&g=1", "display_name": "p0fi", "link": "https://stackoverflow.com/users/3768365/p0fi"}, "edited": false, "score": 0, "creation_date": 1524694192, "post_id": 50028590, "comment_id": 87080152, "body": "It actually has a string as a parameter, I removed it to simplify it a bit."}], "tags": [], "owner": {"reputation": 10151, "user_id": 1153165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fee10843adffc656f32cdfa67aa425c5?s=128&d=identicon&r=PG", "display_name": "CS Pei", "link": "https://stackoverflow.com/users/1153165/cs-pei"}, "is_accepted": true, "score": 0, "last_activity_date": 1524692008, "last_edit_date": 1524692008, "creation_date": 1524679071, "answer_id": 50028590, "question_id": 50028408, "link": "https://stackoverflow.com/questions/50028408/how-to-write-an-error-struct-which-can-contain-different-strongly-typed-enums-as/50028590#50028590", "title": "How to write an error struct which can contain different strongly typed enums as the error code?", "body": "<p>What you need to do is to add a ctor, as the following</p>\n\n<pre><code>Error(T const t, const string s)  : code(t), message(s) {}\n</code></pre>\n\n<p>Then by using a c++17 compliant compiler you will be all set.</p>\n\n<p>You can check it on Godbolt, <a href=\"https://godbolt.org/g/Dyznp8\" rel=\"nofollow noreferrer\">https://godbolt.org/g/Dyznp8</a></p>\n\n<p>Note that this uses C++17 template argument deduction for class template constructors instead of using variant.</p>\n\n<p>The full sample code is listed here for your reference,</p>\n\n<pre><code>#include &lt;string&gt;\nusing namespace std;\n\nenum class NetworkErrorCode {\n    OK = 0,\n    CONNECTION_FAILURE,\n    EMPTY_RESPONSE,\n    HOST_RESOLUTION_FAILURE,\n    UNKNOWN_ERROR = 1000\n};\n\ntemplate&lt;typename T&gt;\nstruct Error\n{\n  T const code;\n  std::string const message;\n  Error(T const t, const string s)  : code(t), message(s) {}\n};\n\ntemplate &lt;typename T&gt;\nauto getStuff() -&gt; variant&lt;string, Error&lt;T&gt;&gt; {\n    variant&lt;string, Error&lt;T&gt;&gt; w;\n    return w;\n}\n\nint main() {\n    int i = 2;\n    if (i == 1) {\n        Error{NetworkErrorCode::CONNECTION_FAILURE, \"some message\"};\n    }\n}\n</code></pre>\n\n<p>You can compile it with <code>-std=c++17</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1524683414, "last_edit_date": 1524683414, "creation_date": 1524679148, "answer_id": 50028614, "question_id": 50028408, "link": "https://stackoverflow.com/questions/50028408/how-to-write-an-error-struct-which-can-contain-different-strongly-typed-enums-as/50028614#50028614", "title": "How to write an error struct which can contain different strongly typed enums as the error code?", "body": "<pre><code>using error_code = std::variant&lt;int, NetworkErrorCode, AnotherErrorCode /*etc*/&gt;;\n\nstruct Error {\n  error_code code;\n  std::string message;\n};\n</code></pre>\n\n<p>this requires you to list all of the error code types in one spot; but this is less work than writing the constructors you want to write.</p>\n\n<pre><code>Error{NetworkErrorCode::CONNECTION_FAILURE, \"some message\"}\n</code></pre>\n\n<p>works without writing additional constructors because variant will convert from any of its possible types.</p>\n\n<p>To get access you have <code>std::visit</code> or <code>.get&lt;Type&gt;()</code> or the like.  <code>==</code> on <code>error_code</code> should usually just work (sometimes you may have to cast the other argument to <code>error_code</code> explicitly).</p>\n"}], "owner": {"reputation": 856, "user_id": 3768365, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/g6ITx.jpg?s=128&g=1", "display_name": "p0fi", "link": "https://stackoverflow.com/users/3768365/p0fi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 50028590, "answer_count": 2, "score": 1, "last_activity_date": 1524692008, "creation_date": 1524678355, "question_id": 50028408, "link": "https://stackoverflow.com/questions/50028408/how-to-write-an-error-struct-which-can-contain-different-strongly-typed-enums-as", "title": "How to write an error struct which can contain different strongly typed enums as the error code?", "body": "<p>I want to write an simple error struct which contains an error code of some kind and a <code>std::string</code> as the message. The error code could be a simple int, or any kind of strongly typed enum e.g.:</p>\n\n<pre><code>enum class NetworkErrorCode {\nOK = 0,\nCONNECTION_FAILURE,\nEMPTY_RESPONSE,\nHOST_RESOLUTION_FAILURE,\nUNKNOWN_ERROR = 1000,\n};\n</code></pre>\n\n<p>I could write a struct which has different overloaded constructors for each different enum it could contain which all convert them into <code>int</code> to store them. But in this case I would loose the possibility to compare the error code against the actual enum values later on. I would also need to write a comparison operator for each of the possible types. </p>\n\n<p>I could also use templates like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct Error\n{\n  T const code;\n  std::string const message;\n};\n</code></pre>\n\n<p>But now I would not be able to create an Error like this:   </p>\n\n<p><code>Error{NetworkErrorCode::CONNECTION_FAILURE, \"some message\"}</code>.  </p>\n\n<p>I would need to write:</p>\n\n<p><code>Error&lt;NetworkErrorCode&gt;{NetworkErrorCode::CONNECTION_FAILURE, \"some message\"}</code>.</p>\n\n<p>Is there a way to avoid writing a lot of boiler plate code like in the first solution while still maintaining the possibility to create them without explicitly specifying the typename? I have heard about template argument deduction for class template constructors in c++17 but I cant get my head around it. </p>\n"}, {"tags": ["c++", "tree", "segmentation-fault"], "comments": [{"owner": {"reputation": 13847, "user_id": 5902074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96c5238b54165bd4ec723f5096cd010?s=128&d=identicon&r=PG&f=1", "display_name": "zdenek", "link": "https://stackoverflow.com/users/5902074/zdenek"}, "edited": false, "score": 4, "creation_date": 1524677412, "post_id": 50028082, "comment_id": 87072390, "body": "In <code>tree()</code> you access variable <code>root</code>, but you didn&#39;t initialize it."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 7340923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a8226188354ebcbd92cd8c97fe3e20?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyFails", "link": "https://stackoverflow.com/users/7340923/jimmyfails"}, "edited": false, "score": 0, "creation_date": 1524678199, "post_id": 50028179, "comment_id": 87072829, "body": "Thanks, i initailised it and it worked. But I didn&#39;t get your last sentence.  What do you mean by encapsulating node entirely? Can you give me an example.."}, {"owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "reply_to_user": {"reputation": 113, "user_id": 7340923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a8226188354ebcbd92cd8c97fe3e20?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyFails", "link": "https://stackoverflow.com/users/7340923/jimmyfails"}, "edited": false, "score": 0, "creation_date": 1524678358, "post_id": 50028179, "comment_id": 87072899, "body": "@JimmyFails I mean make <code>node</code> private to <code>tree</code> so users of the <code>tree</code> class don&#39;t need to know about it or interact with it at all.  Make it an implementation detail rather than part of <code>tree</code>&#39;s interface.  For example, <code>std::map</code> has a <code>node</code> class that it uses internally, but to use <code>std::map</code> you don&#39;t have to know or think about nodes."}], "tags": [], "owner": {"reputation": 19619, "user_id": 4151599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dpkLj.jpg?s=128&g=1", "display_name": "Miles Budnek", "link": "https://stackoverflow.com/users/4151599/miles-budnek"}, "is_accepted": false, "score": 5, "last_activity_date": 1524677427, "creation_date": 1524677427, "answer_id": 50028179, "question_id": 50028082, "link": "https://stackoverflow.com/questions/50028082/tree-implementation-giving-segmentation-faultcore-dump-error-c-11/50028179#50028179", "title": "Tree Implementation giving segmentation fault(core dump) error c++ 11", "body": "<p><code>t.root</code> is uninitialized, so writing to <code>root-&gt;left</code> and <code>root-&gt;right</code> in <code>tree</code>'s constructor invokes undefined behavior.</p>\n\n<p>Right now, your <code>tree</code> class doesn't really make much sense.  It contains a <code>root</code> node pointer, but you never use it.  <code>createnode</code> could just be a free function or a static member of <code>node</code>.  Better would be to encapsulate nodes entirely and just have <code>tree</code> have an <code>insert</code> method that takes an <code>int</code>, creates a new node, and inserts it at the appropriate place in the tree.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": false, "score": 0, "last_activity_date": 1524677723, "creation_date": 1524677723, "answer_id": 50028259, "question_id": 50028082, "link": "https://stackoverflow.com/questions/50028082/tree-implementation-giving-segmentation-faultcore-dump-error-c-11/50028259#50028259", "title": "Tree Implementation giving segmentation fault(core dump) error c++ 11", "body": "<p>Your problem is in the constructor: </p>\n\n<pre><code>class tree{\n    public:\n    node *root;\n    tree(){\n        root-&gt;left=NULL;\n        root-&gt;right=NULL;\n    }\n</code></pre>\n\n<p>You declare <code>root</code> in the class, but you never initialize it. So when you dereference it in the body of the constructor, you are dereferencing a garbage pointer that could point to anything. \n Strictly speaking, what you are doing there is Undefined Behaviour and the compiler is well within its right to generate <em>whatever it likes</em> or even nothing at all for that bit of code.</p>\n\n<p>Unrelated nitpick: don't use <code>NULL</code> in new code, use <code>nullptr</code>.</p>\n"}], "owner": {"reputation": 113, "user_id": 7340923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2a8226188354ebcbd92cd8c97fe3e20?s=128&d=identicon&r=PG&f=1", "display_name": "JimmyFails", "link": "https://stackoverflow.com/users/7340923/jimmyfails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1524689546, "creation_date": 1524677071, "last_edit_date": 1524689546, "question_id": 50028082, "link": "https://stackoverflow.com/questions/50028082/tree-implementation-giving-segmentation-faultcore-dump-error-c-11", "title": "Tree Implementation giving segmentation fault(core dump) error c++ 11", "body": "<p>Recently, I coded linked list with C++11. Using those concepts, I tried to code tree{a very basic tree} implementation in C++11. But it is giving me a Segmentation fault. I checked online and found out that it happens when the program tries to write a read access memory or tries to access free memory, but I can't figure out how it's happening here. Please help..</p>\n\n<pre><code>#include&lt;iostream&gt;\n#include&lt;cstdlib&gt;\nusing namespace std;\nstruct node{\n    node *left;\n    node *right;\n    int key;\n};\nclass tree{\n    public:\n    node *root;\n    tree(){\n        root-&gt;left=NULL;\n        root-&gt;right=NULL;\n    }\n    node *createnode(int data){\n        node *temp=new node;\n        temp-&gt;key=data;\n        temp-&gt;left=NULL;\n        temp-&gt;right=NULL;\n        return temp;\n    }\n};\nint main(){\n    tree t;\n    node *root;\n    root=t.createnode(1);\n    //root-&gt;left=t.createnode(2);\n    //root-&gt;right=t.createnode(3);\n    //root-&gt;left-&gt;left=t.createnode(9);\n    //root-&gt;left-&gt;right=t.createnode(7);\nreturn 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/RZkNB.png\" rel=\"nofollow noreferrer\">check image</a></p>\n"}, {"tags": ["c++", "output", "long-integer", "collatz"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1524677188, "post_id": 50028065, "comment_id": 87072290, "body": "I think you have exceeded the maximum value for a 64 bit integer."}, {"owner": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1524677233, "post_id": 50028065, "comment_id": 87072308, "body": "yeah, I thought so too, any way to make it bigger? xD"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1524677257, "post_id": 50028065, "comment_id": 87072322, "body": "You need a big int library."}, {"owner": {"reputation": 4732, "user_id": 8477999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f8172e1919af53269de92316dcf03a03?s=128&d=identicon&r=PG&f=1", "display_name": "Gem Taylor", "link": "https://stackoverflow.com/users/8477999/gem-taylor"}, "edited": false, "score": 0, "creation_date": 1524678236, "post_id": 50028065, "comment_id": 87072846, "body": "Or if you are sat down bored, write your own big int functionality as an excercise? It can be quite easy to do if you use base 32bit and 64bit operations, though it is easier to understand and debug if you use base 8bit and 16bit operations"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "edited": false, "score": 0, "creation_date": 1524677409, "post_id": 50028157, "comment_id": 87072389, "body": "Thank you, I will try it!"}, {"owner": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "edited": false, "score": 0, "creation_date": 1524678584, "post_id": 50028157, "comment_id": 87073022, "body": "Am I doing anything wrong? it doesn&#39;t give any errors, but when I start it, it stops immediately:"}, {"owner": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "edited": false, "score": 0, "creation_date": 1524678596, "post_id": 50028157, "comment_id": 87073024, "body": "#include &lt;iomanip&gt;     #include &lt;ttmath/ttmath.h&gt;     using namespace std;      int main() {         ttmath::Int&lt;1&gt; n;         cin &gt;&gt; n;         cout &lt;&lt; setw(5) &lt;&lt; n;"}, {"owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "reply_to_user": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "edited": false, "score": 1, "creation_date": 1524678852, "post_id": 50028157, "comment_id": 87073177, "body": "@LucasKnook Please post your new code as a separate question. It&#39;s not easy to help debug via comments. (And you&#39;ll get a lot more people looking at it.)"}], "tags": [], "owner": {"reputation": 368279, "user_id": 1288, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fc763c6ff6c160ddad05741e87e517b6?s=128&d=identicon&r=PG", "display_name": "Bill the Lizard", "link": "https://stackoverflow.com/users/1288/bill-the-lizard"}, "is_accepted": false, "score": 1, "last_activity_date": 1524677601, "last_edit_date": 1524677601, "creation_date": 1524677362, "answer_id": 50028157, "question_id": 50028065, "link": "https://stackoverflow.com/questions/50028065/collatz-conjecture-c-weird-output-with-big-numbers/50028157#50028157", "title": "Collatz Conjecture c++ weird output with big numbers", "body": "<p>You've exceeded the limits of <code>long long</code> integer values. The first value in your output is truncated to be much smaller than your input, then when you get to <code>4611686018427387903</code> it's multiplied by 3, since it isn't even. That's when it overflows the type and wraps around into negative values. You'll need to use a BigInteger library, like <a href=\"https://www.ttmath.org/\" rel=\"nofollow noreferrer\">TTMath</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "edited": false, "score": 0, "creation_date": 1524819551, "post_id": 50029080, "comment_id": 87134061, "body": "Collatz Conjecture is a very simple math problem, no one know why it always ends with one, I only check if it reached the number one yet, it will not go on forever, it will always stop at 1."}, {"owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "reply_to_user": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "edited": false, "score": 0, "creation_date": 1524845334, "post_id": 50029080, "comment_id": 87149205, "body": "No, thats why it is called &quot;conjecture&quot;, you have to check if on your way you are not computing the same numbers over and over again."}, {"owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "reply_to_user": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "edited": false, "score": 0, "creation_date": 1524852330, "post_id": 50029080, "comment_id": 87152334, "body": "Added code for your reference, if you don&#39;t know what I&#39;m talking about, your snippet is incorrect. If you downvoted please revert."}], "tags": [], "owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "is_accepted": false, "score": -1, "last_activity_date": 1524852227, "last_edit_date": 1524852227, "creation_date": 1524680937, "answer_id": 50029080, "question_id": 50028065, "link": "https://stackoverflow.com/questions/50028065/collatz-conjecture-c-weird-output-with-big-numbers/50029080#50029080", "title": "Collatz Conjecture c++ weird output with big numbers", "body": "<p>Basically as other people pointed out you don't check for overflow. But I would like to point out different thing, your code is still not valid as you don't check if you got into endless loop, when multiplication and division sequence generates the same numbers, your while will never end.</p>\n\n<p>This is correct code with simple overflow detection:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;unordered_set&gt;\n\nbool colatazConjecture(int n) {\n    std::unordered_set&lt;int&gt; localComputed;\n    int newN = 0;\n\n    while (n != 1) {\n        if (!localComputed.emplace(n).second) {\n            throw \"Cycle detected\";\n        }\n\n        newN = n;\n        if (n &amp; 0x1) {\n            newN = 3*n + 1;\n            if (newN &lt;= n) {\n                throw std::overflow_error(\"Overflow for \" + std::to_string(newN));\n            }\n        } else {\n            newN &gt;&gt;= 1;\n        }\n        n = newN;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9664991, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jP8r_FxEaSk/AAAAAAAAAAI/AAAAAAAAAcM/U12Cnj6H5Jo/photo.jpg?sz=128", "display_name": "Lucas Knook", "link": "https://stackoverflow.com/users/9664991/lucas-knook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 231, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1529361128, "creation_date": 1524677006, "last_edit_date": 1524680377, "question_id": 50028065, "link": "https://stackoverflow.com/questions/50028065/collatz-conjecture-c-weird-output-with-big-numbers", "title": "Collatz Conjecture c++ weird output with big numbers", "body": "<p>So, I was bored, and decided to make something completely random, then I came across the collatz conjecture: start with any positive number, and if it is even, devide by two. If it is odd, multiply by three and add one. When repeating this, you will end at the number one. So I made this code:</p>\n\n<p>//Collatz Conjecture by Lucas Knook</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main() {\n    long long n;\n    cin &gt;&gt; n;\n    cout &lt;&lt; setw(5) &lt;&lt; n;\n\n    while(true){\n        if(n % 2 == 0 &amp;&amp; n != 1){\n            //is even\n            cout &lt;&lt; \" E\" &lt;&lt; endl;\n            n /=2;\n            cout &lt;&lt; setw(5) &lt;&lt; n;\n        }\n        else if(n != 1){\n            //is odd\n            cout &lt;&lt; \" O\" &lt;&lt; endl;\n            n = n * 3 + 1;\n            cout &lt;&lt; setw(5) &lt;&lt; n;\n        }\n        else break;\n    }\n    cout &lt;&lt; \" O\" &lt;&lt; endl &lt;&lt; endl &lt;&lt; \"end loop\";\n    return 0;\n}\n</code></pre>\n\n<p>I am still learning c++ (I just completed the sololearn course, and I am about to get the \"C++ for dummies all-in-one\" book), but I think this is a good start for me, and it works.</p>\n\n<p>There is just one little problem: If I use big numbers, it does stop at one, and gets the odd and even right, but...</p>\n\n<p>Look at this first part of the output when entering \n\"<code>1000000000000000000000000</code>\" :</p>\n\n<pre><code>9223372036854775807 O\n9223372036854775806 E\n4611686018427387903 O\n-4611686018427387906 E\n-2305843009213693953 O\n-6917529027641081858 E\n-3458764513820540929 O\n8070450532247928830 E\n4035225266123964415 O\n-6341068275337658370 E\n-3170534137668829185 O\n8935141660703064062 E\n4467570830351532031 O\n-5044031582654955522 E\n-2522015791327477761 O\n-7566047373982433282 E\n-3783023686991216641 O\n7097673012735901694 E\n3548836506367950847 O\n-7800234554605699074 E\n</code></pre>\n\n<p>Ehm, that's a bit weird, isn't it? (don't look at the line breaks, it is perfectly stacked, it just doesn't show here, because I copied the output)</p>\n\n<p>Can someone please explain me why this is happening and how to fix it?</p>\n"}, {"tags": ["c++", "visual-studio", "variadic-templates", "eigen"], "answers": [{"tags": [], "owner": {"reputation": 433, "user_id": 8411980, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/43f65b4972600a0d9610a0ddcd587fe1?s=128&d=identicon&r=PG&f=1", "display_name": "AOK", "link": "https://stackoverflow.com/users/8411980/aok"}, "is_accepted": false, "score": 1, "last_activity_date": 1524677138, "creation_date": 1524677138, "answer_id": 50028098, "question_id": 50027994, "link": "https://stackoverflow.com/questions/50027994/eigen-having-issues-with-variadic-template-expansion-of-the-rows-template/50028098#50028098", "title": "Eigen having issues with variadic template expansion of the Rows template", "body": "<p>Ok, so I figured it out. Because <code>Eigen::Matrix</code> uses default values for some of the constructor parameters, which in this case depend on the Rows/Cols parameter (where Rows is a variadic template) then the compiler gets confused. I explicitly listed out all the parameters, and it compiled:</p>\n\n<pre><code>using grid_type = std::tuple&lt;Eigen::Matrix&lt;Types, Sizes, 1, Eigen::AutoAlign | false, Sizes,1&gt;...&gt;;\n</code></pre>\n\n<p>However, this still doesn't satiate me, because it is wierd that intellisense can deal with this but the compiler cannot.</p>\n"}, {"tags": [], "owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 1, "last_activity_date": 1524736449, "creation_date": 1524736449, "answer_id": 50040006, "question_id": 50027994, "link": "https://stackoverflow.com/questions/50027994/eigen-having-issues-with-variadic-template-expansion-of-the-rows-template/50040006#50040006", "title": "Eigen having issues with variadic template expansion of the Rows template", "body": "<p>Indeed, this compiles fine with GCC, clang, and ICC, but no luck with MSVC. Here is a nicer workaround for MSVC:</p>\n\n<pre><code>template&lt;typename Scalar,int Rows&gt;\nusing Mat = Eigen::Matrix&lt;Scalar, Rows, 1&gt;;\n\nusing grid_type = std::tuple&lt;Mat&lt;Types,Sizes&gt;...&gt;;\n</code></pre>\n"}], "owner": {"reputation": 433, "user_id": 8411980, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/43f65b4972600a0d9610a0ddcd587fe1?s=128&d=identicon&r=PG&f=1", "display_name": "AOK", "link": "https://stackoverflow.com/users/8411980/aok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 50040006, "answer_count": 2, "score": 0, "last_activity_date": 1524736449, "creation_date": 1524676771, "last_edit_date": 1592644375, "question_id": 50027994, "link": "https://stackoverflow.com/questions/50027994/eigen-having-issues-with-variadic-template-expansion-of-the-rows-template", "title": "Eigen having issues with variadic template expansion of the Rows template", "body": "<p>I am trying to create a grid that uses an <code>Eigen:Matrix</code>; see <a href=\"http://eigen.tuxfamily.org/index.php?title=Main_Page\" rel=\"nofollow noreferrer\">here</a> for library.</p>\n<p>So let's take a look at a minimal piece of code:</p>\n<pre><code>template&lt;typename Types, int... Sizes&gt; class Grid;\n\ntemplate&lt;typename... Types, int... Sizes&gt;\nclass Grid&lt;std::tuple&lt;Types...&gt;, Sizes...&gt;\n{\npublic:\n    using grid_type = std::tuple&lt;Eigen::Matrix&lt;Types, Sizes, 1&gt;...&gt;;\n};\n</code></pre>\n<p>and then in <code>main</code>, for example:</p>\n<pre><code>Grid&lt;std::tuple&lt;long, int&gt;, -1, 10000&gt;::grid_type;\n</code></pre>\n<p>I get the following three errors in VS2017 when compiling:</p>\n<blockquote>\n<p>Error C3548   '_Rows': parameter pack cannot be used in this context</p>\n<p>Error C2976   'Eigen::Matrix': too few template arguments</p>\n<p>Error C3546   '...': there are no parameter packs available to expand</p>\n<p>Error C3203   'Matrix': unspecialized class template can't be used as a template argument for template parameter '_Types', expected a real type</p>\n</blockquote>\n<p>Now, if we were to use something like an <code>std::array</code> instead, then even with the -1 parameter everything is fine (well it's just converted to a positive <code>size_t</code>):</p>\n<pre><code>using grid_type = std::tuple&lt;std::array&lt;Types, Sizes&gt;...&gt;;\n</code></pre>\n<p><code>grid_type</code> comes out as expected.</p>\n<p>Now what is also bizzare, VS's intellisense is able to able to evaluate the Eigen version correctly, but it can't compile it...</p>\n"}, {"tags": ["c++", "clang", "language-lawyer"], "comments": [{"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "edited": false, "score": 0, "creation_date": 1524677329, "post_id": 50027942, "comment_id": 87072356, "body": "Interesting... Visual Studio will happily compile this without warning, but intellisense highlights the same error as Clang. Coincidence?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1524677538, "post_id": 50027942, "comment_id": 87072475, "body": "&quot;<a href=\"http://eel.is/c++draft/expr.ref#2.sentence-5\" rel=\"nofollow noreferrer\"><i>the id-expression shall name a member of the class or of one of its base classes.</i></a>&quot; seems relevant."}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 0, "creation_date": 1524677716, "post_id": 50027942, "comment_id": 87072585, "body": "@Rakete1111 But maybe enum values can be considered members (kind of static?) of the enclosing class."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1524678066, "post_id": 50027942, "comment_id": 87072754, "body": "@HolyBlackCat See [class.member]p1 and p3. They are considered members of the class, as weird as it sounds."}, {"owner": {"reputation": 322, "user_id": 2778921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BtLM3.png?s=128&g=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/2778921/florian"}, "edited": false, "score": 0, "creation_date": 1551638041, "post_id": 50027942, "comment_id": 96703856, "body": "How should one access nested (enum) class members, then?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 2, "creation_date": 1524679132, "post_id": 50028333, "comment_id": 87073315, "body": "Regarding what is and isn&#39;t a member, it seems like it&#39;s the same as <code>struct S { struct T { static const int t = 0; }; } s; int main() { return s.T::t; }</code> which is rejected by gcc, clang, Intel and MSVC alike. If that isn&#39;t accepted, I don&#39;t see why the <code>enum</code> equivalent should be any different, so I&#39;m having trouble seeing it as a bug in the standard, rather than just a bug in gcc (and MSVC)."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "edited": false, "score": 1, "creation_date": 1524679965, "post_id": 50028333, "comment_id": 87073734, "body": "@hvd And what I&#39;m saying is that that too should be changed, as it doesn&#39;t make any sense IMO. :)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 2, "creation_date": 1524680437, "post_id": 50028333, "comment_id": 87073968, "body": "The syntax <code>s.T::t</code> already has a well-established meaning, which is to access members from a base class even if they may have been hidden by a derived class. I suppose it&#39;s possible to make an exception that <code>.</code>&#39;s LHS expression doesn&#39;t need to be derived from the declaring type if it wouldn&#39;t actually be used, but that would allow a lot of undesirable stuff too, and break existing code relying on SFINAE."}, {"owner": {"reputation": 583, "user_id": 7225714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nS9Ob.png?s=128&g=1", "display_name": "danpla", "link": "https://stackoverflow.com/users/7225714/danpla"}, "edited": false, "score": 1, "creation_date": 1524681533, "post_id": 50028333, "comment_id": 87074537, "body": "<a href=\"http://eel.is/c++draft/expr.ref#4.4\" rel=\"nofollow noreferrer\">expr.ref#4.4</a> also says that an expression E1.E2 is ill-formed, unless (expr.ref#4.4) E2 is a member enumerator. <a href=\"http://eel.is/c++draft/dcl.enum#11\" rel=\"nofollow noreferrer\">dcl.enum#11</a> says that scoped enumerator has the scope of its enum, and only an enumerator declared in class scope (that is, an unscoped enum) can be referred to using the class member access operators."}, {"owner": {"reputation": 322, "user_id": 2778921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BtLM3.png?s=128&g=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/2778921/florian"}, "edited": false, "score": 0, "creation_date": 1551638088, "post_id": 50028333, "comment_id": 96703875, "body": "@Rakete1111: +1 if you would be so kind to explaing how one should access nested (enum) class members, then?"}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 322, "user_id": 2778921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BtLM3.png?s=128&g=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/2778921/florian"}, "edited": false, "score": 0, "creation_date": 1551638250, "post_id": 50028333, "comment_id": 96703929, "body": "@Florian well naming the class always works: <code>S::EnumClass::one</code> or <code>decltype(s)::EnumClass::one</code>."}, {"owner": {"reputation": 322, "user_id": 2778921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BtLM3.png?s=128&g=1", "display_name": "Florian", "link": "https://stackoverflow.com/users/2778921/florian"}, "edited": false, "score": 0, "creation_date": 1551688944, "post_id": 50028333, "comment_id": 96717077, "body": "@Rakete1111: For template classes the former is going to be a mess, the latter one works - yet this seems overly cumbersome to me... (and similar to a <a href=\"https://stackoverflow.com/questions/54874432/abbreviate-argument-to-member-function-expecting-introduced-type-enum-class/54886510#54886510\">recent question</a> I asked.)"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 9, "last_activity_date": 1524685718, "last_edit_date": 1524685718, "creation_date": 1524677993, "answer_id": 50028333, "question_id": 50027942, "link": "https://stackoverflow.com/questions/50027942/why-doesnt-clang-allow-accessing-a-nested-enum-class-through-an-instance/50028333#50028333", "title": "Why doesn&#39;t clang allow accessing a nested enum class through an instance?", "body": "<p>This is a bug in gcc<sup>1</sup>. The relevant wording is in <a href=\"http://eel.is/c++draft/expr.ref#2\" rel=\"nofollow noreferrer\">[expr.ref]p2</a>:</p>\n\n<blockquote>\n  <p>In either case, the <em>id-expression</em> [here: <code>EnumClass::one</code>] shall name a member of the class or of one of its base classes. </p>\n</blockquote>\n\n<p><code>EnumClass::one</code> does not refer to a member of a class, it's a member of an enum. It doesn't matter whether that enum is part of the class, it's just that the member <code>one</code> itself is not part of the class.</p>\n\n<p>But is <code>Enum::one</code> part of the class? Yes, according to <a href=\"http://eel.is/c++draft/class#mem-1\" rel=\"nofollow noreferrer\">[class.member]p1</a>:</p>\n\n<blockquote>\n  <p>Members of a class are data members, member functions, nested types, enumerators, and member templates and specializations thereof.</p>\n</blockquote>\n\n<p>and made more explicit in <a href=\"http://eel.is/c++draft/class#mem-3\" rel=\"nofollow noreferrer\">[class.member]p3</a>:</p>\n\n<blockquote>\n  <p>The enumerators of an unscoped enumeration defined in the class are members of the class.</p>\n</blockquote>\n\n<hr>\n\n<p><sup>1</sup>: I would even go as far as to call it a bug in the standard, as there doesn't seem to be any (technical) reason why this should be disallowed and I think it would be a good idea to allow it. There are talks about allowing it though, so let's see what the committee decides.</p>\n"}], "owner": {"reputation": 583, "user_id": 7225714, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nS9Ob.png?s=128&g=1", "display_name": "danpla", "link": "https://stackoverflow.com/users/7225714/danpla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 311, "favorite_count": 0, "accepted_answer_id": 50028333, "answer_count": 1, "score": 9, "last_activity_date": 1524685718, "creation_date": 1524676594, "last_edit_date": 1524684928, "question_id": 50027942, "link": "https://stackoverflow.com/questions/50027942/why-doesnt-clang-allow-accessing-a-nested-enum-class-through-an-instance", "title": "Why doesn&#39;t clang allow accessing a nested enum class through an instance?", "body": "<p>Consider the following code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct S {\n    enum class EnumClass {\n        one\n    } ;\n\n    enum Enum {\n        one\n    };\n};\n\nint main()\n{\n    S s;\n    S::EnumClass e = s.EnumClass::one; // &lt;- Doesn't compile with clang\n    S::Enum e11 = s.Enum::one;\n    S::Enum e12 = s.one;\n}\n</code></pre>\n\n<p>Everything works with GCC, but clang (neither 3.8 nor 3.9) does not compile <code>s.EnumClass::one</code>, giving an error: <code>'S::EnumClass::one' is not a member of class 'S'</code>.</p>\n\n<p>Given the fact that unscoped enums work fine, it seems like a bug.</p>\n"}, {"tags": ["c++", "compiler-construction", "global-variables", "llvm"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 3, "creation_date": 1524676696, "post_id": 50027905, "comment_id": 87072044, "body": "I don&#39;t know how many people know what an IR is. I certainly don&#39;t."}, {"owner": {"reputation": 4217, "user_id": 9614249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eJfci.png?s=128&g=1", "display_name": "Increasingly Idiotic", "link": "https://stackoverflow.com/users/9614249/increasingly-idiotic"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 6, "creation_date": 1524676953, "post_id": 50027905, "comment_id": 87072169, "body": "@RSahu  <a href=\"https://en.wikipedia.org/wiki/Intermediate_representation\" rel=\"nofollow noreferrer\">IR</a> stands for &quot;intermediate representation&quot;. This should be prerequisite knowledge for dealing with compiler/llvm questions."}], "answers": [{"tags": [], "owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "is_accepted": true, "score": 0, "last_activity_date": 1532683096, "creation_date": 1532683096, "answer_id": 51554734, "question_id": 50027905, "link": "https://stackoverflow.com/questions/50027905/painlessly-change-type-of-a-globalvariable/51554734#51554734", "title": "Painlessly change type of a GlobalVariable", "body": "<p>I haven't found any way to do this in simple way, but the negative answer is also an answer.</p>\n\n<p>I ended up carefully rewriting the whole module. <code>PHIInst</code>s were particulary nasty.</p>\n"}], "owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 51554734, "answer_count": 1, "score": 1, "last_activity_date": 1532683096, "creation_date": 1524676445, "question_id": 50027905, "link": "https://stackoverflow.com/questions/50027905/painlessly-change-type-of-a-globalvariable", "title": "Painlessly change type of a GlobalVariable", "body": "<p>In my IR I have a string global constant:</p>\n\n<pre><code>@.str = private unnamed_addr constant [6 x i8] c\"Hello\\00\", align 1\n</code></pre>\n\n<p>This constant is used in various places across the module. I need to extend its initializer by few bytes. There is a GlobalVariable method to change it (<code>setInitializer()</code>), but it doesn't work, because the new initializer has different size and, thus, type.</p>\n\n<p>It isn't possible to do <code>str-&gt;RAUW(newStr)</code> because of the same difference in types. However, my code doesn't use that array size information, so it should be safe to just \"hack\" the type change.</p>\n\n<p>Is there an easy way to do this without rewriting my whole IR?</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 2, "creation_date": 1524676486, "post_id": 50027893, "comment_id": 87071940, "body": "There isn&#39;t enough information in the post to identify the source of the problem. Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 13847, "user_id": 5902074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96c5238b54165bd4ec723f5096cd010?s=128&d=identicon&r=PG&f=1", "display_name": "zdenek", "link": "https://stackoverflow.com/users/5902074/zdenek"}, "edited": false, "score": 1, "creation_date": 1524676871, "post_id": 50027893, "comment_id": 87072112, "body": "Put an <code>override</code> specifier behind the declaration of a function <code>copy_cell</code> in a class <code>GridCell_voxel</code>. You will see, that you don&#39;t override it correctly."}, {"owner": {"reputation": 321, "user_id": 5088504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a8TS6.png?s=128&g=1", "display_name": "tony497", "link": "https://stackoverflow.com/users/5088504/tony497"}, "reply_to_user": {"reputation": 13847, "user_id": 5902074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96c5238b54165bd4ec723f5096cd010?s=128&d=identicon&r=PG&f=1", "display_name": "zdenek", "link": "https://stackoverflow.com/users/5902074/zdenek"}, "edited": false, "score": 0, "creation_date": 1524828230, "post_id": 50027893, "comment_id": 87138960, "body": "Thanks for your answer @zdenek, it helped!"}], "answers": [{"tags": [], "owner": {"reputation": 321, "user_id": 5088504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a8TS6.png?s=128&g=1", "display_name": "tony497", "link": "https://stackoverflow.com/users/5088504/tony497"}, "is_accepted": false, "score": 0, "last_activity_date": 1524830817, "creation_date": 1524830817, "answer_id": 50062040, "question_id": 50027893, "link": "https://stackoverflow.com/questions/50027893/cant-call-a-sub-class-function-in-c/50062040#50062040", "title": "Can&#39;t call a sub class function, in C++", "body": "<p>Sorry for the lack of information, i will try to expose how i managed  and what i was actually looking for.</p>\n\n<p>So i have a container of IntefaceCell, called m_grid_map, full of cell that has been specialized. In my case m_grid_map is full of GridCell_voxel which is a sub class from InterfaceCell.\nWhat i want to do is, create a new local GridCell_voxel, copy the information in it. Then process the informations, then copy the local cell in the container.\nThe important part is the dynamic_cast in the copy cell function, which allow you to take an InterfaceCell as argument and then treat it as GridCell_voxel.    </p>\n\n<pre><code>//Main.cpp \n                        GridCell_voxel * local_cell;\n                        local_cell = new GridCell_voxel();\n                        local_cell-&gt;copy_cell (m_grid_map( cell2matindex_x( cell_index_x), cell2matindex_y( cell_index_y)));\n                        local_cell-&gt;process_points(relevant_points, m_mapping_type);\n                        m_grid_map( cell2matindex_x( cell_index_x), cell2matindex_y( cell_index_y))-&gt;copy_cell (local_cell);\n                        delete local_cell;\n\n//GridCell_voxel.cpp\n    void GridCell_voxel::copy_cell(GridCellInterface* cell) {\n\n        GridCell_voxel* voxel_cell = dynamic_cast&lt;GridCell_voxel*&gt;(cell);\n\n        this-&gt;m_voxel_start_height = voxel_cell-&gt;m_voxel_start_height;\n        this-&gt;init = true;\n        this-&gt;m_ground_voxel_position = voxel_cell-&gt;m_ground_voxel_position;\n\n    }\n</code></pre>\n\n<p>I hope it will help someone.</p>\n"}], "owner": {"reputation": 321, "user_id": 5088504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a8TS6.png?s=128&g=1", "display_name": "tony497", "link": "https://stackoverflow.com/users/5088504/tony497"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524830817, "creation_date": 1524676411, "last_edit_date": 1524709321, "question_id": 50027893, "link": "https://stackoverflow.com/questions/50027893/cant-call-a-sub-class-function-in-c", "title": "Can&#39;t call a sub class function, in C++", "body": "<p>What I was doing before was that I was calling a function of my interface and it determinate in a switch condition thanks to a parameter what to do with the data. What kind of specialization they have.</p>\n\n<p>But now, what I am trying to create a local object, treat it, and then add it to my containers of the interface.\nIn order to do that I have to copy all the value of my local object (which have been treated) in my container of the interface.\nSo I created a copy_cell function in the interface, a virtual one, and one in the subclass. But whenever I try to do it the interface function is called and not the subfunction.      </p>\n\n<pre><code>           GridCell_voxel * local_cell;\n\n\n           local_cell = new GridCell_voxel(m_grid_map( cell2matindex_x(cell_index_x), cell2matindex_y(cell_index_y))-&gt;getVoxelResolution(), m_grid_map( cell2matindex_x(cell_index_x), cell2matindex_y(cell_index_y))-&gt;getVoxel().size());\n\n           local_cell-&gt;process_points(relevant_points, m_mapping_type);\n\n//This is the line I need to change\n           local_cell-&gt;copy_cell (m_grid_map( cell2matindex_x( cell_index_x), cell2matindex_y( cell_index_y))) ;\n</code></pre>\n\n<p>Do you have any idea on the way to go? What am I missing here? </p>\n"}, {"tags": ["c++", "intel-pin"], "owner": {"reputation": 309, "user_id": 4417867, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/23132faa970a1bc27f527c7f450ea464?s=128&d=identicon&r=PG&f=1", "display_name": "Simus", "link": "https://stackoverflow.com/users/4417867/simus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1524740314, "creation_date": 1524676321, "last_edit_date": 1524740314, "question_id": 50027867, "link": "https://stackoverflow.com/questions/50027867/intel-pin-how-are-routines-actually-instrumented", "title": "Intel Pin: how are routines actually instrumented?", "body": "<p>I was wondering how Intel Pin instruments routines. </p>\n\n<p>More specifically, when calling RTN_InsertCall with IPOINT_BEFORE, the instrumentation occurs just before the call instruction to the function or also for jump instructions to the function?</p>\n\n<p>I am asking this because I am writing a Pintool in which I am instrumenting routines before and after they are called. </p>\n\n<p>Although I know for a fact from Pin's user manual that IPOINT_AFTER does not guarantee success, there are also cases where, for some routines, only the analysis function for IPOINT_AFTER is called without calling first the analysis routine for IPOINT_BEFORE. So I was wondering what could be the cause of this phenomenon.</p>\n"}, {"tags": ["c++", "c++11", "count", "stdmap"], "comments": [{"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 1, "creation_date": 1524676282, "post_id": 50027777, "comment_id": 87071825, "body": "what do you mean by <i>maps can&#39;t take key value at run time</i>? You can add and change elements in a map at runtime..."}, {"owner": {"reputation": 45, "user_id": 9626260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4oZeRE2zEBQ/AAAAAAAAAAI/AAAAAAAAAGg/h0L8c-CiX2Y/photo.jpg?sz=128", "display_name": "zeeshan majeed", "link": "https://stackoverflow.com/users/9626260/zeeshan-majeed"}, "reply_to_user": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 0, "creation_date": 1524676600, "post_id": 50027777, "comment_id": 87071995, "body": "how can i create a key value that would store each word and keeps it count for every iteration ? i mean e.g how would a key would be a key will be created and would store first word of the sentence and in the next iteration a new key will be created and it would store next word in it ?"}, {"owner": {"reputation": 2461, "user_id": 2405914, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/VoFWS.jpg?s=128&g=1", "display_name": "Leonardo Alves Machado", "link": "https://stackoverflow.com/users/2405914/leonardo-alves-machado"}, "edited": false, "score": 0, "creation_date": 1524676975, "post_id": 50027777, "comment_id": 87072181, "body": "I think you didn&#39;t understand very well how maps work. Check <a href=\"https://www.cprogramming.com/tutorial/stl/stlmap.html\" rel=\"nofollow noreferrer\">this tutorial</a> and also <a href=\"http://www.cplusplus.com/reference/map/map/map/\" rel=\"nofollow noreferrer\">this site with documentation</a>"}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1524678190, "post_id": 50027777, "comment_id": 87072822, "body": "@zeeshanmajeed From your explanation: you wanna edit the key, or for each time you wanna change the value for it; is that correct?"}, {"owner": {"reputation": 45, "user_id": 9626260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4oZeRE2zEBQ/AAAAAAAAAAI/AAAAAAAAAGg/h0L8c-CiX2Y/photo.jpg?sz=128", "display_name": "zeeshan majeed", "link": "https://stackoverflow.com/users/9626260/zeeshan-majeed"}, "reply_to_user": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 0, "creation_date": 1524751391, "post_id": 50027777, "comment_id": 87106233, "body": "yes exactly @JeJo"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 9626260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4oZeRE2zEBQ/AAAAAAAAAAI/AAAAAAAAAGg/h0L8c-CiX2Y/photo.jpg?sz=128", "display_name": "zeeshan majeed", "link": "https://stackoverflow.com/users/9626260/zeeshan-majeed"}, "edited": false, "score": 0, "creation_date": 1524757268, "post_id": 50031821, "comment_id": 87110303, "body": "how can i modify my own program so that i can perform the same functionality ? i tried to do something like i created a map with a string key and int value in 2nd for loop&#39;s if statement so that in each iteration my word would get stored in string as a key and  but i don&#39;t know how can i keep an integer there that would keep word count here ? at the end i cout the map outside the 2nd for loop that fortunately didn&#39;t work"}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "reply_to_user": {"reputation": 45, "user_id": 9626260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4oZeRE2zEBQ/AAAAAAAAAAI/AAAAAAAAAGg/h0L8c-CiX2Y/photo.jpg?sz=128", "display_name": "zeeshan majeed", "link": "https://stackoverflow.com/users/9626260/zeeshan-majeed"}, "edited": false, "score": 0, "creation_date": 1524764057, "post_id": 50031821, "comment_id": 87114014, "body": "thats exactly I have done. Instead of parsing the sentace or string I used stringstream which will split the words and each time either store or count the word in the map."}], "tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 1, "last_activity_date": 1524692832, "creation_date": 1524692832, "answer_id": 50031821, "question_id": 50027777, "link": "https://stackoverflow.com/questions/50027777/looking-for-maps-techniques/50031821#50031821", "title": "looking for maps techniques", "body": "<blockquote>\n  <p>how can i store each word in a key from a string in a different keys\n  each time so that i can get actual word count .</p>\n</blockquote>\n\n<p>This can be done as follows. You can even deal with each words of the given sentence/ string(assuming that each words has been separated by a space). </p>\n\n<p>A few things to note:</p>\n\n<ol>\n<li>If you work with C++, just stick with C++ std library( <code>#include&lt;conio.h&gt;</code> has been used here in your soln)</li>\n<li>Avoid practicing with <code>using namespace std;</code></li>\n<li>If you wanna use <code>std::map&lt;&gt;</code>, you have to include the header <code>&lt;map&gt;</code></li>\n</ol>\n\n<p>For instance here is a sample test output: <a href=\"https://www.ideone.com/KGua1M\" rel=\"nofollow noreferrer\">https://www.ideone.com/KGua1M</a>\n<a href=\"https://i.stack.imgur.com/KV6q4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KV6q4.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\n int main()\n{\n   std::string inputString;\n   std::cout &lt;&lt; \"Enter the string = \";\n   std::getline(std::cin, inputString);\n\n   std::map&lt;std::string, int&gt; Map; // word, no. of times\n   size_t wordCount = 0;\n   size_t letterCount = 0;\n\n   std::stringstream sstr(inputString);\n   std::string word;\n\n   while (std::getline(sstr, word, ' '))\n   {\n       Map[word]++;\n       wordCount++;\n       letterCount += word.size();\n   }\n\n   std::cout &lt;&lt; \"Total Words: \" &lt;&lt; wordCount &lt;&lt; \"\\n\\n\";\n   std::cout &lt;&lt; \"Total letters: \" &lt;&lt; letterCount &lt;&lt; \"\\n\\n\";\n   std::cout &lt;&lt; \"Each words count\\n\\n\"  ;\n\n   for(const auto&amp; it: Map)\n    std::cout &lt;&lt; it.first &lt;&lt; \" \" &lt;&lt; it.second &lt;&lt; \" times\\n\";\n   return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 9626260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4oZeRE2zEBQ/AAAAAAAAAAI/AAAAAAAAAGg/h0L8c-CiX2Y/photo.jpg?sz=128", "display_name": "zeeshan majeed", "link": "https://stackoverflow.com/users/9626260/zeeshan-majeed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 50031821, "answer_count": 1, "score": 1, "last_activity_date": 1527400508, "creation_date": 1524676040, "last_edit_date": 1527400508, "question_id": 50027777, "link": "https://stackoverflow.com/questions/50027777/looking-for-maps-techniques", "title": "looking for maps techniques", "body": "<p>Here's the code i have working on.it gets the word count from a string but now i have been trying to apply the same logic using maps but couldn't do so since maps can't take key value at run time.how can i store each word in a key from a string in a different keys each time so that i can get actual word count .Any idea how can i do that ?</p>\n\n<pre><code> #include&lt;iostream&gt;\n #include&lt;conio.h&gt;\n #include&lt;string&gt;\n\n\n using namespace std;\n\n int main()\n{\n\n    map&lt;string, int&gt; stringCounts;\n    map&lt;string, int&gt;::iterator iter;\n    string words;\n\n\n    int TOTAL = 0;\n    char a[1000];\n    cout &lt;&lt; \"enter the string = \";\n    cin.getline(a, 1000);\n    int Totalwords = 0;\n    int no = 0;\n\n    for (int i = 0; a[i] != '\\0'; i++)\n    {\n        if ((int(a[i]) &gt;= 65 &amp;&amp; int(a[i]) &lt;= 90) || (int(a[i]) &gt;= 97 &amp;&amp; int(a[i]) &lt;= 122))\n        {\n\n        }\n        else\n        {\n            Totalwords++;\n        }\n        no = i;\n    }\n\n    TOTAL = Totalwords;\n    cout &lt;&lt; \"number of words = \" &lt;&lt; TOTAL &lt;&lt; endl;\n    string *words = new string[TOTAL];\n\n\n    for (int i = 0, j = 0; j &lt; TOTAL, i &lt;= no;)\n    {\n        if ((int(a[i]) &gt;= 65 &amp;&amp; int(a[i]) &lt;= 90) || (int(a[i]) &gt;= 97 &amp;&amp; int(a[i]) &lt;= 122))\n        {\n            words[j] = words[j] + a[i];\n            stringCounts[words[j]]++;\n       for (iter = stringCounts.begin(); iter != stringCounts.end(); iter++)\n      {\n        cout &lt;&lt; \"word: \" &lt;&lt; iter-&gt;first &lt;&lt; \", count: \" &lt;&lt; iter-&gt;second &lt;&lt; \n        endl;\n      }\n            i++;\n        }\n        else\n        {\n            j++;\n            i++;\n        }\n    }\n\n    _getch();\n}\n</code></pre>\n"}, {"tags": ["c++", "doxygen"], "comments": [{"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1524680683, "post_id": 50027716, "comment_id": 87074095, "body": "When the file with the documentation is in the same directory as describing just <code>\\dir</code> is sufficient and also <code>\\dir .</code> works in that case. Would be nice when a relative path (i.e in this case <code>.&#47;gambit</code> would work, but the code might be used in multiple places inside the doxygen code so might be tricky)."}, {"owner": {"reputation": 1778, "user_id": 1447953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7950906f179a27d0b6f71d84841374cb?s=128&d=identicon&r=PG", "display_name": "Ben Farmer", "link": "https://stackoverflow.com/users/1447953/ben-farmer"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1524682960, "post_id": 50027716, "comment_id": 87075293, "body": "Oh really? Okay I&#39;ll give just leaving it blank a shot."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1524727858, "post_id": 50027716, "comment_id": 87090537, "body": "For me it did work, I read the code as well. The documentation is not clear about what happens in case a <code>\\dir</code> command is found without argument, it takes the path of the file in which the <code>\\dir</code> command is found."}, {"owner": {"reputation": 1778, "user_id": 1447953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7950906f179a27d0b6f71d84841374cb?s=128&d=identicon&r=PG", "display_name": "Ben Farmer", "link": "https://stackoverflow.com/users/1447953/ben-farmer"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1524734603, "post_id": 50027716, "comment_id": 87094713, "body": "Ah ok so <i>only</i> &quot;\\dir&quot; or &quot;\\dir .&quot; works? &quot;\\dir ./Utils&quot; does not work (from say the &#39;gambit&#39; root directory)? That seems to be what I am seeing, and yeah that kind of sucks, means I have to scatter the documentation for my directories all over the place just so I can use &quot;\\dir&quot;."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1524735274, "post_id": 50027716, "comment_id": 87095155, "body": "Indeed the <code>.&#47;Utils</code> does notr woork either, the <code>.</code> is filtered out. In case of <code>\\dir .</code> it results in the <code>\\dir</code> so without arguments and goes automatically to the &quot;default&quot;. At the moment the only possibility is indeed the scattering of the descriptions."}], "owner": {"reputation": 1778, "user_id": 1447953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/7950906f179a27d0b6f71d84841374cb?s=128&d=identicon&r=PG", "display_name": "Ben Farmer", "link": "https://stackoverflow.com/users/1447953/ben-farmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524676373, "creation_date": 1524675821, "last_edit_date": 1524676373, "question_id": 50027716, "link": "https://stackoverflow.com/questions/50027716/how-to-help-doxygen-resolve-matches-multiple-directories", "title": "How to help doxygen resolve &quot;matches multiple directories&quot;?", "body": "<p>In our project we have the following directory structure:</p>\n\n<pre><code>gambit\ngambit/Utils\ngambit/Utils/include/gambit/Utils\ngambit/Utils/src\ngambit/Core\ngambit/Core/include/gambit/Core\ngambit/Core/src\n...\n</code></pre>\n\n<p>and so on. We do this so that in our files we have a clean include structure, like this:</p>\n\n<pre><code>#include \"gambit/Utils/somefile.hpp\"\n</code></pre>\n\n<p>where we compile with <code>-Igambit/Utils/include</code> and so forth. Now I would like to add doxygen documentation for each level in this directory tree. But how can I do it? I seem to be unable to avoid <code>warning: \\dir command matches multiple directories</code>. For example, say I want to document the root directory, I seem to have no choice but to write e.g.</p>\n\n<pre><code>/// \\dir gambit\n/// \\brief Root of GAMBIT source tree\n///\n/// Some long description\n</code></pre>\n\n<p>However that gives me <code>warning: \\dir command matches multiple directories</code> because it matches the root directory, as well as both of these directories:</p>\n\n<pre><code>gambit/Utils/include/gambit\ngambit/Core/include/gambit\n</code></pre>\n\n<p>But this is the root directory of the project, I cannot add anything to the path name to make it unique, because there is nothing to add! The same problem exists for the <code>gambit/Utils</code> and <code>gambit/Core</code> ambiguities. Is there some way to tell doxygen to prefer shorter matches? Currently it just seems to pick randomly between its options. Documenting the other directories with their long names doesn't seem to help, it looks like doxygen doesn't use that information to go back and resolve earlier conflicts.</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1524675738, "post_id": 50027677, "comment_id": 87071525, "body": "Related <a href=\"https://stackoverflow.com/q/5605125/583833\">Why is iostream::eof inside a loop condition considered wrong?</a>"}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1524675970, "post_id": 50027677, "comment_id": 87071647, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">Why is iostream::eof inside a loop condition considered wrong?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 9699171, "user_type": "registered", "profile_image": "https://graph.facebook.com/1573260356026085/picture?type=large", "display_name": "Erick Murillo", "link": "https://stackoverflow.com/users/9699171/erick-murillo"}, "edited": false, "score": 0, "creation_date": 1524676230, "post_id": 50027733, "comment_id": 87071805, "body": "i have done it, it still print my text infinite times"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1524676889, "post_id": 50027733, "comment_id": 87072128, "body": "Technically, OPs code is more like <code>while (true) {entrada &gt;&gt; palabra; if (entrada.eof ()) break;}</code>, since <code>entrada.eof ()</code> is always <code>false</code>, in the loop condition (<code>eofbit</code> is only set by read operations, and the value of which is, immediately checked. If it is <code>true</code> at such check - one breaks out of the loop, before re-evaluation of loop condition). Hence I don&#39;t agree with links to such question, since OP uses <code>std::fstream::eof</code> correctly."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1524677606, "post_id": 50027733, "comment_id": 87072517, "body": "@AlgirdasPreid\u017eius, I see your point. Given the two options, I would pick my suggestion any day. The link has additional information that are very educational, IMO."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1524675890, "creation_date": 1524675890, "answer_id": 50027733, "question_id": 50027677, "link": "https://stackoverflow.com/questions/50027677/my-loop-doesnt-finish-how-to-close-it-when-the-file-reaches-the-end-of-file/50027733#50027733", "title": "My loop doesnt finish, how to close it when the file reaches the end of file", "body": "<p>Change the loop to:</p>\n\n<pre><code>char palabra[1024];\nwhile (entrada &gt;&gt; palabra )\n{\n    cout &lt;&lt; palabra &lt;&lt; endl;\n}\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/q/5605125/583833\">Why is iostream::eof inside a loop condition considered wrong?</a></p>\n"}], "owner": {"reputation": 9, "user_id": 9699171, "user_type": "registered", "profile_image": "https://graph.facebook.com/1573260356026085/picture?type=large", "display_name": "Erick Murillo", "link": "https://stackoverflow.com/users/9699171/erick-murillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1524676839, "creation_date": 1524675672, "question_id": 50027677, "link": "https://stackoverflow.com/questions/50027677/my-loop-doesnt-finish-how-to-close-it-when-the-file-reaches-the-end-of-file", "title": "My loop doesnt finish, how to close it when the file reaches the end of file", "body": "<p><strong><em>//entrada is the fstream I opened</em></strong></p>\n\n<pre><code>if (entrada.is_open())\n{\n    while (!entrada.eof())\n    {\n        char palabra[1024];\n        entrada &gt;&gt; palabra;\n        if(entrada.eof())break;\n        cout &lt;&lt; palabra &lt;&lt; endl;\n\n    }\n\nentrada.close();\n}\n</code></pre>\n\n<p>the program shows me the text and doesnt finish the loop of the while, doesnt reach the .eof</p>\n"}, {"tags": ["c++", "static"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524675612, "post_id": 50027633, "comment_id": 87071447, "body": "The answer to both questions is yes."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1524675658, "post_id": 50027633, "comment_id": 87071480, "body": "Why would you think the type of the static variable makes a difference?"}], "owner": {"reputation": 142, "user_id": 9074013, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/871d942d9a9381ac63801631c6a10ada?s=128&d=identicon&r=PG&f=1", "display_name": "NodeJS", "link": "https://stackoverflow.com/users/9074013/nodejs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1524675633, "answer_count": 0, "score": 0, "last_activity_date": 1524675655, "creation_date": 1524675493, "last_edit_date": 1524675655, "question_id": 50027633, "link": "https://stackoverflow.com/questions/50027633/behavior-of-static-variables-in-objects-of-derived-classes", "closed_reason": "Duplicate", "title": "Behavior of static variables in objects of derived classes", "body": "<p>If I have a static variable in my base class, for example type of integer. Will I also have the same copy of that variable for the objects of derived classes?</p>\n\n<p>Also, can the keyword static be used with strings?</p>\n"}, {"tags": ["c++", "linker-errors", "inner-classes", "unresolved-external"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 2, "creation_date": 1524675497, "post_id": 50027580, "comment_id": 87071398, "body": "Your example code is incomplete. Please reduce your original program to the shortest <b>complete</b> program that demonstrates the error. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for more information."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1524675543, "post_id": 50027580, "comment_id": 87071415, "body": "this is an external library? Look at its exports with objdump. If its your code then are you sure you have an implementation of that constructor?"}, {"owner": {"reputation": 903, "user_id": 5339398, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/dd9da7f9c11bf0f13cc812c55b37bf96?s=128&d=identicon&r=PG&f=1", "display_name": "Madden", "link": "https://stackoverflow.com/users/5339398/madden"}, "edited": false, "score": 0, "creation_date": 1524675601, "post_id": 50027580, "comment_id": 87071443, "body": "This is an external library and the constructor is implemented"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1524675926, "post_id": 50027580, "comment_id": 87071624, "body": "This is very far from a minimal example or anything that we can directly help with."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1524675984, "post_id": 50027580, "comment_id": 87071656, "body": "How did you create the library. Is it a static library?"}], "owner": {"reputation": 903, "user_id": 5339398, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/dd9da7f9c11bf0f13cc812c55b37bf96?s=128&d=identicon&r=PG&f=1", "display_name": "Madden", "link": "https://stackoverflow.com/users/5339398/madden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1524675291, "creation_date": 1524675291, "question_id": 50027580, "link": "https://stackoverflow.com/questions/50027580/unresolved-external-symbol-to-inner-class", "title": "Unresolved external symbol to inner class", "body": "<p>I'm linking against a library with the following class definition (some extraneous members/functions omitted):</p>\n\n<pre><code>class metric_family {\npublic:\n    class builder {\n        public:\n            builder(std::string name, std::string help);\n    }\n\n    metric_family(const builder &amp;builder);\n};\n</code></pre>\n\n<p>Which on windows returns an LNK2001: unresolved external symbol \"public: __cdecl metric_family::builder::builder(\" for the string, string ctor (omitting all the template error for string messages). Every other symbol from this library works fine and I can create any other type from there except for a builder. What else more do I need to do to export the builder class? A forward declaration doesn't seem to have worked, and this works fine on linux</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 1400, "user_id": 7305745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fep6r.jpg?s=128&g=1", "display_name": "Daniele Cappuccio", "link": "https://stackoverflow.com/users/7305745/daniele-cappuccio"}, "edited": false, "score": 1, "creation_date": 1524675247, "post_id": 50027516, "comment_id": 87071282, "body": "What do you mean &#39;lengths of contents&#39;? The string with max size? min size? Average size? Or maybe the sum of the lengths?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1524675415, "post_id": 50027516, "comment_id": 87071358, "body": "Since you tagged as C++, prefer to use <code>std::string</code> and <code>std::vector</code>."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1524675481, "post_id": 50027516, "comment_id": 87071388, "body": "In general, no.  If guaranteed NUL-terminated C-&#39;strings&#39; or the &#39;real&#39; C++ string type, then possibly.."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1524676384, "post_id": 50027516, "comment_id": 87071880, "body": "The sticking point, even with strings whose length can be determined, is the length of the pointer array, ie. the number of valid entries in it.  [MAX] does not suggest that length is fully defined in the question:("}], "answers": [{"comments": [{"owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1524675953, "post_id": 50027663, "comment_id": 87071635, "body": "...but that doesn&#39;t tell how many entries the array has (which I believe is the question)."}, {"owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "reply_to_user": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "edited": false, "score": 0, "creation_date": 1524676674, "post_id": 50027663, "comment_id": 87072033, "body": "Oh. Then you want to loop over the range [0, MAX) and count the non-null entries in the table."}], "tags": [], "owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1524675616, "creation_date": 1524675616, "answer_id": 50027663, "question_id": 50027516, "link": "https://stackoverflow.com/questions/50027516/how-to-count-lengths-of-contents-of-an-array-of-pointers/50027663#50027663", "title": "How to count lengths of contents of an array of pointers", "body": "<p>If you know the strings are all null-terminated, you can use <a href=\"http://en.cppreference.com/w/c/string/byte/strlen\" rel=\"nofollow noreferrer\">strlen</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 9698177, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HjXf8pkqfyY/AAAAAAAAAAI/AAAAAAAAAIc/ehbqZC5E1sQ/photo.jpg?sz=128", "display_name": "Dingani Makamo", "link": "https://stackoverflow.com/users/9698177/dingani-makamo"}, "edited": false, "score": 0, "creation_date": 1524678012, "post_id": 50027825, "comment_id": 87072733, "body": "Made a mistake on the <code>MAX</code>. its not supposed to be their."}], "tags": [], "owner": {"reputation": 23946, "user_id": 3100312, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/486be6e961e6c8a2e4705058600e666f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Ogilvie", "link": "https://stackoverflow.com/users/3100312/paul-ogilvie"}, "is_accepted": false, "score": 0, "last_activity_date": 1524676196, "creation_date": 1524676196, "answer_id": 50027825, "question_id": 50027516, "link": "https://stackoverflow.com/questions/50027516/how-to-count-lengths-of-contents-of-an-array-of-pointers/50027825#50027825", "title": "How to count lengths of contents of an array of pointers", "body": "<p>Your question is a bit confusing as it is not clear what length you want. Therefore for both possibilities:</p>\n\n<ol>\n<li>Length of array in use:</li>\n</ol>\n\n<p><code>char *str[MAX] = {\"kendrick\", \"lamar\"};</code> is an array of size MAX with two entries, which are pointers to strings. The compiler will initialize all other entries to zero, so counting how many entries of <code>str</code> are non-zero will give you that answer.</p>\n\n<ol start=\"2\">\n<li>Length of the strings:</li>\n</ol>\n\n<p>A string in C is null terminated. So for each entry of <code>str</code> that is not null you can advance and advance until you encounter a null character. That tells you the length of that entry.</p>\n"}, {"tags": [], "owner": {"reputation": 113, "user_id": 8267282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a843b009122c6c6005590080e6bcf4b?s=128&d=identicon&r=PG&f=1", "display_name": "Bruno", "link": "https://stackoverflow.com/users/8267282/bruno"}, "is_accepted": false, "score": 2, "last_activity_date": 1524678523, "last_edit_date": 1524678523, "creation_date": 1524676306, "answer_id": 50027862, "question_id": 50027516, "link": "https://stackoverflow.com/questions/50027516/how-to-count-lengths-of-contents-of-an-array-of-pointers/50027862#50027862", "title": "How to count lengths of contents of an array of pointers", "body": "<p>You can verify if each pointer is NULL or not:</p>\n\n<pre><code>int count = 0;\nfor(int i = 0; i &lt; MAX; i++)\n    if(str[i] != NULL)\n        count++;\n\nprintf(\"Count: %d\\n\", count);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 1, "creation_date": 1524679073, "post_id": 50028548, "comment_id": 87073286, "body": "there is no C++/C language. Decide which one"}, {"owner": {"reputation": 1533, "user_id": 6204556, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EJxCy.jpg?s=128&g=1", "display_name": "Shadi", "link": "https://stackoverflow.com/users/6204556/shadi"}, "reply_to_user": {"reputation": 33488, "user_id": 6110094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/wozpD.png?s=128&g=1", "display_name": "0___________", "link": "https://stackoverflow.com/users/6110094/0"}, "edited": false, "score": 0, "creation_date": 1524722022, "post_id": 50028548, "comment_id": 87087378, "body": "@PeterJ_01: Why you say so? I did not get your point. would you please explain as I do not have much knowledge of C."}], "tags": [], "owner": {"reputation": 1533, "user_id": 6204556, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/EJxCy.jpg?s=128&g=1", "display_name": "Shadi", "link": "https://stackoverflow.com/users/6204556/shadi"}, "is_accepted": false, "score": 1, "last_activity_date": 1524691941, "last_edit_date": 1524691941, "creation_date": 1524678927, "answer_id": 50028548, "question_id": 50027516, "link": "https://stackoverflow.com/questions/50027516/how-to-count-lengths-of-contents-of-an-array-of-pointers/50028548#50028548", "title": "How to count lengths of contents of an array of pointers", "body": "<p>As noted by others, it is not clear what you are exactly asking about.</p>\n\n<p>In a hurry, I wrote the following code to give multiple outputs so you may find what you are looking for:</p>\n\n<p>1- Length of each item by using <a href=\"http://www.cplusplus.com/reference/cstring/strlen/\" rel=\"nofollow noreferrer\"><code>strlen()</code></a> function.(<code>ilength</code>)<br>\n2- Total length of the items by adding up individual lengths. (<code>ilength</code>).<br>\n3- Number of items in the array by counting non <code>NULL</code> (<code>items</code>).  </p>\n\n<pre><code>int main()\n{\n    const int MAX = 10;\n    char* str[MAX] = {\"Hello\", \" World\",\"!\",\"\"};\n\n    int ilength, length = 0, items = 0;\n\n    for(int i = 0; i &lt; MAX; ++i)\n        if (str[i] != NULL)\n        {   ilength = strlen (str[i]);\n            // WARNING!!! ISO C++ forbids converting a string constant to 'char*'\n            cout &lt;&lt; i &lt;&lt; \" item length is \" &lt;&lt; ilength &lt;&lt; \"\\n\";\n            length = length + ilength;\n            items += 1;\n        }\n\n    cout &lt;&lt; \"\\nTotal length of all items is: \" &lt;&lt; length &lt;&lt; \"\\n\\n\";\n    cout &lt;&lt; \"\\nThere is/are \" &lt;&lt; items &lt;&lt; \" in the array.\\n\\n\";\n}\n</code></pre>\n\n<hr>\n\n<p>NOTE: If you use C++ compiler, pay attention to the warning:</p>\n\n<p><code>WARNING!!! ISO C++ forbids converting a string constant to 'char*'</code></p>\n"}], "owner": {"reputation": 15, "user_id": 9698177, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HjXf8pkqfyY/AAAAAAAAAAI/AAAAAAAAAIc/ehbqZC5E1sQ/photo.jpg?sz=128", "display_name": "Dingani Makamo", "link": "https://stackoverflow.com/users/9698177/dingani-makamo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "closed_date": 1524679564, "answer_count": 4, "score": -3, "last_activity_date": 1524691941, "creation_date": 1524675061, "last_edit_date": 1524679603, "question_id": 50027516, "link": "https://stackoverflow.com/questions/50027516/how-to-count-lengths-of-contents-of-an-array-of-pointers", "closed_reason": "Needs details or clarity", "title": "How to count lengths of contents of an array of pointers", "body": "<p>Is it possible to count the length of the contents of an array of pointers: \nFor example\n<code>char *str[MAX] = {\"kendrick\", \"lamar\"};</code>. the length of <code>str[0]</code> is 8 and <code>str[1]</code> is 5. Is there a way of getting these values.</p>\n"}, {"tags": ["c++", "matrix", "eigen"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 7687206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4656a0f7996d881c789e66a8d67ae4e5?s=128&d=identicon&r=PG&f=1", "display_name": "Aerys.L", "link": "https://stackoverflow.com/users/7687206/aerys-l"}, "edited": false, "score": 0, "creation_date": 1524766752, "post_id": 50039760, "comment_id": 87115347, "body": "Thank you very much, this works great. <i>There is not much to vectorize here, but to avoid writing the two loops (which might better be reversed for a row-major storage)</i> I was under the impression Eigen was column-major by default, is this not the case?"}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "reply_to_user": {"reputation": 59, "user_id": 7687206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4656a0f7996d881c789e66a8d67ae4e5?s=128&d=identicon&r=PG&f=1", "display_name": "Aerys.L", "link": "https://stackoverflow.com/users/7687206/aerys-l"}, "edited": false, "score": 0, "creation_date": 1524778878, "post_id": 50039760, "comment_id": 87120945, "body": "Yes it is column-major by default, but if you want to write generic code taking arbitrary expressions as input, this might not always be the case."}], "tags": [], "owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "is_accepted": true, "score": 3, "last_activity_date": 1524735760, "creation_date": 1524735760, "answer_id": 50039760, "question_id": 50027494, "link": "https://stackoverflow.com/questions/50027494/eigen-indices-of-dense-matrix-meeting-condition/50039760#50039760", "title": "Eigen Indices of Dense Matrix meeting Condition", "body": "<p>There is not much to vectorize here, but to avoid writing the two loops (which might better be reversed for a row-major storage), the best tool would be a visitor:</p>\n\n<pre><code>mat.visit(some_visitor);\n</code></pre>\n\n<p>Sadly, the visitor cannot be a simple lambda as <code>visit</code> calls the method <code>init(val,0,0)</code> for the first element. This is useful for reduction-like visitors but not always. In order to make <code>visit</code> accepts a simple lambda, you can use the following helper:</p>\n\n<pre><code>template&lt;typename Func&gt;\nstruct lambda_as_visitor_wrapper : Func {\n    lambda_as_visitor_wrapper(const Func&amp; f) : Func(f) {}\n    template&lt;typename S,typename I&gt;\n    void init(const S&amp; v, I i, I j) { return Func::operator()(v,i,j); }\n};\n\ntemplate&lt;typename Mat, typename Func&gt;\nvoid visit_lambda(const Mat&amp; m, const Func&amp; f)\n{\n    lambda_as_visitor_wrapper&lt;Func&gt; visitor(f);\n    m.visit(visitor);\n}\n</code></pre>\n\n<p>In your case, you can then write:</p>\n\n<pre><code>int main() {\n    int n = 5;\n    double th = 0.5;\n    Eigen::MatrixXd M = Eigen::MatrixXd::Random(n,n);\n\n    std::vector&lt;std::pair&lt;int,int&gt;&gt; indices;\n    visit_lambda(M,\n        [&amp;indices,th](double v, int i, int j) {\n            if(v&gt;th)\n                indices.push_back(std::make_pair(i,j));\n        });\n\n\n    std::cout &lt;&lt; M &lt;&lt; \"\\n\\n\";\n\n    for(auto p:indices)\n        std::cout &lt;&lt; '(' &lt;&lt; p.first &lt;&lt; ',' &lt;&lt; p.second &lt;&lt; \") \";\n    std::cout &lt;&lt; '\\n';\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7687206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4656a0f7996d881c789e66a8d67ae4e5?s=128&d=identicon&r=PG&f=1", "display_name": "Aerys.L", "link": "https://stackoverflow.com/users/7687206/aerys-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1840, "favorite_count": 0, "accepted_answer_id": 50039760, "answer_count": 1, "score": 1, "last_activity_date": 1524735760, "creation_date": 1524674992, "question_id": 50027494, "link": "https://stackoverflow.com/questions/50027494/eigen-indices-of-dense-matrix-meeting-condition", "title": "Eigen Indices of Dense Matrix meeting Condition", "body": "<p>I'm looking to get the row/column indices from a dense matrix which meet a condition. In my case the result is likely to be very sparse. For example, with matrix</p>\n\n<pre><code>1 5 2\n7 6 3\n2 3 8\n</code></pre>\n\n<p>I'd like to get the indicies where the coeff is greater than 4, or</p>\n\n<pre><code>(0,1), (1,0), (1,1), (2,2)\n</code></pre>\n\n<p>My initial thoughts include using either <a href=\"https://stackoverflow.com/questions/24654840/eigen-mask-an-array\">select</a> or <a href=\"https://eigen.tuxfamily.org/dox/group__TutorialArrayClass.html\" rel=\"nofollow noreferrer\">coefficientwise</a> operations to build a bool/int matrix</p>\n\n<pre><code>0 1 0\n1 1 0\n0 0 1\n</code></pre>\n\n<p>and then convert it to a sparse matrix</p>\n\n<pre><code>(0,1,1), (1,0,1), (1,1,1), (2,2,1)\n</code></pre>\n\n<p>then remove the coeff values</p>\n\n<pre><code>(0,1), (1,0), (1,1), (2,2)\n</code></pre>\n\n<p>However, that requires two passes over matrices the size of the original matrix, which may be very large.</p>\n\n<p>Alternatively a naive double loop over the original matrix akin to pseudocode</p>\n\n<pre><code>for (int i; i &lt; mat.cols(); i++) {\n    for (int j; j &lt; mat.rows(); j++) {\n        if(cond(mat(j, i))) {\n            add_index(i, j, index_list)\n        }\n    }\n}\n</code></pre>\n\n<p>but that only takes the compilers optimizations and none of Eigen's optimizations/vectorizations. </p>\n\n<p>Is there a more efficient way that I am missing? In my case the conditions are simple comparisons.</p>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["c++", "arrays", "pointers", "char"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1524674868, "post_id": 50027421, "comment_id": 87071086, "body": "<code>This doesn&#39;t make sense to me because you are assigning a char array to a char pointer</code> It makes sense because arrays decay to pointers."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1524674983, "post_id": 50027421, "comment_id": 87071143, "body": "<code>p = &amp;input_line;</code> Tries to assign a &quot;pointer to a <code>char</code> array&quot;, to a &quot;pointer to <code>char</code>&quot;. Such types are incompatible. Did you mean to write <code>p = input_line;</code>?"}, {"owner": {"reputation": 13847, "user_id": 5902074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96c5238b54165bd4ec723f5096cd010?s=128&d=identicon&r=PG&f=1", "display_name": "zdenek", "link": "https://stackoverflow.com/users/5902074/zdenek"}, "edited": false, "score": 0, "creation_date": 1524675243, "post_id": 50027421, "comment_id": 87071279, "body": "In most cases array names are converted to pointers."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1524675847, "post_id": 50027421, "comment_id": 87071585, "body": "<code>p = input_line</code> will work"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1524676019, "post_id": 50027421, "comment_id": 87071686, "body": "Use neither pointers nor arrays in C++. There is no reason to, as there are better alternatives nowadays."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524681620, "post_id": 50027421, "comment_id": 87074578, "body": "Also, <code>*p++;</code> and <code>*i++;</code> should be <code>p++;</code> and <code>i++;</code> instead, since you are not using the values of <code>*p</code> and <code>*i</code> in those statements.  You could remove those statements and do the increment in the previous <code>cout</code> statements, though: <code>cout &lt;&lt; *p++ &lt;&lt; endl;</code> and <code>cout &lt;&lt; *i++ &lt;&lt; endl;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1524675213, "creation_date": 1524675213, "answer_id": 50027555, "question_id": 50027421, "link": "https://stackoverflow.com/questions/50027421/assigning-char-array-to-pointer/50027555#50027555", "title": "Assigning char array to pointer", "body": "<p>From the <a href=\"https://timsong-cpp.github.io/cppwp/n3337/conv.array\" rel=\"nofollow noreferrer\">C++11 standard</a> (emphasis mine):</p>\n\n<blockquote>\n  <p>An lvalue or rvalue of type \u201carray of <code>N T</code>\u201d or \u201carray of unknown bound of <code>T</code>\u201d can be converted to a prvalue of type \u201cpointer to <code>T</code>\u201d. <strong>The result is a pointer to the first element of the array</strong>.</p>\n</blockquote>\n\n<p>This conversion, conversion of an array to a pointer to the first element of the array, is commonly know as \"an array decays to a pointer to the first element of the array\".</p>\n\n<p>This conversion applies to all types, not just <code>char</code>.</p>\n\n<pre><code>int array_1[10] = {};\nint* ptr1 = array_1;     // ptr1 is a pointer to the first element of array_1\n\ndouble array_2[10] = {};\ndouble* ptr2 = array_2;  // ptr2 is a pointer to the first element of array_2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 1, "creation_date": 1524709719, "post_id": 50033035, "comment_id": 87083990, "body": "Slight nitpick: an array is not a set in the mathematical sense of the word &quot;set&quot; which I only bring up because set theory is pretty important to computer science.  A set doesn&#39;t have any particular order (i.e. <code>std::set</code> does a little more than a set) and it doesn&#39;t have duplicates.  Arrays are often used to store what happen to be sets, but just as often repetition or the sequence matter e.g. in a string.  Use the word &quot;sequence&quot; instead of &quot;set&quot;, I guess?"}, {"owner": {"reputation": 787, "user_id": 9621052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FYFA.png?s=128&g=1", "display_name": "CryogenicNeo", "link": "https://stackoverflow.com/users/9621052/cryogenicneo"}, "reply_to_user": {"reputation": 789, "user_id": 8120642, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OX8-_3nAbeE/AAAAAAAAAAI/AAAAAAAAAAA/of7PUZBmbk4/photo.jpg?sz=128", "display_name": "hegel5000", "link": "https://stackoverflow.com/users/8120642/hegel5000"}, "edited": false, "score": 0, "creation_date": 1524709948, "post_id": 50033035, "comment_id": 87084052, "body": "Ok! Thanks you!"}], "tags": [], "owner": {"reputation": 787, "user_id": 9621052, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7FYFA.png?s=128&g=1", "display_name": "CryogenicNeo", "link": "https://stackoverflow.com/users/9621052/cryogenicneo"}, "is_accepted": false, "score": 6, "last_activity_date": 1597628264, "last_edit_date": 1597628264, "creation_date": 1524701909, "answer_id": 50033035, "question_id": 50027421, "link": "https://stackoverflow.com/questions/50027421/assigning-char-array-to-pointer/50033035#50033035", "title": "Assigning char array to pointer", "body": "<blockquote>\n<p>The error in this line of code:</p>\n<pre><code>p = &amp;input_line;\n</code></pre>\n<p>Can be resolved by changing it with:</p>\n<pre><code>p = input_line;\n</code></pre>\n<p>That's because your're assigning the memory direction of the <strong>array</strong>.\nIts value is a pointer to a char pointer. That's why the error is\nraised. Remember, the operator <code>&amp;</code> gives to you the variables memory\ndirection.</p>\n</blockquote>\n<p>A <strong>pointer</strong> stores a memory direction of an object. An <strong>array</strong> is a sequence of objects by a certain type that are located in consecutives reserved amount of space in memory.</p>\n<p>Each index of an <strong>array</strong> is a number composed of the digits from 0 to 9. Each element of an array is an object that you can take the address of, like a <strong>pointer</strong> to an object memory location. In an <strong>array</strong> the objects are located in consecutive memory locations. When you assign an <strong>array</strong> to a <strong>pointer</strong>, you're assigning the pointer to the <strong>arrays</strong> first element, it's <code>array[0]</code>.</p>\n<p>When you increase by 1 the <strong>pointer</strong> value, the <strong>pointer</strong> will point to the next object in a memory location. So, <strong>arrays and pointers</strong> have similar behavior. If you assign to a <strong>pointer</strong> an <strong>array</strong> and then you increase by 1 the pointer value, it will point now to the object in the array.</p>\n<p><a href=\"https://i.stack.imgur.com/PIkGG.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PIkGG.jpg\" alt=\"This image is taken from the page below mentioned.\" /></a></p>\n<p>This is not only for <code>char</code> type, it's for every type in C++. <a href=\"https://www.programiz.com/cpp-programming/pointers-arrays\" rel=\"nofollow noreferrer\">In this page </a> you can get more information about pointers and array. <strong>You must note that the pointer and the array must contain or point to the same variable type.</strong></p>\n<blockquote>\n<p>Here's an example from <a href=\"https://www.programiz.com/cpp-programming/pointers-arrays\" rel=\"nofollow noreferrer\">this page</a>:</p>\n<pre><code>int* ptr;\nint a[5];\nptr = &amp;a[2];  // &amp;a[2] is the address of third element of a[5].\n</code></pre>\n</blockquote>\n<p>An output example from the example in <a href=\"https://www.programiz.com/cpp-programming/pointers-arrays\" rel=\"nofollow noreferrer\">this page</a> is:</p>\n<blockquote>\n<p><strong>Displaying address using arrays:</strong></p>\n<pre><code>&amp;arr[0] = 0x7fff5fbff880\n&amp;arr[1] = 0x7fff5fbff884\n&amp;arr[2] = 0x7fff5fbff888\n&amp;arr[3] = 0x7fff5fbff88c\n&amp;arr[4] = 0x7fff5fbff890\n</code></pre>\n<p><strong>Displaying address using pointers:</strong></p>\n<pre><code> ptr + 0 = 0x7fff5fbff880\n ptr + 1 = 0x7fff5fbff884\n ptr + 2 = 0x7fff5fbff888\n ptr + 3 = 0x7fff5fbff88c\n ptr + 4 = 0x7fff5fbff890\n</code></pre>\n</blockquote>\n<p>As you can note in the output example, both are pointing to the same memory location, so you can access the objects from both methods.</p>\n<p>Formally, in the <a href=\"https://timsong-cpp.github.io/cppwp/n3337/conv.array\" rel=\"nofollow noreferrer\">C++ 11 standard</a> is mentioned that:</p>\n<blockquote>\n<p>Array-to-pointer conversion:</p>\n<hr />\n<p>An lvalue or rvalue of type \u201c<code>array</code> of <code>N</code> <code>T</code>\u201d or \u201c<code>array</code> of\nunknown bound of <code>T</code>\u201d can be converted to a prvalue of type \u201cpointer\nto <code>T</code>\u201d. The result is a pointer to the first element of the <code>array</code>.</p>\n</blockquote>\n<p>You can see those pages for more information about this theme:</p>\n<p><a href=\"http://www.c4learn.com/cplusplus/cpp-pointer-array/\" rel=\"nofollow noreferrer\">C++ Pointer to an Array.</a></p>\n<p><a href=\"https://codescracker.com/cpp/cpp-pointers-arrays.htm\" rel=\"nofollow noreferrer\">C++ Pointers and Arrays.</a></p>\n<p><a href=\"https://www.tutorialspoint.com/cplusplus/cpp_pointer_to_an_array.htm\" rel=\"nofollow noreferrer\">C++ Pointer to an Array.</a></p>\n<p><a href=\"https://isocpp.org/wiki/faq/cpp11-library-stl#std-array\" rel=\"nofollow noreferrer\">C++11 Standard Library Extensions</a></p>\n"}], "owner": {"reputation": 21, "user_id": 9469086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d436c8e5c186c84d0b2d55310eb4752?s=128&d=identicon&r=PG&f=1", "display_name": "4m4d3u5", "link": "https://stackoverflow.com/users/9469086/4m4d3u5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7187, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1597628264, "creation_date": 1524674768, "last_edit_date": 1524721963, "question_id": 50027421, "link": "https://stackoverflow.com/questions/50027421/assigning-char-array-to-pointer", "title": "Assigning char array to pointer", "body": "<p>I am trying to understand <strong>pointers</strong> in C++, but I am currently confused with the following:</p>\n\n<pre><code>char input_line[] = \"hi?\";\nchar* p;\np = &amp;input_line;\n\nwhile (*p)\n{       \n    cout &lt;&lt; *p &lt;&lt; endl;\n    *p++;\n}\n</code></pre>\n\n<p>I must be confused here because I would think this says assign the address of a <strong>1d array</strong> to the <strong>pointer</strong>; however, when I try to compile this, I get an error:  <code>error: cannot convert char (*)[4]' to 'char*' in assignment p = &amp;input_line;</code></p>\n\n<p>It looks like I should be doing this:</p>\n\n<pre><code>const char input[] = \"test?\";\nint quest_count = 0;\nconst char *i = input;\n\nwhile(*i){\n    cout &lt;&lt; *i &lt;&lt; endl;\n    *i++;\n}   \n</code></pre>\n\n<p>This doesn't make sense to me because you are assigning a <code>char</code> <strong>array</strong> to a <code>char</code> <strong>pointer</strong> which stores an address. </p>\n"}, {"tags": ["c++", "assembly"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1524674365, "post_id": 50027194, "comment_id": 87070861, "body": "This is either too broad or unclear, I can&#39;t really tell - so I voted unclear."}, {"owner": {"reputation": 15, "user_id": 9558347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b758ddad68fff68d0c853a66bfe230b?s=128&d=identicon&r=PG&f=1", "display_name": "Huseyin Meric Yigit", "link": "https://stackoverflow.com/users/9558347/huseyin-meric-yigit"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1524678726, "post_id": 50027194, "comment_id": 87073096, "body": "how to detect executable file own checksum sorry for my bad english ;)"}], "answers": [{"comments": [{"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524707182, "post_id": 50030914, "comment_id": 87083404, "body": "You could embed the hash if the check function knows to exclude the bytes where the hash itself is stored, or to zero those bytes after loading the correct hash into register(s).  And yes you&#39;d compute the hash of the whole file after building, but if you know where in the binary the hash is stored, you can modify those bytes in the executable.  (In the data section, or read-only-data.)"}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1524707325, "post_id": 50030914, "comment_id": 87083446, "body": "An anti-tampering check would have to be much more sophisticated than this, though, or else an attacker could pretty easily recompute the right hash and embed it.  Having it in a separate file would make it super-easy (unless it&#39;s buried deep in some other large data file with a custom binary format.)"}, {"owner": {"reputation": 14821, "user_id": 5743288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ea16526477fd6f1d4cc57f976af38d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Sanders", "link": "https://stackoverflow.com/users/5743288/paul-sanders"}, "reply_to_user": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 1, "creation_date": 1524718254, "post_id": 50030914, "comment_id": 87086087, "body": "@petercordes sign it with a private key, and check it (at run time) with the corresponding public key"}], "tags": [], "owner": {"reputation": 174, "user_id": 3991361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/117c04ce5e8216b90c553a0c7ffc8ac0?s=128&d=identicon&r=PG&f=1", "display_name": "Larry B", "link": "https://stackoverflow.com/users/3991361/larry-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1524688522, "creation_date": 1524688522, "answer_id": 50030914, "question_id": 50027194, "link": "https://stackoverflow.com/questions/50027194/how-to-self-checksuming-work/50030914#50030914", "title": "How to Self checksuming work?", "body": "<p>I think there is a problem with trying to put the checksum or hash directly into your executable. Such an approach would mean that the checksum/hash is going to be taken into account when determining the checksum/hash of your executable/binary. You can't encode the checksum/hash without affecting the resulting hash/checksum of the binary/executable.</p>\n\n<p>Without knowing more details of your situation, you probably want to have the hash of the binary stored outside of the thing you are trying to compute the checksum/hash of (ex. externally on a server or in a file located relative to the executable, etc.). You compute this hash after you've built your program. Your program on launch could then locate itself on disk and compute the hash of itself and compare to the hash stored externally. </p>\n\n<p><em>Sorry if this would be better as a comment, but I don't have the rep to comment.</em></p>\n"}], "owner": {"reputation": 15, "user_id": 9558347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b758ddad68fff68d0c853a66bfe230b?s=128&d=identicon&r=PG&f=1", "display_name": "Huseyin Meric Yigit", "link": "https://stackoverflow.com/users/9558347/huseyin-meric-yigit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 1, "accepted_answer_id": 50030914, "answer_count": 1, "score": -5, "last_activity_date": 1524688522, "creation_date": 1524673835, "last_edit_date": 1524679481, "question_id": 50027194, "link": "https://stackoverflow.com/questions/50027194/how-to-self-checksuming-work", "title": "How to Self checksuming work?", "body": "<p>My Question how to self checksuming work and detect own checksum in memory of file and check if executable modified terminate app? like commercial exe protector vmprotect pelock themida etc.. and how algorithm using and how to embed checksum in own file of executable and detect if modified? how to work? for example check md5 or crc32 self checksum of binary executable sorry my bad english ;) Thank you!</p>\n"}, {"tags": ["c++", "python-3.x", "scipy", "cython"], "comments": [{"owner": {"reputation": 36141, "user_id": 4354477, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/SuxtS.gif?s=128&g=1", "display_name": "ForceBru", "link": "https://stackoverflow.com/users/4354477/forcebru"}, "edited": false, "score": 0, "creation_date": 1524673994, "post_id": 50027161, "comment_id": 87070684, "body": "If you&#39;re looking for resources, your question&#39;s off-topic because &quot;questions asking us to <i>recommend or find</i> a book, tool, software library, <i>tutorial or other off-site resource</i> are off-topic for Stack Overflow as they tend to attract opinionated answers and spam.&quot;"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1524673996, "post_id": 50027161, "comment_id": 87070686, "body": "C++ is a very complex language and I have my doubts that writing the loop in C++ would really speed it up that much. Also you might find Cython to be more approachable if you don&#39;t know C++"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1524674539, "post_id": 50027161, "comment_id": 87070947, "body": "If the question is about the challenge of bridging C++ and Python, then that makes sense.  If the goal is for faster performance, I&#39;d do a lot of profiling before pulling the trigger -- I suspect that for many things Python is already very performant, and there are Python packages that can do some powerful (and performant) number crunching.  My bet would be that the C++ / Python solution will be far less performant -- not because C++ is slow, but the bridging is overhead, and performant C++ takes a lot of strong C++ knowledge."}, {"owner": {"reputation": 1244, "user_id": 3259331, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f10ee340643195493613d21bd958b8a7?s=128&d=identicon&r=PG&f=1", "display_name": "jtorca", "link": "https://stackoverflow.com/users/3259331/jtorca"}, "edited": false, "score": 0, "creation_date": 1524678792, "post_id": 50027161, "comment_id": 87073139, "body": "It&#39;s surprising for me to hear that writing a function like <code>llf</code> in C++ wouldn&#39;t be much faster, given answers like <a href=\"https://stackoverflow.com/questions/3033329/why-are-python-programs-often-slower-than-the-equivalent-program-written-in-c-or?lq=1\">these</a>. I thought the paradigm was to write most of your code in python but write performance critical pieces in a lower level language. Could you explain a little bit more why using Python with C++ would not produce large gains in speed?"}, {"owner": {"reputation": 1452, "user_id": 1510542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zysaA.jpg?s=128&g=1", "display_name": "MPA", "link": "https://stackoverflow.com/users/1510542/mpa"}, "edited": false, "score": 1, "creation_date": 1524679356, "post_id": 50027161, "comment_id": 87073442, "body": "Like <code>@Eljay</code> said, the performance bottleneck could possibly be in the bridging overhead (going from Python to C and back). Imagine having a fast car that is stuck in traffic... Whether or not you can get a speed gain would depend on how many C calls you make, and on the duration of each call. Also, it would be wise to first profile your Python code to see which part is really limiting performance. As an example, I once noticed that looping over the elements of a pandas dataframe is much slower than first converting the dataframe into numpy, and then performing the loop."}, {"owner": {"reputation": 32382, "user_id": 587803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7431a850a166ca3a648141c532aa9d0?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/587803/ben"}, "edited": false, "score": 0, "creation_date": 1524679480, "post_id": 50027161, "comment_id": 87073492, "body": "I agree with the above. Convert the data first into a suitable numpy data structure with only the needed fields, then use numpy."}, {"owner": {"reputation": 1244, "user_id": 3259331, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f10ee340643195493613d21bd958b8a7?s=128&d=identicon&r=PG&f=1", "display_name": "jtorca", "link": "https://stackoverflow.com/users/3259331/jtorca"}, "edited": false, "score": 0, "creation_date": 1524680441, "post_id": 50027161, "comment_id": 87073971, "body": "Would the number of C calls be equal to the number of times the function <code>llf</code> is evaluated? I feel more concerned about the time it takes to evaluate the function than the overhead of the bridge. I&#39;ll admit I&#39;m pretty ignorant on the latter, but I imagine as <code>N</code> grows (or the likelihood takes more time to evaluate in another way) the overhead wouldn&#39;t matter in comparison."}, {"owner": {"reputation": 3903, "user_id": 206545, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c03fef2c351700918666bca7b3d9f3ed?s=128&d=identicon&r=PG", "display_name": "sizzzzlerz", "link": "https://stackoverflow.com/users/206545/sizzzzlerz"}, "edited": false, "score": 0, "creation_date": 1524682058, "post_id": 50027161, "comment_id": 87074803, "body": "Have you profiled your existing python solution yet? Do you know for certainty that the bottleneck is in llf? Until you&#39;ve proven that, coding it in C or C++ could be a waste of time. Have a look at using Cython in your program. Even without using C++, you might get some improved performance. Profile, first, however."}], "answers": [{"comments": [{"owner": {"reputation": 1452, "user_id": 1510542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zysaA.jpg?s=128&g=1", "display_name": "MPA", "link": "https://stackoverflow.com/users/1510542/mpa"}, "edited": false, "score": 0, "creation_date": 1524727103, "post_id": 50032499, "comment_id": 87090062, "body": "I&#39;m not sure if the compiler does precomputation of constants. For instance, in your Cython code, you have constant terms like <code>sqrt(2*pi)</code> and <code>1&#47;2.</code>. You could predefine (at the top of your code) and replace these manually by <code>SQ_PI = sqrt(2*pi)</code> and <code>0.5</code>. Also, if you compute <code>sd</code> as <code>inv_sd = exp(-params[j+k])</code>, you can get rid of all the floating point divisions in <code>norm_pdf</code>. Divisions and square roots are computationally very expensive, so replace them with multiplications whenever you can."}, {"owner": {"reputation": 1452, "user_id": 1510542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zysaA.jpg?s=128&g=1", "display_name": "MPA", "link": "https://stackoverflow.com/users/1510542/mpa"}, "edited": false, "score": 0, "creation_date": 1524730900, "post_id": 50032499, "comment_id": 87092414, "body": "In addition to the above, I&#39;m a little surprised that Cython is over a 1000 times faster than your native Python implementation. Those kind of speed-ups are rather extreme. Could it be that <code>scipy.stats.norm.pdf()</code> function is rate limiting? Could you implement your own <code>norm_pdf</code> function into native Python and see if it makes any difference?"}, {"owner": {"reputation": 1244, "user_id": 3259331, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f10ee340643195493613d21bd958b8a7?s=128&d=identicon&r=PG&f=1", "display_name": "jtorca", "link": "https://stackoverflow.com/users/3259331/jtorca"}, "reply_to_user": {"reputation": 1452, "user_id": 1510542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zysaA.jpg?s=128&g=1", "display_name": "MPA", "link": "https://stackoverflow.com/users/1510542/mpa"}, "edited": false, "score": 0, "creation_date": 1524753813, "post_id": 50032499, "comment_id": 87107961, "body": "I wasn&#39;t sure how to implement <code>sd</code> as <code>inv_sd</code> but I implemented your other suggestion. I also wrote my own norm_pdf in Python and was very surprised to see a difference. Do you know why this is the case?"}, {"owner": {"reputation": 1452, "user_id": 1510542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zysaA.jpg?s=128&g=1", "display_name": "MPA", "link": "https://stackoverflow.com/users/1510542/mpa"}, "edited": false, "score": 0, "creation_date": 1524754408, "post_id": 50032499, "comment_id": 87108387, "body": "You&#39;d have to check the source code of <code>scipy.stats.norm.pdf()</code> to see what exactly it is doing, but apparently there are various background checks or computations being performed that slow it down by a factor 4 compared to your own implementation. The Cython implementation seemed to have gotten slower, though. In your <code>norm_pdf</code> function, you divide by <code>scale</code> twice, but you can calculate <code>1&#47;scale</code> as <code>inv_sd = exp(-params[j+k]</code> (<code>1&#47;exp(x)</code> = <code>exp(-x)</code>), so that in <code>norm_pdf</code> you can replace the divisions by multiplications."}, {"owner": {"reputation": 1244, "user_id": 3259331, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f10ee340643195493613d21bd958b8a7?s=128&d=identicon&r=PG&f=1", "display_name": "jtorca", "link": "https://stackoverflow.com/users/3259331/jtorca"}, "reply_to_user": {"reputation": 1452, "user_id": 1510542, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/zysaA.jpg?s=128&g=1", "display_name": "MPA", "link": "https://stackoverflow.com/users/1510542/mpa"}, "edited": false, "score": 0, "creation_date": 1524765096, "post_id": 50032499, "comment_id": 87114499, "body": "Also, this example assumes independence across random variables. What if I assumed a joint normal distribution, so that I&#39;d have to evaluate a multivariate pdf? This seems much more difficult to do in Cython, given the need for matrix operations. See my other question <a href=\"https://stackoverflow.com/questions/50034761/efficient-matrix-operations-in-cython-with-no-python-objects?noredirect=1#comment87113294_50034761\">here</a>."}], "tags": [], "owner": {"reputation": 1244, "user_id": 3259331, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f10ee340643195493613d21bd958b8a7?s=128&d=identicon&r=PG&f=1", "display_name": "jtorca", "link": "https://stackoverflow.com/users/3259331/jtorca"}, "is_accepted": false, "score": 1, "last_activity_date": 1524753695, "last_edit_date": 1524753695, "creation_date": 1524697234, "answer_id": 50032499, "question_id": 50027161, "link": "https://stackoverflow.com/questions/50027161/combine-python-and-c-or-cython-to-optimize-a-function-maximum-likelihood-ex/50032499#50032499", "title": "Combine python and c++, or cython, to optimize a function; maximum likelihood example; little knowledge of c++", "body": "<p>As suggested, I've tried a Cython solution. As I've never used Cython before, I'll be complete in the steps I used to implement the Cython solution.</p>\n\n<p>First, I installed Cython. Then I wrote a file called <code>fastllf.pyx</code> which contained the following Cython code:</p>\n\n<pre><code>#cython: boundscheck=False, wraparound=False, nonecheck=False\n\nfrom libc.math cimport exp, sqrt, pi, log, isnan\n\ncdef double SQ_PI = sqrt(2*pi)\n\n\ncdef double norm_pdf(double x, double loc, double scale):\n    return (1/(SQ_PI*scale))*exp(-(0.5)*((x - loc)**2)/(scale**2))\n\ncdef double llf_c(double[:, :] X, double[:] params):\n\n    cdef double logll = 0\n    cdef int N = X.shape[0]\n    cdef int K = X.shape[1]\n    cdef int i, j\n    cdef double m, sd\n\n    for i in range(N):\n        for j in range(K):\n            if not isnan(X[i, j]):\n                m = params[j]\n                sd = exp(params[j+K])\n\n                logll += log(norm_pdf(X[i, j], m, sd))\n    return -logll\n\ndef llf(double[:, :] X, double[:] params):\n    return llf_c(X, params)\n</code></pre>\n\n<p>Then I created a <code>setup.py</code> file which included the following:</p>\n\n<pre><code>from distutils.core import setup\nfrom Cython.Build import cythonize\n\nsetup(name=\"fastllf\", ext_modules=cythonize('fastllf.pyx'))\n</code></pre>\n\n<p>Next I compiled the Cython code using the following command in the terminal.</p>\n\n<pre><code>$ python3 setup.py build_ext --inplace\n</code></pre>\n\n<p>Finally, I compared the results between my old, pure Python implementation (slightly modified to use arrays instead of dataframes) and the Cython implementation.</p>\n\n<pre><code>import numpy as np\nfrom scipy.stats import norm\nimport time\nfrom fastllf import llf as cython_llf\n\n# simulating data\nmeans = np.array([10, 20, 30])\ncov = np.diag([1, 4, 10])\n\nN = 100000\nnp.random.seed(10)\n\nX = np.random.multivariate_normal(mean=means, cov=cov, size=N)\nX[np.random.choice([True, False], size=(N, 3), p=[0.3, 0.7])] = np.nan\n\ndef norm_pdf(x, loc, scale):\n    return (1/(np.sqrt(2*np.pi)*scale))*np.exp(-(0.5)*((x-loc)**2)/(scale**2))\n\ndef llf(X, params):\n\n    logll = 0\n    N = X.shape[0]\n    K = X.shape[1]\n\n    for i in range(N):\n        for j in range(K):\n            if not np.isnan(X[i, j]):\n                m = params[j]\n                sd = np.exp(params[j+K])\n\n                logll += np.log(norm_pdf(X[i, j], loc=m, scale=sd))    \n    return -logll    \n\ndef timeit(fun, *args):\n    start = time.time()\n    rslt = fun(*args)\n    end = time.time()\n    print(rslt)\n    print(end - start)\n\nparams = np.array([1.,1,1,1,1,1])\ntimeit(llf, X, params)\ntimeit(cython_llf, X, params)\n</code></pre>\n\n<p>And I obtained the following results:</p>\n\n<pre><code>Python Value: 6570173.7597125955\nPython Time:  1.9558300971984863 seconds\nCython Value: 6570173.7597125955\nCython Time:  0.016242027282714844 seconds\n</code></pre>\n\n<p>This makes optimization by maximum likelihood much more feasible, especially when my problem gets more complicated. The only problem is that I need to find the math and statistical functions I need to write an <code>llf</code> function in Cython or I need to write my own, as I did for the normal pdf above.</p>\n\n<p>Any comments on my implementation would be appreciated. </p>\n"}], "owner": {"reputation": 1244, "user_id": 3259331, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f10ee340643195493613d21bd958b8a7?s=128&d=identicon&r=PG&f=1", "display_name": "jtorca", "link": "https://stackoverflow.com/users/3259331/jtorca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524753695, "creation_date": 1524673732, "last_edit_date": 1524702016, "question_id": 50027161, "link": "https://stackoverflow.com/questions/50027161/combine-python-and-c-or-cython-to-optimize-a-function-maximum-likelihood-ex", "title": "Combine python and c++, or cython, to optimize a function; maximum likelihood example; little knowledge of c++", "body": "<p>I know Python, but I don't know C++. I'm trying to maximize a function that takes a long time to evaluate. I believe a good workflow would be to write the function that evaluates the function in C++ and use this function with scipy.optim.minimize to find the optimum. As an example, suppose I am maximizing a likelihood.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom scipy.optimize import minimize\nfrom scipy.stats import norm\n\n# simulating data\nmeans = np.array([10, 20, 30])\ncov = np.diag([1, 4, 10])\n\nN = 1000\n\ndf = pd.DataFrame(np.random.multivariate_normal(mean=means, cov=cov, size=N),\n    columns=['a', 'b', 'c'])\ndf[np.random.choice([True, False], size=(N, 3), p=[0.3, 0.7])] = np.nan\n\n# a function to print parameters used in likelihood function\ndef print_params(params):\n    print('Means: {}'.format(params[:3]))\n    print('Variances: {}'.format(np.exp(params[3:])**2))\n\n# defining likelihood\ndef llf(params):\n    logll = 0\n    for i in df.index:\n        for j,col in enumerate(['a', 'b', 'c']):\n            if not np.isnan(df.loc[i, col]):\n                m = params[j]\n                sd = np.exp(params[j+3])\n                logll += np.log(norm.pdf(df.loc[i, col], loc=m, scale=sd))\n\n    print_params(params)\n    return -logll\n\n\nopt = minimize(llf, x0=np.array([0, 0, 0, 1, 1, 1]), options={'maxiter':30})\nprint_params(opt.x)\n</code></pre>\n\n<p>There may be more efficient ways to write the <code>llf</code> function in pure Python, and there are definitely ways to speed up the optimization routine (e.g., by choosing a specific optimizer suited to the problem, or by supply derivatives), but this is not the focus of this question. I chose this particular example because I have a loop (I'm using all of the data, including rows where some columns have missing values) to evaluate the likelihood, which takes a lot of time in pure python, especially if my sample size grows.</p>\n\n<p>How can I write the likelihood function in C++ and combine that with the Python minimize routine? Keep in mind, I have no experience with C++ but am willing to learn. However, a lot of the resources available for this seem to presume C++ knowledge, see <a href=\"https://docs.python.org/3/extending/extending.html\" rel=\"nofollow noreferrer\">Extending Python</a> for example. I'm looking for resources for someone who knows Python, but is completely ignorant of C++ and methods for combining Python with C++. <strong>EDIT: Perhaps an example of how to do this using my example or information about the likely gains from combining Python and C++ would be useful.</strong></p>\n"}, {"tags": ["c++", "function", "main"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 6, "creation_date": 1524673523, "post_id": 50027068, "comment_id": 87070426, "body": "<code>This program compiles but only displays &quot;Hello&quot;.</code> I would be surprised otherwise. FYI, this applies to every function, not just <code>main</code>."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1524674523, "post_id": 50027068, "comment_id": 87070940, "body": "Well what do you expect this program to do?"}], "answers": [{"comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1524673653, "post_id": 50027083, "comment_id": 87070508, "body": "<code>You would need a goto before and after the return</code> No, he wouldn&#39;t. It&#39;s useless to write useless code."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1524673839, "post_id": 50027083, "comment_id": 87070582, "body": "@DimChtz How else?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1524673923, "post_id": 50027083, "comment_id": 87070650, "body": "<code>..to avoid the return statement</code> But you don&#39;t avoid the return statement. You still print before the <code>return</code> statement."}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1524674262, "post_id": 50027083, "comment_id": 87070819, "body": "@DimChtz Sooo, you don&#39;t like <code>goto</code>?"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1524674419, "post_id": 50027083, "comment_id": 87070892, "body": "I don&#39;t like useless code. Just write: <code>cout &lt;&lt; &quot;Hello\\nBye\\n&quot;; return 0;</code>"}, {"owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1524674685, "post_id": 50027083, "comment_id": 87071011, "body": "@DimChtz In your example the <code>return 0;</code> is useless because <code>main</code> will add that for you. Perhaps we shouldn&#39;t be too harsh?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1524674736, "post_id": 50027083, "comment_id": 87071028, "body": "@DimChtz But that doesn&#39;t really answer the question or demonstrate how <code>return</code> statements can be placed arbitrarily within a function. Its not about the best way to achieve the output, its about how <code>return</code> works."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1524674778, "post_id": 50027083, "comment_id": 87071054, "body": "@Galik Still his example with the <code>goto</code> is useless and makes no sense (at least for me)."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 1, "creation_date": 1524674870, "post_id": 50027083, "comment_id": 87071087, "body": "@DimChtz The sense behind the answer it to demonstrate how <code>return</code> works. That is the point of the program. It wouldn&#39;t be doing its job if it didn&#39;t show how <code>return</code> works (in the middle of) a function."}], "tags": [], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "is_accepted": false, "score": 5, "last_activity_date": 1524676435, "last_edit_date": 1524676435, "creation_date": 1524673489, "answer_id": 50027083, "question_id": 50027068, "link": "https://stackoverflow.com/questions/50027068/is-it-possible-to-write-statements-after-return/50027083#50027083", "title": "Is it possible to write statements after return?", "body": "<blockquote>\n  <p>is it possible to write statements after return?</p>\n</blockquote>\n\n<p>It is possible and valid to write more statements after the return. With gcc and Clang, I don't get a warning, even with the <code>-Wall</code> switch. But Visual Studio does produce <code>warning C4702: unreachable code</code> for this program.</p>\n\n<hr>\n\n<p>The <a href=\"http://en.cppreference.com/w/cpp/language/return\" rel=\"noreferrer\"><code>return</code> statement</a> terminates the current function, be it <code>main</code> or another function.</p>\n\n<p>Even though it is valid to write, if the code after the <code>return</code> is unreachable the compiler may eliminate it from the program as per the <a href=\"http://en.cppreference.com/w/cpp/language/as_if\" rel=\"noreferrer\">as-if rule</a>.</p>\n\n<hr>\n\n<p>You could have the <code>return</code> statement executed conditionally and you could have multiple <code>return</code> statements. For example:</p>\n\n<pre><code>int main() {\n    bool all_printed{false};\n    cout &lt;&lt; \"Hello\" &lt;&lt; endl;\n    if (all_printed) \n        return 0;\n    cout &lt;&lt; \"Bye\" &lt;&lt; endl;\n    all_printed = true;\n    if (all_printed) \n        return 0;\n}\n</code></pre>\n\n<hr>\n\n<p>Or, you could use a <code>goto</code> before and after the return and some labels, to execute the <code>return</code> statement after the second output:</p>\n\n<pre><code>int main() {\n\n    cout &lt;&lt; \"Hello\" &lt;&lt; endl;\n    goto print;\n\nreturn_here:\n    return 0;\n\nprint:\n    cout &lt;&lt; \"Bye\" &lt;&lt; endl;\n    goto return_here;\n}\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Hello\nBye\n</code></pre>\n\n<hr>\n\n<p>Another solution, linked to in <a href=\"https://stackoverflow.com/a/50027391/1460794\">this answer</a>, would be to use RAII to print after the return:</p>\n\n<pre><code>struct Bye {\n    ~Bye(){ cout &lt;&lt; \"Bye\" &lt;&lt; endl; } // destructor will print\n};\n\nint main() {\n    Bye bye;\n    cout &lt;&lt; \"Hello\" &lt;&lt; endl;\n    return 0; // ~Bye() is called\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 2, "last_activity_date": 1524673912, "creation_date": 1524673912, "answer_id": 50027211, "question_id": 50027068, "link": "https://stackoverflow.com/questions/50027068/is-it-possible-to-write-statements-after-return/50027211#50027211", "title": "Is it possible to write statements after return?", "body": "<blockquote>\n  <p>is return statement the last statement inside main or is it possible to write statements after return?</p>\n</blockquote>\n\n<p>The run time behavior of executing a <code>return</code> statement is independent of the function. Be it <code>main</code> or some other other function, when a <code>return</code> statement is executed, nothing after that is executed in the function.</p>\n\n<p>It is possible to write statements after the <code>return</code> statement. They are superfluous since they are not executed. A smart compiler might be able to even omit creation of object code corresponding to the statements after the <code>return</code> statement.</p>\n"}, {"comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1524674591, "post_id": 50027322, "comment_id": 87070977, "body": "-1 because early returns are perfectly fine. I&#39;ll take ten <code>return</code>s over ten nested <code>if</code>s or ten modifications to that dreaded <code>ret</code> variable any day."}, {"owner": {"reputation": 325, "user_id": 6882231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3b90aec2249238e8f6c8ff7df66ee2?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Matter ", "link": "https://stackoverflow.com/users/6882231/dark-matter"}, "reply_to_user": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 2, "creation_date": 1524674675, "post_id": 50027322, "comment_id": 87071007, "body": "@antonio Your edit is correct, but so was my answer and given his level of understanding he may not have seen &quot;if&quot; before."}, {"owner": {"reputation": 325, "user_id": 6882231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3b90aec2249238e8f6c8ff7df66ee2?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Matter ", "link": "https://stackoverflow.com/users/6882231/dark-matter"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1524674893, "post_id": 50027322, "comment_id": 87071100, "body": "@quentin There are situations where it&#39;s perfectly fine, ten nested ifs being a good example.  General rules are made to be broken in specific instances.  However the general rule is it should be avoided."}, {"owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "edited": false, "score": 0, "creation_date": 1524675140, "post_id": 50027322, "comment_id": 87071227, "body": "@DarkMatter If you want it to be more explicit, I would suggest using curly brackets"}], "tags": [], "owner": {"reputation": 325, "user_id": 6882231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3b90aec2249238e8f6c8ff7df66ee2?s=128&d=identicon&r=PG&f=1", "display_name": "Dark Matter ", "link": "https://stackoverflow.com/users/6882231/dark-matter"}, "is_accepted": false, "score": 0, "last_activity_date": 1524674379, "last_edit_date": 1524674379, "creation_date": 1524674347, "answer_id": 50027322, "question_id": 50027068, "link": "https://stackoverflow.com/questions/50027068/is-it-possible-to-write-statements-after-return/50027322#50027322", "title": "Is it possible to write statements after return?", "body": "<p>The only way you could usefully have code after a \"return\" is if the \"return\" statement is conditional.</p>\n\n<pre><code>if (error) return 0;\n# All code invoked past this point knows error is false\n</code></pre>\n\n<p>This isn't great coding style, you're creating code where there are 2+ ways to exit.  When you need to debug it you'll find it more challenging to put in flags and \"what happened when we exited\" and so forth.</p>\n"}, {"tags": [], "owner": {"reputation": 1409, "user_id": 6385640, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-muwyWfIjFd8/AAAAAAAAAAI/AAAAAAAAAG0/nctjQMOQOQY/photo.jpg?sz=128", "display_name": "Red.Wave", "link": "https://stackoverflow.com/users/6385640/red-wave"}, "is_accepted": false, "score": 1, "last_activity_date": 1524674586, "creation_date": 1524674586, "answer_id": 50027375, "question_id": 50027068, "link": "https://stackoverflow.com/questions/50027068/is-it-possible-to-write-statements-after-return/50027375#50027375", "title": "Is it possible to write statements after return?", "body": "<p>Such code is usually generated in the intermediates debugging stages while narrowing the window to capture a bug. It works but must be fixed by the programmer asap.</p>\n"}, {"tags": [], "owner": {"reputation": 17210, "user_id": 2436175, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/CK0Zo.png?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/2436175/antonio"}, "is_accepted": false, "score": 2, "last_activity_date": 1524675048, "last_edit_date": 1524675048, "creation_date": 1524674643, "answer_id": 50027391, "question_id": 50027068, "link": "https://stackoverflow.com/questions/50027068/is-it-possible-to-write-statements-after-return/50027391#50027391", "title": "Is it possible to write statements after return?", "body": "<p>You can write statements after a return like in your example, but they will never be executed, and some compilers will give you a warning \"unreachable code\" (For example \n<a href=\"https://msdn.microsoft.com/en-us/library/c26da40e.aspx\" rel=\"nofollow noreferrer\">C4702 in VS2015</a>).</p>\n\n<p>To execute code after a return statement, see <a href=\"https://stackoverflow.com/a/15822626/2436175\">Is it possible to execute code after return statement in C++?</a></p>\n"}], "owner": {"reputation": 149, "user_id": 9620327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99e332d7a37e81bbdd511c2b7dadfad5?s=128&d=identicon&r=PG&f=1", "display_name": "r_duck", "link": "https://stackoverflow.com/users/9620327/r-duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 663, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1528328447, "creation_date": 1524673406, "last_edit_date": 1524676559, "question_id": 50027068, "link": "https://stackoverflow.com/questions/50027068/is-it-possible-to-write-statements-after-return", "title": "Is it possible to write statements after return?", "body": "<p>Is the <code>return</code> statement the last statement inside <code>main</code> or is it possible to write statements after return?</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main() {\n\n    cout &lt;&lt; \"Hello\" &lt;&lt; endl;\n\n    return 0;\n\n    cout &lt;&lt; \"Bye\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>This program compiles but only displays \"Hello\".</p>\n"}, {"tags": ["c++", "inheritance", "singleton", "private"], "comments": [{"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1524673308, "post_id": 50026968, "comment_id": 87070298, "body": "Why is the inheritance <code>private Generator </code>?"}, {"owner": {"reputation": 55, "user_id": 9554504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gideok Seong", "link": "https://stackoverflow.com/users/9554504/gideok-seong"}, "reply_to_user": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1524673387, "post_id": 50026968, "comment_id": 87070332, "body": "@RobertAndrzejuk that&#39;s the declaration of singleton class to keep the any users from accessing Generator class."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1524673430, "post_id": 50026968, "comment_id": 87070356, "body": "You just answered your own question."}, {"owner": {"reputation": 55, "user_id": 9554504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gideok Seong", "link": "https://stackoverflow.com/users/9554504/gideok-seong"}, "reply_to_user": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1524673578, "post_id": 50026968, "comment_id": 87070460, "body": "Hmm, so you mean I cannot access function in Generator class? I want to make a limitation up to 10 access of Generator class."}, {"owner": {"reputation": 55, "user_id": 9554504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gideok Seong", "link": "https://stackoverflow.com/users/9554504/gideok-seong"}, "reply_to_user": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1524673647, "post_id": 50026968, "comment_id": 87070500, "body": "I need to call the function to use operator -&gt; in main fuction, is it possible?"}, {"owner": {"reputation": 5144, "user_id": 1856429, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/AiPnN.jpg?s=128&g=1", "display_name": "Eduard Rostomyan", "link": "https://stackoverflow.com/users/1856429/eduard-rostomyan"}, "edited": false, "score": 0, "creation_date": 1524673670, "post_id": 50026968, "comment_id": 87070515, "body": "Try composition. In this case its the better solution."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 9554504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gideok Seong", "link": "https://stackoverflow.com/users/9554504/gideok-seong"}, "edited": false, "score": 0, "creation_date": 1524674285, "post_id": 50027237, "comment_id": 87070826, "body": "Unfortunately, code worked but when it run the code, the program was shut down."}, {"owner": {"reputation": 55, "user_id": 9554504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gideok Seong", "link": "https://stackoverflow.com/users/9554504/gideok-seong"}, "edited": false, "score": 0, "creation_date": 1524674327, "post_id": 50027237, "comment_id": 87070843, "body": "I setup rPointer in Proxy header."}, {"owner": {"reputation": 128, "user_id": 9560588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5183d03e3d4312d5660574befc9f026e?s=128&d=identicon&r=PG&f=1", "display_name": "VolkerG", "link": "https://stackoverflow.com/users/9560588/volkerg"}, "reply_to_user": {"reputation": 55, "user_id": 9554504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gideok Seong", "link": "https://stackoverflow.com/users/9554504/gideok-seong"}, "edited": false, "score": 0, "creation_date": 1524675671, "post_id": 50027237, "comment_id": 87071487, "body": "@GideokSeong: Can you also post the code where you assign the value to rPointer?  It may also be easier to replace <code>Generator *rPointer;</code> with <code>Generator generator;</code> and return <code>&amp;generator</code> in <code>operator-&gt;</code>. That way you get rid of the inheritance in the Proxy class."}], "tags": [], "owner": {"reputation": 128, "user_id": 9560588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5183d03e3d4312d5660574befc9f026e?s=128&d=identicon&r=PG&f=1", "display_name": "VolkerG", "link": "https://stackoverflow.com/users/9560588/volkerg"}, "is_accepted": false, "score": 0, "last_activity_date": 1524674031, "creation_date": 1524674031, "answer_id": 50027237, "question_id": 50026968, "link": "https://stackoverflow.com/questions/50026968/how-to-access-the-function-in-base-class-when-using-singleton-class-as-a-derived/50027237#50027237", "title": "How to access the function in base class when using singleton class as a derived class", "body": "<p>To use <code>Proxy::operator-&gt;</code> you have to dereference <code>px</code> first. So <code>(*px)-&gt;getBits()</code> should do the trick.</p>\n\n<p>And as Eduard Rostomyan says, you should use a composite instead of inheritance, since a Proxy is <strong>not</strong> a Generator.</p>\n\n<p>Additionally, you are not setting rPointer anywhere in your code sample and your code.</p>\n"}, {"tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": true, "score": 0, "last_activity_date": 1524686915, "creation_date": 1524686915, "answer_id": 50030530, "question_id": 50026968, "link": "https://stackoverflow.com/questions/50026968/how-to-access-the-function-in-base-class-when-using-singleton-class-as-a-derived/50030530#50030530", "title": "How to access the function in base class when using singleton class as a derived class", "body": "<p><strong>Issue 1:</strong></p>\n\n<p>The inheritance is <code>private</code> that means everything from the base <code>Generator</code> class is going into the <code>private</code> part of <code>Proxy</code> class.\nIf The <code>public</code> functions from <code>Generator</code> are to be visible, then You need make the inheritance <code>public</code>\n-or-\ncreate a <code>public</code> function in <code>Proxy</code> which calls the needed functions in <code>Generator</code></p>\n\n<p><strong>Issue 2:</strong></p>\n\n<p>Inheritance is used when we need to use Derived classes (many times unknown classes) in a certain context. The Base class represents the abstract concept behind all the Derived classes. And it is used as a \"common\" concept between all the Derived classes.</p>\n\n<p>In other words: Is the <code>Generator</code> an abstraction of a <code>Proxy</code> -or- is the <code>Proxy</code> a specific type of <code>Generator</code>.\nIf not, then I would use composition (make it a variable in <code>Proxy</code>).</p>\n\n<p><strong>Issue 3:</strong></p>\n\n<p>In the comments, there is also a requirement to the amount of times the <code>Generator</code> class is accessed. With inheritance, the <code>Generator</code> class has to control all the access to it.</p>\n\n<p>So this is why You have a <code>Proxy</code> class. It is an extra level of indirection - it is a wrapper for Your <code>Generator</code> class, it should delegate all the calls to it. </p>\n\n<p>The <code>Proxy</code> class should have all the required functions that need to be called. It is the \"protector\" of the <code>Generator</code> class (That's probably why <code>private</code> inheritance is used).</p>\n\n<hr>\n\n<p>These issues are design issues, for which You have to decide, what is best.</p>\n"}], "owner": {"reputation": 55, "user_id": 9554504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Gideok Seong", "link": "https://stackoverflow.com/users/9554504/gideok-seong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 50030530, "answer_count": 2, "score": 0, "last_activity_date": 1524686915, "creation_date": 1524673042, "question_id": 50026968, "link": "https://stackoverflow.com/questions/50026968/how-to-access-the-function-in-base-class-when-using-singleton-class-as-a-derived", "title": "How to access the function in base class when using singleton class as a derived class", "body": "<p>It is a header of generator class; </p>\n\n<pre><code>#ifndef GENERATOR_H\n#define GENERATOR_H\n\n\nclass Generator\n{\n    public:\n        Generator(int);\n        ~Generator();\n        int getBits();\n\n    private:\n        int bits;\n};\n\n#endif // GENERATOR_H\n</code></pre>\n\n<p>.\nIt is a header of proxy class which is singleton class drived from Generator;</p>\n\n<pre><code>#ifndef PROXY_H\n#define PROXY_H\n#include \"Generator.h\"\n\nclass Proxy: private Generator\n{\n    public:\n        ~Proxy();\n        static Proxy* getInstance(int);\n        Generator * operator -&gt;();\n        int checkvalue();\n    private:\n        Proxy();\n        Proxy(int);\n        int bits;\n        int counter;\n        static Proxy* instance;\n        Generator * rPointer;\n};\n\n#endif // GENERATORPROXY_H\n</code></pre>\n\n<p>.\nThis is CPP file for Proxy.</p>\n\n<pre><code>Proxy::Proxy(int inputbits):Generator(inputbits)\n{\n}\n\nProxy::~Proxy()\n{\n\n}\nGenerator * Proxy::operator -&gt;()\n{\n    counter++;\n\n    if(counter&lt;=10)\n    return rPointer;\n    else\n    return 0;\n}\n\nProxy* Proxy::instance = 0;\n\nProxy* Proxy::getInstance(int inputbits)\n{\n    if(instance==0)\n    {\n        instance = new Proxy(inputbits);\n    }\n\n    return instance;\n\n}\n</code></pre>\n\n<p>Question: When I make some proxy object in main function, how I can call the getBits() function in main? </p>\n\n<p>This is part of main function:</p>\n\n<pre><code>Proxy* px = Proxy::getInstance(4);\ncout &lt;&lt; px-&gt;getBits() &lt;&lt; endl;\n</code></pre>\n\n<p>When I tried it error happend like this: <code>int Generator::getBits() is inaccessible. Generator is not an accessible base of Proxy.</code> \nThe way I can access Generator in main, I made operator like this: <code>Generator * Proxy::operator -&gt;()</code> which is in CPP file for proxy. How can I access to the getBits() function in main function? Thank you all your help.</p>\n"}, {"tags": ["c++", "arrays", "loops", "variables", "for-loop"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1524672591, "post_id": 50026788, "comment_id": 87069885, "body": "Why are you incrementing the counter variable inside the loop in the first place? that makes you skip the initialization of most of the array values"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1524672699, "post_id": 50026788, "comment_id": 87069946, "body": "You can try using (i+1) instead."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1524672727, "post_id": 50026788, "comment_id": 87069965, "body": "Actually <code>array[i] = i++;</code> is undefined behavior before C++17"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 0, "creation_date": 1524672781, "post_id": 50026788, "comment_id": 87069990, "body": "Unrelated, <code>std::iota(std::begin(a), std::end(a), 0);</code> Btw, <code>array</code> is a <i>terrible</i> name for an array in a modern C++ program, especially one that ill-advisedly pollutes the global namespace with <code>using namespace std;</code>."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1524672831, "post_id": 50026788, "comment_id": 87070024, "body": "Your edit makes it sound like you don&#39;t understand what <code>i++</code> does - it modifies <code>i</code>, while <code>i+1</code> does not"}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1524673064, "post_id": 50026788, "comment_id": 87070144, "body": "Did you use a debugger? <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/quickstart-debug-with-cplusplus\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/visualstudio/debugger/&hellip;</a>"}, {"owner": {"reputation": 693, "user_id": 2139902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0050129417b8d5d74968630b13da64c?s=128&d=identicon&r=PG", "display_name": "Sean Burton", "link": "https://stackoverflow.com/users/2139902/sean-burton"}, "edited": false, "score": 0, "creation_date": 1524673590, "post_id": 50026788, "comment_id": 87070477, "body": "I&#39;m not sure what purpose the array serves at all when each element is basically just the same value as it&#39;s position in the array."}], "answers": [{"comments": [{"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1524672642, "post_id": 50026836, "comment_id": 87069913, "body": "Apparently the OP wants to store 0-11 in <code>array</code> and print 1-12."}], "tags": [], "owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "is_accepted": false, "score": 0, "last_activity_date": 1524672609, "creation_date": 1524672609, "answer_id": 50026836, "question_id": 50026788, "link": "https://stackoverflow.com/questions/50026788/trying-to-create-a-better-loop-for-naming-array-elements/50026836#50026836", "title": "Trying to create a better loop for naming array elements", "body": "<pre><code>for (int i = 0; i &lt; 12; i++) {\n    cout &lt;&lt; \"Month number \" &lt;&lt; i + 1 &lt;&lt; endl;\n    array[i] = i+1;\n}\n</code></pre>\n\n<p>No reason to increment i in the loop</p>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "is_accepted": true, "score": 2, "last_activity_date": 1524673032, "last_edit_date": 1524673032, "creation_date": 1524672680, "answer_id": 50026854, "question_id": 50026788, "link": "https://stackoverflow.com/questions/50026788/trying-to-create-a-better-loop-for-naming-array-elements/50026854#50026854", "title": "Trying to create a better loop for naming array elements", "body": "<p>Simply do i+1 again.</p>\n\n<pre><code>for (int i = 0; i &lt; 12; i++) \n{\n    cout &lt;&lt; \"Month number \" &lt;&lt; i + 1 &lt;&lt; endl;\n    array[i] = i + 1;\n}\n</code></pre>\n\n<p>Now it's obvious you actually want to start at 1 and go to 12, so this seems somewhat better with less repetition:</p>\n\n<pre><code> for (int i = 1; i &lt;= 12; i++) \n {\n     cout &lt;&lt; \"Month number \" &lt;&lt; i &lt;&lt; endl;\n     array[i-1] = i;\n }\n</code></pre>\n\n<p>EDIT: As for your edit, the reason why this works is because i++ operator works on the particular i variable. It increments that existing i by one, making it so that the next time you access i, it will be 1 more than it was before.</p>\n\n<p>Writing i+1, on the other hand, creates a completely new, temporary, variable (actually a constant). So when you write</p>\n\n<pre><code>array[i] = i+1; \n</code></pre>\n\n<p>you're saying that you want i to remain unchanged, but you want to create a new number, one bigger than i, and put that new number into the array.</p>\n\n<p>You can even write it out longer to be completely explicit:</p>\n\n<pre><code>int newNumber = i+1;\narray[i] = newNumber;\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 9603723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7fe67b1681bab28ae94375f5ba940ca1?s=128&d=identicon&r=PG&f=1", "display_name": "Anghi22", "link": "https://stackoverflow.com/users/9603723/anghi22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 50026854, "answer_count": 2, "score": 0, "last_activity_date": 1524673622, "creation_date": 1524672435, "last_edit_date": 1524673622, "question_id": 50026788, "link": "https://stackoverflow.com/questions/50026788/trying-to-create-a-better-loop-for-naming-array-elements", "title": "Trying to create a better loop for naming array elements", "body": "<p>I have started studying arrays and have just started making some practice but I am having some problems with using loops to name the elements inside of a specific array.</p>\n\n<p>I was trying to make this piece of code that assigned the numbers from 1 up to 12(to resemble the months of the year) to the ints inside of the array, this is what I came up with:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\nint array[12];\n\nfor (int i = 0; i &lt; 12;) {\n    cout &lt;&lt; \"Month number \" &lt;&lt; i + 1 &lt;&lt; endl;\n    array[i] = (i++);\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>What I don't like about this is the fact that I had to leave the increment/decrement space inside of the for loop empty. I had initially tried making the code look something like this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\nint array[12];\n\nfor (int i = 0; i &lt; 12; i++) {\n    cout &lt;&lt; \"Month number \" &lt;&lt; i + 1 &lt;&lt; endl;\n    array[i] = i++;\n}\n\nreturn 0;\n}\n</code></pre>\n\n<p>But this way, even if the first element of the array came out correct, the subsequent ones didn't. I think the reason for this is that the i++ in the last statement of the loop makes the value of i increment but I couldn't find a way around it without having to add another line with i-- or doing as I did in the first code I posted.</p>\n\n<p>Could anyone offer me a hand in understanding how to make it so that i can store the value of i, incremented by one, inside of that specific array element, without incrementing it for the whole loop(if it is possible)?</p>\n\n<p>I know there are ways around it, just like I showed in the first code i posted, but it's something that's bugging me and so I would like to make it more visually pleasing.</p>\n\n<p>Please, keep in mind that I am just a beginner :)\nThanks in advance for the answers, and sorry for the long question.</p>\n\n<p>Edit: Apparently, coding like this:</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    int array[12];\n\n    for (int i = 0; i &lt; 12; i++) {\n        cout &lt;&lt; \"Month number \" &lt;&lt; i + 1 &lt;&lt; endl;\n        array[i] = i + 1;\n    }\n    cout &lt;&lt; array[4] &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>makes it so that the program works correctly and looks like I wanted, but I can't comprehend why it does :(</p>\n\n<p>Edit 2: Apparently, as UnholySheep pointed out, I missed on the fact that + 1 does not modify the value of the integer, while ++ does. \nThanks to everyone that answered and explained how ++ and +1 work!</p>\n"}, {"tags": ["c++", "boost", "mutex", "boost-interprocess"], "answers": [{"tags": [], "owner": {"reputation": 128, "user_id": 9560588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5183d03e3d4312d5660574befc9f026e?s=128&d=identicon&r=PG&f=1", "display_name": "VolkerG", "link": "https://stackoverflow.com/users/9560588/volkerg"}, "is_accepted": true, "score": 2, "last_activity_date": 1524679590, "last_edit_date": 1524679590, "creation_date": 1524672959, "answer_id": 50026945, "question_id": 50026772, "link": "https://stackoverflow.com/questions/50026772/boost-interprocess-mutexes-and-condition-variables/50026945#50026945", "title": "Boost Interprocess mutexes and condition variables", "body": "<p>wait releases the mutex while waiting, so the other thread can acquire the mutex and perform the notify.\nAlso see the description on <a href=\"https://www.boost.org/doc/libs/1_57_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.conditions.conditions_whats_a_condition\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_57_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.conditions.conditions_whats_a_condition</a>.</p>\n"}], "owner": {"reputation": 13335, "user_id": 1107474, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/1ed1a5311fa24392fb6c5f90f680c8dd?s=128&d=identicon&r=PG", "display_name": "mezamorphic", "link": "https://stackoverflow.com/users/1107474/mezamorphic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 890, "favorite_count": 0, "accepted_answer_id": 50026945, "answer_count": 1, "score": 1, "last_activity_date": 1524679590, "creation_date": 1524672394, "question_id": 50026772, "link": "https://stackoverflow.com/questions/50026772/boost-interprocess-mutexes-and-condition-variables", "title": "Boost Interprocess mutexes and condition variables", "body": "<p>I'm looking at this Boost example code for two processes sharing a mutex and condition variable between them:</p>\n\n<p><a href=\"https://www.boost.org/doc/libs/1_57_0/doc/html/interprocess/synchronization_mechanisms.html\" rel=\"nofollow noreferrer\">https://www.boost.org/doc/libs/1_57_0/doc/html/interprocess/synchronization_mechanisms.html</a></p>\n\n<p>but I don't understand how the mutex-condition variable design here can work.</p>\n\n<p>The initial process calls:</p>\n\n<pre><code>for(int i = 0; i &lt; NumMsg; ++i){\n     scoped_lock&lt;interprocess_mutex&gt; lock(data-&gt;mutex);    // Take mutex\n     if(data-&gt;message_in){\n        data-&gt;cond_full.wait(lock);                        // Wait\n     }\n     if(i == (NumMsg-1))\n        std::sprintf(data-&gt;items, \"%s\", \"last message\");\n     else\n        std::sprintf(data-&gt;items, \"%s_%d\", \"my_trace\", i);\n\n     //Notify to the other process that there is a message\n     data-&gt;cond_empty.notify_one();                        // Notify\n\n     //Mark message buffer as full\n     data-&gt;message_in = true;\n  }\n</code></pre>\n\n<p>and the second process calls:</p>\n\n<pre><code>  bool end_loop = false;\n  do{\n     scoped_lock&lt;interprocess_mutex&gt; lock(data-&gt;mutex);     // Take mutex\n     if(!data-&gt;message_in){\n        data-&gt;cond_empty.wait(lock);                        // Wait\n     }\n     if(std::strcmp(data-&gt;items, \"last message\") == 0){\n        end_loop = true;\n     }\n     else{\n        //Print the message\n        std::cout &lt;&lt; data-&gt;items &lt;&lt; std::endl;\n        //Notify the other process that the buffer is empty\n        data-&gt;message_in = false;\n        data-&gt;cond_full.notify_one();                       // Notify         \n     }\n  }\n  while(!end_loop);\n</code></pre>\n\n<p>To call <code>wait()</code> or <code>notify()</code> either process must hold the shared mutex, so if one process is on <code>wait()</code> the other surely cannot call <code>notify()</code>?</p>\n"}, {"tags": ["c++", "graphics"], "comments": [{"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1524722640, "post_id": 50026650, "comment_id": 87087623, "body": "If you don&#39;t have tangents as input, then Hermite curves are the wrong model to use. What are you trying to achieve?"}, {"owner": {"reputation": 48421, "user_id": 1196549, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/fa597bf0dc47449a25e1f7f5b57e3ef1?s=128&d=identicon&r=PG", "display_name": "Yves Daoust", "link": "https://stackoverflow.com/users/1196549/yves-daoust"}, "edited": false, "score": 0, "creation_date": 1524744920, "post_id": 50026650, "comment_id": 87101362, "body": "The simplest choice is with the Cardinal Splines."}], "answers": [{"tags": [], "owner": {"reputation": 1564, "user_id": 5422980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3d70c303b95aa718a340b77e11628e3?s=128&d=identicon&r=PG&f=1", "display_name": "Ari Hietanen", "link": "https://stackoverflow.com/users/5422980/ari-hietanen"}, "is_accepted": false, "score": 1, "last_activity_date": 1524677118, "creation_date": 1524677118, "answer_id": 50028093, "question_id": 50026650, "link": "https://stackoverflow.com/questions/50026650/tangent-values-in-hermite-curves/50028093#50028093", "title": "Tangent values in Hermite Curves", "body": "<p>If you only have two points it is hard to define the tangents in any meaningful way. The natural choice is to set them to 0. This will only draw a line between the points which of course is not very exiting. </p>\n\n<p>The simple way to define the tangents, if you have more points, is so called cardinal spline. For a point k the tangent is given</p>\n\n<p>R<sub>k</sub> = (1-c)(P<sub>k+1</sub>  - P<sub>k-1</sub>)</p>\n\n<p>c is a parameter between 0 and 1. c=1 gives you the straight lines and c=0 more curved answers. </p>\n\n<p>If you want to test it easily with your current code. You can imagine points -1 and 2, e.g., with P<sub>-1</sub>=(10,10) and P<sub>2</sub>=(150,120). This gives tangents with (c = 0)</p>\n\n<p>R<sub>0</sub> = (200, 143) and R<sub>1</sub> = (79, -45)</p>\n\n<p>which should give some curvature to the line. </p>\n\n<p>If you want more complicated tangents you can try <a href=\"https://en.wikipedia.org/wiki/Kochanek%E2%80%93Bartels_spline\" rel=\"nofollow noreferrer\">Kochanek-Bartels spline</a> (Wikipedia), which has three parameters (tension, bias, and continuity) to control the interpolation.</p>\n"}], "owner": {"reputation": 367, "user_id": 7176106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f347637f26d6a2df44ef6d2433778d14?s=128&d=identicon&r=PG&f=1", "display_name": "Nisha", "link": "https://stackoverflow.com/users/7176106/nisha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524677118, "creation_date": 1524671971, "last_edit_date": 1524672983, "question_id": 50026650, "link": "https://stackoverflow.com/questions/50026650/tangent-values-in-hermite-curves", "title": "Tangent values in Hermite Curves", "body": "<p>I am trying to draw curves using Hermite method in C++. I know that two points are starting and ending points while other two give tangents at the two ends. End points can be guessed directly, but how to decide the value of tangents. When I give simple values, I either end up on a straight line or a loop in the curve. </p>\n\n<p>My code is as:</p>\n\n<pre><code>//Using tangents\n\n#include&lt;iostream&gt;\n#include \"graphics.h\"\n//#include\"DDALine.h\"\nusing namespace std;\n\nvoid calcP(float P0x, float P0y, float R0x, float R0y, float P1x, float P1y, float R1x, float R1y, float Px, float Py, float t){\n    Px = (2 * t * t* t -3*t*t +1)*P0x + ( t*t*t - 2 *t*t +t)*R0x + (-2 * t*t*t + 3*t*t )*P1x +(t*t*t -t*t )*R1x;\n    Py = (2 * t * t* t -3*t*t +1)*P0y + ( t*t*t - 2 *t*t +t)*R0y + (-2 * t*t*t + 3*t*t )*P1y +(t*t*t -t*t )*R1y;\n            putpixel(Px, Py, WHITE);\n}\n\nint main(){\n    int gd = DETECT, gm;\n    initgraph(&amp;gd, &amp;gm, \"C:\\\\TC\\\\BGI\");\n\n    float t = 0;\n    float P0x = 71, P0y = 165, R0x = -12, R0y = 2, P1x = 210, P1y = 153, R1x = 108, R1y = 0, Px= 0, Py = 0, Pz = 0;\n    while(t&lt;1){\n        calcP(P0x, P0y, R0x, R0y, P1x, P1y, R1x, R1y, Px, Py, t);\n        t+=0.001;\n    }\n\n    getch();\n    closegraph();\n    return 0;\n}\n</code></pre>\n\n<p>Thanks for the help! In dire need. :)</p>\n"}, {"tags": ["c++", "debugging"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1524671977, "post_id": 50026608, "comment_id": 87069548, "body": "Why do you expect the comma operator to work differently with <code>std::cout</code> than it normally does? And what have you tried doing?"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1524672000, "post_id": 50026608, "comment_id": 87069569, "body": "What happened when you tried to run it? What did you expect and why&#39;d you expect it?"}, {"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1524672076, "post_id": 50026608, "comment_id": 87069617, "body": "Review <a href=\"http://en.cppreference.com/w/cpp/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/operator_precedence</a>  and then add brackets."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2486888"}, "edited": false, "score": 1, "creation_date": 1524672328, "post_id": 50026608, "comment_id": 87069753, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/54142/how-does-the-comma-operator-work\">How does the Comma Operator work</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1524672149, "post_id": 50026678, "comment_id": 87069658, "body": "<code>(cout &lt;&lt; 1), 2, 3, 4, 5</code>"}, {"owner": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "edited": false, "score": 0, "creation_date": 1524672458, "post_id": 50026678, "comment_id": 87069814, "body": "Depends. If you parenthesize as <code>(cout &lt;&lt; 1, 2, 3, 4, 5)</code> you get <code>5</code>. If you don&#39;t add parentheses but assign to a variable like <code>auto r = cout &lt;&lt; 1, 2, 3, 4, 5</code> the <code>=</code> operator binds stronger than <code>,</code> and you get <code>std::ostream&amp;</code> as type for <code>r</code>."}, {"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "reply_to_user": {"reputation": 14299, "user_id": 791713, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/1d51e358999bd31439d3810486942e9b?s=128&d=identicon&r=PG", "display_name": "Niklas R", "link": "https://stackoverflow.com/users/791713/niklas-r"}, "edited": false, "score": 0, "creation_date": 1524672795, "post_id": 50026678, "comment_id": 87069995, "body": "@NiklasR I tried that first, but it would actually not compile for me, <code>std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt;::operator =(const std::basic_ostream&lt;char,std::char_traits&lt;char&gt;&gt; &amp;)&#39;: attempting to reference a deleted function</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524677623, "post_id": 50026678, "comment_id": 87072527, "body": "@nvoigt that is because declaring a variable as <code>auto</code> doesn&#39;t deduce a reference, so the type of <code>r</code> will actually be <code>std::ostream</code> even though the value being assigned is a <code>std::ostream&amp;</code>. A <code>std::ostream</code> can&#39;t be copied, hence the &quot;deleted function&quot; error. Declaring <code>r</code> as <code>auto&amp;</code> would make it a <code>std::ostream&amp;</code> reference."}, {"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524677910, "post_id": 50026678, "comment_id": 87072683, "body": "@RemyLebeau Did you try? Because I get the same error setting it explicitely to an <code>ostream&amp;</code> and I still get it even when I split declaration and assignment."}], "tags": [], "owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "is_accepted": false, "score": 0, "last_activity_date": 1524672444, "last_edit_date": 1524672444, "creation_date": 1524672059, "answer_id": 50026678, "question_id": 50026608, "link": "https://stackoverflow.com/questions/50026608/how-does-the-comma-operator-work-with-cout-in-c/50026678#50026678", "title": "How does the comma operator work with cout in C++?", "body": "<p>The return value is an <code>int</code> with the value <code>5</code>. As side effect, <code>1</code> will be printed.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main(void)\n{\n    auto rv = (cout &lt;&lt; 1, 2, 3, 4, 5);\n\n    std::cout &lt;&lt; rv;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 8173622, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FUOZJ6cFOQU/AAAAAAAAAAI/AAAAAAAAABI/wADtJ5vORtg/photo.jpg?sz=128", "display_name": "Dmitry", "link": "https://stackoverflow.com/users/8173622/dmitry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1524673305, "creation_date": 1524671819, "last_edit_date": 1524673305, "question_id": 50026608, "link": "https://stackoverflow.com/questions/50026608/how-does-the-comma-operator-work-with-cout-in-c", "title": "How does the comma operator work with cout in C++?", "body": "<p>What's the return value (not printed) of</p>\n\n<pre><code>cout &lt;&lt; 1, 2, 3, 4, 5;\n</code></pre>\n\n<p>How can I debug this code?</p>\n\n<p>I need explain how work ostream and cout also.</p>\n"}, {"tags": ["c++", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1524671908, "post_id": 50026603, "comment_id": 87069508, "body": "Works fine for me on VS2015 and <a href=\"https://godbolt.org/g/fFhnyC\" rel=\"nofollow noreferrer\">gcc 7.3</a>."}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "edited": false, "score": 3, "creation_date": 1524672050, "post_id": 50026603, "comment_id": 87069605, "body": "And <a href=\"https://wandbox.org/permlink/1Raa6Jt37inf96f9\" rel=\"nofollow noreferrer\">Clang 7.0.0</a>."}, {"owner": {"reputation": 503, "user_id": 7458932, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/226f3917c60bd248fcd77f4448b19068?s=128&d=identicon&r=PG&f=1", "display_name": "devalone", "link": "https://stackoverflow.com/users/7458932/devalone"}, "edited": false, "score": 1, "creation_date": 1524672156, "post_id": 50026603, "comment_id": 87069665, "body": "seems to be bug of old gcc"}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1524672279, "post_id": 50026603, "comment_id": 87069733, "body": "It also works as early as gcc 7.1."}], "owner": {"reputation": 503, "user_id": 7458932, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/226f3917c60bd248fcd77f4448b19068?s=128&d=identicon&r=PG&f=1", "display_name": "devalone", "link": "https://stackoverflow.com/users/7458932/devalone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1524671811, "creation_date": 1524671811, "question_id": 50026603, "link": "https://stackoverflow.com/questions/50026603/why-cannot-c-unpack-template-arguments-into-the-default-constructor", "title": "Why cannot C++ unpack template arguments into the default constructor?", "body": "<p>Here it is </p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate &lt;typename T, typename... Args&gt;\nT* getSingleton(Args... args) {\n    static T instance(args...);\n    return &amp;instance;\n}\n\nclass MyType1 {\npublic:\n    MyType1(int val) {}\n    MyType1(const MyType1&amp;) = delete;\n    MyType1(MyType1&amp;&amp;) = delete;\n};\nclass MyType2 {\npublic:\n    MyType2() {}\n    MyType2(const MyType2&amp;) = delete;\n    MyType2(MyType2&amp;&amp;) = delete;\n};\n\nint main() {\n    std::cout &lt;&lt; getSingleton&lt;MyType1&gt;(11) &lt;&lt; std::endl; // works\n    // std::cout &lt;&lt; getSingleton&lt;MyType2&gt;() &lt;&lt; std::endl; // doesn't work\n\n    return 0;\n}\n</code></pre>\n\n<p>Got error:</p>\n\n<blockquote>\n  <p>prog.cpp: In instantiation of \u2018T* getSingleton(Args ...) [with T =\n  MyType2; Args = {}]\u2019: prog.cpp:24:37:   required from here\n  prog.cpp:5:27: error: use of deleted function\n  \u2018MyType2::MyType2(MyType2&amp;&amp;)\u2019   static T instance(args...);\n                             ^ prog.cpp:19:2: note: declared here   MyType2(MyType2&amp;&amp;) = delete;   ^~~~~~~</p>\n</blockquote>\n"}, {"tags": ["c++", "arrays", "stl"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 9, "creation_date": 1524671408, "post_id": 50026430, "comment_id": 87069197, "body": "where are your numbers coming from? tbh differences of the order of x50 smells like no compiler optimizations"}, {"owner": {"reputation": 673100, "user_id": 335858, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4af3541c00d591e9a518b9c0b3b1190a?s=128&d=identicon&r=PG", "display_name": "Sergey Kalinichenko", "link": "https://stackoverflow.com/users/335858/sergey-kalinichenko"}, "edited": false, "score": 6, "creation_date": 1524671667, "post_id": 50026430, "comment_id": 87069372, "body": "Crazy multiples such as 50x and even 10x are an indication that you are likely comparing functions that do nothing with the data. In essence, you are comparing the timing of passing a pointer to the timing of passing an array by value."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 3, "creation_date": 1524671756, "post_id": 50026430, "comment_id": 87069424, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, so others can test and include your <i>exact</i> compiler commandline."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1524673466, "post_id": 50026430, "comment_id": 87070383, "body": "Related: <a href=\"https://stackoverflow.com/questions/40241370/deduce-template-argument-for-size-of-initializer-list\" title=\"deduce template argument for size of initializer list\">stackoverflow.com/questions/40241370/&hellip;</a>"}, {"owner": {"reputation": 31, "user_id": 9698037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F0g7k6sXh28/AAAAAAAAAAI/AAAAAAAABtE/CbbLJucDa7s/photo.jpg?sz=128", "display_name": "Revillo", "link": "https://stackoverflow.com/users/9698037/revillo"}, "edited": false, "score": 0, "creation_date": 1524677265, "post_id": 50026430, "comment_id": 87072326, "body": "These tests were with compiler optimizations in visual studio. I am interested only in the costs associated with passing the arrays in differently, and not the costs associated with processing them. The vector implementation is so bad it actually slows down my game loop."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1524692129, "post_id": 50026430, "comment_id": 87079467, "body": "@Revillo: Your test is invalid, and the C version appears to be taking advantage of that to remove the code."}, {"owner": {"reputation": 31, "user_id": 9698037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F0g7k6sXh28/AAAAAAAAAAI/AAAAAAAABtE/CbbLJucDa7s/photo.jpg?sz=128", "display_name": "Revillo", "link": "https://stackoverflow.com/users/9698037/revillo"}, "edited": false, "score": 0, "creation_date": 1524751616, "post_id": 50026430, "comment_id": 87106401, "body": "Yes for the C test, use the C syntax as described in the post."}, {"owner": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 1, "creation_date": 1524755986, "post_id": 50026430, "comment_id": 87109418, "body": "<code>std::initializer_list</code> is not slower than c-style array under GCC or Clang, see <a href=\"http://quick-bench.com/DT5ArJ4AI_fbvIuCcvwSIi0l1BA\" rel=\"nofollow noreferrer\">this benchmark</a>. I guess either you did not use the release mode, or MSVC does not fully optimize the code."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 10915, "user_id": 5376789, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6715b3506c7312f63950450070ed8345?s=128&d=identicon&r=PG&f=1", "display_name": "xskxzr", "link": "https://stackoverflow.com/users/5376789/xskxzr"}, "edited": false, "score": 0, "creation_date": 1524766145, "post_id": 50026430, "comment_id": 87115019, "body": "@xskxzr the benchmark is also timing the external loop. Inside the benchmark loop leave only the function call."}], "answers": [{"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1524673098, "post_id": 50026614, "comment_id": 87070167, "body": "Won&#39;t work with the braced initializer syntax since it&#39;s a non-const lvalue reference. Do <code>T const (&amp;arr)[ N ]</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1524673100, "post_id": 50026614, "comment_id": 87070170, "body": "<code>{1,2,3}</code> isn&#39;t an array, it doesn&#39;t even have a type so there is nothing to deduce"}, {"owner": {"reputation": 31, "user_id": 9698037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F0g7k6sXh28/AAAAAAAAAAI/AAAAAAAABtE/CbbLJucDa7s/photo.jpg?sz=128", "display_name": "Revillo", "link": "https://stackoverflow.com/users/9698037/revillo"}, "reply_to_user": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 1, "creation_date": 1524676854, "post_id": 50026614, "comment_id": 87072104, "body": "Thanks for this solution, the added const @0x499602D2 is necessary to work with the r-value. The only issue I see now is that it is not possible to send an empty area or have a nullptr default argument."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1524680786, "post_id": 50026614, "comment_id": 87074150, "body": "Create a second overloaded function but diffrent parameters."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "edited": false, "score": 0, "creation_date": 1524682902, "post_id": 50026614, "comment_id": 87075253, "body": "Added additonal function with no parameter."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1524683005, "post_id": 50026614, "comment_id": 87075323, "body": "For efficiency you may want to have the top templated function call <code>func_real(arr, N)</code> because otherwise I suspect the compiler will build a new function for each different <code>N</code> used."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 1, "creation_date": 1524684427, "post_id": 50026614, "comment_id": 87076027, "body": "@ZanLynx For speed, that is exactly what is wanted. For different values of N, different code can be generated."}, {"owner": {"reputation": 31, "user_id": 9698037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F0g7k6sXh28/AAAAAAAAAAI/AAAAAAAABtE/CbbLJucDa7s/photo.jpg?sz=128", "display_name": "Revillo", "link": "https://stackoverflow.com/users/9698037/revillo"}, "edited": false, "score": 1, "creation_date": 1524688830, "post_id": 50026614, "comment_id": 87078015, "body": "I&#39;m not an expert, but my understanding is that generating a lot of functions is not necessarily good for performance, as it can increase the size of your compiled code and make it harder to cache.   Also, on the topic of overloading to avoid the empty list argument, this can be problematic when a function signature has multiple array parameters, one would need to 2^n overloads, and these may very well still be ambiguous to the user ie, if the lists are of the same type."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 31, "user_id": 9698037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F0g7k6sXh28/AAAAAAAAAAI/AAAAAAAABtE/CbbLJucDa7s/photo.jpg?sz=128", "display_name": "Revillo", "link": "https://stackoverflow.com/users/9698037/revillo"}, "edited": false, "score": 1, "creation_date": 1524689313, "post_id": 50026614, "comment_id": 87078235, "body": "@Revillo Performance will depend on the caching of Your code and data at the time of running. Not because of the amount of generated functions."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 31, "user_id": 9698037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F0g7k6sXh28/AAAAAAAAAAI/AAAAAAAABtE/CbbLJucDa7s/photo.jpg?sz=128", "display_name": "Revillo", "link": "https://stackoverflow.com/users/9698037/revillo"}, "edited": false, "score": 0, "creation_date": 1524689637, "post_id": 50026614, "comment_id": 87078386, "body": "@Revillo Added example of tag-dispatching for empty parameter."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 31, "user_id": 9698037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F0g7k6sXh28/AAAAAAAAAAI/AAAAAAAABtE/CbbLJucDa7s/photo.jpg?sz=128", "display_name": "Revillo", "link": "https://stackoverflow.com/users/9698037/revillo"}, "edited": false, "score": 0, "creation_date": 1524690322, "post_id": 50026614, "comment_id": 87078714, "body": "@Revillo Added function dispatcher."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1524692260, "post_id": 50026614, "comment_id": 87079510, "body": "@RobertAndrzejuk: But the amount of generated functions affects caching. It&#39;s trivial to have all of the <code>void func( T const (&amp;arr)[ N ]  )</code> calls redirect to <code>func(&amp;arr[0], N)</code>, which gets you speed, syntax, and caching."}, {"owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1524729965, "post_id": 50026614, "comment_id": 87091876, "body": "@MooingDuck Caching is not affected by the amount of generated functions, but the amount of times the <b>functions are called</b>. That is why your improvement can help this situation."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1524739986, "post_id": 50026614, "comment_id": 87098153, "body": "@RobertAndrzejuk There is also caching in the CPU for decoded instructions. Lots of functions doing mostly the same thing can bog down that cache."}], "tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 3, "last_activity_date": 1524735194, "last_edit_date": 1524735194, "creation_date": 1524671840, "answer_id": 50026614, "question_id": 50026430, "link": "https://stackoverflow.com/questions/50026430/modern-c-array-arguments/50026614#50026614", "title": "Modern C++ array arguments", "body": "<p>Try this :</p>\n\n<pre><code>template&lt; typename T, size_t N&gt;\nvoid func( T const (&amp;arr)[ N ]  )\n{...}\n\nvoid func() // overloaded function for empty parameter\n{...}\n</code></pre>\n\n<p>The compiler will automatically deduce the type and array size from the array passed into the function.\nThe array has to be a complete type - not a pointer and dimension has to be known at call location. </p>\n\n<hr>\n\n<p>Edit:\nIf a function with no parameters cannot be used, then tag-dispatching should be considered:</p>\n\n<pre><code>class Empty_List {};\n\nstatic constexpr Empty_List empty;\n\nvoid func( Empty_List ) \n{ ... }\n</code></pre>\n\n<p>which should be called:</p>\n\n<pre><code> func( empty ); // option 1\n func( {} );    // option 2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1524757134, "post_id": 50046840, "comment_id": 87110233, "body": "That&#39;s only if the arrays are <code>constexpr</code>."}], "tags": [], "owner": {"reputation": 868, "user_id": 4051512, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8bd3beb8e3334400c9d43118b2206a62?s=128&d=identicon&r=PG&f=1", "display_name": "papagaga", "link": "https://stackoverflow.com/users/4051512/papagaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1524756504, "creation_date": 1524756504, "answer_id": 50046840, "question_id": 50026430, "link": "https://stackoverflow.com/questions/50026430/modern-c-array-arguments/50046840#50046840", "title": "Modern C++ array arguments", "body": "<p>With C++17 it is easy enough to replace small arrays like this by variadic non-type templates. It might be worth considering something like:</p>\n\n<pre><code>template &lt;std::size_t... Ns&gt;\nusing A = std::index_sequence&lt;Ns...&gt;; // syntactic sugar\n\ntemplate &lt;std::size_t... Ns&gt;\nconstexpr void func(A&lt;Ns...&gt;) {\n    (do_something(Ns), ...); // fold expression &lt;=&gt; for (int a: arr)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40893, "user_id": 1386054, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/424ZW.jpg?s=128&g=1", "display_name": "Adrian McCarthy", "link": "https://stackoverflow.com/users/1386054/adrian-mccarthy"}, "is_accepted": false, "score": 0, "last_activity_date": 1524759708, "creation_date": 1524759708, "answer_id": 50047813, "question_id": 50026430, "link": "https://stackoverflow.com/questions/50026430/modern-c-array-arguments/50047813#50047813", "title": "Modern C++ array arguments", "body": "<p>A common idiom in C++ is a span, sometimes called a slice, a ref, or a view, as in array_view, string_view, etc.  Effectively, it's a bundling of the pointer and size arguments you used in the C-style array case, but in a C++ class that gives a <code>std::array</code> or <code>std::vector</code> interface.  It's a non-owning reference to the data held in another contiguous container.  Some implementations use spans only for const references but others do not.</p>\n\n<p>The idiom gives you identical code to your <code>std::vector</code> case, but it's as efficient as the C-style array case because there's no dynamic memory allocation and copying.</p>\n\n<p>The idiom has become so common, that it's part of the C++ Core Guidelines support library and a version may even make it into the C++ standard library.</p>\n\n<p>If you don't have a library that already provides this idiom, it's not too hard to roll your own.  You create a class template that has, as member, the pointer and the count of elements.  You add constructors that make it easy to convert containers to this representation, and you overload <code>operator[]</code> to provide access.</p>\n"}], "owner": {"reputation": 31, "user_id": 9698037, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-F0g7k6sXh28/AAAAAAAAAAI/AAAAAAAABtE/CbbLJucDa7s/photo.jpg?sz=128", "display_name": "Revillo", "link": "https://stackoverflow.com/users/9698037/revillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1195, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1524762310, "creation_date": 1524671266, "last_edit_date": 1524762310, "question_id": 50026430, "link": "https://stackoverflow.com/questions/50026430/modern-c-array-arguments", "title": "Modern C++ array arguments", "body": "<p>I would like to pass small arrays of variable size as parameters in modern C++, ie:</p>\n\n<pre><code>func({1,2,3,4});\n</code></pre>\n\n<p>And it should be as fast as possible, ideally without heap allocation.</p>\n\n<p>Things I've tried:</p>\n\n<p><strong>C style array</strong></p>\n\n<pre><code>void func(int * arr, int arrayCount) {\n   for (int i = 0; i &lt; arrayCount; i++) {\n      //use arr[i];\n   }\n}\n\nint arr[] = {1,2,3,4};\nfunc(arr, 4);\n</code></pre>\n\n<p>This is fast and efficient, but adds an extra arrayCount variable which is prone to user error,\nand the function call is now broken into two lines.</p>\n\n<p><strong>std vector</strong></p>\n\n<pre><code>void func(vector&lt;int&gt; arr) {\n    for (int &amp;a : arr) {\n      //use a\n    }\n}\n\nfunc({1,2,3});\n</code></pre>\n\n<p>This is very clean but it's remarkably slow due to copying data over to the heap.\nChanging the signature to use a universal ref:</p>\n\n<pre><code>void func(vector&lt;int&gt; &amp;&amp; arr) {\n</code></pre>\n\n<p>Doesn't seem to make any difference.</p>\n\n<p><strong>std initializer_list</strong></p>\n\n<pre><code>void func(initializer_list&lt;int&gt; arr) {\n    for (int &amp;a : arr) {\n      //use a\n    }\n}\n\nfunc({1,2,3});\n</code></pre>\n\n<p>This is a 50x speed improvement over the vector (approximately)! Using a &amp;&amp; again makes no difference, but it is still (approximately) 5-10x slower than the C style syntax due to the overhead of initializer_list creation and iteration. Still acceptable for many use cases, but the overhead seems a little unnecessary. </p>\n\n<p>Thinking maybe compilers had gotten smarter, I tried the following:</p>\n\n<p><strong>std array</strong></p>\n\n<pre><code>template &lt;int arrayCount&gt;\nvoid func(array&lt;int, arrayCount&gt; arr) {\n\n  for (int &amp;a : arr) {\n    //use a\n  }\n\n}\n</code></pre>\n\n<p>The compiler can not infer the size from the call, so it is necessary to write</p>\n\n<pre><code>func&lt;3&gt;({1,2,3});\n</code></pre>\n\n<p>And in any case, this is no faster than the initializer list.</p>\n\n<p>Variadic templates are out of the question for a number of reasons, because they don't support multiple array parameters and the syntax is difficult to navigate.</p>\n\n<p>Is there a way to get both clean syntax and fast performance? It seems like it would be easy to add some syntactic sugar to wrap the C style array notation.\n<hr>\n<strong>Clarification</strong>:</p>\n\n<p>These tests were performed in MSVC 2017 with default optimization (O2):</p>\n\n<pre><code>timer.start();\nfor(int i = 0; i &lt; 100000; i++) {\n   func({i, i+2, i+3, i+4});\n}\ntimer.stop();\n</code></pre>\n\n<p>or for the c style:</p>\n\n<pre><code>for (int i = 0; i &lt; 100000; i++) {\n   int arr[] = {i, i+2, i+3, i+4};\n   func(arr, 4);\n}\n</code></pre>\n\n<p>With the passed in values being added to a static variable.</p>\n\n<p><hr>\n<strong>Review</strong>:</p>\n\n<p>See Robert's answer below for the syntax for passing arrays using generics that avoids STL and has similar performance to the C style option, but is limited in its ability to handle empty arrays. </p>\n\n<p>My take away is that the initalizer_list notation is probably fast enough in most use cases, the vector notation should be avoided, and when performance is absolutely critical, consider the generic array approach or C style arrays depending on the use case. MSVC doesn't optimize these as well as GCC/Clang. </p>\n"}, {"tags": ["c++", "dynamic", "struct"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9698393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac3714d21f0025e9e67fb3cb18b6406?s=128&d=identicon&r=PG&f=1", "display_name": "UltHelp", "link": "https://stackoverflow.com/users/9698393/ulthelp"}, "edited": false, "score": 0, "creation_date": 1524672198, "post_id": 50026558, "comment_id": 87069692, "body": "Thanks! That was it code works now! For anyway that comes here and wonder why it&#39;s not compiling you&#39;ll need to have the above replaced with <code>CREATE_EXP setcreate = reinterpret_cast&lt;CREATE_EXP&gt;(dlsym(handle, &quot;Hunspell_create&quot;));</code>"}], "tags": [], "owner": {"reputation": 26945, "user_id": 771073, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/412bf39694cbe9d1fc0374deda225b18?s=128&d=identicon&r=PG", "display_name": "Martin Bonner supports Monica", "link": "https://stackoverflow.com/users/771073/martin-bonner-supports-monica"}, "is_accepted": true, "score": 0, "last_activity_date": 1524671686, "creation_date": 1524671686, "answer_id": 50026558, "question_id": 50026421, "link": "https://stackoverflow.com/questions/50026421/using-dlsym-for-a-struct-defined-function/50026558#50026558", "title": "Using dlsym() for a struct defined function", "body": "<p>The line</p>\n\n<pre><code>Example* *CREATE_EXP(const char*, const char*);\n</code></pre>\n\n<p>declares a function called <code>CREATE_EXP</code> which takes two strings and returns a pointer to pointer to <code>Example</code>.</p>\n\n<p>You want:</p>\n\n<pre><code>typedef Example* (*CREATE_EXP)(const char*, const char*);\n</code></pre>\n\n<p>Which declares <code>CREATE_EXP</code> as a typedef for a pointer to function which takes two strings and returns an <code>Example*</code>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9698393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ac3714d21f0025e9e67fb3cb18b6406?s=128&d=identicon&r=PG&f=1", "display_name": "UltHelp", "link": "https://stackoverflow.com/users/9698393/ulthelp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 562, "favorite_count": 0, "accepted_answer_id": 50026558, "answer_count": 1, "score": 0, "last_activity_date": 1524671686, "creation_date": 1524671248, "question_id": 50026421, "link": "https://stackoverflow.com/questions/50026421/using-dlsym-for-a-struct-defined-function", "title": "Using dlsym() for a struct defined function", "body": "<p>Other background:\nUsing Hunspell 1.4.1 32-bit libraries (i know there's more recent but these are the ones that apt-get can find for ease of use)\nOS: Debian Stretch\nCompiler: g++\nThe problem lies upon the Example* setcreate line, and perhaps the other dlsym usage, but I'm pretty sure those are right.</p>\n\n<p>Main.cpp:</p>\n\n<pre><code>#include &lt;iostream&gt; \n#include &lt;dlfcn.h&gt;\n#include &lt;hunspell/hunspell.hxx&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n\ntypedef struct Example Example;\nExample* *CREATE_EXP(const char*, const char*);\ntypedef int (*SPELL_EXP)(Example* e, const char*);\ntypedef int (*SUGGEST_EXP)(Example* e, char***, const char*);\n\ntypedef void (*DES_EXP)(Example* e);\ntypedef void (*FREE_EXP)(Example* e, char***, int);\nint main(void) \n{ \n\n    void* handle = dlopen(\"libhunspell-1.4.so\", RTLD_LAZY);\n\n    if (!handle) \n    { \n        std::cout &lt;&lt; \"Could not open the library\" &lt;&lt; std::endl; return 1; \n    }    \n\n\n    Example* setcreate = reinterpret_cast&lt;CREATE_EXP&gt;(dlsym(handle, \"Hunspell_create\"));\n\n\n    if (!setcreate) \n    { \n        std::cout &lt;&lt; dlerror() &lt;&lt; std::endl;\n        return 1; \n    }   \n\n    SPELL_EXP spell_e = reinterpret_cast&lt;SPELL_EXP&gt;(dlsym(handle, \"Hunspell_spell\"));\n    if (!spell_e) \n    { \n        std::cout &lt;&lt; dlerror() &lt;&lt; std::endl;\n        return 1; \n    }\n\n    SUGGEST_EXP suggest_e = reinterpret_cast&lt;SUGGEST_EXP&gt;(dlsym(handle, \"Hunspell_suggest\"));\n    if (!suggest_e) \n    { \n        std::cout &lt;&lt; dlerror() &lt;&lt; std::endl;\n        return 1; \n    }\n\n    FREE_EXP free_e = reinterpret_cast&lt;FREE_EXP&gt;(dlsym(handle, \"Hunspell_free_list\"));\n    if (!free_e) \n    { \n        std::cout &lt;&lt; dlerror() &lt;&lt; std::endl;\n        return 1; \n    }\n\n    DES_EXP dest_e = reinterpret_cast&lt;DES_EXP&gt;(dlsym(handle, \"Hunspell_destroy\"));\n    if (!dest_e) \n    { \n        std::cout &lt;&lt; dlerror() &lt;&lt; std::endl;\n        return 1; \n    }   \n\n    Example* created = setcreate(\"/usr/share/hunspell/en_US.aff\", \"/usr/share/hunspell/en_US.dic\"); \n    std::string a = \"\";\n    std::getline(std::cin, a);\n    std::istringstream iss( a );\n    std::string        word;\n    int           cntr = 0;\n    const char* cword;\n    int dp;\n    while (getline( iss, word, ' ' ))\n    {\n        if(!word.empty())\n            std::cout &lt;&lt; \"word \" &lt;&lt; ++cntr &lt;&lt; \": \" &lt;&lt; word &lt;&lt; '\\n';\n\n        cword = word.c_str();\n        dp = spell_e(created, cword);\n        //cout &lt;&lt; word &lt;&lt; endl;\n        if(dp)\n            std::cout &lt;&lt; \"Yes\" &lt;&lt; std::endl;\n        else\n        {\n            std::cout &lt;&lt; \"No\" &lt;&lt; std::endl;\n            char** wlst;\n            int ns = suggest_e(created, &amp;wlst, cword);\n            for (int i = 0; i &lt; ns; i++) {\n                std::cout &lt;&lt; wlst[i] &lt;&lt; \" \";\n            }\n            std::cout &lt;&lt; std::endl;\n            free_e(created, &amp;wlst, ns);\n        }\n\n\n    }\n\n    dest_e(created);\n    dlclose(handle); \n    return 0; \n\n}\n</code></pre>\n\n<p>Given it's an older version: </p>\n\n<p>Excerpt from Hunspell.h:</p>\n\n<pre><code>ifdef __cplusplus\nextern \"C\" {\n#endif\n\ntypedef struct Hunhandle Hunhandle;\n\nLIBHUNSPELL_DLL_EXPORTED Hunhandle* Hunspell_create(const char* affpath,\n                                                    const char* dpath);\n\nLIBHUNSPELL_DLL_EXPORTED void Hunspell_free_list(Hunhandle* pHunspell,\n                                             char*** slst,\n                                             int n);\n\nLIBHUNSPELL_DLL_EXPORTED int Hunspell_spell(Hunhandle* pHunspell, const char*);\n</code></pre>\n\n<p>Excerpt from Hunspell.cxx:</p>\n\n<pre><code>Hunhandle* Hunspell_create(const char* affpath, const char* dpath) {\n  return (Hunhandle*)(new Hunspell(affpath, dpath));\n}\n\nint Hunspell_spell(Hunhandle* pHunspell, const char* word) {\n  return ((Hunspell*)pHunspell)-&gt;spell(word);\n}\n\nvoid Hunspell_free_list(Hunhandle*, char*** slst, int n) {\n  freelist(slst, n);\n}\n</code></pre>\n"}, {"tags": ["c++", "tcp", "c++builder"], "comments": [{"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1524671252, "post_id": 50026337, "comment_id": 87069096, "body": "You haven&#39;t shown all your code. What&#39;s <code>IdTCPClient1</code>? See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and consider creating one to improve your question."}, {"owner": {"reputation": 1, "user_id": 9698394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e96c6a671641a3e62e22907e70a4f3?s=128&d=identicon&r=PG&f=1", "display_name": "BlueFab", "link": "https://stackoverflow.com/users/9698394/bluefab"}, "reply_to_user": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1524671837, "post_id": 50026337, "comment_id": 87069475, "body": "It is just a component of C++ Builder, IdTCPClient1 is the standard name if you select the TCP Client from Indy Clients... :)"}, {"owner": {"reputation": 15800, "user_id": 1274314, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/gSYsp.jpg?s=128&g=1", "display_name": "TypeIA", "link": "https://stackoverflow.com/users/1274314/typeia"}, "edited": false, "score": 0, "creation_date": 1524672001, "post_id": 50026337, "comment_id": 87069572, "body": "Understood, but omitting this makes it difficult or impossible for people who don&#39;t have C++ Builder and don&#39;t have lots of extra time to watch a YouTube video (such as myself) to help diagnose your question."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1524680705, "post_id": 50026337, "comment_id": 87074108, "body": "@BlueFab FYI, your code is using Indy 9, which is outdated by over a decade.  Consider upgrading to Indy 10 instead."}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1526575814, "last_edit_date": 1526575814, "creation_date": 1524679976, "answer_id": 50028839, "question_id": 50026337, "link": "https://stackoverflow.com/questions/50026337/cbuilder-send-array-using-tcp/50028839#50028839", "title": "C++Builder send array using TCP", "body": "<p>Regardless of how many dimensions your array uses, it still has a fixed byte size (<code>sizeof(int) * 3 * 3 = 36</code>), so you can use the <code>TIdTCPConnection::WriteBuffer()</code> and <code>TIdTCPConnection::ReadBuffer()</code> methods to send/receive it, eg:</p>\n\n<pre><code>IdTCPClient1-&gt;WriteBuffer(&amp;example, sizeof(example));\n</code></pre>\n\n<p></p>\n\n<pre><code>AThread-&gt;Connection-&gt;ReadBuffer(&amp;example, sizeof(example));\n</code></pre>\n\n<p>But, if you don't want to rely on that, then you could send/receive the <code>int</code> values individually using the <code>TIdTCPConnection::WriteInteger()</code> and <code>TIdTCPConnection::ReadInteger()</code> methods instead, eg:</p>\n\n<pre><code>for (int i = 0; i &lt; 3; ++i)\n{\n    for (int j = 0; j &lt; 3; ++j)\n        IdTCPClient1-&gt;WriteInteger(example[i][j]);\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>for (int i = 0; i &lt; 3; ++i)\n{\n    for (int j = 0; j &lt; 3; ++j)\n        example[i][j] = AThread-&gt;Connection-&gt;ReadInteger();\n}\n</code></pre>\n\n<p>If you use a dynamically allocated array instead, you could then send the individual dimensions before sending the actual integers, that way the receiver would know how many integers to expect so it could allocate a suitable array to receive them, eg:</p>\n\n<pre><code>IdTCPClient1-&gt;WriteInteger(3);\nIdTCPClient1-&gt;WriteInteger(3);\n\nfor (int i = 0; i &lt; 3; ++i)\n{\n    for (int j = 0; j &lt; 3; ++j)\n        IdTCPClient1-&gt;WriteInteger(example[i][j]);\n}\n</code></pre>\n\n<p></p>\n\n<pre><code>rows = AThread-&gt;Connection-&gt;ReadInteger();\ncols = AThread-&gt;Connection-&gt;ReadInteger();\n\nexample = new int*[rows];\nfor (int i = 0; i &lt; rows; ++i)\n{\n    example[i] = new int[cols];\n    for (int j = 0; j &lt; cols; ++j)\n        example[i][j] = AThread-&gt;Connection-&gt;ReadInteger();\n}\n</code></pre>\n\n<p>That being said, there are several problems with the code you have showed.</p>\n\n<ul>\n<li><p>Your client and server do not match each other:</p>\n\n<ul>\n<li><p>Your client is sending a length-prefixed AnsiString, followed by a (not count-prefixed) TStringList.  It is then reading a length-prefixed AnsiString.</p></li>\n<li><p>Your server is reading the client's length-prefixed AnsiString correctly, but is ignoring the client's TStringList.  It is then sending the length of an AnsiString but not sending the AnsiString itself, followed by a (not count-prefixed) TStringList.  The client will not read the TStringList correctly.</p></li>\n</ul></li>\n<li><p>Your TIdTCPServer::OnExecute handler is not synchronizing with the main UI thread when accessing the UI controls.  TIdTCPServer is a multi-threaded component, its events are fired in the context of worker threads, not the main UI thread.  You MUST synchronize when accessing the UI from a worker thread, or else bad things happen.</p></li>\n</ul>\n\n<p>Try this instead:</p>\n\n<p>Client:</p>\n\n<pre><code>//---------------------------------------------------------------------------\n\n#include &lt;vcl.h&gt;\n#pragma hdrstop\n\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\n\nvoid __fastcall TForm1::Button1Click(TObject *Sender)\n{\n    String s = Edit1-&gt;Text;\n\n    int example[3][3];\n    for (int i = 0; i &lt; 3; ++i)\n    {\n        for (int j = 0; j &lt; 3; ++j)\n           example[i][j] = (i*3)+j;\n    }\n\n    IdTCPClient1-&gt;Connect();\n    try\n    {\n        //send byte length\n        IdTCPClient1-&gt;WriteInteger(s.Length());\n        //send text\n        IdTCPClient1-&gt;Write(s);\n\n        // send array\n        IdTCPClient1-&gt;WriteBuffer(&amp;example, sizeof(example));\n\n        ListBox1-&gt;Items-&gt;Add(s + \"&gt;&gt;sent\");\n\n        int bytes = IdTCPClient1-&gt;ReadInteger();\n        String resp = IdTCPClient1-&gt;ReadString(bytes);\n        ListBox1-&gt;Items-&gt;Add(resp);\n    }\n    __finally\n    {\n        IdTCPClient1-&gt;Disconnect();\n    }\n}\n//---------------------------------------------------------------------------\n</code></pre>\n\n<p>Server:</p>\n\n<pre><code>//---------------------------------------------------------------------------\n\n#include &lt;vcl.h&gt;\n#pragma hdrstop\n\n#include \"Unit1.h\"\n#include &lt;IdSync.hpp&gt;\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\nclass TAddToListBoxSync : public TIdSync\n{\npublic:\n    String str;\n    __fastcall TAddToListBoxSync(const String &amp;s) : TIdSync(), str(s) {}\n    virtual void __fastcall DoSynchronize() { Form1-&gt;ListBox1-&gt;Items-&gt;Add(str); }\n};\n\nclass TSetEditTextSync : public TIdSync\n{\npublic:\n    String str;\n    __fastcall TSetEditTextSync(const String &amp;s) : TIdSync(), str(s) {}\n    virtual void __fastcall DoSynchronize() { Form1-&gt;Edit1-&gt;Text = str; }\n};\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n    : TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\nvoid __fastcall TForm1::IdTCPServer1Execute(TIdPeerThread *AThread)\n{\n    int bytes = AThread-&gt;Connection-&gt;ReadInteger();\n    String request = AThread-&gt;Connection-&gt;ReadString(bytes);\n\n    int example[3][3];\n    AThread-&gt;Connection-&gt;ReadBuffer(&amp;example, sizeof(example));\n\n    TAddToListBoxSync *lb_sync = new TAddToListBoxSync(request);\n    try {\n        lb_sync-&gt;Synchronize();\n    }\n    __finally {\n        delete lb_sync;\n    }\n\n    String risp = FormatDateTime(\"hh:mm AM/PM\", Now());\n\n    TSetEditTextSync *edt_sync = new TSetEditTextSync(risp);\n    try {\n        edt_sync-&gt;Synchronize();\n    }\n    __finally {\n        delete edt_sync;\n    }\n\n    AThread-&gt;Connection-&gt;WriteInteger(risp.Length());\n    AThread-&gt;Connection-&gt;Write(risp);\n\n    lb_sync = new TAddToListBoxSync(risp + \"&gt;&gt; inviato\");\n    try {\n        lb_sync-&gt;Synchronize();\n    }\n    __finally {\n        delete lb_sync;\n    }\n\n    AThread-&gt;Connection-&gt;Disconnect();\n}\n//---------------------------------------------------------------------------\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9698394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5e96c6a671641a3e62e22907e70a4f3?s=128&d=identicon&r=PG&f=1", "display_name": "BlueFab", "link": "https://stackoverflow.com/users/9698394/bluefab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1526575814, "creation_date": 1524670924, "last_edit_date": 1524678037, "question_id": 50026337, "link": "https://stackoverflow.com/questions/50026337/cbuilder-send-array-using-tcp", "title": "C++Builder send array using TCP", "body": "<p>In C++Builder, I have to send a multi-dimensional array of <code>int</code> like:</p>\n\n<pre><code>int example[3][3];\n</code></pre>\n\n<p>using a TCP protocol. </p>\n\n<p>I created a socket using this video:</p>\n\n<p><a href=\"https://www.youtube.com/watch?v=UjrITeDk718\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=UjrITeDk718</a></p>\n\n<p>But I do not understand how to send just a multi-dimensional array instead of a string... Any hint?</p>\n\n<p>CLIENT CODE:  </p>\n\n<pre><code>//---------------------------------------------------------------------------\n\n#include &lt;vcl.h&gt;\n#pragma hdrstop\n\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n  : TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\n\nvoid __fastcall TForm1::Button1Click(TObject *Sender)\n{\n  IdTCPClient1-&gt;Connect();\n  //send byte\n  IdTCPClient1-&gt;WriteInteger(Edit1-&gt;Text.Length());\n  //send text\n  IdTCPClient1-&gt;Write(Edit1-&gt;Text);\n\n\n  //send request\n  TStringList *SL = new TStringList;\n  SL-&gt;Add(Edit1-&gt;Text);\n  IdTCPClient1 -&gt;WriteStrings(SL);\n  delete SL;\n  ListBox1-&gt;Items-&gt;Add(Edit1-&gt;Text+\"&gt;&gt;sent\");\n\n\n  int bytes = IdTCPClient1 -&gt; ReadInteger();\n  AnsiString resp = IdTCPClient1-&gt;ReadString(bytes);\n  ListBox1-&gt;Items-&gt;Add(resp);\n  IdTCPClient1-&gt;Disconnect();\n\n}\n//---------------------------------------------------------------------------\n</code></pre>\n\n<p>SERVER CODE:</p>\n\n<pre><code>//---------------------------------------------------------------------------\n\n#include &lt;vcl.h&gt;\n#pragma hdrstop\n\n#include \"Unit1.h\"\n//---------------------------------------------------------------------------\n#pragma package(smart_init)\n#pragma resource \"*.dfm\"\nTForm1 *Form1;\n//---------------------------------------------------------------------------\n__fastcall TForm1::TForm1(TComponent* Owner)\n  : TForm(Owner)\n{\n}\n//---------------------------------------------------------------------------\nvoid __fastcall TForm1::IdTCPServer1Execute(TIdPeerThread *AThread)\n{\n  int bytes =  AThread-&gt;Connection-&gt;ReadInteger();\n\n  AnsiString request = AThread-&gt;Connection-&gt;ReadString(bytes);\n  ListBox1-&gt;Items-&gt;Add(request);\n\n  Edit1-&gt;Text=FormatDateTime(\"hh:mm AM/PM\", Now());\n  AnsiString risp = Edit1-&gt;Text;\n\n  AThread-&gt;Connection-&gt;WriteInteger(risp.Length());\n  TStringList *SL = new TStringList;\n  SL-&gt;Add(risp);\n  AThread-&gt;Connection-&gt;WriteStrings(SL);\n  delete SL;\n  ListBox1-&gt;Items-&gt;Add(risp+\"&gt;&gt; inviato\");\n  AThread-&gt;Connection-&gt;Disconnect();\n}\n//---------------------------------------------------------------------------\n</code></pre>\n"}, {"tags": ["c++", "performance", "networking", "boost", "beast"], "comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1524679877, "post_id": 50026167, "comment_id": 87073693, "body": "There is far too little information to go on here. Obviously changing the namespace qualification isn&#39;t going to hurt performance. Have you tried profiling both versions and comparing the bottle necks?"}, {"owner": {"reputation": 63, "user_id": 6810163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794965d13993cbac0e882d42fb3e3e3e?s=128&d=identicon&r=PG&f=1", "display_name": "badfd", "link": "https://stackoverflow.com/users/6810163/badfd"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1524690839, "post_id": 50026167, "comment_id": 87078924, "body": "I agree -- not much to go on. Beast is just a small part of a rather large application. Requests are composed and sent, as shown. Reads are just as mundane <code>http::read(stream, buffer, res)</code>. I&#39;ll try to provide a trivial example that exhibits the problem."}, {"owner": {"reputation": 63, "user_id": 6810163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794965d13993cbac0e882d42fb3e3e3e?s=128&d=identicon&r=PG&f=1", "display_name": "badfd", "link": "https://stackoverflow.com/users/6810163/badfd"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1524779828, "post_id": 50026167, "comment_id": 87121287, "body": "I just edited the original post to include call chains for both <code>beast::http:write&lt;&gt;()</code> and <code>boost::beast::http::write&lt;&gt;()</code>."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1524783027, "post_id": 50026167, "comment_id": 87122256, "body": "What are these percentages? (Also, are you profiling a debug build?)"}, {"owner": {"reputation": 63, "user_id": 6810163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794965d13993cbac0e882d42fb3e3e3e?s=128&d=identicon&r=PG&f=1", "display_name": "badfd", "link": "https://stackoverflow.com/users/6810163/badfd"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1524786048, "post_id": 50026167, "comment_id": 87122990, "body": "These percentages come from <code>perf</code>. I ran my (debug build) app with <code>perf record -g</code> for both cases, and these percentages represent the relative time spent sending HTTP requests.  As you can see (bottom) the time spent by the poor performer in <code>sock_sendmsg()</code> is triple that of the good performer."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6810163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794965d13993cbac0e882d42fb3e3e3e?s=128&d=identicon&r=PG&f=1", "display_name": "badfd", "link": "https://stackoverflow.com/users/6810163/badfd"}, "edited": false, "score": 0, "creation_date": 1524786152, "post_id": 50053054, "comment_id": 87123021, "body": "Thanks, Vinnie. I&#39;ll investigate that possibility."}, {"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "edited": false, "score": 0, "creation_date": 1524798324, "post_id": 50053054, "comment_id": 87125716, "body": "I can try to implement the workaround, are you interested?"}, {"owner": {"reputation": 63, "user_id": 6810163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794965d13993cbac0e882d42fb3e3e3e?s=128&d=identicon&r=PG&f=1", "display_name": "badfd", "link": "https://stackoverflow.com/users/6810163/badfd"}, "edited": false, "score": 0, "creation_date": 1524825838, "post_id": 50053054, "comment_id": 87137601, "body": "Very interested! :-) That would be great, and very appreciated."}, {"owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "reply_to_user": {"reputation": 63, "user_id": 6810163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794965d13993cbac0e882d42fb3e3e3e?s=128&d=identicon&r=PG&f=1", "display_name": "badfd", "link": "https://stackoverflow.com/users/6810163/badfd"}, "edited": false, "score": 1, "creation_date": 1524939677, "post_id": 50053054, "comment_id": 87175388, "body": "@badfd This pull request has a new class <code>flat_stream</code> which coalesces outgoing buffers, example of use is in the <code>ssl_stream</code> class. If you could continue the related discussion on the pull request itself, via comments, that would be very helpful: <a href=\"https://github.com/boostorg/beast/pull/1110\" rel=\"nofollow noreferrer\">github.com/boostorg/beast/pull/1110</a>"}, {"owner": {"reputation": 63, "user_id": 6810163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794965d13993cbac0e882d42fb3e3e3e?s=128&d=identicon&r=PG&f=1", "display_name": "badfd", "link": "https://stackoverflow.com/users/6810163/badfd"}, "edited": false, "score": 0, "creation_date": 1525199503, "post_id": 50053054, "comment_id": 87261493, "body": "Thanks very much! Your <code>flat_stream</code> worked like a charm. I look forward to its merging into the main library; meanwhile, I&#39;ll patch my code."}], "tags": [], "owner": {"reputation": 4520, "user_id": 150679, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7162b2123d51b183b31a4dbb6548adaf?s=128&d=identicon&r=PG", "display_name": "Vinnie Falco", "link": "https://stackoverflow.com/users/150679/vinnie-falco"}, "is_accepted": true, "score": 6, "last_activity_date": 1524785010, "last_edit_date": 1524785010, "creation_date": 1524783906, "answer_id": 50053054, "question_id": 50026167, "link": "https://stackoverflow.com/questions/50026167/performance-drop-on-port-from-beast-1-0-0-b66-to-boost-1-67-0-beast/50053054#50053054", "title": "Performance drop on port from Beast.1.0.0-b66 to Boost.1.67.0.Beast", "body": "<p>It should be faster, not slower, as the HTTP algorithms were optimized. I think I know what is going on though. It would be helpful if you could compare the performance of the two versions when using regular sockets and not SSL. <code>boost::asio::ssl::stream</code> has a shortcoming which is that when writing buffer sequences of length greater than one, it writes to the socket for each buffer in the sequence instead of coalescing those encrypted buffers into a single write. This can have significant performance impact.</p>\n\n<p>This really needs to be fixed in Boost.Asio but a workaround is that you can write your own stream wrapper whose write algorithm, when presented with buffer sequences whose length is greater than one, creates a new sequence of length one by using <code>memcpy</code> and dynamic allocation. I would also open an issue here: <a href=\"https://github.com/boostorg/asio/issues\" rel=\"noreferrer\">https://github.com/boostorg/asio/issues</a></p>\n\n<p>Why the difference in the two versions of Beast? The older version of Beast allocated memory during serialization to hold a linear version of the message. The current version uses an algorithm which requires no memory allocations at all. It is faster in the normal case, but as you have discovered when working with <code>ssl::stream</code> types it can be slower.</p>\n\n<p>See <a href=\"https://github.com/boostorg/beast/issues/1108\" rel=\"noreferrer\">https://github.com/boostorg/beast/issues/1108</a></p>\n"}], "owner": {"reputation": 63, "user_id": 6810163, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794965d13993cbac0e882d42fb3e3e3e?s=128&d=identicon&r=PG&f=1", "display_name": "badfd", "link": "https://stackoverflow.com/users/6810163/badfd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 1, "accepted_answer_id": 50053054, "answer_count": 1, "score": 3, "last_activity_date": 1524785010, "creation_date": 1524670352, "last_edit_date": 1524779210, "question_id": 50026167, "link": "https://stackoverflow.com/questions/50026167/performance-drop-on-port-from-beast-1-0-0-b66-to-boost-1-67-0-beast", "title": "Performance drop on port from Beast.1.0.0-b66 to Boost.1.67.0.Beast", "body": "<p>I have observed a precipitous drop in performance (and dramatic increase in CPU consumption) on migrating from Beast.1.0.0-b66 (using Boost.1.64.0) to Boost.1.67.0.Beast (i.e. with Beast integrated into Boost). No doubt I've done something wrong, but I cannot imagine what.</p>\n\n<p>What was:</p>\n\n<pre><code>typedef beast::http::request&lt;beast::http::string_body&gt; BeastHttpRequest;\n</code></pre>\n\n<p>is now:</p>\n\n<pre><code>namespace http = boost::beast::http;    \ntypedef http::request&lt;http::string_body&gt; BeastHttpRequest;\n</code></pre>\n\n<p>and what was:</p>\n\n<pre><code>beast::http::prepare(req);\nbeast::http::write(stream, req);\n</code></pre>\n\n<p>is now:</p>\n\n<pre><code>req.prepare_payload();\nhttp::write(stream, req);\n</code></pre>\n\n<p>Of course, I also had to make numerous API changes. For example:</p>\n\n<pre><code>req.fields.replace(hdrName, hdrValue);\n</code></pre>\n\n<p>is now:</p>\n\n<pre><code>req.set(hdrName, hdrValue);\n</code></pre>\n\n<p>The application works correctly -- including both SSL handshaking and proxy negotiation -- but I have to fix the spike in CPU consumption and commensurate drop in performance. I wonder if anyone knows of something obvious that I've overlooked.</p>\n\n<p>EDIT:\nI should have mentioned that I'm using a flat_buffer for the SSL stream.</p>\n\n<p>I've had a chance to profile both the \"before port\" and \"after port\" performance data. Here is the \"before port\" (i.e. good performance) call chain:</p>\n\n<pre><code>- 34.61% HttpRequest::send\n   - 32.02% beast::http::write&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;&amp;&gt;, true, beast::http::string_body,\n      - 31.90% beast::http::write&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;&amp;&gt;, true, beast::http::string_bo\n         - 20.77% beast::http::detail::write_preparation&lt;true, beast::http::string_body, beast::http::basic_fields&lt;std::allocator&lt;char&gt; &gt; &gt;::init\n            - 18.25% beast::http::detail::write_fields&lt;beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;, beast::http::basic_fields&lt;std::allocator&lt;char&gt; &gt; &gt;\n               - 10.38% beast::write&lt;beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;, boost::basic_string_ref&lt;char, std::char_traits&lt;char&gt; &gt; &gt;\n                  - 10.20% beast::detail::write_dynabuf&lt;beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;, boost::basic_string_ref&lt;char, std::char_traits&lt;char&gt; &gt; &gt;\n                     + 3.66% beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;::prepare\n                     + 2.90% beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;::commit\n                     + 1.81% boost::lexical_cast&lt;std::string, boost::basic_string_ref&lt;char, std::char_traits&lt;char&gt; &gt; &gt;\n                     + 1.47% boost::asio::buffer_copy&lt;beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;::mutable_buffers_type&gt;\n               - 7.51% beast::write&lt;beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;, char [3]&gt;\n                  - 7.47% beast::detail::write_dynabuf&lt;beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;, 3ul&gt;\n                     + 3.14% beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;::prepare\n                     + 2.84% beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;::commit\n                     + 1.32% boost::asio::buffer_copy&lt;beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;::mutable_buffers_type&gt;\n            + 2.04% beast::http::detail::write_start_line&lt;beast::basic_streambuf&lt;std::allocator&lt;char&gt; &gt;, beast::http::basic_fields&lt;std::allocator&lt;char&gt; &gt; &gt;\n         - 9.60% beast::http::string_body::writer::write&lt;beast::http::detail::writef0_lambda&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_serv\n            - 9.57% beast::http::detail::writef0_lambda&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;&amp;&gt;, beast:\n               - 9.54% boost::asio::write&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;&amp;&gt;, beast::detail::buffe\n                  - 9.48% boost::asio::write&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;&amp;&gt;, beast::detail::bu\n                     - 8.55% boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;&amp;&gt;::write_some&lt;boost::asio::detail::c\n                        - 7.56% boost::asio::ssl::detail::io&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;, boost::asio::ssl::detail::wr\n                           - 6.98% boost::asio::write&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;, boost::asio::mutable_buffers_1&gt;\n                              - 6.93% boost::asio::write&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;, boost::asio::mutable_buffers_1,\n                                 - 6.69% boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp, boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt; &gt;::write_some&lt;boost::asio::detail::consuming_buffer\n                                    - 6.69% boost::asio::stream_socket_service&lt;boost::asio::ip::tcp&gt;::send&lt;boost::asio::detail::consuming_buffers&lt;boost::asio::const_buffer, boost::asio::mutable_buffers_1&gt;\n                                       - 6.67% boost::asio::detail::reactive_socket_service_base::send&lt;boost::asio::detail::consuming_buffers&lt;boost::asio::const_buffer, boost::asio::mutable_buffers_1&gt; &gt;\n                                          - 6.51% boost::asio::detail::socket_ops::sync_send\n                                             - 6.32% 0xec6d\n                                                - 6.08% system_call_fastpath\n                                                   - 6.07% sys_sendmsg\n                                                      - 6.06% __sys_sendmsg\n                                                         - 5.94% ___sys_sendmsg\n                                                            + 5.84% sock_send\n</code></pre>\n\n<p>and here is the \"after port\" (i.e. poor performance) call chain:</p>\n\n<pre><code>- 53.77% HttpRequest::send\n   - 53.32% boost::beast::http::write&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;&amp;&gt;, true, boost::beast::http::basic_string_body&lt;char, std::char_traits&lt;char&gt;, std::allo\n      - 53.30% boost::beast::http::write&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;&amp;&gt;, true, boost::beast::http::basic_string_body&lt;char, std::char_traits&lt;char&gt;, std::a\n         - 53.14% boost::beast::http::write&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;&amp;&gt;, true, boost::beast::http::basic_string_body&lt;char, std::char_traits&lt;char&gt;, std\n            - 53.03% boost::beast::http::write_some&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;&amp;&gt;, true, boost::beast::http::basic_string_body&lt;char, std::char_traits&lt;ch\n               - 52.95% boost::beast::http::detail::write_some_impl&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;&amp;&gt;, true, boost::beast::http::basic_string_body&lt;char, std\n                  - 36.58% boost::beast::http::serializer&lt;true, boost::beast::http::basic_string_body&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, boost::beast::http::basic_fields&lt;std::allocator&lt;\n                     - 35.28% boost::beast::http::serializer&lt;true, boost::beast::http::basic_string_body&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt;, boost::beast::http::basic_fields&lt;std::allocat\n                        - 25.93% boost::beast::http::detail::write_some_lambda&lt;boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;&amp;&gt; &gt;::operator()&lt;boost::beast::detail::buffers\n                           - 25.82% boost::asio::ssl::stream&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;&amp;&gt;::write_some&lt;boost::beast::detail::buffers_ref&lt;boost::beast::buffers_prefix_view&lt;boost:\n                              - 25.69% boost::asio::ssl::detail::io&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;, boost::asio::ssl::detail::write_op&lt;boost::beast::detail::buffers_ref&lt;boost::beas\n                                 - 22.20% boost::asio::write&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;, boost::asio::mutable_buffer&gt;\n                                    - 22.13% boost::asio::write&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;, boost::asio::mutable_buffer, boost::asio::detail::transfer_all_t&gt;\n                                       - 21.96% boost::asio::detail::write_buffer_sequence&lt;boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;, boost::asio::mutable_buffer, boost::asio::mutable_buffer\n                                          - 21.47% boost::asio::basic_stream_socket&lt;boost::asio::ip::tcp&gt;::write_some&lt;boost::asio::const_buffers_1&gt;\n                                             - 21.34% boost::asio::detail::reactive_socket_service_base::send&lt;boost::asio::const_buffers_1&gt;\n                                                - 21.17% boost::asio::detail::socket_ops::sync_send\n                                                   - 20.45% 0xec6d\n                                                      - 19.63% system_call_fastpath\n                                                         - 19.57% sys_sendmsg\n                                                            - 19.52% __sys_sendmsg\n                                                               - 19.16% ___sys_sendmsg\n                                                                  + 18.90% sock_sendmsg\n</code></pre>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1524669714, "post_id": 50025919, "comment_id": 87068044, "body": "do i understand correctly that you already have two working solutions and you want some input on which one would be better? In that case your question may be better at <a href=\"https://codereview.stackexchange.com\">codereview.stackexchange.com</a>, while here you may get &quot;too broad&quot; or otherwise motivated down/close votes"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1524669728, "post_id": 50025919, "comment_id": 87068052, "body": "You should use <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"nofollow noreferrer\"><code>std::unique_ptr</code></a> for owning pointers."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524669820, "post_id": 50025919, "comment_id": 87068119, "body": "Callbacks can be easily stored in a <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\"><code>std::function</code></a> and combine well with <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">lambda expressions</a> to capture any relevant variable or object."}, {"owner": {"reputation": 175, "user_id": 2348789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bffc0ccf9ea99edb8e1099c864a1f2?s=128&d=identicon&r=PG", "display_name": "backscattered", "link": "https://stackoverflow.com/users/2348789/backscattered"}, "edited": false, "score": 0, "creation_date": 1524670019, "post_id": 50025919, "comment_id": 87068256, "body": "Although codereview is possibly a better area for this, my main question is there a better way to accomplish this. I&#39;m cool if this is closed though, and I&#39;ll move it to codereview."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524670336, "post_id": 50025919, "comment_id": 87068498, "body": "@backscattered It&#39;s not clear to me what you are trying to do. In the <code>c</code> version, I don&#39;t see where <code>b</code> comes into play."}, {"owner": {"reputation": 175, "user_id": 2348789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bffc0ccf9ea99edb8e1099c864a1f2?s=128&d=identicon&r=PG", "display_name": "backscattered", "link": "https://stackoverflow.com/users/2348789/backscattered"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524671182, "post_id": 50025919, "comment_id": 87069050, "body": "@Fran&#231;oisAndrieux I added some example operations for b. This is fairly standard method signatures in C libraries where the main struct that is central to a function is supplied as pointer within the first argument."}, {"owner": {"reputation": 175, "user_id": 2348789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bffc0ccf9ea99edb8e1099c864a1f2?s=128&d=identicon&r=PG", "display_name": "backscattered", "link": "https://stackoverflow.com/users/2348789/backscattered"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524671263, "post_id": 50025919, "comment_id": 87069102, "body": "@Fran&#231;oisAndrieux I can&#39;t see the use of a unique_ptr for the _Obj members as they may be deleted by subclasses. Am I missing something here?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524671578, "post_id": 50025919, "comment_id": 87069306, "body": "@backscattered Right, now that I look more closely, <code>std::unique_ptr</code> is not applicable. Though I think that&#39;s because the ownership of <code>A_Obj</code> is illdefined. If you make a <code>B</code>, that instance&#39;s <code>~A</code> will try to delete <code>A_Obj</code> which I can&#39;t tell if it&#39;s deletable or not. And it&#39;s still not clear to me what <code>b</code> does in the first example. I&#39;m not very familiar with <code>c</code>, so maybe is should be obvious, but perhaps a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be in order. Are you sure <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\"><code>std::function</code></a> isn&#39;t what you are looking for?"}, {"owner": {"reputation": 175, "user_id": 2348789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bffc0ccf9ea99edb8e1099c864a1f2?s=128&d=identicon&r=PG", "display_name": "backscattered", "link": "https://stackoverflow.com/users/2348789/backscattered"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524674669, "post_id": 50025919, "comment_id": 87071005, "body": "@Fran&#231;oisAndrieux I updated the question to provide a full usage example. I hope this helps. You can compile it by concatenating all the code blocks together into a file."}, {"owner": {"reputation": 175, "user_id": 2348789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bffc0ccf9ea99edb8e1099c864a1f2?s=128&d=identicon&r=PG", "display_name": "backscattered", "link": "https://stackoverflow.com/users/2348789/backscattered"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524675145, "post_id": 50025919, "comment_id": 87071228, "body": "@Fran&#231;oisAndrieux the ownership of A is indeed ill-defined as it&#39;s a hack to attempt to mimic a contained struct."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524676761, "post_id": 50025919, "comment_id": 87072071, "body": "@backscattered Is the problem that, in the case of a <code>B</code> you do not want <code>A</code> to have it&#39;s own <code>a</code> but rather to use <code>B::b</code>&#39;s <code>a</code> instead?"}, {"owner": {"reputation": 175, "user_id": 2348789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bffc0ccf9ea99edb8e1099c864a1f2?s=128&d=identicon&r=PG", "display_name": "backscattered", "link": "https://stackoverflow.com/users/2348789/backscattered"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524676935, "post_id": 50025919, "comment_id": 87072160, "body": "@Fran&#231;oisAndrieux Yes. That&#39;s definitely the problem with this implementation. Perhaps there&#39;s a better way of doing this."}], "owner": {"reputation": 175, "user_id": 2348789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bffc0ccf9ea99edb8e1099c864a1f2?s=128&d=identicon&r=PG", "display_name": "backscattered", "link": "https://stackoverflow.com/users/2348789/backscattered"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524674083, "creation_date": 1524669577, "last_edit_date": 1524674083, "question_id": 50025919, "link": "https://stackoverflow.com/questions/50025919/wrapping-struct-hierarchy-into-c-classes", "title": "wrapping struct hierarchy into C++ classes", "body": "<p>How can this hierarchy be wrapped by C++ classes that contain member functions which call their C equivalents?</p>\n\n<p>C often uses a significant number of hacks to obtain an inheritance hierarchy. One of which, is the <code>container_of</code> macro that is used heavily within the linux kernel. I'm working with an existing C library written in such a style, and I would like to adapt the struct hierarchy into one wrapped by C++. For purposes of illustration, I'll use the following struct hierarchy.</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n#include &lt;cstddef&gt;\n\n#define container_of(ptr, type, member) ({                      \\\n        const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr);    \\\n        (type *)( (char *)__mptr - offsetof(type,member) );})\n\nextern \"C\" {\n    struct a;\n\n    typedef void (*callback_t)(struct a *self);\n\n    struct a {\n        callback_t cb;\n    };\n\n    struct b {\n        struct a a;\n        const char * name;\n    };\n\n    void handle_event(struct a *self) {\n        self-&gt;cb(self);\n    };\n\n    void process_event(struct a * a) {\n        handle_event(a);\n    }\n\n    void some_a_operation(struct a * self) {\n        printf(\"some operation called on a @ %p\\n\", self);\n    }\n\n    void some_b_operation(struct b * self) {\n        printf(\"some operation called on a @ %p\\n\", self);\n    }\n\n    void c_callback_handler(struct a * a)\n    {\n        struct b * b = container_of(a, struct b, a);\n        printf(\"%s\\n\", b-&gt;name);\n    }\n};\n</code></pre>\n\n<p>Given no changes to the above code, I can see the following means.</p>\n\n<h1>Delegation with wrappers</h1>\n\n<p>This overcomes the prior examples issues of <code>struct a</code> duplication at the cost of significant complexity.</p>\n\n<pre><code>class A {\npublic:\n    A() {\n        A_Wrap = new A_wrapper {{A::Cb}, this};\n        A_Obj = &amp;A_Wrap-&gt;a_member;\n    }\n    virtual ~A() {\n        delete A_Wrap;\n    }\n    void OperationA() {\n        some_a_operation(A_Obj);\n    }\n    virtual void InstanceCb() {};\n    // member functions access struct a via A_Obj\nprotected:\n    struct A_wrapper {\n        a a_member;\n        A * A_member;\n    };\n    A_wrapper* A_Wrap;\n    a * A_Obj;\nprivate:\n    static void Cb(a * self) {\n        A_wrapper * a_wrapper = container_of(self, A_wrapper, a_member);\n        a_wrapper-&gt;A_member-&gt;InstanceCb();\n    }\n};\n\nclass B: public A {\npublic:\n    B() {\n        delete A_Wrap;\n        B_Wrap = new B_wrapper {{&amp;B::Cb}, this};\n        A_Obj = &amp;B_Wrap-&gt;b_member.a;\n        B_Obj = &amp;B_Wrap-&gt;b_member;\n    }\n    virtual ~B() {\n        A_Wrap = nullptr;\n        delete B_Wrap;\n    }\n    void OperationB() {\n        some_b_operation(B_Obj);\n    }\n    virtual void InstanceCb() {\n        std::cout &lt;&lt; \"B class\" &lt;&lt; std::endl;\n    };\n    // member functions access struct a via A_Obj\nprotected:\n    struct B_wrapper {\n        b b_member;\n        B * B_member;\n    };\n    B_wrapper * B_Wrap;\n    b * B_Obj;\nprivate:\n    static void Cb(a * self) {\n        b * b_contained = container_of(self, b, a);\n        B_wrapper * b_wrapper = container_of(b_contained, B_wrapper, b_member);\n        b_wrapper-&gt;B_member-&gt;InstanceCb();\n    }\n};\n</code></pre>\n\n<h1>Usage Examples</h1>\n\n<pre><code>int main(int argc, char **argv) {\n    // C usage\n    const char * b_name = \"b struct\";\n    struct b b_cexample = {\n            {c_callback_handler}, b_name\n    };\n\n    process_event(&amp;b_cexample.a);\n    some_a_operation(&amp;b_cexample.a);\n    some_b_operation(&amp;b_cexample);\n\n\n    // C++ usage example\n    B b_cppexample;\n    b_cppexample.InstanceCb();\n    b_cppexample.OperationA();\n    b_cppexample.OperationB();\n}\n</code></pre>\n"}, {"tags": ["c++", "exception", "destructor"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1524669477, "post_id": 50025862, "comment_id": 87067857, "body": "That declaration shown on cppreference actually is <code>noexcept</code>. Destructors are <code>noexcept</code> unless declared <code>noexcept(false)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1524670773, "post_id": 50025962, "comment_id": 87068789, "body": "A diabolic implementation would still be allowed to make this implicitly <code>noexcept(false)</code> by having an attribute that would not be <code>noexcept(true)</code>, no?"}, {"owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1524671215, "post_id": 50025962, "comment_id": 87069075, "body": "@Holt It should match the one for the implicitly-declared destructor; for <code>std::exception</code> it should be <code>noexcept(true)</code> unless <code>std::exception</code> is implemented with a base or member whose destructor is <code>noexcept(false)</code>..."}], "tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": false, "score": 6, "last_activity_date": 1524669722, "creation_date": 1524669722, "answer_id": 50025962, "question_id": 50025862, "link": "https://stackoverflow.com/questions/50025862/why-is-the-stdexception-destructor-not-noexcept/50025962#50025962", "title": "Why is the std::exception destructor not noexcept", "body": "<p>It is <code>noexcept(true)</code> indeed. Since C++11, for <a href=\"http://en.cppreference.com/w/cpp/language/destructor\" rel=\"noreferrer\">destructors</a> with no exception specification explicitly provided the exception specification is considered to be <code>noexcept(true)</code>.</p>\n\n<blockquote>\n  <p>Except that if no exception specification is explicitly provided, the exception specification is considered to be one that would be used by the implicitly-declared destructor (see below). In most cases, this is <code>noexcept(true)</code>. Thus a throwing destructor must be explicitly declared <code>noexcept(false)</code>. (since C++11)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "is_accepted": false, "score": 1, "last_activity_date": 1524672455, "creation_date": 1524672455, "answer_id": 50026790, "question_id": 50025862, "link": "https://stackoverflow.com/questions/50025862/why-is-the-stdexception-destructor-not-noexcept/50026790#50026790", "title": "Why is the std::exception destructor not noexcept", "body": "<p><a href=\"http://eel.is/c++draft/res.on.exception.handling#3\" rel=\"nofollow noreferrer\">[res.on.exception.handling]/3</a>:</p>\n\n<blockquote>\n  <p>Destructor operations defined in the C++ standard library shall not throw exceptions. Every destructor in the C++ standard library shall behave as if it had a non-throwing exception specification.</p>\n</blockquote>\n"}], "owner": {"reputation": 40055, "user_id": 545127, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/RJgJM.png?s=128&g=1", "display_name": "Raedwald", "link": "https://stackoverflow.com/users/545127/raedwald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "closed_date": 1524910672, "answer_count": 2, "score": 1, "last_activity_date": 1524672455, "creation_date": 1524669410, "question_id": 50025862, "link": "https://stackoverflow.com/questions/50025862/why-is-the-stdexception-destructor-not-noexcept", "closed_reason": "Duplicate", "title": "Why is the std::exception destructor not noexcept", "body": "<p>The <a href=\"http://en.cppreference.com/w/cpp/error/exception/%7Eexception\" rel=\"nofollow noreferrer\">destructor</a> of the the C++11 <a href=\"http://en.cppreference.com/w/cpp/error/exception\" rel=\"nofollow noreferrer\"><code>std::exception</code></a> base class is not <code>noexcept</code>, and thus may (in theory) throw an exception, which consequent relaxed permission for all its derived classes (including <code>std::bad_alloc</code> and <code>std::runtime_error</code>). The destructor of the C++98 <code>std::exception</code> however had a <code>throw()</code> exception specification, indicating it was not permitted to throw exceptions. Why the difference? Why is it now permitted to throw exceptions? The permission is particularly odd given that the <code>std::exception</code> <a href=\"http://en.cppreference.com/w/cpp/error/exception/exception\" rel=\"nofollow noreferrer\">constructors</a> are now <code>noexcept</code>: you can safely construct such an object, but you can not safely destroy it: the opposite of the normal behaviour.</p>\n\n<p>Having the destructor of an exception class throw an exception is usually disastrous. What can cause <code>std::exception::~exception</code> to throw an exception?</p>\n"}, {"tags": ["c++", "constructor", "containers"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 2, "creation_date": 1524669546, "post_id": 50025687, "comment_id": 87067909, "body": "Next time, please include the full error message. All you posted were the supplementary notes, not the actual error, which would&#39;ve been along the lines of <code>error: no matching constructor for initialization of &#39;node&#39;</code> and a bunch of <code>std::vector</code>-internal template instantiation hints. Yes, these errors with more code look scary, but they are there for a reason."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1524669691, "post_id": 50025687, "comment_id": 87068026, "body": "Aside: your <code>operator&lt;</code> can be simplified to <code>return element &lt; n.element;</code>"}, {"owner": {"reputation": 714, "user_id": 8563383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8NAmw.jpg?s=128&g=1", "display_name": "Gaurav Pant", "link": "https://stackoverflow.com/users/8563383/gaurav-pant"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1524669817, "post_id": 50025687, "comment_id": 87068117, "body": "@MaxLanghof, there were a couple scary lines relating to vectors (none pointed to specific line of code), so I thought it was irrelevant"}, {"owner": {"reputation": 714, "user_id": 8563383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8NAmw.jpg?s=128&g=1", "display_name": "Gaurav Pant", "link": "https://stackoverflow.com/users/8563383/gaurav-pant"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1524669837, "post_id": 50025687, "comment_id": 87068129, "body": "@Caleth, thanks for pointing out"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 2, "creation_date": 1524669840, "post_id": 50025687, "comment_id": 87068132, "body": "If you wish to have <code>leader</code> added to whenever you create a node, you can&#39;t have it be a <code>vector&lt;node&gt;</code>, as you will be adding copies, and each copy will add to <code>leader</code>, and your program continue on until it overflows the stack or fails to reallocate <code>leader</code>&#39;s elements"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1524669925, "post_id": 50025687, "comment_id": 87068197, "body": "You <i>might</i> be able to have it be a <code>std::vector&lt;std::reference_wrapper&lt;node&gt;&gt;</code>, and <code>leader.push_back(*this)</code> in the constructor. But be careful to not have references outlive the <code>node</code>s"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1524670150, "post_id": 50025687, "comment_id": 87068361, "body": "@GauravPant But they were relevant, see here: <a href=\"https://godbolt.org/g/rSgo7G\" rel=\"nofollow noreferrer\">godbolt.org/g/rSgo7G</a> - the first one is the problem (cannot construct a <code>node</code>), the last three tell you what constructors were available and why they were unusable. The long ones in the middle are indeed a bit noisy, but the next one is the most important one: <code>in instantiation of member function &#39;std::vector&lt;node, std::allocator&lt;node&gt; &gt;::resize&#39; requested here:  leader.resize(n+1);</code>. This directly tells you that the <code>resize</code> function is the problem."}], "answers": [{"comments": [{"owner": {"reputation": 714, "user_id": 8563383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8NAmw.jpg?s=128&g=1", "display_name": "Gaurav Pant", "link": "https://stackoverflow.com/users/8563383/gaurav-pant"}, "edited": false, "score": 0, "creation_date": 1524670065, "post_id": 50025868, "comment_id": 87068292, "body": "So is declaring any container of same type as that of that class allowed ?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1524670456, "post_id": 50025868, "comment_id": 87068571, "body": "I don&#39;t think a defaulted constructor is a good idea here, what would be the correct value for the element member? Perhaps the two-argument resize() is more appropriate"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 714, "user_id": 8563383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8NAmw.jpg?s=128&g=1", "display_name": "Gaurav Pant", "link": "https://stackoverflow.com/users/8563383/gaurav-pant"}, "edited": false, "score": 0, "creation_date": 1524670760, "post_id": 50025868, "comment_id": 87068775, "body": "@gaurav: obviously a node class cannot contain a std::array of 2 nodes, because that would include 4 nodes within those 2 nodes etcetera."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 714, "user_id": 8563383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8NAmw.jpg?s=128&g=1", "display_name": "Gaurav Pant", "link": "https://stackoverflow.com/users/8563383/gaurav-pant"}, "edited": false, "score": 1, "creation_date": 1524671041, "post_id": 50025868, "comment_id": 87068971, "body": "@GauravPant You can declare a container of instances of the class, but you can&#39;t add an instrance to that container each time one is constructed. Because that insertion will then cause another call to the constructor (since it creates a new instance in the container), which will add an element, which will cause another call to the constructor, etc."}, {"owner": {"reputation": 714, "user_id": 8563383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8NAmw.jpg?s=128&g=1", "display_name": "Gaurav Pant", "link": "https://stackoverflow.com/users/8563383/gaurav-pant"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1524671124, "post_id": 50025868, "comment_id": 87069025, "body": "@MSalters, the two argument resize() works (much better solution)"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 714, "user_id": 8563383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8NAmw.jpg?s=128&g=1", "display_name": "Gaurav Pant", "link": "https://stackoverflow.com/users/8563383/gaurav-pant"}, "edited": false, "score": 0, "creation_date": 1524671188, "post_id": 50025868, "comment_id": 87069054, "body": "@GauravPant It&#39;s important that you understand that your container will only contain <i>copies</i> of the <code>node</code>s you create. Changing elements in the container will not have any affect on the <code>node</code> you are creating with that constructor and vice-versa."}], "tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": true, "score": 4, "last_activity_date": 1524669416, "creation_date": 1524669416, "answer_id": 50025868, "question_id": 50025687, "link": "https://stackoverflow.com/questions/50025687/declaration-of-container-with-same-type-as-the-class-in-that-class-only/50025868#50025868", "title": "Declaration of container with same type as the class in that class only", "body": "<p><code>leader.resize(n+1);</code> will resize the vector to have n+1 default constructed <code>node</code>s. And so you need a default constructor if you want to have this line.</p>\n\n<p>However without more information with what you expect this vector to be or what to do with it its hard to know how you should fix it.</p>\n\n<p>Note: You can add a default constructor by adding <code>node() = default;</code> to your node class.</p>\n"}], "owner": {"reputation": 714, "user_id": 8563383, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8NAmw.jpg?s=128&g=1", "display_name": "Gaurav Pant", "link": "https://stackoverflow.com/users/8563383/gaurav-pant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 50025868, "answer_count": 1, "score": -2, "last_activity_date": 1524670297, "creation_date": 1524668888, "last_edit_date": 1524670297, "question_id": 50025687, "link": "https://stackoverflow.com/questions/50025687/declaration-of-container-with-same-type-as-the-class-in-that-class-only", "title": "Declaration of container with same type as the class in that class only", "body": "<p>The following line of code which is a part of file is producing error</p>\n\n<pre><code>.\\Graph.h:16:3: note: candidate: node::node(int)\n   node(int n) : element(n){\n   ^~~~\n.\\Graph.h:16:3: note:   candidate expects 1 argument, 0 provided\n.\\Graph.h:10:8: note: candidate: constexpr node::node(const node&amp;)\n struct node{\n        ^~~~\n.\\Graph.h:10:8: note:   candidate expects 1 argument, 0 provided\n.\\Graph.h:10:8: note: candidate: constexpr node::node(node&amp;&amp;)\n.\\Graph.h:10:8: note:   candidate expects 1 argument, 0 provided\n</code></pre>\n\n<p>The above error typically occurs due to the absence of default constructor as I have researched.</p>\n\n<pre><code>struct node{\n  int element;\n  static vector&lt;bool&gt; check;\n  static vector&lt;int&gt; dist;\n  static vector&lt;int&gt; f;\n  static vector&lt;node&gt; leader;\n  node(int n) : element(n){\n    if(check.size()&lt;n+1){\n      check.resize(n+1);\n      leader.resize(n+1);\n    }\n  }\n  bool operator &lt; (node&amp; n){\n    if(this-&gt;element&lt;n.element)\n      return 1;\n    else\n      return 0;\n  }\n};\n</code></pre>\n\n<p>However, default constructor is not used anywhere else. Also, when I comment out <code>static vector&lt;node&gt; leader</code> and other operations related to it, the program doesnt give any error.</p>\n\n<p>So, is the problem because I have declared a container of same type in the same class ?</p>\n\n<p>EDIT - included full error message</p>\n\n<pre><code>In file included from c:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\vector:62:0,\n                 from .\\Graph.h:5:\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_construct.h: In instantiation of 'void std::_Construct(_T1*, _Args&amp;&amp; ...) [with _T1 = node; _Args = {}]':\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_uninitialized.h:519:18:   required from 'static _ForwardIterator std::__uninitialized_default_n_1&lt;_TrivialValueType&gt;::__uninit_default_n(_ForwardIterator, _Size) [with _ForwardIterator = node*; _Size = unsigned int; bool _TrivialValueType = false]'\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_uninitialized.h:575:20:   required from '_ForwardIterator std::__uninitialized_default_n(_ForwardIterator, _Size) [with _ForwardIterator = node*; _Size = unsigned int]'\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_uninitialized.h:637:44:   required from '_ForwardIterator std::__uninitialized_default_n_a(_ForwardIterator, _Size, std::allocator&lt;_Tp&gt;&amp;) [with _ForwardIterator = node*; _Size = unsigned int; _Tp = node]'\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\vector.tcc:549:35:   required from 'void std::vector&lt;_Tp, _Alloc&gt;::_M_default_append(std::vector&lt;_Tp, _Alloc&gt;::size_type) [with _Tp = node; _Alloc = std::allocator&lt;node&gt;; std::vector&lt;_Tp, _Alloc&gt;::size_type = unsigned int]'\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_vector.h:677:21:   required from 'void std::vector&lt;_Tp, _Alloc&gt;::resize(std::vector&lt;_Tp, _Alloc&gt;::size_type) [with _Tp = node; _Alloc = std::allocator&lt;node&gt;; std::vector&lt;_Tp, _Alloc&gt;::size_type = unsigned int]'\n.\\Graph.h:19:24:   required from here\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_construct.h:75:7: error: no matching function for call to 'node::node()'\n     { ::new(static_cast&lt;void*&gt;(__p)) _T1(std::forward&lt;_Args&gt;(__args)...); }\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n.\\Graph.h:16:3: note: candidate: node::node(int)\n   node(int n) : element(n){\n   ^~~~\n.\\Graph.h:16:3: note:   candidate expects 1 argument, 0 provided\n.\\Graph.h:10:8: note: candidate: constexpr node::node(const node&amp;)\n struct node{\n        ^~~~\n.\\Graph.h:10:8: note:   candidate expects 1 argument, 0 provided\n.\\Graph.h:10:8: note: candidate: constexpr node::node(node&amp;&amp;)\n.\\Graph.h:10:8: note:   candidate expects 1 argument, 0 provided\nIn file included from c:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\vector:62:0,\n                 from .\\Graph.h:5:\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_construct.h: In instantiation of 'void std::_Construct(_T1*, _Args&amp;&amp; ...) [with _T1 = node; _Args = {}]':\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_uninitialized.h:519:18:   required from 'static _ForwardIterator std::__uninitialized_default_n_1&lt;_TrivialValueType&gt;::__uninit_default_n(_ForwardIterator, _Size) [with _ForwardIterator = node*; _Size = unsigned int; bool _TrivialValueType = false]'\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_uninitialized.h:575:20:   required from '_ForwardIterator std::__uninitialized_default_n(_ForwardIterator, _Size) [with _ForwardIterator = node*; _Size = unsigned int]'\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_uninitialized.h:637:44:   required from '_ForwardIterator std::__uninitialized_default_n_a(_ForwardIterator, _Size, std::allocator&lt;_Tp&gt;&amp;) [with _ForwardIterator = node*; _Size = unsigned int; _Tp = node]'\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\vector.tcc:549:35:   required from 'void std::vector&lt;_Tp, _Alloc&gt;::_M_default_append(std::vector&lt;_Tp, _Alloc&gt;::size_type) [with _Tp = node; _Alloc = std::allocator&lt;node&gt;; std::vector&lt;_Tp, _Alloc&gt;::size_type = unsigned int]'\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_vector.h:677:21:   required from 'void std::vector&lt;_Tp, _Alloc&gt;::resize(std::vector&lt;_Tp, _Alloc&gt;::size_type) [with _Tp = node; _Alloc = std::allocator&lt;node&gt;; std::vector&lt;_Tp, _Alloc&gt;::size_type = unsigned int]'\n.\\Graph.h:19:24:   required from here\nc:\\mingw\\lib\\gcc\\mingw32\\6.3.0\\include\\c++\\bits\\stl_construct.h:75:7: error: no matching function for call to 'node::node()'\n     { ::new(static_cast&lt;void*&gt;(__p)) _T1(std::forward&lt;_Args&gt;(__args)...); }\n       ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n.\\Graph.h:16:3: note: candidate: node::node(int)\n   node(int n) : element(n){\n   ^~~~\n.\\Graph.h:16:3: note:   candidate expects 1 argument, 0 provided\n.\\Graph.h:10:8: note: candidate: constexpr node::node(const node&amp;)\n struct node{\n        ^~~~\n.\\Graph.h:10:8: note:   candidate expects 1 argument, 0 provided\n.\\Graph.h:10:8: note: candidate: constexpr node::node(node&amp;&amp;)\n.\\Graph.h:10:8: note:   candidate expects 1 argument, 0 provided\n</code></pre>\n"}, {"tags": ["c++", "constructor", "multiple-inheritance"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1524669024, "post_id": 50025677, "comment_id": 87067536, "body": "You can implement implicit <a href=\"http://en.cppreference.com/w/cpp/language/cast_operator\" rel=\"nofollow noreferrer\">user defined conversions</a> if you want to keep using composition and still want your type to be implicitly castable to it&#39;s component types."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524669357, "post_id": 50025677, "comment_id": 87067769, "body": "Indeed, but that&#39;s not the reason I decided to ditch composition. It was the syntactic overhead of having instances of S1 and S2 in my classes. S1 and S2 being very primitive building blocks in the design (and being needed in multiple places), I grew very annoyed very quickly with constantly having to write something.x just to get to the x I use in basically 80% of the member functions.  Additionally, the &quot;x&quot;s are also used in many loop conditions and I dislike having such a (relatively) complex and long expression in them.  I&#39;d prefer my loops just &lt; x instead of &lt; something.x etc."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1524669493, "post_id": 50025677, "comment_id": 87067865, "body": "Can you describe how you imagine creating a <code>C</code> would look like in an ideal world? It&#39;s not clear to me what you are looking for."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524669504, "post_id": 50025677, "comment_id": 87067877, "body": "That&#39;s actually exactly what I did before (and basically am still doing). But for the reasons I stated in the previous comment, I decided to experiment with multiple inheritance today and just ran into this hurdle."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1524669790, "post_id": 50025677, "comment_id": 87068098, "body": "Hm, that&#39;s a good question that I&#39;ve been to trying to figure out myself.   Ideally, it would be great if I could have some incompletely built C and then just do c = s1; c = s2; and only the s1 and s2 parts of c would change with each assignment.   The syntax is a bit illogical, but basically something like that, where I could only assign to a parent&#39;s part of the class. Virtually the opposite of what happens with casting a C to an S1 or S2.  Could I maybe even do something like static_cast&lt;S1&gt;(C) = someS1; with the expected result?"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1524669914, "post_id": 50025677, "comment_id": 87068185, "body": "Can <code>C</code> even be both <code>S1</code> and <code>S2</code> at once, and are they? Your proposal says &quot;yes&quot;, your comments say &quot;not really&quot;."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1524670125, "post_id": 50025677, "comment_id": 87068335, "body": "You can provide assignment operators to <code>C</code>, one that take an <code>S1</code> and one that takes an <code>S2</code> as arguments to support that."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 1, "creation_date": 1524670164, "post_id": 50025677, "comment_id": 87068367, "body": "@user8145466 <code>static_cast&lt;S1&amp;&gt;(C) = someS1;</code> would do that. Without the reference, you would be making a temporary <code>S1</code> from <code>C</code> and trying to assign to it."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524670290, "post_id": 50025677, "comment_id": 87068460, "body": "C is absolutely and necessarily S1 and S2 at once, I apologize if my comments made that unclear.  It&#39;s not an S1 od S2 in the logical sense, because I&#39;m using it as a substitute for composition, but it is in a class hierachy sense.  A stupid example would be if you had a Car with a Velocity and Weight (which are structs for some reason). Usually a Car object would simply have a Velocity and Weight objects, but in my case it would be simpler for me if class Car : public Velocity, public Weight.  Bear in mind that this is just an example and my use case is somewhat more complex."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524670417, "post_id": 50025677, "comment_id": 87068542, "body": "Perfect, Fran&#231;ois, that solves my conundrum exactly. I wasn&#39;t entirely sure if using a cast like that would have unintended consequences.  Actually both of your last comments are very helpful and I&#39;ll likely try out both. Feel free to create an answer if you like."}], "answers": [{"comments": [{"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1524673047, "post_id": 50026735, "comment_id": 87070137, "body": "&quot;<i>Truth is, every base class has an <code>operator =</code></i>&quot; not if it&#39;s implicitly deleted. If there is no copy constructor it might be the case. And if there is <code>operator=</code> it would be unreasonable not to have a copy c&#39;tor as per 0-rule. Importing those operators does help if one wants to make a way for phased-partial initialization, which seems to be the real point. But the object is not really incompletely built. The parts are default or otherwise initialized."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1524673242, "post_id": 50026735, "comment_id": 87070250, "body": "@luk32 a deleted function is still a function, which participates in overload resolution and all."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1524673495, "post_id": 50026735, "comment_id": 87070401, "body": "My point is that OP states they have a problem with providing copy c&#39;tor. This should translate to the <code>operator=</code>. They either do provide it, even if they don&#39;t know it, or they most probably need a custom explicit implementation of those operators for <code>C</code>. That&#39;s all. Taht said, I think your answer is still very useful as it seems that OP was not aware of the fact, that it&#39;s possible to have a separate overload for <code>operator=</code> for each of it compound types. So the desired syntax is very possible. The implementation would probably differ."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524673883, "post_id": 50026735, "comment_id": 87070621, "body": "I haven&#39;t said I have a problem providing the copy ctor. I just said the same thing you said, that while it would work for me in this case, it&#39;s not a general solution and I&#39;d like the general solution.  I also said that making a constructor is additionally complicated in my case because of the framework I&#39;m using. Basically, it forces a RA then init model by design, which means that for every constructor I also need to write an additional static create function.  It&#39;s not any major complication by any means, but that&#39;s already 2 additional functions just for this simple thing."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524674021, "post_id": 50026735, "comment_id": 87070695, "body": "But Quentin&#39;s solution (similar to Francois&#39; with manually creating operator=s) also works fine for my needs, I just wasn&#39;t sure if that would do what I expected. It seems intuitive to me, but it also felt kind of wrong for some reason and I expected people here would point out  all sorts of memory leaks and object slicing that would happen if I were to do it like that.  Pleasantly surprised it&#39;s well defined."}], "tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 0, "last_activity_date": 1524673577, "last_edit_date": 1524673577, "creation_date": 1524672269, "answer_id": 50026735, "question_id": 50025677, "link": "https://stackoverflow.com/questions/50025677/creating-an-object-from-instances-of-the-classes-it-multiply-inherits-from/50026735#50026735", "title": "Creating an object from instances of the classes it (multiply) inherits from", "body": "<blockquote>\n  <p>Ideally, it would be great if I could have some incompletely built <code>C</code> and then just do <code>c = s1; c = s2;</code> and only the <code>s1</code> and <code>s2</code> parts of <code>c</code> would change with each assignment.</p>\n</blockquote>\n\n<p>What do you know! You can very easily achieve this exact syntax. Truth is, every base class has an <code>operator =</code> that you inherit. It is simply hidden by the derived class's own <code>operator =</code> (be it implicitly-generated or not). Thus, you only have to bring all of them back into scope:</p>\n\n<pre><code>class C : public I, public S1, public S2\n{\npublic:\n    using I::operator=;\n    using S1::operator=;\n    using S2::operator=;\n};\n</code></pre>\n\n<p>... which then behaves exactly as you described. It is woth nothing, though, that the base classes are default-constructed, which might stretch what you mean by \"incompletely built\". It is unfortunately(?) impossible to have a valid derived object whose base classes have not been initialized at all.</p>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/87dc3c0ff1b8512e\" rel=\"nofollow noreferrer\">See it live on Coliru</a></p>\n"}, {"comments": [{"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524673640, "post_id": 50026892, "comment_id": 87070497, "body": "I&#39;m well aware of the issues and that&#39;s why I explicitly mentioned S1 and S2 were two completely unrelated POD structs. In fact their data was originally in C itself, but I decided to decouple it for various reasons.  As such, they are intrinsically tied to C. The only reason they&#39;re separate is to syntactically facilitate and simplify writing and reading Cs to and from the disk.  So the point is, there&#39;s basically no downside with inheritance in this particular case. The only thing pure composition buys me is having to access a proxy object every single time I need some data in C."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524674205, "post_id": 50026892, "comment_id": 87070790, "body": "I know you are aware, and have constraints strengthening the case for multiple inheritance. I&#39;ve tried to lay out some pros and cons in general case. I believe I&#39;ve debunked, one or two assumptions. The design decision is yours. If you have to copy paste whole APIs, and you are sure objects are closed you seem to be capable of making an informed decision. I&#39;d say copying the data whenever you need only a sub-component is a downside. Or you will have to extract an interface and use it anyways."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524674625, "post_id": 50026892, "comment_id": 87070993, "body": "Well the implementation with composition already exists and works fine. I just got annoyed with how it clutters my code and decided to expirement with a MI version and see how I like that. But I got stuck at this part. Anyway, it&amp;amp;#39;s a personal  program and I don&amp;amp;#39;t have any deadlines or anything , so while I do appreciate your theoretical insights, I&amp;amp;#39;d rather just do it and see for myself how I like it compared to what I had before. And if it explodes, it explodes."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524675309, "post_id": 50026892, "comment_id": 87071314, "body": "But yeah I definitely understand the value of a general pro/con answer. Especially since I couldn&amp;#39;t find a similar question anywhere (though it may exist). Perhaps adding some general code examples to your answer would assist in that goal."}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524675682, "post_id": 50026892, "comment_id": 87071493, "body": "How does it clutter your code? Except for having to explicitly write indirections it should be similar, with methods for getters and setter instead of members. Client-wise it should be similar. &quot;<i>S1 and S2 were two completely unrelated</i>&quot; and &quot;<i>The only reason they&#39;re separate is to syntactically facilitate and simplify writing and reading Cs</i>&quot; seem self-contradicting. If they are completely unrelated then that&#39;s the only reason needed to separate them. Btw have you considered reversing the approach and having <code>C</code> + two lightweight facade interfaces for whatever you need?"}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524675993, "post_id": 50026892, "comment_id": 87071665, "body": "That&#39;s actually the only way it clutters my code, but since I have to use the indirection a lot in loops it proved especially annoying. To make everything less mysterious, I have a PlayingField class which has a h, w and a vector of blocks. On top of that it has bools that can vary from game to game, but are constant in a single PlayingField.   So I took out h, w and the vector into one struct and the bools into another. Those are the only two things I require to load and save a PlayingField (which also has a whole bunch of other stuff) so I just dump them to the disk (being PODs and all)."}, {"owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "edited": false, "score": 0, "creation_date": 1524676250, "post_id": 50026892, "comment_id": 87071809, "body": "The bools don&#39;t have anything to do with the h/w, nor the block vector.  However they all are unique and quintessential to PlayingField. It used to be that PlayingField just had those variables naked, but then I had to manually cherry pick the ones that were needed for a save game.   So I made them into structs and used them as components. If I change them, I don&#39;t have to change the save/load code.  However, basically all the field functions use some variations on 2 loops that depend on h and w, so I&#39;d like accessing h and w to be as terse as possible from the PlayingField class itself."}], "tags": [], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "is_accepted": false, "score": 0, "last_activity_date": 1524674371, "last_edit_date": 1524674371, "creation_date": 1524672770, "answer_id": 50026892, "question_id": 50025677, "link": "https://stackoverflow.com/questions/50025677/creating-an-object-from-instances-of-the-classes-it-multiply-inherits-from/50026892#50026892", "title": "Creating an object from instances of the classes it (multiply) inherits from", "body": "<p>Composition via inheritance is a thing in languages that support it, but it is considered sub-par practice or even an anti-pattern vs composition in OOP.</p>\n\n<p>With inheritance you get automatic method implementation and conversions. But you give up control over API. And you introduce coupling between <code>S1</code> and <code>S2</code>, because their implementation restrict each other, they can't have their members named the same, without introducing disambiguation. IMHO, there are more pitfalls due to more implicitness going with this way.</p>\n\n<p>With composition you retain flexibility and fine grain control at the cost of explicit indirection... and the implementation effort which goes with it. Basically both API has to be copied if that the need, and it seems so in your case.</p>\n\n<p>In other aspects they are pretty much the same, you can write code which would have the same usability client-wise. E.g. conversions and assignments. </p>\n\n<p>You do or don't need copy c'tors in either way. For inheritance you can provide a <code>make_C</code> facility and forward c'tor arguments. <code>S1</code> and <code>S2</code> must provide any way of construction that you can reuse, that is true for both approach. You should be able to write appropriate c'tors for inheritance pattern. </p>\n\n<p>If you need to decouple <code>C</code> from it's constituents, you need to somehow make copies in composition via membership as well.</p>\n\n<p>You can't make <code>C</code> a facade around a reference using inheritance, as you could with membership composition by using a reference to the components. But if you need to share identity between an instance of <code>C</code> and it's respective parts, then it's not a real composition relation. </p>\n\n<p>To say in general which will be less headache is pretty impossible, it's a design decision. More general and flexible is membership-wise composition, simpler probably inheritance. But I am not sure if I would trade it off.</p>\n\n<p>I'd say that the more closed and ossified the design is, and you are sure no interference inheritance is safer to use for its pros. Otherwise, it might be a PIA and needing refactoring at some point of time. If you have huge classes repeating interfaces is going to be PIA.</p>\n"}], "owner": {"reputation": 78, "user_id": 8145466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0935742daf186116ce8fa88cb7eda0e2?s=128&d=identicon&r=PG&f=1", "display_name": "user8145466", "link": "https://stackoverflow.com/users/8145466/user8145466"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1524674371, "creation_date": 1524668866, "last_edit_date": 1524671304, "question_id": 50025677, "link": "https://stackoverflow.com/questions/50025677/creating-an-object-from-instances-of-the-classes-it-multiply-inherits-from", "title": "Creating an object from instances of the classes it (multiply) inherits from", "body": "<p>Say I have a class C that inherits from I, S1 and S2. Let's say that I is just an interface and S1 and S2 are simple structs with no functions. None of the classes/structs share any common members or methods and don't inherit anything else. </p>\n\n<p>It's guaranteed there will be no problems with diamond hierarchies and the like. The purpose of the structs is just to provide an alternative to composition. </p>\n\n<p>The code would look something like this:</p>\n\n<pre><code>class C : public I, public S1, public S2\n{\n  ...\n};\n</code></pre>\n\n<p>Now, the useful aspect of this is that I can simply cast an instance of C to an S1 or S2 whenever I need an object that is just that part of it. The point being that using an existing C as an S1 or S2 (or even an I) is straightforward (and useful).</p>\n\n<p>However, on top of that use case I would also like to be able to create a new instance of C when provided with an object of S1 and an object of S2. The first (and only) thing that came to mind was a constructor that would work something like this:</p>\n\n<pre><code>C::C(const S1&amp; s1, const S2&amp;s2) : I(), S1(s1), S2(s2)\n{\n  ...\n}\n</code></pre>\n\n<p>However, there are three issues I have with that solution:</p>\n\n<ul>\n<li>It requires additional code and additional constructors from my\nclass C which is pretty inelegant and I assume there's gotta be a\nbetter way. </li>\n<li>It requires that my structs S1 and S2 provide copy constructors (or move constructors if implemented differently). While that works fine for me, even with the default constructor, it's a clear indicator that this is not a general solution and is thus bad or at the very least incomplete.</li>\n<li>Due to the design of the framework and and the application I'm making in it, this solution would require even more functions and code than just in the barebones example. Once again, it's not much of an issue to write the code, but it's simply more code to maintain and think about. On top of that, using simple composition with instances of S1 and S2 inside of C would end up being comparably, if not even less verbose.</li>\n</ul>\n\n<p>So, to sum up:</p>\n\n<p>What are the possible ways to create an object that multiply inherits from some classes when we already have finished objects of those classes (or just the necessary stuff to make them, even)?</p>\n\n<p>Of those ways which is the most general, simplest and least likely to lead to headaches and complications, be they logical or syntactical?</p>\n"}, {"tags": ["c++", "c++11", "templates", "variadic-templates"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1524670202, "post_id": 50025638, "comment_id": 87068390, "body": "27 is wrong already... Why not 4+9+16?"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 7045, "user_id": 1000551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8cb0eaa4de7f781e42328ec7544ca3?s=128&d=identicon&r=PG", "display_name": "Vadim Kotov", "link": "https://stackoverflow.com/users/1000551/vadim-kotov"}, "edited": false, "score": 0, "creation_date": 1524673453, "post_id": 50025638, "comment_id": 87070375, "body": "@VadimKotov - the C++11 tag is correct because the question is about variadic-templates, introduced in C++ in the C++11 version; but (IMHO) also C++ is correct because it&#39;s the language where C++11 is the version; moreover: until 10 March 2018 in the C++11 tag description was written &quot;Please tag questions about C++11 with the <code>c++</code> tag, along with the <code>c++11</code> tag&quot;."}, {"owner": {"reputation": 7045, "user_id": 1000551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8cb0eaa4de7f781e42328ec7544ca3?s=128&d=identicon&r=PG", "display_name": "Vadim Kotov", "link": "https://stackoverflow.com/users/1000551/vadim-kotov"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1524732404, "post_id": 50025638, "comment_id": 87093349, "body": "@max66 That&#39;s right. But before that there were 2 version tags on this question: <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b11\">c++11</a> and <a href=\"https://stackoverflow.com/questions/tagged/c%2b%2b14\">c++14</a>"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 7045, "user_id": 1000551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d8cb0eaa4de7f781e42328ec7544ca3?s=128&d=identicon&r=PG", "display_name": "Vadim Kotov", "link": "https://stackoverflow.com/users/1000551/vadim-kotov"}, "edited": false, "score": 0, "creation_date": 1524744833, "post_id": 50025638, "comment_id": 87101310, "body": "@VadimKotov - Sorry; I didn&#39;t noticed it."}], "answers": [{"tags": [], "owner": {"reputation": 29848, "user_id": 5958455, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/lBWIE.png?s=128&g=1", "display_name": "iBug", "link": "https://stackoverflow.com/users/5958455/ibug"}, "is_accepted": true, "score": 2, "last_activity_date": 1524672264, "last_edit_date": 1524672264, "creation_date": 1524670327, "answer_id": 50026155, "question_id": 50025638, "link": "https://stackoverflow.com/questions/50025638/sum-of-squares-using-variadic-templates/50026155#50026155", "title": "Sum of squares using variadic templates", "body": "<p>Short answer: 2 + 9 + 256 = 267</p>\n\n<p>Let's expand this:</p>\n\n<pre><code>foo(2, 3, 4) =&gt; 2 + foo(pow(args, 2)...)\n             =&gt; 2 + foo(pow(3, 2), pow(4, 2))\n             =&gt; 2 + foo(9, 16)\n             =&gt; 2 + (9 + foo(16))\n             =&gt; 2 + (9 + 16 * 16)\n             =&gt; 267\nHello world!\n</code></pre>\n\n<p>If you want to do it right, don't <code>pow()</code> one value multiple times:</p>\n\n<pre><code>template &lt;typename T&gt;\nT foo(T arg)\n{\n    return arg * arg;\n}\n\ntemplate &lt;typename T, typename... A&gt;\nT foo(T first, A... args)\n{\n    return first * first + foo(args...);\n    //     ^^^^^^^^^^^^^ or pow(first, 2)\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 247, "user_id": 9209968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab1c6d5c5c167be9840299305eff0904?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Olson", "link": "https://stackoverflow.com/users/9209968/josh-olson"}, "is_accepted": false, "score": 0, "last_activity_date": 1526777500, "last_edit_date": 1526777500, "creation_date": 1524671514, "answer_id": 50026509, "question_id": 50025638, "link": "https://stackoverflow.com/questions/50025638/sum-of-squares-using-variadic-templates/50026509#50026509", "title": "Sum of squares using variadic templates", "body": "<p>To achieve the result you're expecting in your description, you would need to capture \"first\" in one function and recurse with a separate like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nT bar(T first) {\n    return first*first;\n}    \n\ntemplate&lt;typename T, typename... A&gt;\nT bar(T first, A... args) {\n    return bar(first) + bar(args...);\n}    \n\ntemplate&lt;typename T, typename... A&gt;\nT foo(T first, A... args) {\n    return first + bar(args...);\n}\n</code></pre>\n\n<p>If instead, you want to square each parameter in your function and sum them, the following should do:</p>\n\n<pre><code>template&lt;typename T&gt;\nT foo(T first) {\n    return first*first;\n}\n\ntemplate&lt;typename T, typename... A&gt;\nT foo(T first, A... args) {\n    return foo(first) + foo(args...);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1524674437, "last_edit_date": 1524674437, "creation_date": 1524672673, "answer_id": 50026849, "question_id": 50025638, "link": "https://stackoverflow.com/questions/50025638/sum-of-squares-using-variadic-templates/50026849#50026849", "title": "Sum of squares using variadic templates", "body": "<blockquote>\n  <p>I am trying to find the sum of squares using variadic templates. The input parameters are the numbers whose sum of squares need to be calculated. Ex: foo(2, 3, 4) should return a value of 27 (which is 2+(9+16))</p>\n</blockquote>\n\n<p>It's too late to play?</p>\n\n<p>Anyway, if you want to find the sum of squares, <code>foo(2, 3, 4)</code> should return <code>4+9+16 = 29</code>, not <code>27</code>.</p>\n\n<p>I propose a not-recursive function, using the power of the comma operator in initialization of a unused integer array</p>\n\n<pre><code>template &lt;typename T, typename ... Ts&gt;\nT foo (T const &amp; t, Ts const &amp; ... ts)\n {\n   using unused = int[];\n\n   T  ret { t*t };\n\n   (void)unused { 0, (ret += ts*ts, 0)... };\n\n   return ret;\n }\n</code></pre>\n\n<p>From </p>\n\n<pre><code>std::cout &lt;&lt; foo(2, 3, 4) &lt;&lt; std::endl;\n</code></pre>\n\n<p>you get <code>29</code></p>\n\n<p>If you can use C++17, you can use template folding and <code>foo()</code> simply become</p>\n\n<pre><code>template &lt;typename ... Ts&gt;\nauto foo (Ts const &amp; ... ts)\n { return ( (ts*ts) + ... ); }\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 1750327, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/05aee1510f17c4ac07cb60275318a159?s=128&d=identicon&r=PG", "display_name": "Aditya Bhat", "link": "https://stackoverflow.com/users/1750327/aditya-bhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 50026155, "answer_count": 3, "score": 1, "last_activity_date": 1526777500, "creation_date": 1524668780, "last_edit_date": 1524674358, "question_id": 50025638, "link": "https://stackoverflow.com/questions/50025638/sum-of-squares-using-variadic-templates", "title": "Sum of squares using variadic templates", "body": "<p>I am trying to find the sum of squares using variadic templates. The input parameters are the numbers whose sum of squares need to be calculated. Ex: <code>foo(2, 3, 4)</code> should return a value of <code>27</code> (which is <code>2+(9+16)</code>). My template function looks as follows:</p>\n\n<pre><code>template&lt;typename T&gt;\nT foo(T args)\n{\n    return args*args;\n}\n\ntemplate &lt;typename T, typename... A&gt;\nT foo(T first, A... args)\n{\n    return first+foo(pow(args,2)...);\n}\n</code></pre>\n\n<p>However the result of this function seems to be 261 which was not what I expected. </p>\n"}, {"tags": ["c++", "macos", "usb", "iokit"], "answers": [{"comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1524740702, "post_id": 50040364, "comment_id": 87098563, "body": "Thanks @pmdj! That&#39;s exactly what I need."}], "tags": [], "owner": {"reputation": 18176, "user_id": 48660, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/NJ1Lx.jpg?s=128&g=1", "display_name": "pmdj", "link": "https://stackoverflow.com/users/48660/pmdj"}, "is_accepted": true, "score": 1, "last_activity_date": 1524737571, "creation_date": 1524737571, "answer_id": 50040364, "question_id": 50025492, "link": "https://stackoverflow.com/questions/50025492/implementing-usb-read-timeout-on-macos-and-iokit/50040364#50040364", "title": "Implementing USB read timeout on MacOS and IOKit", "body": "<p>Use the <code>ReadPipeTO</code> function instead of <code>ReadPipe</code>. There's also an async version, <code>ReadPipeAsyncTO</code> which may be of interest.</p>\n\n<p>You may need to request a newer version of the <code>IOUSBInterfaceInterface</code> than what you're currently using, but that's not a problem as most of them go back to OS X versions from the PPC days.</p>\n"}], "owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 50040364, "answer_count": 1, "score": 1, "last_activity_date": 1524737571, "creation_date": 1524668333, "question_id": 50025492, "link": "https://stackoverflow.com/questions/50025492/implementing-usb-read-timeout-on-macos-and-iokit", "title": "Implementing USB read timeout on MacOS and IOKit", "body": "<p>I'm trying to implement USB driver for my application. It looks that all major function like initialization, reading and writing cold be easily realized using IOKit. But the problem I've faced is reading timeout, more truly missing of that functionality.</p>\n\n<p>Actually, I use <a href=\"https://developer.apple.com/library/content/documentation/DeviceDrivers/Conceptual/USBBook/USBDeviceInterfaces/USBDevInterfaces.html#//apple_ref/doc/uid/TP40002645-BBIDDHCI\" rel=\"nofollow noreferrer\">this</a> tutorial to create my USB driver.</p>\n\n<p>For example my code for reading looks like following:</p>\n\n<pre><code>QByteArray Read(UInt32 size)\n{\n    IOReturn result;\n    char buffer[size];\n\n    result = (*m_interface)-&gt;ReadPipe(m_interface, m_pipeIn, buffer, &amp;size);\n    if(result != kIOReturnSuccess)\n    {\n        SetError(\"Error reading from pipe\", IErrorrable::ErrorTypes::Error, result);\n        return QByteArray();\n    }\n    return QByteArray(buffer, size);\n}\n</code></pre>\n\n<p>I have no clue how to implement reading timeout for this function. I would be very grateful if someone could help.</p>\n"}, {"tags": ["c++", "gcc", "compiler-errors"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1524668294, "post_id": 50025430, "comment_id": 87066996, "body": "What is <code>TRACE</code>? Please provide a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1524668511, "post_id": 50025430, "comment_id": 87067148, "body": "And what is <code>TR_SQLAPI</code>?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1524668673, "post_id": 50025430, "comment_id": 87067265, "body": "Which line is line 132? (Your error message looks strange. Is there a copy and paste error there?)"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1524668824, "post_id": 50025430, "comment_id": 87067387, "body": "The error message sounds like the problem is where the constructor is used, not in the declaration. Could you update the question with how you are trying to construct the <code>Query</code>?"}, {"owner": {"reputation": 133, "user_id": 3690314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3a5af1800b1c718df7f402ccd6cc8?s=128&d=identicon&r=PG&f=1", "display_name": "TonyI", "link": "https://stackoverflow.com/users/3690314/tonyi"}, "edited": false, "score": 0, "creation_date": 1524728638, "post_id": 50025430, "comment_id": 87091017, "body": "I have just edit the post to enter more details. Thanks for any help."}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 3690314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3a5af1800b1c718df7f402ccd6cc8?s=128&d=identicon&r=PG&f=1", "display_name": "TonyI", "link": "https://stackoverflow.com/users/3690314/tonyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1524729764, "creation_date": 1524729764, "answer_id": 50037824, "question_id": 50025430, "link": "https://stackoverflow.com/questions/50025430/build-error-with-gcc-4-8-array-used-as-initializer/50037824#50037824", "title": "Build error with GCC 4.8: array used as initializer", "body": "<p>The trouble is the initialization of this member</p>\n\n<p>char optionsFilePath[PATH_MAX+1] = \"\";</p>\n\n<p>gcc 4.8 (that i use) is misleading with the line of trouble (that caret ^ sign).</p>\n\n<p>Can anyone file a bug?</p>\n"}], "owner": {"reputation": 133, "user_id": 3690314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55c3a5af1800b1c718df7f402ccd6cc8?s=128&d=identicon&r=PG&f=1", "display_name": "TonyI", "link": "https://stackoverflow.com/users/3690314/tonyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 597, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1524729764, "creation_date": 1524668215, "last_edit_date": 1524729639, "question_id": 50025430, "link": "https://stackoverflow.com/questions/50025430/build-error-with-gcc-4-8-array-used-as-initializer", "title": "Build error with GCC 4.8: array used as initializer", "body": "<p>Using gcc 4.8 on SUSE I got the following error:</p>\n\n<p>Does anyone know what the source of this error is, and how to resolve it?</p>\n\n<p>I come back with more details:</p>\n\n<p>Having the following class</p>\n\n<pre><code>smoquery.h \n\n    class SmoQuery\n    {\n        public:\n            SmoQuery(SqlLogonElem *        const   &amp; eLogon,\n                     optionsInfo_t *       const   &amp; optionsInfoP,\n                     logicalNameList_t *   const   &amp; pRequestedDbList,\n                     logicalNameList_t *   const   &amp; pExcludeDbList,\n                     SqlDatabaseElem *     const   &amp; peDatabase,\n                     dsBool_t              const     bIncludeFrontEndCapacity, \n                     dsBool_t              const     bReplacementChars);\n\n            ~SmoQuery();\n\n        private:\n            Options mOptions;\n\n            char optionsFilePath[PATH_MAX+1] = \"\";\n    };\n\n\nsmoquery.cpp\n\nSmoQuery::SmoQuery(SqlLogonElem *         const   &amp; eLogon,\n                   optionsInfo_t *       const   &amp; optionsInfoP,\n                   logicalNameList_t *   const   &amp; pRequestedDbList,\n                   logicalNameList_t *   const   &amp; pExcludeDbList,\n                   SqlDatabaseElem *     const   &amp; peDatabase,\n                   dsBool_t               const       bIncludeFrontEndCapacity, \n/*line 80 ---&gt;*/                   dsBool_t              const        bReplacementChars)\n{\n/* all code was commented */\n}\n</code></pre>\n\n<p>Build log says:</p>\n\n<p>Gmake build ... (includes were removed in this comment)</p>\n\n<pre><code>g++ -D_LINUX -D_LINUX64 -DLINUX64 -D_LINUXAMD64 -DMBCS_AIX -D_THREADS -D_CPP_ALL -DNO_CDE -D_LONG_LONG -D_LARGEFILE64_SOURCE -DWIDE_CHAR_FIX -DDSMAPILIB -DDSM_STANDALONE_PROGRAM -DUNIX -D_FILE_OFFSET_BITS=64 -D_NEED_USING_NAMESPACE -D_GNU_SOURCE -DSQL -O -I. -I.. .... -fpermissive -fpic -fstack-protector -Wall -Wno-write-strings -Wno-missing-braces -DBUILD_TSM_V816 -std=c++11 -c smoquery.cpp -o ../../sqlonlinux/optimized/obj816/linuxAMD64/smoquery.o\n\n...\n\nsmoquery.cpp: In constructor \u2018SmoQuery::SmoQuery(SqlLogonElem* const&amp;, optionsInfo_t* const&amp;, logicalNameList_t* const&amp;, logicalNameList_t* const&amp;, SqlDatabaseElem* const&amp;, dsBool_t, dsBool_t)\u2019:\nsmoquery.cpp:132:72: error: array used as initializer\n                    dsBool_t              const        bReplacementChars)\n                                                                        ^\nIn file included from smoquery.cpp:80:0:\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 791, "user_id": 2422527, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5e3bbce8f736739dd113201ab2bade2c?s=128&d=identicon&r=PG&f=1", "display_name": "songziming", "link": "https://stackoverflow.com/users/2422527/songziming"}, "edited": false, "score": 0, "creation_date": 1524667658, "post_id": 50025106, "comment_id": 87066530, "body": "you have to first decide what signal and what slot need to be connected."}, {"owner": {"reputation": 333, "user_id": 5310544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Gv9DnOaW1s/AAAAAAAAAAI/AAAAAAAAEgA/E67WwOkt5QQ/photo.jpg?sz=128", "display_name": "\u013dubom&#237;r Carik", "link": "https://stackoverflow.com/users/5310544/%c4%bdubom%c3%adr-carik"}, "edited": false, "score": 0, "creation_date": 1524667749, "post_id": 50025106, "comment_id": 87066596, "body": "Could you please update your post - what are the lists of? Can you use more illustrative example i.e. real signal/slot you wish to connect? What was the warning in console about connecting?"}, {"owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524668332, "post_id": 50025106, "comment_id": 87067016, "body": "Might the problem be the fact that these buttons and checkboxes are not present at the begging but they are being added on Add button?"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1524668595, "post_id": 50025106, "comment_id": 87067202, "body": "@JamesSmith If you are adding buttons and checkbox afterwards, what is the content of <code>button</code> and <code>checks</code> at the beginning? Maybe you are just doing an empty loop... You can&#39;t add connection to non-existing widget."}, {"owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1524668745, "post_id": 50025106, "comment_id": 87067317, "body": "@Holt Yeah I have already realized as I wrote under mehmetfa&#39;s proposed way of solution. That was a bit stupid of me"}, {"owner": {"reputation": 333, "user_id": 5310544, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Gv9DnOaW1s/AAAAAAAAAAI/AAAAAAAAEgA/E67WwOkt5QQ/photo.jpg?sz=128", "display_name": "\u013dubom&#237;r Carik", "link": "https://stackoverflow.com/users/5310544/%c4%bdubom%c3%adr-carik"}, "edited": false, "score": 0, "creation_date": 1524669554, "post_id": 50025106, "comment_id": 87067913, "body": "I get feeling your lists are empty when you try connect button/checkbox and later you create/add items to list but you forgot to connect them (?)"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 2719322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5d26b02c29e29aa01f9fcb39001762fc?s=128&d=identicon&r=PG&f=1", "display_name": "mehmetfa", "link": "https://stackoverflow.com/users/2719322/mehmetfa"}, "reply_to_user": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524668090, "post_id": 50025294, "comment_id": 87066858, "body": "first, try with just one button and one checkbox. then you have to be sure that the vector contains correct pointers."}, {"owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "edited": false, "score": 0, "creation_date": 1524668504, "post_id": 50025294, "comment_id": 87067144, "body": "Like I wrote above I have realized that the problem might be the fact that these buttons and check are not present at the begging as they are being added when the &quot;Add&quot; button is pressed. Now it works correctly as I moved my &quot;connect&quot; things into different place. Thanks for helping"}], "tags": [], "owner": {"reputation": 129, "user_id": 2719322, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5d26b02c29e29aa01f9fcb39001762fc?s=128&d=identicon&r=PG&f=1", "display_name": "mehmetfa", "link": "https://stackoverflow.com/users/2719322/mehmetfa"}, "is_accepted": true, "score": 2, "last_activity_date": 1524668407, "last_edit_date": 1524668407, "creation_date": 1524667772, "answer_id": 50025294, "question_id": 50025106, "link": "https://stackoverflow.com/questions/50025106/qt-connecting-qpushbuttons-with-qcheckboxes/50025294#50025294", "title": "QT - connecting QPushButtons with QCheckBoxes", "body": "<p>What about just <code>clicked(bool)</code> for <code>SIGNAL</code> and <code>toggle()</code> for <code>SLOT</code>?</p>\n\n<p>Something like that:</p>\n\n<pre><code>connect(pushButton, SIGNAL(clicked(bool)), checkBox, SLOT(toggle()));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1524668522, "post_id": 50025457, "comment_id": 87067154, "body": "You can replace your lambda by <code>checks[i], &amp;QCheckBox::toggle</code>."}], "tags": [], "owner": {"reputation": 22670, "user_id": 955273, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/79903a88026b021e89735578bb71fd22?s=128&d=identicon&r=PG", "display_name": "Steve Lorimer", "link": "https://stackoverflow.com/users/955273/steve-lorimer"}, "is_accepted": false, "score": 0, "last_activity_date": 1524668252, "creation_date": 1524668252, "answer_id": 50025457, "question_id": 50025106, "link": "https://stackoverflow.com/questions/50025106/qt-connecting-qpushbuttons-with-qcheckboxes/50025457#50025457", "title": "QT - connecting QPushButtons with QCheckBoxes", "body": "<p>With Qt-5 you can now use lambda functions as slots (see <a href=\"http://doc.qt.io/qt-5/qobject.html#connect-5\" rel=\"nofollow noreferrer\">connect version 5</a>)</p>\n\n<p>You can also do away with the need for the <code>SIGNAL</code> macro, and instead use member function pointers.</p>\n\n<pre><code>QObject::connect(buttons[i], &amp;QPushButton::clicked, [=]\n    {\n        // toggle the check state\n        checks[i]-&gt;setChecked(!checks[i]-&gt;isChecked());\n    });\n</code></pre>\n\n<p>The first two parameters are a pointer to an object, and a member function pointer</p>\n\n<ul>\n<li><code>buttons[i]</code> is of type <code>QPushButton*</code></li>\n<li><code>&amp;QPushButton::clicked</code> is a member function pointer of the signal you want to connect to</li>\n</ul>\n\n<p>The second parameter is a C++11 lambda, which captures <code>checked</code> and <code>i</code> by value, and then sets the <code>QCheckBox</code> checked state to the inverse of its previous value</p>\n"}, {"comments": [{"owner": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "edited": false, "score": 0, "creation_date": 1524677250, "post_id": 50025881, "comment_id": 87072318, "body": "Remember that you should choose to use <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow noreferrer\">std::vector</a> over std::list by default unless you know you actually require a linked list."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "reply_to_user": {"reputation": 2174, "user_id": 3349368, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c9f50cb5783614c67eef86caf63139?s=128&d=identicon&r=PG", "display_name": "Paul Belanger", "link": "https://stackoverflow.com/users/3349368/paul-belanger"}, "edited": false, "score": 2, "creation_date": 1524758323, "post_id": 50025881, "comment_id": 87110947, "body": "@PaulB Widgets are non-copyable and non-moveable :) This wasn&#39;t an uninformed selection."}], "tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1524669439, "creation_date": 1524669439, "answer_id": 50025881, "question_id": 50025106, "link": "https://stackoverflow.com/questions/50025106/qt-connecting-qpushbuttons-with-qcheckboxes/50025881#50025881", "title": "QT - connecting QPushButtons with QCheckBoxes", "body": "<p>Works for me - and you can store the widgets directly in a <code>std::list</code>: that avoids the need to mess with manual memory management. Let the libraries do it for you.</p>\n\n<pre><code>#include &lt;QtWidgets&gt;\n#include &lt;list&gt;\nint main(int argc, char **argv) {\n   QApplication app{argc, argv};\n   QWidget win;\n   QGridLayout layout{&amp;win};\n   std::list&lt;QPushButton&gt; buttons;\n   std::list&lt;QCheckBox&gt; checkboxes;\n   QPushButton addButton{\"Add\"};\n   layout.addWidget(&amp;addButton, 0, 0, 2, 1);\n   auto const clicked = &amp;QAbstractButton::clicked;\n   auto const toggle = &amp;QAbstractButton::toggle;\n   auto const add = [&amp;,clicked,toggle]{\n      int const col = layout.columnCount();\n      auto const text = QString::number(col);\n      auto *button = &amp;(buttons.emplace_back(text), buttons.back()); //C++11, not 14\n      auto *checkbox = &amp;(checkboxes.emplace_back(text), checkboxes.back());\n      layout.addWidget(button, 0, col);\n      layout.addWidget(checkbox, 1, col);\n      QObject::connect(button, clicked, checkbox, toggle);\n   };\n   add();\n   QObject::connect(&amp;addButton, clicked, add);\n   win.show();\n   return app.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 8467047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da07ecb8a94ba8c1ea540464912d777c?s=128&d=identicon&r=PG&f=1", "display_name": "James Smith", "link": "https://stackoverflow.com/users/8467047/james-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 50025294, "answer_count": 3, "score": 0, "last_activity_date": 1524669439, "creation_date": 1524667217, "last_edit_date": 1524668199, "question_id": 50025106, "link": "https://stackoverflow.com/questions/50025106/qt-connecting-qpushbuttons-with-qcheckboxes", "title": "QT - connecting QPushButtons with QCheckBoxes", "body": "<p>I am new to QT. I started creating a TODO app and I want to somehow connect my PushButtons that are placed in vector with CheckBoxes that are also placed in a different vector.</p>\n\n<pre><code>std::vector &lt;QPushButton*&gt; buttons;\nstd::vector &lt;QCheckBox*&gt; checks;\n</code></pre>\n\n<p>I thought that the best way to do that will be to make a for loop connecting every element of mentioned vectors  </p>\n\n<p>Something like:</p>\n\n<pre><code>for(int i=0; i&lt;buttons.size(); ++i){\n    connect(buttons[i], SIGNAL(???), checks[i], SLOT(???));\n}\n</code></pre>\n\n<p>But idea is the only thing that I have. I tried putting different things into SIGNAL() and SLOT() but none of them worked. By \"none of them worked\" I mean the fact that when button is clicked nothing happens. Program is normally compiled without any error.</p>\n"}, {"tags": ["c++", "visual-studio", "exception-handling"], "answers": [{"tags": [], "owner": {"reputation": 6463, "user_id": 6387170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d425edf9cc20e61c8cc3be162915f06?s=128&d=identicon&r=PG&f=1", "display_name": "UKMonkey", "link": "https://stackoverflow.com/users/6387170/ukmonkey"}, "is_accepted": false, "score": 1, "last_activity_date": 1524669011, "creation_date": 1524669011, "answer_id": 50025726, "question_id": 50025013, "link": "https://stackoverflow.com/questions/50025013/enforce-visual-studio-exception-handling-mode/50025726#50025726", "title": "Enforce Visual Studio exception handling mode", "body": "<p>From <a href=\"https://msdn.microsoft.com/en-us/library/b0084kay.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/b0084kay.aspx</a></p>\n\n<blockquote>\n  <p>_CPPUNWIND Defined as 1 if one or more of the /GX (Enable Exception Handling), /clr (Common Language Runtime Compilation), or /EH\n  (Exception Handling Model) compiler options are set. Otherwise,\n  undefined.</p>\n</blockquote>\n\n<p>It's not perfect, but it gives you a fighting chance to get them the same</p>\n"}], "owner": {"reputation": 52926, "user_id": 11898, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5757e5b62594659eedfef289274502a3?s=128&d=identicon&r=PG", "display_name": "Scott Langham", "link": "https://stackoverflow.com/users/11898/scott-langham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1524669011, "creation_date": 1524666945, "question_id": 50025013, "link": "https://stackoverflow.com/questions/50025013/enforce-visual-studio-exception-handling-mode", "title": "Enforce Visual Studio exception handling mode", "body": "<p>I'm using the Visual Studio /EHsc exception handling mode in my project. This means catch(...) won't catch structured exceptions. I've got a public header that does a catch(...) that can be included by consumer projects.</p>\n\n<p>I'm concerned that a project consuming my header may have a different exception handling mode that will make my header misbehave.</p>\n\n<p>Is there a way of static_asserting or #pragma error'ing or otherwise failing the build if the exception handling mode isn't as needed?</p>\n\n<p>See: <a href=\"https://msdn.microsoft.com/en-us/library/1deeycx5.aspx\" rel=\"nofollow noreferrer\">https://msdn.microsoft.com/en-us/library/1deeycx5.aspx</a></p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 3, "creation_date": 1524666870, "post_id": 50024947, "comment_id": 87065982, "body": "What have you tried doing? Show your code attempt and explain the problem with it"}, {"owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "edited": false, "score": 0, "creation_date": 1524666890, "post_id": 50024947, "comment_id": 87065995, "body": "<a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1524668033, "post_id": 50024947, "comment_id": 87066816, "body": "Why did you decide to store this last item in the vector if you know its meaning will be different than the other items in the vector?  Maybe your design needs to be revisited instead of trying to get <code>set_difference</code> to do backflips."}, {"owner": {"reputation": 3, "user_id": 9698032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364806175701ca79204449820cb4ec2d?s=128&d=identicon&r=PG&f=1", "display_name": "Neuromorph", "link": "https://stackoverflow.com/users/9698032/neuromorph"}, "edited": false, "score": 0, "creation_date": 1524668838, "post_id": 50024947, "comment_id": 87067398, "body": "Mainly because I&#39;m trying to add some necessary functionality to a large amount of hardware-specific code that was written by someone else, and in a rather half-hazard way. I intend to rewrite all the files later, but at this point I&#39;m up against a deadline, and I&#39;m relatively new to C++. My background is in C/Python/Matlab."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9698032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364806175701ca79204449820cb4ec2d?s=128&d=identicon&r=PG&f=1", "display_name": "Neuromorph", "link": "https://stackoverflow.com/users/9698032/neuromorph"}, "edited": false, "score": 0, "creation_date": 1524671530, "post_id": 50025241, "comment_id": 87069268, "body": "Works well. Thanks Caleth!"}], "tags": [], "owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "is_accepted": true, "score": 0, "last_activity_date": 1524667630, "creation_date": 1524667630, "answer_id": 50025241, "question_id": 50024947, "link": "https://stackoverflow.com/questions/50024947/ignoring-the-last-string-in-vectors-of-vectors-for-set-difference/50025241#50025241", "title": "Ignoring the Last String in Vectors of Vectors for set_difference", "body": "<p>Assumptions:</p>\n\n<pre><code>using Lines = std::vector&lt;std::vector&lt;std::string&gt;&gt;;\n\nLines current = { ... }; // sorted on std::less&lt;std::vector&lt;std::string&gt;&gt;\nLines input = { ... }; // also sorted on std::less&lt;std::vector&lt;std::string&gt;&gt;\n\nLines difference;\n</code></pre>\n\n<p>Rather than doing </p>\n\n<pre><code>std::set_difference(current.begin(), current.end(), input.begin(), input.end(), std::back_inserter(difference));\n</code></pre>\n\n<p>You should do</p>\n\n<pre><code>auto compare = [](Lines::const_reference lhs, Lines::const_reference rhs)\n{\n    assert(lhs.size() &amp;&amp; rhs.size())\n    // same as default comparison, except skiping the last element\n    return std::lexicographical_compare(lhs.begin(), std::prev(lhs.end()), rhs.begin(), std::prev(rhs.end()));\n};\nstd::set_difference(current.begin(), current.end(), input.begin(), input.end(), std::back_inserter(difference), compare);\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9698032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/364806175701ca79204449820cb4ec2d?s=128&d=identicon&r=PG&f=1", "display_name": "Neuromorph", "link": "https://stackoverflow.com/users/9698032/neuromorph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 50025241, "answer_count": 1, "score": -4, "last_activity_date": 1524669718, "creation_date": 1524666775, "last_edit_date": 1524669718, "question_id": 50024947, "link": "https://stackoverflow.com/questions/50024947/ignoring-the-last-string-in-vectors-of-vectors-for-set-difference", "title": "Ignoring the Last String in Vectors of Vectors for set_difference", "body": "<p>I'm currently using vectors of vectors of strings in C++. I have a current group of vectors of vectors and a user input vectors of vectors. I would like to remove the current vectors of vectors that don't match user input vectors of vectors. As of now I am using the set_difference function template, though I would like the last string in the vectors of vectors to be ignored in the comparison (as they are neccesary identifiers, and will always be unique). Any advice or examples?</p>\n\n<p>Here's a bit of the code:</p>\n\n<pre><code>vector&lt;vector&lt;string&gt; &gt; curTable;\nvector&lt;vector&lt;string&gt; &gt; inTable;\nvector&lt;vector&lt;string&gt; &gt; difTable;\n</code></pre>\n\n<p>The identifier (fullEventString) is a binary string that is sent to the hardware, here is an example vector in the vector of vectors:</p>\n\n<pre><code>connection = {sramChipID, sramCoreID, sramNeuronID, sramID,\n              camChipID, camCoreID, camNeuronID, synType, camID,\n              fullEventString\n              };\n</code></pre>\n\n<p>...</p>\n\n<pre><code>set_difference(curTable.begin(), curTable.end(),\n               inTable.begin(), inTable.end(),\n               inserter(difTable, difTable.begin())\n              );\n</code></pre>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1524671612, "post_id": 50024913, "comment_id": 87069338, "body": "Link not with the IMPORTED library with given location, but with the library <b>target</b>, created in another project. You need to found this target in the other project&#39;s <code>CMakeLists.txt</code>. If you cannot, then using <code>add_subdirectory</code> approach has a little sence - build other project with <code>ExternalProject_Add</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "edited": false, "score": 0, "creation_date": 1524667812, "post_id": 50025036, "comment_id": 87066643, "body": "how am I supposed to specify the path of libjrtp?"}, {"owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "edited": false, "score": 0, "creation_date": 1524667901, "post_id": 50025036, "comment_id": 87066705, "body": "I tried to add below add_subdirectory but I got: add_dependencies called with incorrect number of arguments"}, {"owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "reply_to_user": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "edited": false, "score": 0, "creation_date": 1524667982, "post_id": 50025036, "comment_id": 87066778, "body": "This article has a very good explanation of the whole process. <a href=\"https://www.selectiveintellect.net/blog/2016/7/29/using-cmake-to-add-third-party-libraries-to-your-project-1\" rel=\"nofollow noreferrer\">selectiveintellect.net/blog/2016/7/29/&hellip;</a>. Keywords: <code>include(ExternalProject)</code>,"}], "tags": [], "owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "is_accepted": true, "score": 1, "last_activity_date": 1524667024, "creation_date": 1524667024, "answer_id": 50025036, "question_id": 50024913, "link": "https://stackoverflow.com/questions/50024913/how-to-link-a-library-generated-by-cmake-on-other-directory/50025036#50025036", "title": "How to link a library generated by cmake on other directory?", "body": "<p>You need to add the library as dependency.</p>\n\n<pre><code>add_dependencies(libjrtp)\n</code></pre>\n"}], "owner": {"reputation": 305, "user_id": 6655884, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JBKc9.jpg?s=128&g=1", "display_name": "Lucas Zanella", "link": "https://stackoverflow.com/users/6655884/lucas-zanella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 0, "accepted_answer_id": 50025036, "answer_count": 1, "score": 0, "last_activity_date": 1524667024, "creation_date": 1524666652, "question_id": 50024913, "link": "https://stackoverflow.com/questions/50024913/how-to-link-a-library-generated-by-cmake-on-other-directory", "title": "How to link a library generated by cmake on other directory?", "body": "<p>Supppose I have a project with its own <code>CMakeLists.txt</code>:</p>\n\n<pre><code>project/CMakeLists.txt\n</code></pre>\n\n<p>And I need to compile another Cmake project into a library to use in my project. This other project already has its own <code>CMakeLists.txt</code> which is very complex and I want to use it instead of specifying how to build this lib in my own <code>CMakeLists.txt</code>.</p>\n\n<p>This seems to be the only way:</p>\n\n<p><code>add_subdirectory(/path/to/my/other/project folder_in_my_project)</code></p>\n\n<p>but it won't build the outer project first so I can use its generated\n   libraries generated in <code>folder_in_my_project</code>.</p>\n\n<p>It has to be built first, but it won't be built because of the line </p>\n\n<pre><code>add_library(libjrtp STATIC IMPORTED)\nSET_PROPERTY(TARGET libjrtp PROPERTY IMPORTED_LOCATION jrtplib/src/libjrtp.a)\n</code></pre>\n\n<p>It requires <code>libjrtp.a</code>, but <code>libjrtp.a</code> will only be built after everything gets built.</p>\n\n<p>I know I'm asking too much here but there's no documentation about this  behavior on cmake docs</p>\n"}, {"tags": ["c++", "oracle", "connection", "occi"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9541708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJCfW.jpg?s=128&g=1", "display_name": "Evka&#39;S", "link": "https://stackoverflow.com/users/9541708/evkas"}, "is_accepted": false, "score": 0, "last_activity_date": 1524677734, "creation_date": 1524677734, "answer_id": 50028263, "question_id": 50024776, "link": "https://stackoverflow.com/questions/50024776/using-occi-create-connection/50028263#50028263", "title": "Using OCCI - create connection", "body": "<p>The problem was that I was using OCCI version 12 and trying to connect to the server of version 11.\nDownloading OCCI version 11 helped.</p>\n"}], "owner": {"reputation": 61, "user_id": 9541708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EJCfW.jpg?s=128&g=1", "display_name": "Evka&#39;S", "link": "https://stackoverflow.com/users/9541708/evkas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1534399246, "creation_date": 1524666304, "question_id": 50024776, "link": "https://stackoverflow.com/questions/50024776/using-occi-create-connection", "title": "Using OCCI - create connection", "body": "<p>Is there anyone using OCCI library for work with Oracle database?\nI'm trying to connect from Visual Studio 2017 project </p>\n\n<pre><code>Environment *env = Environment::createEnvironment(Environment::DEFAULT);\nConnection *con;\ncon = env-&gt;createConnection(Config::login, Config::password, \"(DESCRIPTION = (ADDRESS = (PROTOCOL = 'TCP')(HOST = my.host.cz')(PORT = '1510'))(CONNECT_DATA = (SID = 'mySid')))\");\n</code></pre>\n\n<p>but I get errors:</p>\n\n<blockquote>\n  <p>ORA-12163: TNS:connect descriptor is too long</p>\n</blockquote>\n\n<p>or      </p>\n\n<blockquote>\n  <p>ORA-12560: TNS:protocol adapter error</p>\n</blockquote>\n\n<p>I don't know how to execute tnsping from my computer, but somebody else tried it from his one using my connect descriptor, and it was OK.</p>\n\n<p>Maybe I'm not including correct libraries.</p>\n\n<p>I'm using <a href=\"http://www.oracle.com/technetwork/topics/winx64soft-089540.html\" rel=\"nofollow noreferrer\">OCCI version 12.2.0.1.0</a>, Basic Package and <em>SDK Package</em> downloaded from <a href=\"http://www.oracle.com/technetwork/topics/winx64soft-089540.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><strong>Can anyone tell me what am I missing and how can I create the connection?</strong></p>\n"}, {"tags": ["c++", "clang", "lvalue-to-rvalue"], "answers": [{"tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": false, "score": 1, "last_activity_date": 1524666549, "creation_date": 1524666549, "answer_id": 50024874, "question_id": 50024666, "link": "https://stackoverflow.com/questions/50024666/lvalue-to-rvalue-conversion-not-performed/50024874#50024874", "title": "Lvalue to rvalue conversion not performed", "body": "<p>The AST shows that a constructor for <code>A</code> is parsed, namely one that takes the lvalue <code>const A&amp;</code> (the <code>a</code> in <code>main</code>) and constructs the <code>a</code> in <code>f(A a)</code>. There is no rvalue here.</p>\n\n<pre><code>`-CallExpr &lt;line:6:5, col:8&gt; 'void'\n  |-ImplicitCastExpr &lt;col:5&gt; 'void (*)(A)' &lt;FunctionToPointerDecay&gt;\n  | `-DeclRefExpr &lt;col:5&gt; 'void (A)' lvalue Function 0x615e830 'f' 'void (A)'\n  `-CXXConstructExpr &lt;col:7&gt; 'A' 'void (const A &amp;) noexcept'\n    ^^^^^^^^^^^^^^^^                    ^^^^^^^^^\n    `-ImplicitCastExpr &lt;col:7&gt; 'const A' lvalue &lt;NoOp&gt;\n      `-DeclRefExpr &lt;col:7&gt; 'A' lvalue Var 0x615ea68 'a' 'A'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 144568, "user_id": 3309790, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7d1c7e499132b9945b412ac79d0e22f7?s=128&d=identicon&r=PG&f=1", "display_name": "songyuanyao", "link": "https://stackoverflow.com/users/3309790/songyuanyao"}, "is_accepted": true, "score": 3, "last_activity_date": 1524670808, "last_edit_date": 1592644375, "creation_date": 1524668205, "answer_id": 50025424, "question_id": 50024666, "link": "https://stackoverflow.com/questions/50024666/lvalue-to-rvalue-conversion-not-performed/50025424#50025424", "title": "Lvalue to rvalue conversion not performed", "body": "<blockquote>\n<p>Why? Is the conversion optional sometimes?</p>\n</blockquote>\n<p>It's not needed, and suppressed.</p>\n<p>For the class type <code>A</code>, <code>f(a);</code> causes the copy constructor of <code>A</code> to be invoked. The implicitly defined copy constructor takes an lvalue reference (i.e. <code>const A&amp;</code>), and lvalue-to-rvalue conversion is suppressed when binding lvalue-reference.</p>\n<p><a href=\"http://eel.is/c++draft/dcl.init.ref#5.1\" rel=\"nofollow noreferrer\">[dcl.init.ref]/5.1</a>:</p>\n<blockquote>\n<p>(5.1) If the reference is an lvalue reference ...</p>\n<p>...</p>\n<p>[\u2009Note: The usual lvalue-to-rvalue, array-to-pointer, and function-to-pointer standard conversions are not needed, and therefore are suppressed, when such direct bindings to lvalues are done. \u2014\u2009end note\u2009]</p>\n</blockquote>\n"}], "owner": {"reputation": 9737, "user_id": 1460794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/7lOXx.png?s=128&g=1", "display_name": "wally", "link": "https://stackoverflow.com/users/1460794/wally"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 50025424, "answer_count": 2, "score": 2, "last_activity_date": 1524671269, "creation_date": 1524665974, "last_edit_date": 1524671269, "question_id": 50024666, "link": "https://stackoverflow.com/questions/50024666/lvalue-to-rvalue-conversion-not-performed", "title": "Lvalue to rvalue conversion not performed", "body": "<p>The following function <a href=\"https://stackoverflow.com/a/17636488/1460794\">returns an rvalue</a>:</p>\n\n<pre><code>int foo()\n{\n    int x = 42;\n    return x;    // x is converted to prvalue\n}\n</code></pre>\n\n<p>Clang's <a href=\"https://godbolt.org/g/MYpQU6\" rel=\"nofollow noreferrer\">AST also shows the conversion</a>:</p>\n\n<pre><code>`-FunctionDecl &lt;line:1:1, line:5:1&gt; line:1:5 foo 'int ()'\n  `-CompoundStmt &lt;line:2:1, line:5:1&gt;\n    |-DeclStmt &lt;line:3:5, col:15&gt;\n    | `-VarDecl &lt;col:5, col:13&gt; col:9 used x 'int' cinit\n    |   `-IntegerLiteral &lt;col:13&gt; 'int' 42\n    `-ReturnStmt &lt;line:4:5, col:12&gt;\n      `-ImplicitCastExpr &lt;col:12&gt; 'int' &lt;LValueToRValue&gt;\n                                         ^^^^^^^^^^^^^^\n        `-DeclRefExpr &lt;col:12&gt; 'int' lvalue Var 0x627a6e0 'x' 'int'\n</code></pre>\n\n<hr>\n\n<p>The following also performs an lvalue to rvalue conversion, this time for the parameter going into the function.</p>\n\n<pre><code>void f(int i) {}\nint main()\n{\n    int x{3};\n    f(x);\n}\n</code></pre>\n\n<p>The <a href=\"https://godbolt.org/g/7cdzNV\" rel=\"nofollow noreferrer\">AST includes the conversion</a>:</p>\n\n<pre><code>`-FunctionDecl &lt;line:2:1, line:6:1&gt; line:2:5 main 'int ()'\n  `-CompoundStmt &lt;line:3:1, line:6:1&gt;\n    |-DeclStmt &lt;line:4:5, col:13&gt;\n    | `-VarDecl &lt;col:5, col:12&gt; col:9 used x 'int' listinit\n    |   `-InitListExpr &lt;col:10, col:12&gt; 'int'\n    |     `-IntegerLiteral &lt;col:11&gt; 'int' 3\n    `-CallExpr &lt;line:5:5, col:8&gt; 'void'\n      |-ImplicitCastExpr &lt;col:5&gt; 'void (*)(int)' &lt;FunctionToPointerDecay&gt;\n      | `-DeclRefExpr &lt;col:5&gt; 'void (int)' lvalue Function 0x6013660 'f' 'void (int)'\n      `-ImplicitCastExpr &lt;col:7&gt; 'int' &lt;LValueToRValue&gt;\n                                        ^^^^^^^^^^^^^^\n        `-DeclRefExpr &lt;col:7&gt; 'int' lvalue Var 0x60138a0 'x' 'int'\n</code></pre>\n\n<hr>\n\n<p>As I understand it, in the same way, the following should also require an lvalue to rvalue conversion.</p>\n\n<pre><code>struct A{};\nvoid f(A a) {}\nint main()\n{\n    A a;\n    f(a);\n}\n</code></pre>\n\n<p>But it <a href=\"https://godbolt.org/g/m7bMkr\" rel=\"nofollow noreferrer\">never shows up in the AST</a>:</p>\n\n<pre><code>`-CallExpr &lt;line:6:5, col:8&gt; 'void'\n  |-ImplicitCastExpr &lt;col:5&gt; 'void (*)(A)' &lt;FunctionToPointerDecay&gt;\n  | `-DeclRefExpr &lt;col:5&gt; 'void (A)' lvalue Function 0x615e830 'f' 'void (A)'\n  `-CXXConstructExpr &lt;col:7&gt; 'A' 'void (const A &amp;) noexcept'\n    `-ImplicitCastExpr &lt;col:7&gt; 'const A' lvalue &lt;NoOp&gt;\n      `-DeclRefExpr &lt;col:7&gt; 'A' lvalue Var 0x615ea68 'a' 'A'\n</code></pre>\n\n<hr>\n\n<p>Why? Is the conversion optional sometimes?</p>\n"}, {"tags": ["c++", "oop", "methods", "static", "initialization"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1524665648, "post_id": 50024486, "comment_id": 87065093, "body": "Define &quot;doesn&#39;t work&quot;. What outcome did you expect, and what did you observe instead? On the face of it, I don&#39;t see a reason why it would be a problem. If you want to make <code>example</code> private, define a static method on <code>Foo</code> that would turn around and call <code>example.initialize()</code>"}, {"owner": {"reputation": 568, "user_id": 9134945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f407798f1cc5e91f254eb177aa474eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Ava", "link": "https://stackoverflow.com/users/9134945/ava"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524665827, "post_id": 50024486, "comment_id": 87065202, "body": "I get &quot;undefined reference to `Foo::example&#39;&quot; in main.cpp."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 2, "creation_date": 1524665877, "post_id": 50024486, "comment_id": 87065233, "body": "That&#39;s a separate problem. You have only declared <code>example</code> - you also need to define it. In some .cpp (not .h) file, write <code>Bar Foo::example;</code>"}, {"owner": {"reputation": 568, "user_id": 9134945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f407798f1cc5e91f254eb177aa474eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Ava", "link": "https://stackoverflow.com/users/9134945/ava"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1524666440, "post_id": 50024486, "comment_id": 87065648, "body": "Oh, that&#39;s why it didn&#39;t work. Also static method tip was very helpful. Thank you."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1524667426, "post_id": 50024486, "comment_id": 87066352, "body": "imho encapsulation and public are orthogonal, but I know I have some crude views concerning encapsulation ;)"}], "answers": [{"tags": [], "owner": {"reputation": 4533, "user_id": 2504757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ef5b308d33027fab8440d223828fe4c?s=128&d=identicon&r=PG", "display_name": "Robert Andrzejuk", "link": "https://stackoverflow.com/users/2504757/robert-andrzejuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1524668013, "creation_date": 1524668013, "answer_id": 50025375, "question_id": 50024486, "link": "https://stackoverflow.com/questions/50024486/c-initializing-static-member-its-own-method/50025375#50025375", "title": "C++ - initializing static member its own method", "body": "<p>The default way for initializing an object should be by it's default construtor.</p>\n\n<p>If it is really needed then a Singleton can be used (be aware it is an Anti-pattern: <a href=\"https://stackoverflow.com/questions/980601/what-is-an-anti-pattern#980616\">What is an anti-pattern?</a> , also <a href=\"https://stackoverflow.com/questions/137975/what-is-so-bad-about-singletons\">What is so bad about singletons?</a>)</p>\n\n<pre><code>class Singleton\n{\npublic:\n    static const Bar&amp; getBarInstance()\n    {\n        static Bar bar;\n\n        return bar;\n    }\n};\n</code></pre>\n\n<p>This will only be initialized once.</p>\n"}], "owner": {"reputation": 568, "user_id": 9134945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f407798f1cc5e91f254eb177aa474eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Ava", "link": "https://stackoverflow.com/users/9134945/ava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524668013, "creation_date": 1524665460, "question_id": 50024486, "link": "https://stackoverflow.com/questions/50024486/c-initializing-static-member-its-own-method", "title": "C++ - initializing static member its own method", "body": "<p>Is it possible to initialize static member with its own method eg. initialize()?</p>\n\n<p>Example:</p>\n\n<pre><code>class Foo\n{\n//some private variables\npublic:\nstatic Bar example;\n//some methods\n}\n</code></pre>\n\n<p>Then call it in main.cpp like:</p>\n\n<pre><code>Foo::example.initialize(argument);\n</code></pre>\n\n<p>Of course it does not work. Also it has lack in encapsulation because variable is public. I woud like it to be private and initialized just once. I do not have any other option than initializing it with a method.</p>\n"}, {"tags": ["c++", "qthread", "qobject"], "comments": [{"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 1, "creation_date": 1524665626, "post_id": 50024471, "comment_id": 87065077, "body": "You should replace it with signal and slot."}, {"owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "reply_to_user": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 0, "creation_date": 1524665836, "post_id": 50024471, "comment_id": 87065208, "body": "I would really love to know why exactly... I have ready many contradicting articles on Qt threading...."}, {"owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "edited": false, "score": 1, "creation_date": 1524749740, "post_id": 50024471, "comment_id": 87104998, "body": "Calling an object in different thread than yours is inherently dangerous. Is the method even thread safe? With QObjects there is an additional issue of sending signals and invoking slots. Does <code>member1</code> does that? If by the time you call the <code>member1()</code> the event loop in the thread is NOT running your app will crash or at least fail to send the signal. By connecting <code>QThread::started</code> and <code>QObject::whatever</code> you ensure that the method is invoked correctly in the running thread with running event loop."}], "answers": [{"tags": [], "owner": {"reputation": 3452, "user_id": 2194193, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/WHD9t.gif?s=128&g=1", "display_name": "Resurrection", "link": "https://stackoverflow.com/users/2194193/resurrection"}, "is_accepted": false, "score": 1, "last_activity_date": 1524751200, "creation_date": 1524751200, "answer_id": 50044982, "question_id": 50024471, "link": "https://stackoverflow.com/questions/50024471/safety-of-accessing-qobject-method-from-different-qthread/50044982#50044982", "title": "Safety of accessing QObject method from different QThread", "body": "<blockquote>\n  <p>Is it safe to access directly _myObj->member2(); from Worker::work?</p>\n</blockquote>\n\n<p>Most likely not. It would depend on the implementation but generally speaking calling methods across threads is rarely safe. To make it safe you would need to apply locks/mutexes to whatever is being accessed (directly and indirectly) from that method and ensure that everything you call from that method is also thread-safe. Thankfully Qt signal &amp; slots abstract that away so you need not worry about that.</p>\n\n<blockquote>\n  <p>If not should I replace this call by signal &amp; slot mechanism?</p>\n</blockquote>\n\n<p>You should in a following manner:</p>\n\n<p><code>QObject::connect(_thread, &amp;QThread::started, _worker, &amp;MyObject::work);</code> </p>\n\n<p>Remove the direct call to <code>MyObject::work()</code>. Also consider:</p>\n\n<p><code>QObject::connect(_thread, &amp;QThread::finished, _thread, &amp;QThread::deleteLater);</code> </p>\n\n<p>Note that <code>QObject::connect</code> <strong>is thead-safe</strong>. It can be called from whatever thread on any object in any thread at any time.</p>\n\n<blockquote>\n  <p>If I should... why exactly?</p>\n</blockquote>\n\n<p>Calling an object in different thread than yours is inherently dangerous. Is the method you call thread safe? With <code>QObjects</code> there is an additional issue of sending signals and invoking slots. Does <code>work()</code> do that? If by the time you call the <code>work()</code> the event loop in the thread is <strong>NOT</strong> running your app will crash or at least fail to send the signal. By connecting <code>QThread::started</code> and <code>MyObject::work</code> you ensure that the method is invoked correctly in the running thread and with running event loop in correct sequence.</p>\n\n<p>For completeness without signals &amp; slots you should do this to ensure it will work as expected:</p>\n\n<pre><code>if(_thread-&gt;isRunning())\n    _worker-&gt;work();\n</code></pre>\n"}], "owner": {"reputation": 3713, "user_id": 855844, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/9x4Iu.jpg?s=128&g=1", "display_name": "Stefano", "link": "https://stackoverflow.com/users/855844/stefano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1524751200, "creation_date": 1524665410, "last_edit_date": 1524667927, "question_id": 50024471, "link": "https://stackoverflow.com/questions/50024471/safety-of-accessing-qobject-method-from-different-qthread", "title": "Safety of accessing QObject method from different QThread", "body": "<p>I am writing an application which uses one main application thread and a second thread (and there are no other threads foreseen).\nThe second thread is implemented as a \u201cworker\u201d which means that I do not extend QThread class but I move my worker object to a Thread.\nWe have made here a small example:</p>\n\n<p><strong>File: myObject.h</strong></p>\n\n<pre><code>#pragma once\n#include &lt;QObject&gt;\n#include &lt;worker.h&gt;\nclass MyObject : public QObject\n{\n    Q_OBJECT\npublic:\n    MyObject(){}\n    void member1();\n    void member2();\n    Worker* _worker;\n};\n</code></pre>\n\n<p><strong>File: myObject.cpp</strong></p>\n\n<pre><code>#include \"myobject.h\"\n#include &lt;QThread&gt;\n#include &lt;QDebug&gt;\nvoid MyObject::member1()\n{\n    qDebug() &lt;&lt; \"MyObject::member1()\";\n    QThread* _thread = new QThread;\n    _worker = new Worker(this);\n    _worker-&gt;moveToThread(_thread);\n    _thread-&gt;start();\n    _worker-&gt;work();\n}\nvoid MyObject::member2()\n{\n    qDebug() &lt;&lt; \"MyObject::member2()\";\n}\n</code></pre>\n\n<p><strong>File: worker.h</strong></p>\n\n<pre><code>#pragma once\n#include &lt;QObject&gt;\nclass MyObject;\nclass Worker : public QObject\n{\n    Q_OBJECT\npublic:\n    Worker(MyObject* myObj) : _myObj(myObj) {}\n    void work();\nprivate:\n    MyObject* _myObj;\n};\n</code></pre>\n\n<p><strong>File: myworker.cpp</strong></p>\n\n<pre><code>#include &lt;worker.h&gt;\n#include &lt;myobject.h&gt;\n#include &lt;QDebug&gt;\nvoid Worker::work()\n{\n    qDebug() &lt;&lt; \"Worker::work()\";\n    _myObj-&gt;member2();\n}\n</code></pre>\n\n<p><strong>File main.cpp</strong></p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;myobject.h&gt;\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n    MyObject myObject;\n    myObject.member1();\n    return a.exec();\n}\n</code></pre>\n\n<p>Is it safe to access directly <code>_myObj-&gt;member2();</code> from <code>Worker::work</code>?\nIf not should I replace this call by signal &amp; slot mechanism? If I should... why exactly?</p>\n"}, {"tags": ["c++", "c", "function", "struct"], "comments": [{"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1524665573, "post_id": 50024452, "comment_id": 87065053, "body": "Why are you using <code>extern &quot;C&quot; {</code> ? The <code>get_buses()</code> function is C++. <a href=\"//stackoverflow.com/q/1041866\">What is the effect of extern &quot;C&quot; in C++?</a>"}, {"owner": {"reputation": 12858, "user_id": 6752050, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d5c4caa7ff50e6e492c3957ca20ef6c?s=128&d=identicon&r=PG&f=1", "display_name": "S.M.", "link": "https://stackoverflow.com/users/6752050/s-m"}, "edited": false, "score": 0, "creation_date": 1524665646, "post_id": 50024452, "comment_id": 87065092, "body": "<code>extern &quot;C&quot; void get_buses(BusesStruct * bus_scelti){</code> should be in definition too."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 0, "creation_date": 1524665877, "post_id": 50024452, "comment_id": 87065237, "body": "Are you linking in the cpp?"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "reply_to_user": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1524666096, "post_id": 50024452, "comment_id": 87065394, "body": "@JohnnyMopp the <code>extern &quot;C&quot;</code> is so the function can be called from C code, which OP is trying to do. It doesn&#39;t matter that the function definition is in C++."}, {"owner": {"reputation": 1, "user_id": 5951521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d90b21740703645b17d3214ddb5646?s=128&d=identicon&r=PG", "display_name": "Iceknight", "link": "https://stackoverflow.com/users/5951521/iceknight"}, "edited": false, "score": 0, "creation_date": 1524666112, "post_id": 50024452, "comment_id": 87065404, "body": "i use the extern &quot;C&quot; to read the values of the struct in the C file. In the c++ file i read the csv and save the elements in the struct."}, {"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1524666234, "post_id": 50024452, "comment_id": 87065473, "body": "extern &quot;C&quot; just makes the function name compatible.  It doesn&#39;t have any effect on the data being passed as arguments."}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1524666418, "post_id": 50024452, "comment_id": 87065634, "body": "Ok. I see. I missed that part. Are you getting the error from the linker?"}, {"owner": {"reputation": 1, "user_id": 5951521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d90b21740703645b17d3214ddb5646?s=128&d=identicon&r=PG", "display_name": "Iceknight", "link": "https://stackoverflow.com/users/5951521/iceknight"}, "edited": false, "score": 0, "creation_date": 1524666592, "post_id": 50024452, "comment_id": 87065780, "body": "i&#39;m getting the error when i try to complie the C file where i define the vector and recall the function"}, {"owner": {"reputation": 1073, "user_id": 921729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b630bd9941c4001f6c8aae48eaac45b8?s=128&d=identicon&r=PG", "display_name": "Khoyo", "link": "https://stackoverflow.com/users/921729/khoyo"}, "edited": false, "score": 1, "creation_date": 1524666865, "post_id": 50024452, "comment_id": 87065977, "body": "How are you compiling it exactly ?"}, {"owner": {"reputation": 1, "user_id": 5951521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d90b21740703645b17d3214ddb5646?s=128&d=identicon&r=PG", "display_name": "Iceknight", "link": "https://stackoverflow.com/users/5951521/iceknight"}, "edited": false, "score": 0, "creation_date": 1524667262, "post_id": 50024452, "comment_id": 87066244, "body": "g++ -c lettura.cpp for the cpp file. For the c file i use g++ complete.c -o complete ."}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 1, "creation_date": 1524667303, "post_id": 50024452, "comment_id": 87066257, "body": "So you aren&#39;t linking the C++ file into the executable? That&#39;s the problem."}, {"owner": {"reputation": 1, "user_id": 5951521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d90b21740703645b17d3214ddb5646?s=128&d=identicon&r=PG", "display_name": "Iceknight", "link": "https://stackoverflow.com/users/5951521/iceknight"}, "edited": false, "score": 0, "creation_date": 1524667441, "post_id": 50024452, "comment_id": 87066363, "body": "Can you wrote me the command i have to use? I&#39;m new on C and linux"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1524669382, "post_id": 50024452, "comment_id": 87067788, "body": "the content of question is quite poor as it appears, because it is a build process problem"}, {"owner": {"reputation": 8430, "user_id": 2742717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1dec1aa6accf3589489ebd42634f7a0?s=128&d=identicon&r=PG", "display_name": "Swift - Friday Pie", "link": "https://stackoverflow.com/users/2742717/swift-friday-pie"}, "edited": false, "score": 0, "creation_date": 1524669434, "post_id": 50024452, "comment_id": 87067824, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/22154119/compiling-and-linking-c-and-c-files\">Compiling and linking C and C++ files</a>"}], "answers": [{"comments": [{"owner": {"reputation": 208003, "user_id": 841108, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Fm52y.png?s=128&g=1", "display_name": "Basile Starynkevitch", "link": "https://stackoverflow.com/users/841108/basile-starynkevitch"}, "edited": false, "score": 0, "creation_date": 1524667971, "post_id": 50025242, "comment_id": 87066766, "body": "Better use <code>-Wall -Wextra -g</code>  for both <code>gcc</code> and <code>g++</code>"}, {"owner": {"reputation": 1, "user_id": 5951521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d90b21740703645b17d3214ddb5646?s=128&d=identicon&r=PG", "display_name": "Iceknight", "link": "https://stackoverflow.com/users/5951521/iceknight"}, "edited": false, "score": 0, "creation_date": 1524671485, "post_id": 50025242, "comment_id": 87069242, "body": "ok thanks, i&#39;ll try"}, {"owner": {"reputation": 1, "user_id": 5951521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d90b21740703645b17d3214ddb5646?s=128&d=identicon&r=PG", "display_name": "Iceknight", "link": "https://stackoverflow.com/users/5951521/iceknight"}, "edited": false, "score": 0, "creation_date": 1524756977, "post_id": 50025242, "comment_id": 87110124, "body": "Ok, now they compiles without errors but when i launch ./COMPLETE it stops after a while. Maybe i made an error when i recall the values. I&#39;ll search for the errors. Thanks"}, {"owner": {"reputation": 1, "user_id": 5951521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d90b21740703645b17d3214ddb5646?s=128&d=identicon&r=PG", "display_name": "Iceknight", "link": "https://stackoverflow.com/users/5951521/iceknight"}, "edited": false, "score": 0, "creation_date": 1524813536, "post_id": 50025242, "comment_id": 87130907, "body": "The code now compiles and work correctly. Thanks"}], "tags": [], "owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "is_accepted": false, "score": 1, "last_activity_date": 1524667942, "last_edit_date": 1524667942, "creation_date": 1524667631, "answer_id": 50025242, "question_id": 50024452, "link": "https://stackoverflow.com/questions/50024452/recall-a-struct-from-c-to-c/50025242#50025242", "title": "Recall a struct from C++ to C", "body": "<p>According to your comment this is how you're compiling:</p>\n\n<blockquote>\n  <p><code>g++ -c lettura.cpp</code> for the cpp file. For the c file i use <code>g++ complete.c -o complete</code></p>\n</blockquote>\n\n<p>This is compiling the C++ file into an object file and then compiling the C file into an executable. You need to link in the object file as well.</p>\n\n<p>A few options:</p>\n\n<pre><code>g++ -c lettura.cpp                   # compile C++ file to lettura.o\ngcc -c complete.c                    # compile C file to complete.o\ng++ lettura.o complete.o -o complete # link object files into executable 'complete'\n\ng++ lettura.cpp complete.c -o complete # compile and link in one step\n</code></pre>\n\n<p>Note that I'm using <code>gcc</code> to compile the C code and <code>g++</code> to compile the C++ code and to link.</p>\n\n<p>Ideally you should use a Makefile for this, but I think that's beyond the scope of this question/answer.</p>\n"}], "owner": {"reputation": 1, "user_id": 5951521, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28d90b21740703645b17d3214ddb5646?s=128&d=identicon&r=PG", "display_name": "Iceknight", "link": "https://stackoverflow.com/users/5951521/iceknight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "closed_date": 1524673099, "answer_count": 1, "score": -1, "last_activity_date": 1524667942, "creation_date": 1524665360, "last_edit_date": 1524667135, "question_id": 50024452, "link": "https://stackoverflow.com/questions/50024452/recall-a-struct-from-c-to-c", "closed_reason": "Not suitable for this site", "title": "Recall a struct from C++ to C", "body": "<p>I'm trying to read a struct of a program i wrote in <code>c++</code> into a <code>c</code> program. I created a <code>.h</code> with the <code>struct</code> and the <code>extern C</code> for the function. Then i wrote the C++ program that read a <code>csv file</code> and save some elements in a <code>struct</code>. Now i have to recall the <code>struct</code> in a C program and read the values but i'm having a lot of problems. I don't know if i make some mistake in the <code>.cpp file</code> , in the <code>.h file</code> or in the C program. I'm working under linux.</p>\n\n<p>My <code>.h file</code> is :</p>\n\n<pre><code>typedef struct Buses{\n int maggiore;\n int minore;\n}BusesStruct;\n\n#ifdef __cplusplus\nextern \"C\" {\n#endif\n\n    void get_buses(BusesStruct *);\n\n#ifdef __cplusplus\n}\n#endif\n</code></pre>\n\n<p>My cpp is</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;sstream&gt;\n#include &lt;string&gt;\n#include &lt;algorithm&gt;\n#include \"lettura.h\"\nusing namespace std;\n\nvoid get_buses(BusesStruct * bus_scelti){\n//leggo il file csv\n    string line,nomefile;\n    ifstream myfile;\n    cout &lt;&lt; \"Quale file si vuole aprire? \" &lt;&lt; endl;\n    cin &gt;&gt; nomefile;\n    myfile.open(nomefile.c_str());\n    int j=0;\n    if (myfile.is_open()) {\n        int primobus;\n        int secondobus;\n        cout &lt;&lt; \"Digitare il numero di uno dei due BUS sul quale si vuole eseguire l'operazione (1-9): \" &lt;&lt; endl;\n        cin &gt;&gt; primobus;\n        cout &lt;&lt; \"Digitare il numero di un secondo BUS sul quale si vuole eseguire l'operazione (1-9): \" &lt;&lt; endl;\n        cin &gt;&gt; secondobus;\n        int bus1_scelto;\n        int bus2_scelto;\n        while (getline(myfile,line)) {\n            istringstream myline(line);\n            string bus[10];\n            for (int i=0; i&lt;9; i++){\n                    getline(myline,bus[i+1],';');\n                }\n\n            for (int i=0; i&lt;10; i++){\n                if(i == primobus){\n                    int bus1_scelto_c = atoi(bus[i].c_str());\n                    bus1_scelto=bus1_scelto_c;\n                }\n                if(i == secondobus){\n                    int bus2_scelto_c = atoi(bus[i].c_str());\n                    bus2_scelto=bus2_scelto_c;\n                }\n            }\n            bus_scelti[j].maggiore=max(bus1_scelto,bus2_scelto);\n            bus_scelti[j].minore=min(bus1_scelto,bus2_scelto);\n            j=j+1;          \n        }   \n    }\n}\n</code></pre>\n\n<p>In my C file i wrote <code>#include lettura.h</code> to recall the function : </p>\n\n<pre><code>BusesStruct bus_scelti[10005];\nget_buses(bus_scelti);\n</code></pre>\n\n<p>And to define my vector and recall the function.\nI got the <code>error</code> :</p>\n\n<blockquote>\n  <p>reference not define to 'get_buses'.</p>\n</blockquote>\n\n<p>Can you help me? Thanks</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1524665208, "post_id": 50024348, "comment_id": 87064804, "body": "<i>&quot;a deadlock : which should result in an exception&quot;</i> Not should, but <a href=\"http://en.cppreference.com/w/cpp/thread/mutex/lock\" rel=\"nofollow noreferrer\">may</a>: &quot;An implementation that can detect the invalid usage is encouraged to throw a <code>std::system_error</code> with error condition <code>resource_deadlock_would_occur</code> instead of deadlocking.&quot;"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 2, "creation_date": 1524665315, "post_id": 50024348, "comment_id": 87064869, "body": "are you talking about <code>std::mutex</code> ? .... well reading your links I know the answer, nevertheless imho you should mention it in the question (and imho also code should be included in the question)"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 3, "creation_date": 1524665352, "post_id": 50024348, "comment_id": 87064899, "body": "<i>&quot;how can the program protect itself at run-time, against this error&quot;</i> The same way you deal with any other bug - testing and debugging."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1524668216, "post_id": 50024348, "comment_id": 87066950, "body": "Re, &quot;deadlock...should result in an exception...&quot;  <a href=\"http://en.cppreference.com/w/cpp/thread/mutex/lock\" rel=\"nofollow noreferrer\">Documentation for <code>std::mutex</code></a> does not agree with that statement.  A general purpose deadlock-detection mechanism would be costly, and most applications can be designed so that they don&#39;t need it.  <code>std::mutex</code> defines a minimal API that can be implemented on most operating systems/hardware platforms.  If you want something more sophisticated, you either must build your own on top of <code>std::mutex</code>, or use somebody else&#39;s library code that does the same."}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "edited": false, "score": 1, "creation_date": 1524668868, "post_id": 50024348, "comment_id": 87067418, "body": "Re, &quot;the standard library treats this as &#39;undefined behavior&#39; and leaves it to the implementation...&quot; Undefined behavior is not the same thing as <i>implementation-specified behavior</i> or <i>unspecified behavior</i>.  <a href=\"https://stackoverflow.com/a/4105123/801894\">stackoverflow.com/a/4105123/801894</a>  When the standard says &quot;implementation-specified&quot; or &quot;unspecified,&quot; then you may expect behavior that is reasonable and appropriate for the OS/platform on which your code runs.  When the standard says &quot;undefined,&quot; all bets are off.  You have no right to expect anything at all if your program invokes UB."}], "owner": {"reputation": 691, "user_id": 9102144, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/cca508351edb6d6fead84c96a336e56c?s=128&d=identicon&r=PG&f=1", "display_name": "SSteven", "link": "https://stackoverflow.com/users/9102144/ssteven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1524680809, "creation_date": 1524665043, "last_edit_date": 1524680809, "question_id": 50024348, "link": "https://stackoverflow.com/questions/50024348/do-mutex-errors-throw-exceptions", "title": "Do mutex errors throw exceptions?", "body": "<p><strong>mutex</strong> operations could result in exceptions with the following mutex error codes:  </p>\n\n<ol>\n<li>resource_deadlock_would_occur  </li>\n<li>resource_unavailable_try_again  </li>\n<li>operation_not_permitted  </li>\n<li>device_or_resource_busy  </li>\n<li>invalid_argument  </li>\n</ol>\n\n<p>I have tried 2 situations:  </p>\n\n<ol>\n<li>a <a href=\"http://coliru.stacked-crooked.com/a/20cff6ec9b6e12cc\" rel=\"nofollow noreferrer\">deadlock</a> : which should result in an exception with the <code>resource_deadlock_would_occur</code> error code.  </li>\n<li><a href=\"http://coliru.stacked-crooked.com/a/73459a04ca9f6cfb\" rel=\"nofollow noreferrer\">trying to lock a mutex twice</a> : which should result in an exception with the <code>device_or_resource_busy</code> error code.</li>\n</ol>\n\n<p>Both programs are from Stroustrup's book.</p>\n\n<p>Neither situation results in a exception. Both programs simply end without an exception or error message, perhaps due to a <strong>timeout</strong>.</p>\n\n<p>Josuttis states that in case of a deadlock, the standard library permits (but doesn't require) an exception to be thrown.</p>\n\n<p>Further, according to <a href=\"https://stackoverflow.com/questions/11173532/why-is-locking-a-stdmutex-twice-undefined-behaviour\">this thread</a>, trying to lock a mutex twice might also not cause an exception to be thrown. Evidently, the standard library treats this as \"undefined behavior\" and leaves it to the implementation to decide.</p>\n\n<p>So, are the other three error codes (<code>resource_unavailable_try_again</code>, <code>operation_not_permitted</code>, <code>invalid_argument</code>) also treated as \"undefined behavior\"?</p>\n\n<p>If an exception isn't guaranteed in these situations, then how can the program protect itself at run-time, against this error?</p>\n\n<p>I haven't been able to find any online documentation on this aspect, and hence this query.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1524664367, "post_id": 50024095, "comment_id": 87064226, "body": "By writing the code, that copies the data stored in the class instance, you want to copy?"}, {"owner": {"reputation": 27, "user_id": 3998227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b33ba3975b2f4c393c21b74eb6e6b0e?s=128&d=identicon&r=PG&f=1", "display_name": "swagalistic", "link": "https://stackoverflow.com/users/3998227/swagalistic"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1524664446, "post_id": 50024095, "comment_id": 87064278, "body": "Yes I&#39;m trying to write a copy constructor"}, {"owner": {"reputation": 60876, "user_id": 2060725, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/WUKmO.png?s=128&g=1", "display_name": "nvoigt", "link": "https://stackoverflow.com/users/2060725/nvoigt"}, "edited": false, "score": 3, "creation_date": 1524664510, "post_id": 50024095, "comment_id": 87064322, "body": "If your teacher has nothing constructive to say and just tells you &quot;this is wrong&quot; get another teacher. ASAP."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1524664551, "post_id": 50024095, "comment_id": 87064350, "body": "@swagalistic Yes, I understood that? You asked: &quot;<i>How do I make a copy constructor?</i>&quot; I answered: &quot;<i>By writing code that does such copy</i>&quot;. I fail to see what is unclear."}, {"owner": {"reputation": 27, "user_id": 3998227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b33ba3975b2f4c393c21b74eb6e6b0e?s=128&d=identicon&r=PG&f=1", "display_name": "swagalistic", "link": "https://stackoverflow.com/users/3998227/swagalistic"}, "edited": false, "score": 0, "creation_date": 1524664635, "post_id": 50024095, "comment_id": 87064413, "body": "That&#39;s what I&#39;m asking, I don&#39;t know how to do that."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1524664720, "post_id": 50024095, "comment_id": 87064475, "body": "@swagalistic You don&#39;t know how to do what? Write code? If so: Learn from a <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">good C++ book</a>. Your current &quot;question&quot; looks more like &quot;write code for me&quot; request."}, {"owner": {"reputation": 27, "user_id": 3998227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b33ba3975b2f4c393c21b74eb6e6b0e?s=128&d=identicon&r=PG&f=1", "display_name": "swagalistic", "link": "https://stackoverflow.com/users/3998227/swagalistic"}, "edited": false, "score": 0, "creation_date": 1524664781, "post_id": 50024095, "comment_id": 87064514, "body": "Look if you aren&#39;t going to be helpful then don&#39;t comment. I&#39;ve tried to look at many different resources and none of them make sense."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1524665194, "post_id": 50024095, "comment_id": 87064795, "body": "Loop through your obj list copying each node. Don&#39;t just copy the pointers create new nodes and copy the data."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1524666525, "post_id": 50024095, "comment_id": 87065720, "body": "Aside: If your teacher is telling you <code>new</code> and <code>delete</code> are required, get another teacher ASAP"}], "answers": [{"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1524665517, "post_id": 50024424, "comment_id": 87065013, "body": "<code>*next</code> is UB, you are dereferencing an uninitialised pointer. You probably mean <code>next = new Node(*other.next)</code>"}, {"owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1524665677, "post_id": 50024424, "comment_id": 87065108, "body": "Updated solution. You are completely right. It&#39;s a tree anyway, that he&#39;s building."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1524666663, "post_id": 50024424, "comment_id": 87065837, "body": "You now have the same problem as OP, i.e. a shallow copy."}, {"owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "edited": false, "score": 0, "creation_date": 1524666773, "post_id": 50024424, "comment_id": 87065913, "body": "True. The situation cannot be salvaged from here. I don&#39;t see how you can take care of <code>next</code> if you are dealing with raw pointers to non members."}], "tags": [], "owner": {"reputation": 2956, "user_id": 5909388, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uNuNWo_bCHA/AAAAAAAAAAI/AAAAAAAAABg/rciVxcULLHc/photo.jpg?sz=128", "display_name": "Kaveh Vahedipour", "link": "https://stackoverflow.com/users/5909388/kaveh-vahedipour"}, "is_accepted": false, "score": 0, "last_activity_date": 1524665639, "last_edit_date": 1524665639, "creation_date": 1524665281, "answer_id": 50024424, "question_id": 50024095, "link": "https://stackoverflow.com/questions/50024095/how-do-i-make-a-copy-constructor-in-c-using-linked-lists/50024424#50024424", "title": "How do I make a copy constructor in C++ using linked lists?", "body": "<p>Regardless of the poor question, it's my helping day. So here you go. But if you don't come up with these solutions yourself, you're in a lot of trouble. This is the basics of c++. </p>\n\n<pre><code>struct Node {\n    char item;\n    Node *next;\n\n    // Constructor\n    Node(char Item, Node *Next = NULL) {};\n\n    // Copy constructor \n    Node(Node const&amp; other) {\n        item = other.item;\n        next = other.next;\n    }\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1524666292, "post_id": 50024610, "comment_id": 87065524, "body": "I&#39;d swap the order in the <code>?:</code> to <code>return n ? new Node(n-&gt;item, copy_list(n-&gt;next)) : nullptr;</code>"}], "tags": [], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 1, "last_activity_date": 1524665807, "creation_date": 1524665807, "answer_id": 50024610, "question_id": 50024095, "link": "https://stackoverflow.com/questions/50024095/how-do-i-make-a-copy-constructor-in-c-using-linked-lists/50024610#50024610", "title": "How do I make a copy constructor in C++ using linked lists?", "body": "<p>You need to create a new list with the same structure and the same items, but not the same nodes, as <code>obj.head</code>.</p>\n\n<p>This is very convenient to do recursively:</p>\n\n<pre><code>Node* copy_list(const Node* original)\n{\n    if (original == nullptr)\n    {\n        return nullptr;\n    }\n    Node* tail_copy = copy_list(original-&gt;next);\n    return new Node(original-&gt;item, tail_copy);\n}\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>Node* copy_list(const Node* n)\n{\n    return n == nullptr ? nullptr : new Node(n-&gt;item, copy_list(n-&gt;next));\n}\n</code></pre>\n\n<p>or you can do it iteratively, which gets a bit more cumbersome:</p>\n\n<pre><code>Node* copy_list(const Node* n)\n{\n    Node* head = nullptr;\n    Node* current = nullptr;\n    while (n != nullptr)\n    {\n        Node* new_node = new Node(n-&gt;item);\n        if (head == nullptr)\n        {\n            head = new_node;\n        }\n        else\n        {\n            current-&gt;next = new_node;\n        }\n        current = new_node;\n        n = n-&gt;next;\n    }\n    return head;\n}\n</code></pre>\n\n<p>and then</p>\n\n<pre><code>Stack::Stack(const Stack&amp; obj)\n  : head(copy_list(obj.head)) \n{\n}\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 3998227, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b33ba3975b2f4c393c21b74eb6e6b0e?s=128&d=identicon&r=PG&f=1", "display_name": "swagalistic", "link": "https://stackoverflow.com/users/3998227/swagalistic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1524665807, "creation_date": 1524664293, "question_id": 50024095, "link": "https://stackoverflow.com/questions/50024095/how-do-i-make-a-copy-constructor-in-c-using-linked-lists", "title": "How do I make a copy constructor in C++ using linked lists?", "body": "<p>Here is the structure of the linked list:</p>\n\n<pre><code>struct Node\n{\n    char item;\n    Node *next;\n    Node(char Item, Node *Next = NULL);\n};\nNode *head;\n</code></pre>\n\n<p>I don't understand how to do this, I was told that this is the wrong way to do it</p>\n\n<pre><code>//copy constructor\nStack::Stack(const Stack&amp; obj) {\n    head = obj.head;\n}\n</code></pre>\n\n<p>How do I make the correct copy constructor?</p>\n"}, {"tags": ["c++", "node.js", "node.js-addon"], "answers": [{"comments": [{"owner": {"reputation": 5837, "user_id": 4445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6bc9f6e38b74914b7a1bd08694f42a58?s=128&d=identicon&r=PG", "display_name": "fhe", "link": "https://stackoverflow.com/users/4445/fhe"}, "edited": false, "score": 2, "creation_date": 1524665350, "post_id": 50024176, "comment_id": 87064896, "body": "The <code>*</code> used to dereference a pointer variable is not correct in this context. It&#39;s an overloaded <code>operator*()</code> which returns <code>char *</code> in that case."}, {"owner": {"reputation": 707, "user_id": 2647610, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qlFSn.png?s=128&g=1", "display_name": "Humberto Corr&#234;a", "link": "https://stackoverflow.com/users/2647610/humberto-corr%c3%aaa"}, "edited": false, "score": 0, "creation_date": 1524673570, "post_id": 50024176, "comment_id": 87070458, "body": "@Mansuro, this is a specific way to initialize a variable in C++?"}, {"owner": {"reputation": 707, "user_id": 2647610, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qlFSn.png?s=128&g=1", "display_name": "Humberto Corr&#234;a", "link": "https://stackoverflow.com/users/2647610/humberto-corr%c3%aaa"}, "reply_to_user": {"reputation": 5837, "user_id": 4445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6bc9f6e38b74914b7a1bd08694f42a58?s=128&d=identicon&r=PG", "display_name": "fhe", "link": "https://stackoverflow.com/users/4445/fhe"}, "edited": false, "score": 0, "creation_date": 1524673738, "post_id": 50024176, "comment_id": 87070541, "body": "@fhe, What does the <code>operator*()</code> do?"}, {"owner": {"reputation": 707, "user_id": 2647610, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qlFSn.png?s=128&g=1", "display_name": "Humberto Corr&#234;a", "link": "https://stackoverflow.com/users/2647610/humberto-corr%c3%aaa"}, "edited": false, "score": 0, "creation_date": 1524676277, "post_id": 50024176, "comment_id": 87071820, "body": "Guys, this is called constructor initialization and is a feature of C++."}, {"owner": {"reputation": 5837, "user_id": 4445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6bc9f6e38b74914b7a1bd08694f42a58?s=128&d=identicon&r=PG", "display_name": "fhe", "link": "https://stackoverflow.com/users/4445/fhe"}, "reply_to_user": {"reputation": 707, "user_id": 2647610, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qlFSn.png?s=128&g=1", "display_name": "Humberto Corr&#234;a", "link": "https://stackoverflow.com/users/2647610/humberto-corr%c3%aaa"}, "edited": false, "score": 0, "creation_date": 1525007877, "post_id": 50024176, "comment_id": 87189698, "body": "@HumbertoCorr&#234;a The <code>operator*()</code> most likely returns <code>const char*</code> in this case. I don&#39;t have access to the source code of <code>Nan::Utf8String</code>, but I guess it has some internal <code>char</code> buffer which is returned if you apply the <code>*</code> operator as in <code>*clientPort</code>. It&#39;s another way of accessing this data via a dedicated method call (which probably doesn&#39;t exist in this case)."}], "tags": [], "owner": {"reputation": 4164, "user_id": 612920, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7c3c82a2d693ab3f2fd8e06063bc4520?s=128&d=identicon&r=PG", "display_name": "Mansuro", "link": "https://stackoverflow.com/users/612920/mansuro"}, "is_accepted": true, "score": 0, "last_activity_date": 1524665666, "last_edit_date": 1524665666, "creation_date": 1524664544, "answer_id": 50024176, "question_id": 50024047, "link": "https://stackoverflow.com/questions/50024047/c-syntax-with-nanutf8string/50024176#50024176", "title": "C++ syntax with Nan::Utf8String", "body": "<p><code>clientIP</code> is a variable of type <code>Nan::Utf8String</code> initialized to <code>clientIPV8.ToLocalChecked()</code></p>\n\n<p><code>*</code> is used to dereference a pointer variable, i.e. a variable containing the value of a memory address, so it should return whatever value <code>clientIP</code> is pointing to. But it can also be an overloaded <code>operator*</code>. All operators can be overloaded in C++, like any other function, and as mentioned in the comments, it is overloaded in this case to return a char* wrapped by <code>Nan::Utf8String</code>.</p>\n"}], "owner": {"reputation": 707, "user_id": 2647610, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/qlFSn.png?s=128&g=1", "display_name": "Humberto Corr&#234;a", "link": "https://stackoverflow.com/users/2647610/humberto-corr%c3%aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 444, "favorite_count": 0, "accepted_answer_id": 50024176, "answer_count": 1, "score": 0, "last_activity_date": 1524665666, "creation_date": 1524664164, "question_id": 50024047, "link": "https://stackoverflow.com/questions/50024047/c-syntax-with-nanutf8string", "title": "C++ syntax with Nan::Utf8String", "body": "<p>I'm working in a task to fix an node.js' addon write in C++, I don't known C++ but I can understand the general context.\nReading the code, the strech of code below, have not made sense to me:</p>\n\n<pre><code>Nan::Utf8String clientIP(clientIPV8.ToLocalChecked());\nparams[\"clientIP\"] = *clientIP;\n</code></pre>\n\n<p>What means the clientIP?\nWhat means *clientIP?</p>\n\n<p>I didn't declare this \"function\" anywhere. The code has more than one occurrence equals this one, but the \"function\" name is changed. For example:</p>\n\n<pre><code>Nan::Utf8String clientPort(clientPortV8.ToLocalChecked());\nparams[\"clientPort\"] = *clientPort;\n</code></pre>\n\n<ul>\n<li>I don't known if this is a function.</li>\n</ul>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "video", "ffmpeg", "decoder", "vaapi"], "answers": [{"tags": [], "owner": {"reputation": 125, "user_id": 9342369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34649720aa1a0b0b88ecc0b676698a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Makwana", "link": "https://stackoverflow.com/users/9342369/harshil-makwana"}, "is_accepted": true, "score": 2, "last_activity_date": 1524732925, "creation_date": 1524732925, "answer_id": 50038824, "question_id": 50023750, "link": "https://stackoverflow.com/questions/50023750/how-to-convert-from-av-pix-fmt-vaapi-to-av-pix-fmt-yuv420-using-ffmpeg-sws-scale/50038824#50038824", "title": "How to convert from AV_PIX_FMT_VAAPI to AV_PIX_FMT_YUV420 using FFMPEG sws_scaler api?", "body": "<p>Fixed this issue by using below code,</p>\n\n<pre><code>SwsContext* conversion_context_ = sws_getContext(videoDecoder_-&gt;width(),     videoDecoder_-&gt;height(), AV_PIX_FMT_NV12 ,scaler_-&gt;getWidth(), scaler_-&gt;getHeight(), AV_PIX_FMT_YUV420P,(int)SWS_BICUBIC,\n nullptr, nullptr, nullptr);\n</code></pre>\n\n<p>So instead of AV_PIX_FMT_VAAPI option, I used AV_PIX_FMT_NV12.</p>\n"}], "owner": {"reputation": 125, "user_id": 9342369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34649720aa1a0b0b88ecc0b676698a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Harshil Makwana", "link": "https://stackoverflow.com/users/9342369/harshil-makwana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 50038824, "answer_count": 1, "score": 1, "last_activity_date": 1524732925, "creation_date": 1524663294, "question_id": 50023750, "link": "https://stackoverflow.com/questions/50023750/how-to-convert-from-av-pix-fmt-vaapi-to-av-pix-fmt-yuv420-using-ffmpeg-sws-scale", "title": "How to convert from AV_PIX_FMT_VAAPI to AV_PIX_FMT_YUV420 using FFMPEG sws_scaler api?", "body": "<p>I am using below code to convert from VAAPI to YUV420 format.</p>\n\n<pre><code>     AVFrame* src, * dst;\n     SwsContext* conversion_context_ = sws_getContext(videoDecoder_-&gt;width(),     videoDecoder_-&gt;height(), AV_PIX_FMT_VAAPI,scaler_-&gt;getWidth(), scaler_-&gt;getHeight(), AV_PIX_FMT_YUV420P,(int)SWS_BICUBIC,\n nullptr, nullptr, nullptr); &lt;------------- This function is returning NULL value.\n     sws_scale(conversion_context_,\n                (uint8_t const * const *)src-&gt;data, src-&gt;linesize, 0, (int)height,\n                dst-&gt;data, dst-&gt;linesize);\n</code></pre>\n\n<p>Can some one tell me why I am getting NULL value of SwsContext's pointer?</p>\n"}]