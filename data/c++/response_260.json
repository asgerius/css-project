[{"tags": ["c++", "c++11", "c++17", "circular-dependency"], "comments": [{"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 2, "creation_date": 1577835983, "post_id": 59549156, "comment_id": 105267426, "body": "<code>template &lt;typename&gt; class VertexWrapper</code>? Also, why do you have both C++11 and C++17 tags? Which standard are you targeting?"}, {"owner": {"reputation": 198, "user_id": 10356077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58ff6e7e4144be7f9fd7fbf7fcdc393?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Berens", "link": "https://stackoverflow.com/users/10356077/simon-berens"}, "reply_to_user": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "edited": false, "score": 0, "creation_date": 1577836115, "post_id": 59549156, "comment_id": 105267445, "body": "@HolyBlackCat Afaik both apply, should I only use the most recent one? Also I&#39;m not sure what you mean by <code>template &lt;typename&gt; typename VertexWrapper</code>"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1577836358, "post_id": 59549156, "comment_id": 105267479, "body": "Is the <code>VertexWrapper</code> type argument always supposed to be of the form <code>std::shared_ptr&lt;decltype(v)&gt;</code> or <code>some_template_here&lt;decltype(v)&gt;</code>?"}, {"owner": {"reputation": 198, "user_id": 10356077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58ff6e7e4144be7f9fd7fbf7fcdc393?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Berens", "link": "https://stackoverflow.com/users/10356077/simon-berens"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1577836434, "post_id": 59549156, "comment_id": 105267491, "body": "@walnut it should be something like shared_ptr/unique_ptr/something with operator-&gt;"}, {"owner": {"reputation": 2275, "user_id": 5869304, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/ed0827adc1d5b81f2125f83c44e7feb5?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5869304/joe"}, "edited": false, "score": 0, "creation_date": 1578938591, "post_id": 59549156, "comment_id": 105594226, "body": "If I&#39;m reading this question right, you might want to look into &quot;template template&quot; parameters  <a href=\"https://stackoverflow.com/questions/213761/what-are-some-uses-of-template-template-parameters\" title=\"what are some uses of template template parameters\">stackoverflow.com/questions/213761/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 198, "user_id": 10356077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58ff6e7e4144be7f9fd7fbf7fcdc393?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Berens", "link": "https://stackoverflow.com/users/10356077/simon-berens"}, "edited": false, "score": 0, "creation_date": 1577836944, "post_id": 59549217, "comment_id": 105267542, "body": "Thanks! TIL about template template parameters"}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 10, "last_activity_date": 1577836935, "last_edit_date": 1577836935, "creation_date": 1577836804, "answer_id": 59549217, "question_id": 59549156, "link": "https://stackoverflow.com/questions/59549156/use-current-template-as-a-template-parameter-to-one-of-the-template-parameters/59549217#59549217", "title": "Use Current Template as a Template Parameter to one of the Template Parameters", "body": "<p>With template template parameter, you can do something like:</p>\n\n<pre><code>template&lt;typename EdgeType&gt;\nstruct Vertex {\n    std::vector&lt;EdgeType&gt; successors;\n};\n\ntemplate&lt;typename EdgeCostType, template &lt;typename&gt; class VertexWrapper&gt;\nstruct Edge {\n    EdgeCostType cost;\n    VertexWrapper&lt;Edge&gt; source;\n    VertexWrapper&lt;Edge&gt; dest;\n};\n\n\nusing myEdge = Edge&lt;double, Vertex&gt;;\nusing myVertex = Vertex&lt;myEdge&gt;;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "is_accepted": false, "score": 2, "last_activity_date": 1577839434, "creation_date": 1577839434, "answer_id": 59549352, "question_id": 59549156, "link": "https://stackoverflow.com/questions/59549156/use-current-template-as-a-template-parameter-to-one-of-the-template-parameters/59549352#59549352", "title": "Use Current Template as a Template Parameter to one of the Template Parameters", "body": "<p>yours simply works..  (but i don't know how to print and initialize member vector)</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;  \nusing namespace std;\n\ntemplate&lt;typename EdgeType&gt;\nstruct Vertex {\n    vector&lt;EdgeType&gt; successors;\n};\n\ntemplate&lt;typename EdgeCostType, typename VertexWrapper&gt;\nstruct Edge {\n    EdgeCostType cost;\n    VertexWrapper source;\n    VertexWrapper dest;\n};\n\nint main (){\n\n    Vertex&lt;int&gt; vertx = {{5}};\n    Edge&lt;int, decltype(vertx)&gt; ed = {7};\n\n    cout&lt;&lt; ed.cost &lt;&lt;\"\\n\";     //cout&lt;&lt; ed.dest.successors&lt;&lt;\"\\n\";   // not work, ask help!\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1577904546, "post_id": 59550423, "comment_id": 105278921, "body": "It was just an example usage. To go further, I would do <code>template &lt;typename T&gt; struct graph_type { using egde = Edge&lt;T, Vertex&gt;; using vertex = Vertex&lt;edge&gt;; };</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 0, "last_activity_date": 1577904226, "last_edit_date": 1577904226, "creation_date": 1577860257, "answer_id": 59550423, "question_id": 59549156, "link": "https://stackoverflow.com/questions/59549156/use-current-template-as-a-template-parameter-to-one-of-the-template-parameters/59550423#59550423", "title": "Use Current Template as a Template Parameter to one of the Template Parameters", "body": "<p><a href=\"https://stackoverflow.com/a/59549217/10957435\">Jarod42's answer</a> will work, but it does constrain you to only doubles. If you want a more flexible one that accepts <code>int</code>s, for instance, you also have this option:</p>\n\n<pre><code>template&lt;class T&gt;\nusing myEdge = Edge&lt;T, Vertex&gt;;\n\ntemplate&lt;class T&gt;\nusing myVertex = Vertex&lt;myEdge&lt;T&gt;&gt;;\n</code></pre>\n\n<p>This will allow you to use other types of numbers, if for some reason you need a shorthand for that. Then using doubles would look like this:</p>\n\n<pre><code>myVertex&lt;double&gt; v;\n</code></pre>\n"}], "owner": {"reputation": 198, "user_id": 10356077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58ff6e7e4144be7f9fd7fbf7fcdc393?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Berens", "link": "https://stackoverflow.com/users/10356077/simon-berens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 1, "accepted_answer_id": 59549217, "answer_count": 3, "score": 8, "last_activity_date": 1577904226, "creation_date": 1577835704, "last_edit_date": 1577837069, "question_id": 59549156, "link": "https://stackoverflow.com/questions/59549156/use-current-template-as-a-template-parameter-to-one-of-the-template-parameters", "title": "Use Current Template as a Template Parameter to one of the Template Parameters", "body": "<p>I am trying to make a generic graph structure, but I am running into this circular dependency between vertices and edges. I define my Vertex and Edge classes like so:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename EdgeType&gt;\nstruct Vertex {\n    std::vector&lt;EdgeType&gt; successors;\n};\n\ntemplate&lt;typename EdgeCostType, typename VertexWrapper&gt;\nstruct Edge {\n    EdgeCostType cost;\n    VertexWrapper source;\n    VertexWrapper dest;\n};\n</code></pre>\n\n<p>I would like to instantiate it with something like <code>Vertex&lt;Edge&lt;int, std::shared_ptr&lt;decltype(v)&gt;&gt;&gt; v;</code>, but I obviously cannot. What can I do to resolve this circular dependency?</p>\n\n<p>Edit:</p>\n\n<p>I think what this problem boils down to is using the current template as a template parameter to one of the template parameters of the current template, e.g. how to do something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename VertexWrapper&gt;\nstruct Vertex {\n    std::vector&lt;pair&lt;int, VertexWrapper&lt;Vertex&gt;&gt;&gt; successors;\n};\n</code></pre>\n"}, {"tags": ["c++", "makefile", "openframeworks"], "answers": [{"tags": [], "owner": {"reputation": 2132, "user_id": 5224286, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b3b9910cbb2254c651fca2c71edd84af?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Lee", "link": "https://stackoverflow.com/users/5224286/zack-lee"}, "is_accepted": true, "score": 0, "last_activity_date": 1578020360, "creation_date": 1578020360, "answer_id": 59572666, "question_id": 59549062, "link": "https://stackoverflow.com/questions/59549062/how-to-build-openframeworks-as-a-shard-library-on-macos/59572666#59572666", "title": "How to build openFrameworks as a shard library on macOS", "body": "<p>I could successfully build OF as a shared library with the following:</p>\n\n<pre><code>APPNAME = myApp.so\nPROJECT_CFLAGS = -Wall\nPROJECT_LDFLAGS = -dynamiclib -Wl,-undefined -Wl,dynamic_lookup\nPROJECT_OPTIMIZATION_CFLAGS_RELEASE = -O3\n</code></pre>\n"}], "owner": {"reputation": 2132, "user_id": 5224286, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b3b9910cbb2254c651fca2c71edd84af?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Lee", "link": "https://stackoverflow.com/users/5224286/zack-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 59572666, "answer_count": 1, "score": 0, "last_activity_date": 1578020360, "creation_date": 1577833935, "question_id": 59549062, "link": "https://stackoverflow.com/questions/59549062/how-to-build-openframeworks-as-a-shard-library-on-macos", "title": "How to build openFrameworks as a shard library on macOS", "body": "<p>I'm trying to build OF as a shared library (.so) in macOS.</p>\n\n<p>I added the following to my app's <code>config.make</code> file.</p>\n\n<pre><code>APPNAME = myApp.so\n\nPROJECT_LDFLAGS = -rdynamic -shared -undefined dynamic_lookup\n\nPROJECT_OPTIMIZATION_CFLAGS_RELEASE = -O3\n</code></pre>\n\n<p>But when I build the project using <code>make</code>, it actually generates an Application file <code>myApp.so.app</code> which is not a shared library.</p>\n\n<p>How can I properly build OF as a shared library in macOS?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1577833760, "post_id": 59549048, "comment_id": 105267142, "body": "Read the entire line into a string the split it on the spaces?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577836766, "post_id": 59549048, "comment_id": 105267528, "body": "Use <code>std::getline()</code> to read each line, and <code>std::istringstream</code> to parse each line"}], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577836696, "post_id": 59549077, "comment_id": 105267522, "body": "FYI, line breaks also count as ignorable whitespace by <code>operator&gt;&gt;</code>, which is why this code works.  However, know that this code is only reading the 1st 4 lines of input, it is not reading the remaining 3 lines.  So it does not satisfy the entire requirements of the assignment as documented"}, {"owner": {"reputation": 109, "user_id": 9616438, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-i1EXWDr0TzY/AAAAAAAAAAI/AAAAAAAAAng/5fgLTFCvSrU/photo.jpg?sz=128", "display_name": "kazi siam", "link": "https://stackoverflow.com/users/9616438/kazi-siam"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 1, "creation_date": 1577840305, "post_id": 59549077, "comment_id": 105267896, "body": "@RemyLebeau I actually needed help for that only. I know how to solve the problem. I just didn&#39;t know how to separate the string and integer when user input both in the same line."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577870343, "post_id": 59549077, "comment_id": 105271202, "body": "You must validate the read as well <code>if (!(cin &gt;&gt; s &gt;&gt; a)) { &#47;* handle error *&#47; }</code>. Whenever you take input, any input, from a file, from the user (and especially from the user) you <b><i>validate the read succeeds</i></b> by <b>checking the return</b> (technically the input <i>stream-state</i> here."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 2, "last_activity_date": 1577834240, "creation_date": 1577834240, "answer_id": 59549077, "question_id": 59549048, "link": "https://stackoverflow.com/questions/59549048/how-can-i-split-string-and-integer-when-user-input-both-the-string-and-the-integ/59549077#59549077", "title": "How can I split string and integer when user input both the string and the integer in the same line in C++?", "body": "<p>Just stream them from <code>std::cin</code> which uses space as a separator:</p>\n\n<pre><code>int n;\nstd::cin &gt;&gt; n;\nfor (int i = 0; i &lt; n; ++i) {\n    std::string s;\n    int a;\n    std::cin &gt;&gt; s &gt;&gt; a;\n    // process a and s\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577838895, "post_id": 59549253, "comment_id": 105267735, "body": "Any reason for <code>std::map</code> instead of <code>std::unordered_map</code>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1577869400, "post_id": 59549253, "comment_id": 105271075, "body": "@DavidC.Rankin no particular reason"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 1, "last_activity_date": 1577837562, "creation_date": 1577837562, "answer_id": 59549253, "question_id": 59549048, "link": "https://stackoverflow.com/questions/59549048/how-can-i-split-string-and-integer-when-user-input-both-the-string-and-the-integ/59549253#59549253", "title": "How can I split string and integer when user input both the string and the integer in the same line in C++?", "body": "<p>Try something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;utility&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n\nint main()\n{\n    std::vector&lt;std::pair&lt;std::string, int&gt;&gt; phoneBook;\n\n    int n;\n    std::string line;\n\n    std::getline(std::cin, line);\n    std::istringstream(line) &gt;&gt; n;\n\n    for (int i = 0; i &lt; n; ++i)\n    {\n        std::getline(std::cin, line);\n        std::string name;\n        int phoneNumber;\n        std::istringstream(line) &gt;&gt; name &gt;&gt; phoneNumber;\n        phoneBook.push_back(std::make_pair(name, phoneNumber));\n    }\n\n    while (std::getline(std::cin, line))\n    {\n        auto iter = std::find_if(phoneBook.begin(), phoneBook.end(),\n            [&amp;](const std::pair&lt;std::string, int&gt; &amp;entry){\n                return (entry.first == line);\n            }\n        );\n        if (iter != phoneBook.end())\n            std::cout &lt;&lt; iter-&gt;first &lt;&lt; \"=\" &lt;&lt; iter-&gt;second &lt;&lt; std::endl;\n        else\n            std::cout &lt;&lt; \"Not found\" &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/MCtOFW\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n\n<p>On the other hand, if there are never any duplicate names in the phone book, consider using a <code>std::map</code> instead of a <code>std::vector</code>:</p>\n\n<p>Try something like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;map&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n\nint main()\n{\n    std::map&lt;std::string, int&gt; phoneBook;\n\n    int n;\n    std::string line;\n\n    std::getline(std::cin, line);\n    std::istringstream(line) &gt;&gt; n;\n\n    for (int i = 0; i &lt; n; ++i)\n    {\n        std::getline(std::cin, line);\n        std::string name;\n        int phoneNumber;\n        std::istringstream(line) &gt;&gt; name &gt;&gt; phoneNumber;\n        phoneBook[name] = phoneNumber;\n    }\n\n    while (std::getline(std::cin, line))\n    {\n        auto iter = phoneBook.find(line);\n        if (iter != phoneBook.end())\n            std::cout &lt;&lt; iter-&gt;first &lt;&lt; \"=\" &lt;&lt; iter-&gt;second &lt;&lt; std::endl;\n        else\n            std::cout &lt;&lt; \"Not found\" &lt;&lt; std::endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/BGEckJ\" rel=\"nofollow noreferrer\">Live Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 3451, "user_id": 7016115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e53D0.jpg?s=128&g=1", "display_name": "Shudipta Sharma", "link": "https://stackoverflow.com/users/7016115/shudipta-sharma"}, "is_accepted": false, "score": -1, "last_activity_date": 1577850662, "creation_date": 1577850662, "answer_id": 59549910, "question_id": 59549048, "link": "https://stackoverflow.com/questions/59549048/how-can-i-split-string-and-integer-when-user-input-both-the-string-and-the-integ/59549910#59549910", "title": "How can I split string and integer when user input both the string and the integer in the same line in C++?", "body": "<p>You can also use the standard function, <code>scanf()</code> for taking input from <code>stdin</code> in <code>C</code>, since the input for phonebook entries, name &amp; number, are space-separated.</p>\n\n<p>So, use like the following:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>char name[&lt;size&gt;];\nint num;\nscanf(\"%s %d\", &amp;name, &amp;num);\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 9616438, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-i1EXWDr0TzY/AAAAAAAAAAI/AAAAAAAAAng/5fgLTFCvSrU/photo.jpg?sz=128", "display_name": "kazi siam", "link": "https://stackoverflow.com/users/9616438/kazi-siam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1577850662, "creation_date": 1577833670, "question_id": 59549048, "link": "https://stackoverflow.com/questions/59549048/how-can-i-split-string-and-integer-when-user-input-both-the-string-and-the-integ", "title": "How can I split string and integer when user input both the string and the integer in the same line in C++?", "body": "<p>I was doing Day 8: Dictionaries and Maps. I think I know how to solve the problem in C++. However I don\u2019t know how can I split string and integer when user input both the string and the integer in the same line. They are separated by two spaces. </p>\n\n<p><a href=\"https://i.stack.imgur.com/C1oRw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C1oRw.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "arrays", "null", "copying"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1577833439, "post_id": 59549020, "comment_id": 105267106, "body": "<a href=\"https://rextester.com/REGZN97907\" rel=\"nofollow noreferrer\">Seems to work</a> for me. What outcome do you expect, and what do you observe instead."}, {"owner": {"reputation": 55, "user_id": 9499835, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-toVZ1LpqpYs/AAAAAAAAAAI/AAAAAAAABZc/gRhMPDQAWXs/photo.jpg?sz=128", "display_name": "Mr SnowGlobe", "link": "https://stackoverflow.com/users/9499835/mr-snowglobe"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1577833776, "post_id": 59549020, "comment_id": 105267145, "body": "@IgorTandetnik <a href=\"https://i.imgur.com/tH9F1Dr.png\" rel=\"nofollow noreferrer\">link</a> Here is a pic of the error. When I enter 12 characters or above it gives random junk. But at 11 characters and under there is no junk."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 4, "creation_date": 1577833824, "post_id": 59549020, "comment_id": 105267152, "body": "Thou shalt null-terminate c-style strings. <code>str1[i] != &#39;\\0&#39;</code> stops the copying before <code>str2</code> gets the terminator."}, {"owner": {"reputation": 55, "user_id": 9499835, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-toVZ1LpqpYs/AAAAAAAAAAI/AAAAAAAABZc/gRhMPDQAWXs/photo.jpg?sz=128", "display_name": "Mr SnowGlobe", "link": "https://stackoverflow.com/users/9499835/mr-snowglobe"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577834813, "post_id": 59549020, "comment_id": 105267296, "body": "@user4581301 that makes sense! How do I copy the null terminator character to str2? <code>str2[i] = str1[i]</code> ?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577834895, "post_id": 59549020, "comment_id": 105267310, "body": "Path of least resistance would be to add <code>str2[i] = &#39;\\0&#39;;</code> after the loop"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577835110, "post_id": 59549020, "comment_id": 105267333, "body": "Note though: the comment <code>&#47;&#47;Make copy using strcpy</code> suggests that you should be using the <code>strcpy</code> function. No loop just call <code>strcpy(str2, str1);</code> <a href=\"https://en.cppreference.com/w/cpp/string/byte/strcpy\" rel=\"nofollow noreferrer\">Documentation page for <code>strcpy</code></a>"}, {"owner": {"reputation": 55, "user_id": 9499835, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-toVZ1LpqpYs/AAAAAAAAAAI/AAAAAAAABZc/gRhMPDQAWXs/photo.jpg?sz=128", "display_name": "Mr SnowGlobe", "link": "https://stackoverflow.com/users/9499835/mr-snowglobe"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577835200, "post_id": 59549020, "comment_id": 105267342, "body": "@user4581301 yes that was by mistake. I deleted the strcpy functions. But I was able to figure it out, thanks!"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1577835242, "post_id": 59549020, "comment_id": 105267344, "body": "just a side note: you know the difference between sizeof and strlen here, right?"}, {"owner": {"reputation": 55, "user_id": 9499835, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-toVZ1LpqpYs/AAAAAAAAAAI/AAAAAAAABZc/gRhMPDQAWXs/photo.jpg?sz=128", "display_name": "Mr SnowGlobe", "link": "https://stackoverflow.com/users/9499835/mr-snowglobe"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577835376, "post_id": 59549020, "comment_id": 105267359, "body": "@user4581301 sizeof returns the number of elements an array is allotted and strlen returns the character length of the string I believe. I just added those random calcs in there to help me figure out what I was doing wrong."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "edited": false, "score": 0, "creation_date": 1577860432, "post_id": 59549020, "comment_id": 105269771, "body": "You do not mean <code>y = sizeof (str2)</code>. Surely you mean <code>y = strlen(str2)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1577838097, "post_id": 59549197, "comment_id": 105267660, "body": "<code>getline (cin,str1);</code> is not clearer, it would not compile here. That would work if <code>str1</code> is a <code>std::string</code>, not char array"}], "tags": [], "owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "is_accepted": false, "score": 0, "last_activity_date": 1577836328, "creation_date": 1577836328, "answer_id": 59549197, "question_id": 59549020, "link": "https://stackoverflow.com/questions/59549020/random-junk-when-copying-array/59549197#59549197", "title": "Random junk when copying array", "body": "<p>It works.. try add below between the end of <code>for</code> block and <code>y=sizeof</code> to aid debugging</p>\n\n<pre><code>str2[i] = 0;\ncout&lt;&lt;\"\\nstr2 is \"&lt;&lt;i&lt;&lt;\" characters:  ==\" &lt;&lt; str2 &lt;&lt;\"==\" &lt;&lt; \" \\n\" ;\n</code></pre>\n\n<p>and clearer is simply <code>getline (cin,str1);</code></p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 8849658, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wq8d8oIFOzc/AAAAAAAAAAI/AAAAAAAAAEg/ZDJk8CFJGtQ/photo.jpg?sz=128", "display_name": "Jayson Okhman", "link": "https://stackoverflow.com/users/8849658/jayson-okhman"}, "is_accepted": false, "score": 0, "last_activity_date": 1577845073, "creation_date": 1577845073, "answer_id": 59549631, "question_id": 59549020, "link": "https://stackoverflow.com/questions/59549020/random-junk-when-copying-array/59549631#59549631", "title": "Random junk when copying array", "body": "<p>You can solve this with a lot less code by just declaring two strings. Then set string 2 to string 1.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nstring str1;\nstring str2;\n\nint main() {\n    cout &lt;&lt; \"String 1 is now :\\t\" &lt;&lt; str1 &lt;&lt; endl;\n    cout &lt;&lt; \"String 2 is now :\\t\" &lt;&lt; str2 &lt;&lt; endl;\n    cout &lt;&lt; \"Enter a String\" &lt;&lt; endl;\n    getline(cin, str1);\n    str2 = str1;\n    cout &lt;&lt; \"String 1 has been copied into string 2\" &lt;&lt; endl;\n    cout &lt;&lt; \"String 1 is now :\\t\" &lt;&lt; str1 &lt;&lt; endl;\n    cout &lt;&lt; \"String 2 is now :\\t\" &lt;&lt; str2 &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10957435"}, "is_accepted": false, "score": 0, "last_activity_date": 1577860936, "creation_date": 1577860936, "answer_id": 59550482, "question_id": 59549020, "link": "https://stackoverflow.com/questions/59549020/random-junk-when-copying-array/59550482#59550482", "title": "Random junk when copying array", "body": "<p>You do not null terminate the new string. Something like this after your loop will do the trick:</p>\n\n<pre><code>// null terminate the string\nif(i &lt; 100) {\n    str2[i] = 0;\n} else {\n    // terminate the last character anyway\n    str2[99] = 0;\n}\n</code></pre>\n\n<p>This has hardcoded values. I would probably change that.</p>\n\n<p>This isn't necessarily the best way to null terminate your string. But at least you know what's going on now.</p>\n\n<hr>\n\n<p>Also, <code>sizeof</code> is a compile time constant denoting the size of the array. I'm going to guess that this is not what you want, but rather you want <code>strlen()</code> instead. <code>strlen()</code> gives the length of the string instead.</p>\n\n<pre><code>y = strlen(str2);\n</code></pre>\n\n<p>But I suppose that is speculation on my part.</p>\n"}], "owner": {"reputation": 55, "user_id": 9499835, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-toVZ1LpqpYs/AAAAAAAAAAI/AAAAAAAABZc/gRhMPDQAWXs/photo.jpg?sz=128", "display_name": "Mr SnowGlobe", "link": "https://stackoverflow.com/users/9499835/mr-snowglobe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1577860936, "creation_date": 1577833294, "last_edit_date": 1577834354, "question_id": 59549020, "link": "https://stackoverflow.com/questions/59549020/random-junk-when-copying-array", "title": "Random junk when copying array", "body": "<p>When I run this program it runs fine but for some reason I'm getting random junk in the output. If I enter a string greater than 11 characters I will start to get random junk, if I enter less than 11 characters the random junk doesn't appear and it looks fine...</p>\n\n<p>Here is a picture of the error <a href=\"https://i.stack.imgur.com/TNbUt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TNbUt.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std ;\n\nint main ()\n{\n    //Declare and initialize variables\n    char str1 [100], str2 [100] ;\n    int i, y ;\n\n    //Top display\n    cout &lt;&lt; endl\n    &lt;&lt; \"Copy one string to a second string\\n\"\n    &lt;&lt; \"----------------------------------\\n\" ;\n\n    //Read user input\n    cout &lt;&lt; \"Please enter a string: \" ;\n    cin.getline (str1 , sizeof (str1) ) ;\n    cout &lt;&lt; endl ;\n\n    //Make copy using strcpy\n    for ( i = 0 ; str1[i] != '\\0'; i ++ )\n    {\n        str2[i] = str1[i] ;\n        cout &lt;&lt; i &lt;&lt; \"  \" ;\n    }\n\n\n    y = sizeof (str2) ;\n\n    //Display results\n    cout &lt;&lt; endl\n    &lt;&lt; \"Str1: \" &lt;&lt; str1 &lt;&lt; \" has been copied into str2: \" &lt;&lt; str2 &lt;&lt; endl\n    &lt;&lt; \"y: \" &lt;&lt; y &lt;&lt; endl ;\n\n\n    return 0 ;\n}\n</code></pre>\n"}, {"tags": ["c++", "cuda"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577832433, "post_id": 59548901, "comment_id": 105266956, "body": "I recommend asking 1 question per Question. It leads to more useful answers. I also recommend not asking question 3. requesting books and tutorials on Stack Overflow is forbidden because it has an annoying tendency to result in &quot;My book is better than your book!&quot; flame wars."}, {"owner": {"reputation": 66945, "user_id": 681865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77320b8ddf13954ffb22aa22965d465e?s=128&d=identicon&r=PG&f=1", "display_name": "talonmies", "link": "https://stackoverflow.com/users/681865/talonmies"}, "edited": false, "score": 0, "creation_date": 1577892255, "post_id": 59548901, "comment_id": 105275858, "body": "I don&#39;t understand how questions 1 and 2 are in any way connected to one another.  The answer to 1 is yes, but that in no way provides  information about whether question 2 is possible"}], "answers": [{"tags": [], "owner": {"reputation": 2937, "user_id": 12488509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vr6bR.png?s=128&g=1", "display_name": "bhristov", "link": "https://stackoverflow.com/users/12488509/bhristov"}, "is_accepted": true, "score": -1, "last_activity_date": 1577859921, "last_edit_date": 1577859921, "creation_date": 1577846709, "answer_id": 59549708, "question_id": 59548901, "link": "https://stackoverflow.com/questions/59548901/basic-cuda-c-project-integration-questions/59549708#59549708", "title": "Basic Cuda C++ project integration questions", "body": "<p>I can answer 1. for you. Yes, you can write Cuda code in a .cpp file. You can read more about this <a href=\"https://devblogs.nvidia.com/separate-compilation-linking-cuda-device-code/\" rel=\"nofollow noreferrer\">here</a>. It is mainly about the linking process. I hope that this helps you.</p>\n"}], "owner": {"reputation": 33, "user_id": 5171245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ac429b885f68002103e5ce54e4dea7c?s=128&d=identicon&r=PG&f=1", "display_name": "Linker256", "link": "https://stackoverflow.com/users/5171245/linker256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 59549708, "answer_count": 1, "score": 0, "last_activity_date": 1577892278, "creation_date": 1577831856, "last_edit_date": 1577892278, "question_id": 59548901, "link": "https://stackoverflow.com/questions/59548901/basic-cuda-c-project-integration-questions", "title": "Basic Cuda C++ project integration questions", "body": "<p>I\u2019m very new to CUDA programming. I have an existing C++ project with some algorithms that can be split up into many mutually exclusive parts. </p>\n\n<p>I have a few basic questions:</p>\n\n<ol>\n<li><p>Can you write CUDA code in a .cpp file?</p></li>\n<li><p>If no to 1 above, how to do you pass c++ object to a CUDA function? </p></li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "edited": false, "score": 3, "creation_date": 1577831872, "post_id": 59548884, "comment_id": 105266850, "body": "This has nothing to do, whatsoever, with variables in header files. Dividing 2 by 14 is 0. That&#39;s how integer division works, in C++. If you want a fractional result, you must divide <code>double</code> values in the first place, like <code>2.0</code> by <code>14</code>, or divide <code>2</code> by <code>14.0</code>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 3, "creation_date": 1577832285, "post_id": 59548884, "comment_id": 105266925, "body": "Sidenote: defining variables in headers often leads to different problems at link time. Look up <code>extern</code> in your favorite C++ reference for a discussion of this problem and how to solve it."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577834255, "post_id": 59548884, "comment_id": 105267210, "body": "@user4581301 although <code>const</code> globals have internal linkage in C++ unless you specifically write <code>extern</code>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577834766, "post_id": 59548884, "comment_id": 105267290, "body": "Yet another difference with C. Sad that I&#39;m learning this one now."}], "owner": {"reputation": 881, "user_id": 3084450, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e237874df3740b962eac4ae08d3e43a0?s=128&d=identicon&r=PG&f=1", "display_name": "dominique120", "link": "https://stackoverflow.com/users/3084450/dominique120"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "closed_date": 1577831832, "answer_count": 0, "score": 0, "last_activity_date": 1577831690, "creation_date": 1577831690, "question_id": 59548884, "link": "https://stackoverflow.com/questions/59548884/variables-declared-in-header-cant-be-used-in-main-file", "closed_reason": "Duplicate", "title": "Variables declared in header cant be used in main file?", "body": "<p>I have the following header file: </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\nconst int x = 15;\nconst int y = 15;\nconst double lx = 2 / (x - 1);\nconst double ly = 2 / (y - 1);\n</code></pre>\n\n<p>And the following code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include \"t.h\"\nint main()\n{\n    std::cout &lt;&lt; \"x: \" &lt;&lt; x &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"y: \" &lt;&lt; y &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"lx: \" &lt;&lt; lx &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"ly: \" &lt;&lt; ly &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"lx / 2: \" &lt;&lt; lx / 2 &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"ly / 2: \" &lt;&lt; ly / 2 &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>x: 15\ny: 15\nlx: 0\nly: 0\nlx / 2: 0\nly / 2: 0\n</code></pre>\n\n<p>And for some reason I cant figure out why <code>lx</code> and <code>ly</code> output as <code>0</code> and obviously when I operate with them its also <code>0</code>. What am I doing wrong?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["c#", "c++", "memory"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12493615"}, "reply_to_user": {"reputation": 13408, "user_id": 585968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d0399ab165e17f668b2cdd1a5c1dc0?s=128&d=identicon&r=PG&f=1", "display_name": "MickyD", "link": "https://stackoverflow.com/users/585968/mickyd"}, "edited": false, "score": 0, "creation_date": 1577833066, "post_id": 59548803, "comment_id": 105267068, "body": "@MickyD well , good question , My main reason is speed and security. btw I solved the problem :D"}, {"owner": {"reputation": 13408, "user_id": 585968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d0399ab165e17f668b2cdd1a5c1dc0?s=128&d=identicon&r=PG&f=1", "display_name": "MickyD", "link": "https://stackoverflow.com/users/585968/mickyd"}, "edited": false, "score": 0, "creation_date": 1577836895, "post_id": 59548803, "comment_id": 105267536, "body": "Excellent!  Feel free to post it as an answer and if no other better answers come along, you can accept your own.  Happy New Year! :)"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12493615"}, "edited": false, "score": 0, "creation_date": 1577833189, "post_id": 59548931, "comment_id": 105267083, "body": "Thanks! I found the solution just 2 minutes after posting my question , my process is 64bit but the problem was the bad DllImport of ReadProcessMemory but your answer gave me a better solution to achieve that , <b>Marshal.ReadByte</b>  was the exact thing  I was looking for , answer accepted."}, {"owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "edited": false, "score": 0, "creation_date": 1577841147, "post_id": 59548931, "comment_id": 105267987, "body": "@J.Mcgill Good. Happy new year, BTW."}], "tags": [], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": true, "score": 0, "last_activity_date": 1577832265, "creation_date": 1577832265, "answer_id": 59548931, "question_id": 59548803, "link": "https://stackoverflow.com/questions/59548803/how-to-directly-read-a-vector-data-from-unmanaged-in-managed-code-using-its-poi/59548931#59548931", "title": "how to directly read a vector data from unmanaged in managed code using it&#39;s pointer", "body": "<p>I\u2019m not sure you got your data types right. The code you have now works for 64-bit builds, fails in 32-bit builds. Here\u2018s one way to fix:</p>\n\n<pre><code>[DllExport]\nstatic public void ReadThisVector( IntPtr v_ptr, uint datasize )\n// C++\nReadThisVector( demo_vector_1.data(), (uint32_t)demo_vector_1.size() );\n</code></pre>\n\n<p>Now, on your question \u2014 you can call <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.marshal.readbyte?view=netframework-4.8#System_Runtime_InteropServices_Marshal_ReadByte_System_IntPtr_System_Int32_\" rel=\"nofollow noreferrer\">Marshal.ReadByte</a> for that.</p>\n\n<p>Or, if you have modern .NET and you OK with unsafe code, you can <a href=\"https://docs.microsoft.com/en-us/dotnet/api/system.readonlyspan-1.-ctor?view=netcore-3.1#System_ReadOnlySpan_1__ctor_System_Void__System_Int32_\" rel=\"nofollow noreferrer\">create a <code>ReadOnlySpan&lt;byte&gt;</code></a> from your 2 values. If you need that data for IO, modern .NET has stuff like <code>Stream.Write(ReadOnlySpan&lt;byte&gt;)</code> i.e. streams can write directly from unmanaged buffers without making copies.</p>\n\n<p>Unfortunately, there\u2019s no way to directly cast unmanaged memory into C# array or list. You either need to copy, or change APIs from arrays/lists into spans/pointers.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12493615"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 59548931, "answer_count": 1, "score": 0, "last_activity_date": 1577837012, "creation_date": 1577830649, "last_edit_date": 1577837012, "question_id": 59548803, "link": "https://stackoverflow.com/questions/59548803/how-to-directly-read-a-vector-data-from-unmanaged-in-managed-code-using-its-poi", "title": "how to directly read a vector data from unmanaged in managed code using it&#39;s pointer", "body": "<p>I have a console c++ application creates a vector and assign data to it :</p>\n\n<pre><code>vector&lt;char&gt; demo_vector_1 = {\n        0x54, 0x48, 0x49, 0x53, 0x20, 0x49, 0x53, 0x20, 0x44, 0x45, 0x4D, 0x4F,\n        0x20, 0x44, 0x41, 0x54, 0x41\n};\n</code></pre>\n\n<p>No I have a managed dll with a exported function :</p>\n\n<pre><code>[DllExport]\n static public void ReadThisVector(IntPtr v_ptr,long datasize)\n        {\n           //// Data processing ...\n        }\n</code></pre>\n\n<p>then I call this function in c++ and pass the vector data pointer to my C# code :</p>\n\n<pre><code>ReadThisVector((long)&amp;demo_vector_1[0], demo_vector_1.size());\n</code></pre>\n\n<p>I printed out pointer of vector both in c++ and c# and they match.</p>\n\n<p>Now I need to access and ready some parts of that vector directly from C# code.\nI tried to use ReadProcessMemory but I get Access Violation error.</p>\n\n<p>How can I read vector data directly to a buffer byte array or even better C# List ?\nI don't want to copy anything , just direct access , because my data size will be huge.</p>\n\n<p>c# dll is loaded in console and same process of unmanaged process , so it should access to its memory but how ?</p>\n\n<p>Do I pass the vector pointer in a proper way ?</p>\n\n<p><strong>NOTE:</strong> I don't want to use memory mapped files.</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1577831192, "post_id": 59548784, "comment_id": 105266715, "body": "The <code>vec.assign</code> version is undefined behavior because the iterators refer into what you&#39;re assigning to.  So the second option is better."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1577831691, "post_id": 59548784, "comment_id": 105266807, "body": "Worth seeing if <code>vec = std::vector&lt;int&gt;(vec.begin() + 3, vec.begin() + 5);</code> is a good solution."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1577831761, "post_id": 59548784, "comment_id": 105266824, "body": "Can you guarantee they are sorted (with no additional work)? Otherwise, I was going to say use partition with <a href=\"https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom</a> (and that might still be just as good)"}, {"owner": {"reputation": 1318, "user_id": 12091999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ig8DH.jpg?s=128&g=1", "display_name": "metablaster", "link": "https://stackoverflow.com/users/12091999/metablaster"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1577831924, "post_id": 59548784, "comment_id": 105266861, "body": "@KennyOstrom in most cases yes, vectors need to be sorted, but not always. why? doing additional work to perform sort is not problem in my case. because I need to sort them sooner or later."}], "answers": [{"comments": [{"owner": {"reputation": 1318, "user_id": 12091999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ig8DH.jpg?s=128&g=1", "display_name": "metablaster", "link": "https://stackoverflow.com/users/12091999/metablaster"}, "edited": false, "score": 0, "creation_date": 1577832812, "post_id": 59548937, "comment_id": 105267025, "body": "interesting, but, if I copy (or move) range to beginning of same vector, then the rest of elements will be reallocated anyway, prior to removal? itsn&#39;t this the same as my 2nd option which also reallocates in second <code>erase</code>"}, {"owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "reply_to_user": {"reputation": 1318, "user_id": 12091999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ig8DH.jpg?s=128&g=1", "display_name": "metablaster", "link": "https://stackoverflow.com/users/12091999/metablaster"}, "edited": false, "score": 1, "creation_date": 1577832944, "post_id": 59548937, "comment_id": 105267047, "body": "@metablaster No, the only elements that move are the copied range. The unwanted elements at the start of the vector are overwritten. There&#39;s no reallocation or extra data movement. The single (cheap) <code>erase</code> leaves only the desired values in the vector."}, {"owner": {"reputation": 1318, "user_id": 12091999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ig8DH.jpg?s=128&g=1", "display_name": "metablaster", "link": "https://stackoverflow.com/users/12091999/metablaster"}, "edited": false, "score": 0, "creation_date": 1577833264, "post_id": 59548937, "comment_id": 105267094, "body": "thanks! I find this solution the most effective! verified you comment here: <a href=\"https://stackoverflow.com/questions/14977632/copying-stdvector-prefer-assignment-or-stdcopy\" title=\"copying stdvector prefer assignment or stdcopy\">stackoverflow.com/questions/14977632/&hellip;</a> oh, and happy new year btw.!"}], "tags": [], "owner": {"reputation": 17343, "user_id": 445976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c82b2b9bdcf1baaf4677238d59cf745f?s=128&d=identicon&r=PG", "display_name": "Blastfurnace", "link": "https://stackoverflow.com/users/445976/blastfurnace"}, "is_accepted": true, "score": 2, "last_activity_date": 1577832641, "last_edit_date": 1577832641, "creation_date": 1577832331, "answer_id": 59548937, "question_id": 59548784, "link": "https://stackoverflow.com/questions/59548784/vector-erase-multiple-regions-2-x-erase-vs-single-assign/59548937#59548937", "title": "vector erase multiple regions, 2 x erase vs single assign?", "body": "<p>You can use a single <a href=\"https://en.cppreference.com/w/cpp/algorithm/copy\" rel=\"nofollow noreferrer\"><code>std::copy</code></a> followed by <a href=\"https://en.cppreference.com/w/cpp/container/vector/erase\" rel=\"nofollow noreferrer\"><code>std::vector::erase</code></a>. It's correct and likely uses <code>memcpy</code> or <code>memmove</code> for POD types so it should be fast. Something like:</p>\n\n<pre><code>auto itr = std::copy(vec.begin() + 3, vec.begin() + 5, vec.begin());\nvec.erase(itr, vec.end());\n</code></pre>\n\n<p>If the vector elements are movable you could use the <a href=\"https://en.cppreference.com/w/cpp/algorithm/move\" rel=\"nofollow noreferrer\"><code>std::move</code></a> algorithm instead of <code>std::copy</code>.</p>\n"}], "owner": {"reputation": 1318, "user_id": 12091999, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ig8DH.jpg?s=128&g=1", "display_name": "metablaster", "link": "https://stackoverflow.com/users/12091999/metablaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 59548937, "answer_count": 1, "score": 1, "last_activity_date": 1577832641, "creation_date": 1577830426, "question_id": 59548784, "link": "https://stackoverflow.com/questions/59548784/vector-erase-multiple-regions-2-x-erase-vs-single-assign", "title": "vector erase multiple regions, 2 x erase vs single assign?", "body": "<p>I need to erase 2 ranges of elements from vector, the vector looks like this:</p>\n\n<pre><code>std::vector&lt;int&gt; vec {0, 1, 2, 3, 4, 5, 6, 7};\n</code></pre>\n\n<p>for example I need to keep only numbers 3 and 4. (in reality this could be big objects)</p>\n\n<p>There are 2 options:</p>\n\n<p>1) take target elements and drop the rest:</p>\n\n<pre><code>vec.assign(vec.begin() + 3, vec.begin() + 5);\n</code></pre>\n\n<p>2) explicitly remove ranges:</p>\n\n<pre><code>vec.erase(vec.begin() + 6, vec.end()); // first end (it's cheap)\nvec.erase(vec.begin(), vec.begin() + 3); // then beginning (reallocates elements)\n</code></pre>\n\n<p>Which one of these 2 options will perform faster?</p>\n\n<p>Or is there even better way?</p>\n"}, {"tags": ["c++", "operator-overloading", "decrement", "postfix-operator"], "comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1578017102, "post_id": 59548720, "comment_id": 105312346, "body": "An answer in the cited duplicate <i>does</i> explain that the <code>int</code> argument is a dummy."}], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1577830887, "last_edit_date": 1577830887, "creation_date": 1577830002, "answer_id": 59548751, "question_id": 59548720, "link": "https://stackoverflow.com/questions/59548720/what-is-the-extra-argument-used-for-when-overloading-the-decrement-operator/59548751#59548751", "title": "What is the extra argument used for when overloading the decrement operator?", "body": "<p>Because you're using postfix decrement:</p>\n\n<pre><code> while (i-- &gt; 0)\n</code></pre>\n\n<p>which should decrement <code>i</code> but return the original value:</p>\n\n<pre><code>T operator--(int) // dummy int param for postfix\n{\n    T temp = value;\n    value -= 1;\n    return temp;\n}\n</code></pre>\n\n<p>the dummy <code>int</code> parameter is just a placeholder to distinguish between postfix and the prefix decrement:</p>\n\n<pre><code>T operator--() // no param for prefix\n{\n    value -= 1;\n    return value;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1577830440, "post_id": 59548777, "comment_id": 105266601, "body": "What does the ISO C++ standard say on this? I&#39;m not using Microsoft&#39;s compiler."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 1, "creation_date": 1577830696, "post_id": 59548777, "comment_id": 105266645, "body": "@JL2210 C++ standard agrees--this is a core aspect of the language. I was just lazy and chose MS since they were high on the google list. I&#39;ve edited to use cppreference though, which is probably a better source anyways."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1577896837, "post_id": 59548777, "comment_id": 105276931, "body": "Can I accept another answer? Some of the others go into slightly more detail."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1577904732, "post_id": 59548777, "comment_id": 105278965, "body": "@JL2 the system will let you unaccept mine and accept another if you feel another answer better answers your question/solves your problem. You don&#39;t need my permission! :)"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1577905282, "post_id": 59548777, "comment_id": 105279101, "body": "OK. Just didn&#39;t want to make anybody mad."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 1, "last_activity_date": 1577831186, "last_edit_date": 1577831186, "creation_date": 1577830315, "answer_id": 59548777, "question_id": 59548720, "link": "https://stackoverflow.com/questions/59548720/what-is-the-extra-argument-used-for-when-overloading-the-decrement-operator/59548777#59548777", "title": "What is the extra argument used for when overloading the decrement operator?", "body": "<p>From <a href=\"https://en.cppreference.com/w/cpp/language/operator_incdec\" rel=\"nofollow noreferrer\">cppreference</a>:</p>\n\n<blockquote>\n  <p>The <code>int</code> parameter is a dummy parameter used to differentiate between prefix and postfix versions of the operators. When the user-defined postfix operator is called, the value passed in that parameter is always zero, although it may be changed by calling the operator using function call notation (e.g., <code>a.operator++(2)</code> or <code>operator++(a, 2)</code>).</p>\n</blockquote>\n\n<p>Though I would highly advise against making functionality around those explicit calls (as to anyone else it'll look extremely weird).</p>\n"}, {"comments": [{"owner": {"reputation": 4392, "user_id": 7098259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b6nWr.jpg?s=128&g=1", "display_name": "Patrick Parker", "link": "https://stackoverflow.com/users/7098259/patrick-parker"}, "edited": false, "score": 0, "creation_date": 1577862010, "post_id": 59549289, "comment_id": 105269995, "body": "does this mean that a slight additional overhead is incurred by calling <code>my++</code> versus <code>++my</code>?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 4392, "user_id": 7098259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/b6nWr.jpg?s=128&g=1", "display_name": "Patrick Parker", "link": "https://stackoverflow.com/users/7098259/patrick-parker"}, "edited": false, "score": 0, "creation_date": 1577869692, "post_id": 59549289, "comment_id": 105271118, "body": "@PatrickParker yes, due to the extra parameter being pushed/popped on the call stack, and also because post-increment also returns a copy of the old value before it was incremented. Pre-increment returns a reference to the incremented value, not a copy"}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 2, "last_activity_date": 1577838366, "creation_date": 1577838366, "answer_id": 59549289, "question_id": 59548720, "link": "https://stackoverflow.com/questions/59548720/what-is-the-extra-argument-used-for-when-overloading-the-decrement-operator/59549289#59549289", "title": "What is the extra argument used for when overloading the decrement operator?", "body": "<p>There are two separate but related overloads of <code>operator++</code> - <a href=\"https://en.cppreference.com/w/cpp/language/operator_incdec\" rel=\"nofollow noreferrer\">pre-increment and post-increment</a>.  Both are overridable.  Since they both have the same name, the designers of C++ had to decide on a syntax to let the compiler differentiate between them.  They chose to use a dummy <code>int</code> parameter on the post-increment operator.</p>\n\n<p>When you write code like this:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>wrap&lt;int&gt; i(5);\n++i; // &lt;-- calls i.operator++();\n</code></pre>\n\n<p>The compiler emits code to call the parameter-less <code>operator++()</code>.</p>\n\n<p>When you write code like this instead:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>wrap&lt;int&gt; i(5);\ni++; // &lt;-- calls i.operator++(0);\n</code></pre>\n\n<p>The compiler emits code to call the parametered <code>operator++(int)</code>, passing <code>0</code> for the dummy parameter.</p>\n\n<p>The <em>value</em> of the parameter is meaningless, its mere presence is enough to let each overload of <code>operator++</code> be overriden individually since they have different signatures.</p>\n\n<p>BTW, the same rules apply to the pre/post-decrement <code>operator--</code> as well.</p>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1577845143, "creation_date": 1577845143, "answer_id": 59549633, "question_id": 59548720, "link": "https://stackoverflow.com/questions/59548720/what-is-the-extra-argument-used-for-when-overloading-the-decrement-operator/59549633#59549633", "title": "What is the extra argument used for when overloading the decrement operator?", "body": "<p>Every ratified ANSI and ISO C++ standard, and every working draft, describes this, although the precise wording changes between versions.</p>\n\n<p>For example, according to the \"Working Draft, Standard for Programming Language C++\", document number N4659, dated 2017-03-21, Section 16.5.7 \"Increment and decrement [over.inc]\", para 1</p>\n\n<blockquote>\n  <p>The user-defined function called <code>operator++</code> implements the prefix and postfix <code>++</code> operator. If this function is a non-static member function with no parameters, or a non-member function with one parameter, it defines the prefix increment operator <code>++</code> for objects of that type. If the function is a non-static member function with one parameter (which shall be of type int) or a non-member function with two parameters (the second\n  of which shall be of type int), it defines the postfix increment operator <code>++</code> for objects of that type. When the postfix increment is called as a result of using the <code>++</code> operator, the int argument will have value zero.</p>\n</blockquote>\n\n<p>At the end of the preceding para, there is a reference to footnote 134, which says</p>\n\n<blockquote>\n  <p>Calling <code>operator++</code> explicitly, as in expressions like <code>a.operator++(2)</code>, has no special properties: The argument to <code>operator++</code> is <code>2</code>.</p>\n</blockquote>\n\n<p>After para 1, the standard even provides an example.</p>\n\n<blockquote>\n  <p>[ <em>Example:</em></p>\n\n<pre><code>struct X {\n    X&amp; operator++(); // prefix ++a\n    X operator++(int); // postfix a++\n};\n\nstruct Y { };\n  Y&amp; operator++(Y&amp;); // prefix ++b\n  Y operator++(Y&amp;, int); // postfix b++\n\nvoid f(X a, Y b) {\n    ++a; // a.operator++();\n    a++; // a.operator++(0);\n    ++b; // operator++(b);\n    b++; // operator++(b, 0);\n\n    a.operator++(); // explicit call: like ++a;\n      a.operator++(0); // explicit call: like a++;\n      operator++(b); // explicit call: like ++b;\n      operator++(b, 0); // explicit call: like b++;\n}\n</code></pre>\n  \n  <p>\u2014 <em>end example</em> ]</p>\n</blockquote>\n\n<p>Para 2 then goes on to say</p>\n\n<blockquote>\n  <p>The prefix and postfix decrement operators <code>--</code> are handled analogously.</p>\n</blockquote>\n"}], "owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "closed_date": 1577862493, "accepted_answer_id": 59549289, "answer_count": 4, "score": -1, "last_activity_date": 1578019182, "creation_date": 1577829620, "last_edit_date": 1578019182, "question_id": 59548720, "link": "https://stackoverflow.com/questions/59548720/what-is-the-extra-argument-used-for-when-overloading-the-decrement-operator", "closed_reason": "Duplicate", "title": "What is the extra argument used for when overloading the decrement operator?", "body": "<p>When I overload the post-decrement operator, I have to include a extra argument:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\ntemplate&lt;class T&gt;\nclass wrap\n{\npublic:\n    bool operator &gt;(T &amp;&amp;v)\n    {\n        return value &gt; v;\n    }\n    T operator --(int v) // Remove 'int v' and you get a compilation error\n    {\n        return (value -= 1) + 1;\n    }\n    wrap(T v)\n    {\n        value = v;\n    }\nprivate:\n    T value;\n};\n\nint main(void)\n{\n    wrap&lt;int&gt; i(5);\n    while(i --&gt; 0)\n        std::cout &lt;&lt; \"Why do we need the extra argument?\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>If I remove this seemingly unneeded argument, I get a compilation error:</p>\n\n<blockquote>\n<pre><code>test.cpp: In function \u2018int main()\u2019:\ntest.cpp:26:13: error: no \u2018operator--(int)\u2019 declared for postfix \u2018--\u2019 [-fpermissive]\n     while(i --&gt; 0)\n           ~~^~\n</code></pre>\n</blockquote>\n\n<p>What is this argument used for? What does its value represent?</p>\n"}, {"tags": ["c++", "casting", "c++17"], "comments": [{"owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577822019, "post_id": 59547953, "comment_id": 105265003, "body": "@RemyLebeau hence there is no benfit for <code>as::const</code> except for preventing any function from changing the value of the variable."}, {"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 1, "creation_date": 1577822104, "post_id": 59547953, "comment_id": 105265021, "body": "@anonymous: The benefits of <code>as_const</code> have nothing to do with declaring arrays or anything to do with constant expressions."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577822122, "post_id": 59547953, "comment_id": 105265024, "body": "<code>std::as_const</code> simply returns a <code>const</code> reference to a non-const variable.  It doesn&#39;t magically make the variable itself <code>const</code>"}, {"owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577822385, "post_id": 59547953, "comment_id": 105265072, "body": "@RemyLebeau Thanks"}, {"owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577823259, "post_id": 59547953, "comment_id": 105265253, "body": "@RemyLebeau why didn&#39;t you post your comment as an answer."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577823543, "post_id": 59547953, "comment_id": 105265331, "body": "@anonymous I have now"}, {"owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "edited": false, "score": 0, "creation_date": 1577839396, "post_id": 59547953, "comment_id": 105267796, "body": "What\u2019s <code>static_const</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "edited": false, "score": 0, "creation_date": 1577822877, "post_id": 59548076, "comment_id": 105265179, "body": "This doesn&#39;t answer my question. The answer has given by @RemyLebeau as a comment but he didn&#39;t post it. This doesn&#39;t convert from nonconstant to constant var"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "edited": false, "score": 0, "creation_date": 1577823449, "post_id": 59548076, "comment_id": 105265308, "body": "@anonymous I have posted an answer now"}, {"owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "edited": false, "score": 0, "creation_date": 1577826619, "post_id": 59548076, "comment_id": 105265943, "body": "The answer to the OP&#39;s question is: &quot;No. <code>static_const&lt;size_t&gt;()</code>, <code>std::as_const()</code> or <code>static_cast&lt;const size_t&gt;()</code> cannot be used to declare an array&quot;."}], "tags": [], "owner": {"reputation": 13563, "user_id": 992490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac727873c5724326c84ed245faa9fe6c?s=128&d=identicon&r=PG", "display_name": "Marshall Clow", "link": "https://stackoverflow.com/users/992490/marshall-clow"}, "is_accepted": false, "score": 0, "last_activity_date": 1577822685, "creation_date": 1577822685, "answer_id": 59548076, "question_id": 59547953, "link": "https://stackoverflow.com/questions/59547953/can-static-constsize-t-stdas-const-or-static-castconst-size-t-be-us/59548076#59548076", "title": "Can static_const&lt;size_t&gt;(), std::as_const() or static_cast&lt;const size_t&gt;() be used to declare an array?", "body": "<p>Ok, let's look at an updated bit of code - that actually compiles:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    constexpr size_t j{8};\n\n    char arr[j]={'t'};\n\n    arr[7]='\\0';\n    std::cout&lt;&lt;arr;\n\n    return 0;\n}\n</code></pre>\n\n<p><code>j</code> is now a compile-time constant, suitable for using to size a built-in array.</p>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1577823432, "creation_date": 1577823432, "answer_id": 59548158, "question_id": 59547953, "link": "https://stackoverflow.com/questions/59547953/can-static-constsize-t-stdas-const-or-static-castconst-size-t-be-us/59548158#59548158", "title": "Can static_const&lt;size_t&gt;(), std::as_const() or static_cast&lt;const size_t&gt;() be used to declare an array?", "body": "<p>None of your 3 examples are <strong>constants at compile-time</strong>, because <code>j</code> is <strong>not assigned a value until runtime</strong>. No amount of <em>casting</em> <code>j</code> will change that.</p>\n\n<p>To assign <code>j</code> at compile-time, you need to declare it as <code>const</code> (or <code>constexpr</code> in C++11 and later) and then you can use <code>j</code> as-is for declaring the array:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main()\n{\n    const size_t j{8};\n    // or: constexpr size_t j{8};\n\n    char arr[j]={'t'};\n\n    arr[7]='\\0';\n    std::cout&lt;&lt;arr;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 59548158, "answer_count": 2, "score": 1, "last_activity_date": 1577823432, "creation_date": 1577821537, "question_id": 59547953, "link": "https://stackoverflow.com/questions/59547953/can-static-constsize-t-stdas-const-or-static-castconst-size-t-be-us", "title": "Can static_const&lt;size_t&gt;(), std::as_const() or static_cast&lt;const size_t&gt;() be used to declare an array?", "body": "<p>I tried the three successive lines (each one of them alone) but no one of them worked.\nWhy??</p>\n\n<pre><code>int main()\n{\n    size_t j{8};\n\n\n    char arr[static_cast&lt;const size_t&gt;(j)]={'t'};\n    char arr[static_const&lt;size_t&gt;(j)]={'t'};\n    char arr[std::as_const(j)]={'t'};\n\n\n    arr[7]='\\0';\n    std::cout&lt;&lt;arr;\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5868, "user_id": 3270037, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6HVI4.png?s=128&g=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/3270037/nick"}, "edited": false, "score": 0, "creation_date": 1577820747, "post_id": 59547840, "comment_id": 105264746, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/5131647/why-would-we-call-cin-clear-and-cin-ignore-after-reading-input\">Why would we call cin.clear() and cin.ignore() after reading input?</a>"}, {"owner": {"reputation": 983, "user_id": 289379, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PnUjF.jpg?s=128&g=1", "display_name": "patemotter", "link": "https://stackoverflow.com/users/289379/patemotter"}, "edited": false, "score": 0, "creation_date": 1577820804, "post_id": 59547840, "comment_id": 105264759, "body": "I would check here for more reasoning. <a href=\"https://stackoverflow.com/questions/25475384/when-and-why-do-i-need-to-use-cin-ignore-in-c\">When and why do I need to use cin.ignore in c</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577821990, "post_id": 59547840, "comment_id": 105264997, "body": "In general <code>ignore</code> after the operation that leaves unwanted data in the stream, not before the next operation. If you <code>ignore</code> before in case there is unwanted data in the stream, sooner or later you will ignore data you want because there was nothing in the stream that you didn&#39;t. Getting more general, if you keep related operations close together the intent of the code becomes more obvious and easier to work with."}], "answers": [{"tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 1, "last_activity_date": 1577821394, "creation_date": 1577821394, "answer_id": 59547939, "question_id": 59547840, "link": "https://stackoverflow.com/questions/59547840/better-method-rather-than-using-cin-ignore-in-c/59547939#59547939", "title": "better method rather than using cin.ignore in c++", "body": "<p>Move it out of the loop</p>\n\n<pre><code>int test;\ncin &gt;&gt; test;\ncin.ignore(256, '\\n');\nwhile (test--)\n{\n    string check;\n    getline(cin, check);\n    checkPangram(check, check.size());\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 3, "last_activity_date": 1577821597, "creation_date": 1577821597, "answer_id": 59547960, "question_id": 59547840, "link": "https://stackoverflow.com/questions/59547840/better-method-rather-than-using-cin-ignore-in-c/59547960#59547960", "title": "better method rather than using cin.ignore in c++", "body": "<p>You can simply call <code>cin.ignore()</code> before entering the loop:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int test;\nif (cin &gt;&gt; test)\n{\n    cin.ignore(numeric_limits&lt;streamsize&gt;::max(), '\\n');\n    while (test--)\n    {\n        string check;\n        getline(cin, check);\n        checkPangram(check, check.size());\n    }\n}\n</code></pre>\n\n<p>Alternatively, you could use <code>std::getline()</code> for all of the input, using a <code>std::istringstream</code> to read <code>test</code> from the 1st line:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int test;\nstring check;\n\ngetline(cin, check);\nistringstream iss(check); \n\nif (iss &gt;&gt; test)\n{\n    if (test--)\n    {\n        getline(iss, check);\n        checkPangram(check, check.size());\n\n        while (test--)\n        {\n            getline(cin, check);\n            checkPangram(check, check.size());\n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 74, "user_id": 12633514, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-tjSJr5gmcqQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd4Et4qPArFfFd7BNyCQrGVFCqIrQ/photo.jpg?sz=128", "display_name": "Deepanshu Singh", "link": "https://stackoverflow.com/users/12633514/deepanshu-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 59547960, "answer_count": 2, "score": -2, "last_activity_date": 1577821597, "creation_date": 1577820538, "last_edit_date": 1577820588, "question_id": 59547840, "link": "https://stackoverflow.com/questions/59547840/better-method-rather-than-using-cin-ignore-in-c", "title": "better method rather than using cin.ignore in c++", "body": "<pre><code>int test, flag = 0;\ncin &gt;&gt; test;\nwhile (test--)\n{\n    if (flag == 0)\n        cin.ignore(256, '\\n'); // using because of whitespace reading due to cin\n    string check;\n    getline(cin, check);\n    checkPangram(check, check.size());\n    flag++;\n}\n</code></pre>\n\n<p>If i remove line 4 then this program does't read few test cases string, so i used flag value to execute line 4 only once in starting.\nif you can help me find for any general method, to read string(with spaces) so that i can read even after cin or getline without any loss of input</p>\n"}, {"tags": ["c++", "qt", "embedded-resource"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1577819351, "post_id": 59547667, "comment_id": 105264456, "body": "Why can&#39;t you load the image directly into the <code>QPixmap</code>? There is a constructor which accepts a file path and image type: <a href=\"https://doc.qt.io/qt-5/qpixmap.html#QPixmap-2\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qpixmap.html#QPixmap-2</a>. Also, <a href=\"https://doc.qt.io/qt-5/qpixmap.html#load\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qpixmap.html#load</a> and <a href=\"https://doc.qt.io/qt-5/qpixmap.html#loadFromData\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qpixmap.html#loadFromData</a>."}, {"owner": {"reputation": 119, "user_id": 10593408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7tHm.jpg?s=128&g=1", "display_name": "ImTheSquid", "link": "https://stackoverflow.com/users/10593408/imthesquid"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1577823787, "post_id": 59547667, "comment_id": 105265389, "body": "While I would like to do that, the problem is that I do not want to be dependent on any filesystem structure. Those methods would link me to an absolute path (unless there is a way to load files from a VS solution that would work as an EXE)."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1577824645, "post_id": 59547667, "comment_id": 105265573, "body": "I mentioned the <code>loadFromData</code> function above because it looks like it initializes the <code>QPixmap</code> from a <code>char</code> buffer which would decouple how the data is retrieved from how it is loaded into the <code>QPixmap</code>."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 10593408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7tHm.jpg?s=128&g=1", "display_name": "ImTheSquid", "link": "https://stackoverflow.com/users/10593408/imthesquid"}, "edited": false, "score": 0, "creation_date": 1577826552, "post_id": 59548380, "comment_id": 105265930, "body": "I tried your solution, but sadly it didn&#39;t work. It might be because of missing header information, but I&#39;m not sure. When I tried saving my images without adding the proper header information, I just got an empty file. The modified method just returns an empty pixmap."}, {"owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "reply_to_user": {"reputation": 119, "user_id": 10593408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7tHm.jpg?s=128&g=1", "display_name": "ImTheSquid", "link": "https://stackoverflow.com/users/10593408/imthesquid"}, "edited": false, "score": 1, "creation_date": 1577832598, "post_id": 59548380, "comment_id": 105266987, "body": "oh actually rc.exe is stripping the header. See here: <a href=\"https://devblogs.microsoft.com/oldnewthing/20091211-00/?p=15693\" rel=\"nofollow noreferrer\">devblogs.microsoft.com/oldnewthing/20091211-00/?p=15693</a> so make the resource type RCDATA not bitmap and everythign should work"}], "tags": [], "owner": {"reputation": 3035, "user_id": 1413244, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BaB5H.png?s=128&g=1", "display_name": "jwezorek", "link": "https://stackoverflow.com/users/1413244/jwezorek"}, "is_accepted": true, "score": 2, "last_activity_date": 1577984898, "last_edit_date": 1577984898, "creation_date": 1577825703, "answer_id": 59548380, "question_id": 59547667, "link": "https://stackoverflow.com/questions/59547667/convert-lpvoid-bitmap-pointer-to-qpixmap/59548380#59548380", "title": "Convert LPVOID bitmap pointer to QPixmap", "body": "<p>You can use QPixmap::loadFromData(...) to create a QPixmap from bytes in bmp format, but you also need to not declare the resource as \"BITMAP\" in the .rc file. </p>\n\n<p>Bitmap resources are intended to be used with <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-loadbitmapa\" rel=\"nofollow noreferrer\">LoadBitmap(...)</a> or <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-loadimagea\" rel=\"nofollow noreferrer\">LoadImage(...)</a> and are stored in the .exe with the bitmap header stripped off. (<a href=\"https://devblogs.microsoft.com/oldnewthing/20091211-00/?p=15693\" rel=\"nofollow noreferrer\">Raymond Chen discusses this here</a>) Since you are not using LoadBitmap  set the type of the resources to be arbitrary binary data, e.g.</p>\n\n<pre><code>IDB_BITMAP1 RCDATA \"E:\\\\Downloads\\\\onIcon.bmp\"\n</code></pre>\n\n<p>and then implement your image loading routine as below:</p>\n\n<pre><code>QPixmap* GUIMain::loadImage(int name) {\n\n    // ...\n\n    HGLOBAL rcData = LoadResource(NULL, rc);\n    LPVOID data = LockResource(rcData);\n    DWORD data_size = SizeofResource(NULL, rc);\n\n    QPixmap* pm = new QPixmap();\n    pm-&gt;loadFromData( static_cast&lt;uchar*&gt;(data), data_size, \"bmp\");\n\n    return pm;\n}\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 10593408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7tHm.jpg?s=128&g=1", "display_name": "ImTheSquid", "link": "https://stackoverflow.com/users/10593408/imthesquid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 59548380, "answer_count": 1, "score": 1, "last_activity_date": 1577984898, "creation_date": 1577818906, "question_id": 59547667, "link": "https://stackoverflow.com/questions/59547667/convert-lpvoid-bitmap-pointer-to-qpixmap", "title": "Convert LPVOID bitmap pointer to QPixmap", "body": "<p>I am trying to load in a BMP image from a resources folder into a QPixmap object. However, I can't read the bytes even though rewriting those bytes to a new file makes a correct copy of the original. Here is my loading method:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>QPixmap* GUIMain::loadImage(int name) {\n    // Resource loading, works fine\n    HRSRC rc = FindResource(NULL, MAKEINTRESOURCE(name), RT_BITMAP);\n\n    if (rc == NULL) {\n        printf(\"INVALID RESOURCE ADDRESS (%i)\\n\", name);\n        return new QPixmap();\n    }\n\n    HGLOBAL rcData = LoadResource(NULL, rc);\n    LPVOID data = LockResource(rcData);\n    DWORD data_size = SizeofResource(NULL, rc);\n\n    // Rewrite file to new file, works fine\n    ofstream output(\"E:\\\\\" + to_string(name) + \".bmp\", std::ios::binary);\n    BITMAPFILEHEADER bfh = { 'MB', 54 + data_size, 0, 0, 54 };\n    output.write((char*)&amp;bfh, sizeof(bfh));\n    output.write((char*)data, data_size);\n    output.close();\n\n    // Need to return, can't get bytes working\n    return new QPixmap(/*?*/);\n}\n</code></pre>\n\n<p>This method is called with the definitions from the <code>resource.h</code> file.</p>\n\n<p>I have tried to use a <code>stringstream</code> with the same calls as the <code>ofstream</code>, followed by using that stream as a source for the <code>QPixmap</code>, but the stream didn't produce the same output.</p>\n\n<p>Here are the relevant parts of my <code>resource.h</code> file:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#define IDB_BITMAP1                     101\n#define IDB_BITMAP2                     102\n</code></pre>\n\n<p>Here is my <code>Resource.rc</code> file:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>IDB_BITMAP1             BITMAP                  \"E:\\\\Downloads\\\\onIcon.bmp\"\n\nIDB_BITMAP2             BITMAP                  \"E:\\\\Downloads\\\\offIcon.bmp\"\n</code></pre>\n\n<p>I know I should be using the Qt tools for resource management, but I don't have the capabilities to do so.</p>\n"}, {"tags": ["c++", "dictionary", "hashmap"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 2, "creation_date": 1577817754, "post_id": 59547530, "comment_id": 105264125, "body": "Can you elaborate on your criteria for a &quot;match?&quot; Namely, can you give more examples of good and bad matches?"}, {"owner": {"reputation": 57, "user_id": 9044538, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861401610566625/picture?type=large", "display_name": "Jo&#227;o Almeida", "link": "https://stackoverflow.com/users/9044538/jo%c3%a3o-almeida"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577818001, "post_id": 59547530, "comment_id": 105264175, "body": "@scohe001 the vector <code>magazineWords</code> must have all the elements of <code>noteWords</code> to match"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577818283, "post_id": 59547530, "comment_id": 105264245, "body": "So if in your example, you&#39;re showing that <code>magazineWords</code> must have all of the elements of <code>noteWords</code> and those elements must appear at least as many times as they do in <code>noteWords</code>. Is that correct?"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "edited": false, "score": 0, "creation_date": 1577818507, "post_id": 59547530, "comment_id": 105264293, "body": "If a key is already present, inserting a new pair with the same key will not change the map. Instead, use the iterator to access the pair and increment its count."}, {"owner": {"reputation": 57, "user_id": 9044538, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861401610566625/picture?type=large", "display_name": "Jo&#227;o Almeida", "link": "https://stackoverflow.com/users/9044538/jo%c3%a3o-almeida"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577818611, "post_id": 59547530, "comment_id": 105264312, "body": "@scohe001 correct, so if <code>noteWords = {&quot;two&quot;, &quot;times&quot;, &quot;two&quot;, &quot;is&quot;, &quot;four&quot;}</code>, then <code>magazineWords</code> MUST have two <code>twos</code> to match."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1577818775, "post_id": 59547530, "comment_id": 105264347, "body": "If noteWords has all of the words of magazineWords with the proper count and some extra words does it match? If magazineWords has two occurrences of &quot;two&quot; and noteWords has three occurrences does it match?"}, {"owner": {"reputation": 57, "user_id": 9044538, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861401610566625/picture?type=large", "display_name": "Jo&#227;o Almeida", "link": "https://stackoverflow.com/users/9044538/jo%c3%a3o-almeida"}, "reply_to_user": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1577819097, "post_id": 59547530, "comment_id": 105264412, "body": "@RetiredNinja it does not. <code>magazineWords</code> must have the same or more occurrences of an element in <code>noteWords</code>"}], "answers": [{"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": true, "score": 1, "last_activity_date": 1577819128, "creation_date": 1577819128, "answer_id": 59547687, "question_id": 59547530, "link": "https://stackoverflow.com/questions/59547530/find-number-of-occurrences-in-a-map-c/59547687#59547687", "title": "Find number of occurrences in a map C++", "body": "<p>There's a far easier way! The subscript operator on a map will try to find the key in the map. If it is successful, it returns a reference to its value. Otherwise, it creates a new key/value pair for you on the spot and gives you a reference to <em>its</em> value.</p>\n\n<p>So since the default value of an <code>int</code> will be 0 (that is, when we create a new key/value pair, the value will be 0), all your work can actually just be:</p>\n\n<pre><code>bool checkMagazine(vector&lt;string&gt; magazineWords, vector&lt;string&gt; noteWords)\n{\n    map&lt;string, int&gt; bank;\n\n    //populating the map\n    for (string magazineWord : magazineWords) {\n        ++bank[magazineWord];\n    }\n\n    //checking for correspondences\n    for (string noteWord : noteWords) {\n        if(--bank[noteWord] &lt; 0) { return false; }\n    }\n\n    return true;\n}\n</code></pre>\n\n<p>Watch it run here: <a href=\"https://ideone.com/MzLAJM\" rel=\"nofollow noreferrer\">https://ideone.com/MzLAJM</a></p>\n"}], "owner": {"reputation": 57, "user_id": 9044538, "user_type": "registered", "profile_image": "https://graph.facebook.com/1861401610566625/picture?type=large", "display_name": "Jo&#227;o Almeida", "link": "https://stackoverflow.com/users/9044538/jo%c3%a3o-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 59547687, "answer_count": 1, "score": 0, "last_activity_date": 1577820798, "creation_date": 1577817637, "last_edit_date": 1577817826, "question_id": 59547530, "link": "https://stackoverflow.com/questions/59547530/find-number-of-occurrences-in-a-map-c", "title": "Find number of occurrences in a map C++", "body": "<p>I am trying to create a map in C++ and I will use it to compare wheater a vector of string match another one. The condition is that only one word can be taken into consideration. For example, given:</p>\n\n<pre><code>{\"two\", \"times\", \"three\", \"is\", \"not\", \"four\"}\n{\"two\", \"times\", \"two\", \"is\", \"four\"}\n</code></pre>\n\n<p>In this case they shouldn't match because there is only one <code>\"two\"</code> in the first vector.</p>\n\n<p>My code is as follows:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;map&gt;\n\nusing namespace std;\n\nvoid checkMagazine(vector&lt;string&gt; magazineWords, vector&lt;string&gt; noteWords)\n{\n    map&lt;string, int&gt; magazine;\n    map&lt;string, int&gt;::iterator it = magazine.begin();\n\n    //populating the map\n    for (string magazineWordString : magazineWords)\n    {\n        it = magazine.find(magazineWordString);\n\n        if (it != magazine.end())\n        {\n            int numberOfOccurences = it-&gt;second;\n            magazine.insert(pair&lt;string, int&gt;(magazineWordString, numberOfOccurences + 1));\n        }\n        else\n        {\n            magazine.insert(pair&lt;string, int&gt;(magazineWordString, 1));\n        }\n    }\n\n    //checking for correspondences\n    for (string noteWordString : noteWords)\n    {\n        it = magazine.find(noteWordString);\n\n        if (it != magazine.end())\n        {\n            int numOfOccurences = it-&gt;second;\n            magazine.insert(pair&lt;string, int&gt;(noteWordString, numOfOccurences - 1));\n        }\n        else\n        {\n            cout &lt;&lt; \"There is no match.\" &lt;&lt; endl;\n            return;\n        }\n    }\n\n    cout &lt;&lt; \"There is a match!\" &lt;&lt; endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "dictionary"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577816838, "post_id": 59547435, "comment_id": 105263885, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/59546002/how-to-insert-first-maps-data-to-another-when-the-user-enter-a-value-which-is-i\">How to insert first map&#39;s data to another when the user enter a value which is in the first map?</a>"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577816881, "post_id": 59547435, "comment_id": 105263897, "body": "Please don&#39;t re-post your questions. Instead, edit and improve the old question. It&#39;ll get nominated to be reopen and thrown into the queue to be looked at by other users so they can vote on it."}, {"owner": {"reputation": 199, "user_id": 12543764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe795153166f4d734b5f3d7d9168877?s=128&d=identicon&r=PG&f=1", "display_name": "sonelektrikci", "link": "https://stackoverflow.com/users/12543764/sonelektrikci"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577817024, "post_id": 59547435, "comment_id": 105263930, "body": "I editted the question but it&#39;s closed. They say:  <code>Add details and clarify the problem you\u2019re solving. This will help others answer the question. You can edit the question or post a new one.</code>"}], "owner": {"reputation": 199, "user_id": 12543764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe795153166f4d734b5f3d7d9168877?s=128&d=identicon&r=PG&f=1", "display_name": "sonelektrikci", "link": "https://stackoverflow.com/users/12543764/sonelektrikci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577816789, "creation_date": 1577816789, "question_id": 59547435, "link": "https://stackoverflow.com/questions/59547435/how-to-insert-first-maps-data-to-another-map", "title": "How to insert first map&#39;s data to another map?", "body": "<p>Here is my code: </p>\n\n<pre><code>void Schedule::studentSchedule()\n{\n    string c,s;\n    int courseNum;\n    list&lt;string&gt;::iterator studentLoc; // this is my student list. I am searching s from this list.\n    map&lt;string,map&lt;string,pair&lt;string,Array&gt; &gt; &gt;::iterator last;//first string s = student name,second string c=course name,third string day,Array type = day hours\n    map&lt;pair&lt;string,int&gt;,pair&lt;string,Array&gt; &gt;::iterator location;//first string c= course name,second string day,Array type = day hours\n    //What I want to do is gets the data from location iterator's map(getMatchMap()) and insert the last iterator's map.(getCourseScList())\n\n    dummy1:\n    cout&lt;&lt;\"Enter the student name\"&lt;&lt;endl;\n    cin &gt;&gt; s;\n    cout&lt;&lt;\"Enter the course names you want\"&lt;&lt;endl;\n    cin&gt;&gt;c;\n    auto predicate = [&amp;](auto&amp; course) { return compareName(course, c); };\n    studentLoc = find(getStudentList().begin(),getStudentList().end(),s);\n    location = find_if(getMatchMap().begin(), getMatchMap().end(), predicate);\n\n    if(studentLoc != getStudentList().end() || location != getMatchMap().end())\n    {\n        getCourseScList().insert(s,{c,{}});\n        //How can I get the same data when I input the course name. I mean how can I get the data from getMatchMap() \n        //with the same information\n    }\n</code></pre>\n\n<p>I commented the code as possible i can. </p>\n\n<p>For example : </p>\n\n<p>If I had a Programming course data like this in the matchMap map :</p>\n\n<pre><code>Programming ---&gt; Monday ---&gt; 1 1 1 1 0 0 \n</code></pre>\n\n<p>How can I get the data to courseScList(getCourseScList()):</p>\n\n<pre><code>'Student name I enter' ---&gt; Programming --&gt; Monday ---&gt; 1 1 1 1 0 0 \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "edited": false, "score": 0, "creation_date": 1577816766, "post_id": 59547407, "comment_id": 105263867, "body": "<code>n</code> is a pointer to pointer to int thus de-referencing address of <code>n</code>  you get the value in <code>n</code> which is pointer <code>p</code>. But what is the point in doing so? <code>cout &lt;&lt; *&amp;x;</code>  even being correct but there is no point there."}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 3, "creation_date": 1577816775, "post_id": 59547407, "comment_id": 105263871, "body": "Is there a reason you haven&#39;t checked with your compiler&#39;s C++ language reference to see what each operator does?"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 1, "creation_date": 1577817126, "post_id": 59547407, "comment_id": 105263965, "body": "Read <a href=\"https://en.cppreference.com/w/c/language/operator_member_access\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/operator_member_access</a>"}, {"owner": {"reputation": 27, "user_id": 8344575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2-F8k8cGYAM/AAAAAAAAAAI/AAAAAAAAA7Q/J61FAUx3_Eo/photo.jpg?sz=128", "display_name": "Hasan Parasteh", "link": "https://stackoverflow.com/users/8344575/hasan-parasteh"}, "reply_to_user": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "edited": false, "score": 0, "creation_date": 1577817549, "post_id": 59547407, "comment_id": 105264079, "body": "@ThomasSablik Thanks man"}], "answers": [{"comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577819933, "post_id": 59547488, "comment_id": 105264577, "body": "The explanation for <code>*n</code> and <code>&amp;n</code> is only true for primitives (like in the given question), for instance of an object, it might be different, as the behavior of <code>&amp;</code> and <code>*</code> can be overwritten."}], "tags": [], "owner": {"reputation": 1325, "user_id": 12447766, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-8u4KF2jS0Fk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdQ51MyoIeOHM14pz1QnUu7L-8N_Q/photo.jpg?sz=128", "display_name": "Burak", "link": "https://stackoverflow.com/users/12447766/burak"}, "is_accepted": false, "score": 0, "last_activity_date": 1577817480, "last_edit_date": 1577817480, "creation_date": 1577817207, "answer_id": 59547488, "question_id": 59547407, "link": "https://stackoverflow.com/questions/59547407/what-does-n-mean-in-double-pointer-c/59547488#59547488", "title": "What does &quot;*&amp;n&quot; mean in double-pointer c++?", "body": "<pre><code>#include &lt;iostream&gt;\n\nint main()\n{\n    int x = 5;\n    int* p = &amp;x;\n    int** n = &amp;p;\n    int a = 3;\n\n    std::cout &lt;&lt; **n &lt;&lt; std::endl;\n    std::cout &lt;&lt; *&amp;**n &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; &amp;**n &lt;&lt; std::endl;\n    std::cout &lt;&lt; *n &lt;&lt; std::endl;\n\n    std::cout &lt;&lt; *&amp;a &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p><code>*n</code> writes what <code>n</code> points to.<br>\n<code>&amp;n</code> writes the address of <code>n</code>.<br>\nThe address of a variable points to the value of that variable.</p>\n\n<p>I think you can deduce the rest from the example.</p>\n"}, {"comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1577819698, "post_id": 59547556, "comment_id": 105264523, "body": "<code>*&amp;n</code> is only equivalent to <code>n</code> if <code>n</code> is a primitive (like in this case), if it is an instance of the class it is only guaranteed to be <code>n</code> if the <code>operator &amp;</code> is not overloaded."}, {"owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577819918, "post_id": 59547556, "comment_id": 105264573, "body": "Obviously, the answer is talking about this particular case."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1577820109, "post_id": 59547556, "comment_id": 105264621, "body": "I know and I just wanted to mention it informatively for the sake of completeness. As someone that does not know what <code>*</code> and <code>&amp;</code> does most certainly also does not know that this is only guaranteed for primitives."}], "tags": [], "owner": {"reputation": 3853, "user_id": 2474248, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BDsoE.jpg?s=128&g=1", "display_name": "machine_1", "link": "https://stackoverflow.com/users/2474248/machine-1"}, "is_accepted": true, "score": 1, "last_activity_date": 1577817981, "creation_date": 1577817981, "answer_id": 59547556, "question_id": 59547407, "link": "https://stackoverflow.com/questions/59547407/what-does-n-mean-in-double-pointer-c/59547556#59547556", "title": "What does &quot;*&amp;n&quot; mean in double-pointer c++?", "body": "<p><code>*&amp;n</code> is equivalent to <code>n</code>. Thus the value of <code>n</code> is printed out.</p>\n\n<p>The value of <code>n</code> is the address of the variable <code>p</code> that is a pointer to <code>int</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 8344575, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2-F8k8cGYAM/AAAAAAAAAAI/AAAAAAAAA7Q/J61FAUx3_Eo/photo.jpg?sz=128", "display_name": "Hasan Parasteh", "link": "https://stackoverflow.com/users/8344575/hasan-parasteh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "closed_date": 1577884368, "accepted_answer_id": 59547556, "answer_count": 2, "score": -8, "last_activity_date": 1577817981, "creation_date": 1577816599, "question_id": 59547407, "link": "https://stackoverflow.com/questions/59547407/what-does-n-mean-in-double-pointer-c", "closed_reason": "Needs more focus", "title": "What does &quot;*&amp;n&quot; mean in double-pointer c++?", "body": "<p>here it is the code that the teacher gave me to solve in a quiz. can you explain to me what is the *&amp;n do or print out?</p>\n\n<p>first of all: is it even possible to have such a thing?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int x = 5;\nint* p = &amp;x;\nint** n = &amp;p;\n\nstd::cout &lt;&lt; *&amp;n;\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "answers": [{"tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": true, "score": 2, "last_activity_date": 1577817905, "last_edit_date": 1577817905, "creation_date": 1577816780, "answer_id": 59547433, "question_id": 59547366, "link": "https://stackoverflow.com/questions/59547366/how-do-i-display-a-grayscale-image-with-opengl-texture/59547433#59547433", "title": "How do I display a grayscale image with opengl texture", "body": "<p>If you you have a source texture with 1 color channel, then you can use the format <code>GL_RED</code> and the base internal format <code>GL_RED</code>:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>glTexImage2D(GL_TEXTURE_2D, 0, GL_RED, image_width, image_height,\n             0, GL_RED, GL_UNSIGNED_BYTE, image_data);\n</code></pre>\n\n<p>Set the texture parameters <code>GL_TEXTURE_SWIZZLE_G</code> and <code>GL_TEXTURE_SWIZZLE_B</code> (see <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexParameter.xhtml\" rel=\"nofollow noreferrer\"><code>glTexParameteri</code></a>) to read the green and blue color from the red color channel, too:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_SWIZZLE_G, GL_RED);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_SWIZZLE_B, GL_RED);\n</code></pre>\n\n<hr>\n\n<p>Note, possibly <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glPixelStore.xhtml\" rel=\"nofollow noreferrer\"><code>GL_UNPACK_ALIGNMENT</code></a> has to be set to 1, when the image is loaded to a texture object:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glPixelStorei(GL_UNPACK_ALIGNMENT, 1);\nglTexImage2D(GL_TEXTURE_2D, 0, GL_RED, ...);\n</code></pre>\n\n<p>By default the parameter is 4. This means that each line of the image is assumed to be aligned to a size which is a multiple of 4. If the image data is tightly packed then the alignment has to be changed.</p>\n\n<hr>\n\n<p>If you use shader program, then the same can be achieved by <a href=\"https://www.khronos.org/opengl/wiki/Data_Type_(GLSL)#Swizzling\" rel=\"nofollow noreferrer\">Swizzling</a>. e.g.:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>vec3 color = texture(u_texture, uv).rrr;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12633494, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y8ZOdf6eM34/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcbA3RkWhwA4bpA8eHzlT47s66ACQ/photo.jpg?sz=128", "display_name": "velcro12", "link": "https://stackoverflow.com/users/12633494/velcro12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 59547433, "answer_count": 1, "score": 2, "last_activity_date": 1577817905, "creation_date": 1577816243, "question_id": 59547366, "link": "https://stackoverflow.com/questions/59547366/how-do-i-display-a-grayscale-image-with-opengl-texture", "title": "How do I display a grayscale image with opengl texture", "body": "<p>I am trying to create a texture to display. I have wxh array in which each pixel is 1 byte. I have looked at <a href=\"https://stackoverflow.com/questions/680125/can-i-use-a-grayscale-image-with-the-opengl-glteximage2d-function\">Can I use a grayscale image with the OpenGL glTexImage2D function?</a> but I am not sure as to how to currently implement it. It looks like the GL_LUMINANCE is deprecated and I need to process the single channel independently . I am not sure how I should try this</p>\n\n<pre><code>glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, image_width, image_height, 0, GL_RGBA, GL_UNSIGNED_BYTE, image_data);\n</code></pre>\n\n<p>I tried changing GL_RGBA to other formats like GL_R <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexImage2D.xhtml\" rel=\"nofollow noreferrer\">https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexImage2D.xhtml</a>. I still cannot get the image to display. Does anyone have any suggestions?</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577816430, "post_id": 59547361, "comment_id": 105263754, "body": "In <code>A</code>, when you write <code>friend class A;</code>, did you mean <code>B</code>? That should make this all work...and I&#39;m not sure what the good of making a class a friend of itself is."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "edited": false, "score": 1, "creation_date": 1577816453, "post_id": 59547361, "comment_id": 105263758, "body": "Probably an X/Y problem, <code>friend</code>ship is very intrusive - perhaps a rethink of what you&#39;re trying to accomplish and thinking of a better design."}, {"owner": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "edited": false, "score": 0, "creation_date": 1577816470, "post_id": 59547361, "comment_id": 105263770, "body": "Which compiler and flags did you use? I dont seem to receive any similar errors <a href=\"https://godbolt.org/z/vkEHPn\" rel=\"nofollow noreferrer\">godbolt.org/z/vkEHPn</a>"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "edited": false, "score": 1, "creation_date": 1577816514, "post_id": 59547361, "comment_id": 105263782, "body": "@Mutable did you try to actually call the function? <a href=\"https://ideone.com/7iz3cA\" rel=\"nofollow noreferrer\">ideone.com/7iz3cA</a>"}, {"owner": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1577816611, "post_id": 59547361, "comment_id": 105263811, "body": "@scohe001 you&#39;re right. How silly of me."}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "edited": false, "score": 2, "creation_date": 1577817077, "post_id": 59547402, "comment_id": 105263947, "body": "<code>There is also absolutely no point to making a class friend of itself.</code> This code is different I <a href=\"https://stackoverflow.com/a/3292852/12160191\">think</a>. <a href=\"https://godbolt.org/z/maiq5z\" rel=\"nofollow noreferrer\">Example</a>"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 693, "user_id": 12160191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d32da1b1b1c0300e49b411b45b1e950d?s=128&d=identicon&r=PG&f=1", "display_name": "Mutable Side Effect", "link": "https://stackoverflow.com/users/12160191/mutable-side-effect"}, "edited": false, "score": 0, "creation_date": 1577817746, "post_id": 59547402, "comment_id": 105264121, "body": "@MutableSideEffect Yes right, I didn&#39;t realize that. But it is unlikely that OP actually wants all of the specializations to be friends, anyway."}, {"owner": {"reputation": 31, "user_id": 10064305, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Iz0Bjhv0lCc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qnlDBDnZSYEmgb3P5fw3K1oAbh6w/mo/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/10064305/justin"}, "edited": false, "score": 0, "creation_date": 1577842958, "post_id": 59547402, "comment_id": 105268183, "body": "@walnut  Oh, I was just silly.. thank you! As you mentioned, reason for making friend for the same class itself was to make all template specializations to be friends."}], "tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": false, "score": 0, "last_activity_date": 1577817713, "last_edit_date": 1577817713, "creation_date": 1577816522, "answer_id": 59547402, "question_id": 59547361, "link": "https://stackoverflow.com/questions/59547361/friend-declaration-of-class-template/59547402#59547402", "title": "Friend declaration of class template", "body": "<p>You have it the wrong way around. You want <code>B</code> to be friend of <code>A</code>. So you need to declare <code>B</code> a friend in <code>A</code>'s definition:</p>\n\n<pre><code>template&lt;typename T&gt;\nclass A{\n\n//...\n\n  template&lt;typename U&gt;\n  friend class B;\n\n//...\n\n};\n</code></pre>\n\n<p>Do however think about whether you <em>actually</em> want all of these classes and their different specializations to be <code>friend</code>. The point of making a member <code>private</code> is that it represents a state internal to the class and should not be accessed directly by unrelated code. Usually, if you need direct access to a member, then you should either make it <code>public</code> or if there is a class invariant that doesn't allow that, give access to it through a <code>public</code> member function which preserves the invariant.</p>\n"}], "owner": {"reputation": 31, "user_id": 10064305, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Iz0Bjhv0lCc/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qnlDBDnZSYEmgb3P5fw3K1oAbh6w/mo/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/10064305/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1577817713, "creation_date": 1577816197, "question_id": 59547361, "link": "https://stackoverflow.com/questions/59547361/friend-declaration-of-class-template", "title": "Friend declaration of class template", "body": "<p>I'm facing problems with friend class templates.\nHere's how my code looks like</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt;\nclass A{\nprivate:\n\n  template&lt;typename U&gt;\n  friend class A;\n\n  int m_num = 0;\n\npublic:\n//...\n\n};\n</code></pre>\n\n<p>while</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;typename T&gt;\nclass B{\nprivate:\n\n  template&lt;typename U&gt;\n  friend class B;\n\n  template&lt;typename U&gt;\n  friend class A; // Set A as friend class template of B\n\npublic:\n\n  template&lt;typename U&gt;\n  int GetNumOfA(const A&lt;U&gt;&amp; a){\n    return a.m_num; // Cannot Access A's private member!\n  }\n\n};\n</code></pre>\n\n<p>I expected A's private members to be accessible since I declared A as friend class of B. But it couldn't access it.\nCould you help me figure out why this happens? Or any ideas to make <em>m_num</em> accessible from B?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1577837659, "post_id": 59547281, "comment_id": 105267609, "body": "Your code can result in either compilation error or a memory leak but not both at the same time. If there&#39;s a compilation error, you probably need to remove a <code>*</code> from the <code>delete</code> line. Better yet, stop whatever you are doing and read about memory management with smary pointers like <code>std::unique_ptr</code>."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1577837733, "post_id": 59547281, "comment_id": 105267620, "body": "It is a <code>shared_ptr</code> which does not (and cannot) be <code>delete</code>d. The destructor will clean up for you. If there is a leak, it is in code you didn&#39;t share. Trying to delete the <code>shared_ptr</code> will just make the problem worse."}, {"owner": {"reputation": 33, "user_id": 9721465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb2bf498fa415552de7628dc270f0b2?s=128&d=identicon&r=PG&f=1", "display_name": "mwk088", "link": "https://stackoverflow.com/users/9721465/mwk088"}, "edited": false, "score": 0, "creation_date": 1577972323, "post_id": 59547281, "comment_id": 105296357, "body": "So when I remove the delete function, the code compiles correctly, but i see the memory steadily increase.  Ultimately, I would like to clear the allocated memory in the Framework_Decoder class or the sptrExternFwDecoder variable.  So, you say the destructor Framework_Decoder::~Framework_Decoder() should clean up the allocated memory?"}], "owner": {"reputation": 33, "user_id": 9721465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eeb2bf498fa415552de7628dc270f0b2?s=128&d=identicon&r=PG&f=1", "display_name": "mwk088", "link": "https://stackoverflow.com/users/9721465/mwk088"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577815576, "creation_date": 1577815576, "question_id": 59547281, "link": "https://stackoverflow.com/questions/59547281/error-type-grfecgeneric-decodersptr-aka-class-boostshared-ptrgrf", "title": "error: type &#39;gr::fec::generic_decoder::sptr&#39; {aka &#39;class boost::shared_ptr&lt;gr::fec::generic_decoder&gt;&#39;} argument given to &#39;delete&#39;, expected pointer", "body": "<p>I have the code below and I am trying to deallocate some memory which is causing a memory leak error, and I am struggling to figure out how to delete it.</p>\n\n<p>Below is a snippet of code</p>\n\n<pre><code>Framework_Decoder::Framework_Decoder()\n{\n    code initializing variables...\n\n      sptrExternFwDecoder = fec::code::cc_decoder::make(\n      PHY_DECODE_MAX_FRAMESIZE_LENGTH,\n      Constraint_K,\n      OneOver_Rate,\n      GeneratorPolys,\n      LFSR_StartState,\n      LFSR_EndState,\n      Mode,\n      PaddedToNearestByte);\n}\n\nvoid\nFramework_Decoder::ConvolutionalDecode_SpiralViterbi(\n   uint32_t nInputCodedDataBits,\n   framework_uchar_internal* pInputCodedDataBits,\n   uint32_t nOutputDecodedDataBits,\n   framework_uchar_internal* pOutputDecodedDataBits)\n{\n   bool bFrameSmallerThanMax =\n      sptrExternFwDecoder-&gt;set_frame_size((int)nOutputDecodedDataBits);\n\n   if (!bFrameSmallerThanMax)\n   {\n      TRACE_LEVEL_GTEQ(TRACE_VERBOSE, \"WARNING in \" &lt;&lt; TRACE_COUT_METHOD_NAME &lt;&lt; \":  Output frame size requested is larger than\");\n      TRACE_LEVEL_GTEQ(TRACE_VERBOSE, \"        PHY_DECODE_MAX_FRAMESIZE_LENGTH. Truncated but continuing.\");\n   }\n\n   sptrExternFwDecoder-&gt;generic_work(\n      pInputCodedDataBits, pOutputDecodedDataBits);\n   return;\n}\n\n// mwk 12/31/2019\n// Added to fix the memory allocation leak, hopefully....\nFramework_Decoder::~Framework_Decoder()\n{\n    // delete any allocated memory\n    if (sptrExternFwDecoder)\n       delete (*sptrExternFwDecoder);\n    return;\n}\n</code></pre>\n\n<p>I believe the sptrExternFwDecoder variable is causing problems and not being deallocated correctly...and it is being called over and over again.</p>\n\n<p>Can anyone help?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "function"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 4, "creation_date": 1577814916, "post_id": 59547137, "comment_id": 105263315, "body": "You must specify a single return type therefore you could specify a type that can represent multiple types and could try researching <a href=\"https://stackoverflow.com/questions/34815513/what-is-type-erasure-in-c\">type erasure</a>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 3, "creation_date": 1577814973, "post_id": 59547137, "comment_id": 105263335, "body": "That&#39;s an unusual requirement, but you could return a union of the two types, or, with the latest version of C++, use <code>std::variant</code>."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 5, "creation_date": 1577815830, "post_id": 59547137, "comment_id": 105263588, "body": "How would you use it?"}, {"owner": {"reputation": 2310, "user_id": 9185253, "user_type": "registered", "profile_image": "https://graph.facebook.com/114451586026362/picture?type=large", "display_name": "Maestro", "link": "https://stackoverflow.com/users/9185253/maestro"}, "edited": false, "score": 0, "creation_date": 1577817523, "post_id": 59547137, "comment_id": 105264067, "body": "You cannot. Because a function declaration should specify its return type at compile-time."}], "answers": [{"tags": [], "owner": {"reputation": 84959, "user_id": 390913, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/87a2a7e9ea54bcd1a6c8f09f8c2e8f3b?s=128&d=identicon&r=PG", "display_name": "perreal", "link": "https://stackoverflow.com/users/390913/perreal"}, "is_accepted": false, "score": 2, "last_activity_date": 1577815846, "last_edit_date": 1577815846, "creation_date": 1577815053, "answer_id": 59547204, "question_id": 59547137, "link": "https://stackoverflow.com/questions/59547137/c-a-function-that-can-return-one-of-two-types-depending-on-the-accepted-value/59547204#59547204", "title": "C++ A function that can return one of two types depending on the accepted value", "body": "<p>With C++ 17 you can use <a href=\"https://en.cppreference.com/w/cpp/utility/variant\" rel=\"nofollow noreferrer\">variant</a>:</p>\n\n<pre><code>std::variant&lt;int, std::string&gt; fun(int a) {\n  if (a) return a; return \"empty\";\n}\n</code></pre>\n\n<p>Or use a struct with <a href=\"https://en.cppreference.com/w/cpp/utility/optional\" rel=\"nofollow noreferrer\">optional</a>:</p>\n\n<pre><code>struct r {\n  std::optional&lt;int&gt; i;\n  std::optional&lt;std::string&gt; s;\n};\n\nr fun(int a) {\n  r out;\n  if (a) out.i = a; else out.s = \"empty\";\n  return out;\n}\n</code></pre>\n\n<p>Or for prior standards use a struct with fields indicating validity.</p>\n\n<pre><code>struct r {\n  enum class type {i, s};\n  int i;\n  std::string s;\n  type t;\n};\n\nr fun(int a) {\n  r out;\n  if (a) {\n    out.i = a;\n    out.t = r::type::i;\n  else {\n    out.s = \"empty\";\n    out.t = r::type::s;\n  }\n  return out;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1577816899, "post_id": 59547238, "comment_id": 105263900, "body": "I don&#39;t see anything that returns <code>&quot;empty&quot;</code>. This answer is a guess that returning a string is supposed to have something to do with error propagation, but the question doesn&#39;t ask for that."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1577817242, "post_id": 59547238, "comment_id": 105263994, "body": "@Pete exceptions don&#39;t have to be used for error propagation, though I guess my strings aren&#39;t helping. I&#39;ve edited to try to get away from that. OP wants a function that checks the input and acts on the input if the check passes. Otherwise, they want a string to be propagated back to the caller. This sounds like a perfect use of exceptions to me."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1577817805, "post_id": 59547238, "comment_id": 105264134, "body": "While it&#39;s technically true that &quot;exceptions don&#39;t have to be used for error propagation&quot;, the overhead they impose means that they are, <b>in fact</b>, used only for error propagation. And that&#39;s what they were designed for; they are not intended to be an alternative return mechanism."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 1, "last_activity_date": 1577817148, "last_edit_date": 1577817148, "creation_date": 1577815263, "answer_id": 59547238, "question_id": 59547137, "link": "https://stackoverflow.com/questions/59547137/c-a-function-that-can-return-one-of-two-types-depending-on-the-accepted-value/59547238#59547238", "title": "C++ A function that can return one of two types depending on the accepted value", "body": "<p>You could accomplish this flow with exceptions! If <code>func</code> is expecting to work with a number that is greater than 5, for example, you could do something like:</p>\n\n<pre><code>int func(int a) {\n    if (a &gt; 5) { return a; }\n    throw std::runtime_error(\"Empty\");\n}\n\nint main() {\n    try {\n        int x = func(3);\n        // Do some stuff with x...\n    } catch(const std::exception &amp;e) {\n        std::cout &lt;&lt; \"Looks like the num is \" &lt;&lt; e.what();\n    }\n}\n</code></pre>\n\n<p>So you either process the <code>int</code> if things went well, or, if something bad happened, you grab the string from the exception and deal with it.</p>\n"}, {"tags": [], "owner": {"reputation": 1141, "user_id": 6384727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f80d10dadbe83078d01fff8f98ad4e?s=128&d=identicon&r=PG&f=1", "display_name": "E.N.D", "link": "https://stackoverflow.com/users/6384727/e-n-d"}, "is_accepted": false, "score": 1, "last_activity_date": 1577815265, "creation_date": 1577815265, "answer_id": 59547239, "question_id": 59547137, "link": "https://stackoverflow.com/questions/59547137/c-a-function-that-can-return-one-of-two-types-depending-on-the-accepted-value/59547239#59547239", "title": "C++ A function that can return one of two types depending on the accepted value", "body": "<p>Interpret-able languages like python does not have restrictions on type of argument and type of return value. However, C++ can only accept and return values of pre-defined type. \nNow, Adding to other answers, if you don't have C++17, You could try it this way:</p>\n\n<pre><code>std::pair&lt;int, string&gt; func(int a)\n{\n   if(a) return std::make_pair(a , \"\");\n   return std::make_pair(0,\"string\");    \n}\n</code></pre>\n\n<p>In callee, you can check for non-null against both members of std::pair.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 8849658, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wq8d8oIFOzc/AAAAAAAAAAI/AAAAAAAAAEg/ZDJk8CFJGtQ/photo.jpg?sz=128", "display_name": "Jayson Okhman", "link": "https://stackoverflow.com/users/8849658/jayson-okhman"}, "is_accepted": false, "score": 0, "last_activity_date": 1577844017, "creation_date": 1577844017, "answer_id": 59549573, "question_id": 59547137, "link": "https://stackoverflow.com/questions/59547137/c-a-function-that-can-return-one-of-two-types-depending-on-the-accepted-value/59549573#59549573", "title": "C++ A function that can return one of two types depending on the accepted value", "body": "<p>You could accomplish this by splitting the two different tasks into separate functions and continue your execution from there.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;int inputValue = 0;\n\nint returnInt() {\n    std::cout &lt;&lt; \"Returning your int\" &lt;&lt; std::endl;\n    return inputValue;\n}\n\nstring returnString() {\n    std::cout &lt;&lt; \"Returning your string\" &lt;&lt; std::endl;\n    return \"Your string\";\n}\n\nint main() {\n    std::cout &lt;&lt; \"Please type in a number\" &lt;&lt; \"\\t\";\n    std::cin &gt;&gt; inputValue;\n    if (inputValue &gt; 5) {\n        returnInt();\n    }\n    else {\n        returnString();\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 12628268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/067a227eef9b65e7c88a8d6cb459b448?s=128&d=identicon&r=PG&f=1", "display_name": "Vasya", "link": "https://stackoverflow.com/users/12628268/vasya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 2, "answer_count": 4, "score": 1, "last_activity_date": 1577844017, "creation_date": 1577814652, "last_edit_date": 1577815020, "question_id": 59547137, "link": "https://stackoverflow.com/questions/59547137/c-a-function-that-can-return-one-of-two-types-depending-on-the-accepted-value", "title": "C++ A function that can return one of two types depending on the accepted value", "body": "<pre><code>fun(int a) {\n    if (a) return a; return \"empty\";\n}\n</code></pre>\n\n<p>I need a function that gets a number and depending on which number it is returns either an int variable or a string.\nPlease tell me how I can implement such a function.</p>\n"}, {"tags": ["c++", "linear-algebra"], "answers": [{"tags": [], "owner": {"reputation": 15641, "user_id": 126995, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bdd0d42e87a7c2636f0570ce12d069e5?s=128&d=identicon&r=PG", "display_name": "Soonts", "link": "https://stackoverflow.com/users/126995/soonts"}, "is_accepted": true, "score": 0, "last_activity_date": 1577818283, "creation_date": 1577818283, "answer_id": 59547601, "question_id": 59546945, "link": "https://stackoverflow.com/questions/59546945/barycentric-coordinates-doesnt-always-work3d/59547601#59547601", "title": "Barycentric coordinates doesn&#39;t always work(3d)", "body": "<p>This code</p>\n\n<pre><code>if (u + v + w != total_area)\n</code></pre>\n\n<p>is unreliable for floats. Floats don\u2019t work same way as integers, tests for the exact equality rarely make any sense.</p>\n\n<p>You should do something completely different instead. Here\u2019s one method. The code is untested but conceptually it should work, I did similar things many times. </p>\n\n<pre><code>#include &lt;assert.h&gt;\n\n// 0 when [0,p] ray goes through [0,t1,t2] plane.\n// Otherwise, the sign tells relative orientation of the ray and the plane.\ninline float crossDot( vec3 t1, vec3 t2, vec3 p )\n{\n    // Depending on winding order of triangles, and coordinate system (right versus left handed),\n    // you may need to flip the cross() arguments\n    return dot( cross( t1, t2 ), p );\n}\n\n// The triangle is [a, b, c], the points must have consistent winding,\n// i.e. when viewed from [0,0,0] the order must be either clockwise or counterclockwise,\n// for all triangles of your mesh.\n// p does not need to be normalized, length is ignored, only direction is used.\nint testRayTriangle( vec3 a, vec3 b, vec3 c, vec3 p )\n{\n    // If this assert fails because zero, you have a zero-area triangle, or a triangle that goes through [0,0,0].\n    // If this assert fails because negative, you need to flip cross() arguments, or fix winding order in the mesh.\n    assert( crossDot( a, b, c ) &gt; 0 );\n    const float e1 = crossDot( a, b, p );\n    const float e2 = crossDot( b, c, p );\n    const float e3 = crossDot( c, a, p );\n    if( e1 &lt; 0 || e2 &lt; 0 || e3 &lt; 0 )\n        return Ray::_NOintersection;    // The ray points outwards in relation to some side plane\n    if( e1 &gt; 0 &amp;&amp; e2 &gt; 0 &amp;&amp; e3 &gt; 0 )\n        return Ray::_INtriangle;    // The ray points inwards in relation to all 3 side planes\n    // The ray goes through a side plane\n    return Ray::_Onedge_OnVertex;\n}\n</code></pre>\n\n<p>The above code assumes eventually you gonna have more complicated meshes than your 12-triangles unit cube. If all you need is unit cube, find longest absolute dimension of your random vector, this + sign of that coordinate will tell you which of the 6 cube planes it gonna intersect. If there\u2019s no longest dimension e.g. your ray direction is [1,1,0] then the ray goes through an edge or vertex of the cube. Otherwise, test 2 other coordinates to find which of the 2 triangles it intersects.</p>\n"}], "owner": {"reputation": 13, "user_id": 12246994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16eef7d82efba5b306a4a84680d93e06?s=128&d=identicon&r=PG&f=1", "display_name": "Danny Gersh", "link": "https://stackoverflow.com/users/12246994/danny-gersh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 59547601, "answer_count": 1, "score": 0, "last_activity_date": 1577818283, "creation_date": 1577813012, "last_edit_date": 1577813313, "question_id": 59546945, "link": "https://stackoverflow.com/questions/59546945/barycentric-coordinates-doesnt-always-work3d", "title": "Barycentric coordinates doesn&#39;t always work(3d)", "body": "<p>I have a 3d box made of 12 triangles centered at the origin. I launch a ray from the origin to random directions, the goal is to get the face that intersects with the ray.\nI do this by searching all the ray/plane intersections and then determining the face their on(if any) with the Barycentric coordinates(u,v,w).\nthis works correctly only half the time, and generally yields unexpected results:</p>\n\n<pre><code>float triangleAREA(vec3 a, vec3 b, vec3 c)\n{\n    return(length(cross(b-a, c-a)) / 2);\n}\nint isINtriangle(vec3 a, vec3 b, vec3 c, vec3 p)\n{\n    float total_area = triangleAREA(a, b, c);\n    float u = triangleAREA(a, b, p);\n    float v = triangleAREA(a, c, p);\n    float w = triangleAREA(c, b, p);\n\n    if (u + v + w != total_area)\n        return Ray::_NOintersection;\n    else\n    {\n        if (u == 0 || v == 0 || w == 0)\n            return Ray::_Onedge_OnVertex;\n        else\n            return Ray::_INtriangle;\n    }\n}\n</code></pre>\n\n<p>this is how I check if the intersection is in the same direction as the ray:</p>\n\n<pre><code>vec3 a = normalize(ray_direction); vec3 b = normalize(intersect);\nif (\n    a.x &gt; b.x - 1 &amp;&amp; a.x &lt; b.x + 1 &amp;&amp;\n    a.z &gt; b.z - 1 &amp;&amp; a.z &lt; b.z + 1 &amp;&amp;\n    a.y &gt; b.y - 1 &amp;&amp; a.y &lt; b.y + 1 \n) \n</code></pre>\n\n<p>this is all new to me, any help would be awesome !</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 5092, "user_id": 5481471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6efc50461d3521db348bf483652040?s=128&d=identicon&r=PG&f=1", "display_name": "G. Sliepen", "link": "https://stackoverflow.com/users/5481471/g-sliepen"}, "is_accepted": true, "score": 2, "last_activity_date": 1577813254, "creation_date": 1577813254, "answer_id": 59546978, "question_id": 59546840, "link": "https://stackoverflow.com/questions/59546840/does-linkage-rules-apply-to-namespace-just-like-global-names/59546978#59546978", "title": "does linkage rules apply to namespace just like global names?", "body": "<p>Namespaces are orthogonal to the distinction between global and local symbols. Namespaces just augment the name of a symbol, they don't change anything else. So, if you have a global variable, and put it inside a namespace it is still global variable, with external linkage.</p>\n\n<p>The exception is when you put something inside an <a href=\"https://en.cppreference.com/w/cpp/language/namespace#Unnamed_namespaces\" rel=\"nofollow noreferrer\">unnamed namespace</a>. In this case, since there is no possible way code in one source file could reference a symbol in an unnamed namespace declared in another file, it is effectively a <code>static</code> symbol, and thus effectively has internal linkage.</p>\n"}, {"tags": [], "owner": {"reputation": 3452, "user_id": 3242146, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd208146333b85dddf7c66b86682621?s=128&d=identicon&r=PG", "display_name": "Jeff Garrett", "link": "https://stackoverflow.com/users/3242146/jeff-garrett"}, "is_accepted": false, "score": 2, "last_activity_date": 1577813634, "creation_date": 1577813634, "answer_id": 59547025, "question_id": 59546840, "link": "https://stackoverflow.com/questions/59546840/does-linkage-rules-apply-to-namespace-just-like-global-names/59547025#59547025", "title": "does linkage rules apply to namespace just like global names?", "body": "<p>Linkage applies to names <a href=\"http://eel.is/c++draft/basic.link#3\" rel=\"nofollow noreferrer\">basic.link/3</a>:</p>\n\n<blockquote>\n  <p>A name is said to have linkage when it might denote the same object, reference, function, type, template, namespace or value as a name introduced by a declaration in another scope:</p>\n  \n  <ul>\n  <li>When a name has <em>external linkage</em>, the entity it denotes can be referred to by names from scopes of other translation units or from other scopes of the same translation unit.</li>\n  <li>When a name has <em>module linkage</em>, the entity it denotes can be referred to by names from other scopes of the same module unit ([module.unit]) or from scopes of other module units of that same module.</li>\n  <li>When a name has <em>internal linkage</em>, the entity it denotes can be referred to by names from other scopes in the same translation unit.</li>\n  <li>When a name has <em>no linkage</em>, the entity it denotes cannot be referred to by names from other scopes.</li>\n  </ul>\n</blockquote>\n\n<p>Names of variables at namespace scope have <em>external linkage</em> unless they meet certain exceptions. <a href=\"http://eel.is/c++draft/basic.link#5.8\" rel=\"nofollow noreferrer\">basic.link/5.8</a> For example, non-extern const variables at namespace scope have internal linkage. <a href=\"http://eel.is/c++draft/basic.link#4.2\" rel=\"nofollow noreferrer\">basic.link/4.2</a></p>\n\n<p>And yes, global scope is a namespace scope. <a href=\"http://eel.is/c++draft/basic.scope.namespace#4\" rel=\"nofollow noreferrer\">basic.scope.namespace/4</a></p>\n"}, {"tags": [], "owner": {"reputation": 12864, "user_id": 157525, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5820228fd7aefaba2a8bfb0503b9e2a8?s=128&d=identicon&r=PG", "display_name": "gct", "link": "https://stackoverflow.com/users/157525/gct"}, "is_accepted": false, "score": 1, "last_activity_date": 1577813754, "creation_date": 1577813754, "answer_id": 59547041, "question_id": 59546840, "link": "https://stackoverflow.com/questions/59546840/does-linkage-rules-apply-to-namespace-just-like-global-names/59547041#59547041", "title": "does linkage rules apply to namespace just like global names?", "body": "<p><a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2014/n4296.pdf#section.3.5\" rel=\"nofollow noreferrer\">Here</a> is the relevant section of the spec pertaining to linkage.</p>\n\n<p>And a relevant snippet:\n<a href=\"https://i.stack.imgur.com/51aI2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/51aI2.png\" alt=\"snippet\"></a></p>\n\n<p>Indicating by default namespaces have external linkage, minus the exceptions given.</p>\n"}], "owner": {"reputation": 32588, "user_id": 1544590, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cdb57618cf028c2a58191b7396a1fbe0?s=128&d=identicon&r=PG", "display_name": "Daiwei", "link": "https://stackoverflow.com/users/1544590/daiwei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "accepted_answer_id": 59546978, "answer_count": 3, "score": 0, "last_activity_date": 1577813754, "creation_date": 1577812221, "question_id": 59546840, "link": "https://stackoverflow.com/questions/59546840/does-linkage-rules-apply-to-namespace-just-like-global-names", "title": "does linkage rules apply to namespace just like global names?", "body": "<p>I've read <a href=\"https://docs.microsoft.com/en-us/cpp/cpp/program-and-linkage-cpp?view=vs-2019\" rel=\"nofollow noreferrer\">Translation units and linkage</a>, and it says:</p>\n\n<blockquote>\n  <p>The concept of linkage applies only to global names. The concept of linkage does not apply to names that are declared within a scope. A scope is specified by a set of enclosing braces such as in function or class definitions.</p>\n</blockquote>\n\n<p>It says \"The concept of linkage applies only to global names\" but didn't mention namespace scope. However, I saw namespace scope in some case we have to use <code>extern</code> to make some variables available in other files:</p>\n\n<pre><code>// constants.h\n#ifndef CONSTANTS_H\n#define CONSTANTS_H\n\nnamespace Constants\n{\n    // since the actual variables are inside a namespace, \n    // the forward declarations need to be inside a namespace as well\n    extern const double pi;\n    extern const double avogadro;\n    extern const double my_gravity;\n}\n\n#endif\n\n// constants.cpp\nnamespace Constants\n{\n    // actual global variables\n    extern const double pi(3.14159);\n    extern const double avogadro(6.0221413e23);\n    extern const double my_gravity(9.2); // m/s^2 -- gravity is light on this planet\n}\n</code></pre>\n\n<p>So what is the official definition? Is it true that linkage concept only apply to global, maybe namespace is part of global?</p>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 0, "creation_date": 1577812030, "post_id": 59546755, "comment_id": 105262515, "body": "This one-liner might explain the differences. See what your compilers return for <code>std::is_same_v&lt;char, int8_t&gt;</code>. My guess would be that it is implementation defined whether int8_t is the same as char, but one would need to check documentation."}, {"owner": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 0, "creation_date": 1577813934, "post_id": 59546755, "comment_id": 105263055, "body": "Looks like it may in fact be a bug. <a href=\"https://github.com/boostorg/proto/issues/18\" rel=\"nofollow noreferrer\">This issue</a> was opened recently and there have been several other reports."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 1, "creation_date": 1577814913, "post_id": 59546755, "comment_id": 105263313, "body": "@alteredinstance I don&#39;t see how that issue relates to this question, or how your previous link does, for that matter. Did you just copy the first link google gives for this error message? The error message is very generic and can appear in many different (legitimate) situations."}, {"owner": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1577817500, "post_id": 59546755, "comment_id": 105264057, "body": "@walnut <a href=\"https://github.com/boostorg/proto/blob/develop/include/boost/proto/generate.hpp\" rel=\"nofollow noreferrer\">Line 231 of the code mentioned in the issue</a> has a defunct link to an MSVC issue with aggregate initialization, the same thing OP&#39;s code is doing. It just so happens that the boost library has recently run into a similar issue with using <code>value</code> in an aggregate type with MSVC"}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 0, "creation_date": 1577818467, "post_id": 59546755, "comment_id": 105264289, "body": "@alteredinstance OP is not doing any aggregate initialization. <code>data</code> is not an aggregate type since it has a user-provided constructor. Going by the link&#39;s name, the referenced issue is a codegen issue, not frontend issue that would result in a compilation error like this here. I also already posted an answer to this question below. The issue here is whether or not the default argument should be instantiated. If it is instantiated, then the error message is correct. Otherwise it is not."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1577909180, "post_id": 59546755, "comment_id": 105279898, "body": "Similar issue - &quot;fixed&quot; - <a href=\"https://developercommunity.visualstudio.com/content/problem/86696/vc-2017-default-arguments-of-member-function-are-m.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/86696/&hellip;</a>. But it looks like its still broken."}, {"owner": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 1, "creation_date": 1577909641, "post_id": 59546755, "comment_id": 105279988, "body": "and a new bug report: <a href=\"https://developercommunity.visualstudio.com/content/problem/871304/vc-2019-default-arguments-of-member-function-are-m.html\" rel=\"nofollow noreferrer\">developercommunity.visualstudio.com/content/problem/871304/&hellip;</a>"}, {"owner": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 0, "creation_date": 1577991428, "post_id": 59546755, "comment_id": 105304934, "body": "<code>data</code> is not an aggregate type, <code>to_datatype</code> is though, and is the one experiencing the issue."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 44381, "user_id": 471160, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/9Z23A.jpg?s=128&g=1", "display_name": "marcinj", "link": "https://stackoverflow.com/users/471160/marcinj"}, "edited": false, "score": 0, "creation_date": 1577996777, "post_id": 59546755, "comment_id": 105306931, "body": "@marcinj The first report and the title of your new one are slightly different from the issue here. As mentioned in the question, the error doesn&#39;t happen when the class is implicitly instantiated, but only if the member function with the default argument is used in a call (which as I state in my answer I don&#39;t believe should cause default argument instantiation if the default argument is not used by the call)."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "reply_to_user": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 0, "creation_date": 1577996836, "post_id": 59546755, "comment_id": 105306956, "body": "@alteredinstance <code>to_datatype</code> is aggregate, but nowhere in the code is an instance of that type created."}], "answers": [{"tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 8, "last_activity_date": 1578000126, "last_edit_date": 1578000126, "creation_date": 1577813315, "answer_id": 59546985, "question_id": 59546755, "link": "https://stackoverflow.com/questions/59546755/possible-compiler-bug-in-msvc/59546985#59546985", "title": "Possible compiler bug in MSVC", "body": "<p>I would say MSVC is wrong not to accept the code.</p>\n\n<p>According to <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.fct.default#5\" rel=\"nofollow noreferrer\">[dcl.fct.default]/5</a> of the C++17 standard final draft, name lookup in default arguments of a member function of a class template is done according to the rules in [temp.inst].</p>\n\n<p>According to <a href=\"https://timsong-cpp.github.io/cppwp/n4659/temp.inst#2\" rel=\"nofollow noreferrer\">[temp.inst]/2</a> implicit instantiation of a class template does not cause instantiation of default arguments of member functions and according to <a href=\"https://timsong-cpp.github.io/cppwp/n4659/temp.inst#4\" rel=\"nofollow noreferrer\">[temp.inst]/4</a> a default argument for a member function of a (non-explicit specialization of a) class template is instantiated when it is used by a call.</p>\n\n<p>There is no call using the default argument <code>to_datatype&lt;T&gt;::value</code> in your code and so it should not be instantiated. Therefore there shouldn't be an error about lookup of <code>value</code> in <code>to_datatype&lt;char&gt;</code> failing.</p>\n\n<p>(The relevant sections in the C++11 standard final draft have equivalent wording, except for numbering, see <a href=\"https://timsong-cpp.github.io/cppwp/n3337/dcl.fct.default#5\" rel=\"nofollow noreferrer\">[decl.fct.default]/5</a>, <a href=\"https://timsong-cpp.github.io/cppwp/n3337/temp.inst#1\" rel=\"nofollow noreferrer\">[temp.inst]/1</a> and <a href=\"https://timsong-cpp.github.io/cppwp/n3337/temp.inst#3\" rel=\"nofollow noreferrer\">[temp.inst]/3</a> instead.)</p>\n"}], "owner": {"reputation": 1092, "user_id": 2091555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33885d4a962e37852c73a77049a5ec5f?s=128&d=identicon&r=PG", "display_name": "Cloud", "link": "https://stackoverflow.com/users/2091555/cloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 1, "accepted_answer_id": 59546985, "answer_count": 1, "score": 13, "last_activity_date": 1578000126, "creation_date": 1577811612, "last_edit_date": 1577812604, "question_id": 59546755, "link": "https://stackoverflow.com/questions/59546755/possible-compiler-bug-in-msvc", "title": "Possible compiler bug in MSVC", "body": "<p>The following code compiles with gcc and clang (and many other C++11 compilers)</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n\ntypedef int datatype;\n\ntemplate &lt;typename T&gt;\nstruct to_datatype {};\n\ntemplate &lt;&gt;\nstruct to_datatype&lt;int16_t&gt; {\n  static constexpr datatype value = 1;\n};\n\ntemplate &lt;typename T&gt;\nclass data {\n public:\n  data(datatype dt = to_datatype&lt;T&gt;::value) {}\n};\n\nint main() {\n  data&lt;char&gt; d{to_datatype&lt;int16_t&gt;::value};\n}\n</code></pre>\n\n<p>when compile with (almost) latest MSVC</p>\n\n<pre><code>&gt; cl .\\test.cpp /std:c++latest /permissive-\nMicrosoft (R) C/C++ Optimizing Compiler Version 19.24.28314 for x64\nCopyright (C) Microsoft Corporation.  All rights reserved.\n\ntest.cpp\n.\\test.cpp(16): error C2039: 'value': is not a member of 'to_datatype&lt;T&gt;'\n        with\n        [\n            T=char\n        ]\n.\\test.cpp(16): note: see declaration of 'to_datatype&lt;T&gt;'\n        with\n        [\n            T=char\n        ]\n.\\test.cpp(20): note: see reference to class template instantiation 'data&lt;char&gt;' being compiled\n</code></pre>\n\n<p>Is this a bug of MSVC? If yes, which term in C++ standard best describe it?</p>\n\n<p>If you replace part of the code with</p>\n\n<pre><code>template &lt;typename T&gt;\nclass data {\n public:\n  data(datatype dt) {}\n  data() : data(to_datatype&lt;T&gt;::value) {}\n};\n</code></pre>\n\n<p>it compiles smoothly anyway.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1577811592, "post_id": 59546721, "comment_id": 105262390, "body": "<a href=\"https://www.geeksforgeeks.org/timer-c-using-system-calls/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/timer-c-using-system-calls</a>"}, {"owner": {"reputation": 107, "user_id": 12541150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gga24.jpg?s=128&g=1", "display_name": "Muhammad Irfan Shahzad", "link": "https://stackoverflow.com/users/12541150/muhammad-irfan-shahzad"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1577811681, "post_id": 59546721, "comment_id": 105262409, "body": "I know how to deal with second in function? my function call after every 6 second?"}, {"owner": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 0, "creation_date": 1577811750, "post_id": 59546721, "comment_id": 105262432, "body": "Look at the post I linked.  Change <code>sleep(1)</code> to <code>sleep(6)</code>."}, {"owner": {"reputation": 107, "user_id": 12541150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gga24.jpg?s=128&g=1", "display_name": "Muhammad Irfan Shahzad", "link": "https://stackoverflow.com/users/12541150/muhammad-irfan-shahzad"}, "reply_to_user": {"reputation": 168120, "user_id": 102937, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1233ec65168f4aae4d939ae8fe6cde1e?s=128&d=identicon&r=PG", "display_name": "Robert Harvey", "link": "https://stackoverflow.com/users/102937/robert-harvey"}, "edited": false, "score": 1, "creation_date": 1577813906, "post_id": 59546721, "comment_id": 105263040, "body": "solved my problem.thanks"}], "owner": {"reputation": 107, "user_id": 12541150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gga24.jpg?s=128&g=1", "display_name": "Muhammad Irfan Shahzad", "link": "https://stackoverflow.com/users/12541150/muhammad-irfan-shahzad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 1, "closed_date": 1577811565, "answer_count": 0, "score": 1, "last_activity_date": 1577811519, "creation_date": 1577811384, "last_edit_date": 1577811519, "question_id": 59546721, "link": "https://stackoverflow.com/questions/59546721/how-to-deal-second-in-calling-function-in-c", "closed_reason": "Duplicate", "title": "how to deal second in calling function in c++?", "body": "<p>I want to make a function that call every 6 sec. I know about library but I have no idea how to deal sec.\nhow we access only second.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;ctime&gt;\n\nint main()\n{\n  time(0);\n\n  return 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1577811508, "post_id": 59546618, "comment_id": 105262361, "body": "What does <b>&quot;doesn&#39;t work&quot;</b> mean? What is the ouput from you code? How is it different from what you expected?"}, {"owner": {"reputation": 11, "user_id": 12135973, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAqjjztabCQ5K-2yln837Q9OpsY_U7QKEG4jlMN=k-s128", "display_name": "Andr&#233; Costa", "link": "https://stackoverflow.com/users/12135973/andr%c3%a9-costa"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1577816093, "post_id": 59546618, "comment_id": 105263674, "body": "Sorry, I added the output that I get from the code."}], "answers": [{"tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 0, "last_activity_date": 1577817336, "last_edit_date": 1577817336, "creation_date": 1577816655, "answer_id": 59547414, "question_id": 59546618, "link": "https://stackoverflow.com/questions/59546618/qt-c-how-to-preform-copy-of-an-hash-to-a-map/59547414#59547414", "title": "Qt C++ How to preform copy of an Hash to a Map", "body": "<pre><code>QHashIterator&lt;int, QString&gt; Hit(mHash);\n\nwhile (Hit.hasNext())\n{\n    Hit.next();\n    qDebug() &lt;&lt; Hit.key() &lt;&lt; \" = \" &lt;&lt; Hit.value();\n\n}\n</code></pre>\n\n<p>This codes creates a iterator to the hash map and iterates through it such that the <code>hasNext</code> function is <code>false</code>. This works correctly as evidenced by the output.</p>\n\n<pre><code>QMap&lt;int, QString&gt; HMap;\n\nQMutableMapIterator&lt;int, QString&gt; it2h(HMap);\n\n//Copy Hash to Map\n\nwhile (Hit.hasNext())\n{\n    Hit.next();\n    HMap.insert(Hit.key(), Hit.value());\n}\n</code></pre>\n\n<p>Next, the code tries to iterate through <code>Hit</code> again <strong>but it's already at the end</strong> and doesn't execute any loops. This should be verifiable by stepping through with a debugger or adding print statements to the for loop.</p>\n\n<p>Since the above loop doesn't execute nothing is copied and therefore the <code>QMap</code> doesn't have any values. The <code>Hit</code> iterator needs to be reset, or a new one created, so that it's pointing to the start of the hash map before trying to iterate to do the copying.</p>\n\n<hr>\n\n<p>It looks like there is a <code>toFront</code> API to reset the iterator back to the front so that iteration can begin again, see <a href=\"https://doc.qt.io/qt-5/qhashiterator.html#toFront\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/qhashiterator.html#toFront</a>. I don't have access to QT to test and verify this behaves as I anticpate.</p>\n"}, {"comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1577820771, "post_id": 59547804, "comment_id": 105264753, "body": "I&#39;m guessing the problematic code isn&#39;t really the code you&#39;re using <b>because inside the for loop</b> it is calling <code>Hit.hasNext();</code> instead of <code>Hit.next();</code>."}, {"owner": {"reputation": 11, "user_id": 12135973, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAqjjztabCQ5K-2yln837Q9OpsY_U7QKEG4jlMN=k-s128", "display_name": "Andr&#233; Costa", "link": "https://stackoverflow.com/users/12135973/andr%c3%a9-costa"}, "reply_to_user": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 0, "creation_date": 1577821338, "post_id": 59547804, "comment_id": 105264871, "body": "Yes ofc, sorry, i didn&#39;t notice that.I corrected and works very well. Thank you very much. You where a huge help. Good year to you sir. I wish you the best of luck."}], "tags": [], "owner": {"reputation": 11, "user_id": 12135973, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAqjjztabCQ5K-2yln837Q9OpsY_U7QKEG4jlMN=k-s128", "display_name": "Andr&#233; Costa", "link": "https://stackoverflow.com/users/12135973/andr%c3%a9-costa"}, "is_accepted": false, "score": 0, "last_activity_date": 1577821743, "last_edit_date": 1577821743, "creation_date": 1577820208, "answer_id": 59547804, "question_id": 59546618, "link": "https://stackoverflow.com/questions/59546618/qt-c-how-to-preform-copy-of-an-hash-to-a-map/59547804#59547804", "title": "Qt C++ How to preform copy of an Hash to a Map", "body": "<p>I solved it thanks to <strong>James Adkison</strong> answer by using <strong>hasPrevious()</strong> since he said the pointer would be pointing at the end.</p>\n\n<pre><code>QMap&lt;int, QString&gt; HMap; //I created the map\n\nwhile (Hit.hasPrevious()) //used hasPrevious() to work my way back to the start\n{\n    Hit.previous(); //pointed to previous on every loop\n    HMap.insert(Hit.key(), Hit.value()); //inserted on map\n\n}\n\nQMutableMapIterator&lt;int, QString&gt; itM(HMap);\n\nqDebug() &lt;&lt; \"\\nPost Copy\\n\";\n\nwhile (itM.hasNext())\n{\n    itM.next();\n    qDebug() &lt;&lt; itM.key() &lt;&lt; \" = \" &lt;&lt; itM.value();\n}\n</code></pre>\n\n<p>and since my objective was to use map to organize the keys it worked like a charm.</p>\n\n<p>This is the final solution I used:</p>\n\n<pre><code>Hit.toFront();\nwhile (Hit.hasNext())\n{\n    Hit.next();\n    HMap.insert(Hit.key(), Hit.value());\n\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12135973, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAqjjztabCQ5K-2yln837Q9OpsY_U7QKEG4jlMN=k-s128", "display_name": "Andr&#233; Costa", "link": "https://stackoverflow.com/users/12135973/andr%c3%a9-costa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 59547414, "answer_count": 2, "score": 1, "last_activity_date": 1577821743, "creation_date": 1577810717, "last_edit_date": 1577816038, "question_id": 59546618, "link": "https://stackoverflow.com/questions/59546618/qt-c-how-to-preform-copy-of-an-hash-to-a-map", "title": "Qt C++ How to preform copy of an Hash to a Map", "body": "<p>I'm trying some things in Qt and trying to understand containers but I hit a brick wall.</p>\n\n<pre><code>QHash&lt;int, QString&gt; mHash;\n\n    mHash.insert(3, \"Nocas\");\n    mHash.insert(1, \"Andre\");\n    mHash.insert(2, \"Diana\"); //overrides\n    mHash.insertMulti(5, \"Batatas\"); //overides all keys '5'\n\n    qDebug() &lt;&lt; \"\\nHash.keys()\\n\";\n\n    foreach(int i, mHash.keys())\n    {\n        qDebug() &lt;&lt; i &lt;&lt; \" -&gt; \" &lt;&lt; mHash[i];\n    }\n\n    qDebug() &lt;&lt; \"\\nHash Values\\n\";\n\n    foreach(QString value, mHash)\n    {\n        qDebug() &lt;&lt; \"Value: \" &lt;&lt; value;\n    }\n\n     qDebug() &lt;&lt; \"\\nPre Copy\\n\";\n\n    QHashIterator&lt;int, QString&gt; Hit(mHash);\n\n    while (Hit.hasNext())\n    {\n        Hit.next();\n        qDebug() &lt;&lt; Hit.key() &lt;&lt; \" = \" &lt;&lt; Hit.value();\n\n    }\n\n    QMap&lt;int, QString&gt; HMap;\n\n    QMutableMapIterator&lt;int, QString&gt; it2h(HMap);\n\n    //Copy Hash to Map\n\n    while (Hit.hasNext())\n    {\n        Hit.next();\n        HMap.insert(Hit.key(), Hit.value());\n    }\n\n    qDebug() &lt;&lt; \"Print map: \\n\";\n\n    while (it2h.hasNext())\n    {\n        it2h.next();\n        qDebug() &lt;&lt; it2h.key() &lt;&lt; \" = \" &lt;&lt; it2h.value();\n    }\n</code></pre>\n\n<p>I don't understand why this:</p>\n\n<pre><code>   while (Hit.hasNext())\n    {\n        Hit.next();\n        HMap.insert(Hit.key(), Hit.value());\n    }\n</code></pre>\n\n<p>doesn't work.</p>\n\n<p>I saw the literature but I don't really understand it.\nI tried changing iterators.</p>\n\n<pre><code>QMap&lt;int, int&gt;::const_iterator i;\n</code></pre>\n\n<p>using foreach, for...still nothing never outputs.</p>\n\n<h2>Output is:</h2>\n\n<pre><code>Hash.keys()\n\n5  -&gt;  \"Batatas\"\n1  -&gt;  \"Andre\"\n3  -&gt;  \"Nocas\"\n2  -&gt;  \"Diana\"\n\nHash Values\n\nValue:  \"Batatas\"\nValue:  \"Andre\"\nValue:  \"Nocas\"\nValue:  \"Diana\"\n\nPre Copy\n\n5  =  \"Batatas\"\n1  =  \"Andre\"\n3  =  \"Nocas\"\n2  =  \"Diana\"\n\nPrint map:\n</code></pre>\n\n<hr>\n\n<p>As you can see after \"Print map:\" I was expecting the values.</p>\n"}, {"tags": ["c++", "bash", "ansi", "ansi-escape"], "comments": [{"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577810846, "post_id": 59546594, "comment_id": 105262154, "body": "What do you mean when you say &quot;the ANSI are being printed to the terminal.&quot; All I see in the image are some good colors. Is that not what you wanted? What is the issue in that image?"}, {"owner": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 2, "creation_date": 1577810871, "post_id": 59546594, "comment_id": 105262159, "body": "can you show your code, the expected behaviour, and what part of that isn&#39;t working?"}, {"owner": {"reputation": 105, "user_id": 6785736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46329ba94b4f690f3f3fdb12d4352d4e?s=128&d=identicon&r=PG&f=1", "display_name": "cnmcferren", "link": "https://stackoverflow.com/users/6785736/cnmcferren"}, "edited": false, "score": 0, "creation_date": 1577813416, "post_id": 59546594, "comment_id": 105262914, "body": "I added an example of what the prompt should look like. <a href=\"https://www.funtoo.org/Prompt_Magic\" rel=\"nofollow noreferrer\">link</a> This link explains how the ANSI sequences need to be surrounded by <code>\\[ \\]</code> so they are not considered for length when printed. I also added the source code"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 1, "creation_date": 1577813570, "post_id": 59546594, "comment_id": 105262952, "body": "Ahh so the issue is that <b>wrapping is not working how you expect it to.</b> From your research you expect it to be because you need non-printing characters. I see now. Take a reopen vote."}, {"owner": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1577872983, "post_id": 59546594, "comment_id": 105271709, "body": "@cnmcferren Any reason to use &#39;c++&#39; program instead of bash script. Will be easier to update - no need to compile/install binaries ? Not to mention that it is easier to debug."}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 11893, "user_id": 12098405, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C7IUyuZ5qqE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rehqQyGdh463Xz2DY8S4TYPhnDvzA/photo.jpg?sz=128", "display_name": "dash-o", "link": "https://stackoverflow.com/users/12098405/dash-o"}, "edited": false, "score": 0, "creation_date": 1577874424, "post_id": 59546594, "comment_id": 105272018, "body": "@dash-o I think that&#39;ll make no difference for the issue. The program might be a reduced example, which we always ask for on SO, while in its original form doing some heavy processing that would be hard to implement in Bash."}], "answers": [{"tags": [], "owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "is_accepted": true, "score": 1, "last_activity_date": 1577873865, "creation_date": 1577873865, "answer_id": 59551624, "question_id": 59546594, "link": "https://stackoverflow.com/questions/59546594/bash-ps1-prompt-breaks-line-wrapping-when-generating-ansi-escapes-by-an-external/59551624#59551624", "title": "Bash PS1 prompt breaks line wrapping when generating ANSI escapes by an external program", "body": "<p>Note first that <code>\\[</code> and <code>\\]</code> are interpreted by Bash itself, not the console, so they must be explicitly present in the <code>PS1</code> value, not in the output of the program generating actual prompt.</p>\n\n<p>Now, you want the non-escape chars to count, while colors are not to be counted. For this, you can modify your program to have two modes:</p>\n\n<ul>\n<li>Colored output (for actual prompt)</li>\n<li>Text-only output (for character counting)</li>\n</ul>\n\n<p>Then you can use something like</p>\n\n<pre><code>PS1='$(/tmp/test)\\[\\r$(/tmp/test c)\\]'\n</code></pre>\n\n<p>which would work for code modified to the following:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>void PrintPrompt(string cwd, string hostname, string username, bool colors){\n    string cwdString = cwd;\n    cout &lt;&lt; (colors ? WHITEDGRAY  : \"\") &lt;&lt; username &lt;&lt;\n            (colors ? DGRAYORANGE : \"\") &lt;&lt; ARROW &lt;&lt; \" \" &lt;&lt;\n            (colors ? WHITEORANGE : \"\") &lt;&lt; hostname &lt;&lt;\n            (colors ? ORANGEDGRAY : \"\") &lt;&lt; ARROW &lt;&lt; \" \" &lt;&lt;\n            (colors ? WHITEDGRAY  : \"\") &lt;&lt; cwd &lt;&lt; (colors ? DGRAYDEFAULT : \"\") &lt;&lt;\n            ARROW &lt;&lt; (colors ? RESET : \"\") &lt;&lt; endl;\n}\n</code></pre>\n\n<p>with <code>colors</code> being passed as e.g. <code>argc&gt;1</code>.</p>\n\n<p>We use the <code>\\r</code> escape sequence to go to the beginning of the line, enabling us to overwrite our already printed non-colored text with the fancy-colored one, making Bash think that the additional text and escape sequences (including the carriage return) don't take any space.</p>\n\n<p>Screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/MbsPi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MbsPi.png\" alt=\"screenshot of resulting output\"></a></p>\n"}], "owner": {"reputation": 105, "user_id": 6785736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46329ba94b4f690f3f3fdb12d4352d4e?s=128&d=identicon&r=PG&f=1", "display_name": "cnmcferren", "link": "https://stackoverflow.com/users/6785736/cnmcferren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 59551624, "answer_count": 1, "score": 0, "last_activity_date": 1577874632, "creation_date": 1577810584, "last_edit_date": 1577874632, "question_id": 59546594, "link": "https://stackoverflow.com/questions/59546594/bash-ps1-prompt-breaks-line-wrapping-when-generating-ansi-escapes-by-an-external", "title": "Bash PS1 prompt breaks line wrapping when generating ANSI escapes by an external program", "body": "<p>I am looking at making a custom bash prompt using a C++ script. The plan is to call the script from within the PS1 declaration in .bash_profile like this:</p>\n\n<pre><code>PS1='$(bashprompt.out)'\n</code></pre>\n\n<p>This part works totally fine. The problem that I am running into is that the ANSI sequences are being printed to the terminal. You can see this in the following image, where it prematurely returns to the beginning of the line.</p>\n\n<p><a href=\"https://i.stack.imgur.com/MucW7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MucW7.png\" alt=\"Test returning to the start of line\"></a></p>\n\n<p>I am defining the colors in the format as follows: </p>\n\n<pre><code>#define DGRAYORANGE \"\\033[48;5;202;38;5;243m\"\n</code></pre>\n\n<p>In a bash script, I know the way to avoid this issue is to denote the color as non-printing by using <code>\\[ \\]</code> (like explained here <a href=\"https://www.funtoo.org/Prompt_Magic\" rel=\"nofollow noreferrer\">https://www.funtoo.org/Prompt_Magic)</a>, but that does not work in C++.</p>\n\n<p>This is what the prompt should look like:\n<a href=\"https://i.stack.imgur.com/a2Oij.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a2Oij.png\" alt=\"This is an example prompt i made using bash and not C++.\"></a></p>\n\n<p>Here is the C++ code that is being used to make the colored prompt:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;pwd.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\n#define ARROW \"\ue0b0\"\n#define DGRAYORANGE \"\\033[48;5;202;38;5;243m\"\n#define ORANGEDGRAY \"\\033[38;5;202;48;5;243m\"\n#define DGRAYDEFAULT \"\\033[38;5;243;48;5;0m\"\n#define WHITEDGRAY \"\\033[38;5;255;48;5;243m\"\n#define WHITEORANGE \"\\033[38;5;255;48;5;202m\"\n#define RESET \"\\033[0m\"\n\n\nusing namespace std;\n\nvoid PrintPrompt(string, string, string);\nstring FormatCWD(char *);\n\n\n\nint main() {\n    int buffersize = 256;\n    char hostname[buffersize];\n    char cwd[buffersize];\n    struct passwd* pw;\n\n    gethostname(hostname,sizeof(hostname));\n    pw = getpwuid(getuid());\n    getcwd(cwd,sizeof(cwd));\n\n    string stringCwd = FormatCWD(cwd);\n    string stringUsername = pw-&gt;pw_name;\n    string stringHostname = hostname;\n\n    PrintPrompt(stringCwd,stringHostname,stringUsername);\n}\n\nvoid PrintPrompt(string cwd, string hostname, string username){\n    string cwdString = cwd;\n    cout &lt;&lt; WHITEDGRAY &lt;&lt; username &lt;&lt;\n            DGRAYORANGE &lt;&lt; ARROW &lt;&lt; \" \" &lt;&lt;\n            WHITEORANGE &lt;&lt; hostname &lt;&lt;\n            ORANGEDGRAY &lt;&lt; ARROW &lt;&lt; \" \" &lt;&lt;\n            WHITEDGRAY &lt;&lt; cwd &lt;&lt; DGRAYDEFAULT &lt;&lt;\n            ARROW &lt;&lt; RESET &lt;&lt; \" \" &lt;&lt; endl;\n}\n\nstring FormatCWD(char * cwd) {\n    string stringCwd = cwd;\n\n    int size = stringCwd.length();\n    int slashCount = 0;\n    int slashIndex = 0;\n    for (int i=0; i&lt;size; i++) {\n        if (stringCwd.at(i) == '/') {\n            slashIndex = i;\n            slashCount++;\n        }\n    }\n\n    string outputCwd = \"\";\n    if (slashIndex != 0) {\n        for (int i=slashIndex+1; i&lt;size; i++) {\n            outputCwd += stringCwd.at(i);\n        }\n    }\n\n    return outputCwd;\n}\n</code></pre>\n\n<p>Is there any way to fix this issue by marking the escape sequences as non-printing (like in bash)? Thank you for any help you guys give.</p>\n"}, {"tags": ["c++", "class", "struct"], "comments": [{"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 4, "creation_date": 1577810218, "post_id": 59546525, "comment_id": 105261958, "body": "you don&#39;t need to typedef struct in c++"}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 0, "creation_date": 1577810342, "post_id": 59546525, "comment_id": 105261998, "body": "struct {. . .} indicator = { INDICATOR_MODEL_UNKNOWN, {UNKNOWN_CARD}, };   Reference: <a href=\"https://en.cppreference.com/w/c/language/struct_initialization\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/struct_initialization</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577810479, "post_id": 59546525, "comment_id": 105262040, "body": "the style of initialization, <a href=\"https://en.cppreference.com/w/cpp/language/aggregate_initialization#Designated_initializers\" rel=\"nofollow noreferrer\">Designated initializers</a>, you are using doesn&#39;t exist in C++ yet. Are you building for C++20?"}, {"owner": {"reputation": 1106, "user_id": 4208022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8PLXt.jpg?s=128&g=1", "display_name": "Brandon Dyer", "link": "https://stackoverflow.com/users/4208022/brandon-dyer"}, "edited": false, "score": 0, "creation_date": 1577810569, "post_id": 59546525, "comment_id": 105262075, "body": "remove the equals sign"}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1577831629, "post_id": 59546525, "comment_id": 105266792, "body": "You really should write a constructor here ..."}], "answers": [{"comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577810665, "post_id": 59546587, "comment_id": 105262111, "body": "Note: there are almost no differences between a <code>struct</code> and a <code>class</code>. The only one you are ever likely to notice is <code>class</code>es default to <code>private</code> access and <code>struct</code>s default to <code>public</code>. What you describe applies to <code>struct</code> as well as to <code>class</code>."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 3, "creation_date": 1577810679, "post_id": 59546587, "comment_id": 105262116, "body": "There is no difference between <code>class</code> and <code>struct</code> in C++ except the default level of access (public for struct/private for class). As such, I&#39;m not sure what good switching between the two will do."}, {"owner": {"reputation": 86, "user_id": 5593234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfdec5643c0c11871fe68edef3e14276?s=128&d=identicon&r=PG&f=1", "display_name": "infinity-1", "link": "https://stackoverflow.com/users/5593234/infinity-1"}, "edited": false, "score": 0, "creation_date": 1577810945, "post_id": 59546587, "comment_id": 105262179, "body": "I think the idea of switching the two would make it easier to create the instance of both the <code>Buzzer</code> class as well as <code>indicator</code>. Personally, the only time I use structs is when they are simple groups of discrete data that don&#39;t need any functions to stand on their own. In this case, the <code>struct</code> has a <code>class</code> nested inside, why not just turn the whole thing into a <code>class</code> and afford more appropriate access permissions?"}, {"owner": {"reputation": 1233, "user_id": 5366130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce3d4bd07d1115070e7727de382560ba?s=128&d=identicon&r=PG&f=1", "display_name": "Omid CompSCI", "link": "https://stackoverflow.com/users/5366130/omid-compsci"}, "edited": false, "score": 1, "creation_date": 1577839732, "post_id": 59546587, "comment_id": 105267827, "body": "@infinity-1, structs can have different access levels in C++11 and beyond"}], "tags": [], "owner": {"reputation": 86, "user_id": 5593234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfdec5643c0c11871fe68edef3e14276?s=128&d=identicon&r=PG&f=1", "display_name": "infinity-1", "link": "https://stackoverflow.com/users/5593234/infinity-1"}, "is_accepted": false, "score": 0, "last_activity_date": 1577810515, "creation_date": 1577810515, "answer_id": 59546587, "question_id": 59546525, "link": "https://stackoverflow.com/questions/59546525/how-to-instantiate-class-inside-struct-initializer-list/59546587#59546587", "title": "How to instantiate class inside struct initializer list", "body": "<p>Why not make <code>indicator</code> a class instead? If <code>Buzzer</code> has member functions, you won't have the ability to call those from a struct \"object\". If you make a new <code>Indicator</code> class and instantiate it, you can create a child class of <code>Buzzer</code> and retain all the same functionality of what it looks like you are trying to do here. </p>\n"}, {"comments": [{"owner": {"reputation": 465, "user_id": 1383511, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2e79089faf35c6ada7e35cffd3d45234?s=128&d=identicon&r=PG", "display_name": "NDEthos", "link": "https://stackoverflow.com/users/1383511/ndethos"}, "edited": false, "score": 0, "creation_date": 1577811295, "post_id": 59546659, "comment_id": 105262292, "body": "And how do you instantiate buzzer when it needs HwTimer passed into it?"}], "tags": [], "owner": {"reputation": 1106, "user_id": 4208022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8PLXt.jpg?s=128&g=1", "display_name": "Brandon Dyer", "link": "https://stackoverflow.com/users/4208022/brandon-dyer"}, "is_accepted": false, "score": 0, "last_activity_date": 1577810974, "creation_date": 1577810974, "answer_id": 59546659, "question_id": 59546525, "link": "https://stackoverflow.com/questions/59546525/how-to-instantiate-class-inside-struct-initializer-list/59546659#59546659", "title": "How to instantiate class inside struct initializer list", "body": "<p>Assuming you are using C++20, something like this should work:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>struct Indicator\n{\n    enum IndicatorType model;\n    enum Cards cardIs[NUMBER_OF_CARD_SLOTS];\n    uint8_t NumberOfS;\n    HardwareTimers HwTimer;\n    Buzzer buzzer;\n};\n\nIndicator ind // &lt;- No equals sign\n{\n    .model              = INDICATOR_MODEL_UNKNOWN,\n    .cardIs             = {UNKNOWN_CARD},\n    .NumberOfScales     = 0,\n    // ...\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "is_accepted": false, "score": 0, "last_activity_date": 1577844178, "creation_date": 1577844178, "answer_id": 59549589, "question_id": 59546525, "link": "https://stackoverflow.com/questions/59546525/how-to-instantiate-class-inside-struct-initializer-list/59549589#59549589", "title": "How to instantiate class inside struct initializer list", "body": "<p>C++ cannot dynamically initialize an enum and any compile time solved declaration  </p>\n\n<p>it might be finely done by use of template statically</p>\n"}], "owner": {"reputation": 465, "user_id": 1383511, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/2e79089faf35c6ada7e35cffd3d45234?s=128&d=identicon&r=PG", "display_name": "NDEthos", "link": "https://stackoverflow.com/users/1383511/ndethos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1577844178, "creation_date": 1577810097, "last_edit_date": 1577810148, "question_id": 59546525, "link": "https://stackoverflow.com/questions/59546525/how-to-instantiate-class-inside-struct-initializer-list", "title": "How to instantiate class inside struct initializer list", "body": "<p>Given a struct: </p>\n\n<pre><code>typedef struct\n{\n    enum IndicatorType model;\n    enum Cards cardIs[NUMBER_OF_CARD_SLOTS];\n    uint8_t NumberOfS;\n    HardwareTimers HwTimer;\n    Buzzer buzzer;\n\n}indicator;\n</code></pre>\n\n<p>and buzzer class instantiation is:</p>\n\n<pre><code>Buzzer::Buzzer(HardwareTimers* hwTimer)\n</code></pre>\n\n<p>How do I instantiate the struct using an initializer list?</p>\n\n<p>What I have tried:</p>\n\n<pre><code>indicator ind =//ind is short for indicator.\n{\n    .model              = INDICATOR_MODEL_UNKNOWN,\n    .cardIs             = {UNKNOWN_CARD},\n    .NumberOfScales     = 0\n};\n</code></pre>\n\n<p>Gives \"could not convert 'brace-enclosed initializer list()' from 'brace-enclosed initializer list' to 'Buzzer'\"</p>\n\n<p>I'm unsure how to add the buzzer to the initializer list and pass it the hardware timer that is part of the struct. </p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "string", "post", "wininet", "wstring"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577810548, "post_id": 59546508, "comment_id": 105262067, "body": "According to the documentation <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/wininet/nf-wininet-httpsendrequestw\" rel=\"nofollow noreferrer\">here</a>, the last parameter of <code>HttpSendRequestW</code> is the number of <i>bytes</i>, not the number of characters.  Try <code>dataStr.size() * sizeof(WCHAR);</code>"}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 12633114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9acefd0dd65f6fc5467a75419dbb9ed?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan ZAMBA", "link": "https://stackoverflow.com/users/12633114/erwan-zamba"}, "edited": false, "score": 0, "creation_date": 1577811341, "post_id": 59546615, "comment_id": 105262310, "body": "Thanks for your answer, indeed I just want to send special char like <code>\u20ac</code> or <code>&#233;</code>, <code>&#224;</code>... Could you help me to have a proper code ?"}, {"owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "reply_to_user": {"reputation": 9, "user_id": 12633114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9acefd0dd65f6fc5467a75419dbb9ed?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan ZAMBA", "link": "https://stackoverflow.com/users/12633114/erwan-zamba"}, "edited": false, "score": 0, "creation_date": 1577963995, "post_id": 59546615, "comment_id": 105292587, "body": "@ejeqaddoj-6455: std::string dataStr = u8&quot;\u20ac&quot;; Then leave everything else the same."}, {"owner": {"reputation": 9, "user_id": 12633114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9acefd0dd65f6fc5467a75419dbb9ed?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan ZAMBA", "link": "https://stackoverflow.com/users/12633114/erwan-zamba"}, "edited": false, "score": 0, "creation_date": 1577982591, "post_id": 59546615, "comment_id": 105301291, "body": "Hey, I am interesting by your answer but the problem is the same. Could you post a &quot;turnkey&quot; solution ? Thanks."}], "tags": [], "owner": {"reputation": 7865, "user_id": 2331956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ede184a71447fbba327ad6190c079888?s=128&d=identicon&r=PG", "display_name": "Mike Vine", "link": "https://stackoverflow.com/users/2331956/mike-vine"}, "is_accepted": false, "score": 0, "last_activity_date": 1577810696, "creation_date": 1577810696, "answer_id": 59546615, "question_id": 59546508, "link": "https://stackoverflow.com/questions/59546508/post-request-trucated-with-wstring-type-and-well-formed-using-string/59546615#59546615", "title": "POST request trucated with wstring type and well formed using string", "body": "<p>HttpSendRequestW takes a <em>size in bytes</em> for the data size parameter but you are using wide strings so you really want:</p>\n\n<pre><code>HttpSendRequestW(hRequest, contentType, strContentType.size(), data, sizeof(WCHAR)*dataStr.size());\n</code></pre>\n\n<p>However, http really works properly using utf8 so sending utf16 is kinda weird (although as you can interpret the data-payload however you wish so sending utf16 is ok I guess).</p>\n\n<p>What you really want to do is just send utf8 anyway - which you can do using narrow strings - just make dataStr a std::string and fill it with utf8 code points and you're good.</p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 12633114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9acefd0dd65f6fc5467a75419dbb9ed?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan ZAMBA", "link": "https://stackoverflow.com/users/12633114/erwan-zamba"}, "edited": false, "score": 0, "creation_date": 1577876333, "post_id": 59548476, "comment_id": 105272425, "body": "Thanks for your answer, in place of using wstring and convert it to UTF-8, it&#39;s not more logical to use string and send it normally as UTF-8 content ? Could you help me to convert the code ? Thanks."}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "reply_to_user": {"reputation": 9, "user_id": 12633114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9acefd0dd65f6fc5467a75419dbb9ed?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan ZAMBA", "link": "https://stackoverflow.com/users/12633114/erwan-zamba"}, "edited": false, "score": 0, "creation_date": 1577886828, "post_id": 59548476, "comment_id": 105274695, "body": "use <code>u8&quot;string&quot;</code>"}, {"owner": {"reputation": 9, "user_id": 12633114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9acefd0dd65f6fc5467a75419dbb9ed?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan ZAMBA", "link": "https://stackoverflow.com/users/12633114/erwan-zamba"}, "edited": false, "score": 0, "creation_date": 1577982596, "post_id": 59548476, "comment_id": 105301296, "body": "Hey, I am interesting by your answer but the problem is the same. Could you post a &quot;turnkey&quot; solution ? Thanks."}], "tags": [], "owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "is_accepted": false, "score": 0, "last_activity_date": 1577826719, "creation_date": 1577826719, "answer_id": 59548476, "question_id": 59546508, "link": "https://stackoverflow.com/questions/59546508/post-request-trucated-with-wstring-type-and-well-formed-using-string/59548476#59548476", "title": "POST request trucated with wstring type and well formed using string", "body": "<p>The server expects UTF8 data (<code>dataStr</code>), so data must be converted from UTF16 to UTF8. Keep everything else in wide char format, as those functions are properly handled by wide string APIs</p>\n\n<pre><code>//convert dataStr to UTF8\nint sz = WideCharToMultiByte(CP_UTF8, 0, dataStr.c_str(), -1, 0, 0, 0, 0);\nstd::string utf8(sz, 0);\nWideCharToMultiByte(CP_UTF8, 0, dataStr.c_str(), (int)dataStr.size(), &amp;utf8[0], sz, 0, 0);\n\n//send UTF8 data\nHttpSendRequestW(hRequest, contentType, strContentType.size(), utf8.data(), utf8.size());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 12633114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9acefd0dd65f6fc5467a75419dbb9ed?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan ZAMBA", "link": "https://stackoverflow.com/users/12633114/erwan-zamba"}, "is_accepted": false, "score": 0, "last_activity_date": 1578048995, "creation_date": 1578048995, "answer_id": 59577320, "question_id": 59546508, "link": "https://stackoverflow.com/questions/59546508/post-request-trucated-with-wstring-type-and-well-formed-using-string/59577320#59577320", "title": "POST request trucated with wstring type and well formed using string", "body": "<p>I had the same problem and this is the solution I found and it works perfectlly :</p>\n\n<pre><code>void sendHello()\n{\n    LPCSTR header = \"Content-Type: application/x-www-form-urlencoded; charset=utf-8\";\n    std::string dataStr = u8\"message=\u00e9\u00e9\u00e0\u00e0\u20ac\u20ac\";\n    LPVOID myMessage = (LPVOID)dataStr.c_str();\n    HINTERNET hInternet = InternetOpenA(\"InetURL/1.0\", INTERNET_OPEN_TYPE_PRECONFIG, NULL, NULL, 0);\n    HINTERNET hConnection = InternetConnectA(hInternet, \"127.0.0.1\", 80, \" \", \" \", INTERNET_SERVICE_HTTP, 0, 1);\n    HINTERNET hRequest = HttpOpenRequestA(hConnection, \"POST\", \"/SendMessage.php\", NULL, NULL, NULL, 0, 1);\n    HttpSendRequestA(hRequest, header, strlen(header), myMessage, dataStr.size());\n}\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12633114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9acefd0dd65f6fc5467a75419dbb9ed?s=128&d=identicon&r=PG&f=1", "display_name": "Erwan ZAMBA", "link": "https://stackoverflow.com/users/12633114/erwan-zamba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1578048995, "creation_date": 1577809927, "question_id": 59546508, "link": "https://stackoverflow.com/questions/59546508/post-request-trucated-with-wstring-type-and-well-formed-using-string", "title": "POST request trucated with wstring type and well formed using string", "body": "<p>I want to make a POST request using Wininet with UTF-8 special char like <code>\u20ac</code>.</p>\n\n<pre><code>void sendArticle()\n{\n    LPCWSTR browser = L\"MyClientApp/1.0\";\n    LPCWSTR domain = L\"127.0.0.1\";\n    LPCWSTR methode = L\"POST\";\n    LPCWSTR page = L\"/shopping/article.php\";\n    std::wstring strContentType = L\"Content-Type: application/x-www-form-urlencoded; charset=utf-8\";\n    LPCWSTR contentType = strContentType.c_str();\n    std::wstring dataStr = L\"article=thecontent\";\n    LPVOID data = (LPVOID)dataStr.c_str();\n\n    HINTERNET hInternet = InternetOpenW(browser, INTERNET_OPEN_TYPE_PRECONFIG, NULL, NULL, 0);\n    HINTERNET hConnection = InternetConnectW(hInternet, domain, 80, NULL, NULL, INTERNET_SERVICE_HTTP, 0, 1);\n    HINTERNET hRequest  = HttpOpenRequestW(hConnection, methode, page, NULL, NULL, NULL, 0, 1);\n    HttpSendRequestW(hRequest, contentType, strContentType.size(), data, dataStr.size());\n}\n</code></pre>\n\n<p>If I use string type for variable <code>dataStr</code>, the content is sent correctly. If I use wstring type for the variable (to send UTF-8 content), the request is truncated.\nI can observe TCP packet using Wireshark.\nTo resume, this line <code>std::string dataStr = \"article=thecontent\";</code> works but this line <code>std::wstring dataStr = L\"article=thecontent\";</code> not works.\nI checked the int returned by <code>size()</code> method and it's correct. What is this strange phenomenon and how to solve it ?</p>\n"}, {"tags": ["c++", "alsa"], "answers": [{"tags": [], "owner": {"reputation": 157205, "user_id": 11654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586424ca0847070dc1868aa58077003e?s=128&d=identicon&r=PG", "display_name": "CL.", "link": "https://stackoverflow.com/users/11654/cl"}, "is_accepted": false, "score": 0, "last_activity_date": 1577949482, "creation_date": 1577949482, "answer_id": 59559648, "question_id": 59546482, "link": "https://stackoverflow.com/questions/59546482/alsa-capture-missing-frames/59559648#59559648", "title": "ALSA Capture missing frames", "body": "<p><code>snd_pcm_readi()</code> returns as many samples as are available. And it will not wait for more if the device is in non-blocking mode.</p>\n\n<p>You have only <code>retval</code> samples. If you want to handle 8000 samples at once, call <code>snd_pcm_readi()</code> in a loop with the remaining buffer.</p>\n"}], "owner": {"reputation": 11, "user_id": 12632878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ca16943e15924c6c9dc56adfb6bf29e?s=128&d=identicon&r=PG&f=1", "display_name": "DalePenn", "link": "https://stackoverflow.com/users/12632878/dalepenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577949482, "creation_date": 1577809710, "question_id": 59546482, "link": "https://stackoverflow.com/questions/59546482/alsa-capture-missing-frames", "title": "ALSA Capture missing frames", "body": "<p>I have inherited a chunk of code that is using ALSA to capture an audio input at 8KHz, 8 bits, 1 channel. The code looks rather simple, it sets channels to 1, rate to 8000, and period size to 8000. The goal of this program to gather audio data in 30+ min chunks at a time.</p>\n\n<p>The main loop looks like </p>\n\n<pre><code>int retval;\nsnd_pcm_uframes_t numFrames = 8000;\n\nwhile (!exit)\n{\n   // Gather data\n   while( (unsigned int)(retval = snd_pcm_readi ( handle, buffer, numFrames ) ) != numFrames )\n   {\n      if( retval == -EPIPE )\n      {\n         cerr &lt;&lt; \"overrun \" &lt;&lt; endl;\n         snd_pcm_prepare( handle );\n      } \n      else if ( reval &lt; 0 )\n      {\n         cerr &lt;&lt; \"Error : \" &lt;&lt; snd_strerror( retval ) &lt;&lt; endl;\n         break;\n      }\n   }\n\n   // buffer processing logic here\n}\n</code></pre>\n\n<p>We have been having behavioral issue (not getting the full 8K samples per second, and weird timing), so I added gettimeofday timestamps around the snd_pcm_readi loop to see how time was being used and I got the following :</p>\n\n<p>loop 1 : 1.017 sec\nloop 2 : 2.019 sec\nloop 3 : 0 (less than 1ms)\nloop 4 : 2.016 sec\nloop 5 : .001 sec</p>\n\n<p>.. the 2 loop pattern continues (even run 2.01x sec, odd run 0-1 ms) for the rest of the run. This means I am acutally getting on average less that 8000 samples per second (loss appears to be about 3 seconds per 10 minutes of running). This does not sync well with the other gathered data. Also we would have expected to process the data at about 1 second intervals, not have 2 back to back processes every 2 seconds or so.\nAs an additional check, I printed out the buffer values are setting the hardware parameters and I got the following :</p>\n\n<p>Buffer Size : 43690\nPeriods : 5\nPeriod Size : 8000\nPeriod Time : 1000000\nRate : 8000</p>\n\n<p>So in the end I have 2 questions :</p>\n\n<p>1) Why do I get actual data at less than 8 Khz ? (Possible theory, actual hardware is not quite at 8KHz, even if ALSA thinks it can do it).</p>\n\n<p>2) Why the 2 secs/0 secs cycle on the reads which should be 1 second each ? And what can be done to get it to a real 1 second cycle ?</p>\n\n<p>Thanks for the help.\nDale Pennington</p>\n"}, {"tags": ["c++", "ieee-754", "idioms", "denormal-numbers"], "comments": [{"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 1, "creation_date": 1577829427, "post_id": 59546406, "comment_id": 105266428, "body": "As those options make your code not compliant with standard C++, you should not expect a standard way of doing that making the question somewhat pointless as you already list multiple ways of doing it."}, {"owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "reply_to_user": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577829786, "post_id": 59546406, "comment_id": 105266494, "body": "@Phil1970: Does the standard require no denormal-to-zero? Also, I explained why I&#39;m looking for something else. Think about something like <a href=\"https://www.boost.org/doc/libs/1_71_0/doc/html/stacktrace.html\" rel=\"nofollow noreferrer\">Boost.StackTrace</a> for example - that&#39;s all platform-specific, not-in-the-standard work, and yet it&#39;s a nice cross-platform library."}, {"owner": {"reputation": 105038, "user_id": 1766831, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ee974306d2def46eb69534fbcf95cc5?s=128&d=identicon&r=PG", "display_name": "Rick James", "link": "https://stackoverflow.com/users/1766831/rick-james"}, "edited": false, "score": 0, "creation_date": 1578633421, "post_id": 59546406, "comment_id": 105509852, "body": "Two multiplies should do the equivalent: <code>(x * 2^-53) * 2*53</code>  (The <code>53</code> may be off by 1.)"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577824233, "creation_date": 1577809170, "last_edit_date": 1577824233, "question_id": 59546406, "link": "https://stackoverflow.com/questions/59546406/a-robust-portable-way-to-set-flush-denormals-to-zero", "title": "A robust, portable way to set flush-denormals-to-zero?", "body": "<p>I'm working with some code which uses inline Intel X86_64 assembly to set the processor's SSE flags to include flush-denormal-to-zero and treat-denormals-as-zero: <code>stmxcsr</code> and then <code>ldmxcsr</code>.</p>\n\n<p>I don't particularly like that approach (which we shall denote as approach 1). The <a href=\"https://en.wikipedia.org/wiki/Denormal_number\" rel=\"nofollow noreferrer\">Wikipedia page on denormals</a> suggest a few other options:</p>\n\n<ol start=\"2\">\n<li>Using an environment variable:</li>\n</ol>\n\n<pre><code>#include &lt;fenv.h&gt;\n// ...\nfesetenv(FE_DFL_DISABLE_SSE_DENORMS_ENV);\n</code></pre>\n\n<ol start=\"3\">\n<li>Using one of the XMM registers' headers:</li>\n</ol>\n\n<pre><code>#include &lt;xmmintrin.h&gt;\n// ...\n_mm_setcsr( _mm_getcsr() | 0x0040 | 0x8000 );\n</code></pre>\n\n<ol start=\"4\">\n<li>Using more headers and some macros:</li>\n</ol>\n\n<pre><code>#include &lt;pmmintrin.h&gt;\n_MM_SET_DENORMALS_ZERO_MODE(_MM_DENORMALS_ZERO_ON);\n#include &lt;xmmintrin.h&gt;\n_MM_SET_FLUSH_ZERO_MODE(_MM_FLUSH_ZERO_ON);\n</code></pre>\n\n<p>... but I don't like any of these too much either. They're not in any common/standard library; and, of course, they're Intel-specific. What if I'm on ARM? I might still want to do this. I'm also not sure which of these will work with which compiler (Wikipedia says about some of these that they \"may work\").</p>\n\n<p>So, how should I best tell my processor(s) to flush-denormals-to-zero?</p>\n\n<p>Note: My question hasn't really distinguished between C and C++. I'm interested in a C++ idiom, but if there's only a \"C'ish\" idiom, I can live with that.</p>\n"}, {"tags": ["c++", "qt", "qml", "textarea"], "comments": [{"owner": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 1, "creation_date": 1577815547, "post_id": 59546376, "comment_id": 105263516, "body": "what is your question?"}, {"owner": {"reputation": 1811, "user_id": 1491076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d1bba3b9ebb5d24b587bf6bf64da2d?s=128&d=identicon&r=PG", "display_name": "Nuno Rafael Figueiredo", "link": "https://stackoverflow.com/users/1491076/nuno-rafael-figueiredo"}, "reply_to_user": {"reputation": 10381, "user_id": 2981610, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/BYsd3.jpg?s=128&g=1", "display_name": "folibis", "link": "https://stackoverflow.com/users/2981610/folibis"}, "edited": false, "score": 0, "creation_date": 1577959303, "post_id": 59546376, "comment_id": 105290509, "body": "@folibis: sorry; I thought it was supposed to be the title; missed the question mark; updated."}], "owner": {"reputation": 1811, "user_id": 1491076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8d1bba3b9ebb5d24b587bf6bf64da2d?s=128&d=identicon&r=PG", "display_name": "Nuno Rafael Figueiredo", "link": "https://stackoverflow.com/users/1491076/nuno-rafael-figueiredo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577960447, "creation_date": 1577809013, "last_edit_date": 1577959336, "question_id": 59546376, "link": "https://stackoverflow.com/questions/59546376/how-to-control-qt-textarea-contentheight-with-images-and-text", "title": "How to control Qt TextArea contentHeight with images and text?", "body": "<p>My TextArea content is \"dancing\" in y-axis switching from only images and images with text.</p>\n\n<p>Images are expected to have width and height equal to font pixelSize (14px), but they don't behave like text.</p>\n\n<p>Measuring font height using FontMetrics, one can see that font have height (19px) greater than pixelSize (14px).</p>\n\n<p>It would satisfy if:</p>\n\n<ol>\n<li>generated html paragraph could have a minimum height;</li>\n<li>could apply padding to image</li>\n</ol>\n\n<p>QML snippet:</p>\n\n<pre><code>TextArea {\n    id: textArea\n\n    FontMetrics {\n        id: fontMetrics\n\n        font: textArea.font\n    }\n\n    format: TextEdit.RichText\n\n    (...)\n\n    onTextChanged: {\n        InputUtils.imagify(textArea.textDocument, textArea.font)\n        var originalText = InputUtils.deimagify(textArea.text)\n\n        console.log(\"fontMetrics.height: %1; pixelSize: %2; originalText: %3\",\n                    .arg(fontMetrics.height)\n                    .arg(textArea.font.pixelSize)\n                    .arg(originalText))\n\n        prettyPrint(textArea.text)\n    }\n}\n</code></pre>\n\n<p>C++ snippet:</p>\n\n<pre><code>void InputUtils::imagify(QTextDocument* document, const QFont&amp; font))\n{\n    QTextCursor cursor(document);\n\n    while(auto result = findImage(document))\n    {\n        cursor.setPosition(result-&gt;position);\n\n        QTextCharFormat format;\n        format.setBackground(Qt::yellow);\n        format.setFont(font);\n        cursor.setBlockCharFormat(format);\n\n        QTextImageFormat imageFormat;\n        imageFormat.setName(result-&gt;name);\n        imageFormat.setToolTip(result-&gt;tooltip);\n        imageFormat.setWidth(font.pixelSize);\n        imageFormat.setHeight(font.pixelSize);\n        cursor.insertImage(imageFormat, QTextFrameFormat::InFlow);\n    }\n}\n</code></pre>\n\n<p>Printed log for only image:</p>\n\n<pre><code>TextArea: expression for onTextChanged | fontMetrics.height: 19; pixelSize: 14; originalText: :-)\n</code></pre>\n\n<p>Generated html for only image:</p>\n\n<pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\"&gt;\n&lt;html&gt;\n   &lt;head&gt;\n      &lt;meta name=\"qrichtext\" content=\"1\" /&gt;\n      &lt;style type=\"text/css\"&gt;p, li { white-space: pre-wrap; }&lt;/style&gt;\n   &lt;/head&gt;\n   &lt;body style=\" font-family:'Graphik'; font-size:14px; font-weight:400; font-style:normal;\"&gt;\n      &lt;p style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#0000ff;\"&gt;&lt;img src=\"qrc:/images/smile.png\" width=\"14\" height=\"14\" /&gt;&lt;/p&gt;\n   &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Printed log for image and text:</p>\n\n<pre><code>TextArea: expression for onTextChanged | fontMetrics.height: 19; pixelSize: 14; originalText: :-) something\n</code></pre>\n\n<p>Generated html for image and text:</p>\n\n<pre><code>&lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0//EN\" \"http://www.w3.org/TR/REC-html40/strict.dtd\"&gt;\n&lt;html&gt;\n   &lt;head&gt;\n      &lt;meta name=\"qrichtext\" content=\"1\" /&gt;\n      &lt;style type=\"text/css\"&gt;p, li { white-space: pre-wrap; }&lt;/style&gt;\n   &lt;/head&gt;\n   &lt;body style=\" font-family:'Graphik'; font-size:14px; font-weight:400; font-style:normal;\"&gt;\n      &lt;p style=\" margin-top:0px; margin-bottom:0px; margin-left:0px; margin-right:0px; -qt-block-indent:0; text-indent:0px; background-color:#0000ff;\"&gt;&lt;img src=\"qrc:/images/smile.png\" width=\"14\" height=\"14\" /&gt; something&lt;/p&gt;\n   &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["c++", "arduino", "do-while"], "comments": [{"owner": {"reputation": 95, "user_id": 11923505, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-C6rwhQ11j2c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc9jkyB24w3AUZ5sNzK1lOdvZn_Uw/photo.jpg?sz=128", "display_name": "C. R. Ward", "link": "https://stackoverflow.com/users/11923505/c-r-ward"}, "edited": false, "score": 0, "creation_date": 1577822707, "post_id": 59546132, "comment_id": 105265133, "body": "Suggested advice: Reduce the number of condition tests in the body of the loop to as few as you really need to test. You can carry an assignment in the body of the loop, but it is not recommended (in case of programmer error). In general, refactor your tests to spot the condition that forces you to quit the loop. This is the condition that you should test against."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1577807548, "creation_date": 1577807548, "answer_id": 59546149, "question_id": 59546132, "link": "https://stackoverflow.com/questions/59546132/how-to-get-out-this-do-while-loop/59546149#59546149", "title": "How to get out this Do-While loop?", "body": "<blockquote>\n  <p>But it seems that it can't exit the Do-While unless they're both equal to 2. This is strange to me because the OR condition allows to exit the Do-While with a double options, in this particular case these options are:</p>\n</blockquote>\n\n<p>Actually, it's the opposite.</p>\n\n<p>The loop has two options to <em>keep going</em>.</p>\n\n<p>I'm sure you meant <code>&amp;&amp;</code>, not <code>||</code>.</p>\n\n<blockquote>\n  <p>But wouldn't be that in an AND condition I must match BOTH condition of ending >= 1 AND (at the same time) fin >= 1?</p>\n</blockquote>\n\n<p>Yes, to carry on.</p>\n\n<p>Which means, you only need to <em>not</em> match <em>one</em> of them, to stop.</p>\n"}, {"tags": [], "owner": {"reputation": 216, "user_id": 8410314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/154b1439add01d03d847fcf5c1b2608a?s=128&d=identicon&r=PG&f=1", "display_name": "Lior", "link": "https://stackoverflow.com/users/8410314/lior"}, "is_accepted": false, "score": 2, "last_activity_date": 1577807720, "creation_date": 1577807720, "answer_id": 59546186, "question_id": 59546132, "link": "https://stackoverflow.com/questions/59546132/how-to-get-out-this-do-while-loop/59546186#59546186", "title": "How to get out this Do-While loop?", "body": "<p>In your current state the loop will continue as long as (at least) one of the conditions is true (it doesnt have to be both!).</p>\n\n<p>as long as ending is smaller than 2 <strong>OR</strong> fin is smaller than 2 then the loop will continue.\nIn your code, fin is smaller than 2 so the loop continues...</p>\n"}, {"tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 6, "last_activity_date": 1577807855, "creation_date": 1577807855, "answer_id": 59546205, "question_id": 59546132, "link": "https://stackoverflow.com/questions/59546132/how-to-get-out-this-do-while-loop/59546205#59546205", "title": "How to get out this Do-While loop?", "body": "<p>Remember that if you say <code>while (condition)</code>, you'll loop <strong>so long as <code>condition</code> evaluates to true.</strong> So since your condition is</p>\n\n<pre><code>(ending &lt; 1) || (fin &lt; 1)\n</code></pre>\n\n<p>the only way for this to be false is if both <code>ending &lt; 1</code> is false <em>AND</em> <code>fin &lt; 1</code> is also false.</p>\n\n<p>A simple trick when you're getting mixed up like this is to use <a href=\"https://en.wikipedia.org/wiki/De_Morgan%27s_laws\" rel=\"noreferrer\">DeMorgan's Law</a> to find the contrapositive. In other words, if you want to loop while <code>(ending &lt; 1) || (fin &lt; 1)</code>, that's the same as saying you want to STOP looping when the opposite is true. Using DeMorgan's Law, we can see that this is:</p>\n\n<pre><code>!((ending &lt; 1) || (fin &lt; 1))\n!(ending &lt; 1) &amp;&amp; !(fin &lt; 1)\nending &gt;= 1 &amp;&amp; fin &gt;= 1\n</code></pre>\n\n<p>So we only STOP looping when <code>ending &gt;= 1 &amp;&amp; fin &gt;= 1</code>!</p>\n\n<p>Working the other way, if you want to STOP looping when <code>ending &gt;= 1 || fin &gt;= 1</code>, then we'll loop while the opposite is true. Again working through with DeMorgan's Law...</p>\n\n<pre><code>!(ending &gt;= 1 || fin &gt;= 1)\n!(ending &gt;= 1) &amp;&amp; !(fin &gt;= 1)\nending &lt; 1 &amp;&amp; fin &lt; 1\n</code></pre>\n\n<p>So you wanted an AND instead of an OR all along!</p>\n"}, {"tags": [], "owner": {"reputation": 58, "user_id": 11277926, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7Vh_EdTqrmY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUntaRuoUq7mCRSJePWs8h5Z0AUg/mo/photo.jpg?sz=128", "display_name": "Ev0lv3zz", "link": "https://stackoverflow.com/users/11277926/ev0lv3zz"}, "is_accepted": false, "score": 2, "last_activity_date": 1577808198, "creation_date": 1577808198, "answer_id": 59546267, "question_id": 59546132, "link": "https://stackoverflow.com/questions/59546132/how-to-get-out-this-do-while-loop/59546267#59546267", "title": "How to get out this Do-While loop?", "body": "<p>So, we are talking about the first loop in the code.</p>\n\n<pre><code>  do  {\n\n  Serial.println(\"We are IN Do-While #1\");\n  ending = 2;\n  //fin = 2;\n} while ((ending &lt; 1) || (fin &lt; 1));\n</code></pre>\n\n<p>Here if you don't change the \"fin\" variable it remains the same, and the exit condition will not be accomplished, that causing it not to end.</p>\n\n<p>You could use an if condition it the loop,</p>\n\n<pre><code>  do  {\n\n  Serial.println(\"We are IN Do-While #1\");\n  ending = 2;\n  //fin = 2;\n    if ( ending &gt;= 1 ) break;\n  }\n</code></pre>\n\n<p>Or just use the || operator as you mentioned.</p>\n"}], "owner": {"reputation": 517, "user_id": 9074760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b0fcc7ca6ff7377168ac384dca091e5?s=128&d=identicon&r=PG&f=1", "display_name": "Carlo", "link": "https://stackoverflow.com/users/9074760/carlo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 59546149, "answer_count": 4, "score": 3, "last_activity_date": 1577808198, "creation_date": 1577807413, "last_edit_date": 1577807597, "question_id": 59546132, "link": "https://stackoverflow.com/questions/59546132/how-to-get-out-this-do-while-loop", "title": "How to get out this Do-While loop?", "body": "<p>I've this basic Arduino code, and I want to have <em>2 options to exit this Do-While loop</em>.\nI simplified my original code to highlight the real problem: the Do-While <em>doesn't recognize the OR || condition to exit the loop</em></p>\n\n<p>In this code I'm starting with two integer variables that are equal to zero and as soon as they enter the Do-While, they'will be setted equal to 2 both, so that they can immediately exit the Do-While in the first iteration.</p>\n\n<p>Here's my code:</p>\n\n<pre><code>int fin = 0;\nint ending = 0;\nint counter = 0;\n\n\nvoid setup() {\n\n  Serial.begin(9600);\n\n}; //void setup\n\n\n\nvoid loop ()  {\n\n  do  {\n\n      Serial.println(\"We are IN Do-While #1\");\n      ending = 2;\n      //fin = 2;\n\n  } while ((ending &lt; 1) || (fin &lt; 1)); //I have just one condition for exit the Do-While ending = 1\n\n\nSerial.println(\"We are OUT Do-While #1\");\ndelay(3000);\n\n\n  do {\n\n    counter++;\n  } while(counter&lt;=100);\n\n  Serial.println(\"We are OUT Do-While #2\");\ndelay(3000);\n\n  }\n</code></pre>\n\n<p>My problem is that I'm not setting <em>fin = 2</em>, <strong>because I want to test if the OR condition is working</strong>.</p>\n\n<p>But it seems that it can't exit the Do-While unless they're both equal to 2. This is strange to me because the OR condition allows to exit the Do-While with a double options, in this particular case these options are:</p>\n\n<p><em>ending&lt;1</em> OR (the alternative option).. <em>fin&lt;1</em></p>\n\n<p>Additionally if I change (the rest of the code is the same) the while condition with an AND it behave like I want: so that I have two ways to exit the Do-While loop. \nLike this:</p>\n\n<pre><code>} while ((ending &lt; 1) &amp;&amp; (fin &lt; 1));\n</code></pre>\n\n<p>But wouldn't be that in an AND condition I must match BOTH condition of <em>ending >= 1</em> AND (at the same time) <em>fin >= 1</em> to exit the loop?</p>\n\n<p>Why is this happening?\nand How can I solve this?</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 7, "creation_date": 1577807347, "post_id": 59546067, "comment_id": 105261125, "body": "Then declare it in the surrounding scope? Also thats most definitly not valid C++."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1577811339, "post_id": 59546067, "comment_id": 105262308, "body": "Note that <code>class objectname();</code> declares a function named <code>objectname</code> that takes no arguments and returns <code>class</code>. It does not define an object. That&#39;s not the problem here, though."}], "answers": [{"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1577808218, "post_id": 59546119, "comment_id": 105261397, "body": "A class should usually only have one behaviour."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1577808490, "post_id": 59546119, "comment_id": 105261475, "body": "@LightnessRacesBY-SA3.0 Quite right, answer corrected."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577809893, "post_id": 59546119, "comment_id": 105261859, "body": "It looks like OP is just calling a different constructor, not creating a different type. They probably just need some constructor that takes <code>(bool, bool, something)</code>."}, {"owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "reply_to_user": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1577815243, "post_id": 59546119, "comment_id": 105263425, "body": "@scohe001 Impossible to go into details with the given info.   But yes, probably something like that."}], "tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 5, "last_activity_date": 1577808689, "last_edit_date": 1577808689, "creation_date": 1577807358, "answer_id": 59546119, "question_id": 59546067, "link": "https://stackoverflow.com/questions/59546067/how-can-i-declare-object-in-an-if-statement-and-use-it-wherever-i-want/59546119#59546119", "title": "How can i declare object in an if statement and use it wherever i want?", "body": "<blockquote>\n  <p>How is possible to declare objects in an if [statement].</p>\n</blockquote>\n\n<p>It's not, you can't conditionally declare anything.  What you probably want is to create a <code>class</code> (or group of <code>class</code>es controlled through an interface <code>class</code>) whose behavior is dependent on your boolean condition (or have <code>class</code>es in the group with each <code>class</code>'s behaviour dependent on a single condition if there's more than one condition ).   </p>\n"}, {"comments": [{"owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "edited": false, "score": 0, "creation_date": 1577807763, "post_id": 59546125, "comment_id": 105261247, "body": "But he can do the work you post without a pointer as <code>ClassName objectName o; if(i == &#39;y&#39;)o = objectName; if(j == &#39;n&#39;)o = objectName{something}; objectName.getName();</code>"}, {"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "edited": false, "score": 1, "creation_date": 1577807922, "post_id": 59546125, "comment_id": 105261301, "body": "In that case you have one unnecessary call to the default constructor. The first solution calls the constructor in the body of the condition and the second condition usually uses copy ellision"}, {"owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "edited": false, "score": 0, "creation_date": 1577807976, "post_id": 59546125, "comment_id": 105261319, "body": "Yes. U R right. Thanks"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1577808255, "post_id": 59546125, "comment_id": 105261404, "body": "Not usually, always"}], "tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 1, "last_activity_date": 1577808167, "last_edit_date": 1577808167, "creation_date": 1577807375, "answer_id": 59546125, "question_id": 59546067, "link": "https://stackoverflow.com/questions/59546067/how-can-i-declare-object-in-an-if-statement-and-use-it-wherever-i-want/59546125#59546125", "title": "How can i declare object in an if statement and use it wherever i want?", "body": "<p>You could use a pointer</p>\n\n<pre><code>std::unique_ptr&lt;objectname&gt; o;\nif(i == 'y')o = std::make_unique&lt;objectname&gt;();\nif(j == 'n')o = std::make_unique&lt;objectname&gt;(something);\no-&gt;getName();\n</code></pre>\n\n<p>or a lambda</p>\n\n<pre><code>objectname o([&amp;i, &amp;j](){\n    if(i == 'y')return objectname();\n    if(j == 'n')return objectname(something);\n    return objectname();\n}());\no.getName();\n</code></pre>\n\n<p>if the class has a copy/move constructor</p>\n"}], "owner": {"reputation": 7, "user_id": 12632900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b046e7335c4696c22fd0fa319dee5ee5?s=128&d=identicon&r=PG&f=1", "display_name": "mttgrb", "link": "https://stackoverflow.com/users/12632900/mttgrb"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 1, "closed_date": 1577808121, "answer_count": 2, "score": -5, "last_activity_date": 1577808689, "creation_date": 1577807059, "question_id": 59546067, "link": "https://stackoverflow.com/questions/59546067/how-can-i-declare-object-in-an-if-statement-and-use-it-wherever-i-want", "closed_reason": "Needs details or clarity", "title": "How can i declare object in an if statement and use it wherever i want?", "body": "<pre><code>if(i == 'y')class objectname();\nif(j == 'n')class objectname(something);\nobjectname.getName();\n</code></pre>\n\n<p>How is possible to declare objects in an if, and use it in somewhere else? Because if i do like that <strong>'objectname' was not declared in this scope;</strong> \nThank you </p>\n"}, {"tags": ["c++", "c++11", "asynchronous", "std"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 7, "creation_date": 1577806870, "post_id": 59545999, "comment_id": 105260961, "body": "Note that <code>std::async(std::launch::async, [&amp;] {add(n);});</code> is not asynchronous because the return value is ignored as <a href=\"https://stackoverflow.com/questions/44654548/stdasync-doesnt-work-asynchronously\">explained here</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1577806910, "post_id": 59545999, "comment_id": 105260975, "body": "It is almost certainly not a bug in the standard library implementation."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1577806977, "post_id": 59545999, "comment_id": 105260996, "body": "Yeah sounds like maybe you just wanted to start some threads?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1577806998, "post_id": 59545999, "comment_id": 105261001, "body": "I don&#39;t see why you would expect your <code>async</code> workers to work forever. They call the provided function which eventually finishes. The deadlock you see might just be the workers having finished."}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1577821441, "post_id": 59545999, "comment_id": 105264895, "body": "@Fran&#231;oisAndrieux Those workers should not have finished before incrementing the counter all the way to <code>1000000000000L</code>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1577823931, "post_id": 59545999, "comment_id": 105265430, "body": "Possibly related: <a href=\"https://bugs.llvm.org/show_bug.cgi?id=38181\" rel=\"nofollow noreferrer\">bugs.llvm.org/show_bug.cgi?id=38181</a>"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577828917, "post_id": 59545999, "comment_id": 105266344, "body": "Given that you see the deadlock with old versions of CLang, I would expect that it has beed fixed somewhere between version 6.0.1 and version 11.0.0."}], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 1591648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb8958eb4a5c6bee0b82121f8478f0e?s=128&d=identicon&r=PG", "display_name": "tricycle", "link": "https://stackoverflow.com/users/1591648/tricycle"}, "edited": false, "score": 0, "creation_date": 1577939495, "post_id": 59550956, "comment_id": 105284879, "body": "Thanks. Yes, good point. The program didn&#39;t work as I expected. Actually, it was totally synchronized. The point it, if it is synchronized, it shouldn&#39;t freeze."}], "tags": [], "owner": {"reputation": 20129, "user_id": 2944616, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4JSYv.png?s=128&g=1", "display_name": "greywolf82", "link": "https://stackoverflow.com/users/2944616/greywolf82"}, "is_accepted": false, "score": 1, "last_activity_date": 1577950234, "last_edit_date": 1577950234, "creation_date": 1577866574, "answer_id": 59550956, "question_id": 59545999, "link": "https://stackoverflow.com/questions/59545999/stdasync-causes-deadlock/59550956#59550956", "title": "std::async causes deadlock?", "body": "<p>You are not taking into account the return value of <code>std::async</code>, the future returned will block any execution until the end of the task you started with <code>std::async</code>. This program as written, it's not performing what you expect.\nIn addition you are calling std::async with recursion and it's not granted it will spawn a new thread, it can manage a pool so if the pool is busy you program can freeze apparently since the loop you are doing is really long. If you want more control you can use std::thread with std::packaged_task</p>\n"}], "owner": {"reputation": 190, "user_id": 1591648, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcb8958eb4a5c6bee0b82121f8478f0e?s=128&d=identicon&r=PG", "display_name": "tricycle", "link": "https://stackoverflow.com/users/1591648/tricycle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1577950234, "creation_date": 1577806600, "last_edit_date": 1577877170, "question_id": 59545999, "link": "https://stackoverflow.com/questions/59545999/stdasync-causes-deadlock", "title": "std::async causes deadlock?", "body": "<p>I was trying to use std::async in a heavy workload application to improve the performance but I encountered deadlock from time to time. I debugged for a very long time and I am almost certain that my code was fine and it seemed something wrong with std library.</p>\n\n<p>So I wrote a simple test program to testify:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;algorithm&gt;\n#include &lt;numeric&gt;\n#include &lt;future&gt;\n#include &lt;string&gt;\n#include &lt;mutex&gt;\n#include &lt;unistd.h&gt;\n#include &lt;atomic&gt;\n#include &lt;iomanip&gt;\n\nstd::atomic_long numbers[6];\n\nvoid add(std::atomic_long&amp; n)\n{\n    ++n;\n}\n\nvoid func2(std::atomic_long&amp; n)\n{\n    for (auto i = 0L; i &lt; 1000000000000L; ++i)\n    {\n        std::async(std::launch::async, [&amp;] {add(n);});   // Small task, I want to run them simultaneously\n    }\n}\n\nint main()\n{\n    std::vector&lt;std::future&lt;void&gt;&gt; results;\n    for (int i = 0; i &lt; 6; ++i)\n    {\n        auto&amp; n = numbers[i];\n        results.push_back(std::async(std::launch::async, [&amp;n] {func2(n);}));\n    }\n\n    while (true)\n    {\n        sleep(1);\n        for (int i = 0; i &lt; 6; ++i)\n            std::cout &lt;&lt; std::setw(20) &lt;&lt; numbers[i] &lt;&lt; \" \";\n        std::cout &lt;&lt; std::endl;\n    }\n\n    for (auto&amp; r : results)\n    {\n        r.wait();\n    }\n    return 0;\n}\n</code></pre>\n\n<p>This program will produce output like this:</p>\n\n<pre><code>              763700               779819               754005               763287               767713               748994 \n              768822               785172               759678               769393               772956               754469 \n              773529               789382               763524               772704               776398               757864 \n              778560               794419               768580               777507               781542               762991 \n              782056               795578               771704               780554               784865               766162 \n              801633               812610               788111               802617               803661               784894 \n</code></pre>\n\n<p>After a time (minutes or hours), if there was a deadlock, the output will be like this:</p>\n\n<pre><code>             4435337              4452421              4507907              4501378              2549550              4462899 \n             4441213              4457648              4514424              4506626              2549550              4468019 \n             4446301              4462675              4519272              4511889              2549550              4473266 \n             4453940              4470304              4526382              4519513              2549550              4480872 \n             4461095              4477708              4533272              4526901              2549550              4488313 \n             4470974              4488287              4543442              4537286              2549550              4498733 \n</code></pre>\n\n<p><strong>The fifth column was frozen.</strong></p>\n\n<p>After one day, it became this:</p>\n\n<pre><code>            23934912             23967635             24007250             23931203              2549550           3249788689 \n            23934912             23967635             24007250             23931203              2549550           3249816818 \n            23934912             23967635             24007250             23931203              2549550           3249835009 \n            23934912             23967635             24007250             23931203              2549550           3249860262 \n            23934912             23967635             24007250             23931203              2549550           3249894331 \n</code></pre>\n\n<p>Almost all columns froze except last column. It look really odd.</p>\n\n<p>I ran it on Linux, macOS, FreeBSD, and the result was:</p>\n\n<ul>\n<li>macOS:10.15.2, Clang:11.0.0, no deadlock</li>\n<li>FreeBSD:12.0, Clang:6.0.1, deadlock</li>\n<li>Linux: ubuntu 5.0.0-37, g++:7.4.0, no deadlock</li>\n<li>Linux: ubuntu 4.4.0-21, Clang:3.8.0, deadlock</li>\n</ul>\n\n<p>In the gdb, the call stack was:</p>\n\n<pre><code>(gdb) thread apply all bt\n\nThread 10 (LWP 100467 of process 37763):\n#0  0x000000080025c630 in ?? () from /lib/libthr.so.3\n#1  0x0000000000000000 in ?? ()\nBacktrace stopped: Cannot access memory at address 0x7fff4ad57000\n\nThread 9 (LWP 100464 of process 37763):\n#0  0x000000080046fafa in _umtx_op () from /lib/libc.so.7\n#1  0x0000000800264912 in ?? () from /lib/libthr.so.3\n#2  0x000000080031f9f9 in std::__1::mutex::unlock() () from /usr/lib/libc++.so.1\n#3  0x00000008002e8f55 in std::__1::__assoc_sub_state::set_value() () from /usr/lib/libc++.so.1\n#4  0x00000000002053e1 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::__execute() ()\n#5  0x0000000000205763 in void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, void (std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::*)(), std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;*&gt; &gt;(void*) ()\n#6  0x000000080025c776 in ?? () from /lib/libthr.so.3\n#7  0x0000000000000000 in ?? ()\nBacktrace stopped: Cannot access memory at address 0x7fff6944a000\n\nThread 8 (LWP 100431 of process 37763):\n#0  0x000000080046fafa in _umtx_op () from /lib/libc.so.7\n#1  0x0000000800264912 in ?? () from /lib/libthr.so.3\n#2  0x000000080031f9f9 in std::__1::mutex::unlock() () from /usr/lib/libc++.so.1\n#3  0x00000008002e8f55 in std::__1::__assoc_sub_state::set_value() () from /usr/lib/libc++.so.1\n#4  0x00000000002053e1 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::__execute() ()\n#5  0x0000000000205763 in void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, void (std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::*)(), std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;*&gt; &gt;(void*) ()\n#6  0x000000080025c776 in ?? () from /lib/libthr.so.3\n#7  0x0000000000000000 in ?? ()\nBacktrace stopped: Cannot access memory at address 0x7fffc371a000\n\nThread 7 (LWP 100657 of process 37763):\n#0  0x000000080026a66c in ?? () from /lib/libthr.so.3\n#1  0x000000080025e731 in ?? () from /lib/libthr.so.3\n#2  0x0000000800268388 in ?? () from /lib/libthr.so.3\n#3  0x000000080032de72 in std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) () from /usr/lib/libc++.so.1\n#4  0x00000008002e971b in std::__1::__assoc_sub_state::wait() () from /usr/lib/libc++.so.1\n#5  0x0000000000205389 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::__on_zero_shared() ()\n#6  0x000000000020346b in func2(std::__1::atomic&lt;long&gt;&amp;) ()\n#7  0x0000000000206f18 in main::$_1::operator()() const ()\n#8  0x0000000000206eed in void std::__1::__async_func&lt;main::$_1&gt;::__execute&lt;&gt;(std::__1::__tuple_indices&lt;&gt;) ()\n#9  0x0000000000206ea5 in std::__1::__async_func&lt;main::$_1&gt;::operator()() ()\n#10 0x0000000000206df3 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::__execute() ()\n#11 0x0000000000207183 in void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, void (std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::*)(), std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;*&gt; &gt;(void*) ()\n#12 0x000000080025c776 in ?? () from /lib/libthr.so.3\n#13 0x0000000000000000 in ?? ()\nBacktrace stopped: Cannot access memory at address 0x7fffdf5f9000\n\nThread 6 (LWP 100656 of process 37763):\n#0  0x000000080026a66c in ?? () from /lib/libthr.so.3\n#1  0x000000080025e731 in ?? () from /lib/libthr.so.3\n#2  0x0000000800268388 in ?? () from /lib/libthr.so.3\n#3  0x000000080032de72 in std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) () from /usr/lib/libc++.so.1\n#4  0x00000008002e971b in std::__1::__assoc_sub_state::wait() () from /usr/lib/libc++.so.1\n#5  0x0000000000205389 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::__on_zero_shared() ()\n#6  0x0000000000207a22 in std::__1::__release_shared_count::operator()(std::__1::__shared_count*) ()\n#7  0x00000000002044f4 in std::__1::future&lt;void&gt; std::__1::__make_async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;(std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;&amp;&amp;) ()\n#8  0x00000000002035ea in std::__1::future&lt;std::__1::__invoke_of&lt;std::__1::decay&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;::type&gt;::type&gt; std::__1::async&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;(std::__1::launch, func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&amp;&amp;) ()\n#9  0x0000000000203462 in func2(std::__1::atomic&lt;long&gt;&amp;) ()\n#10 0x0000000000206f18 in main::$_1::operator()() const ()\n#11 0x0000000000206eed in void std::__1::__async_func&lt;main::$_1&gt;::__execute&lt;&gt;(std::__1::__tuple_indices&lt;&gt;) ()\n#12 0x0000000000206ea5 in std::__1::__async_func&lt;main::$_1&gt;::operator()() ()\n#13 0x0000000000206df3 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::__execute() ()\n#14 0x0000000000207183 in void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, void (std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::*)(), std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;*&gt; &gt;(void*) ()\n#15 0x000000080025c776 in ?? () from /lib/libthr.so.3\n#16 0x0000000000000000 in ?? ()\nBacktrace stopped: Cannot access memory at address 0x7fffdf7fa000\n\nThread 5 (LWP 100655 of process 37763):\n#0  0x000000080026a66c in ?? () from /lib/libthr.so.3\n#1  0x000000080025e731 in ?? () from /lib/libthr.so.3\n#2  0x0000000800268388 in ?? () from /lib/libthr.so.3\n#3  0x000000080032de72 in std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) () from /usr/lib/libc++.so.1\n#4  0x00000008002e971b in std::__1::__assoc_sub_state::wait() () from /usr/lib/libc++.so.1\n#5  0x0000000000205389 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::__on_zero_shared() ()\n#6  0x0000000000207a22 in std::__1::__release_shared_count::operator()(std::__1::__shared_count*) ()\n#7  0x00000000002044f4 in std::__1::future&lt;void&gt; std::__1::__make_async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;(std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;&amp;&amp;) ()\n#8  0x00000000002035ea in std::__1::future&lt;std::__1::__invoke_of&lt;std::__1::decay&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;::type&gt;::type&gt; std::__1::async&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;(std::__1::launch, func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&amp;&amp;) ()\n#9  0x0000000000203462 in func2(std::__1::atomic&lt;long&gt;&amp;) ()\n#10 0x0000000000206f18 in main::$_1::operator()() const ()\n#11 0x0000000000206eed in void std::__1::__async_func&lt;main::$_1&gt;::__execute&lt;&gt;(std::__1::__tuple_indices&lt;&gt;) ()\n#12 0x0000000000206ea5 in std::__1::__async_func&lt;main::$_1&gt;::operator()() ()\n#13 0x0000000000206df3 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::__execute() ()\n#14 0x0000000000207183 in void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, void (std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::*)(), std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;*&gt; &gt;(void*) ()\n#15 0x000000080025c776 in ?? () from /lib/libthr.so.3\n#16 0x0000000000000000 in ?? ()\nBacktrace stopped: Cannot access memory at address 0x7fffdf9fb000\n\nThread 4 (LWP 100654 of process 37763):\n#0  0x000000080026a66c in ?? () from /lib/libthr.so.3\n#1  0x000000080025e731 in ?? () from /lib/libthr.so.3\n#2  0x0000000800268388 in ?? () from /lib/libthr.so.3\n#3  0x000000080032de72 in std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) () from /usr/lib/libc++.so.1\n#4  0x00000008002e971b in std::__1::__assoc_sub_state::wait() () from /usr/lib/libc++.so.1\n#5  0x0000000000205389 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::__on_zero_shared() ()\n#6  0x0000000000207a22 in std::__1::__release_shared_count::operator()(std::__1::__shared_count*) ()\n#7  0x00000000002044f4 in std::__1::future&lt;void&gt; std::__1::__make_async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;(std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;&amp;&amp;) ()\n#8  0x00000000002035ea in std::__1::future&lt;std::__1::__invoke_of&lt;std::__1::decay&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;::type&gt;::type&gt; std::__1::async&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;(std::__1::launch, func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&amp;&amp;) ()\n#9  0x0000000000203462 in func2(std::__1::atomic&lt;long&gt;&amp;) ()\n#10 0x0000000000206f18 in main::$_1::operator()() const ()\n#11 0x0000000000206eed in void std::__1::__async_func&lt;main::$_1&gt;::__execute&lt;&gt;(std::__1::__tuple_indices&lt;&gt;) ()\n#12 0x0000000000206ea5 in std::__1::__async_func&lt;main::$_1&gt;::operator()() ()\n#13 0x0000000000206df3 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::__execute() ()\n#14 0x0000000000207183 in void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, void (std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::*)(), std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;*&gt; &gt;(void*) ()\n#15 0x000000080025c776 in ?? () from /lib/libthr.so.3\n#16 0x0000000000000000 in ?? ()\nBacktrace stopped: Cannot access memory at address 0x7fffdfbfc000\n\nThread 3 (LWP 100653 of process 37763):\n#0  0x000000080026a66c in ?? () from /lib/libthr.so.3\n#1  0x000000080025e731 in ?? () from /lib/libthr.so.3\n#2  0x0000000800268388 in ?? () from /lib/libthr.so.3\n#3  0x000000080032de72 in std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) () from /usr/lib/libc++.so.1\n#4  0x00000008002e971b in std::__1::__assoc_sub_state::wait() () from /usr/lib/libc++.so.1\n#5  0x0000000000205389 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::__on_zero_shared() ()\n#6  0x0000000000207a22 in std::__1::__release_shared_count::operator()(std::__1::__shared_count*) ()\n#7  0x00000000002044f4 in std::__1::future&lt;void&gt; std::__1::__make_async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;(std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;&amp;&amp;) ()\n#8  0x00000000002035ea in std::__1::future&lt;std::__1::__invoke_of&lt;std::__1::decay&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;::type&gt;::type&gt; std::__1::async&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;(std::__1::launch, func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&amp;&amp;) ()\n#9  0x0000000000203462 in func2(std::__1::atomic&lt;long&gt;&amp;) ()\n#10 0x0000000000206f18 in main::$_1::operator()() const ()\n#11 0x0000000000206eed in void std::__1::__async_func&lt;main::$_1&gt;::__execute&lt;&gt;(std::__1::__tuple_indices&lt;&gt;) ()\n#12 0x0000000000206ea5 in std::__1::__async_func&lt;main::$_1&gt;::operator()() ()\n#13 0x0000000000206df3 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::__execute() ()\n#14 0x0000000000207183 in void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, void (std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::*)(), std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;*&gt; &gt;(void*) ()\n#15 0x000000080025c776 in ?? () from /lib/libthr.so.3\n#16 0x0000000000000000 in ?? ()\nBacktrace stopped: Cannot access memory at address 0x7fffdfdfd000\n\nThread 2 (LWP 100652 of process 37763):\n#0  0x000000080026a66c in ?? () from /lib/libthr.so.3\n#1  0x000000080025e731 in ?? () from /lib/libthr.so.3\n#2  0x0000000800268388 in ?? () from /lib/libthr.so.3\n#3  0x000000080032de72 in std::__1::condition_variable::wait(std::__1::unique_lock&lt;std::__1::mutex&gt;&amp;) () from /usr/lib/libc++.so.1\n#4  0x00000008002e971b in std::__1::__assoc_sub_state::wait() () from /usr/lib/libc++.so.1\n#5  0x0000000000205389 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;::__on_zero_shared() ()\n#6  0x0000000000207a22 in std::__1::__release_shared_count::operator()(std::__1::__shared_count*) ()\n#7  0x00000000002044f4 in std::__1::future&lt;void&gt; std::__1::__make_async_assoc_state&lt;void, std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt; &gt;(std::__1::__async_func&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;&amp;&amp;) ()\n#8  0x00000000002035ea in std::__1::future&lt;std::__1::__invoke_of&lt;std::__1::decay&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;::type&gt;::type&gt; std::__1::async&lt;func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&gt;(std::__1::launch, func2(std::__1::atomic&lt;long&gt;&amp;)::$_0&amp;&amp;) ()\n#9  0x0000000000203462 in func2(std::__1::atomic&lt;long&gt;&amp;) ()\n#10 0x0000000000206f18 in main::$_1::operator()() const ()\n#11 0x0000000000206eed in void std::__1::__async_func&lt;main::$_1&gt;::__execute&lt;&gt;(std::__1::__tuple_indices&lt;&gt;) ()\n#12 0x0000000000206ea5 in std::__1::__async_func&lt;main::$_1&gt;::operator()() ()\n#13 0x0000000000206df3 in std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::__execute() ()\n#14 0x0000000000207183 in void* std::__1::__thread_proxy&lt;std::__1::tuple&lt;std::__1::unique_ptr&lt;std::__1::__thread_struct, std::__1::default_delete&lt;std::__1::__thread_struct&gt; &gt;, void (std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;::*)(), std::__1::__async_assoc_state&lt;void, std::__1::__async_func&lt;main::$_1&gt; &gt;*&gt; &gt;(void*) ()\n#15 0x000000080025c776 in ?? () from /lib/libthr.so.3\n#16 0x0000000000000000 in ?? ()\nBacktrace stopped: Cannot access memory at address 0x7fffdfffe000\n\nThread 1 (LWP 100148 of process 37763):\n#0  0x00000008004f984a in _nanosleep () from /lib/libc.so.7\n#1  0x000000080025f17c in ?? () from /lib/libthr.so.3\n#2  0x000000080045fe0b in sleep () from /lib/libc.so.7\n#3  0x0000000000203b7b in main ()\n</code></pre>\n\n<p>It seems lots of threads got stuck on <code>std::__1::condition_variable::wait</code>, which is unreasonable, in the test code, there is no use of any condition at all.</p>\n\n<p>Can somebody tell me, am I doing it wrong or there is a bug in the std library?</p>\n\n<hr>\n\n<p>Thanks. This example didn't fully mimic the actual behavior of my program. I simplified it too much.</p>\n\n<p>Now I add vector of future, this is more like it:</p>\n\n<pre><code>void func2(std::atomic_long&amp; n)\n{\n    std::vector&lt;std::future&lt;void&gt;&gt; rs;\n    for (auto i = 0L; i &lt; 1000000000000L; ++i)\n    {\n        rs.push_back(std::async(std::launch::async, [&amp;] {add(n);}));\n    }\n    for (auto&amp; r : rs)\n    {\n        r.wait();\n    }\n}\n</code></pre>\n\n<p>But it still got the same result:\nOn macOS, it was ok.</p>\n\n<pre><code>            29693311             29904143             29994992             29856976             30020535             29832796 \n            29709344             29917687             30005488             29875611             30039727             29848932 \n            29725334             29930826             30019428             29892350             30056678             29866293 \n            29737403             29948258             30036760             29904964             30074102             29883648 \n            29746597             29965134             30050115             29914459             30086189             29900767 \n            29761543             29977363             30066833             29929475             30101723             29915059 \n            29777678             29993381             30084101             29949095             30117847             29926040 \n            29794253             30007301             30102985             29972819             30129613             29939935 \n</code></pre>\n\n<p>On freebsd, it froze again:</p>\n\n<pre><code>               34079                29595                38239               508788                30194                41242 \n               34079                29595                38239               509103                30194                41242 \n               34079                29595                38239               509583                30194                41242 \n               34079                29595                38239               509808                30194                41242 \n               34079                29595                38239               510187                30194                41242 \n               34079                29595                38239               510543                30194                41242 \n               34079                29595                38239               510932                30194                41242 \n               34079                29595                38239               511616                30194                41242 \n               34079                29595                38239               512111                30194                41242 \n               34079                29595                38239               512952                30194                41242 \n               34079                29595                38239               514032                30194                41242 \n               34079                29595                38239               514205                30194                41242 \n               34079                29595                38239               514577                30194                41242 \n</code></pre>\n"}, {"tags": ["c++", "sql", "data-structures", "mapping", "grouping"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user12381459"}, "edited": false, "score": 0, "creation_date": 1577806279, "post_id": 59545808, "comment_id": 105260744, "body": "Do you know if the join is faster than the nested select?"}], "tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 0, "last_activity_date": 1577805302, "creation_date": 1577805302, "answer_id": 59545808, "question_id": 59545784, "link": "https://stackoverflow.com/questions/59545784/data-structure-for-grouping-items-and-mapping-individual-items-to-other-group-me/59545808#59545808", "title": "Data structure for grouping items and mapping individual items to other group members", "body": "<p>Your solution is fine, as long as a <code>file_name</code> is a unique key (else, the subquery might return multiple records, which would generate a runtime error).</p>\n\n<p>This can also be expressed with a self-join:</p>\n\n<pre><code>select f.file_name \nfrom files f\ninner join files g on g.group_id = f.group_id\nwhere g.file_name = 'sampleFileName.docx'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47907, "user_id": 5529445, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-QDYZSTy6VIw/AAAAAAAAAAI/AAAAAAAAAAA/tRnSAB9slkM/photo.jpg?sz=128", "display_name": "Yogesh Sharma", "link": "https://stackoverflow.com/users/5529445/yogesh-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1577806704, "last_edit_date": 1577806704, "creation_date": 1577806362, "answer_id": 59545954, "question_id": 59545784, "link": "https://stackoverflow.com/questions/59545784/data-structure-for-grouping-items-and-mapping-individual-items-to-other-group-me/59545954#59545954", "title": "Data structure for grouping items and mapping individual items to other group members", "body": "<p>Your query would return no data if sub-query return <code>null</code>, so you can use  <code>exists</code> instead :</p>\n\n<pre><code>select f.*\nfrom files f\nwhere exists (select 1 \n              from files ff \n              where ff.group_id = f.group_id and \n                    ff.file_name = 'sampleFileName.docx'\n             );\n</code></pre>\n\n<p>Perfomance would be better if you have index <code>files (group_id,file_name)</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user12381459"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577806704, "creation_date": 1577805089, "question_id": 59545784, "link": "https://stackoverflow.com/questions/59545784/data-structure-for-grouping-items-and-mapping-individual-items-to-other-group-me", "title": "Data structure for grouping items and mapping individual items to other group members", "body": "<p>I'm in a situation where I need to create groups of entities (specifically, file names).  Then, when given a particular file name, I need to obtain its other group members. My current solution involves placing file names in a SQLite table with two columns: file name and an integer group id.  When given a file name, I run a query like this:</p>\n\n<pre><code>SELECT file_name FROM files WHERE group_id =\n(SELECT group_id FROM files WHERE file_name = \"sampleFileName.docx\")\n</code></pre>\n\n<p>I'm wondering if there's any more suitable or performant solution to this problem. For example, is there another data structure to consider?  Perhaps one that could be serialized, or constructed from the database table?  Thank you for any input.</p>\n"}, {"tags": ["c++", "algorithm", "c++11"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1577805355, "post_id": 59545729, "comment_id": 105260447, "body": "<i>why is it returning a position of the element with minimum value</i> -- It isn&#39;t doing that.  Look at the line more carefully.  There is more going on than just a call to <code>std::min_element</code>"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1577805642, "post_id": 59545729, "comment_id": 105260530, "body": "What do you think that subtracting <code>arr.begin()</code> from the iterator given by <code>min_element()</code> does?"}, {"owner": {"reputation": 559, "user_id": 12214916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24f96f92d6d7d820a020ca270b198f0a?s=128&d=identicon&r=PG&f=1", "display_name": "alteredinstance", "link": "https://stackoverflow.com/users/12214916/alteredinstance"}, "edited": false, "score": 3, "creation_date": 1577806836, "post_id": 59545729, "comment_id": 105260949, "body": "Just wanted to say that there shouldn&#39;t be downvoting of this question - while it <i>is</i> a simple mistake, the question is decently formed and has a minimally reproducible code snippet."}], "answers": [{"tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": false, "score": 5, "last_activity_date": 1577805426, "creation_date": 1577805426, "answer_id": 59545824, "question_id": 59545729, "link": "https://stackoverflow.com/questions/59545729/why-is-min-element-returning-the-index-of-the-minimum-element-instead-of-an-i/59545824#59545824", "title": "Why is min_element() returning the index of the minimum element, instead of an iterator?", "body": "<p><code>min_element</code> returns an iterator (not necessarily a pointer) to the element. It does so here as well.</p>\n\n<p>But you are not printing the return value of the <code>min_element</code> call. You are first subtracting the iterator to the beginning of <code>arr</code> from it (<code>- arr.begin()</code>).</p>\n\n<p>Subtracting (random-access) iterators of a container (or pointers into the same array) results in an integer with value equal to the distance between the iterators or pointer. So if you subtract an iterator to the beginning, you get the index of the element as integer.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 12199526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dae1f962d67ad0a8b943583128cfc58?s=128&d=identicon&r=PG&f=1", "display_name": "At2005", "link": "https://stackoverflow.com/users/12199526/at2005"}, "is_accepted": false, "score": 1, "last_activity_date": 1577829570, "creation_date": 1577829570, "answer_id": 59548715, "question_id": 59545729, "link": "https://stackoverflow.com/questions/59545729/why-is-min-element-returning-the-index-of-the-minimum-element-instead-of-an-i/59548715#59548715", "title": "Why is min_element() returning the index of the minimum element, instead of an iterator?", "body": "<p>You are subtracting a pointer from another in your call to <code>min_element</code>. Try this approach rather:</p>\n\n<pre><code>    int index;\n    int n; cin &gt;&gt; n;\n    vector&lt;int&gt; arr(n);\n    for (int i = 0; i &lt; n; i++)\n        cin &gt;&gt; arr[i];\n\n    int minElementValue = *std::min_element(arr.begin(), arr.end());\n\n\n    for (int i = 0; i &lt; n; i++) {\n        if (arr[i] == minElementValue) {\n            index = i;\n\n\n        }\n    }\n\n    cout &lt;&lt; minElementValue &lt;&lt; \":\" ;\n    cout &lt;&lt; \"  \" &lt;&lt; index;\n\n\n</code></pre>\n"}], "owner": {"reputation": 64, "user_id": 8167814, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LO_zINtnHXU/AAAAAAAAAAI/AAAAAAAAADI/i49Qk0_ljoU/photo.jpg?sz=128", "display_name": "Swastik Singh", "link": "https://stackoverflow.com/users/8167814/swastik-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "answer_count": 2, "score": -2, "last_activity_date": 1577829570, "creation_date": 1577804799, "last_edit_date": 1577807127, "question_id": 59545729, "link": "https://stackoverflow.com/questions/59545729/why-is-min-element-returning-the-index-of-the-minimum-element-instead-of-an-i", "title": "Why is min_element() returning the index of the minimum element, instead of an iterator?", "body": "<p><code>min_element()</code> is supposed to return a pointer pointing to the minimum element in a array or vector, but here it is returning a position of the element with minimum value. Why is this happening?\nSorry for this silly question i am a beginner.</p>\n\n<pre><code>int n; cin&gt;&gt;n;\nvector&lt;int&gt; arr(n);\nfor(int i=0;i&lt;n;i++)\n    cin&gt;&gt;arr[i];\n\nint minElementIndex = min_element(arr.begin(),arr.end()) - arr.begin();\ncout&lt;&lt;minElementIndex;\n</code></pre>\n"}, {"tags": ["c++", "mysql", "qt", "qt5", "qmake"], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 10865801, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_VyjbLRtXHc/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1yRYxJRCHMVBrn5DJHHGqbLyDHOg/mo/photo.jpg?sz=128", "display_name": "henry huang", "link": "https://stackoverflow.com/users/10865801/henry-huang"}, "is_accepted": false, "score": 0, "last_activity_date": 1577844744, "last_edit_date": 1577844744, "creation_date": 1577821427, "answer_id": 59547942, "question_id": 59545414, "link": "https://stackoverflow.com/questions/59545414/qt-mysql-drive-build-undefined-reference-to-mysql-get-client-version0/59547942#59547942", "title": "QT MYSQL drive build, undefined reference to `mysql_get_client_version@0&#39;", "body": "<p>I solved it. </p>\n\n<p>I solved It the qmake is 86X, and server is 64X. change a 64X qmake worked</p>\n\n<p>this doc is better then old one.</p>\n\n<p><a href=\"https://doc-snapshots.qt.io/qt5-5.14/sql-driver.html#how-to-build-the-qmysql-plugin-on-windows\" rel=\"nofollow noreferrer\">https://doc-snapshots.qt.io/qt5-5.14/sql-driver.html#how-to-build-the-qmysql-plugin-on-windows</a></p>\n"}], "owner": {"reputation": 9, "user_id": 10865801, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_VyjbLRtXHc/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq1yRYxJRCHMVBrn5DJHHGqbLyDHOg/mo/photo.jpg?sz=128", "display_name": "henry huang", "link": "https://stackoverflow.com/users/10865801/henry-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577844744, "creation_date": 1577802938, "last_edit_date": 1577819389, "question_id": 59545414, "link": "https://stackoverflow.com/questions/59545414/qt-mysql-drive-build-undefined-reference-to-mysql-get-client-version0", "title": "QT MYSQL drive build, undefined reference to `mysql_get_client_version@0&#39;", "body": "<p>I am trying to build the QMYSQL drive, I followed Document (<a href=\"https://doc.qt.io/qt-5/sql-driver.html#how-to-build-the-qmysql-plugin-on-windows\" rel=\"nofollow noreferrer\">https://doc.qt.io/qt-5/sql-driver.html#how-to-build-the-qmysql-plugin-on-windows</a>)</p>\n\n<p>it recommond me runned the code :</p>\n\n<pre><code>cd %QTDIR%\\qtbase\\src\\plugins\\sqldrivers\nqmake -- MYSQL_INCDIR=C:/MySQL/include \"MYSQL_LIBDIR=C:/MYSQL/MySQL Server &lt;version&gt;/lib/opt\"\nnmake sub-mysql\n</code></pre>\n\n<p>There is no \"Libs &amp; Include Files\" Module in mysql \"Custom Install\", so I select the folder from the sql serves. </p>\n\n<p>I run the code on cmd:</p>\n\n<pre><code>cd C:\\Qt\\5.12.6\\Src\\qtbase\\src\\plugins\\sqldrivers\nqmake --  \"MYSQL_INCDIR=C:/MySql/MySQL Server 8.0/include\" \"MYSQL_LIBDIR=C:/MySql/MySQL Server 8.0/lib\"\n</code></pre>\n\n<p>the result is :</p>\n\n<pre><code>info: creating stash file C:\\Qt\\5.12.6\\Src\\qtbase\\src\\plugins\\sqldrivers\\.qmake.stash\n\nRunning configuration tests...\nChecking for DB2 (IBM)... no\nChecking for InterBase... no\nChecking for MySQL... no\nChecking for OCI (Oracle)... no\nChecking for ODBC... yes\nChecking for PostgreSQL... no\nChecking for SQLite (version 2)... no\nChecking for TDS (Sybase)... no\nDone running configuration tests.\n\nConfigure summary:\n\nQt Sql Drivers:\n  DB2 (IBM) .............................. no\n  InterBase .............................. no\n  MySql .................................. no\n  OCI (Oracle) ........................... no\n  ODBC ................................... yes\n  PostgreSQL ............................. no\n  SQLite2 ................................ no\n  SQLite ................................. yes\n    Using system provided SQLite ......... no\n  TDS (Sybase) ........................... no\n\nQt is now configured for building. Just run 'mingw32-make'.\nOnce everything is built, you must run 'mingw32-make install'.\nQt will be installed into 'C:\\Qt\\5.12.6\\mingw73_32'.\n\nPrior to reconfiguration, make sure you remove any leftovers from\nthe previous build.\n</code></pre>\n\n<p>it seems like does not detected mysql. what should I do to build the mysql drive. </p>\n\n<p>I checked the the config log for qmake:</p>\n\n<pre><code>    Trying source 5 (type inline) of library mysql ...\n+ cd /d C:\\Qt\\5.12.6\\Src\\qtbase\\src\\plugins\\sqldrivers\\config.tests\\mysql &amp;&amp; C:\\Qt\\5.12.6\\mingw73_32\\bin\\qmake.exe \"CONFIG -= qt debug_and_release app_bundle lib_bundle\" \"CONFIG += shared warn_off console single_arch\" \"QMAKE_LIBDIR += C:\\\\openssl\\\\lib C:\\\\Utils\\\\my_sql\\\\mysql-5.6.11-win32\\\\lib C:\\\\Utils\\\\postgresql\\\\pgsql\\\\lib\" \"INCLUDEPATH += C:\\\\openssl\\\\include C:\\\\Utils\\\\my_sql\\\\mysql-5.6.11-win32\\\\include C:\\\\Utils\\\\postgresql\\\\pgsql\\\\include\" \"QMAKE_USE += mysql\" \"QMAKE_LIBS_MYSQL = \\\"C:/MySql/MySQL Server 8.0/lib/libmysql.lib\\\"\" \"QMAKE_INCDIR_MYSQL = \\\"C:/MySql/MySQL Server 8.0/include\\\"\" C:/Qt/5.12.6/Src/qtbase/src/plugins/sqldrivers/config.tests/mysql\n&gt; Info: creating stash file C:\\Qt\\5.12.6\\Src\\qtbase\\src\\plugins\\sqldrivers\\config.tests\\.qmake.stash\n+ cd /d C:\\Qt\\5.12.6\\Src\\qtbase\\src\\plugins\\sqldrivers\\config.tests\\mysql &amp;&amp; set MAKEFLAGS=&amp; mingw32-make\n&gt; g++ -c -fno-keep-inline-dllexport -O2 -w -fexceptions -mthreads -DUNICODE -D_UNICODE -DWIN32 -DMINGW_HAS_SECURE_API=1 -I. -IC:\\openssl\\include -IC:\\Utils\\my_sql\\mysql-5.6.11-win32\\include -IC:\\Utils\\postgresql\\pgsql\\include -I\"C:\\MySql\\MySQL Server 8.0\\include\" -IC:\\Qt\\5.12.6\\mingw73_32\\mkspecs\\win32-g++  -o main.o main.cpp\n&gt; g++ -Wl,-s -Wl,-subsystem,console -mthreads -o mysql.exe main.o  -LC:\\openssl\\lib -LC:\\Utils\\my_sql\\mysql-5.6.11-win32\\lib -LC:\\Utils\\postgresql\\pgsql\\lib \"C:\\MySql\\MySQL Server 8.0\\lib\\libmysql.lib\"   \n&gt; c:/mingw/bin/../lib/gcc/mingw32/8.2.0/../../../../mingw32/bin/ld.exe: main.o:main.cpp:(.text.startup+0xc): undefined reference to `mysql_get_client_version@0'\n&gt; collect2.exe: error: ld returned 1 exit status\n&gt; mingw32-make: *** [Makefile:66: mysql.exe] Error 1\n</code></pre>\n\n<p>I think here is my problem, </p>\n\n<blockquote>\n  <p>undefined reference to `mysql_get_client_version@0'</p>\n</blockquote>\n\n<p>but I do not know how to solve it.I am sure there is a \"mysql.h\" file in \"include\" folder with a method </p>\n\n<blockquote>\n  <p>unsigned long STDCALL mysql_get_client_version(void);</p>\n</blockquote>\n"}, {"tags": ["c++", "macos", "networking", "vpn"], "comments": [{"owner": {"reputation": 1957, "user_id": 1183575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bRFX3.jpg?s=128&g=1", "display_name": "UnholyRanger", "link": "https://stackoverflow.com/users/1183575/unholyranger"}, "edited": false, "score": 0, "creation_date": 1577806039, "post_id": 59545346, "comment_id": 105260664, "body": "Hello Mohammad. I believe you&#39;re looking for <a href=\"https://serverfault.com/\">ServerFault</a>. StackOverflow is for programming questions."}, {"owner": {"reputation": 48, "user_id": 8467763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDiBf.png?s=128&g=1", "display_name": "Mohammad Asif", "link": "https://stackoverflow.com/users/8467763/mohammad-asif"}, "reply_to_user": {"reputation": 1957, "user_id": 1183575, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bRFX3.jpg?s=128&g=1", "display_name": "UnholyRanger", "link": "https://stackoverflow.com/users/1183575/unholyranger"}, "edited": false, "score": 0, "creation_date": 1577806715, "post_id": 59545346, "comment_id": 105260908, "body": "Question is relevant to programming, the solution will be code based some sort of middle wear written in c++ I believe."}], "answers": [{"tags": [], "owner": {"reputation": 1141, "user_id": 6384727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f80d10dadbe83078d01fff8f98ad4e?s=128&d=identicon&r=PG&f=1", "display_name": "E.N.D", "link": "https://stackoverflow.com/users/6384727/e-n-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1577809545, "creation_date": 1577809545, "answer_id": 59546461, "question_id": 59545346, "link": "https://stackoverflow.com/questions/59545346/configure-vpn-split-tunneling-for-macos-based-on-selected-apps/59546461#59546461", "title": "Configure VPN split tunneling for macOS based on selected apps", "body": "<p>I haven't checked this myself but <a href=\"https://github.com/OpenVPN/openvpn\" rel=\"nofollow noreferrer\">OpenVPN</a> daemon exposes set of APIs which can be used to create multiple VPN tunnels for each application, as mentioned in your question.</p>\n"}, {"tags": [], "owner": {"reputation": 48, "user_id": 8467763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDiBf.png?s=128&g=1", "display_name": "Mohammad Asif", "link": "https://stackoverflow.com/users/8467763/mohammad-asif"}, "is_accepted": true, "score": 0, "last_activity_date": 1577966808, "creation_date": 1577966808, "answer_id": 59563097, "question_id": 59545346, "link": "https://stackoverflow.com/questions/59545346/configure-vpn-split-tunneling-for-macos-based-on-selected-apps/59563097#59563097", "title": "Configure VPN split tunneling for macOS based on selected apps", "body": "<p>So the solution of this problem is <a href=\"https://developer.apple.com/library/archive/documentation/Darwin/Conceptual/NKEConceptual/about/about.html#//apple_ref/doc/uid/TP40001858-CH226-SW5\" rel=\"nofollow noreferrer\">NKE</a>, Apple's Network Kernel Extensions you can write your own kext which handles network operations on various levels.</p>\n\n<p>I hope this clue will help someone in future.</p>\n"}], "owner": {"reputation": 48, "user_id": 8467763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QDiBf.png?s=128&g=1", "display_name": "Mohammad Asif", "link": "https://stackoverflow.com/users/8467763/mohammad-asif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "closed_date": 1594306714, "accepted_answer_id": 59563097, "answer_count": 2, "score": -2, "last_activity_date": 1594304167, "creation_date": 1577802596, "last_edit_date": 1577809209, "question_id": 59545346, "link": "https://stackoverflow.com/questions/59545346/configure-vpn-split-tunneling-for-macos-based-on-selected-apps", "closed_reason": "Needs more focus", "title": "Configure VPN split tunneling for macOS based on selected apps", "body": "<p>My task is to develop split tunnelling feature for macOS so if I am connected to a VPN connection only selected apps can send their traffic to the VPN while other apps will be using local internet connection.</p>\n\n<p>I noticed other VPN apps like expressvpn offering these features but I couldn't find any help over the internet how to achieve that.</p>\n"}, {"tags": ["c++", "qt", "emscripten"], "answers": [{"tags": [], "owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "is_accepted": false, "score": 1, "last_activity_date": 1577804228, "creation_date": 1577804228, "answer_id": 59545623, "question_id": 59545342, "link": "https://stackoverflow.com/questions/59545342/can-i-compile-qt-with-emscripten-without-using-qt-for-webassembly/59545623#59545623", "title": "Can I compile Qt with Emscripten without using Qt for Webassembly?", "body": "<p>There is a bunch of work under the hood. Windowing, WebGL, Network, browser integration, threading and much other stuff involved. <strong>All platform-specific layers</strong> should be ported and that's why you can not simply compile Qt with Emscripten.\nTake an editor which supports search-in-files and search for <code>wasm</code> or <code>emscripten</code> keywords in whole Qt source code directory to find out how many changes should be made to make it work. Thanks to the Qt guys and opensource community.</p>\n"}], "owner": {"reputation": 3508, "user_id": 2366975, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ae4a011fee0b6009688aabb269cda8a8?s=128&d=identicon&r=PG", "display_name": "user2366975", "link": "https://stackoverflow.com/users/2366975/user2366975"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577804228, "creation_date": 1577802566, "question_id": 59545342, "link": "https://stackoverflow.com/questions/59545342/can-i-compile-qt-with-emscripten-without-using-qt-for-webassembly", "title": "Can I compile Qt with Emscripten without using Qt for Webassembly?", "body": "<p>As <code>Emscripten</code> can compile most C++ code to webassembly (WASM), I was asking myself what is the point of <code>Qt for Webassembly</code>.\nThe former will keep the C++ code's license (LGPL), the latter would require to license under the GPL.</p>\n\n<p>Is it technically possible to compile Qt with Emscripten, so I have the freedom to avoid the GPL license? Maybe someone with a deeper understanding of Qt might explain what was required under the hood for the WASM platform support.</p>\n"}, {"tags": ["c++", "linked-list"], "comments": [{"owner": {"reputation": 32303, "user_id": 4386427, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d2d2716ce8bcf5967e7b3c00bd0095b5?s=128&d=identicon&r=PG&f=1", "display_name": "4386427", "link": "https://stackoverflow.com/users/4386427/4386427"}, "edited": false, "score": 3, "creation_date": 1577802655, "post_id": 59545328, "comment_id": 105259505, "body": "I don&#39;t see any line marked with &#39;/&#39;"}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1577803163, "post_id": 59545328, "comment_id": 105259698, "body": "It&#39;s a function declaration with a missing semicolon at the end. Or a function with missing curly braces. Then a new node is initialized, because someone didn&#39;t know about constructors, or this is actually C not C++."}, {"owner": {"reputation": 13, "user_id": 12536609, "user_type": "registered", "profile_image": "https://graph.facebook.com/813580389055225/picture?type=large", "display_name": "Alex Chiper", "link": "https://stackoverflow.com/users/12536609/alex-chiper"}, "edited": false, "score": 0, "creation_date": 1577803978, "post_id": 59545328, "comment_id": 105259985, "body": "i will post the hole code"}, {"owner": {"reputation": 13, "user_id": 12536609, "user_type": "registered", "profile_image": "https://graph.facebook.com/813580389055225/picture?type=large", "display_name": "Alex Chiper", "link": "https://stackoverflow.com/users/12536609/alex-chiper"}, "edited": false, "score": 0, "creation_date": 1577804056, "post_id": 59545328, "comment_id": 105260010, "body": "the last 3 line i dont understand"}, {"owner": {"reputation": 13, "user_id": 12536609, "user_type": "registered", "profile_image": "https://graph.facebook.com/813580389055225/picture?type=large", "display_name": "Alex Chiper", "link": "https://stackoverflow.com/users/12536609/alex-chiper"}, "edited": false, "score": 0, "creation_date": 1577804472, "post_id": 59545328, "comment_id": 105260149, "body": "void nodecreate(int value){       node *temp=new node;//       temp-&gt;data=value;///       temp-&gt;next=NULL;///       if(head==NULL)       {         head=temp;         tail=temp;         temp=NULL;       }       else       {\t         tail-&gt;next=temp;         tail=temp;       }     }"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1577805117, "post_id": 59545328, "comment_id": 105260367, "body": "Don&#39;t post the whole code, but a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1577805819, "post_id": 59545328, "comment_id": 105260588, "body": "This is impossible to answer without knowing what it is specifically that you don&#39;t understand. I think you would benefit from getting yourself <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good book</a>."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1577815729, "post_id": 59545328, "comment_id": 105263566, "body": "You should review the section about pointers in your favorite C++ reference book."}, {"owner": {"reputation": 800, "user_id": 12078969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466261c5018ba62c55f65c1746441dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ivanovic", "link": "https://stackoverflow.com/users/12078969/ivanovic"}, "edited": false, "score": 0, "creation_date": 1578513402, "post_id": 59545328, "comment_id": 105467220, "body": "@AlexChiper please mark the question as answered if I were able to solve it (Answer below and clicking on the arrow) so it doesn&#39;t pop up on unsolved questions. Happy new year :)"}], "answers": [{"tags": [], "owner": {"reputation": 800, "user_id": 12078969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/466261c5018ba62c55f65c1746441dc2?s=128&d=identicon&r=PG&f=1", "display_name": "Ivanovic", "link": "https://stackoverflow.com/users/12078969/ivanovic"}, "is_accepted": true, "score": 0, "last_activity_date": 1577840848, "last_edit_date": 1577840848, "creation_date": 1577834310, "answer_id": 59549084, "question_id": 59545328, "link": "https://stackoverflow.com/questions/59545328/not-understanding-linked-list-implementation-please-help-c/59549084#59549084", "title": "Not understanding Linked List implementation please help.C++", "body": "<p>In my experience even long time programmers doesn't seem to really grasp linked lists and most try to avoid the afford to get into it since they are part of the standard library and - the fact that some need a full linked list example to understand your question, might reflect that. </p>\n\n<p>It took me 17 books and a few youtube videos to really understand what is going on - 16 were explaining it similar and the last one got different approaches to it and bottom line it is really simple and it really is worth to dig into it.</p>\n\n<p>To get to the point:</p>\n\n<pre><code>void createnode(int value) //Function for adding a new node to the list\nnode *temp=new node;//Standard code dynamically allocating a new address stored in \"temp\" to a new struct \"node\"\ntemp-&gt;data=value;//This writes the new value passed over to the function in the new created struct\ntemp-&gt;next=NULL;//This writes \"NULL\" in the \"next\" variable of the new created struct to mark it as the last node when you search through the whole linked list.\n</code></pre>\n\n<p>(Since cpp11 you should use nullptr instead of NULL for <a href=\"https://stackoverflow.com/questions/20509734/null-vs-nullptr-why-was-it-replaced\">several reasons</a>.)</p>\n\n<p>I recommend working through \"Jump to C++ from Alex Allain\" if you really want to grasp the topic since that was book no 17 for me and pointers got 6 chapters. He also claims that about 40% of his c++ projects need self created maps and linked lists where the std lib can't or shouldn't be used for several reasons. <em>(He was teaching c++ introductory courses at Harvard if someone is after \"dog tags/credentials\")</em>.</p>\n\n<p>What really helped me understanding linked lists is the following:</p>\n\n<ul>\n<li>find new ways to represent data of your code (a)</li>\n<li>work through programs in small chunks - chop up the code (b)</li>\n</ul>\n\n<p>One unconventional visual example for (a) I came up with that also helped me understanding search and sort algorithms putting some \"party drink plastic cups\" up that represents variables and some \"post it's\" that represent the data that goes through it.\nThan I went through the code, put a variable name with a \"post it\" on the plastic cup, put the data (ints, chars, strings etc.) on different colored \"post it's\" and put it from one cup to an other as the code said. <em>(Maybe a fun new year nerd party game doing this with different liqueurs instead of post its ;) )</em> </p>\n\n<p>Another would be a more common one just writing up the stack and data like explained <a href=\"https://www.youtube.com/watch?v=NobHlGUjV3g\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>(b) should be self explaining - don't try to grasp the whole linked list at once. Pick one module after another - the smaller the better. Meaning: First creating logical chunks like \"creating new node\" \"reading nodes\" \"deleting nodes\" than smaller logical chunks like \"first node in an empty list\" \"second node\" and so on.</p>\n"}], "owner": {"reputation": 13, "user_id": 12536609, "user_type": "registered", "profile_image": "https://graph.facebook.com/813580389055225/picture?type=large", "display_name": "Alex Chiper", "link": "https://stackoverflow.com/users/12536609/alex-chiper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 59549084, "answer_count": 1, "score": -3, "last_activity_date": 1577840848, "creation_date": 1577802509, "last_edit_date": 1577806798, "question_id": 59545328, "link": "https://stackoverflow.com/questions/59545328/not-understanding-linked-list-implementation-please-help-c", "title": "Not understanding Linked List implementation please help.C++", "body": "<p>Can you please explain to me the lines that i have marked with '/'.It would mean the world to me!</p>\n\n<pre><code>void createnode(int value)\nnode *temp=new node;//\ntemp-&gt;data=value;//\ntemp-&gt;next=NULL;//\n</code></pre>\n\n<p>Code below added from comment from OP:</p>\n\n<pre><code>void nodecreate(int value)\n{\n   node *temp=new node;// \n   temp-&gt;data=value;/// \n   temp-&gt;next=NULL;/// \n   if(head==NULL) \n   { \n      head=temp; \n      tail=temp; \n      temp=NULL; \n   } \n   else \n   { \n      tail-&gt;next=temp; \n      tail=temp; \n   } \n}\n</code></pre>\n"}, {"tags": ["c++", "data-structures", "queue", "priority-queue"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1577802490, "post_id": 59545308, "comment_id": 105259450, "body": "<a href=\"https://en.wikipedia.org/wiki/Priority_queue\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Priority_queue</a>"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 4, "creation_date": 1577802512, "post_id": 59545308, "comment_id": 105259462, "body": "Did you do any research? What did you find?"}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1577802497, "creation_date": 1577802497, "answer_id": 59545325, "question_id": 59545308, "link": "https://stackoverflow.com/questions/59545308/can-priority-queue-be-made-by-using-simple-queues/59545325#59545325", "title": "Can priority queue be made by using simple queues", "body": "<p>Pretty much.</p>\n\n<p>You can't \"sort\" a standard queue because it does not have random access. A <code>std::priority_queue</code> is usually backed by a vector.</p>\n\n<p>It just does the \"automatic sorting\" for you, is all. You wouldn't actually re-sort the whole thing (which would do a lot of pointless comparisons): you'd do a lower/upper bound search for a position to insert your new element. Removal can be similarly specialised, because you know the elements are sorted so can do a binary search.</p>\n\n<p>But the end result is a thing that behaves much like a queue, yes.</p>\n"}, {"tags": [], "owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "is_accepted": true, "score": 2, "last_activity_date": 1577803384, "creation_date": 1577803384, "answer_id": 59545495, "question_id": 59545308, "link": "https://stackoverflow.com/questions/59545308/can-priority-queue-be-made-by-using-simple-queues/59545495#59545495", "title": "Can priority queue be made by using simple queues", "body": "<p>A <a href=\"https://en.wikipedia.org/wiki/Priority_queue\" rel=\"nofollow noreferrer\">priority queue</a> is an abstract data-structure with a few required operations:</p>\n\n<ul>\n<li>check emptiness (<code>is_empty</code>);</li>\n<li>insert element by \"priority\" (<code>insert</code>);</li>\n<li>find and remove the element with the highest priority (<code>pop</code>).</li>\n</ul>\n\n<p>There are many way to implement this, but you are usually looking for a <code>O(log n)</code> (amortized) complexity for both <code>pop</code> and <code>insert</code>.</p>\n\n<p>A <a href=\"https://en.wikipedia.org/wiki/Queue_(abstract_data_type)\" rel=\"nofollow noreferrer\">queue</a> is an abstract data-structure where you insert at the back and remove at the front, so it cannot be used to implement a priority queue (there is  no \"ordering\", except first-in first-out).</p>\n\n<p>The simplest way to implement a priority queue is usually to use a <a href=\"https://en.wikipedia.org/wiki/Binary_heap\" rel=\"nofollow noreferrer\">binary heap</a>. A minimalist C++ implementation using a <code>std::vector&lt;int&gt;</code> as a backend and the <a href=\"https://en.cppreference.com/w/cpp/header/algorithm#Heap_operations\" rel=\"nofollow noreferrer\">heap operations</a> defined in the standard library could be:</p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nusing priority_queue = std::vector&lt;int&gt;;\n\nbool is_empty(priority_queue const&amp; q) { return q.empty(); }\n\nvoid insert(priority_queue &amp;q, int value) { \n    q.push_back(value);\n    std::push_heap(std::begin(q), std::end(q));\n}\n\nint pop(priority_queue &amp;q) {\n    std::pop_heap(std::begin(q), std::end(q));\n    const int value = q.back();\n    q.pop_back();\n    return value;\n}\n</code></pre>\n\n<p>This gives you (amortized) <code>O(log n)</code> complexity for both <code>insert</code> and <code>pop</code>.</p>\n"}], "owner": {"reputation": 45, "user_id": 12138213, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKVE1.jpg?s=128&g=1", "display_name": "Zohair Abbas Hadi", "link": "https://stackoverflow.com/users/12138213/zohair-abbas-hadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "closed_date": 1577852848, "accepted_answer_id": 59545495, "answer_count": 2, "score": -3, "last_activity_date": 1589539962, "creation_date": 1577802373, "last_edit_date": 1589539962, "question_id": 59545308, "link": "https://stackoverflow.com/questions/59545308/can-priority-queue-be-made-by-using-simple-queues", "closed_reason": "Needs details or clarity", "title": "Can priority queue be made by using simple queues", "body": "<p>Is priority queue just a sorted queue? Can it be made by creating a simple queue and sorting it afterwards?\n<strong><a href=\"https://www.quora.com/What-is-the-difference-between-a-priority-queue-and-a-queue?share=1\" rel=\"nofollow noreferrer\">https://www.quora.com/What-is-the-difference-between-a-priority-queue-and-a-queue?share=1</a></strong> I found this link and it states that they priority queue can be made by <em>Re-arrange the Queue at insertion time, and put the recently inserted object at the appropriate priority place</em>. I wanted to be certain about it because some of my peers stated that its not possible, but if we make a queue which adheres to priority, wouldn't it make the queue a priority queue?</p>\n"}, {"tags": ["c++", "xcode", "generics", "ide", "clion"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1577815664, "post_id": 59545304, "comment_id": 105263547, "body": "When you place <code>template&lt;typename T&gt;</code> in front of your class definition, you have turned it into a class template. Class templates are <i>very</i> different from generics, in that a class template doesn&#39;t generate any code. It&#39;s a blueprint, and the compiler has no way of deducing <i>anything</i> about the class template, until you instantiate it. Visual Studio seems to be the only IDE that supports <a href=\"https://devblogs.microsoft.com/cppblog/template-intellisense/\" rel=\"nofollow noreferrer\">Template IntelliSense</a>, enabling it to bring autocomplete functionality into class templates."}, {"owner": {"reputation": 420, "user_id": 10287265, "user_type": "registered", "profile_image": "https://graph.facebook.com/2199094160324861/picture?type=large", "display_name": "Patrik Nusszer", "link": "https://stackoverflow.com/users/10287265/patrik-nusszer"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1578087401, "post_id": 59545304, "comment_id": 105337688, "body": "@IInspectable I am sorry to disappoint you, but the example I present in my question is true for Visual Studio for Windows as well. Try yourself if you won&#39;t believe."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1578089022, "post_id": 59545304, "comment_id": 105338147, "body": "I just tried with Visual Studio 2019 16.4.0, and Template IntelliSense works as advertised. If you merely turn your class definition into a class template, IntelliSense stops providing suggestions. However, if you pick a type for the template type argument, IntelliSense starts working again. I arbitrarily picked <code>int</code> for <code>T</code> and after typing <code>arr[0].</code> IntelliSense suggested <code>gwe</code>."}], "answers": [{"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1577814505, "post_id": 59545513, "comment_id": 105263213, "body": "<i>&quot;it would take as much time as compiling the application&quot;</i> - This is incorrect. You don&#39;t need the IDE to emit object code to get proper autocomplete support. You also don&#39;t need the IDE to run the optimizer to get proper autocomplete support. The most common reason, why autocomplete fails is because autocomplete uses a <i>different</i> compiler front-end than the one they use to produce binary artifacts. And with C++ being as complex as it is, those compiler front-ends rarely agree on everything. This is not about being too costly."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1577842633, "post_id": 59545513, "comment_id": 105268156, "body": "@IInspectable &quot;This is not about being too costly&quot; - I respectfully disagree. I well know that IDEs use different parsers than the compiler, but I also know that they want to be responsive, and their time to parse very much has an upper limit (in order to stay responsive).."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1577877419, "post_id": 59545513, "comment_id": 105272683, "body": "IDE&#39;s have devised strategies, so that you do not have to pay for the cost of parsing while you are typing. What&#39;s more, the scenario described in the question has <i>nothing</i> to do with those presumed inaccuracies. The IDE accurately identified a <a href=\"https://en.cppreference.com/w/cpp/language/class_template\" rel=\"nofollow noreferrer\">class template</a>, and stopped providing support, because it <i>cannot</i> provide any support. Such is the nature of class (and function) templates."}], "tags": [], "owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "is_accepted": true, "score": 3, "last_activity_date": 1577803548, "creation_date": 1577803548, "answer_id": 59545513, "question_id": 59545304, "link": "https://stackoverflow.com/questions/59545304/c-ides-will-not-deduce-auto-complete-member-access-on-stdarray-subscript-exp/59545513#59545513", "title": "C++ IDEs will not deduce/auto complete member access on std::array subscript expression in template class", "body": "<p>Parsing C++ correctly is an extremely complicated and time consuming problem.</p>\n\n<p>If IDEs were to do it perfectly it would take as much time as compiling the application and you would get annoyed that your IDE was unresponsive.</p>\n\n<p>So, to be responsive, IDEs do limited parsing in finite time, which means they don't always get it right.</p>\n\n<p>Autocomplete and similar features are there to assist/help, but they are <em>not</em> the final truth - don't expect them to be.</p>\n"}, {"tags": [], "owner": {"reputation": 30, "user_id": 12472911, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V1gxkaBYvJU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reBaX8--3aT9CZ1xRIzVe4HBfq6Dg/photo.jpg?sz=128", "display_name": "Guruprasad Bhat", "link": "https://stackoverflow.com/users/12472911/guruprasad-bhat"}, "is_accepted": false, "score": -1, "last_activity_date": 1577803755, "creation_date": 1577803755, "answer_id": 59545556, "question_id": 59545304, "link": "https://stackoverflow.com/questions/59545304/c-ides-will-not-deduce-auto-complete-member-access-on-stdarray-subscript-exp/59545556#59545556", "title": "C++ IDEs will not deduce/auto complete member access on std::array subscript expression in template class", "body": "<p>Not aware about this specific context. However from my experience with other IDE's, I can think of a possibility. Do check whether your IDE version supports autocomplete for C++11 features as std::array is feature which works with c++ 11 onward. \ncheck whether you need to install additional plugins to enable autocomplete for c++11 features. </p>\n"}], "owner": {"reputation": 420, "user_id": 10287265, "user_type": "registered", "profile_image": "https://graph.facebook.com/2199094160324861/picture?type=large", "display_name": "Patrik Nusszer", "link": "https://stackoverflow.com/users/10287265/patrik-nusszer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 59545513, "answer_count": 2, "score": 2, "last_activity_date": 1577803755, "creation_date": 1577802368, "last_edit_date": 1577802718, "question_id": 59545304, "link": "https://stackoverflow.com/questions/59545304/c-ides-will-not-deduce-auto-complete-member-access-on-stdarray-subscript-exp", "title": "C++ IDEs will not deduce/auto complete member access on std::array subscript expression in template class", "body": "<pre><code>class A {\n    class B {\n    public:\n        int gwe = 0;\n    };\n\n    array&lt;B, 3&gt; arr;\n\npublic:\n    A() {\n        arr[0].gwe; // When starting to type 'g', IDE will suggest autocompletion for 'gwe'\n    }\n};\n</code></pre>\n\n<p>Now if you put on top of that: <code>template&lt;typename T&gt;</code><br>\nThe IDE will not autocomplete when trying to access a member of the array element.<br>\nLet it be Xcode, CLion, I have not tried VS but I am convinced it would also replicate the behaviour.<br>\nI have not experienced this before using generics with other languages such as C#, Java or Swift.<br>\nSo why this has to happen to C++ exactly?</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1577802357, "post_id": 59545226, "comment_id": 105259415, "body": "FYI -- Better to stay away from magic numbers and simply do <code>str[i] = i + &#39;0&#39;;</code>"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 2, "creation_date": 1577804171, "post_id": 59545226, "comment_id": 105260043, "body": "Undefined behaviour, due to writing 5 characters to a string that contains a single character.  Accessing <code>str[i]</code> with <code>i</code> out of bounds does not magically resize the string."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1577807273, "post_id": 59545226, "comment_id": 105261102, "body": "@Peter That&#39;s an <i>answer</i>. Not a comment. This is a Q&amp;A. Not a chatroom. Many of your comments give solutions to the problem, an answer to the question. Please stop doing that. We have peer review in the answer section for a reason. Thank you."}], "answers": [{"comments": [{"owner": {"reputation": 108, "user_id": 12576076, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_6RwQ5lgLMegP91a1BKxfw-ooj7o6cU61uHu-=k-s128", "display_name": "Amit Nandal", "link": "https://stackoverflow.com/users/12576076/amit-nandal"}, "edited": false, "score": 0, "creation_date": 1577802337, "post_id": 59545270, "comment_id": 105259412, "body": "But when i am printing this string with the help of for loop,this program prints whole string.e.g:for(int i=0;i&lt;5;i++){  cout&lt;&lt;str[i]&lt;&lt;&quot; &quot;;  }.Why this loop print whole string,but not ( cout&lt;&lt;str ;  )."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 108, "user_id": 12576076, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_6RwQ5lgLMegP91a1BKxfw-ooj7o6cU61uHu-=k-s128", "display_name": "Amit Nandal", "link": "https://stackoverflow.com/users/12576076/amit-nandal"}, "edited": false, "score": 1, "creation_date": 1577803052, "post_id": 59545270, "comment_id": 105259657, "body": "@AmitNandal -- Did you make the changes suggested in the answer given to you?  If not, then your code has undefined behavior due to accessing elements out-of-bounds."}, {"owner": {"reputation": 108, "user_id": 12576076, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_6RwQ5lgLMegP91a1BKxfw-ooj7o6cU61uHu-=k-s128", "display_name": "Amit Nandal", "link": "https://stackoverflow.com/users/12576076/amit-nandal"}, "edited": false, "score": 0, "creation_date": 1577803173, "post_id": 59545270, "comment_id": 105259703, "body": "Sir,but when i print this string with the help of for loop,it show correct output(01234)."}, {"owner": {"reputation": 4403, "user_id": 6868543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ced262f63c87506f6e61ef2d1e692d4?s=128&d=identicon&r=PG&f=1", "display_name": "j6t", "link": "https://stackoverflow.com/users/6868543/j6t"}, "reply_to_user": {"reputation": 108, "user_id": 12576076, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_6RwQ5lgLMegP91a1BKxfw-ooj7o6cU61uHu-=k-s128", "display_name": "Amit Nandal", "link": "https://stackoverflow.com/users/12576076/amit-nandal"}, "edited": false, "score": 2, "creation_date": 1577804566, "post_id": 59545270, "comment_id": 105260188, "body": "@AmitNandal It still is undefined behavior. That you observe output that matches your expectation is a possible manifestation of undefined behavior."}], "tags": [], "owner": {"reputation": 7060, "user_id": 105466, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jMWs6.png?s=128&g=1", "display_name": "SurvivalMachine", "link": "https://stackoverflow.com/users/105466/survivalmachine"}, "is_accepted": false, "score": 2, "last_activity_date": 1577802189, "creation_date": 1577802189, "answer_id": 59545270, "question_id": 59545226, "link": "https://stackoverflow.com/questions/59545226/this-program-is-not-printing-whole-string/59545270#59545270", "title": "This program is not printing whole string", "body": "<p>You are exceeding array boundaries, because you initialized the string as containing only one space. If you give it more spaces, the code works:</p>\n\n<pre><code>string str = \"     \";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "is_accepted": false, "score": 3, "last_activity_date": 1577807088, "last_edit_date": 1577807088, "creation_date": 1577803094, "answer_id": 59545442, "question_id": 59545226, "link": "https://stackoverflow.com/questions/59545226/this-program-is-not-printing-whole-string/59545442#59545442", "title": "This program is not printing whole string", "body": "<p>The code doesn't work as expected because you exceeded the string greatest index which is <code>0</code> because the size of your string is <code>1</code> as the previous answer say.</p>\n\n<p>This is a modification</p>\n\n<pre><code>int main()\n{\n    std::string str=\"     \";\n    for(int i=0;i&lt;5;i++)\n        str[i]=i+'0';\n    std::cout&lt;&lt;str;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 346, "user_id": 8703893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJNvU.jpg?s=128&g=1", "display_name": "Ajinkya Taranekar", "link": "https://stackoverflow.com/users/8703893/ajinkya-taranekar"}, "is_accepted": false, "score": 3, "last_activity_date": 1577803174, "creation_date": 1577803174, "answer_id": 59545458, "question_id": 59545226, "link": "https://stackoverflow.com/questions/59545226/this-program-is-not-printing-whole-string/59545458#59545458", "title": "This program is not printing whole string", "body": "<p>Actually, when you are using for loop, it is accessing position in string changing it. Since when you have initialized string as <code>string str = \" \"</code> this means our string is of single whitespace. After which for loop access that string and look for the index <code>str[i]</code> and changes its value to <code>i+'0'</code>.</p>\n\n<p>So, when we are writing code as</p>\n\n<pre><code>for(int i=0; i&lt; 5; i++){\n  str[i]=i+'0';\n  cout&lt;&lt;str[i];\n}\n</code></pre>\n\n<p>it seems, like for that block, str[i] value is i+'0', which is printed, but str doesn't update. Due to which when you do <code>cout&lt;&lt;str;</code> it again shows <code>0</code> as the answer.</p>\n\n<p>To solve this issue we can use property of concatenation, refer the below code</p>\n\n<pre><code> #include &lt;iostream&gt;\n using namespace std;\n\n int main()\n {\n string str;\n for(int i=0;i&lt;5;i++)\n    str+=i+'0';\n cout&lt;&lt;str;\n return 0;\n }\n</code></pre>\n\n<p>This gives the required result as <code>01234</code>.</p>\n\n<p>Hope this helps you.</p>\n"}, {"tags": [], "owner": {"reputation": 381, "user_id": 3507913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4c3a405d091b27d2de033f5692ccaf7?s=128&d=identicon&r=PG&f=1", "display_name": "Pankaj", "link": "https://stackoverflow.com/users/3507913/pankaj"}, "is_accepted": false, "score": 1, "last_activity_date": 1577808977, "creation_date": 1577808977, "answer_id": 59546371, "question_id": 59545226, "link": "https://stackoverflow.com/questions/59545226/this-program-is-not-printing-whole-string/59546371#59546371", "title": "This program is not printing whole string", "body": "<p>when we are assigning </p>\n\n<pre><code>string str = \" \"; \n</code></pre>\n\n<p>here \" \" is of type <code>const char[2];</code>size is 2: 1 lenght of character and 1 length for '\\0' (Null Terminated) character.\nThis gets copied into string str by calling <code>operator=</code> overloaded function.</p>\n\n<p>When We are trying to access <code>str[]</code> with more than 0,1 index of subscript[] say 2 its doing memory violation and that is causing the exception <em>\"string subscript out of range\"</em>, </p>\n\n<p>if you try to access [0] and [1] it will work fine or instead of accessing particular location using array subscript, concatenation (+=) will help.</p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 1, "last_activity_date": 1577875698, "creation_date": 1577875698, "answer_id": 59551830, "question_id": 59545226, "link": "https://stackoverflow.com/questions/59545226/this-program-is-not-printing-whole-string/59551830#59551830", "title": "This program is not printing whole string", "body": "<pre><code>int main()\n{\n string str=\" \";        // str.size() == 1\n\n for(int i=0;i&lt;5;i++)\n   str[i]=i+'0';        // str.size() is still 1\n\n cout&lt;&lt;str;             // str.size() is still 1 \n}\n</code></pre>\n\n<p>In <code>str[i]</code>, if ...</p>\n\n<ul>\n<li><p><code>i&gt;str.size()</code> you are accessing the array out of bounds and get undefined behaviour.</p></li>\n<li><p><code>i==str.size()</code> (where the null terminator is) and you change that value, you also get undefined behaviour.</p></li>\n</ul>\n\n<blockquote>\n  <p>But when i am printing this string with the help of for loop,this program prints whole string.e.g:</p>\n\n<pre><code>for(int i=0; i&lt;5; i++) {\n    cout&lt;&lt;str[i]&lt;&lt;\" \"; \n}\n</code></pre>\n  \n  <p>Why this loop print whole string, but not <code>cout&lt;&lt;str</code>?</p>\n</blockquote>\n\n<p>You've made changes out of bounds and have undefined behaviour. It's possible that you can read the values back one-by-one (instead of getting a program crash) due to <a href=\"https://stackoverflow.com/a/21710033/7582247\">short string optimization</a> - but the <code>size()</code> of <code>str</code> is still 1 since you haven't changed the size.</p>\n\n<p>If your loop had gone further, outside the area used by short string optimization, like this:</p>\n\n<pre><code>for(int i=0; i&lt;25; i++) {\n    cout&lt;&lt;str[i]&lt;&lt;\" \"; \n}\n</code></pre>\n\n<p>it would be even more likely to result in a crash.</p>\n"}], "owner": {"reputation": 108, "user_id": 12576076, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB_6RwQ5lgLMegP91a1BKxfw-ooj7o6cU61uHu-=k-s128", "display_name": "Amit Nandal", "link": "https://stackoverflow.com/users/12576076/amit-nandal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 59551830, "answer_count": 5, "score": 1, "last_activity_date": 1577875698, "creation_date": 1577801855, "last_edit_date": 1577802681, "question_id": 59545226, "link": "https://stackoverflow.com/questions/59545226/this-program-is-not-printing-whole-string", "title": "This program is not printing whole string", "body": "<p>In this program,I store integer values from 0 to 4 in a string and I want to print this string.</p>\n\n<p><strong>CODE:</strong></p>\n\n<pre><code>int main()\n{\n string str=\" \";\n for(int i=0;i&lt;5;i++)\n   str[i]=i+'0';\n cout&lt;&lt;str;\n return 0;\n}\n</code></pre>\n\n<p>But when i run this program,it just shows first element(means '0') of string.</p>\n\n<p>Can anybody tell me the reason,Why this program does not print whole string in output?</p>\n"}, {"tags": ["c++", "visual-studio", "linker"], "comments": [{"owner": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "edited": false, "score": 0, "creation_date": 1577804518, "post_id": 59545219, "comment_id": 105260169, "body": "So you cannot use any functions from that one class (Model.cpp) at all? Then it seems that class is not linked into the libraries and/or the testing application. You may be able to check this with <a href=\"https://docs.microsoft.com/en-us/cpp/build/reference/dumpbin-reference?view=vs-2019\" rel=\"nofollow noreferrer\">Dumpbin</a>."}, {"owner": {"reputation": 462, "user_id": 5438234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2da95ecbe88be791adc2380c4e7c88?s=128&d=identicon&r=PG&f=1", "display_name": "Figwig", "link": "https://stackoverflow.com/users/5438234/figwig"}, "reply_to_user": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "edited": false, "score": 0, "creation_date": 1577805638, "post_id": 59545219, "comment_id": 105260528, "body": "I can create and use variables in an instance of that class. So I can do <code>Model * m = new Model()</code> and access <code>m.memberVar</code>. But I can&#39;t use any methods pertaining to <code>Model</code>. Very strange. I&#39;ll have a look at dumpbin now"}, {"owner": {"reputation": 462, "user_id": 5438234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2da95ecbe88be791adc2380c4e7c88?s=128&d=identicon&r=PG&f=1", "display_name": "Figwig", "link": "https://stackoverflow.com/users/5438234/figwig"}, "reply_to_user": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "edited": false, "score": 0, "creation_date": 1577806062, "post_id": 59545219, "comment_id": 105260672, "body": "What exactly should I be looking for with dumpbin?"}], "answers": [{"tags": [], "owner": {"reputation": 462, "user_id": 5438234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2da95ecbe88be791adc2380c4e7c88?s=128&d=identicon&r=PG&f=1", "display_name": "Figwig", "link": "https://stackoverflow.com/users/5438234/figwig"}, "is_accepted": true, "score": 1, "last_activity_date": 1577812593, "creation_date": 1577812593, "answer_id": 59546883, "question_id": 59545219, "link": "https://stackoverflow.com/questions/59545219/unresolved-external-between-static-library-projects-in-visual-studio/59546883#59546883", "title": "Unresolved External between static library projects in visual studio", "body": "<p>Solved. The methods in question all used classes/structures from the glm maths library. In some files I was defining some stuff for the library, but in the Model.h I wasn't. I'm going to make a common import for glm to make sure every file that uses it has the correct definitions.</p>\n"}], "owner": {"reputation": 462, "user_id": 5438234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f2da95ecbe88be791adc2380c4e7c88?s=128&d=identicon&r=PG&f=1", "display_name": "Figwig", "link": "https://stackoverflow.com/users/5438234/figwig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 59546883, "answer_count": 1, "score": 1, "last_activity_date": 1577812593, "creation_date": 1577801821, "last_edit_date": 1577803456, "question_id": 59545219, "link": "https://stackoverflow.com/questions/59545219/unresolved-external-between-static-library-projects-in-visual-studio", "title": "Unresolved External between static library projects in visual studio", "body": "<p>I've a visual studio solution structured like this:</p>\n\n<p>*Project A (static Library)</p>\n\n<p>*Project B (static Library)</p>\n\n<p>*Testing project (exe)</p>\n\n<p>Project B references project A regularly, and the testing project uses both. Recently, I've added some new functions to project A, but trying to use the new functions in project B causes an unresolved external when building the testing project. I've checked and it only happens in one class (Model.cpp), I can successfully use new functions from other classes in project B. What could be causing project b to trip up on one class from A, but not any others? I've done multiple rebuilds, cleans etc on all projects\nThanks</p>\n"}, {"tags": ["c++", "structure", "unreal-engine4"], "comments": [{"owner": {"reputation": 20255, "user_id": 645128, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/G0V8Q.jpg?s=128&g=1", "display_name": "ryyker", "link": "https://stackoverflow.com/users/645128/ryyker"}, "edited": false, "score": 0, "creation_date": 1577802306, "post_id": 59545012, "comment_id": 105259404, "body": "Clearly <code>C++</code>.  Removed <code>C</code> tag."}, {"owner": {"reputation": 454, "user_id": 1992731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a21ad81af4d507a3d35040ed0f1455e?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/1992731/eric"}, "edited": false, "score": 0, "creation_date": 1606208060, "post_id": 59545012, "comment_id": 114885993, "body": "In normal C++, we can just add a <b>forward declaration</b> of FMasterItem to solve this, but UnrealBuildTool still cannot recognize UStruct (while UClass is OK)"}], "answers": [{"tags": [], "owner": {"reputation": 376, "user_id": 12619324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ucTWv.png?s=128&g=1", "display_name": "Vale", "link": "https://stackoverflow.com/users/12619324/vale"}, "is_accepted": false, "score": 0, "last_activity_date": 1577806730, "creation_date": 1577806730, "answer_id": 59546018, "question_id": 59545012, "link": "https://stackoverflow.com/questions/59545012/ue4-c-unrecognized-type-fmasteritem-type-must-be-a-uclass-ustruct-or-uenu/59546018#59546018", "title": "UE4 C++ Unrecognized type &#39;FMasterItem&#39; - type must be a UCLASS, USTRUCT or UENUM", "body": "<p>You declared a FMasterItem field (itemClass) line 19, in FCraftingRecipie. However, you only declare FMasterItem afterward in the same file. This doesn't work in C++, you need to define the class before it can be referenced someplace else in the same file (this is why the error is saying that the type is not recognized).</p>\n\n<p>I would suggest moving the FCraftingRecipie declaration under FMasterItem. However FMasterItem also references FCraftingRecipie. What's you've created is a circular dependency, a situation where A needs to know B, but B needs to know A. These kind of decency can be resolved by using a reference/pointer rather than a value type field.</p>\n"}], "owner": {"reputation": 11, "user_id": 10305176, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e3dtT5FLLGg/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaPhTLukBHwR_CEfHTizcsQLc8bXSw/mo/photo.jpg?sz=128", "display_name": "Samuel Diesbergen", "link": "https://stackoverflow.com/users/10305176/samuel-diesbergen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3088, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577806730, "creation_date": 1577800632, "last_edit_date": 1577802207, "question_id": 59545012, "link": "https://stackoverflow.com/questions/59545012/ue4-c-unrecognized-type-fmasteritem-type-must-be-a-uclass-ustruct-or-uenu", "title": "UE4 C++ Unrecognized type &#39;FMasterItem&#39; - type must be a UCLASS, USTRUCT or UENUM", "body": "<p>I have an issue declaring the variable in the FCraftingRecipie struct. as line 19 throws the error Unrecognized type 'FMasterItem' - type must be a UCLASS, USTRUCT or UENUM - MasterItem.h  - Line 19  </p>\n\n<p>The Master item needs to store an array of the FCraftingRecipie as this is a list of the items required and the amounts.</p>\n\n<p>Here is a copy of the MasterItem Header File</p>\n\n<pre><code>#pragma once\n\n#include \"CoreMinimal.h\"\n#include \"GameFramework/Actor.h\"\n#include \"Engine/DataTable.h\"\n#include \"MasterItem.generated.h\"\n\nUSTRUCT(BlueprintType)\nstruct FCraftingRecipie : public FTableRowBase\n{\n    GENERATED_BODY()\n\npublic:\n    FCraftingRecipie();\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        FMasterItem itemClass;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        int amount;\n};\n\nUSTRUCT(BlueprintType)\nstruct FMasterItem : public FTableRowBase\n{\n    GENERATED_BODY()\n\npublic:\n    FMasterItem();\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        FName itemID;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        FText name;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        FText description;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        UTexture2D* itemIcon;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        bool canBeUsed;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        FText useText;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        bool isStackable;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        float itemWeight;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        TArray&lt;FCraftingRecipie&gt; recipie;\n\n    UPROPERTY(EditAnywhere, BlueprintReadWrite)\n        float price;\n\n    bool operator==(const FMasterItem&amp; OtherItem) const\n    {\n        if (itemID == OtherItem.itemID)\n        {\n            return true;\n        }\n\n        return false;\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "reference", "visual-studio-2017", "com", "dependencies"], "comments": [{"owner": {"reputation": 156, "user_id": 11872892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097a1964eeb59445181a721534b5a004?s=128&d=identicon&r=PG&f=1", "display_name": "Suarez Zhou", "link": "https://stackoverflow.com/users/11872892/suarez-zhou"}, "edited": false, "score": 1, "creation_date": 1577862193, "post_id": 59544986, "comment_id": 105270029, "body": "Is there anything wrong with your import statement\uff1fWhen the compiler encounters the #import statement, it generates a wrapper class for the interface in the reference component type library. The #import statement is actually equivalent to executing the API function LoadTypeLib(). They generate intelligent pointers for each interface, declare various interface methods, enumeration types, CLSID, and create a series of wrapper methods."}, {"owner": {"reputation": 79, "user_id": 6611452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1f0c3db813281e9bc6722523e5b9e67?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6611452/peter"}, "reply_to_user": {"reputation": 156, "user_id": 11872892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097a1964eeb59445181a721534b5a004?s=128&d=identicon&r=PG&f=1", "display_name": "Suarez Zhou", "link": "https://stackoverflow.com/users/11872892/suarez-zhou"}, "edited": false, "score": 0, "creation_date": 1577872611, "post_id": 59544986, "comment_id": 105271634, "body": "@SuarezZhou-MSFT Thank you for your reply, I&#39;ll update my question to include that piece of infor"}, {"owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "edited": false, "score": 0, "creation_date": 1578386548, "post_id": 59544986, "comment_id": 105412052, "body": "<b>&quot;forward declaration of enum type is nonstandard Hence&quot;</b>:Previously, the reason enum types could not be forward declared is because the size of the enumeration depends on its contents. But now You can forward-declare an enum in C++0x, so long as you declare its storage type at the same time. I suggest you could refer ti the link:<a href=\"https://stackoverflow.com/questions/71416/forward-declaring-an-enum-in-c\" title=\"forward declaring an enum in c\">stackoverflow.com/questions/71416/&hellip;</a>"}], "owner": {"reputation": 79, "user_id": 6611452, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d1f0c3db813281e9bc6722523e5b9e67?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/6611452/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 409, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577873461, "creation_date": 1577800459, "last_edit_date": 1577873461, "question_id": 59544986, "link": "https://stackoverflow.com/questions/59544986/import-tlb-generated-tlh-gives-forward-declaration-of-enum-type-is-nonstanda", "title": "Import .tlb, Generated .tlh Gives: forward declaration of enum type is nonstandard", "body": "<p>I'm reusing a code I wrote couple years ago on a different version of Visual Studio, now Im trying to do it in VS 2017. The code aims to connect different applications using server-client arrangement.I'm accessing the .tlb of one application but I cannot establish the connection (either error of non-accessible .tlh or just no identification of different application methods/properties) , among 254 others. \nThe question is similar to this one: <a href=\"https://stackoverflow.com/questions/57751715/import-tlb-file-gives-cannot-open-source-file-x-tlh\">Import .TLB file gives &quot;cannot open source file x.tlh&quot;</a></p>\n\n<p>I have tried adding the .tlb file in additional library directories but even when the error disappears, the code still doesnot recognize many methods that were fine before. #import statement shows no errors, yet the generated .tlh file has the following error:</p>\n\n<blockquote>\n  <p>forward declaration of enum type is nonstandard\n  Hence, It doesnot compile</p>\n</blockquote>\n\n<p>Other issues also appeared, such as this:</p>\n\n<blockquote>\n  <p>no instance of function template \"IID_PPV_ARGS_Helper\" matches the argument list</p>\n</blockquote>\n\n<p>for this line: </p>\n\n<pre><code>HRESULT hr = hyStream-&gt;QueryInterface(IID_PPV_ARGS(&amp;Strm));\n</code></pre>\n\n<p>Now, the whole project was running seamlessly back then. I copied three classes with their headers to a new project, so maybe dependencies are the source of errors? Should I add .tlb file in library dependencies of the project?</p>\n\n<p>Any comment is highly appreciated..</p>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 159, "user_id": 4158734, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eu4CW-9MvFY/AAAAAAAAAAI/AAAAAAAAABQ/ljMSPMBtZ9s/photo.jpg?sz=128", "display_name": "Imla Assuom", "link": "https://stackoverflow.com/users/4158734/imla-assuom"}, "edited": false, "score": 0, "creation_date": 1577800323, "post_id": 59544857, "comment_id": 105258818, "body": "check this, may help bitWrite(clowns_mask, i-34, digitalRead(i));"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1577804500, "post_id": 59544857, "comment_id": 105260161, "body": "<i>&quot;it doesn&#39;t show me the mask but separated bits&quot;</i> What do you mean by this?"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11945570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5NwgtYhD6To/AAAAAAAAAAI/AAAAAAAAAX0/z4T_TsC6y5E/photo.jpg?sz=128", "display_name": "KD Technology", "link": "https://stackoverflow.com/users/11945570/kd-technology"}, "edited": false, "score": 0, "creation_date": 1577863455, "post_id": 59549078, "comment_id": 105270176, "body": "Is there another way to print the binary number (clowns_mask) to the serial monitor without Serial.println(n, BIN)?"}, {"owner": {"reputation": 611, "user_id": 1377139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac32e89334de8bda0fdcb7d347577b9c?s=128&d=identicon&r=PG", "display_name": "Bradford Needham", "link": "https://stackoverflow.com/users/1377139/bradford-needham"}, "reply_to_user": {"reputation": 35, "user_id": 11945570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5NwgtYhD6To/AAAAAAAAAAI/AAAAAAAAAX0/z4T_TsC6y5E/photo.jpg?sz=128", "display_name": "KD Technology", "link": "https://stackoverflow.com/users/11945570/kd-technology"}, "edited": false, "score": 0, "creation_date": 1577924360, "post_id": 59549078, "comment_id": 105282651, "body": "I don&#39;t understand. Perhaps create a new Stackoverflow question with the current code and what you&#39;d like it to do."}], "tags": [], "owner": {"reputation": 611, "user_id": 1377139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac32e89334de8bda0fdcb7d347577b9c?s=128&d=identicon&r=PG", "display_name": "Bradford Needham", "link": "https://stackoverflow.com/users/1377139/bradford-needham"}, "is_accepted": true, "score": 0, "last_activity_date": 1577834246, "creation_date": 1577834246, "answer_id": 59549078, "question_id": 59544857, "link": "https://stackoverflow.com/questions/59544857/how-to-put-some-inputs-inside-one-bitmask-arduino/59549078#59549078", "title": "How to put some inputs inside one bitmask? #arduino", "body": "<p>The problem is in get_clowns_state(). clowns_mask is a 16-bit number, yet the bitWrite() calls attempt to set the non-existent bits 34 through 48 in clown_mask.</p>\n\n<p>Change the bitWrite() call to:</p>\n\n<pre><code>bitWrite(clowns_mask, i - 34, digitalRead(i));\n</code></pre>\n\n<p>That way, bit 0 of clowns_mask will store the state of pin 34, and bit 14 of clowns_mask will store the state of bit 48.</p>\n"}], "owner": {"reputation": 35, "user_id": 11945570, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5NwgtYhD6To/AAAAAAAAAAI/AAAAAAAAAX0/z4T_TsC6y5E/photo.jpg?sz=128", "display_name": "KD Technology", "link": "https://stackoverflow.com/users/11945570/kd-technology"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 59549078, "answer_count": 1, "score": 0, "last_activity_date": 1577834246, "creation_date": 1577799654, "last_edit_date": 1577799833, "question_id": 59544857, "link": "https://stackoverflow.com/questions/59544857/how-to-put-some-inputs-inside-one-bitmask-arduino", "title": "How to put some inputs inside one bitmask? #arduino", "body": "<p>I have 14 inputs (that always updates/ change states) that I would like to read and put them all inside one bitmask.\nThen, I'll use this bitmask to check different sequences that matters to me.\nIs this the right way to do it?\nI'm trying to print the mask on the monitor, and it doesn't show me the mask but separated bits.</p>\n\n<pre><code>uint16_t clowns_mask = 0b00000000000000;\n\n\nuint16_t get_clowns_state() {\n    for (uint8_t i = 34; i &lt; 48; i++) {    // scan the input pins\n        bitWrite(clowns_mask, i, digitalRead(i));\n    }\n    return clowns_mask;\n}\n\nvoid winning_check(uint16_t mask) {\n    if ((mask &amp; 0b11110000000000) == 0b11110000000000) {  // top row winning sequence\n        digitalWrite(WINNING_SENSOR_PIN, HIGH);\n        digitalWrite(TOP_ROW_MOTOR_PIN, LOW);                    // =turn on\n    } else if ((mask &amp; 0b00001111100000) == 0b00001111100000) {  // mid row winning sequence\n        digitalWrite(WINNING_SENSOR_PIN, HIGH);\n        digitalWrite(MID_ROW_MOTOR_PIN, LOW);                    // =turn on\n    } else if ((mask &amp; 0b00000000011111) == 0b00000000011111) {  // btm row winning sequence\n        digitalWrite(WINNING_SENSOR_PIN, HIGH);\n        digitalWrite(BTM_ROW_MOTOR_PIN, LOW);  // =turn on\n    } else {\n        digitalWrite(TOP_ROW_MOTOR_PIN, HIGH);  // =turn on\n        digitalWrite(MID_ROW_MOTOR_PIN, HIGH);  // =turn on\n        digitalWrite(BTM_ROW_MOTOR_PIN, HIGH);  // =turn on\n        digitalWrite(WINNING_SENSOR_PIN, LOW);\n    }\n#ifdef DEBUG\n    Serial.println(mask, BIN);\n#endif\n}\n\n\nloop() {\n   winning_check(get_clowns_state());\n}\n</code></pre>\n"}, {"tags": ["c++", "doxygen", "doxygen-wizard"], "comments": [{"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1577799687, "post_id": 59544818, "comment_id": 105258627, "body": "Which version of doxygen are you using? To the best of my knowledge the <code>#include</code> cannot be documented in doxygen and doxygen will keep this documentation &quot;in memory&quot; and add it tho the next item it finds."}, {"owner": {"reputation": 85, "user_id": 3991216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a72cb92438dc5511e11250dfee90d5?s=128&d=identicon&r=PG&f=1", "display_name": "Joao Ferreira", "link": "https://stackoverflow.com/users/3991216/joao-ferreira"}, "reply_to_user": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1577800111, "post_id": 59544818, "comment_id": 105258758, "body": "My doxygen version is 1.8.16 for Windows x86"}], "answers": [{"tags": [], "owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "is_accepted": true, "score": 3, "last_activity_date": 1577800829, "creation_date": 1577800829, "answer_id": 59545042, "question_id": 59544818, "link": "https://stackoverflow.com/questions/59544818/documenting-namepaces-in-doxygen/59545042#59545042", "title": "Documenting namepaces in Doxygen", "body": "<p>The problem of the \"Compiler flags\" is indeed that <code>#include</code> cannot be documented and that the comment (including the <code>&lt;</code>) flows into the brief description of the next item (i.e. <code>namespace NGE</code>). The fact that the documentation of the <code>namespace NGE</code> also has the extra <code>&lt;</code> is due to the fact that the <code>///&lt;</code> is used for documenting after an complete item and in this case the definition of the namespace is not complete yet.</p>\n"}], "owner": {"reputation": 85, "user_id": 3991216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5a72cb92438dc5511e11250dfee90d5?s=128&d=identicon&r=PG&f=1", "display_name": "Joao Ferreira", "link": "https://stackoverflow.com/users/3991216/joao-ferreira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59545042, "answer_count": 1, "score": 0, "last_activity_date": 1577801379, "creation_date": 1577799426, "last_edit_date": 1577801379, "question_id": 59544818, "link": "https://stackoverflow.com/questions/59544818/documenting-namepaces-in-doxygen", "title": "Documenting namepaces in Doxygen", "body": "<p>I'm starting documenting all of my code with doxygen. I\u00b4ve no problem with file documentation but i runinto a small problem when generating documentation for several files.</p>\n\n<p>For example:</p>\n\n<p>In some header files (I\u00b4m using only C/C++ code projects) i have the following code:</p>\n\n<pre><code>#include \"../config/compiler.h\"  ///&lt; Compiler flags\n\nnamespace nge                    ///&lt; NGE namespace\n{\n... some code...\n}\n</code></pre>\n\n<p>After running doxywizard if I look for the documentation for namepaces I will see the NGE namespace but instead of getting:</p>\n\n<pre><code>NGE | NGE namespace\n</code></pre>\n\n<p>I get</p>\n\n<pre><code>NGE | Compiler flags\n</code></pre>\n\n<p>this occurs even if I swap <code>/// NGE namespace</code> with <code>/// @namespace NGE namespace</code></p>\n\n<p>Cam somebody please explain me where I\u00b4m making the mistake ??</p>\n"}, {"tags": ["c++", "gcc", "pgo"], "comments": [{"owner": {"reputation": 53, "user_id": 12468771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1252c4b32e2864a6b4a117b89b994cad?s=128&d=identicon&r=PG&f=1", "display_name": "gundechaHills", "link": "https://stackoverflow.com/users/12468771/gundechahills"}, "edited": false, "score": 0, "creation_date": 1578580655, "post_id": 59544660, "comment_id": 105491455, "body": "Any help would be appreciated"}], "answers": [{"tags": [], "owner": {"reputation": 1214, "user_id": 214260, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/7d22cf74f5f87fedb26aeef5fa94f9a3?s=128&d=identicon&r=PG", "display_name": "i30817", "link": "https://stackoverflow.com/users/214260/i30817"}, "is_accepted": false, "score": 0, "last_activity_date": 1589274684, "last_edit_date": 1589274684, "creation_date": 1589214437, "answer_id": 61734525, "question_id": 59544660, "link": "https://stackoverflow.com/questions/59544660/profile-guided-optimization-gcov/61734525#61734525", "title": "Profile Guided Optimization - __gcov", "body": "<p>Try the edit on the end of this question of mine for a possibility: <a href=\"https://stackoverflow.com/questions/61731341/how-can-i-get-gcc-profile-guided-optimizations-to-stop-writing-files-after-being\">How can i get gcc profile guided optimizations to stop writing files after being &#39;optimized&#39;?</a></p>\n\n<p>edit: nvm, i tried to remove the flag and it crashes at runtime instead of compile time. I don't understand how this is supposed to not write files.</p>\n\n<p>edit2: I found the cause in my case, which might be the same as yours.</p>\n\n<p>The makefile 'make clean' wasn't cleaning all .o files from the dir, so between the profile-sampling build (which does use gcov in the LDFlags, or more exactly, fprofile-generate pulls it in), and the profile-optimization build there were left-over .o files the linker tries to pull in because the source 'didn't change', files with the wrong dependency.</p>\n\n<p>Make sure your .o and .d files are deleted before the second optimization build.</p>\n"}], "owner": {"reputation": 53, "user_id": 12468771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1252c4b32e2864a6b4a117b89b994cad?s=128&d=identicon&r=PG&f=1", "display_name": "gundechaHills", "link": "https://stackoverflow.com/users/12468771/gundechahills"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1589274684, "creation_date": 1577798495, "question_id": 59544660, "link": "https://stackoverflow.com/questions/59544660/profile-guided-optimization-gcov", "title": "Profile Guided Optimization - __gcov", "body": "<p>I am trying to run profile guided optimization on my code with <code>-fprofile-generate</code> flag. When I compile with it, I am getting the following error.</p>\n\n<p><code>obj\\Debug\\main.o||In function ZNSt10_HashtableIiSt4pairIKiiESaIS2_ENSt8__detail10_Select1stESt8equal_toIiESt4hashIiENS4_18_Mod_range_hashingENS4_20_Default_ranged_hashENS4_20_Prime_rehash_policyENS4_17_Hashtable_traitsILb0ELb0ELb1EEEE5clearEv':|\nc:\\program files (x86)\\gfortran\\lib\\gcc\\mingw32\\4.10.0\\include\\c++\\bits\\hashtable.h|1937|undefined reference to __gcov_indirect_call_profiler_v2'|\nc:\\program files (x86)\\gfortran\\lib\\gcc\\mingw32\\4.10.0\\include\\c++\\bits\\hashtable.h|1937|undefined reference to __gcov_indirect_call_callee'|\nc:\\program files (x86)\\gfortran\\lib\\gcc\\mingw32\\4.10.0\\include\\c++\\bits\\hashtable.h|1937|undefined reference to __gcov_time_profiler'|\nc:\\program files (x86)\\gfortran\\lib\\gcc\\mingw32\\4.10.0\\include\\c++\\bits\\hashtable.h|1942|undefined reference to __gcov_one_value_profiler'|\nc:\\program files (x86)\\gfortran\\lib\\gcc\\mingw32\\4.10.0\\include\\c++\\bits\\hashtable.h|1942|undefined reference to __gcov_average_profiler'|\nc:\\program files (x86)\\gfortran\\lib\\gcc\\mingw32\\4.10.0\\include\\c++\\bits\\hashtable.h|1942|undefined reference to __gcov_ior_profiler'|\n</code></p>\n\n<p>There are other error messages in the but all of them are related to <code>__gcov</code></p>\n\n<p>I am not able to find anything online regarding this. Can someone please help?\nI am using g++ 8.1.0 on windows and using <code>-march=native</code>, <code>-std=c++14</code> and <code>-ffast-math</code> flags. The program complies and runs perfectly fine without <code>-fprofile-generate</code> flag.</p>\n"}, {"tags": ["c++", "c++17", "std", "move-semantics", "perfect-forwarding"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 6, "creation_date": 1577798688, "post_id": 59544653, "comment_id": 105258267, "body": "Neither, simply pass the initializer-list directly - <a href=\"https://godbolt.org/z/AZW5xu\" rel=\"nofollow noreferrer\">godbolt.org/z/AZW5xu</a>. Also <code>const X &amp;&amp;</code> is usually wrong, you want <code>X&amp;&amp;</code> or <code>const X&amp;</code> depending on the use-case."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1577798985, "post_id": 59544653, "comment_id": 105258378, "body": "Holt; I know I can just pass the pairs in via initializer list; however between the two which one is better and why? As for the <code>const x&amp;&amp;</code>, and <code>const x&amp;</code> I wasn&#39;t particularly concerned with them... I wrote constructor this way just to be able to compile both <code>std::move</code> and <code>std::forward</code>... It&#39;s more just about performance, the readability, and the esthetics between the two different algorithms."}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1577799154, "post_id": 59544653, "comment_id": 105258439, "body": "<i>&quot;between the two which one is better and why?&quot;</i> - As I said, neither, the best one is the version without them. There is no point in using <code>std::move</code> or <code>std::forward</code> in this case, so there is no point comparing them..."}], "answers": [{"comments": [{"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1577799554, "post_id": 59544802, "comment_id": 105258590, "body": "user <code>holt</code> gave me basically this same answer in a comment; However, I like how you explained how and why they aren&#39;t in this particular case."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1577799630, "post_id": 59544802, "comment_id": 105258609, "body": "I don&#39;t use them all that often; so at times I&#39;ll ask things like this for clarity."}], "tags": [], "owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "is_accepted": true, "score": 7, "last_activity_date": 1577801254, "last_edit_date": 1577801254, "creation_date": 1577799332, "answer_id": 59544802, "question_id": 59544653, "link": "https://stackoverflow.com/questions/59544653/to-forward-or-move-or-not-how-to-determine-which-is-preferred-within-the-contex/59544802#59544802", "title": "To forward or move or not; how to determine which is preferred within the context of a class&#39;s usage?", "body": "<p>Neither.</p>\n\n<p><code>Test::DataSet(/*...*/)</code> is already a rvalue that can bind to a rvalue reference. The only thing <code>std::move</code> does is to turn a lvalue into a xvalue (which is a rvalue), so that it can bind to a rvalue reference, which lvalues cannot. So <code>std::move</code> is redundant.</p>\n\n<p><code>std::forward</code> does the same only conditional on its template argument. So it is redundant (at best) as well.</p>\n\n<p><code>const DataSet&amp;&amp;</code> as parameter makes no sense. You want either <code>DataSet&amp;&amp;</code> which binds only to rvalues or <code>const DataSet&amp;</code>, which binds to rvalues and lvalues.</p>\n\n<p>If you want to make use of the fact that the passed reference might be a rvalue (i.e. by moving from its members), then you need two overloads of your function. One taking <code>DataSet&amp;&amp;</code> which is called with rvalue arguments and one taking <code>const DataSet&amp;</code> which is called with lvalue arguments.</p>\n\n<p>In the specific case of the <code>Test</code> function in your question, I don't see how there would be any benefit to moving from the members or do any other modification of the <code>DataSet</code> state, so I would go with simply <code>const DataSet&amp;</code> as parameter and never bother with <code>std::move</code>ing or <code>std::forward</code>ing into that function specifically.</p>\n"}, {"comments": [{"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1577800110, "post_id": 59544890, "comment_id": 105258756, "body": "I truly appreciate the tip. Yeah in most cases <code>T&amp;</code> will suffice, but sometimes I might want to get a boost in performance with <code>T&amp;&amp;</code>. It depends on the custom data sets - structures I&#39;m passing or moving around. Working on the internals of a 3D Graphics Engine via OpenGL - Vulkan. So, I&#39;m experimenting with ideas for use within the engine to try and keep it generic with optimal performance, etc..."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1577800765, "post_id": 59544890, "comment_id": 105258959, "body": "I just booked marked the GitHub page by Stroustrup and Sutter! If those two maintain it; you know it ought to be good! I&#39;ve been self-taught in C++ for almost that long... I&#39;m still learning. I can write a 3D graphics engine from scratch, but when diving deeper into the STL... I&#39;ve learned a lot on my own yet there is still so much that I haven&#39;t. I knew about <code>move</code> and <code>forward</code> already; I&#39;ve used them here and there, but when you do not use them all that often it becomes more about remembering which one serves which purpose and the difference in performance."}, {"owner": {"reputation": 313, "user_id": 6483524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eeb6ee7ec0f01f1d68bb7a9f2ffa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiger4Hire", "link": "https://stackoverflow.com/users/6483524/tiger4hire"}, "reply_to_user": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1577801019, "post_id": 59544890, "comment_id": 105259031, "body": "This link has a nice description of perfect forwarding (when you should use std::forward) <a href=\"https://eli.thegreenplace.net/2014/perfect-forwarding-and-universal-references-in-c\" rel=\"nofollow noreferrer\">eli.thegreenplace.net/2014/&hellip;</a>"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "reply_to_user": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 1, "creation_date": 1577801080, "post_id": 59544890, "comment_id": 105259050, "body": "@FrancisCugler If you sought to understand <code>move</code> and <code>forward</code>, you should probably look at dedicated resources online, not try to learn-it by trial-and-error. For instance, there is no &quot;performance&quot; competition between <code>move</code> and <code>forward</code>, as both serves different (yet related) purpose. Also, <code>std::forward</code> as (almost?) no use outside of templated code."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1577801261, "post_id": 59544890, "comment_id": 105259110, "body": "Also, never talk about <i>boost in performance</i> if you haven&#39;t profiled your <b>compiler optimized</b> code with a profiler and verified that it actually is a bottleneck."}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "reply_to_user": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 0, "creation_date": 1577801545, "post_id": 59544890, "comment_id": 105259181, "body": "@Timo I think you might have misunderstood the intent... I never asked that in the question itself. It was just a hint within the comments only to suggest which of the two methods gives better performance and in which context, using the smallest footprint..."}, {"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1577801716, "post_id": 59544890, "comment_id": 105259232, "body": "Regarding your second example, I am not sure I understood your intent. <code>MakeALargeSet()</code> would most likely return by-value as well. So you are demonstrating calls of the rvalue reference overload (or the <code>const</code> lvalue reference one if that doesn&#39;t exist) in both examples. Is that intended?"}, {"owner": {"reputation": 313, "user_id": 6483524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eeb6ee7ec0f01f1d68bb7a9f2ffa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiger4Hire", "link": "https://stackoverflow.com/users/6483524/tiger4hire"}, "reply_to_user": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 0, "creation_date": 1577825310, "post_id": 59544890, "comment_id": 105265712, "body": "@Walnut : I was hoping no one would spot that :-). No, I changed the first example to show the std::forward was not necessary, and swapped an R-Value for an L-Value. (Using an R-Value as a (const&amp;) parameter is still a valid thing to do of coarse. I will amend my answer"}], "tags": [], "owner": {"reputation": 313, "user_id": 6483524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eeb6ee7ec0f01f1d68bb7a9f2ffa34f?s=128&d=identicon&r=PG&f=1", "display_name": "Tiger4Hire", "link": "https://stackoverflow.com/users/6483524/tiger4hire"}, "is_accepted": false, "score": 2, "last_activity_date": 1577826348, "last_edit_date": 1577826348, "creation_date": 1577799886, "answer_id": 59544890, "question_id": 59544653, "link": "https://stackoverflow.com/questions/59544653/to-forward-or-move-or-not-how-to-determine-which-is-preferred-within-the-contex/59544890#59544890", "title": "To forward or move or not; how to determine which is preferred within the context of a class&#39;s usage?", "body": "<p>[Code samples edited in response to comments]<br>\nA useful bit of <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md#f15-prefer-simple-and-conventional-ways-of-passing-information\" rel=\"nofollow noreferrer\">advice</a> from the ISO Core Guidelines. This would suggest that you should prefer (const T&amp;), but if you really need speed add a (T&amp;&amp;) specifically. This way you can pass small sets as (L-Value)  </p>\n\n<pre><code>const auto data = Test::DataSet{ \n          { 10.0, 20.0 },\n          { 30.0, 40.0 },\n          { 50.0, 60.0 }};\nTest obj( data );\n</code></pre>\n\n<p>or (R-Value)   </p>\n\n<pre><code>Test obj( Test::DataSet{ \n          { 10.0, 20.0 },\n          { 30.0, 40.0 },\n          { 50.0, 60.0 },\n        });\n</code></pre>\n\n<p>Adding the extra move makes the second kind of call more efficient, but the advice is to only use this type of optimization if it is required. You should avoid having different semantics for one constructor than for the other, and the easiest way to avoid that is to only have one constructor.</p>\n\n<p>Personally, even after 20+ years of C++ programming, I found the table in the link so useful I printed it out and stuck it to my monitor.</p>\n"}], "owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "accepted_answer_id": 59544802, "answer_count": 2, "score": 3, "last_activity_date": 1577826348, "creation_date": 1577798479, "last_edit_date": 1577800881, "question_id": 59544653, "link": "https://stackoverflow.com/questions/59544653/to-forward-or-move-or-not-how-to-determine-which-is-preferred-within-the-contex", "title": "To forward or move or not; how to determine which is preferred within the context of a class&#39;s usage?", "body": "<pre><code>class Test {\npublic:\n    typedef std::set&lt;std::pair&lt;double, double&gt;&gt; DataSet;\n\n    explicit Test(const DataSet&amp;&amp; d) {\n        for (auto &amp;itr : d) {\n            std::cout &lt;&lt; \"value1 = \" &lt;&lt; itr.first &lt;&lt; '\\n';\n            std::cout &lt;&lt; \"value2 = \" &lt;&lt; itr.second &lt;&lt; '\\n';\n        }\n    }\n\n};\n\nint main() {\n    //using namespace util;\n    try {\n        // Forwarding\n        Test obj( std::forward&lt;Test::DataSet&gt;(\n            { \n              { 10.0, 20.0 },\n              { 30.0, 40.0 },\n              { 50.0, 60.0 }\n            }\n        ));\n\n        std::cout &lt;&lt; '\\n';\n\n        // Move\n        Test obj2(std::move(Test::DataSet(\n            {\n              { 10.0, 20.0 },\n              { 30.0, 40.0 },\n              { 50.0, 60.0 }\n            }\n           )\n        ));\n\n    } catch (const std::exception&amp; e) {\n        std::cerr &lt;&lt; e.what() &lt;&lt; std::endl;\n        return EXIT_FAILURE;\n    }\n\n    return EXIT_SUCCESS;\n}\n</code></pre>\n"}, {"tags": ["c++", "class", "inheritance", "friend", "friend-function"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 2, "creation_date": 1577798584, "post_id": 59544618, "comment_id": 105258224, "body": "As specified by the link, there is no friendship inheritance in C++, so <code>f</code> is not a friend of <code>B</code>, so <code>f</code> cannot access private base classes or members of <code>B</code>, so <code>f</code> cannot access <code>B::a</code> since it would need access to the private base class."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "edited": false, "score": 1, "creation_date": 1577798931, "post_id": 59544618, "comment_id": 105258359, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/47469715/are-friend-functions-inherited-and-why-would-a-base-class-friend-function-work\">Are friend functions inherited? and why would a base class FRIEND function work on a derived class object?</a>"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 2, "creation_date": 1577806701, "post_id": 59544618, "comment_id": 105260900, "body": "Obviously, if you derive privately from a class, external code will essentially not see that you derives from that class. Thus given that external code does not see that <code>B</code> derive from <code>A</code>, then why would you expect <code>f</code> to be able to see that. When you do not derive publicly from a class, there no IS-A relationship between those classes. By the way, whenever possible, it is preferable to replace private or protected inheritance by containment. You want to avoid tight coupling as much as possible."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 10519287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa53e283e13e50b1737879a4cf92c9ec?s=128&d=identicon&r=PG", "display_name": "JM233333", "link": "https://stackoverflow.com/users/10519287/jm233333"}, "edited": false, "score": 0, "creation_date": 1577803167, "post_id": 59544956, "comment_id": 105259700, "body": "I&#39;m confused that when inherits via <code>public</code> access, accessibility of <code>private</code> members of <code>A</code> is the same as inherits as <code>private</code> access, what&#39;s the differene between them?"}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 1, "creation_date": 1577832578, "post_id": 59544956, "comment_id": 105266983, "body": "If <code>A</code> is a <code>public</code> base class of <code>B</code>, then a <code>B &amp;</code> can be implicitly converted to an <code>A &amp;</code>, so <code>A::a</code> is accessable, as <code>foo</code> is a friend of <code>A</code>"}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": true, "score": 4, "last_activity_date": 1577800374, "creation_date": 1577800374, "answer_id": 59544956, "question_id": 59544618, "link": "https://stackoverflow.com/questions/59544618/why-are-friend-functions-available-for-derived-classes-only-when-using-public/59544956#59544956", "title": "Why are friend functions &quot;available&quot; for derived classes only when using public inheritance?", "body": "<p>As already pointed out in the answer linked above, friendship is not inherited. Thus, a friend of <code>A</code> is not also a friend of <code>B</code>. Having <code>B</code> inherit from <code>A</code> via <code>private</code> access means that all members of <code>A</code> are accessible as private members of <code>B</code> <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.access.base#1\" rel=\"nofollow noreferrer\">[class.access.base]/1</a>. Since <code>f</code> is not a friend of <code>B</code>, it cannot access private members of <code>B</code> <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.access#1.1\" rel=\"nofollow noreferrer\">[class.access]/1.1</a>. Since <code>f</code> is not a friend of <code>B</code>, the base class <code>A</code> of <code>B</code> is also not accessible from <code>f</code> <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.access.base#4\" rel=\"nofollow noreferrer\">[class.access.base]/4</a>. Since the base class <code>A</code> of <code>B</code> is not accessible from <code>f</code>, there's also no way you could get to the <code>A</code> subobject of a <code>B</code> (of which you could access the members) in <code>f</code> <a href=\"https://timsong-cpp.github.io/cppwp/n4659/class.access.base#5\" rel=\"nofollow noreferrer\">[class.access.base]/5</a>&hellip;</p>\n"}], "owner": {"reputation": 43, "user_id": 10519287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa53e283e13e50b1737879a4cf92c9ec?s=128&d=identicon&r=PG", "display_name": "JM233333", "link": "https://stackoverflow.com/users/10519287/jm233333"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 59544956, "answer_count": 1, "score": 4, "last_activity_date": 1577832266, "creation_date": 1577798275, "last_edit_date": 1577832266, "question_id": 59544618, "link": "https://stackoverflow.com/questions/59544618/why-are-friend-functions-available-for-derived-classes-only-when-using-public", "title": "Why are friend functions &quot;available&quot; for derived classes only when using public inheritance?", "body": "<p>When a derived class inherits from a base class via public access, the question is the same as that in <a href=\"https://stackoverflow.com/questions/47469715/are-friend-functions-inherited-and-why-would-a-base-class-friend-function-work\">Are friend functions inherited? and why would a base class FRIEND function work on a derived class object?</a> . However, if it inherits via protected or private access, there will be a visibility error.</p>\n\n<p>When it inherits via public access, the accessibility of private members of A is the same as if inheriting via private access. What's the difference between them?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>class A {\nprivate:\n    int a;\n    friend void f();\n};\n\nclass B : private A {\n};\n\nvoid f() {\n    B obj;\n    int x = obj.a;\n}\n\nint main() {\n    f();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 2, "creation_date": 1577798403, "post_id": 59544545, "comment_id": 105258158, "body": "<code>previous[&amp;target_node];</code> only inserts a new element in the map if the key <code>&amp;target_node</code> hasn&#39;t been inserted before. So if it adds a new element to the map, then that means that <code>&amp;target_node</code> has not been inserted beforehand. So your algorithm is wrong somewhere and didn&#39;t insert the key. I suggest you step through it in a debugger with a simple test case to see where it goes wrong."}], "owner": {"reputation": 31, "user_id": 12632307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ee17ccd580a43a2b4b4032fd3a8796c?s=128&d=identicon&r=PG&f=1", "display_name": "Harold Smith", "link": "https://stackoverflow.com/users/12632307/harold-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1577797847, "creation_date": 1577797847, "question_id": 59544545, "link": "https://stackoverflow.com/questions/59544545/c-custom-class-mapping-retrieving-value-from-map-adds-new-index", "title": "C++ custom class mapping retrieving value from map adds new index", "body": "<p>I have an a* algorithm to find the shortest path from source node to target node. In the last part of the function I want to loop over the visited nodes and add the shortest path to the <code>std::vector&lt;map::map_node*&gt; path</code>. However, this line of code seems to add an index to <code>previous</code> instead of retrieving the value: <code>map::map_node* current_node = previous[&amp;target_node];</code>. </p>\n\n<p>How can I retrieve the value of the map by using the target node as key without it adding a random index in the <code>previous</code> map, to get a path from the source to the target node?</p>\n\n<p>I'm using the following framework for my application: <a href=\"https://nullptr.club/libkmint/annotated.html\" rel=\"nofollow noreferrer\">https://nullptr.club/libkmint/annotated.html</a></p>\n\n<p>Source code: </p>\n\n<pre><code>void helper::shortest_path_to_target(map::map_node &amp;source_node, map::map_node &amp;target_node)\n{\n    std::vector&lt;map::map_node*&gt; visited;\n    std::vector&lt;map::map_node*&gt; queue;\n    std::map&lt;map::map_node*, map::map_node*&gt; previous;\n    std::map&lt;map::map_node*, float&gt; cost;\n    std::map&lt;map::map_node*, float&gt; heuristic_cost;\n\n    queue.push_back(&amp;source_node);\n    cost[&amp;source_node] = 0;\n    heuristic_cost[&amp;source_node] = heuristic(source_node, target_node);\n\n    while (queue.size() &gt; 0) {\n        map::map_node* shortest_path_node = shortest_distance(cost, heuristic_cost, queue);\n\n        for (int i = 0; i &lt; shortest_path_node-&gt;num_edges(); i++) {\n            map::map_edge &amp;edge = (*shortest_path_node)[i];\n            map::map_node *node_to = &amp;edge.to();\n\n            if (std::find(visited.begin(), visited.end(), node_to) == visited.end()\n                &amp;&amp; std::find(queue.begin(), queue.end(), node_to) == queue.end()) {\n                queue.push_back(node_to);\n\n            }\n\n            if (cost.find(node_to) == cost.end() || cost[node_to] &gt; cost[shortest_path_node] + edge.weight())\n            {\n                cost[node_to] = cost[shortest_path_node] + edge.weight();\n                heuristic_cost[node_to] = heuristic(*shortest_path_node, target_node);\n                previous[node_to] = shortest_path_node;\n            }\n\n            if (node_to == &amp;target_node)\n            {\n                cost[node_to] = cost[shortest_path_node] + edge.weight();\n                heuristic_cost[node_to] = heuristic(*shortest_path_node, target_node);\n                previous[node_to] = shortest_path_node;\n                break;\n            }\n        }\n        queue.erase(queue.begin());\n        visited.push_back(shortest_path_node);\n    }\n\n    // shortest path to target_node\n    map::map_node* current_node = previous[&amp;target_node];\n    path.clear();\n    while (current_node != &amp;source_node) {\n        path.insert(path.begin(), current_node);\n        current_node = previous[current_node];\n    }\n}\n\nmap::map_node* helper::shortest_distance(std::map&lt;map::map_node*, float&gt;&amp; cost, std::map&lt;map::map_node*, float&gt;&amp; heuristic_cost, std::vector&lt;map::map_node*&gt;&amp; queue)\n{\n    map::map_node *closest_to_target_node = nullptr;\n    for (int i = 0; i &lt; queue.size(); i++) {\n        if (closest_to_target_node == nullptr || cost[queue[i]] + heuristic_cost[queue[i]] &lt; cost[closest_to_target_node] + heuristic_cost[closest_to_target_node]) {\n            closest_to_target_node = queue[i];\n        }\n    }\n    return closest_to_target_node;\n}\n\n// Manhattan distance heuristic is mostly used in standard grid where you can only move in 4 directions\nfloat helper::heuristic(const map::map_node &amp;source_node, const map::map_node &amp;target_node)\n{\n    // Lowest cost between adjacent squares\n    int D = 1;\n    return std::abs(source_node.location().x() - target_node.location().x()) + std::abs(source_node.location().y() - target_node.location().y());\n}\n</code></pre>\n"}, {"tags": ["c++", "constexpr", "c++20", "consteval"], "comments": [{"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1577798069, "post_id": 59544519, "comment_id": 105258059, "body": "<a href=\"https://stackoverflow.com/questions/56130792/will-consteval-functions-allow-template-parameters-dependent-on-function-argumen\" title=\"will consteval functions allow template parameters dependent on function argumen\">stackoverflow.com/questions/56130792/&hellip;</a>"}, {"owner": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 1, "creation_date": 1577798306, "post_id": 59544519, "comment_id": 105258127, "body": "Note that both GCC and Clang first fail on the <code>constexpr auto value = enumToInt(e);</code> line, not on the use of <code>value</code> as a template parameter, so it is not a <i>&quot;limitation of injecting a clearly constexpr value into template&quot;</i>, but rather that you cannot use <code>e</code> as a compile-time expression. The above link explains why."}, {"owner": {"reputation": 3839, "user_id": 9171697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/475b59ee1312dc014fbe1eebcd91d307?s=128&d=identicon&r=PG&f=1", "display_name": "Meowmere", "link": "https://stackoverflow.com/users/9171697/meowmere"}, "edited": false, "score": 1, "creation_date": 1577800685, "post_id": 59544519, "comment_id": 105258931, "body": "A short quote from <a href=\"https://stackoverflow.com/a/56131346/9171697\">Barry&#39;s answer</a>: The return type of <code>enumToIntC</code> would essentially be dependent on the parameter you pass...but a single function shall not have multiple return type."}, {"owner": {"reputation": 7427, "user_id": 293195, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/seTSX.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/293195/gabriel"}, "reply_to_user": {"reputation": 32126, "user_id": 2666289, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/746dd23bbe20769fbd758421e67f455c?s=128&d=identicon&r=PG", "display_name": "Holt", "link": "https://stackoverflow.com/users/2666289/holt"}, "edited": false, "score": 0, "creation_date": 1577886450, "post_id": 59544519, "comment_id": 105274610, "body": "@Holt But why is e not a compiletime expr. is it not a requirement for evaluating the function that all parameters need to be compile time expressions. This is strange. But with the concern of multiple types and that its not a template it makes sense :)."}], "owner": {"reputation": 7427, "user_id": 293195, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/seTSX.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/293195/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 1, "closed_date": 1577802432, "answer_count": 0, "score": 4, "last_activity_date": 1577797664, "creation_date": 1577797664, "question_id": 59544519, "link": "https://stackoverflow.com/questions/59544519/evaluating-constexpr-inside-template-brackets", "closed_reason": "Duplicate", "title": "evaluating constexpr inside template brackets", "body": "<p>Why is the following injecting a <code>constexpr</code> integral into a template not working</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;type_traits&gt;\n\ntemplate&lt;typename E&gt;\nstatic constexpr auto enumToInt(E e) -&gt; typename std::underlying_type&lt;E&gt;::type\n{\n    return static_cast&lt;typename std::underlying_type&lt;E&gt;::type&gt;(e);\n}\n\n\ntemplate&lt;typename E&gt;\nstatic consteval auto enumToIntC(E e) \n{\n    constexpr auto value = enumToInt(e);\n    return std::integral_constant&lt;typename std::underlying_type&lt;E&gt;::type, value&gt;{};\n}\n\nint main()\n{\n    enum A{ A,B};\n    constexpr auto e = A::A;\n    constexpr auto i = enumToInt(e); // works\n    constexpr auto c = enumToIntC(e); // does not compile...\n}\n</code></pre>\n\n<p>Why is there a limitation of injecting a clearly <code>constexpr</code> <code>value</code> into template <code>non-type</code> parameter not allowed? I don't understand why there is such a limitation? Is that not compiling because <code>consteval</code> is not yet implemented in <code>clang-10</code> and decays to <code>constexpr</code>...?</p>\n\n<p>Because this works:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;int N&gt; struct A {};\nconstexpr int value = 3;\nA&lt;value&gt; b;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 1, "creation_date": 1577797092, "post_id": 59544390, "comment_id": 105257752, "body": "Are you sure this is C++ and not C? You have standard IO header from C included, you can use that instead of <code>iostream</code>"}, {"owner": {"reputation": 7, "user_id": 12624520, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD1BK-niEpQ4Qaou8UeT8j7fXR8sYZUhIbkLFY_=k-s128", "display_name": "Vettri", "link": "https://stackoverflow.com/users/12624520/vettri"}, "reply_to_user": {"reputation": 38927, "user_id": 279313, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/4ab0299c28ce807a9ca21041ed6ef085?s=128&d=identicon&r=PG", "display_name": "Alex F", "link": "https://stackoverflow.com/users/279313/alex-f"}, "edited": false, "score": 0, "creation_date": 1577798368, "post_id": 59544390, "comment_id": 105258148, "body": "@AlexF  why do you say that you have wondered on how windows.h and stdlib.h are workings?"}], "owner": {"reputation": 7, "user_id": 12624520, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD1BK-niEpQ4Qaou8UeT8j7fXR8sYZUhIbkLFY_=k-s128", "display_name": "Vettri", "link": "https://stackoverflow.com/users/12624520/vettri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577797003, "creation_date": 1577796889, "last_edit_date": 1577797003, "question_id": 59544390, "link": "https://stackoverflow.com/questions/59544390/why-include-iostream-is-not-used-in-driver-development", "title": "why #include &lt;iostream&gt; is not used in driver development", "body": "<pre class=\"lang-c prettyprint-override\"><code>#include &lt;DriverSpecs.h&gt;\n_Analysis_mode_(_Analysis_code_type_user_code_)\n\n#define INITGUID\n//#include&lt;iostream&gt;\n#include &lt;windows.h&gt;\n#include &lt;strsafe.h&gt;\n#include &lt;cfgmgr32.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include \"public.h\"\n</code></pre>\n\n<p>When I tried to use <code>&lt;iostream&gt;</code> in a sample driver solution I got an error.\nI'd like to know if is it possible to get input or output while a driver is running.</p>\n"}, {"tags": ["c++", "multidimensional-array", "vector", "segmentation-fault", "dynamic-arrays"], "comments": [{"owner": {"reputation": 346, "user_id": 8703893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJNvU.jpg?s=128&g=1", "display_name": "Ajinkya Taranekar", "link": "https://stackoverflow.com/users/8703893/ajinkya-taranekar"}, "edited": false, "score": 1, "creation_date": 1577796027, "post_id": 59544235, "comment_id": 105257387, "body": "Hello, Did you use GDB to resolve the problem?"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 1, "creation_date": 1577796138, "post_id": 59544235, "comment_id": 105257423, "body": "Get a backtrace, yes. However, the point where the error becomes obvious may be different from the point causing the error. In any case, for a valid question here, you need to extract and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Make sure it doesn&#39;t contain unnecessary code and that no manual interaction is necessary. As a new user, also take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 1263, "user_id": 3938402, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/3db2c7bcda762ef0a3017108b1446094?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/3938402/harry"}, "edited": false, "score": 0, "creation_date": 1577800851, "post_id": 59544235, "comment_id": 105258989, "body": "Can you provide some sample inputs on which case it is causing segmentation fault"}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 3, "last_activity_date": 1577801245, "last_edit_date": 1577801245, "creation_date": 1577797845, "answer_id": 59544544, "question_id": 59544235, "link": "https://stackoverflow.com/questions/59544235/segmentation-fault-with-vector-of-vectors/59544544#59544544", "title": "Segmentation fault with vector of vectors", "body": "<p>Your counting logic is flawed.  This leads to an endless loop.  I guess you see a segmentation fault because you're in an online Hackerrank-like system that interrupts your code:</p>\n\n<p>The problem is here:  </p>\n\n<pre><code>while(i&lt;u.size()&amp;&amp;j&lt;v.size())\n    if(u[i]==v[j])\n        ctr++;     // &lt;======= once there is a match i, and j never get updated\n    else if(u[i]&gt;v[j])\n        j++;\n    else\n        i++;\n</code></pre>\n\n<p>Correction: </p>\n\n<pre><code>while(i&lt;u.size()&amp;&amp;j&lt;v.size())\n    if(u[i]==v[j]) {\n        ctr++;     \n        i++; j++; // &lt;--- skip the matching elements\n    }\n    else if(u[i]&gt;v[j])\n        j++;\n    else\n        i++;\n</code></pre>\n\n<p>The problem disapeared when you removed the <code>push_back()</code> as explained in your comments, because the comparison loop would end immediately.  </p>\n\n<p><strong><em>Not related</em></strong>:  </p>\n\n<ul>\n<li><p>consider avoiding variable length arrays, since these are not standard C++.  So instead of <code>bool isfriend[n];</code> prefer <code>vector&lt;bool&gt; isfriend(n, false);</code> which has the advantage of avoiding you having to write a for-loop just to initialize the values.  </p></li>\n<li><p>avoid naming variables <code>null</code>.  This is confusing.  So delete the statement <code>B null;</code> which is not needed anyway.  </p></li>\n<li><p><a href=\"https://ideone.com/a9d8n8\" rel=\"nofollow noreferrer\">Online demo</a> with your code corrected and these suggestions and a small test sample.  </p></li>\n</ul>\n"}], "owner": {"reputation": 13, "user_id": 8598541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f7c64baa5c71c8014802ae636129dc?s=128&d=identicon&r=PG&f=1", "display_name": "Royston", "link": "https://stackoverflow.com/users/8598541/royston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 59544544, "answer_count": 1, "score": 1, "last_activity_date": 1577801245, "creation_date": 1577795677, "last_edit_date": 1577800343, "question_id": 59544235, "link": "https://stackoverflow.com/questions/59544235/segmentation-fault-with-vector-of-vectors", "title": "Segmentation fault with vector of vectors", "body": "<p>I get segmentation fault when I run the following code. </p>\n\n<blockquote>\n  <p>Given a list of people each with some set of integers, the program has to find the number of friends of the first person where a person is a friend of another person if the number of integers one has in common with the other is greater than a given threshold value K</p>\n</blockquote>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;iostream&gt;\n#include &lt;queue&gt;\n#include &lt;vector&gt;\nusing namespace std;\n\nclass B {\npublic:\n  vector&lt;int&gt; b;\n  B() { b.reserve(301); }\n};\n\nint count(vector&lt;int&gt; u, vector&lt;int&gt; v) // To count the number of integers one\n                                        // vector has with the other\n{\n  sort(u.begin(), u.end());\n  sort(v.begin(), v.end());\n\n  int i = 0, j = 0, ctr = 0;\n\n  while (i &lt; u.size() &amp;&amp; j &lt; v.size())\n    if (u[i] == v[j])\n      ctr++;\n    else if (u[i] &gt; v[j])\n      j++;\n    else\n      i++;\n\n  return ctr;\n}\n\nint main() {\n\n  B null;\n  int n, k, p, temp,\n      ctr = 0; // n is number of people and k is the threshold value\n  cin &gt;&gt; n &gt;&gt; k;\n\n  vector&lt;B&gt; id;\n  id.resize(n);\n\n  bool isfriend[n];\n\n  for (int i = 0; i &lt; n; i++) {\n    cin &gt;&gt; p; // p is the number of integers for the person i\n    for (int j = 0; j &lt; p; j++) {\n      cin &gt;&gt; temp;\n      id[i].b.push_back(\n          temp); // If this line is removed, there is no segmentation fault\n    }\n  }\n\n  for (int i = 0; i &lt; n; i++)\n    isfriend[i] = false;\n\n  isfriend[0] = true;\n\n  queue&lt;int&gt; q;\n  q.push(0);\n\n  while (q.empty() == false) {\n    p = q.front();\n    q.pop();\n\n    for (int i = 0; i &lt; n; i++)\n      if (isfriend[i] == false) {\n        temp = count(id[p].b, id[i].b);\n        if (temp &gt;= k) {\n          ctr++;\n          q.push(i);\n          isfriend[i] = true;\n        }\n      }\n  }\n\n  cout &lt;&lt; ctr; // No. of friends of person 0\n\n  return 0;\n}\n</code></pre>\n\n<p>Can anyone tell me where I have gone wrong?</p>\n"}, {"tags": ["c++", "class"], "answers": [{"comments": [{"owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "reply_to_user": {"reputation": 61, "user_id": 11993857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8515dda3d47574aa4743edd43ca27b?s=128&d=identicon&r=PG&f=1", "display_name": "saltkun", "link": "https://stackoverflow.com/users/11993857/saltkun"}, "edited": false, "score": 0, "creation_date": 1577803646, "post_id": 59544127, "comment_id": 105259878, "body": "E.g. stands for exempli gratia and means &quot;for example&quot;. You have to provide a declaration and one possible way is to declare in main.cpp. Another possible way is to declare in MyVector.h. You can&#39;t declare in MyVector.cpp because you use the function in main.cpp"}], "tags": [], "owner": {"reputation": 14893, "user_id": 4645334, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh6.googleusercontent.com/-hoIJVId9WIY/AAAAAAAAAAI/AAAAAAAAGQw/r7Es0WqE4rs/photo.jpg?sz=128", "display_name": "Thomas Sablik", "link": "https://stackoverflow.com/users/4645334/thomas-sablik"}, "is_accepted": false, "score": 1, "last_activity_date": 1577795106, "creation_date": 1577795106, "answer_id": 59544127, "question_id": 59544047, "link": "https://stackoverflow.com/questions/59544047/why-my-random-function-always-not-undeclared/59544127#59544127", "title": "Why my random function always not undeclared?", "body": "<p>You have to declare the function <code>random</code> somewhere, e.g.</p>\n\n<pre><code>#include \"Myvector.h\"\n#include &lt;iostream&gt;\n#include&lt;cstdlib&gt;\n#include&lt;math.h&gt;\n#include &lt;time.h&gt;\nusing namespace std;\n\nMyVector random(int);\n\nint main(){\n    MyVector z=random(1);\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 61, "user_id": 11993857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8515dda3d47574aa4743edd43ca27b?s=128&d=identicon&r=PG&f=1", "display_name": "saltkun", "link": "https://stackoverflow.com/users/11993857/saltkun"}, "edited": false, "score": 0, "creation_date": 1577796515, "post_id": 59544134, "comment_id": 105257542, "body": "@saltkun This information is correct and if you&#39;re having a problem still then you still haven&#39;t properly declared the function."}], "tags": [], "owner": {"reputation": 1211, "user_id": 3313819, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKM0Y.png?s=128&g=1", "display_name": "ShadowMitia", "link": "https://stackoverflow.com/users/3313819/shadowmitia"}, "is_accepted": false, "score": 0, "last_activity_date": 1577795144, "creation_date": 1577795144, "answer_id": 59544134, "question_id": 59544047, "link": "https://stackoverflow.com/questions/59544047/why-my-random-function-always-not-undeclared/59544134#59544134", "title": "Why my random function always not undeclared?", "body": "<p>The problem is <code>random</code> in your <code>main</code> function. That one is not declared.\nDeclaring a <code>friend</code> function means that function has access to the class as if it were a method. It doesn't declare the function at any time, just allows it inside the class.</p>\n"}, {"comments": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 61, "user_id": 11993857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8515dda3d47574aa4743edd43ca27b?s=128&d=identicon&r=PG&f=1", "display_name": "saltkun", "link": "https://stackoverflow.com/users/11993857/saltkun"}, "edited": false, "score": 0, "creation_date": 1577796101, "post_id": 59544160, "comment_id": 105257411, "body": "@saltkun There are many issues with the code you posted that all need to be addressed in addition to fixing the undefined symbol. I didn&#39;t try to fix it for correctness but the above definitely solves the problem, see <a href=\"https://www.onlinegdb.com/\" rel=\"nofollow noreferrer\">example</a>."}, {"owner": {"reputation": 61, "user_id": 11993857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8515dda3d47574aa4743edd43ca27b?s=128&d=identicon&r=PG&f=1", "display_name": "saltkun", "link": "https://stackoverflow.com/users/11993857/saltkun"}, "edited": false, "score": 0, "creation_date": 1577796156, "post_id": 59544160, "comment_id": 105257433, "body": "In fact,my code is only have one parameter. it&#39;s old version with two ...I&#39;m sorry.But computer show me the picture above."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 61, "user_id": 11993857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8515dda3d47574aa4743edd43ca27b?s=128&d=identicon&r=PG&f=1", "display_name": "saltkun", "link": "https://stackoverflow.com/users/11993857/saltkun"}, "edited": false, "score": 1, "creation_date": 1577796407, "post_id": 59544160, "comment_id": 105257509, "body": "@saltkun Your updated example has a <code>friend</code> with 1 argument but that <b>is not</b> a function declaration for the <code>random</code> function. See the working example in the link of my comment above."}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 61, "user_id": 11993857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8515dda3d47574aa4743edd43ca27b?s=128&d=identicon&r=PG&f=1", "display_name": "saltkun", "link": "https://stackoverflow.com/users/11993857/saltkun"}, "edited": false, "score": 0, "creation_date": 1577796595, "post_id": 59544160, "comment_id": 105257570, "body": "@saltkun Here is the correct link to the <a href=\"https://onlinegdb.com/BJdTQ6OkU\" rel=\"nofollow noreferrer\">working example</a>"}, {"owner": {"reputation": 61, "user_id": 11993857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8515dda3d47574aa4743edd43ca27b?s=128&d=identicon&r=PG&f=1", "display_name": "saltkun", "link": "https://stackoverflow.com/users/11993857/saltkun"}, "edited": false, "score": 0, "creation_date": 1577796854, "post_id": 59544160, "comment_id": 105257668, "body": "I know.Thank you for help"}], "tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 1, "last_activity_date": 1577795266, "creation_date": 1577795266, "answer_id": 59544160, "question_id": 59544047, "link": "https://stackoverflow.com/questions/59544047/why-my-random-function-always-not-undeclared/59544160#59544160", "title": "Why my random function always not undeclared?", "body": "<p>In the <code>main</code> function of the <code>main.cpp</code> file the following function is called:</p>\n\n<pre><code>MyVector z=random(1);\n</code></pre>\n\n<p>This appears to be a function which takes a single <code>int</code> argument. Additionally, there is such a function defined in the <code>Myvector.cpp</code> but not declared in <code>Myvector.h</code> (i.e., the <code>main.cpp</code> file does not see any function declaration for the definition).</p>\n\n<p>Update the <code>Myvector.h</code> header to declare the <code>MyVector random(int a)</code> function. Also, the <code>friend</code> declaration is for a <code>random</code> function with 2 parameters, which doesn't look right.</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 5568042, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PNaB0Adj6tk/AAAAAAAAAAI/AAAAAAAADwo/k9o6Hf190Z4/photo.jpg?sz=128", "display_name": "Jordan Motta", "link": "https://stackoverflow.com/users/5568042/jordan-motta"}, "is_accepted": false, "score": 0, "last_activity_date": 1577803598, "creation_date": 1577803598, "answer_id": 59545522, "question_id": 59544047, "link": "https://stackoverflow.com/questions/59544047/why-my-random-function-always-not-undeclared/59545522#59545522", "title": "Why my random function always not undeclared?", "body": "<p>Your <code>random</code> function is defined is some header file you have included. In your error message you see the return type of <code>random</code> is <code>long int</code>. And you have declared it as <code>MyVector</code>. I am not sure if math.h or time.h have it.</p>\n\n<p>Solution 1: Change the name of your function.\nSolution 2: Put your function in a namespace in order to avoid name ambiguity.</p>\n"}], "owner": {"reputation": 61, "user_id": 11993857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8515dda3d47574aa4743edd43ca27b?s=128&d=identicon&r=PG&f=1", "display_name": "saltkun", "link": "https://stackoverflow.com/users/11993857/saltkun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 59544160, "answer_count": 4, "score": -2, "last_activity_date": 1577803598, "creation_date": 1577794652, "last_edit_date": 1577796199, "question_id": 59544047, "link": "https://stackoverflow.com/questions/59544047/why-my-random-function-always-not-undeclared", "title": "Why my random function always not undeclared?", "body": "<p>I'm writing my code on linux . But g++ always tells me\"Use of undeclared identifier 'random'\".I don't know why I have declare it in \"Myvector.h\"</p>\n\n<p>my code is like :</p>\n\n<p>Myvector.h</p>\n\n<pre><code>\nclass MyVector {\nprivate:\n  std::vector&lt;double&gt; data;\n  const int N;\n  static bool _bDim;\npublic:\n  MyVector();      //\u9ed8\u8ba4\u521d\u59cb\u5316\n  MyVector(int a); //\u8bbe\u7f6e\u7ef4\u5ea6\u521d\u59cb\u5316\n  MyVector(std::initializer_list&lt;double&gt; list);\n  ~MyVector();\n  double &amp;operator[](int);\n  MyVector &amp;operator=(const MyVector a) {\n    MyVector b(outN(a));\n    this-&gt;data = a.data;\n    return *this;\n  }; \n friend MyVector random(int a);\n}\n#endif // MYVECTOR_H_\n\n</code></pre>\n\n<p>Myvector.cpp</p>\n\n<pre><code>#include \"Myvector.h\"\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\n#include &lt;math.h&gt;\n#include &lt;time.h&gt;\n\n\nusing namespace std;\n\nbool MyVector::_bDim = true;\n\nMyVector::MyVector() : N(3) {\n  data = vector&lt;double&gt;(N, 0.0);\n  _bDim = false;\n};\n\nMyVector::MyVector(int a) : N(a) {\n  data = vector&lt;double&gt;(N, 0.0);\n  _bDim = false;\n};\n\nMyVector::MyVector(std::initializer_list&lt;double&gt; list) : N(list.size()) {\n  for (auto i = list.begin(); i != list.end(); i++) {\n    data.push_back(*i);\n  }\n};\nMyVector::~MyVector(){\n\n};\n\ndouble &amp;MyVector::operator[](int i) { return data[i]; }\nMyVector random(int a){\n  MyVector u(a);\n  srand(time(NULL));\n  for(int i=0;i&lt;a;i++){\n    u[i]=rand();\n  }\n  return u;\n}\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"Myvector.h\"\n#include &lt;iostream&gt;\n#include&lt;cstdlib&gt;\n#include&lt;math.h&gt;\n#include &lt;time.h&gt;\nusing namespace std;\nint main(){\nMyVector z=random(1);\nreturn 0;}\n</code></pre>\n\n<p>In fact ,I just know nothing about it. Is there someone going to help me?Thank you.\n<a href=\"https://i.stack.imgur.com/09Kfl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/09Kfl.png\" alt=\"enter image description here\"></a>\nBelow is nothing meaningful. I just need more words to ask this problem.</p>\n"}, {"tags": ["c++", "performance", "c++11", "vector"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1577794246, "post_id": 59543934, "comment_id": 105256762, "body": "Perhaps temporary storage in a vector isn&#39;t the right choice here? Perhaps read line by line (like you do now) but then check each line as you read it. Then you also don&#39;t have to iterate over (possibly) all the lines in the file twice like you do now."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 2, "creation_date": 1577794330, "post_id": 59543934, "comment_id": 105256793, "body": "Are you sure that it is <code>push_back</code> that takes that time and not <code>getline</code>?"}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1577794426, "post_id": 59543934, "comment_id": 105256822, "body": "yes push_back and std::find takes more time in the above code."}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 1, "creation_date": 1577794647, "post_id": 59543934, "comment_id": 105256900, "body": "And preallocate, and use <code>for (const auto&amp; elem</code> instead of making a copy of each line. Btw there&#39;s no need to explicitly call <code>close()</code>. And <code>needle</code> isn&#39;t really needed, and <code>basic_result</code> isn&#39;t defined, etc"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1577797281, "post_id": 59543934, "comment_id": 105257805, "body": "Just did a small benchmark, reading a file with two million randomly generated lines (a little less than double your file, file-size is about 613MiB), and using plain <code>std::getline</code> and <code>push_back</code> in a loop (exactly like yours) it took only around 1300 milliseconds (on an old spinning-platter disk). So I kind of doubt your numbers. How do you measure? Are you measuring the whole <code>LoadFileToVector</code> function?"}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1577807663, "post_id": 59543934, "comment_id": 105261221, "body": "Sorry My bad I didn&#39;t mention this point. Yes i am measuring whole loadFileToVector method."}], "answers": [{"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1577797507, "post_id": 59544422, "comment_id": 105257881, "body": "Avoid non portable <code>#include &lt;bits&#47;stdc++.h&gt;</code>. and avoid <code>using namespace std;</code>."}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1577800255, "post_id": 59544422, "comment_id": 105258800, "body": "Hm, I wondering why you are talking about insert. Maybe there is a misunderstanding. The OP is alread using push_back. And the simple solution is just to use reserve. Maybe you have a misunderstanding. Or maybe me, who knows . . ."}], "tags": [], "owner": {"reputation": 26, "user_id": 12048148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5b2_rxIfBBg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUr4OcKV0hdTRAm_Tc1HyOAvY7lw/photo.jpg?sz=128", "display_name": "Mohan Kittu", "link": "https://stackoverflow.com/users/12048148/mohan-kittu"}, "is_accepted": false, "score": 1, "last_activity_date": 1577797416, "last_edit_date": 1577797416, "creation_date": 1577797102, "answer_id": 59544422, "question_id": 59543934, "link": "https://stackoverflow.com/questions/59543934/how-to-improve-vector-insert-time/59544422#59544422", "title": "How to improve vector insert time", "body": "<p>The vector is extended by inserting new elements before the element at the specified position, effectively increasing the container size by the number of elements inserted.</p>\n\n<p>This causes an automatic reallocation of the allocated storage space if -and only if- the new vector size surpasses the current vector capacity.</p>\n\n<p>Because vectors use an array as their underlying storage, inserting elements in positions other than the vector end causes the container to relocate all the elements that were after position to their new positions. This is generally an inefficient operation compared to the one performed for the same operation by other kinds of sequence containers (such as list or forward_list).</p>\n\n<p>The parameters determine how many elements are inserted and to which values they are initialized:</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt; \n\nusing namespace std; \n\nint main() \n{ \n\n    // initialising the vector \n\n    vector&lt;int&gt; vec = { 10, 20, 30, 40 }; \n\n\n\n    // inserts 3 at front   \n\n    auto it = vec.insert(vec.begin(), 3); \n\n    // inserts 2 at front  \n\n    vec.insert(it, 2); \n\n    cout &lt;&lt; \"The vector elements are: \";  \n\n    for (auto it = vec.begin(); it != vec.end(); ++it) \n        cout &lt;&lt; *it &lt;&lt; \" \"; \n    return 0; \n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1577800951, "post_id": 59544428, "comment_id": 105259007, "body": "Regarding your 1.  The OP wanted to have &quot;Load all the file logs to std::vector&quot; of strings. Your 2.   Searching is one statement. So, I am not sure if a separate function or whatever would make more sense. And performance wise the separation is a downgrade. You need then to iterate again and again over all already read data. 3. I would not recommend to use threads for that.   But all this is just my humble opinion. No need to follow my advise at all. There are 1000 possibilities . . ."}, {"owner": {"reputation": 103, "user_id": 8021662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95a35936b757e536e364fd1e18ac5c48?s=128&d=identicon&r=PG&f=1", "display_name": "n0lavar", "link": "https://stackoverflow.com/users/8021662/n0lavar"}, "reply_to_user": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1577801615, "post_id": 59544428, "comment_id": 105259203, "body": "@ArminMontigny nope, OP wanted to &quot;search for some text&quot;, and &quot;Load all the file logs to std::vector&quot; is implementation detail, which decrease performance.  threads would work just fine if data is huge, why don&#39;t you like this idea?"}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 1, "creation_date": 1577802212, "post_id": 59544428, "comment_id": 105259378, "body": "Op stated: &quot;I have CSV file. Which contain the 1086098 lines of logs. I have written c++ code. where i search for some text and based on founding i report the issues to the respective owner.&quot;. I can imagine, that he wants to do something with the lines after finding a tag in it, i.e use sregex_token_iterator for splitting up the line. And I compared solutions. As said, I run my programm in &lt;800ms. That&#39;s not too bad. And most important, this is just my very humble opinion and there are millions of possible different solutions. So, yours is as good as mine or better. Whatever. No need to argue."}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1577802295, "post_id": 59544428, "comment_id": 105259400, "body": "And to show what IMHO mean, I will upvote youre answer +1. Then you are the top hit here."}], "tags": [], "owner": {"reputation": 103, "user_id": 8021662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95a35936b757e536e364fd1e18ac5c48?s=128&d=identicon&r=PG&f=1", "display_name": "n0lavar", "link": "https://stackoverflow.com/users/8021662/n0lavar"}, "is_accepted": false, "score": 3, "last_activity_date": 1577797679, "last_edit_date": 1577797679, "creation_date": 1577797133, "answer_id": 59544428, "question_id": 59543934, "link": "https://stackoverflow.com/questions/59543934/how-to-improve-vector-insert-time/59544428#59544428", "title": "How to improve vector insert time", "body": "<p>I would recommend you:  </p>\n\n<ol>\n<li>Load all data into the string and use it for search. If you are using push_back with vector and strings, every time vector allocates memory if there is not enough and string allocates memory always. Each allocate is \"new\" call which is system call and requires switching to kernel mode (a lot of time lost, especially if the log is big)   </li>\n<li>Separate download and search processes just for good codestyle  </li>\n</ol>\n\n<p>As your question is about reading file performance, I didn't improve the search process. But if it will be not good enough for you, you can use threads. It is safe as long as you do not change the logs string. </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;array&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\n/*\n    logs.txt\n\n    error\n    error1\n    no error\n    you are breathtaking\n    error 3\n*/\n\nstd::array&lt;std::string, 3&gt;  start_check = { \"error1\", \"error2\", \"error3\" };\nstd::array&lt;bool, 3&gt;         basic_result;\n\nstd::string LoadLogs(const std::string&amp; sFileName)\n{\n    std::ifstream fin(sFileName.c_str());\n    fin &gt;&gt; std::noskipws;\n\n    std::string sRet = \"\";\n\n    if (!fin.is_open())\n        std::cout &lt;&lt; \"Cannot open file to update map\" &lt;&lt; std::endl;\n    else\n        sRet = std::string(std::istream_iterator&lt;char&gt;(fin), std::istream_iterator&lt;char&gt;());\n\n    if (sRet.empty())\n        std::cout &lt;&lt; \"Input file \" &lt;&lt; sFileName &lt;&lt; \" is Empty\" &lt;&lt; std::endl;\n\n    return sRet;\n}\n\nint main()\n{\n    std::string sLogs = LoadLogs(\"logs.txt\");\n\n    if (!sLogs.empty())\n        for (int i = 0; i &lt; start_check.size(); i++)\n            basic_result[i] = sLogs.find(start_check[i]) != std::string::npos;\n\n    /*\n        basic_result\n\n        true\n        false\n        false\n    */\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1577949771, "post_id": 59544853, "comment_id": 105287277, "body": "I want to test the time. But your code has  compile time error."}, {"owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "reply_to_user": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1577950009, "post_id": 59544853, "comment_id": 105287355, "body": "I am using VS2019 with C++17 enabled. Language is C++2017. The program compiles and rund without any error on my machine. What are you using or what error do you see?"}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1577950059, "post_id": 59544853, "comment_id": 105287372, "body": "i am on linux g++11"}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1577950625, "post_id": 59544853, "comment_id": 105287548, "body": "Ya i used c++17 :   load.cc: In function \u2018void writeTestFile()\u2019: load.cc:19:23: error: expected primary-expression before \u2018ofs\u2019      if (std::ofstream ofs(fileName); ofs) {                        ^ load.cc:19:23: error: expected \u2018)\u2019 before \u2018ofs\u2019 load.cc:19:38: error: \u2018ofs\u2019 was not declared in this scope      if (std::ofstream ofs(fileName); ofs) { load.cc: In function \u2018bool LoadFileToVector(const string&amp;, const std::vector&lt;std::__cxx11::basic_string&lt;char&gt; &gt;&amp;, std::vector&lt;std::__cxx11::basic_string&lt;char&gt; &gt;&amp;, std::map&lt;std::__cxx11::basic_string&lt;char&gt;, bool&gt;&amp;)\u2019:"}, {"owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "edited": false, "score": 0, "creation_date": 1577950635, "post_id": 59544853, "comment_id": 105287549, "body": "load.cc:32:23: error: expected primary-expression before \u2018ifs\u2019      if (std::ifstream ifs(fName); ifs) {                        ^ load.cc:32:23: error: expected \u2018)\u2019 before \u2018ifs\u2019 load.cc:32:35: error: \u2018ifs\u2019 was not declared in this scope      if (std::ifstream ifs(fName); ifs) {"}], "tags": [], "owner": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "is_accepted": false, "score": 3, "last_activity_date": 1577801236, "last_edit_date": 1577801236, "creation_date": 1577799635, "answer_id": 59544853, "question_id": 59543934, "link": "https://stackoverflow.com/questions/59543934/how-to-improve-vector-insert-time/59544853#59544853", "title": "How to improve vector insert time", "body": "<p>I made a short evaluation for you.</p>\n\n<p>I have written a test program, that first creates a test file. I put the search strings (integer counters) at the end of the line, so that the find function is maximum slow.</p>\n\n<p>Then I did several improvement methods:</p>\n\n<ol>\n<li>I switch on all compiler optimizations</li>\n<li>For the vector, i use <code>reserve</code> to avoid reallocations</li>\n<li>Reading from the stream is drastically improved by setting a bigger input buffer</li>\n<li>I changed the search algorithm to avoid double iteration </li>\n</ol>\n\n<p>With all this I read all lines and search for the search strings in 800ms, so below 1s.</p>\n\n<p>Please see and check, if you can implement one of my ideas for your solution</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iterator&gt;\n#include &lt;regex&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;chrono&gt;\n#include &lt;map&gt;\n#include &lt;algorithm&gt;\n\nconstexpr size_t NumberOfExpectedLines = 1'086'098;\nconstexpr size_t SizeOfIOStreamBuffer = 1'000'000;\nstatic char ioBuffer[SizeOfIOStreamBuffer];\n\nconst std::string fileName{ \"r:\\\\log.txt\" };\n\nvoid writeTestFile() {\n    if (std::ofstream ofs(fileName); ofs) {\n        for (size_t i = 0; i &lt; NumberOfExpectedLines; ++i)\n            ofs &lt;&lt; \"text,text,text,text,text,text,\" &lt;&lt; i &lt;&lt; \"\\n\";\n\n    }\n}\n\nbool LoadFileToVector(\n    const std::string&amp; fName, \n    const std::vector&lt;std::string&gt;&amp; searchStrings, \n    std::vector&lt;std::string&gt;&amp; completeLog,\n    std::map&lt;std::string,bool&gt;&amp; basicResult) {\n\n    if (std::ifstream ifs(fName); ifs) {\n\n        // Speed up things\n        completeLog.reserve(NumberOfExpectedLines);\n        ifs.rdbuf()-&gt;pubsetbuf(ioBuffer, SizeOfIOStreamBuffer);\n\n        // Read all files and search. Terminate, if we found all search strings\n        for (std::string line{}; std::getline(ifs, line); ) {\n\n            // Search for at least one occurence of a search string in the line\n            if (auto search = std::find_if(searchStrings.begin(), searchStrings.end(),\n                [&amp;line](const std::string&amp; s) {return line.find(s) != std::string::npos; });\n                search != searchStrings.end()) {\n\n                // If found, save result\n                basicResult[*search] = true;\n            }\n            // Store read line\n            completeLog.push_back(std::move(line));\n        }\n    }\n    return  basicResult.size() &gt; 0;\n}\n\nint main() {\n\n    // writeTestFile();\n\n    std::vector&lt;std::string&gt; searchStrings{\"100000\",\"500000\",\"800000\"};\n    std::vector&lt;std::string&gt; completeLog{};\n    std::map&lt;std::string, bool&gt; basicResult{};\n\n    // TIme measurement start\n    auto start = std::chrono::system_clock::now();\n\n    LoadFileToVector(fileName, searchStrings, completeLog, basicResult);\n\n    // Time measurement evaluation\n    auto end = std::chrono::system_clock::now();\n    auto elapsed = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(end - start);\n    // How long did it take?\n    std::cout &lt;&lt; \"Elapsed time:       \" &lt;&lt; elapsed.count() &lt;&lt; \" ms\\n\";\n\n    return 0;\n}\n</code></pre>\n\n<p>Maybe it will help you during refactoring </p>\n"}, {"tags": [], "owner": {"reputation": 1224, "user_id": 1572626, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6dc99607cfc06eed4636695a0d16531e?s=128&d=identicon&r=PG", "display_name": "wrhall", "link": "https://stackoverflow.com/users/1572626/wrhall"}, "is_accepted": false, "score": 0, "last_activity_date": 1577828891, "creation_date": 1577828891, "answer_id": 59548668, "question_id": 59543934, "link": "https://stackoverflow.com/questions/59543934/how-to-improve-vector-insert-time/59548668#59548668", "title": "How to improve vector insert time", "body": "<p>If you want to keep the same format you have and you always know the number of lines for the vector, you can use <code>.reserve()</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>std::vector&lt;std::string&gt; complete_log;\n\nbool LoadFileToVector(const std::string&amp; str) {\n  std::string needle = str;\n  std::ifstream fin(needle.c_str());\n  std::string line;\n  bool found = false;\n\n  if (fin.is_open()) {\n    if (!is_empty(fin)) {\n      fin.exceptions(std::ifstream::badbit);\n\n      complete_log.reserve(1086098);\n      try {\n        while (getline(fin, line)) {\n          complete_log.push_back(line);\n\n        }\n\n        for (const auto&amp; text : start_check) {\n\n          found = false;\n          for (auto elem : complete_log) {\n            if (elem.find(text) != std::string::npos) {\n              basic_result[text] = true;\n              found = true;\n            }\n          }\n          if (!found)\n            basic_result[text] = false;\n        }\n\n      } catch (std::ifstream::failure&amp; FileExcep) {\n        std::cout &lt;&lt; \"Caught an exception = \" &lt;&lt; FileExcep.what() &lt;&lt; std::endl;\n        fin.close();\n        return false;\n      } catch (...) {\n        std::cout &lt;&lt; \"Unkown Exception/n\";\n      }\n    } else {\n      std::cout &lt;&lt; \"Input file \"&lt;&lt;needle&lt;&lt;\" is Empty\" &lt;&lt; std::endl;\n      fin.close();\n      return false;\n    }\n\n    fin.close();\n    return true;\n  } else {\n    std::cout &lt;&lt; \"Cannot open file to update map\" &lt;&lt; std::endl;\n    return false;\n  }\n  return true;\n}\n</code></pre>\n\n<p>Note the addition of <code>complete_log.reserve(1086098);</code></p>\n\n<p>However, other suggestions correctly point out that you could avoid storing all of the lines by simply processing each line as you have it and <em>not</em> store it.</p>\n\n<p>This might involve inverting your bottom two loops. This might not be correct (I'm not compiling it), but it would look something like this:</p>\n\n<pre><code>std::vector&lt;std::string&gt; complete_log;\n\nbool LoadFileToVector(const std::string&amp; str) {\n  std::string needle = str;\n  std::ifstream fin(needle.c_str());\n  std::string line;\n  bool found = false;\n\n  if (fin.is_open()) {\n    if (!is_empty(fin)) {\n      fin.exceptions(std::ifstream::badbit);\n\n      for (const auto&amp; text : start_check) {\n        basic_result[text] = false;\n      }\n      try {\n        while (getline(fin, line)) {\n\n          for (const auto&amp; text : start_check) {    \n            if (line.find(text) != std::string::npos) {\n              basic_result[text] = true;\n            }\n          }\n        }\n\n\n      } catch (std::ifstream::failure&amp; FileExcep) {\n        std::cout &lt;&lt; \"Caught an exception = \" &lt;&lt; FileExcep.what() &lt;&lt; std::endl;\n        fin.close();\n        return false;\n      } catch (...) {\n        std::cout &lt;&lt; \"Unkown Exception/n\";\n      }\n    } else {\n      std::cout &lt;&lt; \"Input file \"&lt;&lt;needle&lt;&lt;\" is Empty\" &lt;&lt; std::endl;\n      fin.close();\n      return false;\n    }\n\n    fin.close();\n    return true;\n  } else {\n    std::cout &lt;&lt; \"Cannot open file to update map\" &lt;&lt; std::endl;\n    return false;\n  }\n  return true;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36, "user_id": 9134654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a859ec4643e5714132faee573ca8742?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent La", "link": "https://stackoverflow.com/users/9134654/vincent-la"}, "is_accepted": false, "score": 1, "last_activity_date": 1578016528, "creation_date": 1578016528, "answer_id": 59572317, "question_id": 59543934, "link": "https://stackoverflow.com/questions/59543934/how-to-improve-vector-insert-time/59572317#59572317", "title": "How to improve vector insert time", "body": "<p>Shameless self plug: I'm the maintainer of a C++11 compatible CSV parser <a href=\"https://github.com/vincentlaucsb/csv-parser\" rel=\"nofollow noreferrer\">which you can find here</a>. It uses separate threads to read from disk and parse, and optimizations which reduce the amount of memory allocations.</p>\n\n<h2>If you don't want to use my parser</h2>\n\n<p>It appears that you don't actually use the delimiters in the CSV for anything, so you probably won't benefit from my parser. But from my lessons learned there are two avenues I can see you using.</p>\n\n<h2>Solution 1: Avoid storing the entire file</h2>\n\n<p>As others have mentioned, it appears that you're doing line-by-line processing which doesn't require storing the entire file in memory. If so, I would just <code>getline()</code> into a string (like you do at the top of your loop), process it, and then repeat without <code>push_back()</code>-ing anything.</p>\n\n<h3>Why not?</h3>\n\n<p><code>std::vector</code> is a fancy wrapper around an array which does useful things like expand when the capacity of the array is outgrown. The price of this convenience is that the contents of the old array have to be copied, and <code>malloc()</code> has to be called to create a bigger array. The bigger the array, the bigger the <code>malloc()</code> request.</p>\n\n<p>std::string is a fancy wrapper around C-style character arrays and works similarly to std::vector. As you can see, creating <code>std::vector&lt;std::string&gt;</code>s is just memory allocations on top of memory allocations which is problematic because malloc() isn't optimized for a bunch of small allocations.</p>\n\n<h2>Solution 2: Use a giant <code>std::string</code></h2>\n\n<p>If for some reason you have to store the entire log as well as process each line individually, I would concatenate everything into a giant <code>std::string</code> and use a separate array to store the index of where each new line began. This way, you can create <code>std::string_view</code>s over each individual row. I would call <code>std::string::reserve()</code> to prevent any unnecessary re-allocations down the time.</p>\n\n<p>In my experience this method is a lot faster than using an <code>std::vector</code> with lots of <code>std::string</code>s.</p>\n\n<h2>Solution 2+: Threads</h2>\n\n<p>Your problem can be rearranged to fall under the producer/consumer pattern where one thread pushes a string into a buffer where another thread performs searching on it. I would personally only use multiple threads if other suggestions don't work since reducing dynamic memory allocations can have a <strong>huge</strong> performance impact.</p>\n\n<h2>Other Notes</h2>\n\n<ul>\n<li>Since it appears you only care if a certain search term appears <strong>once</strong> in the text, I would remove that term from the search list once it's been found. For example, if you find 10/15 search terms in the first 100 lines of text and you have 1,000,000 lines worth of log, then that's roughly 10 * 1,000,000 = 10,000,000 <code>find()</code> operations you won't have to perform.</li>\n<li>Avoid using global variables in C++. There's only a handful of valid use cases for them and this isn't one of them.</li>\n</ul>\n"}], "owner": {"reputation": 339, "user_id": 8251821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c14cf702673963a9b2e83ae0313942c2?s=128&d=identicon&r=PG&f=1", "display_name": "rim", "link": "https://stackoverflow.com/users/8251821/rim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1578016528, "creation_date": 1577793971, "last_edit_date": 1577807989, "question_id": 59543934, "link": "https://stackoverflow.com/questions/59543934/how-to-improve-vector-insert-time", "title": "How to improve vector insert time", "body": "<p>I have <strong>CSV</strong> file. Which contain the <strong>1086098</strong> lines of logs. I have written c++ code. where i search for some text and based on founding i report the issues to the respective owner.</p>\n\n<p>Implementation Details</p>\n\n<ol>\n<li><p>Load all the file logs to std::vector.</p></li>\n<li><p>Search in the vector at run time.</p></li>\n</ol>\n\n<p>Problem : <strong>push_back</strong> in the std::vector takes <strong>1683087</strong> ms time. How can i improve on this time.\n          Any other suggestion is welcome.</p>\n\n<pre><code>std::vector&lt;std::string&gt; complete_log;\n\nbool LoadFileToVector(const std::string&amp; str) {\n  std::string needle = str;\n  std::ifstream fin(needle.c_str());\n  std::string line;\n  bool found = false;\n\n  if (fin.is_open()) {\n    if (!is_empty(fin)) {\n      fin.exceptions(std::ifstream::badbit);\n\n      try {\n        while (getline(fin, line)) {\n          complete_log.push_back(line);\n\n        }\n\n        for (const auto&amp; text : start_check) {\n\n          found = false;\n          for (auto elem : complete_log) {\n            if (elem.find(text) != std::string::npos) {\n              basic_result[text] = true;\n              found = true;\n            }\n          }\n          if (!found)\n            basic_result[text] = false;\n        }\n\n      } catch (std::ifstream::failure&amp; FileExcep) {\n        std::cout &lt;&lt; \"Caught an exception = \" &lt;&lt; FileExcep.what() &lt;&lt; std::endl;\n        fin.close();\n        return false;\n      } catch (...) {\n        std::cout &lt;&lt; \"Unkown Exception/n\";\n      }\n    } else {\n      std::cout &lt;&lt; \"Input file \"&lt;&lt;needle&lt;&lt;\" is Empty\" &lt;&lt; std::endl;\n      fin.close();\n      return false;\n    }\n\n    fin.close();\n    return true;\n  } else {\n    std::cout &lt;&lt; \"Cannot open file to update map\" &lt;&lt; std::endl;\n    return false;\n  }\n  return true;\n}\n</code></pre>\n\n<p>Edited : My bad i din't mentioned. I am measuring whole function LoadFileToVector().</p>\n"}, {"tags": ["c++", "uwp", "com", "windows-runtime", "c++-winrt"], "answers": [{"tags": [], "owner": {"reputation": 3163, "user_id": 34369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08127c138596c3d6e9a7414702fd7230?s=128&d=identicon&r=PG", "display_name": "Baget", "link": "https://stackoverflow.com/users/34369/baget"}, "is_accepted": true, "score": 2, "last_activity_date": 1577968778, "last_edit_date": 1577968778, "creation_date": 1577797207, "answer_id": 59544440, "question_id": 59543906, "link": "https://stackoverflow.com/questions/59543906/accessing-com-object-from-winrt-c-component/59544440#59544440", "title": "Accessing COM Object from WinRT C++ Component", "body": "<p>Using midl.exe (included in Visual Studio) I was able to to generate a .H file that contains all of the definition and compile fine in WinRT component.</p>\n\n<pre><code>midle.exe myinterface.idl\n</code></pre>\n\n<p>this Generate header file that can be included in the WinRT Project.</p>\n"}], "owner": {"reputation": 3163, "user_id": 34369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/08127c138596c3d6e9a7414702fd7230?s=128&d=identicon&r=PG", "display_name": "Baget", "link": "https://stackoverflow.com/users/34369/baget"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 59544440, "answer_count": 1, "score": 1, "last_activity_date": 1577968778, "creation_date": 1577793844, "question_id": 59543906, "link": "https://stackoverflow.com/questions/59543906/accessing-com-object-from-winrt-c-component", "title": "Accessing COM Object from WinRT C++ Component", "body": "<p>I would like to write a WinRT (C++) component that access my COM Object.\nin order to do that I need the COM Object Interface definitions, so I'm using <code>#import</code> with     <code>raw_interfaces_only</code></p>\n\n<p>e.g.</p>\n\n<pre><code>#import \"libid:ee10004c-2d77-4289-bb93-d6def17881dd\" raw_interfaces_only\n</code></pre>\n\n<p>the problem is that I'm getting the following error on the autogenerate .tlh file:</p>\n\n<pre><code>fatal error C1075: '{': no matching token found\n</code></pre>\n\n<p>The same code works fine in regular windows console application.</p>\n\n<p>According to this <a href=\"https://docs.microsoft.com/en-us/windows/uwp/cpp-and-winrt-apis/consume-com\" rel=\"nofollow noreferrer\">link</a> COM Consuming is supported by WinRT, so it is not clear how can I import my Interface to WinRT C++ Project. </p>\n\n<p><strong>How do I import my COM Interfaces definition to my WinRT C++ Project?</strong></p>\n"}, {"tags": ["c++", "string", "esp8266", "nodemcu"], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": true, "score": 2, "last_activity_date": 1577793887, "creation_date": 1577793887, "answer_id": 59543918, "question_id": 59543857, "link": "https://stackoverflow.com/questions/59543857/esp8266-nodemcu-method-returning-an-request-string/59543918#59543918", "title": "Esp8266 &amp; Nodemcu: Method returning an request string", "body": "<p><code>urlout</code> is a <em>local</em> variable, and as such its life-time ends when it goes out of scope (when your function returns), leaving you with an invalid pointer.</p>\n\n<p>I recommend that you pass the array as an argument to the function instead:</p>\n\n<pre><code>const char* build_request(char *urlout){ ... }\n</code></pre>\n\n<p>Optionally, and if your target and compiler support it, use C++ <code>std::string</code> instead.</p>\n"}], "owner": {"reputation": 91, "user_id": 6034768, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/971957272840537/picture?type=large", "display_name": "JMAD2016", "link": "https://stackoverflow.com/users/6034768/jmad2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 59543918, "answer_count": 1, "score": 0, "last_activity_date": 1577793887, "creation_date": 1577793509, "question_id": 59543857, "link": "https://stackoverflow.com/questions/59543857/esp8266-nodemcu-method-returning-an-request-string", "title": "Esp8266 &amp; Nodemcu: Method returning an request string", "body": "<p>For the love of god, I am not able to build a simple Method which iterates through every scanned network and concatenates a String out of the BSSID and its Strength. Im feeling like super dump.</p>\n\n<p>I need this pattern:</p>\n\n<pre><code>http://IP:PORT/localize?mac1=x.x.x.x&amp;strength1=-30&amp;mac2=x.x.x.x&amp;strength2=-40...\n</code></pre>\n\n<p>This is what I got so far:</p>\n\n<pre><code>const char* build_request(){\n  int n = WiFi.scanNetworks();\n\n  char urlout[512];\n  strcpy(urlout, host);\n\n  for (int i = 0; i &lt; n; ++i){\n    char buffer[8];\n    strcat(urlout, \"&amp;mac\");\n    sprintf(buffer, \"%d\", i);\n    strcat(urlout, buffer);\n    strcat(urlout, \"=\");\n    strcat(urlout, WiFi.BSSIDstr(i).c_str());\n    strcat(urlout, \"&amp;strength\");\n    strcat(urlout, buffer);\n    strcat(urlout, \"=\");\n    //strcat(urlout, WiFi.RSSI(i)); \n  }\n\n  return urlout;\n</code></pre>\n\n<p>Apart of the fact the output contains sometimes weird signs like this:</p>\n\n<pre><code>http://IP:5000/localize&amp;mac0=44:4E:6D:53:88:C1&amp;strength0=&amp;mac1=90:5C:44:C5:C6:B7&amp;strength1=&amp;mac2=38:10:D5:B2:64:10&amp;strength2=&amp;mac3=34:2C:C4:B7:72:D6&amp;strength3=&amp;mac4=00:15:0C:E1:CB:\u2400\u2400\u2400\u2400\u2400\u2400\u2400\u2400\u241f\u2400\u2400\u2400=K\u2410@\u240c\u2405\u2400@4:34:6B:EF:7\ufffd^ @0\u2400\u2400\u2400\u2418\u2400\u2400\u2400\ufffd\ufffd\ufffd\ufffd\u240c_ @\u241c\u2400\u2400`\u241c\u2400\u2400`U\u2401\u2400\u2400\ufffd8 @\u2400\u2400\ufffd\u2400\u2400\u2400\u2400\ufffd=\u2400\ufffd?P\u2402\u2400\u2400\ufffd\ufffd\ufffd?\u2402\u2400\u2400\u2400\u2400\u2400\u2400\u2400=\u2400\u2400\u2400~\u2400\u2400\u2400U\u2401\u2400\u24000\u2400\u2400\u2400h7=&amp;mac8=EA:DF:70:FA:D8:A3&amp;strength8=\n</code></pre>\n\n<p>Also </p>\n\n<pre><code>strcat(urlout, WiFi.RSSI(i)); \n</code></pre>\n\n<p>says:</p>\n\n<pre><code>argument of type \"int32_t\" is incompatible with parameter of type \"const char *\"\n</code></pre>\n\n<p>although for example a <code>Serial.print()</code> which also expects a const char* is able to print the RSSI Value..</p>\n\n<p>Can someone lead me in the right direction for properly building a string out of vars and avoiding buffer overflows, etc ...</p>\n\n<p>Kind regards</p>\n"}, {"tags": ["c++", "c", "winapi", "serial-port", "readfile"], "comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1577793091, "post_id": 59543756, "comment_id": 105256383, "body": "Show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Don&#39;t just dump all of your code."}, {"owner": {"reputation": 299, "user_id": 10731634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5b15c49038da56b3d64b2c3b8d0429?s=128&d=identicon&r=PG&f=1", "display_name": "Code-Lover", "link": "https://stackoverflow.com/users/10731634/code-lover"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1577793804, "post_id": 59543756, "comment_id": 105256606, "body": "@IInspectable I removed the parts that dont relate to this problem but i think the parts that i didnt remove relate to problem and i cant figure out what is wrong. please dont downvote"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1577795062, "post_id": 59543756, "comment_id": 105257045, "body": "The brace at the end of <code>case WAIT_OBJECT_0:{</code> is mis-matched.  A consistent and conventional indentation and alignment style would make that obvious, and if you are going to ask others to review your code it is a good idea to make it as readable as possible in any case.  This is a mess."}, {"owner": {"reputation": 299, "user_id": 10731634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5b15c49038da56b3d64b2c3b8d0429?s=128&d=identicon&r=PG&f=1", "display_name": "Code-Lover", "link": "https://stackoverflow.com/users/10731634/code-lover"}, "edited": false, "score": 0, "creation_date": 1577795172, "post_id": 59543756, "comment_id": 105257088, "body": "@ Clifford You are right im sorry thats because of frequent edits that i made. Im editing"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1577795302, "post_id": 59543756, "comment_id": 105257131, "body": "You <i>must</i> copy and paste exactly the code that is generating the error, not edit it in the question, otherwise how can we rely on the fact that it even exhibits the problem?"}, {"owner": {"reputation": 66473, "user_id": 694576, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/PpOGj.jpg?s=128&g=1", "display_name": "alk", "link": "https://stackoverflow.com/users/694576/alk"}, "edited": false, "score": 1, "creation_date": 1577795459, "post_id": 59543756, "comment_id": 105257181, "body": "Please indent your code properly. This does not just only help us to read and understand your code but also yourself to better see what you are doing, trust me. As it stands the code is not very readable."}, {"owner": {"reputation": 299, "user_id": 10731634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5b15c49038da56b3d64b2c3b8d0429?s=128&d=identicon&r=PG&f=1", "display_name": "Code-Lover", "link": "https://stackoverflow.com/users/10731634/code-lover"}, "reply_to_user": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 0, "creation_date": 1577795476, "post_id": 59543756, "comment_id": 105257188, "body": "@Clifford By editing i mean removing the parts that are not necessary for this question"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1577795530, "post_id": 59543756, "comment_id": 105257207, "body": "The code from <code>&#47;&#47;Reading</code> onward is not inside a function body - if that is a separate  code fragment, you should separate it from <code>SuccessfulRead()</code> otherwise it is not valid as a single block of code."}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1577795623, "post_id": 59543756, "comment_id": 105257246, "body": "Yes, it was wrong before that edit.  If you don&#39;t know what is wron, you are hardly qualified to determine what is irrelevant.  Besides it is still mismatched in you edit."}, {"owner": {"reputation": 299, "user_id": 10731634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5b15c49038da56b3d64b2c3b8d0429?s=128&d=identicon&r=PG&f=1", "display_name": "Code-Lover", "link": "https://stackoverflow.com/users/10731634/code-lover"}, "edited": false, "score": 0, "creation_date": 1577795763, "post_id": 59543756, "comment_id": 105257286, "body": "@ Clifford  thanks for taking your time here. Im trying to indent it properly so that others can review it"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 2, "creation_date": 1577795909, "post_id": 59543756, "comment_id": 105257350, "body": "Format it in the <i>real</i> code, compile and run it to make sure it still exhibits the same problem, then post it - <i>do not</i> try to fix it in the question.  Any decent code editor will format it for you, but may be confused by your mixture of brace positioning style.  There is a good chance that in fixing the formatting you will discover your error."}, {"owner": {"reputation": 299, "user_id": 10731634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5b15c49038da56b3d64b2c3b8d0429?s=128&d=identicon&r=PG&f=1", "display_name": "Code-Lover", "link": "https://stackoverflow.com/users/10731634/code-lover"}, "edited": false, "score": 0, "creation_date": 1577796190, "post_id": 59543756, "comment_id": 105257445, "body": "@ Clifford it is compiled and worked for me the problem is that it does not work in client&#39;s device. Thats why i posted the question here"}, {"owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "edited": false, "score": 1, "creation_date": 1577796591, "post_id": 59543756, "comment_id": 105257569, "body": "You miss my point; <i>you</i> may have code that compiles, but that is not the code you have posted.  You have to post the code that is failing, not something just <i>similar</i> (and invalid).  Have you ever considered stepping the code in a debugger - the error will be come rather obvious I think."}, {"owner": {"reputation": 1964, "user_id": 8666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e412c92534ae5c8ae3b0e9cb7b7360?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel S\u0119k", "link": "https://stackoverflow.com/users/8666197/daniel-s%c4%99k"}, "edited": false, "score": 1, "creation_date": 1577863860, "post_id": 59543756, "comment_id": 105270228, "body": "<i>&quot;When reading from a communications device, the behavior of ReadFile is determined by the current communication time-out as set and retrieved by using the SetCommTimeouts and GetCommTimeouts functions. Unpredictable results can occur if you fail to set the time-out values. For more information about communication time-outs, see COMMTIMEOUTS.&quot;</i> <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-readfile\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/win32/api/fileapi/n&zwnj;&#8203;f-fileapi-readfile</a>"}, {"owner": {"reputation": 299, "user_id": 10731634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5b15c49038da56b3d64b2c3b8d0429?s=128&d=identicon&r=PG&f=1", "display_name": "Code-Lover", "link": "https://stackoverflow.com/users/10731634/code-lover"}, "reply_to_user": {"reputation": 1964, "user_id": 8666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67e412c92534ae5c8ae3b0e9cb7b7360?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel S\u0119k", "link": "https://stackoverflow.com/users/8666197/daniel-s%c4%99k"}, "edited": false, "score": 0, "creation_date": 1577903334, "post_id": 59543756, "comment_id": 105278631, "body": "@Daniel S\u0119k Thanks . Ive set the values for time-out to 3 seconds. Can it be possible to be incompatible with the device? How can i find the values to meet the device&#39;s requirements?"}], "answers": [{"tags": [], "owner": {"reputation": 76010, "user_id": 168986, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/MqorX.jpg?s=128&g=1", "display_name": "Clifford", "link": "https://stackoverflow.com/users/168986/clifford"}, "is_accepted": false, "score": 1, "last_activity_date": 1577796363, "creation_date": 1577796363, "answer_id": 59544328, "question_id": 59543756, "link": "https://stackoverflow.com/questions/59543756/readfile-reads-less-bytes-than-the-specified-value-in-its-argument/59544328#59544328", "title": "ReadFile() reads less bytes than the specified value in its argument", "body": "<p>Here:</p>\n\n<pre><code>        int res=SuccessfulRead(lpBuf,dwRead);\n        if(!res){//less than two bytes read that is one byte readed\n</code></pre>\n\n<p>the comment suggests that you are expecting >= two bytes, but <code>SuccessfulRead()</code> only returns non-zero when <em>exactly</em> two bytes are read:</p>\n\n<pre><code>if( bytesRead == 2 ){ // EXACTLY two bytes!!!\n    //...\n    return 1;\n}\n</code></pre>\n\n<p>You need:</p>\n\n<pre><code>if( bytesRead &lt;= 2 ){ // AT LEAST two bytes\n...\n</code></pre>\n\n<p>for the comment to be correct.</p>\n"}], "owner": {"reputation": 299, "user_id": 10731634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f5b15c49038da56b3d64b2c3b8d0429?s=128&d=identicon&r=PG&f=1", "display_name": "Code-Lover", "link": "https://stackoverflow.com/users/10731634/code-lover"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "closed_date": 1577810740, "answer_count": 1, "score": -1, "last_activity_date": 1577812048, "creation_date": 1577792960, "last_edit_date": 1577812048, "question_id": 59543756, "link": "https://stackoverflow.com/questions/59543756/readfile-reads-less-bytes-than-the-specified-value-in-its-argument", "closed_reason": "Not suitable for this site", "title": "ReadFile() reads less bytes than the specified value in its argument", "body": "<p>I have this code for reading bytes from serial port , but with client's device the message <code>\"No enough information\"</code>\nis displayed and he says there is enough information in the serial port but this message \nis displayed. </p>\n\n<pre><code>int SuccessfulRead(unsigned char * s , DWORD bytesRead){\n\n    if( bytesRead == 2 ){\n        //...\n        return 1;\n    }\n\n    return 0;\n}\n\n//Reading\n\nint i=1 , breakWhile=0 ;\nwhile(!breakWhile)\n{\nDWORD dwRead;\nBOOL fWaitingOnRead = FALSE; //overlapped\nOVERLAPPED osReader = {0};\nunsigned char lpBuf[2];\n\nosReader.hEvent = CreateEvent(NULL, TRUE, FALSE, NULL);\nif (osReader.hEvent == NULL){\nMessageBox( NULL , L\"Unable to create event\" , L\"Error\" , MB_OK);\nbreakWhile=1;\n}\nif (!fWaitingOnRead) {\n   // Issue read operation.\n   if (!ReadFile(hPort2, lpBuf, 2, &amp;dwRead,&amp;osReader)) {\n       if (GetLastError() != ERROR_IO_PENDING){     \n           MessageBox(NULL , L\"Error in communication\" , L\"ERROR\" , MB_OK);\n           break;\n       }\n       else\n           fWaitingOnRead = TRUE;\n   }\n   else {\n       // read completed immediately\n       int res=SuccessfulRead(lpBuf,dwRead);\n       if( !res){\n           MessageBox(NULL , L\"No enough information\" , L\"\" , MB_OK);\n           break;\n       }\n   }\n}\n\n\n\n#define READ_TIMEOUT   2000      // milliseconds\nDWORD dwRes=0;\nif (fWaitingOnRead) {\ndwRes = WaitForSingleObject(osReader.hEvent,READ_TIMEOUT);\nswitch(dwRes)\n{\n    // Read completed.\n    case WAIT_OBJECT_0:{\n        if (!GetOverlappedResult(hPort2, &amp;osReader, &amp;dwRead,FALSE))\n            MessageBox(NULL , L\"Error in GetOverlappedResult\" , L\"Error\" , MB_OK);\n\n        else{\n            // Read completed successfully.\n            int res=SuccessfulRead(lpBuf,dwRead);\n            if(!res){//less than two bytes read that is one byte readed\n            MessageBox(NULL , L\"No enough information\" , L\"\" , MB_OK);\n            breakWhile=1;//exit loop\n            }\n        //Reset flag so that another opertion can be issued.\n        fWaitingOnRead = FALSE;\n                     }\n        break;\n    case WAIT_TIMEOUT:\n        if( i==1){//failed in first try\n            MessageBox(NULL , L\"There is no data please try again\", L\"\" , MB_OK);\n        }\n\n\n        breakWhile=1;//exit loop\n\n        break;\n                       }\n}\n                  }\nCloseHandle(osReader.hEvent);\ni++;\n}\n</code></pre>\n\n<p>It must read 2 bytes every time because of <code>ReadFile(hPort2, lpBuf, 2, &amp;dwRead,&amp;osReader)</code> , but it reads 1 byte in first time so it means there is not more than 1 byte in the serial port.\nBut seems like <code>code vision</code> reads that bytes and why this program only reads 1 byte when there is more than 2 bytes ? when in <code>ReadFile()</code> the bytes to read is 2.</p>\n\n<p>Why does not it work and how to make it work? </p>\n\n<p>Can it be related to <code>timeout</code> value?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["c++", "sdl"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 10680674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea8e469c3889772e5308c82beb4e76b?s=128&d=identicon&r=PG&f=1", "display_name": "obeeey", "link": "https://stackoverflow.com/users/10680674/obeeey"}, "edited": false, "score": 0, "creation_date": 1577871662, "post_id": 59546061, "comment_id": 105271446, "body": "Thank you for your answer :) Unfortunately I&#39;m a little scared of vectors because I was always doing something in pure C, but maybe now it&#39;s time to learn it... I created global pos1/pos2 .. variables and then added function which renders stuff on &quot;win position&quot; inside my Render() function, based on the fact if certain position was already occupied. You gave me the idea that the variables &#39;pos&#39; must be somehow seen in main(), so now it works! Maybe not in the prettiest way, but works... :)"}], "tags": [], "owner": {"reputation": 189, "user_id": 3597782, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/95331b2d06f87770ae74dec2a74d588a?s=128&d=identicon&r=PG&f=1", "display_name": "razr32", "link": "https://stackoverflow.com/users/3597782/razr32"}, "is_accepted": false, "score": 1, "last_activity_date": 1577807747, "last_edit_date": 1577807747, "creation_date": 1577807028, "answer_id": 59546061, "question_id": 59543706, "link": "https://stackoverflow.com/questions/59543706/sdl-2-0-how-to-generate-texture-on-top-of-everything/59546061#59546061", "title": "SDL 2.0 How to generate texture on top of everything?", "body": "<p>It is disappearing because you only render it for the one instance/frame that the character has won. Most rendering nowadays is done on some sort of framebuffer. This is what ends up getting viewed by the user on the screen. Framebuffers can have different formats for different uses, but generally it is just that, a buffer. In the general case it is a buffer representing a 2D image of pixels. </p>\n\n<p>What happens is you don't draw to the same buffer each time, or if you do you clear it to a single static color each time. As you can see in the code you posted.</p>\n\n<pre><code>        SDL_SetRenderDrawColor(gRenderer, 2, 100, 64, 1);\n\n        SDL_RenderClear(gRenderer); // &lt;---- this clears the buffer to a solid color\n\n        SDL_RenderCopy(gRenderer, plansza, NULL, &amp;otherRect[2]);\n        renderMovingObjects(enemiesRect, alliesRect);\n        SDL_RenderCopy(gRenderer, frog, NULL, &amp;otherRect[0]);\n        renderHearts(lives);\n        checkIfWon(&amp;otherRect[0], &amp;lives, &amp;play, &amp;places);\n        //renderWonPosition(300, 500); //explanation below\n        SDL_RenderPresent(gRenderer);\n</code></pre>\n\n<p>So now the problem is <code>checkIfWon</code> will only call renderWonPosition() one time. That is when the player is in the position. I'll assume <code>gameOver()</code> moves the player out of that position when it resets the game correct? So now the next time this loop goes through <code>renderWonPosition()</code> isn't called as the player isn't in that position anymore.</p>\n\n<p>So you are going to have to make sure you render the \"Won\" texture every frame/loop. So basically if your variables <code>pos1/pos2/etc...</code> are true, then you should be calling <code>renderWonPosition()</code>.</p>\n\n<hr>\n\n<p>That being said, you could definitely improve the checkIfWon function as a result. I don't know what some of your other variables do, but judging by the variable <code>places</code> you are doing a lot of extra work because your variables <code>pos1/pos2/...</code> are hidden inside the <code>checkIfWon()</code> function.</p>\n\n<p>You can do something like this:</p>\n\n<pre><code>#include &lt;vector&gt;\n\nstruct WinningPosition {\n    // used to check the bounds if the frog is in this position\n    // frog-&gt;x &gt; this-&gt;x &amp;&amp; frog-&gt;x &lt; this-&gt;x + Width\n    static constexpr int Width = 32;\n\n    // the x, y position that the frag can be in to win\n    int x;\n    int y;\n    bool won = false;\n};\n\nvoid renderWonPosition(int x, int y) {\n    // todo render\n}\n\nvoid handleWinningPositions(SDL_Rect* frogRect, std::vector&lt;WinningPosition&gt;&amp; positions) {\n    // we loop through all the possible positions\n    for (auto&amp; pos : positions) {\n        // if the position is already won then we render it\n        // to the screen and continue as we don't need to check it again\n        if (pos.won) {\n            renderWonPosition(pos.x, pos.y);\n            continue;\n        }\n\n\n        // this might need to be looked at, I just took it from your code\n        // but checking an exact position might not be the best approach\n        // for example, if the frog can move more than 1 pixel at a time\n        // assuming that frogRect-&gt;y is measured in pixels\n        if (frogRect-&gt;y == 50 + (SCREEN_HEIGHT % 100))\n        {\n            if (frogRect-&gt;x &gt; pos.x &amp;&amp; frogRect-&gt;x &lt; pos.x + WinningPosition::Width)\n            {\n                pos.won = true;\n            }\n        }\n    }\n\n    // Here you could check if the game is over,\n    // if all the above positions are set to true or if no\n    // lives remaining\n\n    // checkIfPositionWon(&amp;pos2, places, lives);\n    // gameOver(frogRect, lives, play, places);\n\n}\n\n\n// ...\n\n    // here we simply store all the positions that are winnable\n    // we set which this position is to be rendered or \n    // where the frog needs to be in order for it to be considered a win\n    std::vector&lt;WinningPosition&gt; winningPositions = {\n        WinningPosition{ 29, 50 /* you'd need to calcluate the Y position */ },\n        WinningPosition{ 169, 50 },\n    };\n\n    handleWinningPositions(frogPos, winningPositions);\n\n// ...\n</code></pre>\n\n<p>Anyways games are pretty difficult to program. They become very complicated and a lot of the components of a game need to know about each other. I can only see a fraction of the code you have so I don't know how everything else operates. Hopefully this gives some more ideas of what you can do. This way it's really easy to add more positions and you are less likely to make a mistake in the logic for determining if the frog is in the win position. And ultimately you write less code which is less work to maintain :).</p>\n"}], "owner": {"reputation": 103, "user_id": 10680674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ea8e469c3889772e5308c82beb4e76b?s=128&d=identicon&r=PG&f=1", "display_name": "obeeey", "link": "https://stackoverflow.com/users/10680674/obeeey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577808502, "creation_date": 1577792682, "last_edit_date": 1577808502, "question_id": 59543706, "link": "https://stackoverflow.com/questions/59543706/sdl-2-0-how-to-generate-texture-on-top-of-everything", "title": "SDL 2.0 How to generate texture on top of everything?", "body": "<p>I'm doing this Frogger type of game and I want to display a texture on certain coordinates when player approaches the \"win\" position. \nThis is what the game looks like:\n<a href=\"https://i.stack.imgur.com/Wy5LO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wy5LO.png\" alt=\"my game\"></a></p>\n\n<p>In red circles is space where the \"win\" texture should be rendered (just a texture of \"ok thumb\") after achieving this position by frog player. Also, this texture should stay on \"win\" position until game ends, two options: \n-> until the player loses all 3 lifes\n-> until the player occupies all 5 \"win\" positions\nNow, some code.\nThis is from main(), part containing all render stuff:</p>\n\n<pre><code>                SDL_SetRenderDrawColor(gRenderer, 2, 100, 64, 1);\n                SDL_RenderClear(gRenderer);\n                SDL_RenderCopy(gRenderer, plansza, NULL, &amp;otherRect[2]);\n                renderMovingObjects(enemiesRect, alliesRect);\n                SDL_RenderCopy(gRenderer, frog, NULL, &amp;otherRect[0]);\n                renderHearts(lives);\n                checkIfWon(&amp;otherRect[0], &amp;lives, &amp;play, &amp;places);\n                //renderWonPosition(300, 500); //explanation below\n                SDL_RenderPresent(gRenderer);\n</code></pre>\n\n<p>Here is the checkIfWon() function, this just checks if the player is on \"win\" position, and if yes - it should generate \"win\" texture and then reset player position to continue the game inside the gameOver() function. </p>\n\n<pre><code>void checkIfWon(SDL_Rect* frogRect, int* lives, bool* play, int *places)\n{\nstatic bool pos1 = false, pos2 = false, pos3 = false, pos4 = false, pos5 = false;\nif (*places == 0)\n    pos1 = pos2 = pos3 = pos4 = pos5 = false;\nif (frogRect-&gt;y == 50 + (SCREEN_HEIGHT % 100))\n{\n    if (frogRect-&gt;x &gt; 29 &amp;&amp; frogRect-&gt;x &lt; 61)\n    {   \n        checkIfPositionWon(&amp;pos1, places, lives);\n        renderWonPosition(frogRect-&gt;x, frogRect-&gt;y);  //HERE should render \"win\" texture\n        gameOver(frogRect, lives, play, places);\n    }\n    else if (frogRect-&gt;x &gt; 169 &amp;&amp; frogRect-&gt;x &lt; 201)\n    {\n        checkIfPositionWon(&amp;pos2, places, lives);\n        renderWonPosition(frogRect-&gt;x, frogRect-&gt;y);   // it's pretty much same else if's 5 times\n        gameOver(frogRect, lives, play, places);       // for 5 different positions\n    }\n    else if (frogRect-&gt;x &gt; 309 &amp;&amp; frogRect-&gt;x &lt; 341)\n    {\n        checkIfPositionWon(&amp;pos3, places, lives);\n        renderWonPosition(frogRect-&gt;x, frogRect-&gt;y);\n        gameOver(frogRect, lives, play, places);\n    }\n    else if (frogRect-&gt;x &gt; 449 &amp;&amp; frogRect-&gt;x &lt; 481)\n    {\n        checkIfPositionWon(&amp;pos4, places, lives);\n        renderWonPosition(frogRect-&gt;x, frogRect-&gt;y);\n        gameOver(frogRect, lives, play, places);\n    }\n    else if (frogRect-&gt;x &gt; 589 &amp;&amp; frogRect-&gt;x &lt; 621)\n    {\n        checkIfPositionWon(&amp;pos5, places, lives);\n        renderWonPosition(frogRect-&gt;x, frogRect-&gt;y);\n        gameOver(frogRect, lives, play, places);\n    }\n    else\n    {\n        printf(\"LOST LIFE!\\n\");\n        gameOver(frogRect, lives, play, places);\n    }\n\n    if (*places == 5) //the player occupied all five \"win\" positions and the game ends\n        gameOver(frogRect, lives, play, places);\n}\n}\n</code></pre>\n\n<p>Here is the function which renders \"win\" texture on specific coordinates:</p>\n\n<pre><code>void renderWonPosition(int x, int y)\n{\n  SDL_Rect wonPosition = { x, y, 50, 50 };\n  SDL_RenderSetViewport(gRenderer, &amp;wonPosition);\n  SDL_RenderCopy(gRenderer, ok, NULL, NULL);\n  SDL_Rect undoView = { 0, 0, SCREEN_WIDTH, SCREEN_HEIGHT };\n  SDL_RenderSetViewport(gRenderer, &amp;undoView);\n}\n</code></pre>\n\n<p>Now...<br>\n       My problem is, this function doesn't render the texture permanently, only for like a second snapshot or so. I debugged this and inside renderWonPosition() passed values were okay. My concern is, why, when I call the same renderWonPosition() function inside main() with some random int parameters, this works and renders \"win\" texture, but when this function is called form inside checkIfWon() texture stays only for a second?</p>\n"}, {"tags": ["c++", "iterator"], "answers": [{"comments": [{"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1577793888, "post_id": 59543710, "comment_id": 105256633, "body": "But even if containers would return exactly the iterator I&#39;m using, why does the compiler complain about the operators used not being defined? A <code>std::iterator&lt;std::input_iterator_tag, T&gt;</code> should provide increment, inequality, dereferencing, ..."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 3, "creation_date": 1577793976, "post_id": 59543710, "comment_id": 105256661, "body": "@flowit, <code>std::iterator</code> is a now deprecated struct that <a href=\"https://en.cppreference.com/w/cpp/iterator/iterator\" rel=\"nofollow noreferrer\">was there</a> to provide member types only for user-defined iterators derived from it."}], "tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 2, "last_activity_date": 1577792703, "creation_date": 1577792703, "answer_id": 59543710, "question_id": 59543665, "link": "https://stackoverflow.com/questions/59543665/c-iterator-to-string-like-types/59543710#59543710", "title": "C++ iterator to string-like types", "body": "<p>The idiomatic way is to use <em>templates</em> instead:</p>\n\n<pre><code>template&lt;typename IterT&gt;\nExample(IterT begin, IterT end) { ... }\n</code></pre>\n\n<p>Your way using <code>std::iterator&lt;...&gt;</code> doesn't work because few container iterators actually are of the type <code>std::iterator&lt;...&gt;</code>, and doesn't have a conversion operator to it.</p>\n"}, {"comments": [{"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1577798621, "post_id": 59544283, "comment_id": 105258242, "body": "Concepts can&#39;t come soon enough, because I really don&#39;t want to play a lot with <code>enable_if</code> to limit this template ctor to meaningful arguments. However, a second question remains (I edited the original question to make it more clear): Now having an iterator to type T, how would I go about in making sure that I always get a <code>const char*</code> out of it?"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1577800052, "post_id": 59544283, "comment_id": 105258737, "body": "@flowit, in your particular example you can write <code>&amp;(*it)[0]</code> instead of <code>*it</code> to get <code>const char*</code> both for <code>const char*</code> and <code>std::string</code> underlying types. You can also write an iterator adapter that would return such a pointer when <code>operator*</code> is called."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": true, "score": 2, "last_activity_date": 1577797247, "last_edit_date": 1577797247, "creation_date": 1577796014, "answer_id": 59544283, "question_id": 59543665, "link": "https://stackoverflow.com/questions/59543665/c-iterator-to-string-like-types/59544283#59544283", "title": "C++ iterator to string-like types", "body": "<p><code>std::iterator</code> is not meant to be used that way. It was introduced into the library to support user-defined iterators by providing <a href=\"https://en.cppreference.com/w/cpp/iterator/iterator\" rel=\"nofollow noreferrer\">certain member types</a> like <code>iterator_category</code> and <code>value_type</code>. <code>std::iterator</code> is an empty class and taking it by value is <a href=\"https://stackoverflow.com/questions/274626/what-is-object-slicing\">meaningless</a>. Taking it by reference doesn't make much sense either, because iterators do not have to be derived from it. <code>std::iterator</code> is <a href=\"https://stackoverflow.com/questions/43268146/why-is-stditerator-deprecated\">deprecated</a> since C++17.</p>\n\n<p><code>LegcayInputIterator</code> is not a class, but a collection of requirements a type should satisfy. The type itself is not fixed and should be a template parameter. Since C++20, when <a href=\"https://en.cppreference.com/w/cpp/language/constraints\" rel=\"nofollow noreferrer\">concepts</a> will become a language feature, you'll be able to write something like this:</p>\n\n<pre><code>template&lt;typename InputIt&gt; requires InputIterator&lt;InputIt&gt;\nExample(It begin, It end) { ... }\n</code></pre>\n\n<p>or</p>\n\n<pre><code>template&lt;InputIterator InputIt&gt;\nExample(It begin, It end) { ... }\n</code></pre>\n\n<p>to check that <code>InputIt</code> indeed satisfies the requirements of an input iterator. Here <code>InputIterator</code> is a concept, see <a href=\"https://en.cppreference.com/w/cpp/named_req/InputIterator#Concept\" rel=\"nofollow noreferrer\">here</a> for a particular example. Until then you simply write:</p>\n\n<pre><code>template&lt;typename InputIt&gt;\nExample(InputIt begin, InputIt end) { ... }\n</code></pre>\n\n<p>For example, <code>std::vector</code>'s constructor from a range <code>[first, last)</code> is <a href=\"https://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow noreferrer\">declared this way</a>:</p>\n\n<pre><code>template&lt;class InputIt&gt;\nvector(InputIt first, InputIt last, const Allocator&amp; alloc = Allocator());\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "edited": false, "score": 0, "creation_date": 1577798030, "post_id": 59544309, "comment_id": 105258047, "body": "I think that&#39;s more a question of style, if I pass in a container or two iterators directly (or with C++20 maybe a range). The latter might be more flexible, so that&#39;s why I was going for it in the first place. Concepts probably make it easier to limit that template to actual container types. Right now it&#39;s just a whole lot of work."}], "tags": [], "owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "is_accepted": false, "score": 0, "last_activity_date": 1577796344, "last_edit_date": 1577796344, "creation_date": 1577796242, "answer_id": 59544309, "question_id": 59543665, "link": "https://stackoverflow.com/questions/59543665/c-iterator-to-string-like-types/59544309#59544309", "title": "C++ iterator to string-like types", "body": "<p>It does not really address the question of why it does not work, but you could utilize <a href=\"https://en.cppreference.com/w/cpp/iterator/begin\" rel=\"nofollow noreferrer\"><code>std::begin</code></a> and <a href=\"https://en.cppreference.com/w/cpp/iterator/end\" rel=\"nofollow noreferrer\"><code>std::end</code></a></p>\n\n<pre><code>struct Example {\n\n    Example(const char *text)\n    {\n        std::printf(\"Called single argument ctor, text = %s\\n\", text);\n    }\n\n    template&lt;typename T&gt;\n    Example(const T &amp;t)\n    {\n\n        std::printf(\"Called iterator ctor, text = [\");\n        for (auto it = std::begin(t); it != std::end(t); ++it)\n            std::printf(\"%s, \", *it);\n        std::printf(\"]\\n\");\n    }\n};\n</code></pre>\n\n<p>For relay completely on the range base for:</p>\n\n<pre><code>struct Example {  \n    Example(const char *text)\n    {\n        std::printf(\"Called single argument ctor, text = %s\\n\", text);\n    }\n\n    template&lt;typename T&gt;\n    Example(const T &amp;t)\n    {\n        std::printf(\"Called iterator ctor, text = [\");\n        for (const auto &amp;c : t)\n            std::printf(\"%s, \", c);\n        std::printf(\"]\\n\");\n    }\n};\n</code></pre>\n"}], "owner": {"reputation": 1148, "user_id": 5383521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/01531ac40d262787ab7659f7220505df?s=128&d=identicon&r=PG&f=1", "display_name": "flowit", "link": "https://stackoverflow.com/users/5383521/flowit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 59544283, "answer_count": 3, "score": 2, "last_activity_date": 1577798785, "creation_date": 1577792449, "last_edit_date": 1577798785, "question_id": 59543665, "link": "https://stackoverflow.com/questions/59543665/c-iterator-to-string-like-types", "title": "C++ iterator to string-like types", "body": "<p>The plan is to implement a class with two constructors. The first ctor should take a string-like type, the second ctor two iterators (begin and end) to a container of string-like objects. Internally, the class will work with <code>const char*</code>, null-terminated C strings. For the first ctor, that's an easy task where I can just be explicit. Passing in a C++ <code>string</code> with <code>str.c_str()</code> or similar string-like types works fine. For the second ctor however I'm not so sure how I should implement it. In general, it should be a <code>LegcayInputIterator</code> with a value type that is convertible to <code>const char*</code>. From the top of my head I can think of at least 4 types I want to support, and overloading the second ctor for so many seems like the wrong approach.</p>\n\n<p>Why does my second ctor fail to compile? The <code>++</code>, <code>!=</code> and <code>*</code> operators should be defined. What would be a working approach to pass in two iterators to <code>T</code> but actually allow different string-like types from which I could get <code>const char*</code> (see example 5 in the code)?</p>\n\n<p>The example code should illustrate my approach, but doesn't work unfortunately.</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;array&gt;\n#include &lt;cstdio&gt;\n#include &lt;string&gt;\n#include &lt;iterator&gt;\n\nstruct Example {\n\n    using CtorIterator = std::iterator&lt;std::input_iterator_tag, const char*&gt;;\n    Example(const char *text)\n    {\n        std::printf(\"Called single argument ctor, text = %s\\n\", text);\n    }\n\n    Example(CtorIterator begin, CtorIterator end)\n    {\n        std::printf(\"Called iterator ctor, text = [\");\n        for (auto it = begin; it != end; ++it)\n            std::printf(\"%s, \", *it);\n        std::printf(\"]\\n\");\n    }\n};\n\nint main(int argc, char **argv) {\n    Example ex1(\"Hello\");\n    std::string arg2(\"String\");\n    Example ex2(arg2.c_str());\n\n    std::vector&lt;const char*&gt; args3{\"A\", \"B\", \"C\"};\n    std::array&lt;const char*, 3&gt; args4{\"D\", \"E\", \"F\"};\n    std::vector&lt;std::string&gt; args5{\"G\", \"H\", \"I\"};\n\n    Example ex3(args3.begin(), args3.end());\n    Example ex4(args4.begin(), args4.end());\n    Example ex5(args5.begin(), args5.end()); // won't work\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["php", "c++", "post", "utf-8", "wininet"], "answers": [{"tags": [], "owner": {"reputation": 26087, "user_id": 1312406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5418f577abfa7c529dd026723462b440?s=128&d=identicon&r=PG", "display_name": "Paul Evans", "link": "https://stackoverflow.com/users/1312406/paul-evans"}, "is_accepted": false, "score": 0, "last_activity_date": 1577792080, "creation_date": 1577792080, "answer_id": 59543589, "question_id": 59543503, "link": "https://stackoverflow.com/questions/59543503/problem-of-encoding-when-sending-post-request-using-wininet-in-c/59543589#59543589", "title": "Problem of encoding when sending POST request using Wininet in C++", "body": "<p>Every string is <code>wchar</code> except:</p>\n\n<pre><code>std::string dataStr = \"amount=\" + \"42,342\u20ac\";\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>std::wstring dataStr = L\"amount=\" + L\"42,342\u20ac\";\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12631753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c4ab1dfb7dfc1bd638334f23a07c611?s=128&d=identicon&r=PG&f=1", "display_name": "itevurraddo-6784", "link": "https://stackoverflow.com/users/12631753/itevurraddo-6784"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1578060769, "creation_date": 1577791667, "question_id": 59543503, "link": "https://stackoverflow.com/questions/59543503/problem-of-encoding-when-sending-post-request-using-wininet-in-c", "title": "Problem of encoding when sending POST request using Wininet in C++", "body": "<p>I would like to send UTF-8 content in a POST request with Wininet.\nThe content is correctly sent but, when it's a special char like <code>\u20ac</code> is not writed and printed correctly.</p>\n\n<p>I have the same problem with Postman so I don't know very well if it's my PHP code to write the content receveied or if it's my C++ code.\nThis is the PHP code which write the content in a text file to test the recevie function :</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        &lt;?php\n                $fh = fopen(\"amount_test.txt\", 'w') or die(\"can't open file\");\n                fwrite($fh, utf8_encode($_POST[\"amount\"]));\n                fclose($fh);\n        ?&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>This is the function to send POST request with UTF-8 content :</p>\n\n<pre><code>void sendAmount()\n{\n    LPCWSTR browser = L\"Game/2.3\";\n    LPCWSTR domain = L\"127.0.0.1\";\n    LPCWSTR methode = L\"POST\";\n    LPCWSTR page = L\"/minigame/engine/sendAmount.php\";\n    std::wstring strContentType = L\"Content-Type: application/x-www-form-urlencoded; charset=utf-8\";\n    LPCWSTR contentType = strContentType.c_str();\n    std::string dataStr = \"amount=\" + \"42,342\u20ac\";\n    LPVOID dataToSend = (LPVOID)dataStr.c_str();\n\n    HINTERNET hInternet = InternetOpenW(browser, INTERNET_OPEN_TYPE_PRECONFIG, NULL, NULL, 0);\n    HINTERNET hConnection = InternetConnectW(hInternet, domaine, 80, NULL, NULL, INTERNET_SERVICE_HTTP, 0, 1);\n    HINTERNET hRequest  = HttpOpenRequestW(hConnection, methode, page, NULL, NULL, NULL, 0, 1);\n    HttpSendRequestW(hRequest, contentType, strContentType.size(), dataToSend, dataStr.size());\n}\n</code></pre>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 3, "creation_date": 1577789810, "post_id": 59543121, "comment_id": 105255308, "body": "Can input contain space? if so use <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a> instead of <code>operator &gt;&gt;</code>."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1577789822, "post_id": 59543121, "comment_id": 105255312, "body": "For some specific input, what is the expected output? What is the actual output of your program? And please take some time to read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>."}, {"owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "edited": false, "score": 0, "creation_date": 1577790085, "post_id": 59543121, "comment_id": 105255407, "body": "what was the input for which you are getting wrong answer?"}, {"owner": {"reputation": 1376, "user_id": 12460593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UTQNM.jpg?s=128&g=1", "display_name": "Ajay Dabas", "link": "https://stackoverflow.com/users/12460593/ajay-dabas"}, "edited": false, "score": 2, "creation_date": 1577790101, "post_id": 59543121, "comment_id": 105255410, "body": "<code>I am getting wrong answer in some of the cases.</code> Can you give an example?"}, {"owner": {"reputation": 1376, "user_id": 12460593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UTQNM.jpg?s=128&g=1", "display_name": "Ajay Dabas", "link": "https://stackoverflow.com/users/12460593/ajay-dabas"}, "edited": false, "score": 2, "creation_date": 1577790551, "post_id": 59543121, "comment_id": 105255559, "body": "According to you, output of <code>bEGIN</code> is <code>BEGIN 1</code>. If that&#39;s the case, observe that you&#39;re printing <code>ans</code> in next line instead of the same line. Use <code>cout&lt;&lt;s&lt;&lt;&quot; &quot;&lt;&lt;ans;</code>"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1577791571, "post_id": 59543121, "comment_id": 105255882, "body": "For an idiomatic C++ solution, please read about <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::getline</code></a>, <a href=\"https://en.cppreference.com/w/cpp/algorithm/count\" rel=\"nofollow noreferrer\"><code>std::count_if</code></a>, and <a href=\"https://en.cppreference.com/w/cpp/algorithm/transform\" rel=\"nofollow noreferrer\"><code>std::transform</code></a>. Those three functions  (with the help of <code>std::islower</code> and <code>std::toupper</code>) will do all you want in a compact but still understandable way."}, {"owner": {"reputation": 346, "user_id": 8703893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJNvU.jpg?s=128&g=1", "display_name": "Ajinkya Taranekar", "link": "https://stackoverflow.com/users/8703893/ajinkya-taranekar"}, "edited": false, "score": 0, "creation_date": 1577792433, "post_id": 59543121, "comment_id": 105256174, "body": "Hey @beginner can you see in which format output needs to be printed."}], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 8703893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJNvU.jpg?s=128&g=1", "display_name": "Ajinkya Taranekar", "link": "https://stackoverflow.com/users/8703893/ajinkya-taranekar"}, "reply_to_user": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1577791729, "post_id": 59543286, "comment_id": 105255934, "body": "Not return exactly, but when whitespace occurred, std:cin &gt;&gt; doesn&#39;t store further values."}, {"owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "reply_to_user": {"reputation": 7744, "user_id": 9666018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc2959ed405ad18cbca6aa3efe01bc7d?s=128&d=identicon&r=PG&f=1", "display_name": "Armin Montigny", "link": "https://stackoverflow.com/users/9666018/armin-montigny"}, "edited": false, "score": 0, "creation_date": 1577791966, "post_id": 59543286, "comment_id": 105256013, "body": "@ArminMontigny : <a href=\"https://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow noreferrer\"><code>std::cin</code></a> not mentioned ill effect as you noted above"}, {"owner": {"reputation": 346, "user_id": 8703893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJNvU.jpg?s=128&g=1", "display_name": "Ajinkya Taranekar", "link": "https://stackoverflow.com/users/8703893/ajinkya-taranekar"}, "edited": false, "score": 0, "creation_date": 1577792203, "post_id": 59543286, "comment_id": 105256101, "body": "Moreover, islower() can handle alphanumerics character, I think there is some other corner case that we haven&#39;t given a thought."}], "tags": [], "owner": {"reputation": 346, "user_id": 8703893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nJNvU.jpg?s=128&g=1", "display_name": "Ajinkya Taranekar", "link": "https://stackoverflow.com/users/8703893/ajinkya-taranekar"}, "is_accepted": false, "score": 1, "last_activity_date": 1577792018, "last_edit_date": 1577792018, "creation_date": 1577790518, "answer_id": 59543286, "question_id": 59543121, "link": "https://stackoverflow.com/questions/59543121/convert-lowercase-to-uppercase-in-a-string/59543286#59543286", "title": "Convert lowercase to uppercase in a string", "body": "<p>I think it includes spaces too, so instead of using <code>&gt;&gt;</code> operator use <code>getline(cin,string)</code>, as <code>&gt;&gt;</code> gets terminate when whitespace is occurred.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n\n string s;\n getline(cin,s);\n int ans = 0;\n for (auto &amp;c : s) {\n     if (islower(c)) {\n         ans++;\n         c = toupper(c);\n     }\n }\n cout &lt;&lt; s;\n cout &lt;&lt; endl;\n cout &lt;&lt; ans;\n return 0;\n}\n</code></pre>\n\n<p>This might be a solution to other test cases.</p>\n"}, {"comments": [{"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 0, "creation_date": 1577792135, "post_id": 59543542, "comment_id": 105256076, "body": "Except for the two includes this answer is identical to the other one. Except that the other answer actually offers an explanation of the possible problem. So why do you post it again?"}], "tags": [], "owner": {"reputation": 430, "user_id": 10237558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f39111c4e218b419ecdaf84b44481de4?s=128&d=identicon&r=PG&f=1", "display_name": "Navidk", "link": "https://stackoverflow.com/users/10237558/navidk"}, "is_accepted": false, "score": 0, "last_activity_date": 1577791835, "creation_date": 1577791835, "answer_id": 59543542, "question_id": 59543121, "link": "https://stackoverflow.com/questions/59543121/convert-lowercase-to-uppercase-in-a-string/59543542#59543542", "title": "Convert lowercase to uppercase in a string", "body": "<p>This should work:</p>\n\n<pre><code>#include&lt;stdio.h&gt;\n#include&lt;iostream&gt;\n#include&lt;string&gt;\nusing namespace std;\n\n\n int main() {\n\n     string s;\n    getline(cin,s);\n     int ans = 0;\n     for (auto &amp;c : s) {\n         if (islower(c)) {\n             ans++;\n             c = toupper(c);\n         }\n     }\n     cout &lt;&lt; s;\n     cout &lt;&lt; endl;\n     cout &lt;&lt; ans;\n     return 0;\n }\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12631794, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0489af9d10f749511ef3cc97da9b3ac?s=128&d=identicon&r=PG&f=1", "display_name": "beginner", "link": "https://stackoverflow.com/users/12631794/beginner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1577801300, "answer_count": 2, "score": 1, "last_activity_date": 1577792018, "creation_date": 1577789626, "last_edit_date": 1592644375, "question_id": 59543121, "link": "https://stackoverflow.com/questions/59543121/convert-lowercase-to-uppercase-in-a-string", "closed_reason": "Not suitable for this site", "title": "Convert lowercase to uppercase in a string", "body": "<blockquote>\n<p>The new typist in the printing cell is typing carelessly the jobs assigned. The typist while was supposed to type all the characters in upper case, has got in lower cases too. Your duty is to verify if all the characters are in upper case and do so if not. Also, notify how many mistakes the typist did.</p>\n<p>Input <code>bEGIN</code></p>\n<p>Output <code>BEGIN 1</code></p>\n</blockquote>\n<p>I am getting wrong answer in some of the cases please help i am beginner</p>\n<blockquote>\n<p>n=length of string<br />\n1&lt;=n&lt;=50</p>\n</blockquote>\n<pre><code> int main() {\n     \n     string s;\n     cin &gt;&gt; s;\n     int ans = 0;\n     for (auto &amp;c : s) {\n         if (islower(c)) {\n             ans++;\n             c = toupper(c);\n         }\n     }\n     cout &lt;&lt; s;\n     cout &lt;&lt; endl;\n     cout &lt;&lt; ans;\n     return 0;\n }\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 4, "creation_date": 1577789253, "post_id": 59542891, "comment_id": 105255086, "body": "You have to show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for <code>glTexImage2D</code>, with all parts of your texture setup until the error occurs, including how you detect that error."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 1, "creation_date": 1577796599, "post_id": 59542891, "comment_id": 105257573, "body": "That&#39;s not really a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Let&#39;s just ignore that there is no context creation and activation here, but I don&#39;t see any texture generation and binding in your example."}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 1005936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b13f94edb0e7f9ea6201e6f29ae0e856?s=128&d=identicon&r=PG", "display_name": "CivDav", "link": "https://stackoverflow.com/users/1005936/civdav"}, "edited": false, "score": 0, "creation_date": 1577794382, "post_id": 59543011, "comment_id": 105256810, "body": "True, damn, I figured 0 would turn off mipmapping entirely, which worked for glTexImage2D.  Anyways, I&#39;m still in trouble, cause I can&#39;t upload the data. If I glTexSubImage2D after the glTexStorage2D call, I get a GL_INVALID_OPERATION, as per specification. However, glTexImage2D still doesn&#39;t work with GL_UNSIGNED_INT. Spec says 0 level is OK for glTexImage2D."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "reply_to_user": {"reputation": 102, "user_id": 1005936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b13f94edb0e7f9ea6201e6f29ae0e856?s=128&d=identicon&r=PG", "display_name": "CivDav", "link": "https://stackoverflow.com/users/1005936/civdav"}, "edited": false, "score": 2, "creation_date": 1577795201, "post_id": 59543011, "comment_id": 105257099, "body": "@CivDav the point of my comment to your question ist still true. Without a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> showing the whole process of texture setup and how you detect that error, it is not possible to tell. And additional questions like regarding  <code>glTexSubImage2D</code> should be asked in a new distinct question because it is a different problem. It is not a forum, but a Q&amp;A platform, so you have to use it according to this."}], "tags": [], "owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "is_accepted": false, "score": 3, "last_activity_date": 1577789433, "last_edit_date": 1577789433, "creation_date": 1577789022, "answer_id": 59543011, "question_id": 59542891, "link": "https://stackoverflow.com/questions/59542891/opengl-integer-texture-raising-gl-invalid-value/59543011#59543011", "title": "OpenGL integer texture raising GL_INVALID_VALUE", "body": "<p>From the specs about <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexStorage2D.xhtml\" rel=\"nofollow noreferrer\">glTexStorage2D</a>:</p>\n\n<blockquote>\n<pre><code>void glTexStorage2D(    \n    GLenum target,\n    GLsizei levels,\n    GLenum internalformat,\n    GLsizei width,\n    GLsizei height\n);\n</code></pre>\n  \n  <p>[\u2026]<br>\n   <code>GL_INVALID_VALUE</code> is generated if <code>width</code>, <code>height</code> or <strong><code>levels</code></strong> are less than 1</p>\n</blockquote>\n\n<p>And the value for <code>levels</code> you pass to <code>glTexStorage2D</code> is <code>0</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1577802210, "post_id": 59544753, "comment_id": 105259376, "body": "&quot;<i><code>GL_RED</code></i>&quot; You mean <code>GL_RED_INTEGER</code>."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 2, "last_activity_date": 1577803849, "last_edit_date": 1577803849, "creation_date": 1577799028, "answer_id": 59544753, "question_id": 59542891, "link": "https://stackoverflow.com/questions/59542891/opengl-integer-texture-raising-gl-invalid-value/59544753#59544753", "title": "OpenGL integer texture raising GL_INVALID_VALUE", "body": "<p>First of all you have to create an <a href=\"https://www.khronos.org/opengl/wiki/OpenGL_Context\" rel=\"nofollow noreferrer\">OpenGL Context</a>. e.g.:<br>\n(See also <a href=\"https://www.libsdl.org/release/SDL-1.2.15/docs/html/guidevideoopengl.html\" rel=\"nofollow noreferrer\">Using OpenGL With SDL</a>)</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>if (SDL_Init(SDL_INIT_VIDEO) &lt; 0)\n    return 0;\n\nSDL_Window *window = SDL_CreateWindow(\"ogl wnd\", 0, 0, width, height, SDL_WINDOW_OPENGL);\nif (window == nullptr)\n    return 0;\nSDL_GLContext context = SDL_GL_CreateContext(window);\n\nif (glewInit() != GLEW_OK)\n    return 0;\n</code></pre>\n\n<p>Then you have to generate an texture name by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glGenTextures.xhtml\" rel=\"nofollow noreferrer\"><code>glGenTextures</code></a>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>GLuint tobj;\nglGenTextures(1, &amp;tobj);\n</code></pre>\n\n<p>After that you've to bind the named texture to a texturing target by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glBindTexture.xhtml\" rel=\"nofollow noreferrer\"><code>glBindTexture</code></a>:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glBindTexture(GL_TEXTURE_2D, tobj);\n</code></pre>\n\n<p>Finally you can specify the two-dimensional texture image by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexImage2D.xhtml\" rel=\"nofollow noreferrer\"><code>glTexImage2D</code></a></p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glTexImage2D(GL_TEXTURE_2D, 0, GL_R32UI, 3072, 2048, 0, GL_RED_INTEGER, GL_UNSIGNED_INT, nullptr);\n</code></pre>\n\n<p>Note, the texture format has to be <code>GL_RED_INTEGER</code> rather than <code>GL_RED</code>, because the source texture image has to be interpreted as integral data, rather than normalized floating point data. The <em>format</em> and <em>type</em> parameter specify the format of the source data. The <em>internalformat</em> parameter specifies the format of the target texture image.</p>\n\n<p>Set the texture parameters by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glTexParameter.xhtml\" rel=\"nofollow noreferrer\"><code>glTexParameter</code></a> ( this can be done before <code>glTexImage2D</code>, too):</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);\nglTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);\n</code></pre>\n\n<p>If you do not generate <a href=\"https://en.wikipedia.org/wiki/Mipmap\" rel=\"nofollow noreferrer\">mipmaps</a> (by <a href=\"https://www.khronos.org/registry/OpenGL-Refpages/gl4/html/glGenerateMipmap.xhtml\" rel=\"nofollow noreferrer\"><code>glGenerateMipmap</code></a>), then setting the <code>GL_TEXTURE_MIN_FILTER</code> is important. Since the default filter is <code>GL_NEAREST_MIPMAP_LINEAR</code> the texture would be mipmap incomplete, if you don not change the minifying function to <code>GL_NEAREST</code> or <code>GL_LINEAR</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "is_accepted": false, "score": 0, "last_activity_date": 1577818607, "last_edit_date": 1592644375, "creation_date": 1577818607, "answer_id": 59547634, "question_id": 59542891, "link": "https://stackoverflow.com/questions/59542891/opengl-integer-texture-raising-gl-invalid-value/59547634#59547634", "title": "OpenGL integer texture raising GL_INVALID_VALUE", "body": "<blockquote>\n<p>And mutably: glTexImage2D(GL_TEXTURE_2D, 0, GL_R32UI, 3072, 2048, 0, GL_RED, GL_UNSIGNED_INT, textureData);</p>\n<p>I tried signed int too, the same thing. I also checked with NSight VS edition, for <code>UINT</code> 2D textures, my max resolution is 16384x16384, so that's not the issue. Also, according to NSight, <code>uint</code> textures are fully supported by the OpenGL driver.</p>\n<p>What am I missing here?</p>\n</blockquote>\n<p>For unormalized integer texture formatss, the <code>format</code> parameter of <code>glTex[Sub]Image</code> is not allowed to be just <code>GL_RED</code>, you have to use <code>GL_RED_INTEGER</code>.The <code>format,type</code> combination <code>GL_RED, GL_UNSIGNED_INT</code> is for specifying normalized fixed point or floating point formats only.</p>\n"}], "owner": {"reputation": 102, "user_id": 1005936, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b13f94edb0e7f9ea6201e6f29ae0e856?s=128&d=identicon&r=PG", "display_name": "CivDav", "link": "https://stackoverflow.com/users/1005936/civdav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1577818607, "creation_date": 1577788351, "last_edit_date": 1577795815, "question_id": 59542891, "link": "https://stackoverflow.com/questions/59542891/opengl-integer-texture-raising-gl-invalid-value", "title": "OpenGL integer texture raising GL_INVALID_VALUE", "body": "<p>I have an Nvidia GTX 970, with the latest (441.66) driver for Win 10 x64 (18362 build), which is obviously fully OpenGL 4.6 compliant, and currently compiling an app with VS2017.</p>\n\n<p>My problem is, that I seem to be unable to use any other texture type then <code>GL_UNSIGNED_BYTE</code>. I'm currently trying to set up a single channel, unsigned integer (32 bit) texture, but however I try to allocate the texture, OpenGL immediately raises the <code>GL_INVALID_VALUE</code> error, and the shader's result turns all black.</p>\n\n<p>So far I tryed allocating immutably:\n<code>glTexStorage2D(GL_TEXTURE_2D, 0, GL_R32UI, 3072, 2048);</code></p>\n\n<p>And mutably:\n<code>glTexImage2D(GL_TEXTURE_2D, 0, GL_R32UI, 3072, 2048, 0, GL_RED, GL_UNSIGNED_INT, textureData);</code></p>\n\n<p>I tried signed int too, the same thing. I also checked with NSight VS edition, for UINT 2D textures, my max resolution is 16384x16384, so that's not the issue. Also, according to NSight, uint textures are fully supported by the OpenGL driver.</p>\n\n<p>What am I missing here?</p>\n\n<p>Minimum reproducable version:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;GL/glew.h&gt;\n#include &lt;SDL.h&gt;\n\nvoid OGLErrorCheck()\n{\n    const GLenum errorCode = glGetError();\n    if (errorCode != GL_NO_ERROR)\n    {\n        const GLubyte* const errorString = gluErrorString(errorCode);\n        std::cout &lt;&lt; errorString;\n    }\n}\n\nint main(int argc, char* argv[])\n{    \n    glewInit();\n    glTexImage2D(GL_TEXTURE_2D, 0, GL_R32UI, 3072, 2048, 0, GL_RED, GL_UNSIGNED_INT, nullptr);\n    OGLErrorCheck();\n    getchar();\n    return 0;\n}\n</code></pre>\n\n<p>This yields <code>GL_INVALID_OPERATION</code>.\nThis is linked with the latest SDL and GLEW, both free software, available for download at <a href=\"https://www.libsdl.org/\" rel=\"nofollow noreferrer\">https://www.libsdl.org/</a> and <a href=\"http://glew.sourceforge.net/\" rel=\"nofollow noreferrer\">http://glew.sourceforge.net/</a> respectively.</p>\n"}, {"tags": ["c++", "data-structures", "queue", "deque"], "comments": [{"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 2, "creation_date": 1577787990, "post_id": 59542801, "comment_id": 105254575, "body": "Would be helpful if you specify what compiler you used for this finding"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 7, "creation_date": 1577789155, "post_id": 59542801, "comment_id": 105255047, "body": "Are you testing a unoptimized debug build or an optimized release build? What are your compiler flags/options?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 2, "creation_date": 1577789341, "post_id": 59542801, "comment_id": 105255123, "body": "Can you supply the minimum code used to make the timings and the compiler settings used to compile the code?"}], "answers": [{"tags": [], "owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "is_accepted": true, "score": 8, "last_activity_date": 1577791750, "last_edit_date": 1577791750, "creation_date": 1577789997, "answer_id": 59543187, "question_id": 59542801, "link": "https://stackoverflow.com/questions/59542801/why-is-deque-faster-than-queue/59543187#59543187", "title": "Why is deque faster than queue?", "body": "<p>From <a href=\"https://en.cppreference.com/w/cpp/container/queue\" rel=\"nofollow noreferrer\">cppreference.com: std::queue</a> </p>\n\n<pre><code>template&lt;\n    class T,\n    class Container = std::deque&lt;T&gt;\n&gt; class queue;\n</code></pre>\n\n<blockquote>\n  <p><code>Container</code> - The type of the underlying container to use to store the elements.</p>\n</blockquote>\n\n<p>So <code>std::queue</code> - by default - uses <code>std::deque</code>  as its internal container, so it can only be at best as fast as <code>std::deque</code> (or the underlying container in general), and because being a wrapper it is - depending on the optimization the compiler can do - slower. So if you correctly measure a 20% slowdown, then you measure how good the compiler is in optimize the wrapper code away at the given optimization level.</p>\n\n<p>As <code>std::queue</code> exists to guarantee a FIFO usage, by only exposing these functions, I doubt - but I can't test it right now - that the slow down is that drastically with optimizations turned on. If it is I would consider that as a bug/defect of the capabilities of the compiler or library implementation. </p>\n"}], "owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 443, "favorite_count": 0, "accepted_answer_id": 59543187, "answer_count": 1, "score": 2, "last_activity_date": 1577811052, "creation_date": 1577787888, "last_edit_date": 1577811052, "question_id": 59542801, "link": "https://stackoverflow.com/questions/59542801/why-is-deque-faster-than-queue", "title": "Why is deque faster than queue?", "body": "<p>I have the following working codes (g++ 8.2 , the C++17 standard.)</p>\n\n<pre><code>    queue&lt;TreeNode*&gt; q{};\n\n    q.push(root);\n    q.push(nullptr);\n    int sum = root -&gt; val;\n    while (!q.empty()) {\n        TreeNode *n = q.front();\n        q.pop();\n\n        if (n != nullptr) {\n            sum += n-&gt;val;\n            if (n-&gt; left != nullptr) q.push(n-&gt;left);\n            if (n-&gt; right != nullptr) q.push(n-&gt;right);   \n        } else {\n            if (q.empty()) break;\n            q.push(nullptr);\n            sum = 0;\n        }\n\n    }\n    return sum;\n</code></pre>\n\n<p>Then I replaced <code>queue&lt;TreeNode*&gt;</code> with <code>deque&lt;TreeNode*&gt;</code>. It turned out the speed improved at least 20%. Why is <code>deque&lt;TreeNode*&gt;</code> so much faster than <code>queue&lt;TreeNode*&gt;</code>? </p>\n"}, {"tags": ["c++", "c++11", "stl", "set"], "comments": [{"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1577788195, "post_id": 59542786, "comment_id": 105254673, "body": "using comma operator? <code>Monitor obj ((vect1.insert( make_pair(10,20) ), vect1));</code> ?"}, {"owner": {"reputation": 223, "user_id": 3522354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442239e9d9a044f6703526ec86ab91a8?s=128&d=identicon&r=PG&f=1", "display_name": "user3522354", "link": "https://stackoverflow.com/users/3522354/user3522354"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1577788273, "post_id": 59542786, "comment_id": 105254708, "body": "As i mentioned , during construction of object insertion should have happened. So no need here to populate the vector and pass to the object."}, {"owner": {"reputation": 223, "user_id": 3522354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442239e9d9a044f6703526ec86ab91a8?s=128&d=identicon&r=PG&f=1", "display_name": "user3522354", "link": "https://stackoverflow.com/users/3522354/user3522354"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1577788451, "post_id": 59542786, "comment_id": 105254775, "body": "@max66 : you mean to say extra parameter needs to be passed as vector."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 1, "creation_date": 1577788627, "post_id": 59542786, "comment_id": 105254849, "body": "Sorry but isn&#39;t clear to me what do you want. You want a <code>Monitor</code> constructor that receive the values or you want a constructor that receive a vector that is populated inside the construction call?"}, {"owner": {"reputation": 223, "user_id": 3522354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442239e9d9a044f6703526ec86ab91a8?s=128&d=identicon&r=PG&f=1", "display_name": "user3522354", "link": "https://stackoverflow.com/users/3522354/user3522354"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1577788854, "post_id": 59542786, "comment_id": 105254952, "body": "Thanks max66, it works for me. I wanted to have constructor that recieve a vector that is populated inside the constructor call."}, {"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 0, "creation_date": 1577789370, "post_id": 59542786, "comment_id": 105255135, "body": "There is no vector in your code."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 1, "last_activity_date": 1577789298, "creation_date": 1577789298, "answer_id": 59543057, "question_id": 59542786, "link": "https://stackoverflow.com/questions/59542786/not-able-to-to-do-set-element-insertion-inside-constructor/59543057#59543057", "title": "Not able to to do set element insertion inside constructor", "body": "<p>You can use constructor of <code>std::set</code>:</p>\n\n<pre><code>Monitor obj({{10,20}, {30,49}, {50,60}, {70,80}});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 1, "last_activity_date": 1577789667, "last_edit_date": 1577789667, "creation_date": 1577789335, "answer_id": 59543065, "question_id": 59542786, "link": "https://stackoverflow.com/questions/59542786/not-able-to-to-do-set-element-insertion-inside-constructor/59543065#59543065", "title": "Not able to to do set element insertion inside constructor", "body": "<blockquote>\n  <p>I wanted to have constructor that recieve a vector that is populated inside the constructor call. </p>\n</blockquote>\n\n<p>If the vector (or set or whichever) can be a temporary, you can simply create and populate it inside the construction; something as</p>\n\n<pre><code>Monitor obj1{{{10.0, 20.0}, {30.0, 49.0}, {50.0, 60.0}}};\n</code></pre>\n\n<p>otherwise, if the set must be defined before (as in your example), the solution I see is use the comma operator to populate the set and discard the resulting iterators</p>\n\n<pre><code>std::set&lt;std::pair&lt;double,double&gt;&gt; vect1;\n\n// ..........V  &lt;-- observe the parentheses\nMonitor obj2{(vect1.insert({10.0, 20.0}), // insert value and discard iterator\n              vect1.insert({30.0, 49.0}), // insert value and discard iterator\n              vect1.insert({50.0, 60.0}), // insert value and discard iterator\n              vect1)}; // pass the populated vect1 to constructor\n// ................^  &lt;-- closing parentheses\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "is_accepted": false, "score": 1, "last_activity_date": 1577789391, "creation_date": 1577789391, "answer_id": 59543076, "question_id": 59542786, "link": "https://stackoverflow.com/questions/59542786/not-able-to-to-do-set-element-insertion-inside-constructor/59543076#59543076", "title": "Not able to to do set element insertion inside constructor", "body": "<p>return type by <a href=\"https://en.cppreference.com/w/cpp/container/set/insert\" rel=\"nofollow noreferrer\">set::insert</a> is not matching argument of the constructor <code>Monitor(const set&lt; pair &lt;double,double&gt;&gt;&amp;)</code> instead pass the <code>set</code> something like below,</p>\n\n<pre><code>int main()\n{\n    set&lt; pair &lt;double, double&gt; &gt; vect1;\n    vect1.insert(make_pair(10, 20));\n    Monitor obj(vect1);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "is_accepted": false, "score": 1, "last_activity_date": 1577789789, "creation_date": 1577789789, "answer_id": 59543146, "question_id": 59542786, "link": "https://stackoverflow.com/questions/59542786/not-able-to-to-do-set-element-insertion-inside-constructor/59543146#59543146", "title": "Not able to to do set element insertion inside constructor", "body": "<blockquote>\n<pre><code> Monitor obj (vect1.insert( make_pair(10,20) ));\n</code></pre>\n</blockquote>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/container/set/insert\" rel=\"nofollow noreferrer\"><code>insert</code></a> returns a <code>std::pair&lt;iterator,bool&gt;</code>, not a <code>std::set&lt;std::pair&lt;double,double&gt;&gt;</code> which is expected by the user defined constructor of <code>Monitor</code>.</p>\n\n<p>According to the user defined <code>Monitor</code> constructor, you need to pass a <code>std::set</code> as an argument. To do so, you can simply pass the <code>std::pair</code> objects to the constructor of <code>std::set</code>:</p>\n\n<pre><code>Monitor obj({{10,20}, {11,21} /*, ...*/});\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 3522354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/442239e9d9a044f6703526ec86ab91a8?s=128&d=identicon&r=PG&f=1", "display_name": "user3522354", "link": "https://stackoverflow.com/users/3522354/user3522354"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1577789789, "creation_date": 1577787789, "last_edit_date": 1577787949, "question_id": 59542786, "link": "https://stackoverflow.com/questions/59542786/not-able-to-to-do-set-element-insertion-inside-constructor", "title": "Not able to to do set element insertion inside constructor", "body": "<p>I am getting compilation error while inserting values inside constructor Monitor counstructor.\nCould you suggest what could be approach for the same as I need to populate this\nvector during class instantiation. It works fine with below approach but I don't want to populate the vector separately.</p>\n\n<pre><code>   vect1.insert( make_pair(10,20) );\n   vect1.insert( make_pair(30,49) );\n   vect1.insert( make_pair(50,60) );\n   vect1.insert( make_pair(70,80) );\n</code></pre>\n\n<h2>below is the code snippet</h2>\n\n<pre><code>  #include &lt;iostream&gt;\n  #include &lt;vector&gt;\n  #include&lt;algorithm&gt;\n  #include&lt;memory&gt;\n  #include &lt;set&gt;\n  using namespace std;\n  class Monitor\n  {\n  public:\n  virtual ~Monitor() = default;\n  explicit Monitor(\n  const set&lt; pair &lt;double,double&gt; &gt; &amp;vect1\n  )\n  {  \n\n     for (auto &amp;itr : vect1 ) \n      { \n         std::cout&lt;&lt;\"value1 =\"&lt;&lt;itr.first&lt;&lt;endl;\n         std::cout&lt;&lt;\"value2=\"&lt;&lt;itr.second&lt;&lt;endl;\n      }       \n  }\n\n };\n\nint main()\n{  set&lt; pair &lt;double,double&gt; &gt; vect1;\n   Monitor obj (vect1.insert( make_pair(10,20) ));\n\n return 0;   \n}\n</code></pre>\n\n<h2>compilation error</h2>\n\n<pre><code>error: no matching function for call to \u2018Monitor::Monitor(std::pair &gt;, bool&gt;)\u2019\n    Monitor obj (vect1.insert( make_pair(10,20) ));\n</code></pre>\n"}, {"tags": ["c++", "string", "c++20", "string-view"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1577788530, "post_id": 59542785, "comment_id": 105254816, "body": "Take a <i>&quot;char_sequence&quot;</i>, Something like <a href=\"https://stackoverflow.com/questions/58866964/ensure-that-char-pointers-always-point-to-the-same-string-literal/58868005#58868005\">operator &quot;&quot;_cs</a> might help."}, {"owner": {"reputation": 7277, "user_id": 6205379, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dPsLh.png?s=128&g=1", "display_name": "Timo", "link": "https://stackoverflow.com/users/6205379/timo"}, "edited": false, "score": 1, "creation_date": 1577800605, "post_id": 59542785, "comment_id": 105258894, "body": "What about making 2 similar types. One with <code>std::string_view</code> and one with <code>std::string</code>? Use the <code>std::string_view</code> type at compile time and the <code>std::string</code> type else. Maybe add an implicit conversion from compile time to run time type."}, {"owner": {"reputation": 965, "user_id": 7030542, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/Un6pK.jpg?s=128&g=1", "display_name": "TheArchitect", "link": "https://stackoverflow.com/users/7030542/thearchitect"}, "edited": false, "score": 0, "creation_date": 1577807568, "post_id": 59542785, "comment_id": 105261189, "body": "to use the constexpr you need to have in mind the very end value of the constexpr element need to be know by compiler, otherwise it can&#39;t be a const."}], "answers": [{"comments": [{"owner": {"reputation": 374849, "user_id": 734069, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a356923f858fbe363dad1dc566837fc6?s=128&d=identicon&r=PG", "display_name": "Nicol Bolas", "link": "https://stackoverflow.com/users/734069/nicol-bolas"}, "edited": false, "score": 2, "creation_date": 1577802377, "post_id": 59545205, "comment_id": 105259423, "body": "&quot;<i>note that std::string will be useable in a constexpr context starting with C++20</i>&quot; Except that such strings cannot survive outside of a <code>constexpr</code> context."}], "tags": [], "owner": {"reputation": 14474, "user_id": 2064761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GoIUL.png?s=128&g=1", "display_name": "Michael Kenzel", "link": "https://stackoverflow.com/users/2064761/michael-kenzel"}, "is_accepted": false, "score": 2, "last_activity_date": 1578062692, "last_edit_date": 1578062692, "creation_date": 1577801768, "answer_id": 59545205, "question_id": 59542785, "link": "https://stackoverflow.com/questions/59542785/store-a-string-in-a-constexpr-struct/59545205#59545205", "title": "store a string in a constexpr struct", "body": "<p>This is not really a question of safety as much as it is a question of semantics. Nothing prevents you from doing the exact same thing at compiletime:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>constexpr A blub()\n{\n    char str[] = \"asdf\";\n    return { str };\n}\n</code></pre>\n\n<p>Since there is no way to ever call this function in a core constant expression, a program that contains code like this is ill-formed, no diagnostic required <a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.constexpr#5\" rel=\"nofollow noreferrer\">[dcl.constexpr]/5</a>, which really isn't any better than invoking undefined behavior at runtime&hellip;</p>\n\n<p>Compiletime or not, you have to ask yourself the question: Should this struct <em>own</em> a string or <em>refer</em> to an existing string? I would strongly recommend against making your struct own a string in a runtime context and refer to an existing string in a compiletime context, even if you find a way to pull this off in theory. We're talking about completely different semantics here. Completely different semantics should generally better be modeled by different types rather than one type that completeley changes its meaning depending on context&hellip;</p>\n\n<p>If you want to make a constexpr struct own a string, you'll currently have to resort to some constexpr string implementation such as, e.g., <a href=\"https://github.com/lefticus/constexpr_all_the_things/blob/master/src/include/cx_string.h\" rel=\"nofollow noreferrer\">this one</a>. Since your question is tagged with <a href=\"/questions/tagged/c%2b%2b20\" class=\"post-tag\" title=\"show questions tagged &#39;c++20&#39;\" rel=\"tag\">c++20</a>, note that <code>std::string</code> will be useable in a constexpr context starting with C++20 <a href=\"http://eel.is/c++draft/basic.string\" rel=\"nofollow noreferrer\">[basic.string]</a>. So, in C++20, you will be able to just have the member be an <code>std::string</code>&hellip;</p>\n"}, {"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 1, "last_activity_date": 1577908691, "creation_date": 1577908691, "answer_id": 59555678, "question_id": 59542785, "link": "https://stackoverflow.com/questions/59542785/store-a-string-in-a-constexpr-struct/59555678#59555678", "title": "store a string in a constexpr struct", "body": "<p>You might do:</p>\n\n<pre><code>template&lt;typename Char, Char... Cs&gt;\nstruct CharSeq\n{\n    static constexpr const Char s[] = {Cs..., 0}; // The unique address\n};\n\n// That template uses the extension\ntemplate&lt;typename Char, Char... Cs&gt;\nconstexpr CharSeq&lt;Char, Cs...&gt; operator\"\" _cs() {\n    return {};\n}\n</code></pre>\n\n<p>See my answer from <a href=\"https://stackoverflow.com/a/50289055/2684539\">String-interning at compiletime for profiling</a> to have <code>MAKE_STRING</code> macro if you cannot used the extension (Really more verbose, and hard coded limit for accepted string length).</p>\n\n<p>Then</p>\n\n<pre><code>struct A\n{\n    template &lt;char ... Cs&gt; \n    constexpr A(CharSeq&lt;char, Cs...&gt;) : m_name(CharSeq&lt;char, Cs...&gt;::s) {}\n\n    constexpr auto name(){ return m_name; }\n\n    std::string_view m_name;\n};\n</code></pre>\n\n<p>With only valid usages similar to:</p>\n\n<pre><code>A a = {\"Hello\"_cs};\nconstexpr A b = {\"World\"_cs};\n</code></pre>\n"}], "owner": {"reputation": 7427, "user_id": 293195, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/seTSX.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/293195/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 1, "accepted_answer_id": 59555678, "answer_count": 2, "score": 2, "last_activity_date": 1616154431, "creation_date": 1577787779, "last_edit_date": 1616154431, "question_id": 59542785, "link": "https://stackoverflow.com/questions/59542785/store-a-string-in-a-constexpr-struct", "title": "store a string in a constexpr struct", "body": "<p>Is it possible to store a string in a <code>constexpr</code> struct:</p>\n<p>So far I could only come up with:</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>struct A\n{\n    constexpr A(std::string_view n): m_name(n) {}   \n    constexpr auto name(){ return m_name; }\n\n    std::string_view m_name; // This might become dangling!!\n} \n\n\n</code></pre>\n<p>which is cleary only a good idea if this class is <strong>only</strong> used like this</p>\n<pre><code>A a = {&quot;Hello&quot;};\nconstexpr A b = {&quot;World&quot;};\n</code></pre>\n<p>and not like this</p>\n<pre><code>auto makeA(std::string n) { return A{n}; }\nA a = makeA(&quot;Hello&quot;); // Dangling internal std::string_view\n</code></pre>\n<p>I need the <code>constexpr</code> to construct the struct at compile time.\nIs it possible to make this safer at run-time, because with <code>std::string_view</code>, its not.</p>\n"}, {"tags": ["c++", "visual-studio", "googletest"], "answers": [{"tags": [], "owner": {"reputation": 2333, "user_id": 6783775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d399a7e1545b42ae65bca9b4568099a?s=128&d=identicon&r=PG", "display_name": "rveerd", "link": "https://stackoverflow.com/users/6783775/rveerd"}, "is_accepted": true, "score": 0, "last_activity_date": 1587365704, "last_edit_date": 1587365704, "creation_date": 1578670936, "answer_id": 59684790, "question_id": 59542579, "link": "https://stackoverflow.com/questions/59542579/adding-dependencies-to-googletest/59684790#59684790", "title": "Adding dependencies to googletest?", "body": "<p>Adding your application as a reference to your unit tests does not help Visual Studio find the relevant C++ sources and external libraries. You have to add the relevant application C++ sources to your test project (Add existing item), specify the path of your application include files and add any required external libraries.</p>\n\n<p>Using a reference is useful when the project under test is a library. VS will then automatically (re)build the library when you run the tests.</p>\n"}], "owner": {"reputation": 17, "user_id": 11555172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6f2f4f0c43d826eb7485e48735d8fb?s=128&d=identicon&r=PG&f=1", "display_name": "lmnml", "link": "https://stackoverflow.com/users/11555172/lmnml"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 59684790, "answer_count": 1, "score": 0, "last_activity_date": 1587365704, "creation_date": 1577786771, "question_id": 59542579, "link": "https://stackoverflow.com/questions/59542579/adding-dependencies-to-googletest", "title": "Adding dependencies to googletest?", "body": "<p>I have a win32 console application project in c++ with several external libraries being used.</p>\n\n<p>I created a Google Test project and added my original project as a reference, however the test project keeps saying several files are missing when I build it.</p>\n\n<p>Is adding my project as a reference not enough or do I need to individually add the files and external libraries to my test project?</p>\n\n<p>Or is there a workaround? I'm using VS2017</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "boost", "codeblocks", "libraries", "undefined-reference"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1577786613, "post_id": 59542373, "comment_id": 105254093, "body": "<a href=\"https://stackoverflow.com/q/12573816/5910058\">What is an undefined reference/unresolved external symbol error and how do I fix it?</a>"}, {"owner": {"reputation": 51, "user_id": 11958810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a90c36d3e95b9e210e8f88a00e7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/11958810/david"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1577786891, "post_id": 59542373, "comment_id": 105254183, "body": "I know what an undefined reference is, I&#39;d like some tangible help if possible. I&#39;ve done everything possible to provide informations on what I&#39;m doing, and I&#39;m happy to provide more on request."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 11958810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a90c36d3e95b9e210e8f88a00e7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/11958810/david"}, "edited": false, "score": 0, "creation_date": 1578223266, "post_id": 59595960, "comment_id": 105362786, "body": "Thank you for your answer! You are right on the fact that I&#39;ve used different compilers, so probably that is the cause.  I&#39;m using Visual Studio now, and as soon as I get confident with it, I&#39;ll try again, this time I&#39;ll be very careful to use the same compiler and I&#39;ll see if the error pops up again"}], "tags": [], "owner": {"reputation": 179, "user_id": 12653791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f883b02216de0fcfb73a48c652ea38d9?s=128&d=identicon&r=PG&f=1", "display_name": "chwala", "link": "https://stackoverflow.com/users/12653791/chwala"}, "is_accepted": false, "score": 1, "last_activity_date": 1578182989, "creation_date": 1578182989, "answer_id": 59595960, "question_id": 59542373, "link": "https://stackoverflow.com/questions/59542373/trying-to-use-boost-library-on-codeblocks-gives-an-undefined-reference/59595960#59595960", "title": "Trying to use Boost library on Codeblocks gives an undefined reference", "body": "<p>Undefined reference to _Unwind_Resume suggests that you build Boost with different compiler than your project or you choose different type of exception handling.</p>\n\n<p>Check if you're using the same compiler in both cases.</p>\n\n<p>It might be also caused by building your project using gcc instead of g++. You should check that as well. In this case switch to g++ or explicitly link against libstdc++, by adding <code>-lstdc++</code> to compiler flags.</p>\n"}], "owner": {"reputation": 51, "user_id": 11958810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1a90c36d3e95b9e210e8f88a00e7ec9?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/11958810/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1578182989, "creation_date": 1577785752, "question_id": 59542373, "link": "https://stackoverflow.com/questions/59542373/trying-to-use-boost-library-on-codeblocks-gives-an-undefined-reference", "title": "Trying to use Boost library on Codeblocks gives an undefined reference", "body": "<p>I'm trying to use the boost library on CodeBlocks, but I'm new to it and I can't seem to be able to link it properly.</p>\n\n<p>The boost folder(version 1.70) is in the same folder of my main.cpp, and the library I'm trying to access is libboost_filesystem-mgw92-mt-x64-1_70.a;</p>\n\n<p>Here is my code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/filesystem.hpp&gt;\n\n\nint main()\n{\n\n    boost::filesystem::path l_path(\"C:\\\\Hello.txt\");\n    if(boost::filesystem::exists(l_path))\n        {\n        std::cout&lt;&lt;\"exists!\"&lt;&lt;std::endl;\n        }\n        else\n        {\n        std::cout&lt;&lt;\"no\";\n        }\n    return 0;\n}\n</code></pre>\n\n<p>And some screenshots of my settings and of the error</p>\n\n<p><a href=\"https://i.stack.imgur.com/1Ttqs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Ttqs.png\" alt=\"The linker settings\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/5tx5x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5tx5x.png\" alt=\"The search Directories for compiler an linker(both the same)\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/pzkbF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pzkbF.png\" alt=\"And a screenshot of the error\"></a></p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "templates", "operator-overloading"], "answers": [{"comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577786760, "post_id": 59542487, "comment_id": 105254137, "body": "I was just about to say that <a href=\"https://ideone.com/j9SAwJ\" rel=\"nofollow noreferrer\">using <code>size_t</code> works</a> but you beat me to it."}, {"owner": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 1, "creation_date": 1577786817, "post_id": 59542487, "comment_id": 105254160, "body": "Great! out of curisotiy: calling <code>operator&lt;&lt;&lt;4&gt;(std::cout, row) &lt;&lt; std::endl;</code> \u2013 no template deduction involved \u2013 works."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "reply_to_user": {"reputation": 19910, "user_id": 8012646, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/T8yOZ.png?s=128&g=1", "display_name": "\u30ed\u30fc\u30a6", "link": "https://stackoverflow.com/users/8012646/%e3%83%ad%e3%83%bc%e3%82%a6"}, "edited": false, "score": 0, "creation_date": 1577787009, "post_id": 59542487, "comment_id": 105254223, "body": "@\u7720\u308a\u30cd\u30ed\u30af - exactly: because no deduction is involved."}], "tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 2, "last_activity_date": 1577787844, "last_edit_date": 1577787844, "creation_date": 1577786247, "answer_id": 59542487, "question_id": 59542320, "link": "https://stackoverflow.com/questions/59542320/how-to-provide-an-overload-for-the-stream-output-operator-for-a-template-usi/59542487#59542487", "title": "How to provide an overload for the stream output operator &lt;&lt; for a template &#39;using&#39; type alias?", "body": "<blockquote>\n  <p>Does anybody know why this does not compile and how to fix it? </p>\n</blockquote>\n\n<p>Yes: the problem is that you declare <code>Row</code> as receiving an <code>int</code></p>\n\n<pre><code>template &lt;int N&gt;\nusing Row = std::array&lt;int, N&gt;;\n</code></pre>\n\n<p>and try to intercept it's size in the operator as an <code>int</code> when <code>std::array</code> receive (for second argument) a <code>std::size_t</code>.</p>\n\n<p>So your <code>Row&lt;4&gt;</code> (that is <code>std::array&lt;int, 4u&gt;</code> where <code>4u</code> is a <code>std::size_t</code>) doesn't matches your operator because the operator looks for a <code>std::array&lt;int, N&gt;</code> where <code>N</code> is an <code>int</code>. </p>\n\n<p>Fix: define <code>Row</code> as receiving a <code>std::size_t</code> (optional, just for clarity) and deduce a <code>std::size_t</code> in the operator (mandatory).</p>\n\n<pre><code>template &lt;std::size_t N&gt; // &lt;--- you have to intercept a std::size_t\nstd::ostream&amp; operator &lt;&lt;(std::ostream&amp; o, const Row&lt;N&gt;&amp; mc) {\n    for (auto i : mc)\n        o &lt;&lt; i &lt;&lt; \" \";\n    return o;\n}\n</code></pre>\n\n<p>Alternative C++17 fix: intercept the operator size as <code>auto</code></p>\n\n<pre><code>template &lt;auto N&gt; // &lt;--- auto can intercept a std::size_t\nstd::ostream&amp; operator &lt;&lt;(std::ostream&amp; o, const Row&lt;N&gt;&amp; mc) {\n    for (auto i : mc)\n        o &lt;&lt; i &lt;&lt; \" \";\n    return o;\n}\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 1992685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3dbd1a57b7bd3993e219b25d8156528?s=128&d=identicon&r=PG", "display_name": "jaykay", "link": "https://stackoverflow.com/users/1992685/jaykay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 59542487, "answer_count": 1, "score": 2, "last_activity_date": 1577787844, "creation_date": 1577785478, "question_id": 59542320, "link": "https://stackoverflow.com/questions/59542320/how-to-provide-an-overload-for-the-stream-output-operator-for-a-template-usi", "title": "How to provide an overload for the stream output operator &lt;&lt; for a template &#39;using&#39; type alias?", "body": "<p>Does anybody know why this does not compile and how to fix it? Somehow the compiler cannot find the correct template instantiation for the stream operator, but I don't understand why.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;array&gt;\n#include &lt;iostream&gt;\n\ntemplate &lt;int N&gt;\nusing Row = std::array&lt;int, N&gt;;\n\ntemplate &lt;int N&gt;\nstd::ostream&amp; operator &lt;&lt;(std::ostream&amp; o, const Row&lt;N&gt;&amp; mc) {\n    for (auto i : mc)\n        o &lt;&lt; i &lt;&lt; \" \";\n    return o;\n}\n\nint main(int argc, char *argv[]) {\n    Row&lt;4&gt; row {};\n    std::cout &lt;&lt; row &lt;&lt; std::endl;\n}\n</code></pre>\n"}, {"tags": ["c++", "stdvector"], "comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1577785560, "post_id": 59542267, "comment_id": 105253752, "body": "There are many questions/answers on this site showing how to use a special allocator that does not initialize."}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1577786293, "post_id": 59542267, "comment_id": 105253985, "body": "@MarcGlisse Do you mean <a href=\"https://stackoverflow.com/a/21028912/4944425\">this</a>?"}, {"owner": {"reputation": 61, "user_id": 12631349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2956c67c83003604b3a1ab4be40f6f?s=128&d=identicon&r=PG&f=1", "display_name": "marco belli", "link": "https://stackoverflow.com/users/12631349/marco-belli"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1577790743, "post_id": 59542267, "comment_id": 105255626, "body": "@Bob__ thank you for pointing me to the right post :)"}, {"owner": {"reputation": 61, "user_id": 12631349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2956c67c83003604b3a1ab4be40f6f?s=128&d=identicon&r=PG&f=1", "display_name": "marco belli", "link": "https://stackoverflow.com/users/12631349/marco-belli"}, "reply_to_user": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "edited": false, "score": 0, "creation_date": 1577800723, "post_id": 59542267, "comment_id": 105258940, "body": "@Bob__ your comment and the comment of Marc were very helpful to solve my problem. If you or him create an easy answer, I can give you credit for it"}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 12631349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2956c67c83003604b3a1ab4be40f6f?s=128&d=identicon&r=PG&f=1", "display_name": "marco belli", "link": "https://stackoverflow.com/users/12631349/marco-belli"}, "edited": false, "score": 0, "creation_date": 1577787286, "post_id": 59542601, "comment_id": 105254313, "body": "because at runtime not push_back is used at all, only std::vector::operator[] is used at runtime. Max speed is required ar runtime and push_back is not an alternative"}, {"owner": {"reputation": 769, "user_id": 7592072, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e6115e8b9fc628e6363dea9200d9057?s=128&d=identicon&r=PG&f=1", "display_name": "Nikita Smirnov", "link": "https://stackoverflow.com/users/7592072/nikita-smirnov"}, "edited": false, "score": 1, "creation_date": 1577789449, "post_id": 59542601, "comment_id": 105255165, "body": "The answer is valid. <code>reserve</code> reserves the required amount of memory. That&#39;s all you need. And you can use or <code>push_back</code> either <code>operator[]</code> later, while vector size is smaller than <code>_elements</code>, <code>push_back</code> does no memory allocations, which can be slow at runtime."}, {"owner": {"reputation": 61, "user_id": 12631349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2956c67c83003604b3a1ab4be40f6f?s=128&d=identicon&r=PG&f=1", "display_name": "marco belli", "link": "https://stackoverflow.com/users/12631349/marco-belli"}, "edited": false, "score": 0, "creation_date": 1577790600, "post_id": 59542601, "comment_id": 105255572, "body": "Using only reserve and [] operator will not change the size of the vector and this will break all other piece of code running in non speed critical section of code. The solution of using reserve and then accessing this area with [] simply break all the std::vector api"}, {"owner": {"reputation": 21, "user_id": 6319948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf84b302a4312ffaad0f1f712f7a1c9?s=128&d=identicon&r=PG&f=1", "display_name": "sfs", "link": "https://stackoverflow.com/users/6319948/sfs"}, "edited": false, "score": 0, "creation_date": 1577790874, "post_id": 59542601, "comment_id": 105255661, "body": "The point being made is that using push_back on an vector that dose not have to allocate memory is not significantly slower than using operator[] on the vector, thus using only reserve and then push_back when actually initializing the vector is as fast as using resize and then accessing with operator[]. Difference being that the memory in the first case only gets written to once, and not twice as with resize (since it will fill with default values because RAII)"}, {"owner": {"reputation": 61, "user_id": 12631349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2956c67c83003604b3a1ab4be40f6f?s=128&d=identicon&r=PG&f=1", "display_name": "marco belli", "link": "https://stackoverflow.com/users/12631349/marco-belli"}, "edited": false, "score": 0, "creation_date": 1577791664, "post_id": 59542601, "comment_id": 105255918, "body": "In my code I do not push back. It&#39;s an hash table, I don&#39;t push_back data, but write the data at index calculated by hash function.  I need to allocate the table at startup and then accessing at random address later."}], "tags": [], "owner": {"reputation": 21, "user_id": 6319948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bf84b302a4312ffaad0f1f712f7a1c9?s=128&d=identicon&r=PG&f=1", "display_name": "sfs", "link": "https://stackoverflow.com/users/6319948/sfs"}, "is_accepted": false, "score": 0, "last_activity_date": 1577786887, "creation_date": 1577786887, "answer_id": 59542601, "question_id": 59542267, "link": "https://stackoverflow.com/questions/59542267/speedup-creation-of-big-stdvector/59542601#59542601", "title": "speedup creation of big std::vector", "body": "<p>Why do you need the resize anyway? As I see it, the reserve call dose all you want. It allocates memory for the specific size. \nSince you want to initialize it later on,just use push_back to write data to it.\nSince no allocation has to be done, push_back has basically no performance penalty compared to only writing to a vector element.</p>\n"}], "owner": {"reputation": 61, "user_id": 12631349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b2956c67c83003604b3a1ab4be40f6f?s=128&d=identicon&r=PG&f=1", "display_name": "marco belli", "link": "https://stackoverflow.com/users/12631349/marco-belli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1577796261, "creation_date": 1577785213, "last_edit_date": 1577796261, "question_id": 59542267, "link": "https://stackoverflow.com/questions/59542267/speedup-creation-of-big-stdvector", "title": "speedup creation of big std::vector", "body": "<p>In my chess engine codebase I'm using a very big hash table, the hashtable size can be up to 128 GB.\nThe hast table is a big array of bucket of size 4. The code to manage this big table is done with STL std::vector. I'm happy with the performance of the code but I have some problem when initializing the structure.</p>\n\n<p>the structure of the hash table is the following:</p>\n\n<pre><code>class ttEntry\n{\nprivate:\n\n    signed int key:32;          /*! 32 bit for the upper part of the key*/\n    signed int packedMove:16;   /*! 16 bit for the move*/\n    signed int depth:16;        /*! 16 bit for depth*/\n    signed int value:23;        /*! 23 bit for the value*/\n    signed int generation:8;        /*! 8 bit for the generation id*/\n    signed int staticValue:23;  /*! 23 bit for the static evalutation (eval())*/\n    signed int type:3;          /*! 2 bit for the type of the entry*/\n                                /*  144 bits total = 16 bytes*/\npublic:\n    explicit ttEntry(unsigned int _Key, Score _Value, unsigned char _Type, signed short int _Depth, unsigned short _Move, Score _StaticValue, unsigned char _gen): key(_Key), packedMove(_Move), depth(_Depth), value(_Value), generation(_gen), staticValue(_StaticValue), type(_Type){}\n    explicit ttEntry(){}    \n\n    ...\n    ...\n};\n\nusing ttCluster = std::array&lt;ttEntry, 4&gt;;\n\n\n\nclass transpositionTable\n{\nprivate:\n    std::vector&lt;ttCluster&gt; _table;\n    ....\n    ....\n}\n</code></pre>\n\n<p>my code for allocating the space is the following:</p>\n\n<pre><code>uint64_t transpositionTable::setSize(unsigned long int mbSize)\n{\n\n    uint64_t size = (uint64_t)((((uint64_t)mbSize) &lt;&lt; 20) / sizeof(ttCluster));\n    _elements = size;\n\n    _table.clear();\n    _table.shrink_to_fit();\n    try\n    {\n        _table.reserve(_elements);\n        _table.resize(_elements); // big bottleneck\n    }\n    catch(...)\n    {\n        std::cerr &lt;&lt; \"Failed to allocate \" &lt;&lt; mbSize&lt;&lt; \"MB for transposition table.\" &lt;&lt; std::endl;\n        exit(EXIT_FAILURE);\n    }\n    return _elements * 4;\n}\n</code></pre>\n\n<p>To initialize the table with 128GB of ram 108 seconds are needed. I'm not interested in initializing the memory with known value but only to allocate the space and have a long enough std::vector.</p>\n\n<p>I know I can rewrite the code with good old C code and malloc, but I'd like to work with modern std::vector.</p>\n\n<p>Any idea on how to speedup the code and where I'm doing it wrong?</p>\n\n<hr>\n\n<p>following @MarcGlisse and @Bob__ hint I modified my code to:</p>\n\n<pre><code>\n\n//\n//https://stackoverflow.com/questions/21028299/is-this-behavior-of-vectorresizesize-type-n-under-c11-and-boost-container/21028912#21028912\n//\n// Allocator adaptor that interposes construct() calls to\n// convert value initialization into default initialization.\ntemplate &lt;typename T, typename A=std::allocator&lt;T&gt;&gt;\nclass default_init_allocator : public A {\n  typedef std::allocator_traits&lt;A&gt; a_t;\npublic:\n  template &lt;typename U&gt; struct rebind {\n    using other =\n      default_init_allocator&lt;\n        U, typename a_t::template rebind_alloc&lt;U&gt;\n      &gt;;\n  };\n\n  using A::A;\n\n  template &lt;typename U&gt;\n  void construct(U* ptr)\n    noexcept(std::is_nothrow_default_constructible&lt;U&gt;::value) {\n    ::new(static_cast&lt;void*&gt;(ptr)) U;\n  }\n  template &lt;typename U, typename...Args&gt;\n  void construct(U* ptr, Args&amp;&amp;... args) {\n    a_t::construct(static_cast&lt;A&amp;&gt;(*this),\n                   ptr, std::forward&lt;Args&gt;(args)...);\n  }\n};\n\nclass transpositionTable\n{\nprivate:\n    std::vector&lt;ttCluster, default_init_allocator&lt;ttCluster&gt;&gt; _table;\n...\n...\n</code></pre>\n\n<p>now the resize if faster (less than 1 second for 8GB) and all the elements of the board are 0 filled after a resize. </p>\n\n<p>Thank you guys</p>\n"}, {"tags": ["c++", "linux", "dll", "shared-libraries"], "comments": [{"owner": {"reputation": 301, "user_id": 4287117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec64f958fb4cc3f79c4b7677670d0811?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4287117/siddharth"}, "edited": false, "score": 0, "creation_date": 1578318130, "post_id": 59542254, "comment_id": 105389417, "body": "how about monitoring /proc/pid/smaps to study the allocations done by the libs? Would be a worthy read..."}], "answers": [{"comments": [{"owner": {"reputation": 1026, "user_id": 1972460, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/93230ae9c216d83bacc64a84e652b571?s=128&d=identicon&r=PG", "display_name": "Anson Tan", "link": "https://stackoverflow.com/users/1972460/anson-tan"}, "edited": false, "score": 0, "creation_date": 1578314040, "post_id": 59608044, "comment_id": 105387411, "body": "So, for LInux, doesn&#39;t matter with compiler version also ? My application compiled by compiler version A, while my .so complied by compiler version B, is it still ok ?"}, {"owner": {"reputation": 301, "user_id": 4287117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec64f958fb4cc3f79c4b7677670d0811?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth", "link": "https://stackoverflow.com/users/4287117/siddharth"}, "edited": false, "score": 0, "creation_date": 1578318191, "post_id": 59608044, "comment_id": 105389435, "body": "Yes, as long as they are for the same architecture. For example, we use libpthread, but we don&#39;t compile it. Various other libs for example..."}, {"owner": {"reputation": 626, "user_id": 4690576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a328eeb1bb069c34be414a5e7bcda10?s=128&d=identicon&r=PG", "display_name": "AmeyaVS", "link": "https://stackoverflow.com/users/4690576/ameyavs"}, "reply_to_user": {"reputation": 1026, "user_id": 1972460, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/93230ae9c216d83bacc64a84e652b571?s=128&d=identicon&r=PG", "display_name": "Anson Tan", "link": "https://stackoverflow.com/users/1972460/anson-tan"}, "edited": false, "score": 0, "creation_date": 1578371671, "post_id": 59608044, "comment_id": 105407557, "body": "@AnsonTan I would not recommend mixing different compilers, as code generated across version might not be fully compatible, I have seen issues which are really hard to debug unless you encounter them in a big project."}, {"owner": {"reputation": 1026, "user_id": 1972460, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/93230ae9c216d83bacc64a84e652b571?s=128&d=identicon&r=PG", "display_name": "Anson Tan", "link": "https://stackoverflow.com/users/1972460/anson-tan"}, "reply_to_user": {"reputation": 626, "user_id": 4690576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a328eeb1bb069c34be414a5e7bcda10?s=128&d=identicon&r=PG", "display_name": "AmeyaVS", "link": "https://stackoverflow.com/users/4690576/ameyavs"}, "edited": false, "score": 0, "creation_date": 1578379084, "post_id": 59608044, "comment_id": 105409369, "body": "@AmeyaVS, I can&#39;t , as I distribute the library file (.so), and I have no idea which compiler version that my client used."}, {"owner": {"reputation": 626, "user_id": 4690576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a328eeb1bb069c34be414a5e7bcda10?s=128&d=identicon&r=PG", "display_name": "AmeyaVS", "link": "https://stackoverflow.com/users/4690576/ameyavs"}, "reply_to_user": {"reputation": 1026, "user_id": 1972460, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/93230ae9c216d83bacc64a84e652b571?s=128&d=identicon&r=PG", "display_name": "Anson Tan", "link": "https://stackoverflow.com/users/1972460/anson-tan"}, "edited": false, "score": 0, "creation_date": 1578397248, "post_id": 59608044, "comment_id": 105417454, "body": "@AnsonTan Then probably best would be to build and distribute various builds of your library with explicit compiler versions, and also specifying the base OS used for the build"}], "tags": [], "owner": {"reputation": 52, "user_id": 7591955, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-52OTRE2Ejik/AAAAAAAAAAI/AAAAAAAAAGU/LWj_i_A4seo/photo.jpg?sz=128", "display_name": "Guna Sekaran J", "link": "https://stackoverflow.com/users/7591955/guna-sekaran-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1578294821, "creation_date": 1578294821, "answer_id": 59608044, "question_id": 59542254, "link": "https://stackoverflow.com/questions/59542254/c-dll-heap-memory-allocation-issue/59608044#59608044", "title": "C++ dll heap memory allocation issue", "body": "<p>1) Symbol tables are shared across an entire process in Linux. malloc() for any part of the \n   process is the same as all the other parts. So yes, if all parts of a process access the \n   heap via malloc() et alia then they will share the same heap.</p>\n\n<p>2) but second question i too have bit confusion.</p>\n"}, {"tags": [], "owner": {"reputation": 3820, "user_id": 11375138, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/utXL5.jpg?s=128&g=1", "display_name": "Andrey Chistyakov", "link": "https://stackoverflow.com/users/11375138/andrey-chistyakov"}, "is_accepted": false, "score": 0, "last_activity_date": 1578593420, "creation_date": 1578593420, "answer_id": 59669874, "question_id": 59542254, "link": "https://stackoverflow.com/questions/59542254/c-dll-heap-memory-allocation-issue/59669874#59669874", "title": "C++ dll heap memory allocation issue", "body": "<p>The heap manager is located in static memory of the runtime library (msvcrXXX for Win and crt for Linux). You can use the runtime library in two ways: as static or dynamic. If you link the runtime as static to your own library, then you can't alloc in your library and free in another. But you link the runtime as dynamic, then you can alloc in your library and free in another. </p>\n"}, {"tags": [], "owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "is_accepted": true, "score": 3, "last_activity_date": 1578838969, "creation_date": 1578838969, "answer_id": 59704750, "question_id": 59542254, "link": "https://stackoverflow.com/questions/59542254/c-dll-heap-memory-allocation-issue/59704750#59704750", "title": "C++ dll heap memory allocation issue", "body": "<blockquote>\n  <p>1.) How about .so file (Linux), is it the same case ?</p>\n</blockquote>\n\n<p>Yes, a library built using a different implementation of the Standard C++ Library than the program it's finally linked with may do allocations in a slightly different manner. <code>g++</code>'s <code>libstdc++</code> and <code>clang++</code>'s <code>libc++</code> are examples of two different implementations. They <em>may</em> be 100% ABI compatible - but a third unknown library may not be.</p>\n\n<blockquote>\n  <p>2.) Is there anyway to make sure that application and library(.dll and .so) are using same heap memory manager or using same heap memory section ? So we can delete and new separately (new at .dll/.so, delete at application ).</p>\n</blockquote>\n\n<p>No, what's compiled into the library is what will be used by the library, unless there's a way to initialize the library upon loading it, telling it to use a specific heap manager.</p>\n\n<blockquote>\n  <p>Please explain in details. I wish to know for .so (Linux), is it using only one heap manager for both application and .so (library). Let's said, my application compiled by compiler version A, while my .so complied by compiler version B, is it still ok ?</p>\n</blockquote>\n\n<p>Because of the reason mentioned above, no, you can't be sure. Since you are the library creator you could however make your API so that the <code>new</code> and <code>delete</code> memory allocations/deallocations for types in your library are delegated to member functions compiled into the library, which in turn does the real allocations/deallocations (described in <a href=\"https://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"nofollow noreferrer\">operator new, operator new[]</a>\nand <a href=\"https://en.cppreference.com/w/cpp/memory/new/operator_delete\" rel=\"nofollow noreferrer\">operator delete, operator delete[]</a>). Pointers to objects of your types could then be <code>new</code>ed and passed between the library and application and be <code>delete</code>d on either side.</p>\n\n<hr>\n\n<p>Here's an (incomplete) example of how that could look using a <em>class-specific allocation function</em>:<br>\n<code>void* T::operator new(std::size_t count);</code>  </p>\n\n<p>and a <em>class-specific usual deallocation function</em>:<br>\n<code>void T::operator delete(void* ptr);</code>  </p>\n\n<p>It contains <code>foo.hpp</code> and <code>foo.cpp</code> used to create <code>libfoo.so</code> (or <code>libfoo.a</code>) and code for a program using the library.</p>\n\n<p><strong>foo.hpp</strong></p>\n\n<pre><code>#pragma once\n\n#include &lt;new&gt;\n\nclass Foo {\npublic:\n    // The \"usual\" part of your class definition:\n    Foo(int x);\n    ~Foo();\n\n    // This part does NOT get compiled into your library.\n    // It'll only be used by users of your library:\n#ifndef BUILDING_LIB\n    // Note: operator new and delete are static by default\n\n    // single object allocation/deallocation:\n    void* operator new(std::size_t /* byte_count */) { return Alloc(); }\n    void operator delete(void* addr) { Free(addr); }\n\n    // array allocation/deallocation:\n    // TODO: operator new[] and delete[]\n#endif\nprivate:\n    int value;\n\n    // the functions really doing the memory management\n    static void* Alloc();\n    static void Free(void* p);\n};\n</code></pre>\n\n<p><strong>foo.cpp</strong></p>\n\n<pre><code>// Define BUILDING_LIB to disable the proxy operator new/delete functions when building\n// the library.\n#define BUILDING_LIB\n#include \"foo.hpp\"\n\n#include &lt;cstdlib&gt; // std::aligned_alloc\n#include &lt;iostream&gt;\n\nFoo::Foo(int x) : value(x) {\n    std::cout &lt;&lt; \"Foo:Foo(\" &lt;&lt; value &lt;&lt; \")\\n\";\n}\n\nFoo::~Foo() {\n    std::cout &lt;&lt; \"Foo:~Foo() \" &lt;&lt; value &lt;&lt; \"\\n\";\n}\n\nvoid* Foo::Alloc() {\n    void* addr = std::aligned_alloc(alignof(Foo), sizeof(Foo));\n    std::cout &lt;&lt; \"Alloc() \" &lt;&lt; sizeof(Foo) &lt;&lt; \"\\t@ \" &lt;&lt; addr &lt;&lt; '\\n';\n    return addr;\n}\n\nvoid Foo::Free(void* addr) {\n    std::cout &lt;&lt; \"Free()\\t\\t@ \" &lt;&lt; addr &lt;&lt; '\\n';\n    std::free(addr);\n}\n</code></pre>\n\n<p><strong>uselib.cpp</strong></p>\n\n<pre><code>#include \"foo.hpp\"\n\n#include &lt;memory&gt;\n\nint main() {\n    auto a = std::make_unique&lt;Foo&gt;(123); // heap allocation\n\n    // An automatic variable will use the applications memory manager and will not\n    // use Alloc/Free.\n    Foo b(456);\n}\n</code></pre>\n\n<p>Possible output:</p>\n\n<pre><code>Alloc() 4       @ 0x1af7eb0\nFoo:Foo(123)\nFoo:Foo(456)\nFoo:~Foo() 456\nFoo:~Foo() 123\nFree()          @ 0x1af7eb0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 886, "user_id": 3868464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3JnBN.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3868464/alexander"}, "is_accepted": false, "score": 0, "last_activity_date": 1611124210, "creation_date": 1611124210, "answer_id": 65804177, "question_id": 59542254, "link": "https://stackoverflow.com/questions/59542254/c-dll-heap-memory-allocation-issue/65804177#65804177", "title": "C++ dll heap memory allocation issue", "body": "<p>Library developers take care about this by implementing they own methods for freeing memory allocated inside of library.\nFor example:</p>\n<ul>\n<li><a href=\"https://github.com/wrouesnel/openipmi/blob/20024d5c42ae2153c4dde6496a066c3b66b2ff76/include/OpenIPMI/ipmi_fru.h#L203\" rel=\"nofollow noreferrer\">OpenIPMI</a> calls <code>ipmi_fru_node_get_field</code> and <code>ipmi_fru_data_free</code>.</li>\n<li><a href=\"https://docs.microsoft.com/en-us/windows/win32/api/wincrypt/nf-wincrypt-certcreatecertificatecontext\" rel=\"nofollow noreferrer\">CryptoAPI</a> calls <code>CertCreateCertificateContext</code> and <code>CertFreeCertificateContext</code></li>\n</ul>\n"}], "owner": {"reputation": 1026, "user_id": 1972460, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/93230ae9c216d83bacc64a84e652b571?s=128&d=identicon&r=PG", "display_name": "Anson Tan", "link": "https://stackoverflow.com/users/1972460/anson-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 1, "accepted_answer_id": 59704750, "answer_count": 4, "score": 5, "last_activity_date": 1611124210, "creation_date": 1577785124, "last_edit_date": 1577795566, "question_id": 59542254, "link": "https://stackoverflow.com/questions/59542254/c-dll-heap-memory-allocation-issue", "title": "C++ dll heap memory allocation issue", "body": "<p>From this <a href=\"https://stackoverflow.com/questions/55265547/why-my-app-crashes-when-i-free-a-char-allocated-by-a-dll-generated-with-cffi\">link</a>, I know that we(application) should always <strong>don't</strong> delete a heap memory allocation from dll, because the heap memory manager are different.</p>\n\n<p>I have few questions:</p>\n\n<p>1.) How about .so file (Linux), is it the same case ?</p>\n\n<p>2.) Is there anyway to make sure that application and library(.dll and .so) are using same heap memory manager or using same heap memory section ? So we can delete and new separately (new at .dll/.so, delete at application ).</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 6, "creation_date": 1577785267, "post_id": 59542223, "comment_id": 105253647, "body": "Don\u2019t return a reference"}, {"owner": {"reputation": 2565, "user_id": 4781312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lDEcJ.jpg?s=128&g=1", "display_name": "Asesh", "link": "https://stackoverflow.com/users/4781312/asesh"}, "edited": false, "score": 0, "creation_date": 1577785361, "post_id": 59542223, "comment_id": 105253680, "body": "Replace <code>MyVector &amp;operator</code> with <code>MyVector operator</code>"}, {"owner": {"reputation": 421, "user_id": 10811334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59b71eb3b7dc454c05a343b71590bca?s=128&d=identicon&r=PG", "display_name": "xiaoyu2006", "link": "https://stackoverflow.com/users/10811334/xiaoyu2006"}, "edited": false, "score": 0, "creation_date": 1577785445, "post_id": 59542223, "comment_id": 105253710, "body": "Because <code>c</code> is declared inside this function, it&#39;s in the stack, which may be destroyed."}, {"owner": {"reputation": 421, "user_id": 10811334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59b71eb3b7dc454c05a343b71590bca?s=128&d=identicon&r=PG", "display_name": "xiaoyu2006", "link": "https://stackoverflow.com/users/10811334/xiaoyu2006"}, "edited": false, "score": 1, "creation_date": 1577785692, "post_id": 59542223, "comment_id": 105253792, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/18041100/using-c-string-address-of-stack-memory-associated-with-local-variable-returned\">Using C-string: &quot;Address of stack memory associated with local variable returned&quot;</a>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577786886, "post_id": 59542223, "comment_id": 105254182, "body": "<code>operator*</code> is supposed to return a result by value, not by reference."}], "owner": {"reputation": 61, "user_id": 11993857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a8515dda3d47574aa4743edd43ca27b?s=128&d=identicon&r=PG&f=1", "display_name": "saltkun", "link": "https://stackoverflow.com/users/11993857/saltkun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1577784967, "creation_date": 1577784967, "question_id": 59542223, "link": "https://stackoverflow.com/questions/59542223/how-could-i-make-c-return-correct", "title": "How could I make c return correct?", "body": "<pre><code>MyVector &amp;operator*(double b,  MyVector &amp;a) {\n  MyVector c(outN(a));\n  c = a * b;\n  return c;\n}\n</code></pre>\n\n<p>Vscode showes me\"Reference to stack memory associated with local variable 'c' returned\".But I need c return.How should I do?</p>\n"}, {"tags": ["c++", "c++11", "c++14"], "comments": [{"owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "edited": false, "score": 2, "creation_date": 1577785308, "post_id": 59542181, "comment_id": 105253659, "body": "A void function can return another void function. A void function can even return  (void)&quot;I&#39;m a void&quot;;"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1577787080, "post_id": 59542181, "comment_id": 105254244, "body": "There are rules in place in the C++ spec that allow a void function to return a void value, to handle cases where templated functions may need to do exactly that without having to use special treatment just for void"}, {"owner": {"reputation": 20129, "user_id": 2944616, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4JSYv.png?s=128&g=1", "display_name": "greywolf82", "link": "https://stackoverflow.com/users/2944616/greywolf82"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1577788174, "post_id": 59542181, "comment_id": 105254660, "body": "@RemyLebeau Indeed this question came from a doubt using a template function :)"}], "answers": [{"tags": [], "owner": {"reputation": 2357, "user_id": 5954825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46e345831a9b1beeb8bfee5cbf70b6f?s=128&d=identicon&r=PG&f=1", "display_name": "mfnx", "link": "https://stackoverflow.com/users/5954825/mfnx"}, "is_accepted": true, "score": 6, "last_activity_date": 1577785676, "creation_date": 1577785676, "answer_id": 59542359, "question_id": 59542181, "link": "https://stackoverflow.com/questions/59542181/auto-return-type-matching-void/59542359#59542359", "title": "Auto return type matching void", "body": "<p>The code is legal. <code>auto</code> deduces to <code>void</code> and a <code>void</code> function can return another <code>void</code> function. A <code>void</code> function can even </p>\n\n<pre><code>return static_cast&lt;void&gt;(\"I'm a void\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1224, "user_id": 1572626, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6dc99607cfc06eed4636695a0d16531e?s=128&d=identicon&r=PG", "display_name": "wrhall", "link": "https://stackoverflow.com/users/1572626/wrhall"}, "is_accepted": false, "score": 0, "last_activity_date": 1577829229, "creation_date": 1577829229, "answer_id": 59548692, "question_id": 59542181, "link": "https://stackoverflow.com/questions/59542181/auto-return-type-matching-void/59548692#59548692", "title": "Auto return type matching void", "body": "<p>It's legal, but you can't, for example, assign the result to a variable. [1]</p>\n\n<pre><code>class Foo {\npublic:\n    void test1() {\n\n    }\n    auto test() -&gt; decltype(test1()) {\n        return test1(); //&lt;---return void here!\n    }\n};\n\nint main() {\n    Foo foo;\n    auto x = foo.test(); //&lt;---compile error here\n}\n</code></pre>\n\n<p>[1] <a href=\"https://godbolt.org/z/YGAtdJ\" rel=\"nofollow noreferrer\">https://godbolt.org/z/YGAtdJ</a></p>\n"}], "owner": {"reputation": 20129, "user_id": 2944616, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/4JSYv.png?s=128&g=1", "display_name": "greywolf82", "link": "https://stackoverflow.com/users/2944616/greywolf82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 59542359, "answer_count": 2, "score": 2, "last_activity_date": 1577829229, "creation_date": 1577784740, "question_id": 59542181, "link": "https://stackoverflow.com/questions/59542181/auto-return-type-matching-void", "title": "Auto return type matching void", "body": "<p>Is this code legal? It compiles but I'm wondering what happens with the return value. Undefined behavior?</p>\n\n<pre><code>class Foo {\npublic:\n    void test1() {\n\n    }\n    auto test() -&gt; decltype(test1()) {\n        return test1(); //&lt;---return void here!\n    }\n};\n</code></pre>\n"}, {"tags": ["c++", "gcc", "g++"], "comments": [{"owner": {"reputation": 421, "user_id": 10811334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59b71eb3b7dc454c05a343b71590bca?s=128&d=identicon&r=PG", "display_name": "xiaoyu2006", "link": "https://stackoverflow.com/users/10811334/xiaoyu2006"}, "edited": false, "score": 0, "creation_date": 1577783833, "post_id": 59541968, "comment_id": 105253145, "body": "<code>printf (&quot;%.1f + %.1f\\n&quot;, sum , avg, sum+avg);</code> Why there&#39;s a <code>sum+avg</code>?"}, {"owner": {"reputation": 41, "user_id": 8172848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aR8ER.jpg?s=128&g=1", "display_name": "jeck.98", "link": "https://stackoverflow.com/users/8172848/jeck-98"}, "reply_to_user": {"reputation": 421, "user_id": 10811334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a59b71eb3b7dc454c05a343b71590bca?s=128&d=identicon&r=PG", "display_name": "xiaoyu2006", "link": "https://stackoverflow.com/users/10811334/xiaoyu2006"}, "edited": false, "score": 0, "creation_date": 1577789808, "post_id": 59541968, "comment_id": 105255304, "body": "Ohh. sorry sir, that&#39;s the part were I am having a problem with, I don&#39;t have an any idea on how to add those two float. Hehe. Sorry sorry sorry.."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8172848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aR8ER.jpg?s=128&g=1", "display_name": "jeck.98", "link": "https://stackoverflow.com/users/8172848/jeck-98"}, "edited": false, "score": 0, "creation_date": 1577789938, "post_id": 59542030, "comment_id": 105255357, "body": "Ohh! Thanks for that tips and idea sir! Appreciate it a lot! Now I know where to use printf! ^^"}], "tags": [], "owner": {"reputation": 3681, "user_id": 1266190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/588fa0e9fbe15e3c247eb892923bf11b?s=128&d=identicon&r=PG", "display_name": "Alexander van Oostenrijk", "link": "https://stackoverflow.com/users/1266190/alexander-van-oostenrijk"}, "is_accepted": false, "score": 3, "last_activity_date": 1577783923, "creation_date": 1577783923, "answer_id": 59542030, "question_id": 59541968, "link": "https://stackoverflow.com/questions/59541968/is-it-possible-to-add-two-float-inside-the-for-loop/59542030#59542030", "title": "Is it possible to add two float inside the for loop?", "body": "<p>You can't use <code>printf</code> to calculate the sum of the grades. You can use your loop to calculate the <code>sum</code> like this:</p>\n\n<pre><code>for (i = 0; i &lt; 10; i++) {\n  sum = sum + grades[i];\n}\n</code></pre>\n\n<p><code>printf</code> is a library function that sends formatted output to the standard output (your screen).</p>\n"}, {"comments": [{"owner": {"reputation": 1585, "user_id": 1425771, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/OXhoK.jpg?s=128&g=1", "display_name": "Banukobhan Nagendram", "link": "https://stackoverflow.com/users/1425771/banukobhan-nagendram"}, "edited": false, "score": 0, "creation_date": 1577785800, "post_id": 59542240, "comment_id": 105253827, "body": "If you want answer already answered question, check your answer is different with already given answer. If similar answer is already available, avoid repeating similar answer."}, {"owner": {"reputation": 9018, "user_id": 5105949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbd9d7ecb21c40f7a4256317fd80cecc?s=128&d=identicon&r=PG&f=1", "display_name": "churill", "link": "https://stackoverflow.com/users/5105949/churill"}, "edited": false, "score": 1, "creation_date": 1577786758, "post_id": 59542240, "comment_id": 105254136, "body": "When answering you should also explain <i>why</i> that would be the correct way to do it and not just provide code to copy &amp; paste, because that leads to <a href=\"https://en.wikipedia.org/wiki/Cargo_cult_programming\" rel=\"nofollow noreferrer\">cargo cult programming</a> :)"}], "tags": [], "owner": {"reputation": 1, "user_id": 10875206, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BpiDbuHjk14/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbN9ayR8Qa8Ibhmmd2ocanvolqy8Q/mo/photo.jpg?sz=128", "display_name": "escorpwac", "link": "https://stackoverflow.com/users/10875206/escorpwac"}, "is_accepted": false, "score": 0, "last_activity_date": 1577785052, "creation_date": 1577785052, "answer_id": 59542240, "question_id": 59541968, "link": "https://stackoverflow.com/questions/59541968/is-it-possible-to-add-two-float-inside-the-for-loop/59542240#59542240", "title": "Is it possible to add two float inside the for loop?", "body": "<p>This may solve your problem.</p>\n\n<pre><code>for(int i=0;i&lt;10;++i)\n{\n    sum += grades[i];\n    avg = sum / (i+1);\n    printf (\"After adding lecture %u --&gt; sum: %.1f + average: %.1f\\n\", i+1,sum , avg);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 8172848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aR8ER.jpg?s=128&g=1", "display_name": "jeck.98", "link": "https://stackoverflow.com/users/8172848/jeck-98"}, "edited": false, "score": 0, "creation_date": 1577790158, "post_id": 59542364, "comment_id": 105255430, "body": "Gotcha sir! ...and for the grade evaluation, I&#39;m just trying for it how to work with ^^ but thanks for tip sir! Your snippet has given me so much ideas that will help me in the future! Thank you so much!"}], "tags": [], "owner": {"reputation": 1122, "user_id": 4139593, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wPItEJaVcpo/AAAAAAAAAAI/AAAAAAAAAIA/wDUIxQKRNvA/photo.jpg?sz=128", "display_name": "TruthSeeker", "link": "https://stackoverflow.com/users/4139593/truthseeker"}, "is_accepted": true, "score": 1, "last_activity_date": 1577786490, "last_edit_date": 1577786490, "creation_date": 1577785708, "answer_id": 59542364, "question_id": 59541968, "link": "https://stackoverflow.com/questions/59541968/is-it-possible-to-add-two-float-inside-the-for-loop/59542364#59542364", "title": "Is it possible to add two float inside the for loop?", "body": "<ol>\n<li><code>printf</code> is meant to writes the results to <code>stdout</code>.</li>\n<li>condition check for grade evaluation is not correct average grade more than 1.0 is considered as Excellent</li>\n</ol>\n\n<p>Below snippet shows right usage of <code>for-loop</code></p>\n\n<pre><code>    #include &lt;vector&gt;\n    #include &lt;string&gt;\n    #include &lt;array&gt;\n    #include &lt;iostream&gt;\n\n    int main()\n    {\n        std::vector&lt;float&gt; grades;\n        const std::vector&lt;std::string&gt;  subjects = {\n            \"Chemistry for Engineers Laboratory\",\n            \"Chemistry for Engineers\", \n            \"Computer Aided Drafting\",\n            \"Calculus\",\n            \"Kontekstwalisadong Komunikasyon sa Filipino at sa Iba't-ibang Larangan\"\n            //Extend the subjects\n        };\n\n        int TotlaSubject = subjects.size();\n\n        std::cout &lt;&lt; \"\\n Enter your grades on each subject\\n\";\n        std::cout &lt;&lt; \"-----------------------------------------------\\n\";\n        for (int i = 0; i &lt; TotlaSubject; i++)\n        {\n            std::cout &lt;&lt; subjects[i] &lt;&lt; \" : \";\n            float InputGrade;\n            std::cin &gt;&gt; InputGrade;\n            grades.push_back(InputGrade);\n//          ^^^^^ here pushing data into the in a loop\n        }\n\n        float total =0.0;\n        for (auto grade : grades){\n            total += grade;  //Adding grades in a loop\n         }\n\n        float avg = total / grades.size();\n        std::cout &lt;&lt; \"Total : \" &lt;&lt; total &lt;&lt; \" Avg : \" &lt;&lt; avg &lt;&lt; std::endl;        \n        return 0;\n    }\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 8172848, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aR8ER.jpg?s=128&g=1", "display_name": "jeck.98", "link": "https://stackoverflow.com/users/8172848/jeck-98"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 59542364, "answer_count": 3, "score": 0, "last_activity_date": 1577786490, "creation_date": 1577783574, "last_edit_date": 1577783693, "question_id": 59541968, "link": "https://stackoverflow.com/questions/59541968/is-it-possible-to-add-two-float-inside-the-for-loop", "title": "Is it possible to add two float inside the for loop?", "body": "<p>I'm creating a simple grade calculator with C++, I'm just new in C++, and I am practicing it, but I am having a problem with my method or with my code, hope you'll help me out with this one. I don't have an idea if it is possible to add up the user input (using float numbers) inside the for loop method and print it out. Thank you and happy new year! </p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nusing namespace std;\n\nint main() {\n    float sum = 0.00, avg, grades [10], i;\n\n    cout &lt;&lt; \"\\n Enter your grades on each subject\\n\";\n    cout &lt;&lt; \"-----------------------------------------------\";\n    cout &lt;&lt; \"\\n Chemistry for Engineers Laboratory: \";\n    cin &gt;&gt; grades [0];\n    cout &lt;&lt; \"\\n Chemistry for Engineers: \";\n    cin &gt;&gt; grades [1];\n    cout &lt;&lt; \"\\n Computer Aided Drafting: \";\n    cin &gt;&gt; grades [2];\n    cout &lt;&lt; \"\\n Calculus\";\n    cin &gt;&gt; grades [3];\n    cout &lt;&lt; \"\\n Kontekstwalisadong Komunikasyon sa Filipino at sa Iba't-ibang Larangan: \";\n    cin &gt;&gt; grades [4];\n    cout &lt;&lt; \"\\n Science Technology and Society: \";\n    cin &gt;&gt; grades [5];\n    cout &lt;&lt; \"\\n Mathematics in the Modern World: \";\n    cin &gt;&gt; grades [6];\n    cout &lt;&lt; \"\\n Movemement Enhancement (Physical Education): \";\n    cin &gt;&gt; grades [7];\n    cout &lt;&lt; \"\\n Readings in Philippine History: \";\n    cin &gt;&gt; grades [8];\n    cout &lt;&lt; \"\\n Undertanding the Self: \";\n    cin &gt;&gt; grades [9];\n\n    for ( i = 0; i &lt; 10; i++) {\n        printf (\"%.1f + %.1f\\n\", sum , avg, sum+avg);\n    }\n    cout &lt;&lt; \"----------------------------------------\";\n    cout &lt;&lt; \"Total Grade: \" &lt;&lt; sum;\n    avg = sum / 10;\n    cout &lt;&lt; \"\\n GWA: \" &lt;&lt; avg;\n    cout &lt;&lt; \"\\n Rating: \";\n\n    if ( avg &gt; 1.00) {\n        cout &lt;&lt; \"Excellent\";\n    } else if ( avg &gt; 3.00 &amp;&amp; avg &lt;= 2.00) {\n        cout &lt;&lt; \"Passed\";\n    } else if ( avg &gt; 4.00 &amp;&amp; avg &lt;= 3.00) {\n        cout &lt;&lt; \"Conditional Passing\";\n    } else {\n        cout &lt;&lt; \"Failed\";\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "c++17", "sfinae"], "answers": [{"comments": [{"owner": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "edited": false, "score": 0, "creation_date": 1577784417, "post_id": 59542098, "comment_id": 105253341, "body": "Can you suggest any tricks I can apply to make the copy constructor only conditionally available?"}, {"owner": {"reputation": 1827, "user_id": 4248972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df5369385749fdb2112db7fc7bf4ca11?s=128&d=identicon&r=PG&f=1", "display_name": "pasbi", "link": "https://stackoverflow.com/users/4248972/pasbi"}, "reply_to_user": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "edited": false, "score": 0, "creation_date": 1577784491, "post_id": 59542098, "comment_id": 105253371, "body": "Have a look at this: <a href=\"https://stackoverflow.com/questions/29430090/sfinae-away-a-copy-constructor\" title=\"sfinae away a copy constructor\">stackoverflow.com/questions/29430090/&hellip;</a>"}, {"owner": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "edited": false, "score": 0, "creation_date": 1577785110, "post_id": 59542098, "comment_id": 105253599, "body": "Good suggestion, thanks! It makes it painfully clear my approach was a complete dead end... hopefully we can use the <code>requires</code> keyword soon for a more elegant solution to this problem."}], "tags": [], "owner": {"reputation": 1827, "user_id": 4248972, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/df5369385749fdb2112db7fc7bf4ca11?s=128&d=identicon&r=PG&f=1", "display_name": "pasbi", "link": "https://stackoverflow.com/users/4248972/pasbi"}, "is_accepted": false, "score": 0, "last_activity_date": 1577784428, "last_edit_date": 1577784428, "creation_date": 1577784321, "answer_id": 59542098, "question_id": 59541936, "link": "https://stackoverflow.com/questions/59541936/call-to-implicitly-deleted-copy-constructor-in-a-class-template/59542098#59542098", "title": "Call to implicitly deleted copy constructor in a class template", "body": "<p>The compiler does describe your actual mistake:</p>\n\n<pre><code>&lt;source&gt;:9:5: note: copy constructor is implicitly deleted because 'Foo&lt;int&gt;' has a user-declared move constructor\nFoo(Foo&lt;T&gt; &amp;&amp;)\n</code></pre>\n\n<p>Solution: add a copy constructor (signature: <code>Foo(const Foo&lt;T&gt;&amp;)</code>) or remove the move constructor (i.e., allow the compiler to generate the copy constructor).</p>\n\n<p>Note that <code>template &lt;typename U = T&gt; Foo(const Foo&lt;U&gt; &amp;);</code> is not a copy constructor because it is templated. Copy constructors must not be templated.</p>\n"}], "owner": {"reputation": 1914, "user_id": 4841248, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ed847bb43b46b8554a32b5910383341a?s=128&d=identicon&r=PG", "display_name": "Maarten Bamelis", "link": "https://stackoverflow.com/users/4841248/maarten-bamelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "closed_date": 1577784583, "answer_count": 1, "score": 0, "last_activity_date": 1577784428, "creation_date": 1577783422, "question_id": 59541936, "link": "https://stackoverflow.com/questions/59541936/call-to-implicitly-deleted-copy-constructor-in-a-class-template", "closed_reason": "Duplicate", "title": "Call to implicitly deleted copy constructor in a class template", "body": "<p>I have written a class template and only want to make the copy constructor conditionally available. To do this, I want to apply some SFINAE trick and need to make the copy constructor templated.</p>\n\n<p>Something like:</p>\n\n<pre><code>template &lt;typename U = T, std::enable_if_t&lt;std::is_same_v&lt;U, T&gt; &amp;&amp; /* conditions on U */&gt; * = nullptr&gt;\nFoo(const Foo&lt;U&gt; &amp;);\n</code></pre>\n\n<p>However, I run into issues because I have a normal move constructor defined and the compiler complains that it implicitly deleted the copy constructor because of my user-defined move constructor. It does not want to match the templated copy constructor I wrote.</p>\n\n<p>I have the following example code that reproduces my problem:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct Foo final\n{\n    Foo() = default;\n\n    template &lt;typename U = T&gt;\n    Foo(const Foo&lt;U&gt; &amp;);\n\n    Foo(Foo&lt;T&gt; &amp;&amp;);\n};\n\nint main()\n{\n    auto f1 = Foo&lt;int&gt;{};\n    auto f2 = Foo&lt;int&gt;{f1};\n}\n</code></pre>\n\n<p>And I get the following error when compiling with Clang 9.0.0 over on Godbolt:</p>\n\n<pre><code>&lt;source&gt;:15:15: error: call to implicitly-deleted copy constructor of 'Foo&lt;int&gt;'\n    auto f2 = Foo&lt;int&gt;{f1};\n              ^       ~~~~\n&lt;source&gt;:9:5: note: copy constructor is implicitly deleted because 'Foo&lt;int&gt;' has a user-declared move constructor\n    Foo(Foo&lt;T&gt; &amp;&amp;)\n    ^\n1 error generated.\nCompiler returned: 1\n</code></pre>\n\n<p>The compile error describes only symptoms and not my actual mistake. I can usually deduce what I did wrong but in this case, because using SFINAE on constructors is quite new to me, I cannot figure out the root cause of the error.</p>\n\n<p>Can anyone help me fix the code to achieve my goal?</p>\n"}, {"tags": ["c++", "qt", "qnetworkaccessmanager", "qnetworkreply", "qnetworkrequest"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1577780622, "post_id": 59541246, "comment_id": 105252117, "body": "mmmm, QNetworkRequest does not have a setProxy() method but you use it in it .... Is it a typo?"}, {"owner": {"reputation": 2033, "user_id": 9250490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HV9vU_hCaQI/AAAAAAAAAAI/AAAAAAAAACg/Ue4zHkbC6Mc/photo.jpg?sz=128", "display_name": "Zhang", "link": "https://stackoverflow.com/users/9250490/zhang"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1577780698, "post_id": 59541246, "comment_id": 105252137, "body": "@eyllanesc, my fault, it&#39;s QNetWorkManager has a setProxy()."}], "answers": [{"comments": [{"owner": {"reputation": 2033, "user_id": 9250490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HV9vU_hCaQI/AAAAAAAAAAI/AAAAAAAAACg/Ue4zHkbC6Mc/photo.jpg?sz=128", "display_name": "Zhang", "link": "https://stackoverflow.com/users/9250490/zhang"}, "edited": false, "score": 0, "creation_date": 1577780868, "post_id": 59541531, "comment_id": 105252192, "body": "It&#39;s my fault. setProxy is a method of QNetworkAccessManager."}, {"owner": {"reputation": 2033, "user_id": 9250490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HV9vU_hCaQI/AAAAAAAAAAI/AAAAAAAAACg/Ue4zHkbC6Mc/photo.jpg?sz=128", "display_name": "Zhang", "link": "https://stackoverflow.com/users/9250490/zhang"}, "edited": false, "score": 0, "creation_date": 1577781842, "post_id": 59541531, "comment_id": 105252482, "body": "My problem is <code>network_manager.setProxy(proxy);</code> will be called 20 times in less than 1 second. But httpFinished will be called after 2 or 3 seconds. When I call <code>manager-&gt;proxy()</code> in httpFinished(), I think it would be the last proxy (not corresponding one). I&#39;ll do a test for this."}, {"owner": {"reputation": 2033, "user_id": 9250490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HV9vU_hCaQI/AAAAAAAAAAI/AAAAAAAAACg/Ue4zHkbC6Mc/photo.jpg?sz=128", "display_name": "Zhang", "link": "https://stackoverflow.com/users/9250490/zhang"}, "edited": false, "score": 0, "creation_date": 1577781881, "post_id": 59541531, "comment_id": 105252495, "body": "network_manager is a member variable value. All requests use the same one."}, {"owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "reply_to_user": {"reputation": 2033, "user_id": 9250490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HV9vU_hCaQI/AAAAAAAAAAI/AAAAAAAAACg/Ue4zHkbC6Mc/photo.jpg?sz=128", "display_name": "Zhang", "link": "https://stackoverflow.com/users/9250490/zhang"}, "edited": false, "score": 0, "creation_date": 1577782097, "post_id": 59541531, "comment_id": 105252567, "body": "That&#39;s why I say, you have to create a pool of <code>QNetworkAccessManager</code>. You can also create a QHash&lt;QNetworkRequest*,QString&gt; to keep track of which request belongs to which proxy but I would not recommend it."}, {"owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "reply_to_user": {"reputation": 2033, "user_id": 9250490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HV9vU_hCaQI/AAAAAAAAAAI/AAAAAAAAACg/Ue4zHkbC6Mc/photo.jpg?sz=128", "display_name": "Zhang", "link": "https://stackoverflow.com/users/9250490/zhang"}, "edited": false, "score": 0, "creation_date": 1577784520, "post_id": 59541531, "comment_id": 105253382, "body": "just added a new approach to do it with a single <code>QNetworkAccessManager</code>"}, {"owner": {"reputation": 2033, "user_id": 9250490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HV9vU_hCaQI/AAAAAAAAAAI/AAAAAAAAACg/Ue4zHkbC6Mc/photo.jpg?sz=128", "display_name": "Zhang", "link": "https://stackoverflow.com/users/9250490/zhang"}, "edited": false, "score": 0, "creation_date": 1577927907, "post_id": 59541531, "comment_id": 105283144, "body": "Great solution! I had thought to add a rawheader (like <code>_proxy_</code>) into the request, but it seemed lame."}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 1, "creation_date": 1578066161, "post_id": 59541531, "comment_id": 105328891, "body": "Another solution, is to connect the <code>finished</code> signal to a stateful lambda that captures the used proxy (as well as a pointer to the <code>QNetworkReply</code> object) if one wants to avoid bloating the class <code>HTTPClientBase</code> with additional members."}, {"owner": {"reputation": 7180, "user_id": 2666212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/874561e399041a45c82c2ca6652400b6?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2666212/mike"}, "edited": false, "score": 0, "creation_date": 1578066832, "post_id": 59541531, "comment_id": 105329217, "body": "The problem is essentially similar to the one presented in <a href=\"https://stackoverflow.com/q/22641306\">this question</a>, where the user has a grid of buttons that have their <code>clicked</code> signal connected to a single slot, and is trying to determine the location of the pushed button when that slot is invoked (similar to determining the proxy used in our network request when the slot <code>httpFinished</code> gets invoked). There is <a href=\"https://stackoverflow.com/a/22642431/2666212\">a comprehensive answer</a> that provides a lot of solutions there."}], "tags": [], "owner": {"reputation": 2125, "user_id": 11497022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4YGeg.jpg?s=128&g=1", "display_name": "Soheil Armin", "link": "https://stackoverflow.com/users/11497022/soheil-armin"}, "is_accepted": true, "score": 2, "last_activity_date": 1577785207, "last_edit_date": 1577785207, "creation_date": 1577780798, "answer_id": 59541531, "question_id": 59541246, "link": "https://stackoverflow.com/questions/59541246/how-do-i-know-a-qnetworkreply-comes-from-which-proxy/59541531#59541531", "title": "How do I know a QNetWorkReply comes from which proxy?", "body": "<p>As per the <a href=\"https://doc.qt.io/qt-5/qnetworkreply.html\" rel=\"nofollow noreferrer\">QNetworkReply</a> document, you can get the corresponding request using the member function <a href=\"https://doc.qt.io/qt-5/qnetworkreply.html#request\" rel=\"nofollow noreferrer\">QNetworkReply::request()</a>.</p>\n\n<p>Anyway, <strong><em>QNetworkRequest has not member function of <code>setProxy</code></em></strong>.</p>\n\n<p>But if you are setting proxy for <a href=\"https://doc.qt.io/qt-5/qnetworkaccessmanager.html\" rel=\"nofollow noreferrer\">QNetworkAccessManager</a> you can have a pointer to the corresponding manager by <a href=\"https://doc.qt.io/qt-5/qnetworkreply.html#manager\" rel=\"nofollow noreferrer\">QNetworkReply::manager()</a>.</p>\n\n<p>Notice the connect command. <code>finished()</code> has no <code>QNetworkReply*</code> argument so your <code>connect</code> command will also fail and you have to change <code>HTTPClientBase::httpFinished(QNetWorkReply* reply)</code> to <code>HTTPClientBase::httpFinished()</code>.</p>\n\n<pre><code>...\n    connect(reply, SIGNAL(finished()), this, \n    SLOT(httpFinished()));\n}\n\nvoid HTTPClientBase::httpFinished()\n{\n    QNetworkReply* reply = qobject_cast&lt;QNetworkReply*&gt;(sender());\n    if(reply){\n        QNetworkAccessManager * manager = reply-&gt;manager();\n        QNetworkProxy proxy = manager-&gt;proxy();\n        // now you have the proxy \n    }\n\n}\n</code></pre>\n\n<p>As you see, you have to use <a href=\"https://doc.qt.io/qt-5/qobject.html#sender\" rel=\"nofollow noreferrer\">sender()</a> to obtain the actual signal sender.\nYou need to create different <a href=\"https://doc.qt.io/qt-5/qnetworkaccessmanager.html\" rel=\"nofollow noreferrer\">QNetworkAccessManager</a> instances for each proxy you have. If you have a proxy pool, create your <a href=\"https://doc.qt.io/qt-5/qnetworkaccessmanager.html\" rel=\"nofollow noreferrer\">QNetworkAccessManager</a> instances first and choose them according to your specific needs.</p>\n\n<p>If you don't want to create a new QNetworkAccessManager for each proxy, you can do something like this:</p>\n\n<pre><code>void HTTPClientBase:: HttpRequestGet()\n{\n    network_manager.setProxy(proxy);\n    QNetworkRequest network_request;\n\n    network_request.setHeader(QNetworkRequest::ContentTypeHeader, \"application/x-www-form-urlencoded\");\n    network_request.setUrl(URL);\n\n    reply = network_manager.get(network_request);\n    //new member variable: QHash&lt;QNetworkReply*,QString&gt; m_RequestToProxy;\n    m_RequestToProxy.insert(reply,proxy);\n\n    connect(reply, SIGNAL(finished()), this, SLOT(httpFinished()));\n}\n\nvoid HTTPClientBase::httpFinished()\n{\n    QNetworkReply* reply = qobject_cast&lt;QNetworkReply*&gt;(sender());\n    if(reply){\n        QString proxy = m_RequestToProxy.take(reply);\n        //check if proxy is valid\n        //and then do whatever you want\n    }\n}\n</code></pre>\n\n<p>And another better solution is to set a property of reply and get it in slot.</p>\n\n<pre><code>void HTTPClientBase:: HttpRequestGet()\n{\n    network_manager.setProxy(proxy);\n    QNetworkRequest network_request;\n\n    network_request.setHeader(QNetworkRequest::ContentTypeHeader, \"application/x-www-form-urlencoded\");\n    network_request.setUrl(URL);\n\n    reply = network_manager.get(network_request);\n    reply-&gt;setProperty(\"_proxy_\",proxy);\n\n    connect(reply, SIGNAL(finished()), this, SLOT(httpFinished()));\n}\n\nvoid HTTPClientBase::httpFinished()\n{\n    QNetworkReply* reply = qobject_cast&lt;QNetworkReply*&gt;(sender());\n    if(reply){\n        QVariant v_proxy = reply-&gt;property(\"_proxy_\");\n        //check if proxy is valid\n        if(v_proxy.isValid()){\n             QString proxy = v_proxy.toString();\n             //and then do whatever you want\n        }\n\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 2033, "user_id": 9250490, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HV9vU_hCaQI/AAAAAAAAAAI/AAAAAAAAACg/Ue4zHkbC6Mc/photo.jpg?sz=128", "display_name": "Zhang", "link": "https://stackoverflow.com/users/9250490/zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 59541531, "answer_count": 1, "score": 0, "last_activity_date": 1577785207, "creation_date": 1577779037, "last_edit_date": 1577780810, "question_id": 59541246, "link": "https://stackoverflow.com/questions/59541246/how-do-i-know-a-qnetworkreply-comes-from-which-proxy", "title": "How do I know a QNetWorkReply comes from which proxy?", "body": "<p>It's a HTTP request sending method. When the goal website responses, httpFinished() will be called.</p>\n\n<pre><code>void HTTPClientBase:: HttpRequestGet()\n{\n    network_manager.setProxy(proxy);\n    QNetworkRequest network_request;\n\n    network_request.setHeader(QNetworkRequest::ContentTypeHeader, \"application/x-www-form-urlencoded\");\n    network_request.setUrl(URL);\n\n\n    reply = network_manager.get(network_request);\n    connect(reply, SIGNAL(finished(QNetWorkReply*)), this, SLOT(httpFinished(QNetWorkReply*)));\n}\n\nvoid HTTPClientBase::httpFinished(QNetWorkReply* reply)\n{\n    // How do I know this reply comes from which proxy?\n}\n</code></pre>\n\n<p>I can call HttpRequestGet() in a loop.</p>\n\n<pre><code>static HTTPClientBase myClient;\nfor(int i=0; i&lt;20; i++)\n{\n  myClient.setUrl(\"https:\\\\www.google.com\");\n  myClient.setProxy(\"123.123.123.123:1234\"); // The proxy changes every time in this loop.\n  myClient.HttpRequestGet();\n}\n</code></pre>\n\n<p>When <code>HTTPClientBase::httpFinished(QNetWorkReply* reply)</code> is called, How do I know this reply comes from which proxy?\n}</p>\n"}, {"tags": ["c++", "string"], "comments": [{"owner": {"reputation": 93172, "user_id": 1734130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZ5Sn.png?s=128&g=1", "display_name": "mvp", "link": "https://stackoverflow.com/users/1734130/mvp"}, "edited": false, "score": 11, "creation_date": 1577778287, "post_id": 59541059, "comment_id": 105251390, "body": "Unicode literal prefix is feature supported starting from c++11. You need to enable it with <code>-std=c++11</code>"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 2, "creation_date": 1577787353, "post_id": 59541059, "comment_id": 105254336, "body": "You are asking two completely unrelated questions. Delete the second question and post it separately."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 93172, "user_id": 1734130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AZ5Sn.png?s=128&g=1", "display_name": "mvp", "link": "https://stackoverflow.com/users/1734130/mvp"}, "edited": false, "score": 0, "creation_date": 1577837390, "post_id": 59541059, "comment_id": 105267588, "body": "@mvp Perhaps just upgrade. A compiler that needs a command line switch to enable C++11 is too old."}], "owner": {"reputation": 65, "user_id": 6581606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b790095c7c95a6470c3f36ca44c82c0a?s=128&d=identicon&r=PG&f=1", "display_name": "sirmax224", "link": "https://stackoverflow.com/users/6581606/sirmax224"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1577825945, "creation_date": 1577777919, "last_edit_date": 1577825945, "question_id": 59541059, "link": "https://stackoverflow.com/questions/59541059/string-literal-prefix-not-compiling", "title": "String literal prefix not compiling", "body": "<p>A book I'm reading (\"C++ Crash Course\" by Josh Lospinoso) gives a snippet of code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>char16_t chinese[] = u\"\\u4e66\\u4e2d\\u81ea\\u6709\\u9ec4\\u91d1\\u5c4b\";\n</code></pre>\n\n<p>However, this doesn't even compile for me. It references <em>use of undeclared identifier 'u'</em>, so why doesn't it compile like the book?</p>\n"}, {"tags": ["c++", "windows", "makefile", "cmake", "mingw"], "comments": [{"owner": {"reputation": 29966, "user_id": 637669, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0227e5d5eaceb8ae2f751df38d421764?s=128&d=identicon&r=PG", "display_name": "arrowd", "link": "https://stackoverflow.com/users/637669/arrowd"}, "edited": false, "score": 0, "creation_date": 1577778190, "post_id": 59540836, "comment_id": 105251364, "body": "Shouldn&#39;t you use <code>target_link_libraries(program1 objects)</code> to link object files?"}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1577780898, "post_id": 59540836, "comment_id": 105252199, "body": "&quot;I get a flood of multiple definition errors for methods ...&quot; - Do not <i>describe</i> the errors message, <b>show</b> that error message instead. Also, you may pass <code>VERBOSE=1</code> option to <code>mingw32-make</code> for see actual command line used for linking. Check that this command line actually contains duplicate object files."}, {"owner": {"reputation": 123, "user_id": 12610171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea46887ee68cf13f687b1efd07cc2892?s=128&d=identicon&r=PG&f=1", "display_name": "Joey McCollum", "link": "https://stackoverflow.com/users/12610171/joey-mccollum"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1577810231, "post_id": 59540836, "comment_id": 105261963, "body": "@Tsyvarev, thanks for the recommendation. I edited the post to include the error messages. I also ran <code>mingw32-make</code> with the <code>VERBOSE=1</code> option, and I got the following commands before the multiple definition errors:"}, {"owner": {"reputation": 123, "user_id": 12610171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea46887ee68cf13f687b1efd07cc2892?s=128&d=identicon&r=PG&f=1", "display_name": "Joey McCollum", "link": "https://stackoverflow.com/users/12610171/joey-mccollum"}, "edited": false, "score": 0, "creation_date": 1577810408, "post_id": 59540836, "comment_id": 105262021, "body": "<code>&quot;C:\\Program Files\\CMake\\bin\\cmake.exe&quot; -E remove -f CMakeFiles\\print_graphs.dir&#47;objects.a</code>  <code>C:\\ProgramData\\chocolatey\\bin\\ar.exe cr CMakeFiles\\print_graphs.dir&#47;objects.a @CMakeFiles\\print_graphs.dir\\objects1.rsp</code>  <code>C:\\ProgramData\\chocolatey\\bin\\g++.exe    -Wl,--whole-archive CMakeFiles\\print_graphs.dir&#47;objects.a -Wl,--no-whole-archive  -o print_graphs.exe -Wl,--out-implib,libprint_graphs.dll.a -Wl,--major-image-version,0,--minor-image-version,0 @CMakeFiles\\print_graphs.dir\\linklibs.rsp</code>  The only thing that strikes me is that the path to <code>ar</code> and <code>g++</code> is through chocolatey, not mingw."}, {"owner": {"reputation": 123, "user_id": 12610171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea46887ee68cf13f687b1efd07cc2892?s=128&d=identicon&r=PG&f=1", "display_name": "Joey McCollum", "link": "https://stackoverflow.com/users/12610171/joey-mccollum"}, "edited": false, "score": 0, "creation_date": 1577813180, "post_id": 59540836, "comment_id": 105262856, "body": "As far as I can tell, there are no duplicate files appearing in the commands. <code>objects.a</code> gets built, and then it is referenced for linking."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1577831346, "post_id": 59540836, "comment_id": 105266734, "body": "Well, the error message is clear: You have <b>two source files</b> - <code>roaring.c</code> and <code>print_graphs.cpp</code> - which defines the <b>same functions</b>. Or it could be a <i>header</i> file which defines that functions. You need to find that multiple definition and fix it. Since you don&#39;t provide the code (which contains that definitions) we couldn&#39;t help you."}], "answers": [{"tags": [], "owner": {"reputation": 123, "user_id": 12610171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea46887ee68cf13f687b1efd07cc2892?s=128&d=identicon&r=PG&f=1", "display_name": "Joey McCollum", "link": "https://stackoverflow.com/users/12610171/joey-mccollum"}, "is_accepted": true, "score": 0, "last_activity_date": 1578350779, "creation_date": 1578350779, "answer_id": 59620009, "question_id": 59540836, "link": "https://stackoverflow.com/questions/59540836/mingw32-make-following-cmake-with-mingw-makefiles-generator-fails-to-link-exec/59620009#59620009", "title": "mingw32-make following cmake with &quot;MinGW Makefiles&quot; generator fails to link executable to object library", "body": "<p>Okay, I found the issue, and, as expected, it was bad form in CMake on my part. In the section of my code with</p>\n\n<pre><code># Combine the object source files into an object library:\nadd_library(objects OBJECT ${SOURCES} ${HEADERS})\n</code></pre>\n\n<p>There was no need to reference <code>${HEADERS}</code>, as that connection is made explicitly in the next couple lines:</p>\n\n<pre><code># Point the build targets to their include directories:\ntarget_include_directories(objects PRIVATE ${HEADERS_DIR})\n</code></pre>\n\n<p>Including a reference to the header files in the initial <code>add_library</code> call seems to result in a duplication of the header files (or at least of references to them).</p>\n\n<p>I'm still not sure why other build tools weren't tripped up by this issue while <code>mingw32-make</code> was, but proper syntax is good to maintain in any event, and things are working as expected now.</p>\n"}], "owner": {"reputation": 123, "user_id": 12610171, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea46887ee68cf13f687b1efd07cc2892?s=128&d=identicon&r=PG&f=1", "display_name": "Joey McCollum", "link": "https://stackoverflow.com/users/12610171/joey-mccollum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 962, "favorite_count": 0, "accepted_answer_id": 59620009, "answer_count": 1, "score": 0, "last_activity_date": 1578350779, "creation_date": 1577776433, "last_edit_date": 1577807427, "question_id": 59540836, "link": "https://stackoverflow.com/questions/59540836/mingw32-make-following-cmake-with-mingw-makefiles-generator-fails-to-link-exec", "title": "mingw32-make following cmake with &quot;MinGW Makefiles&quot; generator fails to link executable to object library", "body": "<p>I'm using CMake to facilitate cross-platform builds of a C++ project. Using the same CMakeLists.txt files, I'm successfully completing builds on Linux (generating Unix Makefiles to compile with g++), OSX (generating Unix Makefiles to compile with clang++), and Windows (generating for Visual Studio 16 2019).</p>\n\n<p>Most recently, I've been testing the build process using the MinGW Makefiles generator on Windows. CMake generates the Makefile without any problems. When I call <code>mingw32-make</code> in the directory where the Makefile is generated, however, I start to run into problems. I'm able to compile several source files into an object library, but when I try to link the print_graphs executable to this object library, I get a flood of <code>multiple definition</code> errors for methods in the first source file of the object library, as follows:</p>\n\n<pre><code>Scanning dependencies of target print_graphs\n[ 52%] Building CXX object src/CMakeFiles/print_graphs.dir/print_graphs.cpp.obj\n[ 57%] Linking CXX executable print_graphs.exe\nCMakeFiles\\print_graphs.dir/objects.a(roaring.c.obj):roaring.c:(.text+0x6833): multiple definition of `roaring_bitmap_get_copy_on_write'\nCMakeFiles\\print_graphs.dir/objects.a(print_graphs.cpp.obj):print_graphs.cpp:(.text$roaring_bitmap_get_copy_on_write[roaring_bitmap_get_copy_on_write]+0x0): first defined here\nCMakeFiles\\print_graphs.dir/objects.a(roaring.c.obj):roaring.c:(.text+0x6850): multiple definition of `roaring_bitmap_set_copy_on_write'\nCMakeFiles\\print_graphs.dir/objects.a(print_graphs.cpp.obj):print_graphs.cpp:(.text$roaring_bitmap_set_copy_on_write[roaring_bitmap_set_copy_on_write]+0x0): first defined here\nCMakeFiles\\print_graphs.dir/objects.a(set_cover_solver.cpp.obj):set_cover_solver.cpp:(.text$ra_get_index[ra_get_index]+0x0): multiple definition of `ra_get_index'\nCMakeFiles\\print_graphs.dir/objects.a(roaring.c.obj):roaring.c:(.text+0x65a1): first defined here\nCMakeFiles\\print_graphs.dir/objects.a(set_cover_solver.cpp.obj):set_cover_solver.cpp:(.text$ra_get_container_at_index[ra_get_container_at_index]+0x0): multiple definition of `ra_get_container_at_index'\nCMakeFiles\\print_graphs.dir/objects.a(roaring.c.obj):roaring.c:(.text+0x660e): first defined here\nCMakeFiles\\print_graphs.dir/objects.a(set_cover_solver.cpp.obj):set_cover_solver.cpp:(.text$roaring_bitmap_add_range[roaring_bitmap_add_range]+0x0): multiple definition of `roaring_bitmap_add_range'\nCMakeFiles\\print_graphs.dir/objects.a(roaring.c.obj):roaring.c:(.text+0x688e): first defined here\nCMakeFiles\\print_graphs.dir/objects.a(set_cover_solver.cpp.obj):set_cover_solver.cpp:(.text$roaring_bitmap_contains[roaring_bitmap_contains]+0x0): multiple definition of `roaring_bitmap_contains'\nCMakeFiles\\print_graphs.dir/objects.a(roaring.c.obj):roaring.c:(.text+0x690a): first defined here\ncollect2.exe: error: ld returned 1 exit status\nmingw32-make[2]: *** [src\\CMakeFiles\\print_graphs.dir\\build.make:104: src/print_graphs.exe] Error 1\nmingw32-make[1]: *** [CMakeFiles\\Makefile2:933: src/CMakeFiles/print_graphs.dir/all] Error 2\nmingw32-make: *** [Makefile:94: all] Error 2\n</code></pre>\n\n<p>In the CMakeLists.txt file in my src/ directory, I have the following basic code:</p>\n\n<pre><code># Add header files:\nset(HEADERS\n    ${HEADERS_DIR}/cxxopts.h\n    ${HEADERS_DIR}/roaring.h\n    ${HEADERS_DIR}/roaring.hh\n    ${HEADERS_DIR}/pugiconfig.h\n    ${HEADERS_DIR}/pugixml.h\n    ...\n)\n\n# Add object source files:\nset(SOURCES \n    roaring.c\n    pugixml.cpp\n    ...\n)\n\n# Combine the object source files into an object library:\nadd_library(objects OBJECT ${SOURCES} ${HEADERS})\n\n# Point the build targets to their include directories:\ntarget_include_directories(objects PRIVATE ${HEADERS_DIR})\n\n# Add all executable scripts to be generated:\nadd_executable(program1 $&lt;TARGET_OBJECTS:objects&gt; program1.cpp )\n\n# Point the build targets to their include directories:\ntarget_include_directories(program1 PRIVATE ${HEADERS_DIR})\n\n# Make sure the build targets are compiled with C++11:\ntarget_compile_features(program1 PRIVATE cxx_std_11)\n</code></pre>\n\n<p>I'm new to CMake, so I'm willing to bet that the issue is bad form on my part in the CMakeLists.txt file. But since CMake is able to build everything without problems when I use other generators, I'm not sure what the issue is. Does anyone know what might be causing the issue with the MinGW Makefiles generator in particular?</p>\n"}, {"tags": ["c++", "c++11", "rvalue-reference", "rvalue", "lvalue"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 5, "creation_date": 1577776235, "post_id": 59540774, "comment_id": 105250822, "body": "Ask yourself: Is an <code>enum</code> a <code>unsigned int</code>?"}, {"owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1577777071, "post_id": 59540774, "comment_id": 105251046, "body": "@NathanOliver-ReinstateMonica In my original opinion, I think <code>typedef enum</code> is not a native type, and C++ would treat it as an <code>unsigned int</code> type indeed."}, {"owner": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 1, "creation_date": 1577782470, "post_id": 59540774, "comment_id": 105252686, "body": "GCC&#39;s error message is suboptimal in this case. Clang will give a less confusing message by printing the original type of <code>clr</code>."}, {"owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "reply_to_user": {"reputation": 10203, "user_id": 4672588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edcbc85fb3b43202dab37afb2bd5281e?s=128&d=identicon&r=PG&f=1", "display_name": "cpplearner", "link": "https://stackoverflow.com/users/4672588/cpplearner"}, "edited": false, "score": 0, "creation_date": 1577782952, "post_id": 59540774, "comment_id": 105252851, "body": "@cpplearner yep, that&#39;s why I thought <code>enum type</code> is treat as <code>unsigned int</code> in C++."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1577800273, "post_id": 59540774, "comment_id": 105258805, "body": "<code>enum X</code> is its own type, distinct from <code>int</code>"}, {"owner": {"reputation": 444, "user_id": 1676125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fpZTn.png?s=128&g=1", "display_name": "Klaas van Aarsen", "link": "https://stackoverflow.com/users/1676125/klaas-van-aarsen"}, "edited": false, "score": 0, "creation_date": 1577830617, "post_id": 59540774, "comment_id": 105266629, "body": "The compiler can choose to make the type for instance <code>unsigned char</code>. Then there is indeed a mismatch in type. Since the compiler must be free to choose the type, an error is generated."}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1577831919, "post_id": 59540774, "comment_id": 105266860, "body": "What happens if you type <code>typedef enum Color : unsigned int</code>?"}, {"owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1577834246, "post_id": 59540774, "comment_id": 105267209, "body": "@JL2210 Sorry, I dont get it. What&#39;s this type for?"}, {"owner": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1577834659, "post_id": 59540774, "comment_id": 105267275, "body": "Typed enums. It allows you to specify the type of an enum&#39;s members"}, {"owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "reply_to_user": {"reputation": 13760, "user_id": 10795151, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eazk7.png?s=128&g=1", "display_name": "S.S. Anne", "link": "https://stackoverflow.com/users/10795151/s-s-anne"}, "edited": false, "score": 0, "creation_date": 1577835182, "post_id": 59540774, "comment_id": 105267341, "body": "@JL2210 O I see. I try it and get the same result. Seems it still would implicitly convert to rvalue if I keep passing a not <code>unsigned int</code> type lvalue to <code>unsigned int&amp;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "edited": false, "score": 1, "creation_date": 1577777469, "post_id": 59540812, "comment_id": 105251158, "body": "Yep, I try <code>func(Color&amp;)</code> before I ask the question, and it compile pass. I just thought C++ would treat <code>enum</code> type as <code>unsigned int</code> type in compiling. Thanks for your answer."}, {"owner": {"reputation": 2315, "user_id": 4030223, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/1eoit.png?s=128&g=1", "display_name": "Erik Alap&#228;&#228;", "link": "https://stackoverflow.com/users/4030223/erik-alap%c3%a4%c3%a4"}, "edited": false, "score": 0, "creation_date": 1577875931, "post_id": 59540812, "comment_id": 105272354, "body": "One thing that adds to the confusion is that C is almost a perfect subset of C++. At least, anything you can do in C, you can do in C++ with almost identical code, especially on gcc/clang. You will also need compiler dependent constructs as the C++ replacement for &#39;restrict&#39; in C that is provided by gcc. Enums are different in C and C++, for example, if someColor is enum, &#39;someColor = 1&#39; is legal C, but not C++."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 22, "last_activity_date": 1577776236, "creation_date": 1577776236, "answer_id": 59540812, "question_id": 59540774, "link": "https://stackoverflow.com/questions/59540774/why-is-an-enum-variable-an-rvalue-here/59540812#59540812", "title": "Why is an enum variable an rvalue here?", "body": "<p><code>clr</code> itself is an lvalue of type <code>Color</code>. But the function does not accept a <code>Color</code>. It accepts a (reference to) <code>unsigned int</code>. So, the argument is converted (implicitly). And the result of the conversion is a prvalue of type <code>unsigned int</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "edited": false, "score": 0, "creation_date": 1577777226, "post_id": 59540918, "comment_id": 105251093, "body": "If I change <code>func(unsigned int&amp;)</code> to <code>func(Color&amp;)</code>, compiler accept it. So I think enum type variable is a lvalue."}, {"owner": {"reputation": 50, "user_id": 12630668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HmbsB.jpg?s=128&g=1", "display_name": "superman", "link": "https://stackoverflow.com/users/12630668/superman"}, "reply_to_user": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "edited": false, "score": 0, "creation_date": 1577777448, "post_id": 59540918, "comment_id": 105251154, "body": "no, because enum type can&#39;t assignment int enum define outside"}, {"owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "edited": false, "score": 0, "creation_date": 1577777934, "post_id": 59540918, "comment_id": 105251283, "body": "You mean it still a rvalue? But I bind a not-const lvalue reference to it in <code>func(Color&amp;)</code>, and it pass."}, {"owner": {"reputation": 50, "user_id": 12630668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HmbsB.jpg?s=128&g=1", "display_name": "superman", "link": "https://stackoverflow.com/users/12630668/superman"}, "reply_to_user": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "edited": false, "score": 0, "creation_date": 1577778473, "post_id": 59540918, "comment_id": 105251443, "body": "yes\uff0c it still a rvalue\uff0cfunc(Color&amp; key) this function param key only assignment RED,GREEN,BLUE , Otherwise it will error\u3002"}, {"owner": {"reputation": 50, "user_id": 12630668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HmbsB.jpg?s=128&g=1", "display_name": "superman", "link": "https://stackoverflow.com/users/12630668/superman"}, "reply_to_user": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "edited": false, "score": 0, "creation_date": 1577778647, "post_id": 59540918, "comment_id": 105251493, "body": "you can see <a href=\"https://en.cppreference.com/w/cpp/language/enum\" rel=\"nofollow noreferrer\">this cpp instructions</a>"}, {"owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "edited": false, "score": 0, "creation_date": 1577779085, "post_id": 59540918, "comment_id": 105251622, "body": "thanks for link shared. I know a enum type variable can only accept the value within its enum defined scope. But is it the reason that make enum type variable be a <code>rvalue</code>?"}, {"owner": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "reply_to_user": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "edited": false, "score": 0, "creation_date": 1577810314, "post_id": 59540918, "comment_id": 105261981, "body": "@Koen the problem is not with the enum. You&#39;d get a similar error if you called e.g. <code>func(5u);</code>"}, {"owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "reply_to_user": {"reputation": 14978, "user_id": 673852, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/S5IZ5.png?s=128&g=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/673852/ruslan"}, "edited": false, "score": 0, "creation_date": 1577835414, "post_id": 59540918, "comment_id": 105267364, "body": "Thanks @Ruslan. I think the comments under this answer is outside the original question. I just could&#39;t agree with the opinion of <code>enum type variable is rvalue</code> in the answer."}], "tags": [], "owner": {"reputation": 50, "user_id": 12630668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HmbsB.jpg?s=128&g=1", "display_name": "superman", "link": "https://stackoverflow.com/users/12630668/superman"}, "is_accepted": false, "score": 0, "last_activity_date": 1577776960, "creation_date": 1577776960, "answer_id": 59540918, "question_id": 59540774, "link": "https://stackoverflow.com/questions/59540774/why-is-an-enum-variable-an-rvalue-here/59540918#59540918", "title": "Why is an enum variable an rvalue here?", "body": "<p>enum type init and assignment must be enum inside\uff0cso enum type can't is lvalue\u3002\nvoid func(unsigned int&amp; num) this function need quote type</p>\n"}], "owner": {"reputation": 171, "user_id": 3342565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cxbPb.jpg?s=128&g=1", "display_name": "Koen", "link": "https://stackoverflow.com/users/3342565/koen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 1, "accepted_answer_id": 59540812, "answer_count": 2, "score": 12, "last_activity_date": 1577799341, "creation_date": 1577775972, "last_edit_date": 1577799341, "question_id": 59540774, "link": "https://stackoverflow.com/questions/59540774/why-is-an-enum-variable-an-rvalue-here", "title": "Why is an enum variable an rvalue here?", "body": "<p>Example:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>typedef enum Color\n{\n    RED,\n    GREEN,\n    BLUE\n} Color;\n\nvoid func(unsigned int&amp; num)\n{\n    num++;\n}\n\nint main()\n{\n    Color clr = RED;\n    func(clr);\n    return 0;\n}\n</code></pre>\n\n<p>I get the following error when I compile this:</p>\n\n<pre><code>&lt;source&gt;: In function 'int main()':\n\n&lt;source&gt;:16:9: error: cannot bind non-const lvalue reference of type 'unsigned int&amp;' to an rvalue of type 'unsigned int'\n\n     func(clr);\n\n         ^~~\n</code></pre>\n\n<p>I think the variable (<code>clr</code>) I pass to <code>func(unsigned int&amp;)</code> is an lvalue. I can get the address of <code>clr</code> and can assign another value to it. Why does it turn into an rvalue when I try to pass it to <code>func(unsigned int&amp;)</code>?</p>\n"}, {"tags": ["c++", "c++11", "templates", "function-pointers", "function-templates"], "comments": [{"owner": {"reputation": 6440, "user_id": 27302, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0ee0b2f006682f28d5a6ba5634ade513?s=128&d=identicon&r=PG", "display_name": "Daniel H", "link": "https://stackoverflow.com/users/27302/daniel-h"}, "edited": false, "score": 0, "creation_date": 1577774930, "post_id": 59540605, "comment_id": 105250465, "body": "What&#39;s the error message?"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 1, "creation_date": 1577775031, "post_id": 59540605, "comment_id": 105250497, "body": "I suspect <code>bool(*)(const T1&amp;,const T1&amp;) func</code> needs to be <code>bool(*func)(const T1&amp;,const T1&amp;)</code> in the argument list of <code>compare()</code>."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 2, "creation_date": 1577775231, "post_id": 59540605, "comment_id": 105250536, "body": "When a program does not compile, the first step is to check if the compiler provides an error message."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1577775448, "post_id": 59540605, "comment_id": 105250592, "body": "To extend on the comment by @eerorika - the second step, when posting a question seeking help, is to actually provide the text of the error message.   Where the error message mentions a line number (which is most often true in practice) ensure it is clear what line of code is being referred to."}, {"owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "edited": false, "score": 1, "creation_date": 1577776379, "post_id": 59540605, "comment_id": 105250864, "body": "<i>&quot;I know, I should be using std::function&quot;</i>: You do not want to <a href=\"https://stackoverflow.com/questions/5057382/what-is-the-performance-overhead-of-stdfunction\">have the type erasure overhead</a>, without any reasons."}], "answers": [{"comments": [{"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577775535, "post_id": 59540625, "comment_id": 105250609, "body": "Using a templated predicate would demand even less typing if one was to spell &quot;Binary&quot; correctly."}], "tags": [], "owner": {"reputation": 20494, "user_id": 9609840, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZJmc.png?s=128&g=1", "display_name": "JeJo", "link": "https://stackoverflow.com/users/9609840/jejo"}, "is_accepted": true, "score": 4, "last_activity_date": 1577775621, "last_edit_date": 1577775621, "creation_date": 1577774946, "answer_id": 59540625, "question_id": 59540605, "link": "https://stackoverflow.com/questions/59540605/a-code-using-pointer-to-function-does-not-compile/59540625#59540625", "title": "A code using pointer to function does not compile", "body": "<p>In the argument list of <code>compare()</code> function template, you have a typo in function pointer declaration. It should be</p>\n\n<pre><code>void compare(const T1* str1, const T1* str2, size_t size_m, bool(*func)(const T1&amp;, const T1&amp;) )\n//                                                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n{\n   // ... code\n}\n</code></pre>\n\n<p>To make the function pointer type more (maybe)readable, you could provide a template type alias.</p>\n\n<pre><code>template&lt;typename T1&gt;  // template alias type\nusing FunctionPtrType = bool(*)(const T1&amp;, const T1&amp;);\n\ntemplate&lt;typename T1&gt;\nvoid compare(const T1* str1, const T1* str2, size_t size_m, FunctionPtrType&lt;T1&gt; func)\n//                                                          ^^^^^^^^^^^^^^^^^^^^^^^^\n{\n   // ... code\n}\n</code></pre>\n\n<hr>\n\n<p>However, providing one more template parameter for the predicate would be less typing and less error-prone(IMO).</p>\n\n<pre><code>template&lt;typename T1, typename BinaryPredicate&gt;\nvoid compare(const T1* str1, const T1* str2, size_t size_m, BinaryPredicate func)\n{\n    // ... code\n}\n</code></pre>\n"}], "owner": {"reputation": 6263, "user_id": 9638272, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j0cSF.jpg?s=128&g=1", "display_name": "asmmo", "link": "https://stackoverflow.com/users/9638272/asmmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "closed_date": 1577840607, "accepted_answer_id": 59540625, "answer_count": 1, "score": 2, "last_activity_date": 1577776070, "creation_date": 1577774819, "last_edit_date": 1577776070, "question_id": 59540605, "link": "https://stackoverflow.com/questions/59540605/a-code-using-pointer-to-function-does-not-compile", "closed_reason": "Not suitable for this site", "title": "A code using pointer to function does not compile", "body": "<p>I have used two templates in my code and a pointer to one of the template instantiate. But it doesn't compile.\nCan I know where is the problem? </p>\n\n<pre><code>template&lt;typename T&gt;\nbool matcher(const T&amp; v1, const T&amp; v2)\n{\n    if (v1 == v2) return true;\n    return false;\n}\n\ntemplate&lt;typename T1&gt;\nvoid compare(const T1* str1, const T1* str2, size_t size_m, bool(*)(const T1&amp;, const T1&amp;) func)\n{\n    for (size_t count{}; count &lt; size_m; count++)\n        if (func(str1[count], str2[count]))\n            std::cout &lt;&lt; \"Mach at index of \" &lt;&lt; count &lt;&lt; \" is found\\n\";\n}\n\nint main()\n{\n    compare(\"888888\", \"98887\", 4, &amp;matcher&lt;char&gt;);\n    return 0;\n}\n</code></pre>\n\n<p>I know, I should be using <code>std::function</code> but I want to try this.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1577773958, "post_id": 59540130, "comment_id": 105250220, "body": "Are you, perchance, using a Windows SDK from an older version of VS? If so, the STL headers there may not be compatible with the &quot;strictness&quot; and language standard settings for your VS2019 project."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1577774203, "post_id": 59540130, "comment_id": 105250290, "body": "@AdrianMole I&#39;m using the latest SDK and created a new solution to test out the snippet in case there was some setting I had made. But I&#39;ll check it in a new install on a different machine. BTW, same errors in a x64 and x86 compile."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1577774757, "post_id": 59540130, "comment_id": 105250413, "body": "I ran your code in my VS2019 at W3 with conformance mode on in debug mode x86 and I get no warnings at all.  If you run this exact example, do you get the warning?  I ask because the compiler warnings for <code>Source.cpp</code> don&#39;t match what you have.  They refer to lines in the 1300&#39;s and that doesn&#39;t match up."}, {"owner": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1577774851, "post_id": 59540130, "comment_id": 105250452, "body": "The initial <i>real</i> warning is about precision loss for conversion from size_t to int. Those <i>messages</i> might just be follow ups where this former issue might play a role (<i>&#39;see reference&#39;</i>). Using size_t as corrected type, too, with chrono included might eliminate the chrono related messages as well."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1577775712, "post_id": 59540130, "comment_id": 105250651, "body": "@NathanOliver-ReinstateMonica I just ran the code on a different machine where the VC2019 was a fresh install and it also shows no errors. I checked and <code>&#47;permissive-</code> is set for conformance and they have the same include search paths and other compiler settings. However the machine it&#39;s showing up on has been upgraded sequentially from earlier versions so perhaps something wasn&#39;t upgraded properly. I&#39;ll do a deep dive tomorrow. Both were set for C++17  The lines are apparently in <code>chrono</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1577776051, "post_id": 59540130, "comment_id": 105250768, "body": "@doug Your warnbing says <code>Source.cpp(1343,1): warning C4267:</code> which means the problem is from line 1343.  There is no line 1343 so the code show cant be the code that is in this post."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 19667, "user_id": 1312382, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FL8Fg.jpg?s=128&g=1", "display_name": "Aconcagua", "link": "https://stackoverflow.com/users/1312382/aconcagua"}, "edited": false, "score": 0, "creation_date": 1577776169, "post_id": 59540130, "comment_id": 105250800, "body": "@Aconcagua. The errors go away when size_t is used instead of int regardless of whether chrono is included. However, if chrono is included then the errors occur when int is used. Interestingly, no errors occur with a fresh install on another computer. Strange."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1577776357, "post_id": 59540130, "comment_id": 105250857, "body": "@NathanOliver-ReinstateMonica. You&#39;re right. I initially paired the code down by commenting out lots of stuff. The code I pasted was from the bottom of that. I&#39;ll remove the commented top and edit the question."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1577776462, "post_id": 59540130, "comment_id": 105250888, "body": "Okay.  Just trying to make sure the code that is the issue is what is shown.  Pretty sure it was but you wouldn&#39;t be the first person that was looking at the wrong code if it wasn&#39;t"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1577776772, "post_id": 59540130, "comment_id": 105250979, "body": "@NathanOliver-ReinstateMonica Just re-ran it removing the commented out stuff and edited the question. Thanks for noticing that!"}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1577838730, "post_id": 59540130, "comment_id": 105267721, "body": "@NathanOliver-ReinstateMonica I&#39;ve found a way to easily replicate the problem with a current VS2019. Create a console app. Paste in the problem code. Compile. No problem. Now delete the hidden &quot;.vs&quot; directory in the solution folder and reload the program. The bug occurs.  VS2019 recreates the &quot;.vs&quot; folder but with a different structure ???  And, of course, GIT doesn&#39;t back up the &quot;.vs&quot; folder. My concern is where else this may become a problem rather than an annoyance or what options enable this peculiar behavior."}, {"owner": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1577906999, "post_id": 59540130, "comment_id": 105279448, "body": "I can reproduce the warning even without <code>#include &lt;chrono&gt;</code>.  The problem is the truncation from <code>size_t</code> to <code>int</code>. <code>chrono</code> is a red herring. Indeed, I get <a href=\"https://gcc.godbolt.org/z/QNVmFt\" rel=\"nofollow noreferrer\">no warnings about <code>chrono</code> at all</a>."}, {"owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "reply_to_user": {"reputation": 42446, "user_id": 902497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff13ece6277497484bfa2911c6183a30?s=128&d=identicon&r=PG", "display_name": "Raymond Chen", "link": "https://stackoverflow.com/users/902497/raymond-chen"}, "edited": false, "score": 0, "creation_date": 1577912312, "post_id": 59540130, "comment_id": 105280529, "body": "@RaymondChen Yeah, looks like a wild goose chase. Turns out the chrono references are spurious. No idea what causes them since chrono is not involved in the C4267 warning or anywhere else in the code. When I deleted the .vs folder the solution reverted to x86 from x64 dropping C4267 but I didn&#39;t notice the reversion, Duh. Still am concerned as to why the chrono messages are getting output but it hopefully isn&#39;t a sign of some other issue. I&#39;m fine with warnings that I understand."}], "owner": {"reputation": 1680, "user_id": 5282154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a468ae12f72b587ad0c4e89ffde11839?s=128&d=identicon&r=PG", "display_name": "doug", "link": "https://stackoverflow.com/users/5282154/doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1577912701, "creation_date": 1577771678, "last_edit_date": 1577912701, "question_id": 59540130, "link": "https://stackoverflow.com/questions/59540130/compiler-warning-from-stdchrono-but-is-not-being-used", "title": "Compiler warning from std::chrono but is not being used", "body": "<p>NOTE: This bug only occurs with x64 projects in both release and debug modes.</p>\n\n<p>Odd warnings involving <code>std::chrono</code> appear on this piece of code using VC2019 at warning level 3. This is a stripped down piece of code that processes command line flags. I've removed most of the guts that aren't relevant to the problem.</p>\n\n<pre><code>#if 1   // enable bug\n#include &lt;chrono&gt;   // excluding this also eliminates chrono warnings\nusing CorrectedIntType=int;\n#else\nusing CorrectedIntType=size_t;\n#endif\n\n#include &lt;iostream&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;type_traits&gt;\n\nusing std::vector;\nusing std::string;\n\nnamespace {\n    void fixup(const std::string&amp; argcmd, std::string&amp; arg) { arg = argcmd; }\n\n    template&lt;class T&gt;\n    void procVal(std::vector&lt;std::string&gt;&amp; arglist, CorrectedIntType idx, T&amp; arg)\n    {\n        fixup(arglist[idx], arg);\n        arglist.erase(arglist.begin() + idx);\n    }\n\n    template&lt;class T, class ...TA&gt;\n    void procVal(std::vector&lt;std::string&gt;&amp; arglist, CorrectedIntType idx, T&amp; arg, TA&amp;...argv)\n    {\n        procVal(arglist, idx, arg);\n        procVal(arglist, idx, argv...);\n    }\n\n    template&lt;class T, class ...TA&gt;\n    bool procFlag(const char* pc, std::vector&lt;std::string&gt;&amp; arglist, T&amp; arg1, TA&amp;...argv)\n    {\n        std::string flag(pc);\n        for (size_t i = 0; i &lt; arglist.size(); i++)\n        {\n            if (arglist[i] == flag)\n            {\n                arglist.erase(arglist.begin() + i);\n                procVal(arglist, i, arg1);      // process one argument after flag\n                return true;\n            }\n        }\n        return false;\n    }\n}\n\nint main()\n{\n    string outfile;\n    vector&lt;string&gt; test = { \"test\" };\n    procFlag(\"-o\", test, outfile);      // assigns test[0] to outfile and removes it\n    std::cout &lt;&lt; outfile &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>Warnings:</p>\n\n<pre><code>1&gt;Source.cpp\n1&gt;C:\\Users\\mgray\\Documents\\Visual Studio 2017\\Projects\\CommandLineCPP\\stackoverflow\\Source.cpp(35,1): warning C4267: 'argument': conversion from 'size_t' to 'CorrectedIntType', possible loss of data\n1&gt;C:\\Users\\mgray\\Documents\\Visual Studio 2017\\Projects\\CommandLineCPP\\stackoverflow\\Source.cpp(54): message : see reference to function template instantiation 'bool `anonymous-namespace'::procFlag&lt;std::string,&gt;(const char *,std::vector&lt;std::string,std::allocator&lt;std::string&gt;&gt; &amp;,T &amp;)' being compiled\n1&gt;        with\n1&gt;        [\n1&gt;            T=std::string\n1&gt;        ]\n1&gt;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Enterprise\\VC\\Tools\\MSVC\\14.24.28314\\include\\chrono(632): message : see reference to class template instantiation 'std::chrono::duration&lt;double,std::ratio&lt;1,1&gt;&gt;' being compiled\n1&gt;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Enterprise\\VC\\Tools\\MSVC\\14.24.28314\\include\\chrono(178): message : see reference to class template instantiation 'std::chrono::duration&lt;__int64,std::nano&gt;' being compiled\n1&gt;C:\\Program Files (x86)\\Microsoft Visual Studio\\2019\\Enterprise\\VC\\Tools\\MSVC\\14.24.28314\\include\\chrono(610): message : see reference to class template instantiation 'std::chrono::time_point&lt;std::chrono::steady_clock,std::chrono::nanoseconds&gt;' being compiled\n</code></pre>\n\n<p>While the code works, even with the <code>int -&lt;&gt; size_t</code> conversion issue which is a legitimate warning, all warnings go away when the macro at the top is set to 0. So somehow the size difference between size_t and int triggers chrono messages. It concerns me that the <code>chrono</code> warnings exist since it isn't involved. Is this a bug in VS2019? Any ideas as to why the <code>chrono</code> warning references are occurring?</p>\n"}, {"tags": ["c++", "c", "mesa"], "comments": [{"owner": {"reputation": 192, "user_id": 6943262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e1d451b2abb790c1cf0a1f80a301dfa?s=128&d=identicon&r=PG&f=1", "display_name": "paxbun", "link": "https://stackoverflow.com/users/6943262/paxbun"}, "edited": false, "score": 0, "creation_date": 1577767276, "post_id": 59539604, "comment_id": 105248935, "body": "I&#39;m using WSL on windows, and got the same error in different library when using CRLF instead of LF. Maybe this will help."}, {"owner": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 10, "creation_date": 1577767443, "post_id": 59539604, "comment_id": 105248955, "body": "this is a bit out there, but this looks like what happens when you <code>git clone</code> a repository on a platform which does not have symlink support (such as windows)"}, {"owner": {"reputation": 3641, "user_id": 4400820, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh4.googleusercontent.com/-zJIsBHmva1w/AAAAAAAAAAI/AAAAAAAAAFA/VyUtonEauos/photo.jpg?sz=128", "display_name": "D. Ben Knoble", "link": "https://stackoverflow.com/users/4400820/d-ben-knoble"}, "reply_to_user": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 1, "creation_date": 1577767645, "post_id": 59539604, "comment_id": 105248997, "body": "@AnthonySottile my thoughts exactly. Regardless, it\u2019s almost certainly intended to be a symlink."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1577768170, "post_id": 59539604, "comment_id": 105249104, "body": "<a href=\"https://stackoverflow.com/a/42137273/560648\">stackoverflow.com/a/42137273/560648</a>"}, {"owner": {"reputation": 69, "user_id": 10831671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388aaa89e82d554017da7398ec07e73b?s=128&d=identicon&r=PG&f=1", "display_name": "Y.L", "link": "https://stackoverflow.com/users/10831671/y-l"}, "reply_to_user": {"reputation": 39425, "user_id": 812183, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9639bd6ee5dfd07ff05fb848e67e9657?s=128&d=identicon&r=PG", "display_name": "Anthony Sottile", "link": "https://stackoverflow.com/users/812183/anthony-sottile"}, "edited": false, "score": 0, "creation_date": 1577773310, "post_id": 59539604, "comment_id": 105250057, "body": "@AnthonySottile Thanks! I think this is the root cause. I actually have cloned the repo into windows and update to my own git server because some wired network issue happend."}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 10831671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388aaa89e82d554017da7398ec07e73b?s=128&d=identicon&r=PG&f=1", "display_name": "Y.L", "link": "https://stackoverflow.com/users/10831671/y-l"}, "is_accepted": false, "score": 1, "last_activity_date": 1577783223, "creation_date": 1577783223, "answer_id": 59541912, "question_id": 59539604, "link": "https://stackoverflow.com/questions/59539604/why-this-c-file-just-have-one-line-xx-xx-c/59541912#59541912", "title": "Why this .c file just have one line &quot;../xx/xx.c&quot;?", "body": "<p>As AnthonySottile's comment said, this error is about the symbol link support. I have cloned this repo to windows before and upload to my own git server. And the error occured when I trying to build the source code from my git.</p>\n\n<p>I try to clone the repo from mesa3d.org, and the issue resolved.</p>\n\n<p>Thanks for the help, guys.</p>\n"}], "owner": {"reputation": 69, "user_id": 10831671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/388aaa89e82d554017da7398ec07e73b?s=128&d=identicon&r=PG&f=1", "display_name": "Y.L", "link": "https://stackoverflow.com/users/10831671/y-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577783223, "creation_date": 1577766606, "question_id": 59539604, "link": "https://stackoverflow.com/questions/59539604/why-this-c-file-just-have-one-line-xx-xx-c", "title": "Why this .c file just have one line &quot;../xx/xx.c&quot;?", "body": "<p>I want to build mesa3d source code for some reason. I follow the guide on <a href=\"https://mesa3d.org/install.html\" rel=\"nofollow noreferrer\">https://mesa3d.org/install.html</a> and the build environment is fedora31 and gcc9.2, but there are some build error when I trying to build the code with running <code>ninja install</code>.</p>\n\n<blockquote>\n  <p>FAILED: src/mesa/drivers/dri/r200/58cd8d4@@r200@sta/radeon_buffer_objects.c.o \n  cc -Isrc/mesa/drivers/dri/r200/58cd8d4@@r200@sta -Isrc/mesa/drivers/dri/r200 -I../src/mesa/drivers/dri/r200 -Iinclude -I../include -Isrc -I../src -Isrc/mapi -I../src/mapi -Isrc/mesa -I../src/mesa -I../src/gallium/include -Isrc/gallium/auxiliary -I../src/gallium/auxiliary -Isrc/mesa/drivers/dri/common -I../src/mesa/drivers/dri/common -Isrc/util -I../src/util -I../src/mesa/drivers/dri/r200/server -Isrc/util/xmlpool -I/usr/include/libdrm -fdiagnostics-color=always -pipe -D_FILE_OFFSET_BITS=64 -Wall -Winvalid-pch -std=c99 -O2 -g -D__STDC_CONSTANT_MACROS -D__STDC_FORMAT_MACROS -D__STDC_LIMIT_MACROS '-DPACKAGE_VERSION=\"20.0.0-devel\"' '-DPACKAGE_BUGREPORT=\"https://gitlab.freedesktop.org/mesa/mesa/issues\"' -DUSE_ELF_TLS -DHAVE_ST_VDPAU -DENABLE_ST_OMX_BELLAGIO=0 -DENABLE_ST_OMX_TIZONIA=0 -DHAVE_X11_PLATFORM -DGLX_INDIRECT_RENDERING -DGLX_DIRECT_RENDERING -DGLX_USE_DRM -DHAVE_DRM_PLATFORM -DHAVE_SURFACELESS_PLATFORM -DENABLE_SHADER_CACHE -DHAVE___BUILTIN_BSWAP32 -DHAVE___BUILTIN_BSWAP64 -DHAVE___BUILTIN_CLZ -DHAVE___BUILTIN_CLZLL -DHAVE___BUILTIN_CTZ -DHAVE___BUILTIN_EXPECT -DHAVE___BUILTIN_FFS -DHAVE___BUILTIN_FFSLL -DHAVE___BUILTIN_POPCOUNT -DHAVE___BUILTIN_POPCOUNTLL -DHAVE___BUILTIN_UNREACHABLE -DHAVE_FUNC_ATTRIBUTE_CONST -DHAVE_FUNC_ATTRIBUTE_FLATTEN -DHAVE_FUNC_ATTRIBUTE_MALLOC -DHAVE_FUNC_ATTRIBUTE_PURE -DHAVE_FUNC_ATTRIBUTE_UNUSED -DHAVE_FUNC_ATTRIBUTE_WARN_UNUSED_RESULT -DHAVE_FUNC_ATTRIBUTE_WEAK -DHAVE_FUNC_ATTRIBUTE_FORMAT -DHAVE_FUNC_ATTRIBUTE_PACKED -DHAVE_FUNC_ATTRIBUTE_RETURNS_NONNULL -DHAVE_FUNC_ATTRIBUTE_VISIBILITY -DHAVE_FUNC_ATTRIBUTE_ALIAS -DHAVE_FUNC_ATTRIBUTE_NORETURN -DHAVE_UINT128 -D_GNU_SOURCE -DUSE_SSE41 -DUSE_GCC_ATOMIC_BUILTINS -DUSE_X86_64_ASM -DMAJOR_IN_SYSMACROS -DHAVE_SYS_SYSCTL_H -DHAVE_LINUX_FUTEX_H -DHAVE_ENDIAN_H -DHAVE_DLFCN_H -DHAVE_EXECINFO_H -DHAVE_SYS_SHM_H -DHAVE_CET_H -DHAVE_STRTOF -DHAVE_MKOSTEMP -DHAVE_TIMESPEC_GET -DHAVE_MEMFD_CREATE -DHAVE_RANDOM_R -DHAVE_FLOCK -DHAVE_STRTOK_R -DHAVE_PROGRAM_INVOCATION_NAME -DHAVE_POSIX_MEMALIGN -DHAVE_STRTOD_L -DHAVE_DLADDR -DHAVE_DL_ITERATE_PHDR -DHAVE_ZLIB -DHAVE_PTHREAD -DHAVE_PTHREAD_SETAFFINITY -DHAVE_LIBDRM -DLLVM_AVAILABLE '-DMESA_LLVM_VERSION_STRING=\"9.0.0\"' -DHAVE_VALGRIND -DHAVE_WAYLAND_PLATFORM -DWL_HIDE_DEPRECATED -DHAVE_DRI3 -DHAVE_DRI3_MODIFIERS -Werror=implicit-function-declaration -Werror=missing-prototypes -Werror=return-type -Werror=empty-body -Werror=incompatible-pointer-types -Wno-missing-field-initializers -Wno-format-truncation -fno-math-errno -fno-trapping-math -Werror=format -Wformat-security -fPIC -fvisibility=hidden -DRADEON_R200 -MD -MQ 'src/mesa/drivers/dri/r200/58cd8d4@@r200@sta/radeon_buffer_objects.c.o' -MF 'src/mesa/drivers/dri/r200/58cd8d4@@r200@sta/radeon_buffer_objects.c.o.d' -o 'src/mesa/drivers/dri/r200/58cd8d4@@r200@sta/radeon_buffer_objects.c.o' -c ../src/mesa/drivers/dri/r200/radeon_buffer_objects.c\n  ../src/mesa/drivers/dri/r200/radeon_buffer_objects.c:1:1: error: expected identifier or '(' before '.' token</p>\n</blockquote>\n\n<pre><code>1 | ../radeon/radeon_buffer_objects.c\n  | ^\n</code></pre>\n\n<p>Then I check the radeon_buffer_objects.c, and this file just have one file path in it.</p>\n\n<blockquote>\n  <p>../radeon/radeon_buffer_objects.c</p>\n</blockquote>\n\n<p>I'm not very familier with gcc and clang. What is that mean? And how can I resolve this build error?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 500, "user_id": 11101828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2edfd65d32e06b6627ed29f7b3d2dd6f?s=128&d=identicon&r=PG&f=1", "display_name": "ezegoing", "link": "https://stackoverflow.com/users/11101828/ezegoing"}, "edited": false, "score": 1, "creation_date": 1577766743, "post_id": 59539536, "comment_id": 105248825, "body": "I&#39;ve seen this question on SO before. The point is that your thread is not using <code>t_thread_local</code> and therefore won&#39;t even bother constructing it. Imagine you have a big program with a lot of thread_locals but only use a small portion of them, it would be very inefficient to construct/initialize all thread_locals (including the not used once) on every new thread."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 5, "last_activity_date": 1577766759, "last_edit_date": 1592644375, "creation_date": 1577766759, "answer_id": 59539620, "question_id": 59539536, "link": "https://stackoverflow.com/questions/59539536/constructor-and-destructor-of-initialized-static-thread-local-struct-not-invoked/59539620#59539620", "title": "Constructor and Destructor of initialized static thread_local struct not invoked", "body": "<p>Your assumption that merely declaring &amp; defining these objects must assuredly trigger pre-<code>main</code> construction is incorrect.</p>\n<blockquote>\n<p><a href=\"http://eel.is/c++draft/basic.stc.thread#2\" rel=\"noreferrer\"><code>[basic.stc.thread/2]</code></a>: <em>[ Note:</em> A variable with thread storage duration is initialized as specified in [basic.start.static], [basic.start.dynamic], and [stmt.dcl] and, if constructed, is destroyed on thread exit ([basic.start.term]). <em>\u2014 end note ]</em></p>\n<p><a href=\"http://eel.is/c++draft/basic.start.dynamic#5\" rel=\"noreferrer\"><code>[basic.start.dynamic/5]</code></a>: It is implementation-defined whether the dynamic initialization of a non-local non-inline variable with static storage duration is sequenced before the first statement of main or is deferred. If it is deferred, it strongly happens before any non-initialization odr-use of any non-inline function or non-inline variable defined in the same translation unit as the variable to be initialized. <em>[..]</em></p>\n</blockquote>\n<p>There are in fact a number of similar rules in <code>basic.start.dynamic</code>.</p>\n<p>Point is, your program doesn't do very much, and it certainly doesn't use <code>t_thread_local</code>, so it's up to the compiler as to whether <code>t_thread_local</code> will ever really exist and, if so, when.</p>\n"}], "owner": {"reputation": 118, "user_id": 7768797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63c2be7130f783f3041a548a7a1ad73d?s=128&d=identicon&r=PG", "display_name": "cchaos", "link": "https://stackoverflow.com/users/7768797/cchaos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 59539620, "answer_count": 1, "score": 2, "last_activity_date": 1577766759, "creation_date": 1577766077, "question_id": 59539536, "link": "https://stackoverflow.com/questions/59539536/constructor-and-destructor-of-initialized-static-thread-local-struct-not-invoked", "title": "Constructor and Destructor of initialized static thread_local struct not invoked", "body": "<p>The code below supposedly initializes a <code>static thread-local</code> and <code>static</code> struct.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nstruct Tracer {\npublic:\n  Tracer(const char *new_name) : name{new_name} {\n    printf(\"%s : Constructor()\\n\", this-&gt;name);\n  }\n\n  ~Tracer() {\n    printf(\"%s : Destructor()\\n\", this-&gt;name);\n  }\n\nprivate:\n  const char *name;\n};\n\n// 1. Thread-Local Storage Duration\nstatic thread_local Tracer t_thread_local{\"Thread-Local Storage Duration\"};\n\n// 2. Static Storage Duration\nstatic Tracer t_static{\"Static Storage Duration\"};\n\nint main() {\n  printf(\"Start Program\\n\");\n}\n</code></pre>\n\n<p>However, I don't see the message expected from the <code>static thread-local</code> struct Constructor/Destructor. The output printed only shows messages from the <code>static</code> struct. Am I missing something?</p>\n\n<pre><code>Static Storage Duration : Constructor()\nStart Program\nStatic Storage Duration : Destructor()\n</code></pre>\n"}, {"tags": ["c++", "language-lawyer", "constexpr", "initializer-list", "string-literals"], "comments": [{"owner": {"reputation": 26838, "user_id": 135769, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Pghgx.jpg?s=128&g=1", "display_name": "3Dave", "link": "https://stackoverflow.com/users/135769/3dave"}, "edited": false, "score": 0, "creation_date": 1577765890, "post_id": 59539488, "comment_id": 105248682, "body": "Error message aside, it really doesn&#39;t make any sense to use <code>initializer_list</code> in that way. Just use a <code>char*</code> or <code>char[]</code>. And, the comment about &quot;ensuring value isn&#39;t optimized out&quot; makes zero sense in terms of <code>constexpr</code>. What are you really trying to do?"}, {"owner": {"reputation": 16020, "user_id": 9716597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f97c613dca0b157b40551a0d756abeb?s=128&d=identicon&r=PG&f=1", "display_name": "L. F.", "link": "https://stackoverflow.com/users/9716597/l-f"}, "edited": false, "score": 0, "creation_date": 1577766491, "post_id": 59539488, "comment_id": 105248781, "body": "Same error with C++17: <a href=\"https://wandbox.org/permlink/jssB6NE5JrGy3YbP\" rel=\"nofollow noreferrer\">GCC</a> <a href=\"https://wandbox.org/permlink/lC8OVMJyIMHSMinj\" rel=\"nofollow noreferrer\">Clang</a>"}, {"owner": {"reputation": 395, "user_id": 6059867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fFwza.jpg?s=128&g=1", "display_name": "Alec C", "link": "https://stackoverflow.com/users/6059867/alec-c"}, "edited": false, "score": 0, "creation_date": 1577766905, "post_id": 59539488, "comment_id": 105248856, "body": "3Dave learning c++ so sorry for my lack of knowledge, upon reflection I didn&#39;t put that much thought into it, so yes it doesn&#39;t make any sense :P. This is also a simplified version of something more complicated, so regardless of if it does or doesn&#39;t make sense I&#39;d still like to know what&#39;s going on."}], "answers": [{"tags": [], "owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1577775004, "last_edit_date": 1577775004, "creation_date": 1577774556, "answer_id": 59540562, "question_id": 59539488, "link": "https://stackoverflow.com/questions/59539488/weird-behaviour-constexpr-with-stdinitializer-list/59540562#59540562", "title": "Weird behaviour constexpr with std::initializer_list", "body": "<p>The problem is with the initialization of <code>broken</code> itself here. What is a <code>std::initializer_list</code> and what does it hold? It's a reference type (i.e. refers somehow to another objects), and it's backed by a c-style array. The properties of this c-style array are what determines if the initializer_list can be a constexpr variable. We can consult <strong>[dcl.init.list]</strong> for those properties.</p>\n\n<blockquote>\n  <p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init.list#5\" rel=\"nofollow noreferrer\">5</a> An object of type <code>std\u200b::\u200binitializer_\u00adlist&lt;E&gt;</code> is constructed\n  from an initializer list as if the implementation generated and\n  materialized a prvalue of type \u201carray of <code>N</code> <code>const E</code>\u201d, where <code>N</code> is\n  the number of elements in the initializer list. Each element of that\n  array is copy-initialized with the corresponding element of the\n  initializer list, and the <code>std\u200b::\u200binitializer_\u00adlist&lt;E&gt;</code> object is\n  constructed to refer to that array. [\u2009Note: A constructor or\n  conversion function selected for the copy shall be accessible in the\n  context of the initializer list. \u2009\u2014\u2009end note\u2009] If a narrowing\n  conversion is required to initialize any of the elements, the program\n  is ill-formed. [\u2009Example:</p>\n\n<pre><code>struct X {\n  X(std::initializer_list&lt;double&gt; v);\n};\nX x{ 1,2,3 };\n</code></pre>\n  \n  <p>The initialization will be implemented in a way roughly equivalent to\n  this:</p>\n\n<pre><code>const double __a[3] = {double{1}, double{2}, double{3}};\nX x(std::initializer_list&lt;double&gt;(__a, __a+3));\n</code></pre>\n  \n  <p>assuming that the implementation can construct an <code>initializer_\u00adlist</code>\n  object with a pair of pointers. \u2009\u2014\u2009end example\u2009]</p>\n  \n  <p><a href=\"https://timsong-cpp.github.io/cppwp/n4659/dcl.init.list#6\" rel=\"nofollow noreferrer\">6</a> The array has the same lifetime as any other temporary object,\n  except that initializing an <code>initializer_\u00adlist</code> object from the array\n  extends the lifetime of the array exactly like binding a reference to\n  a temporary. [\u2009Example:</p>\n\n<pre><code>typedef std::complex&lt;double&gt; cmplx;\nstd::vector&lt;cmplx&gt; v1 = { 1, 2, 3 };\n\nvoid f() {\n  std::vector&lt;cmplx&gt; v2{ 1, 2, 3 };\n  std::initializer_list&lt;int&gt; i3 = { 1, 2, 3 };\n}\n\nstruct A {\n  std::initializer_list&lt;int&gt; i4;\n  A() : i4{ 1, 2, 3 } {}  // ill-formed, would create a dangling reference\n};\n</code></pre>\n  \n  <p>For <code>v1</code> and <code>v2</code>, the <code>initializer_\u00adlist</code> object is a parameter in a\n  function call, so the array created for <code>{ 1, 2, 3 }</code> has\n  full-expression lifetime. For <code>i3</code>, the <code>initializer_\u00adlist</code> object is\n  a variable, so the array persists for the lifetime of the variable.\n  For <code>i4</code>, the <code>initializer_\u00adlist</code> object is initialized in the\n  constructor's ctor-initializer as if by binding a temporary array to a\n  reference member, so the program is ill-formed ([class.base.init]).\n  \u2009\u2014\u2009end example\u2009] [\u2009Note: The implementation is free to allocate the\n  array in read-only memory if an explicit array with the same\n  initializer could be so allocated. \u2009\u2014\u2009end note\u2009]</p>\n</blockquote>\n\n<p>So this array is like any other temporary object that is referred to by a constant reference. Which means we can actually reduce your minimal example to something even smaller</p>\n\n<pre><code>constexpr int test_cexpr(int const &amp; x)\n{\n    return x; \n}\n\nint main()\n{\n    constexpr int r1 = test_cexpr(0);\n\n    constexpr int const &amp;broken = 0;\n    constexpr int r2 = test_cexpr(broken);\n\n    return r1 + r2;\n}\n</code></pre>\n\n<p>This produces <a href=\"https://wandbox.org/permlink/4PrpaqcRPL3Vt6Ia\" rel=\"nofollow noreferrer\">the exact same behavior and error</a>. We can pass <code>0</code> directly as an argument to the constexpr function, the reference binds, and we can even refer to it inside the function. However, a constexpr reference may not be initialized with 0. The reason for zero not being a valid initializer, is that it requires materializing a temporary <code>int</code> object. This temporary is not a static variable, and so may not be used to initialize a constexpr reference. Simple as that.</p>\n\n<p>The same reasoning applies to your case. The temporary array that's materialized is not an object with static storage duration, so it may not be used to initialize a constexpr reference type.</p>\n\n<p>The reason it works when directly passing the argument to <code>test_cexpr</code>, is that the corresponding parameter is not itself a constexpr variable. Which means it can bind successfully. After which, the thing it's bound to just has to be usable in a constant expression. Without going into too much detail over this: since the temporary in that case has full-expression lifetime (and not lifetime extended), it is usable in a constant expression.  </p>\n"}], "owner": {"reputation": 395, "user_id": 6059867, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fFwza.jpg?s=128&g=1", "display_name": "Alec C", "link": "https://stackoverflow.com/users/6059867/alec-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 2, "accepted_answer_id": 59540562, "answer_count": 1, "score": 6, "last_activity_date": 1579130870, "creation_date": 1577765622, "last_edit_date": 1579130870, "question_id": 59539488, "link": "https://stackoverflow.com/questions/59539488/weird-behaviour-constexpr-with-stdinitializer-list", "title": "Weird behaviour constexpr with std::initializer_list", "body": "<p>I am trying to understand why the compiler is complaining here:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>// cexpr_test.cpp\n#include &lt;initializer_list&gt;\n\nconstexpr int test_cexpr(std::initializer_list&lt;const char*&gt; x)\n{\n    return (int) (*x.begin())[0]; // ensuring the value isn't optimized out.\n}\n\nint main()\n{\n    constexpr int r1 = test_cexpr({ \"why does this work,\" });\n\n    constexpr std::initializer_list&lt;const char*&gt; broken { \"but this doesn't?\" };\n    constexpr int r2 = test_cexpr(broken);\n\n    return r1 + r2;\n}\n</code></pre>\n\n<p>The message produced when compiled with  </p>\n\n<pre><code>g++ -std=c++11 -Wall -Werror cexpr_test.cpp \n</code></pre>\n\n<p>is as follows: </p>\n\n<blockquote>\n  <p>cexpr_test.cpp: In function \u2018int main()\u2019:\n  cexpr_test.cpp:12:76: error: \u2018const std::initializer_list{((const char* const*)(&amp;)), 1}\u2019 is not a constant expression\n     12 |  constexpr std::initializer_list broken { \"but this doesn't?\" };\n        |</p>\n</blockquote>\n\n<p>It's confusing why it constructs the first initializer list without any issues. What am I missing here?</p>\n"}, {"tags": ["c++", "networking", "boost-asio", "network-protocols", "bytebuffer"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1577765816, "post_id": 59539404, "comment_id": 105248668, "body": "Note that according to <a href=\"http://www.asciitable.com\" rel=\"nofollow noreferrer\">asciitable.com</a> ASCII character 123 is { (i.e. the left-curly-brace character).  My guess is that the server is interpreting the curly brace you send at the start of your JSON string as part of the packet ID."}, {"owner": {"reputation": 5, "user_id": 12230328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAGDaBwCmB4okuniypPL73Rcp6CKwYRYX1-bqen=k-s128", "display_name": "0xLyptox", "link": "https://stackoverflow.com/users/12230328/0xlyptox"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1577766243, "post_id": 59539404, "comment_id": 105248733, "body": "@JeremyFriesner This was really helpful! But now I&#39;m thinking how I could fix that. I&#39;m looking up to the wiki.vg Page! Eventually I can find any Solution to that problem."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1577766790, "post_id": 59539404, "comment_id": 105248833, "body": "I suggest capturing a &quot;known good&quot; packet (either via WireShark or similar, or by pointing a known-working client at a server that has been instrumented to print out hex dumps of the packets it receives); then eyeball-compare that known-good packet&#39;s bytes against the bytes of the packet your program is sending.  If the packets are different (especially in the first few bytes), then presumably your program&#39;s packet is wrong and the known-good packet is correct."}, {"owner": {"reputation": 5, "user_id": 12230328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAGDaBwCmB4okuniypPL73Rcp6CKwYRYX1-bqen=k-s128", "display_name": "0xLyptox", "link": "https://stackoverflow.com/users/12230328/0xlyptox"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1577769190, "post_id": 59539404, "comment_id": 105249295, "body": "@JeremyFriesner I captured the known-good packet but it&#39;s not capturing my Response to the Notchian Client. I filtered the tcp port to 25565. So how could I most suitable compare it?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1577804858, "post_id": 59539404, "comment_id": 105260284, "body": "Have your program print out the packet&#39;s bytes when it sends them:  <code>for (size_t j=0; j&lt;buf.size(); j++) printf(&quot;%02x &quot;, buf[j]); printf(&quot;\\n&quot;);</code>"}, {"owner": {"reputation": 5, "user_id": 12230328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAGDaBwCmB4okuniypPL73Rcp6CKwYRYX1-bqen=k-s128", "display_name": "0xLyptox", "link": "https://stackoverflow.com/users/12230328/0xlyptox"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1577809621, "post_id": 59539404, "comment_id": 105261783, "body": "@JeremyFriesner I have now the bytes from my packet. But when I do compare it with another Server response, I don&#39;t know what I need to do now. The good-known Packet from the another Server response has at first 0x00 then it goes with another 30 bytes with other Hexadecimals. Here is a <a href=\"https://imgur.com/a/h7cJ3WU\" rel=\"nofollow noreferrer\">Screen</a>. Left is the good-known Packet and the right side is the wrong Packet"}, {"owner": {"reputation": 5, "user_id": 12230328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAGDaBwCmB4okuniypPL73Rcp6CKwYRYX1-bqen=k-s128", "display_name": "0xLyptox", "link": "https://stackoverflow.com/users/12230328/0xlyptox"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1577811600, "post_id": 59539404, "comment_id": 105262391, "body": "@JeremyFriesner I got it, I need to write a Non Compressed Packet at first. But for that I do need a VarInt. But how could I write that? Because at the <a href=\"https://wiki.vg/Protocol#Data_types\" rel=\"nofollow noreferrer\">Documentation</a> Page it&#39;s writing with three of some bitshift characters &quot;value &gt;&gt;&gt;= 7&quot;."}], "owner": {"reputation": 5, "user_id": 12230328, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAGDaBwCmB4okuniypPL73Rcp6CKwYRYX1-bqen=k-s128", "display_name": "0xLyptox", "link": "https://stackoverflow.com/users/12230328/0xlyptox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 249, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577764817, "creation_date": 1577764817, "last_edit_date": 1592644375, "question_id": 59539404, "link": "https://stackoverflow.com/questions/59539404/something-is-went-wrong-when-im-sending-a-created-packet-with-boostasio-to-a-m", "title": "Something is went wrong when im sending a created Packet with boost::asio to a Minecraft Client", "body": "<blockquote>\n<p><strong>Goal</strong> and <strong>Instruction</strong> to the Protocol about <strong>Notchian</strong> Communication</p>\n</blockquote>\n<p>I have a Server Application that uses <strong>boost::asio's</strong> asynchronous read/write Functions to communicate with connecting <strong>Notchian</strong> Clients. So far so good I read the <a href=\"https://wiki.vg/Main_Page\" rel=\"nofollow noreferrer\">Documented Website</a> and only wrote a <strong><a href=\"https://wiki.vg/Server_List_Ping#Response\" rel=\"nofollow noreferrer\">Status Handshake Packet</a></strong>. In <strong>Minecraft</strong> you can get those <strong>Packets</strong> at each <strong>Notchian</strong> Server. These Packets do use specific <a href=\"https://wiki.vg/Data_types\" rel=\"nofollow noreferrer\">Data Types</a>. My Server is just sending a <strong>String</strong> as a <strong>Json Response</strong> to the <strong>Client</strong>.</p>\n<blockquote>\n<p><strong>Code Section</strong> | How I wrote the <strong>ByteBuffer</strong></p>\n</blockquote>\n<pre class=\"lang-cpp prettyprint-override\"><code>typedef unsigned char byte; /* Sending unsigned bytes */\nclass LBuffer {\n    std::vector&lt;byte&gt; buf;\n\npublic:\n    std::vector&lt;byte&gt;&amp; getBuf() {\n        return buf;\n    }\n\n    void write(byte data) {\n        buf.push_back(data);\n    }\n\n    void writeInt(int32_t data) {\n        buf.push_back(data &gt;&gt; 24);\n        buf.push_back((data &lt;&lt; 8) &gt;&gt; 24);\n        buf.push_back((data &lt;&lt; 16) &gt;&gt; 24);\n        buf.push_back((data &lt;&lt; 24) &gt;&gt; 24);\n    }\n\n    void writeString(std::string data) {\n        std::copy(data.begin(), data.end(), std::back_inserter(buf));\n    }\n};\n</code></pre>\n<blockquote>\n<p><strong>Code Section</strong> | How I wrote the Packet to the Buffer</p>\n</blockquote>\n<pre class=\"lang-cpp prettyprint-override\"><code>LBuffer createHandshakeStatusResponsePacket() {\n    LBuffer buffer;\n    buffer.write(0x00);\n    buffer.writeString(&quot;{{\\&quot;version\\&quot;:{\\&quot;name\\&quot;:\\&quot;1.8.7\\&quot;,\\&quot;protocol\\&quot;:47},\\&quot;players\\&quot;:{\\&quot;max\\&quot;:100,\\&quot;online\\&quot;:5,\\&quot;sample\\&quot;:[{\\&quot;name\\&quot;:\\&quot;thinkofdeath\\&quot;,\\&quot;id\\&quot;:\\&quot;4566e69f-c907-48ee-8d71-d7ba5aa00d20\\&quot;}]},\\&quot;description\\&quot;:{\\&quot;text\\&quot;:\\&quot;Helloworld\\&quot;}}}&quot;);\n    return buffer;\n}\n</code></pre>\n<blockquote>\n<p><strong>Code Section</strong> | Writing Server with the ResponseBuf</p>\n</blockquote>\n<pre class=\"lang-cpp prettyprint-override\"><code>int main() {\n    boost::asio::io_service svc;\n\n    tcp::acceptor a(svc);\n    a.open(tcp::v4());\n    a.set_option(tcp::acceptor::reuse_address(true));\n    a.bind({ {}, 6767 });\n    a.listen(5);\n\n    using session = std::shared_ptr&lt;tcp::socket&gt;;\n\n    std::function&lt;void()&gt;        doAccept;\n    std::function&lt;void(session)&gt; doSession;\n\n\n    doSession = [&amp;](session s) {\n\n        auto buf = std::make_shared&lt;std::vector&lt;byte&gt;&gt;(1024);\n        \n        s-&gt;async_read_some(boost::asio::buffer(*buf), [&amp;, s, buf](error_code ec, size_t bytes) {\n\n            if (ec)\n                std::cerr &lt;&lt; &quot;read failed: &quot; &lt;&lt; ec.message() &lt;&lt; &quot;\\n&quot;;\n            else {\n\n                /*\n                   As you see I dont read the Request from the Client..\n                   But thats not relevant when I just want to send the Data\n                   to receive it's Motd and so on..\n                */\n                if (ec)\n                    std::cerr &lt;&lt; &quot;endpoint failed: &quot; &lt;&lt; ec.message() &lt;&lt; std::endl;\n                else {\n\n                    std::vector&lt;byte&gt; responseBuf = createHandshakeStatusResponsePacket().getBuf();\n\n                    async_write(*s, boost::asio::buffer(responseBuf), [&amp;, s, buf](error_code ec, size_t) {\n                        if (ec) std::cerr &lt;&lt; &quot;write failed: &quot; &lt;&lt; ec.message() &lt;&lt; &quot;\\n&quot;;\n                    });\n\n                }\n\n                doSession(s);\n            }\n\n        });\n    };\n\n    doAccept = [&amp;] {\n        auto s = std::make_shared&lt;session::element_type&gt;(svc);\n\n        a.async_accept(*s, [&amp;, s](error_code ec) {\n            if (ec)\n                std::cerr &lt;&lt; &quot;accept failed: &quot; &lt;&lt; ec.message() &lt;&lt; &quot;\\n&quot;;\n            else {\n                doSession(s);\n                doAccept();\n            }\n        });\n    };\n\n    doAccept();\n    svc.run();\n}\n</code></pre>\n<blockquote>\n<p><strong>Results</strong> and <strong>Problems</strong></p>\n</blockquote>\n<p>When my <strong>Notchian</strong> Client reads the Packet that I sent as Response from the <strong>Server</strong>, it's giving me without any Delay this Result here:</p>\n<blockquote>\n<p>Can't connect to Server</p>\n</blockquote>\n<p>The Log from my <strong>Notchian</strong> Client said:</p>\n<blockquote>\n<p>[04:42:54] [Client thread/ERROR]: Can't ping 127.0.0.1:6767: Internal Exception: io.netty.handler.codec.DecoderException:\njava.io.IOException: Bad packet id 123</p>\n</blockquote>\n<p>But how can it be the packetId 123 ? Because I'm sending the PacketId 0 at first.</p>\n<blockquote>\n<p><strong>Declaration</strong></p>\n</blockquote>\n<p><strong>Notchian</strong>: Typically Software written from Notch ( so I grabbed it up )</p>\n<p><strong>ByteBuffer</strong>: Sending Bytes in a specific order.</p>\n<p>I do hope for Tips and Solutions,\nthanks</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1577763740, "post_id": 59539243, "comment_id": 105248427, "body": "Not entirely sure what you&#39;re asking here \u2026 but, once you have included an <code>.rc</code> file into your project, it is compiled and linked into the executable, so that any resources (images or others) can be accessed by that executable through calls to functions like <code>LoadResource</code> - there is no need for that app to search any file system."}, {"owner": {"reputation": 119, "user_id": 10593408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7tHm.jpg?s=128&g=1", "display_name": "ImTheSquid", "link": "https://stackoverflow.com/users/10593408/imthesquid"}, "reply_to_user": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1577764455, "post_id": 59539243, "comment_id": 105248487, "body": "What header would I need to include to get those methods?"}, {"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 0, "creation_date": 1577764705, "post_id": 59539243, "comment_id": 105248513, "body": "Most of the required APIs are defined in the <code>Windows.h</code> header. Try creating a simple MFC application with the VS Wizard, and you&#39;ll see the basic layout of a project that includes resources. Often, the <code>.rc</code> file (there can be only one per project) will itself include one or more other <code>.rc2</code> files in which you can define your &#39;custom&#39; resources."}], "answers": [{"tags": [], "owner": {"reputation": 50, "user_id": 12630668, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HmbsB.jpg?s=128&g=1", "display_name": "superman", "link": "https://stackoverflow.com/users/12630668/superman"}, "is_accepted": false, "score": 1, "last_activity_date": 1577780975, "creation_date": 1577780975, "answer_id": 59541554, "question_id": 59539243, "link": "https://stackoverflow.com/questions/59539243/how-to-use-resource-rc-file-in-visual-studio/59541554#59541554", "title": "How to use Resource.RC file in Visual Studio", "body": "<p>add .rc file refer to<a href=\"https://docs.microsoft.com/en-us/cpp/windows/resource-editors?view=vs-2019\" rel=\"nofollow noreferrer\">microsoft document</a>, you can use or load this rc resource refer to <a href=\"https://docs.microsoft.com/en-us/windows/win32/api/libloaderapi/nf-libloaderapi-loadresource\" rel=\"nofollow noreferrer\">this link</a>, windows api findresource and loadresource can use this rc file resource by define resouce id</p>\n"}], "owner": {"reputation": 119, "user_id": 10593408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w7tHm.jpg?s=128&g=1", "display_name": "ImTheSquid", "link": "https://stackoverflow.com/users/10593408/imthesquid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2134, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1577780975, "creation_date": 1577762948, "last_edit_date": 1577763291, "question_id": 59539243, "link": "https://stackoverflow.com/questions/59539243/how-to-use-resource-rc-file-in-visual-studio", "title": "How to use Resource.RC file in Visual Studio", "body": "<p>For context, I have been trying to include 2 PNG files with my C++ code, but I have not been able to figure out how to do so in Visual Studio 2019. I have searched through the docs and have not found anything helpful. How could I accomplish the three items listed below?</p>\n\n<ol>\n<li>Correctly include files in a Resource.RC file (and correctly create a Resource.RC file)</li>\n<li>Access these files in a filesystem-independent manner in C++ (no absolute paths)</li>\n<li>Include these files when distributing an executable</li>\n</ol>\n\n<p>My solution is laid out in the default manner: a References folder, External Dependencies folder, Header Files folder, Resource Files folder, and a Source Files folder.</p>\n"}, {"tags": ["c++", "std", "allocator"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 12369941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce0d0638c5a69d9b46a999b1fc24dec?s=128&d=identicon&r=PG&f=1", "display_name": "CharMstr", "link": "https://stackoverflow.com/users/12369941/charmstr"}, "edited": false, "score": 0, "creation_date": 1611270564, "post_id": 59539088, "comment_id": 116404805, "body": "+1 This is a very detailed answer. But i had to search a bit and understand two things before i could grasp the answer: 1) &quot;operator new()&quot; is different than &quot;new&quot; (&quot;operator new&quot; is a function that just allocates memory)  AND 2) &quot;placement new&quot; is different than &quot;new&quot;. (&quot;placement new&quot; just constructs an object in a given place)"}], "tags": [], "owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "is_accepted": false, "score": 6, "last_activity_date": 1577763380, "last_edit_date": 1577763380, "creation_date": 1577761169, "answer_id": 59539088, "question_id": 59539057, "link": "https://stackoverflow.com/questions/59539057/c-does-it-lead-to-double-free-when-destroy-element-in-allocatorstring/59539088#59539088", "title": "C++ does it lead to double free when destroy element in allocator&lt;string&gt;?", "body": "<h2>Let's start with <code>delete</code></h2>\n\n<p>When you <code>delete</code> an object there are two things that happen:</p>\n\n<ol>\n<li>the destructor of that's object is called</li>\n<li>the memory allocated for this object with <code>new</code> is being released back to the heap</li>\n</ol>\n\n<h2><code>placement new</code> and <code>delete</code></h2>\n\n<p>You can use placement <code>new</code> syntax for constructing an object on an existing memory buffer:</p>\n\n<pre><code>const char* charString = \"Hello, World\";\n// allocate the required memory\nvoid *mem = ::operator new(sizeof(Buffer) + strlen(charString) + 1);\n// construct a \"Buffer\" object on an existing memory block\nBuffer* buf = new(mem) Buffer(strlen(charString));\n\n// ...\n\n// destruct the \"Buffer\" object without releasing the memory\nbuf-&gt;~Buffer();\n// deallocate the memory\n::operator delete(mem);\n</code></pre>\n\n<p>Of course for this example you could just use plain <code>new</code> and <code>delete</code> but it shows how you can separate the memory allocation from its construction and the destruction from the deallocation.</p>\n\n<p>This technique is useful for example if you manage memory pool and the memory can be reclaimed back to the memory pool when the object is destructed rather than back to the heap.</p>\n\n<h2>std::allocator</h2>\n\n<p><a href=\"https://en.cppreference.com/w/cpp/memory/allocator\" rel=\"noreferrer\"><code>std::allocator</code></a> gives you the above behavior - separation of memory allocation and deallocation from the object construction and destruction with the methods <code>allocate</code>, <code>construct</code>, <code>destroy</code> and <code>deallocate</code>.</p>\n\n<pre><code>const int cnt = 10;\nallocator&lt;string&gt; alloc;\nauto p = alloc.allocate(cnt); // memory is allocated\nalloc.construct(p);           // object is constructed on that memory\n\n// ...\n\nalloc.destroy(p);         // object is destructed\nalloc.deallocate(p, cnt); // memory is deallocated\n</code></pre>\n\n<p>Note that <code>std::string</code> destructor would call <code>delete</code> on its internal allocation when the <code>string</code> object is destructed, but the memory occupied by the object itself is deallocated in above code only in the call to <code>alloc.deallocate</code>.</p>\n\n<hr>\n\n<h2><code>construct</code> and <code>destroy</code> being deprecated in C++17</h2>\n\n<p>C++17 declared the methods <code>construct</code> and <code>destroy</code> of <code>std::allocator</code> <strong>deprecated</strong> and C++20 made them <strong>obsolete</strong>. So, since C++17 you would have to use <code>placement new</code> after allocating memory with the allocator and call the destructor directly after deallocating the memory with the allocator:</p>\n\n<pre><code>const int cnt = 10;\nallocator&lt;string&gt; alloc;\nauto p = alloc.allocate(cnt); // memory is allocated\n// alloc.construct(p);        // deprecated in C++17, obsolete in C++20\nnew(p) string; // construct the object with placement new\n\n// ...\n\n// alloc.destroy(p);      // deprecated in C++17, obsolete in C++20\np-&gt;~string(); // destruct the object by calling the destructor\nalloc.deallocate(p, cnt); // memory is deallocated\n</code></pre>\n\n<p>Last note: there is also a thing called <code>placement delete</code> it is not called directly by the programmer but only from <code>placement new</code> if the constructor of the object throws an exception. So don't get confused with that. The way to destruct an object in place without releasing the memory occupied by the object itself is by calling its destructor directly as shown above (or if you use std::allocator prior to C++17, by calling the allocator destroy method).</p>\n"}, {"tags": [], "owner": {"reputation": 7348, "user_id": 2684196, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/45AEF.jpg?s=128&g=1", "display_name": "Willis Blackburn", "link": "https://stackoverflow.com/users/2684196/willis-blackburn"}, "is_accepted": true, "score": 6, "last_activity_date": 1577762173, "last_edit_date": 1577762173, "creation_date": 1577761592, "answer_id": 59539125, "question_id": 59539057, "link": "https://stackoverflow.com/questions/59539057/c-does-it-lead-to-double-free-when-destroy-element-in-allocatorstring/59539125#59539125", "title": "C++ does it lead to double free when destroy element in allocator&lt;string&gt;?", "body": "<p>When you write something like this:</p>\n\n<pre><code>Foo *foo = new Foo();\n</code></pre>\n\n<p>two things happen:</p>\n\n<ol>\n<li>Some heap space is allocated for the <code>Foo</code> object.</li>\n<li>The <code>Foo()</code> constructor is invoked, with <code>this</code> pointing to the newly-allocated space.</li>\n</ol>\n\n<p>Later, you delete the <code>Foo</code> object:</p>\n\n<pre><code>delete foo;\n</code></pre>\n\n<p>and two more things happen:</p>\n\n<ol>\n<li>The destructor <code>~Foo()</code> is invoked.</li>\n<li>The memory allocated for the Foo instance is released back to the heap.</li>\n</ol>\n\n<p>The <code>std::allocator</code> class just lets you perform each of these four steps manually.</p>\n\n<p>If you have an <code>allocator&lt;string&gt; alloc</code> and you call <code>alloc.allocate</code> and then <code>alloc.construct</code>, that's just the same as doing <code>new string()</code>. And when you call <code>alloc.destroy</code> and then <code>alloc.deallocate</code>, that's just the same as deleting the <code>string</code> pointer.</p>\n\n<p>So no, there won't be any extra frees going on. The call to <code>destroy</code> causes the <code>string</code> to release whatever memory it allocated for its buffer, and then the call to <code>deallocate</code> releases the memory that was used for the <code>string</code> object itself.</p>\n\n<p>I didn't completely understand your question about the region. The memory allocated to store the <code>string</code> instance, and the memory that the <code>string</code> allocates for its buffer, are unrelated.</p>\n"}, {"tags": [], "owner": {"reputation": 3388, "user_id": 1292791, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/D2eE2.jpg?s=128&g=1", "display_name": "prehistoricpenguin", "link": "https://stackoverflow.com/users/1292791/prehistoricpenguin"}, "is_accepted": false, "score": 1, "last_activity_date": 1577773040, "last_edit_date": 1577773040, "creation_date": 1577772054, "answer_id": 59540189, "question_id": 59539057, "link": "https://stackoverflow.com/questions/59539057/c-does-it-lead-to-double-free-when-destroy-element-in-allocatorstring/59540189#59540189", "title": "C++ does it lead to double free when destroy element in allocator&lt;string&gt;?", "body": "<p>You may inherit <code>std::string</code> to add some print statements, to get a better understanding (Or you need to debug and step into the STL container and functions)</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nclass MyString : public string {\n    public:\n    MyString() = default;\n    ~MyString() { cout &lt;&lt; \"destructor of MyString:\" &lt;&lt; this &lt;&lt; endl; }\n};\nint main(int argc, char **argv)\n{\n    const int cnt = 10;\n    allocator&lt;MyString&gt; alloc;\n    auto p = alloc.allocate(cnt);\n\n    alloc.construct(p);\n    for (int i = 0; i &lt; cnt; ++i)\n    {\n        cout &lt;&lt; p+i &lt;&lt; endl; // print buffer address\n    }\n\n    alloc.destroy(p); // will it free buffer of string?\n\n    cout &lt;&lt; \"alloctor destrory called\" &lt;&lt; endl;\n\n    alloc.deallocate(p, cnt); // will it free buffer of string again?\n\n    return 0;\n}\n</code></pre>\n\n<p>Execute it here:</p>\n\n<p><a href=\"https://coliru.stacked-crooked.com/a/13302c7f0c4db07b\" rel=\"nofollow noreferrer\">https://coliru.stacked-crooked.com/a/13302c7f0c4db07b</a></p>\n"}], "owner": {"reputation": 59, "user_id": 9262430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bedd74ef757081ffdc9620e4cbed5788?s=128&d=identicon&r=PG&f=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/9262430/charles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "accepted_answer_id": 59539125, "answer_count": 3, "score": 3, "last_activity_date": 1577773040, "creation_date": 1577760745, "question_id": 59539057, "link": "https://stackoverflow.com/questions/59539057/c-does-it-lead-to-double-free-when-destroy-element-in-allocatorstring", "title": "C++ does it lead to double free when destroy element in allocator&lt;string&gt;?", "body": "<p>C++ Allocator. I know that String will allocate a block buffer with <code>new</code> at inner implement, and free it(call delete[]) within Destructor.</p>\n\n<p>My question is that whether it will be free double when use <code>allocator&lt;string&gt;</code>?</p>\n\n<ol>\n<li>first free at string destructor.</li>\n<li>second deallocate buffer points to string has been free.</li>\n</ol>\n\n<p>Additionally, whether does the buffer address of string and <code>allocate(n)</code> have same region?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;memory&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main(int argc, char **argv)\n{\n    const int cnt = 10;\n    allocator&lt;string&gt; alloc;\n    auto p = alloc.allocate(cnt);\n\n    alloc.construct(p);\n    for (int i = 0; i &lt; cnt; ++i)\n    {\n        cout &lt;&lt; p+i &lt;&lt; endl; // print buffer address\n    }\n\n    alloc.destroy(p); // will it free buffer of string?\n\n    alloc.deallocate(p, cnt); // will it free buffer of string again?\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "dllimport", "dylib", "dllexport"], "comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1577779889, "post_id": 59538970, "comment_id": 105251879, "body": "You need to expose plain functions rather than classes"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7468711"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1577856218, "post_id": 59538970, "comment_id": 105269275, "body": "Hi @DavidHeffernan if i try to expose just functions and add MACRO behind the datatype of the function. It is building fine, but not able to use it in python through dll."}], "owner": {"user_type": "does_not_exist", "display_name": "user7468711"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577759782, "creation_date": 1577759782, "last_edit_date": 1592644375, "question_id": 59538970, "link": "https://stackoverflow.com/questions/59538970/how-to-export-c-classes-from-dylib-or-dll-to-python-and-other-languages", "title": "How to export c++ classes from .dylib or dll to python and other languages", "body": "<p>i have a created a singleton class in c++ and generated it has a library. How do i export that singleton class into python using dll or dylib with respect to OS.This dll or dylib can be used by any c++ projects but not able to export to other languages.</p>\n<p>As i have observed that for c functions ,we can add MACRO behind function declaration and export it.But how to export classes in that case , what will be the syntax?\nwe can use ctypes in python to find dynamic libraries. But using ctypes i am only able to export functions and not able to export classes and not even sure about the syntax for that.</p>\n<p>I have used</p>\n<h1>define LIBRARY_API extern &quot;C&quot; <strong>attribute</strong> ((visibility (&quot;default&quot;)))</h1>\n<p>to export functions for mac and linux and similarly for windows i have used:</p>\n<h1>define LIBRARY_API extern &quot;C&quot; __declspec(dllexport)</h1>\n<p>But using these i am not able to export classes. Please can anyone give a nice explination of these work or can provide good links to refer above topic.</p>\n<p>I have tried my best to explain my doubt, Please can anybody help?</p>\n"}, {"tags": ["c++", "templates", "c++17", "variadic-templates"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 3, "creation_date": 1577759214, "post_id": 59538875, "comment_id": 105247759, "body": "Unrelated: But saying &quot;<i>I know the committee is full of intelligent creative people</i>&quot; in this kind of context makes it sound like you mean the opposite."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 3, "creation_date": 1577759616, "post_id": 59538875, "comment_id": 105247803, "body": "Assuming they had the idea is not an assumption you should make.  Stuff gets left out all the time.  You should join the standard proposal group and float your idea."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 4, "creation_date": 1577761642, "post_id": 59538875, "comment_id": 105248091, "body": "<a href=\"https://wg21.link/p1061\" rel=\"nofollow noreferrer\">P1061</a>."}, {"owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "edited": false, "score": 0, "creation_date": 1577902021, "post_id": 59538875, "comment_id": 105278310, "body": "I don&#39;t mean the opposite, and the vast majority of the times I made this assumption I turned out to be right. Also happy 2020."}], "answers": [{"comments": [{"owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "edited": false, "score": 0, "creation_date": 1577902873, "post_id": 59539371, "comment_id": 105278519, "body": "Thanks for the research. I believe cases where a feature was overlooked or unintentionally left out are rare. Most times, a feature is either intentionally excluded permanently, or intentionally excluded temporarily, both for good reason. I believe the latter applies to the current case, and would like to know the reason why."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 9, "last_activity_date": 1577764426, "creation_date": 1577764426, "answer_id": 59539371, "question_id": 59538875, "link": "https://stackoverflow.com/questions/59538875/why-do-structured-bindings-not-support-variadics/59539371#59539371", "title": "Why do structured bindings not support variadics?", "body": "<p>It is the nature of a developing language that features be added over time.</p>\n\n<p>Just because something is not in the language yet, does not mean that the committee already rejected it outright. It does not mean that they \"excluded\" it. It could just be that it was overlooked, or just hadn't been seriously considered yet. Remember, <code>std::make_unique</code> wasn't available until C++14.</p>\n\n<p>In this particular case, it's a feature that <em>has</em> been proposed, quite recently, as <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p1061r1.html\" rel=\"noreferrer\">P1061</a>. You'll note from the revision history section that the committee <em>\"reviewed it favorably and thought this was a good investment of our time\"</em>. So I guess you're in luck. :)</p>\n"}], "owner": {"reputation": 1597, "user_id": 1614051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/17863a63277ff22949e3ff33a6896050?s=128&d=identicon&r=PG", "display_name": "Filipp", "link": "https://stackoverflow.com/users/1614051/filipp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 1, "accepted_answer_id": 59539371, "answer_count": 1, "score": 5, "last_activity_date": 1577764426, "creation_date": 1577758859, "question_id": 59538875, "link": "https://stackoverflow.com/questions/59538875/why-do-structured-bindings-not-support-variadics", "title": "Why do structured bindings not support variadics?", "body": "<p>C++17 adds structured bindings:</p>\n\n<pre><code>tuple&lt;int, int, int&gt; make_tuple();\nint test() {\n    auto [a, b, c] = make_tuple();\n    return a | b | c;\n}\n</code></pre>\n\n<p>My immediate instinct was to try using them as parameter packs.</p>\n\n<pre><code>template &lt;size_t N&gt;\nauto make_tuple();  // returns tuple with N ints\ntemplate &lt;size_t N&gt;\nint test() {\n    auto [...values] = make_tuple&lt;N&gt;();\n    return (0 | ... | values);\n}\n</code></pre>\n\n<p>Alas, I cannot do this. Why did the committee exclude such functionality? It feels inconsistent now that lambda captures can contain parameter packs.</p>\n\n<p>I know the committee is full of intelligent creative people, and an idea like mine must have come up and been rejected for good reason. What is that reason?</p>\n"}, {"tags": ["c++", "go", "named-pipes"], "comments": [{"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577766358, "post_id": 59538860, "comment_id": 105248753, "body": "In the C reader, how many times is the <code>ReadFile</code> executed and what is the value of <code>cbRead</code> and <code>GetLastError()</code> each time? What do you see printed as received data?  Note that <code>printf(chBuf);</code> will truncate on the first zero byte of chBuf (if any would be present). Also any &#39;%&#39; characters could be misinterpreted as formatting of parameters not provided."}, {"owner": {"reputation": 41, "user_id": 12628884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb0ad7e0fd0885e70eef4e8a5101e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Smith", "link": "https://stackoverflow.com/users/12628884/dave-smith"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577819706, "post_id": 59538860, "comment_id": 105264524, "body": "The ReadFile loop is only executed once. cbRead is 4096 bytes and GetLastError() is 0. I see the characters printed normally (my test string is plain alphanumeric ASCII), but with the last part of the string missing after 4096 bytes."}, {"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577820612, "post_id": 59538860, "comment_id": 105264722, "body": "In the Go pipe-proxy program, what are the return values from <code>io.WriteString(w, response)</code>? There could be an error there with a clue."}, {"owner": {"reputation": 41, "user_id": 12628884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb0ad7e0fd0885e70eef4e8a5101e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Smith", "link": "https://stackoverflow.com/users/12628884/dave-smith"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577852520, "post_id": 59538860, "comment_id": 105268935, "body": "OK, I have found a solution that seems to work. Before calling ReadFile, call PeekNamedPipe to get the number of bytes in the pipe. Then pass this value to the buffer size when calling ReadFile. Repeat the loop while PeekNamedPipe gets 4096 bytes. Before posting this as an answer, I will do some more testing to make sure it is effective for a wider set of conditions. I would also really like to know why ReadFile only reads the first 4096 bytes of the data. Hopefully someone with better knowledge than me of named pipes in C++ will see this and give us an answer."}, {"owner": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577912017, "post_id": 59538860, "comment_id": 105280467, "body": "You can achieve the same thing without PeekNamedPipe if in the original code, you just keep looping when <code>fSuccess</code> is true. You have to know how many bytes in your response body (by parsing the HTTP response headers) to know when to stop reading."}, {"owner": {"reputation": 41, "user_id": 12628884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb0ad7e0fd0885e70eef4e8a5101e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Smith", "link": "https://stackoverflow.com/users/12628884/dave-smith"}, "reply_to_user": {"reputation": 29795, "user_id": 720030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ed0a5a78d65824827fb112e8e716f8?s=128&d=identicon&r=PG", "display_name": "karmakaze", "link": "https://stackoverflow.com/users/720030/karmakaze"}, "edited": false, "score": 0, "creation_date": 1577951178, "post_id": 59538860, "comment_id": 105287708, "body": "In theory yes, but for whatever reason, the go http function does not always send the ContentLength header. I&#39;ve not looked into the reason behind this any further since the PeekNamedPipe method seems to work well."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1577952344, "post_id": 59538860, "comment_id": 105288045, "body": "It doesn&#39;t have to send a content length. See RFC 2616 and successors. If you don&#39;t know what&#39;s in there you haven&#39;t a hope of getting this right. And <code>ReadFile()</code> is entitled to return whatever chunks it likes."}], "answers": [{"comments": [{"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1577952280, "post_id": 59559870, "comment_id": 105288025, "body": "&#39;Returns 0 bytes even when there is more data in the pipe&#39; is a contradiction in terms. The only way you can know there is more data in the pipe is if it <i>doesn&#39;t</i> return zero. There is no other test."}], "tags": [], "owner": {"reputation": 41, "user_id": 12628884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb0ad7e0fd0885e70eef4e8a5101e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Smith", "link": "https://stackoverflow.com/users/12628884/dave-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1577950874, "creation_date": 1577950874, "answer_id": 59559870, "question_id": 59538860, "link": "https://stackoverflow.com/questions/59538860/c-named-pipe-client-wont-read-more-than-4096-bytes/59559870#59559870", "title": "C++ named pipe client won&#39;t read more than 4096 bytes", "body": "<p>The solution I have implemented is as follows:</p>\n\n<ul>\n<li>Call ReadFile first to get the first 4096 (or fewer) bytes. </li>\n<li>Call PeekNamedPipe to check for additional data in the pipe, and get the number of bytes (<code>cbReadPeek</code> in my case) for the next call to ReadFile. I have found that PeekNamedPipe is not 100% reliable when called once (it sometimes returns 0 bytes read, even when there is more data in the pipe). I have therefor implemented it as a <code>do {...} while ( fSuccess &amp;&amp; cbReadPeek == 0 )</code>, so it loops until there is either data to read, or fSuccess fails with an error (no more data in the pipe). </li>\n<li>Call ReadFile again if there is more data to read. If not, break the loop: <code>if (GetLastError() == ERROR_BROKEN_PIPE) { break; }</code></li>\n<li>On every ReadFile iteration, the exact number of bytes in cbRead / cbReadPeek is copied from the buffer (chBuf) and appended to a string, otherwise we end up with some of the previously read data when the bytes read drops below 4096. Or I guess the buffer could be flushed instead. </li>\n</ul>\n\n<p>Anyway, it appears to be working fine. I would still really like to know why ReadFile only reads a maximum of 4096 bytes at a time from the pipe. I could not find anything in the MS documentation for the function to explain this behaviour, but maybe I'm missing something obvious. Perhaps this question could be left open for a while to give someone a chance to see it and provide some insight? </p>\n"}], "owner": {"reputation": 41, "user_id": 12628884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eb0ad7e0fd0885e70eef4e8a5101e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Dave Smith", "link": "https://stackoverflow.com/users/12628884/dave-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1577950874, "creation_date": 1577758737, "question_id": 59538860, "link": "https://stackoverflow.com/questions/59538860/c-named-pipe-client-wont-read-more-than-4096-bytes", "title": "C++ named pipe client won&#39;t read more than 4096 bytes", "body": "<p>I am trying to implement a Windows named pipe client in C++, that will send RPC requests to a named pipe server written in Go. It all works for short server response lengths. However if the length of the server response exceeds 4096 bytes, the client will not read past 4096 bytes and the response is cut short. I have included a minimal reproducible example of the client and server code below, with most of the error handling removed for brevity. To reproduce the error, change \"some large data string\" in the server code into a string of ~5000 characters. </p>\n\n<p>I have tried the following without any luck:</p>\n\n<ul>\n<li>Setting the length of all buffers to a much larger value than 4096.</li>\n<li>Tried using both MESSAGE and BYTE mode in the client and server.</li>\n<li>Checked the http response headers: the response is not chunked.</li>\n</ul>\n\n<p>Any advice would be most appreciated. </p>\n\n<p>C++ client code:</p>\n\n<pre><code>//Minimal implementation of C++ named pipe client. Most error handling removed for brevity. \n//Adapted from https://docs.microsoft.com/en-us/windows/win32/ipc/named-pipe-client\n\n#include &lt;windows.h&gt; \n#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;tchar.h&gt;\n\n#define BUFSIZE 1048576\n\nint _tmain(int argc, TCHAR *argv[]) \n{ \n    HANDLE hPipe; \n    const char  *lpvMessage=\"POST / HTTP/1.0\\r\\nHost: localhost\\r\\nContent-Length: 33\\r\\n\\r\\n{\\\"method\\\":\\\"test\\\",\\\"params\\\":[\\\"\\\"]}\\r\\n\\n\";\n    char   chBuf[BUFSIZE]; \n    BOOL   fSuccess = FALSE; \n    DWORD  cbRead, cbToWrite, cbWritten, dwMode; \n    LPTSTR lpszPipename = TEXT(\"\\\\\\\\.\\\\pipe\\\\mypipe.ipc\"); \n\n    // Try to open a named pipe then close it - attempt 1. \n    while (1) \n    { \n        hPipe = CreateFile( \n        lpszPipename,   // pipe name \n        GENERIC_READ |  // read and write access \n        GENERIC_WRITE, \n        0,              // no sharing \n        NULL,           // default security attributes\n        OPEN_EXISTING,  // opens existing pipe \n        0,              // default attributes \n        NULL);          // no template file \n\n    // Break if the pipe handle is valid. \n        if (hPipe != INVALID_HANDLE_VALUE) \n        break; \n        // Exit if an error occurs. \n        _tprintf( TEXT(\"Could not open pipe. GLE=%d\\n\"), GetLastError() ); \n        return -1;\n    } \n    CloseHandle(hPipe);\n\n    // If successful, open pipe again for use. For some reason, pipe must be opened and closed once (attempt 1) before actually using.  \n    hPipe = CreateFile( \n    lpszPipename,   // pipe name \n    GENERIC_READ |  // read and write access \n    GENERIC_WRITE, \n    0,              // no sharing \n    NULL,           // default security attributes\n    OPEN_EXISTING,  // opens existing pipe \n    0,              // default attributes \n    NULL);          // no template file \n\n    // The pipe connected; change to message-read mode. \n    dwMode = PIPE_READMODE_MESSAGE;  //PIPE_READMODE_BYTE doesn't solve the problem either; \n    fSuccess = SetNamedPipeHandleState( \n    hPipe,    // pipe handle \n    &amp;dwMode,  // new pipe mode \n    NULL,     // don't set maximum bytes \n    NULL);    // don't set maximum time\n    if ( ! fSuccess) \n    {\n    _tprintf( TEXT(\"SetNamedPipeHandleState failed. GLE=%d\\n\"), GetLastError() ); \n    return -1;\n    }\n\n    // Send a message to the pipe server. \n    cbToWrite = (lstrlen(lpvMessage)+1)*sizeof(char);\n    fSuccess = WriteFile( \n    hPipe,                  // pipe handle \n    lpvMessage,             // message \n    cbToWrite,              // message length \n    &amp;cbWritten,             // bytes written \n    NULL);                  // not overlapped \n\n    do \n    { \n    // Read from the pipe. \n    fSuccess = ReadFile( \n    hPipe,    // pipe handle \n    chBuf,    // buffer to receive reply \n    BUFSIZE*sizeof(char),  // size of buffer \n    &amp;cbRead,  // number of bytes read \n    NULL);    // not overlapped \n\n    if ( ! fSuccess &amp;&amp; GetLastError() != ERROR_MORE_DATA )\n    break; \n\n    printf(chBuf);\n    } while ( ! fSuccess);  // repeat loop if ERROR_MORE_DATA \n\n    printf(\"\\n&lt;End of message, press ENTER to terminate connection and exit&gt;\");\n    _getch();\n    CloseHandle(hPipe); \n    return 0; \n}\n</code></pre>\n\n<p>Go server code:</p>\n\n<pre><code>//Minimal implementation of Golang named pipe server. Most error handling removed for brevity. \n// +build windows\n\npackage main\n\nimport (\n    \"github.com/Microsoft/go-winio\"\n    \"io\"\n    \"io/ioutil\"\n    \"log\"\n    \"net\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    log.Print(\"Starting IPC server...\")\n    StartIPCServer()\n}\n\nfunc HandleDefault(w http.ResponseWriter, req *http.Request) {\n    body, _ := ioutil.ReadAll(io.LimitReader(req.Body, 1048576)) \n    defer req.Body.Close()\n    log.Printf(\"Received: '%q'\", string(body))\n    response:= \"some large data string\" //If length of response plus http headers &gt;4096 bytes, client will not read past 4096.  \n    io.WriteString(w, response)\n}\n\nfunc serve(l net.Listener) error {\n    http.HandleFunc(\"/\", HandleDefault)\n    return http.Serve(l, nil)\n}\n\nfunc StartIPCServer() {\n    var c winio.PipeConfig\n    c.SecurityDescriptor = \"\"\n    c.MessageMode = true //changing to false (byte mode) does not solve the problem. \n    c.InputBufferSize = 1048576\n    c.OutputBufferSize = 1048576\n\n    path:= `\\\\.\\pipe\\mypipe.ipc`\n    listener, err := winio.ListenPipe(path, &amp;c)\n    log.Print(\"IPC server running!\")\n    defer listener.Close()\n\n    err = serve(listener)\n    if err != nil {\n        log.Fatalf(\"Serve: %v\", err)\n        os.Exit(1)\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "arrays", "c++11", "pointers", "multidimensional-array"], "comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1577758542, "post_id": 59538816, "comment_id": 105247672, "body": "<code>I know I can make arr an int** and then assign a 2d array to arr, so please avoid such answer.</code> -- Why? -- <code>I know I can use STL containers such as vector, so please avoid such answer.</code> -- Why?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 5, "creation_date": 1577758656, "post_id": 59538816, "comment_id": 105247687, "body": "I know a screw can be driven in with a screwdriver, so please avoid such answer"}, {"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1577758675, "post_id": 59538816, "comment_id": 105247690, "body": "There are quite a few &quot;<i>I know</i>&quot;s in the question.- What is the question exactly?"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1577758943, "post_id": 59538816, "comment_id": 105247726, "body": "<i>Since we can do this to initialize a 1d array with unknown size</i> -- I think this is where the misunderstanding of what can be done with a 2d array starts."}, {"owner": {"reputation": 194, "user_id": 7377442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ad4bd58184d601abd591cd667acbc?s=128&d=identicon&r=PG&f=1", "display_name": "Jraxon", "link": "https://stackoverflow.com/users/7377442/jraxon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577759052, "post_id": 59538816, "comment_id": 105247735, "body": "Why what? @PaulMcKenzie Is this hard to see that I want to achieve something through an idea that I am not familiar with. This is how you get new pieces of knowledge."}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577759110, "post_id": 59538816, "comment_id": 105247739, "body": "Given a definition <code>int *arr[5]</code> (which is an array of five <code>int *</code>) no assignment to <code>arr</code> is valid, since an array cannot be assigned.    As such, there is no answer to the question.    Voting to close accordingly."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577759164, "post_id": 59538816, "comment_id": 105247750, "body": "@Peter I think they acknowledge that that code is incorrect and are asking for some correct code to accomplish the task"}, {"owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577759199, "post_id": 59538816, "comment_id": 105247757, "body": "I&#39;m voting to close this question as off-topic because - as written - it is seeking a solution to an unsolvable problem,  and the OP &quot;knows&quot; so much that answers providing alternatives can&#39;t be given."}, {"owner": {"reputation": 194, "user_id": 7377442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ad4bd58184d601abd591cd667acbc?s=128&d=identicon&r=PG&f=1", "display_name": "Jraxon", "link": "https://stackoverflow.com/users/7377442/jraxon"}, "reply_to_user": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "edited": false, "score": 0, "creation_date": 1577759207, "post_id": 59538816, "comment_id": 105247758, "body": "@Peter ???? Then you need to suggest a better declaration. What do you mean there is not an answer"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577759369, "post_id": 59538816, "comment_id": 105247772, "body": "@Jraxon -- Did you read M.M. comment about the screwdriver?  That&#39;s why I (and any sane C++ programmers) would ask &quot;why?&quot;"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577759535, "post_id": 59538816, "comment_id": 105247792, "body": "It is not a matter of &quot;laziness&quot;.  When a programmer writes code, they are usually not in a bubble.  Others have to read and use the code.  If it is obfuscated, that helps no one."}, {"owner": {"reputation": 194, "user_id": 7377442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ad4bd58184d601abd591cd667acbc?s=128&d=identicon&r=PG&f=1", "display_name": "Jraxon", "link": "https://stackoverflow.com/users/7377442/jraxon"}, "reply_to_user": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577759750, "post_id": 59538816, "comment_id": 105247825, "body": "@PaulMcKenzie First, this piece of code is only 2 lines long. Second, I don&#39;t think this kind of technology is top notch and very few people know it. Third, look at M.M&#39;s answer, do those lines look confusing to any C++ programmer??"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 1, "creation_date": 1577760050, "post_id": 59538816, "comment_id": 105247866, "body": "It is not the idiom that most C++ programmers use to declare a 2 dimensional dynamic array.  Obfuscation can come with just two lines of code -- the number of lines does not matter."}, {"owner": {"reputation": 194, "user_id": 7377442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ad4bd58184d601abd591cd667acbc?s=128&d=identicon&r=PG&f=1", "display_name": "Jraxon", "link": "https://stackoverflow.com/users/7377442/jraxon"}, "edited": false, "score": 0, "creation_date": 1577778613, "post_id": 59538816, "comment_id": 105251482, "body": "A obfuscation for you doesn&#39;t mean it might be one for others. This website is for people to come ask and answer questions. I don&#39;t understand your intention here. Also, I simply want to know a simple functionality in C++, so why should I care about what most C++ programmers do?? Your comments are really irrelevant. Try to avoid those comments"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577794883, "post_id": 59538816, "comment_id": 105256981, "body": "The comment section is for comments.  I commented on a strange demand that you posted in your question.  That is what the comment section is for, and that is to ask questions such as &quot;why?&quot; and see where the rationale of making such demands (as in your post) comes from."}], "answers": [{"comments": [{"owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "edited": false, "score": 0, "creation_date": 1577800572, "post_id": 59538886, "comment_id": 105258885, "body": "order won&#39;t matter?  is that or this: int (*arr)[12];   true?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "edited": false, "score": 0, "creation_date": 1577801332, "post_id": 59538886, "comment_id": 105259124, "body": "@nonock my code has 12 rows and 5 columns. your suggestion would be for something with 12 columns"}], "tags": [], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1577759023, "creation_date": 1577759023, "answer_id": 59538886, "question_id": 59538816, "link": "https://stackoverflow.com/questions/59538816/initialize-a-2d-array-with-unknown-first-dimension-size-in-c/59538886#59538886", "title": "Initialize a 2d array with unknown first dimension size in C++", "body": "<p>You can write:</p>\n\n<pre><code>int (*arr)[5];\n\narr = new int[12][5];\n</code></pre>\n\n<p>Then you can access elements such as <code>arr[11][4]</code>.  But not <code>arr[12][5]</code> as you suggest in the question, arrays are zero-indexed and the maximum element index is one less than the dimension.</p>\n\n<p>All dimensions except the innermost must be known at compile-time. If the <code>5</code> is actually meant to represent a runtime value then you cannot use C-style arrays for this task .</p>\n\n<p>NB. Consider using <code>unique_ptr</code> for safe memory management. The code would be <code>auto arr = std::make_unique&lt;int[][5]&gt;(12);</code>.</p>\n"}], "owner": {"reputation": 194, "user_id": 7377442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ad4bd58184d601abd591cd667acbc?s=128&d=identicon&r=PG&f=1", "display_name": "Jraxon", "link": "https://stackoverflow.com/users/7377442/jraxon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 59538886, "answer_count": 1, "score": 0, "last_activity_date": 1577760709, "creation_date": 1577758321, "last_edit_date": 1577760709, "question_id": 59538816, "link": "https://stackoverflow.com/questions/59538816/initialize-a-2d-array-with-unknown-first-dimension-size-in-c", "title": "Initialize a 2d array with unknown first dimension size in C++", "body": "<p>Say I need a 2d array, first dimension size set at runtime, and second dimension size is set to 5 at compilation time.</p>\n\n<p>Since we can do this to initialize a 1d array with unknown size</p>\n\n<pre><code>int* arr;\narr = new int[12];\n</code></pre>\n\n<p>I would like to make the following code work</p>\n\n<pre><code>int* arr[5];\narr = new int[12][5];\n</code></pre>\n\n<p>Notice:</p>\n\n<p>I need the second dimension set to 5, not first dimension. So I need to be able to do <code>arr[11][4]</code> but not <code>arr[4][11]</code>.</p>\n\n<p>I know I can make <code>arr</code> an <code>int**</code> and then assign a 2d array to arr, so please avoid such answer.</p>\n\n<p>I know I can use STL containers such as vector, so please avoid such answer.</p>\n"}, {"tags": ["c++", "arduino", "arduino-uno", "arduino-c++"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1577757565, "post_id": 59538686, "comment_id": 105247535, "body": "&quot;<i>I programmed the other 3 and they worked perfectly.</i>&quot; - yet, you haven&#39;t revealed the problem you have with the fourth."}, {"owner": {"reputation": 611, "user_id": 1377139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac32e89334de8bda0fdcb7d347577b9c?s=128&d=identicon&r=PG", "display_name": "Bradford Needham", "link": "https://stackoverflow.com/users/1377139/bradford-needham"}, "edited": false, "score": 0, "creation_date": 1577770633, "post_id": 59538686, "comment_id": 105249523, "body": "digitalRead() returns a value of HIGH (1) or LOW (0); it should never return 2. analogRead() works only on the analog pins (for example A3 rather than 3), and should not be set up with a pinMode() call."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10756738"}, "edited": false, "score": 0, "creation_date": 1577903405, "post_id": 59538686, "comment_id": 105278654, "body": "I got the answer, I just had to connect IO_BUTTON_DOWN to 7 instead of 5 because the Down button is connected with the 7th sensor"}], "owner": {"user_type": "does_not_exist", "display_name": "user10756738"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1577756879, "creation_date": 1577756879, "question_id": 59538686, "link": "https://stackoverflow.com/questions/59538686/change-variable-richtung-to-0-by-pressing-the-down-button", "title": "Change Variable &quot;Richtung&quot; to 0 by pressing the down button", "body": "<p>I am using an Arduino Uno with 4 Buttons and I am trying to change the variable \"Richtung\" to 0 by pressing the down button. I programmed the other 3 and they worked perfectly.</p>\n\n<pre><code>#include &lt;Arduino.h&gt;\n#include &lt;Adafruit_GFX.h&gt;\n#include &lt;Adafruit_LEDBackpack.h&gt;\n\nAdafruit_8x8matrix matrix = Adafruit_8x8matrix();\n\nint IO_BUTTON_UP = 4;\nint AIO_BUTTON_MATRIX = 3;\nint IO_BUTTON_DOWN = 5;\n\nvoid setup() {\n  // put your setup code here, to run once:\n  Serial.begin(115200);\n  Serial.println(\"Matrix8x8\");\n  Serial.println(\"&lt;Autor&gt;\");\n  matrix.begin(0x70);\n  matrix.setBrightness(1);\n  pinMode(IO_BUTTON_UP, INPUT);\n  pinMode(AIO_BUTTON_MATRIX, INPUT);\n  pinMode(IO_BUTTON_DOWN, INPUT);\n}\n\nint richtung = 0;\n\nvoid loop() {\n\n  int valButtonMatrix = analogRead(AIO_BUTTON_MATRIX);\n  if (digitalRead(IO_BUTTON_DOWN) == 2){\n    richtung = 0;\n  }\n  if (valButtonMatrix &gt; 600){ //Rechter Button\n    richtung = 1;\n  } else if (valButtonMatrix &gt; 400) { //Linker Button\n    richtung = 3;\n  }\n  if (digitalRead(IO_BUTTON_UP) == 1){\n    richtung = 2; \n  }\n}\n</code></pre>\n"}, {"tags": ["java", "c++", "struct"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1577756450, "post_id": 59538600, "comment_id": 105247357, "body": "Unrelated: I recommend that you not waste too much time trying to use Java  the same way you&#39;d use C++. It leads to much pain. In this case there&#39;s an easy way out: <code>public</code> members, but things often get fugly."}], "answers": [{"comments": [{"owner": {"reputation": 275558, "user_id": 522444, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/16b6783e9b99b1199c75761eaf5c0685?s=128&d=identicon&r=PG", "display_name": "Hovercraft Full Of Eels", "link": "https://stackoverflow.com/users/522444/hovercraft-full-of-eels"}, "edited": false, "score": 5, "creation_date": 1577757613, "post_id": 59538637, "comment_id": 105247542, "body": "Don&#39;t link to a duplicate in your answer if the question is fully answered by the duplicate. Vote to close as a duplicate instead"}], "tags": [], "owner": {"reputation": 24, "user_id": 12628872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ee9d3fb533f947e0607c5913137710?s=128&d=identicon&r=PG&f=1", "display_name": "nooblearner6969", "link": "https://stackoverflow.com/users/12628872/nooblearner6969"}, "is_accepted": true, "score": -1, "last_activity_date": 1577756230, "creation_date": 1577756230, "answer_id": 59538637, "question_id": 59538600, "link": "https://stackoverflow.com/questions/59538600/equivalent-of-c-struct-in-java/59538637#59538637", "title": "Equivalent of C++ struct in Java", "body": "<p>To write a structure in Java, similar would be a class. So yes, you somewhat answered your question. </p>\n\n<p>I believe that this is a better detailed explanation: \n<a href=\"https://stackoverflow.com/questions/14794196/creating-struct-like-data-structure-in-java\">Creating struct like data structure in Java</a></p>\n"}], "owner": {"reputation": 55, "user_id": 11545585, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-K19IdICoeg0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rflPkLOiv7oM_oA5WXF6qdvua2R_g/mo/photo.jpg?sz=128", "display_name": "Varvalian", "link": "https://stackoverflow.com/users/11545585/varvalian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 1, "closed_date": 1577756208, "accepted_answer_id": 59538637, "answer_count": 1, "score": 0, "last_activity_date": 1577756230, "creation_date": 1577755823, "question_id": 59538600, "link": "https://stackoverflow.com/questions/59538600/equivalent-of-c-struct-in-java", "closed_reason": "Duplicate", "title": "Equivalent of C++ struct in Java", "body": "<p>I have the following code in C++:</p>\n\n<pre><code>struct vec3d\n{\n    float x, y, z;\n};\n\nstruct triangle\n{\n    vec3d p[3];\n};\n\nstruct mesh\n{\n    vector&lt;triangle&gt; tris;\n\n    bool LoadFromObjectFile(string sFilename) {\n        return true;\n    }\n};\n</code></pre>\n\n<p>How could I translate this into Java? \nWould I use classes for that? So in order to group multiple <code>vec3d</code> in a <code>triangle</code> :</p>\n\n<pre><code>public class vec3d  \n{\n    float x, y, z;\n}\n\npublic class triangle  \n{   \n    vec3d[] p = new vec3d[3];\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 35613, "user_id": 7582247, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OH0qZNY40Y4/AAAAAAAAAAI/AAAAAAAABbc/xAoU3i299E0/photo.jpg?sz=128", "display_name": "Ted Lyngmo", "link": "https://stackoverflow.com/users/7582247/ted-lyngmo"}, "edited": false, "score": 0, "creation_date": 1577757782, "post_id": 59538487, "comment_id": 105247564, "body": "Perhaps it&#39;s just me, but pseudo code doesn&#39;t work well at all in this case."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1577764637, "post_id": 59538487, "comment_id": 105248504, "body": "Whoops... using those <code>union</code>s in the way I expect you&#39;re trying to use them, has undefined behaviour."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 9173835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HPLl.png?s=128&g=1", "display_name": "Jackalope", "link": "https://stackoverflow.com/users/9173835/jackalope"}, "edited": false, "score": 0, "creation_date": 1577830019, "post_id": 59542380, "comment_id": 105266532, "body": "How to add functions and operators overloading to vectors without implementing N times for every vector_base in your approach?"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 93, "user_id": 9173835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HPLl.png?s=128&g=1", "display_name": "Jackalope", "link": "https://stackoverflow.com/users/9173835/jackalope"}, "edited": false, "score": 0, "creation_date": 1577856522, "post_id": 59542380, "comment_id": 105269322, "body": "Use the constructor option, then do like you were doing before - add methods to <code>math::vector</code>."}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "reply_to_user": {"reputation": 93, "user_id": 9173835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HPLl.png?s=128&g=1", "display_name": "Jackalope", "link": "https://stackoverflow.com/users/9173835/jackalope"}, "edited": false, "score": 0, "creation_date": 1577858135, "post_id": 59542380, "comment_id": 105269510, "body": "Updated my answer to try and make that clearer, as well as add some information to help avoid UB."}], "tags": [], "owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "is_accepted": true, "score": 1, "last_activity_date": 1577859148, "last_edit_date": 1577859148, "creation_date": 1577785809, "answer_id": 59542380, "question_id": 59538487, "link": "https://stackoverflow.com/questions/59538487/initialization-of-class-with-member-array-of-arrays-with-parameter-pack/59542380#59542380", "title": "Initialization of class with member array of arrays with parameter pack", "body": "<h3>Answer to your actual question</h3>\n\n<p>C++ is just lousy at deducing things from braced lists. It won't look at the lists, notice your constructor is initializing a member with them, and try to fit the braces to that member. Basically, multi-level brace initialization only works if it doesn't have to deduce anything (e.g. a non-template constructor, aggregate initialization, or a varible-length <code>initializer_list</code>)</p>\n\n<p>To get this working for you, give each base type a simple constructor:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;typename T&gt;\nstruct vector_base&lt;2, T&gt; {\n    vector_base(T x, T y) : x(x), y(y) { } // &lt;-- add these to each specialization\n    union { T _[2]; struct { T x, y; }; struct { T u, v; }; };\n};\n</code></pre>\n\n<p>Then, for the generic derived type, <em>promote</em> the constructor:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template&lt;int SIZE, typename T&gt;\nstruct vector : detail::vector_base&lt;SIZE, T&gt;\n{    \n    using detail::vector_base&lt;SIZE, T&gt;::vector_base;\n    /* overloads and methods */\n};\n</code></pre>\n\n<p>Now all forms of <code>vector</code> have a non-generic constructor and brace-initialization works as expected.</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>math::vector&lt;3, math::vector&lt;3, float&gt;&gt; foo {{1,0,0},{0,1,0},{0,0,1}};\n</code></pre>\n\n<h3>Now, about the type punning</h3>\n\n<p>There's actually a neat trick for adding array-like access to struct members without breaking strict aliasing <a href=\"https://stackoverflow.com/questions/4173254/what-is-the-curiously-recurring-template-pattern-crtp\">here</a>: Overload the <code>[]</code> operator to access a <code>static constexpr</code> array of member-to-pointers to your struct members. </p>\n\n<p>Then there is only one level of indirection between array-like access and member access, in a constant-foldable map. This allows the compiler to, in most cases, produce the same assembly as if you used union punning or a <code>reinterpret_cast</code> to access the member data in a for loop.</p>\n\n<p>Applied to your code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>template &lt;size_t SIZE, typename T&gt;\nstruct vector_base;\n\ntemplate &lt;typename T&gt;\nstruct vector_base&lt;1, T&gt; {\n    constexpr vector_base(T x) : x(x) {}\n    T x;\n    constexpr T&amp; operator [](size_t index) { return this-&gt;*(vector_base::map[index]); }\n    constexpr const T&amp; operator [](size_t index) const { return this-&gt;*(vector_base::map[index]); }\n    static constexpr T vector_base::* map[1] = {&amp;vector_base::x};\n};\n\ntemplate &lt;typename T&gt;\nstruct vector_base&lt;2, T&gt; {\n    constexpr vector_base(T x, T y) : x(x), y(y) {}\n    union {\n        T x;\n        T u;\n    };\n    union {\n        T y;\n        T v;\n    };\n    constexpr T&amp; operator [](size_t index) { return this-&gt;*(vector_base::map[index]); }\n    constexpr const T&amp; operator [](size_t index) const { return this-&gt;*(vector_base::map[index]); }\n    static constexpr T vector_base::* map[2] = {&amp;vector_base::x, &amp;vector_base::y};\n};\n\ntemplate &lt;typename T&gt;\nstruct vector_base&lt;3, T&gt; {\n    constexpr vector_base(T x, T y, T z) : x(x), y(y), z(z) {}\n    T x;\n    T y;\n    T z;\n    constexpr T&amp; operator [](size_t index) { return this-&gt;*(vector_base::map[index]); }\n    constexpr const T&amp; operator [](size_t index) const { return this-&gt;*(vector_base::map[index]); }\n    static constexpr T vector_base::* map[3] = {&amp;vector_base::x, &amp;vector_base::y, &amp;vector_base::z};\n};\n\ntemplate &lt;typename T&gt;\nstruct vector_base&lt;4, T&gt; {\n    constexpr vector_base(T x, T y, T z, T w) : x(x), y(y), z(z), w(w) {}\n    T x;\n    T y;\n    T z;\n    T w;\n    constexpr T&amp; operator [](size_t index) { return this-&gt;*(vector_base::map[index]); }\n    constexpr const T&amp; operator [](size_t index) const { return this-&gt;*(vector_base::map[index]); }\n    static constexpr T vector_base::* map[4] = {&amp;vector_base::x, &amp;vector_base::y, &amp;vector_base::z, &amp;vector_base::w};\n};\n</code></pre>\n\n<p><em>Note: the union between x/y and u/v is actually <a href=\"https://stackoverflow.com/a/34677577/1863938\">well-formed</a>, even for accessing inactive members</em></p>\n\n<p>Demo: <a href=\"https://godbolt.org/z/ibpSqB\" rel=\"nofollow noreferrer\">https://godbolt.org/z/ibpSqB</a></p>\n"}], "owner": {"reputation": 93, "user_id": 9173835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0HPLl.png?s=128&g=1", "display_name": "Jackalope", "link": "https://stackoverflow.com/users/9173835/jackalope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 59542380, "answer_count": 1, "score": 0, "last_activity_date": 1577859148, "creation_date": 1577754288, "question_id": 59538487, "link": "https://stackoverflow.com/questions/59538487/initialization-of-class-with-member-array-of-arrays-with-parameter-pack", "title": "Initialization of class with member array of arrays with parameter pack", "body": "<p>The point is to create uniform struct for vertex and for matrix in c++</p>\n\n<p>Pseudocode:</p>\n\n<pre><code>vector&lt;COUNT, T&gt; {\n   union {\n    T data[COUNT];\n    struct { T x, y, z, w; } // if size is 1 -&gt; only x, if 2 -&gt; only x and y ... etc\n    struct { T u, v; }    // same   } \n }\n\n template&lt;COUNT, VCOUNT, T&gt;\n matrix&lt;COUNT, VCOUNT&gt; : vector&lt;COUNT, vector&lt;VCOUNT, T&gt;&gt; {}\n</code></pre>\n\n<p>And use like this:</p>\n\n<pre><code>  void foo() {\n      v3f pos(0,1,0);\n      pos.xy /= pos.z;\n      m4f transform = {{1,0,0,0},{0,1,0,0},{0,0,1,0},{0,0,0,3.456}}\n      transform.x.y = transform[3][2];\n   }\n</code></pre>\n\n<p>I am too close to make this possible, the only thing I can't reach is initialization of matrix:</p>\n\n<pre><code>   v4f v;  // v4f typedef of vector&lt;4,float&gt;, m4f is matrix&lt;4,4,float&gt;\n   v = {0,0,1,0}; //work\n\n   m4f mat = {v,v,{},v}; //don't work \"excess elements in struct initialization\"\n   m4f mat = {{v,v,{}, v}}; // same\n</code></pre>\n\n<p>Some implementation details</p>\n\n<pre><code>namespace math::detail\n{\n  template&lt;int SIZE, typename T&gt;\n  struct vector_base {\n    T _[SIZE];\n  };\n\n  template&lt;typename T&gt;\n  struct vector_base&lt;1, T&gt; {\n    union { T _[1]; T x; };\n  };\n\n  template&lt;typename T&gt;\n  struct vector_base&lt;2, T&gt; {\n    union { T _[2]; struct { T x, y; }; struct { T u, v; }; };\n  };\n\n  template&lt;typename T&gt;\n  struct vector_base&lt;3, T&gt; {\n    union { T _[3]; struct { T x, y, z; }; };\n  };\n\n  template&lt;typename T&gt;\n  struct vector_base&lt;4, T&gt; {\n    union { T _[4]; struct { T x, y, z, w; }; };\n  };\n}\n\nnamespace math\n{\n  enum VecI { X, Y, Z, W, U = X, V = Y };\n\n  template&lt;int SIZE, typename T&gt;\n  struct vector : detail::vector_base&lt;SIZE, T&gt;\n  {    \n      using base = detail::vector_base&lt;SIZE, T&gt;;\n      vector() = default;\n      template&lt;typename ... Types,\n              typename std::enable_if&lt;sizeof...(Types) == SIZE, int&gt;::type = 0&gt;\n      constexpr vector(Types ... s) : base{static_cast&lt;T&gt;(s)... } {}\n\n      // some foos, operator overloading\n  }\n\n  template&lt;int size, int vector_size, typename type&gt;\n  struct matrix : vector&lt;size, vector&lt;vector_size, type&gt;&gt;\n  { \n      // special foos only for matrix\n  }\n}\n</code></pre>\n\n<p>Vector constructor with parameter pack is not compiling in case of matrix:</p>\n\n<pre><code>error: no matching constructor for initialization of 'vector&lt;3, vector&lt;3, float&gt; &gt;'\n      return {{{1,0,0}, {0,1,0}, {0,0,1}}};\n              ^~~~~~~~~~~~~~~~~~~~~~~~~~~\n/math/vector/base.h:62:15: note: candidate template ignored: requirement 'sizeof...(Types) == 3' was not satisfied [with Types = &lt;&gt;]\n    constexpr vector(Types ... s) : base{static_cast&lt;T&gt;(s)... } {}\n              ^\n</code></pre>\n\n<p>Next implementation of matrix at least compile, but need initializing with extra braces <code>{{{},{},{}}</code> and can't inherit some vector properties:</p>\n\n<pre><code>  template&lt;int size, int vector_size, typename type&gt;\n  struct matrix\n  {\n    vector _[size];\n\n    // foos\n  }\n</code></pre>\n\n<p>I am also tried writing constructors for <code>vector_base</code>, for <code>matrix</code>, deduction guides for all of them, nothing works.</p>\n\n<p>How to initialize array of arrays in C++ with automatic deduction (can initialize <code>{5, 0.43, .1f}</code> without errors of type incompatibilities), without implicitly writing types like in <code>m4f mat = {v4f(0,0,1),v4f(0,1,0), v4f(1,0,0)}</code>, and without \"excess\" nested braces {{{}}}?</p>\n\n<p>My compiler is <code>clang:9.0.0</code> with <code>c++17</code>, also can use <code>c++2a</code>, or <code>c++20</code> when it comes.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 1, "creation_date": 1577753762, "post_id": 59538416, "comment_id": 105246910, "body": "For most application, you should really replace <code>vector&lt;string&gt;</code> by something like <code>vector&lt;Person&gt;</code> where <code>Person</code> would have name, id and age field which would be properly initialized (with a <code>CreatePersonFromStringData</code> function. Then you could write a function object to sort data using the ID."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1577757512, "post_id": 59538416, "comment_id": 105247525, "body": "The fundamental flaw in the way you&#39;re going about this is that you read an entire line as a string, and just stored the string, and now fighting with this string that has everything in it.  Very few, if any, C++ programs naively read in the entire line as a string and store it somewhere, and then contort themselves into trying to work with the string.  What is done is to break up the string into logical components, so that the program can easily manipulate the data.  As others mentioned, you should be breaking up that data into logical components (a <code>class</code> or <code>struct</code> would be an example)."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 12621793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b16426b1919d440a849dc3146e140c?s=128&d=identicon&r=PG&f=1", "display_name": "Jolistic", "link": "https://stackoverflow.com/users/12621793/jolistic"}, "edited": false, "score": 0, "creation_date": 1577754023, "post_id": 59538449, "comment_id": 105246946, "body": "I&#39;ve been searching for a method to &#39;filter&#39; the first/second attribute but I can&#39;t find one that works with vector. Any ideas?"}, {"owner": {"reputation": 376, "user_id": 10735411, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4b74e688eb9cbb88a994a3916865d2?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/10735411/j-doe"}, "reply_to_user": {"reputation": 3, "user_id": 12621793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b16426b1919d440a849dc3146e140c?s=128&d=identicon&r=PG&f=1", "display_name": "Jolistic", "link": "https://stackoverflow.com/users/12621793/jolistic"}, "edited": false, "score": 0, "creation_date": 1577756704, "post_id": 59538449, "comment_id": 105247392, "body": "@Jolistic why can&#39;t you use Phil1970s suggestion above? (And detailed in the other answers)"}], "tags": [], "owner": {"reputation": 108, "user_id": 10816937, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-B7NB-Rq9STo/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jMH4i6GvtCB5soZ5gWp4dYip_Ptg/mo/photo.jpg?sz=128", "display_name": "Marvin812", "link": "https://stackoverflow.com/users/10816937/marvin812"}, "is_accepted": false, "score": 0, "last_activity_date": 1577753816, "creation_date": 1577753816, "answer_id": 59538449, "question_id": 59538416, "link": "https://stackoverflow.com/questions/59538416/how-do-i-sort-string-vectors-based-on-2nd-column-3rd-column-etc/59538449#59538449", "title": "How do I sort string vectors based on 2nd column/3rd column etc?", "body": "<p>You can read those Strings by each character until you hit the first/second space.\nThen you should be able to \"filter\" out the first/second attribute. </p>\n"}, {"tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": true, "score": 1, "last_activity_date": 1577755730, "creation_date": 1577755730, "answer_id": 59538595, "question_id": 59538416, "link": "https://stackoverflow.com/questions/59538416/how-do-i-sort-string-vectors-based-on-2nd-column-3rd-column-etc/59538595#59538595", "title": "How do I sort string vectors based on 2nd column/3rd column etc?", "body": "<p><a href=\"https://en.cppreference.com/w/cpp/algorithm/sort\" rel=\"nofollow noreferrer\"><code>std::sort</code>'s third overload</a> has a third parameter allows you to provide a function to do the ordering logic.</p>\n\n<pre><code>// get nth token from a string\nstd::string getnTh(const std::string &amp; str, int n)\n{\n    std::istringstream strm(str);\n    std::string result;\n    for (int count = 0; count &lt; n; count++)\n    {\n        if (!(strm &gt;&gt; result))\n        {\n            throw std::out_of_range(\"ran out of tokens before n\");\n        }\n    }\n    return result;\n}\n\n// get ID, second token, from string\nstd::string get_ID(const std::string str)\n{\n    return getnTh(str, 2);\n}\n\n// compare the ID field, second token,  in two strings\nbool cmp_ID(const std::string &amp;a, const std::string &amp;b)\n{\n    std::string tokena = get_ID(a);\n    std::string tokenb = get_ID(b);\n    return tokena &lt; tokenb;\n}\n\nint main()\n{\n    std::vector&lt;std::string&gt; data {\"c c c \", \"b b b \" , \"a a a\"};\n    std::sort (data.begin(), data.end(), cmp_ID);\n}\n</code></pre>\n\n<p>Note: This code could be crunched down a bit. I've broken it down step by step for easy reading.</p>\n\n<p>Note: This is BRUTAL! It is constantly parsing the same <code>string</code>s over and over, a disgusting waste of effort.</p>\n\n<p>Instead you should make a structure to store the already parsed string and store that structure in the <code>std::vector</code>. </p>\n\n<pre><code>// stores a person\nstruct person\n{\n    std::string name;\n    std::string ID;\n    std::string age;\n\n    // constructor to parse an input string into a new person\n    person(const std::string &amp; in)\n    {\n        std::istringstream strm(in);\n        if (!(strm &gt;&gt; name &gt;&gt; ID &gt;&gt; age))\n        {\n            throw std::runtime_error(\"invalid person input\");\n        }\n    }\n};\n\n// much simpler and faster compare function. All of the parsing is done once ahead of time.\nbool cmp_ID(const person &amp;a, const person &amp;b)\n{\n    return a.ID &lt; b.ID;\n}\n\nint main()\n{\n    // replaces vector&lt;string&gt; data\n    std::vector&lt;person&gt; data {{\"c c c\"}, {\"b b b\"} , {\"a a a\"}};\n    std::sort (data.begin(), data.end(), cmp_ID);\n}\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 12621793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79b16426b1919d440a849dc3146e140c?s=128&d=identicon&r=PG&f=1", "display_name": "Jolistic", "link": "https://stackoverflow.com/users/12621793/jolistic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 59538595, "answer_count": 2, "score": 0, "last_activity_date": 1577755730, "creation_date": 1577753315, "question_id": 59538416, "link": "https://stackoverflow.com/questions/59538416/how-do-i-sort-string-vectors-based-on-2nd-column-3rd-column-etc", "title": "How do I sort string vectors based on 2nd column/3rd column etc?", "body": "<p>I have a </p>\n\n<pre><code>vector&lt;string&gt;data\n</code></pre>\n\n<p>organized as such</p>\n\n<pre><code>//NAME ID AGE\n//NAME ID AGE\n//NAME ID AGE\n//NAME ID AGE\n</code></pre>\n\n<p>I can sort it by name alphabetically, how can I sort it in ascending order based on the 2nd column/3rd column instead? Thank you for any assistance and advice.</p>\n"}, {"tags": ["c++", "assembly", "stack", "x86-64", "calling-convention"], "comments": [{"owner": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 4, "creation_date": 1577753298, "post_id": 59538388, "comment_id": 105246829, "body": "You are not supposed to remove (pop) arguments from the stack, that is the caller&#39;s responsibility. Also you shouldn&#39;t <code>sub rsp, 40</code>. You can reference the 5th argument as <code>[rsp+40]</code>."}, {"owner": {"reputation": 29, "user_id": 12048540, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAFinyL5CC0elLrvoLjsWoM8hTVYWXaCnwkpLOr=k-s128", "display_name": "OftenDeadKanji", "link": "https://stackoverflow.com/users/12048540/oftendeadkanji"}, "reply_to_user": {"reputation": 52454, "user_id": 547981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90042f6f33a9f87769fac02096ceea68?s=128&d=identicon&r=PG", "display_name": "Jester", "link": "https://stackoverflow.com/users/547981/jester"}, "edited": false, "score": 0, "creation_date": 1577754392, "post_id": 59538388, "comment_id": 105247007, "body": "Oh ok, thank you for an advice. I&#39;ll change my code to take the 5th argument by not trying to remove it from stack."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 12048540, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAFinyL5CC0elLrvoLjsWoM8hTVYWXaCnwkpLOr=k-s128", "display_name": "OftenDeadKanji", "link": "https://stackoverflow.com/users/12048540/oftendeadkanji"}, "is_accepted": true, "score": 3, "last_activity_date": 1577756713, "creation_date": 1577756713, "answer_id": 59538679, "question_id": 59538388, "link": "https://stackoverflow.com/questions/59538388/how-to-get-an-argument-from-stack-in-x64-assembly/59538679#59538679", "title": "How to get an argument from stack in x64 assembly?", "body": "<p>Thanks to Jester I know what is wrong in my code. I must have misunderstood sth when I read about x64 assembly. Substracting from RSP - I shouldn't do it.</p>\n\n<p>Instead of that, getting arguments from stack works when I write:\nMOV RAX, QWORD PTR [RSP+40]\nMOV RAX, QWORD PTR [RSP+48]\netc.</p>\n\n<p>Thank you Jester again!</p>\n"}], "owner": {"reputation": 29, "user_id": 12048540, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAFinyL5CC0elLrvoLjsWoM8hTVYWXaCnwkpLOr=k-s128", "display_name": "OftenDeadKanji", "link": "https://stackoverflow.com/users/12048540/oftendeadkanji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "accepted_answer_id": 59538679, "answer_count": 1, "score": 0, "last_activity_date": 1577766141, "creation_date": 1577753005, "last_edit_date": 1577766141, "question_id": 59538388, "link": "https://stackoverflow.com/questions/59538388/how-to-get-an-argument-from-stack-in-x64-assembly", "title": "How to get an argument from stack in x64 assembly?", "body": "<p>I'm trying to write a procedure in x64 assembly.</p>\n\n<p>I'm calling it in a main program that is written in C++. I'm passing several parameters. I know that first 4 will be in specific registers and the rest of them (should be) on stack. What's more, I read that before taking 5th argument from the stack, I should substract 40 from RSP. And at the begining it worked. Later I needed to check the address of sth so I did it by: cout and &amp;. But then, taking 5th argument from stack didn't work and I have no idea what whould I do.</p>\n\n<p>fragment of C++ code:</p>\n\n<pre><code>std::cout &lt;&lt; xOld &lt;&lt; '\\t' &lt;&lt; &amp;xOld &lt;&lt; std::endl;\nstd::cout &lt;&lt; xOld[0] &lt;&lt; '\\t' &lt;&lt; &amp;xOld[0] &lt;&lt; std::endl;\n\nSthInAsm(A, B, alfa, beta, n, xOld, xNew, lowerBound, upperBound, condition, isReady, precision, maxIterations);\n</code></pre>\n\n<p>fragment of Asm code:</p>\n\n<pre><code>.data\n    Aaddr DQ 0\n    Baddr DQ 0\n    alfa DQ 0\n    beta DQ 0\n    n DQ 0\n    xOld DQ 0\n.\n.\n.\n\n.code\n\nSthInAsm PROC   \n    MOV Aaddr, RCX\n    MOV Baddr, RDX\n    MOV alfa, R8\n    MOV beta, R9\n\n    SUB RSP, 40\n\n    XOR RAX, RAX\n    POP n\n    MOV RAX, n\n.\n.\n.\n</code></pre>\n\n<p>After 'MOV RAX, n' RAX doesn't contain value of n. When I didn't check address by cout before calling this function, it worked.</p>\n\n<p>Does anyone know what is the problem here?</p>\n"}, {"tags": ["c++", "visual-studio", "mfc", "visual-studio-2005"], "comments": [{"owner": {"reputation": 81087, "user_id": 104458, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cc46b8a10ecb92e61aaeb1efe436a0c8?s=128&d=identicon&r=PG", "display_name": "selbie", "link": "https://stackoverflow.com/users/104458/selbie"}, "edited": false, "score": 3, "creation_date": 1577768087, "post_id": 59538316, "comment_id": 105249089, "body": "Why are you removing these conditional checks?  Why are you migrating from an ancient version of VS (6.0) to VS2005 before going to VS2012?  Why not just go straight to the latest VS?"}], "answers": [{"tags": [], "owner": {"reputation": 1670, "user_id": 7341904, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3fly.jpg?s=128&g=1", "display_name": "Santosh Dhanawade", "link": "https://stackoverflow.com/users/7341904/santosh-dhanawade"}, "is_accepted": false, "score": 1, "last_activity_date": 1577768572, "creation_date": 1577768572, "answer_id": 59539795, "question_id": 59538316, "link": "https://stackoverflow.com/questions/59538316/migrating-from-mfc-c-6-0-application-to-vs-2005/59539795#59539795", "title": "migrating from MFC C++ 6.0 application to VS 2005", "body": "<p>Find and replace operation is not dependent on visual studio version. If you want use higher version of VS for this purpose then you just need to open particular VS and in find window replace window, replace parameter of \"Look In\" from entire solution to folder of your solution. This will allow you apply find and replace operation on certain folder.</p>\n\n<p>To solved your issue, <a href=\"https://marketplace.visualstudio.com/items?itemName=PeterMacej.MultilineSearchandReplace\" rel=\"nofollow noreferrer\">Multiline Search and Replace</a> will help to complete replacement of your code with specific.</p>\n"}, {"tags": [], "owner": {"reputation": 1233, "user_id": 11872808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29d7b759b09573f7750c178d99015eca?s=128&d=identicon&r=PG&f=1", "display_name": "Jeaninez - MSFT", "link": "https://stackoverflow.com/users/11872808/jeaninez-msft"}, "is_accepted": false, "score": 1, "last_activity_date": 1578221478, "last_edit_date": 1578221478, "creation_date": 1577769881, "answer_id": 59539942, "question_id": 59538316, "link": "https://stackoverflow.com/questions/59538316/migrating-from-mfc-c-6-0-application-to-vs-2005/59539942#59539942", "title": "migrating from MFC C++ 6.0 application to VS 2005", "body": "<p>You could find and replace text in the Visual Studio editor by using Find and Replace (<kbd>Ctrl</kbd>+<kbd>F</kbd> or <kbd>Ctrl</kbd>+<kbd>H</kbd>) or Find/Replace in Files (<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>F</kbd> or <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>H</kbd>). For more details, I suggest you could refer to the link:<a href=\"https://docs.microsoft.com/en-us/visualstudio/ide/finding-and-replacing-text?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/visualstudio/ide/finding-and-replacing-text?view=vs-2019</a></p>\n\n<p>You could also try to use <a href=\"https://docs.microsoft.com/en-us/dotnet/standard/base-types/regular-expressions\" rel=\"nofollow noreferrer\">.NET regular expressions</a> to find and replace text in visual studio. For more details, I suggest you could refer to the link:<a href=\"https://docs.microsoft.com/en-us/visualstudio/ide/using-regular-expressions-in-visual-studio?view=vs-2019\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/visualstudio/ide/using-regular-expressions-in-visual-studio?view=vs-2019</a></p>\n\n<p>As far as I'm concerned, Replacement couldn't make a symbol disappear, so <code>{ }</code> may need to be removed manually.</p>\n"}], "owner": {"reputation": 1075, "user_id": 1014674, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/752e679a313130c7818a6e71a428a18a?s=128&d=identicon&r=PG", "display_name": "Aldemar Cuartas Carvajal", "link": "https://stackoverflow.com/users/1014674/aldemar-cuartas-carvajal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1578221478, "creation_date": 1577752240, "question_id": 59538316, "link": "https://stackoverflow.com/questions/59538316/migrating-from-mfc-c-6-0-application-to-vs-2005", "title": "migrating from MFC C++ 6.0 application to VS 2005", "body": "<p>I have a big application developed in MFC C++ 6.0 and I want to migrate it to VS2005 and then, to VS2012. I'm looking for solve as much errors as I can, however I run into this situation:</p>\n\n<p>I had a MFC C++ method: BOOL CPaginaModelo::OnRetirar_ItemLista() wich returned a boolean value. So in many cpp files I use code like:</p>\n\n<pre><code>if (CPaginaModelo::OnRetirar_ItemLista())\n{\n    &lt;code&gt;\n}\n</code></pre>\n\n<p>For migration reasons, I have to change such method from BOOL to void, so the code should looks like:</p>\n\n<pre><code>CPaginaModelo::OnRetirar_ItemLista();\n&lt;code&gt;\n</code></pre>\n\n<p>Since there are a lot of parts of the project files where this is used, is there any way by using search and replace with regular expressions in VS2005 to replace first expression to look like second expression?</p>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["c++", "c++11", "templates", "stdvector", "specialization"], "comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1577751865, "post_id": 59538256, "comment_id": 105246531, "body": "Looks good to me."}, {"owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "edited": false, "score": 4, "creation_date": 1577752439, "post_id": 59538256, "comment_id": 105246653, "body": "It&#39;s an overload rather than a specialisation, but yeah, it should be fine. Give it a try!"}, {"owner": {"reputation": 13, "user_id": 12447576, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hRLSs0lgqJw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3revPDUbVaYK00pNxBKReMw3K7uxJA/photo.jpg?sz=128", "display_name": "Person Guy", "link": "https://stackoverflow.com/users/12447576/person-guy"}, "edited": false, "score": 0, "creation_date": 1577752793, "post_id": 59538256, "comment_id": 105246725, "body": "You&#39;re right, it is an overload, but when I try to add the angular brackets after func, i.e func&lt;std::vector&lt;T&gt;&gt;, it gives me an error."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1577753562, "post_id": 59538256, "comment_id": 105246867, "body": "You cannot partially specialize function templates ... which is what the error message from the compiler should tell you. use a member function of a template structure instead"}, {"owner": {"reputation": 2178, "user_id": 2208372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce0f8d54e87a4835f7cf67694cad247f?s=128&d=identicon&r=PG", "display_name": "Phil1970", "link": "https://stackoverflow.com/users/2208372/phil1970"}, "edited": false, "score": 0, "creation_date": 1577754033, "post_id": 59538256, "comment_id": 105246948, "body": "<code>&lt;template T&gt; struct S { static int func(const T&amp; input); };</code> would allow specialization. And you can then replace <code>&#47;&#47;do specialised stuff</code> by <code>return S::func(input); };</code>"}, {"owner": {"reputation": 3008, "user_id": 1863938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96ec4e16681460302ea67bfc201b76f3?s=128&d=identicon&r=PG", "display_name": "parktomatomi", "link": "https://stackoverflow.com/users/1863938/parktomatomi"}, "edited": false, "score": 1, "creation_date": 1577757158, "post_id": 59538256, "comment_id": 105247474, "body": "@PersonGuy For a simple template like the one in the problem, you can skip the angular brackets and let it deduce the template arguments using the function arguments. BUT, if you want to be explicit, use <code>func&lt;int&gt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 547, "user_id": 12450543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e33187968bcf2582820d7a085e7b29a?s=128&d=identicon&r=PG&f=1", "display_name": "klentit", "link": "https://stackoverflow.com/users/12450543/klentit"}, "is_accepted": true, "score": 1, "last_activity_date": 1577801781, "creation_date": 1577801781, "answer_id": 59545210, "question_id": 59538256, "link": "https://stackoverflow.com/questions/59538256/how-do-you-specialise-a-templated-function-with-a-templated-class/59545210#59545210", "title": "How do you specialise a templated function with a templated class?", "body": "<p>simply go on</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;iostream&gt;  \nusing namespace std;\n\ntemplate&lt;typename T&gt;\nint func(const vector&lt;T&gt;&amp; a){\n    for(auto i: a)         //do specialised stuff\n        cout&lt;&lt; (i&lt;&lt;1) &lt;&lt;\"\\n\";\n    return 0;\n\n}\nint main() {\n\n    vector&lt;int&gt; a={9,8,7};\n    func(a);\n}\n\n18\n16\n14\n</code></pre>\n\n<p>multiple each array a by 2 (shift left once, &lt;&lt; 1)</p>\n"}], "owner": {"reputation": 13, "user_id": 12447576, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hRLSs0lgqJw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3revPDUbVaYK00pNxBKReMw3K7uxJA/photo.jpg?sz=128", "display_name": "Person Guy", "link": "https://stackoverflow.com/users/12447576/person-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 59545210, "answer_count": 1, "score": 0, "last_activity_date": 1577801781, "creation_date": 1577751577, "question_id": 59538256, "link": "https://stackoverflow.com/questions/59538256/how-do-you-specialise-a-templated-function-with-a-templated-class", "title": "How do you specialise a templated function with a templated class?", "body": "<p>So i have a templated function:</p>\n\n<pre><code>template&lt;typename T&gt;\nint func(const T&amp; input){\n  //do stuff\n}\n</code></pre>\n\n<p>And I'd like to specialise it with a templated class(like std::vector) So like this:</p>\n\n<pre><code>template&lt;typename T&gt;\nint func(const std::vector&lt;T&gt;&amp; input){\n  //do specialised stuff\n}\n</code></pre>\n\n<p>But I don't know how exactly you do it. Thanks!</p>\n"}, {"tags": ["c++", "debugging"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1577750374, "post_id": 59538087, "comment_id": 105246231, "body": "You have a function <code>f</code> and an <code>Integer f</code> - which one are you trying to access in <code>f((int) a);</code>?"}, {"owner": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1577751285, "post_id": 59538087, "comment_id": 105246417, "body": "I&#39;m trying to call the function f"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1577751357, "post_id": 59538087, "comment_id": 105246436, "body": "Well your code is not doing that. Since <code>Integer f</code> is in the closest scope it tries to access that object instead. That&#39;s why you should avoid single letter names (and naming objects and functions the same way)"}, {"owner": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1577752452, "post_id": 59538087, "comment_id": 105246656, "body": "It&#39;s actually an exercise with missing functions in the class Integer and I need to write functions inside the class in order to execute the main function work. So, I can&#39;t really change the names of the objects or the function f."}], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "edited": false, "score": 0, "creation_date": 1577752476, "post_id": 59538268, "comment_id": 105246665, "body": "It&#39;s actually an exercise with missing functions in the class Integer and I need to write functions inside the class in order to execute the main function. So, I can&#39;t really change the names of the objects or the function f."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "edited": false, "score": 2, "creation_date": 1577752905, "post_id": 59538268, "comment_id": 105246755, "body": "In that case you need to contact whoever gave you that exercise to clarify. With the provided <code>main</code> it is not possible to call the function <code>int f(int)</code> directly due to the issue described in this answer. The only other option to get it to compile would be to add an overload of <code>operator()</code> to the class <code>Integer</code>"}, {"owner": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "edited": false, "score": 0, "creation_date": 1577753311, "post_id": 59538268, "comment_id": 105246831, "body": "so a = f(a) is equivalent to a.operator=( a.operator(f) ) ?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "edited": false, "score": 1, "creation_date": 1577753400, "post_id": 59538268, "comment_id": 105246844, "body": "Close, it&#39;s <code>a.operator=( f.operator()(a) )</code>"}, {"owner": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "edited": false, "score": 0, "creation_date": 1577753712, "post_id": 59538268, "comment_id": 105246900, "body": "Ok, thanks! What about the implicit conversion? when a conversion is really not needed? Because a lot of times I see objects passed as their attributes without even a cast"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "reply_to_user": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "edited": false, "score": 0, "creation_date": 1577754337, "post_id": 59538268, "comment_id": 105246993, "body": "I don&#39;t understand the question. Implicit conversions happen implicitly. Since you have an implicit <code>operator int</code> it will always be implicitly called when you use an <code>Integer</code> object where an <code>int</code> is expected"}, {"owner": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "edited": false, "score": 0, "creation_date": 1577754635, "post_id": 59538268, "comment_id": 105247036, "body": "For example if I don&#39;t have the operator int. When an implicit conversion is allowed ?"}], "tags": [], "owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "is_accepted": true, "score": 1, "last_activity_date": 1577751924, "last_edit_date": 1577751924, "creation_date": 1577751720, "answer_id": 59538268, "question_id": 59538087, "link": "https://stackoverflow.com/questions/59538087/when-a-conversion-operator-is-needed-c/59538268#59538268", "title": "When a conversion operator is needed c++?", "body": "<p>Your error stems from having a function (<code>int f(int)</code>) and an object (<code>Integer f</code>) with the same name.</p>\n\n<p>Since the object is closer in scope than the function the compiler tries to use it first, in particular it tries to find an <code>operator()</code> overload on it that would fit the parameter <code>a</code>. Since that doesn't exist it reports the error you see.</p>\n\n<p>The cleanest solution would be to use clear and distinct names for objects and functions (instead of one letter names).</p>\n\n<p>Assuming that for some reason you could not change them (which may happen in more complicated projects) the alternative is to use the scope resolution operator <code>::</code> - in your particular case it would be:</p>\n\n<pre><code>a = ::f(a);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "edited": false, "score": 0, "creation_date": 1577753019, "post_id": 59538327, "comment_id": 105246774, "body": "Thank you! Yes, I made a mistake I wanted to call e.x. But for the naming conflicts, I can&#39;t really change the names since it&#39;s an exercise where I need to make the main code work and only add functions in the Integer class."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "edited": false, "score": 1, "creation_date": 1577785003, "post_id": 59538327, "comment_id": 105253557, "body": "@Sydney.Ka Thank you for this feed-back. Indeed, if the names cannot be changed, you should accept UnholySheep\u2018s answer, which addresses this constraint. By the way, you do not need to explicitly cast to int in the function call (as in the error message and probably in your original code)."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 3, "last_activity_date": 1577752334, "creation_date": 1577752334, "answer_id": 59538327, "question_id": 59538087, "link": "https://stackoverflow.com/questions/59538087/when-a-conversion-operator-is-needed-c/59538327#59538327", "title": "When a conversion operator is needed c++?", "body": "<p>The compilation error comes from the naming conflict between one of the variables and a function, as already pointed out by others in the comments, and in the other answer. Just rename the function or the variable.</p>\n\n<p>But this is not the only problem.  Once this is corrected, you will face an endless recursion in your stream inserter, because it recursively calls itself.  Just correct it into:  </p>\n\n<pre><code>friend std::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, const Integer &amp;e) {\n    return os &lt;&lt; e.x;  // not e !!!\n}\n</code></pre>\n\n<p>Finally, it's not a problem yet,  but <code>operator+</code> should return a new Integer by value, and not the reference to the current object. Otherwhise, you may get some nasty surprises in more complex expressions.  </p>\n"}], "owner": {"reputation": 165, "user_id": 10718720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f91dd3004168c42db1b024aa391f10?s=128&d=identicon&r=PG&f=1", "display_name": "Sydney.Ka", "link": "https://stackoverflow.com/users/10718720/sydney-ka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 59538268, "answer_count": 2, "score": 1, "last_activity_date": 1577767412, "creation_date": 1577749977, "last_edit_date": 1577767412, "question_id": 59538087, "link": "https://stackoverflow.com/questions/59538087/when-a-conversion-operator-is-needed-c", "title": "When a conversion operator is needed c++?", "body": "<p>I don't really understand why I get this error when I compile the code below:</p>\n\n<blockquote>\n  <p>error: no match for call to '(Integer) (int)'<br>\n  a = f((int) a);</p>\n</blockquote>\n\n<p>I'm always confused if I need to declare the return type of <code>operator+</code> and <code>operator=</code> as <code>Integer&amp;</code> or just <code>Integer</code>, and when to declare a conversion operator in my class. If it's possible, what are all the implicit conversions of an object without a cast?</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nclass Integer{\n  int x;\npublic:\n  Integer(int e): x(e) {};\n  Integer(const Integer &amp;e): x(e.x) {};\n  Integer&amp; operator=(const Integer &amp;e) {\n    x = e.x;\n    return *this;\n  }\n\n  Integer&amp; operator+(const Integer &amp;e) {\n    x = x + e.x;\n    return *this;\n  }\n\n  operator int () {\n    return x;\n  }\n\n  friend std::ostream&amp; operator&lt;&lt;(std::ostream &amp;os, const Integer &amp;e) {\n    return os &lt;&lt; e.x; //corrected\n  }\n};\n\nint f ( int i ){\n  return i + 1;\n}\n\nint main (){\n  Integer e (1);\n  Integer f =2;\n\n  Integer a = e + f ;\n\n  a = f(a); //f the function\n  std :: cout &lt;&lt;\"a vaut : \"&lt;&lt;a &lt;&lt; std :: endl ;\n  return 0;\n}\n</code></pre>\n"}]