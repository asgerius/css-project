[{"tags": ["c++", "r", "rcpp", "testthat", "catch-unit-test"], "comments": [{"owner": {"reputation": 14779, "user_id": 8386140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pUC6i.png?s=128&g=1", "display_name": "duckmayr", "link": "https://stackoverflow.com/users/8386140/duckmayr"}, "edited": false, "score": 0, "creation_date": 1540424260, "post_id": 52979101, "comment_id": 92865122, "body": "Are you asking how to get the return value of the R function call <code>system.file(&quot;extdata&quot;, &quot;data-sample&quot;, package = &quot;Package&quot;, mustWork = TRUE)</code> from C++?"}, {"owner": {"reputation": 554, "user_id": 3312701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuQYZ.jpg?s=128&g=1", "display_name": "Yuri-M-Dias", "link": "https://stackoverflow.com/users/3312701/yuri-m-dias"}, "reply_to_user": {"reputation": 14779, "user_id": 8386140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pUC6i.png?s=128&g=1", "display_name": "duckmayr", "link": "https://stackoverflow.com/users/8386140/duckmayr"}, "edited": false, "score": 0, "creation_date": 1540424451, "post_id": 52979101, "comment_id": 92865166, "body": "@duckmayr Yes, that&#39;d solve my problem, however I need to pass that to C++ that is being called by R. Since this is a test file, it&#39;s not a single function for me to pass a <code>Function</code> to it."}], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 3312701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuQYZ.jpg?s=128&g=1", "display_name": "Yuri-M-Dias", "link": "https://stackoverflow.com/users/3312701/yuri-m-dias"}, "edited": false, "score": 0, "creation_date": 1540424349, "post_id": 52979189, "comment_id": 92865139, "body": "Yeah, I want exactly that second case. However, how can I pass that to the C++ tests? I don&#39;t think that my question left this clear, but this is the main issue that I&#39;m having. I can test with the second case in R tests as I want, but not if I want to do a similar test in Rcpp, which I can&#39;t (or better, don&#39;t want to) expose to R. In summary: I want to know how to pass that system.file path after it has been installed to the Catch tests."}], "tags": [], "owner": {"reputation": 329671, "user_id": 143305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e96ca7ae02c37e7d940d17997d780e5?s=128&d=identicon&r=PG", "display_name": "Dirk Eddelbuettel", "link": "https://stackoverflow.com/users/143305/dirk-eddelbuettel"}, "is_accepted": false, "score": 2, "last_activity_date": 1540423060, "creation_date": 1540423060, "answer_id": 52979189, "question_id": 52979101, "link": "https://stackoverflow.com/questions/52979101/acessing-data-on-inst-extdata-from-rcpp-catch-tests/52979189#52979189", "title": "Acessing data on `inst/extdata` from Rcpp Catch tests", "body": "<p>Don't use a hard coded path. Try try to figure out if you need at </p>\n\n<ul>\n<li><p><em>package built time</em> and then it would be <code>../inst/extdata/data-sample/foo.csv</code>, or</p></li>\n<li><p>once <em>installed</em> in which case it is standard <code>system.file(\"extdata/foo.csv\", package=\"yourpackage\")</code></p></li>\n</ul>\n\n<p>That is a bit of issue for R packages in general -- but even when your do <code>R CMD check</code> it actually <em>installs the package first</em> so you are in the second case.</p>\n\n<p>Makes sense?</p>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 3312701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuQYZ.jpg?s=128&g=1", "display_name": "Yuri-M-Dias", "link": "https://stackoverflow.com/users/3312701/yuri-m-dias"}, "edited": false, "score": 0, "creation_date": 1540434489, "post_id": 52979395, "comment_id": 92867243, "body": "Accepted because it was exactly what I needed, thank you! I&#39;ve found out that the package isn&#39;t registered at this time on the testing sides, so while it works in a normal R session/in the package use, I can&#39;t seem to find out why it can&#39;t find the package at testing time... I&#39;ll look more into it."}], "tags": [], "owner": {"reputation": 14779, "user_id": 8386140, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pUC6i.png?s=128&g=1", "display_name": "duckmayr", "link": "https://stackoverflow.com/users/8386140/duckmayr"}, "is_accepted": true, "score": 3, "last_activity_date": 1540424762, "creation_date": 1540424762, "answer_id": 52979395, "question_id": 52979101, "link": "https://stackoverflow.com/questions/52979101/acessing-data-on-inst-extdata-from-rcpp-catch-tests/52979395#52979395", "title": "Acessing data on `inst/extdata` from Rcpp Catch tests", "body": "<p>You can get the <code>system.file()</code> path by calling the R function from C++, even if it's not an exported C++ function (this is how I have interpreted your query following comments to the post and to Dirk Eddelbuettel's answer). Consider the following C++ code in <code>print_extdata.cpp</code>:</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n\nRcpp::StringVector get_extdata(){\n    Rcpp::Environment base(\"package:base\");\n    Rcpp::Function sys_file = base[\"system.file\"];\n    Rcpp::StringVector res = sys_file(\"extdata\", \"2012.csv\",\n                                      Rcpp::_[\"package\"] = \"testdat\");\n    return res;\n}\n\n\n// [[Rcpp::export]]\nvoid print_extdata() {\n    Rcpp::StringVector path = get_extdata();\n    Rcpp::Rcout &lt;&lt; path;\n}\n</code></pre>\n\n<p>Then called from R:</p>\n\n<pre><code>&gt; Rcpp::sourceCpp(\"print_extdata.cpp\")\n&gt; print_extdata()\n\"/home/duckmayr/R/x86_64-pc-linux-gnu-library/3.5/testdat/extdata/2012.csv\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 554, "user_id": 3312701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuQYZ.jpg?s=128&g=1", "display_name": "Yuri-M-Dias", "link": "https://stackoverflow.com/users/3312701/yuri-m-dias"}, "is_accepted": false, "score": 2, "last_activity_date": 1540488220, "creation_date": 1540488220, "answer_id": 52994895, "question_id": 52979101, "link": "https://stackoverflow.com/questions/52979101/acessing-data-on-inst-extdata-from-rcpp-catch-tests/52994895#52994895", "title": "Acessing data on `inst/extdata` from Rcpp Catch tests", "body": "<p>I'm adding this as another answer, as I only got to it from Dirk's and duckmayr's answers.</p>\n\n<p>I found out that the package at the Rcpp testing time hadn't been loaded yet, and so duckmayr's answer didn't work out of the box. However, after some fiddling, I found out that his code when called only with the <code>package</code> option would output the current project path, and so I found out that at that point the package would be loaded, however with the path from the project repository. </p>\n\n<p>This is indeed a bit confusing, as the tests that use R work with the R installation folder as expected (eg. <code>/home/user/R/x86_64-pc-linux-gnu-library/3.5/</code>). I need to dig deeper to see why this is so.</p>\n\n<p>In the end, I went with this function to be able to get the path in the tests:</p>\n\n<pre><code>#include &lt;Rcpp.h&gt;\n#include &lt;string&gt;\n\nstd::string get_datapath_fromR(std::string filename, std::string packageName)\n{\n    Rcpp::Environment base(\"package:base\");\n    Rcpp::Function sys_file = base[\"system.file\"];\n    // \"inst\" field is necessary at this point\n    Rcpp::StringVector file_path_sv = sys_file(\n        \"inst\", \"extdata\", filename,\n        Rcpp::_[\"package\"] = packageName,\n        Rcpp::_[\"mustWork\"] = true\n    );\n    std::string file_path = Rcpp::as&lt;std::string&gt;(file_path_sv);\n    return file_path;\n}\n</code></pre>\n\n<p>And I can call it on a test like this:</p>\n\n<pre><code>...\nstd::string datafile = get_datapath_fromR(\"data-sample\", \"package\");        \n...\n</code></pre>\n\n<p>And get this as a result: <code>/home/user/path/to/package/folder/packageName/inst/extdata/data-sample</code></p>\n"}], "owner": {"reputation": 554, "user_id": 3312701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HuQYZ.jpg?s=128&g=1", "display_name": "Yuri-M-Dias", "link": "https://stackoverflow.com/users/3312701/yuri-m-dias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 52979395, "answer_count": 3, "score": 0, "last_activity_date": 1540488300, "creation_date": 1540422354, "last_edit_date": 1540488300, "question_id": 52979101, "link": "https://stackoverflow.com/questions/52979101/acessing-data-on-inst-extdata-from-rcpp-catch-tests", "title": "Acessing data on `inst/extdata` from Rcpp Catch tests", "body": "<p>I am trying to access a data file on a <code>inst/extdata</code> file from a Rcpp Catch2 test. The file tree looks like this:</p>\n\n<pre><code>\u251c\u2500\u2500 inst\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 extdata\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 data-sample\n\u251c\u2500\u2500 R\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 catch-routine-registration.R\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 RcppExports.R\n\u251c\u2500\u2500 src\n \u00a0\u00a0 \u251c\u2500\u2500 mycode.cpp\n \u00a0\u00a0 \u251c\u2500\u2500 RcppExports.cpp\n \u00a0\u00a0 \u251c\u2500\u2500 Package_types.h\n \u00a0\u00a0 \u251c\u2500\u2500 test-example.cpp\n \u00a0\u00a0 \u2514\u2500\u2500 test-runner.cpp\n</code></pre>\n\n<p>Which would be similar from what you'd get from a new package skeleton using devtools, I believe. Now, I can access this <code>data-sample</code> file from a testthat test pretty easily like this:</p>\n\n<pre><code>system.file(\n    \"extdata\", \"data-sample\", package = \"Package\", mustWork = TRUE\n)\n</code></pre>\n\n<p>And use it as needed. I am aware that this uses the global path from the installed package at this point, however I can't find a way to pass this value to my c++ tests. I am currently using a hardcoded path, but that obviously only works on my machine.</p>\n\n<p>This is what I'm currently using:</p>\n\n<pre><code>const std::string DATAFILE = \"/my/package/inst/extdata/data-sample\";\n</code></pre>\n\n<p>Since this is a function for reading files I really can't embed this in any way, but I still want to know: how to pass R data to the Rcpp/Catch tests?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1540422058, "post_id": 52979008, "comment_id": 92864529, "body": "Better use something along the answers here: <a href=\"https://stackoverflow.com/questions/23047052/why-does-reading-a-record-struct-fields-from-stdistream-fail-and-how-can-i-fi\">Why does reading a record struct fields from std::istream fail, and how can I fix it?</a> isntead of managing separate arrays. Also use <code>std::string</code> and <code>std::vector</code> instead of raw arrays."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540422194, "post_id": 52979008, "comment_id": 92864568, "body": "<code>for(int i = 0; i &lt; number_of_students; i++)</code> For each student. This makes sense. <code>for(int j = 0; j &lt; 2; j++)</code> For each student, do everything twice. This does not make sense. I recommend sitting down with a pencil and some paper and mapping out exactly what you want to do and then sort out the order in which you need to do it because it looks like you have the order wrong."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540422329, "post_id": 52979008, "comment_id": 92864604, "body": "<code>file&gt;&gt;nos&gt;&gt;number_of_students;</code> is a good trick, by the way. It&#39;s surprising how many people get stuck trying to figure out how to discard little bits of header information like that."}, {"owner": {"reputation": 21, "user_id": 7650351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689f5a604d1aee5635f51ff85b66a10?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7650351/christopher"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540422502, "post_id": 52979008, "comment_id": 92864648, "body": "@user4581301 Thank you for the advice. I have that second for loop in there because I have seen others use a second loop for 2 dimensional arrays, is this not right?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540422656, "post_id": 52979008, "comment_id": 92864698, "body": "@Christopher Never do things just cause others do them."}, {"owner": {"reputation": 21, "user_id": 7650351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689f5a604d1aee5635f51ff85b66a10?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7650351/christopher"}, "edited": false, "score": 0, "creation_date": 1540422858, "post_id": 52979008, "comment_id": 92864748, "body": "@J.Doe Lol thank you for the advice."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540423007, "post_id": 52979008, "comment_id": 92864781, "body": "Don&#39;t blindly copy what other people do. Understand why they do it and apply that knowledge to what you do. You do not want to be what&#39;s called a <a href=\"https://en.wikipedia.org/wiki/Cargo_cult_programming\" rel=\"nofollow noreferrer\">Cargo Cult Programmer</a>. Think about what <code>for(int j = 0; j &lt; 2; j++)</code> does. It means that <code>for(int s = 0; s &lt; number_of_assignments; s++)</code> runs twice. that means <code>file&gt;&gt;names[i][j]&gt;&gt;scores[i][s];</code> will run <code>number_of_assignments * 2</code> times, grabbing <code>number_of_assignments * 2</code> pieces of names and assignment scores, which is not correct."}, {"owner": {"reputation": 21, "user_id": 7650351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689f5a604d1aee5635f51ff85b66a10?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7650351/christopher"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540423108, "post_id": 52979008, "comment_id": 92864800, "body": "@user4581301 Ohhhh okay! That makes more sense. Again, I am very new to C++ and really appreciate the guidance."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540423229, "post_id": 52979008, "comment_id": 92864831, "body": "Forget about C++ for now. Make sure you have the process right before you start wring code. Draw little pictures, write little to do lists, do whatever works best for your brain, but make sure you have the process right. Code comes after. If you write code without a plan, you&#39;re going to have to rewrite the code. Probably many times."}, {"owner": {"reputation": 21, "user_id": 7650351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689f5a604d1aee5635f51ff85b66a10?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7650351/christopher"}, "edited": false, "score": 0, "creation_date": 1540423872, "post_id": 52979008, "comment_id": 92865025, "body": "After your guidance I have successfully read in the first array with the names, but I am still attempting to figure out how to skip over this array when trying to read in the next array of the scores. Any suggestions?"}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540424096, "post_id": 52979008, "comment_id": 92865079, "body": "You have a file open. You can read two pieces of information per-iteration with <code>file &gt;&gt; some_name &gt;&gt; some_number;</code> You can validate the read succeeds by using it is a conditional in a <code>while</code> loop, e.g. <code>while ((file &gt;&gt; some_name &gt;&gt; some_number)) { &#47;* add name to vector of strings; add number to vector of int *&#47; }</code> your data is read and validated."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540424124, "post_id": 52979008, "comment_id": 92865093, "body": "Um. Chris, streams are line-based. After the first name comes the first row of the array of scores."}, {"owner": {"reputation": 21, "user_id": 7650351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689f5a604d1aee5635f51ff85b66a10?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7650351/christopher"}, "edited": false, "score": 0, "creation_date": 1540424388, "post_id": 52979008, "comment_id": 92865150, "body": "@J.Doe I&#39;m sure this task is trivial to you, but as someone new to this I am still stuck. This project is an assignment for a course I am in, but I am supposed to use resources outside of class to figure this out, so I would appreciate more details or a specific example. It may also help to add that this code needs to work for any file with any number of students and assignments under the max (100)."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540425104, "post_id": 52979008, "comment_id": 92865295, "body": "I suspect where @J.Doe is headed this time is the trick described by <a href=\"https://stackoverflow.com/a/7868998/4581301\">option 2 of this answer</a>. Read a line, stuff it into a <code>stringstream</code> read first and last name out of <code>stringstream</code> then loop through the numbers remaining in the <code>stringstream</code> until you have enough, are out of numbers, or something goes wrong. You can pick the best approach for you after you have determined what it is you need to do. Always start with the plan, even if it is a rudimentary plan."}, {"owner": {"reputation": 21, "user_id": 7650351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689f5a604d1aee5635f51ff85b66a10?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7650351/christopher"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540425494, "post_id": 52979008, "comment_id": 92865377, "body": "@user4581301 I can only use the packages already listed in my code. Is <code>stringstream</code> from the sstream package?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540425569, "post_id": 52979008, "comment_id": 92865394, "body": "@user4581301 Hell, NO! I&#39;d never suggest geting stuff from one stream just to suff it in another!!"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540426086, "post_id": 52979008, "comment_id": 92865512, "body": "Never say never, @J.Doe . It&#39;s slow, but the approach is highly resistant to irregular data and hard to get wrong. Yes, Christopher, <code>stringstream</code> is found in the sstream header."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540430812, "post_id": 52979008, "comment_id": 92866448, "body": "@user4581301 - has the right &quot;plan&quot;. After reading number of students and assignments, use <code>getline</code> to read a line at a time and make a <code>stringstream</code> from the line, find the last <code>[a-zA-Z]</code> in the stream, extract the characters (<code>getline</code> and a character buffer with the <code>count</code> parameter works fine) (don&#39;t forget to clear the <code>failbit</code> after the extraction limited by <code>count</code>) and then simply loop reading integers from the stream until <code>eofbit</code> is triggered. Eliminates rigid format of only <code>first last</code>."}], "answers": [{"comments": [{"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540430467, "post_id": 52979495, "comment_id": 92866380, "body": "That works great until you have a name like <code>&quot;Tina Louise Smith&quot;</code>, suggest using <code>find_last_of()</code> to find last character in line. Then read that number of characters. That avoids the first_name/last_name limitation."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540432276, "post_id": 52979495, "comment_id": 92866781, "body": "@DavidC.Rankin Now <i>Siddig El Tahir El Fadil El Siddig Abderrahman Mohammed Ahmed Abdel Karim El Mahdi</i> can take part in the class as well. Btw: Tina Louise is no longer in that class cause she is serving a life sentence for killing her parents for giving her <i>that</i> 2nd name."}, {"owner": {"reputation": 68403, "user_id": 3422102, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Tg0Gt.png?s=128&g=1", "display_name": "David C. Rankin", "link": "https://stackoverflow.com/users/3422102/david-c-rankin"}, "edited": false, "score": 0, "creation_date": 1540433520, "post_id": 52979495, "comment_id": 92867019, "body": "Chuckling... I guess she does have a lot of time for quite reflection there... Good job on the multiple validations of assignments and number of students."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "is_accepted": false, "score": 1, "last_activity_date": 1540477140, "last_edit_date": 1540477140, "creation_date": 1540425499, "answer_id": 52979495, "question_id": 52979008, "link": "https://stackoverflow.com/questions/52979008/how-to-read-in-multiple-arrays-with-varying-lengths-from-txt-file/52979495#52979495", "title": "How to read in multiple arrays with varying lengths from txt file?", "body": "<pre><code>#include &lt;cstddef&gt;  // std::size_t\n#include &lt;cstdlib&gt;  // EXIT_FAILURE\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    // All caps for MAX_CLASS_SIZE and MAX_NUMBER_OF_ASSIGNMENTS suggests\n    // that you #defined them. Better use constant expressions than preprocessor\n    // defines since they are typesafe:\n    constexpr std::size_t MAX_CLASS_SIZE{ 42 };            // I don't know what would        \n    constexpr std::size_t MAX_NUMBER_OF_ASSIGNMENTS{ 42 }; // be good numbers.\n\n    std::string names[MAX_CLASS_SIZE];\n    int scores[MAX_CLASS_SIZE][MAX_NUMBER_OF_ASSIGNMENTS];\n    std::size_t number_of_students;     // std::size_t because it is guaranteed that\n    std::size_t number_of_assignments;  // it is big enough to hold all possible sizes\n                                        // of objects in memory and indexes into arrays.\n\n    char const *filename{ \"scores.txt\" };  // give it a name so you can use it in\n                                           // error messages\n    std::ifstream file{ filename };        // use the constructor of ifstream to\n                                           // open the file\n    if (!file.is_open()) {  // if the file couldn't be opened exit early instead\n                            // of encasing everything in one giant if-block\n        std::cerr &lt;&lt; \"Couldn't open \\\"\" &lt;&lt; filename &lt;&lt; \"\\\" for reading :(\\n\\n\";\n        return EXIT_FAILURE;\n    }\n\n    std::string dummy;  // i named it dummy cause thats just what it is\n\n    // always check if read operations didn't fail:\n    if (!(file &gt;&gt; dummy &gt;&gt; number_of_students &gt;&gt; dummy &gt;&gt; number_of_assignments)) {\n        std::cerr &lt;&lt; \"Couldn't read number of students and/or number of assignments from \\\"\"\n                  &lt;&lt; filename &lt;&lt; \"\\\" :(\\n\\n\";\n        return EXIT_FAILURE;\n    }\n\n    if (number_of_students &gt; MAX_CLASS_SIZE ||\n        number_of_assignments &gt; MAX_NUMBER_OF_ASSIGNMENTS)\n    {\n        std::cerr &lt;&lt; \"I am sorry, but I was not designed to handle more than \" \n                  &lt;&lt; MAX_CLASS_SIZE &lt;&lt; \" Students or more than \"\n                  &lt;&lt; MAX_NUMBER_OF_ASSIGNMENTS &lt;&lt; \" assignments :(\\n\\n\";\n        return EXIT_FAILURE;\n    }\n\n    std::size_t num_students_read{}; // keep track of how many students we read\n\n                                                 //   / only continue if reading\n                                                 //  /  didn't fail\n    for (std::size_t i{}; i &lt; number_of_students &amp;&amp; (file &gt;&gt; names[i]); ++i) {\n\n        // As long as the next thing we read is not the first score it is\n        // part of the name:\n        std::string name_part;\n        while (!(file &gt;&gt; scores[i][0]) &amp;&amp; (file.clear(), (file &gt;&gt; name_part))) {\n            names[i] += ' ';\n            names[i] += name_part;\n        }\n\n        // We read the name and the first score.\n        // Now read the following number_of_assignments - 1 scores:\n\n        std::size_t num_scores_read{ 1 };    // keep track of how many scores we actually read\n        for (std::size_t s{1}; s &lt; number_of_assignments &amp;&amp; (file &gt;&gt; scores[i][s]); ++s)\n            ++num_scores_read;\n\n        if (num_scores_read != number_of_assignments) {  // and check if the number\n                                                         // of scores read matches\n                                                         // the number that was\n                                                         // promised\n            std::cerr &lt;&lt; \"There are scores missing for \" &lt;&lt; names[i] &lt;&lt; \" :(\\n\\n\";\n            return EXIT_FAILURE;\n        }\n        ++num_students_read;\n    }\n\n    if (num_students_read != number_of_students) {\n        std::cerr &lt;&lt; \"There sould be \" &lt;&lt; number_of_students &lt;&lt; \" students but I was \"\n                  &lt;&lt; \"only able to read \" &lt;&lt; num_students_read &lt;&lt; \" :(\\n\\n\";\n        return EXIT_FAILURE;\n    }\n\n    // print what we read:\n    for (std::size_t i{}; i &lt; number_of_students; ++i) {\n        std::cout &lt;&lt; names[i] &lt;&lt; \": \";\n        for (std::size_t s{}; s &lt; number_of_assignments; ++s)\n            std::cout &lt;&lt; scores[i][s] &lt;&lt; ' ';\n        std::cout.put('\\n');\n    }\n\n    // no need for file.close() ... the destructor of ifstream will\n    // take care of that.\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233613, "user_id": 14065, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e1475012bb1630271c9165899bccd548?s=128&d=identicon&r=PG", "display_name": "Martin York", "link": "https://stackoverflow.com/users/14065/martin-york"}, "is_accepted": true, "score": 2, "last_activity_date": 1540425661, "creation_date": 1540425661, "answer_id": 52979517, "question_id": 52979008, "link": "https://stackoverflow.com/questions/52979008/how-to-read-in-multiple-arrays-with-varying-lengths-from-txt-file/52979517#52979517", "title": "How to read in multiple arrays with varying lengths from txt file?", "body": "<p>You are reading the 6 names and 6 scores per student.</p>\n\n<pre><code>       for (int j = 0; j &lt; 2; j++) {\n            for (int s = 0; s &lt; number_of_assignments; s++) {\n                file &gt;&gt; names[i][j] &gt;&gt; scores[i][s];\n\n            }\n        }\n</code></pre>\n\n<p>I think you meant:</p>\n\n<pre><code>       for (int j = 0; j &lt; 2; j++) {\n           file &gt;&gt; names[i][j];\n       }\n       for (int s = 0; s &lt; number_of_assignments; s++) {\n           file &gt;&gt; scores[i][s];\n       }\n</code></pre>\n\n<p>If this fixes it. Time to get it reviewed for best practice: <a href=\"https://codereview.stackexchange.com\">CodeReview</a></p>\n"}], "owner": {"reputation": 21, "user_id": 7650351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e689f5a604d1aee5635f51ff85b66a10?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher", "link": "https://stackoverflow.com/users/7650351/christopher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 52979517, "answer_count": 2, "score": -1, "last_activity_date": 1540477140, "creation_date": 1540421749, "last_edit_date": 1540425298, "question_id": 52979008, "link": "https://stackoverflow.com/questions/52979008/how-to-read-in-multiple-arrays-with-varying-lengths-from-txt-file", "title": "How to read in multiple arrays with varying lengths from txt file?", "body": "<p>I am VERY new to C++ and attempting to read in some arrays from a text file with the following data:</p>\n\n<pre><code>Number_of_students 3\nNumber_of_assignments 3\nPaul Smith 5 6 7\nTina Smith 6 7 7\nAndrew Smith 4 5 10\n</code></pre>\n\n<p>What I need to do is put the names into an array and the numbers following them into a separate array. Below is my code, I am getting 0's whenever I try to output a value from one of the arrays.     </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\nusing namespace std;\n\nint main() {\n    const int MAX_CLASS_SIZE = 100;\n    const int MAX_NUMBER_OF_ASSIGNMENTS = 100;\n    string names[MAX_CLASS_SIZE][2]\n    int scores[MAX_CLASS_SIZE][MAX_NUMBER_OF_ASSIGNMENTS]\n    int number_of_students\n    int number_of_assignments\n\n    ifstream file;\n    file.open(\"grades.txt\");\n\n    if (file.is_open())\n    {\n        string nos;\n        string noa;\n\n        file &gt;&gt; nos &gt;&gt; number_of_students;\n        file &gt;&gt; noa &gt;&gt; number_of_assignments;\n\n        for (int i = 0; i &lt; number_of_students; i++) {\n            for (int j = 0; j &lt; 2; j++) {\n                for (int s = 0; s &lt; number_of_assignments; s++) {\n                    file &gt;&gt; names[i][j] &gt;&gt; scores[i][s];\n\n                }\n            }\n        }\n\n        file.close();\n    }\n\n    else cout &lt;&lt; \"Unable to open file\";\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540422641, "post_id": 52978879, "comment_id": 92864695, "body": "Utterly essential to answering this question is the type of <code>serialString</code>. If it is <code>std::string</code> what you&#39;ve tried should work (assuming <code>Serial.print</code> will consume std::string<code>) if it is </code>char *` you are comparing pointers rather than comparing what&#39;s at the pointers and performing pointer arithmetic rather than concatenating the strings at the pointers."}, {"owner": {"reputation": 1256, "user_id": 6936682, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/64c880364a7630596f6052d1bd005d01?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppe Christensen", "link": "https://stackoverflow.com/users/6936682/jeppe-christensen"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540457856, "post_id": 52978879, "comment_id": 92876045, "body": "oh, i overlooked that... guess i know why i got 3 downvotes now. jesus."}, {"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "edited": false, "score": 0, "creation_date": 1540459814, "post_id": 52978879, "comment_id": 92877258, "body": "How do you even compile it. You&#39;ve got several locally created variables and they cannot be used outside of its scope."}], "answers": [{"comments": [{"owner": {"reputation": 1256, "user_id": 6936682, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/64c880364a7630596f6052d1bd005d01?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppe Christensen", "link": "https://stackoverflow.com/users/6936682/jeppe-christensen"}, "edited": false, "score": 0, "creation_date": 1540461782, "post_id": 52986135, "comment_id": 92878515, "body": "Thank you for your answer, however, in this case, I believe its the actual memory of the Arduino that bugs my result rather than variable shadowing. I will go ahead and read the article and see how I can optimize my code in that regard."}, {"owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "reply_to_user": {"reputation": 1256, "user_id": 6936682, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/64c880364a7630596f6052d1bd005d01?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppe Christensen", "link": "https://stackoverflow.com/users/6936682/jeppe-christensen"}, "edited": false, "score": 0, "creation_date": 1540462015, "post_id": 52986135, "comment_id": 92878677, "body": "As it&#39;s here it&#39; most definitely shadowing issue."}], "tags": [], "owner": {"reputation": 3239, "user_id": 5271927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aTJYf.jpg?s=128&g=1", "display_name": "KIIV", "link": "https://stackoverflow.com/users/5271927/kiiv"}, "is_accepted": true, "score": 0, "last_activity_date": 1540460898, "last_edit_date": 1540460898, "creation_date": 1540460451, "answer_id": 52986135, "question_id": 52978879, "link": "https://stackoverflow.com/questions/52978879/doesnt-print-the-entire-string-from-sensor-data/52986135#52986135", "title": "Doesn&#39;t print the entire string from sensor data", "body": "<blockquote>\n  <p><strong>Variable shadowing.</strong></p>\n  \n  <p>In computer programming, variable shadowing occurs when a variable declared within a certain scope (decision block, method, or inner class) has the same name as a variable declared in an outer scope.</p>\n</blockquote>\n\n<p>You haven't posted minimal working example and you've probably ommited global variables. But if you are able to compile it, it must be definitely there. DROP both global variable declarations: <code>String NIRString;</code> and <code>String VISString;</code>. It will not compile now. But that also means you were changing completely different variables inside of if block <code>{}</code>.</p>\n\n<p>Keep the variables as local as possible. It cannot be inside of if () { block; }.</p>\n\n<pre><code>String returnMeasurements(int sensorType)\n{\n  String result;\n\n  if (sensorType == 1 || sensorType == 3)\n  {\n    //do assay\n    result += \"SOME DATA HERE\"; // Gather data from sensor and append to NIRSTRING\n  }\n\n  if (sensorType == 2 || sensorType == 3)\n  {\n    //do assay\n    result += \"SOME DATA HERE\"; // Gather data from sensor and append to VISSTRING\n  }\n  Serial.print(\"TEST\");\n  Serial.print(result); //HERE IS WHEN THINGS SOMETIMES GO WRONG\n  return result;\n}\n</code></pre>\n\n<p>However this one is pretty memory intensive on Arduino platform, so it's not really reccomended at all to do String concatenations. Nice article about it: <a href=\"https://hackingmajenkoblog.wordpress.com/2016/02/04/the-evils-of-arduino-strings/\" rel=\"nofollow noreferrer\">The Evils od Arduino Strings</a> </p>\n"}], "owner": {"reputation": 1256, "user_id": 6936682, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/64c880364a7630596f6052d1bd005d01?s=128&d=identicon&r=PG&f=1", "display_name": "Jeppe Christensen", "link": "https://stackoverflow.com/users/6936682/jeppe-christensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 52986135, "answer_count": 1, "score": -3, "last_activity_date": 1540460898, "creation_date": 1540420786, "last_edit_date": 1540457874, "question_id": 52978879, "link": "https://stackoverflow.com/questions/52978879/doesnt-print-the-entire-string-from-sensor-data", "title": "Doesn&#39;t print the entire string from sensor data", "body": "<p>So I have a setup of two sensors that captures a collection of data when I prompt it to.</p>\n\n<pre><code>void loop() {\n..\n    else if (serialString == \"5\")\n    {\n        String outputString = returnMeasurements(3);\n    }\n}\nString returnMeasurements(int sensorType)\n{\n  if (sensorType == 1 || sensorType == 3)\n  {\n   //do assay\n    String NIRString = \"SOME DATA HERE\" // Gather data from sensor and append to NIRSTRING\n  }\n\n  if (sensorType == 2 || sensorType == 3)\n  {\n    //do assay\n    String VISString = \"SOME DATA HERE\" // Gather data from sensor and append to VISSTRING\n  }\n  Serial.print(\"TEST\");\n  Serial.print(NIRString + VISString); //HERE IS WHEN THINGS SOMETIMES GO WRONG\n  return  NIRString + VISString;\n}\n</code></pre>\n\n<p>I've simplified the above code a lot so that only the essential is available here.</p>\n\n<p>My problem is, that sometimes, the <code>Serial.print</code> statement above the <code>return</code> statement doesn't print anything, even though <code>NIRString</code> and <code>VISString</code> contains data. (Meaning that nothing is returned)<br>\nIt seems to happen randomly, but yet quite often. </p>\n\n<p>I suspect, that since <code>NIRString</code> and <code>VISString</code> are quite long strings, it somehow occupy memory? Other than that, I have no idea what's wrong.</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"tags": [], "owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "is_accepted": true, "score": 1, "last_activity_date": 1540419294, "creation_date": 1540419294, "answer_id": 52978640, "question_id": 52978565, "link": "https://stackoverflow.com/questions/52978565/dependent-name-lookup-in-base-class-template/52978640#52978640", "title": "Dependent name lookup in base class template", "body": "<p>There would only be a problem if there is disagreement about what the member name means. So long as only the base defines the name then there will be no problems but if the derived type redefines it to be something else then the derived member will be chosen.</p>\n"}], "owner": {"reputation": 1759, "user_id": 6661174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OBv75.jpg?s=128&g=1", "display_name": "rmawatson", "link": "https://stackoverflow.com/users/6661174/rmawatson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 52978640, "answer_count": 1, "score": 2, "last_activity_date": 1540487901, "creation_date": 1540418923, "last_edit_date": 1540487901, "question_id": 52978565, "link": "https://stackoverflow.com/questions/52978565/dependent-name-lookup-in-base-class-template", "title": "Dependent name lookup in base class template", "body": "<p>I understand that a lookup for a dependent <code>member/typedef</code> will not be performed on a dependent base class template and that I have have to explicitly prefix with <code>this-&gt;member</code> in the case of a base member, or <code>typename base&lt;T...&gt;::sometype</code> for a <code>typedef/using</code> on the base class.</p>\n\n<p>All of the answers I can find suggest using <code>typename base&lt;T...&gt;::sometype</code>. This can obviously be a typedef in the derived class like <code>using base_type = base&lt;T...&gt;</code> and then <code>typename base_type::some_type</code> everywhere, but this then requires repetition of the base class arguments in both the deriviation, and the typedef. </p>\n\n<p>However, it does appear to work when I use <code>derived::sometype</code>, rather then specifying the base class. <a href=\"https://ideone.com/m6JB87\" rel=\"nofollow noreferrer\">for example</a></p>\n\n<pre><code>template &lt;typename T&gt;\nstruct base\n{\n    using type = T*;\n\n};\n\ntemplate &lt;typename T&gt;\nstruct derived : base&lt;T&gt;\n{\n    derived ()\n    {\n        typename derived::type l; // &lt;- Here  \n    }\n};\n\nint main() {\n\n    derived &lt;int&gt; v;\n    return 0;\n}\n</code></pre>\n\n<p>This allows me to use the <code>injected class name</code>, and importantly saves me any repetition of template arguments anywhere but the class definition, and base derivation. </p>\n\n<p>From <a href=\"https://stackoverflow.com/questions/19816509/use-typedef-using-from-templated-base-class-in-derived-class\">this</a> answer it appears to me that the compiler just needs to know that the name is a dependent name in order for the lookup to be done in the second stage, and using the derived name appears serves this purpose?</p>\n\n<p>As all of the answers I found suggested using <code>base&lt;T...&gt;</code> for dependent names, I am interested to know if there are any problems with using the <code>injected class name</code> to access dependent types in the base? </p>\n\n<p><strong>Edit:</strong></p>\n\n<p>It appears the base class name is also injected, and so \n<code>using base_type = derived::base;</code> is all that is needed in order to not have to repeat the base class types. At least when the name of the base class is known.</p>\n\n<p>Interestingly there was a <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2009/n2881.html\" rel=\"nofollow noreferrer\">proposal</a> in 2009 to be able to alias base classes, which would solved the problem when the name of the base class is not know, or multiple specializations of the same base were inherited from. Although the proposal was rejected saying \"Encourage the paper author to continue to the direction of a more general solution\".</p>\n\n<p>Discussing this elsewhere it was suggested that something like this would provide a more general solution, and would allow bases to be aliased and their injected name used. However this has not been proposed as far as I know.</p>\n\n<pre><code>template &lt;typename T&gt; using TD = typename std::decay&lt;T&gt;, using std::swap\nvoid fun(TD x) noexcept(swap(x, x)) { ... }\n</code></pre>\n"}, {"tags": ["c++", "c++11", "c++14", "c++17"], "comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 4, "creation_date": 1540420913, "post_id": 52978545, "comment_id": 92864180, "body": "This is arguably a defect in the standard, and a performance bug in gcc and VS. When a <code>noexcept</code> function calls another function which is not <code>noexcept</code>, extra code has to be added by the compiler to call <code>terminate()</code> just in case of an exception. And things that <code>deallocate</code> (such as destructors) are often marked <code>noexcept</code>.  So having <code>deallocate</code> not decorated needlessly creates code bloat.  LLVM&#39;s libc++ <code>deallocate</code> is <code>noexcept</code>. This is a conforming extension, and here is how you can write a defect report to make it required: <a href=\"http://cplusplus.github.io/LWG/lwg-active.html#submit_issue\" rel=\"nofollow noreferrer\">cplusplus.github.io/LWG/lwg-active.html#submit_issue</a>"}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1540430380, "post_id": 52978545, "comment_id": 92866367, "body": "I think my remark above about this being a performance bug in gcc is incorrect.  Further testing is revealing they optimize around it."}], "answers": [{"comments": [{"owner": {"reputation": 592, "user_id": 3054219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298f60961c829e570dbf0566134dd7cb?s=128&d=identicon&r=PG&f=1", "display_name": "Sonic78", "link": "https://stackoverflow.com/users/3054219/sonic78"}, "edited": false, "score": 0, "creation_date": 1541159048, "post_id": 52978615, "comment_id": 93130187, "body": "Narrow contracts are specified by <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3279.pdf\" rel=\"nofollow noreferrer\">N3279</a>: A narrow contract is a contract which is not wide.  Narrow contracts for a functions or operations result in undefined behavior when called in a manner that violates the documented contract. Such a contract speci?es at least one precondition involving its  arguments, object state, or some external global state, such as the initialization of a static object.  Good examples of standard functions with narrow contracts are vector&lt;T&gt;::front() and vector&lt;T&gt;::operator[](size_type)."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 4, "last_activity_date": 1540419185, "creation_date": 1540419185, "answer_id": 52978615, "question_id": 52978545, "link": "https://stackoverflow.com/questions/52978545/why-is-stdallocatordeallocate-not-noexcept/52978615#52978615", "title": "Why is std::allocator::deallocate not noexcept?", "body": "<p>It's narrow contract (causing undefined behavior if you pass it a pointer not returned by <code>allocate</code>, for instance), so per the standard library's usual policy it's not marked noexcept.</p>\n"}], "owner": {"reputation": 592, "user_id": 3054219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298f60961c829e570dbf0566134dd7cb?s=128&d=identicon&r=PG&f=1", "display_name": "Sonic78", "link": "https://stackoverflow.com/users/3054219/sonic78"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 1, "accepted_answer_id": 52978615, "answer_count": 1, "score": 3, "last_activity_date": 1540422500, "creation_date": 1540418767, "last_edit_date": 1540422500, "question_id": 52978545, "link": "https://stackoverflow.com/questions/52978545/why-is-stdallocatordeallocate-not-noexcept", "title": "Why is std::allocator::deallocate not noexcept?", "body": "<p>The C++ specification (ISO/IEC 14882:2011 + ISO/IEC 14882:2014) defines in <a href=\"https://timsong-cpp.github.io/cppwp/n3337/library#tab:utilities.allocator.requirements\" rel=\"nofollow noreferrer\">Table 28</a> \u2014 Allocator requirements for deallocate:</p>\n\n<blockquote>\n  <p>All n T objects in the area pointed to by p shall be destroyed prior\n  to this call. n shall match the value passed to allocate to obtain\n  this memory. Does not throw exceptions.</p>\n</blockquote>\n\n<p>But why is deallocate still <strong>not</strong> noexcept?</p>\n"}, {"tags": ["c++", "macos", "qt", "opengl", "metal"], "answers": [{"tags": [], "owner": {"reputation": 23673, "user_id": 1118321, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a56b8390b7457739ed8cc7cbd52bf251?s=128&d=identicon&r=PG", "display_name": "user1118321", "link": "https://stackoverflow.com/users/1118321/user1118321"}, "is_accepted": true, "score": 2, "last_activity_date": 1540617233, "creation_date": 1540617233, "answer_id": 53018916, "question_id": 52978165, "link": "https://stackoverflow.com/questions/52978165/is-it-feasible-to-convert-a-qopenglwidget-subclass-into-one-that-uses-metal-inst/53018916#53018916", "title": "Is it feasible to convert a QOpenGLWidget subclass into one that uses Metal instead of OpenGL?", "body": "<p>Yes, it is possible to do what you want. It probably won't be a straightforward transition due to the fact that the code you posted uses very old deprecated features of OpenGL. Also, you might be better off just using CoreGraphics for the simple drawing you're doing. (It looks like a number of solid-colored, quads are being drawn. That's very easy and fairly efficient in CoreGraphics.) Metal seems like overkill for this job. That said, here are some ideas.</p>\n\n<p>Metal is an inherently Objective-C API, so you will need to wrap the Metal code in some sort of wrapper. There are a number of ways you could write such a wrapper. You could make an Objective-C class that does your drawing and call it from your C++/Qt class. (You'll need to put your Qt class into a .mm file so the compiler treats it as Objective-C++ to call Objective-C code.) Or you could make your Qt class be an abstract class that has an implementation pointer to the class that does the real work. On Windows and Linux it could point to an object that does OpenGL drawing. On macOS it would point to your Objective-C++ class that uses Metal for drawing.</p>\n\n<p><a href=\"https://developer.apple.com/documentation/metal/mixing_metal_and_opengl_rendering_in_a_view\" rel=\"nofollow noreferrer\">This example of mixing OpenGL and Metal</a> might be informative for understanding how the 2 are similar and where they differ. Rather than having a context where you set state and make draw calls like in OpenGL, in Metal you create a command buffer with the drawing commands and then submit them to be drawn. Like with more modern OpenGL programming where you have vertex arrays and apply a vertex and fragment shader to every piece of geometry, in Metal you will also submit vertices and use a fragment and vertex shader for drawing.</p>\n\n<p>To be honest, though, that sounds like a lot of work. (But it is certainly possible to do.) If you did it in CoreGraphics it would look something like this:</p>\n\n<pre><code>   virtual void paintCG()\n   {  \n      const float meterWidth = [...];\n      const float top        = [...];\n\n      CGRect backgroundRect = CGRectMake(...);\n      CGContextClearRect(ctx, backgroundRect);\n\n      float x = 0.0f;\n      for (int i=0; i&lt;numMeters; i++)\n      {\n         const float y = _meterHeight[i];\n\n         CGContextSetRGBFillColor(ctx, _meterColorRed[i], _meterColorGreen[i], _meterColorBlue[i]);\n         CGRect meterRect = CGRectMake(x, y, meterWidth, _meterHeight[i]);\n         CGContextFillRect(ctx, meterRect);\n\n         x += meterWidth;\n      }\n      glEnd();\n   }\n</code></pre>\n\n<p>It just requires that you have a <code>CGContextRef</code>, which I believe you can get from whatever window you're drawing into. If the window is an <code>NSWindow</code>, then you can call:</p>\n\n<pre><code> NSGraphicsContext* nsContext = [window graphicsContext];\n CGContextRef ctx = nsContext.CGContext;\n</code></pre>\n\n<p>This seems easier to write and maintain than using Metal in this case.</p>\n"}], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 53018916, "answer_count": 1, "score": 0, "last_activity_date": 1540617233, "creation_date": 1540416612, "question_id": 52978165, "link": "https://stackoverflow.com/questions/52978165/is-it-feasible-to-convert-a-qopenglwidget-subclass-into-one-that-uses-metal-inst", "title": "Is it feasible to convert a QOpenGLWidget subclass into one that uses Metal instead of OpenGL?", "body": "<p>Background:  I've got a Qt/C++ application that currently runs on (and is deployed on) MacOS/X, Windows, and Linux.  In one of the application's windows is a view of several dozen audio meters that needs to update frequently (i.e. at 20Hz or faster), so I implemented that view using a <a href=\"http://doc.qt.io/qt-5/qopenglwidget.html\" rel=\"nofollow noreferrer\">QOpenGLWidget</a> and some simple OpenGL routines (see example code below).</p>\n\n<p>This all works fine, however Apple has recently <a href=\"https://www.anandtech.com/show/12894/apple-deprecates-opengl-across-all-oses\" rel=\"nofollow noreferrer\">deprecated OpenGL</a> and wants all developers to convert their applications over to Apple's own \"Metal\" API instead; with the implication that eventually any program that uses OpenGL will stop working on MacOS/X.</p>\n\n<p>I don't mind doing a little <code>#ifdef</code>-magic inside my code to support a separate API for MacOS/X, if I must, however it's not clear if coding to Metal is something that can actually be done in Qt currently.  If Metal-inside-Qt is possible, what is the proper approach to use?  If not, should I wait for a future release of Qt with better Metal support (e.g. <a href=\"http://blog.qt.io/blog/2018/05/30/vulkan-for-qt-on-macos/\" rel=\"nofollow noreferrer\">Qt 5.12</a>?) rather than waste my time trying to make Metal work in my current Qt version (5.11.2)?</p>\n\n<pre><code>// OpenGL meters view implementation (simplified for readability)\nclass GLMetersCanvas : public QOpenGLWidget\n{  \npublic:\n   GLMetersCanvas( [...] );\n\n   virtual void initializeGL()\n   {  \n      glDisable(GL_TEXTURE_2D);\n      glDisable(GL_DEPTH_TEST);\n      glDisable(GL_COLOR_MATERIAL);\n      glDisable(GL_LIGHTING);\n      glClearColor(0, 0, 0, 0);\n   }\n\n   virtual void resizeGL(int w, int h)\n   {  \n      glViewport(0, 0, w, h);\n      glMatrixMode(GL_PROJECTION);\n      glLoadIdentity();\n      glOrtho(0, w, 0, h, -1, 1);\n      glMatrixMode(GL_MODELVIEW);\n      glLoadIdentity();\n   }\n\n   virtual void paintGL()\n   {  \n      const float meterWidth = [...];\n      const float top        = [...];\n\n      glClear(GL_COLOR_BUFFER_BIT);\n      glBegin(GL_QUADS);\n\n      float x = 0.0f;\n      for (int i=0; i&lt;numMeters; i++)\n      {\n         const float y = _meterHeight[i];\n\n         glColor3f(_meterColorRed[i], _meterColorGreen[i], _meterColorBlue[i]);\n         glVertex2f(x,            top);\n         glVertex2f(x+meterWidth, top);\n         glVertex2f(x+meterWidth, y);\n         glVertex2f(x,            y);\n\n         x += meterWidth;\n      }\n      glEnd();\n   }\n};\n</code></pre>\n"}, {"tags": ["c++", "dictionary", "function-pointers"], "comments": [{"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1540417468, "post_id": 52978160, "comment_id": 92863166, "body": "Reopened. The purported duplicate was just a map of PMFs. This question is about binding an object and a function."}, {"owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "edited": false, "score": 2, "creation_date": 1540417753, "post_id": 52978160, "comment_id": 92863257, "body": "<code>GetTemp</code> is not static is a member function. <code>typeof(GetTemp) = int (*TemperatureModel::)(void)</code> not <code>int (*)(void)</code>. Use std::function"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540419075, "post_id": 52978477, "comment_id": 92863631, "body": "Um. In your lambda ... wouldn&#39;t tempModel not be const?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1540419444, "post_id": 52978477, "comment_id": 92863735, "body": "@J.Doe -- could be. I&#39;m tired. I&#39;ve added a disclaimer. &lt;g&gt;"}], "tags": [], "owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "is_accepted": false, "score": 1, "last_activity_date": 1540419414, "last_edit_date": 1540419414, "creation_date": 1540418380, "answer_id": 52978477, "question_id": 52978160, "link": "https://stackoverflow.com/questions/52978160/how-do-i-create-c-map-of-object-function-pointers/52978477#52978477", "title": "How do I create C++ map of object function pointers?", "body": "<p>The simplest approach to us old-fashioned types is to write a function:</p>\n\n<pre><code>int call_it() {\n    return tempModel-&gt;GetTemp();\n}\n</code></pre>\n\n<p>and store that function in the map in the question:</p>\n\n<pre><code>map&lt;string, GetIntFunction&gt; get_integer_map {\n    { \"temp\", call_it }\n};\n</code></pre>\n\n<p>A newer approach is to use a lambda:</p>\n\n<pre><code>map&lt;string, GetIntFunction&gt; get_integer_map {\n    { \"temp\", [=]() { return tempModel-&gt;GetTemp(); }\n};\n</code></pre>\n\n<p>Another approach (as suggested in the comment by Kamil Cuk) is to use <code>std::function</code> to bind the object and the function:</p>\n\n<pre><code>map&lt;string, std::function&lt;int()&gt;&gt; get_integer_map {\n    { \"temp\", std::function&lt;int()&gt;(&amp;TemperatureModel::GetTemp, tempModel) }\n};\n</code></pre>\n\n<p>Caution: code written but not compiled; it may have errors.</p>\n"}], "owner": {"reputation": 3010, "user_id": 120755, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fc3cdc585ac6b6d36d01125ea2c6dc9c?s=128&d=identicon&r=PG", "display_name": "bsh152s", "link": "https://stackoverflow.com/users/120755/bsh152s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 428, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1540419414, "creation_date": 1540416583, "question_id": 52978160, "link": "https://stackoverflow.com/questions/52978160/how-do-i-create-c-map-of-object-function-pointers", "title": "How do I create C++ map of object function pointers?", "body": "<p>I'm trying to create a map of strings to functions.  When it's a simple function, I've seen how to do this like so:</p>\n\n<pre><code>typedef int (*GetIntFunction)(void);\n\nint get_temp()\n{\n  return 42;\n}\n\nmap&lt;string, GetIntFunction&gt; get_integer_map { { \"temp\", &amp;get_temp } };\n\nauto iter = get_integer_map.find(\"temp\");\nint val = (*iter-&gt;second()();\n</code></pre>\n\n<p>However, I'd like my function pointer to be to a function of a specific object.  And, I know which object I need at map creation.  Something like this:</p>\n\n<pre><code>class TemperatureModel\n{\npublic:\n  int GetTemp();\n}\n\nTemperatureModel *tempModel = new TemperatureModel();\n\nmap&lt;string, GetIntFunction&gt; get_integer_map { { \"temp\", &amp;(tempModel-&gt;GetTemp} };\n</code></pre>\n\n<p>If you'd like to know why I'm doing this, I'm trying to read a list of parameters from an input file, get their values from the correct model, and then output their values to an output file.  I will also need to set values at runtime using a similar map.</p>\n"}, {"tags": ["c++", "oop"], "comments": [{"owner": {"reputation": 9427, "user_id": 7703024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e363e0e11695395e04f814233b6274?s=128&d=identicon&r=PG", "display_name": "super", "link": "https://stackoverflow.com/users/7703024/super"}, "edited": false, "score": 4, "creation_date": 1540415408, "post_id": 52977906, "comment_id": 92862430, "body": "<code>printf(&quot;r=%.3f; phi=%.3f\\n&quot;,distanta(),phi());</code> You need to call the functions, not try and access there return value."}, {"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 0, "creation_date": 1540415735, "post_id": 52977906, "comment_id": 92862543, "body": "Also see <a href=\"https://www.codesdope.com/cpp-scope-of-variables/\" rel=\"nofollow noreferrer\">&quot;the Scope of (Local) Variables&#39;</a> - the first example also shows how to use a return value from an invoked function."}], "answers": [{"comments": [{"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "reply_to_user": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540418876, "post_id": 52978078, "comment_id": 92863571, "body": "@user4581301, Helpful suggestions."}, {"owner": {"reputation": 6559, "user_id": 4143855, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Gh4vC.jpg?s=128&g=1", "display_name": "Tas", "link": "https://stackoverflow.com/users/4143855/tas"}, "edited": false, "score": 1, "creation_date": 1540420860, "post_id": 52978078, "comment_id": 92864163, "body": "Not overly related, simply FYI, but you should prefer <a href=\"https://stackoverflow.com/questions/13889467/should-i-include-xxxx-h-or-cxxxx-in-c-programs\">to include &lt;cxxxx&gt; rather than &lt;xxxx.h&gt;</a>"}, {"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1540421064, "post_id": 52978078, "comment_id": 92864240, "body": "I made a public section for the access functions and removed the virtual keyword because it seems superfluous without a derived class or a suggestion that one is needed."}, {"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1540421480, "post_id": 52978078, "comment_id": 92864361, "body": "Helpful suggestions, @user45813011.  I did not know about the cxxxx include files.  I will remember that one!"}], "tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": false, "score": 1, "last_activity_date": 1540421296, "last_edit_date": 1540421296, "creation_date": 1540416138, "answer_id": 52978078, "question_id": 52977906, "link": "https://stackoverflow.com/questions/52977906/cannot-use-method-returned-value-into-another-method/52978078#52978078", "title": "Cannot use method returned value into another method", "body": "<p>Using @super's suggestion and a little warning fixing. </p>\n\n<p>The two important changes are in the line as suggested by @super:</p>\n\n<p><code>printf(\"r=%.3f; phi=%.3f\\n\",distanta(),phi());</code></p>\n\n<p>The variables 'r' and 'unghi' are both variables local to member functions and cannot be accessed outside of those functions.  The \"distanta()\" and \"phi()\" member functions provide exactly what is needed in the printf and are the perfect way of getting the values needed.</p>\n\n<p>The other change is explicitly stating that mprint() is a void:</p>\n\n<p><code>void mprint(){</code></p>\n\n<p>All functions in C++ (even main!) must have a return type.  Also removed 'virtual' as there is no derived class (and I would have had to move the function to the public section of the class to keep it as virtual).</p>\n\n<p>I have added the includes and the main() function so that anyone reading this code may cut and paste it into their compiler to get a working version without any more effort.</p>\n\n<p>Further cleanup turns mx and my into private variables to prevent the user of the class from being able to modify these variables.</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>#include &lt;cmath&gt;\n#include &lt;cstdio&gt;\n#include &lt;iostream&gt;\n\n\nclass Puncte{\nprivate:\n    double mx;\n    double my;\npublic:\n    Puncte(double x, double y) {\n        mx = x;\n        my = y;\n    }\n    double mx() {return mx;}\n    double my() {return my;}\n\n    double distanta (){\n        double r = sqrt(mx*mx + my*my);\n        return r;\n    }\n    double phi (){\n        double unghi = atan(my/mx) * 180.0 / M_PI;\n        if(unghi &gt; 0 &amp;&amp; mx &lt; 0 &amp;&amp; my &lt; 0) unghi = unghi + 180;\n        if (unghi &lt; 0 &amp;&amp; mx&gt;0 &amp;&amp; my &lt; 0) unghi = unghi + 360;\n        if (unghi &lt; 0 &amp;&amp; mx&lt;0 &amp;&amp; my &gt; 0) unghi = unghi + 180;\n        return unghi;\n    }\nvoid mprint(){\n\n        printf(\"r=%.3f; phi=%.3f\\n\",distanta(),phi()) ; //unable to resolve identifier\n    }\n};\n\nint main() {\n    Puncte puncte(3.5, 8.9);\n\n    std::cout &lt;&lt; \"Point(\" &lt;&lt; puncte.mx() &lt;&lt; \", \" &lt;&lt; puncte.my() \n        &lt;&lt; \"): radius = \" &lt;&lt; puncte.distanta() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n\n\n<p>Output:</p>\n\n<pre><code>$&gt; main\nPoint(3.5, 8.9): radius = 9.56347\n\nProcess finished with exit code 0\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10468896, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oaGTL5CjaG4/AAAAAAAAAAI/AAAAAAAAAB8/FT7y3C7631U/photo.jpg?sz=128", "display_name": "Iuli Quee", "link": "https://stackoverflow.com/users/10468896/iuli-quee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": -7, "last_activity_date": 1540421296, "creation_date": 1540415165, "last_edit_date": 1540415406, "question_id": 52977906, "link": "https://stackoverflow.com/questions/52977906/cannot-use-method-returned-value-into-another-method", "title": "Cannot use method returned value into another method", "body": "<p>So i've been trying to use the returned values of certain methods from my class in another methods , but I bump into this problem \"Unable to resolve identifier\"</p>\n\n<pre><code>class Puncte{\npublic:\n    double mx;\n    double my;\n\n    Puncte(double x, double y) {\n        mx = x;\n       my = y;\n    }\n    double distanta (){\n        double r = sqrt(mx*mx + my*my);\n        return r;\n    }\n    double phi (){\n        double unghi = atan(my/mx) * 180.0 / PI;\n        if(unghi &gt; 0 &amp;&amp; mx &lt; 0 &amp;&amp; my &lt; 0) unghi = unghi + 180;\n        if (unghi &lt; 0 &amp;&amp; mx&gt;0 &amp;&amp; my &lt; 0) unghi = unghi + 360;\n        if (unghi &lt; 0 &amp;&amp; mx&lt;0 &amp;&amp; my &gt; 0) unghi = unghi + 180;\n        return unghi;\n    }\n    virtual  mprint(){\n\n        printf(\"r=%.3f; phi=%.3f\\n\",r,unghi) ; //unable to resolve identifier\n    }\n};\n</code></pre>\n\n<p>Can someone please help?\nThanks :)</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 3, "creation_date": 1540415025, "post_id": 52977810, "comment_id": 92862286, "body": "<code>operator=</code> should update <code>this</code> and return reference to self, not return a new string"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1540415115, "post_id": 52977810, "comment_id": 92862322, "body": "What do you think the <code>String(args...);</code> in the constructor does? What does <code>int(4);</code> do? Also, since a newly-constructed <code>std::string</code> is always empty, why use <code>this -&gt; value += ...</code> when you know <code>this -&gt; value</code> was just constructed and so is definitely empty?"}, {"owner": {"reputation": 12749, "user_id": 7976805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92a559df8b4b287aad23724b4c66d67c?s=128&d=identicon&r=PG&f=1", "display_name": "Yksisarvinen", "link": "https://stackoverflow.com/users/7976805/yksisarvinen"}, "edited": false, "score": 3, "creation_date": 1540415116, "post_id": 52977810, "comment_id": 92862325, "body": "I&#39;d recommend you to start with <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list\">a good C++ book</a>. <code>stringB</code> and <code>stringC</code> don&#39;t use assignment operator here. And as noted by M.M, your assignment operator is not really doing what one would expect it to do."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1540415050, "post_id": 52977859, "comment_id": 92862298, "body": "I would also suggest using forwarding reference and <code>std::forward</code> for the args"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1540415300, "post_id": 52977859, "comment_id": 92862391, "body": "@M.M <code>std::string::operator+=</code> isn&#39;t going to move the passed object, so I assume you suggest it simply as a better code style?"}, {"owner": {"reputation": 846, "user_id": 7364573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8STO.jpg?s=128&g=1", "display_name": "Lapys", "link": "https://stackoverflow.com/users/7364573/lapys"}, "edited": false, "score": 0, "creation_date": 1540415472, "post_id": 52977859, "comment_id": 92862451, "body": "@HolyBlackCat. As a complete noob at C++. I&#39;ll be honest and show that I got an error: <code>binary expression in operand of fold-expression</code> on the line <code>(value += params, ...);</code>. Please how do I prevent this from occuring?"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 846, "user_id": 7364573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8STO.jpg?s=128&g=1", "display_name": "Lapys", "link": "https://stackoverflow.com/users/7364573/lapys"}, "edited": false, "score": 0, "creation_date": 1540415536, "post_id": 52977859, "comment_id": 92862472, "body": "@Lapys Eh, sleepy me forgot to add in the second pair of <code>()</code>. Try this: <code>((value += params) , ...);</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1540415834, "post_id": 52977859, "comment_id": 92862579, "body": "You should be able to simplify the the constructor to <code>String(P&amp;&amp;... params) : value((stringify(params) += ...)) {}</code>.  Toy example here: <a href=\"http://coliru.stacked-crooked.com/a/86b69c2d487283cb\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/86b69c2d487283cb</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1540415834, "post_id": 52977859, "comment_id": 92862580, "body": "@HolyBlackCat well it would avoid the local copy <code>arg</code> being created (I&#39;m referring to the instances of <code>data arg</code> as a parameter)"}, {"owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 1, "creation_date": 1540416252, "post_id": 52977859, "comment_id": 92862745, "body": "@M.M The snippet with <code>data arg</code> is copy-pasted straight from OPs code, unchanged, to provide a better context. Passing by value is definitely not a good thing here, I agree; that&#39;s why I used a const reference in the suggested solution. (In this case it should be no different performance-wise from a forwarding reference.)"}], "tags": [], "owner": {"reputation": 44802, "user_id": 2752075, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5oQlf.png?s=128&g=1", "display_name": "HolyBlackCat", "link": "https://stackoverflow.com/users/2752075/holyblackcat"}, "is_accepted": true, "score": 5, "last_activity_date": 1540415505, "last_edit_date": 1540415505, "creation_date": 1540414924, "answer_id": 52977859, "question_id": 52977810, "link": "https://stackoverflow.com/questions/52977810/stdstring-not-updated-with-operator/52977859#52977859", "title": "std::string not updated with = operator", "body": "<p>In your constructor</p>\n\n<pre><code>template &lt;typename data, typename... argumentsData&gt;\nString(data arg, argumentsData... args) {\n    this -&gt; value += arg;\n    String(args...);\n}\n</code></pre>\n\n<p>This line: <code>String(args...);</code> <strong>creates and discards a temporary</strong> <code>String</code>, which doesn't affect the state of the original object.</p>\n\n<p>Instead of trying to solve this with recursion, I recommend using fold expressions:</p>\n\n<pre><code>template &lt;typename ...P&gt;\nString(const P &amp;... params) // Passing by const reference is purely an optimization.\n{\n    ((value += params) , ...);\n}\n</code></pre>\n"}], "owner": {"reputation": 846, "user_id": 7364573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8STO.jpg?s=128&g=1", "display_name": "Lapys", "link": "https://stackoverflow.com/users/7364573/lapys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 52977859, "answer_count": 1, "score": 2, "last_activity_date": 1540415924, "creation_date": 1540414666, "last_edit_date": 1540415924, "question_id": 52977810, "link": "https://stackoverflow.com/questions/52977810/stdstring-not-updated-with-operator", "title": "std::string not updated with = operator", "body": "<p>So here's a puzzle for some C++ developers here.</p>\n\n<p>I have a custom <code>String</code> class I'm working with that's supposed to teach me how to get comfortable with classes and a few other C++ features and this class has a <code>value</code> property it uses to keep track of its primitive value (which is a <code>std::string</code>).</p>\n\n<p>But here's a problem, I have define multiple methods for creating an object of this class. 2 of which I understand perfectly:</p>\n\n<pre><code>String stringA = \"Hello, World!\";\nString stringB = String(\"Hello, World!\");\n</code></pre>\n\n<p>But the last one is a bit tricky as it should be able to work with an infinite set of arguments (theoretically).</p>\n\n<pre><code>String stringC = String(\"Hello,\", ' ', \"World!\");\n</code></pre>\n\n<p>But when I access the primitive values of these strings, the last one seems to bug out and return (to the best of my debugging efforts) nothing, garbled text or just part of the arguments given.</p>\n\n<pre><code>stringA.valueOf(); // -&gt; Hello, World!\nstringB.valueOf(); // -&gt; Hello, World!\nstringC.valueOf(); // -&gt; Hello,\n</code></pre>\n\n<p>Now, this has been a challenge I've really struggled with especially as a JavaScript developer diving into C++. I know the two languages are fundamentally different, but I figure that logically there should be some features of the former that can somewhat be applied to the latter (such as variadic arguments).</p>\n\n<p>For anyone who can help with this and explain to me what I'm missing (or why my code sucks), you're an absolute champ. Great going for you.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\n/* Let's assume there's a `stringify` function that converts any value to `std::string` */\nclass String {\n    private:\n        std::string value;\n\n    public:\n        template &lt;typename data&gt;\n        String(data arg) { this -&gt; value += arg; }\n\n        template &lt;typename data, typename... argumentsData&gt;\n        String(data arg, argumentsData... args) {\n            this -&gt; value += arg;\n            String(args...);\n        }\n\n        template &lt;typename data&gt;\n        String operator =(data arg) { return String(this -&gt; value = arg); }\n\n        std::string valueOf() const { return this -&gt; value; }\n};\n\nint main() {\n    String stringA = \"Hello, World!\";\n    String stringB = String(\"Hello, World!\");\n    String stringC = String(\"Hello,\", ' ', \"World!\");\n\n    std::cout &lt;&lt; \"String A: \" &lt;&lt; stringA.valueOf() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"String B: \" &lt;&lt; stringB.valueOf() &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"String C: \" &lt;&lt; stringC.valueOf() &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "compile-time", "c++-experimental", "std-source-location"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1540413972, "post_id": 52977593, "comment_id": 92861815, "body": "This doesn&#39;t have to do with <code>std::experimental::source_location</code> at all. The <code>line</code> function is <code>constexpr</code>, but its arguments are not <code>constexpr</code>. Function arguments are never <code>constexpr</code>. In C++20, we may have arbitrary types as template arguments, so it&#39;s possible the <code>source_location</code> could be a template parameter"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1540414514, "post_id": 52977593, "comment_id": 92862055, "body": "On further investigation, this is actually an interesting problem. The only way to get the late construction of the <code>source_location</code> object is with a defaulted function argument. A defaulted template argument wouldn&#39;t work; it&#39;s created early, not late. This may be an oversight. <code>constexpr</code> function arguments would fix the problem, but that idea isn&#39;t seen too favorably at this time"}], "answers": [{"tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": false, "score": 7, "last_activity_date": 1540415195, "last_edit_date": 1540415195, "creation_date": 1540414840, "answer_id": 52977844, "question_id": 52977593, "link": "https://stackoverflow.com/questions/52977593/stdexperimentalsource-location-at-compile-time/52977844#52977844", "title": "std::experimental::source_location at compile time", "body": "<p>As Justin pointed the issue with your code is that function argument are not constexpr but the problem of using source_location in a constexpr function in a more useful way is mentioned in the <a href=\"https://wg21.link/p1073\" rel=\"nofollow noreferrer\">constexpr! functions</a> proposal which says:</p>\n\n<blockquote>\n  <p>The \"Library Fundamentals v. 2\" TS contains a \"magic\" source_location\n  class get to information similar to the <strong>FILE</strong> and <strong>LINE</strong> macros\n  and the <strong>func</strong> variable (see N4529 for the current draft, and N4129\n  for some design notes). Unfortunately, because the \"value\" of a\n  source_location is frozen at the point source_location::current() is\n  invoked, composing code making use of this magic class is tricky:\n  Typically, a function wanting to track its point of invocation has to\n  add a defaulted parameter as follows:</p>\n\n<pre><code>void my_log_function(char const *msg,\n                     source_location src_loc\n                        = source_location::current()) {\n  // ...\n}\n</code></pre>\n  \n  <p>This idiom ensure that the value of the source_location::current()\n  invocation is sampled where my_log_function is called instead of where\n  it is defined.</p>\n  \n  <p>Immediate (i.e., constexpr!) functions, however, create a clean\n  separation between the compilation process and the constexpr\n  evaluation process (see also P0992). Thus, we can make\n  source_location::current() an immediate function, and wrap it as\n  needed in other immediate functions: The value produced will\n  correspond to the source location of the \"root\" immediate function\n  call. For example:</p>\n\n<pre><code>constexpr! src_line() {\n  return source_location::current().line();\n}\n\nvoid some_code() {\n  std::cout &lt;&lt; src_line() &lt;&lt; '\\n';  // This line number is output.\n}\n</code></pre>\n</blockquote>\n\n<p>So this is currently an open problem.</p>\n"}], "owner": {"reputation": 2326, "user_id": 1171688, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/df67ea9c940063b5e21b6894b4f95927?s=128&d=identicon&r=PG", "display_name": "Toby Brull", "link": "https://stackoverflow.com/users/1171688/toby-brull"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1566203341, "creation_date": 1540413570, "last_edit_date": 1566203341, "question_id": 52977593, "link": "https://stackoverflow.com/questions/52977593/stdexperimentalsource-location-at-compile-time", "title": "std::experimental::source_location at compile time", "body": "<p><code>std::experimental::source_location</code> will probably be added to the C++ standard at some point. I'm wondering if it possible to get the location information into the compile-time realm. Essentially, I want a function that returns different types when called from different source locations. Something like this, although it doesn't compile because the <code>location</code> object isn't <code>constexpr</code> as it's a function argument:</p>\n\n<pre><code>#include &lt;experimental/source_location&gt;\n\nusing namespace std::experimental;\n\nconstexpr auto line (const source_location&amp; location = source_location::current())\n{\n  return std::integral_constant&lt;int, location.line()&gt;{};\n}\n\nint main()\n{\n  constexpr auto ll = line();\n  std::cout &lt;&lt; ll.value &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>This doesn't compile, with a message about</p>\n\n<pre><code>expansion of [...] is not a constant expression\n</code></pre>\n\n<p>regarding the <code>return std::integral_constant&lt;int, location.line()&gt;{}</code> line. What good it is to have the methods of <code>source_location</code> be <code>constexpr</code> if I can't use them?</p>\n"}, {"tags": ["c++", "xcode", "macos", "clang", "abi"], "comments": [{"owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "edited": false, "score": 3, "creation_date": 1540414341, "post_id": 52977581, "comment_id": 92861990, "body": "OK, found it: you need to pass the magic flag <code>-Wunguarded-availability</code> which is documented exactly nowhere."}], "answers": [{"tags": [], "owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "is_accepted": true, "score": 2, "last_activity_date": 1540482114, "creation_date": 1540482114, "answer_id": 52993300, "question_id": 52977581, "link": "https://stackoverflow.com/questions/52977581/why-isnt-mmacosx-version-min-10-10-preventing-use-of-a-function-tagged-as-star/52993300#52993300", "title": "Why isn&#39;t -mmacosx-version-min=10.10 preventing use of a function tagged as starting in 10.11?", "body": "<p>Now that I can answer my own question, I will: you need to add <code>-Wunguarded-availability</code> to your compile flags. Only then will you get a warning/error.</p>\n"}], "owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 732, "favorite_count": 2, "accepted_answer_id": 52993300, "answer_count": 1, "score": 7, "last_activity_date": 1540482114, "creation_date": 1540413526, "question_id": 52977581, "link": "https://stackoverflow.com/questions/52977581/why-isnt-mmacosx-version-min-10-10-preventing-use-of-a-function-tagged-as-star", "title": "Why isn&#39;t -mmacosx-version-min=10.10 preventing use of a function tagged as starting in 10.11?", "body": "<p>By my understanding of how the availability macros and the <code>-mmacosx-version-min</code> flag works, the following code should fail to compile when targeting OS X 10.10:</p>\n\n<pre><code>#include &lt;Availability.h&gt;\n#include &lt;CoreFoundation/CoreFoundation.h&gt;\n#include &lt;Security/Security.h&gt;\n\n#if !defined(__MAC_OS_X_VERSION_MIN_REQUIRED)\n#error\n#endif\n\n#if __MAC_OS_X_VERSION_MIN_REQUIRED &lt; 101000\n#error __MAC_OSX_VERSION_MIN_REQUIRED too low\n#endif\n\n#if __MAC_OS_X_VERSION_MIN_REQUIRED &gt; 101000\n#error __MAC_OSX_VERSION_MIN_REQUIRED too high\n#endif\n\nint main() {\n\n    size_t len = 0;\n\n    SSLContextRef x{};\n    auto status = SSLCopyRequestedPeerNameLength(x, &amp;len);\n    return status != 0;\n}\n</code></pre>\n\n<p>because the function <code>SSLCopyRequestedPeerNameLength</code> is tagged as becoming available in 10.11 in <code>SecureTransport.h</code>:</p>\n\n<pre><code>$ grep -C5 ^SSLCopyRequestedPeerNameLength /System/Library/Frameworks//Security.framework/Headers/SecureTransport.h\n\n/*\n * Server Only: obtain the hostname specified by the client in the ServerName extension (SNI)\n */\nOSStatus\nSSLCopyRequestedPeerNameLength  (SSLContextRef  ctx,\n                                 size_t         *peerNameLen)\n    __OSX_AVAILABLE_STARTING(__MAC_10_11, __IPHONE_9_0);\n</code></pre>\n\n<p>Yet when I compile on the command line with <code>-mmacosx-version-min=10.10</code> I get no warning at all, despite <code>-Wall -Werror -Wextra</code>:</p>\n\n<pre><code>$ clang++ -Wall -Werror -Wextra ./foo.cpp --std=c++11 -framework Security -mmacosx-version-min=10.10 --stdlib=libc++ ; echo $?\n0\n</code></pre>\n\n<p>Is there some additional definition I need to provide or specific warning to enable to ensure that I don't pick up a dependency on APIs newer than 10.10? I really had expected that <code>-mmacosx-version-min=10.10</code> would prevent usage of APIs tagged with higher version numbers.</p>\n\n<p>What have I misunderstood here?</p>\n\n<p>Using XCode 10.0 (10A255) on macOS 10.13.6 here.</p>\n"}, {"tags": ["c++", "cmake", "visual-studio-2017", "netcdf"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1540412833, "post_id": 52977344, "comment_id": 92861330, "body": "You&#39;ll probably need to specify a path when you configure cmake.. but that&#39;s just a guess."}, {"owner": {"reputation": 484, "user_id": 5066497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ee3feec2dfd128f643a70b306bd7a85?s=128&d=identicon&r=PG&f=1", "display_name": "9301293", "link": "https://stackoverflow.com/users/5066497/9301293"}, "edited": false, "score": 0, "creation_date": 1540414975, "post_id": 52977344, "comment_id": 92862269, "body": "@Ben Could you post <i>some</i> of your CMakeLists.txt? The part where you invoke <code>find_package</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 484, "user_id": 5066497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ee3feec2dfd128f643a70b306bd7a85?s=128&d=identicon&r=PG&f=1", "display_name": "9301293", "link": "https://stackoverflow.com/users/5066497/9301293"}, "is_accepted": false, "score": 1, "last_activity_date": 1540416519, "creation_date": 1540416519, "answer_id": 52978146, "question_id": 52977344, "link": "https://stackoverflow.com/questions/52977344/visual-studio-cmake-project-add-netcdf/52978146#52978146", "title": "Visual Studio - Cmake Project - Add NetCDF", "body": "<p>To get you started, take a look at the variable <a href=\"https://cmake.org/cmake/help/v3.13/module/FindPkgConfig.html#variable:PKG_CONFIG_EXECUTABLE\" rel=\"nofollow noreferrer\"><code>PKG_CONFIG_EXECUTABLE</code></a>. This variable will add that search path the sub-call of <code>find_program</code>, which CMake runs. You can set that varible in your CMakeLists.txt file, right before your call to <code>FindPkgConfig</code>. </p>\n\n<p>For some more complete error checking,  you should try to always look into the corresponding \"FOUND\" or \"NOTFOUND\" property of the CMake variable(s):</p>\n\n<pre><code>if(PKG_CONFIG_FOUND)\n    message(STATUS \"PKG_CONFIG_FOUND!\")\nelse()\n    message(WARNING \"PKG_CONFIG_FOUND was false!\")\nendif()\n</code></pre>\n"}], "owner": {"reputation": 332, "user_id": 1754525, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3b075a699498af1438f6a52ce4a1b8c2?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/1754525/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540416519, "creation_date": 1540412269, "question_id": 52977344, "link": "https://stackoverflow.com/questions/52977344/visual-studio-cmake-project-add-netcdf", "title": "Visual Studio - Cmake Project - Add NetCDF", "body": "<p>I have a project that I was able to compile in Linux, but was also hoping to compile in a windows environment, namely, visual studio. </p>\n\n<p>I installed netcdf, but when I build using cmake, I get this error:</p>\n\n<pre><code>Could NOT find PkgConfig (missing: PKG_CONFIG_EXECUTABLE) \n1&gt; -- Checking for one of the modules 'netcdf'\n1&gt; CMake Error at C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/Common7/IDE/CommonExtensions/Microsoft/CMake/CMake/share/cmake-3.11/Modules/FindPkgConfig.cmake:641 (message):\n1&gt;   None of the required 'netcdf' found\n</code></pre>\n\n<p>Any idea how to get Visual studio to find the netcdf package?</p>\n"}, {"tags": ["c++", "c++11"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 6, "creation_date": 1540412413, "post_id": 52977342, "comment_id": 92861150, "body": "Off by one error.  The size of the vector is <code>res(signal.size()-1)</code> but you loop till <code>i &lt; signal.size()</code>, not <code>i &lt; signal.size() - 1</code>"}, {"owner": {"reputation": 1286, "user_id": 1935611, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1abf5b5c23043f42b90b10252fc236f3?s=128&d=identicon&r=PG", "display_name": "anilbey", "link": "https://stackoverflow.com/users/1935611/anilbey"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540412482, "post_id": 52977342, "comment_id": 92861177, "body": "No, that part is correct. I start i from one. That was intentional."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 3, "creation_date": 1540412515, "post_id": 52977342, "comment_id": 92861190, "body": "then you need <code>res[i-1] = signal[i]-signal[i-1];</code> because say signal is size=2 then res has 1 element -- BUT it&#39;s at index 0, but you try to put it into index 1"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1540412536, "post_id": 52977342, "comment_id": 92861201, "body": "But you do <code>res[i]</code> in the loop and <code>res[i]</code> does not exist when <code>i == signal.size() - 1</code>"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 2, "creation_date": 1540412587, "post_id": 52977342, "comment_id": 92861227, "body": "One of the first things you can do when trying to debug code like this is add <code>assert</code>s before every array access to catch any attempt at an out of bounds access. That would have found this problem easily. Or you could even have just used <a href=\"https://en.cppreference.com/w/cpp/container/array/at\" rel=\"nofollow noreferrer\">at</a> which exists for this purpose."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 3, "creation_date": 1540412626, "post_id": 52977342, "comment_id": 92861239, "body": "@DavidSchwartz or turn on your STL&#39;s debug macros.. or just use <code>.at</code> instead of <code>[]</code>"}, {"owner": {"reputation": 1286, "user_id": 1935611, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1abf5b5c23043f42b90b10252fc236f3?s=128&d=identicon&r=PG", "display_name": "anilbey", "link": "https://stackoverflow.com/users/1935611/anilbey"}, "edited": false, "score": 0, "creation_date": 1540412642, "post_id": 52977342, "comment_id": 92861244, "body": "You are right, that is indeed an error!"}, {"owner": {"reputation": 1286, "user_id": 1935611, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1abf5b5c23043f42b90b10252fc236f3?s=128&d=identicon&r=PG", "display_name": "anilbey", "link": "https://stackoverflow.com/users/1935611/anilbey"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540413761, "post_id": 52977342, "comment_id": 92861724, "body": "Alright, the exception is gone. It was due to what @NathanOliver pointed out. Thanks Nathan!"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1540414632, "post_id": 52977342, "comment_id": 92862123, "body": "I believe this is the 3rd off by one array access bug today. Should these be answered or is there a good duplicate or should they be closed as a typo?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1540415708, "post_id": 52977342, "comment_id": 92862531, "body": "Off by one exists in murk-space. Be hard to make a generic answer to use as a landing pad without it being overly broad (and in my opinion useless) like the generic Unresolved External Q&amp;A. The big take-away is every time you THINK you are correctly using one-based indexing, you probably aren&#39;t."}], "owner": {"reputation": 1286, "user_id": 1935611, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1abf5b5c23043f42b90b10252fc236f3?s=128&d=identicon&r=PG", "display_name": "anilbey", "link": "https://stackoverflow.com/users/1935611/anilbey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 727, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1540412265, "creation_date": 1540412265, "question_id": 52977342, "link": "https://stackoverflow.com/questions/52977342/incorrect-checksum-for-freed-object-object-was-probably-modified-after-being-f", "title": "incorrect checksum for freed object - object was probably modified after being freed", "body": "<p>I was hoping the return values in c++11 are already moved or optimized out as explained in here: <a href=\"https://stackoverflow.com/questions/17473753/c11-return-value-optimization-or-move\">c++11 Return value optimization or move?</a>\n<br>\nHowever I am having this exception below.  <br/> <em>\"inference(4160,0x7fffb832e380) malloc: <strong></em> error for object 0x7fc415f00a10: incorrect checksum for freed object - object was probably modified after being freed.\n<em></strong> set a breakpoint in malloc_error_break to debug\"</em>. \n<br>\nThe code:</p>\n\n<pre><code>vector&lt;double&gt; sp_peaks = dsp.diff(zero_sp_cropped);\nsp_peaks = dsp.sign(sp_peaks);\nsp_peaks = dsp.diff(sp_peaks);\n</code></pre>\n\n<p>The third line is giving the error.\n<br> The sign and diff methods are below.</p>\n\n<pre><code>vector&lt;double&gt; SignalProcessing::diff(vector&lt;double&gt; &amp;signal) {\n    /*\n     * Performs the diff filter on the input signal and returns the value.\n     * The returned signal has length 1 less than the input signal.\n     * */\n\n    vector&lt;double&gt; res(signal.size()-1); // -1 because the first one cannot have a diff\n\n    for (int i = 1; i &lt; signal.size(); ++i) {\n        res[i] = signal[i]-signal[i-1];\n    }\n    return res;\n}\n\nvector&lt;double&gt; SignalProcessing::sign(vector&lt;double&gt; &amp;signal) {\n    /*\n     * Maps the input signal into a signal of {-1.0,1.0} values by their sign values.\n     * Positive values will be mapped to 1.0 while negative will be mapped to -1.0\n     * */\n    vector&lt;double&gt; res(signal.size());\n\n    for (int i = 0; i &lt; signal.size(); ++i) {\n        if (signal[i] &gt; 0)\n            res[i] = 1.0;\n        else\n            res[i] = -1.0;\n    }\n    return res;\n}\n</code></pre>\n\n<p>The error disappears if I place a breakpoint and debug. Could you explain why this is happening and what is a good practice of returning an std container? <br>\nThank you in advance! <br>\nAnil</p>\n"}, {"tags": ["python", "c++", "pyqt", "translate", "qmodelindex"], "comments": [{"owner": {"reputation": 962, "user_id": 596100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1df682ecad0aabeb97749fe8c5fea798?s=128&d=identicon&r=PG", "display_name": "AlphaTested", "link": "https://stackoverflow.com/users/596100/alphatested"}, "edited": false, "score": 0, "creation_date": 1540412009, "post_id": 52977242, "comment_id": 92860947, "body": "Can you articulate what this line is doing in english? That&#39;ll help us identify what your code is trying to do."}], "answers": [{"tags": [], "owner": {"reputation": 2086, "user_id": 10543528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a3a9d1ea239d645f62babcbb003c5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/10543528/michael"}, "is_accepted": false, "score": 0, "last_activity_date": 1540412267, "creation_date": 1540412267, "answer_id": 52977343, "question_id": 52977242, "link": "https://stackoverflow.com/questions/52977242/need-to-translate-one-line-of-code-in-from-c-qt-to-pyqt/52977343#52977343", "title": "Need To Translate One Line of Code in from C++ Qt to PyQt", "body": "<p><code>index = self.listView.currentIndex()</code></p>\n"}], "owner": {"reputation": 63, "user_id": 10377349, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-W_MhDLlGpis/AAAAAAAAAAI/AAAAAAAAABw/GAMxtIq2PI8/photo.jpg?sz=128", "display_name": "Osama Adel", "link": "https://stackoverflow.com/users/10377349/osama-adel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1540413740, "creation_date": 1540411849, "last_edit_date": 1540413740, "question_id": 52977242, "link": "https://stackoverflow.com/questions/52977242/need-to-translate-one-line-of-code-in-from-c-qt-to-pyqt", "title": "Need To Translate One Line of Code in from C++ Qt to PyQt", "body": "<p>What is the equivalent of this</p>\n\n<pre><code>QModelIndex index = ui-&gt;listView-&gt;currentIndex();\n</code></pre>\n\n<p>in Python, if my listView is self.listView</p>\n\n<p>It's all I need to know, I spent hours trying to search for an answer for a question and I only found it in C++.</p>\n\n<p>EDIT:</p>\n\n<p>Basically, in PyQt, to access the index of QListView you need to use QModelIndex, so I'm confused as to how to apply the QModelIndex on the QListView.</p>\n"}, {"tags": ["c++", "templates", "matrix", "operator-overloading", "matrix-multiplication"], "answers": [{"comments": [{"owner": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1540411393, "post_id": 52977090, "comment_id": 92860652, "body": "If I may offer a couple improvements; OP wanted to return a <code>matrix</code>, not <code>T</code>, and matrix multiplication takes an NxM matrix and a MxP matrix to produce a NxP matrix"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "reply_to_user": {"reputation": 5676, "user_id": 5023438, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Uvlov.jpg?s=128&g=1", "display_name": "alter igel", "link": "https://stackoverflow.com/users/5023438/alter-igel"}, "edited": false, "score": 1, "creation_date": 1540411511, "post_id": 52977090, "comment_id": 92860700, "body": "You&#39;re totally right - and while it doesn&#39;t materially change the answer (regarding syntax), I&#39;ll fix it right up :)"}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1540411568, "post_id": 52977090, "comment_id": 92860724, "body": "That doesn&#39;t make much sense for matrix multiplication unless N and M are the same."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1540411615, "post_id": 52977090, "comment_id": 92860757, "body": "Well, regardless -- the core question is what is the syntax for the template... what business logic makes sense here is really just a red herring."}], "tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": false, "score": 3, "last_activity_date": 1540411470, "last_edit_date": 1540411470, "creation_date": 1540411225, "answer_id": 52977090, "question_id": 52977032, "link": "https://stackoverflow.com/questions/52977032/how-to-use-template-arguments-for-a-template-class-outside-of-it/52977090#52977090", "title": "How to use template arguments for a template class outside of it?", "body": "<pre><code>template&lt;typename T, int N, int M&gt;\nclass matrix {\n    T vals[N][M] = {};\n\npublic:\n    matrix() {\n        //sth\n    }\n};\n\ntemplate &lt;typename T, int N, int M&gt;\nmatrix&lt;T, N, M&gt; operator*(matrix&lt;T, N, M&gt; l, matrix&lt;T, N, M&gt; r) {\n    return matrix&lt;T, N, M&gt;{};\n}\n</code></pre>\n\n<p>live: <a href=\"https://godbolt.org/z/5dJOXK\" rel=\"nofollow noreferrer\">https://godbolt.org/z/5dJOXK</a></p>\n\n<p>You can also write it as a friend and not have to re-type out all the template stuff:</p>\n\n<pre><code>template&lt;typename T, int N, int M&gt;\nclass matrix {\n    T vals[N][M] = {};\n\npublic:\n    matrix() {\n        //sth\n    }\n\n    friend matrix&lt;T, N, M&gt; operator*(matrix&lt;T, N, M&gt; l, matrix&lt;T, N, M&gt; r) {\n        return matrix&lt;T, N, M&gt;};\n    }\n};\n</code></pre>\n\n<p>or just as a member:</p>\n\n<pre><code>template&lt;typename T, int N, int M&gt;\nclass matrix {\n    T vals[N][M] = {};\n\npublic:\n    matrix() {\n        //sth\n    }\n\n    matrix&lt;T, N, M&gt; operator*(matrix&lt;T, N, M&gt; r) {\n        return matrix&lt;T, N, M&gt;{};\n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": true, "score": 4, "last_activity_date": 1540411637, "creation_date": 1540411637, "answer_id": 52977189, "question_id": 52977032, "link": "https://stackoverflow.com/questions/52977032/how-to-use-template-arguments-for-a-template-class-outside-of-it/52977189#52977189", "title": "How to use template arguments for a template class outside of it?", "body": "<p>Well... if you want the classic matrix multiplication... so if given a D1xD2 matrix multiplied for a D2xD3 matrix you want a D1xD3 matrix...</p>\n\n<pre><code>template &lt;typename T, std::size_t D1, std::size_t D2, std::size_t D3&gt;\nmatrix&lt;T, D1, D3&gt; operator* (matrix&lt;T, D1, D2&gt; const &amp; m1,\n                             matrix&lt;T, D2, D3&gt; const &amp; m2)\n {\n   // ....\n }\n</code></pre>\n\n<p>Off Topic: I suggest (as you can see in my example) the use of an unsigned value (maybe <code>std::size_t</code>) for dimensions.</p>\n"}], "owner": {"reputation": 1234, "user_id": 6836871, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/YyMCy.jpg?s=128&g=1", "display_name": "ndsvw", "link": "https://stackoverflow.com/users/6836871/ndsvw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 52977189, "answer_count": 2, "score": 0, "last_activity_date": 1540411764, "creation_date": 1540411079, "last_edit_date": 1540411764, "question_id": 52977032, "link": "https://stackoverflow.com/questions/52977032/how-to-use-template-arguments-for-a-template-class-outside-of-it", "title": "How to use template arguments for a template class outside of it?", "body": "<p><em>This is a beginner question:</em></p>\n\n<p>How to use template arguments for a function that works with a template class outside of it?</p>\n\n<p>This is my matrix class that uses a template. </p>\n\n<pre><code>template&lt;typename T, int N, int M&gt;\nclass matrix {\n    T vals[N][M] = {};\n\npublic:\n    matrix() {\n        //sth\n    }\n};\n</code></pre>\n\n<p>Now I want to write an operation (muliplication) for it <strong>outside of</strong> the class.\nHow does that work with the template parameters?</p>\n\n<pre><code>matrix&lt;?????????&gt; operator*(matrix&lt;&lt;?????????&gt;&amp; m1, matrix&lt;?????????&gt;&amp; m2) {\n    //multiply code\n}\n</code></pre>\n\n<p>What do I need to write where the question marks are written?\nThe same? <code>typename T, int N, int M</code>?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 1, "creation_date": 1540410894, "post_id": 52976954, "comment_id": 92860443, "body": "<code>int arrayA[n];</code> is not valid C++ - array dimensions must be compile-time constants."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540411127, "post_id": 52976954, "comment_id": 92860538, "body": "Hint: Make a simple input that exposes the misbehaviour. Then work through your code and build a table of expectations. What do you expect to happen at each line of code? If building the table doesn&#39;t shake the bug loose, step through the program line by line with a debugger and watch for where the program does something you didn&#39;t expect. Odds are good that&#39;s a bug and if it isn&#39;t it&#39;s an error in your expectations. Both need to be fixed before proceeding."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540411282, "post_id": 52976954, "comment_id": 92860607, "body": "Note: If you are going to eliminate duplication, odds are high that <code>arrayB</code> will have fewer valid contents than <code>arrayA</code>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1540411369, "post_id": 52976954, "comment_id": 92860641, "body": "Does the order matter?  If not, subvert the problem and store the data in a set and then output it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10540693"}, "edited": false, "score": 0, "creation_date": 1540417493, "post_id": 52976954, "comment_id": 92863175, "body": "<a href=\"https://stackoverflow.com/questions/20598235/convert-array-to-set-in-c\" title=\"convert array to set in c\">stackoverflow.com/questions/20598235/convert-array-to-set-in&zwnj;&#8203;-c</a> <a href=\"https://stackoverflow.com/questions/1041620/whats-the-most-efficient-way-to-erase-duplicates-and-sort-a-vector\" title=\"whats the most efficient way to erase duplicates and sort a vector\">stackoverflow.com/questions/1041620/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1540420216, "post_id": 52977849, "comment_id": 92863957, "body": "There is no language C/C++."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1540420237, "post_id": 52977849, "comment_id": 92863961, "body": "The C language doesn&#39;t have <code>new</code> or <code>delete</code>."}, {"owner": {"reputation": 484, "user_id": 5066497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ee3feec2dfd128f643a70b306bd7a85?s=128&d=identicon&r=PG&f=1", "display_name": "9301293", "link": "https://stackoverflow.com/users/5066497/9301293"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1540420403, "post_id": 52977849, "comment_id": 92864006, "body": "@ThomasMatthews That is why I labeled it as <code>C&#47;C++</code>. I&#39;ll change that to <code>C++</code>."}], "tags": [], "owner": {"reputation": 484, "user_id": 5066497, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ee3feec2dfd128f643a70b306bd7a85?s=128&d=identicon&r=PG&f=1", "display_name": "9301293", "link": "https://stackoverflow.com/users/5066497/9301293"}, "is_accepted": false, "score": 1, "last_activity_date": 1540420506, "last_edit_date": 1540420506, "creation_date": 1540414858, "answer_id": 52977849, "question_id": 52976954, "link": "https://stackoverflow.com/questions/52976954/can-you-help-me-with-a-deleting-duplicated-values-in-an-array-c-challenge/52977849#52977849", "title": "Can you help me with a deleting duplicated values in an array c++ challenge?", "body": "<p><strong>Using <code>std::vector</code></strong>:</p>\n\n<p>If you wanted to be lazy about it, try checkout out this <a href=\"https://en.cppreference.com/w/cpp/algorithm/unique\" rel=\"nofollow noreferrer\">example</a>. You could do something like the following (not tested): </p>\n\n<pre><code>std::vector&lt;int&gt; func(int a[], int size_a){\n    std::vector&lt;int&gt; vec_a(a, a + size_a); \n    std::sort(vec_a.begin(), vec_a.end()); \n    std::vector&lt;int&gt; ordered_vec_a = std::unique(vec_a.begin(), vec_a.end()); \n    vec_a.erase(ordered_vec_a, vec_a.end()); \n    return ordered_vec_a;\n}\n</code></pre>\n\n<hr>\n\n<p><strong>\"Hardcore\" C++</strong>:</p>\n\n<p>If you want to attack your problem, and continue your solution, using a much more \"raw\" approach, you are going to need to make sure that your returned array is <em>exactly</em> the number of unique elements in array <code>a</code>. </p>\n\n<p>So, first, get the number of unique elements of <code>a</code> take a look at this <a href=\"https://stackoverflow.com/questions/14740867/find-unique-numbers-in-array\">answer</a>. After that, you can create you output array, <code>b</code>: </p>\n\n<pre><code>int b = new int[size_calc_from_post]\n//do stuff here.\ndelete[] b; // make sure to delete! \nb = NULL; \n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 10554125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cece709a0d2fa4bdad516cb211772c6?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/10554125/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540420506, "creation_date": 1540410760, "last_edit_date": 1540410849, "question_id": 52976954, "link": "https://stackoverflow.com/questions/52976954/can-you-help-me-with-a-deleting-duplicated-values-in-an-array-c-challenge", "title": "Can you help me with a deleting duplicated values in an array c++ challenge?", "body": "<p>The challenge consist in writing a program that deletes the duplicated values of an array. </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid func(int arrayA[], int n, int arrayB[]) {\n    int h = 0;\n    int count = 0;\n    arrayB[0] = arrayA[0];\n    for (int i = 1; i &lt; n; i++) {\n        count = 0;\n        for (int j = 0; j &lt; n; j++) {\n            if (arrayB[i] == arrayA[j]) {\n                count++;\n            }\n        }\n        if (count == 0) {\n            h++;\n            arrayB[h] = arrayA[i];\n        }\n    }\n}\nint main() {\n    int n;\n    cin &gt;&gt; n;\n    int arrayA[n];\n    int arrayB[n];\n    for (int i = 0; i &lt; n; i++) {\n        cin &gt;&gt; arrayA[i];\n    }\n    func(arrayA, n, arrayB);\n    for (int i = 0; i &lt; n; i++) {\n        cout &lt;&lt; arrayB[i] &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>My logic was creating a new array and filling it with the non repeated values, for that i created a loop that adds 1 to a counter when it finds a repeated value and if the counter is equal to 0 the value is added. then the counter restarts. </p>\n\n<p>Thank you for your help to a new programmer i really tried to solve it in my own. </p>\n"}, {"tags": ["c++", "templates", "variadic-templates", "sfinae", "template-specialization"], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 2356782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2923e5ce4cd111e980dfc76ee24152?s=128&d=identicon&r=PG", "display_name": "James Thrush", "link": "https://stackoverflow.com/users/2356782/james-thrush"}, "edited": false, "score": 1, "creation_date": 1540452019, "post_id": 52976843, "comment_id": 92872748, "body": "Thank you!  That is exactly what I wanted.  Changing that default type was the one thing I hadn&#39;t tried.  Thank you also for pointing out std::void_t and the use of std::true_type/false_type.  I think I now understand why the types need to match:  when the template is instantiated by <code>has_custom_type&lt;Custom_t&gt;</code>, the compiler first <i>only</i> looks at the base template and says &quot;ok, the template parameters are set to &lt;Custom_t,void&gt;&quot;, and only after that does it look for specializations that match and are more specific."}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "reply_to_user": {"reputation": 46, "user_id": 2356782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2923e5ce4cd111e980dfc76ee24152?s=128&d=identicon&r=PG", "display_name": "James Thrush", "link": "https://stackoverflow.com/users/2356782/james-thrush"}, "edited": false, "score": 1, "creation_date": 1540455911, "post_id": 52976843, "comment_id": 92874887, "body": "@JamesThrush, exactly."}], "tags": [], "owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "is_accepted": true, "score": 2, "last_activity_date": 1540411363, "last_edit_date": 1540411363, "creation_date": 1540410369, "answer_id": 52976843, "question_id": 52976727, "link": "https://stackoverflow.com/questions/52976727/trying-to-specialize-a-template-function-based-on-the-presence-of-a-typedef-with/52976843#52976843", "title": "Trying to specialize a template function based on the presence of a typedef within class", "body": "<p>The problem is that you specify default <code>void</code> type for <code>Enabler</code>, but <code>T::my_custom_type</code> is not <code>void</code>. Either use <code>bool</code> as default type, or use <code>std::void_t</code> that always returns <code>void</code>:</p>\n\n<pre><code>template &lt;class T, typename = void&gt;\nstruct has_custom_type : std::false_type { };\n\ntemplate &lt;class T&gt;\nstruct has_custom_type&lt;T, std::void_t&lt;typename T::my_custom_type&gt;&gt; : std::true_type { };\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/18701381/1625187\">This answer</a> explains why types should match.</p>\n"}, {"tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": false, "score": 1, "last_activity_date": 1540410565, "creation_date": 1540410565, "answer_id": 52976903, "question_id": 52976727, "link": "https://stackoverflow.com/questions/52976727/trying-to-specialize-a-template-function-based-on-the-presence-of-a-typedef-with/52976903#52976903", "title": "Trying to specialize a template function based on the presence of a typedef within class", "body": "<pre><code>template &lt;class T, typename Enabler = void&gt; // &lt;== void set as default template parameter type\nstruct has_custom_type\n{\n    bool operator()() { return false; }\n};\n\ntemplate &lt;class T&gt;\nstruct has_custom_type&lt;T, typename T::my_custom_type&gt;\n{\n    bool operator()() { return true; }\n};\n</code></pre>\n\n<p>The specialization matches when it gets the template parameters <code>&lt;T, bool&gt;</code>.   However, when you just specify <code>&lt;T&gt;</code>, without a second type, then it goes to the default type you specified <code>=void</code> to come up with the call <code>&lt;T, void&gt;</code>, which doesn't match your <code>bool</code> specialization.</p>\n\n<p>Live example showing it matches with explicit <code>&lt;T, bool&gt;</code>: <a href=\"https://godbolt.org/z/MEJvwT\" rel=\"nofollow noreferrer\">https://godbolt.org/z/MEJvwT</a></p>\n"}, {"tags": [], "owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "is_accepted": false, "score": 2, "last_activity_date": 1540411055, "last_edit_date": 1540411055, "creation_date": 1540410711, "answer_id": 52976938, "question_id": 52976727, "link": "https://stackoverflow.com/questions/52976727/trying-to-specialize-a-template-function-based-on-the-presence-of-a-typedef-with/52976938#52976938", "title": "Trying to specialize a template function based on the presence of a typedef within class", "body": "<p>As explained by others, if you set a <code>void</code> default value for the second template parameter, your solution works only if <code>my_custom_type</code> is <code>void</code>.</p>\n\n<p>If <code>my_custom_type</code> is <code>bool</code>, you can set <code>bool</code> the default value. But isn't a great solution because loose generality.</p>\n\n<p>To be more general, you can use SFINAE through something that fail if <code>my_custom_type</code> doesn't exist but return ever the same type (<code>void</code>, usually) if <code>my_custom_type</code> is present.</p>\n\n<p>Pre C++17 you can use <code>decltype()</code>, <code>std::declval</code> and the power of comma operator</p>\n\n<pre><code>template &lt;class T, typename Enabler = void&gt;\nstruct has_custom_type\n { bool operator()() { return false; } };\n\ntemplate &lt;class T&gt;\nstruct has_custom_type&lt;T,\n   decltype( std::declval&lt;typename T::my_custom_type&gt;(), void() )&gt;\n { bool operator()() { return true; } };\n</code></pre>\n\n<p>Starting from C++17 it's simpler because you can use <code>std::void_t</code> (see Evg's answer, also for the use of <code>std::true_type</code> and <code>std::false_type</code> instead of defining an <code>operator()</code>).</p>\n"}], "owner": {"reputation": 46, "user_id": 2356782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2923e5ce4cd111e980dfc76ee24152?s=128&d=identicon&r=PG", "display_name": "James Thrush", "link": "https://stackoverflow.com/users/2356782/james-thrush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52976843, "answer_count": 3, "score": 0, "last_activity_date": 1541877800, "creation_date": 1540409871, "last_edit_date": 1541877800, "question_id": 52976727, "link": "https://stackoverflow.com/questions/52976727/trying-to-specialize-a-template-function-based-on-the-presence-of-a-typedef-with", "title": "Trying to specialize a template function based on the presence of a typedef within class", "body": "<p>I want to be able to customize handling of a struct based on the presence of a type within the struct (without writing any additional code per custom struct), like:</p>\n\n<pre><code>struct Normal_t\n{\n};\n\nstruct Custom_t\n{\n    using my_custom_type = bool;\n};\n</code></pre>\n\n<p>It seems like I should be able to do something like this, but it doesn't work:</p>\n\n<pre><code>template &lt;class T, typename Enabler = void&gt;\nstruct has_custom_type\n{\n    bool operator()() { return false; }\n};\n\ntemplate &lt;class T&gt;\nstruct has_custom_type&lt;T, typename T::my_custom_type&gt;\n{\n    bool operator()() { return true; }\n};\n\nbool b_normal = has_custom_type&lt;Normal_t&gt;()();  // returns false\nbool b_custom = has_custom_type&lt;Custom_t&gt;()();  // returns false, INCORRECT? should return true?\n</code></pre>\n\n<p>What I don't understand is that the standard library uses something similar but seemingly more convoluted for its type traits.  For example, this works:</p>\n\n<pre><code>template&lt;bool test, class T = void&gt;\nstruct my_enable_if\n{\n};\n\ntemplate&lt;class T&gt;\nstruct my_enable_if&lt;true, T&gt;\n{\n    using type = T;\n};\n\ntemplate &lt;class T, class Enabler = void&gt;\nstruct foo\n{\n    bool operator()() { return false; }\n};\n\ntemplate &lt;class T&gt;\nstruct foo&lt;T, typename my_enable_if&lt;std::is_integral&lt;T&gt;::value&gt;::type&gt;\n{\n    bool operator()() { return true; }\n};\n\nbool foo_float = foo&lt;float&gt;()();    // returns false\nbool foo_int = foo&lt;int&gt;()();        // returns true\n</code></pre>\n\n<p>In both cases, the specialization is happening based on the presence of a type within a struct, in one case <code>typename T::my_custom_type</code> and in the other <code>typename my_enable_if&lt;std::is_integral&lt;T&gt;::value&gt;::type</code>.  Why does the second version work but not the first?</p>\n\n<p>I came up with this workaround using the ... parameter pack syntax, but I'd really like to understand if there is a way to do this using normal template specialization without using the parameter pack syntax, and if not, why.</p>\n\n<pre><code>template&lt;typename ...Args&gt;                              \nbool has_custom_type_2(Args&amp;&amp; ...args)      { return false; }   \n\ntemplate&lt;class T, std::size_t = sizeof(T::my_custom_type)&gt;  \nbool has_custom_type_2(T&amp;)                  { return true; }\n\ntemplate&lt;class T, std::size_t = sizeof(T::my_custom_type)&gt;  \nbool has_custom_type_2(T&amp;&amp;)                 { return true; }    /* Need this T&amp;&amp; version to handle has_custom_type_2(SomeClass()) where the parameter is an rvalue */\n\nbool b2_normal = has_custom_type_2(Normal_t()); // returns false\nbool b2_custom = has_custom_type_2(Custom_t()); // returns true - CORRECT!\n</code></pre>\n"}, {"tags": ["c++", "sdl"], "comments": [{"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1540409651, "post_id": 52976590, "comment_id": 92859872, "body": "The example for getwindowsurface says &quot;instead of creating a renderer draw to surface directly&quot; - so maybe you can&#39;t do both (I don&#39;t know for sure) <a href=\"https://wiki.libsdl.org/SDL_GetWindowSurface\" rel=\"nofollow noreferrer\">wiki.libsdl.org/SDL_GetWindowSurface</a>"}, {"owner": {"reputation": 23, "user_id": 10039107, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214107825662595/picture?type=large", "display_name": "Matias Zanin", "link": "https://stackoverflow.com/users/10039107/matias-zanin"}, "reply_to_user": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1540410052, "post_id": 52976590, "comment_id": 92860060, "body": "Do you know what is better of those?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 0, "creation_date": 1540410122, "post_id": 52976590, "comment_id": 92860097, "body": "I do not, sorry.   I&#39;m guessing iti would depend on exactly what you&#39;re trying to do (maybe the renderer is higher level?  not sure).   I really don&#39;t have any info other than what I saw in a quick glance at their wiki I linked."}], "answers": [{"tags": [], "owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "is_accepted": true, "score": 2, "last_activity_date": 1540415260, "creation_date": 1540415260, "answer_id": 52977924, "question_id": 52976590, "link": "https://stackoverflow.com/questions/52976590/sdl-getwindowsurface-with-sdl-createrenderer/52977924#52977924", "title": "SDL_GetWindowSurface with SDL_CreateRenderer", "body": "<blockquote>\n  <p>I think that this two functions don\u00b4t work if both are active.</p>\n  \n  <p>Can this be the problem?</p>\n</blockquote>\n\n<p>Yup, exactly as <a href=\"https://hg.libsdl.org/SDL/file/7846ac86d46e/include/SDL_video.h#l833\" rel=\"nofollow noreferrer\">the <code>SDL_GetWindowSurface()</code> declaration comment</a> indicates:</p>\n\n<pre><code>/**\n *  \\brief Get the SDL surface associated with the window.\n *\n *  \\return The window's framebuffer surface, or NULL on error.\n *\n *  A new surface will be created with the optimal format for the window,\n *  if necessary. This surface will be freed when the window is destroyed.\n *\n *  \\note You may not combine this with 3D or the rendering API on this window.\n *\n *  \\sa SDL_UpdateWindowSurface()\n *  \\sa SDL_UpdateWindowSurfaceRects()\n */\nextern DECLSPEC SDL_Surface * SDLCALL SDL_GetWindowSurface(SDL_Window * window);\n</code></pre>\n\n<p>Quoting for emphasis:</p>\n\n<blockquote>\n  <p>You may <strong>not</strong> combine this with 3D or the rendering API on this window.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 29641, "user_id": 10871073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ddBW9.png?s=128&g=1", "display_name": "Adrian Mole", "link": "https://stackoverflow.com/users/10871073/adrian-mole"}, "edited": false, "score": 1, "creation_date": 1593419680, "post_id": 62633982, "comment_id": 110764034, "body": "While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/62633982/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply."}], "tags": [], "owner": {"reputation": 1, "user_id": 13833125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1739ab7d2cf52621f02065c1f8c0d0?s=128&d=identicon&r=PG", "display_name": "OZBE", "link": "https://stackoverflow.com/users/13833125/ozbe"}, "is_accepted": false, "score": 0, "last_activity_date": 1593419018, "creation_date": 1593419018, "answer_id": 62633982, "question_id": 52976590, "link": "https://stackoverflow.com/questions/52976590/sdl-getwindowsurface-with-sdl-createrenderer/62633982#62633982", "title": "SDL_GetWindowSurface with SDL_CreateRenderer", "body": "<pre><code>surface = SDL_GetWindowSurface(window);\nrenderer = SDL_CreateSoftwareRenderer(surface);\nif (!renderer) {\n    SDL_LogError(SDL_LOG_CATEGORY_APPLICATION, &quot;Render creation for surface fail : %s\\n&quot;,SDL_GetError());\n    return 1;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10039107, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214107825662595/picture?type=large", "display_name": "Matias Zanin", "link": "https://stackoverflow.com/users/10039107/matias-zanin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 52977924, "answer_count": 2, "score": -1, "last_activity_date": 1593419018, "creation_date": 1540409326, "last_edit_date": 1540415091, "question_id": 52976590, "link": "https://stackoverflow.com/questions/52976590/sdl-getwindowsurface-with-sdl-createrenderer", "title": "SDL_GetWindowSurface with SDL_CreateRenderer", "body": "<p>Im programming a game with SDL2 in C++.</p>\n\n<p>I want to use SDL_GetWindowSurface and SDL_CreateRenderer in this game, if I use only one of them, its works, but if I try to use both of them, the game crashes.</p>\n\n<p>I think that this two functions don\u00b4t work if both are active.</p>\n\n<p>Can this be the problem?</p>\n"}, {"tags": ["c++", "vector", "constructor", "parameter-passing"], "comments": [{"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1540408927, "post_id": 52976480, "comment_id": 92859507, "body": "Can you show us the code you are asking about?  Describing code in English can be very ambiguous."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1540409174, "post_id": 52976480, "comment_id": 92859642, "body": "You may be looking for the <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">Member Initializer List</a>."}], "answers": [{"tags": [], "owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "is_accepted": false, "score": 2, "last_activity_date": 1540410201, "last_edit_date": 1540410201, "creation_date": 1540409097, "answer_id": 52976546, "question_id": 52976480, "link": "https://stackoverflow.com/questions/52976480/i-have-used-a-vector-to-create-a-list-of-class-objects-how-can-i-call-the-const/52976546#52976546", "title": "I have used a vector to create a list of class objects. How can I call the constructor with parameters when I initialize the vector?", "body": "<p>There's no great way to do what you want.</p>\n\n<p>Since <code>Random</code> is cheap to copy, you can do this:</p>\n\n<pre><code>vector&lt;Random&gt; v{Random(1), Random(2), Random(3)};\n</code></pre>\n\n<p>but if it wasn't cheap to copy (or not copyable at all), then you would do this instead:</p>\n\n<pre><code>vector&lt;Random&gt; v;\nv.reserve(3);\nv.emplace_back(1);\nv.emplace_back(2);\nv.emplace_back(3);\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4074812, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XJjVuUrEtlM/AAAAAAAAAAI/AAAAAAAAAEQ/P8tuV72TbWE/photo.jpg?sz=128", "display_name": "Nikhil Limaye", "link": "https://stackoverflow.com/users/4074812/nikhil-limaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "closed_date": 1540409730, "answer_count": 1, "score": -1, "last_activity_date": 1540410201, "creation_date": 1540408818, "last_edit_date": 1540409463, "question_id": 52976480, "link": "https://stackoverflow.com/questions/52976480/i-have-used-a-vector-to-create-a-list-of-class-objects-how-can-i-call-the-const", "closed_reason": "Needs details or clarity", "title": "I have used a vector to create a list of class objects. How can I call the constructor with parameters when I initialize the vector?", "body": "<p>I have a class Random. The constructor has a parameter \"int range\" if I say</p>\n\n<pre><code>class Random\n{\nprivate: \nint r; \n\npublic:\n Random(int range)\n  {\n     r = range\n  }\n}\n</code></pre>\n\n<p>I want to create a vector of objects of class Random. How do i pass the range parameter in that case</p>\n\n<pre><code>vector&lt;Random&gt; v;\n</code></pre>\n\n<p>Where does the parameter go?  Bit confused.</p>\n"}, {"tags": ["c++", "arduino", "esp32"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1540408534, "post_id": 52976395, "comment_id": 92859339, "body": "Welcome to Stack Overflow. Please read <a href=\"http://stackoverflow.com/help\">the help pages</a>, take <a href=\"http://stackoverflow.com/tour\">the SO tour</a>, read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>, as well as <a href=\"https://codeblog.jonskeet.uk/2012/11/24/stack-overflow-question-checklist/\" rel=\"nofollow noreferrer\">this question checklist</a>. Lastly learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 2, "creation_date": 1540408947, "post_id": 52976395, "comment_id": 92859520, "body": "There just isn&#39;t enough code there to tell you why you&#39;re having this problem - you&#39;ll need to work down your code to the smallest amount of code that reproduces the problem then post <i>all</i> the code remaining for someone to help you.  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1540409647, "post_id": 52976395, "comment_id": 92859867, "body": "The true beauty of the MCVE  is you rarely have to carry it though to its conclusion. Typically you get part way and the reduced bug-to-code-noise ratio makes the bug and its solution obvious. If you get all the way to the MCVE, you have a really neat error or a misunderstanding of what the compiler&#39;s going to do to your code. Either way, if you ask a question without having used a divide and conquer approach like MCVE to isolate the bug, yo&#39;re asking a question too soon."}, {"owner": {"reputation": 25, "user_id": 10553945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f025055682e3ef446bc67c8fab59e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Adriano Alecrim", "link": "https://stackoverflow.com/users/10553945/adriano-alecrim"}, "edited": false, "score": 0, "creation_date": 1540417842, "post_id": 52976395, "comment_id": 92863290, "body": "Agreed. Next time I&#39;ll do that,  thanks."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 10553945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f025055682e3ef446bc67c8fab59e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Adriano Alecrim", "link": "https://stackoverflow.com/users/10553945/adriano-alecrim"}, "edited": false, "score": 0, "creation_date": 1540417708, "post_id": 52977187, "comment_id": 92863244, "body": "Checked the code for uninitialized variables and fixed it. It was an unrelated variable but it seems to be the source of the problem. Thanks for the help!"}], "tags": [], "owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "is_accepted": true, "score": 0, "last_activity_date": 1540411626, "creation_date": 1540411626, "answer_id": 52977187, "question_id": 52976395, "link": "https://stackoverflow.com/questions/52976395/variable-misteriously-being-set-to-204/52977187#52977187", "title": "Variable misteriously being set to 204", "body": "<p>The value in your variable was almost certainly put there by your compiler in an attempt to help you realize that it's uninitialized. 0xCC (204 in decimal) is commonly used for automatic / local / \"stack\" variables. I don't know how your code, that seems to show the variable being initialized, relates to the output that you claim was produced. I suggest you revise your question and ensure that you are posting a minimum, complete, and verifiable example of your problem.</p>\n"}], "owner": {"reputation": 25, "user_id": 10553945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f025055682e3ef446bc67c8fab59e7b?s=128&d=identicon&r=PG&f=1", "display_name": "Adriano Alecrim", "link": "https://stackoverflow.com/users/10553945/adriano-alecrim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 52977187, "answer_count": 1, "score": -3, "last_activity_date": 1540411626, "creation_date": 1540408426, "question_id": 52976395, "link": "https://stackoverflow.com/questions/52976395/variable-misteriously-being-set-to-204", "title": "Variable misteriously being set to 204", "body": "<p>first time using SO. So, I'm casually coding and I start this global variable, rC and set it to 0. rC is a counter but when it's time for it to do it's own thing it goes wonkers. Here's a bit of the code and the output(I'm programming an Doit ESP32)</p>\n\n<pre><code>DEBUGPRINTLN3(\"Sampled xC\");\nDEBUGPRINTLN3(xC);\nrC = 0;\nSerial.println(\"rC before increment\");\nSerial.println(rC);\nif(rC == 204) \n{\n  Serial.println(\"WTF\");\n  rC = 0;\n}\nrC += 1;\ndx = -dx;\nxC = -xC;\n</code></pre>\n\n<p>The if statement was added while I looked for the source of the problem( this bug makes my whole program go crazy as that counter signals a bunch of other things, including it's own reset)</p>\n\n<p>This is the Serial output:</p>\n\n<pre><code>14:48:23.017 -&gt; Sampled xC\n14:48:23.017 -&gt; 299\n14:48:23.017 -&gt; rC before increment\n14:48:23.017 -&gt; 204\n14:48:23.017 -&gt; WTF\n14:48:23.017 -&gt; xC:\n14:48:23.017 -&gt; -299\n14:48:23.017 -&gt; HAS REVERSED\n14:48:23.017 -&gt; rC INCREMENTED 1\n14:48:23.017 -&gt; 1\n</code></pre>\n\n<p>The \"fix\" i used is super shitty and it won't work if i change some other variables, but it does the job for this case. \nAny idea what could be causing it?</p>\n\n<p>In case anyone is wondering: there are only 3 other instances where rC is changed and it's another rC +=1 and a rC = 0(init and a reset later on). There is no while or for anywhere near rC+=1; Other than those, rC is only read, not edited.</p>\n"}, {"tags": ["c++", "file", "stream", "persistence", "overloading"], "comments": [{"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1540408316, "post_id": 52976328, "comment_id": 92859222, "body": "It isn&#39;t that <code>ofstream</code> is being implicitly converted, it&#39;s that <code>ostream</code> is the <i>base class</i> of <code>ofstream</code>."}, {"owner": {"reputation": 325, "user_id": 10553893, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k7KZmJzXd6U/AAAAAAAAAAI/AAAAAAAADOs/MpGlMu7fKo0/photo.jpg?sz=128", "display_name": "Raphael Tarita", "link": "https://stackoverflow.com/users/10553893/raphael-tarita"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1540408476, "post_id": 52976328, "comment_id": 92859309, "body": "That&#39;s true, but I am a little bit confused that a method of the return type ofstream can return ostream. I would understand it the other way round..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2201041"}, "edited": false, "score": 0, "creation_date": 1540409276, "post_id": 52976328, "comment_id": 92859692, "body": "Can you show the problematic code?"}, {"owner": {"reputation": 325, "user_id": 10553893, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k7KZmJzXd6U/AAAAAAAAAAI/AAAAAAAADOs/MpGlMu7fKo0/photo.jpg?sz=128", "display_name": "Raphael Tarita", "link": "https://stackoverflow.com/users/10553893/raphael-tarita"}, "edited": false, "score": 0, "creation_date": 1540410537, "post_id": 52976328, "comment_id": 92860282, "body": "@JETM yes of course. There is now an &quot;EDIT 2&quot; providing this information"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1540432937, "creation_date": 1540432937, "answer_id": 52980276, "question_id": 52976328, "link": "https://stackoverflow.com/questions/52976328/c-unwanted-conversions-between-ostream-and-ofstream/52980276#52980276", "title": "C++: Unwanted Conversions between ostream and ofstream", "body": "<p>You have overloaded only the specific <code>operator&lt;&lt;</code> needed for streaming <code>Dictionary</code>, <code>Section</code>, <code>Wordlist</code>, etc objects to a <code>std::ofstream</code>, but <code>std::ofstream</code> <em>inherits</em> MANY other <code>operator&lt;&lt;</code>s from <code>std::ostream</code>, and those operators all take <code>ostream&amp;</code> as input and return <code>ostream&amp;</code> as output. So, for example, <code>of &lt;&lt; \"sec\"</code> will return <code>ostream&amp;</code> even though <code>of</code> is a <code>std::ofstream</code>, and then that <code>ostream&amp;</code> is used for subsequent <code>&lt;&lt;</code> calls until <code>;</code> is reached.  Those are the \"implicit conversions\" you are experiencing.</p>\n\n<p>The real question is, WHY do you want <code>operator&lt;&lt;</code> to output different data depending on the type of <code>std::ostream</code> being written to?  That goes against C++'s streaming model.  If you really want that, you would have to change <code>print_ofstream(ofstream&amp;)</code> to <code>print_ostream(ostream&amp;)</code> and then dynamically detect the actual <code>std::ostream</code> derived type using <code>dynamic_cast</code>.  Same with <code>Wordlist</code>, and any other classes that need it.</p>\n\n<p>A simpler and safer option would be to just store a flag inside of your classes to control how their data should be output, regardless of the type of <code>std::ostream</code> being used.  Then you can set that flag as needed.  Maybe even define some helper I/O manipulators to set those flags while making <code>&lt;&lt;</code> calls.</p>\n"}], "owner": {"reputation": 325, "user_id": 10553893, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-k7KZmJzXd6U/AAAAAAAAAAI/AAAAAAAADOs/MpGlMu7fKo0/photo.jpg?sz=128", "display_name": "Raphael Tarita", "link": "https://stackoverflow.com/users/10553893/raphael-tarita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1540432937, "creation_date": 1540408199, "last_edit_date": 1540411580, "question_id": 52976328, "link": "https://stackoverflow.com/questions/52976328/c-unwanted-conversions-between-ostream-and-ofstream", "title": "C++: Unwanted Conversions between ostream and ofstream", "body": "<p>I've been working on a personal dictionary application which can help you remembering words you learnt. It is operated via the CLI (just don't question this, it's kinda just a test and I got a weird passion for CLI apps). So, of course I am using <code>ostream</code>s for writing information on the CLI. I am used to write <code>operator&lt;&lt;</code> overloads (for <code>ostream</code>s) for every class so that I can build up a multi-level output system (basically every object can \"speak\" for itself).</p>\n\n<p>In order to persist a dictionary object, I wanted to use <code>ofstream</code> and write a file with it. Naturally, I wrote <code>operator&lt;&lt;</code> overloads also for <code>ofstream</code> and in the same \"layered\" structure.</p>\n\n<p>As a result, I have now two <code>operator&lt;&lt;</code> overloads in every class, like in \"<code>Dictionary</code>\":</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp;, const Dictionary&amp;);\nofstream&amp; operator&lt;&lt;(ofstream&amp;, const Dictionary&amp;);\n</code></pre>\n\n<p>(this is just the declaration in the header file)</p>\n\n<p>Notice that it is <strong>very important that these both overloads do <em>different</em> things.</strong> I don't want to have some weird persistence-oriented special-format text on the CLI and also not user-friendly plain text in my file.</p>\n\n<p>The problem is that, because of the inheritance structure of <code>ostream</code> and <code>ofstream</code>, <strong><code>ofstream</code> is sometimes implicitely converted to <code>ostream</code></strong>. And when this happens in the middle of my stack full of <em>file</em> output operations, the program suddenly jumps into the wrong overload and prints plain text in the file.</p>\n\n<p>My question is simply: Is there a way to avoid or revert these unwanted implicit conversions in order to let my program jump into the right overloads? Or is there any other good way to fix this problem?</p>\n\n<p><strong>EDIT 1</strong>:</p>\n\n<p>Someone pointed out in the comments that this is not an implicit converison. <code>ofstream</code> is sometimes \"seen\" as its base class <code>ostream</code>. The problem is that at some point the object \"forgets\" that it is an <code>ofstream</code> and loses all file-related information. From there on it is only an <code>ostream</code> and that's what I meant with the \"conversion\".</p>\n\n<p><strong>EDIT 2:</strong></p>\n\n<p>The exact point in the program where the \"unwanted conversion\" happens can be found here:</p>\n\n<pre><code>ofstream&amp; operator&lt;&lt;(ofstream&amp; of, const Section&amp; s) {\n    return s.print_ofstream(of);\n}\n</code></pre>\n\n<p>So this operator overoad calls \"<code>print_ofstream</code>\":</p>\n\n<pre><code>ofstream&amp; Section::print_ofstream(ofstream&amp; of) const {\n    of &lt;&lt; \"sec\" &lt;&lt; Util::ID_TO_STRING(section_id) &lt;&lt; \":\\n\";\n    for (pair&lt;Wordlist, Wordlist&gt; pwl : translations) {\n        of &lt;&lt; '{' &lt;&lt; pwl.first &lt;&lt; '=' &lt;&lt; pwl.second &lt;&lt; \"}\\n\";\n    }\n    of &lt;&lt; \"#\\n\";\n    return of;\n}\n</code></pre>\n\n<p>Note that \"pwl\" is a pair of two <code>Wordlist</code>s, therefore pwl.first / pwl.second is a <code>Wordlist</code>. So, normally the line <code>of &lt;&lt; '{' &lt;&lt; pwl.first &lt;&lt; '=' &lt;&lt; pwl.second &lt;&lt; \"}\\n\";</code> should call the <code>ofstream</code> <code>operator&lt;&lt;</code> overload in <code>Wordlist</code>. But it doesn't. Instead, the other overload method is called:</p>\n\n<pre><code>ostream&amp; operator&lt;&lt;(ostream&amp; o, const Wordlist&amp; wl) {\n    return wl.print_ostream(o);\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540408531, "post_id": 52976257, "comment_id": 92859337, "body": "1) Can you find out yourself, by printing diagnostic methods in the relevant functions? 2) Are such answers implementation specific?"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1540408575, "post_id": 52976257, "comment_id": 92859347, "body": "1) You completely missed move construction. 2) How <code>std::vector</code> is resized depends on whether move constructor is not throwing."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1540417584, "post_id": 52976257, "comment_id": 92863204, "body": "A constructor is used for constructing. The assignment operator is used for modifying an object that&#39;s already been constructed"}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 1, "last_activity_date": 1540409248, "creation_date": 1540409248, "answer_id": 52976572, "question_id": 52976257, "link": "https://stackoverflow.com/questions/52976257/is-assignment-operator-or-copy-constructor-invoked-for-array-vector-insertions/52976572#52976572", "title": "Is Assignment Operator or Copy Constructor invoked for array/vector insertions?", "body": "<p>When you have </p>\n\n<pre><code>type variable_name = some_value\n</code></pre>\n\n<p>then you are declaring a variable and will always be calling its constructor (if it has one).  This is called copy initialization and this will never be assignment</p>\n\n<p>So, in</p>\n\n<pre><code>MyClass arr[10];      // 1\narr[2] = a;           // 2\narr[5] = MyClass(1);  // 3\n</code></pre>\n\n<p>Line 1 creates an array of 10 <code>MyClass</code> and default constructs each of them.  Lines 2 and 3 are assignment.</p>\n\n<p>In</p>\n\n<pre><code>MyClass arr2[] = {MyClass(), MyClass(9)};\n</code></pre>\n\n<p>You initialize an array of 2 objects using the values in the *braced-init-list` as the initializers for the array members.  There are many rules governing <a href=\"https://en.cppreference.com/w/cpp/language/list_initialization\" rel=\"nofollow noreferrer\">list initialization</a> but the one thing they have in common is no assignment will happen, only constructor calls.</p>\n\n<p>With</p>\n\n<pre><code>std::vector&lt;MyClass&gt; v;\nv.push_back(MyClass(2));\n</code></pre>\n\n<p>Assuming the vector doesn't reallocate, you have a constructor call for <code>MyClass(2)</code> and then the element in the vector is copy constructed from that temporary object.  If the vector has to grow then all of the current elements are copy/move constructed to a new buffer then the temporary is copied constructed at the end.</p>\n"}, {"tags": [], "owner": {"reputation": 66560, "user_id": 9072753, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EPmGy.jpg?s=128&g=1", "display_name": "KamilCuk", "link": "https://stackoverflow.com/users/9072753/kamilcuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1540409944, "last_edit_date": 1540409944, "creation_date": 1540409281, "answer_id": 52976583, "question_id": 52976257, "link": "https://stackoverflow.com/questions/52976257/is-assignment-operator-or-copy-constructor-invoked-for-array-vector-insertions/52976583#52976583", "title": "Is Assignment Operator or Copy Constructor invoked for array/vector insertions?", "body": "<pre><code>MyClass arr[10];\n</code></pre>\n\n<p>Constructor for MyClass is called 10 times, as 10 objects of arr are created.</p>\n\n<pre><code>arr[2] = a;\n</code></pre>\n\n<p>Assignment operator is invoked, assigns <code>arr[2]</code> to <code>a</code>.</p>\n\n<pre><code>arr[5] = MyClass(1);\n</code></pre>\n\n<p>First single param constructor with parameter <code>1</code> is called and creates an object of MyClass. Then assignment operator is invoked.</p>\n\n<pre><code>MyClass arr2[] = {MyClass(), MyClass(9)};\n</code></pre>\n\n<p>Two constructors and only are called here. First the <code>Myclass()</code> and then \"single param constructor\" <code>MyClass(9)</code>. The array declaration with initialization is not an assignment, cause no existing arrays members exists to assign to.</p>\n\n<pre><code>std::vector&lt;MyClass&gt; v;\n</code></pre>\n\n<p>Constructor for <code>std::vector&lt;MyClass&gt;</code> is called.</p>\n\n<pre><code>v.push_back(MyClass(2));\n</code></pre>\n\n<p><code>std::vector::push_back</code> creates a copy of the class and stores it. So first <code>MyClass(2)</code> constructor is called, then copy constructor <code>MyClass(const MyClass &amp;)</code> is called to copy the value. Then the copied object is stored.</p>\n\n<blockquote>\n  <p>Assuming vector v's internal representation is out of space and must realloc, are old elements copied using assignment operator, or copy constructor?</p>\n</blockquote>\n\n<p>Copy operator is invoked for each member. So:</p>\n\n<pre><code>std::vector&lt;MyClass&gt; a;\n</code></pre>\n\n<p>Calls constructor for <code>std::vector&lt;MyClass&gt;</code></p>\n\n<pre><code>a.push_back(MyClass(1));\n</code></pre>\n\n<p>Calls constructor for <code>MyClass(1)</code> and copies it using copy cosntructor <code>MyClass(MyClass&amp;)</code>.<br>\nAfter that if we add another element to the array:</p>\n\n<pre><code>a.push_back(MyClass(2));\n</code></pre>\n\n<p>Then <code>MyClass(2)</code> constructor is called, then copy constructor is called for <code>MyClass(MyClass&amp;)</code> for the just constructed <code>MyClass(2)</code> object. Then the vector copy-constructs all existing members from the ned, so for the pre-existing object in the vector <code>MyClass(1)</code> already upped copy constructor is called.</p>\n\n<p>Really, play with it a little. And insert cout everywhere to see it:</p>\n\n<pre><code>struct MyClass {\n    MyClass(int a = 0) : _a(a) {\n        _count = count++;\n        std::cout &lt;&lt; __func__ &lt;&lt; \" \" \n            &lt;&lt; _count &lt;&lt; \" \"\n            &lt;&lt; this &lt;&lt; \" \"\n            &lt;&lt; this-&gt;_a &lt;&lt; \"\\n\";\n    }\n    MyClass(const MyClass &amp;old_obj) {\n        this-&gt;_a = old_obj._a;\n        std::cout &lt;&lt; __func__ &lt;&lt; \"Copy \" \n            &lt;&lt; _count &lt;&lt; \" \"\n            &lt;&lt; this &lt;&lt; \" \"\n            &lt;&lt; this-&gt;_a &lt;&lt; \" \"\n            &lt;&lt; &amp;old_obj &lt;&lt; \" \"\n            &lt;&lt; old_obj._a &lt;&lt; \"\\n\";\n    }\n    void operator=(const MyClass &amp;old_obj) {\n        this-&gt;_a = old_obj._a;\n        std::cout &lt;&lt; \"MyClass\" &lt;&lt; __func__ &lt;&lt; \" \" \n            &lt;&lt; _count &lt;&lt; \" \"\n            &lt;&lt; this &lt;&lt; \" \"\n            &lt;&lt; this-&gt;_a &lt;&lt; \" \"\n            &lt;&lt; &amp;old_obj &lt;&lt; \" \"\n            &lt;&lt; old_obj._a &lt;&lt; \"\\n\";\n    }\n    static int count;\n    int _count;\n    int _a;\n};\n\nint MyClass::count = 0;\n</code></pre>\n"}], "owner": {"reputation": 707, "user_id": 6557223, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/TxoeR.jpg?s=128&g=1", "display_name": "Mink", "link": "https://stackoverflow.com/users/6557223/mink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 52976572, "answer_count": 2, "score": 2, "last_activity_date": 1540409944, "creation_date": 1540407893, "question_id": 52976257, "link": "https://stackoverflow.com/questions/52976257/is-assignment-operator-or-copy-constructor-invoked-for-array-vector-insertions", "title": "Is Assignment Operator or Copy Constructor invoked for array/vector insertions?", "body": "<p>Language: C++</p>\n\n<p>My question is about whether the copy constructor or the assignment operator is called in the following situations. To precede, I understand the following:</p>\n\n<pre><code>MyClass a(3);      // single param constructor\nMyClass b(a);      // copy constructor invoked\nMyClass c = b;     // copy constructor invoked\nMyClass d;         // default constructor\nd = c;             // assignment operator invoked\n</code></pre>\n\n<p>However, I was hoping someone could give a similar breakdown for these:</p>\n\n<p>1) For lines 2-3, is assignment operator or copy constructor called?</p>\n\n<pre><code>MyClass arr[10];\narr[2] = a;\narr[5] = MyClass(1);\n</code></pre>\n\n<p>2) Constructor, then copy constructor? Or constructor, then assignment operator?</p>\n\n<pre><code>MyClass arr2[] = {MyClass(), MyClass(9)};\n</code></pre>\n\n<p>3) Assuming vector <code>v</code>'s internal representation has space for one more object, is new element copied using assignment operator or copy constructor?</p>\n\n<pre><code>std::vector&lt;MyClass&gt; v;\nv.push_back(MyClass(2));\n...\n...\n</code></pre>\n\n<p>4) Assuming vector <code>v</code>'s internal representation is out of space and must realloc, are old elements copied using assignment operator, or copy constructor?</p>\n\n<pre><code>v.push_back(MyClass(2)); // Assuming vector is out of space; must realloc\n</code></pre>\n"}, {"tags": ["c++", "qt", "qpushbutton"], "comments": [{"owner": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1540410175, "post_id": 52976232, "comment_id": 92860119, "body": "Have you checked that the resource is being loaded correctly -- <a href=\"http://doc.qt.io/qt-5/qpixmap.html#isNull\" rel=\"nofollow noreferrer\">pix.isNull()</a> for the first example, <a href=\"http://doc.qt.io/qt-5/qicon.html#isNull\" rel=\"nofollow noreferrer\">icon.isNull()</a> for the second.  Note, also, that in the first example you give you are using the alpha mask from the scaled pixmap to set the shape of the <a href=\"http://doc.qt.io/qt-5/qwidget.html#setMask\" rel=\"nofollow noreferrer\"><code>QPushButton</code></a> -- not setting the pixmap itself."}, {"owner": {"reputation": 127, "user_id": 1121980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ba1b6b407e25a1eeffdd4d834314292?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1121980/james"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1540414701, "post_id": 52976232, "comment_id": 92862148, "body": "I checked it, it is a null pixmap..."}, {"owner": {"reputation": 127, "user_id": 1121980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ba1b6b407e25a1eeffdd4d834314292?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1121980/james"}, "reply_to_user": {"reputation": 9720, "user_id": 6371123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f90991c1b06c79ae4c6e79fb616d608?s=128&d=identicon&r=PG", "display_name": "G.M.", "link": "https://stackoverflow.com/users/6371123/g-m"}, "edited": false, "score": 0, "creation_date": 1540415116, "post_id": 52976232, "comment_id": 92862327, "body": "When I try against the icon instead of the pixmap it doesn&#39;t show as null, however. But I&#39;m still getting the same result."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 1121980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ba1b6b407e25a1eeffdd4d834314292?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1121980/james"}, "edited": false, "score": 0, "creation_date": 1540415035, "post_id": 52976481, "comment_id": 92862291, "body": "I checked this directory. I see dlls for svg in there. I went ahead and tried to do it with a jpeg as well and got the same result."}], "tags": [], "owner": {"reputation": 879, "user_id": 10384826, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-b5eCIz3fk9U/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOTRIfnFbGzOcKLPms4zg6nAaZvgA/mo/photo.jpg?sz=128", "display_name": "Serhiy Kulish", "link": "https://stackoverflow.com/users/10384826/serhiy-kulish"}, "is_accepted": false, "score": 0, "last_activity_date": 1540408819, "creation_date": 1540408819, "answer_id": 52976481, "question_id": 52976232, "link": "https://stackoverflow.com/questions/52976232/qt-image-wont-show-up-in-button/52976481#52976481", "title": "Qt Image won&#39;t show up in button", "body": "<p>You use .svg image format. Are you sure your application load image format plugin for .svg? Image plugins must be in directory \"imageformats\" in current directory of your application. Avaliable plugins you can find in Qt directory <code>.../Desktop/Qt/&lt;version&gt;/&lt;mingw or msvc&gt;/plugins/imageformats</code></p>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 1121980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ba1b6b407e25a1eeffdd4d834314292?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1121980/james"}, "edited": false, "score": 0, "creation_date": 1540477444, "post_id": 52986126, "comment_id": 92888525, "body": "Btw, your solution led me to realize that I was creating my variables incorrectly. I had previously done <code>QIcon icon(&quot;:&#47;svg&#47;resources&#47;menu.svg&quot;);</code> instead of <code>QIcon icon = QIcon(&quot;:&#47;svg&#47;resources&#47;menu.svg&quot;);</code>. Upon changing it to the latter piece of code everything worked without me having to specify the size."}], "tags": [], "owner": {"reputation": 114, "user_id": 4861450, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91bc3b882d7bd23c0a8a4d47a2c3916b?s=128&d=identicon&r=PG&f=1", "display_name": "Hoehli", "link": "https://stackoverflow.com/users/4861450/hoehli"}, "is_accepted": true, "score": 0, "last_activity_date": 1540461547, "last_edit_date": 1540461547, "creation_date": 1540460420, "answer_id": 52986126, "question_id": 52976232, "link": "https://stackoverflow.com/questions/52976232/qt-image-wont-show-up-in-button/52986126#52986126", "title": "Qt Image won&#39;t show up in button", "body": "<p>In my project using .svg images as button icons are no problem, maybe the button size is missing, try:</p>\n\n<pre><code>ui-&gt;menuButton-&gt;setIcon(QIcon(\":/svg/resources/menu.svg\"));\nui-&gt;menuButton-&gt;setToolTip(\"optional tooltip\");\nui-&gt;menuButton-&gt;setFixedSize(QSize(28,28));\n</code></pre>\n\n<p>Assuming you stored your icons correctly in a resource file. If not, create a new:\nright click on your top project folder (in the project-tree) -> Add new.. -> choose Qt on the left an Qt Resource File on the right window -> a new Window apears.</p>\n\n<p>Add Prefix -> Add Files (your icon)</p>\n"}], "owner": {"reputation": 127, "user_id": 1121980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ba1b6b407e25a1eeffdd4d834314292?s=128&d=identicon&r=PG", "display_name": "James", "link": "https://stackoverflow.com/users/1121980/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 406, "favorite_count": 0, "accepted_answer_id": 52986126, "answer_count": 2, "score": 0, "last_activity_date": 1540461547, "creation_date": 1540407777, "question_id": 52976232, "link": "https://stackoverflow.com/questions/52976232/qt-image-wont-show-up-in-button", "title": "Qt Image won&#39;t show up in button", "body": "<p>I am creating a Qt application and I have an image that I want to use for a button instead of text. Unfortunately all that shows up is an empty button.</p>\n\n<p>I've tried two different methods to get it to show up with the same results for both methods.</p>\n\n<p>Code for Method 1:</p>\n\n<pre><code>ui-&gt;setupUi(this);\n\nQPixmap pix(\":/svg/resources/menu.svg\");\nint w = ui-&gt;menuButton-&gt;width();\nint h = ui-&gt;menuButton-&gt;height();\nui-&gt;menuButton-&gt;setMask(pix.scaled(w,h,Qt::KeepAspectRatio).mask());\n</code></pre>\n\n<p>I found the info for the second method here: <a href=\"https://stackoverflow.com/questions/18328131/adding-image-to-qpushbutton-on-qt?s=1|46.1815\">Adding image to QPushButton on Qt</a></p>\n\n<p>Code for Method 2:</p>\n\n<pre><code>ui-&gt;setupUi(this);\n\nQIcon icon(\":/svg/resources/menu.svg\");\nui-&gt;menuButton-&gt;setIcon(icon);\n</code></pre>\n\n<p>Could someone please help me figure out why my image isn't showing up and the button is just empty?</p>\n"}, {"tags": ["c++", "function", "class"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1540407636, "post_id": 52976161, "comment_id": 92858918, "body": "I suggest you <a href=\"https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list/388282#388282\">get a few generic C++ books</a> to read first, and learn the language. If you then read about finance and math separately, you could afterward pool your knowledge."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 3, "creation_date": 1540407700, "post_id": 52976161, "comment_id": 92858944, "body": "If the parameters are different, you have two different functions."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1540408508, "post_id": 52976161, "comment_id": 92859321, "body": "Note the number of parameters or their types have to be different. Names aren&#39;t good enough <code>void X(int a, int b)</code> and <code>void X(int c, int d)</code> look the same to the compiler."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 2, "creation_date": 1540411578, "post_id": 52976161, "comment_id": 92860731, "body": "The key term here is \u201cfunction overloading\u201d. Those are two different functions, even though they have the same name."}, {"owner": {"reputation": 111, "user_id": 6436744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vtmmp.jpg?s=128&g=1", "display_name": "Arpan Ganguli", "link": "https://stackoverflow.com/users/6436744/arpan-ganguli"}, "reply_to_user": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1541593664, "post_id": 52976161, "comment_id": 93267843, "body": "@Someprogrammerdude Thank you for telling me this. I followed your recommendation and picked up C++ Primer from the link you mentioned. I am glad I followed your advice. I am just 2 chapters into the book and I feel I have learnt more than the 8 chapters I studied in the other book."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1541593882, "post_id": 52976161, "comment_id": 93267952, "body": "Good books can make a big difference from bad books. I&#39;m glad it helped. Good luck! :)"}], "answers": [{"comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 5, "creation_date": 1540407654, "post_id": 52976191, "comment_id": 92858928, "body": "C doesn&#39;t have function overloads, and there&#39;s no such language as &quot;C/C++&quot;."}], "tags": [], "owner": {"reputation": 1806, "user_id": 4146351, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2WTdU1bWVaQ/AAAAAAAAAAI/AAAAAAAABeg/yvJBsxf1slM/photo.jpg?sz=128", "display_name": "Eric Yang", "link": "https://stackoverflow.com/users/4146351/eric-yang"}, "is_accepted": false, "score": 0, "last_activity_date": 1540407856, "last_edit_date": 1540407856, "creation_date": 1540407599, "answer_id": 52976191, "question_id": 52976161, "link": "https://stackoverflow.com/questions/52976161/initialising-the-same-function-as-both-public-and-private-within-a-class-in-c/52976191#52976191", "title": "Initialising the same function as both public and private within a class in C++: How does that work?", "body": "<p>An overloaded function in C++ while it might have the same name are actually not the same function. So while I think it's an odd construct, the compiler shouldn't complain. </p>\n"}, {"tags": [], "owner": {"reputation": 357, "user_id": 10267168, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81e524fb256c0c307d01550734e71d6f?s=128&d=identicon&r=PG&f=1", "display_name": "ChilliDoughnuts", "link": "https://stackoverflow.com/users/10267168/chillidoughnuts"}, "is_accepted": false, "score": 0, "last_activity_date": 1540410432, "creation_date": 1540410432, "answer_id": 52976858, "question_id": 52976161, "link": "https://stackoverflow.com/questions/52976161/initialising-the-same-function-as-both-public-and-private-within-a-class-in-c/52976858#52976858", "title": "Initialising the same function as both public and private within a class in C++: How does that work?", "body": "<p>These two functions have different <strong>function signatures</strong>.</p>\n\n<pre><code>std::vector&lt;double&gt; generateRiskNeutralPricePath(double toDate, int nSteps);\nstd::vector&lt;double&gt; generateRiskNeutralPricePath(double toDate, int nSteps, double drift);\n</code></pre>\n\n<p>C++ will treat these as if they were two different functions. They could both be public or both be private, and the compiler will still accept it. You could treat it like</p>\n\n<pre><code>std::vector&lt;double&gt; generateRiskNeutralPricePath(double toDate, int nSteps);\nstd::vector&lt;double&gt; generateRiskNeutralPricePathWithDrift(double toDate, int nSteps, double drift);\n</code></pre>\n\n<p>Is it good practice? If done correctly, yes. Overloaded functions will generally have almost-identical functionalities. In this case, the additional <code>drift</code> probably just adjusts the return value slightly, while the overall functionality is the same.</p>\n\n<p>A common example is the square root function.</p>\n\n<pre><code>     double sqrt (double x);\n      float sqrt (float x);\nlong double sqrt (long double x);\n     double sqrt (T x);           // additional overloads for integral types\n</code></pre>\n\n<p>There are specific overloading rules for what is and isn't allowed, exactly to prevent compilers from being confused. In this case, these functions have different number of arguments, so their function signatures are different.</p>\n\n<p>(For those moving from C, note that this is one of the crucial differences between C and C++, as C doesn't have function overloads.)</p>\n\n<p>Bonus: For an example of when the compiler does get confused<br>\n<a href=\"https://stackoverflow.com/questions/2942426/how-do-i-specify-a-pointer-to-an-overloaded-function\">How do I specify a pointer to an overloaded function?</a></p>\n"}], "owner": {"reputation": 111, "user_id": 6436744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vtmmp.jpg?s=128&g=1", "display_name": "Arpan Ganguli", "link": "https://stackoverflow.com/users/6436744/arpan-ganguli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1540410432, "creation_date": 1540407436, "question_id": 52976161, "link": "https://stackoverflow.com/questions/52976161/initialising-the-same-function-as-both-public-and-private-within-a-class-in-c", "title": "Initialising the same function as both public and private within a class in C++: How does that work?", "body": "<p>I new to C++ and am learning it for financial applications. In the book that I am reading (C++ for Financial Mathematics), there is a section in which the same function is initialised as public and private within the same class: </p>\n\n<pre><code>class BlackScholesModel {\n    public: ...other members of BlackScholesModel...\n    std::vector&lt;double&gt; generateRiskNeutralPricePath( \n    double toDate,\n    int nSteps)const;\n    }; \n</code></pre>\n\n<p>and now it introduces the function generateRiskNeutralPricePath as a private function (with the additional drift parameter):</p>\n\n<pre><code>class BlackScholesModel {\n    ...other members of BlackScholesModel...\n    std::vector&lt;double&gt; generateRiskNeutralPricePath(\n    double toDate,\n    int nSteps,\n    double drift) const;\n    }\n</code></pre>\n\n<p>So, I wanted to know, doesn't the fact that I am introducing the same function twice confuse the compiler? I understand that when I declare the functions, it will be able to differentiate between the two functions (from their parameters). But, is that even a good practice to do? I'd like to think not.</p>\n"}, {"tags": ["c++", "excel", "vba", "xll"], "owner": {"reputation": 31, "user_id": 7313049, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-bqHYUcOLORI/AAAAAAAAAAI/AAAAAAAAAAw/Xo4aUPXF05c/photo.jpg?sz=128", "display_name": "pawan kataria", "link": "https://stackoverflow.com/users/7313049/pawan-kataria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1586462453, "creation_date": 1540407365, "last_edit_date": 1586462453, "question_id": 52976145, "link": "https://stackoverflow.com/questions/52976145/xlcall-lib-for-visual-studio-2013", "title": "XLCALL.LIB for Visual Studio 2013", "body": "<p>We recently migrated to Visual Studio 2013 from VS2010. One of the project generates .xll using XLCALL32.lib and XLCALL dll. Now after migration to Visual Studio 2013, I am getting an error</p>\n\n<pre><code>lnk2026 module unsafe for safeseh image\n</code></pre>\n\n<p>There are some solutions available of disbaling SAFESEH from here:\n<a href=\"https://stackoverflow.com/questions/10599940/module-unsafe-for-safeseh-image-c\">module unsafe for SAFESEH image C++</a></p>\n\n<p>But following this solution, Excel throws exception and crashes, while same code works fine when build on Visual Studio 2010.</p>\n\n<p>I am wondering if XLCALL32.LIB is separately available for VC120 build tools.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4923, "user_id": 1008957, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/8eb0f1be84f876f49ef79ffff5df9e38?s=128&d=identicon&r=PG", "display_name": "prapin", "link": "https://stackoverflow.com/users/1008957/prapin"}, "edited": false, "score": 1, "creation_date": 1540407463, "post_id": 52976126, "comment_id": 92858845, "body": "This really depends on the platform environment. For example, are threads allowed? Can you use Windows timers?"}, {"owner": {"reputation": 10498, "user_id": 669576, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mRhrB.jpg?s=128&g=1", "display_name": "Johnny Mopp", "link": "https://stackoverflow.com/users/669576/johnny-mopp"}, "edited": false, "score": 0, "creation_date": 1540407520, "post_id": 52976126, "comment_id": 92858866, "body": "You could also use a timestamp. If 5 seconds have elapsed since previous time, update value."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540407522, "post_id": 52976126, "comment_id": 92858868, "body": "The C++ standard library have very good <a href=\"https://en.cppreference.com/w/cpp/chrono\" rel=\"nofollow noreferrer\">time and duration facilities</a>. You can use them for timing in your main event loop."}, {"owner": {"reputation": 8115, "user_id": 4749297, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/LXTZX.jpg?s=128&g=1", "display_name": "Lansana Camara", "link": "https://stackoverflow.com/users/4749297/lansana-camara"}, "edited": false, "score": 0, "creation_date": 1540407543, "post_id": 52976126, "comment_id": 92858879, "body": "You could use some kind of ticker. Your game will have &quot;ticks&quot;, and on each tick, certain actions happen. There could be 5 ticks a second, for instance. On every 5th tick you run certain logic, including the logic that will increase the spawnrate. This ticking system is used by an MMORPG I play, works pretty well there."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1540407603, "post_id": 52976126, "comment_id": 92858905, "body": "100 lines is a <b>tiny</b> program. You still can reduce this to fewer lines by only including the parts where you deal wuth simultaneous keyboard input and console output (<i>what</i> gets output is unimportant so you can omit all of that)."}, {"owner": {"reputation": 23, "user_id": 10108008, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--Tj7c2U-S9A/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohT6pb8khjw3P7y1-0b-xNiLyIgw/mo/photo.jpg?sz=128", "display_name": "Tessa W", "link": "https://stackoverflow.com/users/10108008/tessa-w"}, "edited": false, "score": 0, "creation_date": 1540407911, "post_id": 52976126, "comment_id": 92859038, "body": "Thank you for the Link Some programmer dude. I&#39;ll look into it. I&#39;m not so familliar to C++ because I just started doing it, so it takes a little longer to respond to everyone. Because I have to lookup all the terms you guys are saying haha :). I&#39;m still mostly working with standart library stuff."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540408290, "post_id": 52976126, "comment_id": 92859206, "body": "Unrelated: Standard Library input routines are not good for video games because they block. Say you want know what direction the player wants to go in. You can&#39;t <code>cin &gt;&gt;direction;</code> because the program will stop and wait for the user to hit some keys and then the enter button. In a game this is almost never what you want."}, {"owner": {"reputation": 23, "user_id": 10108008, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--Tj7c2U-S9A/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohT6pb8khjw3P7y1-0b-xNiLyIgw/mo/photo.jpg?sz=128", "display_name": "Tessa W", "link": "https://stackoverflow.com/users/10108008/tessa-w"}, "edited": false, "score": 0, "creation_date": 1540408437, "post_id": 52976126, "comment_id": 92859289, "body": "Yeah I know, for that I used GetAsyncKeyState(), that worked perfectly."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 1, "last_activity_date": 1540409410, "creation_date": 1540409410, "answer_id": 52976615, "question_id": 52976126, "link": "https://stackoverflow.com/questions/52976126/increasing-a-value-every-5-seconds/52976615#52976615", "title": "Increasing a value every 5 seconds", "body": "<p>The typical way to write a game is to have an event loop.</p>\n\n<p>The event loop polls various inputs for status, updates the state of the game, and then repeats.  Some clever event loops even sleep for short periods and get notifications when inputs change or state has to be updated.</p>\n\n<p>In your meteor spawning code, keep track of a timestamp when the last increase in spawnrate occurred.  When you check if a meteor should spawn or spawn meteors 5 seconds after that point, update the spawn rate and record a new timestamp (possibly retroactively, and possibly in a loop to handle more than 10 seconds passing between checks for whatever reason).</p>\n\n<p>An alternative solution involving an extra thread of execution is possible, but not a good idea.</p>\n\n<p>As an aside, most games want to support pausing; so you want to distinguish between wall-clock time and nominal game-play time.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 10108008, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--Tj7c2U-S9A/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohT6pb8khjw3P7y1-0b-xNiLyIgw/mo/photo.jpg?sz=128", "display_name": "Tessa W", "link": "https://stackoverflow.com/users/10108008/tessa-w"}, "edited": false, "score": 0, "creation_date": 1540410426, "post_id": 52976705, "comment_id": 92860236, "body": "Thank you so much! You really helped me. I&#39;ll look into this and threads some more, but this really helps me spreads my knowledge about C++!"}], "tags": [], "owner": {"reputation": 812, "user_id": 10492002, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bTAmh.png?s=128&g=1", "display_name": "Cyber", "link": "https://stackoverflow.com/users/10492002/cyber"}, "is_accepted": true, "score": 1, "last_activity_date": 1540409776, "creation_date": 1540409776, "answer_id": 52976705, "question_id": 52976126, "link": "https://stackoverflow.com/questions/52976126/increasing-a-value-every-5-seconds/52976705#52976705", "title": "Increasing a value every 5 seconds", "body": "<p>There are mainly two ways to approach this problem. One would be to spawn a new thread and put the loop there. You can use C++11's standard libraries <code>&lt;thread&gt;</code> and <code>&lt;chrono</code>. Putting the thread to sleep for 5 seconds is as simple as <code>std::this_thread::sleep_for(std::chrono::seconds{5});</code></p>\n\n<p>But dedicating an entire thread to such a trivial task is unnecessary. In a videogame you usually have some sort of time keeping variable.</p>\n\n<p>What you'd want to do is probably have a variable like <code>std::chrono::time_point&lt;std::chrono::steady_clock&gt; previous_time = std::chrono::steady_clock::now();</code> (or simply <code>auto previous_time = std::chrono::steady_clock::now()</code>) outside of your loop. Now you have a reference point you can use to know where you are in time while running your loop. Inside of your loop you create another variable like <code>auto current_time = std::chrono::steady_clock::now();</code>, this is your current time. Now it's a simple matter of calculating the difference between <code>current_time</code> and <code>previous_time</code> and check if 5 seconds have passed. If they have, increase your variable and don't forget to set <code>previous_time = current_time;</code> to update the time, if not then just skip and keep doing whatever else you need to do in your main game loop.</p>\n\n<p>To check if 5 seconds have passed, you do <code>if (std::chrono::duration_cast&lt;std::chrono::seconds&gt;(current_time - previous_time).count() &gt;= 5) { ... }</code>.</p>\n\n<p>You can find a lot more info <a href=\"https://en.cppreference.com/w/cpp/chrono\" rel=\"nofollow noreferrer\">here</a> for the <code>chrono</code> library and <a href=\"https://en.cppreference.com/w/cpp/header/thread\" rel=\"nofollow noreferrer\">here</a> for the <code>thread</code> library. Plus, Google is your friend.</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 7668403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf01306a7c361c9bf1a44c5e435f1449?s=128&d=identicon&r=PG&f=1", "display_name": "kaustubhd9", "link": "https://stackoverflow.com/users/7668403/kaustubhd9"}, "is_accepted": false, "score": 0, "last_activity_date": 1544115028, "last_edit_date": 1544115028, "creation_date": 1540411617, "answer_id": 52977181, "question_id": 52976126, "link": "https://stackoverflow.com/questions/52976126/increasing-a-value-every-5-seconds/52977181#52977181", "title": "Increasing a value every 5 seconds", "body": "<p>I found this easier than using chrono</p>\n\n<p>Open to feedbacks:</p>\n\n<p>Code:-</p>\n\n<p>include \"time.h\"</p>\n\n<p>main(){</p>\n\n<pre><code>int d;\n\ntime_t s,e;\n\ntime(&amp;s);\n\ntime(&amp;e);\n\nd=e-s;\n\nwhile(d&lt;5){\n\n    cout&lt;&lt;d;\n\n    time(&amp;e);\n\n    d=e-s;\n\n}\n</code></pre>\n\n<p>}</p>\n"}, {"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 0, "last_activity_date": 1540412828, "last_edit_date": 1540412828, "creation_date": 1540412446, "answer_id": 52977381, "question_id": 52976126, "link": "https://stackoverflow.com/questions/52976126/increasing-a-value-every-5-seconds/52977381#52977381", "title": "Increasing a value every 5 seconds", "body": "<p>One way you can do this is by making your value a <em>function of elapsed time</em>. For example:</p>\n\n<pre><code>// somewhere to store the beginning of the \n// time period.\ninline std::time_t&amp; get_start_timer()\n{\n    static std::time_t t{};\n    return t;\n}\n\n// Start a time period (resets meteors to zero)\ninline void start_timer()\n{\n    get_start_timer() = std::time(nullptr); // current time in seconds\n}\n\n// retrieve the current number of meteors\n// as a function of time.\ninline int nMeteors()\n{\n    return int(std::difftime(std::time(nullptr), get_start_timer())) / 5;\n}\n\nint main()\n{\n    start_timer();\n\n    for(;;)\n    {\n        std::this_thread::sleep_for(std::chrono::seconds(1));\n        std::cout &lt;&lt; \"meteors: \" &lt;&lt; nMeteors() &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n\n<p>Here is a similar version using <code>C++11</code> <code>&lt;chrono&gt;</code> library:</p>\n\n<pre><code>// somewhere to store the beginning of the\n// time period.\ninline auto&amp; get_time_point()\n{\n    static std::chrono::steady_clock::time_point tp{};\n    return tp;\n}\n\n// Start a time period (resets meteors to zero)\ninline void start_timing()\n{\n    get_time_point() = std::chrono::steady_clock::now(); // current time in seconds\n}\n\n// retrieve the current number of meteors\n// as a function of time.\ninline auto nMeteors()\n{\n    return std::chrono::duration_cast&lt;std::chrono::seconds&gt;(std::chrono::steady_clock::now() - get_time_point()).count() / 5;\n}\n\nint main()\n{\n    start_timing();\n\n    for(;;)\n    {\n        std::this_thread::sleep_for(std::chrono::seconds(1));\n        std::cout &lt;&lt; \"meteors: \" &lt;&lt; nMeteors() &lt;&lt; '\\n';\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10108008, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--Tj7c2U-S9A/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohT6pb8khjw3P7y1-0b-xNiLyIgw/mo/photo.jpg?sz=128", "display_name": "Tessa W", "link": "https://stackoverflow.com/users/10108008/tessa-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "accepted_answer_id": 52976705, "answer_count": 4, "score": 0, "last_activity_date": 1544115028, "creation_date": 1540407290, "question_id": 52976126, "link": "https://stackoverflow.com/questions/52976126/increasing-a-value-every-5-seconds", "title": "Increasing a value every 5 seconds", "body": "<p>I'm making a simple meteor and rocket game in the console. And I want to increase the spawnrate of the meteors every five seconds. I have already tried the Sleep() function but that will of course not work and sleep the whole application. So does a while loop.</p>\n\n<p>I will only post the Logic() function where it must increase because it's a program<br>\nof like 100 lines and I didn't feel like posting it all in here. If you do need context just ask me and I will post everything.</p>\n\n<pre><code>void Logic() {\n        Sleep(5000); // TODO Increase meteors every Five seconds\n        nMeteors++;\n}\n</code></pre>\n\n<p>I'm pretty stuck on this so it would be nice if someone could help me :)</p>\n"}, {"tags": ["c++", "arrays", "sub-array"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 5, "creation_date": 1540406954, "post_id": 52975989, "comment_id": 92858586, "body": "You want to avoid copying?  Because of the perceived cost?  Have you measured that vs. the atomic operations required for keeping the shared pointer alive?"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 1, "creation_date": 1540407369, "post_id": 52975989, "comment_id": 92858785, "body": "Maybe <a href=\"https://github.com/isocpp/CppCoreGuidelines/blob/master/docs/gsl-intro.md\" rel=\"nofollow noreferrer\">gsl::span</a> would be helpful here? (implementation here <a href=\"https://github.com/Microsoft/GSL/blob/master/include/gsl/span\" rel=\"nofollow noreferrer\">github.com/Microsoft/GSL/blob/master/include/gsl/span</a> ). Otherwise why not just a <i>beginning</i> and <i>end</i> pointer to deliniate the region?"}, {"owner": {"reputation": 17580, "user_id": 493106, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/48b0c7ab491edf2f69e63773181a22b5?s=128&d=identicon&r=PG", "display_name": "xaxxon", "link": "https://stackoverflow.com/users/493106/xaxxon"}, "edited": false, "score": 1, "creation_date": 1540409830, "post_id": 52975989, "comment_id": 92859957, "body": "There&#39;s nothing wrong with using a span-like class to do this.   or just pass pointers.  It being &quot;official&quot; doesn&#39;t make it any better.  Also, shared_ptr&#39;s are relatively expensive to create/destroy so that design decision seems questionable for something that will have a lot of creation/deletion."}, {"owner": {"reputation": 666, "user_id": 1735409, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cb0ae0e04c776313a9e3fab984d9365?s=128&d=identicon&r=PG", "display_name": "wzab", "link": "https://stackoverflow.com/users/1735409/wzab"}, "edited": false, "score": 0, "creation_date": 1540412091, "post_id": 52975989, "comment_id": 92860991, "body": "Thanks for comments regarding the shared pointers. Indeed I may use unique_ptr for passing the &quot;result&quot;. However of course a shared_ptr to the &quot;response&quot; will be needed in &quot;my_sub_array&quot; to keep the &quot;response&quot; alive. For &quot;span&quot; I have found the following portable implementation: <a href=\"https://github.com/martinmoene/span-lite\" rel=\"nofollow noreferrer\">github.com/martinmoene/span-lite</a>"}], "owner": {"reputation": 666, "user_id": 1735409, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cb0ae0e04c776313a9e3fab984d9365?s=128&d=identicon&r=PG", "display_name": "wzab", "link": "https://stackoverflow.com/users/1735409/wzab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540416491, "creation_date": 1540406748, "last_edit_date": 1540416491, "question_id": 52975989, "link": "https://stackoverflow.com/questions/52975989/c-how-to-make-available-without-copying-parts-of-the-static-array-as-array-l", "title": "C++ how to make available (without copying) parts of the static array as array-like objects?", "body": "<p>I'm writing a high-performance communication library based on <a href=\"http://zeromq.org/bindings:cpp\" rel=\"nofollow noreferrer\">ZMQ</a>, where a single data packet consists of many smaller chunks, consumed by different routines. I want to avoid data copying. The received packet will be stored in the message structure available via shared pointer:</p>\n\n<pre><code>std::shared_ptr&lt;zmq::message_t&gt; response = std::make_shared&lt;zmq::message_t&gt;();\nsocket.recv (req.get());\n</code></pre>\n\n<p>The data in the message may be accessed by a standard pointer:</p>\n\n<pre><code>uint32_t * msg_data = (uint 32_t *) response.get()-&gt;data();\n</code></pre>\n\n<p>However, I need to access them in another way.\nEach consumer should be given its <code>result</code> object, that contains the shared pointer to the <code>response</code> array, and something that presents the appropriate part of the <code>data</code> field of the message as array-like object.\nThe <code>response</code> array will be disposed off as soon as the last consumer stops using its <code>result</code>.</p>\n\n<p>If we assume that the data consists of 100 words, with 3 chunks starting at 0th, 23th and 65th word, the result should be prepared as follows:</p>\n\n<pre><code>shared_ptr&lt;my_sub_array&gt; res1 = std::make_shared&lt;my_sub_array&gt;(response,0,23);\nshared_ptr&lt;my_sub_array&gt; res2 = std::make_shared&lt;my_sub_array&gt;(response,23,65);\nshared_ptr&lt;my_sub_array&gt; res1 = std::make_shared&lt;my_sub_array&gt;(response,65,100);\n</code></pre>\n\n<p>It seems, that <code>my_sub_array</code> may be based on <a href=\"https://en.cppreference.com/w/cpp/container/span\" rel=\"nofollow noreferrer\"><code>span</code></a> class (with addition of the shared pointer to <code>response</code> ensuring that it is not released). However it has been introduced in C++20, so is not supported yet by most compilers.</p>\n\n<p>Is there any official and portable way to produce such array-like representation of the part of an array?</p>\n\n<p><strong>Update</strong></p>\n\n<p>For performance reasons listed in comments below, the <code>result</code> objects should be returned via <code>unique_ptr</code>, not <code>shared_ptr</code>:</p>\n\n<pre><code>unique_ptr&lt;my_sub_array&gt; res1 = std::make_unique&lt;my_sub_array&gt;(response,0,23);\nunique_ptr&lt;my_sub_array&gt; res2 = std::make_unique&lt;my_sub_array&gt;(response,23,65);\nunique_ptr&lt;my_sub_array&gt; res1 = std::make_unique&lt;my_sub_array&gt;(response,65,100);\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 14988, "user_id": 881441, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ktk8b.jpg?s=128&g=1", "display_name": "Stephen Quan", "link": "https://stackoverflow.com/users/881441/stephen-quan"}, "edited": false, "score": 0, "creation_date": 1540407078, "post_id": 52975977, "comment_id": 92858645, "body": "<code>ptrToMyself</code> should be <code>A*</code> not <code>A**</code>. How is <code>ptrToMyself</code> different than using <code>this</code>? Im a bit worried about your use case. Sounds like u need to use reference counting smart pointers."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1540407150, "post_id": 52975977, "comment_id": 92858679, "body": "Just to clear this up, this is so you can <code>void commitsuicide() { *ptrToMyself = nullptr; delete this;}</code>, yes? I don&#39;t like this. If you expand on the usage of <code>A</code> and its relationship to <code>B</code> someone may suggest a better design."}, {"owner": {"reputation": 1567, "user_id": 8870224, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/BomtF.jpg?s=128&g=1", "display_name": "samuelnj", "link": "https://stackoverflow.com/users/8870224/samuelnj"}, "edited": false, "score": 1, "creation_date": 1540407422, "post_id": 52975977, "comment_id": 92858823, "body": "I think this is bad design. Impossible to tell what you&#39;re trying to use it for, but I can almost guarantee there&#39;s a better solution that involves <code>A</code> not committing suicide."}, {"owner": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 4, "creation_date": 1540415178, "post_id": 52975977, "comment_id": 92862347, "body": "There&#39;s probably a much better/cleaner/safer way of doing whatever it is you are trying to do with <code>std::shared_ptr</code> and possibly <code>std::weak_ptr</code> and/or <code>std::shared_from_this</code>."}, {"owner": {"reputation": 399, "user_id": 5012558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53d4033d21348e98143ca297fa22daca?s=128&d=identicon&r=PG&f=1", "display_name": "ItsaMeTuni", "link": "https://stackoverflow.com/users/5012558/itsametuni"}, "reply_to_user": {"reputation": 100407, "user_id": 16406, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fadf252892475e9b177d5cd5e8b24145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Dodd", "link": "https://stackoverflow.com/users/16406/chris-dodd"}, "edited": false, "score": 0, "creation_date": 1540416029, "post_id": 52975977, "comment_id": 92862652, "body": "@ChrisDodd Unreal Engine has its own smart pointer classes (like weak ptr and shared ptr) but as far as I understand the weak pointer, it will only be set to nullptr after GC happens. So if A destroyed itself I will have an invalid pointer in B until GC happens. I can force GC to happen, but I don&#39;t like that idea."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1540416044, "post_id": 52975977, "comment_id": 92862661, "body": "In my experience things will go a lot better for you if you just don&#39;t use raw pointers at all.  (But maybe this engine requires it, IDK)"}, {"owner": {"reputation": 399, "user_id": 5012558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53d4033d21348e98143ca297fa22daca?s=128&d=identicon&r=PG&f=1", "display_name": "ItsaMeTuni", "link": "https://stackoverflow.com/users/5012558/itsametuni"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1540416225, "post_id": 52975977, "comment_id": 92862735, "body": "@M.M UE4 has a base class called UObject and basically, any raw pointer to a UObject gets transformed into a smart pointer under the hood. UE4&#39;s smart pointers are meant to be used for everything that is not a UObject."}], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 5012558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53d4033d21348e98143ca297fa22daca?s=128&d=identicon&r=PG&f=1", "display_name": "ItsaMeTuni", "link": "https://stackoverflow.com/users/5012558/itsametuni"}, "edited": false, "score": 0, "creation_date": 1540416821, "post_id": 52978125, "comment_id": 92862940, "body": "Idk if you saw my comment there, but since GC happens in an interval (not on every frame) I don&#39;t want to use smart pointers because I might have an invalid reference after I destroyed the object and GC hasn&#39;t happened."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 399, "user_id": 5012558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53d4033d21348e98143ca297fa22daca?s=128&d=identicon&r=PG&f=1", "display_name": "ItsaMeTuni", "link": "https://stackoverflow.com/users/5012558/itsametuni"}, "edited": false, "score": 0, "creation_date": 1540417040, "post_id": 52978125, "comment_id": 92863016, "body": "That is not how GC works in C++. You don&#39;t delete the object (so: you can&#39;t have an invalid reference after you destroy it). You create a smart pointer. As long as anyone has it, the object exists. Once everybody discard the pointer, the object is deleted."}, {"owner": {"reputation": 399, "user_id": 5012558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53d4033d21348e98143ca297fa22daca?s=128&d=identicon&r=PG&f=1", "display_name": "ItsaMeTuni", "link": "https://stackoverflow.com/users/5012558/itsametuni"}, "edited": false, "score": 0, "creation_date": 1540417545, "post_id": 52978125, "comment_id": 92863190, "body": "The problem is that I don&#39;t want the Character to control the lifespan of the Attack, I only want a reference to it to check if it is still happening (pointer should be null if it&#39;s not) and for UI and other systems to get info about the attack. The character shouldn&#39;t control when the attack is destroyed. The attack itself should determine when it has finished all work it had to do, and when it gets destroyed the pointer to the attack in Character should become null."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "reply_to_user": {"reputation": 399, "user_id": 5012558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53d4033d21348e98143ca297fa22daca?s=128&d=identicon&r=PG&f=1", "display_name": "ItsaMeTuni", "link": "https://stackoverflow.com/users/5012558/itsametuni"}, "edited": false, "score": 0, "creation_date": 1540417684, "post_id": 52978125, "comment_id": 92863237, "body": "The thing is. If the attack controls when it gets destroyed, it means that while it does performs that control, there exists a pointer to it, somewhere (within UE4 animation engine, most likely). This should prevent the attack from getting deleted, until the animation is over."}, {"owner": {"reputation": 399, "user_id": 5012558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53d4033d21348e98143ca297fa22daca?s=128&d=identicon&r=PG&f=1", "display_name": "ItsaMeTuni", "link": "https://stackoverflow.com/users/5012558/itsametuni"}, "edited": false, "score": 0, "creation_date": 1540418126, "post_id": 52978125, "comment_id": 92863364, "body": "Well, no. The animation system doesn&#39;t care about the attack. The attack just calls a function to my animation class. The only things that reference the attack are the player and what calls the Tick function every frame on the attack. It can be safely destroyed using a UE4 function."}], "tags": [], "owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "is_accepted": false, "score": 0, "last_activity_date": 1540416408, "creation_date": 1540416408, "answer_id": 52978125, "question_id": 52975977, "link": "https://stackoverflow.com/questions/52975977/passing-a-ptr-to-a-ptr-to-a-as-parameter-to-a-function-of-a-is-bad-practice/52978125#52978125", "title": "Passing a ptr to a ptr to A as parameter to a function of A is bad practice?", "body": "<p>You don't need the attack to delete itself. Just use a smart pointer (std or UE4) and let it delete itself:</p>\n\n<pre><code>#include &lt;memory&gt;\n#include &lt;iostream&gt;\n\nclass AttackInterface\n{\npublic:\n    virtual void foo() = 0;\n};\n\nclass Attack: public AttackInterface\n{\npublic:\n    void foo() { std::cout &lt;&lt; \"deal damage\" &lt;&lt; std::endl;}\n};\n\nclass Character\n{\npublic:\n    void behave()\n    {\n        std::shared_ptr&lt;Attack&gt; attack = std::make_shared&lt;Attack&gt;();\n        attack-&gt;foo();\n    }\n};\n\nint main()\n{\n    Character c;\n    c.behave();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1070, "user_id": 6074306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd660b5800c023de3b30c914112f09c3?s=128&d=identicon&r=PG&f=1", "display_name": "n.caillou", "link": "https://stackoverflow.com/users/6074306/n-caillou"}, "is_accepted": false, "score": 1, "last_activity_date": 1540423410, "last_edit_date": 1540423410, "creation_date": 1540422027, "answer_id": 52979044, "question_id": 52975977, "link": "https://stackoverflow.com/questions/52975977/passing-a-ptr-to-a-ptr-to-a-as-parameter-to-a-function-of-a-is-bad-practice/52979044#52979044", "title": "Passing a ptr to a ptr to A as parameter to a function of A is bad practice?", "body": "<p>Passing a pointer to the instance doesn't make sense at all\u2014that's already what the <code>this</code> pointer is.</p>\n\n<p>The bigger problem here is that you haven't thought enough about the determinants of the lifetime of your objects and more generally about the underlying asynchronicity and the conflicts it might raise etc.</p>\n\n<p>Asynchronous animations basically mean that your animation classes need to hold shared pointers to all objects they will need (attacks etc.). That's precisely why shared pointers exist; you can initialize a shared pointer in some member function of B, make a copy of it in some non-blocking animation function, then it doesn't matter if you get rid of the shared pointer that B holds, the object will exist as long as some animation object holds on a pointer to it. And if your <code>b</code> keeps a <code>weak_ptr</code> to the <code>shared_ptr</code> of <code>a</code> that exist elsewhere, the <code>b</code> can keep track of whether <code>a</code> has been destroyed.</p>\n\n<p>Anyway, the main question is where do you keep track of ongoing animations?</p>\n"}], "owner": {"reputation": 399, "user_id": 5012558, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/53d4033d21348e98143ca297fa22daca?s=128&d=identicon&r=PG&f=1", "display_name": "ItsaMeTuni", "link": "https://stackoverflow.com/users/5012558/itsametuni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1540423410, "creation_date": 1540406690, "last_edit_date": 1540415117, "question_id": 52975977, "link": "https://stackoverflow.com/questions/52975977/passing-a-ptr-to-a-ptr-to-a-as-parameter-to-a-function-of-a-is-bad-practice", "title": "Passing a ptr to a ptr to A as parameter to a function of A is bad practice?", "body": "<p>Is passing a pointer to a pointer to object A as a parameter of a function in A bad practice?</p>\n\n<p>Here's an example:</p>\n\n<pre><code>class A\n{\n    A** ptrToMyself;\n\n    void Foo(A*&amp; refToPtrToMyself)\n    {\n        ptrToMyself = &amp;refToPtrToMyself;\n    }\n}\nclass B\n{\n    A* ptrToA;\n    void Bar()\n    {\n        ptrToA = new A();\n        ptrToA-&gt;Foo(ptrToA);\n    }\n}\n</code></pre>\n\n<p>The reason I need this is that B will create an instance of A, then A will run and will destroy itself later. Since I don't want to have an invalid pointer in B I set that pointer to nullptr.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>So, as some have asked I'm going to clarify what I'm going to be using this for. I'm making a game in UE4 and, basically, class A represents the Attack class I have (I inherit it and override some virtual functions to add functionality) and B represents my character class. When the player presses the attack button I instantiate the class of the attack the player has selected. Then the attack executes, plays animations and does all it has to do. When it finishes it just destroys itself (and clears the reference the character had to it).</p>\n"}, {"tags": ["c++", "c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1540406633, "post_id": 52975949, "comment_id": 92858434, "body": "Because <code>a</code> is an array, but <code>b</code> is not"}], "answers": [{"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1540406704, "creation_date": 1540406704, "answer_id": 52975978, "question_id": 52975949, "link": "https://stackoverflow.com/questions/52975949/why-is-modification-of-array-b-possible/52975978#52975978", "title": "Why is modification of array b possible?", "body": "<p>When you declare an argument such as <code>int b[][3]</code>, what the compiler really translates it as is <code>int (*b)[3]</code>. That is, <code>b</code> is a <em>pointer</em> and not an array.</p>\n\n<p>Note that this translation only happens for function arguments, and only for the <em>first</em> \"dimension\".</p>\n"}], "owner": {"reputation": 25, "user_id": 10536094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4125d9abbdf4f14a7511534dbc857608?s=128&d=identicon&r=PG&f=1", "display_name": "xehob", "link": "https://stackoverflow.com/users/10536094/xehob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "closed_date": 1540406700, "answer_count": 1, "score": 0, "last_activity_date": 1540406704, "creation_date": 1540406577, "question_id": 52975949, "link": "https://stackoverflow.com/questions/52975949/why-is-modification-of-array-b-possible", "closed_reason": "Duplicate", "title": "Why is modification of array b possible?", "body": "<p>a and b are both array name. why is ++b is permitted while ++a is not.</p>\n\n<pre><code>int main(void)\n{\nint a[3][3] = { 0 };\n\nfoo(a);\n\nreturn 0;\n}\nvoid foo(int b[][3])\n{\n++b;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "winapi"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540407054, "post_id": 52975807, "comment_id": 92858638, "body": "have you tried <code>std::cin.clear()</code> after <code>freopen()</code>ing the streams?"}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1540407203, "post_id": 52975807, "comment_id": 92858703, "body": "Why aren&#39;t you using Unicode"}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540407375, "post_id": 52975807, "comment_id": 92858788, "body": "@J. Doe adding <code>cin.clear()</code> after <code>freopen(&quot;CONIN$&quot;, &quot;r&quot;, stdin)</code> doesn&#39;t work."}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "reply_to_user": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1540407456, "post_id": 52975807, "comment_id": 92858841, "body": "@stackptr I don&#39;t need Unicode and I don&#39;t see why that is relevant for this question"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540407924, "post_id": 52975807, "comment_id": 92859044, "body": "You could try a different method than <code>freopen()</code> described in <a href=\"https://www.codeproject.com/Articles/15836/Writing-to-and-read-from-the-console-From-a-GUI-ap\" rel=\"nofollow noreferrer\">this</a> article."}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540408756, "post_id": 52975807, "comment_id": 92859435, "body": "Interesting idea, but visual studio doesn&#39;t allow me to change the value of <code>stdin</code> (actually, it is <code>#define</code>d)"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1540409402, "post_id": 52975807, "comment_id": 92859746, "body": "You don&#39;t check the return values (<b>big</b> NO-NO). Check <a href=\"https://gist.github.com/Xsoda/3120099\" rel=\"nofollow noreferrer\">gist.github.com/Xsoda/3120099</a>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540409592, "post_id": 52975807, "comment_id": 92859838, "body": "The article isn&#39;t suggesting to change <code>stdin</code> but its pointee."}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 0, "creation_date": 1540409678, "post_id": 52975807, "comment_id": 92859882, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/191842/how-do-i-get-console-output-in-c-with-a-windows-program\">How do I get console output in C++ with a Windows program?</a>"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540409718, "post_id": 52975807, "comment_id": 92859901, "body": "Are you including <code>&lt;stdio.h&gt;</code> or <code>&lt;cstdio&gt;</code>? According to this: <a href=\"https://stackoverflow.com/questions/5257509/freopen-equivalent-for-c-streams\" title=\"freopen equivalent for c streams\">stackoverflow.com/questions/5257509/&hellip;</a> what you&#39;re doing <i>should</i> work. As CristiFati suggested, check the returns on <code>freopen</code>. I&#39;d suggest that after redirecting <code>stdin</code>, test it with (e.g.) <code>fgets(buf,sizeof(buf),stdin)</code> first to verify that <code>stdin</code> was redirected properly. Then, you can move on to testing it with <code>cin</code> This two step approach will help isolate if <code>freopen</code> is failing or if something extra is needed to get <code>cin</code> to work (e.g. <code>cin.clear()</code>) as others have suggested"}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "reply_to_user": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1540410088, "post_id": 52975807, "comment_id": 92860077, "body": "@CristiFati in the article the pointer to the new FILE wasn&#39;t dereferenced, that&#39;s why I got confused. It kept telling me that I was trying to assign FILE* to FILE. I am still trying to implement that"}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540410342, "post_id": 52975807, "comment_id": 92860197, "body": "@Craig Estey here is what I included: <code>windows.h</code>, <code>io.h</code>, <code>conio.h</code>, <code>stdlib.h</code>, <code>stdio.h</code>, <code>iostream</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540410453, "post_id": 52975807, "comment_id": 92860249, "body": "@DarkAtom &quot;I am still trying to implement that&quot; the function in my answer uses the method described in the article."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540410973, "post_id": 52975807, "comment_id": 92860470, "body": "I&#39;m not sure whether it makes a difference, but I&#39;d use <code>cstdio</code> as that is the <i>idiomatic</i> way to do it. <code>cstdio</code> will [probably] include <code>stdio.h</code> but do it in a way that allows <code>cin</code> to work. If you were <i>only</i> using <code>stdin</code> and <i>not</i> <code>cin</code>, including <code>stdio.h</code> would/should be fine. Intermixing them takes some special care (e.g. you need to &quot;tell&quot; <code>cin</code> that you&#39;re doing this so that it will use <code>FILE</code> buffering instead of doing its own--implementation dependent). So, what are the results of the <code>fgets</code> test?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1540411184, "post_id": 52975807, "comment_id": 92860563, "body": "@CraigEstey <code>&lt;cstdio&gt;</code> doesn&#39;t do any funny things before including <code>&lt;stdio.h&gt;</code> (Visual Studio)."}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540411753, "post_id": 52975807, "comment_id": 92860815, "body": "@J. Doe replaced <code>stdio.h</code> and <code>stdlib.h</code> with <code>cstdio</code> and <code>cstdlib</code>, respectively. No changes in behaviour. I believe cin has nothing to do with <code>cstdio</code>, but with <code>iostream</code>, the only difference being that one is in namespace <code>std</code>, while the other one isn&#39;t."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540411826, "post_id": 52975807, "comment_id": 92860857, "body": "@DarkAtom You should take better care of who you refer to in your comments. (2nd time wrong person)"}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540412114, "post_id": 52975807, "comment_id": 92861003, "body": "I was actually refering to CristiFati and you"}, {"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 0, "creation_date": 1540424434, "post_id": 52975807, "comment_id": 92865159, "body": "Use <code>AllocConsole</code> if the there is no parent process with console window"}], "answers": [{"comments": [{"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540410774, "post_id": 52976703, "comment_id": 92860394, "body": "it says <code>_O_TEXT</code> is undefined"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540410826, "post_id": 52976703, "comment_id": 92860416, "body": "<code>_O_TEXT</code> is defined in <code>&lt;fcntl.h&gt;</code>"}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540411600, "post_id": 52976703, "comment_id": 92860750, "body": "I called this from WinMain and checked if the return value is false. If it is, display a Windows message box, otherwise not. When launched without a console it displays that (obviously), but when launched with a console, it doesn&#39;t display that but neither stdin nor stdout are working."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540411695, "post_id": 52976703, "comment_id": 92860786, "body": "Do you check the return value of your <code>AttachConsole(-1);</code>? Whats the parent process anyway?"}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540411973, "post_id": 52976703, "comment_id": 92860927, "body": "yes, I checked it, it only returns <code>TRUE</code> when there actually is a calling console"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540412064, "post_id": 52976703, "comment_id": 92860974, "body": "Do you want to say your parent is <code>cmd.exe</code>?"}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540412198, "post_id": 52976703, "comment_id": 92861043, "body": "Yes, I am on windows so I use <code>cmd.exe</code> because there are no other options (I don&#39;t think using powershell would change anything)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540413769, "post_id": 52976703, "comment_id": 92861729, "body": "Once a program with <code>SUBSYSTEM:WINDOWS</code> is started from a console, it gets detached from it. The command processor won&#39;t wait for the program to end but display a new prompt immediatly and wait for user input. How could that work if your program were able to steal the consoles stdin??"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540414363, "post_id": 52976703, "comment_id": 92861998, "body": "The <code>freopen()</code> method actually works if you run the executable from a <code>cmd.exe</code> using <code>start &#47;wait foobar.exe</code>. But on W10 x64 only with x64 executables. You get funny error messages if you try with x86 exes."}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540414762, "post_id": 52976703, "comment_id": 92862179, "body": "well that is good to know, but what is the purpose of <code>AttachConsole</code> then? Shouldn&#39;t it reattach the program to cmd?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540415081, "post_id": 52976703, "comment_id": 92862312, "body": "<code>AttachConsole()</code>s purpose is to attach to the console of a parent process that either has a console because it is a <code>SUBSYSTEM:CONSOLE</code> exe or one that used <code>AllocConsole()</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540415121, "post_id": 52976703, "comment_id": 92862330, "body": "See <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20090101-00/\" rel=\"nofollow noreferrer\">blogs.msdn.microsoft.com/oldnewthing/20090101-00</a> for a discussion of the topic."}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540415178, "post_id": 52976703, "comment_id": 92862346, "body": "Ok, using <code>AllocConsole</code> and the <code>freopen</code> method works fine. For some reason attaching to existing consoles is a problem, but creating one is not"}, {"owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540416301, "post_id": 52976703, "comment_id": 92862758, "body": "Ok, I found a long shot, but it is pretty dumb in my opinion. Attaching to the console and then killing the <code>cmd.exe</code> associated with that console using <code>system(&quot;taskkill &#47;f &#47;im cmd.exe&quot;);</code> will leave the console window open and freely available to the application. After the application is done with the console, it can start cmd.exe using <code>system(&quot;start cmd.exe&quot;);</code>. The only downsides to this is that it changes the PID of <code>cmd.exe</code> and it kills all cmd windows (although I believe that this can be worked around by killing only the process with the parent&#39;s pid)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "reply_to_user": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "edited": false, "score": 0, "creation_date": 1540416716, "post_id": 52976703, "comment_id": 92862899, "body": "I&#39;d just use a console application and use the console &quot;legally&quot; or <code>FreeConsole()</code> it otherwise."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "is_accepted": true, "score": 3, "last_activity_date": 1540416387, "last_edit_date": 1540416387, "creation_date": 1540409767, "answer_id": 52976703, "question_id": 52975807, "link": "https://stackoverflow.com/questions/52975807/how-to-output-to-stdin-from-a-windows-application/52976703#52976703", "title": "How to output to stdin from a Windows application?", "body": "<p>Your <code>/SUBSYSTEM:WINDOWS</code> program will be detached from the console right at its launch and the command processor <code>cmd.exe</code> waits for user input again. So <code>stdin</code> is already in use before your programm can attempt any input operation.</p>\n\n<p>Actually, </p>\n\n<pre><code>#define _CRT_SECURE_NO_WARNINGS\n#include &lt;windows.h&gt;\n\n#include &lt;iostream&gt;\n\nint APIENTRY WinMain(HINSTANCE, HINSTANCE, LPSTR, int)\n{\n    AttachConsole(-1);\n\n    freopen(\"CONOUT$\", \"w\", stdout);\n    freopen(\"CONOUT$\", \"w\", stderr);\n    freopen(\"CONIN$\", \"r\", stdin);\n\n    std::cout.clear();\n    std::cin.clear();\n\n    std::cout &lt;&lt; \"Hello!\\n\";\n    int i;\n    std::cin &gt;&gt; i;\n    std::cout &lt;&lt; i &lt;&lt; '\\n';\n    std::cin.get();\n    std::cin.get();\n}\n</code></pre>\n\n<p>works as expected when run from the command prompt using <code>start /wait foobar.exe</code>. (<code>foobar.exe</code> must be built as x64 to work that way on x64 Windows. Trying with an x86 executable gives funny error messages.)</p>\n\n<p>See <a href=\"https://blogs.msdn.microsoft.com/oldnewthing/20090101-00/\" rel=\"nofollow noreferrer\">How do I write a program that can be run either as a console or a GUI application?</a> for a discussion about the topic.</p>\n"}], "owner": {"reputation": 1895, "user_id": 10505778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d48a83c7fb094806cc998ecd3685e06?s=128&d=identicon&r=PG&f=1", "display_name": "DarkAtom", "link": "https://stackoverflow.com/users/10505778/darkatom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 1, "accepted_answer_id": 52976703, "answer_count": 1, "score": 2, "last_activity_date": 1540418158, "creation_date": 1540405967, "last_edit_date": 1540418158, "question_id": 52975807, "link": "https://stackoverflow.com/questions/52975807/how-to-output-to-stdin-from-a-windows-application", "title": "How to output to stdin from a Windows application?", "body": "<p>This is a snippet of my code:</p>\n\n<pre><code>AttachConsole(-1);\nfreopen(\"CONOUT$\", \"w\", stdout);\nfreopen(\"CONOUT$\", \"w\", stderr);\nfreopen(\"CONIN$\", \"r\", stdin); //this doesn't seem to do anything\nint n = 0;\ncin &gt;&gt; n;\ncout &lt;&lt; n + 1;\nFreeConsole();\nWNDCLASSA MainWindow = { 0 };\nMainWindow.hbrBackground = (HBRUSH) COLOR_WINDOW;\nMainWindow.hCursor = LoadCursor(NULL, IDC_ARROW);\nMainWindow.hInstance = hInst;\n//here the window gets created etc.\n</code></pre>\n\n<p>Obviously the usage of the console here is basic, but that should do for this question. The problem is that functions like <code>cin</code> or <code>scanf</code> are not working. <code>cout</code>, <code>cerr</code>, <code>clog</code>, <code>printf</code> work fine, but the input functions don't do anything. How can I make <code>stdin</code> work (preferrably with <code>cin</code>)?</p>\n"}, {"tags": ["c++", "linux", "compilation", "linker"], "comments": [{"owner": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1540423596, "post_id": 52975805, "comment_id": 92864935, "body": "The short answer is no, it isn&#39;t possible.  It isn&#39;t desirable, either.  Consider the consequences if there was such a warning."}, {"owner": {"reputation": 1062, "user_id": 4482655, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-xw9BuCVIPOY/AAAAAAAAAAI/AAAAAAAAAJ0/Ol8fswZG3KQ/photo.jpg?sz=128", "display_name": "Deepankar Arya", "link": "https://stackoverflow.com/users/4482655/deepankar-arya"}, "reply_to_user": {"reputation": 30170, "user_id": 5231607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QzGsq.jpg?s=128&g=1", "display_name": "1201ProgramAlarm", "link": "https://stackoverflow.com/users/5231607/1201programalarm"}, "edited": false, "score": 0, "creation_date": 1540470898, "post_id": 52975805, "comment_id": 92883946, "body": "Well it may be useful for the case I just described."}], "owner": {"reputation": 1062, "user_id": 4482655, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh5.googleusercontent.com/-xw9BuCVIPOY/AAAAAAAAAAI/AAAAAAAAAJ0/Ol8fswZG3KQ/photo.jpg?sz=128", "display_name": "Deepankar Arya", "link": "https://stackoverflow.com/users/4482655/deepankar-arya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540405959, "creation_date": 1540405959, "question_id": 52975805, "link": "https://stackoverflow.com/questions/52975805/how-to-generate-linker-warning-for-same-function-defined-in-different-linked-sha", "title": "How to generate linker warning for same function defined in different linked shared libraries?", "body": "<p>The situation is similar to <a href=\"https://stackoverflow.com/questions/6538501/linking-two-shared-libraries-with-some-of-the-same-symbols\">this question on SO</a> i.e. a function with the same name is defined differently in two separate .so libs which are then linked to the same executable where the function may be called. If the source files of the libs were being compiled together, the linker would have complained of something like \"multiple definition ...\". Is it possible to make the linker give some warning that the same function is defined in different .so libs being linked in the given scenario?</p>\n"}, {"tags": ["c++", "pointers", "glfw"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1540405975, "post_id": 52975762, "comment_id": 92858136, "body": "Please provide a complete example, not just a vague description of some code. If this is an array of <code>char*</code> then just loop over it until you hit some kind of list terminator, typically <code>nullptr</code>. Do you know how to use pointers as arrays like <code>p[0]</code> and <code>p[i]</code> and so on?"}, {"owner": {"reputation": 10300, "user_id": 2469027, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b62ce55f4f1a0eff6775e7863850a912?s=128&d=identicon&r=PG", "display_name": "Edward Karak", "link": "https://stackoverflow.com/users/2469027/edward-karak"}, "edited": false, "score": 0, "creation_date": 1540407369, "post_id": 52975762, "comment_id": 92858784, "body": "Is the return value of the function zero terminated? Not each individual string, but the array of strings as a whole"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9278352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc337b51ed8f793596216cb0ad03c092?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Rosenberg", "link": "https://stackoverflow.com/users/9278352/ian-rosenberg"}, "edited": false, "score": 0, "creation_date": 1540407832, "post_id": 52975838, "comment_id": 92858999, "body": "Good stuff! Your second example was exactly what I needed. I wasn&#39;t sure if I could get the names directly or if I&#39;d have to parse the characters."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "is_accepted": true, "score": 3, "last_activity_date": 1540407261, "last_edit_date": 1540407261, "creation_date": 1540406089, "answer_id": 52975838, "question_id": 52975762, "link": "https://stackoverflow.com/questions/52975762/how-to-loop-through-a-const-char/52975838#52975838", "title": "How to Loop Through a const char**?", "body": "<p>If <code>glfwNames</code> is <code>nullptr</code>-terminated:</p>\n\n<pre><code>#include &lt;cstdio&gt;\n\nint main()\n{\n    char const *glfwNames[] = { \"foo\", \"bar\", \"baz\", nullptr };\n    for (char const **p = glfwNames; *p; ++p)\n        std::puts(*p);\n}\n</code></pre>\n\n<p>If you *know* the number of strings:</p>\n\n<pre><code>std::uint32_t glfwCount;\nconst char** glfwNames = glfwGetRequiredInstanceExtensions(&amp;glfwCount)\n\nfor (std::uint32_t i{}; i &lt; glfwCount; ++i)\n{\n     slog(\"GLFW Extensions to use: %s\", glfwNames[i]);\n}\n</code></pre>\n\n<p>To also loop through the individual <code>char</code>s:</p>\n\n<pre><code>for (std::uint32_t i{}; i &lt; glfwCount; ++i)\n{\n     for(char const *p{ glfwNames[i] }; *p; ++p)\n         std::putchar(*p);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 36542, "user_id": 104427, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2e852d4a44a1d795a9f207bcd30920bc?s=128&d=identicon&r=PG&f=1", "display_name": "Escualo", "link": "https://stackoverflow.com/users/104427/escualo"}, "is_accepted": false, "score": 0, "last_activity_date": 1540408331, "creation_date": 1540408331, "answer_id": 52976366, "question_id": 52975762, "link": "https://stackoverflow.com/questions/52975762/how-to-loop-through-a-const-char/52976366#52976366", "title": "How to Loop Through a const char**?", "body": "<p>A common pattern that I use to loop through the arguments to <code>main</code> is via <code>std::for_each</code>:</p>\n\n<pre><code>#include &lt;algorithm&gt;\nint main(int argc, char* argv[]) {\n    std::for_each( argv + 1, argv + argc, handler );\n}\n</code></pre>\n\n<p>where <code>handler</code> is any function taking a <code>const char*</code>, <code>const std::string&amp;</code>, or <code>std::string_view</code> (I use the later).</p>\n\n<p>Would a similar approach work for your problem? Notice that this approach requires you to know the length of your array of strings.</p>\n\n<p>As a side note, it is important to know that the return argument of <code>std::for_each</code> is the function provided (<code>handler</code> in this case). That enables the suggested pattern to make a last call once the input is known to have been exhausted:</p>\n\n<pre><code>#include &lt;algorithm&gt;\nint main(int argc, char* argv[]) {\n    std::for_each( argv + 1, argv + argc, handler )(\"Argument To Last Call\");\n}\n</code></pre>\n\n<p>This can be used to implement state machines that receive the termination trigger at the end.</p>\n"}], "owner": {"reputation": 51, "user_id": 9278352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc337b51ed8f793596216cb0ad03c092?s=128&d=identicon&r=PG&f=1", "display_name": "Ian Rosenberg", "link": "https://stackoverflow.com/users/9278352/ian-rosenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1501, "favorite_count": 0, "accepted_answer_id": 52975838, "answer_count": 2, "score": -1, "last_activity_date": 1540527198, "creation_date": 1540405775, "last_edit_date": 1540527198, "question_id": 52975762, "link": "https://stackoverflow.com/questions/52975762/how-to-loop-through-a-const-char", "title": "How to Loop Through a const char**?", "body": "<p>I have a <code>const char**</code> called <code>glfwNames</code> which holds the C version of a string array of the required GLFW library extensions. Would it be possible to loop through either the const char* (string), or the individual characters of the string separated by <code>'\\0'</code>?</p>\n\n<pre><code>    const char** glfwNames = glfwGetRequiredInstanceExtensions(&amp;glfwCount)\n\n    for (const char** name = glfwNames; *name; ++name)\n    {\n         slog(\"GLFW Extensions to use: %s\", *name);\n    }\n</code></pre>\n\n<p>This is what I've attempted from one of the answers, and the return value of</p>\n\n<pre><code>glfwGetRequiredInstanceExtensions\n</code></pre>\n\n<p>is an array of extension names, required by GLFW <a href=\"http://www.glfw.org/docs/latest/group__vulkan.html#ga1abcbe61033958f22f63ef82008874b1\" rel=\"nofollow noreferrer\">http://www.glfw.org/docs/latest/group__vulkan.html#ga1abcbe61033958f22f63ef82008874b1</a></p>\n"}, {"tags": ["c++", "stdmap"], "comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 5, "creation_date": 1540404749, "post_id": 52975480, "comment_id": 92857526, "body": "I strongly suggest using <code>std::tie</code> to implement <code>operator&lt;</code>. It automatically gives you a lexicographical ordering. That is, <code>std::tie(lhs.a, lhs.b, lhs.c) &lt; std::tie(rhs.a, rhs.b, rhs.c)</code>."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540404850, "post_id": 52975480, "comment_id": 92857583, "body": "what is the problem? do you get an error? unexpected output?"}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 1, "creation_date": 1540404985, "post_id": 52975480, "comment_id": 92857654, "body": "see first example in <a href=\"https://en.cppreference.com/w/cpp/utility/tuple/tie\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/utility/tuple/tie</a> assuming the parts also have operator&lt; (basically what Justin already said)"}, {"owner": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1540405064, "post_id": 52975480, "comment_id": 92857696, "body": "@Justin Okay I will try that but what should I put instead of a, b and c?"}, {"owner": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540405152, "post_id": 52975480, "comment_id": 92857745, "body": "@user463035818, Sorry didnt really explain whats not working. I am trying to sort my entities of the textured model they are using. But the map cant use TexturedModel to store the entitys."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540405179, "post_id": 52975480, "comment_id": 92857759, "body": "&quot;But the map cant use TexturedModel to store the entitys&quot; why?"}, {"owner": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1540405189, "post_id": 52975480, "comment_id": 92857766, "body": "@KennyOstrom, yes I will take a look at that!:)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540405194, "post_id": 52975480, "comment_id": 92857770, "body": "Please include the error message verbatim in the question"}, {"owner": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540405284, "post_id": 52975480, "comment_id": 92857814, "body": "@user463035818 because I havent fix the operator&lt; correctly, When I using .find(texturemodel) the map cant finde any key with that name. In my main I am sending the same entitys 4 time and they use the same texturedmodel, so something is wrong."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540405354, "post_id": 52975480, "comment_id": 92857849, "body": "there is no <code>main</code> in your code. Please read about  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540405532, "post_id": 52975480, "comment_id": 92857919, "body": "@user463035818 <code>main</code> is definitely not required for an MCVE. That said, this question definitely needs an MCVE."}, {"owner": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1540405608, "post_id": 52975480, "comment_id": 92857959, "body": "@Justin I think I make a mcve for this one"}, {"owner": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540405625, "post_id": 52975480, "comment_id": 92857976, "body": "@user463035818 Ill do that"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1540406001, "post_id": 52975480, "comment_id": 92858150, "body": "@Justin no <code>main</code> is usually not necessarily reuqired, but if the problem is &quot;In my main I am [...], so something is wrong&quot; then it is ;)"}, {"owner": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "edited": false, "score": 0, "creation_date": 1540408001, "post_id": 52975480, "comment_id": 92859079, "body": "Thanks all guys that you tryed to help me out with this, I appreciate your help much!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "edited": false, "score": 0, "creation_date": 1540406510, "post_id": 52975719, "comment_id": 92858378, "body": "Thanks for answer, I think im stuck in c++11. I fell dumb but how do I manually write a return type?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "edited": false, "score": 0, "creation_date": 1540407264, "post_id": 52975719, "comment_id": 92858744, "body": "@anttton <code>decltype</code> solution added, just requires some copy/paste."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1540407250, "last_edit_date": 1540407250, "creation_date": 1540405567, "answer_id": 52975719, "question_id": 52975480, "link": "https://stackoverflow.com/questions/52975480/cant-get-my-sorting-rule-right-for-stdmap/52975719#52975719", "title": "Cant get my sorting rule right for std::map", "body": "<pre><code>friend bool operator&lt;(const ModelTextures&amp; rhs, \nconst ModelTextures&amp; rhs2)\n{\n    return rhs.get() &lt; rhs2.get();\n}\nconst ModelTextures* get() const{\n    return this;\n}\n</code></pre>\n\n<p>this orders by address of the object, not content.  That violates the requirements of <code>std::map</code>.</p>\n\n<pre><code>friend auto as_tie(const ModelTexture&amp; m) {\n  return std::tie(m.textureID, m.shineDamper, m.reflexivity);\n}\nfriend bool operator&lt;(const ModelTextures&amp; rhs, \nconst ModelTextures&amp; rhs2)\n{\n    return as_tie(rhs) &lt; as_tie(lhs);\n}\n</code></pre>\n\n<p>repeat this pattern for <code>TexturedModel</code> and <code>RawModel</code>.</p>\n\n<p>If you are stuck in <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a> you have to manually write the return type of <code>as_tie</code> or use <code>decltype</code>.</p>\n\n<pre><code>friend auto as_tie(const ModelTexture&amp; m)\n-&gt; decltype(std::tie(m.textureID, m.shineDamper, m.reflexivity))\n{\n  return std::tie(m.textureID, m.shineDamper, m.reflexivity);\n}\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10465789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bfb9c042f111c7611b0cae43a424390?s=128&d=identicon&r=PG&f=1", "display_name": "anttton", "link": "https://stackoverflow.com/users/10465789/anttton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540407250, "creation_date": 1540404553, "last_edit_date": 1540407007, "question_id": 52975480, "link": "https://stackoverflow.com/questions/52975480/cant-get-my-sorting-rule-right-for-stdmap", "title": "Cant get my sorting rule right for std::map", "body": "<p>I have trying to use a class as a key in an std::map. I have read documentations and I know I have to type some sort of sorting rule because my std::map is a binary search tree. The problem arise because the class key have another classes in it. Can someone get me some advice how to build the operators?</p>\n\n<p>MasterRenderer file</p>\n\n<pre><code>std::map&lt;TexturedModel, std::vector&lt;Entity&gt;&gt; entites;\nvoid MasterRenderer::processEntity(Entity entity)\n{\nTexturedModel model = entity.getModel();\nauto search = entites.find(model);\nif (search != entites.end()) {\n    //found\n    entites[model].emplace_back(entity);\n}\nelse {\n    //not found\n    entites[model].emplace_back(entity);\n}\nstd::cout &lt;&lt; entites[model].size() &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>TexturedModel.h</p>\n\n<pre><code>    TexturedModel(RawModel model, ModelTextures \n    texture)\n    :m_model(model), m_texture(texture) {\n\n};\n    friend bool operator&lt;(const TexturedModel&amp; m, \n    const \n    TexturedModel&amp; m2) {\n    return m.m_model &lt; m2.m_model || m.m_model == \n    m2.m_model &amp;&amp; m.m_texture &lt; m2.m_texture;\n    }\nprivate:\n    RawModel m_model;\n    ModelTextures m_texture;\n\n};\n</code></pre>\n\n<p>Rawmodel.h</p>\n\n<pre><code>    unsigned int VaoID;\n    unsigned int Vertecies;\n\nRawModel(unsigned int vaoID, unsigned int \nvertecies)\n    :VaoID(vaoID), Vertecies(vertecies) {};\n\nfriend bool operator &lt;(const RawModel&amp; rhs, const \nRawModel&amp; rhs2)\n{\n    return rhs.get() &lt; rhs2.get();\n}\n\nfriend bool operator ==(const RawModel&amp; rhs, const \nRawModel&amp; rhs2)\n{\n    return rhs.get() == rhs2.get();\n}\n\nconst RawModel* get() const {\n    return this;\n}\n</code></pre>\n\n<p>ModelTextures.h</p>\n\n<pre><code>    ModelTextures(unsigned int ID)\n    :textureID(ID) {};\nfriend bool operator&lt;(const ModelTextures&amp; rhs, \nconst ModelTextures&amp; rhs2)\n{\n    return rhs.get() &lt; rhs2.get();\n}\nconst ModelTextures* get() const{\n    return this;\n}\n\nprivate:\n    unsigned int textureID;\n    float shineDamper = 1.0f;\n    float reflectivity = 0.0f;\n};\n</code></pre>\n"}, {"tags": ["java", "c++", "openssl"], "comments": [{"owner": {"reputation": 657, "user_id": 1258571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42e9eb313ff66930b0196ea969337010?s=128&d=identicon&r=PG", "display_name": "SolutionMill", "link": "https://stackoverflow.com/users/1258571/solutionmill"}, "edited": false, "score": 0, "creation_date": 1540405981, "post_id": 52975396, "comment_id": 92858142, "body": "Have you tried calling <code>ERR_get_error</code> to get more details on the error state?"}, {"owner": {"reputation": 11, "user_id": 9584231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eebf5fee9ca243e5a6611dcc9a65e95c?s=128&d=identicon&r=PG&f=1", "display_name": "Mikaelo", "link": "https://stackoverflow.com/users/9584231/mikaelo"}, "reply_to_user": {"reputation": 657, "user_id": 1258571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42e9eb313ff66930b0196ea969337010?s=128&d=identicon&r=PG", "display_name": "SolutionMill", "link": "https://stackoverflow.com/users/1258571/solutionmill"}, "edited": false, "score": 0, "creation_date": 1540408635, "post_id": 52975396, "comment_id": 92859378, "body": "I resolved this as it turned out that the Java code didn&#39;t create their keys properly and didn&#39;t reflect the .pem files that was given to me."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9584231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eebf5fee9ca243e5a6611dcc9a65e95c?s=128&d=identicon&r=PG&f=1", "display_name": "Mikaelo", "link": "https://stackoverflow.com/users/9584231/mikaelo"}, "is_accepted": false, "score": 0, "last_activity_date": 1540408769, "creation_date": 1540408769, "answer_id": 52976465, "question_id": 52975396, "link": "https://stackoverflow.com/questions/52975396/decode-data-using-openssl-that-has-been-encoded-using-java/52976465#52976465", "title": "Decode data using openssl that has been encoded using java", "body": "<p>These is no answer here as like my comment said, it turns out the Java code was incorrect in creating their keys, which were not matching the .pem files I was given.</p>\n"}], "owner": {"reputation": 11, "user_id": 9584231, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eebf5fee9ca243e5a6611dcc9a65e95c?s=128&d=identicon&r=PG&f=1", "display_name": "Mikaelo", "link": "https://stackoverflow.com/users/9584231/mikaelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 25, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540414618, "creation_date": 1540404280, "last_edit_date": 1540414618, "question_id": 52975396, "link": "https://stackoverflow.com/questions/52975396/decode-data-using-openssl-that-has-been-encoded-using-java", "title": "Decode data using openssl that has been encoded using java", "body": "<p>I have to interface with a system written in java that encrypts data using the following java method:</p>\n\n<pre><code>public final void rsaEncrypt(String data, String filePath) {\n    try {\n            Base64.Encoder encoder = Base64.getEncoder();\n            PublicKey pubKey = readKeyFromFile(\"/\" + Constants.PUBLIC_KEY_FILE_NAME, filePath);\n            Cipher cipher = Cipher.getInstance(Constants.RSA_INSTANCE);\n            cipher.init(Cipher.ENCRYPT_MODE, pubKey);\n            byte[] cipherData = cipher.doFinal(data.getBytes(\"UTF-8\"));\n            writeToFile(Constants.ENCRYPTED_STRING_FILE_NAME, filePath, encoder.encodeToString(cipherData));\n        } catch (BadPaddingException | InvalidKeyException | NoSuchPaddingException | NoSuchAlgorithmException\n                | IllegalBlockSizeException | UnsupportedEncodingException e) {\n            if (LOG.isErrorEnabled())\n                LOG.error(\"Error encrypting String.\", e);\n            throw new EncryptionException(\"Error encrypting data\", e);\n        }\n}\n</code></pre>\n\n<p>My code is written in c++ using openssl:</p>\n\n<pre><code>std::string prv =\n    \"-----BEGIN RSA PRIVATE KEY-----\\n\"\n     // cut  key data\n\n    \"-----END RSA PRIVATE KEY-----\\n\";  \nBIO *bio = BIO_new_mem_buf((void*)prv.c_str(), -1);\nRSA* rsaPrivKey = PEM_read_bio_RSAPrivateKey(bio, NULL, NULL, NULL);\n\nif (!rsaPrivKey)\n    printf(\"ERROR: Could not load PRIVATE KEY!  PEM_read_bio_RSAPrivateKey FAILED: %s\\n\", ERR_error_string(ERR_get_error(), NULL));\n\nBIO_free(bio);\n// where enc[] holds the Base64 decoded data, but len becomes -1  and no data is decoded.\nint len = RSA_private_decrypt(64,(unsigned char *)&amp;enc, (unsigned char *)&amp;dec, private_key_, RSA_PKCS1_PADDING);\n</code></pre>\n\n<p>I can decode data I encrypt myself with the public key, but don't seem to match the java options for this.</p>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["c++", "priority-queue"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540404254, "post_id": 52975368, "comment_id": 92857236, "body": "Ask yourself what will happen in your loop if the size of the queue is 0 and <code>i &lt;= q.size()</code> is evaluated."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1540404294, "post_id": 52975368, "comment_id": 92857264, "body": "<code>for (int i=0;i &lt;= q.size(); i++)</code> is a total of <code>size() + 1</code> iteratons and  then you are changing the size in the loop"}], "answers": [{"comments": [{"owner": {"reputation": 44162, "user_id": 752843, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dfab97c10311207545414b6d7d9bde93?s=128&d=identicon&r=PG", "display_name": "Richard", "link": "https://stackoverflow.com/users/752843/richard"}, "edited": false, "score": 0, "creation_date": 1540405645, "post_id": 52975476, "comment_id": 92857991, "body": "A <code>while()</code> loop better conveys the intent here."}], "tags": [], "owner": {"reputation": 2787, "user_id": 2717959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c694e000283d0e5ff92aad3232e88?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Singh", "link": "https://stackoverflow.com/users/2717959/nishant-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1540404548, "creation_date": 1540404548, "answer_id": 52975476, "question_id": 52975368, "link": "https://stackoverflow.com/questions/52975368/printing-a-priority-queue/52975476#52975476", "title": "Printing a Priority Queue", "body": "<p>since you are changing the size of priority queue in the loop, the code is not running correct. Try following code :</p>\n\n<pre><code>priority_queue&lt;Job, vector&lt;Job&gt;, greater&lt;Job&gt;&gt; q = pq;\nsize_t size = pq.size();\nfor(int i = 0; i &lt; size; ++i) {\n    cout &lt;&lt; q.top() &lt;&lt; \"\\n\";\n    q.pop();\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "is_accepted": true, "score": 6, "last_activity_date": 1576592109, "last_edit_date": 1576592109, "creation_date": 1540404571, "answer_id": 52975485, "question_id": 52975368, "link": "https://stackoverflow.com/questions/52975368/printing-a-priority-queue/52975485#52975485", "title": "Printing a Priority Queue", "body": "<p>For loops arent really meant to be used for cases when the condition is \"dynamic\". What I mean is: <code>i &lt;= q.size()</code> is of course evaluated on every iteration, but <code>q.size()</code> is also changing on each iteration. It is not impossible to get the for loop right, but a <code>while</code> is more natural:</p>\n\n<pre><code>while (! q.empty() ) {\n    cout &lt;&lt; q.top() &lt;&lt; \"\\n\";\n    q.pop();\n}\n</code></pre>\n\n<p>Your code is wrong because you increment <code>i</code> on every iteraton and at the same time <code>q.size()</code> decreases on every iteration. </p>\n"}], "owner": {"reputation": 41, "user_id": 10404932, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MoWicTCB9i4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMz_qGpTe404QgEZ9iwZhXLvua1Lw/mo/photo.jpg?sz=128", "display_name": "kyle newton", "link": "https://stackoverflow.com/users/10404932/kyle-newton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2951, "favorite_count": 0, "accepted_answer_id": 52975485, "answer_count": 2, "score": 1, "last_activity_date": 1576592109, "creation_date": 1540404145, "question_id": 52975368, "link": "https://stackoverflow.com/questions/52975368/printing-a-priority-queue", "title": "Printing a Priority Queue", "body": "<p>I am attempting to print a STL priority_queue in C++, but I am having issues printing all elements of the queue.</p>\n\n<pre><code>priority_queue&lt;Job, vector&lt;Job&gt;, greater&lt;Job&gt;&gt; q = pq;\nfor(int i = 0; i &lt;= q.size(); i++) {\n    cout &lt;&lt; q.top() &lt;&lt; \"\\n\";\n    q.pop();\n}\n</code></pre>\n\n<p>However, using this code when there is one or two elements in the list it is fine, but as soon as I enter three or more elements it cuts off the last item to be printed. I'm not really sure why this is happening but it's been confusing me for a little while.</p>\n"}, {"tags": ["c++", "parallel-processing"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1540403566, "post_id": 52975114, "comment_id": 92856857, "body": "This depends entirely on where the choice comes from. Without constraining that <code>policy</code> variable to being an <code>int</code>, for example, you can just literally pass an <code>ExecutionPolicy</code> into <code>f2</code>. But presumably you have some constraint, and we don&#39;t know what that is."}, {"owner": {"reputation": 1612, "user_id": 2413857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8d6bd9972d0ba3733de5414696dc7976?s=128&d=identicon&r=PG", "display_name": "Basti", "link": "https://stackoverflow.com/users/2413857/basti"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1540403762, "post_id": 52975114, "comment_id": 92856980, "body": "But the thing is, that the three policies do not have a common base class as far as I understood things. That&#39;s precisely what makes this so tricky"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1540404330, "post_id": 52975114, "comment_id": 92857290, "body": "Oh, right. Well, meh. The best solution still depends on where that &quot;choice&quot; will come from. You might be able to use like a constexpr vector or something to map integers to types. Though that still doesn&#39;t completely help you. Not sure; good luck!"}], "answers": [{"comments": [{"owner": {"reputation": 1612, "user_id": 2413857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8d6bd9972d0ba3733de5414696dc7976?s=128&d=identicon&r=PG", "display_name": "Basti", "link": "https://stackoverflow.com/users/2413857/basti"}, "edited": false, "score": 0, "creation_date": 1540538605, "post_id": 53001490, "comment_id": 92910968, "body": "Hey wow that seems clever. I&#39;m gonna try it later. Thanks a lot!"}], "tags": [], "owner": {"reputation": 23130, "user_id": 8586227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BRnwg.png?s=128&g=1", "display_name": "Davis Herring", "link": "https://stackoverflow.com/users/8586227/davis-herring"}, "is_accepted": true, "score": 6, "last_activity_date": 1540528520, "creation_date": 1540528520, "answer_id": 53001490, "question_id": 52975114, "link": "https://stackoverflow.com/questions/52975114/different-execution-policies-at-runtime/53001490#53001490", "title": "Different execution policies at runtime", "body": "<p>The standard approach here is to separate the <em>selection</em> of a type from the <em>use</em> of the type: the latter takes the form of a function template instantiated several times by the former non-template function (or function template with fewer template parameters).</p>\n\n<p>To avoid duplicating the normal parameters between these two layers, use a generic lambda as the template.  To avoid duplicating the selection logic, make a function template that calls whatever lambda with the appropriate policy:</p>\n\n<pre><code>enum Policy {seq,par,par_unseq};\n\ntemplate&lt;class F&gt;\nauto maybe_parallel(F f,Policy p) {\n  switch(p) {\n  case seq: return f(std::execution::seq);\n  case par: return f(std::execution::par);\n  default: return f(std::execution::par_unseq);\n  }\n}\n\nauto f2(const std::vector&lt;std::string&gt;&amp; vec,\n        const std::string&amp; elem,Policy p) {\n  return maybe_parallel\n    ([&amp;](auto &amp;pol) {return std::find(pol,vec.begin(),vec.end(),elem);},p);\n}\n</code></pre>\n"}], "owner": {"reputation": 1612, "user_id": 2413857, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8d6bd9972d0ba3733de5414696dc7976?s=128&d=identicon&r=PG", "display_name": "Basti", "link": "https://stackoverflow.com/users/2413857/basti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 2, "accepted_answer_id": 53001490, "answer_count": 1, "score": 6, "last_activity_date": 1540528520, "creation_date": 1540403153, "last_edit_date": 1540403624, "question_id": 52975114, "link": "https://stackoverflow.com/questions/52975114/different-execution-policies-at-runtime", "title": "Different execution policies at runtime", "body": "<p>In C++17, a number of functions in the <code>algorithm</code> header now can take an execution policy. I can for example define and call a function like this:</p>\n\n<pre><code>template &lt;class ExecutionPolicy&gt;\nvoid f1(const std::vector&lt;std::string&gt;&amp; vec, const std::string&amp; elem, ExecutionPolicy&amp;&amp; policy) {\n    const auto it = std::find(\n        std::forward&lt;ExecutionPolicy&gt;(policy),\n        vec.cbegin(), vec.cend(), elem\n    );\n}\n\nstd::vector&lt;std::string&gt; vec;\nf1(vec, \"test\", std::execution::seq);\n</code></pre>\n\n<p>However I haven't found a good way to use different policies at runtime. For example when I want to use a different policy depending on some input file.</p>\n\n<p>I toyed around with variants, but in the end the problem was always the different types of <code>std::execution::seq</code>, <code>std::execution::par</code> and <code>std::execution::par_unseq</code>.</p>\n\n<p>A working but cumbersome solution would look like this:</p>\n\n<pre><code>void f2(const std::vector&lt;std::string&gt;&amp; vec, const std::string&amp; elem, const int policy) {\n    const auto it = [&amp;]() {\n        if (policy == 0) {\n            return std::find(\n                std::execution::seq,\n                vec.cbegin(), vec.cend(), elem\n            );\n        }\n        else if (policy == 1) {\n            return std::find(\n                std::execution::par,\n                vec.cbegin(), vec.cend(), elem\n            );\n        }\n        else{\n            return std::find(\n                std::execution::par_unseq,\n                vec.cbegin(), vec.cend(), elem\n            );\n        }\n    };\n}\n\nf2(vec, \"test\", 0);\n</code></pre>\n\n<p>Is there any more elegant solution I'm overlooking?</p>\n\n<p>edit: maybe I should be more precise. Let's say the goal is to save the policy in a variable that can have either of the three policies. That variable should be a parameter to the function.</p>\n"}, {"tags": ["c++", "mpi"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540402843, "post_id": 52974850, "comment_id": 92856497, "body": "you could write a function that returns a <code>MPI_Datatype</code> which is your <code>valUnit</code>, then whenever you need it you call that function"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540403027, "post_id": 52974850, "comment_id": 92856589, "body": "note that <code>valUnit</code> isnt really a type but a value of type <code>MPI_Datatype</code> so you basically pass it around like you would do it with any other value"}, {"owner": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1540403549, "post_id": 52974850, "comment_id": 92856846, "body": "You can simply pass <code>valUnit</code> as a parameter to <code>send()</code> and <code>recv()</code>."}, {"owner": {"reputation": 15, "user_id": 8105741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwmIf.png?s=128&g=1", "display_name": "HenryLiu", "link": "https://stackoverflow.com/users/8105741/henryliu"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540431871, "post_id": 52974850, "comment_id": 92866683, "body": "@user463035818 This method is available, thank you for your answer."}, {"owner": {"reputation": 15, "user_id": 8105741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwmIf.png?s=128&g=1", "display_name": "HenryLiu", "link": "https://stackoverflow.com/users/8105741/henryliu"}, "reply_to_user": {"reputation": 20722, "user_id": 1625187, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6vWOZ.jpg?s=128&g=1", "display_name": "Evg", "link": "https://stackoverflow.com/users/1625187/evg"}, "edited": false, "score": 0, "creation_date": 1540431948, "post_id": 52974850, "comment_id": 92866699, "body": "@Evg This method can also make the program run normally, thank you for your answer."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8105741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwmIf.png?s=128&g=1", "display_name": "HenryLiu", "link": "https://stackoverflow.com/users/8105741/henryliu"}, "edited": false, "score": 0, "creation_date": 1540431313, "post_id": 52979571, "comment_id": 92866549, "body": "You\u2018re right, I re-edited the question. And your method is available."}], "tags": [], "owner": {"reputation": 7287, "user_id": 8062491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rd6rD.png?s=128&g=1", "display_name": "Gilles Gouaillardet", "link": "https://stackoverflow.com/users/8062491/gilles-gouaillardet"}, "is_accepted": true, "score": 0, "last_activity_date": 1540426233, "creation_date": 1540426233, "answer_id": 52979571, "question_id": 52974850, "link": "https://stackoverflow.com/questions/52974850/how-to-create-a-new-datatype-in-mpi-and-take-effect-in-all-scope/52979571#52979571", "title": "How to create a new datatype in mpi and take effect in all scope?", "body": "<p>Simply declare <code>valUnit</code> as a global variable (e.g. right after the <code>typedef ...</code> declaration).</p>\n\n<p>Note <code>send()</code> and <code>recv()</code> are functions from the <code>glibc</code> so you should rename these subroutines in your program, otherwise you might experience some really weird side effects.</p>\n"}], "owner": {"reputation": 15, "user_id": 8105741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwmIf.png?s=128&g=1", "display_name": "HenryLiu", "link": "https://stackoverflow.com/users/8105741/henryliu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 268, "favorite_count": 0, "accepted_answer_id": 52979571, "answer_count": 1, "score": 0, "last_activity_date": 1540448671, "creation_date": 1540402130, "last_edit_date": 1540448671, "question_id": 52974850, "link": "https://stackoverflow.com/questions/52974850/how-to-create-a-new-datatype-in-mpi-and-take-effect-in-all-scope", "title": "How to create a new datatype in mpi and take effect in all scope?", "body": "<p>I define a new MPI data type in the main function in my code, but it seems that it can't be used in other functions.</p>\n\n<pre><code>typedef struct {\n    int row;\n    int col;\n    double val;\n} unit;\n\nvoid sendTest() {\n    unit val;\n    val.row = val.col = val.val = 1;\n    MPI_Send(&amp;val, 1, valUnit, 1, 0, MPI_COMM_WORLD);\n}\n\nvoid recvTest() {\n    unit val;\n    MPI_Recv(&amp;val, 1, valUnit, 0, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n}\n\nint main(int argc, char* argv[]) {\n    int comm_sz,my_rank;\n    MPI_Init(&amp;argc, &amp;argv);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;comm_sz);\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;my_rank);\n\n    int blockcount[3]={1,1,1};\n    MPI_Aint offsets[3] = {offsetof(unit, row), offsetof(unit, col), offsetof(unit, val)};\n    MPI_Datatype dataType[3] = {MPI_INT, MPI_INT, MPI_DOUBLE};\n    MPI_Datatype valUnit;\n    MPI_Type_create_struct(3, blockcount, offsets, dataType, &amp;valUnit);\n    MPI_Type_commit(&amp;valUnit);\n\n    if(my_rank == 0)\n        sendTest();\n    else\n        recvTest();\n\n    MPI_Finalize();\n    return 0;\n}\n</code></pre>\n\n<p>When I compile the program, I got an error:</p>\n\n<pre><code>error: \u2018valUnit\u2019 was not declared in this scope\n</code></pre>\n\n<p>I was wondering how to define the new mpi data type once and can be used in all scope?</p>\n"}, {"tags": ["c++", "opencv", "ffmpeg", "visual-studio-2017"], "comments": [{"owner": {"reputation": 2787, "user_id": 2717959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/015c694e000283d0e5ff92aad3232e88?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Singh", "link": "https://stackoverflow.com/users/2717959/nishant-singh"}, "edited": false, "score": 0, "creation_date": 1540403651, "post_id": 52974746, "comment_id": 92856907, "body": "cvCaptureFromAVI() function is now deprecated in new versions of OpenCV. Try using the new function cvCreateFileCapture()"}], "owner": {"reputation": 85, "user_id": 5154937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/627bf388515c06f0182022a2e6826ea6?s=128&d=identicon&r=PG&f=1", "display_name": "Nirvar Roy Vaskar", "link": "https://stackoverflow.com/users/5154937/nirvar-roy-vaskar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1362, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1540401734, "creation_date": 1540401734, "question_id": 52974746, "link": "https://stackoverflow.com/questions/52974746/how-to-solve-error-cvcreatefilecapturewithpreference-backend-ffmpeg-doesnt-s", "title": "How to solve error: &quot;cvCreateFileCaptureWithPreference: backend FFMPEG doesn&#39;t support legacy API anymore&quot;", "body": "<p>I am trying to build and run an OpenCV project from Github using OpenCV 3.4.2, Cmake 3.13.0-rc1 and VS 2017. The project builds successfully as I understand from the build output but it throws the above warning after I run the program. The video  I want to load is in a .AVI format and uses cvCaptureFromAVI function. Just trying to learn OpenCV, your help and kindness is appreciated.</p>\n\n<p>Source:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;opencv2/opencv.hpp&gt;\n\n#include \"package_bgs/PBAS/PixelBasedAdaptiveSegmenter.h\"\n#include \"package_tracking/BlobTracking.h\"\n#include \"package_analysis/VehicleCouting.h\"\n\nusing namespace cv;\n\nint main(int argc, char **argv)\n{\n  std::cout &lt;&lt; \"Using OpenCV \" &lt;&lt; CV_MAJOR_VERSION &lt;&lt; \".\" &lt;&lt; \n  CV_MINOR_VERSION &lt;&lt; \".\" &lt;&lt; CV_SUBMINOR_VERSION &lt;&lt; std::endl;\n\n  /* Open video file */\n  CvCapture *capture = 0;\n\n  capture = cvCaptureFromAVI(\"video.avi\");\n  if(!capture){\n    std::cerr &lt;&lt; \"Cannot open video ting tong!\" &lt;&lt; std::endl;\n    return 1;\n  }\n\n  /* Background Subtraction Algorithm */\n  IBGS *bgs;\n  bgs = new PixelBasedAdaptiveSegmenter;\n\n  /* Blob Tracking Algorithm */\n\n\n\ncv::Mat img_blob;\n  BlobTracking* blobTracking;\n  blobTracking = new BlobTracking;\n\n  /* Vehicle Counting Algorithm */\n  VehicleCouting* vehicleCouting;\n  vehicleCouting = new VehicleCouting;\n\n  std::cout &lt;&lt; \"Press 'q' to quit...\" &lt;&lt; std::endl;\n  int key = 0;\n  IplImage *frame;\n  while(key != 'q')\n  {\n    frame = cvQueryFrame(capture);\n    if(!frame) break;\n\n    cv::Mat img_input = cv::cvarrToMat(frame);\n    cv::imshow(\"Input\", img_input);\n\n    // bgs-&gt;process(...) internally process and show the foreground mask image\n    cv::Mat img_mask;\n    bgs-&gt;process(img_input, img_mask);\n\n    if(!img_mask.empty())\n    {\n      // Perform blob tracking\n      blobTracking-&gt;process(img_input, img_mask, img_blob);\n\n      // Perform vehicle counting\n      vehicleCouting-&gt;setInput(img_blob);\n      vehicleCouting-&gt;setTracks(blobTracking-&gt;getTracks());\n      vehicleCouting-&gt;process();\n    }\n\n    key = cvWaitKey(1);\n  }\n\n  delete vehicleCouting;\n  delete blobTracking;\n  delete bgs;\n\n  cvDestroyAllWindows();\n  cvReleaseCapture(&amp;capture);\n\n  return 0;\n}\n</code></pre>\n\n<p>Error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/w0V1L.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w0V1L.png\" alt=\"backend FFMPEG doesn&#39;t support legacy API anymore\"></a></p>\n"}, {"tags": ["c++", "c++11", "segmentation-fault"], "comments": [{"owner": {"reputation": 23069, "user_id": 156811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/380335e95e6be9740e56b64d667279b3?s=128&d=identicon&r=PG", "display_name": "Havenard", "link": "https://stackoverflow.com/users/156811/havenard"}, "edited": false, "score": 2, "creation_date": 1540402119, "post_id": 52974712, "comment_id": 92856077, "body": "Is there any reason you&#39;re expecting the move operation to take more than 0ms to happen? You&#39;re just shuffling pointers."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1540402607, "post_id": 52974712, "comment_id": 92856349, "body": "Your classes violate <a href=\"https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">the rule of three</a>, but that doesn&#39;t appear to be directly related to the problem you&#39;re seeing."}, {"owner": {"reputation": 3, "user_id": 10553314, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E-c60dADrEg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBAGCP18wHSERSd_Z3VR1DxukGHrg/mo/photo.jpg?sz=128", "display_name": "Mate", "link": "https://stackoverflow.com/users/10553314/mate"}, "edited": false, "score": 0, "creation_date": 1540406313, "post_id": 52974712, "comment_id": 92858284, "body": "No it is to show it is a lot faster than copying. Yes it violates the rule of three and the rule of five. I just wanted to keep it short. This c++ thing is new for me because I only studied Java before."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10553314, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E-c60dADrEg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBAGCP18wHSERSd_Z3VR1DxukGHrg/mo/photo.jpg?sz=128", "display_name": "Mate", "link": "https://stackoverflow.com/users/10553314/mate"}, "edited": false, "score": 0, "creation_date": 1540403702, "post_id": 52974835, "comment_id": 92856941, "body": "Thank you! I literally spent hours trying to find the solution. I don&#39;t know how could I miss that. I probably copied it in a bad order... I tried to use free like this: free v . It did&#39;t work so I just used delete. It is still interesting tough that sometimes it worked, and it always worked with gdb, and gcc did&#39;t give any warning. Maybe I&#39;m just used to javac..."}], "tags": [], "owner": {"reputation": 17331, "user_id": 8950365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c6ba3b19f86f1bea8cf76e691db4349?s=128&d=identicon&r=PG&f=1", "display_name": "rafix07", "link": "https://stackoverflow.com/users/8950365/rafix07"}, "is_accepted": true, "score": 6, "last_activity_date": 1540402818, "last_edit_date": 1540402818, "creation_date": 1540402052, "answer_id": 52974835, "question_id": 52974712, "link": "https://stackoverflow.com/questions/52974712/c-segfault-sometimes-but/52974835#52974835", "title": "C++ segfault sometimes but", "body": "<p>The problem is in below lines in copy constructor of <code>Alma</code></p>\n\n<pre><code>v= (int*) malloc(size * sizeof(int));\nsize=a.size;\n</code></pre>\n\n<p>when you call <code>malloc</code> what is the value of <code>size</code> ? It is indeterminate, so this call leads to undefined behaviour. <code>size=a.size</code> should be called as first.</p>\n\n<pre><code>size=a.size;\nv= (int*) malloc(size * sizeof(int));\n</code></pre>\n\n<p>The second issue, you allocate memory by <code>malloc</code> C-function, but why do you delete by <code>delete</code> ? It is not consistent, when you use <code>malloc</code> you should call <code>free</code> to delete memory.</p>\n\n<pre><code>free(v);\n</code></pre>\n\n<p>You may read about <a href=\"https://en.wikipedia.org/wiki/Rule_of_three_(C%2B%2B_programming)\" rel=\"nofollow noreferrer\">rule of three</a> and consider using <code>virtual</code> destructor in base class.</p>\n"}], "owner": {"reputation": 3, "user_id": 10553314, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E-c60dADrEg/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBAGCP18wHSERSd_Z3VR1DxukGHrg/mo/photo.jpg?sz=128", "display_name": "Mate", "link": "https://stackoverflow.com/users/10553314/mate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 52974835, "answer_count": 1, "score": 0, "last_activity_date": 1540402818, "creation_date": 1540401620, "last_edit_date": 1540402190, "question_id": 52974712, "link": "https://stackoverflow.com/questions/52974712/c-segfault-sometimes-but", "title": "C++ segfault sometimes but", "body": "<p>This program gives me segfault sometimes.\n I wanted to compare copy ctor with move ctor on speed.\nWhat is interesting it never throws segfault when running in gdb.</p>\n\n<pre><code>#include &lt;iostream&gt;\n #include &lt;cstdlib&gt;\n #include &lt;ctime&gt;\nusing namespace std;\n\n class Alma{\n     protected:\n        int* v;\n        int size;\n     public:\n        void p_r(void);\n        void fill_r(void);\n        Alma(int size){\n            this-&gt;size=size;\n            v= (int*) malloc(size * sizeof(int));\n        }\n        ~Alma(){\n            delete v ;\n        } \n        Alma(const Alma&amp; a){\n            clock_t begin = clock();\n            v= (int*) malloc(size * sizeof(int));\n            size=a.size;\n            for(int i =0; i&lt; size;i++ ){\n                 v[i]=a.v[i];\n            }\n            clock_t end = clock();\n            double ms = double(end - begin) / CLOCKS_PER_SEC;\n            cout &lt;&lt; \"copy / time:\"&lt;&lt; ms &lt;&lt; endl;\n        }\n};\nclass Korte:public Alma{\n    public:\n        Korte(int size):Alma(size){}\n\n    Korte&amp; operator=(Korte&amp;&amp; a){\n            clock_t begin = clock();\n             v=a.v;\n             size=a.size;\n             a.size=0;\n             a.v=nullptr;\n             clock_t end = clock();\n             double ms = double(end - begin) / CLOCKS_PER_SEC;\n             cout &lt;&lt; \"move / time:\"&lt;&lt; ms &lt;&lt; endl;\n            return *this;\n         }\n};\nvoid Alma::fill_r(){\n    for(int i =0; i&lt; size;i++ ){    \n        v[i]=rand();\n    }\n}\nint main(){\n    Alma a(20000000);\n    a.fill_r();\n    Alma b = a;\n    Korte k(20000000);\n    k.fill_r();\n    Korte k2(2);\n    k2=move(k);\n    return 0;\n}\n</code></pre>\n\n<p>At first I wanted to sort vectors but vectors gave me segfault when I used too many elements.(tens of thousands) even with setting the initial size.\nSo I just wrote this. What is the problem?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1540401746, "post_id": 52974634, "comment_id": 92855877, "body": "Terminology note: <code>if</code> and <code>else</code> don&#39;t loop."}, {"owner": {"reputation": 1087, "user_id": 2647036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eafc20c3b23f00c6988eff161b9f6b0d?s=128&d=identicon&r=PG", "display_name": "Thomas Bitonti", "link": "https://stackoverflow.com/users/2647036/thomas-bitonti"}, "edited": false, "score": 0, "creation_date": 1540402048, "post_id": 52974634, "comment_id": 92856042, "body": "Note that the test loop will iterate about fact(n)/2 times, which will be very many times!"}, {"owner": {"reputation": 1087, "user_id": 2647036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eafc20c3b23f00c6988eff161b9f6b0d?s=128&d=identicon&r=PG", "display_name": "Thomas Bitonti", "link": "https://stackoverflow.com/users/2647036/thomas-bitonti"}, "edited": false, "score": 0, "creation_date": 1540402188, "post_id": 52974634, "comment_id": 92856112, "body": "Also, are you sure you have the problem understood correctly?  Factorials are by definition many multiplications, so for n &gt;=4 the condition is always true.  There is no need for any iterative testing."}, {"owner": {"reputation": 1087, "user_id": 2647036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eafc20c3b23f00c6988eff161b9f6b0d?s=128&d=identicon&r=PG", "display_name": "Thomas Bitonti", "link": "https://stackoverflow.com/users/2647036/thomas-bitonti"}, "edited": false, "score": 0, "creation_date": 1540402261, "post_id": 52974634, "comment_id": 92856150, "body": "And, you will want to do a test on the input parameter.  For not very high values of n you will get an overflow on the multiplication when calculating the factorial."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 1087, "user_id": 2647036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eafc20c3b23f00c6988eff161b9f6b0d?s=128&d=identicon&r=PG", "display_name": "Thomas Bitonti", "link": "https://stackoverflow.com/users/2647036/thomas-bitonti"}, "edited": false, "score": 0, "creation_date": 1540402686, "post_id": 52974634, "comment_id": 92856401, "body": "@ThomasBitonti not every factorial is a product of <b>3</b> consecutive factors."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1540406202, "post_id": 52974634, "comment_id": 92858240, "body": "Be sure you check the range of &#39;n&#39;.  Factorials grow VERY fast.  A uint64_t can contain F(20), but not F(21).  Do you know the size your &quot;int n;&quot; ?"}, {"owner": {"reputation": 1087, "user_id": 2647036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eafc20c3b23f00c6988eff161b9f6b0d?s=128&d=identicon&r=PG", "display_name": "Thomas Bitonti", "link": "https://stackoverflow.com/users/2647036/thomas-bitonti"}, "edited": false, "score": 0, "creation_date": 1540496796, "post_id": 52974634, "comment_id": 92898888, "body": "Ah, ok, missed that."}, {"owner": {"reputation": 1087, "user_id": 2647036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eafc20c3b23f00c6988eff161b9f6b0d?s=128&d=identicon&r=PG", "display_name": "Thomas Bitonti", "link": "https://stackoverflow.com/users/2647036/thomas-bitonti"}, "edited": false, "score": 0, "creation_date": 1540499216, "post_id": 52974634, "comment_id": 92899953, "body": "Would it be more efficient to make a table of f(n) and of (m-1)*m*(m+1) and look for matches, rather than the iteratively test?  The range of either seems small for integer types which are supported by C++."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10528432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A_zHiVsDe00/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBrlWmIw25k6lF6irGM0H-ewCbHpw/mo/photo.jpg?sz=128", "display_name": "MrLucky2243", "link": "https://stackoverflow.com/users/10528432/mrlucky2243"}, "edited": false, "score": 0, "creation_date": 1540401684, "post_id": 52974691, "comment_id": 92855840, "body": "Now if I enter 4 who&#39;s factorial can be a multiplication of three consecutive numbers it shows that it cant be"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 47, "user_id": 10528432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A_zHiVsDe00/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBrlWmIw25k6lF6irGM0H-ewCbHpw/mo/photo.jpg?sz=128", "display_name": "MrLucky2243", "link": "https://stackoverflow.com/users/10528432/mrlucky2243"}, "edited": false, "score": 0, "creation_date": 1540401814, "post_id": 52974691, "comment_id": 92855910, "body": "@MrLucky2243 Sounds like you have more than one problem. This is one of the many places creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> can assist you."}, {"owner": {"reputation": 396, "user_id": 5799793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6GkCY.jpg?s=128&g=1", "display_name": "Little Boy Blue", "link": "https://stackoverflow.com/users/5799793/little-boy-blue"}, "edited": false, "score": 0, "creation_date": 1540401879, "post_id": 52974691, "comment_id": 92855950, "body": "That&#39;s because your math says &quot;if(a*(a+1)*(a+2)==x).&quot; A starts as 1; (1*(1+1)*(1+2)) = 6. Thus, your lowest number that it can find is 6. (At least, this appears to be the case after a quick glancing over of it)."}], "tags": [], "owner": {"reputation": 396, "user_id": 5799793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6GkCY.jpg?s=128&g=1", "display_name": "Little Boy Blue", "link": "https://stackoverflow.com/users/5799793/little-boy-blue"}, "is_accepted": false, "score": 2, "last_activity_date": 1540404151, "last_edit_date": 1540404151, "creation_date": 1540401537, "answer_id": 52974691, "question_id": 52974634, "link": "https://stackoverflow.com/questions/52974634/if-else-statement-keeps-looping-infinetely/52974691#52974691", "title": "If else statement keeps looping infinetely", "body": "<p>You need to add a <code>break;</code> statement after:</p>\n\n<pre><code>cout&lt;&lt;\"Cant be a multiplication of 3 numbers\"&lt;&lt;endl; \n</code></pre>\n\n<p>I believe the issue with entering 1 or 2 is the math in: </p>\n\n<pre><code>int a=1;(a+2)&lt;(x/2+1);a++;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10528432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A_zHiVsDe00/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBrlWmIw25k6lF6irGM0H-ewCbHpw/mo/photo.jpg?sz=128", "display_name": "MrLucky2243", "link": "https://stackoverflow.com/users/10528432/mrlucky2243"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540404151, "creation_date": 1540401297, "question_id": 52974634, "link": "https://stackoverflow.com/questions/52974634/if-else-statement-keeps-looping-infinetely", "title": "If else statement keeps looping infinetely", "body": "<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint factorial(int n){ //Apr\u0113\u0137ina skait\u013ca faktoriali izsaucot pati sevi\n    if(n &gt; 1)\n        return n*factorial(n - 1);\n    else\n        return 1;\n\n}\nint main(){\nint ok;\ndo{\n\n\n  int n;\n    cout &lt;&lt; \"Enter a integer: \";\n    cin &gt;&gt; n;\n    int x=factorial(n);\n    cout &lt;&lt; \"Factorial=\" &lt;&lt; x &lt;&lt; endl;\n    for(int a=1;(a+2)&lt;(x/2+1);a++){ \n\n       if(a*(a+1)*(a+2)==x)\n            cout &lt;&lt; \"Equals \" &lt;&lt; a &lt;&lt; \"*\" &lt;&lt; a+1 &lt;&lt; \"*\" &lt;&lt; a+2 &lt;&lt; endl;\n        else \n            cout&lt;&lt;\"Cant be a multiplication of 3 numbers\"&lt;&lt;endl;\n    }\n\n    cout &lt;&lt; \" Do you want to continue (1) or end (0)?\" &lt;&lt; endl;\n    cin &gt;&gt; ok;\n}\nwhile (ok==1);\n}\n</code></pre>\n\n<p>So hey I got this code where it has a factorial function and it checks if the factorial can be a multiplication of 3 consecutive numbers</p>\n\n<pre><code>for(int a=1;(a+2)&lt;(x/2+1);a++){ \n\n           if(a*(a+1)*(a+2)==x)\n                cout &lt;&lt; \"Equals \" &lt;&lt; a &lt;&lt; \"*\" &lt;&lt; a+1 &lt;&lt; \"*\" &lt;&lt; a+2 &lt;&lt; endl;\n            else \n                cout&lt;&lt;\"Cant be a multiplication of 3 numbers\"&lt;&lt;endl;\n        }\n</code></pre>\n\n<p>I am running into a problem in this part now if I for example enter 8 it gives out the factorial 40320 and infinite spam of \"Cant be a multiplication of 3 numbers\", ALSO when I enter 1 or 2 it doesnt spam out \"Cant be a multiplication of 3 numbers\" it just gives out the factorial 1 or 2 \nThanks for help in advance!!</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1540409537, "post_id": 52974633, "comment_id": 92859812, "body": "<code>when I include header files from &#39;SomePackage&#39; in my ModuleA header files</code> - ModuleA <b>header files</b> are not compiled <i>standalone</i>. They are compiled as a part of some source file, which is belong to the library or executable. I guess you are including <code>FileA1.h</code> into the project&#39;s <code>main.cpp</code>. Note, that your project&#39;s executable doesn&#39;t see include directories added for your modules. (Command <code>include_directories()</code> doesn&#39;t affect on the parent directory.)"}], "answers": [{"comments": [{"owner": {"reputation": 398, "user_id": 543752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tx6wo.jpg?s=128&g=1", "display_name": "majkel.mk", "link": "https://stackoverflow.com/users/543752/majkel-mk"}, "edited": false, "score": 0, "creation_date": 1540417257, "post_id": 52975064, "comment_id": 92863101, "body": "Using target_include_directories(), that was the case, thanks for the clue."}], "tags": [], "owner": {"reputation": 317, "user_id": 7266357, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-O-axeJvU9Z4/AAAAAAAAAAI/AAAAAAAADNw/bwo_pQXfzK4/photo.jpg?sz=128", "display_name": "Gergely Nyiri", "link": "https://stackoverflow.com/users/7266357/gergely-nyiri"}, "is_accepted": false, "score": 2, "last_activity_date": 1540402948, "creation_date": 1540402948, "answer_id": 52975064, "question_id": 52974633, "link": "https://stackoverflow.com/questions/52974633/library-headers-not-visible-in-headers-but-perfectly-visible-inside-cpp-file-un/52975064#52975064", "title": "Library headers not visible in headers but perfectly visible inside .cpp file under cmake build. Why?", "body": "<p>I have a github project to be used as a skeleton for other projects:</p>\n\n<p><a href=\"https://github.com/gnyiri/cmake-sandbox\" rel=\"nofollow noreferrer\">https://github.com/gnyiri/cmake-sandbox</a></p>\n\n<p>If you follow this layout, you will not need to add ${SomePackage_INCLUDE_DIR} to INCLUDE_DIRECTORIES which is not the best way to add directories to the include path otherwise. </p>\n\n<p>In a nutshell, you should define a new library like this:</p>\n\n<pre><code>project(module_a)\n\nset(sources\n  src/source_a_1.cc\n)\n\nadd_library(library_a\n  ${sources}\n)\n\ntarget_include_directories(library_a\n  PUBLIC\n    $&lt;INSTALL_INTERFACE:include&gt;\n    $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;\n)\n</code></pre>\n\n<p>Then, if you define another library (library_b), you only need to add library_a in target_link_libraries:</p>\n\n<pre><code>project(module_b)\n\n# set list of sources, needs to be extended when new source arrives\nset(sources\n  src/source_b_1.cc\n)\n\n# define a library (static by default -&gt; liblibrary_b.a or library_a.lib will be generated)\nadd_library(library_b\n  ${sources}\n)\n\n# include directories\ntarget_include_directories(library_b\n  PUBLIC\n    $&lt;INSTALL_INTERFACE:include&gt;\n    $&lt;BUILD_INTERFACE:${CMAKE_CURRENT_SOURCE_DIR}/include&gt;\n)\n\n# link library_b\ntarget_link_libraries(library_b\n  library_a\n)\n</code></pre>\n\n<p>Note that in this source tree, all the header files are located in </p>\n\n<pre><code>&lt;module&gt;/include/&lt;module&gt;\n</code></pre>\n\n<p>This way you will include a header file from  like this:</p>\n\n<pre><code>#include \"&lt;module&gt;/&lt;module_header.h&gt;\"\n</code></pre>\n\n<p>This is simply because /include will be on include path. </p>\n"}, {"tags": [], "owner": {"reputation": 398, "user_id": 543752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tx6wo.jpg?s=128&g=1", "display_name": "majkel.mk", "link": "https://stackoverflow.com/users/543752/majkel-mk"}, "is_accepted": true, "score": 0, "last_activity_date": 1540417421, "creation_date": 1540417421, "answer_id": 52978313, "question_id": 52974633, "link": "https://stackoverflow.com/questions/52974633/library-headers-not-visible-in-headers-but-perfectly-visible-inside-cpp-file-un/52978313#52978313", "title": "Library headers not visible in headers but perfectly visible inside .cpp file under cmake build. Why?", "body": "<p>Switching from INCLUDE_DIRECTORIES() to TARGET_INCLUDE_DIRECTORIES() was the case, no change to the structure of the project was needed.  </p>\n"}], "owner": {"reputation": 398, "user_id": 543752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tx6wo.jpg?s=128&g=1", "display_name": "majkel.mk", "link": "https://stackoverflow.com/users/543752/majkel-mk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "accepted_answer_id": 52978313, "answer_count": 2, "score": 0, "last_activity_date": 1540417421, "creation_date": 1540401287, "question_id": 52974633, "link": "https://stackoverflow.com/questions/52974633/library-headers-not-visible-in-headers-but-perfectly-visible-inside-cpp-file-un", "title": "Library headers not visible in headers but perfectly visible inside .cpp file under cmake build. Why?", "body": "<p>I have a C++ project containing several modules, some built as libraries, with such structure:</p>\n\n<pre><code>/MyProject\n +---/build \n     /ModuleA \n      +---CMakeLists.txt        &lt;- module level CMakeLists\n      +---/src\n      |     +--CMakeLists.txt   &lt;- src level CMakeLists\n      |     +--FileA1.cpp\n      |     +--FileA2.cpp\n      +---/include\n      |     +--FileA1.h\n      |     +--FileA2.h\n      |     +--FileA3.h\n      /ModuleB\n      +---CMakeLists.txt\n      +---/src\n      |     +--CMakeLists.txt\n      |     +--FileB1.cpp\n      |     +--FileB2.cpp\n      +---/include\n      |     +--FileB1.h\n      |     +--FileB2.h\n      |     +--FileB3.h\n      main.cpp\n      CMakeLists.txt            &lt;- project level CMakeLists\n</code></pre>\n\n<p>CMakeLists.txt files look as follow:</p>\n\n<p>project level:</p>\n\n<pre><code>cmake_minimum_required(VERSION 3.05)\nproject(MyProject)\nsubdirs(ModuleA ModuleB)   \nset(CMAKE_CXX_STANDARD 11) \nadd_executable(MyProject main.cpp)\ntarget_link_libraries(MyProject ModuleA ModuleB)\n</code></pre>\n\n<p>module level:</p>\n\n<pre><code>subdirs(src)\n</code></pre>\n\n<p>src level:</p>\n\n<pre><code>FIND_PACKAGE(SomePackage REQUIRED) \nINCLUDE_DIRECTORIES(\n        ${SomePackage_INCLUDE_DIR}\n        ${MyProject_SOURCE_DIR}/ModuleA/include\n)       \nSET(SOURCE_FILES &lt;all files from ModuleA/src goes here&gt;)\nADD_LIBRARY(ModuleA STATIC ${SOURCE_FILES})\nTARGET_LINK_LIBRARIES(ModuleA\n        ${SomePackage_LIBRARIES}\n)\n</code></pre>\n\n<p>The problem is: when I include header files from 'SomePackage' in my ModuleA header files (i.e. SomePackageFile.hpp in FileA1.h) I get an error while running a build with make:</p>\n\n<p>fatal error: SomePackageFile.hpp: No such file or directory</p>\n\n<p>When I include them in cpp files they are visible and project compiles correctly. I assume that is sth wrong with CMakeLists on src level or entire hierarchy of files is missing something.</p>\n"}, {"tags": ["c++", "libstdc++"], "comments": [{"owner": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "edited": false, "score": 1, "creation_date": 1540401494, "post_id": 52974593, "comment_id": 92855752, "body": "might be helpful: <a href=\"https://stackoverflow.com/questions/10516041/check-gcc-version-in-runtime\" title=\"check gcc version in runtime\">stackoverflow.com/questions/10516041/&hellip;</a>"}, {"owner": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "edited": false, "score": 0, "creation_date": 1540401734, "post_id": 52974593, "comment_id": 92855871, "body": "you can define the some variable with result from <code>g++ -dumpversion</code>, and then check for it in code."}, {"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "reply_to_user": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "edited": false, "score": 1, "creation_date": 1540401762, "post_id": 52974593, "comment_id": 92855884, "body": "Unfortunately the gcc version doesn&#39;t help. In fact we usually build with a non-default gcc 8.2, but that simply links <code>libstdc++.so.6</code> - which also happens to be satisfied by the system <code>libstdc++.so.6.0.22</code> coming from system gcc 6.3.0."}, {"owner": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "edited": false, "score": 0, "creation_date": 1540401987, "post_id": 52974593, "comment_id": 92856002, "body": "You can check which library is being used by <code>gcc -lstdc++</code> and later check it by <code>strings</code> command + <code>grep GLIBCXX</code>, and find the <code>GLIBCXX_3.4.25</code> from it."}, {"owner": {"reputation": 206047, "user_id": 126769, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/zBsgn.png?s=128&g=1", "display_name": "nos", "link": "https://stackoverflow.com/users/126769/nos"}, "reply_to_user": {"reputation": 2120, "user_id": 5420570, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4ea437b24f9ddf2bcf52604ceae28e4?s=128&d=identicon&r=PG", "display_name": "BladeMight", "link": "https://stackoverflow.com/users/5420570/blademight"}, "edited": false, "score": 0, "creation_date": 1540402936, "post_id": 52974593, "comment_id": 92856541, "body": "@BladeMight That&#39;s not a runtime check that the program itself can perform in any easy way."}, {"owner": {"reputation": 2357, "user_id": 4074081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/emDh4.png?s=128&g=1", "display_name": "dewaffled", "link": "https://stackoverflow.com/users/4074081/dewaffled"}, "edited": false, "score": 3, "creation_date": 1540419893, "post_id": 52974593, "comment_id": 92863873, "body": "On Linux you can check contents of <code>&#47;proc&#47;self&#47;maps</code> from the running process for incorrect libraries. Not trivial but not very hard."}, {"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1540632222, "post_id": 52974593, "comment_id": 92943253, "body": "Also see <a href=\"https://stackoverflow.com/questions/10354636/how-do-you-find-what-version-of-libstdc-library-is-installed-on-your-linux-mac\" title=\"how do you find what version of libstdc library is installed on your linux mac\">stackoverflow.com/questions/10354636/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "edited": false, "score": 0, "creation_date": 1540918464, "post_id": 53030968, "comment_id": 93036915, "body": "I admit this is a more complex solution than I had hoped for, but fairly elegant never the less."}], "tags": [], "owner": {"reputation": 45838, "user_id": 1362568, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/EAFi0.jpg?s=128&g=1", "display_name": "Mike Kinghan", "link": "https://stackoverflow.com/users/1362568/mike-kinghan"}, "is_accepted": true, "score": 5, "last_activity_date": 1540725902, "creation_date": 1540725902, "answer_id": 53030968, "question_id": 52974593, "link": "https://stackoverflow.com/questions/52974593/reading-libstdc-version-at-runtime/53030968#53030968", "title": "Reading libstdc++ version at runtime", "body": "<p>Here is a linux program that simply lists the absolute real paths of the DSOs it has\nloaded (as enumerated by <a href=\"https://linux.die.net/man/3/dl_iterate_phdr\" rel=\"noreferrer\">dl_iterate_phdr</a>) that are accessible files.\n(All linux programs load <a href=\"http://man7.org/linux/man-pages/man7/vdso.7.html\" rel=\"noreferrer\"><code>linux-vdso.so</code></a>, which isn't actually a file).</p>\n\n<p><strong>main.cpp</strong></p>\n\n<pre><code>#include &lt;link.h&gt;\n#include &lt;climits&gt;\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n\nint\nget_next_SO_path(dl_phdr_info *info, size_t, void *p_SO_list)\n{\n    auto &amp; SO_list =\n        *static_cast&lt;std::vector&lt;std::string&gt; *&gt;(p_SO_list);\n    auto p_SO_path = realpath(info-&gt;dlpi_name,NULL);\n    if (p_SO_path) {\n        SO_list.emplace_back(p_SO_path);\n        free(p_SO_path);\n    }\n    return 0;\n}\n\nstd::vector&lt;std::string&gt;\nget_SO_realpaths()\n{\n    std::vector&lt;std::string&gt; SO_paths;\n    dl_iterate_phdr(get_next_SO_path, &amp;SO_paths);\n    return SO_paths;\n}\n\n\nint main()\n{\n    auto SO_paths = get_SO_realpaths();\n    for (auto const &amp; SO_path : SO_paths) {\n        std::cout &lt;&lt; SO_path &lt;&lt; std::endl;\n    }\n    return 0;\n}\n</code></pre>\n\n<p>Which for me runs like:</p>\n\n<pre><code>$ g++ -Wall -Wextra main.cpp &amp;&amp; ./a.out\n/usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.25\n/lib/x86_64-linux-gnu/libgcc_s.so.1\n/lib/x86_64-linux-gnu/libc-2.27.so\n/lib/x86_64-linux-gnu/libm-2.27.so\n/lib/x86_64-linux-gnu/ld-2.27.so\n</code></pre>\n\n<p><a href=\"https://coliru.stacked-crooked.com/a/d09662993d99b87e\" rel=\"noreferrer\">Live demo</a>    </p>\n\n<p>As you see, the full version appears. With a bit of filename parsing, you\ncan take it from there. Getting the whole DSO list, as per <code>get_SO_realpaths</code>,\nbefore looking for any <code>libstdc++</code> would let you detect, if you want, the freak possibility\nof more than one <code>libstdc++</code> being loaded.</p>\n"}], "owner": {"reputation": 20828, "user_id": 620382, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/bf285996e4e7188feac84786a47d9f3a?s=128&d=identicon&r=PG", "display_name": "Zulan", "link": "https://stackoverflow.com/users/620382/zulan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 1, "accepted_answer_id": 53030968, "answer_count": 1, "score": 4, "last_activity_date": 1540725902, "creation_date": 1540401142, "question_id": 52974593, "link": "https://stackoverflow.com/questions/52974593/reading-libstdc-version-at-runtime", "title": "Reading libstdc++ version at runtime", "body": "<p>My application is affected by <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=81395\" rel=\"nofollow noreferrer\">a bug</a> in older versions of <em>libstdc++</em> in a rather serious data-lossy way. The remedies of how to select the right library version with <code>-rpath</code> or <code>LD_LIBRARY_PATH</code> are known, but not reliable to changes in deployment and build. After being bitten more than once myself I would like to stop the suffering and introduce a runtime-check for a sufficiently new version of <em>libstdc++</em>. How can I access the version in order to print a big fat warning message in case of the deployment failing to use the right version. Note that I need the <em>minor</em> version <code>libstdc++.so.6.0.25</code> a.k.a. <code>GLIBCXX_3.4.25</code> that comes with gcc 8.</p>\n"}, {"tags": ["c++", "avi"], "comments": [{"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 3, "creation_date": 1540400570, "post_id": 52974373, "comment_id": 92855285, "body": "If you can&#39;t stomach calling someone else&#39;s API, then you aren&#39;t going to have much success writing your own implementation either.  I recommend either biting the bullet and learning how to use the Microsoft calls, or finding some other library that you like better that does the same thing and using that.  Trying to write your own implementation would be an enormous commitment and it is unlikely to yield useful results."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1540400662, "post_id": 52974373, "comment_id": 92855342, "body": "This is not even remotely a trivial task. Unless the requirement is to reinvent the wheel (make your own avi library) use a library. You will save weeks to months of work."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1540401017, "post_id": 52974373, "comment_id": 92855525, "body": "You really don&#39;t want to write your own AVI file from scratch, the format is arcane, extremely quirky, and while documented, is not necessarily friendly. Use a library or Windows API for that&#39;s already tested as working. Video encoding is difficult enough as it is."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2100815"}, "edited": false, "score": 0, "creation_date": 1540401063, "post_id": 52974373, "comment_id": 92855547, "body": "Any Windows executable that does anything useful will use the Windows API (possibly indirectly) - trying to avoid it is silly."}, {"owner": {"reputation": 11, "user_id": 10447128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5361a82c97d7a3b78d9e81d5b245ec5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/10447128/zaid"}, "edited": false, "score": 0, "creation_date": 1540401618, "post_id": 52974373, "comment_id": 92855806, "body": "What if i just need to save one frame , is that simplify the task , actually my instructor want me to do that for better understanding of structure of avi file"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 1, "creation_date": 1540402570, "post_id": 52974373, "comment_id": 92856326, "body": "Sounds like you are being set up to write your own as a learning exercise. That pretty much dooms you to A) read the standard. B) implement enough of the standard to perform the tasks you require. It does not seem like there are any worthwhile shortcuts here."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1540403889, "post_id": 52974373, "comment_id": 92857048, "body": "I assume that your professor should at least help with this task in the course lectures. Maybe you are trying to start the assignment too early."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10447128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5361a82c97d7a3b78d9e81d5b245ec5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/10447128/zaid"}, "edited": false, "score": 0, "creation_date": 1540482494, "post_id": 52974683, "comment_id": 92891771, "body": "Thanks for answering ,  i need to store data in chunks , right"}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 1, "last_activity_date": 1540401503, "creation_date": 1540401503, "answer_id": 52974683, "question_id": 52974373, "link": "https://stackoverflow.com/questions/52974373/how-to-create-an-avi-file-from-scratch/52974683#52974683", "title": "How to create an avi file from scratch?", "body": "<blockquote>\n  <p>How to create an ... file ...?</p>\n</blockquote>\n\n<p>You can use the standard file stream API to create a file. To write a binary file, you'll need to use an unformatted output function such as <code>std::ofstream::write()</code>.</p>\n\n<blockquote>\n  <p>... an <em>avi</em> file from scratch?</p>\n</blockquote>\n\n<p>The AVI format is specified by Microsoft: <a href=\"https://docs.microsoft.com/en-us/windows/desktop/directshow/avi-riff-file-reference\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/directshow/avi-riff-file-reference</a></p>\n\n<p>However, you can save a lot of effort by using an existing API.</p>\n"}], "owner": {"reputation": 11, "user_id": 10447128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5361a82c97d7a3b78d9e81d5b245ec5d?s=128&d=identicon&r=PG&f=1", "display_name": "Zaid", "link": "https://stackoverflow.com/users/10447128/zaid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "closed_date": 1540455363, "answer_count": 1, "score": -4, "last_activity_date": 1540401503, "creation_date": 1540400332, "question_id": 52974373, "link": "https://stackoverflow.com/questions/52974373/how-to-create-an-avi-file-from-scratch", "closed_reason": "Needs more focus", "title": "How to create an avi file from scratch?", "body": "<p>My task is to create  an avi file by saving n number of frames in c++ .\nThere are many inbuilt function which can be used to create .avi file as given in below link .</p>\n\n<p><a href=\"https://docs.microsoft.com/en-us/windows/desktop/multimedia/avifile-reference\" rel=\"nofollow noreferrer\">https://docs.microsoft.com/en-us/windows/desktop/multimedia/avifile-reference</a></p>\n\n<p>Using them we can create our own avifile , one such example.is </p>\n\n<p><a href=\"http://www.wischik.com/lu/programmer/avi_utils.html\" rel=\"nofollow noreferrer\">http://www.wischik.com/lu/programmer/avi_utils.html</a></p>\n\n<p>But i want to create it without using Windows.h and vfw.h as they are very extensive.\nSo i need to make my own function of avifilewrite , appendframes etc \nBut i can't find any reference link on internet . </p>\n\n<p>Can anyone please  explain how can i build avifile without using Windows.h and vfw.h .</p>\n\n<p>Thank you ,</p>\n"}, {"tags": ["c++", "this", "language-lawyer", "noexcept"], "answers": [{"comments": [{"owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 0, "creation_date": 1540400767, "post_id": 52974428, "comment_id": 92855401, "body": "Nice find on the bug report. I searched in the gcc bugzilla, but didn&#39;t find this."}, {"owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "reply_to_user": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "edited": false, "score": 1, "creation_date": 1540400818, "post_id": 52974428, "comment_id": 92855429, "body": "@Justin I searched for &quot;this noexcept&quot; :)"}], "tags": [], "owner": {"reputation": 42370, "user_id": 3980929, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/xyKrD.png?s=128&g=1", "display_name": "Rakete1111", "link": "https://stackoverflow.com/users/3980929/rakete1111"}, "is_accepted": true, "score": 10, "last_activity_date": 1540400538, "creation_date": 1540400538, "answer_id": 52974428, "question_id": 52974329, "link": "https://stackoverflow.com/questions/52974329/is-this-allowed-inside-a-noexcept-specification/52974428#52974428", "title": "Is `this` allowed inside a noexcept specification?", "body": "<p>Yes, it is allowed. <a href=\"http://eel.is/c++draft/expr.prim.this#2\" rel=\"noreferrer\">[expr.prim.this]p2</a> says:</p>\n\n<blockquote>\n  <p>If a declaration declares a member function or member function template of a class <code>X</code>, the expression <code>this</code> is a prvalue of type \u201cpointer to <em>cv-qualifier-seq</em> <code>X</code>\u201d between the optional <em>cv-qualifier-seq</em> and the end of the <em>function-definition</em>, [...].</p>\n</blockquote>\n\n<p>The <em>cv-qualifier-seq</em> refers to the cv qualifiers of the member function, which <a href=\"http://eel.is/c++draft/dcl.decl#nt:parameters-and-qualifiers\" rel=\"noreferrer\">appear before the noexcept specifier</a>:</p>\n\n<blockquote>\n<pre><code>parameters-and-qualifiers:\n    ( parameter-declaration-clause ) cv-qualifier-seq[opt] ref-qualifier[opt] \n      noexcept-specifier[opt] attribute-specifier-seq[opt]\n</code></pre>\n</blockquote>\n\n<p>So, <code>this</code> is a valid expression to use in the <em>noexcept-specifier</em>. This was a DR (<a href=\"https://wg21.link/cwg1207\" rel=\"noreferrer\">cwg1207</a>), which gcc doesn't implement. The <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=52869\" rel=\"noreferrer\">bug report</a>.</p>\n"}], "owner": {"reputation": 21009, "user_id": 1896169, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jap8U.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/1896169/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 52974428, "answer_count": 1, "score": 9, "last_activity_date": 1540400538, "creation_date": 1540400125, "question_id": 52974329, "link": "https://stackoverflow.com/questions/52974329/is-this-allowed-inside-a-noexcept-specification", "title": "Is `this` allowed inside a noexcept specification?", "body": "<p>I have some code which requires me to use <code>*this</code>, but I want it to be noexcept friendly:</p>\n\n<pre><code>struct foo;\n\n// Would actually be something with conditional noexcept\nvoid do_something(foo&amp;);\n\nstruct foo {\n    void fn()\n        noexcept(noexcept(::do_something(*this)))\n    {\n        ::do_something(*this);\n    }\n};\n</code></pre>\n\n<p>However, <a href=\"https://godbolt.org/z/3rK4Yz\" rel=\"noreferrer\">gcc rejects this</a>:</p>\n\n<pre><code>&lt;source&gt;:7:43: error: invalid use of 'this' at top level\n         noexcept(noexcept(::do_something(*this)))\n</code></pre>\n\n<p>If I just access a member, gcc is fine:</p>\n\n<pre><code>void do_something(int);\n\nstruct bar {\n    int x;\n\n    void fn()\n        noexcept(noexcept(::do_something(x)))\n    {\n        ::do_something(x);\n    }\n};\n</code></pre>\n\n<p>However, if I access the member through the <code>this</code> pointer, <a href=\"https://godbolt.org/z/HBm5t9\" rel=\"noreferrer\">gcc complains again</a>:</p>\n\n<pre><code>struct baz {\n    int x;\n\n    void fn()\n        noexcept(noexcept(::do_something(this-&gt;x)))\n    {\n        ::do_something(this-&gt;x);\n    }\n};\n</code></pre>\n\n<p>Diagnostic:</p>\n\n<pre><code>&lt;source&gt;:7:42: error: invalid use of 'this' at top level\n         noexcept(noexcept(::do_something(this-&gt;x)))\n</code></pre>\n\n<p>Every other compiler I tried <a href=\"https://godbolt.org/z/8xnUVI\" rel=\"noreferrer\">accepts using <code>this</code> inside the noexcept specification</a>, but I don't actually know if it's gcc that has the bug or all the other compilers. </p>\n\n<p>Can the keyword <code>this</code> be used inside a noexcept specification?</p>\n"}, {"tags": ["c++", "gcc", "clang", "deterministic"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1540399956, "post_id": 52974259, "comment_id": 92854984, "body": "As this isn&#39;t relating to code that isn&#39;t working and needs to be fixed, it&#39;s off-topic here on Stack Overflow. You may want to address this to a forum about compilers (e.g. clang or GCC) to get insight from people who actually build and maintain compilers, and where you can have extended discussion on the subject."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 7, "creation_date": 1540400129, "post_id": 52974259, "comment_id": 92855061, "body": "@tadman StackOverflow is also about tools used by developers, so this really does qualify. Please reread <a href=\"https://stackoverflow.com/help/on-topic\">stackoverflow.com/help/on-topic</a>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 0, "creation_date": 1540400179, "post_id": 52974259, "comment_id": 92855091, "body": "@rubenvb This is not something you can answer succinctly. It&#39;s off-topic and has three votes already. I&#39;m not alone here. I&#39;m not saying it&#39;s a bad question, it&#39;s just in the wrong place."}, {"owner": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1540400276, "post_id": 52974259, "comment_id": 92855144, "body": "@tadman I honestly couldn&#39;t care less how many close votes this got. This is a very answerable question (what code/options trigger this behaviour) about tools commonly used by developers (compilers). I can&#39;t answer it. It seems you can&#39;t, but that doesn&#39;t make this an off-topic question."}, {"owner": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1540400292, "post_id": 52974259, "comment_id": 92855157, "body": "@tadman The question asks for some small code examples. That would be a succinct answer in my view."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 23688, "user_id": 1256041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/NJUNN.jpg?s=128&g=1", "display_name": "sdgfsdh", "link": "https://stackoverflow.com/users/1256041/sdgfsdh"}, "edited": false, "score": 1, "creation_date": 1540400624, "post_id": 52974259, "comment_id": 92855314, "body": "@sdgfsdh That&#39;s only scratching the surface. To answer this question properly would take substantial effort and dialog. It&#39;s a good question, but it&#39;s too broad to answer here. Forums allow a lot more back-and-forth and clarification. Stack Overflow isn&#39;t supposed to work that way."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 69264, "user_id": 256138, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ed9e8c0ff767e38f8fade11f5af00a45?s=128&d=identicon&r=PG", "display_name": "rubenvb", "link": "https://stackoverflow.com/users/256138/rubenvb"}, "edited": false, "score": 2, "creation_date": 1540401208, "post_id": 52974259, "comment_id": 92855610, "body": "AFAICT this question is on-topic per the rules described at @rubenvb&#39;s link above.  In particular, it&#39;s &quot;about a software tool commonly used by programmers&quot;, and is &quot;a practical, answerable problem that is unique to software development&quot;."}, {"owner": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1540406863, "post_id": 52974259, "comment_id": 92858542, "body": "I believe that your question is monstrously broad.  I recommend that you have a look here:  <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html#Code-Gen-Options\" rel=\"nofollow noreferrer\">gcc.gnu.org/onlinedocs/gcc/&hellip;</a>  there are some code examples there.  Maybe after you look there and to the associated links from there you can come back and ask a far more limited question."}, {"owner": {"reputation": 967, "user_id": 3053638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/31d44fd6f71253880b035b066ad1e266?s=128&d=identicon&r=PG", "display_name": "Gaetano", "link": "https://stackoverflow.com/users/3053638/gaetano"}, "reply_to_user": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1540409851, "post_id": 52974259, "comment_id": 92859967, "body": "@Drt None of the paragraphs in your link are remotely related to my question. Could you elaborate why you think my question is broad? - maybe I can clarify my question"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 259, "user_id": 7886227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hec3U.jpg?s=128&g=1", "display_name": "Dr t", "link": "https://stackoverflow.com/users/7886227/dr-t"}, "edited": false, "score": 0, "creation_date": 1540424679, "post_id": 52974259, "comment_id": 92865209, "body": "@Drt questioner is asking for &quot;some examples&quot;, not &quot;every possible instance&quot;.  Surely it&#39;s not beyond reason to ask for a few examples of a phenomenon?"}, {"owner": {"reputation": 967, "user_id": 3053638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/31d44fd6f71253880b035b066ad1e266?s=128&d=identicon&r=PG", "display_name": "Gaetano", "link": "https://stackoverflow.com/users/3053638/gaetano"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1540468184, "post_id": 52974259, "comment_id": 92882204, "body": "@MarcGlisse added a snippet from the gcc docs"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1540472253, "post_id": 52974259, "comment_id": 92884889, "body": "@Gaetano ah, ok, thanks."}], "owner": {"reputation": 967, "user_id": 3053638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/31d44fd6f71253880b035b066ad1e266?s=128&d=identicon&r=PG", "display_name": "Gaetano", "link": "https://stackoverflow.com/users/3053638/gaetano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 715, "favorite_count": 3, "answer_count": 0, "score": 5, "last_activity_date": 1540468126, "creation_date": 1540399825, "last_edit_date": 1540468126, "question_id": 52974259, "link": "https://stackoverflow.com/questions/52974259/what-are-some-examples-of-non-determinism-in-the-c-compiler", "title": "What are some examples of non-determinism in the C++ compiler?", "body": "<p>I'm looking for examples of code that triggers non-determinism in GCC or Clang's compilation process.</p>\n\n<p>One prominent example is the usage of the <code>__DATE__</code> macro.</p>\n\n<p>GCC and Clang have a plethora of compiler flags to control the outcome of <strong>non-deterministic actions within the compiler</strong> eg. <code>-frandom-seed</code> and <code>-fno-guess-branch-probability</code></p>\n\n<p>Are there any small examples that are affected by these flags?</p>\n\n<p>To be more precise: </p>\n\n<pre><code>$ c++ main.cpp -o main &amp;&amp; shasum main\naabbccddee\n\n$ c++ main.cpp -o main &amp;&amp; shasum main\needdccbbaa\n</code></pre>\n\n<p>I'm looking for macro-free code examples where multiple runs of the <strong>compiler</strong> lead to different outputs, but can be fixed by e.g. <code>-frandom-seed</code></p>\n\n<p>EDIT:</p>\n\n<p>related: from the <a href=\"https://gcc.gnu.org/onlinedocs/gcc-3.3.1/gcc/Optimize-Options.html\" rel=\"nofollow noreferrer\">gcc</a> docs:</p>\n\n<pre><code>-fno-guess-branch-probability:\nSometimes gcc will opt to use a randomized model to guess branch probabilities, \nwhen none are available from either profiling feedback (-fprofile-arcs) \nor __builtin_expect. \nThis means that different runs of the compiler on the same program\nmay produce different object code.\nThe default is -fguess-branch-probability at levels -O, -O2, -O3, -Os. \n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 6, "creation_date": 1540398433, "post_id": 52973814, "comment_id": 92854107, "body": "I don&#39;t believe <code>&amp;p[3]</code> is a valid pointer, because <code>p[3]</code> is invalid to start with.  <code>p+3</code> is a valid pointer, that points to the intended location though, as is <code>vec.begin()+3</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540398627, "post_id": 52973814, "comment_id": 92854219, "body": "This is MSVS being &quot;helpful&quot;.  Compile in release mode if you don&#39;t want debugging support."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1540398756, "post_id": 52973814, "comment_id": 92854283, "body": "Also, FWIW, the standard way to do this is <code>auto sum = std::accumulate(std::begin(container_name), std::end(container_name), container_name::value_type{});</code>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540398893, "post_id": 52973814, "comment_id": 92854364, "body": "@NathanOliver i&#39;d be tempted to use <code>0</code> and not <code>container_name::value_type{}</code>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540398982, "post_id": 52973814, "comment_id": 92854412, "body": "@Caleth It is tempting but it can lead to some <a href=\"https://stackoverflow.com/questions/52450363/in-c-when-i-pass-a-value-into-a-function-is-it-always-converted-to-appropiat/52450485#52450485\">major surprises</a> (see bottom half of the answer)"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1540399212, "post_id": 52973814, "comment_id": 92854543, "body": "@NathanOliver yours fails for <code>int[]</code>, mine fails for <code>vector&lt;double&gt;</code>. If only there were something that worked for both"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 1, "creation_date": 1540399318, "post_id": 52973814, "comment_id": 92854605, "body": "@Caleth Yeah.  When I wrote it I was thinking to myself, it would be nice to have a <code>std::value_type</code> type trait that would give use the type for containers or arrays.  Generic programing FTW."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540401999, "post_id": 52973814, "comment_id": 92856009, "body": "@Caleth: Even worse with <code>char</code> and integral promotion."}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 8168483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c739c33f9cbd40c31fed10707f1a8e88?s=128&d=identicon&r=PG&f=1", "display_name": "kerrytazi", "link": "https://stackoverflow.com/users/8168483/kerrytazi"}, "edited": false, "score": 1, "creation_date": 1540398445, "post_id": 52973844, "comment_id": 92854117, "body": "you also can use iterators which in this situation is the same as raw pointers"}, {"owner": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "edited": false, "score": 1, "creation_date": 1540398527, "post_id": 52973844, "comment_id": 92854171, "body": "I know, but I want to know if thi is a bug on vector&lt;&gt; implementation or not, just being curious."}, {"owner": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "edited": false, "score": 0, "creation_date": 1540398901, "post_id": 52973844, "comment_id": 92854369, "body": "Both client and library code is Microsoft property, I only want to know wich one is wrong about this!"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "edited": false, "score": 0, "creation_date": 1540399074, "post_id": 52973844, "comment_id": 92854457, "body": "@RicardoCapurro It is highly unlikely that it is a bug in Microsoft standard library in this very popular class."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1540399280, "post_id": 52973844, "comment_id": 92854584, "body": "I am pretty sure dereferencing <i>one past the end</i> is undefined behavior."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1540399333, "post_id": 52973844, "comment_id": 92854618, "body": "@Galik The pointer to one past the last element is valid, whereas dereferencing it is undefined behaviour. Do not compound these two."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1540399366, "post_id": 52973844, "comment_id": 92854633, "body": "@MaximEgorushkin When you do <code>[3]</code> you dereference it. It is valid but not dereferencable."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1540399559, "post_id": 52973844, "comment_id": 92854747, "body": "@Galik This has been controversial since merely doing <code>p[index]</code> does not result in load/store of a value from <code>p[index]</code>, so that does not constitute accessing the element yet. Neither does <code>&amp;p[index]</code>, unless <code>Element::operator&amp;</code> is overloaded."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1540402061, "post_id": 52973844, "comment_id": 92856047, "body": "@MaximEgorushkin I can&#39;t find where the standard mentions <code>load</code>/<code>store</code> operations in respect of <code>[]</code>. However the <code>C++17</code> standard does say that <i>indirection</i> through an invalid pointer is <code>UB</code> (6.4.7) and that the <code>unary * operator</code> performs indirection (8.3.1.1) and that the <code>a[b]</code> operation is identical to <code>*(a + b)</code> (11.3.4.6)."}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1540400370, "last_edit_date": 1540400370, "creation_date": 1540398329, "answer_id": 52973844, "question_id": 52973814, "link": "https://stackoverflow.com/questions/52973814/problems-referencing-one-past-last-element-on-stdvector-using-operator/52973844#52973844", "title": "Problems referencing one past last element on std::vector&lt;&gt; using operator[]", "body": "<p>It has been a grey area whether obtaining a pointer to the one past the last element with <code>&amp;p[n]</code> is well defined.</p>\n\n<p>However, a pointer to the one past the last element is well defined.</p>\n\n<p>You can avoid such errors by using plain pointers arithmetic:</p>\n\n<pre><code>for (const int* p = numbers.data(); p != numbers.data() + 3; ++p)\n</code></pre>\n\n<p>Or, more generically, iterators:</p>\n\n<pre><code>using std::begin;\nusing std::end;\nfor(auto p = begin(v), q = end(v); p != q; ++p)\n</code></pre>\n\n<p>Or using a <em>range for</em> loop:</p>\n\n<pre><code>for(auto const&amp; element : v)\n</code></pre>\n\n<hr>\n\n<p>There is no good reason to use <code>v[v.size()]</code>, really.</p>\n"}, {"comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1540398664, "post_id": 52973896, "comment_id": 92854236, "body": "<code>p+9999</code> is not valid, pedantically."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1540398727, "post_id": 52973896, "comment_id": 92854268, "body": "@Jarod42 added some clarification on what I mean by &quot;valid&quot;"}, {"owner": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "edited": false, "score": 0, "creation_date": 1540398764, "post_id": 52973896, "comment_id": 92854292, "body": "No, it is not valid to have a pointer point to p[9999] for a int p[3] array."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540398790, "post_id": 52973896, "comment_id": 92854305, "body": "<code>p+9999</code> is an expression that produces an invalid pointer. You can&#39;t do <i>anything</i> with that value"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1540398852, "post_id": 52973896, "comment_id": 92854344, "body": "@Jarod42 is <code>x = p + 9999; std::cout &lt;&lt; x[-9998];</code> not well defined?"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1540399059, "post_id": 52973896, "comment_id": 92854452, "body": "Even if <code>*(p+3)</code> has UB, doesn&#39;t mean that <code>&amp;(*(p+3))</code> necessarily has UB (assuming <code>p</code> is a pointer). There is a standard issue about this (concerning one past last, and null pointer) and there is proposed wording to make those two cases explicitly well defined, but that has not been adopted yet unfortunately (as far as I know)."}, {"owner": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "edited": false, "score": 0, "creation_date": 1540399103, "post_id": 52973896, "comment_id": 92854473, "body": "&amp;p[9999] is unspecified, it may work with any compiler, but it is unspecified acording to the standard and not portable code."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1540399124, "post_id": 52973896, "comment_id": 92854489, "body": "Terminology wise <code>p + 3</code> is <b>valid</b> but not dereferencable. <code>p + 4</code> is not valid. But I don&#39;t think it is UB either."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1540399202, "post_id": 52973896, "comment_id": 92854540, "body": "@user2079303 I can&#39;t find it at the moment, but doesn&#39;t the standard say something about any part of the program having UB makes the whole program UB? So if <code>*(p+3)</code> is UB then the very existence of that statement anywhere in the program disqualifies the whole thing?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1540399214, "post_id": 52973896, "comment_id": 92854544, "body": "In practice <code>p + 9999</code> might overflow, and pointer overflow is not defined."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "edited": false, "score": 2, "creation_date": 1540399244, "post_id": 52973896, "comment_id": 92854560, "body": "@RicardoCapurro please reread my answer about the difference between <code>&amp;p[x]</code> and <code>p+x</code>. One is dereferencing and causing undefined behavior. The other is only pointer arithmetic"}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1540399289, "post_id": 52973896, "comment_id": 92854590, "body": "@Jarod42 fair enough. Could the same be said of <code>p+3</code> then or is one past last special?"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1540399387, "post_id": 52973896, "comment_id": 92854646, "body": "@user2079303 no, <code>*(p+3)</code> being UB really does mean <code>&amp;(*(p+3))</code> is UB, by the standard. A particular implementation <i>may</i> document a particular behaviour in either case, which is perfectly allowable."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1540399576, "post_id": 52973896, "comment_id": 92854758, "body": "One past last has special treatment. (also the case for <code>&amp;var + 1</code> (treating variable as &quot;array of 1 element&quot;))."}, {"owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "edited": false, "score": 0, "creation_date": 1540399597, "post_id": 52973896, "comment_id": 92854773, "body": "@All I&#39;ve edited out the <code>p+9999</code> part as I agree it could be UB due to overflow on the arithmetic. Thanks for all of the great input here!"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540400169, "post_id": 52973896, "comment_id": 92855083, "body": "@Caleth It may be the case that <code>&amp;(*(p+3))</code> is UB in the standard as it is written (I make no claim either way), but that does not necessarily need to follow from <code>*(p+3)</code> being UB. Whether <code>&amp;(*(p+3))</code> <i>should</i> be UB is another matter, and in my opinion, it shouldn&#39;t be if only for compatibility with C where it unambiguously isn&#39;t UB."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1540400321, "post_id": 52973896, "comment_id": 92855174, "body": "@user2079303 <code>*</code> is used to <i>dereference</i> a pointer. One past the end pointers are <b>not</b> dereferenceable."}], "tags": [], "owner": {"reputation": 13849, "user_id": 2602718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CQ4Gj.jpg?s=128&g=1", "display_name": "scohe001", "link": "https://stackoverflow.com/users/2602718/scohe001"}, "is_accepted": false, "score": 1, "last_activity_date": 1540400108, "last_edit_date": 1540400108, "creation_date": 1540398522, "answer_id": 52973896, "question_id": 52973814, "link": "https://stackoverflow.com/questions/52973814/problems-referencing-one-past-last-element-on-stdvector-using-operator/52973896#52973896", "title": "Problems referencing one past last element on std::vector&lt;&gt; using operator[]", "body": "<blockquote>\n  <p>So, &amp;p[0], &amp;p[1], &amp;p[2] and &amp;p[3] are valid pointers</p>\n</blockquote>\n\n<p><strong>No.</strong> The subscript operator (<code>p[x]</code>) for arrays is syntactic sugar for <code>*(p+x)</code>, so <code>&amp;p[3]</code> is actually doing <code>&amp;(*(p+3))</code> but <code>*(p+3)</code> is undefined behavior!!</p>\n\n<p>If all you want is the address of one past last, <code>p+3</code> is perfectly valid. This will use pointer arithmetic and not dereference anything.</p>\n\n<blockquote>\n  <p>If I replace the int array with a std::vector everything should be fine</p>\n</blockquote>\n\n<p>Again, no! If you try to dereference a memory location you haven't allocated, you <em>will</em> get undefined behavior. <code>std::vector</code> says nothing about <code>v[v.length()]</code> being allocated for you, so this is undefined behavior.</p>\n\n<blockquote>\n  <p>the implementation asumes that using operator[] we are automatically referencing the underlaying value, wich is not the case</p>\n</blockquote>\n\n<p><em>Yes it is!!</em> Read <a href=\"https://en.cppreference.com/w/cpp/container/vector/operator_at\" rel=\"nofollow noreferrer\">the cppreference page on <code>operator[]</code></a>: \"<em>Returns a reference to the element at specified location pos. No bounds checking is performed.</em>\" Just like with the raw arrays, the subscript operator here returns a reference to the underlying value, meaning there's a dereference step involved here!</p>\n"}, {"tags": [], "owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "is_accepted": false, "score": 2, "last_activity_date": 1540399660, "creation_date": 1540399660, "answer_id": 52974218, "question_id": 52973814, "link": "https://stackoverflow.com/questions/52973814/problems-referencing-one-past-last-element-on-stdvector-using-operator/52974218#52974218", "title": "Problems referencing one past last element on std::vector&lt;&gt; using operator[]", "body": "<p>The debug iterators library in Visual C++ is correctly reporting the problem, and the problem isn't subtle.</p>\n\n<p>According to the standard, [sequence.reqmts] Table 101, the expression <code>a[n]</code> for a sequence container <code>a</code> of a type providing <code>operator[]</code> (<code>std::vector</code> does, as does <code>basic_string</code>, <code>deque</code>, and <code>array</code>), has the operational semantics of <code>*(a.begin()+n)</code>. However, in the case you're running, <code>a.begin()+n</code> will be equivalent to <code>a.end()</code>. Therefore, the result is <code>*(a.end())</code> <em>before</em> applying the address-of operator.</p>\n\n<p>Dereferencing the <code>end()</code> iterator of a container invokes <em>undefined behavior</em>. Visual C++ is correct in reporting the assertion, and you would do well to change your enumeration strategy. </p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "edited": false, "score": 0, "creation_date": 1540401745, "post_id": 52974522, "comment_id": 92855876, "body": "Using &amp;numbers[3] is valid on raw arrays, since you are not accessing the element, only the pointer.I suspect it is also valid for std::vector&lt;&gt;."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "edited": false, "score": 1, "creation_date": 1540402682, "post_id": 52974522, "comment_id": 92856398, "body": "@RicardoCapurro According to the standard <code>numbers[3]</code> is the same as <code>*(numbers + 3)</code> (11.3.4.6) and <code>*</code> on a pointer dereferences the object (8.3.1.1)."}, {"owner": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "edited": false, "score": 0, "creation_date": 1540403962, "post_id": 52974522, "comment_id": 92857074, "body": "Where in the code you are accessing numbers[3]? numbers[3] is not the same as &amp;numbers[3] ..."}, {"owner": {"reputation": 830, "user_id": 1794179, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/BnY2x.jpg?s=128&g=1", "display_name": "Sceptical Jule", "link": "https://stackoverflow.com/users/1794179/sceptical-jule"}, "edited": false, "score": 0, "creation_date": 1549838621, "post_id": 52974522, "comment_id": 96036365, "body": "It is the same. The C++ standard and the operator precedence table say you&#39;re wrong so stop arguing."}], "tags": [], "owner": {"reputation": 830, "user_id": 1794179, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/BnY2x.jpg?s=128&g=1", "display_name": "Sceptical Jule", "link": "https://stackoverflow.com/users/1794179/sceptical-jule"}, "is_accepted": false, "score": 3, "last_activity_date": 1540406120, "last_edit_date": 1540406120, "creation_date": 1540400908, "answer_id": 52974522, "question_id": 52973814, "link": "https://stackoverflow.com/questions/52973814/problems-referencing-one-past-last-element-on-stdvector-using-operator/52974522#52974522", "title": "Problems referencing one past last element on std::vector&lt;&gt; using operator[]", "body": "<p>Dereferencing a past-last element results in undefined behaviour. If you declare <code>std::vector&lt;int&gt; numbers(3)</code> then the last element you are allowed to access is <code>numbers[2]</code>. Same story with raw arrays.</p>\n\n<p>Avoid using raw arrays if you can:</p>\n\n<pre><code>int x() {\n    std::vector&lt;int&gt; numbers(3); \n    //...\n    int sum = 0;\n\n    for (auto value : numbers)\n        sum += value;\n\n    return sum;\n}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4114674, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lyP8Y6nS2Xc/AAAAAAAAAAI/AAAAAAAAAAA/3u5rwj0zj3o/photo.jpg?sz=128", "display_name": "Ricardo Capurro", "link": "https://stackoverflow.com/users/4114674/ricardo-capurro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1540406120, "creation_date": 1540398190, "last_edit_date": 1540398387, "question_id": 52973814, "link": "https://stackoverflow.com/questions/52973814/problems-referencing-one-past-last-element-on-stdvector-using-operator", "title": "Problems referencing one past last element on std::vector&lt;&gt; using operator[]", "body": "<p>Given this valid C or C++ code</p>\n\n<pre><code>int x() {\n    int numbers[3]; // Lets suppose numbers are filled in with values\n    int sum = 0;\n    for (const int* p = &amp;numbers[0]; p != &amp;numbers[3]; ++p)\n        sum += *p;\n    return sum;\n}\n</code></pre>\n\n<p>This code uses pointer arithmetics and as far as I know it is valid to have a pointer point to the one past last element inside an array, referencing that pointer is uspecified but we can have a pointer point to that position.\nSo, &amp;p[0], &amp;p[1], &amp;p[2] and &amp;p[3] are valid pointers, and p[0], p[1] and p[2] are valid values.</p>\n\n<p>If I replace the int array with a std::vector everything should be fine, we get this code</p>\n\n<pre><code>#include &lt;vector&gt;\nint x() {\n    std::vector&lt;int&gt; numbers(3);\n    int sum = 0;\n    for (const int* p = &amp;numbers[0]; p != &amp;numbers[3]; ++p)\n        sum += *p;\n    return sum;\n}\n</code></pre>\n\n<p>But running under Visual C++ 2017 in DEBUG mode I get this exception \"vector subscript out of range\", that is triggered from MS STL library because the implementation asumes that using operator[] we are automatically referencing the underlaying value, wich is not the case.\nThis is MS STL code that do the bounds check ...</p>\n\n<pre><code>    _NODISCARD _Ty&amp; operator[](const size_type _Pos)\n        {   // subscript mutable sequence\n #if _ITERATOR_DEBUG_LEVEL == 2\n        if (size() &lt;= _Pos)\n            {   // report error\n            _DEBUG_ERROR(\"vector subscript out of range\");\n            }\n #elif _ITERATOR_DEBUG_LEVEL == 1\n        _SCL_SECURE_VALIDATE_RANGE(_Pos &lt; size());\n #endif /* _ITERATOR_DEBUG_LEVEL */\n\n        return (this-&gt;_Myfirst()[_Pos]);\n        }\n</code></pre>\n\n<p>I don\u00b4t get the error if I replace &amp;numbers[0] and &amp;numbers[3] with numbers.begin() and numbers.end().</p>\n\n<p><strong>I agree this is really ugly code, but I simplify the real code just to expose the bug.</strong></p>\n\n<p>The original code was using &amp;vec[0] on a vector with zero elements.</p>\n\n<p>So my question is:</p>\n\n<p><strong>Is this a BUG on Microsoft Visual C++ STL implementation or there is some restriction on operator[] for vectors&lt;>?</strong></p>\n\n<p>I know that replacing [] by at() would be a bug, but I understand &amp;vec[size] should still be valid for std::vector&lt;></p>\n"}, {"tags": ["c++", "controller", "sdl", "xbox"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1540399301, "post_id": 52973799, "comment_id": 92854595, "body": "This is a question for a search engine. Find the documentation on the controller in question and go from there."}, {"owner": {"reputation": 2121, "user_id": 10413416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceedf65b5c2b247ee12ed7b3420ee77d?s=128&d=identicon&r=PG&f=1", "display_name": "Infern0", "link": "https://stackoverflow.com/users/10413416/infern0"}, "edited": false, "score": 0, "creation_date": 1540399839, "post_id": 52973799, "comment_id": 92854918, "body": "Hello, please refer to <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> center and correct your question."}], "answers": [{"tags": [], "owner": {"reputation": 7838, "user_id": 383045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/72da00bd74a5744f9cb89d1a52a6d447?s=128&d=identicon&r=PG", "display_name": "yzt", "link": "https://stackoverflow.com/users/383045/yzt"}, "is_accepted": true, "score": 1, "last_activity_date": 1540399647, "creation_date": 1540399647, "answer_id": 52974214, "question_id": 52973799, "link": "https://stackoverflow.com/questions/52973799/sdl-joystick-button-pressed-c/52974214#52974214", "title": "SDL Joystick Button Pressed / C++", "body": "<p>You first have to have had initialized SDL's joystick support (I'm assuming SDL2 here, but lower versions shouldn't be that different.) Like so:</p>\n\n<pre><code>SDL_InitSubSystem(SDL_INIT_JOYSTICK);  // bitwise OR with other subsystems you need,\n                                       // e.g. SDL_INIT_VIDEO | SDL_INIT_JOYSTICK\n</code></pre>\n\n<p>Then you have to open a given joystick (usually, you enumerate all joysticks and let the user choose one or pick one for them.) Like so:</p>\n\n<pre><code>SDL_Joystick * joy = SDL_JoystickOpen(0);  // Use 1, 2, etc. for the other joysticks,\n                                           // You should use SDL_NumJoysticks() then.\n</code></pre>\n\n<p>And don't forget to \"close\" the joystick when you are done with it (<code>SDL_JoystickClose(joy)</code>.)</p>\n\n<p>Anyways, when you have done all these (typically only once, and outside of your game loop,) then you check the button you are interested in like this:</p>\n\n<pre><code>if (SDL_JoystickGetButton(joy, button_number) != 0)\n    // Button was pressed; yay!\n</code></pre>\n\n<p>To figure out the number of the button, you can do some experiments. IIRC, the Xbox360 controller's buttons and axes stay at the same numbers pretty much always.</p>\n\n<p>Note that SDL also has the \"game controller\" API which is closely related to the ones above; just use <code>GameController</code> instead of <code>Joystick</code> in the function names.</p>\n"}], "owner": {"reputation": 77, "user_id": 8890483, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zGiAcZmZUQ8/AAAAAAAAAAI/AAAAAAAAAqQ/lMi2yhoQtMc/photo.jpg?sz=128", "display_name": "kogoro mori", "link": "https://stackoverflow.com/users/8890483/kogoro-mori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "accepted_answer_id": 52974214, "answer_count": 1, "score": -1, "last_activity_date": 1540399647, "creation_date": 1540398121, "question_id": 52973799, "link": "https://stackoverflow.com/questions/52973799/sdl-joystick-button-pressed-c", "title": "SDL Joystick Button Pressed / C++", "body": "<p>How Can I recognize if a certain Button on a Controller is pressed or not ?\nFor Example the A Button on the Xbox 360 Controller...</p>\n"}, {"tags": ["c++", "directx", "directx-11"], "answers": [{"tags": [], "owner": {"reputation": 2821, "user_id": 1339365, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e9e542a5a5026a0f79840edd233de71?s=128&d=identicon&r=PG", "display_name": "Gnietschow", "link": "https://stackoverflow.com/users/1339365/gnietschow"}, "is_accepted": true, "score": 1, "last_activity_date": 1540896290, "creation_date": 1540896290, "answer_id": 53062575, "question_id": 52973635, "link": "https://stackoverflow.com/questions/52973635/drawindexedinstanced-with-a-different-index-count-per-instance-directx11/53062575#53062575", "title": "DrawIndexedInstanced with a different Index Count per Instance (Directx11)", "body": "<p>As stated in the <a href=\"https://msdn.microsoft.com/de-de/library/windows/desktop/ff476410(v=vs.85).aspx\" rel=\"nofollow noreferrer\">documentation</a>, instanced drawing is to </p>\n\n<blockquote>\n  <p>[...] reusing the same geometry to draw multiple objects in a scene. </p>\n</blockquote>\n\n<p>It improves performance by not swapping the vertex data, but reusing it, which seems not be the case for your data, where the vertex sources are different for each draw call.</p>\n\n<p>So you'll have to stick to single draw calls, but to improve your performance you could stage them after each other. Each state change has a certain cost being submitted to the gpu, if you keep your shader set as it is used for all draw calls, you can save some performance by doing all draw calls with the same shader and uniform values after each other and only switch if it is needed.</p>\n"}], "owner": {"reputation": 1655, "user_id": 6211069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/70af8da1b0955b62941c38d3da6f398c?s=128&d=identicon&r=PG&f=1", "display_name": "pulp_user", "link": "https://stackoverflow.com/users/6211069/pulp-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 322, "favorite_count": 0, "accepted_answer_id": 53062575, "answer_count": 1, "score": 0, "last_activity_date": 1540896290, "creation_date": 1540397588, "question_id": 52973635, "link": "https://stackoverflow.com/questions/52973635/drawindexedinstanced-with-a-different-index-count-per-instance-directx11", "title": "DrawIndexedInstanced with a different Index Count per Instance (Directx11)", "body": "<p>I have a lot of cases in my application, where I make drawcalls using the same shader with different uniform values and thought about instancing the drawcalls. However, the drawcalls have a varying number of triangles in my case. </p>\n\n<p>As far as I understand <code>DrawIndexedInstanced</code>, it only permits to draw multiple instances with the same number of triangles/indices, so I guess I can't use this.</p>\n\n<p>I thought that <code>DrawIndexedInstancedIndirect</code> may help, but that only seems to execute multiple calls to <code>DrawIndexedIstanced</code> basically.</p>\n\n<p>Is there a way in Directx11 to draw instanced with a different number of triangles for each instance, or will I have to stay with normal drawcalls?</p>\n"}, {"tags": ["c++", "audio", "windows-10", "audio-streaming", "endpoint"], "comments": [{"owner": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "edited": false, "score": 0, "creation_date": 1540437081, "post_id": 52973464, "comment_id": 92867830, "body": "For what it&#39;s worth, VLC saves its output device for me, when set within VLC itself.  VLC 3.0.3."}, {"owner": {"reputation": 563, "user_id": 9248774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e0b3652fa90328ad23ceca3e535895?s=128&d=identicon&r=PG", "display_name": "FatalBulletHit", "link": "https://stackoverflow.com/users/9248774/fatalbullethit"}, "reply_to_user": {"reputation": 145537, "user_id": 362536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/da5816365344305a614343a4065a2786?s=128&d=identicon&r=PG", "display_name": "Brad", "link": "https://stackoverflow.com/users/362536/brad"}, "edited": false, "score": 0, "creation_date": 1540456791, "post_id": 52973464, "comment_id": 92875437, "body": "@Brad Thanks for the comment, but I&#39;m well aware of this (as noted in the observations). I chose VLC as an example as it&#39;s a program which is well known and widely accesible by a lot of people so that the recreation of the issue is at a minimum effort.  I will add an additional note to prevent confusion, tho. :)"}], "answers": [{"comments": [{"owner": {"reputation": 563, "user_id": 9248774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e0b3652fa90328ad23ceca3e535895?s=128&d=identicon&r=PG", "display_name": "FatalBulletHit", "link": "https://stackoverflow.com/users/9248774/fatalbullethit"}, "edited": false, "score": 1, "creation_date": 1541349043, "post_id": 53141985, "comment_id": 93177364, "body": "While this is not explicitly what I was searching for I will definitley give this a try and report back, thank you!"}, {"owner": {"reputation": 563, "user_id": 9248774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e0b3652fa90328ad23ceca3e535895?s=128&d=identicon&r=PG", "display_name": "FatalBulletHit", "link": "https://stackoverflow.com/users/9248774/fatalbullethit"}, "edited": false, "score": 1, "creation_date": 1541438282, "post_id": 53141985, "comment_id": 93208808, "body": "Check &#39;Edit - 05/11/18&#39; at the end of the question. ^^"}, {"owner": {"reputation": 3645, "user_id": 306036, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c1dfd4d4e83c6cdec5ea7045b32bc05?s=128&d=identicon&r=PG", "display_name": "Ryan The Leach", "link": "https://stackoverflow.com/users/306036/ryan-the-leach"}, "edited": false, "score": 1, "creation_date": 1547672061, "post_id": 53141985, "comment_id": 95276252, "body": "Just installing Ear Trumpet was enough for the setting to finally stick for Sea of Thieves. Will be interesting if it survives a restart."}], "tags": [], "owner": {"reputation": 517, "user_id": 8666381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2ee3f0846b914974f404977489f7cd9?s=128&d=identicon&r=PG", "display_name": "Large", "link": "https://stackoverflow.com/users/8666381/large"}, "is_accepted": false, "score": 3, "last_activity_date": 1541342639, "creation_date": 1541342639, "answer_id": 53141985, "question_id": 52973464, "link": "https://stackoverflow.com/questions/52973464/set-audio-endpoint-devices-application-specific-programmatically/53141985#53141985", "title": "Set audio endpoint devices application specific (programmatically)", "body": "<p>I do not have any solution regarding a programming language to handle such events.</p>\n\n<p>But I can recommend EarTrumpet app to handle this change more quickly <a href=\"https://www.theverge.com/2018/6/13/17457778/eartrumpet-windows-10-audio-app\" rel=\"nofollow noreferrer\">https://www.theverge.com/2018/6/13/17457778/eartrumpet-windows-10-audio-app</a></p>\n\n<p>(Windows store: <a href=\"https://www.microsoft.com/en-us/p/eartrumpet/9nblggh516xp?ranMID=24542&amp;ranEAID=nOD%2FrLJHOac&amp;ranSiteID=nOD_rLJHOac-hUn6PgKuMKwQLdrzRqnPTA&amp;epi=nOD_rLJHOac-hUn6PgKuMKwQLdrzRqnPTA&amp;irgwc=1&amp;OCID=AID681541_aff_7593_1243925&amp;tduid=%28ir__qwqlg6jd0jba3y9hpnbvikaite2xk6kuyv9udtr100%29%287593%29%281243925%29%28nOD_rLJHOac-hUn6PgKuMKwQLdrzRqnPTA%29%28%29&amp;irclickid=_qwqlg6jd0jba3y9hpnbvikaite2xk6kuyv9udtr100&amp;activetab=pivot:overviewtab\" rel=\"nofollow noreferrer\">https://www.microsoft.com/en-us/p/eartrumpet/9nblggh516xp?ranMID=24542&amp;ranEAID=nOD%2FrLJHOac&amp;ranSiteID=nOD_rLJHOac-hUn6PgKuMKwQLdrzRqnPTA&amp;epi=nOD_rLJHOac-hUn6PgKuMKwQLdrzRqnPTA&amp;irgwc=1&amp;OCID=AID681541_aff_7593_1243925&amp;tduid=%28ir__qwqlg6jd0jba3y9hpnbvikaite2xk6kuyv9udtr100%29%287593%29%281243925%29%28nOD_rLJHOac-hUn6PgKuMKwQLdrzRqnPTA%29%28%29&amp;irclickid=_qwqlg6jd0jba3y9hpnbvikaite2xk6kuyv9udtr100&amp;activetab=pivot:overviewtab</a> )</p>\n\n<p>I will update the answer if I find a easy way to script/program a change of output on each app.</p>\n"}], "owner": {"reputation": 563, "user_id": 9248774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85e0b3652fa90328ad23ceca3e535895?s=128&d=identicon&r=PG", "display_name": "FatalBulletHit", "link": "https://stackoverflow.com/users/9248774/fatalbullethit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1827, "favorite_count": 5, "answer_count": 1, "score": 20, "last_activity_date": 1547986850, "creation_date": 1540397042, "last_edit_date": 1547986850, "question_id": 52973464, "link": "https://stackoverflow.com/questions/52973464/set-audio-endpoint-devices-application-specific-programmatically", "title": "Set audio endpoint devices application specific (programmatically)", "body": "<p><strong>Link to the <a href=\"https://aka.ms/AA3ts1d\" rel=\"nofollow noreferrer\">bug report</a> on 'Feedback Hub'</strong></p>\n\n<hr>\n\n<p>An audio endpoint device, from here on referred to as 'endpoint', is a physical or virtual audio output or input device.</p>\n\n<hr>\n\n<p>With the Windows 10 April Update 1803 the long overdue 'App volume and device preferences' have been introduced. These settings allow more control over audio stream management as it is now possible to set different endpoints for different applications, no matter whether that particular application comes with an endpoint selection or not.</p>\n\n<p>However, there is an issue where the audio of a program, whose endpoint is non-default, is streamed through the default endpoint (or not at all) after it has been closed and launched again, although the endpoint is displayed correctly in the settings:</p>\n\n<p><a href=\"https://i.imgur.com/ua4z5Bw.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.imgur.com/ua4z5Bw.gif\" alt=\"Issue Recreation\"></a></p>\n\n<p>As far as I know the issue can be recreated on a Windows 10 machine (version 1803 or higher) with any virtual or physical endpoint and an affected program. I used 'VLC Media Player' in this example (disregarding the fact that it comes with an endpoint selection) as it is well known and widely accessible, which should make it easier to recreate the issue.</p>\n\n<hr>\n\n<p><strong>What I'm searching for...</strong></p>\n\n<p>... is a programmatically solution to switch between endpoints, which ideally can be launched in form of a script to set the correct endpoint with an application launch.</p>\n\n<p>For my purpose it would be enough to have to adjust the device instance path manually, as the device would be always the same, but I'm not going to complain about a solution which retrieves the device instance path from the registry, too.</p>\n\n<ul>\n<li>Defined endpoints and the device instance path of the device they are using can be retrieved from the subkeys of the key <code>HKEY_USERS\\# YOUR SID #\\Software\\Microsoft\\Multimedia\\Audio\\DefaultEndpoint</code>. I don't know how windows generates the name of the subkeys or where they can be found. If I had to take a wild guess, I'd say these are Application IDs (feel free to correct me if I'm wrong).</li>\n<li>The device instance path itself can be found in the Device Manager (under 'Audio inputs and outputs' double click the desired device, navigate to the tab 'Details' and select 'Device instance path' from the 'Property' drop-down menu).</li>\n<li>Additionally the entry about <a href=\"https://docs.microsoft.com/en-us/windows/desktop/CoreAudio/audio-endpoint-devices\" rel=\"nofollow noreferrer\">Audio Endpoint Devices</a> and <a href=\"https://docs.microsoft.com/en-us/windows/desktop/CoreAudio/stream-management\" rel=\"nofollow noreferrer\">Stream Management</a> in the Microsoft Docs might be helpful, but that is way above my head.</li>\n</ul>\n\n<hr>\n\n<p><strong>A possible but impractical workaround...</strong> </p>\n\n<p>... would be, to manually set another endpoint for the application and switch back to desired endpoint at every launch of said application (as shown above).</p>\n\n<p>But not just takes this at least 10 seconds at each and every launch, you might even forget to do this as the audio might just get streamed through the default endpoint <code>*\u00b9</code>.</p>\n\n<p>The alternative to the latter is, that no audio will be streamed at all <code>*\u00b2</code> or in some cases it actually works <code>*\u00b3</code>. </p>\n\n<p><code>*\u00b9</code> e.g.: VLC Media Player, Tom Clancy's Rainbow Six Siege (although the audio will be streamed correctly during the splash screens)</p>\n\n<p><code>*\u00b2</code> e.g.: Call of Duty 4: Modern Warfare, Call of Duty: Modern Warfare 2, Call of Duty: Modern Warfare 3</p>\n\n<p><code>*\u00b3</code> e.g.: Window Media Player, Microsoft Edge, Firefox</p>\n\n<p><strong>Observations</strong></p>\n\n<ul>\n<li>VLC Media Player comes with an endpoint selection, but so does TeamSpeak 3 and, unlike VLC, it skips the Windows settings completely.</li>\n<li>Call of Duty not streaming any audio most likely is connected to the engine as I didn't encounter any other application doing something similar.</li>\n<li>Windows Media Player, Microsoft Edge and Firefox are the only programs (I tested so far) which work fine. They have no endpoint selection (I'd know of) and will use the correct endpoint after closing and launching it again. It should be noted, however, that Firefox and Microsoft Edge will show multiple instances in the \"App volume and device preferences\" when adjusting the endpoint.</li>\n</ul>\n\n<hr>\n\n<p><strong>Disclaimer</strong></p>\n\n<p>I already tried two 3rd party softwares: 'Audio Router', which didn't work at all and 'CheVolume', which doesn't solve the issue and constantly crashes while doing so.</p>\n\n<p>This question is based on one I asked over at Super User (<a href=\"https://superuser.com/questions/1348988/powershell-adjust-per-app-audio-device-output\">here</a>), where I didn't get an answer I was able to work with due to my lack of knowledge regarding actual programming (I'm only somewhat familiar with Batch and PowerShell). I'm well aware that neither Stack Overflow nor Super User are script writing services, however, the issue is not being fixed with the Windows 10 October Update 1809 and I see this as a problem which is affecting not just me and with that would be helpful for multiple people after me. Feel free to write a comment or propose an edit if you see this differently.</p>\n\n<p>I'm also not sure whether the tags 'audio-streaming' and 'endpoint' should be used in this context, please propose an edit if they shouldn't or you can think of any better.</p>\n\n<hr>\n\n<hr>\n\n<h1>Edit - 05/11/18</h1>\n\n<p>Using the 3rd party software 'EarTrumpet' I was able to overcome the issue with the 'Call of Duty' games (no audio at all after restarting), however, 'VLC Media Player' would not restart after I assigned a non-default endpoint with 'EarTrumpet' until I closed 'EarTrumpet' again and the issue with 'Tom Clancy's Rainbow Six Siege' remains the same.</p>\n\n<hr>\n\n<h1>Edit - 18/01/19</h1>\n\n<p>Added link to a <a href=\"https://aka.ms/AA3ts1d\" rel=\"nofollow noreferrer\">bug report</a> I created on the 'Feedback Hub' 2 month ago.</p>\n\n<hr>\n\n<h1>Edit - 20/01/19</h1>\n\n<p>After doing some testing again it should be noted that having 'EarTrumpet' run in the background will keep a non-default endpoint for 'VLC Media Player' across restarts, however, 'VLC Media Player' will only (reliably) restart when the non-default endpoint was set in the 'App volume and device preferences'.</p>\n"}, {"tags": ["c++", "naming-conventions", "dllexport", "name-mangling", "stdcall"], "comments": [{"owner": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 3, "creation_date": 1540396999, "post_id": 52973402, "comment_id": 92853275, "body": "Your exported function has a parameter of type <code>string</code>. Are you aware that clients of your dll must be compiled with the same compiler version. The different <code>std::string</code> implementations of different compiler and versions are not compatible."}, {"owner": {"reputation": 3140, "user_id": 1624844, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SXXv0.png?s=128&g=1", "display_name": "Amir-Mousavi", "link": "https://stackoverflow.com/users/1624844/amir-mousavi"}, "reply_to_user": {"reputation": 17170, "user_id": 1671066, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/bd4c9461f2d17a884fba66eeed20e320?s=128&d=identicon&r=PG", "display_name": "Micha Wiedenmann", "link": "https://stackoverflow.com/users/1671066/micha-wiedenmann"}, "edited": false, "score": 0, "creation_date": 1540397254, "post_id": 52973402, "comment_id": 92853445, "body": "It is only abut using std::string? If I use i.e. const char* the exeption will be gone?"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 0, "creation_date": 1540397380, "post_id": 52973402, "comment_id": 92853530, "body": "Name mangling (or actually the entire ABI) is <i>not</i> standardized. You need to build <i>everything</i> with the <i>exact same</i> compiler. There are no standard rules for this."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1540397714, "post_id": 52973402, "comment_id": 92853714, "body": "I believe there is binary compatibility between VS 2015 and VS 2017 but no compatibility between VS and any other compiler version or vendor. <a href=\"https://docs.microsoft.com/en-us/cpp/porting/binary-compat-2015-2017?view=vs-2017\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/cpp/porting/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1540397859, "post_id": 52973402, "comment_id": 92853791, "body": "@drescherjm Yeah. MS did make that guarantee. But that&#39;s just MS making a promise for <i>specific versions</i> of <i>their</i> tools. In <i>general</i>, nothing is guaranteed."}], "owner": {"reputation": 3140, "user_id": 1624844, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SXXv0.png?s=128&g=1", "display_name": "Amir-Mousavi", "link": "https://stackoverflow.com/users/1624844/amir-mousavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540396848, "creation_date": 1540396848, "question_id": 52973402, "link": "https://stackoverflow.com/questions/52973402/c-dll-function-export-naming-conventions-mangling", "title": "c++ dll function export naming conventions (mangling)", "body": "<p>I am totally new in C++ and starting with creating a simple dll and console app that tests the <code>dll</code>. The <code>dll</code> plugin afterwards should work on x86 machines (diag tools, ECU or PLC). The samples given to me that I fallow the same structure exports dll function as __sdcall. so my helloWorld project looks like:</p>\n\n<pre><code>plugin.dll\n-----------\nplugin.h\n#pragma once\n#include \"types.h\"\n#define EXPORT extern \"C\" __declspec (dllexport)\nEXPORT S32 WINAPI Greetings(string *str);\n\nplugin.cpp\n#include \"plugin.h\"\n#include \"types.h\"\nS32 __stdcall Greetings(string *str){*str = \"Hello From Plugin!\"; return -1;}\n</code></pre>\n\n<p>and the console app looks like: (both are in same solution, <code>project/properties/cc++/adnvances/callingConvention = __cdecl (/Gd)</code>)</p>\n\n<p>VS settings - Solution configuration=debug, Solution Platforms=x86</p>\n\n<pre><code>main.cpp\nHMODULE DllHandler = ::LoadLibrary(L\"plugin.dll\");\nstring greetingText;\ntypedef U32(*Type)(string*);\nType greetings = reinterpret_cast&lt;Type&gt;(GetProcAddress(DllHandler, \"Greetings\"));\ngreetings(&amp;greetingText);\ncout &lt;&lt; greetingText &lt;&lt; endl;\n</code></pre>\n\n<p>Now, without <code>plugin.def</code> the <code>GetProcAddress(DllHandler, \"Greetings\")</code> returns null (0x000000) with the plugin.def (alongside with EXPORT) I get the <code>Greetings</code> with decoration <code>plugin.dll!Greetings@4</code> the call will succeed but get </p>\n\n<blockquote>\n  <p>Run-Time Check Failure #0 - The value of ESP was not properly saved across a function call.  This is usually a result of calling a function declared with one calling convention with a function pointer declared with a different calling convention.</p>\n</blockquote>\n\n<p>also no casting with naming convention is allowed. \nI red many posts about <code>__cdecl</code> <code>__stdcall</code> but mostly explaining the assembly level that who cleans the stack, or using either <code>.def</code> or <code>extern \"C\"</code> with export.</p>\n\n<p>I totally got lost in naming convention and mangling in C++. is related to local project setting or the dll will run on all environments? specially in this sample project how should I handle it?</p>\n"}, {"tags": ["c++", "malloc"], "comments": [{"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1540396221, "post_id": 52973161, "comment_id": 92852746, "body": "<i>Why</i> are you using <code>malloc</code> in a C++ program?"}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540396241, "post_id": 52973161, "comment_id": 92852767, "body": "Add diagnostics. Printf the value of <code>fd</code> after the call to <code>open</code>. Print the value of <code>image_size</code>. Print the return value from <code>read</code>."}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1540396584, "post_id": 52973161, "comment_id": 92853000, "body": "@JesperJuhl There&#39;s no C++ in it anywhere. It is really a C program."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "reply_to_user": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "edited": false, "score": 0, "creation_date": 1540396768, "post_id": 52973161, "comment_id": 92853125, "body": "@ZanLynx Agreed. But OP claims C++ so I assume it&#39;s compiled with a C++ compiler. And the question is tagged &quot;c++&quot; as well. And if it is supposed to be treated as C++ then <code>malloc</code> is a strange choice."}], "answers": [{"comments": [{"owner": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 2, "creation_date": 1540396575, "post_id": 52973299, "comment_id": 92852989, "body": "Should this not have been a comment?"}, {"owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "reply_to_user": {"reputation": 26552, "user_id": 448932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QgLLl.png?s=128&g=1", "display_name": "500 - Internal Server Error", "link": "https://stackoverflow.com/users/448932/500-internal-server-error"}, "edited": false, "score": 0, "creation_date": 1540396723, "post_id": 52973299, "comment_id": 92853086, "body": "No because this literally is how he fixes his error."}], "tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": true, "score": 1, "last_activity_date": 1540396685, "last_edit_date": 1540396685, "creation_date": 1540396497, "answer_id": 52973299, "question_id": 52973161, "link": "https://stackoverflow.com/questions/52973161/how-do-i-fix-this-malloc-error-in-c-when-i-am-trying-to-load-a-kernel-module/52973299#52973299", "title": "How do I fix this malloc() error in C++ when I am trying to load a kernel module?", "body": "<p>Check the return values of all functions for errors. The code you have listed would fail if the file doesn't open, the stat fails or the malloc fails. It is also a good idea to check the number of bytes returned by read.</p>\n"}], "owner": {"reputation": 3802, "user_id": 2096986, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/3a02e7c9d317839db7ad17f840320afd?s=128&d=identicon&r=PG", "display_name": "Felipe", "link": "https://stackoverflow.com/users/2096986/felipe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 52973299, "answer_count": 1, "score": 0, "last_activity_date": 1540396685, "creation_date": 1540396044, "question_id": 52973161, "link": "https://stackoverflow.com/questions/52973161/how-do-i-fix-this-malloc-error-in-c-when-i-am-trying-to-load-a-kernel-module", "title": "How do I fix this malloc() error in C++ when I am trying to load a kernel module?", "body": "<p>I am getting the error <code>malloc(): memory corruption</code> when I execute this code in C++. Basically, I open a kernel file and I use malloc with the size of <code>struct stat st</code>. I guess this is causing the problem.</p>\n\n<p>The code loads a kernel module (I2C) and it is actually loading. but I guess I am not using the <code>malloc()</code> as should be used. Thanks.</p>\n\n<pre><code>#define _GNU_SOURCE\n#include &lt;fcntl.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;sys/syscall.h&gt;\n#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdlib.h&gt;\n\n#include &lt;gtest/gtest.h&gt;\n#include &lt;gmock/gmock.h&gt;\n\n#define init_module(mod, len, opts) syscall(__NR_init_module, mod, len, opts)\n#define delete_module(name, flags) syscall(__NR_delete_module, name, flags)\nclass I2CKernelModule : public testing::Test {\npublic:\n    I2CKernelModule() {\n    }\n};\nTEST_F(I2CKernelModule, TestAddAndRemoveKernelModule) {\n    char *params;\n    int fd;\n    size_t image_size;\n    struct stat st;\n    void *image;\n\n    // command: sudo insmod /root/i2c-tests/i2c-stub.ko chip_addr=0x20\n    params = \"chip_addr=0x20\";\n    fd = open(\"/root/i2c-tests/i2c-stub.ko\", O_RDONLY);\n    fstat(fd, &amp;st);\n    image_size = st.st_size;\n    image = malloc(image_size);\n    read(fd, image, image_size);\n    close(fd);\n    if (init_module(image, image_size, params) != 0) {\n        perror(\"init_module\");\n        GTEST_FAIL();\n    }\n    free(image);\n    GTEST_SUCCESS_(\"Kernel module loaded.\");\n\n    /*\n    // sudo rmmod i2c_stub\n    if (delete_module(\"i2c_stub\", O_NONBLOCK) != 0) {\n        perror(\"delete_module\");\n        GTEST_FAIL();\n    }\n    GTEST_SUCCESS_(\"Kernel module unloaded.\");\n    */\n}\n</code></pre>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 7364573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8STO.jpg?s=128&g=1", "display_name": "Lapys", "link": "https://stackoverflow.com/users/7364573/lapys"}, "edited": false, "score": 0, "creation_date": 1540397131, "post_id": 52973296, "comment_id": 92853368, "body": "I.. think I&#39;m starting to understand that now. Honestly, I&#39;m going re-implement the code using <code>std::string</code>&#39;s instead since it handles finicky details as such. But thanks for explaining things through."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": true, "score": 6, "last_activity_date": 1540396481, "creation_date": 1540396481, "answer_id": 52973296, "question_id": 52973084, "link": "https://stackoverflow.com/questions/52973084/c-style-string-not-updated-with-operator-c/52973296#52973296", "title": "C-style String not updated with = operator - C++", "body": "<p><code>globalString</code> is <code>char*</code> that points to the return value of <code>stringify(\"\");</code>.</p>\n\n<p><code>stringify(\"\")</code> returns <code>strdup(std::string(string).c_str());</code>. <code>strdup</code> returns a dynamically allocated string that has the length of its parameter ( and the same contents) . </p>\n\n<p>Here, <code>\"\"</code> only contains <code>\\0</code> so the C-string returned from <code>strdup</code> will only have a length of <code>1</code>.</p>\n\n<hr>\n\n<p>You then try to call <code>strcat(destination, source)</code> with <code>globalString</code> as the destination, but <code>globalString</code> isn't big enough to fit the <code>source</code>.</p>\n\n<p><code>strcat</code> says:</p>\n\n<blockquote>\n  <p>The behavior is undefined if the destination array is not large\n  enough for the contents of both src and dest and the terminating null\n  character. The behavior is undefined if the strings overlap. The\n  behavior is undefined if either dest or src is not a pointer to a\n  null-terminated byte string.</p>\n</blockquote>\n\n<p>So both of your test cases are UB. Even the first test that <em>seems</em> to work well.</p>\n\n<hr>\n\n<p><code>std::string</code> handles all of this for you. If you somehow aren't allowed to use it for whatever (stupid) reason a professor has given you, then make sure to allocate enough space for <code>globalString</code> before calling <code>strcat</code> on it, C-strings are tricky beasts.</p>\n"}], "owner": {"reputation": 846, "user_id": 7364573, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8STO.jpg?s=128&g=1", "display_name": "Lapys", "link": "https://stackoverflow.com/users/7364573/lapys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 52973296, "answer_count": 1, "score": 1, "last_activity_date": 1540396726, "creation_date": 1540395791, "last_edit_date": 1540396726, "question_id": 52973084, "link": "https://stackoverflow.com/questions/52973084/c-style-string-not-updated-with-operator-c", "title": "C-style String not updated with = operator - C++", "body": "<p>So recently I was playing with the concept of creating my own C++ classes that represent generic data (such as strings, numbers and arrays).</p>\n\n<p>And so far my progress on this has been good (as seen here: <a href=\"https://github.com/LapysDev/LapysCPP\" rel=\"nofollow noreferrer\">https://github.com/LapysDev/LapysCPP</a>).</p>\n\n<p>Except one hitch. For the life of me, I can not figure out why the code below faults when it comes to creating a <code>String</code> class object with a variable amount of arguments.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;sstream&gt;\n#include &lt;string.h&gt;\n\n// Make a new C-style string (or stringify a value).\nchar* stringify(char character) {\n    std::string stream = static_cast&lt;std::ostringstream*&gt;(&amp;(std::ostringstream() &lt;&lt; character)) -&gt; str();\n    char* string = new char[stream.size() + 1];\n\n    strcpy(string, stream.c_str());\n    return string;\n}\ntemplate &lt;typename data&gt; char* stringify(data string) { return strdup(std::string(string).c_str()); }\n\nchar* globalString = stringify(\"\");\n\nclass String {\n    public:\n        char* value = stringify(\"\");\n\n        String() {}\n        template &lt;typename data&gt;\n        String(data value) {\n            strcat(globalString, value);\n            this -&gt; value = stringify(globalString);\n            globalString = stringify(\"\");\n        }\n        template &lt;typename data, typename... argumentsData&gt;\n        String(data value, argumentsData... values) {\n            strcat(globalString, stringify(value));\n            String(values...);\n        }\n};\n\nint main(int argc, char* argv[]) {\n    std::cout &lt;&lt; \"String [1]: '\" &lt;&lt; String(\"Hello, World!\").value &lt;&lt; '\\'' &lt;&lt; std::endl;\n    // -&gt; String [1]: 'Hello, World!'\n\n    std::cout &lt;&lt; \"String [3]: '\" &lt;&lt; String(\"Hello,\", ' ', \"World!\").value &lt;&lt; '\\'';\n    // -&gt; String [3]: ''\n\n    return 0;\n}\n</code></pre>\n\n<p>I have tried everything I can with the code already (and yes, using an <code>std::string</code> for the text value is banned). If there's anyone out there that can explain why using multiple arguments faults when using <code>char*</code>'s, you're welcome to comment.</p>\n\n<p>To summarize, I need to be able to create a <code>String</code> object with a proper <code>value</code> property using a variable amount of arguments.</p>\n\n<pre><code>// Works fine\nString(\"Hello, World!\").value // -&gt; Hello, World!\n\n// Needs fixing\nString(\"Hello,\", ' ', \"World!\").value // -&gt; ...\n</code></pre>\n\n<p>I understand that this may not be platform to ask questions of this nature but a little help would go a long way. Thanks for reading through.</p>\n"}, {"tags": ["c++", "vector"], "owner": {"reputation": 1151, "user_id": 1666510, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/gxw0F.png?s=128&g=1", "display_name": "Enigma", "link": "https://stackoverflow.com/users/1666510/enigma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1540416543, "creation_date": 1540395776, "last_edit_date": 1540416543, "question_id": 52973077, "link": "https://stackoverflow.com/questions/52973077/initializing-vectorstring-with-constant-string-array-crashing", "title": "Initializing vector&lt;string&gt; with constant string array crashing", "body": "<p>I've got a class which attempts to initialize a <code>vector&lt;string&gt;</code> with 9000 strings and the program is crashing/breaking at the entrypoint to the class's constructor.</p>\n\n<p>This is the only breakpoint info that I can see (indecipherable to me):</p>\n\n<pre><code>; Find next lower page and probe\ncs20:\n        sub     eax, _PAGESIZE_         ; decrease by PAGESIZE\n        test    dword ptr [eax],eax     ; probe page. // &lt; breaks here\n        jmp     short cs10\n\n_chkstk endp\n</code></pre>\n\n<p>If I instead run the same code with a smaller string array <code>{\"string1\", \"string2\"}</code>, there is no crash at entry to class constructor.</p>\n\n<hr>\n\n<p>someclass.cpp:</p>\n\n<pre><code>#include \"someclass.h\"\n\nusing namespace std;\n\nCSomeClass::CSomeClass()\n{   // &lt; crashes/breaks right here or between here and next instruction\n\n    // Crashes\n    m_vStrings = {\"string1\", \"string2\", ... \"string9000\"};\n\n    // Works\n    m_vStrings = {\"string1\", \"string2\"};\n}\n</code></pre>\n\n<p>someclass.h:</p>\n\n<pre><code>#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass CSomeClass    \n{\nprotected:\n    vector&lt;string&gt;                      m_vStrings;\n\npublic:\n    CSomeClass();\n};\n</code></pre>\n\n<p>It seems like everything is functionally in order but that I might be running into some kind of, dare I say, Stack Overflow maybe?</p>\n\n<p>Usage:</p>\n\n<pre><code>CSomeClass class1; // crashes in here so usage hasn't been tested yet\n</code></pre>\n\n<hr>\n\n<p>This works but is a double allocation which I'd like to avoid if possible:</p>\n\n<pre><code>const char* sStrings[] = {\"string1\", \"string2\", ... \"string9000\"};\nm_vStrings = vector&lt;string&gt;(sStrings, end(sStrings));\n</code></pre>\n"}, {"tags": ["c++", "gpio", "pins", "ueye"], "owner": {"reputation": 31, "user_id": 3897209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e229880b4b67971f1ba24ea02be989dc?s=128&d=identicon&r=PG&f=1", "display_name": "user3897209", "link": "https://stackoverflow.com/users/3897209/user3897209"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540395757, "creation_date": 1540395757, "question_id": 52973070, "link": "https://stackoverflow.com/questions/52973070/control-gpio-outputs", "title": "control GPIO outputs", "body": "<p>I'm trying to use <code>GPIO</code> of the camera as a flash output through its pins in c++. My code looks like that:</p>\n\n<pre><code>    HIDS m_hCam;    // handle to camera \n.\n.\n.   \n    IO_GPIO_CONFIGURATION gpioConfiguration;\n    gpioConfiguration.u32Gpio = IO_GPIO_2;\n    gpioConfiguration.u32Configuration = IS_GPIO_FLASH;\n\n    nRet = is_IO(m_hCam, IO_FLASH_MODE_CONSTANT_HIGH, (void*)&amp;gpioConfiguration, sizeof(gpioConfiguration));\n</code></pre>\n\n<p>This is the link to the <a href=\"https://www.prolinx.co.jp/supplier/IDS/uEye_Manual_En/index.html?is_iogpio.html\" rel=\"nofollow noreferrer\">documentation</a>:\nAnd I'm using an Ethernet camera.</p>\n\n<p>My program compiles properly but I don't anything in the output! Do you know what is wrong with my code?</p>\n"}, {"tags": ["c++", "clang", "clang-ast-matchers"], "owner": {"reputation": 34200, "user_id": 153535, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/537262a1fa55f447898d6072791f3899?s=128&d=identicon&r=PG", "display_name": "fbrereto", "link": "https://stackoverflow.com/users/153535/fbrereto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540395657, "creation_date": 1540395657, "question_id": 52973027, "link": "https://stackoverflow.com/questions/52973027/functiondecl-how-do-i-get-the-as-written-unqualified-id-of-a-function", "title": "FunctionDecl: How do I get the as-written unqualified-id of a function?", "body": "<p>I have been able to write a Clang AST matcher that gives me <code>FunctionDecl</code> instances. However, I am observing cases where <code>getNameAsString</code> substitutes as-written template parameter types with <code>type-parameter-N-M</code>. For example, in the following code:</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct foo {\n    using value_type = T;\n    operator const value_type&amp;() const;\n};\n</code></pre>\n\n<p><code>getNameAsString</code> returns <code>operator const type-parameter-0-0&amp;</code>. What I am looking for is <code>operator const value_type&amp;</code>.</p>\n\n<p>How do I get the as-written unqualified-id for a function?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 3, "creation_date": 1540395068, "post_id": 52972818, "comment_id": 92852022, "body": "A <code>case</code> has to be a specific <i>value</i>, not a condition."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1540395124, "post_id": 52972818, "comment_id": 92852059, "body": "replace your switch/case with <code>if</code>s,"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1540395134, "post_id": 52972818, "comment_id": 92852064, "body": "A <code>switch</code> statement won&#39;t work here. Use <code>if (grade &lt;= 59) ... else if (grade &lt;= 69) ...</code> etc. This is very common; it&#39;s known as an &quot;if else-if ladder&quot;."}, {"owner": {"reputation": 1, "user_id": 5910058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e1ce21ce04eb150f59eaec245d4ff8?s=128&d=identicon&r=PG&f=1", "display_name": "Jesper Juhl", "link": "https://stackoverflow.com/users/5910058/jesper-juhl"}, "edited": false, "score": 1, "creation_date": 1540395356, "post_id": 52972818, "comment_id": 92852187, "body": "&quot;any number in between like 30, 45.8, 20.3&quot; - if you want to handle non-integer numbers then you should probably not be reading the input into a <code>int</code>. That will truncate any number to its integer part."}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 3, "last_activity_date": 1540395141, "creation_date": 1540395141, "answer_id": 52972855, "question_id": 52972818, "link": "https://stackoverflow.com/questions/52972818/my-grading-program-is-not-working-correctly/52972855#52972855", "title": "My Grading program is not working correctly", "body": "<p>You cannot use <code>case</code> in this way, instead you'd use <code>if</code> and <code>else</code></p>\n\n<pre><code>if (0 &lt;= grade &amp;&amp; grade &lt; 59)\nelse if (59 &lt;= grade &amp;&amp; grade &lt; 69)\n... etc\n</code></pre>\n\n<p>The <code>case</code> statement will only work with exact value matches</p>\n"}], "owner": {"reputation": 157, "user_id": 10552947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ea6e7e407212d5df38933be7e8d1fcf?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Altamirano", "link": "https://stackoverflow.com/users/10552947/christopher-altamirano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 52972855, "answer_count": 1, "score": -1, "last_activity_date": 1540395141, "creation_date": 1540395020, "last_edit_date": 1540395049, "question_id": 52972818, "link": "https://stackoverflow.com/questions/52972818/my-grading-program-is-not-working-correctly", "title": "My Grading program is not working correctly", "body": "<p>I am just trying to get this simple grading program to work. I want to be able to choose from say 0-59 those and any number in between like 30, 45.8, 20.3 and so on using a switch statement. When I run it though I get errors and the output is not even showing up. I am new to c++ and I am kind of struggling. </p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n\n    int grade;\n    cout &lt;&lt; \"Enter grade for programing class: \" &lt;&lt; flush;\n    cin &gt;&gt; grade;\n\n\n    switch (grade) {\n    case 0 &lt;= 59:\n        cout &lt;&lt; \"You recived a F!\" &lt;&lt; endl;\n        break;\n    case 60 &gt;= 69:\n        cout &lt;&lt; \"You recived a D!\" &lt;&lt; endl;\n        break;\n    case 70-79:\n        cout &lt;&lt; \"You recived a C!\" &lt;&lt; endl;\n        break;\n    case 80-89:\n        cout &lt;&lt; \"You recived a B\" &lt;&lt; endl;\n        break;\n    case 90&lt;=100:\n        cout &lt;&lt; \"You  recived an A!\" &lt;&lt; endl;\n        break;\n    default:\n        cout &lt;&lt; \"Please enter a real number!\" &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++17", "constexpr"], "comments": [{"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540394602, "post_id": 52972533, "comment_id": 92851717, "body": "use <code>.cbegin</code> ."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 3, "creation_date": 1540394624, "post_id": 52972533, "comment_id": 92851728, "body": "@\u0410\u043b\u0435\u043a\u0441\u0435\u0439\u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d makes no difference."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540394737, "post_id": 52972533, "comment_id": 92851795, "body": "@\u0410\u043b\u0435\u043a\u0441\u0435\u0439\u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d <code>begin()</code> and <code>cbegin()</code> do the same thing on const objects."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540394826, "post_id": 52972533, "comment_id": 92851852, "body": "so try <code>auto b=...</code> and then if it fails <code>const</code> . also you change <code>auto</code>  to <code>std::....::citerator</code>"}], "answers": [{"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 48, "last_activity_date": 1540394547, "creation_date": 1540394547, "answer_id": 52972677, "question_id": 52972533, "link": "https://stackoverflow.com/questions/52972533/constexpr-begin-of-a-stdarray/52972677#52972677", "title": "constexpr begin of a std::array", "body": "<p>So let's sidestep <code>std::array</code> to make this a bit easier:</p>\n\n<pre><code>template &lt;typename T, size_t N&gt;\nstruct array {\n    T elems[N];\n\n    constexpr T const* begin() const { return elems; }\n};\n\nvoid foo() {\n    constexpr array&lt;int,3&gt; v{{1, 2, 3}};\n    constexpr auto b = v.begin(); // error\n}\n\nconstexpr array&lt;int, 3&gt; global_v{{1, 2, 3}};\nconstexpr auto global_b = global_v.begin(); // ok\n</code></pre>\n\n<p>Why is <code>b</code> an error but <code>global_b</code> is okay? Likewise, why would <code>b</code> become okay if we declared <code>v</code> to be <code>static constexpr</code>? The problem is fundamentally about pointers. In order to have a constant expression that's a pointer, it has to point to one, known, constant thing, always. That doesn't really work for local variables without static storage duration, since they have fundamentally mutable address. But for function-local statics or globals, they do have one constant address, so you can take a constant pointer to them.</p>\n\n<hr />\n\n<p>In standardese, from <a href=\"http://eel.is/c++draft/expr.const#6\" rel=\"noreferrer\">[expr.const]/6</a>:</p>\n\n<blockquote>\n  <p>A <em>constant expression</em> is either a glvalue core constant expression that refers to an entity that is a permitted result of a constant expression (as defined below), or a prvalue core constant expression whose value satisfies the following constraints:   </p>\n  \n  <ul>\n  <li>if the value is an object of class type, [...] </li>\n  <li>if the value is of pointer type, it contains the <strong>address of an object with static storage duration</strong>, the address past the end of such an object ([expr.add]), the address of a function, or a null pointer value, and </li>\n  <li>[...]</li>\n  </ul>\n</blockquote>\n\n<p><code>b</code> is none of those things in the second bullet, so this fails. But <code>global_b</code> satisfies the bolded condition - as would <code>b</code> if <code>v</code> were declared <code>static</code>.</p>\n"}], "owner": {"reputation": 3142, "user_id": 1598163, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/131731839e6abf47e73673d7bf7990c6?s=128&d=identicon&r=PG", "display_name": "linuxfever", "link": "https://stackoverflow.com/users/1598163/linuxfever"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 2, "accepted_answer_id": 52972677, "answer_count": 1, "score": 28, "last_activity_date": 1540394764, "creation_date": 1540394120, "last_edit_date": 1540394764, "question_id": 52972533, "link": "https://stackoverflow.com/questions/52972533/constexpr-begin-of-a-stdarray", "title": "constexpr begin of a std::array", "body": "<p>I am having trouble understanding why both gcc-8.2.0 and clang-7.0.0 reject the following code (live code <a href=\"https://godbolt.org/z/RuOXN8\" rel=\"noreferrer\">here</a>):</p>\n\n<pre><code>#include &lt;array&gt;\n\nint main() {\n\n    constexpr std::array&lt;int,3&gt; v{1,2,3};\n    constexpr auto b = v.begin(); // error: not a constexpr \n    return 0;\n}\n</code></pre>\n\n<p>with the error</p>\n\n<pre><code>error: '(std::array&lt;int, 3&gt;::const_pointer)(&amp; v.std::array&lt;int,3&gt;::_M_elems)' \nis not a constant expression (constexpr auto b = v.begin();)\n</code></pre>\n\n<p>According to <a href=\"https://en.cppreference.com/w/cpp/container/array/begin\" rel=\"noreferrer\">en.cppreference.com</a>, the <code>begin()</code> member function is declared <code>constexpr</code>. Is this a compiler bug? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 957, "user_id": 2729876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tTIEO.png?s=128&g=1", "display_name": "SIGSTACKFAULT", "link": "https://stackoverflow.com/users/2729876/sigstackfault"}, "edited": false, "score": 6, "creation_date": 1540394174, "post_id": 52972522, "comment_id": 92851389, "body": "You&#39;re not actually in the interview right now, right?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1540394210, "post_id": 52972522, "comment_id": 92851420, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4833347/removing-substring-from-a-string\">Removing substring from a string?</a>"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 3, "creation_date": 1540394229, "post_id": 52972522, "comment_id": 92851436, "body": "c/c++ is not a language. Pick a language please."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1540394292, "post_id": 52972522, "comment_id": 92851486, "body": "This question is asked extremely often. There are many many answers on the internet."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 10, "creation_date": 1540394443, "post_id": 52972522, "comment_id": 92851607, "body": "Can&#39;t be done. <code>&quot;this that there&quot;</code> is an array of <code>const char</code>. You can&#39;t modify the characters in it. In fact, assigning it to a <code>char*</code> is now illegal; it used to produce undefined behavior."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1540395496, "post_id": 52972522, "comment_id": 92852279, "body": "What have you done so far?"}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1540400365, "post_id": 52972522, "comment_id": 92855191, "body": "@PeteBecker if so you could do it with <code>const_cast</code>."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540402288, "post_id": 52972522, "comment_id": 92856161, "body": "@\u0410\u043b\u0435\u043a\u0441\u0435\u0439\u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d -- no. When an object is, in fact, <code>const</code>, casting away <code>const</code> and attempting to modify the object results in undefined behavior. In particular, string literals are often stored in read-only memory, and trying to write to a string literal will crash the program."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1540404259, "post_id": 52972522, "comment_id": 92857242, "body": "@PeteBecker read-only memory? cd-rom may be If you mean CS data you could not have(OS-provided) pointer to it."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540404654, "post_id": 52972522, "comment_id": 92857481, "body": "@\u0410\u043b\u0435\u043a\u0441\u0435\u0439\u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d -- I&#39;m referring to memory that the program is not allowed to write to. Most operating systems support read-only access within a program; it&#39;s used to protect data that should not be modified."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540406068, "post_id": 52972522, "comment_id": 92858185, "body": "yeah <code>const_cast</code> wont work there. Idk about protected mode and paging, there is read-only attribute there but it&#39;s related to whole page or smth like  that. Dos only has it in cs"}, {"owner": {"reputation": 7273, "user_id": 2193968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beed39f2b04409ff584a0af1d59325c?s=128&d=identicon&r=PG", "display_name": "Jerry Jeremiah", "link": "https://stackoverflow.com/users/2193968/jerry-jeremiah"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1540501021, "post_id": 52972522, "comment_id": 92900702, "body": "Like @PeteBecker said, you can&#39;t do that unless you change the declaration to <code>char str[] = &quot;this that there&quot;;</code> because then it is memory that you own."}], "answers": [{"tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": false, "score": 0, "last_activity_date": 1540398969, "last_edit_date": 1540398969, "creation_date": 1540398628, "answer_id": 52973929, "question_id": 52972522, "link": "https://stackoverflow.com/questions/52972522/remove-substrings-from-a-c-style-string-in-place-in-c-code/52973929#52973929", "title": "Remove substrings from a C-style string &quot;in place&quot; in C++ code", "body": "<p>The string functions exist for a reason.  If you are not to use them, can you create them from scratch?</p>\n\n<p>If so, here is my solution to the problem.  Very educational to write custom string functions with the const requirements.</p>\n\n<p>As mentioned in the comments, this won't work unless the string passed in can be modified, so I made it a non-constant string.</p>\n\n<p>Let me know if this meets the interview challenge:</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>#include &lt;iostream&gt;\n\nbool myStrnCmp(char *str1, const char *str2, int len) {\n    char *cptr1 = (char *) str1;\n    char *cptr2 = (char *) str2;\n    for (int i = 0; i &lt; len; i++) {\n        if (*(cptr1 + i) != *(cptr2 + i))\n            return false;\n    }\n    return true;\n}\n\nint mystrlen(const char* str) {\n    int i = 0;\n    while(*(str + i) != '\\0')\n        i++;\n    return i;\n}\n\nint findSubStr(char *str, const char *substr) {\n    int position = 0;\n    int len = mystrlen(substr);\n\n    while(*(str + position) != '\\0') {\n        for (int i = 0; i &lt; len; i++) {\n            if (myStrnCmp(str + position + i, substr, len))\n                return position + i;\n        }\n        ++position;\n    }\n    return -1;\n}\n\nvoid myStrCpy(char *str, const char *substr) {\n    memmove(str, substr, mystrlen(substr) + 1);\n\n}\n\nvoid removeSubstr(char *str, const char *substr) {\n    int position = findSubStr(str, substr);\n    while(position &gt;= 0) {\n        myStrCpy(str + position, str+position+mystrlen(substr));\n        position = findSubStr(str, substr);\n    }\n\n}\n\n\nint main() {\n    char str[]{\"this that there\"};\n    char* substr = \"th\";\n    removeSubstr(str,substr);\n    std::cout&lt;&lt;str;  //should be now \"is at ere\"\n\n    return 0;\n}\n</code></pre>\n\n\n"}, {"tags": [], "owner": {"reputation": 3343, "user_id": 1983409, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/T95Sg.jpg?s=128&g=1", "display_name": "zdf", "link": "https://stackoverflow.com/users/1983409/zdf"}, "is_accepted": true, "score": 0, "last_activity_date": 1540500381, "last_edit_date": 1540500381, "creation_date": 1540400466, "answer_id": 52974409, "question_id": 52972522, "link": "https://stackoverflow.com/questions/52972522/remove-substrings-from-a-c-style-string-in-place-in-c-code/52974409#52974409", "title": "Remove substrings from a C-style string &quot;in place&quot; in C++ code", "body": "<ul>\n<li>Since you remove characters from the original string, the string is <strong>shrinking, so you do not need additional space</strong>. You just have to copy characters from a higher index (source) to a lower index (destination).</li>\n<li>If the source index points to a position that <strong>starts with the searched substring, you must skip it.</strong></li>\n<li>The skip function simply <strong>compares the beginning of the source string against the substring</strong>, and returns the source (if it does not start with the substring) or the source plus the length of substring (if it starts with the substring).</li>\n</ul>\n\n<p><strong><a href=\"https://www.ideone.com/erEhHe\" rel=\"nofollow noreferrer\">Demo</a></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nchar* skip_if( char* s, const char* ss )\n{\n  char* p = s;\n  const char* pp = ss;\n  while( *p == *pp &amp;&amp; *p )\n    p++, pp++;\n  return *pp ? s : p;\n}\n\nvoid remove( char* s, const char* ss )\n{\n  char *ps = s; // source\n  char *pd = s; // destination\n  while( *ps )\n  {\n    ps = skip_if( ps, ss );\n    *pd++ = *ps++;\n  }\n  *pd = 0;\n}\n\nint main()\n{\n  using namespace std;\n\n  char str[] = \"this that there this that there\";\n  const char* substr = \"th\";\n  remove( str, substr );\n\n  cout &lt;&lt; str;\n\n  return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 10551590, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156666761958150/picture?type=large", "display_name": "Yaron Shaul", "link": "https://stackoverflow.com/users/10551590/yaron-shaul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 52974409, "answer_count": 2, "score": 1, "last_activity_date": 1540500381, "creation_date": 1540394096, "last_edit_date": 1540394318, "question_id": 52972522, "link": "https://stackoverflow.com/questions/52972522/remove-substrings-from-a-c-style-string-in-place-in-c-code", "title": "Remove substrings from a C-style string &quot;in place&quot; in C++ code", "body": "<p>I had an interview task to remove substring from a current string without using string functions or additional memory...I tried just with <code>strlen</code> but didn't find the way to change it in place...</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;iostream&gt;\nusing namespace std;\nint main()\n{\n    char * str = \"this that there\";\n    char * substr = \"th\";\n    removeSubstr(str,substr); \n    cout&lt;&lt;str;  //should be now \"is at ere\"\n\n    return 0;\n}\nvoid removeSubstr(char * str, const char * substr){\n}\n</code></pre>\n"}, {"tags": ["c++", "exception-handling", "compiler-errors", "programming-languages", "turbo-c++"], "comments": [{"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1540394177, "post_id": 52972491, "comment_id": 92851394, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3644976/exception-handling-in-c\">exception handling in C++</a>"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1540394188, "post_id": 52972491, "comment_id": 92851404, "body": "If you actually want to be a C++ programmer do yourself a favor and run away from TurboC++.  It is 25+ years old and isn&#39;t even C++98 standard complaint.  You&#39;ll be doing yourself a disservice by learning C++ with such a compiler.  There are many free compilers like gcc, clang, and msvs that support modern C++ that you can use."}, {"owner": {"reputation": 2298, "user_id": 6427477, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oYQ8Y.png?s=128&g=1", "display_name": "C.M.", "link": "https://stackoverflow.com/users/6427477/c-m"}, "edited": false, "score": 0, "creation_date": 1540409601, "post_id": 52972491, "comment_id": 92859840, "body": "Hard to believe this isn&#39;t trolling..."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 1, "last_activity_date": 1540395442, "creation_date": 1540395442, "answer_id": 52972953, "question_id": 52972491, "link": "https://stackoverflow.com/questions/52972491/exception-handling-errors-in-c/52972953#52972953", "title": "Exception Handling errors in c++", "body": "<p>To use exceptions, you need to use a compiler that supports exceptions. Turbo C++ compiler does not support exceptions.</p>\n\n<p>To use Turbo C++, you must not use exceptions.</p>\n"}], "owner": {"reputation": 9, "user_id": 9452667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12af4f1249f99c84a77d0b236f08764f?s=128&d=identicon&r=PG", "display_name": "kishan99", "link": "https://stackoverflow.com/users/9452667/kishan99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "closed_date": 1540893551, "accepted_answer_id": 52972953, "answer_count": 1, "score": -3, "last_activity_date": 1540479113, "creation_date": 1540393979, "last_edit_date": 1540479113, "question_id": 52972491, "link": "https://stackoverflow.com/questions/52972491/exception-handling-errors-in-c", "closed_reason": "Not suitable for this site", "title": "Exception Handling errors in c++", "body": "<p>i am unable to do an Exception Handling program in C++ in my MS DOS &amp; Turbo c Compilers. can i have suggestions or any needful statements for that?</p>\n\n<p>Some fatal error of program</p>\n\n<p><a href=\"https://i.stack.imgur.com/wRjz5.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wRjz5.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>program code</p>\n\n<p><a href=\"https://i.stack.imgur.com/eCRMF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eCRMF.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["c++", "templates", "type-deduction"], "comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1540392953, "post_id": 52972073, "comment_id": 92850552, "body": "Note that all names beginning with underscore + capital letter are reserved for the implementation. Using such identifiers is undefined behavior."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1540396079, "post_id": 52972073, "comment_id": 92852665, "body": "@MaxLanghof to be pedantic, <i>declaring</i> such identifiers (which is what Tarion did) has undefined behaviour. Using implementation defined identifiers is well, implementation defined."}], "answers": [{"comments": [{"owner": {"reputation": 13903, "user_id": 86388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cPl84.jpg?s=128&g=1", "display_name": "Tarion", "link": "https://stackoverflow.com/users/86388/tarion"}, "edited": false, "score": 0, "creation_date": 1540395775, "post_id": 52972343, "comment_id": 92852461, "body": "Okay the trick is to have a reference to the base class. I might just add it as member then."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1540393586, "creation_date": 1540393586, "answer_id": 52972343, "question_id": 52972073, "link": "https://stackoverflow.com/questions/52972073/ide-clion-cant-resolve-c-template-type/52972343#52972343", "title": "IDE (CLion) can&#39;t resolve C++ Template type", "body": "<p>You can access the members through the base class:</p>\n\n<pre><code>board::I2CApi&amp; api = i2c;\n</code></pre>\n\n<p>Your IDE should be able to autocomplete members of <code>board::I2CApi</code> in this case.</p>\n"}], "owner": {"reputation": 13903, "user_id": 86388, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/cPl84.jpg?s=128&g=1", "display_name": "Tarion", "link": "https://stackoverflow.com/users/86388/tarion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1540393586, "creation_date": 1540392839, "question_id": 52972073, "link": "https://stackoverflow.com/questions/52972073/ide-clion-cant-resolve-c-template-type", "title": "IDE (CLion) can&#39;t resolve C++ Template type", "body": "<p>I have a template class:</p>\n\n<pre><code>template&lt;class _I2CApi&gt;\nclass Pca9538 {\n    static_assert(std::is_base_of&lt;board::I2CApi, _I2CApi&gt;::value, \"_I2CApi must inherit from I2CApi\");\n\n    typedef _I2CApi I2CApi;\n</code></pre>\n\n<p>And an implementation:</p>\n\n<pre><code>template&lt;class _I2CApi&gt;\nuint8_t Pca9538&lt;_I2CApi&gt;::interaction(bool isRead, uint8_t cmd, uint8_t data) {\n    _I2CApi i2c; // No Autocompletion for board::I2CApi fields\n</code></pre>\n\n<p>Can I somehow better describe that <code>_I2CApi</code> is of type <code>board::I2CApi</code>.</p>\n"}, {"tags": ["c++", "inheritance"], "comments": [{"owner": {"reputation": 4756, "user_id": 1364149, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Y25ip.jpg?s=128&g=1", "display_name": "Shloim", "link": "https://stackoverflow.com/users/1364149/shloim"}, "edited": false, "score": 1, "creation_date": 1540393326, "post_id": 52972053, "comment_id": 92850816, "body": "What is your output? Why did you avoid declaring virtual functions?"}, {"owner": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "edited": false, "score": 0, "creation_date": 1540393345, "post_id": 52972053, "comment_id": 92850828, "body": "Are you saying that calling <code>s.print()</code> doesn&#39;t output anything? Or that it isn&#39;t printing the student&#39;s name?"}, {"owner": {"reputation": 41, "user_id": 10552749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40cf2002f8932ac4021da23fc9b1fed?s=128&d=identicon&r=PG&f=1", "display_name": "Strath", "link": "https://stackoverflow.com/users/10552749/strath"}, "edited": false, "score": 0, "creation_date": 1540393486, "post_id": 52972053, "comment_id": 92850928, "body": "It prints the department, but not the student&#39;s name or DOB."}, {"owner": {"reputation": 9739, "user_id": 3691783, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/18bfba7d4beb1c210fa670cf57c66f4b?s=128&d=identicon&r=PG", "display_name": "Matt Messersmith", "link": "https://stackoverflow.com/users/3691783/matt-messersmith"}, "edited": false, "score": 1, "creation_date": 1540393533, "post_id": 52972053, "comment_id": 92850969, "body": "That&#39;s because you didn&#39;t tell it to. You have to explicitly call Person&#39;s print since you also have a definition of print in Student."}], "answers": [{"tags": [], "owner": {"reputation": 2331, "user_id": 2333010, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7134e36891735da054e22fbe01e903c2?s=128&d=identicon&r=PG", "display_name": "Ricardo Costeira", "link": "https://stackoverflow.com/users/2333010/ricardo-costeira"}, "is_accepted": true, "score": 2, "last_activity_date": 1540398081, "last_edit_date": 1540398081, "creation_date": 1540394244, "answer_id": 52972580, "question_id": 52972053, "link": "https://stackoverflow.com/questions/52972053/print-inheritance-function/52972580#52972580", "title": "Print Inheritance Function", "body": "<p>Are you trying to run the exact code that you supplied? Because it's missing the main function. </p>\n\n<p><code>s.print()</code> will never call the <code>Person</code> class print method, since you define a method with the same name in <code>Student</code>. Hence, it will only print the student's name. If you want to use the base class method, you have to either call it explicitly in the derived class' method (for instance, by writing <code>Person::print()</code> in the Student class print method), or simple not define another method with the same name on the derived class (you should read up on how inheritance and virtual classes works in C++). For your problem in particular, you'll want the first option, i.e., something like:</p>\n\n<pre><code>void Student::print()\n{\n  Person::print();\n  cout &lt;&lt; \", \" &lt;&lt; Dept &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Also, it's good practice to flush the stream. Output streams are buffered, so you either flush them manually or hope that they get flushed. Add a <code>cout &lt;&lt; endl</code> or a <code>cout &lt;&lt; flush</code> at the end of printing.</p>\n"}], "owner": {"reputation": 41, "user_id": 10552749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a40cf2002f8932ac4021da23fc9b1fed?s=128&d=identicon&r=PG&f=1", "display_name": "Strath", "link": "https://stackoverflow.com/users/10552749/strath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 52972580, "answer_count": 1, "score": 2, "last_activity_date": 1540398081, "creation_date": 1540392768, "last_edit_date": 1540397119, "question_id": 52972053, "link": "https://stackoverflow.com/questions/52972053/print-inheritance-function", "title": "Print Inheritance Function", "body": "<p>I am attempting to complete a past Object Oriented Programming examination paper that involves inheritance in C++. This is the UML <img src=\"https://i.stack.imgur.com/jiv1C.png\" alt=\"This is the UML\">.</p>\n\n<p>I am trying to print the second line of the sample output, as shown on the question paper. The program should use inheritance to output the student name, DOB, and the department, but I am not sure how to output the first two. I have implemented inheritance but the print functions of the Person and Date classes do not print. Full code implementation <a href=\"http://cpp.sh/2cbyz\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>This is the Student class:</p>\n\n<pre><code>#include \"Person.h\"\n\nclass Student :\n    public Person\n{\npublic:\n    Student(string, string, int, int, int);\n    void print();\n    ~Student();\nprivate:\n    string Dept;\n};\n\nStudent::Student(string d, string name, int mm, int dd, int yy)\n    : Person(name, mm, dd, yy)\n{\n    Dept = d;\n}\n\nvoid Student::print()\n{\n    cout &lt;&lt; Dept;\n}\n</code></pre>\n\n<p>This is the Person class:</p>\n\n<pre><code>#include \"Date.h\"\n\nclass Person\n{\npublic:\n    Person(string, int, int, int);\n    void getName();\n    void setName(string);\n    void print();\n    ~Person();\nprivate:\n    string Name;\n    Date DOB;\n};\n\nPerson::Person(string n, int bmonth, int bday, int byear)\n    : DOB(bmonth, bday, byear)\n{\n    setName(n);\n}\n\nvoid Person::getName()\n{\n    cout &lt;&lt; Name;\n}\n\nvoid Person::setName(string nm)\n{\n    Name = nm;\n\n}\n\nvoid Person::print()\n{\n    getName();\n    cout &lt;&lt; \", DOB: \";\n    DOB.print();\n}\n</code></pre>\n\n<p>Test output:</p>\n\n<pre><code>Student s(\"Applied Computing\", \"James Hall\", 12, 12, 1988);\n    cout &lt;&lt; endl;\n    cout &lt;&lt; \"Student created: \";\n    s.print();\n</code></pre>\n"}, {"tags": ["c++", "class"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1540392732, "post_id": 52971975, "comment_id": 92850413, "body": "<a href=\"https://en.cppreference.com/w/cpp/language/data_members#Member_initialization\" rel=\"nofollow noreferrer\"><i>Member initializer list</i> or <i>default member initializer</i></a>."}, {"owner": {"reputation": 108, "user_id": 8808693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/393852c31e5129885e041b9b68c833e1?s=128&d=identicon&r=PG&f=1", "display_name": "Dr. Watson", "link": "https://stackoverflow.com/users/8808693/dr-watson"}, "edited": false, "score": 0, "creation_date": 1540392813, "post_id": 52971975, "comment_id": 92850465, "body": "Have you read any documentation? I would start here: <a href=\"https://en.cppreference.com/w/cpp/language/initializer_list\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/initializer_list</a>"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1540392976, "post_id": 52971975, "comment_id": 92850566, "body": "<code>gets me an error</code> is not descriptive enough. What does the error say?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1540394033, "post_id": 52971975, "comment_id": 92851311, "body": "I have fixed your question. Remember in future, you need a minimal complete example and the exact information about the error you are receiving. You are getting free help. Make it easy for us to help you."}], "answers": [{"comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540392923, "post_id": 52972092, "comment_id": 92850537, "body": "or the inline initialization (since c++14 i believe)"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540392950, "post_id": 52972092, "comment_id": 92850549, "body": "@user463035818 Yeah i forgot about that, still stuck in 03 :("}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540393045, "post_id": 52972092, "comment_id": 92850618, "body": "and I already started to feel cool because I am soo oldschool c++11 :P"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540393399, "post_id": 52972092, "comment_id": 92850860, "body": "@user463035818 Yeah, the embedded industry moves slowly. Ultra slowly. We managed to upgrade 1 os that we run on to c++11, but we have communicating devices, so a bunch of shared code (most of the code) still has to run on 03 XD"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": true, "score": 4, "last_activity_date": 1540393352, "last_edit_date": 1540393352, "creation_date": 1540392878, "answer_id": 52972092, "question_id": 52971975, "link": "https://stackoverflow.com/questions/52971975/where-do-i-put-constructor-parameters-when-creating-an-instance-of-a-class-insid/52972092#52972092", "title": "Where do I put constructor parameters when creating an instance of a class inside a class?", "body": "<p><code>Class1 player</code> is a member variable of <code>Class2</code>. <code>Class1</code> has no default constructor because you declared one taking a <code>string</code>. Therefore your only option is the initializer list of <code>Class2</code>s constructor:</p>\n\n<pre><code>class Class2 {\n    public: Class2() : player(\"Steve\") {} // Initializer list \n    private: Class1 player;\n};\n</code></pre>\n\n<p>Or if you have c++11 using the default member initializer:</p>\n\n<pre><code>class Class2 { \n    private: Class1 player{\"Steve\"};\n};\n</code></pre>\n\n<p>Information on both can be found <a href=\"https://en.cppreference.com/w/cpp/language/data_members\" rel=\"nofollow noreferrer\">here</a>. A live example can be found <a href=\"https://ideone.com/KGLA4d\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 130, "user_id": 6613728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sx3iZ.png?s=128&g=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/6613728/danny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 52972092, "answer_count": 1, "score": 1, "last_activity_date": 1540393978, "creation_date": 1540392557, "last_edit_date": 1540393978, "question_id": 52971975, "link": "https://stackoverflow.com/questions/52971975/where-do-i-put-constructor-parameters-when-creating-an-instance-of-a-class-insid", "title": "Where do I put constructor parameters when creating an instance of a class inside a class?", "body": "<p>I'm trying to make my <code>Class2</code> have an instance of <code>Class1</code> put I don't know where to put my constructor parameters. I have the following code:</p>\n\n<pre><code>class Class1 {\npublic:    Class1(std::string name) { myName = name; }\nprivate:   std::string myName;\n};\n\nclass Class2  {\nprivate:\n    Class1 player(\"Steve\"); \n};\n</code></pre>\n\n<p>Produces the error:</p>\n\n<blockquote>\n<pre><code>prog.cpp:12:20: error: expected identifier before string constant\n\n Class1 player(\"Steve\");\n\n               ^~~~~~~\nprog.cpp:12:20: error: expected \u2018,\u2019 or \u2018...\u2019 before string constant\n</code></pre>\n</blockquote>\n\n<p><a href=\"https://ideone.com/ILu7m2\" rel=\"nofollow noreferrer\">Live example</a></p>\n\n<p><strong>How can i construct my class correctly?</strong></p>\n"}, {"tags": ["c++", "visual-studio-2015"], "comments": [{"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1540392095, "post_id": 52971676, "comment_id": 92849952, "body": "c++ has a class like this. It is a <code>std::vector</code> and the visual studio watch window can already view it&#39;s elements ..."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1540392166, "post_id": 52971676, "comment_id": 92850002, "body": "@FantasticMrFox That comment completely foregoes the reasons mentioned in the question for not using it."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540392200, "post_id": 52971676, "comment_id": 92850034, "body": "You want to create a <b>visualizer</b> for your class (a <code>&quot;*.natvis&quot;</code> file) and add it to Visual Studio&#39;s collection, which is going to be somewhere like `%VSINSTALLPREFIX%\\Common7\\Packages\\Debugger\\Visualizers`. I haven&#39;t done this myself, and our code is full of proprietary stuff I can&#39;t share,  but this info might be enough to help you search for examples."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1540392343, "post_id": 52971676, "comment_id": 92850152, "body": "@MaxLanghof What reasons? Custom malloc? Use an allocator. Initialization like <code>arr bla[] = {2, 3};</code>? <code>std::vector</code> has that and more. If it&#39;s something in the <i>amoung other reasons</i> then how did you know :O !?"}, {"owner": {"reputation": 11238, "user_id": 7594711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7872c871b0431b72df6350dd0394bea?s=128&d=identicon&r=PG&f=1", "display_name": "SoronelHaetir", "link": "https://stackoverflow.com/users/7594711/soronelhaetir"}, "edited": false, "score": 1, "creation_date": 1540392456, "post_id": 52971676, "comment_id": 92850229, "body": "The natvis documentation can be found at <a href=\"https://docs.microsoft.com/en-us/visualstudio/debugger/create-custom-views-of-native-objects?view=vs-2017\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/visualstudio/debugger/&hellip;</a>"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1540392471, "post_id": 52971676, "comment_id": 92850243, "body": "@FantasticMrFox I know that, but just saying &quot;use <code>std::vector</code>&quot; without any further justification when the answer already mentioned not wanting to use it is not going to convince the asker."}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1540392576, "post_id": 52971676, "comment_id": 92850308, "body": "@MaxLanghof The OP doesn&#39;t say <i>I don&#39;t want to use a <code>std::vector</code></i> anywhere in the question. I figured maybe the OP didn&#39;t know about <code>std::vector</code> and has perhaps being using raw arrays and struggling to look at them in the watch window ..."}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 0, "creation_date": 1540392799, "post_id": 52971676, "comment_id": 92850458, "body": "@FantasticMrFox Ok, fair point, I might have been reading too much into the question."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 9061350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c69a80979e3cead1f41505ceb768de7f?s=128&d=identicon&r=PG&f=1", "display_name": "Gigi", "link": "https://stackoverflow.com/users/9061350/gigi"}, "edited": false, "score": 0, "creation_date": 1540446647, "post_id": 52971952, "comment_id": 92870286, "body": "As I said, malloc is not the only thing. And I&#39;m interested in other custom containers, too. But should I understand that is not possible to make initialization work like v[3] or v[] = {...}? I thought maybe operator overloading, but how?"}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "reply_to_user": {"reputation": 93, "user_id": 9061350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c69a80979e3cead1f41505ceb768de7f?s=128&d=identicon&r=PG&f=1", "display_name": "Gigi", "link": "https://stackoverflow.com/users/9061350/gigi"}, "edited": false, "score": 0, "creation_date": 1540453233, "post_id": 52971952, "comment_id": 92873413, "body": "Well so far you have not come up with an incentive that <code>std::vector</code> does not fulfill. If it&#39;s not the only thing, what are the other things? &quot;Other containers&quot; in the standard library also have allocator support, so this is not a good reason either. And please restrict your question to one thing at a time. If the title is &quot;can custom arrays be browsable in Visual Studio watch window&quot;, then &quot;is it possible to make initialization work like [...]&quot; is <i>definitely</i> off-topic."}], "tags": [], "owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "is_accepted": true, "score": 0, "last_activity_date": 1540392501, "creation_date": 1540392501, "answer_id": 52971952, "question_id": 52971676, "link": "https://stackoverflow.com/questions/52971676/c-custom-array-browsable-in-visual-studio-watch-window/52971952#52971952", "title": "c++ custom array browsable in Visual Studio watch window", "body": "<p>You can use <code>.natvis</code> files for this purpose. Either you can define the visualization via pattern-matching or via a custom debug visualization application:</p>\n\n<p><a href=\"https://code.msdn.microsoft.com/windowsdesktop/Writing-type-visualizers-2eae77a2\" rel=\"nofollow noreferrer\">https://code.msdn.microsoft.com/windowsdesktop/Writing-type-visualizers-2eae77a2</a>\n<a href=\"https://code.msdn.microsoft.com/Writing-graphical-debugger-a17e3d75\" rel=\"nofollow noreferrer\">https://code.msdn.microsoft.com/Writing-graphical-debugger-a17e3d75</a></p>\n\n<p>However, if you want an \"array with custom malloc\", you can leverage the <a href=\"https://en.cppreference.com/w/cpp/named_req/Allocator\" rel=\"nofollow noreferrer\">allocator</a> support in <code>std::vector</code>.</p>\n"}], "owner": {"reputation": 93, "user_id": 9061350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c69a80979e3cead1f41505ceb768de7f?s=128&d=identicon&r=PG&f=1", "display_name": "Gigi", "link": "https://stackoverflow.com/users/9061350/gigi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 52971952, "answer_count": 1, "score": 0, "last_activity_date": 1540392501, "creation_date": 1540391707, "question_id": 52971676, "link": "https://stackoverflow.com/questions/52971676/c-custom-array-browsable-in-visual-studio-watch-window", "title": "c++ custom array browsable in Visual Studio watch window", "body": "<p>I would like to create an array like class in C++. Among other reasons, because I want an array with custom malloc. This may seem simple enough, but I want to use it like an usual array, meaning:</p>\n\n<pre><code>- initialization like   arr foo[10];   or   arr bla[] = {2, 3};\n- more important, I want to be able to see its members in Visual Studio watch window.\n</code></pre>\n\n<p>I mean in the Visual Studio watch window you just click on left of an array and it's content is expanded and all members are shown. For the watch part I'm interested in both kind of solutions: a clever designed class and an add-on for Visual Studio.</p>\n"}, {"tags": ["c++", "templates", "multidimensional-array"], "comments": [{"owner": {"reputation": 36513, "user_id": 752976, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/j7Uis.jpg?s=128&g=1", "display_name": "Bartek Banachewicz", "link": "https://stackoverflow.com/users/752976/bartek-banachewicz"}, "edited": false, "score": 0, "creation_date": 1540391506, "post_id": 52971550, "comment_id": 92849543, "body": "You can create such a tuple with info from <a href=\"https://stackoverflow.com/a/17644256/752976\">here</a>. I&#39;d write it up, but I think someone will be quicker. The operator impl itself is pretty easy then."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 2, "creation_date": 1540391935, "post_id": 52971550, "comment_id": 92849832, "body": "<code>std::array</code> might be more appropriate if type are identical."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1540391946, "post_id": 52971550, "comment_id": 92849843, "body": "So you want a d-dimensional matrix of n-dimensional vectors, but what governs the size of the matrix? Also, this sounds a lot like boost::multi_array."}, {"owner": {"reputation": 2039, "user_id": 737971, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cc56d3a9285353e2a29f9289597005a3?s=128&d=identicon&r=PG", "display_name": "senseiwa", "link": "https://stackoverflow.com/users/737971/senseiwa"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1540392270, "post_id": 52971550, "comment_id": 92850099, "body": "I modified the question according to @Quentin&#39;s comment. I pass at runtime the length of the storage computing how many blocks I need (rows times columns). And no, I&#39;d like to avoid boost, as long as I can have fun with coding it."}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1540398663, "post_id": 52971550, "comment_id": 92854235, "body": "@senseiwa - sorry but aren&#39;t clear to me the dimension involved. And which dimension are known run-time and wich one compile-time (and maybe are, somewhere, template parameters). Can you add some example of intended declaration/initialization and use?"}, {"owner": {"reputation": 2039, "user_id": 737971, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cc56d3a9285353e2a29f9289597005a3?s=128&d=identicon&r=PG", "display_name": "senseiwa", "link": "https://stackoverflow.com/users/737971/senseiwa"}, "reply_to_user": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1540404071, "post_id": 52971550, "comment_id": 92857131, "body": "@max66 Sorry, I forgot the template definition! Now the question has been edited. Basically, at runtime I just need to know how many blocks I need to store, at compile time, the block size and its dimension."}, {"owner": {"reputation": 2039, "user_id": 737971, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cc56d3a9285353e2a29f9289597005a3?s=128&d=identicon&r=PG", "display_name": "senseiwa", "link": "https://stackoverflow.com/users/737971/senseiwa"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1540404735, "post_id": 52971550, "comment_id": 92857518, "body": "@Jarod42 you are absolutely right, I wonder though what difference would it make performance-wise to use an array of references with respect to a tuple of references. However, I\u2019d really like to use a tuple just for the fun of it :)"}, {"owner": {"reputation": 59936, "user_id": 6022656, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf138f6c424001ac8491ca86b1976c0c?s=128&d=identicon&r=PG&f=1", "display_name": "max66", "link": "https://stackoverflow.com/users/6022656/max66"}, "edited": false, "score": 0, "creation_date": 1540409319, "post_id": 52971550, "comment_id": 92859711, "body": "@senseiwa - just trying to understand... but... it seems to me that only if all sizes are fixed compile time (so <code>storage&lt;3, 2, 8, double&gt; storageobj;</code> instead of <code>storage&lt;3, 2, double&gt; storageobj&lt;3, 2, double&gt; storageobj{8}</code>) make sense returning a tuple of references because a variation of the run-time value (the length) can cause the relocation of values of the effective data container (a <code>std::vector</code>, I suppose) so the references obtained (before) with <code>operator()</code> are not valid anymore."}], "answers": [{"tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1540413038, "creation_date": 1540413038, "answer_id": 52977494, "question_id": 52971550, "link": "https://stackoverflow.com/questions/52971550/define-tuples-of-numbers-in-d-dimensions-and-accessing-them/52977494#52977494", "title": "Define tuples of numbers in d dimensions and accessing them", "body": "<p>I changed <code>MultiArray</code> from <a href=\"https://stackoverflow.com/a/33042764/2684539\">How to allocate &amp; access 3D, 4D, 5D arrays?</a> to have some static size with <code>std::array</code>:</p>\n\n<pre><code>template &lt;typename T, std::size_t Dim&gt;\nclass MultiArray\n{\npublic:\n\n    explicit MultiArray(const std::array&lt;std::size_t, Dim&gt;&amp; dimensions) :\n        dimensions(dimensions),\n        values(computeTotalSize(dimensions))\n    {\n        assert(!values.empty());\n    }\n\n    const T&amp; get(const std::array&lt;std::size_t, Dim&gt;&amp; indexes) const\n    {\n        return values[computeIndex(indexes)];\n    }\n    T&amp; get(const std::array&lt;std::size_t&gt;&amp; indexes)\n    {\n        return values[computeIndex(indexes)];\n    }\n\n    std::size_t computeIndex(const std::array&lt;std::size_t, Dim&gt;&amp; indexes) const\n    {\n        size_t index = 0;\n        size_t mul = 1;\n\n        for (size_t i = 0; i != dimensions.size(); ++i) {\n            assert(indexes[i] &lt; dimensions[i]);\n            index += indexes[i] * mul;\n            mul *= dimensions[i];\n        }\n        assert(index &lt; values.size());\n        return index;\n    }\n\n    std::array&lt;std::size_t, Dim&gt; computeIndexes(std::size_t index) const\n    {\n        assert(index &lt; values.size());\n\n        std::array&lt;std::size_t, Dim&gt; res;\n\n        std::size_t mul = values.size();\n        for (std::size_t i = dimensions.size(); i != 0; --i) {\n            mul /= dimensions[i - 1];\n            res[i - 1] = index / mul;\n            assert(res[i - 1] &lt; dimensions[i - 1]);\n            index -= res[i - 1] * mul;\n        }\n        return res;\n    }\n\nprivate:\n    std::size_t computeTotalSize(const std::array&lt;std::size_t, Dim&gt;&amp; dimensions) const\n    {\n        std::size_t totalSize = 1;\n\n        for (auto i : dimensions) {\n            totalSize *= i;\n        }\n        return totalSize;\n    }\n\nprivate:\n    std::array&lt;std::size_t, Dim&gt; dimensions;\n    std::vector&lt;T&gt; values;\n};\n</code></pre>\n\n<p>Then add layer to adapt it to your interface (<code>MultiArray</code> might have been written similar to <code>storage_impl</code> to avoid that).</p>\n\n<p>To transform <code>array&lt;std::size_t, N&gt;</code> in to <code>std::size_t, .., std::size_t</code>, we use <code>std::index_sequence&lt;0, 1, 2, .., N - 1&gt;</code> to allow variadic expansion. then we just have to transform it to type:</p>\n\n<pre><code>template &lt;std::size_t, typename T&gt;\nusing always_type = T;\n\ntemplate &lt;std::size_t n, typename Seq, typename Number&gt;\nclass storage_impl;\n\ntemplate &lt;std::size_t n, typename Number, std::size_t ... Is&gt;\nclass storage_impl&lt;n, std::index_sequence&lt;Is...&gt;, Number&gt;\n{\npublic:\n    storage_impl(always_type&lt;Is, std::size_t&gt;... dims) : array{{{dims...}}} ()\n\n    std::array&lt;Number, n&gt;&amp;\n    operator()(always_type&lt;Is, std::size_t&gt;... indexes)\n    {\n        return array.get({{indexes...}});\n    }\n\n    const std::array&lt;Number, n&gt;&amp;\n    operator()(always_type&lt;Is, std::size_t&gt;... indexes) const\n    {\n        return array.get({{indexes...}});\n    }\n\nprivate:\n    MultiArray&lt;std::array&lt;Number, n&gt;, sizeof...(Is)&gt; array;\n};\n</code></pre>\n\n<p>And finally:</p>\n\n<pre><code>template &lt;std::size_t n, std::size_t d, typename Number&gt;\nusing storage = storage_impl&lt;n, std::make_index_sequence&lt;d&gt;, Number&gt;;\n</code></pre>\n\n<p>Usage would be similar to:</p>\n\n<pre><code>// define a 2D matrix of three doubles\n storage&lt;3, 2, double&gt; storageobj(2, 4); // matrix 2x4 of std::array&lt;double, 3&gt;\n\n auto&amp;&amp; block = storageobj(0, 1); // std::array&lt;double, 3&gt;&amp;\n std::get&lt;0&gt;(block) = -123.456;   // or block[0] = -123.456\n</code></pre>\n"}], "owner": {"reputation": 2039, "user_id": 737971, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/cc56d3a9285353e2a29f9289597005a3?s=128&d=identicon&r=PG", "display_name": "senseiwa", "link": "https://stackoverflow.com/users/737971/senseiwa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 52977494, "answer_count": 1, "score": 1, "last_activity_date": 1540541549, "creation_date": 1540391367, "last_edit_date": 1540541549, "question_id": 52971550, "link": "https://stackoverflow.com/questions/52971550/define-tuples-of-numbers-in-d-dimensions-and-accessing-them", "title": "Define tuples of numbers in d dimensions and accessing them", "body": "<p>I am playing with an idea that might seem contorted, but I like the challenge, although it's just a C++ exercise I've invented. </p>\n\n<p>The task is to store a series of <strong>n</strong> scalars in <strong>d</strong> dimensions. Imagine having a vector, a matrix, or a 3D matrix of <strong>n</strong> doubles, or integers, or whatever, and choosing how many are there at runtime (calculated by hand, nothing fancy). </p>\n\n<p>Let's say for example I'd like a 1D array long <code>4</code> of two-doubles (<code>n == 2</code>, <code>d == 1</code>, at runtime I say I want a storage of <code>4</code>):</p>\n\n<pre><code>| d0 d1 | d0 d1 | d0 d1 | d0 d1 |\n</code></pre>\n\n<p>Or a 2D <code>2x4</code> grid of 3 doubles (<code>n == 3</code>, <code>d == 2</code>, at runtime I say I want a storage of <code>2 * 4</code>):</p>\n\n<pre><code>| d0 d1 d2 | d0 d1 d2 | d0 d1 d2 | d0 d1 d2 |\n| d0 d1 d2 | d0 d1 d2 | d0 d1 d2 | d0 d1 d2 |\n</code></pre>\n\n<p>How am I accessing for instance the <code>i, j</code>-th element of the grid? With an operator, of course... but I'd like to write a <strong>single</strong> operator returning a <strong>tuple of references</strong> to the three doubles.</p>\n\n<p>To give an idea:</p>\n\n<pre><code>template &lt;std::size_t n, std::size_t d, typename Number&gt;\nclass storage\n{\npublic:\n\n    // Magic tricks here?\n    auto operator()(std::size_t i_0, ..., std::size_t i_d) -&gt; std::tuple&lt;n std::ref&lt;Number&gt;s&gt;\n    {\n\n    }\n};\n</code></pre>\n\n<p>The problem is, how can I play some magic template tricks here to define <em>one</em> operator that returns a <em>tuple of homogeneous types</em>?</p>\n\n<p>I find it particularly difficult to think about how to define that tuple, and of course, the operator that must have exactly <strong>d</strong> parameters.</p>\n\n<p>As for the usage, I\u2019d like to be able to work like this for instance in the 2D example:</p>\n\n<pre><code> // define a matrix of three doubles\n storage&lt;3, 2, double&gt; storageobj(8);\n\n // get a block, these should be references\n auto block = storageobj(0, 1);\n std::get&lt;0&gt;(block) = -123.456;\n</code></pre>\n\n<p>Please note that the actual implementation of how to access elements in memory is of no concern now to me, but the definition of the return types and how to make the <code>operator()</code> are the primary objective of this exercise.</p>\n\n<p>Can some magic TMP help here?</p>\n"}, {"tags": ["c++", "documentation", "doxygen"], "comments": [{"owner": {"reputation": 2279, "user_id": 2767436, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/066110b639f57bb021509bfdc37461e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rene", "link": "https://stackoverflow.com/users/2767436/rene"}, "edited": false, "score": 0, "creation_date": 1540391539, "post_id": 52971442, "comment_id": 92849559, "body": "The type of comment that you used for the member variables is for before-item documentation, but you added it after the item. Use <code>&#47;&#47;!&lt;</code> for after-item documentation, or move your comment before the variables."}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1540392545, "post_id": 52971442, "comment_id": 92850288, "body": "Like Rene write use in both cases <code>&#47;&#47;&#47;&lt;</code> comment or <code>&#47;**&lt;</code> the form used for op: <code>&#47;&#47;*&lt;</code> is also wrong. See also the section about documenting the code in the manual (<a href=\"http://www.doxygen.org/manual/docblocks.html\" rel=\"nofollow noreferrer\">doxygen.org/manual/docblocks.html</a>)"}, {"owner": {"reputation": 5891, "user_id": 1657886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34d48ba7c8258ef5c613ba129411a6b0?s=128&d=identicon&r=PG", "display_name": "albert", "link": "https://stackoverflow.com/users/1657886/albert"}, "edited": false, "score": 0, "creation_date": 1540393125, "post_id": 52971442, "comment_id": 92850675, "body": "Is the <code>priority</code> function in another file? Try <code>&#47;** \\file *&#47;</code> at the top of the file."}, {"owner": {"reputation": 15, "user_id": 9474860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d834a66341e5badb7831806b3be106db?s=128&d=identicon&r=PG", "display_name": "sak18", "link": "https://stackoverflow.com/users/9474860/sak18"}, "edited": false, "score": 0, "creation_date": 1540398998, "post_id": 52971442, "comment_id": 92854426, "body": "Thanks guys .Made the changes according to after-item documentation,and also adding <code>@file</code> helped,it was in a different file."}], "owner": {"reputation": 15, "user_id": 9474860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d834a66341e5badb7831806b3be106db?s=128&d=identicon&r=PG", "display_name": "sak18", "link": "https://stackoverflow.com/users/9474860/sak18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 587, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540391067, "creation_date": 1540391067, "question_id": 52971442, "link": "https://stackoverflow.com/questions/52971442/doxygen-class-and-function-variables-not-getting-documented-properly", "title": "doxygen class and function variables not getting documented properly", "body": "<p>I am using <code>Doxygen</code> for the first time.I am trying to document my c++ project using <code>Doxygen</code>.<br>\nI am not getting proper documentation for my class/variables.<br>\nHere is the code:           </p>\n\n<pre><code>/**\n * Parse tree node for each symbol\n */\nclass node\n{\n    public:\n\nnode* left;/**left-address of left child*/\nnode* right;/**right-address of right child*/   \nchar ch;/**ch-character in the node*/\n\n\n/**\n *constructor for node\n *\n *@param le left child address\n *@param ri right child address\n *@param c character to be put in the node\n */\nnode(node* le,node* ri,char c)\n{\n    left=le;\n    right=ri;\n    ch=c;\n}\n\n}; \n</code></pre>\n\n<p>and also here:</p>\n\n<pre><code>/**\n *@brief returns priority\n *\n *Takes an operand and returns its priotity based on precedence.\n *Return -1 for '(' so that it always remains on the stack until ')' is encountered in infix.\n *\n *@param c operand or '('\n *\n *@return priority value\n */ \n\nint priority(char c)          \n{ \n     switch(c)\n    { \n        case '&gt;': return  0 ; \n        case 'V': return  1 ; \n        case '^': return  1 ; \n        case '~': return  2 ; \n        case '(': return -1 ;           \n        } \n    }\n\n    stack &lt;char&gt; op ;//*&lt;stack of operaators*/  \n</code></pre>\n\n<p>Neither do i get any documentation in snippet1 for my member variables and class.Same for <code>priority</code> function and <code>op</code> global variable.<br>\nI have tried both notations for my variables:<br>\n<code>stack &lt;char&gt; op ;//*&lt;stack of operaators*/</code><br>\nand<br>\n<code>node* left;/**left-address of left child*/</code></p>\n\n<p>All it showed was that the <code>op</code> variable existed,and priority function existed under the documentation without any of the description given in the comments.Same is the case for class <code>node</code>.Can someone help me see what's wrong with this?</p>\n"}, {"tags": ["c++", "c++11", "enums", "language-lawyer"], "comments": [{"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1540390680, "post_id": 52971159, "comment_id": 92848915, "body": "Note that it&#39;s not a standard violation to <i>accept</i> ill-formed code. It <i>is</i> a standard violation to not diagnose ill-formed code (unless otherwise specified in the standard)."}, {"owner": {"reputation": 5913, "user_id": 1244932, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d2c608e688b798896e8b516855fc1ab1?s=128&d=identicon&r=PG", "display_name": "user1244932", "link": "https://stackoverflow.com/users/1244932/user1244932"}, "reply_to_user": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1540390986, "post_id": 52971159, "comment_id": 92849158, "body": "@user2079303 So have no sense to report this to clang dev team?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 0, "creation_date": 1540391165, "post_id": 52971159, "comment_id": 92849294, "body": "Somewhat interestingly <code>using FooEnum = enum FooEnum : int;</code> does compile on both compilers (<a href=\"https://godbolt.org/z/Sw49IP\" rel=\"nofollow noreferrer\">godbolt.org/z/Sw49IP</a>)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 3, "creation_date": 1540391231, "post_id": 52971159, "comment_id": 92849340, "body": "@user1244932 If this is ill-formed,  and clang doesn&#39;t show a diagnostic (and standard doesn&#39;t say that diagnostic isn&#39;t required), then this should be reported."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1540396507, "post_id": 52971159, "comment_id": 92852946, "body": "Might be related to <a href=\"https://stackoverflow.com/q/29035225/1708801\">Why must an enumeration&#39;s size be provided when it is forward declared?</a>"}, {"owner": {"reputation": 5668, "user_id": 4083309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6b4ef5a2e912153069b82607789a717?s=128&d=identicon&r=PG&f=1", "display_name": "Arne Vogel", "link": "https://stackoverflow.com/users/4083309/arne-vogel"}, "edited": false, "score": 0, "creation_date": 1540478510, "post_id": 52971159, "comment_id": 92889279, "body": "FWIW, <a href=\"https://godbolt.org/z/nrVLp8\" rel=\"nofollow noreferrer\">MSVC also accepts the code without diagnostic</a>"}], "answers": [{"comments": [{"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 1, "creation_date": 1540390841, "post_id": 52971296, "comment_id": 92849035, "body": "This example is about enum class not about usual enum with underlying type specified like OP asked."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1540391054, "post_id": 52971296, "comment_id": 92849207, "body": "an example cannot prove the standard. To see if the example compiles you need to compile it but thats just what the question is about: Which compiler is right when accepting/rejecting OPs code"}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 1, "creation_date": 1540391224, "post_id": 52971296, "comment_id": 92849333, "body": "Since the title was <code>strong enum</code>, I assumed OP wanted <code>enum class</code>"}, {"owner": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1540391290, "post_id": 52971296, "comment_id": 92849387, "body": "I thought that if the full declaration was going to include the underlying type (<code>int</code> in this case, don&#39;t know what the grammar calls it officially) then the forward decl needed to include it also."}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "reply_to_user": {"reputation": 4411, "user_id": 751579, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/iux9g.png?s=128&g=1", "display_name": "davidbak", "link": "https://stackoverflow.com/users/751579/davidbak"}, "edited": false, "score": 0, "creation_date": 1540391495, "post_id": 52971296, "comment_id": 92849539, "body": "@davidbak It doesn&#39;t work like that for classes. I don&#39;t think it should be any different for enums. The point of forward declaration is to be able to use in context where you don&#39;t need to know the size or implementation of the type."}], "tags": [], "owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "is_accepted": false, "score": 0, "last_activity_date": 1540390703, "last_edit_date": 1540390703, "creation_date": 1540390667, "answer_id": 52971296, "question_id": 52971159, "link": "https://stackoverflow.com/questions/52971159/strong-enum-typedef-clang-bug-or-c11-standard-uncertainty/52971296#52971296", "title": "strong enum typedef: clang bug or c++11 standard uncertainty?", "body": "<blockquote>\n<pre><code>typedef enum FooEnum : int FooEnum;\n</code></pre>\n</blockquote>\n\n<p>The above line is not valid. I assume you are trying to forward declare. Please refer to the example below.</p>\n\n<pre><code>enum class FooEnum;\n\nint fooStar(FooEnum&amp;);\n\nenum class FooEnum : int {\n    A =1,\n    B\n};\n\nint foo(FooEnum fooEnum) {\n  return static_cast&lt;int&gt;(fooEnum);\n}\n\nint fooStar(FooEnum&amp; fooEnum) {\n  return static_cast&lt;int&gt;(fooEnum);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16482, "user_id": 5632316, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/9I9Vm.jpg?s=128&g=1", "display_name": "Oliv", "link": "https://stackoverflow.com/users/5632316/oliv"}, "is_accepted": true, "score": 7, "last_activity_date": 1540397205, "last_edit_date": 1592644375, "creation_date": 1540397205, "answer_id": 52973516, "question_id": 52971159, "link": "https://stackoverflow.com/questions/52971159/strong-enum-typedef-clang-bug-or-c11-standard-uncertainty/52973516#52973516", "title": "strong enum typedef: clang bug or c++11 standard uncertainty?", "body": "<p>This is a clang bug, you cannot have a <a href=\"http://eel.is/c++draft/dcl.enum#nt:opaque-enum-declaration\" rel=\"noreferrer\">opaque-enum-declaration</a> after a <code>typedef</code> specifier.</p>\n<p><a href=\"http://eel.is/c++draft/dcl.typedef#1.sentence-2\" rel=\"noreferrer\">[dcl.typedef]/1</a></p>\n<blockquote>\n<p>The typedef specifier shall not be combined in a decl-specifier-seq with any other kind of specifier except a <em>defining-type-specifier</em>,[...]</p>\n</blockquote>\n<p><a href=\"http://eel.is/c++draft/dcl.type#1\" rel=\"noreferrer\">[dcl.type]/1</a></p>\n<blockquote>\n<p>defining-type-specifier:</p>\n<ul>\n<li><p>type-specifier</p>\n</li>\n<li><p>class-specifier</p>\n</li>\n<li><p>enum-specifier</p>\n</li>\n</ul>\n</blockquote>\n<p><a href=\"http://eel.is/c++draft/dcl.enum#nt:enum-specifier\" rel=\"noreferrer\">[dcl.enum]/1</a></p>\n<blockquote>\n<p>enum-specifier:</p>\n<ul>\n<li><p>enum-head { enumerator-listopt }</p>\n</li>\n<li><p>enum-head { enumerator-list , }</p>\n</li>\n</ul>\n</blockquote>\n<p>So the code bellow is legal c++:</p>\n<pre><code>typedef enum FooEnum : int { A = 1, B } FooEnum;\n</code></pre>\n<p>but this one is not legal c++:</p>\n<pre><code>typedef enum FooEnum : int FooEnum;\n</code></pre>\n<p>Because <code>enum FooEnum:int</code> is not a <em>defining-type-specifier</em>.</p>\n"}], "owner": {"reputation": 5913, "user_id": 1244932, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d2c608e688b798896e8b516855fc1ab1?s=128&d=identicon&r=PG", "display_name": "user1244932", "link": "https://stackoverflow.com/users/1244932/user1244932"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 1, "accepted_answer_id": 52973516, "answer_count": 2, "score": 9, "last_activity_date": 1540397205, "creation_date": 1540390261, "last_edit_date": 1540390951, "question_id": 52971159, "link": "https://stackoverflow.com/questions/52971159/strong-enum-typedef-clang-bug-or-c11-standard-uncertainty", "title": "strong enum typedef: clang bug or c++11 standard uncertainty?", "body": "<p>For such code:</p>\n\n<pre><code>typedef enum FooEnum : int FooEnum;\nenum FooEnum : int { A = 1, B };\n</code></pre>\n\n<p>clang (linux/7.0.0) reports no errors [<code>-c -std=c++11 -pedantic</code>],\nbut gcc (linux/8.2.1) doesn't compile it:</p>\n\n<pre><code>g++ -c -std=c++11 -pedantic test2.cpp\ntest2.cpp:1:28: error: expected ';' or '{' before 'FooEnum'\n typedef enum FooEnum : int FooEnum;\n                            ^~~~~~~\ntest2.cpp:1:28: error: expected class-key before 'FooEnum'\ntest2.cpp:2:16: error: using typedef-name 'FooEnum' after 'enum'\n enum FooEnum : int { A = 1, B };\n                ^~~\ntest2.cpp:1:28: note: 'FooEnum' has a previous declaration here\n typedef enum FooEnum : int FooEnum;\n</code></pre>\n\n<p>In fact I have no idea why use typedef for enum in C++,\nbut question is this is bug in clang, because it accepts invalid code,\nor this is bug in c++11 standard, that allow different implementation?</p>\n\n<p>Update: as it was explained to me, the first typedef is used for objc++ compability,\nto use the same header during c++ code compilation and objc++.</p>\n"}, {"tags": ["c++", "arm"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1540390331, "post_id": 52971132, "comment_id": 92848650, "body": "The expression <code>myState=! myButton</code> is an <i>assignment</i>. I suppose you mean <code>myState != myButton</code>? Some <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">debugging</a> should have helped figure it out."}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 1, "creation_date": 1540390882, "post_id": 52971132, "comment_id": 92849080, "body": "I&#39;m having trouble following this code. Does <code>if (toggle != 0) { myLed =! myLed else myLed=myLed; }</code> compile (an <code>else</code> without an <code>if</code> inside the braces?)"}, {"owner": {"reputation": 8362, "user_id": 2993960, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/svN5z.jpg?s=128&g=1", "display_name": "Fiddling Bits", "link": "https://stackoverflow.com/users/2993960/fiddling-bits"}, "edited": false, "score": 0, "creation_date": 1540391328, "post_id": 52971132, "comment_id": 92849419, "body": "Probably need to use a timer, <code>SysTick</code> for example."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540392872, "post_id": 52971132, "comment_id": 92850502, "body": "overall <code>while(1)</code> without <code>sleep</code> or <code>std::condition_variable</code> &#39;s <code>.wait_for()</code>  is bad idea coz cpu going on full load then."}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 1, "creation_date": 1540393346, "post_id": 52971132, "comment_id": 92850830, "body": "This code does not compile.  On the &#39;if&#39; clause, my compiler generates: &quot;error: expected \u2018}\u2019 before \u2018else\u2019:&quot;"}, {"owner": {"reputation": 17209, "user_id": 1055118, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/44Trt.jpg?s=128&g=1", "display_name": "doctorlove", "link": "https://stackoverflow.com/users/1055118/doctorlove"}, "edited": false, "score": 0, "creation_date": 1540393701, "post_id": 52971132, "comment_id": 92851080, "body": "Can you try to re-post the exact code you are using?"}, {"owner": {"reputation": 3, "user_id": 10552428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4bac285f06ad2f90fa76e9186f93e6?s=128&d=identicon&r=PG&f=1", "display_name": "mac", "link": "https://stackoverflow.com/users/10552428/mac"}, "edited": false, "score": 0, "creation_date": 1540405609, "post_id": 52971132, "comment_id": 92857961, "body": "This is what I have modified it to, trying to simplify it but I don&#39;t understand why the else statements are causing a problem?"}, {"owner": {"reputation": 3, "user_id": 10552428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4bac285f06ad2f90fa76e9186f93e6?s=128&d=identicon&r=PG&f=1", "display_name": "mac", "link": "https://stackoverflow.com/users/10552428/mac"}, "edited": false, "score": 0, "creation_date": 1540405787, "post_id": 52971132, "comment_id": 92858045, "body": "I updated the code above"}], "answers": [{"tags": [], "owner": {"reputation": 2084, "user_id": 605307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0701a0034bcc346a1cf8399932a7cfd0?s=128&d=identicon&r=PG", "display_name": "cooperised", "link": "https://stackoverflow.com/users/605307/cooperised"}, "is_accepted": false, "score": 0, "last_activity_date": 1540408409, "creation_date": 1540408409, "answer_id": 52976387, "question_id": 52971132, "link": "https://stackoverflow.com/questions/52971132/how-to-avoid-led-blinking-in-a-while-loop-state-change/52976387#52976387", "title": "How to avoid led blinking in a while loop state change?", "body": "<p>There are a few things to point out about this code I think:</p>\n\n<ul>\n<li>Assignments like <code>myLed=myLed</code> do nothing at all.  If you don't assign a new value to a variable then it will keep its existing value.  Remove these to make your code clearer.</li>\n<li>There is no true 'boolean' (true/false) data type in C or C++, despite the presence of the <code>bool</code> type. Everything is a number. Unless the documentation tells you otherwise, there is no guarantee that the two values that the <code>myButton</code> input can take are the same as the two values to which you are setting <code>myState</code>.  Rather than toggling <code>myState</code> with <code>myState=!myState</code>, it would be safer to set it to mirror the value of the input variable by using e.g. <code>myState=myButton</code>.</li>\n<li>It is not clear what your <code>count</code> variable is doing.  Are you trying to detect only button presses, and not releases?  If so the most reliable method would be to check the value of <code>myButton</code>.</li>\n<li>In response to <a href=\"https://stackoverflow.com/users/440558/some-programmer-dude\">@Some programmer dude</a>'s comment, you have changed all occurences of <code>=!</code> to <code>!=</code> in your question, and this is not correct.  <code>a=!b</code> assigns <code>a</code> to have the value 'not <code>b</code>' (if <code>b</code> is true then <code>a</code> is false and vice-versa); <code>a!=b</code> is a comparison, evaluating to true if <code>a</code> and <code>b</code> are not equal.  It would probably be a good idea for you to read more about basic C syntax if you're making this kind of error.</li>\n</ul>\n\n<p>If I understand the intent of your code correctly, my suggestion would therefore be:</p>\n\n<pre><code>DigitalOut myLed(LED1);\nDigitalIn myButton(USER_BUTTON);\n\nint main() {\n\n    int myState = 0;\n\n    while (1) {\n        if (myState != myButton) {   // detect change of state\n        myState = myButton;          // record the state change\n        if (myButton) {              // if the button is down,\n            myLed = !myLed;          // toggle the led\n        }\n    }\n\n}\n</code></pre>\n\n<p>(It is possible that I have misunderstood your requirements though because your question is not particularly clear in this respect.)</p>\n"}], "owner": {"reputation": 3, "user_id": 10552428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e4bac285f06ad2f90fa76e9186f93e6?s=128&d=identicon&r=PG&f=1", "display_name": "mac", "link": "https://stackoverflow.com/users/10552428/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1540408409, "creation_date": 1540390162, "last_edit_date": 1540405761, "question_id": 52971132, "link": "https://stackoverflow.com/questions/52971132/how-to-avoid-led-blinking-in-a-while-loop-state-change", "title": "How to avoid led blinking in a while loop state change?", "body": "<p>I have a L476vg development board that I am running the following code for. My objective is to detect the state change with the button but also not have the led blink if I hold down the button. I downloaded several variations of the code but they all seem to not work properly. Can someone point out how to modify the code below so that the led changes states when the button is push and does not change states as a result of holding down the button</p>\n\n<pre><code>#include \"mbed.h\"\n\nDigitalOut myLed(LED1);                 //initializing the needed variable \n                                          and pins\nDigitalIn myButton(USER_BUTTON);\n\n\n\nint main() {\n\nint myState = 0;\nint count = 0;\nint toggle = 0;\n\n\n while (1){\n\n    if (myState != myButton){   //detect change of state\n         count ++;              // if state has changed increment the count\n         myState != myState;   // record the state change\n        toggle = count % 2;    // determin the toggle direction\n         if (toggle != 0){     //read the toggle \n           myLed != myLed;}     // if odd toggle the led\n         if (toggle = 0){\n           myLed = myLed; }    // if even keep same state \n\n   else\n      myLed = myLed;\n\n\n   }\n } \n\n}\n</code></pre>\n"}, {"tags": ["c++", "clang++", "ulimit", "address-sanitizer", "libfuzzer"], "comments": [{"owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "edited": false, "score": 0, "creation_date": 1540391661, "post_id": 52970994, "comment_id": 92849646, "body": "Is it possible to see <code>&#47;proc&#47;PID&#47;maps</code> before crash? I wonder if shadow memory range is occupied by someone before Asan has chance to initialize and <code>mmap</code> it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540416326, "post_id": 52970994, "comment_id": 92862768, "body": "<code>ulimit</code> doesn&#39;t make you use less memory, it just prevents you from using more memory. What are you expecting to happen if the application wants more than the limit, if not an error?"}, {"owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1540436882, "post_id": 52970994, "comment_id": 92867791, "body": "@Barmar yeah, I was hoping that an artificial memory cap would cause the program to OOM more often, but reduce the latency lag."}], "answers": [{"comments": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1540405763, "post_id": 52971512, "comment_id": 92858034, "body": "Maybe he can modify his code to reduce the <code>ulimit -v</code> value after asan startup/initialization."}], "tags": [], "owner": {"reputation": 12992, "user_id": 2170527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f36e49ac8529003cf57c003746388b?s=128&d=identicon&r=PG", "display_name": "yugr", "link": "https://stackoverflow.com/users/2170527/yugr"}, "is_accepted": false, "score": 0, "last_activity_date": 1540391590, "last_edit_date": 1540391590, "creation_date": 1540391249, "answer_id": 52971512, "question_id": 52970994, "link": "https://stackoverflow.com/questions/52970994/why-does-ulimit-v-not-work-under-clangs-address-sanitizer/52971512#52971512", "title": "why does ulimit -v not work under clang&#39;s address sanitizer?", "body": "<p>Asan reserves 1/8-th of process address space for shadow memory at startup to hold status of user data (allocated, freed, etc.). This is by design and there is nothing one can do about it.</p>\n\n<p>Note that you generally don't care about virtual memory but rather physical one (which is also causing <code>new</code> to fail in your case).</p>\n"}], "owner": {"reputation": 31438, "user_id": 908939, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/etRsI.jpg?s=128&g=1", "display_name": "Trevor Hickey", "link": "https://stackoverflow.com/users/908939/trevor-hickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1075, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1540436915, "creation_date": 1540389731, "last_edit_date": 1540436915, "question_id": 52970994, "link": "https://stackoverflow.com/questions/52970994/why-does-ulimit-v-not-work-under-clangs-address-sanitizer", "title": "why does ulimit -v not work under clang&#39;s address sanitizer?", "body": "<p>I'm using <a href=\"https://llvm.org/docs/LibFuzzer.html\" rel=\"nofollow noreferrer\">libFuzzer</a> to fuzz an API.<br>\nThe API is deserializing an array of bits (given by libFuzzer)<br>\nand converting them into c++ class instantiations.  </p>\n\n<p>Due to the serialization format, libFuzer is able construct a serialized object that tell the deserializer to reserve large amounts of data (which cannot be met).<br>\nThis is done through calls to <code>std::vector::resize()</code>.  The vector throws a <code>std::bad_alloc</code>, and although the problem is caught and safely mitigated, it causes extreme lag in the fuzzer (as mentioned in the <a href=\"https://github.com/google/fuzzer-test-suite/blob/master/tutorial/libFuzzerTutorial.md#ooms\" rel=\"nofollow noreferrer\">following documentation</a> on OOM issues).</p>\n\n<p>In an attempt to lower the amount of memory used when the fuzzer is running, I was hoping to set <code>ulimit -v</code> and adjust the available virtual memory of the process.  However doing so causes  </p>\n\n<pre><code>==27609==ERROR: AddressSanitizer failed to allocate 0xdfff0001000 (15392894357504) bytes at address 2008fff7000 (errno: 12)\n==27609==ReserveShadowMemoryRange failed while trying to map 0xdfff0001000 bytes. Perhaps you're using ulimit -v\n</code></pre>\n\n<p><strong>Why can't the address sanitizer work under ulmit -v?</strong><br>\nI wish it could, then I might be able to fuzz more effectively.  </p>\n\n<p><em>Other information:</em><br>\nMy build flags were:  </p>\n\n<pre><code>copts = [\n    \"-fsanitize=address,fuzzer\",\n    \"-fsanitize-trap=undefined,integer\",\n    \"-fsanitize-coverage=trace-pc,trace-cmp,trace-pc-guard\",\n    \"-g\",\n    \"-O0\",\n    \"-fno-omit-frame-pointer\",\n    \"-fno-sanitize=vptr\",\n],\nlinkopts = [\n    \"-fsanitize=address,fuzzer\",\n    \"-fsanitize-trap=undefined,integer\",\n    \"-fno-sanitize=vptr\",\n    \"-fsanitize-link-c++-runtime\",\n],\n</code></pre>\n\n<p>I tried turning flags off so I could set <code>ulimit</code> and run the fuzzer:  </p>\n\n<pre><code>copts = [\n    \"-fsanitize=fuzzer\",\n    \"-g\",\n    \"-O0\",\n    \"-fno-omit-frame-pointer\",\n],\nlinkopts = [\n    \"-fsanitize=fuzzer\",\n],\n</code></pre>\n\n<p>but this causes an immediate segfault.</p>\n"}, {"tags": ["c++", "c-strings"], "comments": [{"owner": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1540389779, "post_id": 52970961, "comment_id": 92848265, "body": "When I&#39;m not on a linux machine, I end up typing &quot;man atoi&quot; on google to get the manual for a function. It works pretty well. See <a href=\"https://linux.die.net/man/3/atoi\" rel=\"nofollow noreferrer\">linux.die.net/man/3/atoi</a>. Hope it answers your question."}, {"owner": {"reputation": 2088, "user_id": 4281998, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/q8Jvt.png?s=128&g=1", "display_name": "Brady Dean", "link": "https://stackoverflow.com/users/4281998/brady-dean"}, "edited": false, "score": 0, "creation_date": 1540389895, "post_id": 52970961, "comment_id": 92848345, "body": "cppreference has some good descriptions too"}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 4181465, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AndMs.jpg?s=128&g=1", "display_name": "Lilit Zakaryan", "link": "https://stackoverflow.com/users/4181465/lilit-zakaryan"}, "is_accepted": false, "score": 2, "last_activity_date": 1540392740, "last_edit_date": 1540392740, "creation_date": 1540390267, "answer_id": 52971163, "question_id": 52970961, "link": "https://stackoverflow.com/questions/52970961/c-string-returns-int-double-long-value-for-the-string/52971163#52971163", "title": "C-string returns int/double/long value for the string", "body": "<p><code>int atoi(const char s[])</code> accepts a null-terminated string and converts it into an <code>int</code>.</p>\n\n<p>For example, if <code>\"1234\"</code> is passed into the function, it will return <code>1234</code> as an <code>int</code>.</p>\n\n<p>If the string contains a decimal place, the number will be truncated, eg <code>\"104.21\"</code> will be returned as <code>104</code>. </p>\n\n<p>Same for <code>long atol(char s[])</code>, using a <code>long</code> instead of an <code>int</code>.</p>\n\n<p>For <code>double atof(char s[])</code>, the string is interpreted as a floating point number instead of an integral number, and is returned as a <code>double</code>.</p>\n"}], "owner": {"reputation": 23, "user_id": 10218966, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qo64nq8kHH0/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qdJB9yeabmSpgkrimqFZ89pIVVOQ/mo/photo.jpg?sz=128", "display_name": "Tran Anh Minh", "link": "https://stackoverflow.com/users/10218966/tran-anh-minh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -6, "last_activity_date": 1540392740, "creation_date": 1540389655, "question_id": 52970961, "link": "https://stackoverflow.com/questions/52970961/c-string-returns-int-double-long-value-for-the-string", "title": "C-string returns int/double/long value for the string", "body": "<p>I'm a beginner at C++ and my text book tell us some C-string Function:</p>\n\n<pre><code>int atoi(char s[]) // return int value for the string\ndouble atof(char s[]) // return double value for the string\nlong atol(char s[]) // return long value for the string\n</code></pre>\n\n<p>What does these functions do?\nThank you</p>\n"}, {"tags": ["c++", "vector"], "comments": [{"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540389734, "post_id": 52970935, "comment_id": 92848225, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Not a snippet of a load method."}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 4, "creation_date": 1540389788, "post_id": 52970935, "comment_id": 92848272, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/13029299/stdvectorresize-vs-stdvectorreserve\">std::vector::resize() vs. std::vector::reserve()</a>"}, {"owner": {"reputation": 351, "user_id": 8077270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRpox.jpg?s=128&g=1", "display_name": "eXPRESS", "link": "https://stackoverflow.com/users/8077270/express"}, "reply_to_user": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1540390094, "post_id": 52970935, "comment_id": 92848499, "body": "@UnholySheep you are sort of right but I did connect the resize/reserve since I did not know what the problem was and I think that if anyone in the future would google with same problem might find this useful."}, {"owner": {"reputation": 351, "user_id": 8077270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRpox.jpg?s=128&g=1", "display_name": "eXPRESS", "link": "https://stackoverflow.com/users/8077270/express"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 3, "creation_date": 1540390627, "post_id": 52970935, "comment_id": 92848885, "body": "@StoryTeller It is minimal in sense, that it provides isolated problem, I did not copy the whole load method/program ofc. But everything I put in here I thought it could be relevant to the problem. Complete, explained above. Verifiable, I do describe what is happening in quite clear way and if anyone would want to test this they can copy the code and run it themselves in no time. I think it is about ratio (since minimal and complete for example goes opposite directions a bit) and I believe the ratio is right on this one."}, {"owner": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540390896, "post_id": 52970935, "comment_id": 92849089, "body": "No, it&#39;s not. We do not know what <code>vertices</code> is, for instance in that static cast, for one. There&#39;s no copy and pasting the code sample on our end to check it. Read the linked page instead of interpreting the text of <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> yourself."}, {"owner": {"reputation": 351, "user_id": 8077270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRpox.jpg?s=128&g=1", "display_name": "eXPRESS", "link": "https://stackoverflow.com/users/8077270/express"}, "reply_to_user": {"reputation": 147720, "user_id": 817643, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3ec3655af26685ce29823b04cb6c78d5?s=128&d=identicon&r=PG", "display_name": "StoryTeller - Unslander Monica", "link": "https://stackoverflow.com/users/817643/storyteller-unslander-monica"}, "edited": false, "score": 0, "creation_date": 1540391304, "post_id": 52970935, "comment_id": 92849400, "body": "@StoryTeller I went through it quite fast, I admit :P, so I went through it again and the only problem I see is what you pointed out now, that i missed declaring what vertices in static_cast is, which I apologize for but I feel that you could have just pointed that out (if it was unclear) instead of directing me to page which actually could not help me to realize I forgot to put it in the code."}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1540391259, "post_id": 52970986, "comment_id": 92849368, "body": "More precisely, you attempt to use an object that has not been constructed and is thus not alive (although the memory <i>has</i> been set aside already)."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1540391489, "post_id": 52970986, "comment_id": 92849536, "body": "Yes @MaxLanghof, let&#39;s get precise, answer updated, thanks!"}], "tags": [], "owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "is_accepted": true, "score": 8, "last_activity_date": 1540391468, "last_edit_date": 1540391468, "creation_date": 1540389717, "answer_id": 52970986, "question_id": 52970935, "link": "https://stackoverflow.com/questions/52970935/vector-is-not-saving-values-c/52970986#52970986", "title": "Vector is not &quot;saving values&quot; C++", "body": "<p>Change this:</p>\n\n<pre><code>mainGraph.vertices.reserve(static_cast&lt;unsigned int&gt;(vertices));\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>mainGraph.vertices.resize(static_cast&lt;unsigned int&gt;(vertices));\n</code></pre>\n\n<p>since with <a href=\"http://www.cplusplus.com/reference/vector/vector/reserve/\" rel=\"nofollow noreferrer\">reserve()</a> the cells of the vector are not created, which can be done though with <a href=\"http://www.cplusplus.com/reference/vector/vector/resize/\" rel=\"nofollow noreferrer\">resize()</a>.</p>\n\n<p>As a result, in your code, you invoke <em>Undefined Behavior</em> (UB), when you do <code>mainGraph.vertices[tmp1]</code>, since you attempt to access an object that has not been constructed!</p>\n"}, {"tags": [], "owner": {"reputation": 19618, "user_id": 860585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/YagL1.jpg?s=128&g=1", "display_name": "Rotem", "link": "https://stackoverflow.com/users/860585/rotem"}, "is_accepted": false, "score": 7, "last_activity_date": 1540389733, "creation_date": 1540389733, "answer_id": 52970996, "question_id": 52970935, "link": "https://stackoverflow.com/questions/52970935/vector-is-not-saving-values-c/52970996#52970996", "title": "Vector is not &quot;saving values&quot; C++", "body": "<p><code>reserve</code> does not change the size of the <code>vector</code> or construct items. It only allocates memory that will be reserved for when you do add elements.</p>\n\n<p>Your call to <code>mainGraph.vertices[tmp1]</code> is undefined as it is accessing raw memory.</p>\n\n<p>Instead of <code>reserve</code>, use <code>resize</code> to both allocate and construct items.</p>\n"}, {"comments": [{"owner": {"reputation": 351, "user_id": 8077270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRpox.jpg?s=128&g=1", "display_name": "eXPRESS", "link": "https://stackoverflow.com/users/8077270/express"}, "edited": false, "score": 0, "creation_date": 1540397245, "post_id": 52973067, "comment_id": 92853440, "body": "I believe that would be inefficient (in my case anyway since I am working with big data) because the initial size of vector is not the final one and it would resize couple of times while moving data in memory. The impact might be small while making mistake somewhere in algo (list vs hashmap) can cost me way more but still if there is way to optimize, why not. :D"}, {"owner": {"reputation": 830, "user_id": 1794179, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/BnY2x.jpg?s=128&g=1", "display_name": "Sceptical Jule", "link": "https://stackoverflow.com/users/1794179/sceptical-jule"}, "reply_to_user": {"reputation": 351, "user_id": 8077270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRpox.jpg?s=128&g=1", "display_name": "eXPRESS", "link": "https://stackoverflow.com/users/8077270/express"}, "edited": false, "score": 0, "creation_date": 1540400364, "post_id": 52973067, "comment_id": 92855189, "body": "Well, you didn&#39;t say anything about big data. You described the problem and I wrote one possible solution based on information you gave. If you want a more suitable solution, then you should provide more details about the problem. By the way: &#180;std::vector::resize()&#180; of whatever you save your data in prevents repetitive resizing of the container."}, {"owner": {"reputation": 351, "user_id": 8077270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRpox.jpg?s=128&g=1", "display_name": "eXPRESS", "link": "https://stackoverflow.com/users/8077270/express"}, "edited": false, "score": 1, "creation_date": 1540402564, "post_id": 52973067, "comment_id": 92856321, "body": "Yes, that is true, I am not complaining. :D Your solution is of course right too. But in the matter of efficency I think it is always better to do resizing if you know the size in advance which was implied from my example. Anyway this can be helpful to other people in future, so thank you for your answer. :)"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "reply_to_user": {"reputation": 351, "user_id": 8077270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRpox.jpg?s=128&g=1", "display_name": "eXPRESS", "link": "https://stackoverflow.com/users/8077270/express"}, "edited": false, "score": 0, "creation_date": 1540475745, "post_id": 52973067, "comment_id": 92887371, "body": "@eXPRESS \u2022 if you know ahead of time how big your big data is, you can call <code>reserve</code> on the vector to pre-size the vector to the exact size of your big data.  Otherwise, if you don&#39;t know ahead of time how big your big data is, then just let vector do its thing."}, {"owner": {"reputation": 351, "user_id": 8077270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRpox.jpg?s=128&g=1", "display_name": "eXPRESS", "link": "https://stackoverflow.com/users/8077270/express"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1540574356, "post_id": 52973067, "comment_id": 92930357, "body": "@Eljay I know :), that is kind of what my original question and answers to that were about (respectively I though I also assigned that space to vector directly, that was the problem)."}], "tags": [], "owner": {"reputation": 830, "user_id": 1794179, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/BnY2x.jpg?s=128&g=1", "display_name": "Sceptical Jule", "link": "https://stackoverflow.com/users/1794179/sceptical-jule"}, "is_accepted": false, "score": 0, "last_activity_date": 1540395743, "creation_date": 1540395743, "answer_id": 52973067, "question_id": 52970935, "link": "https://stackoverflow.com/questions/52970935/vector-is-not-saving-values-c/52973067#52973067", "title": "Vector is not &quot;saving values&quot; C++", "body": "<p>That happened because you're trying to manage the size of your vectors manually. Let the STL do all the work dynamically:</p>\n\n<pre><code>Graph mainGraph;\nint edge;\n\nwhile (cin &gt;&gt; edge)\n{\n    Vertex newVertex;\n    newVertex.adjacentVertices.push_back(edge);\n    mainGraph.vertices.push_back(std::move(newVertex));\n}\n\nfor(const Vertex &amp;v : mainGraph.vertices)\n    cout &lt;&lt; v.adjacentVertices.size();\n</code></pre>\n\n<p><a href=\"https://ideone.com/BQq01W\" rel=\"nofollow noreferrer\">https://ideone.com/BQq01W</a></p>\n"}], "owner": {"reputation": 351, "user_id": 8077270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRpox.jpg?s=128&g=1", "display_name": "eXPRESS", "link": "https://stackoverflow.com/users/8077270/express"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 675, "favorite_count": 1, "accepted_answer_id": 52970986, "answer_count": 3, "score": 2, "last_activity_date": 1540395743, "creation_date": 1540389607, "last_edit_date": 1540391423, "question_id": 52970935, "link": "https://stackoverflow.com/questions/52970935/vector-is-not-saving-values-c", "title": "Vector is not &quot;saving values&quot; C++", "body": "<p>When reading from vector I put values in I got zero size. I have:</p>\n\n<pre><code>class Graph {\npublic:\n    vector&lt;Vertex&gt; vertices;\n};\n\nclass Vertex {\npublic:\n    vector&lt;int&gt; adjacentVertices;\n};\n</code></pre>\n\n<p>In my load method then:</p>\n\n<pre><code>int vertices, edges;\ncin &gt;&gt; vertices &gt;&gt; edges;\nGraph mainGraph;\nmainGraph.vertices.reserve(static_cast&lt;unsigned int&gt;(vertices));\nint tmp1, tmp2;\nfor (int i = 0; i &lt; edges; i++) {\n    cin &gt;&gt; tmp1 &gt;&gt; tmp2;\n    mainGraph.vertices[tmp1].adjacentVertices.push_back(tmp2);\n    cout &lt;&lt; mainGraph.vertices[tmp1].adjacentVertices.size(); //PRINTS NUMBERS -&gt; SEEMS OKAY\n}\n\ncout &lt;&lt; mainGraph.vertices.size(); //IS ZERO???\n\nfor(const Vertex &amp;v : mainGraph.vertices){ //CRASHES\n    cout &lt;&lt; v.adjacentVertices.size();\n}\n</code></pre>\n\n<p>I bet this is very stupid but what am I missing? I read the vector will self construct itself upon use if no special constructor is needed.</p>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 155, "user_id": 5035729, "user_type": "registered", "profile_image": "https://graph.facebook.com/605430872932757/picture?type=large", "display_name": "Shubham Wagh", "link": "https://stackoverflow.com/users/5035729/shubham-wagh"}, "reply_to_user": {"reputation": 34185, "user_id": 5470596, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BITFt.jpg?s=128&g=1", "display_name": "YSC", "link": "https://stackoverflow.com/users/5470596/ysc"}, "edited": false, "score": 0, "creation_date": 1540389763, "post_id": 52970879, "comment_id": 92848251, "body": "@YSC Sorry about it. It&#39;s Just a habit of mine. I will modify it."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 2, "creation_date": 1540390244, "post_id": 52970879, "comment_id": 92848599, "body": "It looks like you&#39;re having the usual issue of not checking for EOF correctly: you don&#39;t check whether <code>obj&gt;&gt;fetch_word</code> fails."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 1, "creation_date": 1540390538, "post_id": 52970879, "comment_id": 92848817, "body": "Unrelated to your question: Don&#39;t <code>exit()</code> a C++ program. When in <code>main()</code> simply <code>return</code>!"}, {"owner": {"reputation": 155, "user_id": 5035729, "user_type": "registered", "profile_image": "https://graph.facebook.com/605430872932757/picture?type=large", "display_name": "Shubham Wagh", "link": "https://stackoverflow.com/users/5035729/shubham-wagh"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1540390630, "post_id": 52970879, "comment_id": 92848886, "body": "@Quentin I don&#39;t get it."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 1, "creation_date": 1540390653, "post_id": 52970879, "comment_id": 92848899, "body": "Which is the correct thing to do, but totally unrelated to your issue, @J.Doe meant to write in his comment, but forgot! =)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540390761, "post_id": 52970879, "comment_id": 92848968, "body": "&quot;Output when replaced &quot;anyone&quot; by &quot;porter&quot;&quot; why so you expect that to work if you have your program tell <code>if(strlen(argv[1])!=strlen(argv[2])) cout&lt;&lt;&quot;\\nReplacement is not possible as size of New wor dis not equal to old word&quot;;</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 1, "creation_date": 1540390810, "post_id": 52970879, "comment_id": 92849011, "body": "&quot;I don&#39;t get it&quot; You have to check the result of <code>obj&gt;&gt;fetch_word;</code> If you don&#39;t you&#39;ll proccess garbage if the extraction of the string fails."}, {"owner": {"reputation": 155, "user_id": 5035729, "user_type": "registered", "profile_image": "https://graph.facebook.com/605430872932757/picture?type=large", "display_name": "Shubham Wagh", "link": "https://stackoverflow.com/users/5035729/shubham-wagh"}, "edited": false, "score": 0, "creation_date": 1540390946, "post_id": 52970879, "comment_id": 92849128, "body": "@J.Doe I used it to make sure old word and new word should have same length. PS: I got it , I should have exit the program at that moment."}, {"owner": {"reputation": 155, "user_id": 5035729, "user_type": "registered", "profile_image": "https://graph.facebook.com/605430872932757/picture?type=large", "display_name": "Shubham Wagh", "link": "https://stackoverflow.com/users/5035729/shubham-wagh"}, "edited": false, "score": 0, "creation_date": 1540391076, "post_id": 52970879, "comment_id": 92849224, "body": "@J.Doe How do I check result of  obj&gt;&gt;fetch_word;  ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 0, "creation_date": 1540391466, "post_id": 52970879, "comment_id": 92849524, "body": "When <code>(obj &gt;&gt; fetch_word)</code> evaluates to <code>true</code> it succeeded, when it evaluates to <code>false</code> it failed."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 5035729, "user_type": "registered", "profile_image": "https://graph.facebook.com/605430872932757/picture?type=large", "display_name": "Shubham Wagh", "link": "https://stackoverflow.com/users/5035729/shubham-wagh"}, "edited": false, "score": 0, "creation_date": 1540393036, "post_id": 52971799, "comment_id": 92850612, "body": "I get what are you suggesting but Its not working either. This time output is  : Is anyoneporter?   Who survived?   Somebody new?   anyporterse but you   ...."}], "tags": [], "owner": {"reputation": 7089, "user_id": 2852165, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/JwDJG.jpg?s=128&g=1", "display_name": "SHR", "link": "https://stackoverflow.com/users/2852165/shr"}, "is_accepted": false, "score": 1, "last_activity_date": 1540394227, "last_edit_date": 1540394227, "creation_date": 1540392037, "answer_id": 52971799, "question_id": 52970879, "link": "https://stackoverflow.com/questions/52970879/why-does-replacing-a-string-replace-part-of-another-string/52971799#52971799", "title": "Why does replacing a string replace part of another string?", "body": "<p>If we take the string \"Is anyone there?\"</p>\n\n<p>After read the word \"Is\" the read head is on the space after the \"Is\" so <code>tellg</code> will return 2.\nNow you're reading the next word, you skip white spaces and begin reading untill next white space character, you are reading the \"anyone\" word and put its replacement in the taken position (2).</p>\n\n<p>so it should give you the string: \"Isportere there?\"</p>\n\n<p>Not what you ment for, but not the result you've got.</p>\n\n<p>to fix it you should ignore white spaces before reading the position:</p>\n\n<p>like this:</p>\n\n<pre><code>//#include &lt;cwctype&gt; for iswspace\n\n//eat white spaces\nwhile(iswspace(obj.peek()))\n     obj.ignore();\n//now read head is on the beginning of a word, you can take position.\nint pos=obj.tellg();        \n</code></pre>\n\n<h2>Edit</h2>\n\n<p>You'll have to debug and see if the <code>tellg</code> returns 3 in the first line before you read the word \"anyone\". I sugggest to add some debug print for each replacement with the possition.</p>\n\n<h3>like:</h3>\n\n<pre><code> if(fetch_word==old_word)\n {\n    no++;\n    cout&lt;&lt;\"Replacing in pos \"&lt;&lt; pos &lt;&lt;endl;\n    obj.seekp(pos);\n    obj&lt;&lt;new_word;\n }\n</code></pre>\n\n<p>Now you can check:</p>\n\n<ul>\n<li>Does the <code>pos</code> was correct? (you can try to seekg and read the word again) </li>\n<li>Does the <code>seekp</code> was succes? (you can use <code>tellp</code> to check!)</li>\n<li>What happen when you just do <code>obj.seekp(3); obj&lt;&lt;\"porter\";</code> does it replace the string in the correct position?</li>\n</ul>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "is_accepted": false, "score": 0, "last_activity_date": 1540397845, "last_edit_date": 1540397845, "creation_date": 1540393514, "answer_id": 52972313, "question_id": 52970879, "link": "https://stackoverflow.com/questions/52970879/why-does-replacing-a-string-replace-part-of-another-string/52972313#52972313", "title": "Why does replacing a string replace part of another string?", "body": "<pre><code>#include &lt;cctype&gt;\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\n#include &lt;fstream&gt;\n#include &lt;iostream&gt;\n\nint main()\n{\n    std::string old_word{ \"anyone\" };\n    std::string new_word{ \"porter\" };\n\n    if (old_word.length() != new_word.length()) {\n        std::cerr &lt;&lt; \"Sorry, I can only replace words of equal length :(\\n\\n\";\n        return EXIT_FAILURE;\n    }\n\n    char const *filename{ \"test.txt\" };\n    std::fstream obj{ \"test.txt\", std::ios::in | std::ios::out };\n    if (!obj.is_open()) {\n        std::cerr &lt;&lt; \"Couldn't open \\\"\" &lt;&lt; filename &lt;&lt; \"\\\" for reading and writing.\\n\\n\";\n        return EXIT_FAILURE;\n    }\n\n    std::string word;\n    for (std::streampos pos; pos = obj.tellg(), obj &gt;&gt; word;) {\n        if (word == old_word) {\n            obj.seekg(pos);  // set the \"get\" position to where it were before extracting word\n            while (std::isspace(obj.peek()))  // for every whitespace we peek at\n                obj.get();                    // discard it\n            obj.seekp(obj.tellg());  // set the \"put\" position to the current \"get\" position\n            obj &lt;&lt; new_word;  // overwirte word with new_word\n            obj.seekg(obj.tellp());  // set the \"get\" position to the current \"put\" position                                             \n        }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 5035729, "user_type": "registered", "profile_image": "https://graph.facebook.com/605430872932757/picture?type=large", "display_name": "Shubham Wagh", "link": "https://stackoverflow.com/users/5035729/shubham-wagh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1540397845, "creation_date": 1540389429, "last_edit_date": 1540397813, "question_id": 52970879, "link": "https://stackoverflow.com/questions/52970879/why-does-replacing-a-string-replace-part-of-another-string", "title": "Why does replacing a string replace part of another string?", "body": "<p>I wrote a small piece of code today about replacing a word from a text file.\nThough it replaces the given word but it also removes some spaces and some part of other string.\nI want it to replace given word only while keeping rest as it as.\nI don't know what should I do. Any help would be appreciated!</p>\n\n<p>Original Data of file:  </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Is anyone there?  \nWho survived?  \nSomebody new?  \nAnyone else but you  \nOn a lonely night  \nWas a burning light  \nA hundred years, we'll be born again  \n</code></pre>\n\n<p>Output when replaced \"anyone\" by \"porter\":  </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Is anyonportere?  \nWho survived?  \nSomebody new?  \nanporterlse but you  \nOn a lonely night  \nWas a burning light  \nA hundred years, we'll be born again  \n</code></pre>\n\n<p>Code:</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>    #include&lt;iostream&gt;\n    #include&lt;fstream&gt;\n    #include&lt;cstdlib&gt;\n    #include&lt;cstring&gt;\n    using namespace std;\n\n    int main(int argc , char* argv[])\n    {\n        string old_word,new_word;\n        int no=0;\n        old_word=argv[1];\n        new_word=argv[2];\n\n        if(argc&lt;4)\n        {\n            cout&lt;&lt;\"\\nSome Arguments are missing\";\n            return 0;\n        }   \n\n        if(strlen(argv[1])!=strlen(argv[2]))\n        {\n            cout&lt;&lt;\"\\nReplacement is not possible as size of New wor dis not equal to old word\";\nreturn 0;\n        }\n\n        fstream obj;\n        obj.open(argv[3],ios::in|ios::out);\n        if(!obj)\n        {\n            cout&lt;&lt;\"\\nError in file creating\";\n            return 0;\n        }   \n        string fetch_word;\n        while(1)\n        {\n            if(obj.eof())\n            {\n                break;\n            }\n            else\n            {\n                int pos=obj.tellg();\n                obj&gt;&gt;fetch_word;\n                if(fetch_word==old_word)\n                {\n                    no++;\n                    obj.seekp(pos);\n                    obj&lt;&lt;new_word;\n                }\n            }\n        }\n        if(no==0)\n        {\n            cout&lt;&lt;\"\\nNo Replacement Done . Zero Replacement Found\";\n        }\n        else\n        {\n            cout&lt;&lt;\"\\nReplacement Done . Replacement Found =\"&lt;&lt;no&lt;&lt;endl;\n        }\n        obj.close();\n        return 0;\n    }   \n</code></pre>\n"}, {"tags": ["c++", "array-merge"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540388654, "post_id": 52970588, "comment_id": 92847414, "body": "What have you tried? Do you have a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> of your attempt to show us? What happens when you build or run your attempt? What do you expect to happen?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10543939"}, "edited": false, "score": 2, "creation_date": 1540388882, "post_id": 52970588, "comment_id": 92847569, "body": "What do you mean by &quot;merge the segments&quot;?"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540388953, "post_id": 52970588, "comment_id": 92847627, "body": "^^ this and how would you do it <b>with</b> first iteratatively copying them to another N/K sized arrays?"}, {"owner": {"reputation": 9434, "user_id": 528720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZpqMk.png?s=128&g=1", "display_name": "&#214;&#246; Tiib", "link": "https://stackoverflow.com/users/528720/%c3%96%c3%b6-tiib"}, "edited": false, "score": 0, "creation_date": 1540389631, "post_id": 52970588, "comment_id": 92848147, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2571049/how-to-sort-in-place-using-the-merge-sort-algorithm\">How to sort in-place using the merge sort algorithm?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7052, "user_id": 3854570, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d7bda3cab79b9bc5570667f8c0e24134?s=128&d=identicon&r=PG&f=1", "display_name": "Nelfeal", "link": "https://stackoverflow.com/users/3854570/nelfeal"}, "is_accepted": false, "score": 1, "last_activity_date": 1540389502, "creation_date": 1540389502, "answer_id": 52970908, "question_id": 52970588, "link": "https://stackoverflow.com/questions/52970588/merge-n-segments-of-a-vector-in-place-c/52970908#52970908", "title": "Merge N segments of a vector in place C++", "body": "<p>If you are talking about merge-sorting the segments, then you have <a href=\"https://en.cppreference.com/w/cpp/algorithm/inplace_merge\" rel=\"nofollow noreferrer\">std::inplace_merge</a>. Just do it K-1 times with an increasing number of elements in the first range.</p>\n"}], "owner": {"reputation": 1778, "user_id": 7034613, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8554ce8fd53af4a582599b00b5ebfe64?s=128&d=identicon&r=PG&f=1", "display_name": "DsCpp", "link": "https://stackoverflow.com/users/7034613/dscpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1540389502, "creation_date": 1540388558, "question_id": 52970588, "link": "https://stackoverflow.com/questions/52970588/merge-n-segments-of-a-vector-in-place-c", "title": "Merge N segments of a vector in place C++", "body": "<p>I have a <code>int64_t</code> vector containing N elements that are divided to k ordered segments.\ne.g if N = 9 and K=3 it can look something like that:\n<br></p>\n\n<pre><code>5,6,7,1,2,3,7,8,9\n</code></pre>\n\n<p>Is there a way to merge the segments in place without first iteratively coping them to another N/K sized arrays and merge?</p>\n"}, {"tags": ["c++", "stl", "c++17", "unordered-map", "boost-interprocess"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1540389623, "post_id": 52970469, "comment_id": 92848142, "body": "online compiler link does not work for me - compilation fails due to timeout. If you worry hide compilation errors under spoilers - &gt;!"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1540390894, "post_id": 52970469, "comment_id": 92849086, "body": "Looks like boost interprocess allocator is not movable"}, {"owner": {"reputation": 67, "user_id": 9620309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c8870ade16aced4c02880c03036e3?s=128&d=identicon&r=PG&f=1", "display_name": "EllipsenPark", "link": "https://stackoverflow.com/users/9620309/ellipsenpark"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1540391571, "post_id": 52970469, "comment_id": 92849577, "body": "@Slava hmm but wouldn&#39;t the error then be independent of the stdlib implementation ?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1540391809, "post_id": 52970469, "comment_id": 92849748, "body": "Have you tried to replace <code>Foo</code> with embedded type (like <code>int</code>) to check if issue related to object being not copyable or it is related to allocator?"}, {"owner": {"reputation": 67, "user_id": 9620309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c8870ade16aced4c02880c03036e3?s=128&d=identicon&r=PG&f=1", "display_name": "EllipsenPark", "link": "https://stackoverflow.com/users/9620309/ellipsenpark"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1540392283, "post_id": 52970469, "comment_id": 92850115, "body": "@Slava doesn&#39;t make a difference. I also tried explicitly moving the allocator, which works as well ..."}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 9620309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c8870ade16aced4c02880c03036e3?s=128&d=identicon&r=PG&f=1", "display_name": "EllipsenPark", "link": "https://stackoverflow.com/users/9620309/ellipsenpark"}, "edited": false, "score": 0, "creation_date": 1540458375, "post_id": 52973551, "comment_id": 92876376, "body": "hmm so <code>std::__detail::_Hash_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;*</code> is expected, but <code>boost::interprocess::offset_ptr&lt;std::__detail::_Hash_node&lt;st&zwnj;&#8203;d::pair&lt;const long unsigned int, Foo&gt;, false&gt;, long int, long unsigned int, 0&gt;</code> is passed, i guess ..."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": false, "score": 3, "last_activity_date": 1540397308, "creation_date": 1540397308, "answer_id": 52973551, "question_id": 52970469, "link": "https://stackoverflow.com/questions/52970469/c17-node-extraction-reinsertion-with-custom-allocator-works-with-clang-l/52973551#52973551", "title": "C++17 - node extraction/reinsertion with custom allocator - works with clang++/libc++ but not libstdc++", "body": "<p>It's complaining that the call to <code>_M_insert_unique_node</code> passes a fancy pointer but <code>_M_insert_unique_node</code> only accepts a raw pointer. Looks like a library bug.</p>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 9620309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c8870ade16aced4c02880c03036e3?s=128&d=identicon&r=PG&f=1", "display_name": "EllipsenPark", "link": "https://stackoverflow.com/users/9620309/ellipsenpark"}, "is_accepted": true, "score": 0, "last_activity_date": 1540476242, "creation_date": 1540476242, "answer_id": 52991293, "question_id": 52970469, "link": "https://stackoverflow.com/questions/52970469/c17-node-extraction-reinsertion-with-custom-allocator-works-with-clang-l/52991293#52991293", "title": "C++17 - node extraction/reinsertion with custom allocator - works with clang++/libc++ but not libstdc++", "body": "<p>More of a workaround than a fix, but replacing the <code>std::unordered_map</code> with a <code>boost::unordered_map</code> compiles and works with both toolchains.</p>\n\n<p>The only changes that needed to be made:    </p>\n\n<pre><code>// use boost instead ... \n#include &lt;boost/unordered_map.hpp&gt;\n\ntemplate &lt;typename OBJ_T&gt;\nusing OBJ_MAP = boost::unordered_map&lt;size_t,\n                                     OBJ_T,\n                                     std::hash&lt;size_t&gt;,\n                                     std::equal_to&lt;size_t&gt;,\n                                     std::scoped_allocator_adaptor&lt;OBJ_ALLOC&lt;OBJ_T&gt;&gt;&gt;;\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 9620309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e20c8870ade16aced4c02880c03036e3?s=128&d=identicon&r=PG&f=1", "display_name": "EllipsenPark", "link": "https://stackoverflow.com/users/9620309/ellipsenpark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 52991293, "answer_count": 2, "score": 0, "last_activity_date": 1540476242, "creation_date": 1540388255, "last_edit_date": 1540449905, "question_id": 52970469, "link": "https://stackoverflow.com/questions/52970469/c17-node-extraction-reinsertion-with-custom-allocator-works-with-clang-l", "title": "C++17 - node extraction/reinsertion with custom allocator - works with clang++/libc++ but not libstdc++", "body": "<p>I my current project i'm storing some data in an <code>unordered_map</code> in shared memory, using the Boost Interprocess library. Here's a minimal example:</p>\n\n<pre><code>#include &lt;unordered_map&gt;\n#include &lt;atomic&gt;\n#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;utility&gt;\n#include &lt;string&gt;\n#include &lt;scoped_allocator&gt;\n\n#include &lt;boost/interprocess/managed_shared_memory.hpp&gt;\n#include &lt;boost/interprocess/allocators/allocator.hpp&gt;\n\nnamespace ipc = boost::interprocess;\n\nstruct Foo {\n  Foo(size_t _a){\n    a = _a;\n  }\n  size_t a;\n  std::atomic&lt;bool&gt; deleted {false};\n};\n\n/**\n * allocator type needed to construct maps in shared memory\n */\ntemplate &lt;typename OBJ_T&gt;\nusing OBJ_ALLOC = ipc::allocator&lt;std::pair&lt;const size_t, OBJ_T&gt;,\n                 ipc::managed_shared_memory::segment_manager&gt;;\n\n/**\n * map type to construct maps in shared memory. ideally, only construct the content in-place\n * to avoid excessive copying ... \n */\ntemplate &lt;typename OBJ_T&gt;\nusing OBJ_MAP = std::unordered_map&lt;size_t,\n                   OBJ_T,\n                   std::hash&lt;size_t&gt;,\n                   std::equal_to&lt;size_t&gt;,\n                   std::scoped_allocator_adaptor&lt;OBJ_ALLOC&lt;OBJ_T&gt;&gt;&gt;;\n\nint main(){\n\n  OBJ_MAP&lt;Foo&gt; *map;\n  ipc::managed_shared_memory data_segment(ipc::open_or_create,\n                      std::string(\"data_segment\").c_str(),\n                      4096);\n\n  OBJ_ALLOC&lt;Foo&gt; alloc(data_segment.get_segment_manager());\n\n  map = data_segment.find_or_construct&lt;OBJ_MAP&lt;Foo&gt;&gt;\n    (ipc::unique_instance) \n    (alloc);\n\n  map-&gt;emplace(std::piecewise_construct,\n          std::forward_as_tuple(1),\n          std::forward_as_tuple(2321));\n  // before  \n  for(auto it = map-&gt;begin(); it != map-&gt;end(); it++) {\n    std::cout &lt;&lt; \"Key: \" &lt;&lt; it-&gt;first &lt;&lt; \" Value: \" &lt;&lt; it-&gt;second.a &lt;&lt; std::endl;\n  }\n\n  auto i = map-&gt;extract(1);\n  i.key() = 2;\n  map-&gt;insert(std::move(i));\n\n  // after\n  for(auto it = map-&gt;begin(); it != map-&gt;end(); it++) {\n    std::cout &lt;&lt; \"Key: \" &lt;&lt; it-&gt;first &lt;&lt; \" Value: \" &lt;&lt; it-&gt;second.a &lt;&lt; std::endl;\n  }\n\n  data_segment.destroy&lt;OBJ_MAP&lt;Foo&gt;&gt;(ipc::unique_instance);\n  ipc::shared_memory_object::remove(std::string(\"data_segment\").c_str());\n\n  return 0;  \n}\n</code></pre>\n\n<p>I originally developed the project on macOS, so i compiled against clang++/libc++ 7.0.0, which works perfectly fine.</p>\n\n<pre><code>clang++ test_map.cpp -std=c++17 -stdlib=libc++ -lpthread -lrt\n</code></pre>\n\n<p>Now i'm porting the whole thing to Linux, and get errors with g++ and libstdc++ (g++ 8.2.1).</p>\n\n<pre><code>g++ test_map.cpp -std=c++17 -lpthread -lrt\n</code></pre>\n\n<p>The node extraction doesn't compile because of an implicitly-deleted copy constructor, and the re-insertion fails because of some non-viable conversion, but the error messages are extremely cryptic.</p>\n\n<p>It works fine with clang++/libc++ on linux, but that'd mean that all dependent libraries like Boost needed to be compiled with the same toolchain, which is quite a hassle. </p>\n\n<p>How can those differences be explained, and is there a way around them ? </p>\n\n<p><strong>EDIT</strong>: here's the code: <a href=\"https://gcc.godbolt.org/z/L40Jsl\" rel=\"nofollow noreferrer\">https://gcc.godbolt.org/z/L40Jsl</a></p>\n\n<p><strong>EDIT</strong>: and the actual error message ...</p>\n\n<pre><code>user@computer ~/repos/playground % g++ -std=c++17 test_map.cpp\nIn file included from /usr/include/c++/8.2.1/unordered_map:46,\n                 from test_map.cpp:1:\n/usr/include/c++/8.2.1/bits/hashtable.h: In instantiation of \u2018std::_Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::insert_return_type \nstd::_Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::_M_reinsert_node(std::_Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, \n_H2, _Hash, _RehashPolicy, _Traits&gt;::node_type&amp;&amp;) [with _Key = long unsigned int; _Value = std::pair&lt;const long unsigned int, Foo&gt;; _Alloc = std::scoped_allocator_adaptor&lt;boost::inte\nrprocess::allocator&lt;std::pair&lt;const long unsigned int, Foo&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost\n::interprocess::iset_index&gt; &gt; &gt;; _ExtractKey = std::__detail::_Select1st; _Equal = std::equal_to&lt;long unsigned int&gt;; _H1 = std::hash&lt;long unsigned int&gt;; _H2 = std::__detail::_Mod_ran\nge_hashing; _Hash = std::__detail::_Default_ranged_hash; _RehashPolicy = std::__detail::_Prime_rehash_policy; _Traits = std::__detail::_Hashtable_traits&lt;false, false, true&gt;; std::_Ha\nshtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::insert_return_type = std::_Node_insert_return&lt;std::__detail::_Node_iterator&lt;std::pair&lt;con\nst long unsigned int, Foo&gt;, false, false&gt;, std::_Node_handle&lt;long unsigned int, std::pair&lt;const long unsigned int, Foo&gt;, std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;\nstd::__detail::_Hash_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_\nfamily&gt;, boost::interprocess::iset_index&gt; &gt; &gt; &gt; &gt;; typename std::__allocator_traits_base::__rebind&lt;_Alloc, std::__detail::_Hash_node&lt;_Value, typename _Traits::__hash_cached::value&gt;, \nvoid&gt;::type = std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;std::__detail::_Hash_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;, boost::interprocess::segment_man\nager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;; typename std::__detail::_Hashtable_base&lt;_Key, _Value, _Extra\nctKey, _Equal, _H1, _H2, _Hash, _Traits&gt;::iterator = std::__detail::_Node_iterator&lt;std::pair&lt;const long unsigned int, Foo&gt;, false, false&gt;; std::_Hashtable&lt;_Key, _Value, _Alloc, _Extr\nactKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::node_type = std::_Node_handle&lt;long unsigned int, std::pair&lt;const long unsigned int, Foo&gt;, std::scoped_allocator_adaptor&lt;boos\nt::interprocess::allocator&lt;std::__detail::_Hash_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;\nboost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt; &gt;]\u2019:\n/usr/include/c++/8.2.1/bits/unordered_map.h:438:53:   required from \u2018std::unordered_map&lt;_Key, _Tp, _Hash, _Pred, _Alloc&gt;::insert_return_type std::unordered_map&lt;_Key, _Tp, _Hash, _Pre\nd, _Alloc&gt;::insert(std::unordered_map&lt;_Key, _Tp, _Hash, _Pred, _Alloc&gt;::node_type&amp;&amp;) [with _Key = long unsigned int; _Tp = Foo; _Hash = std::hash&lt;long unsigned int&gt;; _Pred = std::equ\nal_to&lt;long unsigned int&gt;; _Alloc = std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Foo&gt;, boost::interprocess::segment_manager&lt;char, bo\nost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;; std::unordered_map&lt;_Key, _Tp, _Hash, _Pred, _Alloc&gt;::insert_return_type =\n std::_Node_insert_return&lt;std::__detail::_Node_iterator&lt;std::pair&lt;const long unsigned int, Foo&gt;, false, false&gt;, std::_Node_handle&lt;long unsigned int, std::pair&lt;const long unsigned int\n, Foo&gt;, std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;std::__detail::_Hash_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;, boost::interprocess::segment_manager&lt;c\nhar, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt; &gt; &gt;; std::unordered_map&lt;_Key, _Tp, _Hash, _Pred, _Alloc&gt;::node_type\n = std::_Node_handle&lt;long unsigned int, std::pair&lt;const long unsigned int, Foo&gt;, std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;std::__detail::_Hash_node&lt;std::pair&lt;cons\nt long unsigned int, Foo&gt;, false&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index\n&gt; &gt; &gt; &gt;]\u2019\ntest_map.cpp:63:27:   required from here\n/usr/include/c++/8.2.1/bits/hashtable.h:809:5: error: no matching function for call to \u2018std::_Hashtable&lt;long unsigned int, std::pair&lt;const long unsigned int, Foo&gt;, std::scoped_alloca\ntor_adaptor&lt;boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Foo&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interproces\ns::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;long unsigned int&gt;, std::hash&lt;long unsigned int&gt;, std::__detail::_Mod_range_hashing, \nstd::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::_M_insert_unique_node(std::_Hashtable&lt;long unsigned \nint, std::pair&lt;const long unsigned int, Foo&gt;, std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;std::pair&lt;const long unsigned int, Foo&gt;, boost::interprocess::segment_manag\ner&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;long unsigned int&gt;, s\ntd::hash&lt;long unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, fals\ne, true&gt; &gt;::size_type&amp;, std::_Hashtable&lt;long unsigned int, std::pair&lt;const long unsigned int, Foo&gt;, std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;std::pair&lt;const long \nunsigned int, Foo&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;, std::__d\netail::_Select1st, std::equal_to&lt;long unsigned int&gt;, std::hash&lt;long unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehas\nh_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::__hash_code&amp;, std::allocator_traits&lt;std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;std::__detail::_Has\nh_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::int\nerprocess::iset_index&gt; &gt; &gt; &gt;::pointer&amp;)\u2019\n     = _M_insert_unique_node(__bkt, __code, __nh._M_ptr);\n/usr/include/c++/8.2.1/bits/hashtable.h:1717:5: note: candidate: \u2018std::_Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::iterator std::_\nHashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::_M_insert_unique_node(std::_Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _\nH2, _Hash, _RehashPolicy, _Traits&gt;::size_type, std::_Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::__hash_code, std::_Hashtable&lt;_Key,\n _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::__node_type*, std::_Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolic\ny, _Traits&gt;::size_type) [with _Key = long unsigned int; _Value = std::pair&lt;const long unsigned int, Foo&gt;; _Alloc = std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;std::p\nair&lt;const long unsigned int, Foo&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index\n&gt; &gt; &gt;; _ExtractKey = std::__detail::_Select1st; _Equal = std::equal_to&lt;long unsigned int&gt;; _H1 = std::hash&lt;long unsigned int&gt;; _H2 = std::__detail::_Mod_range_hashing; _Hash = std::_\n_detail::_Default_ranged_hash; _RehashPolicy = std::__detail::_Prime_rehash_policy; _Traits = std::__detail::_Hashtable_traits&lt;false, false, true&gt;; std::_Hashtable&lt;_Key, _Value, _All\noc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::iterator = std::__detail::_Node_iterator&lt;std::pair&lt;const long unsigned int, Foo&gt;, false, false&gt;; std::_Hashtable&lt;_K\ney, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::size_type = long unsigned int; std::_Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2,\n _Hash, _RehashPolicy, _Traits&gt;::__hash_code = long unsigned int; std::_Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal, _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::__node_type = s\ntd::__detail::_Hash_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;; typename _Traits::__hash_cached = std::integral_constant&lt;bool, false&gt;]\u2019\n     _Hashtable&lt;_Key, _Value, _Alloc, _ExtractKey, _Equal,\n     ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n         _H1, _H2, _Hash, _RehashPolicy, _Traits&gt;::\n         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n/usr/include/c++/8.2.1/bits/hashtable.h:1717:5: note:   no known conversion for argument 3 from \u2018std::allocator_traits&lt;std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;st\nd::__detail::_Hash_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_fa\nmily&gt;, boost::interprocess::iset_index&gt; &gt; &gt; &gt;::pointer\u2019 {aka \u2018boost::interprocess::offset_ptr&lt;std::__detail::_Hash_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;, long int, lon\ng unsigned int, 0&gt;\u2019} to \u2018std::_Hashtable&lt;long unsigned int, std::pair&lt;const long unsigned int, Foo&gt;, std::scoped_allocator_adaptor&lt;boost::interprocess::allocator&lt;std::pair&lt;const long\n unsigned int, Foo&gt;, boost::interprocess::segment_manager&lt;char, boost::interprocess::rbtree_best_fit&lt;boost::interprocess::mutex_family&gt;, boost::interprocess::iset_index&gt; &gt; &gt;, std::__\ndetail::_Select1st, std::equal_to&lt;long unsigned int&gt;, std::hash&lt;long unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_reha\nsh_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::__node_type*\u2019 {aka \u2018std::__detail::_Hash_node&lt;std::pair&lt;const long unsigned int, Foo&gt;, false&gt;*\u2019}\n</code></pre>\n"}, {"tags": ["c++", "visual-c++", "dll", "stdstring", "dllexport"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 2, "creation_date": 1540387812, "post_id": 52970253, "comment_id": 92846803, "body": "Take a look at the type-alias <code>GetGreetings</code> in your application, and compare it to the declaration of <code>_3Greetings</code> in the DLL. Are they the same?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 0, "creation_date": 1540387849, "post_id": 52970253, "comment_id": 92846828, "body": "And if you want to pass things by reference, <i>use</i> references instead of pointers."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1540393060, "post_id": 52970253, "comment_id": 92850632, "body": "Non-POD types, such as <code>std::string</code>, are not interop-safe and should not be passed over the DLL boundary like this at all. Even if the DLL and EXE are compiled with the same version of the same compiler, it is still not safe. So just don&#39;t do it. Ever."}], "answers": [{"comments": [{"owner": {"reputation": 3140, "user_id": 1624844, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SXXv0.png?s=128&g=1", "display_name": "Amir-Mousavi", "link": "https://stackoverflow.com/users/1624844/amir-mousavi"}, "edited": false, "score": 0, "creation_date": 1540394763, "post_id": 52970507, "comment_id": 92851808, "body": "Thanks, I totally forgot about that GetProcAdress returns pointer and confused with function param pointer."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": true, "score": 1, "last_activity_date": 1540388362, "creation_date": 1540388362, "answer_id": 52970507, "question_id": 52970253, "link": "https://stackoverflow.com/questions/52970253/c-call-dll-function-with-string-reference-pointer/52970507#52970507", "title": "c++, Call dll function with string reference/pointer", "body": "<p>The typedef for GetGreeting is wrong, it misses a *</p>\n"}], "owner": {"reputation": 3140, "user_id": 1624844, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/SXXv0.png?s=128&g=1", "display_name": "Amir-Mousavi", "link": "https://stackoverflow.com/users/1624844/amir-mousavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 0, "accepted_answer_id": 52970507, "answer_count": 1, "score": -1, "last_activity_date": 1540392999, "creation_date": 1540387692, "last_edit_date": 1540392999, "question_id": 52970253, "link": "https://stackoverflow.com/questions/52970253/c-call-dll-function-with-string-reference-pointer", "title": "c++, Call dll function with string reference/pointer", "body": "<p>I have a solution with two projects, one DLL and one console app. The console app is a client to call and test functions in the DLL.</p>\n\n<p>For the first function <code>greetings</code>, I have faced a problem. I should mention that I am totally new to C and C++.</p>\n\n<p>The DLL project (called plugin) looks like this:</p>\n\n<p>plugin.h</p>\n\n<pre><code>#include \"types.h\" // which contains S32 and #include&lt;string&gt;\n#define EXPORT extern \"C\" __declspec (dllexport)\nEXPORT S32 WINAPI _3Greetings(string *str);\n</code></pre>\n\n<p>plugin.cpp</p>\n\n<pre><code>#include \"plugin.h\"\nS32 __stdcall _3Greetings(string *str)\n{\n    *str = \"Hello From Plugin!\";\n    return -1;\n}\n</code></pre>\n\n<p>All DLL functions should return <code>-1</code> on success or <code>[1-255]</code> on failure. Also, the project has <code>plugin.def</code> to solve name decorating of the <code>__stdcall</code> calling convention. </p>\n\n<p>The console app looks like this:</p>\n\n<pre><code>typedef U32(*GetGreetings)(string);    \nHMODULE DllHandler = ::LoadLibrary(L\"plugin.dll\");\n        if (DllHandler != NULL) {\n            string greetingText;\n            GetGreetings greetings = reinterpret_cast&lt;GetGreetings&gt;(GetProcAddress(DllHandler2, \"_3Greetings\"));\n            greetings(&amp;greetingText); // THE PROBLEM HERE\n            cout &lt;&lt; greetings &lt;&lt; endl;\n        }\n</code></pre>\n\n<p>The problem is if I add <code>&amp;</code> to <code>greetingText</code>, I get an error:</p>\n\n<blockquote>\n  <p>E0415     no suitable constructor exists to convert from \"std::string *\" to \"std::basic_string, std::allocator>\"</p>\n</blockquote>\n\n<p>And also:</p>\n\n<blockquote>\n  <p>C2664 'U32 (std::string)': cannot convert argument 1 from 'std::string *' to 'std::string'</p>\n</blockquote>\n\n<p>If I do not put the <code>&amp;</code>, I get a runtime exception:</p>\n\n<blockquote>\n  <p>Exception thrown at 0x0FA65A72 (plugin.dll) in ConsoleApp.exe: 0xC0000005: Access violation writing location 0xCCCCCC00.</p>\n</blockquote>\n"}, {"tags": ["c++", "type-conversion", "constants", "c++17"], "comments": [{"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1540387875, "post_id": 52970224, "comment_id": 92846848, "body": "So you are not satisfied with compile-time failure in case of wrong modifiers, like with <code>static_cast</code>?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1540387906, "post_id": 52970224, "comment_id": 92846877, "body": "Why do you need to cast <code>Bar</code> to <code>Foo</code> explicitly?"}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1540387925, "post_id": 52970224, "comment_id": 92846889, "body": "@DanM.: yes, exactly. This is for templated code. I don&#39;t want to fail, I want to return the correct type based on the argument&#39;s cv-qualifiers."}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 2, "creation_date": 1540387958, "post_id": 52970224, "comment_id": 92846911, "body": "There is no such cast built into the language. Though you could write your own using a combination of <code>std::is_const</code>, <code>std::add_const_t</code> and <code>std::remove_const_t</code>."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1540387972, "post_id": 52970224, "comment_id": 92846924, "body": "@Slava: because in the actual code the cast is between unrelated types. I used compatible types here purely for illustration and simplification."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1540388022, "post_id": 52970224, "comment_id": 92846956, "body": "I am afraid you oversimplified your case and it became meaningless. You better make more realistic example."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1540388036, "post_id": 52970224, "comment_id": 92846963, "body": "@VioletGiraffe when why not just overload based on the argument&#39;s cv-qualifiers?"}, {"owner": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1540388041, "post_id": 52970224, "comment_id": 92846970, "body": "@Slava The example seems fine to me."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 0, "creation_date": 1540388232, "post_id": 52970224, "comment_id": 92847105, "body": "@DanM.: at the very least because it duplicates otherwise exactly identical code."}, {"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "reply_to_user": {"reputation": 23093, "user_id": 7359094, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/HxJgU.jpg?s=128&g=1", "display_name": "Fran&#231;ois Andrieux", "link": "https://stackoverflow.com/users/7359094/fran%c3%a7ois-andrieux"}, "edited": false, "score": 0, "creation_date": 1540388298, "post_id": 52970224, "comment_id": 92847157, "body": "@Fran&#231;oisAndrieux: thanks. That&#39;s what I was afraid of. I didn&#39;t know about <code>std::add_const</code>, by the way, only <code>is_const</code>."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 1, "creation_date": 1540388312, "post_id": 52970224, "comment_id": 92847167, "body": "@VioletGiraffe you can use <code>if constexpr</code> to greatly reduce duplication."}], "answers": [{"tags": [], "owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "is_accepted": false, "score": 2, "last_activity_date": 1540388383, "creation_date": 1540388383, "answer_id": 52970512, "question_id": 52970224, "link": "https://stackoverflow.com/questions/52970224/is-there-a-built-in-way-to-cast-to-a-different-underlying-type-but-preserve-cons/52970512#52970512", "title": "Is there a built-in way to cast to a different underlying type but preserve const qualifiers?", "body": "<p>Not in the standard library, but it is certainly possible to implement it yourself:</p>\n\n<pre><code>namespace detail_base_type_cast {\n    template &lt;class In, class Out&gt;\n    struct copy_cv {\n        using type = Out;\n    };\n\n    template &lt;class In, class Out&gt;\n    struct copy_cv&lt;In const, Out &amp;&gt; {\n        using type = Out const &amp;;\n    };\n\n    template &lt;class In, class Out&gt;\n    struct copy_cv&lt;In volatile, Out &amp;&gt; {\n        using type = Out volatile &amp;;\n    };\n\n    template &lt;class In, class Out&gt;\n    struct copy_cv&lt;In const volatile, Out &amp;&gt; {\n        using type = Out const volatile &amp;;\n    };\n}\n\ntemplate &lt;class Out, class In&gt;\ntypename detail_base_type_cast&lt;In, Out&gt;::type\nbase_type_cast(In &amp;obj) {\n    return obj; // Implicit derived-to-base conversion\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 0, "creation_date": 1540389623, "post_id": 52970574, "comment_id": 92848139, "body": "I don&#39;t see how <code>common_reference</code> helps with my question, could you elaborate?"}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "edited": false, "score": 1, "creation_date": 1540389900, "post_id": 52970574, "comment_id": 92848353, "body": "it gives you the common reference, just as it says. I.e. reference that can be used to refer to both (or more exactly - all provided) types, so if one of them is <code>const</code> it&#39;ll also be const. See: <a href=\"https://godbolt.org/z/X5Zfc3\" rel=\"nofollow noreferrer\">godbolt.org/z/X5Zfc3</a>"}, {"owner": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1540399427, "post_id": 52970574, "comment_id": 92854670, "body": "The question also applies to pointers, but <code>common_reference</code> only applies to base types and reference types."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "reply_to_user": {"reputation": 3754, "user_id": 4732082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/781cea048e688814961606ddf35c5881?s=128&d=identicon&r=PG&f=1", "display_name": "anonymous", "link": "https://stackoverflow.com/users/4732082/anonymous"}, "edited": false, "score": 0, "creation_date": 1540401039, "post_id": 52970574, "comment_id": 92855535, "body": "@JonHarper it was edited after I&#39;ve made my comment. Nevertheless, it&#39;s trivial to turn reference into pointer. I.e. <code>common_pointer</code> could be defined as something like <code>add_pointer_t&lt;common_reference_t&lt;...&gt;&gt;</code>.  Not sure what&#39;s with all &quot;quiet&quot; down-votes."}], "tags": [], "owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "is_accepted": false, "score": -1, "last_activity_date": 1540389400, "last_edit_date": 1540389400, "creation_date": 1540388532, "answer_id": 52970574, "question_id": 52970224, "link": "https://stackoverflow.com/questions/52970224/is-there-a-built-in-way-to-cast-to-a-different-underlying-type-but-preserve-cons/52970574#52970574", "title": "Is there a built-in way to cast to a different underlying type but preserve const qualifiers?", "body": "<p>It looks like there is no C++17 or earlier stdlib way to do what you want in single function/statement.\nHowever it looks like there might be something like this in C++20: <a href=\"https://en.cppreference.com/w/cpp/types/common_reference\" rel=\"nofollow noreferrer\">https://en.cppreference.com/w/cpp/types/common_reference</a> (not available in any of the compilers yet it seems).</p>\n\n<p>EDIT: but it's available in Ranges lib so if you already use it, you can use <code>ranges::common_reference_t</code> instead.</p>\n\n<p>But for your use case, either overloading on argument constness or using <code>if constexpr</code> might be a better option.</p>\n\n<p>I.e. something like:</p>\n\n<pre><code>template&lt;typename T&gt;\nauto foo(T &amp;bar) {\n    // lots of code\n\n    if constexpr(std::is_const_v&lt;T&gt;) {\n        return static_cast&lt;const Foo&amp;&gt;(bar);\n    } else {\n        return static_cast&lt;Foo&amp;&gt;(bar);\n    }\n}\n</code></pre>\n\n<p><a href=\"https://godbolt.org/z/dbCUdM\" rel=\"nofollow noreferrer\">https://godbolt.org/z/dbCUdM</a></p>\n"}], "owner": {"reputation": 28830, "user_id": 634821, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d6d6c32f9917c7209b1bd9dfe888c293?s=128&d=identicon&r=PG", "display_name": "Violet Giraffe", "link": "https://stackoverflow.com/users/634821/violet-giraffe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1540389400, "creation_date": 1540387605, "last_edit_date": 1540388893, "question_id": 52970224, "link": "https://stackoverflow.com/questions/52970224/is-there-a-built-in-way-to-cast-to-a-different-underlying-type-but-preserve-cons", "title": "Is there a built-in way to cast to a different underlying type but preserve const qualifiers?", "body": "<p>Does the C++11/14/17 standard library have a way to cast an object to a different type but with the same cv-qualifiers as the original object? E. g.</p>\n\n<pre><code>char* ptr;\nconst char* cptr;\n</code></pre>\n\n<p><code>type_cast&lt;void*&gt;(ptr)</code> should yield the type <code>void*</code><br>\n<code>type_cast&lt;void*&gt;(cptr)</code> should yield the type <code>const void*</code></p>\n"}, {"tags": ["c++", "visual-studio-2017", "protocol-buffers", "grpc"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6848287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f702c39f04bddb4769bae3a521be457?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6848287/thomas"}, "edited": false, "score": 0, "creation_date": 1540449126, "post_id": 52974580, "comment_id": 92871268, "body": "Thanks.  I added <code>ws2_32.lib</code> to the Linker - Input - Additional Dependencies. <code>address_sorting</code> and <code>c-ares</code> are in the third_party folder of grpc therefore I added them as &quot;Include Directories&quot; too, but the error messages stay the same."}, {"owner": {"reputation": 560, "user_id": 2444610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b6730c3dc8687384557198c498015d5?s=128&d=identicon&r=PG", "display_name": "Nicolas Noble", "link": "https://stackoverflow.com/users/2444610/nicolas-noble"}, "reply_to_user": {"reputation": 61, "user_id": 6848287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f702c39f04bddb4769bae3a521be457?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6848287/thomas"}, "edited": false, "score": 0, "creation_date": 1540591508, "post_id": 52974580, "comment_id": 92937142, "body": "That&#39;s not enough to add them as &quot;include directories&quot;. You need to actively compile and link them too."}], "tags": [], "owner": {"reputation": 560, "user_id": 2444610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b6730c3dc8687384557198c498015d5?s=128&d=identicon&r=PG", "display_name": "Nicolas Noble", "link": "https://stackoverflow.com/users/2444610/nicolas-noble"}, "is_accepted": false, "score": 4, "last_activity_date": 1540401102, "creation_date": 1540401102, "answer_id": 52974580, "question_id": 52969929, "link": "https://stackoverflow.com/questions/52969929/unresolved-external-symbols-when-using-grpc-in-c/52974580#52974580", "title": "Unresolved External Symbols when using gRPC in C++", "body": "<p>The first symbol \"address_sorting_init\" comes from the library address sorting present at <a href=\"https://github.com/grpc/grpc/tree/master/third_party/address_sorting\" rel=\"nofollow noreferrer\">https://github.com/grpc/grpc/tree/master/third_party/address_sorting</a></p>\n\n<p>The second symbol is from the windows API library \"ws2_32\", the winsock library from Microsoft.</p>\n\n<p>The third symbol is from the c-ares library: <a href=\"https://c-ares.haxx.se/\" rel=\"nofollow noreferrer\">https://c-ares.haxx.se/</a></p>\n\n<p>All 3 libraries are necessary for building grpc under Windows, so you should add them into your project.</p>\n"}, {"tags": [], "owner": {"reputation": 650, "user_id": 7262969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7166b479349d245626ac1c841e1465?s=128&d=identicon&r=PG&f=1", "display_name": "Bal&#225;zs Kovacsics", "link": "https://stackoverflow.com/users/7262969/bal%c3%a1zs-kovacsics"}, "is_accepted": false, "score": 0, "last_activity_date": 1540573527, "creation_date": 1540573527, "answer_id": 53013391, "question_id": 52969929, "link": "https://stackoverflow.com/questions/52969929/unresolved-external-symbols-when-using-grpc-in-c/53013391#53013391", "title": "Unresolved External Symbols when using gRPC in C++", "body": "<p>With these libraries linked it works for me (in VS2015 and Win10):</p>\n\n<p><code>grpc++, grpc, gpr, libprotobuf, zlibstatic, ssl, crypto</code></p>\n\n<p>The last 2 are in the third_party/boringssl directory.</p>\n"}, {"tags": [], "owner": {"reputation": 1030, "user_id": 5328791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9e844bc5b0d3f4017b70eeeb1942cd4?s=128&d=identicon&r=PG&f=1", "display_name": "JM Yang", "link": "https://stackoverflow.com/users/5328791/jm-yang"}, "is_accepted": false, "score": 4, "last_activity_date": 1557846660, "last_edit_date": 1557846660, "creation_date": 1557846330, "answer_id": 56133515, "question_id": 52969929, "link": "https://stackoverflow.com/questions/52969929/unresolved-external-symbols-when-using-grpc-in-c/56133515#56133515", "title": "Unresolved External Symbols when using gRPC in C++", "body": "<p>The first error:</p>\n\n<pre><code>LNK2019 unresolved external symbol _address_sorting_init referenced in function \"void __cdecl grpc_resolver_dns_ares_init(void)\" (?grpc_resolver_dns_ares_init@@YAXXZ) grpc.lib(dns_resolver_ares.obj)  \n</code></pre>\n\n<p>can be resolved by adding the address_sorting.lib. This lib is in the grpc build directory, same as grpc++.lib, grpc.lib and gpr.lib.</p>\n\n<p>The second error:</p>\n\n<pre><code>LNK2001 unresolved external symbol __imp__htons@4 grpc.lib(socket_utils_windows.obj)\n</code></pre>\n\n<p>can be resolved by adding ws2_32.lib as per Nicolas suggested.</p>\n\n<p>The third error:</p>\n\n<pre><code>LNK2019 unresolved external symbol _ares_gethostbyname referenced in function \"struct grpc_ares_request * __cdecl grpc_dns_lookup_ares_continue_after_check_localhost_and_ip_literals_locked(char const *,char const *,char const *,struct grpc_pollset_set *,struct grpc_closure *,struct grpc_lb_addresses * *,bool,char * *,struct grpc_combiner *)\" (?grpc_dns_lookup_ares_continue_after_check_localhost_and_ip_literals_locked@@YAPAUgrpc_ares_request@@PBD00PAUgrpc_pollset_set@@PAUgrpc_closure@@PAPAUgrpc_lb_addresses@@_NPAPADPAUgrpc_combiner@@@Z)   grpc.lib(grpc_ares_wrapper.obj)\n</code></pre>\n\n<p>can be resolved by adding the cares.lib. You should be able to find this lib file under the third_party\\cares\\cares\\lib directory inside the grpc build directory, no need to get it from elsewhere.</p>\n\n<p>As a summary, suppose your grpc build directory is c:\\grpc\\.build, here are the libraries required for building a Release version application:</p>\n\n<pre><code>c:\\grpc\\.build\\grpc++.lib\nc:\\grpc\\.build\\gpr.lib\nc:\\grpc\\.build\\grpc.lib\nc:\\grpc\\.build\\address_sorting.lib\nc:\\grpc\\.build\\third_party\\protobuf\\libprotobuf.lib\nc:\\grpc\\.build\\third_party\\zlib.lib\nc:\\grpc\\.build\\third_party\\cares\\cares\\lib\\cares.lib\nws2_32.lib\n</code></pre>\n\n<p>If you want to build a Debug version of your application, please build a Debug version of grpc first, and then reference the libraries from the grpc debug version. To build a debug version with Ninja:</p>\n\n<pre><code>&gt; md .debug\n&gt; cd .debug\n&gt; call \"C:\\Program Files (x86)\\Microsoft Visual Studio\\2017\\Community\\VC\\Auxiliary\\Build\\vcvarsall.bat\" x64\n&gt; cmake .. -GNinja -DCMAKE_BUILD_TYPE=Debug\n&gt; cmake --build .\n</code></pre>\n\n<p>Please change above directory of vcvarsall.bat according to your Visual Studio installation.</p>\n\n<p>Please also note the Debug version of protobuf library file's name is libprotobufd.lib, not libprotobuf.lib.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 1296607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb761e1e1b667d771d556172b499c90?s=128&d=identicon&r=PG", "display_name": "ToneR", "link": "https://stackoverflow.com/users/1296607/toner"}, "is_accepted": false, "score": 1, "last_activity_date": 1585752850, "creation_date": 1585752850, "answer_id": 60973802, "question_id": 52969929, "link": "https://stackoverflow.com/questions/52969929/unresolved-external-symbols-when-using-grpc-in-c/60973802#60973802", "title": "Unresolved External Symbols when using gRPC in C++", "body": "<p>In my case I had to add all these libs to resolve all unresolved external symbols issues</p>\n\n<pre><code>libprotobufd.lib\ngpr.lib\ngrpc.lib\ngrpc++.lib\ngrpc++_reflection.lib\naddress_sorting.lib\nws2_32.lib\ncares.lib\nzlibstaticd.lib\nupb.lib\nssl.lib\ncrypto.lib\nabsl_bad_any_cast_impl.lib\nabsl_bad_optional_access.lib\nabsl_bad_variant_access.lib\nabsl_base.lib\nabsl_city.lib\nabsl_civil_time.lib\nabsl_cord.lib\nabsl_debugging_internal.lib\nabsl_demangle_internal.lib\nabsl_dynamic_annotations.lib\nabsl_examine_stack.lib\nabsl_exponential_biased.lib\nabsl_failure_signal_handler.lib\nabsl_flags.lib\nabsl_flags_config.lib\nabsl_flags_internal.lib\nabsl_flags_marshalling.lib\nabsl_flags_parse.lib\nabsl_flags_program_name.lib\nabsl_flags_registry.lib\nabsl_flags_usage.lib\nabsl_flags_usage_internal.lib\nabsl_graphcycles_internal.lib\nabsl_hash.lib\nabsl_hashtablez_sampler.lib\nabsl_int128.lib\nabsl_leak_check.lib\nabsl_leak_check_disable.lib\nabsl_log_severity.lib\nabsl_malloc_internal.lib\nabsl_periodic_sampler.lib\nabsl_random_distributions.lib\nabsl_random_internal_distribution_test_util.lib\nabsl_random_internal_pool_urbg.lib\nabsl_random_internal_randen.lib\nabsl_random_internal_randen_hwaes.lib\nabsl_random_internal_randen_hwaes_impl.lib\nabsl_random_internal_randen_slow.lib\nabsl_random_internal_seed_material.lib\nabsl_random_seed_gen_exception.lib\nabsl_random_seed_sequences.lib\nabsl_raw_hash_set.lib\nabsl_raw_logging_internal.lib\nabsl_scoped_set_env.lib\nabsl_spinlock_wait.lib\nabsl_stacktrace.lib\nabsl_status.lib\nabsl_strings.lib\nabsl_strings_internal.lib\nabsl_str_format_internal.lib\nabsl_symbolize.lib\nabsl_synchronization.lib\nabsl_throw_delegate.lib\nabsl_time.lib\nabsl_time_zone.lib\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6848287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f702c39f04bddb4769bae3a521be457?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/6848287/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4006, "favorite_count": 0, "answer_count": 4, "score": 5, "last_activity_date": 1585752850, "creation_date": 1540386702, "question_id": 52969929, "link": "https://stackoverflow.com/questions/52969929/unresolved-external-symbols-when-using-grpc-in-c", "title": "Unresolved External Symbols when using gRPC in C++", "body": "<p>Win10, Visual Studio 15 2017</p>\n\n<p>That's what I've done so far:</p>\n\n<ul>\n<li>cloned grpc and the submodules from github</li>\n<li><code>cmake --build</code> on grpc</li>\n<li>generated pb.cc and pb.h files from my proto-files </li>\n<li>added <em>grpc</em> and <em>protobuf</em> to VC++ Directories, Include Directories</li>\n<li>added <em>zlib</em>, <em>grpc</em> and <em>protobuf</em> to VC++ Directories, Library Directories </li>\n<li>added <em>zlib.lib</em>, <em>gpr.lib</em>, <em>grpc.lib</em>, <em>grpc++.lib</em> and <em>libprotobuf.lib</em> to Linker, Input, Additional Dependencies </li>\n<li>added Preprocessor Definitions: _WIN32_WINNT=0x600; NDEBUG</li>\n<li>changed Runtime Library to /MD</li>\n</ul>\n\n<p>After that my empty project including the pb-files compiled without an error.</p>\n\n<p>Then I wrote some code to use and test grpc but when I try to compile this time, I'm getting several errors like</p>\n\n<pre><code>LNK2019 unresolved external symbol _address_sorting_init referenced in function \"void __cdecl grpc_resolver_dns_ares_init(void)\" (?grpc_resolver_dns_ares_init@@YAXXZ) grpc.lib(dns_resolver_ares.obj)  \nLNK2001 unresolved external symbol __imp__htons@4 grpc.lib(socket_utils_windows.obj)    \nLNK2019 unresolved external symbol _ares_gethostbyname referenced in function \"struct grpc_ares_request * __cdecl grpc_dns_lookup_ares_continue_after_check_localhost_and_ip_literals_locked(char const *,char const *,char const *,struct grpc_pollset_set *,struct grpc_closure *,struct grpc_lb_addresses * *,bool,char * *,struct grpc_combiner *)\" (?grpc_dns_lookup_ares_continue_after_check_localhost_and_ip_literals_locked@@YAPAUgrpc_ares_request@@PBD00PAUgrpc_pollset_set@@PAUgrpc_closure@@PAPAUgrpc_lb_addresses@@_NPAPADPAUgrpc_combiner@@@Z)   grpc.lib(grpc_ares_wrapper.obj)\n</code></pre>\n"}, {"tags": ["c#", "c++", "arrays", "com", "marshalling"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1540386744, "post_id": 52969788, "comment_id": 92846068, "body": "1) Are you sure that MIDL compiles without warnings (for example, about ignored specifiers)? Since it is strange to see <code>out</code> argument that is not a pointer. 2) &quot;<i>I have tried to set a size_is()</i>&quot; <code>size_is</code> would serve a purpose if you would pass in multiple <code>OuterStruct</code>s, while, if I understand everything correctly, you are passing just a single one (even then, <code>size_is</code> require additional arguments specifying the size). I have never dabbled with such structs in COM. May try to do so later today."}, {"owner": {"reputation": 37, "user_id": 1697143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95f362da87f3184980d4112e83899c3?s=128&d=identicon&r=PG", "display_name": "Jens Mose Pedersen", "link": "https://stackoverflow.com/users/1697143/jens-mose-pedersen"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1540387120, "post_id": 52969788, "comment_id": 92846331, "body": "I try to write [in, size_is(1000)]."}, {"owner": {"reputation": 37, "user_id": 1697143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95f362da87f3184980d4112e83899c3?s=128&d=identicon&r=PG", "display_name": "Jens Mose Pedersen", "link": "https://stackoverflow.com/users/1697143/jens-mose-pedersen"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1540387143, "post_id": 52969788, "comment_id": 92846352, "body": "The error code I get back is"}, {"owner": {"reputation": 37, "user_id": 1697143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95f362da87f3184980d4112e83899c3?s=128&d=identicon&r=PG", "display_name": "Jens Mose Pedersen", "link": "https://stackoverflow.com/users/1697143/jens-mose-pedersen"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1540387157, "post_id": 52969788, "comment_id": 92846362, "body": "midl : error MIDL2471: Some attributes and/or data types in the idl and/or included/imported idl files can not be represented in the type library: size_is/max_is"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1540389270, "post_id": 52969788, "comment_id": 92847876, "body": "1) &quot;<i>I try to write [in, size_is(1000)]</i>&quot; Try to write it, on where? On <code>[in] const OuterStruct* par</code>? If so, you would be expected to pass in <code>OuterStruct par[1000]</code> into it, which, I doubt, is your intention. Even then, I never used hardcoded values for <code>size_is</code>, so I don&#39;t know if using hardcoded values are supported for <code>size_is</code>. 2) Make sure that your idl compiles without warnings. 3) You can edit your comments, so you don&#39;t comment spam."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1540395273, "post_id": 52969788, "comment_id": 92852139, "body": "Structs are quite tricky due to structure packing rules, formally you must use IRecordInfo to access their members.  Use sizeof in your C++ code and Marshal.SizeOf() in your C# code to double-check that the sizes agree."}, {"owner": {"reputation": 37, "user_id": 1697143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95f362da87f3184980d4112e83899c3?s=128&d=identicon&r=PG", "display_name": "Jens Mose Pedersen", "link": "https://stackoverflow.com/users/1697143/jens-mose-pedersen"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1540449069, "post_id": 52969788, "comment_id": 92871236, "body": "@Hans Passant How do I use IRecordInfo and marshall.SizeOf()?"}], "answers": [{"tags": [], "owner": {"reputation": 37, "user_id": 1697143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95f362da87f3184980d4112e83899c3?s=128&d=identicon&r=PG", "display_name": "Jens Mose Pedersen", "link": "https://stackoverflow.com/users/1697143/jens-mose-pedersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1540449054, "creation_date": 1540449054, "answer_id": 52982716, "question_id": 52969788, "link": "https://stackoverflow.com/questions/52969788/com-interface-c-marshalling-array-of-arrays/52982716#52982716", "title": "COM interface c# marshalling array of arrays", "body": "<p>In my IDL file I have tried to write</p>\n\n<pre><code>typedef [transmit_as(OuterStructAliasType)] OuterStruct* HelpType;\n</code></pre>\n\n<p>and keep the other declarations as</p>\n\n<pre><code>HRESULT SetStruct( [in] const OuterStruct* par, [out, retval] int code );\nHRESULT GetStruct( [out] OuterStruct* par, [out, retval] int code );\n</code></pre>\n\n<p>where in my C++ code I have defined </p>\n\n<pre><code>typedef struct OuterStructAliasType\n{\n    char    dummy[ sizeof( OuterStruct )];\n} OuterStructAliasType;\n</code></pre>\n\n<p>This seems to work.\nThere maybe are other ways to the trick.\nPlease tell me it they are smarter or better.</p>\n"}], "owner": {"reputation": 37, "user_id": 1697143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c95f362da87f3184980d4112e83899c3?s=128&d=identicon&r=PG", "display_name": "Jens Mose Pedersen", "link": "https://stackoverflow.com/users/1697143/jens-mose-pedersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540449054, "creation_date": 1540386279, "question_id": 52969788, "link": "https://stackoverflow.com/questions/52969788/com-interface-c-marshalling-array-of-arrays", "title": "COM interface c# marshalling array of arrays", "body": "<p>I have a COM server written in C++ that should interface with a client written in C#.\nThe C++ COM server exports interface functions to a structure that holds an array of structures with an array inside</p>\n\n<pre><code>struct InnerStruct  { int innerArray[ 100 ]; }\nstruct OuterStruct  { int dummy; InnerStruct outerArray[ 2 ]; }\n</code></pre>\n\n<p>So the structs have fixed size.</p>\n\n<p>The IDL descriptions are</p>\n\n<pre><code>HRESULT SetStruct( [in] const OuterStruct* par, [out, retval] int code );\nHRESULT GetStruct( [out] OuterStruct* par, [out, retval] int code );\n</code></pre>\n\n<p>The IDL compile fine and I can see the structure in the C# client.</p>\n\n<p>The problem is that when I call the interface functions from the C# client I only get/set the values in the first InnerStruct in the OuterStruct.\nThe second InnerStruct only holds garbage.</p>\n\n<p>The C# debugger shows the right structure for the OuterStruct and knows there are 2 InnerStruct inside the OuterStruct.</p>\n\n<p>In C# the declaration of the interface functions come from a server metafile, so it is not easy to change the description.</p>\n\n<p>I have tried to set a size_is() on the in and out parameters but the MIDL compiler will not accept that.</p>\n\n<p>Can I set up some specific marshaling on the parameters or how do I solve the problem of getting the complete OuterStruct trough COM?</p>\n"}, {"tags": ["c++", "cocos2d-x", "project-structure"], "comments": [{"owner": {"reputation": 4095, "user_id": 3957200, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/25mzd.jpg?s=128&g=1", "display_name": "Cinder Biscuits", "link": "https://stackoverflow.com/users/3957200/cinder-biscuits"}, "edited": false, "score": 0, "creation_date": 1540386527, "post_id": 52969743, "comment_id": 92845918, "body": "Do whatever makes sense to you."}, {"owner": {"reputation": 2647, "user_id": 9829403, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RvgmsYSS48c/AAAAAAAAAAI/AAAAAAAAAAw/pUPnPAhmDec/photo.jpg?sz=128", "display_name": "Tim Randall", "link": "https://stackoverflow.com/users/9829403/tim-randall"}, "edited": false, "score": 0, "creation_date": 1540387836, "post_id": 52969743, "comment_id": 92846817, "body": "No reasonable C++ compiler is going to have any problem dealing with header files in a separate directory. Put your files where you think is sensible, and don&#39;t worry about it."}, {"owner": {"reputation": 641, "user_id": 8186927, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dUWmzS5gqVI/AAAAAAAAAAI/AAAAAAAADPw/Z4Z-p4axcVg/photo.jpg?sz=128", "display_name": "Niuhuru Lang", "link": "https://stackoverflow.com/users/8186927/niuhuru-lang"}, "edited": false, "score": 0, "creation_date": 1540393010, "post_id": 52969743, "comment_id": 92850591, "body": "in java, we usually use package to divide modules, so is it recommended to use the namespace and directory do the same in c++?"}], "owner": {"reputation": 641, "user_id": 8186927, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-dUWmzS5gqVI/AAAAAAAAAAI/AAAAAAAADPw/Z4Z-p4axcVg/photo.jpg?sz=128", "display_name": "Niuhuru Lang", "link": "https://stackoverflow.com/users/8186927/niuhuru-lang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540386143, "creation_date": 1540386143, "question_id": 52969743, "link": "https://stackoverflow.com/questions/52969743/suggestion-needed-about-cocos2d-c-source-code-sturcture-please", "title": "suggestion needed about cocos2d c++ source code sturcture please", "body": "<p>I am a Java developer. Recently I am researching writing game with c++ and cocos2dx engine. When I trying to read other people's source codes, I find almost all people put all .cpp and .h files into one directory, which make a Java developer a bit of confused: how to maintenance the source code in the future?</p>\n\n<p>So can I get some suggestions on how to organise my c++ files with cocos2dx?</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["c++", "caffe"], "owner": {"reputation": 319, "user_id": 10285454, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ujOOl9OdcSc/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaORtu402bSp43Awfk8ftcU4n5K4fw/mo/photo.jpg?sz=128", "display_name": "cherry aldi", "link": "https://stackoverflow.com/users/10285454/cherry-aldi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1540386055, "creation_date": 1540386055, "question_id": 52969706, "link": "https://stackoverflow.com/questions/52969706/how-to-add-a-c-vector-of-weights-to-a-caffe-model-in-c", "title": "How to add a c++ vector of weights to a caffe model in C++", "body": "<p>In the c++ program below how do I add the c++ vector of weights to the convolution layer? </p>\n\n<p>I have a <code>caffe::ConvolutionParameter</code> obejct <code>convParam</code>, how do I add weights to it? Do I need to use a <code>caffe::BlobProto</code> object?</p>\n\n<p>Do I need to loop and copy the weights in one by one?</p>\n\n<p>I've searched online and cannot find any examples of how to do this in C++. </p>\n\n<p>When I have this done I will write it to a caffemodel file. I am already writing the network to a prototxt file.</p>\n\n<pre><code>#include &lt;fcntl.h&gt;\n#include &lt;google/protobuf/io/coded_stream.h&gt;\n#include &lt;google/protobuf/io/zero_copy_stream_impl.h&gt;\n#include &lt;google/protobuf/text_format.h&gt;\n#include &lt;stdint.h&gt;\n#include &lt;algorithm&gt;\n#include &lt;fstream&gt; // NOLINT(readability/streams)\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include \"caffe.pb.h\"\n#include &lt;iostream&gt;\n#include &lt;caffe/caffe.hpp&gt;\n\nusing namespace std;\nusing google::protobuf::Message;\nusing google::protobuf::io::CodedInputStream;\nusing google::protobuf::io::CodedOutputStream;\nusing google::protobuf::io::FileInputStream;\nusing google::protobuf::io::FileOutputStream;\nusing google::protobuf::io::ZeroCopyInputStream;\nusing google::protobuf::io::ZeroCopyOutputStream;\n\n/*Network object*/\ncaffe::NetParameter netParam; \n\nint main()\n{\n           caffe::LayerParameter *layerParam = netParam.add_layer();\n\n            /*Set name and type of the layer*/\n            layerParam-&gt;set_name(\"Test\";\n            layerParam-&gt;set_type(\"Convolution\");\n\n            /*Get the input operation*/\n            layerParam-&gt;add_bottom(\"bootom\");\n\n            /*Get the output operation*/\n            layerParam-&gt;add_top(\"top\");\n\n            /*Set layer to have a conv parameter*/\n            caffe::ConvolutionParameter *convParam = layerParam-&gt;mutable_convolution_param();\n\n            /*Set stride on ConvolutionParameter object*/\n            convParam-&gt;add_stride(2);\n\n            /*Set kernel on ConvolutionParameter object*/\n            convParam-&gt;add_kernel_size(3);\n\n            /*Set number of output channels*/\n            convParam-&gt;set_num_output(64);\n\n             /*weights*/\n             vector&lt;int&gt; weights{ 10, 20, 30 }; \n\n            //How to add weights to the layer??\n\n            //add_blobs()\n            caffe::BlobProto *blobProto = layerParam-&gt;add_blobs();\n            blobProto-&gt;has_shape();\n\n\n            /*create prototxt*/\n            std::ofstream ofs;\n            ofs.open(\"test.prototxt\", std::ofstream::out | std::ofstream::app);\n            ofs &lt;&lt; netParam.Utf8DebugString();\n            ofs.close();\n\n            return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "output", "ostream"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1540385876, "post_id": 52969602, "comment_id": 92845469, "body": "<code>&quot;: &quot; generationString</code> -&gt; <code>&quot;: &quot; &lt;&lt; generationString</code>. Voting to close as typo."}, {"owner": {"reputation": 65, "user_id": 6793911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a22974fbbc32c0a526557430e78a23d?s=128&d=identicon&r=PG&f=1", "display_name": "MSL", "link": "https://stackoverflow.com/users/6793911/msl"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1540385974, "post_id": 52969602, "comment_id": 92845547, "body": "Yeah, definitely typo issue.  If you post this seperately I can add as answer."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1540386018, "post_id": 52969602, "comment_id": 92845572, "body": "Typo issues are meant to be flagged as such. Not to be answered."}], "answers": [{"tags": [], "owner": {"reputation": 16436, "user_id": 10411602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b534549770aedbc4d7eb03a39d740f6?s=128&d=identicon&r=PG&f=1", "display_name": "Blaze", "link": "https://stackoverflow.com/users/10411602/blaze"}, "is_accepted": true, "score": 3, "last_activity_date": 1540385896, "creation_date": 1540385896, "answer_id": 52969644, "question_id": 52969602, "link": "https://stackoverflow.com/questions/52969602/error-expected-before-generationstring/52969644#52969644", "title": "error: expected \u2018;\u2019 before \u2018generationString\u2019", "body": "<p>You're missing a <code>&lt;&lt;</code>.</p>\n\n<pre><code>cout &lt;&lt; \"Generation \" &lt;&lt; x &lt;&lt; \": \" generationString &lt;&lt; endl;\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code>cout &lt;&lt; \"Generation \" &lt;&lt; x &lt;&lt; \": \" &lt;&lt; generationString &lt;&lt; endl;\n</code></pre>\n\n<p>Likewise for</p>\n\n<pre><code>cout &lt;&lt; \"Generation \" &lt;&lt; x++ &lt;&lt; \": \" generationString &lt;&lt; endl;\n</code></pre>\n\n<p>That should be </p>\n\n<pre><code>cout &lt;&lt; \"Generation \" &lt;&lt; x++ &lt;&lt; \": \" &lt;&lt; generationString &lt;&lt; endl;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3760, "user_id": 6594576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448660dad9fcb2bf8b5f7a3ab8813037?s=128&d=identicon&r=PG", "display_name": "Paul Floyd", "link": "https://stackoverflow.com/users/6594576/paul-floyd"}, "is_accepted": false, "score": 3, "last_activity_date": 1540386612, "last_edit_date": 1540386612, "creation_date": 1540386068, "answer_id": 52969711, "question_id": 52969602, "link": "https://stackoverflow.com/questions/52969602/error-expected-before-generationstring/52969711#52969711", "title": "error: expected \u2018;\u2019 before \u2018generationString\u2019", "body": "<p>You are probably missing a <code>&lt;&lt;</code> in the line</p>\n\n<pre><code>cout &lt;&lt; \"Generation \" &lt;&lt; x &lt;&lt; \": \" generationString &lt;&lt; endl;\n</code></pre>\n\n<p>Here you have </p>\n\n<pre><code>\": \" generationString\n</code></pre>\n\n<p>which should be</p>\n\n<pre><code>\": \" &lt;&lt; generationString\n</code></pre>\n\n<p>C++ can concatenate literal strings, but it cannot concatenate literal string with anything else (like std::strings). So for instance this would work</p>\n\n<pre><code>cout &lt;&lt; \"Generation \" &lt;&lt; x &lt;&lt; \": \" \"METHINKS IT IS LIKE A WEASEL\" &lt;&lt; endl;\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6793911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a22974fbbc32c0a526557430e78a23d?s=128&d=identicon&r=PG&f=1", "display_name": "MSL", "link": "https://stackoverflow.com/users/6793911/msl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "closed_date": 1540389579, "accepted_answer_id": 52969644, "answer_count": 2, "score": 4, "last_activity_date": 1568980205, "creation_date": 1540385788, "last_edit_date": 1568980205, "question_id": 52969602, "link": "https://stackoverflow.com/questions/52969602/error-expected-before-generationstring", "closed_reason": "Not suitable for this site", "title": "error: expected \u2018;\u2019 before \u2018generationString\u2019", "body": "<p>I'm currently trying to work out some issues I am experiencing with this code, can't really figure out why I am getting these 2 errors.\nI tried to see if something was not closed, but this not does seem to be the case, can be be cause of the distance between the \": \"? \nI'm just grasping for straws by now..</p>\n\n<pre><code>main.cpp:30:38: error: expected \u2018;\u2019 before \u2018generationString\u2019\ncout &lt;&lt; \"Generation \" &lt;&lt; x &lt;&lt; \": \" generationString &lt;&lt; endl;\n\nmain.cpp:54:40: error: expected \u2018;\u2019 before \u2018generationString\u2019\ncout &lt;&lt; \"Generation \" &lt;&lt; x++ &lt;&lt; \": \" generationString &lt;&lt; endl;\n</code></pre>\n\n<p>When trying to compile this code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nstring\ninitString ()\n{\n}\n\nint\ncalculateScore (string guess, string target)\n{\n}\n\nstring\nmutate (string mutationString)\n{\n}\n\n\nint\nmain ()\n{\n  string targetString = \"METHINKS IT IS LIKE A WEASEL\";\n  string generationString = initString ();\n  string currentString = generationString;\n\n  int score = calculateScore (currentString, targetString);\n  int x = 0;\n  cout &lt;&lt; \"Generation \" &lt;&lt; x &lt;&lt; \": \" generationString &lt;&lt; endl;\n  do\n    {\n      for (int i = 0; i &lt; 100; i++)\n    {\n      string newCopy = generationString;\n      newCopy = mutate (newCopy);\n      int copyScore = calculateScore (newCopy, targetString);\n\n      if (copyScore &gt; score)\n        {\n      currentString = newCopy;\n      score = copyScore;\n      if (copyScore == targetString.length ())\n    {\n      break;\n    }\n\n    }\n}\n  generationString = currentString;\n\n     }\n  while (score &lt; targetString.length ());\n  cout &lt;&lt; \"Generation \" &lt;&lt; x++ &lt;&lt; \": \" generationString &lt;&lt; endl;\n  return 0;\n  }\n</code></pre>\n"}, {"tags": ["c++", "arduino"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 6, "creation_date": 1540385831, "post_id": 52969582, "comment_id": 92845424, "body": "That looks nothing like Java, please use the correct tags"}, {"owner": {"reputation": 8386, "user_id": 1682559, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MefSP.jpg?s=128&g=1", "display_name": "Kevin Cruijssen", "link": "https://stackoverflow.com/users/1682559/kevin-cruijssen"}, "edited": false, "score": 1, "creation_date": 1540385837, "post_id": 52969582, "comment_id": 92845428, "body": "This is not valid java code.. You talk about Strings, but have a <code>char*</code> array (Java doesn&#39;t even have pointers..). <code>&quot;track001.mp3&quot;</code> are already Strings in Java.. Are you sure the <code>java</code>-tag is correct here?"}, {"owner": {"reputation": 4505, "user_id": 4417306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc90fc44a31eb2bdc442686e75a1a4dd?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/4417306/mark"}, "edited": false, "score": 0, "creation_date": 1540385840, "post_id": 52969582, "comment_id": 92845432, "body": "I think the <code>java</code> tag is wrong because this is not java"}, {"owner": {"reputation": 17840, "user_id": 2102956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b347220471064a3cb72d768ec2314e6?s=128&d=identicon&r=PG", "display_name": "Pushpesh Kumar Rajwanshi", "link": "https://stackoverflow.com/users/2102956/pushpesh-kumar-rajwanshi"}, "edited": false, "score": 3, "creation_date": 1540385843, "post_id": 52969582, "comment_id": 92845435, "body": "char* is not valid in java... is this c code?"}, {"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 1, "creation_date": 1540386327, "post_id": 52969582, "comment_id": 92845796, "body": "And once you have fixed the tags you will have to explain what the problem is and what you have attempted to do to solve it"}], "answers": [{"tags": [], "owner": {"reputation": 74, "user_id": 9752282, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RgyD3.png?s=128&g=1", "display_name": "Joost Baars", "link": "https://stackoverflow.com/users/9752282/joost-baars"}, "is_accepted": false, "score": 1, "last_activity_date": 1540386636, "creation_date": 1540386636, "answer_id": 52969905, "question_id": 52969582, "link": "https://stackoverflow.com/questions/52969582/char-array-to-string/52969905#52969905", "title": "Char array to string", "body": "<p>In Arduino you can simply do:</p>\n\n<pre><code>String track1 = SongTitles[0];\n</code></pre>\n\n<p>Now the string called track1 contains \"track001.mp3\".</p>\n\n<p>So for the other songtitles you can do:</p>\n\n<pre><code>String track2 = SongTitles[1]; //Contains \"track002.mp3\"\nString track3 = SongTitles[2]; //Contains \"track003.mp3\"\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10552125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c267a47ec141a94ecf09ea9ad63191?s=128&d=identicon&r=PG&f=1", "display_name": "jonko", "link": "https://stackoverflow.com/users/10552125/jonko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "closed_date": 1540387845, "answer_count": 1, "score": -6, "last_activity_date": 1540387826, "creation_date": 1540385733, "last_edit_date": 1540387826, "question_id": 52969582, "link": "https://stackoverflow.com/questions/52969582/char-array-to-string", "closed_reason": "Not suitable for this site", "title": "Char array to string", "body": "<p>How can I get the first, second and third array values from: </p>\n\n<pre><code>char* SongTitles [] = {\"track001.mp3\", \"track002.mp3\", \"track003.mp3\"}; \n</code></pre>\n\n<p>be made into a String value?</p>\n"}, {"tags": ["c++", "eigen"], "comments": [{"owner": {"reputation": 3805, "user_id": 4165552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18b32c5e142791fca01cbf252f663ac?s=128&d=identicon&r=PG&f=1", "display_name": "pptaszni", "link": "https://stackoverflow.com/users/4165552/pptaszni"}, "edited": false, "score": 0, "creation_date": 1540388557, "post_id": 52969570, "comment_id": 92847348, "body": "Mmm nope, better use <a href=\"https://en.cppreference.com/w/cpp/numeric/complex/atanh\" rel=\"nofollow noreferrer\">std::atanh</a> with <a href=\"https://en.cppreference.com/w/cpp/algorithm/for_each\" rel=\"nofollow noreferrer\">std::for_each</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8147876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5NU2v.jpg?s=128&g=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/8147876/ari"}, "edited": false, "score": 0, "creation_date": 1540393900, "post_id": 52970580, "comment_id": 92851217, "body": "my matrix is already diagonal I think  the atanh of the matrix is equal to the atanh of its entries isn&#39;t it?"}, {"owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "reply_to_user": {"reputation": 15, "user_id": 8147876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5NU2v.jpg?s=128&g=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/8147876/ari"}, "edited": false, "score": 0, "creation_date": 1540395317, "post_id": 52970580, "comment_id": 92852168, "body": "If it&#39;s a diagonal matrix then yes, you can use <code>std::atanh</code> like @Ptaq666` suggests on the diagonal elements."}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 2, "creation_date": 1540408958, "post_id": 52970580, "comment_id": 92859526, "body": "The coeff-wise atanh is readily available in the head of Eigen: <code>mat.array().atanh()</code> or <code>atanh(mat.array())</code>."}, {"owner": {"reputation": 15, "user_id": 8147876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5NU2v.jpg?s=128&g=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/8147876/ari"}, "edited": false, "score": 0, "creation_date": 1540452826, "post_id": 52970580, "comment_id": 92873192, "body": "Eigen Library does not contain the arc hyperbolic fonctions : <a href=\"https://eigen.tuxfamily.org/dox/group__CoeffwiseMathFunctions.html\" rel=\"nofollow noreferrer\">eigen.tuxfamily.org/dox/group__CoeffwiseMathFunctions.html</a>"}, {"owner": {"reputation": 15, "user_id": 8147876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5NU2v.jpg?s=128&g=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/8147876/ari"}, "reply_to_user": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1540453055, "post_id": 52970580, "comment_id": 92873312, "body": "@ggael , i tried your expression, but i had this error :  &#39;class Eigen::ArrayWrapper&lt;Eigen::Matrix&lt;std::complex&lt;double&gt;, 3, 3&gt; &gt;&#39; has no member named &#39;atanh&#39;|"}, {"owner": {"reputation": 25324, "user_id": 1641621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h50hY.png?s=128&g=1", "display_name": "ggael", "link": "https://stackoverflow.com/users/1641621/ggael"}, "edited": false, "score": 0, "creation_date": 1540453844, "post_id": 52970580, "comment_id": 92873818, "body": "my bad, we only have a scalar-wise wrapper to <code>atanh</code>, I did not read carefully enough the output of my search for atanh."}], "tags": [], "owner": {"reputation": 640, "user_id": 3793674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62a5746c9da4b2293984258875ce00e1?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisD", "link": "https://stackoverflow.com/users/3793674/chrisd"}, "is_accepted": false, "score": 1, "last_activity_date": 1540389693, "last_edit_date": 1540389693, "creation_date": 1540388543, "answer_id": 52970580, "question_id": 52969570, "link": "https://stackoverflow.com/questions/52969570/eigen-c-area-hyperbolic-tangent-atanh-of-a-complex-matrix/52970580#52970580", "title": "Eigen c++ : area hyperbolic tangent (atanh) of a complex matrix", "body": "<p>First you need to distinguish between taking the atanh of a matrix, and the atanh of its entries. If it's just the <code>atanh</code> of its entries then you can do what @Ptaq666 suggests. If it is the<code>atanh</code> of the matrix, then this is defined by performing an eigen decomposition to find <code>E</code> (the matrix of eigenvectors) and <code>l</code> (the eigenvalues). The arctanh of the matrix is then  defined as <code>E * diag(atanh(l)) * E^-1</code>.</p>\n\n<p>This is what <code>Eigen::MatrixBase::log</code>, <code>Eigen::MatrixBase::sin</code>, etc do so you should check out their implementations.</p>\n\n<p>(Equivalently you can replace <code>1</code> by the identity matrix in your expression)</p>\n"}], "owner": {"reputation": 15, "user_id": 8147876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5NU2v.jpg?s=128&g=1", "display_name": "Ari", "link": "https://stackoverflow.com/users/8147876/ari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540394323, "creation_date": 1540385691, "last_edit_date": 1540394323, "question_id": 52969570, "link": "https://stackoverflow.com/questions/52969570/eigen-c-area-hyperbolic-tangent-atanh-of-a-complex-matrix", "title": "Eigen c++ : area hyperbolic tangent (atanh) of a complex matrix", "body": "<p>I am trying to compute the area hyperbolic tangent (atanh) of my Eigen complex matrix.\nI didn't find in the \"Eigen library\" a function that to compute the atanh, can I use this expression for my matrix: </p>\n\n<p><code>atanh(x)= 1/2 (ln (1+x)-ln (1-x))</code></p>\n\n<p>Thank you :)</p>\n"}, {"tags": ["c++", "visual-c++", "vector", "std"], "comments": [{"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1540385922, "post_id": 52969565, "comment_id": 92845511, "body": "Run the code again for v3.reserve(343).  Normally, the vector&lt;&gt; algorithm adds chunks of memory for storage. It is implemented as an array which grows dynamically in chunks.  You should see that the increase for the next step will be zero or a smaller value, so you will see a step function for increases in size."}, {"owner": {"reputation": 3355, "user_id": 4114447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/aa93321ad023953eaaae28b490855e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Dan M.", "link": "https://stackoverflow.com/users/4114447/dan-m"}, "edited": false, "score": 2, "creation_date": 1540386114, "post_id": 52969565, "comment_id": 92845648, "body": "<code>reserve</code> increases capacity to the value <i>greater</i> or equal than requested. You are not guaranteed that it&#39;ll allocate exactly <code>N</code> bytes. Just <code>&gt;= N</code>."}, {"owner": {"reputation": 155, "user_id": 6415153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bce6c99630d418de603b8f9615f25f35?s=128&d=identicon&r=PG&f=1", "display_name": "Spazz", "link": "https://stackoverflow.com/users/6415153/spazz"}, "edited": false, "score": 1, "creation_date": 1540386355, "post_id": 52969565, "comment_id": 92845812, "body": "Done, the measured cost for v3 is 4163 Bytes. Theoretical cost is 4116 (343*4*3) so we&#39;re still having a 47 Bytes delta. I tried with reserve(3000) and still measuring this 47 Bytes difference."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1540386382, "post_id": 52969565, "comment_id": 92845829, "body": "@Spazz do you have optimization on or off? It makes a big difference"}, {"owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "edited": false, "score": 0, "creation_date": 1540386788, "post_id": 52969565, "comment_id": 92846105, "body": "The increase from v2 to v3 is 4163 - 4151 = 12 which = 4*3.  It looks like it only added 12 bytes, but carries a 47 byte overhead for keeping track of the array fields.  That blows my chunk theory, but shows that they are not wasting overhead for each increase in size."}, {"owner": {"reputation": 155, "user_id": 6415153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bce6c99630d418de603b8f9615f25f35?s=128&d=identicon&r=PG&f=1", "display_name": "Spazz", "link": "https://stackoverflow.com/users/6415153/spazz"}, "reply_to_user": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1540387055, "post_id": 52969565, "comment_id": 92846277, "body": "@Mgetz : I&#39;m using the Debug configuration targeting x64 platform, I suppose there&#39;s no optimization. Still, I&#39;d like to understand the meaning of these 47 Bytes since they are recurrent."}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1540387589, "post_id": 52969565, "comment_id": 92846659, "body": "<code>Type var=Type();</code> is ugly..."}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 0, "creation_date": 1540390045, "post_id": 52969565, "comment_id": 92848456, "body": "@Spazz the MSVC debug allocator is not the release allocator, I&#39;d try again in release mode. The debug one tends to add guard pages and other heap debugging tools"}, {"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1540390484, "post_id": 52969565, "comment_id": 92848776, "body": "Related <a href=\"https://stackoverflow.com/a/370362/332733\">MSVC Heap Debug Sentinel Values</a> you&#39;ll notice that the values you&#39;re looking at correspond to <code>0xCDCDCDCD</code> or clean memory just allocated but not initialized."}, {"owner": {"reputation": 300, "user_id": 7172363, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000922552347/picture?type=large", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0435\u0439 \u041d\u0435\u0443\u0434\u0430\u0447\u0438\u043d", "link": "https://stackoverflow.com/users/7172363/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b5%d0%b9-%d0%9d%d0%b5%d1%83%d0%b4%d0%b0%d1%87%d0%b8%d0%bd"}, "edited": false, "score": 0, "creation_date": 1540394173, "post_id": 52969565, "comment_id": 92851384, "body": "it&#39;s heap stuff and it&#39;s OS business , not yours"}], "answers": [{"comments": [{"owner": {"reputation": 4654, "user_id": 332733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BR7yE.jpg?s=128&g=1", "display_name": "Mgetz", "link": "https://stackoverflow.com/users/332733/mgetz"}, "edited": false, "score": 1, "creation_date": 1540386563, "post_id": 52969725, "comment_id": 92845946, "body": "It&#39;s also possible this is the debug allocator... and that&#39;s a guard page"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1540386097, "creation_date": 1540386097, "answer_id": 52969725, "question_id": 52969565, "link": "https://stackoverflow.com/questions/52969565/spatial-complexity-of-stdvector-after-a-call-to-reserve/52969725#52969725", "title": "Spatial complexity of std::vector after a call to reserve()", "body": "<p>There are a few things that could be happening</p>\n\n<ol>\n<li><p><code>std::vector::reserve</code> is allowed to over allocate space.  This is because the allocator is allowed to over allocate space.  So what you could be seeing is just what MSVC's allocator allocates when you ask for 4014 bytes.</p></li>\n<li><p>Visual Studio 2017 Community Diagnostic Tools might not be fined grained enough and it not only sees the allocation for the vector but it also captures memory allocated from somewhere else.</p></li>\n<li><p>a combination of 1 and 2.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2427, "user_id": 4983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbc9ed33d775a17d6965fd2efbfe4b52?s=128&d=identicon&r=PG", "display_name": "Gardener", "link": "https://stackoverflow.com/users/4983398/gardener"}, "is_accepted": false, "score": 0, "last_activity_date": 1540388570, "last_edit_date": 1540388570, "creation_date": 1540386282, "answer_id": 52969790, "question_id": 52969565, "link": "https://stackoverflow.com/questions/52969565/spatial-complexity-of-stdvector-after-a-call-to-reserve/52969790#52969790", "title": "Spatial complexity of std::vector after a call to reserve()", "body": "<p>Based on your subsequent experiment </p>\n\n<pre><code>v2.reserve(342) = 4151 \nv2.reserve(343) = 4163\n</code></pre>\n\n<p>4163 - 4151 = 12 which = 4*3, which is the expected increase with no overhead.</p>\n\n<p>The difference between the two memory usage levels is 12 bytes.  Hence, the 47 bytes may simply be the overhead that the compiler uses for keeping track of other details related to the vector.</p>\n\n<p>It may be that reserve() allocates a specific memory amount and that actually adding elements will create the step-function increase in memory usage.</p>\n\n<p>In any case, the reserve() should be set at the level you expect to not exceed.  As the vector increases in size, the run-time must reallocate memory and copy the old vector to the new memory space.  Hence, as I am sure you are already aware, reserve() should not be called incrementally.</p>\n\n<p>It would be interesting to see a graph of reserve(n) calls from 1 - 1000 with memory usage compared to the adding of 1000 elements with memory usage amounts after each addition.</p>\n"}], "owner": {"reputation": 155, "user_id": 6415153, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bce6c99630d418de603b8f9615f25f35?s=128&d=identicon&r=PG&f=1", "display_name": "Spazz", "link": "https://stackoverflow.com/users/6415153/spazz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1540388712, "creation_date": 1540385678, "last_edit_date": 1540388712, "question_id": 52969565, "link": "https://stackoverflow.com/questions/52969565/spatial-complexity-of-stdvector-after-a-call-to-reserve", "title": "Spatial complexity of std::vector after a call to reserve()", "body": "<p>I'm trying to understand the way std::vector spatial complexity evolve after a call to reserve().</p>\n\n<p>Here is the code :</p>\n\n<pre><code>vector&lt;SparseData&lt;T_Indices, T_Values&gt;&gt; v1 = vector&lt;SparseData&lt;T_Indices, T_Values&gt;&gt;();\nv1.reserve(341);\nvector&lt;SparseData&lt;T_Indices, T_Values&gt;&gt; v2 = vector&lt;SparseData&lt;T_Indices, T_Values&gt;&gt;();\nv2.reserve(342);\n</code></pre>\n\n<p>With <code>SparseData</code> containing 3 integers (4 Bytes each).</p>\n\n<p>v1 cost is the theoritical cost <code>O(v1) = 341*3*4 = 4092 Bytes</code>. Fine.</p>\n\n<p>My problem is v2 cost. I expected <code>O(v2) = 342*3*4 = 4104 Bytes</code> but the actual cost is <code>4151 Bytes</code>. There's a <code>47 Bytes</code> delta that I can't understand.</p>\n\n<p>I'm measuring space using Visual Studio 2017 Community Diagnostic Tools (Snapshotting heap) which, I believe, is trustable.</p>\n\n<p>What's the meaning of these <code>47 Bytes</code>? What do they possibly represent?</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>Edit :</strong> I've edited the initial post so that classes names match with the screenshots. Below, the measured values for v1 (resp. v2) after a call to reserve(341) (resp. reserve(342)). Notice that two elements are not having same \"values\" than others. Also, v2 contains 345 <code>SparseData</code> elements, giving an explanation for the first <code>4140 Bytes</code> : fine, this is the <em>or greater</em> part <a href=\"http://www.cplusplus.com/reference/vector/vector/reserve/\" rel=\"nofollow noreferrer\">from the documentation</a> :</p>\n\n<blockquote>\n  <p>If n is greater than the current vector capacity, the function causes the container to reallocate its storage increasing its capacity to n (or greater).</p>\n</blockquote>\n\n<p>Still looking for the <code>11 Bytes</code> delta tho.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ngcKu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ngcKu.jpg\" alt=\"v1\"></a><a href=\"https://i.stack.imgur.com/AI3D9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AI3D9.jpg\" alt=\"v2\"></a></p>\n"}, {"tags": ["c++", "templates", "compiler-errors", "g++"], "comments": [{"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 4, "creation_date": 1540385396, "post_id": 52969462, "comment_id": 92845096, "body": "Please post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1540391061, "post_id": 52969462, "comment_id": 92849211, "body": "<code>foo</code> vs <code>doFoo</code>, what is <code>FooImpl</code>, <code>exportFoo</code> ?"}, {"owner": {"reputation": 11, "user_id": 9425980, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Kurzmeier", "link": "https://stackoverflow.com/users/9425980/michael-kurzmeier"}, "edited": false, "score": 0, "creation_date": 1540401914, "post_id": 52969462, "comment_id": 92855968, "body": "dynamic_cast&lt; FooImpl&lt; DT &gt; &gt;(obj))-&gt;template exportFoo&lt; ST &gt;(...);"}, {"owner": {"reputation": 11, "user_id": 9425980, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Kurzmeier", "link": "https://stackoverflow.com/users/9425980/michael-kurzmeier"}, "edited": false, "score": 0, "creation_date": 1540402380, "post_id": 52969462, "comment_id": 92856215, "body": "somebody gives temporary the hint;-)"}], "owner": {"reputation": 11, "user_id": 9425980, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Kurzmeier", "link": "https://stackoverflow.com/users/9425980/michael-kurzmeier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1540385587, "creation_date": 1540385348, "question_id": 52969462, "link": "https://stackoverflow.com/questions/52969462/using-a-template-parameter-within-a-template-function", "title": "using a template parameter within a template function", "body": "<p>I get an g++ compiler error (expected primary-expression before \u2018>\u2019 token) in exportFoo&lt; ST >:</p>\n\n<pre><code>class FOO {\n    ...\n    template&lt;typename DT, typename ST&gt;\n    void foo(...);\n    ...\n};\n\ntemplate&lt;typename DT, typename ST&gt;\nvoid\nFOO::doFoo(...)\n{\n    ...\n    size_t memSize = \n        (dynamic_cast&lt; FooImpl&lt; DT &gt; &gt;(obj))-&gt;exportFoo&lt; ST &gt;(...);\n    ...\n}\n</code></pre>\n\n<p>If I replace \"DT\" by a valid and known data type there is no compiler error.\nSo I guess that the compiler doesn't interprete the generic data types DT and ST as valid parameters for the object cast \"&lt; DT > \" and the function call within the function. By try and error I've prefixed the cast with <code>FooImpl&lt;typename DT&gt;</code> but it doesn't run. Does somebody has a hint?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1540387794, "post_id": 52969122, "comment_id": 92846792, "body": "There is <b>no universal approach</b> for use CMake in &quot;large projects&quot;. But most of such projects use <i>more than one</i> <code>CMakeLists.txt</code> (in different directories). You ask too many questions in a single question post, which is not welcomed on Stack Overflow. You may start with splitting your <code>CMakeLists.txt</code> into several directories, and ask about specific problems you will be faced."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2083443"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1540388523, "post_id": 52969122, "comment_id": 92847320, "body": "@Tsyvarev But how would I do that, what would it look like? Sorry for asking too many questions in one post, I thought if I made it into separate questions, it would be seen as spam."}, {"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 1, "creation_date": 1540389927, "post_id": 52969122, "comment_id": 92848375, "body": "<code>CMakeLists.txt</code> located in the subdirectory usually processes only files in that subdirectory E.g. <code>Editor&#47;CMakeLists.txt</code> could compile <code>Editor&#47;src&#47;main.cpp</code> source. According to the first question, you have seen many projects which use <code>CMakeLists.txt</code> in every directory. Why do not simply follow the one of such projects?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2083443"}, "reply_to_user": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1540390484, "post_id": 52969122, "comment_id": 92848775, "body": "@Tsyvarev Thanks for your reply. Well, the only sorta large libraries/projects that use CMake that I know are GLFW and Bullet, I can&#39;t think of any other. Do you maybe know some?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2083443"}, "edited": false, "score": 0, "creation_date": 1540386811, "post_id": 52969791, "comment_id": 92846122, "body": "Thanks for your answer! Let me reply to what you said:"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2083443"}, "edited": false, "score": 0, "creation_date": 1540387013, "post_id": 52969791, "comment_id": 92846249, "body": "What would an example of a submodule be? What is a submodule?  I&#39;d like to add header files as well, as I sometimes use visual studio, which displays files differently than other IDE&#39;s.  I always re-configure and re-generate my project whenever I add a file, that should be OK I think. But still, isn&#39;t adding every single file in a CMakeLists file a lot of work, or do people automate that in some way?  I&#39;ll use target_include_directories form now on."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1540388887, "post_id": 52969791, "comment_id": 92847572, "body": "@TimLeijten A module is a self-contained unit. A submodule is a module that is part of another module. An executable is an example of a module, and a library is an example of a submodule. I mentioned it just in case you have a submodule that you wouldn&#39;t describe as a library."}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1540389035, "post_id": 52969791, "comment_id": 92847696, "body": "@TimLeijten It&#39;s not a <i>lot</i> of work to change a CMakeLists.txt file every time a source file is added / removed in my opinion, but I agree that it is annoying and it redundantly duplicates information that is on the file system. But that&#39;s the design of CMake, flawed as it may be. Some IDEs do edit CMakeLists.txt automatically."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2083443"}, "edited": false, "score": 0, "creation_date": 1540390837, "post_id": 52969791, "comment_id": 92849030, "body": "Well, the problem is that my project doesn&#39;t really use modules for it&#39;s base, things like physics are it&#39;s own modules, but rendering, base classes, scene management, resource management and such are in the same project/module. Does that mean I use one CMakeLists for that?  Do you maybe know any IDE&#39;s that automatically modify the CMakeLists? Or a plugin.(for VS or CLion)"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 0, "creation_date": 1540391094, "post_id": 52969791, "comment_id": 92849238, "body": "@TimLeijten You can use one CMakeLists.txt if you want to. KDevelop modifies CMakeLists.txt automatically."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2083443"}, "edited": false, "score": 0, "creation_date": 1540402632, "post_id": 52969791, "comment_id": 92856368, "body": "Well, what is recommended? I&#39;m thinking about just putting a CMakeLists in each directory, and having it add the sources to one big glob variable. So e.g. add(<i>.h) add(</i>.cpp), but I don&#39;t know the actual functions to use. Can you help? Which functions do I need to add the *.h and *.cpp to one big variable, and have the paths be correct? So I can then put them in one executable."}], "tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": true, "score": 4, "last_activity_date": 1617707346, "last_edit_date": 1617707346, "creation_date": 1540386291, "answer_id": 52969791, "question_id": 52969122, "link": "https://stackoverflow.com/questions/52969122/cmakelists-for-large-project-with-multiple-directories/52969791#52969791", "title": "CMakeLists for large project with multiple directories?", "body": "<blockquote>\n<ol>\n<li>Does every directory NEED a CMakeLists file</li>\n</ol>\n</blockquote>\n<p>No, that is not necessary.</p>\n<p>It's probably a good idea to have a CMakeLists.txt for each submodule and library - and one in the root for the project itself.</p>\n<blockquote>\n<ol start=\"2\">\n<li>Do I need to provide every directory containing source files, or can I have it search automatically for source and header files in directories?</li>\n</ol>\n</blockquote>\n<p>Firstly, see the answer to your question 3.</p>\n<p>Secondly, I don't see why you'd want to search for header files. Simply specify the include directories.</p>\n<p>Finally, if you want to use globbing, it is possible to put all your source files under a single directory, and use a single glob.</p>\n<blockquote>\n<ol start=\"3\">\n<li>I also see that a lot of other CMake projects provide each source ... file seperately, why?</li>\n</ol>\n</blockquote>\n<p>This is what the docs say:</p>\n<blockquote>\n<p>Note</p>\n<p>We do not recommend using GLOB to collect a list of source files from your source tree. If no CMakeLists.txt file changes when a source is added or removed then the generated build system cannot know when to ask CMake to regenerate. The CONFIGURE_DEPENDS flag may not work reliably on all generators, or if a new generator is added in the future that cannot support it, projects using it will be stuck. Even if CONFIGURE_DEPENDS works reliably, there is still a cost to perform the check on every rebuild.</p>\n</blockquote>\n<hr />\n<blockquote>\n<ol start=\"3\">\n<li>... each header file separately, why?</li>\n</ol>\n</blockquote>\n<p>I've never seen this.</p>\n<blockquote>\n<ol start=\"5\">\n<li>Is there ANYTHING else I can improve?</li>\n</ol>\n</blockquote>\n<p>Use <code>target_include_directories</code> instead of <code>include_directories</code>. In general, always use <code>target_X</code> directives.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2083443"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2305, "favorite_count": 1, "accepted_answer_id": 52969791, "answer_count": 1, "score": 2, "last_activity_date": 1617707346, "creation_date": 1540384444, "question_id": 52969122, "link": "https://stackoverflow.com/questions/52969122/cmakelists-for-large-project-with-multiple-directories", "title": "CMakeLists for large project with multiple directories?", "body": "<p>I am writing a Game Engine, which is going very well. But I am running into a problem where my CMakeLists.txt is just too messy, and I don't know enough about CMake. My project uses multiple (CMake) libraries, which are added using add_subdirectory and then target_link_libraries. My project consists of the Engine(executable), the Editor(library), and some tests/examples. Here is my file structure:</p>\n\n<pre><code>C:.\n|   CMakeLists.txt\n|   tree.txt\n|   \n+---Editor\n|   |   README.md\n|   |   \n|   \\---src\n|           main.cpp\n|           \n+---Engine\n|   |   README.md\n|   |   \n|   +---src\n|   |   |   main.cpp\n|   |   |   \n|   |   +---API\n|   |   |       Core.h\n|   |   |       \n|   |   +---App\n|   |   |       Application.cpp\n|   |   |       \n|   |   +---ExtApp\n|   |   |   |   AppInterface.cpp\n|   |   |   |   \n|   |   |   +---Engine\n|   |   |   |       ExtAppLoader.cpp\n|   |   |   |       \n|   |   |   \\---Game\n|   |   |           InfoExport.cpp\n|   |   |           \n|   |   +---Framework\n|   |   |       Asset.cpp\n|   |   |       \n|   |   +---Managing\n|   |   |       AssetLoader.cpp\n|   |   |       \n|   |   +---Rendering\n|   |   |   |   Renderer.cpp\n|   |   |   |   \n|   |   |   \\---Renderables\n|   |   |           Canvas2DRenderable.cpp\n|   |   |           \n|   |   \\---Types\n|   |           Vector3f.cpp\n|   |           \n|   \\---TestResources\n|       \\---Shaders\n|               Canvas2DTexturedTriangle.f\n|               Canvas2DTexturedTriangle.v\n|               Canvas2DUntexturedTriangle.f\n|               Canvas2DUntexturedTriangle.v\n|               ImTest.f\n|               ImTest.v\n|               \n+---Libraries\n|   +---glfw\n|   |       CMakeLists.txt\n|   |       \n|   \\---glm\n|           CMakeLists.txt\n|           \n\\---Tests\n    \\---TestGame\n        \\---src\n                main.cpp\n</code></pre>\n\n<p>As you can see I have one CMakeLists at the begin, which loads all the projects. Then I have libraries, which have a CMakeLists too. Every directory has only one file to make the tree less big, but there are multiple fies in a directory. Also, here is my current, messy, almost-useless CMakeLists file:</p>\n\n<pre><code>    cmake_minimum_required(VERSION 3.6)\n\n#project(3DEngine)\n\n\n\nadd_subdirectory(Libraries/glfw) #Add glfw to the project\n\n# Make sure we're running C++17 so all features(like std::filesystem) are present.\nset(CMAKE_CXX_STANDARD 17)\nset(CMAKE_CXX_STANDARD_REQUIRED ON)\nset(CMAKE_CXX_EXTENSIONS OFF)\n\noption(BUILD_ENGINE_FOR_EDITOR \"Build the engine as DLL/SO for the editor and add editor specific things. Otherwise build engine as game exec\" OFF)\noption(BUILD_ENGINE_FOR_DLL_APPS \"Have the Engine load the game(and plugins) from dll's.\" ON)\nproject (Engine)#project engine\ninclude_directories(Libraries/whereami/src)\ninclude_directories(Engine/src/)\ninclude_directories(Libraries/glfw/include)\ninclude_directories(Libraries/glm)\ninclude_directories(Libraries/glad/include)\ninclude_directories(Libraries/stb)\nfile(GLOB EngineRootSOURCES  \"Engine/src/*.cpp\" \"Engine/src/*.h\")\nfile(GLOB EngineRenderingSOURCES  \"Engine/src/Rendering/*.cpp\" \"Engine/src/Rendering/*.h\")\nfile(GLOB EngineAppSOURCES  \"Engine/src/App/*.cpp\" \"Engine/src/App/*.h\")\nfile(GLOB EngineRenderingRenderablesSOURCES  \"Engine/src/Rendering/Renderables/*.cpp\" \"Engine/src/Rendering/Renderables/*.h\")\nfile(GLOB EngineManagingSOURCES  \"Engine/src/Managing/*.cpp\" \"Engine/src/Managing/*.h\")\nfile(GLOB EngineTypesSOURCES  \"Engine/src/Types/*.cpp\" \"Engine/src/Types/*.h\")\nfile(GLOB EngineGameEssentialsSOURCES  \"Engine/src/GameEssentials/*.cpp\" \"Engine/src/GameEssentials/*.h\")\nfile(GLOB EngineLibsSOURCES  \"Libraries/whereami/src/whereami.c\" \"Libraries/glad/src/glad.c\")\nfile(GLOB EngineFrameworkSOURCES  \"Engine/src/Framework/*.h\" \"Engine/src/Framework/*.cpp\")\nfile(GLOB APISOURCES  \"Engine/src/API/*.cpp\" \"Engine/src/API/*.h\")\n\nfile(GLOB EngineExtAppSOURCES \"Engine/src/ExtApp/*.cpp\" \"Engine/src/ExtApp/*.h\"\n \"Engine/src/ExtApp/Interface/*.cpp\" \"Engine/src/ExtApp/Interface/*.h\")\n\n file(GLOB EngineExtAppGameSOURCES \"Engine/src/ExtApp/Game/*.cpp\" \"Engine/src/ExtApp/Game/*.h\")\n source_group(\"ExtApp\"  FILES ${EngineExtAppGameSOURCES})\n\n file(GLOB EngineExtAppEngineSOURCES \"Engine/src/ExtApp/Engine/*.cpp\" \"Engine/src/ExtApp/Engine/*.h\")\n source_group(\"ExtApp\"  FILES ${EngineExtAppEngineSOURCES})\n\nif(BUILD_ENGINE_FOR_EDITOR)\nfile(GLOB EngineEditorSOURCES \"Engine/src/ExtApp/*.cpp\" \"Engine/src/ExtApp/*.h\"\n \"Engine/src/ExtApp/Interface/*.cpp\" \"Engine/src/ExtApp/Interface/*.h\")\n\n\n if(BUILD_ENGINE_FOR_DLL_APPS)\n\n add_library(Engine SHARED ${EngineRootSOURCES} ${EngineRenderingSOURCES} ${EngineTypesSOURCES} ${EngineRenderingRenderablesSOURCES} ${EngineManagingSOURCES} ${EngineGameEssentialsSOURCES} ${EngineLibsSOURCES} ${EngineEditorSOURCES} ${EngineExtAppSOURCES} ${EngineAppSOURCES} ${APISOURCES} ${EngineExtAppEngineSOURCES} ${EngineFrameworkSOURCES})\n source_group(\"ExtApp\"  FILES ${EngineExtAppSOURCES})\nelseif(NOT BUILD_ENGINE_FOR_DLL_APPS)\nadd_library(Engine SHARED ${EngineRootSOURCES} ${EngineRenderingSOURCES} ${EngineTypesSOURCES} ${EngineRenderingRenderablesSOURCES} ${EngineManagingSOURCES} ${EngineGameEssentialsSOURCES} ${EngineLibsSOURCES} ${EngineEditorSOURCES} ${EngineExtAppSOURCES} ${EngineAppSOURCES} ${APISOURCES} ${EngineExtAppEngineSOURCES} ${EngineFrameworkSOURCES})\nendif()\n\n\n\ntarget_link_libraries(Engine glfw)\nsource_group(\"Rendering\"  FILES ${EngineRenderingSOURCES})\nsource_group(\"Rendering/Renderables\"  FILES ${EngineRenderingRenderablesSOURCES})\nsource_group(\"Managing\"  FILES ${EngineManagingSOURCES})\nsource_group(\"App\"  FILES ${EngineAppSOURCES})\nsource_group(\"Types\"  FILES ${EngineTypesSOURCES})\nsource_group(\"GameEssentials\"  FILES ${EngineGameEssentialsSOURCES})\nsource_group(\"Libs\"  FILES ${EngineLibsSOURCES})\nsource_group(\"ExtApp\"  FILES ${EngineEditorSOURCES})\nsource_group(\"API\"  FILES ${APISOURCES})\nsource_group(\"Framework\"  FILES ${EngineFrameworkSOURCES})\nelseif(NOT BUILD_ENGINE_FOR_EDITOR)\n\n\nif(BUILD_ENGINE_FOR_DLL_APPS)\nfile(GLOB EngineExtAppSOURCES \"Engine/src/ExtApp/*.cpp\" \"Engine/src/ExtApp/*.h\"\n \"Engine/src/ExtApp/Interface/*.cpp\" \"Engine/src/ExtApp/Interface/*.h\")\n add_executable(Engine ${EngineRootSOURCES} ${EngineRenderingSOURCES} ${EngineTypesSOURCES} ${EngineRenderingRenderablesSOURCES} ${EngineManagingSOURCES} ${EngineGameEssentialsSOURCES} ${EngineLibsSOURCES} ${EngineExtAppSOURCES} ${EngineAppSOURCES} ${APISOURCES} ${EngineExtAppEngineSOURCES} ${EngineFrameworkSOURCES})\n source_group(\"ExtApp\"  FILES ${EngineExtAppSOURCES})\nelseif(NOT BUILD_ENGINE_FOR_DLL_APPS)\nadd_executable(Engine ${EngineRootSOURCES} ${EngineRenderingSOURCES} ${EngineTypesSOURCES} ${EngineRenderingRenderablesSOURCES} ${EngineManagingSOURCES} ${EngineGameEssentialsSOURCES} ${EngineLibsSOURCES} ${EngineExtAppSOURCES} ${EngineAppSOURCES} ${APISOURCES} ${EngineExtAppEngineSOURCES} ${EngineFrameworkSOURCES})\nendif()\n\n\n\ntarget_link_libraries(Engine glfw)\nsource_group(\"Rendering\"  FILES ${EngineRenderingSOURCES})\nsource_group(\"Rendering/Renderables\"  FILES ${EngineRenderingRenderablesSOURCES})\nsource_group(\"Managing\"  FILES ${EngineManagingSOURCES})\nsource_group(\"App\"  FILES ${EngineAppSOURCES})\nsource_group(\"Types\"  FILES ${EngineTypesSOURCES})\nsource_group(\"GameEssentials\"  FILES ${EngineGameEssentialsSOURCES})\nsource_group(\"Libs\"  FILES ${EngineLibsSOURCES})\nsource_group(\"API\"  FILES ${APISOURCES})\nsource_group(\"Framework\"  FILES ${EngineFrameworkSOURCES})\nendif()\n\n#add_library(Engine SHARED ${EngineSOURCES})\n## END project engine\n\nproject (Module_OpenGL_Renderer_Input)#project module_renderer_opengl3\ninclude_directories(Libraries/glfw/include)\ninclude_directories(Libraries/glm)\ninclude_directories(Libraries/glad/include)\ninclude_directories(Libraries/stb)\nfile(GLOB Module_OpenGL_Renderer_InputSOURCES \"Modules/Module_OpenGL_Renderer_Input/src/*.cpp\" \"Modules/Module_OpenGL_Renderer_Input/src/*.h\" \"Libraries/glad/src/glad.c\")\nadd_library(Module_OpenGL_Renderer_Input SHARED ${Module_OpenGL_Renderer_InputSOURCES})\ntarget_link_libraries(glfw)\n##END project module_renderer_opengl3\n\nproject (Test1)#project test  |  This project is used to test the engine functionality.\ninclude_directories(Libraries/imgui)\nfile(GLOB Test1SOURCES \"Tests/Test1/src/*.cpp\" \"Tests/Test1/src/*.h\" \"Libraries/imgui/imgui*.cpp\"  ${APISOURCES})\nadd_executable(Test1 ${Test1SOURCES})\ntarget_link_libraries(Test1 ${CMAKE_DL_LIBS})\n\nproject (TestGame)#project test  |  This project is used to test the engine functionality.\ninclude_directories(Libraries/imgui)\nfile(GLOB TestGameSOURCES \"Tests/TestGame/src/*.cpp\" \"Tests/TestGame/src/*.h\" \"Libraries/imgui/imgui*.cpp\" ${EngineRenderingSOURCES} ${EngineTypesSOURCES} ${EngineRenderingRenderablesSOURCES} ${EngineManagingSOURCES} ${EngineGameEssentialsSOURCES} ${EngineLibsSOURCES} ${EngineAppSOURCES}  ${APISOURCES} ${EngineExtAppSOURCES} ${EngineExtAppGameSOURCES}  ${EngineFrameworkSOURCES})\nadd_library(TestGame SHARED ${TestGameSOURCES})\ntarget_link_libraries(TestGame glfw)\n\nproject (Editor)#project editor  |  This is used to make projects and build projects(using the engine)\ninclude_directories(Libraries/imgui)\nfile(GLOB EditorSOURCES \"Editor/src/*.cpp\" \"Editor/src/*.h\" \"Libraries/imgui/imgui*.cpp\"  ${APISOURCES})\nadd_executable(Editor ${EditorSOURCES})\n</code></pre>\n\n<p>I contains lot's of things that are completely useless, or not needed anymore.\nSo here are my questions:</p>\n\n<ol>\n<li>Does every directory NEED a CMakeLists file, like I see in a lot of projects?</li>\n<li>Do I need to provide every directory containing source files, or can I have it search automatically for source and header files in directories?</li>\n<li>I also see that a lot of other CMake projects provide each source/header file seperately, why? Isn't that a lot of work every time you add a file?</li>\n<li>Does anyone have examples of large CMake projects that I can use as a guide?</li>\n<li>Is there ANYTHING else I can improve?</li>\n</ol>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "std"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1540384693, "post_id": 52969105, "comment_id": 92844572, "body": "&quot;<i>The below sample code doesn&#39;t compile due to some reasons</i>&quot; When code doesn&#39;t compile, compiler gives you an error message. Please <a href=\"https://stackoverflow.com/posts/52969105/edit\">edit</a> the question, and copy-paste the error messages, that you get, into it."}], "answers": [{"tags": [], "owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": true, "score": 4, "last_activity_date": 1540384997, "creation_date": 1540384997, "answer_id": 52969326, "question_id": 52969105, "link": "https://stackoverflow.com/questions/52969105/creating-stdmap-with-a-structure-as-its-key-and-value/52969326#52969326", "title": "Creating std::map with a structure as its key and value", "body": "<p>As keys in <code>std::map</code> are const your <code>operator&lt;</code> method must be const as well:</p>\n\n<pre><code>  bool operator&lt;(const RJNodeAddress &amp;l) const\n                                        // ^ here\n</code></pre>\n\n<p>it should be const anyway as it does not modify the object but in this case missing it leads to compilation errors.</p>\n"}], "owner": {"reputation": 1238, "user_id": 5701173, "user_type": "registered", "accept_rate": 48, "profile_image": "https://graph.facebook.com/10204003634606277/picture?type=large", "display_name": "Vishal Sharma", "link": "https://stackoverflow.com/users/5701173/vishal-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "closed_date": 1540385135, "accepted_answer_id": 52969326, "answer_count": 1, "score": -2, "last_activity_date": 1540385010, "creation_date": 1540384392, "last_edit_date": 1540385010, "question_id": 52969105, "link": "https://stackoverflow.com/questions/52969105/creating-stdmap-with-a-structure-as-its-key-and-value", "closed_reason": "Duplicate", "title": "Creating std::map with a structure as its key and value", "body": "<p>I want to define a static map inside a class, which will have a structure as both it's key and value. I've read that a <strong>'&lt;' operator</strong> is needed to be defined, therefore I've included that definition inside the struct itself(I've randomly defined it as I don't need any comparison anywhere in my program).</p>\n\n<p>The below sample code doesn't compile.The compiler produces a lot of warnings and errors which I don't understand right now. (Please ignore the uninitialized values in the main function):</p>\n\n<pre><code>#include&lt;string&gt;\n#include&lt;iostream&gt;\n#include&lt;map&gt;\nusing namespace std;\n\nstruct RJNodeAddress\n{\n        string m_ip;\n        string m_port;\n        bool operator&lt;(const RJNodeAddress &amp;l)\n        {\n                int l_size=l.m_ip.size();\n                int r_size=l.m_port.size();\n                return (l_size &lt; r_size);\n        }\n};\n\nstruct RJNodeDetails\n{\n        string m_NodeType;\n        int        m_appId;\n};\n\nclass RJWebsocket\n{\npublic:\nstatic map&lt;RJNodeAddress,RJNodeDetails&gt; m_Nodes;\n};\n\nint main()\n{\nRJNodeAddress l_node;\n RJNodeDetails l_nodeDetails = RJWebsocket::m_Nodes[l_node];\n\n}\n</code></pre>\n\n<p><strong>Compiler output</strong></p>\n\n<pre><code>In file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h: In instantiation of \u00e2constexpr bool std::less&lt;_Tp&gt;::operator()(const _Tp&amp;, const _Tp&amp;) const [with _Tp = RJNodeAddress]\u00e2:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_map.h:491:32:   required from \u00e2std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::mapped_type&amp; std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::operator[](const key_type&amp;) [with _Key = RJNodeAddress; _Tp = RJNodeDetails; _Compare = std::less&lt;RJNodeAddress&gt;; _Alloc = std::allocator&lt;std::pair&lt;const RJNodeAddress, RJNodeDetails&gt; &gt;; std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::mapped_type = RJNodeDetails; std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;::key_type = RJNodeAddress]\u00e2\ntest.cpp:34:59:   required from here\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: error: no match for \u00e2operator&lt;\u00e2 (operand types are \u00e2const RJNodeAddress\u00e2 and \u00e2const RJNodeAddress\u00e2)\n       { return __x &lt; __y; }\n                ~~~~^~~~~\ntest.cpp:10:14: note: candidate: bool RJNodeAddress::operator&lt;(const RJNodeAddress&amp;) &lt;near match&gt;\n         bool operator&lt;(const RJNodeAddress &amp;l)\n              ^~~~~~~~\ntest.cpp:10:14: note:   passing \u00e2const RJNodeAddress*\u00e2 as \u00e2this\u00e2 argument discards qualifiers\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_algobase.h:64:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/char_traits.h:39,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:40,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h:449:5: note: candidate: template&lt;class _T1, class _T2&gt; constexpr bool std::operator&lt;(const std::pair&lt;_T1, _T2&gt;&amp;, const std::pair&lt;_T1, _T2&gt;&amp;)\n     operator&lt;(const pair&lt;_T1, _T2&gt;&amp; __x, const pair&lt;_T1, _T2&gt;&amp; __y)\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_pair.h:449:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::pair&lt;_T1, _T2&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_algobase.h:67:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/char_traits.h:39,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:40,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_iterator.h:305:5: note: candidate: template&lt;class _Iterator&gt; constexpr bool std::operator&lt;(const std::reverse_iterator&lt;_Iterator&gt;&amp;, const std::reverse_iterator&lt;_Iterator&gt;&amp;)\n     operator&lt;(const reverse_iterator&lt;_Iterator&gt;&amp; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_iterator.h:305:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::reverse_iterator&lt;_Iterator&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_algobase.h:67:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/char_traits.h:39,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:40,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_iterator.h:343:5: note: candidate: template&lt;class _IteratorL, class _IteratorR&gt; constexpr bool std::operator&lt;(const std::reverse_iterator&lt;_Iterator&gt;&amp;, const std::reverse_iterator&lt;_IteratorR&gt;&amp;)\n     operator&lt;(const reverse_iterator&lt;_IteratorL&gt;&amp; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_iterator.h:343:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::reverse_iterator&lt;_Iterator&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_algobase.h:67:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/char_traits.h:39,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:40,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_iterator.h:1142:5: note: candidate: template&lt;class _IteratorL, class _IteratorR&gt; constexpr bool std::operator&lt;(const std::move_iterator&lt;_IteratorL&gt;&amp;, const std::move_iterator&lt;_IteratorR&gt;&amp;)\n     operator&lt;(const move_iterator&lt;_IteratorL&gt;&amp; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_iterator.h:1142:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::move_iterator&lt;_IteratorL&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_algobase.h:67:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/char_traits.h:39,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:40,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_iterator.h:1148:5: note: candidate: template&lt;class _Iterator&gt; constexpr bool std::operator&lt;(const std::move_iterator&lt;_IteratorL&gt;&amp;, const std::move_iterator&lt;_IteratorL&gt;&amp;)\n     operator&lt;(const move_iterator&lt;_Iterator&gt;&amp; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_iterator.h:1148:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::move_iterator&lt;_IteratorL&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/basic_string.h:48:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:52,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/string_view:485:5: note: candidate: template&lt;class _CharT, class _Traits&gt; bool std::operator&lt;(std::basic_string_view&lt;_CharT, _Traits&gt;, std::basic_string_view&lt;_CharT, _Traits&gt;)\n     operator&lt; (basic_string_view&lt;_CharT, _Traits&gt; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/string_view:485:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2RJNodeAddress\u00e2 is not derived from \u00e2std::basic_string_view&lt;_CharT, _Traits&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/basic_string.h:48:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:52,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/string_view:491:5: note: candidate: template&lt;class _CharT, class _Traits&gt; bool std::operator&lt;(std::basic_string_view&lt;_CharT, _Traits&gt;, std::__detail::__idt&lt;std::basic_string_view&lt;_CharT, _Traits&gt; &gt;)\n     operator&lt; (basic_string_view&lt;_CharT, _Traits&gt; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/string_view:491:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2RJNodeAddress\u00e2 is not derived from \u00e2std::basic_string_view&lt;_CharT, _Traits&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/basic_string.h:48:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:52,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/string_view:497:5: note: candidate: template&lt;class _CharT, class _Traits&gt; bool std::operator&lt;(std::__detail::__idt&lt;std::basic_string_view&lt;_CharT, _Traits&gt; &gt;, std::basic_string_view&lt;_CharT, _Traits&gt;)\n     operator&lt; (__detail::__idt&lt;basic_string_view&lt;_CharT, _Traits&gt;&gt; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/string_view:497:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2RJNodeAddress\u00e2 is not derived from \u00e2std::basic_string_view&lt;_CharT, _Traits&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:52:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/basic_string.h:5892:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator&lt;(const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     operator&lt;(const basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/basic_string.h:5892:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:52:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/basic_string.h:5905:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator&lt;(const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;, const _CharT*)\n     operator&lt;(const basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp; __lhs,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/basic_string.h:5905:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:52:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/basic_string.h:5917:5: note: candidate: template&lt;class _CharT, class _Traits, class _Alloc&gt; bool std::operator&lt;(const _CharT*, const std::basic_string&lt;_CharT, _Traits, _Alloc&gt;&amp;)\n     operator&lt;(const _CharT* __lhs,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/basic_string.h:5917:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   mismatched types \u00e2const _CharT*\u00e2 and \u00e2RJNodeAddress\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/ios_base.h:46:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/ios:42,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/ostream:38,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/iostream:39,\n                 from test.cpp:2:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/system_error:208:3: note: candidate: bool std::operator&lt;(const std::error_code&amp;, const std::error_code&amp;)\n   operator&lt;(const error_code&amp; __lhs, const error_code&amp; __rhs) noexcept\n   ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/system_error:208:3: note:   no known conversion for argument 1 from \u00e2const RJNodeAddress\u00e2 to \u00e2const std::error_code&amp;\u00e2\n/opt/rh/devtoolset-7/root/usr/include/c++/7/system_error:282:3: note: candidate: bool std::operator&lt;(const std::error_condition&amp;, const std::error_condition&amp;)\n   operator&lt;(const error_condition&amp; __lhs,\n   ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/system_error:282:3: note:   no known conversion for argument 1 from \u00e2const RJNodeAddress\u00e2 to \u00e2const std::error_condition&amp;\u00e2\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/node_handle.h:39:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:72,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:60,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:808:5: note: candidate: template&lt;class _Tp, class _Up&gt; constexpr std::__optional_relop_t&lt;decltype ((declval&lt;_Tp&gt;() &lt; declval&lt;_Up&gt;()))&gt; std::operator&lt;(const std::optional&lt;_Tp&gt;&amp;, const std::optional&lt;_Up&gt;&amp;)\n     operator&lt;(const optional&lt;_Tp&gt;&amp; __lhs, const optional&lt;_Up&gt;&amp; __rhs)\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:808:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::optional&lt;_Tp&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/node_handle.h:39:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:72,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:60,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:861:5: note: candidate: template&lt;class _Tp&gt; constexpr bool std::operator&lt;(const std::optional&lt;_Tp&gt;&amp;, std::nullopt_t)\n     operator&lt;(const optional&lt;_Tp&gt;&amp; /* __lhs */, nullopt_t) noexcept\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:861:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::optional&lt;_Tp&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/node_handle.h:39:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:72,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:60,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:866:5: note: candidate: template&lt;class _Tp&gt; constexpr bool std::operator&lt;(std::nullopt_t, const std::optional&lt;_Tp&gt;&amp;)\n     operator&lt;(nullopt_t, const optional&lt;_Tp&gt;&amp; __rhs) noexcept\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:866:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::optional&lt;_Tp&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/node_handle.h:39:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:72,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:60,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:926:5: note: candidate: template&lt;class _Tp, class _Up&gt; constexpr std::__optional_relop_t&lt;decltype ((declval&lt;_Tp&gt;() &lt; declval&lt;_Up&gt;()))&gt; std::operator&lt;(const std::optional&lt;_Tp&gt;&amp;, const _Up&amp;)\n     operator&lt;(const optional&lt;_Tp&gt;&amp; __lhs, const _Up&amp; __rhs)\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:926:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::optional&lt;_Tp&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/node_handle.h:39:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:72,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:60,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:932:5: note: candidate: template&lt;class _Tp, class _Up&gt; constexpr std::__optional_relop_t&lt;decltype ((declval&lt;_Up&gt;() &lt; declval&lt;_Tp&gt;()))&gt; std::operator&lt;(const _Up&amp;, const std::optional&lt;_Tp&gt;&amp;)\n     operator&lt;(const _Up&amp; __lhs, const optional&lt;_Tp&gt;&amp; __rhs)\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/optional:932:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::optional&lt;_Tp&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/tuple:39:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/node_handle.h:40,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:72,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:60,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/array:262:5: note: candidate: template&lt;class _Tp, long unsigned int _Nm&gt; bool std::operator&lt;(const std::array&lt;_Tp, _Nm&gt;&amp;, const std::array&lt;_Tp, _Nm&gt;&amp;)\n     operator&lt;(const array&lt;_Tp, _Nm&gt;&amp; __a, const array&lt;_Tp, _Nm&gt;&amp; __b)\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/array:262:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::array&lt;_Tp, _Nm&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/node_handle.h:40:0,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:72,\n                 from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:60,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/tuple:1410:5: note: candidate: template&lt;class ... _TElements, class ... _UElements&gt; constexpr bool std::operator&lt;(const std::tuple&lt;_Tps ...&gt;&amp;, const std::tuple&lt;_Elements ...&gt;&amp;)\n     operator&lt;(const tuple&lt;_TElements...&gt;&amp; __t,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/tuple:1410:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::tuple&lt;_Tps ...&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:60:0,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:1543:5: note: candidate: template&lt;class _Key, class _Val, class _KeyOfValue, class _Compare, class _Alloc&gt; bool std::operator&lt;(const std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;&amp;, const std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;&amp;)\n     operator&lt;(const _Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;&amp; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_tree.h:1543:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::_Rb_tree&lt;_Key, _Val, _KeyOfValue, _Compare, _Alloc&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:61:0,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_map.h:1397:5: note: candidate: template&lt;class _Key, class _Tp, class _Compare, class _Alloc&gt; bool std::operator&lt;(const std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp;, const std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp;)\n     operator&lt;(const map&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_map.h:1397:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::map&lt;_Key, _Tp, _Compare, _Alloc&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/map:62:0,\n                 from test.cpp:3:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_multimap.h:1062:5: note: candidate: template&lt;class _Key, class _Tp, class _Compare, class _Alloc&gt; bool std::operator&lt;(const std::multimap&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp;, const std::multimap&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp;)\n     operator&lt;(const multimap&lt;_Key, _Tp, _Compare, _Alloc&gt;&amp; __x,\n     ^~~~~~~~\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_multimap.h:1062:5: note:   template argument deduction/substitution failed:\nIn file included from /opt/rh/devtoolset-7/root/usr/include/c++/7/string:48:0,\n                 from test.cpp:1:\n/opt/rh/devtoolset-7/root/usr/include/c++/7/bits/stl_function.h:386:20: note:   \u00e2const RJNodeAddress\u00e2 is not derived from \u00e2const std::multimap&lt;_Key, _Tp, _Compare, _Alloc&gt;\u00e2\n       { return __x &lt; __y; }\n                ~~~~^~~~~\n</code></pre>\n"}, {"tags": ["c++", "boost", "tokenize"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1540384828, "post_id": 52969043, "comment_id": 92844667, "body": "Are you sure about your tokens? I know nothing about burmese, but they&#39;re overlapping and don&#39;t cover the whole string. Also, don&#39;t you need a custom separator here?"}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1540385039, "post_id": 52969043, "comment_id": 92844794, "body": "Your code example may be missing a <code>boost::char_separator</code>, so it will be broken on space characters.  Is there a <code>&#39; &#39;</code> (U+0020) UTF-8 space character between the two tokens?"}, {"owner": {"reputation": 51, "user_id": 9908307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825c0908a4f908a0d3ac841589b89c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Lambar", "link": "https://stackoverflow.com/users/9908307/lambar"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1540385193, "post_id": 52969043, "comment_id": 92844930, "body": "@Quentin I have updated the outputs. Sorry for the incorrect output."}, {"owner": {"reputation": 51, "user_id": 9908307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825c0908a4f908a0d3ac841589b89c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Lambar", "link": "https://stackoverflow.com/users/9908307/lambar"}, "reply_to_user": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1540385416, "post_id": 52969043, "comment_id": 92845115, "body": "@Eljay Could you suggest an example? Space was unnecessary. I have trimmed it."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1540385825, "post_id": 52969043, "comment_id": 92845419, "body": "There is an example in the Boost Tokenizer documentation, <a href=\"https://www.boost.org/doc/libs/1_68_0/libs/tokenizer/doc/char_separator.htm\" rel=\"nofollow noreferrer\">char_separator</a>."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1540386143, "post_id": 52969043, "comment_id": 92845663, "body": "You may have to treat the unicode utf-8 sequence as a full string of utf-8 encoding units, in which case <a href=\"https://www.codeproject.com/Articles/100693/Splitting-strings\" rel=\"nofollow noreferrer\">splitting strings</a> will be of help."}], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1540419632, "post_id": 52978123, "comment_id": 92863795, "body": "Added a live demo with the OP&#39;s sample text"}], "tags": [], "owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "is_accepted": false, "score": 1, "last_activity_date": 1540419563, "last_edit_date": 1540419563, "creation_date": 1540416401, "answer_id": 52978123, "question_id": 52969043, "link": "https://stackoverflow.com/questions/52969043/tokenizing-using-boost-gives-out-the-same-output/52978123#52978123", "title": "Tokenizing using boost gives out the same output", "body": "<p>I don't understand that language, but detecting word boundaries is, in general, <strong>not</strong> tokenizing.</p>\n\n<p>Instead, use <a href=\"https://www.boost.org/doc/libs/1_67_0/libs/locale/doc/html/boundary_analysys.html\" rel=\"nofollow noreferrer\">Boost Locale's Boundary Analysis</a></p>\n\n<p>The sample:</p>\n\n<pre><code>using namespace boost::locale::boundary;\nboost::locale::generator gen;\nstd::string text=\"To be or not to be, that is the question.\"\n// Create mapping of text for token iterator using global locale.\nssegment_index map(word,text.begin(),text.end(),gen(\"en_US.UTF-8\")); \n// Print all \"words\" -- chunks of word boundary\nfor(ssegment_index::iterator it=map.begin(),e=map.end();it!=e;++it)\n    std::cout &lt;&lt;\"\\\"\"&lt;&lt; * it &lt;&lt; \"\\\", \";\nstd::cout &lt;&lt; std::endl;\n</code></pre>\n\n<p>Would print</p>\n\n<pre><code>\"To\", \" \", \"be\", \" \", \"or\", \" \", \"not\", \" \", \"to\", \" \", \"be\", \",\", \" \", \"that\", \" \", \"is\", \" \", \"the\", \" \", \"question\", \".\",\n</code></pre>\n\n<p>And this sentence <code>\"\u751f\u304d\u308b\u304b\u6b7b\u306c\u304b\u3001\u305d\u308c\u304c\u554f\u984c\u3060\u3002\"</code> would be split into following segments in ja_JP.UTF-8 (Japanese) locale:</p>\n\n<pre><code>\"\u751f\", \"\u304d\u308b\u304b\", \"\u6b7b\", \"\u306c\u304b\", \"\u3001\", \"\u305d\u308c\u304c\", \"\u554f\u984c\", \"\u3060\", \"\u3002\", \n</code></pre>\n\n<h2>DEMO</h2>\n\n<p>A demo using the OP's text and the my_MM locale:</p>\n\n<p><strong><kbd><a href=\"http://coliru.stacked-crooked.com/a/261ad7c15f29e128\" rel=\"nofollow noreferrer\">Live On Coliru</a></kbd></strong></p>\n\n<pre><code>#include &lt;boost/range/iterator_range.hpp&gt;\n#include &lt;boost/locale.hpp&gt;\n#include &lt;boost/locale/boundary.hpp&gt;\n#include &lt;iostream&gt;\n#include &lt;iomanip&gt;\n\nint main() {\n    using namespace boost::locale::boundary;\n    boost::locale::generator gen;\n    std::string text=\"\u103b\u1001\u1004\u1039\u1038\u1001\u1010\u1039\u1001\u1032\u1037\u1010\u102c\u101c\u102d\u102f\u1095\";\n\n    ssegment_index map(word,text.begin(),text.end(),gen(\"my_MM.UTF-8\")); \n\n    for (auto&amp;&amp; segment : boost::make_iterator_range(map.begin(), map.end()))\n        std::cout &lt;&lt; std::quoted(segment.str()) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Prints</p>\n\n<pre><code>\"\u103b\"\n\"\u1001\"\n\"\u1004\u1039\u1038\"\n\"\u1001\"\n\"\u1010\u1039\"\n\"\u1001\u1032\u1037\"\n\"\u1010\u102c\"\n\"\u101c\u102d\u102f\u1095\"\n</code></pre>\n\n<p>This may, or may not be what the OP expects. Note that you might have to generate/install the appropriate locale(s) on your system for it to work as expected.</p>\n"}], "owner": {"reputation": 51, "user_id": 9908307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825c0908a4f908a0d3ac841589b89c9d?s=128&d=identicon&r=PG&f=1", "display_name": "Lambar", "link": "https://stackoverflow.com/users/9908307/lambar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540419563, "creation_date": 1540384233, "last_edit_date": 1540385697, "question_id": 52969043, "link": "https://stackoverflow.com/questions/52969043/tokenizing-using-boost-gives-out-the-same-output", "title": "Tokenizing using boost gives out the same output", "body": "<p>I want to tokenize a lot of Burmese text. So I tried using <code>boost</code> tokenizer.</p>\n\n<p>The text that I was trying with is <code>\u103b\u1001\u1004\u1039\u1038\u1001\u1010\u1039\u1001\u1032\u1037\u1010\u102c\u101c\u102d\u102f\u1095</code> and it should get tokenized to <code>\u103b\u1001\u1004\u1039\u1038</code> and <code>\u1004\u1039\u1038\u103b\u1001\u1004\u1039\u1038</code> but it just outputs the input. Is there something I am doing wrong?</p>\n\n<pre><code>    #include&lt;iostream&gt;\n    #include&lt;boost/tokenizer.hpp&gt;\n    #include&lt;string&gt;\n\n    int main(){\n        using namespace std;\n        using namespace boost;\n        string s = \"\u103b\u1001\u1004\u1039\u1038\u1001\u1010\u1039\u1001\u1032\u1037\u1010\u102c\u101c\u102d\u102f\u1095\";\n        tokenizer&lt;&gt; tok(s);\n        for(tokenizer&lt;&gt;::iterator beg=tok.begin(); beg!=tok.end();++beg){\n                cout &lt;&lt; *beg &lt;&lt; \"\\n\";\n        }\n    }\n</code></pre>\n\n<p>The output should break into a series of tokens like: <code>\u103b\u1001\u1004\u1039\u1038</code> and <code>\u1001\u1010\u1039\u1001\u1032\u1037\u1010\u102c\u101c\u102d\u102f\u1095</code> but currently, the output is equal to input. </p>\n\n<p><em>I want to tokenize this into a series of tokens with word boundaries if possible.</em></p>\n"}, {"tags": ["c++", "arrays", "c++11", "memory"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 3, "creation_date": 1540384428, "post_id": 52969030, "comment_id": 92844385, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1239938/accessing-an-array-out-of-bounds-gives-no-error-why\">Accessing an array out of bounds gives no error, why?</a>"}, {"owner": {"reputation": 310, "user_id": 5674968, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/cc331b88886d57d18286c139e72e0345?s=128&d=identicon&r=PG&f=1", "display_name": "R. Joiny", "link": "https://stackoverflow.com/users/5674968/r-joiny"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1540384885, "post_id": 52969030, "comment_id": 92844699, "body": "Yep, this is a duplicate. But also very interesting, as you probably access the function call stack... Please read the answer of @AlgirdasPreid\u017eius linked question for an explanation of undefined behaviour :)"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1540384925, "post_id": 52969030, "comment_id": 92844728, "body": "The usual question: how are your readings <i>not</i> garbage? They&#39;re not values from the array after all..."}, {"owner": {"reputation": 79096, "user_id": 865874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ACMnN.png?s=128&g=1", "display_name": "rodrigo", "link": "https://stackoverflow.com/users/865874/rodrigo"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 5, "creation_date": 1540384980, "post_id": 52969030, "comment_id": 92844756, "body": "@Quentin One person&#39;s garbage is another person&#39;s treasure!"}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 2, "creation_date": 1540384997, "post_id": 52969030, "comment_id": 92844769, "body": "&quot;<i>I understand that g++ doesn&#39;t check for bounds</i>&quot; It&#39;s not just g++. No compiler is mandated to check for bounds, by C++ standard. &quot;<i>but I was intrigued by the fact that the values of S[-1] was always the same as s.</i>&quot; Undefined behavior is undefined. It may as well be so in this particular compiler version you are using, but it also can format your hard drive, when you update the compiler."}, {"owner": {"reputation": 65, "user_id": 8373890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870befc4d9646b053b2bb341aadf4532?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/8373890/saurabh"}, "edited": false, "score": 0, "creation_date": 1540385127, "post_id": 52969030, "comment_id": 92844875, "body": "I get it, thanks for explaining"}, {"owner": {"reputation": 6556, "user_id": 874660, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/45a7738c334183bff552bcf73c4dcd65?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/874660/ben"}, "edited": false, "score": 4, "creation_date": 1540385195, "post_id": 52969030, "comment_id": 92844935, "body": "Try printing out the address of each string in addition to its value. I suspect <code>s</code> is sitting to the \u201cleft\u201d of <code>S[0]</code> in memory."}, {"owner": {"reputation": 65, "user_id": 8373890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870befc4d9646b053b2bb341aadf4532?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/8373890/saurabh"}, "edited": false, "score": 1, "creation_date": 1540385417, "post_id": 52969030, "comment_id": 92845116, "body": "This actually explains the problem, the address of S[0] and s are - 0x7ffdf6346350 0x7ffdf6346330 respectively."}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1540391850, "post_id": 52969030, "comment_id": 92849778, "body": "More details: <a href=\"https://en.cppreference.com/w/cpp/language/ub\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/ub</a>"}, {"owner": {"reputation": 7407, "user_id": 1757805, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/AMueI.jpg?s=128&g=1", "display_name": "Francis Cugler", "link": "https://stackoverflow.com/users/1757805/francis-cugler"}, "edited": false, "score": 0, "creation_date": 1540417658, "post_id": 52969030, "comment_id": 92863227, "body": "Indexing arrays out of bounds is UB! The UB can change from compiler to operating system to hardware, etc."}], "answers": [{"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 7, "last_activity_date": 1540386211, "creation_date": 1540386211, "answer_id": 52969767, "question_id": 52969030, "link": "https://stackoverflow.com/questions/52969030/accessing-memory-at-negative-indexes-of-array-in-c-does-not-return-garbage/52969767#52969767", "title": "Accessing memory at negative indexes of array in C++ does not return garbage", "body": "<p>Access out of bounds is undefined behaviour.</p>\n\n<p>Undefined behaviour reads is not \"garbage\" or \"segfault\", it is literally anything.  The read could time travel and make code earlier in the program behave differently.  The behaviour of the program, from start to finish, it completely unspecified by the C++ standard whenever any undefined behaviour happens anywhere.</p>\n\n<p>In this case, naive assembly and the ABI tells you that arguments on the \"stack\" at run time are located adjacent to things like the arguments to the function.</p>\n\n<p>So a naive rewriting of your code into assembly results in negative indexes reading from the arguments to the function.</p>\n\n<p>But, a whole myriad of completely innocuous, common and safe alternative interpretations of your program as machine code, starting with inline and going far away from there, make this not happen.</p>\n\n<p>When compiling without LTO or over dynamic library boundaries, you can have some small amount of confidence that the compiler's published ABI will be used to make the call; any assumption elsewhere is dangerously bad.  And if you are compiling without LTO and relying on it, it now means that you have to audit every build of your code from now until eternity or risk a bug showing up with no apparent cause long from now.</p>\n"}], "owner": {"reputation": 65, "user_id": 8373890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870befc4d9646b053b2bb341aadf4532?s=128&d=identicon&r=PG&f=1", "display_name": "Saurabh", "link": "https://stackoverflow.com/users/8373890/saurabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 52969767, "answer_count": 1, "score": 0, "last_activity_date": 1540386211, "creation_date": 1540384180, "last_edit_date": 1540384812, "question_id": 52969030, "link": "https://stackoverflow.com/questions/52969030/accessing-memory-at-negative-indexes-of-array-in-c-does-not-return-garbage", "title": "Accessing memory at negative indexes of array in C++ does not return garbage", "body": "<p>I wrote the following program to search of a particular string in a given array of string. I made an error in the search function and wrote i-- instead of i++. </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint search(string S[], int pos, string s)\n{\n    for(int i=0; i&lt;pos; i--) {\n        cout &lt;&lt; i &lt;&lt; \" : \" &lt;&lt; S[i] &lt;&lt; \"\\n\";\n        if (S[i] == s) {\n            cout &lt;&lt; \"Inside Return -&gt;\\n\";\n            cout &lt;&lt; i &lt;&lt; \" / \" &lt;&lt; S[i] &lt;&lt; \" / \" &lt;&lt; s &lt;&lt; \"\\n\";\n            return i;\n        }\n    }\n    return -1;\n}\n\nint main()\n{\n    string S[] = {\"abc\", \"def\", \"pqr\", \"xyz\"};\n    string s = \"def\";\n    cout &lt;&lt; search(S,2,s) &lt;&lt; \"\\n\";\n    return 0;\n}\n</code></pre>\n\n<p>Logically the loop is an infinite loop and should not stop but what I observed was that the if condition was true for each search and the function returned -1.</p>\n\n<p>I printed the values and noticed that the value of S[-1] is always same as the third argument passed to the function (the string to be searched) due to which the loop was returning -1 every time.</p>\n\n<p>Is this something that g++ is doing or is it related to the way memory is allocated for the formal arguments of the function?</p>\n\n<p>Output of the above code -</p>\n\n<pre><code> 0 : abc\n-1 : def\nInside Return -&gt;\n-1 / def / def\n</code></pre>\n\n<p>PS - I am using g++ (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0</p>\n\n<p>Edit -I understand that g++ doesn't check for bounds but I was intrigued by the fact that the values of S[-1] was always the same as s. I was wondering if there are any possible theories for this</p>\n"}, {"tags": ["c++", "class", "c++11", "variables", "initialization"], "comments": [{"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1540383658, "post_id": 52968827, "comment_id": 92843878, "body": "by initializer you mean constructor right??"}, {"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 0, "creation_date": 1540384659, "post_id": 52968827, "comment_id": 92844547, "body": "As a side note, any reason why you are using C-style strings instead of std::string for the rank and suit names?"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 0, "creation_date": 1540385106, "post_id": 52968827, "comment_id": 92844857, "body": "@Caw: why would you use a <code>std::string</code> when you know the string at compile-time and can mark it <code>constexpr</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 1, "creation_date": 1540388900, "post_id": 52969022, "comment_id": 92847579, "body": "Please don&#39;t explode the C++11 features, we still need them! :("}, {"owner": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1540388991, "post_id": 52969022, "comment_id": 92847667, "body": "On a more serious note: Please choose real words for your type and variable names instead of one letter abbreviations. There is simply no reason to write <code>Su</code> instead of <code>Suite</code>, <code>K</code> instead of <code>Card</code> etc."}, {"owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "reply_to_user": {"reputation": 22348, "user_id": 9528746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ukFe1.png?s=128&g=1", "display_name": "Max Langhof", "link": "https://stackoverflow.com/users/9528746/max-langhof"}, "edited": false, "score": 0, "creation_date": 1540389110, "post_id": 52969022, "comment_id": 92847765, "body": "@MaxLanghof hi max, thanks for the comment... you know, I was trying to post as fast as i can... for sure we need to use more descriptive names for all the classes and its members... :)"}], "tags": [], "owner": {"reputation": 42880, "user_id": 982161, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/kutcC.png?s=128&g=1", "display_name": "\u03a6Xoc\u0119 \uc6c3 \u041fepe&#250;pa \u30c4", "link": "https://stackoverflow.com/users/982161/%ce%a6xoc%c4%99-%ec%9b%83-%d0%9fepe%c3%bapa-%e3%83%84"}, "is_accepted": true, "score": 2, "last_activity_date": 1540384169, "creation_date": 1540384169, "answer_id": 52969022, "question_id": 52968827, "link": "https://stackoverflow.com/questions/52968827/class-initializer-checking-for-certain-input/52969022#52969022", "title": "Class Initializer checking for certain input", "body": "<blockquote>\n  <p>or is there a way to do this more efficiently?</p>\n</blockquote>\n\n<p>yes, you can explode the new c++11 features:</p>\n\n<pre><code>class K \n{\n    public:\n        enum class R\n        {\n            TWO,\n            THREE,\n            FOUR\n        };\n        enum class Su\n        {\n            S,\n            H,\n            C,\n            D\n        };\n        K(const R someR, const Su someSu);\n    private:\n        R r;\n        Su su;\n};\n#endif /* K_H */\n\nK::K(const R someR, const Su someSu): r{someR}, su{someSu}\n{\n\n}\n</code></pre>\n\n<p>with this approach you are avoiding the user of the class to make mistakes by mixing the types of your parameters in the constructor...</p>\n"}, {"comments": [{"owner": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 1, "creation_date": 1540384578, "post_id": 52969111, "comment_id": 92844491, "body": "Seems like a very roundabout way of solving the problem, using an enum would be far more simple."}, {"owner": {"reputation": 113, "user_id": 1169205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f6b30e68d1620bbafd5c113b708886?s=128&d=identicon&r=PG", "display_name": "JimmyG", "link": "https://stackoverflow.com/users/1169205/jimmyg"}, "reply_to_user": {"reputation": 1248, "user_id": 1791872, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/6nnz7.png?s=128&g=1", "display_name": "flau", "link": "https://stackoverflow.com/users/1791872/flau"}, "edited": false, "score": 1, "creation_date": 1540384636, "post_id": 52969111, "comment_id": 92844532, "body": "I&#39;m just guessing he wants to keep being able to use strings in the constructor."}], "tags": [], "owner": {"reputation": 113, "user_id": 1169205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4f6b30e68d1620bbafd5c113b708886?s=128&d=identicon&r=PG", "display_name": "JimmyG", "link": "https://stackoverflow.com/users/1169205/jimmyg"}, "is_accepted": false, "score": 1, "last_activity_date": 1540384414, "creation_date": 1540384414, "answer_id": 52969111, "question_id": 52968827, "link": "https://stackoverflow.com/questions/52968827/class-initializer-checking-for-certain-input/52969111#52969111", "title": "Class Initializer checking for certain input", "body": "<p>Just offhand, I would make two more classes, one called Rank and the other Suit.  They each should have constructor that takes a string and a function isValid().  Then you can initialize rank and suit in the Card class and then check whether they are valid before proceeding with anything.  Sort of like this:</p>\n\n<pre><code>class Rank {\n   public:\n      Rank(std::string s) : mRank(s) { }\n      bool isValid() const { /* check against all valid strings */ return true; }\n   private:\n      std::string mRank;\n}\n</code></pre>\n\n<p>Maybe initialize a string array in the class with the valid strings and loop through the elements to test, or a simple brute force check like above.</p>\n"}], "owner": {"reputation": 23, "user_id": 10551912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6wOOcXDhVEE/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCTfMqsdZ6Ltxba2Xrn0wJAwqR8sA/mo/photo.jpg?sz=128", "display_name": "Mike Wazowski", "link": "https://stackoverflow.com/users/10551912/mike-wazowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 52969022, "answer_count": 2, "score": 2, "last_activity_date": 1540385979, "creation_date": 1540383529, "last_edit_date": 1540385979, "question_id": 52968827, "link": "https://stackoverflow.com/questions/52968827/class-initializer-checking-for-certain-input", "title": "Class Initializer checking for certain input", "body": "<p>I have a Class in a header file and I am trying to implement the initializing given a certain input. \nSo my header file excluding headers looks something like this:</p>\n\n<pre><code>class Card {\npublic:\n  // rank and suit names\n  static constexpr const char* const RANK_TWO = \"Two\";\n  static constexpr const char* const RANK_THREE = \"Three\";\n  static constexpr const char* const RANK_FOUR = \"Four\";\n  static constexpr const char* const RANK_FIVE = \"Five\";\n  static constexpr const char* const RANK_SIX = \"Six\";\n  static constexpr const char* const RANK_SEVEN = \"Seven\";\n  static constexpr const char* const RANK_EIGHT = \"Eight\";\n  static constexpr const char* const RANK_NINE = \"Nine\";\n  static constexpr const char* const RANK_TEN = \"Ten\";\n\n  static constexpr const char* const SUIT_SPADES = \"Spades\";\n  static constexpr const char* const SUIT_HEARTS = \"Hearts\";\n  static constexpr const char* const SUIT_CLUBS = \"Clubs\";\n  static constexpr const char* const SUIT_DIAMONDS = \"Diamonds\";\n\nCard();\n\nCard(const std::string &amp;rank_in, const std::string &amp;suit_in);\n\nprivate:\n  std::string rank;\n  std::string suit;\n};\n</code></pre>\n\n<p>For the implementation of the second initializer I have this so far.</p>\n\n<pre><code>Card::Card(const std::string &amp;rank_in, const std::string &amp;suit_in){\n\n    this-&gt;rank = rank_in;\n    this-&gt;suit = suit_in;\n}\n</code></pre>\n\n<p>To check if my rank_in and suit_in match one of the variables inside the class, do I need to check each one individually or is there a way to do this more efficiently? Thanks in advance the help is much appreciated</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1540382811, "post_id": 52968586, "comment_id": 92843335, "body": "Short answer: No."}], "answers": [{"tags": [], "owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "is_accepted": false, "score": 2, "last_activity_date": 1540383674, "last_edit_date": 1540383674, "creation_date": 1540382949, "answer_id": 52968649, "question_id": 52968586, "link": "https://stackoverflow.com/questions/52968586/class-member-function-definition-after-forward-declaration-of-class-before-clas/52968649#52968649", "title": "class member function definition after forward declaration of class, before class declaration", "body": "<p>No. It is not possible to define member functions of incomplete classes. It is only possible to define member functions of those classes that have been defined. A forward declaration is not sufficient.</p>\n\n<p>The standard says in [class.mfct]:</p>\n\n<blockquote>\n  <p>A member function may be defined (11.4) in its class definition, in which case it is an inline member\n  function (10.1.6), or it may be defined outside of its class definition <strong>if it has already been declared</strong> but not\n  defined <strong>in its class definition</strong>. ...</p>\n</blockquote>\n\n<p>Now, the rule does <em>not</em> say that member functions may <em>only</em> be defined in these two places, so unless you know that standard has no other rule which allows a member function definition somewhere else (which it doesn't, as far as I know), then this by itself isn't technically complete information.</p>\n\n<p>However, the paragraph continues</p>\n\n<blockquote>\n  <p>... Except for member function definitions\n  that appear outside of a class definition, and except for explicit specializations of member functions of class\n  templates and member function templates (17.8) appearing outside of the class definition, a member function\n  shall not be redeclared.</p>\n</blockquote>\n\n<p>Note that a member function shall not be <em>redeclared</em> within the class definition. If the member function were defined before the class definition, then the function declaration within the class definition would be a <em>redeclaration</em>, and would violate this rule.</p>\n"}, {"tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1540383543, "creation_date": 1540383543, "answer_id": 52968832, "question_id": 52968586, "link": "https://stackoverflow.com/questions/52968586/class-member-function-definition-after-forward-declaration-of-class-before-clas/52968832#52968832", "title": "class member function definition after forward declaration of class, before class declaration", "body": "<p>No. The standard covers this trivial aspect as well.</p>\n\n<p>From CPP draft (N4713)</p>\n\n<blockquote>\n  <p><strong>12.2.1 Member functions [class.mfct]</strong>  </p>\n  \n  <ol>\n  <li><strong>A member function may be defined in its class definition</strong>, in which case it is an inline member function, or it may be <strong>defined outside of its class definition if it has already been declared but not defined in its class definition</strong>.</li>\n  </ol>\n</blockquote>\n\n<p>So the class definition is first necessary to define the member function in either one of the ways mentioned above.</p>\n"}], "owner": {"reputation": 21, "user_id": 10551841, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-h3O5XlMAcFc/AAAAAAAAAAI/AAAAAAAAAXY/3mED0Rx3f8I/photo.jpg?sz=128", "display_name": "Ramanjaneyulu Kesava", "link": "https://stackoverflow.com/users/10551841/ramanjaneyulu-kesava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1540383674, "creation_date": 1540382761, "question_id": 52968586, "link": "https://stackoverflow.com/questions/52968586/class-member-function-definition-after-forward-declaration-of-class-before-clas", "title": "class member function definition after forward declaration of class, before class declaration", "body": "<p>i got below compilation problem, while defining member function. is there a way to define member function before class declaration but with forward declaration?</p>\n\n<blockquote>\n  <p>error: invalid use of incomplete type \u2018class GetErrorLogInterfaceTest\u2019</p>\n</blockquote>\n\n<pre><code>class GetErrorLogInterfaceTest; // forward declaration of class\nvoid GetErrorLogInterfaceTest::initializeJsonFile() { // member function definition\n}\nclass GetErrorLogInterfaceTest : public ::testing::Test {\npublic:\n    void initializeJsonFile(); // member function declaration\n }\n</code></pre>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540381900, "post_id": 52968244, "comment_id": 92842734, "body": "if you just dont use <code>new</code> you will also solve your memory leak"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1540382515, "post_id": 52968244, "comment_id": 92843148, "body": "<code>#define __A__H</code> The identifier that you define here is reserved for the implementation. The behaviour of your program is therefore undefined."}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 1, "creation_date": 1540384142, "post_id": 52968244, "comment_id": 92844215, "body": "This doesn&#39;t address the question, but names that contain two consecutive underscores (<code>__A__H</code>) and names that begin with an underscore followed by a capital letter are reserved for use by the implementation. Don&#39;t use them in your code."}, {"owner": {"reputation": 3108, "user_id": 4641116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gc52U.png?s=128&g=1", "display_name": "Eljay", "link": "https://stackoverflow.com/users/4641116/eljay"}, "edited": false, "score": 0, "creation_date": 1540384195, "post_id": 52968244, "comment_id": 92844249, "body": "Also at global scope, names that begin with an underscore are reserved.  (Regardless if the next letter is uppercase, lowercase, or a digit, or another underscore.)"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 1453381, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58bf93fee1e939d15858386098d76b05?s=128&d=identicon&r=PG", "display_name": "Anass", "link": "https://stackoverflow.com/users/1453381/anass"}, "edited": false, "score": 0, "creation_date": 1540382126, "post_id": 52968274, "comment_id": 92842894, "body": "Omg, what a bad mistake. I will never forget it. Thanks"}, {"owner": {"reputation": 91, "user_id": 1453381, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58bf93fee1e939d15858386098d76b05?s=128&d=identicon&r=PG", "display_name": "Anass", "link": "https://stackoverflow.com/users/1453381/anass"}, "edited": false, "score": 0, "creation_date": 1540382159, "post_id": 52968274, "comment_id": 92842915, "body": "Ok for bool return"}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 5, "last_activity_date": 1540381840, "creation_date": 1540381840, "answer_id": 52968274, "question_id": 52968244, "link": "https://stackoverflow.com/questions/52968244/misunderstanding-about-the-operator-definition-c/52968274#52968274", "title": "misunderstanding about the operator definition c++", "body": "<p><code>obj1</code> and <code>obj2</code> are <code>A*</code> not <code>A</code> so all you are doing is comparing pointer addresses. If you want to use <code>A::operator&lt;</code> then you need to dereference your pointers</p>\n\n<pre><code>*obj1 &lt; *obj2\n</code></pre>\n\n<p>Also why would you have your <code>operator&lt;</code> return an <code>int</code>? It should return a <code>bool</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 1453381, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58bf93fee1e939d15858386098d76b05?s=128&d=identicon&r=PG", "display_name": "Anass", "link": "https://stackoverflow.com/users/1453381/anass"}, "edited": false, "score": 0, "creation_date": 1540382141, "post_id": 52968290, "comment_id": 92842906, "body": "Omg, what a bad mistake. I will never forget it. Thanks"}], "tags": [], "owner": {"reputation": 24693, "user_id": 10190237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f95f50f67af8a9658c5d76df263b323?s=128&d=identicon&r=PG&f=1", "display_name": "P.W", "link": "https://stackoverflow.com/users/10190237/p-w"}, "is_accepted": false, "score": 2, "last_activity_date": 1540381874, "creation_date": 1540381874, "answer_id": 52968290, "question_id": 52968244, "link": "https://stackoverflow.com/questions/52968244/misunderstanding-about-the-operator-definition-c/52968290#52968290", "title": "misunderstanding about the operator definition c++", "body": "<p>You are comparing pointers to <code>A</code>, not instances of <code>A</code> in this statement</p>\n\n<pre><code>int res=obj1&lt;obj2; \n</code></pre>\n\n<p>You should compare like this:  </p>\n\n<pre><code>int res=*obj1&lt; *obj2; \n</code></pre>\n\n<p>You also have to delete the memory you have allocated at the end of the program.</p>\n\n<pre><code>delete obj1;\ndelete obj2;\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 1453381, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58bf93fee1e939d15858386098d76b05?s=128&d=identicon&r=PG", "display_name": "Anass", "link": "https://stackoverflow.com/users/1453381/anass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 52968274, "answer_count": 2, "score": 0, "last_activity_date": 1540387635, "creation_date": 1540381732, "last_edit_date": 1540387635, "question_id": 52968244, "link": "https://stackoverflow.com/questions/52968244/misunderstanding-about-the-operator-definition-c", "title": "misunderstanding about the operator definition c++", "body": "<p>I'm trying to understand why the operator (&lt;) defined for this class insn't executed when called: </p>\n\n<pre><code>//File A.h (simplified class)\n#ifndef __A__H\n#define __A__H\n\n#include &lt;string&gt;\n#include &lt;cstdlib&gt;\n#include &lt;iostream&gt;\nusing namespace std;\n\nclass A {\n\nprivate:\n    string _str;\n    int _number;\n\npublic:\n    A( string str=\"\", int age=0): _str(str), _number(number){} //inline\n\n    int operator &lt; (const A &amp;a1 ) const \n    {\n        cout&lt;&lt;\"Call of new operator &lt;\"&lt;&lt;endl;\n\n        if ( _str == a1._str )\n            return _number &lt; a1._number; \n        return _str &lt; a1._str; //here use of (&lt;) associated to string \n     }\n\n};\n#endif\n\nint main()\n{\n    A *obj1= new A(\"z\",10);\n    A *obj2= new A(\"b\",0);\n    int res=obj1&lt;obj2; //res is equal to 1. There's no message              \n                       // call of new operator\"\n\n    return 0;\n\n} \n</code></pre>\n\n<p>What I've learned is that the redefinition of the operator permits its call. Any help ? thank you</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 3923, "user_id": 8309701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S44bo.png?s=128&g=1", "display_name": "Chris Uzdavinis", "link": "https://stackoverflow.com/users/8309701/chris-uzdavinis"}, "is_accepted": true, "score": 4, "last_activity_date": 1540382408, "creation_date": 1540382408, "answer_id": 52968477, "question_id": 52967998, "link": "https://stackoverflow.com/questions/52967998/read-from-file-with-direct-access-c/52968477#52968477", "title": "read from file with direct access c++", "body": "<p>You have a repeated problem of not checking if operations succeed, and then using uninitialized data because no initialization occurs.  For example:</p>\n\n<pre><code>hardwareData hardware;\n\nint id;\ncin &gt;&gt; id;\ninsertInFile.seekg((id - 1) + sizeof(hardware));\n\ninsertInFile.read((char *)&amp;hardware, sizeof(hardware));\n\nif (hardware.id == 0)\n{\n</code></pre>\n\n<p><code>hardwareData</code> has no constructor, so hardware is uninitialized and likely contains garbage.  It is NOT zero initialized unless you cause that to happen, such as:</p>\n\n<pre><code>hardwareData hardware{};\n</code></pre>\n\n<p>Next, <code>id</code> is uninitialized, again likely holding garbage.  If reading from cin fails, id remains holding a garbage value.  Initialize id to zero.</p>\n\n<p>After that, if seekg fails by trying to seek to an invalid position in the file, you don't detect that.  Instead, you read from a stream that's in an error state, and that read will fail, and <code>hardware</code> is left holding garbage.  (When fixing this, don't check for EOF, check the failbit on the stream to detect error, or call good() on the stream to detect it's not in an error state.)</p>\n\n<p>Then you check if <code>hardware.id</code> is zero as indication that the record isn't present, but if it holds garbage, you cannot reliably extract any meaning from any of its members.</p>\n\n<p>I didn't look farther, so you may have other issues too, but these are important ones.</p>\n"}], "owner": {"reputation": 98, "user_id": 9258492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzthf.jpg?s=128&g=1", "display_name": "Vladyslav Oliinyk", "link": "https://stackoverflow.com/users/9258492/vladyslav-oliinyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 52968477, "answer_count": 1, "score": -1, "last_activity_date": 1540382408, "creation_date": 1540381016, "last_edit_date": 1540382261, "question_id": 52967998, "link": "https://stackoverflow.com/questions/52967998/read-from-file-with-direct-access-c", "title": "read from file with direct access c++", "body": "<p>Initial task: Create a program to add products and their characteristics. Features can be updated. The goods themselves can be deleted and display a list of all products. </p>\n\n<p>I have a struct with 4 parameters. I need to store (write) a new record in a file and then be able to read this record by number id and do certain actions on the record. Code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;iomanip&gt;\n#include &lt;stdlib.h&gt;\n\nusing namespace std;\n\n\nstruct hardwareData {\n    int id;\n    char name[50];\n    int quantity;\n    float price;\n};\n\nint enterChoice(void);\nvoid newRecord(fstream&amp;);\nvoid updateRecord(fstream&amp;);\nvoid outputRecord(fstream&amp;);\nvoid deleteRecord(fstream&amp;);\nvoid clearData(fstream&amp;);\nvoid outputLine(ostream&amp;, hardwareData);\n\nint main() {\n\n    fstream inOutHardware(\"hardware.dat\", ios::in | ios::out);\n\n    if (!inOutHardware)\n    {\n        cerr &lt;&lt; \"Error.\" &lt;&lt; endl;\n        exit(1);\n    }\n\nint current_choice;\ninOutHardware.clear();\nwhile (((current_choice = enterChoice()) != 0))\n{\n\n    switch (current_choice)\n    {\n    case 1:\n        newRecord(inOutHardware);\n        break;\n    case 2:\n        updateRecord(inOutHardware);\n        break;\n    case 3:\n        deleteRecord(inOutHardware);\n        break;\n    case 4:\n        outputRecord(inOutHardware);\n        break;\n    case 5:\n        int num;\n        cout &lt;&lt; \"Clear? (1 - \u0442\u0430\u043a / 0 - \u043di)\"         \n        &lt;&lt; endl &lt;&lt; \"Your choice - \";\n        cin &gt;&gt; num;\n        if (num == 1) {\n            clearData(inOutHardware);\n            cout &lt;&lt; \"succ!\" &lt;&lt; endl;\n        }\n        else {\n            cout &lt;&lt; \"canceled\" &lt;&lt; endl;\n        }\n\n        break;\n    default:\n        cerr &lt;&lt; \"err\" &lt;&lt; endl;\n        break;\n    }\n\n}\n\ninOutHardware.close();\nsystem(\"pause\");\nreturn 0;\n}\n\nvoid newRecord(fstream &amp;insertInFile)\n{\n    cout &lt;&lt; \"Input number (1-100): \";\n\n    hardwareData hardware;\n\n    int id;\n    cin &gt;&gt; id;\n    insertInFile.seekg((id - 1) + sizeof(hardware));\n\n    insertInFile.read((char *)&amp;hardware, sizeof(hardware));\n\n    if (hardware.id == 0)\n    {\n        cout &lt;&lt; \"Input data\" &lt;&lt; endl;\n        cin &gt;&gt; hardware.name &gt;&gt; hardware.quantity &gt;&gt; hardware.price;\n        hardware.id = id;\n        insertInFile.seekp((id - 1) * sizeof(hardwareData));\n        insertInFile.write((char *)&amp;hardware, sizeof(hardwareData));\n\n    }\n    else\n        cerr &lt;&lt; \"\u2116 \" &lt;&lt; id\n        &lt;&lt; \" already have info\" &lt;&lt; endl;\n}\n\nvoid updateRecord(fstream &amp;updateFile)\n{\n    int id;\n\n    do\n    {\n        cout &lt;&lt; \"Input number for update: \";\n        cin &gt;&gt; id;\n    } while (id &lt; 1 || id &gt; 100);\n\n    hardwareData hardware;\n    updateFile.seekg((id - 1) * sizeof(hardware));\n\n    updateFile.read((char *)&amp;hardware, sizeof(hardware));\n\n    if (hardware.id != 0)\n    {\n        outputLine(cout, hardware);\n        cout &lt;&lt; endl &lt;&lt; \"Input quan and price : \";\n\n        int quan;\n        float price;\n        cin &gt;&gt; quan;\n        cin &gt;&gt; price;\n        hardware.quantity = quan;\n        hardware.price = price;\n        outputLine(cout, hardware);\n\n        updateFile.seekp((id - 1) * sizeof(hardware));\n        updateFile.write((char *)&amp;hardware, sizeof(hardware));\n    }\n    else\n        cerr &lt;&lt; \" \u2116 \" &lt;&lt; id\n        &lt;&lt; \" empty \" &lt;&lt; endl;\n}\n\nvoid deleteRecord(fstream &amp;deleteFromFile)\n{\n    cout &lt;&lt; \"Input number for delete (1-100): \";\n\n    int id;\n    cin &gt;&gt; id;\n    deleteFromFile.seekg((id - 1) * sizeof(hardwareData));\n\n    hardwareData hardware;\n    deleteFromFile.read((char *)&amp;hardware, sizeof(hardwareData));\n\n    if (hardware.id != 0)\n    {\n        hardwareData blankhw = { 0, \" \", 0,  0 };\n\n        deleteFromFile.seekp((id - 1) * sizeof(hardware));\n        deleteFromFile.write((char*)&amp;blankhw, sizeof(hardware));\n        cout &lt;&lt; \"\u2116 \" &lt;&lt; id &lt;&lt; \" deleted\" &lt;&lt; endl;\n\n    }\n    else\n        cout &lt;&lt; \"\u2116 \" &lt;&lt; id &lt;&lt; \" empty\" &lt;&lt; endl;\n}\n\nvoid outputRecord(fstream &amp;printRecord)\n{\n\n    cout &lt;&lt; setiosflags(ios::left) &lt;&lt; setw(6) &lt;&lt; \"ID\"\n        &lt;&lt; setw(16) &lt;&lt; \"NAME\" &lt;&lt; setw(11) &lt;&lt; \"QUANTITY\"\n        &lt;&lt; setiosflags(ios::right) &lt;&lt; setw(10) &lt;&lt; \"PRICE\" &lt;&lt; endl;\n    printRecord.seekg(0);\n\n    hardwareData hardware;\n    printRecord.read((char*)&amp;hardware, sizeof(hardware));\n\n    while (!printRecord.eof())\n    {\n        if (hardware.id != 0)\n            outputLine(cout, hardware);\n\n        printRecord.read((char*)&amp;hardware, sizeof(hardware));\n    }\n}\n\nvoid clearData(fstream &amp;record) {\n    hardwareData blankHardware = { 0, \"\", 0, 0.0 };\n\n    record.seekp(0);\n    for (int i = 1; i &lt;= 100; i++)\n        record.write((char *)&amp;blankHardware, sizeof(blankHardware));\n}\n\n\nint enterChoice(void)\n\n{\n    cout &lt;&lt; \"\u0412\u0438\u0431\u0435\u0440i\u0442\u044c \u043e\u043f\u0446i\u044e\" &lt;&lt; endl\n    &lt;&lt; \" 1 - Add \" &lt;&lt; endl\n    &lt;&lt; \" 2 - update\" &lt;&lt; endl\n    &lt;&lt; \" 3 - delete\" &lt;&lt; endl\n    &lt;&lt; \" 4 - output\" &lt;&lt; endl\n    &lt;&lt; \" 5 - clear\" &lt;&lt; endl\n    &lt;&lt; \" 0 - exit\" &lt;&lt; endl;\n\n    int choice;\n    cin &gt;&gt; choice;\n\n    return choice;\n}\n\nvoid outputLine(ostream &amp;output, hardwareData c)\n{\n\n    output &lt;&lt; setiosflags(ios::left) &lt;&lt; setw(6) &lt;&lt; c.id\n    &lt;&lt; setw(16) &lt;&lt; c.name &lt;&lt; setw(11) &lt;&lt; c.quantity\n    &lt;&lt; setiosflags(ios::showpoint | ios::right)\n    &lt;&lt; setw(10) &lt;&lt; setprecision(2) &lt;&lt; c.price &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Error: When i click on the output of all data from the file for the first time, everything works as a nominal and the next time, unknown characters are displayed infinity times.\n<img src=\"https://i.stack.imgur.com/CWval.png\" alt=\"Infinity loop\"></p>\n"}, {"tags": ["c++", "path"], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 0, "last_activity_date": 1540393604, "creation_date": 1540393604, "answer_id": 52972348, "question_id": 52967891, "link": "https://stackoverflow.com/questions/52967891/using-a-variable-value-as-a-path-in-a-playsound/52972348#52972348", "title": "Using a variable value as a path in a PlaySound", "body": "<p><code>PlaySound()</code> is a preprocessor macro that maps to calling either <code>PlaySoundA()</code> or <code>PlaySoundW()</code> depending on whether your project is configured to map <code>TCHAR</code> to <code>char</code> or <code>wchar_t</code>.</p>\n\n<p>For what you are attempting, just get rid of your typecast and call <code>PlaySoundA()</code> directly:</p>\n\n<pre><code>std::string NameOP = ObjectOpe.getCurrentOperateur();\nstd::string Path = \"Data\\\\sounds\\\\Persos\\\\ATK\\\\\" + NameOP + \".wav\";\nPlaySoundA(Path.c_str(), NULL, SND_FILENAME);\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>PlaySoundA((\"Data\\\\sounds\\Persos\\\\ATK\\\\\" + NameOP + \".wav\").c_str(), NULL, SND_FILENAME)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10425684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff4671ba66df24ccd5cb8f57977878d6?s=128&d=identicon&r=PG&f=1", "display_name": "R3dp1ll", "link": "https://stackoverflow.com/users/10425684/r3dp1ll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 52972348, "answer_count": 1, "score": 0, "last_activity_date": 1540393604, "creation_date": 1540380708, "question_id": 52967891, "link": "https://stackoverflow.com/questions/52967891/using-a-variable-value-as-a-path-in-a-playsound", "title": "Using a variable value as a path in a PlaySound", "body": "<p>I know how to play a sound I chose: \n<code>PlaySound(TEXT(\"Data\\\\sounds\\\\Welcome.wav\"), NULL, SND_FILENAME);</code></p>\n\n<p>The problem is that this other sound, the path is not known because it depends on the result of a variable.</p>\n\n<p>I try to put this value as a path but I can't. Any ideas?</p>\n\n<p>My attempts :\n(Admits that ObjectOpe.getCurrentOperateur() returns a string)</p>\n\n<pre><code>std::string NameOP = ObjectOpe.getCurrentOperateur();\nstd::string Path = \"Data\\\\sounds\\\\Persos\\\\ATK\\\\\" + NameOP + \".wav\";\nconst char * LPCTSTRPath = Path.c_str();\nPlaySound((LPCTSTR)LPCTSTRPath, NULL, SND_FILENAME);\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>PlaySound(TEXT(\"Data\\\\sounds\\Persos\\\\ATK\\\\\" + NameOP + \".wav\"), NULL, SND_FILENAME)\n</code></pre>\n\n<p>Nothing works.</p>\n\n<p>Thanks to you;)</p>\n"}, {"tags": ["c++", "templates", "std-function"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540380780, "post_id": 52967805, "comment_id": 92842019, "body": "intuitively I would say that you cannot have two different functions with same name and same signature. On the other hand I dont know if the standard actually does reuire <code>wut&lt;true&gt;</code> and <code>wut&lt;false&gt;</code> to be two different functions (hence I deleted my answer)"}, {"owner": {"reputation": 6781, "user_id": 660982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/giQX8.png?s=128&g=1", "display_name": "jpihl", "link": "https://stackoverflow.com/users/660982/jpihl"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1540381249, "post_id": 52967805, "comment_id": 92842340, "body": "Locally I&#39;m using GCC 7.3.0. I just tried compiling with clang 6.0.0 and it works. So it seems I&#39;ve stumbled upon a GCC bug."}, {"owner": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1540381323, "post_id": 52967805, "comment_id": 92842378, "body": "Cannot reproduce with GCC 7.3.0 <a href=\"https://gcc.godbolt.org/z/dRSrUw\" rel=\"nofollow noreferrer\">gcc.godbolt.org/z/dRSrUw</a> Otherwise with newest builds of GCC, Clang and MSVC, it compiles fine."}, {"owner": {"reputation": 11697, "user_id": 114421, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/loFOW.jpg?s=128&g=1", "display_name": "Peter Ruderman", "link": "https://stackoverflow.com/users/114421/peter-ruderman"}, "edited": false, "score": 0, "creation_date": 1540381395, "post_id": 52967805, "comment_id": 92842428, "body": "I can&#39;t reproduce with GCC 6.3 either (which Ideone says it&#39;s using).  Very strange."}, {"owner": {"reputation": 6781, "user_id": 660982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/giQX8.png?s=128&g=1", "display_name": "jpihl", "link": "https://stackoverflow.com/users/660982/jpihl"}, "edited": false, "score": 0, "creation_date": 1540381420, "post_id": 52967805, "comment_id": 92842447, "body": "Hmm very interesting! The precise compiler version I&#39;m using is g++ (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0"}, {"owner": {"reputation": 1045, "user_id": 246759, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1097bed683b23f3a3deb631ea7557acd?s=128&d=identicon&r=PG", "display_name": "mortenvp", "link": "https://stackoverflow.com/users/246759/mortenvp"}, "edited": false, "score": 0, "creation_date": 1540382520, "post_id": 52967805, "comment_id": 92843153, "body": "I can reproduce with g++ (Ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 0, "creation_date": 1540386052, "post_id": 52967805, "comment_id": 92845599, "body": "As I pointed out in <a href=\"https://stackoverflow.com/a/52969201/1708801\">my answer</a> you can use Wandbox, which keeps up to date with compiler versions and this looks like it only effect gcc 7.3 and below."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 9215, "user_id": 5212827, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7e9f9b0d7e2d571c9f8886dd54bd50f9?s=128&d=identicon&r=PG&f=1", "display_name": "DeiDei", "link": "https://stackoverflow.com/users/5212827/deidei"}, "edited": false, "score": 0, "creation_date": 1540386234, "post_id": 52967805, "comment_id": 92845732, "body": "@DeiDei it is a linker issue, so godbolt won&#39;t show it, but as I noted in my answer this is a compiler bug."}], "answers": [{"comments": [{"owner": {"reputation": 6781, "user_id": 660982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/giQX8.png?s=128&g=1", "display_name": "jpihl", "link": "https://stackoverflow.com/users/660982/jpihl"}, "edited": false, "score": 1, "creation_date": 1540387311, "post_id": 52969201, "comment_id": 92846480, "body": "I was about to argue that these examples (g4, and g5) are different from mine. Then I tried modifying my example to be more like g5 and got the exact same error message: <a href=\"https://wandbox.org/permlink/VGuqQBUZMxyCiV4d\" rel=\"nofollow noreferrer\">wandbox.org/permlink/VGuqQBUZMxyCiV4d</a> I think we can close this case."}], "tags": [], "owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "is_accepted": true, "score": 2, "last_activity_date": 1540386366, "last_edit_date": 1540386366, "creation_date": 1540384686, "answer_id": 52969201, "question_id": 52967805, "link": "https://stackoverflow.com/questions/52967805/templated-function-with-defaulted-stdfunction-parameter-causes-symbol-al/52969201#52969201", "title": "Templated function with defaulted std::function parameter causes symbol [...] already defined", "body": "<p>This is a gcc bug (which looks fixed after version 7.3) we can see this by looking at section <a href=\"http://eel.is/c++draft/expr.prim.lambda.capture#9\" rel=\"nofollow noreferrer\">[expr.prim.lambda.capture]p9</a>:</p>\n\n<blockquote>\n  <p>A lambda-expression appearing in a default argument shall not\n  implicitly or explicitly capture any entity. [Example:</p>\n\n<pre><code>void f2() {\nint i = 1;\nvoid g1(int = ([i]{ return i; })()); // ill-formed\nvoid g2(int = ([i]{ return 0; })()); // ill-formed\nvoid g3(int = ([=]{ return i; })()); // ill-formed\nvoid g4(int = ([=]{ return 0; })()); // OK\nvoid g5(int = ([]{ return sizeof i; })()); // OK\n}\n</code></pre>\n  \n  <p>\u2014end example]</p>\n</blockquote>\n\n<p>As an alternative to IDEOne, you can use Wandbox which keeps up to date with gcc and clang versions, see <a href=\"https://wandbox.org/permlink/kLvUJqLWwLhF4R9K\" rel=\"nofollow noreferrer\">your example live there</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 0, "last_activity_date": 1540385701, "last_edit_date": 1540385701, "creation_date": 1540385243, "answer_id": 52969421, "question_id": 52967805, "link": "https://stackoverflow.com/questions/52967805/templated-function-with-defaulted-stdfunction-parameter-causes-symbol-al/52969421#52969421", "title": "Templated function with defaulted std::function parameter causes symbol [...] already defined", "body": "<p>Looks like a compiler bug.</p>\n\n<p>However using lambdas in header files is fraught with ODR issues.  So I'd avoid it.</p>\n\n<p>In <a href=\"/questions/tagged/c%2b%2b17\" class=\"post-tag\" title=\"show questions tagged &#39;c++17&#39;\" rel=\"tag\">c++17</a>:</p>\n\n<pre><code>template&lt;auto X&gt;\nstruct always_return {\n  template&lt;class...Args&gt;\n  auto operator()(Args&amp;&amp;...)const{ return X; }\n};\n\ntemplate&lt;bool B&gt;\nvoid wut(std::function&lt;bool()&gt; f = always_return&lt;false&gt;{})\n{\n</code></pre>\n\n<p>Or in <a href=\"/questions/tagged/c%2b%2b11\" class=\"post-tag\" title=\"show questions tagged &#39;c++11&#39;\" rel=\"tag\">c++11</a>:</p>\n\n<pre><code>template&lt;class T&gt;\nstruct always_return_t {\n  T t;\n  template&lt;class...Args&gt;\n  auto operator()(Args&amp;&amp;...)const{ return t; }\n};\ntemplate&lt;class T&gt;\nalways_return_t&lt;typename std::decay&lt;T&gt;::type&gt; always_return(T&amp;&amp;t) {\n  return {std::forward&lt;T&gt;(t)};\n}\ntemplate&lt;bool B&gt;\nvoid wut(std::function&lt;bool()&gt; f = always_return(false)){\n</code></pre>\n"}], "owner": {"reputation": 6781, "user_id": 660982, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/giQX8.png?s=128&g=1", "display_name": "jpihl", "link": "https://stackoverflow.com/users/660982/jpihl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 1, "accepted_answer_id": 52969201, "answer_count": 2, "score": 5, "last_activity_date": 1540386366, "creation_date": 1540380438, "last_edit_date": 1540385912, "question_id": 52967805, "link": "https://stackoverflow.com/questions/52967805/templated-function-with-defaulted-stdfunction-parameter-causes-symbol-al", "title": "Templated function with defaulted std::function parameter causes symbol [...] already defined", "body": "<p>I just ran into something somewhat odd.\nI wonder if it's a bug, and if not I hope someone can explain the issue.</p>\n\n<p>My issue is that when I create a templated function which takes an <code>std::function</code> as a defaulted parameter, I can only create one template instantiation of this function, otherwise I get an error.</p>\n\n<p>Consider the following code:</p>\n\n<pre><code>#include &lt;functional&gt;\n\ntemplate&lt;bool B&gt;\nvoid wut(std::function&lt;void()&gt; f = []() {})\n{\n    f();\n}\n\nint main() {\n    wut&lt;false&gt;(); // works\n    wut&lt;false&gt;(); // still works\n    wut&lt;true&gt;();  // error\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://ideone.com/VlVcUv\" rel=\"nofollow noreferrer\">https://ideone.com/VlVcUv</a></p>\n\n<p>When compiling this code I get the following error:</p>\n\n<pre><code>{standard input}: Assembler messages:\n{standard input}:28: Error: symbol `_ZNSt14_Function_base13_Base_managerIUlvE_E10_M_managerERSt9_Any_dataRKS3_St18_Manager_operation' is already defined\n{standard input}:127: Error: symbol `_ZNSt17_Function_handlerIFbvEUlvE_E9_M_invokeERKSt9_Any_data' is already defined\n</code></pre>\n"}, {"tags": ["c++", "c++11", "visual-c++", "std", "c++-standard-library"], "comments": [{"owner": {"reputation": 976, "user_id": 2548655, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/929PX.jpg?s=128&g=1", "display_name": "Michiel uit het Broek", "link": "https://stackoverflow.com/users/2548655/michiel-uit-het-broek"}, "edited": false, "score": 0, "creation_date": 1540382576, "post_id": 52967727, "comment_id": 92843199, "body": "For your class <code>C</code>, have a look at the first comment of this <a href=\"https://stackoverflow.com/questions/4986673/c11-rvalues-and-move-semantics-confusion-return-statement\">question</a>. Citation: &quot;Please do not return local variables by reference, <i>ever</i>. [..] \u2013 <a href=\"https://stackoverflow.com/users/252000/fredoverflow\">fredoverflow</a>&quot;"}, {"owner": {"reputation": 858, "user_id": 658540, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f95b1547184c055dfcf46416cf0d3fd?s=128&d=identicon&r=PG", "display_name": "EPLKleijntjens", "link": "https://stackoverflow.com/users/658540/eplkleijntjens"}, "reply_to_user": {"reputation": 976, "user_id": 2548655, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/929PX.jpg?s=128&g=1", "display_name": "Michiel uit het Broek", "link": "https://stackoverflow.com/users/2548655/michiel-uit-het-broek"}, "edited": false, "score": 0, "creation_date": 1540387137, "post_id": 52967727, "comment_id": 92846344, "body": "@Michiel: I was mainly just trying to get something to compile there and I thought a dangling reference might be a problem, hence my guess that the unexpected result was undefined behavior caused by exactly that. However, I also remember reading that the lifetime of a temporary object is extended to the lifetime of a const reference to it. I&#39;m not sure if that applies here or not, but if so, this might be valid code after all. Hence the question mark. ;)"}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 2210772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f70fff116e3ad7f906c050f7fbb6484?s=128&d=identicon&r=PG", "display_name": "Kozyr", "link": "https://stackoverflow.com/users/2210772/kozyr"}, "is_accepted": true, "score": 2, "last_activity_date": 1540449313, "creation_date": 1540449313, "answer_id": 52982798, "question_id": 52967727, "link": "https://stackoverflow.com/questions/52967727/how-to-call-the-seed-seq-constructor-of-a-random-generator-from-a-member-initial/52982798#52982798", "title": "How to call the seed_seq constructor of a random generator from a member initialization list?", "body": "<p>Just add <code>std::seed_seq</code> variable to the class before <code>std::mt19937_64</code> (variables initialization order is important):</p>\n\n<pre><code>class A\n{\nprivate:\n    std::seed_seq seed_seq;\n    std::mt19937_64 rng;\n\npublic:\n    A(std::string const&amp; seed)\n        : seed_seq(seed.begin(), seed.end())\n        , rng(seed_seq)\n    {}\n\n    std::uint32_t uniform()\n    {\n        return std::uniform_int_distribution&lt;std::uint32_t&gt;()(rng);\n    }\n};\n</code></pre>\n\n<p>Also I'd suggest to use <code>const&amp;</code> in the constructor to avoid <code>std::string</code> copy constructor execution.</p>\n"}], "owner": {"reputation": 858, "user_id": 658540, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8f95b1547184c055dfcf46416cf0d3fd?s=128&d=identicon&r=PG", "display_name": "EPLKleijntjens", "link": "https://stackoverflow.com/users/658540/eplkleijntjens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 52982798, "answer_count": 1, "score": 2, "last_activity_date": 1609471746, "creation_date": 1540380248, "last_edit_date": 1609471746, "question_id": 52967727, "link": "https://stackoverflow.com/questions/52967727/how-to-call-the-seed-seq-constructor-of-a-random-generator-from-a-member-initial", "title": "How to call the seed_seq constructor of a random generator from a member initialization list?", "body": "<p>I have a class with a <code>std::mersenne_twister_engine</code> member that I want to initialize with a <code>std::seed_seq</code> constructed from a string. Initially I tried this:</p>\n<pre><code>class A\n{\nprivate:\n    std::mt19937_64 rng;\npublic:\n    A(std::string seed) : rng(std::seed_seq(seed.begin(), seed.end())) { }\n};\n</code></pre>\n<p>But that doesn't compile, because:</p>\n<pre class=\"lang-none prettyprint-override\"><code>(...) cannot convert argument 1 from 'std::seed_seq' to '_Seed_seq &amp;'\n</code></pre>\n<p>I can get it to work like this:</p>\n<pre><code>class B\n{\nprivate:\n    std::mt19937_64 rng;\npublic:\n    B(std::string seed) {\n        std::seed_seq seedSeq(seed.begin(), seed.end());\n        rng = std::mt19937_64(seedSeq);\n    }\n};\n</code></pre>\n<p>But if I understand correctly, the member variable <code>rng</code> will now be constructed twice, so if possible, I'd like to avoid that. <strong>So, my main question is:</strong> Is it possible to make this work without initializing <code>rng</code> twice?</p>\n<p>Before anyone suggests, I've also tried using a separate member function to construct the <code>std::seed_seq</code> object, but the only way I can get it to compile is by returning a const ref like this:</p>\n<pre><code>class C\n{\nprivate:\n    std::mt19937_64 rng;\n    const std::seed_seq&amp; makeSeedSeq(std::string seed)\n    {\n        return std::seed_seq(seed.begin(), seed.end());\n    }\npublic:\n    C(std::string seed) : rng(makeSeedSeq(seed)) { }\n};\n</code></pre>\n<p>Class <code>C</code> does compile, but when testing with different strings, the results are always the same and always as if the seed was an empty string. I guess this is because <code>makeSeedSeq</code> returns a reference to a local and the result is undefined behavior? <strong>This is an aside</strong>, but if someone could explain this and perhaps why <code>std::seed_seq</code> was implemented this way, I would very much appreciate it.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "edited": false, "score": 5, "creation_date": 1540380046, "post_id": 52967612, "comment_id": 92841528, "body": "If it is functionally equivalent, what difference does it make?"}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1540380076, "post_id": 52967612, "comment_id": 92841553, "body": "You could put a serializing instruction between every normal instruction, why though?"}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 1, "creation_date": 1540380181, "post_id": 52967612, "comment_id": 92841624, "body": "Note that the granularity of instructions being executed out of order on a CPU seldom would match individual statements in a higher-level language like C++. Also note that the C++ compiler itself may rearrange statements or even expressions or parts of expressions."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1540380226, "post_id": 52967612, "comment_id": 92841657, "body": "There is no apparent reason why you&#39;d like to do such a thing."}, {"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 3, "creation_date": 1540380235, "post_id": 52967612, "comment_id": 92841662, "body": "As for your question, <b><i>why</i></b> do you want to do this? What is the <i>real</i> problem you need to solve? What is the use-case? This looks very much like an <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>."}, {"owner": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 1, "creation_date": 1540380320, "post_id": 52967612, "comment_id": 92841714, "body": "The question is why you would want to do this? Barring any bugs, the CPU are only allowed to reorder execution when the new order won&#39;t have any observable effect. The compiler will also reorder executions, and to a much larger degree than the type of out of order execution that a CPU does."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1540386904, "post_id": 52967612, "comment_id": 92846184, "body": "If there was a way to control the CPU&#39;s instruction scheduler, this is something that would be completely architecture-dependent (and probably processor-model-dependent), and certainly not within the scope of standard C++."}, {"owner": {"reputation": 436126, "user_id": 922184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h7WDB.jpg?s=128&g=1", "display_name": "Mysticial", "link": "https://stackoverflow.com/users/922184/mysticial"}, "reply_to_user": {"reputation": 54765, "user_id": 309412, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e9739ec5574d9977b522d1c80fb8de84?s=128&d=identicon&r=PG", "display_name": "Lie Ryan", "link": "https://stackoverflow.com/users/309412/lie-ryan"}, "edited": false, "score": 1, "creation_date": 1540394470, "post_id": 52967612, "comment_id": 92851628, "body": "@LieRyan There&#39;s always Spectre/Meltdown. :P:P:P"}, {"owner": {"reputation": 600, "user_id": 5725780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FKaUq.png?s=128&g=1", "display_name": "pipe", "link": "https://stackoverflow.com/users/5725780/pipe"}, "edited": false, "score": 0, "creation_date": 1579024102, "post_id": 52967612, "comment_id": 105626945, "body": "I think it&#39;s a shame that this question was tagged <code>c++</code> and thus closed as a dupe of a question that&#39;s only tangentially related. I came here to learn if modern CPUs have bits to disable this. Spectre/Meltdown is a good example on why one might want to disable fancy features like this in a security context, for debugging, or whatnot."}], "answers": [{"comments": [{"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1540386782, "post_id": 52967749, "comment_id": 92846099, "body": "Because Intel is the main CPU provider with out of order?"}, {"owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1540387516, "post_id": 52967749, "comment_id": 92846606, "body": "Because I only mentioned the main one, not all that use out of order ex&#233;cution."}], "tags": [], "owner": {"reputation": 19856, "user_id": 2266772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e03bd1fd9f2dbc750e0899b9e7e71d?s=128&d=identicon&r=PG", "display_name": "Matthieu Brucher", "link": "https://stackoverflow.com/users/2266772/matthieu-brucher"}, "is_accepted": true, "score": 4, "last_activity_date": 1540387547, "last_edit_date": 1540387547, "creation_date": 1540380306, "answer_id": 52967749, "question_id": 52967612, "link": "https://stackoverflow.com/questions/52967612/how-to-disable-out-of-order-execution-of-cpu/52967749#52967749", "title": "How to disable out of order execution of CPU", "body": "<p>No, you can't deactivate such hardware mechanism when it has it. That's what gives you performance. That's how the CPU is designed.</p>\n\n<p>What C++ guarantees is that you won't be able to see the difference between what you want with the proper order, and what you will get. And that's also something that vendors like Intel will make sure for the assembly.</p>\n\n<p>Have a look at <a href=\"https://www.youtube.com/watch?v=FJIn1YhPJJc&amp;frags=pl%2Cwn\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=FJIn1YhPJJc&amp;frags=pl%2Cwn</a> for the C++ execution model.</p>\n"}, {"comments": [{"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540380636, "post_id": 52967802, "comment_id": 92841932, "body": "No, the meaning of your program is not all you should care about. The actual execution may have disastrous consequences, such as Spectre and Meltdown."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540380781, "post_id": 52967802, "comment_id": 92842021, "body": "@EricPostpischil When writing C++ the meaning of your program is all you should care about. The consequences of Spectre and Meltdown are not the responsibility of a C++ program author, which is why those issues were fixed by kernel patches. Of course we can probably come up with some edge case exceptions but they are not the general rule and I can&#39;t imagine they apply here."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540381075, "post_id": 52967802, "comment_id": 92842227, "body": "The allegation that consequences of processors design flaws are not the \u201cresponsibility\u201d of a C++ author does not mean it is not perfectly reasonable for a C++ author to inquire about these things, to think about what the consequences might be, to learn about the isses and reason about how they affect their role, to think about mitigations they could provide even if it is not their \u201cresponsibility,\u201d to engage in discussions with processor designers, and to otherwise improve their professional knowledge and participation."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 2, "creation_date": 1540381244, "post_id": 52967802, "comment_id": 92842334, "body": "@EricPostpischil Certainly one should inquire and think and learn and reason as to what the <i>compiled</i> program is going to be doing and why. That&#39;s great. Just one should not write their original C++ code with the viewpoint that the computer is or should be under any obligation to execute their lines of source code one at a time exactly as written. Understanding <i>and accepting</i> that C++ is an abstraction and that all you&#39;re doing is specifying a program&#39;s <i>meaning</i> is of critical importance."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540381321, "post_id": 52967802, "comment_id": 92842377, "body": "@EricPostpischil Also I take exception with your use of the term &quot;allegation&quot;, which has a very negative/accusational connotation which is not at all warranted. Let&#39;s keep it professional."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540381649, "post_id": 52967802, "comment_id": 92842577, "body": "Allegation is correct. Telling people that some knowledge is inappropriate dissuades learning and is a bad thing. Promoting ignorance is harmful, both to the profession and to humanity in general."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540381975, "post_id": 52967802, "comment_id": 92842780, "body": "The opening statement of this answer is also unnecessary to address the question. Quite likely, the OP\u2019s question arises out of incomplete understanding of out of order execution due to compiler optimization and out of order execution due to processor design. But these issues can be explained without any assertion about what a human ought or ought not to care about. The behavior of the program, the compiler, and the processor are entirely separate from what a human \u201ccares\u201d about. A good answer could simply speak to the facts of the software and the computer."}, {"owner": {"reputation": 139300, "user_id": 298225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ef102f4ee36e58d09e0b27cd5393a1d8?s=128&d=identicon&r=PG", "display_name": "Eric Postpischil", "link": "https://stackoverflow.com/users/298225/eric-postpischil"}, "edited": false, "score": 0, "creation_date": 1540382056, "post_id": 52967802, "comment_id": 92842849, "body": "And a good answer could explain why these issues <b>usually</b> (but not always) do not matter to a C++ programmer without telling them whether or not they should care."}, {"owner": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "edited": false, "score": 0, "creation_date": 1540383054, "post_id": 52967802, "comment_id": 92843496, "body": "First sentence is misleading and somewhat redundant. C++ could definitely include specifications of side channel leaks, nothing impossible here. C++ was once a single-threaded language."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1540387319, "post_id": 52967802, "comment_id": 92846486, "body": "Will consider revisiting this conversation when the other party finds himself capable of communicating without using terms like &quot;ignorance&quot;."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 1, "last_activity_date": 1540380432, "creation_date": 1540380432, "answer_id": 52967802, "question_id": 52967612, "link": "https://stackoverflow.com/questions/52967612/how-to-disable-out-of-order-execution-of-cpu/52967802#52967802", "title": "How to disable out of order execution of CPU", "body": "<p>All you should care about is the meaning of your program. That's not being pedantic, it is the fundamental basis around which the entire language has been designed.</p>\n\n<p>A C++ program describes the meaning of a program. It is not a one-to-one mapping of source code to what a computer should literally do.</p>\n\n<p>If you want that, you will have to code in assembly or perhaps some old-fashioned language from the middle ages, but even then you are going to have a hard time telling a modern CPU not to do all the clever things that it is designed to do in order to support useful programs. Certainly I'm not aware of any out-of-the-box switch, flag or setting that makes this happen; it would go against the grain of the very architecture of a CPU.</p>\n\n<p>Ultimately you may be better off building and programming a Difference Engine ;)</p>\n"}, {"tags": [], "owner": {"reputation": 8430, "user_id": 3555525, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3ba5dbe6c89022c8af714c8d841f9547?s=128&d=identicon&r=PG&f=1", "display_name": "Rishikesh Raje", "link": "https://stackoverflow.com/users/3555525/rishikesh-raje"}, "is_accepted": false, "score": 1, "last_activity_date": 1540380512, "creation_date": 1540380512, "answer_id": 52967830, "question_id": 52967612, "link": "https://stackoverflow.com/questions/52967612/how-to-disable-out-of-order-execution-of-cpu/52967830#52967830", "title": "How to disable out of order execution of CPU", "body": "<p>You cannot deactivate the reordering at the hardware level (CPU level).</p>\n\n<p>However, you can ensure that the compiler will not reorder by using the optimization level of <code>debug</code>. </p>\n\n<p>This will help in debugging the program, but it will make your code slow. It is not recommended in production code. </p>\n"}, {"comments": [{"owner": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "edited": false, "score": 0, "creation_date": 1540382904, "post_id": 52968252, "comment_id": 92843391, "body": "Race conditions are related to out of order execution tangentially at most."}, {"owner": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1540386772, "post_id": 52968252, "comment_id": 92846090, "body": "The question was asking about reordering within a single thread, not about sequencing between threads."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1540387497, "post_id": 52968252, "comment_id": 92846593, "body": "Coincidentally <code>lfence</code> turns out to also be a commonly used serializing instruction on x86, but that&#39;s not what memory barriers were really meant for"}, {"owner": {"reputation": 931, "user_id": 1504868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b41efcdd54ba679e9e553cc9599844?s=128&d=identicon&r=PG", "display_name": "serge", "link": "https://stackoverflow.com/users/1504868/serge"}, "reply_to_user": {"reputation": 23378, "user_id": 4850040, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/acYd0.png?s=128&g=1", "display_name": "Toby Speight", "link": "https://stackoverflow.com/users/4850040/toby-speight"}, "edited": false, "score": 0, "creation_date": 1540387671, "post_id": 52968252, "comment_id": 92846715, "body": "@TobySpeight the question was answered in general manner including both single and multi-threaded programs. In the single-thread program there is no flaws. What&#39;s the problem?"}, {"owner": {"reputation": 931, "user_id": 1504868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b41efcdd54ba679e9e553cc9599844?s=128&d=identicon&r=PG", "display_name": "serge", "link": "https://stackoverflow.com/users/1504868/serge"}, "reply_to_user": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "edited": false, "score": 0, "creation_date": 1540388135, "post_id": 52968252, "comment_id": 92847040, "body": "@EuriPinhollow no, as you can see in Wiki example, there are no race conditions but processing re-order shows unexpected results in the first thread."}, {"owner": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "edited": false, "score": 0, "creation_date": 1540399158, "post_id": 52968252, "comment_id": 92854504, "body": "@serge the question never touched problems which arise out of speculative execution. Besides that, 1) if there was a way of disabling speculative execution it would fix something a magnitude of 0.001% of erroneous multi threaded programs which do not have synchronization because 1.1) you still have instruction reordering in most implementations of most languages 1.2) fixing order of execution does not make it possible to write correct programs  without using synchronization instructions in general case. 2) your post says nothing about data leakage which does not require multiple threads."}, {"owner": {"reputation": 931, "user_id": 1504868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b41efcdd54ba679e9e553cc9599844?s=128&d=identicon&r=PG", "display_name": "serge", "link": "https://stackoverflow.com/users/1504868/serge"}, "reply_to_user": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "edited": false, "score": 0, "creation_date": 1540406791, "post_id": 52968252, "comment_id": 92858500, "body": "@EuriPinhollow please do not flame or go offtopic. The <b>question is directly related to the memory barrier</b>. Source: <i>Memory barriers are necessary because most modern CPUs employ performance optimizations that can result in out-of-order execution</i>"}, {"owner": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "edited": false, "score": 0, "creation_date": 1540453503, "post_id": 52968252, "comment_id": 92873583, "body": "@serge out of order execution is only one of the reasons for necessity of memory barriers and visibility of memory effects is only one of the aspects of out of order execution."}, {"owner": {"reputation": 931, "user_id": 1504868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b41efcdd54ba679e9e553cc9599844?s=128&d=identicon&r=PG", "display_name": "serge", "link": "https://stackoverflow.com/users/1504868/serge"}, "reply_to_user": {"reputation": 322, "user_id": 6049796, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/84a091eb4e10af942d3de4432607a319?s=128&d=identicon&r=PG&f=1", "display_name": "Euri Pinhollow", "link": "https://stackoverflow.com/users/6049796/euri-pinhollow"}, "edited": false, "score": 0, "creation_date": 1540459985, "post_id": 52968252, "comment_id": 92877356, "body": "@EuriPinhollow so the memory barrier is one of solutions. Thank you to confirm my answer."}], "tags": [], "owner": {"reputation": 931, "user_id": 1504868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b41efcdd54ba679e9e553cc9599844?s=128&d=identicon&r=PG", "display_name": "serge", "link": "https://stackoverflow.com/users/1504868/serge"}, "is_accepted": false, "score": -2, "last_activity_date": 1540381761, "creation_date": 1540381761, "answer_id": 52968252, "question_id": 52967612, "link": "https://stackoverflow.com/questions/52967612/how-to-disable-out-of-order-execution-of-cpu/52968252#52968252", "title": "How to disable out of order execution of CPU", "body": "<p>It's not possible to disable out-of-order execution from the program, this is the well-known problem of <a href=\"https://en.wikipedia.org/wiki/Memory_barrier\" rel=\"nofollow noreferrer\">Memory Barrier</a>. As the problem consequences appear in multi-threading programs only, you have to use synchronization primitives to ensure the execution order.</p>\n"}], "owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 472, "favorite_count": 0, "closed_date": 1540430072, "accepted_answer_id": 52967749, "answer_count": 4, "score": 1, "last_activity_date": 1579058740, "creation_date": 1540379918, "last_edit_date": 1579058740, "question_id": 52967612, "link": "https://stackoverflow.com/questions/52967612/how-to-disable-out-of-order-execution-of-cpu", "closed_reason": "Duplicate", "title": "How to disable out of order execution of CPU", "body": "<p>As we know, modern CPU is able to execute multi commands concurrently: <a href=\"https://en.wikipedia.org/wiki/Out-of-order_execution\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Out-of-order_execution</a></p>\n\n<p>As a result, we may get such a fact as below:</p>\n\n<p>When we execute the c++ code: <code>x = a + b; y = c + d;</code>, <code>y = c + d;</code> may be executed before <code>x = a + b;</code>.</p>\n\n<p>My question is if it is possible to disable the out-of-order execution of CPU?</p>\n"}, {"tags": ["c++", "css", "visual-studio", "qt", "stylesheet"], "comments": [{"owner": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 1, "creation_date": 1540385805, "post_id": 52967589, "comment_id": 92845402, "body": "You should add a selector to your stylesheet: (<a href=\"https://www.qtcentre.org/threads/14099-How-to-stop-child-widgets-from-inheriting-parent-s-StyleSheet-and-use-system-default\" rel=\"nofollow noreferrer\">qtcentre.org/threads/&hellip;</a>)"}, {"owner": {"reputation": 111, "user_id": 8351244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d089d9f2a6ba7544bffe5345e0a33f87?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hu", "link": "https://stackoverflow.com/users/8351244/m-hu"}, "reply_to_user": {"reputation": 2669, "user_id": 1228771, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SF8S5.png?s=128&g=1", "display_name": "Amfasis", "link": "https://stackoverflow.com/users/1228771/amfasis"}, "edited": false, "score": 0, "creation_date": 1540392156, "post_id": 52967589, "comment_id": 92849994, "body": "tank you. I did like this <code>ui.centralWidget-&gt;setStyleSheet(&quot;QWidget#centralWidget {&quot;same at code&quot;});</code> and problem solved."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 9640835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7880ac222283181c8ba8b19c9567ce05?s=128&d=identicon&r=PG&f=1", "display_name": "JMaFv", "link": "https://stackoverflow.com/users/9640835/jmafv"}, "is_accepted": false, "score": 0, "last_activity_date": 1618491902, "creation_date": 1618491902, "answer_id": 67109034, "question_id": 52967589, "link": "https://stackoverflow.com/questions/52967589/how-to-reset-childs-style-sheet-to-qt-default-style-sheet-when-the-childs-par/67109034#67109034", "title": "How to reset child&#39;s style sheet to Qt default style sheet when the &quot;child&#39;s parent&#39;s style sheet&quot; is changed?", "body": "<p>I encountered a similar problem and <em>child</em> or <em>ID selector</em> did the trick for me.</p>\n<p>For instance, if you want to style <code>btn_Ok</code> which is a <code>QPushButton</code> you can give it a name</p>\n<p><code>btn_Ok-&gt;setObjectName(&quot;xxx&quot;);</code></p>\n<p>and use this name to style it via</p>\n<p><code>ui.centralWidget-&gt;setStyleSheet(&quot;QPushButton#xxx{background: red;}&quot;);</code></p>\n<p>This way the <strong>only</strong> push button that will be styled is <code>btn_Ok</code>.</p>\n<p>If you want to style <strong>all</strong> the push buttons that are direct descendants from you central widget you can use</p>\n<p><code>ui.centralWidget-&gt;setStyleSheet(&quot;QWidget#centralWidget &gt; QPushButton{background: red;}&quot;);</code></p>\n"}], "owner": {"reputation": 111, "user_id": 8351244, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d089d9f2a6ba7544bffe5345e0a33f87?s=128&d=identicon&r=PG&f=1", "display_name": "M.Hu", "link": "https://stackoverflow.com/users/8351244/m-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1618491902, "creation_date": 1540379855, "question_id": 52967589, "link": "https://stackoverflow.com/questions/52967589/how-to-reset-childs-style-sheet-to-qt-default-style-sheet-when-the-childs-par", "title": "How to reset child&#39;s style sheet to Qt default style sheet when the &quot;child&#39;s parent&#39;s style sheet&quot; is changed?", "body": "<p>When I change the style sheet of an object, the style sheet of it's child also changes.\nhow can I reset child's style sheet to Qt default style?\nfor test of this I use the below code:</p>\n\n<p>in header file:</p>\n\n<pre><code>#include \"ui_QtGuiApplication.h\"\n#include &lt;QGraphicsView&gt;\n#include &lt;QtWidgets/QPushButton&gt;\n\nclass QtGuiApplication : public QMainWindow\n{\n    Q_OBJECT\n\npublic:\n    QtGuiApplication(QWidget *parent = Q_NULLPTR);\n\n\nprivate:\n    Ui::QtGuiApplicationClass ui;\n    QGraphicsView* qGraph;\n    QGraphicsScene* scene;\n\n};\n</code></pre>\n\n<p>in source file:</p>\n\n<pre><code>#include \"QtGuiApplication.h\"\n\nQtGuiApplication::QtGuiApplication(QWidget *parent)\n    : QMainWindow(parent)\n{\n    ui.setupUi(this);\n\n    // Change centralWidget stylesheet      \n    ui.centralWidget-&gt;setStyleSheet(\n        \"background:qlineargradient(x1 : 0, y1 : 0, x2 : 0, y2 : 1,\\\n        stop : 0  rgb(216, 0, 0), stop : 0.4 rgb(155, 0, 0),\\\n        stop : 0.4 rgb(155, 0, 0), stop : 1.0 rgb(216, 0, 0));\");\n\n\n    // creat a QGraphicsView an add it to centralWidget\n    qGraph = new QGraphicsView(ui.centralWidget);\n    qGraph-&gt;setGeometry(QRect(70, 30, 300, 300));\n    scene = new QGraphicsScene(qGraph);\n    scene-&gt;setSceneRect(0, 0, 300, 300);\n    qGraph-&gt;setScene(scene);\n    qGraph-&gt;show();\n\n    // creat a push button and add it in to centralWidget\n    QPushButton* btn_Ok = new QPushButton(ui.centralWidget);\n    btn_Ok-&gt;setGeometry(QRect(340, 340, 75, 23));\n    btn_Ok-&gt;setText(\"Ok\");\n    //below code doesn't work \n    btn_Ok-&gt;setStyleSheet(\"\");\n    btn_Ok-&gt;setStyleSheet(styleSheet());\n\n}\n</code></pre>\n"}, {"tags": ["c++", "c", "arrays", "pointers"], "comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1540380928, "post_id": 52967427, "comment_id": 92842114, "body": "<code>int a[][3]</code> is not standard C.  What compiler are you using?"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1540384474, "post_id": 52967427, "comment_id": 92844415, "body": "@chux -- looks okay to me; just as in <code>int x[] = { 1, 2, 3 };</code>, where the compiler infers the unspecified dimension from the initializer. <code>int a[][3]</code> is more-or-less the same thing. A long-winded version would look like this: <code>typedef int x[3]; x a[] = { 1, 2, 3, 4, 5, 6 };</code>. I&#39;m not saying this is a good thing to do, just that it&#39;s legal."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "reply_to_user": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "edited": false, "score": 0, "creation_date": 1540384706, "post_id": 52967427, "comment_id": 92844583, "body": "@pete fair enough - I do get warning &quot;warning: missing braces around initializer [-Wmissing-braces]&quot;.  Same for <a href=\"https://stackoverflow.com/questions/52967427/why-is-the-ptr-in-printf?noredirect=1#comment92844415_52967427\">your suggestion</a>.  Expect something like <code>int a[][3] = {{1, 2, 3}};</code>"}, {"owner": {"reputation": 68702, "user_id": 1593860, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1361e47a8bf06d20ffda9a686ceb7e68?s=128&d=identicon&r=PG", "display_name": "Pete Becker", "link": "https://stackoverflow.com/users/1593860/pete-becker"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 3, "creation_date": 1540384894, "post_id": 52967427, "comment_id": 92844708, "body": "@chux -- yup; the rules say that you don&#39;t need the curly braces, but leaving them out makes it much harder to understand what the initializer means. A fully-braced initializer for this example would be <code>{ { 1, 2, 3 }, { 4, 5, 6 } }</code>, since each element of <code>a</code> is an array of 3 ints. This makes it clearer that there are 2 of those elements."}], "answers": [{"comments": [{"owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540413797, "post_id": 52967472, "comment_id": 92861742, "body": "&quot;<code>ptr</code> is a pointer to that array of arrays.&quot; No. <code>ptr</code> is a pointer to an array"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540460029, "post_id": 52967472, "comment_id": 92877379, "body": "@newacct Right, and that&#39;s exactly what I said."}, {"owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540485501, "post_id": 52967472, "comment_id": 92893409, "body": "You said &quot;<code>ptr</code> is a pointer to that array of arrays&quot;, which sounds like <code>ptr</code> is a pointer to an array of arrays, which is not the right type. <code>ptr</code> is a pointer to an array of <code>int</code>s."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540487965, "post_id": 52967472, "comment_id": 92894647, "body": "@newacct <code>ptr</code> is a pointer to one or more arrays of <code>int</code>s, just like how <code>int*</code> is a pointer to one or more <code>int</code>s. Admittedly this is only one way to spin it due to how weird pointers are. You&#39;re talking about the literal interpretation of the type, whereas I&#39;m talking about semantics. I&#39;d say neither is wrong."}, {"owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540499945, "post_id": 52967472, "comment_id": 92900259, "body": "<code>ptr</code> only points to one array of <code>int</code>. If you know that that array is an element of an array of arrays, then you can use pointer arithmetic to get a pointer to the next element (or previous element, if it&#39;s not the first). But that doesn&#39;t change the fact that <code>ptr</code> only still points to one array of <code>int</code>. The thing it points to may or may not be an element of an array, and it doesn&#39;t know that. Using sloppy language confuses learners; <code>int *</code> is not a &quot;pointer to array of <code>int</code>s&quot;, because that is, say <code>int (*)[42]</code>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 0, "creation_date": 1540545541, "post_id": 52967472, "comment_id": 92914703, "body": "@newacct I added in a parenthetical so both interpretations are covered, but I maintain that either interpretation is valid depending on what level of abstraction you&#39;re employing in conversation."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 5, "last_activity_date": 1540545511, "last_edit_date": 1540545511, "creation_date": 1540379440, "answer_id": 52967472, "question_id": 52967427, "link": "https://stackoverflow.com/questions/52967427/why-is-the-ptr-in-printf/52967472#52967472", "title": "Why is the *ptr in printf?", "body": "<p>No.</p>\n\n<ul>\n<li><p><code>a</code> is an array of arrays.</p></li>\n<li><p><code>ptr</code> is a pointer to [the first element of] that array of arrays.</p></li>\n<li><p><code>*ptr</code> is the first element of that array (which is itself an array!).</p>\n\n<ul>\n<li>This can also be written <code>ptr[0]</code> (because <code>*(a+n)</code> is <code>a[n]</code>).</li>\n</ul></li>\n<li><p><code>(*ptr)[1]</code> is the first element in that result.</p>\n\n<ul>\n<li><p>This can also be written <code>ptr[0][1]</code>.</p></li>\n<li><p>It would be more clearly written as <code>a[0][1]</code>.</p></li>\n</ul></li>\n</ul>\n\n<p>Your proposed counter-example of <code>ptr[1]</code> is the <em>next</em> element in the result, still an array.</p>\n\n<p>That declaration is dodgy too; the initializer is technically valid but doesn't do what you think, as it only <em>appears</em> to list a single dimension.</p>\n\n<p>Overall it's not great code.</p>\n"}], "owner": {"reputation": 25, "user_id": 10536094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4125d9abbdf4f14a7511534dbc857608?s=128&d=identicon&r=PG&f=1", "display_name": "xehob", "link": "https://stackoverflow.com/users/10536094/xehob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1540545511, "creation_date": 1540379262, "last_edit_date": 1540393950, "question_id": 52967427, "link": "https://stackoverflow.com/questions/52967427/why-is-the-ptr-in-printf", "title": "Why is the *ptr in printf?", "body": "<p>In the below code, should the <code>(*ptr)[1]</code> not be <code>(ptr)[1]</code> instead? As <code>ptr</code> is also a pointer as <code>a</code> is in <code>a[][]</code>.</p>\n\n<pre><code>int a[][3] = {1, 2, 3, 4, 5, 6};\nint (*ptr)[3] = a;\nprintf(\"%d\", (*ptr)[1]);\n</code></pre>\n"}, {"tags": ["c++", "function", "pointers", "void-pointers"], "comments": [{"owner": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 2, "creation_date": 1540379917, "post_id": 52967350, "comment_id": 92841438, "body": "Did you test it? What does your compiler say?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 1, "creation_date": 1540380087, "post_id": 52967350, "comment_id": 92841558, "body": "<code>void(*function)(int) = (&amp;testClass::testFunction);</code> should not compile."}, {"owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "reply_to_user": {"reputation": 874, "user_id": 3352222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m6lYp.jpg?s=128&g=1", "display_name": "ravnsgaard", "link": "https://stackoverflow.com/users/3352222/ravnsgaard"}, "edited": false, "score": 0, "creation_date": 1540380196, "post_id": 52967350, "comment_id": 92841634, "body": "@ravnsgaard Test what -how can I even call a member function pointer with a specific object with a normal function pointer? I tried with std::bind, which obviously works with instance* pointer but not with void* pointer."}, {"owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "reply_to_user": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1540380294, "post_id": 52967350, "comment_id": 92841688, "body": "@MaximEgorushkin I just tested it and you&#39;re right -but I was told there was a way to take a member function pointer as a simple function pointer, is this not possible?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "edited": false, "score": 0, "creation_date": 1540380676, "post_id": 52967350, "comment_id": 92841957, "body": "@ZeroZ30o Added an example for you."}, {"owner": {"reputation": 823, "user_id": 6699414, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7e32082597c5678a976d298d91eba29e?s=128&d=identicon&r=PG&f=1", "display_name": "PhoenixBlue", "link": "https://stackoverflow.com/users/6699414/phoenixblue"}, "edited": false, "score": 0, "creation_date": 1540381106, "post_id": 52967350, "comment_id": 92842245, "body": "When I read the title I immediately tough of static members... But now I m confused"}, {"owner": {"reputation": 26077, "user_id": 8157187, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9dbf5a2e56640eeb14bbe0c32fb3679b?s=128&d=identicon&r=PG&f=1", "display_name": "geza", "link": "https://stackoverflow.com/users/8157187/geza"}, "edited": false, "score": 0, "creation_date": 1540381638, "post_id": 52967350, "comment_id": 92842573, "body": "Check out this, it may help: <a href=\"https://www.codeproject.com/articles/11015/the-impossibly-fast-c-delegates\" rel=\"nofollow noreferrer\">codeproject.com/articles/11015/the-impossibly-fast-c-delegat&zwnj;&#8203;es</a>."}], "answers": [{"comments": [{"owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "edited": false, "score": 0, "creation_date": 1540380488, "post_id": 52967687, "comment_id": 92841825, "body": "Well, my aim is to make a class similar to std::function that can contain either a normal function pointer OR a class member function pointer + an associated pointer to object. Additionally I would like if this class is able fit in a vector by value (no templates or inheritance). I can achieve the first, but I&#39;m having trouble with the second. Since the pointer to object would be stored in raw memory, its type would be lost."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "edited": false, "score": 0, "creation_date": 1540380594, "post_id": 52967687, "comment_id": 92841902, "body": "@ZeroZ30o I think I remember that std::function uses RTTI (virtual calls!) to achieve that. Probably some base class and then derived class templates that keep the type information for you. It&#39;s not trivial though"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": 4, "last_activity_date": 1540380113, "creation_date": 1540380113, "answer_id": 52967687, "question_id": 52967350, "link": "https://stackoverflow.com/questions/52967350/is-it-possible-to-call-a-member-function-with-its-pointer-and-a-void-object-poin/52967687#52967687", "title": "Is it possible to call a member function with its pointer and a void object pointer?", "body": "<p>No; you have two problems:</p>\n\n<ol>\n<li><p>The pointer-to-member-function has the wrong type and won't bind to the <code>(&amp;testClass::testFunction)</code>.</p></li>\n<li><p>The object pointer has had its type erased. You can cast it from <code>void*</code> back to <code>testClass*</code> if you know that's what it is, but then you would never have needed it to be <code>void*</code>, right?</p></li>\n</ol>\n\n<p>Overall a combination of magic like lambdas and <code>std::function</code> would be far superior.</p>\n\n<p>Here's some magic:</p>\n\n<pre><code>int main()\n{\n    testClass instance(3);\n\n    std::function&lt;void(void*, int)&gt; f = [](void* instancePtr, int _num) {\n        static_cast&lt;testClass*&gt;(instancePtr)-&gt;testFunction(_num);\n    };\n\n    void* instancePtr = &amp;instance;\n    f(instancePtr, 42);\n}\n</code></pre>\n\n<p>Your options really depend on what you're trying to do, though.</p>\n"}, {"comments": [{"owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "edited": false, "score": 0, "creation_date": 1540380824, "post_id": 52967866, "comment_id": 92842047, "body": "The question is about resolving the original type without any prior knowledge of the class type."}, {"owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "reply_to_user": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "edited": false, "score": 0, "creation_date": 1540381064, "post_id": 52967866, "comment_id": 92842220, "body": "Can this lambda be stored in raw memory? And if so, is its size (with the same parameters and no capture) the same? @DanielTrugman knowledge of the class type is known during initialization, so if it is managed to be stored thanks to a pointer, it fits the use perfectly."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "edited": false, "score": 0, "creation_date": 1540381151, "post_id": 52967866, "comment_id": 92842273, "body": "@ZeroZ30o A lambda object with no capture can be converted to a plain function pointer. See <code>ClosureType::operator ret(*)(params)()</code> in <a href=\"https://en.cppreference.com/w/cpp/language/lambda\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/lambda</a>"}, {"owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "edited": false, "score": 1, "creation_date": 1540382003, "post_id": 52967866, "comment_id": 92842805, "body": "Thank you! Works flawlessly -it would be even better if there was an automated way to generate the lambda (only the using the &quot;function&quot; class&#39; constructor with a testClass* and testFunction e.g.: function(&amp;instance, testFunction)), but it works very well as-is if a little tedious."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "edited": false, "score": 1, "creation_date": 1540382322, "post_id": 52967866, "comment_id": 92843030, "body": "@ZeroZ30o <code>template&lt;typename T, typename R, typename ... Args&gt; R(*)(void*, Args...) type_erase(R(T::*member)(Args...)) { return [](void * p, Args ... args){ return (*static_cast&lt;T *&gt;(p).*member)(std::forward&lt;Args&gt;(args)...); }; }</code>"}, {"owner": {"reputation": 6050, "user_id": 1030410, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e13caf6116a45714153bd145754fd292?s=128&d=identicon&r=PG", "display_name": "Daniel Trugman", "link": "https://stackoverflow.com/users/1030410/daniel-trugman"}, "edited": false, "score": 0, "creation_date": 1540382437, "post_id": 52967866, "comment_id": 92843100, "body": "@MaximEgorushkin, well, I see that it did solve his specific edge-case, which is good enough for me. GJ"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540382469, "post_id": 52967866, "comment_id": 92843118, "body": "@Caleth You do not capture <code>member</code>."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540382610, "post_id": 52967866, "comment_id": 92843217, "body": "Good point. You have to do some contortions to get back <code>T</code>, <code>R</code> and <code>Args...</code> if you pass <code>member</code> as a template parameter, but it&#39;s possible"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540383045, "post_id": 52967866, "comment_id": 92843488, "body": "@MaximEgorushkin ? <code>R(*)(void*, Args...)</code> is a pointer to function, and <code>R(T::*)(Args...)</code> is a pointer to a member function of <code>T</code>."}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540383222, "post_id": 52967866, "comment_id": 92843592, "body": "@Caleth Consider syntax of a function that returns a function pointer."}, {"owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540383296, "post_id": 52967866, "comment_id": 92843633, "body": "@Caleth I&#39;ve attempted a simpler version with Args necesarily being 1 parameter for now, but it won&#39;t recognise <code>tReturn(*)(void*, tParams)</code> as a return type: <a href=\"https://i.imgur.com/xZtk5NH.png\" rel=\"nofollow noreferrer\">i.imgur.com/xZtk5NH.png</a>"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "edited": false, "score": 0, "creation_date": 1540384156, "post_id": 52967866, "comment_id": 92844222, "body": "@ZeroZ30o <a href=\"http://coliru.stacked-crooked.com/a/ed4c227423b1e01b\" rel=\"nofollow noreferrer\">Some contortions ensued</a>"}, {"owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540384261, "post_id": 52967866, "comment_id": 92844279, "body": "@Caleth woah, that seems overly complicated -why won&#39;t it simply accept <code>tReturn(*)(void*, tParams)</code> as a return parameter in the first place?"}, {"owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540384317, "post_id": 52967866, "comment_id": 92844307, "body": "@Caleth Yep, C++17 <code>auto</code> template arg solves this nicely."}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "edited": false, "score": 0, "creation_date": 1540384344, "post_id": 52967866, "comment_id": 92844332, "body": "@ZeroZ30o it&#39;s ambiguous with the rest of the function declaration. Moving it out to an alias makes the grammar happy"}, {"owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540419710, "post_id": 52967866, "comment_id": 92863820, "body": "@Caleth I realised I&#39;m running into an issue: the <code>auto member</code> in your code is provided in a class&#39; constructor in my case. And class constructors, for some idiotic reason, cannot have their specific template called with <code>&lt;&gt;</code>. Do you have any idea on how to fix this? And yes, I do realize it would be a workaround for a workaround :P"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "edited": false, "score": 0, "creation_date": 1540422892, "post_id": 52967866, "comment_id": 92864756, "body": "@ZeroZ30o you&#39;d do it in a <code>make_</code> function template"}, {"owner": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "reply_to_user": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "edited": false, "score": 0, "creation_date": 1540424113, "post_id": 52967866, "comment_id": 92865091, "body": "@ZeroZ30o it&#39;s not <a href=\"http://coliru.stacked-crooked.com/a/401f83c400acff9a\" rel=\"nofollow noreferrer\">much different</a> to <code>type_erase</code>"}, {"owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "reply_to_user": {"reputation": 34388, "user_id": 2610810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c6433073e71478e8da278a188e1d15?s=128&d=identicon&r=PG", "display_name": "Caleth", "link": "https://stackoverflow.com/users/2610810/caleth"}, "edited": false, "score": 0, "creation_date": 1540465172, "post_id": 52967866, "comment_id": 92880454, "body": "@Caleth yeah I finally gave up trying to get the constructor to work, it&#39;s impossible; but I got everything working now -thanks for the help!"}], "tags": [], "owner": {"reputation": 119228, "user_id": 412080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/239e18525e4c29872d85b2b553b2e4d2?s=128&d=identicon&r=PG", "display_name": "Maxim Egorushkin", "link": "https://stackoverflow.com/users/412080/maxim-egorushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1540381633, "last_edit_date": 1540381633, "creation_date": 1540380621, "answer_id": 52967866, "question_id": 52967350, "link": "https://stackoverflow.com/questions/52967350/is-it-possible-to-call-a-member-function-with-its-pointer-and-a-void-object-poin/52967866#52967866", "title": "Is it possible to call a member function with its pointer and a void object pointer?", "body": "<p>You need to change the pointer type to <code>void(*function)(void*, int)</code> so that it can accept the pointer to the object and the argument. Example:</p>\n\n<pre><code>int main() {\n    testClass instance(3);\n    void(*function)(void*, int) = [](void* p, int a) { static_cast&lt;testClass*&gt;(p)-&gt;testFunction(a); };\n    void* instancePtr = &amp;instance;\n    function(instancePtr, 3);\n}\n</code></pre>\n"}], "owner": {"reputation": 136, "user_id": 5965966, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6f8f66f8f1629ba4730e0d63f9a6687?s=128&d=identicon&r=PG", "display_name": "ZeroZ30o", "link": "https://stackoverflow.com/users/5965966/zeroz30o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 52967866, "answer_count": 2, "score": -1, "last_activity_date": 1540390598, "creation_date": 1540379008, "last_edit_date": 1540390598, "question_id": 52967350, "link": "https://stackoverflow.com/questions/52967350/is-it-possible-to-call-a-member-function-with-its-pointer-and-a-void-object-poin", "title": "Is it possible to call a member function with its pointer and a void object pointer?", "body": "<p>Is it possible to call a member function with a specific object instance when only owning a <code>void*</code> pointer to the specific instance and a <code>returnType(*function)(parameters)</code> function pointer?</p>\n\n<pre><code>#include &lt;iostream&gt;\nclass testClass\n{\n    public:\n    int classNum;\n    testClass(int _num) : classNum(_num) {}\n    void testFunction(int _num) { std::cout &lt;&lt; _num + classNum &lt;&lt; \"\\n\"; }\n};\n\nint main()\n{\n    testClass instance(3);\n\n    void(*function)(int) = (&amp;testClass::testFunction); // edit: this is wrong, but \"&amp;test::testFunction\" is the information provided nonetheless\n    void* instancePtr = (void*)&amp;instance;\n\n    // can we call \"testFunction(3)\" on \"instance\" with only \"function\" and \"instancePtr\"?\n}\n</code></pre>\n"}, {"tags": ["python", "c++", "memory-leaks", "garbage-collection", "ctypes"], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 1972728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f6a7be68309c4a0010f700710e56d9?s=128&d=identicon&r=PG", "display_name": "ygramoel", "link": "https://stackoverflow.com/users/1972728/ygramoel"}, "edited": false, "score": 0, "creation_date": 1540452649, "post_id": 52977493, "comment_id": 92873095, "body": "This is exactly the answer I was looking for,  and even more about PyDLL and decorators;  thank you.  Is there any public documentation on how ctypes.py_object handles reference counts?  For example,  it is not obvious to me that passing a Python object as parameter to a callback increments the reference count permanently; I would expect that returning from the callback decreases the reference count again."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 541, "user_id": 1972728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f6a7be68309c4a0010f700710e56d9?s=128&d=identicon&r=PG", "display_name": "ygramoel", "link": "https://stackoverflow.com/users/1972728/ygramoel"}, "edited": false, "score": 0, "creation_date": 1540469578, "post_id": 52977493, "comment_id": 92883021, "body": "@ygramoel <code>lib.test()</code> created an object (ref1) and <code>noop</code> was passed the object (ref2...the parameter name refers to it). <code>noop</code> returned the ref to the caller. The caller is responsible to decref the object when it is done with it.  <code>noop</code> was called from C by <code>lib.test</code>, so <code>lib.test</code> had to decrement it.  <code>lib.test</code> returned the object it created back to Python.  The Python code didn&#39;t assign it to a variable, so Python decremented the reference count.  If the Python code assigned it to a variable, it would have maintained the reference count and <code>Foo</code> wouldn&#39;t have been garbage collected."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 541, "user_id": 1972728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f6a7be68309c4a0010f700710e56d9?s=128&d=identicon&r=PG", "display_name": "ygramoel", "link": "https://stackoverflow.com/users/1972728/ygramoel"}, "edited": false, "score": 0, "creation_date": 1540470722, "post_id": 52977493, "comment_id": 92883822, "body": "@ygramoel <a href=\"https://docs.python.org/3/c-api/intro.html#objects-types-and-reference-counts\" rel=\"nofollow noreferrer\">Objects, Types and Reference Counts</a>."}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 1, "last_activity_date": 1540413037, "creation_date": 1540413037, "answer_id": 52977493, "question_id": 52967133, "link": "https://stackoverflow.com/questions/52967133/python3-ctypes-callback-causes-memory-leak-in-simple-example/52977493#52977493", "title": "Python3 + ctypes callback causes memory leak in simple example", "body": "<p>You're passing around Python objects.  One of your objects is passed into your C code, and not passed out, so <em>you</em> are responsible for that reference count.  Here's something that works, but I've changed <code>void*</code> to <code>PyObject*</code> since that is what they are:</p>\n\n<pre><code>#include &lt;Python.h&gt;\n#include &lt;iostream&gt;\n#include &lt;assert.h&gt;\n\nextern \"C\" {\n\n  typedef PyObject* (*CreateObjectCallback)();\n  typedef PyObject* (*NoopCallback)(PyObject* arg);\n\n  __declspec(dllexport) PyObject* test(CreateObjectCallback create, NoopCallback noop)\n  {\n    // Create the object, with one reference.\n    PyObject* object = create();\n    std::cerr &lt;&lt; \"ref cnt = \" &lt;&lt; object-&gt;ob_refcnt &lt;&lt; std::endl;\n\n    // Passing object back to Python increments its reference count\n    // because the parameter of the function is a new reference.\n    // That python function returns an object (the same one), but\n    // now you own deleting the reference.\n    PyObject* object2 = noop(object);\n    Py_DECREF(object2);\n\n    std::cerr &lt;&lt; \"ref cnt = \" &lt;&lt; object-&gt;ob_refcnt &lt;&lt; std::endl;\n\n    // Your return the created object, but now that Python knows\n    // it is a Python object instead of void*, it will decref it.\n    return object;\n  }\n}\n</code></pre>\n\n<p>Here's the Python script I used.  You can use the prototypes as decorators for the callback functions.  This really matters if the callback needs to live longer than the function it was passed into.  When you call the function as you did directly with the callback wrapper, the callback wrapper is destroyed after the function returns because there is no more reference.</p>\n\n<p>I also change to <code>ctypes.PyDLL</code>.  This doesn't release the GIL when calling into the C code.  Since you're passing around Python objects that seems a good idea.</p>\n\n<pre><code>import ctypes\n\nCreateObjectCallback = ctypes.CFUNCTYPE( ctypes.py_object )\nNoopCallback = ctypes.CFUNCTYPE( ctypes.py_object, ctypes.py_object )\n\nlib = ctypes.PyDLL('test')\n\nlib.test.restype = ctypes.py_object\nlib.test.argtypes = [ CreateObjectCallback, NoopCallback ]\n\nclass Foo:\n    def __del__(self):\n        print(\"garbage collect foo\");\n\n@CreateObjectCallback\ndef create():\n    return Foo()\n\n@NoopCallback\ndef noop(object):\n    return object\n\nlib.test(create,noop)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>ref cnt = 1\nref cnt = 1\ngarbage collect foo\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 1972728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f6a7be68309c4a0010f700710e56d9?s=128&d=identicon&r=PG", "display_name": "ygramoel", "link": "https://stackoverflow.com/users/1972728/ygramoel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 52977493, "answer_count": 1, "score": 1, "last_activity_date": 1540413037, "creation_date": 1540378301, "question_id": 52967133, "link": "https://stackoverflow.com/questions/52967133/python3-ctypes-callback-causes-memory-leak-in-simple-example", "title": "Python3 + ctypes callback causes memory leak in simple example", "body": "<p>While working on a complex program combining Python 3 code and C++ code using ctypes,  I found a memory leak that can easily be reproduced with the stripped down example below.</p>\n\n<p>My C++ code creates a Python object using a callback function. Next, it calls another callback on the Python object, that simply returns its argument.  The second callback causes the object's reference count to increase.  As a result,  the object never gets garbage-collected.</p>\n\n<p>This is the Python code (file bug.py):</p>\n\n<pre><code>import ctypes\n\nCreateObjectCallback = ctypes.CFUNCTYPE( ctypes.py_object )\nNoopCallback = ctypes.CFUNCTYPE( ctypes.py_object, ctypes.py_object )\n\nlib = ctypes.cdll.LoadLibrary(\"./libbug.so\")\n\nlib.test.restype = ctypes.py_object\nlib.test.argtypes = [ CreateObjectCallback, NoopCallback ]\n\nclass Foo:\n    def __del__(self):\n        print(\"garbage collect foo\");\n\ndef create():\n    return Foo()\n\ndef noop(object):\n    return object\n\nlib.test(CreateObjectCallback(create), NoopCallback(noop))\n</code></pre>\n\n<p>This is the C++ code (file bug.cpp):</p>\n\n<pre><code>#include &lt;python3.6m/Python.h&gt;\n#include &lt;iostream&gt;\n#include &lt;assert.h&gt;\n\nextern \"C\" {\n\n  typedef void *(*CreateObjectCallback)();\n  typedef void *(*NoopCallback)(void *arg);\n\n  void *test(CreateObjectCallback create, NoopCallback noop)\n  {\n    void *object = create();\n    std::cerr &lt;&lt; \"ref cnt = \" &lt;&lt; ((PyObject*)(object))-&gt;ob_refcnt &lt;&lt; std::endl;\n    object = noop(object);\n    std::cerr &lt;&lt; \"ref cnt = \" &lt;&lt; ((PyObject*)(object))-&gt;ob_refcnt &lt;&lt; std::endl;\n    return object;\n  }\n}\n</code></pre>\n\n<p>And here are the commands I use to compile and run:</p>\n\n<pre><code>g++ -O3 -W -Wextra -Wno-return-type -Wall -Werror -fPIC -MMD   -c -o bug.o bug.cpp\ng++ -shared -Wl,-soname,libbug.so -o libbug.so bug.o \npython3 bug.py\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>ref cnt = 1\nref cnt = 2\n</code></pre>\n\n<p>In other words,  the call to the noop function incorrectly increases the reference count, and the Foo object is not garbage collected.  Without the call to the noop function, the Foo object is garbage collected.  The expected output is:</p>\n\n<pre><code>ref cnt = 1\nref cnt = 1\ngarbage collect foo\n</code></pre>\n\n<p>Is this a known issue?  Does anyone know a work-around or solution? Is this caused by a bug in ctypes?</p>\n"}]