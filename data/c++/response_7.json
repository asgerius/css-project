[{"tags": ["c++", "multithreading", "reference", "lambda"], "comments": [{"owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "edited": false, "score": 0, "creation_date": 1424908799, "post_id": 28732083, "comment_id": 45750127, "body": "<code>[&amp;]</code> gets values by reference. Unless you specifically need that, use the first syntax you used."}], "answers": [{"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 3, "last_activity_date": 1424908759, "creation_date": 1424908759, "answer_id": 28732104, "question_id": 28732083, "link": "https://stackoverflow.com/questions/28732083/threads-with-lambda-leading-to-mystic-results/28732104#28732104", "title": "Threads with lambda [&amp;] leading to mystic results", "body": "<p>As the value of <code>i</code> changes, the value of references to <code>i</code> changes with it. Since you have no synchronization, such changes are unpredictable. Here, you clearly want to capture <code>i</code> by value.</p>\n"}, {"owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "is_accepted": false, "score": 3, "last_activity_date": 1424910432, "creation_date": 1424910432, "answer_id": 28732375, "question_id": 28732083, "link": "https://stackoverflow.com/questions/28732083/threads-with-lambda-leading-to-mystic-results/28732375#28732375", "title": "Threads with lambda [&amp;] leading to mystic results", "body": "<p>This is no more \"mystic\" than the difference between </p>\n\n<pre><code>void thread_body (int i) {}\n</code></pre>\n\n<p>and </p>\n\n<pre><code>void thread_body (int &amp;i) {}\n</code></pre>\n\n<p>In the first case the current value of the argument is passed to the thread and i won't change unless the function itself modifies it.</p>\n\n<p>In the second you pass a reference to some external variable that is likely to change anytime, outside the function's control.</p>\n\n<p>The only mystic thing here is the bloody awful C++ syntax, but since you're writing a multitasking C++14 server, you'll soon get used to it.</p>\n"}, {"owner": {"reputation": 13376, "user_id": 873025, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/d8rRW.jpg?s=128&g=1", "display_name": "Snps", "link": "https://stackoverflow.com/users/873025/snps"}, "is_accepted": true, "score": 2, "last_activity_date": 1424918163, "creation_date": 1424918163, "answer_id": 28733522, "question_id": 28732083, "link": "https://stackoverflow.com/questions/28732083/threads-with-lambda-leading-to-mystic-results/28733522#28733522", "title": "Threads with lambda [&amp;] leading to mystic results", "body": "<h2>Race Condition</h2>\n\n<p>What is happening here when capturing <code>i</code> by reference is a <em>data race</em>. When capturing by reference, each lambda will get a reference to the same memory location as the variable captured by reference.</p>\n\n<p>Basically what is going on is that the main thread is writing to <code>i</code> while the spawned threads are trying to read from the same variable, without synchronization.</p>\n\n<p>Performing reads and writes to the same memory location concurrently without synchronization will cause a data race and exhibit nondeterministic behaviour.</p>\n"}], "owner": {"reputation": 186, "user_id": 3157230, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lOWEu.jpg?s=128&g=1", "display_name": "Dubrzr", "link": "https://stackoverflow.com/users/3157230/dubrzr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 28733522, "answer_count": 3, "score": 2, "last_activity_date": 1424918163, "creation_date": 1424908635, "last_edit_date": 1424912525, "question_id": 28732083, "link": "https://stackoverflow.com/questions/28732083/threads-with-lambda-leading-to-mystic-results", "title": "Threads with lambda [&amp;] leading to mystic results", "body": "<p>I am currently developing a multi-threaded server (with c++14) and I am facing kind of a <strong>strange problem</strong>, let me explain:</p>\n\n<p>So here I am just creating nb_threads threads with a lambda expression and putting them in a forward_list:</p>\n\n<pre><code>unsigned nb_threads = 4;\nstd::forward_list&lt;std::thread&gt; threads;\n\nfor (unsigned i = 0; i &lt; nb_threads; ++i)\n      threads.emplace_front(std::thread(\n            [i, this]()\n            {\n              std::cout &lt;&lt; \"Thread \" &lt;&lt; i + 1 &lt;&lt; \" launched!\" &lt;&lt; std::endl;\n            }));\n</code></pre>\n\n<p>This gives me this result on the stdout (which is <strong>correct</strong>):</p>\n\n<pre><code>Thread 2 launched!\nThread 3 launched!\nThread 4 launched!\nThread 1 launched!\n</code></pre>\n\n<p>Now let's <strong>just change [i, this] by [&amp;]</strong> in the lambda expression:</p>\n\n<pre><code>for (unsigned i = 0; i &lt; nb_threads; ++i)\n      threads.emplace_front(std::thread(\n            [&amp;]()\n            {\n              std::cout &lt;&lt; \"Thread \" &lt;&lt; i + 1 &lt;&lt; \" launched!\" &lt;&lt; std::endl;\n            }));\n</code></pre>\n\n<p>This now gives me this result on the stdout (which is really <strong>mystic</strong>!): </p>\n\n<pre><code>Thread 2 launched!\nThread 1 launched!\nThread 1 launched!\nThread 1 launched!\n</code></pre>\n\n<p>So my question is <strong>What is happening ?</strong> Why can't I change for <strong>[&amp;]</strong> ?</p>\n"}, {"tags": ["c++", "multithreading", "c++11", "boost-thread"], "comments": [{"owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 1, "creation_date": 1424907742, "post_id": 28731848, "comment_id": 45749790, "body": "The constructor uses variadic templates to generate code equivalent to calling <code>threadfunc(args)</code>. If you give it parameters that cause overload resolution to fail, you&#39;ll get a compiler error."}], "answers": [{"owner": {"reputation": 1452, "user_id": 2631829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/017OJ.jpg?s=128&g=1", "display_name": "Xiao", "link": "https://stackoverflow.com/users/2631829/xiao"}, "is_accepted": true, "score": 1, "last_activity_date": 1424908725, "creation_date": 1424908725, "answer_id": 28732097, "question_id": 28731848, "link": "https://stackoverflow.com/questions/28731848/arguments-in-stdthread-how-works/28732097#28732097", "title": "Arguments in std::thread. How works?", "body": "<p>What you're looking for is the <a href=\"http://en.cppreference.com/w/cpp/language/parameter_pack\" rel=\"nofollow\">parameter pack</a> operator. Using this it's possible to write a function that accepts a variable number of arguments. It can do things with those arguments, such as forward them to another function. </p>\n\n<p>Keep in mind that because templates are instantiated at compile time, the number of arguments and their types must be known at the call site.</p>\n\n<p>A simple way to implement your wrapper thread class' constructor might be:</p>\n\n<pre><code>template &lt;typename ... Args&gt; // this ctor has variadic template arguments\nwrapper_thread(Args&amp; ... args) // pack references to arguments into 'args' \n     : t(args...) //unpack arguments, pass them as parameters to the ctor of std::thread\n</code></pre>\n\n<p>Once you've got your head around that, you can look at <a href=\"http://en.cppreference.com/w/cpp/utility/forward\" rel=\"nofollow\"><code>std::forward()</code></a> to do perfect forwarding. Andrei Alexandrescu gives a great talk on variadic templates. You can find it here: <a href=\"http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Variadic-Templates-are-Funadic\" rel=\"nofollow\">http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Variadic-Templates-are-Funadic</a></p>\n"}], "owner": {"reputation": 1736, "user_id": 2489715, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlL22.png?s=128&g=1", "display_name": "amchacon", "link": "https://stackoverflow.com/users/2489715/amchacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 0, "accepted_answer_id": 28732097, "answer_count": 1, "score": 1, "last_activity_date": 1424908725, "creation_date": 1424907420, "question_id": 28731848, "link": "https://stackoverflow.com/questions/28731848/arguments-in-stdthread-how-works", "title": "Arguments in std::thread. How works?", "body": "<p>Examples of use std::thread constructor:</p>\n\n<pre><code>#include &lt;thread&gt;\nusing namespace std;\n\nvoid a_function(){}\nvoid a_function2(int a){}\nvoid a_function3(int a,int b){}\nvoid a_function4(int &amp;a){}\n\nclass a_class\n{\npublic:\n    void a_function5(int a){}\n};\n\nint main()\n{\n    a_class aux;\n    int a = 2;\n\n    thread t(a_function);\n    thread t2(a_function2,2);\n    thread t3(a_function3,2,3);\n    thread t4(a_function4,ref(a));\n    thread t5(&amp;a_class::a_function5,&amp;aux,2);\n\n    t.join();\n    t2.join();\n    t3.join();\n    t4.join();\n    t5.join();\n}\n</code></pre>\n\n<p>How can constructor knows number of arguments? How can constructor calls one unknown type of function? How could i implement something like that? By example, one wrapper for std::thread</p>\n\n<pre><code>class wrapper_thread\n{\n   thread t;\n\n   public:\n\n         wrapper_thread() //what arguments here?\n         : t() //What arguments here?\n         {}\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 119716, "user_id": 643383, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/uQ5JF.png?s=128&g=1", "display_name": "Caleb", "link": "https://stackoverflow.com/users/643383/caleb"}, "edited": false, "score": 0, "creation_date": 1424907757, "post_id": 28731790, "comment_id": 45749797, "body": "This would be a better question if you included example inputs and outputs. Try to describe how the code is failing, and specifically what you don&#39;t understand."}, {"owner": {"reputation": 600, "user_id": 2252950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b69ae4ded2f699ed432a90b456856f2e?s=128&d=identicon&r=PG", "display_name": "BoldAsLove", "link": "https://stackoverflow.com/users/2252950/boldaslove"}, "edited": false, "score": 0, "creation_date": 1424907829, "post_id": 28731790, "comment_id": 45749815, "body": "high &gt; low implies high != low, you can remove the latter"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1424908231, "post_id": 28731790, "comment_id": 45749945, "body": "This would be better if you used a debugger and executed each statement singly.  Also, you could compare you code to existing QuickSort implementations: <a href=\"https://www.google.com/search?q=quicksort+c%2B%2B&amp;ie=utf-8&amp;oe=utf-8\" rel=\"nofollow noreferrer\">QuickSort implementations</a>"}, {"owner": {"reputation": 1736, "user_id": 2489715, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlL22.png?s=128&g=1", "display_name": "amchacon", "link": "https://stackoverflow.com/users/2489715/amchacon"}, "edited": false, "score": 1, "creation_date": 1424908470, "post_id": 28731790, "comment_id": 45750020, "body": "Duplicate of <a href=\"http://stackoverflow.com/questions/28681643/bad-thread-access-seg-fault-quicksort\" title=\"bad thread access seg fault quicksort\">stackoverflow.com/questions/28681643/&hellip;</a> ?"}, {"owner": {"reputation": 93, "user_id": 4505353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f2597ac94762e792e4d02729eb4a4cb?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/4505353/anonymous"}, "edited": false, "score": 0, "creation_date": 1424908737, "post_id": 28731790, "comment_id": 45750108, "body": "yeah, but separate question."}, {"owner": {"reputation": 1736, "user_id": 2489715, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlL22.png?s=128&g=1", "display_name": "amchacon", "link": "https://stackoverflow.com/users/2489715/amchacon"}, "edited": false, "score": 0, "creation_date": 1424909248, "post_id": 28731790, "comment_id": 45750257, "body": "Ok, i was confused :)"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4505353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f2597ac94762e792e4d02729eb4a4cb?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/4505353/anonymous"}, "edited": false, "score": 0, "creation_date": 1424910196, "post_id": 28732231, "comment_id": 45750548, "body": "the array isn&#39;t hard coded, it a list of words from  a text file stored into the array and converts those words to hashes. Thanks for the website."}, {"owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "reply_to_user": {"reputation": 93, "user_id": 4505353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f2597ac94762e792e4d02729eb4a4cb?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/4505353/anonymous"}, "edited": false, "score": 0, "creation_date": 1424910546, "post_id": 28732231, "comment_id": 45750648, "body": "I mean the array could be passed as an argument to quicksort. That is what hard-coded means: non configurable."}], "owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "is_accepted": true, "score": 1, "last_activity_date": 1424909444, "creation_date": 1424909444, "answer_id": 28732231, "question_id": 28731790, "link": "https://stackoverflow.com/questions/28731790/quick-sort-algorithm-code/28732231#28732231", "title": "Quick sort algorithm code", "body": "<p>Why don't you go to <a href=\"http://en.wikipedia.org/wiki/Quicksort#Algorithm\" rel=\"nofollow\">the quick sort wiki page</a> and see how it's done?</p>\n\n<p>Your code tries to do unnecessary stuffs and eventually trips over its own feet.  Keep it simple and it will work.</p>\n\n<p>And Btw Quicksort works very well on arrays, so it's a shame to make one version where the array is hard-coded.</p>\n"}], "owner": {"reputation": 93, "user_id": 4505353, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6f2597ac94762e792e4d02729eb4a4cb?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/4505353/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 28732231, "answer_count": 1, "score": 0, "last_activity_date": 1424909444, "creation_date": 1424907156, "last_edit_date": 1424909076, "question_id": 28731790, "link": "https://stackoverflow.com/questions/28731790/quick-sort-algorithm-code", "title": "Quick sort algorithm code", "body": "<p>I'm trying to implement a quick sort that sorts numbers and words based on the number value. I can't seem to figure out how to fix the following code to work right.</p>\n\n<pre><code> if (high!=low&amp;&amp; high&gt;low)//compares hashes and finds the number in the middle. swaps hashes and corresponding words\n{\n\nlong one=hash[low];\nlong two=hash[high];\nlong three = hash[high/2];\n    if((one&lt;=two&amp;&amp;one&gt;=three)||(one&lt;=three&amp;&amp;one&gt;=two))\n    {\n        swap(hash[low], hash[high]);\n        swap(copyOfWords[low], copyOfWords[high]);\n    }\n    else if((three&lt;=one&amp;&amp;three&gt;=two)||(three&lt;=two&amp;&amp;three&gt;=one))\n    {\n\n        swap(hash[high/2], hash[high]);\n        swap(copyOfWords[high/2], copyOfWords[high]);\n    }\n    else\n    {\n\n    }\n    int i=low;\n    int j=high-1;\n    while(i!=j&amp;&amp;i&lt;j)\n    {\n\n        while(hash[i]&lt;hash[high]&amp;&amp;i&lt;j)// find higher numbers and lower numbers then the middlle and swaps them\n        {\n            i++;\n        }\n        while(hash[j]&gt;hash[high]&amp;&amp;i&lt;j)\n        {\n            j--;\n        }\n        if(i==j||i&gt;j)\n        {\n        }\n        else\n        {\n            swap(hash[i],hash[j]);\n            swap(copyOfWords[i],copyOfWords[j]);\n            i++;\n            j--;\n        }\n    }\n        swap(hash[i],hash[high]);\n    swap(copyOfWords[i], copyOfWords[high]);\n\n\n\n    quickSort(low, j-1);//recursive\n    quickSort(j+1, high);\n\n}\n\n}\n</code></pre>\n\n<p>I know the values in hash and copyOfWords are correct because when I use shell sort, it sorts them the right way. for example if there are two words, copyOfWOrds[0]=\"1994,\" and copyOfWords[1]=\"a\" then hash[0]=549456039 and hash[1]=197000000, but the sort puts them a 1994, a instead of a 1994,. It causes more problems with more elements. Any help would be appreciated. Thanks</p>\n"}, {"tags": ["c++", "windows", "sockets"], "comments": [{"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424906992, "post_id": 28731725, "comment_id": 45749537, "body": "send at the same time?  or send at different times?"}, {"owner": {"reputation": 1254, "user_id": 4566312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792d4cf0473ff830ff5a857ec41bf83?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4566312/tom"}, "reply_to_user": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424907127, "post_id": 28731725, "comment_id": 45749589, "body": "@thang At the same time."}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424907218, "post_id": 28731725, "comment_id": 45749609, "body": "if it&#39;s a stream socket, you have a problem of having the stream make sense..."}, {"owner": {"reputation": 1254, "user_id": 4566312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792d4cf0473ff830ff5a857ec41bf83?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4566312/tom"}, "reply_to_user": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424907405, "post_id": 28731725, "comment_id": 45749685, "body": "@thang You mean the buffers could get mixed together?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424908472, "post_id": 28731725, "comment_id": 45750021, "body": "It&#39;s safe from the kernel&#39;s point of view, as <code>send()</code> is atomic, but it doesn&#39;t  make much sense from the receiver&#39;s point of view."}, {"owner": {"reputation": 1254, "user_id": 4566312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792d4cf0473ff830ff5a857ec41bf83?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4566312/tom"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424908713, "post_id": 28731725, "comment_id": 45750101, "body": "@EJP An example case where <code>send()</code> is used from multiple threads is if I want to send something in the UI thread, and I have another thread that receives data, when the other thread receives something, it must echo it back. So as you can see there are two threads that could at some point call <code>send()</code> at the same time."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 1, "creation_date": 1424913268, "post_id": 28731725, "comment_id": 45751409, "body": "@Tom You can get away with it if you&#39;re using UDP, since each call to send() will result in a separate UDP packet.  With TCP it would only work if each call to send() contained a complete message; otherwise the interleaving of messages from the two threads will confuse the parser in the remote client.  But the problem is that send() can return without having sent all the data you asked it to send--which means that you can&#39;t guarantee that each call to send() will contain a full message!  So for TCP, designate one thread to handle sending and have the other thread forward to the sender-thread."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424918214, "post_id": 28731725, "comment_id": 45752582, "body": "@Tom Sure but will the receiver understand the interleaved data?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "edited": false, "score": 0, "creation_date": 1424918365, "post_id": 28731725, "comment_id": 45752606, "body": "@JeremyFriesner Not in blocking mode, see my comment to Harry Johnston&#39;s answer."}, {"owner": {"reputation": 1254, "user_id": 4566312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792d4cf0473ff830ff5a857ec41bf83?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4566312/tom"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424919139, "post_id": 28731725, "comment_id": 45752781, "body": "@EJP I assumed that <code>send()</code> send the entire buffer, I was mistaken about that, as <code>send()</code> does not guarantee that. So according to this assumption, when I send &quot;hi&quot; from the first thread, and &quot;hello&quot; from the second, the receiver will receive &quot;hi&quot; and &quot;hello&quot; (or vice versa). But now I guess I will create a function that will make sure the entire buffer is sent, and enclose its body in a critical section)."}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424921605, "post_id": 28731725, "comment_id": 45753322, "body": "@EJP I just wrote a little test program that does blocking send()&#39;s in a loop forever -- I was able to make send() return a value greater than zero and less that the requested-send size by sending a SIGINT signal to my test program&#39;s process (and having the process handle the signal so that the default signal handler wouldn&#39;t kill the process).  (This under MacOS/X, perhaps the guarantees are different under Windows)"}], "answers": [{"comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1424916233, "post_id": 28733012, "comment_id": 45752088, "body": "Note - this is a general rule for synchronous I/O on Windows.  It is <i>possible</i> that the socket library is an exception, perhaps for compatibility with Posix sockets.  However, unless someone can find documentation that spells this out explicitly, I wouldn&#39;t count on it."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424918309, "post_id": 28733012, "comment_id": 45752597, "body": "Posix requires that <code>send()</code> be atomic and complete the write in a single call in blocking mode, and Windows is meant to be Posix-compliant. There was an extensive discussion on news:comp.protocols.tcp-ip among several implementors some years back, and that was the general conclusion."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "reply_to_user": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "edited": false, "score": 0, "creation_date": 1424919297, "post_id": 28733012, "comment_id": 45752818, "body": "@EJP: Windows is not Posix-compliant in general.  Do you mean just in terms of the sockets implementation?"}], "owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "is_accepted": false, "score": 0, "last_activity_date": 1424914611, "creation_date": 1424914611, "answer_id": 28733012, "question_id": 28731725, "link": "https://stackoverflow.com/questions/28731725/using-send-on-a-blocking-socket-from-multiple-threads/28733012#28733012", "title": "Using send() on a blocking socket from multiple threads", "body": "<p>The fundamental reason is that synchronous I/O functions use the handle object (sockets are implemented as handles) to keep track of whether the I/O is complete or not.</p>\n\n<p>The result is that if you try to send() to the same socket from multiple threads simultaneously, send() is liable to (a) hang or (b) exit before the I/O is actually complete, with catastrophic results.</p>\n\n<p>You can use a critical section to prevent the sends from overlapping, or have a designated thread that reads data to send from a queue.</p>\n\n<p>Note that this only applies if the sends are to the <em>same</em> socket.  Sending to <em>different</em> sockets simultaneously is fine.</p>\n"}], "owner": {"reputation": 1254, "user_id": 4566312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792d4cf0473ff830ff5a857ec41bf83?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4566312/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 267, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1424914611, "creation_date": 1424906803, "question_id": 28731725, "link": "https://stackoverflow.com/questions/28731725/using-send-on-a-blocking-socket-from-multiple-threads", "title": "Using send() on a blocking socket from multiple threads", "body": "<p>I have read that you are not supposed to use <code>send()</code> on a blocking socket from multiple threads, but I do not know why! And if I want to use <code>send()</code> from multiple threads, is there anything I can do to allow it?</p>\n\n<p>I am using Windows.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1424906266, "post_id": 28731562, "comment_id": 45749250, "body": "Mr. Debugging Tool can help you debug your program.  What was the outcome when you used the debugging tool?"}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1424906286, "post_id": 28731562, "comment_id": 45749258, "body": "You forgot to account for the <a href=\"http://www.webexhibits.org/calendars/year-text-British.html\" rel=\"nofollow noreferrer\">Calendar Act of 1752</a> and the various different dates various countries changed calendars. Also, your code states that all leap years are zero mod 400, which is clearly incorrect."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1424906294, "post_id": 28731562, "comment_id": 45749267, "body": "You code may have failed at the beginning because the <code>main</code> function returns <code>int</code>.  Always."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 1, "creation_date": 1424906447, "post_id": 28731562, "comment_id": 45749329, "body": "The statement associated with your <code>if</code> statement doesn&#39;t do anything.  No variables are assigned, no functions called."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1424906528, "post_id": 28731562, "comment_id": 45749367, "body": "Why do you have 13 items in that count array? I believe you should get rid of the zero"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1424906536, "post_id": 28731562, "comment_id": 45749369, "body": "Your <code>return</code> statement performs almost the same amount of work that the expression of your <code>if</code> statement."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1424906584, "post_id": 28731562, "comment_id": 45749388, "body": "@Smac89:  The technique of 13 entries for the months is to eliminate the need to subtract 1 from the month number."}, {"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1424906675, "post_id": 28731562, "comment_id": 45749425, "body": "@ThomasMatthews, OP is still subtracting 1"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1424906849, "post_id": 28731562, "comment_id": 45749487, "body": "@Smac89: The OP needs to be consistent, either stop subtracting 1 or change the array to use 12 entries."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1424906984, "post_id": 28731562, "comment_id": 45749532, "body": "When you say &quot;any specified date&quot;, specified according to what calendar? Julian? Gregorian? Proleptic Gregorian?"}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1424907119, "post_id": 28731562, "comment_id": 45749585, "body": "There is no January 1, 0000 because there is no year zero. Share and enjoy."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "reply_to_user": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424907433, "post_id": 28731562, "comment_id": 45749699, "body": "@BobJarvis: Some calendar systems retroactively define a year zero."}, {"owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 1, "creation_date": 1424908899, "post_id": 28731562, "comment_id": 45750159, "body": "@KeithThompson - hmmm...based on a re-reading of &quot;Calendrical Calculations&quot; (Reingold, Edward and Dershowitz, Nachum), Millennium Edition (2001), page 50, second paragraph, in a discussion of the proleptic Gregorian calendar the authors state that &quot;Unlike the Julian calendar, this proleptic calendar <i>does</i> have a year zero&quot;. They also note in a footnote on page 48 that the convention of 1 B.C. being followed by 1 A.D. is attributed to the Venerable Bede, who didn&#39;t know about zero. So as regards the proleptic Gregorian calendar, I stand corrected. :-)"}, {"owner": {"reputation": 9, "user_id": 4608023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29cc9e59af658b24b5cbbc6b3a0edcd2?s=128&d=identicon&r=PG&f=1", "display_name": "SwtNemesis", "link": "https://stackoverflow.com/users/4608023/swtnemesis"}, "edited": false, "score": 0, "creation_date": 1424997470, "post_id": 28731562, "comment_id": 45792418, "body": "The directions in the lab were to count the day including leap years from January 1, 0000 to a specified date. Those are not my rules it&#39;s in the lab assignment itself. I guess they made it that way so it would be easier to define where to start. I as well as the professor is aware that there is no January 1, 0000. I realize my logic was off so I tried two different things, one is contained in the if statement and the other is an equation. I posted a combination of both to get a feel of which way I should go. Sorry for the confusion."}], "answers": [{"comments": [{"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1424907337, "post_id": 28731659, "comment_id": 45749658, "body": "1752 is when the UK and possessions (including what is now the US) changed from the Julian to the Gregorian calendar. Much of Europe switched in 1582; other countries switched at various times up to the 20th century. If you&#39;re going to account for the change, you either need to include location information or acknowledge that your results are only application in certain places."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1424908144, "post_id": 28731659, "comment_id": 45749912, "body": "@KeithThompson I agree. This is a surprisingly hard problem. The naive problem statement hides this complexity with the phrase &quot;any specified date&quot;, which of course isn&#39;t very well-defined. (I added some extra clarification about that.)"}, {"owner": {"reputation": 9, "user_id": 4608023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29cc9e59af658b24b5cbbc6b3a0edcd2?s=128&d=identicon&r=PG&f=1", "display_name": "SwtNemesis", "link": "https://stackoverflow.com/users/4608023/swtnemesis"}, "edited": false, "score": 0, "creation_date": 1424997162, "post_id": 28731659, "comment_id": 45792329, "body": "The directions in the lab were to count the day including leap years from January 1, 0000 to a specified date.  Those are not my rules it&#39;s in the lab assignment itself.  I guess they made it that way so it would be easier to define where to start.  I as well as the professor is aware that there is no January 1, 0000.  I realize my logic was off so I tried two different things, one is contained in the if statement and the other is an equation.  I posted a combination of both to get a feel of which way I should go.  Sorry for the confusion."}], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 5, "last_activity_date": 1424908206, "last_edit_date": 1424908206, "creation_date": 1424906517, "answer_id": 28731659, "question_id": 28731562, "link": "https://stackoverflow.com/questions/28731562/how-to-calculate-the-number-of-days-from-jan-1-0000-to-any-specified-date-inclu/28731659#28731659", "title": "How to calculate the number of days from Jan 1, 0000 to any specified date including leap years?", "body": "<p>Your problem statement is ill-defined. You can't just say \"any specified date\" because many dates are ambiguous due to the various calendars in use at various places at various times. Perhaps you should stick to dates after 1800 to keep things manageable.</p>\n\n<p>In any event, if you're trying to implement the <a href=\"http://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar\" rel=\"nofollow\">proleptic Gregorian calendar</a>:</p>\n\n<ol>\n<li><p>You don't account for the <a href=\"http://www.webexhibits.org/calendars/year-text-British.html\" rel=\"nofollow\">Calendar Act of 1752</a>.</p></li>\n<li><p>Your <code>if</code> statement doesn't do anything, it just adds 1 to something and throws that away.</p></li>\n<li><p>The logic in your test for leap years is wrong. It says a leap year must be zero mod 400 AND a bunch of other stuff. But most <a href=\"http://kalender-365.de/leap-years.php\" rel=\"nofollow\">leap years</a> are not zero mod 400.</p></li>\n<li><p>The <code>+ - +</code> logic at the end of your <code>return</code> statement doesn't consider whether the date is before or after the leap day.</p></li>\n<li><p>You don't account for Julian <a href=\"http://en.wikipedia.org/wiki/Proleptic_Gregorian_calendar#Difference_between_Julian_and_proleptic_Gregorian_calendar_dates\" rel=\"nofollow\">leap days not in the proleptic</a> Gregorian calendar. You may or may not need to, depending on how your input date is defined.</p></li>\n<li><p>There was no year zero. So January 1, 0000 never happened.</p></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 2359, "user_id": 757808, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3d68e27bc7504fe519d4d8c93f5204c7?s=128&d=identicon&r=PG", "display_name": "Ulterior", "link": "https://stackoverflow.com/users/757808/ulterior"}, "edited": false, "score": 0, "creation_date": 1424908460, "post_id": 28731882, "comment_id": 45750016, "body": "<code>year % 4 = 0</code> nice try"}], "owner": {"reputation": 45031, "user_id": 213136, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0b84a36c241e04175fcec402dac43018?s=128&d=identicon&r=PG", "display_name": "Bob Jarvis - Reinstate Monica", "link": "https://stackoverflow.com/users/213136/bob-jarvis-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1424909149, "last_edit_date": 1424909149, "creation_date": 1424907586, "answer_id": 28731882, "question_id": 28731562, "link": "https://stackoverflow.com/questions/28731562/how-to-calculate-the-number-of-days-from-jan-1-0000-to-any-specified-date-inclu/28731882#28731882", "title": "How to calculate the number of days from Jan 1, 0000 to any specified date including leap years?", "body": "<p>Your leap year test should be something like</p>\n\n<pre><code>if( (year % 4 == 0 &amp;&amp; (year % 100 != 0 || year % 400 == 0)) &amp;&amp; month &gt;= 2)\n</code></pre>\n\n<p>Share and enjoy.</p>\n"}], "owner": {"reputation": 9, "user_id": 4608023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29cc9e59af658b24b5cbbc6b3a0edcd2?s=128&d=identicon&r=PG&f=1", "display_name": "SwtNemesis", "link": "https://stackoverflow.com/users/4608023/swtnemesis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 955, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1424909149, "creation_date": 1424906114, "last_edit_date": 1424906258, "question_id": 28731562, "link": "https://stackoverflow.com/questions/28731562/how-to-calculate-the-number-of-days-from-jan-1-0000-to-any-specified-date-inclu", "title": "How to calculate the number of days from Jan 1, 0000 to any specified date including leap years?", "body": "<p>I have a C++ project in which the ultimate goal is to create a calendar for any month and year.  A part of the project requires that I first calculate the number of days from Jan 1, 0000 to any specified date. The function must take three parameters, representing year, month, and day. I am new to C++ so please cut me some slack if there is some incorrectly used commands or logic.  So far this is what I have but the numbers are off by a few days when I test it.  Can someone please tell me where my code went wrong?</p>\n\n<pre><code>int const day_of_forever(int const year, int const month, int const day)\n {\n     int count[]={0,31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365};\n     if ((year % 400==0) &amp;&amp; (year % 100 != 0) &amp;&amp; (year % 4 == 0 )&amp;&amp; (month&gt;=2))\n         ((count[month-1]+day)+1);\n     return (count[month-1]+day)+(((year)*365)+1) +((year)/4)-(year/100)+(year/400);\n }\n\nvoid main()\n{ \n    int const year=2000;\n    int const day=1;\n    int const month=1;\n\n    int const something=day_of_forever(year,month,day);\n    print (something);\n}\n</code></pre>\n"}, {"tags": ["c++", "mingw"], "answers": [{"comments": [{"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1424907244, "post_id": 28731555, "comment_id": 45749617, "body": "Compared trivial implementation, I just found that even at 9 bits, the LLVM intrinsic implemenation to be beneficial - 10% improvement in a sudoku solver (which uses &quot;how many bits are set&quot; to determine which is cells to fill in next) - using the popcnt instruction gives another 5% over the &quot;use several instructions&quot; intrinsic."}], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": true, "score": 1, "last_activity_date": 1424906087, "creation_date": 1424906087, "answer_id": 28731555, "question_id": 28731508, "link": "https://stackoverflow.com/questions/28731508/porting-the-method-popcnt-to-mingw/28731555#28731555", "title": "porting the method &#39;__popcnt&#39; to mingw", "body": "<p>GCC has intrinsic functions for specialized processor instructions also, the matching ones are</p>\n\n<pre><code>__builtin_popcount\n__builtin_popcountl\n__builtin_popcountll\n</code></pre>\n\n<p>It doesn't look like any header file is needed.</p>\n\n<p>They are most efficient when targeting a Nehalem or later processor, otherwise the compiler will have to generate a software implementation.</p>\n"}], "owner": {"reputation": 9766, "user_id": 1305891, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/bca679c18291b3c88ee8ffae151d81a1?s=128&d=identicon&r=PG", "display_name": "Rajeshwar", "link": "https://stackoverflow.com/users/1305891/rajeshwar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 28731555, "answer_count": 1, "score": 0, "last_activity_date": 1424906087, "creation_date": 1424905851, "question_id": 28731508, "link": "https://stackoverflow.com/questions/28731508/porting-the-method-popcnt-to-mingw", "title": "porting the method &#39;__popcnt&#39; to mingw", "body": "<p>In my Microsoft specific code I have something like this (which works and builds fine)</p>\n\n<pre><code>wfx-&gt;Channels = __popcnt(type);\n</code></pre>\n\n<p>Mingw has a problem recognizing <code>__popcnt</code> any suggestions on what I could use instead of that ?  This <a href=\"https://msdn.microsoft.com/en-us/library/bb385231.aspx\" rel=\"nofollow\">page</a> says its declared in <code>#include &lt;intrin.h&gt;</code> however adding that did not help. Any suggestions on what I could replace it with ? I do not have access to a Microsoft compiler and I cannot dig deeper into the method. </p>\n"}, {"tags": ["c++", "nodes", "doubly-linked-list"], "comments": [{"owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 1, "creation_date": 1424906340, "post_id": 28731444, "comment_id": 45749294, "body": "how about delete item;  delete curPtr;  ?"}, {"owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "edited": false, "score": 3, "creation_date": 1424906758, "post_id": 28731444, "comment_id": 45749460, "body": "Note that aside from using <code>delete</code> to get the object destroyed and the memory returned to the memory manager there are some issues with your code: you need to handle the cases where no node is found or the found node is the first, last, or only node (unless you use a sentinel node for the begin and end of the list). Also, <code>tempPtr</code> seems wrong."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1425050844, "post_id": 28731444, "comment_id": 45815694, "body": "@sithereal &quot;how about delete item; delete curPtr;&quot; - <code>delete item;</code> would be wrong. Only <code>delete curPutr</code> is needed."}, {"owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1425063249, "post_id": 28731444, "comment_id": 45822999, "body": "@davmac only if we know that ListItem&lt;T&gt; class also deletes the instance of T. do we know? no"}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "reply_to_user": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1425076071, "post_id": 28731444, "comment_id": 45828993, "body": "@sithereal It&#39;s nothing to do with whether ListItem&lt;T&gt; also deletes instances of T. <code>item</code> is of type <code>T</code>, it is not (necessarily) a pointer. You cannot delete it."}], "answers": [{"comments": [{"owner": {"reputation": 1174, "user_id": 4450336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FvdBD.jpg?s=128&g=1", "display_name": "Daniel Robertson", "link": "https://stackoverflow.com/users/4450336/daniel-robertson"}, "reply_to_user": {"reputation": 186, "user_id": 3983177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99765eca831722353cac59f22de22d25?s=128&d=identicon&r=PG&f=1", "display_name": "Momin Zahid", "link": "https://stackoverflow.com/users/3983177/momin-zahid"}, "edited": false, "score": 0, "creation_date": 1425050304, "post_id": 28732090, "comment_id": 45815328, "body": "No problem! I&#39;m glad it helped. If you want to optimize the function, you may consider changing searchFor(item) to return a pointer to the item before the one you want, so that you can call <code>searchFor(item)-&gt;erase_next()</code> as your entire function body, or you could just opt for pointer arithmetic and use <code>(searchFor(item) - 1)-&gt;erase_next()</code>."}, {"owner": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1425050989, "post_id": 28732090, "comment_id": 45815796, "body": "What if the item to delete is the first in the list? (i.e. there is no previous item to call <code>erase_next</code> on)."}, {"owner": {"reputation": 1174, "user_id": 4450336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FvdBD.jpg?s=128&g=1", "display_name": "Daniel Robertson", "link": "https://stackoverflow.com/users/4450336/daniel-robertson"}, "edited": false, "score": 0, "creation_date": 1425051107, "post_id": 28732090, "comment_id": 45815892, "body": "Killer question! You would have to make an exception and add a <code>erase_prev()</code> function"}, {"owner": {"reputation": 1174, "user_id": 4450336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FvdBD.jpg?s=128&g=1", "display_name": "Daniel Robertson", "link": "https://stackoverflow.com/users/4450336/daniel-robertson"}, "reply_to_user": {"reputation": 18493, "user_id": 388661, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61df8d728c699c39c4c73507da598712?s=128&d=identicon&r=PG", "display_name": "davmac", "link": "https://stackoverflow.com/users/388661/davmac"}, "edited": false, "score": 0, "creation_date": 1425052432, "post_id": 28732090, "comment_id": 45816733, "body": "I added edits taking into consideration the comments by @davmac"}], "owner": {"reputation": 1174, "user_id": 4450336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FvdBD.jpg?s=128&g=1", "display_name": "Daniel Robertson", "link": "https://stackoverflow.com/users/4450336/daniel-robertson"}, "is_accepted": true, "score": 1, "last_activity_date": 1425052194, "last_edit_date": 1425052194, "creation_date": 1424908677, "answer_id": 28732090, "question_id": 28731444, "link": "https://stackoverflow.com/questions/28731444/deleting-a-node-from-a-doubly-linked-list-and-freeing-up-its-space-as-well/28732090#28732090", "title": "Deleting a node from a doubly linked list AND freeing up its space as well", "body": "<p>Could you make an <code>erase_next()</code> method for your ListItem type?\nI have something like the following in a similar class. Hope it helps.</p>\n\n<pre><code>void erase_next() {\n    // ensure it is not the last item\n    if(this-&gt;next != nullptr) {\n        // create a temporary pointer\n        ListItem&lt;T&gt;* tmp = this-&gt;next\n\n        // link next to the next item to the next item and change the\n        // next items previous item to this item\n        this-&gt;next = this-&gt;next-&gt;next;\n        next-&gt;prev = this;\n\n        // delete the old next item\n        delete tmp;\n    }\n}\n</code></pre>\n\n<p>In your function you could call it with something like the following. Thanks to @davmac edits have been made to delete the first item</p>\n\n<pre><code>template &lt;class T&gt;\nvoid LinkedList&lt;T&gt;::deleteElement(T item)\n{\n    ListItem&lt;T&gt; *curPtr = searchFor(item);\n    if(curPtr-&gt;prev == nullptr) {\n        curPtr-&gt;next-&gt;prev = nullptr;\n        delete curPtr;\n    } else {\n        curPtr-&gt;prev-&gt;erase_next()\n    }\n }\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>I played around with this again, and you should be able to optimize the <code>erase_next()</code> function with the following</p>\n\n<pre><code>void erase_next() {\n    if(this-&gt;next != nullptr) {\n        this-&gt;next = this-&gt;next-&gt;next\n        // We've already linked next so we can delete the handle\n        // with prev Note: this method is not possible with a\n        // single linked list and we would need the temp variable\n        delete this-&gt;next-&gt;prev\n        next-&gt;prev = this;\n    }\n}\n</code></pre>\n\n<p>That way you don't have to declare a temp variable.</p>\n"}], "owner": {"reputation": 186, "user_id": 3983177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99765eca831722353cac59f22de22d25?s=128&d=identicon&r=PG&f=1", "display_name": "Momin Zahid", "link": "https://stackoverflow.com/users/3983177/momin-zahid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "accepted_answer_id": 28732090, "answer_count": 1, "score": 2, "last_activity_date": 1425052194, "creation_date": 1424905587, "question_id": 28731444, "link": "https://stackoverflow.com/questions/28731444/deleting-a-node-from-a-doubly-linked-list-and-freeing-up-its-space-as-well", "title": "Deleting a node from a doubly linked list AND freeing up its space as well", "body": "<p>I'm working on an assignment and there's a problem I'm stuck on. So I'm making a doubly linked list. I want a a delete function that will take item as argument, search for that argument in the list. when it has found the node which contains that item, I have to DELETE that node. I am aware of how I would change the previous and next pointers to the the nodes around that node. The problem that has been bugging me however, is that when I just change the next pointer of the node before it and the previous pointer of the node after it, like in the code below, the particular node will only be disconnected from the list but it will still remain in the freestore. How do I delete it from there so that the memory it is taking is also freed? </p>\n\n<p>The following is the code I have. Please take a look: </p>\n\n<pre><code>template &lt;class T&gt;\nvoid LinkedList&lt;T&gt;::deleteElement(T item)\n{\n    ListItem&lt;T&gt; *curPtr;\n    curPtr = searchFor(item); // this function returns the pointer to the node which contains the item.\n    (curPtr-&gt;next)-&gt;prev = curPtr-&gt;prev;\n    (curPtr-&gt;prev)-&gt;next = tempPtr-&gt;next;\n\n\n}\n</code></pre>\n\n<p>So you see, the curPtr is being disconnected, but I believe it still exists somewhere on the freestore. How do I get rid of it permanantly? </p>\n"}, {"tags": ["c++", "image-processing", "computer-vision", "point-clouds"], "comments": [{"owner": {"reputation": 1610, "user_id": 997572, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ed289e7f54951126dfc011c58a9df6a6?s=128&d=identicon&r=PG", "display_name": "killogre", "link": "https://stackoverflow.com/users/997572/killogre"}, "edited": false, "score": 0, "creation_date": 1424931342, "post_id": 28731442, "comment_id": 45756005, "body": "how dense is your point cloud? is it originating from a depth sensor?"}], "answers": [{"owner": {"reputation": 90163, "user_id": 10897, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/csXHX.png?s=128&g=1", "display_name": "Martin Beckett", "link": "https://stackoverflow.com/users/10897/martin-beckett"}, "is_accepted": false, "score": 3, "last_activity_date": 1424906164, "creation_date": 1424906164, "answer_id": 28731575, "question_id": 28731442, "link": "https://stackoverflow.com/questions/28731442/detecting-set-of-planes-from-point-cloud/28731575#28731575", "title": "Detecting set of planes from point cloud", "body": "<p>Normal approach would be <a href=\"https://en.wikipedia.org/wiki/RANSAC\" rel=\"nofollow\">ransac</a></p>\n\n<ol>\n<li>Pick 3 points at random. </li>\n<li>Make a plane.</li>\n<li>Check if each other point lies on the plane. </li>\n<li>If enough are on the plane - recalculate a best plane from all these points  and remove them from the set </li>\n<li>If not try another 3 points </li>\n<li>Stop when you have enough planes, or too few points left.</li>\n</ol>\n\n<p>Another approach if you know that the planes are near vertical or near horizontal.</p>\n\n<ol>\n<li>pick a small vertical range</li>\n<li>Get all the points in this range</li>\n<li>Try and fit 2d lines</li>\n<li>Repeat for other Z ranges</li>\n<li>If you get a parallel set of lines in each Z slice then they are probably have a plane - recalculate the best fit plane for the points.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "edited": false, "score": 0, "creation_date": 1425163978, "post_id": 28759051, "comment_id": 45851589, "body": "don&#39;t I need three planes that intersect to determine a corner in a room?"}, {"owner": {"reputation": 1610, "user_id": 997572, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ed289e7f54951126dfc011c58a9df6a6?s=128&d=identicon&r=PG", "display_name": "killogre", "link": "https://stackoverflow.com/users/997572/killogre"}, "reply_to_user": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "edited": false, "score": 0, "creation_date": 1425203537, "post_id": 28759051, "comment_id": 45859217, "body": "yes, you will need at least three planes. not that not all planes are walls (e.g. tables). there are methods of analyzing the support of each plane for continuous regions - these may help to disambiguate some results."}, {"owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "edited": false, "score": 0, "creation_date": 1425222056, "post_id": 28759051, "comment_id": 45864484, "body": "Can you explain more how to find the planes with maximal support?"}], "owner": {"reputation": 1610, "user_id": 997572, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ed289e7f54951126dfc011c58a9df6a6?s=128&d=identicon&r=PG", "display_name": "killogre", "link": "https://stackoverflow.com/users/997572/killogre"}, "is_accepted": true, "score": 7, "last_activity_date": 1425248864, "last_edit_date": 1425248864, "creation_date": 1425019361, "answer_id": 28759051, "question_id": 28731442, "link": "https://stackoverflow.com/questions/28731442/detecting-set-of-planes-from-point-cloud/28759051#28759051", "title": "Detecting set of planes from point cloud", "body": "<p>If the point cloud data comes from a depth sensor, then you have a relatively dense sampling of your walls. One thing I found that works well with depth sensors (e.g. Kinect or DepthSense) is a robust version of the RANSAC procedure that @MartinBeckett suggested.\nInstead of picking 3 points at random, pick one point at random, and get the neighboring points in the cloud. There are two ways to do that:</p>\n\n<ol>\n<li>The proper way: use a 3D nearest neighbor query data structure, like a KD-tree, to get all the points within some small distance from your query point.</li>\n<li>The sloppy but faster way: use the pixel grid neighborhood of your randomly selected pixel. This may include points that are far from it in 3D, because they are on a different plane/object, but that's OK, since this pixel will not get much support from the data.</li>\n</ol>\n\n<p>The next step is to generate a plane equation from that group of 3D points. You can use PCA on their 3D coordinates to get the two most significant eigenvectors, which define the plane surface (the last eigenvector should be the normal).</p>\n\n<p>From there, the RANSAC algorithm proceeds as usual: check how many other points in the data are close to that plane, and find the plane(s) with maximal support. I found it better to find the largest support plane, remove the supporting 3D points, and run the algorithm again to find other 'smaller' planes. This way you may be able to get all the walls in your room.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>To clarify the above: the support of a hypothesized plane is the set of all 3D points whose distance from that plane is at most some threshold (e.g. 10 cm, should depend on the depth sensor's measurement error model).\nAfter each run of the RANSAC algorithm, the plane that had the largest support is chosen. All the points supporting that plane may be used to refine the plane equation (this is more robust than just using the neighboring points) by performing PCA/linear regression on the support set.</p>\n\n<p>In order to proceed and find other planes, the support of the previous iteration should be removed from the 3D point set, so that remaining points lie on other planes. This may be repeated as long as there are enough points and best plane fit error is not too large. \nIn your case (looking for a corner), you need at least 3 perpendicular planes. If you find two planes with large support which are roughly parallel, then they may be the floor and some counter, or two parallel walls. Either the room has no visible corner, or you need to keep looking for a perpendicular plane with smaller support.</p>\n"}, {"owner": {"reputation": 401, "user_id": 3179520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d509d364b7ad95cce6d1dcf35d0350a?s=128&d=identicon&r=PG&f=1", "display_name": "Tolga Birdal", "link": "https://stackoverflow.com/users/3179520/tolga-birdal"}, "is_accepted": false, "score": 1, "last_activity_date": 1483997454, "last_edit_date": 1495542257, "creation_date": 1483993610, "answer_id": 41556350, "question_id": 28731442, "link": "https://stackoverflow.com/questions/28731442/detecting-set-of-planes-from-point-cloud/41556350#41556350", "title": "Detecting set of planes from point cloud", "body": "<p>I would first like to point out </p>\n\n<p>Even though this is an old post, I would like to present a complementary approach, similar to Hough Voting, to find all corner locations, composed of plane intersections, jointly:</p>\n\n<ol>\n<li>Uniformly sample the space. Ensure that there is at least a distance $d$ between the points (e.g. you can even do this is CloudCompare with a 'space' subsampling)</li>\n<li>Compute the point cloud normals at these points.</li>\n<li>Randomly pick 3 points from this downsampled cloud.</li>\n<li>Each oriented point (point+plane) defines a hypothetical plane. Therefore, each 3 point picked define 3 planes. Those planes, if not parallel and not intersecting at a line, always intersect at a single point.</li>\n<li>Create a voting space to describe the corner: The intersection of the 3 planes (the point) might a valid parameterization. So our parameter space has 3 free parameters.</li>\n<li>For each 3 points cast a vote in the accumulator space to the corner point.</li>\n<li>Go to (2) and repeat until all sampled points are exhausted, or enough iterations are done. This way we'll be casting votes for all possible corner locations.</li>\n<li>Take the local maxima of the accumulator space. Depending on the votes, we'll be selecting the corners from intersection of the largest planes (as they'll receive more votes) to the intersection of small planes. The largest 4 are probably the corners of the room. If not, one could also consider the other local maxima.</li>\n</ol>\n\n<p>Note that the voting space is a quantized 3D space and the corner location will be a rough estimate of the actual one. If desired, one could store the planes intersection at that very location and refine them (with iterative optimization similar to ICP or etc) to get a very fine corner location.</p>\n\n<p>This approach will be quite fast and probably very accurate, given that you could refine the location. I believe it's the best algorithm presented so far. Of course this assumes that we could compute the normals of the point clouds (we can always do that at sample locations with the help of the eigenvectors of the covariance matrix).</p>\n\n<p>Please also look here, where I have put out a list of plane-fitting related questions at stackoverflow:\n<a href=\"https://stackoverflow.com/questions/35726134/3d-plane-fitting-algorithms/41556933#41556933\">3D Plane fitting algorithms</a></p>\n"}], "owner": {"reputation": 1932, "user_id": 375666, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d33159b0c328adefa8e7cd2d6d814337?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmed Saleh", "link": "https://stackoverflow.com/users/375666/ahmed-saleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9734, "favorite_count": 3, "accepted_answer_id": 28759051, "answer_count": 3, "score": 5, "last_activity_date": 1483997454, "creation_date": 1424905586, "question_id": 28731442, "link": "https://stackoverflow.com/questions/28731442/detecting-set-of-planes-from-point-cloud", "title": "Detecting set of planes from point cloud", "body": "<p>I have a set of point cloud, and I would like to test if there is a corner in a 3D room. So I would like to discuss my approach and if there is a better approach or not in terms of speed, because I want to test it on mobile phones. </p>\n\n<p>I will try to use hough tranform to detect lines, then I will try to see if there are three lines that are intersecting and they make a two plane that are intersecting too. </p>\n"}, {"tags": ["c++", "data-structures", "queue"], "answers": [{"owner": {"reputation": 31, "user_id": 4058387, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1w8SD99qHCY/AAAAAAAAAAI/AAAAAAAAHeo/PkBoNkBQthU/photo.jpg?sz=128", "display_name": "Kajgies", "link": "https://stackoverflow.com/users/4058387/kajgies"}, "is_accepted": false, "score": 0, "last_activity_date": 1424915429, "creation_date": 1424915429, "answer_id": 28733125, "question_id": 28731266, "link": "https://stackoverflow.com/questions/28731266/random-queue-simulator-customer-arrival-time/28733125#28733125", "title": "Random Queue Simulator Customer Arrival Time", "body": "<p>You can solve both problems by instead of checking per minute, check per less than a minute. If you just divide your chance by 60 and than check every second for example it would be way more accurate.</p>\n\n<p>Getting a 100% accurate answer for such a problem is impossible so try looking for a good-enough solution.</p>\n\n<p>Good luck</p>\n"}, {"owner": {"reputation": 1, "user_id": 4607849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270ccd8448ea64cf7c7f05b6b70d8430?s=128&d=identicon&r=PG&f=1", "display_name": "qparasla", "link": "https://stackoverflow.com/users/4607849/qparasla"}, "is_accepted": true, "score": 0, "last_activity_date": 1425514730, "creation_date": 1425514730, "answer_id": 28867736, "question_id": 28731266, "link": "https://stackoverflow.com/questions/28731266/random-queue-simulator-customer-arrival-time/28867736#28867736", "title": "Random Queue Simulator Customer Arrival Time", "body": "<p>I found a solution to my problem so just want to share it.</p>\n\n<pre><code>int ModelArrivalTimeGenerator::generateTime(double rate)\n{\n    std::random_device rd;\n    std::mt19937_64 mt(rd());\n    std::uniform_real_distribution&lt;double&gt; distribution(0, 1);\n\n    return floor(-1/rate * log(distribution(mt)));\n}\n</code></pre>\n\n<p>Suppose if you want to run simulation using arrival rate of 40 of whatever per hour. Pass in (40.00/60.00) as the parameter. I did some test and found out its pretty good at random arrival average. </p>\n\n<p>This is a code you can use to check what is the avg if you run it n number of time.</p>\n\n<pre><code>double lamda = (15.00/60.00);   //(15customer/60min) gets you Arrival Rate per minute\n\n    std::random_device rd;\n    std::mt19937_64 mt(rd());\n    std::uniform_real_distribution&lt;double&gt; distribution(0, 1);\n\n    int CustomerArrivedAtTime = 0;\n\n    int runThisManyTime = 20;\n    int arrivalNum =0; \n\n    for(int i=0; i&lt;runThisManyTime; i++)\n    {\n        while(CustomerArrivedAtTime &lt; 60)\n        {\n            arrivalNum++;\n            CustomerArrivedAtTime +=  floor(-1/lamda * log(distribution(mt)));\n            cout &lt;&lt; \"Arrival#\" &lt;&lt; arrivalNum &lt;&lt; \" \" &lt;&lt; CustomerArrivedAtTime &lt;&lt; \"\\n\";\n        }\n\n        CustomerArrivedAtTime = 0;  // this is complete of first run 60 min is past in sim time so we reset for other run\n    }\n\n    cout &lt;&lt; \"\\n\\n AVG: \" &lt;&lt; arrivalNum/runThisManyTime;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4607849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/270ccd8448ea64cf7c7f05b6b70d8430?s=128&d=identicon&r=PG&f=1", "display_name": "qparasla", "link": "https://stackoverflow.com/users/4607849/qparasla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 970, "favorite_count": 0, "accepted_answer_id": 28867736, "answer_count": 2, "score": 0, "last_activity_date": 1446977228, "creation_date": 1424904944, "last_edit_date": 1446977228, "question_id": 28731266, "link": "https://stackoverflow.com/questions/28731266/random-queue-simulator-customer-arrival-time", "title": "Random Queue Simulator Customer Arrival Time", "body": "<p>I am having problem with code in generating random customer arrival. So the problem is suppose a store is expected to get 15 customers per hour. (that's .25 customer a min) So my logic here is 25% chance of getting a customer that minute of time.</p>\n\n<p>Pseudocode:</p>\n\n<pre><code>generate a random float number 0.0 - 1.0 &lt;= .25\n     Add customer to queue\n</code></pre>\n\n<p>My first problem here is suppose a store expected 60 customer a hr so that's (1 customer a min) looking at my code above 0.0 - 1.0 will always be &lt;= to 1 thus 60 customer WILL be added to queue 100% of time. </p>\n\n<p>Second problem is suppose store expected 15 customer a hr there are chances they can get 1 or more customer at that min. How can i implement that on my code. </p>\n\n<p>I have been looking into queue theory (Poisson, exponential distribution) for past 2 days but have not made a progress in finding my solution. </p>\n"}, {"tags": ["c#", "c++", "wcf"], "answers": [{"owner": {"reputation": 1463, "user_id": 1548997, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lBhvJ.png?s=128&g=1", "display_name": "pixelbadger", "link": "https://stackoverflow.com/users/1548997/pixelbadger"}, "is_accepted": false, "score": 0, "last_activity_date": 1424905751, "last_edit_date": 1424905751, "creation_date": 1424905442, "answer_id": 28731398, "question_id": 28731245, "link": "https://stackoverflow.com/questions/28731245/how-to-raise-events-from-c-code-and-call-handlers-in-c-code-on-another-proces/28731398#28731398", "title": "how to raise events from C++ code and call handlers in C# code on another process?", "body": "<p>There are a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa365574%28v=vs.85%29.aspx\" rel=\"nofollow\">number of IPC mechanisms</a> to choose from in Windows. </p>\n\n<p>Having evaluated a number of them, its really a case of deciding which one has the least disadvantages for your use case. I've used named pipes for a C# to C++ messaging system, and I'm still not sure I made the right choice.</p>\n\n<p>That said, if you are <em>just</em> looking at signalling events (and don't need to include state) a <a href=\"https://msdn.microsoft.com/en-us/library/System.Threading.Mutex(v=vs.100).aspx\" rel=\"nofollow\">shared mutex</a> might be a lightweight alternative.</p>\n\n<p>EDIT: I meant to say that if you do choose named pipes you'll need to use a custom solution. Using WCF would mean reverse engineering the WCF messaging format and reimplementing it in C++.</p>\n"}, {"comments": [{"owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "edited": false, "score": 0, "creation_date": 1424909405, "post_id": 28731456, "comment_id": 45750309, "body": "are COM objects a windows only thing? they seem to be language independent, so i would assume they are OS independent. Is that the case?"}, {"owner": {"reputation": 13408, "user_id": 585968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d0399ab165e17f668b2cdd1a5c1dc0?s=128&d=identicon&r=PG&f=1", "display_name": "MickyD", "link": "https://stackoverflow.com/users/585968/mickyd"}, "reply_to_user": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "edited": false, "score": 0, "creation_date": 1424910117, "post_id": 28731456, "comment_id": 45750512, "body": "Windows only as far as I&#39;m aware.  Yes, COM is a binary protocol and is language-independent but the underlying COM system is essentially Windows-only.  <a href=\"https://www.microsoft.com/com/default.mspx\" rel=\"nofollow noreferrer\">Tell me more</a>"}], "owner": {"reputation": 13408, "user_id": 585968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d0399ab165e17f668b2cdd1a5c1dc0?s=128&d=identicon&r=PG&f=1", "display_name": "MickyD", "link": "https://stackoverflow.com/users/585968/mickyd"}, "is_accepted": false, "score": -1, "last_activity_date": 1424909070, "last_edit_date": 1495542512, "creation_date": 1424905621, "answer_id": 28731456, "question_id": 28731245, "link": "https://stackoverflow.com/questions/28731245/how-to-raise-events-from-c-code-and-call-handlers-in-c-code-on-another-proces/28731456#28731456", "title": "how to raise events from C++ code and call handlers in C# code on another process?", "body": "<h2>Named pipes</h2>\n\n<p>Going by your question title</p>\n\n<blockquote>\n  <p>how to raise events from C++ code and <strong>call handlers in C# code on another process</strong>?</p>\n</blockquote>\n\n<p>...so I'm assuming you're wanting a subscription model of sorts that when the event is fired automatically calls your handlers.</p>\n\n<p>Your first body:</p>\n\n<blockquote>\n  <p>I have been trying to do some reading on how to communicate best, and it appears that the way to communicate between non-related processes running code in different languages is usually through the use of \"named pipes.\"</p>\n</blockquote>\n\n<p>...well it can be done over a named pipe transport but you'll need to convert raw incoming data and pass that through a routing mechanism to actually fire the events.  Named pipes is just a low-level IPC sending raw data. It's not a subscription model.  <strong>It won't call into and invoke handlers in your code</strong> in the same way as shared memory won't.  So if you are looking to subscribe to something in c++ over raw named pipes and have it call into your c# handler it requires more work on your part compared to COM (below).</p>\n\n<blockquote>\n  <p>However, in C++, should i just directly create a named pipe or is there some framework/library that I should use to create named pipes?</p>\n</blockquote>\n\n<p>In c++ it's relatively easy to create a named pipe yourself.  In C# you can use <a href=\"https://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeclientstream(v=vs.110).aspx\" rel=\"nofollow noreferrer\">NamedPipeClientStream</a></p>\n\n<h2>COM</h2>\n\n<blockquote>\n  <p>Also, what alternative options do I have to create events in C++ that a C# application can hear?</p>\n</blockquote>\n\n<p>Again, keeping to your subscription and \"call handler\" needs I would recommend COM over other IPC technologies.</p>\n\n<p>In c++ you can create a COM object that will fire <code>COM events</code> that can be received in the same/another process.  </p>\n\n<p>MSDN defines COM as:</p>\n\n<blockquote>\n  <p>The Microsoft Component Object Model (COM) is a platform-independent, distributed, object-oriented system for creating binary software components that can interact.</p>\n</blockquote>\n\n<p>In c# you can subscribe to these events and be notified when they occur.</p>\n\n<p>It is generally more efficient to use named pipes or COM for local machine IPC than WCF due to the overhead imposed by the latter - particularly the way data is encoded.</p>\n\n<h2>Tell me more</h2>\n\n<p>For more comparisons of IPC <a href=\"https://stackoverflow.com/questions/28335037/object-sharing-between-applications\">see my answer to this SO question here</a></p>\n"}], "owner": {"reputation": 2967, "user_id": 2324576, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/993e0f8ecc3e4d85f2990b6a6fe5b0a1?s=128&d=identicon&r=PG", "display_name": "James Joshua Street", "link": "https://stackoverflow.com/users/2324576/james-joshua-street"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 465, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424909070, "creation_date": 1424904839, "question_id": 28731245, "link": "https://stackoverflow.com/questions/28731245/how-to-raise-events-from-c-code-and-call-handlers-in-c-code-on-another-proces", "title": "how to raise events from C++ code and call handlers in C# code on another process?", "body": "<p>I have been trying to do some reading on how to communicate best, and it appears that the way to communicate between non-related processes running code in different languages is usually through the use of \"named pipes.\"</p>\n\n<p>it seems like in C# you would normally use WCF while setting some bindings to make use of named pipes.  However, in C++, should i just directly create a named pipe or is there some framework/library that I should use to create named pipes?</p>\n\n<p>Also, what alternative options do I have to create events in C++ that a C# application can hear?</p>\n"}, {"tags": ["c++", "post", "ssl", "https", "poco-libraries"], "comments": [{"owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1424904707, "post_id": 28731111, "comment_id": 45748603, "body": "Use Fiddler to inspect the response. Possibly the Content-Length header is incorrect or a cookie is malformed."}, {"owner": {"reputation": 2671, "user_id": 1099237, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1efff11270d3da94fe6be7d745c52da6?s=128&d=identicon&r=PG", "display_name": "omatai", "link": "https://stackoverflow.com/users/1099237/omatai"}, "edited": false, "score": 0, "creation_date": 1456267397, "post_id": 28731111, "comment_id": 58865760, "body": "Did you find a solution? If so could you post it? If not... it seems weird that you print the response before you get the response... despite what your code comments say :-)"}], "answers": [{"owner": {"reputation": 114, "user_id": 3288397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8d5523aa619966b3a29f760630ac8eb?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Legris", "link": "https://stackoverflow.com/users/3288397/thomas-legris"}, "is_accepted": false, "score": 0, "last_activity_date": 1462456367, "last_edit_date": 1462456367, "creation_date": 1462456057, "answer_id": 37052329, "question_id": 28731111, "link": "https://stackoverflow.com/questions/28731111/poco-json-post-method-returns-results-but-gives-i-o-exception-and-ends-program/37052329#37052329", "title": "POCO json POST_METHOD returns results but gives I/O exception and ends program", "body": "<p>The exception comes from the destructor of Poco::Net::HTTPSClientSession,</p>\n\n<p>This is a known bug fixed in POCO release 1.4.2.</p>\n\n<p>source: <a href=\"http://pocoproject.org/docs/99100-ReleaseNotes.html\" rel=\"nofollow\">http://pocoproject.org/docs/99100-ReleaseNotes.html</a></p>\n\n<p>If you cannot upgrade, you should be able to get rid of the exception by adding a specific catch for it.</p>\n"}], "owner": {"reputation": 225, "user_id": 2452412, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/798f792db7482e224388a59acea80df1?s=128&d=identicon&r=PG", "display_name": "Victor Elizondo", "link": "https://stackoverflow.com/users/2452412/victor-elizondo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1244, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462456367, "creation_date": 1424904285, "last_edit_date": 1447164440, "question_id": 28731111, "link": "https://stackoverflow.com/questions/28731111/poco-json-post-method-returns-results-but-gives-i-o-exception-and-ends-program", "title": "POCO json POST_METHOD returns results but gives I/O exception and ends program", "body": "<p>Hi im havng a problem with poco under linux, im making a https json post to a webserver and im getting the response as i expected.\nThe problem is that i get an error after the response is printed and it ends the execution of my program.</p>\n\n<p>Here is what i get on console:</p>\n\n<pre><code>200 OK\n\n\"{\\\"test_results\\\": [\"result1\", \"result2\", \"result3\", \"result4\"]}\"\n\nterminate called after throwing an instance of 'Poco::IOException'  what():  I/O error\n</code></pre>\n\n<p>Here is the code that make the above result to be printed:</p>\n\n<pre><code>int posTry(){\ntry\n  {\n    // prepare session\n    Poco::Net::Context::Ptr context = new Poco::Net::Context(Poco::Net::Context::CLIENT_USE, \"\", \"\", \"\", Poco::Net::Context::VERIFY_NONE, 9, false, \"ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH\");\n\n    Poco::URI uri(\"https://someURL/somePATH\");\n    Poco::Net::HTTPSClientSession session(uri.getHost(), uri.getPort(), context);\n\n    // prepare path\n    std::string path(uri.getPathAndQuery());\n    if (path.empty()) path = \"/\";\n\n    // send request\n    std::string test = \"{Some json code to get results that is already working}\";\n\n    Poco::Net::HTTPRequest req(Poco::Net::HTTPRequest::HTTP_POST, path, Poco::Net::HTTPMessage::HTTP_1_1);\n    req.setContentType(\"application/json\");\n    req.setKeepAlive(true);\n    req.setContentLength( test.length() );\n\n    session.sendRequest(req) &lt;&lt; test;\n\n    // get response\n    Poco::Net::HTTPResponse res;\n    std::cout &lt;&lt; res.getStatus() &lt;&lt; \" \" &lt;&lt; res.getReason() &lt;&lt; std::endl;\n\n    // print response\n    std::istream &amp;is = session.receiveResponse(res);\n    Poco::StreamCopier::copyStream(is, std::cout);\n    std::vector&lt;Poco::Net::HTTPCookie&gt; cookies;\n    res.getCookies( cookies );\n  }\ncatch( const Poco::Exception&amp; e )\n    {\n        std::cerr &lt;&lt; e.displayText() &lt;&lt; std::endl;\n    }\n  catch (...)\n    {\n      std::cout &lt;&lt; \"error\";\n      return -1;\n    }\n\n  return 0;\n}\n</code></pre>\n\n<p>I don't know what is this error about and I can't even catch the error in (...) and make the program continue. Can someone help me?</p>\n"}, {"tags": ["c++", "opengl", "graphics", "sdl-2", "glew"], "comments": [{"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 1, "creation_date": 1424905001, "post_id": 28731078, "comment_id": 45748733, "body": "How are you determining said values? In OpenGL 3.0, it is not valid to query <code>GL_RED_BITS</code>, <code>GL_DEPTH_BITS</code>, etc. on the default framebuffer. A compatibility profile should deliver consistent results, but core profiles have different behavior."}, {"owner": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 1, "creation_date": 1424906468, "post_id": 28731078, "comment_id": 45749334, "body": "You don&#39;t seem to call <code>glClear()</code> anywhere.  <code>glClearColor()</code> just latches some state, it doesn&#39;t actually clear any buffers."}, {"owner": {"reputation": 442, "user_id": 2620007, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8cNJH.png?s=128&g=1", "display_name": "Cave Dweller", "link": "https://stackoverflow.com/users/2620007/cave-dweller"}, "reply_to_user": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "edited": false, "score": 0, "creation_date": 1424967542, "post_id": 28731078, "comment_id": 45777078, "body": "@AndonM.Coleman I&#39;m using SDL&#39;s built-in function <code>SDL_GL_GetAttribute</code> which returns the values that SDL uses to create the context, not the actual context attributes (as I understand it)."}, {"owner": {"reputation": 442, "user_id": 2620007, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8cNJH.png?s=128&g=1", "display_name": "Cave Dweller", "link": "https://stackoverflow.com/users/2620007/cave-dweller"}, "reply_to_user": {"reputation": 47449, "user_id": 44729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tyWaU.png?s=128&g=1", "display_name": "genpfault", "link": "https://stackoverflow.com/users/44729/genpfault"}, "edited": false, "score": 0, "creation_date": 1424967858, "post_id": 28731078, "comment_id": 45777274, "body": "@genpfault I was worrying more about the 0 values from the <code>SDL_GL_GetAttribute</code> calls, and completely skipped over that. That does solve the issue of course for the 2.1 context request that allows me to set the values for the bit depths, and also oddly solves the issue for a 4.2 context, even though SDL still reports the zero-bit buffer depths."}], "answers": [{"comments": [{"owner": {"reputation": 38487, "user_id": 2327517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Bulc.jpg?s=128&g=1", "display_name": "derhass", "link": "https://stackoverflow.com/users/2327517/derhass"}, "edited": false, "score": 1, "creation_date": 1424905501, "post_id": 28731376, "comment_id": 45748934, "body": "The depth buffer precision has nothing to do with the color channels. You might confuse with with the combined depth/stenctil buffer, which typically provides 24 bit depth and 8 bit stencil."}], "owner": {"reputation": 132, "user_id": 3826786, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aeda59cff22e7f5e968133ea32ebcc73?s=128&d=identicon&r=PG&f=1", "display_name": "vaati", "link": "https://stackoverflow.com/users/3826786/vaati"}, "is_accepted": false, "score": -3, "last_activity_date": 1424905367, "creation_date": 1424905367, "answer_id": 28731376, "question_id": 28731078, "link": "https://stackoverflow.com/questions/28731078/sdl2-opengl-4-2-context-with-0-color-bits-and-0-depth-bits/28731376#28731376", "title": "SDL2 OpenGL 4.2 context with 0 color bits and 0 depth bits", "body": "<p>If not fail me memory, SDL_GL_DEPTH_SIZE has to be the sum of all color channels:</p>\n\n<p>using four color channels:</p>\n\n<p><code>SDL_GL_SetAttribute (SDL_GL_DEPTH_SIZE, 32);</code></p>\n\n<p>If you were using 3 color channels would then:</p>\n\n<p><code>SDL_GL_SetAttribute (SDL_GL_DEPTH_SIZE, 24);</code></p>\n\n<p>Already had some problems with it, this might be the problem.\nSorry for my english.</p>\n"}, {"owner": {"reputation": 39713, "user_id": 2423205, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EX7y2.png?s=128&g=1", "display_name": "Andon M. Coleman", "link": "https://stackoverflow.com/users/2423205/andon-m-coleman"}, "is_accepted": true, "score": 2, "last_activity_date": 1424984246, "last_edit_date": 1592644375, "creation_date": 1424983125, "answer_id": 28752295, "question_id": 28731078, "link": "https://stackoverflow.com/questions/28731078/sdl2-opengl-4-2-context-with-0-color-bits-and-0-depth-bits/28752295#28752295", "title": "SDL2 OpenGL 4.2 context with 0 color bits and 0 depth bits", "body": "<blockquote>\n<p>I'm using SDL's built-in function <code>SDL_GL_GetAttribute</code> which returns the values that SDL uses to create the context, not the actual context attributes (as I understand it).</p>\n</blockquote>\n<p>This is incorrect, I took a look at the SDL implementation of <code>SDL_GL_GetAttribute (...)</code> (see <a href=\"https://github.com/zielmicha/SDL2/blob/master/src/video/SDL_video.c\" rel=\"nofollow noreferrer\"><code>src/video/SDL_video.c</code></a>) and it does what I described. You cannot query the values on a core profile context because they are not defined for the default framebuffer.</p>\n<h3>Here is where the problem comes from:</h3>\n<pre><code>int\nSDL_GL_GetAttribute(SDL_GLattr attr, int *value)\n{\n  // ...\n\n  switch (attr) {\n  case SDL_GL_RED_SIZE:\n    attrib = GL_RED_BITS;\n    break;\n  case SDL_GL_BLUE_SIZE:\n    attrib = GL_BLUE_BITS;\n    break;\n  case SDL_GL_GREEN_SIZE:\n    attrib = GL_GREEN_BITS;\n    break;\n  case SDL_GL_ALPHA_SIZE:\n    attrib = GL_ALPHA_BITS;\n    break;\n  }\n\n  // ...\n\n  glGetIntegervFunc(attrib, (GLint *) value);\n  error = glGetErrorFunc();\n}\n</code></pre>\n<p>That code actually generates a <code>GL_INVALID_ENUM</code> error on a core profile, and the return value of <code>SDL_GL_GetAttribute (...)</code> should be non-zero as a result.</p>\n<p>If you must get meaningful values from <code>SDL_GL_GetAttribute (...)</code> for bit depths, then that means you must use a compatibility profile. SDL2 does not extract this information from the pixel format it selected (smarter frameworks like GLFW do this), but it naively tries to query it from GL.</p>\n"}], "owner": {"reputation": 442, "user_id": 2620007, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8cNJH.png?s=128&g=1", "display_name": "Cave Dweller", "link": "https://stackoverflow.com/users/2620007/cave-dweller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 981, "favorite_count": 0, "accepted_answer_id": 28752295, "answer_count": 2, "score": 0, "last_activity_date": 1424984246, "creation_date": 1424904180, "question_id": 28731078, "link": "https://stackoverflow.com/questions/28731078/sdl2-opengl-4-2-context-with-0-color-bits-and-0-depth-bits", "title": "SDL2 OpenGL 4.2 context with 0 color bits and 0 depth bits", "body": "<p>I've been trying to start a new SDL + GLEW + OpenGL project, and the setup has been difficult (MinGW-w64-32 on Windows 8 64-bit with an Intel i7-4700MQ CPU and NVidia GTX 745M GPU).</p>\n\n<p>If I set the GL attributes to be used for context creation to use OpenGL version 4.2, the color and depth bit sizes get set to 0. However, if I request a 2.1 context (which is also the default), I can get the requested bit depths (8 bits for each color, 24 bits for depth). In either case, however, glClearColor has no effect (just a black background).</p>\n\n<p>In both cases, the result of a few <code>glGetString</code> calls is the same- a 4.2 context, suggesting SDL's output is far from correct.</p>\n\n<p>The entirety of the code can be found <a href=\"http://pastebin.com/C71uqJ5m\" rel=\"nofollow\">here</a>, it's mostly boilerplate for a larger project for now. The relevant sections would most likely be</p>\n\n<pre><code>if(SDL_Init(SDL_INIT_EVERYTHING) != 0) {\n    std::cerr &lt;&lt; \"Error initializing SDL.\\n\";\n    exit(1);\n}\n\nSDL_GL_SetAttribute(SDL_GL_ACCELERATED_VISUAL, 1);\nSDL_GL_SetAttribute(SDL_GL_CONTEXT_MAJOR_VERSION, 2);\nSDL_GL_SetAttribute(SDL_GL_CONTEXT_MINOR_VERSION, 1);\n//SDL_GL_SetAttribute(SDL_GL_CONTEXT_FLAGS, SDL_GL_CONTEXT_FORWARD_COMPATIBLE_FLAG);\nSDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);\nSDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);\nSDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);\nSDL_GL_SetAttribute(SDL_GL_ALPHA_SIZE, 8);\nSDL_GL_SetAttribute(SDL_GL_DEPTH_SIZE, 24);\nSDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);\n\nSDL_Window* window = SDL_CreateWindow(\"RenderSystem\", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, 640, 480, SDL_WINDOW_OPENGL|SDL_WINDOW_RESIZABLE);\n\nif(!window) {\n    std::cerr &lt;&lt; \"Window creation failed.\\n\";\n    SDL_Quit();\n    exit(2);\n}\n\nSDL_GLContext context = SDL_GL_CreateContext(window);\n\nif(!context) {\n    std::cerr &lt;&lt; \"OpenGL Context creation failed.\\n\";\n    SDL_DestroyWindow(window);\n    SDL_Quit();\n    exit(3);\n}\n\nSDL_GL_MakeCurrent(window, context);\n</code></pre>\n\n<p>and</p>\n\n<pre><code>glClearColor(1.0f, 1.0f, 1.0f, 1.0f);\n\nSDL_Event evt;\nbool run = true;\n\nwhile(run) {\n\n    SDL_PollEvent(&amp;evt);\n\n    switch(evt.type) {\n        case SDL_KEYDOWN:\n            if(evt.key.keysym.sym == SDLK_ESCAPE) {\n                run = false;\n            }\n            break;\n\n        case SDL_QUIT:\n            run = false;\n            break;\n    }\n\n    SDL_GL_SwapWindow(window);\n\n}\n</code></pre>\n"}, {"tags": ["c++", "biicode"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 822662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c133edc2dec995bc74a990ba04538c0f?s=128&d=identicon&r=PG", "display_name": "Miroslav Berani\u010d", "link": "https://stackoverflow.com/users/822662/miroslav-berani%c4%8d"}, "edited": false, "score": 0, "creation_date": 1424959226, "post_id": 28731690, "comment_id": 45771340, "body": "I guess I have to look into CMake more deep. It was interesting to see, that CMake was installed in &quot;local-ish&quot; way, so I have now two versions of CMake on my env (I use Ubuntu 14.04 LTS x64). I thought all libraries are &quot;stored&quot; the same way. As I said, I use Apache Maven day-to-day. I have &quot;install&quot; to publish into local repository and &quot;publish&quot; to publish to remote repository. So a big +1 for your future plans, sounds great."}, {"owner": {"reputation": 3796, "user_id": 3215383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yAGNQ.jpg?s=128&g=1", "display_name": "drodri", "link": "https://stackoverflow.com/users/3215383/drodri"}, "reply_to_user": {"reputation": 23, "user_id": 822662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c133edc2dec995bc74a990ba04538c0f?s=128&d=identicon&r=PG", "display_name": "Miroslav Berani\u010d", "link": "https://stackoverflow.com/users/822662/miroslav-berani%c4%8d"}, "edited": false, "score": 0, "creation_date": 1424967769, "post_id": 28731690, "comment_id": 45777214, "body": "Yes, CMake &gt;3.0 is installed locally, because the mainstream supported version by distros is CMake 2.8, but CMake is already at 3.2. Users requested our installation not to interfere with the system 2.8, so we installed locally and created a /.biicode/cmake_path file that points to it. Similarly, other big libs as OpenCV and Boost are installed also in that location, which is user-wide for all your projects. But most libraries are in fact in source code inside each project, kind of virtualenv, which is very convenient and intuitive to manage different versions, debugging, etc."}], "owner": {"reputation": 3796, "user_id": 3215383, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yAGNQ.jpg?s=128&g=1", "display_name": "drodri", "link": "https://stackoverflow.com/users/3215383/drodri"}, "is_accepted": true, "score": 0, "last_activity_date": 1424906627, "creation_date": 1424906627, "answer_id": 28731690, "question_id": 28731039, "link": "https://stackoverflow.com/questions/28731039/manager-local-repository/28731690#28731690", "title": "Manager local repository", "body": "<p>Right now, projects act as virtualenvs, each project contains and build its dependencies. This is intended for fast evolving libraries. Imagine you have 5 similar projects all depending on the same library A, version 0. While working on one of those projects you can make a modification to A and publish a new version, an API breaking modification. The other 4 projects will continue depending on version 0, and will not break. When you move to those projects you can easily update their dependencies and fix the breakages.</p>\n\n<p>You can share the same library among different projects straight ahead with sym links if working in linux, not working by now in windows. </p>\n\n<p>For very stable, large projects that can be installed system-wide, it could be more convenient to depend on the installed version. CMake allows this very easily via FindXXX(). You can install system wide the binaries with CMake install, or you can even use CMake scripts or biicode python hooks to automatically download and install system wide those libraries. Check, e.g.:<a href=\"http://www.biicode.com/diego/opencvex\" rel=\"nofollow\">http://www.biicode.com/diego/opencvex</a>, OpenCV is managed with a biicode python hook and installed system wide.</p>\n\n<p>At this moment there is no \"local\" publication, and if you want to share that way among projects, yes, you have to go over the biicode cloud servers, simply with \"bii publish\". </p>\n\n<p>However, we are transitioning to open-source. We will probably release first the client code, then we will release a server that could be deployed in-house. Not implemented yet, but a future feature is that this server could act as a proxy to the cloud one, you can publish to the local instance, but read from the cloud one. With a local installation of this server, you will be able to publish locally.</p>\n"}], "owner": {"reputation": 23, "user_id": 822662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c133edc2dec995bc74a990ba04538c0f?s=128&d=identicon&r=PG", "display_name": "Miroslav Berani\u010d", "link": "https://stackoverflow.com/users/822662/miroslav-berani%c4%8d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 28731690, "answer_count": 1, "score": 0, "last_activity_date": 1424906627, "creation_date": 1424903996, "question_id": 28731039, "link": "https://stackoverflow.com/questions/28731039/manager-local-repository", "title": "Manager local repository", "body": "<p>I come from Java world. I was looking for Apache Maven alternative in C++ world. I think I found the correct project. I have few questions and have not managed to find an answer.</p>\n\n<p>Is it possible to manage local repository. Let's say, I work on 5 similar but different projects and this project share mostly the same dependencies. Will each project have it's own dependencies stored inside each project or is there a \"system\" wide (per user) local repository where dependencies are stored?</p>\n\n<p>Is it possible to \"publish\" only to local folder so other project can \"see\" dependent block or it has to go over bii internet repository?</p>\n\n<p>Or am I wrong - about how bii works.</p>\n\n<p>Looks nice project. Keep up the good work.</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424904060, "post_id": 28731017, "comment_id": 45748273, "body": "<code>malloc_size</code> may be useful. but you really just need <code>std::vector</code>"}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1424904108, "post_id": 28731017, "comment_id": 45748298, "body": "Why do you need dynamic allocation for array with statically defined size? I think that <code>std::array</code> is better for your case (or <code>std::vector</code> for really dynamic arrays)."}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1424904203, "post_id": 28731017, "comment_id": 45748349, "body": "<code>std::unique_ptr&lt;T[]&gt;</code> is really more of a last resort if you can&#39;t use a vector."}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1424904204, "post_id": 28731017, "comment_id": 45748351, "body": "@myaut it&#39;s not statically defined."}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1424904269, "post_id": 28731017, "comment_id": 45748391, "body": "@chris I could use a vector, but it would be misleading to the reader because the size never changes, but is only known at runtime. <code>std::vector</code> would certainly do the job though, but I&#39;m reluctant to use it because I want the intent to be as clear as possible. Also, the size only needs to be known for debug asserts, so using a different container just so I can run asserts isn&#39;t great practice."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1424904484, "post_id": 28731017, "comment_id": 45748492, "body": "@quant for such cases C++14 introduced <code>std::dynarray</code> but it seems that it was excluded from final version of standard."}, {"owner": {"reputation": 54116, "user_id": 105672, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd05c493e7c2e241e814b66a9bf3d826?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/105672/pmr"}, "edited": false, "score": 1, "creation_date": 1424904570, "post_id": 28731017, "comment_id": 45748536, "body": "@quant If I were your reader I would think: Why the heck did he use that contraption instead of <code>std::vector</code>? <code>smart_ptr&lt;T[]&gt;</code> is really more of a bad idea than anything else. Even the <code>boost::shared_array</code> documentation states that <code>shared_ptr&lt;vector&gt;</code> is a worthy alternative."}, {"owner": {"reputation": 54116, "user_id": 105672, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd05c493e7c2e241e814b66a9bf3d826?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/105672/pmr"}, "reply_to_user": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 1, "creation_date": 1424904676, "post_id": 28731017, "comment_id": 45748583, "body": "@myaut <code>dynarray</code> was invented to bridge the gap to <code>C99&#47;C11</code>. But no one really knows how to really design such a thing and so it got dropped again."}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "reply_to_user": {"reputation": 54116, "user_id": 105672, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd05c493e7c2e241e814b66a9bf3d826?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/105672/pmr"}, "edited": false, "score": 0, "creation_date": 1424904762, "post_id": 28731017, "comment_id": 45748632, "body": "@pmr it&#39;s a specific implementation for a specific use case and it&#39;s in the standard. It provides clarity of intent not to modify the container, so in this case <i>less is more</i>. Why would I forego clarity for the sake of using a more robust container when I don&#39;t need its features? I don&#39;t think your argument makes sense."}, {"owner": {"reputation": 10078, "user_id": 2709018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/p98Vl.png?s=128&g=1", "display_name": "myaut", "link": "https://stackoverflow.com/users/2709018/myaut"}, "edited": false, "score": 0, "creation_date": 1424904950, "post_id": 28731017, "comment_id": 45748712, "body": "@quant main problem with your approach is that you mixing C-style arrays (which lose size information) with C++11 smart pointers. Mixing C++ subsets is bad. Also deleting array will require <code>delete[]</code> so you will need to define custom deleter for unique pointer."}, {"owner": {"reputation": 54116, "user_id": 105672, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd05c493e7c2e241e814b66a9bf3d826?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/105672/pmr"}, "edited": false, "score": 0, "creation_date": 1424905019, "post_id": 28731017, "comment_id": 45748739, "body": "@quant I don&#39;t think there is much arguing when talking about readability and you probably know your audience better than me. 1) there is no use case for <code>smart_ptr&lt;T[]&gt;</code> that is not covered by <code>vector</code>, 2) just because it is in the standard means nothing (<code>auto_ptr</code>, <code>valarray</code>), 3) like I said: I don&#39;t think this adds clarity, it takes it away. And you obviously already have a case where you require a bell and whistle: getting the size."}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "edited": false, "score": 0, "creation_date": 1424905050, "post_id": 28731017, "comment_id": 45748751, "body": "@maut <i>you will need to define custom deleter for unique pointer</i> - this is incorrect, take a look at <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr#Array_version.2C_unique_ptr.3CT.5B.5D.3E\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/&hellip;</a>"}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "reply_to_user": {"reputation": 54116, "user_id": 105672, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd05c493e7c2e241e814b66a9bf3d826?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/105672/pmr"}, "edited": false, "score": 0, "creation_date": 1424905152, "post_id": 28731017, "comment_id": 45748795, "body": "@pmr there is also no use case for <code>std::unique_ptr</code> that is not covered by <code>std::shared_ptr</code>..."}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "reply_to_user": {"reputation": 54116, "user_id": 105672, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd05c493e7c2e241e814b66a9bf3d826?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/105672/pmr"}, "edited": false, "score": 0, "creation_date": 1424905302, "post_id": 28731017, "comment_id": 45748850, "body": "@pmr regarding the other points. I only need the <code>size</code> method for debug asserts, so I don&#39;t want to change container on that basis alone, and you&#39;re right about the standard not always being ideal of course."}, {"owner": {"reputation": 54116, "user_id": 105672, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd05c493e7c2e241e814b66a9bf3d826?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/105672/pmr"}, "edited": false, "score": 2, "creation_date": 1424905475, "post_id": 28731017, "comment_id": 45748922, "body": "@quant Please. You are smart. You know this is not true. We need a smart pointer that does not come with the cost of thread-safe reference counting. So are you going to drop the debug assertions because you don&#39;t want to use <code>vector</code>? That would be really odd. I don&#39;t think we should continue this discussion here and I think I have made my point."}, {"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "reply_to_user": {"reputation": 54116, "user_id": 105672, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cd05c493e7c2e241e814b66a9bf3d826?s=128&d=identicon&r=PG", "display_name": "pmr", "link": "https://stackoverflow.com/users/105672/pmr"}, "edited": false, "score": 0, "creation_date": 1424906677, "post_id": 28731017, "comment_id": 45749428, "body": "@pmr Yeah I agree on all points. I changed it to a vector."}], "answers": [{"comments": [{"owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "edited": false, "score": 0, "creation_date": 1424904415, "post_id": 28731063, "comment_id": 45748460, "body": "Ok, thanks, I was hoping something along the lines of <code>sizeof(arr)</code> might work..."}], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 6, "last_activity_date": 1424904103, "creation_date": 1424904103, "answer_id": 28731063, "question_id": 28731017, "link": "https://stackoverflow.com/questions/28731017/how-can-i-retrieve-the-size-of-a-smart-pointer-array-e-g-stdunique-ptrint/28731063#28731063", "title": "How can I retrieve the size of a smart pointer array? (e..g std::unique_ptr&lt;int[]&gt;)", "body": "<p>With both <code>new[]</code>/<code>delete[]</code> and <code>malloc</code>/<code>free</code>, the size is indeed stored somewhere, but there is no standardized way to access that information. </p>\n"}], "owner": {"reputation": 17406, "user_id": 1613983, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/lAhj3.png?s=128&g=1", "display_name": "quant", "link": "https://stackoverflow.com/users/1613983/quant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1739, "favorite_count": 0, "accepted_answer_id": 28731063, "answer_count": 1, "score": 4, "last_activity_date": 1424904103, "creation_date": 1424903892, "last_edit_date": 1495542263, "question_id": 28731017, "link": "https://stackoverflow.com/questions/28731017/how-can-i-retrieve-the-size-of-a-smart-pointer-array-e-g-stdunique-ptrint", "title": "How can I retrieve the size of a smart pointer array? (e..g std::unique_ptr&lt;int[]&gt;)", "body": "<p>Heap-allocated c arrays don't retain any size information, as pointed out here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13594935/how-can-i-find-the-size-of-a-dynamically-allocated-array-in-c\">How can i find the size of a dynamically allocated array in C?</a></p>\n\n<p>However, smart pointers in c++11 have the ability to store memory and manage c-arrays with the array versions using the subscript (<code>[]</code>) operator overload:</p>\n\n<pre><code>std::unique_ptr&lt;int[]&gt; arr(new int[val]);\n</code></pre>\n\n<p>When this smart pointer goes out of scope, it presumably deallocates the owned block of memory, so it must store the <em>size</em> of the memory block somewhere.</p>\n\n<p>How can I retrieve the size of the c array allocated on <code>arr</code> in the above example, assuming that <code>val</code> is a runtime variable?</p>\n"}, {"tags": ["c++", "llvm", "llvm-ir"], "comments": [{"owner": {"reputation": 105, "user_id": 4038709, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1892033ad1688333d0ebf9a6fd362907?s=128&d=identicon&r=PG&f=1", "display_name": "Dalia", "link": "https://stackoverflow.com/users/4038709/dalia"}, "reply_to_user": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1424904861, "post_id": 28730781, "comment_id": 45748664, "body": "I couldn&#39;t find a method to access them.):"}, {"owner": {"reputation": 119371, "user_id": 1919155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d7d26642f016f64f37619d209037dff?s=128&d=identicon&r=PG", "display_name": "Mats Petersson", "link": "https://stackoverflow.com/users/1919155/mats-petersson"}, "edited": false, "score": 0, "creation_date": 1424906012, "post_id": 28730781, "comment_id": 45749141, "body": "But some sort of code-attempt would be rather useful..."}], "answers": [{"owner": {"reputation": 105, "user_id": 4038709, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1892033ad1688333d0ebf9a6fd362907?s=128&d=identicon&r=PG&f=1", "display_name": "Dalia", "link": "https://stackoverflow.com/users/4038709/dalia"}, "is_accepted": false, "score": 3, "last_activity_date": 1425681925, "creation_date": 1425681925, "answer_id": 28908975, "question_id": 28730781, "link": "https://stackoverflow.com/questions/28730781/get-lhs-and-rhs-of-icmpinst-and-fcmpinst-in-llvm/28908975#28908975", "title": "get LHS and RHS of ICmpInst and FCmpInst in llvm?", "body": "<p>I could figure it out.</p>\n\n<pre><code>CmpInst* CI= dyn_cast&lt;CmpInst&gt;(&amp;*I);\nValue * LHS = CI-&gt;getOperand(0);\nValue * RHS = CI-&gt;getOperand(1);\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 4038709, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1892033ad1688333d0ebf9a6fd362907?s=128&d=identicon&r=PG&f=1", "display_name": "Dalia", "link": "https://stackoverflow.com/users/4038709/dalia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1425681925, "creation_date": 1424902854, "last_edit_date": 1425681890, "question_id": 28730781, "link": "https://stackoverflow.com/questions/28730781/get-lhs-and-rhs-of-icmpinst-and-fcmpinst-in-llvm", "title": "get LHS and RHS of ICmpInst and FCmpInst in llvm?", "body": "<p>How can I get LHS and RHS of ICmpInst and FCmpInst in llvm?</p>\n\n<p>I need these values of Sign, Code, Value *LHS, Value *RHS, Predicate. To do analysis of CmpInst. I could find all values except LHS, and RHS.\nAny idea..</p>\n"}, {"tags": ["c++", "windows-runtime"], "answers": [{"comments": [{"owner": {"reputation": 1206, "user_id": 4669946, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/681c962635cd1c8e3fd69b53ddb2bb56?s=128&d=identicon&r=PG&f=1", "display_name": "eric frazer", "link": "https://stackoverflow.com/users/4669946/eric-frazer"}, "edited": false, "score": 0, "creation_date": 1519977117, "post_id": 28733651, "comment_id": 85134540, "body": "The  &quot;Enumerate app packages sample&quot; doesn&#39;t compile in VS2017. So it&#39;s not a super helpful part of the answer. But it is interesting."}], "owner": {"reputation": 21144, "user_id": 4068779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0Hsj.png?s=128&g=1", "display_name": "Rob Caplan - MSFT", "link": "https://stackoverflow.com/users/4068779/rob-caplan-msft"}, "is_accepted": true, "score": 11, "last_activity_date": 1424919218, "creation_date": 1424919218, "answer_id": 28733651, "question_id": 28733066, "link": "https://stackoverflow.com/questions/28733066/can-you-write-normal-windows-applications-with-c-cx/28733651#28733651", "title": "Can you write normal Windows applications with C++/CX?", "body": "<p>Yes, you can write desktop apps in C++/Cx and can use some Windows Runtime API (those marked in the documentation and headers as available for desktop apps) in desktop apps. See <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dn554295(v=vs.85).aspx\">Windows Runtime APIs for desktop apps</a>. The <a href=\"https://code.msdn.microsoft.com/windowsapps/Package-Manager-Inventory-ee821079\">Enumerate app packages sample</a> on MSDN demonstrates using C++/Cx to call Windows Runtime API in a desktop app.</p>\n\n<p>The Windows Runtime Xaml classes are not available to desktop apps, but since you can mix-and-match C++ and C++/Cx you can call typical desktop UI API (Win32, MFC, DirectX, etc.) from an app which also uses C++/Cx. </p>\n\n<p>C++/Cx isn't really an alternative to C++/CLI. Other than using some similar syntax they have quite different goals. As you note, C++/Cx is not a managed language and so it cannot be used to call managed code. The primary reason to choose C++/CLI is for interop with managed code. C++/Cx is a good option if you need to call into the Windows Runtime from your desktop app.</p>\n\n<p>The Windows Runtime is available only on Windows 8 and later.</p>\n"}, {"comments": [{"owner": {"reputation": 256, "user_id": 4539631, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c1918caf1e5561bdc218f632e5e99b40?s=128&d=identicon&r=PG&f=1", "display_name": "Noah Roth", "link": "https://stackoverflow.com/users/4539631/noah-roth"}, "edited": false, "score": 0, "creation_date": 1425000957, "post_id": 28751630, "comment_id": 45793312, "body": "&quot;...so you might be able to&quot; doesn&#39;t really answer my question. Thanks for the (emphasized) Wikipedia quote but that wasn&#39;t one of my questions either. I know C++/CX is geared towards WinRT."}, {"owner": {"reputation": 217, "user_id": 4250401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Qdmf.png?s=128&g=1", "display_name": "esoterik", "link": "https://stackoverflow.com/users/4250401/esoterik"}, "reply_to_user": {"reputation": 256, "user_id": 4539631, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c1918caf1e5561bdc218f632e5e99b40?s=128&d=identicon&r=PG&f=1", "display_name": "Noah Roth", "link": "https://stackoverflow.com/users/4539631/noah-roth"}, "edited": false, "score": 0, "creation_date": 1425003180, "post_id": 28751630, "comment_id": 45793845, "body": "@NoahRoth I don&#39;t know how difficult or possible it is to get the MS C++/CX compiler to generate an executable that doesn&#39;t depend on WinRT, If you can then your answer is yes. I have edited the answer to clarify that. Unless by &quot;normal app&quot; you meant a WinRT Desktop app, in that case my answer is probably irrelevant; I assumed &quot;normal&quot; app meant windows program using WinAPI; WinAPI is the basic API that is included, and extended, with every version of windows."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1457010979, "post_id": 28751630, "comment_id": 59217699, "body": "This answer is unbelievably vague, and wrong when it tries to be specific. You can <b>easily</b> consume Windows Runtime components in a Windows Desktop application. It&#39;s just COM after all, that can be used through C++/CX language extensions, WRL code, or even plain C or C++ code."}], "owner": {"reputation": 217, "user_id": 4250401, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6Qdmf.png?s=128&g=1", "display_name": "esoterik", "link": "https://stackoverflow.com/users/4250401/esoterik"}, "is_accepted": false, "score": -2, "last_activity_date": 1425001997, "last_edit_date": 1495540820, "creation_date": 1424980734, "answer_id": 28751630, "question_id": 28733066, "link": "https://stackoverflow.com/questions/28733066/can-you-write-normal-windows-applications-with-c-cx/28751630#28751630", "title": "Can you write normal Windows applications with C++/CX?", "body": "<p>the first line on the wikipedia page for <a href=\"http://en.wikipedia.org/wiki/C%2B%2B/CX\" rel=\"nofollow noreferrer\" title=\"C++/CX\">C++/CX</a> is </p>\n\n<blockquote>\n  <p>C++/CX (component extensions) is a language extension for C++ compilers from Microsoft that enables <strong>C++ programmers to write programs for the new Windows Runtime platform, or WinRT</strong>. <em>(emphasis added)</em></p>\n</blockquote>\n\n<p>So it appears that C++/CX is to WinRT as C++/CLI is to .Net/CLR. I.e C++/CX is for writing windows Apps with WinRT. WinRT is for windows 8 store and metro apps.</p>\n\n<p>You can write regular windows API apps in C++, so you might be able to do the same in C++/CX. But it may not be easy or possible, but since the extensions are specific to WinRT, why would you want to. C++/CLI compiles to CLR bytecode, to be run with the common language runtime. Getting C++/CX to generate an executable that doesn't depend on WinRT, is the crux of the issue.</p>\n\n<p>This <a href=\"https://stackoverflow.com/questions/9574907/is-it-possible-to-build-winrt-applications-on-windows-7\">SO</a> post indicates that yes WinRT is only for Windows 8. (Presumably Windows 10 as well.)</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://programmer.stackexchange.com", "http://programmers.stackexchange.com"], "markdown_extensions": ["Prettify"], "launch_date": 1292524346, "open_beta_date": 1283972400, "closed_beta_date": 1283367600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon@2.png", "twitter_account": "StackSoftEng", "favicon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/apple-touch-icon.png", "audience": "professionals, academics, and students working within the systems development life cycle", "site_url": "https://softwareengineering.stackexchange.com", "api_site_parameter": "softwareengineering", "logo_url": "https://cdn.sstatic.net/Sites/softwareengineering/Img/logo.png", "name": "Software Engineering", "site_type": "main_site"}, "on_date": 1424915005, "question_id": 274491}, "owner": {"reputation": 256, "user_id": 4539631, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c1918caf1e5561bdc218f632e5e99b40?s=128&d=identicon&r=PG&f=1", "display_name": "Noah Roth", "link": "https://stackoverflow.com/users/4539631/noah-roth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3412, "favorite_count": 0, "accepted_answer_id": 28733651, "answer_count": 2, "score": 6, "last_activity_date": 1558091200, "creation_date": 1424902769, "last_edit_date": 1558091200, "question_id": 28733066, "link": "https://stackoverflow.com/questions/28733066/can-you-write-normal-windows-applications-with-c-cx", "title": "Can you write normal Windows applications with C++/CX?", "body": "<p>Or are you restricted to the \"Metro-style\" applications and Windows Store apps?</p>\n\n<p>At first, I thought C++/CX would be a good alternative to C++/CLI as it has some nifty C#-esque keywords ('sealed', 'partial') and it also compiles to native code, rather than using .NET. But reading online, all I can find is information regarding Windows Store apps and Metro-styled applications...</p>\n\n<p>Also, is WinRT for Windows 8 and above only?</p>\n"}, {"tags": ["c++", "boost", "graph"], "answers": [{"comments": [{"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1424956801, "post_id": 28739038, "comment_id": 45769737, "body": "Insightful answer. You have my upvote"}, {"owner": {"reputation": 1142, "user_id": 359353, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7ea5964814a6d0e134998c924e7b547e?s=128&d=identicon&r=PG", "display_name": "Dula", "link": "https://stackoverflow.com/users/359353/dula"}, "edited": false, "score": 0, "creation_date": 1424974835, "post_id": 28739038, "comment_id": 45781593, "body": "Right, I&#39;m using the technique already. But my case is where the graph can be used for weeks, adding and removing large number of nodes. Also during that time it&#39;s serialized to save and re-open. I only try to actually delete the &quot;deleted&quot; nodes right before serializing. I wonder if I can manipulate the serialized string to remove the &quot;deleted&quot; nodes since they have no in or out edges."}], "owner": {"reputation": 663, "user_id": 4306326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cbbf211f30ccc9fb4d285469e50d5a1?s=128&d=identicon&r=PG", "display_name": "geoalgo", "link": "https://stackoverflow.com/users/4306326/geoalgo"}, "is_accepted": false, "score": 3, "last_activity_date": 1424943968, "creation_date": 1424943968, "answer_id": 28739038, "question_id": 28730692, "link": "https://stackoverflow.com/questions/28730692/removing-multiple-vertices-from-boost-graph/28739038#28739038", "title": "Removing multiple vertices from Boost Graph", "body": "<p>If you remove a vertex, you cant avoid to reindex all edges and update your vector. This has a non local cost that is at least linear with the number of vertices and this may indeed be costly. </p>\n\n<p>That being said, one technique you may use is to cache a boolean in every vertex that is initially set to true. Now, to remove a vertex you remove all edges connected to the vertex and you set the vertex boolean to false. That way, the deletion time is only local and you dont have a linear time with the number of vertices. You then need to adapt some operations, for instance to iterate over vertices, you select only those having their boolean set to true.</p>\n\n<p>This technique is quite common and it is used for instance to simplify 3D triangulation (you remove vertex iteratively and you want a local cost to be fast). Compared to listS you can still acess directly to your vertices (vertex handles remain valid after deletion of a vertex).</p>\n"}], "owner": {"reputation": 1142, "user_id": 359353, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7ea5964814a6d0e134998c924e7b547e?s=128&d=identicon&r=PG", "display_name": "Dula", "link": "https://stackoverflow.com/users/359353/dula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 798, "favorite_count": 0, "closed_date": 1424956780, "answer_count": 1, "score": 2, "last_activity_date": 1424943968, "creation_date": 1424902450, "question_id": 28730692, "link": "https://stackoverflow.com/questions/28730692/removing-multiple-vertices-from-boost-graph", "closed_reason": "Duplicate", "title": "Removing multiple vertices from Boost Graph", "body": "<p>How come there is no routine to remove multiple vertices at the same time in the graph? There is only remove_vertex() which is very costly if the vertices are <code>vecS</code>.</p>\n\n<p>In boost/graph/detail/adjacency_list.hpp <code>remove_vertex_dispatch()</code> starting line # 1966 routine, it erases the given node, then re-indexes the edges. Can another routine be added that takes say, the indexes of the vertices to be removed and they're erased in one shot (how? can be discussed) and the re-indexing happens just once?</p>\n\n<p>I understand using listS makes it constant time, but not all algorithms work for listS so that's out of the question.</p>\n"}, {"tags": ["c++", "sockets", "winapi", "network-programming", "iocp"], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "edited": false, "score": 3, "creation_date": 1424903126, "post_id": 28730791, "comment_id": 45747824, "body": "This is not related to my previous question! I am talking about a socket that is associated with a completion port, but which I want to use <code>WSASend()</code> in blocking mode, while using <code>WSARecv()</code> in Overlapped mode."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "edited": false, "score": 1, "creation_date": 1424904204, "post_id": 28730791, "comment_id": 45748350, "body": "So if there is no completion routine/overlapped structure there is no completion packet. Surely this is obvious?."}, {"owner": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "edited": false, "score": 0, "creation_date": 1424904220, "post_id": 28730791, "comment_id": 45748364, "body": "Yes I know, but I thought that the socket has recorded information that it is associated with a completion port."}, {"owner": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "edited": false, "score": 0, "creation_date": 1424904329, "post_id": 28730791, "comment_id": 45748422, "body": "Anyway, I guess that this is not documented."}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "edited": false, "score": 1, "creation_date": 1424904365, "post_id": 28730791, "comment_id": 45748434, "body": "Because there is nothing to document. See the extract that was posted in previous answers."}, {"owner": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "edited": false, "score": 1, "creation_date": 1424904439, "post_id": 28730791, "comment_id": 45748472, "body": "Is there a problem in calling <code>WSASend()</code> in blocking mode while using <code>WSARecv()</code> in overlapped mode?"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "reply_to_user": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "edited": false, "score": 0, "creation_date": 1424904682, "post_id": 28730791, "comment_id": 45748584, "body": "I don&#39;t see why, and there is no documentation to suggest that. But mixing modes is a strange thing to be doing."}, {"owner": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "edited": false, "score": 0, "creation_date": 1424904895, "post_id": 28730791, "comment_id": 45748679, "body": "There is no reason for me to use <code>WSASend()</code> in overlapped mode, it will just complicate things (for example sending of files will be much more complicated to implement)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1424917566, "post_id": 28730791, "comment_id": 45752417, "body": "If you are using a completion port, you should be using <code>WSASend()</code> asynchronously.  If you need a synchronous send without a completion packet, use <code>send()</code> instead."}, {"owner": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1424918366, "post_id": 28730791, "comment_id": 45752607, "body": "@Remy Lebeau What I want is to use a completion port for the receiving and a blocking mode for the sending. So are you telling me that I can do that with <code>send()</code> and <code>WSARecv()</code> at the same time? (Note: I heard that it is not a good idea to mix the WSA functions with the original Winsock functions, as they were not meant to work together)."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "edited": false, "score": 0, "creation_date": 1424919862, "post_id": 28730791, "comment_id": 45752946, "body": "@John: You really should not be mixing methodologies. Either do everything in blocking, or everything in IOCP. Not both.  If you really want the calling thread to wait until <code>WSASend()</code> finishes, use a <code>WSAOVERLAPPED</code> with an event object and no completion routine: &quot;If the lpCompletionRoutine parameter is NULL, the hEvent parameter of lpOverlapped is signaled when the overlapped operation completes if it contains a valid event object handle. An application can use WSAWaitForMultipleEvents or WSAGetOverlappedResult to wait or poll on the event object.&quot;"}], "owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": false, "score": 3, "last_activity_date": 1424904606, "last_edit_date": 1495542169, "creation_date": 1424902884, "answer_id": 28730791, "question_id": 28730666, "link": "https://stackoverflow.com/questions/28730666/does-wsasend-in-blocking-mode-causes-a-notification-packet-to-be-placed-in-the/28730791#28730791", "title": "Does WSASend() in blocking mode causes a notification packet to be placed in the completion port?", "body": "<p>The question is ill-formed. We've been over all this several times in your previous questions, such as <a href=\"https://stackoverflow.com/questions/28706644/how-to-simulate-a-blocking-send-using-wsasend-and-iocp\">here</a>. Either there is no completion routine and no overlapped structure, in which case there is no completion packet either, or there is, in which case you're not in blocking mode at all, you're in asynchronous mode.</p>\n"}, {"comments": [{"owner": {"reputation": 20218, "user_id": 7925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zFiIO.png?s=128&g=1", "display_name": "Len Holgate", "link": "https://stackoverflow.com/users/7925/len-holgate"}, "edited": false, "score": 0, "creation_date": 1425038913, "post_id": 28743124, "comment_id": 45808443, "body": "How can you receive notification if you have not provided a completion routine OR an <code>OVERLAPPED</code> structure. One or the other is REQUIRED to provide notification. So your answer is correct, you will NOT receive a notification."}, {"owner": {"reputation": 20218, "user_id": 7925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zFiIO.png?s=128&g=1", "display_name": "Len Holgate", "link": "https://stackoverflow.com/users/7925/len-holgate"}, "edited": false, "score": 0, "creation_date": 1425039061, "post_id": 28743124, "comment_id": 45808520, "body": "It&#39;s useful to use blocking calls to <code>WSARecv()</code> as part of a design which minimises the number of locked pages which can be useful in maximising the number of concurrent connections that you can support (more so on older operating systems). In this scenario you would post &quot;zero byte&quot; overlapped <code>WSARecv()</code>s and then when these complete you could post a blocking <code>WSARecv()</code> to retrieve the data that you KNOW will be immediately available. See Network Programming for Microsoft Windows (2nd Ed) for more details."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4420637"}, "reply_to_user": {"reputation": 20218, "user_id": 7925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zFiIO.png?s=128&g=1", "display_name": "Len Holgate", "link": "https://stackoverflow.com/users/7925/len-holgate"}, "edited": false, "score": 0, "creation_date": 1425052141, "post_id": 28743124, "comment_id": 45816558, "body": "@Len Holgate: Thanks for the info in your first comment, I edited my answer."}, {"owner": {"reputation": 20218, "user_id": 7925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zFiIO.png?s=128&g=1", "display_name": "Len Holgate", "link": "https://stackoverflow.com/users/7925/len-holgate"}, "edited": false, "score": 0, "creation_date": 1425052797, "post_id": 28743124, "comment_id": 45816974, "body": "I refer you to my first comment. The edit doesn&#39;t make your question any less strange. How do you expect a completion to be reported to you via the IOCP if you haven&#39;t supplied an <code>OVERLAPPED</code> structure? Since the overlapped structure is the only &quot;per operation&quot; data for overlapped I/O operations there is NO WAY to match an API call that initiated an operation to a completion for that operation if you don&#39;t have an overlapped structure for it. So it&#39;s impossible to have a completion if you don&#39;t have an overlapped structure passed to the original API call."}], "owner": {"user_type": "does_not_exist", "display_name": "user4420637"}, "is_accepted": false, "score": 2, "last_activity_date": 1425053336, "last_edit_date": 1425053336, "creation_date": 1424955507, "answer_id": 28743124, "question_id": 28730666, "link": "https://stackoverflow.com/questions/28730666/does-wsasend-in-blocking-mode-causes-a-notification-packet-to-be-placed-in-the/28743124#28743124", "title": "Does WSASend() in blocking mode causes a notification packet to be placed in the completion port?", "body": "<p>If your socket <strong>is</strong> registered with a completion port, you can <strong>still</strong> make blocking calls by passing <code>NULL</code> to the completion routine and the <code>OVERLAPPED</code> structure parameters. And you will not receive a notification (<strong>even though</strong> your socket is registered with a completion port). However I do not know if it is recommended to use <code>WSASend()</code> in blocking mode and <code>WSARecv()</code> in overlapped mode at the same time.</p>\n"}], "owner": {"reputation": 809, "user_id": 4396948, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3a0cc0b3f551575c41d48a4fef24e6ae?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4396948/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425071171, "creation_date": 1424902331, "last_edit_date": 1425071171, "question_id": 28730666, "link": "https://stackoverflow.com/questions/28730666/does-wsasend-in-blocking-mode-causes-a-notification-packet-to-be-placed-in-the", "title": "Does WSASend() in blocking mode causes a notification packet to be placed in the completion port?", "body": "<p>I can use <code>WSASend()</code> in blocking mode if I do not supply an overlapped structure or a completion routine when I call it. But my question is: does a blocking <code>WSASend()</code> call causes a notification packet to be placed in the completion port?</p>\n"}, {"tags": ["c++", "clang", "most-vexing-parse"], "answers": [{"owner": {"reputation": 331, "user_id": 4289538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OeTw9.jpg?s=128&g=1", "display_name": "jzions", "link": "https://stackoverflow.com/users/4289538/jzions"}, "is_accepted": false, "score": 2, "last_activity_date": 1424902495, "creation_date": 1424902495, "answer_id": 28730707, "question_id": 28730661, "link": "https://stackoverflow.com/questions/28730661/force-disambiguation-of-most-vexing-parse-to-be-function-declaration/28730707#28730707", "title": "Force disambiguation of most vexing parse to be function declaration", "body": "<p>Could it be as simple as</p>\n\n<pre><code>int some_function(void);\n</code></pre>\n"}], "owner": {"reputation": 331, "user_id": 4289538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OeTw9.jpg?s=128&g=1", "display_name": "jzions", "link": "https://stackoverflow.com/users/4289538/jzions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424902495, "creation_date": 1424902317, "last_edit_date": 1495540259, "question_id": 28730661, "link": "https://stackoverflow.com/questions/28730661/force-disambiguation-of-most-vexing-parse-to-be-function-declaration", "title": "Force disambiguation of most vexing parse to be function declaration", "body": "<p>All of the discussions I've seen on the \"most vexing parse\" talk about how to force the compiler to treat the case as a variable declaration with initializer (instead of the actual interpretation as a function declaration). See, for example, <a href=\"https://stackoverflow.com/questions/19009306/is-there-a-way-to-force-the-most-vexing-parse-to-be-an-error-even-on-a-class\">this stackoverflow thread</a> and <a href=\"http://www.acnenomor.com/194873p1/most-vexing-parse-why-doesnt-a-a-work\" rel=\"nofollow noreferrer\">this article from Ask-Coder</a>.</p>\n\n<p>My team has a rule: force as many warnings as possible to be errors. The goal is to keep cruft from creeping into the code; successful compiles should be silent, and disabling warnings is a recipe for disaster. That's all very well and good, except I'm being bitten by the Most Vexing Parse on a declaration that actually parses the way I want it to parse.</p>\n\n<p>Specifically:</p>\n\n<pre><code>int some_function();\n</code></pre>\n\n<p>As shown in the Ask-Coder article, this code fragment really does trip the Most Vexing Parse warning in clang, which we then convert to an error, which kicks me in the teeth.</p>\n\n<p>Is there anything I can do in the syntax here to make this (a) a legal C declaration (not just C++) and (b) not trip the Most Vexing Parse warning? Or do I have to do the  #pragma dance and silence the warning right around this line of code?</p>\n"}, {"tags": ["c++", "string", "file", "buffer"], "comments": [{"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1424901774, "post_id": 28730507, "comment_id": 45747245, "body": "instead of <code>atoi</code>, you should definitely just use <code>num1 &lt;&lt; file1;</code>, as this will be much more robust."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1424901799, "post_id": 28730507, "comment_id": 45747258, "body": "<code>atoi</code> makes my eyes bleed.  Try <code>stoi</code> (if exceptions for errors are good) or else <code>strtoi</code> (if you like checking return values instead of catching exceptions)  Or, you can keep using <code>atoi</code>, if you want failures to possibly crash your program!"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1424901975, "post_id": 28730507, "comment_id": 45747341, "body": "@MarcusM&#252;ller: You got left and right operands (and direction of the angle brackets) reversed, perhaps?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1424902119, "post_id": 28730507, "comment_id": 45747399, "body": "@BenVoigt: Um, this did <i>definitely</i> only happen because I&#39;m tired. Going to bed..."}], "answers": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 1, "last_activity_date": 1424901878, "creation_date": 1424901878, "answer_id": 28730549, "question_id": 28730507, "link": "https://stackoverflow.com/questions/28730507/rdbuf-strange-behavior/28730549#28730549", "title": "rdbuf() strange behavior", "body": "<pre><code>file3 &lt;&lt; filen.rdbuf()\n</code></pre>\n\n<p>Copies from the current position in the <code>filen</code> stream forward, into <code>file3</code>.  The current position is after the first line, since you just read it.</p>\n\n<p>Seek back to the beginning and your missing line will be missing no longer.</p>\n"}, {"comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1424902027, "post_id": 28730569, "comment_id": 45747370, "body": "Also a good solution.  Although it might add more newlines than were in the original file, that might be a good thing."}], "owner": {"reputation": 39446, "user_id": 4301306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a1461d0104809c90e2a252a2d4b0ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Wintermute", "link": "https://stackoverflow.com/users/4301306/wintermute"}, "is_accepted": true, "score": 2, "last_activity_date": 1424903308, "last_edit_date": 1424903308, "creation_date": 1424901948, "answer_id": 28730569, "question_id": 28730507, "link": "https://stackoverflow.com/questions/28730507/rdbuf-strange-behavior/28730569#28730569", "title": "rdbuf() strange behavior", "body": "<p>Well, you pull out the first line of each file before concatenating the rest of them, so that's expected. You still have the lines, though, so simply print them in between:</p>\n\n<pre><code>if (num1&lt;num2) {\n    file3 &lt;&lt; firstLine_1   &lt;&lt; \"\\n\"\n          &lt;&lt; file1.rdbuf() &lt;&lt; \"\\n\"\n          &lt;&lt; firstLine_2   &lt;&lt; \"\\n\"\n          &lt;&lt; file2.rdbuf();\n} else {\n    file3 &lt;&lt; firstLine_2   &lt;&lt; \"\\n\"\n          &lt;&lt; file2.rdbuf() &lt;&lt; \"\\n\"\n          &lt;&lt; firstLine_1   &lt;&lt; \"\\n\"\n          &lt;&lt; file1.rdbuf();\n}\n</code></pre>\n\n<p><strong>Addendum:</strong> @BenVoigt rightly notes that if one of the files contains a single line that does not end with a newline, the output of this will be different from printing the plain file contents delimited by a single newline (there will be an extra newline in the middle or at the end).</p>\n\n<p>On the basis that this case is recognizable because the first <code>getline</code> call will have set the end-of-file flag, this can be avoided as follows:</p>\n\n<pre><code>if (num1&lt;num2) {\n    file3 &lt;&lt; firstLine_1;\n    if(file1) { file3 &lt;&lt; \"\\n\" &lt;&lt; file1.rdbuf(); }\n    file3 &lt;&lt; \"\\n\";\n    file3 &lt;&lt; firstLine_2;\n    if(file2) { file3 &lt;&lt; \"\\n\" &lt;&lt; file2.rdbuf(); }\n} else {\n    file3 &lt;&lt; firstLine_2;\n    if(file2) { file3 &lt;&lt; \"\\n\" &lt;&lt; file2.rdbuf(); }\n    file3 &lt;&lt; \"\\n\";\n    file3 &lt;&lt; firstLine_1;\n    if(file1) { file3 &lt;&lt; \"\\n\" &lt;&lt; file1.rdbuf(); }\n}\n</code></pre>\n\n<p>Since this is something of a mouthful and repetitive, I'd consider using a lambda to make it more concise:</p>\n\n<pre><code>auto printfile = [&amp;file3](std::string const &amp;firstline, std::istream &amp;in) {\n  file3 &lt;&lt; firstline;\n  if(in) { file3 &lt;&lt; \"\\n\" &lt;&lt; in.rdbuf(); }\n};\n\nif(num1 &lt; num2) {\n  printfile(firstLine_1, file1);\n  file3 &lt;&lt; \"\\n\";\n  printfile(firstLine_2, file2);\n} else {\n  printfile(firstLine_2, file2);\n  file3 &lt;&lt; \"\\n\";\n  printfile(firstLine_1, file1);\n}\n</code></pre>\n\n<p>For regular files like these, seeking back is also a possibility, but I feel that it is better to avoid giving up the ability to use code on pipes, sockets and other non-seekable streams without a compelling reason even if it seems like an unlikely use case.</p>\n"}], "owner": {"reputation": 358, "user_id": 1894421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f8d115dd20a51bf2e13c3e1598ff8352?s=128&d=identicon&r=PG", "display_name": "apebeast", "link": "https://stackoverflow.com/users/1894421/apebeast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 28730569, "answer_count": 2, "score": 0, "last_activity_date": 1424903308, "creation_date": 1424901654, "question_id": 28730507, "link": "https://stackoverflow.com/questions/28730507/rdbuf-strange-behavior", "title": "rdbuf() strange behavior", "body": "<p>I'm trying to merge two files into one by simply using rdbuf(), but when merged, the file's first line is missing. The code is below:</p>\n\n<pre><code>void mergeFiles(ifstream &amp;file1, ifstream &amp;file2, ofstream &amp;file3) {\n\n    int num1;\n    int num2;\n\n    string firstLine_1;\n    string firstLine_2;\n\n    getline(file1, firstLine_1);\n    num1 = atoi(firstLine_1.c_str());\n\n    getline(file2, firstLine_2);\n    num2 = atoi(firstLine_2.c_str());\n\n    if (num1&lt;num2) {\n        file3 &lt;&lt; file1.rdbuf() &lt;&lt; \"\\n\" &lt;&lt; file2.rdbuf();\n    } else {\n        file3 &lt;&lt; file2.rdbuf() &lt;&lt; \"\\n\" &lt;&lt; file1.rdbuf();\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "c++11", "future", "stdasync"], "comments": [{"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1424902122, "post_id": 28730499, "comment_id": 45747401, "body": "Don&#39;t you have to wait() ? futures[i].wait(), before .get() ?"}, {"owner": {"reputation": 495, "user_id": 4162625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/068e47fecb961281633bd400d70a48c6?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan_Larkin", "link": "https://stackoverflow.com/users/4162625/dylan-larkin"}, "reply_to_user": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1424902433, "post_id": 28730499, "comment_id": 45747509, "body": "I was under the impression that .get() handles this automatically."}, {"owner": {"reputation": 7540, "user_id": 4474230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/713c7ce18010e541853962264a719d83?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey", "link": "https://stackoverflow.com/users/4474230/jeffrey"}, "edited": false, "score": 0, "creation_date": 1424902811, "post_id": 28730499, "comment_id": 45747681, "body": "Right. Correct answer provided by someone else. Well, I learned something today."}], "answers": [{"comments": [{"owner": {"reputation": 495, "user_id": 4162625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/068e47fecb961281633bd400d70a48c6?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan_Larkin", "link": "https://stackoverflow.com/users/4162625/dylan-larkin"}, "edited": false, "score": 1, "creation_date": 1424903518, "post_id": 28730686, "comment_id": 45748023, "body": "THANK YOU. I don&#39;t know why I didn&#39;t just post on here earlier."}, {"owner": {"reputation": 48078, "user_id": 279259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f34f02bafe93e3a3784de74c4d8b7732?s=128&d=identicon&r=PG&f=1", "display_name": "ereOn", "link": "https://stackoverflow.com/users/279259/ereon"}, "reply_to_user": {"reputation": 495, "user_id": 4162625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/068e47fecb961281633bd400d70a48c6?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan_Larkin", "link": "https://stackoverflow.com/users/4162625/dylan-larkin"}, "edited": false, "score": 1, "creation_date": 1424903681, "post_id": 28730686, "comment_id": 45748105, "body": "@Gustav: The best way to thank <a href=\"http://stackoverflow.com/users/985296/stefan\">stefan</a> is to <b>accept</b> his answer :)"}, {"owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "reply_to_user": {"reputation": 495, "user_id": 4162625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/068e47fecb961281633bd400d70a48c6?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan_Larkin", "link": "https://stackoverflow.com/users/4162625/dylan-larkin"}, "edited": false, "score": 0, "creation_date": 1424903935, "post_id": 28730686, "comment_id": 45748211, "body": "@Gustav you&#39;re very welcome. I did suffer from that bug before, so I&#39;m glad to have helped someone by sharing this insight. (actually I did only visit this question, because my nick name in the real world is Gustav ;-) )"}, {"owner": {"reputation": 495, "user_id": 4162625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/068e47fecb961281633bd400d70a48c6?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan_Larkin", "link": "https://stackoverflow.com/users/4162625/dylan-larkin"}, "reply_to_user": {"reputation": 48078, "user_id": 279259, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f34f02bafe93e3a3784de74c4d8b7732?s=128&d=identicon&r=PG&f=1", "display_name": "ereOn", "link": "https://stackoverflow.com/users/279259/ereon"}, "edited": false, "score": 0, "creation_date": 1424904101, "post_id": 28730686, "comment_id": 45748295, "body": "@ereOn: I was getting to that :) Was just so excited that my code wasn&#39;t completely incorrect, that instead it was off by one character."}, {"owner": {"reputation": 495, "user_id": 4162625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/068e47fecb961281633bd400d70a48c6?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan_Larkin", "link": "https://stackoverflow.com/users/4162625/dylan-larkin"}, "edited": false, "score": 0, "creation_date": 1424904152, "post_id": 28730686, "comment_id": 45748327, "body": "@stefan: I chose it because I&#39;m a big fan of a hockey player by the same name."}], "owner": {"reputation": 9542, "user_id": 985296, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/fb867640ddc6aee363d96530573845b0?s=128&d=identicon&r=PG", "display_name": "stefan", "link": "https://stackoverflow.com/users/985296/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1424951199, "last_edit_date": 1424951199, "creation_date": 1424902423, "answer_id": 28730686, "question_id": 28730499, "link": "https://stackoverflow.com/questions/28730499/asynchronous-function-producing-inconsistent-results/28730686#28730686", "title": "asynchronous function producing inconsistent results", "body": "<p>The problem lies in the capture by reference.</p>\n\n<pre><code>for (int i = 0; i &lt; rows; i++)\n{\n   futures.push_back(std::async(std::launch::async, [&amp;] // capture by reference!\n   {\n       return minor(i,0).determinant();\n   }));\n}\n</code></pre>\n\n<p>This is a problem, because each executed method doesn't get its own value of <code>i</code>, but a reference to the loop variable <code>i</code>. Hence, as soon as <code>i</code> is evaluated for the function call <code>minor(i, 0)</code>, it may have already changed. Even worse, the function call may not have been executed yet before the end of the loop. Hence <code>i</code> may have been destroyed before it's been used.</p>\n\n<hr>\n\n<p>If the above description isn't enough, maybe this timeline can help. Note that this is not a real situation, it's just an illustration.</p>\n\n<p>Assume that iterating <code>i</code> takes 2 time steps, evaluating the parameters of the function takes 2 steps and starting a thread takes 5 steps (on a real machine probably way more!). The job done by each thread may take several thousand steps (that's why we parallelize them, right?).</p>\n\n<pre><code>Time --&gt;\n0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ...\n^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^  ^  ^  ^  ^\n| | | | | | | | | | |  |  |  |  Thread 3 function call.\n| | | | | | | | | | |  |  |  Thread 3 evaluate parameters (i == garbage!).\n| | | | | | | | | | |  |  Thread 3 start; Thread 2 function call.\n| | | | | | | | | | |  Thread 2 evaluate parameters (i == garbage!).\n| | | | | | | | | | Destroy i; Thread 2 start; Thread 1 function call.\n| | | | | | | | | Loop condition broken; Thread 1 evaluate parameters (i == 4 !).\n| | | | | | | | Thread 0 function call; Thread 1 start; i = 4;\n| | | | | | | Thread 3 request to start; Thread 0 evaluate parameters (i == 3 !).\n| | | | | | Thread 0 start; i = 3;\n| | | | | Thread 2 request to start.\n| | | | i = 2.\n| | | Thread 1 request to start.\n| | i = 1.\n| Thread 0 request to start.\nCreate i, i = 0.\n</code></pre>\n\n<p>So some threads get meaningful data, others won't. Depending on actual timings, it might be possible to increment <code>i</code> at the same time as evaluating its value for the function parameter in which case you have a race condition.</p>\n\n<hr>\n\n<p>The resolution is by capturing <code>i</code> by value:</p>\n\n<pre><code>for (int i = 0; i &lt; rows; i++)\n{\n   futures.push_back(std::async(std::launch::async, [=] // capture by value\n   {\n       return minor(i,0).determinant();\n   }));\n}\n</code></pre>\n\n<p>Recommendation: when dealing with asynchronous bits, be explicit about what your capture:</p>\n\n<pre><code>for (int i = 0; i &lt; rows; i++)\n{\n   futures.push_back(std::async(std::launch::async, [i] // explicit capture by value\n   {\n       return minor(i,0).determinant();\n   }));\n}\n</code></pre>\n\n<p>You also should avoid having reallocations to your vector of futures. Simply add <code>futures.reserve(rows)</code> before the loop.</p>\n"}], "owner": {"reputation": 495, "user_id": 4162625, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/068e47fecb961281633bd400d70a48c6?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan_Larkin", "link": "https://stackoverflow.com/users/4162625/dylan-larkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 1, "accepted_answer_id": 28730686, "answer_count": 1, "score": 2, "last_activity_date": 1424951199, "creation_date": 1424901608, "last_edit_date": 1424908211, "question_id": 28730499, "link": "https://stackoverflow.com/questions/28730499/asynchronous-function-producing-inconsistent-results", "title": "asynchronous function producing inconsistent results", "body": "<p>I have a function that runs asynchronously. Unfortunately, it only spits out the correct answer on occasion. The values represented by <code>futures[i].get()</code> change each time I run the code. I'm new to multithreading. </p>\n\n<pre><code>double async_func() const {\n\n    vector&lt;future&lt;double&gt;&gt; futures;\n\n    double val = 0;\n    for (int i = 0; i &lt; rows; i++) {\n        futures.push_back(std::async(std::launch::async, [&amp;] {return minor(i,0).determinant();}) );\n    }       \n    for (int i = 0; i &lt; rows; i++) \n        val += futures[i].get();\n\n    return val;\n}\n</code></pre>\n"}, {"tags": ["c++", "memory"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 4, "creation_date": 1424901471, "post_id": 28730439, "comment_id": 45747086, "body": "Consider <code>std::vector&lt;std::unique_ptr&lt;CCOLEntry&gt;&gt;</code>.  Not only can you do the deallocation in the destructor instead of needing a special <code>unload()</code> function, you can have the required logic written for you by the compiler, just by choosing to use a smart pointer instead of a bare pointer."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1424901578, "post_id": 28730439, "comment_id": 45747147, "body": "<code>CCOLManager::parseFile</code> ought to return a <code>unique_ptr</code> as well."}, {"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "edited": false, "score": 2, "creation_date": 1424901767, "post_id": 28730439, "comment_id": 45747241, "body": "<i>&quot;The goal is to iterate around a std::vector and use delete on each value.&quot;</i>  If you instead let the vector itself destroy the objects you have a much simpler situation. Ben V shows one possible way. Another way is to let the vector own the objects"}, {"owner": {"reputation": 991, "user_id": 4539315, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2249f219d6be8b4eb291fc95d1d7c108?s=128&d=identicon&r=PG&f=1", "display_name": "Mex", "link": "https://stackoverflow.com/users/4539315/mex"}, "edited": false, "score": 0, "creation_date": 1424902252, "post_id": 28730439, "comment_id": 45747441, "body": "Thanks for the replies. So just to confirm, if I use a smart pointer, I can use the unload() code inside the destructor? And If I use a bare pointer, I can&#39;t use the unload() code in the destructor? Also how would I go about letting the vector own the objects? What would the deletion process be for that?"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 1, "creation_date": 1424902831, "post_id": 28730439, "comment_id": 45747690, "body": "No. If you use <code>unique_ptr</code>, you don&#39;t need a destructor or an <code>unload</code> function."}, {"owner": {"reputation": 991, "user_id": 4539315, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2249f219d6be8b4eb291fc95d1d7c108?s=128&d=identicon&r=PG&f=1", "display_name": "Mex", "link": "https://stackoverflow.com/users/4539315/mex"}, "edited": false, "score": 0, "creation_date": 1424904685, "post_id": 28730439, "comment_id": 45748587, "body": "I&#39;ve decided to look into using smart pointers in the future, this leaves 1 question. Can I move the code from CCOLFile::unload to the CCOLFile destructor, whilst not using smart pointers anywhere, and still using delete on the pCOLEntry, and the objects stored in the m_vecEntries std::vector will all safely get deleted?"}], "answers": [{"comments": [{"owner": {"reputation": 1542, "user_id": 897728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e672e0d8de180128eed1b101ad8b955?s=128&d=identicon&r=PG", "display_name": "Happy Green Kid Naps", "link": "https://stackoverflow.com/users/897728/happy-green-kid-naps"}, "edited": false, "score": 1, "creation_date": 1424903180, "post_id": 28730712, "comment_id": 45747858, "body": "&quot;<i>Thus unload() is reduced to one line in the destructor</i>&quot; -- ITYM the OP will neither need an <code>unload</code> function nor need to implement a destructor; the one auto-generated by the compiler would be sufficient."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1424903703, "post_id": 28730712, "comment_id": 45748114, "body": "Also, if <code>m_vecEntries</code> is a <code>std::vector</code>, then he should <i>not</i> call <code>delete</code> on it."}, {"owner": {"reputation": 2638, "user_id": 717645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53311c55f7c961936130abe3df517ea1?s=128&d=identicon&r=PG", "display_name": "shipr", "link": "https://stackoverflow.com/users/717645/shipr"}, "edited": false, "score": 0, "creation_date": 1424904197, "post_id": 28730712, "comment_id": 45748345, "body": "Sorry, yes, I did mean that.  My second sentence was not intended as code (it should not have been edited -- a word was lost); I meant that the <i>auto-generated</i> destructor would delete all the memory necessary."}], "owner": {"reputation": 2638, "user_id": 717645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53311c55f7c961936130abe3df517ea1?s=128&d=identicon&r=PG", "display_name": "shipr", "link": "https://stackoverflow.com/users/717645/shipr"}, "is_accepted": false, "score": -1, "last_activity_date": 1424903681, "last_edit_date": 1424903681, "creation_date": 1424902510, "answer_id": 28730712, "question_id": 28730439, "link": "https://stackoverflow.com/questions/28730439/delete-memory-safely-in-destructor/28730712#28730712", "title": "delete memory safely in destructor", "body": "<p>If you declare <code>std::vector&lt;std::unique_ptr&lt;CColEntry&gt;&gt; m_vecEntries</code> then you don't need an <code>unload</code> method; instead, in the destructor, just do <code>delete m_vecEntries</code>.  The <code>vector</code> will clear its entries, and because they are <code>unique_ptr</code>'s, they will delete themselves.</p>\n\n<p>Thus <code>unload()</code> is reduced to one line in the destructor.</p>\n"}], "owner": {"reputation": 991, "user_id": 4539315, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2249f219d6be8b4eb291fc95d1d7c108?s=128&d=identicon&r=PG&f=1", "display_name": "Mex", "link": "https://stackoverflow.com/users/4539315/mex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424903681, "creation_date": 1424901383, "question_id": 28730439, "link": "https://stackoverflow.com/questions/28730439/delete-memory-safely-in-destructor", "title": "delete memory safely in destructor", "body": "<p>I have the following code:</p>\n\n<pre><code>CCOLFile *pCOLFile = CCOLManager::getInstance()-&gt;parseFile(strCOLPath);\n// ...\npCOLFile-&gt;unload();\ndelete pCOLFile;\n</code></pre>\n\n<p>Memory is allocated by the parseFile() function and stored in a std::vector in the pCOLFile object.\nCan I move my code from the unload() method to the CCOLFile destructor to safely delete the allocated memory?</p>\n\n<p>I'm guessing destructors maybe were even designed for this?</p>\n\n<p>The goal is to iterate around a std::vector and use delete on each value.</p>\n\n<p>Here's my CCOLFile struct:</p>\n\n<pre><code>struct CCOLFile\n{\n    std::string                     m_strFilePath;\n    std::vector&lt;CCOLEntry*&gt;         m_vecEntries;\n};\n</code></pre>\n\n<p>And here's the current unload() method:</p>\n\n<pre><code>void                CCOLFile::unload(void)\n{\n    for (auto pCOLEntry : m_vecEntries)\n    {\n        delete pCOLEntry;\n    }\n    m_vecEntries.clear();\n}\n</code></pre>\n"}, {"tags": ["c++", "xcode", "macos", "terminal"], "comments": [{"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "edited": false, "score": 0, "creation_date": 1424902528, "post_id": 28730401, "comment_id": 45747556, "body": "<code>OS X</code> is obviously not the same as windows, so using <code>&lt;windows.h&gt;</code> probably won&#39;t do you much good even if you could use <code>placecursor</code>. What exactly are you trying to do in Terminal that requires this?"}, {"owner": {"reputation": 83109, "user_id": 1312143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d64f50f989e564c337a8a8bd653b8e6?s=128&d=identicon&r=PG", "display_name": "Ken Thomases", "link": "https://stackoverflow.com/users/1312143/ken-thomases"}, "edited": false, "score": 0, "creation_date": 1424910620, "post_id": 28730401, "comment_id": 45750665, "body": "You probably want to use <a href=\"https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man3/ncurses.3x.html\" rel=\"nofollow noreferrer\">ncurses</a>. It&#39;s basically a text windowing system."}], "owner": {"reputation": 5608, "user_id": 1090389, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/62338b89232e6ad597702f289b43e343?s=128&d=identicon&r=PG", "display_name": "henryaaron", "link": "https://stackoverflow.com/users/1090389/henryaaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 571, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424901248, "creation_date": 1424901248, "question_id": 28730401, "link": "https://stackoverflow.com/questions/28730401/set-text-input-cursor-position-terminal-c", "title": "Set text input cursor position terminal C++", "body": "<p>I've Googled for a while but cannot find a way to set the cursor position for text input in OS X's terminal. </p>\n\n<p>I've found many answers using <code>&lt;windows.h&gt;</code> for Microsoft computers but nothing for OS X. Can anybody point me to some literature?</p>\n\n<p><strong>I simply want to use the <code>placeCursor</code> method in <code>&lt;windows.h&gt;</code> on a Mac.</strong></p>\n\n<p>Thank you</p>\n"}, {"tags": ["c++", "data-structures"], "comments": [{"owner": {"reputation": 3618, "user_id": 2394945, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/g5WxC.png?s=128&g=1", "display_name": "Moby Disk", "link": "https://stackoverflow.com/users/2394945/moby-disk"}, "edited": false, "score": 0, "creation_date": 1424900220, "post_id": 28730075, "comment_id": 45746458, "body": "Can you post the exact error message?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 2, "creation_date": 1424900465, "post_id": 28730075, "comment_id": 45746582, "body": "<code>fill_vector</code> is defined as a member function, so it&#39;d need to be <code>v.fill_vector(&amp;v)</code> (which points to the fact that passing the <code>miniVector</code> as a parameter doesn&#39;t make a lot of sense)."}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424901157, "post_id": 28730075, "comment_id": 45746931, "body": "It would be helpful to see the relevant parts of miniVector&#39;s definition..."}], "answers": [{"comments": [{"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424900873, "post_id": 28730210, "comment_id": 45746788, "body": "Could fill_vector not be a static method? (In which case a call would need to be prefixed with <code>miniVector&lt;someType&gt;::</code>, I believe)."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424901046, "post_id": 28730210, "comment_id": 45746870, "body": "@Peter Schneider It can be a non-static method. We do not know how it actually declared. But in this case its definition is confusing."}], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1424900814, "last_edit_date": 1424900814, "creation_date": 1424900509, "answer_id": 28730210, "question_id": 28730075, "link": "https://stackoverflow.com/questions/28730075/identifier-fill-vector-is-undefinded-and-im-not-sure-why/28730210#28730210", "title": "identifier &quot;fill_vector&quot; is undefinded and im not sure why", "body": "<p>fill_vector is a member function of class miniVector. Thus you have to specify an object for which the member function is called in this statement (if the member function is non-static) or class name (if the member function is static)</p>\n\n<pre><code>sizearray = fill_vector&lt;int&gt;(v);\n</code></pre>\n\n<p>This call is wrong also because the method itself is not template.</p>\n\n<p>So there is no definition of template function fill_vector and the compiler issues an error.</p>\n"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4598258"}, "is_accepted": false, "score": 0, "last_activity_date": 1424900693, "creation_date": 1424900693, "answer_id": 28730258, "question_id": 28730075, "link": "https://stackoverflow.com/questions/28730075/identifier-fill-vector-is-undefinded-and-im-not-sure-why/28730258#28730258", "title": "identifier &quot;fill_vector&quot; is undefinded and im not sure why", "body": "<pre><code>int miniVector&lt;T&gt;::fill_vector(miniVector&lt;T&gt; &amp;obj)\n</code></pre>\n\n<p>This says: a method of a class miniVector of type T, that returns an int and takes in a reference to a miniVector object of type T.</p>\n\n<p>You cannot call this as you have, using</p>\n\n<pre><code>sizearray = fill_vector&lt;int&gt;(v);\n</code></pre>\n\n<p>You would have to call it like this:</p>\n\n<pre><code>sizearray = v.fill_vector(some_other_miniVector);\n</code></pre>\n\n<p>where</p>\n\n<p><code>some_other_miniVector</code> is</p>\n\n<pre><code>miniVector&lt;int&gt; some_other_miniVector;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4607764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c5a04b459cdb5c857fba8c27114792f?s=128&d=identicon&r=PG&f=1", "display_name": "andres casado", "link": "https://stackoverflow.com/users/4607764/andres-casado"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424900814, "creation_date": 1424900101, "last_edit_date": 1424900205, "question_id": 28730075, "link": "https://stackoverflow.com/questions/28730075/identifier-fill-vector-is-undefinded-and-im-not-sure-why", "title": "identifier &quot;fill_vector&quot; is undefinded and im not sure why", "body": "<pre><code>int miniVector&lt;T&gt;::fill_vector(miniVector&lt;T&gt; &amp;obj)\n{\n    int numofelements;\n    cout &lt;&lt; \"For how many objects do you want to enter value&lt;s&gt;? \";\n    cin &gt;&gt; numofelements;\n    obj.resize(numofelements);\n    int i;\n    for(i = 0; i &lt; numofelements; i++)\n    {\n        cin &gt;&gt; obj[i];\n        obj.push_back(i);\n    }\n    return i;\n}\n\nint main()\n{\n    miniVector&lt;int&gt; v;\n    cout &lt;&lt; \"int vector: \" &lt;&lt; endl;\n    //fill_vector();\n    int sizearray;\n    sizearray = fill_vector&lt;int&gt;(v);\n    sizearray = v.size();\n    //display_vector(v, sizearray);\n    return 0;\n}\n</code></pre>\n\n<p>Was wonder why i keep getting an error message idnetifier \"fill_vector is undefined.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1424899926, "post_id": 28729972, "comment_id": 45746278, "body": "I&#39;m not sure I understand what you want, and the code you&#39;ve provided isn&#39;t helpful."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1424899954, "post_id": 28729972, "comment_id": 45746293, "body": "<i>&quot;how to make b point to c so that if you change the value pointed to by b, c is changed (but not a)&quot;</i> You can&#39;t. That&#39;s not how pointers work. That is literally the opposite of how they should work."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1424899988, "post_id": 28729972, "comment_id": 45746315, "body": "@grillo Would it be enough to simply make assignment b = &amp;c;?"}, {"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1424900003, "post_id": 28729972, "comment_id": 45746323, "body": "@Cyber Sounds like exactly how they work. :S"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "edited": false, "score": 0, "creation_date": 1424900174, "post_id": 28729972, "comment_id": 45746423, "body": "@JosephMansfield &quot;How do you point to a value that is pointing to another, without changing the value of the former?&quot; makes it sound like he&#39;s chaining pointers and trying to chance something without affecting everything."}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 1, "creation_date": 1424901349, "post_id": 28729972, "comment_id": 45747026, "body": "This is a weird question.  You knew how to do b = &amp;a, but not how to do b = &amp;c?  Strange..."}], "answers": [{"comments": [{"owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "reply_to_user": {"reputation": 192, "user_id": 4606473, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NgXkw.jpg?s=128&g=1", "display_name": "grillo", "link": "https://stackoverflow.com/users/4606473/grillo"}, "edited": false, "score": 0, "creation_date": 1424900438, "post_id": 28730038, "comment_id": 45746571, "body": "@grillo What error do you get? You will get an error if you do <code>int b = &amp;c;</code>, but not <code>b = &amp;c;</code>."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1424900447, "post_id": 28730038, "comment_id": 45746577, "body": "You get that error because you try to redeclare <code>b</code> not because you cannot assing &amp;c to it."}], "owner": {"reputation": 100228, "user_id": 150634, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f438bc04462ee5af4132921a3474842?s=128&d=identicon&r=PG", "display_name": "Joseph Mansfield", "link": "https://stackoverflow.com/users/150634/joseph-mansfield"}, "is_accepted": true, "score": 3, "last_activity_date": 1424899981, "creation_date": 1424899981, "answer_id": 28730038, "question_id": 28729972, "link": "https://stackoverflow.com/questions/28729972/dealing-with-pointers-in-c/28730038#28730038", "title": "Dealing with Pointers in C++", "body": "<p>Just take the address of <code>c</code> and assign it to <code>b</code>:</p>\n\n<pre><code>b = &amp;c;\n</code></pre>\n\n<p>Now if you dereference <code>b</code>, with <code>*b</code>, you get the object denoted by <code>c</code>. If you modify this object in anyway, it will not affect the value of <code>a</code>.</p>\n"}], "owner": {"reputation": 192, "user_id": 4606473, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/NgXkw.jpg?s=128&g=1", "display_name": "grillo", "link": "https://stackoverflow.com/users/4606473/grillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 28730038, "answer_count": 1, "score": 0, "last_activity_date": 1424900719, "creation_date": 1424899720, "last_edit_date": 1424900719, "question_id": 28729972, "link": "https://stackoverflow.com/questions/28729972/dealing-with-pointers-in-c", "title": "Dealing with Pointers in C++", "body": "<p>In the following code, I am having trouble figuring out <strong>how to make b point to c so that if you change the value pointed to by b, c is changed (but not a)</strong>. I tried <code>int *b = &amp;c;</code>. So my question ultimately is: <strong>How do you point to a value that is pointing to another, without changing the value of the former?</strong> </p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(){\nint a = 8;\nint c = 12;\n//std::cout&lt;&lt; a&lt;&lt; std::endl;\nstd::cout &lt;&lt; &amp;a &lt;&lt; std::endl;\n\nint *b = &amp;a;\n\nstd::cout &lt;&lt; *b &lt;&lt; std::endl;\nstd::cout &lt;&lt; b &lt;&lt; std::endl;\nstd::cout &lt;&lt; b+1 &lt;&lt; std::endl;\n\na = 6;\n\nstd::cout &lt;&lt; *b &lt;&lt; std::endl;\n\nb = &amp;c; // just edited this now it works. \n\n//std::cout &lt;&lt; c &lt;&lt; std::endl;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv", "brute-force"], "answers": [{"comments": [{"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "reply_to_user": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "edited": false, "score": 1, "creation_date": 1424900386, "post_id": 28729983, "comment_id": 45746546, "body": "hey, i guess, that&#39;s a <i>very common</i> pitfall ! (you&#39;re not alone with that)"}, {"owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "edited": false, "score": 0, "creation_date": 1424920855, "post_id": 28729983, "comment_id": 45753166, "body": "Unfortunately, the drawMatches function does not run with vector&lt; vector &lt;DMatch&gt; &gt; since it calls for only a single vector per the docs (<a href=\"http://docs.opencv.org/modules/features2d/doc/drawing_function_of_keypoints_and_matches.html\" rel=\"nofollow noreferrer\">docs.opencv.org/modules/features2d/doc/&hellip;</a>)"}, {"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "reply_to_user": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "edited": false, "score": 0, "creation_date": 1424935235, "post_id": 28729983, "comment_id": 45757377, "body": "true, you will have to iterate over that. (or take only the 1st one.) if i may ask: why did you need a knnMatch (not the regular match) ?"}, {"owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "edited": false, "score": 0, "creation_date": 1424947903, "post_id": 28729983, "comment_id": 45764338, "body": "Short answer - I was trying to find the best matches with knnMatch because I was having bug issues with my good_matches algorithm (<a href=\"http://stackoverflow.com/questions/28725273/opencv-drawmatches-error?noredirect=1#comment45759998_28725273\" title=\"opencv drawmatches error\">stackoverflow.com/questions/28725273/&hellip;</a>). Maybe not the best approach but I was experimenting"}], "owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "is_accepted": true, "score": 8, "last_activity_date": 1424899786, "creation_date": 1424899786, "answer_id": 28729983, "question_id": 28729880, "link": "https://stackoverflow.com/questions/28729880/bfmatcher-knnmatch/28729983#28729983", "title": "BFMatcher knnMatch", "body": "<p>please have another look at <a href=\"http://docs.opencv.org/modules/features2d/doc/common_interfaces_of_descriptor_matchers.html#void%20DescriptorMatcher::knnMatch(const%20Mat&amp;%20queryDescriptors,%20const%20Mat&amp;%20trainDescriptors,%20vector%3Cvector%3CDMatch%3E%20%3E&amp;%20matches,%20int%20k,%20const%20Mat&amp;%20mask,%20bool%20compactResult)%20const\" rel=\"noreferrer\">the docs</a></p>\n\n<p>while the ordinary match function has a <code>vector&lt;DMatch&gt;</code> as result, </p>\n\n<p>knnMatch (say loud : k-nearest-neighbours !) results in several(k) vectors, thus you need a :</p>\n\n<p>vector&lt; vector&lt; DMatch > > matches</p>\n\n<p>for the result</p>\n"}, {"owner": {"reputation": 1975, "user_id": 2324271, "user_type": "registered", "accept_rate": 85, "profile_image": "https://lh4.googleusercontent.com/-pd1cvL1Tlg8/AAAAAAAAAAI/AAAAAAAAAAw/ur8Agb9d_aM/photo.jpg?sz=128", "display_name": "Harsh Wardhan", "link": "https://stackoverflow.com/users/2324271/harsh-wardhan"}, "is_accepted": false, "score": 3, "last_activity_date": 1425877283, "creation_date": 1425877283, "answer_id": 28935525, "question_id": 28729880, "link": "https://stackoverflow.com/questions/28729880/bfmatcher-knnmatch/28935525#28935525", "title": "BFMatcher knnMatch", "body": "<p>Your arguments for <strong>BFMatcher</strong> are not correct. When you set <strong>crossCheck</strong> as <strong>true</strong>, you can have only one match per keypoint. Whereas, for <strong>knnMatch</strong> you need to have more than one match. So your code should be like:</p>\n\n<pre><code>BFMatcher matcher(NORM_L2);\nstd::vector&lt;vector&lt;DMatch&gt; &gt; matches;\nmatcher.knnMatch(descriptors1, descriptors2, matches,2);\n\nstd::vector&lt;DMatch&gt; match1;\nstd::vector&lt;DMatch&gt; match2;\n\nfor(int i=0; i&lt;matches.size(); i++)\n{\n    match1.push_back(matches[i][0]);\n    match2.push_back(matches[i][1]);\n}\n\nMat img_matches1, img_matches2;\ndrawMatches(img1, kp1, img2, kp2, match1, img_matches1);\ndrawMatches(img1, kp1, img2, kp2, match2, img_matches2);\n</code></pre>\n"}], "owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18520, "favorite_count": 2, "accepted_answer_id": 28729983, "answer_count": 2, "score": 4, "last_activity_date": 1425877283, "creation_date": 1424899415, "question_id": 28729880, "link": "https://stackoverflow.com/questions/28729880/bfmatcher-knnmatch", "title": "BFMatcher knnMatch", "body": "<p>I try to implement knnMatch on BFMatcher as follows:</p>\n\n<pre><code>BFMatcher matcher(NORM_L2, true);\nvector&lt;DMatch&gt; matches;\n//matcher.match(descriptors1, descriptors2, matches);\nmatcher.knnMatch(descriptors1, descriptors2, matches, 2);\n</code></pre>\n\n<p>And receive the following error:</p>\n\n<pre><code>fiducialMain.cpp: In function \u2018void fiducialCalc(cv::Mat, cv::Mat, cv::Mat&amp;, cv::Mat&amp;, int&amp;)\u2019:\nfiducialMain.cpp:98:56: error: no matching function for call to \u2018cv::BFMatcher::knnMatch(cv::Mat&amp;, cv::Mat&amp;, std::vector&lt;cv::DMatch&gt;&amp;, int)\u2019\n  matcher.knnMatch(descriptors1, descriptors2, matches,2);\n                                                        ^\nfiducialMain.cpp:98:56: note: candidates are:\nIn file included from fiducialMain.cpp:15:0:\n/usr/local/include/opencv2/features2d/features2d.hpp:1116:18: note: void cv::DescriptorMatcher::knnMatch(const cv::Mat&amp;, const cv::Mat&amp;, std::vector&lt;std::vector&lt;cv::DMatch&gt; &gt;&amp;, int, const cv::Mat&amp;, bool) const\n     CV_WRAP void knnMatch( const Mat&amp; queryDescriptors, const Mat&amp; trainDescriptors,\n                  ^\n/usr/local/include/opencv2/features2d/features2d.hpp:1116:18: note:   no known conversion for argument 3 from \u2018std::vector&lt;cv::DMatch&gt;\u2019 to \u2018std::vector&lt;std::vector&lt;cv::DMatch&gt; &gt;&amp;\u2019\n/usr/local/include/opencv2/features2d/features2d.hpp:1130:18: note: void cv::DescriptorMatcher::knnMatch(const cv::Mat&amp;, std::vector&lt;std::vector&lt;cv::DMatch&gt; &gt;&amp;, int, const std::vector&lt;cv::Mat&gt;&amp;, bool)\n     CV_WRAP void knnMatch( const Mat&amp; queryDescriptors, CV_OUT vector&lt;vector&lt;DMatch&gt; &gt;&amp; matches, int k,\n                  ^\n/usr/local/include/opencv2/features2d/features2d.hpp:1130:18: note:   no known conversion for argument 2 from \u2018cv::Mat\u2019 to \u2018std::vector&lt;std::vector&lt;cv::DMatch&gt; &gt;&amp;\u2019\n</code></pre>\n\n<p>Can anybody explain this error?</p>\n"}, {"tags": ["c++", "qt", "qtablewidget"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2933503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0799bf5711adf9954e3b44d17e514aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge C", "link": "https://stackoverflow.com/users/2933503/jorge-c"}, "edited": false, "score": 0, "creation_date": 1424949904, "post_id": 28736552, "comment_id": 45765548, "body": "Thanks ;). I thought there could be some trivial way to do it with the standard header that i&#39;m not aware. I understood your roundabout to the problem. Now I&#39;m thinking if it is worth writing so much code to construct my own headers just to show that simple header&#39;s meaning."}, {"owner": {"reputation": 3438, "user_id": 3455890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2C2o.jpg?s=128&g=1", "display_name": "a_manthey_67", "link": "https://stackoverflow.com/users/3455890/a-manthey-67"}, "edited": false, "score": 0, "creation_date": 1424951090, "post_id": 28736552, "comment_id": 45766291, "body": "this solution for QTableView works in QTableWidget too: <a href=\"http://stackoverflow.com/questions/22635867/is-it-possible-to-set-the-text-of-the-qtableview-corner-button\" title=\"is it possible to set the text of the qtableview corner button\">stackoverflow.com/questions/22635867/&hellip;</a>"}], "owner": {"reputation": 16779, "user_id": 3902472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9802d0f02fd24032c2ede03427627e07?s=128&d=identicon&r=PG&f=1", "display_name": "Kosovan", "link": "https://stackoverflow.com/users/3902472/kosovan"}, "is_accepted": true, "score": 2, "last_activity_date": 1424935088, "creation_date": 1424935088, "answer_id": 28736552, "question_id": 28729795, "link": "https://stackoverflow.com/questions/28729795/qt-table-widget-how-to-set-the-meaning-title-for-vertical-header-and-horizontal/28736552#28736552", "title": "Qt Table widget. How to set the meaning/title for vertical header and horizontal header together?", "body": "<p>I think that it is impossible with standard headers (QHeaderView) <a href=\"http://doc.qt.io/qt-5/qheaderview.html\" rel=\"nofollow noreferrer\">because of</a>: </p>\n\n<blockquote>\n  <p>Note: Each header renders the data for each section itself, and does\n  not rely on a delegate. As a result, calling a header's\n  setItemDelegate() function will have no effect.</p>\n</blockquote>\n\n<p>So you need forgot about it and disable it, you should implement your own headers(set your color, your text and so on), but I of course will help with meaning/title. I achieved this with next item delegate:</p>\n\n<p>.h:</p>\n\n<pre><code>#ifndef ITEMDELEGATEPAINT_H\n#define ITEMDELEGATEPAINT_H\n\n#include &lt;QStyledItemDelegate&gt;\n\nclass ItemDelegatePaint : public QStyledItemDelegate\n{\n    Q_OBJECT\npublic:\n    explicit ItemDelegatePaint(QObject *parent = 0);\n    ItemDelegatePaint(const QString &amp;txt, QObject *parent = 0);\n\n\nprotected:\n    void paint( QPainter *painter,\n                const QStyleOptionViewItem &amp;option,\n                const QModelIndex &amp;index ) const;\n    QSize sizeHint( const QStyleOptionViewItem &amp;option,\n                    const QModelIndex &amp;index ) const;\n    QWidget* createEditor(QWidget *parent, const QStyleOptionViewItem &amp;option, const QModelIndex &amp;index) const;\n    void setEditorData(QWidget * editor, const QModelIndex &amp; index) const;\n    void setModelData(QWidget * editor, QAbstractItemModel * model, const QModelIndex &amp; index) const;\n    void updateEditorGeometry(QWidget * editor, const QStyleOptionViewItem &amp; option, const QModelIndex &amp; index) const;\n\nsignals:\n\npublic slots:\n\n};\n\n#endif // ITEMDELEGATEPAINT_H\n</code></pre>\n\n<p>But all these method is not very useful here, you can implement it yourself with some specific actions, I will show you main method - paint()</p>\n\n<pre><code>void ItemDelegatePaint::paint(QPainter *painter, const QStyleOptionViewItem &amp;option, const QModelIndex &amp;index) const\n{\n    if(index.row() == 0 &amp;&amp; index.column() == 0)\n    {\n        QRect source1 = QRect(option.rect.topLeft(),option.rect.size()/2);\n        QRect source2 = QRect(option.rect.topLeft(),option.rect.size()/2);\n\n        painter-&gt;drawLine(option.rect.topLeft(),option.rect.bottomRight());\n\n        source1.moveTopLeft(source1.topLeft() += QPoint(source1.size().width(),0));\n        painter-&gt;drawText(source1,\"agent reagent\");\n\n        source2.moveBottomLeft(source2.bottomLeft() += QPoint(0,source2.size().height()));\n        painter-&gt;drawText(source2,\"hallide ion\");\n    }\n\n    else\n    {\n        QStyledItemDelegate::paint(painter,option,index);\n    } \n}\n</code></pre>\n\n<p>This code shows main idea and it is not final version, but you should do all these specific things by yourself. Of course this approach is not very easy, you can just create picture and set it to cell, but in this case picture will not be good scalable. My code works normal if user will resize some headers. To prove, see screenshots with different sizes.</p>\n\n<p><img src=\"https://i.stack.imgur.com/pERAL.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/ajDUL.png\" alt=\"enter image description here\"></p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 2933503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0799bf5711adf9954e3b44d17e514aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge C", "link": "https://stackoverflow.com/users/2933503/jorge-c"}, "edited": false, "score": 0, "creation_date": 1425250569, "post_id": 28774532, "comment_id": 45874355, "body": "Thank you for your answer. I understood what you said but for my work i think this solution is a bit overkill and for now I&#39;m going another way."}, {"owner": {"reputation": 3438, "user_id": 3455890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2C2o.jpg?s=128&g=1", "display_name": "a_manthey_67", "link": "https://stackoverflow.com/users/3455890/a-manthey-67"}, "reply_to_user": {"reputation": 43, "user_id": 2933503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0799bf5711adf9954e3b44d17e514aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge C", "link": "https://stackoverflow.com/users/2933503/jorge-c"}, "edited": false, "score": 0, "creation_date": 1425330014, "post_id": 28774532, "comment_id": 45910441, "body": "ok. I enjoyed to follow up your question and added how to draw the diagonal line."}], "owner": {"reputation": 3438, "user_id": 3455890, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d2C2o.jpg?s=128&g=1", "display_name": "a_manthey_67", "link": "https://stackoverflow.com/users/3455890/a-manthey-67"}, "is_accepted": false, "score": 1, "last_activity_date": 1425329994, "last_edit_date": 1425329994, "creation_date": 1425072209, "answer_id": 28774532, "question_id": 28729795, "link": "https://stackoverflow.com/questions/28729795/qt-table-widget-how-to-set-the-meaning-title-for-vertical-header-and-horizontal/28774532#28774532", "title": "Qt Table widget. How to set the meaning/title for vertical header and horizontal header together?", "body": "<p>if text elements as shown here </p>\n\n<p><img src=\"https://i.stack.imgur.com/pGhHQ.png\" alt=\"textelements in cornerButton\"></p>\n\n<p>are sufficient, it can be done with standard header and the solution from the link i posted in my comment:</p>\n\n<pre><code>from PyQt5 import QtCore, QtWidgets\n\nclass MyTableWidget(QtWidgets.QTableWidget):\n    def __init__(self, parent = None):\n        QtWidgets.QTableWidget.__init__(self, parent)\n        self.setRowCount(4)\n        self.setColumnCount(5)\n        self.items = []\n        self.items.append(['white ppt','no reaction', 'no reaction', 'no reaction', 'no reaction'])\n        self.items.append(['no reaction','white ppt', 'dissolves', 'dissolves', 'no reaction'])\n        self.items.append(['no reaction','pale yellow\\nprecipitate', 'dissolves\\npartly', 'dissolves', 'no reaction'])\n        self.items.append(['no reaction','yellow ppt', 'does not\\ndissolve', 'does not\\ndissolve', 'turns\\nblue'])\n        self.horizontalHeader().setFixedHeight(90)\n        self.verticalHeader().setFixedWidth(120)\n        self.hh = ['Ca(NO\\u2083)\\u2082', 'AgNO\\u2083','AgNO\\u2083\\n+\\nNH\\u2083','AgNO\\u2083\\n+\\nNa\\u2083S\\u2082O\\u2083','Starch\\n+\\nNaOCl']\n        self.vh = ['NaF', 'NaCl', 'NaBr or KBR', 'NaJ']\n\n        self.addItems()\n        self.addHeaderItems()\n        # text in cornerButton\n        btnTxt = '{: &gt;15}\\n{: &gt;19}\\n{:&lt;}\\n{:&lt;}'.format('reagent', '\\u21D2','halide', 'ion \\u21D3')\n\n        # add cornerbutton from http://stackoverflow.com/questions/22635867/is-it-possible-to-set-the-text-of-the-qtableview-corner-button\n        btn = self.findChild(QtWidgets.QAbstractButton)\n        btn.setText(btnTxt)\n        btn.installEventFilter(self)\n\n        opt = QtWidgets.QStyleOptionHeader()\n        opt.text = btn.text()    \n        # end cornerbutton \n\n    def addItems(self):  \n        for r in range(0,len(self.items)):\n            for c in range(0,len(self.items[r])):\n                item = QtWidgets.QTableWidgetItem()\n                item.setText(self.items[r][c])\n                self.setItem(r,c,item)\n\n    def addHeaderItems(self):\n        for i in range(0,len(self.hh)):\n            item = QtWidgets.QTableWidgetItem()\n            item.setText(self.hh[i])\n            self.setHorizontalHeaderItem(i,item)\n            self.setColumnWidth(i,150)\n        for i in range(0,len(self.vh)):\n            item = QtWidgets.QTableWidgetItem()\n            item.setText(self.vh[i])\n            self.setVerticalHeaderItem(i,item)\n            self.setRowHeight(i,60)\n\n        # eventfilter from http://stackoverflow.com/questions/22635867/is-it-possible-to-set-the-text-of-the-qtableview-corner-button\n    def eventFilter(self, obj, event):\n        if event.type() != QtCore.QEvent.Paint or not isinstance(\n            obj, QtWidgets.QAbstractButton):\n            return False\n\n        # Paint by hand (borrowed from QTableCornerButton)\n        opt = QtWidgets.QStyleOptionHeader()\n        opt.initFrom(obj)\n        styleState = QtWidgets.QStyle.State_None\n        if obj.isEnabled():\n            styleState |= QtWidgets.QStyle.State_Enabled\n        if obj.isActiveWindow():\n            styleState |= QtWidgets.QStyle.State_Active\n        if obj.isDown():\n            styleState |= QtWidgets.QStyle.State_Sunken\n        opt.state = styleState\n        opt.rect = obj.rect()\n        # This line is the only difference to QTableCornerButton\n        opt.text = obj.text()\n        opt.position = QtWidgets.QStyleOptionHeader.OnlyOneSection\n        painter = QtWidgets.QStylePainter(obj)\n        painter.drawControl(QtWidgets.QStyle.CE_Header, opt)\n\n        return True\n</code></pre>\n\n<p>if <code>painter.drawControl()</code>-method is replaced by any other <code>painter.draw...()</code>-method arbitrary elements incl. graphics can be drawn on cornerButton.</p>\n"}], "owner": {"reputation": 43, "user_id": 2933503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0799bf5711adf9954e3b44d17e514aa?s=128&d=identicon&r=PG&f=1", "display_name": "Jorge C", "link": "https://stackoverflow.com/users/2933503/jorge-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1585, "favorite_count": 2, "accepted_answer_id": 28736552, "answer_count": 2, "score": 4, "last_activity_date": 1425329994, "creation_date": 1424899135, "question_id": 28729795, "link": "https://stackoverflow.com/questions/28729795/qt-table-widget-how-to-set-the-meaning-title-for-vertical-header-and-horizontal", "title": "Qt Table widget. How to set the meaning/title for vertical header and horizontal header together?", "body": "<p>I know how to set text labels into row or column headers. But I want to do something like this:</p>\n\n<p><a href=\"http://i.stack.imgur.com/eMM6U.jpg\" rel=\"nofollow\">http://i.stack.imgur.com/eMM6U.jpg</a></p>\n\n<p>I don't find any info on how to do the thing inside the red circumference. I'm starting to believe this can't be done with QTableWidget. </p>\n\n<p>Thanks ;)</p>\n"}, {"tags": ["c++", "namespaces", "argument-dependent-lookup"], "comments": [{"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 0, "creation_date": 1424899521, "post_id": 28729769, "comment_id": 45746003, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/22201937/using-declaration-in-header-files\">using declaration in header files</a>"}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "reply_to_user": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 4, "creation_date": 1424899849, "post_id": 28729769, "comment_id": 45746221, "body": "@aruisdante No, it isn&#39;t. OP is asking about one particular usage."}, {"owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "reply_to_user": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1424899974, "post_id": 28729769, "comment_id": 45746302, "body": "@Pradhan one particular usage does not make polluting the global namespace with <code>using</code> any more valid, I would think."}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "reply_to_user": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "edited": false, "score": 0, "creation_date": 1424900219, "post_id": 28729769, "comment_id": 45746457, "body": "@aruisdante It <i>might</i>, if it is true that calling <code>swap</code> without introducing <code>std::swap</code> into the current scope is almost always an error. That is what OP is effectively asking. So that makes the other question not a duplicate. Please note that I am not expressing an opinion about the practice - just pointing out that there might be a more a slightly more nuanced answer to this question."}, {"owner": {"reputation": 3225, "user_id": 2843835, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4636d7abd5b19dcee891618859eaa5ee?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2843835/mark"}, "edited": false, "score": 0, "creation_date": 1424905928, "post_id": 28729769, "comment_id": 45749107, "body": "You can use it in a header file, as long as you use it inside a function, in a header file, so that its scope is limited to that function. This is a common practice. You should <i>not</i> put it at file scope in a header file."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 0, "creation_date": 1424913637, "post_id": 28729769, "comment_id": 45751517, "body": "I wonder if it will work to create your own superswap function which wraps this for you, and use superswap in all your code instead."}], "answers": [{"comments": [{"owner": {"reputation": 10492, "user_id": 603688, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1058344e1b119c4d9dd3aedc5456277b?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/603688/dan"}, "edited": false, "score": 0, "creation_date": 1424901533, "post_id": 28730082, "comment_id": 45747120, "body": "What unexpected behavior could I get?"}], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 7, "last_activity_date": 1424913528, "last_edit_date": 1424913528, "creation_date": 1424900114, "answer_id": 28730082, "question_id": 28729769, "link": "https://stackoverflow.com/questions/28729769/is-it-ok-to-put-using-stdswap-in-a-header/28730082#28730082", "title": "Is it ok to put &quot;using std::swap;&quot; in a header?", "body": "<p>The guidance for swap is to <code>using std::swap</code> <em>at the most local scope possible</em>. For certain, one in a header file that's widely included does not meet this requirement. It <em>still</em> pollutes the global namespace in unexpected ways (someone not expecting <code>std::swap</code> will be imported to the global namespace) and should be avoided just like <code>using namespace</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424911970, "post_id": 28731683, "comment_id": 45751064, "body": "If someone did write <code>void swap(int *a, int *b);</code> and your function did <code>using std::swap; swap(x, y);</code> on two pointers to int, then you&#39;d get the same problem (it finds the better match instead of using <code>std::swap</code>).  So I think the issue here is that the bogus swap function messes with everything."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424928418, "post_id": 28731683, "comment_id": 45755099, "body": "@MattMcNabb No, unqualified lookup stops as soon as the name is found in the local scope; you won&#39;t pickup the bogus swap declared outside. And there&#39;s no ADL, either."}], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": false, "score": 0, "last_activity_date": 1424906592, "creation_date": 1424906592, "answer_id": 28731683, "question_id": 28729769, "link": "https://stackoverflow.com/questions/28729769/is-it-ok-to-put-using-stdswap-in-a-header/28731683#28731683", "title": "Is it ok to put &quot;using std::swap;&quot; in a header?", "body": "<p>The principle issue here is that you are assuming that people did not write their own <code>swap</code>s that happen to be better matches that do subtly or completely different things to the semantics of <code>std::swap</code> and related friends. For a simple example, consider</p>\n\n<pre><code>void swap(int* a, int* b);\n</code></pre>\n\n<p>where the contents of the pointers are swapped. Now try to swap a pair of <code>int*</code>. You might think that the pointers are swapped, but instead, surprise! it's the contents that are getting swapped.</p>\n\n<p>Really, the guidance for <code>swap</code> is the same as any other- only <code>using</code> at the most local scope possible and no earlier and definitely not in a header.</p>\n"}], "owner": {"reputation": 10492, "user_id": 603688, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1058344e1b119c4d9dd3aedc5456277b?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/603688/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1424913528, "creation_date": 1424899027, "last_edit_date": 1424906190, "question_id": 28729769, "link": "https://stackoverflow.com/questions/28729769/is-it-ok-to-put-using-stdswap-in-a-header", "title": "Is it ok to put &quot;using std::swap;&quot; in a header?", "body": "<p>I've read that when you're <code>swap</code>ing things in c++, you should always <code>using std::swap;</code>, then call <code>swap</code> unqualified, so it automatically picks the <code>std::</code> ones for <code>std::</code> and builtin types, your custom one for custom types, and the templated <code>std::</code> one for everything else.</p>\n\n<p>So, can I just put <code>using std::swap;</code> in the header that every file includes and not have to worry about it?</p>\n\n<p>I understand that avoiding <code>using</code> in a header is common practice. However, is there a problem with it in this particular case?</p>\n"}, {"tags": ["c++", "c++11", "derived"], "comments": [{"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 3, "creation_date": 1424899409, "post_id": 28729768, "comment_id": 45745928, "body": "The object b_ptr points to is Base, casting it to a Derived pointer doesn&#39;t make it a Derived object, that&#39;s why Address is not valid."}, {"owner": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "reply_to_user": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1424899696, "post_id": 28729768, "comment_id": 45746100, "body": "I know that.   That was not my question.   My question is &quot;What is the proper way to initialize after a cast.&quot;   Or should I do it differently?  I want to avoid dereference and object copy because the base class is quite large."}, {"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 2, "creation_date": 1424899760, "post_id": 28729768, "comment_id": 45746147, "body": "Wait... you are allocating a <code>Base</code> and then pretending it is a <code>Derived</code>? That&#39;s like buying a chair and then telling your blind friend &quot;this is a couch, you can sit in any of the 5 places you like&quot; then ask &quot;why is he falling on the floor?&quot;."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1424900070, "post_id": 28729768, "comment_id": 45746357, "body": "@user3072517: There is no dereference or copy, but you&#39;ll need to add one."}, {"owner": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "edited": false, "score": 0, "creation_date": 1424900076, "post_id": 28729768, "comment_id": 45746363, "body": "I know....I am just trying to avoid a copy of all the base class members.   It can be quite expensive in the loop I am in.   Well, we did get 13 people in a VW once.   Does that count???  ;-)"}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "edited": false, "score": 0, "creation_date": 1424900171, "post_id": 28729768, "comment_id": 45746421, "body": "@user3072517 You cant&#39; initialize what doesn&#39;t exist. So instead of inheritance, maybe you can consider has-a relationship to avoid the copy?"}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424905865, "post_id": 28729768, "comment_id": 45749082, "body": "13 people in a VW, are you a clown?"}], "answers": [{"comments": [{"owner": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "edited": false, "score": 0, "creation_date": 1424899906, "post_id": 28729979, "comment_id": 45746261, "body": "So then perhaps a better way of asking my question would be something more like:    How can you create a derived object from a base object without copying all the members?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "edited": false, "score": 2, "creation_date": 1424900141, "post_id": 28729979, "comment_id": 45746404, "body": "@user3072517: you could give the derived object a constructor that takes a <code>Base&amp;&amp;</code> and move it."}, {"owner": {"reputation": 571, "user_id": 4096272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345c800d1d42a321a26ce5033e75f437?s=128&d=identicon&r=PG&f=1", "display_name": "Tony J", "link": "https://stackoverflow.com/users/4096272/tony-j"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1424900272, "post_id": 28729979, "comment_id": 45746483, "body": "@MooingDuck Good call, this should work if every member of Base also implements move semantics."}, {"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1424900379, "post_id": 28729979, "comment_id": 45746542, "body": "And only if the Base instance is of no interest after the operation... ANyway I think that what he wants is &quot;how to extend an instance of Base to obtain a Derived&quot; : impossible."}, {"owner": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "edited": false, "score": 0, "creation_date": 1424900479, "post_id": 28729979, "comment_id": 45746589, "body": "Ok!  That might be the trick.   Any examples of doing this you could point me to?   In reality, this base class is actually nested deeply among other classes.   Do each an every class have to implement the move semantics all the way up the chain?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "edited": false, "score": 0, "creation_date": 1424901290, "post_id": 28729979, "comment_id": 45746995, "body": "@user3072517: Only the ones that contain data you want."}], "owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "is_accepted": false, "score": 1, "last_activity_date": 1424899748, "creation_date": 1424899748, "answer_id": 28729979, "question_id": 28729768, "link": "https://stackoverflow.com/questions/28729768/initialization-during-a-pointer-cast/28729979#28729979", "title": "Initialization during a pointer cast?", "body": "<p>You can't. A <em>brace-or-equal-initializer</em> for a member is only executed by the constructor. You need to actually construct a <code>Derived</code> object if you want <code>Derived::Address</code> initialized. But you can't construct a <code>Derived</code> object over the space that's already occupied by a <code>Base</code> object; you'd have to destroy the <code>Base</code> object first.</p>\n"}, {"comments": [{"owner": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "edited": false, "score": 0, "creation_date": 1424901890, "post_id": 28730414, "comment_id": 45747302, "body": "Well, it seems that I may have to convert to a &quot;has-a&quot; implementation.   That is unfortunate because it really follows a natural inheritance.   The size of the object is typically between 1-10k (depending on the data).   But, the rub comes in because there are 10+ millions (possibly even hundreds of millions) of these, and I was trying to minimize memory consumption."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "edited": false, "score": 0, "creation_date": 1424902090, "post_id": 28730414, "comment_id": 45747387, "body": "@user3072517: Yes, has-a lets you share or steal the whole subobject without a copy."}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424906230, "post_id": 28730414, "comment_id": 45749235, "body": "@BenVoigt, I think it&#39;s more of an &quot;is associated with&quot;, not &quot;has a&quot;.  &quot;Has a&quot; has an implied 1-1 aggregation relationship."}, {"owner": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "edited": false, "score": 0, "creation_date": 1424908859, "post_id": 28730414, "comment_id": 45750142, "body": "Well, I just tried to turn it around to a has-a and I will say it is quite ugly.   My code goes from something that looks like this <code>Data-&gt;Rows[0]-&gt;RowID</code> to <code>Data-&gt;Rows[0]-&gt;Row-&gt;RowID</code> only because I need to add some additional members to the Row from another class object.   That seems such a mess.   I even went so far as to overload the Rows [] operator to make it look better, but I can&#39;t get away from a row instance.   A row instance now looks like <code>Row-&gt;IsUpdated</code> (for my overload, which is nice), but all the row members are now <code>Row-&gt;Row-&gt;RowID</code>.   Ick!"}], "owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 1, "last_activity_date": 1424901289, "creation_date": 1424901289, "answer_id": 28730414, "question_id": 28729768, "link": "https://stackoverflow.com/questions/28729768/initialization-during-a-pointer-cast/28730414#28730414", "title": "Initialization during a pointer cast?", "body": "<p>You cannot change the type in-place.  Not by doing extra initialization, or asking politely.  It is not possible.</p>\n\n<p>This is very easy to see if you ask yourself</p>\n\n<blockquote>\n  <p>How much memory was allocated by <code>make_shared&lt;Base&gt;</code>?</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "edited": false, "score": 0, "creation_date": 1424902720, "post_id": 28730553, "comment_id": 45747637, "body": "Very interesting!   I need to study this a bit more, but it seems like a pretty good solution.    I have to think about the implications of b_ptr having no content.    Thanks!!"}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424906077, "post_id": 28730553, "comment_id": 45749163, "body": "This has interesting consequences, I think.  What if you create a new class Derived2 that is derived from base, then do: shared_ptr&lt;Base&gt; b_ptr(new Derived2());  What happens to the part of b_ptr that is Derived2 but not Base after you&#39;ve moved the Base part out."}, {"owner": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424906367, "post_id": 28730553, "comment_id": 45749301, "body": "The only reason I think this may be useful is if you want to create a new object of a different type, but all the properties in the base are the same as an old object that you want to destroy.  When doing the new, you don&#39;t want to have to explicitly copy data over... However, it&#39;s not clear whether std::move&#39;s implementation doesn&#39;t actually just do memcpy."}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "reply_to_user": {"reputation": 3220, "user_id": 1779316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oIJWt.jpg?s=128&g=1", "display_name": "thang", "link": "https://stackoverflow.com/users/1779316/thang"}, "edited": false, "score": 0, "creation_date": 1424908737, "post_id": 28730553, "comment_id": 45750107, "body": "@thang: I can&#39;t really imagine why it&#39;d be useful, it seems like a bad idea all around"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1424910698, "post_id": 28730553, "comment_id": 45750683, "body": "It is clear... std::move does not DO anything at all at runtime, let alone call memcpy. It only affects the value category of the reference, nothing more."}], "owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "is_accepted": true, "score": 1, "last_activity_date": 1424908769, "last_edit_date": 1424908769, "creation_date": 1424901889, "answer_id": 28730553, "question_id": 28729768, "link": "https://stackoverflow.com/questions/28729768/initialization-during-a-pointer-cast/28730553#28730553", "title": "Initialization during a pointer cast?", "body": "<p>You can give <code>Derived</code> a <code>Base&amp;&amp;</code> constructor, and use it to move (shallow-copy) the contents of the <code>Base</code> into the derived, which leaves the origional <code>Base</code> in an \"empty\" state.</p>\n\n<pre><code>class Base {\npublic:\n    std::string Name;\n\n    //Note: The compiler is generating these invisibly for you:\n    //Base() :Name() {}\n    //~Base() {}\n    //Base(const Base&amp; r) : Name(r.Name) {}\n    //Base(Base&amp;&amp; r) noexcept : Name(std::move(r.Name)) {}\n    //Base&amp; operator=(const Base&amp; r) : Name(r.Name) {}\n    //Base&amp; operator=(Base&amp;&amp; r) noexcept : Name(std::move(r.Name)) {}\n};\n\nclass Derived : public Base {\npublic:\n    std::string Address = \"Initialized\";\n    Derived() = default;\n    Derived(Base&amp;&amp; b) : Base(std::move(b)) {}\n};    \n\nint main() {\n    auto b_ptr = std::make_shared&lt;Base&gt;();\n    b_ptr-&gt;Name = \"Fred\";\n\n    auto d_ptr = std::make_shared&lt;Derived&gt;(std::move(*b_ptr));\n    //NOTE AT THIS POINT b_ptr POINTS TO A BASE WHOS Name IS EMPTY\n    b_ptr.reset(); //reset to prevent accidental errors with lack of content\n\n    fprintf( stdout, \"Name: [%s]   Address: [%s]\", \n        d_ptr-&gt;Name.c_str(),  \n        d_ptr-&gt;Address.c_str() );  // Address not valid!\n}\n</code></pre>\n\n<p>See it working here: <a href=\"http://coliru.stacked-crooked.com/a/f3a6062f6c459c7c\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/f3a6062f6c459c7c</a><br>\nAnd also see proof of movement here: <a href=\"http://coliru.stacked-crooked.com/a/f7f6cc4aa06d2746\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/f7f6cc4aa06d2746</a></p>\n\n<p>However, it's worth noting that I can't think of a good reason you could ever want to do this.  It sounds like your code is poorly designed.</p>\n"}], "owner": {"reputation": 483, "user_id": 3072517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/f67dfd35ea57e64714cf98f001a582cc?s=128&d=identicon&r=PG&f=1", "display_name": "user3072517", "link": "https://stackoverflow.com/users/3072517/user3072517"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 28730553, "answer_count": 3, "score": 0, "last_activity_date": 1424913078, "creation_date": 1424899023, "last_edit_date": 1424913078, "question_id": 28729768, "link": "https://stackoverflow.com/questions/28729768/initialization-during-a-pointer-cast", "title": "Initialization during a pointer cast?", "body": "<p>If I define a derived class which has initializers, but end up using pointer casts (i.e. static_pointer_cast), how can I get the initializers to be performed without performing dereference and then an object copy?   </p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;memory&gt;\n\nclass Base {\npublic:\n    std::string Name;\n};\n\nclass Derived : public Base {\npublic:\n    std::string Address = \"Initialized\";\n};\n\n\nint main() {\n    auto b_ptr = std::make_shared&lt;Base&gt;();\n    b_ptr-&gt;Name = \"Fred\";\n\n    auto d_ptr = std::static_pointer_cast&lt;Derived&gt;(b_ptr);\n\n    fprintf( stdout, \"Name: [%s]   Address: [%s]\", \n        d_ptr-&gt;Name.c_str(),  \n        d_ptr-&gt;Address.c_str() );  // Address not valid!\n}\n</code></pre>\n\n<p>Link to code: <a href=\"http://coliru.stacked-crooked.com/a/09f2240abff1556b\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/09f2240abff1556b</a></p>\n\n<p>What is the proper way to handle this?</p>\n\n<p>EDIT:   Below is some sample code (much simplified over the real thing, of course) that better illustrates what I am trying to do, and why it would be nice if there was a way to somehow make this work. </p>\n\n<p>Updated Sample Code: <a href=\"http://coliru.stacked-crooked.com/a/cdcc31a4417bb52b\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/cdcc31a4417bb52b</a></p>\n\n<p>In this example, I have two data sources, one is from a source system and the other is what is used internally.   I don't really want to copy all the data, just layer on some additional information to it.</p>\n\n<p>I am not sure about using std::move (as suggested by @Mooing Duck) because of the consequences it has with the source data....something I need to explore more.   But from this example, the benefit of not performing a copy is clear, and having to use a \"has-a\" style implementation makes the subsequent object usage awkward.   I.e.:</p>\n\n<pre><code>test_row-&gt;Values[0].c_str()   and \ntest_row-&gt;RowTotal\n</code></pre>\n\n<p>would become:</p>\n\n<pre><code>test_row-&gt;row-&gt;Values[0]    yet still\ntest_row-&gt;RowTotal\n</code></pre>\n\n<p>Perhaps I am looking at this all wrong and there is a better algorithm for doing this?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 559, "user_id": 4599245, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/9336e13034805f67026d5b735a493bc9?s=128&d=identicon&r=PG&f=1", "display_name": "B-Mac", "link": "https://stackoverflow.com/users/4599245/b-mac"}, "edited": false, "score": 0, "creation_date": 1424899024, "post_id": 28729737, "comment_id": 45745723, "body": "Hmmm...yeah. I think I&#39;m beginning to see why there&#39;s a standard way of doing it (on heap) ."}], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 0, "last_activity_date": 1424898870, "creation_date": 1424898870, "answer_id": 28729737, "question_id": 28729629, "link": "https://stackoverflow.com/questions/28729629/linked-lists-on-stack/28729737#28729737", "title": "Linked lists on stack", "body": "<p>The problem you'd have to watch out for is the linking. If your <code>Node</code> looks like </p>\n\n<pre><code>class Node\n{\n    int data;\n    Node* next;\n}\n</code></pre>\n\n<p>If you make two nodes:</p>\n\n<pre><code>Node a{5, nullptr};\nNode b{5, &amp;a};\n</code></pre>\n\n<p>If for whatever reason <code>a</code> falls out of scope before <code>b</code> (it won't in the above example, but you could imagine a case), then <code>b</code> has a dangling reference.</p>\n\n<p>When the nodes are declared on the heap, you can explicitly handle the order that links get inserted, removed, created, and destroyed.</p>\n"}, {"owner": {"reputation": 6673, "user_id": 4213662, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/693430827/picture?type=large", "display_name": "Persixty", "link": "https://stackoverflow.com/users/4213662/persixty"}, "is_accepted": false, "score": 0, "last_activity_date": 1424899347, "creation_date": 1424899347, "answer_id": 28729859, "question_id": 28729629, "link": "https://stackoverflow.com/questions/28729629/linked-lists-on-stack/28729859#28729859", "title": "Linked lists on stack", "body": "<p>The problem arises if you return from a function but retain a reference to a node allocated as a local variable</p>\n\n<p>Consider this (BAD EXAMPLE):</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Node {\npublic:\n    int v; \n    Node* next;\n};\n\nvoid b(Node*node){\n    Node b{2,nullptr};\n    node-&gt;next=&amp;b;\n}\n\nvoid a(void){\n    Node top{1,nullptr};\n    b(&amp;top);\n\n    std::cout&lt;&lt;top.next-&gt;v&lt;&lt;std::endl;//&lt;-- INVALID! Lifetime of b has ended.\n}\n\nint main(void){\n    a();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 559, "user_id": 4599245, "user_type": "registered", "accept_rate": 7, "profile_image": "https://www.gravatar.com/avatar/9336e13034805f67026d5b735a493bc9?s=128&d=identicon&r=PG&f=1", "display_name": "B-Mac", "link": "https://stackoverflow.com/users/4599245/b-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424899347, "creation_date": 1424898545, "question_id": 28729629, "link": "https://stackoverflow.com/questions/28729629/linked-lists-on-stack", "title": "Linked lists on stack", "body": "<p>Usually, we define a struct or class node and whenever we have to add a new link to the linked list, we usually create a new node dynamically, right?</p>\n\n<p>Like this:</p>\n\n<pre><code>node* temp = new node(x);\n</code></pre>\n\n<p>What if we want to create the new link on stack instead and not heap.\nIs it done like this? </p>\n\n<pre><code>node temp(x);\n</code></pre>\n\n<p>Is this a safe enough practice? Because I see people creating a node on heap all the time and never on stack itself.</p>\n\n<p>Now, when we delete a link, then, if we had created the list on stack, we don't have to use the delete/free operator/function, right? All we need to do is adjust the link pointers.</p>\n\n<p>Is there any flaw in what I'm trying to achieve here?</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1424899837, "post_id": 28729616, "comment_id": 45746212, "body": "Are you looking for <code>WINVER</code>? <a href=\"http://stackoverflow.com/questions/1439752/what-is-winver\">stackoverflow.com/questions/1439752/what-is-winver</a>"}, {"owner": {"reputation": 307, "user_id": 4541524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d05e667a0169a64081a18238d45d82ad?s=128&d=identicon&r=PG&f=1", "display_name": "Shrek", "link": "https://stackoverflow.com/users/4541524/shrek"}, "reply_to_user": {"reputation": 8178, "user_id": 2920343, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/dbfe32738597d61775971cab5efebb67?s=128&d=identicon&r=PG&f=1", "display_name": "CompuChip", "link": "https://stackoverflow.com/users/2920343/compuchip"}, "edited": false, "score": 0, "creation_date": 1424902421, "post_id": 28729616, "comment_id": 45747504, "body": "No, I&#39;m looking to be able to have the function ChangeWindowMessageFilterEx in my project but only be loaded if os =&gt; Win 7 but as is the function gets included in the compiled .exe list of functions and stops the .exe running on XP"}, {"owner": {"reputation": 6085, "user_id": 425871, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/58MZp.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/425871/steve"}, "edited": false, "score": 0, "creation_date": 1424904817, "post_id": 28729616, "comment_id": 45748649, "body": "... use <code>#ifdef</code> on some symbol to conditionally compile code. You can even decide based on the value of some symbol (like <code>WINVER</code>). See <a href=\"https://msdn.microsoft.com/en-us/library/ew2hz0yd.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">this MSDN page</a> for some info. This is at <i>compile time</i>, though, and if I understand your comment, you want it at run-time??"}], "answers": [{"owner": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "is_accepted": true, "score": 1, "last_activity_date": 1424904995, "creation_date": 1424904995, "answer_id": 28731275, "question_id": 28729616, "link": "https://stackoverflow.com/questions/28729616/visual-studio-c-filtering-code/28731275#28731275", "title": "Visual Studio C++ filtering code", "body": "<p>You would have to use explicit linking, using LoadLibrary and GetProcAddress to get a function pointer to ChangeWindowMessageFilterEx.  That way the call is not compiled into your code but it is conditionally executed by your code.</p>\n"}], "owner": {"reputation": 307, "user_id": 4541524, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d05e667a0169a64081a18238d45d82ad?s=128&d=identicon&r=PG&f=1", "display_name": "Shrek", "link": "https://stackoverflow.com/users/4541524/shrek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 28731275, "answer_count": 1, "score": 0, "last_activity_date": 1424904995, "creation_date": 1424898505, "question_id": 28729616, "link": "https://stackoverflow.com/questions/28729616/visual-studio-c-filtering-code", "title": "Visual Studio C++ filtering code", "body": "<p>I've got the Version API Helper functions running and that lets me do x if in y but how is it I set Visual Studio to ignore code if the target operating system does not support it, the issue being:</p>\n\n<pre><code> ChangeWindowMessageFilterEx\n</code></pre>\n\n<p>I need it for Windows 7 and above but when compiling the application the function gets included so wont run on XP. </p>\n"}, {"tags": ["c++", "arduino", "arduino-uno"], "comments": [{"owner": {"reputation": 14614, "user_id": 236528, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a221fd62b8d25184a812d1d270e691c1?s=128&d=identicon&r=PG", "display_name": "mjuarez", "link": "https://stackoverflow.com/users/236528/mjuarez"}, "edited": false, "score": 0, "creation_date": 1424899938, "post_id": 28729611, "comment_id": 45746283, "body": "The Arduino StackExchange is probably a better place for this question."}], "answers": [{"owner": {"reputation": 245, "user_id": 876672, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/df019cc88a6d8d515553cb06f891d81b?s=128&d=identicon&r=PG", "display_name": "max246", "link": "https://stackoverflow.com/users/876672/max246"}, "is_accepted": false, "score": 0, "last_activity_date": 1425597060, "creation_date": 1425597060, "answer_id": 28889633, "question_id": 28729611, "link": "https://stackoverflow.com/questions/28729611/gprs-and-weather-shield/28889633#28889633", "title": "GPRS and Weather Shield", "body": "<p>The GPRS shield should use serial communication with AT commands, and thats it. \nI can't see any problems with your configuration, make sure that you dont use the same pins for the weather station.\nA good test would be to use jumper to connect each shield or look at the scheme of each shield.</p>\n"}], "owner": {"reputation": 1, "user_id": 4607621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fee031b2c318673fe41b8192e8d9d5ec?s=128&d=identicon&r=PG", "display_name": "Elvinas Jakubcevi\u010dius", "link": "https://stackoverflow.com/users/4607621/elvinas-jakubcevi%c4%8dius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1425597060, "creation_date": 1424898499, "last_edit_date": 1424901989, "question_id": 28729611, "link": "https://stackoverflow.com/questions/28729611/gprs-and-weather-shield", "title": "GPRS and Weather Shield", "body": "<p>I have GPRS(GPRS_Shield_V1.0), weather shield and arduino uno R3. When I use Arduino and GPRS it works perfectly and when I used Weather Shield it also worked perfectly. But weather shield needs wire library, to use sensors. And when I use GPRS library with wire library, my program prints the same string many times. How I can use these two shields together?</p>\n\n<p>These are some pics of my connected shields:</p>\n\n<p><a href=\"http://puu.sh/gcvk3/85595c38c7.jpg\" rel=\"nofollow\">http://puu.sh/gcvk3/85595c38c7.jpg</a></p>\n\n<p><a href=\"http://puu.sh/gcvpc/22185212d3.jpg\" rel=\"nofollow\">http://puu.sh/gcvpc/22185212d3.jpg</a></p>\n\n<p>As you can see, I'm not using A0,A1,A2,A3,A4,A5 pins for GPRS Shield. Thank you!</p>\n"}, {"tags": ["c++", "function", "class", "object", "methods"], "comments": [{"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 1, "creation_date": 1424898484, "post_id": 28729565, "comment_id": 45745442, "body": "You&#39;re using implicit-copy operations, so your code is creating copies of your <code>Class</code> instance, modifying its state (i.e. <code>balance</code>) and then discarding the result. Instead use pointers or references to a single <code>Class</code> instance."}, {"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1424898673, "post_id": 28729565, "comment_id": 45745543, "body": "Specifically you should probably have a <code>Class&amp; getClass(int);</code> and <code>const Class&amp; getClass(int) const;</code>"}, {"owner": {"reputation": 5608, "user_id": 1090389, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/62338b89232e6ad597702f289b43e343?s=128&d=identicon&r=PG", "display_name": "henryaaron", "link": "https://stackoverflow.com/users/1090389/henryaaron"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1424898735, "post_id": 28729565, "comment_id": 45745569, "body": "@Dai That&#39;s <b>always</b> the problem... but when I make changes to try to return the Class as a reference I get lots of <b>red</b>."}, {"owner": {"reputation": 5608, "user_id": 1090389, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/62338b89232e6ad597702f289b43e343?s=128&d=identicon&r=PG", "display_name": "henryaaron", "link": "https://stackoverflow.com/users/1090389/henryaaron"}, "edited": false, "score": 0, "creation_date": 1424898786, "post_id": 28729565, "comment_id": 45745598, "body": "@cltco What would the <code>const Class&amp; getClass(int) const;</code> do for me?"}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 1, "creation_date": 1424898793, "post_id": 28729565, "comment_id": 45745606, "body": "What do you mean by &quot;red&quot;? If you&#39;re getting compiler error messages please post them rather than being vague and nonspecific."}, {"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1424898882, "post_id": 28729565, "comment_id": 45745659, "body": "@henryaaron it would give you the ability to get <code>const</code> references to the elements when you have a <code>const Class2</code>. Without it, you would not be able to access the elements from a <code>const</code> context."}, {"owner": {"reputation": 5608, "user_id": 1090389, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/62338b89232e6ad597702f289b43e343?s=128&d=identicon&r=PG", "display_name": "henryaaron", "link": "https://stackoverflow.com/users/1090389/henryaaron"}, "reply_to_user": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1424898956, "post_id": 28729565, "comment_id": 45745696, "body": "@Dai Had to do with the way I was returning them. Mistake"}, {"owner": {"reputation": 5608, "user_id": 1090389, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/62338b89232e6ad597702f289b43e343?s=128&d=identicon&r=PG", "display_name": "henryaaron", "link": "https://stackoverflow.com/users/1090389/henryaaron"}, "reply_to_user": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1424898997, "post_id": 28729565, "comment_id": 45745716, "body": "@clcto Won&#39;t be necessary. The <code>Class&amp;</code> worked well. Thank you"}, {"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 0, "creation_date": 1424899079, "post_id": 28729565, "comment_id": 45745751, "body": "@henryaaron it may not be necessary now, but in the future you will probably want a way to get read-only access to the elements if you have a read-only <code>Class2</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5608, "user_id": 1090389, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/62338b89232e6ad597702f289b43e343?s=128&d=identicon&r=PG", "display_name": "henryaaron", "link": "https://stackoverflow.com/users/1090389/henryaaron"}, "edited": false, "score": 0, "creation_date": 1424899720, "post_id": 28729779, "comment_id": 45746117, "body": "It was just a sample program to reproduce the problem... I do not have classes named <i>Class</i> and <i>Class2</i>"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "reply_to_user": {"reputation": 5608, "user_id": 1090389, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/62338b89232e6ad597702f289b43e343?s=128&d=identicon&r=PG", "display_name": "henryaaron", "link": "https://stackoverflow.com/users/1090389/henryaaron"}, "edited": false, "score": 0, "creation_date": 1424899805, "post_id": 28729779, "comment_id": 45746189, "body": "@henryaaron You could use qualifier const with some functions of the classes."}], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": true, "score": 1, "last_activity_date": 1424899081, "creation_date": 1424899081, "answer_id": 28729779, "question_id": 28729565, "link": "https://stackoverflow.com/questions/28729565/c-class-member-variables-reassignment/28729779#28729779", "title": "C++ class member variables reassignment", "body": "<p>Return reference to an object in the array</p>\n\n<pre><code>Class &amp; getClass(int index){\n    return object2[index];\n};\n</code></pre>\n\n<p>You could define the subscript operator in Class2 to access elements of the array.</p>\n\n<p>Also take into account that it is a bad idea to use class names Class and Class2.</p>\n"}, {"owner": {"reputation": 1174, "user_id": 4450336, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FvdBD.jpg?s=128&g=1", "display_name": "Daniel Robertson", "link": "https://stackoverflow.com/users/4450336/daniel-robertson"}, "is_accepted": false, "score": 0, "last_activity_date": 1424900375, "creation_date": 1424900375, "answer_id": 28730177, "question_id": 28729565, "link": "https://stackoverflow.com/questions/28729565/c-class-member-variables-reassignment/28730177#28730177", "title": "C++ class member variables reassignment", "body": "<p>Looks like I'm a little late, but my two cents would be to overload the assignment operator and create a copy constructor, just to ensure your class is copied and assigned correctly. It may be a little old fashioned, but I'm a fan of following the rule of three. <a href=\"http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29</a></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cassert&gt;\n\nclass Class1 {\n    private:\n        double balance;\n\n    public:\n        Class1() : balance(0) { };\n\n        Class1(double setBalance) :\n            balance(setBalance) { }\n\n        // create a copy constructor\n        Class1(const Class1&amp; src) : balance(src.balance) { }\n\n        // destructor that does nothing\n        ~Class1() { }\n\n        void augment(double amount) {\n            balance += amount;\n        }\n\n        double getBalance() { return(balance); }\n\n        // overload the assignment operator for your class\n        Class1&amp; operator=(const Class1 &amp;src) {\n            balance = src.balance;\n            // make sure to return *this which returns a reference to the\n            // current class object (in this case, the current Class1)\n            return(*this);\n        }\n};\n\nclass Class2 {\n    private:\n        Class1 object2[50];\n\n    public:\n        Class2 () = default;\n\n        Class1 getClass(unsigned index) {\n            assert(index &lt; 50);\n            return(object2[index]);\n        }\n\n        void setObject(int index, double balance) {\n            assert(index &lt; 50);\n            object2[index] = Class1(balance);\n        }\n};\n\nint main(int argc, char *argv[]) {\n    Class2 object;\n    object.setObject(5, 546);\n    std::cout &lt;&lt; object.getClass(5).getBalance() &lt;&lt; std::endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 5608, "user_id": 1090389, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/62338b89232e6ad597702f289b43e343?s=128&d=identicon&r=PG", "display_name": "henryaaron", "link": "https://stackoverflow.com/users/1090389/henryaaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 28729779, "answer_count": 2, "score": 1, "last_activity_date": 1424900375, "creation_date": 1424898362, "question_id": 28729565, "link": "https://stackoverflow.com/questions/28729565/c-class-member-variables-reassignment", "title": "C++ class member variables reassignment", "body": "<hr>\n\n<h2>This program</h2>\n\n<hr>\n\n<p>My object <code>Class</code> has a member variable <code>balance</code> which is set during initialization and manipulated through the method <code>augment</code> which is given a double to add to <code>balance</code>.</p>\n\n<p>The <code>Class</code> object is nested in an array in the <code>Class2</code> object which has just the array of <code>Class</code> objects as its members. The <code>Class2</code> object has a method to access a <code>Class</code> object called <code>getClass</code> and a method to manipulate a <code>Class</code> object called <code>setObject</code>.</p>\n\n<p><br></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\n\nclass Class {\n    double balance;\npublic:\n    Class();\n    Class(double setBalance);\n    void augment(double amount);\n    double getBalance();\n};\n\nclass Class2 {\n    Class object2[50];\npublic:\n    Class getClass(int index){\n        return object2[index];\n    };\n    void setObject(int index, double balance) {\n        Class temp(balance);\n        object2[index]=temp;\n    };\n};\n\nClass::Class() {\n    balance = 0;\n}\n\nClass::Class(double setBalance){\n    balance=setBalance;\n};\n\nvoid Class::augment(double amount) {\n    balance+=amount;\n};\n\ndouble Class::getBalance() {\n    return balance;\n};\n\nint main() {\n    Class2 object;\n    object.setObject(5, 546);\n    cout &lt;&lt; object.getClass(5).getBalance();\n    object.getClass(5).augment(546);\n    cout &lt;&lt; object.getClass(5).getBalance();\n    return 0;\n}\n</code></pre>\n\n<p><br></p>\n\n<hr>\n\n<h2>The problem</h2>\n\n<hr>\n\n<p>If you follow the procedure in <code>main</code>, I'm trying to initialize a <code>Class</code> object with a <code>balance</code> and manipulate the <code>balance</code> through the <code>augment</code> method. It looks like this code should work and if the object was accessed directly and not nested in <code>Class2</code> it does work, but that's not an option. I think it has to do with the way the <code>Class</code> object is returned in <code>Class2</code> but I cannot figure it out.</p>\n"}, {"tags": ["c++", "c++11", "unique-ptr"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 2, "creation_date": 1424898535, "post_id": 28729545, "comment_id": 45745464, "body": "You could use something similar to <code>BOOST_SCOPE_EXIT</code>. Normally, you&#39;d have an RAII class, though."}, {"owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "edited": false, "score": 0, "creation_date": 1424899127, "post_id": 28729545, "comment_id": 45745784, "body": "What&#39;s wrong with &quot;too easy?&quot;  It&#39;s better than misusing existing functionality like unique_ptr and thereby confusing the h**l out of the poor schmuck who has to maintain this at some point in the future."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1424899241, "post_id": 28729545, "comment_id": 45745833, "body": "Utility classes are the correct method. Writing code is about making it as easy as possible so in 6 days/weeks/months/years, whoever has to maintain it understands what it&#39;s doing. Clever is bad. Do the simplest, clearest thing."}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "reply_to_user": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1424899335, "post_id": 28729545, "comment_id": 45745887, "body": "@RobK: No new utility-classes needed when the standard ones are fine. Just needs a small maker-function."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1424899474, "post_id": 28729545, "comment_id": 45745969, "body": "whats really needed is try / finally in c++. I wonder if that&#39;s already been talked about :-)"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1424899979, "post_id": 28729545, "comment_id": 45746304, "body": "First and foremost your program should be readable. Such tricks make your intent unclear and program difficult to maintain. Some novice programmers think that doing &quot;clever&quot; tricks make them cool. With experience you learn that coolest is to make your code readable and supportable, which is actually more clever."}, {"owner": {"reputation": 857, "user_id": 2774358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7740eedc45b01cb059a83e41b6812045?s=128&d=identicon&r=PG&f=1", "display_name": "YoungJohn", "link": "https://stackoverflow.com/users/2774358/youngjohn"}, "reply_to_user": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "edited": false, "score": 0, "creation_date": 1424900689, "post_id": 28729545, "comment_id": 45746701, "body": "@pm100 many of the use cases for a finally block are already covered in c++ by using RAII. class destructors are still called when exceptions occur, and so the cleanup that would be done in finally can be done in a destructor instead."}, {"owner": {"reputation": 32321, "user_id": 173397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pqKT8.jpg?s=128&g=1", "display_name": "pm100", "link": "https://stackoverflow.com/users/173397/pm100"}, "reply_to_user": {"reputation": 857, "user_id": 2774358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7740eedc45b01cb059a83e41b6812045?s=128&d=identicon&r=PG&f=1", "display_name": "YoungJohn", "link": "https://stackoverflow.com/users/2774358/youngjohn"}, "edited": false, "score": 0, "creation_date": 1424901310, "post_id": 28729545, "comment_id": 45747007, "body": "@YoungJohn - i know RAII ,.... but the fact that people keep inventing these scoping tricks for one-offs shows that the try / finally model is really,really useful. I am fully aware of the long debate about this topic, my comment was somewhat tongue in cheek"}], "answers": [{"comments": [{"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 1, "creation_date": 1424898803, "post_id": 28729661, "comment_id": 45745612, "body": "clang tends to manage ok, but with gcc using std::function has a significant overhead, which may explain why people are reluctant."}, {"owner": {"reputation": 1937, "user_id": 972014, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7c636e5bf05e33414753115bb1d655c3?s=128&d=identicon&r=PG", "display_name": "user972014", "link": "https://stackoverflow.com/users/972014/user972014"}, "edited": false, "score": 0, "creation_date": 1424898847, "post_id": 28729661, "comment_id": 45745635, "body": "I prefer to avoid utility classes. (Edited my question accordingly)"}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "reply_to_user": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "edited": false, "score": 0, "creation_date": 1424899801, "post_id": 28729661, "comment_id": 45746186, "body": "@MarcGlisse Why is there a difference in performance? Both would be using type-erasure and thus incurring a virtual call. What does gcc do differently?"}, {"owner": {"reputation": 6533, "user_id": 1918193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b70a14318e0f417ecac47809f38fafc?s=128&d=identicon&r=PG", "display_name": "Marc Glisse", "link": "https://stackoverflow.com/users/1918193/marc-glisse"}, "reply_to_user": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 3, "creation_date": 1424899878, "post_id": 28729661, "comment_id": 45746243, "body": "Let me add a link: <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=59948\" rel=\"nofollow noreferrer\">gcc.gnu.org/bugzilla/show_bug.cgi?id=59948</a> so people reading this in a while can check if it is still true. @Pradhan That&#39;s simply some missed optimizations in gcc."}], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 0, "last_activity_date": 1424898637, "creation_date": 1424898637, "answer_id": 28729661, "question_id": 28729545, "link": "https://stackoverflow.com/questions/28729545/abusing-c11-unique-ptr-to-execute-code-upon-leaving-the-scope/28729661#28729661", "title": "Abusing c++11 unique_ptr to execute code upon leaving the scope", "body": "<p>The original C++03 <a href=\"http://www.drdobbs.com/cpp/generic-change-the-way-you-write-excepti/184403758\" rel=\"nofollow\">ScopeGuard by Petru Marginean (and a little Andrei Alexandrescu)</a> used all kinds of tricks. With C++11 you can just use a <code>std::function</code>, and lambda expressions for what you want done. E.g.</p>\n\n<pre><code>class Scope_guard\n{\nprivate:\n    function&lt;void()&gt; cleanup_;\npublic:\n    void release() { cleanup_ = []{}; }\n    ~Scope_guard() { cleanup_(); }\n    Scope_guard( function&lt;void()&gt; f )\n        : cleanup_( move( f ) )\n    {}\n};\n</code></pre>\n\n<p>Disclaimer: code not touched by compiler.</p>\n\n<p>Note: Apparently purists prefer to express this as a class template with a factory function, while simplists (simpletons?) like me prefer something like the above. But you get the idea.</p>\n"}, {"comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 1, "creation_date": 1424898842, "post_id": 28729718, "comment_id": 45745630, "body": "DRY: <i>Don&#39;t Repeat Yourself</i>"}, {"owner": {"reputation": 1937, "user_id": 972014, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7c636e5bf05e33414753115bb1d655c3?s=128&d=identicon&r=PG", "display_name": "user972014", "link": "https://stackoverflow.com/users/972014/user972014"}, "edited": false, "score": 0, "creation_date": 1424898896, "post_id": 28729718, "comment_id": 45745665, "body": "I prefer to avoid utility classes. (Edited my question accordingly)"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 1937, "user_id": 972014, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7c636e5bf05e33414753115bb1d655c3?s=128&d=identicon&r=PG", "display_name": "user972014", "link": "https://stackoverflow.com/users/972014/user972014"}, "edited": false, "score": 0, "creation_date": 1424899466, "post_id": 28729718, "comment_id": 45745961, "body": "@user972014, do you have a technical reason for wanting to avoid utility classes?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1424900270, "post_id": 28729718, "comment_id": 45746480, "body": "@RSahu that&#39;s too simple, so not allowing to express &quot;cleverness&quot; of the author"}], "owner": {"reputation": 11973, "user_id": 1419315, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e13603f86a9561d16a944963943fb8a9?s=128&d=identicon&r=PG", "display_name": "JohnB", "link": "https://stackoverflow.com/users/1419315/johnb"}, "is_accepted": false, "score": 0, "last_activity_date": 1424898807, "creation_date": 1424898807, "answer_id": 28729718, "question_id": 28729545, "link": "https://stackoverflow.com/questions/28729545/abusing-c11-unique-ptr-to-execute-code-upon-leaving-the-scope/28729718#28729718", "title": "Abusing c++11 unique_ptr to execute code upon leaving the scope", "body": "<p>Why don't you do it \"by hand\"?</p>\n\n<pre><code>{\n    struct Guard {\n        Event my_event;\n        explicit Guard (Event my_event) : my_event (my_event) { }\n        ~Guard () { my_event.set_event (); }\n    };\n    Guard guard {my_event};\n\n    /* ... */\n\n   // when scope is left, guard's destructor will be called\n}\n</code></pre>\n"}, {"owner": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "is_accepted": true, "score": 5, "last_activity_date": 1424899151, "creation_date": 1424899151, "answer_id": 28729804, "question_id": 28729545, "link": "https://stackoverflow.com/questions/28729545/abusing-c11-unique-ptr-to-execute-code-upon-leaving-the-scope/28729804#28729804", "title": "Abusing c++11 unique_ptr to execute code upon leaving the scope", "body": "<p>Define a maker-function in some header for ease-of-use:</p>\n\n<pre><code>template&lt;class F&gt; auto scope_guard(F&amp;&amp; f) {\n    return std::unique_ptr&lt;void, std::decay&lt;F&gt;::type&gt;{(void*)1, std::forward&lt;F&gt;(f)};\n}\n</code></pre>\n\n<p>And use it like:</p>\n\n<pre><code>auto unique = scope_guard([&amp;]{/* cleanup here */});\n</code></pre>\n"}], "owner": {"reputation": 1937, "user_id": 972014, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7c636e5bf05e33414753115bb1d655c3?s=128&d=identicon&r=PG", "display_name": "user972014", "link": "https://stackoverflow.com/users/972014/user972014"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 28729804, "answer_count": 3, "score": 1, "last_activity_date": 1496855357, "creation_date": 1424898281, "last_edit_date": 1496855357, "question_id": 28729545, "link": "https://stackoverflow.com/questions/28729545/abusing-c11-unique-ptr-to-execute-code-upon-leaving-the-scope", "title": "Abusing c++11 unique_ptr to execute code upon leaving the scope", "body": "<p>I want to use <code>std::unique_ptr</code>'s deleter to guarantee some code will execute upon leaving the scope. For example let's say I have a class <code>Event</code> with function <code>set_event()</code>.</p>\n\n<p>I want to make sure that upon leaving the scope, the function <code>my_event.set_event()</code> will be called. I managed to get to something similar to this:</p>\n\n<pre><code>Event my_event;\nauto releasing_function = [&amp;my_event] (void*){my_event.set_event();};\nstd::unique_ptr&lt;void, decltype(releasing_function)&gt; safe_event((void*)1, releasing_function);\n</code></pre>\n\n<p>But I feel like we can do better. Maybe a one liner without this auto lambda function, or avoiding this ugly <code>(void*)1</code>. Maybe even removing <code>unique_ptr</code> completely.</p>\n\n<p>Edit: I want to avoid utility classes. That's too easy :)</p>\n"}, {"tags": ["c++", "multithreading", "shared-ptr", "atomic"], "comments": [{"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424899400, "post_id": 28729418, "comment_id": 45745916, "body": "<a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/atomic\" rel=\"nofollow noreferrer\">atomic_load</a>"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 2164703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83e267c1cc0d8333e81fe62b13e781a6?s=128&d=identicon&r=PG", "display_name": "user2164703", "link": "https://stackoverflow.com/users/2164703/user2164703"}, "edited": false, "score": 0, "creation_date": 1424899144, "post_id": 28729656, "comment_id": 45745790, "body": "Do you mean in term of ordering, the producer could increment the counter before updating the pointer for example ?"}, {"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424899480, "post_id": 28729656, "comment_id": 45745974, "body": "<b>different instance</b>, in this case <code>dataPtr</code> is a same instance used by multiple threads therefore it is not thread-safe"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 157, "user_id": 2164703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83e267c1cc0d8333e81fe62b13e781a6?s=128&d=identicon&r=PG", "display_name": "user2164703", "link": "https://stackoverflow.com/users/2164703/user2164703"}, "edited": false, "score": 2, "creation_date": 1424899518, "post_id": 28729656, "comment_id": 45746001, "body": "@user2164703: No, consider this ordering: (1) produce dataptr (4) consume version (2) produce version (3) produce dataptr (5) consume dataptr (6) produce version"}, {"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "reply_to_user": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 1, "creation_date": 1424899778, "post_id": 28729656, "comment_id": 45746165, "body": "Thx Ben; that&#39;s what I meant: there is no ordering. @Bryan: no, the consumer have their own versions of the shared_ptr, my_ptr."}, {"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424899850, "post_id": 28729656, "comment_id": 45746222, "body": "I am saying <code>my_ptr = dataPtr</code> is <i>not</i> thread-safe. you need to use <code>atomic_load</code>"}, {"owner": {"reputation": 157, "user_id": 2164703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83e267c1cc0d8333e81fe62b13e781a6?s=128&d=identicon&r=PG", "display_name": "user2164703", "link": "https://stackoverflow.com/users/2164703/user2164703"}, "edited": false, "score": 0, "creation_date": 1424899920, "post_id": 28729656, "comment_id": 45746273, "body": "Sorry havee, i renamed my_ptr to localPtr and added the declaration for the question to be clearer. You can rename it in your answer/comment"}, {"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "edited": false, "score": 0, "creation_date": 1424899927, "post_id": 28729656, "comment_id": 45746279, "body": "The C++ reference sais otherwise."}, {"owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "reply_to_user": {"reputation": 157, "user_id": 2164703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83e267c1cc0d8333e81fe62b13e781a6?s=128&d=identicon&r=PG", "display_name": "user2164703", "link": "https://stackoverflow.com/users/2164703/user2164703"}, "edited": false, "score": 0, "creation_date": 1424899983, "post_id": 28729656, "comment_id": 45746311, "body": "@user2164703: thx, it was obvious to me but now it&#39;s even better."}, {"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424900036, "post_id": 28729656, "comment_id": 45746338, "body": "I just edit your answer to highlight my point. again, use <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/atomic\" rel=\"nofollow noreferrer\">atomic_load</a>"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "reply_to_user": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424900504, "post_id": 28729656, "comment_id": 45746601, "body": "@BryanChen: You&#39;re wrong, though.  The data race comes from the concurrent write, not from multiple reads of the shared_ptr.  See the last paragraph of <code>[[util.smartptr.shared]]</code>"}], "owner": {"reputation": 4091, "user_id": 26083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b4f3460b142d0ba37de98d1b04655?s=128&d=identicon&r=PG", "display_name": "haavee", "link": "https://stackoverflow.com/users/26083/haavee"}, "is_accepted": true, "score": 1, "last_activity_date": 1424938464, "last_edit_date": 1424938464, "creation_date": 1424898628, "answer_id": 28729656, "question_id": 28729418, "link": "https://stackoverflow.com/questions/28729418/is-this-lock-free-design-thread-safe/28729656#28729656", "title": "Is this lock free design thread safe?", "body": "<p>According to <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/memory/shared_ptr</a>: yes. <code>my_ptr = dataPtr</code> is thread-safe.</p>\n\n<blockquote>\n  <p>All member functions (including copy constructor and copy assignment)\n  can be called by multiple threads on different instances of shared_ptr\n  without additional synchronization even if these instances are copies\n  and share ownership of the same object.</p>\n</blockquote>\n\n<p>There is no guarantee though that the version you think you're loading will be the one you will be loading; the setting of the pointer by the producer and the the upping of the version number are not an <code>atomic</code> operation and neither is the reading of the pointer by the consumer and the updating of the version number by the consumer.</p>\n"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "is_accepted": false, "score": 3, "last_activity_date": 1424899638, "creation_date": 1424899638, "answer_id": 28729946, "question_id": 28729418, "link": "https://stackoverflow.com/questions/28729418/is-this-lock-free-design-thread-safe/28729946#28729946", "title": "Is this lock free design thread safe?", "body": "<p>As haavee points out, multiple threads can safely simultaneously do</p>\n\n<pre><code>localPtr = dataPtr;\n</code></pre>\n\n<p>because the shared variable is only read, and the shared metadata block which is updated in the process has a special thread safety guarantee.</p>\n\n<p>However, there is a race between</p>\n\n<pre><code>dataPtr.reset(newdata); // in producer, a WRITE to the shared_ptr\nlocalPtr = dataPtr;     // in consumer, an access to the same shared_ptr\n</code></pre>\n\n<p>so this design is NOT thread-safe.</p>\n"}, {"comments": [{"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1424899835, "post_id": 28729948, "comment_id": 45746209, "body": "@BenVoigt It would only race if swap were not atomic. The consumers &quot;race&quot; who gets the job to be done. But it is not a race where one data instance can be processed more than once. There is a chance, that 1 Data item is not processed at all, but that is what he wanted."}, {"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424899952, "post_id": 28729948, "comment_id": 45746291, "body": "swap is not thread-safe. use <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/atomic\" rel=\"nofollow noreferrer\">atomic_exchange</a>"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1424900085, "post_id": 28729948, "comment_id": 45746372, "body": "<a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr/swap\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/memory/shared_ptr/swap</a> is as shallow a documentation as it can get. My assumption was that shared_ptr&lt;&gt;::swap() does an atomic exchange. If it does not, std::atomic_exchange() needs to be used. This is one of the reasons why I prefer to use native functions for my concurrency and not those c++11 files. Then at least I know what happens."}, {"owner": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424900190, "post_id": 28729948, "comment_id": 45746434, "body": "you can only assume things are not thread-safe. not otherwise."}, {"owner": {"reputation": 157, "user_id": 2164703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83e267c1cc0d8333e81fe62b13e781a6?s=128&d=identicon&r=PG", "display_name": "user2164703", "link": "https://stackoverflow.com/users/2164703/user2164703"}, "edited": false, "score": 0, "creation_date": 1424900208, "post_id": 28729948, "comment_id": 45746449, "body": "Thks but different consumers consume the same data, because they are not homogeneous consumers, they are in fact doing different things with the same data (imagine different model for the same inputs)."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1424900578, "post_id": 28729948, "comment_id": 45746638, "body": "Still races.  The producer needs to use an atomic operation also."}], "owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "is_accepted": false, "score": 0, "last_activity_date": 1424906189, "last_edit_date": 1424906189, "creation_date": 1424899647, "answer_id": 28729948, "question_id": 28729418, "link": "https://stackoverflow.com/questions/28729418/is-this-lock-free-design-thread-safe/28729948#28729948", "title": "Is this lock free design thread safe?", "body": "<p>This code appears rather constructed to me. What would be the benefit if a random number of consumers looked at the same data? (This is what would happen in your code, though in a technically thread-safe manner.)</p>\n\n<p>If you want to have a first consumer takes data others don't kind of scheme, you might want to atomically swap the dataPtr for a empty() shared_ptr from each consumer. Then after the swap the consumer checks for what he got to be non-empty and does the computation. All other consumers who did the same, will get an empty() shared ptr after their respective swap. </p>\n\n<p>After removing the the version number from your code, you got a lock free- use-once producer consumer scheme.</p>\n\n<pre><code>std::shared_ptr&lt;Data&gt; dataPtr;\n\nvoid Producer()\n{\n    std::shared_ptr&lt;Data&gt; newOne = std::shared_ptr&lt;Data&gt;::make_shared();\n    std::atomic_exchange(dataPtr, newOne);\n}\n\n// called from multiple threads\nvoid Consumer()\n{\n    std::shared_ptr&lt;Data&gt; mine;\n    std::atomic_exchange(mine,dataPtr);\n    if( !mine.empty() )\n    {  // compute, using mine. Only one thread is lucky for any given Data instance stored by producer.\n    }\n}\n</code></pre>\n\n<p>EDIT:\nAs it turns out from documentation found <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow\">here</a>, shared_ptr::swap() is not atomic. Adjusted the code accordingly.\nEDIT2: Producer corrected. One more reason not to use that stuff in the first place. </p>\n\n<p>For the use case you describe, when you really don't care if some consumers miss something now and then, here a complete implementation, which packs the version number together with the data. The template allows to use that for other types as well. Maybe with a few more constructors, deletes etc. added...</p>\n\n<pre><code>#include \"stdafx.h\"\n#include &lt;cstdint&gt;\n#include &lt;string&gt;\n#include &lt;memory&gt;\n#include &lt;atomic&gt;\n#include &lt;thread&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;chrono&gt;\n\n\ntemplate &lt;class _T&gt;\nclass Versioned\n{\n    _T m_data;\n    uint32_t m_version;\n    static std::atomic&lt;uint32_t&gt; s_next;\npublic: \n    Versioned(_T &amp; data)\n        : m_data(data)\n        , m_version(s_next.fetch_add(1UL))\n    {}\n    ~Versioned()\n    {\n\n    }\n    const _T &amp; Data() const\n    {\n        return m_data;\n    }\n    uint32_t Version() const\n    {\n        return m_version;\n    }\n};\n\ntemplate &lt;class _T&gt;\nstd::atomic&lt;uint32_t&gt; Versioned&lt;_T&gt;::s_next;\n\ntypedef Versioned&lt;std::string&gt; VersionedString;\n\nstatic volatile bool s_running = true;\nstatic std::shared_ptr&lt;VersionedString&gt; s_dataPtr;\n\nint _tmain(int argc, _TCHAR* argv[])\n{\n    std::vector&lt;std::thread&gt; consumers;\n    for (size_t i = 0; i &lt; 3; ++i)\n    {\n        consumers.push_back(std::thread([]()\n        { \n            uint32_t oldVersion = ~0UL;\n            std::shared_ptr&lt;VersionedString&gt; mine; \n            while (s_running)\n            {\n                mine = std::atomic_load(&amp;s_dataPtr);\n                if (mine)\n                {\n                    if (mine-&gt;Version() != oldVersion)\n                    {\n                        oldVersion = mine-&gt;Version();\n\n                        // No lock taken for cout -&gt; chaotic output possible.\n                        std::cout &lt;&lt; mine-&gt;Data().c_str();\n                    }\n                }\n            }\n        }));\n    }\n\n    for (size_t i = 0; i &lt; 100; ++i)\n    {\n        std::shared_ptr&lt;VersionedString&gt; next = std::make_shared&lt;VersionedString&gt;(std::string(\"Hello World!\"));\n        std::atomic_store(&amp;s_dataPtr, next);\n        std::this_thread::sleep_for(std::chrono::milliseconds(100));\n    }\n\n    s_running = false;\n    for (auto&amp; t : consumers)\n    {\n        t.join();\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1424916302, "post_id": 28731903, "comment_id": 45752096, "body": "There are valid situations where actually it makes sense to go for lock free designs. Whenever it is not a &quot;reactive&quot; system but rather some number crunching application. With high frequency context switches you soon have not much left for the calculations. What he tries to do here makes sense if this is some kind of side-scenario within such a computation task. The threads are not spinning idly but do the &quot;real&quot; work. See for example a state of the art chess program and think about how it would perform if you made it &quot;event driven&quot;. <a href=\"https://stockfishchess.org/download/\" rel=\"nofollow noreferrer\">stockfishchess.org/download</a>"}, {"owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "reply_to_user": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1424938729, "post_id": 28731903, "comment_id": 45758892, "body": "Indeed there might be rare cases where custom-made lock free designs are the solution. In that case there is no need to package them into a general purpose synchronization object, they are just a part of a carefully balanced global software design. And how many programmers out there are expert enough to design a chess program in the first place?"}, {"owner": {"reputation": 7873, "user_id": 2225104, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/195de66794c596e35bc145c80e9f5515?s=128&d=identicon&r=PG", "display_name": "BitTickler", "link": "https://stackoverflow.com/users/2225104/bittickler"}, "edited": false, "score": 0, "creation_date": 1424964816, "post_id": 28731903, "comment_id": 45775160, "body": "Actually after posting the above, I did have a look at the sources and...I am disappointed :)"}], "owner": {"reputation": 7651, "user_id": 2960823, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/otSfG.jpg?s=128&g=1", "display_name": "kuroi neko", "link": "https://stackoverflow.com/users/2960823/kuroi-neko"}, "is_accepted": false, "score": 0, "last_activity_date": 1424907681, "creation_date": 1424907681, "answer_id": 28731903, "question_id": 28729418, "link": "https://stackoverflow.com/questions/28729418/is-this-lock-free-design-thread-safe/28731903#28731903", "title": "Is this lock free design thread safe?", "body": "<p>Conceptually your \"lock free\" scheme is just a waste of time and CPU. </p>\n\n<p>If you don't care about losing intermediate versions, simply have your producer limit its output to a frequency the consumers can cope with, and use a shared queue or any of the tried and proved inter-task communication mechanisms to pass data packets around.</p>\n\n<p>Real-time systems are all about guaranteeing responsiveness, and a good design tries to put a reasonable cap on that instead of burning CPU for the sake of coolness.</p>\n\n<p>C++11 and the new \"non blocking\" whim of fashion are doing so much harm by luring every man and his dog into believing a couple of atomic variables will solve every synchronization problem. As a matter of fact, they won't.</p>\n"}], "owner": {"reputation": 157, "user_id": 2164703, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/83e267c1cc0d8333e81fe62b13e781a6?s=128&d=identicon&r=PG", "display_name": "user2164703", "link": "https://stackoverflow.com/users/2164703/user2164703"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 28729656, "answer_count": 4, "score": 1, "last_activity_date": 1424938464, "creation_date": 1424897863, "last_edit_date": 1424899319, "question_id": 28729418, "link": "https://stackoverflow.com/questions/28729418/is-this-lock-free-design-thread-safe", "title": "Is this lock free design thread safe?", "body": "<p>In different threads I do the following:</p>\n\n<p><em>shared variable:</em></p>\n\n<pre><code>std::shared_ptr&lt;Data&gt; dataPtr;\nstd::atomic&lt;int&gt; version_number;\n</code></pre>\n\n<p>Thread1, the producer receive new data and do</p>\n\n<pre><code>dataPtr.reset(newdata);\nversion_number++;\n</code></pre>\n\n<p>Other threads, consumers are doing:</p>\n\n<pre><code>int local_version=0;\nstd::shared_ptr&lt;Data&gt; localPtr;\nwhile(local_version!=version_number)\n localPtr=dataPtr;\n ...operation on my_ptr...\n localPtr.reset();\n local_version=version_number.load();\n</code></pre>\n\n<p>Here I know that the consumers might skip some version, if they are processing data and new updates keep going, thats fine by me, i dont need them to process all versions, just the last available to them.\nMy question is, is this line atomic : </p>\n\n<pre><code>localPtr=dataPtr;\n</code></pre>\n\n<p>Will I always obtain the last version of what is in dataPtr or will this be cached or might lead to anything wrong in my design ?</p>\n\n<p>Thks. </p>\n"}, {"tags": ["c++", "unix", "c++11"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1424897688, "post_id": 28729349, "comment_id": 45745009, "body": "RIIA -&gt; RAII (Resource Acquisition Is Initialization)"}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 1, "creation_date": 1424897747, "post_id": 28729349, "comment_id": 45745043, "body": "What do you think the control flow of your program is when you press Ctrl-C?"}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "reply_to_user": {"reputation": 42460, "user_id": 642626, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/fedc5e6b7fef29a8b539e20da8c85971?s=128&d=identicon&r=PG", "display_name": "Bryan Chen", "link": "https://stackoverflow.com/users/642626/bryan-chen"}, "edited": false, "score": 0, "creation_date": 1424898522, "post_id": 28729349, "comment_id": 45745461, "body": "@BryanChen - This is a normal class called from an instance of ServerApplication of the POCO framework. Not much code at all, actually."}, {"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1424898563, "post_id": 28729349, "comment_id": 45745479, "body": "@KerrekSB - I don&#39;t know. I guess the operating system sends a signal to the process and kills it."}], "answers": [{"comments": [{"owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "edited": false, "score": 0, "creation_date": 1424898784, "post_id": 28729596, "comment_id": 45745595, "body": "Sending the signal does indeed raise an exception. I guess I need to catch the signal and clean up when that happens."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 0, "creation_date": 1424898947, "post_id": 28729596, "comment_id": 45745690, "body": "Yes, you need to have the daemon exit gracefully, not just abort."}], "owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1424898442, "creation_date": 1424898442, "answer_id": 28729596, "question_id": 28729349, "link": "https://stackoverflow.com/questions/28729349/destructor-not-being-called-as-expected/28729596#28729596", "title": "Destructor not being called as expected", "body": "<p>Signal processing and C++ exceptions are distinct features. Signals (chiefly a *nix feature) are caught by signal handlers; I believe that although in a sense certainly the \"scope\" changes, it is changed from outside the C++ run time and thus does not trigger the usual stack unwinding (it's like moving in a second dimension with respect to the stack, so to speak). Googling pointed me to this post which I found interesting: <a href=\"https://gcc.gnu.org/ml/gcc-help/2011-08/msg00253.html\" rel=\"nofollow\">https://gcc.gnu.org/ml/gcc-help/2011-08/msg00253.html</a>. </p>\n"}], "owner": {"reputation": 11354, "user_id": 70600, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/6123be50f7a10302e7bf59dcdc5e2623?s=128&d=identicon&r=PG", "display_name": "ruipacheco", "link": "https://stackoverflow.com/users/70600/ruipacheco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 28729596, "answer_count": 1, "score": 0, "last_activity_date": 1424898641, "creation_date": 1424897593, "last_edit_date": 1424898641, "question_id": 28729349, "link": "https://stackoverflow.com/questions/28729349/destructor-not-being-called-as-expected", "title": "Destructor not being called as expected", "body": "<p>I'm writing a server application. Following RIIA, in the constructor of one of my classes I create a file and in the destructor I delete it. This class is wrapped in a unique_ptr. This being a server application, I can only kill it by sending it a signal (SIGINT).</p>\n\n<p>The strange part is that I've placed std::cerr statements on the destructors of the class held by the unique_ptr and they're not called when the application closes/dies.</p>\n\n<p>Is this expected when ctrl+c is pressed or am I missing something obvious in relation to destructors?</p>\n"}, {"tags": ["c++", "arduino", "spi", "24-bit"], "comments": [{"owner": {"reputation": 35205, "user_id": 2891664, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9df9d7af70d46f8db2ecd4392bb76087?s=128&d=identicon&r=PG&f=1", "display_name": "Radiodef", "link": "https://stackoverflow.com/users/2891664/radiodef"}, "edited": false, "score": 0, "creation_date": 1424897729, "post_id": 28729088, "comment_id": 45745028, "body": "What&#39;s the question exactly?"}, {"owner": {"reputation": 14339, "user_id": 1466970, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/V1J6z.jpg?s=128&g=1", "display_name": "Richard Chambers", "link": "https://stackoverflow.com/users/1466970/richard-chambers"}, "edited": false, "score": 0, "creation_date": 1424898073, "post_id": 28729088, "comment_id": 45745222, "body": "<a href=\"http://stackoverflow.com/questions/2916191/c-c-convert-24-bit-signed-integer-to-float\" title=\"c c convert 24 bit signed integer to float\">stackoverflow.com/questions/2916191/&hellip;</a> may help you."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1469184844, "post_id": 28729088, "comment_id": 64443697, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2345902/division-result-is-always-zero\">Division result is always zero</a>"}], "answers": [{"owner": {"reputation": 550, "user_id": 4596797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/980708640d67708d1f37365bbaba058d?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Derevyanko", "link": "https://stackoverflow.com/users/4596797/andrey-derevyanko"}, "is_accepted": false, "score": 1, "last_activity_date": 1424897913, "creation_date": 1424897913, "answer_id": 28729431, "question_id": 28729088, "link": "https://stackoverflow.com/questions/28729088/convert-24-bit-2s-compliment-msb-first-value-to-a-voltage/28729431#28729431", "title": "Convert 24 bit 2&#39;s Compliment (MSB first) value to a voltage", "body": "<p>The problem is in long type you're using.\nIt's integer one and as the result is less than 1 you have 0 as result.\nUsing floats you'll have:</p>\n\n<p>(result * 0x5) = 110101100010101001 = 219,305</p>\n\n<p>maxValue = 0x7FFFFF = 8,388,607</p>\n\n<p>Result = 219,305 / 8,388,607 = 0.026 [Volts]</p>\n"}, {"owner": {"reputation": 288867, "user_id": 207421, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5cfe5f7d64f44be04f147295f5c7b88e?s=128&d=identicon&r=PG", "display_name": "user207421", "link": "https://stackoverflow.com/users/207421/user207421"}, "is_accepted": true, "score": 1, "last_activity_date": 1424902636, "creation_date": 1424902636, "answer_id": 28730744, "question_id": 28729088, "link": "https://stackoverflow.com/questions/28729088/convert-24-bit-2s-compliment-msb-first-value-to-a-voltage/28730744#28730744", "title": "Convert 24 bit 2&#39;s Compliment (MSB first) value to a voltage", "body": "<p>Yu're trying to store a fraction into a long. The result will always be zero. You need to cast one of the operands to double and store the result in a double.</p>\n"}], "owner": {"reputation": 31, "user_id": 4455045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/27202bd7fca0c9891c8dafdf080d29f1?s=128&d=identicon&r=PG&f=1", "display_name": "Aaru", "link": "https://stackoverflow.com/users/4455045/aaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 28730744, "answer_count": 2, "score": 0, "last_activity_date": 1469184724, "creation_date": 1424896663, "last_edit_date": 1469184724, "question_id": 28729088, "link": "https://stackoverflow.com/questions/28729088/convert-24-bit-2s-compliment-msb-first-value-to-a-voltage", "title": "Convert 24 bit 2&#39;s Compliment (MSB first) value to a voltage", "body": "<p>I have an ADC (AD7767) that I am using to measure a differential signal. The data coming from the ADC is a 2's compliment MSB first 24 bit value. I want to convert this value to a voltage. The reference voltage being used is 5 Volts. I'm using the Arduino IDE. What I have so far is basically this:</p>\n\n<pre><code>const long minValue = 0x800000;\nconst long maxValue = 0x7FFFFF;\nsigned long result = 0;\n....\nlong voltage = (result * 0x5) / maxValue;\nSerial.println(voltage);\n</code></pre>\n\n<p>This prints a value of 0. </p>\n\n<p>What the values are:</p>\n\n<pre><code>result = 1010101101010101\n</code></pre>\n\n<p>0x5: aka <code>Vref</code></p>\n\n<pre><code>(result * 0x5) = 110101100010101001\n(result * 0x5) / maxValue = 0\n</code></pre>\n"}, {"tags": ["c#", "c++", "dll", "pinvoke", "loadlibrary"], "comments": [{"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 2, "creation_date": 1424898093, "post_id": 28728891, "comment_id": 45745232, "body": "It&#39;s pretty certain that freeing the library twice is why it fails on subsequent reload. Why do you feel you need to free it twice?"}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1424899434, "post_id": 28728891, "comment_id": 45745944, "body": "That behaviour cannot readily be re-produced. So until you can show us how to reproduce this, there&#39;s nothing to answer."}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1424901162, "post_id": 28728891, "comment_id": 45746939, "body": "@DavidHeffernan You&#39;re right. I should think about how to provide information to be able to reproduce this behavior."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1424901821, "post_id": 28728891, "comment_id": 45747266, "body": "My psychic debugger says that you forgot to post your [DllImport] declaration that <i>also</i> uses this DLL.  You cannot do it both ways."}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1424957527, "post_id": 28728891, "comment_id": 45770201, "body": "@HansPassant Right, I added now."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1424958235, "post_id": 28728891, "comment_id": 45770660, "body": "You still cannot do it both ways."}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1424961432, "post_id": 28728891, "comment_id": 45772866, "body": "@HansPassant I didn&#39;t understand what you meant. Can you explain."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1424961562, "post_id": 28728891, "comment_id": 45772964, "body": "Not until you explain why you think you need to do this.  Up until now it looks completely pointless to use LoadLibrary."}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1424961795, "post_id": 28728891, "comment_id": 45773114, "body": "@HansPassant I was using <code>LoadLibrary</code> to be able to use <code>SetDllDirectory</code>, but I think you mean it is a better idea to use <a href=\"http://stackoverflow.com/a/11418341/3405291\">this</a> procedure. Right?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1424961914, "post_id": 28728891, "comment_id": 45773195, "body": "Hmm, hardly.  But given how confused you are about SetDllDirectory(), you&#39;ll certainly have better luck with that."}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1424962035, "post_id": 28728891, "comment_id": 45773270, "body": "@HansPassant I&#39;m going to test with <a href=\"http://stackoverflow.com/a/11418341/3405291\">that</a> procedure."}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1424962152, "post_id": 28728891, "comment_id": 45773353, "body": "@HansPassant btw, please let me know if I&#39;m not aware of any better procedure to use instead of <code>SetDllDirectory</code>."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1424962406, "post_id": 28728891, "comment_id": 45773532, "body": "SetDllDirectory is fine. You have to stop calling LoadLibrary. Then it&#39;s all good. Or follow the rules and call FreeLibrary as many times as you called LoadLibrary."}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1427204283, "post_id": 28728891, "comment_id": 46674192, "body": "Down-vote is not fair!"}], "answers": [{"comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1424899490, "post_id": 28729523, "comment_id": 45745980, "body": "I think that the asker knows this but can&#39;t understand why the number of calls to <code>LoadLibrary</code> doesn&#39;t match the number made to <code>FreeLibrary</code>. Do you know why?"}], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": -1, "last_activity_date": 1424898229, "creation_date": 1424898229, "answer_id": 28729523, "question_id": 28728891, "link": "https://stackoverflow.com/questions/28728891/have-to-do-freelibrary-2-times-although-i-have-done-loadlibrary-only-1-time-als/28729523#28729523", "title": "Have to do FreeLibrary 2 times although I have done LoadLibrary only 1 time. Also, after unloading DLL, when trying to load it again, error happens", "body": "<p>According to <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683152%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms683152%28v=vs.85%29.aspx</a> (the first google hit) <code>If the function succeeds, the return value is nonzero.</code> Your unload loop basically says \"as long as freeing the library worked, free it again, until the unload fails\".</p>\n"}, {"comments": [{"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1424899515, "post_id": 28729559, "comment_id": 45745999, "body": "The question is asking why that second call succeeds. Can you explain why that happens?"}, {"owner": {"reputation": 219, "user_id": 3469133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f7a2b26f98e2cd51e113a53e787b37?s=128&d=identicon&r=PG&f=1", "display_name": "rgoble", "link": "https://stackoverflow.com/users/3469133/rgoble"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1424922492, "post_id": 28729559, "comment_id": 45753560, "body": "The second call doesn&#39;t succeed, it fails. The docs clearly state that it returns 0 if there is an error, which is why it exits the loop after the second call."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1424934108, "post_id": 28729559, "comment_id": 45756943, "body": "The second call succeeds which is why it enters the loop body a second time"}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1424959520, "post_id": 28729559, "comment_id": 45771524, "body": "@rgoble I implemented your procedure with <code>GetModuleHandle</code> and behavior is the same: I load DLL 1 time, and <code>int_FreeLibrary_counter++</code> shows that it has to be unloaded 2 times."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "reply_to_user": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 1, "creation_date": 1424962288, "post_id": 28729559, "comment_id": 45773454, "body": "@user Why did you think anything would change. rgoble hasn&#39;t attempted to explain where the extra ref count comes from."}, {"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1424962504, "post_id": 28729559, "comment_id": 45773609, "body": "@DavidHeffernan You&#39;re right. Code of rgoble was basically doing the same thing, no change expected."}, {"owner": {"reputation": 219, "user_id": 3469133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f7a2b26f98e2cd51e113a53e787b37?s=128&d=identicon&r=PG&f=1", "display_name": "rgoble", "link": "https://stackoverflow.com/users/3469133/rgoble"}, "reply_to_user": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 0, "creation_date": 1424966982, "post_id": 28729559, "comment_id": 45776720, "body": "@DavidHeffernan You were correct that it was unloading it twice. I was mistaken and thought FreeLibrary was only being called twice, but it was actually called 3 times."}], "owner": {"reputation": 219, "user_id": 3469133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46f7a2b26f98e2cd51e113a53e787b37?s=128&d=identicon&r=PG&f=1", "display_name": "rgoble", "link": "https://stackoverflow.com/users/3469133/rgoble"}, "is_accepted": false, "score": 0, "last_activity_date": 1424923891, "last_edit_date": 1424923891, "creation_date": 1424898333, "answer_id": 28729559, "question_id": 28728891, "link": "https://stackoverflow.com/questions/28728891/have-to-do-freelibrary-2-times-although-i-have-done-loadlibrary-only-1-time-als/28729559#28729559", "title": "Have to do FreeLibrary 2 times although I have done LoadLibrary only 1 time. Also, after unloading DLL, when trying to load it again, error happens", "body": "<p>If you only call LoadLibrary once then you only need to call FreeLibrary once as well. Calling it a second time is moving into undefined behavior.</p>\n\n<p>If you look at the MSDN docs <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683152%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms683152%28v=vs.85%29.aspx</a> the function returns a non zero value if it succeeds, or 0 if there is an error.</p>\n\n<p>If you want to be sure that its unloaded then you can call GetModuleHandle on it after the call to FreeLibrary and it should return null.\n<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms683199(v=vs.85).aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms683199(v=vs.85).aspx</a></p>\n\n<p>Updated your invoke method class to include:</p>\n\n<pre><code>[DllImport(\"kernel32.dll\", CharSet=CharSet.Auto, SetLastError=true)]\npublic static extern IntPtr GetModuleHandle(string lpModuleName);\n</code></pre>\n\n<p>Then change your button5 click handler to the following:</p>\n\n<pre><code>private void button5_Click(object sender, EventArgs e)\n{\n    try\n    {\n        int freeCount = 0;\n        while(Call_DLL.GetModuleHandle(\"DLL.dll\") != System.IntPtr.Zero)\n        {\n             Call_DLL.FreeLibrary(SystemIntPtr_handle_of_DLL);\n             freeCount++;\n        }\n\n        MessageBox.Show(\"DLL unloaded. You will have to load it again. (Unloaded\" + int_FreeLibrary_counter + \" times)\");\n     }\n     catch(Exception Exception_Object)\n     {\n        MessageBox.Show(Exception_Object.Message);\n     }\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "edited": false, "score": 0, "creation_date": 1424966779, "post_id": 28745693, "comment_id": 45776580, "body": "In a comment of <a href=\"http://stackoverflow.com/a/11418341/3405291\">this</a> post, it is mentioned that <i>Path set via SetDllDirectory function will not be used when you&#39;re loading dlls via .NET interop (DllImport)</i>. My observation implies that that comment looks misleading."}], "owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "is_accepted": true, "score": 5, "last_activity_date": 1424962801, "creation_date": 1424962801, "answer_id": 28745693, "question_id": 28728891, "link": "https://stackoverflow.com/questions/28728891/have-to-do-freelibrary-2-times-although-i-have-done-loadlibrary-only-1-time-als/28745693#28745693", "title": "Have to do FreeLibrary 2 times although I have done LoadLibrary only 1 time. Also, after unloading DLL, when trying to load it again, error happens", "body": "<p>The update to your question provides enough information to explain the behaviour.</p>\n\n<ol>\n<li>You call <code>LoadLibrary</code> to load your DLL which accounts for one of the references.</li>\n<li>You call <code>DllImport</code> p/invoke functions which in turn lead to a call to <code>LoadLibrary</code>. That's the other reference to the library.</li>\n<li>Then when you call <code>FreeLibrary</code>, this succeeds twice since there were two calls to <code>LoadLibrary</code>.</li>\n</ol>\n\n<p>But now you are in trouble because you've gone behind the back of the p/invoke system and it still believes that it owns one of the references to the DLL. A reference that you stole from it with your second call to <code>FreeLibrary</code>.</p>\n\n<p>I guess that the information you are missing is how the <code>DllImport</code> p/invokes bind to the function. You are hoping that they will obtain a module handle by calling <code>GetModuleHandle</code>. They don't. They call <code>LoadLibrary</code>. They do this the first time they are called and the module they load stays loaded until the assembly itself unloads.</p>\n\n<p>What you have to do, above all else, is follow the rules. The rules state that each call to <code>LoadLibrary</code> is to be matched by a call to <code>FreeLibrary</code>. You call <code>LoadLibrary</code> once. So you must call <code>FreeLibrary</code> exactly once also. Stop calling it twice and all is well.</p>\n\n<p>I suspect that you are actually trying to arrange a system whereby you can load and unload DLLs. This prevents you from using p/invoke via <code>DllImport</code>. You'll have to do it all with <code>LoadLibrary</code> and <code>GetProcAddress</code>.</p>\n\n<p>Your usage of <code>SetDllDirectory</code> looks somewhat messed up. What do you expect <code>\".\\\\DLL_Dependencies\\\\\"</code> to be relative to? Supply a full path. </p>\n"}, {"owner": {"reputation": 1, "user_id": 12791987, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCLfePePmnESZwbSTRKkWlv4vEu8Jp6lJwIQ8k6Gw=k-s128", "display_name": "Aironangel", "link": "https://stackoverflow.com/users/12791987/aironangel"}, "is_accepted": false, "score": 0, "last_activity_date": 1583919790, "creation_date": 1583919790, "answer_id": 60633080, "question_id": 28728891, "link": "https://stackoverflow.com/questions/28728891/have-to-do-freelibrary-2-times-although-i-have-done-loadlibrary-only-1-time-als/60633080#60633080", "title": "Have to do FreeLibrary 2 times although I have done LoadLibrary only 1 time. Also, after unloading DLL, when trying to load it again, error happens", "body": "<p>I know that this question come to completion, but working on a similar problem I have found a way to load and unload library dynamically using DllImport and without exceptions.</p>\n\n<p>The approach is based on these stakeholders:<br/>\n<strong>- the DllImport load the library on the first call to a method wrapped.<br/>\n- if a library is alredy loaded on the stack the call to a method will use this instance of the library instead load another one</strong></p>\n\n<p>based on these considerations you can manage your module in this way:</p>\n\n<ol>\n<li>implement your class which wrap the library<br/></li>\n</ol>\n\n<pre><code>    public class MyWrapper\n    {\n        int _libraryHandle = 0;\n\n        [DllImport(\"mylibrary.dll\")]\n        public external static void MyMethod();\n    }\n</code></pre>\n\n<ol start=\"2\">\n<li>in the constructor load the library using LoadLibrary:<br/></li>\n</ol>\n\n<pre><code>    public MyWrapper()\n    {\n        _libraryHandle = LoadLibrary(\"mylibrary.dll\");\n    }\n</code></pre>\n\n<ol start=\"3\">\n<li>in the dispose method unload the library using FreeLibrary:<br/></li>\n</ol>\n\n<pre><code>    public Dispose()\n    {\n        FreeLibrary(_libraryHandle);\n    }\n</code></pre>\n\n<p>in this way everytime you'll instance your wrapper a new occurrence of the library will be loaded on the stack without any exception.</p>\n"}], "owner": {"reputation": 5298, "user_id": 3405291, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f6499e84a22df10a3f4fec15a8bd0d06?s=128&d=identicon&r=PG&f=1", "display_name": "user3405291", "link": "https://stackoverflow.com/users/3405291/user3405291"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1936, "favorite_count": 0, "accepted_answer_id": 28745693, "answer_count": 4, "score": -1, "last_activity_date": 1583919790, "creation_date": 1424895888, "last_edit_date": 1424958056, "question_id": 28728891, "link": "https://stackoverflow.com/questions/28728891/have-to-do-freelibrary-2-times-although-i-have-done-loadlibrary-only-1-time-als", "title": "Have to do FreeLibrary 2 times although I have done LoadLibrary only 1 time. Also, after unloading DLL, when trying to load it again, error happens", "body": "<p>Have the following C# code for loading and unloading a C++ DLL. </p>\n\n<p>I load DLL only once, but code has to unload DLL 2 times. Also after unloading DLL, when I load it again, and I call DLL's exported function, I get the following error message: </p>\n\n<blockquote>\n  <p>Attempted to read or write protected memory. This is often an indication that other memory is corrupt. </p>\n</blockquote>\n\n<p>DLL depends on other DLLs. </p>\n\n<pre><code>    /// //////////////handle of FDD DLL:\n    System.IntPtr SystemIntPtr_handle_of_DLL=System.IntPtr.Zero;\n\n    private void button4_Click(object sender, EventArgs e)\n    {\n        try\n        {\n            string string_Dependency_path = \".\\\\DLL_Dependencies\\\\\";\n            Call_DLL.SetDllDirectory(string_Dependency_path);\n            SystemIntPtr_handle_of_DLL = Call_DLL.LoadLibrary(\"DLL.dll\");\n            if (SystemIntPtr_handle_of_DLL == System.IntPtr.Zero) { throw new Exception(\"DLL did not load\"); }\n\n        }\n        catch (Exception Exception_Object) { MessageBox.Show(Exception_Object.Message); }\n    }\n\n    private void button5_Click(object sender, EventArgs e)\n    {\n        try\n        {\n            int int_FreeLibrary_counter = 0;\n            while (Call_DLL.FreeLibrary(SystemIntPtr_handle_of_DLL))\n            {\n                int_FreeLibrary_counter++;\n            }\n            MessageBox.Show(\"DLL unloaded. You will have to load it again. (Unloaded\" + int_FreeLibrary_counter + \" times)\");\n        }\n        catch (Exception Exception_Object) { MessageBox.Show(Exception_Object.Message); }\n    }\n</code></pre>\n\n<p>The invoke method: </p>\n\n<pre><code>class Call_DLL\n{\n    [DllImport(\"kernel32.dll\", CharSet = CharSet.Unicode, SetLastError = true)]\n    [return: MarshalAs(UnmanagedType.Bool)]\n    public static extern bool SetDllDirectory(string string_Dependency_path);\n    [DllImport(\"kernel32.dll\")]\n    public static extern IntPtr LoadLibrary(string string_DLL_name);\n    [DllImport(\"kernel32.dll\", SetLastError = true)]\n    [return: MarshalAs(UnmanagedType.Bool)]\n    public static extern bool FreeLibrary(IntPtr IntPtr_handle_of_DLL);\n}\n</code></pre>\n\n<h2>EDIT</h2>\n\n<p>I forgot to include the following which call DLL exported functions, after loading DLL and before unloading DLL. It makes sense to think that something else is going on inside these exported functions which is causing strange behavior (i.e. loading 1 time, having to unload 2 times):</p>\n\n<pre><code>    [DllImport(@\"DLL.dll\", EntryPoint = \"getFreq\")]\n    public static extern System.IntPtr getFreq([In, Out, MarshalAs(UnmanagedType.LPStr)] string char_Address, [In, Out, MarshalAs(UnmanagedType.I4)]int int_Num, [In, Out, MarshalAs(UnmanagedType.I4)]int int_Samp);\n    [DllImport(@\"DLL.dll\", EntryPoint = \"setNat\")]\n    public static extern System.IntPtr setNat([In, Out, MarshalAs(UnmanagedType.LPStr)]string char_Address_File_nat);\n    [DllImport(@\"DLL.dll\", EntryPoint = \"getMode\")]\n    public static extern System.IntPtr getMode();\n</code></pre>\n"}, {"tags": ["c++", "pointers", "unordered-map", "user-defined-types"], "comments": [{"owner": {"reputation": 1710, "user_id": 176684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/548bcac5329a95fd50ffeaa088814f70?s=128&d=identicon&r=PG", "display_name": "caveman", "link": "https://stackoverflow.com/users/176684/caveman"}, "edited": false, "score": 1, "creation_date": 1424896325, "post_id": 28728853, "comment_id": 45744241, "body": "Compiler warning are hints to the problem.  It would make sense to add at least some of them to the question so people can quickly help."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4607451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29ec1dbf3f4a4706f36e85fa680f1b5e?s=128&d=identicon&r=PG&f=1", "display_name": "salterm", "link": "https://stackoverflow.com/users/4607451/salterm"}, "edited": false, "score": 0, "creation_date": 1424905104, "post_id": 28729087, "comment_id": 45748777, "body": "Ah, unique_ptr seems to solve some of my memory management problems! It also fixed my underlying syntax issue, which I hadn&#39;t suspected. Thank you."}], "owner": {"reputation": 148, "user_id": 2132970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4718152b9c56d4bc95c8c23f4ff5c0c4?s=128&d=identicon&r=PG", "display_name": "Alberto Boldrini", "link": "https://stackoverflow.com/users/2132970/alberto-boldrini"}, "is_accepted": true, "score": 1, "last_activity_date": 1424896658, "creation_date": 1424896658, "answer_id": 28729087, "question_id": 28728853, "link": "https://stackoverflow.com/questions/28728853/using-unordered-map-with-dyanmically-allocated-user-defined-class/28729087#28729087", "title": "Using unordered_map with dyanmically-allocated user-defined class", "body": "<p>There are some syntax errors as <code>*Room</code>. I have some tips</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;memory&gt;\n#include &lt;unordered_map&gt;\n\nusing namespace std;\n\nclass Room\n{\npublic:\n\n    Room(string name, string desc)\n      : name(name) // This syntax is called initializer list \n      , desc(desc)\n    {\n\n    }\n\n    void operator = (const Room room)\n    {\n        name = room.name;\n        desc = room.desc;\n    }\n\n    string getName() { return name; }\n    string getDesc() { return desc; }\n\nprivate:\n    string name; //name of the room\n    string desc; //description of the room\n};\n\n// Without using unique_ptr you have a memory leak\n// because the is not explicitly called the delete operator on pointers\nunordered_map&lt;string, std::unique_ptr&lt;Room&gt; &gt; rooms;\n\nvoid builder()\n{ \n  Room* room = new Room(\"Name\", \"Desc\");\n  rooms[room-&gt;getName()].reset (room);\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4607451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29ec1dbf3f4a4706f36e85fa680f1b5e?s=128&d=identicon&r=PG&f=1", "display_name": "salterm", "link": "https://stackoverflow.com/users/4607451/salterm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 28729087, "answer_count": 1, "score": -1, "last_activity_date": 1424904890, "creation_date": 1424895728, "last_edit_date": 1424904890, "question_id": 28728853, "link": "https://stackoverflow.com/questions/28728853/using-unordered-map-with-dyanmically-allocated-user-defined-class", "title": "Using unordered_map with dyanmically-allocated user-defined class", "body": "<p>So I've got a class, \"Room\", which has the following code:</p>\n\n<pre><code>class Room\n{\npublic:\n    Room(string name, string desc): name(name), desc(desc) {}\n    void operator=(const Room room)\n    {\n        name = room.name;\n        desc = room.desc;\n    }\n    string getName(); //returns this.name\n    string getDesc(); //returns this.desc\n\nprivate:\n    string name; //name of the room\n    string desc; //description of the room\n};\n</code></pre>\n\n<p>I've got a global variable in my main.cpp of type unordered_map, like this:</p>\n\n<pre><code>unordered_map&lt;string, *Room&gt; rooms; //Room's name is the key\n</code></pre>\n\n<p>And I want to allocate Rooms on the fly in a function and add them to my map. I attempted to do it like this:</p>\n\n<pre><code>void builder()\n{\n    Room* room = new Room(\"Name\", \"Desc\");\n    rooms[room-&gt;getName()] = room;\n}\n</code></pre>\n\n<p>...But I'm getting all kinds of compiler warnings. I figured it would be something to do with iterators or hashing, or I'm not using pointers correctly (which are probably all true), but mostly it seems unordered_map doesn't like being parametrized with Room or *Room. Am I missing something?</p>\n"}, {"tags": ["c++", "qt", "qgraphicsview", "qgridlayout"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1424896059, "post_id": 28728820, "comment_id": 45744073, "body": "There&#39;s no need to &quot;show&quot; the updated views, the whole point of them is so that they update automatically whenever the underlying scene is modified. You&#39;ll need to post a complete, self contained, single-file example of what you&#39;re trying to do.  For inspiration, look at <a href=\"https://github.com/KubaO/stackoverflown/blob/master/gv-animation-18528959/main.cpp\" rel=\"nofollow noreferrer\">github.com/KubaO/stackoverflown/blob/master/&hellip;</a>"}, {"owner": {"reputation": 327, "user_id": 2270402, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c271e6ff4d3a7ff2679e35fb4d655dcb?s=128&d=identicon&r=PG", "display_name": "gjones", "link": "https://stackoverflow.com/users/2270402/gjones"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1424896422, "post_id": 28728820, "comment_id": 45744291, "body": "okay thought the show might have been needed, or atleast a repaint (last c++ gui i did was C++ .NET) <a href=\"https://gist.github.com/gazza126/f43d5b0377649782a35d\" rel=\"nofollow noreferrer\">gist.github.com/gazza126/f43d5b0377649782a35d</a> Theres the whole .cpp and header file, I&#39;ve only put simulation in as the other bit atm is just a start menu. Atm it is just drawing a random line in each Graphics view, really as a test, then i will be adding the logic behind the actual simulation"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1424896631, "post_id": 28728820, "comment_id": 45744405, "body": "Your code must be included in the question itself, and you must minimize it. Your problem so far is that you are running a local event loop. Never do that without full understanding of how Qt&#39;s internals work."}, {"owner": {"reputation": 327, "user_id": 2270402, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c271e6ff4d3a7ff2679e35fb4d655dcb?s=128&d=identicon&r=PG", "display_name": "gjones", "link": "https://stackoverflow.com/users/2270402/gjones"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1424897909, "post_id": 28728820, "comment_id": 45745139, "body": "Just to clarify, even if i try to draw a line in the graphicsViews which aren&#39;t working outside of the event loop (so by completely commenting out the loop) the line still won&#39;t draw"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 2270402, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c271e6ff4d3a7ff2679e35fb4d655dcb?s=128&d=identicon&r=PG", "display_name": "gjones", "link": "https://stackoverflow.com/users/2270402/gjones"}, "edited": false, "score": 0, "creation_date": 1424901057, "post_id": 28729713, "comment_id": 45746879, "body": "Thank you so much, I&#39;ve just tested it in a seperate program and works great. Will re-do the rest of my code to link something similar to this in. Thank you :)"}], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1424898795, "creation_date": 1424898795, "answer_id": 28729713, "question_id": 28728820, "link": "https://stackoverflow.com/questions/28728820/qgraphicsview-doesnt-always-update/28729713#28729713", "title": "QGraphicsView doesn&#39;t always update", "body": "<p>The below works. Make sure that you enable C++11 in your .pro file: add <code>CONFIG += c++11</code> to the project file.</p>\n\n<pre><code>#include &lt;QApplication&gt;\n#include &lt;QGraphicsScene&gt;\n#include &lt;QGraphicsView&gt;\n#include &lt;QGraphicsLineItem&gt;\n#include &lt;QGridLayout&gt;\n#include &lt;QTime&gt;\n#include &lt;QTimer&gt;\n#include &lt;array&gt;\n\nclass View : public QGraphicsView\n{\npublic:\n   View(QWidget *parent = 0) : QGraphicsView(parent) {\n      setRenderHint(QPainter::Antialiasing);\n   }\n   void resizeEvent(QResizeEvent *) {\n      fitInView(-1, -1, 2, 2, Qt::KeepAspectRatio);\n   }\n};\n\ntemplate &lt;typename Container&gt;\nvoid updateScenes(Container &amp; views)\n{\n   auto angle = 360.0/1000.0 * (QTime::currentTime().msecsSinceStartOfDay() % 1000);\n   for (auto &amp; view : views) {\n      auto scene = view.scene();\n      scene-&gt;clear();\n      auto * line = scene-&gt;addLine(-1, 0, 1, 0, QPen(Qt::darkBlue, 0.1));\n      line-&gt;setRotation(angle);\n   }\n}\n\nint main(int argc, char *argv[])\n{\n   QApplication a(argc, argv);\n   QGraphicsScene s;\n   QTimer timer;\n   QWidget window;\n   QGridLayout layout(&amp;window);\n   std::array&lt;View, 64&gt; views;\n\n   int i = 0;\n   for (auto &amp; view : views) {\n      view.setScene(new QGraphicsScene(&amp;view));\n      layout.addWidget(&amp;view, i/8, i%8);\n      ++ i;\n   }\n\n   QObject::connect(&amp;timer, &amp;QTimer::timeout, [&amp;views]{ updateScenes(views); });\n   timer.start(50);\n   window.show();\n   return a.exec();\n}\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 2270402, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c271e6ff4d3a7ff2679e35fb4d655dcb?s=128&d=identicon&r=PG", "display_name": "gjones", "link": "https://stackoverflow.com/users/2270402/gjones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 0, "accepted_answer_id": 28729713, "answer_count": 1, "score": 1, "last_activity_date": 1424898795, "creation_date": 1424895597, "last_edit_date": 1424896962, "question_id": 28728820, "link": "https://stackoverflow.com/questions/28728820/qgraphicsview-doesnt-always-update", "title": "QGraphicsView doesn&#39;t always update", "body": "<p>Hi I've got a GridLayout which has 64 GraphicsViews on it (I know it's alot but it's the only way i could think of doing this at this point in time).\nNow i'm currently just drawing a random line on each of these graphics views on a timer tick. This works but only for the 8 of the Graphics, \nCreate Graphics Views<br>\n    void Simulation::createGraphicsViews(){\n        for(int i = 0; i &lt; 64; i++){\n            for(int j = 0; j &lt; 8; j++){</p>\n\n<pre><code>        graphicsScene[i] = new QGraphicsScene();\n        graphicsView[i] = new QGraphicsView(graphicsScene[i]);\n        simui-&gt;gridLayout-&gt;addWidget(graphicsView[i], i/8, j);\n        }\n\n    }\n}\n</code></pre>\n\n<p>Random Line in each graphics view</p>\n\n<pre><code>for(int x = 0; x &lt; 64; x++){\n    x1 = qrand()%(50+1) - 1;\n    y1 = qrand()%(50+1)-1;\n    x2 = qrand()%(50+1)-1;\n    y2 = qrand()%(50+1)-1;\n    graphicsScene[x]-&gt;addLine(x1,y1,x2,y2);\n    qDebug() &lt;&lt; \"adding line to\" &lt;&lt; x &lt;&lt; \"at\" &lt;&lt; x1 &lt;&lt;\",\"&lt;&lt;y1&lt;&lt;\",\"&lt;&lt;x2&lt;&lt;\",\"&lt;&lt;y2;\n}\n</code></pre>\n\n<p>show updated graphics view</p>\n\n<pre><code> for(int x = 0; x &lt; 64; x++){\n        graphicsView[x]-&gt;show();\n        qDebug()&lt;&lt;\"showing\" &lt;&lt; x;\n  }\n</code></pre>\n\n<p>I've looked through it for the last 2 hours trying multiple approaches none of which have fixed this problem, I'm assuming it's probably something stupid but I just can't figure it out</p>\n\n<p>Any help is greatly appreciated\nThank you</p>\n\n<p>Also if i try to update any of the Graphics Views other than the ones which work they still don't update.</p>\n\n<p><a href=\"https://gist.github.com/gazza126/f43d5b0377649782a35d\" rel=\"nofollow\">https://gist.github.com/gazza126/f43d5b0377649782a35d</a> -- Full Code (that does anything)</p>\n"}, {"tags": ["c++", "redirect", "inputstream", "stdin"], "comments": [{"owner": {"reputation": 15257, "user_id": 1409312, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TCzB.jpg?s=128&g=1", "display_name": "Syntactic Fructose", "link": "https://stackoverflow.com/users/1409312/syntactic-fructose"}, "edited": false, "score": 0, "creation_date": 1424895765, "post_id": 28728777, "comment_id": 45743926, "body": "You shouldn&#39;t be using redirection in the case you want to be switching your types of inputs. You&#39;d be better off with <code>fstream</code>"}], "answers": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 0, "last_activity_date": 1424896111, "creation_date": 1424896111, "answer_id": 28728941, "question_id": 28728777, "link": "https://stackoverflow.com/questions/28728777/redirecting-stdcin-stream-back-and-forth/28728941#28728941", "title": "redirecting std::cin stream back and forth", "body": "<p>You said:</p>\n\n<blockquote>\n  <p>i want to read the first part of my input from *.txt and get the rest manually from user.</p>\n</blockquote>\n\n<p>If this is the only requirement, I would suggest a change of strategy.</p>\n\n<ol>\n<li>Get the name of the input file from the command line.</li>\n<li>Read as much data as you can from the file.</li>\n<li>Then switch to reading the rest of the data from <code>cin</code>.</li>\n</ol>\n\n<p>For example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main(int argc, char** argv)\n{\n   string a[100];\n   int count = 0;\n\n   if ( argc &gt; 1 )\n   {\n      ifstream infile(argv[1]);\n      while (count &lt; 100)\n      {\n         infile &gt;&gt; a[count];\n         if ( infile )\n         {\n            ++count;\n         }\n         else\n         {\n            break;\n         }\n      }\n   }\n\n   for (int i=count;i&lt;100;i++)\n      cin &gt;&gt; a[i];\n   for (int i=0;i&lt;100;i++)\n      cout &lt;&lt; a[i] &lt;&lt; endl;\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4607424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75e1f89025be4f66d4e4ff62c795f445?s=128&d=identicon&r=PG&f=1", "display_name": "Thug4Life", "link": "https://stackoverflow.com/users/4607424/thug4life"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424896111, "creation_date": 1424895424, "question_id": 28728777, "link": "https://stackoverflow.com/questions/28728777/redirecting-stdcin-stream-back-and-forth", "title": "redirecting std::cin stream back and forth", "body": "<p>i want to read the first part of my input from *.txt and get the rest manually from user.\nfor instance:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()\n{\n    string a[100];\n    for (int i=0;i&lt;100;i++)\n        cin &gt;&gt; a[i];\n    for (int i=0;i&lt;100;i++)\n        cout &lt;&lt; a[i] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>if i run the above code like ./a.out &lt; input.txt\nand input.txt only consists of 10 words for example, how can i <strong>redirect the input stream back to console</strong> so that i get the rest from user ?</p>\n"}, {"tags": ["c++", "jit", "calling-convention"], "comments": [{"owner": {"reputation": 4074, "user_id": 129122, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13e4bc293d356baee36458065d0caf0b?s=128&d=identicon&r=PG", "display_name": "swegi", "link": "https://stackoverflow.com/users/129122/swegi"}, "edited": false, "score": 1, "creation_date": 1424896612, "post_id": 28728742, "comment_id": 45744394, "body": "What compiler do you use? If you use <code>gcc</code>, you can write an inline assembler wrapper which calls the jit-generated code. Then, you can use your own calling conventions."}, {"owner": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 1, "creation_date": 1424897052, "post_id": 28728742, "comment_id": 45744647, "body": "If you discovered parameters in different registers, then I strongly suspect you weren&#39;t looking in the right place to begin with. Rather, I suspect you <i>happened</i> to find the value you wanted in a register, but that the caller merely used that register as a temporary location before copying the parameter to its proper place. You were relying on the leftovers. The calling convention should be well established; it won&#39;t change from one build to the next unless you explicitly use a directive that specifies the calling convention."}, {"owner": {"reputation": 2360, "user_id": 231306, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fU28t.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/231306/gabriel"}, "reply_to_user": {"reputation": 156256, "user_id": 33732, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7ea2bfac80ecc1d368ff3a5bb0e58568?s=128&d=identicon&r=PG", "display_name": "Rob Kennedy", "link": "https://stackoverflow.com/users/33732/rob-kennedy"}, "edited": false, "score": 0, "creation_date": 1425062130, "post_id": 28728742, "comment_id": 45822453, "body": "@RobKennedy, I was looking at the disassembly, not the values in the registers. I can&#39;t remember too good right now what I did then but it appears that I had one extra parameter, using up %rdi and shifting the others to %rsi-&gt;%r9 instead of %rdi-&gt;%r8, which I&#39;m using now. My bad, then."}], "answers": [{"comments": [{"owner": {"reputation": 2360, "user_id": 231306, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fU28t.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/231306/gabriel"}, "edited": false, "score": 0, "creation_date": 1424897736, "post_id": 28729264, "comment_id": 45745035, "body": "Nice ! Those are the registers I&#39;ve been using indeed. So there is some level of guarantee after all. Note: I&#39;ve use <code>objdump</code> to get the ASM / binary from my non-JIT interpreter loop and use what gcc itself generated."}, {"owner": {"reputation": 8356, "user_id": 443265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f10e24ce2786d8a6ddb4d79462dce5?s=128&d=identicon&r=PG", "display_name": "Martin T&#246;rnwall", "link": "https://stackoverflow.com/users/443265/martin-t%c3%b6rnwall"}, "reply_to_user": {"reputation": 2360, "user_id": 231306, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fU28t.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/231306/gabriel"}, "edited": false, "score": 1, "creation_date": 1424897816, "post_id": 28729264, "comment_id": 45745085, "body": "If you want to look at the generated code you could either a) view it in gdb using <code>disas &lt;address&gt;</code> or b) write it to a file from within your VM and use <code>objdump -b binary -D &lt;file&gt;</code>."}], "owner": {"reputation": 8356, "user_id": 443265, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/34f10e24ce2786d8a6ddb4d79462dce5?s=128&d=identicon&r=PG", "display_name": "Martin T&#246;rnwall", "link": "https://stackoverflow.com/users/443265/martin-t%c3%b6rnwall"}, "is_accepted": true, "score": 1, "last_activity_date": 1424897606, "last_edit_date": 1424897606, "creation_date": 1424897282, "answer_id": 28729264, "question_id": 28728742, "link": "https://stackoverflow.com/questions/28728742/how-do-i-know-what-registers-function-parameters-will-be-mapped-on/28729264#28729264", "title": "How do I know what registers function parameters will be mapped on?", "body": "<p>When you call a function, the compiler doesn't normally* have a choice about where to put the arguments for the call. This is dictated by the <a href=\"http://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow\">ABI</a>. If your host program is written in C++ and runs on a Linux/x86-64 machine, it will generally emit code that conforms to the calling convention described in the <a href=\"http://www.x86-64.org/documentation/abi.pdf\" rel=\"nofollow\">SysV ABI</a>, which contains the following rules for parameter passing:</p>\n\n<blockquote>\n  <p>If the class is INTEGER, the next available register of the sequence %rdi,\n  %rsi, %rdx, %rcx, %r8 and %r9 is used.</p>\n</blockquote>\n\n<p>It's worth noting that the INTEGER class includes pointer arguments as well.</p>\n\n<p>The bottom line here is that your jitted code ought to be able to pick its arguments out of the registers listed above. If this still fails to work I suspect you may be encoding your instructions incorrectly. Try viewing the disassembly from GDB.</p>\n\n<p>(*) Well, the compiler may be afforded some more flexibility if the function cannot be called from outside the translation unit.</p>\n"}], "owner": {"reputation": 2360, "user_id": 231306, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fU28t.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/231306/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 28729264, "answer_count": 1, "score": 0, "last_activity_date": 1425383986, "creation_date": 1424895285, "last_edit_date": 1425383986, "question_id": 28728742, "link": "https://stackoverflow.com/questions/28728742/how-do-i-know-what-registers-function-parameters-will-be-mapped-on", "title": "How do I know what registers function parameters will be mapped on?", "body": "<p>I have written a JITting VM for Brainfuck. It requires the creation of a a writable+executable memory area (that it, a <code>char*</code>, but not created with <code>malloc</code> or <code>new</code>) that is filled with machine opcodes (x64 in my case), then called after converting the <code>char*</code> into a function pointer. That newly created function has parameters. Namely, the memory pointer and some other internal things.</p>\n\n<p>It works, but it assumes a certain register mapping. That mapping has changed, once some time ago, because I changed the code around the call into the <code>char*</code> and the compiler decided it would work better with other registers. So I had to change the code generation scheme.</p>\n\n<p>I'm afraid I could do something that would make the compiler change it again, or worse, use the stack, which I don't know how to pull parameters from (yet).</p>\n\n<p>So I need:</p>\n\n<ul>\n<li>a way to tell the compiler on what registers to put the parameters (`register ... asm(\"r0\"), as described <a href=\"https://gcc.gnu.org/onlinedocs/gcc/Local-Reg-Vars.html#Local-Reg-Vars\" rel=\"nofollow\">here</a>, does not work with parameters)</li>\n<li>else a way to know what registers the parameters were mapped on. That would complexify the thing, but it's still feasible.</li>\n<li>else a way to know if and in what order the parameters were passed on the stack</li>\n</ul>\n\n<p>I'm using gcc 4.8.2.</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1424895270, "post_id": 28728685, "comment_id": 45743651, "body": "<code>g++</code> doesn&#39;t use a different linker -- it just adds some default libraries to link to the list of libraries to link. Try adding the <code>libstdc++</code> library to your <code>target_link_libraries</code>."}, {"owner": {"reputation": 1198, "user_id": 3288829, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff590bcafe14e259723706bcaaff552?s=128&d=identicon&r=PG&f=1", "display_name": "user3288829", "link": "https://stackoverflow.com/users/3288829/user3288829"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1424895736, "post_id": 28728685, "comment_id": 45743911, "body": "@BillyONeal Thanks for clarifying that for me. Your suggestion fixed it for both my MCVE and my real use case. If you think the question is still valid and useful, rewrite your comment as an answer, otherwise I&#39;m willing to retract it."}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1424895836, "post_id": 28728685, "comment_id": 45743957, "body": "feel free to post the specific thing you did in an answer -- you can answer your own things. May help someone in the future. I didn&#39;t write it as an answer &#39;cause I&#39;ve never actually done it; was just a shot in the dark."}, {"owner": {"reputation": 1198, "user_id": 3288829, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff590bcafe14e259723706bcaaff552?s=128&d=identicon&r=PG&f=1", "display_name": "user3288829", "link": "https://stackoverflow.com/users/3288829/user3288829"}, "reply_to_user": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 0, "creation_date": 1424895960, "post_id": 28728685, "comment_id": 45744020, "body": "@BillyONeal Will do, just trying to give credit where credit is due."}, {"owner": {"reputation": 97503, "user_id": 82320, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0e41f852c5c471370a0d08ba8dc1c032?s=128&d=identicon&r=PG", "display_name": "Billy ONeal", "link": "https://stackoverflow.com/users/82320/billy-oneal"}, "edited": false, "score": 1, "creation_date": 1424896038, "post_id": 28728685, "comment_id": 45744062, "body": "I have enough meaningless internet points :)"}], "answers": [{"owner": {"reputation": 1198, "user_id": 3288829, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff590bcafe14e259723706bcaaff552?s=128&d=identicon&r=PG&f=1", "display_name": "user3288829", "link": "https://stackoverflow.com/users/3288829/user3288829"}, "is_accepted": false, "score": 0, "last_activity_date": 1424896180, "creation_date": 1424896180, "answer_id": 28728958, "question_id": 28728685, "link": "https://stackoverflow.com/questions/28728685/force-target-link-libraries-to-use-c-linker/28728958#28728958", "title": "force target_link_libraries to use c++ linker", "body": "<p>As @BillyONeal mentioned in the comments above, I don't need a different linker to get the additional libraries needed, I just had to add libstdc++ to the list of libraries to be linked. </p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(Cmain C CXX)\n\nadd_library(CPPclass STATIC IMPORTED)\nset_property(TARGET CPPclass PROPERTY IMPORTED_LOCATION ./libCPPclass.a)\nadd_executable(main main.c)\ntarget_link_libraries(main CPPclass stdc++)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1198, "user_id": 3288829, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff590bcafe14e259723706bcaaff552?s=128&d=identicon&r=PG&f=1", "display_name": "user3288829", "link": "https://stackoverflow.com/users/3288829/user3288829"}, "edited": false, "score": 0, "creation_date": 1424910031, "post_id": 28731645, "comment_id": 45750484, "body": "Any reasons this is a better answer than the other, or is it just another way of doing things?"}, {"owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "reply_to_user": {"reputation": 1198, "user_id": 3288829, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff590bcafe14e259723706bcaaff552?s=128&d=identicon&r=PG&f=1", "display_name": "user3288829", "link": "https://stackoverflow.com/users/3288829/user3288829"}, "edited": false, "score": 0, "creation_date": 1424913878, "post_id": 28731645, "comment_id": 45751563, "body": "This is the better answer because its what the cmake commands <code>export()</code> and <code>install(EXPORT)</code> generate, and because it is an abstraction, not an implementation detail (as the stdlib to link is - the g++ driver does much more than just that). This answer is correct."}], "owner": {"reputation": 8820, "user_id": 2428389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90de97b22aac97ec9a43a95412ac3692?s=128&d=identicon&r=PG", "display_name": "steveire", "link": "https://stackoverflow.com/users/2428389/steveire"}, "is_accepted": true, "score": 2, "last_activity_date": 1424906451, "creation_date": 1424906451, "answer_id": 28731645, "question_id": 28728685, "link": "https://stackoverflow.com/questions/28728685/force-target-link-libraries-to-use-c-linker/28731645#28731645", "title": "force target_link_libraries to use c++ linker", "body": "<p>Do this:</p>\n\n<pre><code>set_target_properties(CPPclass PROPERTIES\n  IMPORTED_LOCATION ./libCPPclass.a\n  IMPORTED_LINK_INTERFACE_LANGUAGES \"CXX\"\n)\n</code></pre>\n"}, {"owner": {"reputation": 16928, "user_id": 1047788, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/xA1rW.png?s=128&g=1", "display_name": "user7610", "link": "https://stackoverflow.com/users/1047788/user7610"}, "is_accepted": false, "score": 3, "last_activity_date": 1487706610, "creation_date": 1487706610, "answer_id": 42376631, "question_id": 28728685, "link": "https://stackoverflow.com/questions/28728685/force-target-link-libraries-to-use-c-linker/42376631#42376631", "title": "force target_link_libraries to use c++ linker", "body": "<p>Set linker language to CXX on your target</p>\n\n<pre><code>set_target_properties(my_target PROPERTIES LINKER_LANGUAGE CXX)\n</code></pre>\n\n<p>I think this is better than the <code>stdc++</code> answer because it is general (I am currently dealing with clang's libc++). It is maybe not better than the <code>IMPORTED_LINK_INTERFACE_LANGUAGES</code> answer, but it is certainly more direct.</p>\n"}], "owner": {"reputation": 1198, "user_id": 3288829, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9ff590bcafe14e259723706bcaaff552?s=128&d=identicon&r=PG&f=1", "display_name": "user3288829", "link": "https://stackoverflow.com/users/3288829/user3288829"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3622, "favorite_count": 0, "accepted_answer_id": 28731645, "answer_count": 3, "score": 4, "last_activity_date": 1487706610, "creation_date": 1424895092, "last_edit_date": 1495541902, "question_id": 28728685, "link": "https://stackoverflow.com/questions/28728685/force-target-link-libraries-to-use-c-linker", "title": "force target_link_libraries to use c++ linker", "body": "<h2>TL;DR</h2>\n\n<p>Is there a way to force cmake to use the c++ linker when linking a static c++ library to a c executable?</p>\n\n<hr>\n\n<p>I have a static library that consists of 2 objects, a C++ file and a C wrapper to the functions in that file (Constructor, Destructor, and Print function), similar to <a href=\"https://stackoverflow.com/a/2045860/3288829\">this</a> SO answer. The last paragraph states:</p>\n\n<blockquote>\n  <p>The fun part is now ensuring that you get all the required C++ libraries linked into you larger library correctly. For gcc (or clang) that means just doing the final link stage using g++. </p>\n</blockquote>\n\n<p>I can verify this with my MCVE. Replacing <code>gcc</code> with <code>g++</code> fixes the problem and everything works</p>\n\n<pre><code>$ gcc -static main.c -L. -lCPPclass -o main\n./libCPPclass.a(CInt.o): In function `newCINT':\nCInt.cpp:(.text+0xd): undefined reference to `operator new(unsigned long)'\nCInt.cpp:(.text+0x28): undefined reference to `operator delete(void*)'\n./libCPPclass.a(CInt.o): In function `delCINT':\nCInt.cpp:(.text+0x5e): undefined reference to `operator delete(void*)'\n./libCPPclass.a(CInt.o):(.eh_frame+0x13): undefined reference to `__gxx_personality_v0'\n./libCPPclass.a(CPPclass.o): In function `CPPclass::print_success()':\nCPPclass.cpp:(.text+0x26): undefined reference to `std::cout'\nCPPclass.cpp:(.text+0x2b): undefined reference to `std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp; std::operator&lt;&lt; &lt;std::char_traits&lt;char&gt; &gt;(std::basic_ostream&lt;char, std::char_traits&lt;char&gt; &gt;&amp;, char const*)'\n./libCPPclass.a(CPPclass.o): In function `__static_initialization_and_destruction_0(int, int)':\nCPPclass.cpp:(.text+0x54): undefined reference to `std::ios_base::Init::Init()'\nCPPclass.cpp:(.text+0x63): undefined reference to `std::ios_base::Init::~Init()'\ncollect2: error: ld returned 1 exit status\n$\n$#REPLACE gcc with g++\n$\n$ g++ -static main.c -L. -lCPPclass -o main\n$ ./main\nSuccess!\n</code></pre>\n\n<p>My real code, however, is built using CMake, so I'm trying to get this MCVE built with CMake, which takes me back to my original question. My CMakeLists.txt file is as follows:</p>\n\n<pre><code>cmake_minimum_required(VERSION 2.8)\nproject(Cmain C CXX)\n\nadd_library(CPPclass STATIC IMPORTED)\nset_property(TARGET CPPclass PROPERTY IMPORTED_LOCATION ./libCPPclass.a)\nadd_executable(main main.c)\ntarget_link_libraries(main CPPclass)\n</code></pre>\n\n<p>However, when I run <code>cmake .</code> and then <code>make</code> I get the same errors as above</p>\n\n<pre><code>$ cmake .\n-- Configuring done\n-- Generating done\n-- Build files have been written to: /home/me/temp\n$ make\nLinking C executable main\n./libCPPclass.a(CInt.o): In function `newCINT':\nCInt.cpp:(.text+0xd): undefined reference to `operator new(unsigned long)'\nCInt.cpp:(.text+0x28): undefined reference to `operator delete(void*)'\n</code></pre>\n\n<p>etc. Of course if I renamed <code>main.c</code> to <code>main.cpp</code>, CMake would compile the executable with g++ and target_link_libraries would execute without error, but it kind of defeats the purpose of the c wrapper and doesn't work in my real use case.</p>\n"}, {"tags": ["c++", "c", "macros", "c-preprocessor"], "comments": [{"owner": {"reputation": 2200, "user_id": 1519323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zUWVH.png?s=128&g=1", "display_name": "davepmiller", "link": "https://stackoverflow.com/users/1519323/davepmiller"}, "edited": false, "score": 1, "creation_date": 1424894960, "post_id": 28728588, "comment_id": 45743482, "body": "Why are these macros necessary? Maybe we need a better explanation on their use case. Couldn&#39;t you just print out member variables for a quick sanity check?"}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1424895349, "post_id": 28728588, "comment_id": 45743700, "body": "What is it C or C++? Answers might be different, provided you give us a better description of what you are really after."}, {"owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "edited": false, "score": 0, "creation_date": 1424895434, "post_id": 28728588, "comment_id": 45743741, "body": "Updated more information"}], "answers": [{"comments": [{"owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "edited": false, "score": 0, "creation_date": 1424895518, "post_id": 28728647, "comment_id": 45743798, "body": "I would prefer something that will not need additional variable / defined. One reason is, I may have not just classX/classY but could be more in the future to decide."}], "owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "is_accepted": false, "score": 3, "last_activity_date": 1424894984, "creation_date": 1424894984, "answer_id": 28728647, "question_id": 28728588, "link": "https://stackoverflow.com/questions/28728588/c-test-macro-defined-value-of-type-information/28728647#28728647", "title": "C++ Test macro defined value of type information", "body": "<p>The conventional way is to use a separate macro to select between the definitions</p>\n\n<pre><code>#ifdef USE_X\n#define MYDEFINE classX\n#else\n#define MYDEFINE classY\n#endif\n</code></pre>\n\n<p>and use that when you need to know</p>\n\n<pre><code>#ifdef USE_X\n// ...\n#endif\n</code></pre>\n"}, {"owner": {"reputation": 1163, "user_id": 5599569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OQy3U.jpg?s=128&g=1", "display_name": "Victor Dyachenko", "link": "https://stackoverflow.com/users/5599569/victor-dyachenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1448621227, "creation_date": 1448621227, "answer_id": 33955683, "question_id": 28728588, "link": "https://stackoverflow.com/questions/28728588/c-test-macro-defined-value-of-type-information/33955683#33955683", "title": "C++ Test macro defined value of type information", "body": "<p>What is your intention? If you need to execute some code, you can use function overloading:</p>\n\n<pre><code>void f(classX *)\n{\n    // Some actions for classX\n}\nvoid f(classY *)\n{\n    // Some actions for classY\n}\n\nf((MYDEFINE *) 0);\n</code></pre>\n\n<p>Or if you need to define something:</p>\n\n<pre><code>template&lt;class &gt; class traits; // not defined\n\ntemplate&lt;&gt;\nclass traits&lt;classX&gt;\n{\n    typedef &lt;type-for-classX&gt; type;\n};\n\ntemplate&lt;&gt;\nclass traits&lt;classY&gt;\n{\n    typedef &lt;type-for-classY&gt; type;\n};\n\ntraits&lt;MYDEFINE&gt;::type var;\n</code></pre>\n"}], "owner": {"reputation": 4864, "user_id": 411524, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9a54dc8f31cfce52855d77c52832469f?s=128&d=identicon&r=PG", "display_name": "w00d", "link": "https://stackoverflow.com/users/411524/w00d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1448621227, "creation_date": 1424894769, "last_edit_date": 1448619237, "question_id": 28728588, "link": "https://stackoverflow.com/questions/28728588/c-test-macro-defined-value-of-type-information", "title": "C++ Test macro defined value of type information", "body": "<p>I have a macro like this:</p>\n\n<pre><code>#define MYDEFINE classX\n</code></pre>\n\n<p>And it could be</p>\n\n<pre><code>#define MYDEFINE classY\n</code></pre>\n\n<p>in some other places</p>\n\n<p>where classX and classY is some typename.</p>\n\n<p>What is the best way to check if the <code>MYDEFINE</code> is <code>classX</code> or <code>classY</code> ? (It could be more than 2 types here, so I'm seeking some flexible solutions)</p>\n\n<p>Edit: More on the usecase, I have a <code>config.h</code> file for the user to define what type to use. I have some compile time decision to make depending on this config value, but it's undesirable to change the way <code>config.h</code> works.</p>\n\n<p>I'm open to solution available in C++/C++11</p>\n"}, {"tags": ["c++", "random"], "answers": [{"comments": [{"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "edited": false, "score": 0, "creation_date": 1424895147, "post_id": 28728658, "comment_id": 45743584, "body": "Is there an alternative to global RNGs? For example if I want to use the same seed in multiple functions, should I just declare a new mersenne twister engine and seed it the same way?"}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "reply_to_user": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "edited": false, "score": 0, "creation_date": 1424895460, "post_id": 28728658, "comment_id": 45743761, "body": "@marcman - If it were me, I&#39;d try and do your suggestion of declaring main() and passing around, as long as that didn&#39;t get too cumbersome. (So it&#39;s only one instance, but it&#39;s shared explicitly rather than implicitly and can easily be changed for unit testing, threading, etc.) Multiple engines with the same seed is also an option, as long as it still gives the reproducibility you want.  (Obviously, calling one RNG instance twice is not the same as calling two RNG instances once.)"}, {"owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "edited": false, "score": 0, "creation_date": 1424896163, "post_id": 28728658, "comment_id": 45744140, "body": "Gotcha. Thanks for the help!"}], "owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "is_accepted": true, "score": 1, "last_activity_date": 1424895012, "creation_date": 1424895012, "answer_id": 28728658, "question_id": 28728370, "link": "https://stackoverflow.com/questions/28728370/defining-seeding-pseudo-random-number-generator-with-global-scope-c/28728658#28728658", "title": "Defining &amp; seeding pseudo-random number generator with global scope (C++)", "body": "<p>A global RNG doesn't sacrifice any randomness, but it's like using any other global variable:</p>\n\n<ul>\n<li>It simplifies the initial implementation.</li>\n<li>It can make future development harder. (E.g., for unit test purposes, maybe you'll want to specify a particular RNG instance with a repeatable sequence.)</li>\n<li>It introduces thread safety concerns. (Two threads accessing a global RNG at the same time becomes a race condition.)</li>\n</ul>\n\n<p>The conventional wisdom is that globals and singletons cause more problems than they solve, but you'll have to decide for yourself how the tradeoffs balance for your program.</p>\n"}], "owner": {"reputation": 2870, "user_id": 3427580, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/73909f88442d1b4be6cebec37c9d1aaf?s=128&d=identicon&r=PG&f=1", "display_name": "marcman", "link": "https://stackoverflow.com/users/3427580/marcman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 28728658, "answer_count": 1, "score": 0, "last_activity_date": 1424895012, "creation_date": 1424894021, "last_edit_date": 1424894403, "question_id": 28728370, "link": "https://stackoverflow.com/questions/28728370/defining-seeding-pseudo-random-number-generator-with-global-scope-c", "title": "Defining &amp; seeding pseudo-random number generator with global scope (C++)", "body": "<p>Is it dangerous/bad form to declare and seed an instance of some RNG (like <code>std::mt19937</code>) as a global variable? That way any function call that uses random numbers is essentially synchronized for a given seed. That is, for a given seed, my entire program will run identically. Potential bugs aside, does this also sacrifice any randomness?</p>\n\n<p>Is a better alternative to do declare it in the main() and then just pass the reference to it for any subsequent use in functions?</p>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["c++", "curl", "boost", "boost-asio"], "comments": [{"owner": {"reputation": 939, "user_id": 1005533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ae3da561bd8b1dbf8e0330cc73ecbd78?s=128&d=identicon&r=PG", "display_name": "zapredelom", "link": "https://stackoverflow.com/users/1005533/zapredelom"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 0, "creation_date": 1424934832, "post_id": 28728347, "comment_id": 45757225, "body": "I&#39;ve read about libcurl, but my goal is to do same with boost"}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 2, "creation_date": 1424955255, "post_id": 28728347, "comment_id": 45768801, "body": "well, nothing in boost does remotely what that curl one-liner does. Consider HTTP redirect responses, chunked encodings, keep alive, compression, auth, certificates, ..."}], "answers": [{"owner": {"reputation": 7042, "user_id": 1671032, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/FfJD4.jpg?s=128&g=1", "display_name": "PSIAlt", "link": "https://stackoverflow.com/users/1671032/psialt"}, "is_accepted": true, "score": 5, "last_activity_date": 1541506757, "last_edit_date": 1541506757, "creation_date": 1424935442, "answer_id": 28736632, "question_id": 28728347, "link": "https://stackoverflow.com/questions/28728347/sending-http-get-request-using-boostasio-similar-to-curl/28736632#28736632", "title": "Sending http GET request using boost::asio, similar to cURL", "body": "<p><code>boost::asio</code> is not an application level library. So you can open a connection with it, do an SSL handshake and so on. But you cannot construct HTTP requests via <code>boost::asio</code> since it's designed to just send/receive data.</p>\n\n<p>But, you can try to experiment with <a href=\"http://www.boost.org/doc/libs/1_47_0/doc/html/boost_asio/example/http/client/sync_client.cpp\" rel=\"nofollow noreferrer\">this asio HTTP client example</a>. Probably this can be a good thing to start with.</p>\n"}, {"comments": [{"owner": {"reputation": 1456, "user_id": 1355844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab4f9a5500ee4f1dc4381420ce270c6?s=128&d=identicon&r=PG", "display_name": "pmed", "link": "https://stackoverflow.com/users/1355844/pmed"}, "reply_to_user": {"reputation": 15897, "user_id": 11722, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b0124a12d060a036500e83ec44972492?s=128&d=identicon&r=PG", "display_name": "Zitrax", "link": "https://stackoverflow.com/users/11722/zitrax"}, "edited": false, "score": 0, "creation_date": 1590611067, "post_id": 28758792, "comment_id": 109748816, "body": "It seems so but since then <a href=\"https://github.com/Stiffstream/restinio\" rel=\"nofollow noreferrer\">Restinio</a>  or <a href=\"https://github.com/boostorg/beast\" rel=\"nofollow noreferrer\">Boost.Beast</a> were created."}], "owner": {"reputation": 1456, "user_id": 1355844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ab4f9a5500ee4f1dc4381420ce270c6?s=128&d=identicon&r=PG", "display_name": "pmed", "link": "https://stackoverflow.com/users/1355844/pmed"}, "is_accepted": false, "score": 1, "last_activity_date": 1425018154, "creation_date": 1425018154, "answer_id": 28758792, "question_id": 28728347, "link": "https://stackoverflow.com/questions/28728347/sending-http-get-request-using-boostasio-similar-to-curl/28758792#28758792", "title": "Sending http GET request using boost::asio, similar to cURL", "body": "<p>There is an <a href=\"http://think-async.com/Urdl\" rel=\"nofollow\">Urdl</a> library, created by Christopher M. Kohlhoff, the author of Boost.Asio:</p>\n\n<blockquote>\n  <p>Urdl is a cross-platform C++ library for downloading web content using\n  a URL. It provides an easy-to-use extension to standard C++ iostreams\n  and an asynchronous interface for use with Boost.Asio.</p>\n</blockquote>\n\n<p>Your request sample would be like following:</p>\n\n<pre><code>#include &lt;urdl/http.hpp&gt;\n\nurdl::istream is;\n\n// Set request options: method, content type, content\nis.set_option(urdl::http::request_method(\"GET\"));\nis.set_option(urdl::http::request_content_type(\"application/json\"));\nis.set_option(urdl::http::request_content(\"{\\\"username\\\":\\\"user@name.co\\\", \\\"password\\\":\\\"test\\\"}\"));\n\n// open HTTP stream at URL\nis.open(\"https:/domain.name/api/login/\");\n</code></pre>\n"}, {"owner": {"reputation": 2760, "user_id": 1971003, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/g36XB.jpg?s=128&g=1", "display_name": "Guy Avraham", "link": "https://stackoverflow.com/users/1971003/guy-avraham"}, "is_accepted": false, "score": 6, "last_activity_date": 1580131483, "last_edit_date": 1580131483, "creation_date": 1512637252, "answer_id": 47691193, "question_id": 28728347, "link": "https://stackoverflow.com/questions/28728347/sending-http-get-request-using-boostasio-similar-to-curl/47691193#47691193", "title": "Sending http GET request using boost::asio, similar to cURL", "body": "<p>I found myself also working with <code>boost</code> in order to send some \"customized\" HTTP GET request - I ran the server locally on my Ubuntu machine (16.04).</p>\n\n<p>In my case the request was of some proprietary API my server implemented (related to words it kept in its data base), but you can modify the <code>queryStr</code> variable to hold whatever query string you wish for. </p>\n\n<p>Also, change the <code>argv[1]</code> and <code>argv[2]</code> when you ran the program to hold your required values (IP address, query, and port if needed - default is 80).</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;istream&gt;\n#include &lt;ostream&gt;\n#include &lt;string&gt;\n#include &lt;boost/asio.hpp&gt;\n\nusing boost::asio::ip::tcp;\nusing namespace std;\n\nint main(int argc, char* argv[])\n{\n    cout &lt;&lt; \"main -start\" &lt;&lt; endl;\n    try\n    {\n        boost::asio::io_service io_service;\n        string ipAddress = argv[1]; //\"localhost\" for loop back or ip address otherwise, i.e.- www.boost.org;       \n        string portNum = argv[2]; //\"8000\" for instance;\n        string hostAddress;\n        if (portNum.compare(\"80\") != 0) // add the \":\" only if the port number is not 80 (proprietary port number).\n        {\n             hostAddress = ipAddress + \":\" + portNum;\n        }\n        else \n        { \n            hostAddress = ipAddress;\n        }\n        string wordToQuery = \"aha\";\n        string queryStr = argv[3]; //\"/api/v1/similar?word=\" + wordToQuery;\n\n        // Get a list of endpoints corresponding to the server name.\n        tcp::resolver resolver(io_service);\n        tcp::resolver::query query(ipAddress, portNum);\n        tcp::resolver::iterator endpoint_iterator = resolver.resolve(query);\n\n        // Try each endpoint until we successfully establish a connection.\n        tcp::socket socket(io_service);\n        boost::asio::connect(socket, endpoint_iterator);\n\n        // Form the request. We specify the \"Connection: close\" header so that the\n        // server will close the socket after transmitting the response. This will\n        // allow us to treat all data up until the EOF as the content.\n        boost::asio::streambuf request;\n        std::ostream request_stream(&amp;request);\n        request_stream &lt;&lt; \"GET \" &lt;&lt; queryStr &lt;&lt; \" HTTP/1.1\\r\\n\";  // note that you can change it if you wish to HTTP/1.0\n        request_stream &lt;&lt; \"Host: \" &lt;&lt; hostAddress &lt;&lt; \"\\r\\n\";\n        request_stream &lt;&lt; \"Accept: */*\\r\\n\";\n        request_stream &lt;&lt; \"Connection: close\\r\\n\\r\\n\";\n\n        // Send the request.\n        boost::asio::write(socket, request);\n\n        // Read the response status line. The response streambuf will automatically\n        // grow to accommodate the entire line. The growth may be limited by passing\n        // a maximum size to the streambuf constructor.\n        boost::asio::streambuf response;\n        boost::asio::read_until(socket, response, \"\\r\\n\");\n\n        // Check that response is OK.\n        std::istream response_stream(&amp;response);\n        std::string http_version;\n        response_stream &gt;&gt; http_version;\n        unsigned int status_code;\n        response_stream &gt;&gt; status_code;\n        std::string status_message;\n        std::getline(response_stream, status_message);\n        if (!response_stream || http_version.substr(0, 5) != \"HTTP/\")\n        {\n            std::cout &lt;&lt; \"Invalid response\\n\";\n            return 1;\n        }\n        if (status_code != 200)\n        {\n            std::cout &lt;&lt; \"Response returned with status code \" &lt;&lt; status_code &lt;&lt; \"\\n\";\n            return 1;\n        }\n\n        // Read the response headers, which are terminated by a blank line.\n        boost::asio::read_until(socket, response, \"\\r\\n\\r\\n\");\n\n        // Process the response headers.\n        std::string header;\n        while (std::getline(response_stream, header) &amp;&amp; header != \"\\r\")\n        {\n            std::cout &lt;&lt; header &lt;&lt; \"\\n\";\n        }\n\n        std::cout &lt;&lt; \"\\n\";\n\n        // Write whatever content we already have to output.\n        if (response.size() &gt; 0)\n        {\n            std::cout &lt;&lt; &amp;response;\n        }\n\n        // Read until EOF, writing data to output as we go.\n        boost::system::error_code error;\n        while (boost::asio::read(socket, response,boost::asio::transfer_at_least(1), error))\n        {\n              std::cout &lt;&lt; &amp;response;\n        }\n\n        if (error != boost::asio::error::eof)\n        {\n              throw boost::system::system_error(error);\n        }\n    }\n    catch (std::exception&amp; e)\n    {\n        std::cout &lt;&lt; \"Exception: \" &lt;&lt; e.what() &lt;&lt; \"\\n\";\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>The original example I followed is here: <a href=\"http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/example/http/client/sync_client.cpp\" rel=\"nofollow noreferrer\">Boost-simple-http-get-request-sync-client</a></p>\n"}], "owner": {"reputation": 939, "user_id": 1005533, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/ae3da561bd8b1dbf8e0330cc73ecbd78?s=128&d=identicon&r=PG", "display_name": "zapredelom", "link": "https://stackoverflow.com/users/1005533/zapredelom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18714, "favorite_count": 2, "accepted_answer_id": 28736632, "answer_count": 3, "score": 5, "last_activity_date": 1580131483, "creation_date": 1424893949, "last_edit_date": 1426713516, "question_id": 28728347, "link": "https://stackoverflow.com/questions/28728347/sending-http-get-request-using-boostasio-similar-to-curl", "title": "Sending http GET request using boost::asio, similar to cURL", "body": "<p>I'm trying to send a http GET request using the REST API of some domain.\nBasically what I'm trying to do is to replace following curl request:</p>\n\n<pre><code>    curl -k  -H \"Content-Type: application/json\" -X GET \n--data '{\"username\":\"user@name.co\", \"password\":\"test\"}' https:/domain.name/api/login/\n</code></pre>\n\n<p>with some c++ code using <code>boost::asio</code>.\nI do not what to find all c++ code here , but some checkpoints would be great.</p>\n"}, {"tags": ["c++", "linux", "unix", "io-redirection"], "comments": [{"owner": {"reputation": 126, "user_id": 4447176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42ea2e764351be1a93e2a5040ce8b7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang.Finkbeiner", "link": "https://stackoverflow.com/users/4447176/wolfgang-finkbeiner"}, "reply_to_user": {"reputation": 41558, "user_id": 3204551, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91bb06155f79d40ffecdf124deecb001?s=128&d=identicon&r=PG&f=1", "display_name": "Deduplicator", "link": "https://stackoverflow.com/users/3204551/deduplicator"}, "edited": false, "score": 0, "creation_date": 1424893950, "post_id": 28728190, "comment_id": 45742942, "body": "it was the result from vim, but you&#39;re right. I&#39;ll edit that out."}, {"owner": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1424894426, "post_id": 28728190, "comment_id": 45743206, "body": "I don&#39;t see a question and I don&#39;t see what this has to do with C as a programming language. Please fix your tags and come up with a more concise description of your question."}, {"owner": {"reputation": 126, "user_id": 4447176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42ea2e764351be1a93e2a5040ce8b7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang.Finkbeiner", "link": "https://stackoverflow.com/users/4447176/wolfgang-finkbeiner"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1424898881, "post_id": 28728190, "comment_id": 45745658, "body": "@JensGustedt I thought it may have been wise to include C since I was using system calls, but you&#39;re right the code is written in C++ so I suppose that tag is not entirely relevant."}, {"owner": {"reputation": 126, "user_id": 4447176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42ea2e764351be1a93e2a5040ce8b7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang.Finkbeiner", "link": "https://stackoverflow.com/users/4447176/wolfgang-finkbeiner"}, "reply_to_user": {"reputation": 71860, "user_id": 366377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863018588657c38d29f22e72dc81325e?s=128&d=identicon&r=PG", "display_name": "Jens Gustedt", "link": "https://stackoverflow.com/users/366377/jens-gustedt"}, "edited": false, "score": 0, "creation_date": 1424898944, "post_id": 28728190, "comment_id": 45745689, "body": "@JensGustedt Also, I thought that I made the issue abundantly clear, but I&#39;ve put it in bold now."}], "owner": {"reputation": 126, "user_id": 4447176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42ea2e764351be1a93e2a5040ce8b7b8?s=128&d=identicon&r=PG&f=1", "display_name": "Wolfgang.Finkbeiner", "link": "https://stackoverflow.com/users/4447176/wolfgang-finkbeiner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1425079671, "creation_date": 1424893470, "last_edit_date": 1425079671, "question_id": 28728190, "link": "https://stackoverflow.com/questions/28728190/i-o-redirection-printing-to-the-wrong-file-descriptor", "title": "I/O redirection, printing to the wrong file descriptor", "body": "<p>I'm working with piping along with other file descriptors, and I ran into a pickle.</p>\n\n<h2>Some Context</h2>\n\n<p>For some clairty, the function below makes repeated execvp calls using file descriptors based on context. This is so (Ideally) the calls can be easily strung together for i/o redirection. </p>\n\n<p>For example, one possible input might look like:</p>\n\n<pre><code>cat &lt; input.txt | tr a-z A-Z\n</code></pre>\n\n<p>Which a parser outside of this function turns into:</p>\n\n<pre><code>argvv.at(0).first = \"cat\", NULL\nargvv.at(0).second.at(0) = \"1\" //this lets us easily see what fd this 'chunk' is using. In my code, 1 stands for \"&lt;\"\nargvv.at(0).second.at(1) = \"input.txt\" // the file to be read from\n\nargvv.at(1).first = \"tr\", \"a-z\", \"A-Z\", NULL;\nargvv.at(1).second.at(0) = \"4\" // in my code, 4 stands for |\n</code></pre>\n\n<p>In a way, it's kind of like this:</p>\n\n<pre><code>(cat &lt; input.txt) (| tr a-z A-Z)\n  argvv[0] ^         argvv[1] ^\n</code></pre>\n\n<p>This is all fed to fcall() to execute.</p>\n\n<p>The way the parser works isn't set in stone. It may not be the best way of doing things, but I'd prefer to solve the problem at hand for now. </p>\n\n<h2>The issue</h2>\n\n<p>For results where calls print to standard out, the calls print to standard in. This remains true for cases that don't involve piping either. <strong>This should not be the case, something must be wrong but I can't figure out what.</strong></p>\n\n<p>I'm still new to i/o, and I'm failing to see what file descriptor I miss-handled.</p>\n\n<p>Or perhaps it isn't that, and there's an even bigger misunderstanding. Really, I'm just hoping it turns not not to be a typo so I can learn something new.</p>\n\n<p><strong>What changes to the code need to be made in order to function as intended, and why?</strong></p>\n\n<h2>The code</h2>\n\n<pre><code>int fcall(std::vector &lt; std::pair&lt;char**, std::vector &lt;std::string&gt; &gt; &gt; argvv ){\n\n const int pipew = 1;\n const int piper = 0;\n //gotta say, fully understanding pipe I really appriciate how much sense this saves me.\n\n\n int status;\n if (strlen(argvv.at(0).first[0]) == 0){\n\n     return -1;\n }\n if (!strcmp(argvv.at(0).first[0], \"exit\")){\n\n     return 1;\n }\n\n //counter of weights\n\n\n unsigned int waitcount = 0;\n\n int n = 0;\n\n std::vector&lt;int*&gt; fdv;\n\n for (unsigned int k = 0; k &lt; argvv.size(); k++){\n     if (!argvv.at(k).second.at(0).compare(\"4\") ){ //figures out how many pipes we'll need\n         int fd[2];\n         if(pipe(fd) == -1)\n             perror(\"pipe\");\n         fdv.push_back(fd);\n     }\n     else\n     {\n         fdv.push_back(NULL);\n     }\n\n     if(argvv.at(k).second.at(0).compare(\"2\") &amp;&amp; argvv.at(k).second.at(0).compare(\"3\")){ //determines how long we should be waiting\n         waitcount++;\n     }\n\n }\n\n\n int stdins;\n int stdouts;\n\n if (-1 == (stdins = dup(0)))\n     perror(\"dup\");\n if (-1 == (stdouts = dup(1)))\n     perror(\"dup\");\n\n for (unsigned int i = 0; i &lt; argvv.size(); i++ ){\n\n     int pid = fork();\n     if(pid == -1)//fork\u2019s return value for an error is -1\n{\n        //perror(\"There was an error with fork(). \");\n        perror(\"fork\"); //although you certainly can use the above, it is good\n                        //practice not to write more information than necessary\n        exit(1);//there was an error with fork so exit the program and go back and fix it\n     }\n\n     else if(pid == 0)//when pid is 0 you are in the child process\n     {\n         int fdx;\n         int fdy;\n\n         //(I) ==============\n         int y = ((int)argvv.at(i).second.at(0).at(0)-48);\n\n         std::cerr &lt;&lt; y &lt;&lt; std::endl;\n         switch (y){\n             case 0:\n             break;\n\n             case 1:\n                 if (-1 == (fdy = open(argvv.at(i).second.at(1).c_str(), O_RDONLY))){\n                     perror(\"open\");\n                 }\n                 if (-1 == dup2(fdy, 0)){\n                     perror(\"dup\");\n                 }\n             break;\n\n             case 2:\n             break;\n\n             case 3:\n             break;\n\n             case 4:\n             if(-1 == dup2(fdv.at(i)[piper],0 ))\n                 perror(\"dup\");\n             break;\n\n             }\n\n         //(I +1) ==============\n         if (i+1 &lt; argvv.size()){\n            int z = ((int)argvv.at(i+1).second.at(0).at(0)-48);\n         std::cerr &lt;&lt; std::endl;\n             switch (z){\n                 case 0:\n                 break;\n\n                 case 1:\n                 break;\n\n                 case 2:\n                 if (-1 == (fdx = open(argvv.at(i+1).second.at(1).c_str(), O_RDWR | O_CREAT,S_IRWXU ))){\n                     perror(\"open\");\n                 }\n                 if (-1 ==  dup2(fdx,1 ))\n                     perror(\"dup\");\n                 break;\n\n                 case 3:\n                 if (-1 == (fdx = open(argvv.at(i+1).second.at(1).c_str(), (O_RDWR | O_APPEND) | O_CREAT,S_IRWXU ))){\n                     perror(\"open\");\n                 }\n                 if (-1 ==  dup2(fdx,1 ))\n                     perror(\"dup\");\n                 break;\n\n                 case 4:\n                     if(-1 == dup2(fdv.at(i+1)[pipew],1 ))\n                         perror(\"dup\");\n                 break;\n              }\n         }\n         for(unsigned int kg; kg &lt; fdv.size(); kg++){\n             if (fdv.at(kg) != NULL){\n                 if (-1 == close(fdv.at(kg)[0]))\n                     perror(\"close\");\n                 if (-1 == close(fdv.at(kg)[1]))\n                     perror(\"close\");\n             }\n         }\n\n         if (y != 2 &amp;&amp; y!= 3){\n             if (0 &lt; execvp(argvv.at(i).first[0],argvv.at(i).first )){\n                 n = -1;\n                 perror(\"execvp\");\n             }\n         }\n\n         exit(1);  //when the child process finishes doing what we want it to, cout,\n                   //we want to kill the child process so it doesn\u2019t go on in the program so we exit\n\n     }\n\n }\n\n for (unsigned int f = 0; f &lt; waitcount; f++){\n     if (-1 == wait(&amp;status))\n         perror(\"wait\");\n }\n\n if (-1 == dup2(stdins, 0))\n     perror(\"dup\");\n if (-1 == dup2(stdouts, 1))\n     perror(\"dup\");\n\n\n if (-1 == close(stdins))\n     perror(\"close\");\n if (-1 == close(stdouts))\n     perror(\"close\");\n\n return n;\n}\n</code></pre>\n\n<p>Thanks a whole bunch!</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 2, "creation_date": 1424893090, "post_id": 28728033, "comment_id": 45742413, "body": "It is well explained on the <a href=\"http://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom\" rel=\"nofollow noreferrer\">Erase/Remove Idiom</a> page on wikipedia."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1424893618, "post_id": 28728156, "comment_id": 45742736, "body": "Are these &#39;x&#39; actually unspecified ?"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1424893783, "post_id": 28728156, "comment_id": 45742852, "body": "@DieterL&#252;cking: They don&#39;t have specified values--offhand, I don&#39;t remember if they&#39;re really &quot;unspecified&quot; or &quot;indeterminate&quot;. In any case, you don&#39;t know their exact value."}], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": false, "score": 7, "last_activity_date": 1424894723, "last_edit_date": 1424894723, "creation_date": 1424893356, "answer_id": 28728156, "question_id": 28728033, "link": "https://stackoverflow.com/questions/28728033/why-is-stdwhatevererase-a-method-and-stdremove-a-standalone-function/28728156#28728156", "title": "why is std::whatever::erase() a method and std::remove() a standalone function?", "body": "<p>The erasure or removal is <em>not</em> the same.</p>\n\n<p><code>erase</code> actually removes items from a collection.</p>\n\n<p><code>std::remove</code> leaves the collection the same size as it started, but compacts the items in the collection, so those that had the value you wanted removed have been overwritten with the values after that in the collection that had other values.</p>\n\n<p>In other words, if you started with <code>1, 2, 1, 3</code>, and did a <code>remove(..., 1)</code> you'd end up with a collection containing <code>2, 3, x, x</code>, where <code>x</code> signifies some unknown value (might be a moved-from value, so if they were strings they might turn into empty strings).</p>\n\n<p>When it's done that, it returns an iterator to the position of the first <code>x</code>. If you want to actually delete those items from the collection, you then call <code>collection.erase(returned_iterator, collection.end())</code> (aka, the remove/erase idiom).</p>\n\n<p>In case you care <em>why</em> things are this way, one reason is that <code>std::remove</code> works with iterators. An iterator allows access to elements <em>in</em> a container, but not to the surrounding container itself. As such, it's not possible for <code>std::remove</code> to erase elements from a container, even for containers that support that (and not all do).</p>\n"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "is_accepted": false, "score": 3, "last_activity_date": 1424894712, "last_edit_date": 1424894712, "creation_date": 1424893393, "answer_id": 28728172, "question_id": 28728033, "link": "https://stackoverflow.com/questions/28728033/why-is-stdwhatevererase-a-method-and-stdremove-a-standalone-function/28728172#28728172", "title": "why is std::whatever::erase() a method and std::remove() a standalone function?", "body": "<p><code>std::remove</code> doesn't actually destroy elements in the container. Rather, it \"re<em>moves</em>\" all elements satisfying specific criteria from the range and returns a past-the-end iterator for the new end of the range.</p>\n\n<blockquote>\n  <p>Removing is done by shifting (by means of move assignment) the\n  elements in the range in such a way that the elements that are not to\n  be removed appear in the beginning of the range. Relative order of the\n  elements that remain is preserved and the physical size of the\n  container is unchanged. - <a href=\"http://en.cppreference.com/\" rel=\"nofollow\">http://en.cppreference.com/</a></p>\n</blockquote>\n\n<p>Move-assignment leaves the moved variable in a valid but unspecified state, so it may or may not be left unchanged.</p>\n\n<p>To actually delete elements from the container, you need to call <code>erase</code>.</p>\n\n<p>Here is a concrete example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n\nvoid printVector( const std::vector&lt;int&gt;&amp; v )\n{\n    for ( auto i : v ) {\n        std::cout &lt;&lt; i &lt;&lt; ' ';\n    }\n    std::cout &lt;&lt; std::endl;\n}\n\nint main()\n{\n    std::vector&lt;int&gt; v { 0, 1, 2, 1, 3, 4 };\n\n    printVector( v ); // Prints 0 1 2 1 3 4\n\n    // Shift elemnts that aren't to be removed to the beginning of container\n    const auto newEnd = std::remove( v.begin(), v.end(), 1 );\n\n    printVector( v ); // Prints 0 2 3 4 * *\n\n    // Erase the unwanted elements\n    v.erase( newEnd, v.end() );\n\n    printVector( v ); // Prints 0 2 3 4\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://rextester.com/WZRZ55603\" rel=\"nofollow\">Live example</a></p>\n"}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 0, "last_activity_date": 1424896673, "last_edit_date": 1424896673, "creation_date": 1424893811, "answer_id": 28728296, "question_id": 28728033, "link": "https://stackoverflow.com/questions/28728033/why-is-stdwhatevererase-a-method-and-stdremove-a-standalone-function/28728296#28728296", "title": "why is std::whatever::erase() a method and std::remove() a standalone function?", "body": "<p><code>std::remove</code> (and <code>std::remove_if</code>) is a general purpose algorithm that can be applied (also) to arrays. Elements of arrays can not be erased. Sizes of arrays are fixed. You only can move \"erased\" elements in an array to its tail. And arrays do not have methods. You can use only general functions with arrays.</p>\n\n<p>Method <code>erase</code> of user defined (that is of standard) containers indeed erases elements of a container. Moreover this method does unconditional erasing of elements.</p>\n\n<p>Take into account that to erase elements from a container you need to know the implementation details of the container. So this explains why erase is defined as a method of containers.</p>\n\n<p>In turn standard algorithms <code>std::remove</code> and <code>std::remove_if</code>  implement a general algorithm of moving \"erased\" elements. They need not to know the implementation details of the container to which they are apllied.</p>\n\n<p>Besides method erase classes <code>std::list</code> and <code>std::forward_list</code> also have their own methods <code>remove</code> and <code>remove_if</code> that opposite to the general algorithms <code>std::remove</code> and <code>std::remove_if</code> erase elements from lists according to some conditions (similarly to standard algorithms <code>std::remove</code> and <code>std::remove_if</code>).</p>\n\n<p>Consider the following example that to see the difference between general algorithm <code>std::remove</code> and method <code>remove</code> of class <code>std::list</code></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;algorithm&gt;\n#include &lt;list&gt;\n\nint main() \n{\n    std::list&lt;int&gt; l = { 1, 10, 2, 3, 10, 4 };\n\n    std::cout &lt;&lt; \"size of the list is \" &lt;&lt; l.size() &lt;&lt; std::endl;\n    for ( int x : l ) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;     \n\n    std::remove( l.begin(), l.end(), 10 );\n\n    std::cout &lt;&lt; \"\\nsize of the list is \" &lt;&lt; l.size() &lt;&lt; std::endl;\n    for ( int x : l ) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;     \n\n    l = { 1, 10, 2, 3, 10, 4 };\n\n    l.remove( 10 );\n\n    std::cout &lt;&lt; \"\\nsize of the list is \" &lt;&lt; l.size() &lt;&lt; std::endl;\n    for ( int x : l ) std::cout &lt;&lt; x &lt;&lt; ' ';\n    std::cout &lt;&lt; std::endl;     \n\n    return 0;\n}\n</code></pre>\n\n<p>The program output is</p>\n\n<pre><code>size of the list is 6\n1 10 2 3 10 4\n\nsize of the list is 6\n1 2 3 4 10 4 \n\nsize of the list is 4\n1 2 3 4 \n</code></pre>\n"}], "owner": {"reputation": 85518, "user_id": 1593077, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/10c44e0d9568e48d05708ae196ad936f?s=128&d=identicon&r=PG", "display_name": "einpoklum", "link": "https://stackoverflow.com/users/1593077/einpoklum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1424896673, "creation_date": 1424892954, "question_id": 28728033, "link": "https://stackoverflow.com/questions/28728033/why-is-stdwhatevererase-a-method-and-stdremove-a-standalone-function", "title": "why is std::whatever::erase() a method and std::remove() a standalone function?", "body": "<p>What's the difference between <code>erase()</code> and <code>remove()</code>?</p>\n\n<ul>\n<li><code>std::whatever::erase</code> - takes range iterators (first-last), and matches all elements.</li>\n<li><code>std::remove</code> - takes range iterators (first-last) and a value to match for removal.</li>\n</ul>\n\n<p>Beyond that, it looks like they do the same thing. i.e. the actual 'erasure' or 'removal' is the same in both cases (unless I'm mistaken). So, why is one of them a method (of vector, set, map etc.) and the other a free-floating function?</p>\n\n<p>Notes:</p>\n\n<ul>\n<li>Yes, I know there's also an <code>erase()</code> which takes a single iterator, but you could just as well have an <code>std::remove()</code> with the same semantics.</li>\n</ul>\n"}, {"tags": ["c++", "box2d"], "answers": [{"comments": [{"owner": {"reputation": 7813, "user_id": 624593, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f8ec043be98a4ac5f95a941463442de?s=128&d=identicon&r=PG", "display_name": "iforce2d", "link": "https://stackoverflow.com/users/624593/iforce2d"}, "edited": false, "score": 1, "creation_date": 1425371409, "post_id": 28762709, "comment_id": 45924690, "body": "Right. Generally the debug draw is not used for the final display of your game :)"}], "owner": {"reputation": 1819, "user_id": 2059662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/995b46d292bdd2e74f81d247a14cf8bc?s=128&d=identicon&r=PG", "display_name": "Ludwik", "link": "https://stackoverflow.com/users/2059662/ludwik"}, "is_accepted": true, "score": 0, "last_activity_date": 1425032502, "creation_date": 1425032502, "answer_id": 28762709, "question_id": 28728028, "link": "https://stackoverflow.com/questions/28728028/know-if-and-how-my-vertices-were-reordered/28762709#28762709", "title": "know if (and how) my vertices were reordered", "body": "<p>There doesn't seem to be any official way to do this, so, short of modifying the source code, the only option seems to be to <strong>store the vertices yourself and render from your own list</strong>, instead of querying Box2D on rendering. Notice that this gives you more artistic freedom too; you can render a fixture in a way that doesn't have to be exactly as it is physically simulated (say, a character with horns or a tail that you don't want to partake in the siumulation).</p>\n"}], "owner": {"reputation": 1819, "user_id": 2059662, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/995b46d292bdd2e74f81d247a14cf8bc?s=128&d=identicon&r=PG", "display_name": "Ludwik", "link": "https://stackoverflow.com/users/2059662/ludwik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 28762709, "answer_count": 1, "score": 1, "last_activity_date": 1425032502, "creation_date": 1424892942, "last_edit_date": 1424900735, "question_id": 28728028, "link": "https://stackoverflow.com/questions/28728028/know-if-and-how-my-vertices-were-reordered", "title": "know if (and how) my vertices were reordered", "body": "<p>C++, Box2d 2.3 game development happening here.</p>\n\n<p>TL;DR: just read the bold text.</p>\n\n<p>After creating a <strong><code>b2PolygonShape</code></strong>, I can set the vertices of the shape with the <strong><code>Set()</code> function</strong>, which takes an array of <code>b2Vec2</code> objects and a count. <a href=\"http://i.imgur.com/6ZIllNa.png\" rel=\"nofollow\">In the documentation of that function</a> there is a <strong>warning saying that the vertices may be reordered</strong> even if they form a convex polygon.</p>\n\n<p>Now, I render the fixtures using the vertices in their shapes. I'm currently implementing UV mapping; I have a vector of UV points corresponding only by order with the original vector of vertices. If the vertices get reordered, the vector of UVs will not match up, and there will be rendering errors. <strong>How can I know if and how the vertices have been reordered, so that I can reorder my UV points in the same way?</strong> </p>\n\n<p>For clarification, the resulting order I'm referring to is the one as retrieved from <code>b2PolygonShape.GetVertex()</code>.</p>\n"}, {"tags": ["c++", "c", "string", "global-variables"], "comments": [{"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1424892969, "post_id": 28727945, "comment_id": 45742322, "body": "In C++ <code>const</code> implies <code>static</code> by default. One way to deal with this is to put the definition <code>const char SINGLE_MSG[] = &quot;single message&quot;;</code> into a header, and include it in every file where used. The linker will then merge the separate instances into one."}, {"owner": {"reputation": 1049, "user_id": 3170912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d65c53d46b9f9d295bd161f60ac97c16?s=128&d=identicon&r=PG&f=1", "display_name": "iwolf", "link": "https://stackoverflow.com/users/3170912/iwolf"}, "edited": false, "score": 0, "creation_date": 1424893076, "post_id": 28727945, "comment_id": 45742408, "body": "Is there a solid reason to be messing with global character arrays here instead of just using pointers to the string literal pool?"}, {"owner": {"reputation": 2134, "user_id": 1600770, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b030b4b6aaf0cb02919d5e9cf9f96f8b?s=128&d=identicon&r=PG", "display_name": "Agostino", "link": "https://stackoverflow.com/users/1600770/agostino"}, "edited": false, "score": 0, "creation_date": 1424895455, "post_id": 28727945, "comment_id": 45743758, "body": "I edited the answer to specify why I can&#39;t include these particular headers one into another. I need another way to declare this global constant."}], "answers": [{"comments": [{"owner": {"reputation": 2134, "user_id": 1600770, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b030b4b6aaf0cb02919d5e9cf9f96f8b?s=128&d=identicon&r=PG", "display_name": "Agostino", "link": "https://stackoverflow.com/users/1600770/agostino"}, "edited": false, "score": 0, "creation_date": 1424898782, "post_id": 28728080, "comment_id": 45745593, "body": "Thanks. I&#39;ll create a separate header file with the global definitions. This will simplify my code as well. I just need to specify a custom include directory."}], "owner": {"reputation": 560, "user_id": 4604776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cXKU6.jpg?s=128&g=1", "display_name": "Nonanon", "link": "https://stackoverflow.com/users/4604776/nonanon"}, "is_accepted": true, "score": 1, "last_activity_date": 1424893138, "creation_date": 1424893138, "answer_id": 28728080, "question_id": 28727945, "link": "https://stackoverflow.com/questions/28727945/proper-way-to-create-global-constant-c-strings/28728080#28728080", "title": "Proper way to create global constant C strings", "body": "<p>When you create a global constant variable in the header, then that variable never actually gets committed to memory.</p>\n\n<p>What happens instead is that any code that uses that variable simply replaces any reference with \"single msg\".</p>\n\n<p>This means there is no need use extern, but in turn does mean you must always include that header if you use the variable.</p>\n\n<p>What extern is actually used for is exposing a variable that has been declared in a .cpp file, and therefore is in memory somewhere, to other cpp files. This is only necessary if you want a global but dynamic variable.</p>\n"}], "owner": {"reputation": 2134, "user_id": 1600770, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/b030b4b6aaf0cb02919d5e9cf9f96f8b?s=128&d=identicon&r=PG", "display_name": "Agostino", "link": "https://stackoverflow.com/users/1600770/agostino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2100, "favorite_count": 0, "accepted_answer_id": 28728080, "answer_count": 1, "score": 1, "last_activity_date": 1424898731, "creation_date": 1424892660, "last_edit_date": 1495542664, "question_id": 28727945, "link": "https://stackoverflow.com/questions/28727945/proper-way-to-create-global-constant-c-strings", "title": "Proper way to create global constant C strings", "body": "<p>I'm using C and this is what I'm doing to instantiate a global C string</p>\n\n<p>In the header of a single file</p>\n\n<pre><code>const char SINGLE_MSG[] = \"single msg\";\n</code></pre>\n\n<p>In the headers of all other files</p>\n\n<pre><code>extern const char SINGLE_MSG[];\n</code></pre>\n\n<p>It always works fine when compiling in C mode, but seems to create binder errors when compiling in C++ mode. Here is an example of such errors:</p>\n\n<pre><code>pksw_nd_proc_test2.dev32.i0.pr.obj : error LNK2001: unresolved external symbol \"char const * const SINGLE_MSG\" (?SINGLE_MSG@@3QBDB)\n</code></pre>\n\n<p>I've seen a similar <a href=\"https://stackoverflow.com/questions/7670816/create-extern-char-array-in-c\">question</a> where they also specify the buffer length. I'd rather not, since if don't want to have to remember changing that if I decide to change the string value in the source. That's the whole point to make this global, so every instance sees the same value.</p>\n\n<p>Am I doing something wrong?</p>\n\n<p>Since it's a constant, would it be better to make it static as well? It would be fine for me to have extra copies of it, as long as I don't have to copy the string value manually in the source to do the initialization.</p>\n\n<p>Edit: please note that I'm using a program that I don't fully control. It's a network simulator that lets me define a \"header block\" for each node. I do not have any way to explicitly include the header of a node in the header of another node.</p>\n\n<p>That's why I was using extern in C, and the different way globals work between the 2 languages is probably the reason I get the linker errors.</p>\n\n<p>According to the answers, the solution is to make a new, separate header file containing the definitions of the global variables and include that in all other headers.</p>\n"}, {"tags": ["c++", "function", "unsigned"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1424892755, "post_id": 28727922, "comment_id": 45742178, "body": "The prototype before <code>main</code> differs from the function&#39;s prototype."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 1, "creation_date": 1424892762, "post_id": 28727922, "comment_id": 45742183, "body": "In the definition of <code>toMorse</code>, you&#39;ve defined <code>i</code> as <code>size_t</code> (which is unsigned) and <code>stringSize</code> as <code>int</code> (which is signed), so the <code>i &lt; stringSize</code> in your <code>for</code> loop compares a signed to an unsigned, with possibly unexpected results."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1424893098, "post_id": 28727922, "comment_id": 45742419, "body": "Having C++: Avoid signed indices, you rarely need these - although a lot of code uses signed (and fix all warnings regarding signed/unsigned)."}], "answers": [{"owner": {"reputation": 550, "user_id": 4596797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/980708640d67708d1f37365bbaba058d?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Derevyanko", "link": "https://stackoverflow.com/users/4596797/andrey-derevyanko"}, "is_accepted": false, "score": 0, "last_activity_date": 1424892988, "creation_date": 1424892988, "answer_id": 28728037, "question_id": 28727922, "link": "https://stackoverflow.com/questions/28727922/signed-unsigned-mismatch-and-function-does-not-take-2-arguments-when-converting/28728037#28728037", "title": "Signed/unsigned mismatch and function does not take 2 arguments when converting to function", "body": "<p>C4018 warning is about comparison. You can use function prototype like:</p>\n\n<pre><code>string toMorse(string morseArray, size_t stringSize);\n</code></pre>\n\n<p>Also you've define <code>toMorse</code> function as <code>string toMorse(char);</code> in the beginning of the file and this is different from what you have below.</p>\n"}, {"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424895726, "post_id": 28728219, "comment_id": 45743909, "body": "<code>size_t</code> is a better option here because the value could go from <code>0</code> to the maximum length of a string. The string could be longer than <code>INT_MAX</code>."}, {"owner": {"reputation": 21, "user_id": 4605697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c89285fd9f2697f31ab52c85df24a27?s=128&d=identicon&r=PG&f=1", "display_name": "cqcmu", "link": "https://stackoverflow.com/users/4605697/cqcmu"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424898426, "post_id": 28728219, "comment_id": 45745418, "body": "I get the usage is size_t, but my point is that the code bit looks inconsistent <code>for (size_t i = 0; i &lt; stringSize; i += 1)</code>. <code>i</code> is <code>size_t</code>, <code>stringSize</code> is <code>int</code> and increment of <code>i</code> is unconventional."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424909399, "post_id": 28728219, "comment_id": 45750308, "body": "<code>stringSize</code> has been changed to <code>size_t</code> now (although it is redundant as strings know their size)"}], "owner": {"reputation": 21, "user_id": 4605697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c89285fd9f2697f31ab52c85df24a27?s=128&d=identicon&r=PG&f=1", "display_name": "cqcmu", "link": "https://stackoverflow.com/users/4605697/cqcmu"}, "is_accepted": false, "score": 0, "last_activity_date": 1424893548, "creation_date": 1424893548, "answer_id": 28728219, "question_id": 28727922, "link": "https://stackoverflow.com/questions/28727922/signed-unsigned-mismatch-and-function-does-not-take-2-arguments-when-converting/28728219#28728219", "title": "Signed/unsigned mismatch and function does not take 2 arguments when converting to function", "body": "<p>One more error - line <code>userInput</code> should say <code>morseArray</code> in <code>if (toupper(userInput.at(i)) == 'A')</code>.</p>\n\n<p>Also why would you initialize the for loop with <code>size_t i = 0</code> instead of <code>int i = 0</code>?</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4556358, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/27bac5568cf32bbd2fa4d1e98bf9ee27?s=128&d=identicon&r=PG&f=1", "display_name": "exo316", "link": "https://stackoverflow.com/users/4556358/exo316"}, "edited": false, "score": 0, "creation_date": 1424896366, "post_id": 28728837, "comment_id": 45744266, "body": "Thanks so much. I was able to get it running with no errors by changing it to a proper return type. Thanks again. And thanks to you all for the help!"}], "owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1424895681, "creation_date": 1424895681, "answer_id": 28728837, "question_id": 28727922, "link": "https://stackoverflow.com/questions/28727922/signed-unsigned-mismatch-and-function-does-not-take-2-arguments-when-converting/28728837#28728837", "title": "Signed/unsigned mismatch and function does not take 2 arguments when converting to function", "body": "<p>In the updated version, the <code>toMorse</code> function is defined to have <code>string</code> as return type.</p>\n\n<p>However you wrote <code>return 0;</code>. This constructs a string using <code>0</code> as argument, which is treated as a null pointer. (This is a hangover from C). This causes undefined behaviour which is manifesting itself as \"Debug assertion failed\".  The constructor of <code>string</code> which takes a pointer expects that to be a pointer to some characters.</p>\n\n<p>To fix this either change the function to return <code>void</code>, or return a valid string.  The function name suggests it is supposed to return the morse code string, instead of sending it to <code>cout</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 4556358, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/27bac5568cf32bbd2fa4d1e98bf9ee27?s=128&d=identicon&r=PG&f=1", "display_name": "exo316", "link": "https://stackoverflow.com/users/4556358/exo316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1424896389, "creation_date": 1424892585, "last_edit_date": 1424896389, "question_id": 28727922, "link": "https://stackoverflow.com/questions/28727922/signed-unsigned-mismatch-and-function-does-not-take-2-arguments-when-converting", "title": "Signed/unsigned mismatch and function does not take 2 arguments when converting to function", "body": "<p>So i was able to write a program that will convert a string into morse code, but the teacher wants the converting part in a function, which i did, but it gives the errors of \nwarning C4018: '&lt;' : signed/unsigned mismatch n line 29\nand\nerror C2660: 'toMorse' : function does not take 2 arguments on line 18\nAnd you would think after being able to get the normal program working this would be a cinch but my brain is dead at this point. Any help on finding out why its doing this would be greatly appreciated, though i guess i could turn in the assignment with it all in main{} wouldnt be too bad.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n// Function Prototypes\nstring toMorse(char);\n\nint main()\n{\n\n    string userInput;\n\n    cout &lt;&lt; \"Please input a string to convert to morse code.\" &lt;&lt; endl;\n    getline(cin, userInput, '\\n');\n\n    int stringSize = userInput.length();\n\n    toMorse(userInput, stringSize);\n\n}\n\n//*****************************************************************\n//Function to convert into morse code\n//*****************************************************************\nstring toMorse(string morseArray, int stringSize)\n{\n    string *toConvert = new string[stringSize];\n\n    for (size_t i = 0; i &lt; stringSize; i += 1)\n    {\n        if (toupper(userInput.at(i)) == 'A')\n        toConvert[i] = \".-\";\n    // will fill in the rest once problems are solved\n        else toConvert[i] = \" \";\n    }\n\n    for (size_t x = 0; x &lt; stringSize; x += 1)\n        cout &lt;&lt; toConvert[x] &lt;&lt; \"  \";\n\n    cout &lt;&lt; endl;\n\n    delete[] toConvert;\n\n    return 0;\n}\n</code></pre>\n\n<p>So I was able to get it working from the tips given, but now every time i run the following code (it translates correctly, just when i hit enter it shows the right input but also says \"Debug Assertion Failed! Expression: invalid null pointer on MSVCP120D.dll line 1168\"</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n// Function Prototypes\nstring toMorse(string, size_t);\n\nint main()\n{\n\n    string userInput;\n\n    cout &lt;&lt; \"Please input a string to convert to morse code.\" &lt;&lt; endl;\n    getline(cin, userInput, '\\n');\n\n    int stringSize = userInput.length();\n\n    toMorse(userInput, stringSize);\n\n}\n\n//*****************************************************************\n//Function to convert into morse code\n//*****************************************************************\nstring toMorse(string morseArray, size_t stringSize)\n{\n    string *toConvert = new string[stringSize];\n\n    for (size_t i = 0; i &lt; stringSize; i += 1)\n    {\n        if (toupper(morseArray.at(i)) == ' ')\n            toConvert[i] = \" \";\n        else if (toupper(morseArray.at(i)) == ',')\n            toConvert[i] = \"--..--\";\n        else if (toupper(morseArray.at(i)) == '.')\n            toConvert[i] = \".-.-.-\";\n        else if (toupper(morseArray.at(i)) == '?')\n            toConvert[i] = \"..--..\";\n        else if (morseArray.at(i) == '0')\n            toConvert[i] = \"-----\";\n        else if (morseArray.at(i) == '1')\n            toConvert[i] = \".----\";\n        else if (morseArray.at(i) == '2')\n            toConvert[i] = \"..---\";\n        else if (morseArray.at(i) == '3')\n            toConvert[i] = \"...--\";\n        else if (morseArray.at(i) == '4')\n            toConvert[i] = \"....-\";\n        else if (morseArray.at(i) == '5')\n            toConvert[i] = \".....\";\n        else if (morseArray.at(i) == '6')\n            toConvert[i] = \"-....\";\n        else if (morseArray.at(i) == '7')\n            toConvert[i] = \"--...\";\n        else if (morseArray.at(i) == '8')\n            toConvert[i] = \"---..\";\n        else if (morseArray.at(i) == '9')\n            toConvert[i] = \"----.\";\n        else if (toupper(morseArray.at(i)) == 'A')\n            toConvert[i] = \".-\";\n        else if (toupper(morseArray.at(i)) == 'B')\n            toConvert[i] = \"-...\";\n        else if (toupper(morseArray.at(i)) == 'C')\n            toConvert[i] = \"-.-.\";\n        else if (toupper(morseArray.at(i)) == 'D')\n            toConvert[i] = \"-..\";\n        else if (toupper(morseArray.at(i)) == 'E')\n            toConvert[i] = \".\";\n        else if (toupper(morseArray.at(i)) == 'F')\n            toConvert[i] = \"..-.\";\n        else if (toupper(morseArray.at(i)) == 'G')\n            toConvert[i] = \"--.\";\n        else if (toupper(morseArray.at(i)) == 'H')\n            toConvert[i] = \"....\";\n        else if (toupper(morseArray.at(i)) == 'I')\n            toConvert[i] = \"..\";\n        else if (toupper(morseArray.at(i)) == 'J')\n            toConvert[i] = \".---\";\n        else if (toupper(morseArray.at(i)) == 'K')\n            toConvert[i] = \"-.-\";\n        else if (toupper(morseArray.at(i)) == 'L')\n            toConvert[i] = \".-..\";\n        else if (toupper(morseArray.at(i)) == 'M')\n            toConvert[i] = \"--\";\n        else if (toupper(morseArray.at(i)) == 'N')\n            toConvert[i] = \"-.\";\n        else if (toupper(morseArray.at(i)) == 'O')\n            toConvert[i] = \"---\";\n        else if (toupper(morseArray.at(i)) == 'P')\n            toConvert[i] = \".--.\";\n        else if (toupper(morseArray.at(i)) == 'Q')\n            toConvert[i] = \"--.-\";\n        else if (toupper(morseArray.at(i)) == 'R')\n            toConvert[i] = \".-.\";\n        else if (toupper(morseArray.at(i)) == 'S')\n            toConvert[i] = \"...\";\n        else if (toupper(morseArray.at(i)) == 'T')\n            toConvert[i] = \"-\";\n        else if (toupper(morseArray.at(i)) == 'U')\n            toConvert[i] = \"..-\";\n        else if (toupper(morseArray.at(i)) == 'V')\n            toConvert[i] = \"...-\";\n        else if (toupper(morseArray.at(i)) == 'W')\n            toConvert[i] = \".--\";\n        else if (toupper(morseArray.at(i)) == 'X')\n            toConvert[i] = \"-..-\";\n        else if (toupper(morseArray.at(i)) == 'Y')\n            toConvert[i] = \"-.--\";\n        else if (toupper(morseArray.at(i)) == 'Z')\n            toConvert[i] = \"--..\";\n        else toConvert[i] = \" \";\n    }\n\n    for (size_t x = 0; x &lt; stringSize; x += 1)\n        cout &lt;&lt; toConvert[x] &lt;&lt; \"  \";\n\n    cout &lt;&lt; endl;\n\n    delete[] toConvert;\n\n    return 0;\n}\n</code></pre>\n\n<p>Thanks so much. I was able to get it running with no errors by changing it to a proper return type. Thanks again. And thanks to you all for the help!</p>\n"}, {"tags": ["c++", "sigbus"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 5, "creation_date": 1424896524, "post_id": 28727914, "comment_id": 45744346, "body": "&quot;Misaligned address&quot; usually means that you have a CPU that requires certain alignment for certain data types (e.g. a 32-bit integer must be at a 32-bit aligned address like 0x1000 or 0x1004), and your code is attempting to violate that requirement (by attempting to read a 32-bit integer from address 0x1001). You are likely using some casting or other forms of type-punning or bad pointer arithmetic in the code you haven&#39;t shown... Or possibly you have a corrupted pointer... Or one of several other possible explanations..."}, {"owner": {"reputation": 6882, "user_id": 3403834, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpA5S.jpg?s=128&g=1", "display_name": "user58697", "link": "https://stackoverflow.com/users/3403834/user58697"}, "edited": false, "score": 0, "creation_date": 1424896721, "post_id": 28727914, "comment_id": 45744455, "body": "If it still happens (without a debugger), allow core dumps, then inspect the dump with a debugger."}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1424896727, "post_id": 28727914, "comment_id": 45744460, "body": "@twalberg I don&#39;t use pointers at all in the code \u2014 only references or copying by value."}, {"owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1424897574, "post_id": 28727914, "comment_id": 45744940, "body": "The issue is likely in your <code>operator[]</code> implementation"}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "reply_to_user": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1424897769, "post_id": 28727914, "comment_id": 45745057, "body": "@CollinDauphinee added it"}, {"owner": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1424897951, "post_id": 28727914, "comment_id": 45745155, "body": "Unless there is more than one thread involved here, I&#39;d guess that your <code>std::array</code> isn&#39;t aligning it&#39;s contents in a way that satisfies the processor. If there is more than one thread, I&#39;m going to go with race condition."}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "reply_to_user": {"reputation": 12800, "user_id": 214796, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d05177bba9d853a9c546c4a965085e99?s=128&d=identicon&r=PG", "display_name": "Collin Dauphinee", "link": "https://stackoverflow.com/users/214796/collin-dauphinee"}, "edited": false, "score": 0, "creation_date": 1424898190, "post_id": 28727914, "comment_id": 45745286, "body": "@CollinDauphinee there&#39;s only one thread. Does it mean that <code>std::array</code> is broken? How can it be?"}, {"owner": {"reputation": 1067, "user_id": 331103, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/28e5ec8d8bf7d59d010a49e34d530d19?s=128&d=identicon&r=PG", "display_name": "Siqi Lin", "link": "https://stackoverflow.com/users/331103/siqi-lin"}, "edited": false, "score": 0, "creation_date": 1424904724, "post_id": 28727914, "comment_id": 45748612, "body": "What processor are you running this code on?"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1424904924, "post_id": 28727914, "comment_id": 45748698, "body": "Is that the entire Valgrind message?  I would have expected the data address as well as the code address."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1424905026, "post_id": 28727914, "comment_id": 45748742, "body": "Notice that this is an anti-pattern: <code>for(std::size_t y = 0; y &lt; S; y++) if (x == y) matrix[x][y] = 1.f;</code>  Instead, just say <code>matrix[x][x] = 1.0f;</code>"}, {"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1424907692, "post_id": 28727914, "comment_id": 45749776, "body": "Perhaps the code for <code>Renderer::draw_triangle(...)</code> would help some, given the Valgrind output..."}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1424946378, "post_id": 28727914, "comment_id": 45763331, "body": "@BenVoigt thanks. This code is the opposite of optimized: I want it to get it correct and covered with tests first and go all over it and replace this brain farts with something faster afterwards"}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 1, "creation_date": 1424964149, "post_id": 28727914, "comment_id": 45774674, "body": "@golergka: Shorter simpler code is <i>also</i> easier to get correct."}], "answers": [{"comments": [{"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1424901933, "post_id": 28730530, "comment_id": 45747325, "body": "&gt; you are creating allocations that are getting lost, using up your available memory, then overflowing the memory space  Do you see something like that in the code that I&#39;ve provided?"}, {"owner": {"reputation": 2638, "user_id": 717645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53311c55f7c961936130abe3df517ea1?s=128&d=identicon&r=PG", "display_name": "shipr", "link": "https://stackoverflow.com/users/717645/shipr"}, "reply_to_user": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1424904356, "post_id": 28730530, "comment_id": 45748429, "body": "I don&#39;t; but not all code was shown.  I am editing my response now based on the input from valgrind."}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1425195595, "post_id": 28730530, "comment_id": 45857611, "body": "I discovered the problem, and it turns out that it had nothing to do with the code I posted, and was really an obvious one. According to <a href=\"http://meta.stackoverflow.com/questions/269605/my-question-turned-out-to-be-a-rather-esoteric-typo-what-should-i-do-what-sho\">this</a>, I should delete this question, but there&#39;s a lot of great discussion here. Not really sure what to do with it; can&#39;t accept this answer, because it technically isn&#39;t correct (it wasn&#39;t the issue) although you helped me greatly."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1425200864, "post_id": 28730530, "comment_id": 45858618, "body": "@golergka You may create an answer and accept it. That&#39;s a desirable, standard behavior"}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1425201014, "post_id": 28730530, "comment_id": 45858650, "body": "@black but my personal answer (1) won&#39;t be useful to anyone else and (2) would shadow this excellent answer, which is really useful for anyone."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 0, "creation_date": 1425201368, "post_id": 28730530, "comment_id": 45858719, "body": "@golergka (i) it <i>will</i> be useful: somebody might be having the same issue and end up on this question; (ii) This answer does not provide any concrete help for the solution, while yours certainly would."}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 0, "creation_date": 1425201479, "post_id": 28730530, "comment_id": 45858749, "body": "@black I don&#39;t think that anyone would be having the same issue as I <i>actually</i> had, because he would have to have the exact same code. However, a lot of people have issue that I <i>thought</i> I had, for which this answer is much better than my actual answer."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "edited": false, "score": 1, "creation_date": 1425201777, "post_id": 28730530, "comment_id": 45858816, "body": "@golergka I can&#39;t obligate you, but please note that&#39;s how SE should work in this case. Please <a href=\"https://stackoverflow.com/help/self-answer\">read</a>. You could still point out your notes in your answer."}, {"owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "reply_to_user": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "edited": false, "score": 1, "creation_date": 1425201886, "post_id": 28730530, "comment_id": 45858843, "body": "@black Thanks for this discussion, I think I&#39;ll do a write-up about this issue later today."}], "owner": {"reputation": 2638, "user_id": 717645, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/53311c55f7c961936130abe3df517ea1?s=128&d=identicon&r=PG", "display_name": "shipr", "link": "https://stackoverflow.com/users/717645/shipr"}, "is_accepted": true, "score": 4, "last_activity_date": 1424904624, "last_edit_date": 1424904624, "creation_date": 1424901768, "answer_id": 28730530, "question_id": 28727914, "link": "https://stackoverflow.com/questions/28727914/what-does-misaligned-address-error-mean/28730530#28730530", "title": "What does &quot;Misaligned address error&quot; mean?", "body": "<p>Without a processor that checks for misalignment (as @twalberg says), it is impossible to run and validate the code.  But I can say this: it is a common bug in the C++ or other libraries to confuse one type of exception with another type.</p>\n\n<p>My guess -- sorry I can't do more -- is that you are creating allocations that are getting lost, using up your available memory, then overflowing the memory space.  The very uncommon exception thrown when you exceed the available memory is probably unexpected and getting returned as a misalignment error. Try checking the memory usage as you run, to determine whether this might be the case.</p>\n\n<p>EDIT:</p>\n\n<p>My guess was wrong, and the valgrind output shows that the Misaligned address error was correct.  Running that was a good idea.  The clear indication is that there is a bug at a lower level than in your code, so my original idea is almost certainly correct: there is a bug that it is not in your code, but is masked.</p>\n\n<p>Note that it seems there is a difference between the identity() constructor and the Matrix&lt;,> constructor in that the former is initialized along the diagonal (slowly: better would be to eliminate the inner loop) and the latter is not.  That might affect the behavior of v2m and m2v.</p>\n"}], "owner": {"reputation": 9968, "user_id": 312725, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/9GV9q.jpg?s=128&g=1", "display_name": "Max Yankov", "link": "https://stackoverflow.com/users/312725/max-yankov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18045, "favorite_count": 0, "accepted_answer_id": 28730530, "answer_count": 1, "score": 6, "last_activity_date": 1425195659, "creation_date": 1424892551, "last_edit_date": 1425195659, "question_id": 28727914, "link": "https://stackoverflow.com/questions/28727914/what-does-misaligned-address-error-mean", "title": "What does &quot;Misaligned address error&quot; mean?", "body": "<p>First of all \u2014 sorry for the specifics. I generally try to boil my SO questions to generic \"class A\" stuff with only relevant stuff, but I'm not sure what's the source of the problem here.</p>\n\n<p>I have a matrix class template that looks like this (only showing what I think are the relevant parts):</p>\n\n<pre><code>template &lt;std::size_t R, std::size_t C&gt;\nclass Matrix\n{\nprivate:\n    //const int rows, cols;\n    std::array&lt;std::array&lt;float,C&gt;,R&gt; m;\npublic:\n    inline std::array&lt;float,C&gt;&amp; operator[](const int i)\n    {\n        return m[i];\n    }\n\n    const std::array&lt;float,C&gt; operator[](const int i) const\n    {\n        return m[i];\n    }\n\n    template&lt;std::size_t N&gt;\n    Matrix&lt;R,N&gt; operator *(const Matrix&lt;C,N&gt; a) const\n    {\n        Matrix&lt;R,N&gt; result = Matrix&lt;R,N&gt;();\n        // irrelevant calculation\n        return result;\n    }\n    // ... other very similar stuff, I'm not sure that it's relevant\n}\n\ntemplate &lt;std::size_t S&gt;\nMatrix&lt;S,S&gt; identity()\n{\n    Matrix&lt;S,S&gt; matrix = Matrix&lt;S,S&gt;();\n\n    for(std::size_t x = 0; x &lt; S; x++)\n    {\n        for(std::size_t y = 0; y &lt; S; y++)\n        {\n            if (x == y)\n            {\n                matrix[x][y] = 1.f;\n            }\n        }\n    }\n\n    return matrix;\n}\n</code></pre>\n\n<p>I unit tested the whole class, both multiplication and identity factory seem to be working alright. However, then I use it in this method, which gets called <strong>a lot</strong> of times (I think that if you ever wrote a renderer, it's pretty obvious what I'm trying to do here):</p>\n\n<pre><code>Vec3i Renderer::world_to_screen_space(Vec3f v)\n{\n    Matrix&lt;4,1&gt; vm = v2m(v);\n    Matrix&lt;4,4&gt; projection = identity&lt;4&gt;(); // If I change this to Matrix&lt;4,4&gt;(), the error doesn't happen\n    projection[3][2] = -1.f;\n    vm = projection * vm;\n    Vec3f r = m2v(vm);\n    return Vec3i(\n            (r.x + 1.) * (width / 2.),\n            (r.y + 1.) * (height / 2.),\n            r.z\n        );\n}\n</code></pre>\n\n<p>And after some amount of time and some amount of random calls to this method, I get this:</p>\n\n<pre><code>Job 1, 'and ./bin/main' terminated by signal SIGBUS (Misaligned address error)\n</code></pre>\n\n<p>However, if I change the line <code>identity&lt;4&gt;()</code> to <code>Matrix&lt;4,4&gt;()</code> the error doesn't happen. I'm new to C++, so it must be something really stupid.</p>\n\n<p>So, (1) what does this error mean and (2) how did I manage to shoot myself in the leg?</p>\n\n<p><strong>Update</strong>: and of course, this bug won't reproduce in the LLDB debugger.</p>\n\n<p><strong>Update 2</strong>: here's what I got after running the program through Valgrind:</p>\n\n<pre><code>==66525== Invalid read of size 4\n==66525==    at 0x1000148D5: Renderer::draw_triangle(Vec3&lt;float&gt;, Vec3&lt;float&gt;, Vec3&lt;float&gt;, Vec2&lt;int&gt;, Vec2&lt;int&gt;, Vec2&lt;int&gt;, Model, float) (in ./bin/main)\n</code></pre>\n\n<p>And <code>draw_triangle</code> is exactly the method that calls <code>world_to_screen_space</code> and uses it's result.</p>\n\n<p><strong>Update 3</strong>: I discovered the source of the problem, and it wasn't anything related to this code \u2014 and it was something pretty obvious, too. Really not sure what to do about this question now.</p>\n"}, {"tags": ["c++", "exception", "clang", "lldb", "cgal"], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 1612366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXGu5.jpg?s=128&g=1", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/1612366/michael-burr"}, "edited": false, "score": 0, "creation_date": 1424920213, "post_id": 28730388, "comment_id": 45753024, "body": "Thanks for your comments.    Unfortunately, they didn&#39;t produce any results (the program did not produce an exception from lldb on the command line).  So, I figured that something in compilation removed the exception.  Fortunately, your answer did lead me to the correct answer (so I&#39;m giving you the credit for an answer).  The cmake script was clobbering the debugging symbols.  I was able to stop that by adding   <code>-DCMAKE_BUILD_TYPE=Debug</code> and <code>-DCGAL_DONT_OVERRIDE_CMAKE_FLAGS=TRUE</code>  to the cmake command.  With these flags, the exception was sent to stderr."}], "owner": {"reputation": 20083, "user_id": 2465073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0f7ba796598ce99fe9d17b66c119b00?s=128&d=identicon&r=PG", "display_name": "Jim Ingham", "link": "https://stackoverflow.com/users/2465073/jim-ingham"}, "is_accepted": true, "score": 0, "last_activity_date": 1424901215, "creation_date": 1424901215, "answer_id": 28730388, "question_id": 28727637, "link": "https://stackoverflow.com/questions/28727637/how-to-display-cgal-exceptions-in-command-line-lldb/28730388#28730388", "title": "How to display CGAL exceptions in command line lldb", "body": "<p>I don't know quite what you want to get.  You can get lldb to stop at the point where the exception is going to be thrown by setting a breakpoint on the exception throw:</p>\n\n<pre><code>(lldb) break set -n __cxa_throw\n</code></pre>\n\n<p>Then you will stop in the debugger at the point where the the exception is about to be delivered.  It is often helpful to see the context for the exception.  Note that if the library you are working with or your own code uses exceptions a lot it might get tedious to wade through all the unrelated hits...  If you just want to see the backtrace, you can put a command on the breakpoint that prints the backtrace and continues.  The last one printed will be the interesting one...  Do this like:</p>\n\n<pre><code>(lldb) br comm add\nEnter your debugger command(s).  Type 'DONE' to end.\n&gt; bt \n&gt; continue \n&gt; DONE\n</code></pre>\n\n<p>This adds a command to the last set breakpoint (specify the breakpoint number as an argument to the command if it wasn't the last one.)</p>\n\n<p>Note, it's most likely the error text is just consed up and printed out by the checker code before throwing the error.  The debugger has no way of knowing this is a special thing, the best it can do is print it to the console along with all other text going to stderr...</p>\n"}], "owner": {"reputation": 199, "user_id": 1612366, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MXGu5.jpg?s=128&g=1", "display_name": "Michael Burr", "link": "https://stackoverflow.com/users/1612366/michael-burr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 293, "favorite_count": 0, "accepted_answer_id": 28730388, "answer_count": 1, "score": 2, "last_activity_date": 1424971050, "creation_date": 1424891542, "last_edit_date": 1424971050, "question_id": 28727637, "link": "https://stackoverflow.com/questions/28727637/how-to-display-cgal-exceptions-in-command-line-lldb", "title": "How to display CGAL exceptions in command line lldb", "body": "<p>I usually debug my code by hand, but I am trying to use lldb to debug a CGAL project.  Therefore, this is a newbie lldb question.  The following code causes an exception (that is the expected behavior).  When I compile and run the following code in Xcode (using os-x's built-in clang compiler)</p>\n\n<pre><code>#include &lt;CGAL/Exact_predicates_inexact_constructions_kernel.h&gt;\n#include &lt;CGAL/Polygon_with_holes_2.h&gt;\n#include &lt;CGAL/Boolean_set_operations_2.h&gt;\n\ntypedef CGAL::Exact_predicates_inexact_constructions_kernel K;\ntypedef CGAL::Point_2&lt;K&gt; Point;\ntypedef CGAL::Polygon_2&lt;K&gt; Polygon_2;\ntypedef CGAL::Polygon_with_holes_2&lt;K&gt; Polygon_with_holes_2;\n\nint main(){\n    Polygon_2 p,q;\n    Polygon_with_holes_2 r;\n\np.push_back(Point(0,0));\np.push_back(Point(1,0));\np.push_back(Point(1,1));\n\nq.push_back(Point(0,0));\nq.push_back(Point(0,1));\nq.push_back(Point(1,1));\n\nCGAL::join(p,q,r);\n\nreturn 0;\n}\n</code></pre>\n\n<p>I get the following information: </p>\n\n<pre><code>CGAL warning: check violation!\nExpression : valid_orientation\nFile       : /opt/local/include/CGAL/Boolean_set_operations_2/Gps_polygon_validation.h\nLine       : 310\nExplanation: The polygon has a wrong orientation.\nRefer to the bug-reporting instructions at http://www.cgal.org/bug_report.html\nCGAL error: precondition violation!\nExpression : is_valid_unknown_polygon(p, t)\nFile       : /opt/local/include/CGAL/General_polygon_set_on_surface_2.h\nLine       : 45\nExplanation: \nRefer to the bug-reporting instructions at http://www.cgal.org/bug_report.html\nlibc++abi.dylib: terminating with uncaught exception of type CGAL::Precondition_exception: CGAL ERROR: precondition violation!\nExpr: is_valid_unknown_polygon(p, t)\nFile: /opt/local/include/CGAL/General_polygon_set_on_surface_2.h\nLine: 45\n(lldb) \n</code></pre>\n\n<p>I would like to know how to get the same information from lldb on the command line.  </p>\n"}, {"tags": ["c++", "operator-overloading"], "answers": [{"comments": [{"owner": {"reputation": 697, "user_id": 3417657, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/GynoP.png?s=128&g=1", "display_name": "NefariousOctopus", "link": "https://stackoverflow.com/users/3417657/nefariousoctopus"}, "edited": false, "score": 0, "creation_date": 1424893051, "post_id": 28727680, "comment_id": 45742385, "body": "Thank you, may I ask you why does it need to be that way? :)"}, {"owner": {"reputation": 697, "user_id": 3417657, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/GynoP.png?s=128&g=1", "display_name": "NefariousOctopus", "link": "https://stackoverflow.com/users/3417657/nefariousoctopus"}, "edited": false, "score": 0, "creation_date": 1424893505, "post_id": 28727680, "comment_id": 45742650, "body": "I didn&#39;t realize that it is nonsense to pass it as non const :D Thank you again :)"}], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 4, "last_activity_date": 1424893249, "last_edit_date": 1424893249, "creation_date": 1424891713, "answer_id": 28727680, "question_id": 28727565, "link": "https://stackoverflow.com/questions/28727565/c-operator-i-o-overloading/28727680#28727680", "title": "C++ operator I/O overloading", "body": "<p>You need to accept the object to output by <code>const</code> reference. You're accepting it as a non-const reference to which the return from <code>add</code> cannot be bound.</p>\n\n<p><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Complex&amp; cComplex) {</code></p>\n\n<p>This design/behavior is to prevent mistakes where a function expects to mutate the value of a reference parameter, but the reference has been bound to an unnamed temporary object, in other words memory that can't be accessed again, rendering the changes pointless.</p>\n"}, {"owner": {"reputation": 81, "user_id": 4455974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uqBKD.jpg?s=128&g=1", "display_name": "Robert Blatner", "link": "https://stackoverflow.com/users/4455974/robert-blatner"}, "is_accepted": false, "score": 1, "last_activity_date": 1424891766, "creation_date": 1424891766, "answer_id": 28727693, "question_id": 28727565, "link": "https://stackoverflow.com/questions/28727565/c-operator-i-o-overloading/28727693#28727693", "title": "C++ operator I/O overloading", "body": "<p>Your definition should be </p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, const Complex&amp; cComplex) {\n  out &lt;&lt; cComplex.m_fReal &lt;&lt; \" \" &lt;&lt; cComplex.m_fImaginary;\n  return out;\n}\n</code></pre>\n\n<p>cComplex needs to be const qualified for you to access its private variables using \".\"</p>\n"}], "owner": {"reputation": 697, "user_id": 3417657, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/GynoP.png?s=128&g=1", "display_name": "NefariousOctopus", "link": "https://stackoverflow.com/users/3417657/nefariousoctopus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 28727680, "answer_count": 2, "score": 2, "last_activity_date": 1424893249, "creation_date": 1424891298, "question_id": 28727565, "link": "https://stackoverflow.com/questions/28727565/c-operator-i-o-overloading", "title": "C++ operator I/O overloading", "body": "<p>I've encountered a strange problem while overloading <code>&lt;&lt;</code> operator for a <code>Complex</code> class (The Complex class and overload function are not complete, but the meaning should be the same - BUT if you feel there is missing some important part, just prompt me ;-) ):</p>\n\n<pre><code>class Complex {\n    float m_fReal;\n    float m_fImaginary;\npublic:\n    Complex();\n    Complex(float real, float imaginary);\n    Complex add(Complex) const;\n\n    friend std::ostream&amp; operator&lt;&lt; \n          (std::ostream&amp; out, Complex cComplex);\n};\n</code></pre>\n\n<p>Overload function:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, Complex cComplex) {\n    out &lt;&lt; cComplex.m_fReal &lt;&lt; \" \" &lt;&lt; cComplex.m_fImaginary;\n    return out;\n}\n</code></pre>\n\n<p>Add function:</p>\n\n<pre><code>Complex Complex::add(Complex cComplex) const {\n    return Complex (m_fReal + cComplex.m_fReal,\n                    m_fImaginary + cComplex.m_fImaginary);\n}\n</code></pre>\n\n<p>Function call in main:</p>\n\n<pre><code>Complex x(1,1), y(2,2);\ncout &lt;&lt; \"x+y=\" &lt;&lt; x.add(y) &lt;&lt; endl;\n</code></pre>\n\n<p>While the above works, this does not (only parts that differ).</p>\n\n<p>Declaration in <code>Complex</code> class:</p>\n\n<pre><code>friend std::ostream&amp; operator&lt;&lt; \n      (std::ostream&amp; out, Complex&amp; cComplex);\n</code></pre>\n\n<p>Definition:</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; out, Complex&amp; cComplex) {\n    out &lt;&lt; cComplex.m_fReal &lt;&lt; \" \" &lt;&lt; cComplex.m_fImaginary;\n    return out;\n}\n</code></pre>\n\n<p>My intention was to pass the Complex class by reference. Can anybody explain to me, what went wrong in this code and why?</p>\n"}, {"tags": ["c++", "algorithm", "boost", "traveling-salesman"], "owner": {"reputation": 1617, "user_id": 247041, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/04e14b97476c57347bf1222cd9836964?s=128&d=identicon&r=PG&f=1", "display_name": "kirbo", "link": "https://stackoverflow.com/users/247041/kirbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 641, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1502970568, "creation_date": 1424891037, "last_edit_date": 1502970568, "question_id": 28727490, "link": "https://stackoverflow.com/questions/28727490/flavor-of-a-traveling-salesmantsp-using-boostgraph", "title": "Flavor of a Traveling Salesman(TSP) using Boost::Graph", "body": "<p>I need to find an optimal solution for a Travelling Salesman Problem on  graphs with the small number of vertices (&lt; 10). Since this is an NP hard problem I am ready to do the brute force approach, for the small number of vertices it should be doable in a very small time. </p>\n\n<p>I have a slightly modified conditions for 2 problems:</p>\n\n<p><strong>(A)</strong></p>\n\n<ul>\n<li>The graph is bidirectional, with different weights in each direction.</li>\n<li>All vertices are connected to all.</li>\n<li>(Nice to have condition) You can visit the same vertices more than once, and travel the same paths more than once (however for eventual completeness you should not loop infinitely)</li>\n</ul>\n\n<p><strong>(B)</strong></p>\n\n<ul>\n<li>In addition to conditions of <strong>(A)</strong>, here you need to visit a subset of vertices, while you still allow to travel through all other vertices of a graph. (given that it is a better solution).</li>\n</ul>\n\n<p>A while back I have implemented a brute force solution and some heuristics like <a href=\"http://en.wikipedia.org/wiki/Lin%E2%80%93Kernighan_heuristic\" rel=\"nofollow\">Lin\u2013Kernighan</a> (using simple matrix of weights), however I never used Graph data structures like in boost. And I was wounding if there is an existing implementation that I could use or a set of algorithms that could help me out to get optimal solution. Also I would appreciate if you could advise on how to get the part <strong>(B)</strong> right.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "language-lawyer", "undefined-behavior"], "comments": [{"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 2, "creation_date": 1424891074, "post_id": 28727439, "comment_id": 45741224, "body": "I believe <code>p</code> will still point to the memory location where <code>n</code> was, but you have no way of knowing what will be there."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1424891802, "post_id": 28727439, "comment_id": 45741689, "body": "@mstbaum and how is that related to the question?"}, {"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 0, "creation_date": 1424893367, "post_id": 28727439, "comment_id": 45742565, "body": "@remyabel  (My previous deleted comment asked if &quot;can&#39;t predict the results&quot; implies UB.)  Perhaps I&#39;m not clear on what undefined behaviour is. My reasoning is probably similar to mstbaum&#39;s, in that we don&#39;t know what is in that location in memory, so we can&#39;t predict the results. Is not that sufficient? Do I need to look it up in the standard to be sure?"}, {"owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 0, "creation_date": 1424894335, "post_id": 28727439, "comment_id": 45743151, "body": "A highly related question: <a href=\"http://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope\" title=\"can a local variables memory be accessed outside its scope\">stackoverflow.com/questions/6441218/&hellip;</a>"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424894430, "post_id": 28727439, "comment_id": 45743208, "body": "<code>basic.stc.dynamic.deallocation&#47;4</code> says that it&#39;s UB if <code>p</code> was pointing to dynamic storage that has now been freed, but doesn&#39;t say anything about automatic storage"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 1, "creation_date": 1424894606, "post_id": 28727439, "comment_id": 45743298, "body": "@eigenchris none of those answers appear to cite whether or not it is UB (they just announce it is or isn&#39;t, without evidence)"}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424900760, "post_id": 28727439, "comment_id": 45746740, "body": "@MattMcNabb there is one example from the standard that kind of fits this case from section <code>2.2</code> which is covered in <a href=\"http://stackoverflow.com/q/28506342/1708801\">this question</a> but clearly non-normative and it is not backed up by any normative text I can find."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "reply_to_user": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "edited": false, "score": 1, "creation_date": 1424902334, "post_id": 28727439, "comment_id": 45747469, "body": "@eigenchris An object with an indetermine value has an unpredictable value. Would you say that behavior is <i>undefined</i>? No, because the Standard mandates it."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1464099792, "post_id": 28727439, "comment_id": 62338711, "body": "No current version of the Standard describes the behavior of Indeterminate Values in a way which could be reconciled with compiler behavior in all cases except by saying that indeterminate values are not required to behave as anything representable as a bit pattern for a type; such behavior is not limited to unusual architectures.  Short types are often stored in longer registers, and if their values are never set the registers&#39; contents may hold values that aren&#39;t valid for the shorter types."}, {"owner": {"reputation": 9560, "user_id": 2023370, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4840a671d94ce5df0818cce059cab62b?s=128&d=identicon&r=PG&f=1", "display_name": "user2023370", "link": "https://stackoverflow.com/users/2023370/user2023370"}, "edited": false, "score": 0, "creation_date": 1578494457, "post_id": 28727439, "comment_id": 105457297, "body": "Why not assign <code>n</code> to 42?"}], "answers": [{"comments": [{"owner": {"reputation": 2125, "user_id": 435815, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d88c98fb1c39bcbcdf48385dc0c32c1d?s=128&d=identicon&r=PG", "display_name": "Alexander Rautenberg", "link": "https://stackoverflow.com/users/435815/alexander-rautenberg"}, "edited": false, "score": 1, "creation_date": 1424893555, "post_id": 28728070, "comment_id": 45742686, "body": "No idea where this is in the standard, but since n lives on the stack here, one would think that the memory would be &quot;released&quot; when it&#39;s going out of scope."}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "edited": false, "score": 0, "creation_date": 1424893610, "post_id": 28728070, "comment_id": 45742729, "body": "Additionally, my understanding of 3.7.3 (&quot;automatic storage duration&quot;) is that the storage which the object occupied is not required to exist after the block exits."}, {"owner": {"reputation": 142904, "user_id": 1708801, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/01b9a608af886840fcf05fcfd9b5dc27?s=128&d=identicon&r=PG", "display_name": "Shafik Yaghmour", "link": "https://stackoverflow.com/users/1708801/shafik-yaghmour"}, "edited": false, "score": 1, "creation_date": 1424893729, "post_id": 28728070, "comment_id": 45742806, "body": "Can you identify when an storage is <i>reused or released</i>, since it  depends on that phrase. Especially since this requires this happens <i>before</i>."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424893758, "post_id": 28728070, "comment_id": 45742834, "body": "I&#39;d say that &quot;the storage is released&quot; happens when the variable goes out of scope, so this doesn&#39;t apply (see 3.7.3/1). That section is trying to talk about situations such as placement delete and new"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1424894915, "post_id": 28728070, "comment_id": 45743452, "body": "Re. the updated version, &quot;such a glvalue&quot; is still referring to &quot; before the storage which the object occupied is reused or released,&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "edited": false, "score": 0, "creation_date": 1424901970, "post_id": 28728070, "comment_id": 45747339, "body": "Is it undefined behavior just to dereference it, though? Is it guaranteed that the result will be <code>45</code> for example?"}], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": false, "score": 6, "last_activity_date": 1463972929, "last_edit_date": 1463972929, "creation_date": 1424893095, "answer_id": 28728070, "question_id": 28727439, "link": "https://stackoverflow.com/questions/28727439/is-it-undefined-behavior-to-dereference-a-dangling-pointer/28728070#28728070", "title": "Is it undefined behavior to dereference a dangling pointer?", "body": "<p>I'm not 100% sure because of the wording but it looks like this is covered by 3.8/6 (the reason I think this interpretation is correct is because of the non-normative example in 3.8/5, <code>// undefined behavior, lifetime of *pb has ended</code>):</p>\n\n<blockquote>\n  <p>...after the lifetime of an object has ended and before the storage which the object occupied is reused or released, any glvalue that refers to the original object may be used but only in limited ways....The program has undefined behavior if:</p>\n</blockquote>\n\n<p>Then the first bullet is the culprit: <code>an lvalue-to-rvalue conversion (4.1) is applied to such a glvalue,</code>: This conversion has to happen either at the point of call to <code>operator&lt;&lt;</code> or finally at the point where the integral value is read for formatting within <code>ostream</code> code.</p>\n"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "is_accepted": false, "score": 0, "last_activity_date": 1424894511, "creation_date": 1424894511, "answer_id": 28728510, "question_id": 28727439, "link": "https://stackoverflow.com/questions/28727439/is-it-undefined-behavior-to-dereference-a-dangling-pointer/28728510#28728510", "title": "Is it undefined behavior to dereference a dangling pointer?", "body": "<p>So first of all according to <strong>3.7.3 Automatic storage duration</strong> storage of your object is released:</p>\n\n<blockquote>\n  <p>Block-scope variables explicitly declared register or not explicitly\n  declared static or extern have automatic storage duration. The storage\n  for these entities lasts until the block in which they are created\n  exits.</p>\n</blockquote>\n\n<p>And from <strong>3.8 Object lifetime</strong></p>\n\n<blockquote>\n  <p>Before the lifetime of an object has started but after the storage\n  which the object will occupy has been allocated or, after the\n  lifetime of an object has ended and before the storage which the\n  object occupied is reused or released, any pointer that refers to the\n  storage location where the object will be or was located may be used\n  but only in limited ways</p>\n</blockquote>\n\n<p>so dereferencing pointer to variable which storage released leads to UB</p>\n"}, {"owner": {"reputation": 61429, "user_id": 572743, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9941673f566f229bc536c1c2b558884e?s=128&d=identicon&r=PG&f=1", "display_name": "Damon", "link": "https://stackoverflow.com/users/572743/damon"}, "is_accepted": false, "score": 1, "last_activity_date": 1424961531, "creation_date": 1424961531, "answer_id": 28745226, "question_id": 28727439, "link": "https://stackoverflow.com/questions/28727439/is-it-undefined-behavior-to-dereference-a-dangling-pointer/28745226#28745226", "title": "Is it undefined behavior to dereference a dangling pointer?", "body": "<p>That's certainly undefined behavior (by common sense, and by the wording of the standard).</p>\n\n<p>As far as the standard goes, 3.8/5 is rather concrete about what is allowed and about what isn't:</p>\n\n<blockquote>\n  <p>[...] after the lifetime of an object has ended and <strong>before</strong> the storage which the object occupied is reused or released, any pointer that refers to the storage location where the object will be or was located may be used but only in limited ways [...] <strong>and using the pointer as if the pointer were of type void*,\n  is well-defined</strong>.<br>\n  Indirection [...] is permitted [...] as described below. The program <strong>has undefined behavior if</strong>:<br>\n  - ...<br>\n  - [...] used as operand of <code>static_cast</code>, except when the conversion is to pointer to cv <code>void</code>, or to pointer to cv <code>void</code> and subsequently to pointer to either cv <code>char</code> or cv <code>unsigned char</code><br>\n  - [...] used as the operand of <code>dynamic_cast</code></p>\n</blockquote>\n\n<p>The object's storage ends at the end of the scope per 3.7.3/1 (in practice this is most likely not true, the stack frame will probably be reset at the end of the function, but <em>formally</em> that's what happens). Therefore, the dereference doesn't happen after the end of lifetime <strong>but before</strong> the release of the storage. It happens <strong>after</strong> release of the storage.<br>\nThe special conditions under which you may dereference the pointer anyway do therefore not apply (the same is true for any similar paragraphs with the same precondition such as 3.8/6).</p>\n\n<p>Further, assuming that the previous paragraph wasn't true, it is only allowable to dereference the pointer as cv <code>void*</code> or to cast it to cv <code>char</code> (signed or unsigned) prior to dereferencing. In other words, you are <strong>not</strong> allowed to look at the pointed-to <code>int</code> as if it were an <code>int</code>. As stated in 3.8/5, the <code>int*</code> is really only a mere <code>void*</code> after the lifetime of the object. Which means dereferencing it as <code>int*</code> is the equivalent of doing a cast (not explicitly, but still).</p>\n\n<p>One would really wish that this attempt produces an error, but I guess that's a really tough one for the compiler to detect. The pointer itself is well and alive, and it has been safely derived by taking a valid object's address, that's probably near impossible to diagnose.</p>\n"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1463973404, "creation_date": 1463973404, "answer_id": 37382133, "question_id": 28727439, "link": "https://stackoverflow.com/questions/28727439/is-it-undefined-behavior-to-dereference-a-dangling-pointer/37382133#37382133", "title": "Is it undefined behavior to dereference a dangling pointer?", "body": "<p><code>*p</code> is a glvalue.  The code <code>cout &lt;&lt; *p</code> necessitates an <em>lvalue-to-rvalue conversion</em>. This is defined by C++14 [conv.lval].</p>\n\n<p>Point 2 lists various cases and describes the behaviour in each case. None of those apply to <code>*p</code>. Particularly, the last point is:</p>\n\n<blockquote>\n  <p>Otherwise, the value contained in the object indicated by the glvalue is the prvalue result.</p>\n</blockquote>\n\n<p>However, <code>*p</code> does not indicate an object.  </p>\n\n<p>In section [basic.life] are a few cases that define what lvalue-to-rvalue conversion does, beyond what is said in [conv.lval]. Those cases relate to when storage for an object has been obtained, but we are outside the object's lifetime.  However they do not apply to <code>*p</code> because storage is released when the previous block ends.</p>\n\n<p>So, the behaviour of this code is <em>undefined by omission</em>: nowhere in the Standard does it define what it means to perform rvalue conversion when the lvalue does not indicate an object and does not indicate valid storage for an object.</p>\n\n<hr>\n\n<p>It can feel unsatisfactory for something to be \"undefined by omission\", we always like to see a concrete statement \"this is undefined behaviour\" to be sure we haven't overlooked something.  But sometimes that is how it is.</p>\n"}], "owner": {"reputation": 91, "user_id": 4607239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db8224789dd620624f91d733fbf9a722?s=128&d=identicon&r=PG&f=1", "display_name": "user4607239", "link": "https://stackoverflow.com/users/4607239/user4607239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1569, "favorite_count": 1, "answer_count": 4, "score": 9, "last_activity_date": 1463973404, "creation_date": 1424890897, "last_edit_date": 1463971524, "question_id": 28727439, "link": "https://stackoverflow.com/questions/28727439/is-it-undefined-behavior-to-dereference-a-dangling-pointer", "title": "Is it undefined behavior to dereference a dangling pointer?", "body": "<p>I can't find where in the standard that it says this program is undefined:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main() \n{\n    int *p;\n    {\n        int n = 45;\n        p = &amp;n;\n    }\n    std::cout &lt;&lt; *p;\n}\n</code></pre>\n\n<p>None of the cases in \u00a73.8 object lifetime seem to apply here. </p>\n"}, {"tags": ["c++", "vector"], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 2120162, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/awszn.jpg?s=128&g=1", "display_name": "Shimul Chowdhury", "link": "https://stackoverflow.com/users/2120162/shimul-chowdhury"}, "edited": false, "score": 1, "creation_date": 1424891784, "post_id": 28727491, "comment_id": 45741679, "body": "Yeah. In C++ that syntax creates a anonymous object on the spot. If we want to store it then need to give a object name otherwise not. In terms of vector that anonymous object becoming an element of that vector."}], "owner": {"reputation": 8029, "user_id": 3137499, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7acff2bbbdb9c51ea478377a0f6dcb03?s=128&d=identicon&r=PG&f=1", "display_name": "aruisdante", "link": "https://stackoverflow.com/users/3137499/aruisdante"}, "is_accepted": true, "score": 2, "last_activity_date": 1424891040, "creation_date": 1424891040, "answer_id": 28727491, "question_id": 28727302, "link": "https://stackoverflow.com/questions/28727302/how-are-vector-of-class-objects-initialized/28727491#28727491", "title": "How are vector of class objects initialized", "body": "<p>In C++, it's perfectly valid to construct an instance of a class inline with a method call (essentially creating an anonymous instance of the class). So the syntax</p>\n\n<pre><code>VECTOR{ {Screen(24, 80, ' '), Screen(32, 56, 'r') }}\n</code></pre>\n\n<p>Is initializing a <code>VECTOR</code> with two instances of <code>Screen</code>. It also binds their lifecycle to that of the <code>VECTOR</code> without having to make a copy; they can be <code>move</code>'d safely since their scope is just the constructor call.</p>\n"}], "owner": {"reputation": 3450, "user_id": 4417582, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/124b11df80445d70ea0f070b07e578ef?s=128&d=identicon&r=PG&f=1", "display_name": "abhimanyuaryan", "link": "https://stackoverflow.com/users/4417582/abhimanyuaryan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3550, "favorite_count": 1, "accepted_answer_id": 28727491, "answer_count": 1, "score": 4, "last_activity_date": 1424891040, "creation_date": 1424890499, "last_edit_date": 1424890805, "question_id": 28727302, "link": "https://stackoverflow.com/questions/28727302/how-are-vector-of-class-objects-initialized", "title": "How are vector of class objects initialized", "body": "<p>The code below has a class Screen. With members: position of cursor, width of screen, height of screen and contents of screen. It has another class Window_mgr which list is collection of screens. Each screen has a particular position in the vector. <em>I will mark out the line in code with an arrow so you need not to go through the complete code.</em> </p>\n\n<p>My question is when we list initialise vector(suppose int) we simply do that by:</p>\n\n<p><code>std::vector&lt;int&gt; ivec{1, 2, 3, 4};</code></p>\n\n<p>But in the code below I am initialising vector of object type Screen. What does this means: </p>\n\n<p><code>VECTOR screens = VECTOR{ {Screen(24, 80, ' '), Screen(32, 56, 'r') }};</code></p>\n\n<p>I am talking only about the members inside of list initialisation. i.e. Screen(24, 80, ' ') and Screen(32, 56, 'r'). Do they call the version of constructor for Screen class? How is constructor called without creating object. According to me it should have been: </p>\n\n<p><code>{Screen sr1(24, 80, ' '), Screen sr2(32, 56, 'r')}</code></p>\n\n<p>Or just </p>\n\n<p><code>{(24, 80, ' '), (32, 56, 'r')}</code></p>\n\n<p>I did a search over internet but couldn't get the concept. Thanks</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n\nclass Screen{\npublic:\n    using pos = std::string::size_type; \n\n    Screen() = default; \n    Screen(pos ht, pos wd, char c) : \n        height(ht), width(wd), contents(ht *wd, c)  //in-class initializer\n    {}\n\n    char get() const { return contents[cursor]; }\n    inline char get(pos ht, pos wd) const;\n\n    Screen &amp;set(char);\n    Screen &amp;set(pos, pos, char);\n\n    Screen &amp;move(pos r, pos c); \n\n    void some_member() const; \n\nprivate:\n    pos cursor = 0; \n    pos height = 0, width = 0; \n    std::string contents; \n    mutable size_t access_ctr;\n};\n\n\ninline Screen &amp;Screen::set(char c)\n{\n    contents[cursor] = c; \n    return *this; \n}\n\ninline Screen &amp;Screen::set(pos r, pos c, char ch)\n{\n    contents[r*width + c] = ch; \n    *this; \n}\n\n\nvoid Screen::some_member() const\n{\n    ++access_ctr; \n}\n\ninline Screen &amp;Screen::move(pos r, pos c)\n{\n    pos row = r *width; \n    cursor = row + c; \n    return *this;\n}\n\nchar Screen::get(pos r, pos c) const\n{\n    pos row = r * width;  \n    return contents[row + c];\n}    \n\n//---------------------------------\nclass Window_mgr{\nprivate:\n    using VECTOR = std::vector&lt;Screen&gt; ;\n    // A Window Manager has has one standard sized blank Screen\n    VECTOR screens = VECTOR{ {Screen(24, 80, ' '), Screen(32, 56, 'r') }};  // &lt;-----------------\n\n};\n//---------------------------------\n\nint main()\n{\n    Screen scr{13, 33, 'c'};\n\n    std::cout &lt;&lt; scr.get(3, 1); \n\n    Window_mgr win{}; \n\n\n    return 0; \n}\n</code></pre>\n"}, {"tags": ["c++", "algorithm", "complexity-theory", "analysis"], "comments": [{"owner": {"reputation": 7446, "user_id": 596951, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/8At03.jpg?s=128&g=1", "display_name": "B. Decoster", "link": "https://stackoverflow.com/users/596951/b-decoster"}, "edited": false, "score": 1, "creation_date": 1424906794, "post_id": 28727222, "comment_id": 45749475, "body": "I don&#39;t get why you were down voted. You offer your own insight... I don&#39;t get this website anymore"}, {"owner": {"reputation": 13, "user_id": 3707465, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063952380288145/picture?type=large", "display_name": "Abdullah H. Abdala&#39;al", "link": "https://stackoverflow.com/users/3707465/abdullah-h-abdalaal"}, "reply_to_user": {"reputation": 7446, "user_id": 596951, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/8At03.jpg?s=128&g=1", "display_name": "B. Decoster", "link": "https://stackoverflow.com/users/596951/b-decoster"}, "edited": false, "score": 0, "creation_date": 1424911953, "post_id": 28727222, "comment_id": 45751055, "body": "I don&#39;t know, but you are a good man cause you noticed that :)"}, {"owner": {"reputation": 1212, "user_id": 1587755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bfa53480be2aca93ac528eda21a7d3?s=128&d=identicon&r=PG", "display_name": "Taekahn", "link": "https://stackoverflow.com/users/1587755/taekahn"}, "edited": false, "score": 0, "creation_date": 1425745762, "post_id": 28727222, "comment_id": 46091892, "body": "Looks O(n * m) to me. Are you sure he said n*n? I would expect a professor to call that n^2."}], "answers": [{"comments": [{"owner": {"reputation": 1212, "user_id": 1587755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bfa53480be2aca93ac528eda21a7d3?s=128&d=identicon&r=PG", "display_name": "Taekahn", "link": "https://stackoverflow.com/users/1587755/taekahn"}, "edited": false, "score": 0, "creation_date": 1425745991, "post_id": 28727941, "comment_id": 46091959, "body": "Wouldn&#39;t your worst case be that the two strings (x and y) are equal up to length L? Not that the first characters are?"}, {"owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "reply_to_user": {"reputation": 1212, "user_id": 1587755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bfa53480be2aca93ac528eda21a7d3?s=128&d=identicon&r=PG", "display_name": "Taekahn", "link": "https://stackoverflow.com/users/1587755/taekahn"}, "edited": false, "score": 0, "creation_date": 1425808659, "post_id": 28727941, "comment_id": 46106707, "body": "@Taekahn Yes, that&#39;s what I meant by &quot;they have <code>l</code> equal first characters&quot;, meaning &quot;their first <code>l</code> characters are equal&quot;."}, {"owner": {"reputation": 1212, "user_id": 1587755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bfa53480be2aca93ac528eda21a7d3?s=128&d=identicon&r=PG", "display_name": "Taekahn", "link": "https://stackoverflow.com/users/1587755/taekahn"}, "edited": false, "score": 0, "creation_date": 1425832129, "post_id": 28727941, "comment_id": 46113483, "body": "sorry, that looks like a 1, not an L. :)"}], "owner": {"reputation": 30659, "user_id": 1210053, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/8cee821e7bf4acaa7f0de12d603b9f1d?s=128&d=identicon&r=PG", "display_name": "Nico Schertler", "link": "https://stackoverflow.com/users/1210053/nico-schertler"}, "is_accepted": true, "score": 2, "last_activity_date": 1424892649, "creation_date": 1424892649, "answer_id": 28727941, "question_id": 28727222, "link": "https://stackoverflow.com/questions/28727222/what-is-the-run-time-complexity-of-this-code/28727941#28727941", "title": "What is the run-time complexity of this Code?", "body": "<p>The runtime of <code>main()</code> is composed of the runtime of some constant-time statements and the runtime of the <code>i</code>-loop:</p>\n\n<pre><code>T_main(n, l) \u2208 O(1) + T_fori(n, l)\n</code></pre>\n\n<p>The <code>i</code>-loop runs exactly <code>(n - 1)</code> times and is composed of some constant-time statements and the runtime of the <code>j</code>-loop:</p>\n\n<pre><code>T_fori(n, l) \u2208 (n - 1) * (O(1) + T_forj(n, l))\n</code></pre>\n\n<p>The runtime of the j-loop depends on the data. In the best case, the first character of <code>x</code> and <code>y</code> are different, thus:</p>\n\n<pre><code>T_forj_best(n, l) \u2208 1 * O(1)\n</code></pre>\n\n<p>In the worst case, <code>x</code> and <code>y</code> have <code>l</code> equal first characters, thus:</p>\n\n<pre><code>T_forj_worst(n, l) \u2208 l * O(1) = O(l)\n</code></pre>\n\n<p>This yields:</p>\n\n<pre><code>T_fori_best(n, l)  \u2208 (n - 1) * (O(1) + O(1)) = O(n)\nT_fori_worst(n, l) \u2208 (n - 1) * (O(1) + O(l)) = O(n * l)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>T_main_best(n, l)  \u2208 O(1) + O(n)     = O(n)\nT_main_worst(n, l) \u2208 O(1) + O(n * l) = O(n * l)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3707465, "user_type": "registered", "profile_image": "https://graph.facebook.com/1063952380288145/picture?type=large", "display_name": "Abdullah H. Abdala&#39;al", "link": "https://stackoverflow.com/users/3707465/abdullah-h-abdalaal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 1, "accepted_answer_id": 28727941, "answer_count": 1, "score": 0, "last_activity_date": 1424895607, "creation_date": 1424890210, "last_edit_date": 1424895607, "question_id": 28727222, "link": "https://stackoverflow.com/questions/28727222/what-is-the-run-time-complexity-of-this-code", "title": "What is the run-time complexity of this Code?", "body": "<p>What is the run-time complexity of this Code?</p>\n\n<pre><code>#include &lt;cstdio&gt;\n#include &lt;cstring&gt;\nint main()\n{\n    int n, i, l, j, c, ans = 25;\n    scanf(\"%d\", &amp;n);\n    char x[21], y[21];\n    scanf(\"%s\", &amp;x);\n    l = strlen(x);\n    for(i=1; i&lt;n; i++)\n    {\n        scanf(\"%s\", &amp;y);\n        c = 0;\n        for(j=0 ;j&lt;l; j++)\n            if(x[j] == y[j])\n                c++;\n            else\n                break;\n        strcpy(x, y);\n        if(ans &gt; c)\n            ans = c;\n    }\n    printf(\"%d\", ans);\n    return 0;\n}\n</code></pre>\n\n<p>My lecturer tells me that the complexity of this code is <code>O(n*n)</code> but I'm not convince with this answer cause the inner loop runs string length times.</p>\n"}, {"tags": ["c++", "templates", "compiler-errors"], "comments": [{"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1424890565, "post_id": 28727221, "comment_id": 45740946, "body": "You constructor should be <code>templateex()</code> and in template.cpp it should be <code>templateex::templateex()</code>"}, {"owner": {"reputation": 219, "user_id": 4148055, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d7834f767eebd3f5fe1e975559d3e739?s=128&d=identicon&r=PG&f=1", "display_name": "hue manny", "link": "https://stackoverflow.com/users/4148055/hue-manny"}, "reply_to_user": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1424890822, "post_id": 28727221, "comment_id": 45741092, "body": "thats how it was i just fixed it. for some reason spell check put it to temple. I am still getting the error"}, {"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1424890846, "post_id": 28727221, "comment_id": 45741108, "body": "Also, why are you <code>#include</code>-ing template.cpp in template.h?  And in your main.cpp you need to declare <code>templateex&lt;int&gt; example;</code>  You seem to lack fundamental understanding of templated classes, so I would recommend reading this: <a href=\"http://www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part\" rel=\"nofollow noreferrer\">codeproject.com/Articles/257589/&hellip;</a>"}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1424890869, "post_id": 28727221, "comment_id": 45741114, "body": "Including a cpp file is bound to be a problem at some point.  You should use a different extension if you insist on implementing it in a different file."}, {"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1424890956, "post_id": 28727221, "comment_id": 45741164, "body": "Your class is named <code>templateex</code>.  If the code you posted is inaccurate, please edit."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1424891307, "post_id": 28727221, "comment_id": 45741370, "body": "What the heck is <code>templateex &lt;class T&gt;</code>?"}, {"owner": {"reputation": 219, "user_id": 4148055, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d7834f767eebd3f5fe1e975559d3e739?s=128&d=identicon&r=PG&f=1", "display_name": "hue manny", "link": "https://stackoverflow.com/users/4148055/hue-manny"}, "edited": false, "score": 0, "creation_date": 1424891599, "post_id": 28727221, "comment_id": 45741560, "body": "i fixed the class but still have an error"}, {"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1424891920, "post_id": 28727221, "comment_id": 45741752, "body": "Why are you <code>#include</code>-ing templateex.cpp in your header file?"}, {"owner": {"reputation": 219, "user_id": 4148055, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d7834f767eebd3f5fe1e975559d3e739?s=128&d=identicon&r=PG&f=1", "display_name": "hue manny", "link": "https://stackoverflow.com/users/4148055/hue-manny"}, "edited": false, "score": 0, "creation_date": 1424892145, "post_id": 28727221, "comment_id": 45741869, "body": "I thought that would bring the function from the cpp file to the header"}, {"owner": {"reputation": 434, "user_id": 3703709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e7935f2798b555f61085fd5827c9095?s=128&d=identicon&r=PG&f=1", "display_name": "mstbaum", "link": "https://stackoverflow.com/users/3703709/mstbaum"}, "edited": false, "score": 0, "creation_date": 1424892465, "post_id": 28727221, "comment_id": 45742021, "body": "nope. You need to include the header in the .cpp.  That&#39;s what &quot;brings them together&quot;"}], "answers": [{"owner": {"user_type": "does_not_exist", "display_name": "user1252446"}, "is_accepted": false, "score": 0, "last_activity_date": 1424894297, "creation_date": 1424894297, "answer_id": 28728445, "question_id": 28727221, "link": "https://stackoverflow.com/questions/28727221/does-not-name-type-error-when-trying-to-make-class-template/28728445#28728445", "title": "does not name type error when trying to make class template", "body": "<p>Templateex.h</p>\n\n<pre><code>#ifndef MY_TEMPLATEEX_H\n#define MY_TEMPLATEEX_H\n\ntemplate &lt;class T&gt;\nclass Templateex\n{\npublic:\n    Templateex();\n\nprivate:\n    int noValidEntries_;\n};\n\n#include \"Templateex.inl\"\n#endif\n</code></pre>\n\n<p>Templateex.inl</p>\n\n<pre><code>#ifndef MY_TEMPLATEEX_INL\n#define MY_TEMPLATEEX_INL\n\n#include&lt;iostream&gt;\n\ntemplate &lt;class T&gt;\nTemplateex&lt;T&gt;::Templateex()\n{\n    std::cout &lt;&lt; \"Constructor Executing\" &lt;&lt; std::endl;\n    noValidEntries_ = 0;\n}\n\n#endif\n</code></pre>\n\n<p>main.cpp</p>\n\n<pre><code>#include \"Templateex.h\"\n\nint main()\n{\n    Templateex&lt;int&gt; example;\n}\n</code></pre>\n\n<ol>\n<li><p>compilers need to see templates' definition when they are instantiated, essentially require a template be contained in one header file. However, It is a good style to separate a template class definition from its declaration, especially for complex definitions. Hence the \"#include Templateex.inl\".</p></li>\n<li><p>usually a template definition file (essentially a header file) should not use the \"cpp\" extension, because many tools (e.g. GNU make) by default assume \"*.cpp\" files are source files, *.inl is a good name for this purpose.</p></li>\n<li><p>use #ifndef #define ... #endif to guard against multiple inclusions.</p></li>\n<li><p>do not \"using namespace std\" in header files, always use fully qualified names. What the \"using..\" does is to make all names in \"namespace std\" available. Since a header file may be included in many different compilation unit, export names in a namespace in a header file pollute other namespaces.  use of \"using namespace ... \" should be confined in a single compilation unit, i.e. in source file only. </p></li>\n<li><p>you didn't declare variable \"noValidEntries\"...</p></li>\n</ol>\n"}], "owner": {"reputation": 219, "user_id": 4148055, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/d7834f767eebd3f5fe1e975559d3e739?s=128&d=identicon&r=PG&f=1", "display_name": "hue manny", "link": "https://stackoverflow.com/users/4148055/hue-manny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1393, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1424894297, "creation_date": 1424890209, "last_edit_date": 1424891538, "question_id": 28727221, "link": "https://stackoverflow.com/questions/28727221/does-not-name-type-error-when-trying-to-make-class-template", "title": "does not name type error when trying to make class template", "body": "<p>I am getting this error >> does not name type error <code>does not name type</code>when I try to run make for the files. I tried looking everywhere but can't find how to fix it. Please help!</p>\n\n<p><strong>templateex.cpp</strong></p>\n\n<pre><code>#include &lt;stddef.h&gt;\n#include &lt;assert.h&gt;\n\ntemplate&lt;class T&gt;\ntemplateex&lt;T&gt;::templateex()\n{\n    cout&lt;&lt;\"Constructor Executing\"&lt;&lt;endl;\n\n    noValidEntries=0;\n}\n</code></pre>\n\n<p><strong>templateex.h</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n#define SIZE 20\n\ntemplate &lt;class T&gt; class templateex\n{\npublic:\n   templateex();                     // default constructor\n\n};\n#include \"templateex.cpp\"\n</code></pre>\n\n<p><strong>Main.cpp</strong></p>\n\n<pre><code>#include \"templateex.h\"   \nint main()\n{ \ntemplateex&lt;int&gt;example;\n} \n</code></pre>\n\n<p><strong>ERROR</strong></p>\n\n<pre><code>templateex.cpp:5:1: error: 'templateex' does not name a type\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 1, "creation_date": 1424889880, "post_id": 28727117, "comment_id": 45740605, "body": "<code>void ShuntingYard::InputString()</code>"}, {"owner": {"reputation": 2820, "user_id": 2562283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef4e835ba48416df3d5607ae1a89bbf?s=128&d=identicon&r=PG", "display_name": "E. Moffat", "link": "https://stackoverflow.com/users/2562283/e-moffat"}, "edited": false, "score": 1, "creation_date": 1424889890, "post_id": 28727117, "comment_id": 45740611, "body": "Change it to <code>void ShuntingYard::InputString() { ...</code> - the linker can&#39;t find the class member because you have a global function InputString instead of a class member function InputString."}, {"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 1, "creation_date": 1424889927, "post_id": 28727117, "comment_id": 45740629, "body": "<code>inString</code> is a member of class <code>ShuntingYard</code>. <code>InputString()</code> is not, and so it has no visibility to <code>ShuntingYard::inString()</code>."}, {"owner": {"reputation": 894, "user_id": 2467270, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6e17d7890dc4410cd04ca6bb49d282f2?s=128&d=identicon&r=PG&f=1", "display_name": "secondubly", "link": "https://stackoverflow.com/users/2467270/secondubly"}, "edited": false, "score": 0, "creation_date": 1424890009, "post_id": 28727117, "comment_id": 45740659, "body": "Thanks guys, appreciate it!"}], "answers": [{"owner": {"reputation": 777, "user_id": 3900056, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/45ff0756018a3a41955b5d29e3ab63fb?s=128&d=identicon&r=PG&f=1", "display_name": "zcleghern", "link": "https://stackoverflow.com/users/3900056/zcleghern"}, "is_accepted": false, "score": 1, "last_activity_date": 1424890072, "creation_date": 1424890072, "answer_id": 28727185, "question_id": 28727117, "link": "https://stackoverflow.com/questions/28727117/instring-not-declared-in-this-scope/28727185#28727185", "title": "&quot;inString not declared in this scope&quot;", "body": "<p>Try adding the class name as well as the :: operator before the function's implementation:</p>\n\n<pre><code>void ShuntingYard::InputString() {\n</code></pre>\n\n<p>This tells the compiler that you are implementing a function called InputString() of the class ShuntingYard.  Otherwise it thinks you are trying to declare a separate function that is separate from ShuntingYard, and thus does not know about its private variables.</p>\n"}, {"owner": {"reputation": 775, "user_id": 3956609, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Tm6Ru.jpg?s=128&g=1", "display_name": "Shivaraj Bhat", "link": "https://stackoverflow.com/users/3956609/shivaraj-bhat"}, "is_accepted": true, "score": 1, "last_activity_date": 1424890530, "creation_date": 1424890530, "answer_id": 28727312, "question_id": 28727117, "link": "https://stackoverflow.com/questions/28727117/instring-not-declared-in-this-scope/28727312#28727312", "title": "&quot;inString not declared in this scope&quot;", "body": "<p>when you do -  </p>\n\n<pre><code>void InputString() {\n    std::cout &lt;&lt; \"Please enter an expression: \";\n    std::cin &gt;&gt; inString;\n}\n</code></pre>\n\n<p>It is only a bare function and it is not a member of the <code>class ShuntingYard</code>.\nHence it is not recognizing <code>\"instring\"</code></p>\n\n<p>So make InputString as a member of the class and then define it like below- </p>\n\n<pre><code>void ShuntingYard::InputString() {\n    std::cout &lt;&lt; \"Please enter an expression: \";\n    std::cin &gt;&gt; inString;\n}\n</code></pre>\n\n<p>NOTE: Always write <code>#endif //SHUTTINGYARD_H</code> at the end of the file. It makes your code more standard.</p>\n"}], "owner": {"reputation": 894, "user_id": 2467270, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/6e17d7890dc4410cd04ca6bb49d282f2?s=128&d=identicon&r=PG&f=1", "display_name": "secondubly", "link": "https://stackoverflow.com/users/2467270/secondubly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "closed_date": 1424919566, "accepted_answer_id": 28727312, "answer_count": 2, "score": 0, "last_activity_date": 1424890530, "creation_date": 1424889804, "question_id": 28727117, "link": "https://stackoverflow.com/questions/28727117/instring-not-declared-in-this-scope", "closed_reason": "Not suitable for this site", "title": "&quot;inString not declared in this scope&quot;", "body": "<p>Working on an implementation of the Shunting Yard algorithm and I keep getting this error (In function 'void InputString()': 'inString was not declared in this scope') when trying to compile (what little) code I have - not entirely sure what could be causing it.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;stack&gt;\n\n#ifndef SHUNTINGYARD_H\n#define SHUNTINGYARD_H\nclass ShuntingYard {\n    public:\n        void InputString();\n        void OutputString();\n        int precedence(char A, char B);\n        void ShuntingAlgorithm();\n    private:\n        std::string inString;\n        std::string outString;\n        std::stack&lt;char&gt; operatorStack;\n        std::stack&lt;char&gt; tokenStack;\n};\n\n#endif // SHUNTINGYARD_H\n\nvoid InputString() {\n    std::cout &lt;&lt; \"Please enter an expression: \";\n    std::cin &gt;&gt; inString;\n}\n</code></pre>\n\n<p>I'm sure I'll feel really dumb when I find/someone explains the solution, but I can't figure it out at the moment.</p>\n"}, {"tags": ["c++", "arrays", "pointers"], "comments": [{"owner": {"reputation": 8326, "user_id": 53089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/525dac0c4812e8e8753935590b40ddb6?s=128&d=identicon&r=PG", "display_name": "Rob K", "link": "https://stackoverflow.com/users/53089/rob-k"}, "edited": false, "score": 1, "creation_date": 1424890140, "post_id": 28727090, "comment_id": 45740725, "body": "You&#39;re only created 2 dimensions, so why are you using indexing for 3 dimensions? <code>yellow[0][1] = 0;</code> should work."}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 1296596, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1a4abf34999613ffe7e4cf601f99be5?s=128&d=identicon&r=PG", "display_name": "someGuy", "link": "https://stackoverflow.com/users/1296596/someguy"}, "edited": false, "score": 0, "creation_date": 1424890541, "post_id": 28727198, "comment_id": 45740934, "body": "Thanks- I have tried what you have stated, and now it caused another questions. I have updated the post."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 77, "user_id": 1296596, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1a4abf34999613ffe7e4cf601f99be5?s=128&d=identicon&r=PG", "display_name": "someGuy", "link": "https://stackoverflow.com/users/1296596/someguy"}, "edited": false, "score": 0, "creation_date": 1424890689, "post_id": 28727198, "comment_id": 45741020, "body": "@someGuy, What you have added is syntactically correct but it will create problems at run time since you are accessing the arrays out of bounds. Accessing arrays out of bounds is undefined behavior. It might seem to work but it will fail at the most inopportune moment."}], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 1, "last_activity_date": 1424890114, "creation_date": 1424890114, "answer_id": 28727198, "question_id": 28727090, "link": "https://stackoverflow.com/questions/28727090/c-pointing-a-pointer-to-an-array-and-accessing/28727198#28727198", "title": "C++ pointing a pointer to an array and accessing?", "body": "<p>To access the first element of the first array, use</p>\n\n<pre><code>yellow[0][0] = 0;\n</code></pre>\n\n<p>or</p>\n\n<pre><code> (*yellow)[0] = 0;\n</code></pre>\n\n<p>To access the third element of the second array, use</p>\n\n<pre><code>yellow[1][2] = 0;\n</code></pre>\n\n<p>or</p>\n\n<pre><code> (*(yellow+1))[2] = 0;\n</code></pre>\n\n<p>To generalize the idea... To access the N-th element of the M-th array, use</p>\n\n<pre><code>yellow[M-1][N-1] = 0;\n</code></pre>\n\n<p>or</p>\n\n<pre><code> (*(yellow+M-1))[N-1] = 0;\n</code></pre>\n"}, {"owner": {"reputation": 81, "user_id": 4455974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uqBKD.jpg?s=128&g=1", "display_name": "Robert Blatner", "link": "https://stackoverflow.com/users/4455974/robert-blatner"}, "is_accepted": false, "score": 0, "last_activity_date": 1424892932, "creation_date": 1424892932, "answer_id": 28728023, "question_id": 28727090, "link": "https://stackoverflow.com/questions/28727090/c-pointing-a-pointer-to-an-array-and-accessing/28728023#28728023", "title": "C++ pointing a pointer to an array and accessing?", "body": "<p>Actually, by assigning to yellow[0][20] you are invoking <a href=\"http://en.wikipedia.org/wiki/Undefined_behavior\" rel=\"nofollow\">undefined behavior</a>. In other words, your program isn't always gauranteed to print 0, the value stored at yellow[0][20].</p>\n"}], "owner": {"reputation": 77, "user_id": 1296596, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f1a4abf34999613ffe7e4cf601f99be5?s=128&d=identicon&r=PG", "display_name": "someGuy", "link": "https://stackoverflow.com/users/1296596/someguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 28727198, "answer_count": 2, "score": 0, "last_activity_date": 1424892932, "creation_date": 1424889742, "last_edit_date": 1424890502, "question_id": 28727090, "link": "https://stackoverflow.com/questions/28727090/c-pointing-a-pointer-to-an-array-and-accessing", "title": "C++ pointing a pointer to an array and accessing?", "body": "<p>how do I access the value of a pointer to an array first element.\nI have attempted below but code won't build.</p>\n\n<pre><code>int _tmain(int argc, _TCHAR* argv[])\n{\n\n\n/// pointers array\n\n  mint *yellow [5];\n\n\n\n/// each pointers array point to an an array of 10 elements\nfor (int i = 0; i &lt; 5; i++)\n{\n    yellow[i] = new int [10] ;\n}\n\n/// assigning to pointer 1, array 1, element 1 the value of 0;\n///\n*yellow[0][1][0] = 0;\n\n\nstd::cout &lt;&lt; *yellow[0][1][0];\n\n\nsystem(\"pause\");\nreturn 0;\n}\n</code></pre>\n\n<p>Update-</p>\n\n<p>although that I don't have an element 20 but I am still able to assign and print the element 20 </p>\n\n<pre><code>  int _tmain(int argc, _TCHAR* argv[])\n  {\n\n\n/// pointers array\n\nint *yellow [5];\n\n\n\n/// each pointers array to an an array of 10 elements\nfor (int i = 0; i &lt; 5; i++)\n{\n    yellow[i] = new int [10] ;\n}\n\n/// assigning to pointer 1, array 1, element 1 the value of 0;\n///\nyellow[0][20] = 0;\n\n\nstd::cout &lt;&lt; yellow[0][20];\n\n\nsystem(\"pause\");\nreturn 0;\n</code></pre>\n"}, {"tags": ["c++", "c", "compilation", "token", "c-preprocessor"], "answers": [{"comments": [{"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424894166, "post_id": 28727447, "comment_id": 45743076, "body": "What would be an example of an invalid <code>pp-number</code>?"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424903740, "post_id": 28727447, "comment_id": 45748131, "body": "@fredoverflow: Some examples: 3q, 3.14159U, 019, 0y21, and my alltime favorite 0x7E+2 (which, unlike 0x7F+1, is a single token)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424918831, "post_id": 28727447, "comment_id": 45752708, "body": "@FredOverflow: Another pp-number which cannot be assigned a value in translation phase 7 (as the standard says) is <code>192.168.0.1</code>. That is, however, a single preprocessor token (which makes a difference if you need to use the <code>##</code> operator with it.)"}, {"owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424940160, "post_id": 28727447, "comment_id": 45759561, "body": "Indeed, the C++ standard says <code>The program fragment 1Ex is parsed as a preprocessing number token (one that is not a valid floating or integer literal token)</code>... so what happens to such a preprocessor token later on? Does it result in a compiler error, because it cannot be converted into a token? Then what exactly is the point of having preprocessor number tokens be a strict superset of the number tokens?"}, {"owner": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "reply_to_user": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424950762, "post_id": 28727447, "comment_id": 45766097, "body": "@FredOverflow: Either a preprocessing token is a valid token after preprocessing or the program is invalid (can&#39;t find if it&#39;s simply undefined or if a diagnostic is required atm), they&#39;re neither split into several tokens (<code>0x7E+2</code> is invalid, not re-parsed as <code>0x7E + 2</code>)  nor concatenated (given <code>#define MINUS -</code>, <code>MINUS-x</code> are two unary minus operators, not pre-decrement)."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "edited": false, "score": 0, "creation_date": 1424978727, "post_id": 28727447, "comment_id": 45783974, "body": "@FredOverflow: Stringize (#) will work on any sequence of tokens (although commas and parentheses are difficult to insert into macro arguments :-) ), but concatenate (##) insists on single tokens. See <a href=\"http://ideone.com/b4caYK\" rel=\"nofollow noreferrer\">ideone.com/b4caYK</a>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 5064, "user_id": 1741125, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/263d60d37f25bf7f29b3552785fb3efb?s=128&d=identicon&r=PG", "display_name": "mafso", "link": "https://stackoverflow.com/users/1741125/mafso"}, "edited": false, "score": 2, "creation_date": 1424979669, "post_id": 28727447, "comment_id": 45784534, "body": "@mafso: It&#39;s a constraint violation (6.4/2 &quot;Each preprocessing token that is converted to a token shall have the lexical form of a keyword, an identifier, a constant, a string literal, or a punctuator.&quot;) so a diagnostic is required (5.1.1.3). It&#39;s possible that a pp token never gets converted to a token, though. It might be stringized or ignored (<code>#define IGNORE(x)</code> / <code>IGNORE($=&gt;)</code> )"}], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": true, "score": 5, "last_activity_date": 1424890906, "creation_date": 1424890906, "answer_id": 28727447, "question_id": 28727000, "link": "https://stackoverflow.com/questions/28727000/why-does-the-preprocessor-distinguish-between-number-and-character-tokens/28727447#28727447", "title": "Why does the preprocessor distinguish between number and character tokens?", "body": "<p>The names of the non-terminals in the C grammars are not normative; they simply exist for purpose of description. It is only important that the behaviour be correctly described. The grammar itself is not sufficient to describe the language; it needs to be read along with the text, which imposes further restrictions on well-formed programs.</p>\n\n<p>There is not a one-to-one relationship between preprocessor tokens and program tokens. There is overlap: a preprocessor <code>identifier</code> might be a keywords or it might be one of the various definable symbol types (including some constants and <code>typedef-names</code>). A <code>pp-number</code> might be an integer or floating constant, but it might also be invalid. The lexical productions are not all mutually exclusive, and the actual application of lexical category to a substring of the program requires procedures described in the standard text, and not in the formal grammar.</p>\n\n<p>Character constants pass directly from the preprocessor into the program syntax without modification (although they are then subsumed into the <code>constant</code> category). If there is a single comment about preprocessor numbers (such as the fact that they must be convertible into a real numeric constant literal if they survive the preprocessor) is a sufficient reason to have the category.</p>\n\n<p>Also, what would it add to include <code>character-constant</code> in the definition of <code>pp-number</code>? You still need both productions in order to describe the language.</p>\n"}], "owner": {"reputation": 235985, "user_id": 252000, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/082b8ee2b0aebb430b8d4d98e6a5c32f?s=128&d=identicon&r=PG", "display_name": "fredoverflow", "link": "https://stackoverflow.com/users/252000/fredoverflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 195, "favorite_count": 2, "accepted_answer_id": 28727447, "answer_count": 1, "score": 9, "last_activity_date": 1424890906, "creation_date": 1424889495, "question_id": 28727000, "link": "https://stackoverflow.com/questions/28727000/why-does-the-preprocessor-distinguish-between-number-and-character-tokens", "title": "Why does the preprocessor distinguish between number and character tokens?", "body": "<p>According to the language specification, the lexical elements are defined like this:</p>\n\n<pre><code>token:\n    keyword\n    identifier\n\n    constant\n\n    string-literal\n    operator\n    punctuator\n\npreprocessing-token:\n    header-name\n    identifier\n\n    pp-number\n    character-constant\n\n    string-literal\n    operator\n    punctuator\n\n    each non-white-space character that cannot be one of the above\n</code></pre>\n\n<p>Why is there a distinction between a number and a character on the preprocessing token level, whereas on the token level, there are only constants? I don't see the benefit in this distinction.</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "recursion", "radix"], "comments": [{"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1424903156, "post_id": 28726933, "comment_id": 45747843, "body": "You could save yourself several lines of typing if you replace the allocation (<code>int buckets = new int[...];</code>), the initialization loop that follows and the eventual <code>delete[] buckets;</code> if you used a <code>std::vector&lt;int&gt; buckets(...);</code>. In addition, it would make your code exception-safe and you would get optional checks against out-of-bounds index operations. I don&#39;t remember ever using array new in C++, a regular vector a better choice."}], "answers": [{"comments": [{"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1424889885, "post_id": 28727084, "comment_id": 45740606, "body": "I have the least significant version working and like you said it&#39;s just a for loop, but I would like to run some experiments on the most significant version, (which to my understanding requires recursion), in order to get a feeling of the cache performance. I think that the most significant digit radix sort will out perform the least significant radix sort but I would like to run some experiments in order to see if I am right or wrong. After getting the LSD version up and running, the MSD version has given me a very big head ache... I am not very good with bit shifts unfortunately."}, {"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1424890461, "post_id": 28727084, "comment_id": 45740888, "body": "But concatenation will happen automatically right? It&#39;s like with merge sort, you sort the sub problems, but each sub problem will be part of your input array. My LSD version is not optimized, but I would like to get the MSD version up and running to see the cache behaviour. Plus, what if you combine MSD and LSD together? Like, run MSD for 1-2 passes and then for the rest of the digits LSD? I imagine that this approach would be more efficient in practice due to the way you would access memory."}, {"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1424890754, "post_id": 28727084, "comment_id": 45741056, "body": "I agree that a lot of interesting optimizations can be done, but the problem is that I can not get even a simple version working properly :("}, {"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1424892089, "post_id": 28727084, "comment_id": 45741838, "body": "about the indexes, it was a mistake, it must be &quot;buckets&quot;. I updated my code, had a problem with reformatting, sorry."}, {"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1424900411, "post_id": 28727084, "comment_id": 45746554, "body": "could you explain why we need the assumption &quot;Assumes array type number of bits is an exact multiple of numberOfBits&quot;?"}, {"owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1424904625, "post_id": 28727084, "comment_id": 45748563, "body": "Thanks a lot for your help, I appreciate it. I added the extra if statement and it works like a charm for all the shifts.  It seems like this bucket array actually causes a lot of trouble........ unfortunately I do not think we can optimize it any further to avoid creating all these bucket copies every time we go down into our recursion levels."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "reply_to_user": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "edited": false, "score": 0, "creation_date": 1424920693, "post_id": 28727084, "comment_id": 45753133, "body": "I updated the example to eliminate the copies, but that&#39;s not the issue. I explain the issue using a card sorter analogy in the answer above."}], "owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 1, "last_activity_date": 1425008232, "last_edit_date": 1425008232, "creation_date": 1424889728, "answer_id": 28727084, "question_id": 28726933, "link": "https://stackoverflow.com/questions/28726933/cant-get-the-radix-sort-algorithm-to-work-in-c/28727084#28727084", "title": "Can&#39;t get the radix sort algorithm to work in C++", "body": "<p>Another update, converted to template for array type. Tmp array is now passed as a parameter. The copy steps were eliminated and a helper function added to return the buffer that the sorted data ends up in. Tested with 4 million 64 bit unsigned integers, it works but it's slow. Fastest time achieved with numberOfBits = 4. numberOfBits no longer has to exactly divide the number of bits per element.</p>\n\n<p>To explain why MSD first is slow I'll use a card sorter analogy. Imagine you have 1,000 cards, each with 3 digits, 000 to 999, in random order. Normally you run through the sorter with the 3rd digit, ending up with 100 cards in each of the bins, bin 0 holds the cards with a \"0\", ... bin 9 holds the cards with a \"9\". You then concatenate the cards from bin 0 to bin 9, and run them through the sorter again using the 2nd digit, and again using the 1st digit, resulting in a sorted set of cards. That's 3 runs with 1000 cards on each run, so a total of 3000 cards went through the sorter.</p>\n\n<p>Now start with the randomly ordered cards again, and sort by the 1st digit. You can't concatenate the the sets, because cards with higher 1st digits but lower 2nd digits end up out of order. So now you have to do 10 runs with 100 cards each. This results in 100 sets of 10 cards each, which you run again through the sorter, resulting in 1000 sets of 1 card each, and the cards are now sorted. So the number of cards run through the sorter is still 3,000, same as above, but you had to do 111 runs (1 with 1000 card set, 10 with 100 card sets, 100 with 10 card sets).</p>\n\n<pre><code>template &lt;typename T&gt;\nvoid RadixSortMSD(size_t start, size_t end, \n          size_t numberOfBits, size_t currentBit, T input[], T tmp[])\n{\n    if((end - start) &lt; 1)\n        return;\n\n    // adjust numberOfBits if currentBit close to end element\n    if((currentBit + numberOfBits) &gt; (8*sizeof(T)))\n        numberOfBits = (8*sizeof(T)) - currentBit;\n\n    // set numberOfBuckets\n    size_t numberOfBuckets = 1 &lt;&lt; numberOfBits;\n    size_t bitMask = numberOfBuckets - 1;\n    size_t shift = (8*sizeof(T)) - currentBit - numberOfBits;\n\n    // create bucket info\n    size_t *buckets = new size_t[numberOfBuckets+1];\n    for(size_t p = 0; p &lt; numberOfBuckets+1; p++)\n        buckets[p] = 0;\n    for(size_t p = start; p &lt; end; p++)\n        buckets[(input[p] &gt;&gt; shift) &amp; bitMask]++;\n    size_t m = start;\n    for(size_t p = 0; p &lt; numberOfBuckets+1; p++){\n        size_t n = buckets[p];\n        buckets[p] = m;\n        m += n;\n    }\n\n    //sort the input array input and store it in array tmp   \n    for (size_t p = start; p &lt; end; p++){ \n        tmp[buckets[(input[p] &gt;&gt; shift) &amp; bitMask]++] = input[p];\n    }\n\n    // restore bucket info\n    for(size_t p = numberOfBuckets; p &gt; 0; p--)\n        buckets[p] = buckets[p-1];\n    buckets[0] = start;\n\n    // advance current bit\n    currentBit += numberOfBits;\n    if(currentBit &lt; (8*sizeof(T))){\n        //recurse on all the groups that have been created\n        for(size_t p=0; p &lt; numberOfBuckets; p++){\n            RadixSortMSD(buckets[p], buckets[p+1],\n                numberOfBits, currentBit, tmp, input);\n        }\n    }\n\n    //free buckets\n    delete[] buckets;\n    return;\n}\n\ntemplate &lt;typename T&gt;\nT * RadixSort(T *pData, T *pTmp, size_t n)\n{\nsize_t numberOfBits = 4;\n    RadixSortMSD(0, n, numberOfBits, 0, pData, pTmp);\n    // return the pointer to the sorted data\n    if((((8*sizeof(T))+numberOfBits-1)/numberOfBits)&amp;1)\n        return pTmp;\n    else\n        return pData;\n}\n</code></pre>\n"}], "owner": {"reputation": 1789, "user_id": 4038196, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/071217da03754ce35d099a0e889f95c2?s=128&d=identicon&r=PG&f=1", "display_name": "jsguy", "link": "https://stackoverflow.com/users/4038196/jsguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "accepted_answer_id": 28727084, "answer_count": 1, "score": 0, "last_activity_date": 1425008232, "creation_date": 1424889254, "last_edit_date": 1424892103, "question_id": 28726933, "link": "https://stackoverflow.com/questions/28726933/cant-get-the-radix-sort-algorithm-to-work-in-c", "title": "Can&#39;t get the radix sort algorithm to work in C++", "body": "<p>Given <code>n</code> 32 bit integers (assume that they are positive), you want to sort them by first looking at the most significant <code>shift</code> in total bits and recursively sorting each bucket that is created by the sorted integers on those bits.</p>\n\n<p>So if <code>shift</code> is 2, then you will first look at the two most significant bits in each 32 bit integer and then apply counting sort. Finally, from the groups that you will get, you recurse on each group and start sorting the numbers of each group by looking at the third and the fourth most significant bit. You do this recursively.</p>\n\n<p>My code is following:</p>\n\n<pre><code>void radix_sortMSD(int start, int end, \n          int shift, int currentDigit, int input[])\n{\n\n    if(end &lt;= start+1 || currentDigit&gt;=32) return;\n\n    /*\n     find total amount of buckets\n     which is basically 2^(shift)\n    */\n    long long int numberOfBuckets = (1UL&lt;&lt;shift);\n\n    /*\n     initialize a temporary array \n     that will hold the sorted input array\n     after finding the values of each bucket.   \n    */\n\n    int tmp[end];\n\n   /*\n     Allocate memory for the buckets.\n   */\n   int *buckets = new int[numberOfBuckets + 1];\n\n   /*\n       initialize the buckets,\n        we don't care about what's \n     happening in position numberOfBuckets+1\n   */\n   for(int p=0;p&lt;numberOfBuckets + 1;p++)\n         buckets[p] = 0;\n\n   //update the buckets\n   for (int p = start; p &lt; end; p++)\n      buckets[((input[p] &gt;&gt; (32 - currentDigit - shift)) \n                &amp;   (numberOfBuckets-1)) + 1]++;\n\n   //find the accumulative sum\n   for(int p = 1; p &lt; numberOfBuckets + 1; p++)\n       buckets[p] += buckets[p-1];\n\n   //sort the input array input and store it in array tmp   \n   for (int p = start; p &lt; end; p++){ \n    tmp[buckets[((input[p] &gt;&gt; (32 - currentDigit- shift)) \n            &amp; (numberOfBuckets-1))]++] = input[p];\n    }\n\n   //copy all the elements in array tmp to array input\n   for(int p = start; p &lt; end; p++)\n          input[p] = tmp[p];\n\n   //recurse on all the groups that have been created\n   for(int p=0;p&lt;numberOfBuckets;p++){\n       radix_sortMSD(start+buckets[p], \n       start+buckets[p+1], shift, currentDigit+shift, input);\n    }\n\n    //free the memory of the buckets\n    delete[] buckets;\n}\n\n  int main()\n  {\n\n        int a[] = {1, 3, 2, 1, 4, 8, 4, 3};\n        int n = sizeof(a)/sizeof(int);\n        radix_sortMSD(0,n, 2,0,a);\n        return 0;\n   }\n</code></pre>\n\n<p>I can imagine only two issues in this code.</p>\n\n<p>First issue is whether or not I actually get the correct bits of the integers in every iteration. I made the assumption that if I am in position <code>currentDigit</code> where if <code>currentDigit = 0</code> it means that I am in bit <code>32</code> of my integer, then to get the next <code>shift</code> bits, I do a right shift by <code>32 - currentDigit - shift</code> places and then I apply the AND operation to get the <code>shift</code> least most significant bits, which are exactly the bits that I want.</p>\n\n<p>Second issue is in recursion. I do not think that I recurse on the right groups, but due to the fact that I have no idea whether the first issue is actually resolved correctly, I can not say more things about this at the moment.</p>\n\n<p>any feedback on this would be appreciated.</p>\n\n<p>thank you in advance.</p>\n\n<p>EDIT: added main function to show how my radix function is called.</p>\n"}, {"tags": ["c++", "sockets", "winapi", "network-programming", "overlapped-io"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1424889535, "post_id": 28726893, "comment_id": 45740426, "body": "Because you are supposed to keep track of that yourself.  The pointer you get back is your key.  It is common to derive your own struct from OVERLAPPED to store any additional context."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1424889662, "post_id": 28726893, "comment_id": 45740501, "body": "Its none of <code>GQCS</code>&#39;s business what the operation actually was. That&#39;s up to <b>you</b>. It should be managed as such (as part of your per-IO state, generally via an extension of the OVERLAPPED structure). IOCP programming for actual IO (you can also use them without IO at all) is very-much a state-machine-style of programming, where <b>you</b> manage said-state."}], "answers": [{"owner": {"reputation": 20218, "user_id": 7925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/zFiIO.png?s=128&g=1", "display_name": "Len Holgate", "link": "https://stackoverflow.com/users/7925/len-holgate"}, "is_accepted": false, "score": 1, "last_activity_date": 1424902608, "creation_date": 1424902608, "answer_id": 28730736, "question_id": 28726893, "link": "https://stackoverflow.com/questions/28726893/why-getqueuedcompletionstatus-does-not-return-operation-type/28730736#28730736", "title": "Why GetQueuedCompletionStatus() does not return operation type?", "body": "<p>Why should it care? You can pass user data through the APIs that result in a completion being extracted via <code>GetQueuedCompletionStatus()</code> so why do you need anything else? Since you can post your own completions using <code>PostQueuedCompletionStatus()</code> there's an infinite number of 'operations' that you could complete, so pass it in the 'extended <code>OVERLAPPED</code> structure and you can pass anything...</p>\n\n<p>If you COULD pass your own separate flag then it wouldn't actually remove the need to pass additional extra stuff as an extended <code>OVERLAPPED</code> structure as it's pretty useful to be able to pass the data buffer and other information along with the operation anyway, so one extra flag is unlikely to be worth having... My designs need more than your designs need, so lets just deal with the method that the API designers gave us...</p>\n"}], "owner": {"reputation": 1254, "user_id": 4566312, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f792d4cf0473ff830ff5a857ec41bf83?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4566312/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424902608, "creation_date": 1424889124, "question_id": 28726893, "link": "https://stackoverflow.com/questions/28726893/why-getqueuedcompletionstatus-does-not-return-operation-type", "title": "Why GetQueuedCompletionStatus() does not return operation type?", "body": "<p><code>GetQueuedCompletionStatus()</code> dequeue a completion notification, but it does not return what type of notification it is (e.g. Read notification, write notification).</p>\n\n<p>It is my responsibility to keep track of what operations I initiate, for example when I use <code>WSARecv()</code>, I add a flag to the <code>OVERLAPPED</code> structure that indicate what operation this is (read in this case), and when I dequeue a notification, I read this flag. So does anyone knows why <code>GetQueuedCompletionStatus()</code> does not return the type of operation?</p>\n"}, {"tags": ["c++", "arrays", "multidimensional-array"], "comments": [{"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1424889130, "post_id": 28726859, "comment_id": 45740196, "body": "Within <code>pathdistance</code>, <code>Path</code> is not an array, but you&#39;re using it like one. <code>distance</code> is not a function with two parameters, but you&#39;re using it like one."}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1424889859, "post_id": 28726859, "comment_id": 45740591, "body": "<a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}, {"owner": {"reputation": 7, "user_id": 4601891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/395c42500ca342f63d5d3b026fe4104c?s=128&d=identicon&r=PG&f=1", "display_name": "Serfempo", "link": "https://stackoverflow.com/users/4601891/serfempo"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1424890190, "post_id": 28726859, "comment_id": 45740750, "body": "Thanks @chris, but I don&#39;t get it, is Path not an array of size n ?"}, {"owner": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1424890641, "post_id": 28726859, "comment_id": 45740995, "body": "@Serfempo, It is inside the constructor, where it&#39;s declared as such (although the size must be a compile-time constant). It is not inside <code>pathdistance</code>, where it is declared <code>double Path</code>."}, {"owner": {"reputation": 7, "user_id": 4601891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/395c42500ca342f63d5d3b026fe4104c?s=128&d=identicon&r=PG&f=1", "display_name": "Serfempo", "link": "https://stackoverflow.com/users/4601891/serfempo"}, "reply_to_user": {"reputation": 54818, "user_id": 962089, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/b6SVs.jpg?s=128&g=1", "display_name": "chris", "link": "https://stackoverflow.com/users/962089/chris"}, "edited": false, "score": 0, "creation_date": 1424891631, "post_id": 28726859, "comment_id": 45741588, "body": "It&#39;s working now thanks for the help @chris"}], "answers": [{"owner": {"reputation": 3135, "user_id": 2648754, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/UWGAJ.png?s=128&g=1", "display_name": "a_pradhan", "link": "https://stackoverflow.com/users/2648754/a-pradhan"}, "is_accepted": true, "score": 0, "last_activity_date": 1424890449, "creation_date": 1424890449, "answer_id": 28727287, "question_id": 28726859, "link": "https://stackoverflow.com/questions/28726859/incorrect-arrary-subscripts/28727287#28727287", "title": "Incorrect Arrary subscripts", "body": "<p>Your <code>path</code> declaration is <code>double path</code> which means a <strong>single</strong> value of type double, not an array.</p>\n\n<p>For passing an array, you can pass it as <code>double *path</code> and access the elements via indexing or pass a <code>std::vector&lt;double&gt;</code> (a const reference if your function does not change the vector elements).</p>\n\n<pre><code>double pathDistance(double *Path, unsigned int n) // first one.\n\ndouble pathDistance(const std::vector&lt;double&gt;&amp; Path) // second alternative.\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 4601891, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/395c42500ca342f63d5d3b026fe4104c?s=128&d=identicon&r=PG&f=1", "display_name": "Serfempo", "link": "https://stackoverflow.com/users/4601891/serfempo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 28727287, "answer_count": 1, "score": 0, "last_activity_date": 1424890449, "creation_date": 1424889006, "question_id": 28726859, "link": "https://stackoverflow.com/questions/28726859/incorrect-arrary-subscripts", "title": "Incorrect Arrary subscripts", "body": "<pre><code> #include &lt;iostream&gt;\n using namespace std;\n #include&lt;stdlib.h&gt;\n #include &lt;cstdlib&gt;\n #include &lt;cmath&gt;\n class Base\n {\n   protected:\n     int n;                                               // Allocate the dynamic memory.\n     typedef double Coord[2];\n     Coord* city_location;\n\n     Base(int ncities) : n(ncities), city_location(new Coord[n]) {}\n     ~Base() { delete [] city_location; }\n };\n\n\n\n template &lt;class T&gt; class Map;\n\n struct Flat;\n template &lt;&gt; class Map&lt;Flat&gt; : public Base\n {\n   public:                                                   // Setting up the map in the flat euclidean version.\n\nMap(int n) : Base(n)\n{\n  double Path[n];\n  for (int i=0;i&lt;n;i++)\n  {\n    city_location[i][0] = (static_cast &lt;float&gt; (rand()) / static_cast &lt;float&gt; (RAND_MAX))*80;\n    city_location[i][1] = (static_cast &lt;float&gt; (rand()) / static_cast &lt;float&gt; (RAND_MAX))*80;\n    Path[i] = i;\n    cout &lt;&lt; \"city \" &lt;&lt; i &lt;&lt; \" is at (\" &lt;&lt; city_location[i][0] &lt;&lt; \",\" &lt;&lt; city_location[i][1] &lt;&lt; \")\\n\";\n  }\n\n   cout &lt;&lt; \"\\nThe initial path is (\";\n\n   for(int i=0;i&lt;n;i++)\n   {\n        cout &lt;&lt; Path[i]&lt;&lt; \" \";\n   }\n    cout&lt;&lt; Path[0] &lt;&lt;\")\"&lt;&lt;endl;\n\n//pathdistance(Path, n, distance());\n\n}\n\ndouble distance(int i, int j) const\n{\n  double dx = city_location[i][0] - city_location[j][0];\n  double dy = city_location[i][1] - city_location[j][1];\n  return sqrt(dx*dx+dy*dy);\n}\n</code></pre>\n\n<p>Everything works fine up until this point but I have no idea how to pass the distance function/ city_location to the total distance function. Which calculates points pairwise in the order defined by Path[n].</p>\n\n<pre><code>    double pathdistance(double Path,int n, double distance())     // Problem lies here, have tried with city_location and *city_location etc but can't figure it out.\n{\n    //cout&lt;&lt; city_location[0][1];\n    double total = 0;\n    for(int i=0; i&lt;n-1;i++)\n    {\n       total += distance(Path[i],Path[i+1]);         \\\\Line 63\n\n    }\n        total += distance(Path[n],Path[0]);\n\n        cout &lt;&lt; \"total distance is \"&lt;&lt; total&lt;&lt;endl;\n        return total;\n     }\n\n };\n\n\n\n int main()\n {\n   srand(1235);\n\n   Map&lt;Flat&gt; x(10);\n   // Map&lt;Flat&gt; x(10);\n\n   cout &lt;&lt; \"distance between cities 3 and 7 is \" &lt;&lt; x.distance(3,7) &lt;&lt; \"\\n\";\n }\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code> line 63: invalid types 'double[int]' for array subscript.\n</code></pre>\n\n<p>Any ideas on how to resolve the problem? Or potentially an easier way to go about what i'm trying to do with the total distance? Thanks</p>\n"}, {"tags": ["c++", "string", "vector"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1424888808, "post_id": 28726732, "comment_id": 45740012, "body": "Side note: you do not need vector.at(index) while iterating over valid indices, use vector[]"}, {"owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1424889402, "post_id": 28726732, "comment_id": 45740351, "body": "why don&#39;t you split your string by &#39;/&#39; character and store each combination in a vector?"}, {"owner": {"reputation": 133, "user_id": 3966963, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1207d375027e4b67762ddf356081401d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousToLearn", "link": "https://stackoverflow.com/users/3966963/curioustolearn"}, "reply_to_user": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1424889495, "post_id": 28726732, "comment_id": 45740407, "body": "@sithereal, if i do so, how can i relate country/currency/amount?? since there are more valid combinations as well.."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1424890101, "post_id": 28726732, "comment_id": 45740703, "body": "@LogeshwariRam Don&#39;t make the mistake of trying to write your code depending on the UI. Look up what the &quot;MVC pattern&quot; is all about. <a href=\"http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller</a>"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1424890258, "post_id": 28726732, "comment_id": 45740786, "body": "@LogeshwariRam - From your description, it looks like a std::map representing your data is a much better choice than a set of vectors."}, {"owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1424890261, "post_id": 28726732, "comment_id": 45740789, "body": "@LogeshwariRam: They&#39;ll be in the same vector and if you can be sure that the positions of country/currency/amount won&#39;t change; then you can access them via their constant indice(eg: if(vec1[0] == &quot;US))"}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1425331082, "post_id": 28726732, "comment_id": 45911021, "body": "Store it in any container you like. Considering the low number of countries and currencies worldwide, it is probably fast enough. If that turns out as too slow, there is something in the data you have forgotten to tell us here."}], "answers": [{"comments": [{"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1424894088, "post_id": 28727322, "comment_id": 45743030, "body": "In the code to display the entries in the vector, use <code>map::find</code> instead of <code>[ ]</code>.  If the value doesn&#39;t exist, you won&#39;t be creating empty entries if <code>find</code> is used."}, {"owner": {"reputation": 133, "user_id": 3966963, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1207d375027e4b67762ddf356081401d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousToLearn", "link": "https://stackoverflow.com/users/3966963/curioustolearn"}, "edited": false, "score": 0, "creation_date": 1424925235, "post_id": 28727322, "comment_id": 45754210, "body": "@kittyPL : This is fine for searching by country. The problem here is i i can search for country/currency/min_amount, so that other i get the combination of the other two."}, {"owner": {"reputation": 2553, "user_id": 1023753, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a801bb769a73e5d0d73a15fb6eb78ba6?s=128&d=identicon&r=PG", "display_name": "noisy cat", "link": "https://stackoverflow.com/users/1023753/noisy-cat"}, "reply_to_user": {"reputation": 133, "user_id": 3966963, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1207d375027e4b67762ddf356081401d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousToLearn", "link": "https://stackoverflow.com/users/3966963/curioustolearn"}, "edited": false, "score": 0, "creation_date": 1425328843, "post_id": 28727322, "comment_id": 45909814, "body": "@LogeshwariRam You can use multipe dictionaries. Yes, that&#39;s how it works in most professional apps."}, {"owner": {"reputation": 133, "user_id": 3966963, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1207d375027e4b67762ddf356081401d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousToLearn", "link": "https://stackoverflow.com/users/3966963/curioustolearn"}, "edited": false, "score": 0, "creation_date": 1425533157, "post_id": 28727322, "comment_id": 46004798, "body": "@kittyPL could you please elaborate more on this?"}, {"owner": {"reputation": 2553, "user_id": 1023753, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a801bb769a73e5d0d73a15fb6eb78ba6?s=128&d=identicon&r=PG", "display_name": "noisy cat", "link": "https://stackoverflow.com/users/1023753/noisy-cat"}, "edited": false, "score": 0, "creation_date": 1425656637, "post_id": 28727322, "comment_id": 46063944, "body": "Create struct for each pair like I did for CurrencyVal along with appropiate map (dictionary). Then after parsing each input line add all three structs to their maps :)"}], "owner": {"reputation": 2553, "user_id": 1023753, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a801bb769a73e5d0d73a15fb6eb78ba6?s=128&d=identicon&r=PG", "display_name": "noisy cat", "link": "https://stackoverflow.com/users/1023753/noisy-cat"}, "is_accepted": true, "score": 2, "last_activity_date": 1424891226, "last_edit_date": 1424891226, "creation_date": 1424890554, "answer_id": 28727322, "question_id": 28726732, "link": "https://stackoverflow.com/questions/28726732/how-to-make-use-of-stls-for-better-result-and-performance-in-this-issue/28727322#28727322", "title": "how to make use of STL&#39;s for better result and performance in this issue", "body": "<p>I'd use <a href=\"http://www.cplusplus.com/reference/map/map/\" rel=\"nofollow\"><code>std::map</code></a>.</p>\n\n<p>Map each country name to vector of possible combinations. Typical workflow for this goes as follow:</p>\n\n<ol>\n<li>Parse input string</li>\n<li>Store parsing results</li>\n<li>Query storage container</li>\n</ol>\n\n<p>So, start with structure for results:</p>\n\n<pre><code>struct CurrencyVal\n{\n    string currency;\n    int minimum_ammount;\n};\n</code></pre>\n\n<p>It will be stored in the vector for each country. This represents single entry like <code>USD/18</code> and is not related to any country.</p>\n\n<p>Now, lets make some space for storing it:</p>\n\n<pre><code>std::map&lt;string,vector&lt;CurrencyVal&gt;&gt; dropdowns;\n</code></pre>\n\n<p>It will map any country to list of possible CurrencyVal values. Lets now parse the input vector. Lets say the input vector is <code>vector&lt;string&gt; input</code>.</p>\n\n<pre><code>//Helper function, note the pos is passed by reference to modify it\nstring parseToToken(string&amp; str, int&amp; pos, char delim)\n{\n    string result=\"\";\n    for (; pos&lt;str.length(); pos++)\n    {\n        if (str[pos] == delim)\n            break;\n        result+=str[pos];\n    }\n    pos++; //Skip the token\n    return result;\n}\n\nfor (unsigned i=0; i&lt;input.size(); i++)\n{\n    int pos = 0;\n    string country;\n    CurrencyVal value;\n\n    country = parseToToken(input[i],pos,'/');\n    value.currency = parseToToken(input[i],pos,'/');\n\n    //stoi from &lt;string&gt; in C++11, if you are not using c++11, try with atoi(input[i].substr(pos).c_str())\n    value.minimum_ammount = stoi(input[i].substr(pos)); \n\n    //Store the results\n    dropdowns[country].push_back(value);\n}\n</code></pre>\n\n<p>That's all. Now we can query this struct like this:</p>\n\n<pre><code>vector&lt;CurrencyVal&gt; allForUs = dropdowns[\"US\"];\nfor (unsigned i = 0; i &lt; allForUs.size(); i++)\n    cout &lt;&lt; allForUs[i].country &lt;&lt; \" - \" &lt;&lt; allForUs[i].minimum_ammound &lt;&lt; endl;\n</code></pre>\n\n<p>If you have any questions post a comment so I can improve this answer.</p>\n"}], "owner": {"reputation": 133, "user_id": 3966963, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1207d375027e4b67762ddf356081401d?s=128&d=identicon&r=PG&f=1", "display_name": "CuriousToLearn", "link": "https://stackoverflow.com/users/3966963/curioustolearn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 28727322, "answer_count": 1, "score": 0, "last_activity_date": 1425329874, "creation_date": 1424888577, "last_edit_date": 1425329874, "question_id": 28726732, "link": "https://stackoverflow.com/questions/28726732/how-to-make-use-of-stls-for-better-result-and-performance-in-this-issue", "title": "how to make use of STL&#39;s for better result and performance in this issue", "body": "<p>I have some set of strings in format : <code>country/currency/minimum_amount</code> </p>\n\n<p>For example:</p>\n\n<pre><code>US/USD/18\nUS/EUR/20\nDE/USD/22\nGB/EUR/19\n</code></pre>\n\n<p>Let's say i have drop downs each for country, currency and minimum amount.\nOnce i select the country, i should get the possible combination of currency and min amount from the above set of strings.</p>\n\n<p>ex. Once i select country as US in dropdown_1, then currency(dropdown) should display - USD and EUR and min_amt - 18 and 20.\\\nex. 2:\nOnce i select Currency as USD in dropdown_2, then country(dropdown) should display - US and DE and min_amt - 18 and 22.. similarly for the third drop down as well.</p>\n\n<p>My solution, \nLets assume i have these specific strings in a vector(name - myvector),\nthen I'm retrieving the strings using:</p>\n\n<pre><code>std::string str2(\"US\"); // i need the strings that has country as US\nstring credt_fin_str;\n\nfor (unsigned j=0; j&lt;myvector.size(); j++)\n{\n    credt_fin_str = myvector.at(j);\n    std::size_t found = credt_fin_str.find(str2);\n\n    if(found != string::npos)\n    {\n        std::cout&lt;&lt;\"creditfin found:\"&lt;&lt;credt_fin_str&lt;&lt;std::endl;\n    }\n\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>US/USD/18\nUS/EUR/20\nDE/USD/22\n</code></pre>\n\n<p>Since i using string::find, it displays even \"USD\" as it contains \"US\" but it shouldn't be for my use case.</p>\n\n<p>can anyone suggest a better solution to this use case so that i can improve the result and performance.</p>\n"}, {"tags": ["c++", "boost-regex"], "answers": [{"owner": {"reputation": 185, "user_id": 3282085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16720da2a470091bb28232d85434c332?s=128&d=identicon&r=PG&f=1", "display_name": "user3282085", "link": "https://stackoverflow.com/users/3282085/user3282085"}, "is_accepted": false, "score": 2, "last_activity_date": 1424890329, "creation_date": 1424890329, "answer_id": 28727255, "question_id": 28726684, "link": "https://stackoverflow.com/questions/28726684/boost-and-curl-not-work-together/28727255#28727255", "title": "boost and Curl not work together", "body": "<p>In your Get function you declare the local variable readBuffer character pointer:</p>\n\n<pre><code>char *readBuffer;\n</code></pre>\n\n<p>You use the address of that as the userdata for your Write_callback function.  So the userdata is a char**.  But in your Write_Callback you have the userdata field a a std::string:</p>\n\n<pre><code>int Write_callback(char *data, size_t size, size_t nmemb, string *buffer)\n</code></pre>\n\n<p>With LibCurl the callback has the userdata parameter as a void* so it isn't a std::string:</p>\n\n<pre><code>size_t write_callback(char *ptr, size_t size, size_t nmemb, void *userdata);\n</code></pre>\n\n<p>See <a href=\"http://curl.haxx.se/libcurl/c/CURLOPT_WRITEFUNCTION.html\" rel=\"nofollow\">http://curl.haxx.se/libcurl/c/CURLOPT_WRITEFUNCTION.html</a></p>\n\n<p>Pass a std::string pointer as the userdata instead of a char**.  And I would keep the Write_callback parameter a void* and cast that void* to a std::string* in the callback.</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 21, "user_id": 4475754, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/569dc4014257087e1233d4413f649c87?s=128&d=identicon&r=PG&f=1", "display_name": "kirill reut", "link": "https://stackoverflow.com/users/4475754/kirill-reut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424890329, "creation_date": 1424888404, "question_id": 28726684, "link": "https://stackoverflow.com/questions/28726684/boost-and-curl-not-work-together", "title": "boost and Curl not work together", "body": "<p>I really can not understand what my problem\nHere is my code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;curl/curl.h&gt;\n#include &lt;boost/regex.hpp&gt;\n\nusing namespace std;\nusing namespace boost;\n\nint Write_callback(char *data, size_t size, size_t nmemb, string *buffer)\n{\n  int result = 0;\n  if (buffer != NULL)\n  {\n    buffer-&gt;append(data, size * nmemb);\n    result = size * nmemb;\n  }\n  return result;\n}\n\nchar *Get(string url)\n{\n    CURL *curl;\n    CURLcode res;\n    char *readBuffer;\n    int retries = 2;\n\n    curl = curl_easy_init();\n    if (curl) {\n        do {\n            curl_easy_setopt(curl, CURLOPT_URL, url.c_str());\n            curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, Write_callback);\n            curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;readBuffer);\n            curl_easy_setopt(curl, CURLOPT_CONNECTTIMEOUT, 10);\n            curl_easy_setopt(curl, CURLOPT_COOKIEFILE, \"cookies.txt\");\n            curl_easy_setopt(curl, CURLOPT_COOKIEJAR, \"cookies.txt\");\n            curl_easy_setopt(curl, CURLOPT_USERAGENT,\n                    \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; .NET CLR 1.1.4322; .NET CLR 2.0.5\");\n            res = curl_easy_perform(curl);\n        } while (CURLE_OK != res &amp;&amp; retries--);\n\n        curl_easy_cleanup(curl);\n\n        return readBuffer;\n    }\n}\n\nint main(int argc, char** argv)\n{\n    char *www = Get(\"google.com\");\n\n    string Str = \"dsfgdasgadgasdg\";\n    boost::regex RegEx(\"(.+)\");\n    boost::smatch Results;\n    boost::regex_match(Str, Results, RegEx);\n    cout &lt;&lt; \"Print entire match:\\n \" &lt;&lt; Results[1] &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>This compiles, but when you run an error:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::length_error'\n  what():  basic_string::_S_create\n</code></pre>\n\n<p>If I comment out this:</p>\n\n<pre><code>char *www = Get(\"google.com\");\n</code></pre>\n\n<p>That works</p>\n\n<p>If I comment out this:</p>\n\n<pre><code>string Str = \"dsfgdasgadgasdg\";\nboost::regex RegEx(\"(.+)\");\nboost::smatch Results;\nboost::regex_match(Str, Results, RegEx);\ncout &lt;&lt; \"Print entire match:\\n \" &lt;&lt; Results[1] &lt;&lt; endl;\n</code></pre>\n\n<p>That works too..</p>\n\n<p>Why it does not work together ??</p>\n"}, {"tags": ["android", "c++", "opencv"], "comments": [{"owner": {"reputation": 35699, "user_id": 2056772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574eff69e66401997eecd2ac405053c1?s=128&d=identicon&r=PG", "display_name": "berak", "link": "https://stackoverflow.com/users/2056772/berak"}, "edited": false, "score": 0, "creation_date": 1424888701, "post_id": 28726671, "comment_id": 45739948, "body": "did you run a <code>make install</code> ? that should have copied all the header files to your build/install folder"}], "answers": [{"owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "is_accepted": false, "score": 0, "last_activity_date": 1424940141, "creation_date": 1424940141, "answer_id": 28737805, "question_id": 28726671, "link": "https://stackoverflow.com/questions/28726671/build-opencv-3-0-for-android-with-extra-modules/28737805#28737805", "title": "build opencv 3.0 for android with extra modules", "body": "<p>Note that <code>OCRTesseract</code> class (inside of <a href=\"https://github.com/Itseez/opencv_contrib/tree/master/modules/text/include/opencv2\" rel=\"nofollow\">opencv2/text.hpp</a>) provides an interface with the tesseract-ocr API (v3.02.02) in C++ and it is compiled only when <a href=\"http://code.google.com/p/tesseract-ocr/\" rel=\"nofollow\">tesseract-ocr</a> is correctly installed.</p>\n\n<p>First of all you should compile tesseract (and its dependencies) to Android.</p>\n"}], "owner": {"reputation": 11, "user_id": 4606990, "user_type": "registered", "profile_image": "https://graph.facebook.com/10152742893066903/picture?type=large", "display_name": "Mauricio Bacelis", "link": "https://stackoverflow.com/users/4606990/mauricio-bacelis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 710, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1424940141, "creation_date": 1424888354, "last_edit_date": 1424892969, "question_id": 28726671, "link": "https://stackoverflow.com/questions/28726671/build-opencv-3-0-for-android-with-extra-modules", "title": "build opencv 3.0 for android with extra modules", "body": "<p>I built the OpenCV 3.0 beta with extra modules. The build was without java libraries and that was the only way that I was able to build the OpenCV 3.0 beta without getting errors and there is no problem because I only need the native part.</p>\n\n<p>The problem that I have is when I try to implement the text module I get an error that the library can\u00b4t be resolved. The line to implement the library is this:</p>\n\n<pre><code>#include &lt;opencv2/text.hpp&gt;\n</code></pre>\n\n<p>So my question is: What can I do to resolve this problem? Do I have to move some include files to some location?</p>\n"}, {"tags": ["c++", "printf", "column-width"], "comments": [{"owner": {"reputation": 2820, "user_id": 2562283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ef4e835ba48416df3d5607ae1a89bbf?s=128&d=identicon&r=PG", "display_name": "E. Moffat", "link": "https://stackoverflow.com/users/2562283/e-moffat"}, "edited": false, "score": 1, "creation_date": 1424888284, "post_id": 28726549, "comment_id": 45739717, "body": "You need another number after the &#39;.&#39;, or an asterisk &#39;*&#39;. For instance, %2.2d would print a minimum of 2 digits. See <a href=\"http://www.cplusplus.com/reference/cstdio/printf/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/cstdio/printf</a>"}], "answers": [{"comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1424888618, "post_id": 28726655, "comment_id": 45739902, "body": "I actually think he wants <code>%2.1d</code>"}, {"owner": {"reputation": 76, "user_id": 638367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/uiRLK.png?s=128&g=1", "display_name": "Shellsunde", "link": "https://stackoverflow.com/users/638367/shellsunde"}, "edited": false, "score": 0, "creation_date": 1424889705, "post_id": 28726655, "comment_id": 45740521, "body": "Yes, I want a width of 2 columns. The addition of the precision specifier (%2.1d) did the trick, <i>thanks a lot</i>.      Nowhere did I read that you have to have a precision specifier for the width specifier to work, in fact, they&#39;re explicitly described as being independent of one another.  Weirdest thing - I thought I knew printf()."}], "owner": {"reputation": 148, "user_id": 2132970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4718152b9c56d4bc95c8c23f4ff5c0c4?s=128&d=identicon&r=PG", "display_name": "Alberto Boldrini", "link": "https://stackoverflow.com/users/2132970/alberto-boldrini"}, "is_accepted": true, "score": 3, "last_activity_date": 1424888526, "last_edit_date": 1424888526, "creation_date": 1424888304, "answer_id": 28726655, "question_id": 28726549, "link": "https://stackoverflow.com/questions/28726549/printf-with-a-width-modifier-fails-to-print-the-value/28726655#28726655", "title": "printf with a width modifier fails to print the value", "body": "<p>The point should go to the left</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    int x = 1, z = 0;\n    printf (\"%.2d: %.2d\\n\", x, z); // fails to print 0\n    printf (\"%.2d: %d\\n\", x, z);  // 2nd %2. absent, prints as expected\n    return 0;\n}\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>01: 00\n01: 0\n</code></pre>\n"}], "owner": {"reputation": 76, "user_id": 638367, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/uiRLK.png?s=128&g=1", "display_name": "Shellsunde", "link": "https://stackoverflow.com/users/638367/shellsunde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 28726655, "answer_count": 1, "score": 0, "last_activity_date": 1424888526, "creation_date": 1424887970, "last_edit_date": 1424888490, "question_id": 28726549, "link": "https://stackoverflow.com/questions/28726549/printf-with-a-width-modifier-fails-to-print-the-value", "title": "printf with a width modifier fails to print the value", "body": "<p>In a C++ program, under Windows 7 using VS2013 and under Ubuntu 14.04.1 using g++ 4.6, I am mystified by the operation of printf(). </p>\n\n<p>With the 2nd width modifier, this prints a space instead of a 0.<br>\nWhen set to another value, e.g., -1, it prints it. Without the modifier, it prints a 0, as expected. </p>\n\n<p>I pasted the actual, relevant code into another program and it behaved the same way. </p>\n\n<p>What could be the problem?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nint main(){\n    int x = 1, z = 0;\n    printf (\"%2.d: %2.d\\n\", x, z); // fails to print 0\n    printf (\"%2.d: %d\\n\", x, z);  // 2nd %2. absent, prints as expected\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> 1:   \n 1: 0\n</code></pre>\n"}, {"tags": ["c++", "opengl"], "comments": [{"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1424888360, "post_id": 28726532, "comment_id": 45739763, "body": "What does <code>glGetError()</code> return?"}, {"owner": {"reputation": 1799, "user_id": 3024116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1920be341bbc905918a5294e552a12f3?s=128&d=identicon&r=PG&f=1", "display_name": "Sahar Rabinoviz", "link": "https://stackoverflow.com/users/3024116/sahar-rabinoviz"}, "reply_to_user": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1424888655, "post_id": 28726532, "comment_id": 45739924, "body": "<code>glGetError()</code> returns <code>1282</code>"}, {"owner": {"reputation": 2755, "user_id": 2682312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M37ut.png?s=128&g=1", "display_name": "Axalo", "link": "https://stackoverflow.com/users/2682312/axalo"}, "edited": false, "score": 0, "creation_date": 1424889728, "post_id": 28726532, "comment_id": 45740531, "body": "Make sure it returns 0 <b>before</b> <code>glRenderMode</code> and 1282 <b>afterwards</b>. See <a href=\"https://www.opengl.org/sdk/docs/man2/xhtml/glRenderMode.xml#errors\" rel=\"nofollow noreferrer\">here</a> for more information."}, {"owner": {"reputation": 900, "user_id": 2816651, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sAcI8.png?s=128&g=1", "display_name": "Jean-Simon Brochu", "link": "https://stackoverflow.com/users/2816651/jean-simon-brochu"}, "edited": false, "score": 0, "creation_date": 1424892928, "post_id": 28726532, "comment_id": 45742295, "body": "GL_INVALID_OPERATION is generated if glSelectBuffer is called while the render mode is GL_SELECT, or if glRenderMode is called with argument GL_SELECT before glSelectBuffer is called at least once."}, {"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "reply_to_user": {"reputation": 900, "user_id": 2816651, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sAcI8.png?s=128&g=1", "display_name": "Jean-Simon Brochu", "link": "https://stackoverflow.com/users/2816651/jean-simon-brochu"}, "edited": false, "score": 0, "creation_date": 1424902979, "post_id": 28726532, "comment_id": 45747765, "body": "@Jean-SimonBrochu do you know by heart if <code>GL_INVALID_OPERATION</code>  would also be thrown for cards/drivers/profiles not supporting picking anymore?"}, {"owner": {"reputation": 900, "user_id": 2816651, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sAcI8.png?s=128&g=1", "display_name": "Jean-Simon Brochu", "link": "https://stackoverflow.com/users/2816651/jean-simon-brochu"}, "edited": false, "score": 0, "creation_date": 1424955060, "post_id": 28726532, "comment_id": 45768686, "body": "A lot of functionalities of OpenGL are deprecated and still supported. This should not be any different. I tested your program and it works fine here. It is possible that your graphic card driver doesn&#39;t support this functionality."}], "owner": {"reputation": 1799, "user_id": 3024116, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1920be341bbc905918a5294e552a12f3?s=128&d=identicon&r=PG&f=1", "display_name": "Sahar Rabinoviz", "link": "https://stackoverflow.com/users/3024116/sahar-rabinoviz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424908197, "creation_date": 1424887940, "last_edit_date": 1592644375, "question_id": 28726532, "link": "https://stackoverflow.com/questions/28726532/opengl-glrendermode-not-changing-mode", "title": "opengl glRenderMode not changing mode", "body": "<p>I'm trying to change the render mode for selection using <code>glRenderMode</code>, below is the code I use to do this.</p>\n<pre><code> glSelectBuffer(size, buffer);\n int before = glRenderMode(GL_SELECT);\n std::cout &lt;&lt; &quot;before:&quot; &lt;&lt; before &lt;&lt; std::endl;\n GLint mode;\n glGetIntegerv(GL_RENDER_MODE, &amp;mode);i\n std::cout &lt;&lt; &quot;mode:&quot; &lt;&lt; mode &lt;&lt; std::endl;\n std::cout &lt;&lt; &quot;gl_select:&quot; &lt;&lt; GL_SELECT &lt;&lt; std::endl;\n std::cout &lt;&lt; &quot;gl_render:&quot; &lt;&lt; GL_RENDER &lt;&lt; std::endl;\n</code></pre>\n<p>The output is</p>\n<pre><code>before: 0\nmode:7168\ngl_select:7170\ngl_render:7168\n</code></pre>\n<p>Which tells me that the mode is not changing, since by default it is in <code>GL_RENDER</code></p>\n<p>edit: changed code to verify it returns 0 before glRenderMode, as per @Axalo comment.</p>\n<p>Also I noticed that running <code>glGetError()</code> before the above block of code returns <code>0</code></p>\n<p>But the following code will give me <code>1282</code> error code again</p>\n<pre><code>glRenderMode(GL_RENDER);\nstd::cout &lt;&lt; glGetError() &lt;&lt; std::endl;\n</code></pre>\n<p>From the docs for <a href=\"https://www.opengl.org/sdk/docs/man2/xhtml/glRenderMode.xml#errors\" rel=\"nofollow noreferrer\">glRendMode</a>, possible cause is runnning in between <code>glBegin</code> and <code>glEnd</code> but I do not have a call to <code>glBegin</code></p>\n<p>EDIT\nopengl picking is depricated in 3.1. I am using opgenl version &gt;3.1 therefore this is not working.</p>\n"}, {"tags": ["c++", "gdb", "stdvector", "segmentation-fault"], "comments": [{"owner": {"reputation": 141, "user_id": 2127926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/144fdaed6638c905396bd869640ab1bd?s=128&d=identicon&r=PG", "display_name": "mfbutner", "link": "https://stackoverflow.com/users/2127926/mfbutner"}, "edited": false, "score": 0, "creation_date": 1557162154, "post_id": 28726514, "comment_id": 98664336, "body": "Did you ever figure out what caused this and how to fix it? I&#39;m getting the same issue on Cygwin except I have an instance of a vector and not a pointer to one."}, {"owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "reply_to_user": {"reputation": 141, "user_id": 2127926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/144fdaed6638c905396bd869640ab1bd?s=128&d=identicon&r=PG", "display_name": "mfbutner", "link": "https://stackoverflow.com/users/2127926/mfbutner"}, "edited": false, "score": 0, "creation_date": 1557169479, "post_id": 28726514, "comment_id": 98667122, "body": "Not that I recall.  I think I just worked around it.  Maybe try a later version of GDB?"}, {"owner": {"reputation": 141, "user_id": 2127926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/144fdaed6638c905396bd869640ab1bd?s=128&d=identicon&r=PG", "display_name": "mfbutner", "link": "https://stackoverflow.com/users/2127926/mfbutner"}, "edited": false, "score": 0, "creation_date": 1557186331, "post_id": 28726514, "comment_id": 98672066, "body": "Thanks for the reply. The thing is that I remember being able to do this on older versions of gdb. It&#39;s just on the current version where this started happening. I&#39;ll keep looking into it and see if I can find something."}], "owner": {"reputation": 36033, "user_id": 115751, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FkIiK.png?s=128&g=1", "display_name": "WilliamKF", "link": "https://stackoverflow.com/users/115751/williamkf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1424887901, "creation_date": 1424887901, "question_id": 28726514, "link": "https://stackoverflow.com/questions/28726514/why-is-gdb-getting-segv-when-i-manually-call-a-function-on-a-stdvector", "title": "Why is gdb getting SEGV when I manually call a function on a std::vector?", "body": "<p>After moving to Centos 5 (from 4) I'm seeing gdb crashing when I try to call a member function on an std::vector:</p>\n\n<pre><code>(gdb) p actionQueue-&gt;size()\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x081d881e in indexedActionQueue::size (this=0xbfbd0050) at actionList.h:52\nThe program being debugged was signaled while in a function called from GDB.\nGDB has restored the context to what it was before the call.\nTo change this behavior use \"set unwindonsignal off\".\nEvaluation of the expression containing the function\n(indexedActionQueue::size() const) will be abandoned.\n(gdb) p actionQueue-&gt;_actionQueue\n$1 = std::vector of length 7, capacity 7 = {\n   [...]\n    }\n(gdb) p actionQueue-&gt;_actionQueue.empty()\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x08158ea3 in std::vector&lt;CAction, std::allocator&lt;CAction&gt; &gt;::empty (this=0xa514788) at /opt/rh/devtoolset-2/root/usr/include/c++/4.8.2/bits/stl_vector.h:735\nThe program being debugged was signaled while in a function called from GDB.\nGDB has restored the context to what it was before the call.\nTo change this behavior use \"set unwindonsignal off\".\nEvaluation of the expression containing the function\n(std::vector&lt;CAction, std::allocator&lt;CAction&gt; &gt;::empty() const) will be abandoned.\n(gdb) p actionQueue-&gt;_actionQueue.begin()\n\nProgram received signal SIGSEGV, Segmentation fault.\n0x08188ec6 in std::vector&lt;CAction, std::allocator&lt;CAction&gt; &gt;::begin (this=0xa514788) at /opt/rh/devtoolset-2/root/usr/include/c++/4.8.2/bits/stl_vector.h:539\nThe program being debugged was signaled while in a function called from GDB.\nGDB has restored the context to what it was before the call.\nTo change this behavior use \"set unwindonsignal off\".\nEvaluation of the expression containing the function\n(std::vector&lt;CAction, std::allocator&lt;CAction&gt; &gt;::begin()) will be abandoned.\n</code></pre>\n\n<p>I tried updating gdb to v7.9 but I got the same results.  I'm using <code>scl enable devtoolset-2</code> to build with gcc v4.8.2. If I print the <code>std::vector</code> in gdb it looks proper.</p>\n\n<p>If I place the methods that get SEGV directly into the C++ application they run without SEGV, but manually running them in gdb gets a SEGV.</p>\n\n<p>How can I get gdb to allow these calls to work?</p>\n"}, {"tags": ["java", "c++", "smtp"], "comments": [{"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 2, "creation_date": 1424887898, "post_id": 28726461, "comment_id": 45739491, "body": "POP3 and SMTP are two completely independent protocols."}], "answers": [{"owner": {"reputation": 28276, "user_id": 87117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f9e45dad82da556b0acabdbf3be8452?s=128&d=identicon&r=PG", "display_name": "jstedfast", "link": "https://stackoverflow.com/users/87117/jstedfast"}, "is_accepted": false, "score": 1, "last_activity_date": 1424993591, "creation_date": 1424993591, "answer_id": 28754883, "question_id": 28726461, "link": "https://stackoverflow.com/questions/28726461/smtp-c-client/28754883#28754883", "title": "SMTP c++ client", "body": "<p>Google for libESMTP - it's the onlycolor library I know of that does what you want.</p>\n"}, {"owner": {"reputation": 74, "user_id": 2041333, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gcnci.jpg?s=128&g=1", "display_name": "Jeff Muzzy", "link": "https://stackoverflow.com/users/2041333/jeff-muzzy"}, "is_accepted": false, "score": 1, "last_activity_date": 1426574553, "creation_date": 1426574553, "answer_id": 29092840, "question_id": 28726461, "link": "https://stackoverflow.com/questions/28726461/smtp-c-client/29092840#29092840", "title": "SMTP c++ client", "body": "<p>Found this if you haven't found something already.\nOpen source for C++</p>\n\n<p><a href=\"http://www.vmime.org/\" rel=\"nofollow\">http://www.vmime.org/</a></p>\n"}], "owner": {"reputation": 23069, "user_id": 2786156, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/fWMLm.jpg?s=128&g=1", "display_name": "St.Antario", "link": "https://stackoverflow.com/users/2786156/st-antario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1426574553, "creation_date": 1424887701, "question_id": 28726461, "link": "https://stackoverflow.com/questions/28726461/smtp-c-client", "title": "SMTP c++ client", "body": "<p>I need to connect to a <code>pop3</code> server and get the list of all mails located in there. Is there some convinient library I could use in <code>c++</code>. In Java, we usually use <a href=\"http://mvnrepository.com/artifact/commons-net/commons-net\" rel=\"nofollow\">commons-net</a> in order to operate on such <code>SMTP</code> connections. I'm looking for something similar. The issue is wouldn't like to write all of the boilerplate code to create <code>SMTP</code>-connection via low-level sockets. </p>\n"}, {"tags": ["c++", "gcc", "long-double"], "answers": [{"comments": [{"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 2, "creation_date": 1424889449, "post_id": 28726612, "comment_id": 45740379, "body": "Both C and C++ only mandate that a <code>long double</code> be <i>at least</i> <code>double</code> precision."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1424895333, "post_id": 28726612, "comment_id": 45743692, "body": "Yes, but I only <i>know</i> platforms where gcc makes long double at least 80b long, because that&#39;s what the user indicates he wants."}, {"owner": {"reputation": 228853, "user_id": 827263, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/216c1db53d752f87dd8176a6ba0c2190?s=128&d=identicon&r=PG", "display_name": "Keith Thompson", "link": "https://stackoverflow.com/users/827263/keith-thompson"}, "edited": false, "score": 0, "creation_date": 1424896986, "post_id": 28726612, "comment_id": 45744602, "body": "Your answer still implies that <code>long double</code> is wider than <code>double</code>. That&#39;s not always true. And since gcc has a <code>-mlong-double-64</code> option for some platforms, your answer is factually incorrect (though there are substantial drawbacks to using that option)."}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1424897339, "post_id": 28726612, "comment_id": 45744801, "body": "Keith, again I must stress the <i>typical</i> and <i>all platforms <b>I</b> know</i> from my answer. Noone (aside from the cited Bionic C, which seems to be such a special case that the gcc manual cites it!) seems to do that, breaking the ABI."}], "owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "is_accepted": false, "score": -2, "last_activity_date": 1424888173, "creation_date": 1424888173, "answer_id": 28726612, "question_id": 28726444, "link": "https://stackoverflow.com/questions/28726444/gcc-restrict-long-double-width/28726612#28726612", "title": "GCC: Restrict long double width", "body": "<p>Since typically (read: all platforms that I know of) <code>double</code> is 64bit, using long double <em>explicitely</em> demands a more-precise floating point number. Thus, there's no way to revert that.</p>\n"}, {"comments": [{"owner": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 1, "creation_date": 1424890415, "post_id": 28726796, "comment_id": 45740865, "body": "Page 11 of the <a href=\"http://www.x86-64.org/documentation_folder/abi-0.99.pdf\" rel=\"nofollow noreferrer\">ABI</a> mandates an 80 bit <code>long double</code>. There is a separate <code>__float128</code> type."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "reply_to_user": {"reputation": 19889, "user_id": 906839, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5bce6d276ec5c9b7b97804d0add55084?s=128&d=identicon&r=PG", "display_name": "Brett Hale", "link": "https://stackoverflow.com/users/906839/brett-hale"}, "edited": false, "score": 0, "creation_date": 1424894242, "post_id": 28726796, "comment_id": 45743102, "body": "@BrettHale: oh, interesting that x86 is 96 bits then. I stand corrected. Fixed my reply."}], "owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "is_accepted": true, "score": 5, "last_activity_date": 1424894217, "last_edit_date": 1424894217, "creation_date": 1424888779, "answer_id": 28726796, "question_id": 28726444, "link": "https://stackoverflow.com/questions/28726444/gcc-restrict-long-double-width/28726796#28726796", "title": "GCC: Restrict long double width", "body": "<p>Possibly <a href=\"https://gcc.gnu.org/onlinedocs/gcc-4.9.2/gcc/i386-and-x86-64-Options.html#i386-and-x86-64-Options\" rel=\"nofollow\">via <code>-mlong-double-64</code> command line switch</a>, but the question is: <strong>why do you want to do that?</strong> </p>\n\n<p>The x86 ABI and <a href=\"http://www.x86-64.org/documentation_folder/abi-0.99.pdf\" rel=\"nofollow\">x86-64 System V</a> ABI mandate a <code>long double</code> of 96/80 bits respectively\u00b9, i.e. you need to recompile not only your application, but anything it uses which exposes a long double in the API.</p>\n\n<p>\u00b9 And according to the same doc, GCC on x86-64 uses 128-bit long doubles.</p>\n"}], "owner": {"reputation": 1539, "user_id": 833060, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4gGv8.jpg?s=128&g=1", "display_name": "Pascal Kesseli", "link": "https://stackoverflow.com/users/833060/pascal-kesseli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 28726796, "answer_count": 2, "score": 2, "last_activity_date": 1424894217, "creation_date": 1424887652, "question_id": 28726444, "link": "https://stackoverflow.com/questions/28726444/gcc-restrict-long-double-width", "title": "GCC: Restrict long double width", "body": "<p>Is there a way/switch to restrict the size of long doubles to 64 bits when compiling using GCC?</p>\n"}, {"tags": ["c++", "fibonacci", "modulus"], "comments": [{"owner": {"reputation": 22818, "user_id": 509868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/83450238b4ee0eddbf54d7ce5a3a64e4?s=128&d=identicon&r=PG", "display_name": "anatolyg", "link": "https://stackoverflow.com/users/509868/anatolyg"}, "edited": false, "score": 1, "creation_date": 1424887444, "post_id": 28725993, "comment_id": 45739204, "body": "Does &quot;-ve no.s&quot; mean &quot;negative numbers&quot;?"}, {"owner": {"reputation": 2553, "user_id": 1023753, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a801bb769a73e5d0d73a15fb6eb78ba6?s=128&d=identicon&r=PG", "display_name": "noisy cat", "link": "https://stackoverflow.com/users/1023753/noisy-cat"}, "edited": false, "score": 0, "creation_date": 1424887886, "post_id": 28725993, "comment_id": 45739482, "body": "If it&#39;s not a homework problem you should probably look at fibonacci&#39;s number closet formula, also known as Binet&#39;s fibonacci number formula. Basically, f(n) = (1/sqrt(5)) * ((1 - sqrt(5)) / 2) ^ n. You can solve the sqrt problems by using approximate values and executing round for the final result."}], "answers": [{"comments": [{"owner": {"reputation": 579, "user_id": 3160274, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f1f4d3db1fe40863c024c21d074d1971?s=128&d=identicon&r=PG&f=1", "display_name": "nomorequestions", "link": "https://stackoverflow.com/users/3160274/nomorequestions"}, "edited": false, "score": 0, "creation_date": 1424887844, "post_id": 28726375, "comment_id": 45739455, "body": "Thank you. I was struggling to find this from long time."}], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1424887441, "creation_date": 1424887441, "answer_id": 28726375, "question_id": 28725993, "link": "https://stackoverflow.com/questions/28725993/fast-dobuling-to-find-fibonacci-number-function-not-working-in-c/28726375#28726375", "title": "Fast Dobuling to find Fibonacci number, function not working in C++", "body": "<p>With modulus,</p>\n\n<pre><code>long long int a = fib(k + 1);\nlong long int b = fib(k);\n</code></pre>\n\n<p><code>a &gt;= b</code> is not necessary true, (<code>2 * a &gt;= b</code> neither).</p>\n\n<p>so</p>\n\n<pre><code>return (b * ((2 * a - b) % MOD)) % MOD;\n</code></pre>\n\n<p>may return negative number.</p>\n"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": false, "score": 1, "last_activity_date": 1424888942, "last_edit_date": 1424888942, "creation_date": 1424887884, "answer_id": 28726507, "question_id": 28725993, "link": "https://stackoverflow.com/questions/28725993/fast-dobuling-to-find-fibonacci-number-function-not-working-in-c/28726507#28726507", "title": "Fast Dobuling to find Fibonacci number, function not working in C++", "body": "<p>This should fix the issue with (2*a - b) &lt; 0. It produces the correct answer for n = 10000000, which is 490189494.</p>\n\n<pre><code>#define MOD 1000000007\n\nlong long int fib(long long int n)\n{\nlong long int a, b, k;\n    if(n &lt; 2)\n        return n;\n    if(n == 2)\n        return 1;\n    k = n/2;\n    a = fib(k+1);\n    b = fib(k);\n    if(n%2 == 1)\n        return (((a*a)%MOD) + ((b*b)%MOD))%MOD;\n    else{\n        k = (2*a - b)%MOD;\n        if(k &lt; 0)\n            k += MOD;\n        return((b*k)%MOD);\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 579, "user_id": 3160274, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/f1f4d3db1fe40863c024c21d074d1971?s=128&d=identicon&r=PG&f=1", "display_name": "nomorequestions", "link": "https://stackoverflow.com/users/3160274/nomorequestions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 28726375, "answer_count": 2, "score": 1, "last_activity_date": 1424888942, "creation_date": 1424886232, "question_id": 28725993, "link": "https://stackoverflow.com/questions/28725993/fast-dobuling-to-find-fibonacci-number-function-not-working-in-c", "title": "Fast Dobuling to find Fibonacci number, function not working in C++", "body": "<p>I am learning this algorithm to calculate nth number in fibonacci series. This is my code, </p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n\nusing namespace std;\n\n#define MOD 1000000007\n\nlong long int fib(long long int n)\n{\n    if(n &lt; 2)\n        return n;\n    if(n == 2)\n        return 1;\n    long long int k = n/2;\n    long long int a = fib(k+1);\n    long long int b = fib(k);\n    if(n%2 == 1)\n        return (((a*a)%MOD) + ((b*b)%MOD))%MOD;\n    else\n        return (b*((2*a - b)%MOD))%MOD;\n\n}\n\nint main()\n{\n    //fibonacci series : 0,1,1,2,3,5,8,13..\n    long long int n;\n    scanf(\"%lld\",&amp;n);\n    printf(\"%lld\\n\", fib(n));\n    return 0;\n}\n</code></pre>\n\n<p>It is working fine for smaller no.s but for larger <code>n</code> values, its printing -ve no.s as output.</p>\n\n<pre><code>n = 10000000\nfib(n) = -509810513\n</code></pre>\n\n<p>I don't understand where the value is going into -ve no.s as I think I applied <code>%</code> operator properly for not having any data type overflow. Anyone please help me in finding the mistake.</p>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424886484, "post_id": 28725949, "comment_id": 45738549, "body": "Typically in C you&#39;ll write one function that takes the maximum number of arguments and then checks the arguments for guard values. In other words, if -1 or 0 is an invalid value for that parameter, you can pass in that invalid value to tell the function that you don&#39;t want to use it. In the function, check for guard values and execute the appropriate sort."}, {"owner": {"reputation": 5, "user_id": 4256104, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e5bcca934e4d8ea27bff3f6359d7236e?s=128&d=identicon&r=PG&f=1", "display_name": "photons3432", "link": "https://stackoverflow.com/users/4256104/photons3432"}, "reply_to_user": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424886651, "post_id": 28725949, "comment_id": 45738669, "body": "So you suggest adding an additional argument for <code>sort1</code>, and not use it at all?"}, {"owner": {"reputation": 6849, "user_id": 1896761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e28ac3e5849a144937aa74efbc272e?s=128&d=identicon&r=PG", "display_name": "Austin Mullins", "link": "https://stackoverflow.com/users/1896761/austin-mullins"}, "edited": false, "score": 0, "creation_date": 1424886788, "post_id": 28725949, "comment_id": 45738776, "body": "You could do it that way, or just have <code>sort2</code> check the value of the second argument. If it&#39;s an invalid value, just perform the operation that <code>sort1</code> performed."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 2, "creation_date": 1424886867, "post_id": 28725949, "comment_id": 45738818, "body": "Is this a C or C++ question?"}, {"owner": {"reputation": 5, "user_id": 4256104, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e5bcca934e4d8ea27bff3f6359d7236e?s=128&d=identicon&r=PG&f=1", "display_name": "photons3432", "link": "https://stackoverflow.com/users/4256104/photons3432"}, "edited": false, "score": 1, "creation_date": 1424886954, "post_id": 28725949, "comment_id": 45738875, "body": "It&#39;s C++, as stated in the tag"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 3, "creation_date": 1424887119, "post_id": 28725949, "comment_id": 45738988, "body": "Then you should provide more information on requirements, cause in C++ it is done different way either by <code>std::function</code> and/or template sort function"}, {"owner": {"reputation": 5, "user_id": 4256104, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e5bcca934e4d8ea27bff3f6359d7236e?s=128&d=identicon&r=PG&f=1", "display_name": "photons3432", "link": "https://stackoverflow.com/users/4256104/photons3432"}, "edited": false, "score": 0, "creation_date": 1424887834, "post_id": 28725949, "comment_id": 45739451, "body": "What other information should I give? I need all of the functions to be called by one function pointer"}, {"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "edited": false, "score": 0, "creation_date": 1424888507, "post_id": 28725949, "comment_id": 45739836, "body": "You might achieve this with a variadic function pointer, such as void (*fun[])(double tab[], ...); However I would suggest perhaps looking at a functor, or a template solution if compile-time resolution is acceptable."}, {"owner": {"reputation": 5, "user_id": 4256104, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e5bcca934e4d8ea27bff3f6359d7236e?s=128&d=identicon&r=PG&f=1", "display_name": "photons3432", "link": "https://stackoverflow.com/users/4256104/photons3432"}, "edited": false, "score": 0, "creation_date": 1424888935, "post_id": 28725949, "comment_id": 45740083, "body": "The problem is that it&#39;s an assignment for algorithimcs classes and we&#39;re forced to use function pointers"}], "answers": [{"owner": {"reputation": 785, "user_id": 2209194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/636aa447c489280566d3ab3e375adb1c?s=128&d=identicon&r=PG", "display_name": "Segmented", "link": "https://stackoverflow.com/users/2209194/segmented"}, "is_accepted": false, "score": 0, "last_activity_date": 1424888773, "creation_date": 1424888773, "answer_id": 28726791, "question_id": 28725949, "link": "https://stackoverflow.com/questions/28725949/different-number-of-arguments-in-function-pointer/28726791#28726791", "title": "Different number of arguments in function pointer", "body": "<p>Strictly speaking I believe a function pointer can store any other function pointer, as long as it is cast back to its original form before being evaluated. So a function pointer could be:</p>\n\n<pre><code>typedef void (*funp)();\nfunp f = (funp)funs2;\nf = (funp)funs1;\n\n((void (*)(double *,long))f)(NULL, 1);\n</code></pre>\n\n<p>That being said, consider a functor or template solution, as it will likely yield better results.</p>\n"}], "owner": {"reputation": 5, "user_id": 4256104, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e5bcca934e4d8ea27bff3f6359d7236e?s=128&d=identicon&r=PG&f=1", "display_name": "photons3432", "link": "https://stackoverflow.com/users/4256104/photons3432"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424888773, "creation_date": 1424886106, "last_edit_date": 1424887223, "question_id": 28725949, "link": "https://stackoverflow.com/questions/28725949/different-number-of-arguments-in-function-pointer", "title": "Different number of arguments in function pointer", "body": "<p>I've got a few sorting functions with a different ammount of arguments, ex:</p>\n\n<p><code>sort1(double tab[], long n        )\n sort2(double tab[], long n, long p)</code>.</p>\n\n<p>I need to write a funtion pointer in which I can call both of those functions. I've managed doing it using two pointers (one for functions with 2 arguments and one for 3 arguments) but got told off. It needs to be one function. This is what I came up with earlier.</p>\n\n<pre><code>void s1(void (*fun[])(double*, long      ), double tab[], long n)\nvoid s2(void (*fun[])(double*, long, long), double tab[], long n)\n</code></pre>\n\n<p>And these are the arrays with function names:</p>\n\n<pre><code>void (*funs1[])(double tab[],         long n) = {bs, is, ss, hs};\nvoid (*funs2[])(double tab[], long p, long n) = {qs, ms};\n</code></pre>\n"}, {"tags": ["c++", "oop", "runtime", "template-classes"], "answers": [{"comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1424885966, "post_id": 28725786, "comment_id": 45738178, "body": "Note that this needs to be a template."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1424886408, "post_id": 28725786, "comment_id": 45738506, "body": "Also you either need a public getter for <code>data</code> if the member is private, or this operator needs to be declared a <code>friend</code> of your class."}], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 1, "last_activity_date": 1424885670, "creation_date": 1424885670, "answer_id": 28725786, "question_id": 28725758, "link": "https://stackoverflow.com/questions/28725758/is-there-any-way-to-print-template-class-object/28725786#28725786", "title": "Is there any way to print template class object", "body": "<p>You need to define your <code>&lt;&lt;</code> operator</p>\n\n<pre><code>std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, LinkedNode const&amp; node)\n{\n    return os &lt;&lt; node.data;\n}\n</code></pre>\n\n<p>This would require that whatever type <code>T</code> is has <code>&lt;&lt;</code> defined.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4602510"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 28725786, "answer_count": 1, "score": 0, "last_activity_date": 1424885793, "creation_date": 1424885564, "last_edit_date": 1424885793, "question_id": 28725758, "link": "https://stackoverflow.com/questions/28725758/is-there-any-way-to-print-template-class-object", "title": "Is there any way to print template class object", "body": "<p>I am trying to create template class for storing different values, for instance, I have a list, which can hold value of any type.   </p>\n\n<pre><code>template&lt;class T&gt;\nclass LinkedNode\n{\nprivate:\n    LinkedNode* next;\n    LinkedNode* previous;\n    T data;\n</code></pre>\n\n<p>Is there any way to print value of data. Or in some way specify that T type should have print method. I a little bit confused, because I came from Java. In Java every class is inherited from Object that has <code>toString()</code> method. How can I print value of T type that will be only resolved in runtime.<br>\nWhat is solution in C++ ? Or I have to use some class as base class (virtual) that will have desired method.<br>\nI would be grateful for any help. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1424885721, "post_id": 28725745, "comment_id": 45737991, "body": "what is <code>MemRead()</code>?"}, {"owner": {"reputation": 33597, "user_id": 2445184, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/0b51ece74c2314ba345a862c4b00d804?s=128&d=identicon&r=PG", "display_name": "cmaster - reinstate monica", "link": "https://stackoverflow.com/users/2445184/cmaster-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1424885806, "post_id": 28725745, "comment_id": 45738054, "body": "&quot;how can I manage cast from const unsigned char* to uint8 *&quot; - just write a cast..."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1424885831, "post_id": 28725745, "comment_id": 45738075, "body": "Is this a misspelling?  My understanding is that the type is <code>uint8_t</code>, note the <i>_t</i> suffix.  Also, did you include the correct header file?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1424885883, "post_id": 28725745, "comment_id": 45738115, "body": "Are you sure, overwriting data which is const ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "edited": false, "score": 2, "creation_date": 1424885928, "post_id": 28725745, "comment_id": 45738152, "body": "Do you understand the point of <code>const</code>? You have a <code>const unsigned char *</code>/<code>const uint8_t *</code>/<code>const uint8 *</code> (however you spell it) that points to some data that you promised you wouldn&#39;t modify. You then attempt to modify it. Of <i>course</i> the compiler is going to complain. Re-think your design."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886013, "post_id": 28725745, "comment_id": 45738217, "body": "You must post the calling code, because you seem to have something wrong in it, why would you pass a <code>const unsigned char *</code> to a function named <code>read_data</code>? Please post the caller function."}, {"owner": {"reputation": 471, "user_id": 3966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a2c88e09f3a91a0973b548075547d948?s=128&d=identicon&r=PG&f=1", "display_name": "Equation Solver", "link": "https://stackoverflow.com/users/3966691/equation-solver"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886225, "post_id": 28725745, "comment_id": 45738372, "body": "@iharob , read_data function is just a virtual function that I am extending in my class and cannot be change its arguments."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886250, "post_id": 28725745, "comment_id": 45738390, "body": "Then what is it&#39;s purpose?"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 1, "creation_date": 1424886790, "post_id": 28725745, "comment_id": 45738777, "body": "Why is <code>buf</code> const? As others have mentioned, it&#39;s both nonsense and dangerous to cast away constness, unless you have a very good reason for a hack like this and know exactly what you&#39;re doing (i.e., you wouldn&#39;t be asking this question). Either your API is broken or you&#39;re using it wrong."}], "answers": [{"comments": [{"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 3, "creation_date": 1424885852, "post_id": 28725834, "comment_id": 45738095, "body": "What a bad idea is that... And besides you are casting nothing and also in c++ it is <code>reinterpret_cast&lt;uint8 *&gt;(buf)</code>."}, {"owner": {"reputation": 1306, "user_id": 2807749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3884afad2069925c2c0ca50d49e4b093?s=128&d=identicon&r=PG&f=1", "display_name": "user0815", "link": "https://stackoverflow.com/users/2807749/user0815"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424885920, "post_id": 28725834, "comment_id": 45738148, "body": "Why is that a bad idea?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886024, "post_id": 28725834, "comment_id": 45738226, "body": "@iharob <code>(uint8*)buf</code> is still valid in C++. But you&#39;re right that it&#39;s a horrible idea. I put a comment on the question to explain why."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886072, "post_id": 28725834, "comment_id": 45738256, "body": "@user0815 Because <code>const</code> is there to protect data, so you should not arbitrarily cast constness away, or else way would the variable be <code>const</code> qualified? And also, this answer is wrong because the problems is casting from <code>const unsigned char *</code> to <code>unsigned char *</code> so this doesn&#39;t seem to be the case."}, {"owner": {"reputation": 601, "user_id": 4058347, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51ce55d880bda3d2a21e6f10dfbbb404?s=128&d=identicon&r=PG", "display_name": "SukkoPera", "link": "https://stackoverflow.com/users/4058347/sukkopera"}, "edited": false, "score": 0, "creation_date": 1424886089, "post_id": 28725834, "comment_id": 45738273, "body": "Because C-style casts are frowned upon in C++. C++ introduced <code>reinterpret_cast&lt;&gt;</code>, <code>dynamic_cast&lt;&gt;</code>, <code>static_cast&lt;&gt;</code> and <code>const_cast&lt;&gt;</code> in order to explicitate exactly the type of cast required.."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886134, "post_id": 28725834, "comment_id": 45738303, "body": "@iharob That comment seems to be addressed to user0815, not to me. I&#39;m the one who agreed that it&#39;s a bad idea, user0815 is the one who asked why it&#39;s a bad idea."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 0, "creation_date": 1424886178, "post_id": 28725834, "comment_id": 45738338, "body": "@hvd oh, sorry it&#39;s a little dark here and i got confused..."}, {"owner": {"reputation": 1306, "user_id": 2807749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3884afad2069925c2c0ca50d49e4b093?s=128&d=identicon&r=PG&f=1", "display_name": "user0815", "link": "https://stackoverflow.com/users/2807749/user0815"}, "edited": false, "score": 0, "creation_date": 1424886189, "post_id": 28725834, "comment_id": 45738347, "body": "The different cast types only matter for class types."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4602318"}, "edited": false, "score": 0, "creation_date": 1424886210, "post_id": 28725834, "comment_id": 45738363, "body": "this code works properly for me"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "edited": false, "score": 2, "creation_date": 1424886248, "post_id": 28725834, "comment_id": 45738388, "body": "<code>The different cast types only matter for class types</code> ... uh, what?"}, {"owner": {"reputation": 1306, "user_id": 2807749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3884afad2069925c2c0ca50d49e4b093?s=128&d=identicon&r=PG&f=1", "display_name": "user0815", "link": "https://stackoverflow.com/users/2807749/user0815"}, "edited": false, "score": 0, "creation_date": 1424886347, "post_id": 28725834, "comment_id": 45738458, "body": "I only answered the question the OP was asking without evaluating his purpose. Maybe there are good reasons to do it that way."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "edited": false, "score": 1, "creation_date": 1424886414, "post_id": 28725834, "comment_id": 45738509, "body": "@user0815 No you didn&#39;t, the cast is absolutely unnecessary, because both types are the same, check the <code>aka ... </code> part..."}, {"owner": {"reputation": 471, "user_id": 3966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a2c88e09f3a91a0973b548075547d948?s=128&d=identicon&r=PG&f=1", "display_name": "Equation Solver", "link": "https://stackoverflow.com/users/3966691/equation-solver"}, "edited": false, "score": 0, "creation_date": 1424886962, "post_id": 28725834, "comment_id": 45738881, "body": "@user0815 this solution works for me. thanks"}, {"owner": {"reputation": 471, "user_id": 3966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a2c88e09f3a91a0973b548075547d948?s=128&d=identicon&r=PG&f=1", "display_name": "Equation Solver", "link": "https://stackoverflow.com/users/3966691/equation-solver"}, "edited": false, "score": 0, "creation_date": 1424887039, "post_id": 28725834, "comment_id": 45738932, "body": "I am wondering, how people just voting without any reason."}, {"owner": {"user_type": "does_not_exist", "display_name": "user743382"}, "reply_to_user": {"reputation": 471, "user_id": 3966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a2c88e09f3a91a0973b548075547d948?s=128&d=identicon&r=PG&f=1", "display_name": "Equation Solver", "link": "https://stackoverflow.com/users/3966691/equation-solver"}, "edited": false, "score": 3, "creation_date": 1424887238, "post_id": 28725834, "comment_id": 45739069, "body": "@EquationSolver If this answer works for you, then you didn&#39;t post the actual code you&#39;re having trouble with in your question. Based on what you asked, this answer is completely and utterly useless, and the answerer just got lucky that your question was just as bad. At any rate, even then, even if it compiles, this answer is <i>still</i> a horrible idea as already pointed out."}, {"owner": {"reputation": 50953, "user_id": 1983495, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aMDiK.jpg?s=128&g=1", "display_name": "Iharob Al Asimi", "link": "https://stackoverflow.com/users/1983495/iharob-al-asimi"}, "reply_to_user": {"reputation": 471, "user_id": 3966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a2c88e09f3a91a0973b548075547d948?s=128&d=identicon&r=PG&f=1", "display_name": "Equation Solver", "link": "https://stackoverflow.com/users/3966691/equation-solver"}, "edited": false, "score": 1, "creation_date": 1424887369, "post_id": 28725834, "comment_id": 45739152, "body": "@EquationSolver besides, works doesn&#39;t neessarily mean works, undefined behavior can do nothing sometimes, until the right conditions are met and then you will see the most unexpected behavior you can think of..."}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "reply_to_user": {"reputation": 471, "user_id": 3966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a2c88e09f3a91a0973b548075547d948?s=128&d=identicon&r=PG&f=1", "display_name": "Equation Solver", "link": "https://stackoverflow.com/users/3966691/equation-solver"}, "edited": false, "score": 2, "creation_date": 1424887645, "post_id": 28725834, "comment_id": 45739339, "body": "@EquationSolver &quot;I am wondering, how people just voting without any reason&quot; Simple, there is a reason, you just do not see it. C cast is bad, because leads to very difficult to catch runtime problems. I bet your next question here will be &quot;why my program suddenly crash?&quot;"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "reply_to_user": {"reputation": 471, "user_id": 3966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a2c88e09f3a91a0973b548075547d948?s=128&d=identicon&r=PG&f=1", "display_name": "Equation Solver", "link": "https://stackoverflow.com/users/3966691/equation-solver"}, "edited": false, "score": 1, "creation_date": 1424887665, "post_id": 28725834, "comment_id": 45739353, "body": "@EquationSolver I sure hope you&#39;re not going to be using this program for anything important."}], "owner": {"reputation": 1306, "user_id": 2807749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3884afad2069925c2c0ca50d49e4b093?s=128&d=identicon&r=PG&f=1", "display_name": "user0815", "link": "https://stackoverflow.com/users/2807749/user0815"}, "is_accepted": true, "score": -5, "last_activity_date": 1424887397, "last_edit_date": 1424887397, "creation_date": 1424885804, "answer_id": 28725834, "question_id": 28725745, "link": "https://stackoverflow.com/questions/28725745/how-can-i-cast-const-unsigned-char-to-uint8/28725834#28725834", "title": "How can I cast const unsigned char * to uint8 *", "body": "<p>Simply prepend <code>(uint8*)</code> to your <code>buf</code> argument:</p>\n\n<p><code>MemRead (addr, (uint8*)buf, nbytes);</code></p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I overlooked that the <code>buf</code> pointer is not declared as <code>const</code>. The cast at this point is unnecessary as stated in some comments. However casting can be done by prepending <code>(uint8*)</code>. If this is good practice is another question.</p>\n"}], "owner": {"reputation": 471, "user_id": 3966691, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a2c88e09f3a91a0973b548075547d948?s=128&d=identicon&r=PG&f=1", "display_name": "Equation Solver", "link": "https://stackoverflow.com/users/3966691/equation-solver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1172, "favorite_count": 0, "closed_date": 1424904494, "accepted_answer_id": 28725834, "answer_count": 1, "score": -4, "last_activity_date": 1424887397, "creation_date": 1424885526, "last_edit_date": 1424886438, "question_id": 28725745, "link": "https://stackoverflow.com/questions/28725745/how-can-i-cast-const-unsigned-char-to-uint8", "closed_reason": "Needs details or clarity", "title": "How can I cast const unsigned char * to uint8 *", "body": "<p>I am using a API function where data should be passed as (uint8 *) type.\nBut I am getting data of type (const unsigned char *) form.\nHere is my sample implementation:</p>\n\n<pre><code>virtual int\n  read_data (uint32 addr, unsigned char *buf, size_t *nbytes)\n    {\n        MemRead (addr, buf, nbytes);\n        return 0;\n    } \n</code></pre>\n\n<p>getting following error:\n</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>error: invalid conversion from 'const unsigned char*' to \n                                          'uint8* {aka unsigned char*}' [-fpermissive]\n</code></pre>\n\n<p>so, how can I manage cast from const unsigned char* to uint8 *.</p>\n"}, {"tags": ["c++", "objective-c", "regex"], "comments": [{"owner": {"reputation": 2495, "user_id": 1507941, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/114b90a751acafeb9d30d2efbb60bf77?s=128&d=identicon&r=PG", "display_name": "Pluto", "link": "https://stackoverflow.com/users/1507941/pluto"}, "edited": false, "score": 0, "creation_date": 1424886093, "post_id": 28725650, "comment_id": 45738278, "body": "See here: <a href=\"http://en.wikipedia.org/wiki/Source-to-source_compiler#LLVM\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Source-to-source_compiler#LLVM</a>"}, {"owner": {"reputation": 1545, "user_id": 582643, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ffee1a8fba13c6f6c658bb3f6b788aa6?s=128&d=identicon&r=PG", "display_name": "sefiroths", "link": "https://stackoverflow.com/users/582643/sefiroths"}, "reply_to_user": {"reputation": 2495, "user_id": 1507941, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/114b90a751acafeb9d30d2efbb60bf77?s=128&d=identicon&r=PG", "display_name": "Pluto", "link": "https://stackoverflow.com/users/1507941/pluto"}, "edited": false, "score": 0, "creation_date": 1424894327, "post_id": 28725650, "comment_id": 45743144, "body": "Yes, you can use LLVM to convert code from any language LLVM supports to C. Note that the generated C code will be very low level (all loops are lowered to gotos, etc) and not very pretty (comments are stripped, original source formatting is totally lost, variables are renamed, expressions are regrouped)...I try to translate with that...hope it works"}], "owner": {"reputation": 1545, "user_id": 582643, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/ffee1a8fba13c6f6c658bb3f6b788aa6?s=128&d=identicon&r=PG", "display_name": "sefiroths", "link": "https://stackoverflow.com/users/582643/sefiroths"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424885268, "creation_date": 1424885268, "question_id": 28725650, "link": "https://stackoverflow.com/questions/28725650/regular-expression-to-translate-header-function-in-obj-c-to-c", "title": "regular expression to translate header function in obj-c to c++", "body": "<p>hi I'm translating a project from obj-c to c++.\nI have seen that no automated tools make this.\nstep by step I'm using regular expression to translate parts of the project.\nI tryed to use</p>\n\n<pre><code>\\-\\((.*)\\)(.*);\n</code></pre>\n\n<p>to translate <code>-(void)initNamesPlist; in void initNamesPlist();</code>\nbut this matches even</p>\n\n<pre><code>-(void)shuffle:(int[])mazzo numberOfCards:(int)n;\n</code></pre>\n\n<p>so I tryed <code>\\-\\((.*)\\)([^:]*);</code> but this matches everything in the project...</p>\n\n<p>how can I match functions without argument?\nhowever there is a better way to translate the project?\nthanks</p>\n"}, {"tags": ["c++", "qt"], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 3080142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8fc289fe9605a1079d5a35e2ec8f54e3?s=128&d=identicon&r=PG&f=1", "display_name": "ionagamed", "link": "https://stackoverflow.com/users/3080142/ionagamed"}, "edited": false, "score": 0, "creation_date": 1424885364, "post_id": 28725661, "comment_id": 45737723, "body": "As I understand, these functions return offsets in the matched substring, aren&#39;t they?"}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "reply_to_user": {"reputation": 447, "user_id": 3080142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8fc289fe9605a1079d5a35e2ec8f54e3?s=128&d=identicon&r=PG&f=1", "display_name": "ionagamed", "link": "https://stackoverflow.com/users/3080142/ionagamed"}, "edited": false, "score": 0, "creation_date": 1424885442, "post_id": 28725661, "comment_id": 45737775, "body": "No, they return the offsets of the matched substring relative to the entire subject string."}, {"owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "reply_to_user": {"reputation": 447, "user_id": 3080142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8fc289fe9605a1079d5a35e2ec8f54e3?s=128&d=identicon&r=PG&f=1", "display_name": "ionagamed", "link": "https://stackoverflow.com/users/3080142/ionagamed"}, "edited": false, "score": 0, "creation_date": 1424885710, "post_id": 28725661, "comment_id": 45737981, "body": "Added an example for clarity."}], "owner": {"reputation": 19628, "user_id": 1873944, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/MaDna.jpg?s=128&g=1", "display_name": "peppe", "link": "https://stackoverflow.com/users/1873944/peppe"}, "is_accepted": true, "score": 3, "last_activity_date": 1424885282, "last_edit_date": 1592644375, "creation_date": 1424885282, "answer_id": 28725661, "question_id": 28725588, "link": "https://stackoverflow.com/questions/28725588/qregularexpression-match-position-in-the-source-string/28725661#28725661", "title": "QRegularExpression match position in the source string", "body": "<p><a href=\"http://doc.qt.io/qt-5/qregularexpressionmatch.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qregularexpressionmatch.html</a> :</p>\n<blockquote>\n<p>In addition, QRegularExpressionMatch returns the substrings captured by the capturing groups in the pattern string. The implicit capturing group with index 0 captures the result of the whole match.</p>\n<p>For each captured substring it is possible to query its starting and ending offsets in the subject string by calling the <strong>capturedStart</strong>() and the <strong>capturedEnd</strong>() function, respectively. The length of each captured substring is available using the capturedLength() function.</p>\n</blockquote>\n<p>Example:</p>\n<pre><code>QRegularExpression re(&quot;\\\\d+&quot;);\nQRegularExpressionMatch match = re.match(&quot;XYZabc123defXYZ&quot;);\nif (match.hasMatch()) {\n    int startOffset = match.capturedStart(); // startOffset == 6\n    int endOffset = match.capturedEnd(); // endOffset == 9\n    // ...\n}\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 3080142, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8fc289fe9605a1079d5a35e2ec8f54e3?s=128&d=identicon&r=PG&f=1", "display_name": "ionagamed", "link": "https://stackoverflow.com/users/3080142/ionagamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1825, "favorite_count": 0, "accepted_answer_id": 28725661, "answer_count": 1, "score": 2, "last_activity_date": 1424885282, "creation_date": 1424885101, "question_id": 28725588, "link": "https://stackoverflow.com/questions/28725588/qregularexpression-match-position-in-the-source-string", "title": "QRegularExpression match position in the source string", "body": "<p>For example I have a QString, and I do the search for mathes in a while. How can I retrieve the position at which the match was in the source string?</p>\n\n<pre><code>QString str = ...;\nQRegularExpression re(...);\nint pos = 0;\nQRegularExpressionMatch match;\nwhile ((match = re.match(str, pos)).hasMatch()) {\n    setting new pos somehow\n    ...\n}\n</code></pre>\n"}, {"tags": ["c++", "fstream"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 7, "creation_date": 1424884832, "post_id": 28725448, "comment_id": 45737382, "body": "Since these are space-separated items, just use a <code>std::ifstream</code> and the <code>&gt;&gt;</code> operator into a <code>std::string</code> variable."}], "answers": [{"owner": {"reputation": 195, "user_id": 4598879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0804833fc4f55c51b042eb05c6cb303a?s=128&d=identicon&r=PG&f=1", "display_name": "hakononakani", "link": "https://stackoverflow.com/users/4598879/hakononakani"}, "is_accepted": false, "score": 0, "last_activity_date": 1424886084, "creation_date": 1424886084, "answer_id": 28725941, "question_id": 28725448, "link": "https://stackoverflow.com/questions/28725448/separate-part-of-a-string-into-more-strings/28725941#28725941", "title": "separate part of a string into more strings", "body": "<p>When using c++, I strongly recommend using the c++ functions as well :)\nTry something like this for parsing your file:</p>\n\n<pre><code>std::ifstream file (\"filename\");\nwhile (file)\n{\n  std::string token;\n  file &gt;&gt; token;\n  // process your token...\n}\n</code></pre>\n\n<p>the >> operator extracts the next sequence of non-whitespace characters from an input stream (have a look: <a href=\"http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/\" rel=\"nofollow\">http://www.cplusplus.com/reference/istream/istream/operator%3E%3E/</a>)</p>\n"}], "owner": {"reputation": 169, "user_id": 1504230, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/28049f77efe31ac9edd0e874bee62a19?s=128&d=identicon&r=PG", "display_name": "Zacharias Hort&#233;n", "link": "https://stackoverflow.com/users/1504230/zacharias-hort%c3%a9n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1424890896, "creation_date": 1424884750, "last_edit_date": 1424890896, "question_id": 28725448, "link": "https://stackoverflow.com/questions/28725448/separate-part-of-a-string-into-more-strings", "title": "separate part of a string into more strings", "body": "<p>I am using the function fscanf_s to make multiple strings from a string that I read from an .obj file. Perhaps I am misusing it i don\u00b4t know but I\u00b4ve tried with fscanf_s(file, \"%s %s %s\\n\", &amp;temp, &amp;temp1, &amp;temp2).</p>\n\n<p>Here is an example:\nf 1//1 14//1 13//1</p>\n\n<p>What I want to do is to store 1//1, 14//1 and 13//1 into 3 separate strings.</p>\n\n<p>I don\u00b4t really care for the fastest way to do it but it would be preferd obviously.</p>\n\n<p>EDIT\nFor some reason ifstream >> operator didn\u00b4t work correctly in my project. I found a solution to my own problem though.</p>\n\n<pre><code>char s1[10];\nchar s2[10];\nchar s3[10];\n\nint matches = fscanf_s(file, \"%s %s %s\", s1, sizeof(s1), s2, sizeof(s2), s3, sizeof(s3));\n</code></pre>\n\n<p>And then using the chars in string constructors.</p>\n"}, {"tags": ["c++", "multithreading", "dll", "mfc"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1424884877, "post_id": 28725404, "comment_id": 45737407, "body": "You might use SendMessage instead of PostMessage (which delivers the data not directly, but delayed)"}, {"owner": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "edited": false, "score": 0, "creation_date": 1424885482, "post_id": 28725404, "comment_id": 45737802, "body": "Some possible issues that you have not addressed: The passed CString* should be deleted in the message handler, not the message sender. CString can be either a char container or wchar_t container. Since you are starting out with a char array try using CStringA instead of CString, to make sure you are not treating char data as wchar_t in the handler."}], "answers": [{"owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "is_accepted": false, "score": 0, "last_activity_date": 1424893978, "creation_date": 1424893978, "answer_id": 28728360, "question_id": 28725404, "link": "https://stackoverflow.com/questions/28725404/mfc-passing-char-buffer-with-postmessage-from-dll/28728360#28728360", "title": "MFC - Passing char buffer with PostMessage From DLL", "body": "<p>What makes me nervous about your post is that you have the tag \"multithreading\".  It makes me nervous about CStrings being allocated and used from different threads.  For that reason, if it was me, I would pass around BSTRs using SysAllocString to allocate the string from the code posting the message, and SysFreeString to free the string from the code receiving the message. My caveat is that I don't know if those APIs are supported on WinCE.</p>\n"}, {"owner": {"reputation": 101, "user_id": 2023352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26c245bd32ac428ecd248dca565e662?s=128&d=identicon&r=PG", "display_name": "Cacadam", "link": "https://stackoverflow.com/users/2023352/cacadam"}, "is_accepted": false, "score": 0, "last_activity_date": 1425070552, "creation_date": 1425070552, "answer_id": 28774107, "question_id": 28725404, "link": "https://stackoverflow.com/questions/28725404/mfc-passing-char-buffer-with-postmessage-from-dll/28774107#28774107", "title": "MFC - Passing char buffer with PostMessage From DLL", "body": "<p>Thanks for all the responses!</p>\n\n<p>I was able to get the initial issue solved by casting a char * to (LPARAM) before sending it through PostMessage(). I was able to access the data using the following code:</p>\n\n<pre><code>char * rx_string = (char *) lParam;\n</code></pre>\n\n<p>I then hit an issue trying to send code a message back from the main program. I ended up using shared memory and critical sections to end up sending messages back, and this would have worked instead of trying to use PostMessage() in the first place.</p>\n"}], "owner": {"reputation": 101, "user_id": 2023352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b26c245bd32ac428ecd248dca565e662?s=128&d=identicon&r=PG", "display_name": "Cacadam", "link": "https://stackoverflow.com/users/2023352/cacadam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1072, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1425070552, "creation_date": 1424884623, "question_id": 28725404, "link": "https://stackoverflow.com/questions/28725404/mfc-passing-char-buffer-with-postmessage-from-dll", "title": "MFC - Passing char buffer with PostMessage From DLL", "body": "<p>I have inherited an old-school MFC Windows CE program, and am having to make some modifications to it.  As part of this I have to pass additional data between disparate parts.  What we have is a Main program that calls into a DLL.  The DLL starts a background process that acts as a TCP server.  When that TCP server received data I need to push it all the way back up to the Main program.</p>\n\n<p>After some research it seems the WINAPI PostMessage function (see FIGURE 1) is the way to go.  When Main launches the DLL it passes in its own HWND.  After the spawned TCP server process receives the data it calls PostMessage with (1) this saved HWND (2) a message ID, (3) wParam is the length of the received data, and (4) the lParam is a pointer to the received data itself.    Pseudocode for both the DLL thread caller, and the main code called, are shown below in FIGURES 2 and 3.</p>\n\n<p>What I'm seeing is that the function IS called in  my RemoteControlTCPMsg function, and the length is correct, BUT my string data is not correct -- weird, corrupted data.  The way I'm packaging the string data is mixed and matched from a few examples, but apparently something was lost in translation.</p>\n\n<p>Could someone please provide a line or two of code that would properly preserve a char buffer when passed via PostMessage from a DLL thread to a main app such as mine?  </p>\n\n<p>Thanks VERY much, I'm sort of at my wits end here.  Any thoughts/insight are appreciated.</p>\n\n<hr>\n\n<p>*** FIGURE 1: PostMessage doc from MSDN</p>\n\n<pre><code>BOOL WINAPI PostMessage(\n  _In_opt_  HWND hWnd,\n  _In_      UINT Msg,\n  _In_      WPARAM wParam,\n  _In_      LPARAM lParam\n);\n</code></pre>\n\n<p>(<a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx</a>)</p>\n\n<hr>\n\n<p>*** FIGURE 2: Pseudocode for the calling code in the DLL background thread:</p>\n\n<pre><code>#define RC_COMMAND_BUFFER_SIZE = 256;\nchar m_Cmd[RC_COMMAND_BUFFER_SIZE];\nint m_CmdLen = 0;\n</code></pre>\n\n<p>(when event occurs, m_Cmd and and m_CmdLen are populated and this is called:)</p>\n\n<pre><code>PostMessage(m_hWnd, MSG_ID, m_CmdLen,(LPARAM)(new CString(m_Cmd, m_CmdLen)));\n</code></pre>\n\n<hr>\n\n<p>*** FIGURE 3: Code for the receiving code in the main code:</p>\n\n<pre><code>int CWAMPropertySheet::RemoteControlTCPMsg(WPARAM wParam, LPARAM lParam)\n{\n\nint length = = (int)wParam;\nCString * rx_string = (CString*) lParam;\n\n// handler code for the received text data and length\n\n}\n</code></pre>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 603, "user_id": 1058673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3ef72ab3f23223342bbb26f53339bed?s=128&d=identicon&r=PG", "display_name": "Marcin Kolny", "link": "https://stackoverflow.com/users/1058673/marcin-kolny"}, "edited": false, "score": 0, "creation_date": 1424884919, "post_id": 28725273, "comment_id": 45737439, "body": "What function do you use to compute good_matches variable?"}, {"owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "reply_to_user": {"reputation": 603, "user_id": 1058673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3ef72ab3f23223342bbb26f53339bed?s=128&d=identicon&r=PG", "display_name": "Marcin Kolny", "link": "https://stackoverflow.com/users/1058673/marcin-kolny"}, "edited": false, "score": 0, "creation_date": 1424885357, "post_id": 28725273, "comment_id": 45737719, "body": "Check out the update to my question."}, {"owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "reply_to_user": {"reputation": 603, "user_id": 1058673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3ef72ab3f23223342bbb26f53339bed?s=128&d=identicon&r=PG", "display_name": "Marcin Kolny", "link": "https://stackoverflow.com/users/1058673/marcin-kolny"}, "edited": false, "score": 0, "creation_date": 1424886367, "post_id": 28725273, "comment_id": 45738478, "body": "I&#39;ve added my matcher code in Update 2"}, {"owner": {"reputation": 1138, "user_id": 4481702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3d1996e9e23c213ead478a86b7e780?s=128&d=identicon&r=PG&f=1", "display_name": "Ha Dang", "link": "https://stackoverflow.com/users/4481702/ha-dang"}, "edited": false, "score": 0, "creation_date": 1424886673, "post_id": 28725273, "comment_id": 45738685, "body": "does it work if you give &#39;matches&#39; (instead of &#39;good_matches&#39;) to the drawMatches function?"}, {"owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "edited": false, "score": 0, "creation_date": 1424886768, "post_id": 28725273, "comment_id": 45738761, "body": "Yes it does work if I use &#39;matches&#39;"}, {"owner": {"reputation": 603, "user_id": 1058673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3ef72ab3f23223342bbb26f53339bed?s=128&d=identicon&r=PG", "display_name": "Marcin Kolny", "link": "https://stackoverflow.com/users/1058673/marcin-kolny"}, "edited": false, "score": 1, "creation_date": 1424894196, "post_id": 28725273, "comment_id": 45743088, "body": "I probably see your bug. Do you know about following relation: descriptors1.rows &gt;= matches.size() ?"}, {"owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "edited": false, "score": 0, "creation_date": 1424899590, "post_id": 28725273, "comment_id": 45746048, "body": "results: descriptors1.rows: 87; matches.size: 72;"}, {"owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "reply_to_user": {"reputation": 603, "user_id": 1058673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3ef72ab3f23223342bbb26f53339bed?s=128&d=identicon&r=PG", "display_name": "Marcin Kolny", "link": "https://stackoverflow.com/users/1058673/marcin-kolny"}, "edited": false, "score": 0, "creation_date": 1424920962, "post_id": 28725273, "comment_id": 45753175, "body": "@MarcinKolny - what did you mean by your last comment?"}, {"owner": {"reputation": 4898, "user_id": 1348388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y17NZ.png?s=128&g=1", "display_name": "Kornel", "link": "https://stackoverflow.com/users/1348388/kornel"}, "edited": false, "score": 0, "creation_date": 1424941067, "post_id": 28725273, "comment_id": 45759998, "body": "What&#39;s the type of your descriptor extractor? As well as do you see <code>-1</code>s between the elements of <code>good_matches[i].queryIdx</code> or <code>good_matches[i].trainIdx</code>?"}, {"owner": {"reputation": 603, "user_id": 1058673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3ef72ab3f23223342bbb26f53339bed?s=128&d=identicon&r=PG", "display_name": "Marcin Kolny", "link": "https://stackoverflow.com/users/1058673/marcin-kolny"}, "edited": false, "score": 0, "creation_date": 1424952250, "post_id": 28725273, "comment_id": 45767001, "body": "@P3d0r, note, that your descriptors1.rows can equal e.g. 40, and matches.size() can be e.g. 20 in that case. So in your loop: for( int i = 0; i &lt; descriptors1.rows; i++ ) {      double dist = matches[i].distance; you&#39;re trying to access to element e.g. matches[30], which actually doesn&#39;t exist. Classic index out of bound error."}, {"owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "edited": false, "score": 0, "creation_date": 1425007652, "post_id": 28725273, "comment_id": 45794847, "body": "Classic. Thanks for the help"}, {"owner": {"reputation": 779, "user_id": 468854, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/13c37fca3786e3eab82797dfa5306832?s=128&d=identicon&r=PG", "display_name": "aronp", "link": "https://stackoverflow.com/users/468854/aronp"}, "edited": false, "score": 1, "creation_date": 1500749122, "post_id": 28725273, "comment_id": 77479507, "body": "drawMatches( im1, keypoints1, im2, keypoints2,  should be drawMatches( im2, keypoints2, im1, keypoints1,"}], "answers": [{"owner": {"reputation": 603, "user_id": 1058673, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/e3ef72ab3f23223342bbb26f53339bed?s=128&d=identicon&r=PG", "display_name": "Marcin Kolny", "link": "https://stackoverflow.com/users/1058673/marcin-kolny"}, "is_accepted": true, "score": 0, "last_activity_date": 1424885797, "creation_date": 1424885797, "answer_id": 28725827, "question_id": 28725273, "link": "https://stackoverflow.com/questions/28725273/opencv-drawmatches-error/28725827#28725827", "title": "OpenCV drawMatches error", "body": "<p>In general, good_matches is an array, which binds points from both <em>keypoints1</em> and <em>keypoints2</em> array. So point <em>keypoints1[good_matches[m].queryIdx]</em> corresponds to point <em>keypoints2[good_matches[m].trainIdx]</em>.\nAs you can see, assertions in opencv code have sense. </p>\n\n<p>It seems, the problem is in  <em>matches</em> array.</p>\n"}, {"owner": {"reputation": 38, "user_id": 4019620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KaIGq.jpg?s=128&g=1", "display_name": "Mehmet", "link": "https://stackoverflow.com/users/4019620/mehmet"}, "is_accepted": false, "score": 1, "last_activity_date": 1485809697, "last_edit_date": 1485809697, "creation_date": 1431553889, "answer_id": 30225795, "question_id": 28725273, "link": "https://stackoverflow.com/questions/28725273/opencv-drawmatches-error/30225795#30225795", "title": "OpenCV drawMatches error", "body": "<p>I think you should clear the contents of the <code>good_matches</code> vector with the <code>good_matches.clear()</code> command for each iteration (if you use <code>while(1)</code> loop for get frame from camera, you will write <code>good_matches.clear()</code> command after <code>while(1)</code> loop:</p>\n\n<pre><code>while(1) {\n     good_matches.clear();\n     // other code ...\n}\n</code></pre>\n"}, {"owner": {"reputation": 725, "user_id": 5520444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a77fa6d827bb120c239055c890d2be70?s=128&d=identicon&r=PG&f=1", "display_name": "Tony Power", "link": "https://stackoverflow.com/users/5520444/tony-power"}, "is_accepted": false, "score": 2, "last_activity_date": 1573838836, "creation_date": 1573838836, "answer_id": 58881955, "question_id": 28725273, "link": "https://stackoverflow.com/questions/28725273/opencv-drawmatches-error/58881955#58881955", "title": "OpenCV drawMatches error", "body": "<p>The problem has to do with the order you matched the points.\nIf you did, e.g.:</p>\n\n<pre><code>match(right_desc, left_desc)\n</code></pre>\n\n<p>function <code>drawMatches</code> will have to follow the same order. This will work (considering my matching example):</p>\n\n<pre><code>drawMatches(right_rgb, right_pts, left_rgb, left_pts, matches)\n</code></pre>\n\n<p>this will produce the error you have:</p>\n\n<pre><code>drawMatches(left_rgb, left_pts, right_rgb, right_pts, matches)\n</code></pre>\n\n<p>The order will also affect what is query and what is train (i.e. <code>queryIdx</code> and <code>trainIdx</code>), when you access the coordinates of the matches. Note that <code>right_pts</code> and <code>left_pts</code> are the keypoints described by <code>right_desc</code> and <code>left_desc</code> respectively.</p>\n\n<p>Hope it helps someone.</p>\n"}, {"owner": {"reputation": 1, "user_id": 14482768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b29aec4433aedfaa3f6b3dfcb2cb20d2?s=128&d=identicon&r=PG&f=1", "display_name": "GeneralShark", "link": "https://stackoverflow.com/users/14482768/generalshark"}, "is_accepted": false, "score": 0, "last_activity_date": 1603170913, "creation_date": 1603170913, "answer_id": 64438863, "question_id": 28725273, "link": "https://stackoverflow.com/questions/28725273/opencv-drawmatches-error/64438863#64438863", "title": "OpenCV drawMatches error", "body": "<p>I don't agree with answers above.</p>\n<p>Parameters you pass into  <code>matcher.match(dscp1, dscp2, matches)</code> and <code>drawMatch(img1, kp1, img2, kp2, good_matches)</code> are corresponding (they are both matching every descriptor in <code>keypoints1</code> from <code>keypoints2</code>, <code>keypoints1</code> is called query set while <code>keypoints2</code> is called train set.)</p>\n<p>The error might be caused by the wrong <code>keypoints1</code> and <code>keypoints2</code> you pass into <code>drawMatch()</code>. Check whether the index in <code>good_matches</code> correspond with kp in <code>keypoints1</code>. (If you reduce the number of <code>keypoints</code> while picking good matches, this occasion could happen.)</p>\n"}], "owner": {"reputation": 779, "user_id": 4517388, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/93e4cca4db45e153fd749e1a4563da88?s=128&d=identicon&r=PG&f=1", "display_name": "P3d0r", "link": "https://stackoverflow.com/users/4517388/p3d0r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8710, "favorite_count": 1, "accepted_answer_id": 28725827, "answer_count": 4, "score": 4, "last_activity_date": 1603170913, "creation_date": 1424884212, "last_edit_date": 1424886321, "question_id": 28725273, "link": "https://stackoverflow.com/questions/28725273/opencv-drawmatches-error", "title": "OpenCV drawMatches error", "body": "<p>My code consists of a section where I sort through a set of matches and define good matches based on distance. When I try to drawMatches, I receive an error:</p>\n\n<pre><code>OpenCV Error: Assertion failed (i1 &gt;= 0 &amp;&amp; i1 &lt; static_cast&lt;int&gt;(keypoints1.size())) in drawMatches, file /home/user/OpenCV/opencv-2.4.10/modules/features2d/src/draw.cpp, line 207\nterminate called after throwing an instance of 'cv::Exception'\n  what():  /home/user/OpenCV/opencv-2.4.10/modules/features2d/src/draw.cpp:207: error: (-215) i1 &gt;= 0 &amp;&amp; i1 &lt; static_cast&lt;int&gt;(keypoints1.size()) in function drawMatches\n</code></pre>\n\n<p>draw.cpp file shows:</p>\n\n<pre><code>// draw matches\nfor( size_t m = 0; m &lt; matches1to2.size(); m++ )\n{\n     if( matchesMask.empty() || matchesMask[m] )\n     {\n          int i1 = matches1to2[m].queryIdx;\n          int i2 = matches1to2[m].trainIdx;\n          CV_Assert(i1 &gt;= 0 &amp;&amp; i1 &lt; static_cast&lt;int&gt;(keypoints1.size()));\n          CV_Assert(i2 &gt;= 0 &amp;&amp; i2 &lt; static_cast&lt;int&gt;(keypoints2.size()));\n          const KeyPoint &amp;kp1 = keypoints1[i1], &amp;kp2 = keypoints2[i2];\n          _drawMatch( outImg, outImg1, outImg2, kp1, kp2, matchColor, flags );\n     }\n}\n</code></pre>\n\n<p>My drawMatches call follows:</p>\n\n<pre><code>Mat matchesImage;\n\ndrawMatches( im1, keypoints1, im2, keypoints2,\n    good_matches, matchesImage, Scalar::all(-1), Scalar::all(-1),\n    vector&lt;char&gt;(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );\n</code></pre>\n\n<p>Can anybody help explain this error to me?</p>\n\n<p><strong>Update:</strong> </p>\n\n<p>Here is my code for the good_matches calculation</p>\n\n<pre><code>double min_dist = 10000;\ndouble max_dist = 0;\n\n//-- Quick calculation of max and min distances between keypoints\nfor( int i = 0; i &lt; descriptors1.rows; i++ ) { \n    double dist = matches[i].distance;\n    if( dist &lt; min_dist ) min_dist = dist;\n    if( dist &gt; max_dist ) max_dist = dist;\n}\n\nprintf(\"-- Max dist : %f \\n\", max_dist );\nprintf(\"-- Min dist : %f \\n\", min_dist );\n\n//-- Draw only \"good\" matches\nstd::vector&lt; DMatch &gt; good_matches;\n\nfor( int i = 0; i &lt; descriptors1.rows; i++ ) {\n    if( matches[i].distance &lt;= max(2*min_dist, 0.02) ) { \n        good_matches.push_back( matches[i]); \n    }\n}\n\nfor( int i = 0; i &lt; (int)good_matches.size(); i++ ) {\n    printf( \"-- Good Match [%d] Keypoint 1: %d  -- Keypoint 2: %d  \\n\", \n        i, good_matches[i].queryIdx, good_matches[i].trainIdx ); \n}\n\ncout &lt;&lt; \"number of good matches: \" &lt;&lt; (int)good_matches.size() &lt;&lt; endl;;\n\n//Draw matches and save file\nMat matchesImage;\n\ndrawMatches( im1, keypoints1, im2, keypoints2,\n    good_matches, matchesImage, Scalar::all(-1), Scalar::all(-1),\n    vector&lt;char&gt;(), DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );\n</code></pre>\n\n<p><strong>Update 2:</strong></p>\n\n<pre><code>BFMatcher matcher(NORM_L2, true);\nvector&lt;DMatch&gt; matches;\nmatcher.match(descriptors1, descriptors2, matches);\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "webserver", "mongoose-web-server"], "comments": [{"owner": {"reputation": 131, "user_id": 3319335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0df58b8f62b10b18afd62ff02e01a5f?s=128&d=identicon&r=PG&f=1", "display_name": "Milan", "link": "https://stackoverflow.com/users/3319335/milan"}, "edited": false, "score": 0, "creation_date": 1424884481, "post_id": 28725189, "comment_id": 45737147, "body": "The problem is: mythread.join(); is waiting until mythread will finish. So whatever you will do inside the thread, this code will always run is sequence. Remove the join."}, {"owner": {"reputation": 58995, "user_id": 1322972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/puZFr.png?s=128&g=1", "display_name": "WhozCraig", "link": "https://stackoverflow.com/users/1322972/whozcraig"}, "edited": false, "score": 1, "creation_date": 1424886302, "post_id": 28725189, "comment_id": 45738424, "body": "In other words, <code>std::thread mythread(usleep, 2*5000000); mythread.join();</code> is no better than a straight up synchronous function call, and in fact actually <i>worse</i>."}, {"owner": {"reputation": 11, "user_id": 4606737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646e3e69536217c46167eb7d43377d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Ilareb", "link": "https://stackoverflow.com/users/4606737/ilareb"}, "edited": false, "score": 0, "creation_date": 1424888526, "post_id": 28725189, "comment_id": 45739848, "body": "Simply removing the join without detach doesn&#39;t compile. Thanks though!"}], "answers": [{"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": false, "score": 0, "last_activity_date": 1424885182, "last_edit_date": 1424885182, "creation_date": 1424884766, "answer_id": 28725453, "question_id": 28725189, "link": "https://stackoverflow.com/questions/28725189/multithreading-and-parallel-processes-with-c/28725453#28725453", "title": "Multithreading and parallel processes with c++", "body": "<h2>Caveat: I'm not familiar with mongoose</h2>\n\n<p>My assumptions:</p>\n\n<ul>\n<li>The <code>serve</code> function is polling for incoming connections</li>\n</ul>\n\n<hr>\n\n<p>If the thread executing <code>mg_poll_server</code> is the same thread that triggers the call to <code>ev_handler</code> then your problem is the fact that <code>ev_handler</code> calls <code>myEvent</code> which starts a long running operation and blocks the thread (i.e., by calling <code>join</code>). In this case you're also blocking the thread which is handling the incoming connections (i.e., A subsequent client must wait for the first client to finish their work), which seems is the behavior you describe seeing.</p>\n\n<p>I'm not sure what the real <em>task</em> is supposed to do so I can't say for sure how you should fix this. Perhaps in your use-case it may be possible to call <code>detach</code> otherwise you might keep track of executing threads and defer calling <code>join</code> on them until the server is shutdown.</p>\n"}, {"owner": {"reputation": 11, "user_id": 4606737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646e3e69536217c46167eb7d43377d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Ilareb", "link": "https://stackoverflow.com/users/4606737/ilareb"}, "is_accepted": false, "score": 0, "last_activity_date": 1424889657, "last_edit_date": 1424889657, "creation_date": 1424888433, "answer_id": 28726691, "question_id": 28725189, "link": "https://stackoverflow.com/questions/28725189/multithreading-and-parallel-processes-with-c/28726691#28726691", "title": "Multithreading and parallel processes with c++", "body": "<p>James Adkison is absolutely right. So, if instead the beginning of the code looks like this:</p>\n\n<pre><code>void someFunc(struct mg_connection *conn){\n    usleep(2*5000000);\n    std::cout &lt;&lt; \"hello!\" &lt;&lt; std::endl;\n    std::cout&lt;&lt; \"This finished from server instance #\"&lt;&lt;conn&lt;&lt;std::endl;\n    mg_send_header(conn, \"Content-Type\", \"application/json\");\n    mg_printf_data(conn, \"{\\\"message\\\": \\\"This is a reply from server instance # %s\\\"}\",\n    // (char *) conn-&gt;server_param); \n}\nvoid myEvent(struct mg_connection *conn){\n    std::thread mythread(someFunc,conn);\n    mythread.detach();\n    std::cout&lt;&lt; \"This is a reply from server instance #\"&lt;&lt;(char *) conn-&gt;server_param&lt;&lt;std::endl;   \n}\n\nstatic int ev_handler(struct mg_connection *conn, enum mg_event ev) {\n    if (ev == MG_REQUEST) {\n        myEvent(conn);\n\n        return MG_TRUE;\n    } else if (ev == MG_AUTH) {\n    //.... exactly as before\n    //....\n</code></pre>\n\n<p>then the program works. Basically the difference is replacing <code>.join()</code> with <code>.detach()</code>. someFunc is running now in parallel for 2 users -- so that's great!. Thanks!</p>\n"}, {"owner": {"reputation": 777, "user_id": 49889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b4f59071f058144327338eef555593c?s=128&d=identicon&r=PG", "display_name": "valenok", "link": "https://stackoverflow.com/users/49889/valenok"}, "is_accepted": false, "score": 2, "last_activity_date": 1429803058, "creation_date": 1429803058, "answer_id": 29828012, "question_id": 28725189, "link": "https://stackoverflow.com/questions/28725189/multithreading-and-parallel-processes-with-c/29828012#29828012", "title": "Multithreading and parallel processes with c++", "body": "<p>Long running requests should be handled like this:</p>\n\n<pre><code>static void thread_func(struct mg_connection *conn) {\n  sleep(60);  // simulate long processing\n  conn-&gt;user_data = \"done\";  // Production code must not do that.\n                             // Other thread must never access connection\n                             // structure directly. This example is just\n                             // for demonstration.\n}\n\nstatic int ev_handler(struct mg_connection *conn, enum mg_event ev) {\n  switch (ev) {\n    case MG_REQUEST:\n      conn-&gt;user_data = \"doing...\";\n      spawn_thread(thread_func, conn);\n      return MG_MORE;  // Important! Signal Mongoose we are not done yet\n    case MG_POLL:\n      if (conn-&gt;user_data != NULL &amp;&amp; !strcmp(conn-&gt;user_data, \"done\")) {\n        mg_printf(conn, \"HTTP/1.0 200 OK\\n\\n  Done !\");\n        return MG_TRUE;  // Signal we're finished. Mongoose can close this connection\n      }\n      return MG_FALSE;  // Still not done\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4606737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/646e3e69536217c46167eb7d43377d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Ilareb", "link": "https://stackoverflow.com/users/4606737/ilareb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1323, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1429803058, "creation_date": 1424884011, "last_edit_date": 1424996146, "question_id": 28725189, "link": "https://stackoverflow.com/questions/28725189/multithreading-and-parallel-processes-with-c", "title": "Multithreading and parallel processes with c++", "body": "<p>I would like to create a c++ webserver that will perform a task for each user that lands on my website. Since the task might be computationally heavy (for now just a long sleep), I'd like to handle each user on a different thread. I'm using mongoose to set up a webserver.</p>\n\n<p>The different processes (in my code below just one, aka server1) are set up correctly and seem to function correctly. However, the threads seem to be queuing one after the other so if 2 users hit the end point, the second user must wait until the first user finishes. What am I missing? Do the threads run out of scope? Is there a \"thread-manager\" that I should be using?</p>\n\n<pre><code>#include \"../../mongoose.h\"\n#include &lt;unistd.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;thread&gt;\n\n\n//what happens whenever someone lands on an endpoint\nvoid myEvent(struct mg_connection *conn){\n    //long delay...\n    std::thread mythread(usleep, 2*5000000);\n    mythread.join();\n    mg_send_header(conn, \"Content-Type\", \"text/plain\");\n    mg_printf_data(conn, \"This is a reply from server instance # %s\",\n    (char *) conn-&gt;server_param);\n}\n\nstatic int ev_handler(struct mg_connection *conn, enum mg_event ev) {\n    if (ev == MG_REQUEST) {\n        myEvent(conn);\n        return MG_TRUE;\n    } else if (ev == MG_AUTH) {\n        return MG_TRUE;\n    } else {\n        return MG_FALSE; \n    }\n}\n\nstatic void *serve(void *server) {\n    for (;;) mg_poll_server((struct mg_server *) server, 1000);\n    return NULL;\n}\n\nint main(void) {\n    struct mg_server *server1;\n    server1 = mg_create_server((void *) \"1\", ev_handler);\n    mg_set_option(server1, \"listening_port\", \"8080\");\n    mg_start_thread(serve, server1);\n    getchar();\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "boolean"], "comments": [{"owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "edited": false, "score": 6, "creation_date": 1424884067, "post_id": 28725159, "comment_id": 45736880, "body": "The statement <code>haveRead == true;</code> isn&#39;t an assignment. Enable more warnings by the compiler, and it should warn you about it."}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1424884132, "post_id": 28725159, "comment_id": 45736917, "body": "What happens if the user enters a choice not in the switch statement?"}], "answers": [{"comments": [{"owner": {"reputation": 9112, "user_id": 2721883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5c8448407184c2a90cc46db06c159ca?s=128&d=identicon&r=PG&f=1", "display_name": "clcto", "link": "https://stackoverflow.com/users/2721883/clcto"}, "edited": false, "score": 2, "creation_date": 1424884304, "post_id": 28725216, "comment_id": 45737029, "body": "Or, it could be simplified to <code>haveRead = (toupper(ch) == &#39;Y&#39;);</code>"}, {"owner": {"reputation": 9, "user_id": 4202447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8683a6fa24eb427a61908b75fc8a7c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas BH", "link": "https://stackoverflow.com/users/4202447/andreas-bh"}, "edited": false, "score": 0, "creation_date": 1424885019, "post_id": 28725216, "comment_id": 45737502, "body": "Thanks! My genres are in an enum, that&#39;s why they&#39;re not in quotes (though I suppose they could just be strings)."}], "owner": {"reputation": 44939, "user_id": 1570534, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/7ZjmD.jpg?s=128&g=1", "display_name": "Hanky Panky", "link": "https://stackoverflow.com/users/1570534/hanky-panky"}, "is_accepted": true, "score": 5, "last_activity_date": 1424885055, "last_edit_date": 1424885055, "creation_date": 1424884054, "answer_id": 28725216, "question_id": 28725159, "link": "https://stackoverflow.com/questions/28725159/boolean-value-always-false/28725216#28725216", "title": "Boolean value always false", "body": "<pre><code>haveRead == true\n</code></pre>\n\n<p>Is a comparison, not an assignment. Remove one = from both clauses</p>\n\n<pre><code>if(toupper(ch) == 'Y')\n    haveRead = true;\nelse\n    haveRead = false;\n</code></pre>\n"}, {"owner": {"reputation": 4195, "user_id": 2432477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a516bc16804edd78d8f6c2a7e06f07b?s=128&d=identicon&r=PG&f=1", "display_name": "nouney", "link": "https://stackoverflow.com/users/2432477/nouney"}, "is_accepted": false, "score": 1, "last_activity_date": 1424884119, "creation_date": 1424884119, "answer_id": 28725243, "question_id": 28725159, "link": "https://stackoverflow.com/questions/28725159/boolean-value-always-false/28725243#28725243", "title": "Boolean value always false", "body": "<p>The operator <code>==</code> is a comparison operator, used to compare things. Here you just want to assign, so you need the assignment operator that is <code>=</code>.</p>\n"}], "owner": {"reputation": 9, "user_id": 4202447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8683a6fa24eb427a61908b75fc8a7c6f?s=128&d=identicon&r=PG&f=1", "display_name": "Andreas BH", "link": "https://stackoverflow.com/users/4202447/andreas-bh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "closed_date": 1424915791, "accepted_answer_id": 28725216, "answer_count": 2, "score": -3, "last_activity_date": 1424915803, "creation_date": 1424883944, "last_edit_date": 1424915803, "question_id": 28725159, "link": "https://stackoverflow.com/questions/28725159/boolean-value-always-false", "closed_reason": "Not suitable for this site", "title": "Boolean value always false", "body": "<p>I'm creating a book archival program, and one of the data members says if the book is read or not. However I can't get the program to write \"Yes\" to the screen, so I'm guessing it is never changed, even though I say 'Y' when asked if I have read the book. Can anyone see what I have done wrong?</p>\n\n<pre><code>cout &lt;&lt; \"\\n\\tEnter title of book: \";\ncin &gt;&gt; title;\ncout &lt;&lt; \"\\tEnter author of book: \";\ncin &gt;&gt; author;\ncout &lt;&lt; \"\\tEnter genre of book (1. Crime, 2. Sports, 3. Science, 4. Drama): \";\ncin &gt;&gt; choice;\nswitch(choice)\n{\n    case 1: genre = crime;   break;\n    case 2: genre = sports;  break;\n    case 3: genre = science; break;\n    case 4: genre = drama;   break;\n}\ncout &lt;&lt; \"\\tEnter year of publication: \";\ncin &gt;&gt; yearPublished;\ncout &lt;&lt; \"\\tHave you read the book? (Y/N): \";\ncin &gt;&gt; ch;\nif(toupper(ch) == 'Y')\n{\n    haveRead == true;\n}\nelse\n{\n    haveRead == false;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "visual-c++"], "answers": [{"comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1424884563, "post_id": 28725298, "comment_id": 45737197, "body": "Oh, wouldn&#39;t that be grand though. :) But I&#39;m not the maker of this library.  The <code>base1</code>, <code>base2</code> and <code>derived</code> are for here only, not in actual production.  Thanks."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1424884721, "post_id": 28725298, "comment_id": 45737305, "body": "BTW, what is the MSVC extension you are referring to?  Should I just use <code>FUNC body</code> instead of <code>FUNC const &amp; body</code>?  Seemed to have worked with another one I made that used <code>FUNC&amp; body</code>."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1424888830, "post_id": 28725298, "comment_id": 45740029, "body": "@Adrian MSVC allows non-const lvalue references to bind to temporaries. The style of the standard library is to pass functors by value, but you can use <code>const FUNC&amp;</code> or <code>FUNC&amp;&amp;</code> (forwarding reference) too."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1424889902, "post_id": 28725298, "comment_id": 45740615, "body": "Ah, good to know.  What would the point of a forward reference be for though?  What exactly would I be moving?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1424890009, "post_id": 28725298, "comment_id": 45740660, "body": "@Adrian When you want to accept both lvalues and rvalues, but identity is important (so can&#39;t copy/pass by value), and <code>operator()</code> of the functor can be non-const (so can&#39;t pass by const reference). <code>std::shuffle</code> is an example - it takes its RNG by forwarding reference. It&#39;s not really used for forwarding in this case; Scott Meyers&#39; old &quot;universal reference&quot; terminology is probably more fitting."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1424890437, "post_id": 28725298, "comment_id": 45740878, "body": "Hmmmm, interesting.  I&#39;ll have to look that up later. Thanks."}], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 6, "last_activity_date": 1424916337, "last_edit_date": 1424916337, "creation_date": 1424884281, "answer_id": 28725298, "question_id": 28725088, "link": "https://stackoverflow.com/questions/28725088/is-it-possible-to-get-a-template-to-use-a-class-and-a-member-function-of-that-cl/28725298#28725298", "title": "Is it possible to get a template to use a class and a member function of that class?", "body": "<p>You have two bugs. You take the functor by non-const lvalue reference - <code>FUNC&amp; body</code> - which doesn't bind to a temporary like a lambda; this was hidden by a terrible MSVC extension that allows such bindings. You should accept the function object by value (the way it is usually done by the standard library), by const lvalue reference (if copying is expensive and/or identity is important), or by forwarding reference (if identity is important and <code>operator()</code> can be non-<code>const</code>).</p>\n\n<p>Second is operator precedence. The postfix function call operator has higher precedence than <code>.*</code> and <code>-&gt;*</code>. <code>container-&gt;*GetSize()</code> is <code>container-&gt;*(GetSize())</code>; you want <code>(container-&gt;*GetSize)()</code>.</p>\n\n<p>I'm also not sure about this design. It's probably better to provide a uniform interface, and simply do, e.g., <code>container.size()</code> and <code>container.at(i)</code> than using this tortured system of pointer-to-member-functions.</p>\n"}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 28725298, "answer_count": 1, "score": 2, "last_activity_date": 1424916337, "creation_date": 1424883759, "question_id": 28725088, "link": "https://stackoverflow.com/questions/28725088/is-it-possible-to-get-a-template-to-use-a-class-and-a-member-function-of-that-cl", "title": "Is it possible to get a template to use a class and a member function of that class?", "body": "<p>I'm trying to make a <code>for_each</code> function for a generic object that uses an size function and an item index function.  But I'm having some difficulty with the syntax.</p>\n\n<p>This is what I have so far (starting at line 128):</p>\n\n<pre><code>class base1\n{\nprotected:\n    std::vector&lt;int&gt; items;\npublic:\n    base1()\n        : items({1,2,3})\n    {\n    }\n\n    int GetCount() const\n    {\n    }\n};\n\nclass base2 : public base1\n{\npublic:\n    base2()\n        : base1()\n    {\n    }\n\n    int GetItem(int i) const\n    {\n        return items[i];\n    }\n};\n\nclass derived : public base2\n{\npublic:\n    derived()\n        : base2()\n    {\n    }\n};\n\ntemplate &lt;typename CONTAINER, typename CONTAINER_BASE1, typename CONTAINER_BASE2, typename SIZE, typename CONTAINED, typename FUNC&gt;\nvoid for_each(CONTAINER* container, SIZE (CONTAINER_BASE1::*GetSize)() const, CONTAINED (CONTAINER_BASE2::*GetItem)(SIZE) const, FUNC&amp; body)\n{\n    for (SIZE i = 0; i &lt; container-&gt;*GetSize(); ++i)\n    {\n        body(container-&gt;*GetItem(i));\n    }\n}\n\nvoid fn()\n{\n    derived x;\n    for_each(&amp;x, &amp;derived::GetCount, &amp;derived::GetItem, [](int i){\n        ++i;\n    });\n}\n</code></pre>\n\n<p>Right now, I get an error from VC++ 2013 stating:</p>\n\n<pre><code>1&gt;d:\\projects\\test\\test.cpp(169): error C2064: term does not evaluate to a function taking 0 arguments\n1&gt;          d:\\projects\\test\\test.cpp(180) : see reference to function template instantiation 'void for_each&lt;derived,base1,base2,int,int,fn::&lt;lambda_862ea397905775f7e094cde6fe9b462c&gt;&gt;(CONTAINER *,SIZE (__thiscall base1::* )(void) const,CONTAINED (__thiscall base2::* )(SIZE) const,FUNC &amp;)' being compiled\n1&gt;          with\n1&gt;          [\n1&gt;              CONTAINER=derived\n1&gt;  ,            SIZE=int\n1&gt;  ,            CONTAINED=int\n1&gt;  ,            FUNC=fn::&lt;lambda_862ea397905775f7e094cde6fe9b462c&gt;\n1&gt;          ]\n1&gt;d:\\projects\\test\\test.cpp(171): error C2064: term does not evaluate to a function taking 1 arguments\n</code></pre>\n\n<p>Any ideas as to what the problem is?</p>\n"}, {"tags": ["c++", "templates", "c++11"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 5, "creation_date": 1424883412, "post_id": 28724925, "comment_id": 45736456, "body": "bar is not virtual and(!) you can not make a template function virtual (the number of possible instantiations is unknown)"}], "answers": [{"comments": [{"owner": {"reputation": 17373, "user_id": 75517, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/404fabbcb3e36bac8da7d1904d260ec0?s=128&d=identicon&r=PG", "display_name": "chmike", "link": "https://stackoverflow.com/users/75517/chmike"}, "edited": false, "score": 2, "creation_date": 1424883575, "post_id": 28724973, "comment_id": 45736558, "body": "I don&#39;t think so. A Dummy object is instantiate and foo() is defined in Dummy."}, {"owner": {"reputation": 381, "user_id": 1084199, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c430e428b9aa631b9c7734c4446505fe?s=128&d=identicon&r=PG", "display_name": "Vladislavs Burakovs", "link": "https://stackoverflow.com/users/1084199/vladislavs-burakovs"}, "edited": false, "score": 0, "creation_date": 1424883613, "post_id": 28724973, "comment_id": 45736579, "body": "I am providing a definition to foo. In fact, it&#39;s being called correctly and no problem with compilation arises. I&#39;m asking about <b>bar</b>."}], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 0, "last_activity_date": 1424883459, "creation_date": 1424883459, "answer_id": 28724973, "question_id": 28724925, "link": "https://stackoverflow.com/questions/28724925/linker-does-not-see-template-function-defined-in-a-base-pure-virtual-class/28724973#28724973", "title": "Linker does not see template function defined in a base (pure virtual) class", "body": "<p>You're calling <code>PureDUmmy::bar</code> and haven't provided a definition of it.</p>\n\n<p>The in-practice result is a linking error.</p>\n\n<p>In order to be able to override a function in a derived class for runtime polymorphism (as you're apparently attempting with the call via a pointer to base class), it needs to be <code>virtual</code>. C++ does not support templating of a <code>virtual</code> function. One possible solution, applicable in some cases, is to replace runtime polymorphism with compile time polymorphism, and use CRTP.</p>\n"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 2, "last_activity_date": 1424883741, "creation_date": 1424883741, "answer_id": 28725076, "question_id": 28724925, "link": "https://stackoverflow.com/questions/28724925/linker-does-not-see-template-function-defined-in-a-base-pure-virtual-class/28725076#28725076", "title": "Linker does not see template function defined in a base (pure virtual) class", "body": "<p>The static type of <code>pdummy</code> is <code>PureDummy *</code> so the compiler will first check the <code>PureDummy</code> class for such a function. One exists and is accessible so it will attempt the call. The function is non-virtual (templates can't be virtual) so it will attempt to call <code>PureDummy::bar</code>. This function has no definition so the link fails with the undefined symbol error.</p>\n"}], "owner": {"reputation": 381, "user_id": 1084199, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c430e428b9aa631b9c7734c4446505fe?s=128&d=identicon&r=PG", "display_name": "Vladislavs Burakovs", "link": "https://stackoverflow.com/users/1084199/vladislavs-burakovs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 28725076, "answer_count": 2, "score": 0, "last_activity_date": 1424883741, "creation_date": 1424883322, "question_id": 28724925, "link": "https://stackoverflow.com/questions/28724925/linker-does-not-see-template-function-defined-in-a-base-pure-virtual-class", "title": "Linker does not see template function defined in a base (pure virtual) class", "body": "<p>Here's the code:</p>\n\n<pre><code>class PureDummy\n{\n    public:\n        virtual void foo() = 0;\n        template&lt;class T&gt;\n        void bar();\n};\n\nclass Dummy : public PureDummy\n{\n    public:\n        virtual void foo() \n        {\n\n        }\n        template&lt;class T&gt;\n        void bar()\n        {\n\n        }\n};\n\nint main(int argc, char **argv)\n{\n    PureDummy *pdummy = new Dummy();\n    pdummy-&gt;foo(); //OK\n    //pdummy-&gt;bar&lt;int&gt;();  //undefined reference to `void PureDummy::bar&lt;int&gt;()'\n}\n</code></pre>\n\n<p>So as a comment states, with a call to bar compilation fails. </p>\n\n<ol>\n<li><p>Why does the template function exhibit different behavior from a \"regular\" <strong>foo</strong> function?</p></li>\n<li><p>Is it possible to \"point\" that there's an implementation in the derived class?</p></li>\n</ol>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 5, "creation_date": 1424883227, "post_id": 28724809, "comment_id": 45736330, "body": "You are trying to copy assign <code>A</code> somewhere. Streams cannot be copied."}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1424883319, "post_id": 28724809, "comment_id": 45736390, "body": "The pseudo code does not help diagnose the problem, at all."}, {"owner": {"reputation": 993, "user_id": 4595270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4817ad0263804212316f6643ffbe7cbd?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro", "link": "https://stackoverflow.com/users/4595270/alejandro"}, "edited": false, "score": 0, "creation_date": 1424883331, "post_id": 28724809, "comment_id": 45736398, "body": "This has been answered before <a href=\"http://stackoverflow.com/questions/12951162/error-stdios-baseios-baseconst-stdios-base-is-private\">here</a>"}, {"owner": {"reputation": 71, "user_id": 694059, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/aaa4515141170cd1430404a936a13999?s=128&d=identicon&r=PG", "display_name": "mickeyj", "link": "https://stackoverflow.com/users/694059/mickeyj"}, "edited": false, "score": 0, "creation_date": 1424888068, "post_id": 28724809, "comment_id": 45739589, "body": "Thank you very much for your inputs, I was doing a copy of class A which resulted in this issue"}], "owner": {"reputation": 71, "user_id": 694059, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/aaa4515141170cd1430404a936a13999?s=128&d=identicon&r=PG", "display_name": "mickeyj", "link": "https://stackoverflow.com/users/694059/mickeyj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1424883543, "answer_count": 0, "score": 0, "last_activity_date": 1424883397, "creation_date": 1424883054, "question_id": 28724809, "link": "https://stackoverflow.com/questions/28724809/get-an-error-error-stdios-base-stdios-baseoperator-const-stdios-bas", "closed_reason": "Duplicate", "title": "Get an error: error: &#39;std::ios_base&amp; std::ios_base::operator=(const std::ios_base&amp;)&#39; is private", "body": "<pre><code>Pseduo code:\n\n class A : public class B{\n    public: \n    A(){}\n    ~A(){}\n    private:\n    string fileName;\n    ofstream stream;\n  }\n</code></pre>\n\n<p>If I comment out ofstream, the code compiles fine, however with the ofstream, I get the error: 'std::ios_base&amp; std::ios_base::operator=(const std::ios_base&amp;)' is private. Can you please help.</p>\n"}, {"tags": ["c++", "qt", "gtk"], "answers": [{"owner": {"reputation": 8034, "user_id": 1005230, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cefed5d9c8ca4c87c345b488f64ecd64?s=128&d=identicon&r=PG", "display_name": "svlasov", "link": "https://stackoverflow.com/users/1005230/svlasov"}, "is_accepted": true, "score": 1, "last_activity_date": 1424888991, "last_edit_date": 1424888991, "creation_date": 1424887164, "answer_id": 28726282, "question_id": 28724802, "link": "https://stackoverflow.com/questions/28724802/widgets-in-window-title-qt/28726282#28726282", "title": "Widgets in window title Qt", "body": "<p>Short answer is 'no', Qt doesn't implement any kind of window decorations (except QWS which is a different story).</p>\n\n<p>In Linux the title bars (window decorations) are carried by Window Managers, like Metacity or Compiz. Windows and OSX use their own window decorations. Qt has almost no control over what happens on the window title bars.</p>\n\n<p>Gnome3/GTK3 (and not Gnome2) allows you to use widgets in the title bar but it's not the case for many other Desktop Environments / Window Managers. Your options are:</p>\n\n<ul>\n<li>Use the API provided by the window manager / OS\n<ul>\n<li>Pros: native look.</li>\n<li>Cons: you need to maintain separate implementation for each OS / DE. Not all support doing such.</li>\n</ul></li>\n<li>Hide window decorations and implement you own\n<ul>\n<li>Pros: code once, use everywhere. Google Chrome and Vivaldi do that, for example.</li>\n<li>Cons: you need to implement window resize and move</li>\n</ul></li>\n<li>Use an overlay widget on top of the system title bar that will always follow the window\n<ul>\n<li>Pros: pretty much straightforward to do but I don't recommend it.</li>\n<li>Cons: the widget will always lag when moving the main window. Native look still has to be implemented. Take into account that user can switch the theme and the widget will look odd.</li>\n</ul></li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3365834"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 779, "favorite_count": 1, "accepted_answer_id": 28726282, "answer_count": 1, "score": 0, "last_activity_date": 1424888991, "creation_date": 1424883038, "question_id": 28724802, "link": "https://stackoverflow.com/questions/28724802/widgets-in-window-title-qt", "title": "Widgets in window title Qt", "body": "<p>Is in Qt something like GTK.headerbar or any other possibility to add wiget (button for example) in window title?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["c++", "librsync"], "comments": [{"owner": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 1, "creation_date": 1424890940, "post_id": 28724686, "comment_id": 45741154, "body": "Do you actually have a file named <code>cs1130218@palasi.cse.iitd.ernet.in:games.txt</code> in the current directory where <code>a.out</code> lives? If not, that easily explains why <code>fopen()</code> fails to open that file..."}, {"owner": {"reputation": 146, "user_id": 3911862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f994ccf8b9b08a38aba9011a6044e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Chandan", "link": "https://stackoverflow.com/users/3911862/chandan"}, "reply_to_user": {"reputation": 52445, "user_id": 1253222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3a62746fb04e19c1656cd1df560911f?s=128&d=identicon&r=PG", "display_name": "twalberg", "link": "https://stackoverflow.com/users/1253222/twalberg"}, "edited": false, "score": 0, "creation_date": 1424892469, "post_id": 28724686, "comment_id": 45742024, "body": "Oh! I have framed the question wrong! Let me correct it."}], "answers": [{"comments": [{"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1433797195, "post_id": 28728405, "comment_id": 49495445, "body": "I am trying to figure out how to use <code>librsync</code> in my application to sync with <code>rsync</code> on remote linux system..does this mean it wouldn&#39;t connect with <code>rsync</code> since they are not the same things?"}, {"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "reply_to_user": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1433811799, "post_id": 28728405, "comment_id": 49500165, "body": "@zadane - From what I can tell from reading the docs, not directly, unless you implement the <code>rsync</code> protocol yourself."}], "owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "is_accepted": true, "score": 4, "last_activity_date": 1424894160, "creation_date": 1424894160, "answer_id": 28728405, "question_id": 28724686, "link": "https://stackoverflow.com/questions/28724686/how-to-use-librsync-functions-to-open-remote-files/28728405#28728405", "title": "How to use librsync functions to open remote files?", "body": "<p>\"I need a command which can open files over a network\" is a really, <em>really</em> high-level operation, and as such, it glosses over all kinds of details: What kind of network protocol should be used? How should authentication be handled? How should network errors be handled? What should be done once the file is opened: read / write / both, sequential or random?</p>\n\n<p>librsync is relatively low-level and doesn't even try to answer these questions itself. <a href=\"https://github.com/librsync/librsync\" rel=\"nofollow\">Its README</a> explains:</p>\n\n<blockquote>\n  <p>librsync does not implement the rsync wire protocol. If you want to talk to an rsync server to transfer files you'll need to shell out to rsync. librsync is for building other programs that transfer files as efficiently as rsync. You can use librsync to make backup tools, distribute binary patches to programs, or sync directories to a server or between peers.</p>\n</blockquote>\n\n<p>To open files over a network, you'll need to implement your own server and wire protocol, or you'll need to shell out to commands like <code>rsync</code> that handle these details for you (and, if most of your logic is in shelling out to other commands, C++ may not be the best tool for the job).</p>\n"}, {"comments": [{"owner": {"reputation": 146, "user_id": 3911862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f994ccf8b9b08a38aba9011a6044e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Chandan", "link": "https://stackoverflow.com/users/3911862/chandan"}, "edited": false, "score": 0, "creation_date": 1425311308, "post_id": 28803559, "comment_id": 45899531, "body": "Yes, this is what I need. But I am unable to find any help on how to use it in c++. Can you please help me on that?"}, {"owner": {"reputation": 8404, "user_id": 243712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5347c683b6963f418d1b16c65917bf3f?s=128&d=identicon&r=PG", "display_name": "poolie", "link": "https://stackoverflow.com/users/243712/poolie"}, "reply_to_user": {"reputation": 146, "user_id": 3911862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f994ccf8b9b08a38aba9011a6044e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Chandan", "link": "https://stackoverflow.com/users/3911862/chandan"}, "edited": false, "score": 0, "creation_date": 1433647225, "post_id": 28803559, "comment_id": 49438646, "body": "FuSE may be the easiest solution. But it&#39;s really a separate question from librsync."}], "owner": {"reputation": 8404, "user_id": 243712, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5347c683b6963f418d1b16c65917bf3f?s=128&d=identicon&r=PG", "display_name": "poolie", "link": "https://stackoverflow.com/users/243712/poolie"}, "is_accepted": false, "score": 1, "last_activity_date": 1425276178, "creation_date": 1425276178, "answer_id": 28803559, "question_id": 28724686, "link": "https://stackoverflow.com/questions/28724686/how-to-use-librsync-functions-to-open-remote-files/28803559#28803559", "title": "How to use librsync functions to open remote files?", "body": "<p>Neither <code>librsync</code> nor <code>fopen</code> deal with remote files. </p>\n\n<p>Look at using a virtual filesystem library like <a href=\"http://en.wikipedia.org/wiki/GVFS\" rel=\"nofollow\">GVFS</a> or KIO instead: these can open files over SFTP and you can then pass them to librsync.</p>\n"}], "owner": {"reputation": 146, "user_id": 3911862, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f994ccf8b9b08a38aba9011a6044e4e?s=128&d=identicon&r=PG&f=1", "display_name": "Chandan", "link": "https://stackoverflow.com/users/3911862/chandan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1833, "favorite_count": 0, "accepted_answer_id": 28728405, "answer_count": 2, "score": 2, "last_activity_date": 1425276218, "creation_date": 1424882665, "last_edit_date": 1425276218, "question_id": 28724686, "link": "https://stackoverflow.com/questions/28724686/how-to-use-librsync-functions-to-open-remote-files", "title": "How to use librsync functions to open remote files?", "body": "<p>I am using librsync library for maintaining file versions. I am not able to open files from a network.</p>\n\n<p>Example (creating signature file):</p>\n\n<pre><code>int main(int argc, char** argv)//FILE *original, FILE *signature)\n{\n    if(argc != 2)\n    {\n        cout&lt;&lt;\"Enter the original file name.\"&lt;&lt;endl;\n        exit(1);\n    }\n\n    FILE *fpa;\n    fpa = fopen(argv[1],\"r\");\n\n    if(fpa==NULL)\n    {\n        cout&lt;&lt;\"ERROR\"&lt;&lt;endl;\n        exit(1);\n    }\n\n    FILE *fps;\n    fps = fopen(\"sig.sig\",\"w+\");\n\n\n    rs_result res = rs_sig_file(fpa, fps, 1,2,NULL);\n\n    fclose(fpa);\n    fclose(fps);\n\n    printf(\"Result code: %d\\n\", res);\n\n    return 0;\n}\n</code></pre>\n\n<p>When I run the program with argument of a file over a network, e.g. </p>\n\n<pre><code>./a.out cs1130218@palasi.cse.iitd.ernet.in:games.txt\n</code></pre>\n\n<p>fpa is NULL.</p>\n\n<p>I guess that fopen is not made for opening files over a network. I need a command which can do this. Any command in c/c++.\nYou can clearly see what I want to do with the programme.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 1, "creation_date": 1424882511, "post_id": 28724621, "comment_id": 45735885, "body": "What is your question?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1424882659, "post_id": 28724621, "comment_id": 45735971, "body": "Yep, on first look that seems ok, so what is your problem?"}, {"owner": {"reputation": 23, "user_id": 4606671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e53283f2ffe89ae5cd434c27e76dff?s=128&d=identicon&r=PG&f=1", "display_name": "strongstyle7", "link": "https://stackoverflow.com/users/4606671/strongstyle7"}, "edited": false, "score": 0, "creation_date": 1424882750, "post_id": 28724621, "comment_id": 45736026, "body": "Sorry all, first time poster here.  Problem is when I compile it, if the user input is &gt;= 10, it will be added into the total, and I only want the numbers that are less than 10."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1424882878, "post_id": 28724621, "comment_id": 45736111, "body": "swap <code>cout &lt;&lt; &quot;Enter a number less than 10 to continue: &quot; ;</code> and <code>total+=number;</code> around in your while loop."}, {"owner": {"reputation": 23, "user_id": 4606671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e53283f2ffe89ae5cd434c27e76dff?s=128&d=identicon&r=PG&f=1", "display_name": "strongstyle7", "link": "https://stackoverflow.com/users/4606671/strongstyle7"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1424883171, "post_id": 28724621, "comment_id": 45736300, "body": "@NathanOliver Wow, swapping cout worked.  Cant believe it took me so long to figure out. Thank you!"}, {"owner": {"reputation": 178960, "user_id": 2079303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cf7f63e49a75376e0f761c8abeb6d5a?s=128&d=identicon&r=PG", "display_name": "eerorika", "link": "https://stackoverflow.com/users/2079303/eerorika"}, "edited": false, "score": 1, "creation_date": 1424883180, "post_id": 28724621, "comment_id": 45736304, "body": "<code>total</code> is not initialized before it&#39;s read in your code."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1424883183, "post_id": 28724621, "comment_id": 45736306, "body": "BTW, <code>total</code> is not initialized"}], "answers": [{"owner": {"reputation": 2200, "user_id": 1519323, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zUWVH.png?s=128&g=1", "display_name": "davepmiller", "link": "https://stackoverflow.com/users/1519323/davepmiller"}, "is_accepted": true, "score": 1, "last_activity_date": 1424883299, "creation_date": 1424883299, "answer_id": 28724908, "question_id": 28724621, "link": "https://stackoverflow.com/questions/28724621/c-sum-of-user-inputted-numbers-less-than-10/28724908#28724908", "title": "C++ Sum of user inputted numbers less than 10", "body": "<p>Initialize your declared variables first.</p>\n\n<pre><code>int total = 0, number = 0;\n</code></pre>\n\n<p>The input in your loop is not checked before adding to the total. Take your input at the end of the loop body and then it will be checked on the next iteration.</p>\n\n<pre><code>while (number &lt; 10){\n   cout &lt;&lt; \"Enter a number less than 10 to continue: \" ;\n   //cin &gt;&gt; number;\n   total+=number;\n   cin &gt;&gt; number;\n}\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4606671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51e53283f2ffe89ae5cd434c27e76dff?s=128&d=identicon&r=PG&f=1", "display_name": "strongstyle7", "link": "https://stackoverflow.com/users/4606671/strongstyle7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 28724908, "answer_count": 1, "score": 1, "last_activity_date": 1553890573, "creation_date": 1424882488, "last_edit_date": 1424887794, "question_id": 28724621, "link": "https://stackoverflow.com/questions/28724621/c-sum-of-user-inputted-numbers-less-than-10", "title": "C++ Sum of user inputted numbers less than 10", "body": "<p>I'm trying to complete a program that collects all user inputted numbers less than 10 and outputs the sum.</p>\n\n<p>When I run it, the program adds the numbers that are &lt; 10 to total, if a number is >= 10 we exit the loop and print the sum.</p>\n\n<p>Here's what I have so far.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\nint main () {\n\nint number, total;\n\ncout &lt;&lt; \"Enter a number less than 10 to continue: \" ;\ncin &gt;&gt; number;\n\n    while (number &lt; 10){\n       cout &lt;&lt; \"Enter a number less than 10 to continue: \" ;\n       cin &gt;&gt; number;\n       total+=number;\n    }\n\n    if (number &gt;= 10){\n    cout &lt;&lt; \"The total amount is: \" &lt;&lt; total &lt;&lt; endl;\n    }\n\nreturn 0;\n}\n</code></pre>\n\n<p>Help is appreciated.</p>\n"}, {"tags": ["c++", "visual-studio"], "comments": [{"owner": {"reputation": 46073, "user_id": 3002139, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/tYIVC.png?s=128&g=1", "display_name": "Baum mit Augen", "link": "https://stackoverflow.com/users/3002139/baum-mit-augen"}, "edited": false, "score": 4, "creation_date": 1424882239, "post_id": 28724484, "comment_id": 45735684, "body": "Of course this is possible..."}, {"owner": {"reputation": 49854, "user_id": 16287, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/Ogq0T.png?s=128&g=1", "display_name": "Drew Dormann", "link": "https://stackoverflow.com/users/16287/drew-dormann"}, "edited": false, "score": 0, "creation_date": 1424882299, "post_id": 28724484, "comment_id": 45735728, "body": "Seems like a reasonable question, if you&#39;re new to that tool."}, {"owner": {"reputation": 123, "user_id": 4545109, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60e697beac07c9d783b490fd92116cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Held", "link": "https://stackoverflow.com/users/4545109/alex-held"}, "edited": false, "score": 0, "creation_date": 1424882352, "post_id": 28724484, "comment_id": 45735768, "body": "I don&#39;t understand why down vote? Just an easy Question. No typos. Well it&#39;s answered. Thank you! ;)"}, {"owner": {"reputation": 7704, "user_id": 123376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5049aa7844832b36a590dd51838114c4?s=128&d=identicon&r=PG", "display_name": "Rado", "link": "https://stackoverflow.com/users/123376/rado"}, "edited": false, "score": 0, "creation_date": 1425142046, "post_id": 28724484, "comment_id": 45844664, "body": "@AlexHeld: Don&#39;t think there is anything wrong with the question. Sometimes SO is too harsh on questions, but don&#39;t let that stop you using the site, especially when you are learning a language. The question may have been deemed too easy and thus the downvotes - i.e. it is basically a Yes/No question that could have been easily researched with a google search. However, If you had turned it into something like <i>What are the caveats of using Visual Studio for learning C++</i>, it may have been better received. +1 from me, anyway. The good thing is +votes outweigh -votes in reputation ;)"}], "answers": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 0, "last_activity_date": 1424884619, "creation_date": 1424884619, "answer_id": 28725403, "question_id": 28724484, "link": "https://stackoverflow.com/questions/28724484/general-usage-of-c-in-visual-studio/28725403#28725403", "title": "General usage of c++ in visual studio", "body": "<p>It depends on which variant of Visual Studio you're using. If Express edition you want \"for Desktop\" in order to do ordinary standard C++. With full Visual Studio there's no problem.</p>\n"}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "is_accepted": true, "score": 2, "last_activity_date": 1424888465, "creation_date": 1424888465, "answer_id": 28726698, "question_id": 28724484, "link": "https://stackoverflow.com/questions/28724484/general-usage-of-c-in-visual-studio/28726698#28726698", "title": "General usage of c++ in visual studio", "body": "<p>I usually create a new (empty) directory and copy the source file(s) into that directory, then when creating the Visual Studio project using the name of the directory. To create a standard C++ console program, choose \"... console application\", then click on next, clear the check boxes below \"empty project\", and check \"empty project\". Once you're into the project, click on project, and \"add existing item\" to add the source file name(s).</p>\n\n<p>If you want 64 bit mode, you'll need to right click on the project name, then properties, then configuration manager, then new, and select x64. It doesn't matter if you do this for debug or release build, it will set x64 mode for both build modes.</p>\n"}, {"owner": {"reputation": 7704, "user_id": 123376, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5049aa7844832b36a590dd51838114c4?s=128&d=identicon&r=PG", "display_name": "Rado", "link": "https://stackoverflow.com/users/123376/rado"}, "is_accepted": false, "score": 1, "last_activity_date": 1425140061, "creation_date": 1425140061, "answer_id": 28783864, "question_id": 28724484, "link": "https://stackoverflow.com/questions/28724484/general-usage-of-c-in-visual-studio/28783864#28783864", "title": "General usage of c++ in visual studio", "body": "<p>Yes, you can. Visual studio supports two types of C++ applications:</p>\n\n<ul>\n<li><p><a href=\"http://en.wikipedia.org/wiki/C%2B%2B/CLI\" rel=\"nofollow\">C++/CLI</a> (also called <em>managed</em> C++) - Under Visual Studio project wizard, these kind of projects are grouped under <em>CLR</em></p></li>\n<li><p>Native C++ - Under Visual Studio project wizard, these are the projects grouped under <em>Win32</em>, <em>MFC</em>, <em>ATL</em></p></li>\n</ul>\n\n<p>Note, however, that you can always turn a project from <em>native</em> to <em>managed</em> and vice versa by going into the project properties and switching on/off the <em>Common Language Runtime Support</em> (<code>/clr</code>), so make sure this option is turned off (<em>No CLR</em>).</p>\n\n<p>Also, be aware that different C++ compilers not always support the same C++ features (even if they are part of the standard), and some C++ compilers implement their own extensions to the language. In the case of Visual Studio, it defines <a href=\"https://msdn.microsoft.com/en-us/library/34h23df8.aspx\" rel=\"nofollow\">Microsoft Extensions to C and C++</a> that can be turned off (<code>Za</code>) to be more ANSI compliant.</p>\n\n<p>Visual Studio is actually notoriously late when it comes to supporting the C++ standard. Even now, some C++11 features are <a href=\"https://msdn.microsoft.com/en-us/library/hh567368.aspx\" rel=\"nofollow\">not part of the latest Visual Studio</a> so keep this in mind when wondering why something you read in a book does not work in Visual C++.</p>\n\n<p>One last note. Avoid using <em>ATL</em> and <em>MFC</em> if you try to be cross-platform compatible. Even if you don't want to be cross-platform compatible, <em>ATL</em> and <em>MFC</em> are only supported by Visual C++ and using them will lock you to using Visual Studio. Now with the <a href=\"http://www.visualstudio.com/en-us/news/vs2013-community-vs.aspx\" rel=\"nofollow\">Community Edition</a>, both ATL/MFC are available for free if you are an independent developer or a small company, while historically, ATL/MFC were paid-version only as they are not part of Visual Studio Express editions.</p>\n"}], "owner": {"reputation": 123, "user_id": 4545109, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/60e697beac07c9d783b490fd92116cf1?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Held", "link": "https://stackoverflow.com/users/4545109/alex-held"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 28726698, "answer_count": 3, "score": 0, "last_activity_date": 1425140061, "creation_date": 1424882107, "question_id": 28724484, "link": "https://stackoverflow.com/questions/28724484/general-usage-of-c-in-visual-studio", "title": "General usage of c++ in visual studio", "body": "<p>Is it possible to write a c++ code in Visual Studio without using c++.net?</p>\n\n<p>I'm learning c++ at the moment - Using a book.\nBut I like the Visual Studio IDE but I don't know if it supports c++ or just c++.net.</p>\n"}, {"tags": ["c++", "list"], "answers": [{"owner": {"reputation": 234649, "user_id": 204847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdf6da0eaa5db9219d7a731c7daf9c9e?s=128&d=identicon&r=PG", "display_name": "Mike Seymour", "link": "https://stackoverflow.com/users/204847/mike-seymour"}, "is_accepted": false, "score": 1, "last_activity_date": 1424882174, "creation_date": 1424882174, "answer_id": 28724510, "question_id": 28724360, "link": "https://stackoverflow.com/questions/28724360/recursive-deletion-of-linked-list-c/28724510#28724510", "title": "recursive deletion of linked list c++", "body": "<p>Deleting <code>temp</code> invalidates <code>head</code>, since they both point to the same object. <code>head-&gt;next</code> tries to access the deleted object, giving undefined behaviour. You should instead store <code>head-&gt;next</code>, so you don't have to access the deleted object:</p>\n\n<pre><code>if (head) {\n    num * temp = head-&gt;next;\n    delete head;\n    del (temp);\n}\n</code></pre>\n\n<p>You're running a debug build, so the deleted memory was helpfully set to garbage, rather than left with its old contents. This means that trying to use values read from it as pointers will quickly trigger an access violation, helping you find the source of the problem.</p>\n\n<p>The second version waits until you've finished with the object before deleting it, so there's no undefined behaviour.</p>\n\n<p>However, recursion is a bad idea since it could cause a stack overflow if the list is too long. Iteration would be safer:</p>\n\n<pre><code>while (head) {\n    num * temp = head-&gt;next;\n    delete head;\n    head = temp;\n}\n</code></pre>\n"}, {"owner": {"reputation": 479, "user_id": 1811912, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/408029757998d80793758fc6409a20f4?s=128&d=identicon&r=PG", "display_name": "Ruben", "link": "https://stackoverflow.com/users/1811912/ruben"}, "is_accepted": false, "score": 1, "last_activity_date": 1424882207, "creation_date": 1424882207, "answer_id": 28724526, "question_id": 28724360, "link": "https://stackoverflow.com/questions/28724360/recursive-deletion-of-linked-list-c/28724526#28724526", "title": "recursive deletion of linked list c++", "body": "<p>You're accessing <code>head-&gt;next</code> while actually you already deleted <code>head</code> the line before.</p>\n\n<p>Another way to go about this would be:</p>\n\n<pre><code>void del (num*&amp;head) {\n    if (head!=0) {\n        num* temp = head-&gt;next;\n        delete head;\n        del (temp);\n    }\n    else return;\n}\n</code></pre>\n"}, {"owner": {"reputation": 11458, "user_id": 3435400, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/61726fe80facc93d76754f0226b49eb9?s=128&d=identicon&r=PG&f=1", "display_name": "alain", "link": "https://stackoverflow.com/users/3435400/alain"}, "is_accepted": false, "score": 1, "last_activity_date": 1424882219, "creation_date": 1424882219, "answer_id": 28724532, "question_id": 28724360, "link": "https://stackoverflow.com/questions/28724360/recursive-deletion-of-linked-list-c/28724532#28724532", "title": "recursive deletion of linked list c++", "body": "<p>In the first version,</p>\n\n<pre><code>    temp = head;\n    delete temp;\n    del (head-&gt;next);\n</code></pre>\n\n<p><code>temp</code> and <code>head</code> point to the same node, then the node is deleted and becomes invalid. But it is accessed in the last line with</p>\n\n<pre><code>    del (head-&gt;next);\n</code></pre>\n\n<p>The second version does not have this problem.</p>\n"}, {"owner": {"reputation": 4625, "user_id": 1964969, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0879c1954a7ee8660f80eafdf9f66776?s=128&d=identicon&r=PG", "display_name": "Yury Schkatula", "link": "https://stackoverflow.com/users/1964969/yury-schkatula"}, "is_accepted": false, "score": 1, "last_activity_date": 1424882368, "creation_date": 1424882368, "answer_id": 28724584, "question_id": 28724360, "link": "https://stackoverflow.com/questions/28724360/recursive-deletion-of-linked-list-c/28724584#28724584", "title": "recursive deletion of linked list c++", "body": "<pre><code>    temp = head;\n    delete temp; // head is dead too!\n    del (head-&gt;next); // dereferencing disposed pointer\n</code></pre>\n\n<p>As far as you operate with pointers pointing to the same memory, deleting any of that pointers would make the memory deleted. So, even if you don't delete that other pointers they point to a piece of trash (or even to memory owned by another person)</p>\n"}, {"owner": {"reputation": 1963, "user_id": 3287033, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/f6dcd0f36aba0da6569c9611964a44b5?s=128&d=identicon&r=PG&f=1", "display_name": "OldSchool", "link": "https://stackoverflow.com/users/3287033/oldschool"}, "is_accepted": false, "score": 1, "last_activity_date": 1507540677, "last_edit_date": 1507540677, "creation_date": 1424882982, "answer_id": 28724778, "question_id": 28724360, "link": "https://stackoverflow.com/questions/28724360/recursive-deletion-of-linked-list-c/28724778#28724778", "title": "recursive deletion of linked list c++", "body": "<p>Think of it in this way:-  </p>\n\n<p>when you have done </p>\n\n<pre><code> temp = head;// it means temp and head are talking about the same person,i.e, the same memory location.\n delete temp; //the person(memory location) to which the both of them are pointing is dead;\n del (head-&gt;next); //Now you trying to kill the \"ghost\" of the person means you are trying to delete already deleted node.\n</code></pre>\n\n<p>But in your second case the recursive call is just above</p>\n\n<pre><code>delete head;\n</code></pre>\n\n<p>so the recursive call first progresses towards the end and then nodes are deleted from the end towards the start, as follows:-</p>\n\n<p>if you have n nodes, the summary of recursive call can be viewed as:-</p>\n\n<pre><code> del (list); // call from main.\n del (list-&gt;head); //recursive call.\n del (list-&gt;head-&gt;head);//recursive call.\n del (list-&gt;head-&gt;head-&gt;head);//recursive call.\n</code></pre>\n\n<p>so on..................</p>\n\n<p>so when last node appears its <code>next</code> is <code>NULL</code> so recursion stops and the nodes are deleted from the last call to the first call fashion in other words from the last node towards the first node. So no harm is done here as in your first case.</p>\n"}], "owner": {"reputation": 133, "user_id": 4540854, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/0023b4fe2a8b6bebe1f3e62eedc00385?s=128&d=identicon&r=PG&f=1", "display_name": "VVG", "link": "https://stackoverflow.com/users/4540854/vvg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1507540677, "creation_date": 1424881819, "question_id": 28724360, "link": "https://stackoverflow.com/questions/28724360/recursive-deletion-of-linked-list-c", "title": "recursive deletion of linked list c++", "body": "<p>Could you tell, why the implementation of the next code leads to the error:</p>\n\n<pre><code>void del (num*&amp;head) {\n    num*temp = 0;\n    if (head!=0) {\n        temp = head;\n        delete temp;\n        del (head-&gt;next);\n    }\n    else return;\n}\n</code></pre>\n\n<p>The error: </p>\n\n<pre><code>Access violation reading location 0xcdcdcdc1.\n</code></pre>\n\n<p>Whereas next code works properly:</p>\n\n<pre><code>void del (num*&amp;head) {\n    if (head!=0) {\n        del (head-&gt;next);\n        delete head;\n    }\n    else return;\n}\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 5538, "user_id": 361177, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/z47wm.jpg?s=128&g=1", "display_name": "Orace", "link": "https://stackoverflow.com/users/361177/orace"}, "edited": false, "score": 0, "creation_date": 1424882124, "post_id": 28724350, "comment_id": 45735597, "body": "You say <i>&quot;replace &#39;perfect&#39; with &#39;so good&#39; is not difficult&quot;</i> can you provide us some code ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1424882135, "post_id": 28724350, "comment_id": 45735604, "body": "Strategy wise, why not split into an array of words, perform substitutions against a <code>std::map</code> of source-&gt;target words, then reassemble?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 1, "creation_date": 1424882136, "post_id": 28724350, "comment_id": 45735605, "body": "Please show evidence of research and attempts. Lots of questions on this topic have been asked before on SO. Surely you&#39;ve read them, as part of your research, so what problems did you encounter with that wealth of material?"}, {"owner": {"reputation": 373, "user_id": 4102905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1450838325/picture?type=large", "display_name": "Xarylem", "link": "https://stackoverflow.com/users/4102905/xarylem"}, "edited": false, "score": 0, "creation_date": 1424882237, "post_id": 28724350, "comment_id": 45735681, "body": "read this: <a href=\"http://www.cplusplus.com/reference/regex/regex_replace/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/regex/regex_replace</a> yet be aware that requires C++11"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3920237"}, "reply_to_user": {"reputation": 373, "user_id": 4102905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1450838325/picture?type=large", "display_name": "Xarylem", "link": "https://stackoverflow.com/users/4102905/xarylem"}, "edited": false, "score": 0, "creation_date": 1424882445, "post_id": 28724350, "comment_id": 45735835, "body": "@Xarylem Why would you even suggest regex for this?"}, {"owner": {"reputation": 373, "user_id": 4102905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1450838325/picture?type=large", "display_name": "Xarylem", "link": "https://stackoverflow.com/users/4102905/xarylem"}, "edited": false, "score": 0, "creation_date": 1424882640, "post_id": 28724350, "comment_id": 45735960, "body": "ok if I get it right, your issue is: if I first replace nice with cool, then I cannot distinguish which &#39;cool&#39; is freshly replaced and which was originally in the sentence. A working, simple although inefficient way is to change cool-&gt;nicex, nice-&gt;cool and nicex-&gt;nice...horrible but works :D"}, {"owner": {"reputation": 373, "user_id": 4102905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1450838325/picture?type=large", "display_name": "Xarylem", "link": "https://stackoverflow.com/users/4102905/xarylem"}, "edited": false, "score": 0, "creation_date": 1424882781, "post_id": 28724350, "comment_id": 45736043, "body": "@remyabel, my bad, initially it seemed to me the user was asking about sub-string replacement in general."}, {"owner": {"reputation": 373, "user_id": 4102905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1450838325/picture?type=large", "display_name": "Xarylem", "link": "https://stackoverflow.com/users/4102905/xarylem"}, "edited": false, "score": 0, "creation_date": 1424884968, "post_id": 28724350, "comment_id": 45737473, "body": "well, if the job is not too much demanding the triple replacement I suggested before would work."}], "answers": [{"comments": [{"owner": {"reputation": 21714, "user_id": 1392132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QF6FZ.jpg?s=128&g=1", "display_name": "5gon12eder", "link": "https://stackoverflow.com/users/1392132/5gon12eder"}, "edited": false, "score": 1, "creation_date": 1424883930, "post_id": 28724749, "comment_id": 45736787, "body": "Whether this is a viable solution depends on whether you want <code>replacemenot</code> to be replaced with <code>worldnot</code>.  If you don&#39;t, you&#39;ll have to go though some extra work of figuring out whether the current match is followed by a word boundary."}], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": false, "score": 1, "last_activity_date": 1424882885, "creation_date": 1424882885, "answer_id": 28724749, "question_id": 28724350, "link": "https://stackoverflow.com/questions/28724350/change-and-replace-words-in-a-string-with-c/28724749#28724749", "title": "Change and replace words in a string with C++", "body": "<p>You can use <a href=\"http://www.cplusplus.com/reference/string/string/replace/\" rel=\"nofollow\"><code>std::string::replace</code></a> to replace a part of an <code>std::string</code>.</p>\n\n<p>And you can use <a href=\"http://www.cplusplus.com/reference/string/string/find/\" rel=\"nofollow\"><code>std::string::find</code></a> to find a specific substring in an <code>std::string</code>:</p>\n\n<pre><code>std::string foo = \"hello replaceme!\";\nstd::string bar = \"replaceme\";\nsize_t pos = foo.find(bar);\nsize_t len = bar.length();\nfoo.replace(pos, len, \"world\");\nstd::cout &lt;&lt; foo &lt;&lt; std::endl;\n</code></pre>\n\n<p>The above code will print <code>hello world!</code>.</p>\n\n<p>You can then continue to loop that until <code>foo.find</code> returns <code>string::npos</code> which means it didn't find the specified substring in <code>foo</code>.</p>\n"}, {"owner": {"reputation": 1, "user_id": 15506849, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/eaa569234d428a78c406a592b5d4b4e8?s=128&d=identicon&r=PG", "display_name": "Omad Imsalim", "link": "https://stackoverflow.com/users/15506849/omad-imsalim"}, "is_accepted": false, "score": 0, "last_activity_date": 1617032843, "last_edit_date": 1617032843, "creation_date": 1617027829, "answer_id": 66856011, "question_id": 28724350, "link": "https://stackoverflow.com/questions/28724350/change-and-replace-words-in-a-string-with-c/66856011#66856011", "title": "Change and replace words in a string with C++", "body": "<p>There is also a way to do it with char pointers if you really wanna get fancy.</p>\n<p>Here's what I found:</p>\n<p>const bool SUCCESS = true;\nconst bool FAIL = false;</p>\n<p>boolean replace_word(const char *foo, const char *bar, const char *foo_bar){</p>\n<pre><code>    if(foo==NULL  || bar==NULL || foo_bar==NULL){\n\n        return FAIL;\n\n    }\n\n    char* new_string = src;\n\n    // can also do strcpy(new_string, foo);\n\n    int len_old_string = strlen(foo);\n\n    int i = 0;\n\n    while (i &lt; len_old_string) {\n\n        if (*(foo + i) == bar[0]) {\n\n            *(new_string + i) = foo_bar[i];\n\n        }\n\n        i++;\n\n    }\n    \n    foo = new_string;        \n\n    return (SUCCESS);\n\n    }\n</code></pre>\n<p>the replace method is a bit easier, but also less dynamic.</p>\n"}], "owner": {"reputation": 71, "user_id": 4606588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2595efa6a0d1b2dc19ee66dc07ca77c?s=128&d=identicon&r=PG&f=1", "display_name": "h1h2", "link": "https://stackoverflow.com/users/4606588/h1h2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2184, "favorite_count": 1, "answer_count": 2, "score": -6, "last_activity_date": 1617032843, "creation_date": 1424881810, "last_edit_date": 1424882038, "question_id": 28724350, "link": "https://stackoverflow.com/questions/28724350/change-and-replace-words-in-a-string-with-c", "title": "Change and replace words in a string with C++", "body": "<p>First of all I want to apologize for my bad English writing.\nMy question is: for example we have a lot of sentences and in this group of words some words must replace with some other words, something like this:</p>\n\n<blockquote>\n  <p>In this cool day it's perfect to go to park and nice to play football. </p>\n</blockquote>\n\n<p>And changed string become like this:</p>\n\n<blockquote>\n  <p>In this nice day it's so good to go to park and cool to play football. </p>\n</blockquote>\n\n<p>As you see the word \"perfect\" replace with \"so good\" and this part is not difficult, my problem is how to replace any \"cool\" word to \"nice\" and \"nice\" word to \"cool\"?\nWhat is the best way to do this with C++?\nThanks. </p>\n"}, {"tags": ["c++", "multimap"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1424882011, "post_id": 28724348, "comment_id": 45735511, "body": "I think you might be better served using a <code>std::vector&lt;std::pair&lt;CFile,FileType&gt;&gt;</code> unless there is some feature of the mulitmap that you need."}, {"owner": {"reputation": 11, "user_id": 4596354, "user_type": "registered", "profile_image": "https://graph.facebook.com/961422120536592/picture?type=large", "display_name": "\u041c\u0430\u0440\u0442\u0438\u043d \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/4596354/%d0%9c%d0%b0%d1%80%d1%82%d0%b8%d0%bd-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1424885823, "post_id": 28724348, "comment_id": 45738068, "body": "its for university so i have to use multimap"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4596354, "user_type": "registered", "profile_image": "https://graph.facebook.com/961422120536592/picture?type=large", "display_name": "\u041c\u0430\u0440\u0442\u0438\u043d \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/4596354/%d0%9c%d0%b0%d1%80%d1%82%d0%b8%d0%bd-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "edited": false, "score": 0, "creation_date": 1424888762, "post_id": 28725864, "comment_id": 45739982, "body": "i know that it&#39;s not the best way to go but it&#39;s a task for university and i must use multimap"}], "owner": {"reputation": 3642, "user_id": 4195568, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/w7Ogb.jpg?s=128&g=1", "display_name": "Ying Xiong", "link": "https://stackoverflow.com/users/4195568/ying-xiong"}, "is_accepted": false, "score": 0, "last_activity_date": 1424885884, "creation_date": 1424885884, "answer_id": 28725864, "question_id": 28724348, "link": "https://stackoverflow.com/questions/28724348/accessing-elements-in-a-multimap-c/28725864#28725864", "title": "Accessing elements in a multimap c++", "body": "<p>As @NathanOliver pointed out, <code>multimap</code> might not be the best structure to model your data. But if you are determined to go this way, use <a href=\"http://www.cplusplus.com/reference/map/multimap/equal_range/\" rel=\"nofollow\"><code>equal_range</code></a> member function to find all values with a given key. See the <a href=\"http://www.cplusplus.com/reference/map/multimap/equal_range/\" rel=\"nofollow\">example</a> for more details.</p>\n"}], "owner": {"reputation": 11, "user_id": 4596354, "user_type": "registered", "profile_image": "https://graph.facebook.com/961422120536592/picture?type=large", "display_name": "\u041c\u0430\u0440\u0442\u0438\u043d \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/4596354/%d0%9c%d0%b0%d1%80%d1%82%d0%b8%d0%bd-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2178, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1424885884, "creation_date": 1424881802, "question_id": 28724348, "link": "https://stackoverflow.com/questions/28724348/accessing-elements-in-a-multimap-c", "title": "Accessing elements in a multimap c++", "body": "<p>I have a class CFile:</p>\n\n<pre><code>class CFile{\nprivate:\n    string filename;\n    unsigned int filesize;\npublic:\n    CFile(){\n        filename=\"\";\n        filesize=0;\n    }\n    CFile(string name,unsigned int size){\n        filename=name;\n        filesize=size;\n    }\n    string getFileName(){\n        return filename;\n    }\n    int getSize(){\n        return filesize;\n    }\n    void ChangeSize(unsigned int size1){\n        filesize=size1;\n    }\n    bool operator ==(CFile a){\n        return(a.getFileName().compare(getFileName()))&amp;&amp;(a.getSize()==getSize())?true:false;\n    }\n    void operator =(CFile a){\n        filename=a.getFileName();\n        filesize=a.getSize();\n    }\n    istream &amp;operator&gt;&gt;(istream &amp;in){\n        in&gt;&gt;filename&gt;&gt;filesize;\n        return in;\n    }\n    ostream &amp;operator&lt;&lt;(ostream &amp;out){\n        return out&lt;&lt;filename&lt;&lt;filesize;\n    }\n    bool nameCompare(CFile a){\n        return (lexicographical_compare(filename.begin(),filename.end(),a.filename.begin(),a.filename.end()))?1:0;\n    }\n    static bool greather(const CFile&amp; obj1,const CFile&amp; obj2){\n        if (obj1.filesize&gt;obj2.filesize) return true;\n        else return false;\n    }\n};\n</code></pre>\n\n<p>and the i have a class CDirectory:</p>\n\n<pre><code>    class CDirectory{\nprivate:\n    string dirname;\n    enum FileType {Archive,Hidden,Readonly,System};\n    multimap&lt;CFile,FileType&gt; dirmap;\n</code></pre>\n\n<p>The first class CFile is for the size and name of a file.The second class CDirectory is for the directory name and type of file.Also in the second class there is a multimap with key value the class CFile and mapped value the type of the file FileType.How can I access the elements of the multimap?I don't know how this works when the key value of the multimap is a class.</p>\n"}, {"tags": ["c++", "c++11", "boost", "boost-preprocessor"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1424881835, "post_id": 28724307, "comment_id": 45735379, "body": "You want a macro that returns a different constant every time it is &quot;called&quot;? I&#39;m pretty sure that is not possible."}, {"owner": {"reputation": 1736, "user_id": 2489715, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/JlL22.png?s=128&g=1", "display_name": "amchacon", "link": "https://stackoverflow.com/users/2489715/amchacon"}, "edited": false, "score": 0, "creation_date": 1424883100, "post_id": 28724307, "comment_id": 45736259, "body": "Macros is compile-time, and you are asking for data in execution time... It can&#39;t be posible."}], "answers": [{"comments": [{"owner": {"reputation": 155, "user_id": 3503875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LJtWQ.jpg?s=128&g=1", "display_name": "DejaVu", "link": "https://stackoverflow.com/users/3503875/dejavu"}, "edited": false, "score": 0, "creation_date": 1424884022, "post_id": 28725080, "comment_id": 45736850, "body": "Thanks, but I know about BOOST_PP_COUNTER, and I am trying to find a way to wrap following code to single macro. <code>constexpr int A  = BOOST_PP_COUNTER;  #include BOOST_PP_UPDATE_COUNTER()</code>"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 155, "user_id": 3503875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LJtWQ.jpg?s=128&g=1", "display_name": "DejaVu", "link": "https://stackoverflow.com/users/3503875/dejavu"}, "edited": false, "score": 0, "creation_date": 1424886226, "post_id": 28725080, "comment_id": 45738374, "body": "@DejaVu - please remember to always add or at least mention what have you tried so far. Anyway: I leave this answer. I hope it serves for others."}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "reply_to_user": {"reputation": 155, "user_id": 3503875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LJtWQ.jpg?s=128&g=1", "display_name": "DejaVu", "link": "https://stackoverflow.com/users/3503875/dejavu"}, "edited": false, "score": 0, "creation_date": 1424886370, "post_id": 28725080, "comment_id": 45738481, "body": "@DejaVu - answering on your question in comment: Well - you cannot have <code>#</code> in macro definition. I am afraid you need two lines of code for new ID, or, why don&#39;t you just use <code>enum</code>..."}], "owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "is_accepted": false, "score": 1, "last_activity_date": 1424883745, "creation_date": 1424883745, "answer_id": 28725080, "question_id": 28724307, "link": "https://stackoverflow.com/questions/28724307/macro-based-counter/28725080#28725080", "title": "Macro-based counter", "body": "<p>Yes, it is possible, but with <code>const/constexpr int</code> and with Boost.Preprocessor.</p>\n\n<p>See <a href=\"http://www.boost.org/doc/libs/1_44_0/libs/preprocessor/doc/ref/counter.html\" rel=\"nofollow\">BOOST_PP_COUNTER</a></p>\n\n<p>An example of usage:</p>\n\n<pre><code>#include &lt;boost/preprocessor/slot/counter.hpp&gt;\n\nconstexpr int A  = BOOST_PP_COUNTER; // 0\n\n#include BOOST_PP_UPDATE_COUNTER()\n\nconstexpr int B = BOOST_PP_COUNTER; // 1\n\n#include BOOST_PP_UPDATE_COUNTER()\n\nconstexpr int C = BOOST_PP_COUNTER; // 2\n\n#include BOOST_PP_UPDATE_COUNTER()\n\nconstexpr int D = BOOST_PP_COUNTER; // 3\n</code></pre>\n\n<p>See <a href=\"http://ideone.com/U41IRe\" rel=\"nofollow\">working example</a>.</p>\n\n<hr>\n\n<p>Final note: don't use macro for storing results, you'll get the same number in the end in all such defined constants:</p>\n\n<pre><code>#include &lt;boost/preprocessor/slot/counter.hpp&gt;\n\n#define A  BOOST_PP_COUNTER // A is 0\n\n#include BOOST_PP_UPDATE_COUNTER()\n\n#define B BOOST_PP_COUNTER // B is 1, but A is 1 too\n\nint main() { cout &lt;&lt; A &lt;&lt; B &lt;&lt; endl; }\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code> 11\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 3503875, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/LJtWQ.jpg?s=128&g=1", "display_name": "DejaVu", "link": "https://stackoverflow.com/users/3503875/dejavu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1467557994, "creation_date": 1424881689, "last_edit_date": 1467557994, "question_id": 28724307, "link": "https://stackoverflow.com/questions/28724307/macro-based-counter", "title": "Macro-based counter", "body": "<p>Is it possible to create compile time constants like this:  </p>\n\n<pre><code>// event.h\n#define REGISTER_EVENT_TYPE() ... // Returns last_returned_number+1\n\n// header1\n#define SOME_EVENT REGISTER_EVENT_TYPE()\n// header2\n#define SOME_OTHER_EVENT REGISTER_EVENT_TYPE()\n</code></pre>\n\n<p>Where <code>SOME_EVENT</code> will be 0 and <code>SOME_OTHER_EVENT</code> will be 1.  </p>\n\n<p>Tried the following code: </p>\n\n<pre><code>#define DEF_X(x) const int x = BOOST_PP_COUNTER;\n#define REGISTER_EVENT_TYPE(x) BOOST_PP_UPDATE_COUNTER()DEF_X(x)\n\n#include REGISTER_EVENT_TYPE(SOME_EVENT_TYPE)  \n</code></pre>\n\n<p>But include eats constant declaration.</p>\n"}, {"tags": ["c++", "binary"], "comments": [{"owner": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1424881996, "post_id": 28724281, "comment_id": 45735497, "body": "Is this a description of your file layout? <a href=\"https://software.intel.com/en-us/node/525311\" rel=\"nofollow noreferrer\">software.intel.com/en-us/node/525311</a>"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1424886741, "post_id": 28724281, "comment_id": 45738737, "body": "I need some clarification:  1) How many bytes in a FORTRAN double?  2) Is the format of a FORTRAN double the same format that C++ uses?"}, {"owner": {"reputation": 1, "user_id": 4606532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a2c1943a8ad438a8773bc691098f60?s=128&d=identicon&r=PG&f=1", "display_name": "AlfThilo", "link": "https://stackoverflow.com/users/4606532/alfthilo"}, "reply_to_user": {"reputation": 269328, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1424938766, "post_id": 28724281, "comment_id": 45758912, "body": "Thanks for your reply! @Mark: Yes, this is the description of my file layout. @ Thomasy 1) In FORTRAN it is a real*8, so it is 8 byte long. 2)The sizeof(double) in C++ is 8 byte as well."}], "owner": {"reputation": 1, "user_id": 4606532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a2c1943a8ad438a8773bc691098f60?s=128&d=identicon&r=PG&f=1", "display_name": "AlfThilo", "link": "https://stackoverflow.com/users/4606532/alfthilo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1424881610, "creation_date": 1424881610, "question_id": 28724281, "link": "https://stackoverflow.com/questions/28724281/how-do-i-read-a-fortran-binary-file-in-c-at-position-of-subrecord", "title": "How do I read a fortran binary file in C++ at position of subrecord", "body": "<p>I have a binary file generated by fortran code. This file contains an huge array of doubles, the length is > 2GB. I need to open the file and to read the array. I managed to do this up to the point, where fortran includes the subrecord. The code I use so far is:</p>\n\n<pre><code>std::ifstream fin;\n\nfin.open(_fileName.c_str(), std::ifstream::in);\n\nfor(int i=0; i&lt;_nnz; i++){\n\n    fin.read( reinterpret_cast&lt;char*&gt;( &amp;tester[i] ),  sizeof(double));\n\n}\n</code></pre>\n\n<p>unfortunately this works up to the position, where the subrecord is included. As far as I know, the position of the subrecords starts at 2147483639 bytes and the width is 2*4 bye long (end-record + start-record). Additionaly the sizeof(double)==8. Therefore I have the records within one double. Is there a way to read the 18 byte information and extract the double out of it? To give a start, I poste my code which is not working.</p>\n\n<pre><code>char tmp[16];\nchar tmp8[8];\n\nfin.read( tmp,  sizeof(char)*16 );\n\nfor(int iC=0; iC&lt;7;iC++)\n    tmp8[iC]=tmp[iC+8];\ntmp8[7]=tmp[15];\n\ntmpStr &lt;&lt; tmp8;\nstd::cout &lt;&lt; (double)tmpStr.str()&lt;&lt; std::endl;\n</code></pre>\n"}, {"tags": ["c++", "macos", "qt", "cross-platform", "juce"], "comments": [{"owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1424881736, "post_id": 28724254, "comment_id": 45735316, "body": "are you asking about a cross-compiler, IDE, library, what?"}, {"owner": {"reputation": 11, "user_id": 4606543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d95e5679431023493261d26df22922?s=128&d=identicon&r=PG&f=1", "display_name": "df80", "link": "https://stackoverflow.com/users/4606543/df80"}, "reply_to_user": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1424939977, "post_id": 28724254, "comment_id": 45759476, "body": "Thanks first! I&#39;m looking a compiler suite that allow me to develop an application  that can be run both of windows (where it will be implemented) and on Mac OS. I have to develope a GUI tool with some data analisys e.g. RealTime Graph, data acquisition via ethernet interface. I have to maintain good ferformance. I would hope to use objective c++"}, {"owner": {"reputation": 5938, "user_id": 25615, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61a04d956448b88ea0c845d19a30125e?s=128&d=identicon&r=PG", "display_name": "Paul Lefebvre", "link": "https://stackoverflow.com/users/25615/paul-lefebvre"}, "edited": false, "score": 0, "creation_date": 1424955943, "post_id": 28724254, "comment_id": 45769220, "body": "Xojo can create multi platform, native apps for Windows, OS X, Linux (plus web and iOS).  <a href=\"Http://www.xojo.com\" rel=\"nofollow noreferrer\">Http://www.xojo.com</a>"}, {"owner": {"reputation": 1636, "user_id": 292039, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/b24a79efecb701b028563f0a067c3477?s=128&d=identicon&r=PG", "display_name": "sithereal", "link": "https://stackoverflow.com/users/292039/sithereal"}, "edited": false, "score": 0, "creation_date": 1424962080, "post_id": 28724254, "comment_id": 45773307, "body": "You can use QT. It supports windows, linux, osx, android, and some more."}, {"owner": {"reputation": 11, "user_id": 4606543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d95e5679431023493261d26df22922?s=128&d=identicon&r=PG&f=1", "display_name": "df80", "link": "https://stackoverflow.com/users/4606543/df80"}, "edited": false, "score": 0, "creation_date": 1425043837, "post_id": 28724254, "comment_id": 45811375, "body": "I also thought the suite juce having to make a product for the music market, what do you think?"}], "answers": [{"owner": {"reputation": 229, "user_id": 3445108, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f5137d8881d95f1a76783f1e6bceb5e1?s=128&d=identicon&r=PG&f=1", "display_name": "CGD", "link": "https://stackoverflow.com/users/3445108/cgd"}, "is_accepted": false, "score": 1, "last_activity_date": 1425356999, "creation_date": 1425356999, "answer_id": 28824119, "question_id": 28724254, "link": "https://stackoverflow.com/questions/28724254/develope-an-application-for-windows-and-mac-os/28824119#28824119", "title": "Develope an application for windows and Mac OS", "body": "<p>JUCE is not just about for Music industry. Its for all. I have used it in Music softwares, Image processing and only GUI applications too.\nIts a well built library which supports all platform. \nyou need not to create different project files for the application. JUCE creates it for you.\nAnd its pure C++. </p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 4606543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d95e5679431023493261d26df22922?s=128&d=identicon&r=PG&f=1", "display_name": "df80", "link": "https://stackoverflow.com/users/4606543/df80"}, "edited": false, "score": 0, "creation_date": 1427721433, "post_id": 29322301, "comment_id": 46880275, "body": "Thanks for your interest! are still being evaluated, I&#39;m doing it in my spare time. I noticed the lack of documentation and examples of juce respect on Qt, those are very important, even to begin to develop without losing too much time. Another thing that I want to keep in cosider is that the framework will also be used for other tools and the use of a generic framework perhaps is the winning choice. Qt seems a more general framework than juce.Any advice or comment are appreciated, it is a new world for me ..."}], "owner": {"reputation": 191, "user_id": 4400642, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/ef277a653df60372e4e07255cea12a3a?s=128&d=identicon&r=PG", "display_name": "Jeff-Russ", "link": "https://stackoverflow.com/users/4400642/jeff-russ"}, "is_accepted": false, "score": 0, "last_activity_date": 1427574867, "creation_date": 1427574867, "answer_id": 29322301, "question_id": 28724254, "link": "https://stackoverflow.com/questions/28724254/develope-an-application-for-windows-and-mac-os/29322301#29322301", "title": "Develope an application for windows and Mac OS", "body": "<p>I would say your two choices are Juce or Qt. Juce is geared toward audio and graphics, letting you get your hands on creating fast and powerful DSP algorithms. Although Juce's largest following is with developers making music software, it's fully capable of making general purpose applications with the same ease as Qt. Qt does have advantages resulting from it's greater adoption; you will find plenty of tutorials, books and courses on Qt but hardly much on Juce at the moment.</p>\n\n<p>Hopefully that will change soon as Juce was bought out by ROLI and will likely have more resources soon. </p>\n"}], "owner": {"reputation": 11, "user_id": 4606543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36d95e5679431023493261d26df22922?s=128&d=identicon&r=PG&f=1", "display_name": "df80", "link": "https://stackoverflow.com/users/4606543/df80"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 2, "score": -8, "last_activity_date": 1427574867, "creation_date": 1424881529, "last_edit_date": 1425648197, "question_id": 28724254, "link": "https://stackoverflow.com/questions/28724254/develope-an-application-for-windows-and-mac-os", "title": "Develope an application for windows and Mac OS", "body": "<p>I need to develop an application that can be run on both Windows and Mac OS X, is a application \"monitor\" that needs to display data in real time, connection over ethernet. I'm interested in the performance and graphics. I know very well the c++. can you help me in choosing a development tool?thank you</p>\n"}, {"tags": ["c++", "qt", "exception"], "comments": [{"owner": {"reputation": 373, "user_id": 4102905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1450838325/picture?type=large", "display_name": "Xarylem", "link": "https://stackoverflow.com/users/4102905/xarylem"}, "edited": false, "score": 0, "creation_date": 1424881532, "post_id": 28724137, "comment_id": 45735157, "body": "Edit: you are repeating the (convertFile...allConverted...trycatch) that in my opinion screams for a cicle wrapped in a single try/catch statement"}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "reply_to_user": {"reputation": 373, "user_id": 4102905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1450838325/picture?type=large", "display_name": "Xarylem", "link": "https://stackoverflow.com/users/4102905/xarylem"}, "edited": false, "score": 0, "creation_date": 1424881619, "post_id": 28724137, "comment_id": 45735219, "body": "I still have to run the loop, I only need to mark certain items accordingly if there were errors on them."}, {"owner": {"reputation": 373, "user_id": 4102905, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1450838325/picture?type=large", "display_name": "Xarylem", "link": "https://stackoverflow.com/users/4102905/xarylem"}, "edited": false, "score": 0, "creation_date": 1424881957, "post_id": 28724137, "comment_id": 45735478, "body": "moreover you can collapse the allConverted++ and if(allconv etc as: if (++allConverted &gt;= 2)         item-&gt;setIcon( QIcon(&quot;c:/code/Green.ico&quot;));"}, {"owner": {"reputation": 19932, "user_id": 2068573, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/0e6f781a205f3521290f89c84dc5f95d?s=128&d=identicon&r=PG", "display_name": "Neil Kirk", "link": "https://stackoverflow.com/users/2068573/neil-kirk"}, "edited": false, "score": 1, "creation_date": 1424884170, "post_id": 28724137, "comment_id": 45736938, "body": "Catch exceptions by reference. They may be polymorphic."}], "answers": [{"comments": [{"owner": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "edited": false, "score": 2, "creation_date": 1424883273, "post_id": 28724726, "comment_id": 45736357, "body": "If convertFile( file, dest1 fails, convertFile() for dest2 is not executed.  Unlike the source in the question."}], "owner": {"reputation": 1719, "user_id": 2619479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/127aeef4e048febca4fd6560b465359d?s=128&d=identicon&r=PG", "display_name": "Marco", "link": "https://stackoverflow.com/users/2619479/marco"}, "is_accepted": false, "score": 0, "last_activity_date": 1424882823, "creation_date": 1424882823, "answer_id": 28724726, "question_id": 28724137, "link": "https://stackoverflow.com/questions/28724137/handling-errors-in-a-loop-gracefully/28724726#28724726", "title": "Handling errors in a loop gracefully", "body": "<p>How about this ? </p>\n\n<pre><code>for(int i = 0; i &lt; numFiles; i++)\n{\n    bool anyErrors = false;\n\n    try\n    {\n        convertFile( file, dest1)\n        convertFile( file, dest2)\n    }\n    catch(std::runtime_error err)\n    {\n        anyErrors = true;\n    }\n\n    if (anyErrors)\n    {\n        item-&gt;setIcon( QIcon(\"c:/code/Red.ico\"));\n        QMessageBox::information(this, APP_NAME, err.what(), QMessageBox::Ok, QMessageBox::Abort) == QMessageBox::Abort);\n    }\n    else        \n        item-&gt;setIcon( QIcon(\"c:/code/Green.ico\"));\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "edited": false, "score": 0, "creation_date": 1424883353, "post_id": 28724758, "comment_id": 45736418, "body": "If both convertFile() s fail, don&#39;t you lose the err.what() of the first fail?"}, {"owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "reply_to_user": {"reputation": 1520, "user_id": 706147, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/761a372bbc701a03b3eccb949199cbfc?s=128&d=identicon&r=PG", "display_name": "Michael Vincent", "link": "https://stackoverflow.com/users/706147/michael-vincent"}, "edited": false, "score": 0, "creation_date": 1424883617, "post_id": 28724758, "comment_id": 45736586, "body": "@MichaelVincent Hmm, what do you mean by that? The scope of <code>err</code> is limited by the try-catch blocks, so where else would you want to be using it?"}, {"owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "edited": false, "score": 0, "creation_date": 1424891024, "post_id": 28724758, "comment_id": 45741192, "body": "The first give me correct result and is better than my post. I also like the fact that if any of the two <code>convertFile</code>fails, it will display the warning icon which is good."}], "owner": {"reputation": 1605, "user_id": 1339615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6MHBM.png?s=128&g=1", "display_name": "Julian", "link": "https://stackoverflow.com/users/1339615/julian"}, "is_accepted": true, "score": 1, "last_activity_date": 1424884284, "last_edit_date": 1424884284, "creation_date": 1424882913, "answer_id": 28724758, "question_id": 28724137, "link": "https://stackoverflow.com/questions/28724137/handling-errors-in-a-loop-gracefully/28724758#28724758", "title": "Handling errors in a loop gracefully", "body": "<p>Do you want to attempt the second <code>convertFile</code> even when the first call fails? If that is what is intended, then something like this would be cleaner:</p>\n\n<pre><code>for(int i = 0; i &lt; numFiles; i++) {\n\n    bool success = true;\n\n    try {\n        convertFile(file, dest1);\n    }\n    catch(const std::runtime_error&amp; err) {\n        success = false;\n        QMessageBox::information(this, APP_NAME, err.what(), QMessageBox::Ok, QMessageBox::Abort) == QMessageBox::Abort);\n    }\n\n    try {\n        convertFile(file, dest2);\n    }\n    catch(const std::runtime_error&amp; err) {\n        success = false;\n        QMessageBox::info(this, APP_NAME, err.what(), QMessageBox::Ok, QMessageBox::Abort) == QMessageBox::Abort);\n    }\n\n    if (success) {\n        item-&gt;setIcon(QIcon(\"c:/code/Green.ico\"));\n    }\n    else {\n        item-&gt;setIcon(QIcon(\"c:/code/Red.ico\"));\n    }\n}\n</code></pre>\n\n<p>Otherwise, it could be simplified to this:</p>\n\n<pre><code>for(int i = 0; i &lt; numFiles; i++) {\n    try {\n        convertFile(file, dest1);\n        convertFile(file, dest2);\n        item-&gt;setIcon(QIcon(\"c:/code/Green.ico\"));\n    }\n    catch(const std::runtime_error&amp; err) {\n        item-&gt;setIcon(QIcon(\"c:/code/Red.ico\"));\n        QMessageBox::information(this, APP_NAME, err.what(), QMessageBox::Ok, QMessageBox::Abort) == QMessageBox::Abort);\n    }\n}\n</code></pre>\n\n<p>On a side note, exceptions should generally be caught by const reference (which I have illustrated here), in order to account for polymorphic hierarchy.</p>\n"}], "owner": {"reputation": 9091, "user_id": 841330, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/bcafddab5ef9efc3a31235b7db56680e?s=128&d=identicon&r=PG", "display_name": "zar", "link": "https://stackoverflow.com/users/841330/zar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 28724758, "answer_count": 2, "score": -1, "last_activity_date": 1424884284, "creation_date": 1424881249, "question_id": 28724137, "link": "https://stackoverflow.com/questions/28724137/handling-errors-in-a-loop-gracefully", "title": "Handling errors in a loop gracefully", "body": "<p>I am traversing a list and converting each item in the list (a file name). If there were no errors, I display green icon for the file otherwise red. My code below has a little too much logic to track this, could it be better?</p>\n\n<pre><code>for(int i = 0; i &lt; numFiles; i++)\n{\n    ......\n\n    int allConverted = 0;\n\n    try\n    {\n        convertFile( file, dest1)\n\n        allConverted++;\n    }\n    catch(std::runtime_error err)\n    {\n        item-&gt;setIcon( QIcon(\"c:/code/Red.ico\"));\n\n        QMessageBox::information(this, APP_NAME, err.what(), QMessageBox::Ok, QMessageBox::Abort) == QMessageBox::Abort);\n    }\n\n    try\n    {\n        convertFile( file, dest2)\n\n        allConverted++;\n    }\n    catch(std::runtime_error err)\n    {\n        item-&gt;setIcon( QIcon(\"c:/code/Red.ico\"));\n\n        QMessageBox::info(this, APP_NAME, err.what(), QMessageBox::Ok, QMessageBox::Abort) == QMessageBox::Abort);\n\n    }\n\n    if (allConverted &gt;= 2)\n        item-&gt;setIcon( QIcon(\"c:/code/Green.ico\"));\n\n}\n</code></pre>\n"}, {"tags": ["c++", "visual-studio-2010"], "comments": [{"owner": {"reputation": 117699, "user_id": 62576, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/15264f7bf48e10ce32dfa4865a13763c?s=128&d=identicon&r=PG", "display_name": "Ken White", "link": "https://stackoverflow.com/users/62576/ken-white"}, "edited": false, "score": 0, "creation_date": 1424890314, "post_id": 28724024, "comment_id": 45740819, "body": "This is a duplicate of so many other questions it&#39;s hard to know which one to choose. Search this site for <code>[c++][winapi] mouse click</code>, or read this <a href=\"http://stackoverflow.com/q/28386029/62576\">answer</a> (the question is closed, or I&#39;d use it as the duplicate). Search for <code>[winapi] find window</code> for locating the class or ID of a control."}], "answers": [{"owner": {"reputation": 1792, "user_id": 1836044, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d266fe239d1eaef65e0e234a4dae7a2c?s=128&d=identicon&r=PG", "display_name": "parrowdice", "link": "https://stackoverflow.com/users/1836044/parrowdice"}, "is_accepted": false, "score": 0, "last_activity_date": 1424886828, "creation_date": 1424886828, "answer_id": 28726184, "question_id": 28724024, "link": "https://stackoverflow.com/questions/28724024/how-to-make-visual-studio-2010-c-mouse-click-in-windows-form-application/28726184#28726184", "title": "How to make, Visual studio 2010 c++ mouse click in windows form application?", "body": "<p>One way would be something like:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms633499%28v=vs.85%29.aspx\" rel=\"nofollow\">FindWindow</a> to get a handle to \"MY made browser\"'s window.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ms633494%28VS.85%29.aspx\" rel=\"nofollow\">EnumChildWindows</a> recursively to iterate through, checking the class with <a href=\"https://msdn.microsoft.com/en-us/library/ms633582%28v=VS.85%29.aspx\" rel=\"nofollow\">GetClassName</a>.</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms644944%28v=vs.85%29.aspx\" rel=\"nofollow\">PostMessage</a> to post a <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms645607%28v=vs.85%29.aspx\" rel=\"nofollow\">WM_LBUTTONDOWN</a> message to your found button.</p>\n\n<p>Worth mentioning: there are existing tools that do this kind of thing. <a href=\"http://www.froglogic.com/squish/gui-testing/\" rel=\"nofollow\">Squish</a> is one that I know of, but I'm sure a quick google will find more if you want.</p>\n"}], "owner": {"reputation": 1, "user_id": 4538328, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K_gqqxcAuwQ/AAAAAAAAAAI/AAAAAAAAACg/UmY5Zse-MsQ/photo.jpg?sz=128", "display_name": "Lasinys", "link": "https://stackoverflow.com/users/4538328/lasinys"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1424886828, "creation_date": 1424880954, "question_id": 28724024, "link": "https://stackoverflow.com/questions/28724024/how-to-make-visual-studio-2010-c-mouse-click-in-windows-form-application", "title": "How to make, Visual studio 2010 c++ mouse click in windows form application?", "body": "<p>How can i make a mouse click with code? Basicly what I need is to, that the program could find \"Class\" or \"Id\" of a button, in MY made browser, and if the code finds required Class or Id the code would press it?</p>\n"}, {"tags": ["c++", "templates", "parameters", "undefined", "enable-if"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1424881429, "post_id": 28724017, "comment_id": 45735086, "body": "You may use Raymond Chen&#39;s answer to have the default case (which is the version non specialized of the template)."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1424881620, "post_id": 28724017, "comment_id": 45735220, "body": "@Jarod42 What are you saying that I could pass here? <code>foo&lt;int, struct matching_type{}::type&gt;(13);</code>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1424881919, "post_id": 28724017, "comment_id": 45735451, "body": "If you specify <code>R</code>, you no longer use SFINAE. I&#39;m not sure what you want to obtain exactly though."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1424882722, "post_id": 28724017, "comment_id": 45736012, "body": "@Jarod42 If you look at <code>DefaultType</code> that&#39;s what is &quot;fallen through&quot; to if none of the other cases matched. I want to achieve a fail there without adding Dan&#39;s last edit: <a href=\"http://stackoverflow.com/revisions/28699568/4\">stackoverflow.com/revisions/28699568/4</a>"}, {"owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 1, "creation_date": 1424883157, "post_id": 28724017, "comment_id": 45736288, "body": "I&#39;ve read the original question, then yours about three times, and I still can&#39;t figure out what you&#39;re asking. Do you want <code>13.0</code> to fail? Do you want <code>13.0</code> to work? Some code demonstrating what you want to work, what you want to fail, and how you want it to fail would be great."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "edited": false, "score": 0, "creation_date": 1424888785, "post_id": 28724017, "comment_id": 45739992, "body": "@MarkB I have attempted to clarify, <a href=\"http://stackoverflow.com/users/1147772/drax\">Drax</a> seems to have the right answer. Perhaps his comment would be helpful in understanding: <a href=\"http://stackoverflow.com/questions/28724017/pass-a-failing-template-argument?noredirect=1#comment45739879_28724605\" title=\"pass a failing template argument\">stackoverflow.com/questions/28724017/&hellip;</a>"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1424940593, "post_id": 28724017, "comment_id": 45759766, "body": "The linked answer has been edited to manage your case by introducing <code>struct fail_on_default {};</code>"}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1425036848, "post_id": 28724017, "comment_id": 45807228, "body": "@Jarod42 Right, that&#39;s what I was trying to avoid. By using being able to pass &quot;undefined&quot; as the default argument I am able to preserve the functionality that <i>can</i> be defaulted if that is desired later in my program."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1425039636, "post_id": 28724017, "comment_id": 45808839, "body": "@JonathanMee:  <code>fail_on_default</code> is just a <i>special</i> default type, you still may use valid default type if needed."}], "answers": [{"comments": [{"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1424888196, "post_id": 28724605, "comment_id": 45739665, "body": "Well I&#39;m glad you get it. This is probably the correct answer. Anything I should have written up there that would have made it clearer for you?"}, {"owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "reply_to_user": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1424888577, "post_id": 28724605, "comment_id": 45739879, "body": "@JonathanMee Yeah, the <code>undefined</code> type is actually not a type. It is a template expression that cannot be evaluated because you seek something that doesn&#39;t exist, if it was a dynamic language like javascript sure it would be <code>undefined</code> but in a statically typed compiled language like c++ it&#39;s wrong to even refer to it as an <code>undefined</code> type and it should rather be seen as an <code>non evaluable</code> template expression."}], "owner": {"reputation": 11187, "user_id": 1147772, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/OAgfw.jpg?s=128&g=1", "display_name": "Drax", "link": "https://stackoverflow.com/users/1147772/drax"}, "is_accepted": true, "score": 2, "last_activity_date": 1424882431, "creation_date": 1424882431, "answer_id": 28724605, "question_id": 28724017, "link": "https://stackoverflow.com/questions/28724017/pass-a-failing-template-argument/28724605#28724605", "title": "Pass a Failing Template Argument", "body": "<p>The simplest way to have the <code>undefined</code> type you are talking about is:</p>\n\n<pre><code>std::enable_if_t&lt;false&gt;\n</code></pre>\n\n<p>So you can call your <code>foo</code> template like this:</p>\n\n<pre><code>foo&lt;int, std::enable_if_t&lt;false&gt;&gt;(13)\n</code></pre>\n\n<p>And have it fail as you asked.</p>\n"}], "owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 28724605, "answer_count": 1, "score": 0, "last_activity_date": 1424888118, "creation_date": 1424880932, "last_edit_date": 1495541187, "question_id": 28724017, "link": "https://stackoverflow.com/questions/28724017/pass-a-failing-template-argument", "title": "Pass a Failing Template Argument", "body": "<p><a href=\"https://stackoverflow.com/users/828279/dan\">Dan</a>'s answer to this question: <a href=\"https://stackoverflow.com/q/28699281/2642059\">Is There Anything Like a Templatized Case-Statement</a> takes a <code>DefaultType</code> template parameter.</p>\n\n<p>Is it possible to pass something there which will force a compile time fail?</p>\n\n<p>For example, given this templatized function:</p>\n\n<pre><code>template &lt;typename T, typename R = enable_if_t&lt;is_integral&lt;T&gt;::value, int&gt;&gt;\nR foo(T bar) {return static_cast&lt;R&gt;(bar);}\n</code></pre>\n\n<p>This code will compile fine: <code>foo(13)</code> But this code will fail: <code>foo(13.0)</code>.</p>\n\n<p>The reason that <code>foo(13.0)</code> will fail at compile time is that <code>enable_if_t</code> is undefined. Is there a name for \"undefined\" that I can pass to the afore mentioned <code>DefaultType</code>?</p>\n\n<p>If so I should be able to test this by calling <code>foo&lt;int, undefined&gt;(13)</code> and having it fail, if in fact <code>undefined</code> was the type I'm looking for.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Apparently more explanation is called for.</p>\n\n<p><a href=\"https://stackoverflow.com/users/828279/dan\">Dan</a>'s `static_case can be called like this:</p>\n\n<pre><code>template&lt;class T&gt;\ntypename static_switch&lt;sizeof(T),\n                       int, // default case\n                       static_case&lt;sizeof(char),char&gt;,\n                       static_case&lt;sizeof(short),short&gt;,\n                       static_case&lt;sizeof(long),long&gt;,\n                       static_case&lt;sizeof(long long),long long&gt;&gt;::type foo(T bar){ return reinterpret_cast&lt;decltype(foo(bar))&amp;&gt;(bar);}\n</code></pre>\n\n<p>I want to pass \"undefined\" or whatever to that second parameter to make it fail to compile <em>only</em> when that parameter is evaluated. (The parameter marked \"default case\".)</p>\n\n<p>In my simple test passing any two parameters to <code>foo</code> will succeed (for example <code>foo&lt;int, int&gt;(13);</code>) I want a parameter that would mimic the effect of <code>enable_if_t</code> causing it to fail (like when we call <code>foo&lt;double&gt;(13.0);</code>) In the example I said call <code>foo&lt;in, undefined&gt;(13)</code>. I just want to know what \"undefined\" is.</p>\n"}]