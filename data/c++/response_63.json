[{"tags": ["c++"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458780468, "post_id": 36190980, "comment_id": 60017467, "body": "<code>maxTxEnergy = TxEnergy; if(maxTxEnergy&lt;TxEnergy)  maxTxEnergy = TxEnergy; </code> something is wrong is here. This if will never be true. Maybe you don&#39;t need the assignment before the if ?"}, {"owner": {"reputation": 5, "user_id": 6106625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064394743625817/picture?type=large", "display_name": "Ayoub Oukhatar", "link": "https://stackoverflow.com/users/6106625/ayoub-oukhatar"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458818865, "post_id": 36190980, "comment_id": 60031445, "body": "Thanks Michel for your answer,but I think that the program is only verified for j = 1, and the result for j = 1 is shown 8 times.ie the loop for does not increment the value of j; can you help me to fixed this probleme"}, {"owner": {"reputation": 1047, "user_id": 2101084, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/huVYh.jpg?s=128&g=1", "display_name": "LibertyPaul", "link": "https://stackoverflow.com/users/2101084/libertypaul"}, "edited": false, "score": 0, "creation_date": 1458820244, "post_id": 36190980, "comment_id": 60032267, "body": "You can use std::to_string instead of IntToString, don&#39;t invent bicycle :-)"}], "answers": [{"tags": [], "owner": {"reputation": 2361, "user_id": 3917161, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/4eec7fe572407b99eb30199b0a96a2dc?s=128&d=identicon&r=PG&f=1", "display_name": "J3soon", "link": "https://stackoverflow.com/users/3917161/j3soon"}, "is_accepted": false, "score": 0, "last_activity_date": 1458821001, "creation_date": 1458821001, "answer_id": 36199732, "question_id": 36190980, "link": "https://stackoverflow.com/questions/36190980/read-data-from-file-c/36199732#36199732", "title": "Read data from file C++", "body": "<p>Your question is unformatted, I think you should remove this line</p>\n\n<pre><code>maxTxEnergy = TxEnergy;\n</code></pre>\n\n<p>Since this line makes <code>maxTxEnergy</code> to the last <code>TxEnergy</code> you read.</p>\n"}], "owner": {"reputation": 5, "user_id": 6106625, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064394743625817/picture?type=large", "display_name": "Ayoub Oukhatar", "link": "https://stackoverflow.com/users/6106625/ayoub-oukhatar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1563971157, "creation_date": 1458777486, "last_edit_date": 1458818910, "question_id": 36190980, "link": "https://stackoverflow.com/questions/36190980/read-data-from-file-c", "title": "Read data from file C++", "body": "<p>I would like to extract the max values for each node but my program prints me just the max for node number 1 eight times:</p>\n\n<p><strong>223\n223\n223\n223\n223\n223\n223\n223</strong></p>\n\n<p>Given the input data I expect to see:</p>\n\n<p><strong>223\n736\n898\n543\n367\n726\n568\n563</strong></p>\n\n<p><a href=\"http://i.stack.imgur.com/kqO2H.png\" rel=\"nofollow\">this is my textfile </a></p>\n\n<p>Any help \nThanks in advance </p>\n\n<p>this is my code: </p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n#include &lt;sstream&gt;\n#include &lt;algorithm&gt;\n#include &lt;vector&gt;\n#include &lt;string&gt;\n#include &lt;numeric&gt;\nusing namespace std;\n   template &lt;typename T&gt;\n   string IntToString(T Number)\n    {   stringstream ss;\n      ss &lt;&lt;Number;\n     return ss.str();\n     }\nint main() {\n                ifstream ifs;\n        ofstream ofs;\n                double maxTxEnergy = 0;\n                vector&lt;double&gt; TxE;\n                double maxRxEnergy = 0;\n                double FullTxEnergy = 0;\n                double FullRxEnergy = 0;\nfor (int i = 1; i &lt;=1; i++){    \n        stringstream ss;\n        ss &lt;&lt;i&lt;&lt;\"00\";\n        string filename = ss.str();\n        filename.append(\".txt\");\n        ifs.open(filename.c_str());\n        cout &lt;&lt; \"Analyzing: \" &lt;&lt; filename &lt;&lt; endl;\n        string filename1 = \"Result/\";\n        filename1.append(filename);\n        ofs.open(filename1.c_str());\n        string str;     \n for (int j=1; j&lt;=8; j++)\n{\n   string s = IntToString(j);\n        while (!ifs.eof()) {\n            getline (ifs, str);\n int a = str.find(\"transmission number  for node \"+s+\" is :\");\n if (a != -1) {\n                double TxEnergy = 0;\n                istringstream iss(str.substr(a+62));\n                iss &gt;&gt; TxEnergy;\n                maxTxEnergy = TxEnergy;\n                                if(maxTxEnergy&lt;TxEnergy)\n                                maxTxEnergy = TxEnergy; \n        }\n\n  }\n   TxE.push_back(maxTxEnergy);            \n\n}\nfor (std::vector&lt;double&gt;::iterator it = TxE.begin(); it != TxE.end (); it++)\n   {\nofs &lt;&lt; \"Full transmission Energy: \" &lt;&lt; *it &lt;&lt; endl; \n    }          \n        ifs.close();\n        ofs.close();\n    }\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "strftime", "chrono", "localtime"], "answers": [{"comments": [{"owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 0, "creation_date": 1458820381, "post_id": 36191097, "comment_id": 60032361, "body": "Jerry, I&#180;ve tried <code>ss &lt;&lt; std::put_time(&amp;timeinfo, &quot;%FT%TZ&quot;);</code> with no success also... Same error... Seens that <code>%FT</code> and <code>%TZ</code> are not supported at all in VS2012. So I&#180;ve changed to <code>&quot;%Y-%m-%dT%H:%M:%SZ&quot; and is working with </code>strftime` AND std::put_time. Thanks for helping."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "edited": false, "score": 0, "creation_date": 1458823514, "post_id": 36191097, "comment_id": 60034325, "body": "@Mendes: Yes, I&#39;d guess that <code>put_time</code> is little more than a wrapper around <code>strftime</code> (or both use the same engine), so for any given compiler, the two are likely to support the same conversions--switching between them is purely a matter of convenience, not likely to affect your original question."}], "tags": [], "owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "is_accepted": true, "score": 4, "last_activity_date": 1458792709, "last_edit_date": 1458792709, "creation_date": 1458778436, "answer_id": 36191097, "question_id": 36190924, "link": "https://stackoverflow.com/questions/36190924/localtime-s-and-strftime-usage-building-iso-time-string/36191097#36191097", "title": "localtime_s and strftime usage building ISO time string", "body": "<p>The <code>%F</code> and <code>%T</code> conversions were added in C99, and VS 2012 only supports C89.</p>\n\n<p>Although it still doesn't try to support all of C99, I believe VS 2015 adds enough more (especially the C99 library functions, which are also part of C++11) that this should work fine with it.</p>\n\n<p>If you need to continue using the older compiler/library, %F and %T are both basically \"shortcuts\" for some formats that were already supported in C89. If I'm reading the requirements correctly, the following should be equivalent:</p>\n\n<pre><code>std::strftime(buffer, 32, \"%Y-%m-%dT%H:%M:%SZ\", &amp;timeinfo);\n</code></pre>\n\n<p>As an aside, if your compiler supports C++11, it's generally easier and cleaner to use <a href=\"http://en.cppreference.com/w/cpp/io/manip/put_time\" rel=\"nofollow\"><code>std::put_time</code></a> instead of <code>strftime</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 2, "last_activity_date": 1458788577, "creation_date": 1458788577, "answer_id": 36192571, "question_id": 36190924, "link": "https://stackoverflow.com/questions/36190924/localtime-s-and-strftime-usage-building-iso-time-string/36192571#36192571", "title": "localtime_s and strftime usage building ISO time string", "body": "<p>This is a good question (upvoted).  And Jerry Coffin's answer is a good answer (also upvoted).  This answer is about adding further information about an alternative open-source solution which is known to work on VS-2013 and later, gcc, and clang.  This alternative will produce <strong>identical</strong> output to <code>TimePointToISOString</code>.  In order to differentiate it, I've given it another name:  <code>to_local_string</code>:</p>\n\n<pre><code>std::string\nto_local_string(const std::chrono::system_clock::time_point&amp; time)\n{\n    using namespace date;\n\n    auto zone = current_zone();\n    auto local = floor&lt;std::chrono::milliseconds&gt;(zone-&gt;to_local(time).first);\n    auto dp = floor&lt;days&gt;(local);\n    year_month_day ymd = dp;\n    std::stringstream ss;\n    ss &lt;&lt; ymd &lt;&lt; 'T' &lt;&lt; make_time(local-dp);\n    return ss.str();\n}\n</code></pre>\n\n<p>This uses the time zone database parser found here:</p>\n\n<p><a href=\"https://github.com/HowardHinnant/date\" rel=\"nofollow\">https://github.com/HowardHinnant/date</a></p>\n\n<p>and documented here:</p>\n\n<p><a href=\"http://howardhinnant.github.io/tz.html\" rel=\"nofollow\">http://howardhinnant.github.io/tz.html</a></p>\n\n<p>This is a parser of the <a href=\"http://www.iana.org/time-zones\" rel=\"nofollow\">IANA Timezone database</a>, and is used here to simply find the UTC offset for the local timezone.  Once the local time_point is found (stored as a <code>std::chrono::system_clock::time_point</code>), it is broken up into field types year/month/day/hour/minute/second/millisecond using <a href=\"http://howardhinnant.github.io/date_v2.html\" rel=\"nofollow\">this library</a> whose implementation is found at the same github site.</p>\n\n<p>I just ran both <code>TimePointToISOString</code> and <code>to_local_string</code> on the same time_point and the output was:</p>\n\n<pre><code>2016-03-23T22:54:52.626\n2016-03-23T22:54:52.626\n</code></pre>\n"}], "owner": {"reputation": 13626, "user_id": 2697571, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/cefd29d899fd6175ce401961e209a2a8?s=128&d=identicon&r=PG&f=1", "display_name": "Mendes", "link": "https://stackoverflow.com/users/2697571/mendes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1365, "favorite_count": 0, "accepted_answer_id": 36191097, "answer_count": 2, "score": 2, "last_activity_date": 1458792709, "creation_date": 1458777189, "question_id": 36190924, "link": "https://stackoverflow.com/questions/36190924/localtime-s-and-strftime-usage-building-iso-time-string", "title": "localtime_s and strftime usage building ISO time string", "body": "<p>I\u00b4ve wrote the following function that receives a time point and return a ISO string with milliseconds:</p>\n\n<pre><code>std::string TimePointToISOString(const std::chrono::time_point&lt;std::chrono::system_clock&gt;&amp; time)\n    {\n        std::time_t rawTime = std::chrono::system_clock::to_time_t(time);\n        struct tm timeinfo;\n        localtime_s(&amp;timeinfo, &amp;rawTime);\n\n        std::chrono::milliseconds ms = std::chrono::duration_cast&lt;std::chrono::milliseconds&gt;(time.time_since_epoch());\n        std::size_t frac_seconds = ms.count() % 1000;\n\n        char buffer[32];\n        std::strftime(buffer, 32, \"%FT%TZ\", &amp;timeinfo);\n\n        std::string bufferStr(buffer);\n        std::stringstream ss;\n        ss &lt;&lt; bufferStr.substr(0, 19) &lt;&lt; \".\" &lt;&lt; std::setw(3) &lt;&lt; std::setfill ('0') &lt;&lt; frac_seconds &lt;&lt; bufferStr.substr(20);\n\n        return ss.str();\n    }\n</code></pre>\n\n<p>I\u00b4ve used to run that on Linux with the <code>localtime()</code> function with no problems at all. Now I am migrating to Windows/VS2012 and the compiler suggests to change <code>localtime()</code> for a safer <code>localtime_s()</code>, done immediately.</p>\n\n<p>After the conversion the <code>strftime</code> call does crash at runtime with the following error: </p>\n\n<pre><code>Expression: (\"Invalid format directive\", 0)\n</code></pre>\n\n<p>Compilation runs fine. Help appreciated to find out what\u00b4s going on here. I guess something simple that I can\u00b4t notice...</p>\n"}, {"tags": ["c++", "syntax"], "answers": [{"tags": [], "owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "is_accepted": true, "score": 3, "last_activity_date": 1458778250, "last_edit_date": 1458778250, "creation_date": 1458777260, "answer_id": 36190940, "question_id": 36190913, "link": "https://stackoverflow.com/questions/36190913/typedef-t-type-syntax/36190940#36190940", "title": "typedef T Type::* syntax", "body": "<pre><code>typedef R BaseType::* VarType;\n</code></pre>\n\n<p>is a type alias which defines <code>VarType</code> as a pointer-to-member-of-<code>BaseType</code> of type <code>R</code>. In the second marked line, you are accessing the field <code>_variable</code> via the <a href=\"http://en.cppreference.com/w/cpp/language/operator_member_access#Built-in_pointer-to-member_access_operators\" rel=\"nofollow\">pointer-to-member access operator</a> <code>-&gt;*</code>, see e.g. <a href=\"http://en.cppreference.com/w/cpp/language/pointer#Pointers_to_data_members\" rel=\"nofollow\">this</a> for more details about the syntax and some examples.</p>\n"}], "owner": {"reputation": 435, "user_id": 5451820, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3Me0j.jpg?s=128&g=1", "display_name": "Kira", "link": "https://stackoverflow.com/users/5451820/kira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 1, "accepted_answer_id": 36190940, "answer_count": 1, "score": 3, "last_activity_date": 1458778250, "creation_date": 1458777144, "question_id": 36190913, "link": "https://stackoverflow.com/questions/36190913/typedef-t-type-syntax", "title": "typedef T Type::* syntax", "body": "<p>I need help to understand the following (simplified) code snipped:</p>\n\n<pre><code>template &lt; typename R &gt;\nstruct Variable\n{\n    typedef VariableBaseTable&lt; R &gt;  BaseType;\n    typedef R BaseType::*            VarType; //!\n\n    template &lt; typename Type &gt;\n    R &amp; operator()(Type * obj) const\n    {\n        return (reinterpret_cast&lt; ObjType &gt;(obj))-&gt;*(_variable); //!\n    }\n    // more stuff follows\n}\n</code></pre>\n\n<p>The two lines I need help understanding are marked with a <code>//!</code> in the end.</p>\n\n<p>I could not understand what the <code>R BaseType::*</code> is defining. In particular, how the <code>::*</code> syntax works.</p>\n\n<p>In the second marked line, I could not understand the syntax <code>obj-&gt;*(_var)</code>, I can see that obj is being dereferenced, but what the <code>*</code> is doing there right after it?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 657, "user_id": 5551222, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec7ed5c4152d7ad7cc9358d60d33d62?s=128&d=identicon&r=PG", "display_name": "Baronz", "link": "https://stackoverflow.com/users/5551222/baronz"}, "edited": false, "score": 0, "creation_date": 1458777352, "post_id": 36190861, "comment_id": 60016685, "body": "Unnamed parameters ARE legal, but of only a few specific uses: <a href=\"http://stackoverflow.com/questions/12186698/on-unnamed-parameters-to-functions-c\" title=\"on unnamed parameters to functions c\">stackoverflow.com/questions/12186698/&hellip;</a>"}, {"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "reply_to_user": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1458777683, "post_id": 36190861, "comment_id": 60016776, "body": "@KerrekSB My bad. I meant parameter of course. Edited. Hopefully makes sense now."}, {"owner": {"reputation": 426981, "user_id": 596781, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a18405dd4b022837867d1f5453a05f41?s=128&d=identicon&r=PG", "display_name": "Kerrek SB", "link": "https://stackoverflow.com/users/596781/kerrek-sb"}, "edited": false, "score": 0, "creation_date": 1458777853, "post_id": 36190861, "comment_id": 60016825, "body": "@luk32: Thanks, much clearer."}, {"owner": {"reputation": 66610, "user_id": 2411320, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5kF5N.jpg?s=128&g=1", "display_name": "gsamaras", "link": "https://stackoverflow.com/users/2411320/gsamaras"}, "edited": false, "score": 0, "creation_date": 1458777971, "post_id": 36190861, "comment_id": 60016855, "body": "Good edit Luk32, retracting my downvote and close vote."}], "answers": [{"comments": [{"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1458778424, "post_id": 36190985, "comment_id": 60016981, "body": "Ha! Looks awesome. Do you know if there is anything in standard for this? There is plenty helper struct templates. So maybe there is no need to define <code>tag</code>."}, {"owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "reply_to_user": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1458783070, "post_id": 36190985, "comment_id": 60018237, "body": "@luk2 I&#39;m afraid not; the standard has some tags but they&#39;re concrete (<a href=\"http://en.cppreference.com/w/cpp/iterator/iterator_tags\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/iterator/iterator_tags</a>) while the type metafunctions could be used as tags but they really aren&#39;t designed for that purpose. An advantage of using your own tag class template is that you can have it serve double duty as an ADL parameter, so that you don&#39;t have to qualify free function calls."}], "tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 6, "last_activity_date": 1458777523, "last_edit_date": 1495542227, "creation_date": 1458777523, "answer_id": 36190985, "question_id": 36190861, "link": "https://stackoverflow.com/questions/36190861/is-it-possible-to-pass-an-unnamed-parameter-with-out-creating-a-temporary-vari/36190985#36190985", "title": "Is it possible to &quot;pass&quot; an unnamed parameter with out creating a temporary variable?", "body": "<p>You can't get any clearer or more efficient than passing an empty tag struct:</p>\n\n<pre><code>template&lt;class T&gt; struct tag {};\n\ndouble get(tag&lt;double&gt;) {\n    return d;\n}\n\ntemplate &lt;typename T&gt;\nT get_as() {\n    return get(tag&lt;T&gt;{});\n}\n</code></pre>\n\n<p>An advantage over using pointer types for dispatch is that there's no danger of accidentally indirecting the passed-in null pointer.</p>\n\n<p>(Aside: <a href=\"https://stackoverflow.com/questions/16189106/what-happens-to-empty-classes-in-the-amd64-abi\">What happens to empty classes in the AMD64 ABI?</a> - but your calls will usually be inlined.)</p>\n"}, {"comments": [{"owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "edited": false, "score": 0, "creation_date": 1458784744, "post_id": 36191234, "comment_id": 60018666, "body": "This is nice, but the use-case is slightly different. I want a generic way to return a member. It&#39;s slightly different semantically, although close. With the conversion you loose the original object, the problem was that this was passed to a generic function, which transformed the concrete member, or something like that. It wasn&#39;t mine problem originally. There was an overloaded <code>set</code>, which was trivial, and there was a desire for an overloaded <code>get</code>. Maybe <code>get_as</code> is a bit misleading. Something like <code>get_me</code> would be better, like <code>get_me&lt;int&gt;</code>, <code>get_me&lt;string&gt;</code>. Props for the <code>static_assert</code>"}], "tags": [], "owner": {"reputation": 2949, "user_id": 5866175, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cc1bd52e94e5a59c8dad24cea21b9e71?s=128&d=identicon&r=PG&f=1", "display_name": "Jts", "link": "https://stackoverflow.com/users/5866175/jts"}, "is_accepted": false, "score": 1, "last_activity_date": 1458779852, "last_edit_date": 1458779852, "creation_date": 1458779470, "answer_id": 36191234, "question_id": 36190861, "link": "https://stackoverflow.com/questions/36190861/is-it-possible-to-pass-an-unnamed-parameter-with-out-creating-a-temporary-vari/36191234#36191234", "title": "Is it possible to &quot;pass&quot; an unnamed parameter with out creating a temporary variable?", "body": "<p>Since you are talking about \"aesthetics\", I'm wondering if this may help you:</p>\n\n<p><a href=\"http://ideone.com/W2n8Qj\" rel=\"nofollow\">Live Demo</a></p>\n\n<pre><code>template&lt;typename U&gt;\nclass A\n{\npublic:\n    static_assert(!std::is_same&lt;int, U&gt;::value &amp;&amp; !std::is_same&lt;double,U&gt;::value,\n                               \"Template argument cannot be &lt;int&gt; or &lt;double&gt;.\");\n    A(const U&amp; u) : u(u) {};\n    explicit operator U() { return u; }\n    explicit operator int() { return i; }\n    explicit operator double() { return d; }\n\nprivate:\n    U u;\n    int i = 5;\n    double d = 3.14;\n};\n\nint main()\n{\n    A&lt;string&gt; a(\"wow\");\n    cout &lt;&lt; double(a) &lt;&lt; '\\n';\n    cout &lt;&lt; int(a) &lt;&lt; '\\n';\n    cout &lt;&lt; string(a) &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>I think user-defined conversion operators are not evil if they are explicit.</p>\n\n<p>You cant use them by \"mistake\". Also, this class should have no overhead.</p>\n"}], "owner": {"reputation": 14898, "user_id": 1133179, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e3a760e170dcbd539461a86a397f1abe?s=128&d=identicon&r=PG", "display_name": "luk32", "link": "https://stackoverflow.com/users/1133179/luk32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 36190985, "answer_count": 2, "score": 4, "last_activity_date": 1458781415, "creation_date": 1458776855, "last_edit_date": 1458777653, "question_id": 36190861, "link": "https://stackoverflow.com/questions/36190861/is-it-possible-to-pass-an-unnamed-parameter-with-out-creating-a-temporary-vari", "title": "Is it possible to &quot;pass&quot; an unnamed parameter with out creating a temporary variable?", "body": "<p>I was writing a simple type based dispatcher using unnamed parameter, which is a pretty normal thing I guess.</p>\n\n<p>When it came to actually call the function, I wanted to pick up the overload with out having any variable at hand. Is it possible?</p>\n\n<p>E.g.</p>\n\n<pre><code>void f1(int /*can change the type*/) {\n}\nint main(int, char*) {\n  f1(/*what to put here?*/); \n  return 0;\n}\n</code></pre>\n\n<p>My \"real\" example was a simple type-based dispatcher. Best what I came up with was a pointer as the unnamed parameter, I think it has least overhead possible:</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\ntemplate&lt;typename U&gt;\nclass A {\npublic:\n\nA(const U&amp; u) : u(u) {};\n\ntemplate &lt;typename T&gt;\nT get_as() {\n    T* t; // &lt;- ugly\n    return get(t);\n}\n\nU get(U*) {\n    return u;   \n}\n\nint get(int*) {\n    return i;\n}\n\ndouble get(double*) {\n    return d;\n}\n\nprivate:\n    U u;\n    int i = 5;\n    double d = 3.14;\n};\n\nint main() {\n    A&lt;string&gt; a(\"name\");\n    cout &lt;&lt; a.get_as&lt;double&gt;() &lt;&lt; '\\n';\n    cout &lt;&lt; a.get_as&lt;int&gt;() &lt;&lt; '\\n';\n    cout &lt;&lt; a.get_as&lt;string&gt;() &lt;&lt; '\\n';\n    return 0;\n}\n</code></pre>\n\n<p>I guess it's purely aesthetic with a pointer, because it's probably optimized, but still I wonder. I also guess this might be impossible, because (AFAIK) this argument goes through stack. So technically there is always this \"overhead\". Is this right?</p>\n\n<p>Not sure if this should be another question, but is there a way to express, \"just pick up this overload\" with out trickery?</p>\n\n<p>PS. I figured out I could use <code>T*(0)</code> in the \"ugly\" line, but it's probably even less readable.</p>\n"}, {"tags": ["c++", "pointers", "c++11", "smart-pointers"], "comments": [{"owner": {"reputation": 7254, "user_id": 633684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FILa8kQG7TI/AAAAAAAAAAI/AAAAAAAAABE/W39twkD272Q/photo.jpg?sz=128", "display_name": "xiaofeng.li", "link": "https://stackoverflow.com/users/633684/xiaofeng-li"}, "edited": false, "score": 1, "creation_date": 1458775347, "post_id": 36190525, "comment_id": 60016051, "body": "How about using the primary key to reference the object? <code>std::map&lt;string, string&gt; &#47;&#47; secondary index, value is primary key</code>. Disadvantage to this is you need another map look up to get the object. : P"}, {"owner": {"reputation": 816, "user_id": 5031718, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6a97b5fd3e8da0930bd69c8e257c96?s=128&d=identicon&r=PG&f=1", "display_name": "Chadwick Robbert", "link": "https://stackoverflow.com/users/5031718/chadwick-robbert"}, "reply_to_user": {"reputation": 7254, "user_id": 633684, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FILa8kQG7TI/AAAAAAAAAAI/AAAAAAAAABE/W39twkD272Q/photo.jpg?sz=128", "display_name": "xiaofeng.li", "link": "https://stackoverflow.com/users/633684/xiaofeng-li"}, "edited": false, "score": 0, "creation_date": 1458775444, "post_id": 36190525, "comment_id": 60016087, "body": "May be multi-step references to Object? The cost will almost double."}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1458775957, "post_id": 36190525, "comment_id": 60016264, "body": "I suggest using smart pointers to the objects.  Place pointers in an <code>std::vector</code>.  Next, create indices, e.g. <code>std::map</code>, using a key and a smart pointer to the object."}, {"owner": {"reputation": 457352, "user_id": 87234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FkjBe.png?s=128&g=1", "display_name": "GManNickG", "link": "https://stackoverflow.com/users/87234/gmannickg"}, "edited": false, "score": 0, "creation_date": 1458776004, "post_id": 36190525, "comment_id": 60016287, "body": "@ChadwickRobbert: Use a hash map and you still have constant cost. Also, will you notice this cost? And more importantly, once the profiler says you&#39;re spending too much time doing these lookups, is it easy to change to a different solution that takes some shortcuts? Probably."}], "answers": [{"tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 1, "last_activity_date": 1458776225, "creation_date": 1458776225, "answer_id": 36190736, "question_id": 36190525, "link": "https://stackoverflow.com/questions/36190525/whats-the-best-way-of-sharing-object-across-containers/36190736#36190736", "title": "What&#39;s the best way of sharing object across containers?", "body": "<p>Place your objects in some container. Depending on the frequency of additions / deletions of objects you may want to consider using a container that does not invalidate references to its elements, like a <code>std::list</code> or a <code>std::deque</code>.</p>\n\n<p>Then, for your maps, just reference the objects (or any of their members) using references, i.e. using <code>std::reference_wrapper</code>.</p>\n\n<p>Encapsulate the backend storage as well as the indices so that whenever you add or remove objects you remove invalid references from the indices as well as add any new references.</p>\n\n<p>That way you only have to store your objects once and get around using smart pointers. This will obviously only work if you actually own the objects and control their lifetimes, and if you can keep the indices encapsulated (in order to keep them updated).</p>\n"}], "owner": {"reputation": 816, "user_id": 5031718, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6a97b5fd3e8da0930bd69c8e257c96?s=128&d=identicon&r=PG&f=1", "display_name": "Chadwick Robbert", "link": "https://stackoverflow.com/users/5031718/chadwick-robbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 36190736, "answer_count": 1, "score": 1, "last_activity_date": 1458776225, "creation_date": 1458775141, "last_edit_date": 1458775651, "question_id": 36190525, "link": "https://stackoverflow.com/questions/36190525/whats-the-best-way-of-sharing-object-across-containers", "title": "What&#39;s the best way of sharing object across containers?", "body": "<p>In one of my project I came across a situation where I want to create in-memory indices of objects. The primary index may use a different key and secondary indices would use some other elements as keys.\nIf I am using <code>std::map</code> for primary index as </p>\n\n<pre><code>std::map&lt;string, Object&gt;\n</code></pre>\n\n<p>then <em>which's the best way to store reference/pointer for the secondary index using another container (again std::map for instance considering all the Objects are unique) without making additional copies of the Object</em>?</p>\n\n<ul>\n<li><p>Using raw pointers or references which pose the risk of dangling pointers or references (I know that ideally when Object gets deleted from primary index, care should also be taken to remove it from secondary index but would the pointers/references in secondary indices invalidate when container for primary index adjust itself internally?)</p>\n\n<p><code>std::map&lt;string, const Object*&gt;</code></p></li>\n<li>Or using combination of shared_ptr's in primary index and weak_ptr's secondary index\n<code>std::map&lt;string, std::shared_ptr&lt;Object&gt;&gt; // primary index\nstd::map&lt;string, std::weak_ptr&lt;Object&gt;&gt; // secondary index</code></li>\n</ul>\n\n<p>I know there are pros and cons for both the approaches. Especially I don't want to lose the flexibility of directly inserting the objects in the primary container but I also do not want the secondary index to copy the Objects again. The difficulty in using smart pointers just for secondary index is that they would not own the Object.</p>\n\n<p>Thanks in advance for help.</p>\n"}, {"tags": ["c++", "interop", "d", "dmd", "ldc"], "comments": [{"owner": {"reputation": 3679, "user_id": 186556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8a468d0d197f658d97dfe7d169ad2f4?s=128&d=identicon&r=PG", "display_name": "Mihails Strasuns", "link": "https://stackoverflow.com/users/186556/mihails-strasuns"}, "edited": false, "score": 2, "creation_date": 1458785239, "post_id": 36190332, "comment_id": 60018779, "body": "AFAIK this is by design. D is capable of interfacing to C++ but it can&#39;t create C++ objects on its own (and D objects have different binary layout). Using factory method seems correct."}], "answers": [{"comments": [{"owner": {"reputation": 9652, "user_id": 330471, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bdaf14cd9b5ee9373f0b4c801c339dd9?s=128&d=identicon&r=PG", "display_name": "shybovycha", "link": "https://stackoverflow.com/users/330471/shybovycha"}, "edited": false, "score": 0, "creation_date": 1458778284, "post_id": 36191020, "comment_id": 60016937, "body": "But that sounds like problem bypassing, doesn&#39;t it?.. There is a reference on the D docs: <a href=\"http://dlang.org/spec/cpp_interface.html#memory-allocation\" rel=\"nofollow noreferrer\">dlang.org/spec/cpp_interface.html#memory-allocation</a> saying <code>Leaving a pointer to it on the stack (as a parameter or automatic variable)</code> <i>(...is a solution to this kind of problems...)</i>"}, {"owner": {"reputation": 81, "user_id": 6100209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f0e4bcc64ed56b354fd4b43ab57506?s=128&d=identicon&r=PG&f=1", "display_name": "NotSpooky", "link": "https://stackoverflow.com/users/6100209/notspooky"}, "reply_to_user": {"reputation": 9652, "user_id": 330471, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bdaf14cd9b5ee9373f0b4c801c339dd9?s=128&d=identicon&r=PG", "display_name": "shybovycha", "link": "https://stackoverflow.com/users/330471/shybovycha"}, "edited": false, "score": 0, "creation_date": 1458830234, "post_id": 36191020, "comment_id": 60038882, "body": "That is for objects allocated with the GC to prevent them from being collected because the GC doesn&#39;t know that C++ still has references to those objects. For example, if you store a GC allocated object on a C++ array."}], "tags": [], "owner": {"reputation": 81, "user_id": 6100209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f0e4bcc64ed56b354fd4b43ab57506?s=128&d=identicon&r=PG&f=1", "display_name": "NotSpooky", "link": "https://stackoverflow.com/users/6100209/notspooky"}, "is_accepted": true, "score": 3, "last_activity_date": 1458777868, "creation_date": 1458777868, "answer_id": 36191020, "question_id": 36190332, "link": "https://stackoverflow.com/questions/36190332/how-to-pass-object-from-d-to-c/36191020#36191020", "title": "How to pass object from D to C++?", "body": "<p>You should't use Ds new to allocate C++ classes, if you create a Color::getInstance it works.</p>\n\n<pre><code>import std.stdio;\n\nextern(C++)\n{\n  class Color\n  {\n    this(uint _r, uint _g, uint _b, uint _u, uint _v)\n    {\n      r = _r;\n      g = _g;\n      b = _b;\n      u = _u;\n      v = _v;\n    }\n\n    uint r, g, b, u, v;\n    static Color getInstance(uint _r, uint _g, uint _b, uint _u, uint _v);\n  }\n\n  class Printer\n  {\n    @disable this();\n    static Printer getInstance();\n    final void print(Color c);\n  }\n}\n\nvoid main()\n{\n  auto printer = Printer.getInstance();\n  auto c = Color.getInstance(42, 7, 19, 499, 727);\n\n  printer.print(c);\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nclass Color\n{\npublic:\n  Color(unsigned int _r, unsigned int _g, unsigned int _b, unsigned int _u, unsigned int _v) : r(_r), g(_g), b(_b), u(_u), v(_v) {}\n\n  unsigned int r, g, b, u, v;\n  static Color* getInstance (unsigned int _r, unsigned int _g, unsigned int _b, unsigned int _u, unsigned int _v);\n};\n\nColor* Color::getInstance(unsigned int _r, unsigned int _g, unsigned int _b, unsigned int _u, unsigned int _v)\n{\n  return new Color(_r, _g, _b, _u, _v);\n}\n\nclass Printer\n{\npublic:\n  Printer() {}\n  ~Printer() {}\n  static Printer* getInstance();\n  void print(Color *c);\n};\n\nPrinter* Printer::getInstance()\n{\n  return new Printer();\n}\n\nvoid Printer::print(Color *c)\n{\n  printf(\"(%d, %d, %d, %d, %d)\\n\", c-&gt;r, c-&gt;g, c-&gt;b, c-&gt;u, c-&gt;v);\n}\n</code></pre>\n"}], "owner": {"reputation": 9652, "user_id": 330471, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bdaf14cd9b5ee9373f0b4c801c339dd9?s=128&d=identicon&r=PG", "display_name": "shybovycha", "link": "https://stackoverflow.com/users/330471/shybovycha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 1, "accepted_answer_id": 36191020, "answer_count": 1, "score": 5, "last_activity_date": 1458778059, "creation_date": 1458774037, "last_edit_date": 1458778059, "question_id": 36190332, "link": "https://stackoverflow.com/questions/36190332/how-to-pass-object-from-d-to-c", "title": "How to pass object from D to C++?", "body": "<p>I'm trying to make an interop with C++ and D. And the thing I've found today is really messing my mind: objects are not being passed correctly in my program. </p>\n\n<p>It's better to show an example.</p>\n\n<p>I have a C++ library, which I compile to an object file and the D program, which I link with my library and run.</p>\n\n<p>Here they are:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nclass Color\n{\npublic:\n  Color(unsigned int _r, unsigned int _g, unsigned int _b) : r(_r), g(_g), b(_b) {}\n\n  unsigned int r, g, b;\n};\n\nclass Printer\n{\npublic:\n  Printer() {}\n  ~Printer() {}\n  static Printer* getInstance();\n  void print(Color *c);\n};\n\nPrinter* Printer::getInstance()\n{\n  return new Printer();\n}\n\nvoid Printer::print(Color *c)\n{\n  printf(\"(%d, %d, %d)\\n\", c-&gt;r, c-&gt;g, c-&gt;b);\n}\n</code></pre>\n\n<p>And the D program:</p>\n\n<pre><code>import std.stdio;\n\nextern(C++)\n{\n  class Color\n  {\n    uint r, g, b;\n\n    this(uint _r, uint _g, uint _b)\n    {\n      r = _r;\n      g = _g;\n      b = _b;\n    }\n  }\n\n  class Printer\n  {\n    @disable this();\n    static Printer getInstance();\n    final void print(Color c);\n  }\n}\n\nvoid main()\n{\n  auto printer = Printer.getInstance();\n\n  Color c = new Color(42, 7, 19);\n\n  printer.print(c);\n}\n</code></pre>\n\n<p>I compile them with these commands:</p>\n\n<pre><code>c++ -c my_core.cpp -o my_core.o\ndmd main.d my_core.o -L-lstdc++\n</code></pre>\n\n<p>But when I run <code>./main</code>, I got strange results:</p>\n\n<pre><code>(113244372, 1, 42)\n</code></pre>\n\n<p>What made me think objects are being passed incorrectly is just a simple experiment. First, I ran my program a couple of times and here's what I saw:</p>\n\n<pre><code>$ ./main\n(266442332, 1, 42)\n$ ./main\n(234899036, 1, 42)\n$ ./main\n(109475420, 1, 42)\n</code></pre>\n\n<p>So the first number seems to be a pointer to a memory block. And my sixth feeling in couple with assembly knowledge make me think it's the pointer to <code>this</code> variable.</p>\n\n<p>And now, just to confirm my data is still in place and those numbers are not just random ones, I've added two more fields to my class <code>Color</code>:</p>\n\n<p>C++ lib:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n\nclass Color\n{\npublic:\n  Color(unsigned int _r, unsigned int _g, unsigned int _b, unsigned int _u, unsigned int _v) : r(_r), g(_g), b(_b), u(_u), v(_v) {}\n\n  unsigned int r, g, b, u, v;\n};\n\nclass Printer\n{\npublic:\n  Printer() {}\n  ~Printer() {}\n  static Printer* getInstance();\n  void print(Color *c);\n};\n\nPrinter* Printer::getInstance()\n{\n  return new Printer();\n}\n\nvoid Printer::print(Color *c)\n{\n  printf(\"(%d, %d, %d, %d, %d)\\n\", c-&gt;r, c-&gt;g, c-&gt;b, c-&gt;u, c-&gt;v);\n}\n</code></pre>\n\n<p>And the D program:</p>\n\n<pre><code>import std.stdio;\n\nextern(C++)\n{\n  class Color\n  {\n    this(uint _r, uint _g, uint _b, uint _u, uint _v)\n    {\n      r = _r;\n      g = _g;\n      b = _b;\n      u = _u;\n      v = _v;\n    }\n\n    uint r, g, b, u, v;\n  }\n\n  class Printer\n  {\n    @disable this();\n    static Printer getInstance();\n    final void print(Color c);\n  }\n}\n\nvoid main()\n{\n  auto printer = Printer.getInstance();\n\n  Color c = new Color(42, 7, 19, 499, 727);\n\n  printer.print(c);\n}\n</code></pre>\n\n<p>And the outputs are:</p>\n\n<pre><code>$ ./main                         \n(90379876, 1, 42, 7, 19)\n$ ./main\n(79758948, 1, 42, 7, 19)\n$ ./main\n(74901092, 1, 42, 7, 19)\n$ ./main\n(217458276, 1, 42, 7, 19)\n$ ./main\n(238933604, 1, 42, 7, 19)\n</code></pre>\n\n<p>I've tried compiling my program with both DMD and LDC compilers, but both provided me with exactly the same behavior.</p>\n\n<p><strong>UPD:</strong> What's even more interesting and <em>(probably)</em> pointing to where the problem lies, is the fact objects, created in C++ lib are being passed between D and C++ correctly.</p>\n\n<p>To prove this, I created \"factory method\" in my <code>Color</code> class:</p>\n\n<pre><code>static Color* create(unsigned int _r, unsigned int _g, unsigned int _b, unsigned int _u, unsigned int _v) {\n    return new Color(_r, _g, _b, _u, _v);\n}\n</code></pre>\n\n<p>And then, in D program:</p>\n\n<pre><code>Color c = Color.create(42, 7, 19, 499, 727);\n\nprinter.print(c);\n</code></pre>\n\n<p>So that the <code>c</code> object comes from C++ library, gets passed to the <code>printer</code> object, created in C++ library and this transfer is made in D program.</p>\n\n<p>And the results are unexpectedly correct:</p>\n\n<pre><code>$ ./main\n(42, 7, 19, 499, 727)\n</code></pre>\n\n<p>Am I missing the concepts of C++ and D interop or is this a bug in two D compilers <em>(doubtfully)</em>?</p>\n"}, {"tags": ["c++", "destructor", "delete-operator"], "comments": [{"owner": {"reputation": 52050, "user_id": 3093378, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d8214cf99b0fa33b4f7d571801914b53?s=128&d=identicon&r=PG", "display_name": "vsoftco", "link": "https://stackoverflow.com/users/3093378/vsoftco"}, "edited": false, "score": 1, "creation_date": 1458774139, "post_id": 36190330, "comment_id": 60015624, "body": "It <a href=\"http://coliru.stacked-crooked.com/a/b0c0ca91f45c3887\" rel=\"nofollow noreferrer\">compiles and works</a> in gcc5, as it should. What happens if you compile in release mode?"}, {"owner": {"reputation": 497, "user_id": 233465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98e62167ddbaef930e7a6d9ddf9705a1?s=128&d=identicon&r=PG", "display_name": "Dmitri Sosnik", "link": "https://stackoverflow.com/users/233465/dmitri-sosnik"}, "edited": false, "score": 1, "creation_date": 1458774269, "post_id": 36190330, "comment_id": 60015671, "body": "<a href=\"http://cpp.sh/3mqd\" rel=\"nofollow noreferrer\">cpp.sh/3mqd</a> - gcc works fine"}, {"owner": {"reputation": 498, "user_id": 2592917, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ae580d7af7e67517b9e8998bafd000e3?s=128&d=identicon&r=PG", "display_name": "Kumputer", "link": "https://stackoverflow.com/users/2592917/kumputer"}, "edited": false, "score": 0, "creation_date": 1458774898, "post_id": 36190330, "comment_id": 60015890, "body": "Release build has the same error. Seems this is a compiler bug?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 2, "creation_date": 1458775164, "post_id": 36190330, "comment_id": 60015986, "body": "Same error for MSVC2015 !"}, {"owner": {"reputation": 498, "user_id": 2592917, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ae580d7af7e67517b9e8998bafd000e3?s=128&d=identicon&r=PG", "display_name": "Kumputer", "link": "https://stackoverflow.com/users/2592917/kumputer"}, "edited": false, "score": 2, "creation_date": 1458775424, "post_id": 36190330, "comment_id": 60016079, "body": "Well, at least it&#39;s not really calling thing::operator delete. removing = delete and inserting a printf() in there doesn&#39;t execute."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1458861570, "post_id": 36190330, "comment_id": 60056350, "body": "Check <code>sizeof(thing) &lt;= sizeof g</code> , the <code>new</code> may write out of bounds otherwise. Also, can you reproduce the bug using <code>void *p = ::operator new(sizeof(thing));</code> , instead of using an <code>int</code> variable?"}, {"owner": {"reputation": 3771, "user_id": 5386374, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Justin Time - Reinstate Monica", "link": "https://stackoverflow.com/users/5386374/justin-time-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1467333112, "post_id": 36190330, "comment_id": 63701556, "body": "I would guess that it has to do with the deleting destructor, one of two helper methods MSVC silently adds to classes with non-trivial destructors to aid with calls to <code>operator delete()</code> (by acting as a wrapper for the <code>delete</code> and destructor calls).  For some reason, it would appear that in this particular situation, placement new makes it try to use that method instead of using the destructor directly.  I may be wrong, but that&#39;s the only logical connection I can think of between <code>operator delete()</code> and <code>~T()</code> in MSVC, when the object isn&#39;t explicitly <code>delete</code>d."}], "answers": [{"comments": [{"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1458861480, "post_id": 36191094, "comment_id": 60056330, "body": "The destructor is not virtual"}, {"owner": {"reputation": 71, "user_id": 5863054, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5LxOAWu3H_s/AAAAAAAAAAI/AAAAAAAAFD8/X1cDmLtp6RU/photo.jpg?sz=128", "display_name": "Zak Goichman", "link": "https://stackoverflow.com/users/5863054/zak-goichman"}, "edited": false, "score": 0, "creation_date": 1458866739, "post_id": 36191094, "comment_id": 60057702, "body": "It&#39;s not, but a call that uses the explicit method name is called a nonvirtual call."}], "tags": [], "owner": {"reputation": 71, "user_id": 5863054, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5LxOAWu3H_s/AAAAAAAAAAI/AAAAAAAAFD8/X1cDmLtp6RU/photo.jpg?sz=128", "display_name": "Zak Goichman", "link": "https://stackoverflow.com/users/5863054/zak-goichman"}, "is_accepted": false, "score": 5, "last_activity_date": 1458778431, "creation_date": 1458778431, "answer_id": 36191094, "question_id": 36190330, "link": "https://stackoverflow.com/questions/36190330/c-destructor-calls-a-delete-operator/36191094#36191094", "title": "c++ destructor calls a delete operator?", "body": "<p>This is definitely a bug \nsince by simply replacing the virtual call to the destructor with a nonvirtual one: <code>t1-&gt;thing::~thing()</code> it works. But obviously in this case there is no inheritance involved and therefore no difference between the two forms.</p>\n\n<p>You can try and submit the bug through <a href=\"https://connect.microsoft.com/VisualStudio\" rel=\"noreferrer\">the Microsoft Connect site for VS</a> </p>\n"}, {"tags": [], "owner": {"reputation": 498, "user_id": 2592917, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ae580d7af7e67517b9e8998bafd000e3?s=128&d=identicon&r=PG", "display_name": "Kumputer", "link": "https://stackoverflow.com/users/2592917/kumputer"}, "is_accepted": false, "score": 3, "last_activity_date": 1467331793, "last_edit_date": 1467331793, "creation_date": 1458854392, "answer_id": 36210177, "question_id": 36190330, "link": "https://stackoverflow.com/questions/36190330/c-destructor-calls-a-delete-operator/36210177#36210177", "title": "c++ destructor calls a delete operator?", "body": "<p>The consensus in this thread is that this is a compiler bug unique to MSVC++. I have reported this to Microsoft here:</p>\n\n<p><a href=\"https://connect.microsoft.com/VisualStudio/Feedback/Details/2511044\" rel=\"nofollow\">https://connect.microsoft.com/VisualStudio/Feedback/Details/2511044</a></p>\n\n<p>UPDATE: MS reports that the issue is resolved and will be available in the next VS update.</p>\n"}], "owner": {"reputation": 498, "user_id": 2592917, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ae580d7af7e67517b9e8998bafd000e3?s=128&d=identicon&r=PG", "display_name": "Kumputer", "link": "https://stackoverflow.com/users/2592917/kumputer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 1, "answer_count": 2, "score": 14, "last_activity_date": 1467331793, "creation_date": 1458774025, "last_edit_date": 1465748287, "question_id": 36190330, "link": "https://stackoverflow.com/questions/36190330/c-destructor-calls-a-delete-operator", "title": "c++ destructor calls a delete operator?", "body": "<p>Why does my MSVC12 compiler not like this?</p>\n\n<pre><code>#include &lt;new&gt;\n\nclass thing\n{\npublic:\n    thing() {}\n    ~thing() {}\n    static void operator delete(void* ptr) = delete;\n};\n\nint main()\n{\n    int g;\n    void* p = &amp;g;\n    thing* t1 = new(p) thing();\n    t1-&gt;~thing();\n\n    return 0;\n}\n</code></pre>\n\n<p>The error I get is oddly on the closing brace of main():</p>\n\n<p>Error   2   error C2280: 'void thing::operator delete(void *)' : attempting to reference a deleted function</p>\n\n<p>If I comment out the explicit destructor call, the error goes away, implying that the explicit destructor call is trying to call operator delete(void*). This does not make intuitive sense. As you can probably see from the code here, I've already managed my own memory, and I don't want anyone to call delete on thing ever.</p>\n"}, {"tags": ["c++"], "answers": [{"tags": [], "owner": {"reputation": 83151, "user_id": 3943312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc00b38b94ca7b6f820622b0a8af8ded?s=128&d=identicon&r=PG", "display_name": "Sam Varshavchik", "link": "https://stackoverflow.com/users/3943312/sam-varshavchik"}, "is_accepted": true, "score": 5, "last_activity_date": 1458773442, "creation_date": 1458773442, "answer_id": 36190226, "question_id": 36190176, "link": "https://stackoverflow.com/questions/36190176/whats-the-name-in-programming-of-this/36190226#36190226", "title": "What&#39;s the name in programming of this?", "body": "<p>You're probably looking for the term \"temporary value\", or \"a temporary\".</p>\n\n<p>This generally describes an object that gets instantiated for the duration of executing a single expression, or a part of it, after which the object gets immediately destroyed.</p>\n\n<p>That's what's happening here.</p>\n"}, {"comments": [{"owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "reply_to_user": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "edited": false, "score": 0, "creation_date": 1458774516, "post_id": 36190360, "comment_id": 60015758, "body": "@Joel Yes it does."}], "tags": [], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": false, "score": 1, "last_activity_date": 1458774160, "creation_date": 1458774160, "answer_id": 36190360, "question_id": 36190176, "link": "https://stackoverflow.com/questions/36190176/whats-the-name-in-programming-of-this/36190360#36190360", "title": "What&#39;s the name in programming of this?", "body": "<p>The function </p>\n\n<pre><code>int GetFoo (const Foo&amp; f) {\n    return f.get ();\n}\n</code></pre>\n\n<p>Takes a constant reference <code>(const Foo&amp; )</code>. The term <em>reference</em> is c++ specific. The general term is an alias; two names describing the same instance. The const qualifier also allows for implicit conversions to take effect. </p>\n\n<pre><code>GetFoo(Foo(3,7))\n</code></pre>\n\n<p>Is creating a temporary object that lasts for the duration of the function call. The temporary <code>Foo(3, 7)</code> has no name, but it is being aliased or referenced in the function. </p>\n"}], "owner": {"reputation": 1560, "user_id": 2030219, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6314bf166040bf1eb9deb3a6c03d6864?s=128&d=identicon&r=PG", "display_name": "Joel", "link": "https://stackoverflow.com/users/2030219/joel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 36190226, "answer_count": 2, "score": 2, "last_activity_date": 1458774160, "creation_date": 1458773263, "question_id": 36190176, "link": "https://stackoverflow.com/questions/36190176/whats-the-name-in-programming-of-this", "title": "What&#39;s the name in programming of this?", "body": "<p>I've seen this in wxWidgets and other C++ code style:</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Foo {\n    int _x;\n    int _y;\n    public:\n        Foo () : _x(0), _y(0) {}\n        Foo (int x, int y) : _x(x), _y(y) {}\n        int get () const { return _x+_y; }\n};\n\nint GetFoo (const Foo&amp; f) {\n    return f.get ();\n}\n\nint main () {\n    Foo f1(2,3); // create object with values\n    std::cout &lt;&lt; \"Value1: \" &lt;&lt; f1.get () &lt;&lt; '\\n'; // access object method\n    std::cout &lt;&lt; \"Value2: \" &lt;&lt; GetFoo(Foo(3,7)) &lt;&lt; '\\n'; // How do you call this?\n    return 0;\n}\n</code></pre>\n\n<p>Is when you use direct class with some values. I name it <strong>pass direct class as object</strong> but I'd like to know the propper term. Thanks.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 171, "user_id": 3761460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac95bc453a01029f752f44acbba0aba?s=128&d=identicon&r=PG&f=1", "display_name": "lobudge", "link": "https://stackoverflow.com/users/3761460/lobudge"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1458775036, "post_id": 36190135, "comment_id": 60015941, "body": "As @zenith notes, this is a duplicate. When you look at the answers to the original question, pay particular attention to the one that refers to _GLIBCXX_USE_CXX11_ABI (if you&#39;re using gcc 5.1 or newer)"}, {"owner": {"reputation": 21, "user_id": 6106775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d3fd2d4696b9c2795821e258c19956b?s=128&d=identicon&r=PG&f=1", "display_name": "Pauline", "link": "https://stackoverflow.com/users/6106775/pauline"}, "reply_to_user": {"reputation": 171, "user_id": 3761460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fac95bc453a01029f752f44acbba0aba?s=128&d=identicon&r=PG&f=1", "display_name": "lobudge", "link": "https://stackoverflow.com/users/3761460/lobudge"}, "edited": false, "score": 0, "creation_date": 1458838141, "post_id": 36190135, "comment_id": 60044518, "body": "Thanks @lobudge! After some research on the subject, It&#39;s seems to be relevant in my case since Im using gcc version 5.2.1. But Ive no idea how to fix it... All the related answer I read were quite theoretical and Im not really a computer engineer! I&#39;ll keep searching but let me know if you have any suggestion!"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 6106775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d3fd2d4696b9c2795821e258c19956b?s=128&d=identicon&r=PG&f=1", "display_name": "Pauline", "link": "https://stackoverflow.com/users/6106775/pauline"}, "is_accepted": true, "score": 1, "last_activity_date": 1458856943, "creation_date": 1458856943, "answer_id": 36210774, "question_id": 36190135, "link": "https://stackoverflow.com/questions/36190135/gcc-5-2-1-glibcxx-use-cxx11-abi/36210774#36210774", "title": "gcc 5.2.1 _GLIBCXX_USE_CXX11_ABI", "body": "<p>I managed to finally fix everything, so Im posting here the solution in case it interests someone</p>\n\n<p>To check which libraries I'm using with my code, I used the command</p>\n\n<pre><code>ldd -r -d &lt;name of my code file&gt;\n</code></pre>\n\n<p>The 3rd party lib Im using was correctly detected through the path </p>\n\n<pre><code>/usr/local/lib/&lt;name of the library file&gt;\n</code></pre>\n\n<p>But it's apparently not a good path (don't ask me why), even if recognized. One good option is to change the library files to another location:</p>\n\n<pre><code>/usr/lib/&lt;name of the library file&gt;\n</code></pre>\n\n<p>It now works perfectly!</p>\n"}], "owner": {"reputation": 21, "user_id": 6106775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d3fd2d4696b9c2795821e258c19956b?s=128&d=identicon&r=PG&f=1", "display_name": "Pauline", "link": "https://stackoverflow.com/users/6106775/pauline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2204, "favorite_count": 0, "accepted_answer_id": 36210774, "answer_count": 1, "score": 1, "last_activity_date": 1458856943, "creation_date": 1458773054, "last_edit_date": 1458845597, "question_id": 36190135, "link": "https://stackoverflow.com/questions/36190135/gcc-5-2-1-glibcxx-use-cxx11-abi", "title": "gcc 5.2.1 _GLIBCXX_USE_CXX11_ABI", "body": "<p>EDIT: I'm using gcc 5.2.1 so apparently the library a new libstdc++ library ABI is now chosen by default. It might be the problem leading to this error message (related to <strong>std::__cxx11</strong>) when Im trying to compile my code:</p>\n\n<pre><code>/tmp/ccVIU5fG.o: In function `main':\n2D_interpolations.cc:(.text+0x76): undefined reference to `mio::Config::Config(std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'\n2D_interpolations.cc:(.text+0x151): undefined reference to `mio::IOUtils::convertString(mio::Date&amp;, std::__cxx11::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, double const&amp;, std::ios_base&amp; (*)(std::ios_base&amp;))'\n</code></pre>\n\n<p>I try to add the following line at the beginning of the .cc file</p>\n\n<pre><code>#define _GLIBCXX_USE_CXX11_ABI 0\n</code></pre>\n\n<p>And I was then able to compile. But I got an error related to an undefined symbol. By using </p>\n\n<pre><code>c++filt &lt;the undefined symbol&gt;\n</code></pre>\n\n<p>It turned out that the undefined symbol was actually undefined at the exact same place as where I got the error before adding     <em>#define _GLIBCXX_USE_CXX11_ABI 0</em></p>\n\n<pre><code>mio::Config::Config(std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)\n</code></pre>\n\n<p>By checking whether other undefined symbols existed or not, I figured that one is missing there too (also in the previous error)</p>\n\n<pre><code>mio::IOUtils::convertString(mio::Date&amp;, std::basic_string&lt;char, std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;, double const&amp;, std::ios_base&amp; (*)(std::ios_base&amp;))\n</code></pre>\n\n<p>I know that there are some similar posts already but the answers were too 'theoretical' to me since I'm new to c++ and I dont know anything in computers...  If you have any suggestion that could help, you're welcome!</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["c++", "clion"], "comments": [{"owner": {"reputation": 21282, "user_id": 140367, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/686b6807a5e05236c44c9472e99e146a?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s Szelei", "link": "https://stackoverflow.com/users/140367/tam%c3%a1s-szelei"}, "edited": false, "score": 0, "creation_date": 1458811531, "post_id": 36189910, "comment_id": 60027149, "body": "Post your CMakeLists.txt"}], "answers": [{"comments": [{"owner": {"reputation": 461, "user_id": 4756725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8243026b5b6c4f08fab95130de60a5ae?s=128&d=identicon&r=PG&f=1", "display_name": "CPayne", "link": "https://stackoverflow.com/users/4756725/cpayne"}, "edited": false, "score": 1, "creation_date": 1458827346, "post_id": 36196773, "comment_id": 60036852, "body": "So even though I am not using CMake for my build (only SCONS), having a CMake project is the only way CLion will know where to look for certain file?"}, {"owner": {"reputation": 1664, "user_id": 3793572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXVbA.jpg?s=128&g=1", "display_name": "nastasiak2512", "link": "https://stackoverflow.com/users/3793572/nastasiak2512"}, "reply_to_user": {"reputation": 461, "user_id": 4756725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8243026b5b6c4f08fab95130de60a5ae?s=128&d=identicon&r=PG&f=1", "display_name": "CPayne", "link": "https://stackoverflow.com/users/4756725/cpayne"}, "edited": false, "score": 0, "creation_date": 1470308809, "post_id": 36196773, "comment_id": 64902659, "body": "Yes, so if we talk about how CLion uses CMake, let&#39;s pick just a couple of samples:  1. When code generation is working, we check the feature availability in the compiler, like the override directive - CLion will suggest you this tick only in case the compiler, with all the options set in your CMake, supports it. That means C++11 at least, and the compiler version should support it of course.  2. Rename refactoring, it checks the real context usages, not the text usages."}, {"owner": {"reputation": 1664, "user_id": 3793572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXVbA.jpg?s=128&g=1", "display_name": "nastasiak2512", "link": "https://stackoverflow.com/users/3793572/nastasiak2512"}, "reply_to_user": {"reputation": 461, "user_id": 4756725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8243026b5b6c4f08fab95130de60a5ae?s=128&d=identicon&r=PG&f=1", "display_name": "CPayne", "link": "https://stackoverflow.com/users/4756725/cpayne"}, "edited": false, "score": 0, "creation_date": 1470308857, "post_id": 36196773, "comment_id": 64902687, "body": "To be able to do so, CLion needs to know quite a lot about your code. And it depends on many things: source files of the project, headers included and headers search paths, compiler flags, toolchain and platform used, compiler predefined macros, and some more. So CLion analyses your CMake project model to get all this information out of there, and then uses it for parsing, resolving and other features."}], "tags": [], "owner": {"reputation": 1664, "user_id": 3793572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXVbA.jpg?s=128&g=1", "display_name": "nastasiak2512", "link": "https://stackoverflow.com/users/3793572/nastasiak2512"}, "is_accepted": false, "score": 0, "last_activity_date": 1458811462, "creation_date": 1458811462, "answer_id": 36196773, "question_id": 36189910, "link": "https://stackoverflow.com/questions/36189910/clion-indexer-does-not-resolve-some-includes-in-the-project-directory/36196773#36196773", "title": "CLion indexer does not resolve some includes in the project directory", "body": "<p>This should be a CMake-based project to open correctly in CLion.\nCheck CMake basics tutorial if you are new to CMake: <a href=\"https://www.jetbrains.com/help/clion/2016.1/quick-cmake-tutorial.html\" rel=\"nofollow\">https://www.jetbrains.com/help/clion/2016.1/quick-cmake-tutorial.html</a> </p>\n"}, {"comments": [{"owner": {"reputation": 3382, "user_id": 1558851, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c1db8ad6a9456bc84c431f4852ca9c1f?s=128&d=identicon&r=PG", "display_name": "njfife", "link": "https://stackoverflow.com/users/1558851/njfife"}, "edited": false, "score": 0, "creation_date": 1497390252, "post_id": 36208074, "comment_id": 76055809, "body": "I had a similar issue, include_directories was what I needed. I had to add a few different ones, but it works great now."}, {"owner": {"reputation": 1608, "user_id": 1576254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Jq33n.png?s=128&g=1", "display_name": "ikamen", "link": "https://stackoverflow.com/users/1576254/ikamen"}, "edited": false, "score": 1, "creation_date": 1568712433, "post_id": 36208074, "comment_id": 102352631, "body": "as of CLion 2019.2, this option is called <code>File | New CMake Project from Sources...</code>"}, {"owner": {"reputation": 8344, "user_id": 404099, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cb2550abde0be50f7830de4a8a88010e?s=128&d=identicon&r=PG", "display_name": "Ilia Barahovski", "link": "https://stackoverflow.com/users/404099/ilia-barahovski"}, "edited": false, "score": 0, "creation_date": 1577255595, "post_id": 36208074, "comment_id": 105129408, "body": "Possibly a build is needed before the included directories will be synced and recognized. I was able to navigate to those headers only after the build."}], "tags": [], "owner": {"reputation": 3889, "user_id": 561422, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JwFD0.jpg?s=128&g=1", "display_name": "marco.m", "link": "https://stackoverflow.com/users/561422/marco-m"}, "is_accepted": true, "score": 29, "last_activity_date": 1568737839, "last_edit_date": 1568737839, "creation_date": 1458846106, "answer_id": 36208074, "question_id": 36189910, "link": "https://stackoverflow.com/questions/36189910/clion-indexer-does-not-resolve-some-includes-in-the-project-directory/36208074#36208074", "title": "CLion indexer does not resolve some includes in the project directory", "body": "<p>You need to create a <code>CMakeLists.txt</code> for CLion to be happy. It is enough to declare all the source files, you don't have to convert your scons (or any other build system) to cmake.</p>\n\n<p>You don't even have to write the CMakeLists.txt by hand, you can ask CLion to do it:</p>\n\n<ul>\n<li><code>File | New CMake Project from Sources...</code> (since CLion 2019.2)</li>\n<li><code>File | Import project ... |</code> (older CLion)</li>\n</ul>\n\n<p>and then point at the directory containing your project.</p>\n\n<p>Now edit the generated <code>CMakeLists.txt</code> and add a cmake command to tell CLion where to find the includes (actually to tell the compiler, and CLion will reuse that information).</p>\n\n<p>Since your source files use the include as <code>#include \"my_includes/my_own.hpp\"</code>, you need to tell cmake the base directory containing directory <code>my_includes</code>:</p>\n\n<pre><code>include_directories(.)\n</code></pre>\n\n<p>Where the dot means the same directory as the one containing the <code>CMakeLists.txt</code>.</p>\n\n<p>I tested with a project reproducing your layout and from <code>my_src.cpp</code> I can navigate to <code>my_own.hpp</code>.</p>\n\n<p>Then to build you still have to use scons in a console. It is also possible to add a cmake command, <code>add_custom_target()</code> that will call your scons (or your make, or whatever), so that you can also navigate from CLion to the build errors.</p>\n"}], "owner": {"reputation": 461, "user_id": 4756725, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8243026b5b6c4f08fab95130de60a5ae?s=128&d=identicon&r=PG&f=1", "display_name": "CPayne", "link": "https://stackoverflow.com/users/4756725/cpayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23149, "favorite_count": 6, "accepted_answer_id": 36208074, "answer_count": 2, "score": 14, "last_activity_date": 1568737839, "creation_date": 1458772112, "question_id": 36189910, "link": "https://stackoverflow.com/questions/36189910/clion-indexer-does-not-resolve-some-includes-in-the-project-directory", "title": "CLion indexer does not resolve some includes in the project directory", "body": "<p>I have a CLion C++ project that has the following structure:</p>\n\n<pre><code>    project\n       ----&gt;my_includes\n       |   ----&gt; my_own.hpp\n       ----&gt;source\n           ----&gt; my_app\n               ----&gt; my_src.cpp\n</code></pre>\n\n<p>The first line of my_src.cpp is </p>\n\n<pre><code>#include \"my_includes/my_own.hpp\"\n</code></pre>\n\n<p>I use an external build system that requires this inclusion format. The problem is if I use a function in my source file defined in the included header, CLion says \"Cannot find my_own.hpp\" if I try to hover over the inclusion.</p>\n\n<p>I tried marking the include directory as containing Project Source or Headers but this didn't fix it. Any ideas?</p>\n"}, {"tags": ["c++", "image", "matrix"], "comments": [{"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1458772881, "post_id": 36189843, "comment_id": 60015152, "body": "You&#39;ll need matrix multiplications for this, e.g. the 90 degree rotational matrix is <code>[[0, -1], [1, 0]]</code> and the 180 degree matrix is <code>[[-1, 0], [0, -1]]</code>. Multiply each point with the matrix to get the point&#39;s rotated location. For any angle <code>a</code>, the rotational matrix is <code>[[cos(a), -sin(a)], [sin(a), cos(a)]]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 13384, "user_id": 451600, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/qYIUW.jpg?s=128&g=1", "display_name": "Captain Giraffe", "link": "https://stackoverflow.com/users/451600/captain-giraffe"}, "is_accepted": false, "score": 0, "last_activity_date": 1458773797, "creation_date": 1458773797, "answer_id": 36190289, "question_id": 36189843, "link": "https://stackoverflow.com/questions/36189843/formula-of-rotating-matrix-image-90-degree-c/36190289#36190289", "title": "Formula of rotating matrix/image 90 degree C++", "body": "<p>You can easily convert the (x + y * width) to a simpler (x, y) representation. </p>\n\n<pre><code>using P = point_data_type;\nP point(int x, int y){\n   return DataIn[x + y * width];  // N - ...?\n}\n</code></pre>\n\n<p>Now a right angle rotation is just a coordinate switch and maybe a sign correction. </p>\n\n<pre><code>P rotate90(int x, int y){\n    return point(y, x);\n}\n</code></pre>\n\n<p>This is a positive rotation in a left-handed system. \nSubtract x from Width if the rotation is in the wrong direction. </p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 6107902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61247cb6fc2f6c93e6d53f02faa391aa?s=128&d=identicon&r=PG&f=1", "display_name": "Tzing", "link": "https://stackoverflow.com/users/6107902/tzing"}, "is_accepted": false, "score": 2, "last_activity_date": 1458806827, "creation_date": 1458806827, "answer_id": 36195602, "question_id": 36189843, "link": "https://stackoverflow.com/questions/36189843/formula-of-rotating-matrix-image-90-degree-c/36195602#36195602", "title": "Formula of rotating matrix/image 90 degree C++", "body": "<p>you can simply rotate the matrix by this:</p>\n\n<pre><code>for(int i=0; i&lt;cols; i++)\n{\n    for(int j=1; j&lt;=rows; j++)\n    {\n        datOut[i][j]= datIn[rows-j][i];\n    }\n}\n</code></pre>\n\n<p>and in 1-D array:</p>\n\n<pre><code>for(int i=0; i&lt;cols; i++)\n{\n    for(int j=1; j&lt;=rows; j++)\n    {\n        datOut[i * rows + j]= datIn[(rows-j) * cols + i];\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 5934542, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/b8ba0d9b32fe8cd4f8d1e8ffcbdc9d82?s=128&d=identicon&r=PG&f=1", "display_name": "Generwp", "link": "https://stackoverflow.com/users/5934542/generwp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2376, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1458806827, "creation_date": 1458771837, "last_edit_date": 1458801311, "question_id": 36189843, "link": "https://stackoverflow.com/questions/36189843/formula-of-rotating-matrix-image-90-degree-c", "title": "Formula of rotating matrix/image 90 degree C++", "body": "<p>Let's say I have image, which I need to rotate 90 degrees in any direction and I just can't understand how to do that clear. I need to work with matrix, where Width - it's X, and Height - it's Y. I've already done rotating an image 180 degrees, but can't figure out 90 degrees.</p>\n\n<p>Here are the examples. Let's say I have an image 3x4 pixels. Width = 3, Height = 4, the amount of data in each cell - <code>N = Width * Height = 3 * 4 = 12</code>. Let's make the matrix:</p>\n\n<p><img src=\"https://i.stack.imgur.com/f5kvN.jpg\" alt=\"Here it is\"></p>\n\n<p>The formula to easily go through the matrix is <code>y*Width + x</code>. And the formula for our rotating 180 degrees is:</p>\n\n<pre><code>N - Width + x - y * Width\n</code></pre>\n\n<p>So we have:</p>\n\n<pre><code>DataOut [y * Width + x] = DataIn [N - Width + x - y * Width]\n</code></pre>\n\n<p>Using this formula we get:</p>\n\n<p><img src=\"https://i.stack.imgur.com/MnCNM.jpg\" alt=\"this matrix\"></p>\n\n<p>But I can't come up with the formula of rotating 90 degrees. Can you help me, please?</p>\n"}, {"tags": ["c++", "inheritance", "clone"], "answers": [{"comments": [{"owner": {"reputation": 4221, "user_id": 846550, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e8a3b9282c222088081c9206d1414311?s=128&d=identicon&r=PG", "display_name": "Sideshow Bob", "link": "https://stackoverflow.com/users/846550/sideshow-bob"}, "edited": false, "score": 2, "creation_date": 1458773145, "post_id": 36189926, "comment_id": 60015255, "body": "No boilerplate, but recursive templates and downcasting... I should be careful what I wish for!"}, {"owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "edited": false, "score": 0, "creation_date": 1602682594, "post_id": 36189926, "comment_id": 113797764, "body": "I think this approach <a href=\"http://coliru.stacked-crooked.com/a/376c5c745470fc27\" rel=\"nofollow noreferrer\">doesn&#39;t work well as an actual covariant return type</a> and there is a need <a href=\"https://stackoverflow.com/questions/36189838/c-elegantly-clone-derived-class-by-calling-base-class/64354416#64354416\">for some additional trick</a>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 5, "last_activity_date": 1458772167, "creation_date": 1458772167, "answer_id": 36189926, "question_id": 36189838, "link": "https://stackoverflow.com/questions/36189838/c-elegantly-clone-derived-class-by-calling-base-class/36189926#36189926", "title": "C++ elegantly clone derived class by calling base class", "body": "<p>You could always stick all the cloning logic into its own class in the middle of the hierarchy:</p>\n\n<pre><code>template &lt;class Derived, class Base&gt;\nclass CloneCRTP : public Base {\npublic:\n    Derived* clone() const override {\n        return new Derived(static_cast&lt;Derived const&amp;&gt;(*this));\n    }\n};\n</code></pre>\n\n<p>And then:</p>\n\n<pre><code>class B : public CloneCRTP&lt;B, A&gt;\n{\n    int i;\npublic:\n    virtual ~B() { cout &lt;&lt; \"destroyed b\" &lt;&lt; endl; }        \n};\n</code></pre>\n\n<p>No more boilerplate. </p>\n"}, {"tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 2, "last_activity_date": 1458772392, "creation_date": 1458772392, "answer_id": 36189988, "question_id": 36189838, "link": "https://stackoverflow.com/questions/36189838/c-elegantly-clone-derived-class-by-calling-base-class/36189988#36189988", "title": "C++ elegantly clone derived class by calling base class", "body": "<p>You can rely on the CRTP idiom.<br>\nIt follows a minimal, working example:</p>\n\n<pre><code>struct B {\n    ~virtual ~B() { }\n    virtual B* clone() = 0;\n};\n\ntemplate&lt;class C&gt;\nstruct D: public B {\n    B* clone() {\n        return new C{*static_cast&lt;C*&gt;(this)};\n    }\n};\n\nstruct S: public D&lt;S&gt; { };\n\nint main() {\n    B *b1 = new S;\n    B *b2 = b1-&gt;clone();\n    delete b1;\n    delete b2;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7698, "user_id": 2085626, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/yP5Oy.jpg?s=128&g=1", "display_name": "Amir Kirsh", "link": "https://stackoverflow.com/users/2085626/amir-kirsh"}, "is_accepted": false, "score": 0, "last_activity_date": 1602682268, "creation_date": 1602682268, "answer_id": 64354416, "question_id": 36189838, "link": "https://stackoverflow.com/questions/36189838/c-elegantly-clone-derived-class-by-calling-base-class/64354416#64354416", "title": "C++ elegantly clone derived class by calling base class", "body": "<p>To achieve clone that works as with covariant return type, there is a need for some more complicated CRTP:</p>\n<pre><code>class Shape {\n    // virtual\n    virtual Shape* do_clone() const = 0;\npublic:\n    virtual ~Shape() {}\n    // non-virtual\n    Shape* clone() const {\n        return do_clone();\n    }\n    // ...\n};\n\ntemplate &lt;class Derived, class Base&gt;\nclass CloneCRTP : public Base {\n    // virtual\n    Shape* do_clone() const override {\n        return new Derived(static_cast&lt;Derived const&amp;&gt;(*this));\n    }\npublic:\n    // non-virtual\n    Derived* clone() const {\n        return static_cast&lt;Derived*&gt;(do_clone());\n    }    \n};\n</code></pre>\n<p>Usage:</p>\n<pre><code>class Rectangle: public CloneCRTP&lt;Rectangle, Shape&gt; { /*...*/ };    \nclass Triangle: public CloneCRTP&lt;Triangle, Shape&gt; { /*...*/ };\n\nint main() {\n    Rectangle* r1 = new Rectangle{};\n\n    // getting the proper type from clone:\n    Rectangle* rcopy = r1-&gt;clone();\n\n    delete rcopy;\n    delete r1;\n\n    Triangle t1{};\n\n    // getting the proper type from clone:\n    Triangle* tcopy = t1.clone();\n\n    delete tcopy;\n}\n</code></pre>\n<p>Code: <a href=\"http://coliru.stacked-crooked.com/a/d8781deee5f7f6ea\" rel=\"nofollow noreferrer\">http://coliru.stacked-crooked.com/a/d8781deee5f7f6ea</a></p>\n"}], "owner": {"reputation": 4221, "user_id": 846550, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e8a3b9282c222088081c9206d1414311?s=128&d=identicon&r=PG", "display_name": "Sideshow Bob", "link": "https://stackoverflow.com/users/846550/sideshow-bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1609, "favorite_count": 1, "accepted_answer_id": 36189926, "answer_count": 3, "score": 2, "last_activity_date": 1602682268, "creation_date": 1458771822, "question_id": 36189838, "link": "https://stackoverflow.com/questions/36189838/c-elegantly-clone-derived-class-by-calling-base-class", "title": "C++ elegantly clone derived class by calling base class", "body": "<p>I have a need to clone a derived class given only a reference or pointer to the base class.  The following code does the job, but doesn't seem elegant, because I'm putting boilerplate code into many derived classes C, D, E that are siblings of B (not shown) that just calls the default copy constructor of each.  Isn't that what the default copy constructor is for, if only it could be virtual?</p>\n\n<p>Is there a better way?</p>\n\n<p>Making a virtual assignment operator would be wrong, as I don't want C to assign to B, B to D, etc, just clone B, C, D or E.</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass A {\npublic:\n    virtual ~A() {}\n    virtual A* clone()=0;\n};\n\nclass B : public A {\n    int i;\n    public:\n    virtual A* clone() { \n        cout &lt;&lt; \"cloned B\" &lt;&lt; endl;\n        return new B(*this);\n    }\n    virtual ~B() { cout &lt;&lt; \"destroyed b\" &lt;&lt; endl; }\n};\n\nint main() { \n    A* a = new B(); \n    A* aa = a-&gt;clone();\n    delete a; \n    delete aa; \n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "sockets", "poco", "multipart"], "owner": {"reputation": 4543, "user_id": 90416, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c0497c08ace2a159332371fe781428cb?s=128&d=identicon&r=PG", "display_name": "NSA", "link": "https://stackoverflow.com/users/90416/nsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1458771621, "creation_date": 1458771621, "question_id": 36189801, "link": "https://stackoverflow.com/questions/36189801/why-do-i-get-a-access-violation-in-server-when-socket-closed-on-client-side-with", "title": "Why do I get a Access Violation in server when socket closed on client side with POCO libraries?", "body": "<p>We are leveraging POCO for our server, and making use of Poco::Net::MultipartWriter, to handle our responses for this one type of inquiry. When a client calls close on the underlying socket on their side our server crashes with an access violation however when they call shutdown on the socket this doesn't happen. I am wondering if there is something we are fundamentally doing wrong with the POCO code or if there is a better way for us to work with it to prevent this. The following is snippet of what we are doing:</p>\n\n<pre><code>class HTTPSender \n{\npublic:\n///..... Code here omitted \nprivate:\n///..... Code here omitted \n\nvoid _send(CU::BorrowedPtr&lt;const Data&gt; Data);\n\nPoco::Net::HTTPServerResponse&amp; _response;\nstd::unique_ptr&lt;Poco::Net::MultipartWriter&gt; _writer;\nstd::ostream* _outputStream;\n};\n\nvoid HTTPSender::_send(BorrowedPtr&lt;const Data&gt; Data)\n{\n    if(_writer == nullptr)\n    {\n        const string boundary = \"myboundary\";\n        addCommonHeaderFields(_response, HTTPResponse::HTTP_OK);\n        _response.setContentType(format(\"text/html; boundary=--%s\", boundary.c_str()));\n        _outputStream = &amp;_response.send();\n        _writer.reset(new MultipartWriter(*_outputStream, boundary));\n    }\nMessageHeader header;\n_addFrameHeaderFields(&amp;header, Data);\nheader.add(HTTPMessage::CONTENT_TYPE, _getContentType(Data-&gt;Format));\nheader.add(HTTPMessage::CONTENT_LENGTH, to&lt;string&gt;(Data-&gt;length));  \n_writer-&gt;nextPart(header); \n_outputStream-&gt;write((const char*)Data-&gt;buffer, (std::streamsize)Data-&gt;length);\n}\n</code></pre>\n\n<p>The send method is called every time we have more of our data available which happens on a periodic interval. The Access violation always occurs in the _outputStream::write method. And given that it only happens when the client call close as opposed to shutdown it makes me think we need to adjust our approach. Additionally I have inspected the ostream::good flag before and after the debugger breaks on the access violation but in both cases it is true.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["c++", "macos", "boost", "boost-asio", "multicast"], "answers": [{"comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 0, "creation_date": 1458870556, "post_id": 36207991, "comment_id": 60058627, "body": "The default route on OSX (and Linux) is setup based on the interface status.  For DHCP, usually the default interface is set properly, without DHCP, the default interface is likely not set or not set to route your multicast traffic.  Things get even worse with multiple adapters."}], "tags": [], "owner": {"reputation": 1567, "user_id": 430006, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0c0c2cc70b789ac53ee7174d825de320?s=128&d=identicon&r=PG", "display_name": "Redeye", "link": "https://stackoverflow.com/users/430006/redeye"}, "is_accepted": false, "score": 0, "last_activity_date": 1458845818, "creation_date": 1458845818, "answer_id": 36207991, "question_id": 36189751, "link": "https://stackoverflow.com/questions/36189751/boost-asio-multicast-failure-on-osx/36207991#36207991", "title": "Boost ASIO multicast failure on OSX", "body": "<p>So after a lot of fruitless searching and a few experiments I think I've found a solution which involves changing the last line of the code in the question to :</p>\n\n<pre><code>boost::asio::ip::tcp::resolver resolver(m_IOservice);\nboost::asio::ip::tcp::resolver::query query(boost::asio::ip::host_name(),\"\");\nboost::asio::ip::tcp::resolver::iterator it = resolver.resolve(query);\nboost::asio::ip::address interface_ip_address;\n\nwhile(it!=boost::asio::ip::tcp::resolver::iterator())\n{\n    interface_ip_address = (it++)-&gt;endpoint().address();\n    if(interface_ip_address.is_v4())\n    {\n        m_pcDiscoverySocket-&gt;set_option(boost::asio::ip::multicast::outbound_interface(interface_ip_address.to_v4()));\n        m_pcDiscoverySocket-&gt;send_to(boost::asio::buffer((void*)pGetDeviceInfoMessage-&gt;m_pchData, pGetDeviceInfoMessage-&gt;m_ulDataSize), senderEndpoint);\n        break;\n    }\n}\n</code></pre>\n\n<p>Basically, it seems that on OSX you have to tell the socket which interface to use, but only if it's not got its IP address via DHCP. This also appears to work on Windows (though it did before too).</p>\n\n<p>If someone smarter than me can explain why this works and why you have to do this on OSX then I'll give them the credit for the answer.</p>\n"}], "owner": {"reputation": 1567, "user_id": 430006, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/0c0c2cc70b789ac53ee7174d825de320?s=128&d=identicon&r=PG", "display_name": "Redeye", "link": "https://stackoverflow.com/users/430006/redeye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 519, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458845818, "creation_date": 1458771416, "last_edit_date": 1458784568, "question_id": 36189751, "link": "https://stackoverflow.com/questions/36189751/boost-asio-multicast-failure-on-osx", "title": "Boost ASIO multicast failure on OSX", "body": "<p>I have an application written for both Windows and OSX which uses Boost ASIO for networking. Part of this application sends a multicast message out for embedded devices to respond to :</p>\n\n<pre><code>std::string ip_addr = \"224.0.0.177\";\nboost::asio::ip::udp::endpoint senderEndpoint(boost::asio::ip::address::from_string(ip_addr), 7076);\nm_pcDiscoverySocket-&gt;send_to(boost::asio::buffer((void*)pGetDeviceInfoMessage-&gt;m_pchData, pGetDeviceInfoMessage-&gt;m_ulDataSize), senderEndpoint);\n</code></pre>\n\n<p>This code works absolutely fine on Windows. It also works fine on OSX, but only when there is a DHCP server on the network. When there is no DHCP server on the network and everything has auto-ip allocated addresses 169.254.x.x then the send_to function throws an exception with the error message \"send_to: Network is unreachable\". If I change the IP address in the above code to 169.254.0.1 then it runs with no error messages, but the embedded devices obviously don't respond as it's not a broadcast IP address.</p>\n\n<p>I'm a bit baffled. Can anyone explain why it's throwing this error, or why the same code works in Windows (running in a VM on the Mac with identical hardware)?</p>\n"}, {"tags": ["c++", "printf", "visual-c++-2015"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1458771994, "post_id": 36189745, "comment_id": 60014811, "body": "This is no C code."}, {"owner": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1458772077, "post_id": 36189745, "comment_id": 60014843, "body": "@Olaf Sorry, that should have been C++. I was fretting about the <code>security-enhanced-crt</code> tag that I missed that typo. Do you really think that was worth downvoting, though??"}, {"owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "edited": false, "score": 0, "creation_date": 1458772106, "post_id": 36189745, "comment_id": 60014856, "body": "In the line <code>size_t length = _vsntprintf(nullptr, 0, 0, mask, params);</code>, did you mean <code>_vsntprintf_s</code>?"}, {"owner": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "reply_to_user": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "edited": false, "score": 0, "creation_date": 1458772135, "post_id": 36189745, "comment_id": 60014862, "body": "@TriskalJM I fixed that almost immediately, but I wasn&#39;t fast enough for you :)"}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1458772558, "post_id": 36189745, "comment_id": 60015025, "body": "I don&#39;t see a need [or desire--since it doesn&#39;t work] to replace <i>both</i>. Just do <code>vsnprintf(nullptr,0,...)</code> to get the size and <i>then</i> do <code>vsnprintf_s(final,length + 1,...)</code>"}, {"owner": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "reply_to_user": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "edited": false, "score": 0, "creation_date": 1458772663, "post_id": 36189745, "comment_id": 60015075, "body": "@CraigEstey unfortunately MSVC requires jumping through #define and project settings hoops to compile with non-secure functions."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 1, "creation_date": 1458772675, "post_id": 36189745, "comment_id": 60015083, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/w05tbk72%28v=vs.140%29.aspx\" rel=\"nofollow noreferrer\">vscprintf</a>?"}, {"owner": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "reply_to_user": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1458777257, "post_id": 36189745, "comment_id": 60016651, "body": "@AlgirdasPreid\u017eius I don&#39;t know if you or TriskalJM came up with that first, but it is perfect. If it was you, I&#39;d accept it as the answer if you were to post it."}, {"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1458777843, "post_id": 36189745, "comment_id": 60016820, "body": "@MahmoudAl-Qudsi Well, when I posted it, there was no answer, and honestly, all it was, was just 2 minutes of Google. And, most often than not, I just am too lazy to post full answer, since you need to put more effort into it, than a comment."}], "answers": [{"comments": [{"owner": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "edited": false, "score": 2, "creation_date": 1458777174, "post_id": 36190102, "comment_id": 60016632, "body": "That is perfect. A nice, clean solution. <code>_vscprintf</code> should be documented on the the <code>_vsnprintf_s</code> page, imho."}], "tags": [], "owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "is_accepted": true, "score": 8, "last_activity_date": 1458772948, "creation_date": 1458772948, "answer_id": 36190102, "question_id": 36189745, "link": "https://stackoverflow.com/questions/36189745/getting-required-buffer-length-with-secure-vsnprintf-s/36190102#36190102", "title": "Getting required buffer length with secure _vsnprintf_s", "body": "<pre><code>size_t length = _vscprintf(mask, va_list);\nTCHAR *final = new TCHAR [length + 1];\n_vsntprintf_s(final, length, _TRUNCATE, mask, va_list);\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "edited": false, "score": 0, "creation_date": 1458777114, "post_id": 36190327, "comment_id": 60016615, "body": "Thanks for the suggestion, but randomly allocating 4MiB of data each time someone calls my function is kind of overkill."}, {"owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "reply_to_user": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "edited": false, "score": 0, "creation_date": 1458780212, "post_id": 36190327, "comment_id": 60017383, "body": "Well, just use the [first] stack version. There&#39;s no allocation. With a 2MB buffer [10,000 should be plenty], it shouldn&#39;t overflow the maximum stack limit. Or, the sprintf_secure but start with 1000 (or 100)--it&#39;s a tuning parameter that can adjusted dynamically by watching the actual length used. BTW, based on your comment, I just assumed that the <code>*cprintf</code> would be unusable for the same reasons, otherwise I probably wouldn&#39;t have posted the answer."}, {"owner": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "edited": false, "score": 0, "creation_date": 1458841615, "post_id": 36190327, "comment_id": 60046694, "body": "No, the secure crt functions only replace operations that involve writing to a pre-allocated buffer. A function like vscprintf which returns an integer would not be affected."}], "tags": [], "owner": {"reputation": 22495, "user_id": 5382650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/THfCr.png?s=128&g=1", "display_name": "Craig Estey", "link": "https://stackoverflow.com/users/5382650/craig-estey"}, "is_accepted": false, "score": -1, "last_activity_date": 1458774625, "last_edit_date": 1458774625, "creation_date": 1458774016, "answer_id": 36190327, "question_id": 36189745, "link": "https://stackoverflow.com/questions/36189745/getting-required-buffer-length-with-secure-vsnprintf-s/36190327#36190327", "title": "Getting required buffer length with secure _vsnprintf_s", "body": "<p>How about rolling your own <code>vsnprintf</code> variant that doesn't \"violate the rules\" to get the length:</p>\n\n<pre><code>int\nprintf_size(const char *fmt,int count,va_list ap)\n{\n    char buf[2000000];\n    int len;\n\n    len = vsnprintf_s(buf,sizeof(buf),count,fmt,ap);\n\n    return len;\n}\n</code></pre>\n\n<p>Since the returned will [most likely] be less than <code>sizeof(buf)</code> you should be fine.</p>\n\n<p>Or, do:</p>\n\n<pre><code>int\nprintf_size(const char *fmt,int count,va_list ap)\n{\n    char *buf;\n    int siz;\n    int len;\n\n    for (siz = 2000000;  ;  siz &lt;&lt;= 1) {\n        buf = malloc(siz);\n        len = vsnprintf_s(buf,siz,count,fmt,ap);\n        free(buf);\n        if (len &lt; siz)\n            break;\n    }\n\n    return len;\n}\n</code></pre>\n\n<p>Or, doing a one stop shop function:</p>\n\n<pre><code>int\nsprintf_secure(char **buf,const char *fmt,int count,va_list ap)\n{\n    char *bp;\n    int siz;\n    int len;\n\n    for (siz = 2000000;  ;  siz &lt;&lt;= 1) {\n        bp = malloc(siz);\n        len = vsnprintf_s(bp,siz,count,fmt,ap);\n        if (len &lt; siz)\n            break;\n    }\n\n    bp = realloc(bp,len + 1);\n\n    *buf = bp;\n\n    return len;\n}\n</code></pre>\n"}], "owner": {"reputation": 25867, "user_id": 17027, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/fb75fbfd9dd8d93d49ff88c152d82c92?s=128&d=identicon&r=PG", "display_name": "Mahmoud Al-Qudsi", "link": "https://stackoverflow.com/users/17027/mahmoud-al-qudsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2145, "favorite_count": 1, "accepted_answer_id": 36190102, "answer_count": 2, "score": 6, "last_activity_date": 1458774625, "creation_date": 1458771379, "last_edit_date": 1458772040, "question_id": 36189745, "link": "https://stackoverflow.com/questions/36189745/getting-required-buffer-length-with-secure-vsnprintf-s", "title": "Getting required buffer length with secure _vsnprintf_s", "body": "<p>I'm trying to update some \"legacy\" code to comply with the latest security updates to MSVC, and am facing some trouble migrating from <code>_vsnprintf</code> to <code>_vsnprintf_s</code>.</p>\n\n<p>In particular, I was calling <code>_vsnprintf</code> with a null buffer and zero for the count/length, getting the result, allocating a buffer of the needed size (<code>return value + 1</code>), and then calling <code>_vsnprintf</code> again with the newly-allocated buffer and known-correct size:</p>\n\n<pre><code>size_t length = _vsntprintf(nullptr, 0, mask, params);\nTCHAR *final = new TCHAR [length + 1];\n_vsntprintf(final, length + 1, mask, params);\n</code></pre>\n\n<p>This behavior is <a href=\"https://msdn.microsoft.com/en-us/library/1kt27hek.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"noreferrer\">documented on MSDN</a>:</p>\n\n<blockquote>\n  <p>If the buffer size specified by count is not sufficiently large to contain the output specified by format and argptr, the return value of vsnprintf is the number of characters that would be written if count were sufficiently large. If the return value is greater than count - 1, the output has been truncated.</p>\n</blockquote>\n\n<p>I'm trying to do the same with <code>_vsnprintf_s</code>, but <a href=\"https://msdn.microsoft.com/en-us/library/d3xd30zz.aspx\" rel=\"noreferrer\">its documentation does not contain the same</a>. It instead says</p>\n\n<blockquote>\n  <p>If the storage required to store the data and a terminating null exceeds sizeOfBuffer, the invalid parameter handler is invoked, as described in Parameter Validation, unless count is _TRUNCATE, in which case as much of the string as will fit in buffer is written and -1 returned.</p>\n</blockquote>\n\n<p>Trying it out anyway with the following:</p>\n\n<pre><code>size_t length = _vsntprintf_s(nullptr, 0, 0, mask, params);\n</code></pre>\n\n<p>This results in a \"length\" of zero. If you pass in <code>_TRUNCATE</code> (-1) as the count instead, the following assertion fails:</p>\n\n<blockquote>\n  <p>Expression: buffer != nullptr &amp;&amp; buffer_count > 0</p>\n</blockquote>\n\n<p>I presume it is possible to override <code>_set_invalid_parameter_handler</code> and somehow find out what the length should be, but there has to be an easier way?</p>\n"}, {"tags": ["c++", "qt", "c++11"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458770657, "post_id": 36189487, "comment_id": 60014254, "body": "If your constructor is <code>private</code>, <code>class B : A, ..</code> cannot compile to construct <code>A</code>. if it is protected, <code>B</code> no longer requires to use smartPointer, and so A (inherited) is not in a smartPointer..."}, {"owner": {"reputation": 45, "user_id": 5826917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8517320c92e6a5ce2e39103b6653908?s=128&d=identicon&r=PG&f=1", "display_name": "C. Seidel", "link": "https://stackoverflow.com/users/5826917/c-seidel"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458771482, "post_id": 36189487, "comment_id": 60014613, "body": "is there any chance to build something i want? to enforce smart pointer use?"}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5826917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8517320c92e6a5ce2e39103b6653908?s=128&d=identicon&r=PG&f=1", "display_name": "C. Seidel", "link": "https://stackoverflow.com/users/5826917/c-seidel"}, "edited": false, "score": 0, "creation_date": 1458772773, "post_id": 36189864, "comment_id": 60015117, "body": "But i would still need to write nearly the same create method in all inherited classes. Or am i wrong?"}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 45, "user_id": 5826917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8517320c92e6a5ce2e39103b6653908?s=128&d=identicon&r=PG&f=1", "display_name": "C. Seidel", "link": "https://stackoverflow.com/users/5826917/c-seidel"}, "edited": false, "score": 0, "creation_date": 1458772950, "post_id": 36189864, "comment_id": 60015179, "body": "You can define it as a template class, indeed. This should solve the problem of defining the create method all around."}], "tags": [], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "is_accepted": false, "score": 0, "last_activity_date": 1458772324, "last_edit_date": 1458772324, "creation_date": 1458771923, "answer_id": 36189864, "question_id": 36189487, "link": "https://stackoverflow.com/questions/36189487/make-sure-only-smartpointers-are-build/36189864#36189864", "title": "Make sure only Smartpointers are build", "body": "<p>You could inherit from <code>QEnableSharedFromThis</code> (see <a href=\"http://doc.qt.io/qt-5/qenablesharedfromthis.html\" rel=\"nofollow\">here</a> for further details).<br>\nAs an example:</p>\n\n<pre><code>class C: public QEnableSharedFromThis&lt;C&gt; {\n    C() = default;\n    // all the other constructors\n\npublic:\n    template&lt;typename ...Args&gt;\n    static QSharedPointer&lt;C&gt; create(Args&amp;&amp;... all) {\n        // refers one of the available constructors\n        return QSharedPointer&lt;C&gt;(new C{std::forward&lt;Args&gt;(all)...});\n    }\n\n    QSharedPointer&lt;C&gt; getSharedFromThis() {\n        return sharedFromThis();\n    }\n};\n</code></pre>\n\n<p>You can use it as a base class for your hierarchy.</p>\n"}, {"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": false, "score": 2, "last_activity_date": 1458773969, "last_edit_date": 1458773969, "creation_date": 1458772504, "answer_id": 36190017, "question_id": 36189487, "link": "https://stackoverflow.com/questions/36189487/make-sure-only-smartpointers-are-build/36190017#36190017", "title": "Make sure only Smartpointers are build", "body": "<p>One easy solution to the <em>design problem</em> is to make <code>buildObject</code> a freestanding function template, that you make a <code>friend</code> of each user class.</p>\n\n<p>In order to simplify <code>friend</code> declarations you may want to put that function template in a class.</p>\n\n<p>Then it's very much like your existing code, except there's no inheritance from the factory class:</p>\n\n<pre><code>#include &lt;memory&gt;       // std::shared_ptr\n#include &lt;utility&gt;      // std::forward\n\nnamespace my{\n    using std::forward;\n    using std::shared_ptr;\n\n    template&lt; class Class &gt;\n    struct Make_\n    {\n        template&lt; class... Args &gt;\n        static auto instance( Args&amp;&amp;... args )\n            -&gt; shared_ptr&lt;Class&gt;\n        { return shared_ptr&lt;Class&gt;( new Class( forward&lt;Args&gt;( args )... ) ); }\n    };\n\n    class A\n    {\n    template&lt; class &gt; friend struct Make_;\n    protected:\n        A( int ) {}\n    };\n\n    class B\n        : public A\n    {\n    template&lt; class &gt; friend struct Make_;\n    protected:\n        B( int x ): A( x ) {}\n    };\n\n}  // namespace my\n\nauto main() -&gt; int\n{\n    using namespace my;\n    auto p = Make_&lt;B&gt;::instance( 42 );\n}\n</code></pre>\n\n<hr>\n\n<p>General solutions to the immediate <em>technical problem</em> of providing a covariant function without repeating its definition, include:</p>\n\n<ul>\n<li><p>A macro (that expands to the function definition).<br>\nThis is what I recommend, <em>if</em> you feel that it absolutely has to be a member function. It's one of the few legitimate uses of macros.</p></li>\n<li><p>Middle-man inheritance.<br>\nEssentially instead of inheriting directly from a <code>Base</code> and also from a mixin, you inherit from the mixin and ask it to inherit from <code>Base</code>. You need to forward constructor arguments from the mixin.</p></li>\n<li><p>Dominance in virtual inheritance hierarchy.<br>\nA really ugly and complex solution. Don't go there. But it's a technical possibility.</p></li>\n</ul>\n\n<hr>\n\n<p>Finally there is non-solution of using a function that returns a (smart) pointer to base class. Where the client code has to cast it down. It's really ungood in its own way, but I mention it for completeness.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 5826917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8517320c92e6a5ce2e39103b6653908?s=128&d=identicon&r=PG&f=1", "display_name": "C. Seidel", "link": "https://stackoverflow.com/users/5826917/c-seidel"}, "edited": false, "score": 0, "creation_date": 1458778500, "post_id": 36190073, "comment_id": 60016999, "body": "Why must Builder inherit from T? In A and B, Builder&lt;T&gt; must be declared as friend, is this correct?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 45, "user_id": 5826917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8517320c92e6a5ce2e39103b6653908?s=128&d=identicon&r=PG&f=1", "display_name": "C. Seidel", "link": "https://stackoverflow.com/users/5826917/c-seidel"}, "edited": false, "score": 0, "creation_date": 1458780009, "post_id": 36190073, "comment_id": 60017328, "body": "@C.Seidel Builder is a class n so no need to declare it as friend.  Builder inherits from T which is the template type (i.e. it will be after type deduction either A or B):  this give it access to protected members.  Here an <a href=\"http://ideone.com/Bfou25\" rel=\"nofollow noreferrer\">online demo</a>"}, {"owner": {"reputation": 45, "user_id": 5826917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8517320c92e6a5ce2e39103b6653908?s=128&d=identicon&r=PG&f=1", "display_name": "C. Seidel", "link": "https://stackoverflow.com/users/5826917/c-seidel"}, "edited": false, "score": 0, "creation_date": 1458781373, "post_id": 36190073, "comment_id": 60017722, "body": "Your posted demo works fine with std::shared_ptr. But when substitute with QSharedPointer, the compiler complains about the private constructor."}, {"owner": {"reputation": 45, "user_id": 5826917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8517320c92e6a5ce2e39103b6653908?s=128&d=identicon&r=PG&f=1", "display_name": "C. Seidel", "link": "https://stackoverflow.com/users/5826917/c-seidel"}, "edited": false, "score": 0, "creation_date": 1458782820, "post_id": 36190073, "comment_id": 60018172, "body": "Curiosly, for me, this wont compile (even when QT is avaible) <a href=\"http://ideone.com/Ls6UfD\" rel=\"nofollow noreferrer\">ideone.com/Ls6UfD</a> with error: calling a protected constructor of class &#39;A&#39;         return QSharedPointer&lt;T&gt;( new T(std::forward&lt;Args&gt;(all)...) );"}, {"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1458787858, "post_id": 36190073, "comment_id": 60019439, "body": "The idea of gaining access via inheritance is clever, but not something I would put in code. The inheritance communicates an Is-A relationship that doesn&#39;t exist, i.e. at first glance it lies to a reader. In contrast a <code>friend</code> declaration in each relevant class tells a reader of the code how instantiate it."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458809523, "post_id": 36190073, "comment_id": 60026114, "body": "@Christophe: <i>&quot;both overloads differs only by the return type. This is not allowed&quot;</i> Not really, it would be ambiguous to have same name in both bases, but you can specify which one to call: <a href=\"http://coliru.stacked-crooked.com/a/ea6f830427db122b\" rel=\"nofollow noreferrer\">Demo</a>"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458817191, "post_id": 36190073, "comment_id": 60030387, "body": "@Jarod42 Maybe I expressed myself in an ambiguous manner:  I was referring to the overload resolution in the context of template argument deduction.  As according to 14.8.2.1 template arguments are deduced based on the function&#39;s parameter (and not its return type), so that here, at the end 2 candidate remain."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458817554, "post_id": 36190073, "comment_id": 60030629, "body": "@Christophe: Even with different arguments, it would be ambiguous, as they have the same name from different base: <a href=\"http://coliru.stacked-crooked.com/a/19c4c7407dfa228e\" rel=\"nofollow noreferrer\">Demo</a>."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458819326, "post_id": 36190073, "comment_id": 60031709, "body": "@Jarod42 ok, so idea of smuggle in an additional parameter wouldn&#39;t help anyway."}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 3, "last_activity_date": 1458774548, "last_edit_date": 1458774548, "creation_date": 1458772769, "answer_id": 36190073, "question_id": 36189487, "link": "https://stackoverflow.com/questions/36189487/make-sure-only-smartpointers-are-build/36190073#36190073", "title": "Make sure only Smartpointers are build", "body": "<p><strong>Cause of the error</strong></p>\n\n<p>This is because the multiple inheritance here: </p>\n\n<pre><code>class B : A, public Buildable&lt;B&gt;{};\n</code></pre>\n\n<p>It causes class <code>B</code> to inherit from <code>Buildable&lt;A&gt;</code> and from <code>Buildable&lt;B&gt;</code>  which both contain a <code>buildObject()</code> overload.  Unfortunately, both overloads differs only by the return type.  This is not allowed.  </p>\n\n<p><strong>Design issue</strong></p>\n\n<p>Unfortunately, you can't avoid this unless you could smuggle an additional parameter to <code>buildObject()</code>, which could permit the compiler to use proper type derivation to resolve avoid ambiguity. </p>\n\n<p>But do you really intend to have multiple inheritance in your design here ?  If your classes would be polymorphic, couldn't you use a class B defined as follows:  </p>\n\n<pre><code>class B :  public A {};  // inherits from Buildable A \n...\nQSharedPointer&lt;A&gt; b = B::buildObject();   //\n</code></pre>\n\n<p><strong>Alternative design</strong></p>\n\n<p>The alternative could be to put the building class at the bottom of the derivation, to avoid the conflicts.  Make your constructors for classes A and B protected, and use this template class  :  </p>\n\n<pre><code>// (I used here shared_ptr instead of QSharedPointer for testing purpose)    \ntemplate &lt;typename T&gt;\nclass Builder : public T\n{\npublic:\n    Builder() = delete; \n    Builder (const Builder&amp;) = delete; \n    template&lt;typename ...Args&gt;\n    static shared_ptr&lt;T&gt; buildObject(Args&amp;&amp;... all) \n    {\n        return make_shared&lt;T&gt;(std::forward&lt;Args&gt;(all)...) ;\n    }\n};\n\nclass A { };    \nclass B : public A {};  // Normal class hierarchy.  \n                        // can't be instantiated if ctor are protected.\n\nshared_ptr&lt;A&gt; a = Builder&lt;A&gt;::buildObject(); \nshared_ptr&lt;B&gt; b = Builder&lt;B&gt;::buildObject(); \n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5826917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8517320c92e6a5ce2e39103b6653908?s=128&d=identicon&r=PG&f=1", "display_name": "C. Seidel", "link": "https://stackoverflow.com/users/5826917/c-seidel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 36190073, "answer_count": 3, "score": 3, "last_activity_date": 1458903208, "creation_date": 1458770259, "last_edit_date": 1458903208, "question_id": 36189487, "link": "https://stackoverflow.com/questions/36189487/make-sure-only-smartpointers-are-build", "title": "Make sure only Smartpointers are build", "body": "<p>I want to make sure only smart pointers are build from my classes so i made all constructors protected.</p>\n\n<p>To create objects i build this \"Buildable\"-Policy:</p>\n\n<pre><code>template &lt;typename T&gt;\nclass Buildable\n{\npublic:\n    template&lt;typename ...Args&gt;\n    static QSharedPointer&lt;T&gt; buildObject(Args&amp;&amp;... all) \n{\n        return QSharedPointer&lt;T&gt;( new T(std::forward&lt;Args&gt;(all)...) );\n}\n\n};\n</code></pre>\n\n<p>If i use this this policy in a base class, all goes well.\nBut when i use it in base and a derived class like this:</p>\n\n<pre><code>class A : public Buildable&lt;A&gt; {}\nclass B : A, public Buildable&lt;B&gt;{}\n</code></pre>\n\n<p>the compiler argues: Error: member 'buildObject' found in multiple base classes of different types</p>\n\n<p>I don't know how to solve this problem. Any ideas?</p>\n"}, {"tags": ["c++", "recursion", "stl"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458770220, "post_id": 36189349, "comment_id": 60014063, "body": "What is <code>binary_tree_node</code> ? your custom class ?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1458771621, "post_id": 36189349, "comment_id": 60014669, "body": "What are you trying to do?  create a binary tree?  Use <code>std::list</code> in your binary tree node?  Use <code>std::list</code> to contain the nodes?"}, {"owner": {"reputation": 33, "user_id": 5818463, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d065c9d1e8b476e362a51f057e916d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/5818463/austin-a"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458775056, "post_id": 36189349, "comment_id": 60015948, "body": "its a custom template class implementation written by the author of the textbook used for this course. @Jarod42"}, {"owner": {"reputation": 33, "user_id": 5818463, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d065c9d1e8b476e362a51f057e916d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/5818463/austin-a"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1458775103, "post_id": 36189349, "comment_id": 60015965, "body": "The overall goal of the assignment is to take stl list and convert it to a binary search tree using a recursive function @Thomas Matthews"}], "answers": [{"tags": [], "owner": {"reputation": 2066, "user_id": 4106624, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6d113b3ac138eea6e768a59d0c4f978b?s=128&d=identicon&r=PG&f=1", "display_name": "user007", "link": "https://stackoverflow.com/users/4106624/user007"}, "is_accepted": false, "score": 0, "last_activity_date": 1458772521, "creation_date": 1458772521, "answer_id": 36190019, "question_id": 36189349, "link": "https://stackoverflow.com/questions/36189349/accessing-the-first-node-of-stl-list/36190019#36190019", "title": "Accessing the first node of stl list", "body": "<p>I will suggest you make a constructor in your class <code>binary_tree_node&lt;T&gt;</code>, something like this ::</p>\n\n<pre><code>class binary_tree_node&lt;T&gt; {\n    T classMember;\n\n    binary_tree_node(T &amp;data) {\n        classMember = data;\n    }\n}\n</code></pre>\n\n<p>So, now when you are taking <code>Item</code> values stored in the <code>list</code> for building a node, you can do something like this :: </p>\n\n<pre><code>binary_tree_node&lt;Item&gt; *node = new binary_tree_node(list.front());\n</code></pre>\n\n<p>Moreover, <code>list.front()</code> only gives you the first element in the list, I think you would like to remove it before going into the next recursion, so make sure you call <code>list.pop_front()</code> when the first element in the list is of no use!</p>\n"}], "owner": {"reputation": 33, "user_id": 5818463, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d065c9d1e8b476e362a51f057e916d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/5818463/austin-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458772521, "creation_date": 1458769768, "question_id": 36189349, "link": "https://stackoverflow.com/questions/36189349/accessing-the-first-node-of-stl-list", "title": "Accessing the first node of stl list", "body": "<p>I am trying to assign the first node of the stl list to a binary tree node...\nThe problem I am faced with is that I do not see a tool in the stl listed functions to allow me to do that. </p>\n\n<p>For example:\nIf I create the following list: </p>\n\n<pre><code>list&lt;int&gt; L;\nL.push_front(10);\nL.push_back(20);\nL.push_back(30);\nL.push_back(40);\nL.push_back(50);\nL.push_back(60);\nL.push_back(70);\n</code></pre>\n\n<p>The list should be: 10,20,30,40,50,60,70...</p>\n\n<p>My question is, is there a way to assign a new node (in particular I am using binary tree node) to the first node of the list. I need the node value not the integer value, to pass into a function that converts the list to a binary tree. </p>\n\n<p>This did not work for obvious reasons:</p>\n\n<pre><code>binary_tree_node&lt;Item&gt; *node = list.front();\n</code></pre>\n\n<p>as it is attempting to assign an integer to a node value, but I was just curious if there is a way to assign that first node to a new node.</p>\n\n<p>This is the function which I am trying to use</p>\n\n<pre><code>template &lt;class Item&gt;\nbinary_tree_node&lt;Item&gt;* convert(list&lt;Item&gt; &amp;list, int start, int end)\n{\nbinary_tree_node&lt;Item&gt; *node = list.front();\nif (start &gt; end) return NULL;\nint mid = start + (end - start) / 2;\nbinary_tree_node&lt;Item&gt;* leftChild = convert(list, start, mid-1);\nbinary_tree_node&lt;Item&gt;* parent = new binary_tree_node&lt;Item&gt; (node-&gt;data());\nparent-&gt;left() = leftChild;\nnode = node-&gt;next();\nparent-&gt;right() = convert(list, mid+1, end);\nreturn parent;\n}\n\ntemplate &lt;class Item&gt; \nbinary_tree_node&lt;Item&gt;* convert(list&lt;Item&gt; &amp;head, int n) \n{\nreturn convert(head, 0, n-1);\n}\n</code></pre>\n"}, {"tags": ["c++", "dynamic-memory-allocation", "self-destruction"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1458769562, "post_id": 36189267, "comment_id": 60013731, "body": "Only if you&#39;re 100% sure that you are not, in fact, in a derived class of <code>Derived</code>."}, {"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 0, "creation_date": 1458769689, "post_id": 36189267, "comment_id": 60013804, "body": "For context, could you elaborate on the thinking behind <i>&quot;some derived classes in my design are not supposed to destroy themselves while others are&quot;</i>?"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1458769929, "post_id": 36189267, "comment_id": 60013902, "body": "You must actually have a destructor because <code>delete this;</code> will invoke it. But the destructor can be protected or private. Also, if you intend to call this on classes derived from Derived, then Derived must have a virtual destructor. (Probably <code>Base</code> should too)."}, {"owner": {"reputation": 1048, "user_id": 5178988, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/8a2d5605e6a40cca41971150fd02bfe3?s=128&d=identicon&r=PG&f=1", "display_name": "niko", "link": "https://stackoverflow.com/users/5178988/niko"}, "edited": false, "score": 0, "creation_date": 1458770013, "post_id": 36189267, "comment_id": 60013951, "body": "NPE, check the edited question"}, {"owner": {"reputation": 5074, "user_id": 5522303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c236ba3d52af53355a4d1a44a5145b04?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5522303/kevin"}, "edited": false, "score": 2, "creation_date": 1458770065, "post_id": 36189267, "comment_id": 60013980, "body": "With your edit, if you have a pointer to <code>Base</code> and you call <code>object-&gt;destroy_me()</code>, how will you know if you need to also call <code>delete</code>?"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 2, "creation_date": 1458770077, "post_id": 36189267, "comment_id": 60013987, "body": "So if you have a <code>Base*</code> then you don&#39;t know whether you&#39;re supposed to destroy it with <code>delete</code> or with <code>destroy_me</code>? Sounds like a bad design to me."}, {"owner": {"reputation": 1048, "user_id": 5178988, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/8a2d5605e6a40cca41971150fd02bfe3?s=128&d=identicon&r=PG&f=1", "display_name": "niko", "link": "https://stackoverflow.com/users/5178988/niko"}, "edited": false, "score": 0, "creation_date": 1458771000, "post_id": 36189267, "comment_id": 60014400, "body": "I added one more edit to clarify on my design"}, {"owner": {"reputation": 20507, "user_id": 1463922, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3878980c7836d9e36f3a9ac100ff36a8?s=128&d=identicon&r=PG", "display_name": "PiotrNycz", "link": "https://stackoverflow.com/users/1463922/piotrnycz"}, "edited": false, "score": 2, "creation_date": 1458772029, "post_id": 36189267, "comment_id": 60014818, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3150942/c-delete-this\">C++: Delete this?</a>"}], "owner": {"reputation": 1048, "user_id": 5178988, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/8a2d5605e6a40cca41971150fd02bfe3?s=128&d=identicon&r=PG&f=1", "display_name": "niko", "link": "https://stackoverflow.com/users/5178988/niko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458770977, "creation_date": 1458769464, "last_edit_date": 1458770977, "question_id": 36189267, "link": "https://stackoverflow.com/questions/36189267/destroying-object-in-member-function-c", "title": "Destroying object in member function C++", "body": "<pre><code>class Base{\n  virtual void sth() =0;\n  virtual void destroy_me(){}\n};\n\nclass Derived : public Base{\n  void sth(){}\n  void destroy_me(){\n    delete this;\n  }\n};\n</code></pre>\n\n<p>Is this safe behavior if I am absolutely sure that <code>Derived</code> was dynamically allocated? I don't want to use a destructor as some derived classes in my design are not supposed to destroy themselves while others are, e.g. </p>\n\n<pre><code>class Safe : public Base{\n  void sth(){};\n  void destroy_me(){return;}\n}\n</code></pre>\n\n<p>Classes of type <code>Safe</code> are supposed to be deallocated the 'proper' way by calling <code>delete</code>.</p>\n\n<p>EDIT:\nTo give more info why I am doing this. I have a binary tree structure of the type</p>\n\n<pre><code>class Node{\n  private:\n    Node* lhs;\n    Node* rhs;\n  public:\n    Base* compute();   // recursive\n};\n</code></pre>\n\n<p>The idea is that I am using <code>Derived</code> for some temporary computations while <code>Safe</code> is an object stored in a proper data structure. If <code>compute()</code> returns a pointer to <code>Derived</code> I would like to delete it while if it returns a pointer to <code>Safe</code>, I want to keep the object as it will always be stored in another data structure that I properly deallocate at the end of the program.</p>\n"}, {"tags": ["c++", "json", "parsing", "serialization", "deserialization"], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 4715519, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qhNFq_dnUR0/AAAAAAAAAAI/AAAAAAAALGY/KPYTa7xsVxY/photo.jpg?sz=128", "display_name": "BlindHouse", "link": "https://stackoverflow.com/users/4715519/blindhouse"}, "edited": false, "score": 0, "creation_date": 1458944319, "post_id": 36193931, "comment_id": 60089047, "body": "It worked. I edited some typos you had on your answer and wrote a few more lines to the i/o of the fstream calls. Thank you."}, {"owner": {"reputation": 431, "user_id": 2289893, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/748391a10da943db58919205fa47aff9?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2289893/thomas"}, "reply_to_user": {"reputation": 69, "user_id": 4715519, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qhNFq_dnUR0/AAAAAAAAAAI/AAAAAAAALGY/KPYTa7xsVxY/photo.jpg?sz=128", "display_name": "BlindHouse", "link": "https://stackoverflow.com/users/4715519/blindhouse"}, "edited": false, "score": 1, "creation_date": 1458949784, "post_id": 36193931, "comment_id": 60090915, "body": "I wrote that answer in the plane with my phone ;)"}], "tags": [], "owner": {"reputation": 431, "user_id": 2289893, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/748391a10da943db58919205fa47aff9?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2289893/thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1458948129, "last_edit_date": 1458948129, "creation_date": 1458798086, "answer_id": 36193931, "question_id": 36189139, "link": "https://stackoverflow.com/questions/36189139/c-how-to-serialize-class-to-json-and-parse-the-json-file/36193931#36193931", "title": "c++ How to serialize class to json and parse the json file?", "body": "<p>In c++ there is not introspection/reflection, so you can't automatically serialize a class without explicitly write your member variables in your stream. For the same reason, you can't retrieved the class name that have been serialized.</p>\n\n<p>So the solution is to write a function in your class that serializes the member variables you want.</p>\n\n<p>Of course you will not reinvent the wheel to format your file in json. You can use:  <a href=\"https://github.com/open-source-parsers/jsoncpp\" rel=\"nofollow\">https://github.com/open-source-parsers/jsoncpp</a>.</p>\n\n<p>For instance you can write:</p>\n\n<pre><code>Json::Value root;\nroot[\"homer\"][\"name\"]=\"Homer\";\nroot[\"homer\"][\"lastname\"]=\"Simpson\";\n//etc\n\nofstream file;\nfile.open(\"File.json\"); \nfile &lt;&lt; root;           \nfile.close();\n</code></pre>\n\n<p>However, for the read, you can do as you wanted:</p>\n\n<pre><code>Json::Value root2;\nifstream file2;\nfile2.open(\"File.json\");\nfile2 &gt;&gt; root2;\nfile2.close();\n\nxObject homer;\nhomer.lastname = root2[\"homer\"][\"lastname\"].toStyledString();\n//etc\n</code></pre>\n\n<p>Of course your attribute has to be public. Otherwise you need to add a setter function. </p>\n"}], "owner": {"reputation": 69, "user_id": 4715519, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-qhNFq_dnUR0/AAAAAAAAAAI/AAAAAAAALGY/KPYTa7xsVxY/photo.jpg?sz=128", "display_name": "BlindHouse", "link": "https://stackoverflow.com/users/4715519/blindhouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5166, "favorite_count": 0, "accepted_answer_id": 36193931, "answer_count": 1, "score": 0, "last_activity_date": 1458948129, "creation_date": 1458768960, "last_edit_date": 1458794337, "question_id": 36189139, "link": "https://stackoverflow.com/questions/36189139/c-how-to-serialize-class-to-json-and-parse-the-json-file", "title": "c++ How to serialize class to json and parse the json file?", "body": "<p>I have an xObject Class which basically is a trivial \"Person\" Class and I want to be able to serialize the whole class to a .json file, and then read that file in order to be able to extract the variables from the file and link those variables to the name of the class.</p>\n\n<p>So for example: </p>\n\n<p>xObject Class Code:</p>\n\n<pre><code>class xObject{\n    string name;\n    string lastname;\n    int age;\n\n    public:\n        string getName(){\n            return name;\n        }\n        string getLastname(){\n            return lastname;\n        }\n        int getAge(){\n            return age;\n        }\n}\n</code></pre>\n\n<p>And then I create an object with some attributes on it.</p>\n\n<pre><code>int main(){\n\n    xObject homer;\n    homer.name = \"Homer\";\n    homer.lastname = \"Simpson\";\n    homer.age = 30;\n\n    //SERIALIZATION OF HOMER.\n    homer.serialExport(\"File.json\")\n\n    return 0;\n}\n</code></pre>\n\n<p>So now, my File.json should look like this:</p>\n\n<pre><code>{\"homer\" :\n    {\"name\" : \"Homer\"\n     \"lastname\" : \"Simpson\"\n     \"age\" : 30\n    }\n}\n</code></pre>\n\n<p>and then, I want to be able to read from the file to extract data from it with something like this:</p>\n\n<pre><code>int main(){\n\n    xObject bart;\n    bart.name = \"Bart\";\n    //ACTUAL USE OF THE .JSON FILE HERE\n    myFile = (\"File.json\");\n    bart.lastname = Deserializer(myFile).getLastname(); //It is supossed to assign \"Simpson\" \n                                                        //to the lastname reading from the serialized \n                                                        //homer class file described above.\n    bart.age = Deserializer(myFile).getAge() - 20; //Sets homer's age minus 20 years.\n\n    return 0;\n}    \n</code></pre>\n\n<p>So, how can I do that on c++? (Libraries implementation accepted)</p>\n\n<p>And how could I retrieve the class name that has been serialized? </p>\n\n<p>For example <code>Deserialize(myFile).getClassName()</code> should return <code>\"homer\"</code></p>\n\n<p>I've done something similar in java with XML serialization, and it was pretty straight forward, but it seems that in C++ this is not very easy to do, and I'm relatively new to C++.   </p>\n"}, {"tags": ["c++", "vector", "io"], "answers": [{"tags": [], "owner": {"reputation": 165, "user_id": 4576878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GwsIu.png?s=128&g=1", "display_name": "Steadybox", "link": "https://stackoverflow.com/users/4576878/steadybox"}, "is_accepted": false, "score": 0, "last_activity_date": 1458769216, "creation_date": 1458769216, "answer_id": 36189212, "question_id": 36189017, "link": "https://stackoverflow.com/questions/36189017/reading-file-in-c-with-member-functions/36189212#36189212", "title": "Reading File in C++ with Member Functions", "body": "<p>I don't think you should be using good() to check if the input is valid. Try changing</p>\n\n<pre><code>if (!inFile.good())\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (!inFile.is_open())\n</code></pre>\n\n<p>and changing</p>\n\n<pre><code>while(inFile.good())\n{\n    getline(inFile, inputLine);\n</code></pre>\n\n<p>to</p>\n\n<pre><code>while(getline(inFile, inputLine))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5645735, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205695408520062/picture?type=large", "display_name": "Dustin Rhodes", "link": "https://stackoverflow.com/users/5645735/dustin-rhodes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458769216, "creation_date": 1458768445, "question_id": 36189017, "link": "https://stackoverflow.com/questions/36189017/reading-file-in-c-with-member-functions", "title": "Reading File in C++ with Member Functions", "body": "<pre><code>int DataSource::insertData(char* fileName){\ndouble vel, tireAngle, timeStamp;\nstring inputLine;\nint i=0;\nifstream inFile;\n\ninFile.open(fileName);\n\n\nif (!inFile.good())\n{\n    cout &lt;&lt; \"Could not open file \" &lt;&lt; fileName &lt;&lt; endl;\n    return 0;\n}\n\nwhile(inFile.good())\n{\n    getline(inFile, inputLine);\n\n    if(inFile.fail())\n    {\n        break;\n    }\n\n    istringstream lineStream(inputLine);\n    lineStream &gt;&gt; timeStamp &gt;&gt; vel &gt;&gt; tireAngle;\n\n    source.push_back(Input(vel, tireAngle, timeStamp));\n    ++i;\n}\n\ninFile.close();\n\nreturn i;\n};\n</code></pre>\n\n<p>I'm trying to pass in the file name, open the file and parse through each line. The Input class holds the three double values, and source is a vector of type Input. I have vector, iostream,fstream,string,sstream,climits #included, along with std namespace.</p>\n\n<p>So my first issue is the file not opening, I know that the right filename is being passed in. The error I'm getting is:</p>\n\n<p>\"Could not open file input1.txt\nlibc++abi.dylib: terminating with uncaught exception of type std::out_of_range: vector\" </p>\n\n<p>For the vector, I googled the error and I think I'm accessing a bad vector, which is either because maybe I haven't properly initialized the vector -Input- source  (formatting wont let me put the \"greater than, less than sign\") or I'm using the wrong syntax.</p>\n\n<p>This is my first post so I'm sorry if this is a bad question/formatting, but any help would be appreciated. </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458768437, "post_id": 36188991, "comment_id": 60013268, "body": "This is totally wrong ` if (&#39;frt&#39; == &#39;r&#39; || &#39;frt&#39; == &#39;R&#39;)` It should be ` if (frt == &#39;r&#39; || frt == &#39;R&#39;)`. Same applies to all if statements"}, {"owner": {"reputation": 23, "user_id": 6106511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7x5otYBPjYc/AAAAAAAAAAI/AAAAAAAAAho/51-gaPEpLug/photo.jpg?sz=128", "display_name": "Bashar", "link": "https://stackoverflow.com/users/6106511/bashar"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458768584, "post_id": 36188991, "comment_id": 60013322, "body": "Oh Thank you so much :D"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1458768804, "post_id": 36188991, "comment_id": 60013409, "body": "You have a bunch of other problems. You declare a bunch of variable you never use, like <code>F</code> and <code>r</code>. You ask for Yes/No` answers, but only input a single character, not a whole line."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1458768903, "post_id": 36188991, "comment_id": 60013449, "body": "You seem to have a general misunderstanding of the difference between variables, characters, and strings. I think you need to go back to the textbook and review those sections."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1458769033, "post_id": 36188991, "comment_id": 60013500, "body": "For instance, you set all these variables to the same thing: <code>yes = 0, Yes = 0, No = 0, no = 0;</code>, and then you compare the user&#39;s input to each of them. But if the user enters <code>y</code>, <code>frcr</code> will contain <code>121</code>, the ASCII code for the letter, not <code>0</code>."}, {"owner": {"reputation": 23, "user_id": 6106511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7x5otYBPjYc/AAAAAAAAAAI/AAAAAAAAAho/51-gaPEpLug/photo.jpg?sz=128", "display_name": "Bashar", "link": "https://stackoverflow.com/users/6106511/bashar"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1458769102, "post_id": 36188991, "comment_id": 60013521, "body": "@Barmar Do you have a website where i can find a good info about variables , chars and strings?"}, {"owner": {"reputation": 23, "user_id": 6106511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7x5otYBPjYc/AAAAAAAAAAI/AAAAAAAAAho/51-gaPEpLug/photo.jpg?sz=128", "display_name": "Bashar", "link": "https://stackoverflow.com/users/6106511/bashar"}, "edited": false, "score": 0, "creation_date": 1458769154, "post_id": 36188991, "comment_id": 60013540, "body": "I removed the yes = 0, Yes = 0, No = 0, no = 0; and replaced it with yes,Yes,No,no;"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458769299, "post_id": 36188991, "comment_id": 60013599, "body": "Just <code>yes,Yes,No,no;</code> floating around is more wrong."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1458769351, "post_id": 36188991, "comment_id": 60013625, "body": "@Bashar I don&#39;t think they would be covered specifically in any website. They&#39;re basic concepts that are part of programming, and should be covered early on in any programming textbook or tutorial."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6106511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7x5otYBPjYc/AAAAAAAAAAI/AAAAAAAAAho/51-gaPEpLug/photo.jpg?sz=128", "display_name": "Bashar", "link": "https://stackoverflow.com/users/6106511/bashar"}, "edited": false, "score": 0, "creation_date": 1458769436, "post_id": 36189071, "comment_id": 60013673, "body": "this is my first week of c++ xD"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 23, "user_id": 6106511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7x5otYBPjYc/AAAAAAAAAAI/AAAAAAAAAho/51-gaPEpLug/photo.jpg?sz=128", "display_name": "Bashar", "link": "https://stackoverflow.com/users/6106511/bashar"}, "edited": false, "score": 0, "creation_date": 1458769610, "post_id": 36189071, "comment_id": 60013764, "body": "Start reading the basics. Variables, data types, basic c++ syntax, etc.."}], "tags": [], "owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "is_accepted": false, "score": 1, "last_activity_date": 1458769003, "last_edit_date": 1458769003, "creation_date": 1458768671, "answer_id": 36189071, "question_id": 36188991, "link": "https://stackoverflow.com/questions/36188991/trying-to-solve-a-c-example-and-getting-empty-output/36189071#36189071", "title": "trying to solve a C++ example and getting empty output", "body": "<p>This <code>'frt' == 'r'</code> is wrong. <code>frt</code>, <code>fcrcr</code> are both variables. Remove the ' '. It should be:</p>\n\n<pre><code>frt == 'r'\n</code></pre>\n\n<p>This <code>'frcr' == yes</code> is also wrong for many reasons. <code>frcr</code> is also a variable so again remove the ' '. Even then you can't do <code>frcr == \"yes\"</code> Instead:<br /></p>\n\n<p>1) Change <code>frcr</code> to <code>std::string</code> or <br />\n2) keep the <code>char</code> and change <code>\"yes\"</code> to <code>'y'</code> or <code>'Y'</code>. <br /></p>\n\n<p>EDIT: Your code is just wrong in many ways. I suggest you to start with the basics. You need to learn.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 6106511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7x5otYBPjYc/AAAAAAAAAAI/AAAAAAAAAho/51-gaPEpLug/photo.jpg?sz=128", "display_name": "Bashar", "link": "https://stackoverflow.com/users/6106511/bashar"}, "is_accepted": false, "score": 0, "last_activity_date": 1458773432, "creation_date": 1458773432, "answer_id": 36190224, "question_id": 36188991, "link": "https://stackoverflow.com/questions/36188991/trying-to-solve-a-c-example-and-getting-empty-output/36190224#36190224", "title": "trying to solve a C++ example and getting empty output", "body": "<p>Final working code. Thank you guys for the help its working fine now :)\nPlease let me know if it is not the same as the image</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nvoid main()\n{\n    double x, z;\n    double cost;\n    char frt;\n    char Frcr;\n    int Crow;\n    int R , r, F , f ;\n    int y , Y , N , n;\n    cout &lt;&lt; \"Please Enter The Width of the picture in Inches :\";\n    cin &gt;&gt; x;\n    cout &lt;&lt; \"Please Enter The length of the picture in Inches :\";\n\n    cin &gt;&gt; z;\n    cout &lt;&lt; \"Please Enter the Type of the Frame (R/F)(R Stands for Regular ,F Stands for Fancy) : \\n\";\n    cin &gt;&gt; frt;\n\n\n\n    if (frt == 'r' || frt == 'R')\n    {\n        cost = (x + z)*0.15;\n\n\n\n\n        cout &lt;&lt; \"Do you want to color the frame? (Y/N) : \\n\";\n        cin &gt;&gt; Frcr;\n        if (Frcr == 'y' || Frcr == 'Y')\n        {\n            cout &lt;&lt; \"Type The number of the crowns you want ? :\";\n            cin &gt;&gt; Crow;\n            cout &lt;&lt; \"The cost With Frame Coloring : \" &lt;&lt; ((x + z)*0.15) + ((x + z)*0.10)+(Crow*0.35) &lt;&lt; endl;\n\n\n\n        }\n        else if (Frcr == 'N' || Frcr == 'n')\n        {\n            cout &lt;&lt; \"Type The number of the crowns you want ? :\";\n            cin &gt;&gt; Crow;\n            cout &lt;&lt; \"The Cost is : \" &lt;&lt; ((x + z)*0.15) + (Crow*0.35) &lt;&lt; endl;\n\n        }\n        else\n            cout &lt;&lt; \"Invalid Input.\" &lt;&lt; endl;\n\n\n    }\n    else if (frt == 'f' || frt == 'F')\n    {\n\n        cout &lt;&lt; \"Do you want to color the frame? (Y/N) : \\n\";\n        cin &gt;&gt; Frcr;\n\n        if (Frcr == 'y' || Frcr == 'Y')\n        {\n            cout &lt;&lt; \"Type The number of the crowns you want ? :\";\n            cin &gt;&gt; Crow;\n            cout &lt;&lt; \"The cost With Frame Coloring : \" &lt;&lt; ((x + z)*0.25) + ((x + z)*0.10)+(Crow*0.35) &lt;&lt; endl;\n\n\n\n        }\n        else if (Frcr == 'N' || Frcr == 'n')\n        {\n\n            cout &lt;&lt; \"Type The number of the crowns you want ? :\";\n            cin &gt;&gt; Crow;\n            cout &lt;&lt; \"The Cost is : \" &lt;&lt; ((x + z)*0.25) + (Crow*0.35) &lt;&lt; endl;\n\n        }\n\n        else\n            cout &lt;&lt; \"Invalid Input.\" &lt;&lt; endl;\n\n\n    }\n\n\n    else\n        cout &lt;&lt; \"Invalid Input.\" &lt;&lt; endl;\n\n\n\n    }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6106511, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-7x5otYBPjYc/AAAAAAAAAAI/AAAAAAAAAho/51-gaPEpLug/photo.jpg?sz=128", "display_name": "Bashar", "link": "https://stackoverflow.com/users/6106511/bashar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "closed_date": 1458776853, "answer_count": 2, "score": -1, "last_activity_date": 1458774511, "creation_date": 1458768366, "last_edit_date": 1458774511, "question_id": 36188991, "link": "https://stackoverflow.com/questions/36188991/trying-to-solve-a-c-example-and-getting-empty-output", "closed_reason": "Not suitable for this site", "title": "trying to solve a C++ example and getting empty output", "body": "<p>I'm new to C++ and programming in general. I'm Trying to write this program \n<a href=\"https://i.stack.imgur.com/7qsT7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7qsT7.png\" alt=\"The Program im trying to write.\"></a></p>\n\n<p>This is the first stages of the program when i try to run it it and put R it instantly go to else it does not read if</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std;\nvoid main()\n{\n    double x, y;\n    double cost;\n    char frt;\n    char Frcr;\n    char crow;\n    char R , r, F , f ;\n    int yes = 0, Yes = 0, No = 0, no = 0;\n    cout &lt;&lt; \"Please Enter length and Width of the picture in Inches :\\n\";\n    cin &gt;&gt; x &gt;&gt; y;\n    cout &lt;&lt; \"Please Enter the Type of the Frame (R/F)(R Stands for Regular ,F Stands for Fancy) : \\n\";\n    cin &gt;&gt; frt;\n\n\n    if ('frt' == 'r' || 'frt' == 'R')\n    {\n        cost = (x + y)*0.15;\n        cout &lt;&lt; \"Do you want to color the frame? (Yes/No) : \\n\";\n        cin &gt;&gt; Frcr;\n\n        if ('frcr' == yes || 'frcr' == Yes)\n        {\n            cost = (x + y)*0.15;\n            cout &lt;&lt; \"The Cost is : \" &lt;&lt; (x + y)*0.15 + ((x + y)*0.10) &lt;&lt; endl;\n        }\n\n\n        else if ('frcr' == no || 'frcr' == No)\n        {\n            cost = ((x + y)*0.15);\n            cout &lt;&lt; \"The Cost Is : \" &lt;&lt; cost &lt;&lt; endl;\n        }\n\n\n\n    }\n    else\n        cout &lt;&lt; \"There is an Error \" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>EDIT : Working Code after the help from the guys :)</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nusing namespace std;\nvoid main()\n{\n    double x, z;\n    double cost;\n    char frt;\n    char Frcr;\n    int Crow;\n    int R, r, F, f;\n    int y, Y, N, n;\n    cout &lt;&lt; \"Please Enter The Width of the picture in Inches :\";\n    cin &gt;&gt; x;\n    cout &lt;&lt; \"Please Enter The length of the picture in Inches :\";\n\n    cin &gt;&gt; z;\n    cout &lt;&lt; \"Please Enter the Type of the Frame (R/F):\" &lt;&lt; endl;\n    cout &lt;&lt; \"(R Stands for Regular ,F Stands for Fancy) \\n\";\n    cin &gt;&gt; frt;\n\n\n\n    if (frt == 'r' || frt == 'R')\n    {\n        cost = (x + z)*0.15;\n\n\n\n\n        cout &lt;&lt; \"Do you want to color the frame? (Y/N) : \\n\";\n        cin &gt;&gt; Frcr;\n        if (Frcr == 'y' || Frcr == 'Y')\n        {\n            cout &lt;&lt; \"Type The Number Of The Crowns You Want ? :\";\n            cin &gt;&gt; Crow;\n            cout &lt;&lt; \"The cost With Frame Coloring : \" &lt;&lt; ((x + z)*0.15) + ((x + z)*0.10) + (Crow*0.35) &lt;&lt; endl;\n\n\n\n        }\n        else if (Frcr == 'N' || Frcr == 'n')\n        {\n            cout &lt;&lt; \"Type The Number Of The Crowns You Want ? :\";\n            cin &gt;&gt; Crow;\n            cout &lt;&lt; \"The Cost is : \" &lt;&lt; ((x + z)*0.15) + (Crow*0.35) &lt;&lt; endl;\n\n        }\n        else\n            cout &lt;&lt; \"Invalid Input.\" &lt;&lt; endl;\n\n\n    }\n    else if (frt == 'f' || frt == 'F')\n    {\n\n        cout &lt;&lt; \"Do you want to color the frame? (Y/N) : \\n\";\n        cin &gt;&gt; Frcr;\n\n        if (Frcr == 'y' || Frcr == 'Y')\n        {\n            cout &lt;&lt; \"Type The Number Of The Crowns You Want ? :\";\n            cin &gt;&gt; Crow;\n            cout &lt;&lt; \"The cost With Frame Coloring : \" &lt;&lt; ((x + z)*0.25) + ((x + z)*0.10) + (Crow*0.35) &lt;&lt; endl;\n\n\n\n        }\n        else if (Frcr == 'N' || Frcr == 'n')\n        {\n\n            cout &lt;&lt; \"Type The Number Of The Crowns You Want ? :\";\n            cin &gt;&gt; Crow;\n            cout &lt;&lt; \"The Cost is : \" &lt;&lt; ((x + z)*0.25) + (Crow*0.35) &lt;&lt; endl;\n\n        }\n\n        else\n            cout &lt;&lt; \"Invalid Input.\" &lt;&lt; endl;\n\n\n    }\n\n\n    else\n        cout &lt;&lt; \"Invalid Input.\" &lt;&lt; endl;\n\n\n\n}\n</code></pre>\n"}, {"tags": ["c++", "windows", "openssl", "poco-libraries"], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1458808125, "post_id": 36195351, "comment_id": 60025446, "body": "Good catch Richard. Allow me to be the first to cast an upvote :)"}, {"owner": {"reputation": 1717, "user_id": 4564882, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d39ad747c8eba409dcb02c386570fc6a?s=128&d=identicon&r=PG&f=1", "display_name": "ProEns08", "link": "https://stackoverflow.com/users/4564882/proens08"}, "edited": false, "score": 0, "creation_date": 1461250587, "post_id": 36195351, "comment_id": 61123697, "body": "Very informative answer, I am the third to upvote. I have a similar question in poco, <a href=\"http://stackoverflow.com/questions/36771435/how-to-transfer-a-c-object-to-a-web-service-using-poco-library\" title=\"how to transfer a c object to a web service using poco library\">stackoverflow.com/questions/36771435/&hellip;</a>. could you see it."}], "tags": [], "owner": {"reputation": 46, "user_id": 6108256, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ibOZDHcnLz8/AAAAAAAAAAI/AAAAAAAAA4Q/zY3mvjNpDYA/photo.jpg?sz=128", "display_name": "Richard Levitte", "link": "https://stackoverflow.com/users/6108256/richard-levitte"}, "is_accepted": true, "score": 3, "last_activity_date": 1458805678, "creation_date": 1458805678, "answer_id": 36195351, "question_id": 36188982, "link": "https://stackoverflow.com/questions/36188982/erros-while-building-https-server-using-poco-library/36195351#36195351", "title": "Erros while building HTTPS Server using poco library", "body": "<p>From your code, it looks like you have a macro called <code>SSL</code>.  That happens to be a type defined by OpenSSL, beginning with line 178 in <code>ossl_typ.h</code>:</p>\n\n<blockquote>\n  <p><code>typedef struct ssl_st SSL;</code></p>\n</blockquote>\n\n<p>I'd suggest a different macro name.</p>\n"}], "owner": {"reputation": 210, "user_id": 4987129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/099b3bcb008ed182468b18eee69d02a2?s=128&d=identicon&r=PG&f=1", "display_name": "Elas", "link": "https://stackoverflow.com/users/4987129/elas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 1, "accepted_answer_id": 36195351, "answer_count": 1, "score": 1, "last_activity_date": 1458805678, "creation_date": 1458768324, "last_edit_date": 1458776397, "question_id": 36188982, "link": "https://stackoverflow.com/questions/36188982/erros-while-building-https-server-using-poco-library", "title": "Erros while building HTTPS Server using poco library", "body": "<p>I'm trying to create simple HTTPS Server using poco libraries. I have problem with SSL layer, because I can't initialize it properly.\nThis is my code:</p>\n\n<pre><code>#ifdef SSL\n    // initialize SSL\n    Poco::Net::initializeSSL();\n\n    Poco::SharedPtr&lt;Poco::Net::InvalidCertificateHandler&gt; pCert =\n        new Poco::Net::ConsoleCertificateHandler(false);\n    Poco::Net::Context::Ptr pContext =\n        new Poco::Net::Context(\n            Poco::Net::Context::SERVER_USE,\n            \"\",\n            \"server.pem\",\n            \"\",\n            Poco::Net::Context::VERIFY_NONE,\n            9,\n            false,\n            \"ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH\");\n    Poco::Net::SSLManager::instance().initializeClient(0, pCert, pContext);\n#endif //SSL\n    if (port == UNKNOWN_PORT)\n        return 1;\n    // set-up a server socket\n#ifdef SSL\n    SecureServerSocket svs(port, 64, pContext);\n#else\n    ServerSocket svs(port);\n#endif //SSL\n    // set-up a HTTPServer instance\n    Poco::Net::HTTPServer srv(new RequestHandlerFactory, svs, new HTTPServerParams);\n</code></pre>\n\n<p>When I try to build it with MSVC2015 it gives lot of errors (see below). Building example provided with poco-libraries don't give any errors.</p>\n\n<p>Using only <code>SecureServerSocket</code> and <code>initializeSSL</code>, without the rest gives unhandled exception.</p>\n\n<p>Why am I getting a compile error for undefined symbols, and how do I fix it?</p>\n\n<hr>\n\n<pre><code>1&gt;------ Build started: Project: PocoNetServer, Configuration: Release Win32 ------\n1&gt;  HTTPServer.cpp\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ossl_typ.h(178): warning C4091: 'typedef ': ignored on left of 'ssl_st' when no variable is declared\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(390): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(391): error C2059: syntax error: 'const'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(393): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(393): error C2062: type 'void' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(402): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(402): error C2062: type 'unsigned int' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(406): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(406): error C2062: type 'unsigned int' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(409): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(409): error C2062: type 'unsigned int' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(440): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(441): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(442): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(443): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(444): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(445): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(446): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(447): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(448): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(449): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(450): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(451): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(453): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(455): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(456): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(457): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(461): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(468): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(837): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(838): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(839): error C2065: 'cb': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(839): error C2062: type 'int' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(853): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(855): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(857): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(869): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(871): error C2065: 'ctx': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(873): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(873): error C2062: type 'int' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(874): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(874): error C2062: type 'unsigned char' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(875): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(876): error C2065: 's': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(876): error C2062: type 'unsigned char' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(905): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(999): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1002): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1006): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1021): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1040): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1076): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1083): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1090): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1094): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1101): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1106): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1131): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1138): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1162): error C2059: syntax error: '*'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1247): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1249): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1252): error C2143: syntax error: missing ')' before '('\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1252): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1252): error C2065: 'x509': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1252): error C2275: 'X509': illegal use of this type as an expression\n1&gt;  D:\\Programming\\OpenSSL-Win32\\include\\openssl/ossl_typ.h(154): note: see declaration of 'X509'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1253): error C2065: 'pkey': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1253): error C2275: 'EVP_PKEY': illegal use of this type as an expression\n1&gt;  D:\\Programming\\OpenSSL-Win32\\include\\openssl/ossl_typ.h(133): note: see declaration of 'EVP_PKEY'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1253): error C2206: 'SSL_CTX_set_client_cert_cb': typedef cannot be used for function definition\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1253): error C2059: syntax error: ')'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1254): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1254): error C2065: 'x509': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1254): error C2275: 'X509': illegal use of this type as an expression\n1&gt;  D:\\Programming\\OpenSSL-Win32\\include\\openssl/ossl_typ.h(154): note: see declaration of 'X509'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1255): error C2065: 'pkey': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1255): error C2275: 'EVP_PKEY': illegal use of this type as an expression\n1&gt;  D:\\Programming\\OpenSSL-Win32\\include\\openssl/ossl_typ.h(133): note: see declaration of 'EVP_PKEY'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1255): error C2206: 'SSL_CTX_get_client_cert_cb': typedef cannot be used for function definition\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1260): error C2143: syntax error: missing ')' before '('\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1260): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1262): error C2062: type 'unsigned char' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1264): error C2059: syntax error: ')'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1266): error C2143: syntax error: missing ')' before '('\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1266): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1268): error C2062: type 'unsigned char' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1270): error C2059: syntax error: ')'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1273): error C2143: syntax error: missing ')' before '('\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1273): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1274): error C2059: syntax error: 'const'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1277): error C2059: syntax error: ')'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1279): error C2143: syntax error: missing ')' before '('\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1279): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1280): error C2062: type 'unsigned char' unexpected\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1284): error C2059: syntax error: ')'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1285): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1302): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1302): error C2059: syntax error: 'const'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1305): error C2143: syntax error: missing ')' before '('\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1305): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1306): error C2059: syntax error: 'const'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1310): error C2059: syntax error: ')'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1311): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1322): error C2143: syntax error: missing ')' before '('\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1323): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1324): error C2059: syntax error: 'const'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1337): error C2059: syntax error: ')'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1338): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1339): error C2065: 'psk_client_callback': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1340): error C2065: 'ssl': undeclared identifier\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1341): error C2059: syntax error: 'const'\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1356): error C2143: syntax error: missing ')' before '('\n1&gt;D:\\Programming\\OpenSSL-Win32\\include\\openssl/ssl.h(1357): fatal error C1003: error count exceeds 100; stopping compilation\n\n========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ==========\n</code></pre>\n"}, {"tags": ["c++", "cmake", "sfml", "fedora-23"], "comments": [{"owner": {"reputation": 44923, "user_id": 3440745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56e5b88faef87b734150f28962f0c8e5?s=128&d=identicon&r=PG&f=1", "display_name": "Tsyvarev", "link": "https://stackoverflow.com/users/3440745/tsyvarev"}, "edited": false, "score": 0, "creation_date": 1458768301, "post_id": 36188822, "comment_id": 60013211, "body": "CMake normally search library file without version suffix. Try to create <code>libxcb-image.so</code> link to one of your existed libraries."}, {"owner": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "edited": false, "score": 0, "creation_date": 1458772334, "post_id": 36188822, "comment_id": 60014941, "body": "Please don&#39;t create links on your system by hand, this can cause breakage. You should rather try to install the libxcb-devel or xcb-util-image-devel packages if you have not already. By the way, SFML is already packaged for fedora. Why do you want to build it from source ?"}, {"owner": {"reputation": 647, "user_id": 4086020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51666e33b30fa4041da075151209a271?s=128&d=identicon&r=PG&f=1", "display_name": "HKVariant", "link": "https://stackoverflow.com/users/4086020/hkvariant"}, "reply_to_user": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "edited": false, "score": 0, "creation_date": 1458772563, "post_id": 36188822, "comment_id": 60015028, "body": "@DimitriMerejkowsky Nevermind! Worked! but now I get a new error: UDev not found. UDev: You can specify includes: -DUDEV_PATH_INCLUDES=/opt/udev/include       currently found includes: UDEV_INCLUDE_DIR-NOTFOUND UDev: You can specify libs: -DUDEV_PATH_LIB=/opt/udev/lib       currently found libs: UDEV_LIBRARIES-NOTFOUND CMake Error at cmake/Modules/FindUDev.cmake:49 (MESSAGE):   Could not find UDev library Call Stack (most recent call first):   src/SFML/Window/CMakeLists.txt:215 (find_package)  I will add to the main post."}, {"owner": {"reputation": 647, "user_id": 4086020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51666e33b30fa4041da075151209a271?s=128&d=identicon&r=PG&f=1", "display_name": "HKVariant", "link": "https://stackoverflow.com/users/4086020/hkvariant"}, "reply_to_user": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "edited": false, "score": 0, "creation_date": 1458773015, "post_id": 36188822, "comment_id": 60015205, "body": "@DimitriMerejkowsky And the reason I want to build from source is that the packaged version gives me a linking error to sf::Texture:LoadFromFile and people said to build it from source."}, {"owner": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "edited": false, "score": 0, "creation_date": 1458773839, "post_id": 36188822, "comment_id": 60015490, "body": "Care to share a link ? In this case, it may be better to report the bug to Fedora and see if they can fix it"}, {"owner": {"reputation": 647, "user_id": 4086020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51666e33b30fa4041da075151209a271?s=128&d=identicon&r=PG&f=1", "display_name": "HKVariant", "link": "https://stackoverflow.com/users/4086020/hkvariant"}, "reply_to_user": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "edited": false, "score": 0, "creation_date": 1458775514, "post_id": 36188822, "comment_id": 60016107, "body": "@DimitriMerejkowsky A link to the error? If so, what should I use to share it."}, {"owner": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "edited": false, "score": 0, "creation_date": 1458778942, "post_id": 36188822, "comment_id": 60017086, "body": "I&#39;d to see a written trace of your exchange with the people that told you to build from source (just curious)."}, {"owner": {"reputation": 647, "user_id": 4086020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51666e33b30fa4041da075151209a271?s=128&d=identicon&r=PG&f=1", "display_name": "HKVariant", "link": "https://stackoverflow.com/users/4086020/hkvariant"}, "reply_to_user": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "edited": false, "score": 0, "creation_date": 1458780344, "post_id": 36188822, "comment_id": 60017430, "body": "@DimitriMerejkowsky Oh I never posted anything about it, I just saw a post someone did somewhere on a google search I did. I&#39;ll try to dig it up though!"}, {"owner": {"reputation": 647, "user_id": 4086020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51666e33b30fa4041da075151209a271?s=128&d=identicon&r=PG&f=1", "display_name": "HKVariant", "link": "https://stackoverflow.com/users/4086020/hkvariant"}, "reply_to_user": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "edited": false, "score": 0, "creation_date": 1458780635, "post_id": 36188822, "comment_id": 60017519, "body": "@DimitriMerejkowsky Ah the problem persists. I&#39;m just going to post the bug on here and report it to fedora. I guess rebuilding it didn&#39;t work anyway. Thanks for you help!"}], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 4086020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51666e33b30fa4041da075151209a271?s=128&d=identicon&r=PG&f=1", "display_name": "HKVariant", "link": "https://stackoverflow.com/users/4086020/hkvariant"}, "edited": false, "score": 0, "creation_date": 1458775557, "post_id": 36190270, "comment_id": 60016121, "body": "Yeah thank you that fixed it. I have a a couple of errors of missing packages but I think I can fix it since you told me about &#39;-devel&#39;. Thank you friend!"}], "tags": [], "owner": {"reputation": 771, "user_id": 6010239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19bfdc532ab497b810c268922fb76caa?s=128&d=identicon&r=PG", "display_name": "Dimitri Merejkowsky", "link": "https://stackoverflow.com/users/6010239/dimitri-merejkowsky"}, "is_accepted": true, "score": 1, "last_activity_date": 1458773702, "creation_date": 1458773702, "answer_id": 36190270, "question_id": 36188822, "link": "https://stackoverflow.com/questions/36188822/error-using-cmake-to-build-sfml-for-fedora-23-xcb-image-not-found/36190270#36190270", "title": "Error using CMake to build SFML for Fedora 23 [xcb-image not found]", "body": "<p>Same principle here : you should try to find the \"-devel\" package that contains the files that CMake is looking for (i.e the .so without a number appended at the end, and the header files)</p>\n\n<p>Here the package you are looking for may be systemd-devel  (udev library is now part of systemd)</p>\n"}], "owner": {"reputation": 647, "user_id": 4086020, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51666e33b30fa4041da075151209a271?s=128&d=identicon&r=PG&f=1", "display_name": "HKVariant", "link": "https://stackoverflow.com/users/4086020/hkvariant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1244, "favorite_count": 0, "accepted_answer_id": 36190270, "answer_count": 1, "score": 0, "last_activity_date": 1458773702, "creation_date": 1458767734, "last_edit_date": 1458773567, "question_id": 36188822, "link": "https://stackoverflow.com/questions/36188822/error-using-cmake-to-build-sfml-for-fedora-23-xcb-image-not-found", "title": "Error using CMake to build SFML for Fedora 23 [xcb-image not found]", "body": "<p>[FIRST ERROR FIXED, ANOTHER ONE AT END OF POST]</p>\n\n<p>Hello and thanks in advance, I am having an issue trying to build SFML for my Fedora 23 system so I may continue work on my game I was developing in Linux Mint (I like fedora better, and I want it to work for both Debian and openSUSE distributions). The problem occurs when I am building SFML in the CMake GUI, it gives me the error:</p>\n\n<pre><code>Could NOT find LIBXCB_IMAGE (missing:  LIBXCB_IMAGE_LIBRARY) \nCMake Error at cmake/Modules/FindXCB.cmake:93 (message):\n  xcb-image not found\nCall Stack (most recent call first):\n  src/SFML/Window/CMakeLists.txt:202 (find_package)\n\n\nConfiguring incomplete, errors occurred!\n</code></pre>\n\n<p>I checked to see if xcb-image was there by using the \"locate\" keyword and it returned:</p>\n\n<pre><code>[hunter@localhost ~]$ locate xcb-image \n/usr/lib/libxcb-image.so.0\n/usr/lib/libxcb-image.so.0.0.0 /usr/lib64/libxcb-image.so.0\n/usr/lib64/libxcb-image.so.0.0.0\n</code></pre>\n\n<p>I also tried reinstalling libxcb to see if that would fix it but no cigar. </p>\n\n<p>And yes, I read the tutorial SFML gives and made sure everything was installed and I followed the correct steps as well. <a href=\"http://www.sfml-dev.org/tutorials/2.3/compile-with-cmake.php\" rel=\"nofollow\">link</a></p>\n\n<p>Any idea why it's giving me this error? Compiler is the normal Fedora 23 gcc-c++ install... I'll provide any more information if needed.</p>\n\n<hr>\n\n<ul>\n<li><em>EDIT 1</em>\n\n<hr></li>\n</ul>\n\n<p>Fixed by installing 'xcb-util-image-devel'</p>\n\n<p>I was able to fix it; but now get a new error:</p>\n\n<pre><code>UDev not found.\nUDev: You can specify includes: -DUDEV_PATH_INCLUDES=/opt/udev/include\n      currently found includes: UDEV_INCLUDE_DIR-NOTFOUND\nUDev: You can specify libs: -DUDEV_PATH_LIB=/opt/udev/lib\n      currently found libs: UDEV_LIBRARIES-NOTFOUND\nCMake Error at cmake/Modules/FindUDev.cmake:49 (MESSAGE):\n  Could not find UDev library\nCall Stack (most recent call first):\n  src/SFML/Window/CMakeLists.txt:215 (find_package)\n</code></pre>\n\n<p>I used 'locate udev' and I found lots of stuff: </p>\n\n<pre><code>[hunter@localhost ~]$ locate udev\n/etc/udev\n/etc/udev/hwdb.bin\n/etc/udev/hwdb.d\n/etc/udev/rules.d\n/etc/udev/udev.conf\n/usr/bin/udevadm\n/usr/lib/libudev.so.1\n/usr/lib/libudev.so.1.6.4\n/usr/lib/udev\n/usr/lib/dracut/modules.d/95udev-rules\n/usr/lib/dracut/modules.d/90dm/dm-pre-udev.sh\n/usr/lib/dracut/modules.d/90mdraid/mdmon-pre-udev.sh\n/usr/lib/dracut/modules.d/95udev-rules/59-persistent-storage.rules\n/usr/lib/dracut/modules.d/95udev-rules/61-persistent-storage.rules\n/usr/lib/dracut/modules.d/95udev-rules/load-modules.sh\n/usr/lib/dracut/modules.d/95udev-rules/module-setup.sh\n/usr/lib/dracut/modules.d/98dracut-systemd/dracut-pre-udev.service\n/usr/lib/dracut/modules.d/98dracut-systemd/dracut-pre-udev.service.8\n/usr/lib/dracut/modules.d/98dracut-systemd/dracut-pre-udev.service.8.asc\n/usr/lib/dracut/modules.d/98dracut-systemd/dracut-pre-udev.sh\n/usr/lib/python3.4/site-packages/pyudev\n/usr/lib/python3.4/site-packages/pyudev-0.17-py3.4.egg-info\n/usr/lib/python3.4/site-packages/blivet/udev.py\n/usr/lib/python3.4/site-packages/blivet/__pycache__/udev.cpython-34.pyc\n/usr/lib/python3.4/site-packages/blivet/__pycache__/udev.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__init__.py\n/usr/lib/python3.4/site-packages/pyudev/__pycache__\n/usr/lib/python3.4/site-packages/pyudev/_compat.py\n/usr/lib/python3.4/site-packages/pyudev/_errorcheckers.py\n/usr/lib/python3.4/site-packages/pyudev/_libc.py\n/usr/lib/python3.4/site-packages/pyudev/_libudev.py\n/usr/lib/python3.4/site-packages/pyudev/_qt_base.py\n/usr/lib/python3.4/site-packages/pyudev/_util.py\n/usr/lib/python3.4/site-packages/pyudev/core.py\n/usr/lib/python3.4/site-packages/pyudev/device\n/usr/lib/python3.4/site-packages/pyudev/glib.py\n/usr/lib/python3.4/site-packages/pyudev/monitor.py\n/usr/lib/python3.4/site-packages/pyudev/os.py\n/usr/lib/python3.4/site-packages/pyudev/pyqt4.py\n/usr/lib/python3.4/site-packages/pyudev/pyside.py\n/usr/lib/python3.4/site-packages/pyudev/wx.py\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/__init__.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/__init__.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_compat.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_compat.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_errorcheckers.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_errorcheckers.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_libc.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_libc.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_libudev.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_libudev.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_qt_base.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_qt_base.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_util.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/_util.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/core.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/core.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/glib.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/glib.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/monitor.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/monitor.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/os.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/os.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/pyqt4.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/pyqt4.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/pyside.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/pyside.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/wx.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/__pycache__/wx.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/device/__init__.py\n/usr/lib/python3.4/site-packages/pyudev/device/__pycache__\n/usr/lib/python3.4/site-packages/pyudev/device/_device.py\n/usr/lib/python3.4/site-packages/pyudev/device/_errors.py\n/usr/lib/python3.4/site-packages/pyudev/device/__pycache__/__init__.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/device/__pycache__/__init__.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/device/__pycache__/_device.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/device/__pycache__/_device.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev/device/__pycache__/_errors.cpython-34.pyc\n/usr/lib/python3.4/site-packages/pyudev/device/__pycache__/_errors.cpython-34.pyo\n/usr/lib/python3.4/site-packages/pyudev-0.17-py3.4.egg-info/PKG-INFO\n/usr/lib/python3.4/site-packages/pyudev-0.17-py3.4.egg-info/SOURCES.txt\n/usr/lib/python3.4/site-packages/pyudev-0.17-py3.4.egg-info/dependency_links.txt\n/usr/lib/python3.4/site-packages/pyudev-0.17-py3.4.egg-info/top_level.txt\n/usr/lib/python3.4/site-packages/sos/plugins/udev.py\n/usr/lib/python3.4/site-packages/sos/plugins/__pycache__/udev.cpython-34.pyc\n/usr/lib/python3.4/site-packages/sos/plugins/__pycache__/udev.cpython-34.pyo\n/usr/lib/systemd/systemd-udevd\n/usr/lib/systemd/system/dracut-pre-udev.service\n/usr/lib/systemd/system/initrd-udevadm-cleanup-db.service\n/usr/lib/systemd/system/systemd-udev-settle.service\n/usr/lib/systemd/system/systemd-udev-trigger.service\n/usr/lib/systemd/system/systemd-udevd-control.socket\n/usr/lib/systemd/system/systemd-udevd-kernel.socket\n/usr/lib/systemd/system/systemd-udevd.service\n/usr/lib/systemd/system/initrd.target.wants/dracut-pre-udev.service\n/usr/lib/systemd/system/sockets.target.wants/systemd-udevd-control.socket\n/usr/lib/systemd/system/sockets.target.wants/systemd-udevd-kernel.socket\n/usr/lib/systemd/system/sysinit.target.wants/systemd-udev-trigger.service\n/usr/lib/systemd/system/sysinit.target.wants/systemd-udevd.service\n/usr/lib/udev/ata_id\n/usr/lib/udev/bcache-register\n/usr/lib/udev/cdrom_id\n/usr/lib/udev/check-ptp-camera\n/usr/lib/udev/collect\n/usr/lib/udev/hwdb.d\n/usr/lib/udev/iphone-set-info\n/usr/lib/udev/ipod-set-info\n/usr/lib/udev/libinput-device-group\n/usr/lib/udev/libinput-model-quirks\n/usr/lib/udev/mtd_probe\n/usr/lib/udev/mtp-probe\n/usr/lib/udev/pcmcia-check-broken-cis\n/usr/lib/udev/pcmcia-socket-startup\n/usr/lib/udev/rename_device\n/usr/lib/udev/rules.d\n/usr/lib/udev/scsi_id\n/usr/lib/udev/udev-add-printer\n/usr/lib/udev/udev-configure-printer\n/usr/lib/udev/usb_modeswitch\n/usr/lib/udev/v4l_id\n/usr/lib/udev/hwdb.d/20-OUI.hwdb\n/usr/lib/udev/hwdb.d/20-acpi-vendor.hwdb\n/usr/lib/udev/hwdb.d/20-bluetooth-vendor-product.hwdb\n/usr/lib/udev/hwdb.d/20-net-ifname.hwdb\n/usr/lib/udev/hwdb.d/20-pci-classes.hwdb\n/usr/lib/udev/hwdb.d/20-pci-vendor-model.hwdb\n/usr/lib/udev/hwdb.d/20-sane-backends.hwdb\n/usr/lib/udev/hwdb.d/20-sdio-classes.hwdb\n/usr/lib/udev/hwdb.d/20-sdio-vendor-model.hwdb\n/usr/lib/udev/hwdb.d/20-usb-classes.hwdb\n/usr/lib/udev/hwdb.d/20-usb-media-players.hwdb\n/usr/lib/udev/hwdb.d/20-usb-vendor-model.hwdb\n/usr/lib/udev/hwdb.d/60-evdev.hwdb\n/usr/lib/udev/hwdb.d/60-keyboard.hwdb\n/usr/lib/udev/hwdb.d/69-libmtp.hwdb\n/usr/lib/udev/hwdb.d/70-mouse.hwdb\n/usr/lib/udev/hwdb.d/70-pointingstick.hwdb\n/usr/lib/udev/hwdb.d/90-libinput-model-quirks.hwdb\n/usr/lib/udev/rules.d/10-dm.rules\n/usr/lib/udev/rules.d/11-dm-lvm.rules\n/usr/lib/udev/rules.d/11-dm-mpath.rules\n/usr/lib/udev/rules.d/13-dm-disk.rules\n/usr/lib/udev/rules.d/39-usbmuxd.rules\n/usr/lib/udev/rules.d/40-iio-sensor-proxy.rules\n/usr/lib/udev/rules.d/40-libgphoto2.rules\n/usr/lib/udev/rules.d/40-usb-media-players.rules\n/usr/lib/udev/rules.d/40-usb_modeswitch.rules\n/usr/lib/udev/rules.d/50-udev-default.rules\n/usr/lib/udev/rules.d/56-hp_conf_usb.rules\n/usr/lib/udev/rules.d/56-hpmud.rules\n/usr/lib/udev/rules.d/60-block.rules\n/usr/lib/udev/rules.d/60-cdrom_id.rules\n/usr/lib/udev/rules.d/60-drm.rules\n/usr/lib/udev/rules.d/60-evdev.rules\n/usr/lib/udev/rules.d/60-fprint-autosuspend.rules\n/usr/lib/udev/rules.d/60-net.rules\n/usr/lib/udev/rules.d/60-pcmcia.rules\n/usr/lib/udev/rules.d/60-persistent-alsa.rules\n/usr/lib/udev/rules.d/60-persistent-input.rules\n/usr/lib/udev/rules.d/60-persistent-storage-tape.rules\n/usr/lib/udev/rules.d/60-persistent-storage.rules\n/usr/lib/udev/rules.d/60-persistent-v4l.rules\n/usr/lib/udev/rules.d/60-raw.rules\n/usr/lib/udev/rules.d/60-serial.rules\n/usr/lib/udev/rules.d/61-gnome-bluetooth-rfkill.rules\n/usr/lib/udev/rules.d/61-gnome-settings-daemon-rfkill.rules\n/usr/lib/udev/rules.d/62-multipath.rules\n/usr/lib/udev/rules.d/63-md-raid-arrays.rules\n/usr/lib/udev/rules.d/64-btrfs.rules\n/usr/lib/udev/rules.d/64-md-raid-assembly.rules\n/usr/lib/udev/rules.d/65-libwacom.rules\n/usr/lib/udev/rules.d/65-md-incremental.rules\n/usr/lib/udev/rules.d/65-sane-backends.rules\n/usr/lib/udev/rules.d/69-bcache.rules\n/usr/lib/udev/rules.d/69-cd-sensors.rules\n/usr/lib/udev/rules.d/69-dm-lvm-metad.rules\n/usr/lib/udev/rules.d/69-libmtp.rules\n/usr/lib/udev/rules.d/69-xorg-vmmouse.rules\n/usr/lib/udev/rules.d/70-mouse.rules\n/usr/lib/udev/rules.d/70-power-switch.rules\n/usr/lib/udev/rules.d/70-printers.rules\n/usr/lib/udev/rules.d/70-spice-vdagentd.rules\n/usr/lib/udev/rules.d/70-touchpad-quirks.rules\n/usr/lib/udev/rules.d/70-uaccess.rules\n/usr/lib/udev/rules.d/70-wacom.rules\n/usr/lib/udev/rules.d/71-seat.rules\n/usr/lib/udev/rules.d/73-seat-late.rules\n/usr/lib/udev/rules.d/75-net-description.rules\n/usr/lib/udev/rules.d/75-probe_mtd.rules\n/usr/lib/udev/rules.d/77-mm-cinterion-port-types.rules\n/usr/lib/udev/rules.d/77-mm-ericsson-mbm.rules\n/usr/lib/udev/rules.d/77-mm-huawei-net-port-types.rules\n/usr/lib/udev/rules.d/77-mm-longcheer-port-types.rules\n/usr/lib/udev/rules.d/77-mm-mtk-port-types.rules\n/usr/lib/udev/rules.d/77-mm-nokia-port-types.rules\n/usr/lib/udev/rules.d/77-mm-pcmcia-device-blacklist.rules\n/usr/lib/udev/rules.d/77-mm-platform-serial-whitelist.rules\n/usr/lib/udev/rules.d/77-mm-simtech-port-types.rules\n/usr/lib/udev/rules.d/77-mm-telit-port-types.rules\n/usr/lib/udev/rules.d/77-mm-usb-device-blacklist.rules\n/usr/lib/udev/rules.d/77-mm-usb-serial-adapters-greylist.rules\n/usr/lib/udev/rules.d/77-mm-x22x-port-types.rules\n/usr/lib/udev/rules.d/77-mm-zte-port-types.rules\n/usr/lib/udev/rules.d/78-sound-card.rules\n/usr/lib/udev/rules.d/80-drivers.rules\n/usr/lib/udev/rules.d/80-kvm.rules\n/usr/lib/udev/rules.d/80-libinput-device-groups.rules\n/usr/lib/udev/rules.d/80-mm-candidate.rules\n/usr/lib/udev/rules.d/80-net-setup-link.rules\n/usr/lib/udev/rules.d/80-udisks2.rules\n/usr/lib/udev/rules.d/85-nm-unmanaged.rules\n/usr/lib/udev/rules.d/85-regulatory.rules\n/usr/lib/udev/rules.d/90-alsa-restore.rules\n/usr/lib/udev/rules.d/90-fwupd-devices.rules\n/usr/lib/udev/rules.d/90-libgpod.rules\n/usr/lib/udev/rules.d/90-libinput-model-quirks.rules\n/usr/lib/udev/rules.d/90-pulseaudio.rules\n/usr/lib/udev/rules.d/90-vconsole.rules\n/usr/lib/udev/rules.d/91-drm-modeset.rules\n/usr/lib/udev/rules.d/95-cd-devices.rules\n/usr/lib/udev/rules.d/95-dm-notify.rules\n/usr/lib/udev/rules.d/95-upower-csr.rules\n/usr/lib/udev/rules.d/95-upower-hid.rules\n/usr/lib/udev/rules.d/95-upower-wup.rules\n/usr/lib/udev/rules.d/98-kexec.rules\n/usr/lib/udev/rules.d/99-qemu-guest-agent.rules\n/usr/lib/udev/rules.d/99-systemd.rules\n/usr/lib64/libgudev-1.0.so.0\n/usr/lib64/libgudev-1.0.so.0.2.0\n/usr/lib64/libudev.so.1\n/usr/lib64/libudev.so.1.6.4\n/usr/lib64/pulse-7.0/modules/module-udev-detect.so\n/usr/sbin/udevadm\n/usr/share/bash-completion/completions/_udevadm\n/usr/share/bash-completion/completions/udevadm\n/usr/share/doc/libgudev\n/usr/share/doc/python3-pyudev\n/usr/share/doc/libgudev/NEWS\n/usr/share/doc/python3-pyudev/CHANGES.rst\n/usr/share/doc/python3-pyudev/README.rst\n/usr/share/licenses/libgudev\n/usr/share/licenses/python3-pyudev\n/usr/share/licenses/libgudev/COPYING\n/usr/share/licenses/python3-pyudev/COPYING\n/usr/share/man/man5/udev.conf.5.gz\n/usr/share/man/man7/udev.7.gz\n/usr/share/man/man8/dracut-pre-udev.service.8.gz\n/usr/share/man/man8/systemd-udevd-control.socket.8.gz\n/usr/share/man/man8/systemd-udevd-kernel.socket.8.gz\n/usr/share/man/man8/systemd-udevd.8.gz\n/usr/share/man/man8/systemd-udevd.service.8.gz\n/usr/share/man/man8/udevadm.8.gz\n/usr/share/pkgconfig/udev.pc\n/usr/share/vim/vim74/ftplugin/udevconf.vim\n/usr/share/vim/vim74/ftplugin/udevperm.vim\n/usr/share/vim/vim74/ftplugin/udevrules.vim\n/usr/share/vim/vim74/syntax/udevconf.vim\n/usr/share/vim/vim74/syntax/udevperm.vim\n/usr/share/vim/vim74/syntax/udevrules.vim\n/usr/share/zsh/site-functions/_udevadm\n/var/cache/PackageKit/metadata/updates/packages/python3-pyudev-0.19.0-1.fc23.noarch.rpm\n</code></pre>\n"}, {"tags": ["c++", "buffer", "cin"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1458768044, "post_id": 36188819, "comment_id": 60013089, "body": "Once failbit is set, future extraction operations immediately fail.  You can clear failbit with <code>cin.clear()</code>"}, {"owner": {"reputation": 63, "user_id": 4739791, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12a4e8c3a429d4c34d29edbfc2a7681c?s=128&d=identicon&r=PG&f=1", "display_name": "PeterLikesCode", "link": "https://stackoverflow.com/users/4739791/peterlikescode"}, "reply_to_user": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1458807316, "post_id": 36188819, "comment_id": 60025089, "body": "Worked. Thank you. I marked this as a duplicate since an answer already existed."}], "owner": {"reputation": 63, "user_id": 4739791, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/12a4e8c3a429d4c34d29edbfc2a7681c?s=128&d=identicon&r=PG&f=1", "display_name": "PeterLikesCode", "link": "https://stackoverflow.com/users/4739791/peterlikescode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "closed_date": 1458807286, "answer_count": 0, "score": 0, "last_activity_date": 1458768045, "creation_date": 1458767727, "question_id": 36188819, "link": "https://stackoverflow.com/questions/36188819/c-stdcin-being-ignored-buffer", "closed_reason": "Duplicate", "title": "c++ std::cin being ignored (buffer?)", "body": "<p><em>There are a couple of questions similar to this one, however they cover another usage of cin.</em></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nint main(int argc, char *argv[]) {\n\nint coke = 1, sprite = 2, water = 3, fanta = 4, sevenup = 5, choice;\n\nwhile (true){\n    system(\"cls\");\n    std::cout &lt;&lt; \"Choose your drink:\\n1) Coke\\n2) Sprite\\n3) Water\\n4) Fanta\\n5) SevenUp\\n\\n\";\n\n    std::cin &gt;&gt; choice;\n\n    switch (choice){\n    case 1:\n        std::cout &lt;&lt; \"You chose a Coke.\";\n        break;\n    case 2:\n        std::cout &lt;&lt; \"You chose a Sprite.\";\n        break;\n    case 3:\n        std::cout &lt;&lt; \"You chose a Water.\";\n        break;\n    case 4:\n        std::cout &lt;&lt; \"You chose a Fanta.\";\n        break;\n    case 5:\n        std::cout &lt;&lt; \"You chose a SevenUp.\";\n        break;\n    default:\n        std::cout &lt;&lt; \"No choice like that. Here's your money back.\";\n        break;\n    }\n\n    while (true){\n        std::cout &lt;&lt; \"Would you like to buy another beverage? (y/n)\";\n        char answer1;\n        std::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\n        //***********************************************\n        //THIS IS WHERE IT HAPPENS\n        std::cin &gt;&gt; answer1;\n        //THIS IS WHERE IT HAPPENS\n        //***********************************************\n        if (answer1 == 'y'){\n            break;\n        }\n        if (answer1 == 'n'){\n            //end game\n            return 0;\n        }\n    }\n}\nstd::cin.ignore(std::numeric_limits&lt;std::streamsize&gt;::max(), '\\n');\nstd::cin.get();\nreturn 0;\n</code></pre>\n\n<p>}</p>\n\n<p>I commented the location \"of failure\" in the code above. This program asks the user for an input of 1-5. If the input is greater than 5, it requests another input. However if the user inputs a letter, not a number. The \"location of failure\" is simply skipped and the loop executed without ever requesting another input.</p>\n"}, {"tags": ["c++", "templates"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1458769023, "post_id": 36188794, "comment_id": 60013492, "body": "Don&#39;t optimise based on hypotheses created from what you&#39;ve heard. You need facts, so measure, measure, measure, and measure again."}, {"owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "edited": false, "score": 0, "creation_date": 1458813710, "post_id": 36188794, "comment_id": 60028334, "body": "Need to see a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a> in order to help."}, {"owner": {"reputation": 27, "user_id": 5600551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a7734f2648092a741b6743f2f580e6?s=128&d=identicon&r=PG&f=1", "display_name": "geoffw35", "link": "https://stackoverflow.com/users/5600551/geoffw35"}, "edited": false, "score": 0, "creation_date": 1458836269, "post_id": 36188794, "comment_id": 60043214, "body": "TrskalJM: Fair enough, but the code I entered is just the pertinent pieces from the transfer tool that works. I was hoping for some ideas that might help me restructure the classes to eliminate the need for a virtual table. Maybe that is not an appropriate question to pose to this forum. molbdnilo: I agree that I need to measure. The c++ transfer tool work well, but there is an older c version of this tool that is unacceptable for other reasons, but that is faster than the c++ code as regards the transfer functionality. I hoped there would be a way for the c++ code to run as fast or faster."}], "owner": {"reputation": 27, "user_id": 5600551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4a7734f2648092a741b6743f2f580e6?s=128&d=identicon&r=PG&f=1", "display_name": "geoffw35", "link": "https://stackoverflow.com/users/5600551/geoffw35"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1458767633, "creation_date": 1458767633, "question_id": 36188794, "link": "https://stackoverflow.com/questions/36188794/devirtualization-in-c-with-dynamic-allocation", "title": "devirtualization in c++ with dynamic allocation", "body": "<p>Here's the scenario. I have the job of increasing the efficiency of code that transfers huge amounts of data to local models from an ICD in a real-time simulation. This is the main function of this tool. However the Transfer class necessarily includes a pure virtual exec function that is inherited by other classes that implement the exec function to performs the transfer. I believe the code is nicely designed and works well, but just not fast enough, so that overflowing frames can happen. Since each transfer object is an implementation of the pure virtual function, the code will have a virtual pointer in each Transfer object. I've heard enough (e.g. from Alexandrescu) about how this can slow things down by having the vptr at the front of the cache. So I want to devirtualize this code (greatly simplified below) if possible:</p>\n\n<pre><code>Transfer.h\n\nclass Transfer\n{\n\npublic:\n\n    virtual void exec(void)=0;\n}\n</code></pre>\n\n<p>one example of many different templates for different transfer types</p>\n\n<pre><code>ConversionTransfer.h\n\ntemplate&lt;class fromType, class toType, bool negate_trans = false&gt;\n\nclass ConversionTransfer : public Transfer\n{\npublic:\n    /// Move the data, converting the input type to the output type\n    void exec(void);\n};\n\n//template class implementation\ntemplate &lt;class fromType, class toType, bool negate_trans&gt;:\nvoid ConversionTransfer&lt;fromType, toType, negate_trans&gt;::exec(void)\n{\n    *(toType *)this-&gt;mToAddr = (toType)*(fromType *)this-&gt;mFromAddr;\n}\n</code></pre>\n\n<p>The to and from types are not known at compile time, so the transfer objects are created dynamically during the initialization phase of the simulation.</p>\n\n<p>Example of how this is used following the initialization phase:</p>\n\n<pre><code>Table.cpp \n\n\nTransfer * newTransfer = NULL;\n\n\n//create the transfer object\nnewTransfer = new ConversionTransfer&lt;int, int,\n                        false&gt;;\n\nmTransfers.push_back(newTransfer);\n\n\nvoid Table::exec(void)\n{\n\n    TransferList_t::iterator end(mTransfers.end());\n    for (trans = mTransfers.begin(); trans != end; ++trans)\n        (*trans)-&gt;exec();\n\n}\n</code></pre>\n\n<p>mTransfers is a vector containing pointers to all the transfers objects. I was hoping you C++ experts could weigh in as to whether the devirtualization is possible and how best to accomplish it.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["c++", "multithreading"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1458767640, "post_id": 36188774, "comment_id": 60012871, "body": "Out of bounds access so undefined behaviour: <code>threads[i] = std::thread(child, i); </code>. The vector <code>threads</code> is empty."}, {"owner": {"reputation": 10545, "user_id": 238902, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/BRFti.png?s=128&g=1", "display_name": "Default", "link": "https://stackoverflow.com/users/238902/default"}, "edited": false, "score": 0, "creation_date": 1458767897, "post_id": 36188774, "comment_id": 60013011, "body": "why are you &quot;adding&quot; the threads to a vector when you&#39;re not using them outside of the for loop?"}, {"owner": {"reputation": 2942, "user_id": 1592836, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/FlvN2.jpg?s=128&g=1", "display_name": "syd619", "link": "https://stackoverflow.com/users/1592836/syd619"}, "edited": false, "score": 0, "creation_date": 1458768015, "post_id": 36188774, "comment_id": 60013071, "body": "For people down-voting and feel that this is a stupid question, I would appreciate it if you could at least provide a reference regarding my error instead down-voting."}], "answers": [{"comments": [{"owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1458768072, "post_id": 36188869, "comment_id": 60013104, "body": "@Juanchopanza True, I tried to focus on the part that&#39;s causing UB rather than the actual sense of the code."}], "tags": [], "owner": {"reputation": 32882, "user_id": 1870760, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/NAAkp.png?s=128&g=1", "display_name": "Hatted Rooster", "link": "https://stackoverflow.com/users/1870760/hatted-rooster"}, "is_accepted": false, "score": 0, "last_activity_date": 1458767929, "creation_date": 1458767929, "answer_id": 36188869, "question_id": 36188774, "link": "https://stackoverflow.com/questions/36188774/c-simple-threads-example/36188869#36188869", "title": "C++ simple threads example", "body": "<p>Your code trying to get some threads running isn't the problem here, it's with the test case:</p>\n\n<pre><code>std::vector&lt;std::thread&gt; threads;\n\nfor (int i = 0; i &lt; 10; i++) {\n\n    threads[i] = std::thread(child, i);         \n    threads[i].join();\n\n}\n</code></pre>\n\n<p><code>threads</code> is empty upon entering the <code>for</code> loop, thus accessing <code>threads[0]</code> or > 0 leads to Undefined Behaviour.</p>\n\n<p>You should use <code>push_back</code> ( or <code>emplace_back</code> ) instead to actually add elements to that <code>vector</code>:</p>\n\n<pre><code>std::vector&lt;std::thread&gt; threads;\n\nfor (int i = 0; i &lt; 10; i++) {\n\n    threads.push_back(std::thread(child, i));         \n    threads[i].join();\n}\n</code></pre>\n"}], "owner": {"reputation": 2942, "user_id": 1592836, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/FlvN2.jpg?s=128&g=1", "display_name": "syd619", "link": "https://stackoverflow.com/users/1592836/syd619"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1028, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1458767929, "creation_date": 1458767557, "last_edit_date": 1458767644, "question_id": 36188774, "link": "https://stackoverflow.com/questions/36188774/c-simple-threads-example", "title": "C++ simple threads example", "body": "<p>Hello I'm studying c++ &amp; threads.I'm new to c++ and the following code is my own based on experience in other languages. However although to me it seems okay and it does compile, when I execute it, it hangs - does nothing. Could you please tell me what I'm doing wrong?</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;thread&gt; \n#include &lt;vector&gt;\n#include &lt;string&gt; \n\nvoid printLine(std::string str) {   \n    std::cout &lt;&lt; str &lt;&lt; std::endl; \n}\n\nvoid child(int id) {    \n    printLine(\"This is a thread with id: \" + std::to_string(id)); \n}\n\nint main() {\n\n    printLine(\"This is the main thread and we are baout to spawn threads...\");      \n    std::vector&lt;std::thread&gt; threads;\n\n    for (int i = 0; i &lt; 10; i++) {\n\n        threads[i] = std::thread(child, i);         \n        threads[i].join();\n\n    }\n\n    printLine(\"Press any key to exit...\");  \n    std::getchar();\n\n    return 0;\n\n}\n</code></pre>\n"}, {"tags": ["c++", "winapi", "usb", "hid"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1458768393, "post_id": 36188696, "comment_id": 60013251, "body": "Erm, how could you know that it isn&#39;t just an empty string when you use ZeroMemory?  Delete those calls and try again."}, {"owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1458769479, "post_id": 36188696, "comment_id": 60013698, "body": "Like I said in the first paragraph, it doesn&#39;t even add a terminator, which it would on a zero character string. The buffer really isn&#39;t being touched"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1458769699, "post_id": 36188696, "comment_id": 60013805, "body": "Maybe you missed the point.  How do you detect it writing a zero character when the buffer already contains zeros?"}, {"owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1458770698, "post_id": 36188696, "comment_id": 60014266, "body": "Because I zero the memory specifically because it wasn&#39;t adding a terminator"}], "answers": [{"tags": [], "owner": {"reputation": 113, "user_id": 3091755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/321affc61ab41c470720ba09b590c66a?s=128&d=identicon&r=PG", "display_name": "Krishty", "link": "https://stackoverflow.com/users/3091755/krishty"}, "is_accepted": false, "score": 0, "last_activity_date": 1610535241, "creation_date": 1610535241, "answer_id": 65700456, "question_id": 36188696, "link": "https://stackoverflow.com/questions/36188696/hidd-getmanufacturerstring-and-similar-functions-return-success-but-do-not-modi/65700456#65700456", "title": "HidD_GetManufacturerString and similar functions return success, but do not modify the buffer", "body": "<p>Probably a driver bug.</p>\n<p>I have a similar problem: The functions return <code>TRUE</code>, but the buffer is either not touched at all or it is filled with random garbage.</p>\n<p>Here\u2019s the catch: This happens only for my headset, and only while I am actively using its microphone via Skype/Teams/etc. Once I leave a call, the functions start returning ordinary names again.</p>\n<p>This leads me to believe you\u2019re seeing a faulty driver. Mine is the Windows standard headset driver on Windows 10 1907.</p>\n"}], "owner": {"reputation": 252, "user_id": 4403294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/029e6e295cd808c16cf68c7db4679dec?s=128&d=identicon&r=PG", "display_name": "rscarson", "link": "https://stackoverflow.com/users/4403294/rscarson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 938, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1610535241, "creation_date": 1458767266, "last_edit_date": 1458809481, "question_id": 36188696, "link": "https://stackoverflow.com/questions/36188696/hidd-getmanufacturerstring-and-similar-functions-return-success-but-do-not-modi", "title": "HidD_GetManufacturerString and similar functions return success, but do not modify the buffer", "body": "<p>I am having an issue with 3 functions (<code>HidD_GetManufacturerString</code>, <code>HidD_GetProductString</code>, <code>HidD_GetSerialNumberString</code>). The issue is that they return <code>TRUE</code> (indicating success), but do not modify the buffer (not even adding a terminator).</p>\n\n<p>MSDN pages for the functions:</p>\n\n<p><code>HidD_GetManufacturerString</code>: <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff538959%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/hardware/ff538959%28v=vs.85%29.aspx</a></p>\n\n<p><code>HidD_GetProductString</code>: <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff539681%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/hardware/ff539681%28v=vs.85%29.aspx</a></p>\n\n<p><code>HidD_GetSerialNumberString</code>: <a href=\"https://msdn.microsoft.com/en-us/library/windows/hardware/ff539683%28v=vs.85%29.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/windows/hardware/ff539683%28v=vs.85%29.aspx</a></p>\n\n<p>Here is the code that actually calls the methods:</p>\n\n<pre><code>wchar_t manufacturer[MAX_SERIAL_LEN];\nwchar_t product[MAX_SERIAL_LEN];\nwchar_t serial[MAX_SERIAL_LEN];\n\nZeroMemory(manufacturer, MAX_SERIAL_LEN);\nZeroMemory(product, MAX_SERIAL_LEN);\nZeroMemory(serial, MAX_SERIAL_LEN);\n\nHidD_GetManufacturerString(hFile, manufacturer, MAX_SERIAL_LEN);\nHidD_GetProductString(hFile, product, MAX_SERIAL_LEN);\nHidD_GetSerialNumberString(hFile, serial, MAX_SERIAL_LEN);\n\nprintf(\"Information for device %s\\nManufacturer: %S\\nProduct: %S\\nSerial: %S\\n\\n\", \n    DevIntfDetailData-&gt;DevicePath, \n    manufacturer, product, serial\n);\n</code></pre>\n\n<p><code>hFile</code> is opened like this:</p>\n\n<pre><code>HANDLE hFile = CreateFile(DevIntfDetailData-&gt;DevicePath, 0, FILE_SHARE_READ, 0, OPEN_EXISTING, 0, 0);\n</code></pre>\n\n<p><code>DevIntfDetailData</code> is filled using <code>SetupDiGetDeviceInterfaceDetail</code></p>\n\n<p><code>MAX_SERIAL_LEN</code> is defined as</p>\n\n<pre><code>sizeof(wchar_t)*127\n</code></pre>\n"}, {"tags": ["c++", "lambda", "c++14"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1458767559, "post_id": 36188694, "comment_id": 60012829, "body": "It matters if the original <code>x</code> is <code>const</code>."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1458767884, "post_id": 36188694, "comment_id": 60013005, "body": "Does it capture it by copy in both cases?"}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1458768060, "post_id": 36188694, "comment_id": 60013095, "body": "@skypjack : In the <code>[x = ...]</code> case, <code>x</code> can be copy or move-initialized \u2013 it depends on the right-hand-side expression. For <code>[x = x]</code> specifically, that is copy-initialization, yes."}, {"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "reply_to_user": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "edited": false, "score": 0, "creation_date": 1458768579, "post_id": 36188694, "comment_id": 60013319, "body": "@ildjarn Yeah, I understand what happens in <code>[x = ...]</code>, that&#39;s the case <code>[x = x]</code> that does not make much sense to me, even though I&#39;ve seen it used around."}, {"owner": {"reputation": 59630, "user_id": 636019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38ba39c7ba510ac2951c010c26afb6a6?s=128&d=identicon&r=PG", "display_name": "ildjarn", "link": "https://stackoverflow.com/users/636019/ildjarn"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1458778260, "post_id": 36188694, "comment_id": 60016935, "body": "@skypjack : As @T.C. said, <code>[x = x]</code> drops const/volatile off the outer <code>x</code>&#39;s type."}], "answers": [{"comments": [{"owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "edited": false, "score": 0, "creation_date": 1458859450, "post_id": 36188986, "comment_id": 60055623, "body": "So, it&#39;s as you said in the comment - <i>It matters if the original <code>x</code> is <code>const</code></i>. The other cases don&#39;t seem to be of interest indeed. Thank you."}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 9, "last_activity_date": 1458769735, "last_edit_date": 1458769735, "creation_date": 1458768337, "answer_id": 36188986, "question_id": 36188694, "link": "https://stackoverflow.com/questions/36188694/lambda-capture-to-use-the-initializer-or-not-to-use-it/36188986#36188986", "title": "Lambda capture: to use the initializer or not to use it?", "body": "<p>There are various corner cases that pretty much boils down to \"<code>[x = x]</code> decays; <code>[x]</code> doesn't\".</p>\n\n<ul>\n<li><p>capturing a reference to function:</p>\n\n<pre><code>void (&amp;f)() = /* ...*/;\n[f]{};     // the lambda stores a reference to function.\n[f = f]{}; // the lambda stores a function pointer\n</code></pre></li>\n<li><p>capturing an array:</p>\n\n<pre><code>int a[2]={};\n[a]{}     // the lambda stores an array of two ints, copied from 'a'\n[a = a]{} // the lambda stores an int*\n</code></pre></li>\n<li><p>capturing a cv-qualified thing:</p>\n\n<pre><code>const int i = 0; \n[i]() mutable { i = 1; } // error; the data member is of type const int\n[i = i]() mutable { i = 1; } // OK; the data member's type is int\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 44996, "user_id": 4987285, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7063d966c8dfa84aefbd06786824090e?s=128&d=identicon&r=PG", "display_name": "skypjack", "link": "https://stackoverflow.com/users/4987285/skypjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 946, "favorite_count": 2, "accepted_answer_id": 36188986, "answer_count": 1, "score": 5, "last_activity_date": 1458769735, "creation_date": 1458767239, "question_id": 36188694, "link": "https://stackoverflow.com/questions/36188694/lambda-capture-to-use-the-initializer-or-not-to-use-it", "title": "Lambda capture: to use the initializer or not to use it?", "body": "<p>Consider the following, minimal example:</p>\n\n<pre><code>int main() {\n    int x = 10;    \n    auto f1 = [x](){ };\n    auto f2 = [x = x](){};\n}\n</code></pre>\n\n<p>I've seen more than once such an use of the initializer <code>[x = x]</code>, but I can't fully understand it and why I should use it instead of <code>[x]</code>.<br>\nI can get the meaning of something like <code>[&amp;x = x]</code> or <code>[x = x + 1]</code> (as shown in the <a href=\"http://en.cppreference.com/w/cpp/language/lambda\" rel=\"noreferrer\">documentation</a> and why they differ from <code>[x]</code>, of course, but still I can't figure out the differences between the lambdas in the example.</p>\n\n<p>Are they fully interchangeable or is there any difference I can't see? </p>\n"}, {"tags": ["c++", "windows"], "comments": [{"owner": {"reputation": 6536, "user_id": 858968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pVU1w.png?s=128&g=1", "display_name": "josh poley", "link": "https://stackoverflow.com/users/858968/josh-poley"}, "edited": false, "score": 0, "creation_date": 1458768059, "post_id": 36188673, "comment_id": 60013094, "body": "Have you thought about using Process <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms684161.aspx\" rel=\"nofollow noreferrer\">Job Objects</a> to ensure a clean state between test runs?"}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1458769604, "post_id": 36188673, "comment_id": 60013756, "body": "Pretty common question lately.  Surely the real problem is that you don&#39;t have trouble detect process termination, the issue is that the file is still locked so the linker cannot rewrite it.  That happens, too much crapware around.  Disable your anti-malware and try again. If it is Avast then uninstall asap.  The generic solution is to give whatever process has the lock enough time to finish its job.  Renaming the file can work too."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1458777105, "post_id": 36188673, "comment_id": 60016613, "body": "I don&#39;t have any anti-malware- I know they&#39;re all crap ;p It would be nice if I could detect this situation and figure out for sure which process is using the file, but given that I&#39;ve literally just written it out for my own test, I think it&#39;s unlikely that some other program is using it."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1458777174, "post_id": 36188673, "comment_id": 60016631, "body": "I don&#39;t see how waiting on a job object and waiting on a process are different things here. Job objects seem to be about controlling several processes at once; I have only one external process running at a time (modulo bugs like this one)"}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1458777875, "post_id": 36188673, "comment_id": 60016830, "body": "<code>handles.exe</code> (available from the MS website) should be able to show you what executable has the file open.  (Though it might not work if it is a kernel-mode component that is responsible.)  <code>pslist.exe</code> can be used to double-check that your test executable is no longer running.  Using separate directories for each test is probably the best workaround."}, {"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1458778097, "post_id": 36188673, "comment_id": 60016899, "body": "Have you checked whether Windows Search is enabled?  That&#39;s another component that can hold random files open."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 0, "creation_date": 1458814857, "post_id": 36188673, "comment_id": 60029002, "body": "Hmm. So in general, I can&#39;t assume that files on a Windows box won&#39;t be locked open by random crap? Perhaps waiting on the process isn&#39;t the problem after all. I guess in that case the separate directories thing may be a better solution..."}], "answers": [{"comments": [{"owner": {"reputation": 33265, "user_id": 886887, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/1616c7e4fab23f6e014ee11d75408bba?s=128&d=identicon&r=PG", "display_name": "Harry Johnston", "link": "https://stackoverflow.com/users/886887/harry-johnston"}, "edited": false, "score": 0, "creation_date": 1458948757, "post_id": 36218852, "comment_id": 60090619, "body": "That&#39;s pretty much what everybody else does, yes. :-)"}], "tags": [], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "is_accepted": true, "score": 1, "last_activity_date": 1458904425, "creation_date": 1458904425, "answer_id": 36218852, "question_id": 36188673, "link": "https://stackoverflow.com/questions/36188673/waiting-on-a-process-on-windows-randomly-fails/36218852#36218852", "title": "Waiting on a process on Windows randomly fails", "body": "<p>According to the comments, various Windows components like Search can hold locks on random files. This implies to me that in general, I can't assume that the file won't be locked and that therefore I should not assume that I can re-use it immediately.</p>\n\n<p>Therefore I've decided that I will simply not re-use the intermediate files.</p>\n"}], "owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 36218852, "answer_count": 1, "score": 1, "last_activity_date": 1458904425, "creation_date": 1458767155, "question_id": 36188673, "link": "https://stackoverflow.com/questions/36188673/waiting-on-a-process-on-windows-randomly-fails", "title": "Waiting on a process on Windows randomly fails", "body": "<p>I have a project which is a compiler. I have an integration test suite for my compiler that compiles the sample source into an object, invokes ld to link it, then invokes the executable and checks the result. Each of these three steps is a fresh process separate from the test driver.</p>\n\n<p>Unfortunately I am seeing random test failures because for some reason, when I come to link, the previous test has not finished running, even though I explicitly wait on termination of each process before beginning the next step. Thus ld fails as it cannot write out the new executable.</p>\n\n<p>I <em>could</em> fix this problem by running each test in a new directory or giving the temp files unique names, but I don't want to do that since this approach should work and I would just be papering over the problem that I can't wait on a process to terminate properly.</p>\n\n<p>Here's my code for starting and waiting for the process:</p>\n\n<pre><code>#include &lt;Windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;thread&gt;\n\nclass Pipe {\n    HANDLE ReadHandle;\n    HANDLE writehandle;\npublic:\n    Pipe() {\n        SECURITY_ATTRIBUTES saAttr;\n        saAttr.nLength = sizeof(SECURITY_ATTRIBUTES);\n        saAttr.bInheritHandle = TRUE;\n        saAttr.lpSecurityDescriptor = NULL;\n        CreatePipe(&amp;ReadHandle, &amp;writehandle, &amp;saAttr, 0);\n    }\n    HANDLE WriteHandle() {\n        return writehandle;\n    }\n    std::string Contents() {\n        CloseHandle(writehandle);\n        DWORD dwRead;\n        CHAR chBuf[1024];\n        BOOL bSuccess = FALSE;\n\n        std::string result;\n        for (;;)\n        {\n            bSuccess = ReadFile(ReadHandle, chBuf, 1024, &amp;dwRead, NULL);\n            if (!bSuccess || dwRead == 0) break;\n            result += std::string(chBuf, chBuf + dwRead);\n        }\n        return result;\n    }\n    ~Pipe() {\n        CloseHandle(ReadHandle);\n    }\n};\nWide::Driver::ProcessResult Wide::Driver::StartAndWaitForProcess(std::string name, std::vector&lt;std::string&gt; args, Util::optional&lt;unsigned&gt; timeout)\n{\n    auto throw_last_err = [] {\n        DWORD dw = GetLastError();\n        const char* message;\n        FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,\n            nullptr, dw, MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT), (LPTSTR)&amp;message, 0, nullptr);\n        std::string err = message;\n        LocalFree((void*)message);\n        throw std::runtime_error(err);\n    };\n    ProcessResult result;\n    Pipe stdoutpipe;\n    Pipe stderrpipe;\n    PROCESS_INFORMATION info = { 0 };\n    STARTUPINFO startinfo = { sizeof(STARTUPINFO) };\n    std::string final_args = name;\n    for (auto arg : args)\n         final_args += \" \" + arg;\n    startinfo.hStdOutput = stdoutpipe.WriteHandle();\n    startinfo.hStdError = stderrpipe.WriteHandle();\n    startinfo.hStdInput = INVALID_HANDLE_VALUE;\n    startinfo.dwFlags |= STARTF_USESTDHANDLES;\n    auto proc = CreateProcess(\n        name.c_str(),\n        &amp;final_args[0],\n        nullptr,\n        nullptr,\n        TRUE,\n        NORMAL_PRIORITY_CLASS | CREATE_NO_WINDOW,\n        nullptr,\n        nullptr,\n        &amp;startinfo,\n        &amp;info\n         );\n    if (!proc) {\n        throw_last_err();        \n    }\n    if (timeout == 0)\n        timeout = INFINITE;\n\n    std::thread writethread([&amp;] {\n        result.std_out = stdoutpipe.Contents();\n    });\n    std::thread errthread([&amp;] {\n        result.std_err = stderrpipe.Contents();\n    });\n\n    auto waiterr = WaitForSingleObject(info.hProcess, timeout ? *timeout : INFINITE);\n    if (waiterr == WAIT_TIMEOUT) {\n        TerminateProcess(info.hProcess, 1);\n        waiterr = WaitForSingleObject(info.hProcess, timeout ? *timeout : INFINITE);\n        if (waiterr != WAIT_OBJECT_0) {\n            throw_last_err();\n        }\n    } else if (waiterr != WAIT_OBJECT_0) {\n        throw_last_err();\n    }\n\n    writethread.join();\n    errthread.join();\n    DWORD exit_code;\n    GetExitCodeProcess(info.hProcess, &amp;exit_code);\n    CloseHandle(info.hProcess);\n    CloseHandle(info.hThread);\n    result.exitcode = exit_code;\n    if (exit_code != 0)\n        return result;\n    return result;\n}\n</code></pre>\n\n<p><code>throw_last_err()</code> is never called, so everything went fine, supposedly.</p>\n\n<p>Why can I not wait on the process?</p>\n"}, {"tags": ["c++", "winapi", "dll", "readprocessmemory"], "comments": [{"owner": {"reputation": 97, "user_id": 875375, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/026ae7a4c6f0b4be4333df9f78c30f4f?s=128&d=identicon&r=PG", "display_name": "paullj1", "link": "https://stackoverflow.com/users/875375/paullj1"}, "edited": false, "score": 0, "creation_date": 1458767879, "post_id": 36188602, "comment_id": 60013003, "body": "Not sure why the down-vote."}, {"owner": {"reputation": 1090, "user_id": 1983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bba922326537fd12144b9a2587f742f?s=128&d=identicon&r=PG", "display_name": "ssbssa", "link": "https://stackoverflow.com/users/1983398/ssbssa"}, "edited": false, "score": 0, "creation_date": 1458803770, "post_id": 36188602, "comment_id": 60023647, "body": "Why do you use the address of (&amp;) variable start_addr in ReadProcessMemory()?"}, {"owner": {"reputation": 97, "user_id": 875375, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/026ae7a4c6f0b4be4333df9f78c30f4f?s=128&d=identicon&r=PG", "display_name": "paullj1", "link": "https://stackoverflow.com/users/875375/paullj1"}, "reply_to_user": {"reputation": 1090, "user_id": 1983398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5bba922326537fd12144b9a2587f742f?s=128&d=identicon&r=PG", "display_name": "ssbssa", "link": "https://stackoverflow.com/users/1983398/ssbssa"}, "edited": false, "score": 1, "creation_date": 1458822367, "post_id": 36188602, "comment_id": 60033570, "body": "Ugh... because it&#39;s been way too long since I&#39;ve written C/C++... that was the problem.  Can&#39;t tell you how much I appreciate the second set of eyes."}], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 875375, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/026ae7a4c6f0b4be4333df9f78c30f4f?s=128&d=identicon&r=PG", "display_name": "paullj1", "link": "https://stackoverflow.com/users/875375/paullj1"}, "is_accepted": true, "score": 0, "last_activity_date": 1458822744, "last_edit_date": 1495540768, "creation_date": 1458822744, "answer_id": 36200308, "question_id": 36188602, "link": "https://stackoverflow.com/questions/36188602/win-api-readprocessmemory-at-base-address-of-dll-returning-unexpected-data/36200308#36200308", "title": "Win API ReadProcessMemory at base address of DLL returning unexpected data", "body": "<p>Code works as described minus my amateur mistake of sending the address of the variable I was using to store the address of the location in virtual memory of the target application.  In above code, changed:</p>\n\n<pre><code>if (ReadProcessMemory(h_lsass, &amp;start_addr, buf, size_of_ntdsa, &amp;num_bytes_read) != 0) {\n</code></pre>\n\n<p>to</p>\n\n<pre><code>if (ReadProcessMemory(h_lsass, start_addr, buf, size_of_ntdsa, &amp;num_bytes_read) != 0) {\n</code></pre>\n\n<p>Works like a charm.  Thank you <a href=\"https://stackoverflow.com/users/1983398/ssbssa\">ssbssa</a> for pointing out mistake, sorry for wasting anyone's time.</p>\n"}], "owner": {"reputation": 97, "user_id": 875375, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/026ae7a4c6f0b4be4333df9f78c30f4f?s=128&d=identicon&r=PG", "display_name": "paullj1", "link": "https://stackoverflow.com/users/875375/paullj1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1098, "favorite_count": 0, "accepted_answer_id": 36200308, "answer_count": 1, "score": 0, "last_activity_date": 1458822744, "creation_date": 1458766875, "last_edit_date": 1495542690, "question_id": 36188602, "link": "https://stackoverflow.com/questions/36188602/win-api-readprocessmemory-at-base-address-of-dll-returning-unexpected-data", "title": "Win API ReadProcessMemory at base address of DLL returning unexpected data", "body": "<p>I'm trying to read the contents of a DLL from memory for some academic research.  Specifically, the NTDSA.DLL library for the purpose of mutating specific instructions to simulate programming errors to force the system to fail.  The failure will then be recorded to train machine learning algorithms to predict future failures (this is an attempt to generalize previously published research <a href=\"http://dx.doi.org/10.1109/HASE.2015.29\" rel=\"nofollow noreferrer\">seen here</a>).</p>\n\n<p>I'm getting what I believe to be the base address in virtual memory of the lsass.exe process (which loads the target DLL) through the process outlined <a href=\"https://stackoverflow.com/a/14467493/875375\">here</a>.  I'm then calling ReadProcessMemory with an allocated buffer and the handle to lsass obtained by calling OpenProcess with 'PROCESS_ALL_ACCESS' set.  The ReadProcessMemory returns with error code 299 80% of the time (partial read) with zero bytes read.  My assumption is that the area I'm trying to access is in use when the call is made.  Fortunately, it will occasionally return the number of bytes I'm requesting.  Unfortunately, the data returned does not match what is on disk when compared to the static DLL in the System32 directory.  </p>\n\n<p>So the question is, is ReadProcessMemory doing something funny with the address that I give it, or is my virtual address wrong?  Is there another way to figure out where that DLL gets loaded into memory?  Any thoughts?  Any help or suggestions would be greatly appreciated.</p>\n\n<p>Adding Code:</p>\n\n<pre><code>// FaultInjection.cpp : Defines the entry point for the console application.\n//\n\n#include \"stdafx.h\"\n\n#include &lt;windows.h&gt;\n#include &lt;psapi.h&gt;\n\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &lt;fstream&gt;\n#include &lt;stdio.h&gt;\n#include &lt;io.h&gt;\n#include &lt;tchar.h&gt;\n\nusing namespace std;\n\nint _tmain(int argc, _TCHAR* argv[]) {\n\n    // Declarations\n    int pid = 0;\n    __int64* start_addr;\n    DWORD size_of_ntdsa;\n    DWORD aProcesses[1024], cbNeeded, cProcesses;\n    TCHAR szProcessName[MAX_PATH] = TEXT(\"&lt;unknown&gt;\");\n    HMODULE hmods[1024];\n    unsigned int i;\n\n    // Get All pids\n    if (!EnumProcesses(aProcesses, sizeof(aProcesses), &amp;cbNeeded)){\n        cout &lt;&lt; \"Failed to get all PIDs: \" &lt;&lt; GetLastError() &lt;&lt; endl;\n        return -1;\n    }\n\n    // Find pid for lsass.exe\n    cProcesses = cbNeeded / sizeof(DWORD);\n    for (i = 0; i &lt; cProcesses; i++) {\n        if (aProcesses[i] != 0) {\n            HANDLE hProc = OpenProcess(PROCESS_QUERY_INFORMATION | PROCESS_VM_READ, FALSE, aProcesses[i]);\n            if (hProc != NULL) {\n                HMODULE hMod;\n                DWORD cbNeededMod;\n                if (EnumProcessModules(hProc, &amp;hMod, sizeof(hMod), &amp;cbNeededMod)) {\n                    GetModuleBaseName(hProc, hMod, szProcessName, sizeof(szProcessName) / sizeof(TCHAR));\n                }\n\n                if (wstring(szProcessName).find(L\"lsass.exe\") != string::npos) {\n                    pid = aProcesses[i];\n                }\n                CloseHandle(hProc);\n            }\n        }\n    }\n\n    cout &lt;&lt; \"lsass pid: \" &lt;&lt; pid &lt;&lt; endl;\n\n    HANDLE h_lsass = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid);\n    if (!h_lsass) {\n        cout &lt;&lt; \"Failed to open process (are you root?): \" &lt;&lt; GetLastError() &lt;&lt; endl;\n        return -1;\n    }\n\n    // Get Process Image File Name\n    char filename[MAX_PATH];\n    if (GetProcessImageFileName(h_lsass, (LPTSTR)&amp;filename, MAX_PATH) == 0) {\n        cout &lt;&lt; \"Failed to get image file name: \" &lt;&lt; GetLastError() &lt;&lt; endl;\n        CloseHandle(h_lsass);\n        return -1;\n    }\n\n    // Enumerate modules within process\n    if (EnumProcessModules(h_lsass, hmods, sizeof(hmods), &amp;cbNeeded)) {\n        for (i = 0; i &lt; (cbNeeded / sizeof(HMODULE)); i++) {\n            TCHAR szModName[MAX_PATH];\n            if (GetModuleFileNameEx(h_lsass, hmods[i], szModName, sizeof(szModName) / sizeof(TCHAR))) {\n                if (wstring(szModName).find(L\"NTDSA.dll\") != string::npos) {\n                    _tprintf(TEXT(\"%s\\n\"), szModName);\n                    MODULEINFO lModInfo = { 0 };\n                    if (GetModuleInformation(h_lsass, hmods[i], &amp;lModInfo, sizeof(lModInfo))){\n                        cout &lt;&lt; \"\\t Base Addr: \" &lt;&lt; lModInfo.lpBaseOfDll &lt;&lt; endl;\n                        cout &lt;&lt; \"\\t Entry Point: \" &lt;&lt; lModInfo.EntryPoint &lt;&lt; endl;\n                        cout &lt;&lt; \"\\t Size of image: \" &lt;&lt; lModInfo.SizeOfImage &lt;&lt; endl;\n\n                        start_addr = (__int64*)lModInfo.lpBaseOfDll;\n                        size_of_ntdsa = lModInfo.SizeOfImage;\n                    }\n                    else {\n                        cout &lt;&lt; \"Failed to Print enumerated list of modules: \" &lt;&lt; GetLastError() &lt;&lt; endl;\n                    }\n                }\n            } else {\n                cout &lt;&lt; \"Failed to Print enumerated list of modules: \" &lt;&lt; GetLastError() &lt;&lt; endl;\n            }\n        }\n    }\n    else {\n        cout &lt;&lt; \"Failed to enum the modules: \" &lt;&lt; GetLastError() &lt;&lt; endl;\n    }\n\n    // Ready to continue?\n    string cont = \"\";\n    cout &lt;&lt; \"Continue? [Y|n]: \";\n    getline(cin, cont);\n    if (cont.find(\"n\") != string::npos || cont.find(\"N\") != string::npos) {\n        CloseHandle(h_lsass);\n        return 0;\n    }\n\n    void* buf = malloc(size_of_ntdsa);\n    if (!buf) {\n        cout &lt;&lt; \"Failed to allocate space for memory contents: \" &lt;&lt; GetLastError() &lt;&lt; endl;\n        CloseHandle(h_lsass);\n        return -1;\n    }\n\n    SIZE_T num_bytes_read = 0;\n    int count = 0;\n\n    if (ReadProcessMemory(h_lsass, &amp;start_addr, buf, size_of_ntdsa, &amp;num_bytes_read) != 0) {\n        cout &lt;&lt; \"Read success. Got \" &lt;&lt; num_bytes_read &lt;&lt; \" bytes: \" &lt;&lt; endl;\n    } else {\n        int error_code = GetLastError();\n        if (error_code == 299) {\n            cout &lt;&lt; \"Partial read. Got \" &lt;&lt; num_bytes_read &lt;&lt; \" bytes: \" &lt;&lt; endl;\n        } else  {\n            cout &lt;&lt; \"Failed to read memory: \" &lt;&lt; GetLastError() &lt;&lt; endl;\n            CloseHandle(h_lsass);\n            free(buf);\n            return -1;\n        }\n    }\n\n    if (num_bytes_read &gt; 0) {\n        FILE *fp;\n        fopen_s(&amp;fp, \"C:\\\\ntdsa_new.dll\", \"w\");\n        SIZE_T bytes_written = 0;\n        while (bytes_written &lt; num_bytes_read) {\n            bytes_written += fwrite(buf, 1, num_bytes_read, fp);\n        }\n        fclose(fp);\n        cout &lt;&lt; \"Wrote \" &lt;&lt; bytes_written &lt;&lt; \" bytes.\" &lt;&lt; endl;\n    }\n\n    CloseHandle(h_lsass);\n    free(buf);\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "multithreading", "qt"], "comments": [{"owner": {"reputation": 2506, "user_id": 3528438, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/27f8b3bc74bea842104821678137cdb2?s=128&d=identicon&r=PG&f=1", "display_name": "user3528438", "link": "https://stackoverflow.com/users/3528438/user3528438"}, "edited": false, "score": 0, "creation_date": 1458771295, "post_id": 36188432, "comment_id": 60014528, "body": "which version of qt?"}], "answers": [{"tags": [], "owner": {"reputation": 1293, "user_id": 6093326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89f3b47138d4c533e1faddc46ed9cac8?s=128&d=identicon&r=PG&f=1", "display_name": "Gwen", "link": "https://stackoverflow.com/users/6093326/gwen"}, "is_accepted": false, "score": 0, "last_activity_date": 1458776785, "creation_date": 1458776785, "answer_id": 36190848, "question_id": 36188432, "link": "https://stackoverflow.com/questions/36188432/qtconcurrent-with-member-function-and-thread-pool/36190848#36190848", "title": "QtConcurrent with member function and thread pool", "body": "<p>AFAIK, <code>QThreadPool</code> and <code>QtConcurrent</code> can't be mixed together</p>\n\n<p>If you want to use a <code>QThreadPool</code>, you'll need to define an instance of <code>QRunnable</code>, which can call your function <code>MyClass::doSomething</code> in its <code>run()</code> function.</p>\n\n<pre><code>/* code not tested */\nclass RunnableHelper: public QObject, public QRunnable\n{\n    Q_OBJECT\n\n    /* param1, param2 storage */\n\npublic:\n    explicit RunnableHelper(param1, param2);\n\n    void run()\n    {\n        MyClass::doSomething(param1, param2);\n    }\n};\n\nRunnableHelper* rh= new RunnableHelper(param1, param2);\nQThreadPool::globalInstance()-&gt;start(rh);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 2257682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0983e8fa580ca7492ff62b460688c5?s=128&d=identicon&r=PG", "display_name": "abygm", "link": "https://stackoverflow.com/users/2257682/abygm"}, "is_accepted": false, "score": 0, "last_activity_date": 1545837787, "creation_date": 1545837787, "answer_id": 53933927, "question_id": 36188432, "link": "https://stackoverflow.com/questions/36188432/qtconcurrent-with-member-function-and-thread-pool/53933927#53933927", "title": "QtConcurrent with member function and thread pool", "body": "<p>Bit late to the party; still..</p>\n\n<p>It is possible. What I did is,</p>\n\n<pre><code>QThreadPool *pool;\npool = new QThreadPool() ;\n.\n.\nQFuture&lt;MyObject&gt; future = QtConcurrent::run(pool, ...);\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 1051934, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/483df04ce93f65fdf4f716354e836d4e?s=128&d=identicon&r=PG", "display_name": "user1051934", "link": "https://stackoverflow.com/users/1051934/user1051934"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1057, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1545837787, "creation_date": 1458766209, "question_id": 36188432, "link": "https://stackoverflow.com/questions/36188432/qtconcurrent-with-member-function-and-thread-pool", "title": "QtConcurrent with member function and thread pool", "body": "<p>I can run a member function in a separate thread using QtConcurrent::run. I use the following code:</p>\n\n<pre><code>QFuture&lt;MyObject&gt; future = QtConcurrent::run(this, &amp;MyClass::doSomething, param1, param2);\n</code></pre>\n\n<p>Now I want to use a custom QThreadPool instead of the global one, as the number of threads for this task should be configurable. According to the documentation, I tried the following code, but unfortunately it can't find a fitting overload.</p>\n\n<pre><code>QThreadPool pool;\nQFuture&lt;MyObject&gt; future = QtConcurrent::run(&amp;pool, this, &amp;MyClass::doSomething, param1, param2);\n</code></pre>\n\n<p>Is this supported?</p>\n"}, {"tags": ["c++", "graphics", "vulkan"], "answers": [{"comments": [{"owner": {"reputation": 1150, "user_id": 4304439, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-jHPT3g8LI-E/AAAAAAAAAAI/AAAAAAAABMc/-0RJRebP8tg/photo.jpg?sz=128", "display_name": "Alex Byrth", "link": "https://stackoverflow.com/users/4304439/alex-byrth"}, "edited": false, "score": 1, "creation_date": 1466429205, "post_id": 36188419, "comment_id": 63297867, "body": "There is no VK_PROTOTYPES, but VK_NO_PROTOTYPES, with opposite effect. In another words, to solve this issue you only need VK_USE_PLATFORM_WIN32_KHR"}, {"owner": {"reputation": 372, "user_id": 4652567, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58d20d42d9cfa7a725d3c6ba94bcaedf?s=128&d=identicon&r=PG", "display_name": "Aaron Hull", "link": "https://stackoverflow.com/users/4652567/aaron-hull"}, "edited": false, "score": 1, "creation_date": 1566974152, "post_id": 36188419, "comment_id": 101817864, "body": "In my case, in order to simply expose <code>VK_KHR_WIN32_SURFACE_EXTENSION_NAME</code>, all I needed was to add the <code>VK_USE_PLATFORM_WIN32_KHR</code> preprocessor define. Great answer, great followup!"}], "tags": [], "owner": {"reputation": 1454, "user_id": 1683902, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2d00f9a657d663d31fde89af0b2e6851?s=128&d=identicon&r=PG", "display_name": "Ian Young", "link": "https://stackoverflow.com/users/1683902/ian-young"}, "is_accepted": false, "score": 13, "last_activity_date": 1458766139, "creation_date": 1458766139, "answer_id": 36188419, "question_id": 36188202, "link": "https://stackoverflow.com/questions/36188202/vk-khr-win32-surface-extension-name-undefined-in-vulkan-code/36188419#36188419", "title": "VK_KHR_WIN32_SURFACE_EXTENSION_NAME undefined, in Vulkan code", "body": "<p>As it turns out, I was missing some preprocessor directives in the project settings:</p>\n\n<pre><code>VK_PROTOTYPES\nVK_USE_PLATFORM_WIN32_KHR\n</code></pre>\n\n<p>I hope this info helps out anyone who has the same problem.</p>\n"}], "owner": {"reputation": 1454, "user_id": 1683902, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/2d00f9a657d663d31fde89af0b2e6851?s=128&d=identicon&r=PG", "display_name": "Ian Young", "link": "https://stackoverflow.com/users/1683902/ian-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4866, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1458927399, "creation_date": 1458765334, "last_edit_date": 1458765952, "question_id": 36188202, "link": "https://stackoverflow.com/questions/36188202/vk-khr-win32-surface-extension-name-undefined-in-vulkan-code", "title": "VK_KHR_WIN32_SURFACE_EXTENSION_NAME undefined, in Vulkan code", "body": "<p>I'm attempting to write a simple vulkan based application, but when trying to add the surface extension to the list of enabled extensions, like so:</p>\n\n<pre><code>    enabledExtensions.push_back( VK_KHR_SURFACE_EXTENSION_NAME );\n#if defined (_WIN32)\n    enabledExtensions.push_back( VK_KHR_WIN32_SURFACE_EXTENSION_NAME );\n#else\n    enabledExtensions.push_back( VK_KHR_XCB_SURFACE_EXTENSION_NAME );\n#endif\n</code></pre>\n\n<p>Visual studio complains that <code>VK_KHR_WIN32_SURFACE_EXTENSION_NAME</code>is undefined.</p>\n\n<p>When I right click it and go to definition, it opens vulkan.h. Upon inspection of <code>VK_USE_PLATFORM_WIN32_KHR</code> I find this to be also undefined, which prevents the definition of <code>VK_KHR_WIN32_SURFACE_EXTENSION_NAME</code>. Could someone explain how to fix this?</p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 356, "user_id": 3174581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qp6Jo.jpg?s=128&g=1", "display_name": "rhodysurf", "link": "https://stackoverflow.com/users/3174581/rhodysurf"}, "edited": false, "score": 0, "creation_date": 1458765425, "post_id": 36188193, "comment_id": 60011718, "body": "What happens if you directly set a string instead of using the query data? like <code>setOrderID(&quot;hello&quot;)</code>"}, {"owner": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "reply_to_user": {"reputation": 356, "user_id": 3174581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qp6Jo.jpg?s=128&g=1", "display_name": "rhodysurf", "link": "https://stackoverflow.com/users/3174581/rhodysurf"}, "edited": false, "score": 0, "creation_date": 1458765613, "post_id": 36188193, "comment_id": 60011827, "body": "@rhodysurf crash. Even orderNum = &quot;hello&quot; causes a crash.  I&#39;ve run clean and rebuild as well, still no dice."}, {"owner": {"reputation": 356, "user_id": 3174581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qp6Jo.jpg?s=128&g=1", "display_name": "rhodysurf", "link": "https://stackoverflow.com/users/3174581/rhodysurf"}, "edited": false, "score": 0, "creation_date": 1458765760, "post_id": 36188193, "comment_id": 60011893, "body": "IDK if this will matter but have you tried making your widget a <code>Q_OBJECT</code> by placing <code>Q_OBJECT</code> at the very top of the class declaration?"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1458765855, "post_id": 36188193, "comment_id": 60011929, "body": "Are you mixing compilers here? Make sure that Qt was built with the same compiler and version that you are using for your application."}, {"owner": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "reply_to_user": {"reputation": 356, "user_id": 3174581, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qp6Jo.jpg?s=128&g=1", "display_name": "rhodysurf", "link": "https://stackoverflow.com/users/3174581/rhodysurf"}, "edited": false, "score": 0, "creation_date": 1458765879, "post_id": 36188193, "comment_id": 60011942, "body": "@rhodysurf Yes, it&#39;s actually there I just left it out in the post to simplify the code.  It shouldn&#39;t matter since I&#39;m not using any signals/slots, but I do it as a default."}, {"owner": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1458765918, "post_id": 36188193, "comment_id": 60011955, "body": "@drescherjm No mixing, the program works fine as long as I don&#39;t try to assign on of those three damn variables."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1458765974, "post_id": 36188193, "comment_id": 60011979, "body": "Perhaps <code>appInfo</code> is an invalid pointer. I assume it is dynamically allocated somewhere else in your program."}, {"owner": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1458766056, "post_id": 36188193, "comment_id": 60012026, "body": "@drescherjm It isn&#39;t, I use it to great effect in other classes, and I also use it in this one to get the orderID for the SQL query (which runs fine, I have confirmed that it returns valid data)"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1458766174, "post_id": 36188193, "comment_id": 60012102, "body": "You will probably have to debug some more. I do not believe you will find the answer from any other method."}, {"owner": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1458766284, "post_id": 36188193, "comment_id": 60012153, "body": "@drescherjm any ideas on what I might try? I&#39;ve spent the past couple hours debugging and I&#39;m running out of ideas."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 2, "creation_date": 1458766489, "post_id": 36188193, "comment_id": 60012297, "body": "I do not believe the bug is in the code you posted. It is somewhere else in your code. You have corrupted the heap or one of your pointers causing this code to crash."}, {"owner": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1458767239, "post_id": 36188193, "comment_id": 60012675, "body": "@drescherjm Okay, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 4394477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/298b371716259c85e2a970df8fe5007b?s=128&d=identicon&r=PG&f=1", "display_name": "Amr Jer", "link": "https://stackoverflow.com/users/4394477/amr-jer"}, "is_accepted": false, "score": 0, "last_activity_date": 1458799900, "last_edit_date": 1458799900, "creation_date": 1458799507, "answer_id": 36194164, "question_id": 36188193, "link": "https://stackoverflow.com/questions/36188193/crash-on-qstring-assignment/36194164#36194164", "title": "Crash on QString assignment", "body": "<p>try to assign the query values to QString like this :</p>\n\n<pre><code>QString str=query.value(0).toString();\n\n setOrderID(str);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "is_accepted": true, "score": 0, "last_activity_date": 1458918456, "creation_date": 1458918456, "answer_id": 36222528, "question_id": 36188193, "link": "https://stackoverflow.com/questions/36188193/crash-on-qstring-assignment/36222528#36222528", "title": "Crash on QString assignment", "body": "<p>As predicted, it was something obvious that I was missing.  I had created an instance of <code>AutochargeData</code> in the <code>Mainwindow</code> class, but was trying to use it in a different class without creating another instance of it.  So it was invalid, as was guessed in the comments.</p>\n"}], "owner": {"reputation": 141, "user_id": 5626372, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98d1e2bd5dc679194a0f9efcae6d641c?s=128&d=identicon&r=PG&f=1", "display_name": "ce_nort", "link": "https://stackoverflow.com/users/5626372/ce-nort"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1157, "favorite_count": 0, "accepted_answer_id": 36222528, "answer_count": 2, "score": 0, "last_activity_date": 1458918456, "creation_date": 1458765289, "last_edit_date": 1458765745, "question_id": 36188193, "link": "https://stackoverflow.com/questions/36188193/crash-on-qstring-assignment", "title": "Crash on QString assignment", "body": "<p>I'm pretty new to Qt and C++ so I'm probably missing something obvious, but for the life of me I can't figure out what is going wrong.  One of the classes in a program I wrote is causing a crash whenever I try to do a basic string assignment.  See below (slightly pared down).</p>\n\n<pre><code>class AutochargeData : public QWidget\n{\n\npublic:\n    AutochargeData(appData *appInfo, QWidget *parent = 0);\n\n    QString orderNum;\n    QString paymentMethod;\n    QString total;\n\n    void setPayment(QString payment);\n    void setOrderID(QString orderID);\n    void setTotal(QString total);\n\n    void getPaymentData(QString orderID);\n\nprivate:\n    appData *appInfo;\n\n};\n</code></pre>\n\n<p>So in the below code, I have tried many variations. I know the query is fine because I've used qDebug() to check the output.  I have tried skipping the set functions and doing a direct assignment, I have tried using the \"this\" keyword, and I have even tried just assigning a random string directly to the variables.  </p>\n\n<pre><code>AutochargeData::AutochargeData(appData *appInfo, QWidget *parent) :\n    QWidget(parent)\n{\n    this-&gt;appInfo = appInfo;\n}\n\nvoid AutochargeData::getPaymentData(QString orderID)\n{    \n    QString queryString = \"SELECT order_payment.method, order.increment_id, order.grand_total FROM order JOIN order_payment ON sales_flat_order.entity_id = order_payment.parent_id WHERE order.increment_id = '\" + orderID + \"';\";\n\n    QSqlQuery query(queryString, QSqlDatabase::database(\"db\"));\n    query.exec();\n\n    while (query.next()) {\n        setOrderID(query.value(\"increment_id\").toString());\n        setPayment(query.value(\"method\").toString());\n        setTotal(query.value(\"grand_total\").toString());\n    }\n}\n\nvoid AutochargeData::setPayment(QString payment)\n{\n    paymentMethod = payment;\n}\n\nvoid AutochargeData::setOrderID(QString orderID)\n{\n    orderNum = orderID;\n}\n\nvoid AutochargeData::setTotal(QString grandTotal)\n{\n    total = grandTotal;\n}\n</code></pre>\n\n<p>Any time I tried to assign a string to the <code>orderNum</code>, <code>paymentMethod</code>, or <code>total</code> variables, the program crashes.  The debugger is ending on <code>QString::operator=(const char*)</code> in the <code>qstring.h</code> file.  As I mentioned, I am relatively new at this so it may be something obvious that I am missing.  But after multiple hours of googling and trying different variations, I am stumped.  Any thoughts would be much appreciated, and please let me know if there's more information that would be helpful.</p>\n"}, {"tags": ["c++", "hash", "string-hashing"], "comments": [{"owner": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1458768824, "post_id": 36188189, "comment_id": 60013419, "body": "Yeah, hashes tend to look like uniformly random data distributed over all bits in the hash output value.  So a 32-bit hash will likely have a value close to 2 to the power of 32 when placed in an unsigned 32 bit int.  So you are right, you should use a mod operatoion % or &amp; (for speed, restricted to powers of 2) to match your table size."}, {"owner": {"reputation": 33, "user_id": 6055592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de567a75765017397c09a09583b59823?s=128&d=identicon&r=PG&f=1", "display_name": "Iriketurtles", "link": "https://stackoverflow.com/users/6055592/iriketurtles"}, "reply_to_user": {"reputation": 2689, "user_id": 1687639, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5a6dd18900e2bfd6dffec21ee358f31?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Oicles", "link": "https://stackoverflow.com/users/1687639/christopher-oicles"}, "edited": false, "score": 0, "creation_date": 1458781717, "post_id": 36188189, "comment_id": 60017835, "body": "@ChristopherOicles thank you, just wanted to make sure because it wasn&#39;t included in the code."}], "owner": {"reputation": 33, "user_id": 6055592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de567a75765017397c09a09583b59823?s=128&d=identicon&r=PG&f=1", "display_name": "Iriketurtles", "link": "https://stackoverflow.com/users/6055592/iriketurtles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 279, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458765271, "creation_date": 1458765271, "question_id": 36188189, "link": "https://stackoverflow.com/questions/36188189/am-i-using-murmurhash2-correctly", "title": "Am I using MurmurHash2 correctly?", "body": "<p>So i'm writing a hashing program for one of my classes and he's letting us find a hashing function online. However when I use the following hashing function I get huge numbers. My question is, do I have to mod the answer I get from this function with the size of my table or am I doing something wrong? </p>\n\n<pre><code>  uint32_t MurmurHash2(const void * key, int len, uint32_t seed)\n{\n    // 'm' and 'r' are mixing constants generated offline.\n    // They're not really 'magic', they just happen to work well.\n\n    const uint32_t m = 0x5bd1e995;\n    const int r = 24;\n\n    // Initialize the hash to a 'random' value\n\n    uint32_t h = seed ^ len;\n\n    // Mix 4 bytes at a time into the hash\n\n    const unsigned char * data = (const unsigned char *)key;\n\n    while (len &gt;= 4)\n    {\n        uint32_t k = *(uint32_t*)data;\n\n        k *= m;\n        k ^= k &gt;&gt; r;\n        k *= m;\n\n        h *= m;\n        h ^= k;\n\n        data += 4;\n        len -= 4;\n    }\n\n    // Handle the last few bytes of the input array\n\n    switch (len)\n    {\n    case 3: h ^= data[2] &lt;&lt; 16;\n    case 2: h ^= data[1] &lt;&lt; 8;\n    case 1: h ^= data[0];\n        h *= m;\n    };\n\n    // Do a few final mixes of the hash to ensure the last few\n    // bytes are well-incorporated.\n\n    h ^= h &gt;&gt; 13;\n    h *= m;\n    h ^= h &gt;&gt; 15;\n\n    return h;\n}\n</code></pre>\n"}, {"tags": ["c++", "linux", "macos", "boost"], "comments": [{"owner": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1458814206, "post_id": 36188149, "comment_id": 60028601, "body": "<code>Why aren&#39;t the files compatible between these platforms?</code>  Please share some examples, we can not guess. Typical reasons include endianess, or different locale if you are using the standard streams."}, {"owner": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "reply_to_user": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1458833753, "post_id": 36188149, "comment_id": 60041493, "body": "You can find the file written on Linux at <a href=\"http://so.con.com/MyMappedFile.linux\" rel=\"nofollow noreferrer\">so.con.com/MyMappedFile.linux</a> and the one written on OSX at <a href=\"http://so.con.com/MyMappedFile.osx\" rel=\"nofollow noreferrer\">so.con.com/MyMappedFile.osx</a>"}, {"owner": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "reply_to_user": {"reputation": 10317, "user_id": 666785, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/NIzSh.jpg?s=128&g=1", "display_name": "sbabbi", "link": "https://stackoverflow.com/users/666785/sbabbi"}, "edited": false, "score": 0, "creation_date": 1458833964, "post_id": 36188149, "comment_id": 60041622, "body": "Both Linux and OSX are little-endian, and it doesn&#39;t appear from a quick scan of the files that endianness is an issue. Please note that the code above is the totality of what&#39;s involved, so if standard streams are being used it&#39;s done by Boost, not my code. But I would expect Boost to be using <code>mmap()</code> and not streams."}], "answers": [{"comments": [{"owner": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "edited": false, "score": 0, "creation_date": 1458770416, "post_id": 36189376, "comment_id": 60014159, "body": "How specifically does this cause Boost to write different output on different platforms?"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "edited": false, "score": 0, "creation_date": 1458770708, "post_id": 36189376, "comment_id": 60014271, "body": "Not sure I follow... as your code throws a <code>std:exception</code> instead when trying to execute it on a platform it wasn&#39;t compiled for."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "edited": false, "score": 0, "creation_date": 1458771064, "post_id": 36189376, "comment_id": 60014425, "body": "When did I say anything about output being different?"}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "edited": false, "score": 0, "creation_date": 1458771196, "post_id": 36189376, "comment_id": 60014480, "body": "I referring specifically to the errors, nothing else, nothing more. Your question was: &quot;Why aren&#39;t the files compatible between these platforms?&quot; Which i assumed meant the executables..."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "edited": false, "score": 0, "creation_date": 1458771431, "post_id": 36189376, "comment_id": 60014588, "body": "And unfortunately I don&#39;t have time to &quot;chat&quot; right now."}, {"owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "reply_to_user": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "edited": false, "score": 0, "creation_date": 1458771774, "post_id": 36189376, "comment_id": 60014726, "body": "You say you&#39;re trying to execute an ELF compiled binary on OS X and vice versa, do you seriously expect that to work? good luck with that."}, {"owner": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "reply_to_user": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "edited": false, "score": 1, "creation_date": 1458771881, "post_id": 36189376, "comment_id": 60014764, "body": "@DougLuce what makes you say ABI is not it. Because that&#39;s 100% it. Use portable serialization if you need it."}, {"owner": {"reputation": 2352, "user_id": 5711725, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cfaab398800db4fd0e9b0aae6621bda?s=128&d=identicon&r=PG&f=1", "display_name": "Javier Mart&#237;n", "link": "https://stackoverflow.com/users/5711725/javier-mart%c3%adn"}, "reply_to_user": {"reputation": 326119, "user_id": 85371, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6d52c235ec6dd15f30bab444103e7af2?s=128&d=identicon&r=PG", "display_name": "sehe", "link": "https://stackoverflow.com/users/85371/sehe"}, "edited": false, "score": 1, "creation_date": 1458772640, "post_id": 36189376, "comment_id": 60015065, "body": "As I understand OP&#39;s question, he is trying to open the file written to in Linux in OSX, not run the executable for one platform on the other. However, it might still be a question of ABI if the boost inter process classes use OS-specific facilities, so as @sehe said you should use serialisation instead of IPC."}, {"owner": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "edited": false, "score": 0, "creation_date": 1458775990, "post_id": 36189376, "comment_id": 60016282, "body": "Sorry, I guess it wasn&#39;t clear -- the file is <code>MyMappedFile</code> as produced by <code>managed_mapped_file</code>. I am not transferring executables. The write code will produce <code>MyMappedFile</code>, and the read code will read it."}], "tags": [], "owner": {"reputation": 40086, "user_id": 499581, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1ba2cebc4582467916f2ddd6128447f4?s=128&d=identicon&r=PG", "display_name": "l&#39;L&#39;l", "link": "https://stackoverflow.com/users/499581/lll"}, "is_accepted": false, "score": 0, "last_activity_date": 1458772222, "last_edit_date": 1458772222, "creation_date": 1458769910, "answer_id": 36189376, "question_id": 36188149, "link": "https://stackoverflow.com/questions/36188149/boost-managed-mapped-files-not-compatible-between-osx-and-linux/36189376#36189376", "title": "Boost managed mapped files: not compatible between OSX and Linux?", "body": "<p><strong>RE: Why aren't the files compatible between these platforms?</strong></p>\n\n<p>OS X and Linux utilize different <a href=\"https://en.wikipedia.org/wiki/Kernel_%28operating_system%29\" rel=\"nofollow\">kernels</a> and <a href=\"https://en.wikipedia.org/wiki/Application_binary_interface\" rel=\"nofollow\">ABI</a>'s, so they compile code in differently. Linux generally uses <strong><a href=\"https://en.wikipedia.org/wiki/Executable_and_Linkable_Format\" rel=\"nofollow\"><code>ELF</code></a></strong> file formats, while OS X uses <strong><a href=\"https://en.wikipedia.org/wiki/Mach-O\" rel=\"nofollow\"><code>Mach-O</code></a></strong>, which are platform specific.</p>\n\n<p><strong>EDIT</strong>: No idea why your output is different (it was not shared).</p>\n"}], "owner": {"reputation": 6354, "user_id": 4258430, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7a2d5075177b2ff473c38f6d8fb64894?s=128&d=identicon&r=PG", "display_name": "Allen Luce", "link": "https://stackoverflow.com/users/4258430/allen-luce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458776697, "creation_date": 1458765116, "last_edit_date": 1458776697, "question_id": 36188149, "link": "https://stackoverflow.com/questions/36188149/boost-managed-mapped-files-not-compatible-between-osx-and-linux", "title": "Boost managed mapped files: not compatible between OSX and Linux?", "body": "<p>The code below creates and reads a file called <code>MyMappedFile</code>.  If I run the write code on Linux (Ubuntu 14.04), I can copy this file to other Linux machines and it reads fine. If I instead transfer it to OSX and attempt to run the read code on it, I get an error:</p>\n\n<pre><code>libc++abi.dylib: terminating with uncaught exception of type boost::interprocess::lock_exception: boost::interprocess::lock_exception\n</code></pre>\n\n<p>Conversely, files written on OSX are able to be read on OSX. But attempting to read them under Linux gives me a similar message:</p>\n\n<pre><code>terminate called after throwing an instance of 'boost::interprocess::lock_exception'\n  what():  boost::interprocess::lock_exception\n</code></pre>\n\n<p>The resulting files are different.</p>\n\n<p>I'm writing with this code:</p>\n\n<pre><code>#include &lt;boost/interprocess/managed_mapped_file.hpp&gt;\n#include &lt;boost/interprocess/managed_shared_memory.hpp&gt;\n#include &lt;boost/interprocess/containers/string.hpp&gt;\n\nnamespace bip=boost::interprocess;\n\ntypedef bip::managed_shared_memory::segment_manager segment_manager_t;\ntypedef bip::basic_string&lt;char, std::char_traits&lt;char&gt;, bip::allocator&lt;char, segment_manager_t&gt; &gt; shared_string;\n\nint main() {\n  bip::managed_mapped_file *outfile = new bip::managed_mapped_file(bip::create_only, \"MyMappedFile\", 1000);\n  outfile-&gt;find_or_construct&lt;shared_string&gt;(\"mystring\")(\"bubza\", outfile-&gt;get_segment_manager());\n  outfile-&gt;flush();\n}\n</code></pre>\n\n<p>And reading with this:</p>\n\n<pre><code>#include &lt;boost/interprocess/managed_mapped_file.hpp&gt;\n#include &lt;boost/interprocess/managed_shared_memory.hpp&gt;\n#include &lt;boost/interprocess/containers/string.hpp&gt;\n\nnamespace bip=boost::interprocess;\n\ntypedef bip::managed_shared_memory::segment_manager segment_manager_t;\ntypedef bip::basic_string&lt;char, std::char_traits&lt;char&gt;, bip::allocator&lt;char, segment_manager_t&gt; &gt; shared_string;\n\nint main() {\n  bip::managed_mapped_file *infile = new bip::managed_mapped_file(bip::open_only, \"MyMappedFile\");\n  shared_string *ptr = infile-&gt;find_or_construct&lt;shared_string&gt;(\"mystring\")(infile-&gt;get_segment_manager());\n  std::cout &lt;&lt; \"I got \" &lt;&lt; *ptr &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>Both machines are using GCC 4.8 (4.8.4 on Linux, 4.8.5 on OSX) and Boost 1.55.</p>\n\n<p>Why aren't the files compatible between these platforms? </p>\n\n<p>Please note that I'm talking about the <code>MyMappedFile</code> data file produced by the writing code. The executables produced by compiling the code are not being transferred between machines: the Linux code is compiled on a Linux machine, and the OSX code is compiled on the OSX machine.</p>\n"}, {"tags": ["c++", "serial-port", "boost-asio"], "comments": [{"owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 1, "creation_date": 1458765930, "post_id": 36188124, "comment_id": 60011961, "body": "What happens if you try <code>*serial_port</code> instead of <code>serial_port.get()</code>?"}, {"owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "reply_to_user": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "edited": false, "score": 0, "creation_date": 1458766104, "post_id": 36188124, "comment_id": 60012053, "body": "@Xirema that worked!  brilliant!  Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 18522, "user_id": 5241642, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/TadbK.png?s=128&g=1", "display_name": "Xirema", "link": "https://stackoverflow.com/users/5241642/xirema"}, "is_accepted": true, "score": 1, "last_activity_date": 1458766430, "creation_date": 1458766430, "answer_id": 36188481, "question_id": 36188124, "link": "https://stackoverflow.com/questions/36188124/basic-serial-port-and-async-read-until/36188481#36188481", "title": "basic_serial_port and async_read_until", "body": "<p>You've provided a pointer as the input to <code>boost::asio::async_read_until</code> instead of a reference. It should be rewritten like so:</p>\n\n<pre><code>boost::asio::async_read_until(\n  *serial_port, response_data, delimiter,\n  boost::bind(\n    &amp;serial_comm::data_received,\n      this, boost::asio::placeholders::error,\n      boost::asio::placeholders::bytes_transferred\n  )\n);\n</code></pre>\n"}], "owner": {"reputation": 1785, "user_id": 4056146, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yYokT.jpg?s=128&g=1", "display_name": "xinthose", "link": "https://stackoverflow.com/users/4056146/xinthose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "accepted_answer_id": 36188481, "answer_count": 1, "score": 0, "last_activity_date": 1458766430, "creation_date": 1458765036, "last_edit_date": 1458765779, "question_id": 36188124, "link": "https://stackoverflow.com/questions/36188124/basic-serial-port-and-async-read-until", "title": "basic_serial_port and async_read_until", "body": "<p>I'm trying to use a <code>boost::shared_ptr</code> with <code>async_read_until</code> and cannot get it to work.  This is my simplified code:</p>\n\n<p>header</p>\n\n<pre><code>boost::asio::io_service io_service;\ntypedef boost::shared_ptr&lt;boost::asio::serial_port&gt; serial_port_ptr;\nserial_port_ptr serial_port;\nboost::asio::streambuf response_data;\nchar delimiter = '\\n';\nboost::system::error_code error;\n</code></pre>\n\n<p>connect</p>\n\n<pre><code>serial_port = serial_port_ptr(new boost::asio::serial_port(io_service));\nserial_port-&gt;open(\"/dev/ttyS0\", error);\n</code></pre>\n\n<p>read</p>\n\n<pre><code>boost::asio::async_read_until(\n  serial_port.get(), response_data, delimiter,\n  boost::bind(\n    &amp;serial_comm::data_received,\n      this, boost::asio::placeholders::error,\n      boost::asio::placeholders::bytes_transferred\n  )\n);\n</code></pre>\n\n<p>The error I get is <code>no type named 'type' in 'struct std::enable_if&lt;false, void&gt;'</code>.  Thank you.  </p>\n"}, {"tags": ["c++", "boost", "linker", "cmake"], "comments": [{"owner": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1458764545, "post_id": 36187920, "comment_id": 60011189, "body": "What architecture is your program set to build for? x86 or x64?"}, {"owner": {"reputation": 1150, "user_id": 4872413, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/428bfe49a7ab1d0e8c95c95c5999b50b?s=128&d=identicon&r=PG&f=1", "display_name": "devopsfun", "link": "https://stackoverflow.com/users/4872413/devopsfun"}, "reply_to_user": {"reputation": 3725, "user_id": 2209008, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/MceJL.jpg?s=128&g=1", "display_name": "Colin Basnett", "link": "https://stackoverflow.com/users/2209008/colin-basnett"}, "edited": false, "score": 0, "creation_date": 1458765204, "post_id": 36187920, "comment_id": 60011579, "body": "@ColinBasnett: I edited the question. You can see, that the build is set for x64."}, {"owner": {"reputation": 94, "user_id": 5770705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ac3bacd19b4ef1353a26a2fb8d7fca3?s=128&d=identicon&r=PG&f=1", "display_name": "ViNi89", "link": "https://stackoverflow.com/users/5770705/vini89"}, "edited": false, "score": 0, "creation_date": 1458765239, "post_id": 36187920, "comment_id": 60011599, "body": "Make sure the correct Visual Studio toolchain is set in your PATH during compilation of both the boost libraries and your program. This means that you should run all your commands from the x64 VS Command Line if you are targeting x64."}], "answers": [{"tags": [], "owner": {"reputation": 49065, "user_id": 13422, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94b309d78a1253a334e9b82643a8dc97?s=128&d=identicon&r=PG", "display_name": "Zan Lynx", "link": "https://stackoverflow.com/users/13422/zan-lynx"}, "is_accepted": false, "score": 0, "last_activity_date": 1458765306, "creation_date": 1458765306, "answer_id": 36188199, "question_id": 36187920, "link": "https://stackoverflow.com/questions/36187920/problems-when-linking-with-boost-1-60/36188199#36188199", "title": "Problems when linking with boost 1.60", "body": "<p>From the message, you are certainly trying to link a 32 bit thing to a 64 bit thing. No question about it.</p>\n\n<p>So, something is not what it seems to be.</p>\n\n<p>Try getting the command line that is being run and running it yourself in a command prompt. Check all the paths and environment variables.</p>\n"}], "owner": {"reputation": 1150, "user_id": 4872413, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/428bfe49a7ab1d0e8c95c95c5999b50b?s=128&d=identicon&r=PG&f=1", "display_name": "devopsfun", "link": "https://stackoverflow.com/users/4872413/devopsfun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458765306, "creation_date": 1458764249, "last_edit_date": 1458764982, "question_id": 36187920, "link": "https://stackoverflow.com/questions/36187920/problems-when-linking-with-boost-1-60", "title": "Problems when linking with boost 1.60", "body": "<p>I have a project using boost 1.60. Currently, the build of this project fails with the following message:</p>\n\n<pre><code>libboost_thread-vc140-mt-1_60.lib(thread.obj) : fatal error LNK1112: module machine type 'X86' conflicts with target machine type 'x64'\n</code></pre>\n\n<p>This should be easy to solve, but it's a strange message. So I verified that the boost libraries were really <code>x64</code> with <code>dumpbin</code>. Specially, I checked  <code>libboost_thread-vc140-mt-1_60.lib</code> and got the result, <code>8664 machine (x64)</code>.</p>\n\n<p>My next assumption was that <code>CMake</code> was doing something wrong. Dumping out some variables yielded the following:</p>\n\n<pre><code>-- BOOST_ROOT: D:\\path\\to\\project\\..\\ext/boost\n-- BOOST_LIBRARYDIR: D:\\path\\to\\project\\..\\ext/boost/lib64\n-- BOOST_INCLUDEDIR: D:\\path\\to\\project\\..\\ext/boost/include\n-- Boost version: 1.60.0\n</code></pre>\n\n<p>These are all valid paths. Also, this section of <code>CMakeLists.txt</code> seems to be valid:</p>\n\n<pre><code>if(WIN32)\n    # set boost needed boost library parameters\n    set(Boost_USE_MULTITHREADED ON)\n    set(Boost_USE_STATIC_LIBS ON)\n    set(BOOST_ROOT ${LIB_BOOST_ROOT_DIR})\n    set(BOOST_LIBRARYDIR ${LIB_BOOST_ROOT_DIR}/lib${LIB_SUFFIX})\n    set(BOOST_INCLUDEDIR ${LIB_BOOST_ROOT_DIR}/include)\n    message(\"-- Boost_USE_MULTITHREADED: ${Boost_USE_MULTITHREADED}\")\n    message(\"-- Boost_USE_STATIC_LIBS: ${Boost_USE_STATIC_LIBS}\")\n    message(\"-- BOOST_ROOT: ${BOOST_ROOT}\")\n    message(\"-- BOOST_LIBRARYDIR: ${BOOST_LIBRARYDIR}\")\n    message(\"-- BOOST_INCLUDEDIR: ${BOOST_INCLUDEDIR}\")\n    find_package(BOOST 1.60 REQUIRED COMPONENTS thread system chrono regex filesystem iostreams log)\nendif(WIN32)\n</code></pre>\n\n<p>So, what I am missing here?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>The build of the project is done with <code>ninja</code>. When I look at the <code>CMakeCache.txt</code>, I see this:</p>\n\n<pre><code>//Flags used by the linker.\nCMAKE_EXE_LINKER_FLAGS:STRING= /machine:x64\n</code></pre>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>And I looked into the build script. Before calling CMake, I start <code>vcvarsall.bat</code> with parameter <code>amd64</code>.</p>\n"}, {"tags": ["c++", "function-pointers"], "comments": [{"owner": {"reputation": 30540, "user_id": 719263, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7feab598abfc27783641fe2b796a0155?s=128&d=identicon&r=PG", "display_name": "Jean-Baptiste Yun&#232;s", "link": "https://stackoverflow.com/users/719263/jean-baptiste-yun%c3%a8s"}, "edited": false, "score": 0, "creation_date": 1458762529, "post_id": 36187397, "comment_id": 60010046, "body": "No difference both are usable..."}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1458762535, "post_id": 36187397, "comment_id": 60010048, "body": "There is no difference"}, {"owner": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1458762708, "post_id": 36187397, "comment_id": 60010143, "body": "&quot;assigning reference&quot;? What reference? There are no references in the code you posted."}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "reply_to_user": {"reputation": 290304, "user_id": 187690, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/89a4da7af5bf1558b7d2704309f1f118?s=128&d=identicon&r=PG", "display_name": "AnT", "link": "https://stackoverflow.com/users/187690/ant"}, "edited": false, "score": 0, "creation_date": 1458762952, "post_id": 36187397, "comment_id": 60010281, "body": "@AnT you&#39;re right, I need to edit the question"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1458763021, "post_id": 36187397, "comment_id": 60010321, "body": "Your terminology is a little confused. <code>T* a = &amp;b</code> is a pointer to <code>b</code>, not a reference. <code>T&amp; a = b</code> is a reference to <code>b</code>."}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "reply_to_user": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1458763275, "post_id": 36187397, "comment_id": 60010464, "body": "@JonathanPotter yes, you&#39;re right, I edited the question , thank you : )"}], "answers": [{"comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1458762687, "post_id": 36187437, "comment_id": 60010126, "body": "Indeed, the <code>&amp;</code> just takes the address of the function"}, {"owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "edited": false, "score": 0, "creation_date": 1458762846, "post_id": 36187437, "comment_id": 60010215, "body": "I see. Thank you so much. I will keep the variable name funcRef unchanged, so that other people cloud notice this :)"}, {"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 2, "creation_date": 1458762966, "post_id": 36187437, "comment_id": 60010288, "body": "Also, because of the peculiarities of function pointer decay, <code>(*funcPtr)(2)</code> is the same as <code>funcPtr(2)</code> which is also the same as <code>(*******funcPtr)(2)</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1458763525, "post_id": 36187437, "comment_id": 60010618, "body": "@vu1p3n0x, good and funny point."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1458763360, "last_edit_date": 1458763360, "creation_date": 1458762591, "answer_id": 36187437, "question_id": 36187397, "link": "https://stackoverflow.com/questions/36187397/when-assigning-a-function-pointer-what-is-the-difference-between-these-two-nota/36187437#36187437", "title": "when assigning a function pointer, what is the difference between these two notations?", "body": "<p>Formally <code>MyIntFunction</code> is a function type, and <code>&amp;MyIntFunction</code> is a pointer-to-function type. However, function type <em>decays</em> to the pointer-to-function type in almost all contexts, so there is no real difference between using <code>MyIntFunction</code> and <code>&amp;MyIntFunction</code> in this context.</p>\n\n<p>Please note, there is no <em>reference</em> anywhere in the posted code. Both <code>funcPtr</code> and <code>funcRef</code> are pointers-to-function.</p>\n"}], "owner": {"reputation": 106, "user_id": 1478835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1090a7b8bd9c0d2883635dd66e2a911a?s=128&d=identicon&r=PG", "display_name": "Curtis2", "link": "https://stackoverflow.com/users/1478835/curtis2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "closed_date": 1458763295, "answer_count": 1, "score": 0, "last_activity_date": 1458763360, "creation_date": 1458762431, "last_edit_date": 1458763056, "question_id": 36187397, "link": "https://stackoverflow.com/questions/36187397/when-assigning-a-function-pointer-what-is-the-difference-between-these-two-nota", "closed_reason": "Duplicate", "title": "when assigning a function pointer, what is the difference between these two notations?", "body": "<p>Consider following code which declares a function pointer, and points it to a function.</p>\n\n<pre><code>void MyIntFunction( int x ){\n    std::cout &lt;&lt; x &lt;&lt; '\\n';\n}\n\nvoid ( *funcPtr )( int ) = MyIntFunction;\nvoid ( *funcRef )( int ) = &amp;MyIntFunction;\n\n\n(*funcPtr)( 2 );\n(*funcRef)( 2 );\n</code></pre>\n\n<p>This code runs fine in my Xcode, and the question is, when assigning the function pointer, what is the difference between <code>MyIntFunction</code> and <code>&amp;MyIntFunction</code></p>\n"}, {"tags": ["c++", "friend"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1458761381, "post_id": 36187020, "comment_id": 60009477, "body": "Well, <code>Other</code> isn&#39;t a <code>friend</code> of <code>class B</code> hence the private <code>B::x</code> can&#39;t be accessed there."}, {"owner": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "edited": false, "score": 0, "creation_date": 1461009483, "post_id": 36187020, "comment_id": 60994113, "body": "If an answer worked for you, <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work\">mark it as accepted</a>. If no one did, add a comment asking for clarification or corrections (if needed)."}], "answers": [{"comments": [{"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1458761916, "post_id": 36187118, "comment_id": 60009761, "body": "Code-only answers aren&#39;t helpful. You should articulate <i>why</i> OP should try this. What does what you did work while what OP did errors?"}], "tags": [], "owner": {"reputation": 1437, "user_id": 4685116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdca5.jpg?s=128&g=1", "display_name": "Ing. Gerardo S&#225;nchez", "link": "https://stackoverflow.com/users/4685116/ing-gerardo-s%c3%a1nchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1458761484, "creation_date": 1458761484, "answer_id": 36187118, "question_id": 36187020, "link": "https://stackoverflow.com/questions/36187020/multiple-level-friendship/36187118#36187118", "title": "Multiple level friendship", "body": "<p>Try this:</p>\n\n<pre><code>class B{\nfriend class Other;\nint x;\nint y;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1026, "user_id": 5583153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116adeea4dcb2db23e70b696d4949184?s=128&d=identicon&r=PG&f=1", "display_name": "Nacho", "link": "https://stackoverflow.com/users/5583153/nacho"}, "is_accepted": false, "score": 2, "last_activity_date": 1458762126, "last_edit_date": 1458762126, "creation_date": 1458761566, "answer_id": 36187146, "question_id": 36187020, "link": "https://stackoverflow.com/questions/36187020/multiple-level-friendship/36187146#36187146", "title": "Multiple level friendship", "body": "<p>Although this is a weird use of <code>friend</code>s, I assume it is for learning purposes. That said, you should fix your <code>friends</code> definition like this:</p>\n\n<pre><code>class B{\n    friend class Other; // Because you access private member x from Other::foo()\n    int x;\n    int y;\n};\n\nclass A{\n    friend class Other; // Because you access private member b from Other::foo()\n    int a;\n    B* b;\npublic:\n    A(){ b = new B();}\n};\n\nstruct Other{\n    A a;\n    void foo(){\n      // Access A's private member b\n      // Access B's private member x\n      std::cout &lt;&lt; a.b-&gt;x; \n    }\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 2, "last_activity_date": 1458761745, "creation_date": 1458761745, "answer_id": 36187207, "question_id": 36187020, "link": "https://stackoverflow.com/questions/36187020/multiple-level-friendship/36187207#36187207", "title": "Multiple level friendship", "body": "<p>This line:</p>\n\n<pre><code>std::cout &lt;&lt; a.b-&gt;x;\n</code></pre>\n\n<p>involves accessing a private member of <code>A</code> (<code>b</code>) and a private member of <code>B</code> (<code>x</code>) within class <code>Other</code>. While <code>A</code> gave access privileges to <code>Other</code>, <code>B</code> did not, hence the error. If you want this to work, you'll need to add:</p>\n\n<pre><code>class B {\n    friend class Other;\n};\n</code></pre>\n\n<hr />\n\n<p>Side-note, this declaration is meaningless:</p>\n\n<pre><code>class A {\n    friend class A;\n};\n</code></pre>\n\n<p>A class already has access to its own private members. So calling it its own friend is redundant. </p>\n"}], "owner": {"reputation": 1471, "user_id": 3655463, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c567c095653589d1b50f37aeb72dbab1?s=128&d=identicon&r=PG&f=1", "display_name": "Mateusz Wojtczak", "link": "https://stackoverflow.com/users/3655463/mateusz-wojtczak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 36187207, "answer_count": 3, "score": 1, "last_activity_date": 1458762126, "creation_date": 1458761154, "last_edit_date": 1458761794, "question_id": 36187020, "link": "https://stackoverflow.com/questions/36187020/multiple-level-friendship", "title": "Multiple level friendship", "body": "<p>In code below:</p>\n\n<pre><code>class B {\n    int x;\n    int y;\n};\n\nclass A {\n    friend class Other;\n    friend class A;\n    int a;\n     B* b;\npublic:\n    A(){ b = new B();}\n};\n\nstruct Other {\n    A a;\n    void foo() {\n        std::cout &lt;&lt; a.b-&gt;x;  // error\n    }\n};\n\nint main() {\n    Other oth;\n    oth.foo();\n}\n</code></pre>\n\n<p>The indicated line fails with:</p>\n\n<pre><code>t.cpp:22:19: error: 'x' is a private member of 'B'\nstd::cout &lt;&lt; a.b-&gt;x;\n                  ^\nt.cpp:7:5: note: implicitly declared private here\nint x; \n</code></pre>\n\n<p>Why friendship is not working when referring from class member to other class member? </p>\n"}, {"tags": ["c++", "class", "pointers"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1458761235, "post_id": 36186895, "comment_id": 60009381, "body": "Dennis Ritchie added -&gt; so programmers wouldn&#39;t have to write that.  See <a href=\"http://en.cppreference.com/w/c/language/operator_precedence\" rel=\"nofollow noreferrer\">en.cppreference.com/w/c/language/operator_precedence</a>"}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458761236, "post_id": 36186895, "comment_id": 60009382, "body": "<code>this</code> is not a pointer, but can be used like a pointer mostly (try assignment)."}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 4, "creation_date": 1458761346, "post_id": 36186895, "comment_id": 60009452, "body": "@knivil Wrong, it&#39;s prvalue of pointer type. You can&#39;t assign to <code>const int* const</code> either, but you wouldn&#39;t call it &quot;not a pointer&quot;, would you?"}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458761525, "post_id": 36186895, "comment_id": 60009555, "body": "Can not find it as example in <a href=\"http://en.cppreference.com/w/cpp/language/value_category\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/value_category</a> .  Maybe you can point me to a better reference. And in the example I can cast away all the constness. What about location <code>&amp;this</code>?"}, {"owner": {"reputation": 14316, "user_id": 1012936, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/eXQaP.png?s=128&g=1", "display_name": "milleniumbug", "link": "https://stackoverflow.com/users/1012936/milleniumbug"}, "reply_to_user": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458761923, "post_id": 36186895, "comment_id": 60009765, "body": "@knivil a.) <a href=\"http://en.cppreference.com/w/cpp/language/this\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/this</a> b.) That doesn&#39;t mean you can legally do this (without invoking undefined behaviour) c.) You can&#39;t do <code>&amp;this</code> the same way you can&#39;t do <code>&amp;42</code> (it&#39;s a prvalue)"}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458761963, "post_id": 36186895, "comment_id": 60009783, "body": "I would argue with &quot;prvalue expression&quot;."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458761976, "post_id": 36186895, "comment_id": 60009792, "body": "@knivil, C++ standard suits you? <code>The keyword this names a pointer to the object for which a non-static member function (9.3.2) is invoked or a non-static data member\u2019s initializer (9.2) is evaluated.</code> - 5.1.1 / 2"}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458762064, "post_id": 36186895, "comment_id": 60009834, "body": "You got me, from today I accept this as a full pointer. :)"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458762071, "post_id": 36186895, "comment_id": 60009836, "body": "@knivil, you should not argue with this. <code>In the body of a non-static (9.3) member function, the keyword this is a prvalue expression whose value is the address of the object for which the function is called.</code> 9.3.2 / 1"}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458762165, "post_id": 36186895, "comment_id": 60009882, "body": "Maybe I will open a question, but more research on my side is needed, because <code>prvalue</code> and <code>prvalue expression</code> sounds ... different."}, {"owner": {"reputation": 25063, "user_id": 3313064, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GBXlB.jpg?s=128&g=1", "display_name": "Christian Hackl", "link": "https://stackoverflow.com/users/3313064/christian-hackl"}, "edited": false, "score": 0, "creation_date": 1458762484, "post_id": 36186895, "comment_id": 60010026, "body": "AFAIK <code>this</code> is a pointer and not a reference because references were added to the language at a later point by Bjarne Stroustrup, whereas classes and <code>this</code> already existed in early versions."}, {"owner": {"reputation": 693, "user_id": 5289164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/622adef0cf2ee22736ade5366b7509fa?s=128&d=identicon&r=PG&f=1", "display_name": "knivil", "link": "https://stackoverflow.com/users/5289164/knivil"}, "edited": false, "score": 0, "creation_date": 1458763104, "post_id": 36186895, "comment_id": 60010364, "body": "Guys, I thank you. Now I understand what&#39;s an &#39;prvalue&#39; is."}], "answers": [{"comments": [{"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "reply_to_user": {"reputation": 58292, "user_id": 34824, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ri8DI.jpg?s=128&g=1", "display_name": "abelenky", "link": "https://stackoverflow.com/users/34824/abelenky"}, "edited": false, "score": 0, "creation_date": 1458761320, "post_id": 36187006, "comment_id": 60009434, "body": "@abelenky <code>this-&gt;</code> cannot be overloaded because <code>this</code> is a pointer."}, {"owner": {"reputation": 170, "user_id": 2414789, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ICB5e.jpg?s=128&g=1", "display_name": "Dhiraj Barnwal", "link": "https://stackoverflow.com/users/2414789/dhiraj-barnwal"}, "edited": false, "score": 0, "creation_date": 1458761451, "post_id": 36187006, "comment_id": 60009510, "body": "Is this is a pointer or not? One of the comments in the main post says that it is not a pointer but can be used like a pointer."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458761524, "post_id": 36187006, "comment_id": 60009554, "body": "<i>&quot;As you know, a pointer and a reference to a button will do the same&quot;</i> no one knows this but you."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 170, "user_id": 2414789, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ICB5e.jpg?s=128&g=1", "display_name": "Dhiraj Barnwal", "link": "https://stackoverflow.com/users/2414789/dhiraj-barnwal"}, "edited": false, "score": 2, "creation_date": 1458761580, "post_id": 36187006, "comment_id": 60009580, "body": "@DhirajBarnwal, don&#39;t trust everything you read on the SO. <code>this</code> is a pointer - albeit of a special type."}], "tags": [], "owner": {"reputation": 1244, "user_id": 6053907, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/74c527b9736547b1be600cad630083ef?s=128&d=identicon&r=PG&f=1", "display_name": "Gam", "link": "https://stackoverflow.com/users/6053907/gam"}, "is_accepted": false, "score": 0, "last_activity_date": 1458761679, "last_edit_date": 1458761679, "creation_date": 1458761114, "answer_id": 36187006, "question_id": 36186895, "link": "https://stackoverflow.com/questions/36186895/what-is-the-difference-between-this-data-and-this-data-in-c/36187006#36187006", "title": "What is the difference between this-&gt;data and (*this).data in C++", "body": "<p>They do exactly the same in your case.</p>\n\n<pre><code>(*this).data \n\nexample: this = Button* //pointer\nexample: *this = Button&amp; // reference\n</code></pre>\n\n<p>A pointer and a reference to a <code>button</code> will do the same. Both will have full access to the object. The difference is the pointer needs to be accessed with the <code>-&gt;</code> operator and a reference can be accessed with the <code>.</code> operator.</p>\n"}, {"comments": [{"owner": {"reputation": 170, "user_id": 2414789, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ICB5e.jpg?s=128&g=1", "display_name": "Dhiraj Barnwal", "link": "https://stackoverflow.com/users/2414789/dhiraj-barnwal"}, "edited": false, "score": 0, "creation_date": 1458761508, "post_id": 36187099, "comment_id": 60009546, "body": "The thing is there is question in my book stating, differentiate between the following expressions : (i) this -&gt;data  (ii) (*this).data If they are same what is the point of asking such a question ?"}, {"owner": {"reputation": 700, "user_id": 279610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd710af7534fdcab7c8d2b9d3812182c?s=128&d=identicon&r=PG&f=1", "display_name": "robsn", "link": "https://stackoverflow.com/users/279610/robsn"}, "reply_to_user": {"reputation": 170, "user_id": 2414789, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ICB5e.jpg?s=128&g=1", "display_name": "Dhiraj Barnwal", "link": "https://stackoverflow.com/users/2414789/dhiraj-barnwal"}, "edited": false, "score": 2, "creation_date": 1458761773, "post_id": 36187099, "comment_id": 60009681, "body": "@Dhiraj <code>(*this).data</code> first dereferences <code>this</code> and then accesses the member <code>data</code>, <code>this-&gt;data</code> does it in one step. The difference is pure syntactical."}, {"owner": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "reply_to_user": {"reputation": 170, "user_id": 2414789, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ICB5e.jpg?s=128&g=1", "display_name": "Dhiraj Barnwal", "link": "https://stackoverflow.com/users/2414789/dhiraj-barnwal"}, "edited": false, "score": 0, "creation_date": 1458766596, "post_id": 36187099, "comment_id": 60012356, "body": "@DhirajBarnwal your book asks you what&#39;s the difference between <code>this-&gt;data</code> and <code>(*this).data</code> to check what you have learned. Apparently you didn&#39;t learn this basic thing from the book. I hope you understood and you will remember the explanations you got on this site."}, {"owner": {"reputation": 170, "user_id": 2414789, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ICB5e.jpg?s=128&g=1", "display_name": "Dhiraj Barnwal", "link": "https://stackoverflow.com/users/2414789/dhiraj-barnwal"}, "reply_to_user": {"reputation": 56338, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 0, "creation_date": 1458806159, "post_id": 36187099, "comment_id": 60024563, "body": "@axiac the book I am using is full of contradictory statements. Supposedly not a very good book prescribed by my school I suppose."}], "tags": [], "owner": {"reputation": 700, "user_id": 279610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd710af7534fdcab7c8d2b9d3812182c?s=128&d=identicon&r=PG&f=1", "display_name": "robsn", "link": "https://stackoverflow.com/users/279610/robsn"}, "is_accepted": true, "score": 4, "last_activity_date": 1458761400, "creation_date": 1458761400, "answer_id": 36187099, "question_id": 36186895, "link": "https://stackoverflow.com/questions/36186895/what-is-the-difference-between-this-data-and-this-data-in-c/36187099#36187099", "title": "What is the difference between this-&gt;data and (*this).data in C++", "body": "<p>There is no difference.</p>\n\n<pre><code>this-&gt;data\n</code></pre>\n\n<p>is just a simplification for</p>\n\n<p><code>(*this).data</code></p>\n\n<p>It combines dereference and member access into a single operation.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6106374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc1ae79d4992aeed4064799c43a527f?s=128&d=identicon&r=PG", "display_name": "ORCestra", "link": "https://stackoverflow.com/users/6106374/orcestra"}, "is_accepted": false, "score": 0, "last_activity_date": 1458766178, "creation_date": 1458766178, "answer_id": 36188425, "question_id": 36186895, "link": "https://stackoverflow.com/questions/36186895/what-is-the-difference-between-this-data-and-this-data-in-c/36188425#36188425", "title": "What is the difference between this-&gt;data and (*this).data in C++", "body": "<p>There is no difference,</p>\n\n<pre><code>    this-&gt;data;\n    //is the same thing as \n    (*this).data;\n</code></pre>\n\n<p>The only thing we are looking at here is in terms of order of operation.  Since the . is higher up on the priority list than the *, the purist way to code it is (*this).data(to ensure the * will happen before the .).  The developpers just thought it would be a good idea to have an alternative that will defferenciate and avoid mistakes like *(this).data that could be very hard to spot and crash the program</p>\n"}], "owner": {"reputation": 170, "user_id": 2414789, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ICB5e.jpg?s=128&g=1", "display_name": "Dhiraj Barnwal", "link": "https://stackoverflow.com/users/2414789/dhiraj-barnwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1486, "favorite_count": 0, "accepted_answer_id": 36187099, "answer_count": 3, "score": 0, "last_activity_date": 1458766178, "creation_date": 1458760717, "question_id": 36186895, "link": "https://stackoverflow.com/questions/36186895/what-is-the-difference-between-this-data-and-this-data-in-c", "title": "What is the difference between this-&gt;data and (*this).data in C++", "body": "<p>I was reading about the this pointer in my book. I encountered something ambiguous written in the book and was unable to understand it. I know that this is a special pointer which is used for determining the object which has called a certain member function of a class. Moreover as we refer to elements in a structure using the arrow operator can be related with the arrow operator used here but what is <strong>(*this).data</strong> for? Are they alias of each other?</p>\n"}, {"tags": ["c++", "input", "while-loop"], "comments": [{"owner": {"reputation": 55516, "user_id": 892256, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/15FJW.png?s=128&g=1", "display_name": "Ed Heal", "link": "https://stackoverflow.com/users/892256/ed-heal"}, "edited": false, "score": 1, "creation_date": 1458760552, "post_id": 36186806, "comment_id": 60008900, "body": "How did you get from the comma operator (google that) to the <code>||</code> operator?"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1458760796, "post_id": 36186806, "comment_id": 60009059, "body": "RTFM <a href=\"http://en.cppreference.com/w/cpp/language/operator_other#Built-in_comma_operator\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/language/&hellip;</a>"}, {"owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "edited": false, "score": 0, "creation_date": 1458760953, "post_id": 36186806, "comment_id": 60009171, "body": "It is not the same meaning as || it means basically, do the left side first, then evaluate the right side and treat that expression as the value of the whole expression (see my answer below)"}], "answers": [{"tags": [], "owner": {"reputation": 2093, "user_id": 3153883, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/xVr3z.jpg?s=128&g=1", "display_name": "LawfulEvil", "link": "https://stackoverflow.com/users/3153883/lawfulevil"}, "is_accepted": true, "score": 2, "last_activity_date": 1458760856, "last_edit_date": 1495541268, "creation_date": 1458760856, "answer_id": 36186933, "question_id": 36186806, "link": "https://stackoverflow.com/questions/36186806/small-thing-about-input-using-while-loop/36186933#36186933", "title": "Small thing about input using while loop", "body": "<p>Basically.... comma has the lowest precedence and is left-associative.</p>\n\n<p>Given A , B</p>\n\n<ol>\n<li>A is evaluated</li>\n<li>The result of A is ignored</li>\n<li>B is evaluated</li>\n<li>The result of B is returned as the result.</li>\n</ol>\n\n<p>Further Reading : <a href=\"https://stackoverflow.com/a/19198977/3153883\">https://stackoverflow.com/a/19198977/3153883</a></p>\n\n<p>So in your case, cin loads r and n.   The return value from that operation is ignored.  r or n happens and is the result of the whole while expression.    So, a 0 0 will cause the while loop to terminate.</p>\n"}], "owner": {"reputation": 113, "user_id": 5916865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d22987eedde98dc1900ec67bf734eed1?s=128&d=identicon&r=PG&f=1", "display_name": "NNguyen", "link": "https://stackoverflow.com/users/5916865/nnguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "closed_date": 1458793267, "accepted_answer_id": 36186933, "answer_count": 1, "score": -1, "last_activity_date": 1458760856, "creation_date": 1458760429, "last_edit_date": 1458760667, "question_id": 36186806, "link": "https://stackoverflow.com/questions/36186806/small-thing-about-input-using-while-loop", "closed_reason": "Needs details or clarity", "title": "Small thing about input using while loop", "body": "<p>I hope you guys all are having a great day!</p>\n\n<p>I have a quick question about using the while loop for competitive programming (we do not know the size of the input, so we have to read until the end of file or 0 value)\nFor this particular program, the program end with 2 values of 0 as  \"0 0\", and the code I saw used this:</p>\n\n<pre><code>while (cin &gt;&gt; r &gt;&gt; n, r || n) { \n     // code\n}\n</code></pre>\n\n<ol>\n<li><p>My question is about the >>> , r || n &lt;&lt;&lt;&lt; part:</p>\n\n<ul>\n<li><p>Is the while loop as the same meaning as </p>\n\n<pre><code>while ( (cin &gt;&gt; r &gt;&gt; n) ||  (r || n) )\n</code></pre></li>\n<li>can I have some preferences to read more about the multi conditions for the while loop. </li>\n</ul></li>\n</ol>\n\n<p>Please regard my dump question  :( Tks you all for reading this post!</p>\n"}, {"tags": ["c++", "static", "dllexport"], "comments": [{"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "edited": false, "score": 0, "creation_date": 1458760520, "post_id": 36186739, "comment_id": 60008873, "body": "The answers to <a href=\"http://stackoverflow.com/questions/35048940/what-does-this-c-class-declaration-mean\" title=\"what does this c class declaration mean\">stackoverflow.com/questions/35048940/&hellip;</a> might be helpful."}, {"owner": {"reputation": 34957, "user_id": 2642059, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "Jonathan Mee", "link": "https://stackoverflow.com/users/2642059/jonathan-mee"}, "edited": false, "score": 0, "creation_date": 1458764925, "post_id": 36186739, "comment_id": 60011419, "body": "Put the implementation of <code>B::bar</code> in the source file, don&#39;t export it. If <code>A</code> is only used in the source of <code>B</code> you shouldn&#39;t need to export it."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1458765363, "post_id": 36186739, "comment_id": 60011676, "body": "You give the linker two ways to resolve B::bar().  It can use the definition from the .h file or it can use the one in AB.lib.  That&#39;s a foregone conclusion, it will always like the one from the .h file since it is present in the .obj file.  Now it needs to resolve A::foo().  Fail whale, AB.lib does not have it.  You must remove the definition in the .h file and move it into the .cpp file so the compiler cannot use it."}], "answers": [{"tags": [], "owner": {"reputation": 1437, "user_id": 4685116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdca5.jpg?s=128&g=1", "display_name": "Ing. Gerardo S&#225;nchez", "link": "https://stackoverflow.com/users/4685116/ing-gerardo-s%c3%a1nchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1458767619, "creation_date": 1458767619, "answer_id": 36188791, "question_id": 36186739, "link": "https://stackoverflow.com/questions/36186739/dllexport-static-class-methods/36188791#36188791", "title": "dllexport static class methods", "body": "<p>I assume code showed is in your .h header file, then when you header file says:</p>\n\n<pre><code>class __declspec(dllimport) B\n{\npublic:\n    //...\n    void bar()\n    {\n        A::foo();\n    }\n};\n</code></pre>\n\n<p>First: you say B class is IMPORTED, it works for your main app, but not works for your dll.</p>\n\n<p>Second: B::bar() IS NOT IMPORTED FROM dll, instead IS DIRECTLY IMPLEMENTED IN YOUR MAIN APP (compiler is readding directly in your header file, and it is not trying to import from dll)</p>\n\n<p>Recomendations:</p>\n\n<p>FIRST: redefine your header file like this:</p>\n\n<pre><code>class __declspec(dllimport) B\n{\npublic:\n    //...\n    void bar();\n};\n</code></pre>\n\n<p>And implement method B::bar in a cpp file in dll project</p>\n\n<p>SECOND: remove class A from your header file (if you can) </p>\n"}], "owner": {"reputation": 11, "user_id": 4413884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85740945a2b2d8838d23a212b4efd80?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Ye", "link": "https://stackoverflow.com/users/4413884/brian-ye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1181, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458772737, "creation_date": 1458760207, "last_edit_date": 1458772737, "question_id": 36186739, "link": "https://stackoverflow.com/questions/36186739/dllexport-static-class-methods", "title": "dllexport static class methods", "body": "<p>I am using Visual Studio and am working on some C++ code that works like this in class <code>A</code>:</p>\n\n<pre><code>class A\n{\npublic:\n    //......\n    static void foo();\n};\n</code></pre>\n\n<p>class <code>B</code> is exported:</p>\n\n<pre><code>class __declspec(dllexport) B\n{\npublic:\n    //...\n    void bar()\n    {\n        A::foo();\n    }\n};\n</code></pre>\n\n<p><code>A</code> and <code>B</code> are compiled to AB.dll (and AB.lib).\nNow the main program:</p>\n\n<pre><code>int main()\n{\n    B b;\n    b.bar();\n    return 0;\n}\n\nWhen compiling the main program and linking it to AB.lib,\nit complains about the A::foo() as unresolved external symbol\n(in this case A::foo is a static function).\nDo I need to somehow export A::foo() or could it be that \nI introduce errors somewhere?  Any help is appreciated.\n\nModified: \n1) Sorry for the type, it should be dllexport, not dllimport\n2) in my actual project, the implementation is in .cpp files.  They are not inline functions.\nThanks.\n</code></pre>\n"}, {"tags": ["c++", "c", "c++11", "design-patterns"], "comments": [{"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1458759952, "post_id": 36186577, "comment_id": 60008540, "body": "template and Function pointer ?"}, {"owner": {"reputation": 5197, "user_id": 59775, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ef840b42249ae3f3ca8475a305599397?s=128&d=identicon&r=PG", "display_name": "celavek", "link": "https://stackoverflow.com/users/59775/celavek"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 1, "creation_date": 1458760173, "post_id": 36186577, "comment_id": 60008675, "body": "I do not understand the downvotes. Please be at least polite and explain."}, {"owner": {"reputation": 5197, "user_id": 59775, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ef840b42249ae3f3ca8475a305599397?s=128&d=identicon&r=PG", "display_name": "celavek", "link": "https://stackoverflow.com/users/59775/celavek"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458760209, "post_id": 36186577, "comment_id": 60008696, "body": "@Jarod42 could you provide an example?"}, {"owner": {"reputation": 5197, "user_id": 59775, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ef840b42249ae3f3ca8475a305599397?s=128&d=identicon&r=PG", "display_name": "celavek", "link": "https://stackoverflow.com/users/59775/celavek"}, "reply_to_user": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 0, "creation_date": 1458763475, "post_id": 36186577, "comment_id": 60010593, "body": "Either is the wrong time of the day for some people or there must be something really wrong with the question and I am blind."}], "answers": [{"comments": [{"owner": {"reputation": 5197, "user_id": 59775, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ef840b42249ae3f3ca8475a305599397?s=128&d=identicon&r=PG", "display_name": "celavek", "link": "https://stackoverflow.com/users/59775/celavek"}, "edited": false, "score": 0, "creation_date": 1458763350, "post_id": 36187274, "comment_id": 60010520, "body": "But there is more than one function in the API. Should I pass function pointers for each and everyone of them? How does that scale if I add more functions to the API?"}, {"owner": {"reputation": 420, "user_id": 5747844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47f253367f6ff02da1fe8f521a77057?s=128&d=identicon&r=PG&f=1", "display_name": "nissefors", "link": "https://stackoverflow.com/users/5747844/nissefors"}, "reply_to_user": {"reputation": 5197, "user_id": 59775, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ef840b42249ae3f3ca8475a305599397?s=128&d=identicon&r=PG", "display_name": "celavek", "link": "https://stackoverflow.com/users/59775/celavek"}, "edited": false, "score": 0, "creation_date": 1458802195, "post_id": 36187274, "comment_id": 60023182, "body": "If the component class youd have to mirror each type, as long as the interface of your different types doesn&#39;t diverge from eachother the scaling would be linear with the size of the interface. You should look at the code @Jarod42 supplied though since it puts the functions into the template declaration wich would allow you to make a nice typedef to reduce each instanciation a lot."}], "tags": [], "owner": {"reputation": 420, "user_id": 5747844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47f253367f6ff02da1fe8f521a77057?s=128&d=identicon&r=PG&f=1", "display_name": "nissefors", "link": "https://stackoverflow.com/users/5747844/nissefors"}, "is_accepted": false, "score": 1, "last_activity_date": 1458762018, "creation_date": 1458762018, "answer_id": 36187274, "question_id": 36186577, "link": "https://stackoverflow.com/questions/36186577/strategies-to-wrap-c-api-for-c-consumption/36187274#36187274", "title": "Strategies to wrap C API for C++ consumption", "body": "<p>I am thinking that @Jarod42 was implying something </p>\n\n<pre><code>template &lt;typename T&gt;\nclass component\n{\nprivate:\n    typedef void (*destroyMethod)(T*,error_details_t*);\n    ...\npublic:\n    component(destroyMethod,...)\n    {\n        destroy = destroyMethod;\n        ...\n    }\n    void Destroy()\n    {\n        error_details_t err;\n        destroy(handle, err);\n    }\n    ...\nprivate:\n    destroyMethod destroy;\n    T * handle;\n};\n</code></pre>\n\n<p>then instanciate with something like:</p>\n\n<pre><code>component&lt;bull_handle_t&gt; yourBull(bull_destroy, ...)\n</code></pre>\n\n<p>And you could probably wrap away the last part with some extra work</p>\n"}, {"comments": [{"owner": {"reputation": 5197, "user_id": 59775, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ef840b42249ae3f3ca8475a305599397?s=128&d=identicon&r=PG", "display_name": "celavek", "link": "https://stackoverflow.com/users/59775/celavek"}, "edited": false, "score": 0, "creation_date": 1458763655, "post_id": 36187690, "comment_id": 60010686, "body": "I have not rejected anything yet. I&#39;m weighing the alternatives and I&#39;m also wondering if people have come with better ideas, hence the question."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "reply_to_user": {"reputation": 5197, "user_id": 59775, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ef840b42249ae3f3ca8475a305599397?s=128&d=identicon&r=PG", "display_name": "celavek", "link": "https://stackoverflow.com/users/59775/celavek"}, "edited": false, "score": 0, "creation_date": 1458764241, "post_id": 36187690, "comment_id": 60011010, "body": "@celavek, there are no other options, just variations on the ones you already know."}], "tags": [], "owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1458763472, "creation_date": 1458763472, "answer_id": 36187690, "question_id": 36186577, "link": "https://stackoverflow.com/questions/36186577/strategies-to-wrap-c-api-for-c-consumption/36187690#36187690", "title": "Strategies to wrap C API for C++ consumption", "body": "<p>You have a collection of C functions arranged in groups, with names and signatures that follow a consistent pattern.  If you want your C++ wrapper to call one of those functions, the function's name must appear one way or another in the C++ code.  Your choices for accomplishing that are to insert the names literally in the appropriate places in your wrapper code, or to generate them systematically via macros.  You have rejected both alternatives.</p>\n\n<p>If you insist on avoiding macros, you could consider writing a code generator to output C++ sources for all the class definitions (that call the needed functions literally).  Perhaps that would be more satisfying than coding it all by hand, and it would allow you to easily regenerate the classes if they turn out to be flawed, if the C library changes or adds functions, or for any other reason.</p>\n"}, {"comments": [{"owner": {"reputation": 5197, "user_id": 59775, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ef840b42249ae3f3ca8475a305599397?s=128&d=identicon&r=PG", "display_name": "celavek", "link": "https://stackoverflow.com/users/59775/celavek"}, "edited": false, "score": 0, "creation_date": 1458809839, "post_id": 36188524, "comment_id": 60026295, "body": "This is indeed interesting. I think I can work further with that. I was already thinking about function pointers but I was not sure how and with what to &quot;combine&quot; them."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 3, "last_activity_date": 1458809808, "last_edit_date": 1458809808, "creation_date": 1458766572, "answer_id": 36188524, "question_id": 36186577, "link": "https://stackoverflow.com/questions/36186577/strategies-to-wrap-c-api-for-c-consumption/36188524#36188524", "title": "Strategies to wrap C API for C++ consumption", "body": "<p>What I have in mind is</p>\n\n<pre><code>template &lt;typename H&gt; using create_t = void (*)(H**, error_details_t*);\ntemplate &lt;typename H&gt; using destroy_t = void (*)(H*, error_details_t*);\ntemplate &lt;typename H&gt; using get_data_t = void (*)(H*, uint8_t* buffer, error_details_t*);\n\ntemplate &lt;typename H,\n          create_t&lt;H&gt; create,\n          destroy_t&lt;H&gt; destroy,\n          get_data_t&lt;H&gt; get_data&gt;\nclass backend\n{\n    backend() { error_details_t err; create(&amp;handle, err);}\n    ~backend() {  error_details_t err; destroy(handle, err);}\n\n    backend(const backend&amp;) = delete;\n    backend&amp; operator =(const backend&amp;) = delete;\n    backend(backend&amp;&amp;) = delete;\n    backend&amp; operator =(backend&amp;&amp;) = delete;\n\n    void get_data(uint8_t* buffer)\n    {\n         error_details_t err;\n         get_data(handle, buffer, &amp;err);\n    }\n\nprivate:\n   H* handle = nullptr;\n};\n\nusing bull = backend&lt;bull_handle_t, &amp;bull_create, &amp;bull_destroy, &amp;bull_get_data&gt;;\nusing frog = backend&lt;frog_handle_t, &amp;frog_create, &amp;frog_destroy, &amp;frog_get_data&gt;;\nusing bullfrog = backend&lt;bullfrog_handle_t,\n                         &amp;bullfrog_create,\n                         &amp;bullfrog_destroy,\n                         &amp;bull_get_data&gt;;\n</code></pre>\n\n<p>Maybe <code>error_details_t</code> can be a member,\nand you should also handle error.</p>\n"}], "owner": {"reputation": 5197, "user_id": 59775, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ef840b42249ae3f3ca8475a305599397?s=128&d=identicon&r=PG", "display_name": "celavek", "link": "https://stackoverflow.com/users/59775/celavek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 339, "favorite_count": 0, "accepted_answer_id": 36188524, "answer_count": 3, "score": 0, "last_activity_date": 1544137510, "creation_date": 1458759670, "last_edit_date": 1544137510, "question_id": 36186577, "link": "https://stackoverflow.com/questions/36186577/strategies-to-wrap-c-api-for-c-consumption", "title": "Strategies to wrap C API for C++ consumption", "body": "<p>In a C++ app I have to interface with a C library. This library has several components each with its own API. The APIs are very similar and differ just in the prefix of the functions and in some handler type. E.g.:</p>\n\n<pre><code>// bull component\nvoid bull_create(bull_handle_t** handle, error_details_t* error_details);\nvoid bull_destroy(bull_handle_t* handle, error_details_t* error_details);\nvoid bull_get_data(bull_handle_t* handle, uint8_t* buffer, error_details_t* error_details);\n\n// frog component\nvoid frog_create(frog_handle_t** handle, error_details_t* error_details);\nvoid frog_destroy(frog_handle_t* handle, error_details_t* error_details);\nvoid frog_get_data(frog_handle_t* handle, uint8_t* buffer, error_details_t* error_details);\n\n// bullfrog component\nvoid bullfrog_create(bullfrog_handle_t** handle, error_details_t* error_details);\nvoid bullfrog_destroy(bullfrog_handle_t* handle, error_details_t* error_details);\nvoid bullfrog_get_data(bullfrog_handle_t* handle, uint8_t* buffer, error_details_t* error_details);\n\n// NOTE: components can and will be added at any time following the same pattern.\n</code></pre>\n\n<p>I want to wrap this for C++ consumption in a generic way with minimal code duplication. \nSo first the naive approach:</p>\n\n<pre><code>class bull_backend\n{\npublic:\n   ...\n   void get_data (uint8_t* buffer)\n   {\n       error_details_t err;\n       bull_get_data(handle, buffer, &amp;err);\n   }\n   ...\n\nprivate:\n    bull_handle_t* handle;\n};\n\nclass frog_backend\n{\npublic:\n   ...\n   void get_data (uint8_t* buffer)\n   {\n       error_details_t err;\n       frog_get_data(handle, buffer, &amp;err);\n   }\n   ...\n\nprivate:\n    frog_handle_t* handle;\n};\n\nclass bullfrog_backend\n{\npublic:\n   ...\n   void get_data (uint8_t* buffer)\n   {\n       error_details_t err;\n       bullfrog_get_data(handle, buffer, &amp;err);\n   }\n   ...\n\nprivate:\n    bullfrog_handle_t* handle;\n};\n</code></pre>\n\n<p>That does not quite cut it. I will be just duplicating the C API but now in the form of classes.\nThe only thing that is different is just the prefix which identifies the C entities.</p>\n\n<p>The next thing on my mind was a, be prepared, a macro e.g.</p>\n\n<pre><code>#define GENERATE_BACKEND(...)\n    ...\n</code></pre>\n\n<p>that would just substitute for the prefix. But I do not like that. It does not feel like \nmodern C++.</p>\n\n<p>One other thing I could do is group everything toghether in one class template and \ndo tag dispatching or use enable_if, e.g.</p>\n\n<pre><code>template &lt;typename Component&gt;\nclass backend\n{\npublic:\n\n    ...\n    template&lt;typename = typename std::enable_if&lt;std::is_same&lt;Component, bull_component&gt;::value&gt;::type&gt;\n    void get_data (uint8_t* buffer)\n    {\n       error_details_t err;\n       bull_get_data(handle, buffer, &amp;err);\n    }\n\n    template&lt;typename = typename std::enable_if&lt;std::is_same&lt;Component, frog_component&gt;::value&gt;::type&gt;\n    void get_data (uint8_t* buffer)\n    {\n       error_details_t err;\n       frog_get_data(handle, buffer, &amp;err);\n    }\n\n    template&lt;typename = typename std::enable_if&lt;std::is_same&lt;Component, bullfrog_component&gt;::value&gt;::type&gt;\n    void get_data (uint8_t* buffer)\n    {\n       error_details_t err;\n       bullfrog_get_data(handle, buffer, &amp;err);\n    }\n    ...\n\nprivate:\n    typename Component::handle_type handle;\n};\n\nstruct frog_component\n{\n   using handle_type = frog_handle_t*;\n};\n\nstruct bull_component\n{\n   using handle_type = bull_handle_t*;\n};\n\nstruct bullfrog_component\n{\n   using handle_type = bullfrog_handle_t*;\n};\n\nusing frog_backend = backend&lt;frog_component&gt;;\nusing bull_backend = backend&lt;bull_component&gt;;\nusing bullfrog_backend = backend&lt;bullfrog_component&gt;;\n</code></pre>\n\n<p>Still it doesn't feel right. One other thing that bothers me besides the apparent code \nduplication is that, except for the macro version :), they do not scale nice with \nthe addition of C components. </p>\n\n<p>I'm always under the impression that there must be something else which is better.\nSo, does anyone know of a better, worthier of the modern C++ name, technique to handle \nthis type of situation?</p>\n"}, {"tags": ["c++", "unix", "pipe"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458759268, "post_id": 36186449, "comment_id": 60008153, "body": "Why do you need <code>pipe(fd);</code> if both of your shell execution samples already redirect to <code>stdin</code> for you?"}, {"owner": {"reputation": 316, "user_id": 4598277, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0584396f6a64aff38f16ee602bef7d23?s=128&d=identicon&r=PG", "display_name": "Dirich", "link": "https://stackoverflow.com/users/4598277/dirich"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458760625, "post_id": 36186449, "comment_id": 60008955, "body": "I want to use my tool like this: <code>cat file.txt | mybin</code>. stdin is empty when I use it this way, so I thought &quot;|&quot; is a pipe, let&#39;s look into <code>pipe</code> objects."}, {"owner": {"reputation": 316, "user_id": 4598277, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0584396f6a64aff38f16ee602bef7d23?s=128&d=identicon&r=PG", "display_name": "Dirich", "link": "https://stackoverflow.com/users/4598277/dirich"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458764209, "post_id": 36186449, "comment_id": 60010999, "body": "Of course my code isn&#39;t doring anything really different as long as I use STDIN_FILENO and copy it onto the pipe, what I am asking for is what I should use instead of STDIN_FILENO."}], "owner": {"reputation": 316, "user_id": 4598277, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/0584396f6a64aff38f16ee602bef7d23?s=128&d=identicon&r=PG", "display_name": "Dirich", "link": "https://stackoverflow.com/users/4598277/dirich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1458759163, "creation_date": 1458759163, "question_id": 36186449, "link": "https://stackoverflow.com/questions/36186449/empty-stdin-when-piping-tool", "title": "Empty stdin when piping tool", "body": "<p>I've spent the whole day looking at threads on how to make my tool \"mybin\" capable of being put in a pipeline.</p>\n\n<p>Imagine that file.txt is a list of numbers, one per line. I want to be able to do</p>\n\n<pre><code>cat file.txt | mybin\n</code></pre>\n\n<p>If I read directly from standard input this will fail, although the following will succeed</p>\n\n<pre><code>mybin &lt; file.txt\n</code></pre>\n\n<p>So I looked into pipes, and there's a lot of sources repeating the same info of creating a process, forking and creating pipes for the parent and child to communicate. But nothing useful when the pipe comes from an external source.</p>\n\n<p>My problem, I think, is how to get the pipe I initialize internally to be connected to the pipe after \"cat file.txt\".</p>\n\n<p>To give you an idea of what I am currently doing:</p>\n\n<pre><code>int fd[2];\npipe(fd);\ndup2(STDIN_FILENO, fd[0]);\nboost::iostreams::stream&lt;boost::iostreams::file_descriptor_source&gt; is(boost::iostreams::file_descriptor_source(fd[0], boost::iostreams::never_close_handle));\n</code></pre>\n\n<p>At this point I pretty much have a usual C++ stream and proceed to use <code>std::getline</code> in a loop.</p>\n\n<p>When using the \"&lt;\" version of the command, <code>seekg(0, is.end)</code> returns a positive value, but when I use the \"|\" version the command, <code>seekg(0, is.end) == -1</code>.\nWhich is why I think my problem is that I need something else than <code>STDIN_FILENO</code> to be copied onto my input pipe.</p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["c#", "c++", "pointers", "interop", "pinvoke"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 2, "creation_date": 1458759448, "post_id": 36186331, "comment_id": 60008259, "body": "It is bad C++ code.  That never gets better when you pinvoke it.  Make it work from a C++ test program first."}], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "edited": false, "score": 0, "creation_date": 1458759245, "post_id": 36186434, "comment_id": 60008136, "body": "Like riding a bike"}, {"owner": {"reputation": 7876, "user_id": 2321874, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fbIIO.jpg?s=128&g=1", "display_name": "Mihai Caracostea", "link": "https://stackoverflow.com/users/2321874/mihai-caracostea"}, "reply_to_user": {"reputation": 846, "user_id": 3874053, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xr2Gk.jpg?s=128&g=1", "display_name": "Jacobr365", "link": "https://stackoverflow.com/users/3874053/jacobr365"}, "edited": false, "score": 1, "creation_date": 1458759304, "post_id": 36186434, "comment_id": 60008175, "body": "@Jacobr365 Yeah... All&#39;s well and neat... Until you fall down and &quot;bend&quot; your nose :)"}, {"owner": {"reputation": 1981, "user_id": 618490, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/244dd40ac73e282859bb528d2411431f?s=128&d=identicon&r=PG", "display_name": "makoshichi", "link": "https://stackoverflow.com/users/618490/makoshichi"}, "edited": false, "score": 0, "creation_date": 1458759967, "post_id": 36186434, "comment_id": 60008551, "body": "Nice! Like I said, C++ isn&#39;t my forte, but I see both &quot;what you did there&quot; and where I was wrong. Many thanks!"}, {"owner": {"reputation": 7876, "user_id": 2321874, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fbIIO.jpg?s=128&g=1", "display_name": "Mihai Caracostea", "link": "https://stackoverflow.com/users/2321874/mihai-caracostea"}, "reply_to_user": {"reputation": 1981, "user_id": 618490, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/244dd40ac73e282859bb528d2411431f?s=128&d=identicon&r=PG", "display_name": "makoshichi", "link": "https://stackoverflow.com/users/618490/makoshichi"}, "edited": false, "score": 1, "creation_date": 1458760135, "post_id": 36186434, "comment_id": 60008647, "body": "@S.O. That&#39;s how we all learn... Keep up the good work! Cheers!"}], "tags": [], "owner": {"reputation": 7876, "user_id": 2321874, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fbIIO.jpg?s=128&g=1", "display_name": "Mihai Caracostea", "link": "https://stackoverflow.com/users/2321874/mihai-caracostea"}, "is_accepted": true, "score": 2, "last_activity_date": 1458759117, "creation_date": 1458759117, "answer_id": 36186434, "question_id": 36186331, "link": "https://stackoverflow.com/questions/36186331/c-p-invoke-native-output-parameter-value-wont-reach-managed-code/36186434#36186434", "title": "C# P/Invoke: native output parameter value won&#39;t reach managed code", "body": "<p>I think you are getting a bad result because in your C++ code you are actually changing the parameter <code>number</code> by setting it to another pointer.</p>\n\n<p>I believe that your change will only be visible in your function <code>outTest</code>'s scope.</p>\n\n<p>However, if you change the value where the pointer ... points... that's should be a different story. Pretty much like this:</p>\n\n<pre><code>*number = *number + 10;\n</code></pre>\n\n<p>EDIT: This bit is not tested. Oh... and also... I haven't written anything in C++ for ages. Might as well be totally wrong.</p>\n"}], "owner": {"reputation": 1981, "user_id": 618490, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/244dd40ac73e282859bb528d2411431f?s=128&d=identicon&r=PG", "display_name": "makoshichi", "link": "https://stackoverflow.com/users/618490/makoshichi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 36186434, "answer_count": 1, "score": 0, "last_activity_date": 1458759117, "creation_date": 1458758782, "question_id": 36186331, "link": "https://stackoverflow.com/questions/36186331/c-p-invoke-native-output-parameter-value-wont-reach-managed-code", "title": "C# P/Invoke: native output parameter value won&#39;t reach managed code", "body": "<p>I'm marshalling a native C++ DLL to a C# DLL. I'm not very acknowledged in C/C++, but I've managed to make it work until I got stuck on this problem. Here's a very simplistic code example:</p>\n\n<p>C++</p>\n\n<pre><code>PROASADLL __declspec(dllexport) void outTest(int* number){\n    int temp = *number + 10;\n    number = &amp;temp; //*number = 12\n}\n</code></pre>\n\n<p>C#</p>\n\n<pre><code>[DllImport(\"ProAsaNativeDll.dll\", CallingConvention = CallingConvention.Cdecl)]\nprivate static extern void outTest(ref int number);\n\npublic static int OutTest()\n{\n    int number = 2;\n    outTest(ref number);\n    return number; //number = 2\n}\n</code></pre>\n\n<p>Please notice that I'm my real scenario, I'm trying to get this to work with a pointer to pointer to struct but I decided to leave it out as it is not a marshalling issue; not even this simple code will work. The C++ code works but I wouldn't rule out being dumb and having a problem there: like I said, I don't know much C/C++.</p>\n\n<p>The number variable value in the C# wrapper method won't change. Please help.</p>\n"}, {"tags": ["c++", "algorithm", "sorting", "vector", "heapsort"], "comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1458759012, "post_id": 36186287, "comment_id": 60008003, "body": "The description feels like they are using a priority queue. <code>sort_heap</code> does something different."}, {"owner": {"reputation": 351, "user_id": 5454353, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/1649142428694730/picture?type=large", "display_name": "Federico Nardi", "link": "https://stackoverflow.com/users/5454353/federico-nardi"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1458759865, "post_id": 36186287, "comment_id": 60008482, "body": "OK! Thanks! This answered my question!"}, {"owner": {"reputation": 2113, "user_id": 4433546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fp46R.jpg?s=128&g=1", "display_name": "TriskalJM", "link": "https://stackoverflow.com/users/4433546/triskaljm"}, "edited": false, "score": 0, "creation_date": 1458765251, "post_id": 36186287, "comment_id": 60011607, "body": "If the question is answered, one of you should provide the answer, then you can accept it, @FedericoNardi."}], "owner": {"reputation": 351, "user_id": 5454353, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/1649142428694730/picture?type=large", "display_name": "Federico Nardi", "link": "https://stackoverflow.com/users/5454353/federico-nardi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 221, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458768316, "creation_date": 1458758592, "last_edit_date": 1495542227, "question_id": 36186287, "link": "https://stackoverflow.com/questions/36186287/using-stdsort-heap-on-a-vector-of-pair", "title": "Using std::sort_heap on a vector of pair", "body": "<p>I want to implement the Fast Tagging algorithm described in Section 5.2 of \n<a href=\"http://physbam.stanford.edu/~fedkiw/papers/stanford2001-03.pdf\" rel=\"nofollow noreferrer\">http://physbam.stanford.edu/~fedkiw/papers/stanford2001-03.pdf</a>. Here,  they claim to use a binary heap for sorting operations, so I thought it could be a good idea to use the sort_heap method of the standard library as explained here:</p>\n\n<p><a href=\"http://www.cplusplus.com/reference/algorithm/sort_heap/\" rel=\"nofollow noreferrer\">http://www.cplusplus.com/reference/algorithm/sort_heap/</a></p>\n\n<p>in this example the vector to be sorted contains just integer values while in my case I have a distance map defined on a 3D grid (linearized into a 1D array) and, since I have to know the index corresponding to a particular distance value, I should use something like:</p>\n\n<pre><code>std::vector&lt;std::pair&lt;int,float&gt;&gt; v;\n</code></pre>\n\n<p>In this thread </p>\n\n<p><a href=\"https://stackoverflow.com/questions/279854/how-do-i-sort-a-vector-of-pairs-based-on-the-second-element-of-the-pair\">How do I sort a vector of pairs based on the second element of the pair?</a></p>\n\n<p>it's shown how to call std::sort for a similar problem, is it possible to do the same for std::sort_heap?</p>\n\n<p>Thanks!</p>\n\n<hr>\n\n<p><strong>Edit</strong></p>\n\n<p>As T.C. pointed out this problem can be solved by using a priority_queue!</p>\n"}, {"tags": ["c++", "operator-overloading"], "comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1458758664, "post_id": 36186206, "comment_id": 60007817, "body": "The conditional in your + operator doesn&#39;t look right; the only way it can be true is if <code>members</code> is negative which looks to me that shouldn&#39;t be the case"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 2, "creation_date": 1458758672, "post_id": 36186206, "comment_id": 60007823, "body": "Please read your requirements.  You&#39;re supposed to return a brand new <code>MSquad</code> object with <code>operator+</code>, not a reference, and not a reference to the current object.  Second, you need to write a copy constructor and assignment operator for your class, since you insisted on using pointers to dynamically allocated memory as members.  See the <a href=\"http://stackoverflow.com/questions/4172722/what-is-the-rule-of-three\">Rule of 3</a>"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458758726, "post_id": 36186206, "comment_id": 60007852, "body": "&quot;I am trying it but the result does not make any sense!&quot; That&#39;s not enough. What&#39;s exactly your problem? Do you get any errors?"}, {"owner": {"reputation": 195, "user_id": 6026151, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1104ae348a5aa49e8a0a5f7b64d29713?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/6026151/m-t"}, "edited": false, "score": 0, "creation_date": 1458758971, "post_id": 36186206, "comment_id": 60007979, "body": "The assignment operator and the copy constructor are there, and how am I supposed to return a new object? I&#39;m new to C++..."}, {"owner": {"reputation": 195, "user_id": 6026151, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1104ae348a5aa49e8a0a5f7b64d29713?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/6026151/m-t"}, "edited": false, "score": 0, "creation_date": 1458759178, "post_id": 36186206, "comment_id": 60008096, "body": "Error 1:error: read-only variable is not assignable members = members + right.members;                  ^"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1458759277, "post_id": 36186206, "comment_id": 60008157, "body": "Your <code>operator +</code> is supposed to return an <code>MSquad</code>, not <code>MSquad&amp;</code>.  You&#39;re supposed to create one from scratch, add up the contents in the scratch, and return the scratch.  You don&#39;t return the current object.  And why is your <code>operator=</code> returning a const object?  It also has flaws, one being that you&#39;ve deleted <code>name</code> without knowing if creating the new <code>name</code> will fail or not."}, {"owner": {"reputation": 195, "user_id": 6026151, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1104ae348a5aa49e8a0a5f7b64d29713?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/6026151/m-t"}, "edited": false, "score": 0, "creation_date": 1458759651, "post_id": 36186206, "comment_id": 60008363, "body": "Ok, now it has no errors, but If I input this:                                           Bistra 12 75 Kozuv 15 89 Kozjak 2 15                                                                                                            The output should be: Name: Vodno Tours: 5 Members: 150 The max number of members is in squad in:: Name: Vodno Tours: 5 Members: 100"}, {"owner": {"reputation": 195, "user_id": 6026151, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1104ae348a5aa49e8a0a5f7b64d29713?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/6026151/m-t"}, "edited": false, "score": 0, "creation_date": 1458759813, "post_id": 36186206, "comment_id": 60008449, "body": "and it&#39;s not it is : Name: Vodno Tours: 5 Members: 150 The max number of members is in squad in:: Name: Vodno Tours: 5 Members: 150"}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "edited": false, "score": 0, "creation_date": 1458759923, "post_id": 36186206, "comment_id": 60008514, "body": "@M.Tochi See my answer -- Use the code that you <i>did</i> write to your advantage."}], "answers": [{"comments": [{"owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458758834, "post_id": 36186255, "comment_id": 60007908, "body": "Why minus? The OP says (s) he not sure what gives wrong results. So I suggested to either solve it on paper and translate the solution in the code or go with the debugger. All is pretty logical."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 2, "creation_date": 1458758938, "post_id": 36186255, "comment_id": 60007958, "body": "Still, it&#39;s not an actual answer, it&#39;s more like a suggestion or advice and common logic I could say"}], "tags": [], "owner": {"reputation": 4317, "user_id": 945871, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/b9b646cc701a3b906179ccf9ee68c350?s=128&d=identicon&r=PG", "display_name": "Igor", "link": "https://stackoverflow.com/users/945871/igor"}, "is_accepted": false, "score": -6, "last_activity_date": 1458758492, "creation_date": 1458758492, "answer_id": 36186255, "question_id": 36186206, "link": "https://stackoverflow.com/questions/36186206/how-am-i-supposed-to-overload-the-operator-in-c/36186255#36186255", "title": "How am I supposed to overload the operator + in C++", "body": "<p>Did you try going thru with the debugger?</p>\n\n<p>Or, better yet - solve your problem on paper - then translate it into the code.</p>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 6026151, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1104ae348a5aa49e8a0a5f7b64d29713?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/6026151/m-t"}, "edited": false, "score": 0, "creation_date": 1458760741, "post_id": 36186644, "comment_id": 60009024, "body": "Okay, thank you! this is partially working, the problem now I think is with the void mostMembers(MSquad squads[], int size) function, it&#39;s supposed to print the squad with the largest number of members. The output says that the first object is always the largest, and it&#39;s not..."}, {"owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "reply_to_user": {"reputation": 195, "user_id": 6026151, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1104ae348a5aa49e8a0a5f7b64d29713?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/6026151/m-t"}, "edited": false, "score": 0, "creation_date": 1458760925, "post_id": 36186644, "comment_id": 60009153, "body": "Well,.that is another issue.  What my answer shows is basically how you should write <code>operator +</code> using what you have now, and it&#39;s just a matter of debugging the rest of the issues you have.  I pointed out one, where you&#39;re not deleting the memory in your <code>operator +(=)</code>"}], "tags": [], "owner": {"reputation": 31368, "user_id": 3133316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30f0b31e22bec21f12f31cd30ae5b148?s=128&d=identicon&r=PG&f=1", "display_name": "PaulMcKenzie", "link": "https://stackoverflow.com/users/3133316/paulmckenzie"}, "is_accepted": true, "score": 0, "last_activity_date": 1458761659, "last_edit_date": 1458761659, "creation_date": 1458759894, "answer_id": 36186644, "question_id": 36186206, "link": "https://stackoverflow.com/questions/36186206/how-am-i-supposed-to-overload-the-operator-in-c/36186644#36186644", "title": "How am I supposed to overload the operator + in C++", "body": "<p>The problem is that you're not understanding what <code>operator +</code> is supposed to return.  According to your assignment:</p>\n\n<blockquote>\n  <p>\u2022operator + for adding two squads that will return as a result a new\n  squad with number of members that is sum of the number of members of\n  both squads,</p>\n</blockquote>\n\n<p>In your code, you're returning a <code>MSquad&amp;</code> for <code>operator +</code>.  This is not correct, as you should be returning a new <code>MSquad</code> object that is made up of the current object and the passed-in object.  </p>\n\n<p>However, all is not lost, and we can keep the code you have now.  What's saved us is that you've written a user-defined copy constructor and destructor, so we can apply an easy fix.</p>\n\n<p>The way we can fix this is to do the following (this was not in your requirements, but let's use the code you do have now):</p>\n\n<pre><code>MSquad &amp;operator+=(const MSquad &amp;right) const\n{\n    members = members + right.members;\n    if(right.members &gt; members){\n        name = new char[strlen(right.name) + 1];\n        strcpy(name, right.name);\n        tours = right.tours;\n        //members = members + right.members;\n    }\n    return *this;\n}\n\nMSquad operator+(const MSquad &amp;right) const\n{\n   MSquad temp(*this); // create a temporary copy of the current object \n   return temp += right;  // use += above on passed-in object and return object.\n}\n</code></pre>\n\n<p>We've taken your existing code, made it <code>operator+=</code>, and just created an <code>operator +</code> using this function.  So we killed two birds with one stone.  We created an <code>operator +=</code>, which is supposed to return a reference to the current object, and wrote <code>operator +</code> using <code>operator +=</code> as a helper function.  Also, note that we created the temporary of the current object by taking advantage of the copy constructor.  </p>\n\n<p>In general, when you overload the operators such as <code>+</code> it is a better practice to overload <code>op=</code> first, and call it from operator <code>op</code>.  </p>\n\n<hr>\n\n<p>Please note that there are many other issues with your code involving mismanagement of pointers and memory leaks.  For example, the <code>operator +</code> function (now <code>operator +=</code> in the answer) has a memory leak in that you didn't <code>delete []</code> the previous <code>name</code> allocation.  However I leave it up to you to fix these issues.</p>\n"}], "owner": {"reputation": 195, "user_id": 6026151, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1104ae348a5aa49e8a0a5f7b64d29713?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/6026151/m-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 36186644, "answer_count": 2, "score": -1, "last_activity_date": 1458761659, "creation_date": 1458758342, "last_edit_date": 1458760127, "question_id": 36186206, "link": "https://stackoverflow.com/questions/36186206/how-am-i-supposed-to-overload-the-operator-in-c", "title": "How am I supposed to overload the operator + in C++", "body": "<p>I should be overloading the operator + for adding two squads that will return as a result a new squad with the number of members that is the sum of the number of members of both squads, and other attributes are taken from the squad with larger number of members. I am trying it but the result does not make any sense! And I don't know whether the mistake is in the part where I am overloading the + operator, or it is in the function that shows which tour has most members?!</p>\n\n<p>Here is what all the exercise says: \"Mountain squad Problem 2 (0 / 30) </p>\n\n<p>Write a class for mountain squad, that keeps information for the name of the squad (dynamically allocated array of chars), number of tours (integer) and number of members (integer). For this class implement:</p>\n\n<p>\u2022operator + for adding two squads that will return as a result a new squad with number of members that is sum of the number of members of both squads, and other attributes are taken from the squad with larger number of members.</p>\n\n<p>\u2022operators >, &lt; for comparison by the number of members</p>\n\n<p>\u2022operator &lt;&lt; for printing the info on SO.</p>\n\n<p>Write a function that accepts array of mountain squads and the size of the array and prints the squad with max number of members.\n\"</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string.h&gt;\nusing namespace std;\n\nclass MSquad{\nprivate:\nchar *name;\nint tours;\nint members;\nvoid copy(const MSquad &amp;toCopy){\n    name = new char[strlen(toCopy.name) + 1];\n    strcpy(name, toCopy.name);\n    tours = toCopy.tours;\n    members = toCopy.members;\n}\n\n\npublic:\nMSquad(char *n = \"unknown\", int nT = 0, int nM = 0){\n    name = new char[strlen(n + 1)];\n    strcpy(name, n);\n    tours = nT;\n    members = nM;\n}\n\nMSquad(const MSquad &amp;toCopy){\n    copy(toCopy);   \n}\n~MSquad(){\n    delete [] name;\n}\n\nconst MSquad &amp;operator=(const MSquad &amp;right){\n    if(&amp;right != this){ // avoiding self- assignment\n        delete [] name;\n        copy(right);\n    }\n\n    return *this;\n}\n\nMSquad &amp;operator+(const MSquad &amp;right) const{\n\n    members = members + right.members;\n    if(right.members &gt; members){\n        name = new char[strlen(right.name) + 1];\n        strcpy(name, right.name);\n        tours = right.tours;\n        //members = members + right.members;\n    }\n    return *this;\n\n}\n\nbool operator&gt;(const MSquad &amp;right){\n    return members &gt; right.members;\n}\n\nbool operator&lt;(const MSquad &amp;right){\n    return members &lt; right.members;\n}\n\nfriend ostream &amp;operator&lt;&lt;(ostream &amp;output, const MSquad &amp;right);\nfriend void mostMembers(MSquad *squads, int size);\n\n\n};\n\nostream &amp;operator&lt;&lt;(ostream &amp;output, const MSquad &amp;right){\noutput &lt;&lt; \"Name: \" &lt;&lt; right.name;\noutput &lt;&lt; \" Tours: \" &lt;&lt; right.tours;\noutput &lt;&lt; \" Members: \" &lt;&lt; right.members &lt;&lt; endl;\nreturn output;\n}\nvoid mostMembers(MSquad squads[], int size){\nint max = squads[0].members;\nint j = 0;\nfor(int i = 1; i &lt; size; i++){\n    if(squads[i].members &gt;= max){\n        max = squads[i].members;\n        j = i;\n    }\n}\n\ncout &lt;&lt; \"The max number of members is in squad in: \" &lt;&lt; squads[j] &lt;&lt; endl;\n}\n\n\nint main()\n{               \nMSquad squads[3];\nMSquad s;\nfor (int i=0;i&lt;3;i++)\n{\n    char name[100];\n    int tours;\n    int members;\n    cin&gt;&gt;name;\n    cin&gt;&gt;tours;\n    cin&gt;&gt;members;       \n    squads[i] = MSquad(name, tours, members);\n\n}\n\ns = squads[0] + squads[1];\ncout&lt;&lt;s;\n\nmostMembers(squads, 3);\n\nreturn 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "mysql", "sql", "visual-studio", "visual-studio-2015"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6105882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf48ce5a8d1cc2c79e7dd38ef747a14?s=128&d=identicon&r=PG&f=1", "display_name": "tomasvc", "link": "https://stackoverflow.com/users/6105882/tomasvc"}, "edited": false, "score": 0, "creation_date": 1459159774, "post_id": 36187292, "comment_id": 60148504, "body": "Thanks for the reply. I tried this and had the same problem as before: the row is added to the table, but it still displays a blank error message and stops code after adding"}], "tags": [], "owner": {"reputation": 1437, "user_id": 4685116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdca5.jpg?s=128&g=1", "display_name": "Ing. Gerardo S&#225;nchez", "link": "https://stackoverflow.com/users/4685116/ing-gerardo-s%c3%a1nchez"}, "is_accepted": false, "score": 0, "last_activity_date": 1458762094, "creation_date": 1458762094, "answer_id": 36187292, "question_id": 36186131, "link": "https://stackoverflow.com/questions/36186131/c-executequery-error-displaying-mysql-data-from-table/36187292#36187292", "title": "C++ executeQuery() error displaying MySQL data from table", "body": "<p>Check this:</p>\n\n<p>in line:</p>\n\n<pre><code>res = stmt-&gt;executeQuery(\"INSERT INTO \"+ table +\"(Brand, Model, Power, `Last Used`,`# Times Used`) VALUES('Ferrari','Modena','500','Never',0)\");\n</code></pre>\n\n<p>You are making a wrong string concatenation, that + (plus) operator don't work that way, that code don't concatenate strings, instead is adding pointers.</p>\n\n<p>Just simply replace this way and try again:</p>\n\n<pre><code>#define TABLE \"tbex\"// put this in top of cpp file\n......\nres = stmt-&gt;executeQuery(\"INSERT INTO \" TABLE \"(Brand, Model, Power, `Last Used`\n,`# Times Used`) VALUES('Ferrari','Modena','500','Never',0)\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 686, "user_id": 7449489, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MkKo5.jpg?s=128&g=1", "display_name": "JCollier", "link": "https://stackoverflow.com/users/7449489/jcollier"}, "is_accepted": false, "score": 0, "last_activity_date": 1519335077, "last_edit_date": 1519335077, "creation_date": 1519334342, "answer_id": 48937353, "question_id": 36186131, "link": "https://stackoverflow.com/questions/36186131/c-executequery-error-displaying-mysql-data-from-table/48937353#48937353", "title": "C++ executeQuery() error displaying MySQL data from table", "body": "<p>An INSERT is not a query. Try using executeUpdate() instead of executeQuery(). </p>\n\n<p>Replace this line</p>\n\n<pre><code>res = stmt-&gt;executeQuery(\"INSERT INTO \"+ table +\"(Brand, Model, Power, `Last Used`,`# Times Used`) VALUES('Ferrari','Modena','500','Never',0)\"); \n</code></pre>\n\n<p>with the following lines (you may need an additional .h file):</p>\n\n<pre><code>sql::PreparedStatement *pstmt;\n\npstmt = con-&gt;prepareStatement(\"INSERT INTO \"+ table +\"(Brand, Model, Power, `Last Used`,`# Times Used`) VALUES('Ferrari','Modena','500','Never',0)\");\nres = pstmt-&gt;executeUpdate();\ndelete pstmt;\n</code></pre>\n\n<p>Look at the official MySQL example <a href=\"https://dev.mysql.com/doc/connector-cpp/en/connector-cpp-examples-complete-example-2.html\" rel=\"nofollow noreferrer\">here</a> for an example of the concept.</p>\n\n<p>You may also try using execute(), as shown in <a href=\"https://stackoverflow.com/questions/27480741/which-execute-function-should-i-use-in-mysql-connector-c\">this</a> Stackoverflow question. The function execute() is used for generic SQL commands, but may not be as verbose in its return value as more specified functions (it returns a boolean).</p>\n"}], "owner": {"reputation": 41, "user_id": 6105882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7cf48ce5a8d1cc2c79e7dd38ef747a14?s=128&d=identicon&r=PG&f=1", "display_name": "tomasvc", "link": "https://stackoverflow.com/users/6105882/tomasvc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1791, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1519335077, "creation_date": 1458758029, "last_edit_date": 1458759912, "question_id": 36186131, "link": "https://stackoverflow.com/questions/36186131/c-executequery-error-displaying-mysql-data-from-table", "title": "C++ executeQuery() error displaying MySQL data from table", "body": "<p>I need some help. I had this code (below), to add data to a MySQL table and then return that same table. The code is doing fine, when I run it it adds the column to the MySQL table BUT it stops, with the error:</p>\n\n<pre><code>SQL error. Error message: \n</code></pre>\n\n<p>Literally blank. If I use a <code>SELECT</code> statement rather than an <code>INCLUDE</code> one in <code>executeQuery()</code>, it runs with no problem and no error message, just displays my table (or parts of it). What am I missing?</p>\n\n<p>I am using Visual Studios 2015, and MySQL Server.</p>\n\n<p>The end-goal is to connect an API with an SQL table using C++, to record data according to a specific timespan. This is one of the first steps, just to make sure that I can link MySQL with C++ properly.</p>\n\n<p>Sorry if this post is poorly written, first time here and definitely not an experienced programmer... Also, I looked into other threads, but as this is so specific I could not find them helpful.</p>\n\n<pre><code>// Standard C++ includes\n#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;string&gt;\nusing namespace std;\n\n// Include the Connector/C++ headers\n#include \"cppconn/driver.h\"\n#include \"cppconn/exception.h\"\n#include \"cppconn/resultset.h\"\n#include \"cppconn/statement.h\"\n\n// Link to the Connector/C++ library\n#pragma comment(lib, \"mysqlcppconn.lib\")\n\n// Specify our connection target and credentials\nconst string server = \"127.0.0.1:3306\";\nconst string username = \"root\";\nconst string password = \"root\";\nconst string database = \"dbex\"; \nconst string table = \"tbex\";\n\nint main()\n{\n    sql::Driver     *driver; // Create a pointer to a MySQL driver object\n    sql::Connection *dbConn; // Create a pointer to a database connection object\n    sql::Statement  *stmt;   // Create a pointer to a Statement object to hold our SQL commands\n    sql::ResultSet  *res;    // Create a pointer to a ResultSet object to hold the results of any queries we run\n\n                             // Try to get a driver to use to connect to our DBMS\n    try\n    {\n        driver = get_driver_instance();\n    }\n    catch (sql::SQLException e)\n    {\n        cout &lt;&lt; \"Could not get a database driver. Error message: \" &lt;&lt; e.what() &lt;&lt; endl;\n        system(\"pause\");\n        exit(1);\n    }\n\n    // Try to connect to the DBMS server\n    try\n    {\n        dbConn = driver-&gt;connect(server, username, password);\n        dbConn-&gt;setSchema(database);\n    }\n    catch (sql::SQLException e)\n    {\n        cout &lt;&lt; \"Could not connect to database. Error message: \" &lt;&lt; e.what() &lt;&lt; endl;\n        system(\"pause\");\n        exit(1);\n    }\n    stmt = dbConn-&gt;createStatement();\n\n    // Try to query the database\n    try\n    {\n        //stmt-&gt;execute(\"USE \" + database);              // Select which database to use. Notice that we use \"execute\" to perform a command.\n        res = stmt-&gt;executeQuery(\"INSERT INTO \"+ table +\"(Brand, Model, Power, `Last Used`,`# Times Used`) VALUES('Ferrari','Modena','500','Never',0)\"); \n        res = stmt-&gt;executeQuery(\"SELECT * FROM cars\"); // Perform a query and get the results. Notice that we use \"executeQuery\" to get results back\n\n    }\n    catch (sql::SQLException e)\n    {\n        cout &lt;&lt; \"SQL error. Error message: \" &lt;&lt; e.what() &lt;&lt; endl;\n        system(\"pause\");\n        exit(1);\n    }\n\n// While there are still results (i.e. rows/records) in our result set...\n    while (res-&gt;next())\n    {\n        cout &lt;&lt; res-&gt;getString(1) &lt;&lt; endl;\n    }\n\n    delete res;\n    delete stmt;\n    delete dbConn;\n\n    system(\"pause\");\n    return 0;\n}\n</code></pre>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["c++", "header"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1458758015, "post_id": 36185960, "comment_id": 60007446, "body": "Are you asking that if all they have is the header file can they still use the class if the implementation is in a separate cpp file?"}], "answers": [{"tags": [], "owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "is_accepted": false, "score": 0, "last_activity_date": 1458758219, "creation_date": 1458758219, "answer_id": 36186177, "question_id": 36185960, "link": "https://stackoverflow.com/questions/36185960/about-cpp-files-and-headers/36186177#36186177", "title": "About CPP Files and Headers", "body": "<p>If the implementation of these functions is  inside the CPP file no they can't.\nIf the header file .h or .hpp contains the definition and implementation then yes they can. </p>\n"}, {"tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 0, "last_activity_date": 1458758307, "creation_date": 1458758307, "answer_id": 36186196, "question_id": 36185960, "link": "https://stackoverflow.com/questions/36185960/about-cpp-files-and-headers/36186196#36186196", "title": "About CPP Files and Headers", "body": "<blockquote>\n  <p>Can other people use any class member function we've defined even if they don't have our cpp file? </p>\n</blockquote>\n\n<p>Yes, as long you deliver a library containing your compiled <code>.cpp</code> file, and it fits for their compiler ABI, they will be able to use your code even without needing to compile the <code>.cpp</code> files themselves.</p>\n"}, {"tags": [], "owner": {"reputation": 165, "user_id": 4576878, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GwsIu.png?s=128&g=1", "display_name": "Steadybox", "link": "https://stackoverflow.com/users/4576878/steadybox"}, "is_accepted": false, "score": 0, "last_activity_date": 1458759491, "last_edit_date": 1458759491, "creation_date": 1458758616, "answer_id": 36186293, "question_id": 36185960, "link": "https://stackoverflow.com/questions/36185960/about-cpp-files-and-headers/36186293#36186293", "title": "About CPP Files and Headers", "body": "<p>Yes they can, if you build a library, and distribute it with your headers. People can then link to your library to use the functions and classes declared in your header files. The library will contain the code from your cpp files in binary, and the headers will guide the users' compilers on how to call the code in the library.</p>\n\n<p>Here's documentation for Windows, and a tutorial for Linux:<br>\n<a href=\"https://msdn.microsoft.com/en-us/library/ms235636.aspx\" rel=\"nofollow\">https://msdn.microsoft.com/en-us/library/ms235636.aspx</a><br>\n<a href=\"http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html\" rel=\"nofollow\">http://www.yolinux.com/TUTORIALS/LibraryArchives-StaticAndDynamic.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "is_accepted": true, "score": 1, "last_activity_date": 1458760722, "creation_date": 1458760722, "answer_id": 36186898, "question_id": 36185960, "link": "https://stackoverflow.com/questions/36185960/about-cpp-files-and-headers/36186898#36186898", "title": "About CPP Files and Headers", "body": "<p>The C++ language standard says nothing about how code is or should be physically distributed in files, if, indeed, the code <em>is</em> stored in files.</p>\n\n<p>In particular the standard library headers are not necessarily physical files, even if most implementations provide these headers as files.</p>\n\n<p>Implementation files and header files are a convention, but only that, for physical packaging of code, with header files designed for inclusion via preprocessor <code>#include</code> directives, and implementation files designed for separate compilation. Usually an implementation file, like a .cpp file, therefore corresponds to a <em>translation unit</em> in the standard. But in some cases other physical source code packaging ideas are used, e.g. implementation files designed for inclusion in other implementation files.</p>\n\n<p>The implementation of a function can be placed in an implementation file or in a header file, or e.g. in a database, the standard doesn't care. However, due to the way source code files are intended to be used, if the implementation is placed in a header file, and is not a template, then it should be <code>inline</code> so that it can occur in two or more translation units where that header is included. If the implementation-in-a-header is directly within a class definition then it's automatically <code>inline</code>, and otherwise it needs to be explicitly declared <code>inline</code>.</p>\n\n<p>Now, if a user has the implementation source code, then the function can presumably be used.</p>\n\n<p>Likewise, if the user has a declaration of the function plus a suitable compiled version, then likewise it can be used.</p>\n\n<p>If the user doesn't have source or compiled version of the implementation, then it cannot be used.</p>\n\n<p>So, this does not have very much to do with the files. But there is the aspect of whether you can distribute code without implementation files. And as discussed above, yes, you can, and that's often called <strong>header only modules</strong>.</p>\n\n<p>Mainly, header only modules can do everything that ordinary separately compiled code can do, with one exception: they can't provide a &ldquo;compiler firewall&rdquo; to contain the symbols provided by a header.</p>\n\n<p>And this leads to two main problems: (1) pollution of namespaces, and (2) inability to provide (without rewriting and awkward solutions) two modules whose implementations depend on each others declarations.</p>\n\n<p>However, much code is distributed as header only modules. In particular large parts of the Boost library are header only modules. The main advantage is that for use of these parts there's no complication of building the library or fitting separately compiled code built with different options, etc.</p>\n"}], "owner": {"reputation": 1, "user_id": 4664694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205908684178563/picture?type=large", "display_name": "VEL ON AIR", "link": "https://stackoverflow.com/users/4664694/vel-on-air"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 36186898, "answer_count": 4, "score": 0, "last_activity_date": 1459101173, "creation_date": 1458757552, "question_id": 36185960, "link": "https://stackoverflow.com/questions/36185960/about-cpp-files-and-headers", "title": "About CPP Files and Headers", "body": "<p>I'm learning C++ nowadays. Here is my question:\nCan other people use any class member function we've defined even if they don't have our cpp file ? Detailed answers will be better. Thanks.</p>\n"}, {"tags": ["c++", "boost", "boost-hana"], "answers": [{"comments": [{"owner": {"reputation": 2976, "user_id": 627587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b7225df5b0728daa170646a5c5a4bfda?s=128&d=identicon&r=PG", "display_name": "Louis Dionne", "link": "https://stackoverflow.com/users/627587/louis-dionne"}, "edited": false, "score": 4, "creation_date": 1458824322, "post_id": 36191101, "comment_id": 60034804, "body": "This is the correct answer, but be warned that <code>decltype(hana::make_map(...))</code> is an ugly beast: you can&#39;t use pattern matching on it, and you shouldn&#39;t expect two equal maps to have the same type (because ordering does not matter for maps)."}], "tags": [], "owner": {"reputation": 1567, "user_id": 800347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Buq1.jpg?s=128&g=1", "display_name": "Jason Rice", "link": "https://stackoverflow.com/users/800347/jason-rice"}, "is_accepted": true, "score": 3, "last_activity_date": 1458778808, "last_edit_date": 1458778808, "creation_date": 1458778461, "answer_id": 36191101, "question_id": 36185951, "link": "https://stackoverflow.com/questions/36185951/is-there-a-way-to-obtain-the-map-type/36191101#36191101", "title": "Is there a way to obtain the map type?", "body": "<p>If you really need the type beforehand here are two possible solutions:</p>\n\n<ol>\n<li><p>You could simply wrap the same expression in <code>decltype</code>.</p>\n\n<pre><code>using MyMap = decltype(hana::make_map(\n    hana::make_pair(hana::type_c&lt;int&gt;, 2),\n    hana::make_pair(hana::type_c&lt;char const*&gt;, \"hi\"),\n    hana::make_pair(hana::type_c&lt;double&gt;, 3.0)\n));\n</code></pre></li>\n<li><p>For your use case of using the same type as the key, you could make a simple type alias template.</p>\n\n<pre><code>template &lt;typename ...T&gt;\nusing type_map_t = decltype(hana::make_map(hana::make_pair(hana::type_c&lt;T&gt;, std::declval&lt;T&gt;())...));\n\nusing MyMap = type_map_t&lt;int, char const*, double&gt;;\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 2178, "user_id": 104104, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e4c9652e58d33f02977db1ef0979e6d1?s=128&d=identicon&r=PG", "display_name": "chila", "link": "https://stackoverflow.com/users/104104/chila"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "accepted_answer_id": 36191101, "answer_count": 1, "score": 1, "last_activity_date": 1463624693, "creation_date": 1458757529, "last_edit_date": 1463624693, "question_id": 36185951, "link": "https://stackoverflow.com/questions/36185951/is-there-a-way-to-obtain-the-map-type", "title": "Is there a way to obtain the map type?", "body": "<p>I have the following code:</p>\n\n<pre><code>auto myMap = hana::make_map(\n    hana::make_pair(hana::type_c&lt;int&gt;, 2),\n    hana::make_pair(hana::type_c&lt;char const*&gt;, \"hi\"),\n    hana::make_pair(hana::type_c&lt;double&gt;, 3.0)\n);\n</code></pre>\n\n<p>Is there a way to know the type of 'myMap' beforehand? I try it with:</p>\n\n<pre><code>using MyMap = hana::map&lt;hana::pair&lt;hana::type&lt;int&gt;, int&gt;, ...&gt;; \n</code></pre>\n\n<p>but it fails because decltype(myMap) is hana::map&lt; implementation-defined >. Is there a kind of 'result_of' metafunction that would give the imp-defined type? Like: </p>\n\n<pre><code>using MyMap = typename hana::result_of_map&lt;hana::pair&lt;hana::type&lt;int&gt;, int&gt;, ...&gt;::type;\n</code></pre>\n\n<p>I need the type to store a class member map. </p>\n"}, {"tags": ["c++", "boost", "visual-studio-2015", "directory", "win-universal-app"], "comments": [{"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1458758399, "post_id": 36185925, "comment_id": 60007672, "body": "Including a single boost header like that is probably not what you want. It will try to include other boost headers like this: <code>#include &lt;boost&#47;filesystem&#47;config.hpp&gt;</code> which won&#39;t work, unless boost is in your include path already."}, {"owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1458758476, "post_id": 36185925, "comment_id": 60007711, "body": "Boost is in my include path :) and I attempted to just use specific headers such as path.hpp but I&#39;m still getting the same error."}, {"owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1458758819, "post_id": 36185925, "comment_id": 60007893, "body": "@melak47 to verify that they were added correctly lol, I realize if it wasn&#39;t I would get an error for it but since I couldn&#39;t understand why it wasn&#39;t working I tried the full path as well as your suggestion both produce the same result. And these are most certainly the only errors."}, {"owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1458766030, "post_id": 36185925, "comment_id": 60012011, "body": "I&#39;ve checked every thing including the boost header in question (path.hpp) I&#39;ve found no issues, and continue to get those two errors. That being said I&#39;ve found that by default universal windows apps import various windows namespaces at this point and due to the fact that I&#39;ve tested this same code in other compilers and general win 32 projects it seems that one of the said namespaces is conflicting... Because this code works every where else"}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1458771279, "post_id": 36185925, "comment_id": 60014522, "body": "Sorry, I entirely missed the bit about this being a <i>Universal App</i>. Universal apps use Microsoft&#39;s C++/CX, and <code>generic</code> happens to be a keyword there. You could probably keep &quot;problematic&quot; (standard compliant ._.) code like this gated behind a plain Win32 C++ static library that doesn&#39;t drag it into it&#39;s headers. On a different note, using Boost.Filesystem in a universal app means it probably won&#39;t work universally :)"}, {"owner": {"reputation": 11321, "user_id": 4184842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9mD03.jpg?s=128&g=1", "display_name": "Peter Torr - MSFT", "link": "https://stackoverflow.com/users/4184842/peter-torr-msft"}, "edited": false, "score": 0, "creation_date": 1458800289, "post_id": 36185925, "comment_id": 60022549, "body": "Compiler issues notwithstanding, you shouldn&#39;t have write access to that folder unless you&#39;ve changed the ACLs on the filesystem."}], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "is_accepted": false, "score": 0, "last_activity_date": 1458771719, "creation_date": 1458771719, "answer_id": 36189819, "question_id": 36185925, "link": "https://stackoverflow.com/questions/36185925/issues-creating-folder-using-boostfilesystem/36189819#36189819", "title": "Issues creating folder using boost::filesystem", "body": "<p>@melak47 </p>\n\n<blockquote>\n  <p>Sorry, I entirely missed the bit about this being a Universal App. Universal apps use Microsoft's C++/CX, and generic happens to be a keyword there. You could probably keep \"problematic\" (standard compliant ._.) code like this gated behind a plain Win32 C++ static library that doesn't drag it into it's headers. On a different note, using Boost.Filesystem in a universal app means it probably won't work universally :) </p>\n</blockquote>\n\n<p>Problem was resolved</p>\n\n<p>I was able to \" gate it \" and fix it! Yeah haha I know it wouldn't work universally I was just messing around with it I don't really develop for windows that often figured I'd give it a shot. </p>\n"}], "owner": {"reputation": 855, "user_id": 5544609, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a133bdaa505d7ebb4f87707681c61cd?s=128&d=identicon&r=PG&f=1", "display_name": "suroh", "link": "https://stackoverflow.com/users/5544609/suroh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 851, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458771719, "creation_date": 1458757430, "last_edit_date": 1458759720, "question_id": 36185925, "link": "https://stackoverflow.com/questions/36185925/issues-creating-folder-using-boostfilesystem", "title": "Issues creating folder using boost::filesystem", "body": "<p>I'm attempting to create a folder using boost how ever when compiled I get the following errors.</p>\n\n<pre><code>1&gt;c:\\program files (x86)\\boost_1_60_0\\boost\\filesystem\\path.hpp(458):error C2059: syntax error: 'generic'\n\n1&gt;c:\\program files (x86)\\boost_1_60_0\\boost\\filesystem\\path.hpp(459): error C2334: unexpected token(s) preceding '{'; skipping apparent function body\n</code></pre>\n\n<p>The above errors mention path.hpp so I'm wondering if it's an issue with the header or my code?</p>\n\n<pre><code>#include \"pch.h\"\n#include \"Information.h\" \n#include &lt;iostream&gt; // forgot to include this when I typed up the question\n#include \"boost\\filesystem.hpp\"\n\nUser::User() // Constructor\n{\n\n}\n\nUser::~User() // Destructor\n{\n\n}\n\n\nvoid User::Setup() \n{\n    boost::filesystem::path Dir(\"C:\\\\Users\\\\Public\\\\Documents\\\\Temp\\\\Private\\\\\");\n    if(boost::filesystem::create_directories(Dir))\n    {\n       std::cout &lt;&lt; \"Sucess: \" &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>The program is being worked on in visual studio 2015 as an universal windows app targeting windows 10. The paths for boost were correctly added to additional include directories and linker path etc..</p>\n"}, {"tags": ["c++", "linux", "memory", "memory-management"], "comments": [{"owner": {"reputation": 1047, "user_id": 2101084, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/huVYh.jpg?s=128&g=1", "display_name": "LibertyPaul", "link": "https://stackoverflow.com/users/2101084/libertypaul"}, "edited": false, "score": 0, "creation_date": 1458820025, "post_id": 36185783, "comment_id": 60032120, "body": "It&#39;s not C++. You should read about new/delete, std::vector, const, RTTI-style casts, etc."}, {"owner": {"reputation": 65, "user_id": 3196464, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186937619/picture?type=large", "display_name": "gud&#233;", "link": "https://stackoverflow.com/users/3196464/gud%c3%a9"}, "reply_to_user": {"reputation": 1047, "user_id": 2101084, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/huVYh.jpg?s=128&g=1", "display_name": "LibertyPaul", "link": "https://stackoverflow.com/users/2101084/libertypaul"}, "edited": false, "score": 0, "creation_date": 1458829073, "post_id": 36185783, "comment_id": 60038067, "body": "Actually this function is the only part of the code where I am using pure C. I am using a lot of vectors haha"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3196464, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186937619/picture?type=large", "display_name": "gud&#233;", "link": "https://stackoverflow.com/users/3196464/gud%c3%a9"}, "edited": false, "score": 0, "creation_date": 1458758273, "post_id": 36185918, "comment_id": 60007603, "body": "Thanks @DarkFalcon, I guess I will try to use this Valgrind massif. I should report the results."}], "tags": [], "owner": {"reputation": 41122, "user_id": 2101267, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/06383b51463f855d7cc0f07d4566bd42?s=128&d=identicon&r=PG", "display_name": "Dark Falcon", "link": "https://stackoverflow.com/users/2101267/dark-falcon"}, "is_accepted": false, "score": 0, "last_activity_date": 1458757724, "last_edit_date": 1458757724, "creation_date": 1458757417, "answer_id": 36185918, "question_id": 36185783, "link": "https://stackoverflow.com/questions/36185783/linux-proc-self-statm-is-it-trustable/36185918#36185918", "title": "Linux: /proc/self/statm is it trustable?", "body": "<p><a href=\"http://valgrind.org/docs/manual/ms-manual.html\" rel=\"nofollow\">massif</a> is fairly good at tracking down memory usage in the general case. I would recommend it in conjunction with <a href=\"https://projects.kde.org/massif-visualizer\" rel=\"nofollow\">massif-visualizer</a></p>\n\n<p>Regarding the 0's, keep in mind that this is <strong>OS</strong> memory. Most likely your code is not allocating directly from the OS, but from an allocator in a standard library (such as the default <code>malloc</code> allocator in the standard C library). These allocate large blocks from the OS and then split them up to fulfill allocation requests. If there was enough free space in an existing block to satisfy the allocation request, no more blocks are requested. Things get more complicated if multiple threads are involved.</p>\n\n<p>More fine-grained tracking than what is in <code>proc</code> would require you to tell us the programming language and allocation mechanisms used. Most allocators provide these stats somewhere. For example, GNU libc has <a href=\"http://www.gnu.org/software/libc/manual/html_node/Statistics-of-Malloc.html\" rel=\"nofollow\"><code>mallinfo</code></a>.</p>\n"}], "owner": {"reputation": 65, "user_id": 3196464, "user_type": "registered", "profile_image": "https://graph.facebook.com/1186937619/picture?type=large", "display_name": "gud&#233;", "link": "https://stackoverflow.com/users/3196464/gud%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1281, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1458819171, "creation_date": 1458757060, "last_edit_date": 1458819171, "question_id": 36185783, "link": "https://stackoverflow.com/questions/36185783/linux-proc-self-statm-is-it-trustable", "title": "Linux: /proc/self/statm is it trustable?", "body": "<p>My main task is to find out how much memory a process is using to do different things. I am reading the RSS from statm file before and after doing something, then I subtract this two values to know how much memory the process is using to do this something.</p>\n\n<p>For example, in <a href=\"http://i.stack.imgur.com/0lwC7.png\" rel=\"nofollow\">this picture</a> you will see the memory I measured to multiply sparse matrices of different sizes and densities. Notice how odd it is that matrices of size 100x100,200x200 and 300x300 take nothing into consideration on the RSS increase. A bunch of other stuff I am doing I am also getting odd zeros. Am I missing something here? Am I measuring the memory the wrong way? Please fell free to point out any better way you know to measure memory usage by piece of code.</p>\n\n<p>I tried using rgetusage that brings the peak usage by the process and it seems worst.</p>\n\n<p><strong>EDIT:</strong> I am coding on C++. I am allocating the matrices outside of main with a function using malloc:</p>\n\n<pre><code>    int **createMatrix(int N, int M)\n{\n    int i, **table;\n    table = (int**)malloc(N*sizeof(int *));\n    for(i = 0 ; i &lt; N ; i++)\n        table[i] = (int*)malloc( M*sizeof(int) );\n    return table;\n}\n</code></pre>\n"}, {"tags": ["c++", "pointers"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1458757898, "post_id": 36185466, "comment_id": 60007358, "body": "This code demonstrates undefined behaviour due to strict aliasing rule violation, and this is probably the only thing you need to know about it."}], "answers": [{"comments": [{"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "edited": false, "score": 1, "creation_date": 1458756622, "post_id": 36185550, "comment_id": 60006611, "body": "I&#39;ve edited to suggest it&#39;s probably an optimised attempt to pull out the mantissa and/or exponent. Float to int conversions are expensive (you know, in relative terms) but supposing you knew that your value was always in the range 0 to 1, i.e. you already know the exponent, you might want to just grab the mantissa directly as bits to formulate your int. Classic example is on-CPU image manipulation: if all your colours start as numbers in [0.0, 1.0) then usually your output is also [0.0, 1.0) but you need to send integer bytes off to the graphics card."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 2, "creation_date": 1458757853, "post_id": 36185550, "comment_id": 60007333, "body": "The one thing you didn&#39;t mention is that code is undefined behaviour due to violation of strict aliasing rule."}, {"owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458759307, "post_id": 36185550, "comment_id": 60008176, "body": "@SergeyA indeed, and I don&#39;t feel fully qualified to make a suitable edit. From C99, 6.2.7 defines compatible types so as not to include int and float, and 6.5.16 enforces the need for compatible pointed-to types in pointer assignment, but only with an assignment operator in the mix. I&#39;m having difficulty finding the final link to show that the same rules apply when there&#39;s no temporary assignment in the middle. So I&#39;ve marked as community wiki. Please dive in."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 1, "creation_date": 1458759754, "post_id": 36185550, "comment_id": 60008416, "body": "first things first. The tag is C++, so C99 does not apply. C++ doesn&#39;t have a concept of <i>compatible type</i>, and 3.10 / 10 applies."}], "tags": [], "owner": {"reputation": 97034, "user_id": 427332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e11b58e11decc7b4c352d3ac3b2d0b90?s=128&d=identicon&r=PG", "display_name": "Tommy", "link": "https://stackoverflow.com/users/427332/tommy"}, "is_accepted": true, "score": 10, "last_activity_date": 1458759070, "last_edit_date": 1458759070, "creation_date": 1458756307, "answer_id": 36185550, "question_id": 36185466, "link": "https://stackoverflow.com/questions/36185466/what-does-this-mean-intx-when-typecasting/36185550#36185550", "title": "what does this mean *(int*)&amp;x when typecasting?", "body": "<p><code>&amp;a</code> takes the address of <code>a</code>, a float; <code>(int *)</code> keeps the same address but tells the compiler now to pretend that an <code>int</code> is stored there; <code>int i = *</code> then loads the <code>int</code> from that address.</p>\n\n<p>So you get* an integer with the same bit pattern as the float had. Floats and ints have very different encodings so you end up with a very different value.</p>\n\n<p>The float is likely to be formulated <a href=\"https://en.wikipedia.org/wiki/Single-precision_floating-point_format\" rel=\"nofollow\">like this</a> but it's not required; your architecture may do something else. Possibly the author is doing a platform-specific optimised version of <code>frexp</code>.</p>\n\n<p><code>int i = (int)x;</code> would simply convert the float to an int, giving you <code>16</code>.</p>\n"}], "owner": {"reputation": 93, "user_id": 3316177, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/c83n5.png?s=128&g=1", "display_name": "Shago", "link": "https://stackoverflow.com/users/3316177/shago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2000, "favorite_count": 2, "closed_date": 1458758851, "accepted_answer_id": 36185550, "answer_count": 1, "score": 1, "last_activity_date": 1458759070, "creation_date": 1458756051, "last_edit_date": 1458756417, "question_id": 36185466, "link": "https://stackoverflow.com/questions/36185466/what-does-this-mean-intx-when-typecasting", "closed_reason": "Duplicate", "title": "what does this mean *(int*)&amp;x when typecasting?", "body": "<p>I am looking an example code for invert <code>sqrt</code> used in quake.</p>\n\n<p>I see a variable of type float: <code>float x = 16;</code></p>\n\n<p>and then an <code>int</code> variable takes the value of this expression: <code>int i = *(int*)&amp;a;</code></p>\n\n<p>The way I understand it(from right to left) is that it takes the address of the variable <code>a</code>, typecasts it in to an integer pointer and then takes the value of that pointer and assigns it to <code>i</code>.</p>\n\n<p>when I output the variable <code>i</code> in the console it's a big integer value.\ncan someone explain more in dept of what is going on here please ?</p>\n\n<p>because I expected the variable <code>i</code> to be <code>16</code>.</p>\n"}, {"tags": ["c++", "string", "file", "whitespace", "getline"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458756261, "post_id": 36185457, "comment_id": 60006387, "body": "<a href=\"http://stackoverflow.com/questions/23047052/why-does-reading-a-record-struct-fields-from-stdistream-fail-and-how-can-i-fi\">Heavily related</a>."}, {"owner": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 1, "creation_date": 1458756564, "post_id": 36185457, "comment_id": 60006582, "body": "<code>std::getline</code> can use a custom delimiter, those <code>;</code> look like they might come in handy :)"}, {"owner": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "edited": false, "score": 0, "creation_date": 1458756648, "post_id": 36185457, "comment_id": 60006628, "body": "Very similar problem indeed. But I didn&#39;t understand what the solution was. I don&#39;t want to use more than one string for the name becase it can has a variable amount of words. Also, rearranging the file is not an option."}, {"owner": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1458756921, "post_id": 36185457, "comment_id": 60006785, "body": "@melak47 Thanks! I just checked the full syntax for it and I&#39;ll give it a try with the delimiter."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458757381, "post_id": 36185457, "comment_id": 60007050, "body": "@DanielMarques <i>&quot;Very similar problem indeed. But I didn&#39;t understand what the solution was.&quot;</i> There wasn&#39;t/isn&#39;t <i>the solution</i>, but <a href=\"http://stackoverflow.com/a/23070803/1413395\">my answer for using delimited input</a> goes best in the direction you need."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1458757555, "post_id": 36185457, "comment_id": 60007153, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/1120140/how-can-i-read-and-parse-csv-files-in-c?s=1|3.1427\">How can I read and parse CSV files in C++?</a>"}, {"owner": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "reply_to_user": {"reputation": 4622, "user_id": 996886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/lSuAl.png?s=128&g=1", "display_name": "melak47", "link": "https://stackoverflow.com/users/996886/melak47"}, "edited": false, "score": 0, "creation_date": 1458761221, "post_id": 36185457, "comment_id": 60009374, "body": "@melak47  I tried getline() with the delimiter but it didn&#39;t work. I&#39;m sorry, I&#39;m new, but can any of you please explain how can I do this with them?"}], "answers": [{"tags": [], "owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "is_accepted": true, "score": 1, "last_activity_date": 1458766523, "creation_date": 1458766523, "answer_id": 36188508, "question_id": 36185457, "link": "https://stackoverflow.com/questions/36185457/c-cin-with-white-spaces-to-strings-without-getline-function/36188508#36188508", "title": "C++: cin with white spaces to strings without getline function", "body": "<p>As many others pointed out, you can use <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/getline\" rel=\"nofollow\">std::getline</a> to read chars till a delimiter.</p>\n\n<p>Consider this snippet of code as a starting point:</p>\n\n<pre><code>int age;\nstd::string name;\ndouble average;\n\n// ... Open the file which stores the data ... \n\n// then read every line. The loop stops if some of the reading operations fails\nwhile ( input &gt;&gt; age  &amp;&amp; \n        std::getline(input, name, ';')  &amp;&amp;        // consume the first ;\n        std::getline(input, name, ';')  &amp;&amp;        // read the name\n        input &gt;&gt; average ) {\n    // do whatever you need with the data read\n    cout &lt;&lt; \"age: \" &lt;&lt; age &lt;&lt; \" name: \" &lt;&lt; name &lt;&lt; \" average: \" &lt;&lt; average &lt;&lt; '\\n';\n}\n</code></pre>\n"}], "owner": {"reputation": 400, "user_id": 6105802, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/581adbbbee38dee312da6e7c6f12e56a?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Marques", "link": "https://stackoverflow.com/users/6105802/daniel-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1438, "favorite_count": 0, "accepted_answer_id": 36188508, "answer_count": 1, "score": 1, "last_activity_date": 1458766523, "creation_date": 1458756018, "last_edit_date": 1458756108, "question_id": 36185457, "link": "https://stackoverflow.com/questions/36185457/c-cin-with-white-spaces-to-strings-without-getline-function", "title": "C++: cin with white spaces to strings without getline function", "body": "<p>I am in the middle of a college project which kind of looks like a students' database.\nEach line of the text file follows this \"model\":</p>\n\n<pre><code> age ; full_name ; avg\n</code></pre>\n\n<p>I need to read the text file and store everything in a vector of structs and I could do that if the name was only one word.\nWell, obviously, age is an int, avg is a double, but what about the full name? \nI can't just use <code>file &gt;&gt; full_name;</code>, with full_name being a string because it would stop reading to it once it gets to a whitespace. The <code>getline()</code> function would store everything in one place so I am not sure what to do.</p>\n\n<p>Please share your knowlegde with this young mind x)</p>\n"}, {"tags": ["c++", "function", "templates"], "comments": [{"owner": {"reputation": 1727, "user_id": 5440453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3500f6dc5327b259bb48da3399268b0?s=128&d=identicon&r=PG&f=1", "display_name": "Algirdas Preid\u017eius", "link": "https://stackoverflow.com/users/5440453/algirdas-preid%c5%beius"}, "edited": false, "score": 0, "creation_date": 1458756098, "post_id": 36185346, "comment_id": 60006285, "body": "Search for: <i>function pointer</i>."}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 1, "creation_date": 1458756099, "post_id": 36185346, "comment_id": 60006286, "body": "Have you considered <a href=\"http://en.cppreference.com/w/cpp/utility/functional/function\" rel=\"nofollow noreferrer\"><code>std::function</code></a>?"}], "answers": [{"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": false, "score": 1, "last_activity_date": 1458756710, "last_edit_date": 1458756710, "creation_date": 1458756181, "answer_id": 36185498, "question_id": 36185346, "link": "https://stackoverflow.com/questions/36185346/function-passed-as-a-class-argument/36185498#36185498", "title": "Function passed as a class argument", "body": "<p>Yes, but you have to supply the type when you instantiate template classes.  The usual way to deal with this is to create a helper function:</p>\n\n<pre><code>template &lt; typename Fun &gt; struct operation_class \n{  \n    operation_class(Fun f) : fun{f} {}\n    Fun fun; \n};\ntemplate &lt; typename Fun &gt;\noperation_class&lt;Fun&gt; operation(Fun fun) { return operation_class&lt;Fun&gt;{fun}; }\n\nint main()\n{\n    auto op0 = operation(some_fun);\n    auto op1 = operation(some_functor{});\n}\n</code></pre>\n\n<p>Frankly though, you are better off just using lambda:</p>\n\n<pre><code>auto op0 = [a,b]() { return sum(a,b); };\nauto op1 = [a,b]() { return subtract{a,b}(); }\n\n// C++17:\nauto op2 = [op=subtract{a,b}] { return op(); };\n</code></pre>\n"}], "owner": {"reputation": 7585, "user_id": 884412, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/1ac6f71f76aaf92324224dfc30d4ee2e?s=128&d=identicon&r=PG", "display_name": "penelope", "link": "https://stackoverflow.com/users/884412/penelope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1458756710, "creation_date": 1458755640, "question_id": 36185346, "link": "https://stackoverflow.com/questions/36185346/function-passed-as-a-class-argument", "title": "Function passed as a class argument", "body": "<p>In C++, we can pass a function/functor to a function like so:</p>\n\n<pre><code>template &lt;typename F&gt;\nvoid doOperation(int a, int b, F f){\n    std::cout &lt;&lt; \"Result: \" &lt;&lt; f(a,b) &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>we can then use both functions and functors:</p>\n\n<pre><code>int add(const int &amp;a, const int &amp;b){ return a+b; }\nstruct subtract(){\n    void operator() (const int &amp;a, const int &amp;b) { return a-b; }\n};\n</code></pre>\n\n<p>and use it in the following manner:</p>\n\n<pre><code>doOperation(1,2,add);\ndoOperation(5,2,subtract());\n</code></pre>\n\n<p>My question is, can I do something similar with a class and <strong>pass a function as an argument to a class, store it and use it later</strong>? E.g.</p>\n\n<pre><code>template &lt;typename F&gt;\nclass doOperation{\n    public:\n       doOperation(int &amp;a, int &amp;b, F f) : a(a), b(b), f(f) {};\n   void setOperands(int &amp;a, int &amp;b) { this-&gt;a = a; this-&gt;b = b };\n   void performCalculation(){\n          std::cout &lt;&lt; \"Result: \" &lt;&lt; f(a,b) &lt;&lt; std::endl;\n       }\n    private:\n        int a,b;\n        F f;\n}\n</code></pre>\n\n<p>So that we may assign it a function once and then later use it:</p>\n\n<pre><code>doOperation summing(1,2,add);\nsumming.setOperands(2,3);\nsumming.performCalculation();\n\ndoOperation subtraction(7,3,subtract());\nsubtraction.performCalculation();\n</code></pre>\n\n<p>If my examples are valid, I would appreciate the explanation for the mechanics here as I seem to be getting a bit lost. In case I missed something, I am looking for hints on whether this can be achieved.</p>\n\n<p>Lastly, how would I then use such a <code>class doOperation</code> in other functions and classes. For example, would defining something like this inside a member function require me to template the new class, its member function, and how would it be declared and used:</p>\n\n<pre><code>class higherFunctionality{    \n public:\n     higherFunctionality() {...}\n\n     void coolThings(){\n        doOperation *myOperation = operationFactory( ... );\n        myOperation-&gt;setOperands(4,5);\n        myOperation-&gt;performCalculation();\n     }\n};\n</code></pre>\n"}, {"tags": ["c++", "qt", "object", "qml"], "comments": [{"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1458763987, "post_id": 36185225, "comment_id": 60010865, "body": "This is a private signal, you aren&#39;t supposed to be using it."}, {"owner": {"reputation": 1, "user_id": 6105560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d369b7a4d823f8bf3ff4c6c78348170e?s=128&d=identicon&r=PG&f=1", "display_name": "tearoomFlow", "link": "https://stackoverflow.com/users/6105560/tearoomflow"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1458764292, "post_id": 36185225, "comment_id": 60011048, "body": "Thank you for your quick response! Then what signal should I use to do an action when a child is added to my engine? And do you have any ideas why my children variable is not updated from qt view point but from c++ one yes?"}, {"owner": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1458765621, "post_id": 36185225, "comment_id": 60011832, "body": "Qt&#39;s internals are designed rather static and inflexible, you don&#39;t really have the option to change or tap into it. You could override it, but then who knows what you may break, all in all, it is not pretty. A better strategy is to alter your design to work around Qt&#39;s limitations. Have your own custom function for creating objects and emitting your custom signal to notify of that."}, {"owner": {"reputation": 1, "user_id": 6105560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d369b7a4d823f8bf3ff4c6c78348170e?s=128&d=identicon&r=PG&f=1", "display_name": "tearoomFlow", "link": "https://stackoverflow.com/users/6105560/tearoomflow"}, "reply_to_user": {"reputation": 44162, "user_id": 991484, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fc34739487a5e7e115acdbadf95c8fb3?s=128&d=identicon&r=PG", "display_name": "dtech", "link": "https://stackoverflow.com/users/991484/dtech"}, "edited": false, "score": 0, "creation_date": 1458767755, "post_id": 36185225, "comment_id": 60012932, "body": "Thank you, but so you are telling me onChildrenChanged should not be used directly in any qml code? What about children variable? Isn&#39;t it a reliable variable that can be used to know the children count of a parent at any point? (in my case it is not reliable since it does not change from the qml perspective) Anyway I will investigate a new design. I had the idea of keeping a List&lt;QObject *&gt; of children for the Engine class and have an associated signal linked to this list. Do you think it is a good idea? Do you have any ideas for my 3 others questions? (1,3 and 4)"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6105560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d369b7a4d823f8bf3ff4c6c78348170e?s=128&d=identicon&r=PG&f=1", "display_name": "tearoomFlow", "link": "https://stackoverflow.com/users/6105560/tearoomflow"}, "edited": false, "score": 0, "creation_date": 1459949556, "post_id": 36190002, "comment_id": 60518089, "body": "Thank you very much! Now it works :) I have now another problem: I want to create dynamically my CustObject but I want to use the beginCreate(QQmlContext *publicContext) of QQmlComponent. Indeed I want all my properties to be set before the onChildrenChanged is launched. Is there any way to use that function and at the same time using a custom component? Because for now on I only saw the use of that function by using loadUrl and qml object."}, {"owner": {"reputation": 4697, "user_id": 1005419, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5TtZm.jpg?s=128&g=1", "display_name": "Thomas McGuire", "link": "https://stackoverflow.com/users/1005419/thomas-mcguire"}, "reply_to_user": {"reputation": 1, "user_id": 6105560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d369b7a4d823f8bf3ff4c6c78348170e?s=128&d=identicon&r=PG&f=1", "display_name": "tearoomFlow", "link": "https://stackoverflow.com/users/6105560/tearoomflow"}, "edited": false, "score": 0, "creation_date": 1460311335, "post_id": 36190002, "comment_id": 60670566, "body": "I can&#39;t have a look at that at the moment, I suggest you ask a new question so that others can see it, you&#39;ll probably get some answers that way."}], "tags": [], "owner": {"reputation": 4697, "user_id": 1005419, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/5TtZm.jpg?s=128&g=1", "display_name": "Thomas McGuire", "link": "https://stackoverflow.com/users/1005419/thomas-mcguire"}, "is_accepted": false, "score": 6, "last_activity_date": 1458807168, "last_edit_date": 1458807168, "creation_date": 1458772469, "answer_id": 36190002, "question_id": 36185225, "link": "https://stackoverflow.com/questions/36185225/qt-onchildrenchanged-not-launched-when-qml-components-are-created-at-runtime-fr/36190002#36190002", "title": "Qt: onChildrenChanged not launched when QML components are created at runtime from C++ code", "body": "<blockquote>\n  <p>Why is the number of children incrementation not seen from qml (but visible from cpp)?</p>\n</blockquote>\n\n<p>QML doesn't use <code>QObject::children()</code>, instead it uses <a href=\"https://doc.qt.io/qt-5/qquickitem.html#childItems\" rel=\"nofollow\"><code>QQuickItem::childItems()</code></a>. Yes, that's right, there are two different list of children, one from <code>QObject</code>, and one from <code>QQuickItem</code>. Both serve different purposes: The one from QObject is mainly for memory management (children get deleted when parent gets deleted), while the one from QQuickItem is for the 'visual hierachy', e.g. children get drawn on top of their parent. More details are available in <a href=\"https://doc.qt.io/qt-5/qtquick-visualcanvas-visualparent.html\" rel=\"nofollow\">the docs</a>.</p>\n\n<blockquote>\n  <p>Why is onChildrenChanged not launched from qml?</p>\n</blockquote>\n\n<p>Because the <code>onChildrenChanged</code> is only emitted when <code>QQuickItem::childItems()</code> changes, which it doesn't. Call <code>setParentItem()</code> in addition to <code>setParent()</code> to fix that.</p>\n\n<blockquote>\n  <p>How can I add dynamically CustObject class (which is visible as a qml object from Project2 point of view since it is registered) instead of Dummy.qml?</p>\n</blockquote>\n\n<p>By simply creating the object yourself and setting the <code>parent</code> and <code>parentItem</code>. There is no need to use <code>QQmlComponent</code> here.</p>\n\n<pre><code>QObject childrenItem = new CustObject();\nchildrenItem-&gt;setParent(parentEntity);\nchildrenItem-&gt;setParentItem(parentEntity);\n</code></pre>\n\n<blockquote>\n  <p>How to read a property of a dynamically added object in C++ just after its creation (i.e. how to use QQMlProperty::read)?</p>\n</blockquote>\n\n<p>Calling <code>QQuickItem::childItems()</code> should do the trick, no need to read a property. FWIW, there probably was an <code>#include &lt;QQmlProperty&gt;</code> missing in the code that didn't work.</p>\n"}], "owner": {"reputation": 1, "user_id": 6105560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d369b7a4d823f8bf3ff4c6c78348170e?s=128&d=identicon&r=PG&f=1", "display_name": "tearoomFlow", "link": "https://stackoverflow.com/users/6105560/tearoomflow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458807168, "creation_date": 1458755199, "last_edit_date": 1458763695, "question_id": 36185225, "link": "https://stackoverflow.com/questions/36185225/qt-onchildrenchanged-not-launched-when-qml-components-are-created-at-runtime-fr", "title": "Qt: onChildrenChanged not launched when QML components are created at runtime from C++ code", "body": "<p>For a project, I need to create QML components at runtime from C++. </p>\n\n<p>My general architecture is the following:</p>\n\n<p>Project1:</p>\n\n<ul>\n<li>Engine.h </li>\n<li>Engine.cpp </li>\n<li>CustObject.h </li>\n<li>CustObject.cpp </li>\n<li>Plugin.h </li>\n<li>Plugin.cpp</li>\n<li>Dummy.qml</li>\n</ul>\n\n<p>Project2:</p>\n\n<ul>\n<li>main.cpp</li>\n<li>main.qml</li>\n</ul>\n\n<p>What I want to do is instantiate Engine.cpp as a QML object (possible since I registered it in the Plugin class and made it available to Project2) and then create dynamically CustObject instances (which are also registered to be used by Project2) from Engine. In the end I want that if I write:</p>\n\n<pre><code>ApplicationWindow{\nid: window\nvisible: true\n    Engine{\n        id: eng1\n        CustObject{\n            id: custObj1\n        }\n    }\n}\n</code></pre>\n\n<p>This will be the same as writing something like</p>\n\n<pre><code>ApplicationWindow {\n    id: window\n    visible: true\n\n    Button {\n        text: \"add new child\"\n        onClicked: {\n            console.log(\"QML: Number children before\", eng1.children.length);\n            eng1.addNewChildren();\n            console.log(\"QML: Number children after\", eng1.children.length);\n        }\n    }\n    Engine{\n        id: eng1\n        onChildrenChanged: console.log(\"Changed\")\n    }\n}\n</code></pre>\n\n<p>And I should see that the number of children is incremented and onChildrenChanged from eng1 should be launched.</p>\n\n<p>The problem is that neither the number of children is incremented, nor the signal onChildrenChanged is launched.</p>\n\n<p>I had also the other problem that in order to add a children to the parent, eng1 in my case, I used the function QQmlComponent(QQmlEngine *engine, const QUrl &amp;url, QObject *parent = 0) of QQMLComponent class. But I cannot find a way to transform my CustObject class into a QUrl since it is not a .qml file.</p>\n\n<p>Therefore I first tried to add a dummy qml object called: Dummy.qml instead of CustObject object. Dummy.qml looks like this:</p>\n\n<pre><code>import QtQuick 2.0\n\nItem {\n    property int nb: 1\n}\n</code></pre>\n\n<p>The code of my Engine class looks like this:</p>\n\n<p>Engine.h:</p>\n\n<pre><code>#ifndef ENGINE_H\n#define ENGINE_H\n\n#include &lt;QQuickItem&gt;\n#include &lt;QQmlComponent&gt;\n#include &lt;QQmlEngine&gt;\n#include &lt;QQmlContext&gt;\n\n\nclass Engine : public QQuickItem{\n    Q_OBJECT\npublic:\n    explicit Engine(QQuickItem* parent = 0);\n\n    virtual ~Engine();\n\n    Q_INVOKABLE QObject* addNewChildren();\n\n};\n\n#endif // ENGINE_H\n</code></pre>\n\n<p>Engine.cpp:</p>\n\n<pre><code>#include \"Engine.h\"\n\n\nEngine::Engine(QQuickItem* parent) :\n    QQuickItem(parent)\n{\n}\n\nEngine::~Engine(){ }\n\n\nQObject* Engine::addNewChildren(){\n\n    qDebug() &lt;&lt; \"CPP: Number children before \" &lt;&lt; this-&gt;children().size();\n\n    QObject* parentEntity = this;\n    QQmlComponent* childrenEntity;\n    QQmlComponent component(qmlEngine(this), QUrl(\"qrc:///src/Dummy.qml\"));\n    QQuickItem *childrenItem = qobject_cast&lt;QQuickItem*&gt;(component.create());\n    QQmlEngine::setObjectOwnership(childrenItem, QQmlEngine::CppOwnership);\n    childrenItem-&gt;setParent(parentEntity);\n    childrenItem-&gt;setProperty(\"nb\", 2);\n\n    qDebug() &lt;&lt; \"CPP: Number children after\" &lt;&lt; this-&gt;children().size();\n\n    //qDebug() &lt;&lt; \"Property value:\" &lt;&lt; QQmlProperty::read(childrenItem, \"nb\").toInt();\n\n    return childrenItem;\n}\n</code></pre>\n\n<p>But my output when I run main.qml is the following:</p>\n\n<pre><code>    qml: QML: Number children before 0\n    CPP: Number children before  0\n    CPP: Number children after 1\n    qml: QML: Number children after 0\n</code></pre>\n\n<p>And I commented the line corresponding to QQmlProperty::read due to the following error: \"incomplete type 'QQmlProperty' used in nested name specifier\n     qDebug() &lt;&lt; \"Property value:\" &lt;&lt; QQmlProperty::read(childrenItem, \"nb\").toInt();\"\n                                      ^</p>\n\n<p>I have therefore the following questions:</p>\n\n<ol>\n<li>Why is the number of children incrementation not seen from qml (but visible from cpp)?</li>\n<li>Why is onChildrenChanged not launched from qml?</li>\n<li>How can I add dynamically CustObject class (which is visible as a qml object from Project2 point of view since it is registered)\ninstead of Dummy.qml?</li>\n<li>How to read a property of a dynamically added object in C++ just after its creation (i.e. how to use QQMlProperty::read)?</li>\n</ol>\n\n<p>Thank you a lot in advance for any help you could give me!</p>\n"}, {"tags": ["c++", "templates"], "answers": [{"comments": [{"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1458755533, "post_id": 36185259, "comment_id": 60005956, "body": "The second one doesn&#39;t handle OP&#39;s example."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1458755567, "post_id": 36185259, "comment_id": 60005977, "body": "@T.C.: Just saw that."}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1458756206, "post_id": 36185259, "comment_id": 60006347, "body": "Don&#39;t you need <code>typename</code> before <code>Point_t::type</code> ?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1458756272, "post_id": 36185259, "comment_id": 60006397, "body": "@PiotrSkotnicki: Indeed. Focused on <code>dims</code> part."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": false, "score": 2, "last_activity_date": 1458756226, "last_edit_date": 1458756226, "creation_date": 1458755323, "answer_id": 36185259, "question_id": 36185200, "link": "https://stackoverflow.com/questions/36185200/extracting-size-t-template-parameters/36185259#36185259", "title": "Extracting size_t template parameters", "body": "<p>In C++11, you may turn</p>\n\n<pre><code>size_t dims() const {return D;}\n</code></pre>\n\n<p>into</p>\n\n<pre><code>static constexpr size_t dims() {return D;}\n</code></pre>\n\n<p>And so</p>\n\n<pre><code>template&lt;typename Point_t&gt;\nclass Line : public Shape&lt;typename Point_t::type, Point_t::dims()&gt; {..};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 3417150, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d5e0216aa38bfb911a0b17063459dfd?s=128&d=identicon&r=PG&f=1", "display_name": "armstrhu", "link": "https://stackoverflow.com/users/3417150/armstrhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1458762573, "creation_date": 1458762573, "answer_id": 36187431, "question_id": 36185200, "link": "https://stackoverflow.com/questions/36185200/extracting-size-t-template-parameters/36187431#36187431", "title": "Extracting size_t template parameters", "body": "<p>I think I figured it out.  My actual code is more complicated than the example (which is why I think it was harder for me to see the solution), but this basic method worked.  I restructured my classes as below,</p>\n\n<pre><code>template&lt;typename T&gt; class Line;\n\ntemplate&lt;typename T, size_t D&gt;\nclass Point\n{\n  public:\n   typedef T type;\n   size_t dims() const {return D;}\n   type val(size_t d) {return vals[d];}\n   bool intersects(Point&lt;T,D&gt; p)\n   {\n     for(size_t d=0; d&lt;D; ++d) if(p.vals[d] != vals[d]) return false;\n     return true;\n   }     \n\n   bool intersects(Line&lt;Point&lt;T,D&gt;&gt; l)\n   {\n     return l.intersects(*this);\n   }  \n\n  protected:\n   type vals[D];\n};\n\ntemplate&lt;typename T&gt;\nclass Shape\n{\n  public:\n   typedef T Point_t;\n   virtual size_t dims() const = 0;\n   virtual bool intersects(Point_t p) const  = 0;\n   virtual bool intersects(Line&lt;Point_t&gt; l) const = 0;\n}\n\ntemplate&lt;typename Point_t&gt;\nclass Line : public Shape&lt;Point_t&gt;\n{\n  public:\n   typedef typename Point_t::type type;\n   size_t dims() const {return point.dims();}\n\n   bool intersects(Point_t p) {/*stuff*/}      \n   bool intersects(Line&lt;Point_t&gt; l) {/*stuff*/}\n\n  private:\n   Point_t point;\n   type slope;\n};\n</code></pre>\n\n<p>Now the following works as expected,</p>\n\n<pre><code> template&lt;typename T, size_t D&gt; class Cartesian : public Point&lt;T,D&gt;{/*stuff*/}\n typedef Cartesian&lt;double,3&gt; Cartesian3D;\n typedef Cartesian&lt;double,2&gt; Cartesian2D;\n template&lt;typename T&gt; class Spherical : public Point&lt;T,3&gt; {/*stuff*/}\n\n Line&lt;Cartesian3D&gt; Line;\n Cartesian3D CPoint3D;\n Cartesian2D CPoint2D;\n Spherical&lt;double&gt; SPoint;\n Line.intersects(C3Point); // ok\n Line.intersects(C2Point); // compiler error\n Line.intersects(SPoint); // compiler error\n</code></pre>\n\n<p>Basically, I don't consider Point to be a Shape.  If I do that, I don't need the Shape class to know D, and everything Derived from Shape will contain a Point_t from which I can get the dimensions.  I just need to remember to explicitly put intersection methods for each Class derived from Shape into the Point class.</p>\n"}], "owner": {"reputation": 183, "user_id": 3417150, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d5e0216aa38bfb911a0b17063459dfd?s=128&d=identicon&r=PG&f=1", "display_name": "armstrhu", "link": "https://stackoverflow.com/users/3417150/armstrhu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1458762573, "creation_date": 1458755121, "last_edit_date": 1458758592, "question_id": 36185200, "link": "https://stackoverflow.com/questions/36185200/extracting-size-t-template-parameters", "title": "Extracting size_t template parameters", "body": "<p>I was wondering what is the best way to get access to a size_t template parameter, so that I can pass it along to another templated class (so not via a method call).  For instance if I have the classes,</p>\n\n<pre><code>template&lt;typename T, size_t D&gt; class Point;\ntemplate&lt;typename T&gt; class Line;\n\ntemplate&lt;typename T, size_t D&gt;\nclass Shape\n{\n  public:\n   virtual size_t dims() const = 0;\n   virtual bool intersects(Point&lt;T,D&gt; p) const  = 0;\n   virtual bool intersects(Line&lt;Point&lt;T,D&gt;&gt; l) const = 0;\n}\n\ntemplate&lt;typename T, size_t D&gt;\nclass Point : Shape&lt;T,D&gt;\n{\n  public:\n   typedef T type;\n   size_t dims() const {return D;}\n   type val(size_t d) {return vals[d];}\n   bool intersects(Point&lt;T,D&gt; p)\n   {\n     for(size_t d=0; d&lt;D; ++d) if(p.vals[d] != vals[d]) return false;\n     return true;\n   }     \n\n   bool intersects(Line&lt;Point&lt;T,D&gt;&gt; l)\n   {\n     return l.intersects(*this);\n   }  \n\n  protected:\n   type vals[D];\n};\n\n// How do I get D???\ntemplate&lt;typename Point_t&gt;\nclass Line : public Shape&lt;typename Point_t::type,??&gt;\n{\n  public:\n   typedef typename Point_t::type type;\n   size_t dims() const {return point.dims();}\n\n   bool intersects(Point&lt;type,??&gt; p) {/*stuff*/}      \n   bool intersects(Line&lt;Point_t&gt; l) {/*stuff*/}\n\n  private:\n   Point_t point;\n   type slope;\n};\n</code></pre>\n\n<p>I want to ensure the intersects method within Line ONLY works for a Line intersecting a point of the same dimensions (prevent 3D line intersecting a 2D point).  I thought about having Line take the same parameters as Point, but then the compiler wouldn't catch errors such as intersecting a Cartesian defined Line with a Spherically defined Point (since both are <code>Point&lt;double,3&gt;</code>).  With how I have it above, I can define cartesian and spherical classes to avoid this issue.</p>\n\n<pre><code> template&lt;typename T, size_t D&gt; class Cartesian : public Point&lt;T,D&gt;{/*stuff*/}\n template&lt;typename T&gt; class Spherical : public Point&lt;T,3&gt; {/*stuff*/}\n\n Line&lt;Cartesian&lt;double,3&gt;&gt; Line;\n Cartesian&lt;double,3&gt; C3Point;\n Cartesian&lt;double,2&gt; C2Point;\n Spherical&lt;double&gt; SPoint;\n Line.intersects(C3Point); // ok\n Line.intersects(C2Point); // compiler error\n Line.intersects(SPoint); // compiler error\n</code></pre>\n\n<p>edit:\nwhat I currently do is define the Line class as</p>\n\n<pre><code>template&lt;typename Point_t, size_t D&gt;\nclass Line : public Shape&lt;typename Point_t::type,D&gt;\n{/*stuff*/}\n</code></pre>\n\n<p>which works, but contains redundant info...</p>\n\n<pre><code> Line&lt;Cartesian&lt;double,3&gt;,3&gt; Line;\n</code></pre>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "edited": false, "score": 0, "creation_date": 1458755010, "post_id": 36185135, "comment_id": 60005622, "body": "const list&lt;const myObject*&gt; *const pointer = ..."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 7736, "user_id": 875044, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/19f2cbd347ab25e98b5aa05ee5673453?s=128&d=identicon&r=PG", "display_name": "Kan Li", "link": "https://stackoverflow.com/users/875044/kan-li"}, "edited": false, "score": 3, "creation_date": 1458755089, "post_id": 36185135, "comment_id": 60005675, "body": "@icando: That requires a copy of the list :-/"}, {"owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 0, "creation_date": 1458755182, "post_id": 36185135, "comment_id": 60005751, "body": "If you guys have an answer, could you just write getObjectListPointer() out?"}, {"owner": {"reputation": 35327, "user_id": 27678, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/7496124d499d578df1e3a6ff85e7ae03?s=128&d=identicon&r=PG", "display_name": "AndyG", "link": "https://stackoverflow.com/users/27678/andyg"}, "edited": false, "score": 0, "creation_date": 1458755861, "post_id": 36185135, "comment_id": 60006161, "body": "You haven&#39;t made this easy for us :-)"}, {"owner": {"reputation": 468, "user_id": 2829494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a65b077259fd54fe704b08beff43054?s=128&d=identicon&r=PG&f=1", "display_name": "DeathTails", "link": "https://stackoverflow.com/users/2829494/deathtails"}, "edited": false, "score": 0, "creation_date": 1458755957, "post_id": 36185135, "comment_id": 60006217, "body": "How about giving access to <code>const_iterator</code>s?"}, {"owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "reply_to_user": {"reputation": 468, "user_id": 2829494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a65b077259fd54fe704b08beff43054?s=128&d=identicon&r=PG&f=1", "display_name": "DeathTails", "link": "https://stackoverflow.com/users/2829494/deathtails"}, "edited": false, "score": 0, "creation_date": 1458756028, "post_id": 36185135, "comment_id": 60006259, "body": "@DeathTails Can you give a minimum example?"}, {"owner": {"reputation": 468, "user_id": 2829494, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2a65b077259fd54fe704b08beff43054?s=128&d=identicon&r=PG&f=1", "display_name": "DeathTails", "link": "https://stackoverflow.com/users/2829494/deathtails"}, "edited": false, "score": 0, "creation_date": 1458758231, "post_id": 36185135, "comment_id": 60007577, "body": "I realized after I posted my answer that it won&#39;t work due to the list containing pointers. The pointers will be constant, but not their data. So I&#39;ve deleted it."}], "answers": [{"comments": [{"owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 0, "creation_date": 1458756331, "post_id": 36185481, "comment_id": 60006432, "body": "Thanks, but just curious is there any way of not making a copy?"}, {"owner": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 0, "creation_date": 1458756453, "post_id": 36185481, "comment_id": 60006497, "body": "Creating a <code>const</code> instance but the down side of it is that non-const member functions can not be called."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 0, "creation_date": 1458756665, "post_id": 36185481, "comment_id": 60006637, "body": "@Nyaruko: By implementing a kind of <code>list_view&lt;const myObject&gt;</code>, but not trivial at all."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 32394, "user_id": 528724, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b428b7a4d372791efff952dafecd5782?s=128&d=identicon&r=PG", "display_name": "Mahesh", "link": "https://stackoverflow.com/users/528724/mahesh"}, "edited": false, "score": 1, "creation_date": 1458756745, "post_id": 36185481, "comment_id": 60006678, "body": "@Mahesh: <code>const instance</code> doesn&#39;t solve the constness of <code>myObject</code>."}, {"owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 0, "creation_date": 1458756769, "post_id": 36185481, "comment_id": 60006691, "body": "@Jarod42, you mean implement a container? How should I do that to achieve the goal? Any hint?"}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "reply_to_user": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "edited": false, "score": 0, "creation_date": 1458757385, "post_id": 36185481, "comment_id": 60007052, "body": "@Nyaruko: Do you really need <code>list</code> ? <code>array_ptr_view</code> is simpler (change <code>list</code> to <code>vector</code>). It is not really a (owning) container, but a wrapper to provide the iterator needed. you may look at <code>span&lt;T&gt;</code> in <a href=\"https://github.com/Microsoft/GSL\" rel=\"nofollow noreferrer\">GSL</a> to have an idea."}], "tags": [], "owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "is_accepted": true, "score": 2, "last_activity_date": 1458756103, "creation_date": 1458756103, "answer_id": 36185481, "question_id": 36185135, "link": "https://stackoverflow.com/questions/36185135/how-to-make-a-list-and-its-content-const-in-c/36185481#36185481", "title": "How to make a list and its content const in c++?", "body": "<p>With</p>\n\n<pre><code>struct myClass \n{\n    std::list&lt;const myObject*&gt; getObjectListPointer() const\n    {\n        // Create a copy with const pointers\n        return {std::begin(objectList), std::end(objectList)};\n    }\n\n    std::list&lt;myObject*&gt; objectList;\n};\n</code></pre>\n\n<p>You may then do</p>\n\n<pre><code>myClass instance;\nconst auto&amp; pointer = instance.getObjectListPointer();\n// cannot modify list `objectList`, and all `myObject` would be `const`\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1979, "user_id": 1634531, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/02fc16c85eab4a8e38f1c5ac1ae92a17?s=128&d=identicon&r=PG", "display_name": "weltensturm", "link": "https://stackoverflow.com/users/1634531/weltensturm"}, "is_accepted": false, "score": 1, "last_activity_date": 1458757968, "creation_date": 1458757968, "answer_id": 36186108, "question_id": 36185135, "link": "https://stackoverflow.com/questions/36185135/how-to-make-a-list-and-its-content-const-in-c/36186108#36186108", "title": "How to make a list and its content const in c++?", "body": "<pre><code>#include &lt;list&gt;\n#include &lt;iostream&gt;\n\nclass myClass {\n    std::list&lt;float*&gt; container;\n\n    public:\n\n        myClass(){\n            float* f = new float;\n            *f = 0.5f;\n            container.push_back(f);\n        }\n\n        const std::list&lt;const float*&gt;* containerConst(){\n            return (std::list&lt;const float*&gt;*)&amp;container;\n        }\n};\n\nint main(){\n    myClass instance;\n    std::cout &lt;&lt; *instance.containerConst()-&gt;front() &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>Outputs <code>0.5</code>.</p>\n\n<p>Pointers can be freely cast to const and the compiler usually does so implicitly, but the template system can't handle that by itself. Casting isn't the nicest solution since it results in a new template instantiation, but if the resulting class has the same data layout it works.</p>\n"}], "owner": {"reputation": 3729, "user_id": 1391055, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/edbeabd2b0a1788b369790c88bb00c01?s=128&d=identicon&r=PG", "display_name": "Nyaruko", "link": "https://stackoverflow.com/users/1391055/nyaruko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 36185481, "answer_count": 2, "score": 1, "last_activity_date": 1458757968, "creation_date": 1458754945, "last_edit_date": 1458755653, "question_id": 36185135, "link": "https://stackoverflow.com/questions/36185135/how-to-make-a-list-and-its-content-const-in-c", "title": "How to make a list and its content const in c++?", "body": "<p>If I have a:</p>\n\n<pre><code>class myClass \n{\n...\nlist&lt;myObject*&gt; objectList;\n};\n</code></pre>\n\n<p>How can I write a <code>getObjectListPointer()</code> function that return a pointer to this <code>objectList</code> in a way, that itself and its content cannot be modified?</p>\n\n<p>Which means, if I have </p>\n\n<pre><code>list&lt;myObject*&gt;* pointer = getObjectListPointer();\n</code></pre>\n\n<p>then <code>pointer</code> itself and pointer->at(i) for any <code>i</code> cannot be modified?\nLike where should I put <code>const</code>?</p>\n\n<hr>\n\n<p>Ok, my purpose is to able to modify <code>objectList</code> with in <code>myClass</code> but not other places, but I need to access the value of <code>objectList</code> and its content's value in other class, how should design the code?</p>\n"}, {"tags": ["c++", "enums", "lua"], "answers": [{"tags": [], "owner": {"reputation": 1794, "user_id": 232725, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17209bd39115c4691e95df7bd091c5f8?s=128&d=identicon&r=PG", "display_name": "Nathan Whitehead", "link": "https://stackoverflow.com/users/232725/nathan-whitehead"}, "is_accepted": false, "score": 0, "last_activity_date": 1458758848, "creation_date": 1458758848, "answer_id": 36186350, "question_id": 36185075, "link": "https://stackoverflow.com/questions/36185075/wrap-an-enum-in-selene-to-be-accessible-in-lua/36186350#36186350", "title": "Wrap an enum in Selene to be accessible in Lua", "body": "<p>This is not possible in Selene.</p>\n\n<p>The solution I adopted is to define a class <code>DynEnum</code> that internally uses a map to keep track of labels and values.</p>\n\n<pre><code>/**\n * Simple class for enum values\n */\nclass DynEnum {\n  public:\n    DynEnum(std::map&lt;std::string, int&gt; tbl) : tbl(tbl) {}\n\n    int of(std::string tag) {\n        if (tbl.count(tag) &gt; 0) {\n            return tbl[tag];\n        }\n        throw std::runtime_error(\"Enum tag not found\");\n    }\n\n    std::string lookup(int v) {\n        for (auto &amp;p : tbl) {\n            if (p.second == v) {\n                return p.first;\n            }\n        }\n        throw std::runtime_error(\"Enum value not found\");\n    }\n\n  private:\n    std::map&lt;std::string, int&gt; tbl;\n};\n</code></pre>\n\n<p>Then instantiate objects like this:</p>\n\n<pre><code>DynEnum Motion({\n    {\"UP\", 0},\n    {\"DOWN\", 1},\n    {\"REPEAT\", 2},\n});\n</code></pre>\n\n<p>Then bind using Selene:</p>\n\n<pre><code>L[\"Motion\"].SetObj(Motion,\n    \"of\", &amp;DynEnum::of,\n    \"lookup\", &amp;DynEnum::lookup);\n</code></pre>\n\n<p>This method has performance overhead but in my application it's not a big deal. It also has the advantage of allowing conversion from number to string in Lua which helps debugging.</p>\n"}], "owner": {"reputation": 1794, "user_id": 232725, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/17209bd39115c4691e95df7bd091c5f8?s=128&d=identicon&r=PG", "display_name": "Nathan Whitehead", "link": "https://stackoverflow.com/users/232725/nathan-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 416, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458758848, "creation_date": 1458754728, "question_id": 36185075, "link": "https://stackoverflow.com/questions/36185075/wrap-an-enum-in-selene-to-be-accessible-in-lua", "title": "Wrap an enum in Selene to be accessible in Lua", "body": "<p>I'm using <a href=\"https://github.com/jeremyong/Selene\" rel=\"nofollow\">Selene</a> to wrap C++ classes and functions to be accessible from Lua. I have a simple enum class:</p>\n\n<pre><code>enum class Motion {\n    UP = 0,\n    DOWN = 1,\n    REPEAT = 2,\n};\n</code></pre>\n\n<p>I want to wrap this inside a Lua state so that I can say something like \"Motion.DOWN\" in Lua and get 1.</p>\n\n<p>First attempt:</p>\n\n<pre><code>void register(sel::State &amp;L) {\n    L[\"Motion\"].SetClass&lt;Motion&gt;();\n}\n</code></pre>\n\n<p>The compiler complains that it's not a class.</p>\n\n<pre><code>...\n/source/desktop/../external/Selene/include/selene/Class.h:41:10: \n    error: creating pointer to member of non-class type 'Motion'\n void _register_member(lua_State *state,\n...\n</code></pre>\n\n<p>Second attempt:</p>\n\n<pre><code>void register(sel::State &amp;L) {\n    L[\"Motion\"] = Motion;\n}\n</code></pre>\n\n<p>This doesn't compile, get errors about \"expecting primary expression\", it's not valid C++. I get the same errors if I try to use <code>&amp;Motion</code>.</p>\n\n<p>Is there a way to do this? Preferably one that doesn't involve me listing out all the enum constants again.</p>\n"}, {"tags": ["c++", "char", "constants", "cut"], "comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1458754300, "post_id": 36184859, "comment_id": 60005177, "body": "Don&#39;t use <code>const char*</code>. Cut suggests removal, which <code>const</code> doesn&#39;t really allow."}, {"owner": {"reputation": 185, "user_id": 6105710, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/qZdHm.jpg?s=128&g=1", "display_name": "SMB Punt", "link": "https://stackoverflow.com/users/6105710/smb-punt"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1458754342, "post_id": 36184859, "comment_id": 60005210, "body": "I need to use const char* because a sdl function need that.."}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1458754375, "post_id": 36184859, "comment_id": 60005228, "body": "Use <code>std::string</code> until you need the parameter, then create a <code>const char*</code> from the <code>std::string</code>."}, {"owner": {"reputation": 185, "user_id": 6105710, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/qZdHm.jpg?s=128&g=1", "display_name": "SMB Punt", "link": "https://stackoverflow.com/users/6105710/smb-punt"}, "reply_to_user": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1458754562, "post_id": 36184859, "comment_id": 60005371, "body": "Thanks ! it works :)"}, {"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1458754624, "post_id": 36184859, "comment_id": 60005401, "body": "Be sure not to use a shallow copy of the object."}], "answers": [{"comments": [{"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 0, "creation_date": 1458755143, "post_id": 36185056, "comment_id": 60005714, "body": "You can&#39;t use stroke on a constant string.  It modifies the original."}, {"owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "reply_to_user": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 2, "creation_date": 1458756900, "post_id": 36185056, "comment_id": 60006772, "body": "@CrazyEddie That&#39;s why my answer included the sentence &quot;You will need to copy your original data into a temporary area that does not have the &#39;const&#39; attribute.&quot;"}], "tags": [], "owner": {"reputation": 4121, "user_id": 2098932, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/BBJGp.jpg?s=128&g=1", "display_name": "Logicrat", "link": "https://stackoverflow.com/users/2098932/logicrat"}, "is_accepted": false, "score": 3, "last_activity_date": 1458754675, "creation_date": 1458754675, "answer_id": 36185056, "question_id": 36184859, "link": "https://stackoverflow.com/questions/36184859/how-to-split-a-const-char/36185056#36185056", "title": "how to split a const char*?", "body": "<p>I think what you are looking for is the <code>std::strtok()</code> function. There is a reference <a href=\"http://www.cplusplus.com/reference/cstring/strtok/\" rel=\"nofollow\">here</a>.</p>\n\n<p>You will need to copy your original data into a temporary area that does not have the <code>const</code> attribute. <code>std::strtok()</code> will split your string up according to the delimiter you specify, in this case a single blank character.</p>\n\n<p>Each successive call to <code>std::strtok()</code> will advance a pointer to the next token in the string.</p>\n"}], "owner": {"reputation": 185, "user_id": 6105710, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/qZdHm.jpg?s=128&g=1", "display_name": "SMB Punt", "link": "https://stackoverflow.com/users/6105710/smb-punt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2845, "favorite_count": 0, "closed_date": 1458755114, "answer_count": 1, "score": -3, "last_activity_date": 1458754675, "creation_date": 1458754080, "last_edit_date": 1458754542, "question_id": 36184859, "link": "https://stackoverflow.com/questions/36184859/how-to-split-a-const-char", "closed_reason": "Duplicate", "title": "how to split a const char*?", "body": "<p>i have </p>\n\n<pre><code>const char* hour = \"Wed Mar 23 18:10:57 2016\";\n</code></pre>\n\n<p>I would like to cut \"18:10:57\" in another new const char*</p>\n"}, {"tags": ["c++", "linux", "daemon", "background-process"], "comments": [{"owner": {"reputation": 5867, "user_id": 2252087, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/020cbe41b02f03d59f3adae022c0ce7d?s=128&d=identicon&r=PG", "display_name": "ensc", "link": "https://stackoverflow.com/users/2252087/ensc"}, "edited": false, "score": 2, "creation_date": 1458754422, "post_id": 36184815, "comment_id": 60005262, "body": "what is the question?"}, {"owner": {"reputation": 33, "user_id": 5225163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MWGo3.jpg?s=128&g=1", "display_name": "Chris Weber", "link": "https://stackoverflow.com/users/5225163/chris-weber"}, "edited": false, "score": 0, "creation_date": 1458765135, "post_id": 36184815, "comment_id": 60011533, "body": "would my idea be bad coding / bad using of daemons"}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 1, "creation_date": 1458800867, "post_id": 36184815, "comment_id": 60022740, "body": "The idea is not bad. Just use sockets or some other IPC scheme (maybe a named pipe). Simplest would be to reuse the same project, busybox style - just split the code path according to a cmd line param. That&#39;s what I&#39;ve done myself."}], "answers": [{"tags": [], "owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "is_accepted": true, "score": 4, "last_activity_date": 1458802576, "last_edit_date": 1458802576, "creation_date": 1458802215, "answer_id": 36194610, "question_id": 36184815, "link": "https://stackoverflow.com/questions/36184815/how-to-control-a-background-process-daemon/36194610#36194610", "title": "How to control a background-process/daemon", "body": "<p>Here is an example program built with C++/Qt. As you can see, the process starts as daemon if no arguments are given, listening to a named local socket.</p>\n\n<p>If arguments are given, it connects to that local socket, and sends its arguments. The daemon then prints them.</p>\n\n<pre><code>#include &lt;QCoreApplication&gt;\n#include &lt;QLocalServer&gt;\n#include &lt;QLocalSocket&gt;\n#include &lt;QStringList&gt;\n\nint main(int argc, char *argv[])\n{\n    QCoreApplication a(argc, argv);\n\n    if (a.arguments().size() == 1) {\n        // Act as a server.\n        QLocalServer server;\n        server.listen(\"MyDaemon\");\n        while (server.waitForNewConnection(-1)) {\n            QLocalSocket *socket = server.nextPendingConnection();\n            socket-&gt;waitForReadyRead();\n            qDebug() &lt;&lt; \"received message\" &lt;&lt; socket-&gt;readAll();\n            delete socket;\n        }\n    } else {\n        // Act as a client.\n        QLocalSocket socket;\n        socket.connectToServer(\"MyDaemon\");\n        socket.waitForConnected();\n        socket.write(a.arguments().join(' ').toUtf8() + \"\\n\");\n        socket.waitForBytesWritten();\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gqeWH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gqeWH.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 33, "user_id": 5225163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MWGo3.jpg?s=128&g=1", "display_name": "Chris Weber", "link": "https://stackoverflow.com/users/5225163/chris-weber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "accepted_answer_id": 36194610, "answer_count": 1, "score": 3, "last_activity_date": 1458803848, "creation_date": 1458753924, "last_edit_date": 1458803848, "question_id": 36184815, "link": "https://stackoverflow.com/questions/36184815/how-to-control-a-background-process-daemon", "title": "How to control a background-process/daemon", "body": "<p>I'm currently trying to create a program in C++ for Linux and I'm quite new to it.The program should do its stuff(Network communication and calculations) in the background and could be controlled with commands from the terminal, like \"prog -start\", \"prog -stop\", \"prog -limitUp 1000\".</p>\n\n<p>My idea to realize that was to create the program as a daemon to always run in the background. To control the whole thing I thought to setup a linux command that takes the given arguments to the main function of my program and tries to reconnect to the daemon in the background to execute the given command then.</p>\n\n<p>What is the best way to achieve such functionality (i.e. a daemon listening in the background and a client/command that can be used to control it).</p>\n"}, {"tags": ["c++", "android-intent", "java-native-interface", "google-play-services", "cocos2d-x"], "comments": [{"owner": {"reputation": 1, "user_id": 3540099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4de5ad723b26e5f02f6d654ad8c4f64?s=128&d=identicon&r=PG&f=1", "display_name": "M. As\u0131m Y\u0131ld\u0131z", "link": "https://stackoverflow.com/users/3540099/m-as%c4%b1m-y%c4%b1ld%c4%b1z"}, "edited": false, "score": 0, "creation_date": 1459278344, "post_id": 36184681, "comment_id": 60211129, "body": "Yep! Is there anybody help me?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3540099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4de5ad723b26e5f02f6d654ad8c4f64?s=128&d=identicon&r=PG&f=1", "display_name": "M. As\u0131m Y\u0131ld\u0131z", "link": "https://stackoverflow.com/users/3540099/m-as%c4%b1m-y%c4%b1ld%c4%b1z"}, "is_accepted": true, "score": 0, "last_activity_date": 1459898852, "last_edit_date": 1459898852, "creation_date": 1459880180, "answer_id": 36434011, "question_id": 36184681, "link": "https://stackoverflow.com/questions/36184681/google-play-services-c-run-ui-on-second-activity-using-intenthandler/36434011#36434011", "title": "Google Play Services C++ / Run UI on second activity using IntentHandler", "body": "<p>...Yeah I solved the problem, but didn't use IntentHandler method.</p>\n\n<p>I was using this code in my app, to show weekly leaderboard data.</p>\n\n<pre><code>gameServices-&gt;Leaderboards().ShowUIBlocking(leaderboardId,gpg::LeaderboardTimeSpan::WEEKLY);\n</code></pre>\n\n<p>But return value is not void, it is UIStatus (whatever it is)</p>\n\n<p>I've reverted back to this code, app is not going to black screen now. This method returns void, I think I have to catch some callbacks when using ShowUIBlocking method, with that UIStatus thing. </p>\n\n<pre><code>gameServices-&gt;Leaderboards().ShowUI(leaderboardId);\n</code></pre>\n\n<p>But now, I can't benefit from timespan feature of leaderboards. </p>\n\n<p>I am going to research how it can be used. There is no problem for now. But, documentation of SetOptionalIntentHandlerForUI must be written more explicit, for programmers who want to use it.</p>\n"}], "owner": {"reputation": 1, "user_id": 3540099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4de5ad723b26e5f02f6d654ad8c4f64?s=128&d=identicon&r=PG&f=1", "display_name": "M. As\u0131m Y\u0131ld\u0131z", "link": "https://stackoverflow.com/users/3540099/m-as%c4%b1m-y%c4%b1ld%c4%b1z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 36434011, "answer_count": 1, "score": 0, "last_activity_date": 1459898852, "creation_date": 1458753518, "last_edit_date": 1458823337, "question_id": 36184681, "link": "https://stackoverflow.com/questions/36184681/google-play-services-c-run-ui-on-second-activity-using-intenthandler", "title": "Google Play Services C++ / Run UI on second activity using IntentHandler", "body": "<p>I am developing a mobile game using Cocos2D-x engine for android platform and i want to integrate GPGS on it. \nI achieved to show leaderboards, but there is a little annoying problem. When leaderboard is visible, if i go background and then come back to app, the gamescene goes to black. I think opengl context being released and doesnt restore again. In my opinion running leaderboard on same activity causes this, the game engine cant understand whats happening there. Whatever, because of this  I want to run leaderboard (and also all GPGS things) on a new activity using intent.</p>\n\n<blockquote>\n  <p><strong>Google likes \"Providing\"</strong>\n  In the reference documents of Google Play Game Services C++ SDK, there is a few unclear/fuzzy explanation about using SetOptionalIntentHandlerForUI method. </p>\n  \n  <p><em>\"Provide a function that can start a provided UI intent at any point, using startActivityForResult.\"</em></p>\n  \n  <p><strong>What is the mean of \"Providing\"?</strong> What is a provided Intent? How will I use startActivityForResult method? Unfortunately, \"using\" and \"providing methods\" are not clear expressions for coding. There is no sample about\n  using this method in the documents of GPGS for C++. Eventually,\n   Google's document is so poor and\n  there is no useful information on the internet. If someone from Google helps me, I will be so happy. </p>\n</blockquote>\n\n<p>As i understand, I wrote the code like this. But it gives error when starting. </p>\n\n<p>AppActivity.java</p>\n\n<pre><code>public void runGPGSActivity(Intent i) {\n    startActivityForResult(i,100);\n}\n</code></pre>\n\n<p>AndroidPlatformConfiguration.h (From C++ gpg lib)</p>\n\n<pre><code>typedef std::function&lt;void(jobject)&gt; IntentHandler;\n\nAndroidPlatformConfiguration &amp;SetOptionalIntentHandlerForUI(\nIntentHandler intent_handler);\n</code></pre>\n\n<p>main.cpp (JNI binding, the working code, GPGS runs on same activity )</p>\n\n<pre><code>gpg::AndroidPlatformConfiguration platform_configuration;\nplatform_configuration.SetActivity(activity);\nStateManager::InitServices( ...\n</code></pre>\n\n<p>main.cpp (JNI binding, GPGS must be run on new activity )</p>\n\n<pre><code>gpg::AndroidPlatformConfiguration platform_configuration;\n\njclass activityClass = env-&gt;FindClass(\"org/cocos2dx/cpp/AppActivity\");\njmethodID jIntentHandlerMethodID = env-&gt;GetMethodID(activityClass,\"runGPGSActivity\",\"(Landorid/content/Intent;)V\");\njobject jIntentHandler = env-&gt;NewObject(activityClass, jIntentHandlerMethodID);\n\ngpg::AndroidPlatformConfiguration::IntentHandler mIntentHandler; /*= [](jobject mjIntentHandler){};*/\nstd::function&lt;void(jobject)&gt; intentHandler = std::bind(mIntentHandler,jIntentHandler);\n\nplatform_configuration.SetOptionalIntentHandlerForUI(intentHandler);\nplatform_configuration.SetActivity(activity);\n\nStateManager::InitServices(\n</code></pre>\n\n<p>There is no build error, but the application crashes when launching. </p>\n\n<blockquote>\n  <p>03-24 14:12:24.301: A/libc(21352): Fatal signal 6 (SIGABRT) at\n  0x00005368 (code=-6), thread 21352 (main)</p>\n</blockquote>\n\n<p>And some links about this issue:</p>\n\n<p><a href=\"https://developers.google.com/games/services/cpp/api/classgpg_1_1AndroidPlatformConfiguration#member-typedef-documentation\" rel=\"nofollow\">IntentHandler reference</a></p>\n\n<p><a href=\"https://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent,%20int)\" rel=\"nofollow\">StartActivityForResult reference</a></p>\n\n<p>/// Thank you in advance. ///</p>\n"}, {"tags": ["c++", "operator-overloading", "brackets", "square-bracket"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 4, "creation_date": 1458753454, "post_id": 36184624, "comment_id": 60004616, "body": "You can&#39;t overload a multi-dimensional bracket since there is no such operator in C++. Instead, you have to overload a single bracket to return a sort of proxy object, for each overload of a single-dimensional bracket would mean a second level of indexing, which would return another proxy... and so forth."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458753499, "post_id": 36184624, "comment_id": 60004634, "body": "Give this a read for a better way to perform this with <code>operator()</code>: <a href=\"https://isocpp.org/wiki/faq/operator-overloading#matrix-array-of-array\" rel=\"nofollow noreferrer\">isocpp.org/wiki/faq/operator-overloading#matrix-array-of-arr&zwnj;&#8203;ay</a>"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 2, "creation_date": 1458753506, "post_id": 36184624, "comment_id": 60004637, "body": "Or, alternatively, find a different syntax. Like <code>nsv(1,2,3,4,5,6,7)</code> or <code>nsv[{1,2,3,4,5,6,7}]</code>."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1458754249, "post_id": 36184624, "comment_id": 60005143, "body": "Not strictly a duplicate as this is a special case with an easy answer: <code>auto&amp; operator[](int i) {return vectorSpace[i]; }</code> - that should work as expected."}], "answers": [{"comments": [{"owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1458754478, "post_id": 36184706, "comment_id": 60005305, "body": "This answer displeases me. Any chance that we could add this to the C++17 spec?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1458754631, "post_id": 36184706, "comment_id": 60005408, "body": "@kmiklas Sorry to displease you by telling the facts. No there won&#39;t be changes in operator overloading syntax with c++17 spec AFAIK, and I doubt you will convince the c++ standard committee to change it for that concern."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "edited": false, "score": 0, "creation_date": 1458758711, "post_id": 36184706, "comment_id": 60007844, "body": "@kmiklas zilch. Unless you have a time machine, then infinitesimal."}, {"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 0, "creation_date": 1481246821, "post_id": 36184706, "comment_id": 69310809, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6: There may very well be changes in operator overloading with C++17 (namely smart references via <code>operator.</code>)  Just no changes to bracket subscripting operators."}], "tags": [], "owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "is_accepted": false, "score": 1, "last_activity_date": 1458754677, "last_edit_date": 1458754677, "creation_date": 1458753599, "answer_id": 36184706, "question_id": 36184624, "link": "https://stackoverflow.com/questions/36184624/overloading-multi-dimensional-brackets/36184706#36184706", "title": "Overloading multi-dimensional brackets", "body": "<blockquote>\n  <p>Any ideas?</p>\n</blockquote>\n\n<p>There's only the option to overload the <code>operator[]()</code> for every level, and let the return types have another <code>operator[]()</code> overload.</p>\n\n<hr>\n\n<p>As mentioned in comments, such is usually solved with overloading the call <code>operator()</code>:</p>\n\n<pre><code>int operator()(size_t dim1, size_t dim2, ... size_t dimn);  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55059, "user_id": 212858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1166c87b6f3fc2e6746da96b60fefb46?s=128&d=identicon&r=PG", "display_name": "Useless", "link": "https://stackoverflow.com/users/212858/useless"}, "is_accepted": false, "score": 2, "last_activity_date": 1458758482, "last_edit_date": 1458758482, "creation_date": 1458753724, "answer_id": 36184750, "question_id": 36184624, "link": "https://stackoverflow.com/questions/36184624/overloading-multi-dimensional-brackets/36184750#36184750", "title": "Overloading multi-dimensional brackets", "body": "<p>The standard answer is to have each <code>[]</code> (from left-to-right) return a proxy for the correct nested subset, the last of which actually returns a reference to the data. In your scheme, it would be easiest by far to template the nested types to automate production.</p>\n\n<p>As the mysterious user4581301 mentions, it's much simpler to provide</p>\n\n<pre><code>nsv(2,4,7,4,0,7,6)\n</code></pre>\n\n<hr>\n\n<p>Sample template production of your desired class is probably simpler than using a temporary proxy object:</p>\n\n<pre><code>template &lt;size_t Width, size_t Depth, typename T=int&gt;\nstruct SubSpace;\n\ntemplate &lt;size_t Width, typename T&gt;\nstruct SubSpace&lt;Width,0,T&gt; {\n    std::array&lt;T, Width&gt; array;\n\n    T&amp; operator[] (size_t i) { return array[i]; }\n    T const&amp; operator[] (size_t i) const { return array[i]; }\n};\n\ntemplate &lt;size_t Width, size_t Depth, typename T&gt;\nstruct SubSpace {\n    using Nested = SubSpace&lt;Width, Depth-1, T&gt;;\n    std::array&lt;Nested, Width&gt; array;\n\n    Nested&amp; operator[] (size_t i) { return array[i]; }\n    Nested const&amp; operator[] (size_t i) const { return array[i]; }\n};\n\n\nusing NSpaceVector = SubSpace&lt;8,6&gt;;\n\nint main()\n{\n    NSpaceVector nsv;\n    nsv[2][4][7][4][0][7][6] = 2;\n    cout &lt;&lt; nsv[2][4][7][4][0][7][6] &lt;&lt; endl; //-&gt; 2\n}\n</code></pre>\n\n<p>Note this doesn't currently default-initialize the array members, but we can use aggregate initialization anyway:</p>\n\n<pre><code>    NSpaceVector nsv {}; // value-initialize every element\n    nsv[2][4][7][4][0][7][6] = 2;\n    cout &lt;&lt; nsv[2][4][7][4][0][7][6] &lt;&lt; endl; //-&gt; 2\n    cout &lt;&lt; nsv[2][4][7][4][0][7][5] &lt;&lt; endl; //-&gt; 0\n</code></pre>\n\n<p>Also note that <code>SubSpace&lt;8,6&gt;</code> gives the 8x7 result you wanted, since Depth terminates at 0. This could be cleaned up with a toplevel wrapper, but I'm reluctant to terminate on <code>Depth==1</code> instead and have everything go wrong when someone instantiates <code>SubSpace&lt;0,0&gt;</code> by accident.</p>\n\n<hr>\n\n<p>Simpler still, depending on whether you want <em>any</em> behaviour in your class, is this:</p>\n\n<pre><code>struct OtherSpaceVector {\n    int s[8][8][8][8][8][8][8];\n\n    auto operator[] (size_t i) -&gt; decltype(s[i]) { return s[i]; }\n};\n\nint main()\n{\n    OtherSpaceVector osv{};\n    osv[2][4][7][4][0][7][6] = 2;\n    std::cout &lt;&lt; osv[2][4][7][4][0][7][6] &lt;&lt; '\\n'; \n    std::cout &lt;&lt; osv[2][4][7][4][0][7][5] &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>It's harder to alter the dimensions and feels more brittle than the template version, but it still  works for the use case you provided.</p>\n"}], "owner": {"reputation": 11004, "user_id": 1526115, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/356837a43b2988e17e9fc3c6c7a6cc36?s=128&d=identicon&r=PG", "display_name": "kmiklas", "link": "https://stackoverflow.com/users/1526115/kmiklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 854, "favorite_count": 0, "closed_date": 1458753962, "answer_count": 2, "score": 0, "last_activity_date": 1458758482, "creation_date": 1458753355, "question_id": 36184624, "link": "https://stackoverflow.com/questions/36184624/overloading-multi-dimensional-brackets", "closed_reason": "Duplicate", "title": "Overloading multi-dimensional brackets", "body": "<p>How can I overload multi-dimensional brackets?</p>\n\n<p>Let's say that I have a class which enables me to access points in an <em>n</em>-vector space. For example:</p>\n\n<pre><code>class NSpaceVector {\n    private:\n        int vectorSpace[8][8][8][8][8][8][8];\n    public:        \n        const NSpaceVector operator[][][][][][][](int i, int j, int k, int l, int m, int n, int p)const {return vectorSpace[i][j][k][l][m][n][p]; }\n        NSpaceVector operator[][][][][][][](int i, int j, int k, int l, int m, int n, int p) {return vectorSpace[i][j][k][l][m][n][p]; }\n}\nunsigned long &amp; operator [](int i) {return registers[i];}\n</code></pre>\n\n<p>What I would like to do is overload the bracket operator so that I can index into this location like so:</p>\n\n<pre><code>int main() {\n    NSpaceVector nsv; // Assume initializes all to 0\n    nsv[2][4][7][4][0][7][6] = 2;\n    cout &lt;&lt; nsv[2][4][7][4][0][7][6] &lt;&lt; endl; //-&gt; 2\n    cout &lt;&lt; nsv[1][4][7][4][0][7][6] &lt;&lt; endl; //-&gt; 0\n    return 0;\n}\n</code></pre>\n\n<p>I can't get this to compile. Any ideas? Thx, Keith :^)</p>\n"}, {"tags": ["c++", "qt", "csv"], "comments": [{"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 2, "creation_date": 1458753135, "post_id": 36184475, "comment_id": 60004418, "body": "No debugger? Try harder."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458753332, "post_id": 36184475, "comment_id": 60004548, "body": "Nothing particularly obvious or odious in the code provided. Fire up the debugger and make sure the assembled file path makes sense on Windows."}, {"owner": {"reputation": 13, "user_id": 5974359, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1770486669841816/picture?type=large", "display_name": "Abby Wanyu Liu", "link": "https://stackoverflow.com/users/5974359/abby-wanyu-liu"}, "edited": false, "score": 0, "creation_date": 1458753595, "post_id": 36184475, "comment_id": 60004699, "body": "Thanks for your encouragement. I did try debugging. Because I need to log data later on in this file, debugging only told me that &quot;impossible to open the file&quot; and &quot;impossible to write in the file because m_Columns.empty() || m_File==NULL return false&quot; which make sense because the file is not created. If you have experience please share it with me. Thanks"}, {"owner": {"reputation": 13, "user_id": 5974359, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1770486669841816/picture?type=large", "display_name": "Abby Wanyu Liu", "link": "https://stackoverflow.com/users/5974359/abby-wanyu-liu"}, "edited": false, "score": 0, "creation_date": 1458753754, "post_id": 36184475, "comment_id": 60004809, "body": "Just want to add that the program works on Windows, the path should be ok because I also loaded other xml files. Only the csv writer didn&#39;t work but don&#39;t know why..."}, {"owner": {"reputation": 4328, "user_id": 920069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd39f0db1f22e1314746491df063602a?s=128&d=identicon&r=PG", "display_name": "Retired Ninja", "link": "https://stackoverflow.com/users/920069/retired-ninja"}, "edited": false, "score": 0, "creation_date": 1458753989, "post_id": 36184475, "comment_id": 60004965, "body": "Since we can&#39;t see what <code>m_path</code> contains or what <code>fileName</code> contains once you&#39;ve done all the substitutions and such all we can do is guess.  I&#39;d guess the filename is bad."}, {"owner": {"reputation": 2442, "user_id": 1616677, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/arb4K.jpg?s=128&g=1", "display_name": "VladimirLenin", "link": "https://stackoverflow.com/users/1616677/vladimirlenin"}, "edited": false, "score": 0, "creation_date": 1458754059, "post_id": 36184475, "comment_id": 60005003, "body": "Does m_path has a trailing slash? If it is absolute or relative? Print out what path you are trying to open and check manually if it exists."}, {"owner": {"reputation": 13, "user_id": 5974359, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1770486669841816/picture?type=large", "display_name": "Abby Wanyu Liu", "link": "https://stackoverflow.com/users/5974359/abby-wanyu-liu"}, "edited": false, "score": 0, "creation_date": 1458754450, "post_id": 36184475, "comment_id": 60005286, "body": "m_path is &quot;C:/Users/admin/Desktop/ExpeMenu/&quot; and folder &quot;users&quot; exists. As I said before that there are other xml files that use the same path are working but can&#39;t write this csv file because it failed to create."}], "answers": [{"tags": [], "owner": {"reputation": 477, "user_id": 5845844, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/787cdb5c42baff72c4869e874a00af33?s=128&d=identicon&r=PG&f=1", "display_name": "Radek", "link": "https://stackoverflow.com/users/5845844/radek"}, "is_accepted": false, "score": 0, "last_activity_date": 1458754616, "creation_date": 1458754616, "answer_id": 36185037, "question_id": 36184475, "link": "https://stackoverflow.com/questions/36184475/write-csv-file-from-qt-it-worked-on-mac-but-not-on-windows/36185037#36185037", "title": "Write csv file from QT. It worked on Mac but not on Windows", "body": "<p>I think the problem might be in the encoding of the csv file. Especially in the line end character. I had the same problem in the past when using Qt4.x. The problem was in the <code>QTextStream</code> the <code>readline()</code> it read whole file and app crashed.</p>\n"}], "owner": {"reputation": 13, "user_id": 5974359, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/1770486669841816/picture?type=large", "display_name": "Abby Wanyu Liu", "link": "https://stackoverflow.com/users/5974359/abby-wanyu-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1458754616, "creation_date": 1458752855, "question_id": 36184475, "link": "https://stackoverflow.com/questions/36184475/write-csv-file-from-qt-it-worked-on-mac-but-not-on-windows", "title": "Write csv file from QT. It worked on Mac but not on Windows", "body": "<p>I'm writing a program that requires to write csv from QT. The codes are as below:</p>\n\n<pre><code>void MainWindow::writeUserData(){\nCSVWriter writerHeader;\nwriterHeader.setSeparator(\";\");\nwriterHeader.openFile(m_path+\"users/header.csv\");\n\nQString fileName = m_path + \"users/\"+ m_userData[\"userId\"] + \"_\" + m_userData[\"name\"] + \"_\" + QDateTime::currentDateTime().toString()+\".csv\";\n\nif(!Experiment::MAC_COMP){\n    fileName = fileName.replace(\" \",\"_\");\n    fileName = fileName.replace(\":\",\"_\");\n    fileName[1] =':';\n}\n\nCSVWriter writerUserData;\nwriterUserData.setSeparator(\";\");\nwriterUserData.openFile(fileName);\n\nQStringList header;\nQStringList d;\nQMapIterator&lt;QString,QString&gt; i(m_userData);\nwhile(i.hasNext()){\n    i.next();\n    header&lt;&lt; i.key();\n    d&lt;&lt;i.value();\n}\n\nwriterHeader.setColumnNames(header, true);\nwriterUserData.setColumnNames(header);\nwriterUserData.write(d,true);\n\nwriterHeader.closeFile();\nwriterUserData.closeFile();\n}\n</code></pre>\n\n<p>It worked perfectly fine on Mac but failed to write the file on Windows. Does anybody know why? Many thanks in advance!</p>\n"}, {"tags": ["c++", "googletest", "gmock"], "comments": [{"owner": {"reputation": 6058, "user_id": 198011, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c86aa022c2b18a1f1c418d1e85cbbf72?s=128&d=identicon&r=PG", "display_name": "Antonio P&#233;rez", "link": "https://stackoverflow.com/users/198011/antonio-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1458754463, "post_id": 36184401, "comment_id": 60005293, "body": "You are calling <code>cc_-&gt;unregister</code> and should be calling <code>unregisterClient</code>"}, {"owner": {"reputation": 836, "user_id": 623541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f8eee78b7fbca783d776b157f348b3f?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/623541/fred"}, "reply_to_user": {"reputation": 6058, "user_id": 198011, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c86aa022c2b18a1f1c418d1e85cbbf72?s=128&d=identicon&r=PG", "display_name": "Antonio P&#233;rez", "link": "https://stackoverflow.com/users/198011/antonio-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1458754867, "post_id": 36184401, "comment_id": 60005539, "body": "Yes, that was a typo. Thank you."}, {"owner": {"reputation": 14124, "user_id": 3545094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5105cb702f101f44d85e885bc61c8525?s=128&d=identicon&r=PG&f=1", "display_name": "Martin G", "link": "https://stackoverflow.com/users/3545094/martin-g"}, "edited": false, "score": 0, "creation_date": 1458758189, "post_id": 36184401, "comment_id": 60007548, "body": "Everything in ConnectionClass being private is also a typo? Have you run this exact code?"}, {"owner": {"reputation": 836, "user_id": 623541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f8eee78b7fbca783d776b157f348b3f?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/623541/fred"}, "edited": false, "score": 0, "creation_date": 1458759391, "post_id": 36184401, "comment_id": 60008221, "body": "Yes, that was a typo, thank you."}, {"owner": {"reputation": 6058, "user_id": 198011, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c86aa022c2b18a1f1c418d1e85cbbf72?s=128&d=identicon&r=PG", "display_name": "Antonio P&#233;rez", "link": "https://stackoverflow.com/users/198011/antonio-p%c3%a9rez"}, "edited": false, "score": 2, "creation_date": 1458766713, "post_id": 36184401, "comment_id": 60012416, "body": "I would double check for differences between the code you have posted and your real code. As a side note, you should be using member initialization list, instead of assignment in <code>RealObject</code>&#39;s constructor. That code won&#39;t compile as is. If <code>RealObject::cc_</code> is not a reference, but an instance in your real code, that would explain the test result."}, {"owner": {"reputation": 837, "user_id": 5883767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PMXHe.jpg?s=128&g=1", "display_name": "MIbrah", "link": "https://stackoverflow.com/users/5883767/mibrah"}, "edited": false, "score": 0, "creation_date": 1459540703, "post_id": 36184401, "comment_id": 60348978, "body": "Did you change your design yet? Or you found an answer to your question?"}, {"owner": {"reputation": 836, "user_id": 623541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f8eee78b7fbca783d776b157f348b3f?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/623541/fred"}, "edited": false, "score": 0, "creation_date": 1498866434, "post_id": 36184401, "comment_id": 76692900, "body": "I have not found an answer."}, {"owner": {"reputation": 117, "user_id": 7413100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f392425ccfd9faa3be3e4bc125536df?s=128&d=identicon&r=PG&f=1", "display_name": "PorottayumBeefum", "link": "https://stackoverflow.com/users/7413100/porottayumbeefum"}, "edited": false, "score": 0, "creation_date": 1597097708, "post_id": 36184401, "comment_id": 112017749, "body": "I have seen a similar behaviour and searching for a solution. In the above case if i create a dynamic mock object(raw pointer in the test fixture class and intentionally don&#39;t delete the pointer in the destructor ) then i get the expected call but with memory leak. I appreciate your valuable feedback."}], "owner": {"reputation": 836, "user_id": 623541, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9f8eee78b7fbca783d776b157f348b3f?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/623541/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 939, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458758953, "creation_date": 1458752584, "last_edit_date": 1592644375, "question_id": 36184401, "link": "https://stackoverflow.com/questions/36184401/gmock-doesnt-match-expect-call", "title": "GMock doesn&#39;t match EXPECT_CALL", "body": "<p>I have a mocked function that when I run in a unit test with the anything matcher ('_') the unit test fails because GMock can't find a matched function.</p>\n<p>Here is my mocked class and function:</p>\n<pre><code>class MockedClass {\npublic:\n    MockedClass() {};\n    ~MockedClass() {};\n    MOCK_METHOD1(unregisterClient, bool(const ThriftClient&amp; tClient));\n};\n\nclass ConnectionClass {\npublic:\n    ConnectionClass() {};\n    ~ConnectionClass() {};\n\n    bool unregisterClient(ThriftClient&amp; tClient)\n    {\n        bool ret = false;\n        if (mock_ != NULL)\n            ret = mock_-&gt;unregisterClient(tClient);\n        return ret;\n    }\n\n    static MockedClass *mock_;\n};\n\nMockedClass *ConnectionClass::mock_ = NULL;\n</code></pre>\n<p>Here is the function under test:</p>\n<pre><code>class RealObject {\npublic:\n    RealObject(ConnectionClass &amp;cc);\n    void unregister();\n\nprivate:\n    ConnectionClass &amp;cc_;\n    ThriftClient tClient_;\n\n}\n\nRealObject::RealObject(ConnectionClass &amp;cc) {\n    cc_ = &amp;cc;\n}\n\nvoid RealObject::unregister() {\n    cc_-&gt;unregisterClient(tClient_);\n}\n</code></pre>\n<p>Here is the test function:</p>\n<pre><code>TEST_F(Test, UnregisterTest) {\n    MockedClass mclass;\n    ConnectionClass cc;\n    cc.mock_ = &amp;mclass;\n    RealObject obj(cc);\n\n    EXPECT_CALL(mclass, unregisterClient(_)).WillOnce(Return(true));\n\n    obj.unregister(); // Calls mocked function\n}\n</code></pre>\n<p>Here is the failure message:</p>\n<blockquote>\n<p>Test.cpp:142: Failure Actual function call count doesn't match</p>\n<p>EXPECT_CALL(mclass, unregisterClient(_))...</p>\n<p>Expected: to be called once</p>\n<p>Actual: never called - unsatisfied and active</p>\n</blockquote>\n<p>I have also tried:</p>\n<pre><code>EXPECT_CALL(mclass, unregisterClient(Matcher&lt;const ThriftClient&amp;&gt;(_))).WillOnce(Return(true));\n\nEXPECT_CALL(mclass, unregisterClient(An&lt;const ThriftClient&amp;&gt;())).WillOnce(Return(true));\n</code></pre>\n<p>All with the same failure message.</p>\n<p>Why am I getting this failure message? I don't understand why GMock can't match the function call.</p>\n"}, {"tags": ["c++", "android-ndk"], "comments": [{"owner": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 2, "creation_date": 1458753116, "post_id": 36184266, "comment_id": 60004404, "body": "Show your code please.  Otherwise we have to guess."}, {"owner": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1458812842, "post_id": 36184266, "comment_id": 60027819, "body": "In addition to showing us the code you should also verify that you&#39;ve saved the code changes, rebuilt the code and the APK, and installed the new version of the APK."}, {"owner": {"reputation": 23, "user_id": 5109190, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QEpln9t_68s/AAAAAAAAAAI/AAAAAAAAABc/P1hyYCn3njU/photo.jpg?sz=128", "display_name": "Faizi Rapper", "link": "https://stackoverflow.com/users/5109190/faizi-rapper"}, "reply_to_user": {"reputation": 51929, "user_id": 1524450, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BSzDV.png?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/1524450/michael"}, "edited": false, "score": 0, "creation_date": 1458927847, "post_id": 36184266, "comment_id": 60081220, "body": "Thanks! all of you whom commented, @Michael I&#39;ve done all of it saved changes,rebuilt and then installed. but still getting error. I&#39;m showing you pics now."}, {"owner": {"reputation": 23, "user_id": 5109190, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QEpln9t_68s/AAAAAAAAAAI/AAAAAAAAABc/P1hyYCn3njU/photo.jpg?sz=128", "display_name": "Faizi Rapper", "link": "https://stackoverflow.com/users/5109190/faizi-rapper"}, "reply_to_user": {"reputation": 1636, "user_id": 3370124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f73352b4adb282c092738f34883488dd?s=128&d=identicon&r=PG&f=1", "display_name": "Richard Critten", "link": "https://stackoverflow.com/users/3370124/richard-critten"}, "edited": false, "score": 0, "creation_date": 1458928238, "post_id": 36184266, "comment_id": 60081412, "body": "@RichardCritten Thanks! here is the code."}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 5109190, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QEpln9t_68s/AAAAAAAAAAI/AAAAAAAAABc/P1hyYCn3njU/photo.jpg?sz=128", "display_name": "Faizi Rapper", "link": "https://stackoverflow.com/users/5109190/faizi-rapper"}, "is_accepted": false, "score": 0, "last_activity_date": 1477635806, "creation_date": 1477635806, "answer_id": 40299226, "question_id": 36184266, "link": "https://stackoverflow.com/questions/36184266/android-ndk-library-function-newstringutfmy-library-not-changing-the-str/40299226#40299226", "title": "Android :NDK: Library function :newStringUTF(&quot;My Library&quot;); not changing the string in output", "body": "<p>I've found the solution.\nWhen you debug your code and show output in emulator or running device, make sure you built each time ndk libraries.</p>\n"}], "owner": {"reputation": 23, "user_id": 5109190, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QEpln9t_68s/AAAAAAAAAAI/AAAAAAAAABc/P1hyYCn3njU/photo.jpg?sz=128", "display_name": "Faizi Rapper", "link": "https://stackoverflow.com/users/5109190/faizi-rapper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477635806, "creation_date": 1458752165, "last_edit_date": 1458930246, "question_id": 36184266, "link": "https://stackoverflow.com/questions/36184266/android-ndk-library-function-newstringutfmy-library-not-changing-the-str", "title": "Android :NDK: Library function :newStringUTF(&quot;My Library&quot;); not changing the string in output", "body": "<p>when i try to change words onto the Native code file(ndktest.c) \nhere \"return (*env).NewStringUTF(\"My Library\");\"\n\"My Library \" to \"My\" then in the output it keeps on showing me \"My Library\" rather than \"My\" how can i fix this....Can you help me Thanks!</p>\n\n<p>1-this is the java side code.</p>\n\n<pre><code>static {\n        System.loadLibrary(\"HelloJNI\");\n    }\n    public native String HelloJNI();\n</code></pre>\n\n<p>2-this is the c/c++ side code.</p>\n\n<pre><code>JNIEXPORT jstring JNICALL Java_com_happy_ndktest_MyNDK_HelloJNI(JNIEnv *env, jobject obj) {\n    return (*env).NewStringUTF(\"My\");\n</code></pre>\n"}, {"tags": ["c++", "opengl", "boost", "game-engine", "sdl-2"], "answers": [{"comments": [{"owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 3, "creation_date": 1458757001, "post_id": 36185229, "comment_id": 60006821, "body": "order of the initialization list doesn&#39;t matter, c++ follows the order in which the members are defined in the class (at least last I checked)"}, {"owner": {"reputation": 107, "user_id": 5019115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hqCpt.jpg?s=128&g=1", "display_name": "thatman", "link": "https://stackoverflow.com/users/5019115/thatman"}, "edited": false, "score": 0, "creation_date": 1458757334, "post_id": 36185229, "comment_id": 60007014, "body": "Thanks for the suggestion @much_a_chos. Unfortunately it didn&#39;t work. I rearranged the initialization list like you suggested but the same error occurs at the same place (the sigsegv at glGenVertexArrays)"}, {"owner": {"reputation": 492, "user_id": 5248907, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1e8033de32c3fb5fbd562edbb5711a03?s=128&d=identicon&r=PG&f=1", "display_name": "pandaman1234", "link": "https://stackoverflow.com/users/5248907/pandaman1234"}, "reply_to_user": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "edited": false, "score": 0, "creation_date": 1458757534, "post_id": 36185229, "comment_id": 60007145, "body": "@vu1p3n0x You&#39;re right. I&#39;ll change my answer according to this detail I was unaware of. Thanks"}, {"owner": {"reputation": 492, "user_id": 5248907, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1e8033de32c3fb5fbd562edbb5711a03?s=128&d=identicon&r=PG&f=1", "display_name": "pandaman1234", "link": "https://stackoverflow.com/users/5248907/pandaman1234"}, "reply_to_user": {"reputation": 107, "user_id": 5019115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hqCpt.jpg?s=128&g=1", "display_name": "thatman", "link": "https://stackoverflow.com/users/5019115/thatman"}, "edited": false, "score": 0, "creation_date": 1458757653, "post_id": 36185229, "comment_id": 60007213, "body": "@searchnot Well I tested what vu1p3n0x stated and he was right so testing what I said surely didn&#39;t change anything to your code. But I would recommend making sure your calls are done in the right order, since everything else (in my eyes) seems fine."}, {"owner": {"reputation": 107, "user_id": 5019115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hqCpt.jpg?s=128&g=1", "display_name": "thatman", "link": "https://stackoverflow.com/users/5019115/thatman"}, "edited": false, "score": 0, "creation_date": 1458758785, "post_id": 36185229, "comment_id": 60007879, "body": "vu1p3n0x, @much_a_chos and anyone else watching this: I posted an Edit at the top before my question in which I called <i>glewInit()</i> before <i>glGenVertexArrays()</i> and  it closed with the error that glew failed to initialize. Any thoughts?"}, {"owner": {"reputation": 492, "user_id": 5248907, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1e8033de32c3fb5fbd562edbb5711a03?s=128&d=identicon&r=PG&f=1", "display_name": "pandaman1234", "link": "https://stackoverflow.com/users/5248907/pandaman1234"}, "reply_to_user": {"reputation": 107, "user_id": 5019115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hqCpt.jpg?s=128&g=1", "display_name": "thatman", "link": "https://stackoverflow.com/users/5019115/thatman"}, "edited": false, "score": 0, "creation_date": 1458760439, "post_id": 36185229, "comment_id": 60008829, "body": "@searchnot Did you copied only <code>glewInit()</code> or also <code>glewExperimental = GL_TRUE</code>? Because OpenGL (and glew which follows the same pattern) in general is like a big state machine and omitting flags before calling initialization functions would be a bad idea (refer to <a href=\"http://stackoverflow.com/a/8303331/5248907\">this answer</a>), but then again with the information you provide there&#39;s theoretically nothing wrong with calling <code>glewInit</code> before <code>glGenVertexArrays</code>... Also, before copying <i>only</i> glewInit, I&#39;d make sure my OpenGL context is previously created..."}], "tags": [], "owner": {"reputation": 492, "user_id": 5248907, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1e8033de32c3fb5fbd562edbb5711a03?s=128&d=identicon&r=PG&f=1", "display_name": "pandaman1234", "link": "https://stackoverflow.com/users/5248907/pandaman1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1458758080, "last_edit_date": 1495535636, "creation_date": 1458755209, "answer_id": 36185229, "question_id": 36184231, "link": "https://stackoverflow.com/questions/36184231/opengl-sigsegv-error-in-class-constructor/36185229#36185229", "title": "OpenGL sigsegv error in class constructor", "body": "<p>A long shot here, since the given amount of information is pretty big. I searched for similar questions like <a href=\"https://stackoverflow.com/questions/8302625/segmentation-fault-at-glgenvertexarrays-1-vao\">this one</a> and <a href=\"https://stackoverflow.com/questions/22822184/opengl-segfaults-on-glgenvertexarrays\">this one</a>, but every one of them have been answered with tricks you're doing in your Window class constructor <strong>that have to be called before your game constructor</strong>. And as I can see in your TempCore constructor, you build your game object (and make a call to glGenVertexArrays) <strong>before</strong> your Window object is constructed </p>\n\n<pre><code>...\n\nTempCore(Game* g) :\n    gamew(g), win(800, 800, \"EngineTry\", false) {}\n\n...\n</code></pre>\n\n<p>So before making calls for creating your OpenGL context with <code>SDL_GL_CreateContext(m_window)</code> and before <code>glewExperimental = GL_TRUE; glewInit();</code>. And then you say that putting it in the main in this order solves the problem...</p>\n\n<pre><code>...\nWindow win(800, 800, \"EngineTry\", false); //Creates an SDL implemented window with a GL_context\nGame* gamew = new Game;\n...\n</code></pre>\n\n<p>Maybe reordering your initialization list in your constructor like this could solve your problem?</p>\n\n<pre><code>class TempCore\n{\npublic:\n    TempCore(Game* g) :\n        win(800, 800, \"EngineTry\", false), gamew(g) {}\n    ~TempCore() { if(gamew) delete gamew; }\n\n...\n};\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I was wrong, as stated in the comments, the initialization list order doesn't matter. It's the definition order that matters, which is correct here...</p>\n"}, {"tags": [], "owner": {"reputation": 14053, "user_id": 2189130, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/trlri.png?s=128&g=1", "display_name": "kmdreko", "link": "https://stackoverflow.com/users/2189130/kmdreko"}, "is_accepted": false, "score": 0, "last_activity_date": 1458760189, "last_edit_date": 1458760189, "creation_date": 1458759682, "answer_id": 36186584, "question_id": 36184231, "link": "https://stackoverflow.com/questions/36184231/opengl-sigsegv-error-in-class-constructor/36186584#36186584", "title": "OpenGL sigsegv error in class constructor", "body": "<p>Addressing your edit: You should not call <code>glewInit()</code> more than once. I'm not familiar with glew in this regard but in general, anything should only be \"initialized\" once. glew probably assumes that it is uninitialized and errors out when some initialization is already there. </p>\n\n<p>I'd recommend calling <code>glewInit()</code> at the very beginning of the program and not in an object constructor. (Unless you have that object \"own\" glew)</p>\n\n<p><strong>Edit:</strong> It seems my assumption about <code>glewInit()</code> was slightly wrong. <code>glewInit()</code> behaves differently depending on the build, but regardless should only be called if you switch contexts. However, because you aren't changing context (from what I see) you should not call it more than once. </p>\n"}, {"comments": [{"owner": {"reputation": 107, "user_id": 5019115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hqCpt.jpg?s=128&g=1", "display_name": "thatman", "link": "https://stackoverflow.com/users/5019115/thatman"}, "edited": false, "score": 1, "creation_date": 1459112025, "post_id": 36252518, "comment_id": 60134736, "body": "And @vu1p3n0x as well"}, {"owner": {"reputation": 492, "user_id": 5248907, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1e8033de32c3fb5fbd562edbb5711a03?s=128&d=identicon&r=PG&f=1", "display_name": "pandaman1234", "link": "https://stackoverflow.com/users/5248907/pandaman1234"}, "edited": false, "score": 0, "creation_date": 1461273929, "post_id": 36252518, "comment_id": 61137863, "body": "Sorry for the delay of response, glad you found the problem and we could help you!"}], "tags": [], "owner": {"reputation": 107, "user_id": 5019115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hqCpt.jpg?s=128&g=1", "display_name": "thatman", "link": "https://stackoverflow.com/users/5019115/thatman"}, "is_accepted": true, "score": 1, "last_activity_date": 1459111925, "creation_date": 1459111925, "answer_id": 36252518, "question_id": 36184231, "link": "https://stackoverflow.com/questions/36184231/opengl-sigsegv-error-in-class-constructor/36252518#36252518", "title": "OpenGL sigsegv error in class constructor", "body": "<p>Thanks to both @much_a_chos and @vu1p3n0x for your help. Turns out much_a_chos had the right idea with the <code>Game</code> object initializing before the Window object, thus missing the <code>glewInit()</code> call altogether, resulting in the sigsegv error. The problem, however, was not in the initializer list but in the main.cpp file. I was <strong>creating a Game class object and then passing that Game object via pointer to the core class</strong>, so regardless of how I arranged the Core class, the Game object would always initialize before the Window class, and would therefore always do its <code>glGenVertexArrays</code> call before <code>glewInit()</code> is called. This is a terrible logic error on my side and I apologize for wasting your time.</p>\n\n<p>Below are extracts from the fixed main.cpp file and the fixed <code>TempCore</code> class (please keep in mind that these are temporary fixes to illustrate how I would go about fixing my mistake):</p>\n\n<pre><code>class TempCore\n{\npublic:\n    TempCore(Window* w, Game* g) :  //take in a Window class pointer to ensure its created before the Game class constructor\n        win(w), gamew(g) {}\n    ~TempCore() { if(gamew) delete gamew; }\n\n    void start();\n\nprivate:\n    Window* win;\n    Game* gamew;\n};\n\nint WINAPI WinMain (HINSTANCE hThisInstance, HINSTANCE hPrevInstance, LPSTR lpszArgument, int nCmdShow)\n{\n    Window* win = new Window(800, 800, \"EngineTry\", false); //this way the Window constructor with the glewinit() call is called before the Game contructor\n    TempCore m_core(win, new Game());\n    m_core.start();\n\n    return 0;\n} \n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5019115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/hqCpt.jpg?s=128&g=1", "display_name": "thatman", "link": "https://stackoverflow.com/users/5019115/thatman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 1, "accepted_answer_id": 36252518, "answer_count": 3, "score": 1, "last_activity_date": 1459111925, "creation_date": 1458752083, "last_edit_date": 1458758889, "question_id": 36184231, "link": "https://stackoverflow.com/questions/36184231/opengl-sigsegv-error-in-class-constructor", "title": "OpenGL sigsegv error in class constructor", "body": "<p><strong>EDIT*</strong> I rearranged the initialization list, as suggested by much_a_chos, so that the Window object initializes before the Game object, ensuring that glew is initialized first. However, this did not work:</p>\n\n<pre><code>//Rearranged initialization list \nclass TempCore\n{\npublic:\n    TempCore(Game* g) :\n        win(new Window(800, 800, \"EngineTry\", false)), gamew(g) {}\n    ~TempCore() { if(gamew) delete gamew; } \n...\n};\n</code></pre>\n\n<p>And here is the code I changed in the Mesh constructor when the above didn't work:</p>\n\n<pre><code>Mesh::Mesh( Vertex* vertices, unsigned int numVerts )\n{\n    m_drawCount = numVerts;\n\n    glewExperimental = GL_TRUE;\n    if(glewInit() != GLEW_OK){\n        exit(-150);   //application stops and exits here with the code -150\n    }\n\n    glGenVertexArrays(1, &amp;m_vertexArrayObject);\n    glBindVertexArray(m_vertexArrayObject);\n\n   ...\n}\n</code></pre>\n\n<p>What happens when I compile and run is surprising. <strong>The program exits at the <code>if(glewInit() != GLEW_OK)</code> I copied from the Window constructor.</strong> For some reason glew initializes properly in the Window constructor (which is called before the Game constructor), but it fails to initialize when called the second time in the Mesh constructor. I assume its bad practice to call on <code>glewInit()</code> more than once in a program, but I don't think it should fail if I actually did so. Does anybody know what might be happening? Am I making a mistake in calling <code>glewInit()</code> more than once?</p>\n\n<p><strong>*END OF EDIT</strong></p>\n\n<p>I've been following a <a href=\"https://www.youtube.com/playlist?list=PLEETnX-uPtBXP_B2yupUKlflXBznWIlL5\" rel=\"nofollow\">3D Game Engine Development tutorial</a> and I've encountered a weird bug in my code, which I will demonstrate below. I'm attempting to make my own game-engine purely for educational reasons. I'm using Code-blocks 13.12 as my IDE and mingw-w64 v4.0 as my compiler. I'm also using SDL2, glew, Assimp and boost as my third-party libraries.</p>\n\n<p>I apologize in advance for the numerous code extracts, but I put in what I thought what was necessary to understand the context of the error.</p>\n\n<p>I have a <code>Core</code> class for my game-engine that holds the main loop and updates and renders accordingly, calling the <code>Game</code> class <code>update()</code> and <code>render()</code> methods in the process as well. The Game class is intended as the holder for all the assets in the game, and will be the base class for any games made using the engine, thus, it contains mesh, texture and camera references. The Game class <code>update()</code>, <code>render()</code> and <code>input()</code> methods are all virtual as the <code>Game</code> class is meant to be derived.</p>\n\n<p>My problem is: when I initialize the Game member variable in the <code>Core</code> class, I get a SIGSEGV (i.e. segmentation fault) in the <code>Mesh</code> object's constructor at the <code>glGenVertexArrays</code> call. \nHowever, when I move my <code>Game</code> object out of the <code>Core</code> class and straight into the main method (so I changed it from being a class member to a simple scoped variable in the main method), along with the necessary parts from the <code>Core</code> class, then its runs perfectly and renders my rudimentary triangle example. This is a bug I've never come across and I would really appreciate any help I can get. </p>\n\n<p>Below is an extract of my morphed code that ran perfectly and rendered the triangle:</p>\n\n<pre><code>int WINAPI WinMain (HINSTANCE hThisInstance, HINSTANCE hPrevInstance, LPSTR lpszArgument, int nCmdShow)\n{\n    Window win(800, 800, \"EngineTry\", false); //Creates an SDL implemented window with a GL_context\n    Game* gamew = new Game;\n    const double frameTime = 1.0 / 500;  //500 = maximum fps\n\n    double lastTime = FTime::getTime();  //gets current time in milliseconds\n    double unprocessedTime = 0.0;\n    int frames = 0;\n    double frameCounter = 0;\n\n    while(win.isRunning()){\n        bool _render = false;\n\n        double startTime = FTime::getTime();\n        double passedTime = startTime - lastTime;\n        lastTime = startTime;\n\n        unprocessedTime += passedTime / (double)FTime::SECOND;\n        frameCounter += passedTime;\n\n        while(unprocessedTime &gt; frameTime){\n            if(!win.isRunning())\n                exit(0);\n            _render = true;\n\n            unprocessedTime -= frameTime;\n            FTime::delta = frameTime;\n\n            gamew-&gt;input();\n            Input::update();\n            gamew-&gt;update();\n\n            if(frameCounter &gt;= FTime::SECOND)\n            {\n                std::cout &lt;&lt; \"FPS: \" &lt;&lt; frames &lt;&lt; std::endl;\n                frames = 0;\n                frameCounter = 0;\n            }\n        }\n\n        if(_render){\n            RenderUtil::clearScreen(); //simple wrapper to the glClear function\n            gamew-&gt;render();\n            win.Update();\n            frames++;\n        }else{\n            Sleep(1);\n        }\n    }\n\n    delete gamew;\n    return 0;\n}\n</code></pre>\n\n<p>Here is an extract of my modified <code>Core</code> class that doesn't work (throws the sigsegv in the <code>Mesh</code> constructor)</p>\n\n<pre><code>class TempCore\n{\npublic:\n    TempCore(Game* g) :\n        gamew(g), win(800, 800, \"EngineTry\", false) {}\n    ~TempCore() { if(gamew) delete gamew; }\n\n    void start();\n\nprivate:\n    Window win;\n    Game* gamew;\n};\n\n\nint WINAPI WinMain (HINSTANCE hThisInstance, HINSTANCE hPrevInstance, LPSTR lpszArgument, int nCmdShow)\n{\n    TempCore m_core(new Game());\n    m_core.start();\n\n    return 0;\n}\n\n\nvoid TempCore::start()\n{\n    const double frameTime = 1.0 / 500;\n\n    double lastTime = FTime::getTime();\n    double unprocessedTime = 0.0;\n    int frames = 0;\n    double frameCounter = 0;\n\n    while(win.isRunning()){\n        bool _render = false;\n\n        double startTime = FTime::getTime();\n        double passedTime = startTime - lastTime;\n        lastTime = startTime;\n\n        unprocessedTime += passedTime / (double)FTime::SECOND;\n        frameCounter += passedTime;\n\n        while(unprocessedTime &gt; frameTime){\n            if(!win.isRunning())\n                exit(0);\n            _render = true;\n\n            unprocessedTime -= frameTime;\n            FTime::delta = frameTime;\n\n            gamew-&gt;input();\n            Input::update();\n            gamew-&gt;update();\n\n            if(frameCounter &gt;= FTime::SECOND){\n                //double totalTime = ((1000.0 * frameCounter)/((double)frames));\n                //double totalMeasuredTime = 0.0;\n\n                std::cout &lt;&lt; \"Frames: \" &lt;&lt; frames &lt;&lt; std::endl;\n                //m_frames_per_second = frames;\n                frames = 0;\n                frameCounter = 0;\n            }\n        }\n\n        if(_render){\n            RenderUtil::clearScreen();\n            gamew-&gt;render();\n            win.Update();\n            frames++;\n        }else{\n            Sleep(1);\n        }\n    }\n}\n</code></pre>\n\n<p>Mesh constructor where the sigsegv occurs in the above <code>TestCore</code> implementation:</p>\n\n<pre><code>Mesh::Mesh( Vertex* vertices, unsigned int numVerts )\n{\n    m_drawCount = numVerts;\n\n    glGenVertexArrays(1, &amp;m_vertexArrayObject); //sigsegv occurs here\n    glBindVertexArray(m_vertexArrayObject);\n\n        std::vector&lt;glm::vec3&gt; positions;\n        std::vector&lt;glm::vec2&gt; texCoords;\n        positions.reserve(numVerts);\n        texCoords.reserve(numVerts);\n\n        for(unsigned i = 0; i &lt; numVerts; i++){\n            positions.push_back(vertices[i].pos);\n            texCoords.push_back(vertices[i].texCoord);\n        }\n\n        glGenBuffers(NUM_BUFFERS, m_vertexArrayBuffers);\n        glBindBuffer(GL_ARRAY_BUFFER, m_vertexArrayBuffers[POSITION_VB]); \n        glBufferData(GL_ARRAY_BUFFER, numVerts*sizeof(positions[0]), &amp;positions[0], GL_STATIC_DRAW); \n\n        glEnableVertexAttribArray(0); \n        glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);\n\n\n        glBindBuffer(GL_ARRAY_BUFFER, m_vertexArrayBuffers[TEXCOORD_VB]); \n        glBufferData(GL_ARRAY_BUFFER, numVerts*sizeof(texCoords[0]), &amp;texCoords[0], GL_STATIC_DRAW);\n\n        glEnableVertexAttribArray(1);\n        glVertexAttribPointer(1, 2, GL_FLOAT, GL_FALSE, 0, 0);\n\n    glBindVertexArray(0);\n}\n</code></pre>\n\n<p>The <code>Game</code> constructor that initializes the <code>Mesh</code> object:</p>\n\n<pre><code>Vertex vertices[] = {   Vertex(-0.5f, -0.5f, 0, 0, 0),\n                        Vertex(0, 0.5f, 0, 0.5f, 1.0f),\n                        Vertex(0.5f, -0.5f, 0, 1.0f, 0)};\n//Vertex is basically a struct with a glm::vec3 for position and a glm::vec2 for texture coordinate\n\nGame::Game() :\n    m_mesh(vertices, sizeof(vertices)/sizeof(vertices[0])),\n    m_shader(\"res\\\\shaders\\\\basic_shader\"),\n    m_texture(\"res\\\\textures\\\\mist_tree.jpg\")\n{\n}\n</code></pre>\n\n<p>The <code>Window</code> class constructor that initializes <code>glew</code>:</p>\n\n<pre><code>Window::Window(int width, int height, const std::string&amp; title, bool full_screen) :\n    m_fullscreen(full_screen)\n{\n    SDL_Init(SDL_INIT_EVERYTHING);\n\n        SDL_GL_SetAttribute(SDL_GL_RED_SIZE, 8);\n        SDL_GL_SetAttribute(SDL_GL_GREEN_SIZE, 8);\n        SDL_GL_SetAttribute(SDL_GL_BLUE_SIZE, 8);\n        SDL_GL_SetAttribute(SDL_GL_ALPHA_SIZE, 8);\n        SDL_GL_SetAttribute(SDL_GL_BUFFER_SIZE, 32);\n        SDL_GL_SetAttribute(SDL_GL_DOUBLEBUFFER, 1);\n\n    //SDL_Window* in private of class declaration \n    m_window = SDL_CreateWindow(title.c_str(), SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, width, height, SDL_WINDOW_OPENGL | SDL_WINDOW_RESIZABLE);\n    //SDL_GLContext in private of class declaration \n    m_glContext = SDL_GL_CreateContext(m_window);\n\n    std::cout &lt;&lt; \"GL Version: \" &lt;&lt; glGetString(GL_VERSION) &lt;&lt; std::endl;\n    glewExperimental = GL_TRUE;\n    if(glewInit() != GLEW_OK || !glVersionAbove(3.0)){\n        std::cerr &lt;&lt; \"Glew failed to initialize...\\n\";\n        exit(-150);\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "c++11", "reference", "reference-wrapper"], "comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458752627, "post_id": 36184223, "comment_id": 60004087, "body": "As a matter of fact, the best usage of <code>std::ref</code> is with functions which forward their arguments. The most classic case is <code>std::thread</code>. I would not advocate for using it to store objects in containers - pointers (smart or raw) are better there."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1458753352, "post_id": 36184223, "comment_id": 60004561, "body": "I&#39;m not a big fan, mostly because storing pointers/references into oneself can be error-prone (for example, the moved-from state of your <code>Printer</code> is broken). I&#39;d probably use a private helper like <code>std::ostream&amp; stream(){ return fileOutput ? *fileOutput : std::cout; }</code>"}, {"owner": {"reputation": 253, "user_id": 1268568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvKC4.jpg?s=128&g=1", "display_name": "Caetano Sauer", "link": "https://stackoverflow.com/users/1268568/caetano-sauer"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458761113, "post_id": 36184223, "comment_id": 60009295, "body": "@SergeyA My first idea was indeed to use a single smart pointer (unique or shared), but I don&#39;t think that makes sense because my object does not own <code>std::cout</code>, so it should not try to destroy. I guess this would only make sense if <code>std::cout</code> would be available as a global <code>shared_ptr</code>."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458761281, "post_id": 36184223, "comment_id": 60009410, "body": "@CaetanoSauer, don&#39;t be afraid of raw pointers. Just have a raw pointer to the stream and maintain it is managed externally."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1458763603, "post_id": 36184223, "comment_id": 60010659, "body": "You can (ab)use <code>shared_ptr</code> for this, just start with a non-owning <code>shared_ptr</code> to <code>cout</code> and replace it with an owning one. I&#39;m not sure how much I like it, but you can do it."}, {"owner": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1537709850, "post_id": 36184223, "comment_id": 91874911, "body": "As well as being error-prone, having one member that exists only to reference another is the pinnacle of redundancy, and not in a good way. I agree with T.C.&#39;s recommendation to just have a member function that returns the appropriate stream. That said: @T.C. What is &quot;a non-owning <code>shared_ptr</code>&quot;? How are those created?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "reply_to_user": {"reputation": 5304, "user_id": 2757035, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/fade5daafd5717576b33f2e08f4f9429?s=128&d=identicon&r=PG&f=1", "display_name": "underscore_d", "link": "https://stackoverflow.com/users/2757035/underscore-d"}, "edited": false, "score": 0, "creation_date": 1537722290, "post_id": 36184223, "comment_id": 91878545, "body": "@underscore_d with the aliasing constructor."}], "owner": {"reputation": 253, "user_id": 1268568, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvKC4.jpg?s=128&g=1", "display_name": "Caetano Sauer", "link": "https://stackoverflow.com/users/1268568/caetano-sauer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 429, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458752066, "creation_date": 1458752066, "question_id": 36184223, "link": "https://stackoverflow.com/questions/36184223/is-this-a-good-use-of-reference-wrapper", "title": "Is this a good use of reference_wrapper?", "body": "<p>From what I understand, the C++ template class <code>reference_wrapper</code> is useful for references in containers and tuples, because it essentially provides a copy-constructor and assignment operator to normal references. In other words, it seems to be like a pointer that does not allow null.</p>\n\n<p>Based on that understanding, I tried to implement a class that prints strings to <code>std::cout</code> by default but allows the user to override that with a file. This is probably not useful for any real-world program; I just use it here as an example. As an exercise in modern C++, I wanted to avoid using new/delete and rely on RAII features. Here's what the class looks like:</p>\n\n<pre><code>class Printer {\npublic:\n    Printer() : myOut(std::cout)\n    {}\n\n    void print(string str)\n    {\n        myOut.get() &lt;&lt; str &lt;&lt; endl;\n    }\n\n    void setFileOutput(string path)\n    {\n        fileOutput.reset(new ofstream(path));\n        myOut = *fileOutput;\n    }\n\nprivate:\n    reference_wrapper&lt;ostream&gt; myOut;\n    unique_ptr&lt;ofstream&gt; fileOutput;\n};\n</code></pre>\n\n<p>Everything works as expected, but this is quite a different use case from examples of <code>reference_wrapper</code> I've found online. Is this considered to be a valid use of <code>reference_wrapper</code>? Is there a better alternative that uses modern C++ features such as automatic resource management and RAII?</p>\n"}, {"tags": ["c++", "templates", "boost"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 1, "creation_date": 1458754827, "post_id": 36184065, "comment_id": 60005516, "body": "<a href=\"http://boost.2283326.n4.nabble.com/mpl-Please-help-with-mpl-equal-td2557081.html\" rel=\"nofollow noreferrer\">boost.2283326.n4.nabble.com/&hellip;</a>"}, {"owner": {"reputation": 658, "user_id": 1777820, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0b583c369129af2f2f6a76e0bb65711d?s=128&d=identicon&r=PG", "display_name": "user1777820", "link": "https://stackoverflow.com/users/1777820/user1777820"}, "reply_to_user": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1458757610, "post_id": 36184065, "comment_id": 60007185, "body": "@jv_ Yep, that was my problem. Thanks."}, {"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1458757749, "post_id": 36184065, "comment_id": 60007264, "body": "That second edit would be a perfect answer(maybe removing the jv_ and crediting the person in the mailing list)."}, {"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1458829053, "post_id": 36184065, "comment_id": 60038049, "body": "I meant to say that you should copy your second edit and post it as an answer, since it explains perfectly the problem and solution."}, {"owner": {"reputation": 658, "user_id": 1777820, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0b583c369129af2f2f6a76e0bb65711d?s=128&d=identicon&r=PG", "display_name": "user1777820", "link": "https://stackoverflow.com/users/1777820/user1777820"}, "reply_to_user": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1458829328, "post_id": 36184065, "comment_id": 60038238, "body": "@jv_ Done. Thanks again."}], "answers": [{"tags": [], "owner": {"reputation": 658, "user_id": 1777820, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0b583c369129af2f2f6a76e0bb65711d?s=128&d=identicon&r=PG", "display_name": "user1777820", "link": "https://stackoverflow.com/users/1777820/user1777820"}, "is_accepted": true, "score": 1, "last_activity_date": 1458829227, "creation_date": 1458829227, "answer_id": 36202428, "question_id": 36184065, "link": "https://stackoverflow.com/questions/36184065/using-boost-mpl-to-compute-lengths-of-vectors/36202428#36202428", "title": "Using Boost MPL to Compute Lengths of Vectors", "body": "<p>jv_ pointed me to the answer, which can be found <a href=\"http://boost.2283326.n4.nabble.com/mpl-Please-help-with-mpl-equal-td2557081.html\" rel=\"nofollow\">here</a> (thanks to Andy Little). Basically I was using mpl::equal incorrectly in all of the code above. mpl::equal uses mpl::is_same under the hood (default third template parameter), which checks if types are exactly the same. I need to provide a third template parameter to mpl::equal, mpl::equal_to, such that the values of the integral constants are compared one by one. The final assert statement looks like this:</p>\n\n<pre><code>BOOST_MPL_ASSERT(( mpl::equal&lt;lengths, mpl::vector_c&lt;int, 1, 1, 1&gt;::type, mpl::equal_to&lt;mpl::_1, mpl::_2&gt; &gt;));\n</code></pre>\n"}], "owner": {"reputation": 658, "user_id": 1777820, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0b583c369129af2f2f6a76e0bb65711d?s=128&d=identicon&r=PG", "display_name": "user1777820", "link": "https://stackoverflow.com/users/1777820/user1777820"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 36202428, "answer_count": 1, "score": 2, "last_activity_date": 1458829294, "creation_date": 1458751641, "last_edit_date": 1458829294, "question_id": 36184065, "link": "https://stackoverflow.com/questions/36184065/using-boost-mpl-to-compute-lengths-of-vectors", "title": "Using Boost MPL to Compute Lengths of Vectors", "body": "<p>I'm using Boost MPL with C++03 and I'm having issues computing the lengths of mpl::vectors stored within another mpl::vector. For this simple example, the outer vector contains 3 inner vectors, and each inner vector contains just 1 entry which is mpl::int_&lt;0>. The code I'm using is the following:</p>\n\n<pre><code>struct ComputeLengths\n{\n    template &lt;typename vectorOfVectors&gt; struct apply\n    {\n        typedef typename mpl::transform\n                        &lt;\n                            vectorOfVectors, \n                            mpl::size&lt;mpl::_1&gt;\n                        &gt;::type type;\n    };\n};\n\nBOOST_MPL_ASSERT(( boost::mpl::equal&lt;vectorOfVectors, mpl::vector&lt;mpl::vector_c&lt;int, 0&gt;, mpl::vector_c&lt;int, 0&gt;, mpl::vector_c&lt;int, 0&gt; &gt;::type&gt; ));\n\ntypedef typename ComputeLengths::template apply&lt;vectorOfVectors&gt;::type lengths;\n\nBOOST_MPL_ASSERT(( boost::mpl::equal&lt;lengths, mpl::vector_c&lt;int, 1, 1, 1&gt;::type&gt; ));\n</code></pre>\n\n<p>I get an error at the second assert, which is:</p>\n\n<blockquote>\n  <p>error: no instance of function template \"mpl_::assertion_failed\"\n  matches the argument list</p>\n  \n  <p>argument types are: (mpl_::failed\n  ************boost::mpl::equal&lt; boost::mpl::v_item&lt; mpl_::long_&lt; 1L>, boost::mpl::v_item&lt; mpl_::long_&lt; 1L>,\n  boost::mpl::v_item&lt; mpl_::long_&lt; 1L>, boost::mpl::vector0&lt; mpl_::na>, 0>,\n  0>, 0>, boost::mpl::vector3_c&lt; int, 1, 1, 1>, boost::is_same&lt; mpl_::<em>,\n  mpl</em>::_>>::************)</p>\n</blockquote>\n\n<p>What am I doing wrong here?</p>\n\n<p>Edit: I discovered the lengths seem to be computed correctly as the following asserts succeed:</p>\n\n<pre><code>BOOST_MPL_ASSERT(( boost::mpl::equal&lt; typename mpl::size&lt;vectorOfVectors&gt;::type,  typename mpl::int_&lt;3&gt;::type &gt; ));\nBOOST_MPL_ASSERT(( boost::mpl::equal&lt; typename mpl::at&lt;vectorOfVectors, mpl::int_&lt;0&gt; &gt;::type, typename mpl::int_&lt;1&gt;::type &gt; ));\nBOOST_MPL_ASSERT(( boost::mpl::equal&lt; typename mpl::at&lt;vectorOfVectors, mpl::int_&lt;1&gt; &gt;::type, typename mpl::int_&lt;1&gt;::type &gt; ));\nBOOST_MPL_ASSERT(( boost::mpl::equal&lt; typename mpl::at&lt;vectorOfVectors, mpl::int_&lt;2&gt; &gt;::type, typename mpl::int_&lt;1&gt;::type &gt; ));\n</code></pre>\n\n<p>So the issue is with the assert statement.</p>\n"}, {"tags": ["c++", "swig"], "answers": [{"comments": [{"owner": {"reputation": 658, "user_id": 4101264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b0e0945c2ed83d973f412e6e4b9d0141?s=128&d=identicon&r=PG&f=1", "display_name": "rents", "link": "https://stackoverflow.com/users/4101264/rents"}, "edited": false, "score": 0, "creation_date": 1458752300, "post_id": 36184265, "comment_id": 60003860, "body": "Compilation error at your 1st line - storage size of &#39;variable&#39; isn&#39;t known"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "reply_to_user": {"reputation": 658, "user_id": 4101264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b0e0945c2ed83d973f412e6e4b9d0141?s=128&d=identicon&r=PG&f=1", "display_name": "rents", "link": "https://stackoverflow.com/users/4101264/rents"}, "edited": false, "score": 0, "creation_date": 1458752714, "post_id": 36184265, "comment_id": 60004139, "body": "@rents, Thanks for the review.  I resolved the issue."}], "tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1458752692, "last_edit_date": 1458752692, "creation_date": 1458752165, "answer_id": 36184265, "question_id": 36184048, "link": "https://stackoverflow.com/questions/36184048/casting-sometype-to-sometype-and-vice-versa/36184265#36184265", "title": "Casting SomeType** to SomeType*[] and vice versa", "body": "<p>The function wants an array of <em>pointers</em>.  </p>\n\n<p>The statement: </p>\n\n<pre><code>SomeType * variable[];\n</code></pre>\n\n<p>Is not valid syntax.</p>\n\n<p>You will need: </p>\n\n<pre><code>SomeType * * variable;\n</code></pre>\n\n<p>Declares a pointer to a pointer of <code>SomeType</code>.</p>\n\n<p>You will need to perform memory allocation in two steps.<br>\nFirst, allocate the array of pointers:  </p>\n\n<pre><code>variable = new SomeType * [/* some quantity */];\n</code></pre>\n\n<p>Remember, the above statement only allocates room for the pointers.  The memory contents is still not initialized.  </p>\n\n<p>Secondly, allocate pointers to the objects.  </p>\n\n<pre><code>for (unsigned int i = 0; i &lt; some_quantity; ++i)\n{\n  variable[i] = new SomeType;\n}\n</code></pre>\n\n<p>When deleting, delete the contents of the array before the array:</p>\n\n<pre><code>for (unsigned int i = 0; i &lt; some_quantity; ++i)\n{\n  delete variable[i];\n}\ndelete[] variable;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14308, "user_id": 1989425, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/aGyIU.png?s=128&g=1", "display_name": "autistic", "link": "https://stackoverflow.com/users/1989425/autistic"}, "is_accepted": false, "score": 0, "last_activity_date": 1458754446, "last_edit_date": 1458754446, "creation_date": 1458753861, "answer_id": 36184792, "question_id": 36184048, "link": "https://stackoverflow.com/questions/36184048/casting-sometype-to-sometype-and-vice-versa/36184792#36184792", "title": "Casting SomeType** to SomeType*[] and vice versa", "body": "<blockquote>\n  <p>The function definition accepts</p>\n\n<pre><code>SomeType const * const variable_name[]\n</code></pre>\n</blockquote>\n\n<p>I'm no expert in C++, but if the declaration of arrays in function parameters is the same as in C then this is a synonym for the following type:</p>\n\n<pre><code>SomeType const * const * variable_name\n</code></pre>\n\n<p>That is, an array in a function parameter <em>is really a pointer</em>. Your book should have explained this early on.</p>\n\n<hr>\n\n<blockquote>\n  <p>I have searched quite a lot, but I keep stumbling into post which allocate memory to SomeType** using new SomeType*[x] i.e.</p>\n\n<pre><code>SomeType** variable = new SomeType*[x];\n</code></pre>\n  \n  <p>Can you please tell me a way to do this?</p>\n</blockquote>\n\n<p>You could indeed allocate a <code>SomeType const * const *</code> using similar code to that, so you've answered your own question. I assume you could also use an <code>std::vector&lt;SomeType const * const&gt;</code> like so:</p>\n\n<pre><code>std::vector&lt;SomeType const * const&gt; *foo = new std::vector&lt;SomeType const * const&gt;();\n/* XXX: Add some items to the vector */\nSomeType const * const *bar = &amp;foo[0];\n</code></pre>\n\n<p>This would be useful if you're not sure how many items <code>foo</code> should contain, and you expect it to grow.</p>\n\n<hr>\n\n<p>I don't understand why people don't read books anymore. It's the fastest and cheapest (if you consider the cost of man hours) way to learn correctly from a reputable figure.</p>\n"}], "owner": {"reputation": 658, "user_id": 4101264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b0e0945c2ed83d973f412e6e4b9d0141?s=128&d=identicon&r=PG&f=1", "display_name": "rents", "link": "https://stackoverflow.com/users/4101264/rents"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1458754446, "creation_date": 1458751592, "last_edit_date": 1458753642, "question_id": 36184048, "link": "https://stackoverflow.com/questions/36184048/casting-sometype-to-sometype-and-vice-versa", "title": "Casting SomeType** to SomeType*[] and vice versa", "body": "<p>I really need to this specifically as I am using SWIG and need to make a cast to match the function definition.</p>\n\n<p>The function definition accepts </p>\n\n<pre><code>SomeType const * const variable_name[]\n</code></pre>\n\n<p>Also, another question would be-\nHow to allocate memory to </p>\n\n<pre><code>SomeType * variable[] = &lt;??? using new or malloc &gt;\n</code></pre>\n\n<p>for <code>x</code> entries?</p>\n\n<p>Edit:</p>\n\n<p>I have searched quite a lot, but I keep stumbling into post which allocate memory to <code>SomeType**</code> using new <code>SomeType*[x]</code> i.e.</p>\n\n<pre><code>SomeType** variable = new SomeType*[x];\n</code></pre>\n\n<p>Can you please tell me a way to do this?</p>\n"}, {"tags": ["c++", "email"], "comments": [{"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 2, "creation_date": 1458752311, "post_id": 36184009, "comment_id": 60003865, "body": "Perhaps if you added proper error checking before using the results of calls, things will improve. It looks like you&#39;re passing -1 in as the first parameter of a <code>.substr()</code> call."}, {"owner": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "reply_to_user": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1458753064, "post_id": 36184009, "comment_id": 60004371, "body": "I was trying to subtract one from the location of end. If it helps heres my main program."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1458753308, "post_id": 36184009, "comment_id": 60004541, "body": "How do you know it found anything?"}, {"owner": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "edited": false, "score": 0, "creation_date": 1458753550, "post_id": 36184009, "comment_id": 60004668, "body": "I don&#39;t. Im trying to get the line starting at &quot;mailto:&quot; then copy the email address after it then split it. But im not quite sure how to do that... Sorry this is my first time taking a programming class and actually doing programming so im lost."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1458753681, "post_id": 36184009, "comment_id": 60004756, "body": "It may help if you post some of the <i>text</i> file you are reading from <b>after removing any personal information</b>."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "edited": false, "score": 0, "creation_date": 1458753706, "post_id": 36184009, "comment_id": 60004773, "body": "off topic: <code>while(!in_stream.eof())</code> See this a couple times a day and it&#39;s almost always wrong. <a href=\"http://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong\">How can this not be part of the curriculum?</a>"}, {"owner": {"reputation": 445, "user_id": 5747545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a340b35f7f87c161d3e77e581d2f23a4?s=128&d=identicon&r=PG&f=1", "display_name": "88877", "link": "https://stackoverflow.com/users/5747545/88877"}, "edited": false, "score": 0, "creation_date": 1458753797, "post_id": 36184009, "comment_id": 60004841, "body": "<a href=\"http://www.cplusplus.com/reference/string/string/npos/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/string/string/npos</a> . Return value of the find function can be -1 if not found, if you use it without checking you may encounter strange cases like this one"}, {"owner": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "edited": false, "score": 0, "creation_date": 1458754146, "post_id": 36184009, "comment_id": 60005075, "body": "So how do I find the first &quot;mailto:&quot; then without a negative one returned."}, {"owner": {"reputation": 36985, "user_id": 749284, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9939c97c2ccc2f1f6b829e9afbc32e5b?s=128&d=identicon&r=PG", "display_name": "mah", "link": "https://stackoverflow.com/users/749284/mah"}, "edited": false, "score": 0, "creation_date": 1458782192, "post_id": 36184009, "comment_id": 60017963, "body": "@KevinSwagger sorry for the delay, just saw this. Your response to me misses the point I intended... When considering <code>mail = mail.substr(location, (end - 1));</code> for example, my comment was not concerned with <code>(end - 1)</code> (though that <i>does</i> warrant error checking since you cannot be certain <code>end</code> is set to a valid location without it). Rather, my concern is with <code>location</code> from <code>int location = mail.find(&quot;@&quot;);</code>. What if <code>@</code> isn&#39;t found? From your exception, <code>basic_string::substr: __pos (which is 4294967295)</code>... 4294967295 is the 32 bit unsigned representation of <code>-1</code>."}, {"owner": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "edited": false, "score": 0, "creation_date": 1458787482, "post_id": 36184009, "comment_id": 60019345, "body": "I see. But I feel like that is irrelevant because if I find &quot;mailto:&quot; There will be an @ symbol."}, {"owner": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "edited": false, "score": 0, "creation_date": 1458831519, "post_id": 36184009, "comment_id": 60039803, "body": "Okay I see your point it returns a negative one. But how do I go about saying if it returns negative one get next line?"}], "answers": [{"tags": [], "owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "is_accepted": false, "score": 0, "last_activity_date": 1458755438, "creation_date": 1458755438, "answer_id": 36185302, "question_id": 36184009, "link": "https://stackoverflow.com/questions/36184009/email-crawler-in-c/36185302#36185302", "title": "Email Crawler in c++", "body": "<p>You need to make a loop and test every line until you find one with the string <code>\"mailto:\"</code>.</p>\n\n<p>Here is some example code to give you an idea of how you can do that:</p>\n\n<pre><code>std::ifstream ifs(\"test.txt\");\n\nstd::string line; // general buffer\n\n// read each line\nwhile(std::getline(ifs, line))\n{\n    // try to find \"mailto:\"\n    std::string::size_type pos = line.find(\"mailto:\");\n\n    // ignore if not found\n    if(pos == std::string::npos)\n        continue;\n\n    // we found it! extract address from line here\n    // remember that pos holds the start of the information        \n    // ...\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "edited": false, "score": 0, "creation_date": 1458767055, "post_id": 36186012, "comment_id": 60012576, "body": "What does size_t and npos mean? Or is that a dumb question? I guess I don&#39;t understand what your example means in task two."}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "edited": false, "score": 0, "creation_date": 1458767795, "post_id": 36186012, "comment_id": 60012957, "body": "<code>size_t</code> is a C++ data type that is an unsigned integer large enough to store the size of the largest object. If it can count that high it can index anything you can create. more here: <a href=\"http://en.cppreference.com/w/cpp/types/size_t\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/types/size_t</a>. <code>std::string::npos</code> is a marker for end of string. If a find returns end of string, whatever you were looking for was not found. More here: <a href=\"http://en.cppreference.com/w/cpp/string/basic_string/npos\" rel=\"nofollow noreferrer\">en.cppreference.com/w/cpp/string/basic_string/npos</a>"}, {"owner": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "edited": false, "score": 0, "creation_date": 1458776067, "post_id": 36186012, "comment_id": 60016306, "body": "Okay but I can&#39;t use the size_t in my program. So how would I grab just one line at a time?"}, {"owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "reply_to_user": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "edited": false, "score": 0, "creation_date": 1458844274, "post_id": 36186012, "comment_id": 60048382, "body": "How can you not use <code>size_t</code>? It&#39;s an integral datatype. Sucker is built in and has been for decades. If this is some bone-head instructor&#39;s whim, sorry, but sucks to be you. Use <code>std::string::size_type</code> or if that is also banned, an <code>unsigned int</code> instead. That should work well enough."}], "tags": [], "owner": {"reputation": 28836, "user_id": 4581301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5580eebb22e2c65c9b2325d2276d92a?s=128&d=identicon&r=PG&f=1", "display_name": "user4581301", "link": "https://stackoverflow.com/users/4581301/user4581301"}, "is_accepted": false, "score": 1, "last_activity_date": 1458757673, "creation_date": 1458757673, "answer_id": 36186012, "question_id": 36184009, "link": "https://stackoverflow.com/questions/36184009/email-crawler-in-c/36186012#36186012", "title": "Email Crawler in c++", "body": "<p>Divide the problem up into tasks. You have four tasks and they should be tackled individually. Do not proceed to the next task until you know the current task does exactly what you want. Working on more than one task at a time widens the problem area, and this turns out to be more than a geometric expansion. Bugs tend to interact with other bugs. A bug in task 1 may make a bug in task 2 look different, causing you to debug the wrong symptoms.</p>\n\n<p>Consider giving each task a function or if the task is complex, its own file. This way each task can be individually tested easily. Why? What if you change the code from task 1 and want to know if it broke? Sure you can test the whole program, but what if you broke 2 things? If you want to test the splitter logic with a few hundred addresses to make sure you correctly handle all of the weird edge cases, you can just call the splitter function with those few hundred strings and not have to invent a complicated file.</p>\n\n<h1>Task 1: read a file line by line.</h1>\n\n<p>This is first because until you can do this, you can't do much else.</p>\n\n<pre><code>std::string line;\nwhile (std::getline(in_stream, line))\n{\n    // output line to compare with source\n}\n</code></pre>\n\n<p>will read a file until it cannot be read anymore be this end of file, corrupt data, some joker pulling out the USB drive while you're reading it, or sundry other problems. How do you test this? An easy way is to read the file in from one stream line by line and print it to the console. This is a pretty big file and the eye is only so useful for comparing large amounts of text, so write all received lines to an output file and then diff the files. If they match, you win. Move on to task 2. If they don't, debug.</p>\n\n<h1>Task 2: Look for \"mailto\".</h1>\n\n<p>This take a line from task 1 and looks for \"mailto\"</p>\n\n<pre><code>size_t loc = line.find(\"mailto:\");\nif (loc != std::string::npos)\n{\n    std::cout &lt;&lt; \"found: \" &lt;&lt; line &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This is an easier thing to test so we can get away with the mk 1 eyeball or Notepad and ctrl+f to confirm that all mailto lines were printed.</p>\n\n<h1>Task 3: Isolate the address.</h1>\n\n<p>You've found a line containing \"mailto\" in task 2. Now you have to isolate the address on that line. You have the starting location from task 2 and you may be able to extract the string between the ':' after \"mailto\" and the next '\\\"'. I'm not going to spend much time here because this is the meat and potatoes of this assignment. I do too much here and I pass the course, not you, but basically this is a <code>find</code> and a <code>substr</code> similar to what OP has in their question.</p>\n\n<h1>Task 4: Split the Address from task 3</h1>\n\n<p>This is more work with <code>find</code> and <code>substr</code> to isolate the parts of the address.</p>\n"}], "owner": {"reputation": 53, "user_id": 6105510, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lPPcVShN8ws/AAAAAAAAAAI/AAAAAAAALUE/JnDjFv01Qqc/photo.jpg?sz=128", "display_name": "Kevin Swagger", "link": "https://stackoverflow.com/users/6105510/kevin-swagger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1137, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1458757673, "creation_date": 1458751469, "last_edit_date": 1458753900, "question_id": 36184009, "link": "https://stackoverflow.com/questions/36184009/email-crawler-in-c", "title": "Email Crawler in c++", "body": "<p>I have this assignment that I just can't figure out. I want my function to get a line from an html file and extract an email from it. Then Split the email into email, username, and domain. Then i want to have a third function to get the next email in the html file.</p>\n\n<pre><code>void get_line_emails(ifstream &amp;in_stream, ofstream &amp;out_stream, string email[], string users[], string domain[])\n{\n    int location, end;\n    string mail;    \n    getline(in_stream, mail);\n    location = mail.find(\"mailto:\");\n    end = mail.find(\"&gt;\");\n    mail = mail.substr(location, (end - 1));\n    cout &lt;&lt; mail &lt;&lt; endl;\n}\n\nvoid get_next_email(ifstream &amp;in_stream, string mail)\n{\n        getline(in_stream, mail);\n        int location = mail.find(\"mailto:\");\n        int end = mail.find(\"&gt;\");\n        mail = mail.substr(location, (end - 1));\n\n}\n\nvoid split_email(string email[], string domain[], string users)\n{\n    int count = 300;\n    string mail;\n    for (int i = 1; i &lt; count; ++i) //For loop to input stream.\n        {\n            mail = email[i];\n            int location = mail.find(\"@\");\n            int end = mail.find(\"&gt;\");\n            string domain[i] = mail.substr(location, (end - 1));\n            string users[i] = mail.substr(0, location);\n        }\n}\n</code></pre>\n\n<p>I also get this error when I run the program:</p>\n\n<pre><code>terminate called after throwing an instance of 'std::out_of_range'\n  what():  basic_string::substr: __pos (which is 4294967295) &gt; this-&gt;size() (which is 244)\nAbort (core dumped)\n</code></pre>\n\n<p>If it helps heres my main function:</p>\n\n<pre><code>int main()\n{\n    string email[1000];\n    string users[1000];\n    string domain[1000];\n    int count = 300;\n    string filename;\n\n    ifstream in_stream;\n    ofstream out_stream;\n    cout &lt;&lt; \"Enter input filename: \" &lt;&lt; endl;\n    cin &gt;&gt; filename; //Input of filename.\n    in_stream.open(filename.c_str()); //Opening the input file for population and other information.\n        if (in_stream.fail()) //Checking to see if file opens.\n        {\n            cout &lt;&lt; \"Error opening input/output files\" &lt;&lt; endl; //Telling user file isn't opening.\n            exit(1); //Exiting program.\n        }\n\n    out_stream.open(\"Emails.txt\");//If it does not exist it will not be created. If it exists it will be overwritten.\n    out_stream &lt;&lt; \"Email \" &lt;&lt; right &lt;&lt; setw(20) &lt;&lt; \"User \" &lt;&lt; right &lt;&lt; setw(20) &lt;&lt; \"Domain\" &lt;&lt; endl;\n    out_stream &lt;&lt; \"_______________________________________________________________________________\" &lt;&lt; endl;\n    get_line_emails(in_stream, out_stream, email, users, domain);\n    //split_email(email, domain, users);\n    sort(email, users, domain, count);\n    in_stream.close(); //Closing the in stream.\n    out_stream.close(); //Closing the out stream.\n\n    cout &lt;&lt; \"A new file Emails has been created with the emails extracted. Thank you.\" &lt;&lt; endl; //End message.\n\n    return 0;\n}\n</code></pre>\n\n<p>Part of the HTML file I am inputting:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"&gt; &lt;html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\"&gt; &lt;!-- Content Copyright Ohio University Server ID: 2--&gt;\n&lt;!-- Page generated 2016-03-22 14:55:21 by CommonSpot Build 9.0.3.119 (2015-08-14 15:00:01) --&gt;\n&lt;!-- JavaScript &amp; DHTML Code Copyright &amp;copy; 1998-2015, PaperThin, Inc. All Rights Reserved. --&gt; &lt;head&gt;\n&lt;meta name=\"Description\" id=\"Description\" content=\"Faculty\" /&gt;\n&lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" /&gt;\n&lt;meta name=\"Keywords\" id=\"Keywords\" content=\"engineering\" /&gt;\n&lt;meta name=\"Generator\" id=\"Generator\" content=\"CommonSpot Content Server Build 9.0.3.119\" /&gt;\n&lt;link rel=\"stylesheet\" href=\"/style/ouws_0111_allin1_nonav.css\" type=\"text/css\" /&gt;\n&lt;link rel=\"stylesheet\" href=\"/engineering/upload/engineeringEV.css\" type=\"text/css\" /&gt;\n&lt;link rel=\"stylesheet\" href=\"/engineering/upload/gridpak.css\" type=\"text/css\" /&gt;\n&lt;style type=\"text/css\"&gt;\n.mw { color:#000000;font-family:Verdana,Arial,Helvetica;font-weight:bold;font-size:xx-small;text-decoration:none; }\na.mw:link   {color:#000000;font-family:Verdana,Arial,Helvetica;font-weight:bold;font-size:xx-small;text-decoration:none;}\na.mw:visited    {color:#000000;font-family:Verdana,Arial,Helvetica;font-weight:bold;font-size:xx-small;text-decoration:none;}\na.mw:hover  {color:#0000FF;font-family:Verdana,Arial,Helvetica;font-weight:bold;font-size:xx-small;text-decoration:none;}\n&lt;/style&gt; &lt;script type=\"text/javascript\"&gt;\n&lt;!--\nvar gMenuControlID = 0;\nvar menus_included = 0;\nvar jsDlgLoader = '/engineering/about/people/loader.cfm';\nvar jsSiteID = 1;\nvar jsSubSiteID = 6148;\nvar js_gvPageID = 2177477;\nvar jsPageID = 2177477;\nvar jsPageSetID = 0;\nvar jsPageType = 0;\nvar jsControlsWithRenderHandlers = \",1366057,1407941,1408984,1409120,1409220,1463564,1653027,1464282,1484855,1663987,1703445,1714178,1719109,1716274,1719109,1719109,1722161,1748941,1743237,1767756,1771704,1240950,1795856,1799077,1806233,1814378,1814378,1814378,36,1156323,958270,959997,36,1239784,1239535,1240103,1264495,1264559,1240832,1241026,1268776,1269019,1365662,1365798,1367666,1367112,1367146,1403322,1236239,1644435,1707482,36,1707482,1708185,1708185,1707846,1718301,1718356,1722082,1735273,1156092,1736675,1738340,1758445,1487747,1740183,1750814,1755341,36,4,1241075,1320447,1410344,1440455,1462605,1463564,1642797,1644920,1644955,1659254,1656252,1707459,1692320,1290294,1705469,1705596,1707846,1708163,1708367,1719109,1719109,1719109,1728460,1718356,1706218,1725200,1739433,1193755,1782561,1806244,1781609,1783821,1784445,1783821,1788664,1750814,1781533,1781788,1812661,1810778,1822088,1644219,39,36,36,438722,443887,523857,542895,36,867909,671210,733944,1074794,671213,671222,671225,671231,671234,1190981,1190914,1190943,1193755,1236239,1239497,1280404,1284325,860732,860741,1080236,671204,1237273,671216,671219,671228,671237,671207,1190973,1243855,1264544,1264564,1241172,1267910,1240840,1240849,1241220,1264699,1241365,1264571,1289737,8,1290184,1321465,1322500,1363024,1365670,1365954,1365998,1366014,2214456,2068897,1837521,1190931,1190931,2239453,1992371,1967400,1992371,1808005,1792195,1792195,1156323,1716646,1967400,1763595,1080236,1971121,1960374,1290151,2007514,2013290,2012663,2012302,2012026,2012663,2021773,1191128,426028,1808005,2108357,426028,36,36,36,2145522,2145522,2186158,1792195,1827509,1827486,1827486,1840641,1843869,1843869,1843879,1843879,1827509,1827486,635375,1190931,1853586,1854295,1854509,1854614,1855117,1855125,1859942,1232520,996841,999747,1074782,801933,1156092,1231112,1240950,1264518,1264536,1240828,1241280,1241033,1241322,1265043,1268750,1269805,1287352,1290231,1321501,1322534,1368599,1407796,1407917,1408156,1408447,1461409,1463586,1466072,1660460,1704499,1701618,1704211,1701596,1707383,1706218,1713783,1713443,1715100,1716646,1714352,1723376,1706218,1717134,1717134,1759841,1740127,1740183,1737868,1755222,1763595,1750814,1812661,1784600,860732,1785700,1786558,1786640,1788366,1788803,1787835,1758851,1802116,1802116,1802116,1802116,1810778,1870892,1827509,1854528,1859942,1859942,1870780,1865837,1905202,1905202,1750814,1243855,1763595,1806295,1806280,860741,1893429,1893243,1893429,1898989,1913110,1915322,1921065,1871293,1872541,1900928,1708367,1874008,1827509,1808005,1948002,1708367,1859942,1827509,1243851,1959041,1243851,1746007,1243851,1243851,1967400,1967400,1191128,1780116,1960374,1960374,1780116,1827486,1156092,1153939,36,1827486,1859942,1974908,1156092,1156323,1763595,1080236,1763595,1854295,1854641,1865837,1867230,1867211,1869328,738180,8,1191128,1808005,1967400,1156323,2104541,2058309,2013290,2047047,2068897,2010928,2087246,2010928,2104541,2104541,2104578,2115265,1708185,2120941,426028,2129783,1663761,2166426,2068897,1967400,1967400,1967400,2068897,1808005,1716646,1833649,1827509,2010085,36,2167570,2068897,1706218,1156092,2012337,2186146,1191128,2191212,1190931,1156323,1716646,2012663,2508370,1992371,1080236,2280950,1808005,36,36,1156323,1808005,1819898,1191128,1243855,2281280,2013290,2239453,1837521,1156323,1644219,1849105,1849105,2376567,2381406,1808005,1808005,1156092,2552104,2552104,2281280,1805958,1967400,2068897,2390125,1808005,2444428,2459222,2013290,2568057,2508370,1661786,1763595,2349059,2349059,2438289,1708367,2120941,2508370,2120951,2596819,1156323,1191128,2239453,2367160,2012337,2451225,1808005,2615851,1808005,1849105,55,55,2734901,1191128,55,55,2012663,2734829,1967400,1967400,1996683,1992371,2013290,2018337,2012337,2018364,1156092,1363024,1967400,1888191,1888191,1805958,1967400,2057362,39,1153939,1708185,2010085,2010085,2010085,2079659,2079659,2010928,2010928,2087246,1808005,36,1190931,2369360,2380491,1808005,2120941,1153939,1708367,2511867,2540778,1704499,1787140,1758479,1716646,1827486,2239453,1808005,1808005,1080236,2451225,2120941,1808005,\";\nvar jsDefaultRenderHandlerProps = \",,\";\nvar jsAuthorizedControls = \",65684,62081,62169,62236,62658,67860,70371,70560,70645,70911,71567,71570,71579,71582,71585,71588,71630,71645,73051,73055,73135,73175,73177,73179,73181,73183,73185,75593,75596,75598,75600,75602,75604,75943,77337,77339,77367,77369,77371,77397,77399,77401,77403,77406,77408,77423,77425,77429,77431,77433,77435,77454,77456,77458,77460,77462,77464,77524,77526,77528,77530,77533,77535,77564,77566,77569,77572,77579,77581,77755,77759,77771,77940,78254,78304,78759,81449,81447,81452,81454,86430,95027,110992,112176,114559,122476,122590,122592,122594,122998,123000,123002,123004,123010,123012,123014,123016,123113,123115,123117,123119,123121,123123,123125,123127,123129,123131,123133,123135,123137,123139,123141,123143,123193,123217,123219,123221,543,1784,1786,1791,1829,1901,1903,3434,3062,10165,17470,19113,17964,17975,20458,18450,19246,20461,20532,20535,20631,22975,22976,29043,29065,29198,29497,29894,32565,37812,42989,50270,50283,51427,51770,51940,51987,52309,52306,52325,52338,52440,52727,52935,53585,53717,54936,55739,56170,57624,70375,57659,58549,60274,60859,65324,65375,65378,65630,341266,341268,341270,343681,344120,344123,344125,344127,344129,344131,344133,1155418,344136,344142,344918,344920,346066,349254,349260,353078,353096,353249,353368,353500,353518,356036,356519,356527,356534,359303,359315,359619,365645,365647,365651,372637,372642,373892,409046,385136,402687,408565,416225,423380,423445,423634,423934,424407,424503,426545,425757,425785,426028,426263,433478,438722,440105,440778,441424,441447,441488,441530,441743,441914,441917,441920,441923,442181,442184,442228,442231,442767,443887,444519,444536,448085,446524,447856,448121,450241,450489,450583,451031,123223,123225,123227,123229,123231,123233,123235,123237,123239,123241,123243,123245,123247,123249,133712,138458,138462,138472,138493,140917,152719,152941,155012,174553,176272,182475,185313,185545,185572,185600,185653,189527,189717,189912,189915,209638,190014,209612,209640,210772,233752,233754,240835,242005,245048,245061,246392,247905,253143,255217,258368,258370,258448,259352,259507,259535,259540,259557,259597,270079,272462,272484,273374,275946,276171,281359,281731,281886,285356,285362,285364,289279,290246,293573,293580,293990,306206,306372,307096,307117,1409047,1410292,1410344,1440455,1462692,1462605,1463206,1463358,1463363,1463559,1463575,1466067,1466072,1466949,565361,577664,577666,580782,580785,586106,593209,631308,631375,671204,671207,671210,671213,671216,671219,671222,671225,671228,630659,630928,631186,631230,671231,703507,703512,872630,872675,951724,1070639,1070773,1071579,1074782,1074794,1116648,1118602,1153954,1153962,310170,319781,325794,326607,326613,331241,331243,331248,338287,338305,338307,338805,340095,340098,341260,341264,523857,523883,540187,541324,542748,542895,543075,543442,543531,545031,545034,545925,550439,550694,551327,551342,551843,551848,554801,557468,563421,563522,564335,564350,564362,565392,565403,565430,565440,565460,578908,580751,589443,589691,589825,631522,631342,671234,704390,704500,730405,733189,733195,733931,733944,735045,721050,721061,720116,803640,807230,860741,867909,869754,878921,872399,911315,951437,952815,952921,954983,956036,958270,960899,960901,960903,960912,960914,960916,959997,990601,993320,996841,999438,999472,999741,999747,999871,1034551,1034553,1035679,1035681,1070829,1080236,1111202,1112587,1112594,1116088,1117180,566481,567951,635375,671237,705089,708277,738180,738270,738274,756640,808480,993241,993247,993326,998452,999162,1034549,1034793,1034795,1118837,1121340,1150407,1152064,1153928,1153933,1153939,1153948,1154637,1156092,1156320,753746,754822,754960,755002,755412,755426,755453,801854,801933,802037,802071,802077,802080,802083,802087,802091,802417,802525,804060,860732,753752,754885,753748,754422,802568,451785,453349,452911,452935,454345,454916,464533,465324,476013,469286,469308,470126,472222,476011,476015,489860,478066,482338,482852,492048,486517,489015,489681,492017,492050,492052,498151,516411,516413,516415,516417,516419,516422,1935063,1939712,1992371,1996683,2010928,2012302,2012840,2013290,2021773,2047047,2058309,2079659,2104541,2108357,2115265,2120941,2120951,2135749,2145522,2157693,2157775,1193061\n&lt;a href=\"http://www.youtube.com/user/OhioUnivRussCollege\"&gt;&lt;img border=\"0\" alt=\"YouTube\" title=\"YouTube\" src=\"/engineering/images/icon_youtube.png\" /&gt;&lt;span class=\"imageCaption\" style=\"display:none;\"&gt;&lt;/span&gt;&lt;/a&gt;\n&lt;/div&gt;\n&lt;div class=\"imageImg\"&gt;\n&lt;a href=\"http://www.linkedin.com/groups?home=&amp;gid=3000035&amp;trk=anet_ug_hm\"&gt;&lt;img border=\"0\" alt=\"LinkedIn\" title=\"LinkedIn\" src=\"/engineering/images/icon_linkedin.png\" /&gt;&lt;span class=\"imageCaption\" style=\"display:none;\"&gt;&lt;/span&gt;&lt;/a&gt;\n&lt;/div&gt;\n&lt;div class=\"imageImg\"&gt;\n&lt;a href=\"http://www.facebook.com/ohio.engineering\"&gt;&lt;img border=\"0\" alt=\"Facebook\" title=\"Facebook\" src=\"/engineering/images/icon_fb.png\" /&gt;&lt;span class=\"imageCaption\" style=\"display:none;\"&gt;&lt;/span&gt;&lt;/a&gt;\n&lt;/div&gt;\n&lt;div class=\"imageImg\"&gt;\n&lt;a href=\"https://twitter.com/russcollege\"&gt;&lt;img border=\"0\" alt=\"Twitter\" title=\"Twitter\" src=\"/engineering/images/icon_twitter.png\" /&gt;&lt;span class=\"imageCaption\" style=\"display:none;\"&gt;&lt;/span&gt;&lt;/a&gt;\n&lt;/div&gt;\n&lt;div class=\"imageImg\"&gt;\n&lt;a href=\"http://instagram.com/russcollege\"&gt;&lt;img border=\"0\" alt=\"Instagram\" title=\"Instagram\" src=\"/engineering/images/russ_instagram.png\" /&gt;&lt;span class=\"imageCaption\" style=\"display:none;\"&gt;&lt;/span&gt;&lt;/a&gt;\n&lt;/div&gt;\n&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=\"cs_control_2398199\" class=\"cs_control CS_Element_Custom\"&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div id=\"cs_control_2142700\" class=\"contentWrap col row\"&gt;&lt;div  title=\"\" id=\"CS_Element_2177477_2142700\"&gt;&lt;div id=\"cs_control_2142767\" class=\"cs_control col pageTitle\"&gt;\n&lt;!-- Portal Content --&gt;\n&lt;div class=\"content-element\"&gt;\n&lt;h2&gt;Faculty&lt;/h2&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;br /&gt;\n&lt;/div&gt;\n&lt;!-- Portal Content --&gt;\n&lt;/div&gt;&lt;div id=\"cs_control_2142762\" class=\"mainContent col\"&gt;&lt;div  title=\"\" id=\"CS_Element_2177477_2142762\"&gt;&lt;div id=\"cs_control_2142772\" class=\"cs_control CS_Element_Custom\"&gt;\n&lt;!-- Portal Content --&gt;\n&lt;div class=\"content-element\"&gt;\n&lt;p&gt;\u00a0\u00a0&lt;/p&gt;\n&lt;/div&gt;\n&lt;!-- Portal Content --&gt;\n&lt;/div&gt;&lt;div id=\"cs_control_2177314\" class=\"cs_control\"&gt;\n&lt;style type=\"text/css\"&gt;\n/* This fixes some issues with the anchor links from the A-Z bar at the top */\n.group a[name]\n{\nposition: absolute;\n}\n&lt;/style&gt;\n&lt;div id=\"staffAlpha\"&gt;\n&lt;ul class=\"azList\"&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#A\"&gt;A&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#B\"&gt;B&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#C\"&gt;C&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#D\"&gt;D&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#E\"&gt;E&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#F\"&gt;F&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#G\"&gt;G&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#H\"&gt;H&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#I\"&gt;I&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#J\"&gt;J&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#K\"&gt;K&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#L\"&gt;L&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#M\"&gt;M&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#N\"&gt;N&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#O\"&gt;O&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#P\"&gt;P&lt;/a&gt;&lt;/li&gt;\n&lt;li&gt;Q&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#R\"&gt;R&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#S\"&gt;S&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#T\"&gt;T&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#U\"&gt;U&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#V\"&gt;V&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#W\"&gt;W&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#X\"&gt;X&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children \"&gt;&lt;a href=\"#Y\"&gt;Y&lt;/a&gt;&lt;/li&gt;\n&lt;li class=\"children last\"&gt;&lt;a href=\"#Z\"&gt;Z&lt;/a&gt;&lt;/li&gt;\n&lt;/ul&gt;\n&lt;div id=\"azContent\"&gt;\n&lt;div class=\"group\"&gt;\n&lt;a id=\"A\" name=\"A\"&gt;&lt;/a&gt;\n&lt;h3 class=\"letter\"&gt;A&lt;/h3&gt;\n&lt;a href=\"profiles.cfm?profile=abukamai\"&gt;Nasseef\u00a0Abukamail&lt;/a&gt;&lt;br /&gt;\nElectrical Engineering and Computer Science\u00a0&lt;br /&gt;\nAssociate Lecturer\u00a0&lt;br /&gt;\n&lt;a href=\"mailto:abukamai@ohio.edu\"&gt;abukamai@ohio.edu&lt;/a&gt;\u00a0&lt;br /&gt;\n740.593.1229\u00a0\n&lt;div&gt;&lt;br /&gt;\n&lt;/div&gt;&lt;a href=\"profiles.cfm?profile=alam\"&gt;Khairul\u00a0Alam&lt;/a&gt;&lt;br /&gt;\nMechanical Engineering, Center for Advanced Materials Processing, ESP Lab\u00a0&lt;br /&gt;\nProfessor\u00a0&lt;br /&gt;\n&lt;a href=\"mailto:alam@ohio.edu\"&gt;alam@ohio.edu&lt;/a&gt;\u00a0&lt;br /&gt;\n740.593.1558\u00a0\n&lt;div&gt;&lt;br /&gt;\n&lt;/div&gt;&lt;a href=\"profiles.cfm?profile=alim1\"&gt;Muhammad\u00a0Ali&lt;/a&gt;&lt;br /&gt;\nBiomedical Engineering, Mechanical Engineering, ESP Lab\u00a0&lt;br /&gt;\nAssociate Professor\u00a0&lt;br /&gt;\n&lt;a href=\"mailto:alim1@ohio.edu\"&gt;alim1@ohio.edu&lt;/a&gt;\u00a0&lt;br /&gt;\n740.593.1389\u00a0\n&lt;div&gt;&lt;br /&gt;\n&lt;/div&gt;&lt;a href=\"profiles.cfm?profile=arch\"&gt;Deak\u00a0Arch&lt;/a&gt;&lt;br /&gt;\nAviation\u00a0&lt;br /&gt;\nAssociate Professor, Assistant Chair\u00a0&lt;br /&gt;\n&lt;a href=\"mailto:arch@ohio.edu\"&gt;arch@ohio.edu&lt;/a&gt;\u00a0&lt;br /&gt;\n740.597.2688\n</code></pre>\n"}, {"tags": ["c++", "windows", "qt", "mingw", "qt-creator"], "comments": [{"owner": {"reputation": 3133, "user_id": 1741118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af1b28a58919ecf6420f71fa188b509d?s=128&d=identicon&r=PG", "display_name": "Shf", "link": "https://stackoverflow.com/users/1741118/shf"}, "edited": false, "score": 0, "creation_date": 1458752645, "post_id": 36184008, "comment_id": 60004096, "body": "You should either download Qt library, compiled for MingW or compile it yourself. AFAIK there can not be a simple switch,"}, {"owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "reply_to_user": {"reputation": 3133, "user_id": 1741118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af1b28a58919ecf6420f71fa188b509d?s=128&d=identicon&r=PG", "display_name": "Shf", "link": "https://stackoverflow.com/users/1741118/shf"}, "edited": false, "score": 0, "creation_date": 1458752911, "post_id": 36184008, "comment_id": 60004272, "body": "Ok, I found the <a href=\"http://www.qt.io/download-open-source/#section-5\" rel=\"nofollow noreferrer\">download link</a> now. Still, once I have it, I need to tell QtCreator to use it. How do I do that?"}, {"owner": {"reputation": 3133, "user_id": 1741118, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/af1b28a58919ecf6420f71fa188b509d?s=128&d=identicon&r=PG", "display_name": "Shf", "link": "https://stackoverflow.com/users/1741118/shf"}, "edited": false, "score": 0, "creation_date": 1458756622, "post_id": 36184008, "comment_id": 60006612, "body": "does this answer your question? &quot;Select Tools &gt; Options &gt; Build &amp; Run &gt; Kits &gt; Add.&quot; - <a href=\"http://doc.qt.io/qtcreator/creator-targets.html\" rel=\"nofollow noreferrer\">doc.qt.io/qtcreator/creator-targets.html</a>"}, {"owner": {"reputation": 62673, "user_id": 492336, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/UjW5c.png?s=128&g=1", "display_name": "sashoalm", "link": "https://stackoverflow.com/users/492336/sashoalm"}, "edited": false, "score": 0, "creation_date": 1458803337, "post_id": 36184008, "comment_id": 60023524, "body": "Use Qt Maintenance Tool to add a MinGW kit and it should be automatic. Also see <a href=\"https://doc.qt.io/qtcreator/creator-targets.html\" rel=\"nofollow noreferrer\">doc.qt.io/qtcreator/creator-targets.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 12462, "user_id": 2298137, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/JN0cS.png?s=128&g=1", "display_name": "code_fodder", "link": "https://stackoverflow.com/users/2298137/code-fodder"}, "is_accepted": false, "score": 0, "last_activity_date": 1458802995, "creation_date": 1458802995, "answer_id": 36194784, "question_id": 36184008, "link": "https://stackoverflow.com/questions/36184008/what-should-i-change-in-qt-creator-to-compile-using-mingw-rather-than-microsoft/36194784#36194784", "title": "What should I change in Qt creator to compile using MinGW rather than microsoft compiler", "body": "<p>Easiest thing to do would be to go here:</p>\n\n<p><a href=\"http://www.qt.io/download-open-source/#section-2\" rel=\"nofollow\">Link to Qt downloads page</a></p>\n\n<p>Scroll down and select <code>Qt 5.6.0 for Windows 32-bit (MinGW 4.9.2, 1.0 GB)</code> this will download the installer (its about 1 GB). Run it and choose all the default options. Then you will have Qt 5.6 with mingw and Qt Creator all setup ready to go.\nNote: Before you start that its probably best to delete your current version - if you are not attached to it in any way :)</p>\n\n<p>If you want to change your current setup, then it might be longer-winded to find out what you are missing for mingw. For example you need the mingw qmake (and all the other stuff under the mingw_32 folder) file that would be located here (using default install options):</p>\n\n<ul>\n<li><code>C:\\Qt\\Qt5.5.1\\5.5\\mingw492_32\\bin\\qmake.exe</code></li>\n</ul>\n\n<p>to create your \"Qt Version\" part of the kit. And the actual mingw compiler, which is located here (using default install options):</p>\n\n<ul>\n<li><code>C:\\Qt\\Qt5.5.1\\Tools\\mingw492_32\\bin\\g++.exe</code></li>\n</ul>\n\n<p>to create your compiler. Once you have both of these then you can put them together to create your new kit.</p>\n\n<p>But to just add a compiler all you need to do is:</p>\n\n<ul>\n<li>Click compilers tab</li>\n<li>Click add and select mingw</li>\n<li>A new compiler is added, click it</li>\n<li>You will see some options below, add your compiler executable path in (like the one above for example).</li>\n<li>And you are done - there are some other options, but you probably don't need to use them.</li>\n</ul>\n\n<p><strong>note</strong> my paths are for qt 5.5.1 (obviously) so slightly different to 5.6 :)</p>\n"}], "owner": {"reputation": 41430, "user_id": 607407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5a061a72feb5b6580dadd5dcbc92d3b5?s=128&d=identicon&r=PG", "display_name": "Tom&#225;\u0161 Zato - Reinstate Monica", "link": "https://stackoverflow.com/users/607407/tom%c3%a1%c5%a1-zato-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1056, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458802995, "creation_date": 1458751467, "question_id": 36184008, "link": "https://stackoverflow.com/questions/36184008/what-should-i-change-in-qt-creator-to-compile-using-mingw-rather-than-microsoft", "title": "What should I change in Qt creator to compile using MinGW rather than microsoft compiler", "body": "<p>Currently my qmake command in QtCreator looks like this:</p>\n\n<pre><code>qmake.exe D:\\programing\\myproject\\myproject.pro -r -spec win32-msvc2010 \"CONFIG+=debug\"\n</code></pre>\n\n<p>Now I do not like the <code>win32-msvc2010</code> because Microsoft compiler <del>sucks horribly</del> doesn't support C++0x.</p>\n\n<p>So what configuration do I change to <strong>use MinGW instead of Microsoft compiler when compiling desktop Windows application</strong>?</p>\n\n<p>I walked through the settings and googled but no hints...</p>\n"}, {"tags": ["java", "c++", "audio", "vst", "juce"], "answers": [{"comments": [{"owner": {"reputation": 1146, "user_id": 878080, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd07a82cacf4eee358ba9bb793c0399?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/878080/jonathan"}, "edited": false, "score": 0, "creation_date": 1460510576, "post_id": 36336035, "comment_id": 60772455, "body": "Awesome answer thanks. I suspected it was as set of presets but I thought &quot;program&quot; was an odd choice of word! Hopefully someone as confused as me can benefit from this."}], "tags": [], "owner": {"reputation": 36046, "user_id": 14302, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/54dfe6c69b839881780a4007113fbe4a?s=128&d=identicon&r=PG", "display_name": "Nik Reiman", "link": "https://stackoverflow.com/users/14302/nik-reiman"}, "is_accepted": true, "score": 3, "last_activity_date": 1459433875, "creation_date": 1459433875, "answer_id": 36336035, "question_id": 36183974, "link": "https://stackoverflow.com/questions/36183974/what-are-programs-in-a-vst-instrument/36336035#36336035", "title": "What are &quot;programs&quot; in a VST instrument?", "body": "<p>A VST program is similar to a hardware ROM preset, or a MIDI program change message. The hardware analogy makes more sense if you are familiar with older synthesizers, which often shipped factory presets that could be \"dialed up\" and then tweaked accordingly. Some hosts will present the list of programs as a dropdown menu so that users can quickly browse factory presets.</p>\n\n<p>Regarding the number of possible programs a plugin can have, the VST SDK uses <code>VstInt32</code> (a 32-bit integer) for the program index. So a plugin could theoretically have up to 2147483647 possible programs. In practice, most hosts limit this to 127 (to be compatible with MIDI program change messages), so it is unwise to expose more than 127 programs or else the host might have problems with your plugin.</p>\n\n<p>IMHO the concept of VST programs is a bit dated and obsolete. It makes far more sense for your plugin to support the FXP/FXB features of the VST SDK so that the user can import/export patches from/to the hard disk. As you might expect, Juce of course has <a href=\"http://www.juce.com/juce/api/classVSTPluginFormat.html#a2cda6559c2fa9cba7e0ada4ab00d5d53\" rel=\"nofollow\">hooks for loading and saving VST preset files</a>.</p>\n\n<p>Many modern plugins don't support VST programs, and it's totally acceptable for your plugin to return <code>0</code> in the <code>getNumPrograms()</code> call.</p>\n"}], "owner": {"reputation": 1146, "user_id": 878080, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bdd07a82cacf4eee358ba9bb793c0399?s=128&d=identicon&r=PG", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/878080/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "accepted_answer_id": 36336035, "answer_count": 1, "score": 4, "last_activity_date": 1459433875, "creation_date": 1458751374, "question_id": 36183974, "link": "https://stackoverflow.com/questions/36183974/what-are-programs-in-a-vst-instrument", "title": "What are &quot;programs&quot; in a VST instrument?", "body": "<p>I have recently started using jvstwrapper and also the juce framework. It appears that the VST SDK has some concept of different \"programs\" for your instrument. For example both jvstwrapper and juce have classes which you inherit from in order to create your instrument. These classes require a number of methods to be implemented. In both cases, (and detailed in the VST SDK), you must implement methods \"setProgram\", \"getProgramName\", \"setProgramName\", \"getNumPrograms\" etc. I know that each program appears to hold a bunch of settings for the instrument. But in what cases are they actually used? Plus how many are there supposed to be?</p>\n"}, {"tags": ["c++", "windows", "winapi", "device", "createfile"], "comments": [{"owner": {"reputation": 260120, "user_id": 103167, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Ben Voigt", "link": "https://stackoverflow.com/users/103167/ben-voigt"}, "edited": false, "score": 2, "creation_date": 1458751531, "post_id": 36183944, "comment_id": 60003297, "body": "Probably the second computer isn&#39;t running the driver that creates that device special file."}, {"owner": {"reputation": 570607, "user_id": 505088, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3c0aac2191718ef0309dbc034d9b9961?s=128&d=identicon&r=PG", "display_name": "David Heffernan", "link": "https://stackoverflow.com/users/505088/david-heffernan"}, "edited": false, "score": 1, "creation_date": 1458752664, "post_id": 36183944, "comment_id": 60004111, "body": "Your error checking is somewhat bogus. Only call <code>GetLastError</code> if the API call fails. You don&#39;t check for failure."}], "answers": [{"comments": [{"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1458819132, "post_id": 36184061, "comment_id": 60031597, "body": "Do you know a way/tool to watch all the available devices ?"}, {"owner": {"reputation": 22608, "user_id": 618598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/37b955736b6911e9bbfd417c6aede9ca?s=128&d=identicon&r=PG", "display_name": "Bernd Elkemann", "link": "https://stackoverflow.com/users/618598/bernd-elkemann"}, "reply_to_user": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1458819230, "post_id": 36184061, "comment_id": 60031654, "body": "I dont. Sorry. Someone else?"}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1458820188, "post_id": 36184061, "comment_id": 60032227, "body": "I know now. It&#39;s a software called WinObj :)"}, {"owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1459320283, "post_id": 36184061, "comment_id": 60227214, "body": "Do you know how the fix so that \\\\\\\\.\\\\interception00 is aviable ?"}, {"owner": {"reputation": 22608, "user_id": 618598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/37b955736b6911e9bbfd417c6aede9ca?s=128&d=identicon&r=PG", "display_name": "Bernd Elkemann", "link": "https://stackoverflow.com/users/618598/bernd-elkemann"}, "reply_to_user": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "edited": false, "score": 0, "creation_date": 1459332590, "post_id": 36184061, "comment_id": 60235102, "body": "I dont even know what this special-file is for (special-files can be used for anything) and there is no info about interception00 on the web. There is a driver on the other computer that provides this path. You need that software on the second computer too. If you dont know which software that is then I would suggest (1) you use agent ransack to search the whole harddrive for &quot;interception&quot;, if you didn&#39;t find out which software provides interception00 then try the same thing by using grepWin to search the whole harddrive."}], "tags": [], "owner": {"reputation": 22608, "user_id": 618598, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/37b955736b6911e9bbfd417c6aede9ca?s=128&d=identicon&r=PG", "display_name": "Bernd Elkemann", "link": "https://stackoverflow.com/users/618598/bernd-elkemann"}, "is_accepted": true, "score": 3, "last_activity_date": 1458755389, "last_edit_date": 1592644375, "creation_date": 1458751625, "answer_id": 36184061, "question_id": 36183944, "link": "https://stackoverflow.com/questions/36183944/win32-api-createfile-in-c-failed/36184061#36184061", "title": "Win32-Api CreateFile(...) in C++ failed", "body": "<p>From MSDN's <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\"><code>CreateFile()</code> documentation</a>:</p>\n<blockquote>\n<p>OPEN_EXISTING<br></p>\n<p>Opens a file or device, only if it exists.</p>\n<p>If the specified file or device does not exist, the function fails and the last-error code is set to ERROR_FILE_NOT_FOUND (2).</p>\n</blockquote>\n<p>So this means that <code>\\\\\\\\.\\\\interception00</code> exists on one computer but not the other. Try to look with some other program that is normally capable of opening the File/Device.</p>\n<p>Or just fix that <code>\\\\\\\\.\\\\interception00</code> is not available.</p>\n"}], "owner": {"reputation": 959, "user_id": 3166532, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/f116ebe7c11450f913285087ec9109d5?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/3166532/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1768, "favorite_count": 1, "accepted_answer_id": 36184061, "answer_count": 1, "score": 0, "last_activity_date": 1458819099, "creation_date": 1458751292, "question_id": 36183944, "link": "https://stackoverflow.com/questions/36183944/win32-api-createfile-in-c-failed", "title": "Win32-Api CreateFile(...) in C++ failed", "body": "<p>The following code is working under one PC but not on an other PC. Both PC's have Windows 7 as their OS.</p>\n\n<pre><code>char device_name[] = \"\\\\\\\\.\\\\interception00\";\nprintf(\"device_name: %s \\n\", device_name);\n\ndevice_array[i].handle = CreateFile(device_name, GENERIC_READ, 0, NULL, OPEN_EXISTING, 0, NULL);\n\nDWORD error = GetLastError();\nprintf(\"GetLastError (Number): %d, \", error);\n\nif (error == ERROR_FILE_NOT_FOUND)\n{\n    printf(\"error == ERROR_FILE_NOT_FOUND \\n\");\n}\nelse if (error == ERROR_SUCCESS)\n{\n    printf(\"error == ERROR_SUCCESS \\n\");\n}\nelse\n{\n    printf(\"error == UNBEKANNT \\n\");\n}\n</code></pre>\n\n<p>The Output of the PC that is successfully opens the File:</p>\n\n<pre><code>device_name: \\\\.\\interception00\nGetLastError (Number): 0, error == ERROR_SUCCESS\n</code></pre>\n\n<p>The other PC is not able to open the File. The Output is:</p>\n\n<pre><code>device_name: \\\\.\\interception00\nGetLastError (Number): 2, error == ERROR_FILE_NOT_FOUND \n</code></pre>\n\n<p>Does someone have a clue why this happens ? Maybe it is a problem of insufficient rights ?</p>\n"}, {"tags": ["c++", "formatting", "clang-format"], "comments": [{"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1458758267, "post_id": 36183865, "comment_id": 60007598, "body": "Have you tried other formats?  The clang-format manual shows at least 4 other formats ... maybe one of those does what you need.   2nd Q - what did the manual say?"}, {"owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1458766239, "post_id": 36183865, "comment_id": 60012135, "body": "@DOUGLASO.MOEN <code>Have you tried other formats?</code> what do you mean other formats? I&#39;ve dumped WebKit and hacking it. Wrt Q2 it seems answer is <code>no</code>, access modifiers do not have break option"}, {"owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1458837029, "post_id": 36183865, "comment_id": 60043760, "body": "@SeverinPappadeux From  &quot;Clang 3.9 documentation, Clang-Format Style Options&quot;, 1)  LLVM A style complying with the LLVM coding standards  2)  Google A style complying with Google\u2019s C++ style guide 3)  Chromium A style complying with Chromium\u2019s style guide 4)  Mozilla A style complying with Mozilla\u2019s style guide  5) WebKit A style complying with WebKit\u2019s style guide.  It reads like you can start with one of these, and touch it.  Perhaps I stumbled upon something un-related.  Sorry."}, {"owner": {"reputation": 31465, "user_id": 128384, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/cf6f92bfb2a16c0e2c6ca7aef4440862?s=128&d=identicon&r=PG", "display_name": "stijn", "link": "https://stackoverflow.com/users/128384/stijn"}, "edited": false, "score": 0, "creation_date": 1465464443, "post_id": 36183865, "comment_id": 62915751, "body": "Regarding your first question: there is no option to not break before the colon (or I&#39;m relly missing something). It was the only thing keeping me from using clang-format and so I looked into the code and added an option to keep the colon on the same line. I didn&#39;t submit it as a patch because it might not play well with other options, but it does the job for me. I can post it as an answer if you&#39;re interested."}], "answers": [{"tags": [], "owner": {"reputation": 4633, "user_id": 11383441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6fe326a8e47283a622c4dc9bf700992?s=128&d=identicon&r=PG&f=1", "display_name": "Kalana", "link": "https://stackoverflow.com/users/11383441/kalana"}, "is_accepted": true, "score": 2, "last_activity_date": 1576212479, "creation_date": 1576212479, "answer_id": 59316285, "question_id": 36183865, "link": "https://stackoverflow.com/questions/36183865/what-is-good-way-to-achieve-formatting-via-clang-format/59316285#59316285", "title": "What is good way to achieve formatting via clang-format?", "body": "<p>You can do it by setting</p>\n\n<pre><code>AllowAllConstructorInitializersOnNextLine : true\n</code></pre>\n\n<p>Then output will be</p>\n\n<pre><code>Detector::Detector():\n    _LogicTarget{nullptr}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public: void f();\n</code></pre>\n"}], "owner": {"reputation": 15136, "user_id": 4044696, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/54xyv.jpg?s=128&g=1", "display_name": "Severin Pappadeux", "link": "https://stackoverflow.com/users/4044696/severin-pappadeux"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 313, "favorite_count": 0, "accepted_answer_id": 59316285, "answer_count": 1, "score": 2, "last_activity_date": 1576212479, "creation_date": 1458751124, "last_edit_date": 1459951209, "question_id": 36183865, "link": "https://stackoverflow.com/questions/36183865/what-is-good-way-to-achieve-formatting-via-clang-format", "title": "What is good way to achieve formatting via clang-format?", "body": "<p>All</p>\n\n<p>Formatting C++ code, reasonable happy with what clang-format produced, except two things:</p>\n\n<p>How could I make colon to be on the same line as constructor? INstead of</p>\n\n<pre><code>Detector::Detector()\n     : _LogicTarget{nullptr},\n</code></pre>\n\n<p>I would like to get </p>\n\n<pre><code>Detector::Detector():\n    _LogicTarget{nullptr},\n</code></pre>\n\n<p>Second question, could I remove break after access modifier?</p>\n\n<pre><code>public:\n    void f();\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>public: void f();\n</code></pre>\n"}, {"tags": ["c++", "c++11", "clion"], "answers": [{"tags": [], "owner": {"reputation": 1664, "user_id": 3793572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YXVbA.jpg?s=128&g=1", "display_name": "nastasiak2512", "link": "https://stackoverflow.com/users/3793572/nastasiak2512"}, "is_accepted": false, "score": 2, "last_activity_date": 1458803888, "creation_date": 1458803888, "answer_id": 36194978, "question_id": 36183849, "link": "https://stackoverflow.com/questions/36183849/clion-finds-a-wrong-function-signature/36194978#36194978", "title": "CLion finds a wrong function signature", "body": "<p>This looks like a known problem - <a href=\"https://youtrack.jetbrains.com/issue/CPP-6027\" rel=\"nofollow\">https://youtrack.jetbrains.com/issue/CPP-6027</a>. We hope to fix it soon.</p>\n"}], "owner": {"reputation": 429, "user_id": 1496036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/766c75feb4298f25ac1133912b7e394e?s=128&d=identicon&r=PG", "display_name": "Yauhen Yakimenka", "link": "https://stackoverflow.com/users/1496036/yauhen-yakimenka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458803888, "creation_date": 1458751077, "question_id": 36183849, "link": "https://stackoverflow.com/questions/36183849/clion-finds-a-wrong-function-signature", "title": "CLion finds a wrong function signature", "body": "<p>I constantly have CLion editor showing me parameter type mismatch errors while during build everything is fine. For example, consider the following MWE:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;boost/container/flat_set.hpp&gt;\n\nusing namespace std;\n\nnamespace bc = boost::container;\n\nint main() {\n    bc::flat_set&lt;bc::flat_set&lt;int&gt;&gt; manySets;\n    bc::flat_set&lt;int&gt; oneSet({1, 2, 3});\n    manySets.insert(oneSet);\n    cout &lt;&lt; \"Hello, World!\" &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>Here <code>flat_set</code> is a template from <code>boost</code> library (description could be seen <a href=\"http://www.boost.org/doc/libs/1_59_0/doc/html/boost/container/flat_set.html\" rel=\"nofollow noreferrer\">here</a>). Editor shows me an error:\n<a href=\"https://i.stack.imgur.com/iIBWI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iIBWI.png\" alt=\"CLion editor displays an error in tooltip\"></a></p>\n\n<p>But when I build it (even from CLion), everything is compiled fine.</p>\n\n<p>My system is:</p>\n\n<ul>\n<li>Ubuntu 15.10 64bit</li>\n<li>CLion 1.2.4</li>\n</ul>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 1, "user_id": 6105406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a75fadbe7bcde919de1909abbb915?s=128&d=identicon&r=PG&f=1", "display_name": "Diz", "link": "https://stackoverflow.com/users/6105406/diz"}, "edited": false, "score": 0, "creation_date": 1458751253, "post_id": 36183784, "comment_id": 60003097, "body": "Oh yah. The compiler error is &quot;error: no match for &#39;operator+&#39; in &#39;5.0e + r2&#39;"}, {"owner": {"reputation": 86516, "user_id": 701092, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/xYrM0.jpg?s=128&g=1", "display_name": "0x499602D2", "link": "https://stackoverflow.com/users/701092/0x499602d2"}, "edited": false, "score": 0, "creation_date": 1458751258, "post_id": 36183784, "comment_id": 60003105, "body": "Have your operators take references to <code>const rec</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6105406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a75fadbe7bcde919de1909abbb915?s=128&d=identicon&r=PG&f=1", "display_name": "Diz", "link": "https://stackoverflow.com/users/6105406/diz"}, "edited": false, "score": 0, "creation_date": 1458752053, "post_id": 36183940, "comment_id": 60003686, "body": "Oh wow. Thank you. Seems like a dumb mistake now that I see it. My teacher didn&#39;t talk about the non-const reference issue but it makes sense now that its pointed out to me."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1458751273, "creation_date": 1458751273, "answer_id": 36183940, "question_id": 36183784, "link": "https://stackoverflow.com/questions/36183784/automatic-type-conversion-through-constructors-with-overloaded-operator-function/36183940#36183940", "title": "Automatic type conversion through constructors with overloaded operator functions", "body": "<p>You have two problems with your code. First, <code>friend rec operator +(rec&amp; , rec&amp;);</code> will declare an <code>operator+</code> which takes a non-const reference to it's arguments. Conversion from <code>float</code> to <code>rec</code> through constructor will produce a temporary, and non-const references can not bind to temporary. You should fix it by accepting arguments either by value, or by const reference.</p>\n\n<p>Second problem is that definition of <code>operator+</code> does not match it's current declaration.</p>\n"}], "owner": {"reputation": 1, "user_id": 6105406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/395a75fadbe7bcde919de1909abbb915?s=128&d=identicon&r=PG&f=1", "display_name": "Diz", "link": "https://stackoverflow.com/users/6105406/diz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1458751906, "creation_date": 1458750895, "question_id": 36183784, "link": "https://stackoverflow.com/questions/36183784/automatic-type-conversion-through-constructors-with-overloaded-operator-function", "title": "Automatic type conversion through constructors with overloaded operator functions", "body": "<p>I am having trouble with this.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\n\nclass rec\n{\nprivate:\n    float l;\n    float w;\npublic:\n    rec(): l(0) , w(0) {}\n    rec(float a)\n    {\n        l = a;\n        w = 0.0;\n    }\n    rec(float a, float b): l(a) , w(b) {}\n    friend rec operator +(rec&amp; , rec&amp;);\n    //friend rec operator +(float , rec&amp;);\n    friend ostream&amp; operator &lt;&lt;(ostream&amp;, rec&amp;);\n};\n\nostream&amp; operator &lt;&lt;(ostream&amp; out , rec&amp; r3)\n{\n    out &lt;&lt; \"l \" &lt;&lt; r3.l &lt;&lt; endl &lt;&lt; \"w \" &lt;&lt; r3.w;\n    return out;\n}\n\nint main()\n{\n    rec r1(8, 3) , r2(2,7) , r3;\n    r3 = 5.0 + r2;\n    cout &lt;&lt; \"sum \" &lt;&lt; r3;\n}\n\nrec operator +(rec r1 , rec r2)\n{\n    float lsum , wsum;\n    lsum = r1.l + r2.l;\n    wsum = r1.w + r2.w;\n    return rec(lsum , wsum);\n}\n</code></pre>\n\n<p>I thought the point of automatic type conversion here was to make possible \nr3 = 5.0 + r2\nwhere 5.0 is treated like an object to be used in the overloaded + and &lt;&lt; functions making the   friend rec operator +(float , rec&amp;);\nunnecessary.\nMaybe I am missing something here.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1458751493, "post_id": 36183719, "comment_id": 60003274, "body": "classes with reference members can be copy constructed and move constructed, but cannot be copy assigned or move assigned.  The problem isn&#39;t the move, the problem is the assign (operator=)"}, {"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "reply_to_user": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 0, "creation_date": 1458751605, "post_id": 36183719, "comment_id": 60003349, "body": "And why std::vector use the operator= and not the move constructor ? Have not they the same behavior ?"}, {"owner": {"reputation": 56117, "user_id": 845092, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/50ccdbac5f0f9ff683e4b30a248189bf?s=128&d=identicon&r=PG", "display_name": "Mooing Duck", "link": "https://stackoverflow.com/users/845092/mooing-duck"}, "edited": false, "score": 1, "creation_date": 1458754752, "post_id": 36183719, "comment_id": 60005487, "body": "No. One constructs and the other assigns.  vector uses constructors for <code>push_back</code>, but <code>erase</code> requires assignment."}], "answers": [{"comments": [{"owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "edited": false, "score": 0, "creation_date": 1458751501, "post_id": 36183921, "comment_id": 60003282, "body": "I wanted my reference to be public (or using a <code>type * const</code>) : so everybody could use it without modify the adress value. But a reference_wrapper does not work, since we have to use <code>get()</code>."}], "tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": true, "score": 3, "last_activity_date": 1458751689, "last_edit_date": 1495542227, "creation_date": 1458751232, "answer_id": 36183921, "question_id": 36183719, "link": "https://stackoverflow.com/questions/36183719/is-it-possible-to-create-a-only-movable-class-with-const-reference-member/36183921#36183921", "title": "Is it possible to create a only movable class with const / reference member?", "body": "<p>Your problem is that <a href=\"http://en.cppreference.com/w/cpp/container/vector/erase\" rel=\"nofollow noreferrer\"><code>erase</code></a> requires that the element type be <a href=\"http://en.cppreference.com/w/cpp/concept/MoveAssignable\" rel=\"nofollow noreferrer\"><code>MoveAssignable</code></a>. This is simply because of the way that <code>erase</code> is typically implemented: it walks the vector after the erased element (or elements), move-assigning to the erased slot:</p>\n\n<pre><code>for (; j != end; ++i, ++j)\n    *i = std::move(*j);\nfor (; i != end; ++i)\n    i-&gt;~T();\n</code></pre>\n\n<p>This could be implemented differently, using move construction, but that would be inefficient where a move assignment operator exists (which is most of the time) and difficult to get exception-safe:</p>\n\n<pre><code>for (; j != end; ++i, ++j)\n{\n    i-&gt;~T();\n    new (&amp;*i) T(std::move(*j));  // what if this throws?\n}\nfor (; i != end; ++i)\n    i-&gt;~T();\n</code></pre>\n\n<p>You could work around this by using another strategy to get the effect of <code>erase</code>, for example:</p>\n\n<pre><code>vec = std::vector&lt;Foo&gt;(\n  std::make_move_iterator(std::next(vec.begin())),\n  std::make_move_iterator(vec.end()));\n</code></pre>\n\n<p><code>Foo</code> will still not be very useful, precisely because a type with a reference member cannot be move-assignable (<a href=\"https://stackoverflow.com/questions/20484344/move-assignment-and-reference-member?lq=1\">Move-assignment and reference member</a>); you should consider whether you can use <code>reference_wrapper</code> instead.</p>\n"}], "owner": {"reputation": 25137, "user_id": 4498831, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jDBV2.png?s=128&g=1", "display_name": "Boiethios", "link": "https://stackoverflow.com/users/4498831/boiethios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 940, "favorite_count": 0, "accepted_answer_id": 36183921, "answer_count": 1, "score": 1, "last_activity_date": 1458751689, "creation_date": 1458750756, "last_edit_date": 1495540770, "question_id": 36183719, "link": "https://stackoverflow.com/questions/36183719/is-it-possible-to-create-a-only-movable-class-with-const-reference-member", "title": "Is it possible to create a only movable class with const / reference member?", "body": "<p>All is in the question. I tried :</p>\n\n<pre><code>#include &lt;vector&gt;\n\nclass Foo\n{\n    int &amp; _x;\n\n    public:\n        Foo(int x) :\n            _x(x)\n        {}\n\n        Foo(Foo &amp;&amp; other) :\n            _x(other._x)\n        {}\n        Foo &amp; operator=(Foo &amp;&amp; other) = default;\n\n    private:\n        Foo(Foo const &amp;) = delete;\n        Foo &amp; operator=(Foo const &amp;) = delete;\n};\n\nint main(void)\n{\n    int a, b;\n    std::vector&lt;Foo&gt; vec;\n\n    vec.push_back(Foo(a));\n    vec.push_back(Foo(b));\n    vec.erase(vec.begin());\n    return 0;\n}\n</code></pre>\n\n<p>but it cannot compile because <code>Foo &amp; operator=(Foo &amp;&amp; other)</code> is deleted by default.</p>\n\n<p>I tried to delete this operator, to force the compiler using the constructor by move, but it tried to use the copy constructor.</p>\n\n<p>Is it possible to move an object with a reference member ?</p>\n\n<p>If not, why ?</p>\n\n<p>Thanks.</p>\n\n<p>EDIT : I have already read <a href=\"https://stackoverflow.com/questions/20484344/move-assignment-and-reference-member\">Move-assignment and reference member</a> but it does not answer my question : I wonder why <code>Foo &amp; operator=(Foo const &amp;)</code> is used by the compiler, while <code>Foo(Foo &amp;&amp; other)</code> could work.</p>\n\n<p>And I cannot understand why it is not possible to move a class with reference member.</p>\n"}, {"tags": ["c++", "c-preprocessor", "file-structure"], "comments": [{"owner": {"reputation": 2105, "user_id": 4593721, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/MQ5ui.jpg?s=128&g=1", "display_name": "Incomputable", "link": "https://stackoverflow.com/users/4593721/incomputable"}, "edited": false, "score": 0, "creation_date": 1458750166, "post_id": 36183419, "comment_id": 60002355, "body": "I think you should create separate namespace for such messages, and use const strings or something, may be an array or vector of them."}, {"owner": {"reputation": 114, "user_id": 5169462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996747fcd352ab6f714820dddf1111f4?s=128&d=identicon&r=PG&f=1", "display_name": "Matth", "link": "https://stackoverflow.com/users/5169462/matth"}, "edited": false, "score": 0, "creation_date": 1458750190, "post_id": 36183419, "comment_id": 60002382, "body": "You can use <code>constexpr</code> instead of defines, it is better in C++11."}], "answers": [{"comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458750433, "post_id": 36183516, "comment_id": 60002551, "body": "<code>constexpr static const char * const</code> is the same with <code>constexpr static const char *</code>"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458750741, "post_id": 36183516, "comment_id": 60002744, "body": "The big benefit of defines, though, is that string literals can be concatenated by compiler. <code>constexpr char*</code> can&#39;t."}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458750877, "post_id": 36183516, "comment_id": 60002842, "body": "You can use strings instead"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458751455, "post_id": 36183516, "comment_id": 60003249, "body": "@DimChtz, <code>std::string</code>s can not be concatenated by compiler either."}, {"owner": {"reputation": 4218, "user_id": 865281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/435568f417505b4ccd67ee51253b5f5e?s=128&d=identicon&r=PG", "display_name": "Xaqq", "link": "https://stackoverflow.com/users/865281/xaqq"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458751497, "post_id": 36183516, "comment_id": 60003279, "body": "@SergeyA I&#39;m pretty sure you can concat <code>constexpr char *</code>. It&#39;s probably ugly and not very intuitive though."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458751667, "post_id": 36183516, "comment_id": 60003395, "body": "@Xaqq, I spent weeks trying to. I was not able to find a solution. If you have one, post it and I am sure you will have a huge boost to your rep :)"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458751687, "post_id": 36183516, "comment_id": 60003409, "body": "@SergeyA Not the way you can concat the defines, but still you can."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458751737, "post_id": 36183516, "comment_id": 60003439, "body": "@DimChtz, how do you concat two <code>std::string</code>s <b>at compile time</b>? Post the code."}, {"owner": {"reputation": 4218, "user_id": 865281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/435568f417505b4ccd67ee51253b5f5e?s=128&d=identicon&r=PG", "display_name": "Xaqq", "link": "https://stackoverflow.com/users/865281/xaqq"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458751777, "post_id": 36183516, "comment_id": 60003475, "body": "@SergeyA I haven&#39;t done it myself but I remember reading things about that. Maybe I&#39;m wrong though."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458751808, "post_id": 36183516, "comment_id": 60003498, "body": "@Xaqq, like I said - find the way and be my hero!"}], "tags": [], "owner": {"reputation": 4218, "user_id": 865281, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/435568f417505b4ccd67ee51253b5f5e?s=128&d=identicon&r=PG", "display_name": "Xaqq", "link": "https://stackoverflow.com/users/865281/xaqq"}, "is_accepted": false, "score": 1, "last_activity_date": 1458750177, "creation_date": 1458750177, "answer_id": 36183516, "question_id": 36183419, "link": "https://stackoverflow.com/questions/36183419/c-where-how-to-correctly-define-static-text/36183516#36183516", "title": "c++ where/how to correctly define static text", "body": "<p>Since this is tagged C++, I'd encourage to stay away from macros when possible.</p>\n\n<p>If supported by your compiler, I would make use of <code>constexpr</code> to define those static text.</p>\n\n<pre><code>struct Messages\n{\n constexpr static const char * const blabla = \"sometext\";\n};\n</code></pre>\n\n<p>You can then use it like this:</p>\n\n<pre><code>std::cout &lt;&lt; Messages::blabla &lt;&lt; std::endl;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 134, "user_id": 5196012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/518f0b3ea29e686931553e2aa977e336?s=128&d=identicon&r=PG&f=1", "display_name": "t0b4cc0", "link": "https://stackoverflow.com/users/5196012/t0b4cc0"}, "edited": false, "score": 0, "creation_date": 1458761197, "post_id": 36183517, "comment_id": 60009356, "body": "whats the best practice approach here In what filetype should I put it? in the .h or the .cpp file? (If I use a struct like Xaqq used in his Answer) Whats a reason to use a struct instead of just put all of them in a namespace?"}, {"owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "reply_to_user": {"reputation": 134, "user_id": 5196012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/518f0b3ea29e686931553e2aa977e336?s=128&d=identicon&r=PG&f=1", "display_name": "t0b4cc0", "link": "https://stackoverflow.com/users/5196012/t0b4cc0"}, "edited": false, "score": 0, "creation_date": 1458835292, "post_id": 36183517, "comment_id": 60042542, "body": "I&#39;m not sure about your question.You can have your string in a txt file and parse it at runtime."}], "tags": [], "owner": {"reputation": 1988, "user_id": 4717805, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh5.googleusercontent.com/-xAnHpORfxvE/AAAAAAAAAAI/AAAAAAAAACE/QzOPrCINbew/photo.jpg?sz=128", "display_name": "Zouch", "link": "https://stackoverflow.com/users/4717805/zouch"}, "is_accepted": true, "score": 9, "last_activity_date": 1458750184, "creation_date": 1458750184, "answer_id": 36183517, "question_id": 36183419, "link": "https://stackoverflow.com/questions/36183419/c-where-how-to-correctly-define-static-text/36183517#36183517", "title": "c++ where/how to correctly define static text", "body": "<p>A common way to deal with ingame strings (dialogs, etc) is to have them stored in an asset file that you load once at runtime and store in variables.</p>\n\n<p>This way you avoid recompiling everything to fix a typo, you can easily work with multiple languages, etc.</p>\n"}, {"comments": [{"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458750810, "post_id": 36183588, "comment_id": 60002783, "body": "Why all the heavy weight of <code>std::string</code> when simple <code>static const char* const</code> would do the trick?"}, {"owner": {"reputation": 394, "user_id": 4538409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iCP54.png?s=128&g=1", "display_name": "Vinigas", "link": "https://stackoverflow.com/users/4538409/vinigas"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458750926, "post_id": 36183588, "comment_id": 60002867, "body": "In C++ I prefer <code>std::string</code>s. In C I prefer <code>char*</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1458750988, "post_id": 36183588, "comment_id": 60002898, "body": "@Vinigas Use <code>std::string</code> when you really need it."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458751058, "post_id": 36183588, "comment_id": 60002946, "body": "@Vinigas, why? To prefer X over Y, X should have benefits over Y, which outweight costs of X over Y! This is the engineering approach. What are the benefits of <code>std::string</code> in this case? Are you aware of it&#39;s costs?"}, {"owner": {"reputation": 394, "user_id": 4538409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iCP54.png?s=128&g=1", "display_name": "Vinigas", "link": "https://stackoverflow.com/users/4538409/vinigas"}, "edited": false, "score": 0, "creation_date": 1458751329, "post_id": 36183588, "comment_id": 60003155, "body": "Firstly, <code>string</code> are more comfortible to use and manipulate. They have modifiers, e.g., <code>insert</code>, <code>erase</code>. Also in my opinion you should always use <code>std::string</code> in C++ OOP because <code>std::string</code> is OO itself. If you have strings in your program and string constant, then you don&#39;t waste time converting char* to std::string."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458751579, "post_id": 36183588, "comment_id": 60003332, "body": "@Vinigas, again - in this scenario how do you expect to use modifiers? You are having a <code>const std::string</code> yourself! Second, C++ does not equate with OOP. And there is a good argument that <code>std::string</code> does not actually follow OO path."}, {"owner": {"reputation": 394, "user_id": 4538409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iCP54.png?s=128&g=1", "display_name": "Vinigas", "link": "https://stackoverflow.com/users/4538409/vinigas"}, "edited": false, "score": 0, "creation_date": 1458752571, "post_id": 36183588, "comment_id": 60004045, "body": "Ok, but what about converting these <code>char*</code> all the time (<code>to_string()</code>) then you need it in other program places. Using <code>string</code> only can make code more clearier. And also with <code>char*</code> only, you can&#39;t know length. Length knowing is usefull if you want to fit text correctly, for example. It&#39;s my opinion."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458753640, "post_id": 36183588, "comment_id": 60004731, "body": "@Vinigas, it&#39;s much better to have the constant length known at compile time of your literal, rather than calculate it every time in run-time. As for &#39;when you need string&#39;, if your function wants a const std::string it is better to accept <code>const char*</code>.  If it needs non-const string, your string literal won&#39;t do anyways."}], "tags": [], "owner": {"reputation": 394, "user_id": 4538409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/iCP54.png?s=128&g=1", "display_name": "Vinigas", "link": "https://stackoverflow.com/users/4538409/vinigas"}, "is_accepted": false, "score": 0, "last_activity_date": 1458750346, "creation_date": 1458750346, "answer_id": 36183588, "question_id": 36183419, "link": "https://stackoverflow.com/questions/36183419/c-where-how-to-correctly-define-static-text/36183588#36183588", "title": "c++ where/how to correctly define static text", "body": "<p>I would write this at the top of document below include's:</p>\n\n<pre><code>const static std::string CErrorMessage = \"Usage error: correct usage is ./bla - bla2 -etc\";\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "is_accepted": false, "score": 1, "last_activity_date": 1458754120, "creation_date": 1458754120, "answer_id": 36184875, "question_id": 36183419, "link": "https://stackoverflow.com/questions/36183419/c-where-how-to-correctly-define-static-text/36184875#36184875", "title": "c++ where/how to correctly define static text", "body": "<p>I use character arrays:  </p>\n\n<pre><code>static const char my_text[] = \"Three little froggies, ready to jump.\";\n</code></pre>\n\n<p>The <code>static const</code> allows the compiler to place the text in a read-only section and because there's only one instance, the compiler can access it directly (without copying to the stack).  </p>\n\n<p>The array notation allows for the length to be calculated at compile-time:  </p>\n\n<pre><code>const unsigned int text_length = sizeof(my_text) - 1U;\n</code></pre>\n\n<p>The 1U represents the nul termination character.</p>\n"}], "owner": {"reputation": 134, "user_id": 5196012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/518f0b3ea29e686931553e2aa977e336?s=128&d=identicon&r=PG&f=1", "display_name": "t0b4cc0", "link": "https://stackoverflow.com/users/5196012/t0b4cc0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1631, "favorite_count": 0, "accepted_answer_id": 36183517, "answer_count": 4, "score": 1, "last_activity_date": 1459276995, "creation_date": 1458749904, "last_edit_date": 1459276995, "question_id": 36183419, "link": "https://stackoverflow.com/questions/36183419/c-where-how-to-correctly-define-static-text", "title": "c++ where/how to correctly define static text", "body": "<p>I am creating a console program in C++.</p>\n\n<p>I have static text lines like <code>\"error wrong usage, usage is: program &lt;parameter&gt; &lt;parameter2&gt;\"</code> or <code>\"game over!\"</code></p>\n\n<p>I recently had a C project where all code had to be all in one c file. I just made lots of defines like this:</p>\n\n<pre><code>#define ERRUSAGE \"Usage error: correct usage is ./bla - bla2 -etc\"\n</code></pre>\n\n<p>after the includes and before the function predefinitions.</p>\n\n<p>Now I'm working on a c++ program where it's allowed to have multiple files. I've learned that I would use a .h file to define something and a .cpp file to implement something.</p>\n\n<p>So is the way to go here making a staticTextOutput.h and fill it up with </p>\n\n<pre><code>#ifndef BLABLA\n#define BLABLA \"sometext\"\n#endif\n</code></pre>\n\n<p>and then include it where I need it?</p>\n\n<p>What's the best practise here?</p>\n\n<p>o/</p>\n\n<p><strong>EDIT:</strong> </p>\n\n<p>Thanks for reminding me about making a const instead of using defines; that's a big point.</p>\n\n<p>To refine my question: I'd also like to know what the file structure should look like (since .h files traditionally contain declarations and .cpp files definitions).</p>\n\n<p>I know how this should look for functions and classes where would a struct (like the one Xaqq posted as answer) go since it has static/const members?</p>\n"}, {"tags": ["c++"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 6076483, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1ca581364a6f25924b47a557fc29d426?s=128&d=identicon&r=PG&f=1", "display_name": "sara8", "link": "https://stackoverflow.com/users/6076483/sara8"}, "edited": false, "score": 0, "creation_date": 1458750915, "post_id": 36183614, "comment_id": 60002861, "body": "@SergeyA- how should I iterate?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 169, "user_id": 6076483, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1ca581364a6f25924b47a557fc29d426?s=128&d=identicon&r=PG&f=1", "display_name": "sara8", "link": "https://stackoverflow.com/users/6076483/sara8"}, "edited": false, "score": 0, "creation_date": 1458750991, "post_id": 36183614, "comment_id": 60002902, "body": "@sara8, same way: <code>for (auto it = data.begin(), e = data.end(), it != e; ++it)</code>"}, {"owner": {"reputation": 169, "user_id": 6076483, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1ca581364a6f25924b47a557fc29d426?s=128&d=identicon&r=PG&f=1", "display_name": "sara8", "link": "https://stackoverflow.com/users/6076483/sara8"}, "edited": false, "score": 0, "creation_date": 1458751233, "post_id": 36183614, "comment_id": 60003078, "body": "@SergeyA-thanks. May be you need to replace the professor:)"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 3, "last_activity_date": 1458750408, "creation_date": 1458750408, "answer_id": 36183614, "question_id": 36183316, "link": "https://stackoverflow.com/questions/36183316/c-read-and-write-numeric-numbers-from-text-file-using-vector/36183614#36183614", "title": "c++ read and write numeric numbers from text file using vector", "body": "<p><code>std::istream_iterators</code> are different from 'regular' iterators. Stream iterators are single-pass. You can't use the same iterator twice - because every increment reads data from the stream, and data read from the stream is gone from the stream. But this is what you are trying to do:</p>\n\n<pre><code>vector&lt;int&gt; data(start, end);\nfor(auto it=start; it!=end; ++it)\n</code></pre>\n\n<p>Here iterator <code>start</code> is used twice - first to populate the vector, than to iterate over stream.</p>\n\n<p>To fix your problem, iterate over vector in the loop, not the (used up) stream.</p>\n"}], "owner": {"reputation": 169, "user_id": 6076483, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/1ca581364a6f25924b47a557fc29d426?s=128&d=identicon&r=PG&f=1", "display_name": "sara8", "link": "https://stackoverflow.com/users/6076483/sara8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 1, "accepted_answer_id": 36183614, "answer_count": 1, "score": 2, "last_activity_date": 1458750408, "creation_date": 1458749667, "question_id": 36183316, "link": "https://stackoverflow.com/questions/36183316/c-read-and-write-numeric-numbers-from-text-file-using-vector", "title": "c++ read and write numeric numbers from text file using vector", "body": "<p>I learn a course from coursera.\nIn one of the lesson ther is a code which supposed to perform read and write numeric numbers from text file using vector.\nThis is the code:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;iterator&gt;\n#include &lt;fstream&gt;\n#include &lt;vector&gt;\n#include \"Student.h\"\n//#include \"\"\nusing namespace std;\n\n\nint main()\n{\n    /*cout &lt;&lt; \"Hello School!\" &lt;&lt; endl;\n    Student sarit_student(\"Sarit Rotshild\",12345);*/\n    ifstream data_file(\"../../sarit/data.text\");\n    istream_iterator&lt;int&gt; start(data_file), end;\n    vector&lt;int&gt; data(start, end);\n    int sum=0;\n    for(auto it=start; it!=end; ++it)\n    {\n        sum+= *it;\n    }\n    cout&lt;&lt;\"sum = \"&lt;&lt; sum&lt;&lt;endl;\n    cout&lt;&lt;\"avg is : \"&lt;&lt; 1.0* sum/data.size()&lt;&lt;endl;\n    return 0;235\n}\n</code></pre>\n\n<p>The input (in the text file) is\n12  15   18\n23\n235\nHowever the out put that I got is not correct--->\nsum = 12\navg is : 2.4</p>\n"}, {"tags": ["c++", "windows", "qt", "c++11", "winapi"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6049422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1690207ce4fcd179eeed37c1c6589229?s=128&d=identicon&r=PG&f=1", "display_name": "TheDeveloper", "link": "https://stackoverflow.com/users/6049422/thedeveloper"}, "is_accepted": true, "score": 0, "last_activity_date": 1458811695, "creation_date": 1458811695, "answer_id": 36196843, "question_id": 36183200, "link": "https://stackoverflow.com/questions/36183200/qt-5-5-windows-api-not-working-as-usual/36196843#36196843", "title": "Qt 5.5 - Windows API not Working as usual", "body": "<p>[SOLVED]</p>\n\n<p>It was not possible, becouse to set the ForegroundWindow i have to get the current Input, i did following:</p>\n\n<p>Construcor:</p>\n\n<pre><code>HWND wId = (HWND) winId();\nDWORD pId = GetWindowThreadProcessId(wId, NULL);\nAllowSetForegroundWindow(pId);\n</code></pre>\n\n<p>onShortcutPressed:</p>\n\n<pre><code>this-&gt;show();\nHWND wId = (HWND) winId();\nDWORD pId = GetWindowThreadProcessId(wId, NULL);\nDWORD fpId = GetWindowThreadProcessId(GetForegroundWindow(), NULL);\n\n//Attach Thread to get the Input - i am now allowed to set the Foreground window!\nAttachThreadInput(fpId, pId, true);\nSetActiveWindow(wId);\nSetForegroundWindow(wId);\nSetFocus(wId);\nAttachThreadInput(fpId, pId, false);\n</code></pre>\n\n<p>Its working now!</p>\n"}], "owner": {"reputation": 11, "user_id": 6049422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1690207ce4fcd179eeed37c1c6589229?s=128&d=identicon&r=PG&f=1", "display_name": "TheDeveloper", "link": "https://stackoverflow.com/users/6049422/thedeveloper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 1, "accepted_answer_id": 36196843, "answer_count": 1, "score": -1, "last_activity_date": 1458811708, "creation_date": 1458749362, "last_edit_date": 1458811708, "question_id": 36183200, "link": "https://stackoverflow.com/questions/36183200/qt-5-5-windows-api-not-working-as-usual", "title": "Qt 5.5 - Windows API not Working as usual", "body": "<p>I am using <strong>Qt 5.5</strong> on <strong>Windows 10</strong> and I want to open a <code>QWidget</code> in <strong>Foreground</strong> and want to <strong>focus</strong> the <code>LineEdit</code>, like RUN (WIN + R) on Windows. The Problem is the Application is running in the background and I have only an keylogger to register a shortcut (LCTRL + LWIN + T) to toggle the window (show + focus / hidden). </p>\n\n<p>If the shortcut is pressed, I execute following Code:</p>\n\n<pre><code>   if(this-&gt;isHidden()){\n\n      this-&gt;show();\n\n      //Windows API Methods:\n      SetActiveWindow((HWND) this-&gt;winId());\n      SetForegroundWindow((HWND) this-&gt;winId());\n      SetFocus((HWND) this-&gt;winId());\n\n      this-&gt;_edit-&gt;setFocus();\n\n      qDebug() &lt;&lt; \"[OUT][DONT WORKING] Window shoud be shown and focused\";\n    }else{\n      this-&gt;hide();\n      qDebug() &lt;&lt; \"[OUT][WORKING] Window shoud be hidden\";\n    }\n</code></pre>\n\n<p>If I now press <strong>LCTRL + LWIN + T</strong>, it opens the Window in the background and that's not what I want. Can someone explain why this does not work? What can I do that the window opens in the foreground and the text box is <strong>focused</strong>? And I don't want to set the flag <code>StayAlwaysOnTop</code>, because then the text field is still not focused. </p>\n\n<p>I hope you can help me.\nThank you very very much!</p>\n"}, {"tags": ["c++", "compiler-errors", "functional-programming"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 3, "creation_date": 1458749324, "post_id": 36183146, "comment_id": 60001747, "body": "An online compiler will not recognize non-standard headers that were used in c++ compilers 20+ years ago. Get rid of <code># include &lt;iostream.h&gt;</code> and <code># include &lt;conio.h&gt;</code>. Use <code>#include &lt;iostream&gt;</code> instead of <code># include &lt;iostream.h&gt;</code>"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458749380, "post_id": 36183146, "comment_id": 60001790, "body": "you need to add <code>using namespace std</code> or <code>std::</code> infront or all std functions"}, {"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458749537, "post_id": 36183146, "comment_id": 60001913, "body": "Also <code>char *Grade</code> and then <code>Grade = &quot;A&quot;</code> will not work"}, {"owner": {"reputation": 533, "user_id": 4473118, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cY1jfXqgFbU/AAAAAAAAAAI/AAAAAAAAADs/BSem3Uzbuiw/photo.jpg?sz=128", "display_name": "Guiroux", "link": "https://stackoverflow.com/users/4473118/guiroux"}, "edited": false, "score": 0, "creation_date": 1458749813, "post_id": 36183146, "comment_id": 60002129, "body": "also <code>char * Grade</code> -&gt; <code>char Grade</code> and then <code>Grade=&#39;A&#39;</code> will work"}], "answers": [{"tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": true, "score": 2, "last_activity_date": 1458750323, "creation_date": 1458750323, "answer_id": 36183580, "question_id": 36183146, "link": "https://stackoverflow.com/questions/36183146/how-to-create-exam-grading-program-in-c/36183580#36183580", "title": "How to create exam grading program in c++?", "body": "<p>Most online compilers use the latest C++ standards. They most likely don't support old style C++ programs.</p>\n\n<p>Things you can change to get going...</p>\n\n<p><strong><code>#include</code> lines</strong></p>\n\n<p>Instead of</p>\n\n<pre><code> # include &lt;stdio.h&gt;\n # include &lt;iostream.h&gt;\n</code></pre>\n\n<p>Use</p>\n\n<pre><code> # include &lt;cstdio&gt;\n # include &lt;iostream&gt;\n</code></pre>\n\n<p><strong>Don't use non-standard header</strong></p>\n\n<p>Remove</p>\n\n<pre><code> # include &lt;conio.h&gt;\n</code></pre>\n\n<p><strong><code>cin</code> and <code>cout</code> are in <code>std</code> namespace</strong></p>\n\n<p>Change all usages of <code>cin</code> by <code>std::cin</code> and all usages of <code>cout</code> by <code>std::cout</code>. You can also use</p>\n\n<pre><code>using namespace std;\n</code></pre>\n\n<p>to avoid having to use <code>std::cin</code> and <code>std::cout</code>. However, don't use this mechanism everywhere to avoid having to type the additional <code>std::</code>.</p>\n\n<p><strong>Don't use <code>gets</code></strong></p>\n\n<p>Use of <code>gets</code> is a known source of security vulnerabilities. Don't use it.\nReplace its usage by <code>fgets</code>.</p>\n\n<p>Instead of</p>\n\n<pre><code>   cout&lt;&lt;\"   Masukkan Nama Siswa : \";gets(nama);\n</code></pre>\n\n<p>you could use</p>\n\n<pre><code>   cout&lt;&lt;\"   Masukkan Nama Siswa : \";\n   fgets(nama, sizeof(nama), stdin);\n</code></pre>\n\n<p>However, that is not good either since you are mixing use of <code>stdin</code> and <code>cin</code> to get user input. Either stick to the use of functions from <code>stdio.h</code>or use <code>cin</code> to get user input. You can use:</p>\n\n<pre><code>   cout&lt;&lt;\"   Masukkan Nama Siswa : \";\n   cin.get(nama, sizeof(nama));\n</code></pre>\n\n<p><strong>Use <code>std::string</code> instead of <code>char*</code> to hold strings</strong></p>\n\n<p>Change</p>\n\n<pre><code>   char nama[20],*Grade;\n</code></pre>\n\n<p>to</p>\n\n<pre><code>   char nama[20];\n   std::string Grade;\n</code></pre>\n\n<p><strong>Don't use non-standard functions</strong></p>\n\n<p>Remove the line</p>\n\n<pre><code>   getch();\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5363881, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206039703846473/picture?type=large", "display_name": "Tengku Rahmaddansyah", "link": "https://stackoverflow.com/users/5363881/tengku-rahmaddansyah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "closed_date": 1458888670, "accepted_answer_id": 36183580, "answer_count": 1, "score": -5, "last_activity_date": 1458750323, "creation_date": 1458749210, "last_edit_date": 1458749544, "question_id": 36183146, "link": "https://stackoverflow.com/questions/36183146/how-to-create-exam-grading-program-in-c", "closed_reason": "Not suitable for this site", "title": "How to create exam grading program in c++?", "body": "<p>I try to help friend to finish his exam to create this exam grading program in C++ but all try failed to compile this program. Can you help me?\nEvery try always gets \"fatal error\" and \"No such file or directory\ncompilation terminated.\" So far we try to compile it with online compiler.</p>\n\n<pre><code># include &lt;stdio.h&gt;\n# include &lt;iostream.h&gt;\n# include &lt;conio.h&gt;\n\nmain()\n{\n   char nama[20],*Grade;\n   float nk,nt,nu,nmk,nmt,nmu,na;\n   cout&lt;&lt;\"Program Hitung Nilai Akhir Siswa\"&lt;&lt;endl&lt;&lt;endl;\n   cout&lt;&lt;\"   Masukkan Nama Siswa : \";gets(nama);\n   cout&lt;&lt;\"   Nilai Keaktifan     : \";cin&gt;&gt;nk;\n   cout&lt;&lt;\"   Nilai Tugas         : \";cin&gt;&gt;nt;\n   cout&lt;&lt;\"   Nilai Ujian         : \";cin&gt;&gt;nu;\n   nmk=nk*0.2;\n   nmt=nt*0.3;\n   nmu=nu*0.5;\n   na=nmk+nmt+nmu;\n   if(na&gt;=80)a\n   {\n      Grade=\"A\";\n   }\n   else if(na&gt;=90)\n   {\n      Grade=\"B\";\n   }\n   else if(na&gt;=80)\n   {\n      Grade=\"C\";\n   }\n   else if(na&gt;=70)\n   {\n      Grade=\"D\";\n   }\n   else\n   {\n      Grade=\"E\";\n   }\n   cout&lt;&lt;endl;\n   cout&lt;&lt;\"     Siswa Yang Bernama \"&lt;&lt;nama&lt;&lt;endl;\n   cout&lt;&lt;\"     Dengan nilai presentase yang dihasilkan\"&lt;&lt;endl;\n   cout&lt;&lt;\"     Nilai Murni Keaktifan x 20%    : \"&lt;&lt;nmk&lt;&lt;endl;\n   cout&lt;&lt;\"     Nilai Murni Tugas     x 30%    : \"&lt;&lt;nmt&lt;&lt;endl;\n   cout&lt;&lt;\"     Nilai Murni Ujian     x 50%    : \"&lt;&lt;nmu&lt;&lt;endl;\n   cout&lt;&lt;\"     Memperoleh Nilai Akhir Sebesar : \"&lt;&lt;na&lt;&lt;endl;\n   cout&lt;&lt;\"     Grade yang di dapat            : \"&lt;&lt;Grade&lt;&lt;endl;\n   getch();\n}\n</code></pre>\n"}, {"tags": ["c++", "boost", "xcode6", "boost-variant"], "comments": [{"owner": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458749160, "post_id": 36183070, "comment_id": 60001619, "body": "What did you try so far? sample code"}, {"owner": {"reputation": 214, "user_id": 6094930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a7b4ec9fde09fe2f26c9167dceb53?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6094930/sid"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458749437, "post_id": 36183070, "comment_id": 60001830, "body": "If I&#39;m correct <code>boost::variant&lt;vector&lt;string&gt;, vector&lt;int&gt; &gt; v;</code> defines a vector <code>v</code> with int and string inputs. But I am unsure on how to fill it."}, {"owner": {"reputation": 214, "user_id": 6094930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a7b4ec9fde09fe2f26c9167dceb53?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6094930/sid"}, "reply_to_user": {"reputation": 3213, "user_id": 6084430, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/B0TaE.jpg?s=128&g=1", "display_name": "DimChtz", "link": "https://stackoverflow.com/users/6084430/dimchtz"}, "edited": false, "score": 0, "creation_date": 1458749590, "post_id": 36183070, "comment_id": 60001958, "body": "@DimChtz, I have also looked at the boost <a href=\"http://www.boost.org/doc/libs/1_55_0/doc/html/variant/tutorial.html\" rel=\"nofollow noreferrer\">tutorial</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6105295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/574f21266eb685007be429b4cba23cee?s=128&d=identicon&r=PG&f=1", "display_name": "Augusto93", "link": "https://stackoverflow.com/users/6105295/augusto93"}, "is_accepted": false, "score": 0, "last_activity_date": 1458751219, "last_edit_date": 1458751219, "creation_date": 1458749884, "answer_id": 36183410, "question_id": 36183070, "link": "https://stackoverflow.com/questions/36183070/generating-a-vector-with-int-and-string-arguments/36183410#36183410", "title": "Generating a vector with int and string arguments", "body": "<p>You could create a vector of Strings and then use .toString() in the positions with numbers. Or at least in Java you could create a Class VectorIntString that every instance of the class has both vectors. So when you construct the object: \nyou will do something like this</p>\n\n<pre><code>VectorIntString vec= new VectorIntString(int a,String a, int b, String b.... ,);\n</code></pre>\n\n<p>So the constructor will add odds position to the Int vector and even positions to the String vector.</p>\n"}, {"comments": [{"owner": {"reputation": 214, "user_id": 6094930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a7b4ec9fde09fe2f26c9167dceb53?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6094930/sid"}, "edited": false, "score": 0, "creation_date": 1459011010, "post_id": 36183451, "comment_id": 60106394, "body": "I am getting the compilation error: no matching function for call to apply_visitor, when I try to access elements of the vector by iterating over it. Namely, if I use the last segment of the code that you posted. Any suggestions?"}, {"owner": {"reputation": 214, "user_id": 6094930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a7b4ec9fde09fe2f26c9167dceb53?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6094930/sid"}, "edited": false, "score": 0, "creation_date": 1459012415, "post_id": 36183451, "comment_id": 60106878, "body": "could you also explain what the last part is doing, i.e. the apply visitor part?"}, {"owner": {"reputation": 214, "user_id": 6094930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a7b4ec9fde09fe2f26c9167dceb53?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6094930/sid"}, "edited": false, "score": 0, "creation_date": 1459109917, "post_id": 36183451, "comment_id": 60133968, "body": "I have updated the code. It should have had the <code>struct MyVisitor : public boost::static_visitor&lt;&gt;</code> as opposed to just <code>struct MyVisitor</code>."}, {"owner": {"reputation": 1054, "user_id": 1521243, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/caec6b8ca7c22e89ceeb5a350b75f61c?s=128&d=identicon&r=PG", "display_name": "Ari", "link": "https://stackoverflow.com/users/1521243/ari"}, "reply_to_user": {"reputation": 214, "user_id": 6094930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a7b4ec9fde09fe2f26c9167dceb53?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6094930/sid"}, "edited": false, "score": 0, "creation_date": 1459174593, "post_id": 36183451, "comment_id": 60156260, "body": "@Sid it looks like you probably figured it out, but apply_visitor calls the visitor function, passing the variant as the argument. I don&#39;t know exactly how it works under the hood, but you can imagine it unpacks the variant, casts it to the actual type, and calls the right overload for your function. I believe it&#39;s named after the &quot;visitor pattern&quot;. Also, feel free to edit my post so future people benefit."}, {"owner": {"reputation": 214, "user_id": 6094930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a7b4ec9fde09fe2f26c9167dceb53?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6094930/sid"}, "edited": false, "score": 0, "creation_date": 1459209622, "post_id": 36183451, "comment_id": 60173292, "body": "Thanks Ari! I have submitted a change ... just waiting for it to be peer-reviewed and then it will be posted!"}], "tags": [], "owner": {"reputation": 1054, "user_id": 1521243, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/caec6b8ca7c22e89ceeb5a350b75f61c?s=128&d=identicon&r=PG", "display_name": "Ari", "link": "https://stackoverflow.com/users/1521243/ari"}, "is_accepted": true, "score": 1, "last_activity_date": 1458749986, "creation_date": 1458749986, "answer_id": 36183451, "question_id": 36183070, "link": "https://stackoverflow.com/questions/36183070/generating-a-vector-with-int-and-string-arguments/36183451#36183451", "title": "Generating a vector with int and string arguments", "body": "<p>Here are some examples (written from memory):</p>\n\n<pre><code>typedef boost::variant&lt;\n   std::string,\n   int\n&gt; StringOrInt;   // using a typedef is just for convenience\n\nStringOrInt myVariant;\nmyVariant = std::string(\"hello\");  // both of these work\nmyVariant = 5;\n\nstd::vector&lt;StringOrInt&gt; myvec;\nmyvec.push_back(5);\nmyvec.push_back(std::string(\"hello\"));\n</code></pre>\n\n<p>Then to read, there are two ways. One is using boost::get, the other is using a visitor. Visitor is usually a bit more robust, but if it's a simple case, boost::get can work well.</p>\n\n<pre><code>std::string&amp; mystr = boost::get&lt;std::string&gt;(myvec[0]); // this will throw if the type you requested isn't what's stored\nstd::string* mystr = boost::get&lt;std::string*&gt;(myvec[0]); // pointer version doesn't throw\n</code></pre>\n\n<p>Since you're probably iterating, a visitor will likely work better. You create a functor that has overloads for each type in your variant, and use <code>boost::apply_visitor</code>. For example:</p>\n\n<pre><code>struct MyVisitor {\n    void operator()(const std::string&amp; arg) const {\n        std::cout &lt;&lt; \"It was a string\";\n    }\n\n    void operator()(int arg) const {\n        std::cout &lt;&lt; \"It was an int\";\n    }\n};\n\nMyVisitor myVisitor;\nfor (auto&amp; val : myvec) {\n     boost::apply_visitor(myVisitor, val);\n}\n</code></pre>\n"}], "owner": {"reputation": 214, "user_id": 6094930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed0a7b4ec9fde09fe2f26c9167dceb53?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/6094930/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1730, "favorite_count": 0, "accepted_answer_id": 36183451, "answer_count": 2, "score": -1, "last_activity_date": 1458751219, "creation_date": 1458748995, "question_id": 36183070, "link": "https://stackoverflow.com/questions/36183070/generating-a-vector-with-int-and-string-arguments", "title": "Generating a vector with int and string arguments", "body": "<p>I would like to use the boost library (boost::variant) in C++ to define a vector if integers and strings. I am struggling to fill a such a vector - can someone either post an example code with fills a vector with <code>ints</code> and <code>strings</code> <em>using the Boost library</em> and reads elements of the vector or otherwise direct me to an example.</p>\n\n<p>I searched for articles with the tage <code>boost::variants</code> on the SO, but could not find what I wanted.</p>\n"}, {"tags": ["c++", "recursion", "stl"], "comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 1, "creation_date": 1458749319, "post_id": 36183037, "comment_id": 60001744, "body": "Do you know the difference between a pointer and everything that isn&#39;t a pointer?"}, {"owner": {"reputation": 33, "user_id": 5818463, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d065c9d1e8b476e362a51f057e916d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/5818463/austin-a"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1458749641, "post_id": 36183037, "comment_id": 60001995, "body": "I understand the basic concept behind a pointer yes, although sometimes I struggle to differentiate when to use them. Is there a certain line or several lines you are referring to in which they should not be used? @molbdnilo"}], "answers": [{"tags": [], "owner": {"reputation": 172, "user_id": 825399, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d787802aa479a66c51080a5c3f8b4c47?s=128&d=identicon&r=PG", "display_name": "Bhargava", "link": "https://stackoverflow.com/users/825399/bhargava"}, "is_accepted": false, "score": 0, "last_activity_date": 1458750024, "creation_date": 1458750024, "answer_id": 36183461, "question_id": 36183037, "link": "https://stackoverflow.com/questions/36183037/converting-stl-list-to-a-binary-search-tree-recursion-template/36183461#36183461", "title": "Converting STL List to a Binary Search Tree Recursion Template", "body": "<p>Your function takes a pointer to a list. That means that you should pass the address of your list to it.</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 2800125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f2fcee6e3461f552ab60a54cc21fc8?s=128&d=identicon&r=PG&f=1", "display_name": "Mao", "link": "https://stackoverflow.com/users/2800125/mao"}, "is_accepted": false, "score": 0, "last_activity_date": 1458750481, "creation_date": 1458750481, "answer_id": 36183638, "question_id": 36183037, "link": "https://stackoverflow.com/questions/36183037/converting-stl-list-to-a-binary-search-tree-recursion-template/36183638#36183638", "title": "Converting STL List to a Binary Search Tree Recursion Template", "body": "<p>If I look af this:</p>\n\n<pre><code>template &lt;class Item&gt; \nbinary_tree_node&lt;Item&gt;* convert(list&lt;Item&gt; *head, int n) \n</code></pre>\n\n<p>then at this:</p>\n\n<pre><code>binary_tree_node&lt;int&gt;* L2 = convert(L, 7);\n</code></pre>\n\n<p>and then at this: </p>\n\n<pre><code>list&lt;int&gt; L;\n</code></pre>\n\n<p>I might be wrong about it, but L is not a pointer, you don't use its addresse in the call and the definition wants a pointer.</p>\n"}], "owner": {"reputation": 33, "user_id": 5818463, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d065c9d1e8b476e362a51f057e916d9f?s=128&d=identicon&r=PG&f=1", "display_name": "Austin A", "link": "https://stackoverflow.com/users/5818463/austin-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1458750481, "creation_date": 1458748888, "question_id": 36183037, "link": "https://stackoverflow.com/questions/36183037/converting-stl-list-to-a-binary-search-tree-recursion-template", "title": "Converting STL List to a Binary Search Tree Recursion Template", "body": "<p>Here is what I have so far:</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"bintree.h\"\n#include &lt;list&gt;\n#include &lt;iostream&gt;\n\nusing namespace std;\nusing namespace main_savitch_10;\n\ntemplate &lt;class Item&gt;\nbinary_tree_node&lt;Item&gt;* convert(list&lt;Item&gt; *&amp; list, int start, int end);\n\ntemplate &lt;class Item&gt; \nbinary_tree_node&lt;Item&gt;* convert(list&lt;Item&gt; *head, int n);\n\nint main(int argc, char **argv)\n{\n    list&lt;int&gt; L;\n    L.push_front(10);\n    L.push_back(20);\n    L.push_back(30);\n    L.push_back(40);\n    L.push_back(50);\n    L.push_back(60);\n    L.push_back(70);\n    list&lt;int&gt;::iterator test;\n    for(test = L.begin(); test != L.end(); test++)\n    {\n    cout&lt;&lt;*test&lt;&lt;\" \";\n    }\n\n    binary_tree_node&lt;int&gt;* L2 = convert(L, 7);\n\n    print(L2, 3);\n\n}\n\ntemplate &lt;class Item&gt;\nbinary_tree_node&lt;Item&gt;* convert(list&lt;Item&gt; *&amp; list, int start, int end)\n{\n    if (start &gt; end) return NULL;\n    int mid = start + (end - start) / 2;\n    binary_tree_node&lt;Item&gt;* leftChild = convert(list, start, mid-1);\n    binary_tree_node&lt;Item&gt;* parent = new binary_tree_node&lt;Item&gt; (list-&gt;data());\n    parent-&gt;left() = leftChild;\n    list = list-&gt;next();\n    parent-&gt;right() = convert(list, mid+1, end);\n    return parent;\n}\n\ntemplate &lt;class Item&gt; \nbinary_tree_node&lt;Item&gt;* convert(list&lt;Item&gt; *head, int n) \n{\n    return convert(head, 0, n-1);\n}\n</code></pre>\n\n<p>I am getting an error at line \n<code>binary_tree_node&lt;int&gt;* L2 = convert(L, 7);</code></p>\n\n<p>Saying that there is no matching function for the call... how is this possible when I have them listed right above the main?</p>\n\n<p>Side note: the \"bintree.h\" and the namespace main_savitch_10 are from template implementation files of binary search tree and can be found at \n<a href=\"http://ksuweb.kennesaw.edu/~dgayler/cs3304/text_examples/chap10/bintree.h\" rel=\"nofollow\">http://ksuweb.kennesaw.edu/~dgayler/cs3304/text_examples/chap10/bintree.h</a>\n<a href=\"http://ksuweb.kennesaw.edu/~dgayler/cs3304/text_examples/chap10/bintree.template\" rel=\"nofollow\">http://ksuweb.kennesaw.edu/~dgayler/cs3304/text_examples/chap10/bintree.template</a></p>\n"}, {"tags": ["c++", "visual-c++", "mfc"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1458754820, "post_id": 36182872, "comment_id": 60005513, "body": "You already asked about this earlier <a href=\"http://stackoverflow.com/q/36180788/4603670\">stackoverflow.com/q/36180788/4603670</a> --- It&#39;s hard to say by just looking at 2 lines of code. People can guess what the problem is or you can take the time to explain what you are doing."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 1, "creation_date": 1458811605, "post_id": 36182872, "comment_id": 60027180, "body": "I suppose <code>m_ctlCheckBlack</code> is <code>NULL</code> for some reason."}, {"owner": {"reputation": 40219, "user_id": 898348, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13b3f2c44ba8449bd60764d07f4538dc?s=128&d=identicon&r=PG", "display_name": "Jabberwocky", "link": "https://stackoverflow.com/users/898348/jabberwocky"}, "edited": false, "score": 0, "creation_date": 1458811647, "post_id": 36182872, "comment_id": 60027201, "body": "From where are you calling the function that contains the 2 lines of code you posted?"}], "answers": [{"comments": [{"owner": {"reputation": 46, "user_id": 6095156, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ef2b6615eaebc039f198f0433cea937?s=128&d=identicon&r=PG&f=1", "display_name": "chaitanyakrishna", "link": "https://stackoverflow.com/users/6095156/chaitanyakrishna"}, "edited": false, "score": 0, "creation_date": 1458749751, "post_id": 36183291, "comment_id": 60002085, "body": "it returns a 0, but I did construct the button. What might be the possible issue?"}, {"owner": {"reputation": 316, "user_id": 5936388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iiXqy.jpg?s=128&g=1", "display_name": "nariuji", "link": "https://stackoverflow.com/users/5936388/nariuji"}, "reply_to_user": {"reputation": 46, "user_id": 6095156, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ef2b6615eaebc039f198f0433cea937?s=128&d=identicon&r=PG&f=1", "display_name": "chaitanyakrishna", "link": "https://stackoverflow.com/users/6095156/chaitanyakrishna"}, "edited": false, "score": 1, "creation_date": 1458751079, "post_id": 36183291, "comment_id": 60002962, "body": "What event handler is this code written in? Even if CButton instance has already been created, Button Control as a part of GUI does not yet exist, does it?"}, {"owner": {"reputation": 46, "user_id": 6095156, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ef2b6615eaebc039f198f0433cea937?s=128&d=identicon&r=PG&f=1", "display_name": "chaitanyakrishna", "link": "https://stackoverflow.com/users/6095156/chaitanyakrishna"}, "edited": false, "score": 0, "creation_date": 1458751736, "post_id": 36183291, "comment_id": 60003438, "body": "I created a check box with ID &quot; IDC_BLACK&quot;. The CButton is referencing to that check box. I did create a check box in the GUI. @nariuji"}, {"owner": {"reputation": 316, "user_id": 5936388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iiXqy.jpg?s=128&g=1", "display_name": "nariuji", "link": "https://stackoverflow.com/users/5936388/nariuji"}, "reply_to_user": {"reputation": 46, "user_id": 6095156, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ef2b6615eaebc039f198f0433cea937?s=128&d=identicon&r=PG&f=1", "display_name": "chaitanyakrishna", "link": "https://stackoverflow.com/users/6095156/chaitanyakrishna"}, "edited": false, "score": 0, "creation_date": 1458752545, "post_id": 36183291, "comment_id": 60004028, "body": "If you write this code in OnCreate() or OnUpdate(), it is possible those events run earlier than the action of Button Control&#39;s create. I think there are some events like that."}, {"owner": {"reputation": 13397, "user_id": 2287576, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iCua4.jpg?s=128&g=1", "display_name": "Andrew Truckle", "link": "https://stackoverflow.com/users/2287576/andrew-truckle"}, "edited": false, "score": 0, "creation_date": 1458761691, "post_id": 36183291, "comment_id": 60009645, "body": "Have you tried using GetSafeHwnd() and only if not null run the GetCheck method."}], "tags": [], "owner": {"reputation": 316, "user_id": 5936388, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iiXqy.jpg?s=128&g=1", "display_name": "nariuji", "link": "https://stackoverflow.com/users/5936388/nariuji"}, "is_accepted": false, "score": 0, "last_activity_date": 1458857891, "last_edit_date": 1458857891, "creation_date": 1458749598, "answer_id": 36183291, "question_id": 36182872, "link": "https://stackoverflow.com/questions/36182872/mfc-memory-allocation-violation/36183291#36183291", "title": "MFC &quot;memory allocation violation&quot;", "body": "<p>Perhaps, I doubt it tried to get the state of button when the Button was not yet constructed.</p>\n\n<pre><code>int chkBoxBlack = m_ctlCheckBlack != NULL ? m_ctlCheckBlack-&gt;GetCheck() : 0;\n</code></pre>\n\n<p>Or, do you try to operate from outside dialog?\nIf it is so, you had better try to do this.</p>\n\n<pre><code>\u25a0CButton *m_ctlCheckBlack = (CButton *)yourdlg.GetDlgItem(IDC_BLACK);\n\n\u25a0FindWindowEx(yourdlg.GetSafeHwnd(), NULL, NULL, \"(your button caption)\");\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1727, "user_id": 3166476, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/tU6SH.jpg?s=128&g=1", "display_name": "lakeweb", "link": "https://stackoverflow.com/users/3166476/lakeweb"}, "is_accepted": false, "score": 1, "last_activity_date": 1458749920, "creation_date": 1458749920, "answer_id": 36183424, "question_id": 36182872, "link": "https://stackoverflow.com/questions/36182872/mfc-memory-allocation-violation/36183424#36183424", "title": "MFC &quot;memory allocation violation&quot;", "body": "<p>There is rarely a good reason to use GetDlgItem. In your resource editor, right click the button and 'Add Variable..'\nIt will default as a control. Give it a name. You will get a member in the dialog class:</p>\n\n<pre><code>CButton myButtonName;\n</code></pre>\n\n<p>Now it should be safe to:</p>\n\n<pre><code>myButtonName.GetChecked( );\n</code></pre>\n\n<p>as it will have been created and properly subclassed.</p>\n"}], "owner": {"reputation": 46, "user_id": 6095156, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/4ef2b6615eaebc039f198f0433cea937?s=128&d=identicon&r=PG&f=1", "display_name": "chaitanyakrishna", "link": "https://stackoverflow.com/users/6095156/chaitanyakrishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1458857891, "creation_date": 1458748448, "question_id": 36182872, "link": "https://stackoverflow.com/questions/36182872/mfc-memory-allocation-violation", "title": "MFC &quot;memory allocation violation&quot;", "body": "<p>I created a check box in a dialog box and trying to access its condition whether checked or not. This is my code:</p>\n\n<pre><code>CButton *m_ctlCheckBlack = (CButton *)GetDlgItem(IDC_BLACK);\n\nint chkBoxBlack = m_ctlCheckBlack-&gt;GetCheck();\n</code></pre>\n\n<p>As I run through this code, it pops up an exception saying :</p>\n\n<pre><code>Exception thrown at 0x0FA45564 (mfc140d.dll) in braille_obr.exe: 0xC0000005:      \nAccess violation reading location 0x00000020.\n</code></pre>\n\n<p>any help will be appreciated. thank you.</p>\n"}, {"tags": ["c++", "c++11", "casting", "stdbind"], "comments": [{"owner": {"reputation": 12594, "user_id": 2491746, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e4432131c9d27a81503f25956bc8b9c?s=128&d=identicon&r=PG", "display_name": "Simple", "link": "https://stackoverflow.com/users/2491746/simple"}, "edited": false, "score": 1, "creation_date": 1458749891, "post_id": 36182824, "comment_id": 60002186, "body": "You can&#39;t convert a bind expression (<code>std::bind</code> result) to a function pointer. Look at <code>std::function</code>."}], "answers": [{"tags": [], "owner": {"reputation": 32089, "user_id": 266198, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/7x8PT.jpg?s=128&g=1", "display_name": "Nim", "link": "https://stackoverflow.com/users/266198/nim"}, "is_accepted": false, "score": 3, "last_activity_date": 1458749954, "creation_date": 1458749954, "answer_id": 36183439, "question_id": 36182824, "link": "https://stackoverflow.com/questions/36182824/type-cast-stdplaceholder/36183439#36183439", "title": "Type cast std::placeholder", "body": "<p>Wouldn't this be cleaner (and much simpler using lambdas and <code>std::function&lt;&gt;</code>)?</p>\n\n<pre><code>class MyClass {\n  using WriteFunc = std::function&lt;void(int16_t, int8_t)&gt;;\n\npublic:\n\n  void init(WriteFunc&amp;&amp; func) {\n    write_func_ = std::move(func);\n  }\n\nprivate:\n  WriteFunc write_func_;\n};\n</code></pre>\n\n<p>Then call in some other type..</p>\n\n<pre><code>class Foo {\n  // e.g\n  void SomeWriteFunction(int8_t x, int8_t y) {\n  }\n\n  void bar() {\n    // The lambda wraps the real write function and the type conversion\n    mc_inst.init([this](int16_t x, int8_t y) {\n      this-&gt;SomeWriteFunction(x, y);\n    });  \n  }\n};\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5839319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27adbaf3d69b5ba311ec587fc8ede52d?s=128&d=identicon&r=PG&f=1", "display_name": "Mumblepins", "link": "https://stackoverflow.com/users/5839319/mumblepins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 470, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1458749954, "creation_date": 1458748327, "question_id": 36182824, "link": "https://stackoverflow.com/questions/36182824/type-cast-stdplaceholder", "title": "Type cast std::placeholder", "body": "<p>I'm trying to use std::bind and typecast the function arguments to use with a typedef function.  However, I can't typecast the std::placeholder. Any ideas to implement what I'm trying to do?  For varied reasons, I need to be able to have the typedef function have a uint16_t argument, and also have the init function accept a member function that takes a uint8_t argument). The code (edited for simplicity) that I'm using:</p>\n\n<pre><code>typedef void (write_func_t) (uint16_t, uint8_t);\n\nclass MyClass {\npublic:\n  MyClass();\n\n\n  template &lt; typename T &gt;\n  void init(void (T::*write_func)(uint8_t, uint8_t), T *instance)     {\n    using namespace std::placeholders;\n    _write_func = std::bind(write_func, instance, (uint16_t)_1, _2);\n    this-&gt;init();\n  }\n\nprivate:\n  write_func_t *_write_func;\n\n};\n</code></pre>\n"}, {"tags": ["c++", "linux", "gcc", "linker"], "comments": [{"owner": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1458748183, "post_id": 36182717, "comment_id": 60000865, "body": "Probably depends how you configured the gcc build."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 115642, "user_id": 299924, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/71fc84230717311db1410d7106273128?s=128&d=identicon&r=PG", "display_name": "trojanfoe", "link": "https://stackoverflow.com/users/299924/trojanfoe"}, "edited": false, "score": 0, "creation_date": 1458748827, "post_id": 36182717, "comment_id": 60001359, "body": "@trojanfoe, not gcc, but binutils."}], "owner": {"reputation": 51, "user_id": 3124028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb237efb1ad5cf1fed66aadbe029ca2d?s=128&d=identicon&r=PG&f=1", "display_name": "user3124028", "link": "https://stackoverflow.com/users/3124028/user3124028"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458748033, "creation_date": 1458748033, "question_id": 36182717, "link": "https://stackoverflow.com/questions/36182717/ld-broken-downlevel-on-linux", "title": "&quot;ld&quot; broken (downlevel?) on Linux", "body": "<p>I've attempted to build g++ v5.1.0 on my Centos 6 system.   The build seems to have worked, but when I try to compile and >link&lt; a program, the linker fails thus:</p>\n\n<pre><code>[seesdev@sees15-lin ~]$ g++ -o testcpp testcpp.cpp\n/usr/bin/ld: unrecognized option '-plugin'\n/usr/bin/ld: use the --help option for usage information\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>Do I have to get a newer version of \"ld\"?   How?</p>\n"}, {"tags": ["c++", "boost", "shared-ptr", "boost-bind"], "comments": [{"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1458748368, "post_id": 36182694, "comment_id": 60001006, "body": "what error do you get ?"}, {"owner": {"reputation": 1539, "user_id": 2223978, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e4ac087f1604ecff0fcc1c872aeb2e4c?s=128&d=identicon&r=PG", "display_name": "H&#39;H", "link": "https://stackoverflow.com/users/2223978/hh"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1458749053, "post_id": 36182694, "comment_id": 60001530, "body": "@PiotrSkotnicki, the error is that it take (this keyword) as this pointer of class B"}, {"owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 2, "creation_date": 1458749141, "post_id": 36182694, "comment_id": 60001600, "body": "then perpahs you want <code>boost::bind(&amp;Vertex::id, _1) == (*it)-&gt;id())</code>, or, <code>boost::bind(static_cast&lt;int(Vertex::*)()&gt;(&amp;Vertex::id), _1) == (*it)-&gt;id())</code> (where <code>int</code> is the return type of <code>id</code>)"}, {"owner": {"reputation": 1539, "user_id": 2223978, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e4ac087f1604ecff0fcc1c872aeb2e4c?s=128&d=identicon&r=PG", "display_name": "H&#39;H", "link": "https://stackoverflow.com/users/2223978/hh"}, "reply_to_user": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "edited": false, "score": 0, "creation_date": 1458924148, "post_id": 36182694, "comment_id": 60079323, "body": "thank you very much, if you provide you comment as an answer I will choose it as best solution. and Also will you please explain me what star means in &quot;(Vertex::*) ?"}], "answers": [{"tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 2, "last_activity_date": 1458924642, "creation_date": 1458924642, "answer_id": 36224256, "question_id": 36182694, "link": "https://stackoverflow.com/questions/36182694/using-find-if-and-boostbind-with-a-set-of-shared-pointers/36224256#36224256", "title": "Using find_if and boost::bind with a set of shared_pointers", "body": "<p>To call a member function for each object stored in a collection, you need to use a placeholder as the first bound argument of the <code>boost::bind</code>:</p>\n\n<pre><code>boost::bind(&amp;Vertex::id, _1) == (*it)-&gt;id())\n//                       ~^~\n</code></pre>\n\n<p>This way, each argument <code>a</code>, will be bound to a member function pointer, and called as <code>(a.*&amp;Vertex::id)()</code>.</p>\n\n<p>However, seeing that the error message says <code>unresolved overloaded function type</code>, it draws a conclusion that your class <code>Vertex</code> can have multiple overloads of member function <code>id</code>. As such, the compiler is unable to tell which one it should pass as the argument of <code>boost::bind</code>. To solve this, use an explicit cast to a member function pointer (the asterisk after colon indicates it's a pointer to a member):</p>\n\n<pre><code>boost::bind(static_cast&lt;int(Vertex::*)()const&gt;(&amp;Vertex::id), _1) == (*it)-&gt;id())\n//                      ~~~~~~~~~~~~~~~~~~~~^\n</code></pre>\n\n<p>In the case class <code>Vertex</code> has multiple overloads, say:</p>\n\n<pre><code>int id() const { return 0; }\nvoid id(int i) { }\n</code></pre>\n\n<p>you will use the first one for binding.</p>\n"}], "owner": {"reputation": 1539, "user_id": 2223978, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/e4ac087f1604ecff0fcc1c872aeb2e4c?s=128&d=identicon&r=PG", "display_name": "H&#39;H", "link": "https://stackoverflow.com/users/2223978/hh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 0, "accepted_answer_id": 36224256, "answer_count": 1, "score": 1, "last_activity_date": 1458924642, "creation_date": 1458747950, "last_edit_date": 1495541257, "question_id": 36182694, "link": "https://stackoverflow.com/questions/36182694/using-find-if-and-boostbind-with-a-set-of-shared-pointers", "title": "Using find_if and boost::bind with a set of shared_pointers", "body": "<p>I have a vector of shared_ptr, I want to combine boost shared_ptr and bind together. </p>\n\n<p>My question is very similar to <a href=\"https://stackoverflow.com/questions/2413786/using-for-each-and-boostbind-with-a-vector-of-pointers\">this</a>, except that instead of \"&amp;MyClass::ReferenceFn\" I would like to call \"&amp;Element::Fn\". </p>\n\n<p>Here is a similar piece of code: </p>\n\n<pre><code>typedef boost::shared_ptr&lt; Vertex &gt; vertex_ptr; \nstd::set&lt;vertex_ptr&gt; vertices;\n\nvoid B::convert()\n{\n...\nif( std::find_if(boost::make_indirect_iterator(vertices.begin()), \n                 boost::make_indirect_iterator(vertices.end() ),  boost::bind( &amp;Vertex::id, boost::ref(*this), _1 ) == (*it)-&gt;id() ) == vertices.end() )\n}\n</code></pre>\n\n<p>here is the error:</p>\n\n<pre><code>no matching function for call to \u2018bind(&lt;unresolved overloaded function type&gt;, const boost::reference_wrapper&lt;B&gt;, boost::arg&lt;1&gt;&amp;)\u2019\n</code></pre>\n\n<p><strong>NOTE</strong>: I am limited to use the C++03.</p>\n"}, {"tags": ["java", "c++", "types", "storing-data", "storing-information"], "comments": [{"owner": {"reputation": 12604, "user_id": 4028085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adaca62313b171fa49a9210bb6f838e8?s=128&d=identicon&r=PG&f=1", "display_name": "brso05", "link": "https://stackoverflow.com/users/4028085/brso05"}, "edited": false, "score": 2, "creation_date": 1458747909, "post_id": 36182663, "comment_id": 60000647, "body": "My opinion: go with <code>String</code>..."}, {"owner": {"reputation": 697, "user_id": 2897208, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ed280d1219b487ec15a1ede0c9461350?s=128&d=identicon&r=PG&f=1", "display_name": "mboronin", "link": "https://stackoverflow.com/users/2897208/mboronin"}, "reply_to_user": {"reputation": 12604, "user_id": 4028085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adaca62313b171fa49a9210bb6f838e8?s=128&d=identicon&r=PG&f=1", "display_name": "brso05", "link": "https://stackoverflow.com/users/4028085/brso05"}, "edited": false, "score": 0, "creation_date": 1458747965, "post_id": 36182663, "comment_id": 60000696, "body": "@brso05 Can you explain why?"}, {"owner": {"reputation": 20558, "user_id": 2864275, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p2xKk.png?s=128&g=1", "display_name": "I\u0142ya Bursov", "link": "https://stackoverflow.com/users/2864275/i%c5%82ya-bursov"}, "edited": false, "score": 0, "creation_date": 1458748202, "post_id": 36182663, "comment_id": 60000880, "body": "passport number in some countries contains characters, so there is no question &quot;what type&quot;, you have the only type - string"}, {"owner": {"reputation": 12604, "user_id": 4028085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adaca62313b171fa49a9210bb6f838e8?s=128&d=identicon&r=PG&f=1", "display_name": "brso05", "link": "https://stackoverflow.com/users/4028085/brso05"}, "edited": false, "score": 2, "creation_date": 1458748266, "post_id": 36182663, "comment_id": 60000922, "body": "<a href=\"http://stackoverflow.com/a/1090065/4028085\">stackoverflow.com/a/1090065/4028085</a>"}, {"owner": {"reputation": 12604, "user_id": 4028085, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adaca62313b171fa49a9210bb6f838e8?s=128&d=identicon&r=PG&f=1", "display_name": "brso05", "link": "https://stackoverflow.com/users/4028085/brso05"}, "edited": false, "score": 0, "creation_date": 1458748324, "post_id": 36182663, "comment_id": 60000964, "body": "<a href=\"http://stackoverflow.com/a/1090100/4028085\">stackoverflow.com/a/1090100/4028085</a>"}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1458748469, "post_id": 36182663, "comment_id": 60001079, "body": "As long as it is not the primary key, you should use a string, because passport numbers might contain non digit characters. And as it is a <i>significant</i> value that can change over the time (I change my passport and get a new number every 5 or 10 years), it would be a poor candidate for a primary key."}], "answers": [{"comments": [{"owner": {"reputation": 80378, "user_id": 637853, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72baa38005eb8de126b2dd2e6fa1d660?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/637853/thomas"}, "edited": false, "score": 0, "creation_date": 1458748494, "post_id": 36182833, "comment_id": 60001097, "body": "I second that. I used to work on a project that used <code>Long</code> for article numbers because they were just numbers at that time. Then the inevitable happened: a customer started to use alpha numeric article &quot;numbers&quot;. All the code had to be adapted to use <code>String</code> instead of <code>Long</code> - you can imagine what that meant."}], "tags": [], "owner": {"reputation": 91523, "user_id": 251738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b01b33120fefaad052b4a6864cbc7517?s=128&d=identicon&r=PG", "display_name": "Mark B", "link": "https://stackoverflow.com/users/251738/mark-b"}, "is_accepted": true, "score": 3, "last_activity_date": 1458748345, "creation_date": 1458748345, "answer_id": 36182833, "question_id": 36182663, "link": "https://stackoverflow.com/questions/36182663/what-type-is-more-reasonable-to-use-for-document-numbers/36182833#36182833", "title": "What type is more reasonable to use for document numbers", "body": "<p>A passport number is an identifier, not a number. I don't know if it's actually done, but consider cases with leading zeroes, or if we run out of numbers and start prefixing with letters, etc. You should absolutely use a non-numeric type such as string.</p>\n"}], "owner": {"reputation": 697, "user_id": 2897208, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ed280d1219b487ec15a1ede0c9461350?s=128&d=identicon&r=PG&f=1", "display_name": "mboronin", "link": "https://stackoverflow.com/users/2897208/mboronin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 36182833, "answer_count": 1, "score": 1, "last_activity_date": 1458748345, "creation_date": 1458747861, "last_edit_date": 1458748107, "question_id": 36182663, "link": "https://stackoverflow.com/questions/36182663/what-type-is-more-reasonable-to-use-for-document-numbers", "title": "What type is more reasonable to use for document numbers", "body": "<p>For example we have a class person, who has a passport number field. Which type is better to use. In case it is a number, which is significantly big, but we do not need to perform any calculations with it, so we probably can use it with a string? And why?</p>\n"}, {"tags": ["c++", "casting", "compilation"], "comments": [{"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1458747946, "post_id": 36182654, "comment_id": 60000679, "body": "if the compiler complains about mixed types in comparison, it is broken. There is no comparison in the code you show :P"}, {"owner": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 1, "creation_date": 1458748182, "post_id": 36182654, "comment_id": 60000860, "body": "As @tobi303 points out, you probably mean <code>==</code>, as opposed to <code>=</code> in your example (that is, equality comparison, not assignment)."}, {"owner": {"reputation": 3983, "user_id": 620029, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c3c977d6b546bc538aa47413431dba0c?s=128&d=identicon&r=PG", "display_name": "Vladp", "link": "https://stackoverflow.com/users/620029/vladp"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1458748216, "post_id": 36182654, "comment_id": 60000892, "body": "@tobi303 not sure but I believe the hidden comparison is in the if, if(A) -&gt; if(A!=0)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "reply_to_user": {"reputation": 3983, "user_id": 620029, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c3c977d6b546bc538aa47413431dba0c?s=128&d=identicon&r=PG", "display_name": "Vladp", "link": "https://stackoverflow.com/users/620029/vladp"}, "edited": false, "score": 0, "creation_date": 1458748380, "post_id": 36182654, "comment_id": 60001013, "body": "@Vladp actually, when thinking about it, I also thought that maybe there is a comparison involved, but I would find it strange if the compiler spits out a warning about comparison for this code."}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1458748495, "post_id": 36182654, "comment_id": 60001100, "body": "as Schafwolle says in his answer, values are just bits and bytes and the type tells the compiler how to interpret them. afaik, by casting to a different type the value does not change, in contrast to a conversion, that may have to change the value"}, {"owner": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "reply_to_user": {"reputation": 1432, "user_id": 1051764, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KcOnP.png?s=128&g=1", "display_name": "TerraPass", "link": "https://stackoverflow.com/users/1051764/terrapass"}, "edited": false, "score": 0, "creation_date": 1458748631, "post_id": 36182654, "comment_id": 60001207, "body": "@TerraPass - you&#39;re right I meant ==.  Just fixed question"}, {"owner": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "reply_to_user": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1458748916, "post_id": 36182654, "comment_id": 60001416, "body": "@tobi303 - how would I convert from int to unsigned int to ensure the comparison is valid?  (Without generating another warning about assigning an int to an unsigned int)"}, {"owner": {"reputation": 61303, "user_id": 4117728, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/66831ed13ffd9c497541220ec45c15c3?s=128&d=identicon&r=PG&f=1", "display_name": "largest_prime_is_463035818", "link": "https://stackoverflow.com/users/4117728/largest-prime-is-463035818"}, "edited": false, "score": 0, "creation_date": 1458811329, "post_id": 36182654, "comment_id": 60027056, "body": "you have to check if the int fits into the unsigned type which is not always the case"}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": -1, "last_activity_date": 1458748753, "creation_date": 1458748753, "answer_id": 36182979, "question_id": 36182654, "link": "https://stackoverflow.com/questions/36182654/does-cast-change-variable-in-c-or-only-tell-compiler-its-ok/36182979#36182979", "title": "Does cast change variable in c++, or only tell compiler its ok", "body": "<p>It depends on type of cast and what you are casting. In your particular case nothing is going to happen, but in other cases the actual code will be performed. Simplest example:</p>\n\n<pre><code>void foo(double d) {};\n...\nint x;\nfoo(static_cast&lt;double&gt;(x));\n</code></pre>\n\n<p>In this example there would be code generated.</p>\n"}, {"tags": [], "owner": {"reputation": 1574, "user_id": 239189, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUAlH.png?s=128&g=1", "display_name": "jszpilewski", "link": "https://stackoverflow.com/users/239189/jszpilewski"}, "is_accepted": false, "score": 1, "last_activity_date": 1458749369, "creation_date": 1458749369, "answer_id": 36183205, "question_id": 36182654, "link": "https://stackoverflow.com/questions/36182654/does-cast-change-variable-in-c-or-only-tell-compiler-its-ok/36183205#36183205", "title": "Does cast change variable in c++, or only tell compiler its ok", "body": "<p>When casting, at least at the conceptual level, compiler will create a temporary variable of the type specified in the cast expression.</p>\n\n<p>You may test that this expression:</p>\n\n<pre><code>(unsigned int) A = B; // This time assignment is intended\n</code></pre>\n\n<p>will generate an error pointing modification of a temporary (const) variable.</p>\n\n<p>Of course compiler is free to optimize away any temporary variables created through a cast. Nevertheless a valid method to build a temporary must exist. </p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1458750755, "post_id": 36183315, "comment_id": 60002750, "body": "Notice that if <code>A</code> is some negative value, <code>foo()</code> is not called no matter what value <code>B</code>.  <code>B</code>, an unsigned type, can never have a negative <i>value</i>."}], "tags": [], "owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "is_accepted": false, "score": 1, "last_activity_date": 1458751130, "last_edit_date": 1458751130, "creation_date": 1458749666, "answer_id": 36183315, "question_id": 36182654, "link": "https://stackoverflow.com/questions/36182654/does-cast-change-variable-in-c-or-only-tell-compiler-its-ok/36183315#36183315", "title": "Does cast change variable in c++, or only tell compiler its ok", "body": "<p>With plain types, in C and C++, <code>==</code> is always done with both operands converted to the same type.  In OP's code, <code>A</code> is converted to <code>unsigned</code> first.</p>\n\n<blockquote>\n  <p>If I cast ... does this instruct the compiler to insert code to convert A from int to unsigned int?</p>\n</blockquote>\n\n<p>Yes, but that code would have occurred anyway.  Without the cast, the compiler is simple warning that it is going to do something that the programmer may not have intended.</p>\n\n<blockquote>\n  <p>Or (If I cast ) does it just tell the compiler don't worry about, ignore the type mismatch?</p>\n</blockquote>\n\n<p>The type mis-match is not ignored.  By supplying the cast, there is no type mis-match to warn about.</p>\n\n<hr>\n\n<blockquote>\n  <p>How should I handle this comparison?</p>\n</blockquote>\n\n<p>Insure <code>A</code> is not negative, then convert to <code>unsigned</code> with a cast.</p>\n\n<pre><code>int A;\nunsigned int B;\n// if (A==B) foo();\nif (A &gt;= 0 &amp;&amp; (unsigned)A == B) foo();\n</code></pre>\n\n<p>Every non-negative <code>int</code> can be converted to an <code>unsigned</code> with no value change.</p>\n\n<blockquote>\n  <p>The range of nonnegative values of a signed integer type is a subrange of the\n  corresponding unsigned integer type C11dr \u00a76.2.5 9</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 0, "last_activity_date": 1458752348, "last_edit_date": 1458752348, "creation_date": 1458749960, "answer_id": 36183442, "question_id": 36182654, "link": "https://stackoverflow.com/questions/36182654/does-cast-change-variable-in-c-or-only-tell-compiler-its-ok/36183442#36183442", "title": "Does cast change variable in c++, or only tell compiler its ok", "body": "<p>So you question is just about a signed/unsigned comparison.</p>\n\n<p>C++ standard says in clause 5 Expressions [expr] \u00a7 10:</p>\n\n<blockquote>\n  <p>Many binary operators that expect operands of arithmetic or enumeration type cause conversions and yield\n  result types in a similar way. The purpose is to yield a common type, which is also the type of the result.\n  This pattern is called the usual arithmetic conversions, which are defined as follow:<br/>...<br/>\n  Otherwise, if the operand that has unsigned integer type has rank greater than or equal to the\n  rank of the type of the other operand, the operand with signed integer type shall be converted to\n  the type of the operand with unsigned integer type.</p>\n</blockquote>\n\n<p>and in 4.7 Integral conversions [conv.integral] \u00a72</p>\n\n<blockquote>\n  <p>If the destination type is unsigned, the resulting value is the least unsigned integer congruent to the source\n  integer (modulo 2n where n is the number of bits used to represent the unsigned type). [ Note: In a two\u2019s\n  complement representation, this conversion is conceptual and there is no change in the bit pattern (if there\n  is no truncation). \u2014end note ]</p>\n</blockquote>\n\n<p>That means that on a common system using 2-complement for negative numbers and 32 bits for an int or unsigned int, <code>(unsigned int) -1</code> will end in 4294967295.</p>\n\n<p>It may be what you want or not, the compiler just warn you that it will consider them as equal.</p>\n\n<p>If it is not what you want, just first test whether the signed value is negative. If it is, say that they are not equal an skip the equality comparison.</p>\n"}, {"comments": [{"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1458751248, "post_id": 36183548, "comment_id": 60003091, "body": "Noticed you eddied out OP&#39;s <code>C</code> tag. Meh"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1458753561, "post_id": 36183548, "comment_id": 60004669, "body": "@chux: &quot;Does cast change variable in c++&quot; rectified the edit imo. Feel free to rollback if you disagree; I edited before I thought about posting my own answer."}, {"owner": {"reputation": 112912, "user_id": 2410359, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/pIl9T.png?s=128&g=1", "display_name": "chux - Reinstate Monica", "link": "https://stackoverflow.com/users/2410359/chux-reinstate-monica"}, "edited": false, "score": 0, "creation_date": 1458753969, "post_id": 36183548, "comment_id": 60004950, "body": "Post had the inconsistency of talking about one language, yet tagged with two.  The subject/solution applies <i>nearly</i> equally to both languages.  We are in the grey/gray area of what is best.  I&#39;ll let OP sort it out.  Yet upvote for a good C++ answer."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": true, "score": 1, "last_activity_date": 1458750978, "last_edit_date": 1495540773, "creation_date": 1458750252, "answer_id": 36183548, "question_id": 36182654, "link": "https://stackoverflow.com/questions/36182654/does-cast-change-variable-in-c-or-only-tell-compiler-its-ok/36183548#36183548", "title": "Does cast change variable in c++, or only tell compiler its ok", "body": "<p>The cast implies a conversion, if necessary. But this is problematic for negative values. They are mapped to positive values on the unsigned type. Thus you have to make sure a negative value never compares equal any (positive) unsigned value:</p>\n\n<pre><code>int A;\nunsigned int B;\n\n...\n\nif ( (A &gt;= 0) &amp;&amp; (static_cast&lt;unsigned int&gt;(A) == B) )\n    foo();\n</code></pre>\n\n<p>This works because the unsigned variant of an integer type is guaranteed to hold all positive values (including <code>0</code>) of the corressponding signed type.</p>\n\n<p>Notice the usage of a <a href=\"https://stackoverflow.com/questions/103512/in-c-why-use-static-castintx-instead-of-intx\"><code>static_cast</code></a> instead of the \"classic\" C-style cast.</p>\n"}], "owner": {"reputation": 3491, "user_id": 659503, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/kQXQL.png?s=128&g=1", "display_name": "TSG", "link": "https://stackoverflow.com/users/659503/tsg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 802, "favorite_count": 0, "accepted_answer_id": 36183548, "answer_count": 5, "score": 2, "last_activity_date": 1458831674, "creation_date": 1458747832, "last_edit_date": 1458831674, "question_id": 36182654, "link": "https://stackoverflow.com/questions/36182654/does-cast-change-variable-in-c-or-only-tell-compiler-its-ok", "title": "Does cast change variable in c++, or only tell compiler its ok", "body": "<p>If I have this code:</p>\n\n<pre><code>int A;\nunsigned int B;\nif (A==B) foo();\n</code></pre>\n\n<p>the compiler will complain about mixed types in comparison.  If I cast A like this:</p>\n\n<pre><code>if ((unsigned int) A==B) foo();\n</code></pre>\n\n<p>does this instruct the compiler to insert code to convert A from int to unsigned int?  Or does it just tell the compiler don't worry about, ignore the type mismatch?</p>\n\n<hr>\n\n<h2>UPDATE: If this is unsafe (as pointed out below), how should I handle this comparison?  (Wouldn't assigning the contents of an int to an unsigned int for later comparison also be unsafe)</h2>\n\n<p>UPDATE: Wow are there some different answers (from people with thousands of posts).  I've accepted what seems like the best, but anyone reading this question should read ALL answers carefully.</p>\n"}, {"tags": ["c#", "c++", "vector", "managed-c++"], "comments": [{"owner": {"reputation": 1301, "user_id": 5037799, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yhFaw.jpg?s=128&g=1", "display_name": "Richard Dally", "link": "https://stackoverflow.com/users/5037799/richard-dally"}, "edited": false, "score": 2, "creation_date": 1458748360, "post_id": 36182651, "comment_id": 60000992, "body": "Visibility has nothing to do with your problems. <code>std::vector</code> does not exist in C#. You should write a function that converts a <code>std::vector</code> to a C# <code>List</code> with C++/CLI code."}, {"owner": {"reputation": 101, "user_id": 4325938, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7b71c30c84d1baa3989eb8dfb24d22e8?s=128&d=identicon&r=PG&f=1", "display_name": "Afshinzkh", "link": "https://stackoverflow.com/users/4325938/afshinzkh"}, "reply_to_user": {"reputation": 1301, "user_id": 5037799, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/yhFaw.jpg?s=128&g=1", "display_name": "Richard Dally", "link": "https://stackoverflow.com/users/5037799/richard-dally"}, "edited": false, "score": 0, "creation_date": 1458748667, "post_id": 36182651, "comment_id": 60001227, "body": "but how can I write the function?"}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 4325938, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7b71c30c84d1baa3989eb8dfb24d22e8?s=128&d=identicon&r=PG&f=1", "display_name": "Afshinzkh", "link": "https://stackoverflow.com/users/4325938/afshinzkh"}, "edited": false, "score": 0, "creation_date": 1458751278, "post_id": 36183373, "comment_id": 60003126, "body": "but the problem is if I add <code>&lt;collection.h&gt;</code> All other cli arrays I defined in my code will get confused and I get a huge amount of errors. I cant change all my array definitions to <code>cli::array</code> because it&#39;s a big work"}, {"owner": {"reputation": 452, "user_id": 1295474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9IFkH.jpg?s=128&g=1", "display_name": "Roney Gomes", "link": "https://stackoverflow.com/users/1295474/roney-gomes"}, "reply_to_user": {"reputation": 101, "user_id": 4325938, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7b71c30c84d1baa3989eb8dfb24d22e8?s=128&d=identicon&r=PG&f=1", "display_name": "Afshinzkh", "link": "https://stackoverflow.com/users/4325938/afshinzkh"}, "edited": false, "score": 0, "creation_date": 1458751772, "post_id": 36183373, "comment_id": 60003470, "body": "Well, I don&#39;t know how your code looks like. You didn&#39;t provide enough information so I thought you were working with C++/CX Runtime Components. I never used C++/CLI so I can&#39;t help you much. Perhaps prepending the namespace to each array declaration fixes this problem."}], "tags": [], "owner": {"reputation": 452, "user_id": 1295474, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9IFkH.jpg?s=128&g=1", "display_name": "Roney Gomes", "link": "https://stackoverflow.com/users/1295474/roney-gomes"}, "is_accepted": false, "score": 0, "last_activity_date": 1458749795, "creation_date": 1458749795, "answer_id": 36183373, "question_id": 36182651, "link": "https://stackoverflow.com/questions/36182651/call-a-vector-in-managed-c-from-c/36183373#36183373", "title": "Call a vector in managed C++ from C#", "body": "<p>Quoting the <a href=\"https://msdn.microsoft.com/en-us/library/hh700103.aspx\" rel=\"nofollow\">Collections</a> documentation for C++/CX:</p>\n\n<blockquote>\n  <p>In a Visual C++ component extensions (C++/CX) program, you can make\n  free use of Standard Template Library (STL) containers, or any other\n  user-defined collection type. However, when you pass collections back\n  and forth across the Windows Runtime application binary interface\n  (ABI)\u2014for example, to a XAML control or to a JavaScript client\u2014you\n  must use Windows Runtime collection types.</p>\n</blockquote>\n\n<p>So, you can use STL containers as much as you like internally, but you won't be able to pass them between runtime components as they don't cross ABI boundaries.</p>\n\n<p>A quick fix would be to use the <code>Vector</code> class available at the <code>Platform::Collections</code> namespace through <code>&lt;collection.h&gt;</code>.</p>\n\n<p>Change your header declaration to:</p>\n\n<pre><code>public:\n        static Vector&lt;Double&gt;^ IndVariables;\n</code></pre>\n\n<p>Your C# component needs to change as well:</p>\n\n<pre><code>var matu = new Double[] { 8.0, 8.0, 10.0, 10.0, 10.0, 10.0};\nmyCppClass.IndVariables = matu;\n</code></pre>\n\n<p>This is untested code, so syntax errors or other minor issues should be present in the snippets above.</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 6105845, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-7xBrASSnUcM/AAAAAAAAAAI/AAAAAAAAA8w/xhQxR1Rld6c/photo.jpg?sz=128", "display_name": "Philip Barile", "link": "https://stackoverflow.com/users/6105845/philip-barile"}, "is_accepted": true, "score": 1, "last_activity_date": 1458759174, "creation_date": 1458759174, "answer_id": 36186452, "question_id": 36182651, "link": "https://stackoverflow.com/questions/36182651/call-a-vector-in-managed-c-from-c/36186452#36186452", "title": "Call a vector in managed C++ from C#", "body": "<p>The fact that it is private does present an issue, but, making it public won't just solve your problem I think.  C# doesn't know what an std::vector is, as Richard said.  I don't know much about the structure of your code, what its doing, how its being used, etc, but, if all you need is to assign a list/array of numbers to the vector, you could use a List&lt;> in your C# code and wrap the assignment of the vector in something like this in your CLI project/file:</p>\n\n<pre><code>void Assign(Collections::Generic::List&lt;double&gt;^ l )\n{\n    IndVariables-&gt;clear();\n    for each (double i in l)\n    {  \n        IndVariables-&gt;push_back(i);\n    }\n}\n</code></pre>\n\n<p>Then in your C# program, you'd write (or however you've declared your List&lt;>):</p>\n\n<p><code>yourCppClass.Assign(new List&lt;double&gt;(){0.0, 42.0, 8.0});</code></p>\n\n<p>You could also add additional wrapper methods to manipulate or access the vector.  Again, this may or may not be suitable depending on the structure of your code.</p>\n"}], "owner": {"reputation": 101, "user_id": 4325938, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7b71c30c84d1baa3989eb8dfb24d22e8?s=128&d=identicon&r=PG&f=1", "display_name": "Afshinzkh", "link": "https://stackoverflow.com/users/4325938/afshinzkh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 808, "favorite_count": 0, "accepted_answer_id": 36186452, "answer_count": 2, "score": 0, "last_activity_date": 1608489273, "creation_date": 1458747823, "last_edit_date": 1608489273, "question_id": 36182651, "link": "https://stackoverflow.com/questions/36182651/call-a-vector-in-managed-c-from-c", "title": "Call a vector in managed C++ from C#", "body": "<p>I want to have a vector that has a number of independent variables. In my C++ header(.h) I defined it like this:</p>\n<pre><code>private:\n    // Static data structure holding independent variables\n    static vector&lt;double&gt;* indVariables;\n</code></pre>\n<p>And in my .cpp file it is defined the same and then I'm going to have to use this vector in some other function like this:</p>\n<pre><code>static vector&lt;double&gt;* indVariables;\n\nvoid fun(int m, int n)\n{\n    for (i = 0; i &lt; m; ++i)\n    {\n        ai = indVariables[i];\n\n        temp = exp(-n * (ai - 8.0));\n    }\n} /* fun */\n</code></pre>\n<p>Now in C# I want to copy a set of numbers to this vector and call it back to C++ something like this:</p>\n<pre><code>var matu = new double[]{ 8.0, 8.0, 10.0, 10.0, 10.0, 10.0};\nmyCppClass.indVariables = matu;\n</code></pre>\n<p>How can I do it?</p>\n<p>The first problem is because it is private I don't see it in C#. Do I have to make it public or are there other ways? And then how can I assign values to this vector?</p>\n"}, {"tags": ["c++", "arrays"], "comments": [{"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 6, "creation_date": 1458747868, "post_id": 36182634, "comment_id": 60000622, "body": "This is <i>not</i> valid C++."}, {"owner": {"reputation": 160, "user_id": 2513417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff84495f4b5ca0be8e79920814124e9c?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2513417/idan"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1458747965, "post_id": 36182634, "comment_id": 60000695, "body": "was compiled successfully <a href=\"https://ideone.com/SsvycN\" rel=\"nofollow noreferrer\">ideone.com/SsvycN</a>"}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 2, "creation_date": 1458748060, "post_id": 36182634, "comment_id": 60000765, "body": "@ldan I didn&#39;t say it wouldn&#39;t compile. I just said it wasn&#39;t valid C++."}, {"owner": {"reputation": 160, "user_id": 2513417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff84495f4b5ca0be8e79920814124e9c?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2513417/idan"}, "reply_to_user": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1458749905, "post_id": 36182634, "comment_id": 60002195, "body": "If a code was compiled and was run successfully, it is a valid code . It might not be a good code , but it is valid"}, {"owner": {"reputation": 12144, "user_id": 72882, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9d17e71eae127205da470fffa2dba899?s=128&d=identicon&r=PG", "display_name": "dandan78", "link": "https://stackoverflow.com/users/72882/dandan78"}, "edited": false, "score": 0, "creation_date": 1458750261, "post_id": 36182634, "comment_id": 60002432, "body": "@ldan Some compilers implement non-standard features and you seem to have come across one or several of those. That doesn&#39;t make it valid code, however. Have you read the question and answers linked to by Crazy Eddie?"}, {"owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "edited": false, "score": 2, "creation_date": 1458753689, "post_id": 36182634, "comment_id": 60004762, "body": "@Idan - A great many C++ compilers double as C compilers.  So they happen to support features that exist in C.  They <i>should</i> differentiate so that you can&#39;t attempt this, but most don&#39;t.  Most in fact compile code with their own extensions turned on without warnings.  In g++ for example you have to set the std flag, like -std=c++11.  Still then you have to turn on -pedantic.  Only then will g++ tell you that you&#39;re using non-standard constructs and I don&#39;t know that it will catch this particular one.  You can&#39;t use successful compilation as proof your code is valid."}, {"owner": {"reputation": 160, "user_id": 2513417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff84495f4b5ca0be8e79920814124e9c?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2513417/idan"}, "reply_to_user": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "edited": false, "score": 0, "creation_date": 1459000464, "post_id": 36182634, "comment_id": 60102677, "body": "@DOUGLASO.MOEN , I already said this is a bad code, so your question is irrelevant. Thanks for your help, I will enable more warning next time"}], "answers": [{"tags": [], "owner": {"reputation": 38726, "user_id": 301883, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/937b36681a56def2b41c438a00e12b46?s=128&d=identicon&r=PG", "display_name": "Edward Strange", "link": "https://stackoverflow.com/users/301883/edward-strange"}, "is_accepted": true, "score": 8, "last_activity_date": 1458747954, "last_edit_date": 1495541725, "creation_date": 1458747954, "answer_id": 36182695, "question_id": 36182634, "link": "https://stackoverflow.com/questions/36182634/how-does-c-handle-an-unknown-size-array-allocation-during-compilation-stage/36182695#36182695", "title": "How does c++ handle an unknown size array allocation during compilation stage", "body": "<p>Variable length arrays don't exist in C++: <a href=\"https://stackoverflow.com/questions/1887097/variable-length-arrays-in-c\">Why aren&#39;t variable-length arrays part of the C++ standard?</a></p>\n\n<p>So the answer to your question is: the compiler has no way of knowing and shouldn't try.</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 1508123, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vrytq.png?s=128&g=1", "display_name": "bigbyte", "link": "https://stackoverflow.com/users/1508123/bigbyte"}, "is_accepted": false, "score": 1, "last_activity_date": 1458748075, "creation_date": 1458748075, "answer_id": 36182732, "question_id": 36182634, "link": "https://stackoverflow.com/questions/36182634/how-does-c-handle-an-unknown-size-array-allocation-during-compilation-stage/36182732#36182732", "title": "How does c++ handle an unknown size array allocation during compilation stage", "body": "<p>It doesn't. and it's a compile time error. You'd want to look into pointers and dymanic memory allocations/deallocations. <a href=\"http://en.cppreference.com/w/cpp/memory/new/operator_new\" rel=\"nofollow\">http://en.cppreference.com/w/cpp/memory/new/operator_new</a></p>\n\n<p>basically, for single instances you'd use new/delete. and for arrays you'd use new[]/delete[]. Don't combine new with delete[] and new[] with delete. Bad things will happen.</p>\n"}], "owner": {"reputation": 160, "user_id": 2513417, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff84495f4b5ca0be8e79920814124e9c?s=128&d=identicon&r=PG", "display_name": "Idan", "link": "https://stackoverflow.com/users/2513417/idan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 295, "favorite_count": 0, "closed_date": 1459000477, "accepted_answer_id": 36182695, "answer_count": 2, "score": 1, "last_activity_date": 1458748887, "creation_date": 1458747776, "last_edit_date": 1458748887, "question_id": 36182634, "link": "https://stackoverflow.com/questions/36182634/how-does-c-handle-an-unknown-size-array-allocation-during-compilation-stage", "closed_reason": "Duplicate", "title": "How does c++ handle an unknown size array allocation during compilation stage", "body": "<p>I have learned that c++ use relative distances during compilation stage in order to increase the performance of the code. For instance, it knows that the distance of two local integers is 4.\nMy question is about arrays with unknown size during compilation</p>\n\n<p>For example , the compiler does not have information the amount of memory it should allocate for the local array in the following code:\nHow does it know the relative distance between the local variables local2 and size</p>\n\n<pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nint main() {\n    int size = std::getchar();\n    int arr[size];\n    int local2;\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "ppm"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 2100496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f33f4f398c924a7fb1f53531581c9d?s=128&d=identicon&r=PG", "display_name": "DoingItForTheCorgi", "link": "https://stackoverflow.com/users/2100496/doingitforthecorgi"}, "edited": false, "score": 0, "creation_date": 1458759849, "post_id": 36184106, "comment_id": 60008469, "body": "Thanks I realize it now."}, {"owner": {"reputation": 23, "user_id": 2100496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f33f4f398c924a7fb1f53531581c9d?s=128&d=identicon&r=PG", "display_name": "DoingItForTheCorgi", "link": "https://stackoverflow.com/users/2100496/doingitforthecorgi"}, "edited": false, "score": 0, "creation_date": 1458763171, "post_id": 36184106, "comment_id": 60010402, "body": "How is it that printing elements in the array is giving empty spaces?  printf(&quot; %d %c %c %c \\n&quot;, i/3 ,red,green,blue ); is not working.  and neither is cout &lt;&lt; &quot; &quot; red &lt;&lt; &quot; &quot; &lt;&lt; green &lt;&lt; &quot; &quot; &lt;&lt; blue;"}, {"owner": {"reputation": 9311, "user_id": 4944425, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05592a58619d128e2eee1c3c17801e76?s=128&d=identicon&r=PG&f=1", "display_name": "Bob__", "link": "https://stackoverflow.com/users/4944425/bob"}, "reply_to_user": {"reputation": 23, "user_id": 2100496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f33f4f398c924a7fb1f53531581c9d?s=128&d=identicon&r=PG", "display_name": "DoingItForTheCorgi", "link": "https://stackoverflow.com/users/2100496/doingitforthecorgi"}, "edited": false, "score": 0, "creation_date": 1458763294, "post_id": 36184106, "comment_id": 60010471, "body": "@DoingItForTheCorgi try with <code>cout &lt;&lt; static_cast&lt;int&gt;(pixelData[i])</code>"}], "tags": [], "owner": {"reputation": 907, "user_id": 804714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35036e241c1ef5dfae7b9316d626c66?s=128&d=identicon&r=PG", "display_name": "stjepano", "link": "https://stackoverflow.com/users/804714/stjepano"}, "is_accepted": true, "score": 0, "last_activity_date": 1458751769, "creation_date": 1458751769, "answer_id": 36184106, "question_id": 36182624, "link": "https://stackoverflow.com/questions/36182624/issues-reading-ppm-p6-image-to-completion-c/36184106#36184106", "title": "Issues reading ppm p6 image to completion. c++", "body": "<p>I'm not good with C++ but I will try to explain what is wrong here.</p>\n\n<p>If the type of file is <code>p6</code> then then the image data is stored in byte format, one byte per color component (r,g,b). From the comment in your code it seems that you always expect <code>p6</code>. This means that the matrix will storead as one continuous block of data like you assume. Other option is <code>p3</code> which stores color components in ASCII format (example <code>0 0 0</code>).</p>\n\n<p>The problem is that in <code>p6</code> type file the data block is binary and you are treating it as string. Consider this, a pixel with r,g,b = (65, 13, 10) would be encoded in binary like this:</p>\n\n<pre><code>0x41, 0xD, 0xA\n</code></pre>\n\n<p><code>getline</code> will read first byte which evaluates to ASCII character <code>A</code> but will stop reading after it because <code>0xD0xA</code> is <code>\\r\\n</code>, a newline character (on Windows) which is a delimiter for <code>getline</code>.</p>\n\n<p>Instead of:</p>\n\n<pre><code>getline (myfile,line);             // reach the matrix of numbers\n</code></pre>\n\n<p>I would do something like:</p>\n\n<pre><code>int bufsz = 3*width*height;\nchar* pixelData = new char[bufsz];\nmyfile.read(pixelData,bufsz);\n\nfor ( int i = 0; i &lt; bufsz; i+=3 ) {\n  unsigned char red = pixelData[i];\n  unsigned char green = pixelData[i+1];\n  unsigned char blue = pixelData[i+2];\n  // use unsigned char to express range [0,255],\n  // this may make compiler to issue warnings\n  // but it should be safe to do a cast \n}\n\n// don't forget to release pixelData when done with it,\n// maybe use smart pointers\ndelete[] pixelData;\n</code></pre>\n\n<p><strong>NOTE:</strong> The line before the matrix block contains max value for a color component, the PPM states that this can be larger than 255 so you need to be careful in these cases as the <code>char</code> array won't be good enough and you will need <code>short</code> array at least (2 bytes)</p>\n\n<p>Helpful links:</p>\n\n<ol>\n<li><a href=\"https://en.wikipedia.org/wiki/Netpbm_format\" rel=\"nofollow\">Netpbm format</a></li>\n<li><a href=\"http://en.cppreference.com/w/cpp/io/basic_istream/read\" rel=\"nofollow\">basic_istream::read</a></li>\n</ol>\n"}], "owner": {"reputation": 23, "user_id": 2100496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12f33f4f398c924a7fb1f53531581c9d?s=128&d=identicon&r=PG", "display_name": "DoingItForTheCorgi", "link": "https://stackoverflow.com/users/2100496/doingitforthecorgi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1464, "favorite_count": 0, "accepted_answer_id": 36184106, "answer_count": 1, "score": 2, "last_activity_date": 1458751769, "creation_date": 1458747749, "question_id": 36182624, "link": "https://stackoverflow.com/questions/36182624/issues-reading-ppm-p6-image-to-completion-c", "title": "Issues reading ppm p6 image to completion. c++", "body": "<pre><code>int main(){\n  std::fstream myfile; // file object is created\n  myfile.open (\"green.ppm\");\n  std::string line;   \n\n  unsigned red,green,blue;  //to output values on 0 -255 scale.\n  int width, height = 0;\n  if (myfile.is_open())\n   {\n       std::getline (myfile,line);       //type of file, skip, it will always be for this code p6\n       std::getline (myfile,line);       // width and height of the image\n       std::stringstream  lineStream(line); //extract the width and height;\n       lineStream &gt;&gt; width;\n       lineStream &gt;&gt; height;\n      //  std::cout&lt;&lt; width &lt;&lt; \" \" &lt;&lt; height &lt;&lt;\" \\n\";\n       getline (myfile,line);             //skip magic number\n       getline (myfile,line);             // reach the matrix of numbers\n          for (int  i = 0; i&lt;(width*height*3) ; i= i+3){\n         char num = line[i];  uint8_t number = num; red = number;\n          num = line[i+1];   number = num; green = number;\n          num = line[i+2];   number = num; blue = number;\n         std::cout&lt;&lt;\"pixel \" &lt;&lt; i/3 &lt;&lt; \" is \" &lt;&lt; red &lt;&lt; \" \" &lt;&lt; green &lt;&lt; \" \" &lt;&lt; blue &lt;&lt; std::endl;\n       }\n\n\n//char to uint_8t to unsigned is a basic an inefficient way I found that takes the pixel rgb values in my ppm file and allows me to interpret them from a range of  0-255\n\n       }\n\n  // cout&lt;&lt;counter&lt;&lt;endl;\n  myfile.close();\n  return 0;\n}\n</code></pre>\n\n<p>When I run this code over different ppm images it does actually extract the rgb values correctly however the issue is that it doesn't do it entirely. a basic 800 x 800 image has 640000 pixels and this code reads about 40800 and then ends as if it there weren't anymore.</p>\n\n<p>I think this arises from a misunderstanding of the ppm format itself. I thought that beyond the header format which is the file with the type, width and size, and magic number there was only one more line and no more '\\n' characters. Therefore the matrix could be read as a contiguous array of chars.</p>\n\n<p>So why is this program stopping at such odd place?</p>\n"}, {"tags": ["c++", "mongodb"], "comments": [{"owner": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "edited": false, "score": 0, "creation_date": 1458820042, "post_id": 36182495, "comment_id": 60032128, "body": "Please post a minimal compilable example, the link line that your build system generated to link your example, and the complete error output of the compiler and linker."}, {"owner": {"reputation": 143, "user_id": 5449354, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/cb799bef13d9f980789ba104b877f285?s=128&d=identicon&r=PG&f=1", "display_name": "Xauxatz", "link": "https://stackoverflow.com/users/5449354/xauxatz"}, "reply_to_user": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "edited": false, "score": 0, "creation_date": 1459243589, "post_id": 36182495, "comment_id": 60186822, "body": "I edited question above to add what you requested"}, {"owner": {"reputation": 143, "user_id": 5449354, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/cb799bef13d9f980789ba104b877f285?s=128&d=identicon&r=PG&f=1", "display_name": "Xauxatz", "link": "https://stackoverflow.com/users/5449354/xauxatz"}, "reply_to_user": {"reputation": 10953, "user_id": 776473, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dbfcfc0e3c4b2b0baef2383fbc97f687?s=128&d=identicon&r=PG", "display_name": "acm", "link": "https://stackoverflow.com/users/776473/acm"}, "edited": false, "score": 0, "creation_date": 1459246817, "post_id": 36182495, "comment_id": 60189080, "body": "I actually managed to get it to work now. It had to do with incorrectly compiled and installed libraries for bson and mongocxx. When I couldn&#39;t get it to compile, I copied an installation of the libraries over from another server - apparently I shouldn&#39;t have done that. I managed to get the libraries to compile on this new server just now - and as a result the above example now compiles well."}], "owner": {"reputation": 143, "user_id": 5449354, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/cb799bef13d9f980789ba104b877f285?s=128&d=identicon&r=PG&f=1", "display_name": "Xauxatz", "link": "https://stackoverflow.com/users/5449354/xauxatz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 786, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1459243556, "creation_date": 1458747439, "last_edit_date": 1459243556, "question_id": 36182495, "link": "https://stackoverflow.com/questions/36182495/compiler-error-with-new-mongodb-c-driver", "title": "Compiler error with new MongoDB C++ driver", "body": "<p>I get this error while compiling my program:\nError   1   error VGDB1000: undefined reference to </p>\n\n<pre><code>`mongocxx::v_noabi::uri::k_default_uri' C:\\Users\\XXXX\\AppData\\Local\\VisualGDB\\RemoteSourceCache\\192.168.1.108\\0004\\include\\bsoncxx\\v_noabi\\bsoncxx\\string\\view_or_value.hpp project-name\n</code></pre>\n\n<p>It is a linker error. I link with the libraries libbsoncxx and libmongocxx.\nI include these files:</p>\n\n<pre><code>#include &lt;bsoncxx/builder/stream/document.hpp&gt;\n#include &lt;bsoncxx/json.hpp&gt;\n#include &lt;mongocxx/client.hpp&gt;\n#include &lt;mongocxx/options/find.hpp&gt;\n#include &lt;mongocxx/instance.hpp&gt;\n#include &lt;mongocxx/uri.hpp&gt;\n</code></pre>\n\n<p>I have no idea of how to fix this error message. Any help much appreciated!\n<hr>\nThanks, Easter postponed this one a bit. Here is the minimal example: github.com/xauxatz/LinuxTest </p>\n\n<p>The link command is this: </p>\n\n<pre><code>g++ -o Debug/LinuxProject1 -Wl,-gc-sections -L/usr/local/lib -Wl,--start-group Debug/LinuxProject1.o -lbsoncxx -lmongocxx -Wl,--rpath='$ORIGIN' -Wl,--end-group\n</code></pre>\n\n<p>Complete error output:</p>\n\n<pre><code>Debug/LinuxProject1.o: In function `main':\n/usr/local/include/bsoncxx/v_noabi/bsoncxx/string/view_or_value.hpp:70: undefined reference to `mongocxx::v_noabi::uri::k_default_uri'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>So obviously it has to do with \"mongocxx::uri {}\". If I remove this, it compiles fine.</p>\n\n<hr>\n\n<p>Here is the minimal example: github.com/xauxatz/LinuxTest</p>\n\n<p>The link command is this:</p>\n\n<pre><code>g++ -o Debug/LinuxProject1 -Wl,-gc-sections -L/usr/local/lib -Wl,--start-group Debug/LinuxProject1.o -lbsoncxx -lmongocxx -Wl,--rpath='$ORIGIN' -Wl,--end-group\n</code></pre>\n\n<p>Complete error output:</p>\n\n<pre><code>Debug/LinuxProject1.o: In function `main':\n/usr/local/include/bsoncxx/v_noabi/bsoncxx/string/view_or_value.hpp:70: undefined reference to `mongocxx::v_noabi::uri::k_default_uri'\ncollect2: error: ld returned 1 exit status\n</code></pre>\n\n<p>So obviously it has to do with \"mongocxx::uri {}\". If I remove this, it compiles fine.</p>\n"}, {"tags": ["c++", "lua", "tolua++"], "answers": [{"tags": [], "owner": {"reputation": 21282, "user_id": 140367, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/686b6807a5e05236c44c9472e99e146a?s=128&d=identicon&r=PG", "display_name": "Tam&#225;s Szelei", "link": "https://stackoverflow.com/users/140367/tam%c3%a1s-szelei"}, "is_accepted": true, "score": 3, "last_activity_date": 1458747658, "last_edit_date": 1458747658, "creation_date": 1458747350, "answer_id": 36182465, "question_id": 36182311, "link": "https://stackoverflow.com/questions/36182311/how-could-i-let-lua-take-ownership-of-return-value-when-using-tolua/36182465#36182465", "title": "How could I let lua take ownership of return value when using tolua++?", "body": "<p>This has nothing to do with your lua binding. When you return from the function, the result string is destructed and the pointer that points to its internal buffer will point to freed memory. There is no point in time when the library has a chance of taking ownership of this string, because ultimately it just performs a function call and the result is only available after the function has returned (by which time it's unusable). <a href=\"https://www8.cs.umu.se/kurser/TDBD12/VT04/lab/lua/tolua%2B%2B.html#basics\" rel=\"nofollow\">After a cursory google search</a>, I think tolua++ supports <code>std::string</code> return values, so you could do this:</p>\n\n<pre><code>// tolua_begin\nstd::string GetSomeString() {\n    std::string result;\n    // do something\n    return result;\n}\n// tolua_end\n</code></pre>\n\n<p>This will work because the string is copied.</p>\n"}], "owner": {"reputation": 1616, "user_id": 3118445, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/cac17cfaaf48c1bf55300e58e6af3c1f?s=128&d=identicon&r=PG&f=1", "display_name": "zzy", "link": "https://stackoverflow.com/users/3118445/zzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 36182465, "answer_count": 1, "score": 2, "last_activity_date": 1458747658, "creation_date": 1458746952, "question_id": 36182311, "link": "https://stackoverflow.com/questions/36182311/how-could-i-let-lua-take-ownership-of-return-value-when-using-tolua", "title": "How could I let lua take ownership of return value when using tolua++?", "body": "<p>Here is my C++ code:</p>\n\n<pre><code>// tolua_begin\nconst char* GetSomeString() {\n    std::string result;\n    // do something\n    return result.c_str();\n}\n// tolua_end\n</code></pre>\n\n<p>I know when the function return, <code>result</code> will be freed and lua will get nothing if I call it in lua. I need <code>new</code> one to forbidden it be freed. But it will cause memory leak. So I should let lua take ownership of the return value.</p>\n\n<p>I know how to do this using <code>lua_State</code>. But I'm using <strong>comment</strong> to expose my c++ functions to lua, so I'm wondering whether there is a similar way to achieve it?</p>\n"}, {"tags": ["c++", "windows", "mfc", "system32"], "comments": [{"owner": {"reputation": 6920, "user_id": 4394169, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aETL5.jpg?s=128&g=1", "display_name": "Vlad Feinstein", "link": "https://stackoverflow.com/users/4394169/vlad-feinstein"}, "edited": false, "score": 2, "creation_date": 1458746780, "post_id": 36182150, "comment_id": 59999779, "body": "I would convert your dialog into a CFormView; then it should be easy to use it in a splitter."}, {"owner": {"reputation": 3887, "user_id": 937421, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/Lunw3.jpg?s=128&g=1", "display_name": "rrirower", "link": "https://stackoverflow.com/users/937421/rrirower"}, "edited": false, "score": 2, "creation_date": 1458746794, "post_id": 36182150, "comment_id": 59999792, "body": "I think you want to use a <a href=\"https://msdn.microsoft.com/en-us/library/353dcby6.aspx\" rel=\"nofollow noreferrer\">CFormView</a> instead."}, {"owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "edited": false, "score": 0, "creation_date": 1461001881, "post_id": 36182150, "comment_id": 60989580, "body": "See the style of your dialog in the Resource Editor. It should be &quot;Child&quot; and not &quot;Popup&quot;. Or programatically, <code>WS_CHILD</code> instead of <code>WS_POPUP</code>."}], "owner": {"reputation": 67, "user_id": 3299803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96c3a8f28400d6d33ec37b14f4bc3536?s=128&d=identicon&r=PG&f=1", "display_name": "user3299803", "link": "https://stackoverflow.com/users/3299803/user3299803"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458746563, "creation_date": 1458746563, "question_id": 36182150, "link": "https://stackoverflow.com/questions/36182150/adding-dialog-to-splitter-window-mfc", "title": "Adding Dialog To Splitter Window MFC", "body": "<p>I'm trying to add a dialog to a splitter window in windows MFC. I've searched around and there are no great solutions that I can see to it right now. Here is roughly what I'm trying to do:</p>\n\n<pre><code>if (!m_wndSplitter.CreateStatic(this, 1, 3))\n    return FALSE;\n\nif (!m_wndSplitter.CreateView(0, 0, RUNTIME_CLASS(CLeftView), CSize(200, 100), pContext) ||\n    !m_wndSplitter.CreateView(0, 1, RUNTIME_CLASS(CLeftView2), CSize(200, 100), pContext) ||\n    !m_wndSplitter.CreateDlg(---CODE TO CREATE THE DIALOG---))\n{\n    m_wndSplitter.DestroyWindow();\n    return FALSE;\n}\n</code></pre>\n\n<p>Any help is greatly appreciated</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "edited": false, "score": 0, "creation_date": 1458746598, "post_id": 36181975, "comment_id": 59999631, "body": "<code>When compiled with g++ and run, it prints &quot;test&quot;</code> UB doesn&#39;t mean it always crash. Actually it may and will work on many platforms. But it&#39;s UB anyway."}], "answers": [{"comments": [{"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1458746288, "post_id": 36182017, "comment_id": 59999373, "body": "I guess it works in the given environment because <code>test</code> does not access a data member of an instance..."}, {"owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "reply_to_user": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 2, "creation_date": 1458746370, "post_id": 36182017, "comment_id": 59999450, "body": "That may be. But speculation as to why it works in said environment doesn&#39;t really help with production coding, because this example should never be used in actual code."}, {"owner": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1458746407, "post_id": 36182017, "comment_id": 59999486, "body": "No, you are totally right. I was just wondering."}, {"owner": {"reputation": 10774, "user_id": 4419802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0f1bd19b8b8481b6b3e812691c1ccb?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/4419802/matt"}, "reply_to_user": {"reputation": 16785, "user_id": 3355476, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/YdMWy.jpg?s=128&g=1", "display_name": "Codor", "link": "https://stackoverflow.com/users/3355476/codor"}, "edited": false, "score": 0, "creation_date": 1458746494, "post_id": 36182017, "comment_id": 59999566, "body": "@Codor <code>does not access a data member</code> change <code>test()</code> to <code>virtual</code> and it will crash too."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1458746841, "post_id": 36182017, "comment_id": 59999819, "body": "@owacoder, well, as a matter of fact, knowing how particular UB exhibits itself on your target platform is <b>invaluable</b> tool. It just used in the opposite direction - &#39;my program crashed yesterday after upgrade in B::foo(), but didn&#39;t crash before&#39; - analyze the change - see that foo() started accessing members when it didn&#39;t before - conclude it was called with the bad pointer - fix the issue."}], "tags": [], "owner": {"reputation": 4418, "user_id": 5264388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/160f1b756f3f4a0ba9a2a58f4cce911b?s=128&d=identicon&r=PG", "display_name": "owacoder", "link": "https://stackoverflow.com/users/5264388/owacoder"}, "is_accepted": false, "score": 3, "last_activity_date": 1458746427, "last_edit_date": 1458746427, "creation_date": 1458746221, "answer_id": 36182017, "question_id": 36181975, "link": "https://stackoverflow.com/questions/36181975/does-this-have-undefined-behavior/36182017#36182017", "title": "Does this have undefined behavior?", "body": "<p>Any dereference of a NULL pointer is undefined behavior. Thus your example exhibits undefined behavior too.</p>\n"}], "owner": {"reputation": 229, "user_id": 1416580, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9db02b313af643c15fb55b842cd0f289?s=128&d=identicon&r=PG", "display_name": "DrizzleX", "link": "https://stackoverflow.com/users/1416580/drizzlex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "closed_date": 1458746249, "answer_count": 1, "score": 0, "last_activity_date": 1458746427, "creation_date": 1458746107, "question_id": 36181975, "link": "https://stackoverflow.com/questions/36181975/does-this-have-undefined-behavior", "closed_reason": "Duplicate", "title": "Does this have undefined behavior?", "body": "<p>What is the output of the following code? Suppose that necessary headers have been included.</p>\n\n<p>Does this lead to undefined behavior? When compiled with g++ and run, it prints \"test\". </p>\n\n<pre><code>class A {\npublic:\n    void test()\n    {\n        printf(\"test\\n\");\n    }\n};\n\nint main()\n{\n    A *pa = NULL;\n    pa-&gt;test();\n}\n</code></pre>\n"}, {"tags": ["c++", "templates", "operator-overloading", "language-lawyer", "variadic-templates"], "answers": [{"comments": [{"owner": {"reputation": 3747, "user_id": 453925, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4dd67eab56c9687453c13002faf3df36?s=128&d=identicon&r=PG", "display_name": "bluescarni", "link": "https://stackoverflow.com/users/453925/bluescarni"}, "edited": false, "score": 0, "creation_date": 1458747121, "post_id": 36182152, "comment_id": 60000036, "body": "Thanks for the reply, I have added a bit of context to the original question."}, {"owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "reply_to_user": {"reputation": 3747, "user_id": 453925, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4dd67eab56c9687453c13002faf3df36?s=128&d=identicon&r=PG", "display_name": "bluescarni", "link": "https://stackoverflow.com/users/453925/bluescarni"}, "edited": false, "score": 0, "creation_date": 1458748181, "post_id": 36182152, "comment_id": 60000857, "body": "@bluescarni Yeah, that&#39;s all fine."}], "tags": [], "owner": {"reputation": 56893, "user_id": 3647361, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/xvjhM.png?s=128&g=1", "display_name": "Columbo", "link": "https://stackoverflow.com/users/3647361/columbo"}, "is_accepted": true, "score": 6, "last_activity_date": 1458748391, "last_edit_date": 1458748391, "creation_date": 1458746567, "answer_id": 36182152, "question_id": 36181895, "link": "https://stackoverflow.com/questions/36181895/is-it-legal-to-use-variadic-templates-in-operator-overloading/36182152#36182152", "title": "Is it legal to use variadic templates in operator overloading?", "body": "<p>First off, the definition fine, because there exist valid specializations with non-empty packs<sup>1</sup>.  </p>\n\n<p>Now, specific expressions <code>a+b</code> or <code>+a</code> are i.a. transformed into non-member calls of the form <code>operator+(a, b)</code> and <code>operator+(a)</code>, respectively (<a href=\"http://eel.is/c++draft/over.match.oper#2\" rel=\"nofollow\">[over.match.oper]/2</a>). Name lookup then finds the operator function template, whose specialization becomes part of the candidates. Finally, <a href=\"http://eel.is/c++draft/over.match.oper#6\" rel=\"nofollow\">[over.match.oper]/6</a> just delegates to overload resolution as usual:</p>\n\n<blockquote>\n  <p>The set of candidate functions for overload resolution is the union of\n  the member candidates, the non-member candidates, and the built-in\n  candidates. <strong>The argument list contains all of the operands of the\n  operator. The best function from the set of candidate functions is\n  selected according to 13.3.2 and 13.3.3.</strong> </p>\n</blockquote>\n\n<p>Your code will also work as intended, since overload resolution and partial ordering will respect the operator function template like all others.</p>\n\n<hr>\n\n<p><sup>1</sup> declaring the above for unary operators, except perhaps postfix <code>--</code> and <code>++</code>, is ill-formed, no diagnostic required. Cf. <a href=\"http://eel.is/c++draft/temp.res#8\" rel=\"nofollow\">[temp.res]/(8.2)</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 137021, "user_id": 567292, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b55da07dea89fa675c7e2894c77f8024?s=128&d=identicon&r=PG", "display_name": "ecatmur", "link": "https://stackoverflow.com/users/567292/ecatmur"}, "is_accepted": false, "score": 3, "last_activity_date": 1458748041, "last_edit_date": 1458748041, "creation_date": 1458747297, "answer_id": 36182442, "question_id": 36181895, "link": "https://stackoverflow.com/questions/36181895/is-it-legal-to-use-variadic-templates-in-operator-overloading/36182442#36182442", "title": "Is it legal to use variadic templates in operator overloading?", "body": "<p>The standard restricts the number of arguments (and the presence of default arguments) for <em>operator function</em>s, in <a href=\"http://eel.is/c++draft/over.oper\" rel=\"nofollow\"><strong>[over.oper]</strong></a>:</p>\n\n<blockquote>\n  <p>8 - An operator function cannot have default arguments ([dcl.fct.default]), except where explicitly stated below. Operator\n  functions cannot have more or fewer parameters than the number required for the corresponding operator,\n  as described in the rest of this subclause.</p>\n</blockquote>\n\n<p>However, what you have declared is an <em>operator function template</em>, which has no such restrictions. This means that your code is fine; the use of unary or binary <code>+</code> will be transformed into a call to <code>operator+</code> with one or two arguments and an appropriate instantiation of your template will be generated accordingly.</p>\n\n<p>It would be illegal if you were to specialize or explicitly instantiate the operator function template with an illegal number of arguments, since (<strong>[over.oper]</strong>):</p>\n\n<blockquote>\n  <p>1 - [...] A specialization of an operator function template is also an operator\n  function. [...]</p>\n</blockquote>\n\n<hr>\n\n<p>Note that a similar effect obtains if we write a non-variadic operator function template that can be instantiated with incorrect types:</p>\n\n<pre><code>template&lt;class T&gt; int operator+(T, T) { return 0; }  // OK\nstruct bar {}; template int operator+(bar, bar);     // OK\ntemplate int operator+(int, int);                    // Error is here\n</code></pre>\n"}], "owner": {"reputation": 3747, "user_id": 453925, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4dd67eab56c9687453c13002faf3df36?s=128&d=identicon&r=PG", "display_name": "bluescarni", "link": "https://stackoverflow.com/users/453925/bluescarni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1019, "favorite_count": 0, "accepted_answer_id": 36182152, "answer_count": 2, "score": 10, "last_activity_date": 1458748391, "creation_date": 1458745898, "last_edit_date": 1458747091, "question_id": 36181895, "link": "https://stackoverflow.com/questions/36181895/is-it-legal-to-use-variadic-templates-in-operator-overloading", "title": "Is it legal to use variadic templates in operator overloading?", "body": "<p>I would like to be able to write something along these lines:</p>\n\n<pre><code>struct bar {};\n\ntemplate &lt;typename ... Args&gt;\nbar operator+(bar, Args ...)\n{}\n</code></pre>\n\n<p>I just checked with clang/gcc and the overloaded operator is picked up both by binary expressions (<code>a+b</code>) and unary expressions (<code>+a</code>), as I would expect. However operators are more restricted than normal functions, in the sense that - for instance - you cannot overload <code>operator+()</code> with three arguments.</p>\n\n<p>Is the usage above legal and portable?</p>\n\n<p><strong>EDIT</strong> To give a bit of context, I am clearly not expecting to be able to define variadic operators or anything of the sort. The reason I am interested in this is for a ugly hack: I would like to make some operators variadic so that I can \"override\" them with other non-variadic implementations. Since variadic templates are considered to be less specialised than non-variadic templates in the function template overloading rules, I could override a variadic operator with a non-variadic one. Yes it's pretty horrid :)</p>\n"}, {"tags": ["c++", "directx"], "comments": [{"owner": {"reputation": 497, "user_id": 1235106, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BYDja.jpg?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1235106/kevin"}, "edited": false, "score": 0, "creation_date": 1458746658, "post_id": 36181877, "comment_id": 59999680, "body": "Question has been asked before with workable code: <a href=\"http://stackoverflow.com/a/23454462/1235106\">stackoverflow.com/a/23454462/1235106</a>"}], "owner": {"reputation": 11, "user_id": 4398813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe48a6209f5c9a1c39e6054ddfd8da5a?s=128&d=identicon&r=PG&f=1", "display_name": "The_VFX_StyLe", "link": "https://stackoverflow.com/users/4398813/the-vfx-style"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1458745854, "creation_date": 1458745854, "question_id": 36181877, "link": "https://stackoverflow.com/questions/36181877/c-directx-11-transparency", "title": "C++ DirectX 11 Transparency", "body": "<p>How to make transparent background in DirectX 11 C++?</p>\n\n<pre><code>float color[4] = { 0.0f, 0.0f, 0.0f, 0.0f };\n</code></pre>\n\n<p><code>deviceContext-&gt;ClearRenderTargetView(backBuffer, color);</code></p>\n\n<p>this doesn't work</p>\n"}, {"tags": ["c++", "com", "contextmenu", "shell-extensions", "propertysheet"], "comments": [{"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1458757861, "post_id": 36181784, "comment_id": 60007338, "body": "I have an app that implements a combo ContextMenu+PropertySheet DLL, and it works fine for both types of handlers. In the Registry, did you set the <code>(Default)</code> value of your <code>MyPropSheet</code> key to be your CLSID? Have you tried creating your key under <code>HKEY_LOCAL_MACHINE\\Software\\Classes\\*\\...</code> and/or <code>HKEY_CURRENT_USER\\Software\\Classes\\*\\...</code> instead of <code>HKEY_CLASSES_ROOT</code> directly?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1458758128, "post_id": 36181784, "comment_id": 60007517, "body": "See the MSDN documentation: <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/hh127448.aspx\" rel=\"nofollow noreferrer\">How to Register and Implement a Property Sheet Handler for a File Type</a>, <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724475.aspx\" rel=\"nofollow noreferrer\">HKEY_CLASSES_ROOT Key</a> and <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms724498.aspx\" rel=\"nofollow noreferrer\">Merged View of HKEY_CLASSES_ROOT</a>"}, {"owner": {"reputation": 562, "user_id": 437997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/78835b4174944c41a1e4156e029da431?s=128&d=identicon&r=PG", "display_name": "RanH", "link": "https://stackoverflow.com/users/437997/ranh"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1458809223, "post_id": 36181784, "comment_id": 60025951, "body": "@RemyLebeau I followed the msdn instructions and went through your registry suggestions, All were OK, except for HKCU which I added the *\\... registries yet it is still not working"}], "owner": {"reputation": 562, "user_id": 437997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/78835b4174944c41a1e4156e029da431?s=128&d=identicon&r=PG", "display_name": "RanH", "link": "https://stackoverflow.com/users/437997/ranh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1458809655, "creation_date": 1458745583, "last_edit_date": 1458809655, "question_id": 36181784, "link": "https://stackoverflow.com/questions/36181784/shellextension-addpages-isnt-called", "title": "ShellExtension AddPages isn&#39;t called", "body": "<p>I am trying to implement a PropertySheetHandler shell extension, without much luck.</p>\n\n<p>For some reason, the ContextMenu handlers are successfully called (<code>Initialize()</code> and <code>QueryContextMenu()</code>) but <code>AddPages()</code> is not called.</p>\n\n<p>I have implemented the <code>IShellPropSheetExt</code> interface (<code>AddPages()</code> and <code>ReplacePages()</code>) and have the following declared:</p>\n\n<pre><code>BEGIN_COM_MAP(CShellExtension)\n    COM_INTERFACE_ENTRY(IShellExtInit)\n    COM_INTERFACE_ENTRY(IContextMenu)\n    COM_INTERFACE_ENTRY(IShellPropSheetExt)\nEND_COM_MAP()\n</code></pre>\n\n<p>Also, in the Registry I added the following entry:</p>\n\n<pre><code>HKEY_CLASSES_ROOT\\*\\shellex\\PropertySheetHandlers\\MyPropSheet\n</code></pre>\n\n<p>And of course also added to the CLSID:</p>\n\n<pre><code>HKEY_CLASSES_ROOT\\CLSID\\{CC669AD3-9F45-4C29-ADF7-F2F58E2DB2E9}\\InprocServer32\n</code></pre>\n\n<p>With the DLL path and ThreadingModel Apartment (also tried Both).</p>\n\n<p>What am I missing?</p>\n\n<p>I also ran Process Monitor, and I can see my DLL is found, yet no call to Initialize or AddPages is made upon file properties.</p>\n"}]