[{"tags": ["c++", "abstract-class", "shared-ptr"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 3, "creation_date": 1440027968, "post_id": 32107389, "comment_id": 52109098, "body": "TL;DR; There&#39;s no such thing like an <i>instance of an abstract class/struct</i>! Use a pointer or reference instead."}], "answers": [{"tags": [], "owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "is_accepted": false, "score": 0, "last_activity_date": 1440029411, "creation_date": 1440029411, "answer_id": 32107604, "question_id": 32107389, "link": "https://stackoverflow.com/questions/32107389/store-abstract-member-keep-interface-simple/32107604#32107604", "title": "store abstract member, keep interface simple", "body": "<p>You can't. When you are creating <code>D</code> it allocates (in heap or in stack) memory for <code>B</code>. And <code>C1</code> class needs size of base class <code>B</code> plus size of extra variables/etc in <code>C1</code> itself even if there are nothing new.</p>\n\n<p>So, use pointers instead.</p>\n"}, {"tags": [], "owner": {"reputation": 453, "user_id": 3981203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fzSg5.jpg?s=128&g=1", "display_name": "cwfighter", "link": "https://stackoverflow.com/users/3981203/cwfighter"}, "is_accepted": false, "score": 0, "last_activity_date": 1440033615, "creation_date": 1440033615, "answer_id": 32108079, "question_id": 32107389, "link": "https://stackoverflow.com/questions/32107389/store-abstract-member-keep-interface-simple/32108079#32108079", "title": "store abstract member, keep interface simple", "body": "<p>The error caused by <code>virtual int yield() = 0;</code>. If you use <code>virtual int yield()</code>, it will works. When you used <code>virtual int yield() = 0;</code>, it said that the function is a <code>pure virtual</code> function, so you must <code>override</code> it. So you should give its <code>inheritance class</code> and use <code>the instance of inheritance class</code> in <code>class C1</code>. In a world, <code>virtual int yield() = 0;</code> only remind you that it is only a interface, you must override it. I hope this can help you.</p>\n"}, {"tags": [], "owner": {"reputation": 1591, "user_id": 1250853, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/9f05d98d6dbf85a4663b7e81a04445b2?s=128&d=identicon&r=PG", "display_name": "Turbo", "link": "https://stackoverflow.com/users/1250853/turbo"}, "is_accepted": false, "score": 0, "last_activity_date": 1440034434, "creation_date": 1440034434, "answer_id": 32108191, "question_id": 32107389, "link": "https://stackoverflow.com/questions/32107389/store-abstract-member-keep-interface-simple/32108191#32108191", "title": "store abstract member, keep interface simple", "body": "<p>Since Base is an <a href=\"https://en.wikibooks.org/wiki/C%2B%2B_Programming/Classes/Abstract_Classes\" rel=\"nofollow\">abstract class</a> (has at least one pure virtual function), it can't be instantiated directly.\nWhen you declare D's class member as \"Base b_\", you are effectively trying to create an instance. You can instead use a pointer there (or some kind of safe/smart pointer).</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass Base {\n  public:\n    Base() {};\n    virtual ~Base() {};\n    virtual int yield() = 0;\n};\n\nclass C1: public Base {\n  public:\n    C1(): Base() {};\n    virtual ~C1() {};\n    virtual int yield() {return 1;};\n};\n\nclass D {\n  public:\n    D(Base * b): b_(b) {};\n    virtual ~D() {};\n  private:\n    Base *b_;  // Use a pointer or safe ptr or something of that sort.\n}\n\nint main() {\n  C1 c;\n  D d(&amp;c);\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32386, "user_id": 4706785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdee2789e9bac57bfdd97abc4e533a4d?s=128&d=identicon&r=PG&f=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/4706785/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1440034441, "creation_date": 1440034441, "answer_id": 32108192, "question_id": 32107389, "link": "https://stackoverflow.com/questions/32107389/store-abstract-member-keep-interface-simple/32108192#32108192", "title": "store abstract member, keep interface simple", "body": "<p>No.    One of the properties of an abstract class is that it cannot be instantiated.   That means an instance of an abstract class cannot be a member of another class.</p>\n\n<p>Even if <code>Base</code> was not abstract, your class <code>D</code>'s constructor would be slicing the object passed.   If passed an instance of <code>C1</code>, the copying (in the initialiser list of <code>D</code>'s constructor) would not magically cause an instance of <code>D</code> to contain an object of type <code>C</code>.   It would instead create a copy only of the <code>Base</code> part of that object.</p>\n\n<p>In short, your design is broken, and will not work even if - syntactically - it would be possible to simplify the code in <code>main()</code>.</p>\n"}], "owner": {"reputation": 36288, "user_id": 353337, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/500a1e2e864ae08f386afde2cd21add0?s=128&d=identicon&r=PG", "display_name": "Nico Schl&#246;mer", "link": "https://stackoverflow.com/users/353337/nico-schl%c3%b6mer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1440057869, "creation_date": 1440027773, "last_edit_date": 1440057869, "question_id": 32107389, "link": "https://stackoverflow.com/questions/32107389/store-abstract-member-keep-interface-simple", "title": "store abstract member, keep interface simple", "body": "<p>I know that it is <em>not</em> possible to have an instance of an abstract class as a base member of another class, i.e.,</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>#include &lt;iostream&gt;\n\nclass Base {\n  public:\n    Base() {};\n    virtual ~Base() {};\n    virtual int yield() = 0;\n};\n\nclass C1: public Base {\n  public:\n    C1(): Base() {};\n    virtual ~C1() {};\n    virtual int yield() {return 1;};\n};\n\nclass D {\n  public:\n    D(Base &amp; b): b_(b) {};\n    virtual ~D() {};\n  private:\n    Base b_;\n}\n\nint main() {\n  C1 c;\n  D d(c);\n}\n</code></pre>\n\n<p>will fail to compile with the error</p>\n\n<pre><code>test.cpp:22:10: error: cannot declare field \u2018D::b_\u2019 to be of abstract type \u2018Base\u2019\n</code></pre>\n\n<p>The obvious workaround is to use (shared) pointers instead. This, however, makes <code>main</code> somewhat more complicated to read,</p>\n\n<pre class=\"lang-cpp prettyprint-override\"><code>int main() {\n  auto c = std::make_shared&lt;C1&gt;();\n  D d(c);\n}\n</code></pre>\n\n<p>which I would really like to avoid.</p>\n\n<p>Is there a way to keep the <code>main</code> file as simple as in the above example and still achieve the desired functionality?</p>\n"}, {"tags": ["c++", "netbeans", "gdb", "solaris"], "answers": [{"comments": [{"owner": {"reputation": 3591, "user_id": 549246, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f4e97f0ea1536e2f3dd5905cd646c9ad?s=128&d=identicon&r=PG", "display_name": "Brian Vandenberg", "link": "https://stackoverflow.com/users/549246/brian-vandenberg"}, "edited": false, "score": 0, "creation_date": 1440083821, "post_id": 32108773, "comment_id": 52136492, "body": "It looks like you&#39;re right.  No symbolic information is loaded initially.  I re-did my test from a clean gdb session; if I don&#39;t use <code>file</code>, or <code>exec-file &#47; symbol-file</code> before using <code>sharedlibrary .</code> it doesn&#39;t load any symbolic information."}], "tags": [], "owner": {"reputation": 162629, "user_id": 50617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YFykQ.png?s=128&g=1", "display_name": "Employed Russian", "link": "https://stackoverflow.com/users/50617/employed-russian"}, "is_accepted": true, "score": 1, "last_activity_date": 1440038887, "creation_date": 1440038887, "answer_id": 32108773, "question_id": 32107331, "link": "https://stackoverflow.com/questions/32107331/gdb-solaris-when-attaching-to-a-process-symbols-not-being-loaded/32108773#32108773", "title": "gdb/solaris: When attaching to a process, symbols not being loaded", "body": "<blockquote>\n  <p>I want to know if there's a more automatic way I can force this behavior.</p>\n</blockquote>\n\n<p>It looks like a bug.</p>\n\n<p>Are you sure that the main executable symbols <em>are</em> loaded? <a href=\"https://sourceware.org/bugzilla/show_bug.cgi?id=17903\" rel=\"nofollow\">This bug</a> says that <code>attach pid</code> without giving the binary doesn't work on Solaris at all.</p>\n\n<p>In any case, it's supposed to work automatically, so your best bet to make it work better is probably to file a bug, and wait for it to be fixed (or send a patch to fix it yourself :-)</p>\n"}], "owner": {"reputation": 3591, "user_id": 549246, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f4e97f0ea1536e2f3dd5905cd646c9ad?s=128&d=identicon&r=PG", "display_name": "Brian Vandenberg", "link": "https://stackoverflow.com/users/549246/brian-vandenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "accepted_answer_id": 32108773, "answer_count": 1, "score": 2, "last_activity_date": 1440093773, "creation_date": 1440027445, "last_edit_date": 1440093773, "question_id": 32107331, "link": "https://stackoverflow.com/questions/32107331/gdb-solaris-when-attaching-to-a-process-symbols-not-being-loaded", "title": "gdb/solaris: When attaching to a process, symbols not being loaded", "body": "<p>I'm using gcc 4.9.2 &amp; gdb 7.2 in Solaris 10 on sparc.  The following was tested after compiling/linking with <code>-g</code>, <code>-ggdb</code>, and <code>-ggdb3</code>.</p>\n\n<p>When I attach to a process:</p>\n\n<pre><code>~ gdb\n/snip/\n(gdb) attach pid_goes_here\n</code></pre>\n\n<p>... it is not loading symbolic information.  I started with netbeans which starts gdb without specifying the executable name until after the attach occurs, but I've eliminated netbeans as the cause.</p>\n\n<p>I can force it to load the symbol table under netbeans if I do one of the following:</p>\n\n<p>Attach to the process, then in the debugger console do one of the following:</p>\n\n<pre><code>(gdb) detach\n(gdb) file /path/to/file\n(gdb) attach the_pid_goes_here\n</code></pre>\n\n<p>or</p>\n\n<pre><code>(gdb) file /path/to/file\n(gdb) sharedlibrary .\n</code></pre>\n\n<p>I want to know if there's a more automatic way I can force this behavior.  So far googling has turned up zilch.</p>\n"}, {"tags": ["c++", "qt5", "qtconcurrent"], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 1400948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dd58cc18861d3d5d2de959ca3f49b17?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/1400948/jerry"}, "is_accepted": false, "score": 1, "last_activity_date": 1440420318, "last_edit_date": 1440420318, "creation_date": 1440420108, "answer_id": 32182609, "question_id": 32107296, "link": "https://stackoverflow.com/questions/32107296/qtconcurrentmap-crashes-if-no-qprogressdialog-is-shown/32182609#32182609", "title": "QtConcurrent::map crashes if no QProgressDialog is shown", "body": "<p>When you comment <code>progressDialog.exec();</code> \nyour <code>on_actionButton_triggered()</code> function finishes with destroying <code>progressDialog</code> so your signals are using pointers to nowhere.\nAlso <code>watcher</code> is being destroyed too before or after all mapping is performed, and afair it does not stop threads so they also working with nowhere.</p>\n"}], "owner": {"reputation": 118, "user_id": 5222625, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5T2Lc_73Ih0/AAAAAAAAAAI/AAAAAAAAAig/bbe4HzIAkaU/photo.jpg?sz=128", "display_name": "Lymphatus", "link": "https://stackoverflow.com/users/5222625/lymphatus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440420318, "creation_date": 1440027143, "question_id": 32107296, "link": "https://stackoverflow.com/questions/32107296/qtconcurrentmap-crashes-if-no-qprogressdialog-is-shown", "title": "QtConcurrent::map crashes if no QProgressDialog is shown", "body": "<p>Consider this <code>SLOT</code>, in my main thread, trigged by a button, which takes a list of <code>QTreeWidgetItem</code> from a <code>QTreeWidget</code>. It uses a <code>QtConcurrent::map()</code> call to execute a long task. The <code>watcher</code> connects to a <code>QProgressDialog</code> to show progress.</p>\n\n<pre><code>void Main::on_actionButton_triggered() {\n    qRegisterMetaType&lt;QVector&lt;int&gt; &gt;(\"QVector&lt;int&gt;\");\n\n    //Setting up a progress dialog\n    QProgressDialog progressDialog;\n\n    //Holds the list\n    QList&lt;QTreeWidgetItem*&gt; list;\n\n    //Setup watcher\n    QFutureWatcher&lt;void&gt; watcher;\n\n    //Setting up connections\n    //Progress dialog\n    connect(&amp;watcher, SIGNAL(progressValueChanged(int)), &amp;progressDialog, SLOT(setValue(int)));\n    connect(&amp;watcher, SIGNAL(progressRangeChanged(int, int)), &amp;progressDialog, SLOT(setRange(int,int)));\n    connect(&amp;watcher, SIGNAL(progressValueChanged(int)), ui-&gt;progressBar, SLOT(setValue(int)));\n    connect(&amp;watcher, SIGNAL(progressRangeChanged(int, int)), ui-&gt;progressBar, SLOT(setRange(int,int)));\n    connect(&amp;watcher, SIGNAL(finished()), &amp;progressDialog, SLOT(reset()));\n    connect(&amp;progressDialog, SIGNAL(canceled()), &amp;watcher, SLOT(cancel()));\n\n    connect(&amp;watcher, SIGNAL(started()), this, SLOT(processStarted()));\n    connect(&amp;watcher, SIGNAL(finished()), this, SLOT(processFinished()));\n\n    //Gets the list filled\n    for (int i = 0; i &lt; ui-&gt;listTreeWidget-&gt;topLevelItemCount(); i++) {\n        list.append(ui-&gt;listTreeWidget-&gt;topLevelItem(i));\n    }\n\n    //And start\n    watcher.setFuture(QtConcurrent::map(list, processRoutine));\n\n    //Show the dialog\n    progressDialog.exec();\n\n}\n\nextern void processRoutine(QTreeWidgetItem* item) {\n    qDebug() &lt;&lt; item-&gt;text(4);\n}\n</code></pre>\n\n<p>I also added, in the UI (which holds all the previous widgets), a <code>QProgressBar</code> with the same SIGNALS/SLOTS. Keeping the code like the previous works as expected: the progress dialog shows up, and the progress bar updates exactly as the dialog.\nInstead, if I comment the</p>\n\n<pre><code>//progressDialog.exec(); \n</code></pre>\n\n<p>or I hide the dialog in some way, the process crashes (not always, sometimes it goes well). Looking at <code>qDebug() &lt;&lt; item-&gt;text(4);</code> it crashes and the output shows randomly mixed text (they are supposed to be filenames). Also, the progressbar does not update itself when the <code>QProgressDialog</code> is not shown, even if the computation does not crash.</p>\n\n<p>Note: I experienced a similar problem before in another function, and I solved it by setting</p>\n\n<pre><code>QThreadPool::globalInstance()-&gt;setMaxThreadCount(1);\n</code></pre>\n\n<p>on Windows only, OSX was ok.</p>\n\n<p>So, what's the trick behind the <code>QProgressDialog</code> that makes all the things right? Is there a way I can use the <code>QProgressBar</code> instead of the <code>QProgressDialog</code>?</p>\n\n<p><strong>NOTE</strong></p>\n\n<p>This is the output when the process completes without troubles:</p>\n\n<pre><code>\"C:/Users/Utente/Pictures/Originals/unsplash_52cee67a5c618_1.jpg\"\n\"C:/Users/Utente/Pictures/Originals/photo-1428278953961-a8bc45e05f72.jpg\"\n\"C:/Users/Utente/Pictures/Originals/photo-1429152937938-07b5f2828cdd.jpg\"\n\"C:/Users/Utente/Pictures/Originals/photo-1429277158984-614d155e0017.jpg\"\n\"C:/Users/Utente/Pictures/Originals/photo-1430598825529-927d770c194f.jpg\"\n\"C:/Users/Utente/Pictures/Originals/photo-1433838552652-f9a46b332c40.jpg\"\n</code></pre>\n"}, {"tags": ["c++", "qt", "user-interface"], "comments": [{"owner": {"reputation": 1095, "user_id": 2731967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1556d4f7b7ffe383a1af8c9ef74fa28b?s=128&d=identicon&r=PG&f=1", "display_name": "Ankur", "link": "https://stackoverflow.com/users/2731967/ankur"}, "edited": false, "score": 0, "creation_date": 1440053873, "post_id": 32107293, "comment_id": 52116284, "body": "Specified menu parent. MyMenuBar *menu = new MyMenuBar(this);"}], "answers": [{"tags": [], "owner": {"reputation": 324, "user_id": 5244513, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/38f3c782fdd7716bd3ff181d31025668?s=128&d=identicon&r=PG", "display_name": "WardS", "link": "https://stackoverflow.com/users/5244513/wards"}, "is_accepted": false, "score": 0, "last_activity_date": 1440069093, "creation_date": 1440069093, "answer_id": 32116681, "question_id": 32107293, "link": "https://stackoverflow.com/questions/32107293/qt-c-mainwindowsetmenuwidget-not-working/32116681#32116681", "title": "Qt C++ MainWindow::setMenuWidget not working", "body": "<p>@Ankur thanks dude.<br>\nIt works, but when I'm setting the parent, I dont need to use  </p>\n\n<pre><code>this-&gt;setMenuWidget(menu)\n</code></pre>\n\n<p>So, the final code looks like:</p>\n\n<pre><code>MyMenuBar *menu = new MyMenuBar(this);\n\nconnect(menu,SIGNAL(Close_Window()),this,SLOT(close()));\nconnect(menu,SIGNAL(Minimized_Window()),this,SLOT(hide()));\n\nmenu-&gt;setWindowFlags(Qt::FramelessWindowHint);\nmenu-&gt;show(); \n</code></pre>\n"}], "owner": {"reputation": 324, "user_id": 5244513, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/38f3c782fdd7716bd3ff181d31025668?s=128&d=identicon&r=PG", "display_name": "WardS", "link": "https://stackoverflow.com/users/5244513/wards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440069093, "creation_date": 1440027129, "question_id": 32107293, "link": "https://stackoverflow.com/questions/32107293/qt-c-mainwindowsetmenuwidget-not-working", "title": "Qt C++ MainWindow::setMenuWidget not working", "body": "<p>I'm trying to add a custom widget with the help of MainWindow::setMenuWidget.<br>\nBut this doesnt work properly.<br>\nHere is the code:<br>\nPiece of MainWindow constructor:</p>\n\n<pre><code>MyMenuBar *menu = new MyMenuBar();\n\nconnect(menu,SIGNAL(Close_Window()),this,SLOT(close()));\nconnect(menu,SIGNAL(Minimized_Window()),this,SLOT(hide()));\n\nmenu-&gt;setWindowFlags(Qt::FramelessWindowHint);\n\nthis-&gt;setMenuWidget(menu);\nmenu-&gt;show();  \n</code></pre>\n\n<p>So, it compiles successfully, starts but my widget is not appears.\nI've checked  </p>\n\n<pre><code>this-&gt;menuWidget();\n</code></pre>\n\n<p>and it's not null.</p>\n\n<p>If I've changing code like this</p>\n\n<pre><code>MyMenuBar *menu = new MyMenuBar();\n\nconnect(menu,SIGNAL(Close_Window()),this,SLOT(close()));\nconnect(menu,SIGNAL(Minimized_Window()),this,SLOT(hide()));\n\nmenu-&gt;setWindowFlags(Qt::FramelessWindowHint);\n\n//this-&gt;setMenuWidget(menu);\nmenu-&gt;show();  \n</code></pre>\n\n<p>Then my widget shows properly but it behaves like a separate window.  </p>\n\n<p>Can someone help me with that problem? Thanks.</p>\n"}, {"tags": ["c++", "c++11", "serialization", "stdstring"], "comments": [{"owner": {"reputation": 483, "user_id": 2411693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5e0f9af51f4ce94286a28c3cbb22832b?s=128&d=identicon&r=PG", "display_name": "user2411693", "link": "https://stackoverflow.com/users/2411693/user2411693"}, "edited": false, "score": 0, "creation_date": 1440027105, "post_id": 32107126, "comment_id": 52108863, "body": "And std::string&#39;s are pointers? From the other questions, it looks like they behave as reference counted pointers with copy constructor implemented by default, in which case, I&#39;d guess memcpy invalidates them. I&#39;ll strike that line of thought from the question."}, {"owner": {"reputation": 19253, "user_id": 657267, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1dcf516021abb964aecd6ae2386fd59d?s=128&d=identicon&r=PG", "display_name": "user657267", "link": "https://stackoverflow.com/users/657267/user657267"}, "edited": false, "score": 0, "creation_date": 1440029676, "post_id": 32107126, "comment_id": 52109533, "body": "<code>memcpy</code>ing anything that isn&#39;t <a href=\"http://en.cppreference.com/w/cpp/concept/TriviallyCopyable\" rel=\"nofollow noreferrer\">trivially copyable</a> is unspecified at best, and will probably result in <a href=\"http://stackoverflow.com/questions/29777492/why-would-the-behavior-of-stdmemcpy-be-undefined-for-objects-that-are-not-triv\">undefined behavior</a> at some point. <code>std::string</code>s are not trivially copyable, so no class that has them as members will be either."}], "answers": [{"tags": [], "owner": {"reputation": 1417, "user_id": 4386321, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-gvM9Pl76WIc/AAAAAAAAAAI/AAAAAAAAAFQ/xHjZvlZM9FU/photo.jpg?sz=128", "display_name": "maxpovver", "link": "https://stackoverflow.com/users/4386321/maxpovver"}, "is_accepted": false, "score": 0, "last_activity_date": 1440026966, "creation_date": 1440026966, "answer_id": 32107268, "question_id": 32107126, "link": "https://stackoverflow.com/questions/32107126/serialize-a-custom-struct-containing-stdstring/32107268#32107268", "title": "Serialize a Custom Struct Containing std::string", "body": "<p>Memcpy never works for pointers as it copies pointers, not their values. So it won't help with any object or array stored in your structure. \nThere is no simple way to do that automatically. But for strings you can write their bytes into memory directly using zero as string ending flag.\nSomething like this:</p>\n\n<pre><code>class A {\n  public:\n    int a;\n    char b;\n    bool c;\n    std::string s1;\n    std::string s2;\n    int length()\n    {\n       sizeof(a) + sizeof(b) + sizeof(c) + s1.length*sizeof(char) + 1 + s2.length*sizeof(char) + 1;\n    }\n    void* toByteArray()\n    {\n        char * res = new char[length()];\n        int pos =0 ;\n        pos+=writebytes(res, pos, tobytes(a));\n        pos+=writebytes(res, pos, tobytes(b));\n        pos+=writebytes(res, pos, tobytes(c));\n        pos+=writebytes(res, pos, tobytes(s1));//string version should append zero char after string\n        pos+=writebytes(res, pos, tobytes(s2));\n    }\n}\n</code></pre>\n\n<p>Also NEVER EVER copy classes using memcpy because it also copies virtual table pointer, not just variables inside class.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 0, "last_activity_date": 1440034017, "creation_date": 1440034017, "answer_id": 32108138, "question_id": 32107126, "link": "https://stackoverflow.com/questions/32107126/serialize-a-custom-struct-containing-stdstring/32108138#32108138", "title": "Serialize a Custom Struct Containing std::string", "body": "<p>No, of course not. You can not shoehorn strings into blobs using memcpy(). What is worst here, that it might actually work on some data due to small string optimizations available in some implementations. And than it will magically break on another set of data.\nIf you want your stuff to be binary-serializable (I personally find binary serialization quite outdated) replace strings in your class with some sort of CharArray implementations, which uses arrays as storage.\nI personally prefer proper serialization.</p>\n"}], "owner": {"reputation": 483, "user_id": 2411693, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/5e0f9af51f4ce94286a28c3cbb22832b?s=128&d=identicon&r=PG", "display_name": "user2411693", "link": "https://stackoverflow.com/users/2411693/user2411693"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 586, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440034017, "creation_date": 1440026070, "question_id": 32107126, "link": "https://stackoverflow.com/questions/32107126/serialize-a-custom-struct-containing-stdstring", "title": "Serialize a Custom Struct Containing std::string", "body": "<p>I'm looking to serialize a class that contains std::string to file and easily load this data in Python:</p>\n\n<pre><code>class A {\n  public:\n    int a;\n    char b;\n    bool c;\n    std::string s1;\n    std::string s2;\n}\n</code></pre>\n\n<p>I have a very busy thread that deals with many instances of A. It takes interesting ones and adds them to a class for a less busy thread to write later.</p>\n\n<pre><code>class Blob {\npublic:\n   char data[1024]\n   size_t length;\n}\n\nvoid createBlob(void *data, int length) {\n  Blob saved_a;\n  saved_a.length = length;\n  memcpy(saved_a.data, a, length);\n}\n</code></pre>\n\n<p>Then, the low priority thread asynchronously writes blobs to file:\n    file.write(reinterpret_cast (&amp;saved_a.length), sizeof(saved_a.length));\n    file.write(saved_a, saved_a.length);</p>\n\n<p>These files are then read by Python and use struct library to load the data/handle endianness.</p>\n\n<p>I don't have a great way to store the std::string (partially because I don't understand what guarantees there are on the life of a std::string). Would the logging thread be able to cast the saved_a.data to a type A and then read the strings? Or does the memcpy only save pointers to strings that may no longer be valid.</p>\n\n<p>Copying the A structure isn't really possible because createBlob can take many different data structures (only requires a void * and a size). I'm willing to sacrifice platform independence and count out/test through the packing to make sure that the Python parser works, but really need to minimize the load put on the function that creates blobs and need to ensure that it can create blobs of many different data types. </p>\n\n<p>If the std::string would remain valid when the low priority logger gets to them, he could recast the data and a do a full copy. Otherwise, is there a lightweight solution to serialize the structure before passing to createBlob function (comparable in performance to doing the memcpy)?</p>\n"}, {"tags": ["c++", "c", "constants", "language-lawyer"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440546219, "post_id": 32106803, "comment_id": 52315378, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. <code>get_in_ptr</code> and <code>get_out_ptr</code> are not defined."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440613077, "post_id": 32106803, "comment_id": 52350088, "body": "I have extended the example."}], "answers": [{"comments": [{"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440025445, "post_id": 32106942, "comment_id": 52108440, "body": "Thanks a lot! Should I interpret this as meaning that the structs &quot;s1&quot; and &quot;s2&quot; are layout compatible (or the equivalent C terminology)? Additionally, is it strict-aliasing-safe to read the value of &quot;in-&gt;ptr&quot; in the function &quot;alg,&quot; and does the answer depend on if &quot;in&quot; and &quot;out&quot; are the same structure?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440025488, "post_id": 32106942, "comment_id": 52108453, "body": "@68ejxfcj5669: Why don&#39;t you just read the standard? Instead of requiring  me to copy bits of it here?"}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440026019, "post_id": 32106942, "comment_id": 52108578, "body": "&quot;You know this is okay anyway, because when you wrote &amp;in_arg your compiler implicitly converted the s1* to const s1*&quot;. I know that non-const pointers are convertible to const pointers, but it&#39;s not immediately obvious that they need have the same representation. For example, some implementation might add a tag bit to const-pointers that triggers a trap when written. Anyway, the real question at hand is about aliasing the structs s1 and s2. I could read the standard, but I&#39;ve never understood how to interpret strict aliasing clauses."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440026158, "post_id": 32106942, "comment_id": 52108609, "body": "@68ejxfcj5669: I think the passages I quoted are fairly clear."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440026678, "post_id": 32106942, "comment_id": 52108758, "body": "Yes. It is now clear to me that the pointers have the same representation, and I can e.g. memcpy them. However, what is <b>not</b> clear to me is what this means for structures that contain differently qualified pointers. The question is about accesing s1 and s2 through pointers to the other type, but since the issue of pointer representation has been sorted, perhaps this is just another strict-aliasing question. Sorry if I have somehow offended you."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440027044, "post_id": 32106942, "comment_id": 52108847, "body": "@68ejxfcj5669 You haven&#39;t &quot;offended&quot; me; I just don&#39;t see what&#39;s left to add. If you have two structures whose only members have identical layout, then clearly the two structures themselves have identical layout. I&#39;ve added a couple more citations (C++14 only this time; you can find the equivalents in the other standards yourself!) if that helps...?"}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1440031444, "post_id": 32106942, "comment_id": 52109876, "body": "I&#39;m not convinced that <code>void*</code> and <code>const void*</code> are layout-compatible, even after <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1719\" rel=\"nofollow noreferrer\">CWG 1719</a> relaxed the rules in this area. &quot;have the same representation and alignment requirements&quot; != layout-compatible; the latter has a specific definition in the standard."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440093184, "post_id": 32106942, "comment_id": 52141745, "body": "@LightnessRacesinOrbit I thought about this further, and realized that the statements quoted indicate that &quot;T&quot; and &quot;const T&quot; are identical, not their pointers. Clause 3.9.2 (compound types) in a C++11 draft I found appears to be the relevant language: &quot;Pointers to cv-qualified and cv-unqualified versions (3.9.3) of layout-compatible types shall have the same value representation and alignment requirements (3.11).&quot;"}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1440093410, "post_id": 32106942, "comment_id": 52141890, "body": "@T.C. That&#39;s the part that I&#39;m still unsure of as well. However, in a C++11 draft I found, there is a footnote 51 in section 3.9.3 (CV-qualifiers) that states &quot;The same representation and alignment requirements are meant to imply interchangeability as arguments to functions, return values from functions, and <b>non-static data members of unions.</b>&quot; It&#39;s not clear to me if this implies layout compatibility though."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440094986, "post_id": 32106942, "comment_id": 52142737, "body": "What else would &quot;same representation&quot; mean?"}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": false, "score": -1, "last_activity_date": 1440027181, "last_edit_date": 1592644375, "creation_date": 1440024920, "answer_id": 32106942, "question_id": 32106803, "link": "https://stackoverflow.com/questions/32106803/pointer-to-qualified-and-non-qualified-type-representation/32106942#32106942", "title": "Pointer to qualified and non-qualified type representation", "body": "<blockquote>\n<p><code>[C99: 6.2.5/25, C11: 6.2.5/26]:</code> <em>[..]</em> The qualified or unqualified versions of a type are distinct types that belong to the same type category and have the same representation and alignment requirements. <em>[..]</em></p>\n<p><code>[C++03, C++11, C++14: 3.9.3/1]:</code> <em>[..]</em> The cv-qualified or cv-unqualified versions of a type are distinct types; however, they shall have the same representation and alignment requirements (3.11).</p>\n</blockquote>\n<p>And for the encapsulating types:</p>\n<blockquote>\n<p><code>[C99: 6.2.7/1]:</code> <em>[..]</em> Moreover, two structure, union, or enumerated types declared in separate translation units are compatible if their tags and members satisfy the following requirements: If one is declared with a tag, the other shall be declared with the same tag. If both are complete types, then the following additional requirements apply: there shall be a one-to-one correspondence between their members such that each pair of corresponding members are declared with compatible types, and such that if one member of a corresponding pair is declared with a name, the other member is declared with the same name. <em>[..]</em></p>\n<p><code>[C++03: 9.2/14]:</code> Two POD-struct (clause 9) types are layout-compatible if they have the same number of nonstatic data members, and corresponding nonstatic data members (in order) have layout-compatible types (3.9).</p>\n<p><code>[C++11: 9.2/16, C++14: 9.2/17]:</code> Two standard-layout struct (Clause 9) types are layout-compatible if they have the same number of non-static data members and corresponding non-static data members (in declaration order) have layout-compatible types (3.9).</p>\n</blockquote>\n<p>So, assuming we're ignoring the type system bypass (<code>const void*</code> \u2192 <code>void*</code> through <code>const_cast</code> either directly or by C-style cast \u2014 note that <code>reinterpret_cast</code> has nothing to do with this and is explicitly prohibited from dropping <em>cv-qualifiers</em>) and only talking about aliasing compatibility\u2026</p>\n<p><strong>\u2026yes, this is &quot;safe&quot;.</strong></p>\n<p>It's why we're able to use <code>const_cast</code>, delicately, when ancient C APIs force us to take them at their word rather than actually using <code>const</code>-safety.</p>\n<p>You know this is okay anyway, because when you wrote <code>&amp;in_arg</code> your compiler implicitly converted the <code>s1*</code> to <code>const s1*</code> for the call, and did not complain.</p>\n"}, {"comments": [{"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440094933, "post_id": 32107221, "comment_id": 52142702, "body": "This doesn&#39;t answer the question. The question is whether the cast <i>itself</i> (which is done by casting a pointer to one struct into a pointer to a different struct) is safe, not whether writing to the value referenced through the pointer it safe."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440544179, "post_id": 32107221, "comment_id": 52314743, "body": "@Random832 I agree. The question is regarding whether it is defined to cast the pointers to structs containing pointers of different qualification and read the values of those pointers (not the pointed object)."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440546172, "post_id": 32107221, "comment_id": 52315367, "body": "@68ejxfcj5669: The question is clearly given in the first paragraph: &quot;Is it safe to reinterpret a pointer to a qualified type as a pointer to a non-qualified type? ...&quot;. Note that C does not have a <code>reinterpret_cast</code>, but only a cast. If you have a problem with a C answer, you should have tagged your question C++ only."}, {"owner": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440546884, "post_id": 32107221, "comment_id": 52315577, "body": "But the question is about casting pointers to two different structs and whether those two structs are compatible for the purpose of such a cast based on the pointer qualifications <i>of their members</i>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 32626, "user_id": 691884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a1f68638c765096502abb3e56274386?s=128&d=identicon&r=PG", "display_name": "Random832", "link": "https://stackoverflow.com/users/691884/random832"}, "edited": false, "score": 0, "creation_date": 1440546988, "post_id": 32107221, "comment_id": 52315604, "body": "@Random832: Read the paragraph! OP should have asked different if she wants a different answer. Problem is also that OP is missing some information and a comprehensive answer depends on the language. C is not C++. Especially with type-compatibility, there are massive differences."}, {"owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "edited": false, "score": 0, "creation_date": 1440612983, "post_id": 32107221, "comment_id": 52350035, "body": "@Olaf Yes, the question in the first paragraph is very clear. Is it valid to interpret a memory object containing a pointer to unqualified as a memory object containing a pointer to qualified, and vice-versa? The question of whether such pointers are convertible or not by some language mechanism is irrelevant."}], "tags": [], "owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "is_accepted": false, "score": 2, "last_activity_date": 1440433987, "last_edit_date": 1440433987, "creation_date": 1440026676, "answer_id": 32107221, "question_id": 32106803, "link": "https://stackoverflow.com/questions/32106803/pointer-to-qualified-and-non-qualified-type-representation/32107221#32107221", "title": "Pointer to qualified and non-qualified type representation", "body": "<p>C11 <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.3.2.3p1\" rel=\"nofollow\">states</a>:</p>\n\n<blockquote>\n  <p>For any qualifier q, a pointer to a non-q-qualified type may be converted to a pointer to the q-qualified version of the type; the values stored in the original and converted pointers shall compare equal.</p>\n</blockquote>\n\n<p>So, it is safe to cast to a qualified version, but not vice-versa. Casting away - especially <code>const</code> or volatile could use different memory accesses, e.g. for Harvard architectures storing <code>const</code> variables in program memory (PIC, AVR). And the standard is very <a href=\"http://port70.net/~nsz/c/c11/n1570.html#6.7.3p6\" rel=\"nofollow\">clear</a> about the consequences:</p>\n\n<blockquote>\n  <p>If an attempt is made to modify an object defined with a const-qualified type through use of an lvalue with non-const-qualified type, the behavior is undefined. If an attempt is made to refer to an object defined with a volatile-qualified type through use of an lvalue with non-volatile-qualified type, the behavior is undefined.</p>\n</blockquote>\n\n<p>Briefly: it is <strong>not</strong> safe to cast away those qualifiers in general. The standard does not mention read-accesses for ex-<code>const</code> objects, however.</p>\n\n<p>For the other qualifiers and further details, please read yourself.</p>\n\n<hr>\n\n<p>For the struct layout: C uses compatibility by type/layout, as opposed to C++. So two types are compatible if they use the same layout/standard type, not the same type-name.</p>\n"}], "owner": {"reputation": 455, "user_id": 5245300, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39803ad677ce87e41eca8640c3eed809?s=128&d=identicon&r=PG&f=1", "display_name": "68ejxfcj5669", "link": "https://stackoverflow.com/users/5245300/68ejxfcj5669"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1440612845, "creation_date": 1440024091, "last_edit_date": 1440612845, "question_id": 32106803, "link": "https://stackoverflow.com/questions/32106803/pointer-to-qualified-and-non-qualified-type-representation", "title": "Pointer to qualified and non-qualified type representation", "body": "<p>Is it safe to reinterpret a pointer to an unqualified type as a pointer to a qualified type? Consider a standard layout type containing a pointer member \"void *ptr\" and another standard layout type defined equivalently, but with \"const void *ptr\". Are these types layout compatible, and does this answer depend on the language revision or between C and C++?</p>\n\n<p>Motivation:</p>\n\n<p>Sometimes when interfacing with C programs, one defines a struct grouping parameters to some type of buffer. For const-correctness, an input buffer should have const pointers to underlying buffers, but output buffers must obviously be mutable.</p>\n\n<pre><code>struct s1 { const void *ptr; }\nstruct s2 { void *ptr; }\n\nconst void *get_in_ptr(void);\nvoid *get_out_ptr(void);\n\nvoid alg(const s1 *in, const s2 *out);\n\nvoid f()\n{\n    s1 in_arg = { get_in_ptr() };\n    s2 out_arg1 = { get_out_ptr() };\n    s2 out_arg2 = { get_out_ptr() };\n\n    /* First algorithm pass. */\n    alg(&amp;in_arg, &amp;out_arg1);\n    /* Second algorithm pass. */\n    alg((const s1 *)&amp;out_arg1, &amp;out_arg2); /* Is this legal? */\n}\n</code></pre>\n\n<p>Please cite the relevant standard publications in any answers.</p>\n"}, {"tags": ["c++", "function", "parameters"], "comments": [{"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 1, "creation_date": 1440024074, "post_id": 32106779, "comment_id": 52108073, "body": "why the extra parentheses?"}, {"owner": {"reputation": 1417, "user_id": 4386321, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh4.googleusercontent.com/-gvM9Pl76WIc/AAAAAAAAAAI/AAAAAAAAAFQ/xHjZvlZM9FU/photo.jpg?sz=128", "display_name": "maxpovver", "link": "https://stackoverflow.com/users/4386321/maxpovver"}, "edited": false, "score": 1, "creation_date": 1440024144, "post_id": 32106779, "comment_id": 52108095, "body": "try change from ((double),(double)) to (double,double)"}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440024150, "post_id": 32106779, "comment_id": 52108098, "body": "@KarolyHorvath I was just trying to fix it because without parentheses it gives the error: &quot;method&#39; declared as function returning a function&quot;"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440024181, "post_id": 32106779, "comment_id": 52108104, "body": "Huh what please? Did you mean to use a <code>std::function</code> instance correctly?"}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440024284, "post_id": 32106779, "comment_id": 52108138, "body": "wow maxpovver thanks you solved my problem, I guess I didn&#39;t try enough solutions"}, {"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "edited": false, "score": 0, "creation_date": 1440024296, "post_id": 32106779, "comment_id": 52108145, "body": "Consider using <a href=\"http://www.cprogramming.com/tutorial/function-pointers.html\" rel=\"nofollow noreferrer\">plain old C function pointers</a> or <code>std::function</code>."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 1, "creation_date": 1440024359, "post_id": 32106779, "comment_id": 52108165, "body": "This is the second dumb question I asked today with a simple solution, wow"}, {"owner": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 4, "creation_date": 1440024422, "post_id": 32106779, "comment_id": 52108181, "body": "programming is quite challenging when you randomly type &quot;solutions&quot; hoping one of them will work."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "reply_to_user": {"reputation": 88499, "user_id": 650405, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5cdee2abea51e91756076032f0053081?s=128&d=identicon&r=PG", "display_name": "Karoly Horvath", "link": "https://stackoverflow.com/users/650405/karoly-horvath"}, "edited": false, "score": 0, "creation_date": 1440024452, "post_id": 32106779, "comment_id": 52108194, "body": "@KarolyHorvath I agree"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1440026178, "post_id": 32106779, "comment_id": 52108617, "body": "@IrrationalPerson Don&#39;t ask dumb questions in 1st place here please. They are actively degrading the quality of this site!"}], "answers": [{"tags": [], "owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "is_accepted": true, "score": 2, "last_activity_date": 1440024351, "creation_date": 1440024351, "answer_id": 32106844, "question_id": 32106779, "link": "https://stackoverflow.com/questions/32106779/errors-with-making-a-function-parameter-a-function-with-multiple-parameters/32106844#32106844", "title": "Errors with making a Function parameter a Function with multiple parameters", "body": "<p>It works for me when I write it like this:</p>\n\n<pre><code>void execute_and_time(const string&amp; method_name, double(method)(double), double num)\n{\n    double test = method(num);\n}\nvoid execute_and_time2(const string&amp; method_name, double(method)(double,double), double num, double p)\n{\n    double test = method(num, p);\n}\n</code></pre>\n\n<p>It seems you need to remove the extra parentheses around the functions' parameter types (i.e. <code>double</code>).</p>\n\n<p>You should probably write your function parameters as actual function pointers, though, like so:</p>\n\n<pre><code>void execute_and_time(const string&amp; method_name, double(*method)(double), double num)\n{\n    double test = method(num);\n}\nvoid execute_and_time2(const string&amp; method_name, double(*method)(double,double), double num, double p)\n{\n    double test = method(num, p);\n}\n</code></pre>\n\n<p>Note <code>*method</code>.</p>\n"}], "owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 32106844, "answer_count": 1, "score": 0, "last_activity_date": 1440024351, "creation_date": 1440023974, "question_id": 32106779, "link": "https://stackoverflow.com/questions/32106779/errors-with-making-a-function-parameter-a-function-with-multiple-parameters", "title": "Errors with making a Function parameter a Function with multiple parameters", "body": "<p>I am trying to make a Function parameter a Function with multiple parameters</p>\n\n<p>This First Function's parameter is a function with only one parameter </p>\n\n<p>First Function:</p>\n\n<pre><code>void execute_and_time(const string&amp; method_name, double(method)(double), double num)\n</code></pre>\n\n<p>This Second Function's parameter is a function with 2 parameters and this is causing errors like: </p>\n\n<pre><code>prog.cpp:50:65: error: expected ',' or '...' before '(' token\n void execute_and_time2(const string&amp; method_name, double(method)((double),(double)), double num, double p) {\n</code></pre>\n\n<p>Second Function:</p>\n\n<pre><code>void execute_and_time2(const string&amp; method_name, double(method)((double),(double)), double num, double p)\n</code></pre>\n"}, {"tags": ["c++", "qt", "qt4", "qabstractitemmodel", "qsortfilterproxymodel"], "comments": [{"owner": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1440058174, "post_id": 32106531, "comment_id": 52118790, "body": "Possible, you are not emitting <code>dataChanged</code> in your sorce model. I propose you to set <code>dynamicSortFilter</code> property to false and call <code>invalidate()</code> directly."}, {"owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "reply_to_user": {"reputation": 8160, "user_id": 1035613, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/b4d6ce44848765d7b02e4309c9efe9bb?s=128&d=identicon&r=PG", "display_name": "Dmitry Sazonov", "link": "https://stackoverflow.com/users/1035613/dmitry-sazonov"}, "edited": false, "score": 0, "creation_date": 1440080019, "post_id": 32106531, "comment_id": 52133643, "body": "@SaZ: I am, otherwise my fix wouldn&#39;t have worked (since I&#39;m connecting the source model&#39;s <code>dataChanged</code> to the slot that invalidates the filter)"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1440096973, "post_id": 32106531, "comment_id": 52143834, "body": "I can&#39;t reproduce this. Please post a self-contained test case - shove it all into a single, sweet and short <code>main.cpp</code> that has a single <code>#include &lt;QtWidgets&gt;</code> at the beginning, and <code>#include &quot;main.moc&quot;</code> at the end if you have any <code>Q_OBJECT</code> macros in the file."}, {"owner": {"reputation": 398, "user_id": 542629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f16999e17734ead93445912704994a0?s=128&d=identicon&r=PG", "display_name": "walkingTarget", "link": "https://stackoverflow.com/users/542629/walkingtarget"}, "edited": false, "score": 1, "creation_date": 1501696917, "post_id": 32106531, "comment_id": 77896688, "body": "According to the Qt sources, the first thing QSortFilterProxyModel does on source data changed is verify the QModelIndex parameters denoting the span of change.  This bit me.  Ensure your dataChange is emit with valid indexes.  If this doesn&#39;t work, try putting a breakpoint on QSortFilterProxyModelPrivate::_q_sourceDataChanged and step through to find the problem."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4773510, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-M6sPQ50V3z8/AAAAAAAAAAI/AAAAAAAAENA/hp7bbYx3gOU/photo.jpg?sz=128", "display_name": "Rados\u0142aw Wicik", "link": "https://stackoverflow.com/users/4773510/rados%c5%82aw-wicik"}, "is_accepted": false, "score": 0, "last_activity_date": 1446922334, "creation_date": 1446922334, "answer_id": 33586520, "question_id": 32106531, "link": "https://stackoverflow.com/questions/32106531/qsortfilterproxymodel-doesnt-dynamically-update-filter/33586520#33586520", "title": "QSortFilterProxyModel doesn&#39;t dynamically update filter?", "body": "<p>I had similar problem it occurred that proxy works fine.\nMy model look something like:</p>\n\n<pre><code>class MyModel:public QAbstractListModel{\n...\n    bool setData(...) Q_DECL_OVERRIDE;\n    MyItem* get(int index);\nprivate:\n    QList&lt;MyItem*&gt; m_model;\n}\n</code></pre>\n\n<p>I thought I was changing MyItem (in QML) through a model (indirectly by calling \"setData(...)\"), but after I've bumped on your post I've check the QML file one more time and it occurred that I was changing not the model but item itself.</p>\n\n<p>And model haven't know about changes so the proxy and the view.</p>\n\n<p>I've updated MyItem to emit signals to the parent model if it has changed, so the model could emit DataChanged(...) and  notify others.</p>\n\n<p>May be you have something similar in your code?</p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 11538571, "user_type": "registered", "profile_image": "https://graph.facebook.com/10218944683349576/picture?type=large", "display_name": "Syfalion", "link": "https://stackoverflow.com/users/11538571/syfalion"}, "is_accepted": false, "score": 0, "last_activity_date": 1614595001, "creation_date": 1614595001, "answer_id": 66420507, "question_id": 32106531, "link": "https://stackoverflow.com/questions/32106531/qsortfilterproxymodel-doesnt-dynamically-update-filter/66420507#66420507", "title": "QSortFilterProxyModel doesn&#39;t dynamically update filter?", "body": "<p>Maybe this part of the documentation will be useful to you:</p>\n<p>&quot;Note that you should not update the source model through the proxy model when dynamicSortFilter is true. For instance, if you set the proxy model on a QComboBox, then using functions that update the model, e.g., addItem(), will not work as expected. An alternative is to set dynamicSortFilter to false and call sort() after adding items to the QComboBox.&quot;</p>\n"}], "owner": {"reputation": 205730, "user_id": 15055, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7f71287b47b7189d11fe6d3fbc7ed2fe?s=128&d=identicon&r=PG", "display_name": "Claudiu", "link": "https://stackoverflow.com/users/15055/claudiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 5429, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1614595001, "creation_date": 1440022517, "question_id": 32106531, "link": "https://stackoverflow.com/questions/32106531/qsortfilterproxymodel-doesnt-dynamically-update-filter", "title": "QSortFilterProxyModel doesn&#39;t dynamically update filter?", "body": "<p>I have a custom subclass of <code>QSortFilterProxyModel</code>. I overrode <code>filterAcceptsRow</code> with the custom filter I wanted. Then I used it as such:</p>\n\n<pre><code>proxy = new MyFilterModel();\nproxy-&gt;setSourceModel(...);\nproxy-&gt;setDynamicSortFilter(true);\nproxy-&gt;setFilterParams(...); // my custom function\ncomboBox-&gt;setModel(proxy);\n</code></pre>\n\n<p>However, when the underlying source model updated such that rows that previously were filtered should no longer be filtered, the combo box was not updated with those rows. Why is that?</p>\n\n<p>Eventually I overrode <code>setSourceModel</code> in <code>MyFilterModel</code> like so:</p>\n\n<pre><code>void MyFilterModel::setSourceModel(QAbstractItemModel *sourceModel)\n{\n    QSortFilterProxyModel::setSourceModel(sourceModel);\n\n    connect(sourceModel, SIGNAL(dataChanged(const QModelIndex&amp;, const QModelIndex&amp;)), this, SLOT(doInvalidateFilter()));\n    connect(sourceModel, SIGNAL(modelReset()), this, SLOT(doInvalidateFilter()));\n\n    invalidateFilter();\n}\n</code></pre>\n\n<p>... where all <code>doInvalidateFilter()</code> does is call <code>invalidateFilter</code>. This worked - now when the model updated, the filter rows themselves also updated.</p>\n\n<p>I figure that <code>setDynamicSortFilter</code> should have already taken care of this, though. Is this a bug in Qt? </p>\n"}, {"tags": ["c++", "linker"], "comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1440022568, "post_id": 32106366, "comment_id": 52107601, "body": "<i>&quot;-I and -L and -l are all correct&quot;</i> Nope, they&#39;re not. Someone forgot to read the documentation for the <code>-l</code> switch. That someone... was you!"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 4535982, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5552f003cae5b7f4430f7c9e0954e229?s=128&d=identicon&r=PG&f=1", "display_name": "William Calhoun", "link": "https://stackoverflow.com/users/4535982/william-calhoun"}, "edited": false, "score": 0, "creation_date": 1440023229, "post_id": 32106404, "comment_id": 52107831, "body": "And that totally solved it. I must have been staring at the documentation for 2 hours and just totally read completely over it. Thank you."}, {"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "reply_to_user": {"reputation": 95, "user_id": 4535982, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5552f003cae5b7f4430f7c9e0954e229?s=128&d=identicon&r=PG&f=1", "display_name": "William Calhoun", "link": "https://stackoverflow.com/users/4535982/william-calhoun"}, "edited": false, "score": 0, "creation_date": 1440023892, "post_id": 32106404, "comment_id": 52108013, "body": "You&#39;re welcome. If my answer helped to solve your problem, please consider marking it as accepted."}], "tags": [], "owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "is_accepted": true, "score": 3, "last_activity_date": 1440021898, "creation_date": 1440021898, "answer_id": 32106404, "question_id": 32106366, "link": "https://stackoverflow.com/questions/32106366/i-and-l-and-l-are-all-correct-but-i-still-get-a-linker-error/32106404#32106404", "title": "-I and -L and -l are all correct, but I still get a linker error", "body": "<p>Use <code>-lshogun</code> without <code>lib</code> prefix.</p>\n"}], "owner": {"reputation": 95, "user_id": 4535982, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5552f003cae5b7f4430f7c9e0954e229?s=128&d=identicon&r=PG&f=1", "display_name": "William Calhoun", "link": "https://stackoverflow.com/users/4535982/william-calhoun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 32106404, "answer_count": 1, "score": -2, "last_activity_date": 1440022516, "creation_date": 1440021708, "last_edit_date": 1440022516, "question_id": 32106366, "link": "https://stackoverflow.com/questions/32106366/i-and-l-and-l-are-all-correct-but-i-still-get-a-linker-error", "title": "-I and -L and -l are all correct, but I still get a linker error", "body": "<pre><code>gcc test.cpp -I/CORRECT_DIRECTORY_FOR_HEADERS -L/CORRECT_DIRECTORY_FOR_LIBRARIES -llibshogun (name is libshogun.dylib)\n</code></pre>\n\n<p>I get </p>\n\n<blockquote>\n  <p>ld: library not found for -llibshogun clang: error: linker command\n  failed with exit code 1 (use -v to see invocation)</p>\n</blockquote>\n\n<p>No idea why. Any help would be much appreciated.</p>\n\n<p>I've tried setting the <code>-rpath</code> like such:<code>-Wl,-rpath,/CORRECT_DIRECTORY_FOR_LIBRARIES</code></p>\n\n<p>That also does not change the error.</p>\n\n<p>The library absolutely exists. I can see it quite clearly in my finder. I am on OSX.</p>\n\n<p>Thank you to anyone that helps!</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 1, "creation_date": 1440021688, "post_id": 32106336, "comment_id": 52107280, "body": "Type mismatch, as you should see from the error message that you did not send us:(("}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1440021726, "post_id": 32106336, "comment_id": 52107291, "body": "<code>if (username == &#39;admin&#39; &amp;&amp; password == &#39;852456&#39;)</code> is obviously wrong! Use <code>&quot;</code> to specify string literals."}, {"owner": {"reputation": 72435, "user_id": 119549, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/3KYsB.jpg?s=128&g=1", "display_name": "Jacob", "link": "https://stackoverflow.com/users/119549/jacob"}, "edited": false, "score": 2, "creation_date": 1440021893, "post_id": 32106336, "comment_id": 52107370, "body": "Definitely send us the exact text of the error. Just some advice to you as a potential new programmer... error messages are there to be read, not skipped over as just &quot;an error.&quot; You&#39;ll learn how to understand what they mean with more practice."}], "answers": [{"tags": [], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "is_accepted": false, "score": 5, "last_activity_date": 1440021623, "creation_date": 1440021623, "answer_id": 32106352, "question_id": 32106336, "link": "https://stackoverflow.com/questions/32106336/multiple-condiotions-in-an-if-statement/32106352#32106352", "title": "Multiple condiotions in an IF Statement", "body": "<p><code>if (username == 'admin' &amp;&amp; password == '852456')</code></p>\n\n<p>should be</p>\n\n<p><code>if (username == \"admin\" &amp;&amp; password == 852456)</code></p>\n\n<p>To use <code>'admin'</code> doesn't make sense, those markings are only for characters such as <code>char alpha = 'a'</code>. <code>\"</code> are used for strings (multiple characters). Numbers don't need either of those, they are just numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "is_accepted": false, "score": 1, "last_activity_date": 1440023552, "last_edit_date": 1440023552, "creation_date": 1440021873, "answer_id": 32106396, "question_id": 32106336, "link": "https://stackoverflow.com/questions/32106336/multiple-condiotions-in-an-if-statement/32106396#32106396", "title": "Multiple condiotions in an IF Statement", "body": "<p>Though the password declared as having type int</p>\n\n<pre><code>int password;\n</code></pre>\n\n<p>you are using multicharacter literals 'admin' and '852456'</p>\n\n<pre><code>if (username == 'admin' &amp;&amp; password == '852456')\n               ^^^^^^^^                ^^^^^^^^\n</code></pre>\n\n<p>which integer values are implementation defined.</p>\n\n<p>According to the C++ Standard (2.14.3 Character literals)</p>\n\n<blockquote>\n  <ol>\n  <li>...An ordinary character literal that contains more than one c-char is a\n  multicharacter literal. A multicharacter literal, or an ordinary\n  character literal containing a single c-char not representable in the\n  execution character set, is conditionally-supported, has type int, and\n  <strong>has an implementation-defined value</strong>.</li>\n  </ol>\n</blockquote>\n\n<p>I think you was going to compare password with an integer literal and username with a string literal</p>\n\n<pre><code>if (username == \"admin\" &amp;&amp; password == 852456 )\n</code></pre>\n\n<p>That is you have to use a string literal and integer literal.</p>\n\n<p>You may use a single quote inside an integer literal provided that your compiler supports C++ 2014. For example</p>\n\n<pre><code>if (username == \"admin\" &amp;&amp; password == 852'456 )\n</code></pre>\n\n<p>String literals are enclosed in double quotes.</p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 4780034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EzSgguGGSgE/AAAAAAAAAAI/AAAAAAAAADM/oEy4qBtiSDg/photo.jpg?sz=128", "display_name": "Ayush", "link": "https://stackoverflow.com/users/4780034/ayush"}, "is_accepted": false, "score": 0, "last_activity_date": 1440022170, "creation_date": 1440022170, "answer_id": 32106458, "question_id": 32106336, "link": "https://stackoverflow.com/questions/32106336/multiple-condiotions-in-an-if-statement/32106458#32106458", "title": "Multiple condiotions in an IF Statement", "body": "<p>instead of using single quotes,you should have used double quotes as username is a string type not char type.Coming to password it's integer type.It won't demand for any kind of quotes either single or double. </p>\n"}], "owner": {"reputation": 57, "user_id": 5245210, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh6.googleusercontent.com/-ENd4FLQPSyU/AAAAAAAAAAI/AAAAAAAAB5A/likL3ctLvAA/photo.jpg?sz=128", "display_name": "Vancer", "link": "https://stackoverflow.com/users/5245210/vancer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1440023552, "creation_date": 1440021550, "last_edit_date": 1440021831, "question_id": 32106336, "link": "https://stackoverflow.com/questions/32106336/multiple-condiotions-in-an-if-statement", "title": "Multiple condiotions in an IF Statement", "body": "<p>I'm getting an error that I don't understand since I'm new to C++. The <code>if</code> statement has something wrong in the condition:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;cmath&gt;\nusing namespace std;\n\nint main()\n{\n    string username;\n    int password;\n\n    cout &lt;&lt; \" Welcome User, Please Login.\" &lt;&lt; endl;\n    //Username\n    cout &lt;&lt; \"Username: \";\n    cin &gt;&gt; username;\n    //Password\n    cout &lt;&lt; \"\\nPassword: \";\n    cin &gt;&gt; password;\n\n    if (username == 'admin' &amp;&amp; password == '852456')\n        cout &lt;&lt; \"Welcome.\" &lt;&lt;endl;\n    else\n        cout &lt;&lt; \"Wrong credentials.\" &lt;&lt;endl;\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "memory-leaks"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1440021491, "post_id": 32106292, "comment_id": 52107208, "body": "Well when you call a function and it returns a pointer <i>and</i> gives you ownership of that pointer it&#39;s up do <i>you</i> to delete it. Since you weren&#39;t deleting it you ended up with a memory leak."}, {"owner": {"reputation": 1511, "user_id": 108256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eacf7bb3bb720b6dcd2ea2e6dd9cc890?s=128&d=identicon&r=PG", "display_name": "Eugene Bujak", "link": "https://stackoverflow.com/users/108256/eugene-bujak"}, "edited": false, "score": 2, "creation_date": 1440021507, "post_id": 32106292, "comment_id": 52107219, "body": "We know nothing of <code>Video</code> or <code>Video_dict</code> or <code>deserialize_video()</code>, but I can take a wild guess that not deleting an allocated object is what caused memory leak."}, {"owner": {"reputation": 2016, "user_id": 5141989, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/3dPUW.jpg?s=128&g=1", "display_name": "Mike -- No longer here", "link": "https://stackoverflow.com/users/5141989/mike-no-longer-here"}, "edited": false, "score": 0, "creation_date": 1440021525, "post_id": 32106292, "comment_id": 52107227, "body": "the difference between the two code snippets is that the second sets an index of an array to data stored at an address value where as the first sets an index of an array to the actual address value itself."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 2, "creation_date": 1440021527, "post_id": 32106292, "comment_id": 52107229, "body": "Maybe investigate what <code>delete</code> does."}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 4645644, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/78d98678405cb117ac3e18bb7d27f9f9?s=128&d=identicon&r=PG&f=1", "display_name": "Man in Black", "link": "https://stackoverflow.com/users/4645644/man-in-black"}, "edited": false, "score": 0, "creation_date": 1440022677, "post_id": 32106346, "comment_id": 52107639, "body": "thank you for your help . I didn&#39;t want to add more of the code because I was afriad I would struggle to much to explain what I did / tried to do , that the question wont be clear. I tried what you suggested and changed to fucntion to return by value  &gt; return Video(name,year,type,price,length,genre); and now the code is :           Video vid = deseriallize_video(line); \t\tVideo_dict[vid.get_name()] = vid;  is it more correct this way?"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "reply_to_user": {"reputation": 89, "user_id": 4645644, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/78d98678405cb117ac3e18bb7d27f9f9?s=128&d=identicon&r=PG&f=1", "display_name": "Man in Black", "link": "https://stackoverflow.com/users/4645644/man-in-black"}, "edited": false, "score": 0, "creation_date": 1440022816, "post_id": 32106346, "comment_id": 52107698, "body": "@maor: What I said before about not being able to state anything categorically without knowing what <code>Video</code> does ... has not magically changed just because you gave a reason for not explaining what <code>Video</code> does."}], "tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 4, "last_activity_date": 1440021599, "creation_date": 1440021599, "answer_id": 32106346, "question_id": 32106292, "link": "https://stackoverflow.com/questions/32106292/fixed-my-memory-leak-and-i-dont-understand-why-it-worked/32106346#32106346", "title": "Fixed my memory leak and I don&#39;t understand why it worked", "body": "<blockquote>\n  <p>deseriallize_video is a fucntion that get a string as an input and return a pointer to a new object created in that function</p>\n</blockquote>\n\n<p>Well, there you go!</p>\n\n<p>That object was dynamically allocated with <code>new</code>, and must later be de-allocated with <code>delete</code>.</p>\n\n<p>It's as simple as that.</p>\n\n<hr>\n\n<p>You made several copies of the object in your example.</p>\n\n<p>Here, the object (after the pointer is dereferenced) is used to copy-initialise a new <code>Video</code> named <code>vid</code>:</p>\n\n<pre><code>Video vid = *deseriallize_video(line);\n</code></pre>\n\n<p>And here, presuming <code>Video_dict</code> is a standard container or equivalent to one, <code>vid</code> is copied into it:</p>\n\n<pre><code>Video_dict[vid.get_name()] = vid;\n</code></pre>\n\n<p><em>(BTW you typo'd that to <code>*vid</code> in your second example.)</em></p>\n\n<hr>\n\n<p>We don't know enough (read: anything) about <code>Video</code> to categorically state improvements, but it's likely that you want to drop the dynamic allocation and pointers entirely. Return by value if you can. Define meaningful move constructors if you must.</p>\n"}], "owner": {"reputation": 89, "user_id": 4645644, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/78d98678405cb117ac3e18bb7d27f9f9?s=128&d=identicon&r=PG&f=1", "display_name": "Man in Black", "link": "https://stackoverflow.com/users/4645644/man-in-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 32106346, "answer_count": 1, "score": -1, "last_activity_date": 1485527609, "creation_date": 1440021322, "last_edit_date": 1485527609, "question_id": 32106292, "link": "https://stackoverflow.com/questions/32106292/fixed-my-memory-leak-and-i-dont-understand-why-it-worked", "title": "Fixed my memory leak and I don&#39;t understand why it worked", "body": "<p>I used the CRT tool to find memory leaks in my code, and when I found I fixed one thing and it took care of the memory leaks, but I can't understand what happened there.</p>\n\n<p>My original code was:</p>\n\n<pre><code>while (getline(inf, line))\n{\n    Video vid = *deserialize_video(line);\n    Video_dict[vid.get_name()] = vid;\n\n}\n</code></pre>\n\n<p>where deserialize_video is a function that get a string as an input and return a pointer to a new object created in that function, vid type.\nWhat I am trying to say is this the function ends  with  :</p>\n\n<blockquote>\n  <p>return new Video(name,year,type,price,length,genre);</p>\n</blockquote>\n\n<p>After a few tries I ended up with this code:</p>\n\n<pre><code>while (getline(inf, line))\n{\n    Video * vid = deseriallize_video(line);\n    Video_dict[vid-&gt;get_name()] = *vid;\n    delete vid;\n\n}\n</code></pre>\n\n<p>And it solved my memory leaks. The problem is I can't understand how many duplicates were created in the 1st, and why was the 1st code wrong if the deserialize... function sends back a pointer.</p>\n"}, {"tags": ["c++", "c++11", "operator-overloading", "std", "functor"], "answers": [{"comments": [{"owner": {"reputation": 1842, "user_id": 1045622, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/o6n5C.jpg?s=128&g=1", "display_name": "nbubis", "link": "https://stackoverflow.com/users/1045622/nbubis"}, "edited": false, "score": 0, "creation_date": 1440022049, "post_id": 32106358, "comment_id": 52107424, "body": "Thanks! Should have thought of that :)"}], "tags": [], "owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1440021664, "creation_date": 1440021664, "answer_id": 32106358, "question_id": 32106232, "link": "https://stackoverflow.com/questions/32106232/overload-operators-for-stdfunction/32106358#32106358", "title": "Overload operators for std::function?", "body": "<p>It would be</p>\n\n<pre><code>func operator* (const func &amp;f, const func &amp;g) \n{\n        return [=](double x) { return f(x) * g(x); }\n}\n</code></pre>\n\n<p>I don't recommend doing it, though. For one, because you can't add things to <code>std</code>, this operator can't be found by ADL, so you have to rely on plain unqualified lookup, which is brittle at best. Also, multiple layers of <code>std::function</code> is quite inefficient.</p>\n"}, {"tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1440063292, "creation_date": 1440063292, "answer_id": 32114659, "question_id": 32106232, "link": "https://stackoverflow.com/questions/32106232/overload-operators-for-stdfunction/32114659#32114659", "title": "Overload operators for std::function?", "body": "<p>There's no need for type erasure in the return type. You'd really want something like this:</p>\n\n<pre><code>class composed {\n   std::function&lt;double(double)&gt; f;\n   std::function&lt;double(double)&gt; g;\npublic:\n   composed(std::function&lt;double(double)&gt; f, std::function&lt;double(double)&gt; g) : f(f), g(g) { }\n   double operator()(double x) { return f(x) * g(x); }\n};\ninline composed operator*(std::function&lt;double(double)&gt; f, std::function&lt;double(double)&gt; g) { return composed(f,g); }\n</code></pre>\n\n<p>This is more efficient than return a <code>std::function&lt;double(double)&gt;</code>. <code>composed</code> can still be convertedto one, if the caller wants to. But when you just pass it to <code>std::transform</code>, calling <code>composed</code> directly is more efficient.</p>\n\n<p>In fact, an industrial-strength implementation of <code>operator*</code> would try to capture the actual types of <code>f</code> and <code>g</code> as well, so <code>composed</code> would become a template.</p>\n"}], "owner": {"reputation": 1842, "user_id": 1045622, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/o6n5C.jpg?s=128&g=1", "display_name": "nbubis", "link": "https://stackoverflow.com/users/1045622/nbubis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 32106358, "answer_count": 2, "score": 0, "last_activity_date": 1440063292, "creation_date": 1440021001, "last_edit_date": 1440021670, "question_id": 32106232, "link": "https://stackoverflow.com/questions/32106232/overload-operators-for-stdfunction", "title": "Overload operators for std::function?", "body": "<p>Suppose you would like to perform mathematical operations on functions. Mathematically we know that <code>f(x)*g(x)</code> is also a function if <code>f</code> and <code>g</code> are.</p>\n\n<p>How would one go about expressing that with <code>std::function</code>? I was thinking of overloading the mathematical operators something so:</p>\n\n<pre><code>typedef std::function&lt;double(double)&gt; func;\n\nfunc operator * (const func &amp;f, func &amp;g) \n{\n        auto temp = [&amp;] () { return f( ?? ) * g ( ?? ); };\n        return temp; \n}\n</code></pre>\n\n<p>But I'm not sure how the arguments of <code>f</code> and <code>g</code> would come into play here. Could I use <code>std::placeholders</code> for this? What would be the correct way to proceed?</p>\n"}, {"tags": ["c++", "templates", "default-parameters"], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 25, "last_activity_date": 1440033700, "last_edit_date": 1440033700, "creation_date": 1440019889, "answer_id": 32105997, "question_id": 32105975, "link": "https://stackoverflow.com/questions/32105975/why-cant-i-have-template-and-default-arguments/32105997#32105997", "title": "Why can&#39;t I have template and default arguments?", "body": "<p><strong>You certainly <a href=\"http://coliru.stacked-crooked.com/a/59f6e9d472b06296\" rel=\"noreferrer\">can</a>; put the default argument on the declaration, not the definition.</strong></p>\n\n<p>Putting the default in the definition's argument list instead of the declaration's is an added extra that is not available for function templates:</p>\n\n<blockquote>\n  <p><code>[C++14: 8.3.6/4]:</code> For non-template functions, default arguments can be added in later declarations of a function in the same scope. <em>[..]</em></p>\n</blockquote>\n\n<p>I don't really know why this restriction is in place.</p>\n\n<p>Similar rule:</p>\n\n<blockquote>\n  <p><code>[C++14: 8.3.6/6]:</code> Except for member functions of class templates, the default arguments in a member function definition that appears outside of the class definition are added to the set of default arguments provided by the member function declaration in the class definition <em>[..]</em></p>\n</blockquote>\n"}], "owner": {"reputation": 6278, "user_id": 1417926, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/ff9a7b0f024192d98d32a008c0c95077?s=128&d=identicon&r=PG", "display_name": "shuji", "link": "https://stackoverflow.com/users/1417926/shuji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10240, "favorite_count": 8, "accepted_answer_id": 32105997, "answer_count": 1, "score": 11, "last_activity_date": 1440033700, "creation_date": 1440019787, "last_edit_date": 1440019944, "question_id": 32105975, "link": "https://stackoverflow.com/questions/32105975/why-cant-i-have-template-and-default-arguments", "title": "Why can&#39;t I have template and default arguments?", "body": "<p>I changed a paremeter in a function to accept any kind of object using a template but I can't use it in conjunction with other default parameters, is there something I am missing?</p>\n\n<pre><code>#include &lt;string&gt;\n#include &lt;iostream&gt;\n\nclass MyClass {\n    public:\n    std::wstring msg = L\"hey\";\n    MyClass(){};\n};\n\nclass MyClass2{\n    public:\n    template&lt;class T&gt; MyClass2(T* t, int i);\n};\ntemplate&lt;class T&gt;\nMyClass2::MyClass2(T* t,int i=0){ std::wcout &lt;&lt; t-&gt;msg &lt;&lt; std::endl; }\n\nint main(int argc, char **argv)\n{\n    MyClass mc;\n    MyClass2 mc2(&amp;mc);\n    return 0;\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>practice.cpp:16:32: error: redeclaration of 'MyClass2::MyClass2(T*, int)' may not have default arguments [-fpermissive]\n</code></pre>\n\n<p>I thought it was reasonable to not use default values in the template but is there a reason for the other parameters?</p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1440073239, "post_id": 32105802, "comment_id": 52128564, "body": "thats because data alignment is storing the first row followed by the secpnd row. .at (50,100) means col=100 and row=50 so you have to access data[50*image.cols + 100]. if matrix is not continuous, see jose antonios answer. ah... he mentioned x/y ordering, too :D"}], "answers": [{"comments": [{"owner": {"reputation": 3045, "user_id": 956880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8wevB.png?s=128&g=1", "display_name": "Anonymous Coward", "link": "https://stackoverflow.com/users/956880/anonymous-coward"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440019996, "post_id": 32105977, "comment_id": 52106598, "body": "Yes, if later on you access it using image.step. Not if you want data without padding and accessing it with image.cols, which I am assuming is what is required here."}], "tags": [], "owner": {"reputation": 3045, "user_id": 956880, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/8wevB.png?s=128&g=1", "display_name": "Anonymous Coward", "link": "https://stackoverflow.com/users/956880/anonymous-coward"}, "is_accepted": true, "score": 3, "last_activity_date": 1440020335, "last_edit_date": 1440020335, "creation_date": 1440019793, "answer_id": 32105977, "question_id": 32105802, "link": "https://stackoverflow.com/questions/32105802/opencv-matrix-element-access/32105977#32105977", "title": "OpenCV: Matrix element access", "body": "<p>That is because OpenCV uses padding.<br>\nEach line may contain extra bytes to ensure better alignment.</p>\n\n<p>Copy your data this way if you want it without padding.:</p>\n\n<pre><code>for ( int i=0; i&lt;image.rows; ++i )\n  memcpy( &amp;data[i*100], image.data + image.step*i, 50);\n</code></pre>\n\n<p>Also, data is arranged by horizontal lines (rows). So you should access it this way :</p>\n\n<pre><code>image.at&lt;uchar&gt;(Y,X).  \nuchar pixel = data[Y*image.cols + X];\n</code></pre>\n\n<p>Or you could copy if with padding included :</p>\n\n<pre><code>memcpy( data, image.data, image.step*image.rows);\n</code></pre>\n\n<p>And then you would have to access it using lines of size image.step (which may be equal or larger than image.cols).</p>\n\n<pre><code>uchar pixel = data[Y*image.step + X];\n</code></pre>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1293, "favorite_count": 0, "accepted_answer_id": 32105977, "answer_count": 1, "score": 2, "last_activity_date": 1440020335, "creation_date": 1440019004, "question_id": 32105802, "link": "https://stackoverflow.com/questions/32105802/opencv-matrix-element-access", "title": "OpenCV: Matrix element access", "body": "<p>I am using OpenCV 3.0 to load an image from file, and then store that data in an array.</p>\n\n<p>If I use:</p>\n\n<pre><code>cv::Mat image = cv::imread(\"myimage.png\");\nuchar pixel = image.at&lt;uchar&gt;(50, 100);\n</code></pre>\n\n<p>It will give me the pixel value at the (x = 100, y = 50) image coordinate.</p>\n\n<p>However, if I now copy the image memory to an array:</p>\n\n<pre><code>uchar data[image.rows * image.cols];\nmemcpy(data, image.data, image.rows * image.cols);\n</code></pre>\n\n<p>And then read the pixel value from this array:</p>\n\n<pre><code>uchar pixel = data[100 * image.cols + 50];\n</code></pre>\n\n<p>Then it does not give me the same value as before.</p>\n\n<p>I'm wondering why this is? Is it because OpenCV does not store its memory as a single array in this way? If so, how could I copy the memory to an array and then access pixel values directly from this array?</p>\n\n<p>Thanks :)</p>\n"}, {"tags": ["c++", "algorithm", "parsing", "boost", "boost-tokenizer"], "answers": [{"comments": [{"owner": {"reputation": 725, "user_id": 1084840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YWPJ5.jpg?s=128&g=1", "display_name": "Argent", "link": "https://stackoverflow.com/users/1084840/argent"}, "edited": false, "score": 0, "creation_date": 1440080405, "post_id": 32106177, "comment_id": 52133920, "body": "Turns out the problem was never with Boost - the error I was getting was coming from a completely different place, it just looked like a Boost parsing error. Your response is, of course, completely correct."}], "tags": [], "owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "is_accepted": true, "score": 1, "last_activity_date": 1440020769, "creation_date": 1440020769, "answer_id": 32106177, "question_id": 32105763, "link": "https://stackoverflow.com/questions/32105763/can-boostsplit-be-used-on-a-list-of-only-one-token/32106177#32106177", "title": "Can boost::split Be Used on a List of Only One Token?", "body": "<p>Boost 1.54 does exactly what you want. Haven't tried newer versions.</p>\n\n<p>Example:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n#include &lt;vector&gt;\n#include &lt;boost/algorithm/string.hpp&gt;\n\nint main()\n{\n  std::string test1 = \"abc,xyz\";\n  std::vector&lt;std::string&gt; result1;\n  boost::algorithm::split(result1, test1, boost::is_any_of(\",\"));\n  for (auto const &amp; s : result1)\n  {\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n  }\n\n  std::string test2 = \"abc\";\n  std::vector&lt;std::string&gt; result2;\n  boost::algorithm::split(result2, test2, boost::is_any_of(\",\"));\n  for (auto const &amp; s : result2)\n  {\n    std::cout &lt;&lt; s &lt;&lt; std::endl;\n  }\n\n  return 0;\n}\n</code></pre>\n\n<p>Produces:</p>\n\n<pre><code>abc\nxyz\nabc\n</code></pre>\n"}], "owner": {"reputation": 725, "user_id": 1084840, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YWPJ5.jpg?s=128&g=1", "display_name": "Argent", "link": "https://stackoverflow.com/users/1084840/argent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 32106177, "answer_count": 1, "score": 0, "last_activity_date": 1440020769, "creation_date": 1440018779, "question_id": 32105763, "link": "https://stackoverflow.com/questions/32105763/can-boostsplit-be-used-on-a-list-of-only-one-token", "title": "Can boost::split Be Used on a List of Only One Token?", "body": "<p>I would like to iterate over a comma-separated list of strings and do things with each string. Is there a way to set boost::split to recognize both \"abc,xyz\" and \"abc\" as valid inputs? In other words, can Split return the entire input string if it the predicate doesn't match anything?</p>\n\n<p>Or should I be using boost:tokenizer instead?</p>\n"}, {"tags": ["c++", "recursion"], "comments": [{"owner": {"reputation": 3382, "user_id": 4759361, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/zu2kz.jpg?s=128&g=1", "display_name": "xrisk", "link": "https://stackoverflow.com/users/4759361/xrisk"}, "edited": false, "score": 2, "creation_date": 1440018793, "post_id": 32105739, "comment_id": 52106023, "body": "&quot;causes the compiler to time-out.\u201d I think you didn\u2019t mean that."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "reply_to_user": {"reputation": 3382, "user_id": 4759361, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/zu2kz.jpg?s=128&g=1", "display_name": "xrisk", "link": "https://stackoverflow.com/users/4759361/xrisk"}, "edited": false, "score": 0, "creation_date": 1440018851, "post_id": 32105739, "comment_id": 52106049, "body": "@RishavKundu I should correct myself the ide gave &quot;Time limit exceeded&quot; warning"}, {"owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 3, "creation_date": 1440018875, "post_id": 32105739, "comment_id": 52106062, "body": "Do you perhaps want a <code>||</code> and not a <code>|</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440018926, "post_id": 32105739, "comment_id": 52106084, "body": "You&#39;re not returning anything from the first two <code>if</code> blocks."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "reply_to_user": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 0, "creation_date": 1440018935, "post_id": 32105739, "comment_id": 52106089, "body": "@MattCremeens I alway forget which is,  binary or logical operator"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440018973, "post_id": 32105739, "comment_id": 52106106, "body": "@IrrationalPerson ... but that&#39;s not because of compile time taking too long, but <b>running</b> your program triggers that actually."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1440019061, "post_id": 32105739, "comment_id": 52106140, "body": "@Barmar WOW you just found the answer Thanks!"}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440019098, "post_id": 32105739, "comment_id": 52106155, "body": "I should have replaced | with &amp;&amp; :( dumb mistake"}], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440019452, "post_id": 32105884, "comment_id": 52106334, "body": "it is necessary for that return statement  p1 + poly3(Temp, i-1, p1) ?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440019814, "post_id": 32105884, "comment_id": 52106500, "body": "I think so -- how else will you combine the result of the recursive call with the current element?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440019876, "post_id": 32105884, "comment_id": 52106537, "body": "It might actually need to multiply, not add. The formula is confusing."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440020135, "post_id": 32105884, "comment_id": 52106680, "body": "*= and += are used to &quot;add&quot; to the p1 and when i is 0 it returns p1"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440020236, "post_id": 32105884, "comment_id": 52106722, "body": "Oh, I see. You&#39;re using <code>p</code> as the accumulator. I&#39;ll update."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440020256, "post_id": 32105884, "comment_id": 52106732, "body": "I don&#39;t need to return anything in those if and else if statement  because the final result is already stored inside p1 which is added to till i = 0 in which it is returned"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440020354, "post_id": 32105884, "comment_id": 52106769, "body": "You need to return <i>something</i>. Otherwise, the result of the recursive call is just thrown away. It needs to propagate back up through all the calls."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440020397, "post_id": 32105884, "comment_id": 52106783, "body": "That&#39;s one of the most common mistakes we see when people post questions about recursive functions."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440020942, "post_id": 32105884, "comment_id": 52106984, "body": "I don&#39;t return anything in those if statement because p1&#39;s value is carried across through the function parameter and is returned when the else if parameter is satisfied."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440020988, "post_id": 32105884, "comment_id": 52106995, "body": "But the <code>if</code> isn&#39;t satisfied until you get to a deeply nested call. It returns the final result, and that needs to be returned back up to the original caller."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440021254, "post_id": 32105884, "comment_id": 52107107, "body": "I took the liberty of testing my solution which doesn&#39;t use return statements in the first two if statements and yours and it turns out both of our solution returns the same value. The return statements don&#39;t really matter in this case because with or without them the code still gives the correct answer"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440021899, "post_id": 32105884, "comment_id": 52107373, "body": "It&#39;s working by accident. If a function that is defined with a return type doesn&#39;t use <code>return &lt;expression&gt;</code>, the behavior is undefined. It just so happens that it&#39;s returning the value from the last function called before it fell off the bottom. But this isn&#39;t defined by the C++ language."}, {"owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440021970, "post_id": 32105884, "comment_id": 52107391, "body": "Ok, Thanks for helping me!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "edited": false, "score": 0, "creation_date": 1440021976, "post_id": 32105884, "comment_id": 52107395, "body": "Take a look at this variation: <a href=\"http://ideone.com/pdo2Uo\" rel=\"nofollow noreferrer\">ideone.com/pdo2Uo</a> It simply prints a blank line after performing the recursive call, and this makes the whole thing fail."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 2, "last_activity_date": 1440020277, "last_edit_date": 1440020277, "creation_date": 1440019341, "answer_id": 32105884, "question_id": 32105739, "link": "https://stackoverflow.com/questions/32105739/recursive-function-error-or-too-difficult-to-compute/32105884#32105884", "title": "Recursive Function Error or Too difficult to compute?", "body": "<p>Several problems:</p>\n\n<ol>\n<li><p>If you want to test whether a number is between two values, you need to <strong>and</strong> the comparisons, not <strong>or</strong> them.</p></li>\n<li><p>The logical operators are <code>||</code> and <code>&amp;&amp;</code>.</p></li>\n<li><p>You're not returning anything when you perform the recursive calls. You need to combine the result of that call with the current value.</p></li>\n</ol>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>double poly3(double Temp, int i, double p)\n{\n    double T = Temp;\n    double p1 = p;\n    if(i == 9)\n    {\n        p1*=c[9];\n        return poly3(Temp,i-1, p1);\n    }\n    else if(i &lt; 9 &amp;&amp; i &gt; 0){\n        p1*=T;\n        p1+=c[i];\n        return poly3(Temp,i-1, p1);\n    }\n    else if(i == 0)\n    {\n        p1*=T;\n        p1+=c[0];\n        return p1;\n    }\n\n}\n</code></pre>\n"}], "owner": {"reputation": 542, "user_id": 4305751, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uBOFP.jpg?s=128&g=1", "display_name": "Irrational Person", "link": "https://stackoverflow.com/users/4305751/irrational-person"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 32105884, "answer_count": 1, "score": -3, "last_activity_date": 1440020277, "creation_date": 1440018691, "question_id": 32105739, "link": "https://stackoverflow.com/questions/32105739/recursive-function-error-or-too-difficult-to-compute", "title": "Recursive Function Error or Too difficult to compute?", "body": "<p>I have created three functions that are suppose to calculate this polynomial:</p>\n\n<p><code>(c[0]+T*(c[1]+T*(c[2]+T*(c[3]+T*(c[4]+T*(c[5]+T*(c[6]+T*(c[7]+T*(c[8]+T*(c[9]))))))))))</code></p>\n\n<p>This First Function calculates this polynomial using hardcored values</p>\n\n<pre><code>double poly(double Temp)\n{\n    double T = Temp;\n    double p = (c[0]+T*(c[1]+T*(c[2]+T*(c[3]+T*(c[4]+T*(c[5]+T*(c[6]+T*(c[7]+T*(c[8]+T*(c[9]))))))))))\n    return p;\n}\n</code></pre>\n\n<p>This Second function calculates this polynomial iteratively</p>\n\n<pre><code>double poly2(double Temp)\n{\n    double T = Temp;\n    double p = 1;\n    for(int i = 9; i &gt;= 0; i--)\n    {\n        if(i &lt; 9)\n        {\n            p*= T;\n            p+=c[i];\n        }\n        else\n        {\n            p*=c[9];\n        }\n    }\n    return p;\n}\n</code></pre>\n\n<p>This Third function calculates this polynomial recursively</p>\n\n<pre><code>double poly3(double Temp, int i, double p)\n{\n    double T = Temp;\n    double p1 = p;\n    if(i == 9)\n    {\n        p1*=c[9];\n        poly3(Temp,i-1, p1);\n    }\n    else if(i &lt; 9 | i &gt; 0){\n        p1*=T;\n        p1+=c[i];\n        poly3(Temp,i-1, p1);\n    }\n    else if(i == 0)\n    {\n        p1*=T;\n        p1+=c[0];\n        return p1;\n    }\n\n}\n</code></pre>\n\n<p>MAIN </p>\n\n<pre><code>int main() {\n    cout &lt;&lt; std::setprecision(15) &lt;&lt; poly(15) &lt;&lt; endl;\n    cout &lt;&lt; std::setprecision(15) &lt;&lt; poly2(15) &lt;&lt; endl;\n    cout &lt;&lt; std::setprecision(15) &lt;&lt; poly3(15, 9, 1) &lt;&lt; endl;\n    return 0;\n}\n</code></pre>\n\n<p>The Problem is that the first two functions return the exact same result but the 3rd function causes the compiler to time-out. I have been thinking through the logic but I just can't figure it out. I don't know if there is an error or it just takes too long to compute but if you see an error can you please help me solve it. Thank you very much!</p>\n\n<p><a href=\"http://ideone.com/FCuCmp\" rel=\"nofollow\">Ideone Compiler Example</a></p>\n"}, {"tags": ["c++", "algorithm", "opencv", "image-processing", "polyhedra"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440019073, "post_id": 32105729, "comment_id": 52106147, "body": "convexHull has the option to order point cw or ccw. You can call convexHull on your four points."}, {"owner": {"reputation": 137, "user_id": 3008180, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a3b51b714fd2e16ac41a4f1e673be298?s=128&d=identicon&r=PG&f=1", "display_name": "Iceflame007", "link": "https://stackoverflow.com/users/3008180/iceflame007"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440020023, "post_id": 32105729, "comment_id": 52106619, "body": "@Miki , thanks for your suggestion but I think th problem with that approach is the starting point is not fixed. If the page is tilted towards right, then the bottom most point i.e, point with least Y coordinate (which is used by Convex Hull as starting point I think) is the Bottom-right corner of the Page. Similarly, when the page is tilted towards left, it takes the Bottom-Left point as the starting point. Hence, the order is not same in both cases."}, {"owner": {"reputation": 1719, "user_id": 2256753, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Mhcg5.jpg?s=128&g=1", "display_name": "Balaji R", "link": "https://stackoverflow.com/users/2256753/balaji-r"}, "edited": false, "score": 1, "creation_date": 1440039077, "post_id": 32105729, "comment_id": 52111646, "body": "Why not sort those points to your desired order?"}, {"owner": {"reputation": 2979, "user_id": 242679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/943180c2c20ad3cbedcf6d4b1ac02278?s=128&d=identicon&r=PG", "display_name": "HenningJ", "link": "https://stackoverflow.com/users/242679/henningj"}, "edited": false, "score": 2, "creation_date": 1440065949, "post_id": 32105729, "comment_id": 52123869, "body": "Yeah, since you only have 4 points, sorting them yourself shouldn&#39;t be too much trouble"}], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 6452496, "user_type": "registered", "profile_image": "https://graph.facebook.com/714412675328198/picture?type=large", "display_name": "r4ghu", "link": "https://stackoverflow.com/users/6452496/r4ghu"}, "is_accepted": false, "score": 0, "last_activity_date": 1474435388, "creation_date": 1474435388, "answer_id": 39608138, "question_id": 32105729, "link": "https://stackoverflow.com/questions/32105729/how-to-control-the-order-of-points-in-opencv-findcontours/39608138#39608138", "title": "How to control the order of points in OpenCV findContours?", "body": "<p>If <code>pointsVector</code> is of type <code>vector&lt;cv::Point&gt;</code> and it has exactly the four coordinates of the rectangle or square that you need, use the following code.</p>\n\n<pre><code>struct sortY {\n    bool operator() (cv::Point pt1, cv::Point pt2) { return (pt1.y &lt; pt2.y);}\n} mySortY;\nstruct sortX {\n    bool operator() (cv::Point pt1, cv::Point pt2) { return (pt1.x &lt; pt2.x);}\n} mySortX;\nstd::sort(pointsVector.begin(),pointsVector.end(),mySortY);\nstd::sort(pointsVector.begin(),pointsVector.begin()+2,mySortX);\nstd::sort(pointsVector.begin()+2,pointsVector.end(),mySortX);\n</code></pre>\n\n<p>The above code will sort the <code>pointsVector</code> in the following order: <code>topLeft, topRight, bottomLeft, bottomRight</code></p>\n"}], "owner": {"reputation": 137, "user_id": 3008180, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/a3b51b714fd2e16ac41a4f1e673be298?s=128&d=identicon&r=PG&f=1", "display_name": "Iceflame007", "link": "https://stackoverflow.com/users/3008180/iceflame007"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2612, "favorite_count": 3, "answer_count": 1, "score": 2, "last_activity_date": 1474435388, "creation_date": 1440018631, "question_id": 32105729, "link": "https://stackoverflow.com/questions/32105729/how-to-control-the-order-of-points-in-opencv-findcontours", "title": "How to control the order of points in OpenCV findContours?", "body": "<p>I am working on an OpenCV code in C++ that basically tries to detect the boundary points of a page in an image. I use the findCountours() function to find the contours and after that, I try to find quads using the approxPolyDP() function and consider only quads with only 4 points. My code is based mostly on the squares.cpp code in the OpenCV samples.</p>\n\n<p>It worked and returned 4 Points. And I was happy...but this happiness was not to last. :(  I soon realised that the order in which the Points are returned appears to be random (different for different images). I want the algorithm to return the 4 Points in only a particular order (say, Top-left, then Top-right, then Bottom-right and then Bottom-left.</p>\n\n<p>Getting the points in the same fixed order is critical for my application and hence, my question is \"Is there any way to fix the order in which these points are detected and returned by the algorithm\" (the code is almost same as the squares.cpp example of OpenCV). Any help will be really appreciated.\nAnd goes without saying, TIA. :D</p>\n"}, {"tags": ["c++", "enums"], "comments": [{"owner": {"reputation": 1118, "user_id": 2450694, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a101093933ec102d4d27f5018774df48?s=128&d=identicon&r=PG&f=1", "display_name": "Creris", "link": "https://stackoverflow.com/users/2450694/creris"}, "edited": false, "score": 3, "creation_date": 1440017467, "post_id": 32105438, "comment_id": 52105396, "body": "make an WriteOp overload?"}, {"owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "edited": false, "score": 1, "creation_date": 1440017772, "post_id": 32105438, "comment_id": 52105536, "body": "You have a <i>strongly typed enum</i>, the point of this is to make it a different type (ie not implicitly casted). You should either cast it or make an overload."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 4, "creation_date": 1440017788, "post_id": 32105438, "comment_id": 52105544, "body": "One specific feature of <code>enum class</code> is that it is not implicitly convertible. If you want that, use an ordinary <code>enum</code>."}, {"owner": {"reputation": 219644, "user_id": 2877241, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad from Moscow", "link": "https://stackoverflow.com/users/2877241/vlad-from-moscow"}, "edited": false, "score": 0, "creation_date": 1440017804, "post_id": 32105438, "comment_id": 52105553, "body": "@Frank You have explicitly to convert a scoped enumerator to a desired type."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4992621"}, "edited": false, "score": 0, "creation_date": 1440018222, "post_id": 32105438, "comment_id": 52105768, "body": "See also <a href=\"http://stackoverflow.com/questions/14589417/can-an-enum-class-be-converted-to-the-underlying-type\">converting-enum-to-underlying-type</a>."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 3, "creation_date": 1440018363, "post_id": 32105438, "comment_id": 52105832, "body": "<i>&quot;I&#39;m trying to pass an enum&quot;</i> No you&#39;re not. <i>&quot;which is basically a byte&quot;</i> No it&#39;s not."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440019225, "post_id": 32105581, "comment_id": 52106215, "body": "Note that many compilers support sized non-class enums.  Oh, and are you certain that an eum can be implicitly cast to a reference to its underlying type?  Or that its underlying type is one of those types?"}], "tags": [], "owner": {"reputation": 26959, "user_id": 1294207, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Inny3.jpg?s=128&g=1", "display_name": "Fantastic Mr Fox", "link": "https://stackoverflow.com/users/1294207/fantastic-mr-fox"}, "is_accepted": false, "score": 2, "last_activity_date": 1440017988, "creation_date": 1440017988, "answer_id": 32105581, "question_id": 32105438, "link": "https://stackoverflow.com/questions/32105438/passing-enum-to-overload-function/32105581#32105581", "title": "Passing enum to overload function", "body": "<p>You have a <em>strongly typed enum</em> the whole point of these are they are not implicitly convertible and can have scope. You can do 1 of 3 things:</p>\n\n<ol>\n<li>Create an overload for your type: <code>void copy_out(WriteOp&amp; v) { getn((char*) &amp;v, 1); }</code></li>\n<li>Explicitly cast your enum <code>copy_out(&amp;(uint8_t)my_enum);</code></li>\n<li>Use a standard enum. </li>\n</ol>\n\n<hr>\n\n<pre><code>enum WriteOp {\n  kAdd = 0,\n  kDelete\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": true, "score": 2, "last_activity_date": 1440019460, "creation_date": 1440019460, "answer_id": 32105914, "question_id": 32105438, "link": "https://stackoverflow.com/questions/32105438/passing-enum-to-overload-function/32105914#32105914", "title": "Passing enum to overload function", "body": "<pre><code>template&lt;class E,\n  std::enable_if_t&lt;std::is_enum&lt;E&gt;{}&gt;* = nullptr\n&gt;\nvoid copy_out(E&amp; e){\n  getn(reinterpret_cast&lt;char*&gt;(&amp;e),sizeof(e));\n}\n</code></pre>\n\n<p>if you are taking an enum, take an enum.</p>\n\n<p>The above takes any enum, and does a <code>getn</code>.</p>\n\n<p>With a bit of refactoring, you could move all calls to <code>getn</code> and its unsafe casts into one function.</p>\n"}], "owner": {"reputation": 4035, "user_id": 759880, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd55bf483eadf8e81377407a923df5b8?s=128&d=identicon&r=PG", "display_name": "Frank", "link": "https://stackoverflow.com/users/759880/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 32105914, "answer_count": 2, "score": 1, "last_activity_date": 1440019460, "creation_date": 1440017412, "question_id": 32105438, "link": "https://stackoverflow.com/questions/32105438/passing-enum-to-overload-function", "title": "Passing enum to overload function", "body": "<p>I'm trying to pass an enum which is basically a byte to a overload resolution, but it doesn't work.</p>\n\n<p>Here is the enum:</p>\n\n<pre><code>enum class WriteOp : uint8_t {\n  kAdd = 0,\n  kDelete\n};\n</code></pre>\n\n<p>Here are the overloads:</p>\n\n<pre><code> void copy_out(uint8_t&amp; v) { getn((char*) &amp;v, 1); }\n void copy_out(uint16_t&amp; v) { getn((char*) &amp;v, 2); }\n void copy_out(uint32_t&amp; v) { getn((char*) &amp;v, 4); }\n void copy_out(uint64_t&amp; v) { getn((char*) &amp;v, 8); }\n</code></pre>\n\n<p>And here is a typical error messages I'm getting: </p>\n\n<pre><code>main.cpp:164:8: note: candidate function not viable: no known conversion from 'WriteOp' to 'uint8_t &amp;' (aka 'unsigned char &amp;') for 1st argument\nvoid copy_out(uint8_t&amp; v) { getn((char*) &amp;v, 1); }\n</code></pre>\n\n<p>Any simple and elegant way to do that?</p>\n"}, {"tags": ["android", "c++", "opencv", "java-native-interface"], "answers": [{"tags": [], "owner": {"reputation": 8175, "user_id": 376742, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/314c5e634c0b24fd63b70bf62a83f4cc?s=128&d=identicon&r=PG", "display_name": "ssk", "link": "https://stackoverflow.com/users/376742/ssk"}, "is_accepted": true, "score": 1, "last_activity_date": 1440019707, "creation_date": 1440019707, "answer_id": 32105963, "question_id": 32105361, "link": "https://stackoverflow.com/questions/32105361/unsatisfiedlinkerror-while-running-opencv-mixed-processing-tutorial/32105963#32105963", "title": "UnsatisfiedLinkError while running OpenCV Mixed Processing Tutorial", "body": "<p>I figured out myself, problem was that I wasn't loading the libopencv_java3.so in my application. It is working fine after I fixed it.</p>\n\n<pre><code>static {\n    if (!OpenCVLoader.initDebug()) {\n        // Handle initialization error\n        Log.i(TAG, \"OpenCVLoader Failed\");\n    } else {\n        Log.i(TAG, \"OpenCVLoader Succeeded\");\n        System.loadLibrary(\"CameraVision\");\n        System.loadLibrary(\"opencv_java3\");\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 8175, "user_id": 376742, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/314c5e634c0b24fd63b70bf62a83f4cc?s=128&d=identicon&r=PG", "display_name": "ssk", "link": "https://stackoverflow.com/users/376742/ssk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 1, "accepted_answer_id": 32105963, "answer_count": 1, "score": 0, "last_activity_date": 1440019707, "creation_date": 1440017169, "question_id": 32105361, "link": "https://stackoverflow.com/questions/32105361/unsatisfiedlinkerror-while-running-opencv-mixed-processing-tutorial", "title": "UnsatisfiedLinkError while running OpenCV Mixed Processing Tutorial", "body": "<p>I compiled Tutorial 2 - Mixed Processing demo from OpenCV samples. I made following changes to it so that it works without the OpenCV Package Manager.</p>\n\n<p>Added a static section to initialize OpenCV:</p>\n\n<pre><code>static {\n    if (!OpenCVLoader.initDebug()) {\n        // Handle initialization error\n        Log.i(TAG, \"OpenCVLoader Failed\");\n    } else {\n        Log.i(TAG, \"OpenCVLoader Succeeded\");\n        System.loadLibrary(\"mixed_process\");\n    }\n}\n</code></pre>\n\n<p>Removed mLoaderCallback.onManagerConnected(LoaderCallbackInterface.SUCCESS);</p>\n\n<pre><code>@Override\npublic void onResume()\n{\n    super.onResume();\n}\n</code></pre>\n\n<p>I get this error when I run the app:</p>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>08-19 13:21:35.455: E/AndroidRuntime(2388): java.lang.UnsatisfiedLinkError: No implementation found for long org.opencv.core.Mat.n_Mat(int, int, int) (tried Java_org_opencv_core_Mat_n_1Mat and Java_org_opencv_core_Mat_n_1Mat__III)\n</code></pre>\n\n<p>How do I fix this error?</p>\n"}, {"tags": ["c++", "pointers", "vector", "2d"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1440017124, "post_id": 32105322, "comment_id": 52105194, "body": "&quot;... a pointer, which is inside a 2d vector&quot; The 2d vector doesn&#39;t contain pointers."}, {"owner": {"reputation": 171938, "user_id": 2684539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c5fff6fb65e95570ad1a90fe1e3522e?s=128&d=identicon&r=PG&f=1", "display_name": "Jarod42", "link": "https://stackoverflow.com/users/2684539/jarod42"}, "edited": false, "score": 4, "creation_date": 1440017250, "post_id": 32105322, "comment_id": 52105276, "body": "Why using <code>std::vector&lt;..&gt;*</code> and not just <code>std::vector</code>?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1440020585, "post_id": 32105322, "comment_id": 52106861, "body": "<code>vector&lt;Soldier&gt;(3)</code> requires a default constructor. Note that if you&#39;re going to use <code>push_back</code>, you shouldn&#39;t pre-size the vector \u2014 you&#39;d end up with six elements in each."}], "answers": [{"comments": [{"owner": {"reputation": 388, "user_id": 5044463, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d517d5e5e0b107f5583c65e2290a2db0?s=128&d=identicon&r=PG&f=1", "display_name": "RIJIK", "link": "https://stackoverflow.com/users/5044463/rijik"}, "edited": false, "score": 0, "creation_date": 1440026233, "post_id": 32106186, "comment_id": 52108634, "body": "Thanks thats exactly what i wanted to know. It seems i got too dizzy with all the code around and pointer stuff since i am pretty new to it, that i couldn&#39;t figure it our on my own. But thanks now its working!"}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 388, "user_id": 5044463, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d517d5e5e0b107f5583c65e2290a2db0?s=128&d=identicon&r=PG&f=1", "display_name": "RIJIK", "link": "https://stackoverflow.com/users/5044463/rijik"}, "edited": false, "score": 0, "creation_date": 1440240095, "post_id": 32106186, "comment_id": 52198521, "body": "@RIJIK Be a fair user and accept the answer then. Do it for your other questions too."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 388, "user_id": 5044463, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d517d5e5e0b107f5583c65e2290a2db0?s=128&d=identicon&r=PG&f=1", "display_name": "RIJIK", "link": "https://stackoverflow.com/users/5044463/rijik"}, "edited": false, "score": 0, "creation_date": 1440509920, "post_id": 32106186, "comment_id": 52295169, "body": "@RIJIK Just click on the gray check next to the answer and it goes green. You should have visited <a href=\"http://stackoverflow.com/tour\">stackoverflow.com/tour</a> as the first thing after registering."}, {"owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "reply_to_user": {"reputation": 388, "user_id": 5044463, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d517d5e5e0b107f5583c65e2290a2db0?s=128&d=identicon&r=PG&f=1", "display_name": "RIJIK", "link": "https://stackoverflow.com/users/5044463/rijik"}, "edited": false, "score": 0, "creation_date": 1440779485, "post_id": 32106186, "comment_id": 52430208, "body": "@RIJIK You need 15 reputation to upvote, the &quot;accept this answer as correct&quot; check is below."}, {"owner": {"reputation": 388, "user_id": 5044463, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d517d5e5e0b107f5583c65e2290a2db0?s=128&d=identicon&r=PG&f=1", "display_name": "RIJIK", "link": "https://stackoverflow.com/users/5044463/rijik"}, "edited": false, "score": 0, "creation_date": 1440786230, "post_id": 32106186, "comment_id": 52433711, "body": "ahh i got it! ^^ i somehow didn#t see it"}], "tags": [], "owner": {"reputation": 18687, "user_id": 3552770, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b0404d5b5bd565aa720c6b3d190716b3?s=128&d=identicon&r=PG", "display_name": "LogicStuff", "link": "https://stackoverflow.com/users/3552770/logicstuff"}, "is_accepted": true, "score": 0, "last_activity_date": 1440023466, "last_edit_date": 1440023466, "creation_date": 1440020804, "answer_id": 32106186, "question_id": 32105322, "link": "https://stackoverflow.com/questions/32105322/access-2d-vector-of-pointers/32106186#32106186", "title": "Access 2D Vector of pointers", "body": "<p>The 2nd version of the <a href=\"http://en.cppreference.com/w/cpp/container/vector/vector\" rel=\"nofollow\">constructor</a> of your inner vector called here: <code>vector&lt;Soldier&gt;(3)</code> requires a default constructor for <code>Soldier</code> to be defined, because the value parameter is defaulted to default-constructed value.</p>\n\n<p>Since you've provided constructor taking <code>char</code>, the default one is not generated. So do either one:</p>\n\n<ul>\n<li>define default constructor i. e. <code>Soldier() : type('x') {}</code> or add\na default value for the parameter: <code>Soldier(char c = 'x') : type(c) {}</code></li>\n<li>construct the inner vector with again, defaulted <code>Soldier</code>s : <code>vector&lt;Soldier&gt;(3, Soldier('x'))</code></li>\n</ul>\n\n<p>The code will compile now. But your <code>armys</code> initialization doesn't make sense to me. As mentioned in comments, the pointer here surely does not make any vector contain <code>Soldier*</code> elements and only causes memory leak since you forgot to delete it. Besides that, do you really need <code>armys</code> to be filled with initial values?</p>\n"}], "owner": {"reputation": 388, "user_id": 5044463, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d517d5e5e0b107f5583c65e2290a2db0?s=128&d=identicon&r=PG&f=1", "display_name": "RIJIK", "link": "https://stackoverflow.com/users/5044463/rijik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 747, "favorite_count": 0, "accepted_answer_id": 32106186, "answer_count": 1, "score": 0, "last_activity_date": 1440023466, "creation_date": 1440017032, "question_id": 32105322, "link": "https://stackoverflow.com/questions/32105322/access-2d-vector-of-pointers", "title": "Access 2D Vector of pointers", "body": "<p>I want to access a variable of an Object, by using a pointer, which is inside a 2d vector.<br>\nHere is the code:</p>\n\n<pre><code>class Soldier{\npublic:\n    Soldier(char c){\n        type = c;\n    }\n    char type;\n};\n\nint main()\n{\n//initialising the 2d vector (should give me an empty 2*3 vector)\n    vector&lt; vector&lt;Soldier&gt; &gt; *armys = new vector&lt; vector&lt;Soldier&gt; &gt;(2, vector&lt;Soldier&gt;(3));\n//fill each of the vector\n    Soldier a('x');\n    (*armys)[0].push_back(a);\n    (*armys)[0].push_back(a);\n    (*armys)[0].push_back(a);\n    Soldier b('x');\n    (*armys).resize(2);\n    (*armys)[1].push_back(b);\n    (*armys)[1].push_back(b);\n    (*armys)[1].push_back(b);\n\n    for (int army = 0; army &lt; (*armys).size(); army++){\n        for (int soldier = 0; soldier &lt; (*armys)[army].size(); soldier++){\n            cout &lt;&lt; (*armys)[army][soldier].type;\n        }cout &lt;&lt; endl;\n    }\n}\n</code></pre>\n\n<p>Sadly this won't compile. </p>\n\n<p>What i want to have is just:<br>\nPointer --> (Army1, Army2, Army3 , ...) each of them --> (Soldier of some type)</p>\n\n<p>Can someone give me a hint or tell me what i am doing wrong?</p>\n"}, {"tags": ["c++", "boost", "boost-fusion"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 2, "creation_date": 1440017509, "post_id": 32105267, "comment_id": 52105411, "body": "This doesn&#39;t answer your question but if you are using boost 1.58 or higher you can simply use <a href=\"http://coliru.stacked-crooked.com/a/4be39a0cd86a182a\" rel=\"nofollow noreferrer\"><code>BOOST_FUSION_ADAPT_STRUCT( test::adaptee, dt )</code></a>."}, {"owner": {"reputation": 584, "user_id": 954532, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/63PFs.jpg?s=128&g=1", "display_name": "nightuser", "link": "https://stackoverflow.com/users/954532/nightuser"}, "edited": false, "score": 3, "creation_date": 1440021454, "post_id": 32105267, "comment_id": 52107197, "body": "I cannot comment, so I&#39;m posting it as an answer. See answers <a href=\"http://stackoverflow.com/questions/13842468/comma-in-c-c-macro\">here</a>. <b>upd</b>: It turns out that short answers become comments even if you don&#39;t have enough reputation."}], "owner": {"reputation": 853, "user_id": 1884803, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/ov2Uq.jpg?s=128&g=1", "display_name": "Cory-G", "link": "https://stackoverflow.com/users/1884803/cory-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "closed_date": 1440059663, "answer_count": 0, "score": 2, "last_activity_date": 1440016810, "creation_date": 1440016810, "question_id": 32105267, "link": "https://stackoverflow.com/questions/32105267/boost-fusion-adapt-struct-with-two-template-parameters", "closed_reason": "Duplicate", "title": "BOOST_FUSION_ADAPT_STRUCT with two template parameters", "body": "<p>Here is a coliru of the error:\n<a href=\"http://coliru.stacked-crooked.com/a/a03c61dc0c33c94b\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/a03c61dc0c33c94b</a></p>\n\n<p>I have a type with two template parameters like so:</p>\n\n<pre><code>template &lt;typename T, typename U&gt; class DoubleTemplate {};\n</code></pre>\n\n<p>In a struct I have a member of the above type like so:</p>\n\n<pre><code>namespace test\n{\n    struct adaptee\n    {\n        DoubleTemplate&lt;int, int&gt; dt;\n    };\n}\n</code></pre>\n\n<p>When I attempt to call the Boost adapt function like so:</p>\n\n<pre><code>BOOST_FUSION_ADAPT_STRUCT( test::adaptee,\n    (DoubleTemplate&lt;int, int&gt;, dt) )\n</code></pre>\n\n<p>it complains that there are 3 parameters being passed in (I am guessing it is seeing these three: <code>DoubleTemplate&lt;int</code>, <code>int&gt;</code>, <code>dt</code>)</p>\n\n<p>It works ok if I <code>typedef</code> the <code>DoubleTemplate</code> type and use the shorter name in the Boost adapt call, but that would require a nasty 10-or-so <code>typedef</code>s in my code.</p>\n\n<p>Is there a simple way to just pass in the double template? I feel like I am missing a simple answer here. Thanks for your help.</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1440017044, "post_id": 32105194, "comment_id": 52105151, "body": "Need more information. How do the 8-bit values relate to the 16-bit values?"}, {"owner": {"reputation": 109956, "user_id": 159145, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/r8ryC.png?s=128&g=1", "display_name": "Dai", "link": "https://stackoverflow.com/users/159145/dai"}, "edited": false, "score": 0, "creation_date": 1440017412, "post_id": 32105194, "comment_id": 52105363, "body": "Without copying data (i.e. you want to re-assign ownership and re-interpret the type of the underlying buffer) this is very hard as <code>std::vector</code> does not expose any way to externally overwrite its internal buffer pointer."}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440018930, "post_id": 32105194, "comment_id": 52106086, "body": "what you want to do is more complex than just converting 16-bit numbers to 8-bit numbers, see my answer for more info"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1440019200, "post_id": 32105194, "comment_id": 52106204, "body": "So you have the same number of values in <i>both</i> vectors right? How do you convert a single value from 16-bit to 8-bit? Do they need to be scaled in some way? Does the maximum 16-bit value need to map onto the maximum 8-bit value (for example)?"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1440019658, "post_id": 32105194, "comment_id": 52106424, "body": "@Galik he does, that&#39;s what I was getting at in my answer. He needs some sort of Brightness Transfer Function to map his data set into values that mean something in an image."}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "reply_to_user": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440019920, "post_id": 32105194, "comment_id": 52106561, "body": "@RyanP I think you are probably right and your answer is very informative but he needs to put this in the question so we don&#39;t have to guess."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440020776, "post_id": 32105194, "comment_id": 52106915, "body": "This is really confused."}], "answers": [{"tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 3, "last_activity_date": 1440017432, "creation_date": 1440017432, "answer_id": 32105448, "question_id": 32105194, "link": "https://stackoverflow.com/questions/32105194/how-do-you-convert-a-16-bit-unsigned-integer-to-a-larger-8-bit-unsigned-integer/32105448#32105448", "title": "How do you convert a 16 bit unsigned integer to a larger 8 bit unsigned integer?", "body": "<blockquote>\n  <p>How might I convert it to the format of:</p>\n  \n  <p>std::vector myVec2; such that myVec2.size() will be twice as\n  big as myVec.size()?</p>\n</blockquote>\n\n<pre><code>myVec2.reserve(myVec.size() * 2);\nfor (auto it = begin(myVec); it!=end(myVec); ++it)\n{\n    uint8_t val = static_cast&lt;uint8_t&gt;(*it); // isolate the low 8 bits\n    myVec2.push_back(val);\n    val = static_cast&lt;uint8_t&gt;((*it) &gt;&gt; 8); // isolate the upper 8 bits\n    myVec2.push_back(val);\n}\n</code></pre>\n\n<p>Or you can change the order of <code>push_back()</code>'s if it matters which byte come first (the upper or the lower).</p>\n"}, {"comments": [{"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 1, "creation_date": 1440017556, "post_id": 32105453, "comment_id": 52105433, "body": "Would the result of this depend on endian-ness of the machine?"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "reply_to_user": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1440017704, "post_id": 32105453, "comment_id": 52105501, "body": "@triple_r yes it would, but it&#39;s not clear how the op intends to interpret the data... if he undid the operation on a machine with the same endian-ness, it wouldn&#39;t matter."}, {"owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "reply_to_user": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1440017886, "post_id": 32105453, "comment_id": 52105593, "body": "@triple_r It would but, as RyanP says, it isn&#39;t really specified. <code>std::copy</code> shouldn&#39;t have this problem, I think."}, {"owner": {"reputation": 962, "user_id": 2048539, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f672b3ac44170a0493455b4b1c941cde?s=128&d=identicon&r=PG", "display_name": "triple_r", "link": "https://stackoverflow.com/users/2048539/triple-r"}, "edited": false, "score": 0, "creation_date": 1440017964, "post_id": 32105453, "comment_id": 52105636, "body": "Yep, you are correct. I was just curious about what will happen with <code>memcpy</code>."}], "tags": [], "owner": {"reputation": 7645, "user_id": 2692339, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4f8e4e5cba3b6606d8e395364c1742b8?s=128&d=identicon&r=PG&f=1", "display_name": "edmz", "link": "https://stackoverflow.com/users/2692339/edmz"}, "is_accepted": false, "score": -1, "last_activity_date": 1440017615, "last_edit_date": 1440017615, "creation_date": 1440017455, "answer_id": 32105453, "question_id": 32105194, "link": "https://stackoverflow.com/questions/32105194/how-do-you-convert-a-16-bit-unsigned-integer-to-a-larger-8-bit-unsigned-integer/32105453#32105453", "title": "How do you convert a 16 bit unsigned integer to a larger 8 bit unsigned integer?", "body": "<p>Straightforward way:</p>\n\n<pre><code>std::vector&lt;std::uint8_t&gt; myVec2(myVec.size() * 2);\nstd::memcpy(myVec2.data(), myVec.data(), myVec.size());\n</code></pre>\n\n<p>or with the use of the standard library</p>\n\n<pre><code>std::copy( begin(myVec), end(myVec), begin(myVec2));\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "is_accepted": true, "score": 3, "last_activity_date": 1440019614, "last_edit_date": 1440019614, "creation_date": 1440018284, "answer_id": 32105648, "question_id": 32105194, "link": "https://stackoverflow.com/questions/32105194/how-do-you-convert-a-16-bit-unsigned-integer-to-a-larger-8-bit-unsigned-integer/32105648#32105648", "title": "How do you convert a 16 bit unsigned integer to a larger 8 bit unsigned integer?", "body": "<p>As per your update, assuming the 8-bit unsigned int is going to be displayed as a gray scale image, what you need is akin to a Brightness Transfer Function. Basically, your output function is looking to map the data to the values 0-255, but you don't necessarily want those to correspond directly to millimeters. What if all of your data was from 0-3mm? Then your image would look almost completely black. What if it was all 300-400mm? Then it'd be completely white because it was clipped to 255.</p>\n\n<p>A rudimentary way to do it would be to find the minimum and maximum values, and do this:</p>\n\n<pre><code>double scale = 255.0 / (double)(maxVal - minVal);\nfor( int i = 0; i &lt; std::min(myVec.size(), myVec2.size()); ++i )\n{\n    myVec2.at(i) = (unsigned int)((double)(myVec.at(i)-minVal) * scale);\n}\n</code></pre>\n\n<p>depending on the distribution of your data, you might need to do something a little more complex to get the most out of your dynamic range.</p>\n\n<p>Edit: This assumes your glut function is creating an image, if it is using the 8-bit value as an input to a graph then you can disregard.</p>\n\n<p>Edit2: An update after your other update. If you want to fill a 640x480x4 vector, you are clearly doing an image. You need to do what I outlined above, but also the 4 dimensions that it is looking for are Red, Green, Blue, and Alpha. The Alpha channel needs to be 255 at all times (this controls how transparent it is, you don't want it to be transparent), as for the other 3... that value you got from the function above (the scaled value) if you set all 3 channels (channels being red, green, and blue) to the same value it will appear as grayscale. For example, if my data ranged from 0-25mm, for a pixel who's value is 10mm, I would set the data to 255/(25-0)* 10 = 102 and therefore the pixel would be (102, 102, 102, 255)</p>\n\n<p>Edit 3: Adding wikipedia link about Brightness Transfer Functions - <a href=\"https://en.wikipedia.org/wiki/Color_mapping\" rel=\"nofollow\">https://en.wikipedia.org/wiki/Color_mapping</a></p>\n"}], "owner": {"reputation": 51, "user_id": 5245039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6d513421ed9c746bc9eb50fa5a8ccc?s=128&d=identicon&r=PG&f=1", "display_name": "Betai97", "link": "https://stackoverflow.com/users/5245039/betai97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1238, "favorite_count": 0, "accepted_answer_id": 32105648, "answer_count": 3, "score": 4, "last_activity_date": 1440019614, "creation_date": 1440016541, "last_edit_date": 1440017630, "question_id": 32105194, "link": "https://stackoverflow.com/questions/32105194/how-do-you-convert-a-16-bit-unsigned-integer-to-a-larger-8-bit-unsigned-integer", "title": "How do you convert a 16 bit unsigned integer to a larger 8 bit unsigned integer?", "body": "<p>I have a function that needs to return a 16 bit unsigned int vector, but for another from which I also call this one, I need the output in 8 bit unsigned int vector format. For example, if  I start out with:</p>\n\n<pre><code>std::vector&lt;uint16_t&gt; myVec(640*480);\n</code></pre>\n\n<p>How might I convert it to the format of:</p>\n\n<pre><code>std::vector&lt;uint8_t&gt; myVec2(640*480*4);\n</code></pre>\n\n<p>UPDATE (more information):\nI am working with libfreenect and its getDepth() method. I have modified it to output a 16 bit unsigned integer vector so that I can retrieve the depth data in millimeters. However, I would also like to display the depth data. I am working with some example code c++ from the freenect installation, which uses glut and requires an 8 bit unsigned int vector to display the depth, however, i need the 16 bit to retrieve the depth in millimeters and log it to a text file. Therefore, i was looking to retrieve the data as a 16 bit unsigned int vector in glut's draw function, and then convert it so that I can display it with the glut function that's already written.</p>\n"}, {"tags": ["c++", "class", "templates", "types", "derived"], "comments": [{"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440017080, "post_id": 32105184, "comment_id": 52105172, "body": "It is not entirely clear how you add a class to a list. Perhaps show some example."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4513421"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440020166, "post_id": 32105184, "comment_id": 52106693, "body": "That&#39;s actually my question ^^^ how do I automatically add a new class type to a list that can be accessed. So all you have to do is make the header file. That way instead of adding the new class name to a sea of if else statements for choosing a process, it is already integrated upon creation of the new class."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440021816, "post_id": 32105184, "comment_id": 52107336, "body": "Show what you want to avoid, and how you want the client code look like. A sea of if else statements certainly would look nasty if we had to navigate it, but it isn&#39;t that clear where it would come from. Perhaps you really should show some code."}], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 5244931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/005c4db21f2c678d4197628537ee7571?s=128&d=identicon&r=PG&f=1", "display_name": "nameCensored", "link": "https://stackoverflow.com/users/5244931/namecensored"}, "is_accepted": false, "score": 0, "last_activity_date": 1440017445, "creation_date": 1440017445, "answer_id": 32105450, "question_id": 32105184, "link": "https://stackoverflow.com/questions/32105184/automatically-add-type-derived-class-not-instances-to-a-list-when-created-by-p/32105450#32105450", "title": "Automatically add type derived class (not instances) to a list when created by programmer. c++", "body": "<p>This looks hard.\nC++ is not designed to enable reflection.</p>\n\n<p>Idea one, ask the second programmer to add a macro call like this</p>\n\n<pre><code>REGISTER(name_of_class)\n</code></pre>\n\n<p>either in his main call (if he writes the main)\nor in the implementation file (the macro would need to expand to something that declares a variable (static would be enough) as the result of calling the function to register the class using its name)</p>\n"}, {"tags": [], "owner": {"reputation": 1302, "user_id": 5165306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5b7c0ad499e2544d929f45c37b24cd9?s=128&d=identicon&r=PG&f=1", "display_name": "ex-bart", "link": "https://stackoverflow.com/users/5165306/ex-bart"}, "is_accepted": false, "score": 0, "last_activity_date": 1440017700, "creation_date": 1440017700, "answer_id": 32105509, "question_id": 32105184, "link": "https://stackoverflow.com/questions/32105184/automatically-add-type-derived-class-not-instances-to-a-list-when-created-by-p/32105509#32105509", "title": "Automatically add type derived class (not instances) to a list when created by programmer. c++", "body": "<p>This is not possible in a totally automatic manner.  Your successor will have to invest some minimal work work in addition to writing the derived class (i.e. registering it).</p>\n\n<p>For an example of how to do the registry see <a href=\"https://stackoverflow.com/questions/31797099/implement-factory-pattern-for-products-with-conditional-compiling/31798047#31798047\">here</a>.  That answer also lists some of the caveats of this approach.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4513421"}, "edited": false, "score": 0, "creation_date": 1440020584, "post_id": 32105541, "comment_id": 52106860, "body": "These seems like the best solution so far. I haven&#39;t checked your answer yet though, in hopes that someone has found a way to automatically do this."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1440024293, "post_id": 32105541, "comment_id": 52108142, "body": "You won&#39;t be able to <code>static_assert</code> that <code>D</code> derives from the CRTP, because it won&#39;t be completely declared at the point of instanciation. You can, however, declare the constructor private and make <code>D</code> a friend."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1440025629, "post_id": 32105541, "comment_id": 52108490, "body": "@Quen do it in the ctor of the CRTP, not the body.  Ctor body isn&#39;t checked until derived class calls it, and by that point derivation is visible."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1440026293, "post_id": 32105541, "comment_id": 52108657, "body": "@Yakk so simple I never thought of it... Well. Thank you then :)"}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 2, "last_activity_date": 1440025668, "last_edit_date": 1440025668, "creation_date": 1440017810, "answer_id": 32105541, "question_id": 32105184, "link": "https://stackoverflow.com/questions/32105184/automatically-add-type-derived-class-not-instances-to-a-list-when-created-by-p/32105541#32105541", "title": "Automatically add type derived class (not instances) to a list when created by programmer. c++", "body": "<p>Make illegal to derive from Process.</p>\n\n<p>Create a CRTP <code>Process_Child&lt;D&gt;</code> that is the only class allowed to derive from Process.  <code>Process_Child&lt;D&gt;</code> uses private and friend to ensure that only <code>D</code> can derive from <em>it</em>, and in constructor checks that <code>D</code> actually derives from it (<code>static_assert</code>).</p>\n\n<p>At this point, we are reasonably hardened.</p>\n\n<p><code>Process_Child&lt;D&gt;</code> has a private static data member that is referenced in its constructor (forcing it to exist if anyone writes code that constructs a <code>D</code> anywhere).  This private static data member doesn't have any state, but on construction it registers <code>Process_Child&lt;D&gt;</code>.</p>\n\n<p>Suppose they write a process called <code>Bob</code>.  Bob is a <code>Process_Child&lt;Bob&gt;</code>.  They compile, get an error that <code>Process_Child&lt;Bob&gt;::registration_token</code> does not exist.  They declare that, and boom, done.</p>\n\n<p>This doesn't auto-register: instead, it generates compile-time errors if registration doesn't happen.</p>\n\n<p>We could step back and cause the registration to happen at the first construction of a <code>Process_Child&lt;D&gt;</code>, but that might never happen without it first being registered!</p>\n\n<hr>\n\n<p>An alternative to runtime registration would be to maintain a list of types <code>template&lt;class...&gt;struct types{};</code> in one central place, and check using similar mechanisms that the type <code>D</code> in <code>Process_Child&lt;D&gt;</code> is in that list.</p>\n\n<p>Instead of creating <code>Process_Child&lt;D&gt;::registration_token</code> in a <code>.cpp</code> file, the end-user instead has to modify a common header file to add <code>D</code> to the list of types.</p>\n\n<p>Again, it doesn't happen automatically.  But failure to do it results in a build error.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4513421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1451509887, "creation_date": 1440016505, "last_edit_date": 1451509887, "question_id": 32105184, "link": "https://stackoverflow.com/questions/32105184/automatically-add-type-derived-class-not-instances-to-a-list-when-created-by-p", "title": "Automatically add type derived class (not instances) to a list when created by programmer. c++", "body": "<p>So I am writing a program that will soon be passed on to another programmer. What I want to do is make it so he can create a new derived class from parent class <code>Process</code> [the actual code for it, not just a new instance], and it will automatically be added to lists which are used in other parts of the program. That way when he creates a derived class, he does not have to then go through and add it to other parts of the program to integrate it. All he has to do is make the class, and it is use-able with the program as is.</p>\n\n<p>For example, part of the program prompts the user what type of process they want to run. If the next programmer is to add a new derived class to process, I want that process to automatically appear in the list of what processes the user can run.</p>\n\n<p>Some code...\nProgrammer makes new header file such as (pseudo coded some parts for sanity, does not compile):</p>\n\n<pre><code>class Golay : public Process\n{\npublic:\n    virtual void run(Data data);\n    static string processName = \"golay\";\n};\n</code></pre>\n\n<p>The program runs and prompts user what process to run</p>\n\n<pre><code>cout &lt;&lt; \"What process would you like to run?\" &lt;&lt; endl;\nfor(iterate through all derived process classes here)\n    cout &lt;&lt; derivedClass::processName &lt;&lt; endl;\ncin &gt;&gt; processChoice;\nrunProcess(processChoice, data);\n</code></pre>\n\n<p>runProcess(string processName, Data data) would look something like this:</p>\n\n<pre><code>Process* process = NULL;\nfor(iterate through all derived process classes or an indexed map would be nice)\n    if(processName == derivedClass::processName)\n        process = new derivedClass;\nprocess-&gt;run(data);\n</code></pre>\n\n<p>That's the idea of it. I want the for loop part for all derived processes to already be created when you make a new derived class header file. <code>runProcess()</code> will call functions as needed from the derived class. Otherwise I will just make an indexed <code>map&lt;string, Template&gt;</code> that the programmer has to add his newly derived class to manually.</p>\n\n<p>I am lost on how to accomplish this, anyone have an idea?</p>\n"}, {"tags": ["c++", "pointers", "vector", "reference", "standard-library"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440016280, "post_id": 32105092, "comment_id": 52104752, "body": "There is no problem with a vector of pointers as long as the vector doesn&#39;t need to worry about the lifetime of the objects they point to."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440016315, "post_id": 32105092, "comment_id": 52104773, "body": "Use a vector of smart pointers instead. I&#39;m pretty sure this question is a duplicate."}, {"owner": {"reputation": 3282, "user_id": 4833127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dbdd602d584725385f45ab6087bda58?s=128&d=identicon&r=PG&f=1", "display_name": "Zsw", "link": "https://stackoverflow.com/users/4833127/zsw"}, "edited": false, "score": 0, "creation_date": 1440016491, "post_id": 32105092, "comment_id": 52104863, "body": "Sorry if it is a duplicate. The only question I found similar to mine had suggested using boost, which I wish to avoid. If this is indeed a duplicate please let me know."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 6, "creation_date": 1440016567, "post_id": 32105092, "comment_id": 52104894, "body": "Just use a vector of pointers. There is no need for smart pointers here. At a push, you can use <code>std::reference_wrapper&lt;Object&gt;</code>."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440016809, "post_id": 32105092, "comment_id": 52105029, "body": "@Zsw You are aware, that  <code>v.push_back(o);</code> takes a copy of your reference, that will be unrelated to it when further operations are applied?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440017022, "post_id": 32105092, "comment_id": 52105140, "body": "@juanchopanza is right. Though I think usage of smart pointers makes the semantics clearer. If you don&#39;t own the instances pointed to in the vector, they should be <code>std::weak_ptr</code>s probably."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1440018265, "post_id": 32105092, "comment_id": 52105793, "body": "A solution to your original problem is to use <code>vector::emplace_back</code>, which has been introduced in C++11. It <i>creates</i> an object within the vector from an argument list; for example, <code>v.emplace_back()</code> (with an empty argument list) creates a new object in the vector using the default constructor (or value-initialization for non-class types). That object is not copied nor moved into the vector, it is created in-place."}, {"owner": {"reputation": 3282, "user_id": 4833127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dbdd602d584725385f45ab6087bda58?s=128&d=identicon&r=PG&f=1", "display_name": "Zsw", "link": "https://stackoverflow.com/users/4833127/zsw"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440030191, "post_id": 32105092, "comment_id": 52109635, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6  Yes. Essentially, my question is asking what is the best practices for creating a vector in a way such that when further operations are applied, it will affect the original object as well."}, {"owner": {"reputation": 3282, "user_id": 4833127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dbdd602d584725385f45ab6087bda58?s=128&d=identicon&r=PG&f=1", "display_name": "Zsw", "link": "https://stackoverflow.com/users/4833127/zsw"}, "edited": false, "score": 0, "creation_date": 1440035332, "post_id": 32105092, "comment_id": 52110741, "body": "Would someone like to put their comment as an answer? Otherwise I can&#39;t accept."}], "answers": [{"comments": [{"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 1, "creation_date": 1440067672, "post_id": 32111011, "comment_id": 52124974, "body": "<code>std::vector</code> since C++11 doesn&#39;t require CopyAssignable. I think the underlying reason why you can&#39;t have a vector of references is that you can&#39;t have a pointer to a reference. Hence, placement-new of references is impossible, and iterators would require weird workarounds."}], "tags": [], "owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "is_accepted": true, "score": 1, "last_activity_date": 1440052191, "creation_date": 1440052191, "answer_id": 32111011, "question_id": 32105092, "link": "https://stackoverflow.com/questions/32105092/standard-practice-for-creating-a-vector-of-references-using-only-the-standard/32111011#32111011", "title": "Standard Practice for Creating a &quot;Vector of References&quot; Using Only the Standard Libraries", "body": "<blockquote>\n  <p>I would like to create an object, put the object into a vector, and still be able to modify the same object by accessing only the vector. However, I understand that when an object is <code>push_back()</code> to a vector, the object is actually copied into the vector. As a result, accessing the object in the vector will merely access a similar, but different object.</p>\n</blockquote>\n\n<p>I'm almost certain that this is not what you want or \"should\" want. Forgive me that direct opening of my answer, but unless you have a very good reason to do this, you probably don't want to do it.</p>\n\n<p>For that - a vector with references - to work you <em>must</em> guarantee that the referenced objects won't get moved nor destructed while you hold references to them. If you have them in a vector, make sure that vector isn't resized. If you have them on the stack like in your example, then don't let the vector of references or a copy of it leave that stack frame. If you want to store them in some container, use a <code>std::list</code> (it's iterators - pointers basically - don't get invalidated when inserting or removing elements).</p>\n\n<p>You already noticed that you cannot have a vector of \"real\" references. The reason therefore is that references aren't assignable. Consider following code:</p>\n\n<pre><code>int a = 42;\nint b = 21;\nint &amp; x = a; // initialisation only way to bind to something\nint &amp; y = b;\nx = y;\nb = 0;\n</code></pre>\n\n<p>After that, the value you obtain from <code>x</code> will be 21, because the assignment didn't change the reference (to be bound to <code>b</code>) but the referenced object, <code>a</code>. But a <a href=\"http://en.cppreference.com/w/cpp/container/vector\" rel=\"nofollow\"><code>std::vector</code> explicitly requires</a> this.</p>\n\n<p>You could now set out and write an wrapper around a pointer like ...</p>\n\n<pre><code>template&lt;typename T&gt;\nstruct my_ref {\n  T * target;\n  // don't let one construct a my_ref without valid object to reference to\n  my_ref(T &amp; t) : target(&amp;t) {}\n  // implicit conversion into an real reference\n  operator T &amp;(void) {\n    return *target;\n  }\n  // default assignment works as expected with pointers\n  my_ref &amp; operator=(my_ref const &amp;) = default;\n  // a moved from reference doesn't make sense, it would be invalid\n  my_ref &amp; operator=(my_ref &amp;&amp;) = delete;\n  my_ref(my_ref &amp;&amp;) = delete;\n  // ...\n};\n</code></pre>\n\n<p>... but this is pretty pointless since <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow\"><code>std::reference_wrapper</code></a> already provides exactly that:</p>\n\n<pre><code>int main (int, char**) {\n  int object = 21; // half of the answer\n  vector&lt;reference_wrapper&lt;int&gt;&gt; v;\n  v.push_back(object);\n  v[0].get() = 42; // assignment needs explicit conversion of lhs to a real reference\n  cout &lt;&lt; \"the answer is \" &lt;&lt; object &lt;&lt; endl;\n  return 0;\n}\n</code></pre>\n\n<p>(<a href=\"http://ideone.com/IaAJkX\" rel=\"nofollow\">Example live here</a>)</p>\n\n<p>Now one could argue why using a wrapper around a pointer like <code>std::reference_wrapper</code> when one could also directly use a pointer. IMO a pointer, having the ability to be <code>nullptr</code>, changes the semantics of the code: When you have a raw pointer, it <em>could</em> be invalid. Sure, you can just assume that it's not, or put it somewhere in comments, but in the end you then rely on something that's not guaranteed by the code (and this behaviour normally leads to bugs).</p>\n\n<p><em>If</em> an element of your vector could \"reference\" an object or be invalid, then still raw pointers aren't the first choice (for me): When you use an element from your vector which is valid, then the object referenced by it is actually referenced from multiple places on your code; it's shared. The \"main\" reference to the object then should be a <a href=\"http://en.cppreference.com/w/cpp/memory/shared_ptr\" rel=\"nofollow\"><code>std::shared_ptr</code></a> and the elements of your vector <a href=\"http://en.cppreference.com/w/cpp/memory/weak_ptr\" rel=\"nofollow\"><code>std::weak_ptr</code></a>s. You can then (thread safe) acquire a valid \"reference\" (a shared pointer) when you need to and drop it when done:</p>\n\n<pre><code>auto object = make_shared&lt;int&gt;(42);\nvector&lt;weak_ptr&lt;int&gt;&gt; v;\nv.push_back (object);\n\n// ... somewhere later, potentially on a different thread\nif (auto ref = v[0].lock()) {\n  // noone \"steals\" the object now while it's used here\n}\n// let them do what they want with the object, we're done with it ...\n</code></pre>\n\n<p>Finally, please take my answer with a grain of salt, much of it is based on my opinion (and experience) and might not count as \"standard practice\".</p>\n"}], "owner": {"reputation": 3282, "user_id": 4833127, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2dbdd602d584725385f45ab6087bda58?s=128&d=identicon&r=PG&f=1", "display_name": "Zsw", "link": "https://stackoverflow.com/users/4833127/zsw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1769, "favorite_count": 0, "accepted_answer_id": 32111011, "answer_count": 1, "score": 2, "last_activity_date": 1440052191, "creation_date": 1440016197, "last_edit_date": 1495540952, "question_id": 32105092, "link": "https://stackoverflow.com/questions/32105092/standard-practice-for-creating-a-vector-of-references-using-only-the-standard", "title": "Standard Practice for Creating a &quot;Vector of References&quot; Using Only the Standard Libraries", "body": "<p>I would like to create an object, put the object into a <code>vector</code>, and still be able to modify the same object by accessing only the <code>vector</code>. However, I understand that when an object is <code>push_back()</code> to a <code>vector</code>, the object is actually copied into the <code>vector</code>. As a result, accessing the object in the <code>vector</code> will merely access a similar, but different object.</p>\n\n<p>I have a beginner's knowledge in C, so I know that I can create a pointer to the object, and make a vector of pointers. e.g. <code>vector&lt;Object *&gt;</code>. However, it seems as if <a href=\"https://softwareengineering.stackexchange.com/a/163403\">pointers</a> are <a href=\"https://softwareengineering.stackexchange.com/a/163279\">discouraged</a> in C++, and <a href=\"https://stackoverflow.com/a/7058373/4833127\">references are preferred</a>. Yet, <a href=\"https://stackoverflow.com/questions/922360/why-cant-i-make-a-vector-of-references\">I cannot make a vector of references</a>.</p>\n\n<p>I wish to use only the standard libraries, so <code>boost</code> is off limits to me. </p>\n\n<p>I heard of smart pointers. However, it appears as if there are multiple types of smart pointers. Would it not be overkill for this purpose? If smart pointers are indeed the answer, then how do I determine which one to use?</p>\n\n<p>So my question is: <strong>What is the standard practice for creating a vector of references/pointers to objects?</strong></p>\n\n<p>In other words, would like the below (pseudo-)code to work.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;cstdlib&gt;\n#include &lt;vector&gt;\n\nusing namespace std;\n\nclass Object \n{\npublic:\n    int field;\n};\n\nvector&lt;Object&gt; addToVector(Object &amp;o)\n{\n    vector&lt;Object&gt; v;\n    v.push_back(o);\n    v[0].field = 3; // I want this to set o.field to 3.\n\n    return v;\n}\n\nint main()\n{\n    Object one;\n    one.field = 1;\n    cout &lt;&lt; one.field &lt;&lt; endl; // 1 as expected\n\n    Object &amp;refone = one;\n    refone.field = 2;\n    cout &lt;&lt; one.field &lt;&lt; endl; // 2 as expected\n\n    vector&lt;Object&gt; v = addToVector(one);\n\n    cout &lt;&lt; v[0].field &lt;&lt; endl; // 3 as expected\n\n    cout &lt;&lt; one.field &lt;&lt; endl; // I want to get 3 here as well, as opposed to 2.\n\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c#", "c++", "pinvoke"], "comments": [{"owner": {"reputation": 7770, "user_id": 857848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1ff99510ec45369e216ce549e442ddd?s=128&d=identicon&r=PG", "display_name": "citykid", "link": "https://stackoverflow.com/users/857848/citykid"}, "edited": false, "score": 0, "creation_date": 1440016356, "post_id": 32105089, "comment_id": 52104791, "body": "if C++/CLI  is no option, P/Invoke is the next thing to consider. refering to c# objects is not really possible though via P/invoke, and delegates might also be hard or impossible. but maybe you can get something out of it."}, {"owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "reply_to_user": {"reputation": 7770, "user_id": 857848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1ff99510ec45369e216ce549e442ddd?s=128&d=identicon&r=PG", "display_name": "citykid", "link": "https://stackoverflow.com/users/857848/citykid"}, "edited": false, "score": 0, "creation_date": 1440016958, "post_id": 32105089, "comment_id": 52105103, "body": "Yeah, P/Invoke is what I meant when I said &quot;native interop&quot;; I didn&#39;t realize it had a name. Passing C# delegates into C++ as function pointers is totally doable with P/Invoke, I just don&#39;t know what kind of overhead it has. <a href=\"https://msdn.microsoft.com/en-us/library/367eeye0.aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/367eeye0.aspx</a>"}, {"owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "reply_to_user": {"reputation": 7770, "user_id": 857848, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/f1ff99510ec45369e216ce549e442ddd?s=128&d=identicon&r=PG", "display_name": "citykid", "link": "https://stackoverflow.com/users/857848/citykid"}, "edited": false, "score": 0, "creation_date": 1440017751, "post_id": 32105089, "comment_id": 52105527, "body": "Found another answer describing some of the (perceived) performance characteristics of delegates. <a href=\"http://stackoverflow.com/a/2082975\">stackoverflow.com/a/2082975</a> Maybe using them is the best way to implement this. While iterating over the list of changed bodies in C++, just call one corresponding delegate for each to get the new data into C#-land."}, {"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1440024801, "post_id": 32105089, "comment_id": 52108284, "body": "Pinvoke is going the wrong way, helpful to call native code from C# but not the other way around.  Giving native C++ any idea what a foreign type system looks like in a cross-platform way is just not in the cards.  Microsoft does that pretty well with COM and C++/CX but the *nix people won&#39;t have anything to do with it.  Not invented there."}, {"owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 0, "creation_date": 1440025406, "post_id": 32105089, "comment_id": 52108430, "body": "The C++ code doesn&#39;t really need to know anything about the C# type system; an opaque pointer that it could return back to C# would do the job in this case. Just something that says &quot;hey, you know that thing you told me about?&quot; I imagine it&#39;s only not available because of garbage collection and relocation."}], "answers": [{"comments": [{"owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 0, "creation_date": 1440022702, "post_id": 32105888, "comment_id": 52107654, "body": "#4&#39;s pretty interesting. I had considered allocating a chunk of memory for each object, but quickly rejected the idea because there would be no way to have a &quot;fixed&quot; statement for each one. If they all shared one single chunk of memory, though..."}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "reply_to_user": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 0, "creation_date": 1440023560, "post_id": 32105888, "comment_id": 52107928, "body": "By allocate a chunk I was thinking something along the lines of <code>Marshal.AllocCoTaskMem</code> or <code>Marshal.AllocHGlobal</code>."}, {"owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 0, "creation_date": 1440023937, "post_id": 32105888, "comment_id": 52108030, "body": "Whoa, I didn&#39;t know those methods existed. Thanks! I can think of a couple other places in my code where they&#39;d be useful. But now that I think about it, even if they weren&#39;t available, I could have easily implemented AllocHGlobal and FreeHGlobal myself."}, {"owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "reply_to_user": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 0, "creation_date": 1440024195, "post_id": 32105888, "comment_id": 52108109, "body": "If you&#39;re feeling really ambitious, you can also use any of the WinAPI <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/aa366781%28v=vs.85%29.aspx\" rel=\"nofollow noreferrer\">Memory Management Functions</a> using p/Invoke."}], "tags": [], "owner": {"reputation": 5685, "user_id": 5240004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8eFV.jpg?s=128&g=1", "display_name": "theB", "link": "https://stackoverflow.com/users/5240004/theb"}, "is_accepted": false, "score": 2, "last_activity_date": 1466296752, "last_edit_date": 1466296752, "creation_date": 1440019353, "answer_id": 32105888, "question_id": 32105089, "link": "https://stackoverflow.com/questions/32105089/how-to-pass-c-object-references-to-and-from-c/32105888#32105888", "title": "How to pass C# object references to and from C++", "body": "<ol>\n<li>Mapping a unique identifier would allow you to isolate the managed from the unmanaged code. Its probably better if the unmanaged side isn't doing anything with your managed objects since you really can't control much of the object's lifecycle.</li>\n<li>Delegates as function pointers are possible. All you need to do is define your delegate type and create an instance. Then you can use <a href=\"https://msdn.microsoft.com/en-us/library/vstudio/at4fb09f%28v=VS.100%29.aspx\" rel=\"nofollow\"><code>Marshal.GetFunctionPointerForDelegate</code></a> to get an address to pass to the unmanaged side. The only thing to note is that you have to make sure that the callback is using <code>__stdcall</code>.</li>\n<li>It's probably possible to access class members and functions directly, but without a C++/CLI wrapper you're playing with fire.</li>\n<li>Allocate a chunk of memory on the C# side and pass that to C++. In the classes on the managed side use properties to access this memory with appropriate offsets.</li>\n<li>Make the object <a href=\"https://msdn.microsoft.com/en-us/library/ms182157.aspx\" rel=\"nofollow\">COM visible</a>.</li>\n</ol>\n\n<p>Also, remember that <code>AccessViolationException</code>s are generally not catchable in .NET.</p>\n"}, {"comments": [{"owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 0, "creation_date": 1440079879, "post_id": 32108252, "comment_id": 52133525, "body": "In the delegate case, I could just call the delegate from C++ and use <code>this</code> on the C# side to get the object reference. But that&#39;s beside the point; the point of having an object reference in this case is so I can call a method on it. If I can just call the method directly, it gets the job done."}, {"owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 0, "creation_date": 1440080000, "post_id": 32108252, "comment_id": 52133632, "body": "I didn&#39;t know about the GCHandle stuff. I&#39;ll look into those. Thanks!"}, {"owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 0, "creation_date": 1440083463, "post_id": 32108252, "comment_id": 52136244, "body": "GCHandle seems to be exactly what I was looking for. If you get rid of the delegate part of your answer, I&#39;ll accept this answer."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 1, "creation_date": 1440085719, "post_id": 32108252, "comment_id": 52137730, "body": "@JoBates Done. I&#39;m not sure that removing that part improves my answer, but since I&#39;m a greedy bastard... :)"}, {"owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "edited": false, "score": 0, "creation_date": 1440097274, "post_id": 32108252, "comment_id": 52143969, "body": "Sorry for the conditional acceptance. I already had a way to use delegates that I know works; the real question was &quot;are there any more direct alternatives?&quot;, and GCHandle alone answers that perfectly."}], "tags": [], "owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "is_accepted": true, "score": 5, "last_activity_date": 1440085567, "last_edit_date": 1440085567, "creation_date": 1440035015, "answer_id": 32108252, "question_id": 32105089, "link": "https://stackoverflow.com/questions/32105089/how-to-pass-c-object-references-to-and-from-c/32108252#32108252", "title": "How to pass C# object references to and from C++", "body": "<p>I would suggest using the tool that was specifically designed for situations like that, i.e. <code>System.Runtime.InteropServices.GCHandle</code>.</p>\n\n<p><strong>Usage</strong></p>\n\n<p>In:</p>\n\n<ol>\n<li>Allocate a <code>GCHandle</code> for your CLR object with <code>GCHandleType.Normal</code> or <code>GCHandleType.Weak</code>.</li>\n<li>Convert the <code>GCHandle</code> to an <code>IntPtr</code> via <code>GCHandle.ToIntPtr</code>.</li>\n<li>Pass that <code>IntPtr</code> to the C++ side as the userdata pointer that you mentioned.</li>\n</ol>\n\n<p>Out:</p>\n\n<ol>\n<li>Get <code>IntPtr</code> back from the C++ side.</li>\n<li>Convert the <code>IntPtr</code> back to a <code>GCHandle</code> via <code>GCHandle.FromIntPtr</code></li>\n<li>Use the <code>Target</code> Property of the <code>GCHandle</code> to get to the original CLR object.</li>\n</ol>\n\n<p>When the CLR object is no longer being referenced from the C++ side (either because the C++ object was destroyed or because you reset the userdata pointer to e.g. <code>IntPtr.Zero</code>), release the <code>GCHandle</code> by calling <code>GCHandle.Free</code>.</p>\n\n<p>What type of <code>GCHandle</code> you should allocate depends on whether you want the <code>GCHandle</code> to keep the object alive (<code>GCHandleType.Normal</code>) or not (<code>GCHandleType.Weak</code>).</p>\n"}], "owner": {"reputation": 1612, "user_id": 1195206, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/2ab66abdb13bc2575a785248776ea7ee?s=128&d=identicon&r=PG&f=1", "display_name": "jbatez", "link": "https://stackoverflow.com/users/1195206/jbatez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3178, "favorite_count": 1, "accepted_answer_id": 32108252, "answer_count": 2, "score": 4, "last_activity_date": 1466296752, "creation_date": 1440016184, "last_edit_date": 1440016862, "question_id": 32105089, "link": "https://stackoverflow.com/questions/32105089/how-to-pass-c-object-references-to-and-from-c", "title": "How to pass C# object references to and from C++", "body": "<p>Is there any way to pass C# object references (class types, not structs) into and out of C++ via native interop?</p>\n\n<p>Here's my use case:</p>\n\n<p>I'm trying to write a game engine in C# but want to use a native (C++) physics library. The physics library maintains its own internal state of all the physical bodies and lets the user associate a small amount of data (a pointer) with each body. After a physics simulation tick, the library supplies a list of all physical bodies that moved. I want to iterate over this list and relay all the changes to the corresponding C# objects.</p>\n\n<p>The question is: what's the best way to associate objects in C# with the corresponding physical bodies in C++?</p>\n\n<p>I can think of a couple ways:</p>\n\n<ol>\n<li>Give each physical body an ID of some kind, associate the ID with the physical body in C++, and maintain a map of ID's to corresponding objects in C#. This seems unnecessarily indirect to me, even with an optimized mapping mechanism.</li>\n<li>Take advantage of the ability to marshal C# delegates (which can implicitly reference C# object instances) into C++ function pointers. This might be the best way to do it; I don't know how C# implements delegates and what type of overhead this would entail.</li>\n<li>Find some other way to refer to C# objects in C++ and associate that reference with each native physical body.</li>\n</ol>\n\n<p>Is there any mechanism like option 3 I don't know of? C++/CLI isn't an option since I want to support platforms without it.</p>\n"}, {"tags": ["c++", "windows", "parsing"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440016232, "post_id": 32105061, "comment_id": 52104728, "body": "Write up some testing code and measure."}, {"owner": {"reputation": 6536, "user_id": 858968, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pVU1w.png?s=128&g=1", "display_name": "josh poley", "link": "https://stackoverflow.com/users/858968/josh-poley"}, "edited": false, "score": 0, "creation_date": 1440020695, "post_id": 32105061, "comment_id": 52106895, "body": "I would use a memory mapped file. Let the OS page in as needed (skipping everything else)."}], "answers": [{"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": true, "score": 0, "last_activity_date": 1440016900, "creation_date": 1440016900, "answer_id": 32105289, "question_id": 32105061, "link": "https://stackoverflow.com/questions/32105061/fastest-way-to-parse-jump-through-large-binary-file-with-sized-elements/32105289#32105289", "title": "fastest way to parse/jump through large binary file with sized elements", "body": "<p>The one thing you do not want to do is to use unbuffered reads (i.e. OS calls) to read every individual element.\nYou can get an OK performance by the naive approach of buffered reads. If memory is not a concern whatsoever, you might squeeze some time by using memory-mapped files, and having a pre-fetcher thread to populate the mapping.</p>\n"}], "owner": {"reputation": 6636, "user_id": 204479, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/729dc65f76ffd3e4f82e7ba1065cdc23?s=128&d=identicon&r=PG", "display_name": "Warpin", "link": "https://stackoverflow.com/users/204479/warpin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 32105289, "answer_count": 1, "score": 0, "last_activity_date": 1440016900, "creation_date": 1440016086, "question_id": 32105061, "link": "https://stackoverflow.com/questions/32105061/fastest-way-to-parse-jump-through-large-binary-file-with-sized-elements", "title": "fastest way to parse/jump through large binary file with sized elements", "body": "<p>I need to parse binary files which contain a sequence of elements.  The format of an element is as follows:\n4 bytes: name of element\n4 bytes: size of the element\nvariable size: data for the element</p>\n\n<p>I just need to parse through the file and extract the name, position and size of each element.  Typical element size is around 100kb, and typical file size is around 10GB.</p>\n\n<p>What is the fastest way of going through such a file?  Read all of the file's data, seek to the next element, other approach?</p>\n\n<p>Does it make a difference if the file is local or over the network?</p>\n"}, {"tags": ["c++", "multithreading", "assembly", "concurrency", "atomic"], "comments": [{"owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "edited": false, "score": 1, "creation_date": 1440015911, "post_id": 32104960, "comment_id": 52104525, "body": "Related: <a href=\"http://bartoszmilewski.com/2008/11/05/who-ordered-memory-fences-on-an-x86/\" rel=\"nofollow noreferrer\">bartoszmilewski.com/2008/11/05/&hellip;</a>"}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1440016204, "post_id": 32104960, "comment_id": 52104712, "body": "Assuming the above is correct - it isn&#39;t. Intel needs barriers even for acquire/release semantics. x86 offers incredibly expensive and at the same time still rather limited ordering guarantees for practical programming. Basically you need a barrier (mfence, locked instruction) for StoreLoad barriers."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1440037291, "post_id": 32104960, "comment_id": 52111223, "body": "@Voo: I&#39;m not an expert, but AFAIK a StoreLoad barrier isn&#39;t really needed that often. I don&#39;t see how one could describe the x86 memory ordering as &quot;rather limited for practical programming&quot;. For practical programming <i>I</i> usually require release/acquire semantics, which Intel provides without any explicit barriers."}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 0, "creation_date": 1440051730, "post_id": 32104960, "comment_id": 52115314, "body": "@Paul Acquire/release requires StoreLoad barriers, so no you certainly do need barriers on x86 too. And that&#39;s the point: you get lots of guarantees you don&#39;t need most of the time and when you actually write multi threaded code you still need explicit barriers (or locked instructions)."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1440063646, "post_id": 32104960, "comment_id": 52122320, "body": "@Voo: Acquire/release certainly does <i>not</i> require a StoreLoad barrier!"}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 0, "creation_date": 1440064107, "post_id": 32104960, "comment_id": 52122616, "body": "@Paul Could you show me the statement in the Intel docs where it says that loads cannot be reordered with preceding stores? And if that were true, what exactly would mfence exist for (well it&#39;d be a rather fancy nop)? Also <a href=\"http://gee.cs.oswego.edu/dl/jmm/cookbook.html\" rel=\"nofollow noreferrer\">JSR133 cookbook</a> which is for Java but deals with the same acquire/release semantics and claims the same thing. Gcc also generates mfence instructions after atomic stores."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 1, "creation_date": 1440066859, "post_id": 32104960, "comment_id": 52124442, "body": "@Voo: IDK if we&#39;re talking about the same thing. What I&#39;m talking about are operations with acquire semantics and operations with release semantics. Which do neither require a StoreLoad barrier nor a full fence. And GCC <i>does not</i> generate an mfence after a <code>std::atomic&lt;int&gt;::store(x, memory_order_release)</code>. See <a href=\"https://goo.gl/XcozsM\" rel=\"nofollow noreferrer\">goo.gl/XcozsM</a>"}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 1, "creation_date": 1440067099, "post_id": 32104960, "comment_id": 52124599, "body": "@Voo: And mfence is of course required for a full barrier. Only a full barrier is not necessary for acquire/release. Therefor mfence is not necessary for acquire/release. That doesn&#39;t mean it&#39;s completely useless. It only means we don&#39;t need it as long as we can do what we need with only acquire and release semantics. ps: better example, including a load between the acquire and release: <a href=\"https://goo.gl/oJjVXG\" rel=\"nofollow noreferrer\">goo.gl/oJjVXG</a>"}, {"owner": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "reply_to_user": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 0, "creation_date": 1440096519, "post_id": 32104960, "comment_id": 52143599, "body": "@Paul I was wrong, thanks for correcting me. Now have to look up why the JMM needs that barrier on x86 then, weird."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 26764, "user_id": 144746, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/170e317e1e3d42b520786bcec9dfb409?s=128&d=identicon&r=PG", "display_name": "Voo", "link": "https://stackoverflow.com/users/144746/voo"}, "edited": false, "score": 0, "creation_date": 1440100723, "post_id": 32104960, "comment_id": 52145870, "body": "@Voo: You&#39;re welcome ;) Maybe the Java memory model provides stricter guarantees? E.g. if it would guarantee sequential consistency for all volatile loads/stores then the naked store wouldn&#39;t be enough. And it might guarantee that, in an ill advised attempt to make volatile accesses powerful enough to implement most lock free algorithms - thereby crippling volatile store performance (instead of providing a utility class for atomic operations with various memory orderings). BTW: I just love gcc.godbolt.org - such a useful tool!"}], "answers": [{"comments": [{"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1440030928, "post_id": 32105141, "comment_id": 52109784, "body": "Do atomic operations prevent processor reordering issues in a multi-threaded program, or would memory barrier operations be needed?"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1440033524, "post_id": 32105141, "comment_id": 52110299, "body": "They do when used accordingly. There are 6 different memory models which you can use with atomics, and one of those is &#39;relaxed&#39;, which does not give you any guarantees at all.  The default (sequential) ensures &#39;full reordering block&#39; (both in regards to loads and stores). Actually, linguistically you either speak in terms of fences or in terms of atomics - atomics and memory models never mention fence (which is implementation detail), instead, they talk about order and predictability."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 0, "creation_date": 1440036953, "post_id": 32105141, "comment_id": 52111142, "body": "@SergeyA: What do you mean by <i>&quot;there are different instructions for atomic save and regular save and they behave differently&quot;</i>? AFAIK a normal load/store on x86 is always atomic if the address is aligned, each load has acquire semantics and each store release semantics. Which, aside from CAS, is pretty much all you need. Also, what you refer to as memory models are actually &quot;memory orders&quot;."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 0, "creation_date": 1440039838, "post_id": 32105141, "comment_id": 52111826, "body": "@Paul, I was answering the question as it was asked. Non-chip specific, but rather a C++ question without specific chip affinity. When taken as such, I&#39;d hope you agree with my answer. As for terminology, you are right to correct me. Memory model came from some deeps of my mind."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 0, "creation_date": 1440040153, "post_id": 32105141, "comment_id": 52111892, "body": "@SergeyA: Ah, OK. Your first sentence explicitly mentiones x86, so I assumed that when you wrote <i>&quot;there are different instructions for ...&quot;</i> you were still referring to x86 (=&quot;x86 has different instructions...&quot;). I can see however that one can also interpret it differently, i.e. &quot;C++ has different instructions...&quot;. Still I find the phrasing a little confusing."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1440040278, "post_id": 32105141, "comment_id": 52111918, "body": "Also, mfence plays role even on Intel chip )"}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1440040354, "post_id": 32105141, "comment_id": 52111935, "body": "Agree with better wording might be appropriate."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1440063585, "post_id": 32105141, "comment_id": 52122284, "body": "The <code>relaxed</code> memory order does in fact give you a guarantee, that of atomicity. Which is to say that the memory order is anything but interleaved."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "reply_to_user": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 0, "creation_date": 1440101194, "post_id": 32105141, "comment_id": 52146138, "body": "@PaulGroke They have acquire and release semantics at the assembly language level. There&#39;s no guarantee these will &quot;pass through&quot; a C++ compiler."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 0, "creation_date": 1440101535, "post_id": 32105141, "comment_id": 52146301, "body": "@DavidSchwartz, yes, I do know that :) Only I though Sergey was still talking about the assembly level when he wrote <i>&quot;there are different instructions for atomic save and regular save&quot;</i>. Which he apparently was not. Therefor my confusion."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "edited": false, "score": 0, "creation_date": 1440103397, "post_id": 32105141, "comment_id": 52147312, "body": "And I totally agree with @PaulGroke, but I will not edit my answer least all this wonderful comment chain will suddenly become meaningless :)"}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 3, "last_activity_date": 1440016368, "creation_date": 1440016368, "answer_id": 32105141, "question_id": 32104960, "link": "https://stackoverflow.com/questions/32104960/do-we-ever-need-memory-barriers-with-c-atomics-on-intel-x86/32105141#32105141", "title": "Do we ever need memory barriers with C++ atomics on Intel x86?", "body": "<p>While X86 is cache-coherent, it doesn't mean it gives you the guarantees you expect to find. There are different instructions for atomic save and regular save and they behave differently.\nAlso, and equally importantly, atomic variables prevent 'destructive' compiler optimizations. Without those, the compiler will easily optimize your code according to single-threaded execution model, and your programm will misbehave.</p>\n"}, {"comments": [{"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1440063713, "post_id": 32108770, "comment_id": 52122365, "body": "Visual C++ has targeted ARM (and probably MIPS) for at least a decade. Windows CE and later Windows Phone required it."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1440100955, "post_id": 32108770, "comment_id": 52146008, "body": "@MSalters, thanks for that tip, I removed the speculation."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1440143446, "post_id": 32108770, "comment_id": 52160466, "body": "You may want to refer to <a href=\"https://msdn.microsoft.com/en-us/library/12a04hfd.aspx\" rel=\"nofollow noreferrer\">/volatile</a>. This explains the settings for ARM, x86 and x64, as well as the defaults."}, {"owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "reply_to_user": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1440145764, "post_id": 32108770, "comment_id": 52161735, "body": "Done. But that shows that my original speculation was true after all. The <code>&#47;volatile</code> switch, controlling that extension, is new in VS 2012, which IIRC is the first (non-&quot;embedded&quot;) VS version to provide a non-x86 compiler. So VC++ might have targeted other platforms internally, but no such compiler was publicly available with normal VS versions."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1440146975, "post_id": 32108770, "comment_id": 52162456, "body": "The ARM compiler indeed didn&#39;t ship in the Visual Studio for Desktop products. But the last &quot;embedded&quot; version of Visual Studio was eVC++ 4.0. VS2005 didn&#39;t ship with an ARM compiler, but that compiler came as part of the Windows Mobile SDK and did integrate with VS2005. The change with VS2012 was for Windows Phone 8, which is no longer part of the Windows CE line but is now on the Windows NT line.  That also meant no separate SDK was needed, so you also couldn&#39;t get the ARM compiler from there."}], "tags": [], "owner": {"reputation": 5470, "user_id": 454519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1a0559d260c859bfe44607a982f3003?s=128&d=identicon&r=PG", "display_name": "Paul Groke", "link": "https://stackoverflow.com/users/454519/paul-groke"}, "is_accepted": false, "score": 1, "last_activity_date": 1440145399, "last_edit_date": 1440145399, "creation_date": 1440038862, "answer_id": 32108770, "question_id": 32104960, "link": "https://stackoverflow.com/questions/32104960/do-we-ever-need-memory-barriers-with-c-atomics-on-intel-x86/32108770#32108770", "title": "Do we ever need memory barriers with C++ atomics on Intel x86?", "body": "<p>You need to forget about the specific architecture that you compile against. You're programming C++, and that means you can only rely on the guarantees that your specific C++ implementation gives you. This <em>should</em> of course include whatever the Standard guarantees. In addition you <em>might</em> get some additional guarantees from your specific C++ implementation.</p>\n\n<p>The reason is that the C++ implementation is allowed to do pretty much everything, as long as it doesn't break the rules of the C++ Standard. That means it may \"remove\" or \"destroy\" some guarantees that the platform you're compiling against would \"normally\" provide (meaning: when you program it in assembler). E.g. it might use string/MMX/SSE/SSE2/... instructions where you don't expect it, reorder instructions, coalesce writes, place non-atomic data at addresses that aren't suitably aligned for atomicity etc.</p>\n\n<p>That being said, there is at least one C++ implementation that gives you rather strong additional guarantees about memory ordering, and that is Visual C++. It guarantees that volatile loads always have acquire semantics and volatile stores always have release semantics. (At least on x86/amd64 with default compiler settings.) It also guarantees that properly aligned volatile reads and writes are atomic. See <a href=\"https://msdn.microsoft.com/en-us/library/12a04hfd.aspx\" rel=\"nofollow\">MSDN</a> for details.</p>\n"}, {"tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": false, "score": 0, "last_activity_date": 1440101141, "creation_date": 1440101141, "answer_id": 32127368, "question_id": 32104960, "link": "https://stackoverflow.com/questions/32104960/do-we-ever-need-memory-barriers-with-c-atomics-on-intel-x86/32127368#32127368", "title": "Do we ever need memory barriers with C++ atomics on Intel x86?", "body": "<blockquote>\n  <p>I thought only string and (certain) streaming instructions require memory barriers on Intel x86? For all other instructions the Intel strong memory ordering model ensures that consistency is achieved?</p>\n</blockquote>\n\n<p>This is true <em>at the assembly language level</em>.</p>\n\n<blockquote>\n  <p>Assuming the above is correct, why do we need to use C++ atomics (excluding compare-and-exchange) when our code is only executing on Intel x86?</p>\n</blockquote>\n\n<p>How else would you perform atomic operations like compare and exchange? Atomicity and memory visibility have almost nothing to do with each other.</p>\n\n<blockquote>\n  <p>I really am getting myself confused where we need to use atomics and whether using atomics inhibits the out-of-order-execution due to memory barriers and then the whole MESI protocol.</p>\n</blockquote>\n\n<p>We need to use atomics where we need atomicity. We need to use memory barriers where we need memory visibility because even though the x86's assembly language memory model might not require them, there's no guarantee this will \"pass through\" the compiler seamlessly to the C++ level.</p>\n"}], "owner": {"reputation": 24928, "user_id": 997112, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/7c52a3944cdd2eac9725e54fc548f368?s=128&d=identicon&r=PG", "display_name": "user997112", "link": "https://stackoverflow.com/users/997112/user997112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 853, "favorite_count": 2, "answer_count": 3, "score": 2, "last_activity_date": 1440145399, "creation_date": 1440015732, "last_edit_date": 1440017440, "question_id": 32104960, "link": "https://stackoverflow.com/questions/32104960/do-we-ever-need-memory-barriers-with-c-atomics-on-intel-x86", "title": "Do we ever need memory barriers with C++ atomics on Intel x86?", "body": "<p>I thought only string and (certain) streaming instructions require memory barriers on Intel x86? For all other instructions the Intel strong memory ordering model ensures that consistency is achieved?</p>\n\n<p><strong>Assuming the above is correct, why do we need to use C++ atomics (excluding compare-and-exchange) when our code is only executing on Intel x86?</strong></p>\n\n<p>I really am getting myself confused where we need to use atomics and whether using atomics inhibits the out-of-order-execution due to memory barriers and then the whole MESI protocol.</p>\n\n<p><strong>MESI just ensures the caches are consistent across all processors?</strong></p>\n\n<p><strong>Memory barriers are useful on other architectures because they flush the CPU store buffers to the caches, to allow MESI to ensure consistency?</strong></p>\n\n<p><strong>When do we need to use atomics on Intel X86 CPUs?</strong></p>\n"}, {"tags": ["c++", "c++11", "vector", "std"], "comments": [{"owner": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 1, "creation_date": 1440015827, "post_id": 32104953, "comment_id": 52104472, "body": "does this need to be fast? if not, don&#39;t worry about the temporary vector, it&#39;s a perfectly reasonable solution."}, {"owner": {"reputation": 1312, "user_id": 1135394, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/87aed625763d607ad4edb5c9194939f8?s=128&d=identicon&r=PG", "display_name": "user8709", "link": "https://stackoverflow.com/users/1135394/user8709"}, "reply_to_user": {"reputation": 8617, "user_id": 3477950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mC5xL.jpg?s=128&g=1", "display_name": "The Paramagnetic Croissant", "link": "https://stackoverflow.com/users/3477950/the-paramagnetic-croissant"}, "edited": false, "score": 0, "creation_date": 1440016111, "post_id": 32104953, "comment_id": 52104658, "body": "This question is asked out of curiosity rather than practicality... It&#39;s not performance critical code perse, so agreed, the temp vector is not a big deal... I&#39;m just wondering if there is a better solution offered by the standard... (I&#39;ll probably just use a for loop anyways.)"}], "answers": [{"comments": [{"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1440017505, "post_id": 32105143, "comment_id": 52105409, "body": "I don&#39;t think it&#39;s abusive at all; perfectly normal use of the left fold."}, {"owner": {"reputation": 1312, "user_id": 1135394, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/87aed625763d607ad4edb5c9194939f8?s=128&d=identicon&r=PG", "display_name": "user8709", "link": "https://stackoverflow.com/users/1135394/user8709"}, "edited": false, "score": 0, "creation_date": 1440480686, "post_id": 32105143, "comment_id": 52277245, "body": "That&#39;s the kind of example I was looking for. Thanks!"}, {"owner": {"reputation": 5845, "user_id": 2725810, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/520b9e3418a19d3e442f5713613ef9b8?s=128&d=identicon&r=PG", "display_name": "AlwaysLearning", "link": "https://stackoverflow.com/users/2725810/alwayslearning"}, "edited": false, "score": 0, "creation_date": 1467105599, "post_id": 32105143, "comment_id": 63581406, "body": "Is there a way to also compute at which index the minimum is located?"}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 6, "last_activity_date": 1440016370, "creation_date": 1440016370, "answer_id": 32105143, "question_id": 32104953, "link": "https://stackoverflow.com/questions/32104953/transform-vectorfoo-to-a-vectordouble-and-find-the-minimum/32105143#32105143", "title": "transform vector&lt;Foo&gt; to a vector&lt;double&gt; and find the minimum", "body": "<p>You could abuse <a href=\"http://en.cppreference.com/w/cpp/algorithm/accumulate\" rel=\"noreferrer\"><code>std::accumulate</code></a>:</p>\n\n<pre><code>vector&lt;Foo&gt; v = ...;\n\ndouble min = std::accumulate(std::begin(v), std::end(v),\n                             std::numeric_limits&lt;double&gt;::max(),\n                             [](double so_far, Foo const&amp; next) {\n                                 return std::min(so_far, toDouble(next));\n                             });\n</code></pre>\n\n<p>Or even, without <code>numeric_limits</code>, if you know <code>v</code> is non-empty:</p>\n\n<pre><code>double min = std::accumulate(std::next(std::begin(v)), std::end(v),\n                             toDouble(v[0]),\n                             [](double so_far, Foo const&amp; next) {\n                                 return std::min(so_far, toDouble(next));\n                             });\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1312, "user_id": 1135394, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/87aed625763d607ad4edb5c9194939f8?s=128&d=identicon&r=PG", "display_name": "user8709", "link": "https://stackoverflow.com/users/1135394/user8709"}, "edited": false, "score": 1, "creation_date": 1440018785, "post_id": 32105552, "comment_id": 52106019, "body": "The issue there is that the result is a Foo iterator. I&#39;d have to convert that Foo back to a double to get my final answer. (totally valid, just looking for something more direct)."}], "tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": 1, "last_activity_date": 1440017860, "creation_date": 1440017860, "answer_id": 32105552, "question_id": 32104953, "link": "https://stackoverflow.com/questions/32104953/transform-vectorfoo-to-a-vectordouble-and-find-the-minimum/32105552#32105552", "title": "transform vector&lt;Foo&gt; to a vector&lt;double&gt; and find the minimum", "body": "<p>You can use a min version which takes a comparator and call toDouble within this comparator.</p>\n"}], "owner": {"reputation": 1312, "user_id": 1135394, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/87aed625763d607ad4edb5c9194939f8?s=128&d=identicon&r=PG", "display_name": "user8709", "link": "https://stackoverflow.com/users/1135394/user8709"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 32105143, "answer_count": 2, "score": 0, "last_activity_date": 1440017860, "creation_date": 1440015708, "last_edit_date": 1440016463, "question_id": 32104953, "link": "https://stackoverflow.com/questions/32104953/transform-vectorfoo-to-a-vectordouble-and-find-the-minimum", "title": "transform vector&lt;Foo&gt; to a vector&lt;double&gt; and find the minimum", "body": "<p>I have a <code>vector&lt;Foo&gt;</code> and some function <code>double toDouble(const Foo&amp; foo)</code>, and I want to find the minimum double value after running the toDouble function over all of the Foos in the vector.</p>\n\n<p>It's an easy enough problem to solve using a for loop, but out of curiosity, is there a slick way to do this using the standard library algorithms?</p>\n\n<p>One idea was to use <code>std::transform</code> to convert the <code>vector&lt;Foo&gt;</code> to a <code>vector&lt;double&gt;</code>  and then use <code>std::min_element</code> to find the smallest double value, but that requires filling up a new temporary vector... Is there a more direct solution?</p>\n"}, {"tags": ["c++", "templates", "c++11", "c++14", "template-meta-programming"], "comments": [{"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1440023766, "post_id": 32104890, "comment_id": 52107977, "body": "I mean I think it could make sense if you have a bunch of types that have e.g. <code>static const int value = 42;</code> and some other types that have <code>static const char value = &#39;a&#39;</code>, then potentially you could partially specialize a template based on <code>&lt;typename T, T::v&gt;</code> ... I can&#39;t think of any particular reason for the restriction, I don&#39;t think allowing that kind of substitution and pattern matching would be harder than the kind they already do. But maybe I&#39;m missing something."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440080185, "post_id": 32104890, "comment_id": 52133747, "body": "FWIW there may be no real answer to this. The standard also says &quot;you shall not take a pointer to a constructor&quot; and afaik there&#39;s no particularly compelling reason for this restriction"}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1440081100, "post_id": 32104890, "comment_id": 52134407, "body": "@ChrisBeck That&#39;s more reasonable and understandable.  A constructor requires memory for its object, thus hidden code is needed prior to the call.  This allocation can be directly before the call, or anywhere else prior, which is compiler defined.  To call a constructor without saying where to store the object is meaningless so a pointer to a constructor is more than just meaningless, it&#39;s downright dangerous.  Inplace <code>new</code> allows for the programmer to specify the memory location if such fine grained use is actually warranted and factory functions can be generated in place of a constructor."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440081336, "post_id": 32104890, "comment_id": 52134578, "body": "@ChrisBeck, the standard doesn&#39;t <i>usually</i> make things up arbitrarily.  The only one I&#39;m aware of is the non-existence of member function types and references, and that is still more arguable than this AFAICT (though it still kind of still bugs me every now and again o.O)."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440085727, "post_id": 32104890, "comment_id": 52137735, "body": "I guess what I would want is for the standard to give me a pointer to an automatically generated corresponding factory function when I ask for the pointer to the constructor. Ofc it&#39;s not really that important anyways. If it were possible for me to use pointers to constructors as template parameters I think it would be sometimes quite useful"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440086109, "post_id": 32104890, "comment_id": 52137973, "body": "twitter hashtag #off-topic"}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1440087117, "post_id": 32104890, "comment_id": 52138593, "body": "@ChrisBeck This would be your function: <code>template &lt;typename CLASS, typename...ARGs&gt; CLASS factory(ARGs&amp;&amp;...args) { return CLASS(std::forward&lt;ARGs...&gt;(args...)); }</code> your function pointer would be <code>auto pConstrutor = &amp;factory&lt;class_name, arg0_t, ..., argN_t&gt;</code>, and your call would be <code>class_name var = pConstructor(arg0, ..., argN)</code>. And that will be my last post for this OT thread"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440187623, "post_id": 32104890, "comment_id": 52186328, "body": "Adrian: that is a very good point. I was reminded of this exchange while reading this: <a href=\"http://www.stroustrup.com/bs_faq2.html#overload-dot\" rel=\"nofollow noreferrer\">stroustrup.com/bs_faq2.html#overload-dot</a> Bjarne points out that there&#39;s no particular reason that you can&#39;t overload the ternary operator. But fwiw I think I&#39;m glad for that"}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440191211, "post_id": 32104890, "comment_id": 52187900, "body": "@ChrisBeck Note that I didn&#39;t test that and upon looking at it again, it is not quite right.  But you get the idea."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1440492099, "post_id": 32104890, "comment_id": 52283184, "body": "This seems to have originated from <a href=\"http://www.open-std.org/jtc1/sc22/wg21/docs/papers/1995/N0668.pdf\" rel=\"nofollow noreferrer\">N0668</a>, but that&#39;s just the wording. Trying to see if I can track down the rationale."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 1, "creation_date": 1440872546, "post_id": 32104890, "comment_id": 52456189, "body": "@T.C. : From last page of N0668, they give an algorithm to determine which class partial template specializations are more specific than others, which basically treats the nontype parameters separately, and reuses the earlier algorithm for function templates for the type parameters. I guess that this doesn&#39;t work if the nontype parameters&#39; types depend on the type parameters. So my assumption is that, the standards committee just felt it saved compiler writers a significant amount of work to disallow this? Does that sound reasonable?"}, {"owner": {"reputation": 1628, "user_id": 1230621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a752347505880eb6aca2316744e7f474?s=128&d=identicon&r=PG", "display_name": "StarShine", "link": "https://stackoverflow.com/users/1230621/starshine"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1441268526, "post_id": 32104890, "comment_id": 52612500, "body": "@ChrisBeck I&#39;m not a C++ standards or template ellipsis expert, but the constraint feels natural. In your quoted examples, the partial specialization with one of the non-type parameters forces the type of the type-parameter T in the template to be of an implied type.  It may even make the template non-partial. Reiterating the construct as if the type is unrelated from the non-type parameter,  introduces new ambiguity as it seemingly allows the template construct to violate itself. Your last finding about the order in which template code is analyzed is probably the result of the same reasoning."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 1628, "user_id": 1230621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a752347505880eb6aca2316744e7f474?s=128&d=identicon&r=PG", "display_name": "StarShine", "link": "https://stackoverflow.com/users/1230621/starshine"}, "edited": false, "score": 0, "creation_date": 1441304121, "post_id": 32104890, "comment_id": 52635877, "body": "@StarShine, are you talking to Chris or to me, the OP?  If it is me, then I don&#39;t really understand your reasoning.  How could this possibly make this non-partial, add any ambiguity or violate itself?"}, {"owner": {"reputation": 1628, "user_id": 1230621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a752347505880eb6aca2316744e7f474?s=128&d=identicon&r=PG", "display_name": "StarShine", "link": "https://stackoverflow.com/users/1230621/starshine"}, "edited": false, "score": 0, "creation_date": 1441314600, "post_id": 32104890, "comment_id": 52641617, "body": "@Adrian I was following up on Chris&#39; reaction. Let&#39;s say the non-type parameter is of a numeral primitive type, e.g. &#39;int&#39;. According to the declaration, first type parameter T can only be of that same type. Leaving the type template parameter T unspecified would allow for class types that violate the template type association in  the declaration. Instead of having the compiler find out about possible violations by instancing all required cases, it is faster to warn about this up-front. Not much is lost. There was no need for template typing. I believe type-traits can help you in these cases."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 1628, "user_id": 1230621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a752347505880eb6aca2316744e7f474?s=128&d=identicon&r=PG", "display_name": "StarShine", "link": "https://stackoverflow.com/users/1230621/starshine"}, "edited": false, "score": 0, "creation_date": 1441315243, "post_id": 32104890, "comment_id": 52641892, "body": "@StarShine, are you indexing from 0?  Yes, I know that T has to have the same type as T.  According to the template example definition that I specified, T must be specified.  I think I&#39;m not understanding you.  Perhaps an example of what you mean?"}], "answers": [{"comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1441723305, "post_id": 32426650, "comment_id": 52783388, "body": "<code>furthermore such specializations are bound to involve </code>class T` in a value initialization which will always be a violation of the rules` - how so?  Would not <code>constexpr</code> constructors make this not a problem?"}, {"owner": {"reputation": 24673, "user_id": 2567683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1022957737/picture?type=large", "display_name": "Nikos Athanasiou", "link": "https://stackoverflow.com/users/2567683/nikos-athanasiou"}, "reply_to_user": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1441725976, "post_id": 32426650, "comment_id": 52785301, "body": "@Adrian I can&#39;t see how <code>constexpr</code> is relevant here. The argument expression is still not a simple identifier"}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1441726400, "post_id": 32426650, "comment_id": 52785568, "body": "Oh yes, that right.  I was confusing your statement with my example where it was <code>template &lt;typename T, T* p&gt;</code> which would have been as it is a pointer to a type and not a type itself.  So <i>legacy is blame</i> and there is no reason for this.  Hmmmm."}], "tags": [], "owner": {"reputation": 24673, "user_id": 2567683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/1022957737/picture?type=large", "display_name": "Nikos Athanasiou", "link": "https://stackoverflow.com/users/2567683/nikos-athanasiou"}, "is_accepted": true, "score": 5, "last_activity_date": 1441978891, "last_edit_date": 1441978891, "creation_date": 1441562723, "answer_id": 32426650, "question_id": 32104890, "link": "https://stackoverflow.com/questions/32104890/why-is-initialization-of-a-constant-dependent-type-in-a-template-parameter-list/32426650#32426650", "title": "Why is initialization of a constant dependent type in a template parameter list disallowed by the standard?", "body": "<p>(IMHO) The most common reasons the standard disallows a specific feature are: </p>\n\n<ol>\n<li>The feature is covered by another mechanism in the language, rendering it superfluous.</li>\n<li>It contradicts existing language logic and implementation, making its implementation potentially code breaking. </li>\n<li>Legacy: the feature was left out in the first place and now we've built a lot without it that it's almost forgotten (see partial function template specialization).</li>\n</ol>\n\n<p>Difficulty of implementation is rarely a factor, though it may take some time for  compiler implementations to catch up with evolution on the \"hard\" stuff. </p>\n\n<p>You could always wrap your non type template parameter in another type:</p>\n\n<pre><code>template &lt; typename T1, typename T2 &gt; \nstruct Demo {}; // primary template\n\ntemplate &lt; typename T &gt; \nstruct Demo&lt;T, integral_constant&lt;T, 0&gt;&gt; {}; // specialization\n</code></pre>\n\n<p>I doubt <a href=\"http://coliru.stacked-crooked.com/a/724fbcb3dd8c13ee\" rel=\"nofollow\">this hack</a> falls into case 1. Case 3 is always a possibility so lets examine case 2. To do this, we have to know which are the related rules the standard imposes on class templates partial specializations. </p>\n\n<blockquote>\n  <p>14.5.5 <strong>Class template partial specializations</strong></p>\n  \n  <ol start=\"7\">\n  <li><p>A non-type argument is non-specialized if it is the name of a non-type parameter. All other non-type arguments are specialized. <strong>(C1)</strong></p></li>\n  <li><p>Within the argument list of a class template partial specialization, the following restrictions apply:</p>\n  \n  <ul>\n  <li>A partially specialized non-type argument expression shall not involve a template parameter of the partial specialization except when the argument expression is a simple identifier. <strong>(C2)</strong></li>\n  <li>The type of a template parameter corresponding to a specialized non-type argument shall not be dependent on a parameter of the specialization. <strong>(C3)</strong></li>\n  </ul></li>\n  </ol>\n</blockquote>\n\n<p>I marked the first three <strong>C</strong>lauses I found relevant (the third is the one in question). According to C1 in our case <strong>we have a specialized non-type argument</strong> so C2 should stand, yet this </p>\n\n<pre><code>template &lt;class T, T t&gt; struct C {};\ntemplate &lt;class T&gt; struct C&lt;T, 1&gt;;\n</code></pre>\n\n<p>is actually </p>\n\n<pre><code>template &lt;class T, T t&gt; struct C {};\ntemplate &lt;class T&gt; struct C&lt;T, T(1)&gt;; // notice the value initialization\n</code></pre>\n\n<p>so the partially specialized non type argument <code>T t</code> involves the template parameter of the partial specialization <code>class T</code> in an expression other than an identifier; furthermore such specializations are bound to involve <code>class T</code> in a value initialization which will always be a violation of the rules. Then C3 comes along and clears that out for us so that we won't have to make that deduction every time. </p>\n\n<p>So far we've established that the rules are in sync with themselves but this does NOT prove case 2 (once we remove the initial limitation every other related limitation falls apart). We'd have to dive into <strong>matching class template partial specializations</strong> rules; partial ordering is considered out of scope here because if we can produce valid candidates it's up to the programmer to put together a well formed program (i.e. not create ambiguous uses of class templates). </p>\n\n<p>Section </p>\n\n<blockquote>\n  <p><strong>Matching of class template partial specializations [temp.class.spec.match]</strong></p>\n</blockquote>\n\n<p>describes the (give or take) \"pattern matching\" process involved in template specialization. Rule <code>1</code> is the overall workflow of the procedure and the subsequent rules are those that define correctness </p>\n\n<blockquote>\n  <ol start=\"2\">\n  <li><p>A partial specialization matches a given actual template argument list if the template arguments of the partial specialization can be deduced from the actual template argument list</p></li>\n  <li><p>A non-type template argument can also be deduced from the value of an actual template argument of a non-type parameter of the primary template.</p></li>\n  <li><p>In a type name that refers to a class template specialization, (e.g., A) the argument list shall match the template parameter list of the primary template. The template arguments of a specialization are deduced from the arguments of the primary template.</p></li>\n  </ol>\n</blockquote>\n\n<p><strong>These rules are not violated</strong> by allowing <em>the type of a template parameter corresponding to a specialized non-type argument to be dependent on a parameter of the specialization</em>. So IMHO <strong>there is no specific reason</strong> why we can't have this feature in future revisions of the language: <strong>legacy is to blame</strong>. Sadly I didn't manage to find any language proposals with the initiative to introduce this feature. </p>\n"}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1304, "favorite_count": 6, "accepted_answer_id": 32426650, "answer_count": 1, "score": 35, "last_activity_date": 1441978891, "creation_date": 1440015464, "last_edit_date": 1495535325, "question_id": 32104890, "link": "https://stackoverflow.com/questions/32104890/why-is-initialization-of-a-constant-dependent-type-in-a-template-parameter-list", "title": "Why is initialization of a constant dependent type in a template parameter list disallowed by the standard?", "body": "<p>In the answer to this post \"<a href=\"https://stackoverflow.com/questions/22486386/partially-specializing-a-non-type-template-parameter-of-dependent-type\">(Partially) specializing a non-type template parameter of dependent type</a>\", it states:</p>\n\n<blockquote>\n  <p>The type of a template parameter corresponding to a specialized\n  non-type argument shall not be dependent on a parameter of the\n  specialization. [ Example:</p>\n\n<pre><code>template &lt;class T, T t&gt; struct C {};\ntemplate &lt;class T&gt; struct C&lt;T, 1&gt;; // error\n\ntemplate&lt; int X, int (*array_ptr)[X] &gt; class A {};\nint array[5];\ntemplate&lt; int X &gt; class A&lt;X,&amp;array&gt; { }; // error\n</code></pre>\n  \n  <p>\u2014end example ]</p>\n</blockquote>\n\n<p>My question is why is this restriction here?  There is at least one use case where I find that this restriction interferes with writing clean code.  E.g.</p>\n\n<pre><code>template &lt;typename T, T*&gt;\nstruct test;\n\ntemplate &lt;typename T&gt;\nstruct test&lt;T, nullptr&gt; // or struct test&lt;T, (T*)nullptr&gt;\n{\n};\n\ntemplate &lt;typename R, typename...ARGs, R(*fn)(ARGs...)&gt;\nstruct test&lt;R(ARGs...), fn&gt;\n{\n};\n</code></pre>\n\n<p>Though I'm unsure if there are other cases that stating a constant based on a type is a problem beyond not making any sense.</p>\n\n<p>Anyone have a reason for why this is so?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1440015918, "post_id": 32104844, "comment_id": 52104529, "body": "It depends on what the function returns. Notice in the <code>GOTW</code> the function returns by <code>value</code> (copy) which becomes a temporary."}, {"owner": {"reputation": 1036, "user_id": 4554460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7cfcd45cf86c12c8333aad1152f26e67?s=128&d=identicon&r=PG&f=1", "display_name": "Martin R.", "link": "https://stackoverflow.com/users/4554460/martin-r"}, "reply_to_user": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1440016178, "post_id": 32104844, "comment_id": 52104696, "body": "What if the function returns a reference to a member and I know that the member is valid while I use <code>d</code>?"}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 1, "creation_date": 1440016237, "post_id": 32104844, "comment_id": 52104731, "body": "If <code>somedata</code> has nothing to do with <code>get()</code> I don&#39;t understand how assigning to it can invalidate <code>d</code>. Can you provide a <a href=\"http://stackoverflow.com/help/mcve\">SSCCE</a>"}, {"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1440016527, "post_id": 32104844, "comment_id": 52104877, "body": "That&#39;s fine. The function should document what it returns. If it returns a reference then it is the function&#39;s job to make sure that reference does not go out of scope when the function returns and that it has a relevant (documented) lifespan. The caller should know how long the reference will remain valid."}, {"owner": {"reputation": 1036, "user_id": 4554460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7cfcd45cf86c12c8333aad1152f26e67?s=128&d=identicon&r=PG&f=1", "display_name": "Martin R.", "link": "https://stackoverflow.com/users/4554460/martin-r"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1440016828, "post_id": 32104844, "comment_id": 52105040, "body": "@Chris Drew: Me neither. I tried to set up a mcve, but failed. This is why I am asking. :-/"}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1440016997, "post_id": 32104844, "comment_id": 52105129, "body": "@MartinR. Just a wild guess, but are there any containers involved? Adding to some containers can invalidate existing references."}, {"owner": {"reputation": 1036, "user_id": 4554460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7cfcd45cf86c12c8333aad1152f26e67?s=128&d=identicon&r=PG&f=1", "display_name": "Martin R.", "link": "https://stackoverflow.com/users/4554460/martin-r"}, "edited": false, "score": 0, "creation_date": 1440017408, "post_id": 32104844, "comment_id": 52105360, "body": "Chris Drew: No, the variable I am referencing is basically a struct and the other member that is changed is an OpenCV cv::Mat."}, {"owner": {"reputation": 1036, "user_id": 4554460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7cfcd45cf86c12c8333aad1152f26e67?s=128&d=identicon&r=PG&f=1", "display_name": "Martin R.", "link": "https://stackoverflow.com/users/4554460/martin-r"}, "edited": false, "score": 0, "creation_date": 1440018932, "post_id": 32104844, "comment_id": 52106087, "body": "Or more precisely, the referenced has the type <code>const Eigen::Vector3d&amp;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 5, "last_activity_date": 1440016298, "creation_date": 1440016298, "answer_id": 32105122, "question_id": 32104844, "link": "https://stackoverflow.com/questions/32104844/in-which-cases-is-it-unsafe-to-const-reference-a-return-value/32105122#32105122", "title": "In which cases is it unsafe to (const) reference a return value?", "body": "<blockquote>\n  <p>Which side-effects could lead to the invalidation?</p>\n</blockquote>\n\n<p>Holding a reference to the internal state of a class (i.e., versus extending the lifetime of a temporary) and then calling any non-const member functions may potentially invalidate the reference.</p>\n\n<blockquote>\n  <p>Is it bad-practice to assign return values to a const reference? (Especially when I don't know the interior of the function)</p>\n</blockquote>\n\n<p>I would say the <em>bad practice</em> is to hold a reference to the internal state of a class instance, mutating the class instance, and continuing to use the original reference (unless it is documented that the non-const functions don't invalidate the reference)</p>\n"}, {"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440021937, "post_id": 32105183, "comment_id": 52107382, "body": "@light <code>std::vector</code> and the like -- the library or library-esque code that sits below the other code that is widely used.  If it is a bit slow or bulky, it won&#39;t show up in a particular slow task as being key, but rather slow down everything marginally."}], "tags": [], "owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "is_accepted": false, "score": 6, "last_activity_date": 1440016499, "creation_date": 1440016499, "answer_id": 32105183, "question_id": 32104844, "link": "https://stackoverflow.com/questions/32104844/in-which-cases-is-it-unsafe-to-const-reference-a-return-value/32105183#32105183", "title": "In which cases is it unsafe to (const) reference a return value?", "body": "<p>You seem to be afraid of elision failing.  That <code>auto x = some_func();</code> will result in an extra move construct over <code>auto&amp;&amp; x = some_func();</code> when <code>some_func()</code> returns a temporary object.</p>\n\n<p>You shouldn't be.</p>\n\n<p>If elision fails, it means your compiler is incompetent, or compiling with frankly hostile settings.  And you cannot survive hostile settings or incompetent compilers: incompetent compilers can turn <code>a+=b</code> with integers into <code>for (int i = 0; i &lt; abs(b); ++i) {if (b&gt;0) ++a; else --a;}</code> and violate not one iota of the standard.</p>\n\n<p>Elision is a core language feature.  Don't write bad code just because you don't trust it will happen.</p>\n\n<hr>\n\n<p>You should capture by reference when you want a reference to the data provided by the function, and not an independently stable copy of the data.  If you don't understand the function's return value's lifetime, capturing by reference is simply <em>not safe</em>.</p>\n\n<p>Even if you know that the data will be stable, more time is spent maintaining code than writing it: the person reading your code must be able to see at a glance that your assumption holds.  And non-local bugs are bad: a seemingly innocuous change to the function you call should not break your code.</p>\n\n<hr>\n\n<p>The end result is, take things by value unless you have a good reason not to.</p>\n\n<p>Taking things by value makes it easier for you, and the compiler, to reason about your code.  It increases locality.</p>\n\n<p>When you have a good reason not to, then take things by reference.</p>\n\n<p>Depending on context, this good reason might not have to be very strong.  But it shouldn't be based off an assumption of an incompetent compiler.</p>\n\n<p>Premature pessimization should be avoided, but so should premature optimization.  Taking (or storing) references instead of values should be something you do when and if you have identified performance problems.  Write clean, easy to understand code.  Shove complexity into tightly written types, and have the exterior interface be clean and simple.  Take things by value, because values decouple state.</p>\n\n<hr>\n\n<p>Optimization is fungible.  By making more of your code simpler, you can make it easier to work with (and be more productive).  Then, when you identify parts where performance matters, you can expend effort <em>there</em> to make the code faster.</p>\n\n<p>A big example is foundational code: foundational code (which is used everywhere) quickly becomes a general drag on performance if not written with performance <em>and</em> ease of use in mind.  In that case, you want to hide complexity <em>inside</em> the type, and expose a simple easy to use exterior interface that doesn't require the user to understand the guts.</p>\n\n<p>But code in a random function somewhere?  Use values, the easiest to use containers with the friendliest O-notation to the <em>most expensive</em> operation you do and the easiest interface.  Vectors if reasonable (avoid premature pessmiziation), but don't sweat a few maps.</p>\n\n<p>Find the 1%-10% of your code that takes up 90%-99% of the time, and make that fast.  If the rest of your code has good O-notation performance (so it won't become shockingly slower with larger data sets than you test with), you'll be in good shape.  Then start testing with ridiculous data-sets, and find the slow parts then.</p>\n"}, {"tags": [], "owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "is_accepted": false, "score": -1, "last_activity_date": 1440016560, "creation_date": 1440016560, "answer_id": 32105202, "question_id": 32104844, "link": "https://stackoverflow.com/questions/32104844/in-which-cases-is-it-unsafe-to-const-reference-a-return-value/32105202#32105202", "title": "In which cases is it unsafe to (const) reference a return value?", "body": "<p>It is rather question of knowing what your functions return. You should also have a full understanding of the return value type and it's semantics.</p>\n"}, {"comments": [{"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440021193, "post_id": 32105259, "comment_id": 52107082, "body": "The question&#39;s more about the reference than about the <code>const</code> (which just permits the temp-binding). And I&#39;m not sure what sort of caching you had in mind?"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440021982, "post_id": 32105259, "comment_id": 52107397, "body": "Caching a value =&gt; saving localy the result in order not to call the get() any more."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440022033, "post_id": 32105259, "comment_id": 52107419, "body": "What does that have to do with the code or the question?"}, {"owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "reply_to_user": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440022321, "post_id": 32105259, "comment_id": 52107509, "body": "If you save a value of something that might be changed later it will have an unpleasent sideffect which will make the cached data invalid."}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440022387, "post_id": 32105259, "comment_id": 52107538, "body": "Sorry, no idea what you&#39;re talking about."}], "tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 0, "last_activity_date": 1440016768, "creation_date": 1440016768, "answer_id": 32105259, "question_id": 32104844, "link": "https://stackoverflow.com/questions/32104844/in-which-cases-is-it-unsafe-to-const-reference-a-return-value/32105259#32105259", "title": "In which cases is it unsafe to (const) reference a return value?", "body": "<p>I am not sure that I am answering exactly what you expected to hear but...\n<code>const</code> keyword has nothing to do with the 'unsafe' here.\nEven if you return non const reference, it may become invalid. <code>const</code> means that it is not allowed to modify it. For example if your <code>get()</code> returns a const member or <code>get()</code> itself is defined as <code>const</code> like this <code>const some_refetence_t&amp; get() const { return m_class_member; }</code>.\nNow regarding your questions at the end:</p>\n\n<ol>\n<li><blockquote>\n  <p>Which side-effects could lead to the invalidation?</p>\n</blockquote></li>\n</ol>\n\n<p>There could be many side effects if the original value changes. For example let's assume that the returned value is a reference to an object on the heap which is deleted... or the returned value is cached while the original value gets updates. All these are design problems. If by design such case can take place then the return value should be by value (and in case of caching, it must not be cached! :) ).</p>\n\n<ol start=\"2\">\n<li><blockquote>\n  <p>Is it bad-practice to assign return values to a const reference?\n  (Especially when I don't know the interior of the function)</p>\n</blockquote></li>\n</ol>\n\n<p>Same thing. If by design you don't have to modify the object that you get (by reference or by value) than it is the best to define it as <code>const</code>. Once you define something as <code>const</code>, the compiler will make sure that you are not trying to modify it somehow in the code.</p>\n"}], "owner": {"reputation": 1036, "user_id": 4554460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7cfcd45cf86c12c8333aad1152f26e67?s=128&d=identicon&r=PG&f=1", "display_name": "Martin R.", "link": "https://stackoverflow.com/users/4554460/martin-r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 32105122, "answer_count": 4, "score": 4, "last_activity_date": 1440016768, "creation_date": 1440015321, "question_id": 32104844, "link": "https://stackoverflow.com/questions/32104844/in-which-cases-is-it-unsafe-to-const-reference-a-return-value", "title": "In which cases is it unsafe to (const) reference a return value?", "body": "<p>I tend do use the following notation a lot:</p>\n\n<pre><code>const Datum&amp; d = a.calc();\n// continue to use d\n</code></pre>\n\n<p>This works when the result of calc is on the stack, see <a href=\"http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/\" rel=\"nofollow\">http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/</a>. Even though compilers probably optimize here, it feels nice to explicitly avoid temporary objects.</p>\n\n<p>Today I realized, that the content of <code>d</code> became invalid after data was written to a member of <code>a</code>. In this particular case the get function simply returned a reference to another member, which was completely unrelated to the write however. Like this:</p>\n\n<pre><code>const Datum&amp; d = a.get();\n// ... some operation ...\na.somedata = Datum2();\n// now d is invalid.\n</code></pre>\n\n<p>Again, somedata has nothing to do with <code>d</code> or <code>get()</code> here.</p>\n\n<p>Now I ask myself:</p>\n\n<ol>\n<li>Which side-effects could lead to the invalidation?</li>\n<li>Is it bad-practice to assign return values to a const reference? (Especially when I don't know the interior of the function)</li>\n</ol>\n\n<p>My application is single-threaded except for a Qt GUI-Thread.</p>\n"}, {"tags": ["c++", "multithreading", "tbb"], "answers": [{"comments": [{"owner": {"reputation": 16815, "user_id": 453673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QhMRI.png?s=128&g=1", "display_name": "Nav", "link": "https://stackoverflow.com/users/453673/nav"}, "edited": false, "score": 0, "creation_date": 1440184779, "post_id": 32104889, "comment_id": 52185075, "body": "Sorry, but this didn&#39;t work. Not because of <code>std::ref</code>, but because the compiler couldn&#39;t recognize <code>std::ref</code>. Even after I gave it the proper include path to <code>#include&lt;functional&gt;</code>. For now I&#39;ve tried <code>F* foo = new F(); F&amp; bar = foo;  std::thread t(bar);</code>, but even this creates a separate object inside the thread. The <code>stopIt()</code> function does not work on it. Is there any other solution?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 16815, "user_id": 453673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QhMRI.png?s=128&g=1", "display_name": "Nav", "link": "https://stackoverflow.com/users/453673/nav"}, "edited": false, "score": 0, "creation_date": 1440193059, "post_id": 32104889, "comment_id": 52188561, "body": "@Nav what compiler and settings are you using?  Also see my answer with its example."}, {"owner": {"reputation": 16815, "user_id": 453673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QhMRI.png?s=128&g=1", "display_name": "Nav", "link": "https://stackoverflow.com/users/453673/nav"}, "edited": false, "score": 0, "creation_date": 1440471675, "post_id": 32104889, "comment_id": 52274800, "body": "There&#39;s no support for c++14, so tried c++11. No luck <code>g++    -c -g -std=c++11 -MMD -MP -MF &quot;build&#47;Debug&#47;GNU-Linux-x86&#47;main.o.d&quot; -o build&#47;Debug&#47;GNU-Linux-x86&#47;main.o main.cpp cc1plus: error: unrecognized command line option &quot;-std=c++11&quot;</code>. Had tried your example from corilu. I have <code>gcc version 4.4.7 20120313 (Red Hat 4.4.7-11) (GCC) </code> (actually on Centos 6.5, 64 bit). <code>std::ref</code> is too new I guess. Perhaps a different, older technique would help?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 16815, "user_id": 453673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QhMRI.png?s=128&g=1", "display_name": "Nav", "link": "https://stackoverflow.com/users/453673/nav"}, "edited": false, "score": 0, "creation_date": 1440503679, "post_id": 32104889, "comment_id": 52290720, "body": "@Nav Have you tried compiling with <code>-std=c++0x</code>?  Also can you upgrade your compiler?  If not you can make your own <a href=\"http://en.cppreference.com/w/cpp/utility/functional/ref\" rel=\"nofollow noreferrer\"><code>std::ref()</code></a> and <a href=\"http://en.cppreference.com/w/cpp/utility/functional/reference_wrapper\" rel=\"nofollow noreferrer\"><code>std::reference_wrapper</code></a>."}, {"owner": {"reputation": 16815, "user_id": 453673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QhMRI.png?s=128&g=1", "display_name": "Nav", "link": "https://stackoverflow.com/users/453673/nav"}, "edited": false, "score": 0, "creation_date": 1440559924, "post_id": 32104889, "comment_id": 52318554, "body": "Tried creating my own reference wrapper with the code on the std::reference_wrapper page. I had to comment out the C++11 specific code, but it still didn&#39;t work. If I could just understand what exactly is it that forces the thread to use the same reference instead of creating a new object, I could do this on my own. I assumed it would be the <code>std::addressof</code> which does it with <code>reinterpret_cast</code>. Perhaps what I&#39;d like more than a direct solution, is an understanding of how std::ref accomplishes the task."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 16815, "user_id": 453673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QhMRI.png?s=128&g=1", "display_name": "Nav", "link": "https://stackoverflow.com/users/453673/nav"}, "edited": false, "score": 0, "creation_date": 1440590419, "post_id": 32104889, "comment_id": 52334519, "body": "@Nav Can you post the code that you tried that didn&#39;t work?  I would like to take a look at it.  If you don&#39;t want to edit it into the answer you could share a link to it using coliru or ideone.  A reference wrapper is nothing special.  it store a pointer to an object and has an implicit conversion function that makes it act like a normal reference."}, {"owner": {"reputation": 16815, "user_id": 453673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QhMRI.png?s=128&g=1", "display_name": "Nav", "link": "https://stackoverflow.com/users/453673/nav"}, "edited": false, "score": 0, "creation_date": 1440870794, "post_id": 32104889, "comment_id": 52455611, "body": "Here it is: <a href=\"http://coliru.stacked-crooked.com/a/36d70da08c1210f1\" rel=\"nofollow noreferrer\">coliru.stacked-crooked.com/a/36d70da08c1210f1</a>. Also updated it in my question."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 2, "last_activity_date": 1440193177, "last_edit_date": 1440193177, "creation_date": 1440015461, "answer_id": 32104889, "question_id": 32104823, "link": "https://stackoverflow.com/questions/32104823/how-to-pass-an-operator-of-a-functor-allocated-on-the-heap-to-a-thread/32104889#32104889", "title": "How to pass an operator()() of a functor allocated on the heap, to a thread?", "body": "<p><code>thread</code> takes it parameters by value.  If you need the  thread to get the same object that you have in the calling function then you need to wrap it with <a href=\"http://en.cppreference.com/w/cpp/utility/functional/ref\" rel=\"nofollow\"><code>std::ref</code></a></p>\n\n<p>In this case to run the code and get some output we can run:</p>\n\n<pre><code>int main()\n{\n    using namespace std::literals;\n    F foo;\n    std::thread t(std::ref(foo));\n    std::this_thread::sleep_for(1ms);\n    foo.stopIt();\n    t.join();\n}\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/54443f1b403f8700\" rel=\"nofollow\">Live Example</a></kbd></p>\n"}], "owner": {"reputation": 16815, "user_id": 453673, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QhMRI.png?s=128&g=1", "display_name": "Nav", "link": "https://stackoverflow.com/users/453673/nav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1440870755, "creation_date": 1440015245, "last_edit_date": 1440870755, "question_id": 32104823, "link": "https://stackoverflow.com/questions/32104823/how-to-pass-an-operator-of-a-functor-allocated-on-the-heap-to-a-thread", "title": "How to pass an operator()() of a functor allocated on the heap, to a thread?", "body": "<p>For the functor:</p>\n\n<pre><code>class F\n{\nbool proceed;\npublic:\nF():proceed(true) {}\nvoid operator()() \n{\n while(proceed) {std::cout&lt;&lt;\".\";}\n std::cout&lt;&lt;\"stopped\\n\";\n}\nvoid stopIt() {proceed=false;}\n};\n</code></pre>\n\n<p>I'm able to create an object and pass it to a <a href=\"https://www.threadingbuildingblocks.org/docs/help/reference/appendices/compatibility_features/tbb_thread_cls.htm\" rel=\"nofollow\">TBB thread</a> (it's now under the std namespace):  </p>\n\n<pre><code>F foo;\nstd::thread t(foo);\n</code></pre>\n\n<p>This works fine, except that when I call <code>foo.stopIt()</code>, the while loop does not stop. So I assume the <code>foo</code> I'm passing to the thread actually creates a new object.  </p>\n\n<p>To prevent that, I tried:  </p>\n\n<pre><code>F* foo = new F();\n</code></pre>\n\n<p>But <code>std::thread t(foo);</code> doesn't work. <code>t(*foo)</code> doesn't work. <code>t(&amp;foo)</code> doesn't work. <code>t(foo-&gt;())</code> doesn't. Tried a few other techniques too. No luck.  </p>\n\n<p>So how can I pass the <code>operator()()</code> function to the thread and be able to call <code>stopIt()</code> later?</p>\n\n<p>UPDATE:  </p>\n\n<p>In response to Nathan's answer, this is what I tried:<br>\n<a href=\"http://coliru.stacked-crooked.com/a/36d70da08c1210f1\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/36d70da08c1210f1</a>  </p>\n\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;list&gt;\n#include &lt;vector&gt;\n#include &lt;iostream&gt;\n#include &lt;numeric&gt;\n//#include &lt;random&gt;\n#include &lt;functional&gt;\n#include &lt;tbb/compat/thread&gt;\n\ntemplate&lt; class T &gt;\nT* addressof(T&amp; arg)\n{\n    return reinterpret_cast&lt;T*&gt;(\n               &amp;const_cast&lt;char&amp;&gt;(\n                  reinterpret_cast&lt;const volatile char&amp;&gt;(arg)));\n}\n\ntemplate &lt;class T&gt;\nclass reference_wrapper {\npublic:\n  // types\n  typedef T type;\n\n  // construct/copy/destroy\n  reference_wrapper(T&amp; ref) : _ptr(addressof(ref)) {}\n  //reference_wrapper(T&amp;&amp;) = delete;\n  //reference_wrapper(const reference_wrapper&amp;) noexcept = default;\n\n  // assignment\n  //reference_wrapper&amp; operator=(const reference_wrapper&amp; x) noexcept = default;\n\n  // access\n  operator T&amp; () const { return *_ptr; }\n  T&amp; get() const { return *_ptr; }\n\nprivate:\n  T* _ptr;\n};\n\nclass F\n{\n    bool proceed;\npublic:\n    F():proceed(true) {}\n    void operator()()\n    {\n        while(proceed) {std::cout&lt;&lt;\".\";}\n        std::cout&lt;&lt;\"stopped\\n\";\n    }\n    void stopIt() {proceed=false;}\n};\n\n\nclass ref {\npublic:\n  typedef F type;\n  ref(F&amp; ref) : _ptr(addressof(ref)) {}\n  operator F&amp; () const { return *_ptr; }\n  F&amp; get() const { return *_ptr; }\nprivate:\n  F* _ptr;\n};\n\n\n\nint main()\n{\n    //using namespace std::literals;\n    F foo;\n    std::thread t(ref(foo));\n    std::cout&lt;&lt;\"running\";\n    //std::this_thread::sleep_for(1ms);\n    foo.stopIt();\n    //t.join();\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "node.js", "android-ndk", "libc++"], "comments": [{"owner": {"reputation": 2580, "user_id": 8295283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82e91e74e9091501247d9b71125c0eee?s=128&d=identicon&r=PG", "display_name": "Arnold Schrijver", "link": "https://stackoverflow.com/users/8295283/arnold-schrijver"}, "edited": false, "score": 0, "creation_date": 1502550466, "post_id": 32104653, "comment_id": 78261724, "body": "Since you asked this question many approaches no longer work. I created a recent investigation of some options: <a href=\"https://stackoverflow.com/a/45649995/8295283\">Viable options to running NodeJS on Android (Aug 2017)</a>. And yes, this is possible without rooting (even an install via Termux is)."}], "answers": [{"comments": [{"owner": {"reputation": 2580, "user_id": 8295283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82e91e74e9091501247d9b71125c0eee?s=128&d=identicon&r=PG", "display_name": "Arnold Schrijver", "link": "https://stackoverflow.com/users/8295283/arnold-schrijver"}, "edited": false, "score": 0, "creation_date": 1502550351, "post_id": 32118915, "comment_id": 78261687, "body": "Unfortunately JXCore is no longer maintained."}], "tags": [], "owner": {"reputation": 1203, "user_id": 577674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03a2f97bb4a62dc95bd64af59b4e4a9?s=128&d=identicon&r=PG", "display_name": "Nuray Altin", "link": "https://stackoverflow.com/users/577674/nuray-altin"}, "is_accepted": false, "score": 0, "last_activity_date": 1440075529, "creation_date": 1440075529, "answer_id": 32118915, "question_id": 32104653, "link": "https://stackoverflow.com/questions/32104653/can-i-install-node-js-on-android-either-rooted-or-not/32118915#32118915", "title": "Can I install Node.js on Android either rooted or not?", "body": "<p>It doesn't matter rooted or not. </p>\n\n<p>Node.JS doesn't support mobile targets primarily. JXcore is a fork of node.js that works on both desktop and mobile OSes. JXcore's primary target is mobile, you can find JXcore Android release binaries from <a href=\"http://jxcore.com/downloads\" rel=\"nofollow\">this link</a></p>\n"}, {"comments": [{"owner": {"reputation": 390, "user_id": 12663117, "user_type": "registered", "profile_image": "https://graph.facebook.com/160044918739032/picture?type=large", "display_name": "Nathan Toulbert", "link": "https://stackoverflow.com/users/12663117/nathan-toulbert"}, "edited": false, "score": 0, "creation_date": 1607896808, "post_id": 65281079, "comment_id": 115410131, "body": "Link didn&#39;t work for Google Play. You can search Dory node on the Play Store. Alternatively, the developer&#39;s account name is tempeage.io"}], "tags": [], "owner": {"reputation": 390, "user_id": 12663117, "user_type": "registered", "profile_image": "https://graph.facebook.com/160044918739032/picture?type=large", "display_name": "Nathan Toulbert", "link": "https://stackoverflow.com/users/12663117/nathan-toulbert"}, "is_accepted": false, "score": 1, "last_activity_date": 1607896962, "last_edit_date": 1607896962, "creation_date": 1607896357, "answer_id": 65281079, "question_id": 32104653, "link": "https://stackoverflow.com/questions/32104653/can-i-install-node-js-on-android-either-rooted-or-not/65281079#65281079", "title": "Can I install Node.js on Android either rooted or not?", "body": "<p>It [is possible] 1 to get node on Android. In fact, in 2020, at the time of this writing, there is an app available through Google Play store. The app called Dory node js. It comes with not only node, but also npm, password encrypted dev server (completely set up, you need only flip a switch in the context menu - and set up the password, especially if port forwarding).</p>\n<p>There are a few minor issues, due to Android's security policies (namely file access.) Also I read in the reviews that the version is outdated. But, as it comes with npm,  an issue.</p>\n<p>Keep in mind, I have no idea who created this app. I researched it myself for about 30 minutes, and I saw a lot of decent reviews, with nothing that scared me. With that said, as I don't know the source, I am not recommending it, just letting everyone know it's there. As always you need to do the research, especially as you'll have to give the app the read write permission for npm.</p>\n"}], "owner": {"reputation": 21, "user_id": 5244926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4e8a2e289ecbcd77a976e7e16448a8?s=128&d=identicon&r=PG&f=1", "display_name": "Tux Tuxedo", "link": "https://stackoverflow.com/users/5244926/tux-tuxedo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1607896962, "creation_date": 1440014667, "last_edit_date": 1502584937, "question_id": 32104653, "link": "https://stackoverflow.com/questions/32104653/can-i-install-node-js-on-android-either-rooted-or-not", "title": "Can I install Node.js on Android either rooted or not?", "body": "<p>I'm Trying to install node on android</p>\n\n<p>I have tried:</p>\n\n<ul>\n<li>Complete Linux rooted with Ubuntu and debian 4. Always getting troubles with repositories not followed and/or troubleshots</li>\n<li>Linux deploy with one/two distros</li>\n<li>Gnuroot with fedora remix\nHaving troubles with GCC not install\u00e9s ans yum troubleshots probably due to repositories.</li>\n</ul>\n\n<p>I have some questions:</p>\n\n<ul>\n<li>Has anyone tried using Debian without Root and installing node?</li>\n<li>Does anyone know if it might work on Ubuntu touch?</li>\n<li>There is a post on how to compile node but I don't understand why jxcore is mentioned in comments and why there is an Android version of jxcore when it's not an APK?</li>\n</ul>\n"}, {"tags": ["c++", "libcurl"], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 4, "last_activity_date": 1440015118, "creation_date": 1440015118, "answer_id": 32104789, "question_id": 32104632, "link": "https://stackoverflow.com/questions/32104632/libcurl-how-to-catch-both-400-not-as-a-part-of-curle-http-returned-error-error/32104789#32104789", "title": "LibCurl how to catch both 400, not as a part of CURLE_HTTP_RETURNED_ERROR error", "body": "<p><a href=\"http://curl.haxx.se/libcurl/c/curl_easy_getinfo.html\" rel=\"nofollow\"><code>curl_easy_getinfo</code></a> allows you to get the response code.</p>\n\n<pre><code>long responseCode;\ncurlCode = curl_easy_perform(request);\ncurl_easy_getinfo(request, CURLINFO_RESPONSE_CODE, &amp;responseCode);\nif (responseCode == 400) {\n    // handle error 400\n} else {\n    switch (curlCode) {\n        ...\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 5244944, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09480bd4dc5a8f8ea91b054f253f19f0?s=128&d=identicon&r=PG&f=1", "display_name": "RSH", "link": "https://stackoverflow.com/users/5244944/rsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 985, "favorite_count": 0, "accepted_answer_id": 32104789, "answer_count": 1, "score": 1, "last_activity_date": 1440015118, "creation_date": 1440014567, "last_edit_date": 1440014665, "question_id": 32104632, "link": "https://stackoverflow.com/questions/32104632/libcurl-how-to-catch-both-400-not-as-a-part-of-curle-http-returned-error-error", "title": "LibCurl how to catch both 400, not as a part of CURLE_HTTP_RETURNED_ERROR error", "body": "<p>In C++ Libcurl library, distinguish http error 400 from 404?\nI have following code. I'm catching <code>&gt;=400</code> using <code>CURLE_HTTP_RETURNED_ERROR</code> but I want to catch error <code>400</code> separately before <code>CURLE_HTTP_RETURNED_ERROR</code> case. Is there a way to do that?</p>\n\n<pre><code>curlCode = curl_easy_perform(request);\n.....\nswitch(curlCode)\n{\n   case CURLE_HTTP_RETURNED_ERROR:\n\n}\n</code></pre>\n"}, {"tags": ["android", "c++", "opengl-es"], "comments": [{"owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1440014788, "post_id": 32104629, "comment_id": 52103892, "body": "Where do you create the shaders / call glCreateShader? I would guess that either vertexShaderId is not of type GL_VERTEX_SHADER or fragmentShaderId is not of type GL_FRAGMENT_SHADER."}, {"owner": {"reputation": 111, "user_id": 3128485, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e198380d899ae387872578987ff94d48?s=128&d=identicon&r=PG&f=1", "display_name": "brainfreak", "link": "https://stackoverflow.com/users/3128485/brainfreak"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1440015159, "post_id": 32104629, "comment_id": 52104119, "body": "I pass in GL_VERTEX_SHADER or GL_FRAGMENT_SHADER based on the source."}, {"owner": {"reputation": 111, "user_id": 3128485, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e198380d899ae387872578987ff94d48?s=128&d=identicon&r=PG&f=1", "display_name": "brainfreak", "link": "https://stackoverflow.com/users/3128485/brainfreak"}, "reply_to_user": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "edited": false, "score": 0, "creation_date": 1440015922, "post_id": 32104629, "comment_id": 52104536, "body": "Nevermind. Didn&#39;t think about the return values very clearly. Instead of returning the id of shader, i return some junk."}], "answers": [{"tags": [], "owner": {"reputation": 18062, "user_id": 2579738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oXata.png?s=128&g=1", "display_name": "BDL", "link": "https://stackoverflow.com/users/2579738/bdl"}, "is_accepted": true, "score": 1, "last_activity_date": 1440015684, "creation_date": 1440015684, "answer_id": 32104946, "question_id": 32104629, "link": "https://stackoverflow.com/questions/32104629/opengl-es-2-0-shader-linking-fail/32104946#32104946", "title": "OpenGL ES 2.0: Shader Linking Fail", "body": "<p>The problem lies in the last line of <code>compileShader</code>: Here you perform a bitwise and operation on the shaderObjectId (an arbitrary number > 0) and compilationStatus (GL_TRUE or GL_FALSE). Since GL_TRUE = 1 and GL_FALSE = 0, the result of this operation can only be 0 or 1.</p>\n\n<p>Lets just have a look at the GL_TRUE case, since with GL_FALSE the result will be 0 anyway. </p>\n\n<pre><code>For every even number x:\nx &amp; 1 == 1\nFor every odd number x:\nx &amp; 1 == 0\n</code></pre>\n\n<p>This means, if shaderObjectId = 3 (for example), the function will return 1.</p>\n"}], "owner": {"reputation": 111, "user_id": 3128485, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/e198380d899ae387872578987ff94d48?s=128&d=identicon&r=PG&f=1", "display_name": "brainfreak", "link": "https://stackoverflow.com/users/3128485/brainfreak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 32104946, "answer_count": 1, "score": 1, "last_activity_date": 1440019617, "creation_date": 1440014556, "last_edit_date": 1440019617, "question_id": 32104629, "link": "https://stackoverflow.com/questions/32104629/opengl-es-2-0-shader-linking-fail", "title": "OpenGL ES 2.0: Shader Linking Fail", "body": "<p>I am trying to make a simple android program that uses openGL. So far, the shader linking fails and the Log info is,  </p>\n\n<p><strong>LOG</strong></p>\n\n<pre><code>Link info\n    ---------\n    OpenGL ES programs must have both a vertex and a fragment shader or a compute shader.  \n</code></pre>\n\n<p>The shader compilation works fine. Here is the shader code:  </p>\n\n<p><strong>Vertex Shader</strong></p>\n\n<pre><code>attribute vec4 a_Position;\n\nvoid main() {\n    gl_Position = a_Position;\n    gl_PointSize = 10.0;\n}  \n</code></pre>\n\n<p><strong>Fragment Shader</strong><br>\nprecision mediump float;</p>\n\n<pre><code>uniform vec4 u_Color;\n\nvoid main()\n{\n    gl_FragColor = u_Color;\n}  \n</code></pre>\n\n<p>The steps that i am taking are,  </p>\n\n<pre><code>final int programObjectId = glCreateProgram();\n\nif(programObjectId == 0)\n   return 0;\n\nglAttachShader(programObjectId, vertexShaderId);\nglAttachShader(programObjectId, fragmentShaderId);\nglLinkProgram(programObjectId);\n</code></pre>\n\n<p><strong>Compilation Code</strong>  </p>\n\n<pre><code>public static int compileShader(int type, String code) {\n\n    final int shaderObjectId = glCreateShader(type);\n\n    glShaderSource(shaderObjectId, code);\n    glCompileShader(shaderObjectId);\n    int compilationStatus[] = new int[1];\n    glGetShaderiv(shaderObjectId, GL_COMPILE_STATUS, compilationStatus, 0);\n\n    if(compilationStatus[0] == 0)\n        glDeleteShader(shaderObjectId);\n    return shaderObjectId &amp; compilationStatus[0];\n}\n</code></pre>\n\n<p>I am not sure how to solve this problem.</p>\n"}, {"tags": ["c++", "vector", "graph", "2d", "dijkstra"], "answers": [{"comments": [{"owner": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "edited": false, "score": 0, "creation_date": 1440015041, "post_id": 32104648, "comment_id": 52104034, "body": "If I use the 2D vector the way you suggested, wouldn&#39;t the indexes of <code>vertexA</code> and <code>vertexB</code> have to be some sort of integer data type rather than a <code>vertex</code> object?"}, {"owner": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "edited": false, "score": 0, "creation_date": 1440015450, "post_id": 32104648, "comment_id": 52104281, "body": "Oh I see. Also, what would be a better method to implement for sparse graphs in order to conserve memory? And I&#39;m not talking about using a different shortest path algorithm."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "edited": false, "score": 0, "creation_date": 1440070442, "post_id": 32104648, "comment_id": 52126718, "body": "There are many ways to store sparse matrices efficiently, these are called <a href=\"https://en.wikipedia.org/wiki/Sparse_matrix#Storing_a_sparse_matrix\" rel=\"nofollow noreferrer\">sparse storage schemes</a>. The way I suggested with <code>std::map</code> would be similar to the above link&#39;s &quot;Dictionary of keys&quot;. These are independent of your shortest path algorithm, you can still use Dijkstra, these storage schemes merely modify how you look up an edge/node."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 1, "last_activity_date": 1440015176, "last_edit_date": 1440015176, "creation_date": 1440014626, "answer_id": 32104648, "question_id": 32104471, "link": "https://stackoverflow.com/questions/32104471/how-to-represent-edge-weights-in-dijkstras-algorithm-using-2d-vector/32104648#32104648", "title": "How to represent edge weights in Dijkstra&#39;s algorithm using 2D vector", "body": "<p>You could represent an edge as</p>\n\n<pre><code>std::pair&lt;int, int&gt;  // first = source, second = destination\n</code></pre>\n\n<p>Then your edge weights could be</p>\n\n<pre><code>std::map&lt;std::pair&lt;int, int&gt;, int&gt; weights;\n</code></pre>\n\n<p>Where the key would be your edge (designated by the start and end node) and the value would be the cost. So you could say</p>\n\n<pre><code>int edgeWeightOfTwoVertexes = weights[{vertexA, vertexB}];\n</code></pre>\n\n<p>Otherwise if you wanted to stick with a 2D vector, you'd have a </p>\n\n<pre><code>std::vector&lt;std::vector&lt;int&gt;&gt; weights;\n</code></pre>\n\n<p>Then you could access that like</p>\n\n<pre><code>int edgeWeightOfTwoVertexes = weights[vertexA][vertexB];\n</code></pre>\n\n<p>but know that in general these graphs end up <strong>very</strong> sparse and this is not an efficient use of memory.</p>\n\n<p><strong>Edit</strong><br>\nIf your vertexes are instances of some <code>Vertex</code> class, I would give each <code>Vertex</code> an id that goes from <code>0</code> to Number of vertexes, then you can use these to index</p>\n\n<pre><code>weights[vertexA.id][vertexB.id]\n</code></pre>\n"}], "owner": {"reputation": 2186, "user_id": 3851567, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/mgvtP.jpg?s=128&g=1", "display_name": "David Velasquez", "link": "https://stackoverflow.com/users/3851567/david-velasquez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 590, "favorite_count": 0, "accepted_answer_id": 32104648, "answer_count": 1, "score": 0, "last_activity_date": 1440015176, "creation_date": 1440014002, "last_edit_date": 1440014461, "question_id": 32104471, "link": "https://stackoverflow.com/questions/32104471/how-to-represent-edge-weights-in-dijkstras-algorithm-using-2d-vector", "title": "How to represent edge weights in Dijkstra&#39;s algorithm using 2D vector", "body": "<p>I want to be able to access the weights of an edge by doing this:</p>\n\n<p><code>int edgeWeightOfTwoVertexes = weights[vertexA][vertexB];</code></p>\n\n<p><code>vertexA</code> and <code>vertexB</code> are objects from my <code>vertex</code> class. So how would I initialize the 2D vector to get this to work?</p>\n\n<p>I've never seen a vector/array element being accessed by a non integer value so I would like to know if something like this is possible. If not, what other suggestions are there to store and quickly access the edge weights?</p>\n"}, {"tags": ["c++", "floating-point", "double"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 1, "creation_date": 1440013813, "post_id": 32104152, "comment_id": 52103358, "body": "Your test has a flaw: any calculation is float"}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "edited": false, "score": 0, "creation_date": 1440013962, "post_id": 32104152, "comment_id": 52103436, "body": "The &quot;more precise answer&quot; exactly matches what Gnome Calculator gives (probably not a coincidence). @n.m. , I think you better explain why it&#39;s wrong."}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "edited": false, "score": 0, "creation_date": 1440014026, "post_id": 32104152, "comment_id": 52103465, "body": "I can&#39;t work out why the float/double numbers are different at all? Converting float to double ought to be harmless."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "edited": false, "score": 0, "creation_date": 1440014058, "post_id": 32104152, "comment_id": 52103481, "body": "The close does not apply to this question"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1440014585, "post_id": 32104152, "comment_id": 52103788, "body": "Maybe this article about <a href=\"http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html\" rel=\"nofollow noreferrer\">What Every Computer Scientist Should Know About Floating Point</a> should sum things up (and close this question)."}, {"owner": {"reputation": 83, "user_id": 2275275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0085b95a12d4d4e6aeb25b1b832568?s=128&d=identicon&r=PG", "display_name": "perlik", "link": "https://stackoverflow.com/users/2275275/perlik"}, "edited": false, "score": 0, "creation_date": 1440014640, "post_id": 32104152, "comment_id": 52103817, "body": "@Dieter, I don&#39;t understand what flaw do you mean. I&#39;ve just convert float to double and got worse result."}, {"owner": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 1, "creation_date": 1440015033, "post_id": 32104152, "comment_id": 52104028, "body": "@perlik - x_d should be calculated using double precision: double x_d = (double)(b2 - b1) / (double)(k1 - k2); With this change for x_d and y_d I get 2.1917649333075584 -230.28223468006945 ."}, {"owner": {"reputation": 83, "user_id": 2275275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0085b95a12d4d4e6aeb25b1b832568?s=128&d=identicon&r=PG", "display_name": "perlik", "link": "https://stackoverflow.com/users/2275275/perlik"}, "reply_to_user": {"reputation": 22874, "user_id": 3282056, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IXonK.jpg?s=128&g=1", "display_name": "rcgldr", "link": "https://stackoverflow.com/users/3282056/rcgldr"}, "edited": false, "score": 0, "creation_date": 1440015537, "post_id": 32104152, "comment_id": 52104328, "body": "@rcgldr, yes it&#39;s a true. But when I use x_f and calculate float&#39;s y_f, why I get better result than with x_d (wich is the same as x_f, because double is wider) and y_d = x_d * k1 (which also casts to (double)k1 and it equals to (float)k1). I mean that double is at least as good as float."}, {"owner": {"reputation": 7214, "user_id": 392585, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5ac7b1da0f2e9107b5020f88023a15e5?s=128&d=identicon&r=PG", "display_name": "Simon Byrne", "link": "https://stackoverflow.com/users/392585/simon-byrne"}, "edited": false, "score": 0, "creation_date": 1440017985, "post_id": 32104152, "comment_id": 52105650, "body": "@perlik It&#39;s probably due to the rounding errors being in opposite directions, and so happen to cancel each other out."}, {"owner": {"reputation": 13141, "user_id": 1834147, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a0991b9f14a94a126187ac3aa342d3d2?s=128&d=identicon&r=PG", "display_name": "tmyklebu", "link": "https://stackoverflow.com/users/1834147/tmyklebu"}, "reply_to_user": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1440020712, "post_id": 32104152, "comment_id": 52106896, "body": "@ThomasMatthews: Do you have a specific passage in that 100-page document you&#39;re trying to reference, or are you just trying to be a jerk?"}], "answers": [{"tags": [], "owner": {"reputation": 6223, "user_id": 2726892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/DE8Dn.png?s=128&g=1", "display_name": "MooseBoys", "link": "https://stackoverflow.com/users/2726892/mooseboys"}, "is_accepted": true, "score": 3, "last_activity_date": 1440020307, "creation_date": 1440020307, "answer_id": 32106077, "question_id": 32104152, "link": "https://stackoverflow.com/questions/32104152/doubles-multiplication-is-less-precise-than-floats-one/32106077#32106077", "title": "Double&#39;s multiplication is less precise than float&#39;s one", "body": "<p>It's a coincidence that the rounding cancels out and ends up being closer with <code>float</code> than with <code>double</code>.  The origin of the difference is that <code>x_d * k1</code> is promoted to <code>double</code> whereas <code>x_f * k1</code> is evaluated as <code>float</code>.</p>\n\n<p>To provide a simpler example of how this kind of rounding can cause a lower-precision type to produce a more accurate answer, consider two new numeric types called <code>sf2</code> and <code>sf3</code>, each of which store base-10 numbers, with 2 and 3 significant digits, respectively.  Then consider the following calculation:</p>\n\n<pre><code>// Calculate (5 / 4) * 8. Expected result: 10\nsf2 x_2 = 5.0 / 4.0; // 1.3\nsf2 y_2 = x_2 * 8.0; // 10\nsf3 x_3 = x_2; // 1.30\nsf3 y_3 = x_3 * 8.0; // 10.4\n</code></pre>\n\n<p>Note that using the above types, even though all <code>sf2</code> values are representable in the <code>sf3</code> type, the <code>sf2</code> calculation is more accurate.  This is because the round-up of <code>1.25</code> to <code>1.3</code> when calculating <code>x_2</code> is exactly canceled when rounding <code>10.4</code> to <code>10</code>.  But when the second calculation is done using the <code>sf3</code> type, the initial round-up is persisted but the round-down no longer occurs.</p>\n\n<p>This is an example of the many pitfalls you will encounter when dealing with floating point types.</p>\n"}], "owner": {"reputation": 83, "user_id": 2275275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b0085b95a12d4d4e6aeb25b1b832568?s=128&d=identicon&r=PG", "display_name": "perlik", "link": "https://stackoverflow.com/users/2275275/perlik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 32106077, "answer_count": 1, "score": 2, "last_activity_date": 1440020307, "creation_date": 1440012844, "last_edit_date": 1440013823, "question_id": 32104152, "link": "https://stackoverflow.com/questions/32104152/doubles-multiplication-is-less-precise-than-floats-one", "title": "Double&#39;s multiplication is less precise than float&#39;s one", "body": "<p>Suppose we have the equation y = k1 * x + b1 = k2 * x + b2. Let's calculate x in floats. I know that it's a bad choice, but I want to understand the reason for results I get. Also let's calculate y using this x and then do the same, but with double(x). Consider this code:</p>\n\n<pre><code>std::cout.precision(20);\n\nfloat k1, b1, k2, b2;\nstd::cin &gt;&gt; k1 &gt;&gt; b1 &gt;&gt; k2 &gt;&gt; b2;\n\nfloat x_f = (b2 - b1) / (k1 - k2);\ndouble x_d = x_f;\nprintFloat(x_f); // my function which prints number and it's binary representation\nprintDouble(x_d);\nfloat y_f = x_f * k1 + b1;\ndouble y_d = x_d * k1 + b1;\nprintFloat(y_f);\nprintDouble(y_d);\n</code></pre>\n\n<p>And with k1 = -4653, b1 = 9968, k2 = 520, b2 = -1370 surprisingly got the following results:</p>\n\n<pre><code>x_f = 2.19176483154296875 01000000000011000100010111100000\nx_d = 2.19176483154296875 0100000000000001100010001011110000000000000000000000000000000000\ny_f = -230.2822265625 11000011011001100100100001000000\ny_d = -230.28176116943359375 1100000001101100110010010000010000110000000000000000000000000000\n</code></pre>\n\n<p>Whereas more precise answer (calculated with Python Decimal) is:</p>\n\n<pre><code>x = 2.191764933307558476705973323023390682389\ny = -230.28223468006959211289387202783684516\n</code></pre>\n\n<p>And the float's answer is closer than the double's one! Why is this happening? I've debugged with gdb (compiled on 64-bit Ubuntu 14.04 g++ 4.8.4) and viewed the instructions, and they are all ok, so it's due to multiplication.</p>\n"}, {"tags": ["c++", "c", "recursion"], "comments": [{"owner": {"reputation": 182843, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 6, "creation_date": 1440012930, "post_id": 32104129, "comment_id": 52102786, "body": "While you don&#39;t understand recursion read this sentence from the beginning."}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "edited": false, "score": 1, "creation_date": 1440012985, "post_id": 32104129, "comment_id": 52102815, "body": "Is this a Stackreview question? What problem are you having with the code, or is this a philosophical enquiry?"}, {"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 3, "creation_date": 1440013053, "post_id": 32104129, "comment_id": 52102847, "body": "Isn&#39;t the <a href=\"https://en.wikipedia.org/wiki/Recursion#Formal_definitions\" rel=\"nofollow noreferrer\">formal recursion definition</a> clearly answer the question?"}, {"owner": {"reputation": 10850, "user_id": 408351, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/46941f6d7ab8384ffc73ce5a4c87885d?s=128&d=identicon&r=PG", "display_name": "mort", "link": "https://stackoverflow.com/users/408351/mort"}, "reply_to_user": {"reputation": 182843, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "edited": false, "score": 0, "creation_date": 1440013057, "post_id": 32104129, "comment_id": 52102849, "body": "@ElliottFrisch: That&#39;s more like a <code>while</code> loop..."}, {"owner": {"reputation": 20105, "user_id": 451540, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/jajjn.png?s=128&g=1", "display_name": "thumbmunkeys", "link": "https://stackoverflow.com/users/451540/thumbmunkeys"}, "edited": false, "score": 0, "creation_date": 1440013094, "post_id": 32104129, "comment_id": 52102871, "body": "that question is better suited for <a href=\"http://programmers.stackexchange.com\">programmers.stackexchange.com</a>"}, {"owner": {"reputation": 31114, "user_id": 4142924, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmZTf.png?s=128&g=1", "display_name": "Weather Vane", "link": "https://stackoverflow.com/users/4142924/weather-vane"}, "reply_to_user": {"reputation": 10850, "user_id": 408351, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/46941f6d7ab8384ffc73ce5a4c87885d?s=128&d=identicon&r=PG", "display_name": "mort", "link": "https://stackoverflow.com/users/408351/mort"}, "edited": false, "score": 1, "creation_date": 1440013157, "post_id": 32104129, "comment_id": 52102908, "body": "@mort or a <code>do</code> loop?"}, {"owner": {"reputation": 182843, "user_id": 2970947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HAq55.png?s=128&g=1", "display_name": "Elliott Frisch", "link": "https://stackoverflow.com/users/2970947/elliott-frisch"}, "reply_to_user": {"reputation": 10850, "user_id": 408351, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/46941f6d7ab8384ffc73ce5a4c87885d?s=128&d=identicon&r=PG", "display_name": "mort", "link": "https://stackoverflow.com/users/408351/mort"}, "edited": false, "score": 0, "creation_date": 1440015975, "post_id": 32104129, "comment_id": 52104569, "body": "@mort no. It&#39;s a recursive definition of recursion. Syntax is not semantics."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 2, "creation_date": 1440021513, "post_id": 32104129, "comment_id": 52107221, "body": "<a href=\"http://stackoverflow.com/questions/32104129/what-defines-a-recursive-function\" title=\"what defines a recursive function\">stackoverflow.com/questions/32104129/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 325120, "user_id": 501557, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/e4bac7ebd5f5a06c716f508af656e24b?s=128&d=identicon&r=PG", "display_name": "templatetypedef", "link": "https://stackoverflow.com/users/501557/templatetypedef"}, "edited": false, "score": 0, "creation_date": 1440032479, "post_id": 32104369, "comment_id": 52110081, "body": "Great answer. The distinction between the mathematical definition and the implementation is often overlooked."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 1, "creation_date": 1440064067, "post_id": 32104369, "comment_id": 52122579, "body": "And in fact some algorithms are implemented in a way that&#39;s <i>both</i> recursive and iterative. Sorting, for instance, is typically defined recursively down to 1 element which by definition is always sorted. Real implementations recurse down to 8 elements or so, and then switch to an iterative sort. This is significantly faster in practice as a lot of time in sorting is spent on sorting all those small subsets."}], "tags": [], "owner": {"reputation": 20994, "user_id": 2170192, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JsKlq.png?s=128&g=1", "display_name": "Alex Shesterov", "link": "https://stackoverflow.com/users/2170192/alex-shesterov"}, "is_accepted": true, "score": 10, "last_activity_date": 1440014827, "last_edit_date": 1440014827, "creation_date": 1440013603, "answer_id": 32104369, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function/32104369#32104369", "title": "what defines a recursive function?", "body": "<p>There's a difference between a <em>recursive definition</em> of a function, and its <em>recursive implementation</em> (or algorithm). </p>\n\n<p>A function may be mathematically defined in a recursive manner, but an algorithm (i.e. implementation) which calculates this function may well be non-recursive, and vice versa. </p>\n\n<p>Note that there may be different mathematical definitions and different algorithms for the same function. </p>\n\n<hr>\n\n<p>In the examples you've provided, it's totally obvious that <em>CASE 1-implementation</em> is recursive, while <em>CASE 2-</em> and <em>CASE 3-implementations</em> are not recursive, regardless if the mathematical definition of the function was recursive or not. </p>\n\n<hr>\n\n<p><em>P.S. to keep it in the question's scope, I intentionally didn't touch direct/indirect recursion, nor some pure functional languages which express iterations through recursion only.</em> </p>\n"}, {"tags": [], "owner": {"reputation": 3667, "user_id": 3288910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b2c2b8044eca80b9a707c716c530d9f5?s=128&d=identicon&r=PG", "display_name": "Jason", "link": "https://stackoverflow.com/users/3288910/jason"}, "is_accepted": false, "score": 1, "last_activity_date": 1440022296, "last_edit_date": 1440022296, "creation_date": 1440017756, "answer_id": 32105524, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function/32105524#32105524", "title": "what defines a recursive function?", "body": "<p>Just to expand a bit on the answer @AlexShesterov gave. explicit recursion is generally expensive, and depending on the use case it risks overflowing the stack, which is why in practice it's commonly avoided through similar transformations to yours.</p>\n\n<p>Consider a <em>tail-recursive</em> function.  A <em>tail-recursive</em> function, like it sounds, is a function that does not keep any state in the function call (the recursive call is at the end).  Compilers will normally implement these as iterative code since it's a trivial transformation.</p>\n\n<p>Recursion is a very succinct way to describe a function though, which is why a lot are described using it (i.e. Fibonacci numbers).  However, in practice it is generally better to reformulate them iteratively.</p>\n\n<p>With Fibonacci numbers you have...</p>\n\n<pre><code>F(0) = 0\nF(1) = 1\nF(N) = F(N-1) + F(N-2)\n</code></pre>\n\n<p>So, normally in C++ it can be implemented recursively with...</p>\n\n<pre><code>size_t fib(size_t n) {\n\n  if (n == 0)\n    return 0;\n\n  if (n == 1)\n    return 1;\n\n   return fib(n - 1) + fib(n - 2);\n}\n</code></pre>\n\n<p>Although, it's inefficient (recomputing values, storing data on call stack, etc...).  One optimization would <em>memoizing</em> the function calls.  However, the actual value can be constructed from the bottom up, so it's better to simply re-formulate it iteratively.</p>\n\n<pre><code>size_t fib(size_t n) {\n\n  size_t p = 0, c = 1;\n\n  if (n == 0)\n    return 0;\n\n   while (n--) {\n\n     size_t t = c;\n\n     c = p + c;\n     p = t;\n   }\n\n  return c;\n}\n</code></pre>\n\n<p>For fun, here's the same thing in haskell...</p>\n\n<pre><code>fib n = fibs !! n\n  where fibs = 0 : 1 : zipWith (+) fibs (tail fibs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44043, "user_id": 1565698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/7dace33805b9dcdec5aa63308daf88dc?s=128&d=identicon&r=PG", "display_name": "Sylwester", "link": "https://stackoverflow.com/users/1565698/sylwester"}, "is_accepted": false, "score": 1, "last_activity_date": 1440019712, "last_edit_date": 1440019712, "creation_date": 1440019399, "answer_id": 32105901, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function/32105901#32105901", "title": "what defines a recursive function?", "body": "<p>The word recursion is used in different contexts. You have the simple definition of a recursive function where a function either calls itself directly of indirectly, but in computer science you also say something about a processes.</p>\n\n<p>An iterative process is basically a primitive recursive function. It is all functions that can be defined by iteration or tail recursion. Examples:</p>\n\n\n\n<pre class=\"lang-c prettyprint-override\"><code>int test (int x)\n{\n  return x + 1;\n}\n\nint factorial(int x)\n{\n   int a = 1;\n   while( x &gt; 1 ) {\n       a *= x;\n   }\n   return a;\n}\n\nint factorial_aux(int x, int a)\n{\n   return x == 0 ? a : factorial_aux(x-1, a*x);\n}\n</code></pre>\n\n<p>A recursive process is an process which always would need some kind of data structure to keep data while it's processing in order to track back. An example of that might be tree traversal:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>Node* search(Node* tree, int needle) {\n  if( tree == NULL  || tree-&gt;value == needle )\n    return tree;\n  else\n    return search(tree-&gt;left, needle) || search(tree-&gt;right, needle);\n}\n\nNode* search(Node* tree, int needle) {\n  Stack&lt;Node *&gt; stack;\n  if( tree )\n    stack.push(tree);\n\n  while ( stack.empty() == false ) {\n      Node* n = stack.pop();\n      if( n-&gt;value == needle )\n          return n;\n\n      if( tree-&gt;right != NULL )\n         stack.push(tree-&gt;right);\n      if( tree-&gt;left != NULL )\n         stack.push(tree-&gt;left);\n  }\n  return NULL;\n}\n</code></pre>\n\n<p>Both of the above are recursive processes. The fact that one use a recursive function and the other an iterative function using a loop does not change the fact that the system stack or explicit stack will grow as the process visits nodes further from the root. </p>\n\n<p>The CPUs usually doesn't support most of these things so a compiler needs to do a lot of \"emulating\" by using primitive instructions and pushing and cleaning up stack for argument passing. Thus under the hood a recursive function is often an iterative procedure with a growing stack.</p>\n\n<p>So to answer your question:</p>\n\n<ul>\n<li><strong>For a process:</strong>  When the space used is constant</li>\n<li><strong>For a function:</strong> When there is no possibility for a direct or indirect self call</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 48201, "user_id": 1250772, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/633e1f643d2c9b043231b4a32b078907?s=128&d=identicon&r=PG", "display_name": "Kaz", "link": "https://stackoverflow.com/users/1250772/kaz"}, "is_accepted": false, "score": 2, "last_activity_date": 1440032053, "last_edit_date": 1440032053, "creation_date": 1440024049, "answer_id": 32106795, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function/32106795#32106795", "title": "what defines a recursive function?", "body": "<p>A solution stops being recursive when at no time, for any inputs, does there appear more than one instance of any function in the activation chain: no function is re-entered.</p>\n\n<p>Is the \"unrolled recursion\" recursion or not? That depends whether we are talking about the concept on which the unrolled solution is based on, or its implementation.</p>\n\n<p>Clearly, the implementation isn't recursive.</p>\n\n<p>Clearly, the unrolled copies of the function are a mechanical repetition based on a recursive implementation, and the solution still expresses some aspects of that solution; when you look at the code, it is obvious how it can be rolled back into a recursive implementation. We can also validate that solution against the recursive description of the algorithm; that is to say, using a description of the recursive algorithm as our guide, we can easily convince ourselves whether the unrolled implementation is right or wrong.</p>\n\n<p>So clearly, the unrolled code is exactly that: an unrolled implementation of the recursive solution. We cannot deny the connection to the recursive specification, yet we have to acknowledge that recursion isn't taking place.</p>\n"}], "owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 32104369, "answer_count": 4, "score": 6, "last_activity_date": 1440432882, "creation_date": 1440012762, "last_edit_date": 1495540685, "question_id": 32104129, "link": "https://stackoverflow.com/questions/32104129/what-defines-a-recursive-function", "title": "what defines a recursive function?", "body": "<p>Beyond the simple question asked <a href=\"https://stackoverflow.com/q/13098975/2963099\">here</a>\nAnd based on <a href=\"https://stackoverflow.com/questions/31826746/trying-to-generate-9-digit-numbers-with-each-unique-digits/32059779#comment51972274_31885811\">this</a> comment</p>\n\n<p>The question is at what point does a solution stop being considered recursive, even if the base algorithm implemented is recursive?</p>\n\n<p>For completeness, the following functions are used by all cases:</p>\n\n<pre><code>int counter=0;\nint reps=0;\n\nvoid show(int x)\n{\n#ifdef OUTPUT\n    printf(\"==============&gt;&gt;&gt; %d &lt;&lt;&lt;\\n\", x);\n#endif\n    counter+=x;\n    ++reps;\n}\n\nint bit_val(unsigned int v)\n{\n  static const int MultiplyDeBruijnBitPosition2[32] =\n  {\n    0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8,\n    31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9\n  };\n  return MultiplyDeBruijnBitPosition2[(unsigned int)(v * 0x077CB531U) &gt;&gt; 27];\n}\n</code></pre>\n\n<p><strong>CASE 1: Clear recursion</strong></p>\n\n<pre><code>void uniq_digitsR(int places, int prefix, int used) {\n  if (places==1) {\n    show(prefix*10+bit_val(~used));\n    return;\n  }\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while(unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digitsR(places-1, base+bit_val(bit), used|bit);\n  }\n}\n\nint uniq_digits9() {\n  unsigned int used=~((1&lt;&lt;10)-1); // set all bits except 0-9\n  used |= 1;                      // unset 0\n  uniq_digitsR(9, 0, used);\n  return 0;\n}\n</code></pre>\n\n<p><strong>CASE 2:  Hardcoded Unrolling</strong></p>\n\n<p>Note that at no time does a function call itself or any direct or indirect caller</p>\n\n<pre><code>void uniq_digits1(int prefix, unsigned int used) {\n  show(prefix*10+bit_val(~used));\n}\n\nvoid uniq_digits2(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits1(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits3(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits2(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits4(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits3(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits5(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits4(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits6(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits5(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits7(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits6(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits8(int prefix, unsigned int used) {\n  int base=prefix*10;\n  unsigned int unused=~used;\n  while (unused) {\n    unsigned int diff=unused &amp; (unused-1);\n    unsigned int bit=unused-diff;\n    unused=diff;\n    uniq_digits7(base+bit_val(bit), used|bit);\n  }\n}\n\nvoid uniq_digits9() {\n  unsigned int used=~((1&lt;&lt;10)-1); // set all bits except 0-9\n  used |= 1;                      // unset 0\n  for (int i = 1; i &lt; 10; i++) {\n    unsigned int bit=1&lt;&lt;i;\n    uniq_digits8(i,used|bit);\n  }\n}\n</code></pre>\n\n<p><strong>CASE 3: Iterative Version</strong></p>\n\n<p>Note that no functions are called (aside from obviously show) but it is the same algorithm</p>\n\n<pre><code>void uniq_digits(const int array[], const int length) {\n  unsigned int unused[length-1];                    // unused prior\n  unsigned int combos[length-1];                    // digits untried\n  int digit[length];                                // printable digit\n  int mult[length];                                 // faster calcs\n  mult[length-1]=1;                                 // start at 1\n  for (int i = length-2; i &gt;= 0; --i)\n     mult[i]=mult[i+1]*10;                          // store multiplier\n  unused[0]=combos[0]=((1&lt;&lt;(length))-1);            // set all bits 0-length\n  int depth=0;                                      // start at top\n  digit[0]=0;                                       // start at 0\n  while(1) {\n    if (combos[depth]) {                            // if bits left\n      unsigned int avail=combos[depth];             // save old\n      combos[depth]=avail &amp; (avail-1);              // remove lowest bit\n      unsigned int bit=avail-combos[depth];         // get lowest bit\n      digit[depth+1]=digit[depth]+mult[depth]*array[bit_val(bit)]; // get associated digit\n      unsigned int rest=unused[depth]&amp;(~bit);       // all remaining\n      depth++;                                      // go to next digit\n      if (depth!=length-1) {                        // not at bottom\n        unused[depth]=combos[depth]=rest;           // try remaining\n      } else {\n        show(digit[depth]+array[bit_val(rest)]);    // print it\n        depth--;                                    // stay on same level\n      }\n    } else {\n      depth--;                                      // go back up a level\n      if (depth &lt; 0)\n        break;                                      // all done\n    }\n  }\n}\n</code></pre>\n\n<p>So, is just <code>CASE 1</code> recursive?  Or do we also include <code>CASE 2</code> or even <code>CASE 3</code>?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 2, "creation_date": 1440012566, "post_id": 32104034, "comment_id": 52102555, "body": "The reference isn&#39;t to the address of doubleVal, think of references as variable aliases"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440012823, "post_id": 32104034, "comment_id": 52102719, "body": "The main thing to understand is that &amp; is something completely different when it&#39;s part of a <i>type</i> (a <i>type-id</i> in the text of the standard) vs when it&#39;s part of an <i>expression</i>"}, {"owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 0, "creation_date": 1440012867, "post_id": 32104034, "comment_id": 52102746, "body": "You&#39;re not allowed to change the memory location of <code>dVala</code>, which is essentially what you&#39;re trying to do with <code>&amp;dVala = &amp;dValb;</code>  That location is set at compile time."}, {"owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1440013315, "post_id": 32104034, "comment_id": 52103000, "body": "You can&#39;t obviously modify a memory address."}, {"owner": {"reputation": 173, "user_id": 3499524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00c3184f4089a9a71d14e29609190ff8?s=128&d=identicon&r=PG&f=1", "display_name": "user3499524", "link": "https://stackoverflow.com/users/3499524/user3499524"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440013791, "post_id": 32104034, "comment_id": 52103335, "body": "@ChrisBeck You mean, in other words, the role of &amp; changes when it&#39;s next to a type vs. when it&#39;s inside of an expression? What would that difference be exactly?"}, {"owner": {"reputation": 173, "user_id": 3499524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00c3184f4089a9a71d14e29609190ff8?s=128&d=identicon&r=PG&f=1", "display_name": "user3499524", "link": "https://stackoverflow.com/users/3499524/user3499524"}, "reply_to_user": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 0, "creation_date": 1440013885, "post_id": 32104034, "comment_id": 52103394, "body": "@awesomeyi Do you mean, don&#39;t think of pointers as references? Just simply take a reference variable as another means of referring to the same thing. Like when we pass variables by reference to functions, maybe?"}, {"owner": {"reputation": 173, "user_id": 3499524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00c3184f4089a9a71d14e29609190ff8?s=128&d=identicon&r=PG&f=1", "display_name": "user3499524", "link": "https://stackoverflow.com/users/3499524/user3499524"}, "reply_to_user": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "edited": false, "score": 0, "creation_date": 1440014139, "post_id": 32104034, "comment_id": 52103532, "body": "@Carlton I think there&#39;s plenty more specifics about compile time I am unaware of. I guess if we could change the memory location after compile time, this would be bad, because then we could access some other place in memory that would be vital to some other application, and this could cause a major crash. Is this correct?"}, {"owner": {"reputation": 173, "user_id": 3499524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00c3184f4089a9a71d14e29609190ff8?s=128&d=identicon&r=PG&f=1", "display_name": "user3499524", "link": "https://stackoverflow.com/users/3499524/user3499524"}, "reply_to_user": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "edited": false, "score": 0, "creation_date": 1440014315, "post_id": 32104034, "comment_id": 52103632, "body": "@zenith Well, when you put it that way, my question does seem really silly, and it becomes pretty obvious to what the answer is. However, I feel like your answer and Carlton&#39;s answer are perhaps slightly different maybe. I took your answer as trying to change the physical address of the physical memory itself. Like if I were to change my home address to a different address. Or is it more like what Carlton had said, that after compile time, that specific memory is reserved to a purpose, and you cannot change it at run time for obvious reasons? Just want to be clear."}, {"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 1, "creation_date": 1440014507, "post_id": 32104034, "comment_id": 52103757, "body": "@user3499524 Yes. Pointers are not references at all."}, {"owner": {"reputation": 173, "user_id": 3499524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00c3184f4089a9a71d14e29609190ff8?s=128&d=identicon&r=PG&f=1", "display_name": "user3499524", "link": "https://stackoverflow.com/users/3499524/user3499524"}, "edited": false, "score": 0, "creation_date": 1440015158, "post_id": 32104034, "comment_id": 52104116, "body": "And thanks everyone, things are starting to become more clear. Maybe another way to make the question more clear is to go back to this example:          double doubleVal = 8.234;.         double &amp;doubleRef = doubleVal;  So, in the first line, doubleVal is simply an alias to the address that stores 8.234. Then, in the next line, doubleRef is just ANOTHER alias to the address that stores 8.234. We&#39;re not changing any addresses here during run time. That&#39;s why this is okay. But I still think that:          double &amp;doubleRef = doubleVal;  Isn&#39;t as clear as:          double &amp;doubleRef = &amp;doubleVal;"}, {"owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "edited": false, "score": 0, "creation_date": 1440017606, "post_id": 32104034, "comment_id": 52105459, "body": "@user3499524: That&#39;s basically right. It breaks down a little when you consider how C++ compilers are actually implemented and how your program works on a real, physical machine, but C++ the language is an abstraction and in terms of that abstraction you are basically right. Your suggested code is how pointers work. There&#39;s no point in having references if they&#39;re just going to be carbon copies of pointers. References are a more abstract concept, and quite deliberately so. However the truth is that your compiler probably implements them as pointers when not optimised away."}], "answers": [{"tags": [], "owner": {"reputation": 357695, "user_id": 560648, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1", "display_name": "Lightness Races in Orbit", "link": "https://stackoverflow.com/users/560648/lightness-races-in-orbit"}, "is_accepted": true, "score": 7, "last_activity_date": 1440013353, "creation_date": 1440013353, "answer_id": 32104294, "question_id": 32104034, "link": "https://stackoverflow.com/questions/32104034/asking-for-basic-c-syntax-specifics-using-inside-initialization-vs-outside/32104294#32104294", "title": "Asking for basic C++ syntax specifics; using &amp; inside initialization vs outside initialization", "body": "<p>The symbol <code>&amp;</code> has multiple meanings depending on context: you can't just take it from one place, put it another place, and expect the exact same thing to happen.</p>\n\n<ol>\n<li>When used as an operator between two expressions, it is a bitwise AND.</li>\n<li>When decorating a typename, it means \"reference-to\".</li>\n<li>When preceding an expression, it means \"address-of\".</li>\n</ol>\n\n\n\n<ul>\n<li>Your first working example declares a pointer and doesn't initialise it, but later assigns to it the address of an object.</li>\n<li>Your second working example declares and initialises a reference to an object.</li>\n<li>Your broken example attempts to assign the address of one thing to the address of another thing. It just has no meaning.</li>\n</ul>\n\n<p>Aside from that:</p>\n\n<blockquote>\n  <p>Are references to the built in data types of C++ constants, so that they can only be initialized with a value, but cannot be changed anytime after they are initialized?</p>\n</blockquote>\n\n<p>Yes. <em>All</em> references are themselves immutable, and cannot be re-seated after initialisation.</p>\n\n<p>As we've explored above, writing <code>&amp;someReference</code> doesn't actually \"access\" the reference itself; indeed, there is no syntax that exists to do so.</p>\n\n<blockquote>\n  <p>But why isn't doubleVal instead &amp;doubleVal if it's an address that &amp;doubleRef is being initialized with.</p>\n</blockquote>\n\n<p>Because then references would be largely indistinguishable from pointers, and thus pointless (lol).</p>\n\n<p>Don't read a <code>double&amp; doubleRef</code> as something called <code>&amp;doubleRef</code>. It's not. It's a <code>double&amp;</code> called <code>doubleRef</code>.</p>\n\n<p>References \"do the dereferencing for you\". They bind directly to objects without you needing to take the address yourself.</p>\n\n<p>This is a gift of the language.</p>\n"}, {"tags": [], "owner": {"reputation": 4010, "user_id": 1812187, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/MRXi9.png?s=128&g=1", "display_name": "Carlton", "link": "https://stackoverflow.com/users/1812187/carlton"}, "is_accepted": false, "score": 0, "last_activity_date": 1440078961, "creation_date": 1440078961, "answer_id": 32120243, "question_id": 32104034, "link": "https://stackoverflow.com/questions/32104034/asking-for-basic-c-syntax-specifics-using-inside-initialization-vs-outside/32120243#32120243", "title": "Asking for basic C++ syntax specifics; using &amp; inside initialization vs outside initialization", "body": "<p>I think you would find it very enlightening to learn some basic assembly.  That way you can see exactly how your C++ code is being expressed in the native language of your CPU.  To help you understand what's going on with your code, let's break it down into assembly.  This is what I got from MSVC2013 with all optimizations turned off.  Each block represents one line of your original code:</p>\n\n<pre><code>double doubleVal = 8.234;\nmovsd   xmm0,mmword ptr [test!_real (00000001`3f2948b8)]\nmovsd   mmword ptr [rsp],xmm0\n\ndoublePtr = &amp;doubleVal;\nlea     rax,[rsp]\nmov     qword ptr [rsp+8],rax\n\ndouble &amp;doubleRef = doubleVal;\nlea     rax,[rsp]\nmov     qword ptr [rsp+10h],rax\n</code></pre>\n\n<p>What's not shown here is that the compiler has set up the code in such a way that there is space for three variables in memory.  The first is your variable <code>doublVal</code>, which is at a memory address stored in the CPU register <code>rsp</code>.  Similarly, <code>doublePtr</code> and <code>doubleRef</code> are stored at <code>rsp+8</code> and <code>rsp+10h</code> (these are hexadecimal values, btw).  This spacing reflects the fact that the variables are 8 bytes long.</p>\n\n<p>Now, the first two instructions (<code>movsd</code>) move a constant value (8.234) into a floating point register, then move it to the address stored in <code>rsp</code> (the location of <code>doubleVal</code>).  Now <code>doubleVal</code> is initialized to the constant you specified.</p>\n\n<p>The next block takes the address of <code>doubleVal</code> (stored in <code>rsp</code>) and copies it to the CPU register <code>rax</code>, then copies that value in <code>rax</code> to the address <code>rsp+8</code> (the location of <code>doublePtr</code>).  Now <code>doublePtr</code> has been initialized with the address of <code>doubleVal</code>.</p>\n\n<p>The third block is identical to the second one, with the exception that <code>doubleVal</code>'s address is instead copied into the variable <code>doubleRef</code> (whose address is stored in <code>rsp+10h</code>).  This shows that the compiler implemented your reference variable using pointers, which is fairly typical.</p>\n"}], "owner": {"reputation": 173, "user_id": 3499524, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/00c3184f4089a9a71d14e29609190ff8?s=128&d=identicon&r=PG&f=1", "display_name": "user3499524", "link": "https://stackoverflow.com/users/3499524/user3499524"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 32104294, "answer_count": 2, "score": 1, "last_activity_date": 1440078961, "creation_date": 1440012452, "question_id": 32104034, "link": "https://stackoverflow.com/questions/32104034/asking-for-basic-c-syntax-specifics-using-inside-initialization-vs-outside", "title": "Asking for basic C++ syntax specifics; using &amp; inside initialization vs outside initialization", "body": "<p>So, I know that someone writing C++ code can do this:</p>\n\n<pre><code>    double *doublePtr;             // Declares a pointer.\n    double doubleVal = 8.234;      // Declares and initializes a double.\n    doublePtr = &amp;doubleVal;        // Makes pointer point to doubleVal.\n</code></pre>\n\n<p>Also, someone writing C++ code could do something like this:</p>\n\n<pre><code>    double doubleVal = 8.234;      // Declares and initializes a double.\n    double &amp;doubleRef = doubleVal; // Declares/Initializes a reference\n                                   // To the address of doubleVal (???).\n                                   // But why isn't doubleVal instead\n                                   // &amp;doubleVal if it's an address that\n                                   // &amp;doubleRef is being initialized with.\n</code></pre>\n\n<p>So, why is it not appropriate (due to compiler error) to do this:</p>\n\n<pre><code>    double dVala = 1.234, dValb = 3.456;\n    &amp;dVala = &amp;dValb;\n</code></pre>\n\n<p>More specifically, I'm trying to ask the question of, \"What is it that I'm confused about that, with a simple explanation, will make the specifics of this more clear\". Are references to the built in data types of C++ constants, so that they can only be initialized with a value, but cannot be changed anytime after they are initialized?</p>\n\n<p>Of course, we can output the value of the address of a variable to some data type like this:</p>\n\n<pre><code>    double dVala = 23.456;\n    cout &lt;&lt; &amp;dVala;\n</code></pre>\n\n<p>I hope that my questions are clear. Thanks.</p>\n"}, {"tags": ["c++", "c++11", "operator-overloading"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 7, "creation_date": 1440012442, "post_id": 32103998, "comment_id": 52102475, "body": "The scope &quot;operator&quot; unlike all the operators does nothing at run time, it affects name lookup at compile time, that&#39;s why you can&#39;t overload it."}, {"owner": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1440012656, "post_id": 32103998, "comment_id": 52102622, "body": "@Borgleader and I cannot make it do something at run time?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1440012898, "post_id": 32103998, "comment_id": 52102761, "body": "@GabrielMello No because its only job is to tell the compiler where to find names."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 7, "creation_date": 1440013029, "post_id": 32103998, "comment_id": 52102841, "body": "<i>&quot;I found that the . operator can be overload&quot;</i> - No, the <code>.</code> operator <i>cannot</i> be overloaded."}, {"owner": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1440013134, "post_id": 32103998, "comment_id": 52102893, "body": "@CaptainObvlious but if you see that question the user tells &quot;can in principle be overloaded using the same technique as used for -&gt;.&quot;"}, {"owner": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1440013381, "post_id": 32103998, "comment_id": 52103043, "body": "@Borgleader Oh it explains a lot. Thank you for that! So if I have two variables with the same name, one local and another global, I was thinking about use ::variable_name to call the global variable inside the function and already do an operation with it, but it wouldn&#39;t be possible, right?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1440013860, "post_id": 32103998, "comment_id": 52103382, "body": "@GabrielMello <a href=\"http://coliru.stacked-crooked.com/a/aed0403edb1e8b44\" rel=\"nofollow noreferrer\">Like this?</a>"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 0, "creation_date": 1440013960, "post_id": 32103998, "comment_id": 52103435, "body": "You are misinterpreting that portion of the post. In principle yes you <i>could</i> overload the <code>.</code> operator <i>if</i> the language supported it. C++ does <i>not</i> support overloading the <code>.</code> operator."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440014159, "post_id": 32103998, "comment_id": 52103541, "body": "See <a href=\"http://stroustrup.com/bs_faq2.html#overload-dot\" rel=\"nofollow noreferrer\">stroustrup.com/bs_faq2.html#overload-dot</a>"}, {"owner": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1440014390, "post_id": 32103998, "comment_id": 52103681, "body": "@Borgleader almost, but without the necessity of ::s = &quot;Hello &quot;;. For example, I would do this with numbers, so everytime I call the global variable I would already increment 1 unit to it. In your code would be change the &quot;Blah&quot; to &quot;Hello&quot; without make it explicit inside of your function. Can you understand?"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1440014521, "post_id": 32103998, "comment_id": 52103763, "body": "@GabrielMello How would you refer to the local variable if it picks the global one without explicitly doing ::? I dont think what you want makes sense. It would make things ambiguous and/or very confusing."}], "answers": [{"comments": [{"owner": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "edited": false, "score": 0, "creation_date": 1440013442, "post_id": 32104249, "comment_id": 52103077, "body": "I already know this, but I&#39;m asking why. Please, take some time to read my question again, thank you."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "edited": false, "score": 4, "creation_date": 1440014006, "post_id": 32104249, "comment_id": 52103456, "body": "@GabrielMello you asked <code>But if it can&#39;t, can anyone explain me why</code> And I am showing the reason you can&#39;t is because the standard says so."}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "edited": false, "score": 0, "creation_date": 1440064177, "post_id": 32104249, "comment_id": 52122655, "body": "If you want to know <i>why</i> the Standard says so, there&#39;s an old book (Design &amp; Evolution of C++). But this decision is more than 2 decades old."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 7, "last_activity_date": 1440013195, "last_edit_date": 1592644375, "creation_date": 1440013195, "answer_id": 32104249, "question_id": 32103998, "link": "https://stackoverflow.com/questions/32103998/why-i-cannot-overload-the-operator/32104249#32104249", "title": "Why I cannot overload the :: operator?", "body": "<p>The reason you cannot overload <code>::</code> is the standard forbids it.  Section 13.5.3 has</p>\n<blockquote>\n<p>The following operators cannot be overloaded:</p>\n<p><code>.</code> <code>.*</code> <code>::</code> <code>?:</code></p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "is_accepted": true, "score": 8, "last_activity_date": 1440016058, "last_edit_date": 1440016058, "creation_date": 1440015750, "answer_id": 32104966, "question_id": 32103998, "link": "https://stackoverflow.com/questions/32103998/why-i-cannot-overload-the-operator/32104966#32104966", "title": "Why I cannot overload the :: operator?", "body": "<p>You cannot overload it. </p>\n\n<p><em>The scope \"operator\" unlike all the operators does nothing at run time, it affects the name lookup at compile time and you cannot change it since its job it is only to tell the compiler where to find names.</em> </p>\n\n<p>That's why you can't overload it.</p>\n\n<p><strong><em>For example:</em></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\n\nstd::string s = \"Blah\";\n\nint main()\n{\n    std::string s = \"World\";\n    ::s = \"Hello \";\n\n    std::cout &lt;&lt; ::s &lt;&lt; s &lt;&lt; std::endl;\n\n    return 0;\n}\n</code></pre>\n\n<p><a href=\"http://coliru.stacked-crooked.com/a/aed0403edb1e8b44\">See on Coliru</a></p>\n"}], "owner": {"reputation": 753, "user_id": 4882392, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tAwlZ.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/4882392/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 32104966, "answer_count": 2, "score": 2, "last_activity_date": 1440016610, "creation_date": 1440012312, "last_edit_date": 1495535373, "question_id": 32103998, "link": "https://stackoverflow.com/questions/32103998/why-i-cannot-overload-the-operator", "title": "Why I cannot overload the :: operator?", "body": "<p>I was reading the book C++ Primer by Stanley B. Lippman and in the section of Variables and Basic Types I saw the scope operator <code>::</code>. </p>\n\n<p>I had already read a little about the operator overload and I think it could be very useful in special cases, but when I searched in the internet I found out that I simply cannot overload the <code>::</code> operator. </p>\n\n<p>In <a href=\"https://stackoverflow.com/questions/520035/why-cant-you-overload-the-operator-in-c\">this post</a> I found that the <code>.</code> operator can be overload. However, this can lead to questions about whether an operation is meant for the object overloading <code>.</code> or an object referred to by <code>.</code>. </p>\n\n<p>Thus, I think that maybe there is a way to overload the <code>::</code>.</p>\n\n<p><em>But if it can't, can anyone explain me why?</em> </p>\n\n<p><strong><em>An example of my idea for the :: operator:</em></strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\n/*\n *For example:\n *I wanna increase 1 unit every time \n *I call the global variable r doing ::r\n *insede of the main function\n */\n\nint r = 42; \n\nint main()\n{\n    int r = 0;\n    std::cout &lt;&lt; ::r &lt;&lt; \" \" &lt;&lt; r &lt;&lt; std::endl; //It would print 43 0 after the operator overload\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": ["c++", "vector", "microbenchmark"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 3, "creation_date": 1440011975, "post_id": 32103803, "comment_id": 52102165, "body": "try using std::chrono::steady_clock and making sure that <code>MAX</code> is sufficiently large to allow a measurable time-change to occur."}, {"owner": {"reputation": 1117, "user_id": 2451677, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1a2d620cdfad7a1ba7d00c732db0d058?s=128&d=identicon&r=PG", "display_name": "grisha", "link": "https://stackoverflow.com/users/2451677/grisha"}, "edited": false, "score": 1, "creation_date": 1440012264, "post_id": 32103803, "comment_id": 52102331, "body": "change your <code>MAX</code>: <a href=\"http://rextester.com/ZFBET83938\" rel=\"nofollow noreferrer\">rextester.com/ZFBET83938</a>. Now it&#39;s very small to see the difference in time with <code>clock()</code>"}, {"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440012578, "post_id": 32103803, "comment_id": 52102563, "body": "Also, don&#39;t use rand(), check out the answer to this question for an easy example of a Mersenne Twister implemented in the &lt;random&gt; library as well as a link to why rand() is considered harmful: <a href=\"http://stackoverflow.com/questions/19665818/best-way-to-generate-random-numbers-using-c11-random-library\" title=\"best way to generate random numbers using c11 random library\">stackoverflow.com/questions/19665818/&hellip;</a>"}, {"owner": {"reputation": 304, "user_id": 5236767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83cf443f7264b8ff635bfe69cf8027bd?s=128&d=identicon&r=PG&f=1", "display_name": "pistachiobk", "link": "https://stackoverflow.com/users/5236767/pistachiobk"}, "edited": false, "score": 0, "creation_date": 1440012898, "post_id": 32103803, "comment_id": 52102762, "body": "thank you guys. MAX wasn&#39;t big enough to be measurable. I&#39;m taking a look at std::chrono::steady_clock and the &lt;random&gt; library. I didn&#39;t know about these alternatives. :)"}], "owner": {"reputation": 304, "user_id": 5236767, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83cf443f7264b8ff635bfe69cf8027bd?s=128&d=identicon&r=PG&f=1", "display_name": "pistachiobk", "link": "https://stackoverflow.com/users/5236767/pistachiobk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "closed_date": 1440020114, "answer_count": 0, "score": 1, "last_activity_date": 1440013201, "creation_date": 1440011600, "last_edit_date": 1440013201, "question_id": 32103803, "link": "https://stackoverflow.com/questions/32103803/measure-the-lapsed-time-when-adding-items-into-a-vector-in-c-vs2013", "closed_reason": "Duplicate", "title": "Measure the lapsed time when adding items into a vector in C++ VS2013", "body": "<p>I have the following:</p>\n\n<pre><code>vector&lt;int&gt; vec;\n\ntemplate&lt;class T&gt;\nbool Add(const T&amp; t)\n{\n    auto i = vec.begin();\n    while (i != vec.end() &amp;&amp; (*i) &lt; t)\n        ++i;\n\n    if (i == vec.end())\n        vec.push_back(t);\n    else\n        vec.insert(i, t);\n    return true;\n}\nint main()\n{\n    clock_t start, finish;\n    const int MAX = 100;\n    start = clock();\n    for (int i = 0; i &lt; MAX; i++)\n    {\n        int t = rand() % RAND_MAX;\n        Add(t);\n    }\n    finish = clock();\n\n    cout &lt;&lt; \"Time: \" &lt;&lt; finish - start &lt;&lt; \" clicks\" &lt;&lt; endl;\n    cout &lt;&lt; \"Time: \" &lt;&lt; (double)(finish - start) / CLOCKS_PER_SEC &lt;&lt; \" seconds\" &lt;&lt; endl;\n\n    return 0;\n}\n</code></pre>\n\n<p>I'm trying to measure the amount of time it takes to generate a random number and add it into a vector but my output is:</p>\n\n<p>Time: 0 clicks</p>\n\n<p>Time: 0 seconds</p>\n\n<p>Am I not measuring the lapsed time properly?</p>\n"}, {"tags": ["c++", "cmake"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440011959, "post_id": 32103798, "comment_id": 52102150, "body": "CMake supports conditional variable setting: <a href=\"http://stackoverflow.com/questions/16650825/converting-old-makefile-to-cmake/16652405#16652405\" title=\"converting old makefile to cmake\">stackoverflow.com/questions/16650825/&hellip;</a>"}, {"owner": {"reputation": 15, "user_id": 1789150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oD6eE.png?s=128&g=1", "display_name": "BigD", "link": "https://stackoverflow.com/users/1789150/bigd"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440013489, "post_id": 32103798, "comment_id": 52103116, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6  Is your suggestion that I would need a branch for every calling project? I&#39;m thinking that this is going to continue to be a problem."}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 1789150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oD6eE.png?s=128&g=1", "display_name": "BigD", "link": "https://stackoverflow.com/users/1789150/bigd"}, "edited": false, "score": 0, "creation_date": 1440016006, "post_id": 32103890, "comment_id": 52104593, "body": "The problem is that the library is trying to build first at which time I have no variables set so compilation fails. Also, the library has no notion ahead of time what the include src dir will be called."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 15, "user_id": 1789150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oD6eE.png?s=128&g=1", "display_name": "BigD", "link": "https://stackoverflow.com/users/1789150/bigd"}, "edited": false, "score": 0, "creation_date": 1440016386, "post_id": 32103890, "comment_id": 52104807, "body": "&quot;Also, the library has no notion ahead of time what the include src dir will be called.&quot; I don&#39;t know what that means. Does the library actually depend on the source files in your primary project? If so then it wouldn&#39;t normally be called a library. A library is something that you depend on externally, that doesn&#39;t depend back on you."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 15, "user_id": 1789150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oD6eE.png?s=128&g=1", "display_name": "BigD", "link": "https://stackoverflow.com/users/1789150/bigd"}, "edited": false, "score": 0, "creation_date": 1440016455, "post_id": 32103890, "comment_id": 52104838, "body": "Ok I reread your question. Drew: you should just move the variable processing earlier in the cmake script, before you call add_subdirectory. Then the configuration variables will be available to the secondary script. In my example project, many of the library build scripts depend on variables set either by the user or by cmake in the primary build script."}, {"owner": {"reputation": 15, "user_id": 1789150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oD6eE.png?s=128&g=1", "display_name": "BigD", "link": "https://stackoverflow.com/users/1789150/bigd"}, "edited": false, "score": 0, "creation_date": 1440081287, "post_id": 32103890, "comment_id": 52134545, "body": "I thought a little more about what you said regarding how the code I&#39;m working with is organized. I&#39;m artificially treating it as a library and that&#39;s my problem - it&#39;s not really a library. I&#39;m going to update my question with the solution and the pitfalls of trying to cram a square peg in a round hole. Thanks for your helpful answer."}], "tags": [], "owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "is_accepted": false, "score": 1, "last_activity_date": 1440012315, "last_edit_date": 1440012315, "creation_date": 1440011922, "answer_id": 32103890, "question_id": 32103798, "link": "https://stackoverflow.com/questions/32103798/cmake-changing-a-library-include-directory-based-off-of-calling-project/32103890#32103890", "title": "CMake changing a library include directory based off of calling project", "body": "<p>Well there's lots of ways that you could do that, but one way that I have done it in a cmake C++ project is, for each library (each folder inside of /lib in my project root) I have a secondary Cmake script which builds that library, and I use <code>add_subdirectory</code> within my primary cmake script to invoke those secondary cmake scripts.</p>\n\n<p>Here's an (open source) example from my project: <a href=\"https://github.com/cbeck88/cegui-emscripten\" rel=\"nofollow\">https://github.com/cbeck88/cegui-emscripten</a></p>\n\n<p>For instance, if you look here you'll see how I do \"in tree\" (what you are talking about) libs using add_subdirectory, vs. \"out of tree\" (user provided) libs which I find using find_package. <a href=\"https://github.com/cbeck88/cegui-emscripten/blob/17f0d097f989862035e977a6b9e0b1bbb1fcdf21/CMakeLists.txt#L58\" rel=\"nofollow\">https://github.com/cbeck88/cegui-emscripten/blob/17f0d097f989862035e977a6b9e0b1bbb1fcdf21/CMakeLists.txt#L58</a></p>\n\n<pre><code>if (FREETYPE_IN_TREE)\n  add_subdirectory(lib/freetype-2.5.5 freetype-2.5.5)\nelse()\n  LIST(APPEND CMAKE_PREFIX_PATH ${CMAKE_CURRENT_SOURCE_DIR}/lib/freetype-2.5.5-old )\n  find_package(freetype NO_CMAKE_FIND_ROOT_PATH)\n  MESSAGE ( STATUS \"FREETYPE found = \" ${FREETYPE_FOUND} )\nendif()\n</code></pre>\n\n<p>This is what my secondary cmake script (in folder freetype-2.5.5) looks like, it will look very different in your case but at least it's an example. <a href=\"https://github.com/cbeck88/cegui-emscripten/blob/d24fcd6a5dc4697b8718564fadb25d76c255bce2/lib/freetype-2.5.5/CMakeLists.txt\" rel=\"nofollow\">https://github.com/cbeck88/cegui-emscripten/blob/d24fcd6a5dc4697b8718564fadb25d76c255bce2/lib/freetype-2.5.5/CMakeLists.txt</a></p>\n\n<p>Note especially some of these lines at the very end <code>SET(FREETYPE_INCLUDE_DIRS ${INCL} PARENT_SCOPE)</code> which you might need to use if you do it this way.</p>\n"}], "owner": {"reputation": 15, "user_id": 1789150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oD6eE.png?s=128&g=1", "display_name": "BigD", "link": "https://stackoverflow.com/users/1789150/bigd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1440081866, "creation_date": 1440011584, "last_edit_date": 1440081866, "question_id": 32103798, "link": "https://stackoverflow.com/questions/32103798/cmake-changing-a-library-include-directory-based-off-of-calling-project", "title": "CMake changing a library include directory based off of calling project", "body": "<p>Here is my current project structure:</p>\n\n<pre><code>ProjectX\n|_ projs\n    |_ A ( builds an external project POO version 1 )\n         add_executable(A ${A_HDRS} ${A_SRCS} $&lt;TARGET_OBJECTS:libbar&gt;)\n    |_ B ( builds an external project POO version 2 )\n         add_executable(B ${B_HDRS} ${B_SRCS} $&lt;TARGET_OBJECTS:libbar&gt;)\n|\n|_ libs\n    |_ libbar (objects only - no linking)\n              (needs POO either v1 or v2 depending on calling project)\n    issue lives here --&gt;INCLUDE_DIRECTORIES(${POO_BUILD_DIR}/include)\n              add_library(bar OBJECT ${LIB_BAR_HDRS} ${LIB_BAR_SRCS})\n</code></pre>\n\n<p>GOAL:</p>\n\n<p>I would like to be able to build from the top level including all projects and have libbar to be built with the correct dependencies. I would like to be able to have a continuous build process.</p>\n\n<p>DETAILS:</p>\n\n<p>When project A build builds, it needs to compile libbar with POO version1 and when project B builds it needs to compile libbar wtih POO version2. In either case it is still a version of POO. I would like to be able to pass the path to libbar from A or B.</p>\n\n<p>ISSUE:</p>\n\n<p>The POO_BUILD_DIR path is different depending on the project building libbar. When I build from the top level, make tries to build libbar first and doesn't find the correct includes.</p>\n\n<p>QUESTION:</p>\n\n<p>Does anyone know how to achieve this in cmake <em>or</em> how can I achieve finer grained control over the build order?</p>\n\n<p><strong>UPDATE and SOLUTION:</strong>\nThe problem that I was having could have been solved with Chris's solution below. However, my problem (that I should have realized earlier) is that even though it lives in a library directory and is called a library it's not a library. The naming and directory structure I can't change b/c I don't own the code base. However, I can change how I build it! My quote-unquote <em>solution</em> was to just include the files to the compilation like this: <code>add_executable(A ... ${libbar_hdrs} ${libbar_srcs}</code></p>\n\n<p><em>Moral of the Story</em>\nIf someone tells you it's a library and names it a library - it still may not be. Or expressed in a colloquialism \"Don't always believe what you're told\".</p>\n"}, {"tags": ["c++", "windows", "assembly", "x86", "16-bit"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440011485, "post_id": 32103707, "comment_id": 52101892, "body": "Use a critical protected section??"}, {"owner": {"reputation": 22367, "user_id": 1057909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a3df0a806e7301ce9b92d0705646ac?s=128&d=identicon&r=PG", "display_name": "ams", "link": "https://stackoverflow.com/users/1057909/ams"}, "edited": false, "score": 0, "creation_date": 1440011905, "post_id": 32103707, "comment_id": 52102118, "body": "You should probably share some details about OS and machine type, as well as what &quot;interrupt flag&quot; you&#39;re talking about."}, {"owner": {"reputation": 11, "user_id": 4293849, "user_type": "registered", "profile_image": "https://graph.facebook.com/558491573/picture?type=large", "display_name": "Jovan Ristic", "link": "https://stackoverflow.com/users/4293849/jovan-ristic"}, "edited": false, "score": 0, "creation_date": 1440012764, "post_id": 32103707, "comment_id": 52102687, "body": "i use Windows 7 32bit, Intel proc, if thats what you&#39;re asking. I&#39;m talking about the flag that disables/enables maskable interrupts."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1440013451, "post_id": 32103707, "comment_id": 52103091, "body": "User mode programs can&#39;t disable interrupts under Windows. What do you think disabling interrupts would actually accomplish?"}, {"owner": {"reputation": 11, "user_id": 4293849, "user_type": "registered", "profile_image": "https://graph.facebook.com/558491573/picture?type=large", "display_name": "Jovan Ristic", "link": "https://stackoverflow.com/users/4293849/jovan-ristic"}, "edited": false, "score": 0, "creation_date": 1440013653, "post_id": 32103707, "comment_id": 52103232, "body": "I don&#39;t want interrupts from keyboard for example to interfere in atomic actions like creating an object. As i said, CLI instruction works fine, it sets the I flag to 0, but it resets when it passes the new[] operator which is strange, i globally set I to 0, and i am asking a possible solution to this :/"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1440013910, "post_id": 32103707, "comment_id": 52103407, "body": "Interrupts from the keyboard won&#39;t interfere with a user mode process creating an object. What you have to worry about is other threads (or maybe processes) that can potentially access the object interfering. Disabling interrupts, if it were possible, wouldn&#39;t prevent that if the other threads are running on a different CPU core."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 0, "creation_date": 1440014189, "post_id": 32103707, "comment_id": 52103559, "body": "Is this 16-bit Windows code?"}, {"owner": {"reputation": 11, "user_id": 4293849, "user_type": "registered", "profile_image": "https://graph.facebook.com/558491573/picture?type=large", "display_name": "Jovan Ristic", "link": "https://stackoverflow.com/users/4293849/jovan-ristic"}, "edited": false, "score": 0, "creation_date": 1440014444, "post_id": 32103707, "comment_id": 52103725, "body": "yes.  Ok, but what about timer() interrupt? Anyhow, as a demand in my project, that&#39;s explicitly said that i need to do it, i&#39;m just wondering how to fix it, since the making of that array resets the IF."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1440018895, "post_id": 32103707, "comment_id": 52106074, "body": "What if someone else, like heap allocation, tries to use the same trick?"}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1440018977, "post_id": 32103707, "comment_id": 52106109, "body": "The interrupt flag is virtualized for 16-bit code run under 32-bit versions of Windows. It doesn&#39;t actually disable hardware interrupts. Since 16-bit tasks aren&#39;t preemptively multitasked and there are no threads you don&#39;t normally have to worry about atomicity. There&#39;s nothing else  that can interfere. You only to clear the (virtual) interrupt flag in certain cases when working with (virtual) hardware. Your example doesn&#39;t need to disable interrupts. When you switch stacks the <code>mov ss, XXX</code> instruction automatically disables interrupts for the next instruction so it&#39;s done atomically."}, {"owner": {"reputation": 11, "user_id": 4293849, "user_type": "registered", "profile_image": "https://graph.facebook.com/558491573/picture?type=large", "display_name": "Jovan Ristic", "link": "https://stackoverflow.com/users/4293849/jovan-ristic"}, "edited": false, "score": 0, "creation_date": 1440027616, "post_id": 32103707, "comment_id": 52109005, "body": "Thanks for your answer. It&#39;s helpful. But would you mind, if you know, explaing to me why the main question of my problem here is happening? I am just interested in the reason why after explicitly saying to disable interrupts, it gets back on after creating that array? That&#39;s what intrigues me, whether i need it or not, you nicely explained it to me, but that doesnt resolve the nature of the problem i&#39;m implying."}, {"owner": {"reputation": 35113, "user_id": 3826372, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P0peM.png?s=128&g=1", "display_name": "Ross Ridge", "link": "https://stackoverflow.com/users/3826372/ross-ridge"}, "edited": false, "score": 1, "creation_date": 1440037530, "post_id": 32103707, "comment_id": 52111293, "body": "I don&#39;t know why, but Bo Persson&#39;s suggestion is one possibility. I was going to say you don&#39;t have a problem so your question is moot, but looking at the code more closely you appear to have a bigger problem then you describe. You&#39;re apparently trying to implement your own pre-emptable threads. The C/C++ runtime you&#39;re using does not support this, as it&#39;s not reentrant. You&#39;ll need to disable interrupts or otherwise prevent thread switching during every call into the C/C++ runtime, including every use of operator new/delete. Some functionality, like exceptions, won&#39;t work at all."}, {"owner": {"reputation": 11, "user_id": 4293849, "user_type": "registered", "profile_image": "https://graph.facebook.com/558491573/picture?type=large", "display_name": "Jovan Ristic", "link": "https://stackoverflow.com/users/4293849/jovan-ristic"}, "edited": false, "score": 0, "creation_date": 1440062122, "post_id": 32103707, "comment_id": 52121266, "body": "Yes, that&#39;s exactly what i&#39;m trying to do. I am disabling interrupts, but every call of new/delete operator resets the interrupt flag, and that&#39;s not how i want it to supposedly work (seeing how i globally disabled them), or i just don&#39;t know the mechanism behind those operators work, hence my question if i can somehow fix it, so that when it comes back from those operations, that interrupt flag still stays 0? I am not worried about exceptions because i don&#39;t need them."}, {"owner": {"reputation": 240669, "user_id": 224132, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/N4ivW.png?s=128&g=1", "display_name": "Peter Cordes", "link": "https://stackoverflow.com/users/224132/peter-cordes"}, "edited": false, "score": 0, "creation_date": 1440096240, "post_id": 32103707, "comment_id": 52143463, "body": "So you&#39;re writing a multi-threaded program that can only run as 16bit code under Windows with its virtualized interrupt flag.  When running on raw hardware, you&#39;ll have a different stdlib that won&#39;t mess with the interrupt flag, or be in user mode where you can&#39;t touch it at all.  Are you doing it while standing on your head, or with one arm tied behind your back, too?  I mean seriously, it&#39;s really hard to imagine that this is the best choice for a new piece of software for any possible task in 2015. Can you give some background on why you&#39;re playing around with this? To see if it&#39;s possible?"}, {"owner": {"reputation": 11, "user_id": 4293849, "user_type": "registered", "profile_image": "https://graph.facebook.com/558491573/picture?type=large", "display_name": "Jovan Ristic", "link": "https://stackoverflow.com/users/4293849/jovan-ristic"}, "edited": false, "score": 0, "creation_date": 1440114185, "post_id": 32103707, "comment_id": 52151278, "body": "Some people are truly ignorant. When I ask why something is manifesting the way it is and looking for answer for one particular thing, they will start shouting how what i am making is not how it should be made, or how stupid it is etc etc. I am not making a goddamn application for any kind of use in 2015 modern-information world. It&#39;s a study school project and i have certain limitations and certain instruction what i can and what i cannot use."}, {"owner": {"reputation": 11, "user_id": 4293849, "user_type": "registered", "profile_image": "https://graph.facebook.com/558491573/picture?type=large", "display_name": "Jovan Ristic", "link": "https://stackoverflow.com/users/4293849/jovan-ristic"}, "edited": false, "score": 0, "creation_date": 1440114283, "post_id": 32103707, "comment_id": 52151299, "body": "Btw, while going through debugger, if i step over creating the PCB object, the IF stays 0, but if i step into it and go instruction by instruction, it&#39;ll be set to 1 when it comes to the new/delete operator"}], "owner": {"reputation": 11, "user_id": 4293849, "user_type": "registered", "profile_image": "https://graph.facebook.com/558491573/picture?type=large", "display_name": "Jovan Ristic", "link": "https://stackoverflow.com/users/4293849/jovan-ristic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440021303, "creation_date": 1440011340, "last_edit_date": 1440018370, "question_id": 32103707, "link": "https://stackoverflow.com/questions/32103707/creating-array-reset-i-flag-c-asm", "title": "Creating array reset I flag? C++ / asm", "body": "<p>I've got a problem with interrupt flag being reset.\nAfter setting the interrupt flag to 0 with <code>asm cli</code>, it comes to a line of code <code>char* c = new char[size]</code>, and when it finishes initializing that array, it resets the I flag to 1. How can i make it that flag I stays on current value the whole time, because writing another <code>asm cli</code> after the new[] operator isn't the solution, giving that i have gap between those 2 instructions which enables the interrupts?</p>\n\n<pre><code>Thread::Thread(StackSize stackSize, Time timeSlice) {\n#ifndef BCC_BLOCK_IGNORE\n    DIS_INT // a macro: #define DIS_INT asm cli\n#endif\n\n    myPCB = new PCB(stackSize,timeSlice,this);\n\n#ifndef BCC_BLOCK_IGNORE\n    ENB_INT\n#endif\n}\n</code></pre>\n\n<p>this is where i set I flag to 0 and call the PCB constructor</p>\n\n<pre><code>PCB::PCB(StackSize stackSize, Time timeSlice, Thread* thread){\n    time = timeSlice;\n    myThread = thread;\n    stack = createStack(stackSize);\n    ...\n\nchar* PCB::createStack(StackSize stackSize){\n    char* stek = new char[stackSize];         // after this line, IF = 1\n#ifndef BCC_BLOCK_IGNORE                      // which is not desired\n    newSS = FP_SEG(stek+stackSize);\n    newSP = FP_OFF(stek+stackSize);\n    asm{\n        mov oldSS, ss\n        mov oldSP, sp\n        mov ss, newSS\n        mov sp, newSP\n\n        push ax\n        push bx\n        push cx\n        push dx\n        push es\n        push ds\n        push si\n        push di\n        push bp\n\n        mov newSS, ss\n        mov newSP, sp\n        mov ss, oldSS\n        mov sp, oldSP\n    }\n    this-&gt;stekp = MK_FP(newSS,newSP);\n#endif\n    return stek;\n}\n</code></pre>\n"}, {"tags": ["c++", "variadic-functions", "parentheses"], "comments": [{"owner": {"reputation": 19779, "user_id": 878532, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/5fbebb625a289267abd098c0e676c760?s=128&d=identicon&r=PG", "display_name": "Klaus", "link": "https://stackoverflow.com/users/878532/klaus"}, "edited": false, "score": 1, "creation_date": 1440071297, "post_id": 32103575, "comment_id": 52127273, "body": "You really use varargs in c++? Never seen that for a long time..."}], "answers": [{"comments": [{"owner": {"reputation": 109950, "user_id": 86989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bd262de5d82a235eeb64f71e4058198?s=128&d=identicon&r=PG", "display_name": "newacct", "link": "https://stackoverflow.com/users/86989/newacct"}, "edited": false, "score": 2, "creation_date": 1440222943, "post_id": 32118585, "comment_id": 52194420, "body": "&quot;and the compiler detects it as a syntax error.&quot; It&#39;s actually valid syntax."}], "tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": true, "score": 2, "last_activity_date": 1440231719, "last_edit_date": 1440231719, "creation_date": 1440074572, "answer_id": 32118585, "question_id": 32103575, "link": "https://stackoverflow.com/questions/32103575/difference-between-variadic-parameters-with-and-without-parentheses/32118585#32118585", "title": "Difference between variadic parameters with and without parentheses", "body": "<p>It is enough to see preprocess output to understand that.</p>\n\n<p>Input file:</p>\n\n<pre><code>void func( int year, char* szFormat, ... );\n\n#define M1(a,...)  M2(a, __VA_ARGS__)\n#define M2 func \n\nint main()\n{\n    M1(2015, (\"Hello %s\", \"world\")); // this doesn't works\n    M1(2015, \"Hello %s\", \"world\");   // this way works\n    return 0;\n}\n</code></pre>\n\n<p>output of <code>c++ -E foo.cpp</code>:</p>\n\n<pre><code># 1 \"ess.cpp\"\n# 1 \"&lt;built-in&gt;\" 1\n# 1 \"&lt;built-in&gt;\" 3\n# 155 \"&lt;built-in&gt;\" 3\n# 1 \"&lt;command line&gt;\" 1\n# 1 \"&lt;built-in&gt;\" 2\n# 1 \"ess.cpp\" 2\nvoid func( int year, char* szFormat, ... );\n\n\n\n\nint main()\n{\n    func(2015, (\"Hello %s\", \"world\"));\n    func(2015, \"Hello %s\", \"world\");\n    return 0;\n}\n</code></pre>\n\n<p>The relevant part is here:</p>\n\n<pre><code>    M1(2015, (\"Hello %s\", \"world\")); // this doesn't works\n    M1(2015, \"Hello %s\", \"world\");   // this way works\n\n    func(2015, \"Hello %s\", \"world\");\n    func(2015, \"Hello %s\", \"world\");\n</code></pre>\n\n<p>The macro is only interpreted by the preprocessor. If you put two parentheses levels, you get one extra in the function call, and it does not give expected result. Here compiler will just see the comma operator in the inner bloc, would see a void evaluataion or <code>\"Hello %s\"</code> followed with <code>\"world\"</code> and it will end in <code>func(2015, \"world\");</code>. But <code>func(2015, (\"Hello %d\", 12));</code> would end in <code>func(2015, 10);</code> with a syntax error <em>no known conversion from 'int' to 'char *' for 2nd argument</em></p>\n\n<hr>\n\n<p>In first code, you had <code>#define M2(b) func b</code> that removed one parentheses level, so</p>\n\n<pre><code>M1((\"Hello %s %d\\n\", \"world\",2015));\n</code></pre>\n\n<p>was (correctly) preprocessed as</p>\n\n<pre><code>func (\"Hello %s %d\\n\", \"world\",2015);\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5244734, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Cl_eaEbYHMo/AAAAAAAAAAI/AAAAAAAAGOU/gKd1qcPV_es/photo.jpg?sz=128", "display_name": "Marcus Paulo Botelho", "link": "https://stackoverflow.com/users/5244734/marcus-paulo-botelho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 32118585, "answer_count": 1, "score": 2, "last_activity_date": 1440231719, "creation_date": 1440010842, "last_edit_date": 1440070968, "question_id": 32103575, "link": "https://stackoverflow.com/questions/32103575/difference-between-variadic-parameters-with-and-without-parentheses", "title": "Difference between variadic parameters with and without parentheses", "body": "<p>Why using parentheses in the first code works and the second doesn't?</p>\n\n<p>In the first code I'm using only variadic parameter with parentheses and the seconde one have a Integer parameter with a variadic, if I use parentheses when I call the function it won't work.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n\nvoid func( char* szFormat, ... );\n\n#define M1(a)  M2(a)\n#define M2(b) func b\n\nint main()\n{\n    M1((\"Hello %s %d\\n\", \"world\",2015)); // this works\n    return 0;\n}\n\nvoid func( char* szFormat, ... )\n{\n    char      trace_str[1000];\n    va_list   arg_list;\n    std::string str;\n\n    va_start(arg_list, szFormat);\n    vsprintf(trace_str, szFormat, arg_list);\n    va_end(arg_list);\n\n    str += trace_str;\n    std::cout &lt;&lt; str &lt;&lt; std::endl;\n}\n</code></pre>\n\n<p>This code below doesn't work using parentheses.</p>\n\n<pre><code>#include &lt;bits/stdc++.h&gt;\n\nvoid func( int year, char* szFormat, ... );\n\n#define M1(a,...)  M2(a, __VA_ARGS__)\n#define M2 func \n\nint main()\n{\n // M1(2015, (\"Hello %s\", \"world\")); // this doesn't works\n    M1(2015, \"Hello %s\", \"world\");   // this way works\n    return 0;\n}\n\nvoid func(int year, char* szFormat, ... )\n{\n    char      trace_str[1000];\n    va_list   arg_list;\n    std::string str;\n\n\n    va_start(arg_list, szFormat);\n    vsprintf(trace_str, szFormat, arg_list);\n    va_end(arg_list);\n\n    str += trace_str;\n    std::cout &lt;&lt; str &lt;&lt; \" \" &lt;&lt; year &lt;&lt; std::endl;\n\n}\n</code></pre>\n\n<p>Thanks everyone!</p>\n"}, {"tags": ["c++", "function", "templates", "pointers"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440011058, "post_id": 32103470, "comment_id": 52101660, "body": "What did you try to make your struct and functions templates? Where are you stuck with that? Please edit your question and show as sample, and the exact error messages."}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1440011685, "post_id": 32103470, "comment_id": 52102006, "body": "In case you didn&#39;t realize it, much of the basic functionality you seem to be attempting to implement (associating a name with a function) is already provided by <code>std::map</code>/<code>std::unordered_map</code>."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "edited": false, "score": 0, "creation_date": 1440011763, "post_id": 32103470, "comment_id": 52102042, "body": "@JerryCoffin and their template functions already exist too <a href=\"http://en.cppreference.com/w/cpp/utility/functional/plus\" rel=\"nofollow noreferrer\">std::plus</a> and <a href=\"http://en.cppreference.com/w/cpp/utility/functional/minus\" rel=\"nofollow noreferrer\">std::minus</a> among others"}, {"owner": {"reputation": 435402, "user_id": 179910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8962238339d771f0348967be6f97b1b?s=128&d=identicon&r=PG", "display_name": "Jerry Coffin", "link": "https://stackoverflow.com/users/179910/jerry-coffin"}, "reply_to_user": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 0, "creation_date": 1440015286, "post_id": 32103470, "comment_id": 52104195, "body": "@CoryKramer: Good point."}], "answers": [{"comments": [{"owner": {"reputation": 445, "user_id": 2896993, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BWY7T.jpg?s=128&g=1", "display_name": "kar", "link": "https://stackoverflow.com/users/2896993/kar"}, "edited": false, "score": 0, "creation_date": 1440082634, "post_id": 32103691, "comment_id": 52135585, "body": "Thank you. I need to know, what changes I need to undergo, if I move all the template functions into a separate header file (say tempFunc.h) and define the arthimeticfunc above main()?.. I tried on this way and getting no valid pointer for the function &#39;add&#39;"}, {"owner": {"reputation": 445, "user_id": 2896993, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BWY7T.jpg?s=128&g=1", "display_name": "kar", "link": "https://stackoverflow.com/users/2896993/kar"}, "edited": false, "score": 0, "creation_date": 1440164236, "post_id": 32103691, "comment_id": 52172811, "body": "whether we need to use &amp;add to just add.. it works fine for both??!!"}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": false, "score": 0, "last_activity_date": 1440011276, "creation_date": 1440011276, "answer_id": 32103691, "question_id": 32103470, "link": "https://stackoverflow.com/questions/32103470/template-function-to-a-function-pointer-inside-a-struct/32103691#32103691", "title": "template function to a function pointer inside a struct", "body": "<p>If I understand your question, you want your <code>struct</code> and functions to be templates?</p>\n\n<pre><code>template &lt;typename T&gt;\nstruct arithmeticfunc\n{\n    std::string funcName;\n    T (*funPtr)(T, T);\n};\n\ntemplate &lt;typename T&gt;\nT add(T a, T b)\n{\n    return a+b;\n}\n\ntemplate &lt;typename T&gt;\nT sub(T a, T b)\n{\n    return a-b;\n}\n</code></pre>\n\n<p>Then you could use them as follows</p>\n\n<pre><code>int main()\n{\n    arithmeticfunc&lt;int&gt; func[2] = { {\"ADDITION\", &amp;add},\n                                    {\"SUBTRACT\", &amp;sub} };\n\n    for(int i = 0; i &lt; 2; i++)\n    {\n        std::cout &lt;&lt; \"Result of Function : \" \n                  &lt;&lt; func[i].funcName\n                  &lt;&lt; \" is \"\n                  &lt;&lt; func[i].funPtr(2,1)\n                  &lt;&lt; std::endl;\n    }\n}\n</code></pre>\n\n<p>Note that you can no longer use the <code>%d</code> format code if you are using templates, because the type of <code>T</code> might not be an integer, it may be a <code>double</code>, etc.</p>\n"}], "owner": {"reputation": 445, "user_id": 2896993, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/BWY7T.jpg?s=128&g=1", "display_name": "kar", "link": "https://stackoverflow.com/users/2896993/kar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1440104429, "creation_date": 1440010501, "question_id": 32103470, "link": "https://stackoverflow.com/questions/32103470/template-function-to-a-function-pointer-inside-a-struct", "title": "template function to a function pointer inside a struct", "body": "<p>I wanted to use template function(s) referencing via its pointer using function pointer which is available inside a structure like</p>\n\n<pre><code>typedef struct arithmeticfunc {\n          string funcName;\n          int (*funPtr)(int,int);\n};\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>int add(int a, int b)\n    return (a+b);\n\nint sub(int a, int b)\n    return (a-b);\n\narithmeticfunc func[2] = { {\"ADDITION\", &amp;add},\n                           {\"SUBTRACT\", &amp;sub} };\n\nfor(int i = 0; i &lt; 2; i++) {\n    printf(\"Result of Function : %s is %d\",func[i].funcName.c_str(),func[i]-&gt;funcPtr(2,1));\n}\n</code></pre>\n\n<p>Now I need to use a template function instead of the normal static function.</p>\n\n<p>Kindly let me know, am I doing on the right method.</p>\n"}, {"tags": ["c++", "mfc", "const-correctness", "const-cast", "const-reference"], "comments": [{"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1440054043, "post_id": 32103323, "comment_id": 52116376, "body": "The real question is... do you have to use the parameter <code>const CArray&lt;CItem*&gt; *ItemsInput</code> you gave the function <code>Function</code> in the caller function again ?"}], "answers": [{"tags": [], "owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "is_accepted": true, "score": 0, "last_activity_date": 1440179848, "last_edit_date": 1495542199, "creation_date": 1440065568, "answer_id": 32115498, "question_id": 32103323, "link": "https://stackoverflow.com/questions/32103323/how-to-get-alternative-value-from-function-that-gives-wanted-data-via-non-const/32115498#32115498", "title": "How to get alternative value from function that gives wanted data via non-const output parameter for assigning reference-to-const variable to it?", "body": "<p>I declared the lambda-function, but I forget to call it. So, <strong>parentheses</strong> are needed. Therefore, notice the <strong>()</strong> after the declaration with the goal of calling for its execution:</p>\n\n<pre><code>const CArray&lt;CItem*&gt;&amp; Items=\n    (ItemsInput!= nullptr)?\n        *ItemsInput\n    :\n        [this]() -&gt; const CArray&lt;CItem*&gt;&amp;\n        {\n            CArray&lt;CItem*&gt; InnerItems;\n            GetContainer().GetInnerItems(InnerItems, NULL, true);\n            return (InnerItems);\n        } ()\n;\n</code></pre>\n\n<p>It is now compiling fine. </p>\n\n<p>But this lead to a new question: <a href=\"https://stackoverflow.com/questions/32141754/lambda-did-not-automatically-deduce-return-type\">Lambda did not automatically deduce return type</a></p>\n"}], "owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 32115498, "answer_count": 1, "score": 1, "last_activity_date": 1440179848, "creation_date": 1440010014, "last_edit_date": 1440064832, "question_id": 32103323, "link": "https://stackoverflow.com/questions/32103323/how-to-get-alternative-value-from-function-that-gives-wanted-data-via-non-const", "title": "How to get alternative value from function that gives wanted data via non-const output parameter for assigning reference-to-const variable to it?", "body": "<p>The commented code works, but it is not a reference, so it has more computational cost.</p>\n\n<pre><code>void CClass::Function(const CArray&lt;CItem*&gt;* ItemsInput) const\n{\n    /*\n    CArray&lt;CItem*&gt; Items;\n\n    if (ItemsInput != nullptr)\n        Items.Copy(*ItemsInput);\n    else\n        GetContainer().GetInnerItems(Items, NULL, true);\n    */\n\n\n    const CArray&lt;CItem*&gt;&amp; Items=\n        (ItemsInput!= nullptr)?\n            *ItemsInput\n        :\n        [this] () -&gt; const CArray&lt;CItem*&gt; \n        {\n            CArray&lt;CItem*&gt; InnerItems;\n            GetContainer().GetInnerItems(InnerItems, NULL, true);\n            return const_cast &lt;const CArray&lt;CItem*&gt;&amp; &gt; (InnerItems);\n        }\n    ;\n\n    //...\n }\n</code></pre>\n\n<p>The uncommented code is the maximal extent where I got trying to use an approach of ternary operator and lambda expression, but until now it was unsuccessful, giving the error:</p>\n\n<pre><code>1&gt;Class.cpp(line of the last semicolon): error C2446: ':' : no conversion from '`anonymous-namespace'::&lt;lambda2&gt;' to 'const CArray&lt;TYPE&gt;'\n1&gt;          with\n1&gt;          [\n1&gt;              TYPE=CItem *\n1&gt;          ]\n1&gt;          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called\n</code></pre>\n\n<p>Important things to notice:</p>\n\n<ul>\n<li>I pass <code>this</code> on the lambda capture, just to have access to the <code>GetInnerItems</code> method</li>\n<li>The <code>GetInnerItems</code> method gives the inner items via its first parameter of type <code>CArray&lt;CItem*&gt;&amp;</code>, which is non-const and could never be const.</li>\n</ul>\n\n<p>Therefore, it seems to me the problem is the way the <code>GetInnerItems</code> works and has nothing to do with ternary operator. Assume I can not change its signature to return a <code>CArray</code>, because <code>CArray</code>is derived from <code>CObject</code> which declares:</p>\n\n<pre><code>class AFX_NOVTABLE CObject\n{\n//...\nprivate:\n    CObject(const CObject&amp; objectSrc);              // no implementation\n    void operator=(const CObject&amp; objectSrc);       // no implementation\n//...\n}\n</code></pre>\n\n<p>So, questions are:</p>\n\n<ul>\n<li><p>How can I assign the alternative value to the <strong>reference-to-const</strong>  <code>Items</code> variable keeping const-correctness?</p></li>\n<li><p>If you successfully answered the first question using a <code>const_cast</code>, can you now give a solution without it?</p></li>\n</ul>\n"}, {"tags": ["c++", "regex", "c++11", "match"], "answers": [{"tags": [], "owner": {"reputation": 1748, "user_id": 17315, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e70d6a10e779d77b290891386147702?s=128&d=identicon&r=PG", "display_name": "Sqeaky", "link": "https://stackoverflow.com/users/17315/sqeaky"}, "is_accepted": false, "score": 2, "last_activity_date": 1440009477, "creation_date": 1440009477, "answer_id": 32103171, "question_id": 32103030, "link": "https://stackoverflow.com/questions/32103030/determining-the-location-of-c11-regular-expression-matches/32103171#32103171", "title": "Determining the location of C++11 regular expression matches", "body": "<p>I will not mark this as and answer until 72 hours have passed and no better answers are present.</p>\n\n<p>Before asking this I presumed smatch::position took no arguments I cared about, because when I read the <a href=\"http://en.cppreference.com/w/cpp/regex/match_results/position\" rel=\"nofollow\">cppreference</a> page the \"sub\" parameter was not obviously an index into the container of matches. I thought it had something to do with \"sub\"strings and the offset value of the whole match.</p>\n\n<p>So my answer is:</p>\n\n<pre><code>cout &lt;&lt; \"Needle Position- \" &lt;&lt; findings.position(1) &lt;&lt; endl;\n</code></pre>\n\n<p>Any explanation on this design, or other issues my line of thinking may have caused would be appreciated.</p>\n"}, {"comments": [{"owner": {"reputation": 1748, "user_id": 17315, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e70d6a10e779d77b290891386147702?s=128&d=identicon&r=PG", "display_name": "Sqeaky", "link": "https://stackoverflow.com/users/17315/sqeaky"}, "edited": false, "score": 0, "creation_date": 1440365667, "post_id": 32109033, "comment_id": 52229874, "body": "I couldn&#39;t find the sub_match documentation without your help even though that was exactly what I was looking for.  I see now you must have gone to the <a href=\"http://en.cppreference.com/w/cpp/regex/match_results\" rel=\"nofollow noreferrer\">match_results</a> from the regex_match parameters, then to the <a href=\"http://en.cppreference.com/w/cpp/regex/sub_match\" rel=\"nofollow noreferrer\">sub_match</a> page from the template parameters. It seems obvious now, but you asked the question &quot;What is the of this thing being returned by the [] operator?&quot; and that is what I needed to ask."}], "tags": [], "owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "is_accepted": true, "score": 1, "last_activity_date": 1440040911, "creation_date": 1440040911, "answer_id": 32109033, "question_id": 32103030, "link": "https://stackoverflow.com/questions/32103030/determining-the-location-of-c11-regular-expression-matches/32109033#32109033", "title": "Determining the location of C++11 regular expression matches", "body": "<p>According to the <a href=\"http://en.cppreference.com/w/cpp/regex/regex_match\" rel=\"nofollow\">documentation</a>, you can access the iterator pointing to the beginning and the end of the captured text via <code>match[n].first</code> and <code>match[n].second</code>. To get the start and end indices, just do pointer arithmetic with <code>haystack.begin()</code>.</p>\n\n<pre><code>if (findings[1].matched) {\n    cout &lt;&lt; \"[\" &lt;&lt; findings[1].first - haystack.begin() &lt;&lt; \"-\"\n                &lt;&lt; findings[1].second - haystack.begin() &lt;&lt; \"] \"\n                &lt;&lt; findings[1] &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Except for the main match (index 0), capturing groups may or may not capture anything. In such cases, <code>first</code> and <code>second</code> will point to the end of the string.</p>\n\n<p>I also demonstrate the <code>matched</code> property of <a href=\"http://en.cppreference.com/w/cpp/regex/sub_match\" rel=\"nofollow\"><code>sub_match</code></a> object. While it's unnecessary in this case, in general, if you want to print out the indices of the capturing groups, it's necessary to check whether the capturing group matches anything first.</p>\n"}], "owner": {"reputation": 1748, "user_id": 17315, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/5e70d6a10e779d77b290891386147702?s=128&d=identicon&r=PG", "display_name": "Sqeaky", "link": "https://stackoverflow.com/users/17315/sqeaky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "accepted_answer_id": 32109033, "answer_count": 2, "score": 1, "last_activity_date": 1440079814, "creation_date": 1440008995, "last_edit_date": 1440079814, "question_id": 32103030, "link": "https://stackoverflow.com/questions/32103030/determining-the-location-of-c11-regular-expression-matches", "title": "Determining the location of C++11 regular expression matches", "body": "<p>How do I efficiently determine the location of a capture group inside a searched string? Getting the location of the entire match is easy, but I see no obvious ways to get at capture groups beyond the first.</p>\n\n<p>This is a simplified example, lets presume \"a*\" and \"b*\" are complicated regexes that are expensive to run.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;regex&gt;\n#include &lt;string&gt;\nusing namespace std;\n\nint main()   \n{\n    regex matcher(\"a*(needle)b*\");\n    smatch findings;\n    string haystack(\"aaaaaaaaneedlebbbbbbbbbbbbbb\");\n\n    if( regex_match(haystack, findings, matcher) )\n    {\n        // What do I put here to know how the offset of \"needle\" in the \n        // string haystack?\n\n        // This is the position of the entire, which is\n        // always 0 with regex_match, with regex_search\n        cout &lt;&lt; \"smatch::position - \" &lt;&lt; findings.position() &lt;&lt; endl;\n\n        // Is this just a string or what? Are there member functions\n        // That can be called?\n        cout &lt;&lt; \"Needle - \" &lt;&lt; findings[1] &lt;&lt; endl;\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>If it helps I built this question in Coliru: <a href=\"http://coliru.stacked-crooked.com/a/885a6b694d32d9b5\" rel=\"nofollow\">http://coliru.stacked-crooked.com/a/885a6b694d32d9b5</a></p>\n"}, {"tags": ["c++", "compilation", "arm", "scons", "iar"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 3901747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b71bfde7d0930cf7e00d8e202c75947b?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/3901747/sid"}, "edited": false, "score": 0, "creation_date": 1440060937, "post_id": 32103411, "comment_id": 52120417, "body": "env = Environment(ENV = os.environ) did the job for me ... also thanks for the MAN page .. i was stuck with the user guide."}], "tags": [], "owner": {"reputation": 3807, "user_id": 628011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4e665fcec7fa0bc88afbccf60f1c882?s=128&d=identicon&r=PG&f=1", "display_name": "dirkbaechle", "link": "https://stackoverflow.com/users/628011/dirkbaechle"}, "is_accepted": true, "score": 1, "last_activity_date": 1440010287, "creation_date": 1440010287, "answer_id": 32103411, "question_id": 32102827, "link": "https://stackoverflow.com/questions/32102827/unable-to-compile-with-iar-arm-compiler-when-building-with-scons-license-che/32103411#32103411", "title": "Unable to compile with IAR arm compiler when building with scons ... License check failed", "body": "<p>Including, or better: propagating, the PATH variable might not be enough. The compiler in question is obviously using additional environment variables to find its license files...assuming that you have a license indeed and compiling works fine in a standard shell.</p>\n\n<p>Try including the whole shell environment with:</p>\n\n<pre><code>import os\nenv = Environment(ENV = os.environ)\n</code></pre>\n\n<p>and see if this makes things work.\nIf not, please post your current SConstruct.</p>\n\n<p>Regarding your comment about 2., the CPPPATH variable is for paths that should get scanned for header files (implicit dependencies via #include statements)...so it shouldn't have anything to do with your problem. Anyway, please check the UserGuide ( <a href=\"http://www.scons.org/doc/production/HTML/scons-user.html\" rel=\"nofollow\">http://www.scons.org/doc/production/HTML/scons-user.html</a> ) and the MAN page for the proper usage of these simple constructs.</p>\n"}, {"tags": [], "owner": {"reputation": 1088, "user_id": 15209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fdbd8a4d69b72cc8b5044900064d9fc?s=128&d=identicon&r=PG", "display_name": "ofaurax", "link": "https://stackoverflow.com/users/15209/ofaurax"}, "is_accepted": false, "score": 0, "last_activity_date": 1450452889, "creation_date": 1450452889, "answer_id": 34359030, "question_id": 32102827, "link": "https://stackoverflow.com/questions/32102827/unable-to-compile-with-iar-arm-compiler-when-building-with-scons-license-che/34359030#34359030", "title": "Unable to compile with IAR arm compiler when building with scons ... License check failed", "body": "<p>I've solved this problem by setting:</p>\n\n<pre><code>env['ENV']['SYSTEMDRIVE'] = ['C:']\n</code></pre>\n\n<p>which is equivalent to:</p>\n\n<pre><code>export SYSTEMDRIVE=C:\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 3901747, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b71bfde7d0930cf7e00d8e202c75947b?s=128&d=identicon&r=PG&f=1", "display_name": "Sid", "link": "https://stackoverflow.com/users/3901747/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1318, "favorite_count": 0, "accepted_answer_id": 32103411, "answer_count": 2, "score": 2, "last_activity_date": 1450452889, "creation_date": 1440008345, "last_edit_date": 1592644375, "question_id": 32102827, "link": "https://stackoverflow.com/questions/32102827/unable-to-compile-with-iar-arm-compiler-when-building-with-scons-license-che", "title": "Unable to compile with IAR arm compiler when building with scons ... License check failed", "body": "<p>I am able to point to the iccarm compiler, but receive following error:</p>\n<blockquote>\n<p>Fatal error[LMS001]: License check failed. Use the IAR License Manager</p>\n</blockquote>\n<p>I have</p>\n<ol>\n<li><p>Included the external os path</p>\n<p><code>&quot;env = Environment(platform='cygwin',ENV={'PATH': os.environ['PATH']})&quot;</code></p>\n</li>\n<li><p>Also specifically included path for compiler in CPPPATH.</p>\n</li>\n<li><p>Did also try with an evaluation version of ARM compiler</p>\n</li>\n</ol>\n<p>Could anybody Please let me know what is the missing link?</p>\n"}, {"tags": ["android", "c++", "android-ndk", "openssl", "djinni"], "comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440026856, "post_id": 32102647, "comment_id": 52108807, "body": "Oh man... Android native build system sucks. And Android Studio used to suck because it lacked JNI support. If possibly, you might try <a href=\"https://wiki.openssl.org/index.php/Android\" rel=\"nofollow noreferrer\">OpenSSL and Android</a> on the OpenSSL wiki. At minimum, you should at least start the OpenSSL scripts to get OpenSSL&#39;s recommended <code>CFLAGS</code> to use under Android&#39;s build system."}, {"owner": {"reputation": 144, "user_id": 2523220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63c633ed31e3e9da4189a244bd2ec10?s=128&d=identicon&r=PG", "display_name": "Horv", "link": "https://stackoverflow.com/users/2523220/horv"}, "reply_to_user": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1440444723, "post_id": 32102647, "comment_id": 52265702, "body": "Yep, thanks for the suggestion :D Unfortunatly I&#39;m on windows, so I can&#39;t do anything with shellscript :( (I&#39;ve tried with msys2, but it didn&#39;t worked)"}, {"owner": {"reputation": 52300, "user_id": 192373, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/83a45711c4c32eeeb3826d279e50f8ab?s=128&d=identicon&r=PG", "display_name": "Alex Cohn", "link": "https://stackoverflow.com/users/192373/alex-cohn"}, "edited": false, "score": 0, "creation_date": 1460984660, "post_id": 32102647, "comment_id": 60977769, "body": "probably the easiest solution is to install Ubuntu in a VirtualBox."}], "answers": [{"tags": [], "owner": {"reputation": 1374, "user_id": 1158589, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/6620670ffcfd6a34ae6213572347c703?s=128&d=identicon&r=PG", "display_name": "stephane k.", "link": "https://stackoverflow.com/users/1158589/stephane-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1529399346, "creation_date": 1529399346, "answer_id": 50924560, "question_id": 32102647, "link": "https://stackoverflow.com/questions/32102647/android-ndk-linking-openssl/50924560#50924560", "title": "Android NDK linking OpenSSL", "body": "<p>I do not believe you can have shared libraries as such in your app, you can only load an so object from Java with System.loadLibrary()</p>\n\n<p>You need to compile OpenSSL statically into the rest of your C++ code (as in link the .a crypto and SSL libraries)</p>\n\n<p>Here is an example</p>\n\n<p><a href=\"https://github.com/gcesarmza/curl-android-ios/blob/master/test-android-project/app/src/main/jni/Android.mk\" rel=\"nofollow noreferrer\">https://github.com/gcesarmza/curl-android-ios/blob/master/test-android-project/app/src/main/jni/Android.mk</a></p>\n\n<p>the curl Android iOS project does that, it is worth having a look <a href=\"https://github.com/gcesarmza/curl-android-ios\" rel=\"nofollow noreferrer\">https://github.com/gcesarmza/curl-android-ios</a></p>\n"}], "owner": {"reputation": 144, "user_id": 2523220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b63c633ed31e3e9da4189a244bd2ec10?s=128&d=identicon&r=PG", "display_name": "Horv", "link": "https://stackoverflow.com/users/2523220/horv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3614, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1529399346, "creation_date": 1440007756, "last_edit_date": 1440473298, "question_id": 32102647, "link": "https://stackoverflow.com/questions/32102647/android-ndk-linking-openssl", "title": "Android NDK linking OpenSSL", "body": "<p>I want to use openssl to my android ndk project.</p>\n\n<p>But when I build it, I got these errors:</p>\n\n<blockquote>\n  <p>Error:(38) undefined reference to <code>SSL_library_init'\n  Error:(39) undefined reference to</code>SSL_load_error_strings'\n  Error:(40) undefined reference to <code>OPENSSL_add_all_algorithms_noconf'\n  Error:(42) undefined reference to</code>CRYPTO_num_locks'\n  Error:(45) undefined reference to <code>CRYPTO_set_locking_callback'\n  Error:(46) undefined reference to</code>CRYPTO_set_id_callback'\n  etc..</p>\n</blockquote>\n\n<p>I've included two files to Android.mk (one to ssl, one to crypto):</p>\n\n<pre><code>//libcrypto.mk\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE    := ssl-crypto\nLOCAL_SRC_FILES := ../libs/system/$(TARGET_ARCH_ABI)/libcrypto.so\n\ninclude $(PREBUILT_SHARED_LIBRARY)\n//libssl.mk\ninclude $(CLEAR_VARS)\n\nLOCAL_MODULE    := ssl-ssl\nLOCAL_SRC_FILES := ../libs/system/$(TARGET_ARCH_ABI)/libssl.so\n\ninclude $(PREBUILT_SHARED_LIBRARY)\n</code></pre>\n\n<p>And I've added this to app/build.gradle:</p>\n\n<pre><code>    stl = \"gnustl_static\"\n\n    cppFlags  += \"-I${file(\"../../../../support-lib/jni\")}\".toString()\n    cppFlags  += \"-I${file(\"../../../generated-src/cpp\")}\".toString()\n    cppFlags  += \"-I${file(\"../../../taps-api\")}\".toString()\n    cppFlags  += \"-I${file(\"../../../include\")}\".toString()\n\n    cppFlags  += \"-std=c++11\"\n    cppFlags  += \"-DASIO_STANDALONE\"\n\n    cppFlags  += \"-lssl\"\n    cppFlags  += \"-lcrypto\"\n</code></pre>\n\n<p>I'm using openssl from C++, and generate jni wrappers with dropbox/djinni.\nAlso I'm using Android Studio 1.3 stable and gradle 2.5</p>\n\n<p>EDIT:\nI changed my build.gradle in the app:</p>\n\n<pre><code>abiFilters += \"armeabi\"\nabiFilters += \"armeabi-v7a\"\nabiFilters += \"x86\"\nabiFilters += \"mips\"\nldLibs += ['ssl', 'crypto']     \n\nandroid.sources {\n   main {\n      jniLibs {\n        source {\n          srcDirs 'jni/libs'\n        }\n   }\n}\n</code></pre>\n\n<p>It worked, but the app crashed (because it's searching the libs in a wrong directory in the apk...).\nAlso I found that in the new experimental gradle recently not supports this 'third-party shared lib including thing'. So I'll have to wait for it. \n(Also I can try something with the makefiles, but default they skipped by AS)</p>\n"}, {"tags": ["c++", "mfc", "direct3d", "stereo-3d", "nvapi"], "comments": [{"owner": {"reputation": 11, "user_id": 5244549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32de58ee973a3d56843b828aaa38e419?s=128&d=identicon&r=PG&f=1", "display_name": "GATU", "link": "https://stackoverflow.com/users/5244549/gatu"}, "edited": false, "score": 0, "creation_date": 1440008160, "post_id": 32102611, "comment_id": 52099816, "body": "just ran across the following but not sure if it would work.....: <a href=\"https://channel9.msdn.com/Events/Ch9Live/Channel-9-Live-at-BUILD-2012/Introduction-to-DirectX-3D-D3D-\" rel=\"nofollow noreferrer\">channel9.msdn.com/Events/Ch9Live/Channel-9-Live-at-BUILD-201&zwnj;&#8203;2/&hellip;</a>"}, {"owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1440048465, "post_id": 32102611, "comment_id": 52114007, "body": "You could switch to DirectX if that does the job for you. As for the term beginner friendly, good luck. Is the custom engine based on the NVAPI too or not ? If not, you could maybe handle this in some way. Without more specific information this is too vague."}, {"owner": {"reputation": 11, "user_id": 5244549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32de58ee973a3d56843b828aaa38e419?s=128&d=identicon&r=PG&f=1", "display_name": "GATU", "link": "https://stackoverflow.com/users/5244549/gatu"}, "reply_to_user": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1440077148, "post_id": 32102611, "comment_id": 52131416, "body": "The custom engine uses NVAPI for handling stereoscopic active shutter 3D. Its the NVAPI code I need to replace with something else"}, {"owner": {"reputation": 11, "user_id": 5244549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32de58ee973a3d56843b828aaa38e419?s=128&d=identicon&r=PG&f=1", "display_name": "GATU", "link": "https://stackoverflow.com/users/5244549/gatu"}, "reply_to_user": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "edited": false, "score": 0, "creation_date": 1440077169, "post_id": 32102611, "comment_id": 52131438, "body": "What specifics do you need?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5244549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32de58ee973a3d56843b828aaa38e419?s=128&d=identicon&r=PG&f=1", "display_name": "GATU", "link": "https://stackoverflow.com/users/5244549/gatu"}, "edited": false, "score": 0, "creation_date": 1440103994, "post_id": 32128137, "comment_id": 52147637, "body": "that looks good but I can&#39;t get the sample to compile. something about cannot register the app error....  <a href=\"https://stackoverflow.com/questions/19331894/error-dep0700-registration-of-the-app-failed-error-0x80070002-windows-cann\" title=\"error dep0700 registration of the app failed error 0x80070002 windows cann\">stackoverflow.com/questions/19331894/&hellip;</a>       tried the solutions mentioned in the linked post but no go. ideas?"}], "tags": [], "owner": {"reputation": 13242, "user_id": 29152, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/deee1379ed13c9a1542b787601bbd738?s=128&d=identicon&r=PG", "display_name": "DuckMaestro", "link": "https://stackoverflow.com/users/29152/duckmaestro"}, "is_accepted": false, "score": 0, "last_activity_date": 1440103820, "creation_date": 1440103820, "answer_id": 32128137, "question_id": 32102611, "link": "https://stackoverflow.com/questions/32102611/c-mfc-windows-nvidia-3d-active-shutter-api-alternative/32128137#32128137", "title": "C++ MFC Windows - NVIDIA 3D Active Shutter API Alternative", "body": "<p>In Direct3D there is no vendor-independent way to enable active stereo until <strong>Direct3D 11.1</strong>. Prior to 11.1, you have no choice but to use the AMD and NVIDIA specific non-standard methods. </p>\n\n<p>Also note that Direct3D 9 and Direct3D 11.1 are very different APIs, and Direct3D 11.1 stereoscopy requires Windows 8 or later. Porting effort may or  may not be substantial.</p>\n\n<p>If you're interested in Direct3D stereoscopy you can start at this MSDN <a href=\"https://code.msdn.microsoft.com/Direct3D-111-Simple-Stereo-9b2b61aa\" rel=\"nofollow\">sample</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 5244549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32de58ee973a3d56843b828aaa38e419?s=128&d=identicon&r=PG&f=1", "display_name": "GATU", "link": "https://stackoverflow.com/users/5244549/gatu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1440197625, "creation_date": 1440007645, "last_edit_date": 1440197625, "question_id": 32102611, "link": "https://stackoverflow.com/questions/32102611/c-mfc-windows-nvidia-3d-active-shutter-api-alternative", "title": "C++ MFC Windows - NVIDIA 3D Active Shutter API Alternative", "body": "<p>I was handed a NVIDIA Active Shutter 3D program that needs to be converted to not be dependent on NVIDIA GPU's. I've never handled graphics API's and am having a hard time finding an alternative API that will work with what I have.</p>\n\n<p>Can someone please point me in the right direction?</p>\n\n<p>Basically I just need the existing code to work on a Samsung Active Shutter HDTV without using NVIDIA anything.</p>\n\n<p>Existing program is c++ mfc windows standalone and uses NVAPI (dx9 VS2008 project) and a completely custom engine that I didn't code.</p>\n\n<p>Open to any and all reasonable suggestions. I'm not a coding veteran so please try to keep it as beginner friendly as possible. I normally do c# so i'm a bit out of my element with this c++ stuff.</p>\n\n<p>Thanks ahead of time for the help!</p>\n"}, {"tags": ["c++", "unnamed-namespace"], "comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 2, "creation_date": 1440007767, "post_id": 32102486, "comment_id": 52099592, "body": "There is close frenzy on SO and it needs to stop."}, {"owner": {"reputation": 9309, "user_id": 2963099, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TtYW1.gif?s=128&g=1", "display_name": "Glenn Teitelbaum", "link": "https://stackoverflow.com/users/2963099/glenn-teitelbaum"}, "edited": false, "score": 0, "creation_date": 1440172278, "post_id": 32102486, "comment_id": 52178509, "body": "The question has reasonable scope and can be answered"}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "edited": false, "score": 1, "creation_date": 1440008826, "post_id": 32102585, "comment_id": 52100238, "body": "I just tried this: I put the same class declaration in the global namespace in multiple files and I didn&#39;t get any errors. It appears that the types are treated as local to the translation unit. So additionally putting them into unnamed namespaces seems to add no value?"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "edited": false, "score": 3, "creation_date": 1440009544, "post_id": 32102585, "comment_id": 52100717, "body": "@FrancisXavier Try using a non-trivial default constructor: <code>struct helper { helper() { std::cout &lt;&lt; __FILE__ &lt;&lt; &quot;\\n&quot;; } };</code> Define two <code>helper</code> in different files, construct an instance of each one from a function in the corresponding file, call both functions from <code>main</code>. Compile <b>without</b> optimizations. There will be two symbols for <code>helper::helper()</code>, and since it&#39;s (implicitly) inline, one will be thrown away. The remaining one will be called from both functions (gcc 4.9.2 on linux x64, this behaviour is not guaranteed)."}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440009922, "post_id": 32102585, "comment_id": 52100969, "body": "Yes, of course. I&#39;ve appended a slight hint at UB, but the main reason for my comment was of course to show an example where something unexpected happens. -- Other bad things happen e.g. when the type is used as a parameter or return type of a function (even indirectly as a data member of a type used that way). -- Edit: d&#39;oh, I should have scrolled down further and read R Sahu&#39;s answer before commenting."}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "reply_to_user": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "edited": false, "score": 0, "creation_date": 1440087633, "post_id": 32102585, "comment_id": 52138874, "body": "@dyp Reg. your first comment. in that particular case he is not actually violating ODR, is he? given that the <code>helper</code> definition would be word-for-word identical?"}, {"owner": {"reputation": 5246, "user_id": 601567, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354e6825881d0dbb29130bdd4c0e560e?s=128&d=identicon&r=PG", "display_name": "ForeverLearning", "link": "https://stackoverflow.com/users/601567/foreverlearning"}, "edited": false, "score": 0, "creation_date": 1440090059, "post_id": 32102585, "comment_id": 52140088, "body": "Ah! I completely missed the <code>__FILE__</code> directive! I get it now. Also I was using loose terminology. I did mean tokens."}], "tags": [], "owner": {"reputation": 140851, "user_id": 1120273, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4cbcb185abce0204cf5ac705ba32d53a?s=128&d=identicon&r=PG", "display_name": "Dietmar K&#252;hl", "link": "https://stackoverflow.com/users/1120273/dietmar-k%c3%bchl"}, "is_accepted": true, "score": 16, "last_activity_date": 1440009349, "last_edit_date": 1440009349, "creation_date": 1440007550, "answer_id": 32102585, "question_id": 32102486, "link": "https://stackoverflow.com/questions/32102486/why-should-types-be-put-in-unnamed-namespaces/32102585#32102585", "title": "Why should types be put in unnamed namespaces?", "body": "<p>Where do you want to put local types other than the unnamed namespace? Types can't have a linkage specifier like <code>static</code>. If they are not publicly known, e.g., because they are declared in a header, there is a fair chance that names of local types conflict, e.g., when two translation units define types with the same name. In that case you'd end up with an ODR violation. Defining the types inside an unnamed namespace eliminates this possibility.</p>\n\n<p>To be a bit more concrete. Consider you have</p>\n\n<pre><code>// file demo.h\nint foo();\ndouble bar();\n\n// file foo.cpp\nstruct helper { int i; };\nint foo() { helper h{}; return h.i; }\n\n// file bar.cpp\nstruct helper { double d; }\ndouble bar() { helper h{}; return h.d; }\n\n// file main.cpp\n#include \"demo.h\"\nint main() {\n     return foo() + bar();\n}\n</code></pre>\n\n<p>If you link these three translation units, you have mismatching definitions of <code>helper</code> from <code>foo.cpp</code> and <code>bar.cpp</code>. The compiler/linker is not required to detect these but each type which is used in the program needs to have a consistent definition. Violating this constraints is known as violation of the \"one definition rule\" (ODR). Any violation of the ODR rule results in undefined behavior.</p>\n\n<p>Given the comment it seems a bit more convincing is needed. The relevant section of the standard is 3.2 [basic.def.odr] paragraph 6:</p>\n\n<blockquote>\n  <p>There can be more than one definition of a class type (Clause 9), enumeration type (7.2), inline function with external linkage (7.1.2), class template (Clause 14), non-static function template (14.5.6), static data member\n  of a class template (14.5.1.3), member function of a class template (14.5.1.1), or template specialization for which some template parameters are not specified (14.7, 14.5.5) in a program provided that each definition appears in a different translation unit, and provided the definitions satisfy the following requirements. Given such an entity named D defined in more than one translation unit, then each definition of D shall consist of the same sequence of tokens; and\n  [...]</p>\n</blockquote>\n\n<p>There are plenty of further constraints but \"shall consist of the same sequence of tokens\" is clearly sufficient to rule out e.g. the definitions in the demo above from being legal.</p>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "edited": false, "score": 1, "creation_date": 1440008321, "post_id": 32102652, "comment_id": 52099929, "body": "My point is, the types Initializer and Helper don&#39;t need to be in an unnamed namespace. Only the initializer variable does. If you declared the types outside the unnamed namespace, your code would work exactly the same. So why put them inside?"}, {"owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "reply_to_user": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "edited": false, "score": 1, "creation_date": 1440008452, "post_id": 32102652, "comment_id": 52100023, "body": "If multiple files have <code>Initializer</code> and <code>Helper</code> outside the unnamed namespace, there will be conflicts at link time."}, {"owner": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "edited": false, "score": 0, "creation_date": 1440008564, "post_id": 32102652, "comment_id": 52100096, "body": "No, even if multiple cpp files have Initializer and Helper outside the unnamed namespace, there will not be any conflicts! Try it. Types are local to the cpp file and are not visible outside."}, {"owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "reply_to_user": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "edited": false, "score": 3, "creation_date": 1440008938, "post_id": 32102652, "comment_id": 52100312, "body": "@FrancisXavier Not everything which works (or appears to work) is necessarily correct. Two different definitions of the same type are a violation of the One Definition Rule. Such a program has Undefined Behaviour and anything can happen. For example, if a call to a member function of such a type was not inlined, the linker could silently drop one of the conflicting definitions and redirect all calls to one body."}, {"owner": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "edited": false, "score": 0, "creation_date": 1440010248, "post_id": 32102652, "comment_id": 52101181, "body": "@RSahu: your linker error was not related to the struct Initializer being defined multiple times. It was because the function Initializer::Initializer() was being defined multiple times. My question was specifically about types, not functions or variables."}, {"owner": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "reply_to_user": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "edited": false, "score": 1, "creation_date": 1440010936, "post_id": 32102652, "comment_id": 52101587, "body": "@FrancisXavier You can&#39;t put the constructor definition in an unnamed namespace without also having the type declaration in the same unnamed namespace."}, {"owner": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "reply_to_user": {"reputation": 13954, "user_id": 3422652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/sQ3DW.jpg?s=128&g=1", "display_name": "Chris Drew", "link": "https://stackoverflow.com/users/3422652/chris-drew"}, "edited": false, "score": 0, "creation_date": 1440011730, "post_id": 32102652, "comment_id": 52102025, "body": "@ChrisDrew: Agreed. But my question was not about this. My question was about why the type should be put into an unnamed namespace. Whether the type has functions which are then defined outside of the type is unrelated."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "edited": false, "score": 0, "creation_date": 1440016531, "post_id": 32102652, "comment_id": 52104883, "body": "@FrancisXavier What do you mean? Functions are not defined either inside or outside a type. Member functions can be inlined in a class definition or not."}, {"owner": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440017184, "post_id": 32102652, "comment_id": 52105230, "body": "@curiousguy: By inside/outside I meant inlined/not inlined. In the code posted above, if the &#39;inline&#39; keyword were used, there would not be any linker error: inline Initializer::Initializer() { }. But this is not related to my question."}], "tags": [], "owner": {"reputation": 196207, "user_id": 434551, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/8Wzl8.png?s=128&g=1", "display_name": "R Sahu", "link": "https://stackoverflow.com/users/434551/r-sahu"}, "is_accepted": false, "score": 4, "last_activity_date": 1440009928, "last_edit_date": 1440009928, "creation_date": 1440007766, "answer_id": 32102652, "question_id": 32102486, "link": "https://stackoverflow.com/questions/32102486/why-should-types-be-put-in-unnamed-namespaces/32102652#32102652", "title": "Why should types be put in unnamed namespaces?", "body": "<blockquote>\n  <p>So what's the use of putting types in unnamed namespaces?</p>\n</blockquote>\n\n<p>You can create short, meaningful classes with names that maybe used in more than one file without the problem of name conflicts.</p>\n\n<p>For example, I use two classes often in unnamed namespaces - <code>Initializer</code> and <code>Helper</code>.</p>\n\n<pre><code>namespace\n{\n   struct Initializer\n   {\n      Initializer()\n      {\n         // Take care of things that need to be initialized at static\n         // initialization time.\n      }\n   };\n\n   struct Helper\n   {\n      // Provide functions that are useful for the implementation\n      // but not exposed to the users of the main interface.\n   };\n\n   // Take care of things that need to be initialized at static\n   // initialization time.\n   Initializer initializer;\n}\n</code></pre>\n\n<p>I can repeat this pattern of code in as many files as I want without the names <code>Initializer</code> and <code>Helper</code> getting in the way.</p>\n\n<p><strong>Update, in response to comment by OP</strong></p>\n\n<p>file-1.cpp:</p>\n\n<pre><code>struct Initializer\n{\n   Initializer();\n};\n\nInitializer::Initializer()\n{\n}\n\nint main()\n{\n   Initializer init;\n}\n</code></pre>\n\n<p>file-2.cpp:</p>\n\n<pre><code>struct Initializer\n{\n   Initializer();\n};\n\nInitializer::Initializer()\n{\n}\n</code></pre>\n\n<p>Command to build:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>g++ file-1.cpp file-2.cpp\n</code></pre>\n\n<p>I get linker error message about multiple definitions of <code>Initializer::Initializer()</code>. Please note that the standard does not require the linker to produce this error. From section 3.2/4:</p>\n\n<blockquote>\n  <p>Every program shall contain exactly one definition of every non-inline function or variable that is odr-used in that program; no diagnostic required.</p>\n</blockquote>\n\n<p>The linker does not produce an error if the functions are defined inline:</p>\n\n<pre><code>struct Initializer\n{\n   Initializer() {}\n};\n</code></pre>\n\n<p>That's OK for a simple case like this since the implementations are identical. If the inline implementations are different, the program is subject to undefined behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 345, "user_id": 2095190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7dfad5c2e36dce8471cbc6dd283ea7?s=128&d=identicon&r=PG", "display_name": "gordonk", "link": "https://stackoverflow.com/users/2095190/gordonk"}, "edited": false, "score": 0, "creation_date": 1514383991, "post_id": 46421666, "comment_id": 82955406, "body": "this is an interesting observation, I too would be interested as to why this is the case.  I guess it makes sense that if an implementation for the function <code>::Test::talk</code> was already found in earlier translation units, other implementations are ignored, but in what way does explicitly declaring the unnamed namespace change this? And shouldn&#39;t cause a warning at the least?"}], "tags": [], "owner": {"reputation": 1, "user_id": 7162251, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dZWLbFBVlHs/AAAAAAAAAAI/AAAAAAAAAKc/FEgQpX1T0nY/photo.jpg?sz=128", "display_name": "Michail Angelos", "link": "https://stackoverflow.com/users/7162251/michail-angelos"}, "is_accepted": false, "score": 0, "last_activity_date": 1506415351, "creation_date": 1506415351, "answer_id": 46421666, "question_id": 32102486, "link": "https://stackoverflow.com/questions/32102486/why-should-types-be-put-in-unnamed-namespaces/46421666#46421666", "title": "Why should types be put in unnamed namespaces?", "body": "<p>I might be a bit late for answering the question the OP made but since I think the answer is not fully clear, I would like to help future readers.</p>\n\n<p>Lets try a test... compile the following files:</p>\n\n<pre><code>//main.cpp\n#include &lt;iostream&gt;\n#include \"test.hpp\"\n\nclass Test {\npublic:\n     void talk() {\n      std::cout&lt;&lt;\"I'm test MAIN\\n\";\n     }\n};\n\nint main()\n{\n     Test t;\n     t.talk();\n     testfunc();    \n}\n</code></pre>\n\n<hr>\n\n<pre><code>//test.hpp\nvoid testfunc();\n</code></pre>\n\n<hr>\n\n<pre><code>//test.cpp\n#include &lt;iostream&gt;\n\nclass Test {\npublic:\n     void talk()\n      {\n           std::cout&lt;&lt;\"I'm test 2\\n\";\n      }\n};\n\n\nvoid testfunc() {\n     Test t;\n     t.talk();\n}\n</code></pre>\n\n<p>Now run the executable.\nYou would expect to see:</p>\n\n<pre><code>I'm test MAIN\nI'm test 2\n</code></pre>\n\n<p>What you should see thought is:</p>\n\n<pre><code>I'm test MAIN\nI'm test MAIN\n</code></pre>\n\n<p><strong>What happened?!?!!</strong></p>\n\n<p>Now try putting an unnamed namespace around the \"Test\" class in \"test.cpp\" like so:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include \"test.hpp\"\n\nnamespace{\n     class Test {\n     public:\n      void talk()\n           {\n            std::cout&lt;&lt;\"I'm test 2\\n\";\n           }\n     };\n}\n\nvoid testfunc() {\n     Test t;\n     t.talk();\n}\n</code></pre>\n\n<p>Compile it again and run.\nThe output should be:</p>\n\n<pre><code>I'm test MAIN\nI'm test 2\n</code></pre>\n\n<p><strong>Wow! It works!</strong></p>\n\n<hr>\n\n<p>As it turns out, it <strong>is</strong> important to define classes inside unnamed namespaces so that you get the proper functionality out of them when two class names in different translation units are identical.\nNow as to <em>why</em> that is the case, I haven't done any research on it (maybe someone could help here?) and so I can't really tell you for sure. I'm answering purely from a practical standpoint.</p>\n\n<p>What I would suspect though is that, while it is <em>true</em> that C structs are indeed local to a translation unit, they are a bit different from classes since classes in c++ usually have behavior assigned to them. Behavior means functions and as we know, functions are <strong>not</strong> local to the translation unit.</p>\n\n<p><em>This is just my assumption.</em></p>\n"}], "owner": {"reputation": 195, "user_id": 3357851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764f4901e3d0062d4aa063580a52d7da?s=128&d=identicon&r=PG&f=1", "display_name": "Francis Xavier", "link": "https://stackoverflow.com/users/3357851/francis-xavier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1212, "favorite_count": 4, "accepted_answer_id": 32102585, "answer_count": 3, "score": 9, "last_activity_date": 1506415351, "creation_date": 1440007116, "last_edit_date": 1495542653, "question_id": 32102486, "link": "https://stackoverflow.com/questions/32102486/why-should-types-be-put-in-unnamed-namespaces", "title": "Why should types be put in unnamed namespaces?", "body": "<p>I understand the use of unnamed namespaces to make functions and variables have internal linkage. Unnamed namespaces are not used in header files; only source files. Types declared in a source file cannot be used outside. So what's the use of putting types in unnamed namespaces?</p>\n\n<p>See these links where it's mentioned that types can be put in unnamed namespaces:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/4422507/superiority-of-unnamed-namespace-over-static\">Superiority of unnamed namespace over static?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions\">Unnamed/anonymous namespaces vs. static functions</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4977252/why-unnamed-namespace-is-a-superior-alternative-to-static\">Why an unnamed namespace is a &quot;superior&quot; alternative to static?</a></li>\n</ul>\n"}, {"tags": ["c++", "pointers", "c++builder"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 1, "creation_date": 1440007164, "post_id": 32102456, "comment_id": 52099250, "body": "malloc and delete in the same function... you know you can&#39;t mix those right?"}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1440007230, "post_id": 32102456, "comment_id": 52099287, "body": "Why are you fwriting 4 * ms Size?  Simply 1 * ms Size is enough"}, {"owner": {"reputation": 2016, "user_id": 446717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Cdf.jpg?s=128&g=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/446717/roberto"}, "edited": false, "score": 0, "creation_date": 1440007585, "post_id": 32102456, "comment_id": 52099486, "body": "Download is undefined on <code>Download-&gt;Get(...)</code>"}, {"owner": {"reputation": 55, "user_id": 5236184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/46e998b9e6a4c97f1a75c0b468b64e91?s=128&d=identicon&r=PG&f=1", "display_name": "encore leet", "link": "https://stackoverflow.com/users/5236184/encore-leet"}, "reply_to_user": {"reputation": 2016, "user_id": 446717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/f2Cdf.jpg?s=128&g=1", "display_name": "Roberto", "link": "https://stackoverflow.com/users/446717/roberto"}, "edited": false, "score": 0, "creation_date": 1440008475, "post_id": 32102456, "comment_id": 52100037, "body": "@Roberto dowload is not undefined - I named tldHTTP &quot;Download&quot;"}, {"owner": {"reputation": 55, "user_id": 5236184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/46e998b9e6a4c97f1a75c0b468b64e91?s=128&d=identicon&r=PG&f=1", "display_name": "encore leet", "link": "https://stackoverflow.com/users/5236184/encore-leet"}, "reply_to_user": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1440008521, "post_id": 32102456, "comment_id": 52100067, "body": "@Grantly this worked! I was pretty sure that 2nd param is sizeof buffer type, well I was wrong"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1440012130, "post_id": 32102456, "comment_id": 52102263, "body": "<code>TMemoryStream</code> has a <code>SaveToFile()</code> method: <code>Download-&gt;Get(..., ms); ... ms-&gt;SaveToFile(&quot;test.exe&quot;);</code> But then, why not download using a <code>TFileStream</code> instead?"}, {"owner": {"reputation": 2508, "user_id": 1491278, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/eb9277b775f30c8d5574627cfb79ed14?s=128&d=identicon&r=PG", "display_name": "Grantly", "link": "https://stackoverflow.com/users/1491278/grantly"}, "edited": false, "score": 0, "creation_date": 1440013668, "post_id": 32102456, "comment_id": 52103241, "body": "Nice :) Welcome to Stack Overflow"}, {"owner": {"reputation": 55, "user_id": 5236184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/46e998b9e6a4c97f1a75c0b468b64e91?s=128&d=identicon&r=PG&f=1", "display_name": "encore leet", "link": "https://stackoverflow.com/users/5236184/encore-leet"}, "reply_to_user": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1440015756, "post_id": 32102456, "comment_id": 52104437, "body": "@RemyLebeau did u read my question? I wrote, that I know how to save file directly from memorystream, but I wanted to ask why I cant copy it to void buffer"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1440020576, "post_id": 32102456, "comment_id": 52106857, "body": "@encoreleet: Then you should not have included that code in your example to begin with. Your code to read the stream is (almost) correct, but your code to write the data to file was wrong."}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1440027621, "post_id": 32102456, "comment_id": 52109009, "body": "@Borgleader actually you can, so long do not use <code>delete</code> on things which were <code>malloc</code>&#39;d etc. (which this code does correctly)"}, {"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "reply_to_user": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "edited": false, "score": 0, "creation_date": 1440027724, "post_id": 32102456, "comment_id": 52109037, "body": "@MattMcNabb Theres a malloced buffer, passed to a newed stream, the stream is deleted, but not the buffer. I assumed owning semantics of the buffer by the stream. (and since its a C++ class, i also assumed it would call delete on said buffer)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1440027771, "post_id": 32102456, "comment_id": 52109049, "body": "@Borgleader there&#39;s no owning semantics, <code>Read</code> is a memcpy-like function.  <code>buffer</code> is leaked. Even if there was owning semantics, it makes no difference how the stream was allocated"}], "answers": [{"tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": true, "score": 1, "last_activity_date": 1440020819, "creation_date": 1440020819, "answer_id": 32106191, "question_id": 32102456, "link": "https://stackoverflow.com/questions/32102456/c-builder-reading-tmemorystream-buffer-to-void-pointer/32106191#32106191", "title": "C++ Builder reading TMemoryStream buffer to void pointer", "body": "<p>Your code to read from the stream is <em>almost</em> correct.  You are not resetting the stream's <code>Position</code> property to 0 before reading, so you are actually reading from the end of the stream, where there is no data to read.</p>\n\n<p>Try this:</p>\n\n<pre><code>void __fastcall TForm1::Button1Click(TObject *Sender)\n{\n    TMemoryStream* ms = new TMemoryStream();\n    try\n    {\n        Download-&gt;Get(\"http://rarlab.com/rar/wrar521pl.exe\", ms);\n        ms-&gt;Position = 0; // &lt;-- ADD THIS\n        Edit1-&gt;Text = ms-&gt;Size;\n        void* buffer = malloc(ms-&gt;Size);\n        if (buffer)\n        {\n            ms-&gt;ReadBuffer(buffer, ms-&gt;Size);\n            // ms-&gt;SaveToFile(\"test.exe\");\n            FILE* pFile = fopen(\"test.exe\", \"wb\");\n            if (pFile)\n            {\n                fwrite(buffer, 1, ms-&gt;Size, pFile);\n                fclose(pFile);\n            }\n            free(buffer);\n        }\n    }\n    __finally\n    {\n        delete ms;\n    }\n}\n</code></pre>\n\n<p>Or, simply don't allocate a separate buffer, use the stream's own buffer directly instead:</p>\n\n<pre><code>void __fastcall TForm1::Button1Click(TObject *Sender)\n{\n    TMemoryStream* ms = new TMemoryStream();\n    try\n    {\n        Download-&gt;Get(\"http://rarlab.com/rar/wrar521pl.exe\", ms);\n        Edit1-&gt;Text = ms-&gt;Size;\n        void* buffer = ms-&gt;Memory;\n        // ms-&gt;SaveToFile(\"test.exe\");\n        FILE* pFile = fopen(\"test.exe\", \"wb\");\n        if (pFile)\n        {\n            fwrite(buffer, 1, ms-&gt;Size, pFile);\n            fclose(pFile);\n        }\n    }\n    __finally\n    {\n        delete ms;\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 5236184, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/46e998b9e6a4c97f1a75c0b468b64e91?s=128&d=identicon&r=PG&f=1", "display_name": "encore leet", "link": "https://stackoverflow.com/users/5236184/encore-leet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1296, "favorite_count": 0, "accepted_answer_id": 32106191, "answer_count": 1, "score": 0, "last_activity_date": 1440020819, "creation_date": 1440007026, "last_edit_date": 1440007143, "question_id": 32102456, "link": "https://stackoverflow.com/questions/32102456/c-builder-reading-tmemorystream-buffer-to-void-pointer", "title": "C++ Builder reading TMemoryStream buffer to void pointer", "body": "<p>I'm trying to copy contents of TMemoryStream buffer to void pointer, below you can see sample code which is not working - void buffer is empty, but textbox contains valid size - I checked it with winrar size. Following code creates exe file, but it's size is 0.</p>\n\n<pre><code>void __fastcall TForm1::Button1Click(TObject *Sender)\n{\n    TMemoryStream* ms = new TMemoryStream();\n    Download-&gt;Get(\"http://rarlab.com/rar/wrar521pl.exe\",ms);\n    this-&gt;Edit1-&gt;Text = ms-&gt;Size;\n    void* buffer = malloc(ms-&gt;Size );\n    ms-&gt;Read(buffer,ms-&gt;Size);\n    FILE* pFile = fopen(\"test.exe\",\"wb\");\n    fwrite(buffer,4,ms-&gt;Size,pFile);\n    fclose(pFile);\n    delete ms;\n}\n</code></pre>\n\n<p>Also, I know that I can easily save contents of TMemoryStream buffer to file, but I need its contents as void pointer, so I wrote following code to test it out.</p>\n"}, {"tags": ["c++", "vector", "c-preprocessor"], "comments": [{"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 1, "creation_date": 1440006783, "post_id": 32102340, "comment_id": 52099064, "body": "Use a <code>typedef</code> instead. Macros are bad and prone to generate obscure errors. Also you would need a parameterized macro, won&#39;t you?"}, {"owner": {"reputation": 8900, "user_id": 432913, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2fe7355b33d1b0bd79b1224691b00841?s=128&d=identicon&r=PG", "display_name": "will", "link": "https://stackoverflow.com/users/432913/will"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440007156, "post_id": 32102340, "comment_id": 52099244, "body": "I&#39;m using macros so that the functions i write can still use <code>vector&lt;vector&lt;double&gt;&gt;</code> outside, but i&#39;d just like it to be cleaner inside the code. I&#39;m not going to be creating many of these, but i just wanted to know how i would do it..."}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440007300, "post_id": 32102340, "comment_id": 52099332, "body": "If <code>n</code> and <code>m</code> are variables, use an inline function. Much cleaner than a macro."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1440007357, "post_id": 32102340, "comment_id": 52099375, "body": "Macros could support syntax like <code>dvec2d(n, m, x2d)</code>, with also the  variable name given as macro parameter. However, you really don&#39;t want to be using macros for this kind of purposes! I would consider adding to your question: &quot;Or how can I do this without macros?&quot;."}, {"owner": {"reputation": 59721, "user_id": 72631, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/42a1d7b456fc3d77050f124927ad70ab?s=128&d=identicon&r=PG", "display_name": "rlbond", "link": "https://stackoverflow.com/users/72631/rlbond"}, "edited": false, "score": 0, "creation_date": 1440007633, "post_id": 32102340, "comment_id": 52099516, "body": "Using a <code>typedef</code> would be far better."}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 3927447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3561920107ca3a792100d7c5ab7f9208?s=128&d=identicon&r=PG&f=1", "display_name": "Nipheris", "link": "https://stackoverflow.com/users/3927447/nipheris"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 3, "creation_date": 1440008342, "post_id": 32102563, "comment_id": 52099947, "body": "@hyde typedef can help in case of old compiler. Why not use &quot;vector2d&quot;?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1440008419, "post_id": 32102563, "comment_id": 52100000, "body": "@hyde <i>&quot;, the syntax becomes quite ugly&quot;</i> What&#39;s actually ugly with <code>std::vector&lt;std::vector&lt;double&gt;&gt; foo</code>?? Especially as the OP stated they explicitly want to use that syntax?"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "edited": false, "score": 0, "creation_date": 1440008590, "post_id": 32102563, "comment_id": 52100115, "body": "@hyde No, that&#39;s the job of the template function parameters :-P ... If we talk about fixed sized stuff <code>std::array</code> should be used instead of <code>std::vector</code> which really require the current standard."}, {"owner": {"reputation": 50126, "user_id": 1717300, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/81b91f602ce8acea8cbeb29f62725627?s=128&d=identicon&r=PG", "display_name": "hyde", "link": "https://stackoverflow.com/users/1717300/hyde"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440008702, "post_id": 32102563, "comment_id": 52100178, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 So you meant <code>std::vector&lt;std::vector&lt;double&gt;&gt; foo = make_2d_vector&lt;double&gt;(5,10);</code>, I assume. I consider that to be quite ugly. YMMV."}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 3, "last_activity_date": 1440008798, "last_edit_date": 1495540681, "creation_date": 1440007480, "answer_id": 32102563, "question_id": 32102340, "link": "https://stackoverflow.com/questions/32102340/how-can-a-create-a-define-to-create-a-2d-vector/32102563#32102563", "title": "How can a create a #define to create a 2d vector?", "body": "<p>Instead of using a macro you can use a template function.  You can make a <code>make_2d_vector</code> function like:</p>\n\n<pre><code>template&lt;typename T&gt;\nstd::vector&lt;std::vector&lt;T&gt;&gt; make_2d_vector(std::size_t rows, std::size_t cols)\n{\n    return std::vector&lt;std::vector&lt;T&gt;&gt;(rows, std::vector&lt;T&gt;(cols));\n}\n</code></pre>\n\n<p>Then when you want to create a 2d vector you can use:</p>\n\n<pre><code>auto foo = make_2d_vector&lt;double&gt;(5,10);\n</code></pre>\n\n<p><kbd><a href=\"http://coliru.stacked-crooked.com/a/8283f60830fa75fb\" rel=\"nofollow noreferrer\">Live Example</a></kbd></p>\n\n<p>As pointed out by <a href=\"https://stackoverflow.com/users/3927447/nipheris\">Nipheris</a> if you do not have access to <code>auto</code> you could always create a <code>typedef</code> like:</p>\n\n<pre><code>typedef std::vector&lt;std::vector&lt;double&gt;&gt; vector2d;\nvector2d foo = make_2d_vector&lt;double&gt;(5,10);\n</code></pre>\n"}], "owner": {"reputation": 8900, "user_id": 432913, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2fe7355b33d1b0bd79b1224691b00841?s=128&d=identicon&r=PG", "display_name": "will", "link": "https://stackoverflow.com/users/432913/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440009038, "creation_date": 1440006688, "last_edit_date": 1440009038, "question_id": 32102340, "link": "https://stackoverflow.com/questions/32102340/how-can-a-create-a-define-to-create-a-2d-vector", "title": "How can a create a #define to create a 2d vector?", "body": "<p>Is it possible to have a <code>#define</code> statement which does the following:</p>\n\n<p>for a simple vector i can do this:</p>\n\n<pre><code>#define dvec std::vector&lt;double&gt;\ndvec x1d(n)\n</code></pre>\n\n<p>note that instantiating it is just the same as for a normal vector. But for 2d vectors, it's not as nice:</p>\n\n<pre><code>#define dvec2d std:vector&lt;std:vector&lt;double&gt;&gt;\ndvec2d x2d(n, std:vector&lt;double&gt;(m))\n</code></pre>\n\n<p>How would I create a define so that all I need to do to instantiate dvec2d be this:</p>\n\n<pre><code>dvec2d x2d(n, m)\n</code></pre>\n\n<p>Sure, I can do this:</p>\n\n<pre><code>dvec2d x2d(n, std:vector&lt;double&gt;(m))\n</code></pre>\n\n<p>each time i want to create one of these, but i'd rather not have that extra <code>std:vector&lt;double&gt;</code> in there - it would be neater if i could just have <code>dvec2d x2d(n, m)</code>.</p>\n\n<p>EDIT: To clarify, I know i can create a function to give me the vector, or a typedef, that's not what i'm after. The people using the functions are going to be chucking <code>vector&lt;vector&lt;double&gt;&gt;</code> into them, so that's what they need to be. But i don't want to have function definitions that are massive because of all of definitions in there. Using the <code>#define dvec2d ...</code> gets around that.</p>\n\n<p>Now, when i'm testing my stuff, i need to create 2d vectors. I know i can do it with <code>dvec2d my2dVector(n, std::vector&lt;double&gt;(m))</code>, but what i want to know is if there is any way i can write a <code>#define</code> such that i can create these guys like this: <code>dvec2d my2dVector(n,m)</code>?</p>\n"}, {"tags": ["c++", "c", "tokenize", "strtok"], "comments": [{"owner": {"reputation": 17031, "user_id": 185915, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/207045374ab195353388d9fcc77af9c5?s=128&d=identicon&r=PG", "display_name": "Chad", "link": "https://stackoverflow.com/users/185915/chad"}, "edited": false, "score": 3, "creation_date": 1440006303, "post_id": 32102180, "comment_id": 52098828, "body": "<code>strtok</code> modifies the input string, while the C++ version is making copies.  Whlie they may have the same end result, the two versions are taking vastly different routes to reach the end."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1440006475, "post_id": 32102180, "comment_id": 52098908, "body": "You might want to see this on how to split a string C++ as it is more efficient: <a href=\"http://stackoverflow.com/questions/236129/split-a-string-in-c\">stackoverflow.com/questions/236129/split-a-string-in-c</a>  What does you data look like and what are you trying to do with it?"}, {"owner": {"reputation": 7053, "user_id": 1162141, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/7db6bfbfbb420620e6df76c0e406098d?s=128&d=identicon&r=PG", "display_name": "technosaurus", "link": "https://stackoverflow.com/users/1162141/technosaurus"}, "edited": false, "score": 0, "creation_date": 1440006927, "post_id": 32102180, "comment_id": 52099140, "body": "If you are testing on constant strings,  functions with equivalent  <i>_builtin</i>&#39;s will always win because the get folded."}, {"owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "edited": false, "score": 0, "creation_date": 1440007044, "post_id": 32102180, "comment_id": 52099193, "body": "Maybe because C library was written at a time where resource was scarce and efficiency was preferred to a neat design, while C++ is more concerned at robustness and design - but this is just my opinion :-)"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5244472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d22cad42a792798e79126bd0358740?s=128&d=identicon&r=PG&f=1", "display_name": "nicolati", "link": "https://stackoverflow.com/users/5244472/nicolati"}, "edited": false, "score": 0, "creation_date": 1440096952, "post_id": 32102954, "comment_id": 52143821, "body": "Thank you! I will try it. It seems very interesting! I didn&#39;t catch that &quot;my&quot; algorithm had to perform such big number of copies and allocations... :("}, {"owner": {"reputation": 31, "user_id": 5244472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d22cad42a792798e79126bd0358740?s=128&d=identicon&r=PG&f=1", "display_name": "nicolati", "link": "https://stackoverflow.com/users/5244472/nicolati"}, "edited": false, "score": 1, "creation_date": 1440180591, "post_id": 32102954, "comment_id": 52182935, "body": "Hi Christophe, I tried your algorithm. It&#39;s much better than &quot;mine&quot;, but still worse than strtok. Since it&#39;s about 5X faster than &quot;mine&quot; and maybe 2X slower than strtok, I will use it anyway. I can survive with 2X :) Thank you"}], "tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": false, "score": 2, "last_activity_date": 1440010897, "last_edit_date": 1440010897, "creation_date": 1440008769, "answer_id": 32102954, "question_id": 32102180, "link": "https://stackoverflow.com/questions/32102180/c-tokenizer-complexity-vs-strtok-r/32102954#32102954", "title": "C++ Tokenizer Complexity vs strtok_r", "body": "<p><a href=\"http://www.cplusplus.com/reference/cstring/strtok/\" rel=\"nofollow\"><code>strtok()</code></a> modifies the string, replacing the token delimiter with a null terminator. If your long string has n tokens, the function just iterates through the string changing n chars to null, which is extremely fast.  </p>\n\n<p>In your C++ alternative you are making 2*n string copies, which means potentially 2*n allocation operations, plus the sheer copy of the (very long) remaining string, which is much heavier than the first alternative.  The difference is that you're not obliged to change the original string.  </p>\n\n<p>You could improve by keeping the string you're iterating trough unchanged and for example use offsets for the search:  </p>\n\n<pre><code>string mystring, token ;\nsize_t cur_token=0, next_token ;\n// fill 'mystring'\ndo {\n    next_token = mystring.find_first_of (\" \", cur_token) ;\n    token = mystring.substr (cur_token, next_token-cur_token);  // next_token-(nex_token==string::npos ? 0:cur_token) would be cleaner\n    if (next_token!=string::npos) \n        cur_token = next_token+1; \n    // do something with token;\n} while (next_token!=string::npos);\n</code></pre>\n\n<p><a href=\"http://ideone.com/CQEkrm\" rel=\"nofollow\">Live demo</a> </p>\n"}], "owner": {"reputation": 31, "user_id": 5244472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57d22cad42a792798e79126bd0358740?s=128&d=identicon&r=PG&f=1", "display_name": "nicolati", "link": "https://stackoverflow.com/users/5244472/nicolati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1440010897, "creation_date": 1440006172, "last_edit_date": 1440007643, "question_id": 32102180, "link": "https://stackoverflow.com/questions/32102180/c-tokenizer-complexity-vs-strtok-r", "title": "C++ Tokenizer Complexity vs strtok_r", "body": "<p>I'm making this question because I moved my tokenizer from strtok_r to an equivalent version in C++. I have to use strtok_r in place of strtok, because I have 2 nested tokenizations to perform most of the time.</p>\n\n<p>The strtok_r algorithm is something like this:</p>\n\n<pre><code>char *end_token, *token, *word ;\n// fill 'word'\ntoken = strtok_r (word, \" \", &amp;end_token) ;\nwhile (token != NULL) {\n  // do something\n  token = strtok_r (NULL, \" \", &amp;end_token) ;\n}\n</code></pre>\n\n<p>And the C++ version is like this (taken from another post here):</p>\n\n<pre><code>string mystring, token ;\nsize_t next_token ;\n// fill 'mystring'\nwhile (token != mystring) {\n    next_token = mystring.find_first_of (\" \") ;\n    token = mystring.substr (0, next_token) ;\n    mystring = mystring.substr (next_token + 1) ;\n    // do something\n}\n</code></pre>\n\n<p>Now the question: why the C++ version is so heavy respect to the C version?\nFor long strings I have to wait about 10 seconds with the C++ version, while the C version is instantaneous with the same strings.\nSo, it seems like the C++ version has higher complexity...\nWhat do you think about?</p>\n"}, {"tags": ["c++", "visual-c++"], "comments": [{"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 1, "creation_date": 1440006189, "post_id": 32102170, "comment_id": 52098768, "body": "Make it <code>ClassB::ClassB(int x) : m_x(x), m_InstanceA_1(0) {}</code>"}, {"owner": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "reply_to_user": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1440006286, "post_id": 32102170, "comment_id": 52098818, "body": "@IgorTandetnik I made an edit to the question because I realized I made a typo. Does your comment still hold?"}, {"owner": {"reputation": 45460, "user_id": 1670129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32370783314a7efabe09b6cfadb11b12?s=128&d=identicon&r=PG&f=1", "display_name": "Igor Tandetnik", "link": "https://stackoverflow.com/users/1670129/igor-tandetnik"}, "edited": false, "score": 0, "creation_date": 1440006324, "post_id": 32102170, "comment_id": 52098842, "body": "Try it and find out."}, {"owner": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1440006888, "post_id": 32102170, "comment_id": 52099119, "body": "AS answers have been given, you should read up on the difference between initialization and assignment in constructors. m_InstanceA_1 is always constructed before it is initialised."}, {"owner": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "reply_to_user": {"reputation": 1065, "user_id": 1458237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a83a2bbacabb878f413699313f48a0e3?s=128&d=identicon&r=PG", "display_name": "djgandy", "link": "https://stackoverflow.com/users/1458237/djgandy"}, "edited": false, "score": 0, "creation_date": 1440007106, "post_id": 32102170, "comment_id": 52099219, "body": "@djgandy Thank you. This has been a good lesson."}], "answers": [{"comments": [{"owner": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "edited": false, "score": 0, "creation_date": 1440006345, "post_id": 32102201, "comment_id": 52098852, "body": "Thanks for your answer! I made an edit to my question because I realized I made a typo. Does your answer still hold?"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "edited": false, "score": 0, "creation_date": 1440006464, "post_id": 32102201, "comment_id": 52098903, "body": "<code>m_InstanceA_1</code> (of type <code>ClassA</code>) is still a member of <code>ClassB</code> so this initialization still applies."}, {"owner": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "edited": false, "score": 0, "creation_date": 1440006649, "post_id": 32102201, "comment_id": 52099004, "body": "Hmm. I think I need to initialize <code>m_InstanceA_1</code> within the body of the <code>ClassB</code> constructor, because while for this example I have just provided a simple <code>0</code> to be fed to <code>ClassA</code>&#39;s constructor, in my situation, I need to do some calculations in the body of <code>ClassB</code> before I can know what values I should use to construct <code>ClassA</code>. Does this mean that I should first create a default instance of <code>ClassA</code> for <code>m_InstanceA_1</code> and then do the necessary calculations in the body of <code>ClassB</code>&#39;s constructor, and then set the member variables of <code>m_InstanceA_1</code> correctly?"}, {"owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "reply_to_user": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "edited": false, "score": 0, "creation_date": 1440006848, "post_id": 32102201, "comment_id": 52099099, "body": "You can still do it in the initialization list <code>ClassB::ClassB(int x) : m_x(x), m_InstanceA_1(&#47;* perform the computation here*&#47;)</code> or <code>ClassB::ClassB(int x) : m_x(x), m_InstanceA_1(&#47;* call a function to perform a complex computation *&#47;)</code>."}, {"owner": {"reputation": 981, "user_id": 3900879, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/YtmWq.png?s=128&g=1", "display_name": "Rusty Shackleford", "link": "https://stackoverflow.com/users/3900879/rusty-shackleford"}, "reply_to_user": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "edited": false, "score": 0, "creation_date": 1440006858, "post_id": 32102201, "comment_id": 52099106, "body": "@user89: If possible, try to extract &quot;some calculations&quot; to a private static method which you can then use to initialize <code>m_InstanceA_1</code>.  For example: <code>ClassB::ClassB(int x) : m_x(x), m_InstanceA_1(CalculateX()) {}</code>."}, {"owner": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "edited": false, "score": 0, "creation_date": 1440007090, "post_id": 32102201, "comment_id": 52099210, "body": "Thanks all very much! This fixes the issue."}], "tags": [], "owner": {"reputation": 8891, "user_id": 4505712, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/h9W5W.png?s=128&g=1", "display_name": "James Adkison", "link": "https://stackoverflow.com/users/4505712/james-adkison"}, "is_accepted": true, "score": 2, "last_activity_date": 1440007083, "last_edit_date": 1440007083, "creation_date": 1440006270, "answer_id": 32102201, "question_id": 32102170, "link": "https://stackoverflow.com/questions/32102170/getting-c2512-no-default-constructor-for-classa-error-on-the-first-parenthes/32102201#32102201", "title": "Getting C2512 &quot;no default constructor&quot; for `ClassA` error on the first parentheses of constructor for `ClassB`?", "body": "<pre><code>ClassB::ClassB(int x) : m_x(x), m_InstanceA_1(0)\n                                //^^^^^^^^^^^^, this constructs the ClassA instance\n{\n}\n</code></pre>\n\n<h2>Edit</h2>\n\n<blockquote>\n  <p>Getting C2512 \u201cno default constructor\u201d</p>\n</blockquote>\n\n<p>If you still need the ability to default construct a <code>ClassA</code> instance then you need to add a default constructor. The default constructor is no longer auto generated once other constructors are provided.</p>\n\n<pre><code>class ClassA\n{\npublic:\n    ClassA(); // Provides a default constructor declaration (you still need to implement it)\n    ClassA(int x);\n    ClassA(double y);\n\n...\n};\n</code></pre>\n"}], "owner": {"reputation": 2425, "user_id": 3486684, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/308961d6e6a4d9649e2ee9f81a4448ba?s=128&d=identicon&r=PG&f=1", "display_name": "user89", "link": "https://stackoverflow.com/users/3486684/user89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 32102201, "answer_count": 1, "score": 0, "last_activity_date": 1440007083, "creation_date": 1440006134, "last_edit_date": 1495541677, "question_id": 32102170, "link": "https://stackoverflow.com/questions/32102170/getting-c2512-no-default-constructor-for-classa-error-on-the-first-parenthes", "title": "Getting C2512 &quot;no default constructor&quot; for `ClassA` error on the first parentheses of constructor for `ClassB`?", "body": "<p>My situation is as follows. Let there be a header file <code>classdeclarations.h</code>, where I have the following classes declared:</p>\n\n<pre><code>class ClassA;\nclass ClassB;\n\nclass ClassA\n    {\n    public:\n        ClassA(int x);\n        ClassA(double y);\n\n        int ReturnInteger(void) { return m_x; }\n        double ReturnDouble(void) { return m_y; }\n    private:\n        int m_x;\n        double m_y;\n    }\n\nclass ClassB\n    {\n    public:\n        ClassB(int x);\n\n        int ReturnInteger(void) { return m_x; }\n    private:\n        int m_x;\n        ClassA m_InstanceA_1;\n    }\n</code></pre>\n\n<p>Let there be a <code>*.cpp</code> file called <code>classdefns.cpp</code>, where I define methods of the classes declared in <code>classdeclarations.h</code>:</p>\n\n<pre><code>#include classdeclarations.h\n\nClassA::ClassA(int x) : m_x(x)\n    {\n    }\n\nClassA::ClassA(double y) : m_y(y)\n    {\n    }\n\nClassB::ClassB(int x) : m_x(x)\n    {  //  this is the line where the build error occurs\n    m_InstanceA_1 = ClassA(0);\n    }\n</code></pre>\n\n<p>Note that I have commented the line where the compiler says there is an error:</p>\n\n<p><code>error C2512: 'ClassA' : no appropriate default constructor available</code></p>\n\n<p>The above example is not a minimal not working example (it probably works), but it captures the gist of the more complicated situation where I am getting the error.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/7191159/no-appropriate-default-constructor-available-and-no-default-constructor-exist\">This StackOverflow question regarding the same error was resolved by an answer that clarified where default arguments should be specified.</a> I do not have default arguments in my situation anymore (but did, in the past). I just double checked to make sure there are no default constructor arguments.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12989357/c2512-error-no-appropriate-default-constructor-available\">This question regarding the same error was resolved by ensuring that the name of the constructors was the same as the name of the class.</a> I have double checked to make sure that is not the issue with my situation.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/23028691/c-error-c2512-no-appropriate-default-constructor-available\">This question regarding the same error is different from my case, because here the asker did not want to have a default constructor defined.</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/16434234/no-appropriate-default-constructor-available-error\">This question regarding the same error was resolved by ensuring that a default constructor method was declared in the body of the class declaration.</a> So, it is not applicable to my case since I already have the constructors declared in the class declaration as well.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9660314/c-no-appropriate-default-constructor-available\">This question regarding the same error was resolved by ensuring that the declaring header file was properly included.</a> This is not the problem in my situation.</p>\n\n<p><strong><a href=\"https://stackoverflow.com/questions/19850765/error-c2512-no-appropriate-default-constructor-available-not-classes\">This question regarding the same error is perhaps relevant, but I don't understand it well enough, and would appreciate clarification on where I might be assuming the existence of a default constructor?</a></strong></p>\n"}, {"tags": ["c++", "opencv", "vector", "opencv-contour", "convexity-defects"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440005898, "post_id": 32101975, "comment_id": 52098608, "body": "What you&#39;re asking is not totally unclear, but some code will surely help."}], "owner": {"reputation": 658, "user_id": 5244410, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/c2e125721f74672d38c5dcd66aaf5bb4?s=128&d=identicon&r=PG&f=1", "display_name": "wprins", "link": "https://stackoverflow.com/users/5244410/wprins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 4416, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1440005330, "creation_date": 1440005330, "question_id": 32101975, "link": "https://stackoverflow.com/questions/32101975/opencv-dealing-with-contour-vector-indexing", "title": "OpenCV: Dealing with contour vector indexing", "body": "<p>Using the function convexityDefects takes the blob from a binary image and creates a vector with all the points surrounding my hand. This vector always begins at the Point at the highest Y location on my blob which is interfering with my ability to run K-Curvature on each finger to determine accurate finger position.</p>\n\n<p>I have thought about reshuffling the vector so that the beginning of the vector starts away from a location away from the fingers on my hand. The problem is that this is difficult to implement because I don't have an effective way to pick a point on the hand to start the reordering of the points. Do you have any suggestions which could provide easy methods to fix this? My goal is to have none of the fingertips within ~30 points of the beginning of this array.</p>\n"}, {"tags": ["c++", "stl"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 2, "creation_date": 1440005641, "post_id": 32101907, "comment_id": 52098462, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6 I think are more appropriate place to point them would be <a href=\"http://stackoverflow.com/questions/356950/c-functors-and-their-uses\" title=\"c functors and their uses\">stackoverflow.com/questions/356950/c-functors-and-their-uses</a>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1440005884, "post_id": 32101907, "comment_id": 52098601, "body": "@NathanOliver Yes probably the better dupe. Reopened."}], "answers": [{"tags": [], "owner": {"reputation": 1697, "user_id": 4712648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/txw7W.jpg?s=128&g=1", "display_name": "Elohim Meth", "link": "https://stackoverflow.com/users/4712648/elohim-meth"}, "is_accepted": false, "score": 1, "last_activity_date": 1440006606, "last_edit_date": 1440006606, "creation_date": 1440005388, "answer_id": 32101996, "question_id": 32101907, "link": "https://stackoverflow.com/questions/32101907/functors-are-they-used-to-make-operator-overloading-more-easy/32101996#32101996", "title": "Functors - Are they used to make Operator Overloading more easy?", "body": "<p><code>comparator</code> is functor type used internally to sort container.</p>\n\n<p><a href=\"http://en.cppreference.com/w/cpp/container/priority_queue\" rel=\"nofollow\">cppreference</a></p>\n\n<p>By default STL uses builtin comparator <code>std::less</code> that is doing <code>i &lt; j</code>. In your example custom comparator is used to sort container in reversed order. Your example can be rewritten as:</p>\n\n<pre><code>priority_queue&lt;int, std::vector&lt;int&gt;, std::greater&gt; minHeap;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "is_accepted": true, "score": 2, "last_activity_date": 1440005724, "last_edit_date": 1440005724, "creation_date": 1440005418, "answer_id": 32102007, "question_id": 32101907, "link": "https://stackoverflow.com/questions/32101907/functors-are-they-used-to-make-operator-overloading-more-easy/32102007#32102007", "title": "Functors - Are they used to make Operator Overloading more easy?", "body": "<p>The <code>comparator</code> struct is an example of something usually called a 'functor' in C++. A functor is a 'callable object' - that is a regular object that implements <code>operator()</code>, the function call operator. When used like this in an STL container, you are passing the <em>type</em> of the functor rather than an <em>instance</em> of it as a template argument. The container will create instances as necessary in order to actually call <code>operator()</code> on them.</p>\n\n<p>If you are familiar with lambdas in C++, they are really just syntactic sugar for functors. A lambda definition creates an anonymous type which you can think of as a compiler-generated functor type with an <code>operator()</code> corresponding to the lambda function.</p>\n\n<p>Functors (or lambdas) are the standard way in C++ to pass functions to types or other functions. This is useful in many situations, the example allows you to customize the sorting criteria for the <code>priority_queue</code>. The STL uses functors all over the place in containers and the algorithms library as a way to parameterize types and functions on a user supplied function.</p>\n"}], "owner": {"reputation": 580, "user_id": 2922322, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1583406091/picture?type=large", "display_name": "Prasath Govind", "link": "https://stackoverflow.com/users/2922322/prasath-govind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "closed_date": 1440008023, "accepted_answer_id": 32102007, "answer_count": 2, "score": -1, "last_activity_date": 1440006606, "creation_date": 1440005103, "last_edit_date": 1440006470, "question_id": 32101907, "link": "https://stackoverflow.com/questions/32101907/functors-are-they-used-to-make-operator-overloading-more-easy", "closed_reason": "Duplicate", "title": "Functors - Are they used to make Operator Overloading more easy?", "body": "<p>The below piece of code is very common to implement Min-Heap :</p>\n\n<pre><code>struct comparator\n{\n    bool operator() ( int i, int j)\n    { return j &lt; i; }\n};\n\npriority_queue&lt;int, std::vector&lt;int&gt;, comparator&gt; minHeap;\n</code></pre>\n\n<p>How Functors work? \nWhat purpose they solve in C++?\nI could see Functors are more often used to Overload comparison.\nAre they just used to make Operator Overloading easy?</p>\n\n<p>When to create Functors?\nHow to create our own functor?</p>\n"}, {"tags": ["c++", "visual-studio-2012", "64-bit", "lapack"], "owner": {"reputation": 41, "user_id": 5210484, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bec2408aaa4a030fed55f92c6d78bcd4?s=128&d=identicon&r=PG&f=1", "display_name": "cianmscannell", "link": "https://stackoverflow.com/users/5210484/cianmscannell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1440004586, "creation_date": 1440004586, "last_edit_date": 1495540280, "question_id": 32101769, "link": "https://stackoverflow.com/questions/32101769/how-to-get-lapack-working-in-64-bit-windows-with-visual-studio-2012", "title": "How to get LAPACK working in 64 bit windows with Visual Studio 2012", "body": "<p>I am currently using LAPACK 3.5.0 for Visual Studio C/C++ 2012. To install this I followed the instructions given in the answer to this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21283657/how-to-install-lapack-for-msvs-2010-on-windows\">How to install LAPACK for MSVS 2010 on windows?</a></p>\n\n<p>I then proceeded to link the BLAS and LAPACK libraries in \"Linker > Input > Additional Dependencies\" and I copied and pasted the .dll files to the folder where my .exe is located.</p>\n\n<p>After doing this, the 32 bit version of my program works as expected. However the 64 bit version won't compile. I get the following error:</p>\n\n<pre><code>1&gt;LINK : warning LNK4098: defaultlib 'LIBCMT' conflicts with use of other libs; use /NODEFAULTLIB:library\n1&gt;PIC_effective_index.obj : error LNK2001: unresolved external symbol dstevx_     \n</code></pre>\n\n<p>Basically, what I tried to get the 64 bit version to work was to mimic what I did for the 32 bit version. </p>\n\n<p>Is anybody able to correct me on where I am going wrong?</p>\n"}, {"tags": ["c++", "virtual-functions"], "comments": [{"owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "edited": false, "score": 0, "creation_date": 1440004456, "post_id": 32101704, "comment_id": 52097743, "body": "So why are you using virtual inheritance with class ASomething?  That is only needed if multiple inheritance is involved."}, {"owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "reply_to_user": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "edited": false, "score": 0, "creation_date": 1440004594, "post_id": 32101704, "comment_id": 52097829, "body": "I cannot exclude that case so I always inherit interfaces virtually and never inherit implementations on multiple paths. Also, removing the <code>virtual</code> from the inheritance changes nothing."}, {"owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "reply_to_user": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1440004742, "post_id": 32101704, "comment_id": 52097901, "body": "@Jashaszun I included line numbers intentionally to help people finding the lines referenced in the compiler output."}, {"owner": {"reputation": 8893, "user_id": 2150749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YQ97m.png?s=128&g=1", "display_name": "Jashaszun", "link": "https://stackoverflow.com/users/2150749/jashaszun"}, "edited": false, "score": 0, "creation_date": 1440004809, "post_id": 32101704, "comment_id": 52097937, "body": "@Notinlist Usual practice is to provide compilable code (i.e. without line numbers) and allow answerers to compile it themselves. They can also easily map errors to lines by putting it in, for example, Notepad++, which shows line numbers."}, {"owner": {"reputation": 671, "user_id": 2527301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beff722d35f0a85f1150880ba432fd0?s=128&d=identicon&r=PG", "display_name": "Aleksey F.", "link": "https://stackoverflow.com/users/2527301/aleksey-f"}, "edited": false, "score": 0, "creation_date": 1440005276, "post_id": 32101704, "comment_id": 52098226, "body": "Why do you use <code>virtual</code> for overriding the methods? For MS VC++, either override using <code>virtual ... override</code> or without <code>virtual</code>."}, {"owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "reply_to_user": {"reputation": 671, "user_id": 2527301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beff722d35f0a85f1150880ba432fd0?s=128&d=identicon&r=PG", "display_name": "Aleksey F.", "link": "https://stackoverflow.com/users/2527301/aleksey-f"}, "edited": false, "score": 0, "creation_date": 1440005432, "post_id": 32101704, "comment_id": 52098333, "body": "@AlekseyF. I did not wanted to use <code>override</code>, because I wanted to be portable without using C++11. I used <code>virtual</code> because of copy-paste. It&#39;s not an error, not even a warning."}, {"owner": {"reputation": 671, "user_id": 2527301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beff722d35f0a85f1150880ba432fd0?s=128&d=identicon&r=PG", "display_name": "Aleksey F.", "link": "https://stackoverflow.com/users/2527301/aleksey-f"}, "edited": false, "score": 0, "creation_date": 1440005739, "post_id": 32101704, "comment_id": 52098518, "body": "@Notinlist Yes, it&#39;s not an error, but a different meaning. It seems like the method defined with <code>virtual</code> in the derived class reintroduces that method rather than overrides the inherited, which should create a new record in the virtual method table. It is not needed to use C++11 for <code>override</code>: MS VC++ supports this keyword since MS VC 2005."}, {"owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "reply_to_user": {"reputation": 671, "user_id": 2527301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beff722d35f0a85f1150880ba432fd0?s=128&d=identicon&r=PG", "display_name": "Aleksey F.", "link": "https://stackoverflow.com/users/2527301/aleksey-f"}, "edited": false, "score": 0, "creation_date": 1440063666, "post_id": 32101704, "comment_id": 52122328, "body": "@AlekseyF. One compiler knowing <code>override</code> since 2005 does not matter to me. Can you demonstrate the difference between writing and not writing <code>virtual</code> when overriding? I couldn&#39;t find any reference for your claim."}, {"owner": {"reputation": 671, "user_id": 2527301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1beff722d35f0a85f1150880ba432fd0?s=128&d=identicon&r=PG", "display_name": "Aleksey F.", "link": "https://stackoverflow.com/users/2527301/aleksey-f"}, "edited": false, "score": 0, "creation_date": 1440154136, "post_id": 32101704, "comment_id": 52166692, "body": "@Notinlist Yes, you are right that manipulating with <code>virtual</code> or <code>override</code> does not fix the compile error. MS VC 2005 compiles your code with error C2660, see the case <a href=\"https://msdn.microsoft.com/en-us/library/ek13fhc1%28v=vs.80%29.aspx\" rel=\"nofollow noreferrer\">&quot;C2660 will occur if a derived class hides a function&quot;</a> at MSDN. See also <a href=\"https://msdn.microsoft.com/en-us/library/z8ew2153%28v=vs.80%29.aspx\" rel=\"nofollow noreferrer\">&quot;<code>sealed</code>, <code>abstract</code>, and <code>override</code> are also available in compilations that do not use /clr.&quot;</a> at MSDN. My mistake is that I missed in my code <code>_MyB::</code>, i.e. scope resolution, in calls of derived methods."}], "answers": [{"tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": false, "score": 7, "last_activity_date": 1440004662, "creation_date": 1440004662, "answer_id": 32101796, "question_id": 32101704, "link": "https://stackoverflow.com/questions/32101704/c-weird-behavior-on-method-overloading/32101796#32101796", "title": "C++: Weird behavior on method overloading", "body": "<p>Function overloading works only for functions visible in the same scope: </p>\n\n<pre><code>class ASomething\n    : public virtual ISomething\n{\npublic:\n  virtual int f(int x, int y) // (2)\n  {\n    return f(x) + f(y); // (3)\n  }\n\n  using ISomething::f;\n  //~~~~~~~~~~~~~~~~~^\n};\n\nclass SomethingImpl\n   : public ASomething\n{\npublic:\n  virtual int f(int x) // (1)\n  {\n    return x+1;\n  }    \n\n  using ASomething::f;\n  //~~~~~~~~~~~~~~~~~^\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1440005471, "post_id": 32101842, "comment_id": 52098364, "body": "This can also be accomplished by maintaining a <a href=\"http://coliru.stacked-crooked.com/a/a9d11c4dde4bd92a\" rel=\"nofollow noreferrer\">non-virtual interface that calls differently named virtual implementation functions</a>, which has the added benefit of allowing you to use any intuitively accessible function from the interface without using declarations in the inheriting class definition."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 1, "creation_date": 1440005692, "post_id": 32101842, "comment_id": 52098490, "body": "@jaggedSpire Presumably if OP wanted to name the functions differently, OP would have named them differently."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1440005852, "post_id": 32101842, "comment_id": 52098581, "body": "Agreed. I figured someone might stumble on this question from Google for whom that would be a good solution, so I added it as a comment. It is your answer, though, so if you want me to remove it I happily will."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 4, "last_activity_date": 1440004836, "creation_date": 1440004836, "answer_id": 32101842, "question_id": 32101704, "link": "https://stackoverflow.com/questions/32101704/c-weird-behavior-on-method-overloading/32101842#32101842", "title": "C++: Weird behavior on method overloading", "body": "<p>Both compilation failures happen for the same reason. While you're overriding one virtual member function, you're hiding the other. In <code>ASomething</code>:</p>\n\n<pre><code>virtual int f(int x, int y) // (2)\n{\n    return f(x) + f(y); // (3)\n}\n</code></pre>\n\n<p>Name lookup on <code>f</code> finds <code>ASomething::f</code> and stops, it doesn't keep going to look for other overloads. Since <code>ASomething::f</code> takes two arguments, and you're trying to call it with one, error. In order to allow for overloading against the base class, you have to introduce the base class member functions with a <em>using-declaration</em>:</p>\n\n<pre><code>using ISomething::f; // NOW, ISomething::f(int ) is found by lookup\n\nvirtual int f(int x, int y)\n{\n    return f(x) + f(y);\n}\n</code></pre>\n\n<p>And similarly, <code>SomethingImpl</code> needs a <code>using ASomething::f;</code> statement so that <code>a.f(10)</code> can compile.</p>\n"}, {"comments": [{"owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "edited": false, "score": 0, "creation_date": 1440005569, "post_id": 32101972, "comment_id": 52098426, "body": "You removed a crucial element when <code>ASomething::f</code> calls <code>ISomething::f</code> <code>(3)</code>."}, {"owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "edited": false, "score": 0, "creation_date": 1440063773, "post_id": 32101972, "comment_id": 52122392, "body": "I like your answer very much. Can I have an additional question? Isn&#39;t it bad that I inherit publicly and override a few things and the interface gets narrower? What is the rationale behind all this?"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2249683"}, "is_accepted": false, "score": 1, "last_activity_date": 1440005892, "last_edit_date": 1440005892, "creation_date": 1440005322, "answer_id": 32101972, "question_id": 32101704, "link": "https://stackoverflow.com/questions/32101704/c-weird-behavior-on-method-overloading/32101972#32101972", "title": "C++: Weird behavior on method overloading", "body": "<p>The problem is not an 'overloading' problem, but hiding a base class function (See other answers)</p>\n\n<p><strong>A slightly modified example:</strong></p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass ISomething\n{\n    public:\n    virtual ~ISomething() {}\n    virtual int f(int x) = 0; // (1)\n    virtual int f(int x, int y) = 0; // (2)\n};\n\nclass ASomething: public virtual ISomething\n{\n    public:\n    virtual int f(int x, int y) // (2)\n    {\n        // `this-&gt;f(x)` fails: \n        ISomething&amp; i = *this;\n        return i.f(x) + i.f(y); // (3)\n    }\n};\n\nclass SomethingImpl: public ASomething\n{\n    public:\n    virtual int f(int x) // (1)\n    {\n        return x+1;\n    }\n};\n\nint main()\n{\n    SomethingImpl a;\n    // `a.f(10, 20)` fails:\n    ISomething&amp; i = a;\n    std::cout &lt;&lt; i.f(10) &lt;&lt; std::endl; // (1)\n    std::cout &lt;&lt; i.f(10, 20) &lt;&lt; std::endl; // (2)\n    return 0;\n}\n</code></pre>\n\n<p>Hence, calling <code>f</code> from the interface, resolves the conflict. Although, you should consider <code>using base::f</code>, as suggested in other answers.</p>\n"}], "owner": {"reputation": 14718, "user_id": 163454, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/bdef8bbea2467810a6a8164fc41db6e7?s=128&d=identicon&r=PG", "display_name": "Notinlist", "link": "https://stackoverflow.com/users/163454/notinlist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 32101842, "answer_count": 3, "score": 1, "last_activity_date": 1440005892, "creation_date": 1440004338, "last_edit_date": 1440004540, "question_id": 32101704, "link": "https://stackoverflow.com/questions/32101704/c-weird-behavior-on-method-overloading", "title": "C++: Weird behavior on method overloading", "body": "<p>I need explanation about why the following code does not compile. I have a workaround which I will articulate below, but I don't understand the failure of the original version.</p>\n\n<p>To speed up code reading: The concept is to define an interface (<code>ISomething</code>), then to create an abstract implementation (<code>ASomething</code>) which implements the second function <code>(2)</code> using the first (not yet defined) one <code>(1)</code>. A complete implementation which derives from the abstract one (for example <code>SomethingImpl</code>) must define the first method and has the option to override the second one.</p>\n\n<pre><code>#include &lt;iostream&gt;\n\nclass ISomething\n{\npublic:\n  virtual ~ISomething()\n  { }\n  virtual int f(int x) = 0; // (1)\n  virtual int f(int x, int y) = 0; // (2)\n};\n\nclass ASomething\n  : public virtual ISomething\n{\npublic:\n  virtual int f(int x, int y) // (2)\n  {\n    return f(x) + f(y); // (3)\n  }\n};\n\nclass SomethingImpl\n  : public ASomething\n{\npublic:\n  virtual int f(int x) // (1)\n  {\n    return x+1;\n  }\n};\n\nint main()\n{\n  SomethingImpl a;\n  std::cout &lt;&lt; a.f(10) &lt;&lt; std::endl; // (1)\n  std::cout &lt;&lt; a.f(10,20) &lt;&lt; std::endl; // (2)\n  return 0;\n}\n</code></pre>\n\n<p>Compiling this code gives error on both Visual Studio 2013 (Windows) and g++ 4.4.5 (Linux). The errors are very similar, I will detail the g++ output only:</p>\n\n<pre><code>$ g++     SibFun.cpp   -o SibFun\nSibFun.cpp: In member function \u2018virtual int ASomething::f(int, int)\u2019:\nSibFun.cpp:18: error: no matching function for call to \u2018ASomething::f(int&amp;)\u2019\nSibFun.cpp:16: note: candidates are: virtual int ASomething::f(int, int)\nSibFun.cpp:18: error: no matching function for call to \u2018ASomething::f(int&amp;)\u2019\nSibFun.cpp:16: note: candidates are: virtual int ASomething::f(int, int)\nSibFun.cpp: In function \u2018int main()\u2019:\nSibFun.cpp:36: error: no matching function for call to \u2018SomethingImpl::f(int, int)\u2019\nSibFun.cpp:26: note: candidates are: virtual int SomethingImpl::f(int)\nmake: *** [SibFun] Error 1\n</code></pre>\n\n<p>I tried to use different notation at <code>(3)</code> like <code>return this-&gt;f(x) + this-&gt;f(y)</code>, but I experienced no significant change in the error message.</p>\n\n<p>However when I changed <code>(3)</code> to <code>return ISomething::f(x) + ISomething::f(y);</code> I only got:</p>\n\n<pre><code>$ g++     SibFun.cpp   -o SibFun\nSibFun.cpp: In function \u2018int main()\u2019:\nSibFun.cpp:36: error: no matching function for call to \u2018SomethingImpl::f(int, int)\u2019\nSibFun.cpp:26: note: candidates are: virtual int SomethingImpl::f(int)\nmake: *** [SibFun] Error 1\n</code></pre>\n\n<p>But! When change <code>(2)</code> from <code>f</code> to <code>g</code> all compiles and runs as expected.</p>\n\n<p>What is the reason behind this begavior? Why can't I use the <code>f</code> name for <code>(2)</code>?</p>\n"}, {"tags": ["c++", "winapi"], "comments": [{"owner": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1440004334, "post_id": 32101587, "comment_id": 52097676, "body": "Is this the entirety of your <code>EditProc()</code>?"}, {"owner": {"reputation": 144, "user_id": 5244184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0514688e6bb8d0363ced19205445ca0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Yves", "link": "https://stackoverflow.com/users/5244184/jean-yves"}, "reply_to_user": {"reputation": 239269, "user_id": 464709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ab3363d257d780bd4c1f0c844b020a2?s=128&d=identicon&r=PG", "display_name": "Fr&#233;d&#233;ric Hamidi", "link": "https://stackoverflow.com/users/464709/fr%c3%a9d%c3%a9ric-hamidi"}, "edited": false, "score": 0, "creation_date": 1440004455, "post_id": 32101587, "comment_id": 52097742, "body": "There will be something before destoying Window (get value et store it to the listview), but now, it is all yes."}, {"owner": {"reputation": 7055, "user_id": 1374704, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VNVyl.png?s=128&g=1", "display_name": "manuell", "link": "https://stackoverflow.com/users/1374704/manuell"}, "edited": false, "score": 0, "creation_date": 1440005010, "post_id": 32101587, "comment_id": 52098048, "body": "Did you rule out painting artifact? (Edit updated but not properly displayed)"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "edited": false, "score": 0, "creation_date": 1440005424, "post_id": 32101587, "comment_id": 52098329, "body": "When editing ListView sub items, I prefer to manipulate the ListView&#39;s built-in editor directly. That way, much of the ListView&#39;s native behavior can be preserved, you only have to manipulate where the editor appears and which text it handles, letting the ListView handle the rest normally. In <code>LVN_BEGINLABELEDIT</code>, use <code>LVM_GETEDITCONTROL</code> to get the editor&#39;s <code>HWND</code>, move it over the subitem, and assign the subitem&#39;s text to it, then subclass it to apply the <code>SWP_NOMOVE</code> flag in the <code>WM_WINDOWPOSCHANGING</code> message. In <code>LVN_ENDLABELEDIT</code>, apply the new text to the subitem and cancel the edit."}, {"owner": {"reputation": 144, "user_id": 5244184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0514688e6bb8d0363ced19205445ca0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Yves", "link": "https://stackoverflow.com/users/5244184/jean-yves"}, "edited": false, "score": 0, "creation_date": 1440006526, "post_id": 32101587, "comment_id": 52098933, "body": "No, I did not remove painting code: I have some state display using an ImageList, but no ownerdraw or paint code."}, {"owner": {"reputation": 144, "user_id": 5244184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0514688e6bb8d0363ced19205445ca0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Yves", "link": "https://stackoverflow.com/users/5244184/jean-yves"}, "edited": false, "score": 0, "creation_date": 1440009759, "post_id": 32101587, "comment_id": 52100866, "body": "I just tried Remy Lebeau&#39;s solution. This does not change the problem: The edit window is appearing where it should (over the sub item being modified), but I still cannot modify the value using keyboard. It remains modifiable with a copy using mouse."}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 0, "creation_date": 1440012225, "post_id": 32101587, "comment_id": 52102317, "body": "What does your <code>GetMessage()</code> loop look like?"}, {"owner": {"reputation": 144, "user_id": 5244184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0514688e6bb8d0363ced19205445ca0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Yves", "link": "https://stackoverflow.com/users/5244184/jean-yves"}, "edited": false, "score": 0, "creation_date": 1440016801, "post_id": 32101587, "comment_id": 52105025, "body": "The mainloop is like       while(GetMessage(&amp;msg, NULL, 0, 0) &gt; 0)     { \t  if (! TranslateAccelerator(msg.hwnd, hAccelerators, &amp;msg)) \t  { \t\t  if(!IsDialogMessage(msg.hwnd, &amp;msg)) { \t\t\t  TranslateMessage(&amp;msg); \t\t\t  DispatchMessage(&amp;msg); \t\t  } \t  }     }"}, {"owner": {"reputation": 33827, "user_id": 506413, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1a474f3be606bcc6f964913b523626e9?s=128&d=identicon&r=PG", "display_name": "Jonathan Potter", "link": "https://stackoverflow.com/users/506413/jonathan-potter"}, "edited": false, "score": 3, "creation_date": 1440019235, "post_id": 32101587, "comment_id": 52106220, "body": "You shouldn&#39;t use <code>msg.hwnd</code> as the first argument for <code>TranslateAccelerator</code> or <code>IsDialogMessage</code>. <code>TranslateAccelerator</code> needs the handle of your top-level window (or at least, the window that processes <code>WM_COMMAND</code> messages), and <code>IsDialogMessage</code> needs the handle of an actual dialog."}, {"owner": {"reputation": 144, "user_id": 5244184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0514688e6bb8d0363ced19205445ca0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Yves", "link": "https://stackoverflow.com/users/5244184/jean-yves"}, "edited": false, "score": 2, "creation_date": 1440021314, "post_id": 32101587, "comment_id": 52107130, "body": "Thank you! it works now. It is the IsDialogMessage which made it work (but of course, I keep correction for TranslateAccelerator too)."}], "owner": {"reputation": 144, "user_id": 5244184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0514688e6bb8d0363ced19205445ca0f?s=128&d=identicon&r=PG&f=1", "display_name": "Jean-Yves", "link": "https://stackoverflow.com/users/5244184/jean-yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1440003940, "creation_date": 1440003940, "question_id": 32101587, "link": "https://stackoverflow.com/questions/32101587/win32-child-edit-is-not-modified-when-typing-but-can-be-modified-with-mouse-co", "title": "win32 Child EDIT is not modified when typing, but can be modified with mouse (copy/paste)", "body": "<p>I am developping an win32 application (not MFC). The main window includes a child dialog, which has a ListView (report mode) control. I am now adding in place editing to sub items of the ListView. For that, I detect double-click (NM_DBLCLK) in the dialog procedure and create a child Edit window this way:\n</p>\n\n<pre><code>    RECT rect;\n    ListView_GetSubItemRect(listView,Item,subItem,LVIR_BOUNDS,&amp;rect);\n    HWND edit = CreateWindowEx(WS_EX_CLIENTEDGE | WS_EX_RIGHT, L\"EDIT\", L\"\", WS_CHILD|WS_VISIBLE /*|ES_WANTRETURN*/,\n                    rect.left, rect.top, rect.right - rect.left, 1.5*(rect.bottom - rect.top),\n                    listView, 0, GetModuleHandle(NULL), NULL);\n                    SetWindowTextW(edit, buffer);\n                    Edit_LimitText(edit, 12);\n                    Edit_Enable(edit, true);\n                    assert(edit != NULL);\n                    SetFocus(edit);\n                    m_oldEditProc = (WNDPROC)SetWindowLong(edit, GWL_WNDPROC, (LONG)EditProc);\n</code></pre>\n\n<p>EditProc:</p>\n\n<pre><code>if(msg == WM_KILLFOCUS) {\n    DestroyWindow(wnd);\n}\nreturn CallWindowProc(m_oldEditProc, wnd, msg, wParam, lParam);\n</code></pre>\n\n<p>It seem ok, except that the Edit control seems not to handle modification using keyboard. The Edit has focus (blinking caret). I can change selection using keyboard. I can change text using SetWindowText. I can modify content with copy/paste using mouse. But I cannot modify the content of edit with keyboard.</p>\n\n<p>When I use winspy, I see the WM_KEYDOWN, WM_CHAR and WM_KEYUP arriving to the edit window, but no change appears.</p>\n\n<p>I cannot figure out what am I doing wrong.</p>\n"}, {"tags": ["c++", "visual-studio-2012"], "comments": [{"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 1, "creation_date": 1440004042, "post_id": 32101560, "comment_id": 52097507, "body": "<code>__attribute__((const))</code> is for gcc only. Remove it for MSVC. Although I suspect you will get more errors. like <code>__builtin_clz</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440004180, "post_id": 32101560, "comment_id": 52097582, "body": "Also the <code>uint32_t</code> typedefs needs to include <code>stdint.h</code>."}, {"owner": {"reputation": 169, "user_id": 4881119, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2b10cdf18445b49539e8e4382e0659b?s=128&d=identicon&r=PG&f=1", "display_name": "SuperHeroY", "link": "https://stackoverflow.com/users/4881119/superheroy"}, "reply_to_user": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1440004258, "post_id": 32101560, "comment_id": 52097625, "body": "@drescherjm: Thnaks. Now I am getting not found on <code>__builtin_clz</code> and <code>__asm__</code>"}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1440004267, "post_id": 32101560, "comment_id": 52097632, "body": "<a href=\"http://stackoverflow.com/q/355967/487892\">stackoverflow.com/q/355967/487892</a>"}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440004292, "post_id": 32101560, "comment_id": 52097646, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 you mean <code>&lt;cstdint&gt;</code>, since the question is tagged <code>c++</code>"}, {"owner": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "reply_to_user": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "edited": false, "score": 0, "creation_date": 1440004476, "post_id": 32101560, "comment_id": 52097754, "body": "@CoffeeandCode No I meant what I wrote. Using <code>cstdint</code> would require to write <code>std::uint32_t</code>  IIRC."}, {"owner": {"reputation": 169, "user_id": 4881119, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2b10cdf18445b49539e8e4382e0659b?s=128&d=identicon&r=PG&f=1", "display_name": "SuperHeroY", "link": "https://stackoverflow.com/users/4881119/superheroy"}, "edited": false, "score": 0, "creation_date": 1440004502, "post_id": 32101560, "comment_id": 52097766, "body": "Also this line gives an error: <code>void __fastunpack0(const uint32_t   *__restrict__ in, uint32_t   *__restrict__  out);</code>"}, {"owner": {"reputation": 4946, "user_id": 2297448, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/75aca5435d1f52426fbd6573c73ed70d?s=128&d=identicon&r=PG&f=1", "display_name": "RamblingMad", "link": "https://stackoverflow.com/users/2297448/ramblingmad"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1440004804, "post_id": 32101560, "comment_id": 52097935, "body": "@\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 in theory, yeah; in practice, you can usually unsafely not write <code>std::</code>. But that&#39;s a pretty lazy excuse not to use <code>cstdint</code> when you gotta port the code anyway."}, {"owner": {"reputation": 8811, "user_id": 487892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Leb5B.jpg?s=128&g=1", "display_name": "drescherjm", "link": "https://stackoverflow.com/users/487892/drescherjm"}, "edited": false, "score": 0, "creation_date": 1440010094, "post_id": 32101560, "comment_id": 52101074, "body": "<code>edit: I am compiling this in G++. In terminal I type make example and then .&#47;example. I get a segfault before any output. Anyone know what is wrong?</code> Start a new question about that."}], "answers": [{"tags": [], "owner": {"reputation": 65414, "user_id": 768469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/383724e63ab04b146277912c16f27f54?s=128&d=identicon&r=PG", "display_name": "Nemo", "link": "https://stackoverflow.com/users/768469/nemo"}, "is_accepted": true, "score": 3, "last_activity_date": 1440004141, "creation_date": 1440004141, "answer_id": 32101652, "question_id": 32101560, "link": "https://stackoverflow.com/questions/32101560/integer-compression-library/32101652#32101652", "title": "Integer Compression Library", "body": "<p>From the <a href=\"https://github.com/lemire/SIMDCompressionAndIntersection/#requirements\" rel=\"nofollow\">Requirements</a> section:</p>\n\n<blockquote>\n  <p>A recent GCC (4.7 or better), Clang or Intel compiler.</p>\n  \n  <p>...</p>\n  \n  <p>Tested on Linux and MacOS. It should be portable to Windows and other\n  platforms.</p>\n</blockquote>\n\n<p>Good luck with your port.</p>\n"}], "owner": {"reputation": 169, "user_id": 4881119, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d2b10cdf18445b49539e8e4382e0659b?s=128&d=identicon&r=PG&f=1", "display_name": "SuperHeroY", "link": "https://stackoverflow.com/users/4881119/superheroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 32101652, "answer_count": 1, "score": 0, "last_activity_date": 1440008255, "creation_date": 1440003844, "last_edit_date": 1440008255, "question_id": 32101560, "link": "https://stackoverflow.com/questions/32101560/integer-compression-library", "title": "Integer Compression Library", "body": "<p>I am trying to use this library <a href=\"https://github.com/lemire/SIMDCompressionAndIntersection/\" rel=\"nofollow\">https://github.com/lemire/SIMDCompressionAndIntersection/</a> with Visual Studio 2012 but I am getting a few compilation errors.</p>\n\n<p>Headers <code>#include &lt;sys/resource.h&gt;</code> <code>#include &lt;sys/time.h&gt;</code> and <code>#include &lt;sys/mman.h&gt;</code> doesn't exist. I can simply remove them.</p>\n\n<p>After this I am getting errors in many lines which have this format:</p>\n\n<pre><code>__attribute__((const))\ninline uint32_t gccbits(const uint32_t v) {\n    return v == 0 ? 0 : 32 - __builtin_clz(v);\n}\n\nmissing type specifier - int assumed. Note: C++ does not support default-int\n</code></pre>\n\n<p>Does anyone know how to use this library with Visual Studio 2012?</p>\n\n<p><strong>edit: I am compiling this in G++. In terminal I type <code>make example</code> and then <code>./example</code>. I get a segfault before any output. Anyone know what is wrong?</strong></p>\n"}, {"tags": ["c++", "qt", "qgraphicsscene", "qimage"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1440004690, "post_id": 32101556, "comment_id": 52097885, "body": "Why do you think that such an image will make a deep copy? It won&#39;t - unless you can point to code within Qt that forces a deep copy."}, {"owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "edited": false, "score": 0, "creation_date": 1440004999, "post_id": 32101556, "comment_id": 52098038, "body": "He have to convert QImage to QPixmap first."}, {"owner": {"reputation": 814, "user_id": 3561614, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/33bc4f2b66043cfca0e3cfb4a1c8ae18?s=128&d=identicon&r=PG&f=1", "display_name": "user3561614", "link": "https://stackoverflow.com/users/3561614/user3561614"}, "edited": false, "score": 0, "creation_date": 1440005282, "post_id": 32101556, "comment_id": 52098229, "body": "The line above leads to a shallow copy. But I absolulty don&#39;t know what happens after this line internally in qt. E.g. my next line atm is <code>QGraphicsPixmapItem* item = scene_.addPixmap(QPixmap::fromImage(image));</code> and it seems to be not even documented, if scene_ has the ownership of item. Probably it is so."}, {"owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "edited": false, "score": 0, "creation_date": 1440005741, "post_id": 32101556, "comment_id": 52098522, "body": "A QPixmap object will be created, with a copy of the data, and you can delete your data (ar a QImage object) from the memory. It should be save."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1440005833, "post_id": 32101556, "comment_id": 52098572, "body": "It doesn&#39;t matter who has the ownership of what, both <code>QPixmap</code> and <code>QImage</code> are implicitly shared."}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1440005879, "post_id": 32101556, "comment_id": 52098597, "body": "If you look at <code>QPixmap</code>&#39;s implementation on the raster backend, it&#39;s just <code>QImage</code> :)"}, {"owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "reply_to_user": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1440005994, "post_id": 32101556, "comment_id": 52098657, "body": "@KubaOber He created QImage without copying the data from the instance of his class. But calling QPixmap::fromImage creates a copy of data. Not exactly the copy, but at least reserved a new memory for storing image data in the way optimized for displaying it."}], "answers": [{"comments": [{"owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "edited": false, "score": 0, "creation_date": 1440005830, "post_id": 32102041, "comment_id": 52098570, "body": "Sorry for this beginner&#39;s explanation. According to your comment you new it obviously :-)"}], "tags": [], "owner": {"reputation": 6788, "user_id": 298206, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/2911c6ad709ff05272e49a21df247da2?s=128&d=identicon&r=PG", "display_name": "Valentin Heinitz", "link": "https://stackoverflow.com/users/298206/valentin-heinitz"}, "is_accepted": false, "score": 0, "last_activity_date": 1440005557, "creation_date": 1440005557, "answer_id": 32102041, "question_id": 32101556, "link": "https://stackoverflow.com/questions/32101556/how-to-show-a-qimage-without-copying-in-qgraphicsscene/32102041#32102041", "title": "How to show a QImage without copying in QGraphicsScene", "body": "<p>For displaying images QPixmap is a proper class. QGraphicsScene pdovides a method only for a QPixmap.</p>\n\n<pre><code>QGraphicsPixmapItem * QGraphicsScene::addPixmap(const QPixmap &amp; pixmap)\n</code></pre>\n\n<p>However, QPixmap is an optimized class for displaying images, so it can't be created with existing block of memory. So if you intend to display your memory data as an image in QGraphicsScene, it seems to be not possible (with reasonable effort).</p>\n\n<p>Why do you concern about copying a data from your class into QPixmap? Is there a prove, that it will be a performance bottle-neck?</p>\n\n<p>If not, either you convert your class directly to a QPixmap or use QPixmap::fromImage().\nAdd yout image with e.g.:</p>\n\n<pre><code>myScene-&gt;addPixmap( QPixmap::fromImage(myImage) );\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1440011822, "creation_date": 1440011822, "answer_id": 32103860, "question_id": 32101556, "link": "https://stackoverflow.com/questions/32101556/how-to-show-a-qimage-without-copying-in-qgraphicsscene/32103860#32103860", "title": "How to show a QImage without copying in QGraphicsScene", "body": "<p>With the default, raster paint engine/backend, the top-level widget's contents are stored as a <code>QImage</code>. Drawing a <code>QImage</code> (and a <code>QPixmap</code>, too) on it is quick and doesn't involve copies. The <code>QPixmap</code>, with the raster backend, is simply internally a <code>QImage</code> that has the same format as that of the backing store. The pixmap generally doesn't represent any native resource handle - since you are using a raster backend unless you ask for something else explicitly.</p>\n\n<p>So what you would wish to do is to directly <code>drawImage</code> from your source image, within a <code>QGraphicsItem::paint</code> implementation. What really happens behind the scenes is the <code>paint</code> gets executed on the backing store - a <code>QImage</code>, and that's fast and efficient. The <code>QPainter</code> that you use operates on a <code>QImage</code>!</p>\n\n<p>All you have to do is to implement a <code>QGraphicsImageItem</code> akin to <code>QGraphicsPixmapItem</code>. No copying and no format conversion will be involved as long as your source image has the same format as the image backing the top-level window. And how would you know that? Just ask the backing store about what format it's in.</p>\n\n<pre><code>QImage::Format backingStoreFormat(QWidget * widget) {\n  auto store = dynamic_cast&lt;QImage*&gt;(widget-&gt;backingStore()-&gt;paintDevice())\n  return store ? store-&gt;format() : QImage::Format_Invalid;\n}\n</code></pre>\n\n<p>I leave the implementation of <code>QGraphicsImageItem</code> to the reader :)</p>\n"}], "owner": {"reputation": 814, "user_id": 3561614, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/33bc4f2b66043cfca0e3cfb4a1c8ae18?s=128&d=identicon&r=PG&f=1", "display_name": "user3561614", "link": "https://stackoverflow.com/users/3561614/user3561614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 1, "accepted_answer_id": 32103860, "answer_count": 2, "score": 0, "last_activity_date": 1440011822, "creation_date": 1440003829, "last_edit_date": 1440004650, "question_id": 32101556, "link": "https://stackoverflow.com/questions/32101556/how-to-show-a-qimage-without-copying-in-qgraphicsscene", "title": "How to show a QImage without copying in QGraphicsScene", "body": "<p>I have my own image class containing an unsigned char array with RGB values. I would like to show images stored in this class, without copying them, in a QGraphicsScene. I can make an QImage with</p>\n\n<pre><code>QImage image(data, width, height, width * 3, QImage::Format_RGB888);\n</code></pre>\n\n<p>without copying my image. How can I show image in a QGraphicsScene without a deep copy of data?</p>\n"}, {"tags": ["c++", "opencv", "pointers"], "answers": [{"comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1440004799, "post_id": 32101774, "comment_id": 52097930, "body": "Or don&#39;t allocate standard containers with new to begin with."}, {"owner": {"reputation": 167, "user_id": 1974295, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IsgsY.jpg?s=128&g=1", "display_name": "kuu", "link": "https://stackoverflow.com/users/1974295/kuu"}, "edited": false, "score": 0, "creation_date": 1440009874, "post_id": 32101774, "comment_id": 52100935, "body": "so, I have to copy the mat to shared memory. how to copy to &quot;std::vector&lt;float&gt; *ptrd=shmd.construct&lt; std::vector&lt;float&gt; &gt;(&quot;DepthImage&quot;)();&quot;"}], "tags": [], "owner": {"reputation": 6595, "user_id": 5218277, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZuEZa.jpg?s=128&g=1", "display_name": "Alex Lop.", "link": "https://stackoverflow.com/users/5218277/alex-lop"}, "is_accepted": false, "score": 0, "last_activity_date": 1440004836, "last_edit_date": 1440004836, "creation_date": 1440004596, "answer_id": 32101774, "question_id": 32101541, "link": "https://stackoverflow.com/questions/32101541/how-to-copy-matcv-32fc1-to-vectorfloat/32101774#32101774", "title": "How to copy Mat(CV_32FC1) to vector&lt;float&gt;*", "body": "<p>You defined a <strong>pointer</strong> to <code>vector&lt;float&gt;</code>. Then you accessed it without allocating it first. You need to initialize the pointer:\n<code>vector&lt;float&gt; *Vf2 = new vector&lt;float&gt;;</code> and the access the object to which it points.</p>\n\n<p>Don't forget to release it once you are done (<code>delete Vf2;</code>)! Or consider using <em>smart pointer</em>.</p>\n"}, {"comments": [{"owner": {"reputation": 167, "user_id": 1974295, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IsgsY.jpg?s=128&g=1", "display_name": "kuu", "link": "https://stackoverflow.com/users/1974295/kuu"}, "edited": false, "score": 0, "creation_date": 1440006209, "post_id": 32102027, "comment_id": 52098782, "body": "managed_shared_memory shmd(create_only, DEPTHNAME, WIDTH_PIC * HEIGHT_PIC * 4 + 1024); \tinterprocess_mutex* mxd = shmd.construct&lt;interprocess_mutex&gt;(&quot;TheMutex&quot;)(); \tstd::vector&lt;float&gt; *ptrd=shmd.construct&lt; std::vector&lt;float&gt; &gt;(&quot;DepthImage&quot;)();"}, {"owner": {"reputation": 167, "user_id": 1974295, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IsgsY.jpg?s=128&g=1", "display_name": "kuu", "link": "https://stackoverflow.com/users/1974295/kuu"}, "edited": false, "score": 0, "creation_date": 1440007281, "post_id": 32102027, "comment_id": 52099318, "body": "Thank you Miki. why I have to use pointer,  because I want to copy the Mat Data to shared memory."}], "tags": [], "owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "is_accepted": false, "score": 0, "last_activity_date": 1440006929, "last_edit_date": 1440006929, "creation_date": 1440005500, "answer_id": 32102027, "question_id": 32101541, "link": "https://stackoverflow.com/questions/32101541/how-to-copy-matcv-32fc1-to-vectorfloat/32102027#32102027", "title": "How to copy Mat(CV_32FC1) to vector&lt;float&gt;*", "body": "<p>You shouldn't use a pointer to a <code>vector</code>. </p>\n\n<p>You can convert from/to <code>vector</code> and <code>Mat</code>:</p>\n\n<pre><code>#include &lt;opencv2\\opencv.hpp&gt;\n#include &lt;vector&gt;\nusing namespace std;\nusing namespace cv;\n\nint main()\n{\n    vector&lt;float&gt; v1{1, 2, 3, 4, 5};\n\n    // vector to Mat\n\n    Mat1f m1(v1);       // not copying data, just creating the matrix header\n    Mat1f m2(v1, true); // copying data\n\n    // Mat to vector\n\n    vector&lt;float&gt; v2(m2.begin(), m2.end()); // copying data\n\n\n    // If you really need a pointer to a vector, then\n\n    vector&lt;float&gt;* v3 = new vector&lt;float&gt;(m2.begin(), m2.end());\n    // ... do your stuff\n    delete v3;\n\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 1974295, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/IsgsY.jpg?s=128&g=1", "display_name": "kuu", "link": "https://stackoverflow.com/users/1974295/kuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 349, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1440007144, "creation_date": 1440003765, "last_edit_date": 1440007144, "question_id": 32101541, "link": "https://stackoverflow.com/questions/32101541/how-to-copy-matcv-32fc1-to-vectorfloat", "title": "How to copy Mat(CV_32FC1) to vector&lt;float&gt;*", "body": "<p>I want to copy a mat data to vector . </p>\n\n<p>So, now I have to that to copy mat data to \"vector* Vf2\" </p>\n\n<p>And I wrote this code. </p>\n\n<hr>\n\n<pre><code>cv::Mat M=Mat(480,480,CV_32FC1,\u300cthe data ....\u300d);   \n\n//copy vector to mat   \n\nvector&lt; float&gt; *Vf2;   \n\n//copy mat to vector   \n\nVf2-&gt;assign((float*)M.datastart, (float*)M.dataend);  \n</code></pre>\n\n<hr>\n\n<p>But, It fell without error while assign method. </p>\n\n<p>And if vector isn't pointer. </p>\n\n<p>So this below code success. </p>\n\n<hr>\n\n<pre><code> cv::Mat M=Mat(480,480,CV_32FC1,\u300cthe data ....\u300d);   \n\n //copy vector to mat   \n\n vector&lt; float&gt; Vf2;   \n\n //copy mat to vector   \n\n Vf2.assign((float*)M.datastart, (float*)M.dataend);   \n</code></pre>\n\n<hr>\n\n<p>How to copy mat to <code>vector&lt;float&gt;* Vf2</code> </p>\n\n<p>Tell me someone </p>\n\n<p>sorry actuary I want to do is that copy the mat data to shared memory.\nand I wrote like this code.</p>\n\n<pre><code>managed_shared_memory shmd(create_only, DEPTHNAME, WIDTH_PIC * HEIGHT_PIC * 4 + 1024);\n\nstd::vector&lt;float&gt; *ptrd=shmd.construct&lt; std::vector&lt;float&gt; &gt;(\"DepthImage\")(); mxd-&gt;lock(); \n\nptrd-&gt;assign((float*)decodedDepthData2.datastart,(float*)decodedDepthData2.dataend);\n\nmxd-&gt;unlock();\n</code></pre>\n\n<p>By why, I want to copy the mat data to vector*</p>\n"}, {"tags": ["c++", "windows-services"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5244240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/685b11c6961dbd62d85d7473bb80dd6b?s=128&d=identicon&r=PG&f=1", "display_name": "user5244240", "link": "https://stackoverflow.com/users/5244240/user5244240"}, "edited": false, "score": 0, "creation_date": 1440010877, "post_id": 32102495, "comment_id": 52101548, "body": "Thanks. If I just want to launch the application (this application needs to be launched as out of the service process), and I do NOT want the service to interacts with the application that will be launched. Will the above suggestions still apply for my case?"}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1, "user_id": 5244240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/685b11c6961dbd62d85d7473bb80dd6b?s=128&d=identicon&r=PG&f=1", "display_name": "user5244240", "link": "https://stackoverflow.com/users/5244240/user5244240"}, "edited": false, "score": 0, "creation_date": 1440011852, "post_id": 32102495, "comment_id": 52102084, "body": "Yes.  You said you want the <b>user</b> to interact with the app, so you have to run it in the user&#39;s session, and <code>CreateProcessAsUser()</code> can do that."}, {"owner": {"reputation": 1, "user_id": 5244240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/685b11c6961dbd62d85d7473bb80dd6b?s=128&d=identicon&r=PG&f=1", "display_name": "user5244240", "link": "https://stackoverflow.com/users/5244240/user5244240"}, "edited": false, "score": 0, "creation_date": 1441822976, "post_id": 32102495, "comment_id": 52834088, "body": "I cannot see the my application running on the desktop. Please take a look at my code."}, {"owner": {"reputation": 1, "user_id": 5244240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/685b11c6961dbd62d85d7473bb80dd6b?s=128&d=identicon&r=PG&f=1", "display_name": "user5244240", "link": "https://stackoverflow.com/users/5244240/user5244240"}, "edited": false, "score": 0, "creation_date": 1441823756, "post_id": 32102495, "comment_id": 52834502, "body": "I could not paste the code (too big). The CreateProcessAsUser() function succeeded, but the application is not running in the desktop."}, {"owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "reply_to_user": {"reputation": 1, "user_id": 5244240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/685b11c6961dbd62d85d7473bb80dd6b?s=128&d=identicon&r=PG&f=1", "display_name": "user5244240", "link": "https://stackoverflow.com/users/5244240/user5244240"}, "edited": false, "score": 0, "creation_date": 1441824880, "post_id": 32102495, "comment_id": 52835036, "body": "Please <a href=\"http://stackoverflow.com/posts/32101457/edit\">edit your question</a> to show the code. Do not try to post it in a comment here.  You are likely using <code>CreateProcessAsUser()</code> incorrectly.  I know it works, I use it in my own services to launch interactive processes."}], "tags": [], "owner": {"reputation": 449279, "user_id": 65863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f00013ceab8fb1928885c5c172fbfd4a?s=128&d=identicon&r=PG", "display_name": "Remy Lebeau", "link": "https://stackoverflow.com/users/65863/remy-lebeau"}, "is_accepted": false, "score": 0, "last_activity_date": 1440007564, "last_edit_date": 1440007564, "creation_date": 1440007150, "answer_id": 32102495, "question_id": 32101457, "link": "https://stackoverflow.com/questions/32101457/how-can-i-launch-a-c-native-application-from-a-windows-service-main-function/32102495#32102495", "title": "How can I launch a C++ native application from a Windows Service main function (the application interacts with the console)?", "body": "<p>It runs, you just cannot see it.  You have to use <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682429.aspx\" rel=\"nofollow\"><code>CreateProcessAsUser()</code></a> instead of <code>_spawnl()</code> so the new process runs in a specific user's session, not in the service's own session.  In Vista and later, services run in their own isolated sessions (Session 0 Isolation), which users cannot see or interact with.  A common solution is to use <a href=\"https://msdn.microsoft.com/en-us/library/aa383835.aspx\" rel=\"nofollow\"><code>WTSGetActiveConsoleSessionId()</code></a> and/or <a href=\"https://msdn.microsoft.com/en-us/library/aa383833.aspx\" rel=\"nofollow\"><code>WTSEnumerateSessions()</code></a> to find the desired user session, then use <a href=\"https://msdn.microsoft.com/en-us/library/aa383840.aspx\" rel=\"nofollow\"><code>WTSQueryUserToken()</code></a> to get a token hanlde can be used with <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/bb762270.aspx\" rel=\"nofollow\"><code>CreateEnvironmentBlock()</code></a> and <code>CreateProcessAsUser()</code>.  Also, when providing a <code>STARTUPINFO</code> to <code>CreateProcessAsUser()</code>, set the <code>lpDesktop</code> field to <code>\"WinSta0\\\\default\"</code> (the user's default desktop that they can interact with after logging in).</p>\n"}], "owner": {"reputation": 1, "user_id": 5244240, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/685b11c6961dbd62d85d7473bb80dd6b?s=128&d=identicon&r=PG&f=1", "display_name": "user5244240", "link": "https://stackoverflow.com/users/5244240/user5244240"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440007564, "creation_date": 1440003510, "last_edit_date": 1440003675, "question_id": 32101457, "link": "https://stackoverflow.com/questions/32101457/how-can-i-launch-a-c-native-application-from-a-windows-service-main-function", "title": "How can I launch a C++ native application from a Windows Service main function (the application interacts with the console)?", "body": "<p>I'm using the <code>_spawnl()</code> function for launching a C++ native application from the main Service function (<code>SvcMain</code>), but the application never gets to run. </p>\n\n<p>Is there any trick to launch applications that interacts with the user?</p>\n"}, {"tags": ["c++", "boost", "parallel-processing", "mpi", "hdf5"], "answers": [{"tags": [], "owner": {"reputation": 4724, "user_id": 1024740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1037d544b43c71c34225fac55e0c7750?s=128&d=identicon&r=PG", "display_name": "Rob Latham", "link": "https://stackoverflow.com/users/1024740/rob-latham"}, "is_accepted": false, "score": 0, "last_activity_date": 1440083201, "creation_date": 1440083201, "answer_id": 32121890, "question_id": 32101225, "link": "https://stackoverflow.com/questions/32101225/creating-extendable-datasets-in-parallel-hdf5/32121890#32121890", "title": "Creating extendable datasets in parallel HDF5", "body": "<p>Before answering your specific code, I'd like to know more about why \"one dataset per process\" is how you chose to decompose your problem.  That seems like a mess if you're ever going to scale beyond a handful of processes.</p>\n\n<p>You are doing parallel I/O to a dataset, and you have enabled MPI-IO but not  collective access.  that's unlikely to yield terribly good performance at scale. </p>\n\n<p>Your chunk dims seem really small to me.  I'd make them larger, but \"how large\" depends on a lot of factors.  Well, see how performance is with these values. Maybe it won't be so bad if you turn on collective I/O?</p>\n\n<p>Those initial impressions aside, perhaps you simply wish to experiment with HDF5.  I don't know why turning chunking on would make some datasets empty... unless you are writing to NFS.   If you are writing to NFS, well, good luck, buddy but it's hopeless. </p>\n"}], "owner": {"reputation": 345, "user_id": 2651364, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/56be7050a6619e2a972a173a16122ce3?s=128&d=identicon&r=PG", "display_name": "ad_ad", "link": "https://stackoverflow.com/users/2651364/ad-ad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440083201, "creation_date": 1440002661, "question_id": 32101225, "link": "https://stackoverflow.com/questions/32101225/creating-extendable-datasets-in-parallel-hdf5", "title": "Creating extendable datasets in parallel HDF5", "body": "<p>I am trying to write data into an hdf5 file in parallel.  Each node has its own dataset, which is unique (although they are the same size).  I am trying to write them all into separate datasets in an hdf5 file in parallel.  The catch is that later I may want to overwrite them with different size datasets (different size compared to the original set of datasets --- the dataset on each processor is the same size).  Does anyone know how to do this?</p>\n\n<p>(code relies on boost and Eigen)</p>\n\n<p>I have code to first open the file:</p>\n\n<pre><code>boost::mpi::environment env(argc, argv);\n\n// set up the info for HDF5 and MPI\nMPI_Comm comm = MPI_COMM_SELF;\nMPI_Info info = MPI_INFO_NULL;\n\n// Set up file access property list with parallel I/O access\nhid_t plist_id = H5Pcreate(H5P_FILE_ACCESS);\nH5Pset_fapl_mpio(plist_id, comm, info);\n\n// declare the file ID\nstd::string filename = \"test.h5\";\n\n// create a file\nhid_t fileID = H5Fcreate(filename.c_str(), H5F_ACC_TRUNC, H5P_DEFAULT, plist_id);\n\n// close the property list\nH5Pclose(plist_id);\n</code></pre>\n\n<p>Then to create and write the datasets:</p>\n\n<pre><code>// get the mpi communicator\nunique_ptr&lt;mpi::communicator&gt; worldComm(new mpi::communicator);\n\nconst Eigen::VectorXd dataset = worldComm-&gt;rank() * Eigen::VectorXd::Ones(3);\nconst std::string name = \"/vector\";\n\n// sleep for a bit so the processors are doing something different\nsleep(worldComm-&gt;rank() * 2.0);\n\n// the sizes of the data set\nconst hsize_t dimsf[2] = {(hsize_t)dataset.rows(), (hsize_t)dataset.cols()};\n\n// set the maximum size of the data set to be unlimited\nconst hsize_t maxdim[2] = {H5S_UNLIMITED, H5S_UNLIMITED};\n\n// the size of each chuck --- is there a better way to choose these numbers!?!?!?!\nconst hsize_t chunkDims[2] = {2, 5};\n\n// create the dataspace for the dataset.\nconst hid_t filespace = H5Screate_simple(2, dimsf, maxdim); \nassert(filespace&gt;0);\n\n// modify data set creation properties --- enable chunking\nconst hid_t prop = H5Pcreate(H5P_DATASET_CREATE);\nconst hid_t status = H5Pset_chunk(prop, 2, chunkDims);\n\n// create the dataset with default properties for each process\nstd::vector&lt;hid_t&gt; dsetVec(worldComm-&gt;size());\nfor( int i=0; i&lt;worldComm-&gt;size(); ++i ) {\n  const std::string datasetName = name+\"_rank_\"+std::to_string(i);\n\n  dsetVec[i] = H5Dcreate2(fileID, datasetName.c_str(), H5T_NATIVE_DOUBLE, filespace, H5P_DEFAULT, prop, H5P_DEFAULT);\n}\n\n// Create property list for dataset write.\nconst hid_t plistID = H5Pcreate(H5P_DATASET_XFER);\n\n// write the data to file\nH5Dwrite(dsetVec[worldComm-&gt;rank()], H5T_NATIVE_DOUBLE, H5S_ALL, H5S_ALL, plistID, dataset.data());\n\n// close the filespace \nH5Sclose(filespace);\n\n// close the datasets\nfor( int i=0; i&lt;worldComm-&gt;size(); ++i ) {\n  H5Dclose(dsetVec[i]);\n}\n\n// close the file\nH5Fclose(fileID);\n</code></pre>\n\n<p>What I expect is four datasets named \"/vector_rank_i\" (i=0,1,2,3) each of size 3 and valued [0, 0, 0], [1, 1, 1], [2, 2, 2], and [3, 3, 3], respectively.  However, what is being produced is four datasets named \"/vector_rank_i\" (i=0,1,2,3) each of size 3 but the values are [0, 0, 0], [0, 0, 0], [0, 0, 0], and [3, 3, 3].  </p>\n\n<p>This exact code works perfectly if I don't use chunking.  However, since I'll need to be able to extend the datasets later this is less than ideal.  Does anyone know a good work around?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 3, "creation_date": 1440001666, "post_id": 32100937, "comment_id": 52096193, "body": "<code>MyClass1::x</code> doesn&#39;t exist without a <code>MyClass1</code> instance. So there&#39;s no variable to access and your question makes no sense. I think you don&#39;t understand classes."}, {"owner": {"reputation": 589, "user_id": 4352154, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-63Z0G5h6oFA/AAAAAAAAAAI/AAAAAAAAAHg/guAmotTzoqo/photo.jpg?sz=128", "display_name": "Kai Schmidt", "link": "https://stackoverflow.com/users/4352154/kai-schmidt"}, "reply_to_user": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440001759, "post_id": 32100937, "comment_id": 52096249, "body": "Would it be possible to let get_x() assume that one istance of MyClass1 exists?"}, {"owner": {"reputation": 52656, "user_id": 225074, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/dea26ac1ef8259140d28aa8b5ba4f1b3?s=128&d=identicon&r=PG", "display_name": "Thomas Matthews", "link": "https://stackoverflow.com/users/225074/thomas-matthews"}, "edited": false, "score": 0, "creation_date": 1440001763, "post_id": 32100937, "comment_id": 52096253, "body": "Research the <code>friend</code> and <code>public</code> keywords."}, {"owner": {"reputation": 209335, "user_id": 661519, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1735ab1c8ba4229daa855ec6aad03065?s=128&d=identicon&r=PG", "display_name": "juanchopanza", "link": "https://stackoverflow.com/users/661519/juanchopanza"}, "edited": false, "score": 0, "creation_date": 1440001800, "post_id": 32100937, "comment_id": 52096277, "body": "No, it would have to refer to an existing instance. It can&#39;t &quot;assume&quot; anything."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440001894, "post_id": 32100937, "comment_id": 52096336, "body": ".If MyClass2 derived from MyClass1, then it would have an x if instantiated."}, {"owner": {"reputation": 138660, "user_id": 298661, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/3445f56229632874a44596385ed6d40c?s=128&d=identicon&r=PG", "display_name": "Puppy", "link": "https://stackoverflow.com/users/298661/puppy"}, "edited": false, "score": 3, "creation_date": 1440002047, "post_id": 32100937, "comment_id": 52096437, "body": "It would be the exact antithesis of more modular."}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440002092, "post_id": 32100937, "comment_id": 52096460, "body": "Get back in your kennel!"}, {"owner": {"reputation": 2670, "user_id": 346104, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/31duc.jpg?s=128&g=1", "display_name": "franji1", "link": "https://stackoverflow.com/users/346104/franji1"}, "edited": false, "score": 0, "creation_date": 1440002602, "post_id": 32100937, "comment_id": 52096762, "body": "You don&#39;t have to pass the object variables, you could just pass in references to the objects, especially when there is a synergetic relationship between the two (or more) classes.  Many design patterns actually utilize other objects in their constructors and methods, e.g. a view&#39;s Draw method takes a Rectangle object (and also an overload of Draw that takes 4 integers: top, left, bottom, right)."}], "answers": [{"comments": [{"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440001821, "post_id": 32100992, "comment_id": 52096291, "body": "..or MyClass2 derives from MyClass1."}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440001883, "post_id": 32100992, "comment_id": 52096329, "body": "@MartinJames I didn&#39;t want to assume any inheritance that the OP didn&#39;t suggest exists"}, {"owner": {"reputation": 23582, "user_id": 758133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/W8X5E.jpg?s=128&g=1", "display_name": "Martin James", "link": "https://stackoverflow.com/users/758133/martin-james"}, "edited": false, "score": 0, "creation_date": 1440001957, "post_id": 32100992, "comment_id": 52096376, "body": "Sure - the question is so out-of-it that I was suggesting anything that came to mind:)"}, {"owner": {"reputation": 589, "user_id": 4352154, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-63Z0G5h6oFA/AAAAAAAAAAI/AAAAAAAAAHg/guAmotTzoqo/photo.jpg?sz=128", "display_name": "Kai Schmidt", "link": "https://stackoverflow.com/users/4352154/kai-schmidt"}, "edited": false, "score": 0, "creation_date": 1440002017, "post_id": 32100992, "comment_id": 52096420, "body": "I see, so the simplest thing is just to give classes that need to access each other from outside each other&#39;s scope a pointer to the other?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "reply_to_user": {"reputation": 589, "user_id": 4352154, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-63Z0G5h6oFA/AAAAAAAAAAI/AAAAAAAAAHg/guAmotTzoqo/photo.jpg?sz=128", "display_name": "Kai Schmidt", "link": "https://stackoverflow.com/users/4352154/kai-schmidt"}, "edited": false, "score": 1, "creation_date": 1440002095, "post_id": 32100992, "comment_id": 52096464, "body": "@KaiSchmidt That is one way to do it, it really depends on the specific case. Maybe one class should <b>own</b> an instance of the other. Maybe one class <b>derives</b> from the other. Maybe one class merely <b>refereces/points</b> to the other. These all depend on what the classes do and how your software is designed."}], "tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 3, "last_activity_date": 1440001986, "last_edit_date": 1440001986, "creation_date": 1440001739, "answer_id": 32100992, "question_id": 32100937, "link": "https://stackoverflow.com/questions/32100937/access-out-of-scope-variables-without-passing-them/32100992#32100992", "title": "Access out of scope variables without passing them?", "body": "<p>The only way you can get access to the <code>x</code> of <code>MyClass1</code> is if you have an instance of that class, because <code>x</code> is not <code>static</code>.</p>\n\n<pre><code>class MyClass2\n{\npublic:\n    MyClass2(MyClass1* c1) : myC1(c1) {}\n    int get_x()\n    {\n        return myC1-&gt;x;\n    }\nprivate:\n    MyClass1* myC1;\n}\n</code></pre>\n\n<p>Then you can use this like</p>\n\n<pre><code>int main()\n{\n    MyClass1 obj1;\n    obj.x = 5;\n    MyClass2 obj2{&amp;obj1};\n    std::cout &lt;&lt; obj2.get_x();\n    return 0;\n}\n</code></pre>\n"}], "owner": {"reputation": 589, "user_id": 4352154, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-63Z0G5h6oFA/AAAAAAAAAAI/AAAAAAAAAHg/guAmotTzoqo/photo.jpg?sz=128", "display_name": "Kai Schmidt", "link": "https://stackoverflow.com/users/4352154/kai-schmidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 32100992, "answer_count": 1, "score": 0, "last_activity_date": 1440001986, "creation_date": 1440001582, "question_id": 32100937, "link": "https://stackoverflow.com/questions/32100937/access-out-of-scope-variables-without-passing-them", "title": "Access out of scope variables without passing them?", "body": "<p>Is there a way to access variables outside their class?</p>\n\n<pre><code>class MyClass1\n{\npublic:\n    int x;\n};\n\nclass MyClass2\n{\npublic:\n    int get_x()\n    {\n        //somehow access MyClass1's variable x without \n        //passing it as an argument and return it.\n    }\n}\n\nint main()\n{\n    MyClass1 obj1;\n    obj1.x = 5;\n    MyClass2 obj2;\n    std::cout &lt;&lt; obj2.get_x();\n    return 0;\n}\n</code></pre>\n\n<p>One of the main things making me reluctant to split my programs into many small organized classes rather than a few messy huge ones is the hassle of passing every single variable that one class might need from another. Being able to access variables without having to pass them (and having to update both declarations and definitions should something change) would be very convenient and would let me code more modually. </p>\n\n<p>Any other solutions to my issue would also be appreciated, as I suspect there may be something dangerous about trying to access variable this way.</p>\n"}, {"tags": ["c++", "multithreading", "c++11"], "comments": [{"owner": {"reputation": 1838, "user_id": 4525052, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0780adfbbb6b445dac0c9e12d3c73f50?s=128&d=identicon&r=PG&f=1", "display_name": "RyanP", "link": "https://stackoverflow.com/users/4525052/ryanp"}, "edited": false, "score": 0, "creation_date": 1440002072, "post_id": 32100865, "comment_id": 52096450, "body": "I&#39;d be curious what your performance increase on this is. First, it might be better to have it handle when there are less than a few elements in the list as a special case (sorting say... 4 elements with bubble sort is probably faster than the overhead of creating an additional 2 threads with 3 calls to merge). But it&#39;s also curious because as you need to merge larger and larger arrays, you are doing it with less threads. (For instance your last merge, the largest, will be single threaded)."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "edited": false, "score": 1, "creation_date": 1440003085, "post_id": 32100865, "comment_id": 52097019, "body": "The key part of the compile error is &quot;<code>&lt;unresolved overloaded function type&gt;</code>&quot;. Good pattern to commit to memory."}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1440010504, "post_id": 32100928, "comment_id": 52101316, "body": "I&#39;d order them 231 myself."}], "tags": [], "owner": {"reputation": 43107, "user_id": 3953764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4dd168106a67cbd805c107cba3252caa?s=128&d=identicon&r=PG", "display_name": "Piotr Skotnicki", "link": "https://stackoverflow.com/users/3953764/piotr-skotnicki"}, "is_accepted": true, "score": 6, "last_activity_date": 1440001729, "last_edit_date": 1440001729, "creation_date": 1440001557, "answer_id": 32100928, "question_id": 32100865, "link": "https://stackoverflow.com/questions/32100865/thread-not-working-for-function-with-template-arguments/32100928#32100928", "title": "thread not working for function with template arguments", "body": "<p><code>merge_sort</code> itself is a function template; to get the address of one of the instantiated functions you need to specify all template arguments:</p>\n\n<pre><code>thread t1 (&amp;merge_sort&lt;RandomAccessIterator&gt;,begin,mid);\n//         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n</code></pre>\n\n<p>or use a static cast:</p>\n\n<pre><code>thread t1 (static_cast&lt;void(*)(RandomAccessIterator,RandomAccessIterator)&gt;(&amp;merge_sort),begin,mid);\n</code></pre>\n\n<p>...or use a lambda expression and let the compiler automatically deduce the types of arguments:</p>\n\n<pre><code>thread t1 ([begin,mid]{merge_sort(begin, mid);});\n</code></pre>\n"}], "owner": {"reputation": 1469, "user_id": 3751615, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/F7Hw5.jpg?s=128&g=1", "display_name": "PRP", "link": "https://stackoverflow.com/users/3751615/prp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 944, "favorite_count": 0, "accepted_answer_id": 32100928, "answer_count": 1, "score": 2, "last_activity_date": 1440003009, "creation_date": 1440001301, "last_edit_date": 1440003009, "question_id": 32100865, "link": "https://stackoverflow.com/questions/32100865/thread-not-working-for-function-with-template-arguments", "title": "thread not working for function with template arguments", "body": "<p>I am trying to implement multithreaded merge sort, but my attempt is fails to compile. Here is my code :</p>\n\n<pre><code>template &lt;class RandomAccessIterator&gt;\nvoid merge_sort (RandomAccessIterator begin,RandomAccessIterator end)\n{\n    int N = end - begin;\n    int N1,N2;\n\n    if (N == 1)\n        return;\n\n    RandomAccessIterator mid = begin + (end-begin)/2;\n\n\n    // merge_sort (begin,mid); // this is OK\n    // merge_sort (mid,end);   // this is OK\n\n    thread t1 (merge_sort,begin,mid); // error\n    thread t2 (merge_sort,mid,end);   // error\n\n    t1.join ();\n    t2.join ();\n\n    N1 = mid - begin;\n    N2 = end - mid;\n\n    merge (begin,N1,mid,N2);\n}\n</code></pre>\n\n<p>Errors Messages from gcc (<code>g++ -std=c++11 merge-multithread.cpp</code>):</p>\n\n<pre><code>merge-multithread.cpp: In instantiation of \u2018void merge_sort(RandomAccessIterator, RandomAccessIterator) [with RandomAccessIterator = int*]\u2019:\nmerge-multithread.cpp:76:25:   required from here\nmerge-multithread.cpp:60:33: error: no matching function for call to \u2018std::thread::thread(&lt;unresolved overloaded function type&gt;, int*&amp;, int*&amp;)\u2019\n  thread t1 (merge_sort,begin,mid);\n                                 ^\nIn file included from merge-multithread.cpp:4:0:\n/usr/include/c++/5.2.0/thread:133:7: note: candidate: template&lt;class _Callable, class ... _Args&gt; std::thread::thread(_Callable&amp;&amp;, _Args&amp;&amp; ...)\n       thread(_Callable&amp;&amp; __f, _Args&amp;&amp;... __args)\n       ^\n/usr/include/c++/5.2.0/thread:133:7: note:   template argument deduction/substitution failed:\nmerge-multithread.cpp:60:33: note:   couldn't deduce template parameter \u2018_Callable\u2019\n  thread t1 (merge_sort,begin,mid);\n                                 ^\nIn file included from merge-multithread.cpp:4:0:\n/usr/include/c++/5.2.0/thread:128:5: note: candidate: std::thread::thread(std::thread&amp;&amp;)\n     thread(thread&amp;&amp; __t) noexcept\n     ^\n/usr/include/c++/5.2.0/thread:128:5: note:   candidate expects 1 argument, 3 provided\n/usr/include/c++/5.2.0/thread:122:5: note: candidate: std::thread::thread()\n     thread() noexcept = default;\n</code></pre>\n"}, {"tags": ["c++", "static", "g++", "global-variables", "static-libraries"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5244154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fb51cb59b03f057d58c5f6eb919fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Mattahy", "link": "https://stackoverflow.com/users/5244154/mattahy"}, "edited": false, "score": 0, "creation_date": 1440002647, "post_id": 32101072, "comment_id": 52096785, "body": "But what if i need notifier_header initialized inside InitTest constructor?"}, {"owner": {"reputation": 23, "user_id": 5244154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fb51cb59b03f057d58c5f6eb919fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Mattahy", "link": "https://stackoverflow.com/users/5244154/mattahy"}, "edited": false, "score": 0, "creation_date": 1440002860, "post_id": 32101072, "comment_id": 52096897, "body": "It won&#39;t, it will just crash (this is just a small example, i have experienced this inside my project and I am stuck at this)"}, {"owner": {"reputation": 23, "user_id": 5244154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fb51cb59b03f057d58c5f6eb919fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Mattahy", "link": "https://stackoverflow.com/users/5244154/mattahy"}, "edited": false, "score": 0, "creation_date": 1440004833, "post_id": 32101072, "comment_id": 52097949, "body": "Well by making headerInstance() not static makes it not accesable inside a static method. I am testing making it static. (inside my real project) EDIT: It doesn&#39;t seem to crash, but some stuff doesn&#39;t work, looking into it."}, {"owner": {"reputation": 23, "user_id": 5244154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fb51cb59b03f057d58c5f6eb919fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Mattahy", "link": "https://stackoverflow.com/users/5244154/mattahy"}, "edited": false, "score": 1, "creation_date": 1440005577, "post_id": 32101072, "comment_id": 52098432, "body": "Ok, got it to work in my project, just had to make method headerInstance() static. (and fix some other bugs)  Thanks."}], "tags": [], "owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "is_accepted": true, "score": 2, "last_activity_date": 1440003930, "last_edit_date": 1440003930, "creation_date": 1440002077, "answer_id": 32101072, "question_id": 32100848, "link": "https://stackoverflow.com/questions/32100848/c-static-members-of-a-class-are-initialized-after-constructor/32101072#32101072", "title": "C++ Static members of a class are initialized after constructor", "body": "<p>My guess is that this is related to the order of static objects initialisation in different compilation units being undefined. </p>\n\n<p>The second code snippet where you create a <code>test</code> object in your <code>main</code> is easy to explain. Static initialisation will always happen before any code is executed, so by the time you enter main, your <code>notifier_header</code> object is definitely created.</p>\n\n<p>Now, when you create your <code>test</code> before <code>main</code>, you have two static objects. <code>notifier_header</code> object does not depend on your <code>InitTest</code>: it is scoped within that class, but it is stored in static memory. You seem to reference the <code>notifier_header</code> in your <code>InitTest.cpp</code>, which is a different compilation unit to <code>main</code>. A compiler is free to do static allocations in any order for those two units, provided that there is no interdependencies.</p>\n\n<p>If your constructor depended on <code>notifier_header</code>, you could use it as a singleton. Create a function that returns an instance of a static object (<code>headerInstance</code> in the example below), and upon its call, the object will be created:</p>\n\n<pre><code>#include &lt;iostream&gt;\nnamespace StaticTestLib  {\nclass notifier_header{\npublic:\n    notifier_header(){\n        std::cout&lt;&lt;\"static var init\"&lt;&lt;std::endl;\n    }\n};\n\n\nclass InitTest {\npublic:\n    InitTest();\n    virtual ~InitTest();\n    notifier_header&amp; headerInstance();\n};\n\n}\n</code></pre>\n\n<p>Static library source file (InitTest.cpp)</p>\n\n<pre><code>#include \"InitTest.h\"\n\nnamespace StaticTestLib  {\n\nclass notifier_cpp{\npublic:\n    notifier_cpp(){\n        std::cout&lt;&lt;\"code before constructor\"&lt;&lt;std::endl;\n    }\n}_notifier_in_cpp;\n\nInitTest::InitTest() {\n    headerInstance();\n    std::cout&lt;&lt;\"constructor\"&lt;&lt;std::endl;\n}\n\nInitTest::~InitTest() {\n    std::cout&lt;&lt;\"destructor\"&lt;&lt;std::endl;\n}\n\nnotifier_header&amp; InitTest::headerInstance() {\n    static notifier_header _header_notifier; // will only be constructed once\n    return _header_notifier;\n}\n\n}\n</code></pre>\n\n<p>The output I get:</p>\n\n<pre><code>static var init\nconstructor\ncode before constructor\nprogram main\nprogram end\ndestructor\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5244154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82fb51cb59b03f057d58c5f6eb919fe6?s=128&d=identicon&r=PG&f=1", "display_name": "Mattahy", "link": "https://stackoverflow.com/users/5244154/mattahy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 32101072, "answer_count": 1, "score": 2, "last_activity_date": 1440005850, "creation_date": 1440001253, "last_edit_date": 1440004606, "question_id": 32100848, "link": "https://stackoverflow.com/questions/32100848/c-static-members-of-a-class-are-initialized-after-constructor", "title": "C++ Static members of a class are initialized after constructor", "body": "<p>I have a problem with static members of a class not being initialized before the constructor. Am i doing something wrong? Is it a bug in G++ ?\nAny workarounds?</p>\n\n<p>g++ --version : <em>(Ubuntu 4.8.4-2ubuntu1~14.04) 4.8.4</em><br>\nI am also using Eclipse as my IDE, but i just copy the static lib headers to /usr/include/StaticTestLib/InitTest.h and the library to /usr/lib/x86_64-linux-gnu/libStaticTestLib.a</p>\n\n<p>Note this only happens if the object that holds the data is defined before main and the class is in a Static Library.</p>\n\n<p>Static library header (the static library itself is named StaticTestLib):</p>\n\nInitTest.h\n\n<pre><code>#include &lt;iostream&gt;\nnamespace StaticTestLib  {\n    class notifier_header{\n    public:\n        notifier_header(){\n            std::cout&lt;&lt;\"static var init\"&lt;&lt;std::endl;\n        }\n    };\n\n    class InitTest {\n    public:\n        static notifier_header _header_notifier;\n        InitTest();\n        virtual ~InitTest();\n    };    \n}\n</code></pre>\n\n<p>Static library source file:</p>\n\nInitTest.cpp\n\n<pre><code>#include \"InitTest.h\"\n\nnamespace StaticTestLib  {\n    notifier_header InitTest::_header_notifier;\n\n    class notifier_cpp{\n    public:\n        notifier_cpp(){\n            std::cout&lt;&lt;\"code before constructor\"&lt;&lt;std::endl;\n        }\n    }_notifier_in_cpp;\n\n    InitTest::InitTest() {\n        std::cout&lt;&lt;\"constructor\"&lt;&lt;std::endl;\n    }\n\n    InitTest::~InitTest() {\n        std::cout&lt;&lt;\"destructor\"&lt;&lt;std::endl;\n    }\n}\n</code></pre>\n\n<hr>\n\n<p>This program:</p>\n\nStaticTest.cpp\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;StaticTestLib/InitTest.h&gt;\n\nStaticTestLib::InitTest test;\n\nint main() {\n    std::cout &lt;&lt; \"program main\" &lt;&lt; std::endl;\n    std::cout &lt;&lt; \"program end\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>&hellip; outputs:</p>\n\n<pre>\n<i>constructor\nstatic var init\ncode before constructor\nprogram main\nprogram end\ndestructor</i>\n</pre>\n\n<hr>\n\n<p>But this program:</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;StaticTestLib/InitTest.h&gt;\n\nint main() {\n    std::cout &lt;&lt; \"program main\" &lt;&lt; std::endl;\n    StaticTestLib::InitTest test;\n    std::cout &lt;&lt; \"program end\" &lt;&lt; std::endl;\n    return 0;\n}\n</code></pre>\n\n<p>&hellip; outputs:</p>\n\n<pre>\n<i>static var init\ncode before constructor\nprogram main\ncontructor\nprogram end\ndestructor</i>\n</pre>\n"}, {"tags": ["php", "c++", "curl", "request"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5203771"}, "edited": false, "score": 0, "creation_date": 1440006033, "post_id": 32101932, "comment_id": 52098679, "body": "Thank you, however doesn&#39;t this mean I&#39;m still supposed to include the oauth key or login credentials in my cpp application or am I just misunderstanding the concept of oauth? If it does require storing in my application and it were to get reversed, I&#39;m afraid someone might re-create the application environment and abuse the system."}, {"owner": {"reputation": 569, "user_id": 4763807, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9be1967979795d44d66ec28f6189eac2?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4763807/tom"}, "edited": false, "score": 1, "creation_date": 1440011780, "post_id": 32101932, "comment_id": 52102052, "body": "The auth key is generated in the server, and stored in the database. Every login request receives a new key. You send that key back to the client, and then the client uses this key to identify itself against the server in future requests. There&#39;s no way of reversing this, because for the user who owns the computer, the key he received isn&#39;t a secret."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5203771"}, "edited": false, "score": 0, "creation_date": 1440012036, "post_id": 32101932, "comment_id": 52102208, "body": "This might be something, that I look further into in the future, when my code requires dynamic queries or even more secure handling. At the moment, it seems a bit complicated, as I&#39;ve processed a lot of new information and learned quite a bit. Nevertheless, thanks once again, for a well explained thought."}], "tags": [], "owner": {"reputation": 569, "user_id": 4763807, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9be1967979795d44d66ec28f6189eac2?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/4763807/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1440005176, "creation_date": 1440005176, "answer_id": 32101932, "question_id": 32100811, "link": "https://stackoverflow.com/questions/32100811/c-curl-passing-data-through-php-request-the-safe-way/32101932#32101932", "title": "C++/CURL - Passing data through PHP request the safe way?", "body": "<p>From what I understood, you want to implement a some sort of login system using auth tokens. In this case, OAuth can do the job. Here's a tutorial written on <a href=\"http://www.sitepoint.com/creating-a-php-oauth-server/\" rel=\"nofollow\">SitePoint</a> that can guide you through the process. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5203771"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440014640, "creation_date": 1440001107, "last_edit_date": 1440014640, "question_id": 32100811, "link": "https://stackoverflow.com/questions/32100811/c-curl-passing-data-through-php-request-the-safe-way", "title": "C++/CURL - Passing data through PHP request the safe way?", "body": "<p>I'm trying to send data with curl to my PHP file and then I can do all the other actions like hashing password/data with salt, running database queries eco. It seems to work fine, but there's only one problem. I'm not sure how to secure it, with an authorization token for example. I want to be able to query data from my PHP file using the written application only. I can see how this would become a problem, if people had access to the link through web browser for example.</p>\n\n<p>I've included my code below, if someone needs something similar.</p>\n\n<p>main.cpp</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;curl/curl.h&gt;\n#include &lt;sha.h&gt;\n#include &lt;hex.h&gt;\n\nusing namespace std;\nusing namespace CryptoPP;\n\nsize_t size = 0;\nsize_t write_to_string(void *ptr, size_t size, size_t count, void *stream) {\n    ((string*)stream)-&gt;append((char*)ptr, 0, size*count);\n    return size*count;\n}\n\ntemplate &lt;class T&gt;\nstring QueryDB(initializer_list&lt;T&gt; list) // Use initialize_list to query an undefined number of params\n{\n    CURL *curl;\n    CURLcode res;\n\n    string submitdata = \"\", query_result;\n\n    int i = 1;\n    for (auto elem : list) // For each param append to the submitdata string\n    {\n        if (i == 1) { // If first param, we append \"?\"\n            string d = \"?\" + to_string(i) + \"=\" + elem;\n            submitdata.append(d);\n        } else if (i &gt; 1) { // If not first param, we append \"&amp;\" as it's the second, third, fourth ... param\n            string d = \"&amp;\" + to_string(i) + \"=\" + elem;\n            submitdata.append(d);\n        }\n        i++;\n    }\n\n    curl_global_init(CURL_GLOBAL_ALL);\n    curl = curl_easy_init();\n\n    if (curl)\n    {\n        string loginurl = string(\"http://localhost/login.php\");\n\n        curl_easy_setopt(curl, CURLOPT_USERPWD, \"randomhttpuser:randomhttppassword\");\n        curl_easy_setopt(curl, CURLOPT_URL, (loginurl + submitdata).c_str());\n        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, write_to_string);\n        curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;query_result);\n        curl_easy_setopt(curl, CURLOPT_TIMEOUT, 20L);\n        res = curl_easy_perform(curl);\n\n        if (res != CURLE_OK)\n            fprintf(stderr, \"curl_easy_perform() failed: %s\\n\", curl_easy_strerror(res));\n        curl_easy_cleanup(curl);\n    }\n    else {\n        query_result = \"CONNECTION FAILED\";\n    }\n    curl_global_cleanup();\n\n    return query_result;\n}\n\nstring SHA256Hash(string input)\n{\n    SHA256 hash;\n    string hashed_input;\n\n    StringSource ss(input, true, new HashFilter(hash, new HexEncoder(new StringSink(hashed_input))));\n\n    return hashed_input;\n}\n\nint main()\n{\n    string username = \"testuser\";\n    string raw_password = \"testpass\";\n\n    // Hash password and send it as a query to PHP file\n    // query_result will hold the value of REQUEST response\n    auto hashed_password = SHA256Hash(raw_password);\n    auto query_result = QueryDB({ username, hashed_password });\n\n    cout &lt;&lt; \"=========================================== [ POST ] ===========================================\" &lt;&lt; endl;\n    cout &lt;&lt; \"User: \" &lt;&lt; username.c_str() &lt;&lt; endl;\n    cout &lt;&lt; \"Raw Password: \" &lt;&lt; raw_password.c_str() &lt;&lt; endl;\n    cout &lt;&lt; \"Hashed password: \" &lt;&lt; hashed_password.c_str() &lt;&lt; endl;\n    cout &lt;&lt; \"========================================== [ REQUEST ] =========================================\" &lt;&lt; endl;\n    cout &lt;&lt; query_result.c_str() &lt;&lt; endl;\n\n\n    Sleep(15 * 1000);\n    return 0;\n}\n</code></pre>\n\n<p>login.php</p>\n\n<pre><code>&lt;?php\n\n$reqparams = array();\n\nfunction AddStringToArray($name,$string) {\n    global $reqparams;\n    $reqparams[$name] = $string;\n}\n\n/* Check if specified param exists in reqparams array */\nfunction GetRequestParam($value) {\n    global $reqparams;\n\n    if (array_key_exists($value, $reqparams)) {\n        $returnvalue = $reqparams[$value];\n    } else {\n        $returnvalue = \"INVALID PARAMETER\";\n    }\n\n    return $returnvalue;\n}\n\n$authuser = \"randomhttpuser\";\n$authpw = \"randomhttppassword\";\n$authorized = False;\n\nif (!isset($_SERVER['PHP_AUTH_USER'])) {\n    header('WWW-Authenticate: Basic realm=\"My Realm\"');\n    header('HTTP/1.0 401 Unauthorized');\n    echo 'Failed to authorize!';\n    exit;\n} else {\n\n    if($_SERVER['PHP_AUTH_USER'] == $authuser &amp;&amp; $_SERVER['PHP_AUTH_PW'] == $authpw)\n    {\n        $authorized = True;\n    } else {\n        $authorized = False;\n        die('Failed to authorize!');\n    }\n}\n\nif($authorized == True)\n{\n    /* Store each REQUEST and it's value in the $reqparams array using AddStringToArray function */\n    foreach ($_REQUEST as $key =&gt; $value)  \n    {\n        $value = addslashes($value);\n        $value = strip_tags($value);\n\n        AddStringToArray($key, $value);\n    }\n\n    /* You should remember in which order you called the params in your REQUEST query or if you really want, you can just use:\n\n    $variable = $_REQUEST['param_name'];\n\n    However, if an undefined param is specified, it will result in an warning and ruin your output, if you manually parse it */\n\n    $user = GetRequestParam(1);\n    $pass = GetRequestParam(2);\n\n    /* GetRequestParam returns 'INVALID_PARAMETER' instead of a warning that an undefined param was requested */\n    $invalid_param = GetRequestParam(42);\n\n    /* Re-hash password with a salt that's stored in the PHP file only, before using or comparing it to the value stored in database or doing whatever else */\n    $salt = $user . $pass . \"secretkey42\";\n    $salt_hashed_passsword = strtoupper(hash('sha256', $salt));\n\n    echo \"User: $user\";\n    echo \"\\nHashed Password: $salt_hashed_passsword (Salt)\";\n}\n\n?&gt;\n</code></pre>\n\n<p><strong>Edit:</strong> I could use HTTP header, but isn't it possible to reverse my application and abuse it?</p>\n\n<p><strong>Edit: I currently decided to use HTTP authentication as a temporary measure.</strong> </p>\n\n<p>I stored a random generated username and password in my PHP file and compare them to the PHP_AUTH_USER/PW which are sent in the HTTP header from my cpp application using CURLOPT_USERPWD:</p>\n\n<pre><code>curl_easy_setopt(curl, CURLOPT_USERPWD, \"randomhttpusername:randomhttppassword\");\n</code></pre>\n\n<p>Hopefully, this will at least make it a bit harder for the hacker. First he will have to RE my application to get the the user/password and even after that he can only query the response if password belongs to specified user or not - since most of my queries are hard coded. You could even store the number of failed logins and temporarily ban him for x amount of time. Rest of the queries are made after login returns true.</p>\n\n<p><strong>I've also updated the code above to use the changes I've made and added some comments if you're too lazy to go over the code line-by-line. Feel free to give me some tips on how to improve the code or optimize for better use.</strong></p>\n"}, {"tags": ["python", "c++", "eclipse", "pydev"], "comments": [{"owner": {"reputation": 11, "user_id": 5244204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5adf6d8071a0a34914d8b0875be7cb52?s=128&d=identicon&r=PG&f=1", "display_name": "JRobParsons", "link": "https://stackoverflow.com/users/5244204/jrobparsons"}, "edited": false, "score": 0, "creation_date": 1440335660, "post_id": 32100787, "comment_id": 52220759, "body": "Here is what appears to be working:"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 5244204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5adf6d8071a0a34914d8b0875be7cb52?s=128&d=identicon&r=PG&f=1", "display_name": "JRobParsons", "link": "https://stackoverflow.com/users/5244204/jrobparsons"}, "is_accepted": false, "score": 0, "last_activity_date": 1440337537, "creation_date": 1440337537, "answer_id": 32167307, "question_id": 32100787, "link": "https://stackoverflow.com/questions/32100787/debugging-python-when-both-pydev-and-cdt-natures-in-same-eclipse-project/32167307#32167307", "title": "Debugging Python when both PyDev and CDT natures in same Eclipse project", "body": "<p>After 'googling' around the internet, here is what appears to be working for my particular situation:</p>\n\n<ol>\n<li>Create a C/C++ project (empty makefile project). This produces the following 3 files in my top-level local SVN check-out directory:</li>\n</ol>\n\n<p>.settings\n.cproject\n.project</p>\n\n<p>Note: I keep my Eclipse workspace separate from my Eclipse project.</p>\n\n<ol start=\"2\">\n<li>Create a separate Python project that is outside of the local SVN check-out directory. </li>\n</ol>\n\n<p>Note: This Eclipse Python project is in my Eclipse workspace.</p>\n\n<p>This creates the following 2 files:</p>\n\n<p>.pydevproject\n.project</p>\n\n<ol start=\"3\">\n<li><p>Copy the .pydevproject to the directory containing the .settings, .cproject, and .project files.</p></li>\n<li><p>Copy the Python 'nature' elements from the Python .project file to the CDT .project file.</p></li>\n<li><p>Restart Eclipse if it had been running while editing the dot (.) files.</p></li>\n<li><p>Finally, get into the \"C/C++ Perspective\". In the 'Project Explorer\" window, pull down the 'View Menu\". </p></li>\n</ol>\n\n<p>Select 'Customize View...'.\nSelect the 'Content' tab.\nUncheck the 'PyDev Navigator Content' option.</p>\n"}], "owner": {"reputation": 11, "user_id": 5244204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5adf6d8071a0a34914d8b0875be7cb52?s=128&d=identicon&r=PG&f=1", "display_name": "JRobParsons", "link": "https://stackoverflow.com/users/5244204/jrobparsons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440337537, "creation_date": 1440000996, "last_edit_date": 1440001934, "question_id": 32100787, "link": "https://stackoverflow.com/questions/32100787/debugging-python-when-both-pydev-and-cdt-natures-in-same-eclipse-project", "title": "Debugging Python when both PyDev and CDT natures in same Eclipse project", "body": "<p>Eclipse 4.5 (Mars) / Windows 7</p>\n\n<p>I have an Eclipse C/C++ Makefile project that has both Python and C/C++ code. The source code is checked-out from an SVN repository. The build environment is via a MSYS shell using a project specific configuration script to create all Makefiles in the top/sub-directories and 'make', 'make install' to build.</p>\n\n<p>My .project file has both the PyDev and CDT natures configured.</p>\n\n<p>I can switch between the PyDev and C/C++ perspectives and browse code including right-clicking on a symbol and 'open declaration'.</p>\n\n<p>The 'Debug' perspective appears to be specific to the C/C++ perspective.</p>\n\n<p>Do you have experience with configuring an Eclipse project that allows you to debug both Python and C/C++ code?</p>\n"}, {"tags": ["c++", "c", "bit-manipulation"], "comments": [{"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440001289, "post_id": 32100772, "comment_id": 52095989, "body": "<code>iVal32 == (iVal32)iVal16</code>? It would be much easier to use unsigned."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440001682, "post_id": 32100772, "comment_id": 52096200, "body": "@Olaf - I have updated both to be unsigned."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1440001990, "post_id": 32100772, "comment_id": 52096402, "body": "@Jeff: These are no valid strings!"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002096, "post_id": 32100772, "comment_id": 52096466, "body": "That actually included a bit sarcasm. You did not even define &quot;contain&quot; precisely. And your examples do not add to clarity."}, {"owner": {"reputation": 7193, "user_id": 1856325, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ZO1bm.png?s=128&g=1", "display_name": "FreeNickname", "link": "https://stackoverflow.com/users/1856325/freenickname"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002199, "post_id": 32100772, "comment_id": 52096535, "body": "As @Olaf said, could you define &quot;contain&quot; more precisely? For instance, does <code>0xAB12CD34 &gt;&gt; 1;</code> contain <code>0xAB12</code>?"}, {"owner": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002214, "post_id": 32100772, "comment_id": 52096544, "body": "@Olaf - Good point.  strrchr is out.  but still a perfect candidate for SSE2 / AVX.  Or AVX2 if you don&#39;t care about older processors."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 2415, "user_id": 3311025, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AsSw8.jpg?s=128&g=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/3311025/jeff"}, "edited": false, "score": 0, "creation_date": 1440002260, "post_id": 32100772, "comment_id": 52096563, "body": "@Jeff: My mobile does not hav any of those. Nor does my embedded CPU."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002301, "post_id": 32100772, "comment_id": 52096582, "body": "@Olaf - Oops, I have just corrected it. Thank you."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1440002396, "post_id": 32100772, "comment_id": 52096641, "body": "While you can do this with bitmanipulation, it&#39;s annoying. Can you clarify whether SSE is allowed and if so which versions?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002453, "post_id": 32100772, "comment_id": 52096677, "body": "No, you have not. Please think it over first, then write it down."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440002955, "post_id": 32100772, "comment_id": 52096945, "body": "@Olaf - Just imagine that 0xCD12 and 0x3456 are 16-bit characters stored in memory."}, {"owner": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1440003477, "post_id": 32100772, "comment_id": 52097214, "body": "there&#39;s an algorithm to check if &quot;a word has a byte equal to n&quot; here <a href=\"http://graphics.stanford.edu/~seander/bithacks.html#ZeroInWord\" rel=\"nofollow noreferrer\">graphics.stanford.edu/~seander/bithacks.html#ZeroInWord</a>"}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1440003486, "post_id": 32100772, "comment_id": 52097220, "body": "i am very interested in what function will behave differently out of the box in different architecture?"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1440003500, "post_id": 32100772, "comment_id": 52097228, "body": "@harold - Since this is about bitwise manipulation (not about speed optimization), I think SSE is irrelevant here."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1440003619, "post_id": 32100772, "comment_id": 52097303, "body": "@Aeoliyan sure, if you want it to be. You&#39;re the OP after all. But it wouldn&#39;t have been the first time that someone asked for a bithack but actually wanted a speed optimization."}, {"owner": {"reputation": 5681, "user_id": 3040064, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/02e7081757e69605a91b7f7aea47f4ae?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Hu", "link": "https://stackoverflow.com/users/3040064/jason-hu"}, "edited": false, "score": 0, "creation_date": 1440003770, "post_id": 32100772, "comment_id": 52097386, "body": "i think you can try this: <code>(value &amp; iVal32) ^ value == 0</code> return <code>1</code> if it satisfies your requirement. and perform another time of <code>&lt;&lt;</code> to make sure this for higher bits."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 26723, "user_id": 995714, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/w1393.jpg?s=128&g=1", "display_name": "phuclv", "link": "https://stackoverflow.com/users/995714/phuclv"}, "edited": false, "score": 0, "creation_date": 1440004074, "post_id": 32100772, "comment_id": 52097528, "body": "@L\u01b0uV\u0129nhPh&#250;c - Yes, your link is a good starting point."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 0, "creation_date": 1440004586, "post_id": 32100772, "comment_id": 52097821, "body": "You can combine that check-for-zero with <code>x ^ (test * 0x00010001)</code> (that&#39;s 32bit, extend the obvious way)"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1440004945, "post_id": 32100772, "comment_id": 52098001, "body": "Do it with bit shifting and AND operations. Don&#39;t over shift though: that&#39;s undefined behaviour."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1440005397, "post_id": 32100772, "comment_id": 52098312, "body": "Should the bit pattern be aligned on byte boundaries?"}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440006255, "post_id": 32100772, "comment_id": 52098803, "body": "your could use memcmp() in a loop, that starts with the first byte if the 32 or 64 bit memory entity and step forward one byte on each iteration of the loop and compare 2 bytes at a time.  Note: you may have to pay attention to the Endianness of the underlying architecture"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1440008626, "post_id": 32100772, "comment_id": 52100139, "body": "@DanielJour - See my update."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440008999, "post_id": 32100772, "comment_id": 52100343, "body": "@user3629249 - Yes, thanks for your suggestion, I agree <code>memcmp()</code> can be used. However, solutions to this question still have advantages to understand what is behind the scene."}], "answers": [{"comments": [{"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440059671, "post_id": 32102324, "comment_id": 52119687, "body": "@DavidSchwartz - Would you adapt your code to follow my latest update? Sorry for inconvenience. +1"}], "tags": [], "owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1440081049, "last_edit_date": 1440081049, "creation_date": 1440006651, "answer_id": 32102324, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value/32102324#32102324", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<pre><code>bool contains (uint32_t haystack, uint16_t needle)\n{\n    return ((haystack &amp; 0xffff) == needle) ||\n           (((haystack &gt;&gt; 16) &amp; 0xffff) == needle);\n}\n\nbool contains (uint64_t haystack, uint16_t needle)\n{\n    return ((haystack &amp; 0xffff) == needle) ||\n           (((haystack &gt;&gt; 16) &amp; 0xffff) == needle) ||\n           (((haystack &gt;&gt; 32) &amp; 0xffff) == needle) ||\n           (((haystack &gt;&gt; 48) &amp; 0xffff) == needle);\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440059886, "post_id": 32102626, "comment_id": 52119794, "body": "@P_Hinker - See my latest update. Sorry for inconvenience. +1"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440089096, "post_id": 32102626, "comment_id": 52139619, "body": "@P_Hinker - I will upvote you later when my point is at least 15. It turns out that is the rule here."}], "tags": [], "owner": {"reputation": 300, "user_id": 5235902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c88f854711e641c4544d4fa5503d9548?s=128&d=identicon&r=PG&f=1", "display_name": "P. Hinker", "link": "https://stackoverflow.com/users/5235902/p-hinker"}, "is_accepted": false, "score": 1, "last_activity_date": 1440088058, "last_edit_date": 1440088058, "creation_date": 1440007684, "answer_id": 32102626, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value/32102626#32102626", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<p>Not completely clear what the OP wants but given the description and subsequent comments, something along the lines of this :</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;stdint.h&gt;\nusing namespace std;\n\nbool contains(uint16_t item, uint32_t source);\nbool contains(uint16_t item, uint64_t source);\n\nint main()\n{\n    uint32_t iVal32 = 0xABCD1234;\n    uint64_t iVal64 = 0xABCD12345678CABELL;\n\n    cout &lt;&lt; contains(0x1234, iVal32) &lt;&lt; endl;\n    cout &lt;&lt; contains(0xABCD, iVal32) &lt;&lt; endl;\n\n    cout &lt;&lt; contains(0xABCD, iVal64) &lt;&lt; endl;\n    cout &lt;&lt; contains(0x1234, iVal64) &lt;&lt; endl;\n    cout &lt;&lt; contains(0x5678, iVal64) &lt;&lt; endl;\n    cout &lt;&lt; contains(0xCABE, iVal64) &lt;&lt; endl;   \n    return 0;\n}\n\nbool contains(uint16_t item, uint32_t source)\n{\n    for (int i = 16 ; i &gt;= 0 ; i -= 16)\n    {\n        if (((source &lt;&lt; i) &gt;&gt; 16) == item)\n        {\n           return true;\n        }    \n    }\n    return false;\n}\n\nbool contains(uint16_t item, uint64_t source)\n{\n    for(int i = 48 ; i &gt;= 0 ; i -= 16)\n    {\n        if (((source &lt;&lt; i) &gt;&gt; 48) == item)\n        {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440010171, "post_id": 32102752, "comment_id": 52101124, "body": "Thank you, I&#39;ll test it, but the time now is already dawn in my country, so I have to sleep now. I&#39;ll come back soon. :-)"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440059737, "post_id": 32102752, "comment_id": 52119719, "body": "Would you adapt your code to follow my latest update? Sorry for inconvenience. +1"}, {"owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "reply_to_user": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440062842, "post_id": 32102752, "comment_id": 52121762, "body": "I am not sure if I fully understand what you mean. Do you get what you expect if you change <code>i+=4</code> to <code>i+=16</code>?"}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440084691, "post_id": 32102752, "comment_id": 52137090, "body": "Yes, one word (16-bit) for each test, that was I meant. However, I think the pattern matching test should be from left to right instead. Perhaps, the <code>0xFFFF</code> should be changed to <code>0xFFFF0000</code>."}, {"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440085723, "post_id": 32102752, "comment_id": 52137732, "body": "Thank you very much. I will upvote you later when my points achieve 15. I accept David Schwartz&#39;s answer because he done it without a looping."}], "tags": [], "owner": {"reputation": 13900, "user_id": 2020827, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6c7105ef9148e931ad05a6692155046?s=128&d=identicon&r=PG&f=1", "display_name": "sergej", "link": "https://stackoverflow.com/users/2020827/sergej"}, "is_accepted": false, "score": 1, "last_activity_date": 1440010295, "last_edit_date": 1440010295, "creation_date": 1440008122, "answer_id": 32102752, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value/32102752#32102752", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<p>Here is a possible solution for 32bit.\n<code>find_pos</code> returns the bit position of the 16bit value in the 32bit value,\nor <code>-1</code> if the 32bit value does not contain the 16bit value.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nuint32_t iVal32 = 0xABCD1234;\nuint64_t iVal64 = 0xABCD12345678CABE;\n\nint find_pos(uint32_t value, uint16_t pattern)\n{\n    int i;\n\n    for (i = 0; i &lt; 32; i+=4) {\n        uint32_t v = (value &amp; (0xFFFF &lt;&lt; i));\n        uint32_t p = (pattern &lt;&lt; i);\n        if (v == p)\n            return i;\n    }\n\n    return -1;\n}\n\nint main ()\n{\n    printf(\"i = %i\\n\", find_pos(iVal32, 0xCD12));\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>update:</strong></p>\n\n<p>Here is a possible solution for 32bit and 64bit, using a macro.</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdint.h&gt;\n\nuint32_t iVal32 = 0xABCD1234;\nuint64_t iVal64 = 0xABCD12345678CABE;\n\n#define find_pos(value, pattern, width)             \\\n({                                                  \\\n    int i;                                          \\\n    int found = 0;                                  \\\n                                                    \\\n    for (i = 0; i &lt; width; i+=4) {                  \\\n        typeof(value) v = (value &amp; (0xFFFF &lt;&lt; i));  \\\n        typeof(value) p = (pattern &lt;&lt; i);           \\\n        if (v == p) {                               \\\n            found = 1;                              \\\n            break;                                  \\\n        }                                           \\\n    }                                               \\\n                                                    \\\n    if (!found)                                     \\\n        i = -1;                                     \\\n    i;                                              \\\n})\n\n#define find_pos32(value, pattern) \\\n    find_pos(value, pattern, 32)\n\n#define find_pos64(value, pattern) \\\n    find_pos(value, pattern, 64)\n\nint main ()\n{\n    printf(\"i = %i\\n\", find_pos32(iVal32, 0xCD12));\n    printf(\"i = %i\\n\", find_pos64(iVal64, 0x678C));\n\n    return 0;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 0, "creation_date": 1440128361, "post_id": 32123709, "comment_id": 52154693, "body": "I&#39;m amazed by your clever solution. By the way, instead of <code>return (h1 * h2) == 0;</code> I think <code>return (h1 &amp; h2) == 0;</code> should be faster, shouldn&#39;t it?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "edited": false, "score": 1, "creation_date": 1440142741, "post_id": 32123709, "comment_id": 52160121, "body": "@Aeoliyan: It&#39;s faster but wrong. 1100 &amp; 0011 == 0000."}, {"owner": {"reputation": 523, "user_id": 1377697, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/782dfa617e9b47ef2995edfeb332f0b5?s=128&d=identicon&r=PG", "display_name": "warren", "link": "https://stackoverflow.com/users/1377697/warren"}, "edited": false, "score": 0, "creation_date": 1440180500, "post_id": 32123709, "comment_id": 52182889, "body": "Wouldn&#39;t return (h1==0)|(h2==0) be faster?"}, {"owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "reply_to_user": {"reputation": 523, "user_id": 1377697, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/782dfa617e9b47ef2995edfeb332f0b5?s=128&d=identicon&r=PG", "display_name": "warren", "link": "https://stackoverflow.com/users/1377697/warren"}, "edited": false, "score": 1, "creation_date": 1440188639, "post_id": 32123709, "comment_id": 52186824, "body": "@warren: That&#39;s three operations: two compares and an or. Although it&#39;s not unreasonable for the compiler to turn both into the same binary."}], "tags": [], "owner": {"reputation": 159118, "user_id": 15416, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/a2b11b9662b5155aada74191fbe7cb9e?s=128&d=identicon&r=PG", "display_name": "MSalters", "link": "https://stackoverflow.com/users/15416/msalters"}, "is_accepted": false, "score": 1, "last_activity_date": 1440088634, "creation_date": 1440088634, "answer_id": 32123709, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value/32123709#32123709", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<p>A slight variation of David's answer, non-branching.</p>\n\n<pre><code>bool contains (uint32_t haystack, uint16_t needle)\n{\n    uint32_t h1 = (haystack ^ needle) &amp; 0xFFFF;\n    haystack &gt;&gt;= 16;\n    uint32_t h2 = haystack ^ needle; // No need for mask.\n    // If and only if needle was in haystack, h1 or h2 will now be 0\n    return (h1*h2) == 0;\n}\n</code></pre>\n\n<p>Two XOR's, one shift, one mask, one multiplication and a compare that's probably free. Only 3 registers needed. The obvious extension to x64 calculates <code>h1*h2*h3*h4</code> but it might be more efficient to calculate a running product, so we don't need registers for the 4 intermediate results. (A decent optimizer will also do this).</p>\n\n<p>Since there's no shortcut evaluation, this may sometimes take more instructions, but the lack of shortcut evaluation also means there's no branch. I'll bet that for string searching this is a net win. </p>\n\n<p>Going a bit off-topic, the question mentions x86. SSE is the logical option there, especially for 64 bits.</p>\n"}], "owner": {"reputation": 805, "user_id": 5243340, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1e004830564cc40af4f44b6327fcee7a?s=128&d=identicon&r=PG&f=1", "display_name": "Aeoliyan", "link": "https://stackoverflow.com/users/5243340/aeoliyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 2, "accepted_answer_id": 32102324, "answer_count": 4, "score": 0, "last_activity_date": 1440088634, "creation_date": 1440000922, "last_edit_date": 1440088324, "question_id": 32100772, "link": "https://stackoverflow.com/questions/32100772/how-to-determine-whether-a-32-bit-64-bit-value-has-a-certain-16-bit-value", "title": "How to determine whether a 32-bit/64-bit value has a certain 16-bit value?", "body": "<h1>Questions</h1>\n\n<p>Consider the following 32-bit and 64-bit values:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>  uint32_t iVal32 = 0x AB CD 12 34;\n  uint64_t iVal64 = 0x AB CD 12 34 56 78 CA BE;\n</code></pre>\n\n<ol>\n<li>How to determine whether <code>iVal32</code> contains a certain 16-bit (word) value? <strike>Let's say <code>0xCD12</code>.</strike></li>\n<li>How to determine whether <code>iVal64</code> contains a certain 16-bit (word) value? <strike>Let's say <code>0x3456</code>.</strike></li>\n</ol>\n\n<h3>Update 1 (added later)</h3>\n\n<ul>\n<li><strike><code>0xCD12</code></strike> A word value that is to be checked might be anywhere in <code>iVal32</code> in every word boundary.</li>\n<li><strike><code>0x3456</code></strike> A word value that is to be checked might be anywhere in <code>iVal64</code> in every word boundary.</li>\n</ul>\n\n<h3>Update 2 (added later)</h3>\n\n<p>I admit a ridiculous mistake in the question. In my previous example, the word values to be checked were not in word boundaries in <code>iVal32</code> and <code>iVal64</code>. Therefore, my correction are:</p>\n\n<ul>\n<li>For <code>iVal32</code>, a word value to be checked can be either <code>0xABCD</code> or <code>0x1234</code>. Thus, for example, <code>0xCD12</code> shouldn't be found in <code>iVal32</code>.</li>\n<li>For <code>iVal64</code>, a word value to be checked can be one of the following: <code>0xABCD</code> or <code>0x1234</code> or <code>0x5678</code> or <code>0xCABE</code>. Thus, for example, <code>0xCD12</code> or <code>0x3456</code> or <code>0x78CA</code> shouldn't be found in <code>iVal64</code>.</li>\n</ul>\n\n<h1>Remarks</h1>\n\n<ul>\n<li>Solutions are intended to be used in a function that searches for a 16-bit character in a Unicode string. In x86, the function reads two characters at a time; and in x64, the function reads four characters at a time.</li>\n<li>I ask this because I noticed that the implementation of glibc <a href=\"https://github.com/lattera/glibc/blob/master/string/strchr.c\" rel=\"nofollow\">strchr()</a> (that works for 8-bit character) tries to test a longword at a time, but I didn't understand the code well.</li>\n</ul>\n"}, {"tags": ["php", "c++", "swig"], "comments": [{"owner": {"reputation": 4121, "user_id": 19674, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5057291c386d12733d4123a1e277384e?s=128&d=identicon&r=PG", "display_name": "Jon Trauntvein", "link": "https://stackoverflow.com/users/19674/jon-trauntvein"}, "edited": false, "score": 1, "creation_date": 1440004323, "post_id": 32100744, "comment_id": 52097670, "body": "I&#39;m not at all familiar with SWIG but I doubt very much that it will be able to grok any C++ structure of class thrown at it.  I think you&#39;re going to have to look into the exact calls available through SWIG to move data across the interface."}], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 1539240, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ceb7149773def731c5f0ba1878e7774e?s=128&d=identicon&r=PG", "display_name": "deadpickle", "link": "https://stackoverflow.com/users/1539240/deadpickle"}, "is_accepted": false, "score": 0, "last_activity_date": 1440088017, "creation_date": 1440088017, "answer_id": 32123531, "question_id": 32100744, "link": "https://stackoverflow.com/questions/32100744/type-converting-c-stdmap-into-php-using-swig/32123531#32123531", "title": "type converting C++ std::map into PHP using SWIG", "body": "<p>add</p>\n\n<pre><code>%template(mapStuff) std::map&lt;std::string, std::string&gt;;\n</code></pre>\n\n<p>to the interface file then in PHP treat it like a proxy class.</p>\n"}], "owner": {"reputation": 83, "user_id": 1539240, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ceb7149773def731c5f0ba1878e7774e?s=128&d=identicon&r=PG", "display_name": "deadpickle", "link": "https://stackoverflow.com/users/1539240/deadpickle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440173645, "creation_date": 1440000839, "last_edit_date": 1440173645, "question_id": 32100744, "link": "https://stackoverflow.com/questions/32100744/type-converting-c-stdmap-into-php-using-swig", "title": "type converting C++ std::map into PHP using SWIG", "body": "<p>I have a PHP extension that is in C++ and I used SWIG to wrap it. I am trying to create a class that is implemented in C++ as such:</p>\n\n<pre><code>Package(const std::map&lt;std::string,std::string&gt; &amp;input_map, const std::queue&lt;std::string&gt; &amp;dates_queue);\n</code></pre>\n\n<p>in PHP by using this script:</p>\n\n<pre><code>&lt;?php \nrequire \"prq.php\";\n\n$input = array(\"dataset\" =&gt; \"a050119\", \"station\" =&gt; \"a050119\", \"flag\" =&gt; \"1\");\n$dates = array(1 =&gt; \"read;chunk;2015-07-01 00:00;2015-07-02 00:00\");\n\n$package = new Package($input, $dates); \n?&gt;\n</code></pre>\n\n<p>but I get the error: </p>\n\n<pre><code>PHP Fatal error:  Type error in argument 1 of new_Package. Expected SWIGTYPE_p_std__mapT_std__string_std__string_t in /home/jlahowetz2/development/package-request-queue/swig/prq.php on line 230\n</code></pre>\n\n<p>which makes sense... I have no clue how to implement a std::map in PHP. I looked at the C++ wrapper that was created by SWIG and found a type conversion for this:</p>\n\n<pre><code>static swig_type_info _swigt__p_std__mapT_std__string_std__string_t = {\"_p_std__mapT_std__string_std__string_t\", \"std::map&lt; std::string,std::string &gt; *\", 0, 0, (void*)0, 0};\n</code></pre>\n\n<p>My question is: how do I use this type conversion in PHP to pass a std::map to my constructor? Thank you much.</p>\n"}, {"tags": ["c++", "unit-testing", "throw", "cppunit"], "answers": [{"tags": [], "owner": {"reputation": 1238, "user_id": 553596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f75aa7b74c7fea29f67d27bca6716453?s=128&d=identicon&r=PG", "display_name": "moggi", "link": "https://stackoverflow.com/users/553596/moggi"}, "is_accepted": false, "score": 1, "last_activity_date": 1440462997, "creation_date": 1440462997, "answer_id": 32193815, "question_id": 32100626, "link": "https://stackoverflow.com/questions/32100626/how-to-assert-in-cppunit-that-a-statement-throws-an-exception-either-of-type-exc/32193815#32193815", "title": "How to assert in cppunit that a statement throws an exception either of type Excp1 or Excp2?", "body": "<p>There is no direct support for this feature in cppunit but you have basically two solutions how you can implement it easily in your code.</p>\n\n<p>So the basic idea behind this assert is the following code:</p>\n\n<pre><code>bool expected_exception_thrown = false;\ntry\n{\n    yourExpression();\n}\ncatch(const ExpectedException&amp;)\n{\n    expected_exception_thrown = true;\n}\ncatch(...)\n{\n}\n\nif (!expected_exception_thrown)\n     CPPUNIT_FAIL();\n</code></pre>\n\n<p>Of course the actual implementation is a bit fancier and involves some additional features (like better messages for unexpected std::exception and the missing support for an error message) but the general idea is the same.</p>\n\n<p>So now you can easily extend that pattern to support as many exceptions as you need. You can have a look at the existing implementation in <a href=\"http://cgit.freedesktop.org/libreoffice/cppunit/tree/include/cppunit/TestAssert.h#n510\" rel=\"nofollow\">include/cppunit/TestAssert.h</a> and either use that implementation and extend it or use the simplified one that I posted above.</p>\n"}, {"comments": [{"owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "edited": false, "score": 0, "creation_date": 1440519808, "post_id": 32193942, "comment_id": 52302361, "body": "You could make test2 on platform 1 a little bit better by setting the same test condition, and trying to catch exception 2.  If it does, it is a test failure."}], "tags": [], "owner": {"reputation": 26377, "user_id": 7734, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/ced37e94f2fabfd8b4bb78e573947a68?s=128&d=identicon&r=PG", "display_name": "EvilTeach", "link": "https://stackoverflow.com/users/7734/evilteach"}, "is_accepted": true, "score": 2, "last_activity_date": 1440464050, "creation_date": 1440464050, "answer_id": 32193942, "question_id": 32100626, "link": "https://stackoverflow.com/questions/32100626/how-to-assert-in-cppunit-that-a-statement-throws-an-exception-either-of-type-exc/32193942#32193942", "title": "How to assert in cppunit that a statement throws an exception either of type Excp1 or Excp2?", "body": "<p>\n\n<p>First test, you make your test conditions such that it throws exeption 1.\nIf it fails to throw, that is a test failure.\nif it does throw, you catch it as an exception 1, and accept it as passing.\nIf it throws something else, the framework catches it.</p>\n\n<p>Second test, you make using conditional compilation to enable code for platform 2 only. You make your test conditions such that it throws exception 2.\nIF it fails to throw, that is a test failure.\nIf it does throw, you catch it as exception 2, and accept it as passing.\nIf it throws something else, the framework catches it.</p>\n\n<p>On the first platform the test simply passes, as there is nothing for it to do.\nOn the second platform you catch exception 2 as expected.</p>\n"}], "owner": {"reputation": 2858, "user_id": 439888, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/da051abac41879aed4060d544d37fd6f?s=128&d=identicon&r=PG", "display_name": "SkypeMeSM", "link": "https://stackoverflow.com/users/439888/skypemesm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2435, "favorite_count": 0, "accepted_answer_id": 32193942, "answer_count": 2, "score": 0, "last_activity_date": 1440464050, "creation_date": 1440000432, "question_id": 32100626, "link": "https://stackoverflow.com/questions/32100626/how-to-assert-in-cppunit-that-a-statement-throws-an-exception-either-of-type-exc", "title": "How to assert in cppunit that a statement throws an exception either of type Excp1 or Excp2?", "body": "<p><a href=\"http://cppunit.sourceforge.net/doc/cvs/group___assertions.html#ga7\" rel=\"nofollow\">CPPUNIT_ASSERT_THROW(Expression, ExceptionType)</a> does not seem to allow checking for exceptions of multiple types i.e. for a statement that can throw more than one kind of exceptions.</p>\n\n<p>For e.x. an expression may throw <em>Excp1</em> on one platform, or <em>Excp2</em> on another platform. Is there a workaround to test such statements using CPPUNIT_ASSERT_THROW? </p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 1, "creation_date": 1440000518, "post_id": 32100585, "comment_id": 52095642, "body": "Let me clarify that: are you asking <i>why</i> compiler discards rest of the loop when it sees a keyword that <i>instructs</i> him to do so, or do you want us to tell you why condition, that causes this became true <i>without</i> seeing relevant code?"}, {"owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "edited": false, "score": 2, "creation_date": 1440000593, "post_id": 32100585, "comment_id": 52095685, "body": "<a href=\"http://en.cppreference.com/w/cpp/language/continue\" rel=\"nofollow noreferrer\"><code>continue</code></a> causes a jump back to the top of the enclosing <code>for</code> loop."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1440000797, "post_id": 32100585, "comment_id": 52095712, "body": "<a href=\"https://msdn.microsoft.com/en-us/library/923ahwt1.aspx\" rel=\"nofollow noreferrer\">C#, you say?</a>"}, {"owner": {"reputation": 2791, "user_id": 4191466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e8319491a3bf6019ad5ebaf8163be55?s=128&d=identicon&r=PG&f=1", "display_name": "fdkgfosfskjdlsjdlkfsf", "link": "https://stackoverflow.com/users/4191466/fdkgfosfskjdlsjdlkfsf"}, "edited": false, "score": 0, "creation_date": 1440002435, "post_id": 32100585, "comment_id": 52096666, "body": "Thanks. I guess I worded the post incorrectly. I understand that <code>continue</code> of takes me to the top of the enclosing <code>for</code> loop. I was just not seeing why the debugger wasn&#39;t breaking in the following line of code."}, {"owner": {"reputation": 2791, "user_id": 4191466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e8319491a3bf6019ad5ebaf8163be55?s=128&d=identicon&r=PG&f=1", "display_name": "fdkgfosfskjdlsjdlkfsf", "link": "https://stackoverflow.com/users/4191466/fdkgfosfskjdlsjdlkfsf"}, "edited": false, "score": 0, "creation_date": 1440002538, "post_id": 32100585, "comment_id": 52096727, "body": "It just hit me that it hits <code>continue</code>, takes me back to the <code>for</code> loop, which then evaluates to <code>false</code>. And  the code that follows the <code>continue</code> is never executed."}], "answers": [{"tags": [], "owner": {"reputation": 453, "user_id": 5244152, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2MbE7.png?s=128&g=1", "display_name": "B. Kostas", "link": "https://stackoverflow.com/users/5244152/b-kostas"}, "is_accepted": false, "score": 0, "last_activity_date": 1440001485, "creation_date": 1440001485, "answer_id": 32100914, "question_id": 32100585, "link": "https://stackoverflow.com/questions/32100585/execution-order-of-code-with-continue/32100914#32100914", "title": "Execution order of code with continue;?", "body": "<p>It seems like the problem is your condition inside the if statement. I'm not sure that we can provide you further help if we don't see the actual code.</p>\n"}], "owner": {"reputation": 2791, "user_id": 4191466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5e8319491a3bf6019ad5ebaf8163be55?s=128&d=identicon&r=PG&f=1", "display_name": "fdkgfosfskjdlsjdlkfsf", "link": "https://stackoverflow.com/users/4191466/fdkgfosfskjdlsjdlkfsf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440001485, "creation_date": 1440000322, "question_id": 32100585, "link": "https://stackoverflow.com/questions/32100585/execution-order-of-code-with-continue", "title": "Execution order of code with continue;?", "body": "<p>I usually work with C#, so please bear with me. Also, the code was written by someone else.</p>\n\n<p>The code essentially outputs some information to a text file, and for some reason, at midnight, the file was only exported with carriage returns and line separators (ie. no actual data).</p>\n\n<p>After debugging it, I noticed that the debugger breaks on a <code>continue;</code>, but then anything after that line in the <code>FOR</code> loop (in init2) is not being executed.</p>\n\n<p>Due to the complexity of the code, I had to remove most of it. But I've included where all the <code>FOR</code> loops are. I just need to know what the CONTINUE is doing that skips where the \"important stuff\" is being output.</p>\n\n<p>Any help is appreciated. Thanks.</p>\n\n<pre><code>for ( init1; condition; increment ) {\n    for ( init2; condition; increment ) {\n        CODE;\n        for ( init3; condition; increment ) {\n            CODE;\n\n            if (condition) {\n                CODE;\n            }\n            CODE;\n        }\n        if (condition) continue;  //Always breaks here\n\n        CODE;  //Never breaks here\n\n        if (condition) {  //Never breaks here, so important stuff is not output to file.\n            for ( init4; condition; increment ) {\n                fprintf_s(fp, \"Output important stuff\");\n            }\n            fprintf_s(fp, \"\\n\");\n        }\n    }\n    if (statement) { //This code runs and the following is printed.\n        fprintf_s(fp, \"----------------------------------------------------------\\n\");\n    }\n}\n</code></pre>\n"}, {"tags": ["c++", "mfc"], "comments": [{"owner": {"reputation": 56995, "user_id": 174614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ca9a84fecd3f2fea333e8a1ef16edf98?s=128&d=identicon&r=PG", "display_name": "Tony The Lion", "link": "https://stackoverflow.com/users/174614/tony-the-lion"}, "edited": false, "score": 0, "creation_date": 1440000464, "post_id": 32100513, "comment_id": 52095604, "body": "I don&#39;t see a call to <a href=\"https://msdn.microsoft.com/en-us/library/yhth57kd.aspx\" rel=\"nofollow noreferrer\"><code>CDialog::Create</code></a> anywhere.  You need to create a dialog before you can show it."}, {"owner": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "reply_to_user": {"reputation": 56995, "user_id": 174614, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ca9a84fecd3f2fea333e8a1ef16edf98?s=128&d=identicon&r=PG", "display_name": "Tony The Lion", "link": "https://stackoverflow.com/users/174614/tony-the-lion"}, "edited": false, "score": 0, "creation_date": 1440000911, "post_id": 32100513, "comment_id": 52095778, "body": "this is not enought?           CMyclass(CWnd* pParent = NULL)     : CDialog(100, pParent){"}, {"owner": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "edited": false, "score": 2, "creation_date": 1440002874, "post_id": 32100513, "comment_id": 52096908, "body": "@RoyBean That creates the CDialog object but it does not create the window. You must call Create to create a modeless dialog window."}, {"owner": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "reply_to_user": {"reputation": 9996, "user_id": 2360695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/542ff60c0222369f65f9af25daacc03d?s=128&d=identicon&r=PG", "display_name": "ScottMcP-MVP", "link": "https://stackoverflow.com/users/2360695/scottmcp-mvp"}, "edited": false, "score": 0, "creation_date": 1440004070, "post_id": 32100513, "comment_id": 52097527, "body": "@ScottMcP-MVP I added  CMyclass(CWnd* pParent = NULL) \t: CDialog(100,pParent){ \t\t//{{AFX_DATA_INIT(CMyclass) \t\t//}}AFX_DATA_INIT\t \t\tCDialog::Create(100,pParent);   results in an assertions fail also"}, {"owner": {"reputation": 7447, "user_id": 929187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/F5QPL.png?s=128&g=1", "display_name": "Nikolay", "link": "https://stackoverflow.com/users/929187/nikolay"}, "edited": false, "score": 0, "creation_date": 1440005044, "post_id": 32100513, "comment_id": 52098071, "body": "That&#39;s probably because dialog template &quot;100&quot; does not exist. I would recommend you read some &quot;getting started&quot; tutorial on MFC."}, {"owner": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "reply_to_user": {"reputation": 7447, "user_id": 929187, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/F5QPL.png?s=128&g=1", "display_name": "Nikolay", "link": "https://stackoverflow.com/users/929187/nikolay"}, "edited": false, "score": 0, "creation_date": 1440006294, "post_id": 32100513, "comment_id": 52098823, "body": "@Nikolay can you show me a link tuturial for Cdialog and dll creation?, in resource.h the header of my Resource i defined #define IDD_ABOUTBOX                    100 and in  Resouyrce symbles appears with the in use flag"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "edited": false, "score": 0, "creation_date": 1440058592, "post_id": 32111118, "comment_id": 52119048, "body": "I had this to init method  AfxEnableControlContainer();     CoInitializeEx(NULL,COINIT_MULTITHREADED);     AFX_MANAGE_STATE(AfxGetStaticModuleState( ));      \tCMyclass *obj = new CMyclass(); \t \tif(obj-&gt;Create(100)){ \t\tobj-&gt;ShowWindow(SW_HIDE); \t\tDWORD dw = GetLastError(); \t}else{ \t\tDWORD dw = GetLastError(); \t}  Now I&#39;m having in obj-&gt;Create(100)); objcore.cpp Line: 40"}, {"owner": {"reputation": 4917, "user_id": 1850797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a4045b3bec181efb7c141a9416a0bed?s=128&d=identicon&r=PG", "display_name": "Edward Clements", "link": "https://stackoverflow.com/users/1850797/edward-clements"}, "reply_to_user": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "edited": false, "score": 0, "creation_date": 1440074282, "post_id": 32111118, "comment_id": 52129276, "body": "could you check if <code>obj</code> is NULL? that could happen if record ID #100 is not in your resource file -- I noticed that you have declared your dialog box as <code>IDD_ABOUTBOX</code>, is that symbol <code>#define</code>d as 100? Better to add a check for <code>obj == NULL</code> and change the next line to <code>if (obj-&gt;Create(IDD_ABOUTBOX))</code>"}], "tags": [], "owner": {"reputation": 4917, "user_id": 1850797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a4045b3bec181efb7c141a9416a0bed?s=128&d=identicon&r=PG", "display_name": "Edward Clements", "link": "https://stackoverflow.com/users/1850797/edward-clements"}, "is_accepted": false, "score": 1, "last_activity_date": 1440052605, "creation_date": 1440052605, "answer_id": 32111118, "question_id": 32100513, "link": "https://stackoverflow.com/questions/32100513/vc-create-cdialog-class-assertion-error/32111118#32111118", "title": "VC++ create Cdialog Class Assertion error", "body": "<p>@ScottMcP-MVP is right, modeless dialog boxes need a call to the <a href=\"https://msdn.microsoft.com/en-us/library/yhth57kd.aspx\" rel=\"nofollow\">Create method</a>.</p>\n\n<p>Also, according to the <a href=\"https://msdn.microsoft.com/en-us/library/8zkyyhxw.aspx\" rel=\"nofollow\">MSDN docs on the constructor</a>,</p>\n\n<blockquote>\n  <p>To construct a modeless dialog box, <strong>use the protected form of the\n  CDialog constructor</strong>. The constructor is protected because you must\n  derive your own dialog-box class to implement a modeless dialog box.\n  Construction of a modeless dialog box is a two-step process. First\n  call the constructor; then call the Create member function to create a\n  resource-based dialog box...</p>\n</blockquote>\n\n<p>So declare your class like <code>CMyclass() : CDialog() {...}</code> and use the following code to display it:</p>\n\n<pre><code>CMyclass * obj = new CMyclass();\nif (obj-&gt;Create(100))\n    obj-&gt;ShowWindow(SW_SHOW);\nelse\n{ &lt;&lt; error &gt;&gt;\n}\n</code></pre>\n\n<p>P.S.: don't forget to delete the variable at the end of your program!</p>\n"}, {"comments": [{"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440415030, "post_id": 32115912, "comment_id": 52247218, "body": "Don&#39;t call it a solution, unless you know <b>why</b> it is."}, {"owner": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440427779, "post_id": 32115912, "comment_id": 52255972, "body": "lol, that worked for me, if any Visual Studio VC++ expert knows an explanation, I will love it to ear-it, I put a question and solved my problem, if you don&#39;t accept, is not my problem."}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440428412, "post_id": 32115912, "comment_id": 52256422, "body": "Your code is wrong. You have a bug. You failed to diagnose, why the assertion failed, and simply tried random things, until one of them made the application appear to work. By pure coincidence. I&#39;m flagging this answer to be deleted as <i>&quot;Not an answer&quot;</i>."}, {"owner": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440428816, "post_id": 32115912, "comment_id": 52256660, "body": "Do what you want, So changing the program settings is not a valid solution now, LOL!"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440429283, "post_id": 32115912, "comment_id": 52257011, "body": "Not analyzing the bug is definitely not a valid solution. The assertion failed, because <code>m_hWnd</code> is not a valid window handle, or <code>m_pCtrlSite</code> is a <code>nullptr</code>. Why? Randomly changing compiler settings will merely <b>mask</b> the bug. Masking a bug is not regarded as a valid solution to any given programming problem."}, {"owner": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440431290, "post_id": 32115912, "comment_id": 52258356, "body": "So a compiler settings is not an important configuration?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1440431757, "post_id": 32115912, "comment_id": 52258676, "body": "It is. But if you cannot answer <b>why</b> changing this particular setting (presumably) fixed the bug, and how, your answer is not an answer. So far you have not made any attempt at explaining, why this is the case. I flagged this answer as <i>&quot;Not an answer&quot;</i>, and hope to get this cleaned out in a reasonably timely fashion."}], "tags": [], "owner": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "is_accepted": true, "score": 0, "last_activity_date": 1440066870, "creation_date": 1440066870, "answer_id": 32115912, "question_id": 32100513, "link": "https://stackoverflow.com/questions/32100513/vc-create-cdialog-class-assertion-error/32115912#32115912", "title": "VC++ create Cdialog Class Assertion error", "body": "<p>My code was right,</p>\n\n<p>after many many hours, I went to change the compiler options of the Visual Studio and in Debug Information Format put Program Database (/Zi)</p>\n\n<p>That fix it for me</p>\n"}], "owner": {"reputation": 119, "user_id": 5244179, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/1696554550572700/picture?type=large", "display_name": "Roy Bean", "link": "https://stackoverflow.com/users/5244179/roy-bean"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1920, "favorite_count": 1, "accepted_answer_id": 32115912, "answer_count": 2, "score": 0, "last_activity_date": 1440066870, "creation_date": 1440000119, "last_edit_date": 1440058625, "question_id": 32100513, "link": "https://stackoverflow.com/questions/32100513/vc-create-cdialog-class-assertion-error", "title": "VC++ create Cdialog Class Assertion error", "body": "<p>I'm a complete noob with Visual Studio, it's probably a stupid mistake.</p>\n\n<p>I'm only trying to instantiate a Cdialog class, I'm making a dll that in the end will need to had some activeX commands in the Window.</p>\n\n<p>I'm tried several ways to instantiate, but I always getting an assertion error.</p>\n\n<p>So in my calldllclass.h I had:</p>\n\n<pre><code>#pragma once\n__declspec(dllexport) long init();\n</code></pre>\n\n<p>in my class that extend Cdialog:</p>\n\n<pre><code>//{{AFX_INCLUDES()\n//}}AFX_INCLUDES\n\nclass CMyclass: public CDialog{\n\n#include \"resource.h\"\n\npublic:\n    CMyclass(CWnd* pParent = NULL)\n    : CDialog(100, pParent){\n        //{{AFX_DATA_INIT(CMyclass)\n        //}}AFX_DATA_INIT   \n    };  // standard constructor\n    virtual ~CMyclass(){};\n    long calc();\n// Dialog Data\n    //{{AFX_DATA(CMyclass)\n    //}}AFX_DATA\n\n    // ClassWizard generated virtual function overrides\n    //{{AFX_VIRTUAL(CMyclass)\n    protected:\n    //}}AFX_VIRTUAL\n\nprotected:\n    // Generated message map functions\n    //{{AFX_MSG(CMyclass)\n    //}}AFX_MSG\n    DECLARE_MESSAGE_MAP()   \n\n};\n//{{AFX_INSERT_LOCATION}}\n</code></pre>\n\n<p>I created an Resource Class:</p>\n\n<pre><code>#include \"resource.h\"\n\n#define APSTUDIO_READONLY_SYMBOLS\n/////////////////////////////////////////////////////////////////////////////\n//\n// Generated from the TEXTINCLUDE 2 resource.\n//\n#include \"afxres.h\"\n\n/////////////////////////////////////////////////////////////////////////////\n#undef APSTUDIO_READONLY_SYMBOLS\n\n/////////////////////////////////////////////////////////////////////////////\n// English (U.S.) resources\n\n#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)\n#ifdef _WIN32\nLANGUAGE LANG_ENGLISH, SUBLANG_ENGLISH_US\n#pragma code_page(1252)\n#endif //_WIN32\n\n#ifdef APSTUDIO_INVOKED\n/////////////////////////////////////////////////////////////////////////////\n//\n// TEXTINCLUDE\n//\n\n1 TEXTINCLUDE MOVEABLE PURE \nBEGIN\n    \"resource.h\\0\"\nEND\n\n2 TEXTINCLUDE MOVEABLE PURE \nBEGIN\n    \"#include \"\"afxres.h\"\"\\r\\n\"\n    \"\\0\"\nEND\n\n3 TEXTINCLUDE MOVEABLE PURE \nBEGIN\n    \"#define _AFX_NO_SPLITTER_RESOURCES\\r\\n\"\n    \"#define _AFX_NO_OLE_RESOURCES\\r\\n\"\n    \"#define _AFX_NO_TRACKER_RESOURCES\\r\\n\"\n    \"#define _AFX_NO_PROPERTY_RESOURCES\\r\\n\"\n    \"\\r\\n\"\n    \"#if !defined(AFX_RESOURCE_DLL) || defined(AFX_TARG_ENU)\\r\\n\"\n    \"#ifdef _WIN32\\r\\n\"\n    \"LANGUAGE 9, 1\\r\\n\"\n    \"#pragma code_page(1252)\\r\\n\"\n    \"#endif //_WIN32\\r\\n\"\n    \"#include \"\"res\\\\SimpleVC6SampleEvent.rc2\"\"  // non-Microsoft Visual C++ edited resources\\r\\n\"\n    \"#include \"\"afxres.rc\"\"         // Standard components\\r\\n\"\n    \"#endif\\r\\n\"\n    \"\\0\"\nEND\n\n#endif    // APSTUDIO_INVOKED\n\n\n\n\n/////////////////////////////////////////////////////////////////////////////\n//\n// Dialog\n//\n\nIDD_ABOUTBOX DIALOG DISCARDABLE  0, 0, 0, 0\nSTYLE DS_MODALFRAME\nFONT 8, \"MS Sans Serif\"\nBEGIN\nEND\n\n\n\n\n#endif    // English (U.S.) resources\n/////////////////////////////////////////////////////////////////////////////\n</code></pre>\n\n<p>and finally in my cpp I had:</p>\n\n<pre><code>// SIMPLEDIALOGDLL.cpp : Defines the exported functions for the DLL application.\n//\n#pragma once\n#include \"stdafx.h\"\n#include \"myclass.h\"\n#include \"resource.h\"\n#include \"dll2export.h\"\n\n\nBEGIN_MESSAGE_MAP(CMyclass, CDialog)\n    //{{AFX_MSG_MAP(CMyclass)\n    //}}AFX_MSG\nEND_MESSAGE_MAP()\n\n\nlong init(){  \n\n    AfxEnableControlContainer();\n    CoInitializeEx(NULL,COINIT_MULTITHREADED);\n    AFX_MANAGE_STATE(AfxGetStaticModuleState());\n\n    CMyclass * obj = new CMyclass();\n\n    //obj-&gt;ShowWindow(SW_HIDE);\n    obj-&gt;ShowWindow(SW_SHOW);\n\n    long res = obj-&gt;calc();\n    return (long) obj;\n}\n\nlong CMyclass::calc(){\n    return 1+1;\n}\n</code></pre>\n\n<p>When obj->ShowWindow(SW_SHOW); is called I get an\nDebug Assertion Failed!\nwinocc.cpp Line 329</p>\n\n<pre><code>BOOL CWnd::ShowWindow(int nCmdShow)\n{\n    ASSERT(::IsWindow(m_hWnd) || (m_pCtrlSite != NULL));\n\n    if (m_pCtrlSite == NULL)\n        return ::ShowWindow(m_hWnd, nCmdShow);\n    else\n        return m_pCtrlSite-&gt;ShowWindow(nCmdShow);\n}\n</code></pre>\n\n<p>a little update I put  after showWindow it returns 1400</p>\n\n<pre><code>   DWORD dw = GetLastError();\n</code></pre>\n\n<p>add answer sugenstion\nI had this to init method</p>\n\n<pre><code>AfxEnableControlContainer();\nCoInitializeEx(NULL,COINIT_MULTITHREADED);\nAFX_MANAGE_STATE(AfxGetStaticModuleState( ));\n\nCMyclass *obj = new CMyclass();\n\nif(obj-&gt;Create(100)){\n    obj-&gt;ShowWindow(SW_HIDE);\n    DWORD dw = GetLastError();\n}else{\n    DWORD dw = GetLastError();\n}\n</code></pre>\n\n<p>Now I'm having in obj->Create(100)); objcore.cpp Line: 40</p>\n"}, {"tags": ["c++", "arrays", "mfc", "default-value", "assignment-operator"], "comments": [{"owner": {"reputation": 26606, "user_id": 4603670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7eabc1427aa3c8185153cc81978289a?s=128&d=identicon&r=PG&f=1", "display_name": "Barmak Shemirani", "link": "https://stackoverflow.com/users/4603670/barmak-shemirani"}, "edited": false, "score": 1, "creation_date": 1440003048, "post_id": 32100432, "comment_id": 52096996, "body": "I am not sure if I follow. Even if you could solve the problem with copy constructor and assignment operator, why would you want it? It&#39;s better to access pointers directly. Something like this: <code>void Function(CArray&lt;CClass*&gt; *p = NULL){if (p == NULL){p = Default;}...}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3687, "user_id": 2509078, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/ZV5ER.jpg?s=128&g=1", "display_name": "Blacktempel", "link": "https://stackoverflow.com/users/2509078/blacktempel"}, "is_accepted": false, "score": 0, "last_activity_date": 1440052446, "creation_date": 1440052446, "answer_id": 32111077, "question_id": 32100432, "link": "https://stackoverflow.com/questions/32100432/how-can-i-initialize-the-default-value-of-a-carraycclass-function-parameter-w/32111077#32111077", "title": "How can I initialize the default value of a CArray&lt;CClass*&gt; function parameter with an empty CArray?", "body": "<p>With this declaration</p>\n\n<pre><code>void Function(CArray&lt;CClass*&gt; parameter /*...*/);\n</code></pre>\n\n<p>You can't. Calling this function will invoke the private copy constructor of <code>CObject</code> as you have noticed.</p>\n\n<p>What you could do, is to add a object of <code>static CArray&lt;CClass*&gt;</code> in your class and initialize the function with a reference to it. This way it will be empty <em>(as long as you do not populate it...)</em> and you can perform a <a href=\"https://msdn.microsoft.com/en-us/library/hcachs95.aspx\" rel=\"nofollow\"><code>.IsEmpty()</code></a> check on it.</p>\n\n<pre><code>private:\n    static CArray&lt;CClass*&gt; myObj;\n//...\nvoid Function(CArray&lt;CClass*&gt; &amp;parameter = myObj);\n</code></pre>\n\n<p>Or initialize it to 0. This way you simply check it by <code>if (parameter)</code> or <code>if (NULL == parameter)</code>.</p>\n\n<pre><code>void Function(CArray&lt;CClass*&gt; *parameter = NULL);\n</code></pre>\n"}], "owner": {"reputation": 3651, "user_id": 383779, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/363c7fb07b9e121acdb8c40115b94e34?s=128&d=identicon&r=PG", "display_name": "sergiol", "link": "https://stackoverflow.com/users/383779/sergiol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1008, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440052446, "creation_date": 1439999894, "last_edit_date": 1440049592, "question_id": 32100432, "link": "https://stackoverflow.com/questions/32100432/how-can-i-initialize-the-default-value-of-a-carraycclass-function-parameter-w", "title": "How can I initialize the default value of a CArray&lt;CClass*&gt; function parameter with an empty CArray?", "body": "<p>I know I could do this better with <code>std::vector</code>, but the application I am messing with, has already a bunch of <code>CArray</code> parameters on a lot of related functions ... and I will not change them all at the moment!</p>\n\n<p>I simply want to define an empty <code>CArray&lt;CClass*&gt;</code> \u2014 array of <strong>pointers</strong> to <code>CClass</code>, so the problem <strong>can not be</strong> on the <code>CClass</code> constructor \u2014 as the default value of a function parameter.</p>\n\n<p><strong>Approach 1</strong></p>\n\n<p>If I try to do it with <em>assignment operator</em> and <em>default constructor</em>:</p>\n\n<pre><code>void Function(CArray&lt;CClass*&gt; parameter = CArray&lt;CClass*&gt;());\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>1&gt;C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\atlmfc\\include\\afxTempl.h(262): error C2248: 'CObject::CObject' : cannot access private member declared in class 'CObject'\n1&gt;          C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\atlmfc\\include\\afx.h(535) : see declaration of 'CObject::CObject'\n1&gt;          C:\\Program Files (x86)\\Microsoft Visual Studio 10.0\\VC\\atlmfc\\include\\afx.h(510) : see declaration of 'CObject'\n1&gt;          This diagnostic occurred in the compiler generated function 'CArray&lt;TYPE&gt;::CArray(const CArray&lt;TYPE&gt; &amp;)'\n1&gt;          with\n1&gt;          [\n1&gt;              TYPE=CClass *\n1&gt;          ]\n</code></pre>\n\n<p><strong>Approach 2</strong></p>\n\n<p>I also tried with a <em>copy constructor</em>:</p>\n\n<pre><code>void Function(CArray&lt;Class*&gt; parameter(CArray&lt;CClass*&gt;()));\n</code></pre>\n\n<p>I got the errors:</p>\n\n<pre><code> &gt;File.cpp(line X): error C2664: 'FunctionClass::Function' : cannot convert parameter 1 from 'CArray&lt;TYPE&gt;' to 'CArray&lt;TYPE&gt; (__cdecl *)(CArray&lt;TYPE&gt; (__cdecl *)(void))'\n1&gt;          with\n1&gt;          [\n1&gt;              TYPE=CClass*\n1&gt;          ]\n1&gt;          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called\n</code></pre>\n\n<ul>\n<li>line X: contains a call supplying the parameter to Function, as shown: <code>pFunctionClass-&gt;Function(parameter);</code></li>\n</ul>\n\n<p>1>CFunctionClass.cpp(line Y): error C2511: 'void CFunctionClass::Function(CArray)' : overloaded member function not found in 'CShoePlaceDoc'\n1>          with\n1>          [\n1>              TYPE=CClass*\n1>          ]\n1>          FunctionClass.h(line A) : see declaration of 'CFunctionClass'</p>\n\n<ul>\n<li>line Y contains the <code>Function</code> implementation header, as shown: `void CFunctionClass::Function(CArray parameter)</li>\n</ul>\n\n<p>1>File.cpp(line Z): error C2660: 'CClassFunction::Function' : function does not take 0 arguments</p>\n\n<ul>\n<li>line Z: contains a call to <code>Function</code>without supplying it parameters, as shown: <code>pClassFunction-&gt;Function();</code></li>\n</ul>\n\n<p>The approach didn't work, but it got its way towards a <strong>conclusion</strong>: It is not possible to use a copy-constructor for assigning a default value for a function parameter.</p>\n\n<p><strong>Approach 3</strong></p>\n\n<p>And if I try with a <em>lambda</em>:</p>\n\n<pre><code>void Function(CArray&lt;CClass*&gt; parameter = [] () -&gt; CArray&lt;CClass*&gt;{ return CArray&lt;CClass*&gt; (); } );\n</code></pre>\n\n<p>, then I will get multiple outputs of these two errors:</p>\n\n<pre><code>1&gt;FunctionClass.h(line A): error C2440: 'default argument' : cannot convert from '`anonymous-namespace'::&lt;lambda2&gt;' to 'CArray&lt;TYPE&gt;'\n1&gt;          with\n1&gt;          [\n1&gt;              TYPE=CClass*\n1&gt;          ]\n1&gt;          No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called\n1&gt;FunctionClass.h(line B): fatal error C1903: unable to recover from previous error(s); stopping compilation\n</code></pre>\n\n<ul>\n<li>line A: method declaration</li>\n<li>line B: closing <code>}</code> of <code>FunctionClass</code> class that contains <code>Function</code> method</li>\n</ul>\n\n<p><strong>Origin of the problem</strong></p>\n\n<p>The root cause of the problem seems to be the fact that <code>CArray</code> is a class directly derived from <code>CObject</code>, which declares the assignment operator as private:</p>\n\n<pre><code>class AFX_NOVTABLE CObject\n{\n//...\nprivate:\n    CObject(const CObject&amp; objectSrc);              // no implementation\n    void operator=(const CObject&amp; objectSrc);       // no implementation\n//...\n}\n</code></pre>\n\n<p>So, how can I supply an empty array as default value for the parameter?</p>\n"}, {"tags": ["c++", "visual-c++", "virtual-functions", "overloading", "overriding"], "comments": [{"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 4, "creation_date": 1439999914, "post_id": 32100413, "comment_id": 52095246, "body": "That is not a false positive. You&#39;re overloading with <code>funcA(int)</code> but not overriding <code>funcA()</code>."}, {"owner": {"reputation": 11, "user_id": 5244158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0f56d9a3635c93946bce34bbe0c4ce?s=128&d=identicon&r=PG&f=1", "display_name": "daneel", "link": "https://stackoverflow.com/users/5244158/daneel"}, "reply_to_user": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1440002370, "post_id": 32100413, "comment_id": 52096627, "body": "It is a false positive because I do want to have a method called funcA(int). This is not an error in C++ and depending on case it may make sense. What I am trying to say is: the programmer intends to override funcB() but fails to do it hence a warning must be shown. In case of funcA, the programmer actually wants to add a funcA(int) (so no intention to override funcA()) hence s/he should have the possibility to tell the compiler that &quot;it is ok, dont show me a warning for this&quot;"}, {"owner": {"reputation": 12663, "user_id": 139091, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/221d62beca0a3b687dad11376bc51c11?s=128&d=identicon&r=PG", "display_name": "mattnewport", "link": "https://stackoverflow.com/users/139091/mattnewport"}, "edited": false, "score": 1, "creation_date": 1440003543, "post_id": 32100413, "comment_id": 52097259, "body": "Not an answer to your question but have you considered requiring the use of the new C++11 <code>override</code> keyword to your coding standard? In this case, if the programmer really intended to override funcB() and had indicated as much using <code>override</code> they would get error C3668."}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1440006386, "post_id": 32100413, "comment_id": 52098867, "body": "Just because the compiler isn&#39;t behaving exactly how you want does not mean it&#39;s a false positive or wrong. The warning is 100% correct and should be issued based on the warning level. If you want to get rid of the warning provide a definition of <code>funcA()</code> in your derived class and have it call into the base. The compiler will (in most cases) optimize the call via the entry in the dispatch table."}], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 3615393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/036f85e01cdc9671610c35789138f31b?s=128&d=identicon&r=PG&f=1", "display_name": "Gregory Currie", "link": "https://stackoverflow.com/users/3615393/gregory-currie"}, "is_accepted": false, "score": 9, "last_activity_date": 1443753971, "creation_date": 1443753971, "answer_id": 32899815, "question_id": 32100413, "link": "https://stackoverflow.com/questions/32100413/disabling-visual-c-virtual-function-override-warning-for-certain-methods/32899815#32899815", "title": "Disabling visual C++ virtual function override warning for certain methods", "body": "<p>This is a strange error given the documentation for it:</p>\n\n<p><a href=\"https://msdn.microsoft.com/en-us/library/ay4h0tc9.aspx?f=255&amp;MSPPError=-2147217396\">https://msdn.microsoft.com/en-us/library/ay4h0tc9.aspx?f=255&amp;MSPPError=-2147217396</a></p>\n\n<blockquote>\n  <p>'function' : member function does not override any base class virtual\n  member function</p>\n  \n  <p>A class function definition has the same name as a virtual function in\n  a base class but not the same number or type of arguments. This\n  effectively hides the virtual function in the base class.</p>\n</blockquote>\n\n<p>The last sentence is the interesting one, and it suggested to me that if you unhide the base class functions, the warning will no longer appear.</p>\n\n<p>And indeed this is the case. The following code does not output C4263:</p>\n\n<pre><code>class B {\npublic:\n    virtual void funcA();\n    virtual void funcB();\n};\n\nclass D : public B\n{\n    using B::funcA;\n    using B::funcB;\n    virtual void funcA(int);    \n    virtual void funcB(int);\n};\n</code></pre>\n\n<p>The warning seems a little strange. If you're dispatching from the base class pointer, it doesn't matter what functions the derived class hides, as they won't be hidden when using a base class pointer. But herein lies the answer!</p>\n\n<p>What's actually happening here is the compiler is guessing your intentions. Because you are introducing a new signature, it means you will be using either polymorphic or non-polymorphic dispatch using a derived pointer (not a base pointer). If you were not doing this, it would be impossible to call your overload. The compiler figures that if you are doing this, you will be hiding the un-overridden functions. And that's what the warning is about.</p>\n\n<p>In an example:</p>\n\n<pre><code>struct Base\n{\n    virtual void DoThing(int)\n    {\n        std::cout &lt;&lt; \"INT  \" &lt;&lt; std::endl;\n    }\n};\n\nstruct Derived: public Base\n{\n    virtual void DoThing(char) // Add a function to handle chars\n    {\n        std::cout &lt;&lt; \"CHAR  \" &lt;&lt; std::endl;\n    }\n};\n\nint main()\n{\n    Derived *derived = new Derived;\n    Base *base = derived;\n\n    base-&gt;DoThing(1);\n    derived-&gt;DoThing(1);\n    derived-&gt;DoThing('a');\n}\n</code></pre>\n\n<p>This outputs:</p>\n\n<blockquote>\n  <p>INT  CHAR  CHAR</p>\n</blockquote>\n\n<p>The intention may have been to add an overload to handle a different case, but instead it's hiding all the existing overloads. The warning is correct given the rules of the language. The warning isn't exact, it's trivial to determine cases where it doesn't get invoked but it should. It in-fact does the opposite of false-warnings :)</p>\n\n<p><strong>To defeat this warning, the using declaration should be used.</strong></p>\n"}], "owner": {"reputation": 11, "user_id": 5244158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be0f56d9a3635c93946bce34bbe0c4ce?s=128&d=identicon&r=PG&f=1", "display_name": "daneel", "link": "https://stackoverflow.com/users/5244158/daneel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2417, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1443753971, "creation_date": 1439999822, "question_id": 32100413, "link": "https://stackoverflow.com/questions/32100413/disabling-visual-c-virtual-function-override-warning-for-certain-methods", "title": "Disabling visual C++ virtual function override warning for certain methods", "body": "<p>I would like to enable C4263 (Visual C++) warning on our code base, however, the warning gives out some false positives. We would like to disable the warning such that only the false positives disappear. I tried to simplify the issue with some generic code:</p>\n\n<pre><code>class B {\npublic:\n    virtual void funcA();\n    virtual void funcB();\n};\n\n\nclass D : public B\n{\n    virtual void funcA(int);    \n    virtual void funcB(int);\n};\n</code></pre>\n\n<p>With this code we I get following warnings:\nvoid D::funcA(int)' : member function does not override any base class virtual member function\nvoid D::funcB(int)' : member function does not override any base class virtual member function</p>\n\n<p>What I am trying to achieve is to disable the warning for funcA (or funcB) and let the rest of the class be affected by it.</p>\n\n<p>I tried putting</p>\n\n<pre><code>#pragma warning(push)        \n#pragma warning(disable:4263)\n .\n .\n .\n#pragma warning(pop)    \n</code></pre>\n\n<p>around funcA but that does not solve the problem. If the pragmas wrap the whole class that both of the warnings disappear.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["c++", "vector", "constructor", "main"], "comments": [{"owner": {"reputation": 503, "user_id": 1280961, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/mtA9d.jpg?s=128&g=1", "display_name": "wonko realtime", "link": "https://stackoverflow.com/users/1280961/wonko-realtime"}, "edited": false, "score": 0, "creation_date": 1440000098, "post_id": 32100289, "comment_id": 52095380, "body": "you could use a <a href=\"http://de.cppreference.com/w/cpp/utility/initializer_list\" rel=\"nofollow noreferrer\">initializer_list</a> if your C++ is fresh enough or create a temporary vector ad hoc which transports the values."}], "answers": [{"comments": [{"owner": {"reputation": 388, "user_id": 5046695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6f52337c5696cae0930d085d8f6d5d?s=128&d=identicon&r=PG&f=1", "display_name": "ncalmbeblpaicr0011", "link": "https://stackoverflow.com/users/5046695/ncalmbeblpaicr0011"}, "edited": false, "score": 0, "creation_date": 1440000472, "post_id": 32100436, "comment_id": 52095609, "body": "Minor nitpick, but I would also advise the user to get rid of their horrible naming convention for parameters and just do <code>...Thing(Thing), List_Elem(List_Elem)...</code>"}], "tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": true, "score": 6, "last_activity_date": 1439999902, "creation_date": 1439999902, "answer_id": 32100436, "question_id": 32100289, "link": "https://stackoverflow.com/questions/32100289/create-a-vector-as-a-function-call-parameter/32100436#32100436", "title": "Create a vector as a function call parameter", "body": "<p>You can use <a href=\"http://en.cppreference.com/w/cpp/language/list_initialization\">list initilization</a>.  <code>Build_Using_Vector Foo(5, ???)</code> would be</p>\n\n<pre><code>Build_Using_Vector Foo(5, {5,6,7})\n</code></pre>\n\n<p>I would also suggest you use all member initialization with your constructor and change</p>\n\n<pre><code>Build_Using_Vector::Build_Using_Vector(int TThing, vector&lt;int&gt; LList_Elem) : Another() \n{\n    Thing = TThing;\n    List_Elem = LList_Elem;\n}\n</code></pre>\n\n<p>To</p>\n\n<pre><code>Build_Using_Vector::Build_Using_Vector(int TThing, vector&lt;int&gt; LList_Elem) : Another() , Thing(TThing), List_Elem(LList_Elem) {}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 70, "user_id": 3464250, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5c0b582e68eec25dc506bd33f4b1ec48?s=128&d=identicon&r=PG&f=1", "display_name": "user3464250", "link": "https://stackoverflow.com/users/3464250/user3464250"}, "edited": false, "score": 0, "creation_date": 1440002360, "post_id": 32100903, "comment_id": 52096619, "body": "yeah i thought about this solution but is impossible cause the rest of algorithm ;/"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1440003058, "post_id": 32100903, "comment_id": 52097003, "body": "You could also use <code>Build_Using_Vector Foo(5, std::vector&lt;int&gt;(arr, arr + arrSize));</code>"}], "tags": [], "owner": {"reputation": 388, "user_id": 5046695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff6f52337c5696cae0930d085d8f6d5d?s=128&d=identicon&r=PG&f=1", "display_name": "ncalmbeblpaicr0011", "link": "https://stackoverflow.com/users/5046695/ncalmbeblpaicr0011"}, "is_accepted": false, "score": 1, "last_activity_date": 1440001920, "last_edit_date": 1440001920, "creation_date": 1440001459, "answer_id": 32100903, "question_id": 32100289, "link": "https://stackoverflow.com/questions/32100289/create-a-vector-as-a-function-call-parameter/32100903#32100903", "title": "Create a vector as a function call parameter", "body": "<p>If you do not have a C++11 conforming compiler then you will have to build the <code>std::vector</code> manually.</p>\n\n<pre><code>int main ()\n{\n    const int arr [] = {5, 6, 7} ;\n    const unsigned arrSize = sizeof (arr) / sizeof (arr [0]) ;\n\n    std::vector &lt;int&gt; v1 (arr, arr + arrSize) ;\n    Build_Using_Vector Foo(5, v1) ;\n\n    return 0 ;\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>int main ()\n{    \n    std::vector &lt;int&gt; v1 ;\n    v1.push_back (5) ;\n    v1.push_back (6) ;\n    v1.push_back (7) ;        \n\n    Build_Using_Vector Foo(5, v1) ;\n\n    return 0 ;\n}\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>int main ()\n{    \n    Build_Using_Vector Foo(5, CallSomeFunctionThatReturnsAnStdVector()) ;\n\n    return 0 ;\n}\n</code></pre>\n"}], "owner": {"reputation": 70, "user_id": 3464250, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5c0b582e68eec25dc506bd33f4b1ec48?s=128&d=identicon&r=PG&f=1", "display_name": "user3464250", "link": "https://stackoverflow.com/users/3464250/user3464250"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 32100436, "answer_count": 2, "score": 1, "last_activity_date": 1440001920, "creation_date": 1439999500, "last_edit_date": 1440000814, "question_id": 32100289, "link": "https://stackoverflow.com/questions/32100289/create-a-vector-as-a-function-call-parameter", "title": "Create a vector as a function call parameter", "body": "<p>I have no idea what i have to do in this situation..</p>\n\n<pre><code>Class Build_Using_Vector : public Another\n{\n private:\n         int Thing;\n         vector&lt;int&gt; List_Elem;\n public:\n         Build_Using_Vector(int TThing, vector&lt;int&gt; LList_Elem);\n};\n</code></pre>\n\n<p>ok this is not a prob... the second part still is not a prob:</p>\n\n<pre><code>Build_Using_Vector::Build_Using_Vector(int TThing, vector&lt;int&gt; LList_Elem) : Another() \n {\n    Thing = TThing;\n    List_Elem = LList_Elem;\n }\n</code></pre>\n\n<p>As i said this is not a prob.</p>\n\n<p>The prob is there, in \"main\".\nIn my case is not \"main\" is another class... but i think is the same...</p>\n\n<pre><code>int main()\n {\n   Build_Using_Vector Foo(5, ???) // i don't know how to build with a multiple of element for example 5,6,7)\n   return 0;\n }\n</code></pre>\n\n<p>thank you</p>\n"}, {"tags": ["c++", "c", "arrays", "pointers", "language-lawyer"], "comments": [{"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1439999479, "post_id": 32100245, "comment_id": 52094910, "body": "What the... Why would the standard guys even <i>think</i> about such a monstrosity ?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1439999747, "post_id": 32100245, "comment_id": 52095115, "body": "@Quentin That&#39;s kind of the point. They did not, they should not have to, and this shows there is problem with C and C++. The standards are written for particular examples, and they do not create general rules, and the committees have zero idea what the semantics of fundamental constructs is or should be (see unions, see type punning, see strict aliasing, see lifetime of non polymorphic objects in C++)."}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1440000316, "post_id": 32100245, "comment_id": 52095520, "body": "This is making my head hurt - <code>past</code> and <code>val</code> <i>should</i> evaluate to the same value.  <code>a[0] + S</code> is outside the bounds of <code>a[0]</code>, but still within the bounds of <code>a</code>, so it should be a valid pointer.  But honestly, masking two pointer values together to get another pointer is a use case I&#39;ve never considered."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 1, "creation_date": 1440000481, "post_id": 32100245, "comment_id": 52095616, "body": "@JohnBode &quot;<i>This is making my head hurt</i>&quot; I hope so. My head was about to explode when I though of that, now I want everybody to have the same feelings."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1440003176, "post_id": 32100245, "comment_id": 52097056, "body": "Why do you think the standard does not consider your case? Why do you think unions, type punning, strict aliasing are problematic? If you think you understand something better than the standards committee, please provide a demonstration."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440003466, "post_id": 32100245, "comment_id": 52097208, "body": "@n.m. I understand that &quot;declared type&quot; is problematic and unlikely to help compiler writers. I understand that decades after publishing the first languages descriptions, <b>people are still fighting over fundamental issues of lifetimes, valid operations on pointers, allowed casts, allowed type punning...</b> For a language hyped as &quot;portable assembly&quot;, it sucks."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 7, "creation_date": 1440003474, "post_id": 32100245, "comment_id": 52097213, "body": "Could you add the reasoning that led you to believe that the standard committee should define what happens when you mash two pointers together ? Or are you just here to hate on C and C++ to no end ?"}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 1, "creation_date": 1440003670, "post_id": 32100245, "comment_id": 52097330, "body": "@curiousguy yes it is. But you deliberately went outside of what the langage defines. That&#39;s getting a bit tautologic."}, {"owner": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1440003823, "post_id": 32100245, "comment_id": 52097409, "body": "@curiousguy it&#39;s not a standard-compliant C program, because it relies on at least implementation-defined behaviour."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1440003846, "post_id": 32100245, "comment_id": 52097423, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/87404/discussion-between-curiousguy-and-quentin\">continue this discussion in chat</a>."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440004148, "post_id": 32100245, "comment_id": 52097566, "body": "@n.m. f.ex. <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/dr_236.htm\" rel=\"nofollow noreferrer\">DR #236</a> <b>The interpretation of type based aliasing rule when applied to union objects or allocated objects.</b> (2006-05-08) &quot;<i>The current situation requires more consideration, but <b>general consensus seems</b> to be</i>&quot; &quot;<i>The committee does not think that the suggested wording is acceptable</i>&quot; etc. That&#39;s committee members not sure about the validity of very simple code."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440004387, "post_id": 32100245, "comment_id": 52097705, "body": "No demonstration so far, only vague references to some problems that may or may not exist or be serious enough to worry about them."}, {"owner": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 2, "creation_date": 1440004971, "post_id": 32100245, "comment_id": 52098021, "body": "&quot;.. there is problem with C and C++. ... hyped as ...&quot; There&#39;s no problem. That is ongoing development of two (distinct btw) languages. They aren&#39;t hyped as portable assembly, they are as portable as you can currently get with out sacrificing the high level of abstraction both provide. Heck, at least they <b>are</b> standardised, to my knowledge this doesn&#39;t apply to Java, C#, Python, Ruby, Go, Rust, JavaScript (though there&#39;s ECMA), BASIC dialects, ..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440005046, "post_id": 32100245, "comment_id": 52098073, "body": "The C standard has defects, like many man-made complex constructs. The committee is well aware of (hopefully) most of them. These defects don&#39;t preclude us from building useful programs. Most programmers won&#39;t ever come across any of them in their life. I.e. there&#39;s no fundamental problem you are trying to make out of them."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440005348, "post_id": 32100245, "comment_id": 52098274, "body": "@n.m. Bull. Did you read the DR? Are you claiming that type punning, reading of not the active member of unions, don&#39;t happen?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440005659, "post_id": 32100245, "comment_id": 52098477, "body": "See <a href=\"http://www.open-std.org/jtc1/sc22/wg14/www/docs/n980.htm\" rel=\"nofollow noreferrer\">WG14 N980</a>? How can such features from the original (pre-ANSI) C specification can <i>not</i> be cast in stone?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 0, "creation_date": 1440005769, "post_id": 32100245, "comment_id": 52098535, "body": "@DanielJour &quot;<i>They aren&#39;t hyped as portable assembly</i>&quot; I believed they were. Both C and C++ are often used for the backend of compilers of high level languages. &quot;<i>Heck, at least they are standardised, to my knowledge this doesn&#39;t apply to Java</i>&quot; are you saying there is no Java specification?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440007003, "post_id": 32100245, "comment_id": 52099176, "body": "@n.m. and the current state of mind of C++ lawyers is absolutely worse: <a href=\"http://std-proposals.isocpp.narkive.com/WH2troiS/questions-on-n4430-core-issue-1776-replacement-of-class-objects-containing-reference-members\" rel=\"nofollow noreferrer\">Questions on N4430 (Core Issue 1776: Replacement of class objects containing reference members)</a> They are essentially killing C/C++."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 15165, "user_id": 1116364, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/b67dfca0caba03083330d39a304b1766?s=128&d=identicon&r=PG", "display_name": "Daniel Jour", "link": "https://stackoverflow.com/users/1116364/daniel-jour"}, "edited": false, "score": 1, "creation_date": 1440007037, "post_id": 32100245, "comment_id": 52099189, "body": "@DanielJour: C was invented to serve as a form of semi-portable assembly, with a stronger focus on the portability of the <i>language itself</i> than of <i>code written in the language</i>.  On many platforms, it is still the best such language.  Unfortunately, some people have lost sight of the fact that one of the reasons various actions invoke Undefined Behavior was that different platforms had different contradictory <i>but sometimes useful</i> behaviors.  If an application needed to print the arithmetic value of <code>x+y</code> when it was representable as <code>int</code> and never output an incorrect value, but..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440007161, "post_id": 32100245, "comment_id": 52099246, "body": "...having the program terminate when given invalid input would be acceptable, and if the program was running on a platform which traps integer overflow, <code>printf(&quot;%d&quot;,x+y);</code> would satisfy the requirements.  If a different program running on a platform where overflow yields two&#39;s-complement reduction had a requirement that overflow must not disrupt program behavior, but could output any arbitrary value, the same code would be useable there.  Mandating any particular overflow behavior would have required one of those programs to be longer and more complicated."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440007349, "post_id": 32100245, "comment_id": 52099369, "body": "@supercat C should have 2complement types or operators."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440007858, "post_id": 32100245, "comment_id": 52099647, "body": "@curiousguy: For most applications, I would posit that the most optimizer-friendly normative specification for overflow would be to have it yield a &quot;partially indeterminate value&quot;, with the rule that every rvalue conversion of a partially-indeterminate value may (independently) yield any number which is congruent to arithmetical value of the overflowing expression, mod the number of values of the type, but with an additional rule that an <i>explicit</i> cast to <code>int</code> must perform a two&#39;s-complement reduction, and possibly with an additional rule which would permit <code>for</code> loops to early-exit..."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 2, "creation_date": 1440007936, "post_id": 32100245, "comment_id": 52099691, "body": "Yes I did read it. Why should I care one way or another? This is an awful code that has no place in a real-life program. Let language lawyers discuss its validity, meanwhile we mere mortals shall steer clear of such constructs regardless. If you think issues like this are killing C and C++, you need to think harder."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440008089, "post_id": 32100245, "comment_id": 52099778, "body": "@n.m. What is an awful code?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440008127, "post_id": 32100245, "comment_id": 52099799, "body": "...in case of overflow (I&#39;d limit the early-exit to <code>for</code> loops only, so that code can indicate whether or not early-exit is acceptable by its choice of loop type).  Such rules would not only allow the vast majority of the useful optimizations would be made possible by having <code>int</code> overflow be undefined, but more importantly would allow programmers to safely write code that could be optimized in such fashion."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1440008489, "post_id": 32100245, "comment_id": 52100043, "body": "@n.m.: The fundamental question which is embodied by the code is the extent to which C will continue to abide by one of its fundamental principles--that every object is represented by a sequence of unsigned character values. While useful optimizations may be facilitated by allowing objects to be invisibly tagged with other information that compilers may use to make inferences regarding their usage, such tagging may in some cases force programmers to write code that is less efficient than they could have done otherwise, and it may not always be possible for optimizers to remove such redundancy."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440012601, "post_id": 32100245, "comment_id": 52102580, "body": "@supercat An implementation is allowed to tag bytes however it wishes for whatever purposes, always was, no problem with that. Are you saying the strict aliasing rules violate this principle? I fail to see how. If strict aliasing rules inhibit some potential optimisations or coding idioms, I have no problem with that, cost/benefit-wise. I just can&#39;t see what it has to do with the fundamental principle in question."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 1, "creation_date": 1440013943, "post_id": 32100245, "comment_id": 52103422, "body": "@n.m.: Strict aliasing went against the fundamental principle of C; the performance advantages may be seen as more important than that principle, but that doesn&#39;t make the principle worthless. For any sequence of bytes and type, there is at most one object that can be identified by any pointer of that type whose representation matches that sequence.  I would suggest that if a sequence of unrelated bytes are assembled into a pointer, and if any pointer could exist whose representation matches that sequence and which could be used in a particular way, then the pointer made from the sequence..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440014401, "post_id": 32100245, "comment_id": 52103687, "body": "...should be likewise usable.  Such cases are rare, and the cost of lost optimization opportunities in them would pale in comparison to the cost of errant program behavior caused by &quot;optimizations&quot; that make a program violate its requirements."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440014664, "post_id": 32100245, "comment_id": 52103828, "body": "@supercat Again I don&#39;t see where any fundamental principles are violated by strict aliasing. Could you please point me to a reliable source that names such a principle and describes why it is broken by strict aliases? I couldn&#39;t find any. You can assemble a valid pointer out of bytes, no problem with that; how does it relate to strict aliasing?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 0, "creation_date": 1440037245, "post_id": 32100245, "comment_id": 52111209, "body": "@supercat: C was <i>not</i> invented to be a semi-portable assembly; it was invented to be a <i>high-level language</i> for <i>low-level (systems) programming</i>.  There&#39;s a difference."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440057281, "post_id": 32100245, "comment_id": 52118250, "body": "@n.m. Everybody has a different interpretation of strict aliasing."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440062111, "post_id": 32100245, "comment_id": 52121254, "body": "That&#39;s an interesting observation. Is the standard so much ambiguous on this? Can you point out the passage you draw your interpretation from?"}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "reply_to_user": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "edited": false, "score": 0, "creation_date": 1440078042, "post_id": 32100245, "comment_id": 52132134, "body": "@JohnBode: There are different shades of meaning, but I&#39;d posit that a key aspect of C&#39;s success for systems programming as well as many other purposes stems from the fact that operations which could be performed by some but not all hardware platforms (e.g. relational comparisons of unrelated pointers) would be supported by compilers for platforms where they were supported."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1440234406, "post_id": 32100245, "comment_id": 52197006, "body": "Downvoting because you ask a question that is very specific to what the standard says but you don&#39;t specify if you mean C or C++. There is likely different behaviour between these two languages in this particular case. When do you understand that you should tell us what language your question is about?"}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1440235941, "post_id": 32100245, "comment_id": 52197399, "body": "@FUZxxl The tags tell the answer."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1440242687, "post_id": 32100245, "comment_id": 52199233, "body": "@FUZxxl Next time I&#39;ll ask TWO word for word identical questions, one for C, one for C++ (not)."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1440242884, "post_id": 32100245, "comment_id": 52199293, "body": "@Quentin I hate broken tools. To no end."}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 1, "creation_date": 1440243184, "post_id": 32100245, "comment_id": 52199384, "body": "@curiousguy Yeah, please do so. Then I can answer one for C and the other for C++."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 0, "creation_date": 1440244252, "post_id": 32100245, "comment_id": 52199729, "body": "@FUZxxl Really? It&#39;s the officially recommended way?"}, {"owner": {"reputation": 76134, "user_id": 417501, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/703f62ead2e305b1dff62066065a0554?s=128&d=identicon&r=PG", "display_name": "fuz", "link": "https://stackoverflow.com/users/417501/fuz"}, "edited": false, "score": 2, "creation_date": 1440244598, "post_id": 32100245, "comment_id": 52199826, "body": "@curiousguy Yes. You ask the same question for two different languages. The point of this rule is that many people tag-spam C and C++ to attract more viewers but then aren&#39;t interested in the C answer because they program in C++ or whatever. This is why I&#39;m pretty hostile towards questions that are tagged both C and C++. Only questions asking for the differences or the interaction between C and C++ should be tagged with both."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1510211253, "post_id": 32100245, "comment_id": 81340356, "body": "&quot;<i>Why would the standard guys even think about such a monstrosity ?</i>&quot; That cases that nobody thought about are not covered by the specification proves that it is <b>not</b> a specification. The std is a glorified tutorial."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "reply_to_user": {"reputation": 58398, "user_id": 3233393, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c4c576e0ebcdf0efd653269a5b020347?s=128&d=identicon&r=PG", "display_name": "Quentin", "link": "https://stackoverflow.com/users/3233393/quentin"}, "edited": false, "score": 0, "creation_date": 1528335824, "post_id": 32100245, "comment_id": 88471515, "body": "@Quentin &quot;<i>Or are you just here to hate on C and C++ to no end ?</i>&quot; I hate that C/C++ pretend to be ultra low level and high level at the same time, because it&#39;s a lie; you cannot do both and the deck of cards falls down as I have proved again and again. High level as in Java implies that many things are opaque for the user, esp. pointers. Low level means that the translation is predictable and not optimized except for trivial simplifications. Even the C++ committee &quot;hates&quot; the C semantics and its union visibility rules. They think it&#39;s BS, so it isn&#39;t just me."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1528336055, "post_id": 32100245, "comment_id": 88471576, "body": "As a rule, you cannot specify a high level semantic on a type and then expose all its internal components. It doesn&#39;t go together, as any optimisation would break when the internals are poked by the user. But the C/C++ pointers aren&#39;t high level, as they are just numbers: you can convert to from numbers with casts, with printf/scanf, with iostream, with volatile pointers. If it&#39;s just a number it CANNOT have the high level semantics and optimisations are limited. I understand that what I saw is very hurtful for the people who used to think that the optimisations of pointers are sound."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1528336616, "post_id": 32100245, "comment_id": 88471752, "body": "&quot;(...), pointer types, (...) are collectively called scalar types () Cv-unqualified scalar types, (...) are collectively called trivially copyable types.&quot; &quot;For trivially copyable types, <b>the value representation is a set of bits in the object representation that determines a value</b>, which is one discrete element of an implementation-defined set of values.&quot;  [basic.types]"}], "answers": [{"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440006259, "post_id": 32100749, "comment_id": 52098805, "body": "So can I use <code>a[0][size]</code> to refer to <code>a[1][0]</code>?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440006951, "post_id": 32100749, "comment_id": 52099153, "body": "@curiousguy Yes. <code>&amp;a[0][size]</code> is the address <code>a + size * sizeof(T)</code>. <code>&amp;a[1][0]</code> is the address <code>a + 1 * (size * sizeof(T)) + 0</code>. Those are the same address, so when you dereference it you get the same value."}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440007177, "post_id": 32100749, "comment_id": 52099257, "body": "<i>If the result points one past the last element of the array object, it shall not be used as the operand of a unary <code>*</code> operator that is evaluated</i> (C99 6.5.6 Additive operators). C and C++ seem to diverge here."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440007314, "post_id": 32100749, "comment_id": 52099352, "body": "@n.m. But it&#39;s not one past the end of the <i>array object</i>. There is one object: <code>a</code>. One past the end would be <code>&amp;a[1][size]</code> (or <code>&amp;a[2][0]</code>)"}, {"owner": {"reputation": 94553, "user_id": 775806, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/XNd2C.png?s=128&g=1", "display_name": "n. &#39;pronouns&#39; m.", "link": "https://stackoverflow.com/users/775806/n-pronouns-m"}, "edited": false, "score": 0, "creation_date": 1440008158, "post_id": 32100749, "comment_id": 52099815, "body": "@Barry <code>a[0]</code> and <code>a[1]</code> are array objects as well."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 1, "creation_date": 1440008962, "post_id": 32100749, "comment_id": 52100325, "body": "@Barry: The declaration <code>int a[3][5]</code> creates an object <code>a</code> which contains three smaller objects, each of which is an array of five integers; it also contains, superimposed on that, an array of 15 integers.  Using <code>a</code> directly as an rvalue yields a pointer to the first of three five-element inner arrays, and using <code>a[0]</code> as an rvalue will yield a pointer to the first int within that five-element inner array.  Casting <code>a</code> to <code>int*</code> or <code>int[]</code> will yield a pointer to the first element of the superimposed 15-element array.  Compilers are not required to keep track of how pointers are derived..."}, {"owner": {"reputation": 69012, "user_id": 363751, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/135a97c4150691234931a93f3a27a52f?s=128&d=identicon&r=PG", "display_name": "supercat", "link": "https://stackoverflow.com/users/363751/supercat"}, "edited": false, "score": 2, "creation_date": 1440009138, "post_id": 32100749, "comment_id": 52100444, "body": "...but they are allowed to do so.  The pointers <code>a[0]+5</code> and <code>a[1]</code> will compare equal, but the former is a one-past pointer for <code>a[0]</code> and the second is a pointer to the first element of <code>a[1]</code>.  It would be helpful if the Standard were to mandate that certain actions on a pointer must cause the compiler to &quot;forget about&quot; any restrictions it might have had on its behavior, but it&#39;s rather vague on such issues."}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1488748768, "post_id": 32100749, "comment_id": 72357205, "body": "@T.C. Is the issue there that now the fact that the array and its first element aren&#39;t interconvertible? I&#39;m still not sure I understand that change well enough to explain it."}, {"owner": {"reputation": 122530, "user_id": 2756719, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b06a9c91425630fdb69e861abe483d7e?s=128&d=identicon&r=PG&f=1", "display_name": "T.C.", "link": "https://stackoverflow.com/users/2756719/t-c"}, "edited": false, "score": 0, "creation_date": 1488908438, "post_id": 32100749, "comment_id": 72435331, "body": "Basically, this sentence is not correct anymore. A pointer value is now defined abstractly to be one of 1) invalid, 2) null, 3) &quot;pointer to X&quot;, 4) &quot;pointer past the end of X&quot;. Even if a type-3 pointer and type-4 pointer represent the same address, the latter is still not considered to point to the object pointed to by the former."}, {"owner": {"reputation": 2216, "user_id": 9585016, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Language Lawyer", "link": "https://stackoverflow.com/users/9585016/language-lawyer"}, "edited": false, "score": 0, "creation_date": 1549105955, "post_id": 32100749, "comment_id": 95790676, "body": "I don&#39;t think that the old wording in [basic.compound] was not defective and supposed to be taken literally. Some time ago, an object was a region of storage, but this have never been true."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": false, "score": 9, "last_activity_date": 1488909496, "last_edit_date": 1488909496, "creation_date": 1440000851, "answer_id": 32100749, "question_id": 32100245, "link": "https://stackoverflow.com/questions/32100245/dereferencing-a-50-out-of-bound-pointer-array-of-array/32100749#32100749", "title": "Dereferencing a 50% out of bound pointer (array of array)", "body": "<p>In [basic.compound]:</p>\n\n<blockquote>\n  <p>If an object of type <code>T</code> is located at an address <code>A</code>, a pointer of type <em>cv</em> <code>T*</code> whose value is the\n  address <code>A</code> is said to point to that object, <strong>regardless of how the value was obtained</strong>.</p>\n</blockquote>\n\n<p><code>past</code> and <code>val</code> have the same address, so they point to the same object. It doesn't matter that one is \"one past the end\" of the first row and the second is the first element of the second row. There is a valid object at that address, so everything here is perfectly reasonable. </p>\n\n<hr />\n\n<p>In C++17, as of <a href=\"http://wg21.link/p0137\" rel=\"nofollow noreferrer\">P0137</a>, this changes a lot. Now, [basic.compound] defines pointers as:</p>\n\n<blockquote>\n  <p>Every value of pointer type is one of the following:<br>\n  \u2014 a <em>pointer to</em> an object or function (the pointer is said to <em>point</em> to the object or function), or<br>\n  \u2014 <em>a pointer past the end of</em> an object (5.7), or<br>\n  \u2014 the <em>null pointer value</em> (4.11) for that type, or<br>\n  \u2014 an <em>invalid pointer value</em>.</p>\n</blockquote>\n\n<p>So now, <code>past</code> is a value of the 2nd type (a pointer past the end of), but <code>val</code> is a value of the 1st type (a pointer to). Those are different categories of values and are not comparable:</p>\n\n<blockquote>\n  <p>A value of a pointer type that is a pointer to or past the end of an object represents the address of the first byte in memory (1.7) occupied by the object or the first byte in memory after the end of the storage occupied by the object, respectively. <em>[ Note:</em> A pointer past the end of an object (5.7) is not considered to point to an unrelated object of the object\u2019s type that might be located at that address. A pointer value becomes invalid when the storage it denotes reaches the end of its storage duration; see 3.7. <em>\u2014end note ]</em></p>\n</blockquote>\n\n<p><code>past</code> doesn't point to something, so viewing its contents as if it were the same as <code>val</code> is no longer meaningful. </p>\n"}, {"comments": [{"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440002407, "post_id": 32100960, "comment_id": 52096650, "body": "&quot;<i>Valid pointer values are obtained</i> (...)&quot; Are you saying that I can&#39;t use <code>memcpy</code> on a pointer in a std conforming program?"}, {"owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "reply_to_user": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 1, "creation_date": 1440002837, "post_id": 32100960, "comment_id": 52096883, "body": "@curiousguy: For copying the contents of a valid pointer value to another object <i>of the same type</i>, sure, although <code>p = q;</code> is just as easy.  If the types are not compatible and you try to use the copied-to pointer, then the behavior will be undefined (meaning, it may work just fine, it may crash outright, it may cause a runtime error later on, etc.).  Pointers to different types don&#39;t have to have the same size or representation."}, {"owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "edited": false, "score": 0, "creation_date": 1440005226, "post_id": 32100960, "comment_id": 52098184, "body": "Yes: only compatible types in my program (only <code>int*</code>)."}], "tags": [], "owner": {"reputation": 105028, "user_id": 134554, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1894f68e0b15fd3d5b27bfcb021fa11c?s=128&d=identicon&r=PG", "display_name": "John Bode", "link": "https://stackoverflow.com/users/134554/john-bode"}, "is_accepted": false, "score": 3, "last_activity_date": 1440001644, "creation_date": 1440001644, "answer_id": 32100960, "question_id": 32100245, "link": "https://stackoverflow.com/questions/32100245/dereferencing-a-50-out-of-bound-pointer-array-of-array/32100960#32100960", "title": "Dereferencing a 50% out of bound pointer (array of array)", "body": "<blockquote>\n  <p>What I really want to understand is: what does \"p points to object x\" means.</p>\n</blockquote>\n\n<p>The object <code>p</code> contains a value that corresponds to the location of the object <code>x</code> in memory.  </p>\n\n<p>That's it.  That's all it means.  You seem determined to make this more complicated than it needs to be.  </p>\n\n<p>Pointer types are not arithmetic types, and aren't meant to be arbitrarily munged like that.  Valid pointer values are obtained by using the unary <code>&amp;</code> operator on an lvalue, using an array expression that isn't the operand of the <code>sizeof</code> or unary <code>&amp;</code> operator, or calling a library function that returns a pointer value.  </p>\n\n<p><em>Everything</em> beyond that (size, representation, physical vs. virtual, etc.) is an <strong>implementation detail</strong>, and implementations vary <em>widely</em> when it comes to representing addresses.  That's why the standards don't say <em>anything</em> about what to expect when you play Dr. Frankenstein with pointer values.  </p>\n\n<p>If you are intimately familiar with your platform's addressing conventions (both virtual and physical), and you know how your implementation lays out items in memory and how it represents pointer types, and you have a <em>valid use case</em> for hacking your pointer values this way, then hack away to your heart's content - neither language standard has anything to say on the subject.  </p>\n"}], "owner": {"reputation": 7287, "user_id": 963864, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/94e2dd813e278309b6281b4a4b7fdddd?s=128&d=identicon&r=PG", "display_name": "curiousguy", "link": "https://stackoverflow.com/users/963864/curiousguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1310, "favorite_count": 1, "answer_count": 2, "score": -1, "last_activity_date": 1488909496, "creation_date": 1439999383, "last_edit_date": 1495542313, "question_id": 32100245, "link": "https://stackoverflow.com/questions/32100245/dereferencing-a-50-out-of-bound-pointer-array-of-array", "title": "Dereferencing a 50% out of bound pointer (array of array)", "body": "<p>This is a new question in my \"I don't understand pointers in C and C++\" collection. </p>\n\n<p>If I mix the bits of two pointers with equal values (pointing to the same memory address), that happen to have exactly the same bit representation, when one is dereferenceable and one is one past the end, what does the standard say should happen?</p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;assert.h&gt;\n\n// required: a == b\n// returns a copy of both a and b into dest \n// (half of the bytes of either pointers)\nint *copy2to1 (int *a, int *b) {\n    // check input: \n    // not only the pointers must be equal\n    assert (a == b);\n    // also the representation must match exactly\n    int *dest;\n    size_t s = sizeof(dest);\n    assert(memcmp(&amp;a, &amp;b, s) == 0); \n\n    // copy a and b into dest:\n    // on \"exotic\" architectures, size does't have to be dividable by 2\n    size_t half = s/2; // = floor(s/2), \n    char *pa = (char*)&amp;a, *pb = (char*)&amp;b, *pd = (char*)&amp;dest;\n\n    // copy half of a into dest:\n    memcpy (pd, pa, half);\n    // copy half of b into dest:\n    memcpy (pd+half, pb+half, s-half); // s-half = ceil(s/2)\n\n    //printf (\"a:%p b:%p dest:%p \\n\", a, b, dest);    \n\n    // check result\n    assert(memcmp(&amp;dest, &amp;a, s) == 0);\n    assert(memcmp(&amp;dest, &amp;b, s) == 0);\n\n    return dest;\n}\n\n#define S 1 // size of inner array\n\nint main(void) {\n    int a[2][S] = {{1},{2}};\n    int *past = a[0] + S, // one past the end of inner array a[0]\n        *val = &amp;a[1][0], // valid dereferenceable pointer\n        *mix = copy2to1 (past, val);\n    #define PRINT(x) printf (\"%s=%p, *%s=%d\\n\",#x,x,#x,*x)\n    PRINT(past);\n    PRINT(mix);\n    PRINT(val);\n    return 0;\n}\n</code></pre>\n\n<p>What I really want to understand is: <strong>what does \"p points to object x\" mean?</strong></p>\n\n<p>SEE ALSO</p>\n\n<p>This question is a better version of my previous questions about array of arrays: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/32048698/963864\">Is memcpy of a pointer the same as assignment?</a> which is a variation on my other question:</li>\n<li><a href=\"https://stackoverflow.com/q/32043795/963864\">Dereferencing an out of bound pointer that contains the address of an object (array of array)</a> </li>\n</ul>\n\n<p>and other related questions about pointer validity:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/32045888/963864\">Are pointer variables just integers with some operators or are they &quot;mystical&quot;?</a></li>\n<li>and the C++ question: <a href=\"https://stackoverflow.com/q/32043314/963864\">Overwriting an object with an object of same type</a></li>\n</ul>\n"}, {"tags": ["c++", "c", "linux", "nginx"], "owner": {"reputation": 11, "user_id": 4441773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd79f8f2409af6926ee1f4931d3cd69b?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4441773/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1439999309, "creation_date": 1439999309, "question_id": 32100222, "link": "https://stackoverflow.com/questions/32100222/use-web-service-in-nginx-configuration-file", "title": "Use Web Service In Nginx configuration File", "body": "<p>See this configuration</p>\n\n<pre><code>location ~* ^/dl/([a-zA-Z0-9\\-\\_]+)/([0-9]+)(.*)$ {\nroot /home/GodOFWar/public_html/;\nsecure_link $1,$2;\nsecure_link_md5 oH4fJ4KiON6sRT5tXDC1$3$2;\nif ($secure_link = \"\") {\nreturn 403;\n}\nif ($secure_link = \"0\") {\nreturn 403;\n}\nrewrite ^/dl/([a-zA-Z0-9\\-\\_]+)/([0-9]+)/(.*)$ /$3 break;\n}\n</code></pre>\n\n<p>After the token and expiry time are checked (before rewrite), I want to call a module with the operation that the  token and user IP are sent to the web service; if the output of the web service is True, the file is downloaded, and if it is False, a Username/password is received and sent to the web service as in Http Auth Basic.\nIf the output of the web service is True, the file is downloaded, and if it is False, error 404 is given</p>\n\n<p>For Example :</p>\n\n<p><a href=\"http://www.example.com/dl/GghBgdpQluCkx17nbBY29w/1440849227/user/John/Files/Video.Mp4\" rel=\"nofollow\">http://www.example.com/dl/GghBgdpQluCkx17nbBY29w/1440849227/user/John/Files/Video.Mp4</a></p>\n\n<pre><code>/*\n  * After the token and expiry time are checked\n  * Token And user IP are Sent to the web service :\n  * WS : http://www.example.com/checkToken/GghBgdpQluCkx17nbBY29w/52.152.62.145\n*/\nif(True) {\n  rewrite ^/dl/([a-zA-Z0-9\\-\\_]+)/([0-9]+)/(.*)$ /$3 break;\n}\nelse {\n    /*\n     * a Username/password is received and sent to the web service   similar Http Auth          \n      Module.\n     * WS : http://www.example.com/checkUser/GodOfWar/123456\n    */\n    if(True) {\n      rewrite ^/dl/([a-zA-Z0-9\\-\\_]+)/([0-9]+)/(.*)$ /$3 break;\n    }\n    else {\n        return 404;\n    }\n}\n</code></pre>\n\n<p>Please help me to solve the problem</p>\n"}, {"tags": ["c++", "types", "stdint"], "comments": [{"owner": {"reputation": 2376, "user_id": 3387453, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/DoHe7.png?s=128&g=1", "display_name": "Class Skeleton", "link": "https://stackoverflow.com/users/3387453/class-skeleton"}, "edited": false, "score": 2, "creation_date": 1439999165, "post_id": 32100059, "comment_id": 52094671, "body": "I never use Windows typedefs unless directly working against Windows API functions.  And even then, I end up using <code>reinterpret_cast</code>."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1439999171, "post_id": 32100059, "comment_id": 52094681, "body": "I&#39;d pick <code>uintptr_t</code>, if only because it doesn&#39;t SCREAM AT YOU. And for the fact that the &quot;DWORD&quot; is a lie in 64 bits, and code that lies to you is horrible. (&quot;sizeof(DWORD) bytes should be enough for anyone&quot;...)"}], "answers": [{"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 8, "last_activity_date": 1439999465, "last_edit_date": 1439999465, "creation_date": 1439999122, "answer_id": 32100160, "question_id": 32100059, "link": "https://stackoverflow.com/questions/32100059/usage-of-uintptr-t-vs-dword-ptr/32100160#32100160", "title": "Usage of uintptr_t vs DWORD_PTR", "body": "<p>Prefer <a href=\"http://en.cppreference.com/w/cpp/types/integer\" rel=\"nofollow\"><code>uintptr_t</code></a> it is part of the C++ standard as of C++11 and later. <a href=\"https://msdn.microsoft.com/en-us/library/Cc230322.aspx\" rel=\"nofollow\">DWORD_PTR</a> is specific to Visual C++ and is therefore not portable.</p>\n\n<p>While Visual C++ may choose to implement <code>uintptr_t</code> as a <code>DWORD_PTR</code> or <code>unsigned long</code> under the hood, that is up to them to do, you are safer sticking to the standard library.</p>\n"}, {"tags": [], "owner": {"reputation": 156300, "user_id": 1782465, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/b45d92faaf9d122bfed585490e0bafc5?s=128&d=identicon&r=PG", "display_name": "Angew is no longer proud of SO", "link": "https://stackoverflow.com/users/1782465/angew-is-no-longer-proud-of-so"}, "is_accepted": false, "score": 2, "last_activity_date": 1439999397, "creation_date": 1439999397, "answer_id": 32100249, "question_id": 32100059, "link": "https://stackoverflow.com/questions/32100059/usage-of-uintptr-t-vs-dword-ptr/32100249#32100249", "title": "Usage of uintptr_t vs DWORD_PTR", "body": "<p><code>uintptr_t</code> (actually <code>std::uintptr_t</code> in C++) is <em>not</em> defined in WinAPI, it's defined in the standard C++ header <code>&lt;cstdint&gt;</code>. The standard C++ library is defined by the C++ language and has nothing to do with WinAPI.</p>\n\n<p>If you want to use the type for interaction with WinAPI, use <code>DWORD_PTR</code> as that's what the WinAPI functions expect.</p>\n\n<p>For other uses, it's really up to you. I prefer standard types over platform-specific ones, so I'd use <code>std::uintptr_t</code>, but either is possible.</p>\n"}], "owner": {"reputation": 423, "user_id": 1924602, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/9OwzG.jpg?s=128&g=1", "display_name": "otc", "link": "https://stackoverflow.com/users/1924602/otc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2491, "favorite_count": 0, "accepted_answer_id": 32100160, "answer_count": 2, "score": 2, "last_activity_date": 1440016743, "creation_date": 1439998859, "last_edit_date": 1440016743, "question_id": 32100059, "link": "https://stackoverflow.com/questions/32100059/usage-of-uintptr-t-vs-dword-ptr", "title": "Usage of uintptr_t vs DWORD_PTR", "body": "<p>Both are used for storing addresses and doing pointer arithmetic, both are defined in WinAPI, when should I use a <code>uintptr_t</code> (cstdint) vs a <code>DWORD_PTR</code> (Windows.h)? Both are 32bits and 64bits in x86 and x86_64 respectively</p>\n\n<blockquote>\n  <p>A <code>DWORD_PTR</code> is an <code>unsigned long</code> type used for pointer precision. It is used when casting a pointer to an <code>unsigned long</code> type to perform pointer arithmetic. <code>DWORD_PTR</code> is also commonly used for general 32-bit parameters that have been extended to 64 bits in 64-bit Windows.</p>\n</blockquote>\n\n<p>I do not intend for my code to be portable, I'm stuck with WinAPI.\nWhat type is the best use case?</p>\n"}, {"tags": ["c++", "c"], "comments": [{"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 4, "creation_date": 1439998927, "post_id": 32100006, "comment_id": 52094495, "body": "<code>cin</code> and <code>cout</code> are in the c++ header <code>iostream</code> which is written in c++. While valid c is (typically) valid c++, this relationship doesn&#39;t work in reverse--<code>cin</code> and <code>cout</code> can&#39;t be used in a c program."}, {"owner": {"reputation": 3059, "user_id": 4765374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac4ed7c583a0aad19b520e7561de6430?s=128&d=identicon&r=PG", "display_name": "Maksim Solovjov", "link": "https://stackoverflow.com/users/4765374/maksim-solovjov"}, "edited": false, "score": 0, "creation_date": 1439998947, "post_id": 32100006, "comment_id": 52094509, "body": "iostreams won&#39;t work in C, you&#39;ll have to use <code>printf()</code>"}, {"owner": {"reputation": 61, "user_id": 5141376, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/C9jCa.jpg?s=128&g=1", "display_name": "95media", "link": "https://stackoverflow.com/users/5141376/95media"}, "edited": false, "score": 0, "creation_date": 1439999003, "post_id": 32100006, "comment_id": 52094556, "body": "Hmm thanks I will try that now"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440000189, "post_id": 32100006, "comment_id": 52095441, "body": "@Joshua: &quot;While valid c is (typically) valid c++,&quot; That is (typically) wrong. There are some semantic differences and some syntaxtical. Just think of casting <code>void *</code>."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 1, "creation_date": 1440000274, "post_id": 32100006, "comment_id": 52095498, "body": "If you use C++ features, you do <b>not</b> have C code anymore! Even if the syntax is identical, semantics might differ."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 2, "creation_date": 1440002604, "post_id": 32100006, "comment_id": 52096763, "body": "@Olaf in what way was my statement wrong? I made sure to state that C code isn&#39;t always valid C++ code. As far as I can tell, the fact that there are <i>some</i> instances where C doesn&#39;t convert well to C++, but that it does so in many cases, means that C is typically valid C++. In fact, as I recall, the ability to interpret C code is one of the driving factors behind C++ being &#39;built&#39; on C."}, {"owner": {"reputation": 61, "user_id": 5141376, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/C9jCa.jpg?s=128&g=1", "display_name": "95media", "link": "https://stackoverflow.com/users/5141376/95media"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1440012017, "post_id": 32100006, "comment_id": 52102194, "body": "@jaggedSpire and everyone else thanks for the comment and advise I have solved the problem"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440016930, "post_id": 32100006, "comment_id": 52105091, "body": "&quot;in many cases, means that C is typically valid C++&quot; only for trivial programs. Once you use <code>malloc</code> &amp; friends, it should actually be <b>not</b>. (hint: it is not primarily because of <code>malloc</code> as such. And using a C programming style in C++ is complete nonsense (again: for non-trivial code)."}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440017293, "post_id": 32100006, "comment_id": 52105305, "body": "@Olaf Because the common idiom for dynamically allocating memory via <code>malloc</code> in C uses an cast that has been been rendered illegal in C++, and proper conversion would have that cast be made explicit?"}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "reply_to_user": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "edited": false, "score": 0, "creation_date": 1440017434, "post_id": 32100006, "comment_id": 52105377, "body": "@jaggedSpire: True for the first part, false for the latter. Explictly casting might shadow type errors, as the compiler must not warn anymore. However, have a cookie:-)"}, {"owner": {"reputation": 4212, "user_id": 4892076, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/s6vwT.png?s=128&g=1", "display_name": "jaggedSpire", "link": "https://stackoverflow.com/users/4892076/jaggedspire"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440017911, "post_id": 32100006, "comment_id": 52105602, "body": "@Olaf Thank you for the clarification, and the cookie. :-)"}, {"owner": {"reputation": 129565, "user_id": 1505939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/131c67ef492a8d8352c6cf642a52e20f?s=128&d=identicon&r=PG", "display_name": "M.M", "link": "https://stackoverflow.com/users/1505939/m-m"}, "reply_to_user": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1440020129, "post_id": 32100006, "comment_id": 52106679, "body": "@Olaf &quot;typical&quot; doesn&#39;t mean &quot;always&quot;"}, {"owner": {"reputation": 627, "user_id": 2188550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da649cd6a4a764f958ea3fc7115ccd7a?s=128&d=identicon&r=PG", "display_name": "Ivanzinho", "link": "https://stackoverflow.com/users/2188550/ivanzinho"}, "reply_to_user": {"reputation": 83072, "user_id": 1413395, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/6wNQa.jpg?s=128&g=1", "display_name": "\u03c0\u03ac\u03bd\u03c4\u03b1 \u1fe5\u03b5\u1fd6", "link": "https://stackoverflow.com/users/1413395/%cf%80%ce%ac%ce%bd%cf%84%ce%b1-%e1%bf%a5%ce%b5%e1%bf%96"}, "edited": false, "score": 0, "creation_date": 1544545126, "post_id": 32100006, "comment_id": 94310052, "body": "I saw this question as a downvoted one but I vote it up because I get here due to this link <a href=\"https://www.cs.bu.edu/teaching/cpp/string/array-vs-ptr/\" rel=\"nofollow noreferrer\">cs.bu.edu/teaching/cpp/string/array-vs-ptr</a> Usually I give for granted the link is correct because it comes from an university but reading comments and answers here I conclude the link is not correct, cout is NOT part of C. Comments like @\u03c0\u03ac\u03bd\u03c4\u03b1\u1fe5\u03b5\u1fd6 does are really useless, it&#39;s a waste of time read them, don&#39;t contribute to answer the question."}], "answers": [{"tags": [], "owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "is_accepted": false, "score": 4, "last_activity_date": 1439999498, "creation_date": 1439999498, "answer_id": 32100286, "question_id": 32100006, "link": "https://stackoverflow.com/questions/32100006/cin-and-cout-in-c-programming/32100286#32100286", "title": "cin and cout in c programming", "body": "<p><a href=\"http://en.cppreference.com/w/cpp/io/cin\" rel=\"nofollow\"><code>cin</code></a> and <a href=\"http://en.cppreference.com/w/cpp/io/cout\" rel=\"nofollow\"><code>cout</code></a> are streams and do not exist in C.  You can use <a href=\"http://en.cppreference.com/w/cpp/io/c/fprintf\" rel=\"nofollow\"><code>printf()</code></a> and <a href=\"http://en.cppreference.com/w/cpp/io/c/fscanf\" rel=\"nofollow\"><code>scanf()</code></a> in C.</p>\n\n<p>In general running C code in C++ will work as C++ is based on C but going the other way can be problematic as there are a lot of features in C++ that don't exist in C.</p>\n"}, {"tags": [], "owner": {"reputation": 5162, "user_id": 2785528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc85984f1234637fa4ec24d93ae51bc?s=128&d=identicon&r=PG&f=1", "display_name": "2785528", "link": "https://stackoverflow.com/users/2785528/2785528"}, "is_accepted": false, "score": 1, "last_activity_date": 1440004089, "last_edit_date": 1440004089, "creation_date": 1440003753, "answer_id": 32101533, "question_id": 32100006, "link": "https://stackoverflow.com/questions/32100006/cin-and-cout-in-c-programming/32101533#32101533", "title": "cin and cout in c programming", "body": "<blockquote>\n  <p>any library i can use or probable if i can convert the code to work in\n  c programming</p>\n</blockquote>\n\n<p>I think no such library or code conversion tools would exist.  Also, I believe you probably do not want such a thing.</p>\n\n<p>IMHO, C and C++ are two languages, so you will be required to keep the compilation units separate based on code type:</p>\n\n<p>1a) It is (mostly true) that C functions can only be compiled in a C compilation unit.  </p>\n\n<p>1b) A C compilation unit can not compile or understand C++.</p>\n\n<p>2a) C++ functions or methods can only be compiled in a C++ compilation unit.  </p>\n\n<p>2b) A C++ compilation unit <em>CAN</em> produce C link-able function, but as said in other answers, C and C++ do not necessarily generate identical code for the same 'c-style' function.</p>\n\n<p>The issue (of 1 and 2 above) is sometimes called (or used to be called?) name mangling, specifically what the linker uses to connect the code of different compilation units.  C++ uses name mangling, C does not.</p>\n\n<p>3) It is trivial to call C functions (defined and compiled in a C compilation unit) from C++ code (in a C++ compilation unit) ... use 'extern \"C\" '.  The extern \"C\" causes the C++ compiler to generate the function call with an unmangled link name, a name that C code can link to and invoke.</p>\n\n<p>4) It is fairly easy (though possibly not trivial) to call C++ functions (defined in a C++ compilation unit) from code in a C compilation unit.  </p>\n\n<p>But one 'direct' approach is to provide in the C++ compilation unit a C style function interface declared with the request to not mangle the name.</p>\n\n<p>4a) within the C++ code, declare and implement a C function (i.e. foo()) with the extern \"C\" declaration.  This function, though c-style, is able to access or perform the desired C++ function.  </p>\n\n<p>4b) The extern \"C\" foo() can be invoked from the code of a C compilation unit (note: where there is no extern \"C\").</p>\n\n<p>4c) the Linker will connect the unmangled name of foo() ... thus supporting the C code invocation of the C++ function foo().</p>\n\n<p>5) It is somewhat more challenging to invoke a class method from a C function, because the C++ class method will typically require a specific instance through which to address the object.  And C code knows little about class instances.</p>\n\n<p>With enough pieces, it can be done. For instance, I have used a static class methods to connect interrupts (always C or assy code) to a C++ object instance.  But without compelling reasons (like interrupt handling), I choose to write using C++.</p>\n"}], "owner": {"reputation": 61, "user_id": 5141376, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/C9jCa.jpg?s=128&g=1", "display_name": "95media", "link": "https://stackoverflow.com/users/5141376/95media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16351, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1516574626, "creation_date": 1439998728, "last_edit_date": 1440016845, "question_id": 32100006, "link": "https://stackoverflow.com/questions/32100006/cin-and-cout-in-c-programming", "title": "cin and cout in c programming", "body": "<p>My code is written in c. However, I converted the code via changing the header files to c++ and the program works fine. Now my question is: I want the cin and cout to work in the c program. I have included the following libraries  </p>\n\n<pre><code>    #include &lt;stdio.h&gt;\n    #include &lt;stdlib.h&gt;\n    #include &lt;string.h&gt;\n    #include &lt;linux/types.h&gt;\n    #include &lt;asm/types.h&gt;\n    #include &lt;linux/socket.h&gt;\n    #include &lt;asm/socket.h&gt;\n    #include &lt;netinet/in.h&gt;\n    #include &lt;errno.h&gt;\n</code></pre>\n\n<p>and for the cin and cout to work I used the iostream library in c++ which does not work in c. Kindly advise me of any library I can use or probably if I can convert the code to work in c programming.  </p>\n"}, {"tags": ["c++", "qt"], "comments": [{"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 1, "creation_date": 1440001214, "post_id": 32099947, "comment_id": 52095947, "body": "The bigger question is: if you want the widget to stay put, why are you letting &quot;something&quot; move it? Perhaps the problem is with whatever is moving the widget? Or is it a top-level widget, i.e. a window?"}], "answers": [{"comments": [{"owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 0, "creation_date": 1440000829, "post_id": 32100579, "comment_id": 52095724, "body": "Won&#39;t this just move it only the first time? I want to move it every time back to its old coordinates so it never moves away from them again."}, {"owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 0, "creation_date": 1440001341, "post_id": 32100579, "comment_id": 52096029, "body": "edit: installEventFilter looks promising to doing what I want"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 0, "creation_date": 1440002716, "post_id": 32100579, "comment_id": 52096829, "body": "Maybe you can prevent moving by     setWindowFlags(Qt::CustomizeWindowHint | Qt::Tool); in constructor of widget."}, {"owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 0, "creation_date": 1440002882, "post_id": 32100579, "comment_id": 52096918, "body": "the event filter seems to do what I want, however QMoveEvent doesn&#39;t seem to have a type of QEvent::Move?"}, {"owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "reply_to_user": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "edited": false, "score": 0, "creation_date": 1440003613, "post_id": 32100579, "comment_id": 52097301, "body": "QEvent::Move exists         Move = 13,                              // move widget"}], "tags": [], "owner": {"reputation": 7482, "user_id": 313175, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/17983e85ea926e9e985c00d1a771f24a?s=128&d=identicon&r=PG", "display_name": "Alexander V", "link": "https://stackoverflow.com/users/313175/alexander-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1440000318, "creation_date": 1440000318, "answer_id": 32100579, "question_id": 32099947, "link": "https://stackoverflow.com/questions/32099947/qt-moving-a-qwidget-without-triggering-the-moveevent-method/32100579#32100579", "title": "Qt moving a QWidget without triggering the moveEvent method?", "body": "<pre><code>bool m_firstTimeMove; // class member for QMyWidget\n\nQMyWidget::QMyWidget(QObject* parent) : QWidget(parent),\n   m_firstTimeMove(true)\n{\n}\n\nvoid QMyWidget::moveEvent(QMoveEvent* event)\n{\n   if (m_firstTimeMove)\n   {\n      onlyForFirstTimeMove();   // do one time move action\n      m_firstTimeMove = false;\n   }\n   event-&gt;accept();\n}\n</code></pre>\n"}], "owner": {"reputation": 2091, "user_id": 1906587, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9f81eb80f65ad86bdf820621ff7c68f8?s=128&d=identicon&r=PG", "display_name": "ulak blade", "link": "https://stackoverflow.com/users/1906587/ulak-blade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 588, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1440000318, "creation_date": 1439998535, "question_id": 32099947, "link": "https://stackoverflow.com/questions/32099947/qt-moving-a-qwidget-without-triggering-the-moveevent-method", "title": "Qt moving a QWidget without triggering the moveEvent method?", "body": "<p>I am trying to set a widget to remain fixed at the location where it is created initially and never move. I am doing so by setting its position to its old position in an overridden <code>moveEvent</code> method. The problem is that the only way to move it is to...call <code>move</code>, which triggers another <code>moveEvent</code>, entering an infinite loop. Is there a way to set the position directly and bypass any events?</p>\n"}, {"tags": ["c++", "visual-studio-2013", "resharper-9.0"], "answers": [{"tags": [], "owner": {"reputation": 1472, "user_id": 2132352, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a717680b76af1c02258f45164bce0dc2?s=128&d=identicon&r=PG", "display_name": "sofsntp", "link": "https://stackoverflow.com/users/2132352/sofsntp"}, "is_accepted": false, "score": 0, "last_activity_date": 1441287697, "creation_date": 1441287697, "answer_id": 32377335, "question_id": 32099923, "link": "https://stackoverflow.com/questions/32099923/debugging-with-resharper-9-and-visual-studio-2013/32377335#32377335", "title": "Debugging with Resharper 9 and Visual Studio 2013", "body": "<p>Latest version is 9.2 and the bug should be reported to jetbrains</p>\n"}], "owner": {"reputation": 837, "user_id": 1152185, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/fe9242e284c6ea9b280143372bdc9e79?s=128&d=identicon&r=PG", "display_name": "Jens Ehrlich", "link": "https://stackoverflow.com/users/1152185/jens-ehrlich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1441287697, "creation_date": 1439998476, "question_id": 32099923, "link": "https://stackoverflow.com/questions/32099923/debugging-with-resharper-9-and-visual-studio-2013", "title": "Debugging with Resharper 9 and Visual Studio 2013", "body": "<p>I use the newest build of Resharper (9.3) and Resharper C++ with Visual Studio 2013. </p>\n\n<p>Code editing, refactoring, ... works great. But if I try to debug the code, I get a weird error:</p>\n\n<ul>\n<li>an empty window with \"Source not available. The current thread is not currently running code or the call stack could not be obtained\". </li>\n</ul>\n\n<p>which makes debugging quite difficult. </p>\n\n<p>I think the problem is related to Resharper, because this problem did not occur before I installed Resharper nor does the problem occur if Resharper is disabled.</p>\n\n<p>Is there a solution for this problem or another tool with similar capabilities that can be used instead? </p>\n"}, {"tags": ["c++", "opencv"], "comments": [{"owner": {"reputation": 1268, "user_id": 3129752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9TDZu.jpg?s=128&g=1", "display_name": "Baris Demiray", "link": "https://stackoverflow.com/users/3129752/baris-demiray"}, "edited": false, "score": 0, "creation_date": 1439999188, "post_id": 32099920, "comment_id": 52094695, "body": "Did you try printing <code>argv[1]</code>? Also, if the executables are generated somewhere else than where the source file is that might be the reason too.."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1439999681, "post_id": 32099920, "comment_id": 52095060, "body": "The files need to be in the application&#39;s &quot;working directory&quot;, which is not the same as the source directory. There&#39;s a setting for it in your project settings."}, {"owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1439999947, "post_id": 32099920, "comment_id": 52095273, "body": "@molbdnilo I&#39;m really new to this. Is there a reference you recommend for doing that?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440000272, "post_id": 32099920, "comment_id": 52095495, "body": "Have a look <a href=\"http://stackoverflow.com/a/31342428/5008845\">here</a>. Most likely you&#39;re not passing the correct path. You can try using the full path just to see if you can load the image"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1440000273, "post_id": 32099920, "comment_id": 52095497, "body": "@Simplicity XCode&#39;s builtin manual is usually pretty good. It&#39;s in the &quot;Help&quot; menu. (I won&#39;t recommend googling &quot;xcode working directory&quot; as the results are rubbish, but there&#39;s loads of introductions online.)"}, {"owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440000878, "post_id": 32099920, "comment_id": 52095757, "body": "@Miki I tried the full-path, but didn&#39;t work"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1440001064, "post_id": 32099920, "comment_id": 52095852, "body": "just to narrow down possibilities, try putting the full path in the code as <code>Mat image = imread(&quot;path_to_image&quot;);</code> This should work"}, {"owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "edited": false, "score": 0, "creation_date": 1440004133, "post_id": 32099920, "comment_id": 52097557, "body": "@Mike Yes, having the full path directly in the code made the program work just fine"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 1, "creation_date": 1440004839, "post_id": 32099920, "comment_id": 52097956, "body": "Well, actually if your image <i>can</i> be loaded, you just need to look where to put input arguments in your IDE (which I dont know). In VS it would be under &quot;debugger&quot; properties."}, {"owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1440004967, "post_id": 32099920, "comment_id": 52098017, "body": "@Miki I tried to enter the full path again as arguments, and it worked just fine! I think the main issue was the ordering of how the arguments were set. Thanks a lot for your support"}], "owner": {"reputation": 41029, "user_id": 588855, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5f6a798479cf28587a0fe18224d2a94a?s=128&d=identicon&r=PG&f=1", "display_name": "Simplicity", "link": "https://stackoverflow.com/users/588855/simplicity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1440002620, "creation_date": 1439998472, "last_edit_date": 1440002620, "question_id": 32099920, "link": "https://stackoverflow.com/questions/32099920/cannot-read-image", "title": "Cannot read image", "body": "<p>I'm trying to read an image using <code>OpenCV</code>, where I did the following:</p>\n\n<pre><code>input_image = imread(argv[1], IMREAD_UNCHANGED);\n    if(input_image.empty())\n    {\n        cout&lt;&lt;\"Image cannot be read\";\n        return -1;\n    }\n</code></pre>\n\n<p>I'm using <code>Xcode 6.4</code>, and would like to pass <em>two</em> arguments, one for the input image and another for the output image.</p>\n\n<p>So, I did the following in order to pass the argument:</p>\n\n<pre><code>Product --&gt; Scheme --&gt; Edit Scheme...\n</code></pre>\n\n<p>And, under <code>Arguments</code>, added two arguments: <code>image1.png</code> and <code>image2.png</code>.</p>\n\n<p>I had only <code>image1.png</code>, which I added to the directory containing <code>main.cpp</code>. But, when I try to run the program, the input image seems not to be read, since the above <code>if-statement</code> evaluates to true, and I get the error message.</p>\n\n<p>Why is that? What could I be doing wrong?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["c++", "virtual", "virtual-keyboard"], "comments": [{"owner": {"reputation": 415, "user_id": 1570093, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/01f035b57df122d980a84e826f64bbd3?s=128&d=identicon&r=PG", "display_name": "Tim Freese", "link": "https://stackoverflow.com/users/1570093/tim-freese"}, "edited": false, "score": 1, "creation_date": 1439998546, "post_id": 32099834, "comment_id": 52094230, "body": "Why is c# a tag on here?"}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1439998727, "post_id": 32099834, "comment_id": 52094347, "body": "shouldn&#39;t you be comparing <code>VK_SHIFT &amp; 0x47</code> to something?"}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1439998842, "post_id": 32099834, "comment_id": 52094429, "body": "Shouldn&#39;t it be <code>GetKeyState(0x47)!=0</code> ? or rather  <code>GetKeyState(0x47)&amp;0x8000</code> to keep the high order byte only ?"}, {"owner": {"reputation": 13, "user_id": 4968031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624392327806429/picture?type=large", "display_name": "Fred Santiago", "link": "https://stackoverflow.com/users/4968031/fred-santiago"}, "edited": false, "score": 0, "creation_date": 1439999217, "post_id": 32099834, "comment_id": 52094716, "body": "if <code>(VK_SHIFT &amp; 0x47)</code>  Is the part I&#39;m searching help for. It doesn&#39;t input the correct key combination, when tested."}, {"owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "edited": false, "score": 0, "creation_date": 1440001736, "post_id": 32099834, "comment_id": 52096232, "body": "@FredSantiago this if gets never executed. I completed my answer to explain why."}], "answers": [{"tags": [], "owner": {"reputation": 54044, "user_id": 3723423, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a2c916310a1261b53773de75fc83e5ad?s=128&d=identicon&r=PG&f=1", "display_name": "Christophe", "link": "https://stackoverflow.com/users/3723423/christophe"}, "is_accepted": true, "score": 1, "last_activity_date": 1440001679, "last_edit_date": 1440001679, "creation_date": 1440000293, "answer_id": 32100566, "question_id": 32099834, "link": "https://stackoverflow.com/questions/32099834/virtual-key-combination/32100566#32100566", "title": "Virtual Key combination", "body": "<p>The biggest problem in your code is the <code>;</code>  at the end of </p>\n\n<pre><code> if(::GetKeyState(0x47)&lt;0);      // !!!!! \n</code></pre>\n\n<p>The <code>;</code> causes the following indented inner if-block to be executed in any case ! </p>\n\n<p>Here a similar simplified code that works very well: </p>\n\n<pre><code>    while(true) {\n        if(::GetKeyState(VK_SHIFT) &amp; 0x8000)  // is shift pressed ?  \n        {\n            if(::GetKeyState(0x47) &amp; 0x8000)  // if G also pressed ?  \n            {\n                std::cout &lt;&lt; \"Shift G pressed\" &lt;&lt; std::endl;\n                break;\n            }\n            else std::cout &lt;&lt; \"Shift...\" &lt;&lt; std::endl;\n        }\n    }\n}\n</code></pre>\n\n<p><strong><em>Additional infos:</em></strong></p>\n\n<p>The expression <code>(VK_SHIFT &amp; 0x47)</code> is a constant which is completely independent of the input. <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731%28v=vs.85%29.aspx\" rel=\"nofollow\"><code>VK_SHIFT</code></a> is <code>0x10</code> and <code>0x10 &amp; 0x47</code> yields 0. So your outer if-block gets never executed.  </p>\n"}], "owner": {"reputation": 13, "user_id": 4968031, "user_type": "registered", "profile_image": "https://graph.facebook.com/1624392327806429/picture?type=large", "display_name": "Fred Santiago", "link": "https://stackoverflow.com/users/4968031/fred-santiago"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "closed_date": 1440015070, "accepted_answer_id": 32100566, "answer_count": 1, "score": 0, "last_activity_date": 1440001679, "creation_date": 1439998240, "last_edit_date": 1439998699, "question_id": 32099834, "link": "https://stackoverflow.com/questions/32099834/virtual-key-combination", "closed_reason": "Duplicate", "title": "Virtual Key combination", "body": "<p>I'm looking for C++ help with virtual key combination, I'm looking for a simple key combination to do a action. I'm trying to get Shift+G to work. I've tried what I know and it's given me different results but nothing what I'm trying to do.</p>\n\n<pre><code>if (VK_SHIFT &amp; 0x47) // Shift+G test\n{\n    if(::GetKeyState(0x47)&lt;0);      \n    {\n        CBaseItem* pItemInfo = g_pItemTableHash-&gt;GetData(\n            g_pMainPlayer-&gt;m_pInv_Guardian[0].GetID());\n\n        if (GUARDIAN_ITEM_TYPE_ADULT == pItemInfo-&gt;BaseItem_Guardian.bType)\n        {\n            if(CUserInterface::GetInstance()-&gt;m_bGuardian==FALSE)\n            {               \n                // ON //\n                CTDS_DUNGEON_CALLGARDIAN CallGuardinan;\n                CallGuardinan.bZipCode = 0;\n                g_pNet-&gt;SendMsg( (char*)&amp;CallGuardinan, CallGuardinan.GetPacketSize(),\n                    SERVER_INDEX_ZONE);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>all that really matters is the first line, any one know how I can fix this so key combination SHIFT+G works?</p>\n"}, {"tags": ["c++"], "comments": [{"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 1, "creation_date": 1439997718, "post_id": 32099569, "comment_id": 52093661, "body": "Why do you wan&#39;t to do this?"}, {"owner": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 1, "creation_date": 1439998224, "post_id": 32099569, "comment_id": 52093996, "body": "What do you mean by &quot;the Matrix A object is a completely new object&quot;?"}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1439998309, "post_id": 32099569, "comment_id": 52094055, "body": "You can&#39;t assign to an object that doesn&#39;t already exist. If you want to disallow assignment, ask about that. (Remember that <code>Matrix A = B;</code> isn&#39;t assignment but initialisation.)"}, {"owner": {"reputation": 163, "user_id": 3029911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bd37a4fb6b55a0d7f5b1b303d9f8c0b?s=128&d=identicon&r=PG", "display_name": "Don Shanil", "link": "https://stackoverflow.com/users/3029911/don-shanil"}, "reply_to_user": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 0, "creation_date": 1439999324, "post_id": 32099569, "comment_id": 52094797, "body": "@NathanOliver I guess I was wondering in general, if there was something I should be doing in order to prevent this happening. What I have presented above is an example, but was curious if in general I should be coding in a way that prevents this type of issue...."}, {"owner": {"reputation": 163, "user_id": 3029911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bd37a4fb6b55a0d7f5b1b303d9f8c0b?s=128&d=identicon&r=PG", "display_name": "Don Shanil", "link": "https://stackoverflow.com/users/3029911/don-shanil"}, "reply_to_user": {"reputation": 15025, "user_id": 862351, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ac8ffed3327e80c6b77651ba30b83e?s=128&d=identicon&r=PG", "display_name": "Pradhan", "link": "https://stackoverflow.com/users/862351/pradhan"}, "edited": false, "score": 0, "creation_date": 1440000113, "post_id": 32099569, "comment_id": 52095388, "body": "@Pradhan amended. Thanks."}, {"owner": {"reputation": 163, "user_id": 3029911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bd37a4fb6b55a0d7f5b1b303d9f8c0b?s=128&d=identicon&r=PG", "display_name": "Don Shanil", "link": "https://stackoverflow.com/users/3029911/don-shanil"}, "reply_to_user": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1440000240, "post_id": 32099569, "comment_id": 52095477, "body": "@molbdnilo Yes you are right. I have amended the code I was missing a statement here."}, {"owner": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1440000299, "post_id": 32099569, "comment_id": 52095511, "body": "<code>p = new double[mat.nrows * ncols]</code> should be <code>p = new double[mat.nrows * mat.ncols]</code>. (i.e. you forgot a <code>mat.</code>)"}, {"owner": {"reputation": 163, "user_id": 3029911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bd37a4fb6b55a0d7f5b1b303d9f8c0b?s=128&d=identicon&r=PG", "display_name": "Don Shanil", "link": "https://stackoverflow.com/users/3029911/don-shanil"}, "reply_to_user": {"reputation": 24394, "user_id": 146041, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/tFOb6.jpg?s=128&g=1", "display_name": "Aaron McDaid", "link": "https://stackoverflow.com/users/146041/aaron-mcdaid"}, "edited": false, "score": 0, "creation_date": 1440000966, "post_id": 32099569, "comment_id": 52095811, "body": "@AaronMcDaid Thanks...amended this."}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 5186631, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9eba0c3d43730a255c9ec05860f23b65?s=128&d=identicon&r=PG&f=1", "display_name": "lordbah", "link": "https://stackoverflow.com/users/5186631/lordbah"}, "is_accepted": false, "score": 0, "last_activity_date": 1439997745, "creation_date": 1439997745, "answer_id": 32099632, "question_id": 32099569, "link": "https://stackoverflow.com/questions/32099569/how-to-correctly-specify-the-copy-constructor/32099632#32099632", "title": "How to correctly specify the copy constructor", "body": "<p>No. Because then it wouldn't be a copy <em>constructor</em>. A constructor constructs.</p>\n"}, {"tags": [], "owner": {"reputation": 96896, "user_id": 2296458, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/wbG2s.png?s=128&g=1", "display_name": "Cory Kramer", "link": "https://stackoverflow.com/users/2296458/cory-kramer"}, "is_accepted": true, "score": 8, "last_activity_date": 1439997778, "creation_date": 1439997778, "answer_id": 32099641, "question_id": 32099569, "link": "https://stackoverflow.com/questions/32099569/how-to-correctly-specify-the-copy-constructor/32099641#32099641", "title": "How to correctly specify the copy constructor", "body": "<p>Instead of using dynamically allocated arrays, I would recommend using <code>std::vector</code></p>\n\n<pre><code>class Matrix\n{\npublic:\n    Matrix(long rows, long cols);\nprivate:\n    long nrows;\n    long ncols;\n    std::vector&lt;double&gt; p;\n}\n</code></pre>\n\n<p>Then your constructor can be</p>\n\n<pre><code>Matrix::Matrix(long rows, long cols)\n: nrows(rows),\n  ncols(cols),\n  p(rows * cols)\n{ }\n</code></pre>\n\n<p>Along with <a href=\"https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii\">all of the other benefits</a> of using <code>std::vector</code> over dynamically allocated arrays, you now get a compiler-generated copy constructor, so you don't need to write one. </p>\n\n<p>If you don't want your class to be copyable, <code>delete</code> the copy constructor and copy assignment operator.</p>\n\n<pre><code>class Matrix\n{\npublic:\n    Matrix(long rows, long cols);\n    Matrix(const Matrix&amp; mat) = delete;\n    Matrix&amp; operator=(const Matrix&amp; mat) = delete;\nprivate:\n    long nrows;\n    long ncols;\n    std::vector&lt;double&gt; p;\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 3029911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bd37a4fb6b55a0d7f5b1b303d9f8c0b?s=128&d=identicon&r=PG", "display_name": "Don Shanil", "link": "https://stackoverflow.com/users/3029911/don-shanil"}, "edited": false, "score": 0, "creation_date": 1440053218, "post_id": 32099684, "comment_id": 52115961, "body": "Thanks for this...not entirely sure though how the &#39;=delete&#39; works. Does this mean that any special member function/operator defined this way, cannot be called? so in effect we don&#39;t have a assignment operator (including default assignment operator) and thus we use the copy constructor for assignments as well? Thanks again!"}, {"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "reply_to_user": {"reputation": 163, "user_id": 3029911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bd37a4fb6b55a0d7f5b1b303d9f8c0b?s=128&d=identicon&r=PG", "display_name": "Don Shanil", "link": "https://stackoverflow.com/users/3029911/don-shanil"}, "edited": false, "score": 0, "creation_date": 1440053353, "post_id": 32099684, "comment_id": 52116018, "body": "Google &quot;C++ member deletion&quot;."}], "tags": [], "owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "is_accepted": false, "score": 2, "last_activity_date": 1439997879, "creation_date": 1439997879, "answer_id": 32099684, "question_id": 32099569, "link": "https://stackoverflow.com/questions/32099569/how-to-correctly-specify-the-copy-constructor/32099684#32099684", "title": "How to correctly specify the copy constructor", "body": "<p>It would be <em>far</em> better to <em>delete</em> the assignment operator:</p>\n\n<p><code>Matrix&amp; operator=(const Matrix&amp;) = delete;</code></p>\n\n<p>Then use of <code>A = Matrix(B)</code> would emit a compile time error. You'd then be forced to use the constructor and your specific issue would cease to be relevant.</p>\n"}, {"tags": [], "owner": {"reputation": 361191, "user_id": 440558, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1", "display_name": "Some programmer dude", "link": "https://stackoverflow.com/users/440558/some-programmer-dude"}, "is_accepted": false, "score": 3, "last_activity_date": 1439997881, "creation_date": 1439997881, "answer_id": 32099685, "question_id": 32099569, "link": "https://stackoverflow.com/questions/32099569/how-to-correctly-specify-the-copy-constructor/32099685#32099685", "title": "How to correctly specify the copy constructor", "body": "<p>With the statement</p>\n\n<pre><code>A = Matrix(B);\n</code></pre>\n\n<p>first a <em>temporary object</em> is create using the copy-constructor. This temporary object is then used in the assignment.</p>\n\n<p>So it's true that the copy-constructor is used, but not as part of the assignment.</p>\n"}], "owner": {"reputation": 163, "user_id": 3029911, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9bd37a4fb6b55a0d7f5b1b303d9f8c0b?s=128&d=identicon&r=PG", "display_name": "Don Shanil", "link": "https://stackoverflow.com/users/3029911/don-shanil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 2, "accepted_answer_id": 32099641, "answer_count": 4, "score": 4, "last_activity_date": 1440000934, "creation_date": 1439997504, "last_edit_date": 1440000934, "question_id": 32099569, "link": "https://stackoverflow.com/questions/32099569/how-to-correctly-specify-the-copy-constructor", "title": "How to correctly specify the copy constructor", "body": "<p>Assume I have a class Matrix, with a constructor as follows:</p>\n\n<pre><code>Matrix::Matrix(int rows, int cols)\n{\n    nrows = a; //here nrows is the number of rows for each matrix \n    ncols = b; //here ncols is the number of cols for each matrix\n    p = new double [rows*cols];\n    for(int i=0;i&lt;rows*cols;i++) \n        { \n            *p++ = 0.0;\n        }\n}\n</code></pre>\n\n<p>Suppose I also have a 'copy' constructor as follows:</p>\n\n<pre><code>Matrix::Matrix(const Matrix&amp; mat)\n{   p = new double[mat.nrows*mat.ncols];\n    for(int i=0;i&lt;mat.nrows*mat.ncols;i++)\n        { \n             p[i] = mat.p[i];\n\n        }\n}\n</code></pre>\n\n<p>Now also suppose I have the following lines in my main function: </p>\n\n<pre><code>int main()\n    {\n        Matrix A(2,2);\n        Matrix B(2,2);\n        A = Matrix(B); //call overloaded assignment operator, and copy ctor/\n     }\n</code></pre>\n\n<p>Here the '=' operator is overloaded to assign all the elements in B to A.\nMy issue is that once the call to the copy constructor is made, the Matrix A object is a completely new object. </p>\n\n<p>Is there a better way of writing the copy constructor so that if Matrix A already exists then calling A = Matrix(B) results in an error?</p>\n"}, {"tags": ["c++", "string", "operator-overloading", "string-concatenation"], "comments": [{"owner": {"reputation": 15289, "user_id": 583833, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/791a00235c66b6c32effd4291101087f?s=128&d=identicon&r=PG", "display_name": "Borgleader", "link": "https://stackoverflow.com/users/583833/borgleader"}, "edited": false, "score": 0, "creation_date": 1439997277, "post_id": 32099413, "comment_id": 52093348, "body": "1) No, because it looks at the overloads of operator+ for pointers, you wont get implicit conversion on both operands. It wouldnt make much sense 2) <a href=\"http://coliru.stacked-crooked.com/a/a803931e63ae61ac\" rel=\"nofollow noreferrer\">Cannot repro</a>"}, {"owner": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 0, "creation_date": 1439997293, "post_id": 32099413, "comment_id": 52093362, "body": "<code>string s=&quot;hello!&quot;</code> actually, this just uses the string constructor that takes <code>const char *</code>, no copy initialization is performed"}, {"owner": {"reputation": 35670, "user_id": 420683, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/68b74cb21e360e5601ce6c812f59a136?s=128&d=identicon&r=PG", "display_name": "dyp", "link": "https://stackoverflow.com/users/420683/dyp"}, "reply_to_user": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 2, "creation_date": 1439997507, "post_id": 32099413, "comment_id": 52093513, "body": "@awesomeyi This isn&#39;t entirely correct either. First, a temporary <code>string</code> is constructed from the <code>&quot;hello&quot;</code> argument, and then moved (or copied in C++03) via direct-initialization to the <code>s</code> variable."}, {"owner": {"reputation": 1369, "user_id": 4729407, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/ugk8q.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4729407/luca"}, "reply_to_user": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 0, "creation_date": 1439997624, "post_id": 32099413, "comment_id": 52093589, "body": "@awesomeyi I think that it does perform an implicit conversion. If I used the direct form of initialization like <code>string s(&quot;hello&quot;)</code>,that would call the ` const char*` constructor.When I use the copy form of initialization it needs the same class type so a conversion occurs ( if the constructor is marked explicit you can&#39;t use the copy form )."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 8441, "user_id": 1783614, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/tK6o5.jpg?s=128&g=1", "display_name": "yizzlez", "link": "https://stackoverflow.com/users/1783614/yizzlez"}, "edited": false, "score": 1, "creation_date": 1439998491, "post_id": 32099413, "comment_id": 52094193, "body": "@awesomeyi: (Appending to dyp&#39;s comment) ...unless the compiler does <a href=\"https://en.wikipedia.org/wiki/Copy_elision\" rel=\"nofollow noreferrer\">copy elision</a>, in which case it does not actually create-and-copy the temporary, but does direct initialization. (&#167;12.8 Copying class objects) This still requires an available copy constructor."}, {"owner": {"reputation": 24727, "user_id": 186997, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/836f83976dae9f54ad7a201cca951f73?s=128&d=identicon&r=PG", "display_name": "utnapistim", "link": "https://stackoverflow.com/users/186997/utnapistim"}, "edited": false, "score": 2, "creation_date": 1439999332, "post_id": 32099413, "comment_id": 52094805, "body": "Although you didn&#39;t ask: to generate a single string literal from two others, you can rely on pre-processing to append them: <code>string s = &quot;hello&quot; &quot; world&quot;;</code> Alternately, in C++14 and onward, you can use a std::string literal: <code>using namespace std::literals::string_literals; auto s = &quot;hello&quot;s + &quot; world&quot;;</code>."}, {"owner": {"reputation": 85822, "user_id": 597607, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jCzJi.png?s=128&g=1", "display_name": "Bo Persson", "link": "https://stackoverflow.com/users/597607/bo-persson"}, "edited": false, "score": 0, "creation_date": 1440007025, "post_id": 32099413, "comment_id": 52099185, "body": "If you wonder what a compiler actually does when constructing a <code>std::string</code> here is <a href=\"http://stackoverflow.com/a/11639305/597607\">one of my answers to another question</a> showing that it can do <code>std::string s = &quot;abcdefgh&quot;;</code>in 5 machine instructions. No temporaries and no copying."}], "answers": [{"comments": [{"owner": {"reputation": 1369, "user_id": 4729407, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/ugk8q.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4729407/luca"}, "edited": false, "score": 0, "creation_date": 1439997971, "post_id": 32099570, "comment_id": 52093828, "body": "yes, but you should be able to convert those const char* to two strings and then use the overloaded operator+(const string&amp;,const string&amp;) ?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 1369, "user_id": 4729407, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/ugk8q.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4729407/luca"}, "edited": false, "score": 0, "creation_date": 1439998013, "post_id": 32099570, "comment_id": 52093854, "body": "@Luca: Please provide code. Plain English is not very precise to specify what, exactly, you&#39;re trying to do."}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 1369, "user_id": 4729407, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/ugk8q.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4729407/luca"}, "edited": false, "score": 1, "creation_date": 1439998600, "post_id": 32099570, "comment_id": 52094265, "body": "@Luca: You <i>can</i> do <code>std::string( &quot;Hello&quot; ) + &quot; world&quot;</code>, of course, because <i>then</i> the compiler <i>does</i> know to look for <code>std::string::operator+</code>."}, {"owner": {"reputation": 1369, "user_id": 4729407, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/ugk8q.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4729407/luca"}, "edited": false, "score": 0, "creation_date": 1439998708, "post_id": 32099570, "comment_id": 52094333, "body": "@DevSolar ok, I now get the pointer thing, but what about the first question? I mean, why can the compiler figure out what overloaded operator to call when I concatenate a string and a string literal (like you say) but it can&#39;t guess when I use two string literals ( which are two const char arrays, or two pointers to a const char and can therefore be converted by the string constructor that takes a parameter of that type)?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 1369, "user_id": 4729407, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/ugk8q.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4729407/luca"}, "edited": false, "score": 0, "creation_date": 1439998805, "post_id": 32099570, "comment_id": 52094403, "body": "@Luca: Why should it prefer turning those <code>const char *</code> into <code>std::string</code>, instead of, say, turning them into <code>int</code> and just adding those? One conversion is as likely as the other. That&#39;s why that kind of &quot;I&#39;ll just convert everything&quot; is not allowed."}, {"owner": {"reputation": 1369, "user_id": 4729407, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/ugk8q.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4729407/luca"}, "edited": false, "score": 0, "creation_date": 1439998974, "post_id": 32099570, "comment_id": 52094535, "body": "becuase I provided a converting constructor from <code>const char*</code> to <code>string</code>. why should it choose to turn them into <code>int</code>s?"}, {"owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "reply_to_user": {"reputation": 1369, "user_id": 4729407, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/ugk8q.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4729407/luca"}, "edited": false, "score": 0, "creation_date": 1439998995, "post_id": 32099570, "comment_id": 52094552, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/87397/discussion-between-devsolar-and-luca\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 59603, "user_id": 60281, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/29ebf39f3857b4fc4f51e93e7b9c4af4?s=128&d=identicon&r=PG", "display_name": "DevSolar", "link": "https://stackoverflow.com/users/60281/devsolar"}, "is_accepted": false, "score": 2, "last_activity_date": 1439998664, "last_edit_date": 1439998664, "creation_date": 1439997506, "answer_id": 32099570, "question_id": 32099413, "link": "https://stackoverflow.com/questions/32099413/c-string-and-overloaded-operators/32099570#32099570", "title": "C++ string and overloaded operators", "body": "<blockquote>\n  <p>1) Concatenating two string literals.</p>\n</blockquote>\n\n<pre><code>\"Hello\" + \" world\"\n</code></pre>\n\n<p>The compiler has no hint that it <em>should</em> be looking for anything related to <code>std::string</code> -- it is looking at two <code>const char[]</code> objects, and you cannot <code>+</code> those (or the <code>const char *</code> they could be degraded to).</p>\n\n<blockquote>\n  <p>2) Using <code>operator+</code> on a char literal and a string literal.</p>\n</blockquote>\n\n<p>(Thanks to User dyp for pointing in the right direction.)</p>\n\n<p>If you <em>literally</em> mean a <code>char</code> literal -- e.g. <code>'a'</code> -- then you're running afoul of one of the more surprising things C/C++ have to offer.</p>\n\n<p>Consider: <strong><code>a[i]</code> is equivalent to <code>i[a]</code>.</strong> (This is a fact.)</p>\n\n<p>So, if you write:</p>\n\n<pre><code>'a' + \"Hello\"\n</code></pre>\n\n<p>...that is equivalent to (in ASCII)...</p>\n\n<pre><code>\"Hello\" + 97\n</code></pre>\n\n<p>...which is a pointer into nowhere, i.e. constructing a <code>std::string</code> from it is undefined behaviour.</p>\n"}, {"tags": [], "owner": {"reputation": 119882, "user_id": 3545273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RDWxl.png?s=128&g=1", "display_name": "Serge Ballesta", "link": "https://stackoverflow.com/users/3545273/serge-ballesta"}, "is_accepted": false, "score": 1, "last_activity_date": 1439998018, "creation_date": 1439998018, "answer_id": 32099743, "question_id": 32099413, "link": "https://stackoverflow.com/questions/32099413/c-string-and-overloaded-operators/32099743#32099743", "title": "C++ string and overloaded operators", "body": "<p>Borgleader already gave half the answer in comment:</p>\n\n<ol>\n<li><p>when adding two string litterals, compiler only sees two <code>const char *</code> and they could be cast to string but also to integers. So unless you explicitely say that you want them as strings, you get an error</p></li>\n<li><p>when adding a string litteral and a char, compiler sees a pointer and an <em>integral number</em>. It knows how to process that and does pointer arithmetics on your C string - which is probably not what you expected! There are chances that you end past the end of the char array and invoke undefined behaviour. Examples:</p>\n\n<pre><code>\"abc\" + '0' =&gt; \"abc\" + 48 : 44 positions past the NULL ...\n\"abcdefghijabcdefghijabcdefghijabcdefghijabcdefghij\" + '0' =&gt; \"ij\"\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 1369, "user_id": 4729407, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/ugk8q.jpg?s=128&g=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/4729407/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1440006570, "creation_date": 1439997073, "last_edit_date": 1440006570, "question_id": 32099413, "link": "https://stackoverflow.com/questions/32099413/c-string-and-overloaded-operators", "title": "C++ string and overloaded operators", "body": "<p>I'm studying about the C++ library type string. I was looking into operation that the type can perform, among which are concatenation.\nI know that in C++ operators can be overloaded to suit class types needs,and I know that character string literals are const char arrays under the hood.\nSo, I know that the string type defines a constructor that takes a string literal argument and converts it into a string, so that I can initialize a string using:</p>\n\n<pre><code>string s=\"hello!\"\n</code></pre>\n\n<p>what happens here is an impicit conversion (through the constructor that takes a const char*) to string and then a copy initialization is performed (through the copy-constructor of string).</p>\n\n<p>so far so good.. (correct me if I am getting something wrong so far)</p>\n\n<p>Now, I know that I can concatenate two strings, or I can concatenate a string and a char literal (or vice versa) and a string and a string literal (so I suppose the first happens because there's an overloaded + operator that takes symmetrically a char and a string, the latter happens thanks to the overloaded + opeartor that concatenates two strings and the implicit conversion from const char* to string). My questions are:</p>\n\n<p>1: why can't I concatenate two string literals? shouldn't the operator+ that takes two strings be called (and two implicit conversion performed from const char* to string) ?</p>\n\n<pre><code>string s=\"hi\"+\" there\";\n</code></pre>\n\n<p>2: I tried to concatenate a char literal and a string literal (calling the operator+ that takes a char and a string) but I get only garbage in the resulting string, as the compiler doesn't mind, but the result is certainly not what I want.</p>\n\n<pre><code>string s='h'+\"ello!\";\ncout&lt;&lt;s&lt;&lt;endl;\n</code></pre>\n\n<p>I get garbage out.If a operator+(char,const string&amp;) exists it should be called after implicitly converting \"ello\" to string shouldn't it?</p>\n\n<p>can you please explain?</p>\n"}, {"tags": ["javascript", "c++", "node.js", "emscripten"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "edited": false, "score": 0, "creation_date": 1440079339, "post_id": 32109161, "comment_id": 52133139, "body": "I have tried to type <code>em++ -s EXPORTED_FUNCTIONS=&quot;[&#39;_main&#39;, &#39;_ping&#39;]&quot; ping.cpp -o ping.js</code>  but get this error: <code>WARNING  root: function requested to be exported, but not implemented: &quot;_ping&quot;</code>"}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "reply_to_user": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "edited": false, "score": 0, "creation_date": 1440082127, "post_id": 32109161, "comment_id": 52135171, "body": "Ah!  I think I misunderstood your original question.  In the list of EXPORTED_FUNCTIONS, I was assuming that you had a function called <code>ping</code> that would print the text &quot;ping&quot; on the screen.  You should just list the names of the functions you want to be able to use (with the leading underscores).  If you have a main function, it should automatically run (by default), any other functions you would need to call from your JS code to have them run."}, {"owner": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "edited": false, "score": 0, "creation_date": 1440084760, "post_id": 32109161, "comment_id": 52137143, "body": "Well, I create <code>ping.cpp</code>, witch contain <code>void ping(std::string arg)</code>.Function ping() do this: <code>{std::cout &lt;&lt; arg;}</code>. Then I type <code>em++ -s EXPORTED_FUNCTIONS=&quot;[&#39;_ping&#39;]&quot; ping.cpp -o ping.js</code> and its create <code>ping.js</code>. After that I went to my first .js file called <code>init.js</code> and type there, in <code>function init()</code>, this: <code>_ping = Module.cwrap(&#39;ping&#39;, &#39;null&#39;, [&#39;string&#39;]); _ping(&#39;Hello from Java Script side&#39;);</code> After that I went to <code>index.html</code> declare my <code>init.js</code> and run <code>init()</code> function, witch should run <code>_ping()</code>, but it doesnt show me <code>Hello from Java Script side</code> What I did wrong?"}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "reply_to_user": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "edited": false, "score": 0, "creation_date": 1440100649, "post_id": 32109161, "comment_id": 52145830, "body": "In your HTML file, do you have both <code>&lt;script src=&quot;ping.js&quot;&gt;&lt;&#47;script&gt;</code> and <code>&lt;script src=&quot;init.js&quot;&gt;&lt;&#47;script&gt;</code>?  The first will load all of the C++/Emscripten code, and the second will have your init function."}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "reply_to_user": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "edited": false, "score": 0, "creation_date": 1440100700, "post_id": 32109161, "comment_id": 52145857, "body": "ALSO, if you want a set of simple working examples (which may help you figure out the problem) here&#39;s a tutorial I wrote: <a href=\"http://devosoft.org/an-introduction-to-web-development-with-emscripten/\" rel=\"nofollow noreferrer\">devosoft.org/an-introduction-to-web-development-with-emscrip&zwnj;&#8203;ten</a>"}, {"owner": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "edited": false, "score": 0, "creation_date": 1440102259, "post_id": 32109161, "comment_id": 52146688, "body": "Yes, I have both scripts in my html file. Thanks, Ill try to figure it out."}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "reply_to_user": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "edited": false, "score": 0, "creation_date": 1440104227, "post_id": 32109161, "comment_id": 52147773, "body": "I wonder if it has to do with your script having not loaded all of the parts yet.  Instead of running <code>init()</code>, try: <code>document.addEventListener(&quot;DOMContentLoaded&quot;, function(event) { init(); });</code>  This will make sure that it waits for everything to be loaded before init() is called."}, {"owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "reply_to_user": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "edited": false, "score": 0, "creation_date": 1440110293, "post_id": 32109161, "comment_id": 52150253, "body": "Drats.  In trying some of this out directly, I think the problem is with the cout; it doesn&#39;t seem to work unless you let Emscripten generate the html file.  In all of my implementations, I&#39;ve always had JavaScript handle all IO, while using C++ for the more computationally intensive portion (thus making each language do what it&#39;s better at).  Alas, I don&#39;t know of a better way to get C++ to output to the browser."}, {"owner": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "edited": false, "score": 0, "creation_date": 1440179321, "post_id": 32109161, "comment_id": 52182308, "body": "The funny thing is, that Ive just tried to use C language with it printf() method and it didnt work as well. I think, that maybe I just forget to add something to my init.js file or to my index.html file, but I cant find what exactly. Seems that I did everything like you said and like official web site says."}], "tags": [], "owner": {"reputation": 1826, "user_id": 2301053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/l0ISw.jpg?s=128&g=1", "display_name": "Charles Ofria", "link": "https://stackoverflow.com/users/2301053/charles-ofria"}, "is_accepted": false, "score": 0, "last_activity_date": 1440041921, "last_edit_date": 1495541176, "creation_date": 1440041921, "answer_id": 32109161, "question_id": 32099307, "link": "https://stackoverflow.com/questions/32099307/run-java-script-file-created-by-emscripten-from-another-java-script-file/32109161#32109161", "title": "Run java script file created by Emscripten from another java script file", "body": "<p>You should probably load your ping.js file with a script tag in your HTML file, just like any other script.  The trick is to make sure that you make any functions you want to use accessible to OTHER scripts that you load.  To do so, you need to set an EXPORTED_FUNCTIONS compilation flag to indicate which function names you want to preserve.  Specifically</p>\n\n<pre><code>em++ -s EXPORTED_FUNCTIONS=\"['_ping']\" ping.cpp -o ping.js\n</code></pre>\n\n<p>Note the underscore ('_') that needed to be added in front of the function name to compensate for name mangling.</p>\n\n<p>In the other JS file where you want to use ping, you need to set it up.  Make sure the compiled script loads first, and then do:</p>\n\n<pre><code>ping = Module.cwrap('ping', 'null', ['string']);\n</code></pre>\n\n<p>This will then allow you to use ping, assuming it has a void return type (hence the null) and a single c-style string argument (hence the ['string']).</p>\n\n<p>If you really do want to load it from another JavaScript file, see this answer:\n<a href=\"https://stackoverflow.com/questions/950087/include-a-javascript-file-in-another-javascript-file\">How do I include a JavaScript file in another JavaScript file?</a></p>\n"}], "owner": {"reputation": 91, "user_id": 5227264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e76227526603ba490fda1f62ddf943d5?s=128&d=identicon&r=PG&f=1", "display_name": "Leonid Manieiev", "link": "https://stackoverflow.com/users/5227264/leonid-manieiev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 477, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524724374, "creation_date": 1439996847, "last_edit_date": 1524724374, "question_id": 32099307, "link": "https://stackoverflow.com/questions/32099307/run-java-script-file-created-by-emscripten-from-another-java-script-file", "title": "Run java script file created by Emscripten from another java script file", "body": "<p>Here is the task:\nI want to run <code>.js</code> file which was created by <code>Emscripten</code> from <code>.cpp</code> file, from another <code>.js</code> file.<br><br>\ni.e.: I have <code>ping.cpp</code> file, which simply displays text <code>\"ping\"</code>. I use Emscripten to create <code>ping.js</code> To do it, I type <code>em++ ping.cpp</code> and here it is - <code>ping.js</code>.<br><br>\nNow I can run it using <code>node ping.js</code>, but I want it to run from my second <code>.js</code> file which is called <code>init.js</code> and I can't understand how should I do it. Because ping.js doesn't have main functions which display \"ping\" and which I can call from another .js file or for example .html file, instead of this it has 68500 lines of code.<br><br>\nSo, is there any chance for me to run ping.js from init.js?</p>\n"}, {"tags": ["c++", "loops", "infinite-loop", "infinite"], "comments": [{"owner": {"reputation": 3631, "user_id": 1094101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9afb6bd332cc5182d7c6c75c88123cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Non-maskable Interrupt", "link": "https://stackoverflow.com/users/1094101/non-maskable-interrupt"}, "edited": false, "score": 0, "creation_date": 1439997265, "post_id": 32099238, "comment_id": 52093334, "body": "What you mean is a loop with exit condition (press key), and this is by definition not infinite loop."}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 3318862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2HlqJ.jpg?s=128&g=1", "display_name": "Anis Belaid", "link": "https://stackoverflow.com/users/3318862/anis-belaid"}, "is_accepted": true, "score": 1, "last_activity_date": 1439997664, "last_edit_date": 1439997664, "creation_date": 1439996972, "answer_id": 32099369, "question_id": 32099238, "link": "https://stackoverflow.com/questions/32099238/c-how-can-i-make-an-infinite-loop-stop-when-pressing-any-key/32099369#32099369", "title": "C++: How can I make an infinite loop stop when pressing any key?", "body": "<p>Use system signal but you will not be able to stop with all keys.</p>\n\n<pre><code>#include &lt;iostream&gt;\n#include &lt;csignal&gt;\n\nusing namespace std;\n\nvoid signalHandler( int signum )\n{\n    cout &lt;&lt; \"Interrupt signal (\" &lt;&lt; signum &lt;&lt; \") received.\\n\";\n\n    // cleanup and close up stuff here  \n    // terminate program  \n\n   exit(signum);  \n\n}\n\nint main ()\n{\n    // register signal SIGINT and signal handler  \n    signal(SIGINT, signalHandler);  \n\n    while(1){\n       cout &lt;&lt; \"Going to sleep....\" &lt;&lt; endl;\n       sleep(1);\n    }\n\n    return 0;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 229, "user_id": 4974561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b88bdd7a7cb5d398f935def3cf9208e?s=128&d=identicon&r=PG&f=1", "display_name": "MisterC", "link": "https://stackoverflow.com/users/4974561/misterc"}, "is_accepted": false, "score": 0, "last_activity_date": 1439997152, "creation_date": 1439997152, "answer_id": 32099441, "question_id": 32099238, "link": "https://stackoverflow.com/questions/32099238/c-how-can-i-make-an-infinite-loop-stop-when-pressing-any-key/32099441#32099441", "title": "C++: How can I make an infinite loop stop when pressing any key?", "body": "<p>You can quit the program, but there is no real way to make it stop with any key on a basic level.</p>\n\n<p>Alternatively you can use another condition for the loop, e.g.</p>\n\n<pre><code>int counter = 0;\nint counterMax = 100;\nwhile (true &amp;&amp; (counter++ &lt; counterMax)) {\n    // your code here\n}\nif (counter &gt;= counterMax) {\n    std::cout &lt;&lt; \"loop terminated by counter\" &lt;&lt; std::endl;\n    // maybe exit the program\n}\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4958490, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LJN3h.jpg?s=128&g=1", "display_name": "nermitt", "link": "https://stackoverflow.com/users/4958490/nermitt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "closed_date": 1439998593, "accepted_answer_id": 32099369, "answer_count": 2, "score": -4, "last_activity_date": 1597589391, "creation_date": 1439996704, "last_edit_date": 1597589391, "question_id": 32099238, "link": "https://stackoverflow.com/questions/32099238/c-how-can-i-make-an-infinite-loop-stop-when-pressing-any-key", "closed_reason": "Needs more focus", "title": "C++: How can I make an infinite loop stop when pressing any key?", "body": "<p>What is the best way to terminate a while loop by pressing a specific key in C++?</p>\n"}, {"tags": ["c++", "qt", "mvvm"], "comments": [{"owner": {"reputation": 8950, "user_id": 1630041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2626d681f792d02ffa74545c3764391?s=128&d=identicon&r=PG", "display_name": "Hcorg", "link": "https://stackoverflow.com/users/1630041/hcorg"}, "edited": false, "score": 0, "creation_date": 1439996842, "post_id": 32099158, "comment_id": 52093007, "body": "why not just use <code>modelReset</code> signal (or similar)?"}, {"owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "edited": false, "score": 0, "creation_date": 1439996852, "post_id": 32099158, "comment_id": 52093017, "body": "Global object tracking has horrible performance in modern, multi-threaded applications. Qt, rightly, doesn&#39;t do it for you - what would be the point? <code>QObject</code> is a fairly lightweight class, adding the overhead of global tracking would be a bad idea."}], "answers": [{"tags": [], "owner": {"reputation": 88126, "user_id": 1329652, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/fa4ef026ee4be15d3dbacc95f1773d03?s=128&d=identicon&r=PG&f=1", "display_name": "Kuba hasn&#39;t forgotten Monica", "link": "https://stackoverflow.com/users/1329652/kuba-hasnt-forgotten-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1439996924, "creation_date": 1439996924, "answer_id": 32099347, "question_id": 32099158, "link": "https://stackoverflow.com/questions/32099158/can-i-get-all-instances-of-some-class-in-qt/32099347#32099347", "title": "Can I get all instances of some class in Qt?", "body": "<p>Your filter proxy implementation is broken. The proxies are fully informed of each and every change to the model - that's why the models are <code>QObject</code>s and emit change signals! There's nothing preventing you from changing the \"some variable\" as appropriate, when the source model indicates that it has changed.</p>\n\n<p>You need to think of your \"some variable\" as depending on some data (and structure!) from the source model. Every time the source model indicates changes to the dependent data or structure, your proxy must recompute the value - or at least set a flag so that the value might be recomputed lazily when needed.</p>\n"}], "owner": {"reputation": 536, "user_id": 2718535, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5d9b58fc7c382937cfd3949d039237fe?s=128&d=identicon&r=PG&f=1", "display_name": "VALOD9", "link": "https://stackoverflow.com/users/2718535/valod9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439996924, "creation_date": 1439996518, "question_id": 32099158, "link": "https://stackoverflow.com/questions/32099158/can-i-get-all-instances-of-some-class-in-qt", "title": "Can I get all instances of some class in Qt?", "body": "<p>I have implemented <code>QAbstractItemModel</code> and <code>QSortFilterProxyModel</code> with it as a source model. I have one <code>itemModel</code> instance and several <code>filterModel</code> instances. In each <code>filterModel</code> I have some variable value of which is calculated based on filtered data from <code>itemModel</code>. When <code>itemModel</code> is recreated (all items removed and the new ones are inserted back) value of this variable should be set to default (or just be recalculated after filtering is done).</p>\n\n<p>The problem is that I don't have some list of pointers to <code>filterModel</code> instances to iterate by them. Sure I can create such static list in constructor. But probably MOC did it instead of me and saved such list inside of <code>QMetaObject</code> of this class?</p>\n"}, {"tags": ["c++", "c", "linux", "libusb"], "comments": [{"owner": {"reputation": 1585, "user_id": 421550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e7a2292ef4ad3674b556df31e81efce?s=128&d=identicon&r=PG", "display_name": "domen", "link": "https://stackoverflow.com/users/421550/domen"}, "edited": false, "score": 0, "creation_date": 1439996174, "post_id": 32098883, "comment_id": 52092503, "body": "This might be more appropriate for libusb developers. Can you try with latest version of the library, and if it still happens, report a bug to them?"}, {"owner": {"reputation": 12180, "user_id": 3150802, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ulVTa.png?s=128&g=1", "display_name": "Peter - Reinstate Monica", "link": "https://stackoverflow.com/users/3150802/peter-reinstate-monica"}, "edited": false, "score": 1, "creation_date": 1439996716, "post_id": 32098883, "comment_id": 52092919, "body": "Perhaps you can debug the program and get a stack trace. You can also use a debug version of the libusb as described in <a href=\"http://www.libusb.org/wiki/debug\" rel=\"nofollow noreferrer\">libusb.org/wiki/debug</a>."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1439999265, "post_id": 32098883, "comment_id": 52094751, "body": "This still segfaults with the <code>else</code>?"}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "reply_to_user": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "edited": false, "score": 0, "creation_date": 1439999397, "post_id": 32098883, "comment_id": 52094849, "body": "@donjuedo yes it does."}, {"owner": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 1, "creation_date": 1439999511, "post_id": 32098883, "comment_id": 52094936, "body": "As you are not showing that part, have you checked your call to <code>libusb_init(NULL)</code> ?"}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "reply_to_user": {"reputation": 2717, "user_id": 310888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e34fb93000c34c068c444aad6d8df5?s=128&d=identicon&r=PG", "display_name": "Leiaz", "link": "https://stackoverflow.com/users/310888/leiaz"}, "edited": false, "score": 0, "creation_date": 1440000179, "post_id": 32098883, "comment_id": 52095431, "body": "@Leiaz Thanks. I had passed reference to a pointer of null instead of null itself."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440075306, "post_id": 32098883, "comment_id": 52130027, "body": "suggest reading the documentation (and code examples) at &lt;<a href=\"http://www.dreamincode.net/forums/topic/148707-introduction-to-using-libusb-10/\" rel=\"nofollow noreferrer\">dreamincode.net/forums/topic/&hellip;</a>&gt; which has a number of steps that need to be performed that the posted code is not doing."}, {"owner": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440076112, "post_id": 32098883, "comment_id": 52130605, "body": "the library is written for C++.   The posted code calls printf() so is for C rather than C++."}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "reply_to_user": {"reputation": 15485, "user_id": 3629249, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000228362830/picture?type=large", "display_name": "user3629249", "link": "https://stackoverflow.com/users/3629249/user3629249"}, "edited": false, "score": 0, "creation_date": 1440078163, "post_id": 32098883, "comment_id": 52132227, "body": "@user3629249 the library is written for c/c++ and it&#39;s also available cross platform. This is an excerpt from code the answer has already been found."}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1439997173, "post_id": 32099436, "comment_id": 52093270, "body": "Heh.. missed it surprisingly..It&#39;s like &quot;is there a check? Yes there is.&quot; But without paying attention what we do with this check.."}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439998215, "post_id": 32099436, "comment_id": 52093990, "body": "Even if that would be a problem. The problem that returns the segmentation fault is the code that I have specified above. When putting a printf statement before the if statement it is not hit. The problem is within the libusb_open_device_with_vid_pid function or my use of it."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439998433, "post_id": 32099436, "comment_id": 52094148, "body": "@MathewWright, Well, I did assume the library call has no internal bug.  The parameters going in are simple, and NULL is permitted as the first param.  So how did you determine the open is where the crash is?"}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439998584, "post_id": 32099436, "comment_id": 52094252, "body": "@MathewWright, Also, it wouldn&#39;t hurt to add the return mentioned, retest, and edit the post, just to eliminate distraction (If indeed I&#39;m mistaken)."}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439998726, "post_id": 32099436, "comment_id": 52094344, "body": "@donjuedo, I assumed it would be fine also. I used simple printf statements before and after the open function. The printf after the open function did not show. The program terminates at that function call because of a segmentation error."}, {"owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "reply_to_user": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439999141, "post_id": 32099436, "comment_id": 52094650, "body": "@MathewWright, that is what I suspected.  <code>printf()</code> buffers output, so the absence of text is misleading.  That&#39;s also why I suggested adding the change anyway.  If the crash is in the claim, and the return is added, the <code>printf()</code> output will get a chance to flush."}, {"owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "edited": false, "score": 0, "creation_date": 1439999369, "post_id": 32099436, "comment_id": 52094827, "body": "@donjuedo I added the change you suggested above to the code above. I have also removed the entire check statement. Sadly I still get the error."}], "tags": [], "owner": {"reputation": 2385, "user_id": 2565958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be3bcf62e85eadc0ff5d40429813e2a3?s=128&d=identicon&r=PG", "display_name": "donjuedo", "link": "https://stackoverflow.com/users/2565958/donjuedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1439997132, "creation_date": 1439997132, "answer_id": 32099436, "question_id": 32098883, "link": "https://stackoverflow.com/questions/32098883/segmentation-fault-on-libusb-get-device-with-vid-pid/32099436#32099436", "title": "segmentation fault on libusb_get_device_with_vid_pid", "body": "<p>You are getting <code>NULL</code> for <code>dev</code>, and using it anyway.  You could add a return statement after the <code>printf()</code>, or an <code>else</code> before the <code>libusb_claim_interface()</code>.</p>\n"}], "owner": {"reputation": 75, "user_id": 5043425, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/1448084908541205/picture?type=large", "display_name": "Mathew Wright", "link": "https://stackoverflow.com/users/5043425/mathew-wright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439999045, "creation_date": 1439995869, "last_edit_date": 1439999045, "question_id": 32098883, "link": "https://stackoverflow.com/questions/32098883/segmentation-fault-on-libusb-get-device-with-vid-pid", "title": "segmentation fault on libusb_get_device_with_vid_pid", "body": "<p>I'm trying to open a connection to a camera from a raspberry pi 2 over usb. I'm able to detect the camera but when I try to open a connection using            </p>\n\n<pre><code>libusb_open_device_with_vid_pid(null, vendor id, product id);\n</code></pre>\n\n<p>But I receive a segmentation fault. I've narrowed it down and that line of code is what causes the segmentation fault.     </p>\n\n<pre><code>void opendevice(){\n    libusb_device_handle* dev;\n    struct libusb_device_descriptor* desc;\n    int err;\n\ndev = libusb_open_device_with_vid_pid(NULL,0x2a0b,0x00f8);\n\n   if (dev == NULL){\n        printf(\"device not found\\n\");\n       }\n\nelse {\n     err = libusb_claim_interface(dev, 0);\n     }    \n}\n</code></pre>\n\n<p>The message from the pi opened over putty on my computer is.</p>\n\n<pre><code>Segmentation fault\n</code></pre>\n\n<p>Any ideas as to what I am doing wrong?</p>\n"}, {"tags": ["c++", "c", "datetime", "timezone", "dst"], "comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 2, "creation_date": 1439995832, "post_id": 32098778, "comment_id": 52092244, "body": "For clarification, are you saying that your device can&#39;t divide? Or why is it impossible to use a solution which requires modulus?"}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 0, "creation_date": 1439995995, "post_id": 32098778, "comment_id": 52092355, "body": "@Bathsheba boost is not the answer for everything. Especially if <code>I have access to minimal C and C++ libraries within the device</code>."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "edited": false, "score": 1, "creation_date": 1439996327, "post_id": 32098778, "comment_id": 52092612, "body": "@MateuszGrzejek That close is uncalled-for in my opinion. It&#39;s a simple mathematical error which has an obvious solution; the question is clear."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1439996370, "post_id": 32098778, "comment_id": 52092642, "body": "That formula will be off by one week if MonthCode + YearCode is greater than or equal to DayOfWeek, because in that case you will be counting from a negative date. You need to check for that condition and add 7 if it is the case. (Question was closed before I manage to finish typing the answer.)"}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1439996847, "post_id": 32098778, "comment_id": 52093013, "body": "No rici, I&#39;m saying that the solution that carries out the reverse operation, calculates the modulus for further use but discards the quotient from the same calculation, i.e. the quotient is unimportant when carrying out the reverse operation. In order to transpose, I would need to feed in both the modulus and quotient (along with the divisor) to arrive at the original dividend."}, {"owner": {"reputation": 11381, "user_id": 4774918, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQQAl.jpg?s=128&g=1", "display_name": "too honest for this site", "link": "https://stackoverflow.com/users/4774918/too-honest-for-this-site"}, "edited": false, "score": 0, "creation_date": 1439996979, "post_id": 32098778, "comment_id": 52093126, "body": "<b>There is no language C/C++!</b> Pick one language!"}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1439997087, "post_id": 32098778, "comment_id": 52093208, "body": "Thanks rici... I&#39;ll give that a whirl."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1439997308, "post_id": 32098778, "comment_id": 52093376, "body": "@MickM:  I voted to reopen.  In the meantime, this library might be helpful to you: <a href=\"http://howardhinnant.github.io/date_v2.html\" rel=\"nofollow noreferrer\">howardhinnant.github.io/date_v2.html</a>  With it you can write expressions such as <code>tue[3]&#47;may&#47;2015</code> which represents the 3rd Tuesday of May in 2015.  That can be converted to a serial count of days, or to a year/month/day format, all very easily, and very accurately.  It is based on the low-level date algorithms presented here: <a href=\"http://howardhinnant.github.io/date_algorithms.html\" rel=\"nofollow noreferrer\">howardhinnant.github.io/date_algorithms.html</a>  C++11 or C++14 is required for the date lib, but not for the algorithms."}, {"owner": {"reputation": 54864, "user_id": 404970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o6X94.jpg?s=128&g=1", "display_name": "molbdnilo", "link": "https://stackoverflow.com/users/404970/molbdnilo"}, "edited": false, "score": 0, "creation_date": 1439997437, "post_id": 32098778, "comment_id": 52093469, "body": "Note that 1) DST changes often; 2) most countries switch on the <i>last</i> occurrence of a weekday, which is either the 4th or 5th; and 3) in Brazil, you need to know when it&#39;s <i>carnaval</i>."}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1439998332, "post_id": 32098778, "comment_id": 52094071, "body": "Haha... Yeah, we are aware of carnaval and many other anomolies. I spent a number of weeks tying myself in knots over such things before opting for a simpler approach. Our table which describes the info listed above is produced (and updated) externally and I parse out the info for each build. Early on I looked at using the comprehensive Linux DST tables but just don&#39;t have the space."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1439999548, "post_id": 32098778, "comment_id": 52094961, "body": "Fwiw, here is a C++11/14 parser of the IANA timezone database: <a href=\"http://howardhinnant.github.io/tz.html\" rel=\"nofollow noreferrer\">howardhinnant.github.io/tz.html</a>"}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1440002697, "post_id": 32098778, "comment_id": 52096819, "body": "Thanks Howard... I&#39;ll be sure to take a look at your solutions."}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1440073999, "post_id": 32098778, "comment_id": 52129062, "body": "This seems to work:   date = DoW + (((WoM - (yearCode + monthCode &lt;= DoW)) * 7) - monthCode - yearCode);   For more situations but I need to test further and make further modifications for the &quot;2 weeks out scenario&quot;."}, {"owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "edited": false, "score": 0, "creation_date": 1440166184, "post_id": 32098778, "comment_id": 52174286, "body": "Further modifier added: &lt;br&gt;      date = DoW + (((WoM - y) * (yearCode + monthCode &lt;= DoW)) - monthCode - yearCode) + ((yearCode + monthCode &gt;= (DoW + 7) * 7);"}], "answers": [{"comments": [{"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1440123357, "post_id": 32103638, "comment_id": 52153487, "body": "Disclaimer:  This formula is valid for the proleptic Gregorian calendar back to <code>Wed 0000-03-01</code>, but no earlier.  That is an impressive range, but it should be noted."}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1440125677, "post_id": 32103638, "comment_id": 52154049, "body": "@howard. Fair enough. As far as I remember, daylight savings time is a more recent invention than the Gregorian calendar -- or even time zones -- so in the context of the application, I don&#39;t think it is necessary to consider any proleptic year, and much less whether to follow Bede&#39;s null-free numerology. But consider the limitation noted."}, {"owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 1, "creation_date": 1440167367, "post_id": 32103638, "comment_id": 52175257, "body": "I suspect it could be modified to handle negative years by changing <code>year = year % 400</code> to floored or Euclidian division: <a href=\"https://en.wikipedia.org/wiki/Modulo_operation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Modulo_operation</a>  But I have not tested that suspicion.  Agreed that such a change would be targeting a very small audience.  Fwiw, the earliest entry in the IANA timezone database is 1835-01-01. :-)"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "edited": false, "score": 0, "creation_date": 1440168727, "post_id": 32103638, "comment_id": 52176214, "body": "@howard: iirc, time zones were a response to the needs of the railway timetable; prior to the existence of a transportation medium with predictable duration, it was not really problematic for every village to idiosyncratically use its own town clock to define the local time. And yes, using a more sensible modulus function and astronomic year numbering would proleptically extend the algorithm to the beginning of <code>int</code>-representable time."}], "tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1440041414, "last_edit_date": 1440041414, "creation_date": 1440011090, "answer_id": 32103638, "question_id": 32098778, "link": "https://stackoverflow.com/questions/32098778/find-the-date-given-the-year-the-month-and-the-nth-occurrance-of-day-within-t/32103638#32103638", "title": "Find the date given the year, the month and the &quot;nth&quot; occurrance of day within the month C/C++", "body": "<p>That formula will be off by one week (or even two weeks) if <code>MonthCode</code> + <code>YearCode</code> is greater than or equal to <code>DayOfWeek</code>, because in that case you will be counting <code>NthOccurenceOfDay</code> from a negative date.</p>\n\n<p>As an alternative, with no tables, you can compute the day of week of the first of the month using, for example, <a href=\"https://en.wikipedia.org/wiki/Determination_of_the_day_of_the_week#Zeller.E2.80.99s_algorithm\" rel=\"nofollow\">Zeller's algorithm</a>:</p>\n\n<pre><code>int NthOccurrence(int year, int month, int n, int dayOfWeek) {\n  // year is the current year (eg. 2015)\n  // month is the target month (January == 1...December == 12)\n  // Finds the date of the nth dayOfWeek (Sun == 0...Sat == 6)\n\n  // Adjust month and year\n  if (month &lt; 3) { --year, month += 12; }\n  // The gregorian calendar is a 400-year cycle\n  year = year % 400;\n  // There are no leap years in years 100, 200 and 300 of the cycle.\n  int century = year / 100;\n  int leaps = year / 4 - century;\n  // A normal year is 52 weeks and 1 day, so the calendar advances one day.\n  // In a leap year, it advances two days.\n  int advances = year + leaps;\n  // This is either magic or carefully contrived,\n  // depending on how you look at it:\n  int month_offset = (13 * (month + 1)) / 5;\n  // From which, we can compute the day of week of the first of the month:\n  int first = (month_offset + advances) % 7;\n  // If the dayOfWeek we're looking for is at least the day we just\n  // computed, we just add the difference. Otherwise, we need to add 7.\n  // Then we just add the desired number of weeks.\n  int offset = dayOfWeek - first;\n  if (offset &lt; 0) offset += 7;\n  return 1 + offset + (n - 1) * 7;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 177852, "user_id": 576911, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a2941970f141aad669d13375dc57c4f?s=128&d=identicon&r=PG", "display_name": "Howard Hinnant", "link": "https://stackoverflow.com/users/576911/howard-hinnant"}, "is_accepted": false, "score": 1, "last_activity_date": 1463853797, "last_edit_date": 1463853797, "creation_date": 1440017005, "answer_id": 32105317, "question_id": 32098778, "link": "https://stackoverflow.com/questions/32098778/find-the-date-given-the-year-the-month-and-the-nth-occurrance-of-day-within-t/32105317#32105317", "title": "Find the date given the year, the month and the &quot;nth&quot; occurrance of day within the month C/C++", "body": "<p>Using <a href=\"http://howardhinnant.github.io/date/date.html\" rel=\"nofollow\">this open source, cross platform date library</a>, one can write:</p>\n\n<pre><code>#include \"date.h\"\n#include &lt;iostream&gt;\n\nint\nmain()\n{\n    using namespace date;\n    year_month_day us_daylight_starts = sys_days(sun[2]/mar/2015);\n    year_month_day us_daylight_ends   = sys_days(sun[1]/nov/2015);\n    std::cout &lt;&lt; us_daylight_starts &lt;&lt; '\\n';\n    std::cout &lt;&lt; us_daylight_ends &lt;&lt; '\\n';\n}\n</code></pre>\n\n<p>which will output:</p>\n\n<pre><code>2015-03-08\n2015-11-01\n</code></pre>\n\n<p>The formulas this library is based on are in the public domain and <a href=\"http://howardhinnant.github.io/date_algorithms.html\" rel=\"nofollow\">documented here</a>.</p>\n\n<p>The algorithms paper has very complete unit tests validating the date algorithms over a range of millions of years (a far larger range than is necessary).</p>\n\n<p>Sometimes daylight savings rules are written in terms of the <em>last</em> weekday of a month.  That is just as easily handled:</p>\n\n<pre><code>year_month_day ymd = sys_days(sun[last]/nov/2015);\nstd::cout &lt;&lt; ymd &lt;&lt; '\\n';  // 2015-11-29\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3982698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ijdAF.jpg?s=128&g=1", "display_name": "MickM", "link": "https://stackoverflow.com/users/3982698/mickm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1463853797, "creation_date": 1439995648, "last_edit_date": 1439995970, "question_id": 32098778, "link": "https://stackoverflow.com/questions/32098778/find-the-date-given-the-year-the-month-and-the-nth-occurrance-of-day-within-t", "title": "Find the date given the year, the month and the &quot;nth&quot; occurrance of day within the month C/C++", "body": "<p>In order that a device (with limited memory) is able to manage its own timezone and daylight savings, I'm trying to calculate daylight savings triggers for 85 time zones based on a simplified description of each timezone. I have access to minimal C and C++ libraries within the device. The format of the timezone (inc. DST) description for each time zone is as follows:</p>\n\n<ul>\n<li>UTC - the base time and date from system clock</li>\n<li>GMTOffsetMinutes - offset from GMT with DST inactive</li>\n<li>DSTDeltaMinutes - modifier to above with DST active (as applicable to TZ)</li>\n<li>DSTStartMonth - month in which DST becomes active</li>\n<li>DSTStartNthOccurranceOfDay - the nth occurrence of the day name in month</li>\n<li>DSTDayOfWeek - Sun = 0 through to Sat = 6</li>\n<li>DSTStartHour - hour at which DST becomes active</li>\n<li>DSTStartMinute - minute at which DST becomes active</li>\n<li>and corresponding EndMonth, EndNth..., EndHour, EndMinute</li>\n</ul>\n\n<p>I have found numerous examples going the other way, i.e. starting with the date, but they involve using the modulus, keeping the remainder and dropping the quotient hence I have been unable to transpose the formula to suit my needs.</p>\n\n<p>I also tried to reuse the standard \"Jan = 6, Feb = 2, Mar = 2, Apr = 5, May = 0, etc. modifier table and year modifiers from the \"tell me what day the 25th of June, 2067 is?\" party trick and developed the following algorithm.</p>\n\n<pre><code>Date = DayOfWeek + ((NthOccuranceOfDay - 1) x 7 ) - MonthCode - YearCode\n</code></pre>\n\n<p>This worked for the first 6 random test dates I selected but then I started to see dates for which it failed. Is it possible that the basic algorithm is sound but I'm missing a further modifier or maybe that I'm applying the modifiers incorrectly?</p>\n\n<p>Is there another solution I could utilize?</p>\n"}, {"tags": ["c++", "visual-studio", "visual-studio-2010", "opencv"], "comments": [{"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1439995170, "post_id": 32098492, "comment_id": 52091679, "body": "Have a look <a href=\"http://stackoverflow.com/a/31545237/5008845\">here</a>. It&#39;s for OpenCV 3.0.0 and VS2013 32bit, but you&#39;ll get the the general idea on the steps. Just minor changes to adapt to your configurations."}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1439995261, "post_id": 32098492, "comment_id": 52091758, "body": "very very urgent... what&#39;s the problem on a missing pdb file? your program should still run?!?"}, {"owner": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1439995368, "post_id": 32098492, "comment_id": 52091846, "body": "Have you set the your VS project to x64 (default is x86)? You are using 64bit libs (c:\\opencv\\build\\x64\\vc10)"}, {"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 0, "creation_date": 1439995708, "post_id": 32098492, "comment_id": 52092133, "body": "@Carl what happens if you run the successfully built program that misses a pdb file? Does it work or does it fail? If it fails, what kind of error do you get?"}, {"owner": {"reputation": 65, "user_id": 4295890, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/702086893/picture?type=large", "display_name": "Carl", "link": "https://stackoverflow.com/users/4295890/carl"}, "reply_to_user": {"reputation": 37050, "user_id": 5008845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6a5f08da4793fc6fdd168f81c5100dc?s=128&d=identicon&r=PG&f=1", "display_name": "Miki", "link": "https://stackoverflow.com/users/5008845/miki"}, "edited": false, "score": 0, "creation_date": 1439996416, "post_id": 32098492, "comment_id": 52092682, "body": "@Miki Let me have a look first will answer, Let me make sure what is the problem.Thank you."}, {"owner": {"reputation": 65, "user_id": 4295890, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/702086893/picture?type=large", "display_name": "Carl", "link": "https://stackoverflow.com/users/4295890/carl"}, "edited": false, "score": 0, "creation_date": 1440081397, "post_id": 32098492, "comment_id": 52134623, "body": "Thx Miki, I did it  based on your steps First, I found that I wrongly included both debug and release version of the lib files together thus causing conflict.  Also I choose the wrong run time library , everything works now, thank you very much for your help."}], "owner": {"reputation": 65, "user_id": 4295890, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/702086893/picture?type=large", "display_name": "Carl", "link": "https://stackoverflow.com/users/4295890/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 570, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1441109558, "creation_date": 1439994856, "last_edit_date": 1441109558, "question_id": 32098492, "link": "https://stackoverflow.com/questions/32098492/configuration-opencv-2-4-11-with-visual-studio-2010", "title": "configuration opencv 2.4.11 with visual studio 2010", "body": "<p>Here is my situation. I have tried for three days to configure opencv with my visual studio 2012 but it keeps on failing. I want to know how to solve it as quick as possible:</p>\n\n<ol>\n<li>My computer is 64 bit operating System</li>\n<li><p>System variables set:</p>\n\n<p>Name: OPENCV_DIR</p>\n\n<p>Value: c:\\opencv\\build\\x64\\vc10</p></li>\n<li><p>PATH: add %OPENCV_DIR%\\bin</p></li>\n<li><p>In Properties I add</p>\n\n<p>-c/c++ -> Additional Include Directories -> \ni add    '$(OPENCV_DIR)\\..\\..\\include'</p>\n\n<p>-Linker -> General -> Additional Library Directories-> \ni add    '$(OPENCV_DIR)\\lib'</p></li>\n<li><p>I also put all the libraries in it as well</p>\n\n<ul>\n<li>Linker -> Input -> Additional Dependencies</li>\n</ul></li>\n<li><p>I open a new emtry project  </p></li>\n</ol>\n\n<p>Finall I try the sample code found in the official web of opencv \n<a href=\"http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to\" rel=\"nofollow\">http://docs.opencv.org/doc/tutorials/introduction/windows_visual_studio_Opencv/windows_visual_studio_Opencv.html#windows-visual-studio-how-to</a>\n(Under \"Test it\")</p>\n\n<p>However, it keeps fail all the time! First , it says there is a mis matched in the machine, thus I change the file from x64 to x86. kLater I see a bulid success, but it can not find the PDB file.</p>\n\n<p>I have no idea why it does not work. I suppose this simple example does not work mean that my configuration fails as well.</p>\n"}, {"tags": ["c++", "json", "bare"], "comments": [{"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 1, "creation_date": 1439995078, "post_id": 32098418, "comment_id": 52091611, "body": "What do you mean by a <code>wrapped</code> and <code>not wrapped</code> json? Can you provide an example of both?"}, {"owner": {"reputation": 18435, "user_id": 845568, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c4f2f13bd99d95ae2ee2249e9b1b8731?s=128&d=identicon&r=PG", "display_name": "Captain Obvlious", "link": "https://stackoverflow.com/users/845568/captain-obvlious"}, "edited": false, "score": 1, "creation_date": 1439996270, "post_id": 32098418, "comment_id": 52092576, "body": "Easy, wrapped json will feel a bit rubbery."}, {"owner": {"reputation": 15, "user_id": 5223828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfaba4ed474387d01681204a8644c282?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Godefroy", "link": "https://stackoverflow.com/users/5223828/adam-godefroy"}, "reply_to_user": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "edited": false, "score": 0, "creation_date": 1439997041, "post_id": 32098418, "comment_id": 52093180, "body": "@Jacobian I&#39;ve edited the question. Thank you for your remark."}, {"owner": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "edited": false, "score": 0, "creation_date": 1440171753, "post_id": 32098418, "comment_id": 52178177, "body": "The crux of your question is about how C# produces its output. JSON is a standard format for data.  JSON has no definition of <i>wrapped</i> or <i>bare</i>, which is why other readers were confused (and so was I until I realized you added C# code to explain the terms)."}], "answers": [{"tags": [], "owner": {"reputation": 11350, "user_id": 1172714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21b9325e81df235c9f3fbadd082ab651?s=128&d=identicon&r=PG", "display_name": "dsh", "link": "https://stackoverflow.com/users/1172714/dsh"}, "is_accepted": false, "score": 2, "last_activity_date": 1440673463, "last_edit_date": 1440673463, "creation_date": 1440172408, "answer_id": 32144592, "question_id": 32098418, "link": "https://stackoverflow.com/questions/32098418/producing-json-from-c-webmessagebodystyle-wrapped-or-webmessagebodystyle-bare/32144592#32144592", "title": "Producing JSON from C#: WebMessageBodyStyle.Wrapped or WebMessageBodyStyle.Bare?", "body": "<p>JSON is a standard format for representing, and exchanging, data.  It does not define the terms <em>Wrapped</em> or <em>Bare</em>.  I am not familiar with C# and its libraries for encoding data as JSON, however I can make a guess based on the samples you provided.</p>\n\n<p>If you have control over the C# application, code it to use <em>Bare</em> only.  I see no advantage, in general, to the <em>Wrapped</em> style.  Perhaps it is designed specifically for some other C# client libraries.</p>\n\n<p>The only difference I see in the produced output is the structure of the data.  There is no way to be absolutely certain, but from those two samples you can simply look at the deserialized object and check if it has an attribute <code>Echo</code>.  If it does, use the value of that attribute and if it doesn't then use the object as-is.</p>\n\n<p>Since I haven't worked in C++ in over a decade and I do not know the JSON library you are using, I will give an example in JavaScript (though using a style that may be somewhat closer to C++).  Here is how those two objects could be handled:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>var data = JSON.parse(...); // the '...' represents where ever you get the text\nif (data[\"Echo\"] !== undefined)\n    { data = data[\"Echo\"]; }\nconsole.log(\"The first name is:\", data[\"firstname\"]);\n</code></pre>\n\n<p>Here is a psuedo-code example that is almost valid Java which may be more easily recognized and translated to C++:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Object&gt; data = JSON.parse(...); // the '...' represents where ever you get the text\nif (data.containsKey(\"Echo\"))\n    { data = (Map)data.get(\"Echo\"); }\nSystem.out.println(\"The first name is: \" + data.get(\"firstname\"));\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5223828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfaba4ed474387d01681204a8644c282?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Godefroy", "link": "https://stackoverflow.com/users/5223828/adam-godefroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1555937690, "creation_date": 1439994699, "last_edit_date": 1555937690, "question_id": 32098418, "link": "https://stackoverflow.com/questions/32098418/producing-json-from-c-webmessagebodystyle-wrapped-or-webmessagebodystyle-bare", "title": "Producing JSON from C#: WebMessageBodyStyle.Wrapped or WebMessageBodyStyle.Bare?", "body": "<p>I am trying to write a C++ application, using C++ REST SDK lib, that will process JSON data produced by a C# application. A C# program can produce JSON in a \"wrapped\" or \"bare\" style.</p>\n\n<p>Using <code>BodyStyle = WebMessageBodyStyle.Wrapped</code>, C# produces JSON like the following:</p>\n\n<pre><code>{\"Echo\":\"{\\\"firstname\\\":\\\"an'\",\\\"number\\\":21,\\\"secondname\\\":\\\"pn\\\"}\"}\n</code></pre>\n\n<p>Using <code>BodyStyle = WebMessageBodyStyle.Bare</code>, C# produces JSON like this:</p>\n\n<pre><code>\"{\\\"firstname\\\":\\\"an'\",\\\"number\\\":21,\\\"secondname\\\":\\\"pn\\\"}\"\n</code></pre>\n\n<p>How can my program recognize which type was produced: <em>Wrapped</em> or <em>Bare</em>?</p>\n"}, {"tags": ["c++", "sse", "simd"], "comments": [{"owner": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1439994965, "post_id": 32098385, "comment_id": 52091502, "body": "Can you post the generated assembly code as well? Spontaneously I&#39;d say that the SSE version, using multiple accumulator chains, ought to be slightly more accurate however depending on the switches a compiler may well end up generating traditional x87 code in full 80-bit precision for the first loop without ever truncating along the way. In any event a recursive divide-and-conquer approach might be preferable to avoid long addition chains and unpredictable optimizer results if you&#39;re worried about precision."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5243211"}, "reply_to_user": {"reputation": 3805, "user_id": 247643, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/8e9927c1955a6b0497cf6c13d9a7b403?s=128&d=identicon&r=PG", "display_name": "doynax", "link": "https://stackoverflow.com/users/247643/doynax"}, "edited": false, "score": 0, "creation_date": 1439996804, "post_id": 32098385, "comment_id": 52092982, "body": "I use -msse compiler option. So I think that x87 instructions won&#39;t be used ."}, {"owner": {"reputation": 52741, "user_id": 555045, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/182d0ce855c8324a596648c04643e8f9?s=128&d=identicon&r=PG", "display_name": "nicomp", "link": "https://stackoverflow.com/users/555045/nicomp"}, "edited": false, "score": 1, "creation_date": 1439999192, "post_id": 32098385, "comment_id": 52094697, "body": "By the way, you have a loop carried dependency chain on addps with a latency of 3c, but the reciprocal throughput of 2 loads, 1 sub, 1 add, 1 mul and some trivial loop overhead adds up to 2c on Haswell, so it should benefit from unrolling by 2 and using 2 accumulators."}], "answers": [{"comments": [{"owner": {"reputation": 195333, "user_id": 253056, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/1977cbe0ac5ffec4f6ee5ee24363988a?s=128&d=identicon&r=PG", "display_name": "Paul R", "link": "https://stackoverflow.com/users/253056/paul-r"}, "edited": false, "score": 1, "creation_date": 1439996327, "post_id": 32098853, "comment_id": 52092614, "body": "Very nice analysis and solution."}, {"owner": {"reputation": 29002, "user_id": 2542702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fW5ka.jpg?s=128&g=1", "display_name": "Z boson", "link": "https://stackoverflow.com/users/2542702/z-boson"}, "edited": false, "score": 0, "creation_date": 1443003393, "post_id": 32098853, "comment_id": 53314366, "body": "Awesome answer! It would be interesting to see a more precise explanation of the error/uncertainty. I mean total uncertainty and RMS (random walk)."}], "tags": [], "owner": {"reputation": 3670, "user_id": 2831104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fM2Ds.jpg?s=128&g=1", "display_name": "ErmIg", "link": "https://stackoverflow.com/users/2831104/ermig"}, "is_accepted": true, "score": 7, "last_activity_date": 1439995810, "creation_date": 1439995810, "answer_id": 32098853, "question_id": 32098385, "link": "https://stackoverflow.com/questions/32098385/an-accumulated-computing-error-in-sse-version-of-algorithm-of-the-sum-of-squared/32098853#32098853", "title": "An accumulated computing error in SSE version of algorithm of the sum of squared differences", "body": "<p>The error follows from finite precision floating point numbers. \nEach addition of two floating point numbers is has an computing error proportional to difference between them. \nIn your scalar version of algorithm the resulting sum is much greater then each term (if size of arrays is big enough of course). \nSo it leads to accumulation of big computing error.</p>\n\n<p>In the SSE version of algorithm actually there is four sums for results accumulation. And difference between these sums and each term is lesser in four times relative to scalar code. \nSo this leads to the lesser computing error.</p>\n\n<p>There are two ways to solve this error:</p>\n\n<p>1) Using of floating point numbers of double precision for accumulating sum.</p>\n\n<p>2) Using of the the Kahan summation algorithm (also known as compensated summation) which significantly reduces the numerical error in the total obtained by adding a sequence of finite precision floating point numbers, compared to the obvious approach. </p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Kahan_summation_algorithm\">https://en.wikipedia.org/wiki/Kahan_summation_algorithm</a></p>\n\n<p>With using of Kahan summation algorithm your scalar code will look like:</p>\n\n<pre><code>inline void KahanSum(float value, float &amp; sum, float &amp; correction)\n{\n    float term = value - correction;\n    float temp = sum + term;\n    correction = (temp - sum) - term;\n    sum = temp; \n}\n\nfloat SquaredDifferenceKahanSum(const float * a, const float * b, size_t size)\n{\n    float sum = 0, correction = 0;\n    for(size_t i = 0; i &lt; size; ++i)\n        KahanSum(Square(a[i] - b[i]), sum, correction);\n    return sum;\n}\n</code></pre>\n\n<p>And SSE optimized code will look as follow:</p>\n\n<pre><code>inline void SquaredDifferenceKahanSum(const float * a, const float * b, size_t i, \n                                      __m128 &amp; sum, __m128 &amp; correction)\n{\n    __m128 _a = _mm_loadu_ps(a + i);\n    __m128 _b = _mm_loadu_ps(b + i);\n    __m128 _d = _mm_sub_ps(_a, _b);\n    __m128 term = _mm_sub_ps(_mm_mul_ps(_d, _d), correction);\n    __m128 temp = _mm_add_ps(sum, term);\n    correction = _mm_sub_ps(_mm_sub_ps(temp, sum), term);\n    sum = temp; \n}\n\nfloat SquaredDifferenceKahanSum(const float * a, const float * b, size_t size)\n{\n    size_t i = 0, alignedSize = size/4*4;\n    __m128 sums = _mm_setzero_ps(), corrections = _mm_setzero_ps();\n    for(; i &lt; alignedSize; i += 4)\n        SquaredDifferenceKahanSum(a, b, i, sums, corrections);\n    float sum = ExtractSum(sums), correction = 0;\n    for(; i &lt; size; ++i)\n        KahanSum(Square(a[i] - b[i]), sum, correction);\n    return sum;\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5243211"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 420, "favorite_count": 2, "accepted_answer_id": 32098853, "answer_count": 1, "score": 4, "last_activity_date": 1439995810, "creation_date": 1439994605, "question_id": 32098385, "link": "https://stackoverflow.com/questions/32098385/an-accumulated-computing-error-in-sse-version-of-algorithm-of-the-sum-of-squared", "title": "An accumulated computing error in SSE version of algorithm of the sum of squared differences", "body": "<p>I was trying to optimize following code (sum of squared differences for two arrays):</p>\n\n<pre><code>inline float Square(float value)\n{\n    return value*value;\n}\n\nfloat SquaredDifferenceSum(const float * a, const float * b, size_t size)\n{\n    float sum = 0;\n    for(size_t i = 0; i &lt; size; ++i)\n        sum += Square(a[i] - b[i]);\n    return sum;\n}\n</code></pre>\n\n<p>So I performed optimization with using of SSE instructions of CPU:</p>\n\n<pre><code>inline void SquaredDifferenceSum(const float * a, const float * b, size_t i, __m128 &amp; sum)\n{\n    __m128 _a = _mm_loadu_ps(a + i);\n    __m128 _b = _mm_loadu_ps(b + i);\n    __m128 _d = _mm_sub_ps(_a, _b);\n    sum = _mm_add_ps(sum, _mm_mul_ps(_d, _d));\n}\n\ninline float ExtractSum(__m128 a)\n{\n    float _a[4];\n    _mm_storeu_ps(_a, a);\n    return _a[0] + _a[1] + _a[2] + _a[3];\n}\n\nfloat SquaredDifferenceSum(const float * a, const float * b, size_t size)\n{\n    size_t i = 0, alignedSize = size/4*4;\n    __m128 sums = _mm_setzero_ps();\n    for(; i &lt; alignedSize; i += 4)\n        SquaredDifferenceSum(a, b, i, sums);\n    float sum = ExtractSum(sums);\n    for(; i &lt; size; ++i)\n        sum += Square(a[i] - b[i]);\n    return sum;\n}\n</code></pre>\n\n<p>This code works fine if the size of the arrays is not too large. \nBut if the size is big enough then there is a large computing error between results given by base function and its optimized version.\nAnd so I have a question: Where is here a bug in SSE optimized code, which leads to the computing error.</p>\n"}, {"tags": ["python", "c++", "opencv", "extend"], "comments": [{"owner": {"reputation": 12521, "user_id": 4498329, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b1bf128245aa5bcb1b740e8154296900?s=128&d=identicon&r=PG&f=1", "display_name": "skyking", "link": "https://stackoverflow.com/users/4498329/skyking"}, "edited": false, "score": 0, "creation_date": 1439994398, "post_id": 32098202, "comment_id": 52091046, "body": "Have you defined <code>cv::Mat::dealocate()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "reply_to_user": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440060048, "post_id": 32098426, "comment_id": 52119891, "body": "Look for massages like &quot;not found&quot; or something like that"}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "reply_to_user": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440060458, "post_id": 32098426, "comment_id": 52120131, "body": "Make sure that you have <code>ldd</code> in your system and that you run this command in the folder containing <code>kalman.so </code>"}, {"owner": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440060884, "post_id": 32098426, "comment_id": 52120383, "body": "got this as an output: linux-vdso.so.1 =&gt;  (0x00007fffbec92000) \tlibstdc++.so.6 =&gt; /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fb4c5c44000) \tlibm.so.6 =&gt; /lib/x86_64-linux-gnu/libm.so.6 (0x00007fb4c593e000) \tlibgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fb4c5728000) \tlibpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fb4c550a000) \tlibc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fb4c5145000) \t/lib64/ld-linux-x86-64.so.2 (0x00007fb4c6150000)... What does it mean?"}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "reply_to_user": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440061162, "post_id": 32098426, "comment_id": 52120572, "body": "Please, provide the full list in your question."}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "reply_to_user": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440061272, "post_id": 32098426, "comment_id": 52120650, "body": "And, please, show how you compile and link your library"}, {"owner": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440061340, "post_id": 32098426, "comment_id": 52120695, "body": "1- This is the full list"}, {"owner": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440061377, "post_id": 32098426, "comment_id": 52120719, "body": "2- The library is compiled with python: $ sudo python setup.py install"}, {"owner": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440061433, "post_id": 32098426, "comment_id": 52120767, "body": "Setup.py: from distutils.core import setup, Extension setup(name=&#39;kalman&#39;, version=&#39;1.0&#39;,  \\       ext_modules=[Extension(&#39;kalman&#39;, [&#39;kalman.cpp&#39;])])"}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "reply_to_user": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440061609, "post_id": 32098426, "comment_id": 52120894, "body": "Oh, I see. I personally use <code>boost::python</code> and do not know exactly how you should link a specific library in your case. But the fact is, some library which contains <code>dealocate</code> method is not linked to your project. I guess, you should edit <code>ext_modules=...</code> block"}, {"owner": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440061797, "post_id": 32098426, "comment_id": 52121031, "body": "I was searching yesterday for an alternative solution and I found boost.python... Can I pass values from the C++ program using opencv back to python? (using boost)"}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "reply_to_user": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440062077, "post_id": 32098426, "comment_id": 52121226, "body": "I&#39;m not familiar with <code>opencv</code>, but in <code>boost</code>, of course, you can pass arbitrary values in both directions - from C++ to Python, and vice versa. However, it may require some coding."}, {"owner": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 1, "creation_date": 1440062303, "post_id": 32098426, "comment_id": 52121400, "body": "Coding is the easy part :P Thank you for answering my questions!"}, {"owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "reply_to_user": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "edited": false, "score": 0, "creation_date": 1440062334, "post_id": 32098426, "comment_id": 52121429, "body": "Good luck! And happy coding!"}], "tags": [], "owner": {"reputation": 7892, "user_id": 2544036, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/0ac5bfd4795966e2378975bd2c34f660?s=128&d=identicon&r=PG", "display_name": "Jacobian", "link": "https://stackoverflow.com/users/2544036/jacobian"}, "is_accepted": true, "score": 1, "last_activity_date": 1439994712, "creation_date": 1439994712, "answer_id": 32098426, "question_id": 32098202, "link": "https://stackoverflow.com/questions/32098202/undefined-symbol-zn2cv3mat10deallocateev/32098426#32098426", "title": "undefined symbol: _ZN2cv3Mat10deallocateEv", "body": "<p>Check your shared library <code>kalman.so</code> with <code>ldd</code> like so:</p>\n\n<pre><code> $ ldd kalman.so\n</code></pre>\n\n<p>And you will see that you are missing some libraries. That means that you have to provide some correct path to one of the libraries you use in your code at the linkage stage. something like</p>\n\n<pre><code> $ ...the way you do linking ... -L path_to_the_missing_library\n</code></pre>\n\n<p>For more information, please, consult this <a href=\"http://manpages.ubuntu.com/manpages/precise/man1/ldd.1.html\" rel=\"nofollow\">link</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11230148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dde4a19dfaf67fd1cd30a63cc1796f02?s=128&d=identicon&r=PG&f=1", "display_name": "WQS", "link": "https://stackoverflow.com/users/11230148/wqs"}, "is_accepted": false, "score": 0, "last_activity_date": 1556041040, "creation_date": 1556041040, "answer_id": 55816666, "question_id": 32098202, "link": "https://stackoverflow.com/questions/32098202/undefined-symbol-zn2cv3mat10deallocateev/55816666#55816666", "title": "undefined symbol: _ZN2cv3Mat10deallocateEv", "body": "<p>I've met the same problem as you do, and at last I figured out that this is because I didn't add the linking library of opencv when compiling. Try to add the \"opencv_core\" or other related library when you compile the c++ source file.\nWish this to be helpful to you.</p>\n"}], "owner": {"reputation": 113, "user_id": 5243776, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ce52fd5aa3d912a71d2b5e29546fca3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/5243776/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2969, "favorite_count": 0, "accepted_answer_id": 32098426, "answer_count": 2, "score": 2, "last_activity_date": 1556041040, "creation_date": 1439994135, "question_id": 32098202, "link": "https://stackoverflow.com/questions/32098202/undefined-symbol-zn2cv3mat10deallocateev", "title": "undefined symbol: _ZN2cv3Mat10deallocateEv", "body": "<p>I've been trying to extend my python script with a C++ code. I was able to do that with the simple libraries of C++ (print \"hello world\"). I followed the tutorial available in the link below:</p>\n\n<p><a href=\"http://www.tutorialspoint.com/python/python_further_extensions.htm\" rel=\"nofollow\">http://www.tutorialspoint.com/python/python_further_extensions.htm</a></p>\n\n<p>When I tried to add to my C++ code opencv libraries I encountered the following problem:\nImportError: /usr/local/lib/python2.7/dist-packages/kalman.so: undefined symbol: _ZN2cv3Mat10deallocateEv</p>\n\n<p>I searched for many solutions on the internet, and I found one common answer that didn't workout for me:\n\"I was able to solve this by going to /usr/lib64/pkgconfig and modified opencv.pc to explicitly have all libraries. I also had to move the plugins from /usr/lib/gstreamer-0.10 to /usr/lib64/gstreamer-0.10\"</p>\n\n<p>Please note that I am using ubuntu 14.04 LTS 64-bit and I am planning to run my code later on on a raspberry pi model B running Raspbian OS. </p>\n\n<p>Thank you.</p>\n\n<p>NJ</p>\n"}, {"tags": ["c++", "c++11", "visual-c++", "pimpl-idiom"], "comments": [{"owner": {"reputation": 42006, "user_id": 3807729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UEUbF.jpg?s=128&g=1", "display_name": "Galik", "link": "https://stackoverflow.com/users/3807729/galik"}, "edited": false, "score": 0, "creation_date": 1439994539, "post_id": 32098001, "comment_id": 52091166, "body": "This answer may help: <a href=\"https://stackoverflow.com/questions/24635255/is-it-possible-to-write-an-agile-pimpl-in-c/24638702#24638702\" title=\"is it possible to write an agile pimpl in c\">stackoverflow.com/questions/24635255/&hellip;</a>"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439994770, "post_id": 32098001, "comment_id": 52091363, "body": "As a test, can you replace <code>std::unique_ptr&lt;FrameworkImpl&gt; impl_;</code> with <code>struct do_nothing{ template&lt;class T&gt; void operator()(T&amp;&amp;)const{}; }; std::unique_ptr&lt;FrameworkImpl, do_nothing&gt; impl_;</code> -- I want to see if it is related to the default deleter.  (if this does compile, you aren&#39;t done!  but it is diagnostic.)  Also note that the warning <i>might</i> be spurious."}, {"owner": {"reputation": 1645, "user_id": 1537817, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8a73c7e60f624e9d80f56368f91fa180?s=128&d=identicon&r=PG", "display_name": "kittikun", "link": "https://stackoverflow.com/users/1537817/kittikun"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439995205, "post_id": 32098001, "comment_id": 52091711, "body": "@Yakk Same warning but with &#39;std::unique_ptr&lt;FrameworkImpl,Framework::do_nothing&gt;&#39; instead"}], "answers": [{"comments": [{"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439995285, "post_id": 32098634, "comment_id": 52091785, "body": "Or, write the 30-line <code>simple_unique_ptr</code> and punt?  Or is it 60?  It isn&#39;t many for a bare-bones RAII pointer-owner."}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439995546, "post_id": 32098634, "comment_id": 52091986, "body": "Yes, that is probably the best solution. When we started to design our rendering engine (which was designed to be a set of DLL modules), we began from implementing custom containers, strings and RAII primitives. Costs: 3 days of work for 4 people. Benefits: huge performance boost. no problems with DLL interfaces."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 1, "creation_date": 1439996061, "post_id": 32098634, "comment_id": 52092417, "body": "what? you use hand-rolled containers instead of standard containers because of some DLL issue? usually in linux the way these things are dealt with is (1) there is no DLL_export (2) clients know that they need to use libraries built with the same compiler and standard library the whole way through, and if they don&#39;t then most likely they get linker errors, because of exactly this issue. would you seriously recommend that each DLL should ship its own private collection of containers duplicating the standard library?"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439996331, "post_id": 32098634, "comment_id": 52092616, "body": "Custom container<b>s</b>?  Really, why do you need more than <code>vector</code>.  String is just <code>vector</code> with some sugar.  Efficient maps are <code>vector</code> with some sugar.  I guess RAII is needed."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1439996515, "post_id": 32098634, "comment_id": 52092759, "body": "@ChrisBeck In the land of windows, DLLs are supposed to be portable (between OS versions, compiler versions, systems, etc).  Restricting to being compiled with the same compiler version and quirks is considered overly restrictive.  If you are shipping some collection of DLLs that make up a set of programs, that level of requirement is reasonable: otherwise, not.  So you get DLLs that export COM interfaces and other loveliness."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439996979, "post_id": 32098634, "comment_id": 52093123, "body": "@Yakk wow... I did not realize that about DLL portability in windows. Re containers: I guess I commonly use unique_ptr, shared_ptr, vector, unordered_map (not a vector under the hood)... that&#39;s probably mostly it. but i really would not want to reimplement shared_ptr with all the bells and whistles in a one-off way for some project, like weak_ptr, make_shared, enable_shared_from_this, exception safety and make tests for it and for all the other guys etc. etc. don&#39;t forget the &quot;secret constructor&quot; <a href=\"https://www.justsoftwaresolutions.co.uk/cplusplus/shared-ptr-secret-constructor.html\" rel=\"nofollow noreferrer\">justsoftwaresolutions.co.uk/cplusplus/&hellip;</a>"}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439996982, "post_id": 32098634, "comment_id": 52093132, "body": "@Yakk What are you talking about? There are plenty of containers required for specific, high-performance oriented tasks not present in <code>std</code>. Priority trees, cascade lists, octree/kd-tree (for BSP), lock-free data structures. Also, can you simply accept, that we were able to produce more efficient replacements for some <code>std</code> containers, highly optimized for parallel processing? Profiling left no doubts. Standard library is not answer for everything."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439997127, "post_id": 32098634, "comment_id": 52093244, "body": "@Yakk: also I think that its healthier if you use the standard library and when you are designing code you know that you have all the usual tools available with extremely reliable implementations where every corner case has been clearly thought out etc. if i know that I only have some particular vector and unique_ptr classes and I have strong incentives to shoehorn everything into those i think it will put bad pressure on the design"}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1439997653, "post_id": 32098634, "comment_id": 52093617, "body": "@ChrisBeck <code>shared_ptr</code> is rarely a good idea (really), especially over something as loosely coupled as a DLL boundary.  Non-flat containers are horribly slow (even linear search on an unsorted flat array does surprisingly well against advanced <code>std</code> containers; amortized sort flat arrays, flat hash tables, etc blow away node-based data structures).  There is an idiom that you should first consider vector, and if vector doesn&#39;t work you should reconsider your problem to see if it could use vector."}, {"owner": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439997830, "post_id": 32098634, "comment_id": 52093737, "body": "@Yakk Flat containers are horribly slow when it comes to ordered insertion and non ordered flat containers are horrifically slow at searching. <code>std::vector</code> really isn&#39;t the solution to everything."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439997837, "post_id": 32098634, "comment_id": 52093747, "body": "@MateuszGrzejek I was presuming you where just talking about <code>std</code>.  However, you really expose kd-trees across DLL boundaries?  Usually my DLLs represent systems that don&#39;t require that rich of an interface between them.  I was making the point that there are 2 containers in <code>std</code> and one smart pointer worth the effort of reimplementing: <code>std::vector</code>, <code>std::array</code> and <code>std::unique_ptr</code>.  Every other container should be tossed and redesigned, if you are going to that much bother of rewriting them."}, {"owner": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "reply_to_user": {"reputation": 2884, "user_id": 2558027, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/srmnC.jpg?s=128&g=1", "display_name": "sjdowling", "link": "https://stackoverflow.com/users/2558027/sjdowling"}, "edited": false, "score": 0, "creation_date": 1439998006, "post_id": 32098634, "comment_id": 52093851, "body": "@sjdowling amortized sorted flat containers are only slow if you constantly add/remove elements, almost as often as you do lookup/iteration.  The container doesn&#39;t have to always be sorted, it just has to be <i>mostly</i> sorted (and get more sorted as you poke at it).  I&#39;m sure a node-based container could be written that doesn&#39;t have the cache problems of every non-flat <code>std</code> container; but I was comparing a well written flat map to a <code>std::map</code>.  There is a <b>lot</b> of headroom gained when you stop randomly walking memory (like node-based containers do on most operations)."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1439998359, "post_id": 32098634, "comment_id": 52094092, "body": "in the past when i have cross compiled for windows using MinGW, there is an option to automatically statically link libc / libstdc++ into the binary so that I do not have to provide it to the users / worry that the users have a competing version. is there a similar option for msvc to link the msvc standard library implementation automatically into my library, like in the case of the question?"}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "reply_to_user": {"reputation": 233737, "user_id": 1774667, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/b6516fec2c5997b867545d285304cf12?s=128&d=identicon&r=PG", "display_name": "Yakk - Adam Nevraumont", "link": "https://stackoverflow.com/users/1774667/yakk-adam-nevraumont"}, "edited": false, "score": 0, "creation_date": 1439998781, "post_id": 32098634, "comment_id": 52094386, "body": "@Yakk No, I did not expose those as public/accessible/explicitly modifiable variables. I was just giving examples of what <code>std</code> lacks of. And nothing strange here - language cannot provide tools for solving every problem. I mean, I think that &quot;use boost&quot; or &quot;use vector/string&quot; answers became so common, that sometimes they are used to answer questions, for which they are not really applicable."}, {"owner": {"reputation": 1645, "user_id": 1537817, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8a73c7e60f624e9d80f56368f91fa180?s=128&d=identicon&r=PG", "display_name": "kittikun", "link": "https://stackoverflow.com/users/1537817/kittikun"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1439998818, "post_id": 32098634, "comment_id": 52094408, "body": "@ChrisBeck yes, you can link the &quot;runtime library&quot; statically or as a dll in the project c++/code generation properties"}, {"owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1439999288, "post_id": 32098634, "comment_id": 52094768, "body": "@ChrisBeck What you want is <code>Project properties</code> -&gt; <code>C&#47;C++</code> -&gt; <code>Code Generation</code> -&gt; <code>Runtime Library</code>. <code>&#47;MT</code> and <code>MTd</code> refer to static linking. Note, that this may cause problems if you produce both libraries (<code>.lib</code>/<code>.dll</code>) and <code>.exe</code> - you will end up with multiple copies of CRT symbols."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1439999420, "post_id": 32098634, "comment_id": 52094873, "body": "is that an alternate way to resolve this warning, or does the warning still happen anyways?"}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1439999916, "post_id": 32098634, "comment_id": 52095250, "body": "ok i think i see now why that is not a good question. the issue is that you just want your <i>interface</i> to your library to be very simple, and the <i>interface</i> should ideally not have complex external dependencies. so you really don&#39;t want to use std:: anything, or anything that is not extremely stable, among the exported symbols. (agree / disagree?)"}, {"owner": {"reputation": 1645, "user_id": 1537817, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8a73c7e60f624e9d80f56368f91fa180?s=128&d=identicon&r=PG", "display_name": "kittikun", "link": "https://stackoverflow.com/users/1537817/kittikun"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440000770, "post_id": 32098634, "comment_id": 52095697, "body": "@ChrisBeck you cannot statically link the runtime to a dll. And yes, as I mentioned in the description, using a raw pointer eliminates this warning and work just fine."}, {"owner": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440001043, "post_id": 32098634, "comment_id": 52095831, "body": "kittikun: I think what I would do is just go back to raw pointer, only in the DLL exported classes (I am sorry to say) that seems like the simplest solution"}, {"owner": {"reputation": 1645, "user_id": 1537817, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8a73c7e60f624e9d80f56368f91fa180?s=128&d=identicon&r=PG", "display_name": "kittikun", "link": "https://stackoverflow.com/users/1537817/kittikun"}, "reply_to_user": {"reputation": 13936, "user_id": 3598119, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/6c9c7dfa28a57e8011d12208a7c86d20?s=128&d=identicon&r=PG", "display_name": "Chris Beck", "link": "https://stackoverflow.com/users/3598119/chris-beck"}, "edited": false, "score": 0, "creation_date": 1440006751, "post_id": 32098634, "comment_id": 52099049, "body": "@ChrisBeck Actually, I was wrong, just say the warning for the raw pointer! Well i&#39;ll just disable the warning then.."}], "tags": [], "owner": {"reputation": 10555, "user_id": 2812864, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/GVsZM.jpg?s=128&g=1", "display_name": "Mateusz Grzejek", "link": "https://stackoverflow.com/users/2812864/mateusz-grzejek"}, "is_accepted": false, "score": 17, "last_activity_date": 1439995394, "last_edit_date": 1495535428, "creation_date": 1439995236, "answer_id": 32098634, "question_id": 32098001, "link": "https://stackoverflow.com/questions/32098001/stdunique-ptr-pimpl-in-dll-generates-c4251-with-visual-studio/32098634#32098634", "title": "std::unique_ptr pimpl in dll generates C4251 with visual studio", "body": "<p>That is a very common issue with DLL classes, that use templates from <code>std</code>.</p>\n\n<p><strong>Why does it happen?</strong></p>\n\n<p>Reason is very simple: standard specifies only <em>guarantees</em>, <em>limitations</em> and <em>requirements</em>. So you can be sure, that every C++ 11 compiler will provide <code>std::unique_ptr</code>, that looks and works as described <a href=\"http://en.cppreference.com/w/cpp/memory/unique_ptr\" rel=\"noreferrer\">on this page</a>. But everything else is implementation dependent.</p>\n\n<p>The main problem is, that different implementations may (and usually, will) use a totally different structure for particular types. They use additional helper variables, different layout and so on. This may differ even between two versions of the same compiler. So if client code touches in any way member variables of your class, you need to provide DLL interface for them. That applies recursively to all types used by <code>dllexport</code>ed class.</p>\n\n<p>You may want to read <a href=\"https://support.microsoft.com/en-us/kb/168958\" rel=\"noreferrer\">this article on MSDN</a>, that describes this problem with containers in mind.</p>\n\n<p>This problem can be simplified to the following:</p>\n\n<ul>\n<li>If client code has no access to your data, disable this warning.</li>\n<li>If you have members, that are intended to use by client code, create wrapper, that is <code>dllexport</code>ed or use additional indirection with <code>dllexport</code>ed methods.</li>\n<li>Usually, you can use PIMPL to hide non-DLL types, but in your case it is not applicable, since you use non-exportable type to <em>actually implement</em> PIMPL.</li>\n</ul>\n\n<p>Further reading:</p>\n\n<ul>\n<li><a href=\"https://support.microsoft.com/en-us/kb/168958\" rel=\"noreferrer\">MSDN: How to export an instantiation of a STL class</a></li>\n<li><a href=\"http://www.codesynthesis.com/~boris/blog/2010/01/18/dll-export-cxx-templates/\" rel=\"noreferrer\">Microsoft DLL export and C++ templates</a></li>\n<li><a href=\"https://stackoverflow.com/questions/767579/exporting-classes-containing-std-objects-vector-map-etc-from-a-dll\">SO: Exporting classes containing std:: objects from a dll</a></li>\n<li><a href=\"https://stackoverflow.com/questions/4253441/how-to-use-an-exported-class-declspecdllexportin-an-stl-template\">SO: How to use an exported class in an STL template?</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 191, "user_id": 7590399, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-BscwkweoC9w/AAAAAAAAAAI/AAAAAAAADow/BrmhAE1xFdI/photo.jpg?sz=128", "display_name": "Olga Perederieieva", "link": "https://stackoverflow.com/users/7590399/olga-perederieieva"}, "is_accepted": false, "score": 11, "last_activity_date": 1496964869, "creation_date": 1496964869, "answer_id": 44447110, "question_id": 32098001, "link": "https://stackoverflow.com/questions/32098001/stdunique-ptr-pimpl-in-dll-generates-c4251-with-visual-studio/44447110#44447110", "title": "std::unique_ptr pimpl in dll generates C4251 with visual studio", "body": "<p>Instead of exporting the entire class, you could export public methods only:</p>\n\n<pre><code>class Framework\n{\n    Framework(const Framework&amp;) = delete;\n    Framework&amp; operator=(const Framework&amp;) = delete;\n    Framework(Framework&amp;&amp;) = delete;\n    Framework&amp; operator=(Framework&amp;&amp;) = delete;\n\npublic:\n    EXPORT_API Framework();\n    EXPORT_API ~Framework();\n\nprivate:\n    std::unique_ptr&lt;FrameworkImpl&gt; impl_;\n};\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1645, "user_id": 1537817, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8a73c7e60f624e9d80f56368f91fa180?s=128&d=identicon&r=PG", "display_name": "kittikun", "link": "https://stackoverflow.com/users/1537817/kittikun"}, "is_accepted": true, "score": 1, "last_activity_date": 1546540104, "last_edit_date": 1546540104, "creation_date": 1546539340, "answer_id": 54027669, "question_id": 32098001, "link": "https://stackoverflow.com/questions/32098001/stdunique-ptr-pimpl-in-dll-generates-c4251-with-visual-studio/54027669#54027669", "title": "std::unique_ptr pimpl in dll generates C4251 with visual studio", "body": "<p>The solution was to declare the constructor/destructor after the impl declaration and a combination of Olga Perederieieva answer</p>\n\n<p>Please refer to this <a href=\"http://#include\" rel=\"nofollow noreferrer\" title=\"ninniku/image/cmft.h\">website</a> for a detailed explanation and sample</p>\n\n<p>Header:</p>\n\n<pre><code>#include &lt;memory&gt;\n\nclass FridgeImpl;\n\nclass Fridge\n{\npublic:\n   DLL_EXPORT Fridge();\n   DLL_EXPORT ~Fridge();\n   DLL_EXPORT void coolDown();\nprivate:\n   std::unique_ptr&lt;FridgeImpl&gt; impl_;\n};\n</code></pre>\n\n<p>Implementation:</p>\n\n<pre><code>#include \"Engine.h\"\n#include \"Fridge.h\"\n\nclass FridgeImpl\n{\npublic:\n   void coolDown()\n   {\n      /* ... */\n   }\nprivate:\n   Engine engine_;\n};\n\nFridge::Fridge() : impl_(new FridgeImpl) {}\n\nFridge::~Fridge() = default;\n</code></pre>\n"}], "owner": {"reputation": 1645, "user_id": 1537817, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/8a73c7e60f624e9d80f56368f91fa180?s=128&d=identicon&r=PG", "display_name": "kittikun", "link": "https://stackoverflow.com/users/1537817/kittikun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4744, "favorite_count": 4, "accepted_answer_id": 54027669, "answer_count": 3, "score": 21, "last_activity_date": 1546540104, "creation_date": 1439993655, "question_id": 32098001, "link": "https://stackoverflow.com/questions/32098001/stdunique-ptr-pimpl-in-dll-generates-c4251-with-visual-studio", "title": "std::unique_ptr pimpl in dll generates C4251 with visual studio", "body": "<p>This is not a breaking issue but I like to clean my code from warnings so this is getting on my nerves. </p>\n\n<p>I have been using the c++11 version of pimpl idiom to hide the class implementation for my library the usual way.</p>\n\n<pre><code>// dll header\nclass FrameworkImpl;\n\nclass EXPORT_API Framework\n{\n    Framework(const Framework&amp;) = delete;\n    Framework&amp; operator=(const Framework&amp;) = delete;\n    Framework(Framework&amp;&amp;) = delete;\n    Framework&amp; operator=(Framework&amp;&amp;) = delete;\n\npublic:\n    Framework();\n    ~Framework();\n\nprivate:\n    std::unique_ptr&lt;FrameworkImpl&gt; impl_;\n};\n\n// application implementation\nint main()\n{\n    std::unique_ptr&lt;Framework&gt; test = std::make_unique&lt;Framework&gt;();\n}\n</code></pre>\n\n<p>Everything will be fine, but I will keep getting the warning:</p>\n\n<pre><code>warning C4251: 'Framework::impl_': class 'std::unique_ptr&lt;FrameworkImpl,std::default_delete&lt;_Ty&gt;&gt;' needs to have dll-interface to be used by clients of class 'Framework'\n</code></pre>\n\n<p>So I tried have to add:</p>\n\n<pre><code>template class EXPORT_API std::unique_ptr&lt;FrameworkImpl&gt;;\n</code></pre>\n\n<p>Before the forward declaration but the warning would just change to:</p>\n\n<pre><code>warning C4251: 'std::_Unique_ptr_base&lt;_Ty,_Dx&gt;::_Mypair': class 'std::_Compressed_pair&lt;_Dx,FrameworkImpl *,true&gt;' needs to have dll-interface to be used by clients of class 'std::_Unique_ptr_base&lt;_Ty,_Dx&gt;'\n</code></pre>\n\n<p>I have being seeing this issue since VS2010 and I cannot figure a good way to fix this. No problems on gcc or clang and it would break my heart to use the old raw pointer version..</p>\n"}, {"tags": ["c++", "lambda", "this", "language-lawyer", "c++14"], "comments": [{"owner": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 3, "creation_date": 1439993254, "post_id": 32097759, "comment_id": 52090130, "body": "The inconsistencies you note indicate that clang is correct here."}, {"owner": {"reputation": 60956, "user_id": 8922, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f1634a09333f7b391db92e1d2bea6253?s=128&d=identicon&r=PG", "display_name": "Sebastian Redl", "link": "https://stackoverflow.com/users/8922/sebastian-redl"}, "edited": false, "score": 8, "creation_date": 1439993258, "post_id": 32097759, "comment_id": 52090133, "body": "Without even looking at the standard, I can say with absolute certainty that Clang is right. Even if it disagrees with the standard, it&#39;s still right; in that case the standard is wrong. GCC&#39;s behavior makes absolutely no sense whatsoever."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 2, "creation_date": 1439993276, "post_id": 32097759, "comment_id": 52090149, "body": "<a href=\"http://stackoverflow.com/q/20312062/819272\">related but not a dupe?</a>"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "reply_to_user": {"reputation": 135186, "user_id": 464581, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/v2PxU.jpg?s=128&g=1", "display_name": "Cheers and hth. - Alf", "link": "https://stackoverflow.com/users/464581/cheers-and-hth-alf"}, "edited": false, "score": 0, "creation_date": 1439993371, "post_id": 32097759, "comment_id": 52090229, "body": "@Cheers, SebastianRedl: you&#39;re probably right. I&#39;m reporting this on the gcc bug tracker."}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 1, "creation_date": 1439993419, "post_id": 32097759, "comment_id": 52090266, "body": "<a href=\"http://stackoverflow.com/q/31673204/819272\">another related Q&amp;A</a>"}, {"owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "edited": false, "score": 2, "creation_date": 1439993645, "post_id": 32097759, "comment_id": 52090459, "body": "Reported the bug <a href=\"https://gcc.gnu.org/bugzilla/show_bug.cgi?id=67274\" rel=\"nofollow noreferrer\">67274</a>."}, {"owner": {"reputation": 149509, "user_id": 4342498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/l3j88.jpg?s=128&g=1", "display_name": "NathanOliver", "link": "https://stackoverflow.com/users/4342498/nathanoliver"}, "edited": false, "score": 2, "creation_date": 1439993681, "post_id": 32097759, "comment_id": 52090494, "body": "MSVC Community 2015 RC V14.0.22823.1 Will compile all cases as well"}, {"owner": {"reputation": 65373, "user_id": 819272, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/o7w9X.png?s=128&g=1", "display_name": "TemplateRex", "link": "https://stackoverflow.com/users/819272/templaterex"}, "edited": false, "score": 1, "creation_date": 1439993786, "post_id": 32097759, "comment_id": 52090578, "body": "the gcc 5 series is not yet ready for prime time it seems, especially with exotic combinations of C++14 features (generic lambdas, relaxed constexpr). My rough feeling is that 5.1 / 5.2 are to C++14 what 4.6 and 4.7 were to C++11 (i.e. significantly less bug-free than the later 4.8 and .49)"}, {"owner": {"reputation": 1820, "user_id": 1027966, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1691450b8277170ba387ec4f9ae35e1d?s=128&d=identicon&r=PG", "display_name": "Nick Desaulniers", "link": "https://stackoverflow.com/users/1027966/nick-desaulniers"}, "edited": false, "score": 0, "creation_date": 1588018352, "post_id": 32097759, "comment_id": 108733854, "body": "I just hit this with a patch to LLVM: <a href=\"https://reviews.llvm.org/D78849\" rel=\"nofollow noreferrer\">reviews.llvm.org/D78849</a>, <a href=\"https://reviews.llvm.org/D78962\" rel=\"nofollow noreferrer\">reviews.llvm.org/D78962</a>. Playing with your example in godbolt, it looks like this is fixed in g++-7.1 release."}], "answers": [{"comments": [{"owner": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1461070437, "post_id": 32098850, "comment_id": 61023122, "body": "Is there an upstream bug report to track this?"}, {"owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "reply_to_user": {"reputation": 14872, "user_id": 3919155, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/3034f14bf0b65847592b2c2e08b9253e?s=128&d=identicon&r=PG&f=1", "display_name": "jotik", "link": "https://stackoverflow.com/users/3919155/jotik"}, "edited": false, "score": 0, "creation_date": 1461078905, "post_id": 32098850, "comment_id": 61029619, "body": "@jotik Yeah, OP <a href=\"http://stackoverflow.com/questions/32097759/calling-this-member-function-from-generic-lambda-clang-vs-gcc/32098850#comment52090459_32097759\">reported it</a>."}], "tags": [], "owner": {"reputation": 245138, "user_id": 2069064, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1", "display_name": "Barry", "link": "https://stackoverflow.com/users/2069064/barry"}, "is_accepted": true, "score": 18, "last_activity_date": 1439995801, "creation_date": 1439995801, "answer_id": 32098850, "question_id": 32097759, "link": "https://stackoverflow.com/questions/32097759/calling-this-member-function-from-generic-lambda-clang-vs-gcc/32098850#32098850", "title": "Calling `this` member function from generic lambda - clang vs gcc", "body": "<p>This is a gcc bug. From [expr.prim.lambda]:</p>\n\n<blockquote>\n  <p>The <em>lambda-expression</em>\u2019s <em>compound-statement</em> yields the <em>function-body</em> (8.4) of the function call operator,\n  but for purposes of name lookup (3.4), determining the type and value of <code>this</code> (9.3.2) and transforming <em>id-expressions</em>\n  referring to non-static class members into class member access expressions using <code>(*this)</code> (9.3.1), the <em>compound-statement</em> is considered in the context of the <em>lambda-expression</em>. <em>[ Example:</em></p>\n\n<pre><code>struct S1 {\n    int x, y;\n    int operator()(int);\n    void f() {\n        [=]()-&gt;int {\n            return operator()(this-&gt;x + y); \n                // equivalent to S1::operator()(this-&gt;x + (*this).y)\n                // this has type S1*\n        };\n    }\n};\n</code></pre>\n  \n  <p><em>\u2014end example ]</em></p>\n</blockquote>\n\n<p>Since in your example you capture <code>this</code>, the name lookup should include class members of <code>Example</code>, which should therefore find <code>Example::foo</code>. The lookup performed is identical to what would happen if <code>foo(x)</code> appeared in the context of the <em>lambda-expression</em> itself, that is if the code looked like:</p>\n\n<pre><code>void bar()\n{\n    foo(x); // clearly Example::foo(x);\n}\n</code></pre>\n\n<p>At least this bug has a very simple workaround as indicated in the question: just do <code>this-&gt;foo(x);</code>. </p>\n"}], "owner": {"reputation": 82712, "user_id": 598696, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/k1Yif.png?s=128&g=1", "display_name": "Vittorio Romeo", "link": "https://stackoverflow.com/users/598696/vittorio-romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3508, "favorite_count": 5, "accepted_answer_id": 32098850, "answer_count": 1, "score": 39, "last_activity_date": 1439995801, "creation_date": 1439992984, "question_id": 32097759, "link": "https://stackoverflow.com/questions/32097759/calling-this-member-function-from-generic-lambda-clang-vs-gcc", "title": "Calling `this` member function from generic lambda - clang vs gcc", "body": "<p><strong>Issue:</strong> passing a generic lambda <em>(to a template function)</em> that captures <code>this</code> and calls a member function of <code>this</code> without an explicit <code>this-&gt;</code> does not compile on gcc. If the lambda is not generic, or if the lambda is not passed to any other function but called in place, it compiles withoit an explicit <code>this-&gt;</code>. Clang is cool with the code in all situations.</p>\n\n<p>Time for another round of <strong>clang vs gcc</strong>. Who's right?</p>\n\n<p><a href=\"http://melpon.org/wandbox/permlink/M2eH3FUOentPfieM\">Wandbox example</a></p>\n\n<hr>\n\n<pre><code>template&lt;typename TF&gt;\nvoid call(TF&amp;&amp; f)\n{\n    f(1);   \n}\n\nstruct Example\n{        \n    void foo(int){ }\n\n    void bar()\n    {\n        call([this](auto x){ foo(x); });\n    }\n};\n\nint main()\n{\n    Example{}.bar();\n    return 0;\n}\n</code></pre>\n\n<hr>\n\n<ul>\n<li>With <code>bar()</code> = <code>call([this](auto x){ foo(x); });</code>\n\n<ul>\n<li>clang++ 3.6+ <strong>compiles</strong>.</li>\n<li>g++ 5.2+ <strong>does not compile.</strong> \n\n<blockquote>\n  <p>error: cannot call member function 'void Example::foo(int)' without object\n   call([this](auto x){ foo(x); });`</p>\n</blockquote></li>\n</ul></li>\n</ul>\n\n<hr>\n\n<ul>\n<li>With <code>bar()</code> = <code>call([this](auto x){ this-&gt;foo(x); });</code>\n\n<ul>\n<li>clang++ 3.6+ <strong>compiles</strong>.</li>\n<li>g++ 5.2+ <strong>compiles.</strong> </li>\n</ul></li>\n</ul>\n\n<hr>\n\n<ul>\n<li>With <code>bar()</code> = <code>call([this](int x){ foo(x); });</code>\n\n<ul>\n<li>clang++ 3.6+ <strong>compiles</strong>.</li>\n<li>g++ 5.2+ <strong>compiles.</strong> </li>\n</ul></li>\n</ul>\n\n<hr>\n\n<ul>\n<li>With <code>bar()</code> = <code>[this](auto x){ foo(x); }(1);</code>\n\n<ul>\n<li>clang++ 3.6+ <strong>compiles</strong>.</li>\n<li>g++ 5.2+ <strong>compiles.</strong> </li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>Why is the <code>this-&gt;</code> necessary only in the case of a generic lambda?</p>\n\n<p>Why is the <code>this-&gt;</code> not necessary if the lambda isn't passed to <code>call</code>?</p>\n\n<p>Who is being non standard-compliant?</p>\n"}, {"tags": ["c++", "visual-studio", "vcxproj"], "comments": [{"owner": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 1, "creation_date": 1439995346, "post_id": 32097739, "comment_id": 52091831, "body": "It just doesn&#39;t.  The build system only pays attention to <code>&lt;ClCompile&gt;</code>.  Since you never compile a .h file.  <code>&lt;ClInclude&gt;</code> is only interesting to the IDE."}, {"owner": {"reputation": 431, "user_id": 1483597, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7d23a2093cb50c1355c93785c18e5006?s=128&d=identicon&r=PG", "display_name": "user1483597", "link": "https://stackoverflow.com/users/1483597/user1483597"}, "reply_to_user": {"reputation": 870071, "user_id": 17034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cii6b.png?s=128&g=1", "display_name": "Hans Passant", "link": "https://stackoverflow.com/users/17034/hans-passant"}, "edited": false, "score": 0, "creation_date": 1440055727, "post_id": 32097739, "comment_id": 52117350, "body": "So what is the common practice in that case? Do I use only the &quot;additional include directories&quot; option? Otherwise it seems like a double definition of the same header files in one .vcxproj file."}], "owner": {"reputation": 431, "user_id": 1483597, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/7d23a2093cb50c1355c93785c18e5006?s=128&d=identicon&r=PG", "display_name": "user1483597", "link": "https://stackoverflow.com/users/1483597/user1483597"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1596, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1439992933, "creation_date": 1439992933, "question_id": 32097739, "link": "https://stackoverflow.com/questions/32097739/how-to-make-header-files-included-by-clinclude-include-visible-globally-i", "title": "How to make header files included by &lt;ClInclude Include=.../&gt; visible globally in the project?", "body": "<p>When I have this line in my .vcxproj file</p>\n\n<pre><code>&lt;ClInclude Include=\"..\\include\\something_*.h\"/&gt;\n</code></pre>\n\n<p>And then in my .c file located somewhere else I use a simple</p>\n\n<pre><code>#include \"something_a.h\"\n</code></pre>\n\n<p>The header file won't be visible in compilation, although it is visible in the project/solution explorer in the Visual Studio.</p>\n\n<p>I know that I can simply add my include folder to the additional include directories list, and the compiler will use that directory to search for include files, but isn't it something that  tag already supposed to do by itself?</p>\n"}, {"tags": ["c++", "templates", "c++11", "template-meta-programming"], "comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 14958, "user_id": 678093, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/667853b27b3d9f422d6d13924ee4994a?s=128&d=identicon&r=PG", "display_name": "m.s.", "link": "https://stackoverflow.com/users/678093/m-s"}, "edited": false, "score": 0, "creation_date": 1439994368, "post_id": 32097620, "comment_id": 52091021, "body": "It looks similar, but I still don&#39;t understand."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1439994570, "post_id": 32097620, "comment_id": 52091202, "body": "@Adrian do you not understand the solutions or the reason your code doesn&#39;t work? I&#39;ve applied those solutions to your issue in my answer below. Happy to go into further details if there&#39;s something that isn&#39;t clear."}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "reply_to_user": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1439994994, "post_id": 32097620, "comment_id": 52091538, "body": "@TartanLlama: I understand your solutions, but I don&#39;t understand why this  restriction is in place."}], "answers": [{"comments": [{"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1439994737, "post_id": 32098227, "comment_id": 52091335, "body": "Ok, I understand how you are getting around the problem, but I still don&#39;t know <i>why</i> this is a problem."}, {"owner": {"reputation": 1024, "user_id": 1390260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f84b899029f89d5562af0570755c8d02?s=128&d=identicon&r=PG", "display_name": "PiotrSliwa", "link": "https://stackoverflow.com/users/1390260/piotrsliwa"}, "reply_to_user": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1439994984, "post_id": 32098227, "comment_id": 52091527, "body": "@Adrian You have to remember that <code>nullptr</code> has actually its own type - <code>std::nullptr_t</code>. Check out <a href=\"http://stackoverflow.com/questions/1282295/what-exactly-is-nullptr\" title=\"what exactly is nullptr\">stackoverflow.com/questions/1282295/what-exactly-is-nullptr</a>"}, {"owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "edited": false, "score": 0, "creation_date": 1439995104, "post_id": 32098227, "comment_id": 52091635, "body": "I know.  To get around that issue, I had typecasted the value to <code>(T*)nullptr</code> or <code>(T*)0</code>, either of which should have worked."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1439995265, "post_id": 32098227, "comment_id": 52091761, "body": "From my limited understanding of the possible issues, it seems that the answer is &quot;the standard says so&quot;. I guess its because templates are (or should be) processed in two phases, so the type of the non-type template argument expression would be unknown until template instantiation, which may pose some issues for compilers."}, {"owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "edited": false, "score": 0, "creation_date": 1439995576, "post_id": 32098227, "comment_id": 52092018, "body": "Maybe &quot;why is this constraint in the standard&quot; would make a good separate question."}], "tags": [], "owner": {"reputation": 59234, "user_id": 496161, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c425873f547d93f4079ca252b42a886d?s=128&d=identicon&r=PG", "display_name": "TartanLlama", "link": "https://stackoverflow.com/users/496161/tartanllama"}, "is_accepted": true, "score": 4, "last_activity_date": 1439994179, "last_edit_date": 1495542125, "creation_date": 1439994179, "answer_id": 32098227, "question_id": 32097620, "link": "https://stackoverflow.com/questions/32097620/why-cant-i-specialize-with-a-nullptr-template-parameter-on-a-dependent-type/32098227#32098227", "title": "Why can&#39;t I specialize with a nullptr template parameter on a dependent type?", "body": "<p>The <a href=\"https://stackoverflow.com/questions/22486386/partially-specializing-a-non-type-template-parameter-of-dependent-type\">linked question</a> describes the main issue and some solutions, but since its fairly involved I've applied them to your particular problem.</p>\n\n<hr>\n\n<p><strong>Version 1</strong></p>\n\n<p>We can actually use <code>std::integral_constant</code> to hold pointers, so we can leverage that fact to get around the restriction on non-type parameters:</p>\n\n<pre><code>template &lt;typename T, typename U&gt;\nstruct test;\n\ntemplate &lt;typename T&gt;\nstruct test&lt;T, std::integral_constant&lt;T*,nullptr&gt;&gt;\n{\n    void operator()() { std::cout &lt;&lt; \"nullptr\" &lt;&lt; std::endl; }\n};\n\ntemplate &lt;typename R, typename...ARGs, R(*fn)(ARGs...)&gt;\nstruct test&lt;R(ARGs...), std::integral_constant&lt;R(*)(ARGs...),fn&gt;&gt;\n{\n    void operator()() { std::cout &lt;&lt; \"fnptr\" &lt;&lt; std::endl; }\n};\n</code></pre>\n\n<p>Unfortunately the usage looks pretty ugly, but it works:</p>\n\n<pre><code>test&lt;int,std::integral_constant&lt;int*,nullptr&gt;&gt; a;\na();\ntest&lt;decltype(foo), std::integral_constant&lt;decltype(&amp;foo), foo&gt;&gt; b;\nb();\n</code></pre>\n\n<hr>\n\n<p><strong>Version 2</strong></p>\n\n<p>This version uses <code>std::enable_if</code> to do the checking rather than partial specialization:</p>\n\n<pre><code>template &lt;typename T, T*, typename = void&gt;\nstruct test;\n\ntemplate &lt;typename T, T* P&gt;\nstruct test&lt;T, P, typename std::enable_if&lt;(P==nullptr)&gt;::type&gt;\n{\n    void operator()() { std::cout &lt;&lt; \"nullptr\" &lt;&lt; std::endl; }\n};\n\ntemplate &lt;typename T, T* P&gt;\nstruct test&lt;T, P, typename std::enable_if&lt;std::is_function&lt;T&gt;::value&gt;::type&gt;\n{\n    void operator()() { std::cout &lt;&lt; \"fnptr\" &lt;&lt; std::endl; }\n};\n</code></pre>\n\n<p>The usage of this is probably what you originally intended:</p>\n\n<pre><code>test2&lt;int, nullptr&gt; c;\nc();\ntest2&lt;decltype(foo), foo&gt; d;\nd();\n</code></pre>\n\n<p>With this version you don't have instant access to the parameter types of function pointers used as template arguments, but you could easily write some other trait to get them if necessary.</p>\n\n<hr>\n\n<p>Here's a <a href=\"http://coliru.stacked-crooked.com/a/0330ac088616217c\" rel=\"nofollow noreferrer\"><kbd>Live Demo</kbd></a> which shows both versions working.</p>\n"}], "owner": {"reputation": 8353, "user_id": 1366368, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9CxXt.jpg?s=128&g=1", "display_name": "Adrian", "link": "https://stackoverflow.com/users/1366368/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 0, "closed_date": 1439996339, "accepted_answer_id": 32098227, "answer_count": 1, "score": 3, "last_activity_date": 1440079820, "creation_date": 1439992570, "last_edit_date": 1440079820, "question_id": 32097620, "link": "https://stackoverflow.com/questions/32097620/why-cant-i-specialize-with-a-nullptr-template-parameter-on-a-dependent-type", "closed_reason": "Duplicate", "title": "Why can&#39;t I specialize with a nullptr template parameter on a dependent type?", "body": "<p>I'd like to make a specialization of a struct where one uses a function pointer and another doesn't.  However when I do this:</p>\n\n<pre><code>template &lt;typename T, T*&gt;\nstruct test;\n\ntemplate &lt;typename T&gt;\nstruct test&lt;T, nullptr&gt;\n{\n};\n\ntemplate &lt;typename R, typename...ARGs, R(*fn)(ARGs...)&gt;\nstruct test&lt;R(ARGs...), fn&gt;\n{\n};\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>error: type 'T*' of template argument 'nullptr' depends on a template parameter                                                                                                                                                   \n struct test&lt;T, nullptr&gt;\n</code></pre>\n\n<p>What exactly does this mean and how do I make this work?</p>\n"}]